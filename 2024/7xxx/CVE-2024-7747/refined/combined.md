=== Content from plugins.trac.wordpress.org_7a45858b_20250114_192050.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fwoo-wallet%2Ftrunk%2Fincludes%2Fclass-woo-wallet-frontend.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?rev=3145131 "Revision 3145131")
* Next Revision →
* [Blame](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/woo-wallet/trunk/includes/class-woo-wallet-frontend.php)

---

# [source:](/browser?order=name "Go to repository root") [woo-wallet](/browser/woo-wallet?order=name "View woo-wallet")/[trunk](/browser/woo-wallet/trunk?order=name "View trunk")/[includes](/browser/woo-wallet/trunk/includes?order=name "View includes")/[class-woo-wallet-frontend.php](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?order=name "View class-woo-wallet-frontend.php")

View diff against:

View revision:

| [Last change](/changeset/3197069/woo-wallet/trunk/includes/class-woo-wallet-frontend.php "View differences") on this file was [3197069](/changeset/3197069/ "View changeset 3197069"), checked in by subratamal, [7 weeks ago](/timeline?from=2024-11-26T06%3A01%3A33Z&precision=second "See timeline at 11/26/2024 06:01:33 AM") |
| --- |
| Plugin update 1.5.8 |
| * Property **svn:executable** set to   *`*`* | |
| **File size:** 37.6 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Wallet Admin file. |
| [4](#L4) | \* |
| [5](#L5) | \* @package StandaleneTech |
| [6](#L6) | \*/ |
| [7](#L7) |  |
| [8](#L8) | if ( ! defined( 'ABSPATH' ) ) { |
| [9](#L9) | exit; // Exit if accessed directly. |
| [10](#L10) | } |
| [11](#L11) | if ( ! class\_exists( 'Woo\_Wallet\_Frontend' ) ) { |
| [12](#L12) | /\*\* |
| [13](#L13) | \* Wallet Frontend class. |
| [14](#L14) | \*/ |
| [15](#L15) | class Woo\_Wallet\_Frontend { |
| [16](#L16) |  |
| [17](#L17) | /\*\* |
| [18](#L18) | \* The single instance of the class. |
| [19](#L19) | \* |
| [20](#L20) | \* @var Woo\_Wallet\_Frontend |
| [21](#L21) | \* @since 1.1.10 |
| [22](#L22) | \*/ |
| [23](#L23) | protected static $\_instance = null; |
| [24](#L24) |  |
| [25](#L25) | /\*\* |
| [26](#L26) | \* Main instance |
| [27](#L27) | \* |
| [28](#L28) | \* @return class object |
| [29](#L29) | \*/ |
| [30](#L30) | public static function instance() { |
| [31](#L31) | if ( is\_null( self::$\_instance ) ) { |
| [32](#L32) | self::$\_instance = new self(); |
| [33](#L33) | } |
| [34](#L34) | return self::$\_instance; |
| [35](#L35) | } |
| [36](#L36) |  |
| [37](#L37) | /\*\* |
| [38](#L38) | \* Class constructor |
| [39](#L39) | \*/ |
| [40](#L40) | public function \_\_construct() { |
| [41](#L41) | add\_filter( 'wp\_nav\_menu\_items', array( $this, 'add\_wallet\_nav\_menu' ), 100, 2 ); |
| [42](#L42) | add\_filter( 'woocommerce\_endpoint\_woo-wallet\_title', array( $this, 'woocommerce\_endpoint\_title' ), 10, 2 ); |
| [43](#L43) | add\_filter( 'woocommerce\_endpoint\_woo-wallet-transactions\_title', array( $this, 'woocommerce\_endpoint\_title' ), 10, 2 ); |
| [44](#L44) | add\_filter( 'woocommerce\_account\_menu\_items', array( $this, 'woo\_wallet\_menu\_items' ), 10, 1 ); |
| [45](#L45) | add\_action( 'woocommerce\_account\_woo-wallet\_endpoint', array( $this, 'woo\_wallet\_endpoint\_content' ) ); |
| [46](#L46) | add\_action( 'woocommerce\_account\_woo-wallet-transactions\_endpoint', array( $this, 'woo\_wallet\_transactions\_endpoint\_content' ) ); |
| [47](#L47) |  |
| [48](#L48) | add\_filter( 'woocommerce\_is\_purchasable', array( $this, 'make\_woo\_wallet\_recharge\_product\_purchasable' ), 10, 2 ); |
| [49](#L49) | add\_action( 'wp\_loaded', array( $this, 'woo\_wallet\_frontend\_loaded' ), 20 ); |
| [50](#L50) | add\_action( 'woocommerce\_before\_calculate\_totals', array( $this, 'woo\_wallet\_set\_recharge\_product\_price' ) ); |
| [51](#L51) | add\_filter( 'woocommerce\_add\_to\_cart\_validation', array( $this, 'restrict\_other\_from\_add\_to\_cart' ), 20 ); |
| [52](#L52) | add\_action( 'wp\_enqueue\_scripts', array( &$this, 'woo\_wallet\_styles' ), 20 ); |
| [53](#L53) | add\_filter( 'woocommerce\_available\_payment\_gateways', array( $this, 'woocommerce\_available\_payment\_gateways' ), 30 ); |
| [54](#L54) | if ( 'on' === woo\_wallet()->settings\_api->get\_option( 'is\_enable\_cashback\_reward\_program', '\_wallet\_settings\_credit', 'off' ) ) { |
| [55](#L55) | add\_action( 'woocommerce\_before\_cart\_table', array( $this, 'display\_cashback\_on\_cart\_checkout' ) ); |
| [56](#L56) | add\_action( 'woocommerce\_before\_checkout\_form', array( $this, 'display\_cashback\_on\_cart\_checkout' ) ); |
| [57](#L57) |  |
| [58](#L58) | add\_action( 'woocommerce\_blocks\_enqueue\_cart\_block\_scripts\_after', array( $this, 'display\_cashback\_on\_cart\_checkout' ) ); |
| [59](#L59) | add\_action( 'woocommerce\_blocks\_enqueue\_checkout\_block\_scripts\_before', array( $this, 'display\_cashback\_on\_cart\_checkout' ) ); |
| [60](#L60) |  |
| [61](#L61) | add\_action( 'woocommerce\_shop\_loop\_item\_title', array( $this, 'display\_cashback' ), 15 ); |
| [62](#L62) | add\_action( 'woocommerce\_single\_product\_summary', array( $this, 'display\_cashback' ), 15 ); |
| [63](#L63) | add\_filter( 'woocommerce\_available\_variation', array( $this, 'woocommerce\_available\_variation' ), 10, 3 ); |
| [64](#L64) | } |
| [65](#L65) |  |
| [66](#L66) | add\_action( 'woocommerce\_checkout\_order\_processed', array( $this, 'checkout\_order\_processed' ), 30 ); |
| [67](#L67) | add\_action( 'woocommerce\_store\_api\_checkout\_order\_processed', array( $this, 'checkout\_order\_processed' ), 30 ); |
| [68](#L68) |  |
| [69](#L69) | add\_action( 'woocommerce\_review\_order\_after\_order\_total', array( $this, 'woocommerce\_review\_order\_after\_order\_total' ) ); |
| [70](#L70) |  |
| [71](#L71) | add\_filter( 'woocommerce\_coupon\_message', array( $this, 'update\_woocommerce\_coupon\_message\_as\_cashback' ), 10, 3 ); |
| [72](#L72) | add\_filter( 'woocommerce\_cart\_totals\_coupon\_label', array( $this, 'change\_coupon\_label' ), 10, 2 ); |
| [73](#L73) | add\_filter( 'woocommerce\_cart\_get\_total', array( $this, 'woocommerce\_cart\_get\_total' ) ); |
| [74](#L74) |  |
| [75](#L75) | add\_shortcode( 'woo-wallet', \_\_CLASS\_\_ . '::woo\_wallet\_shortcode\_callback' ); |
| [76](#L76) | add\_shortcode( 'mini-wallet', \_\_CLASS\_\_ . '::mini\_wallet\_shortcode\_callback' ); |
| [77](#L77) | add\_action( 'woocommerce\_cart\_calculate\_fees', array( $this, 'woo\_wallet\_add\_partial\_payment\_fee' ) ); |
| [78](#L78) | add\_filter( 'woocommerce\_cart\_totals\_get\_fees\_from\_cart\_taxes', array( $this, 'woocommerce\_cart\_totals\_get\_fees\_from\_cart\_taxes' ), 999, 2 ); |
| [79](#L79) | add\_action( 'woocommerce\_thankyou', array( $this, 'restore\_woocommerce\_cart\_items' ) ); |
| [80](#L80) | add\_filter( 'woo\_wallet\_is\_enable\_transfer', array( $this, 'woo\_wallet\_is\_enable\_transfer' ) ); |
| [81](#L81) |  |
| [82](#L82) | add\_filter( 'wp\_nav\_menu\_objects', array( $this, 'wp\_nav\_menu\_objects' ), 10 ); |
| [83](#L83) |  |
| [84](#L84) | add\_action( 'woocommerce\_order\_details\_after\_order\_table', array( $this, 'remove\_woocommerce\_order\_again\_button\_for\_wallet\_rechargeable\_order' ), 5 ); |
| [85](#L85) |  |
| [86](#L86) | add\_action( 'woocommerce\_cart\_loaded\_from\_session', array( $this, 'woocommerce\_cart\_loaded\_from\_session' ) ); |
| [87](#L87) | } |
| [88](#L88) | /\*\* |
| [89](#L89) | \* Remove wallet rechargeable product from the cart |
| [90](#L90) | \* if another product is added to the cart before. |
| [91](#L91) | \* |
| [92](#L92) | \* @param WC\_Cart $cart cart. |
| [93](#L93) | \*/ |
| [94](#L94) | public function woocommerce\_cart\_loaded\_from\_session( $cart ) { |
| [95](#L95) | if ( count( $cart->get\_cart() ) > 1 ) { |
| [96](#L96) | foreach ( $cart->get\_cart() as $cart\_item\_key => $cart\_item ) { |
| [97](#L97) | $product\_id = $cart\_item['variation\_id'] ? $cart\_item['variation\_id'] : $cart\_item['product\_id']; |
| [98](#L98) | if ( get\_wallet\_rechargeable\_product()->get\_id() === $product\_id ) { |
| [99](#L99) | WC()->cart->remove\_cart\_item( $cart\_item\_key ); |
| [100](#L100) | } |
| [101](#L101) | } |
| [102](#L102) | } |
| [103](#L103) | } |
| [104](#L104) |  |
| [105](#L105) |  |
| [106](#L106) | /\*\* |
| [107](#L107) | \* Remove order again button for wallet rechargeable order. |
| [108](#L108) | \* |
| [109](#L109) | \* @param WC\_Order $order order. |
| [110](#L110) | \*/ |
| [111](#L111) | public function remove\_woocommerce\_order\_again\_button\_for\_wallet\_rechargeable\_order( $order ) { |
| [112](#L112) | if ( is\_wallet\_rechargeable\_order( $order ) ) { |
| [113](#L113) | remove\_action( 'woocommerce\_order\_details\_after\_order\_table', 'woocommerce\_order\_again\_button' ); |
| [114](#L114) | } |
| [115](#L115) | } |
| [116](#L116) | /\*\* |
| [117](#L117) | \* Show mini wallet on nav menu. |
| [118](#L118) | \* |
| [119](#L119) | \* @param object $items items. |
| [120](#L120) | \* @return object |
| [121](#L121) | \*/ |
| [122](#L122) | public function wp\_nav\_menu\_objects( $items ) { |
| [123](#L123) | foreach ( $items as &$item ) { |
| [124](#L124) | if ( 'my-wallet' === $item->post\_name && get\_post\_meta( $item->ID, '\_show\_wallet\_icon\_amount', true ) ) { |
| [125](#L125) | $item->title = apply\_filters( 'wp\_wallet\_nav\_menu\_title', '<span dir="rtl" class="woo-wallet-icon-wallet"></span>&nbsp;' . woo\_wallet()->wallet->get\_wallet\_balance( get\_current\_user\_id() ), $item ); |
| [126](#L126) | } |
| [127](#L127) | } |
| [128](#L128) | return $items; |
| [129](#L129) | } |
| [130](#L130) |  |
| [131](#L131) | /\*\* |
| [132](#L132) | \* Add a new item to a menu |
| [133](#L133) | \* |
| [134](#L134) | \* @param string $menu menu. |
| [135](#L135) | \* @param object $args args. |
| [136](#L136) | \* @return string |
| [137](#L137) | \*/ |
| [138](#L138) | public function add\_wallet\_nav\_menu( $menu, $args ) { |
| [139](#L139) | // Check if add a new item to a menu assigned to Primary Navigation Menu location. |
| [140](#L140) | if ( apply\_filters( 'woo\_wallet\_hide\_nav\_menu', false, $menu, $args ) || in\_array( $args->theme\_location, apply\_filters( 'woo\_wallet\_exclude\_nav\_menu\_location', array(), $menu, $args ) ) ) { |
| [141](#L141) | return $menu; |
| [142](#L142) | } |
| [143](#L143) |  |
| [144](#L144) | if ( 'off' === woo\_wallet()->settings\_api->get\_option( $args->theme\_location, '\_wallet\_settings\_general', 'off' ) || ! is\_user\_logged\_in() ) { |
| [145](#L145) | return $menu; |
| [146](#L146) | } |
| [147](#L147) |  |
| [148](#L148) | ob\_start(); |
| [149](#L149) | woo\_wallet()->get\_template( 'mini-wallet.php' ); |
| [150](#L150) | $mini\_wallet = ob\_get\_clean(); |
| [151](#L151) | return $menu . $mini\_wallet; |
| [152](#L152) | } |
| [153](#L153) |  |
| [154](#L154) | /\*\* |
| [155](#L155) | \* Change WooCommerce endpoint title for wallet pages. |
| [156](#L156) | \* |
| [157](#L157) | \* @param string $title title. |
| [158](#L158) | \* @param string $endpoint endpoint. |
| [159](#L159) | \*/ |
| [160](#L160) | public function woocommerce\_endpoint\_title( $title, $endpoint ) { |
| [161](#L161) | switch ( $endpoint ) { |
| [162](#L162) | case 'woo-wallet': |
| [163](#L163) | $title = apply\_filters( 'woo\_wallet\_account\_menu\_title', \_\_( 'My Wallet', 'woo-wallet' ) ); |
| [164](#L164) | break; |
| [165](#L165) | case 'woo-wallet-transactions': |
| [166](#L166) | $title = apply\_filters( 'woo\_wallet\_account\_transaction\_menu\_title', \_\_( 'Wallet Transactions', 'woo-wallet' ) ); |
| [167](#L167) | break; |
| [168](#L168) | default: |
| [169](#L169) | $title = ''; |
| [170](#L170) | break; |
| [171](#L171) | } |
| [172](#L172) | return $title; |
| [173](#L173) | } |
| [174](#L174) |  |
| [175](#L175) | /\*\* |
| [176](#L176) | \* Register and enqueue frontend styles and scripts |
| [177](#L177) | \*/ |
| [178](#L178) | public function woo\_wallet\_styles() { |
| [179](#L179) | $wp\_scripts = wp\_scripts(); |
| [180](#L180) | $suffix     = defined( 'SCRIPT\_DEBUG' ) && SCRIPT\_DEBUG ? '' : '.min'; |
| [181](#L181) | wp\_register\_style( 'woo-wallet-payment-jquery-ui', woo\_wallet()->plugin\_url() . '/assets/jquery/css/jquery-ui.css', false, WOO\_WALLET\_PLUGIN\_VERSION, false ); |
| [182](#L182) | wp\_register\_style( 'jquery-datatables-style', woo\_wallet()->plugin\_url() . '/assets/jquery/css/jquery.dataTables.min.css', false, WOO\_WALLET\_PLUGIN\_VERSION, false ); |
| [183](#L183) | wp\_register\_style( 'jquery-datatables-responsive-style', woo\_wallet()->plugin\_url() . '/assets/jquery/css/responsive.dataTables.min.css', false, WOO\_WALLET\_PLUGIN\_VERSION, false ); |
| [184](#L184) | wp\_register\_style( 'woo-wallet-style', woo\_wallet()->plugin\_url() . '/assets/css/frontend.css', array(), WOO\_WALLET\_PLUGIN\_VERSION ); |
| [185](#L185) | // Add RTL support. |
| [186](#L186) | wp\_style\_add\_data( 'woo-wallet-style', 'rtl', 'replace' ); |
| [187](#L187) | wp\_register\_script( 'jquery-datatables-script', woo\_wallet()->plugin\_url() . '/assets/jquery/js/jquery.dataTables.min.js', array( 'jquery' ), WOO\_WALLET\_PLUGIN\_VERSION, true ); |
| [188](#L188) | wp\_register\_script( 'jquery-datatables-responsive-script', woo\_wallet()->plugin\_url() . '/assets/jquery/js/dataTables.responsive.min.js', array( 'jquery' ), WOO\_WALLET\_PLUGIN\_VERSION, true ); |
| [189](#L189) | wp\_register\_script( 'wc-endpoint-wallet', woo\_wallet()->plugin\_url() . '/assets/js/frontend/wc-endpoint-wallet' . $suffix . '.js', array( 'jquery', 'jquery-datatables-script' ), WOO\_WALLET\_PLUGIN\_VERSION, true ); |
| [190](#L190) | $data\_table\_columns    = apply\_filters( |
| [191](#L191) | 'woo\_wallet\_transactons\_datatable\_columns', |
| [192](#L192) | array( |
| [193](#L193) | array( |
| [194](#L194) | 'data'      => 'id', |
| [195](#L195) | 'title'     => \_\_( 'ID', 'woo-wallet' ), |
| [196](#L196) | 'orderable' => false, |
| [197](#L197) | ), |
| [198](#L198) | array( |
| [199](#L199) | 'data'      => 'type', |
| [200](#L200) | 'title'     => \_\_( 'Type', 'woo-wallet' ), |
| [201](#L201) | 'orderable' => false, |
| [202](#L202) | ), |
| [203](#L203) | array( |
| [204](#L204) | 'data'      => 'amount', |
| [205](#L205) | 'title'     => \_\_( 'Amount', 'woo-wallet' ), |
| [206](#L206) | 'orderable' => false, |
| [207](#L207) | ), |
| [208](#L208) | array( |
| [209](#L209) | 'data'      => 'details', |
| [210](#L210) | 'title'     => \_\_( 'Details', 'woo-wallet' ), |
| [211](#L211) | 'orderable' => false, |
| [212](#L212) | ), |
| [213](#L213) | array( |
| [214](#L214) | 'data'      => 'date', |
| [215](#L215) | 'title'     => \_\_( 'Date', 'woo-wallet' ), |
| [216](#L216) | 'orderable' => false, |
| [217](#L217) | ), |
| [218](#L218) | ) |
| [219](#L219) | ); |
| [220](#L220) | $wallet\_localize\_param = array( |
| [221](#L221) | 'ajax\_url'                => admin\_url( 'admin-ajax.php' ), |
| [222](#L222) | 'transaction\_table\_nonce' => wp\_create\_nonce( 'woo-wallet-transactions' ), |
| [223](#L223) | 'search\_user\_nonce'       => wp\_create\_nonce( 'search-user' ), |
| [224](#L224) | 'search\_by\_user\_email'    => apply\_filters( 'woo\_wallet\_user\_search\_exact\_match', true ), |
| [225](#L225) | 'i18n'                    => array( |
| [226](#L226) | 'emptyTable'           => \_\_( 'No transactions available', 'woo-wallet' ), |
| [227](#L227) | /\* translators: menu length \*/ |
| [228](#L228) | 'lengthMenu'           => sprintf( \_\_( 'Show %s entries', 'woo-wallet' ), '\_MENU\_' ), |
| [229](#L229) | /\* translators: 1.start 2.end 3.total \*/ |
| [230](#L230) | 'info'                 => sprintf( \_\_( 'Showing %1$1s to %2$2s of %3$3s entries', 'woo-wallet' ), '\_START\_', '\_END\_', '\_TOTAL\_' ), |
| [231](#L231) | /\* translators: max length \*/ |
| [232](#L232) | 'infoFiltered'         => sprintf( \_\_( '(filtered from %1s total entries)', 'woo-wallet' ), '\_MAX\_' ), |
| [233](#L233) | 'infoEmpty'            => \_\_( 'Showing 0 to 0 of 0 entries', 'woo-wallet' ), |
| [234](#L234) | 'paginate'             => array( |
| [235](#L235) | 'first'    => \_\_( 'First', 'woo-wallet' ), |
| [236](#L236) | 'last'     => \_\_( 'Last', 'woo-wallet' ), |
| [237](#L237) | 'next'     => \_\_( 'Next', 'woo-wallet' ), |
| [238](#L238) | 'previous' => \_\_( 'Previous', 'woo-wallet' ), |
| [239](#L239) | ), |
| [240](#L240) | 'non\_valid\_email\_text' => \_\_( 'Please enter a valid email address', 'woo-wallet' ), |
| [241](#L241) | 'no\_resualt'           => \_\_( 'No results found', 'woo-wallet' ), |
| [242](#L242) | 'zeroRecords'          => \_\_( 'No matching records found', 'woo-wallet' ), |
| [243](#L243) | 'inputTooShort'        => \_\_( 'Please enter 3 or more characters', 'woo-wallet' ), |
| [244](#L244) | 'searching'            => \_\_( 'Searching…', 'woo-wallet' ), |
| [245](#L245) | 'processing'           => \_\_( 'Processing...', 'woo-wallet' ), |
| [246](#L246) | 'search'               => \_\_( 'Search by date:', 'woo-wallet' ), |
| [247](#L247) | 'placeholder'          => \_\_( 'yyyy-mm-dd', 'woo-wallet' ), |
| [248](#L248) | ), |
| [249](#L249) | 'columns'                 => $data\_table\_columns, |
| [250](#L250) | ); |
| [251](#L251) | wp\_localize\_script( 'wc-endpoint-wallet', 'wallet\_param', $wallet\_localize\_param ); |
| [252](#L252) | wp\_enqueue\_style( 'woo-wallet-style' ); |
| [253](#L253) | if ( is\_account\_page() ) { |
| [254](#L254) | wp\_enqueue\_style( 'woo-wallet-payment-jquery-ui' ); |
| [255](#L255) | wp\_enqueue\_style( 'dashicons' ); |
| [256](#L256) | wp\_enqueue\_style( 'select2' ); |
| [257](#L257) | wp\_enqueue\_style( 'jquery-datatables-style' ); |
| [258](#L258) | wp\_enqueue\_style( 'jquery-datatables-responsive-style' ); |
| [259](#L259) | wp\_enqueue\_script( 'jquery-ui-datepicker' ); |
| [260](#L260) | wp\_enqueue\_script( 'selectWoo' ); |
| [261](#L261) | wp\_enqueue\_script( 'jquery-datatables-script' ); |
| [262](#L262) | wp\_enqueue\_script( 'jquery-datatables-responsive-script' ); |
| [263](#L263) | wp\_enqueue\_script( 'wc-endpoint-wallet' ); |
| [264](#L264) | } |
| [265](#L265) | $add\_to\_cart\_variation = "jQuery(function ($) { $(document).on('show\_variation', function (event, variation, purchasable) { if(variation.cashback\_amount) { $('.on-woo-wallet-cashback').show(); $('.on-woo-wallet-cashback').html(variation.cashback\_html); } else { $('.on-woo-wallet-cashback').hide(); } }) });"; |
| [266](#L266) | wp\_add\_inline\_script( 'wc-add-to-cart-variation', $add\_to\_cart\_variation ); |
| [267](#L267) | } |
| [268](#L268) |  |
| [269](#L269) | /\*\* |
| [270](#L270) | \* WooCommerce wallet menu |
| [271](#L271) | \* |
| [272](#L272) | \* @param array $items items. |
| [273](#L273) | \* @return array |
| [274](#L274) | \*/ |
| [275](#L275) | public function woo\_wallet\_menu\_items( $items ) { |
| [276](#L276) | if ( is\_wallet\_account\_locked() ) { |
| [277](#L277) | return $items; |
| [278](#L278) | } |
| [279](#L279) | unset( $items['edit-account'] ); |
| [280](#L280) | unset( $items['customer-logout'] ); |
| [281](#L281) | $items['woo-wallet']      = apply\_filters( 'woo\_wallet\_account\_menu\_title', \_\_( 'My Wallet', 'woo-wallet' ) ); |
| [282](#L282) | $items['edit-account']    = \_\_( 'Account details', 'woo-wallet' ); |
| [283](#L283) | $items['customer-logout'] = \_\_( 'Logout', 'woo-wallet' ); |
| [284](#L284) | return $items; |
| [285](#L285) | } |
| [286](#L286) |  |
| [287](#L287) | /\*\* |
| [288](#L288) | \* WooCommerce endpoint contents for wallet |
| [289](#L289) | \*/ |
| [290](#L290) | public function woo\_wallet\_endpoint\_content() { |
| [291](#L291) | if ( is\_wallet\_account\_locked() ) { |
| [292](#L292) | woo\_wallet()->get\_template( 'no-access.php' ); |
| [293](#L293) | } else { |
| [294](#L294) | woo\_wallet()->get\_template( 'wc-endpoint-wallet.php' ); |
| [295](#L295) | } |
| [296](#L296) | } |
| [297](#L297) |  |
| [298](#L298) | /\*\* |
| [299](#L299) | \* WooCommerce endpoint contents for transaction details |
| [300](#L300) | \*/ |
| [301](#L301) | public function woo\_wallet\_transactions\_endpoint\_content() { |
| [302](#L302) | if ( is\_wallet\_account\_locked() ) { |
| [303](#L303) | woo\_wallet()->get\_template( 'no-access.php' ); |
| [304](#L304) | } else { |
| [305](#L305) | woo\_wallet()->get\_template( 'wc-endpoint-wallet-transactions.php' ); |
| [306](#L306) | } |
| [307](#L307) | } |
| [308](#L308) |  |
| [309](#L309) | /\*\* |
| [310](#L310) | \* Do wallet frontend load functions. |
| [311](#L311) | \*/ |
| [312](#L312) | public function woo\_wallet\_frontend\_loaded() { |
| [313](#L313) | /\*\* |
| [314](#L314) | \* Process wallet recharge. |
| [315](#L315) | \*/ |
| [316](#L316) | if ( isset( $\_POST['woo\_wallet\_balance\_to\_add'] ) && ! empty( $\_POST['woo\_wallet\_balance\_to\_add'] ) ) { // phpcs:disable WordPress.Security.NonceVerification.Missing |
| [317](#L317) | $is\_valid = $this->is\_valid\_wallet\_recharge\_amount( wp\_unslash( $\_POST['woo\_wallet\_balance\_to\_add'] ) ); // phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
| [318](#L318) | if ( $is\_valid['is\_valid'] ) { |
| [319](#L319) | add\_filter( 'woocommerce\_add\_cart\_item\_data', array( $this, 'add\_woo\_wallet\_product\_price\_to\_cart\_item\_data' ), 10, 2 ); |
| [320](#L320) | $product = get\_wallet\_rechargeable\_product(); |
| [321](#L321) | if ( $product ) { |
| [322](#L322) | if ( ! is\_wallet\_rechargeable\_cart() ) { |
| [323](#L323) | woo\_wallet\_persistent\_cart\_update(); |
| [324](#L324) | } |
| [325](#L325) | wc()->cart->empty\_cart(); |
| [326](#L326) | wc()->cart->add\_to\_cart( $product->get\_id() ); |
| [327](#L327) | $redirect\_url = apply\_filters( 'woo\_wallet\_redirect\_to\_checkout\_after\_added\_amount', true ) ? wc\_get\_checkout\_url() : wc\_get\_cart\_url(); |
| [328](#L328) | wp\_safe\_redirect( $redirect\_url ); |
| [329](#L329) | exit(); |
| [330](#L330) | } |
| [331](#L331) | } else { |
| [332](#L332) | wc\_add\_notice( $is\_valid['message'], 'error' ); |
| [333](#L333) | } |
| [334](#L334) | } |
| [335](#L335) | /\*\* |
| [336](#L336) | \* Process wallet transfer. |
| [337](#L337) | \*/ |
| [338](#L338) | if ( isset( $\_POST['woo\_wallet\_transfer\_fund'] ) && apply\_filters( 'woo\_wallet\_is\_enable\_transfer', 'on' === woo\_wallet()->settings\_api->get\_option( 'is\_enable\_wallet\_transfer', '\_wallet\_settings\_general', 'on' ) ) ) { |
| [339](#L339) | $response = $this->do\_wallet\_transfer(); |
| [340](#L340) | if ( ! $response['is\_valid'] ) { |
| [341](#L341) | wc\_add\_notice( $response['message'], 'error' ); |
| [342](#L342) | } else { |
| [343](#L343) | wc\_add\_notice( $response['message'] ); |
| [344](#L344) | $location = wp\_get\_raw\_referer() ? wp\_get\_raw\_referer() : esc\_url( wc\_get\_account\_endpoint\_url( get\_option( 'woocommerce\_woo\_wallet\_endpoint', 'my-wallet' ) ) ); |
| [345](#L345) | wp\_safe\_redirect( $location ); |
| [346](#L346) | exit(); |
| [347](#L347) | } |
| [348](#L348) | } |
| [349](#L349) | } |
| [350](#L350) |  |
| [351](#L351) | /\*\* |
| [352](#L352) | \* Check wallet recharge amount. |
| [353](#L353) | \* |
| [354](#L354) | \* @param float $amount amount. |
| [355](#L355) | \* @return array |
| [356](#L356) | \*/ |
| [357](#L357) | public function is\_valid\_wallet\_recharge\_amount( $amount = 0 ) { |
| [358](#L358) | $response         = array( 'is\_valid' => true ); |
| [359](#L359) | $min\_topup\_amount = woo\_wallet()->settings\_api->get\_option( 'min\_topup\_amount', '\_wallet\_settings\_general', 0 ); |
| [360](#L360) | $max\_topup\_amount = woo\_wallet()->settings\_api->get\_option( 'max\_topup\_amount', '\_wallet\_settings\_general', 0 ); |
| [361](#L361) | if ( isset( $\_POST['woo\_wallet\_topup'] ) && wp\_verify\_nonce( wp\_unslash( $\_POST['woo\_wallet\_topup'] ), 'woo\_wallet\_topup' ) ) { // phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
| [362](#L362) | if ( $min\_topup\_amount && $amount < $min\_topup\_amount ) { |
| [363](#L363) | $response = array( |
| [364](#L364) | 'is\_valid' => false, |
| [365](#L365) | /\* translators: Minimum topup amount \*/ |
| [366](#L366) | 'message'  => sprintf( \_\_( 'The minimum amount needed for wallet top up is %s', 'woo-wallet' ), wc\_price( $min\_topup\_amount, woo\_wallet\_wc\_price\_args() ) ), |
| [367](#L367) | ); |
| [368](#L368) | } |
| [369](#L369) | if ( $max\_topup\_amount && $amount > $max\_topup\_amount ) { |
| [370](#L370) | $response = array( |
| [371](#L371) | 'is\_valid' => false, |
| [372](#L372) | /\* translators: Maximum topup amount \*/ |
| [373](#L373) | 'message'  => sprintf( \_\_( 'Wallet top up amount should be less than %s', 'woo-wallet' ), wc\_price( $max\_topup\_amount, woo\_wallet\_wc\_price\_args() ) ), |
| [374](#L374) | ); |
| [375](#L375) | } |
| [376](#L376) | if ( $min\_topup\_amount && $max\_topup\_amount && ( $amount < $min\_topup\_amount || $amount > $max\_topup\_amount ) ) { |
| [377](#L377) | $response = array( |
| [378](#L378) | 'is\_valid' => false, |
| [379](#L379) | /\* translators: 1. Minimum topup amount 2.Minimum topup amount \*/ |
| [380](#L380) | 'message'  => sprintf( \_\_( 'Wallet top up amount should be between %1$s and %2$s', 'woo-wallet' ), wc\_price( $min\_topup\_amount, woo\_wallet\_wc\_price\_args() ), wc\_price( $max\_topup\_amount, woo\_wallet\_wc\_price\_args() ) ), |
| [381](#L381) | ); |
| [382](#L382) | } |
| [383](#L383) | } else { |
| [384](#L384) | $response = array( |
| [385](#L385) | 'is\_valid' => false, |
| [386](#L386) | 'message'  => \_\_( 'Cheatin&#8217; huh?', 'woo-wallet' ), |
| [387](#L387) | ); |
| [388](#L388) | } |
| [389](#L389) | return apply\_filters( 'woo\_wallet\_is\_valid\_wallet\_recharge\_amount', $response, $amount ); |
| [390](#L390) | } |
| [391](#L391) |  |
| [392](#L392) | /\*\* |
| [393](#L393) | \* Do transfer wallet amount. |
| [394](#L394) | \* |
| [395](#L395) | \* @return array |
| [396](#L396) | \*/ |
| [397](#L397) | public function do\_wallet\_transfer() { |
| [398](#L398) | $response = array( |
| [399](#L399) | 'is\_valid' => true, |
| [400](#L400) | 'message'  => '', |
| [401](#L401) | ); |
| [402](#L402) | if ( isset( $\_POST['woo\_wallet\_transfer'] ) && wp\_verify\_nonce( wp\_unslash( $\_POST['woo\_wallet\_transfer'] ), 'woo\_wallet\_transfer' ) ) { // phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
| [403](#L403) | $whom             = isset( $\_POST['woo\_wallet\_transfer\_user\_id'] ) ? absint( sanitize\_text\_field( wp\_unslash( $\_POST['woo\_wallet\_transfer\_user\_id'] ) ) ) : 0; |
| [404](#L404) | $amount           = isset( $\_POST['woo\_wallet\_transfer\_amount'] ) ? floatval( sanitize\_text\_field( wp\_unslash( $\_POST['woo\_wallet\_transfer\_amount'] ) ) ) : 0; |
| [405](#L405) | $whom             = apply\_filters( 'woo\_wallet\_transfer\_user\_id', $whom ); |
| [406](#L406) | $whom             = get\_userdata( $whom ); |
| [407](#L407) | $current\_user\_obj = get\_userdata( get\_current\_user\_id() ); |
| [408](#L408) | if ( get\_current\_user\_id() === $whom->ID ) { |
| [409](#L409) | return array( |
| [410](#L410) | 'is\_valid' => false, |
| [411](#L411) | 'message'  => sprintf( \_\_( 'Invalid user', 'woo-wallet' ) ), |
| [412](#L412) | ); |
| [413](#L413) | } |
| [414](#L414) | /\* translators: user\_email \*/ |
| [415](#L415) | $credit\_note = isset( $\_POST['woo\_wallet\_transfer\_note'] ) && ! empty( $\_POST['woo\_wallet\_transfer\_note'] ) ? sanitize\_text\_field( wp\_unslash( $\_POST['woo\_wallet\_transfer\_note'] ) ) : sprintf( \_\_( 'Wallet funds received from %s', 'woo-wallet' ), $current\_user\_obj->user\_email ); |
| [416](#L416) | /\* translators: user\_email \*/ |
| [417](#L417) | $debit\_note  = sprintf( \_\_( 'Wallet funds transfer to %s', 'woo-wallet' ), $whom->user\_email ); |
| [418](#L418) | $credit\_note = apply\_filters( 'woo\_wallet\_transfer\_credit\_transaction\_note', $credit\_note, $whom, $amount ); |
| [419](#L419) | $debit\_note  = apply\_filters( 'woo\_wallet\_transfer\_debit\_transaction\_note', $debit\_note, $whom, $amount ); |
| [420](#L420) |  |
| [421](#L421) | $transfer\_charge\_type   = woo\_wallet()->settings\_api->get\_option( 'transfer\_charge\_type', '\_wallet\_settings\_general', 'percent' ); |
| [422](#L422) | $transfer\_charge\_amount = woo\_wallet()->settings\_api->get\_option( 'transfer\_charge\_amount', '\_wallet\_settings\_general', 0 ); |
| [423](#L423) | $transfer\_charge        = 0; |
| [424](#L424) | if ( 'percent' === $transfer\_charge\_type ) { |
| [425](#L425) | $transfer\_charge = ( $amount \* $transfer\_charge\_amount ) / 100; |
| [426](#L426) | } else { |
| [427](#L427) | $transfer\_charge = $transfer\_charge\_amount; |
| [428](#L428) | } |
| [429](#L429) | $transfer\_charge = apply\_filters( 'woo\_wallet\_transfer\_charge\_amount', $transfer\_charge, $whom ); |
| [430](#L430) | $credit\_amount   = apply\_filters( 'woo\_wallet\_transfer\_credit\_amount', $amount, $whom ); |
| [431](#L431) | $debit\_amount    = apply\_filters( 'woo\_wallet\_transfer\_debit\_amount', $amount + $transfer\_charge, $whom ); |
| [432](#L432) | if ( woo\_wallet()->settings\_api->get\_option( 'min\_transfer\_amount', '\_wallet\_settings\_general', 0 ) ) { |
| [433](#L433) | if ( woo\_wallet()->settings\_api->get\_option( 'min\_transfer\_amount', '\_wallet\_settings\_general', 0 ) > $amount ) { |
| [434](#L434) | return array( |
| [435](#L435) | 'is\_valid' => false, |
| [436](#L436) | /\* translators: Max transfer amount \*/ |
| [437](#L437) | 'message'  => sprintf( \_\_( 'Minimum transfer amount is %s', 'woo-wallet' ), wc\_price( woo\_wallet()->settings\_api->get\_option( 'min\_transfer\_amount', '\_wallet\_settings\_general', 0 ), woo\_wallet\_wc\_price\_args() ) ), |
| [438](#L438) | ); |
| [439](#L439) | } |
| [440](#L440) | } |
| [441](#L441) | if ( ! $whom ) { |
| [442](#L442) | return array( |
| [443](#L443) | 'is\_valid' => false, |
| [444](#L444) | 'message'  => \_\_( 'Invalid user', 'woo-wallet' ), |
| [445](#L445) | ); |
| [446](#L446) | } |
| [447](#L447) | if ( $debit\_amount > woo\_wallet()->wallet->get\_wallet\_balance( get\_current\_user\_id(), 'edit' ) ) { |
| [448](#L448) | return array( |
| [449](#L449) | 'is\_valid' => false, |
| [450](#L450) | 'message'  => \_\_( 'Entered amount is greater than current wallet amount.', 'woo-wallet' ), |
| [451](#L451) | ); |
| [452](#L452) | } |
| [453](#L453) | $credit\_transaction\_id = woo\_wallet()->wallet->credit( $whom->ID, $credit\_amount, $credit\_note ); |
| [454](#L454) | if ( $credit\_transaction\_id ) { |
| [455](#L455) | do\_action( 'woo\_wallet\_transfer\_amount\_credited', $credit\_transaction\_id, $whom->ID, get\_current\_user\_id() ); |
| [456](#L456) | $debit\_transaction\_id = woo\_wallet()->wallet->debit( get\_current\_user\_id(), $debit\_amount, $debit\_note ); |
| [457](#L457) | do\_action( 'woo\_wallet\_transfer\_amount\_debited', $debit\_transaction\_id, get\_current\_user\_id(), $whom->ID ); |
| [458](#L458) | update\_wallet\_transaction\_meta( $debit\_transaction\_id, '\_wallet\_transfer\_charge', $transfer\_charge, get\_current\_user\_id() ); |
| [459](#L459) | $response = array( |
| [460](#L460) | 'is\_valid' => true, |
| [461](#L461) | 'message'  => \_\_( 'Amount transferred successfully!', 'woo-wallet' ), |
| [462](#L462) | ); |
| [463](#L463) | } |
| [464](#L464) | } else { |
| [465](#L465) | $response = array( |
| [466](#L466) | 'is\_valid' => false, |
| [467](#L467) | 'message'  => \_\_( 'Cheatin&#8217; huh?', 'woo-wallet' ), |
| [468](#L468) | ); |
| [469](#L469) | } |
| [470](#L470) | return $response; |
| [471](#L471) | } |
| [472](#L472) |  |
| [473](#L473) | /\*\* |
| [474](#L474) | \* WooCommerce add cart item data |
| [475](#L475) | \* |
| [476](#L476) | \* @param array $cart\_item\_data cart\_item\_data. |
| [477](#L477) | \* @param int   $product\_id product\_id. |
| [478](#L478) | \* @return array |
| [479](#L479) | \*/ |
| [480](#L480) | public function add\_woo\_wallet\_product\_price\_to\_cart\_item\_data( $cart\_item\_data, $product\_id ) { |
| [481](#L481) | $product = wc\_get\_product( $product\_id ); |
| [482](#L482) | if ( isset( $\_POST['woo\_wallet\_balance\_to\_add'] ) && $product ) { // phpcs:ignore WordPress.Security.NonceVerification.Recommended |
| [483](#L483) | $recharge\_amount                   = apply\_filters( 'woo\_wallet\_rechargeable\_amount', round( sanitize\_text\_field( wp\_unslash( $\_POST['woo\_wallet\_balance\_to\_add'] ) ), 2 ) ); |
| [484](#L484) | $cart\_item\_data['recharge\_amount'] = $recharge\_amount; |
| [485](#L485) | } |
| [486](#L486) | return $cart\_item\_data; |
| [487](#L487) | } |
| [488](#L488) |  |
| [489](#L489) | /\*\* |
| [490](#L490) | \* Make rechargeable product purchasable |
| [491](#L491) | \* |
| [492](#L492) | \* @param boolean           $is\_purchasable is\_purchasable. |
| [493](#L493) | \* @param WC\_Product object $product product. |
| [494](#L494) | \* @return boolean |
| [495](#L495) | \*/ |
| [496](#L496) | public function make\_woo\_wallet\_recharge\_product\_purchasable( $is\_purchasable, $product ) { |
| [497](#L497) | $wallet\_product = get\_wallet\_rechargeable\_product(); |
| [498](#L498) | if ( $wallet\_product ) { |
| [499](#L499) | if ( $wallet\_product->get\_id() === $product->get\_id() ) { |
| [500](#L500) | $is\_purchasable = true; |
| [501](#L501) | } |
| [502](#L502) | } |
| [503](#L503) | return $is\_purchasable; |
| [504](#L504) | } |
| [505](#L505) |  |
| [506](#L506) | /\*\* |
| [507](#L507) | \* Set topup product price at run time |
| [508](#L508) | \* |
| [509](#L509) | \* @param WC\_Cart $cart cart. |
| [510](#L510) | \*/ |
| [511](#L511) | public function woo\_wallet\_set\_recharge\_product\_price( $cart ) { |
| [512](#L512) | $product = get\_wallet\_rechargeable\_product(); |
| [513](#L513) | if ( ! $product && empty( $cart->cart\_contents ) ) { |
| [514](#L514) | return; |
| [515](#L515) | } |
| [516](#L516) | foreach ( $cart->cart\_contents as $key => $value ) { |
| [517](#L517) | if ( isset( $value['recharge\_amount'] ) && $value['recharge\_amount'] && $product->get\_id() == $value['product\_id'] ) { |
| [518](#L518) | $value['data']->set\_price( $value['recharge\_amount'] ); |
| [519](#L519) | } |
| [520](#L520) | } |
| [521](#L521) | } |
| [522](#L522) |  |
| [523](#L523) | /\*\* |
| [524](#L524) | \* Restrict customer to order other product along with rechargeable product |
| [525](#L525) | \* |
| [526](#L526) | \* @param boolean $valid is valid. |
| [527](#L527) | \* @return boolean |
| [528](#L528) | \*/ |
| [529](#L529) | public function restrict\_other\_from\_add\_to\_cart( $valid ) { |
| [530](#L530) | if ( is\_wallet\_rechargeable\_cart() ) { |
| [531](#L531) | wc()->cart->empty\_cart(); |
| [532](#L532) | } |
| [533](#L533) | return $valid; |
| [534](#L534) | } |
| [535](#L535) |  |
| [536](#L536) | /\*\* |
| [537](#L537) | \* Filter WooCommerce available payment gateway |
| [538](#L538) | \* for add balance to wallet |
| [539](#L539) | \* |
| [540](#L540) | \* @param array $\_available\_gateways \_available\_gateways. |
| [541](#L541) | \* @return boolean |
| [542](#L542) | \*/ |
| [543](#L543) | public function woocommerce\_available\_payment\_gateways( $\_available\_gateways ) { |
| [544](#L544) | if ( is\_wallet\_rechargeable\_cart() ) { |
| [545](#L545) | foreach ( $\_available\_gateways as $gateway\_id => $gateway ) { |
| [546](#L546) | if ( woo\_wallet()->settings\_api->get\_option( $gateway\_id, '\_wallet\_settings\_general', 'on' ) != 'on' ) { |
| [547](#L547) | unset( $\_available\_gateways[ $gateway\_id ] ); |
| [548](#L548) | } |
| [549](#L549) | } |
| [550](#L550) | } |
| [551](#L551) | return $\_available\_gateways; |
| [552](#L552) | } |
| [553](#L553) |  |
| [554](#L554) | /\*\* |
| [555](#L555) | \* Cashback notice |
| [556](#L556) | \*/ |
| [557](#L557) | public function display\_cashback\_on\_cart\_checkout() { |
| [558](#L558) | $cashback\_amount = woo\_wallet()->cashback->calculate\_cashback(); |
| [559](#L559) | if ( $cashback\_amount && ! is\_wallet\_rechargeable\_cart() && apply\_filters( 'display\_cashback\_notice\_at\_woocommerce\_page', ! is\_wallet\_account\_locked() ) ) : |
| [560](#L560) | $cashback\_notice\_text = ''; |
| [561](#L561) | if ( is\_user\_logged\_in() ) { |
| [562](#L562) | /\* translators: 1:cashback amount \*/ |
| [563](#L563) | $cashback\_notice\_text = apply\_filters( 'woo\_wallet\_cashback\_notice\_text', sprintf( \_\_( 'Upon placing this order a cashback of %s will be credited to your wallet.', 'woo-wallet' ), wc\_price( $cashback\_amount, woo\_wallet\_wc\_price\_args() ) ), $cashback\_amount ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [564](#L564) | } else { |
| [565](#L565) | /\* translators: 1: Login URL, 2:wallet amount \*/ |
| [566](#L566) | $cashback\_notice\_text = apply\_filters( 'woo\_wallet\_cashback\_notice\_text', sprintf( \_\_( 'Please <a href="%1$s">log in</a> to avail %2$s cashback from this order.', 'woo-wallet' ), esc\_url( get\_permalink( get\_option( 'woocommerce\_myaccount\_page\_id' ) ) ), wc\_price( $cashback\_amount, woo\_wallet\_wc\_price\_args() ) ), $cashback\_amount ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [567](#L567) | } |
| [568](#L568) | wc\_print\_notice( $cashback\_notice\_text, 'notice' ); |
| [569](#L569) | endif; |
| [570](#L570) | } |
| [571](#L571) |  |
| [572](#L572) | /\*\* |
| [573](#L573) | \* Handel cashback calculation on order processed hook |
| [574](#L574) | \* |
| [575](#L575) | \* @param int     @param WC\_Order|int $order order. |
| [576](#L576) | \*/ |
| [577](#L577) | public function checkout\_order\_processed( $order ) { |
| [578](#L578) | if ( ! $order instanceof WC\_Order ) { |
| [579](#L579) | $order = wc\_get\_order( $order ); |
| [580](#L580) | } |
| [581](#L581) | $cashback\_amount = woo\_wallet()->cashback->calculate\_cashback(); |
| [582](#L582) | if ( $cashback\_amount && ! is\_wallet\_rechargeable\_order( wc\_get\_order( $order->get\_id() ) ) && is\_user\_logged\_in() ) { |
| [583](#L583) | WOO\_Wallet\_Helper::update\_order\_meta\_data( $order->get\_id(), '\_wallet\_cashback', $cashback\_amount ); |
| [584](#L584) | } |
| [585](#L585) | $\_coupon\_cashback\_amount = 0; |
| [586](#L586) | foreach ( WC()->cart->get\_coupons() as $code => $coupon ) { |
| [587](#L587) | $coupon\_id           = $coupon->get\_id(); |
| [588](#L588) | $\_is\_coupon\_cashback = get\_post\_meta( $coupon\_id, '\_is\_coupon\_cashback', true ); |
| [589](#L589) | if ( 'yes' === $\_is\_coupon\_cashback && is\_user\_logged\_in() ) { |
| [590](#L590) | $\_coupon\_cashback\_amount += WC()->cart->get\_coupon\_discount\_amount( $code, WC()->cart->display\_cart\_ex\_tax ); |
| [591](#L591) | } |
| [592](#L592) | } |
| [593](#L593) | if ( $\_coupon\_cashback\_amount ) { |
| [594](#L594) | $discount\_total  = $order->get\_discount\_total( 'edit' ); |
| [595](#L595) | $discount\_total -= $\_coupon\_cashback\_amount; |
| [596](#L596) | $order->set\_discount\_total( $discount\_total ); |
| [597](#L597) | $order->set\_total( $order->get\_total( 'edit' ) + $\_coupon\_cashback\_amount ); |
| [598](#L598) | WOO\_Wallet\_Helper::update\_order\_meta\_data( $order, '\_coupon\_cashback\_amount', $\_coupon\_cashback\_amount ); |
| [599](#L599) | } |
| [600](#L600) | } |
| [601](#L601) |  |
| [602](#L602) | /\*\* |
| [603](#L603) | \* Sets partial payment amount to cart as negative fee |
| [604](#L604) | \* |
| [605](#L605) | \* @since 1.2.1 |
| [606](#L606) | \*/ |
| [607](#L607) | public function woo\_wallet\_add\_partial\_payment\_fee() { |
| [608](#L608) | $parial\_payment\_amount = apply\_filters( 'woo\_wallet\_partial\_payment\_amount', wc()->session->get( 'partial\_payment\_amount', 0 ) && woo\_wallet()->wallet->get\_wallet\_balance( get\_current\_user\_id(), 'edit' ) >= wc()->session->get( 'partial\_payment\_amount', 0 ) ? wc()->session->get( 'partial\_payment\_amount', 0 ) : woo\_wallet()->wallet->get\_wallet\_balance( get\_current\_user\_id(), 'edit' ) ); |
| [609](#L609) |  |
| [610](#L610) | if ( $parial\_payment\_amount > 0 ) { |
| [611](#L611) | $fee = array( |
| [612](#L612) | 'id'        => '\_via\_wallet\_partial\_payment', |
| [613](#L613) | 'name'      => \_\_( 'Via wallet', 'woo-wallet' ), |
| [614](#L614) | 'amount'    => (float) -1 \* $parial\_payment\_amount, |
| [615](#L615) | 'taxable'   => false, |
| [616](#L616) | 'tax\_class' => 'non-taxable', |
| [617](#L617) | ); |
| [618](#L618) | if ( is\_enable\_wallet\_partial\_payment() && $parial\_payment\_amount ) { |
| [619](#L619) | wc()->cart->fees\_api()->add\_fee( $fee ); |
| [620](#L620) | } else { |
| [621](#L621) | $all\_fees = wc()->cart->fees\_api()->get\_fees(); |
| [622](#L622) | if ( isset( $all\_fees['\_via\_wallet\_partial\_payment'] ) ) { |
| [623](#L623) | unset( $all\_fees['\_via\_wallet\_partial\_payment'] ); |
| [624](#L624) | wc()->cart->fees\_api()->set\_fees( $all\_fees ); |
| [625](#L625) | } |
| [626](#L626) | } |
| [627](#L627) | } |
| [628](#L628) | } |
| [629](#L629) |  |
| [630](#L630) | /\*\* |
| [631](#L631) | \* Unset Fee tax for partial amount |
| [632](#L632) | \* |
| [633](#L633) | \* @param array  $fee\_taxes fee\_taxes. |
| [634](#L634) | \* @param object $fee fee. |
| [635](#L635) | \* @return array |
| [636](#L636) | \*/ |
| [637](#L637) | public function woocommerce\_cart\_totals\_get\_fees\_from\_cart\_taxes( $fee\_taxes, $fee ) { |
| [638](#L638) | if ( '\_via\_wallet\_partial\_payment' === $fee->object->id ) { |
| [639](#L639) | $fee\_taxes = array(); |
| [640](#L640) | } |
| [641](#L641) | return $fee\_taxes; |
| [642](#L642) | } |
| [643](#L643) |  |
| [644](#L644) | /\*\* |
| [645](#L645) | \* Function that display partial payment option |
| [646](#L646) | \* |
| [647](#L647) | \* @return NULL |
| [648](#L648) | \*/ |
| [649](#L649) | public function woocommerce\_review\_order\_after\_order\_total() { |
| [650](#L650) | if ( apply\_filters( 'woo\_wallet\_disable\_partial\_payment', ( is\_full\_payment\_through\_wallet() || is\_wallet\_rechargeable\_cart() || is\_wallet\_account\_locked() ) ) ) { |
| [651](#L651) | return; |
| [652](#L652) | } |
| [653](#L653) | wp\_enqueue\_style( 'dashicons' ); |
| [654](#L654) | wp\_enqueue\_style( 'woo-wallet-payment-jquery-ui' ); |
| [655](#L655) | wp\_enqueue\_script( 'jquery-ui-tooltip' ); |
| [656](#L656) | woo\_wallet()->get\_template( 'woo-wallet-partial-payment.php' ); |
| [657](#L657) | } |
| [658](#L658) |  |
| [659](#L659) | /\*\* |
| [660](#L660) | \* Add cashback amount and cashback HTML to variation data. |
| [661](#L661) | \* |
| [662](#L662) | \* @param array                $args args. |
| [663](#L663) | \* @param string               $product\_class product\_class. |
| [664](#L664) | \* @param WC\_Product\_Variation $variation variation. |
| [665](#L665) | \* @return array |
| [666](#L666) | \*/ |
| [667](#L667) | public function woocommerce\_available\_variation( $args, $product\_class, $variation ) { |
| [668](#L668) | $cashback\_amount = 0; |
| [669](#L669) | if ( 'product' === woo\_wallet()->settings\_api->get\_option( 'cashback\_rule', '\_wallet\_settings\_credit', 'cart' ) ) { |
| [670](#L670) | $cashback\_amount = woo\_wallet()->cashback->get\_product\_cashback\_amount( $variation ); |
| [671](#L671) | } elseif ( 'product\_cat' === woo\_wallet()->settings\_api->get\_option( 'cashback\_rule', '\_wallet\_settings\_credit', 'cart' ) ) { |
| [672](#L672) | $cashback\_amount = woo\_wallet()->cashback->get\_product\_category\_wise\_cashback\_amount( $variation ); |
| [673](#L673) | } |
| [674](#L674) | $cashback\_amount         = apply\_filters( 'woo\_wallet\_variation\_cashback\_amount', $cashback\_amount, $variation ); |
| [675](#L675) | $args['cashback\_amount'] = $cashback\_amount; |
| [676](#L676) | $args['cashback\_html']   = wc\_price( $cashback\_amount, woo\_wallet\_wc\_price\_args() ) . \_\_( ' Cashback', 'woo-wallet' ); |
| [677](#L677) | return $args; |
| [678](#L678) | } |
| [679](#L679) |  |
| [680](#L680) | /\*\* |
| [681](#L681) | \* Display cashback amount in product |
| [682](#L682) | \* |
| [683](#L683) | \* @return void |
| [684](#L684) | \*/ |
| [685](#L685) | public function display\_cashback() { |
| [686](#L686) | $user\_id = get\_current\_user\_id(); |
| [687](#L687) | if ( ! is\_user\_logged\_in() ) { |
| [688](#L688) | return; |
| [689](#L689) | } |
| [690](#L690) | $user         = new WP\_User( $user\_id ); |
| [691](#L691) | $exclude\_role = woo\_wallet()->settings\_api->get\_option( 'exclude\_role', '\_wallet\_settings\_credit', array() ); |
| [692](#L692) | if ( ! array\_diff( $user->roles, $exclude\_role ) ) { |
| [693](#L693) | return; |
| [694](#L694) | } |
| [695](#L695) | $product = wc\_get\_product( get\_the\_ID() ); |
| [696](#L696) | if ( ! $product || is\_wallet\_account\_locked() ) { |
| [697](#L697) | return; |
| [698](#L698) | } |
| [699](#L699) | if ( $product->has\_child() ) { |
| [700](#L700) | $product = wc\_get\_product( current( $product->get\_children() ) ); |
| [701](#L701) | } |
| [702](#L702) | $cashback\_amount = 0; |
| [703](#L703) | if ( 'product' === woo\_wallet()->settings\_api->get\_option( 'cashback\_rule', '\_wallet\_settings\_credit', 'cart' ) ) { |
| [704](#L704) | $cashback\_amount = woo\_wallet()->cashback->get\_product\_cashback\_amount( $product ); |
| [705](#L705) | } elseif ( 'product\_cat' === woo\_wallet()->settings\_api->get\_option( 'cashback\_rule', '\_wallet\_settings\_credit', 'cart' ) ) { |
| [706](#L706) | $cashback\_amount = woo\_wallet()->cashback->get\_product\_category\_wise\_cashback\_amount( $product ); |
| [707](#L707) | } |
| [708](#L708) | $cashback\_amount = apply\_filters( 'woo\_wallet\_product\_cashback\_amount', $cashback\_amount, get\_the\_ID() ); |
| [709](#L709) | if ( $cashback\_amount ) { |
| [710](#L710) | $cashback\_html = '<span class="on-woo-wallet-cashback">' . wc\_price( $cashback\_amount, woo\_wallet\_wc\_price\_args() ) . \_\_( ' Cashback', 'woo-wallet' ) . '</span>'; |
| [711](#L711) | } else { |
| [712](#L712) | $cashback\_html = '<span class="on-woo-wallet-cashback" style="display:none;"></span>'; |
| [713](#L713) | } |
| [714](#L714) | echo apply\_filters( 'woo\_wallet\_product\_cashback\_html', $cashback\_html, get\_the\_ID() ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [715](#L715) | } |
| [716](#L716) |  |
| [717](#L717) | /\*\* |
| [718](#L718) | \* Update woocommerce coupon message. |
| [719](#L719) | \* |
| [720](#L720) | \* @param string $msg msg. |
| [721](#L721) | \* @param int    $msg\_code msg\_code. |
| [722](#L722) | \* @param Object $coupon coupon. |
| [723](#L723) | \* @return string |
| [724](#L724) | \*/ |
| [725](#L725) | public function update\_woocommerce\_coupon\_message\_as\_cashback( $msg, $msg\_code, $coupon ) { |
| [726](#L726) | $coupon\_id           = $coupon->get\_id(); |
| [727](#L727) | $\_is\_coupon\_cashback = get\_post\_meta( $coupon\_id, '\_is\_coupon\_cashback', true ); |
| [728](#L728) | if ( 'yes' === $\_is\_coupon\_cashback && 200 === $msg\_code ) { |
| [729](#L729) | $msg = \_\_( 'Coupon code applied successfully as cashback.', 'woo-wallet' ); |
| [730](#L730) | } |
| [731](#L731) | return $msg; |
| [732](#L732) | } |
| [733](#L733) |  |
| [734](#L734) | /\*\* |
| [735](#L735) | \* Change coupon label in cart and checkout page |
| [736](#L736) | \* |
| [737](#L737) | \* @param string $label label. |
| [738](#L738) | \* @param Object $coupon coupon. |
| [739](#L739) | \* @return string |
| [740](#L740) | \*/ |
| [741](#L741) | public function change\_coupon\_label( $label, $coupon ) { |
| [742](#L742) | $coupon\_id           = $coupon->get\_id(); |
| [743](#L743) | $\_is\_coupon\_cashback = get\_post\_meta( $coupon\_id, '\_is\_coupon\_cashback', true ); |
| [744](#L744) | if ( 'yes' === $\_is\_coupon\_cashback ) { |
| [745](#L745) | /\* translators: coupon code \*/ |
| [746](#L746) | $label = sprintf( esc\_html\_\_( 'Cashback: %s', 'woo-wallet' ), $coupon->get\_code() ); |
| [747](#L747) | } |
| [748](#L748) | return $label; |
| [749](#L749) | } |
| [750](#L750) |  |
| [751](#L751) | /\*\* |
| [752](#L752) | \* Update WC Cart get\_total if cashback coupon applied. |
| [753](#L753) | \* |
| [754](#L754) | \* @param mixed $total total. |
| [755](#L755) | \* @return float |
| [756](#L756) | \*/ |
| [757](#L757) | public function woocommerce\_cart\_get\_total( $total ) { |
| [758](#L758) | if ( ! is\_numeric( $total ) ) { |
| [759](#L759) | $total = (float) $total; |
| [760](#L760) | } |
| [761](#L761) | $total += get\_woowallet\_coupon\_cashback\_amount(); |
| [762](#L762) | return (string) $total; |
| [763](#L763) | } |
| [764](#L764) |  |
| [765](#L765) | /\*\* |
| [766](#L766) | \* Shortcode Wrapper. |
| [767](#L767) | \* |
| [768](#L768) | \* @param string[] $function Callback function. |
| [769](#L769) | \* @param array    $atts     Attributes. Default to empty array. |
| [770](#L770) | \* |
| [771](#L771) | \* @return string |
| [772](#L772) | \*/ |
| [773](#L773) | public static function shortcode\_wrapper( $function, $atts = array() ) { |
| [774](#L774) | ob\_start(); |
| [775](#L775) | call\_user\_func( $function, $atts ); |
| [776](#L776) | return ob\_get\_clean(); |
| [777](#L777) | } |
| [778](#L778) |  |
| [779](#L779) | /\*\* |
| [780](#L780) | \* Wallet shortcode callback |
| [781](#L781) | \* |
| [782](#L782) | \* @param array $atts atts. |
| [783](#L783) | \* @return string |
| [784](#L784) | \*/ |
| [785](#L785) | public static function woo\_wallet\_shortcode\_callback( $atts ) { |
| [786](#L786) | return self::shortcode\_wrapper( array( 'Woo\_Wallet\_Frontend', 'woo\_wallet\_shortcode\_output' ), $atts ); |
| [787](#L787) | } |
| [788](#L788) | /\*\* |
| [789](#L789) | \* Mini Wallet shortcode |
| [790](#L790) | \* |
| [791](#L791) | \* @param array $atts atts. |
| [792](#L792) | \* @return string Shortcode output |
| [793](#L793) | \*/ |
| [794](#L794) | public static function mini\_wallet\_shortcode\_callback( $atts ) { |
| [795](#L795) | return self::shortcode\_wrapper( array( 'Woo\_Wallet\_Frontend', 'mini\_wallet\_shortcode\_output' ), $atts ); |
| [796](#L796) | } |
| [797](#L797) |  |
| [798](#L798) | /\*\* |
| [799](#L799) | \* Wallet shortcode output |
| [800](#L800) | \* |
| [801](#L801) | \* @param array $atts atts. |
| [802](#L802) | \*/ |
| [803](#L803) | public static function woo\_wallet\_shortcode\_output( $atts ) { |
| [804](#L804) | if ( ! is\_user\_logged\_in() ) { |
| [805](#L805) | echo '<div class="woocommerce">'; |
| [806](#L806) | wc\_get\_template( 'myaccount/form-login.php' ); |
| [807](#L807) | echo '</div>'; |
| [808](#L808) | } elseif ( is\_wallet\_account\_locked() ) { |
| [809](#L809) | woo\_wallet()->get\_template( 'no-access.php' ); |
| [810](#L810) | } else { |
| [811](#L811) | wp\_enqueue\_style( 'woo-wallet-payment-jquery-ui' ); |
| [812](#L812) | wp\_enqueue\_style( 'dashicons' ); |
| [813](#L813) | wp\_enqueue\_style( 'select2' ); |
| [814](#L814) | wp\_enqueue\_style( 'jquery-datatables-style' ); |
| [815](#L815) | wp\_enqueue\_style( 'jquery-datatables-responsive-style' ); |
| [816](#L816) | wp\_enqueue\_script( 'jquery-datatables-script' ); |
| [817](#L817) | wp\_enqueue\_script( 'jquery-datatables-responsive-script' ); |
| [818](#L818) | wp\_enqueue\_script( 'selectWoo' ); |
| [819](#L819) | wp\_enqueue\_script( 'jquery-ui-datepicker' ); |
| [820](#L820) | wp\_enqueue\_script( 'wc-endpoint-wallet' ); |
| [821](#L821) | if ( isset( $\_GET['wallet\_action'] ) && ! empty( $\_GET['wallet\_action'] ) ) { // phpcs:ignore WordPress.Security.NonceVerification.Recommended |
| [822](#L822) | if ( 'view\_transactions' === $\_GET['wallet\_action'] ) { // phpcs:ignore WordPress.Security.NonceVerification.Recommended |
| [823](#L823) | woo\_wallet()->get\_template( 'wc-endpoint-wallet-transactions.php' ); |
| [824](#L824) | } elseif ( in\_array( $\_GET['wallet\_action'], apply\_filters( 'woo\_wallet\_endpoint\_actions', array( 'add', 'transfer' ) ), true ) ) { // phpcs:ignore WordPress.Security.NonceVerification.Recommended |
| [825](#L825) | woo\_wallet()->get\_template( 'wc-endpoint-wallet.php' ); |
| [826](#L826) | } |
| [827](#L827) | do\_action( 'woo\_wallet\_shortcode\_action', wp\_unslash( $\_GET['wallet\_action'] ) ); // phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized, WordPress.Security.NonceVerification.Recommended |
| [828](#L828) | } else { |
| [829](#L829) | woo\_wallet()->get\_template( 'wc-endpoint-wallet.php' ); |
| [830](#L830) | } |
| [831](#L831) | } |
| [832](#L832) | } |
| [833](#L833) | /\*\* |
| [834](#L834) | \* Mini wallet shortcode output. |
| [835](#L835) | \* |
| [836](#L836) | \* @param array $atts atts. |
| [837](#L837) | \*/ |
| [838](#L838) | public static function mini\_wallet\_shortcode\_output( $atts ) { |
| [839](#L839) | ?> |
| [840](#L840) | <a href="<?php echo esc\_url( wc\_get\_account\_endpoint\_url( get\_option( 'woocommerce\_woo\_wallet\_endpoint', 'my-wallet' ) ) ); ?>" class="woo-wallet-menu-contents" title="<?php esc\_html\_e( 'Current wallet balance', 'woo-wallet' ); ?>"> |
| [841](#L841) | <span dir="rtl" class="woo-wallet-icon-wallet"></span> |
| [842](#L842) | &nbsp; |
| [843](#L843) | <?php echo woo\_wallet()->wallet->get\_wallet\_balance( get\_current\_user\_id() ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped ?> |
| [844](#L844) | </a> |
| [845](#L845) | <?php |
| [846](#L846) | } |
| [847](#L847) |  |
| [848](#L848) | /\*\* |
| [849](#L849) | \* Restore cart items after wallet top-up. |
| [850](#L850) | \*/ |
| [851](#L851) | public function restore\_woocommerce\_cart\_items() { |
| [852](#L852) | $saved\_cart = woo\_wallet\_get\_saved\_cart(); |
| [853](#L853) | if ( $saved\_cart ) { |
| [854](#L854) | foreach ( $saved\_cart as $cart\_item\_key => $restore\_item ) { |
| [855](#L855) | $product = wc\_get\_product( $restore\_item['variation\_id'] ? $restore\_item['variation\_id'] : $restore\_item['product\_id'] ); |
| [856](#L856) | if ( $product ) { |
| [857](#L857) | wc()->cart->cart\_contents[ $cart\_item\_key ]         = $restore\_item; |
| [858](#L858) | wc()->cart->cart\_contents[ $cart\_item\_key ]['data'] = wc\_get\_product( $restore\_item['variation\_id'] ? $restore\_item['variation\_id'] : $restore\_item['product\_id'] ); |
| [859](#L859) | do\_action( 'woocommerce\_restore\_cart\_item', $cart\_item\_key, wc()->cart ); |
| [860](#L860) |  |
| [861](#L861) | do\_action( 'woocommerce\_cart\_item\_restored', $cart\_item\_key, wc()->cart ); |
| [862](#L862) | } |
| [863](#L863) | } |
| [864](#L864) |  |
| [865](#L865) | woo\_wallet\_persistent\_cart\_destroy(); |
| [866](#L866) | } |
| [867](#L867) | } |
| [868](#L868) | /\*\* |
| [869](#L869) | \* Check if wallet transfer enabled |
| [870](#L870) | \* |
| [871](#L871) | \* @param bool $is\_enable is\_enable. |
| [872](#L872) | \*/ |
| [873](#L873) | public function woo\_wallet\_is\_enable\_transfer( $is\_enable ) { |
| [874](#L874) | if ( 'on' !== woo\_wallet()->settings\_api->get\_option( 'is\_enable\_wallet\_transfer', '\_wallet\_settings\_general', 'on' ) ) { |
| [875](#L875) | $is\_enable = false; |
| [876](#L876) | } |
| [877](#L877) | return $is\_enable; |
| [878](#L878) | } |
| [879](#L879) | } |
| [880](#L880) |  |
| [881](#L881) | } |
| [882](#L882) | Woo\_Wallet\_Frontend::instance(); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?format=txt)
* [Original Format](/export/3222452/woo-wallet/trunk/includes/class-woo-wallet-frontend.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_02c74f80_20250114_192055.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3145131)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3145130 "Changeset 3145130")
* [Next Changeset](/changeset/3145132 "Changeset 3145132") →

---

# Changeset 3145131

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/02/2024 07:19:26 AM
([4 months](/timeline?from=2024-09-02T07%3A19%3A26Z&precision=second "See timeline at 09/02/2024 07:19:26 AM") ago)

Author:
subratamal
Message:

Plugin update 1.5.7

Location:
[woo-wallet](/browser/woo-wallet?rev=3145131)
Files:

149 added
6 edited

* [tags/1.5.7](/browser/woo-wallet/tags/1.5.7?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/LICENSE](/browser/woo-wallet/tags/1.5.7/LICENSE?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets](/browser/woo-wallet/tags/1.5.7/assets?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css](/browser/woo-wallet/tags/1.5.7/assets/css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css/admin-rtl.css](/browser/woo-wallet/tags/1.5.7/assets/css/admin-rtl.css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css/admin.css](/browser/woo-wallet/tags/1.5.7/assets/css/admin.css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css/admin.css.map](/browser/woo-wallet/tags/1.5.7/assets/css/admin.css.map?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css/admin.scss](/browser/woo-wallet/tags/1.5.7/assets/css/admin.scss?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css/export-rtl.css](/browser/woo-wallet/tags/1.5.7/assets/css/export-rtl.css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css/export.css](/browser/woo-wallet/tags/1.5.7/assets/css/export.css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css/export.css.map](/browser/woo-wallet/tags/1.5.7/assets/css/export.css.map?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css/export.scss](/browser/woo-wallet/tags/1.5.7/assets/css/export.scss?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css/frontend-rtl.css](/browser/woo-wallet/tags/1.5.7/assets/css/frontend-rtl.css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css/frontend.css](/browser/woo-wallet/tags/1.5.7/assets/css/frontend.css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css/frontend.css.map](/browser/woo-wallet/tags/1.5.7/assets/css/frontend.css.map?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/css/frontend.scss](/browser/woo-wallet/tags/1.5.7/assets/css/frontend.scss?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/fonts](/browser/woo-wallet/tags/1.5.7/assets/fonts?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/fonts/woowallet.eot](/browser/woo-wallet/tags/1.5.7/assets/fonts/woowallet.eot?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/fonts/woowallet.svg](/browser/woo-wallet/tags/1.5.7/assets/fonts/woowallet.svg?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/fonts/woowallet.ttf](/browser/woo-wallet/tags/1.5.7/assets/fonts/woowallet.ttf?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/fonts/woowallet.woff](/browser/woo-wallet/tags/1.5.7/assets/fonts/woowallet.woff?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/images](/browser/woo-wallet/tags/1.5.7/assets/images?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/images/wallet-affiliatewp.png](/browser/woo-wallet/tags/1.5.7/assets/images/wallet-affiliatewp.png?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/images/wallet-coupons.png](/browser/woo-wallet/tags/1.5.7/assets/images/wallet-coupons.png?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/images/wallet-importer.png](/browser/woo-wallet/tags/1.5.7/assets/images/wallet-importer.png?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/images/wallet-withdrawal.png](/browser/woo-wallet/tags/1.5.7/assets/images/wallet-withdrawal.png?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery](/browser/woo-wallet/tags/1.5.7/assets/jquery?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/css](/browser/woo-wallet/tags/1.5.7/assets/jquery/css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/css/images](/browser/woo-wallet/tags/1.5.7/assets/jquery/css/images?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/css/images/ui-icons\_444444\_256x240.png](/browser/woo-wallet/tags/1.5.7/assets/jquery/css/images/ui-icons_444444_256x240.png?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/css/images/ui-icons\_555555\_256x240.png](/browser/woo-wallet/tags/1.5.7/assets/jquery/css/images/ui-icons_555555_256x240.png?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/css/images/ui-icons\_777620\_256x240.png](/browser/woo-wallet/tags/1.5.7/assets/jquery/css/images/ui-icons_777620_256x240.png?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/css/images/ui-icons\_777777\_256x240.png](/browser/woo-wallet/tags/1.5.7/assets/jquery/css/images/ui-icons_777777_256x240.png?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/css/images/ui-icons\_cc0000\_256x240.png](/browser/woo-wallet/tags/1.5.7/assets/jquery/css/images/ui-icons_cc0000_256x240.png?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/css/images/ui-icons\_ffffff\_256x240.png](/browser/woo-wallet/tags/1.5.7/assets/jquery/css/images/ui-icons_ffffff_256x240.png?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/css/jquery-ui.css](/browser/woo-wallet/tags/1.5.7/assets/jquery/css/jquery-ui.css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/css/jquery.dataTables.min.css](/browser/woo-wallet/tags/1.5.7/assets/jquery/css/jquery.dataTables.min.css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/css/responsive.dataTables.min.css](/browser/woo-wallet/tags/1.5.7/assets/jquery/css/responsive.dataTables.min.css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/js](/browser/woo-wallet/tags/1.5.7/assets/jquery/js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/js/dataTables.responsive.min.js](/browser/woo-wallet/tags/1.5.7/assets/jquery/js/dataTables.responsive.min.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/jquery/js/jquery.dataTables.min.js](/browser/woo-wallet/tags/1.5.7/assets/jquery/js/jquery.dataTables.min.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js](/browser/woo-wallet/tags/1.5.7/assets/js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin](/browser/woo-wallet/tags/1.5.7/assets/js/admin?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin/admin-actions.js](/browser/woo-wallet/tags/1.5.7/assets/js/admin/admin-actions.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin/admin-actions.min.js](/browser/woo-wallet/tags/1.5.7/assets/js/admin/admin-actions.min.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin/admin-order.js](/browser/woo-wallet/tags/1.5.7/assets/js/admin/admin-order.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin/admin-order.min.js](/browser/woo-wallet/tags/1.5.7/assets/js/admin/admin-order.min.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin/admin-product.js](/browser/woo-wallet/tags/1.5.7/assets/js/admin/admin-product.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin/admin-product.min.js](/browser/woo-wallet/tags/1.5.7/assets/js/admin/admin-product.min.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin/admin-settings.js](/browser/woo-wallet/tags/1.5.7/assets/js/admin/admin-settings.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin/admin-settings.min.js](/browser/woo-wallet/tags/1.5.7/assets/js/admin/admin-settings.min.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin/admin.js](/browser/woo-wallet/tags/1.5.7/assets/js/admin/admin.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin/admin.min.js](/browser/woo-wallet/tags/1.5.7/assets/js/admin/admin.min.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin/export.js](/browser/woo-wallet/tags/1.5.7/assets/js/admin/export.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/admin/export.min.js](/browser/woo-wallet/tags/1.5.7/assets/js/admin/export.min.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/frontend](/browser/woo-wallet/tags/1.5.7/assets/js/frontend?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/frontend/wc-endpoint-wallet.js](/browser/woo-wallet/tags/1.5.7/assets/js/frontend/wc-endpoint-wallet.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/assets/js/frontend/wc-endpoint-wallet.min.js](/browser/woo-wallet/tags/1.5.7/assets/js/frontend/wc-endpoint-wallet.min.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/build](/browser/woo-wallet/tags/1.5.7/build?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/build/partial-payment](/browser/woo-wallet/tags/1.5.7/build/partial-payment?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/build/partial-payment/index.asset.php](/browser/woo-wallet/tags/1.5.7/build/partial-payment/index.asset.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/build/partial-payment/index.js](/browser/woo-wallet/tags/1.5.7/build/partial-payment/index.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/build/partial-payment/index.js.map](/browser/woo-wallet/tags/1.5.7/build/partial-payment/index.js.map?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/build/partial-payment/style-index.css](/browser/woo-wallet/tags/1.5.7/build/partial-payment/style-index.css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/build/partial-payment/style-index.css.map](/browser/woo-wallet/tags/1.5.7/build/partial-payment/style-index.css.map?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/build/payment-method](/browser/woo-wallet/tags/1.5.7/build/payment-method?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/build/payment-method/index.asset.php](/browser/woo-wallet/tags/1.5.7/build/payment-method/index.asset.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/build/payment-method/index.js](/browser/woo-wallet/tags/1.5.7/build/payment-method/index.js?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/build/payment-method/index.js.map](/browser/woo-wallet/tags/1.5.7/build/payment-method/index.js.map?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/build/payment-method/style-index.css](/browser/woo-wallet/tags/1.5.7/build/payment-method/style-index.css?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes](/browser/woo-wallet/tags/1.5.7/includes?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/abstracts](/browser/woo-wallet/tags/1.5.7/includes/abstracts?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/abstracts/abstract-woo-wallet-actions.php](/browser/woo-wallet/tags/1.5.7/includes/abstracts/abstract-woo-wallet-actions.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/actions](/browser/woo-wallet/tags/1.5.7/includes/actions?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/actions/class-woo-wallet-action-daily-visits.php](/browser/woo-wallet/tags/1.5.7/includes/actions/class-woo-wallet-action-daily-visits.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/actions/class-woo-wallet-action-new-registration.php](/browser/woo-wallet/tags/1.5.7/includes/actions/class-woo-wallet-action-new-registration.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/actions/class-woo-wallet-action-product-review.php](/browser/woo-wallet/tags/1.5.7/includes/actions/class-woo-wallet-action-product-review.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/actions/class-woo-wallet-action-referrals.php](/browser/woo-wallet/tags/1.5.7/includes/actions/class-woo-wallet-action-referrals.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/actions/class-woo-wallet-action-sell-content.php](/browser/woo-wallet/tags/1.5.7/includes/actions/class-woo-wallet-action-sell-content.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/admin](/browser/woo-wallet/tags/1.5.7/includes/admin?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/admin/class-woo-wallet-balance-details.php](/browser/woo-wallet/tags/1.5.7/includes/admin/class-woo-wallet-balance-details.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/admin/class-woo-wallet-transaction-details.php](/browser/woo-wallet/tags/1.5.7/includes/admin/class-woo-wallet-transaction-details.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/api](/browser/woo-wallet/tags/1.5.7/includes/api?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/api/Controllers](/browser/woo-wallet/tags/1.5.7/includes/api/Controllers?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/api/Controllers/Version3](/browser/woo-wallet/tags/1.5.7/includes/api/Controllers/Version3?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/api/Controllers/Version3/class-wc-rest-wallet-controller.php](/browser/woo-wallet/tags/1.5.7/includes/api/Controllers/Version3/class-wc-rest-wallet-controller.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/api/class-wc-rest-woo-wallet-controller.php](/browser/woo-wallet/tags/1.5.7/includes/api/class-wc-rest-woo-wallet-controller.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/api/class-woo-wallet-rest-controller.php](/browser/woo-wallet/tags/1.5.7/includes/api/class-woo-wallet-rest-controller.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-actions.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-actions.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-admin.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-admin.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-ajax.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-ajax.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-api.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-api.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-cashback.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-cashback.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-dependencies.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-dependencies.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-extensions.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-extensions.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-frontend.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-frontend.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-helper.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-helper.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-install.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-install.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-partial-payment-blocks.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-partial-payment-blocks.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-payment-method.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-payment-method.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-payments-blocks.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-payments-blocks.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-settings-api.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-settings-api.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-settings.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-settings.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-wallet.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-wallet.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet-widgets.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet-widgets.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/class-woo-wallet.php](/browser/woo-wallet/tags/1.5.7/includes/class-woo-wallet.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/emails](/browser/woo-wallet/tags/1.5.7/includes/emails?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/emails/class-woo-wallet-email-low-wallet-balance.php](/browser/woo-wallet/tags/1.5.7/includes/emails/class-woo-wallet-email-low-wallet-balance.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/emails/class-woo-wallet-email-new-transaction.php](/browser/woo-wallet/tags/1.5.7/includes/emails/class-woo-wallet-email-new-transaction.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/export](/browser/woo-wallet/tags/1.5.7/includes/export?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/export/class-terawallet-csv-exporter.php](/browser/woo-wallet/tags/1.5.7/includes/export/class-terawallet-csv-exporter.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/helper](/browser/woo-wallet/tags/1.5.7/includes/helper?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/helper/woo-wallet-update-functions.php](/browser/woo-wallet/tags/1.5.7/includes/helper/woo-wallet-update-functions.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/helper/woo-wallet-util.php](/browser/woo-wallet/tags/1.5.7/includes/helper/woo-wallet-util.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/marketplace](/browser/woo-wallet/tags/1.5.7/includes/marketplace?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/marketplace/dokan](/browser/woo-wallet/tags/1.5.7/includes/marketplace/dokan?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/marketplace/dokan/class-woo-wallet-dokan.php](/browser/woo-wallet/tags/1.5.7/includes/marketplace/dokan/class-woo-wallet-dokan.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/marketplace/wc-merketplace](/browser/woo-wallet/tags/1.5.7/includes/marketplace/wc-merketplace?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/marketplace/wc-merketplace/class-woo-wallet-wcmp-gateway.php](/browser/woo-wallet/tags/1.5.7/includes/marketplace/wc-merketplace/class-woo-wallet-wcmp-gateway.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/marketplace/wc-merketplace/class-woo-wallet-wcmp.php](/browser/woo-wallet/tags/1.5.7/includes/marketplace/wc-merketplace/class-woo-wallet-wcmp.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/marketplace/wcfmmp](/browser/woo-wallet/tags/1.5.7/includes/marketplace/wcfmmp?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/marketplace/wcfmmp/class-woo-wallet-wcfmmp-gateway.php](/browser/woo-wallet/tags/1.5.7/includes/marketplace/wcfmmp/class-woo-wallet-wcfmmp-gateway.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/marketplace/wcfmmp/class-woo-wallet-wcfmmp.php](/browser/woo-wallet/tags/1.5.7/includes/marketplace/wcfmmp/class-woo-wallet-wcfmmp.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/multicurrency](/browser/woo-wallet/tags/1.5.7/includes/multicurrency?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/multicurrency/woocommerce-currency-switcher](/browser/woo-wallet/tags/1.5.7/includes/multicurrency/woocommerce-currency-switcher?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/multicurrency/woocommerce-currency-switcher/class-wallet-multi-currency.php](/browser/woo-wallet/tags/1.5.7/includes/multicurrency/woocommerce-currency-switcher/class-wallet-multi-currency.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/multicurrency/woocommerce-multilingual](/browser/woo-wallet/tags/1.5.7/includes/multicurrency/woocommerce-multilingual?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/includes/multicurrency/woocommerce-multilingual/class-wallet-wpml-multi-currency.php](/browser/woo-wallet/tags/1.5.7/includes/multicurrency/woocommerce-multilingual/class-wallet-wpml-multi-currency.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/languages](/browser/woo-wallet/tags/1.5.7/languages?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/languages/woo-wallet.pot](/browser/woo-wallet/tags/1.5.7/languages/woo-wallet.pot?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/readme.txt](/browser/woo-wallet/tags/1.5.7/readme.txt?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates](/browser/woo-wallet/tags/1.5.7/templates?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/admin](/browser/woo-wallet/tags/1.5.7/templates/admin?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/admin/edit-balance.php](/browser/woo-wallet/tags/1.5.7/templates/admin/edit-balance.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/admin/html-exporter.php](/browser/woo-wallet/tags/1.5.7/templates/admin/html-exporter.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/emails](/browser/woo-wallet/tags/1.5.7/templates/emails?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/emails/low-wallet-balance.php](/browser/woo-wallet/tags/1.5.7/templates/emails/low-wallet-balance.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/emails/plain](/browser/woo-wallet/tags/1.5.7/templates/emails/plain?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/emails/plain/low-wallet-balance.php](/browser/woo-wallet/tags/1.5.7/templates/emails/plain/low-wallet-balance.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/emails/plain/user-new-transaction.php](/browser/woo-wallet/tags/1.5.7/templates/emails/plain/user-new-transaction.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/emails/user-new-transaction.php](/browser/woo-wallet/tags/1.5.7/templates/emails/user-new-transaction.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/mini-wallet.php](/browser/woo-wallet/tags/1.5.7/templates/mini-wallet.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/no-access.php](/browser/woo-wallet/tags/1.5.7/templates/no-access.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/wc-endpoint-wallet-transactions.php](/browser/woo-wallet/tags/1.5.7/templates/wc-endpoint-wallet-transactions.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/wc-endpoint-wallet.php](/browser/woo-wallet/tags/1.5.7/templates/wc-endpoint-wallet.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/woo-wallet-partial-payment.php](/browser/woo-wallet/tags/1.5.7/templates/woo-wallet-partial-payment.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/templates/woo-wallet-referrals.php](/browser/woo-wallet/tags/1.5.7/templates/woo-wallet-referrals.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/uninstall.php](/browser/woo-wallet/tags/1.5.7/uninstall.php?rev=3145131 "Show entry in browser")
  (added)
* [tags/1.5.7/woo-wallet.php](/browser/woo-wallet/tags/1.5.7/woo-wallet.php?rev=3145131 "Show entry in browser")
  (added)
* [trunk/includes/class-woo-wallet-admin.php](/browser/woo-wallet/trunk/includes/class-woo-wallet-admin.php?rev=3145131 "Show entry in browser")
  (modified)
  ([2 diffs](#file149 "Show differences"))
* [trunk/includes/class-woo-wallet-frontend.php](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?rev=3145131 "Show entry in browser")
  (modified)
  ([3 diffs](#file150 "Show differences"))
* [trunk/includes/helper/woo-wallet-util.php](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3145131 "Show entry in browser")
  (modified)
  ([1 diff](#file151 "Show differences"))
* [trunk/languages/woo-wallet.pot](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131 "Show entry in browser")
  (modified)
  ([17 diffs](#file152 "Show differences"))
* [trunk/readme.txt](/browser/woo-wallet/trunk/readme.txt?rev=3145131 "Show entry in browser")
  (modified)
  ([2 diffs](#file153 "Show differences"))
* [trunk/woo-wallet.php](/browser/woo-wallet/trunk/woo-wallet.php?rev=3145131 "Show entry in browser")
  (modified)
  ([2 diffs](#file154 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [woo-wallet/trunk/includes/class-woo-wallet-admin.php](/changeset/3145131/woo-wallet/trunk/includes/class-woo-wallet-admin.php "Show the changeset 3145131 restricted to woo-wallet/trunk/includes/class-woo-wallet-admin.php")

  | [r3084547](/browser/woo-wallet/trunk/includes/class-woo-wallet-admin.php?rev=3084547#L203 "Show revision 3084547 of this file in browser") | [r3145131](/browser/woo-wallet/trunk/includes/class-woo-wallet-admin.php?rev=3145131#L203 "Show revision 3145131 of this file in browser") |  |
  | --- | --- | --- |
  | 203 | 203 | public function add\_wallet\_topup\_report() { |
  | 204 | 204 | if ( current\_user\_can( 'view\_woocommerce\_reports' ) ) { |
  | 205 |  | $wallet\_recharge\_order\_ids = get\_wallet\_rechargeable\_orders( array( 'date\_query' => array( 'after' => gmdate( 'Y-m-01' ) ) ) ); |
  |  | 205 | $wallet\_recharge\_order\_ids = wc\_get\_orders( |
  |  | 206 | array( |
  |  | 207 | 'limit'        => -1, |
  |  | 208 | 'meta\_query'   => array( |
  |  | 209 | array( |
  |  | 210 | 'key'   => '\_wc\_wallet\_purchase\_credited', |
  |  | 211 | 'value' => true, |
  |  | 212 | ), |
  |  | 213 | ), |
  |  | 214 | 'date\_created' => '>=' . gmdate( 'Y-m-01' ), |
  |  | 215 | 'return'       => 'ids', |
  |  | 216 | ) |
  |  | 217 | ); |
  | 206 | 218 | $top\_up\_amount             = 0; |
  | 207 | 219 | foreach ( $wallet\_recharge\_order\_ids as $order\_id ) { |
  | […](/browser/woo-wallet/trunk/includes/class-woo-wallet-admin.php?rev=3084547#L1110) | […](/browser/woo-wallet/trunk/includes/class-woo-wallet-admin.php?rev=3145131#L1122) |  |
  | 1110 | 1122 | public function manage\_users\_custom\_column( $value, $column\_name, $user\_id ) { |
  | 1111 | 1123 | if ( 'current\_wallet\_balance' === $column\_name ) { |
  | 1112 |  | return sprintf( '<a href="%s" title="%s">%s</a>', admin\_url( '?page=woo-wallet-transactions&user\_id=' . $user\_id ), \_\_( 'View details', 'woo-wallet' ), woo\_wallet()->wallet->get\_wallet\_balance( $user\_id ) ); |
  |  | 1124 | return sprintf( '<a href="%s" title="%s">%s</a>', admin\_url( 'admin.php?page=woo-wallet-transactions&user\_id=' . $user\_id ), \_\_( 'View details', 'woo-wallet' ), woo\_wallet()->wallet->get\_wallet\_balance( $user\_id ) ); |
  | 1113 | 1125 | } |
  | 1114 | 1126 | return $value; |
* ## [woo-wallet/trunk/includes/class-woo-wallet-frontend.php](/changeset/3145131/woo-wallet/trunk/includes/class-woo-wallet-frontend.php "Show the changeset 3145131 restricted to woo-wallet/trunk/includes/class-woo-wallet-frontend.php")

  | [r3122333](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?rev=3122333#L76 "Show revision 3122333 of this file in browser") | [r3145131](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?rev=3145131#L76 "Show revision 3145131 of this file in browser") |  |
  | --- | --- | --- |
  | 76 | 76 | add\_shortcode( 'mini-wallet', \_\_CLASS\_\_ . '::mini\_wallet\_shortcode\_callback' ); |
  | 77 | 77 | add\_action( 'woocommerce\_cart\_calculate\_fees', array( $this, 'woo\_wallet\_add\_partial\_payment\_fee' ) ); |
  | 78 |  | add\_filter( 'woocommerce\_cart\_totals\_get\_fees\_from\_cart\_taxes', array( $this, 'woocommerce\_cart\_totals\_get\_fees\_from\_cart\_taxes' ), ~~10~~, 2 ); |
  |  | 78 | add\_filter( 'woocommerce\_cart\_totals\_get\_fees\_from\_cart\_taxes', array( $this, 'woocommerce\_cart\_totals\_get\_fees\_from\_cart\_taxes' ), 999, 2 ); |
  | 79 | 79 | add\_action( 'woocommerce\_thankyou', array( $this, 'restore\_woocommerce\_cart\_items' ) ); |
  | 80 | 80 | add\_filter( 'woo\_wallet\_is\_enable\_transfer', array( $this, 'woo\_wallet\_is\_enable\_transfer' ) ); |
  | […](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?rev=3122333#L401) | […](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?rev=3145131#L401) |  |
  | 401 | 401 | ); |
  | 402 | 402 | if ( isset( $\_POST['woo\_wallet\_transfer'] ) && wp\_verify\_nonce( wp\_unslash( $\_POST['woo\_wallet\_transfer'] ), 'woo\_wallet\_transfer' ) ) { // phpcs:ignore WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
  | 403 |  | if ( isset( $\_POST['woo\_wallet\_transfer\_user\_id'] ) ) { |
  | 404 |  | $whom = sanitize\_text\_field( wp\_unslash( $\_POST['woo\_wallet\_transfer\_user\_id'] ) ); |
  | 405 |  | } |
  | 406 |  | if ( isset( $\_POST['woo\_wallet\_transfer\_amount'] ) ) { |
  | 407 |  | $amount = sanitize\_text\_field( wp\_unslash( $\_POST['woo\_wallet\_transfer\_amount'] ) ); |
  | 408 |  | } |
  |  | 403 | $whom             = isset( $\_POST['woo\_wallet\_transfer\_user\_id'] ) ? absint( sanitize\_text\_field( wp\_unslash( $\_POST['woo\_wallet\_transfer\_user\_id'] ) ) ) : 0; |
  |  | 404 | $amount           = isset( $\_POST['woo\_wallet\_transfer\_amount'] ) ? floatval( sanitize\_text\_field( wp\_unslash( $\_POST['woo\_wallet\_transfer\_amount'] ) ) ) : 0; |
  | 409 | 405 | $whom             = apply\_filters( 'woo\_wallet\_transfer\_user\_id', $whom ); |
  | 410 | 406 | $whom             = get\_userdata( $whom ); |
  | 411 | 407 | $current\_user\_obj = get\_userdata( get\_current\_user\_id() ); |
  |  | 408 | if ( get\_current\_user\_id() === $whom->ID ) { |
  |  | 409 | return array( |
  |  | 410 | 'is\_valid' => false, |
  |  | 411 | 'message'  => sprintf( \_\_( 'Invalid user', 'woo-wallet' ) ), |
  |  | 412 | ); |
  |  | 413 | } |
  | 412 | 414 | /\* translators: user\_email \*/ |
  | 413 | 415 | $credit\_note = isset( $\_POST['woo\_wallet\_transfer\_note'] ) && ! empty( $\_POST['woo\_wallet\_transfer\_note'] ) ? sanitize\_text\_field( wp\_unslash( $\_POST['woo\_wallet\_transfer\_note'] ) ) : sprintf( \_\_( 'Wallet funds received from %s', 'woo-wallet' ), $current\_user\_obj->user\_email ); |
  | […](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?rev=3122333#L443) | […](/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php?rev=3145131#L445) |  |
  | 443 | 445 | ); |
  | 444 | 446 | } |
  | 445 |  | if ( ~~floatval( $debit\_amount )~~ > woo\_wallet()->wallet->get\_wallet\_balance( get\_current\_user\_id(), 'edit' ) ) { |
  |  | 447 | if ( $debit\_amount > woo\_wallet()->wallet->get\_wallet\_balance( get\_current\_user\_id(), 'edit' ) ) { |
  | 446 | 448 | return array( |
  | 447 | 449 | 'is\_valid' => false, |
* ## [woo-wallet/trunk/includes/helper/woo-wallet-util.php](/changeset/3145131/woo-wallet/trunk/includes/helper/woo-wallet-util.php "Show the changeset 3145131 restricted to woo-wallet/trunk/includes/helper/woo-wallet-util.php")

  | [r3116025](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3116025#L182 "Show revision 3116025 of this file in browser") | [r3145131](/browser/woo-wallet/trunk/includes/helper/woo-wallet-util.php?rev=3145131#L182 "Show revision 3145131 of this file in browser") |  |
  | --- | --- | --- |
  | 182 | 182 | \*/ |
  | 183 | 183 | function get\_wallet\_rechargeable\_orders( $args = array() ) { |
  | 184 |  | $default\_args = array( |
  | 185 |  | 'posts\_per\_page'   => -1, |
  | 186 |  | 'meta\_key'         => '\_wc\_wallet\_purchase\_credited', // @codingStandardsIgnoreLine |
  | 187 |  | 'meta\_value'       => true, // @codingStandardsIgnoreLine |
  | 188 |  | 'post\_type'        => 'shop\_order', |
  | 189 |  | 'post\_status'      => array( 'completed', 'processing', 'on-hold' ), |
  | 190 |  | 'suppress\_filters' => true, |
  |  | 184 | $order\_ids = wc\_get\_orders( |
  |  | 185 | array( |
  |  | 186 | 'limit'      => -1, |
  |  | 187 | 'meta\_query' => array( |
  |  | 188 | array( |
  |  | 189 | 'key'   => '\_wc\_wallet\_purchase\_credited', |
  |  | 190 | 'value' => true, |
  |  | 191 | ), |
  |  | 192 | ), |
  |  | 193 | 'return'     => 'ids', |
  |  | 194 | ) |
  | 191 | 195 | ); |
  | 192 |  | $args         = wp\_parse\_args( $args, $default\_args ); |
  | 193 |  | $orders       = get\_posts( $args ); |
  | 194 |  | return wp\_list\_pluck( $orders, 'ID' ); |
  |  | 196 | return $order\_ids; |
  | 195 | 197 | } |
  | 196 | 198 | } |
* ## [woo-wallet/trunk/languages/woo-wallet.pot](/changeset/3145131/woo-wallet/trunk/languages/woo-wallet.pot "Show the changeset 3145131 restricted to woo-wallet/trunk/languages/woo-wallet.pot")

  | [r3122333](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L3 "Show revision 3122333 of this file in browser") | [r3145131](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L3 "Show revision 3145131 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: TeraWallet 1.5.~~6~~\n" |
  |  | 5 | "Project-Id-Version: TeraWallet 1.5.7\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/woo-wallet\n" |
  | 7 | 7 | "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n" |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L10) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L10) |  |
  | 10 | 10 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 11 | 11 | "Content-Transfer-Encoding: 8bit\n" |
  | 12 |  | "POT-Creation-Date: 2024-0~~7-20T03:16:25~~+00:00\n" |
  |  | 12 | "POT-Creation-Date: 2024-09-02T07:14:26+00:00\n" |
  | 13 | 13 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 14 | 14 | "X-Generator: WP-CLI 2.10.0\n" |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L19) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L19) |  |
  | 19 | 19 | #: includes/class-woo-wallet-actions.php:117 |
  | 20 | 20 | #: includes/class-woo-wallet-admin.php:114 |
  | 21 |  | #: includes/class-woo-wallet-admin.php:~~292~~ |
  | 22 |  | #: includes/class-woo-wallet-admin.php:3~~16~~ |
  | 23 |  | #: includes/class-woo-wallet-admin.php:9~~41~~ |
  | 24 |  | #: includes/class-woo-wallet-admin.php:9~~48~~ |
  | 25 |  | #: includes/class-woo-wallet-admin.php:11~~23~~ |
  |  | 21 | #: includes/class-woo-wallet-admin.php:304 |
  |  | 22 | #: includes/class-woo-wallet-admin.php:328 |
  |  | 23 | #: includes/class-woo-wallet-admin.php:953 |
  |  | 24 | #: includes/class-woo-wallet-admin.php:960 |
  |  | 25 | #: includes/class-woo-wallet-admin.php:1135 |
  | 26 | 26 | #: includes/class-woo-wallet-extensions.php:64 |
  | 27 | 27 | #: includes/class-woo-wallet-settings.php:65 |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L52) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L52) |  |
  | 52 | 52 | #: includes/actions/class-woo-wallet-action-sell-content.php:467 |
  | 53 | 53 | #: includes/class-woo-wallet-frontend.php:386 |
  | 54 |  | #: includes/class-woo-wallet-frontend.php:46~~5~~ |
  |  | 54 | #: includes/class-woo-wallet-frontend.php:467 |
  | 55 | 55 | msgid "Cheatin&#8217; huh?" |
  | 56 | 56 | msgstr "" |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L92) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L92) |  |
  | 92 | 92 | #: includes/admin/class-woo-wallet-balance-details.php:235 |
  | 93 | 93 | #: includes/admin/class-woo-wallet-transaction-details.php:45 |
  | 94 |  | #: includes/class-woo-wallet-admin.php:5~~51~~ |
  |  | 94 | #: includes/class-woo-wallet-admin.php:563 |
  | 95 | 95 | #: includes/class-woo-wallet-frontend.php:205 |
  | 96 | 96 | #: includes/export/class-terawallet-csv-exporter.php:97 |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L119) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L119) |  |
  | 119 | 119 | #: includes/actions/class-woo-wallet-action-referrals.php:117 |
  | 120 | 120 | #: includes/admin/class-woo-wallet-balance-details.php:236 |
  | 121 |  | #: includes/class-woo-wallet-admin.php:3~~58~~ |
  | 122 |  | #: includes/class-woo-wallet-admin.php:5~~82~~ |
  |  | 121 | #: includes/class-woo-wallet-admin.php:370 |
  |  | 122 | #: includes/class-woo-wallet-admin.php:594 |
  | 123 | 123 | #: includes/class-woo-wallet-payment-method.php:73 |
  | 124 | 124 | #: templates/admin/edit-balance.php:52 |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L461) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L461) |  |
  | 461 | 461 | #: includes/admin/class-woo-wallet-balance-details.php:519 |
  | 462 | 462 | #: includes/admin/class-woo-wallet-transaction-details.php:130 |
  | 463 |  | #: includes/class-woo-wallet-admin.php:5~~64~~ |
  |  | 463 | #: includes/class-woo-wallet-admin.php:576 |
  | 464 | 464 | #: templates/admin/edit-balance.php:38 |
  | 465 | 465 | msgid "Credit" |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L468) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L468) |  |
  | 468 | 468 | #: includes/admin/class-woo-wallet-balance-details.php:520 |
  | 469 | 469 | #: includes/admin/class-woo-wallet-transaction-details.php:130 |
  | 470 |  | #: includes/class-woo-wallet-admin.php:5~~65~~ |
  |  | 470 | #: includes/class-woo-wallet-admin.php:577 |
  | 471 | 471 | #: templates/admin/edit-balance.php:39 |
  | 472 | 472 | msgid "Debit" |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L486) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L486) |  |
  | 486 | 486 |  |
  | 487 | 487 | #: includes/admin/class-woo-wallet-transaction-details.php:44 |
  | 488 |  | #: includes/class-woo-wallet-admin.php:5~~58~~ |
  |  | 488 | #: includes/class-woo-wallet-admin.php:570 |
  | 489 | 489 | #: includes/class-woo-wallet-frontend.php:200 |
  | 490 | 490 | #: includes/export/class-terawallet-csv-exporter.php:95 |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L594) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L594) |  |
  | 594 | 594 |  |
  | 595 | 595 | #: includes/class-woo-wallet-admin.php:172 |
  | 596 |  | #: includes/class-woo-wallet-frontend.php:8~~29~~ |
  |  | 596 | #: includes/class-woo-wallet-frontend.php:831 |
  | 597 | 597 | #: templates/mini-wallet.php:23 |
  | 598 | 598 | msgid "Current wallet balance" |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L614) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L614) |  |
  | 614 | 614 |  |
  | 615 | 615 | #. translators: %s: wallet top-up |
  | 616 |  | #: includes/class-woo-wallet-admin.php:2~~22~~ |
  |  | 616 | #: includes/class-woo-wallet-admin.php:234 |
  | 617 | 617 | msgid "%s wallet top-up this month" |
  | 618 | 618 | msgstr "" |
  | 619 | 619 |  |
  | 620 |  | #: includes/class-woo-wallet-admin.php:2~~60~~ |
  |  | 620 | #: includes/class-woo-wallet-admin.php:272 |
  | 621 | 621 | msgid "Display wallet icon and amount instead of menu navigation label?" |
  | 622 | 622 | msgstr "" |
  | 623 | 623 |  |
  | 624 |  | #: includes/class-woo-wallet-admin.php:~~295~~ |
  |  | 624 | #: includes/class-woo-wallet-admin.php:307 |
  | 625 | 625 | msgid "Woo Wallet" |
  | 626 | 626 | msgstr "" |
  | 627 | 627 |  |
  | 628 |  | #: includes/class-woo-wallet-admin.php:~~297~~ |
  |  | 628 | #: includes/class-woo-wallet-admin.php:309 |
  | 629 | 629 | msgid "Actions" |
  | 630 | 630 | msgstr "" |
  | 631 | 631 |  |
  | 632 |  | #: includes/class-woo-wallet-admin.php:3~~36~~ |
  |  | 632 | #: includes/class-woo-wallet-admin.php:348 |
  | 633 | 633 | msgid "Save changes" |
  | 634 | 634 | msgstr "" |
  | 635 | 635 |  |
  | 636 |  | #: includes/class-woo-wallet-admin.php:3~~49~~ |
  |  | 636 | #: includes/class-woo-wallet-admin.php:361 |
  | 637 | 637 | msgid "Wallet actions" |
  | 638 | 638 | msgstr "" |
  | 639 | 639 |  |
  | 640 |  | #: includes/class-woo-wallet-admin.php:3~~52~~ |
  |  | 640 | #: includes/class-woo-wallet-admin.php:364 |
  | 641 | 641 | msgid "Integrated wallet actions are listed below. If active those actions will be triggered with respective WordPress hook." |
  | 642 | 642 | msgstr "" |
  | 643 | 643 |  |
  | 644 |  | #: includes/class-woo-wallet-admin.php:3~~57~~ |
  |  | 644 | #: includes/class-woo-wallet-admin.php:369 |
  | 645 | 645 | msgid "Action" |
  | 646 | 646 | msgstr "" |
  | 647 | 647 |  |
  | 648 |  | #: includes/class-woo-wallet-admin.php:3~~68~~ |
  |  | 648 | #: includes/class-woo-wallet-admin.php:380 |
  | 649 | 649 | msgid "Enabled" |
  | 650 | 650 | msgstr "" |
  | 651 | 651 |  |
  | 652 |  | #: includes/class-woo-wallet-admin.php:3~~68~~ |
  |  | 652 | #: includes/class-woo-wallet-admin.php:380 |
  | 653 | 653 | msgid "Yes" |
  | 654 | 654 | msgstr "" |
  | 655 | 655 |  |
  | 656 |  | #: includes/class-woo-wallet-admin.php:3~~70~~ |
  |  | 656 | #: includes/class-woo-wallet-admin.php:382 |
  | 657 | 657 | msgid "Disabled" |
  | 658 | 658 | msgstr "" |
  | 659 | 659 |  |
  | 660 |  | #: includes/class-woo-wallet-admin.php:3~~80~~ |
  |  | 660 | #: includes/class-woo-wallet-admin.php:392 |
  | 661 | 661 | msgid "Manage" |
  | 662 | 662 | msgstr "" |
  | 663 | 663 |  |
  | 664 |  | #: includes/class-woo-wallet-admin.php:3~~82~~ |
  |  | 664 | #: includes/class-woo-wallet-admin.php:394 |
  | 665 | 665 | msgid "Setup" |
  | 666 | 666 | msgstr "" |
  | 667 | 667 |  |
  | 668 |  | #: includes/class-woo-wallet-admin.php:4~~42~~ |
  | 669 |  | #: includes/class-woo-wallet-admin.php:11~~42~~ |
  |  | 668 | #: includes/class-woo-wallet-admin.php:454 |
  |  | 669 | #: includes/class-woo-wallet-admin.php:1154 |
  | 670 | 670 | msgid "Refund" |
  | 671 | 671 | msgstr "" |
  | 672 | 672 |  |
  | 673 |  | #: includes/class-woo-wallet-admin.php:4~~43~~ |
  |  | 673 | #: includes/class-woo-wallet-admin.php:455 |
  | 674 | 674 | msgid "to customer wallet" |
  | 675 | 675 | msgstr "" |
  | 676 | 676 |  |
  | 677 |  | #: includes/class-woo-wallet-admin.php:4~~61~~ |
  |  | 677 | #: includes/class-woo-wallet-admin.php:473 |
  | 678 | 678 | #: includes/class-woo-wallet-frontend.php:243 |
  | 679 | 679 | msgid "Please enter 3 or more characters" |
  | 680 | 680 | msgstr "" |
  | 681 | 681 |  |
  | 682 |  | #: includes/class-woo-wallet-admin.php:4~~62~~ |
  |  | 682 | #: includes/class-woo-wallet-admin.php:474 |
  | 683 | 683 | #: includes/class-woo-wallet-frontend.php:241 |
  | 684 | 684 | msgid "No results found" |
  | 685 | 685 | msgstr "" |
  | 686 | 686 |  |
  | 687 |  | #: includes/class-woo-wallet-admin.php:4~~63~~ |
  |  | 687 | #: includes/class-woo-wallet-admin.php:475 |
  | 688 | 688 | #: includes/class-woo-wallet-frontend.php:244 |
  | 689 | 689 | msgid "Searching…" |
  | 690 | 690 | msgstr "" |
  | 691 | 691 |  |
  | 692 |  | #: includes/class-woo-wallet-admin.php:4~~68~~ |
  | 693 |  | #: includes/class-woo-wallet-admin.php:4~~81~~ |
  |  | 692 | #: includes/class-woo-wallet-admin.php:480 |
  |  | 693 | #: includes/class-woo-wallet-admin.php:493 |
  | 694 | 694 | msgid "Export" |
  | 695 | 695 | msgstr "" |
  | 696 | 696 |  |
  | 697 |  | #: includes/class-woo-wallet-admin.php:5~~05~~ |
  |  | 697 | #: includes/class-woo-wallet-admin.php:517 |
  | 698 | 698 | msgid "Users wallet details" |
  | 699 | 699 | msgstr "" |
  | 700 | 700 |  |
  | 701 |  | #: includes/class-woo-wallet-admin.php:5~~10~~ |
  |  | 701 | #: includes/class-woo-wallet-admin.php:522 |
  | 702 | 702 | msgid "Search Users" |
  | 703 | 703 | msgstr "" |
  | 704 | 704 |  |
  | 705 | 705 | #. translators: user display name and email |
  | 706 |  | #: includes/class-woo-wallet-admin.php:5~~40~~ |
  |  | 706 | #: includes/class-woo-wallet-admin.php:552 |
  | 707 | 707 | msgid "Adjust Balance: %1$s (%2$s)" |
  | 708 | 708 | msgstr "" |
  | 709 | 709 |  |
  | 710 |  | #: includes/class-woo-wallet-admin.php:5~~43~~ |
  | 711 |  | #: includes/class-woo-wallet-admin.php:6~~10~~ |
  |  | 710 | #: includes/class-woo-wallet-admin.php:555 |
  |  | 711 | #: includes/class-woo-wallet-admin.php:622 |
  | 712 | 712 | msgid "Current wallet balance: " |
  | 713 | 713 | msgstr "" |
  | 714 | 714 |  |
  | 715 |  | #: includes/class-woo-wallet-admin.php:5~~54~~ |
  |  | 715 | #: includes/class-woo-wallet-admin.php:566 |
  | 716 | 716 | msgid "Enter Amount" |
  | 717 | 717 | msgstr "" |
  | 718 | 718 |  |
  | 719 |  | #: includes/class-woo-wallet-admin.php:5~~77~~ |
  |  | 719 | #: includes/class-woo-wallet-admin.php:589 |
  | 720 | 720 | msgid "Select payment type" |
  | 721 | 721 | msgstr "" |
  | 722 | 722 |  |
  | 723 |  | #: includes/class-woo-wallet-admin.php:5~~85~~ |
  |  | 723 | #: includes/class-woo-wallet-admin.php:597 |
  | 724 | 724 | msgid "Enter Description" |
  | 725 | 725 | msgstr "" |
  | 726 | 726 |  |
  | 727 |  | #: includes/class-woo-wallet-admin.php:6~~07~~ |
  |  | 727 | #: includes/class-woo-wallet-admin.php:619 |
  | 728 | 728 | msgid "Transaction details" |
  | 729 | 729 | msgstr "" |
  | 730 | 730 |  |
  | 731 |  | #: includes/class-woo-wallet-admin.php:658 |
  | 732 |  | #: includes/class-woo-wallet-frontend.php:442 |
  |  | 731 | #: includes/class-woo-wallet-admin.php:670 |
  |  | 732 | #: includes/class-woo-wallet-frontend.php:411 |
  |  | 733 | #: includes/class-woo-wallet-frontend.php:444 |
  | 733 | 734 | msgid "Invalid user" |
  | 734 | 735 | msgstr "" |
  | 735 | 736 |  |
  | 736 |  | #: includes/class-woo-wallet-admin.php:6~~63~~ |
  |  | 737 | #: includes/class-woo-wallet-admin.php:675 |
  | 737 | 738 | msgid "Please enter amount" |
  | 738 | 739 | msgstr "" |
  | 739 | 740 |  |
  | 740 | 741 | #. translators: 1: User login. |
  | 741 |  | #: includes/class-woo-wallet-admin.php:6~~72~~ |
  |  | 742 | #: includes/class-woo-wallet-admin.php:684 |
  | 742 | 743 | msgid "%s has insufficient balance for debit." |
  | 743 | 744 | msgstr "" |
  | 744 | 745 |  |
  | 745 | 746 | #. translators: 1: amount name, 2: username, 3: transaction details url. |
  | 746 |  | #: includes/class-woo-wallet-admin.php:6~~82~~ |
  |  | 747 | #: includes/class-woo-wallet-admin.php:694 |
  | 747 | 748 | msgid "%1$s has been debited from %2$s wallet account. <a href=\"%3$s\">View all transactions&rarr;</a>" |
  | 748 | 749 | msgstr "" |
  | 749 | 750 |  |
  | 750 |  | #: includes/class-woo-wallet-admin.php:~~697~~ |
  | 751 |  | #: includes/class-woo-wallet-admin.php:7~~23~~ |
  |  | 751 | #: includes/class-woo-wallet-admin.php:709 |
  |  | 752 | #: includes/class-woo-wallet-admin.php:735 |
  | 752 | 753 | msgid "There may be some issue with database connection. Please deactivate TeraWallet plugin and activate again." |
  | 753 | 754 | msgstr "" |
  | 754 | 755 |  |
  | 755 | 756 | #. translators: 1: amount name, 2: username, 3: transaction details url. |
  | 756 |  | #: includes/class-woo-wallet-admin.php:7~~08~~ |
  |  | 757 | #: includes/class-woo-wallet-admin.php:720 |
  | 757 | 758 | msgid "%1$s has been credited to %2$s wallet account. <a href=\"%3$s\">View all transactions&rarr;</a>" |
  | 758 | 759 | msgstr "" |
  | 759 | 760 |  |
  | 760 |  | #: includes/class-woo-wallet-admin.php:7~~69~~ |
  | 761 |  | #: includes/class-woo-wallet-admin.php:~~894~~ |
  |  | 761 | #: includes/class-woo-wallet-admin.php:781 |
  |  | 762 | #: includes/class-woo-wallet-admin.php:906 |
  | 762 | 763 | msgid "Cashback" |
  | 763 | 764 | msgstr "" |
  | 764 | 765 |  |
  | 765 |  | #: includes/class-woo-wallet-admin.php:~~790~~ |
  | 766 |  | #: includes/class-woo-wallet-admin.php:8~~43~~ |
  | 767 |  | #: includes/class-woo-wallet-admin.php:10~~20~~ |
  | 768 |  | #: includes/class-woo-wallet-admin.php:10~~43~~ |
  |  | 766 | #: includes/class-woo-wallet-admin.php:802 |
  |  | 767 | #: includes/class-woo-wallet-admin.php:855 |
  |  | 768 | #: includes/class-woo-wallet-admin.php:1032 |
  |  | 769 | #: includes/class-woo-wallet-admin.php:1055 |
  | 769 | 770 | #: includes/class-woo-wallet-settings.php:243 |
  | 770 | 771 | #: includes/marketplace/dokan/class-woo-wallet-dokan.php:207 |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L772) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L773) |  |
  | 772 | 773 | msgstr "" |
  | 773 | 774 |  |
  | 774 |  | #: includes/class-woo-wallet-admin.php:~~791~~ |
  |  | 775 | #: includes/class-woo-wallet-admin.php:803 |
  | 775 | 776 | #: includes/class-woo-wallet-settings.php:244 |
  | 776 | 777 | msgid "Select cashback type percentage or fixed" |
  | 777 | 778 | msgstr "" |
  | 778 | 779 |  |
  | 779 |  | #: includes/class-woo-wallet-admin.php:~~793~~ |
  | 780 |  | #: includes/class-woo-wallet-admin.php:8~~45~~ |
  | 781 |  | #: includes/class-woo-wallet-admin.php:10~~22~~ |
  | 782 |  | #: includes/class-woo-wallet-admin.php:10~~46~~ |
  |  | 780 | #: includes/class-woo-wallet-admin.php:805 |
  |  | 781 | #: includes/class-woo-wallet-admin.php:857 |
  |  | 782 | #: includes/class-woo-wallet-admin.php:1034 |
  |  | 783 | #: includes/class-woo-wallet-admin.php:1058 |
  | 783 | 784 | #: includes/class-woo-wallet-settings.php:179 |
  | 784 | 785 | #: includes/class-woo-wallet-settings.php:247 |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L788) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L789) |  |
  | 788 | 789 | msgstr "" |
  | 789 | 790 |  |
  | 790 |  | #: includes/class-woo-wallet-admin.php:~~794~~ |
  | 791 |  | #: includes/class-woo-wallet-admin.php:8~~46~~ |
  | 792 |  | #: includes/class-woo-wallet-admin.php:10~~23~~ |
  | 793 |  | #: includes/class-woo-wallet-admin.php:10~~47~~ |
  |  | 791 | #: includes/class-woo-wallet-admin.php:806 |
  |  | 792 | #: includes/class-woo-wallet-admin.php:858 |
  |  | 793 | #: includes/class-woo-wallet-admin.php:1035 |
  |  | 794 | #: includes/class-woo-wallet-admin.php:1059 |
  | 794 | 795 | #: includes/class-woo-wallet-settings.php:180 |
  | 795 | 796 | #: includes/class-woo-wallet-settings.php:248 |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L799) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L800) |  |
  | 799 | 800 | msgstr "" |
  | 800 | 801 |  |
  | 801 |  | #: includes/class-woo-wallet-admin.php:8~~05~~ |
  | 802 |  | #: includes/class-woo-wallet-admin.php:8~~62~~ |
  | 803 |  | #: includes/class-woo-wallet-admin.php:10~~27~~ |
  | 804 |  | #: includes/class-woo-wallet-admin.php:10~~52~~ |
  |  | 802 | #: includes/class-woo-wallet-admin.php:817 |
  |  | 803 | #: includes/class-woo-wallet-admin.php:874 |
  |  | 804 | #: includes/class-woo-wallet-admin.php:1039 |
  |  | 805 | #: includes/class-woo-wallet-admin.php:1064 |
  | 805 | 806 | #: includes/class-woo-wallet-settings.php:254 |
  | 806 | 807 | #: includes/marketplace/dokan/class-woo-wallet-dokan.php:224 |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L808) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L809) |  |
  | 808 | 809 | msgstr "" |
  | 809 | 810 |  |
  | 810 |  | #: includes/class-woo-wallet-admin.php:8~~06~~ |
  |  | 811 | #: includes/class-woo-wallet-admin.php:818 |
  | 811 | 812 | #: includes/class-woo-wallet-settings.php:255 |
  | 812 | 813 | msgid "Enter cashback amount" |
  | 813 | 814 | msgstr "" |
  | 814 | 815 |  |
  | 815 |  | #: includes/class-woo-wallet-admin.php:9~~13~~ |
  |  | 816 | #: includes/class-woo-wallet-admin.php:925 |
  | 816 | 817 | msgid "Apply as cashback" |
  | 817 | 818 | msgstr "" |
  | 818 | 819 |  |
  | 819 |  | #: includes/class-woo-wallet-admin.php:9~~14~~ |
  |  | 820 | #: includes/class-woo-wallet-admin.php:926 |
  | 820 | 821 | msgid "Check this box if the coupon should apply as cashback." |
  | 821 | 822 | msgstr "" |
  | 822 | 823 |  |
  | 823 | 824 | #. translators: Plugin name |
  | 824 |  | #: includes/class-woo-wallet-admin.php:9~~47~~ |
  |  | 825 | #: includes/class-woo-wallet-admin.php:959 |
  | 825 | 826 | msgid "If you like %1$s please leave us a %2$s rating. A huge thanks in advance!" |
  | 826 | 827 | msgstr "" |
  | 827 | 828 |  |
  | 828 |  | #: includes/class-woo-wallet-admin.php:9~~49~~ |
  |  | 829 | #: includes/class-woo-wallet-admin.php:961 |
  | 829 | 830 | msgid "Thanks :)" |
  | 830 | 831 | msgstr "" |
  | 831 | 832 |  |
  | 832 |  | #: includes/class-woo-wallet-admin.php:9~~60~~ |
  |  | 833 | #: includes/class-woo-wallet-admin.php:972 |
  | 833 | 834 | msgid "Thank you for using TeraWallet." |
  | 834 | 835 | msgstr "" |
  | 835 | 836 |  |
  | 836 |  | #: includes/class-woo-wallet-admin.php:9~~77~~ |
  | 837 |  | #: includes/class-woo-wallet-admin.php:10~~85~~ |
  |  | 837 | #: includes/class-woo-wallet-admin.php:989 |
  |  | 838 | #: includes/class-woo-wallet-admin.php:1097 |
  | 838 | 839 | #: includes/class-woo-wallet-frontend.php:163 |
  | 839 | 840 | #: includes/class-woo-wallet-frontend.php:281 |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L842) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L843) |  |
  | 842 | 843 | msgstr "" |
  | 843 | 844 |  |
  | 844 |  | #: includes/class-woo-wallet-admin.php:9~~78~~ |
  |  | 845 | #: includes/class-woo-wallet-admin.php:990 |
  | 845 | 846 | msgid "Endpoint for the \"My account &rarr; My Wallet\" page." |
  | 846 | 847 | msgstr "" |
  | 847 | 848 |  |
  | 848 |  | #: includes/class-woo-wallet-admin.php:9~~85~~ |
  |  | 849 | #: includes/class-woo-wallet-admin.php:997 |
  | 849 | 850 | #: includes/class-woo-wallet-frontend.php:166 |
  | 850 | 851 | msgid "Wallet Transactions" |
  | 851 | 852 | msgstr "" |
  | 852 | 853 |  |
  | 853 |  | #: includes/class-woo-wallet-admin.php:9~~86~~ |
  |  | 854 | #: includes/class-woo-wallet-admin.php:998 |
  | 854 | 855 | msgid "Endpoint for the \"My account &rarr; View wallet transactions\" page." |
  | 855 | 856 | msgstr "" |
  | 856 | 857 |  |
  | 857 |  | #: includes/class-woo-wallet-admin.php:~~997~~ |
  |  | 858 | #: includes/class-woo-wallet-admin.php:1009 |
  | 858 | 859 | msgid "Wallet endpoints" |
  | 859 | 860 | msgstr "" |
  | 860 | 861 |  |
  | 861 |  | #: includes/class-woo-wallet-admin.php:~~999~~ |
  |  | 862 | #: includes/class-woo-wallet-admin.php:1011 |
  | 862 | 863 | msgid "Endpoints are appended to your page URLs to handle specific actions on the accounts pages. They should be unique and can be left blank to disable the endpoint." |
  | 863 | 864 | msgstr "" |
  | 864 | 865 |  |
  | 865 |  | #: includes/class-woo-wallet-admin.php:1~~097~~ |
  |  | 866 | #: includes/class-woo-wallet-admin.php:1109 |
  | 866 | 867 | msgid "Wallet Balance" |
  | 867 | 868 | msgstr "" |
  | 868 | 869 |  |
  | 869 |  | #: includes/class-woo-wallet-admin.php:11~~12~~ |
  |  | 870 | #: includes/class-woo-wallet-admin.php:1124 |
  | 870 | 871 | msgid "View details" |
  | 871 | 872 | msgstr "" |
  | 872 | 873 |  |
  | 873 |  | #: includes/class-woo-wallet-admin.php:11~~40~~ |
  |  | 874 | #: includes/class-woo-wallet-admin.php:1152 |
  | 874 | 875 | msgid "Refunded" |
  | 875 | 876 | msgstr "" |
  | 876 | 877 |  |
  | 877 |  | #: includes/class-woo-wallet-admin.php:11~~61~~ |
  |  | 878 | #: includes/class-woo-wallet-admin.php:1173 |
  | 878 | 879 | msgid "Recalculate order cashback" |
  | 879 | 880 | msgstr "" |
  | 880 | 881 |  |
  | 881 |  | #: includes/class-woo-wallet-admin.php:1~~197~~ |
  |  | 882 | #: includes/class-woo-wallet-admin.php:1209 |
  | 882 | 883 | msgid "Obtain Superpowers to get the best out of TeraWallet" |
  | 883 | 884 | msgstr "" |
  | 884 | 885 |  |
  | 885 |  | #: includes/class-woo-wallet-admin.php:1~~198~~ |
  |  | 886 | #: includes/class-woo-wallet-admin.php:1210 |
  | 886 | 887 | msgid "Use superpowers to stand above the crowd. our high-octane add-ons are designed to boost your store wallet features." |
  | 887 | 888 | msgstr "" |
  | 888 | 889 |  |
  | 889 |  | #: includes/class-woo-wallet-admin.php:1~~199~~ |
  |  | 890 | #: includes/class-woo-wallet-admin.php:1211 |
  | 890 | 891 | msgid "Learn More" |
  | 891 | 892 | msgstr "" |
  | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3122333#L1011) | […](/browser/woo-wallet/trunk/languages/woo-wallet.pot?rev=3145131#L1012) |  |
  | 1011 | 1012 |  |
  | 1012 | 1013 | #. translators: user\_email |
  | 1013 |  | #: includes/class-woo-wallet-frontend.php:41~~3~~ |
  |  | 1014 | #: includes/class-woo-wallet-frontend.php:415 |
  | 1014 | 1015 | msgid "Wallet funds received from %s" |
  | 1015 | 1016 | msgstr "" |
  | 1016 | 1017 |  |
  | 1017 | 1018 | #. translators: user\_email |
  | 1018 |  | #: includes/class-woo-wallet-frontend.php:41~~5~~ |
  |  | 1019 | #: includes/class-woo-wallet-frontend.php:417 |
  | 1019 | 1020 | msgid "Wallet funds transfer to %s" |
  | 1020 | 1021 | msgstr "" |
  | 1021 | 1022 |  |
  | 1022 | 1023 | #. translators: Max transfer amount |
  | 1023 |  | #: includes/class-woo-wallet-frontend.php:43~~5~~ |
  |  | 1024 | #: includes/class-woo-wallet-frontend.php:437 |
  | 1024 | 1025 | msgid "Minimum transfer amount is %s" |
  | 1025 | 1026 | msgstr "" |
  | 1026 | 1027 |  |
  | 1027 |  | #: includes/class-woo-wallet-frontend.php:4~~48~~ |
  |  | 1028 | #: includes/class-woo-wallet-frontend.php:450 |
  | 1028 | 1029 | msgid "Entered amount is greater than current wallet amount." |
  | 1029 | 1030 | msgstr "" |
  | 1030 | 1031 |  |
  | 1031 |  | #: includes/class-woo-wallet-frontend.php:4~~59~~ |
  |  | 1032 | #: includes/class-woo-wallet-frontend.php:461 |
  | 1032 | 1033 | msgid "Amount transferred successfully!" |
  | 1033 | 1034 | msgstr "" |
  | 1034 | 1035 |  |
  | 1035 | 1036 | #. translators: 1:cashback amount |
  | 1036 |  | #: includes/class-woo-wallet-frontend.php:56~~1~~ |
  |  | 1037 | #: includes/class-woo-wallet-frontend.php:563 |
  | 1037 | 1038 | msgid "Upon placing this order a cashback of %s will be credited to your wallet." |
  | 1038 | 1039 | msgstr "" |
  | 1039 | 1040 |  |
  | 1040 | 1041 | #. translators: 1: Login URL, 2:wallet amount |
  | 1041 |  | #: includes/class-woo-wallet-frontend.php:56~~4~~ |
  |  | 1042 | #: includes/class-woo-wallet-frontend.php:566 |
  | 1042 | 1043 | msgid "Please <a href=\"%1$s\">log in</a> to avail %2$s cashback from this order." |
  | 1043 | 1044 | msgstr "" |
  | 1044 | 1045 |  |
  | 1045 |  | #: includes/class-woo-wallet-frontend.php:61~~1~~ |
  |  | 1046 | #: includes/class-woo-wallet-frontend.php:613 |
  | 1046 | 1047 | msgid "Via wallet" |
  | 1047 | 1048 | msgstr "" |
  | 1048 | 1049 |  |
  | 1049 |  | #: includes/class-woo-wallet-frontend.php:67~~4~~ |
  | 1050 |  | #: includes/class-woo-wallet-frontend.php:~~699~~ |
  |  | 1050 | #: includes/class-woo-wallet-frontend.php:676 |
  |  | 1051 | #: includes/class-woo-wallet-frontend.php:701 |
  | 1051 | 1052 | msgid " Cashback" |
  | 1052 | 1053 | msgstr "" |
  | 1053 | 1054 |  |
  | 1054 |  | #: includes/class-woo-wallet-frontend.php:7~~18~~ |
  |  | 1055 | #: includes/class-woo-wallet-frontend.php:720 |
  | 1055 | 1056 | msgid "Coupon code applied successfully as cashback." |
  | 1056 | 1057 | msgstr "" |
  | 1057 | 1058 |  |
  | 1058 | 1059 | #. translators: coupon code |
  | 1059 |  | #: includes/class-woo-wallet-frontend.php:73~~5~~ |
  |  | 1060 | #: includes/class-woo-wallet-frontend.php:737 |
  | 1060 | 1061 | msgid "Cashback: %s" |
  | 1061 | 1062 | msgstr "" |
* ## [woo-wallet/trunk/readme.txt](/changeset/3145131/woo-wallet/trunk/readme.txt "Show the changeset 3145131 restricted to woo-wallet/trunk/readme.txt")

  | [r3122333](/browser/woo-wallet/trunk/readme.txt?rev=3122333#L5 "Show revision 3122333 of this file in browser") | [r3145131](/browser/woo-wallet/trunk/readme.txt?rev=3145131#L5 "Show revision 3145131 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 6.4 |
  | 6 | 6 | Tested up to: 6.6 |
  | 7 |  | Stable tag: 1.5.~~6~~ |
  |  | 7 | Stable tag: 1.5.7 |
  | 8 | 8 | Donate link: https://donate.stripe.com/fZeaFydax6NNfjWeVc |
  | 9 | 9 | License: GPLv3 |
  | […](/browser/woo-wallet/trunk/readme.txt?rev=3122333#L142) | […](/browser/woo-wallet/trunk/readme.txt?rev=3145131#L142) |  |
  | 142 | 142 |  |
  | 143 | 143 | == Changelog == |
  |  | 144 | =v1.5.7 ( September 02, 2024) = |
  |  | 145 | - \*\*Fix:-\*\* Broken wallet page link on user page. |
  |  | 146 | - \*\*Fix:-\*\* Security issues. |
  |  | 147 | - \*\*Fix:-\*\* Wallet top-up amount widget in admin panel. |
  |  | 148 |  |
  | 144 | 149 | =v1.5.6 ( July 20, 2024) = |
  | 145 | 150 | - \*\*Fix:-\*\* Permalinks issues. |
* ## [woo-wallet/trunk/woo-wallet.php](/changeset/3145131/woo-wallet/trunk/woo-wallet.php "Show the changeset 3145131 restricted to woo-wallet/trunk/woo-wallet.php")

  | [r3122333](/browser/woo-wallet/trunk/woo-wallet.php?rev=3122333#L4 "Show revision 3122333 of this file in browser") | [r3145131](/browser/woo-wallet/trunk/woo-wallet.php?rev=3145131#L4 "Show revision 3145131 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI: https://standalonetech.com/ |
  | 5 | 5 | \* Description: The leading wallet plugin for WooCommerce with partial payment, refunds, cashbacks and what not! |
  | 6 |  | \* Version: 1.5.~~6~~ |
  |  | 6 | \* Version: 1.5.7 |
  | 7 | 7 | \* Requires Plugins: woocommerce |
  | 8 | 8 | \* Author: StandaloneTech |
  | […](/browser/woo-wallet/trunk/woo-wallet.php?rev=3122333#L32) | […](/browser/woo-wallet/trunk/woo-wallet.php?rev=3145131#L32) |  |
  | 32 | 32 | // Define WOO\_WALLET\_PLUGIN\_VERSION. |
  | 33 | 33 | if ( ! defined( 'WOO\_WALLET\_PLUGIN\_VERSION' ) ) { |
  | 34 |  | define( 'WOO\_WALLET\_PLUGIN\_VERSION', '1.5.~~6~~' ); |
  |  | 34 | define( 'WOO\_WALLET\_PLUGIN\_VERSION', '1.5.7' ); |
  | 35 | 35 | } |
  | 36 | 36 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3145131)
* [Zip Archive](?format=zip&new=3145131)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_7bd3e84b_20250114_192056.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Wallet for WooCommerce <= 1.5.6 - Authenticated (Subscriber+) Incorrect Conversion between Numeric Types

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Wallet for WooCommerce <= 1.5.6 - Authenticated (Subscriber+) Incorrect Conversion between Numeric Types

6.5

**Incorrect Conversion between Numeric Types**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:H/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:H/A:N)

| CVE | [CVE-2024-7747](https://www.cve.org/CVERecord?id=CVE-2024-7747) |
| --- | --- |
| CVSS | 6.5 (Medium) |
| Publicly Published | November 27, 2024 |
| Last Updated | November 28, 2024 |
| Researcher | [stealthcopter](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/stealthcopter) |

### Description

The Wallet for WooCommerce plugin for WordPress is vulnerable to incorrect conversion between numeric types in all versions up to, and including, 1.5.6. This is due to a numerical logic flaw when transferring funds to another user. This makes it possible for authenticated attackers, with Subscriber-level access and above, to create funds during a transfer and distribute these funds to any number of other users or their own account, rendering products free. Attackers could also request to withdraw funds if the Wallet Withdrawal extension is used and the request is approved by an administrator.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/woo-wallet/trunk/includes/class-woo-wallet-frontend.php#L407)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3145131/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwoo-wallet%2Fwallet-for-woocommerce-156-authenticated-subscriber-incorrect-conversion-between-numeric-types&t=Wallet%20for%20WooCommerce%20%3C%3D%201.5.6%20-%20Authenticated%20%28Subscriber%2B%29%20Incorrect%20Conversion%20between%20Numeric%20Types "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwoo-wallet%2Fwallet-for-woocommerce-156-authenticated-subscriber-incorrect-conversion-between-numeric-types&text=Wallet%20for%20WooCommerce%20%3C%3D%201.5.6%20-%20Authenticated%20%28Subscriber%2B%29%20Incorrect%20Conversion%20between%20Numeric%20Types "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwoo-wallet%2Fwallet-for-woocommerce-156-authenticated-subscriber-incorrect-conversion-between-numeric-types "LinkedIn")
Email

## Vulnerability Details for Wallet for WooCommerce

#### [Wallet for WooCommerce](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/woo-wallet)

| Software Type | Plugin |
| --- | --- |
| Software Slug | woo-wallet [(view on wordpress.org)](https://wordpress.org/plugins/woo-wallet) |
| Patched? | Yes |
| Remediation | Update to version 1.5.7, or a newer patched version |
| Affected Version | * <= 1.5.6 |
| Patched Version | * 1.5.7 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation


