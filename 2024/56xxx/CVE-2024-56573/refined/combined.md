=== Content from git.kernel.org_7eea7ac3_20250114_212157.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ard Biesheuvel <ardb@kernel.org> | 2024-10-13 15:19:04 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-09 10:40:59 +0100 |
| commit | [eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf)) | |
| tree | [56f91a6b3ce302c72beb48c68c168619fb55b84e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf) | |
| parent | [36a4bfb5fc676f88e954a09a6072b039001e7d7d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=36a4bfb5fc676f88e954a09a6072b039001e7d7d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf&id2=36a4bfb5fc676f88e954a09a6072b039001e7d7d)) | |
| download | [linux-eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf.tar.gz) | |

efi/libstub: Free correct pointer on failurecommit 06d39d79cbd5a91a33707951ebf2512d0e759847 upstream.
cmdline\_ptr is an out parameter, which is not allocated by the function
itself, and likely points into the caller's stack.
cmdline refers to the pool allocation that should be freed when cleaning
up after a failure, so pass this instead to free\_pool().
Fixes: 42c8ea3dca09 ("efi: libstub: Factor out EFI stub entrypoint ...")
Cc: <stable@vger.kernel.org>
Signed-off-by: Ard Biesheuvel <ardb@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf)

| -rw-r--r-- | [drivers/firmware/efi/libstub/efi-stub.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/firmware/efi/libstub/efi-stub.c?id=eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/firmware/efi/libstub/efi-stub.c b/drivers/firmware/efi/libstub/efi-stub.cindex 2a1b43f9e0fa2b..df5ffe23644298 100644--- a/[drivers/firmware/efi/libstub/efi-stub.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/efi/libstub/efi-stub.c?id=36a4bfb5fc676f88e954a09a6072b039001e7d7d)+++ b/[drivers/firmware/efi/libstub/efi-stub.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/efi/libstub/efi-stub.c?id=eaafbcf0a5782ae412ca7de12ef83fc48ccea4cf)@@ -149,7 +149,7 @@ efi\_status\_t efi\_handle\_cmdline(efi\_loaded\_image\_t \*image, char \*\*cmdline\_ptr) return EFI\_SUCCESS;  fail\_free\_cmdline:- efi\_bs\_call(free\_pool, cmdline\_ptr);+ efi\_bs\_call(free\_pool, cmdline); return status; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:20:34 +0000



=== Content from git.kernel.org_0585d8ee_20250114_212154.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=06d39d79cbd5a91a33707951ebf2512d0e759847)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=06d39d79cbd5a91a33707951ebf2512d0e759847)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=06d39d79cbd5a91a33707951ebf2512d0e759847)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=06d39d79cbd5a91a33707951ebf2512d0e759847)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ard Biesheuvel <ardb@kernel.org> | 2024-10-13 15:19:04 +0200 |
| --- | --- | --- |
| committer | Ard Biesheuvel <ardb@kernel.org> | 2024-11-15 10:40:51 +0100 |
| commit | [06d39d79cbd5a91a33707951ebf2512d0e759847](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=06d39d79cbd5a91a33707951ebf2512d0e759847) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=06d39d79cbd5a91a33707951ebf2512d0e759847)) | |
| tree | [5b4029519a925734cfb9dc73e929421cb57c7ce0](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=06d39d79cbd5a91a33707951ebf2512d0e759847) | |
| parent | [63971b0f51faff0ff844a85d297e27861555c328](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=63971b0f51faff0ff844a85d297e27861555c328) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=06d39d79cbd5a91a33707951ebf2512d0e759847&id2=63971b0f51faff0ff844a85d297e27861555c328)) | |
| download | [linux-06d39d79cbd5a91a33707951ebf2512d0e759847.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-06d39d79cbd5a91a33707951ebf2512d0e759847.tar.gz) | |

efi/libstub: Free correct pointer on failurecmdline\_ptr is an out parameter, which is not allocated by the function
itself, and likely points into the caller's stack.
cmdline refers to the pool allocation that should be freed when cleaning
up after a failure, so pass this instead to free\_pool().
Fixes: 42c8ea3dca09 ("efi: libstub: Factor out EFI stub entrypoint ...")
Cc: <stable@vger.kernel.org>
Signed-off-by: Ard Biesheuvel <ardb@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=06d39d79cbd5a91a33707951ebf2512d0e759847)

| -rw-r--r-- | [drivers/firmware/efi/libstub/efi-stub.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/firmware/efi/libstub/efi-stub.c?id=06d39d79cbd5a91a33707951ebf2512d0e759847) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/firmware/efi/libstub/efi-stub.c b/drivers/firmware/efi/libstub/efi-stub.cindex f09e277ba21088..fc71dcab43e031 100644--- a/[drivers/firmware/efi/libstub/efi-stub.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/efi/libstub/efi-stub.c?id=63971b0f51faff0ff844a85d297e27861555c328)+++ b/[drivers/firmware/efi/libstub/efi-stub.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/efi/libstub/efi-stub.c?id=06d39d79cbd5a91a33707951ebf2512d0e759847)@@ -148,7 +148,7 @@ efi\_status\_t efi\_handle\_cmdline(efi\_loaded\_image\_t \*image, char \*\*cmdline\_ptr) return EFI\_SUCCESS;  fail\_free\_cmdline:- efi\_bs\_call(free\_pool, cmdline\_ptr);+ efi\_bs\_call(free\_pool, cmdline); return status; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:20:31 +0000



=== Content from git.kernel.org_4bb1b43d_20250114_212155.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d173aee5709bd0994d216d60589ec67f8b11376a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d173aee5709bd0994d216d60589ec67f8b11376a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d173aee5709bd0994d216d60589ec67f8b11376a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d173aee5709bd0994d216d60589ec67f8b11376a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ard Biesheuvel <ardb@kernel.org> | 2024-10-13 15:19:04 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-09 10:33:03 +0100 |
| commit | [d173aee5709bd0994d216d60589ec67f8b11376a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d173aee5709bd0994d216d60589ec67f8b11376a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d173aee5709bd0994d216d60589ec67f8b11376a)) | |
| tree | [6c3a8154f7574e938cfc947a14a11f882219e725](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d173aee5709bd0994d216d60589ec67f8b11376a) | |
| parent | [5262cbf40264a22ea96b0123a963c654a30f1f15](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5262cbf40264a22ea96b0123a963c654a30f1f15) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d173aee5709bd0994d216d60589ec67f8b11376a&id2=5262cbf40264a22ea96b0123a963c654a30f1f15)) | |
| download | [linux-d173aee5709bd0994d216d60589ec67f8b11376a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d173aee5709bd0994d216d60589ec67f8b11376a.tar.gz) | |

efi/libstub: Free correct pointer on failurecommit 06d39d79cbd5a91a33707951ebf2512d0e759847 upstream.
cmdline\_ptr is an out parameter, which is not allocated by the function
itself, and likely points into the caller's stack.
cmdline refers to the pool allocation that should be freed when cleaning
up after a failure, so pass this instead to free\_pool().
Fixes: 42c8ea3dca09 ("efi: libstub: Factor out EFI stub entrypoint ...")
Cc: <stable@vger.kernel.org>
Signed-off-by: Ard Biesheuvel <ardb@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d173aee5709bd0994d216d60589ec67f8b11376a)

| -rw-r--r-- | [drivers/firmware/efi/libstub/efi-stub.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/firmware/efi/libstub/efi-stub.c?id=d173aee5709bd0994d216d60589ec67f8b11376a) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/firmware/efi/libstub/efi-stub.c b/drivers/firmware/efi/libstub/efi-stub.cindex c5732fb5a56545..ec01b7d3b6d4d5 100644--- a/[drivers/firmware/efi/libstub/efi-stub.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/efi/libstub/efi-stub.c?id=5262cbf40264a22ea96b0123a963c654a30f1f15)+++ b/[drivers/firmware/efi/libstub/efi-stub.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/efi/libstub/efi-stub.c?id=d173aee5709bd0994d216d60589ec67f8b11376a)@@ -149,7 +149,7 @@ efi\_status\_t efi\_handle\_cmdline(efi\_loaded\_image\_t \*image, char \*\*cmdline\_ptr) return EFI\_SUCCESS;  fail\_free\_cmdline:- efi\_bs\_call(free\_pool, cmdline\_ptr);+ efi\_bs\_call(free\_pool, cmdline); return status; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:20:32 +0000


