=== Content from git.kernel.org_bd743470_20250114_223116.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a4d2011cbe039b25024831427b60ab91ee247066)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a4d2011cbe039b25024831427b60ab91ee247066)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a4d2011cbe039b25024831427b60ab91ee247066)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a4d2011cbe039b25024831427b60ab91ee247066)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhen Lei <thunder.leizhen@huawei.com> | 2024-10-26 20:57:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:47:59 +0100 |
| commit | [a4d2011cbe039b25024831427b60ab91ee247066](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a4d2011cbe039b25024831427b60ab91ee247066) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a4d2011cbe039b25024831427b60ab91ee247066)) | |
| tree | [d46821902938cb31a53e965a3f9daa881df954d4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a4d2011cbe039b25024831427b60ab91ee247066) | |
| parent | [a56777a3ef5b35e24a20c4418bcf88bad033807a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a56777a3ef5b35e24a20c4418bcf88bad033807a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a4d2011cbe039b25024831427b60ab91ee247066&id2=a56777a3ef5b35e24a20c4418bcf88bad033807a)) | |
| download | [linux-a4d2011cbe039b25024831427b60ab91ee247066.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a4d2011cbe039b25024831427b60ab91ee247066.tar.gz) | |

scsi: qedi: Fix a possible memory leak in qedi\_alloc\_and\_init\_sb()[ Upstream commit 95bbdca4999bc59a72ebab01663d421d6ce5775d ]
Hook "qedi\_ops->common->sb\_init = qed\_sb\_init" does not release the DMA
memory sb\_virt when it fails. Add dma\_free\_coherent() to free it. This
is the same way as qedr\_alloc\_mem\_sb() and qede\_alloc\_mem\_sb().
Fixes: ace7f46ba5fd ("scsi: qedi: Add QLogic FastLinQ offload iSCSI driver framework.")
Signed-off-by: Zhen Lei <thunder.leizhen@huawei.com>
Link: [https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen@huawei.com](https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen%40huawei.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a4d2011cbe039b25024831427b60ab91ee247066)

| -rw-r--r-- | [drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/qedi/qedi_main.c?id=a4d2011cbe039b25024831427b60ab91ee247066) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/scsi/qedi/qedi\_main.c b/drivers/scsi/qedi/qedi\_main.cindex 96e470746767a3..3bf75d466b2c69 100644--- a/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=a56777a3ef5b35e24a20c4418bcf88bad033807a)+++ b/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=a4d2011cbe039b25024831427b60ab91ee247066)@@ -371,6 +371,7 @@ static int qedi\_alloc\_and\_init\_sb(struct qedi\_ctx \*qedi, ret = qedi\_ops->common->sb\_init(qedi->cdev, sb\_info, sb\_virt, sb\_phys, sb\_id, QED\_SB\_TYPE\_STORAGE); if (ret) {+ dma\_free\_coherent(&qedi->pdev->dev, sizeof(\*sb\_virt), sb\_virt, sb\_phys); QEDI\_ERR(&qedi->dbg\_ctx, "Status block initialization failed for id = %d.\n", sb\_id); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 22:29:53 +0000



=== Content from git.kernel.org_49cb3295_20250114_223111.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=10a6fc486ac40a410f0fb84cc15161238eccd20a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=10a6fc486ac40a410f0fb84cc15161238eccd20a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=10a6fc486ac40a410f0fb84cc15161238eccd20a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=10a6fc486ac40a410f0fb84cc15161238eccd20a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhen Lei <thunder.leizhen@huawei.com> | 2024-10-26 20:57:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-09 10:32:19 +0100 |
| commit | [10a6fc486ac40a410f0fb84cc15161238eccd20a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=10a6fc486ac40a410f0fb84cc15161238eccd20a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=10a6fc486ac40a410f0fb84cc15161238eccd20a)) | |
| tree | [ba310770d9dd2c873aa35276a3553a32fd7f4422](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=10a6fc486ac40a410f0fb84cc15161238eccd20a) | |
| parent | [7c1832287b21ff68c4e3625e63cc7619edf5908b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7c1832287b21ff68c4e3625e63cc7619edf5908b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=10a6fc486ac40a410f0fb84cc15161238eccd20a&id2=7c1832287b21ff68c4e3625e63cc7619edf5908b)) | |
| download | [linux-10a6fc486ac40a410f0fb84cc15161238eccd20a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-10a6fc486ac40a410f0fb84cc15161238eccd20a.tar.gz) | |

scsi: qedi: Fix a possible memory leak in qedi\_alloc\_and\_init\_sb()[ Upstream commit 95bbdca4999bc59a72ebab01663d421d6ce5775d ]
Hook "qedi\_ops->common->sb\_init = qed\_sb\_init" does not release the DMA
memory sb\_virt when it fails. Add dma\_free\_coherent() to free it. This
is the same way as qedr\_alloc\_mem\_sb() and qede\_alloc\_mem\_sb().
Fixes: ace7f46ba5fd ("scsi: qedi: Add QLogic FastLinQ offload iSCSI driver framework.")
Signed-off-by: Zhen Lei <thunder.leizhen@huawei.com>
Link: [https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen@huawei.com](https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen%40huawei.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=10a6fc486ac40a410f0fb84cc15161238eccd20a)

| -rw-r--r-- | [drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/qedi/qedi_main.c?id=10a6fc486ac40a410f0fb84cc15161238eccd20a) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/scsi/qedi/qedi\_main.c b/drivers/scsi/qedi/qedi\_main.cindex cd0180b1f5b9da..ede8d1f6ae2361 100644--- a/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=7c1832287b21ff68c4e3625e63cc7619edf5908b)+++ b/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=10a6fc486ac40a410f0fb84cc15161238eccd20a)@@ -369,6 +369,7 @@ static int qedi\_alloc\_and\_init\_sb(struct qedi\_ctx \*qedi, ret = qedi\_ops->common->sb\_init(qedi->cdev, sb\_info, sb\_virt, sb\_phys, sb\_id, QED\_SB\_TYPE\_STORAGE); if (ret) {+ dma\_free\_coherent(&qedi->pdev->dev, sizeof(\*sb\_virt), sb\_virt, sb\_phys); QEDI\_ERR(&qedi->dbg\_ctx, "Status block initialization failed for id = %d.\n", sb\_id); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 22:29:48 +0000



=== Content from git.kernel.org_9f79dd06_20250114_223117.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b778b5240485106abf665eb509cc01779ed0cb00)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b778b5240485106abf665eb509cc01779ed0cb00)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b778b5240485106abf665eb509cc01779ed0cb00)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b778b5240485106abf665eb509cc01779ed0cb00)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhen Lei <thunder.leizhen@huawei.com> | 2024-10-26 20:57:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:53:40 +0100 |
| commit | [b778b5240485106abf665eb509cc01779ed0cb00](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b778b5240485106abf665eb509cc01779ed0cb00) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b778b5240485106abf665eb509cc01779ed0cb00)) | |
| tree | [60acf903f9489aac8f5d4d25b37889af9014947f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b778b5240485106abf665eb509cc01779ed0cb00) | |
| parent | [b514f45e0fe18d763a1afc34401b1585333cb329](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b514f45e0fe18d763a1afc34401b1585333cb329) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b778b5240485106abf665eb509cc01779ed0cb00&id2=b514f45e0fe18d763a1afc34401b1585333cb329)) | |
| download | [linux-b778b5240485106abf665eb509cc01779ed0cb00.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b778b5240485106abf665eb509cc01779ed0cb00.tar.gz) | |

scsi: qedi: Fix a possible memory leak in qedi\_alloc\_and\_init\_sb()[ Upstream commit 95bbdca4999bc59a72ebab01663d421d6ce5775d ]
Hook "qedi\_ops->common->sb\_init = qed\_sb\_init" does not release the DMA
memory sb\_virt when it fails. Add dma\_free\_coherent() to free it. This
is the same way as qedr\_alloc\_mem\_sb() and qede\_alloc\_mem\_sb().
Fixes: ace7f46ba5fd ("scsi: qedi: Add QLogic FastLinQ offload iSCSI driver framework.")
Signed-off-by: Zhen Lei <thunder.leizhen@huawei.com>
Link: [https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen@huawei.com](https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen%40huawei.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b778b5240485106abf665eb509cc01779ed0cb00)

| -rw-r--r-- | [drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/qedi/qedi_main.c?id=b778b5240485106abf665eb509cc01779ed0cb00) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/scsi/qedi/qedi\_main.c b/drivers/scsi/qedi/qedi\_main.cindex 2ee109fb656161..825606c845e1ab 100644--- a/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=b514f45e0fe18d763a1afc34401b1585333cb329)+++ b/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=b778b5240485106abf665eb509cc01779ed0cb00)@@ -369,6 +369,7 @@ static int qedi\_alloc\_and\_init\_sb(struct qedi\_ctx \*qedi, ret = qedi\_ops->common->sb\_init(qedi->cdev, sb\_info, sb\_virt, sb\_phys, sb\_id, QED\_SB\_TYPE\_STORAGE); if (ret) {+ dma\_free\_coherent(&qedi->pdev->dev, sizeof(\*sb\_virt), sb\_virt, sb\_phys); QEDI\_ERR(&qedi->dbg\_ctx, "Status block initialization failed for id = %d.\n", sb\_id); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 22:29:54 +0000



=== Content from git.kernel.org_9433aa72_20250114_223119.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhen Lei <thunder.leizhen@huawei.com> | 2024-10-26 20:57:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 13:53:39 +0100 |
| commit | [cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5)) | |
| tree | [511227060a847b613832e45ee1406c21f15b8b9b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5) | |
| parent | [0e04bd5a11dffe8c1c0e4c9fc79f7d3cd6182dd5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0e04bd5a11dffe8c1c0e4c9fc79f7d3cd6182dd5) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5&id2=0e04bd5a11dffe8c1c0e4c9fc79f7d3cd6182dd5)) | |
| download | [linux-cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5.tar.gz) | |

scsi: qedi: Fix a possible memory leak in qedi\_alloc\_and\_init\_sb()[ Upstream commit 95bbdca4999bc59a72ebab01663d421d6ce5775d ]
Hook "qedi\_ops->common->sb\_init = qed\_sb\_init" does not release the DMA
memory sb\_virt when it fails. Add dma\_free\_coherent() to free it. This
is the same way as qedr\_alloc\_mem\_sb() and qede\_alloc\_mem\_sb().
Fixes: ace7f46ba5fd ("scsi: qedi: Add QLogic FastLinQ offload iSCSI driver framework.")
Signed-off-by: Zhen Lei <thunder.leizhen@huawei.com>
Link: [https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen@huawei.com](https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen%40huawei.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5)

| -rw-r--r-- | [drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/qedi/qedi_main.c?id=cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/scsi/qedi/qedi\_main.c b/drivers/scsi/qedi/qedi\_main.cindex cd0180b1f5b9da..ede8d1f6ae2361 100644--- a/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=0e04bd5a11dffe8c1c0e4c9fc79f7d3cd6182dd5)+++ b/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=cfc76acaf2c4b43d1e140f1e4cbde15adb540bc5)@@ -369,6 +369,7 @@ static int qedi\_alloc\_and\_init\_sb(struct qedi\_ctx \*qedi, ret = qedi\_ops->common->sb\_init(qedi->cdev, sb\_info, sb\_virt, sb\_phys, sb\_id, QED\_SB\_TYPE\_STORAGE); if (ret) {+ dma\_free\_coherent(&qedi->pdev->dev, sizeof(\*sb\_virt), sb\_virt, sb\_phys); QEDI\_ERR(&qedi->dbg\_ctx, "Status block initialization failed for id = %d.\n", sb\_id); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 22:29:56 +0000



=== Content from git.kernel.org_6233b607_20250114_223114.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4e48e5b26b3edc0e1dd329201ffc924a7a1f9337)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4e48e5b26b3edc0e1dd329201ffc924a7a1f9337)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4e48e5b26b3edc0e1dd329201ffc924a7a1f9337)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4e48e5b26b3edc0e1dd329201ffc924a7a1f9337)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhen Lei <thunder.leizhen@huawei.com> | 2024-10-26 20:57:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 10:59:34 +0100 |
| commit | [4e48e5b26b3edc0e1dd329201ffc924a7a1f9337](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4e48e5b26b3edc0e1dd329201ffc924a7a1f9337) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4e48e5b26b3edc0e1dd329201ffc924a7a1f9337)) | |
| tree | [d7ea2e86d554f850cd579f464d29ecfb871f6013](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4e48e5b26b3edc0e1dd329201ffc924a7a1f9337) | |
| parent | [710cbead813e175d4d037f92a6d14a2c8639885f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=710cbead813e175d4d037f92a6d14a2c8639885f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4e48e5b26b3edc0e1dd329201ffc924a7a1f9337&id2=710cbead813e175d4d037f92a6d14a2c8639885f)) | |
| download | [linux-4e48e5b26b3edc0e1dd329201ffc924a7a1f9337.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4e48e5b26b3edc0e1dd329201ffc924a7a1f9337.tar.gz) | |

scsi: qedi: Fix a possible memory leak in qedi\_alloc\_and\_init\_sb()[ Upstream commit 95bbdca4999bc59a72ebab01663d421d6ce5775d ]
Hook "qedi\_ops->common->sb\_init = qed\_sb\_init" does not release the DMA
memory sb\_virt when it fails. Add dma\_free\_coherent() to free it. This
is the same way as qedr\_alloc\_mem\_sb() and qede\_alloc\_mem\_sb().
Fixes: ace7f46ba5fd ("scsi: qedi: Add QLogic FastLinQ offload iSCSI driver framework.")
Signed-off-by: Zhen Lei <thunder.leizhen@huawei.com>
Link: [https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen@huawei.com](https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen%40huawei.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4e48e5b26b3edc0e1dd329201ffc924a7a1f9337)

| -rw-r--r-- | [drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/qedi/qedi_main.c?id=4e48e5b26b3edc0e1dd329201ffc924a7a1f9337) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/scsi/qedi/qedi\_main.c b/drivers/scsi/qedi/qedi\_main.cindex 7a179cfc01ed26..15567e60216ec6 100644--- a/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=710cbead813e175d4d037f92a6d14a2c8639885f)+++ b/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=4e48e5b26b3edc0e1dd329201ffc924a7a1f9337)@@ -357,6 +357,7 @@ static int qedi\_alloc\_and\_init\_sb(struct qedi\_ctx \*qedi, ret = qedi\_ops->common->sb\_init(qedi->cdev, sb\_info, sb\_virt, sb\_phys, sb\_id, QED\_SB\_TYPE\_STORAGE); if (ret) {+ dma\_free\_coherent(&qedi->pdev->dev, sizeof(\*sb\_virt), sb\_virt, sb\_phys); QEDI\_ERR(&qedi->dbg\_ctx, "Status block initialization failed for id = %d.\n", sb\_id); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 22:29:51 +0000



=== Content from git.kernel.org_4fb5496e_20250114_223115.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=95bbdca4999bc59a72ebab01663d421d6ce5775d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=95bbdca4999bc59a72ebab01663d421d6ce5775d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=95bbdca4999bc59a72ebab01663d421d6ce5775d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=95bbdca4999bc59a72ebab01663d421d6ce5775d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhen Lei <thunder.leizhen@huawei.com> | 2024-10-26 20:57:11 +0800 |
| --- | --- | --- |
| committer | Martin K. Petersen <martin.petersen@oracle.com> | 2024-11-06 20:46:36 -0500 |
| commit | [95bbdca4999bc59a72ebab01663d421d6ce5775d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=95bbdca4999bc59a72ebab01663d421d6ce5775d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=95bbdca4999bc59a72ebab01663d421d6ce5775d)) | |
| tree | [96db283053c357bfffad606f72307c0ae8a96063](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=95bbdca4999bc59a72ebab01663d421d6ce5775d) | |
| parent | [c62c30429db3eb4ced35c7fcf6f04a61ce3a01bb](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c62c30429db3eb4ced35c7fcf6f04a61ce3a01bb) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=95bbdca4999bc59a72ebab01663d421d6ce5775d&id2=c62c30429db3eb4ced35c7fcf6f04a61ce3a01bb)) | |
| download | [linux-95bbdca4999bc59a72ebab01663d421d6ce5775d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-95bbdca4999bc59a72ebab01663d421d6ce5775d.tar.gz) | |

scsi: qedi: Fix a possible memory leak in qedi\_alloc\_and\_init\_sb()Hook "qedi\_ops->common->sb\_init = qed\_sb\_init" does not release the DMA
memory sb\_virt when it fails. Add dma\_free\_coherent() to free it. This
is the same way as qedr\_alloc\_mem\_sb() and qede\_alloc\_mem\_sb().
Fixes: ace7f46ba5fd ("scsi: qedi: Add QLogic FastLinQ offload iSCSI driver framework.")
Signed-off-by: Zhen Lei <thunder.leizhen@huawei.com>
Link: [https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen@huawei.com](https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen%40huawei.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=95bbdca4999bc59a72ebab01663d421d6ce5775d)

| -rw-r--r-- | [drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/qedi/qedi_main.c?id=95bbdca4999bc59a72ebab01663d421d6ce5775d) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/scsi/qedi/qedi\_main.c b/drivers/scsi/qedi/qedi\_main.cindex c5aec26019d6ab..628d59dda20cc4 100644--- a/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=c62c30429db3eb4ced35c7fcf6f04a61ce3a01bb)+++ b/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=95bbdca4999bc59a72ebab01663d421d6ce5775d)@@ -369,6 +369,7 @@ static int qedi\_alloc\_and\_init\_sb(struct qedi\_ctx \*qedi, ret = qedi\_ops->common->sb\_init(qedi->cdev, sb\_info, sb\_virt, sb\_phys, sb\_id, QED\_SB\_TYPE\_STORAGE); if (ret) {+ dma\_free\_coherent(&qedi->pdev->dev, sizeof(\*sb\_virt), sb\_virt, sb\_phys); QEDI\_ERR(&qedi->dbg\_ctx, "Status block initialization failed for id = %d.\n", sb\_id); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 22:29:52 +0000



=== Content from git.kernel.org_93c13474_20250114_223118.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=bb8b45883eb072adba297922b67d1467082ac880)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=bb8b45883eb072adba297922b67d1467082ac880)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bb8b45883eb072adba297922b67d1467082ac880)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bb8b45883eb072adba297922b67d1467082ac880)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhen Lei <thunder.leizhen@huawei.com> | 2024-10-26 20:57:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:51:02 +0100 |
| commit | [bb8b45883eb072adba297922b67d1467082ac880](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bb8b45883eb072adba297922b67d1467082ac880) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=bb8b45883eb072adba297922b67d1467082ac880)) | |
| tree | [1e1486a8b6e608cc8630ae287773cc22c89c5839](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=bb8b45883eb072adba297922b67d1467082ac880) | |
| parent | [64654bf5efb3f748e6fc41227adda689618ce9c4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=64654bf5efb3f748e6fc41227adda689618ce9c4) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bb8b45883eb072adba297922b67d1467082ac880&id2=64654bf5efb3f748e6fc41227adda689618ce9c4)) | |
| download | [linux-bb8b45883eb072adba297922b67d1467082ac880.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-bb8b45883eb072adba297922b67d1467082ac880.tar.gz) | |

scsi: qedi: Fix a possible memory leak in qedi\_alloc\_and\_init\_sb()[ Upstream commit 95bbdca4999bc59a72ebab01663d421d6ce5775d ]
Hook "qedi\_ops->common->sb\_init = qed\_sb\_init" does not release the DMA
memory sb\_virt when it fails. Add dma\_free\_coherent() to free it. This
is the same way as qedr\_alloc\_mem\_sb() and qede\_alloc\_mem\_sb().
Fixes: ace7f46ba5fd ("scsi: qedi: Add QLogic FastLinQ offload iSCSI driver framework.")
Signed-off-by: Zhen Lei <thunder.leizhen@huawei.com>
Link: [https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen@huawei.com](https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen%40huawei.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bb8b45883eb072adba297922b67d1467082ac880)

| -rw-r--r-- | [drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/qedi/qedi_main.c?id=bb8b45883eb072adba297922b67d1467082ac880) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/scsi/qedi/qedi\_main.c b/drivers/scsi/qedi/qedi\_main.cindex b36edbef5b82f1..76b2e6484f90fc 100644--- a/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=64654bf5efb3f748e6fc41227adda689618ce9c4)+++ b/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=bb8b45883eb072adba297922b67d1467082ac880)@@ -369,6 +369,7 @@ static int qedi\_alloc\_and\_init\_sb(struct qedi\_ctx \*qedi, ret = qedi\_ops->common->sb\_init(qedi->cdev, sb\_info, sb\_virt, sb\_phys, sb\_id, QED\_SB\_TYPE\_STORAGE); if (ret) {+ dma\_free\_coherent(&qedi->pdev->dev, sizeof(\*sb\_virt), sb\_virt, sb\_phys); QEDI\_ERR(&qedi->dbg\_ctx, "Status block initialization failed for id = %d.\n", sb\_id); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 22:29:55 +0000



=== Content from git.kernel.org_e381c194_20250114_223121.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=eaf92fad1f21be63427920c12f22227e5f757424)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=eaf92fad1f21be63427920c12f22227e5f757424)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=eaf92fad1f21be63427920c12f22227e5f757424)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=eaf92fad1f21be63427920c12f22227e5f757424)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhen Lei <thunder.leizhen@huawei.com> | 2024-10-26 20:57:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:44:30 +0100 |
| commit | [eaf92fad1f21be63427920c12f22227e5f757424](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=eaf92fad1f21be63427920c12f22227e5f757424) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=eaf92fad1f21be63427920c12f22227e5f757424)) | |
| tree | [5684f2408c51e200a46e93ca1ffb6395d9ff958c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=eaf92fad1f21be63427920c12f22227e5f757424) | |
| parent | [97384449ddfc07f12ca75f510eb070020d7abb34](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=97384449ddfc07f12ca75f510eb070020d7abb34) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=eaf92fad1f21be63427920c12f22227e5f757424&id2=97384449ddfc07f12ca75f510eb070020d7abb34)) | |
| download | [linux-eaf92fad1f21be63427920c12f22227e5f757424.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-eaf92fad1f21be63427920c12f22227e5f757424.tar.gz) | |

scsi: qedi: Fix a possible memory leak in qedi\_alloc\_and\_init\_sb()[ Upstream commit 95bbdca4999bc59a72ebab01663d421d6ce5775d ]
Hook "qedi\_ops->common->sb\_init = qed\_sb\_init" does not release the DMA
memory sb\_virt when it fails. Add dma\_free\_coherent() to free it. This
is the same way as qedr\_alloc\_mem\_sb() and qede\_alloc\_mem\_sb().
Fixes: ace7f46ba5fd ("scsi: qedi: Add QLogic FastLinQ offload iSCSI driver framework.")
Signed-off-by: Zhen Lei <thunder.leizhen@huawei.com>
Link: [https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen@huawei.com](https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen%40huawei.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=eaf92fad1f21be63427920c12f22227e5f757424)

| -rw-r--r-- | [drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/qedi/qedi_main.c?id=eaf92fad1f21be63427920c12f22227e5f757424) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/scsi/qedi/qedi\_main.c b/drivers/scsi/qedi/qedi\_main.cindex 6b47921202ebab..67d2d66d8e7314 100644--- a/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=97384449ddfc07f12ca75f510eb070020d7abb34)+++ b/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=eaf92fad1f21be63427920c12f22227e5f757424)@@ -359,6 +359,7 @@ static int qedi\_alloc\_and\_init\_sb(struct qedi\_ctx \*qedi, ret = qedi\_ops->common->sb\_init(qedi->cdev, sb\_info, sb\_virt, sb\_phys, sb\_id, QED\_SB\_TYPE\_STORAGE); if (ret) {+ dma\_free\_coherent(&qedi->pdev->dev, sizeof(\*sb\_virt), sb\_virt, sb\_phys); QEDI\_ERR(&qedi->dbg\_ctx, "Status block initialization failed for id = %d.\n", sb\_id); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 22:29:58 +0000



=== Content from git.kernel.org_d4a8489c_20250114_223112.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=20b775cf274cfbfa3da871a1108877e17b8b19e1)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=20b775cf274cfbfa3da871a1108877e17b8b19e1)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=20b775cf274cfbfa3da871a1108877e17b8b19e1)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=20b775cf274cfbfa3da871a1108877e17b8b19e1)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhen Lei <thunder.leizhen@huawei.com> | 2024-10-26 20:57:11 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 14:02:11 +0100 |
| commit | [20b775cf274cfbfa3da871a1108877e17b8b19e1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=20b775cf274cfbfa3da871a1108877e17b8b19e1) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=20b775cf274cfbfa3da871a1108877e17b8b19e1)) | |
| tree | [0bbe5eee8d8062c278660820b7a45294dae35c60](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=20b775cf274cfbfa3da871a1108877e17b8b19e1) | |
| parent | [78a169dc69fbdaf114c40e2d56955bf6bd4fc3c0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=78a169dc69fbdaf114c40e2d56955bf6bd4fc3c0) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=20b775cf274cfbfa3da871a1108877e17b8b19e1&id2=78a169dc69fbdaf114c40e2d56955bf6bd4fc3c0)) | |
| download | [linux-20b775cf274cfbfa3da871a1108877e17b8b19e1.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-20b775cf274cfbfa3da871a1108877e17b8b19e1.tar.gz) | |

scsi: qedi: Fix a possible memory leak in qedi\_alloc\_and\_init\_sb()[ Upstream commit 95bbdca4999bc59a72ebab01663d421d6ce5775d ]
Hook "qedi\_ops->common->sb\_init = qed\_sb\_init" does not release the DMA
memory sb\_virt when it fails. Add dma\_free\_coherent() to free it. This
is the same way as qedr\_alloc\_mem\_sb() and qede\_alloc\_mem\_sb().
Fixes: ace7f46ba5fd ("scsi: qedi: Add QLogic FastLinQ offload iSCSI driver framework.")
Signed-off-by: Zhen Lei <thunder.leizhen@huawei.com>
Link: [https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen@huawei.com](https://lore.kernel.org/r/20241026125711.484-3-thunder.leizhen%40huawei.com)
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=20b775cf274cfbfa3da871a1108877e17b8b19e1)

| -rw-r--r-- | [drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/scsi/qedi/qedi_main.c?id=20b775cf274cfbfa3da871a1108877e17b8b19e1) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/scsi/qedi/qedi\_main.c b/drivers/scsi/qedi/qedi\_main.cindex c5aec26019d6ab..628d59dda20cc4 100644--- a/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=78a169dc69fbdaf114c40e2d56955bf6bd4fc3c0)+++ b/[drivers/scsi/qedi/qedi\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/scsi/qedi/qedi_main.c?id=20b775cf274cfbfa3da871a1108877e17b8b19e1)@@ -369,6 +369,7 @@ static int qedi\_alloc\_and\_init\_sb(struct qedi\_ctx \*qedi, ret = qedi\_ops->common->sb\_init(qedi->cdev, sb\_info, sb\_virt, sb\_phys, sb\_id, QED\_SB\_TYPE\_STORAGE); if (ret) {+ dma\_free\_coherent(&qedi->pdev->dev, sizeof(\*sb\_virt), sb\_virt, sb\_phys); QEDI\_ERR(&qedi->dbg\_ctx, "Status block initialization failed for id = %d.\n", sb\_id); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 22:29:49 +0000


