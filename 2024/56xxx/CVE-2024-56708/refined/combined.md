=== Content from git.kernel.org_0ee797ec_20250114_192411.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=830cabb61113d92a425dd3038ccedbdfb3c8d079)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=830cabb61113d92a425dd3038ccedbdfb3c8d079)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=830cabb61113d92a425dd3038ccedbdfb3c8d079)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=830cabb61113d92a425dd3038ccedbdfb3c8d079)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Orange Kao <orange@aiven.io> | 2024-11-04 12:40:52 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-09 10:31:48 +0100 |
| commit | [830cabb61113d92a425dd3038ccedbdfb3c8d079](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=830cabb61113d92a425dd3038ccedbdfb3c8d079) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=830cabb61113d92a425dd3038ccedbdfb3c8d079)) | |
| tree | [26ef3080f80427f707df3534dbee04643e7d428e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=830cabb61113d92a425dd3038ccedbdfb3c8d079) | |
| parent | [6a975fbab1d21b9e663d366d5b7da061d53ea5cd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6a975fbab1d21b9e663d366d5b7da061d53ea5cd) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=830cabb61113d92a425dd3038ccedbdfb3c8d079&id2=6a975fbab1d21b9e663d366d5b7da061d53ea5cd)) | |
| download | [linux-830cabb61113d92a425dd3038ccedbdfb3c8d079.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-830cabb61113d92a425dd3038ccedbdfb3c8d079.tar.gz) | |

EDAC/igen6: Avoid segmentation fault on module unload[ Upstream commit fefaae90398d38a1100ccd73b46ab55ff4610fba ]
The segmentation fault happens because:
During modprobe:
1. In igen6\_probe(), igen6\_pvt will be allocated with kzalloc()
2. In igen6\_register\_mci(), mci->pvt\_info will point to
&igen6\_pvt->imc[mc]
During rmmod:
1. In mci\_release() in edac\_mc.c, it will kfree(mci->pvt\_info)
2. In igen6\_remove(), it will kfree(igen6\_pvt);
Fix this issue by setting mci->pvt\_info to NULL to avoid the double
kfree.
Fixes: 10590a9d4f23 ("EDAC/igen6: Add EDAC driver for Intel client SoCs using IBECC")
Closes: https://bugzilla.kernel.org/show\_bug.cgi?id=219360
Signed-off-by: Orange Kao <orange@aiven.io>
Signed-off-by: Tony Luck <tony.luck@intel.com>
Link: [https://lore.kernel.org/r/20241104124237.124109-2-orange@aiven.io](https://lore.kernel.org/r/20241104124237.124109-2-orange%40aiven.io)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=830cabb61113d92a425dd3038ccedbdfb3c8d079)

| -rw-r--r-- | [drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/edac/igen6_edac.c?id=830cabb61113d92a425dd3038ccedbdfb3c8d079) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/edac/igen6\_edac.c b/drivers/edac/igen6\_edac.cindex a0edb61a5a01ac..0b408299699a8e 100644--- a/[drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/igen6_edac.c?id=6a975fbab1d21b9e663d366d5b7da061d53ea5cd)+++ b/[drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/igen6_edac.c?id=830cabb61113d92a425dd3038ccedbdfb3c8d079)@@ -1075,6 +1075,7 @@ static int igen6\_register\_mci(int mc, u64 mchbar, struct pci\_dev \*pdev) imc->mci = mci; return 0; fail3:+ mci->pvt\_info = NULL; kfree(mci->ctl\_name); fail2: edac\_mc\_free(mci);@@ -1099,6 +1100,7 @@ static void igen6\_unregister\_mcis(void)  edac\_mc\_del\_mc(mci->pdev); kfree(mci->ctl\_name);+ mci->pvt\_info = NULL; edac\_mc\_free(mci); iounmap(imc->window); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:22:49 +0000



=== Content from git.kernel.org_8a2db606_20250114_192411.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2a80e710bbc088a2511c159ee4d910456c5f0832)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2a80e710bbc088a2511c159ee4d910456c5f0832)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2a80e710bbc088a2511c159ee4d910456c5f0832)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2a80e710bbc088a2511c159ee4d910456c5f0832)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Orange Kao <orange@aiven.io> | 2024-11-04 12:40:52 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:53:17 +0100 |
| commit | [2a80e710bbc088a2511c159ee4d910456c5f0832](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2a80e710bbc088a2511c159ee4d910456c5f0832) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2a80e710bbc088a2511c159ee4d910456c5f0832)) | |
| tree | [53a9d32eb565c634a0c5ec18d741348908bfbc5f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2a80e710bbc088a2511c159ee4d910456c5f0832) | |
| parent | [67c3ca63d4e0dd41c8aadd199820cc23ef68113b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=67c3ca63d4e0dd41c8aadd199820cc23ef68113b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2a80e710bbc088a2511c159ee4d910456c5f0832&id2=67c3ca63d4e0dd41c8aadd199820cc23ef68113b)) | |
| download | [linux-2a80e710bbc088a2511c159ee4d910456c5f0832.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2a80e710bbc088a2511c159ee4d910456c5f0832.tar.gz) | |

EDAC/igen6: Avoid segmentation fault on module unload[ Upstream commit fefaae90398d38a1100ccd73b46ab55ff4610fba ]
The segmentation fault happens because:
During modprobe:
1. In igen6\_probe(), igen6\_pvt will be allocated with kzalloc()
2. In igen6\_register\_mci(), mci->pvt\_info will point to
&igen6\_pvt->imc[mc]
During rmmod:
1. In mci\_release() in edac\_mc.c, it will kfree(mci->pvt\_info)
2. In igen6\_remove(), it will kfree(igen6\_pvt);
Fix this issue by setting mci->pvt\_info to NULL to avoid the double
kfree.
Fixes: 10590a9d4f23 ("EDAC/igen6: Add EDAC driver for Intel client SoCs using IBECC")
Closes: https://bugzilla.kernel.org/show\_bug.cgi?id=219360
Signed-off-by: Orange Kao <orange@aiven.io>
Signed-off-by: Tony Luck <tony.luck@intel.com>
Link: [https://lore.kernel.org/r/20241104124237.124109-2-orange@aiven.io](https://lore.kernel.org/r/20241104124237.124109-2-orange%40aiven.io)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2a80e710bbc088a2511c159ee4d910456c5f0832)

| -rw-r--r-- | [drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/edac/igen6_edac.c?id=2a80e710bbc088a2511c159ee4d910456c5f0832) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/edac/igen6\_edac.c b/drivers/edac/igen6\_edac.cindex 74c5aad1f6081a..0ab8642c4e55a4 100644--- a/[drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/igen6_edac.c?id=67c3ca63d4e0dd41c8aadd199820cc23ef68113b)+++ b/[drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/igen6_edac.c?id=2a80e710bbc088a2511c159ee4d910456c5f0832)@@ -1075,6 +1075,7 @@ static int igen6\_register\_mci(int mc, u64 mchbar, struct pci\_dev \*pdev) imc->mci = mci; return 0; fail3:+ mci->pvt\_info = NULL; kfree(mci->ctl\_name); fail2: edac\_mc\_free(mci);@@ -1099,6 +1100,7 @@ static void igen6\_unregister\_mcis(void)  edac\_mc\_del\_mc(mci->pdev); kfree(mci->ctl\_name);+ mci->pvt\_info = NULL; edac\_mc\_free(mci); iounmap(imc->window); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:22:48 +0000



=== Content from git.kernel.org_49d021d8_20250114_192412.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=db60326f2c47b079e36785ace621eb3002db2088)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=db60326f2c47b079e36785ace621eb3002db2088)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=db60326f2c47b079e36785ace621eb3002db2088)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=db60326f2c47b079e36785ace621eb3002db2088)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Orange Kao <orange@aiven.io> | 2024-11-04 12:40:52 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 14:01:18 +0100 |
| commit | [db60326f2c47b079e36785ace621eb3002db2088](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=db60326f2c47b079e36785ace621eb3002db2088) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=db60326f2c47b079e36785ace621eb3002db2088)) | |
| tree | [c3bc63cb33e5dc9eb9e4034dc39d1550883d80b4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=db60326f2c47b079e36785ace621eb3002db2088) | |
| parent | [13de0dec38f855e6799b8ba54cdd3a47a775ba53](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=13de0dec38f855e6799b8ba54cdd3a47a775ba53) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=db60326f2c47b079e36785ace621eb3002db2088&id2=13de0dec38f855e6799b8ba54cdd3a47a775ba53)) | |
| download | [linux-db60326f2c47b079e36785ace621eb3002db2088.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-db60326f2c47b079e36785ace621eb3002db2088.tar.gz) | |

EDAC/igen6: Avoid segmentation fault on module unload[ Upstream commit fefaae90398d38a1100ccd73b46ab55ff4610fba ]
The segmentation fault happens because:
During modprobe:
1. In igen6\_probe(), igen6\_pvt will be allocated with kzalloc()
2. In igen6\_register\_mci(), mci->pvt\_info will point to
&igen6\_pvt->imc[mc]
During rmmod:
1. In mci\_release() in edac\_mc.c, it will kfree(mci->pvt\_info)
2. In igen6\_remove(), it will kfree(igen6\_pvt);
Fix this issue by setting mci->pvt\_info to NULL to avoid the double
kfree.
Fixes: 10590a9d4f23 ("EDAC/igen6: Add EDAC driver for Intel client SoCs using IBECC")
Closes: https://bugzilla.kernel.org/show\_bug.cgi?id=219360
Signed-off-by: Orange Kao <orange@aiven.io>
Signed-off-by: Tony Luck <tony.luck@intel.com>
Link: [https://lore.kernel.org/r/20241104124237.124109-2-orange@aiven.io](https://lore.kernel.org/r/20241104124237.124109-2-orange%40aiven.io)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=db60326f2c47b079e36785ace621eb3002db2088)

| -rw-r--r-- | [drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/edac/igen6_edac.c?id=db60326f2c47b079e36785ace621eb3002db2088) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/edac/igen6\_edac.c b/drivers/edac/igen6\_edac.cindex 189a2fc29e74f5..07dacf8c10be3d 100644--- a/[drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/igen6_edac.c?id=13de0dec38f855e6799b8ba54cdd3a47a775ba53)+++ b/[drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/igen6_edac.c?id=db60326f2c47b079e36785ace621eb3002db2088)@@ -1245,6 +1245,7 @@ static int igen6\_register\_mci(int mc, u64 mchbar, struct pci\_dev \*pdev) imc->mci = mci; return 0; fail3:+ mci->pvt\_info = NULL; kfree(mci->ctl\_name); fail2: edac\_mc\_free(mci);@@ -1269,6 +1270,7 @@ static void igen6\_unregister\_mcis(void)  edac\_mc\_del\_mc(mci->pdev); kfree(mci->ctl\_name);+ mci->pvt\_info = NULL; edac\_mc\_free(mci); iounmap(imc->window); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:22:49 +0000



=== Content from git.kernel.org_653606a2_20250114_192413.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=fefaae90398d38a1100ccd73b46ab55ff4610fba)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fefaae90398d38a1100ccd73b46ab55ff4610fba)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fefaae90398d38a1100ccd73b46ab55ff4610fba)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fefaae90398d38a1100ccd73b46ab55ff4610fba)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Orange Kao <orange@aiven.io> | 2024-11-04 12:40:52 +0000 |
| --- | --- | --- |
| committer | Tony Luck <tony.luck@intel.com> | 2024-11-04 12:09:45 -0800 |
| commit | [fefaae90398d38a1100ccd73b46ab55ff4610fba](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fefaae90398d38a1100ccd73b46ab55ff4610fba) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=fefaae90398d38a1100ccd73b46ab55ff4610fba)) | |
| tree | [e6914ab42dcd6a487a544b6f74ff44c6067e43a7](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fefaae90398d38a1100ccd73b46ab55ff4610fba) | |
| parent | [f12c946ee778d173966fdd2e69ba57a768987bcb](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f12c946ee778d173966fdd2e69ba57a768987bcb) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fefaae90398d38a1100ccd73b46ab55ff4610fba&id2=f12c946ee778d173966fdd2e69ba57a768987bcb)) | |
| download | [linux-fefaae90398d38a1100ccd73b46ab55ff4610fba.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-fefaae90398d38a1100ccd73b46ab55ff4610fba.tar.gz) | |

EDAC/igen6: Avoid segmentation fault on module unloadThe segmentation fault happens because:
During modprobe:
1. In igen6\_probe(), igen6\_pvt will be allocated with kzalloc()
2. In igen6\_register\_mci(), mci->pvt\_info will point to
&igen6\_pvt->imc[mc]
During rmmod:
1. In mci\_release() in edac\_mc.c, it will kfree(mci->pvt\_info)
2. In igen6\_remove(), it will kfree(igen6\_pvt);
Fix this issue by setting mci->pvt\_info to NULL to avoid the double
kfree.
Fixes: 10590a9d4f23 ("EDAC/igen6: Add EDAC driver for Intel client SoCs using IBECC")
Closes: https://bugzilla.kernel.org/show\_bug.cgi?id=219360
Signed-off-by: Orange Kao <orange@aiven.io>
Signed-off-by: Tony Luck <tony.luck@intel.com>
Link: [https://lore.kernel.org/r/20241104124237.124109-2-orange@aiven.io](https://lore.kernel.org/r/20241104124237.124109-2-orange%40aiven.io)
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fefaae90398d38a1100ccd73b46ab55ff4610fba)

| -rw-r--r-- | [drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/edac/igen6_edac.c?id=fefaae90398d38a1100ccd73b46ab55ff4610fba) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/edac/igen6\_edac.c b/drivers/edac/igen6\_edac.cindex 189a2fc29e74f5..07dacf8c10be3d 100644--- a/[drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/igen6_edac.c?id=f12c946ee778d173966fdd2e69ba57a768987bcb)+++ b/[drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/igen6_edac.c?id=fefaae90398d38a1100ccd73b46ab55ff4610fba)@@ -1245,6 +1245,7 @@ static int igen6\_register\_mci(int mc, u64 mchbar, struct pci\_dev \*pdev) imc->mci = mci; return 0; fail3:+ mci->pvt\_info = NULL; kfree(mci->ctl\_name); fail2: edac\_mc\_free(mci);@@ -1269,6 +1270,7 @@ static void igen6\_unregister\_mcis(void)  edac\_mc\_del\_mc(mci->pdev); kfree(mci->ctl\_name);+ mci->pvt\_info = NULL; edac\_mc\_free(mci); iounmap(imc->window); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:22:50 +0000



=== Content from git.kernel.org_bbcfafd9_20250114_192410.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=029ac07bb92d2f7502d47a4916f197a8445d83bf)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=029ac07bb92d2f7502d47a4916f197a8445d83bf)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=029ac07bb92d2f7502d47a4916f197a8445d83bf)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=029ac07bb92d2f7502d47a4916f197a8445d83bf)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Orange Kao <orange@aiven.io> | 2024-11-04 12:40:52 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:50:45 +0100 |
| commit | [029ac07bb92d2f7502d47a4916f197a8445d83bf](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=029ac07bb92d2f7502d47a4916f197a8445d83bf) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=029ac07bb92d2f7502d47a4916f197a8445d83bf)) | |
| tree | [74a041c1b49f03c1c05d5d3e5c232a5971a4e961](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=029ac07bb92d2f7502d47a4916f197a8445d83bf) | |
| parent | [d465ea267167d557c196d537549d1b1a58b0e9b2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d465ea267167d557c196d537549d1b1a58b0e9b2) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=029ac07bb92d2f7502d47a4916f197a8445d83bf&id2=d465ea267167d557c196d537549d1b1a58b0e9b2)) | |
| download | [linux-029ac07bb92d2f7502d47a4916f197a8445d83bf.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-029ac07bb92d2f7502d47a4916f197a8445d83bf.tar.gz) | |

EDAC/igen6: Avoid segmentation fault on module unload[ Upstream commit fefaae90398d38a1100ccd73b46ab55ff4610fba ]
The segmentation fault happens because:
During modprobe:
1. In igen6\_probe(), igen6\_pvt will be allocated with kzalloc()
2. In igen6\_register\_mci(), mci->pvt\_info will point to
&igen6\_pvt->imc[mc]
During rmmod:
1. In mci\_release() in edac\_mc.c, it will kfree(mci->pvt\_info)
2. In igen6\_remove(), it will kfree(igen6\_pvt);
Fix this issue by setting mci->pvt\_info to NULL to avoid the double
kfree.
Fixes: 10590a9d4f23 ("EDAC/igen6: Add EDAC driver for Intel client SoCs using IBECC")
Closes: https://bugzilla.kernel.org/show\_bug.cgi?id=219360
Signed-off-by: Orange Kao <orange@aiven.io>
Signed-off-by: Tony Luck <tony.luck@intel.com>
Link: [https://lore.kernel.org/r/20241104124237.124109-2-orange@aiven.io](https://lore.kernel.org/r/20241104124237.124109-2-orange%40aiven.io)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=029ac07bb92d2f7502d47a4916f197a8445d83bf)

| -rw-r--r-- | [drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/edac/igen6_edac.c?id=029ac07bb92d2f7502d47a4916f197a8445d83bf) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/edac/igen6\_edac.c b/drivers/edac/igen6\_edac.cindex 74c5aad1f6081a..0ab8642c4e55a4 100644--- a/[drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/igen6_edac.c?id=d465ea267167d557c196d537549d1b1a58b0e9b2)+++ b/[drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/igen6_edac.c?id=029ac07bb92d2f7502d47a4916f197a8445d83bf)@@ -1075,6 +1075,7 @@ static int igen6\_register\_mci(int mc, u64 mchbar, struct pci\_dev \*pdev) imc->mci = mci; return 0; fail3:+ mci->pvt\_info = NULL; kfree(mci->ctl\_name); fail2: edac\_mc\_free(mci);@@ -1099,6 +1100,7 @@ static void igen6\_unregister\_mcis(void)  edac\_mc\_del\_mc(mci->pdev); kfree(mci->ctl\_name);+ mci->pvt\_info = NULL; edac\_mc\_free(mci); iounmap(imc->window); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:22:48 +0000



=== Content from git.kernel.org_c359b7ac_20250114_192412.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e5c7052664b61f9e2f896702d20552707d0ef60a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e5c7052664b61f9e2f896702d20552707d0ef60a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e5c7052664b61f9e2f896702d20552707d0ef60a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e5c7052664b61f9e2f896702d20552707d0ef60a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Orange Kao <orange@aiven.io> | 2024-11-04 12:40:52 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 13:52:52 +0100 |
| commit | [e5c7052664b61f9e2f896702d20552707d0ef60a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e5c7052664b61f9e2f896702d20552707d0ef60a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e5c7052664b61f9e2f896702d20552707d0ef60a)) | |
| tree | [f7b624f3c392d0f392449d23d89c1740830dfbad](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e5c7052664b61f9e2f896702d20552707d0ef60a) | |
| parent | [37ea0b2707281db4bff1a92b6cb73eb3f50bdd70](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=37ea0b2707281db4bff1a92b6cb73eb3f50bdd70) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e5c7052664b61f9e2f896702d20552707d0ef60a&id2=37ea0b2707281db4bff1a92b6cb73eb3f50bdd70)) | |
| download | [linux-e5c7052664b61f9e2f896702d20552707d0ef60a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e5c7052664b61f9e2f896702d20552707d0ef60a.tar.gz) | |

EDAC/igen6: Avoid segmentation fault on module unload[ Upstream commit fefaae90398d38a1100ccd73b46ab55ff4610fba ]
The segmentation fault happens because:
During modprobe:
1. In igen6\_probe(), igen6\_pvt will be allocated with kzalloc()
2. In igen6\_register\_mci(), mci->pvt\_info will point to
&igen6\_pvt->imc[mc]
During rmmod:
1. In mci\_release() in edac\_mc.c, it will kfree(mci->pvt\_info)
2. In igen6\_remove(), it will kfree(igen6\_pvt);
Fix this issue by setting mci->pvt\_info to NULL to avoid the double
kfree.
Fixes: 10590a9d4f23 ("EDAC/igen6: Add EDAC driver for Intel client SoCs using IBECC")
Closes: https://bugzilla.kernel.org/show\_bug.cgi?id=219360
Signed-off-by: Orange Kao <orange@aiven.io>
Signed-off-by: Tony Luck <tony.luck@intel.com>
Link: [https://lore.kernel.org/r/20241104124237.124109-2-orange@aiven.io](https://lore.kernel.org/r/20241104124237.124109-2-orange%40aiven.io)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e5c7052664b61f9e2f896702d20552707d0ef60a)

| -rw-r--r-- | [drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/edac/igen6_edac.c?id=e5c7052664b61f9e2f896702d20552707d0ef60a) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/edac/igen6\_edac.c b/drivers/edac/igen6\_edac.cindex 189a2fc29e74f5..07dacf8c10be3d 100644--- a/[drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/igen6_edac.c?id=37ea0b2707281db4bff1a92b6cb73eb3f50bdd70)+++ b/[drivers/edac/igen6\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/igen6_edac.c?id=e5c7052664b61f9e2f896702d20552707d0ef60a)@@ -1245,6 +1245,7 @@ static int igen6\_register\_mci(int mc, u64 mchbar, struct pci\_dev \*pdev) imc->mci = mci; return 0; fail3:+ mci->pvt\_info = NULL; kfree(mci->ctl\_name); fail2: edac\_mc\_free(mci);@@ -1269,6 +1270,7 @@ static void igen6\_unregister\_mcis(void)  edac\_mc\_del\_mc(mci->pdev); kfree(mci->ctl\_name);+ mci->pvt\_info = NULL; edac\_mc\_free(mci); iounmap(imc->window); } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:22:50 +0000


