=== Content from git.kernel.org_8137c9c1_20250114_205620.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e47cb9d2533200d49dd5364d4a148119492f8a3d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e47cb9d2533200d49dd5364d4a148119492f8a3d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e47cb9d2533200d49dd5364d4a148119492f8a3d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e47cb9d2533200d49dd5364d4a148119492f8a3d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Srinivasan Shanmugam <srinivasan.shanmugam@amd.com> | 2024-10-01 12:26:46 +0530 |
| --- | --- | --- |
| committer | Alex Deucher <alexander.deucher@amd.com> | 2024-10-01 17:44:47 -0400 |
| commit | [e47cb9d2533200d49dd5364d4a148119492f8a3d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e47cb9d2533200d49dd5364d4a148119492f8a3d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e47cb9d2533200d49dd5364d4a148119492f8a3d)) | |
| tree | [c52c1b295ab1a2b6beeceec136154f092a881b8c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e47cb9d2533200d49dd5364d4a148119492f8a3d) | |
| parent | [9d5ee7ce88acc7f9d5843ba7916d4b421af5c921](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9d5ee7ce88acc7f9d5843ba7916d4b421af5c921) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e47cb9d2533200d49dd5364d4a148119492f8a3d&id2=9d5ee7ce88acc7f9d5843ba7916d4b421af5c921)) | |
| download | [linux-e47cb9d2533200d49dd5364d4a148119492f8a3d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e47cb9d2533200d49dd5364d4a148119492f8a3d.tar.gz) | |

drm/amdgpu/gfx9: Add Cleaner Shader Deinitialization in gfx\_v9\_0 ModuleThis commit addresses an omission in the previous patch related to the
cleaner shader support for GFX9 hardware. Specifically, it adds the
necessary deinitialization code for the cleaner shader in the
gfx\_v9\_0\_sw\_fini function.
The added line amdgpu\_gfx\_cleaner\_shader\_sw\_fini(adev); ensures that any
allocated resources for the cleaner shader are freed correctly, avoiding
potential memory leaks and ensuring that the GPU state is clean for the
next initialization sequence.
Cc: Christian König <christian.koenig@amd.com>
Cc: Alex Deucher <alexander.deucher@amd.com>
Fixes: c2e70d307f44 ("drm/amdgpu/gfx9: Implement cleaner shader support for GFX9 hardware")
Signed-off-by: Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>
Acked-by: Christian König <christian.koenig@amd.com>
Acked-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e47cb9d2533200d49dd5364d4a148119492f8a3d)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/gfx\_v9\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c?id=e47cb9d2533200d49dd5364d4a148119492f8a3d) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/gfx\_v9\_0.c b/drivers/gpu/drm/amd/amdgpu/gfx\_v9\_0.cindex d7ef05cdb72e6c..1deb5eee794fe7 100644--- a/[drivers/gpu/drm/amd/amdgpu/gfx\_v9\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c?id=9d5ee7ce88acc7f9d5843ba7916d4b421af5c921)+++ b/[drivers/gpu/drm/amd/amdgpu/gfx\_v9\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c?id=e47cb9d2533200d49dd5364d4a148119492f8a3d)@@ -2418,6 +2418,8 @@ static int gfx\_v9\_0\_sw\_fini(struct amdgpu\_ip\_block \*ip\_block) amdgpu\_gfx\_kiq\_free\_ring(&adev->gfx.kiq[0].ring); amdgpu\_gfx\_kiq\_fini(adev, 0); + amdgpu\_gfx\_cleaner\_shader\_sw\_fini(adev);+ gfx\_v9\_0\_mec\_fini(adev); amdgpu\_bo\_free\_kernel(&adev->gfx.rlc.clear\_state\_obj, &adev->gfx.rlc.clear\_state\_gpu\_addr, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:54:56 +0000



=== Content from git.kernel.org_a6b2442d_20250114_205618.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=720c0376b3d29cbab921a60062fda5980742ed9d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=720c0376b3d29cbab921a60062fda5980742ed9d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=720c0376b3d29cbab921a60062fda5980742ed9d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=720c0376b3d29cbab921a60062fda5980742ed9d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Srinivasan Shanmugam <srinivasan.shanmugam@amd.com> | 2024-10-01 12:26:46 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 14:01:40 +0100 |
| commit | [720c0376b3d29cbab921a60062fda5980742ed9d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=720c0376b3d29cbab921a60062fda5980742ed9d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=720c0376b3d29cbab921a60062fda5980742ed9d)) | |
| tree | [bd114749acf8b3e73b4665e20cf677c83ed6a671](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=720c0376b3d29cbab921a60062fda5980742ed9d) | |
| parent | [b14bf849001e574d11c63674cc8d2e547fcdb548](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b14bf849001e574d11c63674cc8d2e547fcdb548) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=720c0376b3d29cbab921a60062fda5980742ed9d&id2=b14bf849001e574d11c63674cc8d2e547fcdb548)) | |
| download | [linux-720c0376b3d29cbab921a60062fda5980742ed9d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-720c0376b3d29cbab921a60062fda5980742ed9d.tar.gz) | |

drm/amdgpu/gfx9: Add Cleaner Shader Deinitialization in gfx\_v9\_0 Module[ Upstream commit e47cb9d2533200d49dd5364d4a148119492f8a3d ]
This commit addresses an omission in the previous patch related to the
cleaner shader support for GFX9 hardware. Specifically, it adds the
necessary deinitialization code for the cleaner shader in the
gfx\_v9\_0\_sw\_fini function.
The added line amdgpu\_gfx\_cleaner\_shader\_sw\_fini(adev); ensures that any
allocated resources for the cleaner shader are freed correctly, avoiding
potential memory leaks and ensuring that the GPU state is clean for the
next initialization sequence.
Cc: Christian König <christian.koenig@amd.com>
Cc: Alex Deucher <alexander.deucher@amd.com>
Fixes: c2e70d307f44 ("drm/amdgpu/gfx9: Implement cleaner shader support for GFX9 hardware")
Signed-off-by: Srinivasan Shanmugam <srinivasan.shanmugam@amd.com>
Acked-by: Christian König <christian.koenig@amd.com>
Acked-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=720c0376b3d29cbab921a60062fda5980742ed9d)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/gfx\_v9\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c?id=720c0376b3d29cbab921a60062fda5980742ed9d) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/gfx\_v9\_0.c b/drivers/gpu/drm/amd/amdgpu/gfx\_v9\_0.cindex 23f0573ae47b33..785a343a95f0ff 100644--- a/[drivers/gpu/drm/amd/amdgpu/gfx\_v9\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c?id=b14bf849001e574d11c63674cc8d2e547fcdb548)+++ b/[drivers/gpu/drm/amd/amdgpu/gfx\_v9\_0.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c?id=720c0376b3d29cbab921a60062fda5980742ed9d)@@ -2418,6 +2418,8 @@ static int gfx\_v9\_0\_sw\_fini(void \*handle) amdgpu\_gfx\_kiq\_free\_ring(&adev->gfx.kiq[0].ring); amdgpu\_gfx\_kiq\_fini(adev, 0); + amdgpu\_gfx\_cleaner\_shader\_sw\_fini(adev);+ gfx\_v9\_0\_mec\_fini(adev); amdgpu\_bo\_free\_kernel(&adev->gfx.rlc.clear\_state\_obj, &adev->gfx.rlc.clear\_state\_gpu\_addr, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:54:55 +0000


