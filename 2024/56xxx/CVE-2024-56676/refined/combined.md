=== Content from git.kernel.org_ddc6cfb4_20250114_191421.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=526c132124a62be486bad1701f7e8e92212ccec6)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=526c132124a62be486bad1701f7e8e92212ccec6)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=526c132124a62be486bad1701f7e8e92212ccec6)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=526c132124a62be486bad1701f7e8e92212ccec6)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Rafael J. Wysocki <rafael.j.wysocki@intel.com> | 2024-11-14 17:25:09 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 14:01:20 +0100 |
| commit | [526c132124a62be486bad1701f7e8e92212ccec6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=526c132124a62be486bad1701f7e8e92212ccec6) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=526c132124a62be486bad1701f7e8e92212ccec6)) | |
| tree | [2e040b90f0efa5253f127086fc23a6195ef7b206](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=526c132124a62be486bad1701f7e8e92212ccec6) | |
| parent | [6bb065a874bac74e90047c240ed2d381d70f2d5b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6bb065a874bac74e90047c240ed2d381d70f2d5b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=526c132124a62be486bad1701f7e8e92212ccec6&id2=6bb065a874bac74e90047c240ed2d381d70f2d5b)) | |
| download | [linux-526c132124a62be486bad1701f7e8e92212ccec6.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-526c132124a62be486bad1701f7e8e92212ccec6.tar.gz) | |

thermal: testing: Initialize some variables annoteded with \_free()[ Upstream commit 0104dcdaad3a7afd141e79a5fb817a92ada910ac ]
Variables annotated with \_\_free() need to be initialized if the function
can return before they get updated for the first time or the attempt to
free the memory pointed to by them upon function return may crash the
kernel.
Fix this issue in some places in the thermal testing code.
Fixes: f6a034f2df42 ("thermal: Introduce a debugfs-based testing facility")
Reported-by: Dan Carpenter <dan.carpenter@linaro.org>
Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
Link: [https://patch.msgid.link/12576267.O9o76ZdvQC@rjwysocki.net](https://patch.msgid.link/12576267.O9o76ZdvQC%40rjwysocki.net)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=526c132124a62be486bad1701f7e8e92212ccec6)

| -rw-r--r-- | [drivers/thermal/testing/zone.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/thermal/testing/zone.c?id=526c132124a62be486bad1701f7e8e92212ccec6) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/thermal/testing/zone.c b/drivers/thermal/testing/zone.cindex 452c3fa2b2bc5b..1f01f495270313 100644--- a/[drivers/thermal/testing/zone.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/testing/zone.c?id=6bb065a874bac74e90047c240ed2d381d70f2d5b)+++ b/[drivers/thermal/testing/zone.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/testing/zone.c?id=526c132124a62be486bad1701f7e8e92212ccec6)@@ -185,7 +185,7 @@ static void tt\_add\_tz\_work\_fn(struct work\_struct \*work) int tt\_add\_tz(void) { struct tt\_thermal\_zone \*tt\_zone \_\_free(kfree);- struct tt\_work \*tt\_work \_\_free(kfree);+ struct tt\_work \*tt\_work \_\_free(kfree) = NULL; int ret;  tt\_zone = kzalloc(sizeof(\*tt\_zone), GFP\_KERNEL);@@ -237,7 +237,7 @@ static void tt\_zone\_unregister\_tz(struct tt\_thermal\_zone \*tt\_zone)  int tt\_del\_tz(const char \*arg) {- struct tt\_work \*tt\_work \_\_free(kfree);+ struct tt\_work \*tt\_work \_\_free(kfree) = NULL; struct tt\_thermal\_zone \*tt\_zone, \*aux; int ret; int id;@@ -336,8 +336,8 @@ static void tt\_zone\_add\_trip\_work\_fn(struct work\_struct \*work) int tt\_zone\_add\_trip(const char \*arg) { struct tt\_thermal\_zone \*tt\_zone \_\_free(put\_tt\_zone) = NULL;+ struct tt\_trip \*tt\_trip \_\_free(kfree) = NULL; struct tt\_work \*tt\_work \_\_free(kfree);- struct tt\_trip \*tt\_trip \_\_free(kfree); int id;  tt\_work = kzalloc(sizeof(\*tt\_work), GFP\_KERNEL);@@ -392,7 +392,7 @@ static struct thermal\_zone\_device\_ops tt\_zone\_ops = {  static int tt\_zone\_register\_tz(struct tt\_thermal\_zone \*tt\_zone) {- struct thermal\_trip \*trips \_\_free(kfree);+ struct thermal\_trip \*trips \_\_free(kfree) = NULL; struct thermal\_zone\_device \*tz; struct tt\_trip \*tt\_trip; int i; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:12:58 +0000



=== Content from git.kernel.org_69c874c2_20250114_191420.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0104dcdaad3a7afd141e79a5fb817a92ada910ac)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0104dcdaad3a7afd141e79a5fb817a92ada910ac)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0104dcdaad3a7afd141e79a5fb817a92ada910ac)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0104dcdaad3a7afd141e79a5fb817a92ada910ac)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Rafael J. Wysocki <rafael.j.wysocki@intel.com> | 2024-11-14 17:25:09 +0100 |
| --- | --- | --- |
| committer | Rafael J. Wysocki <rafael.j.wysocki@intel.com> | 2024-11-14 17:40:47 +0100 |
| commit | [0104dcdaad3a7afd141e79a5fb817a92ada910ac](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0104dcdaad3a7afd141e79a5fb817a92ada910ac) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0104dcdaad3a7afd141e79a5fb817a92ada910ac)) | |
| tree | [5bda6e27c82bb79d1fc3633788c0d6617f271c80](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0104dcdaad3a7afd141e79a5fb817a92ada910ac) | |
| parent | [1c426fd09ca85fb77f120f7933e39eb9df99a39a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1c426fd09ca85fb77f120f7933e39eb9df99a39a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0104dcdaad3a7afd141e79a5fb817a92ada910ac&id2=1c426fd09ca85fb77f120f7933e39eb9df99a39a)) | |
| download | [linux-0104dcdaad3a7afd141e79a5fb817a92ada910ac.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0104dcdaad3a7afd141e79a5fb817a92ada910ac.tar.gz) | |

thermal: testing: Initialize some variables annoteded with \_free()Variables annotated with \_\_free() need to be initialized if the function
can return before they get updated for the first time or the attempt to
free the memory pointed to by them upon function return may crash the
kernel.
Fix this issue in some places in the thermal testing code.
Fixes: f6a034f2df42 ("thermal: Introduce a debugfs-based testing facility")
Reported-by: Dan Carpenter <dan.carpenter@linaro.org>
Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
Link: [https://patch.msgid.link/12576267.O9o76ZdvQC@rjwysocki.net](https://patch.msgid.link/12576267.O9o76ZdvQC%40rjwysocki.net)
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0104dcdaad3a7afd141e79a5fb817a92ada910ac)

| -rw-r--r-- | [drivers/thermal/testing/zone.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/thermal/testing/zone.c?id=0104dcdaad3a7afd141e79a5fb817a92ada910ac) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/thermal/testing/zone.c b/drivers/thermal/testing/zone.cindex 2619d3df5bd9d7..1f4e450100e2f1 100644--- a/[drivers/thermal/testing/zone.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/testing/zone.c?id=1c426fd09ca85fb77f120f7933e39eb9df99a39a)+++ b/[drivers/thermal/testing/zone.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/thermal/testing/zone.c?id=0104dcdaad3a7afd141e79a5fb817a92ada910ac)@@ -185,7 +185,7 @@ static void tt\_add\_tz\_work\_fn(struct work\_struct \*work) int tt\_add\_tz(void) { struct tt\_thermal\_zone \*tt\_zone \_\_free(kfree);- struct tt\_work \*tt\_work \_\_free(kfree);+ struct tt\_work \*tt\_work \_\_free(kfree) = NULL; int ret;  tt\_zone = kzalloc(sizeof(\*tt\_zone), GFP\_KERNEL);@@ -237,7 +237,7 @@ static void tt\_zone\_unregister\_tz(struct tt\_thermal\_zone \*tt\_zone)  int tt\_del\_tz(const char \*arg) {- struct tt\_work \*tt\_work \_\_free(kfree);+ struct tt\_work \*tt\_work \_\_free(kfree) = NULL; struct tt\_thermal\_zone \*tt\_zone, \*aux; int ret; int id;@@ -331,8 +331,8 @@ static void tt\_zone\_add\_trip\_work\_fn(struct work\_struct \*work) int tt\_zone\_add\_trip(const char \*arg) { struct tt\_thermal\_zone \*tt\_zone \_\_free(put\_tt\_zone) = NULL;+ struct tt\_trip \*tt\_trip \_\_free(kfree) = NULL; struct tt\_work \*tt\_work \_\_free(kfree);- struct tt\_trip \*tt\_trip \_\_free(kfree); int id;  tt\_work = kzalloc(sizeof(\*tt\_work), GFP\_KERNEL);@@ -387,7 +387,7 @@ static struct thermal\_zone\_device\_ops tt\_zone\_ops = {  static int tt\_zone\_register\_tz(struct tt\_thermal\_zone \*tt\_zone) {- struct thermal\_trip \*trips \_\_free(kfree);+ struct thermal\_trip \*trips \_\_free(kfree) = NULL; struct thermal\_zone\_device \*tz; struct tt\_trip \*tt\_trip; int i; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:12:57 +0000


