=== Content from github.com_a607c53b_20250115_094720.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkarmada-io%2Fkarmada%2Fsecurity%2Fadvisories%2FGHSA-mg7w-c9x2-xh7r)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkarmada-io%2Fkarmada%2Fsecurity%2Fadvisories%2FGHSA-mg7w-c9x2-xh7r)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=karmada-io%2Fkarmada)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[karmada-io](/karmada-io)
/
**[karmada](/karmada-io/karmada)**
Public

* [Notifications](/login?return_to=%2Fkarmada-io%2Fkarmada) You must be signed in to change notification settings
* [Fork
  907](/login?return_to=%2Fkarmada-io%2Fkarmada)
* [Star
   4.6k](/login?return_to=%2Fkarmada-io%2Fkarmada)

* [Code](/karmada-io/karmada)
* [Issues
  410](/karmada-io/karmada/issues)
* [Pull requests
  188](/karmada-io/karmada/pulls)
* [Discussions](/karmada-io/karmada/discussions)
* [Actions](/karmada-io/karmada/actions)
* [Projects
  10](/karmada-io/karmada/projects)
* [Security](/karmada-io/karmada/security)
* [Insights](/karmada-io/karmada/pulse)

Additional navigation options

* [Code](/karmada-io/karmada)
* [Issues](/karmada-io/karmada/issues)
* [Pull requests](/karmada-io/karmada/pulls)
* [Discussions](/karmada-io/karmada/discussions)
* [Actions](/karmada-io/karmada/actions)
* [Projects](/karmada-io/karmada/projects)
* [Security](/karmada-io/karmada/security)
* [Insights](/karmada-io/karmada/pulse)

# PULL Mode Cluster Privilege Escalation

High

[RainbowMango](/RainbowMango)
published
GHSA-mg7w-c9x2-xh7r
Jan 3, 2025

## Package

gomod

karmadactl
([Go](/advisories?query=ecosystem%3Ago))

## Affected versions

<1.12.0

## Patched versions

1.12.0

## Description

### Impact

*What kind of vulnerability is it? Who is impacted?*

The [PULL](https://karmada.io/docs/next/userguide/clustermanager/cluster-registration#pull-mode) mode clusters registered with the `karmadactl register` command have excessive privileges to access control plane resources. By abusing these permissions, an attacker able to authenticate as the karmada-agent to a karmada cluster would be able to obtain administrative privileges over the entire federation system including all registered member clusters.

### Patches

*Has the problem been patched? What versions should users upgrade to?*

Since Karmada v1.12.0, command `karmadactl register` restricts the access permissions of pull mode member clusters to control plane resources. This way, an attacker able to authenticate as the karmada-agent cannot control other member clusters in Karmada.

### Workarounds

*Is there a way for users to fix or remediate the vulnerability without upgrading?*

Restricts the access permissions of pull mode member clusters to control plane resources according to [Karmada Component Permissions Docs](https://karmada.io/docs/administrator/security/component-permission).

### References

*Are there any links users can visit to find out more?*

1. Enhancements made from the Karmada community: [#5793](https://github.com/karmada-io/karmada/pull/5793)
2. Karmada Component Permissions: <https://karmada.io/docs/administrator/security/component-permission>

### Severity

High

### CVE ID

CVE-2024-56513

### Weaknesses

No CWEs

### Credits

* [![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&v=4)](/zhzhuang-zju)
  [zhzhuang-zju](/zhzhuang-zju)
  Remediation developer
* [![@RainbowMango](https://avatars.githubusercontent.com/u/8268873?s=40&v=4)](/RainbowMango)
  [RainbowMango](/RainbowMango)
  Remediation reviewer
* [![@suidpit](https://avatars.githubusercontent.com/u/25264901?s=40&v=4)](/suidpit)
  [suidpit](/suidpit)
  Reporter
* [![@TheZ3ro](https://avatars.githubusercontent.com/u/686894?s=40&v=4)](/TheZ3ro)
  [TheZ3ro](/TheZ3ro)
  Remediation verifier

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_f90a95f8_20250115_094719.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkarmada-io%2Fkarmada%2Fpull%2F5793)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkarmada-io%2Fkarmada%2Fpull%2F5793)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=karmada-io%2Fkarmada)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[karmada-io](/karmada-io)
/
**[karmada](/karmada-io/karmada)**
Public

* [Notifications](/login?return_to=%2Fkarmada-io%2Fkarmada) You must be signed in to change notification settings
* [Fork
  907](/login?return_to=%2Fkarmada-io%2Fkarmada)
* [Star
   4.6k](/login?return_to=%2Fkarmada-io%2Fkarmada)

* [Code](/karmada-io/karmada)
* [Issues
  410](/karmada-io/karmada/issues)
* [Pull requests
  188](/karmada-io/karmada/pulls)
* [Discussions](/karmada-io/karmada/discussions)
* [Actions](/karmada-io/karmada/actions)
* [Projects
  10](/karmada-io/karmada/projects)
* [Security](/karmada-io/karmada/security)
* [Insights](/karmada-io/karmada/pulse)

Additional navigation options

* [Code](/karmada-io/karmada)
* [Issues](/karmada-io/karmada/issues)
* [Pull requests](/karmada-io/karmada/pulls)
* [Discussions](/karmada-io/karmada/discussions)
* [Actions](/karmada-io/karmada/actions)
* [Projects](/karmada-io/karmada/projects)
* [Security](/karmada-io/karmada/security)
* [Insights](/karmada-io/karmada/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fkarmada-io%2Fkarmada%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fkarmada-io%2Fkarmada%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# minimize the RBAC permissions for the pull mode cluster #5793

 Merged

[karmada-bot](/karmada-bot)
merged 1 commit into
[karmada-io:master](/karmada-io/karmada/tree/master "karmada-io/karmada:master")
from
[zhzhuang-zju:register](/zhzhuang-zju/karmada/tree/register "zhzhuang-zju/karmada:register")

Nov 20, 2024

 Merged

# [minimize the RBAC permissions for the pull mode cluster](#top) #5793

[karmada-bot](/karmada-bot)
merged 1 commit into
[karmada-io:master](/karmada-io/karmada/tree/master "karmada-io/karmada:master")
from
[zhzhuang-zju:register](/zhzhuang-zju/karmada/tree/register "zhzhuang-zju/karmada:register")

Nov 20, 2024

+722

−496

[Conversation
19](/karmada-io/karmada/pull/5793)
[Commits
1](/karmada-io/karmada/pull/5793/commits)
[Checks
18](/karmada-io/karmada/pull/5793/checks)
[Files changed
11](/karmada-io/karmada/pull/5793/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=60&v=4)](/zhzhuang-zju)

Copy link

Contributor

### @zhzhuang-zju **[zhzhuang-zju](/zhzhuang-zju)** commented [Nov 7, 2024](#issue-2640768935) • edited Loading

**What type of PR is this?**

/kind feature

**What this PR does / why we need it**:

[![image](https://private-user-images.githubusercontent.com/81208264/383940477-686645e8-bf0e-47d8-80c0-8f9f94819617.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY5MzQ3MzYsIm5iZiI6MTczNjkzNDQzNiwicGF0aCI6Ii84MTIwODI2NC8zODM5NDA0NzctNjg2NjQ1ZTgtYmYwZS00N2Q4LTgwYzAtOGY5Zjk0ODE5NjE3LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTUlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTE1VDA5NDcxNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWZiYmM1YWU0OWFiYjQyMDJlMjkwYzAwOTgzY2UyZGQyNGJjN2NlZWE3OWM2MGUzNDRmMGViNTAxMDIzOTgxZDkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.z9gsxCAdGNrNnm2eN_yPCDPDYfUOvJe4DYOrXljPrpE)](https://private-user-images.githubusercontent.com/81208264/383940477-686645e8-bf0e-47d8-80c0-8f9f94819617.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY5MzQ3MzYsIm5iZiI6MTczNjkzNDQzNiwicGF0aCI6Ii84MTIwODI2NC8zODM5NDA0NzctNjg2NjQ1ZTgtYmYwZS00N2Q4LTgwYzAtOGY5Zjk0ODE5NjE3LnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTUlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTE1VDA5NDcxNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWZiYmM1YWU0OWFiYjQyMDJlMjkwYzAwOTgzY2UyZGQyNGJjN2NlZWE3OWM2MGUzNDRmMGViNTAxMDIzOTgxZDkmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.z9gsxCAdGNrNnm2eN_yPCDPDYfUOvJe4DYOrXljPrpE)

Currently, pull-mode clusters interact with `karmada-apiserver` on the control plane via a mounted `karmada-kubeconfig`, where the certificate has Organization as `system:nodes` and CN as `system:node:{cluser_name}`, so karmada -agent has the RBAC permissions on the control plane of a user with Group as `system:nodes` and username as `system:node:{cluser_name}`.

Since the control plane binds the clusterrole to Group `system:nodes`, all karmada-agents actually have the same set of RBAC permissions.

The clusterrole bound to Group `system:nodes` has too many permissions, e.g. secret permissions, cluster permissions.

[![image](https://private-user-images.githubusercontent.com/81208264/383941986-71e93e5a-f0e9-4c04-a2d7-26bd1e208401.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY5MzQ3MzYsIm5iZiI6MTczNjkzNDQzNiwicGF0aCI6Ii84MTIwODI2NC8zODM5NDE5ODYtNzFlOTNlNWEtZjBlOS00YzA0LWEyZDctMjZiZDFlMjA4NDAxLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTUlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTE1VDA5NDcxNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWI5MmFmNzliYjI4N2VkNTdjNzBiZDExYWE4YTg1YjIyYWZhZTU5ODlkODkwNzI1OTcwZGZmZTRlMDdkYzIwNDAmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.jR4WRBREYpBll0kLYbh9e4ARmZXJ8PxVSqPq1MT6Lys)](https://private-user-images.githubusercontent.com/81208264/383941986-71e93e5a-f0e9-4c04-a2d7-26bd1e208401.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY5MzQ3MzYsIm5iZiI6MTczNjkzNDQzNiwicGF0aCI6Ii84MTIwODI2NC8zODM5NDE5ODYtNzFlOTNlNWEtZjBlOS00YzA0LWEyZDctMjZiZDFlMjA4NDAxLnBuZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTUlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTE1VDA5NDcxNlomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWI5MmFmNzliYjI4N2VkNTdjNzBiZDExYWE4YTg1YjIyYWZhZTU5ODlkODkwNzI1OTcwZGZmZTRlMDdkYzIwNDAmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.jR4WRBREYpBll0kLYbh9e4ARmZXJ8PxVSqPq1MT6Lys)

So in order to minimise RBAC permissions, each karmada-agent needs to be assigned separate RBAC permissions

Besides, in order to isolate the user group that `karmada-agent` uses to access the Karmada API Server from the `kubelet`, so that it is not interfered with by node authentication, the user group `system:nodes` used by `karmada-agent` is changed to `system:agents`, and the user `system :node:` to `system:agent:`.

**This PR contains the following two elements:**

* assign each `karmada-agent` separate RBAC permissions
* the user group `system:nodes` used by `karmada-agent` is changed to `system:agents`, and the user `system :node:` to `system:agent:`

**Installation methods involved:**

* local-up
* karmadactl init
* helm

**Which issue(s) this PR fixes**:

Fixes #

**Special notes for your reviewer**:

**Does this PR introduce a user-facing change?**:

```
`Security`: minimize the RBAC permissions for the pull mode cluster

```

Sorry, something went wrong.

All reactions

[![@karmada-bot](https://avatars.githubusercontent.com/u/76678816?s=40&u=fcd90b8b6679eaa786ceb69dd03ec72e6f11dd09&v=4)](/karmada-bot)
[karmada-bot](/karmada-bot)
added
the
[kind/feature](/karmada-io/karmada/labels/kind/feature)
Categorizes issue or PR as related to a new feature.
label
[Nov 7, 2024](#event-15179375627)

 [![@karmada-bot](https://avatars.githubusercontent.com/u/76678816?s=40&u=fcd90b8b6679eaa786ceb69dd03ec72e6f11dd09&v=4)](/karmada-bot)
[karmada-bot](/karmada-bot)
requested review from
[chaunceyjiang](/chaunceyjiang),
[whitewindmills](/whitewindmills) and
[XiShanYongYe-Chang](/XiShanYongYe-Chang)
[November 7, 2024 11:39](#event-15179376887)

[![@karmada-bot](https://avatars.githubusercontent.com/u/76678816?s=40&u=fcd90b8b6679eaa786ceb69dd03ec72e6f11dd09&v=4)](/karmada-bot)
[karmada-bot](/karmada-bot)
added
the
[size/XL](/karmada-io/karmada/labels/size/XL)
Denotes a PR that changes 500-999 lines, ignoring generated files.
label
[Nov 7, 2024](#event-15179378962)

 [![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)
[zhzhuang-zju](/zhzhuang-zju)
[force-pushed](/karmada-io/karmada/compare/f69f61d8dcf80ec5386377d5afa097434ad69391..2d45bc6894416bd261c90f3687b47d9a24d5bb60)
the
register

branch
from
[`f69f61d`](/karmada-io/karmada/commit/f69f61d8dcf80ec5386377d5afa097434ad69391) to
[`2d45bc6`](/karmada-io/karmada/commit/2d45bc6894416bd261c90f3687b47d9a24d5bb60)  [Compare](/karmada-io/karmada/compare/f69f61d8dcf80ec5386377d5afa097434ad69391..2d45bc6894416bd261c90f3687b47d9a24d5bb60)
[November 7, 2024 12:21](#event-15179983768)

[![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=80&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)

Copy link

Contributor

Author

### **[zhzhuang-zju](/zhzhuang-zju)** commented [Nov 7, 2024](#issuecomment-2462112411)

| Local validation：  ``` $ karmadactl register 172.18.0.6:32543 --token ak0bng.1mde96apjyi98dwz --discovery-token-ca-cert-hash sha256:c31ef70196f7b28545526c94a3c62ce74ad9c476971a818e16f49396f50b9430 --kubeconfig ~/.kube/member4.config --context member4  --karmada-agent-image docker.io/karmada/karmada-agent:latest --cluster-name member4 -v 4 I1107 20:23:59.964757 3098581 register.go:331] Registering cluster. cluster name: member4 I1107 20:23:59.964796 3098581 register.go:332] Registering cluster. cluster namespace: karmada-cluster [preflight] Running pre-flight checks I1107 20:23:59.964814 3098581 register.go:491] Validating the existence of file /etc/karmada/bootstrap-karmada-agent.conf I1107 20:23:59.964827 3098581 register.go:491] Validating the existence of file /etc/karmada/karmada-agent.conf I1107 20:23:59.964836 3098581 register.go:491] Validating the existence of file /etc/karmada/pki/ca.crt [preflight] All pre-flight checks were passed [karmada-agent-start] Waiting to perform the TLS Bootstrap I1107 20:23:59.976730 3098581 register.go:1155] [discovery] Created cluster-info discovery client, requesting info from "172.18.0.6:32543" I1107 20:23:59.988138 3098581 register.go:1193] [discovery] Requesting info from "172.18.0.6:32543" again to validate TLS against the pinned public key I1107 20:23:59.997904 3098581 register.go:1210] [discovery] Cluster info signature and contents are valid and TLS certificate validates against pinned roots, will use API Server "172.18.0.6:32543" I1107 20:23:59.997940 3098581 register.go:506] [discovery] Using provided TLSBootstrapToken as authentication credentials for the join process I1107 20:23:59.997958 3098581 register.go:517] [discovery] writing bootstrap karmada-agent config file at /etc/karmada/bootstrap-karmada-agent.conf I1107 20:23:59.998535 3098581 register.go:526] [discovery] writing CA certificate at /etc/karmada/pki/ca.crt I1107 20:24:00.461989 3098581 register.go:866] Waiting for the client certificate agent-rbac-generator-member4wcq4v to be issued I1107 20:24:01.465729 3098581 register.go:874] Signing certificate of csr agent-rbac-generator-member4wcq4v successfully [karmada-agent-start] Waiting to check cluster exists [karmada-agent-start] Assign the necessary RBAC permissions to the agent [karmada-agent-start] Waiting to construct karmada-agent kubeconfig I1107 20:24:03.665759 3098581 register.go:866] Waiting for the client certificate member4-nn9h2 to be issued I1107 20:24:04.669051 3098581 register.go:874] Signing certificate of csr member4-nn9h2 successfully I1107 20:24:04.669084 3098581 register.go:908] writing bootstrap karmada-agent config file at /etc/karmada/karmada-agent.conf [karmada-agent-start] Waiting the necessary secret and RBAC I1107 20:24:04.680320 3098581 idempotency.go:68] Secret karmada-system/karmada-kubeconfig has been created or updated. I1107 20:24:04.683534 3098581 idempotency.go:188] ClusterRole karmada-agent has been created or updated. I1107 20:24:04.691452 3098581 idempotency.go:212] ClusterRolebinding karmada-agent has been created or updated. [karmada-agent-start] Waiting karmada-agent Deployment  cluster(member4) is joined successfully  $ kubectl get cluster NAME      VERSION   MODE   READY   AGE member1   v1.31.0   Push   True    3d10h member2   v1.31.0   Push   True    6d6h member3   v1.31.0   Pull   True    32h member4   v1.31.0   Pull   True    34s  $ karmadactl apply -f samples/nginx/deployment.yaml --cluster member4 deployment.apps/nginx created propagationpolicy.policy.karmada.io/nginx-6d7f8d5f5b unchanged  $ kubectl --kubeconfig ~/.kube/member4.config get deployments.apps  NAME    READY   UP-TO-DATE   AVAILABLE   AGE nginx   2/2     2            2           11s  $ karmadactl unregister member4  --cluster-kubeconfig ~/.kube/member4.config -v=4                                                                            I1107 20:26:53.269394 3100053 unregister.go:186] Unregistering cluster. cluster name: member4 I1107 20:26:53.269597 3100053 unregister.go:187] Unregistering cluster. karmada-agent deployed in namespace: karmada-system I1107 20:26:53.269608 3100053 unregister.go:188] Unregistering cluster. member cluster secrets stored in namespace: karmada-cluster I1107 20:26:56.314363 3100053 cluster.go:64] Waiting for the cluster object member4 to be deleted I1107 20:26:57.317515 3100053 cluster.go:64] Waiting for the cluster object member4 to be deleted I1107 20:26:58.310547 3100053 cluster.go:64] Waiting for the cluster object member4 to be deleted I1107 20:26:59.310182 3100053 cluster.go:64] Waiting for the cluster object member4 to be deleted I1107 20:27:00.309665 3100053 cluster.go:64] Waiting for the cluster object member4 to be deleted I1107 20:27:01.314053 3100053 cluster.go:64] Waiting for the cluster object member4 to be deleted I1107 20:27:02.311988 3100053 cluster.go:64] Waiting for the cluster object member4 to be deleted I1107 20:27:03.309908 3100053 cluster.go:64] Waiting for the cluster object member4 to be deleted I1107 20:27:04.310080 3100053 cluster.go:64] Waiting for the cluster object member4 to be deleted I1107 20:27:05.309887 3100053 cluster.go:64] Waiting for the cluster object member4 to be deleted I1107 20:27:06.312824 3100053 unregister.go:333] Successfully delete cluster object (member4) from control plane. W1107 20:27:06.312863 3100053 unregister.go:342] The RBAC resources on the control plane need to be manually cleaned up, including the following resources: ClusterRole/system:karmada:member4:agent ClusterRoleBinding/system:karmada:member4:agent Role/karmada-cluster/system:karmada:member4:agent-secret Role/karmada-es-member4/system:karmada:member4:agent-work RoleBinding/karmada-cluster/system:karmada:member4:agent-secret RoleBinding/karmada-es-member4/system:karmada:member4:agent-work I1107 20:27:06.316944 3100053 unregister.go:366] Successfully delete resource ({ServiceAccount karmada-member4 karmada-cluster}) from member cluster (member4). I1107 20:27:06.320891 3100053 unregister.go:366] Successfully delete resource ({ClusterRole karmada-controller-manager:karmada-member4 }) from member cluster (member4). I1107 20:27:06.323882 3100053 unregister.go:366] Successfully delete resource ({ClusterRoleBinding karmada-controller-manager:karmada-member4 }) from member cluster (member4). I1107 20:27:06.325671 3100053 unregister.go:366] Successfully delete resource ({Secret karmada-member4 karmada-cluster}) from member cluster (member4). I1107 20:27:06.328792 3100053 unregister.go:366] Successfully delete resource ({ServiceAccount karmada-impersonator karmada-cluster}) from member cluster (member4). I1107 20:27:06.332187 3100053 unregister.go:366] Successfully delete resource ({Secret karmada-impersonator karmada-cluster}) from member cluster (member4). I1107 20:27:06.335267 3100053 unregister.go:366] Successfully delete resource ({Namespace karmada-cluster }) from member cluster (member4). I1107 20:27:06.339246 3100053 unregister.go:366] Successfully delete resource ({Deployment karmada-agent karmada-system}) from member cluster (member4). I1107 20:27:06.342516 3100053 unregister.go:366] Successfully delete resource ({ServiceAccount karmada-agent-sa karmada-system}) from member cluster (member4). I1107 20:27:06.346048 3100053 unregister.go:366] Successfully delete resource ({ClusterRole karmada-agent }) from member cluster (member4). I1107 20:27:06.350296 3100053 unregister.go:366] Successfully delete resource ({ClusterRoleBinding karmada-agent }) from member cluster (member4). I1107 20:27:06.354519 3100053 unregister.go:366] Successfully delete resource ({Secret karmada-kubeconfig karmada-system}) from member cluster (member4). I1107 20:27:06.354622 3100053 unregister.go:382] Successfully delete local file (/etc/karmada/karmada-agent.conf) in current node. I1107 20:27:06.354666 3100053 unregister.go:382] Successfully delete local file (/etc/karmada/pki/ca.crt) in current node. ``` |
| --- |

All reactions

Sorry, something went wrong.

 [![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)
[zhzhuang-zju](/zhzhuang-zju)
[force-pushed](/karmada-io/karmada/compare/afd687adf37102e2f0b93afc897b7712ff28e6e1..5f781cd8f474fcadecc284f6b121e26ea65174d8)
the
register

branch
2 times, most recently
from
[`afd687a`](/karmada-io/karmada/commit/afd687adf37102e2f0b93afc897b7712ff28e6e1) to
[`5f781cd`](/karmada-io/karmada/commit/5f781cd8f474fcadecc284f6b121e26ea65174d8)  [Compare](/karmada-io/karmada/compare/afd687adf37102e2f0b93afc897b7712ff28e6e1..5f781cd8f474fcadecc284f6b121e26ea65174d8)
[November 8, 2024 02:51](#event-15201242398)

[![@codecov-commenter](https://avatars.githubusercontent.com/u/65553080?s=80&u=b7ee84d82e25b493051d810390e97b15f716d7ef&v=4)](/codecov-commenter)

Copy link

### **[codecov-commenter](/codecov-commenter)** commented [Nov 8, 2024](#issuecomment-2463666594) • edited Loading

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| ⚠️ Please install the ['codecov app svg image'](https://private-user-images.githubusercontent.com/152432831/340411587-e90313f4-9d3a-4b63-8b54-cfe14e7ec20d.svg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY5MzQ3MzcsIm5iZiI6MTczNjkzNDQzNywicGF0aCI6Ii8xNTI0MzI4MzEvMzQwNDExNTg3LWU5MDMxM2Y0LTlkM2EtNGI2My04YjU0LWNmZTE0ZTdlYzIwZC5zdmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTE1JTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDExNVQwOTQ3MTdaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT1mODRiZDlhZTllMTMxOWVhOWFjMDZkNjExMTIxZWMxMjRlNWYwNjg3MDFjYWEzZWVkNWIwMGQ3MjE1OGI2MWFjJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.CaqA_lb9_yPA6Oo2KhyTg_K2GzFKBka1wBB9WlCesuA) to ensure uploads and comments are reliably processed by Codecov. [Codecov](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?dropdown=coverage&src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io) Report Attention: Patch coverage is `58.79518%` with `171 lines` in your changes missing coverage. Please review.  Project coverage is 46.10%. Comparing base [(`6795dba`)](https://app.codecov.io/gh/karmada-io/karmada/commit/6795dba9d1dacfd035243c368da2fdf9485eadbc?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io) to head [(`ae161fd`)](https://app.codecov.io/gh/karmada-io/karmada/commit/ae161fd88c38c041b68799e6ced2bf6b41e110b0?dropdown=coverage&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io).   | [Files with missing lines](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?dropdown=coverage&src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io) | Patch % | Lines | | --- | --- | --- | | [pkg/karmadactl/register/register.go](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?src=pr&el=tree&filepath=pkg%2Fkarmadactl%2Fregister%2Fregister.go&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io#diff-cGtnL2thcm1hZGFjdGwvcmVnaXN0ZXIvcmVnaXN0ZXIuZ28=) | 65.16% | [108 Missing ⚠️](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io) | | [pkg/util/rbac.go](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?src=pr&el=tree&filepath=pkg%2Futil%2Frbac.go&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io#diff-cGtnL3V0aWwvcmJhYy5nbw==) | 0.00% | [28 Missing ⚠️](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io) | | [pkg/karmadactl/util/work.go](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?src=pr&el=tree&filepath=pkg%2Fkarmadactl%2Futil%2Fwork.go&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io#diff-cGtnL2thcm1hZGFjdGwvdXRpbC93b3JrLmdv) | 0.00% | [18 Missing ⚠️](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io) | | [pkg/karmadactl/unregister/unregister.go](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?src=pr&el=tree&filepath=pkg%2Fkarmadactl%2Funregister%2Funregister.go&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io#diff-cGtnL2thcm1hZGFjdGwvdW5yZWdpc3Rlci91bnJlZ2lzdGVyLmdv) | 61.53% | [8 Missing and 2 partials ⚠️](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io) | | [...dactl/cmdinit/bootstraptoken/agent/tlsbootstrap.go](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?src=pr&el=tree&filepath=pkg%2Fkarmadactl%2Fcmdinit%2Fbootstraptoken%2Fagent%2Ftlsbootstrap.go&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io#diff-cGtnL2thcm1hZGFjdGwvY21kaW5pdC9ib290c3RyYXB0b2tlbi9hZ2VudC90bHNib290c3RyYXAuZ28=) | 73.91% | [4 Missing and 2 partials ⚠️](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io) | | [pkg/karmadactl/cmdinit/karmada/deploy.go](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?src=pr&el=tree&filepath=pkg%2Fkarmadactl%2Fcmdinit%2Fkarmada%2Fdeploy.go&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io#diff-cGtnL2thcm1hZGFjdGwvY21kaW5pdC9rYXJtYWRhL2RlcGxveS5nbw==) | 0.00% | [1 Missing ⚠️](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io) |   ❗ Your organization needs to install the [Codecov GitHub app](https://github.com/apps/codecov/installations/select_target) to enable full functionality. Additional details and impacted files ``` @@            Coverage Diff             @@ ##           master    #5793      +/-   ## ========================================== + Coverage   46.02%   46.10%   +0.08%      ==========================================   Files         660      661       +1        Lines       53987    54307     +320      ========================================== + Hits        24848    25040     +192      - Misses      27521    27644     +123      - Partials     1618     1623       +5      ```  | [Flag](https://app.codecov.io/gh/karmada-io/karmada/pull/5793/flags?src=pr&el=flags&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io) | Coverage Δ |  | | --- | --- | --- | | [unittests](https://app.codecov.io/gh/karmada-io/karmada/pull/5793/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io) | `46.10% <58.79%> (+0.08%)` | ⬆️ |   Flags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io#carryforward-flags-in-the-pull-request-comment) to find out more.  [☔ View full report in Codecov by Sentry](https://app.codecov.io/gh/karmada-io/karmada/pull/5793?dropdown=coverage&src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io). 📢 Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=karmada-io).   ---   🚨 Try these New Features:   * [Flaky Tests Detection](https://docs.codecov.com/docs/test-result-ingestion-beta) - Detect and resolve failed and flaky tests |

All reactions

Sorry, something went wrong.

 [![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)
[zhzhuang-zju](/zhzhuang-zju)
[force-pushed](/karmada-io/karmada/compare/5f781cd8f474fcadecc284f6b121e26ea65174d8..ef0385392b9d7ce6073739a0818c78b955ca1368)
the
register

branch
from
[`5f781cd`](/karmada-io/karmada/commit/5f781cd8f474fcadecc284f6b121e26ea65174d8) to
[`ef03853`](/karmada-io/karmada/commit/ef0385392b9d7ce6073739a0818c78b955ca1368)  [Compare](/karmada-io/karmada/compare/5f781cd8f474fcadecc284f6b121e26ea65174d8..ef0385392b9d7ce6073739a0818c78b955ca1368)
[November 16, 2024 08:44](#event-15320923214)

[![@karmada-bot](https://avatars.githubusercontent.com/u/76678816?s=40&u=fcd90b8b6679eaa786ceb69dd03ec72e6f11dd09&v=4)](/karmada-bot)
[karmada-bot](/karmada-bot)
added
[size/XXL](/karmada-io/karmada/labels/size/XXL)
Denotes a PR that changes 1000+ lines, ignoring generated files.
and removed
[size/XL](/karmada-io/karmada/labels/size/XL)
Denotes a PR that changes 500-999 lines, ignoring generated files.
labels
[Nov 16, 2024](#event-15320923646)

 [![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)
[zhzhuang-zju](/zhzhuang-zju)
[force-pushed](/karmada-io/karmada/compare/ef0385392b9d7ce6073739a0818c78b955ca1368..2791c104593b8409edf9363afc680cf5d659e698)
the
register

branch
from
[`ef03853`](/karmada-io/karmada/commit/ef0385392b9d7ce6073739a0818c78b955ca1368) to
[`2791c10`](/karmada-io/karmada/commit/2791c104593b8409edf9363afc680cf5d659e698)  [Compare](/karmada-io/karmada/compare/ef0385392b9d7ce6073739a0818c78b955ca1368..2791c104593b8409edf9363afc680cf5d659e698)
[November 16, 2024 09:43](#event-15321012161)

[![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=80&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)

Copy link

Contributor

Author

### **[zhzhuang-zju](/zhzhuang-zju)** commented [Nov 16, 2024](#issuecomment-2480497465)

| cc [@RainbowMango](https://github.com/RainbowMango) |
| --- |

All reactions

Sorry, something went wrong.

[![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)
[zhzhuang-zju](/zhzhuang-zju)
mentioned this pull request
[Nov 16, 2024](#ref-pullrequest-2663712560)

[add agentcsrapproving controller to auto approve agent csr
#5825](/karmada-io/karmada/pull/5825)
 Merged

 [![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)
[zhzhuang-zju](/zhzhuang-zju)
[force-pushed](/karmada-io/karmada/compare/2791c104593b8409edf9363afc680cf5d659e698..3c34df85970d42c437e18f9f8d13e0ec248dc252)
the
register

branch
from
[`2791c10`](/karmada-io/karmada/commit/2791c104593b8409edf9363afc680cf5d659e698) to
[`3c34df8`](/karmada-io/karmada/commit/3c34df85970d42c437e18f9f8d13e0ec248dc252)  [Compare](/karmada-io/karmada/compare/2791c104593b8409edf9363afc680cf5d659e698..3c34df85970d42c437e18f9f8d13e0ec248dc252)
[November 18, 2024 02:00](#event-15327299582)

[![RainbowMango](https://avatars.githubusercontent.com/u/8268873?s=60&v=4)](/RainbowMango)

**[RainbowMango](/RainbowMango)**
reviewed
[Nov 18, 2024](#pullrequestreview-2441363068)

 [View reviewed changes](/karmada-io/karmada/pull/5793/files)

Copy link

Member

### @RainbowMango **[RainbowMango](/RainbowMango)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

/assign

Sorry, something went wrong.

All reactions

[![@karmada-bot](https://avatars.githubusercontent.com/u/76678816?s=40&u=fcd90b8b6679eaa786ceb69dd03ec72e6f11dd09&v=4)](/karmada-bot)
[karmada-bot](/karmada-bot)
assigned [RainbowMango](/RainbowMango)
[Nov 18, 2024](#event-15327465917)

[![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=80&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)

Copy link

Contributor

Author

### **[zhzhuang-zju](/zhzhuang-zju)** commented [Nov 18, 2024](#issuecomment-2481837514)

| [FAIL] remedy testing remedy.spec.decisionMatches is not empty [It] Cluster domain name resolution function encounters an exception, then remove the remedy resource <https://github.com/karmada-io/karmada/actions/runs/11884396791/job/33112661676?pr=5793>  /retest |
| --- |

All reactions

Sorry, something went wrong.

[![zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=60&v=4)](/zhzhuang-zju)

**[zhzhuang-zju](/zhzhuang-zju)**
commented
[Nov 18, 2024](#pullrequestreview-2441409200)

 [View reviewed changes](/karmada-io/karmada/pull/5793/files)

[pkg/karmadactl/register/register.go](/karmada-io/karmada/pull/5793/files#diff-0962a0a2ead58b0e0d1633f45d39079818c83f70c6e2742bb29c4970572b94e7)

Show resolved

Hide resolved

[![RainbowMango](https://avatars.githubusercontent.com/u/8268873?s=60&v=4)](/RainbowMango)

**[RainbowMango](/RainbowMango)**
reviewed
[Nov 18, 2024](#pullrequestreview-2441743827)

 [View reviewed changes](/karmada-io/karmada/pull/5793/files)

[artifacts/deploy/bootstrap-token-configuration.yaml](/karmada-io/karmada/pull/5793/files#diff-6ebee65e7eabb0c74f9bf3755f0408b8777bf4677f71d8bd95a7c851eb90d615)
Outdated

Show resolved

Hide resolved

 [![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)
[zhzhuang-zju](/zhzhuang-zju)
[force-pushed](/karmada-io/karmada/compare/345a6443cbe7efa9b36667b83e656bddbfb7d809..7b2169bb39b791ea3a0984c0d27a3c63d88d231d)
the
register

branch
from
[`345a644`](/karmada-io/karmada/commit/345a6443cbe7efa9b36667b83e656bddbfb7d809) to
[`7b2169b`](/karmada-io/karmada/commit/7b2169bb39b791ea3a0984c0d27a3c63d88d231d)  [Compare](/karmada-io/karmada/compare/345a6443cbe7efa9b36667b83e656bddbfb7d809..7b2169bb39b791ea3a0984c0d27a3c63d88d231d)
[November 18, 2024 12:52](#event-15333956139)

[![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=80&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)

Copy link

Contributor

Author

### **[zhzhuang-zju](/zhzhuang-zju)** commented [Nov 19, 2024](#issuecomment-2484577844) • edited Loading

| This PR decides to standardize the naming of Karmada system roles by prefixing them with `system:karmada`, to distinguish them from Kubernetes system roles prefixed with `system:`. Besides, rename label `kubernetes.io/bootstrapping: rbac-defaults` to `karmada.io/bootstrapping: rbac-defaults`, and remove annotations `rbac.authorization.kubernetes.io/autoupdate: "true"` as its target objects are the default roles of Kubernetes, not the default roles of Karmada. to summarization:   * standardize the naming of Karmada system roles by prefixing them with `system:karmada` * rename label `kubernetes.io/bootstrapping: rbac-defaults` to `karmada.io/bootstrapping: rbac-defaults` * remove annotation `rbac.authorization.kubernetes.io/autoupdate: "true"`   Group for bootstrapping bearer tokens must match `\Asystem:bootstrappers:[a-z0-9:-]{0,255}[a-z0-9]\z`, so the group for karmada bootstrapping bearer tokens can be prefixed with `system:bootstrappers:karmada`.   * standardize the group for karmada bootstrapping bearer tokens by prefixing them with `system:bootstrappers:karmada`   wdyt? [@RainbowMango](https://github.com/RainbowMango) |
| --- |

 👍
1
 RainbowMango reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=80&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)

Copy link

Contributor

Author

### **[zhzhuang-zju](/zhzhuang-zju)** commented [Nov 19, 2024](#issuecomment-2484617786)

| /retest |
| --- |

All reactions

Sorry, something went wrong.

1 similar comment

[![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=80&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)

Copy link

Contributor

Author

### **[zhzhuang-zju](/zhzhuang-zju)** commented [Nov 19, 2024](#issuecomment-2484650508)

| /retest |
| --- |

All reactions

Sorry, something went wrong.

 [![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)
[zhzhuang-zju](/zhzhuang-zju)
[force-pushed](/karmada-io/karmada/compare/7b2169bb39b791ea3a0984c0d27a3c63d88d231d..ecb32d111ec2b11a7966376becb8ed8c6c9d9c80)
the
register

branch
from
[`7b2169b`](/karmada-io/karmada/commit/7b2169bb39b791ea3a0984c0d27a3c63d88d231d) to
[`ecb32d1`](/karmada-io/karmada/commit/ecb32d111ec2b11a7966376becb8ed8c6c9d9c80)  [Compare](/karmada-io/karmada/compare/7b2169bb39b791ea3a0984c0d27a3c63d88d231d..ecb32d111ec2b11a7966376becb8ed8c6c9d9c80)
[November 19, 2024 07:38](#event-15344932209)

[![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)
[zhzhuang-zju](/zhzhuang-zju)
mentioned this pull request
[Nov 19, 2024](#ref-pullrequest-2671780360)

[Standardize the naming conventions for karmada system roles
#5837](/karmada-io/karmada/pull/5837)
 Merged

 [![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)
[zhzhuang-zju](/zhzhuang-zju)
[force-pushed](/karmada-io/karmada/compare/ecb32d111ec2b11a7966376becb8ed8c6c9d9c80..ae161fd88c38c041b68799e6ced2bf6b41e110b0)
the
register

branch
from
[`ecb32d1`](/karmada-io/karmada/commit/ecb32d111ec2b11a7966376becb8ed8c6c9d9c80) to
[`ae161fd`](/karmada-io/karmada/commit/ae161fd88c38c041b68799e6ced2bf6b41e110b0)  [Compare](/karmada-io/karmada/compare/ecb32d111ec2b11a7966376becb8ed8c6c9d9c80..ae161fd88c38c041b68799e6ced2bf6b41e110b0)
[November 20, 2024 01:40](#event-15357626879)

[![RainbowMango](https://avatars.githubusercontent.com/u/8268873?s=60&v=4)](/RainbowMango)

**[RainbowMango](/RainbowMango)**
reviewed
[Nov 20, 2024](#pullrequestreview-2447255646)

 [View reviewed changes](/karmada-io/karmada/pull/5793/files)

[pkg/karmadactl/util/work.go](/karmada-io/karmada/pull/5793/files#diff-d656d29667d443e623fcc8b6ee825822b2e0cc5040ce8e9ae14792aa7a9835b7)
Outdated

Show resolved

Hide resolved

[pkg/karmadactl/util/work.go](/karmada-io/karmada/pull/5793/files#diff-d656d29667d443e623fcc8b6ee825822b2e0cc5040ce8e9ae14792aa7a9835b7)
Outdated

Show resolved

Hide resolved

[pkg/karmadactl/unregister/unregister.go](/karmada-io/karmada/pull/5793/files#diff-dcddbadc44bf98d962a2d52c62157585d086f538a32b2ad26f112b86e8b70ccf)

Show resolved

Hide resolved

[pkg/karmadactl/unregister/unregister.go](/karmada-io/karmada/pull/5793/files#diff-dcddbadc44bf98d962a2d52c62157585d086f538a32b2ad26f112b86e8b70ccf)
Outdated

Show resolved

Hide resolved

[pkg/karmadactl/unregister/unregister.go](/karmada-io/karmada/pull/5793/files#diff-dcddbadc44bf98d962a2d52c62157585d086f538a32b2ad26f112b86e8b70ccf)
Outdated

Show resolved

Hide resolved

[pkg/karmadactl/register/register.go](/karmada-io/karmada/pull/5793/files#diff-0962a0a2ead58b0e0d1633f45d39079818c83f70c6e2742bb29c4970572b94e7)
Outdated

Show resolved

Hide resolved

 [![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)
[zhzhuang-zju](/zhzhuang-zju)
[force-pushed](/karmada-io/karmada/compare/ae161fd88c38c041b68799e6ced2bf6b41e110b0..79850e108406775ec8f5d30b598822e8f056b9a9)
the
register

branch
from
[`ae161fd`](/karmada-io/karmada/commit/ae161fd88c38c041b68799e6ced2bf6b41e110b0) to
[`79850e1`](/karmada-io/karmada/commit/79850e108406775ec8f5d30b598822e8f056b9a9)  [Compare](/karmada-io/karmada/compare/ae161fd88c38c041b68799e6ced2bf6b41e110b0..79850e108406775ec8f5d30b598822e8f056b9a9)
[November 20, 2024 07:39](#event-15362523362)

[![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&v=4)](/zhzhuang-zju)

`[minimize the RBAC permissions for the pull mode cluster](/karmada-io/karmada/pull/5793/commits/af90640361041a4c9f4dc93158eb1d27bf5cb98e "minimize the RBAC permissions for the pull mode cluster

Signed-off-by: zhzhuang-zju <m17799853869@163.com>")`
 …

`[af90640](/karmada-io/karmada/pull/5793/commits/af90640361041a4c9f4dc93158eb1d27bf5cb98e)`

```
Signed-off-by: zhzhuang-zju <m17799853869@163.com>
```

 [![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=40&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)
[zhzhuang-zju](/zhzhuang-zju)
[force-pushed](/karmada-io/karmada/compare/79850e108406775ec8f5d30b598822e8f056b9a9..af90640361041a4c9f4dc93158eb1d27bf5cb98e)
the
register

branch
from
[`79850e1`](/karmada-io/karmada/commit/79850e108406775ec8f5d30b598822e8f056b9a9) to
[`af90640`](/karmada-io/karmada/commit/af90640361041a4c9f4dc93158eb1d27bf5cb98e)  [Compare](/karmada-io/karmada/compare/79850e108406775ec8f5d30b598822e8f056b9a9..af90640361041a4c9f4dc93158eb1d27bf5cb98e)
[November 20, 2024 07:44](#event-15362602131)

[![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=80&u=60cc38ec532e3d5ac03ed411152d6552af110a35&v=4)](/zhzhuang-zju)

Copy link

Contributor

Author

### **[zhzhuang-zju](/zhzhuang-zju)** commented [Nov 20, 2024](#issuecomment-2487910047)

| all done~ cc [@RainbowMango](https://github.com/RainbowMango) |
| --- |

All reactions

Sorry, something went wrong.

[![RainbowMango](https://avatars.githubusercontent.com/u/8268873?s=60&v=4)](/RainbowMango)

**[RainbowMango](/RainbowMango)**
approved these changes
[Nov 20, 2024](#pullrequestreview-2448004883)

 [View reviewed changes](/karmada-io/karmada/pull/5793/files/af90640361041a4c9f4dc93158eb1d27bf5cb98e)

Copy link

Member

### @RainbowMango **[RainbowMango](/RainbowMango)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

/lgtm

/approve

Sorry, something went wrong.

All reactions

[![@karmada-bot](https://avatars.githubusercontent.com/u/76678816?s=40&u=fcd90b8b6679eaa786ceb69dd03ec72e6f11dd09&v=4)](/karmada-bot)
[karmada-bot](/karmada-bot)
added
the
[lgtm](/karmada-io/karmada/labels/lgtm)
Indicates that a PR is ready to be merged.
label
[Nov 20, 2024](#event-15363996613)

[![@karmada-bot](https://avatars.githubusercontent.com/u/76678816?s=80&u=fcd90b8b6679eaa786ceb69dd03ec72e6f11dd09&v=4)](/karmada-bot)

Copy link

Collaborator

### **[karmada-bot](/karmada-bot)** commented [Nov 20, 2024](#issuecomment-2487997926)

| [APPROVALNOTIFIER] This PR is **APPROVED**  This pull-request has been approved by: *[RainbowMango](https://github.com/karmada-io/karmada/pull/5793#pullrequestreview-2448004883 "Approved")*  The full list of commands accepted by this bot can be found [here](https://go.k8s.io/bot-commands?repo=karmada-io%2Fkarmada).  The pull request process is described [here](https://git.k8s.io/community/contributors/guide/owners.md#the-code-review-process)  Needs approval from an approver in each of these files:  * ~~[OWNERS](https://github.com/karmada-io/karmada/blob/master/OWNERS)~~ [RainbowMango]   Approvers can indicate their approval by writing `/approve` in a comment Approvers can cancel approval by writing `/approve cancel` in a comment |
| --- |

All reactions

Sorry, something went wrong.

[![@karmada-bot](https://avatars.githubusercontent.com/u/76678816?s=40&u=fcd90b8b6679eaa786ceb69dd03ec72e6f11dd09&v=4)](/karmada-bot)
[karmada-bot](/karmada-bot)
added
the
[approved](/karmada-io/karmada/labels/approved)
Indicates a PR has been approved by an approver from all required OWNERS files.
label
[Nov 20, 2024](#event-15363998335)

[![@RainbowMango](https://avatars.githubusercontent.com/u/8268873?s=40&u=343e0b241bfb179405ad49ebb179555abf5ee505&v=4)](/RainbowMango)
[RainbowMango](/RainbowMango)
added this to the [v1.12](/karmada-io/karmada/milestone/20) milestone
[Nov 20, 2024](#event-15364001956)

 Hide details
View details

[![@karmada-bot](https://avatars.githubusercontent.com/u/76678816?s=40&u=fcd90b8b6679eaa786ceb69dd03ec72e6f11dd09&v=4)](/karmada-bot)
[karmada-bot](/karmada-bot)
merged commit [`2c82055`](/karmada-io/karmada/commit/2c82055c4c7f469411b1ba48c4dba4841df04831)
into
karmada-io:master

[Nov 20, 2024](https://github.com/karmada-io/karmada/pull/5793#event-15364012484)
19 checks passed

This was referenced Dec 27, 2024

[Pull模式agent与karmada-apiserver通信默认采用的是karmada-apiserver高权限凭据，因此在agent中会存放高权限凭据。此处能否出个最佳实践教导用户对权限进行控制。
#4485](/karmada-io/karmada/issues/4485)

Closed

[Add Huawei to Private Distributors List
karmada-io/community#91](/karmada-io/community/issues/91)

Closed

[Add zhzhuang-zju to the security groups
karmada-io/community#94](/karmada-io/community/pull/94)
 Merged

This was referenced Jan 3, 2025

[x/vulndb: potential Go vuln in github.com/karmada-io/karmada: GHSA-mg7w-c9x2-xh7r
golang/vulndb#3364](/golang/vulndb/issues/3364)

Closed

[x/vulndb: potential Go vuln in github.com/karmada-io/karmada: CVE-2024-56513
golang/vulndb#3365](/golang/vulndb/issues/3365)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fkarmada-io%2Fkarmada%2Fpull%2F5793)

Reviewers

[![@RainbowMango](https://avatars.githubusercontent.com/u/8268873?s=40&v=4)](/RainbowMango) [RainbowMango](/RainbowMango)

RainbowMango approved these changes

[![@chaunceyjiang](https://avatars.githubusercontent.com/u/17962021?s=40&v=4)](/chaunceyjiang) [chaunceyjiang](/chaunceyjiang)

 Awaiting requested review from chaunceyjiang

[![@whitewindmills](https://avatars.githubusercontent.com/u/89241565?s=40&v=4)](/whitewindmills) [whitewindmills](/whitewindmills)

 Awaiting requested review from whitewindmills

[![@XiShanYongYe-Chang](https://avatars.githubusercontent.com/u/78244870?s=40&v=4)](/XiShanYongYe-Chang) [XiShanYongYe-Chang](/XiShanYongYe-Chang)

 Awaiting requested review from XiShanYongYe-Chang

Assignees

[![@RainbowMango](https://avatars.githubusercontent.com/u/8268873?s=40&v=4)](/RainbowMango) [RainbowMango](/RainbowMango)

Labels

[approved](/karmada-io/karmada/labels/approved)
Indicates a PR has been approved by an approver from all required OWNERS files.
[kind/feature](/karmada-io/karmada/labels/kind/feature)
Categorizes issue or PR as related to a new feature.
[lgtm](/karmada-io/karmada/labels/lgtm)
Indicates that a PR is ready to be merged.
[size/XXL](/karmada-io/karmada/labels/size/XXL)
Denotes a PR that changes 1000+ lines, ignoring generated files.

Projects

None yet

Milestone

 [**v1.12**](/karmada-io/karmada/milestone/20 "v1.12")

Development

Successfully merging this pull request may close these issues.

4 participants

[![@zhzhuang-zju](https://avatars.githubusercontent.com/u/81208264?s=52&v=4)](/zhzhuang-zju) [![@codecov-commenter](https://avatars.githubusercontent.com/u/65553080?s=52&v=4)](/codecov-commenter) [![@karmada-bot](https://avatars.githubusercontent.com/u/76678816?s=52&v=4)](/karmada-bot) [![@RainbowMango](https://avatars.githubusercontent.com/u/8268873?s=52&v=4)](/RainbowMango)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_f683e6e1_20250115_094716.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkarmada-io%2Fkarmada%2Fcommit%2F2c82055c4c7f469411b1ba48c4dba4841df04831)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkarmada-io%2Fkarmada%2Fcommit%2F2c82055c4c7f469411b1ba48c4dba4841df04831)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=karmada-io%2Fkarmada)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[karmada-io](/karmada-io)
/
**[karmada](/karmada-io/karmada)**
Public

* [Notifications](/login?return_to=%2Fkarmada-io%2Fkarmada) You must be signed in to change notification settings
* [Fork
  907](/login?return_to=%2Fkarmada-io%2Fkarmada)
* [Star
   4.6k](/login?return_to=%2Fkarmada-io%2Fkarmada)

* [Code](/karmada-io/karmada)
* [Issues
  410](/karmada-io/karmada/issues)
* [Pull requests
  188](/karmada-io/karmada/pulls)
* [Discussions](/karmada-io/karmada/discussions)
* [Actions](/karmada-io/karmada/actions)
* [Projects
  10](/karmada-io/karmada/projects)
* [Security](/karmada-io/karmada/security)
* [Insights](/karmada-io/karmada/pulse)

Additional navigation options

* [Code](/karmada-io/karmada)
* [Issues](/karmada-io/karmada/issues)
* [Pull requests](/karmada-io/karmada/pulls)
* [Discussions](/karmada-io/karmada/discussions)
* [Actions](/karmada-io/karmada/actions)
* [Projects](/karmada-io/karmada/projects)
* [Security](/karmada-io/karmada/security)
* [Insights](/karmada-io/karmada/pulse)

## Commit

[Permalink](/karmada-io/karmada/commit/2c82055c4c7f469411b1ba48c4dba4841df04831)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request [#5793](https://github.com/karmada-io/karmada/pull/5793) from zhzhuang-zju/register

[Browse files](/karmada-io/karmada/tree/2c82055c4c7f469411b1ba48c4dba4841df04831)
Browse the repository at this point in the history

```
minimize the RBAC permissions for the pull mode cluster
```

* Loading branch information

[![@karmada-bot](https://avatars.githubusercontent.com/u/76678816?s=40&v=4)](/karmada-bot)

[karmada-bot](/karmada-io/karmada/commits?author=karmada-bot "View all commits by karmada-bot")
authored
Nov 20, 2024

2 parents
[f6056f5](/karmada-io/karmada/commit/f6056f52559241f4ada7be12b5447beea6ded80d)
+
[af90640](/karmada-io/karmada/commit/af90640361041a4c9f4dc93158eb1d27bf5cb98e)

commit 2c82055

 Show file tree

 Hide file tree

Showing
**11 changed files**
with
**722 additions**
and
**496 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* artifacts/deploy

  + artifacts/deploy/bootstrap-token-configuration.yaml
    [bootstrap-token-configuration.yaml](#diff-6ebee65e7eabb0c74f9bf3755f0408b8777bf4677f71d8bd95a7c851eb90d615)
* charts/karmada/templates

  + charts/karmada/templates/\_karmada\_bootstrap\_token\_configuration.tpl
    [\_karmada\_bootstrap\_token\_configuration.tpl](#diff-6bc5a9a23b52d700a8ebd52ea12a84f45d3aa52b8586c3b65f84c7a54a06b782)
* pkg

  + karmadactl

    - cmdinit

      * bootstraptoken/agent

        + pkg/karmadactl/cmdinit/bootstraptoken/agent/tlsbootstrap.go
          [tlsbootstrap.go](#diff-900504fa185a14cd0dedcf9b46335fdb920cdb9fe76b49abc7374a642c702173)
      * karmada

        + pkg/karmadactl/cmdinit/karmada/deploy.go
          [deploy.go](#diff-d4c7bca560cc30a55089284a3ad576dce813c491a556d66e9d4d568e6ed95ee4)
        + pkg/karmadactl/cmdinit/karmada/rbac.go
          [rbac.go](#diff-c5aafc57eab95568d9d89f174e94a1e6f12cb1c12006846c1a91b8241bfb417c)
        + pkg/karmadactl/cmdinit/karmada/rbac\_test.go
          [rbac\_test.go](#diff-4383410022001a44bf3a4719324a3ee088379e1ac4ff60bec6fb74a8c903aaa9)
    - register

      * pkg/karmadactl/register/register.go
        [register.go](#diff-0962a0a2ead58b0e0d1633f45d39079818c83f70c6e2742bb29c4970572b94e7)
    - unregister

      * pkg/karmadactl/unregister/unregister.go
        [unregister.go](#diff-dcddbadc44bf98d962a2d52c62157585d086f538a32b2ad26f112b86e8b70ccf)
      * pkg/karmadactl/unregister/unregister\_test.go
        [unregister\_test.go](#diff-a11963d117915f431072a4c154898281c6ac80598771dd530dbd11b4118f23d5)
    - util

      * pkg/karmadactl/util/work.go
        [work.go](#diff-d656d29667d443e623fcc8b6ee825822b2e0cc5040ce8e9ae14792aa7a9835b7)
  + util

    - pkg/util/rbac.go
      [rbac.go](#diff-762ae4be73d7c86f7c406203bd45e7c4122692d63bb59add2862debd122df148)

## There are no files selected for viewing

316 changes: 60 additions & 256 deletions

316
[artifacts/deploy/bootstrap-token-configuration.yaml](#diff-6ebee65e7eabb0c74f9bf3755f0408b8777bf4677f71d8bd95a7c851eb90d615 "artifacts/deploy/bootstrap-token-configuration.yaml")

Show comments

[View file](/karmada-io/karmada/blob/2c82055c4c7f469411b1ba48c4dba4841df04831/artifacts/deploy/bootstrap-token-configuration.yaml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -13,6 +13,7 @@ data: |
|  |  | kind: Config |
|  |  |  |
|  |  | --- |
|  |  | # Define a role with permission to get the cluster-info configmap |
|  |  | apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | kind: Role |
|  |  | metadata: |
| Expand All | | @@ -31,6 +32,8 @@ rules: |
|  |  | - get |
|  |  |  |
|  |  | --- |
|  |  | # An anonymous user can get `cluster-info` configmap, which is used to obtain the control plane API server's server |
|  |  | # address and `certificate-authority-data` during the `karmadactl register` process. |
|  |  | apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | kind: RoleBinding |
|  |  | metadata: |
| Expand All | | @@ -48,6 +51,8 @@ subjects: |
|  |  | name: system:anonymous |
|  |  |  |
|  |  | --- |
|  |  | # Group `system:bootstrappers:karmada:default-cluster-token` is the user group of the bootstrap token |
|  |  | # used by `karmadactl register` when registering a new pull mode cluster. |
|  |  | apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | kind: ClusterRoleBinding |
|  |  | metadata: |
| Expand All | | @@ -64,6 +69,26 @@ subjects: |
|  |  | name: system:bootstrappers:karmada:default-cluster-token |
|  |  |  |
|  |  | --- |
|  |  | # Define a ClusterRole with permissions to automatically approve the agent CSRs when the agentcsrapproving controller is enabled by karmada-controller-manager. |
|  |  | apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | kind: ClusterRole |
|  |  | metadata: |
|  |  | labels: |
|  |  | karmada.io/bootstrapping: rbac-defaults |
|  |  | name: system:karmada:certificatesigningrequest:autoapprover |
|  |  | rules: |
|  |  | - apiGroups: |
|  |  | - certificates.k8s.io |
|  |  | resources: |
|  |  | - certificatesigningrequests/clusteragent |
|  |  | verbs: |
|  |  | - create |
|  |  |  |
|  |  | --- |
|  |  | # Group `system:bootstrappers:karmada:default-cluster-token` is the user group of the bootstrap token |
|  |  | # used by `karmadactl register` when registering a new pull mode cluster. |
|  |  | # When the `agentcsrapproving` controller is enabled by the karmada-controller-manager, |
|  |  | # it can automatically approve the agent CSRs requested by the user group system:bootstrappers:karmada:default-cluster-token. |
|  |  | apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | kind: ClusterRoleBinding |
|  |  | metadata: |
| Expand All | | @@ -73,13 +98,33 @@ metadata: |
|  |  | roleRef: |
|  |  | apiGroup: rbac.authorization.k8s.io |
|  |  | kind: ClusterRole |
|  |  | name: system:certificates.k8s.io:certificatesigningrequests:nodeclient |
|  |  | name: system:karmada:certificatesigningrequest:autoapprover |
|  |  | subjects: |
|  |  | - apiGroup: rbac.authorization.k8s.io |
|  |  | kind: Group |
|  |  | name: system:bootstrappers:karmada:default-cluster-token |
|  |  |  |
|  |  | --- |
|  |  | # Define a ClusterRole with permissions to automatically approve the agent CSRs |
|  |  | # where the user name and group of requester match those in the CSRs when the agentcsrapproving controller is enabled by karmada-controller-manager. |
|  |  | apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | kind: ClusterRole |
|  |  | metadata: |
|  |  | labels: |
|  |  | karmada.io/bootstrapping: rbac-defaults |
|  |  | name: system:karmada:certificatesigningrequest:selfautoapprover |
|  |  | rules: |
|  |  | - apiGroups: |
|  |  | - certificates.k8s.io |
|  |  | resources: |
|  |  | - certificatesigningrequests/selfclusteragent |
|  |  | verbs: |
|  |  | - create |
|  |  |  |
|  |  | --- |
|  |  | # Group `system:karmada:agents` is the user group used by the karmada-agent to access the Karmada API server. |
|  |  | # When the agentcsrapproving controller is enabled by the karmada-controller-manager, it can automatically approve |
|  |  | # the agent CSRs(csr.Subject.CommonName = agent username) requested by the user group system:karmada:agents. |
|  |  | apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | kind: ClusterRoleBinding |
|  |  | metadata: |
| Expand All | | @@ -89,280 +134,39 @@ metadata: |
|  |  | roleRef: |
|  |  | apiGroup: rbac.authorization.k8s.io |
|  |  | kind: ClusterRole |
|  |  | name: system:certificates.k8s.io:certificatesigningrequests:selfnodeclient |
|  |  | name: system:karmada:certificatesigningrequest:selfautoapprover |
|  |  | subjects: |
|  |  | - apiGroup: rbac.authorization.k8s.io |
|  |  | kind: Group |
|  |  | name: system:nodes |
|  |  | name: system:karmada:agents |
|  |  |  |
|  |  | --- |
|  |  | # ClusterRole `system:karmada:agent-rbac-generator` is not used for the connection between the karmada-agent and the control plane, |
|  |  | # but is used by karmadactl register to generate the RBAC resources required by the karmada-agent. |
|  |  | apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | kind: ClusterRole |
|  |  | metadata: |
|  |  | labels: |
|  |  | karmada.io/bootstrapping: rbac-defaults |
|  |  | name: system:karmada:agent |
|  |  | name: system:karmada:agent-rbac-generator |
|  |  | rules: |
|  |  | - apiGroups: |
|  |  | - cluster.karmada.io |
|  |  | resources: |
|  |  | - clusters |
|  |  | verbs: |
|  |  | - create |
|  |  | - get |
|  |  | - list |
|  |  | - watch |
|  |  | - delete |
|  |  | - apiGroups: |
|  |  | - cluster.karmada.io |
|  |  | resources: |
|  |  | - clusters/status |
|  |  | verbs: |
|  |  | - update |
|  |  | - apiGroups: |
|  |  | - work.karmada.io |
|  |  | resources: |
|  |  | - works |
|  |  | verbs: |
|  |  | - create |
|  |  | - get |
|  |  | - list |
|  |  | - watch |
|  |  | - update |
|  |  | - delete |
|  |  | - apiGroups: |
|  |  | - work.karmada.io |
|  |  | resources: |
|  |  | - works/status |
|  |  | verbs: |
|  |  | - patch |
|  |  | - update |
|  |  | - apiGroups: |
|  |  | - config.karmada.io |
|  |  | resources: |
|  |  | - resourceinterpreterwebhookconfigurations |
|  |  | - resourceinterpretercustomizations |
|  |  | verbs: |
|  |  | - get |
|  |  | - list |
|  |  | - watch |
|  |  | - apiGroups: |
|  |  | - "" |
|  |  | resources: |
|  |  | - namespaces |
|  |  | verbs: |
|  |  | - get |
|  |  | - apiGroups: |
|  |  | - "" |
|  |  | resources: |
|  |  | - secrets |
|  |  | verbs: |
|  |  | - get |
|  |  | - create |
|  |  | - patch |
|  |  | - apiGroups: |
|  |  | - coordination.k8s.io |
|  |  | resources: |
|  |  | - leases |
|  |  | verbs: |
|  |  | - create |
|  |  | - get |
|  |  | - update |
|  |  | - apiGroups: |
|  |  | - certificates.k8s.io |
|  |  | resources: |
|  |  | - certificatesigningrequests |
|  |  | verbs: |
|  |  | - create |
|  |  | - get |
|  |  | - apiGroups: |
|  |  | - "" |
|  |  | resources: |
|  |  | - events |
|  |  | verbs: |
|  |  | - create |
|  |  | - patch |
|  |  | - update |
|  |  | - apiGroups: ['\*'] |
|  |  | resources: ['\*'] |
|  |  | verbs: ['\*'] |
|  |  |  |
|  |  | --- |
|  |  | # User `system:karmada:agent:rbac-generator` is specifically used during the `karmadactl register` process to generate restricted RBAC resources for the `karmada-agent`. |
|  |  | apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | kind: ClusterRoleBinding |
|  |  | metadata: |
|  |  | labels: |
|  |  | karmada.io/bootstrapping: rbac-defaults |
|  |  | name: system:karmada:agent |
|  |  | name: system:karmada:agent-rbac-generator |
|  |  | roleRef: |
|  |  | apiGroup: rbac.authorization.k8s.io |
|  |  | kind: ClusterRole |
|  |  | name: system:karmada:agent |
|  |  | name: system:karmada:agent-rbac-generator |
|  |  | subjects: |
|  |  | - apiGroup: rbac.authorization.k8s.io |
|  |  | kind: Group |
|  |  | name: system:nodes |
|  |  |  |
|  |  | # To ensure the agent has the minimal RBAC permissions, the ideal approach is to |
|  |  | # use different RBAC configurations for different agents of member clusters with pull mode. |
|  |  | # Below is the minimal set of RBAC permissions required for a single pull mode member cluster. |
|  |  | # Here are the definitions of the variables used: |
|  |  | # |
|  |  | # - clustername: the name of the member cluster. |
|  |  | # - cluster\_namespace: the namespace where the member cluster secrets are stored, default to karmada-cluster. |
|  |  | # |
|  |  | # --- |
|  |  | # apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | # kind: ClusterRole |
|  |  | # metadata: |
|  |  | # name: system:karmada:agent |
|  |  | # rules: |
|  |  | # - apiGroups: |
|  |  | # - cluster.karmada.io |
|  |  | # resources: |
|  |  | # - clusters |
|  |  | # resourceNames: |
|  |  | # - {{clustername}} |
|  |  | # verbs: |
|  |  | # - create |
|  |  | # - get |
|  |  | # - delete |
|  |  | # - apiGroups: |
|  |  | # - cluster.karmada.io |
|  |  | # resources: |
|  |  | # - clusters |
|  |  | # verbs: |
|  |  | # - list |
|  |  | # - watch |
|  |  | # - apiGroups: |
|  |  | # - cluster.karmada.io |
|  |  | # resources: |
|  |  | # - clusters/status |
|  |  | # resourceNames: |
|  |  | # - {{clustername}} |
|  |  | # verbs: |
|  |  | # - update |
|  |  | # - apiGroups: |
|  |  | # - config.karmada.io |
|  |  | # resources: |
|  |  | # - resourceinterpreterwebhookconfigurations |
|  |  | # - resourceinterpretercustomizations |
|  |  | # verbs: |
|  |  | # - get |
|  |  | # - list |
|  |  | # - watch |
|  |  | # - apiGroups: |
|  |  | # - "" |
|  |  | # resources: |
|  |  | # - namespaces |
|  |  | # verbs: |
|  |  | # - get |
|  |  | # - apiGroups: |
|  |  | # - coordination.k8s.io |
|  |  | # resources: |
|  |  | # - leases |
|  |  | # verbs: |
|  |  | # - create |
|  |  | # - get |
|  |  | # - update |
|  |  | # - apiGroups: |
|  |  | # - certificates.k8s.io |
|  |  | # resources: |
|  |  | # - certificatesigningrequests |
|  |  | # verbs: |
|  |  | # - create |
|  |  | # - get |
|  |  | # - apiGroups: |
|  |  | # - "" |
|  |  | # resources: |
|  |  | # - events |
|  |  | # verbs: |
|  |  | # - create |
|  |  | # - patch |
|  |  | # - update |
|  |  | # |
|  |  | # --- |
|  |  | # apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | # kind: ClusterRoleBinding |
|  |  | # metadata: |
|  |  | # name: system:karmada:agent |
|  |  | # roleRef: |
|  |  | # apiGroup: rbac.authorization.k8s.io |
|  |  | # kind: ClusterRole |
|  |  | # name: system:karmada:agent |
|  |  | # subjects: |
|  |  | # - apiGroup: rbac.authorization.k8s.io |
|  |  | # kind: Group |
|  |  | # name: system:nodes |
|  |  | # |
|  |  | # --- |
|  |  | # apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | # kind: Role |
|  |  | # metadata: |
|  |  | # name: system:karmada:agent-secret |
|  |  | # namespace: "{{cluster\_namespace}}" |
|  |  | # rules: |
|  |  | # - apiGroups: |
|  |  | # - "" |
|  |  | # resources: |
|  |  | # - secrets |
|  |  | # resourceNames: |
|  |  | # - {{clustername}}-impersonator |
|  |  | # - {{clustername}} |
|  |  | # verbs: |
|  |  | # - get |
|  |  | # - create |
|  |  | # - patch |
|  |  | # |
|  |  | # --- |
|  |  | # apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | # kind: RoleBinding |
|  |  | # metadata: |
|  |  | # name: system:karmada:agent-secret |
|  |  | # namespace: "{{cluster\_namespace}}" |
|  |  | # roleRef: |
|  |  | # apiGroup: rbac.authorization.k8s.io |
|  |  | # kind: Role |
|  |  | # name: system:karmada:agent-secret |
|  |  | # subjects: |
|  |  | # - apiGroup: rbac.authorization.k8s.io |
|  |  | # kind: Group |
|  |  | # name: system:nodes |
|  |  | # |
|  |  | # --- |
|  |  | # apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | # kind: Role |
|  |  | # metadata: |
|  |  | # name: system:karmada:agent-work |
|  |  | # namespace: "karmada-es-{{clustername}}" |
|  |  | # rules: |
|  |  | # - apiGroups: |
|  |  | # - work.karmada.io |
|  |  | # resources: |
|  |  | # - works |
|  |  | # verbs: |
|  |  | # - create |
|  |  | # - get |
|  |  | # - list |
|  |  | # - watch |
|  |  | # - update |
|  |  | # - delete |
|  |  | # - apiGroups: |
|  |  | # - work.karmada.io |
|  |  | # resources: |
|  |  | # - works/status |
|  |  | # verbs: |
|  |  | # - patch |
|  |  | # - update |
|  |  | # |
|  |  | # --- |
|  |  | # apiVersion: rbac.authorization.k8s.io/v1 |
|  |  | # kind: RoleBinding |
|  |  | # metadata: |
|  |  | # name: system:karmada:agent-work |
|  |  | # namespace: "karmada-es-{{clustername}}" |
|  |  | # roleRef: |
|  |  | # apiGroup: rbac.authorization.k8s.io |
|  |  | # kind: Role |
|  |  | # name: system:karmada:agent-work |
|  |  | # subjects: |
|  |  | # - apiGroup: rbac.authorization.k8s.io |
|  |  | # kind: Group |
|  |  | # name: system:nodes |
|  |  | - apiGroup: rbac.authorization.k8s.io |
|  |  | kind: User |
|  |  | name: system:karmada:agent:rbac-generator |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `2c82055`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fkarmada-io%2Fkarmada%2Fcommit%2F2c82055c4c7f469411b1ba48c4dba4841df04831) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from karmada.io_a25b23be_20250115_094720.html ===

[Skip to main content](#__docusaurus_skipToContent_fallback)⭐️ If you like Karmada, give it a star on [GitHub](https://github.com/karmada-io/karmada)! ⭐️[![Karmada](/img/logo.svg)![Karmada](/img/artwork/karmada-icon-white.svg)**Karmada**](/)[Documentation](/docs/)[Blog](/blog)[Adopters](/adopters)[Partners](/partners)[v1.12](/docs/)

* [Next](/docs/next/administrator/security/component-permission)
* [v1.12](/docs/administrator/security/component-permission)
* [v1.11](/docs/v1.11/)
* [v1.10](/docs/v1.10/)
* [v1.9](/docs/v1.9/)
* [v1.8](/docs/v1.8/)
* [v1.7](/docs/v1.7/)
* [v1.6](/docs/v1.6/)
* [v1.5](/docs/v1.5/)
* [v1.4](/docs/v1.4/)
* [v1.3](/docs/v1.3/)
English

* [English](/docs/administrator/security/component-permission)
* [简体中文](/zh/docs/administrator/security/component-permission)
Search

* [Core Concepts](/docs/)
  + [What is Karmada?](/docs/)
  + [Components](/docs/core-concepts/components)
  + [Concepts](/docs/core-concepts/concepts)
  + [Architecture](/docs/core-concepts/architecture)
* [Key Features](/docs/key-features/features)
* [Get Started](/docs/get-started/nginx-example)
* [Tutorials](/docs/tutorials/crd-application)
* [Installation](/docs/installation/)
* [User Guide](/docs/userguide/clustermanager/cluster-registration)
* [Administrator Guide](/docs/administrator/configuration/configure-controllers)
  + [Configuration](/docs/administrator/configuration/configure-controllers)
  + [Migration](/docs/administrator/migration/promote-legacy-workload)
  + [Monitoring](/docs/administrator/monitoring/working-with-filebeat)
  + [Upgrading](/docs/administrator/upgrading/)
  + [Backup](/docs/administrator/backup/working-with-velero)
  + [Security](/docs/administrator/security/security-considerations)
    - [Security Considerations](/docs/administrator/security/security-considerations)
    - [Verify Artifacts](/docs/administrator/security/verify-artifacts)
    - [Component Permissions](/docs/administrator/security/component-permission)
* [Developer Guide](/docs/developers/profiling-karmada)
* [Contributor Guide](/docs/contributor/contribute-docs)
* [Case Study](/docs/casestudies/adopters)
* [Troubleshooting](/docs/troubleshooting/trouble-shooting)
* [FAQ (Frequently Asked Questions)](/docs/faq/)
* [Releases](/docs/releases)
* [Reference](/docs/reference/glossary)

* Administrator Guide
* Security
* Component Permissions
Version: v1.12On this page
# Karmada Component Permissions

This document provides a detailed explanation of the resources each Karmada component needs to access and the reasons for these accesses. It will help administrators understand and configure the RBAC permissions needed for Karmada components effectively, ensuring that the system operates securely and efficiently.
The [installation tools](https://karmada.io/docs/installation/) maintained by the community are designed with security in mind. These tools use Role-Based Access Control ([RBAC](https://kubernetes.io/docs/reference/access-authn-authz/rbac/)) to manage access to components, ensuring they only have access to the resources they require. By adhering to the principle of least privilege, these tools minimize potential security risks and prevent unauthorized access or actions within the system.

## karmada-operator[​](#karmada-operator "Direct link to karmada-operator")

### Introduction:[​](#introduction "Direct link to Introduction:")

The Karmada operator is a method for installing, upgrading, and deleting Karmada instances. It builds upon the basic Karmada resource and controller concepts, provides convenience to centrally manage entire lifecycle of Karmada instances in a global cluster.

### Resources in Cluster Where karmada-operator is deployed[​](#resources-in-cluster-where-karmada-operator-is-deployed "Direct link to Resources in Cluster Where karmada-operator is deployed")

| Resource | API Group | Resource Names | Namespace | Verbs | Description |
| --- | --- | --- | --- | --- | --- |
| leases | coordination.k8s.io | \* | \* | get, create, update | Required for leader election |
| karmadas | operator.karmada.io | \* | \* | get, list, watch, update | To manage Karmada instances |
| karmadas/status | operator.karmada.io | \* | \* | update | To update the status subresource of Karmada instances |
| events | "" | \* | \* | create | Allows karmada-operator to record events in the Kubernetes API server |
| nodes | "" | \* | NA | list | To get Node IP |
| pods | "" | \* | \* | list | For pod health checks |
| namespaces | "" | \* | \* | get | To get information about namespaces, and deploy resources into specific namespaces |
| secrets | "" | \* | \* | get, create, update, delete | To manage secrets which might contain sensitive data like credentials |
| services | "" | \* | \* | get, create, update, delete | To manage services to expose applications within the cluster |
| statefulsets | "" | \* | \* | get, create, update, delete | To manage StatefulSets, e.g., etcd |
| deployments | apps | \* | \* | get, create, update, delete | To manage Deployments, e.g., karmada-apiserver |

| Non-Resource URLs | Verbs | Description |
| --- | --- | --- |
| /healthz | get | Used to check whether the Karmada API server is healthy. |

### Resources in Karmada System[​](#resources-in-karmada-system "Direct link to Resources in Karmada System")

NONE.

## karmada-agent[​](#karmada-agent "Direct link to karmada-agent")

### Introduction:[​](#introduction-1 "Direct link to Introduction:")

karmada-agent can register a specific cluster to the Karmada control plane and sync manifests from the Karmada control plane to the member cluster. In addition, it also syncs the status of member cluster and manifests to the Karmada control plane.

### Resources in Cluster Where karmada-agent is deployed[​](#resources-in-cluster-where-karmada-agent-is-deployed "Direct link to Resources in Cluster Where karmada-agent is deployed")

| Resource | API Group | Resource Names | Namespace | Verbs | Description |
| --- | --- | --- | --- | --- | --- |
| \* | \* | \* | \* | \* | karmada-agent acts as an administrator in member clusters |

| Non-Resource URLs | Verbs | Description |
| --- | --- | --- |
| \* | get | karmada-agent acts as an administrator in member clusters |

### Resources in Karmada System[​](#resources-in-karmada-system-1 "Direct link to Resources in Karmada System")

In the following table, `{{cluster_name}}` represents the name of the member cluster that has been registered by the karmada-agent, and `{{cluster_namespace}}` indicates the namespace where the secrets resource of the member cluster is deployed, which is `karmada-cluster` by default.

| Resource | API Group | Resource Names | Namespace | Verbs | Description |
| --- | --- | --- | --- | --- | --- |
| clusters | cluster.karmada.io | \* | NA | list, watch，create | Used to create cluster and listen for cluster status |
| clusters | cluster.karmada.io | `{{cluster_name}}` | NA | get, delete | To manager specific clusters |
| clusters/status | cluster.karmada.io | `{{cluster_name}}` | NA | update | Used to update the status of a specific cluster |
| resourceinterpreterwebhookconfigurations | config.karmada.io | \* | NA | get, list, watch | Used to get the resourceinterpreterwebhookconfigurations resource |
| resourceinterpretercustomizations | config.karmada.io | \* | NA | get, list, watch | Used to get the resourceinterpretercustomizations resource |
| namespaces | "" | \* | \* | get | Used to get namespaces |
| leases | coordination.k8s.io | \* | \* | get, create, update | Required for leader election |
| certificatesigningrequests | certificates.k8s.io | \* | NA | get, create | Obtaining and creating CSRs for Karmada-agent's certificate rotation |
| services | "" | \* | \* | list, watch | Used to build the ClusterIPServiceResolver resource interpreter. |
| events | "" | \* | \* | create, patch, update | Allow karmada-agent to log events in Karmada API Server |
| secrets | "" | `{{cluster_name}}` | `{{cluster_namespace}}` | get, patch | For accessing and modifying specific secret resources |
| secrets | "" | \* | `{{cluster_namespace}}` | create | Used to create secret resources |
| works | work.karmada.io | \* | karmada-es-`{{cluster_name}}` | get, create, list, watch, update, delete | Used to create and manage work resources in a specific namespace |
| works/status | work.karmada.io | \* | karmada-es-`{{cluster_name}}` | patch, update | Used to update the status of work in a specific namespace |

## Other components[​](#other-components "Direct link to Other components")

Permission information for more components to be added.

[Edit this page](https://github.com/karmada-io/website/edit/main/docs/administrator/security/component-permission.md)Last updated on **Nov 30, 2024** by **chaosi-zju**[PreviousVerify Artifacts](/docs/administrator/security/verify-artifacts)[NextProfiling Karmada](/docs/developers/profiling-karmada)

* [karmada-operator](#karmada-operator)
  + [Introduction:](#introduction)
  + [Resources in Cluster Where karmada-operator is deployed](#resources-in-cluster-where-karmada-operator-is-deployed)
  + [Resources in Karmada System](#resources-in-karmada-system)
* [karmada-agent](#karmada-agent)
  + [Introduction:](#introduction-1)
  + [Resources in Cluster Where karmada-agent is deployed](#resources-in-cluster-where-karmada-agent-is-deployed)
  + [Resources in Karmada System](#resources-in-karmada-system-1)
* [Other components](#other-components)
Documentation

* [Getting Started](/docs/)
Community

* [CNCF Slack ( #karmada channel )](https://slack.cncf.io/)
More

* [GitHub](https://github.com/karmada-io/karmada)
* [Blog](/blog)
* [Adopters](/adopters)

**© Karmada Authors 2025 | Documentation Distributed under [CC-BY-4.0](https://creativecommons.org/licenses/by/4.0)**  **| Powered by [Netlify](https://www.netlify.com)**

© 2025 The Linux Foundation. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our  [Trademark Usage](https://www.linuxfoundation.org/trademark-usage/) page.


