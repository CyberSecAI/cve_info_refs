=== Content from git.kernel.org_58e50e31_20250114_181353.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d7774910c5583e61c5fe2571280366624ef48036)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d7774910c5583e61c5fe2571280366624ef48036)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d7774910c5583e61c5fe2571280366624ef48036)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d7774910c5583e61c5fe2571280366624ef48036)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Alper Nebi Yasak <alpernebiyasak@gmail.com> | 2024-10-08 01:20:54 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 14:01:45 +0100 |
| commit | [d7774910c5583e61c5fe2571280366624ef48036](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d7774910c5583e61c5fe2571280366624ef48036) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d7774910c5583e61c5fe2571280366624ef48036)) | |
| tree | [bffad2ae07b22f98191124eecf32d533dce25f6a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d7774910c5583e61c5fe2571280366624ef48036) | |
| parent | [6f2648838ce1a9f2c432e84e38dec5d38412a551](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6f2648838ce1a9f2c432e84e38dec5d38412a551) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d7774910c5583e61c5fe2571280366624ef48036&id2=6f2648838ce1a9f2c432e84e38dec5d38412a551)) | |
| download | [linux-d7774910c5583e61c5fe2571280366624ef48036.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d7774910c5583e61c5fe2571280366624ef48036.tar.gz) | |

wifi: mwifiex: Fix memcpy() field-spanning write warning in mwifiex\_config\_scan()[ Upstream commit d241a139c2e9f8a479f25c75ebd5391e6a448500 ]
Replace one-element array with a flexible-array member in `struct
mwifiex\_ie\_types\_wildcard\_ssid\_params` to fix the following warning
on a MT8173 Chromebook (mt8173-elm-hana):
[ 356.775250] ------------[ cut here ]------------
[ 356.784543] memcpy: detected field-spanning write (size 6) of single field "wildcard\_ssid\_tlv->ssid" at drivers/net/wireless/marvell/mwifiex/scan.c:904 (size 1)
[ 356.813403] WARNING: CPU: 3 PID: 742 at drivers/net/wireless/marvell/mwifiex/scan.c:904 mwifiex\_scan\_networks+0x4fc/0xf28 [mwifiex]
The "(size 6)" above is exactly the length of the SSID of the network
this device was connected to. The source of the warning looks like:
ssid\_len = user\_scan\_in->ssid\_list[i].ssid\_len;
[...]
memcpy(wildcard\_ssid\_tlv->ssid,
user\_scan\_in->ssid\_list[i].ssid, ssid\_len);
There is a #define WILDCARD\_SSID\_TLV\_MAX\_SIZE that uses sizeof() on this
struct, but it already didn't account for the size of the one-element
array, so it doesn't need to be changed.
Fixes: 5e6e3a92b9a4 ("wireless: mwifiex: initial commit for Marvell mwifiex driver")
Signed-off-by: Alper Nebi Yasak <alpernebiyasak@gmail.com>
Acked-by: Brian Norris <briannorris@chromium.org>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak@gmail.com](https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak%40gmail.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d7774910c5583e61c5fe2571280366624ef48036)

| -rw-r--r-- | [drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/marvell/mwifiex/fw.h?id=d7774910c5583e61c5fe2571280366624ef48036) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/wireless/marvell/mwifiex/fw.h b/drivers/net/wireless/marvell/mwifiex/fw.hindex d03129d5d24e3d..4a96281792cc1a 100644--- a/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=6f2648838ce1a9f2c432e84e38dec5d38412a551)+++ b/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=d7774910c5583e61c5fe2571280366624ef48036)@@ -875,7 +875,7 @@ struct mwifiex\_ietypes\_chanstats { struct mwifiex\_ie\_types\_wildcard\_ssid\_params { struct mwifiex\_ie\_types\_header header; u8 max\_ssid\_length;- u8 ssid[1];+ u8 ssid[]; } \_\_packed;  #define TSF\_DATA\_SIZE 8 |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:12:30 +0000



=== Content from git.kernel.org_c9bf48de_20250114_181353.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e2de22e4b6213371d9e76f74a10ce817572a8d74)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e2de22e4b6213371d9e76f74a10ce817572a8d74)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e2de22e4b6213371d9e76f74a10ce817572a8d74)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e2de22e4b6213371d9e76f74a10ce817572a8d74)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Alper Nebi Yasak <alpernebiyasak@gmail.com> | 2024-10-08 01:20:54 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 13:53:15 +0100 |
| commit | [e2de22e4b6213371d9e76f74a10ce817572a8d74](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e2de22e4b6213371d9e76f74a10ce817572a8d74) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e2de22e4b6213371d9e76f74a10ce817572a8d74)) | |
| tree | [91a1defc3057504610d5441c23bc957621f2f6ee](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e2de22e4b6213371d9e76f74a10ce817572a8d74) | |
| parent | [f27d4f33a3da487b7c9b1000d489d982dafb3ccf](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f27d4f33a3da487b7c9b1000d489d982dafb3ccf) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e2de22e4b6213371d9e76f74a10ce817572a8d74&id2=f27d4f33a3da487b7c9b1000d489d982dafb3ccf)) | |
| download | [linux-e2de22e4b6213371d9e76f74a10ce817572a8d74.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e2de22e4b6213371d9e76f74a10ce817572a8d74.tar.gz) | |

wifi: mwifiex: Fix memcpy() field-spanning write warning in mwifiex\_config\_scan()[ Upstream commit d241a139c2e9f8a479f25c75ebd5391e6a448500 ]
Replace one-element array with a flexible-array member in `struct
mwifiex\_ie\_types\_wildcard\_ssid\_params` to fix the following warning
on a MT8173 Chromebook (mt8173-elm-hana):
[ 356.775250] ------------[ cut here ]------------
[ 356.784543] memcpy: detected field-spanning write (size 6) of single field "wildcard\_ssid\_tlv->ssid" at drivers/net/wireless/marvell/mwifiex/scan.c:904 (size 1)
[ 356.813403] WARNING: CPU: 3 PID: 742 at drivers/net/wireless/marvell/mwifiex/scan.c:904 mwifiex\_scan\_networks+0x4fc/0xf28 [mwifiex]
The "(size 6)" above is exactly the length of the SSID of the network
this device was connected to. The source of the warning looks like:
ssid\_len = user\_scan\_in->ssid\_list[i].ssid\_len;
[...]
memcpy(wildcard\_ssid\_tlv->ssid,
user\_scan\_in->ssid\_list[i].ssid, ssid\_len);
There is a #define WILDCARD\_SSID\_TLV\_MAX\_SIZE that uses sizeof() on this
struct, but it already didn't account for the size of the one-element
array, so it doesn't need to be changed.
Fixes: 5e6e3a92b9a4 ("wireless: mwifiex: initial commit for Marvell mwifiex driver")
Signed-off-by: Alper Nebi Yasak <alpernebiyasak@gmail.com>
Acked-by: Brian Norris <briannorris@chromium.org>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak@gmail.com](https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak%40gmail.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e2de22e4b6213371d9e76f74a10ce817572a8d74)

| -rw-r--r-- | [drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/marvell/mwifiex/fw.h?id=e2de22e4b6213371d9e76f74a10ce817572a8d74) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/wireless/marvell/mwifiex/fw.h b/drivers/net/wireless/marvell/mwifiex/fw.hindex 5b072120e3f213..324efd55c8e4fe 100644--- a/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=f27d4f33a3da487b7c9b1000d489d982dafb3ccf)+++ b/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=e2de22e4b6213371d9e76f74a10ce817572a8d74)@@ -842,7 +842,7 @@ struct mwifiex\_ietypes\_chanstats { struct mwifiex\_ie\_types\_wildcard\_ssid\_params { struct mwifiex\_ie\_types\_header header; u8 max\_ssid\_length;- u8 ssid[1];+ u8 ssid[]; } \_\_packed;  #define TSF\_DATA\_SIZE 8 |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:12:31 +0000



=== Content from git.kernel.org_07e98a11_20250114_181350.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=5fa329c44e1e635da2541eab28b6cdb8464fc8d1)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5fa329c44e1e635da2541eab28b6cdb8464fc8d1)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5fa329c44e1e635da2541eab28b6cdb8464fc8d1)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5fa329c44e1e635da2541eab28b6cdb8464fc8d1)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Alper Nebi Yasak <alpernebiyasak@gmail.com> | 2024-10-08 01:20:54 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:47:51 +0100 |
| commit | [5fa329c44e1e635da2541eab28b6cdb8464fc8d1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5fa329c44e1e635da2541eab28b6cdb8464fc8d1) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=5fa329c44e1e635da2541eab28b6cdb8464fc8d1)) | |
| tree | [51464658c9eaf07661f1b3566754a0acbbc465e9](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5fa329c44e1e635da2541eab28b6cdb8464fc8d1) | |
| parent | [4496d25157c948088f7b8c3b9a1411eb75f57900](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4496d25157c948088f7b8c3b9a1411eb75f57900) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5fa329c44e1e635da2541eab28b6cdb8464fc8d1&id2=4496d25157c948088f7b8c3b9a1411eb75f57900)) | |
| download | [linux-5fa329c44e1e635da2541eab28b6cdb8464fc8d1.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-5fa329c44e1e635da2541eab28b6cdb8464fc8d1.tar.gz) | |

wifi: mwifiex: Fix memcpy() field-spanning write warning in mwifiex\_config\_scan()[ Upstream commit d241a139c2e9f8a479f25c75ebd5391e6a448500 ]
Replace one-element array with a flexible-array member in `struct
mwifiex\_ie\_types\_wildcard\_ssid\_params` to fix the following warning
on a MT8173 Chromebook (mt8173-elm-hana):
[ 356.775250] ------------[ cut here ]------------
[ 356.784543] memcpy: detected field-spanning write (size 6) of single field "wildcard\_ssid\_tlv->ssid" at drivers/net/wireless/marvell/mwifiex/scan.c:904 (size 1)
[ 356.813403] WARNING: CPU: 3 PID: 742 at drivers/net/wireless/marvell/mwifiex/scan.c:904 mwifiex\_scan\_networks+0x4fc/0xf28 [mwifiex]
The "(size 6)" above is exactly the length of the SSID of the network
this device was connected to. The source of the warning looks like:
ssid\_len = user\_scan\_in->ssid\_list[i].ssid\_len;
[...]
memcpy(wildcard\_ssid\_tlv->ssid,
user\_scan\_in->ssid\_list[i].ssid, ssid\_len);
There is a #define WILDCARD\_SSID\_TLV\_MAX\_SIZE that uses sizeof() on this
struct, but it already didn't account for the size of the one-element
array, so it doesn't need to be changed.
Fixes: 5e6e3a92b9a4 ("wireless: mwifiex: initial commit for Marvell mwifiex driver")
Signed-off-by: Alper Nebi Yasak <alpernebiyasak@gmail.com>
Acked-by: Brian Norris <briannorris@chromium.org>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak@gmail.com](https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak%40gmail.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5fa329c44e1e635da2541eab28b6cdb8464fc8d1)

| -rw-r--r-- | [drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/marvell/mwifiex/fw.h?id=5fa329c44e1e635da2541eab28b6cdb8464fc8d1) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/wireless/marvell/mwifiex/fw.h b/drivers/net/wireless/marvell/mwifiex/fw.hindex 284671618e9ce1..50205b6ae4ca22 100644--- a/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=4496d25157c948088f7b8c3b9a1411eb75f57900)+++ b/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=5fa329c44e1e635da2541eab28b6cdb8464fc8d1)@@ -854,7 +854,7 @@ struct mwifiex\_ietypes\_chanstats { struct mwifiex\_ie\_types\_wildcard\_ssid\_params { struct mwifiex\_ie\_types\_header header; u8 max\_ssid\_length;- u8 ssid[1];+ u8 ssid[]; } \_\_packed;  #define TSF\_DATA\_SIZE 8 |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:12:27 +0000



=== Content from git.kernel.org_c2211f37_20250114_181351.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b466746cfb6be43f9a1457bbee52ade397fb23ea)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b466746cfb6be43f9a1457bbee52ade397fb23ea)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b466746cfb6be43f9a1457bbee52ade397fb23ea)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b466746cfb6be43f9a1457bbee52ade397fb23ea)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Alper Nebi Yasak <alpernebiyasak@gmail.com> | 2024-10-08 01:20:54 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:53:28 +0100 |
| commit | [b466746cfb6be43f9a1457bbee52ade397fb23ea](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b466746cfb6be43f9a1457bbee52ade397fb23ea) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b466746cfb6be43f9a1457bbee52ade397fb23ea)) | |
| tree | [dd9feb52f4d50129d3e8b3477310b1b7e960ee3c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b466746cfb6be43f9a1457bbee52ade397fb23ea) | |
| parent | [861cebee260a6e4efcb4ca9be14af350b9c37c81](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=861cebee260a6e4efcb4ca9be14af350b9c37c81) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b466746cfb6be43f9a1457bbee52ade397fb23ea&id2=861cebee260a6e4efcb4ca9be14af350b9c37c81)) | |
| download | [linux-b466746cfb6be43f9a1457bbee52ade397fb23ea.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b466746cfb6be43f9a1457bbee52ade397fb23ea.tar.gz) | |

wifi: mwifiex: Fix memcpy() field-spanning write warning in mwifiex\_config\_scan()[ Upstream commit d241a139c2e9f8a479f25c75ebd5391e6a448500 ]
Replace one-element array with a flexible-array member in `struct
mwifiex\_ie\_types\_wildcard\_ssid\_params` to fix the following warning
on a MT8173 Chromebook (mt8173-elm-hana):
[ 356.775250] ------------[ cut here ]------------
[ 356.784543] memcpy: detected field-spanning write (size 6) of single field "wildcard\_ssid\_tlv->ssid" at drivers/net/wireless/marvell/mwifiex/scan.c:904 (size 1)
[ 356.813403] WARNING: CPU: 3 PID: 742 at drivers/net/wireless/marvell/mwifiex/scan.c:904 mwifiex\_scan\_networks+0x4fc/0xf28 [mwifiex]
The "(size 6)" above is exactly the length of the SSID of the network
this device was connected to. The source of the warning looks like:
ssid\_len = user\_scan\_in->ssid\_list[i].ssid\_len;
[...]
memcpy(wildcard\_ssid\_tlv->ssid,
user\_scan\_in->ssid\_list[i].ssid, ssid\_len);
There is a #define WILDCARD\_SSID\_TLV\_MAX\_SIZE that uses sizeof() on this
struct, but it already didn't account for the size of the one-element
array, so it doesn't need to be changed.
Fixes: 5e6e3a92b9a4 ("wireless: mwifiex: initial commit for Marvell mwifiex driver")
Signed-off-by: Alper Nebi Yasak <alpernebiyasak@gmail.com>
Acked-by: Brian Norris <briannorris@chromium.org>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak@gmail.com](https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak%40gmail.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b466746cfb6be43f9a1457bbee52ade397fb23ea)

| -rw-r--r-- | [drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/marvell/mwifiex/fw.h?id=b466746cfb6be43f9a1457bbee52ade397fb23ea) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/wireless/marvell/mwifiex/fw.h b/drivers/net/wireless/marvell/mwifiex/fw.hindex 26979013ca52d2..9c9fe5757b295b 100644--- a/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=861cebee260a6e4efcb4ca9be14af350b9c37c81)+++ b/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=b466746cfb6be43f9a1457bbee52ade397fb23ea)@@ -842,7 +842,7 @@ struct mwifiex\_ietypes\_chanstats { struct mwifiex\_ie\_types\_wildcard\_ssid\_params { struct mwifiex\_ie\_types\_header header; u8 max\_ssid\_length;- u8 ssid[1];+ u8 ssid[]; } \_\_packed;  #define TSF\_DATA\_SIZE 8 |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:12:29 +0000



=== Content from git.kernel.org_bb096390_20250114_181351.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a09760c513ae0f98c7082a1deace7fb6284ee866)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a09760c513ae0f98c7082a1deace7fb6284ee866)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a09760c513ae0f98c7082a1deace7fb6284ee866)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a09760c513ae0f98c7082a1deace7fb6284ee866)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Alper Nebi Yasak <alpernebiyasak@gmail.com> | 2024-10-08 01:20:54 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 10:59:32 +0100 |
| commit | [a09760c513ae0f98c7082a1deace7fb6284ee866](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a09760c513ae0f98c7082a1deace7fb6284ee866) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a09760c513ae0f98c7082a1deace7fb6284ee866)) | |
| tree | [096312c37e1080773202fd90de18e5fbb37bc56d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a09760c513ae0f98c7082a1deace7fb6284ee866) | |
| parent | [9635f7f4d45a12a747d0a241450d677dcf3bb696](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9635f7f4d45a12a747d0a241450d677dcf3bb696) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a09760c513ae0f98c7082a1deace7fb6284ee866&id2=9635f7f4d45a12a747d0a241450d677dcf3bb696)) | |
| download | [linux-a09760c513ae0f98c7082a1deace7fb6284ee866.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a09760c513ae0f98c7082a1deace7fb6284ee866.tar.gz) | |

wifi: mwifiex: Fix memcpy() field-spanning write warning in mwifiex\_config\_scan()[ Upstream commit d241a139c2e9f8a479f25c75ebd5391e6a448500 ]
Replace one-element array with a flexible-array member in `struct
mwifiex\_ie\_types\_wildcard\_ssid\_params` to fix the following warning
on a MT8173 Chromebook (mt8173-elm-hana):
[ 356.775250] ------------[ cut here ]------------
[ 356.784543] memcpy: detected field-spanning write (size 6) of single field "wildcard\_ssid\_tlv->ssid" at drivers/net/wireless/marvell/mwifiex/scan.c:904 (size 1)
[ 356.813403] WARNING: CPU: 3 PID: 742 at drivers/net/wireless/marvell/mwifiex/scan.c:904 mwifiex\_scan\_networks+0x4fc/0xf28 [mwifiex]
The "(size 6)" above is exactly the length of the SSID of the network
this device was connected to. The source of the warning looks like:
ssid\_len = user\_scan\_in->ssid\_list[i].ssid\_len;
[...]
memcpy(wildcard\_ssid\_tlv->ssid,
user\_scan\_in->ssid\_list[i].ssid, ssid\_len);
There is a #define WILDCARD\_SSID\_TLV\_MAX\_SIZE that uses sizeof() on this
struct, but it already didn't account for the size of the one-element
array, so it doesn't need to be changed.
Fixes: 5e6e3a92b9a4 ("wireless: mwifiex: initial commit for Marvell mwifiex driver")
Signed-off-by: Alper Nebi Yasak <alpernebiyasak@gmail.com>
Acked-by: Brian Norris <briannorris@chromium.org>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak@gmail.com](https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak%40gmail.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a09760c513ae0f98c7082a1deace7fb6284ee866)

| -rw-r--r-- | [drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/marvell/mwifiex/fw.h?id=a09760c513ae0f98c7082a1deace7fb6284ee866) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/wireless/marvell/mwifiex/fw.h b/drivers/net/wireless/marvell/mwifiex/fw.hindex bfa482cf464ffc..c8bf6e559dc56c 100644--- a/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=9635f7f4d45a12a747d0a241450d677dcf3bb696)+++ b/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=a09760c513ae0f98c7082a1deace7fb6284ee866)@@ -853,7 +853,7 @@ struct mwifiex\_ietypes\_chanstats { struct mwifiex\_ie\_types\_wildcard\_ssid\_params { struct mwifiex\_ie\_types\_header header; u8 max\_ssid\_length;- u8 ssid[1];+ u8 ssid[]; } \_\_packed;  #define TSF\_DATA\_SIZE 8 |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:12:28 +0000



=== Content from git.kernel.org_cdbee05c_20250114_181352.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d241a139c2e9f8a479f25c75ebd5391e6a448500)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d241a139c2e9f8a479f25c75ebd5391e6a448500)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d241a139c2e9f8a479f25c75ebd5391e6a448500)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d241a139c2e9f8a479f25c75ebd5391e6a448500)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Alper Nebi Yasak <alpernebiyasak@gmail.com> | 2024-10-08 01:20:54 +0300 |
| --- | --- | --- |
| committer | Kalle Valo <kvalo@kernel.org> | 2024-10-17 19:50:17 +0300 |
| commit | [d241a139c2e9f8a479f25c75ebd5391e6a448500](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d241a139c2e9f8a479f25c75ebd5391e6a448500) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d241a139c2e9f8a479f25c75ebd5391e6a448500)) | |
| tree | [fca65e2ce76d707aad8e8cb31da8bf14f6c19eb8](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d241a139c2e9f8a479f25c75ebd5391e6a448500) | |
| parent | [7cc7267a01631f7379c751078115ac6614f9529e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7cc7267a01631f7379c751078115ac6614f9529e) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d241a139c2e9f8a479f25c75ebd5391e6a448500&id2=7cc7267a01631f7379c751078115ac6614f9529e)) | |
| download | [linux-d241a139c2e9f8a479f25c75ebd5391e6a448500.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d241a139c2e9f8a479f25c75ebd5391e6a448500.tar.gz) | |

wifi: mwifiex: Fix memcpy() field-spanning write warning in mwifiex\_config\_scan()Replace one-element array with a flexible-array member in `struct
mwifiex\_ie\_types\_wildcard\_ssid\_params` to fix the following warning
on a MT8173 Chromebook (mt8173-elm-hana):
[ 356.775250] ------------[ cut here ]------------
[ 356.784543] memcpy: detected field-spanning write (size 6) of single field "wildcard\_ssid\_tlv->ssid" at drivers/net/wireless/marvell/mwifiex/scan.c:904 (size 1)
[ 356.813403] WARNING: CPU: 3 PID: 742 at drivers/net/wireless/marvell/mwifiex/scan.c:904 mwifiex\_scan\_networks+0x4fc/0xf28 [mwifiex]
The "(size 6)" above is exactly the length of the SSID of the network
this device was connected to. The source of the warning looks like:
ssid\_len = user\_scan\_in->ssid\_list[i].ssid\_len;
[...]
memcpy(wildcard\_ssid\_tlv->ssid,
user\_scan\_in->ssid\_list[i].ssid, ssid\_len);
There is a #define WILDCARD\_SSID\_TLV\_MAX\_SIZE that uses sizeof() on this
struct, but it already didn't account for the size of the one-element
array, so it doesn't need to be changed.
Fixes: 5e6e3a92b9a4 ("wireless: mwifiex: initial commit for Marvell mwifiex driver")
Signed-off-by: Alper Nebi Yasak <alpernebiyasak@gmail.com>
Acked-by: Brian Norris <briannorris@chromium.org>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak@gmail.com](https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak%40gmail.com)
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d241a139c2e9f8a479f25c75ebd5391e6a448500)

| -rw-r--r-- | [drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/marvell/mwifiex/fw.h?id=d241a139c2e9f8a479f25c75ebd5391e6a448500) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/wireless/marvell/mwifiex/fw.h b/drivers/net/wireless/marvell/mwifiex/fw.hindex d03129d5d24e3d..4a96281792cc1a 100644--- a/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=7cc7267a01631f7379c751078115ac6614f9529e)+++ b/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=d241a139c2e9f8a479f25c75ebd5391e6a448500)@@ -875,7 +875,7 @@ struct mwifiex\_ietypes\_chanstats { struct mwifiex\_ie\_types\_wildcard\_ssid\_params { struct mwifiex\_ie\_types\_header header; u8 max\_ssid\_length;- u8 ssid[1];+ u8 ssid[]; } \_\_packed;  #define TSF\_DATA\_SIZE 8 |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:12:30 +0000



=== Content from git.kernel.org_d92f02f3_20250114_181349.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=581261b2d6fdb4237b24fa13f5a5f87bf2861f2c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=581261b2d6fdb4237b24fa13f5a5f87bf2861f2c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=581261b2d6fdb4237b24fa13f5a5f87bf2861f2c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=581261b2d6fdb4237b24fa13f5a5f87bf2861f2c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Alper Nebi Yasak <alpernebiyasak@gmail.com> | 2024-10-08 01:20:54 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:50:55 +0100 |
| commit | [581261b2d6fdb4237b24fa13f5a5f87bf2861f2c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=581261b2d6fdb4237b24fa13f5a5f87bf2861f2c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=581261b2d6fdb4237b24fa13f5a5f87bf2861f2c)) | |
| tree | [b508c8816c5962eba35755833d6478bc4a9b3a77](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=581261b2d6fdb4237b24fa13f5a5f87bf2861f2c) | |
| parent | [7f23fb2e0a156ac8a33f052379ef7790d09145cf](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7f23fb2e0a156ac8a33f052379ef7790d09145cf) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=581261b2d6fdb4237b24fa13f5a5f87bf2861f2c&id2=7f23fb2e0a156ac8a33f052379ef7790d09145cf)) | |
| download | [linux-581261b2d6fdb4237b24fa13f5a5f87bf2861f2c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-581261b2d6fdb4237b24fa13f5a5f87bf2861f2c.tar.gz) | |

wifi: mwifiex: Fix memcpy() field-spanning write warning in mwifiex\_config\_scan()[ Upstream commit d241a139c2e9f8a479f25c75ebd5391e6a448500 ]
Replace one-element array with a flexible-array member in `struct
mwifiex\_ie\_types\_wildcard\_ssid\_params` to fix the following warning
on a MT8173 Chromebook (mt8173-elm-hana):
[ 356.775250] ------------[ cut here ]------------
[ 356.784543] memcpy: detected field-spanning write (size 6) of single field "wildcard\_ssid\_tlv->ssid" at drivers/net/wireless/marvell/mwifiex/scan.c:904 (size 1)
[ 356.813403] WARNING: CPU: 3 PID: 742 at drivers/net/wireless/marvell/mwifiex/scan.c:904 mwifiex\_scan\_networks+0x4fc/0xf28 [mwifiex]
The "(size 6)" above is exactly the length of the SSID of the network
this device was connected to. The source of the warning looks like:
ssid\_len = user\_scan\_in->ssid\_list[i].ssid\_len;
[...]
memcpy(wildcard\_ssid\_tlv->ssid,
user\_scan\_in->ssid\_list[i].ssid, ssid\_len);
There is a #define WILDCARD\_SSID\_TLV\_MAX\_SIZE that uses sizeof() on this
struct, but it already didn't account for the size of the one-element
array, so it doesn't need to be changed.
Fixes: 5e6e3a92b9a4 ("wireless: mwifiex: initial commit for Marvell mwifiex driver")
Signed-off-by: Alper Nebi Yasak <alpernebiyasak@gmail.com>
Acked-by: Brian Norris <briannorris@chromium.org>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak@gmail.com](https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak%40gmail.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=581261b2d6fdb4237b24fa13f5a5f87bf2861f2c)

| -rw-r--r-- | [drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/marvell/mwifiex/fw.h?id=581261b2d6fdb4237b24fa13f5a5f87bf2861f2c) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/wireless/marvell/mwifiex/fw.h b/drivers/net/wireless/marvell/mwifiex/fw.hindex 7779a3a1394460..86eebe4182644f 100644--- a/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=7f23fb2e0a156ac8a33f052379ef7790d09145cf)+++ b/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=581261b2d6fdb4237b24fa13f5a5f87bf2861f2c)@@ -854,7 +854,7 @@ struct mwifiex\_ietypes\_chanstats { struct mwifiex\_ie\_types\_wildcard\_ssid\_params { struct mwifiex\_ie\_types\_header header; u8 max\_ssid\_length;- u8 ssid[1];+ u8 ssid[]; } \_\_packed;  #define TSF\_DATA\_SIZE 8 |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:12:26 +0000



=== Content from git.kernel.org_1175cab8_20250114_181352.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c4698ef8c42e02782604bf4f8a489dbf6b0c1365)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c4698ef8c42e02782604bf4f8a489dbf6b0c1365)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c4698ef8c42e02782604bf4f8a489dbf6b0c1365)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c4698ef8c42e02782604bf4f8a489dbf6b0c1365)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Alper Nebi Yasak <alpernebiyasak@gmail.com> | 2024-10-08 01:20:54 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-09 10:32:04 +0100 |
| commit | [c4698ef8c42e02782604bf4f8a489dbf6b0c1365](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c4698ef8c42e02782604bf4f8a489dbf6b0c1365) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c4698ef8c42e02782604bf4f8a489dbf6b0c1365)) | |
| tree | [2eabf94dbe418adc9383930f437718b250c0a6ea](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c4698ef8c42e02782604bf4f8a489dbf6b0c1365) | |
| parent | [557e07a7a487dbca27e2ce06ac49309320f61835](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=557e07a7a487dbca27e2ce06ac49309320f61835) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c4698ef8c42e02782604bf4f8a489dbf6b0c1365&id2=557e07a7a487dbca27e2ce06ac49309320f61835)) | |
| download | [linux-c4698ef8c42e02782604bf4f8a489dbf6b0c1365.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c4698ef8c42e02782604bf4f8a489dbf6b0c1365.tar.gz) | |

wifi: mwifiex: Fix memcpy() field-spanning write warning in mwifiex\_config\_scan()[ Upstream commit d241a139c2e9f8a479f25c75ebd5391e6a448500 ]
Replace one-element array with a flexible-array member in `struct
mwifiex\_ie\_types\_wildcard\_ssid\_params` to fix the following warning
on a MT8173 Chromebook (mt8173-elm-hana):
[ 356.775250] ------------[ cut here ]------------
[ 356.784543] memcpy: detected field-spanning write (size 6) of single field "wildcard\_ssid\_tlv->ssid" at drivers/net/wireless/marvell/mwifiex/scan.c:904 (size 1)
[ 356.813403] WARNING: CPU: 3 PID: 742 at drivers/net/wireless/marvell/mwifiex/scan.c:904 mwifiex\_scan\_networks+0x4fc/0xf28 [mwifiex]
The "(size 6)" above is exactly the length of the SSID of the network
this device was connected to. The source of the warning looks like:
ssid\_len = user\_scan\_in->ssid\_list[i].ssid\_len;
[...]
memcpy(wildcard\_ssid\_tlv->ssid,
user\_scan\_in->ssid\_list[i].ssid, ssid\_len);
There is a #define WILDCARD\_SSID\_TLV\_MAX\_SIZE that uses sizeof() on this
struct, but it already didn't account for the size of the one-element
array, so it doesn't need to be changed.
Fixes: 5e6e3a92b9a4 ("wireless: mwifiex: initial commit for Marvell mwifiex driver")
Signed-off-by: Alper Nebi Yasak <alpernebiyasak@gmail.com>
Acked-by: Brian Norris <briannorris@chromium.org>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak@gmail.com](https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak%40gmail.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c4698ef8c42e02782604bf4f8a489dbf6b0c1365)

| -rw-r--r-- | [drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/marvell/mwifiex/fw.h?id=c4698ef8c42e02782604bf4f8a489dbf6b0c1365) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/wireless/marvell/mwifiex/fw.h b/drivers/net/wireless/marvell/mwifiex/fw.hindex a3be37526697b4..7b06a6d57ffb0b 100644--- a/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=557e07a7a487dbca27e2ce06ac49309320f61835)+++ b/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=c4698ef8c42e02782604bf4f8a489dbf6b0c1365)@@ -842,7 +842,7 @@ struct mwifiex\_ietypes\_chanstats { struct mwifiex\_ie\_types\_wildcard\_ssid\_params { struct mwifiex\_ie\_types\_header header; u8 max\_ssid\_length;- u8 ssid[1];+ u8 ssid[]; } \_\_packed;  #define TSF\_DATA\_SIZE 8 |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:12:29 +0000



=== Content from git.kernel.org_afa1506c_20250114_181348.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1de0ca1d7320a645ba2ee5954f64be08935b002a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1de0ca1d7320a645ba2ee5954f64be08935b002a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1de0ca1d7320a645ba2ee5954f64be08935b002a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1de0ca1d7320a645ba2ee5954f64be08935b002a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Alper Nebi Yasak <alpernebiyasak@gmail.com> | 2024-10-08 01:20:54 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:44:26 +0100 |
| commit | [1de0ca1d7320a645ba2ee5954f64be08935b002a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1de0ca1d7320a645ba2ee5954f64be08935b002a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1de0ca1d7320a645ba2ee5954f64be08935b002a)) | |
| tree | [b46ce9102dd8a8cf49fb4d63cf90f920a00d97c3](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1de0ca1d7320a645ba2ee5954f64be08935b002a) | |
| parent | [de94dc8a1f478da67e9476db579e51f6077e2e58](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=de94dc8a1f478da67e9476db579e51f6077e2e58) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1de0ca1d7320a645ba2ee5954f64be08935b002a&id2=de94dc8a1f478da67e9476db579e51f6077e2e58)) | |
| download | [linux-1de0ca1d7320a645ba2ee5954f64be08935b002a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1de0ca1d7320a645ba2ee5954f64be08935b002a.tar.gz) | |

wifi: mwifiex: Fix memcpy() field-spanning write warning in mwifiex\_config\_scan()[ Upstream commit d241a139c2e9f8a479f25c75ebd5391e6a448500 ]
Replace one-element array with a flexible-array member in `struct
mwifiex\_ie\_types\_wildcard\_ssid\_params` to fix the following warning
on a MT8173 Chromebook (mt8173-elm-hana):
[ 356.775250] ------------[ cut here ]------------
[ 356.784543] memcpy: detected field-spanning write (size 6) of single field "wildcard\_ssid\_tlv->ssid" at drivers/net/wireless/marvell/mwifiex/scan.c:904 (size 1)
[ 356.813403] WARNING: CPU: 3 PID: 742 at drivers/net/wireless/marvell/mwifiex/scan.c:904 mwifiex\_scan\_networks+0x4fc/0xf28 [mwifiex]
The "(size 6)" above is exactly the length of the SSID of the network
this device was connected to. The source of the warning looks like:
ssid\_len = user\_scan\_in->ssid\_list[i].ssid\_len;
[...]
memcpy(wildcard\_ssid\_tlv->ssid,
user\_scan\_in->ssid\_list[i].ssid, ssid\_len);
There is a #define WILDCARD\_SSID\_TLV\_MAX\_SIZE that uses sizeof() on this
struct, but it already didn't account for the size of the one-element
array, so it doesn't need to be changed.
Fixes: 5e6e3a92b9a4 ("wireless: mwifiex: initial commit for Marvell mwifiex driver")
Signed-off-by: Alper Nebi Yasak <alpernebiyasak@gmail.com>
Acked-by: Brian Norris <briannorris@chromium.org>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak@gmail.com](https://patch.msgid.link/20241007222301.24154-1-alpernebiyasak%40gmail.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1de0ca1d7320a645ba2ee5954f64be08935b002a)

| -rw-r--r-- | [drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/marvell/mwifiex/fw.h?id=1de0ca1d7320a645ba2ee5954f64be08935b002a) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/net/wireless/marvell/mwifiex/fw.h b/drivers/net/wireless/marvell/mwifiex/fw.hindex bfa482cf464ffc..c8bf6e559dc56c 100644--- a/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=de94dc8a1f478da67e9476db579e51f6077e2e58)+++ b/[drivers/net/wireless/marvell/mwifiex/fw.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/marvell/mwifiex/fw.h?id=1de0ca1d7320a645ba2ee5954f64be08935b002a)@@ -853,7 +853,7 @@ struct mwifiex\_ietypes\_chanstats { struct mwifiex\_ie\_types\_wildcard\_ssid\_params { struct mwifiex\_ie\_types\_header header; u8 max\_ssid\_length;- u8 ssid[1];+ u8 ssid[]; } \_\_packed;  #define TSF\_DATA\_SIZE 8 |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:12:25 +0000


