=== Content from git.kernel.org_00b44329_20250114_185726.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c5327720a4655303ffa3f632d86ee205dd783f32)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c5327720a4655303ffa3f632d86ee205dd783f32)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c5327720a4655303ffa3f632d86ee205dd783f32)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c5327720a4655303ffa3f632d86ee205dd783f32)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp> | 2024-11-23 22:28:34 +0900 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:51:31 +0100 |
| commit | [c5327720a4655303ffa3f632d86ee205dd783f32](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c5327720a4655303ffa3f632d86ee205dd783f32) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c5327720a4655303ffa3f632d86ee205dd783f32)) | |
| tree | [d3e6c9d6ba6c3535337e421a785dbeb4b5668f8e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c5327720a4655303ffa3f632d86ee205dd783f32) | |
| parent | [c8504c0f1f80aafa4e0472e81eee871abcf310ea](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c8504c0f1f80aafa4e0472e81eee871abcf310ea) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c5327720a4655303ffa3f632d86ee205dd783f32&id2=c8504c0f1f80aafa4e0472e81eee871abcf310ea)) | |
| download | [linux-c5327720a4655303ffa3f632d86ee205dd783f32.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c5327720a4655303ffa3f632d86ee205dd783f32.tar.gz) | |

ocfs2: free inode when ocfs2\_get\_init\_inode() fails[ Upstream commit 965b5dd1894f4525f38c1b5f99b0106a07dbb5db ]
syzbot is reporting busy inodes after unmount, for commit 9c89fe0af826
("ocfs2: Handle error from dquot\_initialize()") forgot to call iput() when
new\_inode() succeeded and dquot\_initialize() failed.
Link: [https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525@I-love.SAKURA.ne.jp](https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525%40I-love.SAKURA.ne.jp)
Fixes: 9c89fe0af826 ("ocfs2: Handle error from dquot\_initialize()")
Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
Reported-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=0af00f6a2cba2058b5db
Tested-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Reviewed-by: Joseph Qi <joseph.qi@linux.alibaba.com>
Cc: Mark Fasheh <mark@fasheh.com>
Cc: Joel Becker <jlbec@evilplan.org>
Cc: Junxiao Bi <junxiao.bi@oracle.com>
Cc: Changwei Ge <gechangwei@live.cn>
Cc: Jun Piao <piaojun@huawei.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c5327720a4655303ffa3f632d86ee205dd783f32)

| -rw-r--r-- | [fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/ocfs2/namei.c?id=c5327720a4655303ffa3f632d86ee205dd783f32) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/fs/ocfs2/namei.c b/fs/ocfs2/namei.cindex 69aff1d5946d22..272dbc13d3bc2b 100644--- a/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=c8504c0f1f80aafa4e0472e81eee871abcf310ea)+++ b/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=c5327720a4655303ffa3f632d86ee205dd783f32)@@ -200,8 +200,10 @@ static struct inode \*ocfs2\_get\_init\_inode(struct inode \*dir, umode\_t mode) mode = mode\_strip\_sgid(&init\_user\_ns, dir, mode); inode\_init\_owner(&init\_user\_ns, inode, dir, mode); status = dquot\_initialize(inode);- if (status)+ if (status) {+ iput(inode); return ERR\_PTR(status);+ }  return inode; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:56:03 +0000



=== Content from git.kernel.org_2e76fee7_20250114_185724.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=965b5dd1894f4525f38c1b5f99b0106a07dbb5db)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=965b5dd1894f4525f38c1b5f99b0106a07dbb5db)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=965b5dd1894f4525f38c1b5f99b0106a07dbb5db)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=965b5dd1894f4525f38c1b5f99b0106a07dbb5db)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp> | 2024-11-23 22:28:34 +0900 |
| --- | --- | --- |
| committer | Andrew Morton <akpm@linux-foundation.org> | 2024-12-05 19:54:43 -0800 |
| commit | [965b5dd1894f4525f38c1b5f99b0106a07dbb5db](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=965b5dd1894f4525f38c1b5f99b0106a07dbb5db) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=965b5dd1894f4525f38c1b5f99b0106a07dbb5db)) | |
| tree | [821a6d917266e4498c53b24366999b9910878a76](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=965b5dd1894f4525f38c1b5f99b0106a07dbb5db) | |
| parent | [985ebec4ab0a28bb5910c3b1481a40fbf7f9e61d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=985ebec4ab0a28bb5910c3b1481a40fbf7f9e61d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=965b5dd1894f4525f38c1b5f99b0106a07dbb5db&id2=985ebec4ab0a28bb5910c3b1481a40fbf7f9e61d)) | |
| download | [linux-965b5dd1894f4525f38c1b5f99b0106a07dbb5db.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-965b5dd1894f4525f38c1b5f99b0106a07dbb5db.tar.gz) | |

ocfs2: free inode when ocfs2\_get\_init\_inode() failssyzbot is reporting busy inodes after unmount, for commit 9c89fe0af826
("ocfs2: Handle error from dquot\_initialize()") forgot to call iput() when
new\_inode() succeeded and dquot\_initialize() failed.
Link: [https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525@I-love.SAKURA.ne.jp](https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525%40I-love.SAKURA.ne.jp)
Fixes: 9c89fe0af826 ("ocfs2: Handle error from dquot\_initialize()")
Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
Reported-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=0af00f6a2cba2058b5db
Tested-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Reviewed-by: Joseph Qi <joseph.qi@linux.alibaba.com>
Cc: Mark Fasheh <mark@fasheh.com>
Cc: Joel Becker <jlbec@evilplan.org>
Cc: Junxiao Bi <junxiao.bi@oracle.com>
Cc: Changwei Ge <gechangwei@live.cn>
Cc: Jun Piao <piaojun@huawei.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=965b5dd1894f4525f38c1b5f99b0106a07dbb5db)

| -rw-r--r-- | [fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/ocfs2/namei.c?id=965b5dd1894f4525f38c1b5f99b0106a07dbb5db) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/fs/ocfs2/namei.c b/fs/ocfs2/namei.cindex 59c92353151a85..5550f8afa43802 100644--- a/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=985ebec4ab0a28bb5910c3b1481a40fbf7f9e61d)+++ b/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=965b5dd1894f4525f38c1b5f99b0106a07dbb5db)@@ -200,8 +200,10 @@ static struct inode \*ocfs2\_get\_init\_inode(struct inode \*dir, umode\_t mode) mode = mode\_strip\_sgid(&nop\_mnt\_idmap, dir, mode); inode\_init\_owner(&nop\_mnt\_idmap, inode, dir, mode); status = dquot\_initialize(inode);- if (status)+ if (status) {+ iput(inode); return ERR\_PTR(status);+ }  return inode; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:56:02 +0000



=== Content from git.kernel.org_d4d6c142_20250114_185725.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=9c19ea59965ebb482e227532f7bbb01792fb028c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9c19ea59965ebb482e227532f7bbb01792fb028c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9c19ea59965ebb482e227532f7bbb01792fb028c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9c19ea59965ebb482e227532f7bbb01792fb028c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp> | 2024-11-23 22:28:34 +0900 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:48:22 +0100 |
| commit | [9c19ea59965ebb482e227532f7bbb01792fb028c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9c19ea59965ebb482e227532f7bbb01792fb028c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=9c19ea59965ebb482e227532f7bbb01792fb028c)) | |
| tree | [c25c4ecfa06e2d64cd24c040a381b9f60493b2a0](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9c19ea59965ebb482e227532f7bbb01792fb028c) | |
| parent | [e0c6ce8424095c2da32a063d3fc027494c689817](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e0c6ce8424095c2da32a063d3fc027494c689817) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9c19ea59965ebb482e227532f7bbb01792fb028c&id2=e0c6ce8424095c2da32a063d3fc027494c689817)) | |
| download | [linux-9c19ea59965ebb482e227532f7bbb01792fb028c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-9c19ea59965ebb482e227532f7bbb01792fb028c.tar.gz) | |

ocfs2: free inode when ocfs2\_get\_init\_inode() fails[ Upstream commit 965b5dd1894f4525f38c1b5f99b0106a07dbb5db ]
syzbot is reporting busy inodes after unmount, for commit 9c89fe0af826
("ocfs2: Handle error from dquot\_initialize()") forgot to call iput() when
new\_inode() succeeded and dquot\_initialize() failed.
Link: [https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525@I-love.SAKURA.ne.jp](https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525%40I-love.SAKURA.ne.jp)
Fixes: 9c89fe0af826 ("ocfs2: Handle error from dquot\_initialize()")
Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
Reported-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=0af00f6a2cba2058b5db
Tested-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Reviewed-by: Joseph Qi <joseph.qi@linux.alibaba.com>
Cc: Mark Fasheh <mark@fasheh.com>
Cc: Joel Becker <jlbec@evilplan.org>
Cc: Junxiao Bi <junxiao.bi@oracle.com>
Cc: Changwei Ge <gechangwei@live.cn>
Cc: Jun Piao <piaojun@huawei.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9c19ea59965ebb482e227532f7bbb01792fb028c)

| -rw-r--r-- | [fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/ocfs2/namei.c?id=9c19ea59965ebb482e227532f7bbb01792fb028c) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/fs/ocfs2/namei.c b/fs/ocfs2/namei.cindex 7bdda635ca80e4..0e0f844dcf7f45 100644--- a/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=e0c6ce8424095c2da32a063d3fc027494c689817)+++ b/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=9c19ea59965ebb482e227532f7bbb01792fb028c)@@ -201,8 +201,10 @@ static struct inode \*ocfs2\_get\_init\_inode(struct inode \*dir, umode\_t mode) mode = mode\_strip\_sgid(dir, mode); inode\_init\_owner(inode, dir, mode); status = dquot\_initialize(inode);- if (status)+ if (status) {+ iput(inode); return ERR\_PTR(status);+ }  return inode; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:56:02 +0000



=== Content from git.kernel.org_69dd34ed_20250114_185723.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=03db61c43c8e2729896fda6b9a95c7fb5c875c20)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=03db61c43c8e2729896fda6b9a95c7fb5c875c20)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=03db61c43c8e2729896fda6b9a95c7fb5c875c20)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=03db61c43c8e2729896fda6b9a95c7fb5c875c20)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp> | 2024-11-23 22:28:34 +0900 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 20:03:18 +0100 |
| commit | [03db61c43c8e2729896fda6b9a95c7fb5c875c20](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=03db61c43c8e2729896fda6b9a95c7fb5c875c20) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=03db61c43c8e2729896fda6b9a95c7fb5c875c20)) | |
| tree | [aafeadd784c398bd00e3285c502077ce414b357c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=03db61c43c8e2729896fda6b9a95c7fb5c875c20) | |
| parent | [b94c2f7a1a238c7c4e430671bf25b75ed96e430a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b94c2f7a1a238c7c4e430671bf25b75ed96e430a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=03db61c43c8e2729896fda6b9a95c7fb5c875c20&id2=b94c2f7a1a238c7c4e430671bf25b75ed96e430a)) | |
| download | [linux-03db61c43c8e2729896fda6b9a95c7fb5c875c20.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-03db61c43c8e2729896fda6b9a95c7fb5c875c20.tar.gz) | |

ocfs2: free inode when ocfs2\_get\_init\_inode() fails[ Upstream commit 965b5dd1894f4525f38c1b5f99b0106a07dbb5db ]
syzbot is reporting busy inodes after unmount, for commit 9c89fe0af826
("ocfs2: Handle error from dquot\_initialize()") forgot to call iput() when
new\_inode() succeeded and dquot\_initialize() failed.
Link: [https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525@I-love.SAKURA.ne.jp](https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525%40I-love.SAKURA.ne.jp)
Fixes: 9c89fe0af826 ("ocfs2: Handle error from dquot\_initialize()")
Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
Reported-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=0af00f6a2cba2058b5db
Tested-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Reviewed-by: Joseph Qi <joseph.qi@linux.alibaba.com>
Cc: Mark Fasheh <mark@fasheh.com>
Cc: Joel Becker <jlbec@evilplan.org>
Cc: Junxiao Bi <junxiao.bi@oracle.com>
Cc: Changwei Ge <gechangwei@live.cn>
Cc: Jun Piao <piaojun@huawei.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=03db61c43c8e2729896fda6b9a95c7fb5c875c20)

| -rw-r--r-- | [fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/ocfs2/namei.c?id=03db61c43c8e2729896fda6b9a95c7fb5c875c20) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/fs/ocfs2/namei.c b/fs/ocfs2/namei.cindex 59c92353151a85..5550f8afa43802 100644--- a/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=b94c2f7a1a238c7c4e430671bf25b75ed96e430a)+++ b/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=03db61c43c8e2729896fda6b9a95c7fb5c875c20)@@ -200,8 +200,10 @@ static struct inode \*ocfs2\_get\_init\_inode(struct inode \*dir, umode\_t mode) mode = mode\_strip\_sgid(&nop\_mnt\_idmap, dir, mode); inode\_init\_owner(&nop\_mnt\_idmap, inode, dir, mode); status = dquot\_initialize(inode);- if (status)+ if (status) {+ iput(inode); return ERR\_PTR(status);+ }  return inode; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:56:00 +0000



=== Content from git.kernel.org_04b0c2c1_20250114_185725.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a84d507d3290aca249b44ae992af9e10590cc5f6)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a84d507d3290aca249b44ae992af9e10590cc5f6)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a84d507d3290aca249b44ae992af9e10590cc5f6)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a84d507d3290aca249b44ae992af9e10590cc5f6)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp> | 2024-11-23 22:28:34 +0900 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:59:50 +0100 |
| commit | [a84d507d3290aca249b44ae992af9e10590cc5f6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a84d507d3290aca249b44ae992af9e10590cc5f6) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a84d507d3290aca249b44ae992af9e10590cc5f6)) | |
| tree | [62fa3e4008bec6815dc69cf46ead3769ffebfbb6](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a84d507d3290aca249b44ae992af9e10590cc5f6) | |
| parent | [6acd8e87b6e13a4bc512e2b534ed422c5e14ba69](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6acd8e87b6e13a4bc512e2b534ed422c5e14ba69) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a84d507d3290aca249b44ae992af9e10590cc5f6&id2=6acd8e87b6e13a4bc512e2b534ed422c5e14ba69)) | |
| download | [linux-a84d507d3290aca249b44ae992af9e10590cc5f6.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a84d507d3290aca249b44ae992af9e10590cc5f6.tar.gz) | |

ocfs2: free inode when ocfs2\_get\_init\_inode() fails[ Upstream commit 965b5dd1894f4525f38c1b5f99b0106a07dbb5db ]
syzbot is reporting busy inodes after unmount, for commit 9c89fe0af826
("ocfs2: Handle error from dquot\_initialize()") forgot to call iput() when
new\_inode() succeeded and dquot\_initialize() failed.
Link: [https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525@I-love.SAKURA.ne.jp](https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525%40I-love.SAKURA.ne.jp)
Fixes: 9c89fe0af826 ("ocfs2: Handle error from dquot\_initialize()")
Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
Reported-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=0af00f6a2cba2058b5db
Tested-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Reviewed-by: Joseph Qi <joseph.qi@linux.alibaba.com>
Cc: Mark Fasheh <mark@fasheh.com>
Cc: Joel Becker <jlbec@evilplan.org>
Cc: Junxiao Bi <junxiao.bi@oracle.com>
Cc: Changwei Ge <gechangwei@live.cn>
Cc: Jun Piao <piaojun@huawei.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a84d507d3290aca249b44ae992af9e10590cc5f6)

| -rw-r--r-- | [fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/ocfs2/namei.c?id=a84d507d3290aca249b44ae992af9e10590cc5f6) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/fs/ocfs2/namei.c b/fs/ocfs2/namei.cindex 21b3d5b9be6030..4e6d8a3f727df2 100644--- a/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=6acd8e87b6e13a4bc512e2b534ed422c5e14ba69)+++ b/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=a84d507d3290aca249b44ae992af9e10590cc5f6)@@ -200,8 +200,10 @@ static struct inode \*ocfs2\_get\_init\_inode(struct inode \*dir, umode\_t mode) mode = mode\_strip\_sgid(&nop\_mnt\_idmap, dir, mode); inode\_init\_owner(&nop\_mnt\_idmap, inode, dir, mode); status = dquot\_initialize(inode);- if (status)+ if (status) {+ iput(inode); return ERR\_PTR(status);+ }  return inode; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:56:02 +0000



=== Content from git.kernel.org_ee1bcc04_20250114_185723.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp> | 2024-11-23 22:28:34 +0900 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:54:30 +0100 |
| commit | [67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15)) | |
| tree | [d585ed42a8b29a6403fd66fbfa49f42c9e736db5](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15) | |
| parent | [5abef60d14818a1d0e24f22bc58d1923eb40b082](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5abef60d14818a1d0e24f22bc58d1923eb40b082) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15&id2=5abef60d14818a1d0e24f22bc58d1923eb40b082)) | |
| download | [linux-67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15.tar.gz) | |

ocfs2: free inode when ocfs2\_get\_init\_inode() fails[ Upstream commit 965b5dd1894f4525f38c1b5f99b0106a07dbb5db ]
syzbot is reporting busy inodes after unmount, for commit 9c89fe0af826
("ocfs2: Handle error from dquot\_initialize()") forgot to call iput() when
new\_inode() succeeded and dquot\_initialize() failed.
Link: [https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525@I-love.SAKURA.ne.jp](https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525%40I-love.SAKURA.ne.jp)
Fixes: 9c89fe0af826 ("ocfs2: Handle error from dquot\_initialize()")
Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
Reported-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=0af00f6a2cba2058b5db
Tested-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Reviewed-by: Joseph Qi <joseph.qi@linux.alibaba.com>
Cc: Mark Fasheh <mark@fasheh.com>
Cc: Joel Becker <jlbec@evilplan.org>
Cc: Junxiao Bi <junxiao.bi@oracle.com>
Cc: Changwei Ge <gechangwei@live.cn>
Cc: Jun Piao <piaojun@huawei.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15)

| -rw-r--r-- | [fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/ocfs2/namei.c?id=67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/fs/ocfs2/namei.c b/fs/ocfs2/namei.cindex 8a0fa51c9ac689..63b06377f6305b 100644--- a/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=5abef60d14818a1d0e24f22bc58d1923eb40b082)+++ b/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=67c2c6d0564ca05348ba4f8f6eaf7a0713f56c15)@@ -200,8 +200,10 @@ static struct inode \*ocfs2\_get\_init\_inode(struct inode \*dir, umode\_t mode) mode = mode\_strip\_sgid(&init\_user\_ns, dir, mode); inode\_init\_owner(&init\_user\_ns, inode, dir, mode); status = dquot\_initialize(inode);- if (status)+ if (status) {+ iput(inode); return ERR\_PTR(status);+ }  return inode; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:56:00 +0000



=== Content from git.kernel.org_8646e6ac_20250114_185724.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=911fcc95b530615b484e8920741fc5e4bc4e684a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=911fcc95b530615b484e8920741fc5e4bc4e684a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=911fcc95b530615b484e8920741fc5e4bc4e684a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=911fcc95b530615b484e8920741fc5e4bc4e684a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp> | 2024-11-23 22:28:34 +0900 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:44:48 +0100 |
| commit | [911fcc95b530615b484e8920741fc5e4bc4e684a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=911fcc95b530615b484e8920741fc5e4bc4e684a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=911fcc95b530615b484e8920741fc5e4bc4e684a)) | |
| tree | [01d957d1e1cbde2f107b95371ab3a2ce9923a5c9](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=911fcc95b530615b484e8920741fc5e4bc4e684a) | |
| parent | [d0cde3911cf24e1bcdd4caa1d1b9ef57589db5a1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d0cde3911cf24e1bcdd4caa1d1b9ef57589db5a1) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=911fcc95b530615b484e8920741fc5e4bc4e684a&id2=d0cde3911cf24e1bcdd4caa1d1b9ef57589db5a1)) | |
| download | [linux-911fcc95b530615b484e8920741fc5e4bc4e684a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-911fcc95b530615b484e8920741fc5e4bc4e684a.tar.gz) | |

ocfs2: free inode when ocfs2\_get\_init\_inode() fails[ Upstream commit 965b5dd1894f4525f38c1b5f99b0106a07dbb5db ]
syzbot is reporting busy inodes after unmount, for commit 9c89fe0af826
("ocfs2: Handle error from dquot\_initialize()") forgot to call iput() when
new\_inode() succeeded and dquot\_initialize() failed.
Link: [https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525@I-love.SAKURA.ne.jp](https://lkml.kernel.org/r/e68c0224-b7c6-4784-b4fa-a9fc8c675525%40I-love.SAKURA.ne.jp)
Fixes: 9c89fe0af826 ("ocfs2: Handle error from dquot\_initialize()")
Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
Reported-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=0af00f6a2cba2058b5db
Tested-by: syzbot+0af00f6a2cba2058b5db@syzkaller.appspotmail.com
Reviewed-by: Joseph Qi <joseph.qi@linux.alibaba.com>
Cc: Mark Fasheh <mark@fasheh.com>
Cc: Joel Becker <jlbec@evilplan.org>
Cc: Junxiao Bi <junxiao.bi@oracle.com>
Cc: Changwei Ge <gechangwei@live.cn>
Cc: Jun Piao <piaojun@huawei.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=911fcc95b530615b484e8920741fc5e4bc4e684a)

| -rw-r--r-- | [fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/ocfs2/namei.c?id=911fcc95b530615b484e8920741fc5e4bc4e684a) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/fs/ocfs2/namei.c b/fs/ocfs2/namei.cindex 34b84eb299e8ec..5e87608cb987d2 100644--- a/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=d0cde3911cf24e1bcdd4caa1d1b9ef57589db5a1)+++ b/[fs/ocfs2/namei.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/ocfs2/namei.c?id=911fcc95b530615b484e8920741fc5e4bc4e684a)@@ -201,8 +201,10 @@ static struct inode \*ocfs2\_get\_init\_inode(struct inode \*dir, umode\_t mode) mode = mode\_strip\_sgid(dir, mode); inode\_init\_owner(inode, dir, mode); status = dquot\_initialize(inode);- if (status)+ if (status) {+ iput(inode); return ERR\_PTR(status);+ }  return inode; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:56:01 +0000


