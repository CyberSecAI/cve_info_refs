=== Content from github.com_fa9a60a2_20250114_202837.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcontainerbuildsystem%2Fcachi2%2Fcommit%2Fd6638e5e14474061a1ab1ba5d0ee72f58b9a11a9)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcontainerbuildsystem%2Fcachi2%2Fcommit%2Fd6638e5e14474061a1ab1ba5d0ee72f58b9a11a9)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=containerbuildsystem%2Fcachi2)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[containerbuildsystem](/containerbuildsystem)
/
**[cachi2](/containerbuildsystem/cachi2)**
Public

* [Notifications](/login?return_to=%2Fcontainerbuildsystem%2Fcachi2) You must be signed in to change notification settings
* [Fork
  28](/login?return_to=%2Fcontainerbuildsystem%2Fcachi2)
* [Star
   9](/login?return_to=%2Fcontainerbuildsystem%2Fcachi2)

* [Code](/containerbuildsystem/cachi2)
* [Issues
  34](/containerbuildsystem/cachi2/issues)
* [Pull requests
  13](/containerbuildsystem/cachi2/pulls)
* [Discussions](/containerbuildsystem/cachi2/discussions)
* [Actions](/containerbuildsystem/cachi2/actions)
* [Security](/containerbuildsystem/cachi2/security)
* [Insights](/containerbuildsystem/cachi2/pulse)

Additional navigation options

* [Code](/containerbuildsystem/cachi2)
* [Issues](/containerbuildsystem/cachi2/issues)
* [Pull requests](/containerbuildsystem/cachi2/pulls)
* [Discussions](/containerbuildsystem/cachi2/discussions)
* [Actions](/containerbuildsystem/cachi2/actions)
* [Security](/containerbuildsystem/cachi2/security)
* [Insights](/containerbuildsystem/cachi2/pulse)

## Commit

[Permalink](/containerbuildsystem/cachi2/commit/d6638e5e14474061a1ab1ba5d0ee72f58b9a11a9)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

fix(typer): do not log locals

[Browse files](/containerbuildsystem/cachi2/tree/d6638e5e14474061a1ab1ba5d0ee72f58b9a11a9)
Browse the repository at this point in the history

```
Do not log locals as they may expose secrets, which is a security risk.

Signed-off-by: Martin Basti <mbasti@redhat.com>
```

* Loading branch information

[![@MartinBasti](https://avatars.githubusercontent.com/u/20207783?s=40&v=4)](/MartinBasti)

[MartinBasti](/containerbuildsystem/cachi2/commits?author=MartinBasti "View all commits by MartinBasti")
committed
Nov 19, 2024

1 parent
[6ee35b9](/containerbuildsystem/cachi2/commit/6ee35b9a542a84cd4a9c27f7f6dc3317ec724a63)

commit d6638e5

Showing
**1 changed file**
with
**1 addition**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[cachi2/interface/cli.py](#diff-e2dcf4e4ce1090d7f3b3104fa50edcb2326829b481d1060672ddabde860bb0f1 "cachi2/interface/cli.py")

Show comments

[View file](/containerbuildsystem/cachi2/blob/d6638e5e14474061a1ab1ba5d0ee72f58b9a11a9/cachi2/interface/cli.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -22,7 +22,7 @@ |
|  |  | from cachi2.core.rooted\_path import RootedPath |
|  |  | from cachi2.interface.logging import LogLevel, setup\_logging |
|  |  |  |
|  |  | app = typer.Typer(no\_args\_is\_help=True) |
|  |  | app = typer.Typer(no\_args\_is\_help=True, pretty\_exceptions\_show\_locals=False) |
|  |  | log = logging.getLogger(\_\_name\_\_) |
|  |  |  |
|  |  | DEFAULT\_SOURCE = "." |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `d6638e5`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcontainerbuildsystem%2Fcachi2%2Fcommit%2Fd6638e5e14474061a1ab1ba5d0ee72f58b9a11a9) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from typer.tiangolo.com_e8042e1f_20250114_202839.html ===


[Skip to content](#exceptions-and-errors)

[![logo](../../img/icon.svg)](../.. "Typer")

Typer

Exceptions and Errors

Initializing search

[fastapi/typer](https://github.com/fastapi/typer "Go to repository")

* [Typer](../..)
* [Features](../../features/)
* [Learn](../)
* [Resources](../../resources/)
* [About](../../about/)
* [Release Notes](../../release-notes/)

[![logo](../../img/icon.svg)](../.. "Typer")
Typer

[fastapi/typer](https://github.com/fastapi/typer "Go to repository")

* [Typer](../..)
* [Features](../../features/)
* [Learn](../)

  Learn
  + [Environment Variables](../../environment-variables/)
  + [Virtual Environments](../../virtual-environments/)
  + [Install **Typer**](../install/)
  + [First Steps](../first-steps/)
  + [Printing and Colors](../printing/)
  + [Terminating](../terminating/)
  + [CLI Arguments](../arguments/)

    CLI Arguments
    - [Optional CLI Arguments](../arguments/optional/)
    - [CLI Arguments with Default](../arguments/default/)
    - [CLI Arguments with Help](../arguments/help/)
    - [CLI Arguments with Environment Variables](../arguments/envvar/)
    - [Other uses](../arguments/other-uses/)
  + [CLI Options](../options/)

    CLI Options
    - [CLI Options with Help](../options/help/)
    - [Required CLI Options](../options/required/)
    - [CLI Option Prompt](../options/prompt/)
    - [Password CLI Option and Confirmation Prompt](../options/password/)
    - [CLI Option Name](../options/name/)
    - [CLI Option Callback and Context](../options/callback-and-context/)
    - [Version CLI Option, `is_eager`](../options/version/)
  + [Commands](../commands/)

    Commands
    - [Command CLI Arguments](../commands/arguments/)
    - [Command CLI Options](../commands/options/)
    - [Command Help](../commands/help/)
    - [Custom Command Name](../commands/name/)
    - [Typer Callback](../commands/callback/)
    - [One or Multiple Commands](../commands/one-or-multiple/)
    - [Using the Context](../commands/context/)
  + [CLI Option autocompletion](../options-autocompletion/)
  + [CLI Parameter Types](../parameter-types/)

    CLI Parameter Types
    - [Number](../parameter-types/number/)
    - [Boolean CLI Options](../parameter-types/bool/)
    - [UUID](../parameter-types/uuid/)
    - [DateTime](../parameter-types/datetime/)
    - [Enum - Choices](../parameter-types/enum/)
    - [Path](../parameter-types/path/)
    - [File](../parameter-types/file/)
    - [Custom Types](../parameter-types/custom-types/)
  + [SubCommands - Command Groups](../subcommands/)

    SubCommands - Command Groups
    - [Add Typer](../subcommands/add-typer/)
    - [SubCommands in a Single File](../subcommands/single-file/)
    - [Nested SubCommands](../subcommands/nested-subcommands/)
    - [Sub-Typer Callback Override](../subcommands/callback-override/)
    - [SubCommand Name and Help](../subcommands/name-and-help/)
  + [Multiple Values](../multiple-values/)

    Multiple Values
    - [Multiple CLI Options](../multiple-values/multiple-options/)
    - [CLI Options with Multiple Values](../multiple-values/options-with-multiple-values/)
    - [CLI Arguments with Multiple Values](../multiple-values/arguments-with-multiple-values/)
  + [Ask with Prompt](../prompt/)
  + [Progress Bar](../progressbar/)
  + [CLI Application Directory](../app-dir/)
  + [Launching Applications](../launch/)
  + [Testing](../testing/)
  + [Using Click](../using-click/)
  + [Building a Package](../package/)
  + Exceptions and Errors

    [Exceptions and Errors](./)

    Table of contents
    - [Example Broken App](#example-broken-app)
    - [Exceptions with Rich](#exceptions-with-rich)
    - [Exceptions without Rich](#exceptions-without-rich)
    - [Disable Local Variables for Security](#disable-local-variables-for-security)
    - [Disable Short Output](#disable-short-output)
    - [Disable Pretty Exceptions](#disable-pretty-exceptions)
  + [One File Per Command](../one-file-per-command/)
  + [`typer` command](../typer-command/)
* [Resources](../../resources/)

  Resources
  + [Help Typer - Get Help](../../help-typer/)
  + [Development - Contributing](../../contributing/)
  + [Repository Management Tasks](../../management-tasks/)
* [About](../../about/)

  About
  + [Alternatives, Inspiration and Comparisons](../../alternatives/)
  + [Repository Management](../../management/)
* [Release Notes](../../release-notes/)

Table of contents

* [Example Broken App](#example-broken-app)
* [Exceptions with Rich](#exceptions-with-rich)
* [Exceptions without Rich](#exceptions-without-rich)
* [Disable Local Variables for Security](#disable-local-variables-for-security)
* [Disable Short Output](#disable-short-output)
* [Disable Pretty Exceptions](#disable-pretty-exceptions)

1. [Typer](../..)
2. [Learn](../)

# Exceptions and Errors[¶](#exceptions-and-errors "Permanent link")

When your code has errors and you run it, it will show the error and an exception.

Typer does some tricks to help you detect those errors quickly.

## Example Broken App[¶](#example-broken-app "Permanent link")

Let's take this example broken app:

Python 3.8+
```
import typer
def main(name: str = "morty"):
    print(name + 3)
if __name__ == "__main__":
    typer.run(main)

```

This code is broken because you can't sum a string and a number (`name + 3`).

## Exceptions with Rich[¶](#exceptions-with-rich "Permanent link")

If you have **Rich** installed (for example if you installed `"typer[all]"`), **Typer** will use it to automatically show you nicely printed errors.

It will **omit** all the parts of the traceback (the chain of things that called your function) that come from the internal parts in Typer and Click.

So, the error you see will be **much clearer** and simpler, to help you detect the problem in your code quickly:

```
$ python main.py
<font color="#F92672">╭──────────────── </font><font color="#F92672"><b>Traceback (most recent call last)</b></font><font color="#F92672"> ────────────────╮</font>
<font color="#F92672">│</font> <font color="#A37F4E">/home/user/code/superapp/</font><font color="#F4BF75"><b>main.py</b></font>:<font color="#66D9EF">5</font> in <font color="#A6E22E">main</font>                        <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font>    2                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>    3                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>    4 <font color="#66D9EF">def</font> <font color="#A6E22E">main</font>(name: <font color="#A1EFE4">str</font> = <font color="#F4BF75">&quot;morty&quot;</font>):                               <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F92672">❱ </font> 5 │   <font color="#A1EFE4">print</font>(name + <font color="#66D9EF">3</font>)                                          <font color="#F92672">│</font>
<font color="#F92672">│</font>    6                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>    7                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>    8 <font color="#66D9EF">if</font> <font color="#F92672">__name__</font> == <font color="#F4BF75">&quot;__main__&quot;</font>:                                   <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">╭──── locals ────╮</font>                                                <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font> name = <font color="#F4BF75">&apos;morty&apos;</font> <font color="#F4BF75">│</font>                                                <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">╰────────────────╯</font>                                                <font color="#F92672">│</font>
<font color="#F92672">╰───────────────────────────────────────────────────────────────────╯</font>
<font color="#F92672"><b>TypeError: </b></font>can only concatenate str <b>(</b>not <font color="#A6E22E">&quot;int&quot;</font><b>)</b> to str

```

## Exceptions without Rich[¶](#exceptions-without-rich "Permanent link")

If you don't have Rich installed, Typer will still do some tricks to show you the information **as clearly as possible**:

```
$ python main.py
Traceback (most recent call last):
  File "main.py", line 12, in <module>
    typer.run(main)
  File "main.py", line 8, in main
    print(name + 3)
TypeError: can only concatenate str (not "int") to str

```

## Disable Local Variables for Security[¶](#disable-local-variables-for-security "Permanent link")

If your Typer application handles **delicate information**, for example a **password**, a **key**, a **token**, then it could be problematic if the automatic errors show the value in those local variables.

This would be relevant in particular if your CLI application is being run on some CI (continuous integration) system that is recording the logs.

The default errors above, when using Rich, show a section with:

```
name = 'morty'

```

In this case, `name` is a local variable, it comes from a parameter passed to the function.

But if it was something like a password, you would have liked to hide it.

In that case, you can create the `typer.Typer()` application explicitly and set the parameter `pretty_exceptions_show_locals=False`:

Python 3.8+
```
import typer
app = typer.Typer(pretty_exceptions_show_locals=False)
@app.command()
def main(password: str):
    print(password + 3)
if __name__ == "__main__":
    app()

```

And now when you run it, you will see the error without the local variables:

```
$ python main.py supersecret
<font color="#F92672">╭──────────────── </font><font color="#F92672"><b>Traceback (most recent call last)</b></font><font color="#F92672"> ────────────────╮</font>
<font color="#F92672">│</font> <font color="#A37F4E">/home/user/code/superapp/</font><font color="#F4BF75"><b>main.py</b></font>:<font color="#66D9EF">8</font> in <font color="#A6E22E">main</font>                        <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font>    5                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>    6 <font color="#AE81FF"><b>@app</b></font>.command()                                               <font color="#F92672">│</font>
<font color="#F92672">│</font>    7 <font color="#66D9EF">def</font> <font color="#A6E22E">main</font>(password: <font color="#A1EFE4">str</font>):                                     <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F92672">❱ </font> 8 │   <font color="#A1EFE4">print</font>(password + <font color="#66D9EF">3</font>)                                      <font color="#F92672">│</font>
<font color="#F92672">│</font>    9                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>   10                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>   11 <font color="#66D9EF">if</font> <font color="#F92672">__name__</font> == <font color="#F4BF75">&quot;__main__&quot;</font>:                                   <font color="#F92672">│</font>
<font color="#F92672">╰───────────────────────────────────────────────────────────────────╯</font>
<font color="#F92672"><b>TypeError: </b></font>can only concatenate str <b>(</b>not <font color="#A6E22E">&quot;int&quot;</font><b>)</b> to str

```

Note that you passed the password `supersecret`, but it's not shown anywhere in the error message.

Being able to see the values of local variables is normally very **helpful** to diagnose, **debug**, and fix problems, but if you are dealing with delicate information, now you know how to secure it. 🔒

## Disable Short Output[¶](#disable-short-output "Permanent link")

If you want to show the full exception, including the parts in Typer and Click, you can use the parameter `pretty_exceptions_short=False`:

Python 3.8+
```
import typer
app = typer.Typer(pretty_exceptions_short=False)
@app.command()
def main(name: str = "morty"):
    print(name + 3)
if __name__ == "__main__":
    app()

```

Now when you run it, you will see the whole output:

```
$ python main.py
<font color="#F92672">╭──────────────── </font><font color="#F92672"><b>Traceback (most recent call last)</b></font><font color="#F92672"> ────────────────╮</font>
<font color="#F92672">│</font> <font color="#A37F4E">/home/user/code/superapp/</font><font color="#F4BF75"><b>main.py</b></font>:<font color="#66D9EF">12</font> in <font color="#A6E22E">&lt;module&gt;</font>                   <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font>    9                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>   10                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>   11 <font color="#66D9EF">if</font> <font color="#F92672">__name__</font> == <font color="#F4BF75">&quot;__main__&quot;</font>:                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F92672">❱ </font>12 │   app()                                                    <font color="#F92672">│</font>
<font color="#F92672">│</font>   13                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">╭─────────────────────────── locals ────────────────────────────╮</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font> <font color="#A6194C">__annotations__</font> = <b>{}</b>                                          <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>    <font color="#A6194C">__builtins__</font> = <b>&lt;</b><font color="#AE81FF"><b>module</b></font> <font color="#F4BF75">&apos;builtins&apos;</font> <b>(</b>built-in<b>)&gt;</b>              <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>      <font color="#A6194C">__cached__</font> = <font color="#66D9EF">None</font>                                        <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>         <font color="#A6194C">__doc__</font> = <font color="#66D9EF">None</font>                                        <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>        <font color="#A6194C">__file__</font> = <font color="#F4BF75">&apos;main.py&apos;</font>                                   <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>      <font color="#A6194C">__loader__</font> = <b>&lt;</b><font color="#AE81FF"><b>_frozen_importlib_external.SourceFileLoad…</b></font> <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>                   object at <font color="#66D9EF">0x7f047db1c050</font><b>&gt;</b>                   <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>        <font color="#A6194C">__name__</font> = <font color="#F4BF75">&apos;__main__&apos;</font>                                  <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>     <font color="#A6194C">__package__</font> = <font color="#66D9EF">None</font>                                        <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>        <font color="#A6194C">__spec__</font> = <font color="#66D9EF">None</font>                                        <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>             app = <b>&lt;</b><font color="#AE81FF"><b>typer.main.Typer</b></font> object at <font color="#66D9EF">0x7f047db51d90</font><b>&gt;</b> <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>            main = <b>&lt;</b><font color="#AE81FF"><b>function</b></font> main at <font color="#66D9EF">0x7f047db56830</font><b>&gt;</b>           <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>           typer = <b>&lt;</b><font color="#AE81FF"><b>module</b></font> <font color="#F4BF75">&apos;typer&apos;</font> from                        <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font>                   <font color="#F4BF75">&apos;/home/user/code/superapp/env/lib/python3.…</font> <font color="#F4BF75">│</font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">╰───────────────────────────────────────────────────────────────╯</font> <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#A37F4E">/home/user/code/superapp/env/lib/python3.7/site-packages/typer/</font><font color="#F4BF75"><b>ma</b></font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75"><b>in.py</b></font>:<font color="#66D9EF">328</font> in <font color="#A6E22E">__call__</font>                                             <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#A37F4E">/home/user/code/superapp/env/lib/python3.7/site-packages/typer/</font><font color="#F4BF75"><b>ma</b></font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75"><b>in.py</b></font>:<font color="#66D9EF">311</font> in <font color="#A6E22E">__call__</font>                                             <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#A37F4E">/home/user/code/superapp/env/lib/python3.7/site-packages/click/</font><font color="#F4BF75"><b>co</b></font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75"><b>re.py</b></font>:<font color="#66D9EF">1130</font> in <font color="#A6E22E">__call__</font>                                            <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#A37F4E">/home/user/code/superapp/env/lib/python3.7/site-packages/typer/</font><font color="#F4BF75"><b>co</b></font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75"><b>re.py</b></font>:<font color="#66D9EF">723</font> in <font color="#A6E22E">main</font>                                                 <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#A37F4E">/home/user/code/superapp/env/lib/python3.7/site-packages/typer/</font><font color="#F4BF75"><b>co</b></font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75"><b>re.py</b></font>:<font color="#66D9EF">216</font> in <font color="#A6E22E">_main</font>                                                <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#A37F4E">/home/user/code/superapp/env/lib/python3.7/site-packages/click/</font><font color="#F4BF75"><b>co</b></font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75"><b>re.py</b></font>:<font color="#66D9EF">1404</font> in <font color="#A6E22E">invoke</font>                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#A37F4E">/home/user/code/superapp/env/lib/python3.7/site-packages/click/</font><font color="#F4BF75"><b>co</b></font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75"><b>re.py</b></font>:<font color="#66D9EF">760</font> in <font color="#A6E22E">invoke</font>                                               <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#A37F4E">/home/user/code/superapp/env/lib/python3.7/site-packages/typer/</font><font color="#F4BF75"><b>ma</b></font> <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75"><b>in.py</b></font>:<font color="#66D9EF">683</font> in <font color="#A6E22E">wrapper</font>                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#A37F4E">/home/user/code/superapp/</font><font color="#F4BF75"><b>main.py</b></font>:<font color="#66D9EF">8</font> in <font color="#A6E22E">main</font>                        <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font>    5                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>    6 <font color="#AE81FF"><b>@app</b></font>.command()                                               <font color="#F92672">│</font>
<font color="#F92672">│</font>    7 <font color="#66D9EF">def</font> <font color="#A6E22E">main</font>(name: <font color="#A1EFE4">str</font> = <font color="#F4BF75">&quot;morty&quot;</font>):                               <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F92672">❱ </font> 8 │   <font color="#A1EFE4">print</font>(name + <font color="#66D9EF">3</font>)                                          <font color="#F92672">│</font>
<font color="#F92672">│</font>    9                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>   10                                                              <font color="#F92672">│</font>
<font color="#F92672">│</font>   11 <font color="#66D9EF">if</font> <font color="#F92672">__name__</font> == <font color="#F4BF75">&quot;__main__&quot;</font>:                                   <font color="#F92672">│</font>
<font color="#F92672">│</font>                                                                   <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">╭──── locals ────╮</font>                                                <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">│</font> name = <font color="#F4BF75">&apos;morty&apos;</font> <font color="#F4BF75">│</font>                                                <font color="#F92672">│</font>
<font color="#F92672">│</font> <font color="#F4BF75">╰────────────────╯</font>                                                <font color="#F92672">│</font>
<font color="#F92672">╰───────────────────────────────────────────────────────────────────╯</font>
<font color="#F92672"><b>TypeError: </b></font>can only concatenate str <b>(</b>not <font color="#A6E22E">&quot;int&quot;</font><b>)</b> to str

```

## Disable Pretty Exceptions[¶](#disable-pretty-exceptions "Permanent link")

You can also entirely disable pretty exceptions with the parameter `pretty_exceptions_enable=False`:

Python 3.8+
```
import typer
app = typer.Typer(pretty_exceptions_enable=False)
@app.command()
def main(name: str = "morty"):
    print(name + 3)
if __name__ == "__main__":
    app()

```

And now you will see the full standard exception as with any other Python program:

```
$ python main.py
Traceback (most recent call last):
  File "main.py", line 12, in <module>
    app()
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/typer/main.py", line 328, in __call__
    raise e
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/typer/main.py", line 311, in __call__
    return get_command(self)(*args, **kwargs)
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/click/core.py", line 1130, in __call__
    return self.main(*args, **kwargs)
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/typer/core.py", line 723, in main
    **extra,
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/typer/core.py", line 216, in _main
    rv = self.invoke(ctx)
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/click/core.py", line 1404, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/click/core.py", line 760, in invoke
    return __callback(*args, **kwargs)
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/typer/main.py", line 683, in wrapper
    return callback(**use_params)  # type: ignore
  File "main.py", line 8, in main
    print(name + 3)
TypeError: can only concatenate str (not "int") to str

```

You could also achieve the same with the environment variable `_TYPER_STANDARD_TRACEBACK=1`.

This will work for any other Typer program too, in case you need to debug a problem in a Typer program made by someone else:

```
export _TYPER_STANDARD_TRACEBACK=1
$ python main.py
Traceback (most recent call last):
  File "main.py", line 12, in <module>
    app()
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/typer/main.py", line 328, in __call__
    raise e
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/typer/main.py", line 311, in __call__
    return get_command(self)(*args, **kwargs)
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/click/core.py", line 1130, in __call__
    return self.main(*args, **kwargs)
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/typer/core.py", line 723, in main
    **extra,
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/typer/core.py", line 216, in _main
    rv = self.invoke(ctx)
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/click/core.py", line 1404, in invoke
    return ctx.invoke(self.callback, **ctx.params)
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/click/core.py", line 760, in invoke
    return __callback(*args, **kwargs)
  File "/home/user/code/superapp/env/lib/python3.7/site-packages/typer/main.py", line 683, in wrapper
    return callback(**use_params)  # type: ignore
  File "main.py", line 8, in main
    print(name + 3)
TypeError: can only concatenate str (not "int") to str

```

Was this page helpful?

Thanks for your feedback!

Thanks for your feedback!

Back to top

[Previous

Building a Package](../package/)
[Next

One File Per Command](../one-file-per-command/)

Made with
[Material for MkDocs Insiders](https://squidfunk.github.io/mkdocs-material/)



=== Content from github.com_558eba9c_20250114_202838.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcontainerbuildsystem%2Fcachi2%2Fsecurity%2Fadvisories%2FGHSA-w9qc-9m5h-qqmh)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcontainerbuildsystem%2Fcachi2%2Fsecurity%2Fadvisories%2FGHSA-w9qc-9m5h-qqmh)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=containerbuildsystem%2Fcachi2)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[containerbuildsystem](/containerbuildsystem)
/
**[cachi2](/containerbuildsystem/cachi2)**
Public

* [Notifications](/login?return_to=%2Fcontainerbuildsystem%2Fcachi2) You must be signed in to change notification settings
* [Fork
  28](/login?return_to=%2Fcontainerbuildsystem%2Fcachi2)
* [Star
   9](/login?return_to=%2Fcontainerbuildsystem%2Fcachi2)

* [Code](/containerbuildsystem/cachi2)
* [Issues
  34](/containerbuildsystem/cachi2/issues)
* [Pull requests
  13](/containerbuildsystem/cachi2/pulls)
* [Discussions](/containerbuildsystem/cachi2/discussions)
* [Actions](/containerbuildsystem/cachi2/actions)
* [Security](/containerbuildsystem/cachi2/security)
* [Insights](/containerbuildsystem/cachi2/pulse)

Additional navigation options

* [Code](/containerbuildsystem/cachi2)
* [Issues](/containerbuildsystem/cachi2/issues)
* [Pull requests](/containerbuildsystem/cachi2/pulls)
* [Discussions](/containerbuildsystem/cachi2/discussions)
* [Actions](/containerbuildsystem/cachi2/actions)
* [Security](/containerbuildsystem/cachi2/security)
* [Insights](/containerbuildsystem/cachi2/pulse)

# Traceback prints locals

Moderate

[MartinBasti](/MartinBasti)
published
GHSA-w9qc-9m5h-qqmh
Nov 19, 2024

## Package

cachi2

## Affected versions

<= 0.13.0

## Patched versions

>= 0.14.0

## Description

### Impact

Secrets may be shown in logs when an unhandled exception is triggered, because typer framework is logging locals of each function.

This may uncover secrets if Cachi2 is used in CI/build pipelines as it's the main use case.

Example of log:

```
2024-11-13 17:43:57,481 ERROR RuntimeError: Package parent module was not found
╭───────────────────── Traceback (most recent call last) ──────────────────────╮
│ /venv/lib64/python3.9/site-packages/cachi2/interface/cli.py:65 in            │
│ cmd_with_error_handling                                                      │
│                                                                              │
│    62 │   @functools.wraps(cmd)                                              │
│    63 │   def cmd_with_error_handling(*args: tuple[Any, ...], **kwargs: dict │
│    64 │   │   try:                                                           │
│ ❱  65 │   │   │   cmd(*args, **kwargs)                                       │
│    66 │   │   except Cachi2Error as e:                                       │
│    67 │   │   │   _bail_out_with_error(e)                                    │
│    68 │   │   except Exception as e:                                         │
│                                                                              │
│ ╭───────────────────────────────── locals ─────────────────────────────────╮ │
│ │   args = ()                                                              │ │
│ │ kwargs = {                                                               │ │
│ │          │   'raw_input': '[{"type": "gomod","path":                     │ │
│ │          "redacted"}]',                          │ │
│ │          │   'source': PosixPath('/var/workdir/source'),                 │ │
│ │          │   'output': PosixPath('/var/workdir/cachi2/output'),          │ │
│ │          │   'dev_package_managers': False,                              │ │
│ │          │   'cgo_disable': False,                                       │ │
│ │          │   'force_gomod_tidy': False,                                  │ │
│ │          │   'gomod_vendor': False,                                      │ │
│ │          │   'gomod_vendor_check': False                                 │ │
│ │          }                                                               │ │
│ ╰──────────────────────────────────────────────────────────────────────────╯ │

...

```
### Patches

[d6638e5](https://github.com/containerbuildsystem/cachi2/commit/d6638e5e14474061a1ab1ba5d0ee72f58b9a11a9)

### Workarounds

N/A

### References

<https://typer.tiangolo.com/tutorial/exceptions/?h=#disable-local-variables-for-security>

### Severity

Moderate

4.7

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Local

Attack complexity
High

Privileges required
None

User interaction
Required

Scope
Unchanged

Confidentiality
High

Integrity
None

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:L/AC:H/PR:N/UI:R/S:U/C:H/I:N/A:N

### CVE ID

CVE-2024-52582

### Weaknesses

[CWE-497](/advisories?query=cwe%3A497)

### Credits

* [![@MartinBasti](https://avatars.githubusercontent.com/u/20207783?s=40&v=4)](/MartinBasti)
  [MartinBasti](/MartinBasti)
  Finder

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


