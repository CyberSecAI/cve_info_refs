=== Content from github.com_f26070b9_20250114_211032.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvantage6%2Fvantage6%2Fcommit%2Feac19db737145d3ca987adf037a454fae0790ddd)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvantage6%2Fvantage6%2Fcommit%2Feac19db737145d3ca987adf037a454fae0790ddd)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=vantage6%2Fvantage6)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vantage6](/vantage6)
/
**[vantage6](/vantage6/vantage6)**
Public

* [Notifications](/login?return_to=%2Fvantage6%2Fvantage6) You must be signed in to change notification settings
* [Fork
  11](/login?return_to=%2Fvantage6%2Fvantage6)
* [Star
   31](/login?return_to=%2Fvantage6%2Fvantage6)

* [Code](/vantage6/vantage6)
* [Issues
  241](/vantage6/vantage6/issues)
* [Pull requests
  6](/vantage6/vantage6/pulls)
* [Actions](/vantage6/vantage6/actions)
* [Projects
  2](/vantage6/vantage6/projects)
* [Security](/vantage6/vantage6/security)
* [Insights](/vantage6/vantage6/pulse)

Additional navigation options

* [Code](/vantage6/vantage6)
* [Issues](/vantage6/vantage6/issues)
* [Pull requests](/vantage6/vantage6/pulls)
* [Actions](/vantage6/vantage6/actions)
* [Projects](/vantage6/vantage6/projects)
* [Security](/vantage6/vantage6/security)
* [Insights](/vantage6/vantage6/pulse)

## Commit

[Permalink](/vantage6/vantage6/commit/eac19db737145d3ca987adf037a454fae0790ddd)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-w9h2-px87-74vx](https://github.com/advisories/GHSA-w9h2-px87-74vx "GHSA-w9h2-px87-74vx")

[Browse files](/vantage6/vantage6/tree/eac19db737145d3ca987adf037a454fae0790ddd)
Browse the repository at this point in the history

```
Resolve security advisory for remote code execution within algorithm …
```

* Loading branch information

[![@bartvanb](https://avatars.githubusercontent.com/u/10533678?s=40&v=4)](/bartvanb)

[bartvanb](/vantage6/vantage6/commits?author=bartvanb "View all commits by bartvanb")
authored
Jan 18, 2024

2 parents
[6383283](/vantage6/vantage6/commit/6383283733b81abfcacfec7538dc4dc882e98074)
+
[d6d7751](/vantage6/vantage6/commit/d6d7751574ddfa3b1102b00c20bfc37bd6208f1d)

commit eac19db

 Show file tree

 Hide file tree

Showing
**11 changed files**
with
**204 additions**
and
**48 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* docs/algorithms

  + docs/algorithms/code\_details.rst
    [code\_details.rst](#diff-2c9972c73f1c0ac9c188266232fb95142d5a0a8cb18721a5b9d54c13160866b6)
  + docs/algorithms/develop.rst
    [develop.rst](#diff-b60f98046ee463723478795c0e1ee9986b1cdfde4b61103d6e18f871ef64b3d1)
* vantage6-algorithm-tools/vantage6/algorithm/tools

  + vantage6-algorithm-tools/vantage6/algorithm/tools/decorators.py
    [decorators.py](#diff-900c732c305fc0def29e822f4ae305e5e82aa0938c7f4a688eae00584bd8af83)
  + vantage6-algorithm-tools/vantage6/algorithm/tools/util.py
    [util.py](#diff-caca475a16c34edc9d62f2327dce0c0c64e80673d5338cb9413a73f19d653e4c)
  + vantage6-algorithm-tools/vantage6/algorithm/tools/wrap.py
    [wrap.py](#diff-fabf3bf25b942115a286a38a471702ca7f39214aaa6f59df7af256ec291c799c)
* vantage6-common/vantage6/common

  + vantage6-common/vantage6/common/globals.py
    [globals.py](#diff-c80b63fc02f815a12f240afb07708148b32c15a892963dcd791c30ead6cef469)
  + vantage6-common/vantage6/common/serialization.py
    [serialization.py](#diff-5c816d2706f3c1cb7319e548efb6560ad4901b2254fd3e47672436acdf929e21)
* vantage6-node/vantage6/node

  + docker

    - vantage6-node/vantage6/node/docker/docker\_manager.py
      [docker\_manager.py](#diff-1c56fc2af306de3738154bdf3cae29e34633d2ba8b3a9a11f4d8856f0936c2f8)
    - vantage6-node/vantage6/node/docker/task\_manager.py
      [task\_manager.py](#diff-d3f31f74f29b10b1dd04d6a2f6b51a5f53880909b3e7e5ac8031194eb69613f2)
  + vantage6-node/vantage6/node/globals.py
    [globals.py](#diff-73464479e39e9a739a18212b4b2914d6ec3246a3afcbaa22cdd72965a26bf830)
* vantage6/vantage6/cli/node

  + vantage6/vantage6/cli/node/start.py
    [start.py](#diff-129b28b8f1b3151cedecd54aef61f6e3f0aaa54224172a133bbf1364090a2f46)

## There are no files selected for viewing

12 changes: 7 additions & 5 deletions

12
[docs/algorithms/code\_details.rst](#diff-2c9972c73f1c0ac9c188266232fb95142d5a0a8cb18721a5b9d54c13160866b6 "docs/algorithms/code_details.rst")

Show comments

[View file](/vantage6/vantage6/blob/eac19db737145d3ca987adf037a454fae0790ddd/docs/algorithms/code_details.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -167,16 +167,18 @@ interaction between the algorithm and the node. The wrappers are responsible |
|  |  | for reading the input data from the data source and supplying it to the algorithm. |
|  |  | They also take care of writing the results back to the data source. |
|  |  |  |
|  |  | As algorithm developer, you do not have to worry about the wrappers. The only |
|  |  | thing you have to make sure is that the following line is present at the end of |
|  |  | As algorithm developer, you do not have to worry about the wrappers. The main |
|  |  | point you have to make sure is that the following line is present at the end of |
|  |  | your ``Dockerfile``: |
|  |  |  |
|  |  | .. code:: docker |
|  |  |  |
|  |  | CMD python -c "from vantage6.algorithm.tools.wrap import wrap\_algorithm; wrap\_algorithm('${PKG\_NAME}')" |
|  |  | CMD python -c "from vantage6.algorithm.tools.wrap import wrap\_algorithm; wrap\_algorithm()" |
|  |  |  |
|  |  | where ``${PKG\_NAME}`` is the name of your algorithm package. The ``wrap\_algorithm`` |
|  |  | function will wrap your algorithm. |
|  |  | The ``wrap\_algorithm`` function will wrap your algorithm to ensure that the |
|  |  | vantage6 algorithm tools are available to it. Note that the ``wrap\_algorithm`` |
|  |  | function will also read the ``PKG\_NAME`` environment variable from the |
|  |  | ``Dockerfile`` so make sure that this variable is set correctly. |
|  |  |  |
|  |  | For R, the command is slightly different: |
|  |  |  |
| Expand Down | |  |

13 changes: 10 additions & 3 deletions

13
[docs/algorithms/develop.rst](#diff-b60f98046ee463723478795c0e1ee9986b1cdfde4b61103d6e18f871ef64b3d1 "docs/algorithms/develop.rst")

Show comments

[View file](/vantage6/vantage6/blob/eac19db737145d3ca987adf037a454fae0790ddd/docs/algorithms/develop.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -97,14 +97,21 @@ as follows: |
|  |  |  |
|  |  | .. code:: python |
|  |  |  |
|  |  | import os |
|  |  | from vantage6.algorithm.tools.util import get\_env\_var |
|  |  |  |
|  |  | def my\_function(): |
|  |  | input\_file = os.environ["INPUT\_FILE"] |
|  |  | token\_file = os.environ["DEFAULT\_DATABASE\_URI"] |
|  |  | input\_file = get\_env\_var("INPUT\_FILE") |
|  |  | token\_file = get\_env\_var("DEFAULT\_DATABASE\_URI") |
|  |  |  |
|  |  | # do something with the input file and database URI |
|  |  |  |
|  |  | .. note:: |
|  |  |  |
|  |  | The ``get\_env\_var`` function is used here rather than the standard |
|  |  | ``os.environ`` dictionary because the environment variables are encoded |
|  |  | for security purposes. The ``get\_env\_var`` function will decode the |
|  |  | environment variable for you. |
|  |  |  |
|  |  | The environment variables that you specify in the node configuration file |
|  |  | can be used in the exact same manner. You can view all environment variables |
|  |  | that are available to your algorithm by ``print(os.environ)``. |
| Expand Down | |  |

48 changes: 24 additions & 24 deletions

48
[vantage6-algorithm-tools/vantage6/algorithm/tools/decorators.py](#diff-900c732c305fc0def29e822f4ae305e5e82aa0938c7f4a688eae00584bd8af83 "vantage6-algorithm-tools/vantage6/algorithm/tools/decorators.py")

Show comments

[View file](/vantage6/vantage6/blob/eac19db737145d3ca987adf037a454fae0790ddd/vantage6-algorithm-tools/vantage6/algorithm/tools/decorators.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -10,7 +10,7 @@ |
|  |  |  |
|  |  | from vantage6.algorithm.client import AlgorithmClient |
|  |  | from vantage6.algorithm.tools.mock\_client import MockAlgorithmClient |
|  |  | from vantage6.algorithm.tools.util import info, error, warn |
|  |  | from vantage6.algorithm.tools.util import info, error, warn, get\_env\_var |
|  |  | from vantage6.algorithm.tools.wrappers import load\_data |
|  |  | from vantage6.algorithm.tools.preprocessing import preprocess\_data |
|  |  |  |
| Expand Down  Expand Up | | @@ -89,12 +89,12 @@ def decorator(\*args, mock\_client: MockAlgorithmClient = None, |
|  |  | if mock\_client is not None: |
|  |  | return func(mock\_client, \*args, \*\*kwargs) |
|  |  | # read server address from the environment |
|  |  | host = os.environ["HOST"] |
|  |  | port = os.environ["PORT"] |
|  |  | api\_path = os.environ["API\_PATH"] |
|  |  | host = get\_env\_var("HOST") |
|  |  | port = get\_env\_var("PORT") |
|  |  | api\_path = get\_env\_var("API\_PATH") |
|  |  |  |
|  |  | # read token from the environment |
|  |  | token\_file = os.environ["TOKEN\_FILE"] |
|  |  | token\_file = get\_env\_var("TOKEN\_FILE") |
|  |  | info("Reading token") |
|  |  | with open(token\_file) as fp: |
|  |  | token = fp.read().strip() |
| Expand Down  Expand Up | | @@ -184,7 +184,7 @@ def decorator(\*args, mock\_data: list[pd.DataFrame] = None, |
|  |  |  |
|  |  | # do any data preprocessing here |
|  |  | info(f"Applying preprocessing for database '{label}'") |
|  |  | env\_prepro = os.environ.get(f"{label.upper()}\_PREPROCESSING") |
|  |  | env\_prepro = get\_env\_var(f"{label.upper()}\_PREPROCESSING") |
|  |  | if env\_prepro is not None: |
|  |  | preprocess = json.loads(env\_prepro) |
|  |  | data\_ = preprocess\_data(data\_, preprocess) |
| Expand Down  Expand Up | | @@ -291,7 +291,7 @@ def decorator(\*args, \*\*kwargs) -> callable: |
|  |  | >>> def my\_algorithm(metadata: RunMetaData, <other arguments>): |
|  |  | >>> pass |
|  |  | """ |
|  |  | token\_file = os.environ["TOKEN\_FILE"] |
|  |  | token\_file = get\_env\_var("TOKEN\_FILE") |
|  |  | info("Reading token") |
|  |  | with open(token\_file) as fp: |
|  |  | token = fp.read().strip() |
| Expand All | | @@ -304,10 +304,10 @@ def decorator(\*args, \*\*kwargs) -> callable: |
|  |  | node\_id=payload["node\_id"], |
|  |  | collaboration\_id=payload["collaboration\_id"], |
|  |  | organization\_id=payload["organization\_id"], |
|  |  | temporary\_directory=Path(os.environ["TEMPORARY\_FOLDER"]), |
|  |  | output\_file=Path(os.environ["OUTPUT\_FILE"]), |
|  |  | input\_file=Path(os.environ["INPUT\_FILE"]), |
|  |  | token\_file=Path(os.environ["TOKEN\_FILE"]) |
|  |  | temporary\_directory=Path(get\_env\_var("TEMPORARY\_FOLDER")), |
|  |  | output\_file=Path(get\_env\_var("OUTPUT\_FILE")), |
|  |  | input\_file=Path(get\_env\_var("INPUT\_FILE")), |
|  |  | token\_file=Path(get\_env\_var("TOKEN\_FILE")) |
|  |  | ) |
|  |  | return func(metadata, \*args, \*\*kwargs) |
|  |  | return decorator |
| Expand Down  Expand Up | | @@ -336,11 +336,11 @@ def get\_ohdsi\_metadata(label: str) -> OHDSIMetaData: |
|  |  | for var in expected\_env\_vars: |
|  |  | \_check\_environment\_var\_exists\_or\_exit(f'{label\_}\_DB\_PARAM\_{var}') |
|  |  |  |
|  |  | tmp = Path(os.environ["TEMPORARY\_FOLDER"]) |
|  |  | tmp = Path(get\_env\_var("TEMPORARY\_FOLDER")) |
|  |  | metadata = OHDSIMetaData( |
|  |  | database=os.environ[f"{label\_}\_DB\_PARAM\_CDM\_DATABASE"], |
|  |  | cdm\_schema=os.environ[f"{label\_}\_DB\_PARAM\_CDM\_SCHEMA"], |
|  |  | results\_schema=os.environ[f"{label\_}\_DB\_PARAM\_RESULTS\_SCHEMA"], |
|  |  | database=get\_env\_var(f"{label\_}\_DB\_PARAM\_CDM\_DATABASE"), |
|  |  | cdm\_schema=get\_env\_var(f"{label\_}\_DB\_PARAM\_CDM\_SCHEMA"), |
|  |  | results\_schema=get\_env\_var(f"{label\_}\_DB\_PARAM\_RESULTS\_SCHEMA"), |
|  |  | incremental\_folder=tmp / "incremental", |
|  |  | cohort\_statistics\_folder=tmp / "cohort\_statistics", |
|  |  | export\_folder=tmp / "export" |
| Expand Down  Expand Up | | @@ -399,10 +399,10 @@ def \_create\_omop\_database\_connection(label: str) -> callable: |
|  |  | \_check\_environment\_var\_exists\_or\_exit(f'{label\_}\_DB\_PARAM\_{var}') |
|  |  |  |
|  |  | info("Reading OHDSI environment variables") |
|  |  | dbms = os.environ[f"{label\_}\_DB\_PARAM\_DBMS"] |
|  |  | uri = os.environ[f"{label\_}\_DATABASE\_URI"] |
|  |  | user = os.environ[f"{label\_}\_DB\_PARAM\_USER"] |
|  |  | password = os.environ[f"{label\_}\_DB\_PARAM\_PASSWORD"] |
|  |  | dbms = get\_env\_var(f"{label\_}\_DB\_PARAM\_DBMS") |
|  |  | uri = get\_env\_var(f"{label\_}\_DATABASE\_URI") |
|  |  | user = get\_env\_var(f"{label\_}\_DB\_PARAM\_USER") |
|  |  | password = get\_env\_var(f"{label\_}\_DB\_PARAM\_PASSWORD") |
|  |  | info(f' - dbms: {dbms}') |
|  |  | info(f' - uri: {uri}') |
|  |  | info(f' - user: {user}') |
| Expand Down  Expand Up | | @@ -441,21 +441,21 @@ def \_get\_data\_from\_label(label: str) -> pd.DataFrame: |
|  |  | Data from the database |
|  |  | """ |
|  |  | # Load the input data from the input file - this may e.g. include the |
|  |  | database\_uri = os.environ[f"{label.upper()}\_DATABASE\_URI"] |
|  |  | database\_uri = get\_env\_var(f"{label.upper()}\_DATABASE\_URI") |
|  |  | info(f"Using '{database\_uri}' with label '{label}' as database") |
|  |  |  |
|  |  | # Get the database type from the environment variable, this variable is |
|  |  | # set by the vantage6 node based on its configuration file. |
|  |  | database\_type = os.environ.get( |
|  |  | database\_type = get\_env\_var( |
|  |  | f"{label.upper()}\_DATABASE\_TYPE", "csv").lower() |
|  |  |  |
|  |  | # Load the data based on the database type. Try to provide environment |
|  |  | # variables that should be available for some data types. |
|  |  | return load\_data( |
|  |  | database\_uri, |
|  |  | database\_type, |
|  |  | query=os.environ.get(f"{label.upper()}\_QUERY"), |
|  |  | sheet\_name=os.environ.get(f"{label.upper()}\_SHEET\_NAME") |
|  |  | query=get\_env\_var(f"{label.upper()}\_QUERY"), |
|  |  | sheet\_name=get\_env\_var(f"{label.upper()}\_SHEET\_NAME") |
|  |  | ) |
|  |  |  |
|  |  |  |
| Expand All | | @@ -470,7 +470,7 @@ def \_get\_user\_database\_labels() -> list[str]: |
|  |  | """ |
|  |  | # read the labels that the user requested, which is a comma |
|  |  | # separated list of labels. |
|  |  | labels = os.environ["USER\_REQUESTED\_DATABASE\_LABELS"] |
|  |  | labels = get\_env\_var("USER\_REQUESTED\_DATABASE\_LABELS") |
|  |  | return labels.split(',') |
|  |  |  |
|  |  |  |
| Expand Down | |  |

31 changes: 31 additions & 0 deletions

31
[vantage6-algorithm-tools/vantage6/algorithm/tools/util.py](#diff-caca475a16c34edc9d62f2327dce0c0c64e80673d5338cb9413a73f19d653e4c "vantage6-algorithm-tools/vantage6/algorithm/tools/util.py")

Show comments

[View file](/vantage6/vantage6/blob/eac19db737145d3ca987adf037a454fae0790ddd/vantage6-algorithm-tools/vantage6/algorithm/tools/util.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,4 +1,7 @@ |
|  |  | import sys |
|  |  | import os |
|  |  | import base64 |
|  |  | from vantage6.common.globals import STRING\_ENCODING, ENV\_VAR\_EQUALS\_REPLACEMENT |
|  |  |  |
|  |  |  |
|  |  | def info(msg: str) -> None: |
| Expand Down  Expand Up | | @@ -35,3 +38,31 @@ def error(msg: str) -> None: |
|  |  | Error message to be printed |
|  |  | """ |
|  |  | sys.stdout.write(f"error > {msg}\n") |
|  |  |  |
|  |  |  |
|  |  | def get\_env\_var(var\_name: str, default: str | None = None) -> str: |
|  |  | """ |
|  |  | Get the value of an environment variable. Environment variables are encoded |
|  |  | by the node so they need to be decoded here. |
|  |  |  |
|  |  | Note that this decoding follows the reverse of the encoding in the node: |
|  |  | first replace '=' back and then decode the base32 string. |
|  |  |  |
|  |  | Parameters |
|  |  | ---------- |
|  |  | var\_name : str |
|  |  | Name of the environment variable |
|  |  |  |
|  |  | Returns |
|  |  | ------- |
|  |  | var\_value : str | None |
|  |  | Value of the environment variable, or default value if not found |
|  |  | """ |
|  |  | try: |
|  |  | encoded\_env\_var\_value = \ |
|  |  | os.environ[var\_name].replace( |
|  |  | ENV\_VAR\_EQUALS\_REPLACEMENT, "=" |
|  |  | ).encode(STRING\_ENCODING) |
|  |  | return base64.b32decode(encoded\_env\_var\_value).decode(STRING\_ENCODING) |
|  |  | except KeyError: |
|  |  | return default |

11 changes: 7 additions & 4 deletions

11
[vantage6-algorithm-tools/vantage6/algorithm/tools/wrap.py](#diff-fabf3bf25b942115a286a38a471702ca7f39214aaa6f59df7af256ec291c799c "vantage6-algorithm-tools/vantage6/algorithm/tools/wrap.py")

Show comments

[View file](/vantage6/vantage6/blob/eac19db737145d3ca987adf037a454fae0790ddd/vantage6-algorithm-tools/vantage6/algorithm/tools/wrap.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -6,11 +6,11 @@ |
|  |  |  |
|  |  | from vantage6.common.client import deserialization |
|  |  | from vantage6.common import serialization |
|  |  | from vantage6.algorithm.tools.util import info, error |
|  |  | from vantage6.algorithm.tools.util import info, error, get\_env\_var |
|  |  | from vantage6.algorithm.tools.exceptions import DeserializationException |
|  |  |  |
|  |  |  |
|  |  | def wrap\_algorithm(module: str, log\_traceback: bool = True) -> None: |
|  |  | def wrap\_algorithm(log\_traceback: bool = True) -> None: |
|  |  | """ |
|  |  | Wrap an algorithm module to provide input and output handling for the |
|  |  | vantage6 infrastructure. |
| Expand Down  Expand Up | | @@ -41,10 +41,13 @@ def wrap\_algorithm(module: str, log\_traceback: bool = True) -> None: |
|  |  | default False. Algorithm developers should set this to False if |
|  |  | the error messages may contain sensitive information. By default True. |
|  |  | """ |
|  |  | # get the module name from the environment variable. Note that this env var |
|  |  | # is set in the Dockerfile and is therefore not encoded. |
|  |  | module = os.environ.get("PKG\_NAME") |
|  |  | info(f"wrapper for {module}") |
|  |  |  |
|  |  | # read input from the mounted input file. |
|  |  | input\_file = os.environ["INPUT\_FILE"] |
|  |  | input\_file = get\_env\_var("INPUT\_FILE") |
|  |  | info(f"Reading input file {input\_file}") |
|  |  | input\_data = load\_input(input\_file) |
|  |  |  |
| Expand All | | @@ -54,7 +57,7 @@ def wrap\_algorithm(module: str, log\_traceback: bool = True) -> None: |
|  |  |  |
|  |  | # write output from the method to mounted output file. Which will be |
|  |  | # transferred back to the server by the node-instance. |
|  |  | output\_file = os.environ["OUTPUT\_FILE"] |
|  |  | output\_file = get\_env\_var("OUTPUT\_FILE") |
|  |  | info(f"Writing output to {output\_file}") |
|  |  |  |
|  |  | \_write\_output(output, output\_file) |
| Expand Down | |  |

3 changes: 3 additions & 0 deletions

3
[vantage6-common/vantage6/common/globals.py](#diff-c80b63fc02f815a12f240afb07708148b32c15a892963dcd791c30ead6cef469 "vantage6-common/vantage6/common/globals.py")

Show comments

[View file](/vantage6/vantage6/blob/eac19db737145d3ca987adf037a454fae0790ddd/vantage6-common/vantage6/common/globals.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -36,3 +36,6 @@ |
|  |  |  |
|  |  | # The basics image can be used (mainly by the UI) to collect column names |
|  |  | BASIC\_PROCESSING\_IMAGE = 'harbor2.vantage6.ai/algorithms/basics' |
|  |  |  |
|  |  | # Character to replace '=' with in encoded environment variables |
|  |  | ENV\_VAR\_EQUALS\_REPLACEMENT = "!" |

3 changes: 2 additions & 1 deletion

3
[vantage6-common/vantage6/common/serialization.py](#diff-5c816d2706f3c1cb7319e548efb6560ad4901b2254fd3e47672436acdf929e21 "vantage6-common/vantage6/common/serialization.py")

Show comments

[View file](/vantage6/vantage6/blob/eac19db737145d3ca987adf037a454fae0790ddd/vantage6-common/vantage6/common/serialization.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,4 +1,5 @@ |
|  |  | import json |
|  |  | from vantage6.common.globals import STRING\_ENCODING |
|  |  |  |
|  |  |  |
|  |  | # TODO BvB 2023-02-03: I feel this function could be given a better name. And |
| Expand All | | @@ -17,4 +18,4 @@ def serialize(data: any) -> bytes: |
|  |  | bytes |
|  |  | A JSON-serialized and then encoded bytes object representing the data |
|  |  | """ |
|  |  | return json.dumps(data).encode() |
|  |  | return json.dumps(data).encode(STRING\_ENCODING) |

6 changes: 3 additions & 3 deletions

6
[vantage6-node/vantage6/node/docker/docker\_manager.py](#diff-1c56fc2af306de3738154bdf3cae29e34633d2ba8b3a9a11f4d8856f0936c2f8 "vantage6-node/vantage6/node/docker/docker_manager.py")

Show comments

[View file](/vantage6/vantage6/blob/eac19db737145d3ca987adf037a454fae0790ddd/vantage6-node/vantage6/node/docker/docker_manager.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -485,8 +485,8 @@ def get\_result(self) -> Result: |
|  |  | self.active\_tasks.remove(task) |
|  |  | break |
|  |  | except AlgorithmContainerNotFound: |
|  |  | self.log.exception(f'Failed to find container for ' |
|  |  | f'result {task.result\_id}') |
|  |  | self.log.exception('Failed to find container for ' |
|  |  | 'algorithm with run\_id %s', task.run\_id) |
|  |  | self.failed\_tasks.append(task) |
|  |  | self.active\_tasks.remove(task) |
|  |  | break |
| Expand Down  Expand Up | | @@ -517,7 +517,7 @@ def get\_result(self) -> Result: |
|  |  | else: |
|  |  | # at least one task failed to start |
|  |  | finished\_task = self.failed\_tasks.pop() |
|  |  | logs = 'Container failed' |
|  |  | logs = 'Container failed. Check node logs for details' |
|  |  | results = b'' |
|  |  |  |
|  |  | return Result( |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `eac19db`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvantage6%2Fvantage6%2Fcommit%2Feac19db737145d3ca987adf037a454fae0790ddd) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_b6dc15d6_20250114_211033.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvantage6%2Fvantage6%2Fsecurity%2Fadvisories%2FGHSA-w9h2-px87-74vx)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvantage6%2Fvantage6%2Fsecurity%2Fadvisories%2FGHSA-w9h2-px87-74vx)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=vantage6%2Fvantage6)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vantage6](/vantage6)
/
**[vantage6](/vantage6/vantage6)**
Public

* [Notifications](/login?return_to=%2Fvantage6%2Fvantage6) You must be signed in to change notification settings
* [Fork
  11](/login?return_to=%2Fvantage6%2Fvantage6)
* [Star
   31](/login?return_to=%2Fvantage6%2Fvantage6)

* [Code](/vantage6/vantage6)
* [Issues
  241](/vantage6/vantage6/issues)
* [Pull requests
  6](/vantage6/vantage6/pulls)
* [Actions](/vantage6/vantage6/actions)
* [Projects
  2](/vantage6/vantage6/projects)
* [Security](/vantage6/vantage6/security)
* [Insights](/vantage6/vantage6/pulse)

Additional navigation options

* [Code](/vantage6/vantage6)
* [Issues](/vantage6/vantage6/issues)
* [Pull requests](/vantage6/vantage6/pulls)
* [Actions](/vantage6/vantage6/actions)
* [Projects](/vantage6/vantage6/projects)
* [Security](/vantage6/vantage6/security)
* [Insights](/vantage6/vantage6/pulse)

# Remote code execution

Moderate

[bartvanb](/bartvanb)
published
GHSA-w9h2-px87-74vx
Jan 30, 2024

## Package

pip

vantage6
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

<4.1.3

## Patched versions

4.2.0+

## Description

### Impact

Authenticated users could inject code into algorithm environment variables

### Patches

None yet

### Workarounds

No

### References

### Severity

Moderate

### CVE ID

CVE-2024-21649

### Weaknesses

[CWE-94](/advisories?query=cwe%3A94)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


