=== Content from plugins.trac.wordpress.org_6d97f1f0_20250114_182008.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fwpforms-lite%2Ftags%2F1.9.1.6%2Fsrc%2FLogger%2FListTable.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/wpforms-lite/tags/1.9.1.6/src/Logger/ListTable.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/wpforms-lite/tags/1.9.1.6/src/Logger/ListTable.php)

---

# [source:](/browser?order=name "Go to repository root") [wpforms-lite](/browser/wpforms-lite?order=name "View wpforms-lite")/[tags](/browser/wpforms-lite/tags?order=name "View tags")/[1.9.1.6](/browser/wpforms-lite/tags/1.9.1.6?order=name "View 1.9.1.6")/[src](/browser/wpforms-lite/tags/1.9.1.6/src?order=name "View src")/[Logger](/browser/wpforms-lite/tags/1.9.1.6/src/Logger?order=name "View Logger")/[ListTable.php](/browser/wpforms-lite/tags/1.9.1.6/src/Logger/ListTable.php?order=name "View ListTable.php")

View diff against:

View revision:

| [Last change](/changeset/3177115/wpforms-lite/tags/1.9.1.6/src/Logger/ListTable.php "View differences") on this file was [3177115](/changeset/3177115/ "View changeset 3177115"), checked in by jrfoell, [3 months ago](/timeline?from=2024-10-28T14%3A08%3A29Z&precision=second "See timeline at 10/28/2024 02:08:29 PM") |
| --- |
| WPForms Lite v1.9.1.6 |
| **File size:** 12.7 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | namespace WPForms\Logger; |
| [4](#L4) |  |
| [5](#L5) | if ( ! defined( 'ABSPATH' ) ) { |
| [6](#L6) | exit; |
| [7](#L7) | } |
| [8](#L8) |  |
| [9](#L9) | use WP\_List\_Table; |
| [10](#L10) |  |
| [11](#L11) | if ( ! class\_exists( 'WP\_List\_Table' ) ) { |
| [12](#L12) | require\_once ABSPATH . 'wp-admin/includes/class-wp-list-table.php'; |
| [13](#L13) | } |
| [14](#L14) |  |
| [15](#L15) | /\*\* |
| [16](#L16) | \* Class ListTable. |
| [17](#L17) | \* |
| [18](#L18) | \* @since 1.6.3 |
| [19](#L19) | \*/ |
| [20](#L20) | class ListTable extends WP\_List\_Table { |
| [21](#L21) |  |
| [22](#L22) | /\*\* |
| [23](#L23) | \* Record Query. |
| [24](#L24) | \* |
| [25](#L25) | \* @since 1.6.3 |
| [26](#L26) | \* |
| [27](#L27) | \* @var Repository |
| [28](#L28) | \*/ |
| [29](#L29) | private $repository; |
| [30](#L30) |  |
| [31](#L31) | /\*\* |
| [32](#L32) | \* ListTable constructor. |
| [33](#L33) | \* |
| [34](#L34) | \* @since 1.6.3 |
| [35](#L35) | \* |
| [36](#L36) | \* @param Repository $repository Repository. |
| [37](#L37) | \*/ |
| [38](#L38) | public function \_\_construct( $repository ) { |
| [39](#L39) |  |
| [40](#L40) | $this->repository = $repository; |
| [41](#L41) |  |
| [42](#L42) | parent::\_\_construct( |
| [43](#L43) | [ |
| [44](#L44) | 'plural'   => esc\_html\_\_( 'Logs', 'wpforms-lite' ), |
| [45](#L45) | 'singular' => esc\_html\_\_( 'Log', 'wpforms-lite' ), |
| [46](#L46) | ] |
| [47](#L47) | ); |
| [48](#L48) |  |
| [49](#L49) | $this->hooks(); |
| [50](#L50) |  |
| [51](#L51) | add\_screen\_option( |
| [52](#L52) | 'per\_page', |
| [53](#L53) | [ 'default' => $this->get\_items\_per\_page( $this->get\_per\_page\_option\_name() ) ] |
| [54](#L54) | ); |
| [55](#L55) | set\_screen\_options(); |
| [56](#L56) | } |
| [57](#L57) |  |
| [58](#L58) | /\*\* |
| [59](#L59) | \* Hooks. |
| [60](#L60) | \* |
| [61](#L61) | \* @since 1.7.5 |
| [62](#L62) | \*/ |
| [63](#L63) | private function hooks() { |
| [64](#L64) |  |
| [65](#L65) | add\_filter( |
| [66](#L66) | 'set\_screen\_option\_' . $this->get\_per\_page\_option\_name(), |
| [67](#L67) | [ $this, 'set\_items\_per\_page\_option' ], |
| [68](#L68) | 10, |
| [69](#L69) | 3 |
| [70](#L70) | ); |
| [71](#L71) | } |
| [72](#L72) |  |
| [73](#L73) | /\*\* |
| [74](#L74) | \* Handles setting the items\_per\_page option for this screen. |
| [75](#L75) | \* |
| [76](#L76) | \* @since 1.7.5 |
| [77](#L77) | \* |
| [78](#L78) | \* @param mixed  $status Default false (to skip saving the current option). |
| [79](#L79) | \* @param string $option Screen option name. |
| [80](#L80) | \* @param int    $value  Screen option value. |
| [81](#L81) | \* |
| [82](#L82) | \* @return int |
| [83](#L83) | \* @noinspection PhpUnusedParameterInspection |
| [84](#L84) | \*/ |
| [85](#L85) | public function set\_items\_per\_page\_option( $status, $option, $value ) { |
| [86](#L86) |  |
| [87](#L87) | return $value; |
| [88](#L88) | } |
| [89](#L89) |  |
| [90](#L90) | /\*\* |
| [91](#L91) | \* Whether the table has items to display or not. |
| [92](#L92) | \* |
| [93](#L93) | \* @since 1.6.3 |
| [94](#L94) | \* |
| [95](#L95) | \* @return bool |
| [96](#L96) | \*/ |
| [97](#L97) | public function has\_items() { |
| [98](#L98) |  |
| [99](#L99) | // We can't use the empty function because it doesn't work with the Countable object. |
| [100](#L100) | return (bool) count( $this->items ); |
| [101](#L101) | } |
| [102](#L102) |  |
| [103](#L103) | /\*\* |
| [104](#L104) | \* Prepares the list of items for displaying. |
| [105](#L105) | \* |
| [106](#L106) | \* @since 1.6.3 |
| [107](#L107) | \*/ |
| [108](#L108) | public function prepare\_items() { |
| [109](#L109) |  |
| [110](#L110) | $offset      = $this->get\_items\_offset(); |
| [111](#L111) | $search      = $this->get\_request\_search\_query(); |
| [112](#L112) | $types       = $this->get\_items\_type(); |
| [113](#L113) | $per\_page    = $this->get\_items\_per\_page( $this->get\_per\_page\_option\_name() ); |
| [114](#L114) | $this->items = $this->repository->records( $per\_page, $offset, $search, $types ); |
| [115](#L115) | $total\_items = $this->get\_total(); |
| [116](#L116) |  |
| [117](#L117) | $this->set\_pagination\_args( |
| [118](#L118) | [ |
| [119](#L119) | 'total\_items' => $total\_items, |
| [120](#L120) | 'per\_page'    => $per\_page, |
| [121](#L121) | 'total\_pages' => (int) ceil( $total\_items / $per\_page ), |
| [122](#L122) | ] |
| [123](#L123) | ); |
| [124](#L124) | } |
| [125](#L125) |  |
| [126](#L126) | /\*\* |
| [127](#L127) | \* Return the type of records. |
| [128](#L128) | \* |
| [129](#L129) | \* @since 1.6.3 |
| [130](#L130) | \* |
| [131](#L131) | \* @return string |
| [132](#L132) | \*/ |
| [133](#L133) | private function get\_items\_type() { |
| [134](#L134) |  |
| [135](#L135) | return filter\_input( INPUT\_GET, 'log\_type', FILTER\_SANITIZE\_FULL\_SPECIAL\_CHARS ); |
| [136](#L136) | } |
| [137](#L137) |  |
| [138](#L138) | /\*\* |
| [139](#L139) | \* Return the number of items to offset/skip for this current view. |
| [140](#L140) | \* |
| [141](#L141) | \* @since 1.6.3 |
| [142](#L142) | \* |
| [143](#L143) | \* @return int |
| [144](#L144) | \*/ |
| [145](#L145) | private function get\_items\_offset() { |
| [146](#L146) |  |
| [147](#L147) | return $this->get\_items\_per\_page( $this->get\_per\_page\_option\_name() ) \* ( $this->get\_pagenum() - 1 ); |
| [148](#L148) | } |
| [149](#L149) |  |
| [150](#L150) | /\*\* |
| [151](#L151) | \* Return the search filter for this request, if any. |
| [152](#L152) | \* |
| [153](#L153) | \* @since 1.6.3 |
| [154](#L154) | \* |
| [155](#L155) | \* @return string |
| [156](#L156) | \*/ |
| [157](#L157) | private function get\_request\_search\_query() { |
| [158](#L158) |  |
| [159](#L159) | return filter\_input( INPUT\_GET, 's', FILTER\_SANITIZE\_FULL\_SPECIAL\_CHARS ); |
| [160](#L160) | } |
| [161](#L161) |  |
| [162](#L162) | /\*\* |
| [163](#L163) | \* Column title. |
| [164](#L164) | \* |
| [165](#L165) | \* @since 1.6.3 |
| [166](#L166) | \* |
| [167](#L167) | \* @param Record $item List table item. |
| [168](#L168) | \* |
| [169](#L169) | \* @return string |
| [170](#L170) | \* @noinspection PhpUnused |
| [171](#L171) | \*/ |
| [172](#L172) | public function column\_log\_title( $item ) { |
| [173](#L173) |  |
| [174](#L174) | return sprintf( |
| [175](#L175) | '<a href="#" class="js-single-log-target" data-log-id="%1$d"><strong>%2$s</strong></a>', |
| [176](#L176) | absint( $item->get\_id() ), |
| [177](#L177) | esc\_html( $item->get\_title() ) |
| [178](#L178) | ); |
| [179](#L179) | } |
| [180](#L180) |  |
| [181](#L181) | /\*\* |
| [182](#L182) | \* Column message. |
| [183](#L183) | \* |
| [184](#L184) | \* @since 1.6.3 |
| [185](#L185) | \* |
| [186](#L186) | \* @param Record $item List table item. |
| [187](#L187) | \* |
| [188](#L188) | \* @return string |
| [189](#L189) | \* @noinspection PhpUnused |
| [190](#L190) | \*/ |
| [191](#L191) | public function column\_message( $item ) { |
| [192](#L192) |  |
| [193](#L193) | $message = $item->get\_message(); |
| [194](#L194) |  |
| [195](#L195) | if ( preg\_match( '/\[body].+{"error":"(.+)"}/i', $message, $m ) ) { |
| [196](#L196) | $message = $m[1]; |
| [197](#L197) | } |
| [198](#L198) |  |
| [199](#L199) | if ( preg\_match( '/\[error] =&gt; (.+)/i', $message, $m ) ) { |
| [200](#L200) | $message = $m[1]; |
| [201](#L201) | } |
| [202](#L202) |  |
| [203](#L203) | return esc\_html( $this->crop\_message( $message ) ); |
| [204](#L204) | } |
| [205](#L205) |  |
| [206](#L206) | /\*\* |
| [207](#L207) | \* Column form ID. |
| [208](#L208) | \* |
| [209](#L209) | \* @since 1.6.3 |
| [210](#L210) | \* |
| [211](#L211) | \* @param Record $item List table item. |
| [212](#L212) | \* |
| [213](#L213) | \* @return int |
| [214](#L214) | \* @noinspection PhpUnused |
| [215](#L215) | \*/ |
| [216](#L216) | public function column\_form\_id( $item ) { |
| [217](#L217) |  |
| [218](#L218) | return absint( $item->get\_form\_id() ); |
| [219](#L219) | } |
| [220](#L220) |  |
| [221](#L221) | /\*\* |
| [222](#L222) | \* Column types. |
| [223](#L223) | \* |
| [224](#L224) | \* @since 1.6.3 |
| [225](#L225) | \* |
| [226](#L226) | \* @param Record $item List table item. |
| [227](#L227) | \* |
| [228](#L228) | \* @return string |
| [229](#L229) | \* @noinspection PhpUnused |
| [230](#L230) | \*/ |
| [231](#L231) | public function column\_types( $item ) { |
| [232](#L232) |  |
| [233](#L233) | return esc\_html( implode( ', ', $item->get\_types( 'label' ) ) ); |
| [234](#L234) | } |
| [235](#L235) |  |
| [236](#L236) | /\*\* |
| [237](#L237) | \* Column date. |
| [238](#L238) | \* |
| [239](#L239) | \* @since 1.6.3 |
| [240](#L240) | \* |
| [241](#L241) | \* @param Record $item List table item. |
| [242](#L242) | \* |
| [243](#L243) | \* @return string |
| [244](#L244) | \* @noinspection PhpUnused |
| [245](#L245) | \*/ |
| [246](#L246) | public function column\_date( $item ) { |
| [247](#L247) |  |
| [248](#L248) | return esc\_html( $item->get\_date( 'sql-local' ) ); |
| [249](#L249) | } |
| [250](#L250) |  |
| [251](#L251) | /\*\* |
| [252](#L252) | \* Crop message for preview on list table. |
| [253](#L253) | \* |
| [254](#L254) | \* @since 1.6.3 |
| [255](#L255) | \* |
| [256](#L256) | \* @param string $message Message. |
| [257](#L257) | \* |
| [258](#L258) | \* @return string |
| [259](#L259) | \*/ |
| [260](#L260) | private function crop\_message( $message ) { |
| [261](#L261) |  |
| [262](#L262) | return wp\_html\_excerpt( $message, 97, '...' ); |
| [263](#L263) | } |
| [264](#L264) |  |
| [265](#L265) | /\*\* |
| [266](#L266) | \* Prepares the \_column\_headers property which is used by WP\_Table\_List at rendering. |
| [267](#L267) | \* It merges the columns and the sortable columns. |
| [268](#L268) | \* |
| [269](#L269) | \* @since 1.6.3 |
| [270](#L270) | \*/ |
| [271](#L271) | private function prepare\_column\_headers() { |
| [272](#L272) |  |
| [273](#L273) | $this->\_column\_headers = [ |
| [274](#L274) | $this->get\_columns(), |
| [275](#L275) | get\_hidden\_columns( $this->screen ), |
| [276](#L276) | [], |
| [277](#L277) | ]; |
| [278](#L278) | } |
| [279](#L279) |  |
| [280](#L280) | /\*\* |
| [281](#L281) | \* Return the columns' names for rendering. |
| [282](#L282) | \* |
| [283](#L283) | \* @since 1.6.3 |
| [284](#L284) | \* |
| [285](#L285) | \* @return array |
| [286](#L286) | \*/ |
| [287](#L287) | public function get\_columns() { |
| [288](#L288) |  |
| [289](#L289) | return [ |
| [290](#L290) | 'log\_title' => \_\_( 'Log Title', 'wpforms-lite' ), |
| [291](#L291) | 'message'   => \_\_( 'Message', 'wpforms-lite' ), |
| [292](#L292) | 'form\_id'   => \_\_( 'Form ID', 'wpforms-lite' ), |
| [293](#L293) | 'types'     => \_\_( 'Types', 'wpforms-lite' ), |
| [294](#L294) | 'date'      => \_\_( 'Date', 'wpforms-lite' ), |
| [295](#L295) | ]; |
| [296](#L296) | } |
| [297](#L297) |  |
| [298](#L298) | /\*\* |
| [299](#L299) | \* Header before log table. |
| [300](#L300) | \* |
| [301](#L301) | \* @since 1.6.3 |
| [302](#L302) | \*/ |
| [303](#L303) | private function header() { |
| [304](#L304) |  |
| [305](#L305) | ?> |
| [306](#L306) | <div class="wpforms-admin-content-header"> |
| [307](#L307) | <h4 class="wp-heading-inline"><?php esc\_html\_e( 'View Logs', 'wpforms-lite' ); ?> |
| [308](#L308) | <?php if ( $this->get\_request\_search\_query() ) { ?> |
| [309](#L309) | <span class="subtitle"> |
| [310](#L310) | <?php |
| [311](#L311) | printf( /\* translators: %s - search query. \*/ |
| [312](#L312) | esc\_html\_\_( 'Search results for "%s"', 'wpforms-lite' ), |
| [313](#L313) | esc\_html( $this->get\_request\_search\_query() ) |
| [314](#L314) | ); |
| [315](#L315) | ?> |
| [316](#L316) | </span> |
| [317](#L317) | <?php } ?> |
| [318](#L318) | </h4> |
| [319](#L319) | <?php |
| [320](#L320) | $this->hidden\_fields(); |
| [321](#L321) | $this->search\_box( esc\_html\_\_( 'Search Logs', 'wpforms-lite' ), 'plugin' ); |
| [322](#L322) | ?> |
| [323](#L323) | </div> |
| [324](#L324) | <?php |
| [325](#L325) | } |
| [326](#L326) |  |
| [327](#L327) | /\*\* |
| [328](#L328) | \* Generate the table navigation above or below the table. |
| [329](#L329) | \* |
| [330](#L330) | \* @since 1.6.3 |
| [331](#L331) | \* |
| [332](#L332) | \* @param string $which Which position. |
| [333](#L333) | \*/ |
| [334](#L334) | protected function display\_tablenav( $which ) { |
| [335](#L335) |  |
| [336](#L336) | ?> |
| [337](#L337) | <div class="tablenav <?php echo esc\_attr( $which ); ?>"> |
| [338](#L338) |  |
| [339](#L339) | <?php |
| [340](#L340) | if ( $which === 'top' ) { |
| [341](#L341) | $this->extra\_tablenav( $which ); |
| [342](#L342) | } |
| [343](#L343) | $this->pagination( $which ); |
| [344](#L344) | ?> |
| [345](#L345) |  |
| [346](#L346) | <br class="clear" /> |
| [347](#L347) | </div> |
| [348](#L348) | <?php |
| [349](#L349) | } |
| [350](#L350) |  |
| [351](#L351) | /\*\* |
| [352](#L352) | \* Table list actions. |
| [353](#L353) | \* |
| [354](#L354) | \* @since 1.6.3 |
| [355](#L355) | \* |
| [356](#L356) | \* @param string $which Position of navigation (top or bottom). |
| [357](#L357) | \*/ |
| [358](#L358) | protected function extra\_tablenav( $which ) { |
| [359](#L359) |  |
| [360](#L360) | if ( ! $this->get\_total() ) { |
| [361](#L361) | return; |
| [362](#L362) | } |
| [363](#L363) |  |
| [364](#L364) | $this->log\_type\_select(); |
| [365](#L365) | $this->clear\_all(); |
| [366](#L366) | } |
| [367](#L367) |  |
| [368](#L368) | /\*\* |
| [369](#L369) | \* Clear all log records. |
| [370](#L370) | \* |
| [371](#L371) | \* @since 1.6.3 |
| [372](#L372) | \*/ |
| [373](#L373) | private function clear\_all() { |
| [374](#L374) |  |
| [375](#L375) | ?> |
| [376](#L376) | <button name="clear-all" type="submit" class="button" value="1"><?php esc\_html\_e( 'Delete All Logs', 'wpforms-lite' ); ?></button> |
| [377](#L377) | <?php |
| [378](#L378) | } |
| [379](#L379) |  |
| [380](#L380) | /\*\* |
| [381](#L381) | \* Update URL when table showing. |
| [382](#L382) | \* \_wp\_http\_referer is used only on bulk actions, we remove it to keep the $\_GET shorter. |
| [383](#L383) | \* |
| [384](#L384) | \* @since 1.6.3 |
| [385](#L385) | \*/ |
| [386](#L386) | public function process\_admin\_ui() { |
| [387](#L387) |  |
| [388](#L388) | $uri = isset( $\_SERVER['REQUEST\_URI'] ) ? esc\_url\_raw( wp\_unslash( $\_SERVER['REQUEST\_URI'] ) ) : ''; |
| [389](#L389) |  |
| [390](#L390) | // phpcs:disable WordPress.Security.NonceVerification.Recommended |
| [391](#L391) | if ( ! empty( $\_REQUEST['\_wp\_http\_referer'] ) || ! empty( $\_REQUEST['clear-all'] ) ) { |
| [392](#L392) |  |
| [393](#L393) | if ( ! empty( $\_REQUEST['clear-all'] ) ) { |
| [394](#L394) | $this->repository->clear\_all(); |
| [395](#L395) | } |
| [396](#L396) |  |
| [397](#L397) | wp\_safe\_redirect( |
| [398](#L398) | remove\_query\_arg( |
| [399](#L399) | [ '\_wp\_http\_referer', '\_wpnonce', 'clear-all' ], |
| [400](#L400) | $uri |
| [401](#L401) | ) |
| [402](#L402) | ); |
| [403](#L403) |  |
| [404](#L404) | exit; |
| [405](#L405) | } |
| [406](#L406) | // phpcs:enable WordPress.Security.NonceVerification.Recommended |
| [407](#L407) | } |
| [408](#L408) |  |
| [409](#L409) | /\*\* |
| [410](#L410) | \* Message to be displayed when there are no items. |
| [411](#L411) | \* |
| [412](#L412) | \* @since 1.6.3 |
| [413](#L413) | \*/ |
| [414](#L414) | public function no\_items() { |
| [415](#L415) |  |
| [416](#L416) | esc\_html\_e( 'No logs found.', 'wpforms-lite' ); |
| [417](#L417) | } |
| [418](#L418) |  |
| [419](#L419) | /\*\* |
| [420](#L420) | \* Print all hidden fields. |
| [421](#L421) | \* |
| [422](#L422) | \* @since 1.6.3 |
| [423](#L423) | \*/ |
| [424](#L424) | private function hidden\_fields() { |
| [425](#L425) |  |
| [426](#L426) | // phpcs:ignore WordPress.Security.NonceVerification.Recommended |
| [427](#L427) | foreach ( $\_GET as $key => $value ) { |
| [428](#L428) |  |
| [429](#L429) | if ( $key[0] === '\_' || $key === 'paged' || $key === 'ID' ) { |
| [430](#L430) | continue; |
| [431](#L431) | } |
| [432](#L432) |  |
| [433](#L433) | echo '<input type="hidden" name="' . esc\_attr( $key ) . '" value="' . esc\_attr( $value ) . '" />'; |
| [434](#L434) | } |
| [435](#L435) | } |
| [436](#L436) |  |
| [437](#L437) | /\*\* |
| [438](#L438) | \* Select for choose a log type. |
| [439](#L439) | \* |
| [440](#L440) | \* @since 1.6.3 |
| [441](#L441) | \*/ |
| [442](#L442) | private function log\_type\_select() { |
| [443](#L443) |  |
| [444](#L444) | // phpcs:ignore WordPress.Security.NonceVerification.Recommended |
| [445](#L445) | $current\_type = ! empty( $\_GET['log\_type'] ) ? sanitize\_text\_field( wp\_unslash( $\_GET['log\_type'] ) ) : ''; |
| [446](#L446) | ?> |
| [447](#L447) | <select name="log\_type"> |
| [448](#L448) | <option value=""><?php esc\_html\_e( 'All Logs', 'wpforms-lite' ); ?></option> |
| [449](#L449) | <?php foreach ( Log::get\_log\_types() as $type\_slug => $type ) { ?> |
| [450](#L450) | <option |
| [451](#L451) | value="<?php echo esc\_attr( $type\_slug ); ?>" |
| [452](#L452) | <?php selected( $type\_slug, $current\_type ); ?>> |
| [453](#L453) | <?php echo esc\_html( $type ); ?> |
| [454](#L454) | </option> |
| [455](#L455) | <?php } ?> |
| [456](#L456) | </select> |
| [457](#L457) | <input type="submit" class="button" value="<?php esc\_attr\_e( 'Apply', 'wpforms-lite' ); ?>"> |
| [458](#L458) | <?php |
| [459](#L459) | } |
| [460](#L460) |  |
| [461](#L461) | /\*\* |
| [462](#L462) | \* Popup view. |
| [463](#L463) | \* |
| [464](#L464) | \* @since 1.6.3 |
| [465](#L465) | \*/ |
| [466](#L466) | public function popup\_template() { |
| [467](#L467) |  |
| [468](#L468) | ?> |
| [469](#L469) | <script type="text/html" id="tmpl-wpforms-log-record"> |
| [470](#L470) | <div class="wpforms-log-popup"> |
| [471](#L471) | <div class="wpforms-log-popup-block"> |
| [472](#L472) | <div class="wpforms-log-popup-label"><?php esc\_html\_e( 'Log Title', 'wpforms-lite' ); ?></div> |
| [473](#L473) | <div class="wpforms-log-popup-title">{{ data.title }}</div> |
| [474](#L474) | </div> |
| [475](#L475) | <div class="wpforms-log-popup-block"> |
| [476](#L476) | <div class="wpforms-log-popup-label"><?php esc\_html\_e( 'Message', 'wpforms-lite' ); ?></div> |
| [477](#L477) | <div class="wpforms-log-popup-message">{{{ data.message }}}</div> |
| [478](#L478) | </div> |
| [479](#L479) | <div class="wpforms-log-popup-flex wpforms-log-popup-flex-column-2"> |
| [480](#L480) | <div> |
| [481](#L481) | <div class="wpforms-log-popup-label"><?php esc\_html\_e( 'Date', 'wpforms-lite' ); ?></div> |
| [482](#L482) | <div class="wpforms-log-popup-create-at">{{ data.create\_at }}</div> |
| [483](#L483) | </div> |
| [484](#L484) | <div> |
| [485](#L485) | <div class="wpforms-log-popup-label"><?php esc\_html\_e( 'Types', 'wpforms-lite' ); ?></div> |
| [486](#L486) | <div class="wpforms-log-popup-types">{{ data.types }}</div> |
| [487](#L487) | </div> |
| [488](#L488) | </div> |
| [489](#L489) | <div class="wpforms-log-popup-flex wpforms-log-popup-flex-column-4"> |
| [490](#L490) | <div> |
| [491](#L491) | <div class="wpforms-log-popup-label"><?php esc\_html\_e( 'Log ID', 'wpforms-lite' ); ?></div> |
| [492](#L492) | <div class="wpforms-log-popup-id">{{ data.ID }}</div> |
| [493](#L493) | </div> |
| [494](#L494) | <div> |
| [495](#L495) | <div class="wpforms-log-popup-label"><?php esc\_html\_e( 'Form ID', 'wpforms-lite' ); ?></div> |
| [496](#L496) | <div class="wpforms-log-popup-form-id"> |
| [497](#L497) | <# if ( data.form\_id ) { #> |
| [498](#L498) | <a href="{{ data.form\_url }}"> |
| [499](#L499) | <# } #> |
| [500](#L500) | {{ data.form\_id }} |
| [501](#L501) | <# if ( data.form\_id ) { #> |
| [502](#L502) | </a> |
| [503](#L503) | <# } #> |
| [504](#L504) | </div> |
| [505](#L505) | </div> |
| [506](#L506) | <div> |
| [507](#L507) | <div class="wpforms-log-popup-label"><?php esc\_html\_e( 'Entry ID', 'wpforms-lite' ); ?></div> |
| [508](#L508) | <div class="wpforms-log-popup-entry-id"> |
| [509](#L509) | <# if ( data.entry\_id ) { #> |
| [510](#L510) | <a href="{{ data.entry\_url }}"> |
| [511](#L511) | <# } #> |
| [512](#L512) | {{ data.entry\_id }} |
| [513](#L513) | <# if ( data.entry\_id ) { #> |
| [514](#L514) | </a> |
| [515](#L515) | <# } #> |
| [516](#L516) | </div> |
| [517](#L517) | </div> |
| [518](#L518) | <div> |
| [519](#L519) | <div class="wpforms-log-popup-label"><?php esc\_html\_e( 'User ID', 'wpforms-lite' ); ?></div> |
| [520](#L520) | <div class="wpforms-log-popup-user-id"> |
| [521](#L521) | <# if ( data.user\_id ) { #> |
| [522](#L522) | <a href="{{ data.user\_url }}"> |
| [523](#L523) | <# } #> |
| [524](#L524) | {{ data.user\_id }} |
| [525](#L525) | <# if ( data.user\_id ) { #> |
| [526](#L526) | </a> |
| [527](#L527) | <# } #> |
| [528](#L528) | </div> |
| [529](#L529) | </div> |
| [530](#L530) | </div> |
| [531](#L531) | </div> |
| [532](#L532) | </script> |
| [533](#L533) | <?php |
| [534](#L534) | } |
| [535](#L535) |  |
| [536](#L536) | /\*\* |
| [537](#L537) | \* Display list table page. |
| [538](#L538) | \* |
| [539](#L539) | \* @since 1.6.3 |
| [540](#L540) | \*/ |
| [541](#L541) | public function display\_page() { |
| [542](#L542) |  |
| [543](#L543) | $this->prepare\_column\_headers(); |
| [544](#L544) | $this->prepare\_items(); |
| [545](#L545) |  |
| [546](#L546) | echo '<div class="wpforms-list-table wpforms-list-table--logs">'; |
| [547](#L547) | echo '<form id="' . esc\_attr( $this->\_args['plural'] ) . '-filter" method="get">'; |
| [548](#L548) | $this->header(); |
| [549](#L549) | $this->display(); |
| [550](#L550) | echo '</form>'; |
| [551](#L551) | echo '</div>'; |
| [552](#L552) | } |
| [553](#L553) |  |
| [554](#L554) | /\*\* |
| [555](#L555) | \* Check if the database table exists. |
| [556](#L556) | \* |
| [557](#L557) | \* @since 1.6.4 |
| [558](#L558) | \* @deprecated 1.8.7 |
| [559](#L559) | \* |
| [560](#L560) | \* @return bool |
| [561](#L561) | \* @noinspection PhpMissingReturnTypeInspection |
| [562](#L562) | \* @noinspection ReturnTypeCanBeDeclaredInspection |
| [563](#L563) | \*/ |
| [564](#L564) | public function table\_exists() { |
| [565](#L565) |  |
| [566](#L566) | // Deprecated as unused. |
| [567](#L567) | \_deprecated\_function( \_\_METHOD\_\_, '1.8.7 of the WPForms plugin' ); |
| [568](#L568) |  |
| [569](#L569) | return $this->repository->table\_exists(); |
| [570](#L570) | } |
| [571](#L571) |  |
| [572](#L572) | /\*\* |
| [573](#L573) | \* Get total logs. |
| [574](#L574) | \* |
| [575](#L575) | \* @since 1.6.3 |
| [576](#L576) | \* |
| [577](#L577) | \* @return int |
| [578](#L578) | \*/ |
| [579](#L579) | public function get\_total() { |
| [580](#L580) |  |
| [581](#L581) | return $this->repository->get\_total(); |
| [582](#L582) | } |
| [583](#L583) |  |
| [584](#L584) | /\*\* |
| [585](#L585) | \* Gets the screen per\_page option name. |
| [586](#L586) | \* |
| [587](#L587) | \* @since 1.7.5 |
| [588](#L588) | \* |
| [589](#L589) | \* @return string |
| [590](#L590) | \*/ |
| [591](#L591) | private function get\_per\_page\_option\_name() { |
| [592](#L592) |  |
| [593](#L593) | return str\_replace( '-', '\_', $this->screen->id ) . '\_per\_page'; |
| [594](#L594) | } |
| [595](#L595) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/wpforms-lite/tags/1.9.1.6/src/Logger/ListTable.php?format=txt)
* [Original Format](/export/3222434/wpforms-lite/tags/1.9.1.6/src/Logger/ListTable.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_24233ee8_20250114_182009.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# WPForms – Easy Form Builder for WordPress <= 1.9.1.6 - Cross-Site Request Forgery (CSRF) to Plugin's Log Deletion

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   WPForms – Easy Form Builder for WordPress <= 1.9.1.6 - Cross-Site Request Forgery (CSRF) to Plugin's Log Deletion

4.3

**Cross-Site Request Forgery (CSRF)**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N)

| CVE | [CVE-2024-10593](https://www.cve.org/CVERecord?id=CVE-2024-10593) |
| --- | --- |
| CVSS | 4.3 (Medium) |
| Publicly Published | November 12, 2024 |
| Last Updated | November 13, 2024 |
| Researcher | [Asaf Mozes](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/asaf-mozes) |

### Description

The WPForms – Easy Form Builder for WordPress – Contact Forms, Payment Forms, Surveys, & More plugin for WordPress is vulnerable to Cross-Site Request Forgery in all versions up to, and including, 1.9.1.6. This is due to missing or incorrect nonce validation on the process\_admin\_ui function. This makes it possible for unauthenticated attackers to delete WPForm logs via a forged request granted they can trick a site administrator into performing an action such as clicking on a link.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/wpforms-lite/tags/1.9.1.6/src/Admin/Tools/Views/Logs.php#L269)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/wpforms-lite/tags/1.9.1.6/src/Logger/ListTable.php#L394)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwpforms-lite%2Fwpforms-easy-form-builder-for-wordpress-1916-cross-site-request-forgery-csrf-to-plugins-log-deletion&t=WPForms%20%E2%80%93%20Easy%20Form%20Builder%20for%20WordPress%20%3C%3D%201.9.1.6%20-%20Cross-Site%20Request%20Forgery%20%28CSRF%29%20to%20Plugin%27s%20Log%20Deletion "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwpforms-lite%2Fwpforms-easy-form-builder-for-wordpress-1916-cross-site-request-forgery-csrf-to-plugins-log-deletion&text=WPForms%20%E2%80%93%20Easy%20Form%20Builder%20for%20WordPress%20%3C%3D%201.9.1.6%20-%20Cross-Site%20Request%20Forgery%20%28CSRF%29%20to%20Plugin%27s%20Log%20Deletion "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwpforms-lite%2Fwpforms-easy-form-builder-for-wordpress-1916-cross-site-request-forgery-csrf-to-plugins-log-deletion "LinkedIn")
Email

## Vulnerability Details for WPForms – Easy Form Builder for WordPress – Contact Forms, Payment Forms, Surveys, & More

#### [WPForms – Easy Form Builder for WordPress – Contact Forms, Payment Forms, Surveys, & More](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/wpforms-lite)

| Software Type | Plugin |
| --- | --- |
| Software Slug | wpforms-lite [(view on wordpress.org)](https://wordpress.org/plugins/wpforms-lite) |
| Patched? | Yes |
| Remediation | Update to version 1.9.2.1, or a newer patched version |
| Affected Version | * <= 1.9.1.6 |
| Patched Version | * 1.9.2.1 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_9aa94ed7_20250114_182004.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fwpforms-lite%2Ftags%2F1.9.1.6%2Fsrc%2FAdmin%2FTools%2FViews%2FLogs.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/wpforms-lite/tags/1.9.1.6/src/Admin/Tools/Views/Logs.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/wpforms-lite/tags/1.9.1.6/src/Admin/Tools/Views/Logs.php)

---

# [source:](/browser?order=name "Go to repository root") [wpforms-lite](/browser/wpforms-lite?order=name "View wpforms-lite")/[tags](/browser/wpforms-lite/tags?order=name "View tags")/[1.9.1.6](/browser/wpforms-lite/tags/1.9.1.6?order=name "View 1.9.1.6")/[src](/browser/wpforms-lite/tags/1.9.1.6/src?order=name "View src")/[Admin](/browser/wpforms-lite/tags/1.9.1.6/src/Admin?order=name "View Admin")/[Tools](/browser/wpforms-lite/tags/1.9.1.6/src/Admin/Tools?order=name "View Tools")/[Views](/browser/wpforms-lite/tags/1.9.1.6/src/Admin/Tools/Views?order=name "View Views")/[Logs.php](/browser/wpforms-lite/tags/1.9.1.6/src/Admin/Tools/Views/Logs.php?order=name "View Logs.php")

View diff against:

View revision:

| [Last change](/changeset/3177115/wpforms-lite/tags/1.9.1.6/src/Admin/Tools/Views/Logs.php "View differences") on this file was [3177115](/changeset/3177115/ "View changeset 3177115"), checked in by jrfoell, [3 months ago](/timeline?from=2024-10-28T14%3A08%3A29Z&precision=second "See timeline at 10/28/2024 02:08:29 PM") |
| --- |
| WPForms Lite v1.9.1.6 |
| **File size:** 8.2 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | namespace WPForms\Admin\Tools\Views; |
| [4](#L4) |  |
| [5](#L5) | use WPForms\Logger\Log; |
| [6](#L6) | use WPForms\Logger\ListTable; |
| [7](#L7) |  |
| [8](#L8) | /\*\* |
| [9](#L9) | \* Class Logs. |
| [10](#L10) | \* |
| [11](#L11) | \* @since 1.6.6 |
| [12](#L12) | \*/ |
| [13](#L13) | class Logs extends View { |
| [14](#L14) |  |
| [15](#L15) | /\*\* |
| [16](#L16) | \* View slug. |
| [17](#L17) | \* |
| [18](#L18) | \* @since 1.6.6 |
| [19](#L19) | \* |
| [20](#L20) | \* @var string |
| [21](#L21) | \*/ |
| [22](#L22) | protected $slug = 'logs'; |
| [23](#L23) |  |
| [24](#L24) | /\*\* |
| [25](#L25) | \* ListTable instance. |
| [26](#L26) | \* |
| [27](#L27) | \* @since 1.6.6 |
| [28](#L28) | \* |
| [29](#L29) | \* @var ListTable |
| [30](#L30) | \*/ |
| [31](#L31) | private $list\_table = []; |
| [32](#L32) |  |
| [33](#L33) | /\*\* |
| [34](#L34) | \* Init view. |
| [35](#L35) | \* |
| [36](#L36) | \* @since 1.6.6 |
| [37](#L37) | \*/ |
| [38](#L38) | public function init() { |
| [39](#L39) |  |
| [40](#L40) | $this->logs\_controller(); |
| [41](#L41) | } |
| [42](#L42) |  |
| [43](#L43) | /\*\* |
| [44](#L44) | \* Get view label. |
| [45](#L45) | \* |
| [46](#L46) | \* @since 1.6.6 |
| [47](#L47) | \* |
| [48](#L48) | \* @return string |
| [49](#L49) | \*/ |
| [50](#L50) | public function get\_label() { |
| [51](#L51) |  |
| [52](#L52) | return esc\_html\_\_( 'Logs', 'wpforms-lite' ); |
| [53](#L53) | } |
| [54](#L54) |  |
| [55](#L55) | /\*\* |
| [56](#L56) | \* Checking user capability to view. |
| [57](#L57) | \* |
| [58](#L58) | \* @since 1.6.6 |
| [59](#L59) | \* |
| [60](#L60) | \* @return bool |
| [61](#L61) | \*/ |
| [62](#L62) | public function check\_capability() { |
| [63](#L63) |  |
| [64](#L64) | return wpforms\_current\_user\_can(); |
| [65](#L65) | } |
| [66](#L66) |  |
| [67](#L67) | /\*\* |
| [68](#L68) | \* Get ListTable instance. |
| [69](#L69) | \* |
| [70](#L70) | \* @since 1.6.6 |
| [71](#L71) | \* |
| [72](#L72) | \* @return ListTable |
| [73](#L73) | \*/ |
| [74](#L74) | private function get\_list\_table(): ListTable { |
| [75](#L75) |  |
| [76](#L76) | if ( empty( $this->list\_table ) ) { |
| [77](#L77) | $log\_obj = wpforms()->obj( 'log' ); |
| [78](#L78) |  |
| [79](#L79) | if ( $log\_obj ) { |
| [80](#L80) | $this->list\_table = $log\_obj->get\_list\_table(); |
| [81](#L81) | } |
| [82](#L82) | } |
| [83](#L83) |  |
| [84](#L84) | return $this->list\_table; |
| [85](#L85) | } |
| [86](#L86) |  |
| [87](#L87) | /\*\* |
| [88](#L88) | \* Display view content. |
| [89](#L89) | \* |
| [90](#L90) | \* @since 1.6.6 |
| [91](#L91) | \*/ |
| [92](#L92) | public function display() { |
| [93](#L93) | ?> |
| [94](#L94) |  |
| [95](#L95) | <form action="<?php echo esc\_url( $this->get\_link() ); ?>" method="POST"> |
| [96](#L96) | <?php $this->nonce\_field(); ?> |
| [97](#L97) | <div class="wpforms-setting-row tools"> |
| [98](#L98) | <h4><?php esc\_html\_e( 'Log Settings', 'wpforms-lite' ); ?></h4> |
| [99](#L99) | <p><?php esc\_html\_e( 'Enable and configure the logging functionality while debugging behavior of various parts of the plugin, including form and entry processing.', 'wpforms-lite' ); ?></p> |
| [100](#L100) | </div> |
| [101](#L101) | <div class="wpforms-setting-row tools wpforms-setting-row-toggle wpforms-clear" id="wpforms-setting-row-logs-enable"> |
| [102](#L102) | <div class="wpforms-setting-label"> |
| [103](#L103) | <label for="wpforms-setting-logs-enable"><?php esc\_html\_e( 'Enable Logs', 'wpforms-lite' ); ?></label> |
| [104](#L104) | </div> |
| [105](#L105) | <div class="wpforms-setting-field"> |
| [106](#L106) | <span class="wpforms-toggle-control"> |
| [107](#L107) | <input type="checkbox" id="wpforms-setting-logs-enable" name="logs-enable" value="1" <?php checked( wpforms\_setting( 'logs-enable' ) ); ?>> |
| [108](#L108) | <label class="wpforms-toggle-control-icon" for="wpforms-setting-logs-enable"></label> |
| [109](#L109) | <label for="wpforms-setting-logs-enable" class="wpforms-toggle-control-status" data-on="On" data-off="Off"> |
| [110](#L110) | <?php wpforms\_setting( 'logs-enable' ) ? esc\_html\_e( 'On', 'wpforms-lite' ) : esc\_html\_e( 'Off', 'wpforms-lite' ); ?> |
| [111](#L111) | </label> |
| [112](#L112) | </span> |
| [113](#L113) | <p class="desc"> |
| [114](#L114) | <?php esc\_html\_e( 'Start logging WPForms-related events. This is recommended only while debugging.', 'wpforms-lite' ); ?> |
| [115](#L115) | </p> |
| [116](#L116) | </div> |
| [117](#L117) | </div> |
| [118](#L118) | <div class="wpforms-logs-settings <?php echo wpforms\_setting( 'logs-enable' ) ? '' : 'wpforms-hidden'; ?>"> |
| [119](#L119) | <?php |
| [120](#L120) | $this->types\_block(); |
| [121](#L121) | $this->user\_roles\_block(); |
| [122](#L122) | $this->users\_block(); |
| [123](#L123) | ?> |
| [124](#L124) | </div> |
| [125](#L125) |  |
| [126](#L126) | <p class="submit"> |
| [127](#L127) | <button class="wpforms-btn wpforms-btn-md wpforms-btn-orange" name="wpforms-settings-submit"> |
| [128](#L128) | <?php esc\_html\_e( 'Save Settings', 'wpforms-lite' ); ?> |
| [129](#L129) | </button> |
| [130](#L130) | </p> |
| [131](#L131) | </form> |
| [132](#L132) |  |
| [133](#L133) | <?php |
| [134](#L134) | $logs\_list\_table = $this->get\_list\_table(); |
| [135](#L135) |  |
| [136](#L136) | if ( wpforms\_setting( 'logs-enable' ) || $logs\_list\_table->get\_total() ) { |
| [137](#L137) | $logs\_list\_table->display\_page(); |
| [138](#L138) | } |
| [139](#L139) | } |
| [140](#L140) |  |
| [141](#L141) | /\*\* |
| [142](#L142) | \* Types block. |
| [143](#L143) | \* |
| [144](#L144) | \* @since 1.6.6 |
| [145](#L145) | \*/ |
| [146](#L146) | private function types\_block() { |
| [147](#L147) | ?> |
| [148](#L148) |  |
| [149](#L149) | <div |
| [150](#L150) | class="wpforms-setting-row tools wpforms-setting-row-select wpforms-clear" |
| [151](#L151) | id="wpforms-setting-row-log-types"> |
| [152](#L152) | <div class="wpforms-setting-label"> |
| [153](#L153) | <label for="wpforms-setting-logs-types"><?php esc\_html\_e( 'Log Types', 'wpforms-lite' ); ?></label> |
| [154](#L154) | </div> |
| [155](#L155) | <div class="wpforms-setting-field"> |
| [156](#L156) | <span class="choicesjs-select-wrap"> |
| [157](#L157) | <select id="wpforms-setting-logs-types" class="choicesjs-select" name="logs-types[]" multiple size="1"> |
| [158](#L158) | <?php |
| [159](#L159) | $log\_types = wpforms\_setting( 'logs-types', [] ); |
| [160](#L160) |  |
| [161](#L161) | foreach ( Log::get\_log\_types() as $slug => $name ) { |
| [162](#L162) | ?> |
| [163](#L163) | <option value="<?php echo esc\_attr( $slug ); ?>" <?php selected( in\_array( $slug, $log\_types, true ) ); ?> > |
| [164](#L164) | <?php echo esc\_html( $name ); ?> |
| [165](#L165) | </option> |
| [166](#L166) | <?php } ?> |
| [167](#L167) | </select> |
| [168](#L168) | </span> |
| [169](#L169) | <p class="desc"><?php esc\_html\_e( 'Select the types of events you want to log. Everything is logged by default.', 'wpforms-lite' ); ?></p> |
| [170](#L170) | </div> |
| [171](#L171) | </div> |
| [172](#L172) | <?php |
| [173](#L173) | } |
| [174](#L174) |  |
| [175](#L175) | /\*\* |
| [176](#L176) | \* User roles block. |
| [177](#L177) | \* |
| [178](#L178) | \* @since 1.6.6 |
| [179](#L179) | \*/ |
| [180](#L180) | private function user\_roles\_block() { |
| [181](#L181) | ?> |
| [182](#L182) |  |
| [183](#L183) | <div |
| [184](#L184) | class="wpforms-setting-row tools wpforms-setting-row-select wpforms-clear" |
| [185](#L185) | id="wpforms-setting-row-log-user-roles"> |
| [186](#L186) | <div class="wpforms-setting-label"> |
| [187](#L187) | <label for="wpforms-setting-logs-user-roles"><?php esc\_html\_e( 'User Roles', 'wpforms-lite' ); ?></label> |
| [188](#L188) | </div> |
| [189](#L189) | <div class="wpforms-setting-field"> |
| [190](#L190) | <span class="choicesjs-select-wrap"> |
| [191](#L191) | <?php |
| [192](#L192) | $logs\_user\_roles = wpforms\_setting( 'logs-user-roles', [] ); |
| [193](#L193) | $roles           = wp\_list\_pluck( get\_editable\_roles(), 'name' ); |
| [194](#L194) |  |
| [195](#L195) | ?> |
| [196](#L196) | <select id="wpforms-setting-logs-user-roles" class="choicesjs-select" name="logs-user-roles[]" multiple size="1"> |
| [197](#L197) | <?php foreach ( $roles as $slug => $name ) { ?> |
| [198](#L198) | <option value="<?php echo esc\_attr( $slug ); ?>" <?php selected( in\_array( $slug, $logs\_user\_roles, true ) ); ?> > |
| [199](#L199) | <?php echo esc\_html( $name ); ?> |
| [200](#L200) | </option> |
| [201](#L201) | <?php } ?> |
| [202](#L202) | </select> |
| [203](#L203) | <span class="hidden" id="wpforms-setting-logs-user-roles-selectform-spinner"> |
| [204](#L204) | <i class="fa fa-cog fa-spin fa-lg"></i> |
| [205](#L205) | </span> |
| [206](#L206) | </span> |
| [207](#L207) | <p class="desc"> |
| [208](#L208) | <?php esc\_html\_e( 'Select the user roles you want to log. All roles are logged by default.', 'wpforms-lite' ); ?> |
| [209](#L209) | </p> |
| [210](#L210) | </div> |
| [211](#L211) | </div> |
| [212](#L212) | <?php |
| [213](#L213) | } |
| [214](#L214) |  |
| [215](#L215) | /\*\* |
| [216](#L216) | \* Users block. |
| [217](#L217) | \* |
| [218](#L218) | \* @since 1.6.6 |
| [219](#L219) | \*/ |
| [220](#L220) | private function users\_block() { |
| [221](#L221) | ?> |
| [222](#L222) |  |
| [223](#L223) | <div |
| [224](#L224) | class="wpforms-setting-row tools wpforms-setting-row-select wpforms-clear" |
| [225](#L225) | id="wpforms-setting-row-log-users"> |
| [226](#L226) | <div class="wpforms-setting-label"> |
| [227](#L227) | <label for="wpforms-setting-logs-users"><?php esc\_html\_e( 'Users', 'wpforms-lite' ); ?></label> |
| [228](#L228) | </div> |
| [229](#L229) | <div class="wpforms-setting-field"> |
| [230](#L230) | <span class="choicesjs-select-wrap"> |
| [231](#L231) | <select id="wpforms-setting-logs-users" class="choicesjs-select" name="logs-users[]" multiple size="1"> |
| [232](#L232) | <?php |
| [233](#L233) | $users      = get\_users( [ 'fields' => [ 'ID', 'display\_name' ] ] ); |
| [234](#L234) | $users      = wp\_list\_pluck( $users, 'display\_name', 'ID' ); |
| [235](#L235) | $logs\_users = wpforms\_setting( 'logs-users', [] ); |
| [236](#L236) |  |
| [237](#L237) | foreach ( $users as $slug => $name ) { |
| [238](#L238) | ?> |
| [239](#L239) | <option value="<?php echo esc\_attr( $slug ); ?>" <?php selected( in\_array( $slug, $logs\_users, true ) ); ?> > |
| [240](#L240) | <?php echo esc\_html( $name ); ?> |
| [241](#L241) | </option> |
| [242](#L242) | <?php } ?> |
| [243](#L243) | </select> |
| [244](#L244) | <span class="hidden" id="wpforms-setting-logs-users-selectform-spinner"> |
| [245](#L245) | <i class="fa fa-cog fa-spin fa-lg"></i> |
| [246](#L246) | </span> |
| [247](#L247) | </span> |
| [248](#L248) | <p class="desc"> |
| [249](#L249) | <?php esc\_html\_e( 'Log events for specific users only. All users are logged by default.', 'wpforms-lite' ); ?> |
| [250](#L250) | </p> |
| [251](#L251) | </div> |
| [252](#L252) | </div> |
| [253](#L253) | <?php |
| [254](#L254) | } |
| [255](#L255) |  |
| [256](#L256) | /\*\* |
| [257](#L257) | \* Controller. |
| [258](#L258) | \* |
| [259](#L259) | \* @since 1.6.6 |
| [260](#L260) | \*/ |
| [261](#L261) | private function logs\_controller() { |
| [262](#L262) |  |
| [263](#L263) | if ( $this->verify\_nonce() ) { |
| [264](#L264) | $this->update\_settings(); |
| [265](#L265) | } |
| [266](#L266) |  |
| [267](#L267) | $logs\_list\_table = $this->get\_list\_table(); |
| [268](#L268) |  |
| [269](#L269) | $logs\_list\_table->process\_admin\_ui(); |
| [270](#L270) | } |
| [271](#L271) |  |
| [272](#L272) | /\*\* |
| [273](#L273) | \* Update settings. |
| [274](#L274) | \* |
| [275](#L275) | \* @since 1.8.7 |
| [276](#L276) | \* |
| [277](#L277) | \* @return void |
| [278](#L278) | \*/ |
| [279](#L279) | public function update\_settings() { |
| [280](#L280) |  |
| [281](#L281) | $settings                = get\_option( 'wpforms\_settings' ); |
| [282](#L282) | $was\_enabled             = ! empty( $settings['logs-enable'] ) ? $settings['logs-enable'] : 0; |
| [283](#L283) | $settings['logs-enable'] = filter\_input( INPUT\_POST, 'logs-enable', FILTER\_VALIDATE\_BOOLEAN ); |
| [284](#L284) | $logs\_types              = filter\_input( INPUT\_POST, 'logs-types', FILTER\_SANITIZE\_FULL\_SPECIAL\_CHARS, FILTER\_REQUIRE\_ARRAY ); |
| [285](#L285) | $logs\_user\_roles         = filter\_input( INPUT\_POST, 'logs-user-roles', FILTER\_SANITIZE\_FULL\_SPECIAL\_CHARS, FILTER\_REQUIRE\_ARRAY ); |
| [286](#L286) | $logs\_users              = filter\_input( INPUT\_POST, 'logs-users', FILTER\_SANITIZE\_NUMBER\_INT, FILTER\_REQUIRE\_ARRAY ); |
| [287](#L287) |  |
| [288](#L288) | if ( $was\_enabled ) { |
| [289](#L289) | $settings['logs-types']      = $logs\_types ? $logs\_types : []; |
| [290](#L290) | $settings['logs-user-roles'] = $logs\_user\_roles ? $logs\_user\_roles : []; |
| [291](#L291) | $settings['logs-users']      = $logs\_users ? array\_map( 'absint', $logs\_users ) : []; |
| [292](#L292) | } |
| [293](#L293) |  |
| [294](#L294) | wpforms\_update\_settings( $settings ); |
| [295](#L295) | } |
| [296](#L296) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/wpforms-lite/tags/1.9.1.6/src/Admin/Tools/Views/Logs.php?format=txt)
* [Original Format](/export/3222434/wpforms-lite/tags/1.9.1.6/src/Admin/Tools/Views/Logs.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


