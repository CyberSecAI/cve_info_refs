=== Content from www.wordfence.com_8d133c4a_20250115_102357.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Active Products Tables for WooCommerce. Use constructor to create tables <= 1.0.6.5 - Unauthenticated Arbitrary Shortcode Execution via woot\_get\_smth

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Active Products Tables for WooCommerce. Use constructor to create tables <= 1.0.6.5 - Unauthenticated Arbitrary Shortcode Execution via woot\_get\_smth

7.3

**Improper Control of Generation of Code ('Code Injection')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:L/I:L/A:L](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:L/I:L/A:L)

| CVE | [CVE-2024-10959](https://www.cve.org/CVERecord?id=CVE-2024-10959) |
| --- | --- |
| CVSS | 7.3 (High) |
| Publicly Published | December 9, 2024 |
| Last Updated | December 10, 2024 |
| Researcher | [Arkadiusz Hydzik](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/arkadiusz-hydzik) |

### Description

The The Active Products Tables for WooCommerce. Use constructor to create tables plugin for WordPress is vulnerable to arbitrary shortcode execution via woot\_get\_smth AJAX action in all versions up to, and including, 1.0.6.5. This is due to the software allowing users to execute an action that does not properly validate a value before running do\_shortcode. This makes it possible for unauthenticated attackers to execute arbitrary shortcodes.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/profit-products-tables-for-woocommerce/trunk/index.php#L1666)
* [wordpress.org](https://wordpress.org/plugins/profit-products-tables-for-woocommerce/#developers)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3199368/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fprofit-products-tables-for-woocommerce%2Factive-products-tables-for-woocommerce-use-constructor-to-create-tables-1065-unauthenticated-arbitrary-shortcode-execution-via-woot-get-smth&t=Active%20Products%20Tables%20for%20WooCommerce.%20Use%20constructor%20to%20create%20tables%20%3C%3D%201.0.6.5%20-%20Unauthenticated%20Arbitrary%20Shortcode%20Execution%20via%20woot_get_smth "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fprofit-products-tables-for-woocommerce%2Factive-products-tables-for-woocommerce-use-constructor-to-create-tables-1065-unauthenticated-arbitrary-shortcode-execution-via-woot-get-smth&text=Active%20Products%20Tables%20for%20WooCommerce.%20Use%20constructor%20to%20create%20tables%20%3C%3D%201.0.6.5%20-%20Unauthenticated%20Arbitrary%20Shortcode%20Execution%20via%20woot_get_smth "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fprofit-products-tables-for-woocommerce%2Factive-products-tables-for-woocommerce-use-constructor-to-create-tables-1065-unauthenticated-arbitrary-shortcode-execution-via-woot-get-smth "LinkedIn")
Email

## Vulnerability Details for Active Products Tables for WooCommerce. Use constructor to create tables

#### [Active Products Tables for WooCommerce. Use constructor to create tables](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/profit-products-tables-for-woocommerce)

| Software Type | Plugin |
| --- | --- |
| Software Slug | profit-products-tables-for-woocommerce [(view on wordpress.org)](https://wordpress.org/plugins/profit-products-tables-for-woocommerce) |
| Patched? | Yes |
| Remediation | Update to version 1.0.6.6, or a newer patched version |
| Affected Version | * <= 1.0.6.5 |
| Patched Version | * 1.0.6.6 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from wordpress.org_dc113e80_20250115_102355.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Active Products Tables for WooCommerce. Use constructor to create tables

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fprofit-products-tables-for-woocommerce&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fprofit-products-tables-for-woocommerce&locale=en_US)

Search plugins

![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/banner-772x250.png?rev=2630049)
![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/icon-256x256.png?rev=2630049)
# Active Products Tables for WooCommerce. Use constructor to create tables

By [realmag777](https://pluginus.net/)

[Download](https://downloads.wordpress.org/plugin/profit-products-tables-for-woocommerce.zip)

* [Details](https://wordpress.org/plugins/profit-products-tables-for-woocommerce/#description)
* [Reviews](https://wordpress.org/plugins/profit-products-tables-for-woocommerce/#reviews)
* [Installation](https://wordpress.org/plugins/profit-products-tables-for-woocommerce/#installation)
* [Development](https://wordpress.org/plugins/profit-products-tables-for-woocommerce/#developers)

[Support](https://wordpress.org/support/plugin/profit-products-tables-for-woocommerce/)

## Description

**Active Products Tables for WooCommerce** (second name is WOOT) – is WordPress plugin for WooCommerce products, created for displaying woo shop products in the table format. Woo Products tables makes focus for your buyers on the things they want to get, nothing superfluous, just what the client wants, and full attention to what is offered! Ideal way to higher sells on your woocommerce store!

🐘 Latest PHP 8.x – FULL COMPATIBILITY! Compatibility: from v.3.6 to the latest woocommerce version.

🌐 Demo site: [demo.products-tables.com](https://demo.products-tables.com/). [Also you can request backend demo](https://products-tables.com/woot-backend-demo-request).

📄 If you need plugin for pages, posts and their custom post types use: [TableOn](https://wordpress.org/plugins/posts-table-filterable/).

### Active Products Tables Features:

🛠️ Columns constructor

🖼️ Neat shortcode [[woot]](https://products-tables.com/shortcode/woot/) with heap of attributes for flexibility

🎩 [Many possible tricks](https://products-tables.com/document/after-woot-installation-you-can-do-next/) with the products tables!

📋 [More than 40 predefined column fields](https://demo.products-tables.com/woot-with-all-possible-columns/) is possible to display

✏️ [Possibility to create custom columns](https://products-tables.com/how-to-add-custom-column-to-the-tables/)

🎨 Skins for each table. On the same web page can be represented [some products tables with the different skins](https://demo.products-tables.com/different-skins/). Create [your own skins by CSS](https://products-tables.com/document/skins/).

🔍 Powerful product filter constructor

🎛️ [Big variety of filter elements](https://demo.products-tables.com/woot-with-all-possible-filters/) by: price, title, content, excerpt, SKU, attributes, taxonomy, meta fields, in stock, on sale, width, height, length, weight, etc…

🧩 Filters can be represented as: dropdown, multi drop-down, range sliders, textinput, calendars, switcher

🎯 Predefinition mechanism: show to your customers predefined and relevant set of products as in the table, so in the popup.

🔢 25 ways of the products sorting

🌍 Power feature as [remote tables](https://inbuilt.products-tables.com/) which gives ability to spread your shop products to any another sites even created on pure HTML without any CMS, what allows you get more sells and also realize your own referral program

🖼️ Column “Gallery” – smooth CSS gallery to showcase the best of your products. Also a product gallery can be represented by shortcode [[woot gallery]](https://products-tables.com/shortcode/woot_gallery/)

🛒 Shortcode [[woot\_cart]](https://products-tables.com/shortcode/woot_cart/) allows to create custom cart page

⭐ Shortcode [[woot\_reviews]](https://products-tables.com/shortcode/woot_reviews/) allows to show the table with reviews for the current product on its single page or any another one

🔗 Shortcode [[woot\_cross\_sells]](https://products-tables.com/shortcode/woot_cross_sells/) allows to show the table with cross sell products for the current product on its single page or any another one

🔼 Shortcode [[woot\_upsells]](https://products-tables.com/shortcode/woot_upsells/) allows to show the table with upsell products for the current product on its single page or any another one

🔄 Shortcode [[woot\_variations]](https://products-tables.com/shortcode/woot_variations/) allows to show the table with variations products for the current product on its single page or any another one

🔗 Shortcode [[woot\_related]](https://products-tables.com/shortcode/woot_related/) allows to show the table with related products for the current product on its single page or any another one

❤️ Shortcode [[woot\_favourites]](https://products-tables.com/shortcode/woot_favourites/) allows to show the table with selected products by the current user

📦 Shortcode [[woot\_single]](https://products-tables.com/shortcode/woot_single/) allows to show the table with a product parameters for any one selected ones

🏷️ Ability to show multi vendors their products using attribute param author: [[woot author=23]](https://products-tables.com/shortcode/woot/)

💬 Ability to create custom columns, for example such as [“Ask manager about the product”](https://products-tables.com/shortcode/woot_popup_iframe_button/) using any contact form plugins

📱 Responsivity: all the products tables have an option for compact view on mobile devices!

⚙️ Big and flexible set of options for each product table, some of them: Hide added in cart products, Show cart, Show Sorting Dropdown, Sorting Dropdown Fields, Compact view width, Use load more button, Hide filter form, Show print button, Default order by, Per page drop-down position, Per page drop-down position, Per page values, Per page default

🏷️ Set of options for each product column, some basic: Width, Font size, Font family, Color, Background, Hide on small screen

🗃️ Ability to add meta fields data in the table columns using in-built constructor

🖼️ Ability to [show a product table in the popup on click](https://demo.products-tables.com/table-as-link/). Show tables in popup in your shop text content with relevant predefined tables. Unlimited count of tables in popup per page can be created!

🛒 In-built shopping cart on top of the tables, which also presented as shortcode and can be pasted on the site pages

🔄 [Caching table of products](https://demo.products-tables.com/cached-table-of-products/) mechanism

🖨️ Print button

🛒 Possibility to add to cart many products in one click

📱 Mobile compact view option

🎨 CSS editor

📑 Pagination

🔄 [Compatible with WOOF](https://demo.products-filter.com/demonstration-of-woot-and-woof-compatibility)

🔄 [Compatible with MDTF](https://woocommerce.wp-filter.com/demonstration-of-woot-and-mdtf-compatibility/)

🔄 [Compatible with WOOCS](https://demo.currency-switcher.com/demonstration-of-woot-and-woocs-compatibility/)

🔄 [Compatible with BEAR](https://bulk-editor.com/)

🔄 Compatible with [Custom Post Type UI](https://wordpress.org/plugins/custom-post-type-ui/)

🌐 WPML compatible

🧩 Shortcodes works in Elementor and Page builder page content

🚀 [Power and strong API](https://products-tables.com/codex/)

⚛️ no jQuery – 100% pure JavaScript

🛠️ [Strong technical support which each day works with tones of code!](https://pluginus.net/support/forum/woot-woocommerce-active-products-tables/)

* [📚 Documentation](https://products-tables.com/woot-documentation/)
* [💎 The Premium version](https://codecanyon.pluginus.net/item/woot-woocommerce-products-tables/27928580)

### Premium version:

🌟 In the premium version [all features and extensions included](https://products-tables.com/downloads)

🌟 You can get premium version of the plugin on the [CodeCanyon](https://codecanyon.pluginus.net/item/woot-woocommerce-products-tables/27928580)

### Make your site more profitable with next powerful scripts:

✅ [WOOF – Products Filter for WooCommerce](https://wordpress.org/plugins/woocommerce-products-filter/): products filter plugin for WooCommerce that allows your customers filter products by categories, attributes, products tags, products custom taxonomies and price – a must have plugin for your WooCommerce online store!

✅ [BEAR – WooCommerce Bulk Editor and Products Manager Professional](https://bulk-editor.com/): WordPress plugin for managing and bulk edit WooCommerce Products data in the reliable and flexible way! Be professionals with managing data of your e-shop!

✅ [WOOCS – Currency Switcher for WooCommerce](https://wordpress.org/plugins/woocommerce-currency-switcher/): is WooCommerce multi currency plugin, that allows your site visitors switch products prices currencies according to set currencies rates in the real time and pay in the selected currency (optionally). Allows to add any currency for WooCommerce store!

✅ [TABLEON – WordPress Post Tables Filterable](https://wordpress.org/plugins/posts-table-filterable): WordPress plugin for displaying site posts and their custom post types in table format. Tables makes focus for your customers on the things they want to get, nothing superfluous, just what the client wants, and full attention to what is offered!

✅ [WPCS – WordPress Currency Switcher](https://wordpress.org/plugins/currency-switcher/): is a WordPress plugin that allows to switch currencies and get their rates converted in the real time on your site!

✅ [WOLF – WordPress Posts Bulk Editor and Manager Professional](https://wordpress.org/plugins/bulk-editor/): is WordPress plugin for managing and bulk edit WordPress posts, pages and custom post types data in robust and flexible way! Be professionals with managing data of your site!

✅ [Taxonomy Chain Menu](https://wordpress.org/plugins/taxonomy-chain-menu/): is WordPress plugin with one shortcode, which allows to create taxonomies terms chain menus using dropdowns with inbuilt or custom types of WordPress taxonomies.

### License

This plugin is copyright pluginus.net © 2012-2025 with [GPLv2](https://en.wikipedia.org/wiki/GNU_General_Public_License) by realmag777.

This program is free software; you can redistribute it and/or modify it under the terms of the [GNU General Public License](http://www.gnu.org/copyleft/gpl.html) as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY. See the GNU General Public License for more details.

## Screenshots

* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-1.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-1.png?rev=2755940)

  The plugin settings
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-2.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-2.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-3.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-3.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-4.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-4.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-5.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-5.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-6.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-6.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-7.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-7.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-8.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-8.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-9.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-9.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-10.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-10.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-11.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-11.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-12.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-12.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-13.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-13.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-14.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-14.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-15.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-15.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-16.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-16.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-17.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-17.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-18.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-18.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-19.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-19.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-20.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-20.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-21.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-21.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-22.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-22.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-23.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-23.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-24.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-24.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-25.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-25.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-26.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-26.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-27.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-27.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-28.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-28.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-29.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-29.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-30.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-30.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-31.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-31.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-32.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-32.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-33.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-33.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-34.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-34.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-35.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-35.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-36.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-36.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-37.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-37.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-38.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-38.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-39.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-39.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-40.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-40.png?rev=2755940)
* [![](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-41.png?rev=2755940)](https://ps.w.org/profit-products-tables-for-woocommerce/assets/screenshot-41.png?rev=2755940)

## Installation

* Download to your plugin directory or simply install via WordPress admin interface.
* Activate.
* Use.

## FAQ

Q: Where can I get the Premium version of the plugin

R: [CodeCanyon](https://codecanyon.pluginus.net/item/woot-woocommerce-products-tables/27928580)

Q: How to create a custom taxomomy?

R: Use this plugin <https://wordpress.org/plugins/custom-post-type-ui/>

Q: FAQ?

R: [FAQ](https://products-tables.com/faq/)

Q: Documentation?

R: <https://products-tables.com/woot-documentation/>

Q: I have an idea, can I discuss it with you?

R: [Support](https://pluginus.net/support/forum/woot-woocommerce-active-products-tables/)

## Reviews

![](https://secure.gravatar.com/avatar/bb921f05a87739f14398763cf3a5f8f8f89243376666e31b6f6988169eebc7f1?s=60&d=retro&r=g)
### [Active Products Tables for WooCommerce: A Game-Changer for Product Display](https://wordpress.org/support/topic/active-products-tables-for-woocommerce-a-game-changer-for-product-display/)

[mrknoahoe](https://profiles.wordpress.org/mrknoahoe/ "Posts by mrknoahoe")
January 11, 2025
1 reply

The Active Products Tables for WooCommerce plugin is a must-have for anyone looking to streamline their online store’s user experience. It transforms your product pages into sleek, interactive tables that make it easier for customers to browse, compare, and purchase products.Key Features We Love:
Customizable Tables: The plugin offers extensive customization options, allowing you to adjust columns, styles, and features to fit your brand’s unique needs.
Search & Filter Options: Customers can quickly search and filter products, improving navigation and helping them find exactly what they’re looking for.
Responsive Design: The tables look great on any device, ensuring a seamless shopping experience for mobile and desktop users alike.
Bulk Actions: Perfect for wholesale customers, this feature lets users add multiple items to the cart with just a few clicks.
Easy Integration: The plugin integrates effortlessly with WooCommerce and supports various product types, including variable products.
Performance and Usability
The plugin is lightweight and doesn’t slow down your site, even with extensive product catalogs. The interface is intuitive, making setup quick and easy for store owners of all experience levels.Final Thoughts
If you’re running a WooCommerce store and want to enhance the way you showcase your products, Active Products Tables for WooCommerce is a fantastic investment. Its functionality not only boosts user satisfaction but can also lead to higher conversions by simplifying the buying process.

![](https://secure.gravatar.com/avatar/e31cbe267fe1cac1b2f6c0951e071fb451ff9531504b375873a0084bbce4f704?s=60&d=retro&r=g)
### [Sản phẩm tốt cho công việc SEO tôi đã sử dụng rất hay](https://wordpress.org/support/topic/san-pham-tot-cho-cong-viec-seo-toi-da-su-dung-rat-hay-2/)

[Vũ Chính](https://profiles.wordpress.org/vuchinhtb/ "Posts by Vũ Chính")
September 15, 2024
1 reply

Sản phẩm tốt cho công việc SEO tôi đã sử dụng rất hay

![](https://secure.gravatar.com/avatar/7a02cd78d177638160476f363d08e07023698442e9b3407393907b7aa055e601?s=60&d=retro&r=g)
### [Una idea Genial](https://wordpress.org/support/topic/una-idea-genial-2/)

[cupomatico](https://profiles.wordpress.org/cupomatico/ "Posts by cupomatico")
February 6, 2024
1 reply

Es ideal para mostrar informacion al publico en general, concreta y resumida, todo en uno, muy buen productos y maravillosa idea.

![](https://secure.gravatar.com/avatar/fe5eb673b9a00f6f0401eaf6a48b5db9074819739473d5522a501865411cf719?s=60&d=retro&r=g)
### [useful plugin and great support](https://wordpress.org/support/topic/useful-plugin-and-great-support-26/)

[ivang69](https://profiles.wordpress.org/ivang69/ "Posts by ivang69")
October 24, 2023
1 reply

I have good impression of the plugin functions – it is really useful. And for all my questions I received prompt and helpful support.

![](https://secure.gravatar.com/avatar/929ce32f7d1068ad2275096255bd09a4371680d9319ebaee2804ad5214f86647?s=60&d=retro&r=g)
### [great](https://wordpress.org/support/topic/great-15512/)

[feshope](https://profiles.wordpress.org/feshope/ "Posts by feshope")
April 24, 2023
1 reply

Very nice support and follow upThank you all

![](https://secure.gravatar.com/avatar/393ec7bf5bccec4c76234e73ab76548ce689df316913cc0d0e96676627c0aa5f?s=60&d=retro&r=g)
### [Great plugin, you guys helped me a lot!](https://wordpress.org/support/topic/great-plugin-you-guys-helped-me-a-lot/)

[doanthaoan](https://profiles.wordpress.org/doanthaoan/ "Posts by doanthaoan")
September 26, 2022
1 reply

Thank you very much for this plugin!
It took me many many time and effort to find a way to display variation product on table with my customization. And you guys provided them all in this awesome plugin.
Best regard,
Andt

[Read all 18 reviews](https://wordpress.org/support/plugin/profit-products-tables-for-woocommerce/reviews/)
## Contributors & Developers

“Active Products Tables for WooCommerce. Use constructor to create tables ” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/ec8b8422bb465ae8bc396e91e6078b8974b35a964447f8c8ecc86edf1ac2b281?s=32&d=mm&r=g) [RealMag777](https://profiles.wordpress.org/realmag777/)

“Active Products Tables for WooCommerce. Use constructor to create tables ” has been translated into 2 locales. Thank you to [the translators](https://translate.wordpress.org/projects/wp-plugins/profit-products-tables-for-woocommerce/contributors) for their contributions.

[Translate “Active Products Tables for WooCommerce. Use constructor to create tables ” into your language.](https://translate.wordpress.org/projects/wp-plugins/profit-products-tables-for-woocommerce)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/profit-products-tables-for-woocommerce/), check out the [SVN repository](https://plugins.svn.wordpress.org/profit-products-tables-for-woocommerce/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/profit-products-tables-for-woocommerce/) by [RSS](https://plugins.trac.wordpress.org/log/profit-products-tables-for-woocommerce/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### 1.0.6.6

* one security fix, thanks to Arkadiusz Hydzik and Wordfence

#### 1.0.6.5

* one security fix, thanks to Peter Thaleikis and Wordfence

#### 1.0.6.4

* one security fix, thanks to Le Ngoc Anh and Patchstack

#### 1.0.6.3

* security fixes, thanks to Dhabaleshwar Das and Patchstack

#### 1.0.6.2

* security fixes, thanks to Wordfence WordPress security provider

#### 1.0.6.1

* security fixes, thanks to Darius Sveikauskas and Patchstack

#### 1.0.6

* small fixes
* 3 new skins: simple, monolith, alico

#### 1.0.5

* small fixes
* one security fix, thanks to Security Researchers for WPScan
* new admin panel
* in predefinition added “Favourites only” to show Favourites products as as full powered [woot] table

#### 1.0.4

* Closure Notice – Security

#### 1.0.3.1

* some fixes for PHP 8.0 compatibility

#### 1.0.3

* [https://products-tables.com/update-v-2-0-3-v-1-0-3/](https://products-tables.com/update-v-2-0-3-v-1-0-3/3)

#### 1.0.2

* <https://products-tables.com/update-v-2-0-2-v-1-0-2/>

#### 1.0.1

* fixed attribute ‘author’ for shortcode [woot]
* fixed Vocabulary work for such shortcodes as [woot\_grouped]

#### 1.0.0

* Release

## Meta

* Version **1.0.6.6**
* Last updated **2 months ago**
* Active installations **2,000+**
* WordPress version **4.9 or higher**
* Tested up to **6.7.1**
* PHP version **7.2 or higher**
* Languages
  See all 3

  Close

  [English (US)](https://wordpress.org/plugins/profit-products-tables-for-woocommerce/), [Russian](https://ru.wordpress.org/plugins/profit-products-tables-for-woocommerce/), and [Spanish (Spain)](https://es.wordpress.org/plugins/profit-products-tables-for-woocommerce/).

  [Translate into your language](https://translate.wordpress.org/projects/wp-plugins/profit-products-tables-for-woocommerce)
* Tags [product table](https://wordpress.org/plugins/tags/product-table/)[products filter](https://wordpress.org/plugins/tags/products-filter/)[products table](https://wordpress.org/plugins/tags/products-table/)[table](https://wordpress.org/plugins/tags/table/)[woocommerce product table](https://wordpress.org/plugins/tags/woocommerce-product-table/)
* [Advanced View](https://wordpress.org/plugins/profit-products-tables-for-woocommerce/advanced/)

## Ratings

4.8 out of 5 stars.

* [17 5-star reviews
  5 stars

  17](https://wordpress.org/support/plugin/profit-products-tables-for-woocommerce/reviews/?filter=5)
* [0 4-star reviews
  4 stars

  0](https://wordpress.org/support/plugin/profit-products-tables-for-woocommerce/reviews/?filter=4)
* [0 3-star reviews
  3 stars

  0](https://wordpress.org/support/plugin/profit-products-tables-for-woocommerce/reviews/?filter=3)
* [0 2-star reviews
  2 stars

  0](https://wordpress.org/support/plugin/profit-products-tables-for-woocommerce/reviews/?filter=2)
* [1 1-star review
  1 star

  1](https://wordpress.org/support/plugin/profit-products-tables-for-woocommerce/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/profit-products-tables-for-woocommerce/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/profit-products-tables-for-woocommerce/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/ec8b8422bb465ae8bc396e91e6078b8974b35a964447f8c8ecc86edf1ac2b281?s=32&d=mm&r=g) [RealMag777](https://profiles.wordpress.org/realmag777/)
## Support

Got something to say? Need help?

[View support forum](https://wordpress.org/support/plugin/profit-products-tables-for-woocommerce/)

## Donate

Would you like to support the advancement of this plugin?

[Donate to this plugin](https://codecanyon.pluginus.net/item/woot-woocommerce-products-tables/27928580)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_e9e3084b_20250115_102352.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fprofit-products-tables-for-woocommerce%2Ftrunk%2Findex.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/profit-products-tables-for-woocommerce/trunk/index.php?rev=3188516 "Revision 3188516")
* Next Revision →
* [Blame](/browser/profit-products-tables-for-woocommerce/trunk/index.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/profit-products-tables-for-woocommerce/trunk/index.php)

---

# [source:](/browser?order=name "Go to repository root") [profit-products-tables-for-woocommerce](/browser/profit-products-tables-for-woocommerce?order=name "View profit-products-tables-for-woocommerce")/[trunk](/browser/profit-products-tables-for-woocommerce/trunk?order=name "View trunk")/[index.php](/browser/profit-products-tables-for-woocommerce/trunk/index.php?order=name "View index.php")

View diff against:

View revision:

| [Last change](/changeset/3199368/profit-products-tables-for-woocommerce/trunk/index.php "View differences") on this file was [3199368](/changeset/3199368/ "View changeset 3199368"), checked in by RealMag777, [7 weeks ago](/timeline?from=2024-11-29T10%3A53%3A34Z&precision=second "See timeline at 11/29/2024 10:53:34 AM") |
| --- |
| one security fix, thanks to Arkadiusz Hydzik and Wordfence |
| **File size:** 90.4 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\* |
| [3](#L3) | Plugin Name: Active Products Tables for WooCommerce |
| [4](#L4) | Plugin URI: https://products-tables.com/ |
| [5](#L5) | Description: WooCommerce plugin for displaying shop products in table format. Tables makes focus for your buyers on the things they want to get, nothing superfluous, just what the client wants, and full attention to what is offered! |
| [6](#L6) | Requires at least: WP 4.9 |
| [7](#L7) | Tested up to: WP 6.7 |
| [8](#L8) | Author: realmag777 |
| [9](#L9) | Author URI: https://pluginus.net/ |
| [10](#L10) | Version: 1.0.6.6 |
| [11](#L11) | Requires PHP: 7.2 |
| [12](#L12) | Tags: tables, products, filter, woocommerce, products table |
| [13](#L13) | Text Domain: profit-products-tables-for-woocommerce |
| [14](#L14) | Domain Path: /languages |
| [15](#L15) | WC requires at least: 5.6 |
| [16](#L16) | WC tested up to: 9.4 |
| [17](#L17) | Forum URI: https://pluginus.net/support/forum/woot-woocommerce-active-products-tables/ |
| [18](#L18) | \*/ |
| [19](#L19) |  |
| [20](#L20) | if (!defined('ABSPATH')) { |
| [21](#L21) | exit; // Exit if accessed directly |
| [22](#L22) | } |
| [23](#L23) |  |
| [24](#L24) | //+++ |
| [25](#L25) |  |
| [26](#L26) | define('WOOT\_PATH', plugin\_dir\_path(\_\_FILE\_\_)); |
| [27](#L27) | define('WOOT\_LINK', plugin\_dir\_url(\_\_FILE\_\_)); |
| [28](#L28) | define('WOOT\_ASSETS\_LINK', WOOT\_LINK . 'assets/'); |
| [29](#L29) | define('WOOT\_ASSETS\_PATH', WOOT\_PATH . 'assets/'); |
| [30](#L30) | define('WOOT\_PLUGIN\_NAME', plugin\_basename(\_\_FILE\_\_)); |
| [31](#L31) | define('WOOT\_VERSION', '1.0.6.6'); |
| [32](#L32) | //define('WOOT\_VERSION', uniqid('woot-')); //for dev |
| [33](#L33) |  |
| [34](#L34) | require\_once WOOT\_PATH . 'install.php'; |
| [35](#L35) |  |
| [36](#L36) | //classes |
| [37](#L37) | include\_once WOOT\_PATH . 'lib/storage.php'; |
| [38](#L38) | include\_once WOOT\_PATH . 'lib/helper.php'; |
| [39](#L39) | include\_once WOOT\_PATH . 'classes/settings.php'; |
| [40](#L40) | include\_once WOOT\_PATH . 'classes/vocabulary.php'; |
| [41](#L41) | include\_once WOOT\_PATH . 'classes/predefinition.php'; |
| [42](#L42) | include\_once WOOT\_PATH . 'classes/filter.php'; |
| [43](#L43) | include\_once WOOT\_PATH . 'classes/skins.php'; |
| [44](#L44) | include\_once WOOT\_PATH . 'classes/tables.php'; |
| [45](#L45) | //include\_once WOOT\_PATH . 'lib/rate\_alert.php'; |
| [46](#L46) | //profiles |
| [47](#L47) | //include WOOT\_PATH . 'profiles/default.php'; |
| [48](#L48) | include\_once WOOT\_PATH . 'profiles/woocommerce/woocommerce.php'; |
| [49](#L49) | add\_action('before\_woocommerce\_init', function () { |
| [50](#L50) | if (class\_exists('\Automattic\WooCommerce\Utilities\FeaturesUtil')) { |
| [51](#L51) | \Automattic\WooCommerce\Utilities\FeaturesUtil::declare\_compatibility('custom\_order\_tables', \_\_FILE\_\_, true); |
| [52](#L52) | } |
| [53](#L53) | }); |
| [54](#L54) |  |
| [55](#L55) | //29-11-2024 |
| [56](#L56) | class WOOT { |
| [57](#L57) |  |
| [58](#L58) | public $tables = null; |
| [59](#L59) | public $filter = null; |
| [60](#L60) | public $predefinition = null; |
| [61](#L61) | public $skins = null; |
| [62](#L62) | public $columns = null; |
| [63](#L63) | public $settings = null; |
| [64](#L64) | public $vocabulary = null; |
| [65](#L65) | public static $tables\_actions = []; |
| [66](#L66) | public static $synonyms = [ |
| [67](#L67) | 'title' => 'post\_title', |
| [68](#L68) | 'excerpt' => 'post\_excerpt', |
| [69](#L69) | 'content' => 'post\_content', |
| [70](#L70) | 'author' => 'post\_author' |
| [71](#L71) | ]; |
| [72](#L72) | public $extend\_ext\_profiles = []; |
| [73](#L73) | public $default\_columns = ['id', 'thumbnail', 'title', 'price', 'gallery', 'add\_to\_cart']; |
| [74](#L74) | public $show\_notes = true; |
| [75](#L75) | public $active\_exts = []; |
| [76](#L76) | public static $app\_mode = 'dev'; //dev, production - leave as dev, do not work, remove later |
| [77](#L77) |  |
| [78](#L78) | public function \_\_construct() { |
| [79](#L79) | $this->settings = new WOOT\_Settings(); |
| [80](#L80) | $this->vocabulary = new WOOT\_Vocabulary(); |
| [81](#L81) |  |
| [82](#L82) | add\_shortcode('woot', array($this, 'do\_shortcode')); |
| [83](#L83) | add\_shortcode('woot\_button', array($this, 'do\_shortcode\_button')); |
| [84](#L84) | add\_action('wp\_ajax\_woot\_get\_table\_data', array($this, 'get\_table\_data')); |
| [85](#L85) | add\_action('wp\_ajax\_nopriv\_woot\_get\_table\_data', array($this, 'get\_table\_data')); |
| [86](#L86) |  |
| [87](#L87) | add\_action('wp\_ajax\_woot\_get\_smth', array($this, 'get\_smth')); |
| [88](#L88) | add\_action('wp\_ajax\_nopriv\_woot\_get\_smth', array($this, 'get\_smth')); |
| [89](#L89) |  |
| [90](#L90) | add\_action('wp\_ajax\_woot\_import\_data', array($this, 'import\_data')); |
| [91](#L91) |  |
| [92](#L92) | global $active\_tables\_actions; |
| [93](#L93) | //self::$tables\_actions['default'] = esc\_html\_\_('Default', 'profit-products-tables-for-woocommerce'); |
| [94](#L94) | if (isset($active\_tables\_actions)) { |
| [95](#L95) | self::$tables\_actions = array\_merge(self::$tables\_actions, $active\_tables\_actions); |
| [96](#L96) | } |
| [97](#L97) |  |
| [98](#L98) | if ($this->show\_notes) { |
| [99](#L99) | $this->fb = false; |
| [100](#L100) | $this->max\_col = 7; |
| [101](#L101) | if (intval(get\_option('woot\_free\_1', -1)) === -1) { |
| [102](#L102) | //update\_option('woot\_free\_1', 1); |
| [103](#L103) | $this->max\_col = 5; |
| [104](#L104) | $this->fb = true; |
| [105](#L105) | } |
| [106](#L106) | } |
| [107](#L107) |  |
| [108](#L108) | $this->filter = new WOOT\_Filter(); |
| [109](#L109) | $this->predefinition = new WOOT\_Predefinition(); |
| [110](#L110) | $this->skins = new WOOT\_Skins(); |
| [111](#L111) | $this->tables = new WOOT\_Tables(); |
| [112](#L112) | $this->columns = new WOOT\_Columns(); |
| [113](#L113) |  |
| [114](#L114) | add\_action('admin\_init', function () { |
| [115](#L115) | if (WOOT\_HELPER::can\_manage\_data()) { |
| [116](#L116) | add\_filter('plugin\_action\_links\_' . WOOT\_PLUGIN\_NAME, function ($links) { |
| [117](#L117) |  |
| [118](#L118) | $buttons = array( |
| [119](#L119) | '<a href="' . admin\_url('admin.php?page=woot') . '">' . esc\_html\_\_('Products Tables', 'profit-products-tables-for-woocommerce') . '</a>', |
| [120](#L120) | '<a target="\_blank" href="' . esc\_url('https://products-tables.com/') . '"><span class="icon-book"></span>&nbsp;' . esc\_html\_\_('Documentation', 'profit-products-tables-for-woocommerce') . '</a>' |
| [121](#L121) | ); |
| [122](#L122) |  |
| [123](#L123) | if ($this->show\_notes) { |
| [124](#L124) | $buttons[] = '<a target="\_blank" style="color: red; font-weight: bold;" href="' . esc\_url('https://codecanyon.pluginus.net/item/woot-woocommerce-products-tables/27928580') . '">' . esc\_html\_\_('Go Pro!', 'profit-products-tables-for-woocommerce') . '</a>'; |
| [125](#L125) | } |
| [126](#L126) |  |
| [127](#L127) | return array\_merge($buttons, $links); |
| [128](#L128) | }, 50); |
| [129](#L129) | } |
| [130](#L130) | }, 9999); |
| [131](#L131) |  |
| [132](#L132) | add\_action('admin\_enqueue\_scripts', array($this, 'admin\_enqueue\_scripts')); |
| [133](#L133) |  |
| [134](#L134) | if (is\_admin()) { |
| [135](#L135) | //$this->rate\_alert = new WOOT\_RATE\_ALERT($this->show\_notes);//replaced by ask\_favour |
| [136](#L136) | } |
| [137](#L137) | } |
| [138](#L138) |  |
| [139](#L139) | /\*\* |
| [140](#L140) | \* Hook init |
| [141](#L141) | \* |
| [142](#L142) | \* @since 1.0.0 |
| [143](#L143) | \* |
| [144](#L144) | \* @return void |
| [145](#L145) | \*/ |
| [146](#L146) | public function init() { |
| [147](#L147) |  |
| [148](#L148) | if (!class\_exists('WooCommerce')) { |
| [149](#L149) | return; |
| [150](#L150) | } |
| [151](#L151) |  |
| [152](#L152) | load\_plugin\_textdomain('profit-products-tables-for-woocommerce', false, dirname(plugin\_basename(\_\_FILE\_\_)) . '/languages'); |
| [153](#L153) |  |
| [154](#L154) | if (WOOT\_HELPER::can\_manage\_data()) { |
| [155](#L155) |  |
| [156](#L156) | $this->ask\_favour(); |
| [157](#L157) |  |
| [158](#L158) | add\_action('admin\_menu', function () { |
| [159](#L159) | add\_menu\_page('WOOT', 'WOOT', 'publish\_posts', 'woot', function () { |
| [160](#L160) |  |
| [161](#L161) | $args = []; |
| [162](#L162) | $table\_html\_id = 'woot-admin-table'; |
| [163](#L163) | $args['main\_table'] = $this->draw\_table\_data([ |
| [164](#L164) | 'action' => 'woot\_admin\_table', |
| [165](#L165) | //'mode' => 'to\_json', |
| [166](#L166) | 'mode' => 'json', |
| [167](#L167) | 'orderby' => 'id', |
| [168](#L168) | 'order' => 'desc', |
| [169](#L169) | 'per\_page\_sel\_pp' => -1, |
| [170](#L170) | 'per\_page' => -1, |
| [171](#L171) | 'table\_data' => $this->tables->get\_admin\_table\_rows(), |
| [172](#L172) | 'use\_flow\_header' => 0, |
| [173](#L173) | 'compact\_view\_width' => 800 |
| [174](#L174) | ], $table\_html\_id) . WOOT\_HELPER::render\_html('views/table.php', array( |
| [175](#L175) | 'table\_html\_id' => $table\_html\_id, |
| [176](#L176) | 'hide\_text\_search' => false, |
| [177](#L177) | 'table\_view' => 'separated', |
| [178](#L178) | 'placeholder' => esc\_html\_\_('search by column title', 'profit-products-tables-for-woocommerce') . ' ...', |
| [179](#L179) | )); |
| [180](#L180) |  |
| [181](#L181) | //+++ |
| [182](#L182) |  |
| [183](#L183) | $args['settings\_table'] = $this->settings->draw\_table(); |
| [184](#L184) |  |
| [185](#L185) | echo WOOT\_HELPER::render\_html('views/options.php', apply\_filters('woot\_print\_plugin\_options', $args)); |
| [186](#L186) | }, 'dashicons-woot', '57.1'); |
| [187](#L187) | }, 99); |
| [188](#L188) | } |
| [189](#L189) |  |
| [190](#L190) | //\*\*\* |
| [191](#L191) |  |
| [192](#L192) | add\_action('wp\_print\_footer\_scripts', function () { |
| [193](#L193) | echo WOOT\_HELPER::render\_html('views/popup.php'); |
| [194](#L194) | }); |
| [195](#L195) | } |
| [196](#L196) |  |
| [197](#L197) | /\*\* |
| [198](#L198) | \* Hook admin\_enqueue\_scripts |
| [199](#L199) | \* |
| [200](#L200) | \* @since 1.0.0 |
| [201](#L201) | \* |
| [202](#L202) | \* @return void |
| [203](#L203) | \*/ |
| [204](#L204) | public function admin\_enqueue\_scripts() { |
| [205](#L205) |  |
| [206](#L206) | wp\_enqueue\_style('woot-system', WOOT\_ASSETS\_LINK . 'css/admin/system.css', [], WOOT\_VERSION); |
| [207](#L207) |  |
| [208](#L208) | if (isset($\_GET['page']) AND $\_GET['page'] == 'woot') { |
| [209](#L209) |  |
| [210](#L210) | wp\_enqueue\_media(); |
| [211](#L211) |  |
| [212](#L212) | wp\_enqueue\_script('woot-helper', WOOT\_ASSETS\_LINK . 'js/helper.js', [], WOOT\_VERSION, true); |
| [213](#L213) |  |
| [214](#L214) | wp\_enqueue\_style('selectm-23', WOOT\_ASSETS\_LINK . 'css/selectm-23.css', [], WOOT\_VERSION); |
| [215](#L215) | wp\_enqueue\_script('selectm-23', WOOT\_ASSETS\_LINK . 'js/selectm-23.js', [], WOOT\_VERSION); |
| [216](#L216) |  |
| [217](#L217) | wp\_enqueue\_style('woot-growls', WOOT\_ASSETS\_LINK . 'css/growls.css', [], WOOT\_VERSION); |
| [218](#L218) | wp\_enqueue\_style('woot-popup-23', WOOT\_ASSETS\_LINK . 'css/popup-23.css', [], WOOT\_VERSION); |
| [219](#L219) | wp\_enqueue\_style('woot-switcher-23', WOOT\_ASSETS\_LINK . 'css/switcher-23.css', [], WOOT\_VERSION); |
| [220](#L220) | wp\_enqueue\_style('woot-fontello', WOOT\_ASSETS\_LINK . 'css/fontello.css', [], WOOT\_VERSION); |
| [221](#L221) | wp\_enqueue\_style('woot-options-fw', WOOT\_ASSETS\_LINK . 'css/admin/options-fw.css', [], WOOT\_VERSION); |
| [222](#L222) | wp\_enqueue\_style('woot-options', WOOT\_ASSETS\_LINK . 'css/admin/options.css', [], WOOT\_VERSION); |
| [223](#L223) |  |
| [224](#L224) | wp\_enqueue\_script('data-table-23', WOOT\_ASSETS\_LINK . 'js/data-table-23/data-table-23.js', [], WOOT\_VERSION, true); |
| [225](#L225) | wp\_enqueue\_style('data-table-23', WOOT\_ASSETS\_LINK . 'js/data-table-23/data-table-23.css', [], WOOT\_VERSION); |
| [226](#L226) |  |
| [227](#L227) | wp\_enqueue\_script('woot-generated-tables', WOOT\_ASSETS\_LINK . 'js/admin/generated-tables.js', ['data-table-23'], WOOT\_VERSION, true); |
| [228](#L228) | wp\_enqueue\_script('popup-23', WOOT\_ASSETS\_LINK . 'js/popup-23.js', [], WOOT\_VERSION); |
| [229](#L229) | wp\_enqueue\_script('alasql', WOOT\_ASSETS\_LINK . 'js/alasql.min.js', [], '0.5.5', true); |
| [230](#L230) |  |
| [231](#L231) | wp\_enqueue\_script('woot-horizontal-scrollbar-23', WOOT\_ASSETS\_LINK . 'js/horizontal-scrollbar-23.js', array(), WOOT\_VERSION); |
| [232](#L232) | wp\_enqueue\_style('woot-horizontal-scrollbar-23', WOOT\_ASSETS\_LINK . 'css/horizontal-scrollbar-23.css', array(), WOOT\_VERSION); |
| [233](#L233) |  |
| [234](#L234) | wp\_enqueue\_script('woot-spectrum', WOOT\_ASSETS\_LINK . 'js/spectrum/spectrum.min.js', array(), WOOT\_VERSION); |
| [235](#L235) | wp\_enqueue\_style('woot-spectrum', WOOT\_ASSETS\_LINK . 'js/spectrum/spectrum.min.css', array(), WOOT\_VERSION); |
| [236](#L236) |  |
| [237](#L237) | //codeEditor |
| [238](#L238) | $custom\_css\_settings = []; |
| [239](#L239) | $custom\_css\_settings['codeEditor'] = wp\_enqueue\_code\_editor(array( |
| [240](#L240) | 'type' => 'text/css', |
| [241](#L241) | 'lineNumbers' => true, |
| [242](#L242) | 'indentUnit' => 2, |
| [243](#L243) | 'tabSize' => 2 |
| [244](#L244) | )); |
| [245](#L245) | wp\_localize\_script('jquery', 'custom\_css\_settings', $custom\_css\_settings); |
| [246](#L246) | wp\_enqueue\_script('code-editor'); |
| [247](#L247) | wp\_enqueue\_style('code-editor'); |
| [248](#L248) | wp\_enqueue\_style('wp-codemirror'); |
| [249](#L249) | wp\_enqueue\_script('htmlhint'); |
| [250](#L250) | wp\_enqueue\_script('csslint'); |
| [251](#L251) | wp\_enqueue\_script('jshint'); |
| [252](#L252) |  |
| [253](#L253) | wp\_enqueue\_script('woot-options', WOOT\_ASSETS\_LINK . 'js/admin/options.js', ['data-table-23', 'jquery', 'jquery-ui-core', 'jquery-ui-sortable'], WOOT\_VERSION, true); |
| [254](#L254) |  |
| [255](#L255) | $this->wp\_localize\_script('woot-options'); |
| [256](#L256) | } |
| [257](#L257) | } |
| [258](#L258) |  |
| [259](#L259) | /\*\* |
| [260](#L260) | \* Hook wp\_localize\_script |
| [261](#L261) | \* |
| [262](#L262) | \* @since 1.0.0 |
| [263](#L263) | \* @param string $handle string handle |
| [264](#L264) | \* @return void |
| [265](#L265) | \*/ |
| [266](#L266) | public function wp\_localize\_script($handle) { |
| [267](#L267) |  |
| [268](#L268) | wp\_localize\_script($handle, 'woot\_helper\_vars', [ |
| [269](#L269) | 'ajax\_url' => admin\_url('admin-ajax.php'), |
| [270](#L270) | 'profiles' => [], //for tables data collection |
| [271](#L271) | 'assets\_url' => WOOT\_ASSETS\_LINK, |
| [272](#L272) | 'mode' => self::$app\_mode, |
| [273](#L273) | 'flags' => [], //flags for custom js actions which should not be inited twice |
| [274](#L274) | 'hide\_shop\_cart\_btn' => intval(WOOT\_Settings::get('hide\_shop\_cart\_btn')), |
| [275](#L275) | 'hide\_checkout\_btn' => intval(WOOT\_Settings::get('hide\_checkout\_btn')), |
| [276](#L276) | 'selected\_lang' => apply\_filters('woot\_current\_lang', get\_locale()), |
| [277](#L277) | 'settings\_nonce' => wp\_create\_nonce('woot\_settings\_nonce'), |
| [278](#L278) | 'lang' => apply\_filters('woot\_helper\_lang', [ |
| [279](#L279) | 'loading' => WOOT\_Vocabulary::get(esc\_html\_\_('Loading ...', 'profit-products-tables-for-woocommerce')), |
| [280](#L280) | 'no\_data' => WOOT\_Vocabulary::get(esc\_html\_\_('No Data!', 'profit-products-tables-for-woocommerce')), |
| [281](#L281) | 'error' => WOOT\_Vocabulary::get(esc\_html\_\_('Error!', 'profit-products-tables-for-woocommerce')), |
| [282](#L282) | 'creating' => WOOT\_Vocabulary::get(esc\_html\_\_('Creating', 'profit-products-tables-for-woocommerce')), |
| [283](#L283) | 'created' => WOOT\_Vocabulary::get(esc\_html\_\_('Created!', 'profit-products-tables-for-woocommerce')), |
| [284](#L284) | 'saving' => WOOT\_Vocabulary::get(esc\_html\_\_('Saving', 'profit-products-tables-for-woocommerce')), |
| [285](#L285) | 'saved' => WOOT\_Vocabulary::get(esc\_html\_\_('Saved!', 'profit-products-tables-for-woocommerce')), |
| [286](#L286) | 'adding' => WOOT\_Vocabulary::get(esc\_html\_\_('Adding', 'profit-products-tables-for-woocommerce')), |
| [287](#L287) | 'added' => WOOT\_Vocabulary::get(esc\_html\_\_('Added!', 'profit-products-tables-for-woocommerce')), |
| [288](#L288) | 'deleting' => WOOT\_Vocabulary::get(esc\_html\_\_('Deleting', 'profit-products-tables-for-woocommerce')), |
| [289](#L289) | 'deleted' => WOOT\_Vocabulary::get(esc\_html\_\_('Deleted!', 'profit-products-tables-for-woocommerce')), |
| [290](#L290) | 'updating' => WOOT\_Vocabulary::get(esc\_html\_\_('Updating', 'profit-products-tables-for-woocommerce')), |
| [291](#L291) | 'cloning' => WOOT\_Vocabulary::get(esc\_html\_\_('Cloning', 'profit-products-tables-for-woocommerce')), |
| [292](#L292) | 'cloned' => WOOT\_Vocabulary::get(esc\_html\_\_('Cloned!', 'profit-products-tables-for-woocommerce')), |
| [293](#L293) | 'sure' => WOOT\_Vocabulary::get(esc\_html\_\_('Are you sure?', 'profit-products-tables-for-woocommerce')), |
| [294](#L294) | 'm\_notice' => WOOT\_Vocabulary::get(esc\_html\_\_('Notice!', 'profit-products-tables-for-woocommerce')), |
| [295](#L295) | 'm\_warning' => WOOT\_Vocabulary::get(esc\_html\_\_('Warning!', 'profit-products-tables-for-woocommerce')), |
| [296](#L296) | 'm\_error' => WOOT\_Vocabulary::get(esc\_html\_\_('Error!', 'profit-products-tables-for-woocommerce')), |
| [297](#L297) | 'c\_adding' => WOOT\_Vocabulary::get(esc\_html\_\_('Adding to cart ...', 'profit-products-tables-for-woocommerce')), |
| [298](#L298) | 'c\_added' => WOOT\_Vocabulary::get(esc\_html\_\_('Product added to cart!', 'profit-products-tables-for-woocommerce')), |
| [299](#L299) | 'c\_updated' => WOOT\_Vocabulary::get(esc\_html\_\_('Cart updated!', 'profit-products-tables-for-woocommerce')), |
| [300](#L300) | 'in\_cart' => WOOT\_Vocabulary::get(esc\_html\_\_('In cart', 'profit-products-tables-for-woocommerce')), |
| [301](#L301) | 'reset' => WOOT\_Vocabulary::get(esc\_html\_\_('Reset', 'profit-products-tables-for-woocommerce')), |
| [302](#L302) | 'select\_table\_thumb' => WOOT\_Vocabulary::get(esc\_html\_\_('Select table thumbnail', 'profit-products-tables-for-woocommerce')), |
| [303](#L303) | 'shortcodes\_help' => WOOT\_Vocabulary::get(esc\_html\_\_('Shortcodes Help', 'profit-products-tables-for-woocommerce')), |
| [304](#L304) | 'help' => WOOT\_Vocabulary::get(esc\_html\_\_('Help', 'profit-products-tables-for-woocommerce')), |
| [305](#L305) | 'products' => WOOT\_Vocabulary::get(esc\_html\_\_('Products', 'profit-products-tables-for-woocommerce')), |
| [306](#L306) | 'calendar23\_names' => apply\_filters('woot\_get\_calendar\_names', []), |
| [307](#L307) | 'add\_to\_cart\_selected' => WOOT\_Vocabulary::get(esc\_html\_\_('add selected', 'profit-products-tables-for-woocommerce')), |
| [308](#L308) | 'add\_to\_cart' => apply\_filters('woot\_add\_to\_cart\_text', WOOT\_Vocabulary::get(esc\_html\_\_('Add to cart', 'profit-products-tables-for-woocommerce'))), |
| [309](#L309) | 'view\_cart' => WOOT\_Vocabulary::get(esc\_html\_\_('Shop cart', 'profit-products-tables-for-woocommerce')), |
| [310](#L310) | 'checkout' => WOOT\_Vocabulary::get(esc\_html\_\_('Checkout', 'profit-products-tables-for-woocommerce')), |
| [311](#L311) | 'clear\_cart' => WOOT\_Vocabulary::get(esc\_html\_\_('Clear cart', 'profit-products-tables-for-woocommerce')), |
| [312](#L312) | 'select' => WOOT\_Vocabulary::get(esc\_html\_\_('select', 'profit-products-tables-for-woocommerce')), |
| [313](#L313) | 'select\_all\_prod' => WOOT\_Vocabulary::get(esc\_html\_\_('Select all products', 'profit-products-tables-for-woocommerce')), |
| [314](#L314) | 'show\_filter' => apply\_filters('woot\_show\_filter\_btn\_txt', '<span class="dashicons-before dashicons-filter"></span>' . WOOT\_Vocabulary::get(esc\_html\_\_('show', 'profit-products-tables-for-woocommerce'))), |
| [315](#L315) | 'hide\_filter' => apply\_filters('woot\_show\_filter\_btn\_txt\_hide', '<span class="dashicons-before dashicons-filter"></span>' . WOOT\_Vocabulary::get(esc\_html\_\_('hide', 'profit-products-tables-for-woocommerce'))), |
| [316](#L316) | 'filter\_field\_popup\_title' => WOOT\_Vocabulary::get(esc\_html\_\_('Table #{0}; filter field: {1}', 'profit-products-tables-for-woocommerce')), |
| [317](#L317) | 'product\_title' => WOOT\_Vocabulary::get(esc\_html\_\_('Product title', 'profit-products-tables-for-woocommerce')), |
| [318](#L318) | 'importing' => WOOT\_Vocabulary::get(esc\_html\_\_('Importing', 'profit-products-tables-for-woocommerce')) . ' ...', |
| [319](#L319) | 'imported' => WOOT\_Vocabulary::get(esc\_html\_\_('Imported!', 'profit-products-tables-for-woocommerce')), |
| [320](#L320) | 'online' => WOOT\_Vocabulary::get(esc\_html\_\_('Online!', 'profit-products-tables-for-woocommerce')), |
| [321](#L321) | 'offline' => WOOT\_Vocabulary::get(esc\_html\_\_('Offline!', 'profit-products-tables-for-woocommerce')), |
| [322](#L322) | 'cant\_add\_to\_cart' => WOOT\_Vocabulary::get(esc\_html\_\_('The product maybe is: sold out, individual one and is added to the cart, requested count is over exceed!', 'profit-products-tables-for-woocommerce')), |
| [323](#L323) | 'max\_add\_to\_cart' => WOOT\_Vocabulary::get(esc\_html\_\_('Max count of products is:', 'profit-products-tables-for-woocommerce')), |
| [324](#L324) | ]) |
| [325](#L325) | ] |
| [326](#L326) | ); |
| [327](#L327) | } |
| [328](#L328) |  |
| [329](#L329) | /\*\* |
| [330](#L330) | \* Include assets only on the pages where WOOT functionality uses |
| [331](#L331) | \* |
| [332](#L332) | \* @since 1.0.0 |
| [333](#L333) | \* |
| [334](#L334) | \* @return void |
| [335](#L335) | \*/ |
| [336](#L336) | public function include\_assets() { |
| [337](#L337) |  |
| [338](#L338) | if (self::$app\_mode === 'dev') { |
| [339](#L339) | wp\_enqueue\_script('woot-helper', WOOT\_ASSETS\_LINK . 'js/helper.js', [], WOOT\_VERSION, true); |
| [340](#L340) | wp\_enqueue\_script('woot-generated-tables', WOOT\_ASSETS\_LINK . 'js/generated-tables.js', ['data-table-23'], WOOT\_VERSION, true); |
| [341](#L341) |  |
| [342](#L342) | wp\_enqueue\_script('data-table-23', WOOT\_ASSETS\_LINK . 'js/data-table-23/data-table-23.js', [], WOOT\_VERSION, true); |
| [343](#L343) | wp\_enqueue\_style('data-table-23', WOOT\_ASSETS\_LINK . 'js/data-table-23/data-table-23.css', [], WOOT\_VERSION); |
| [344](#L344) |  |
| [345](#L345) | wp\_enqueue\_style('woot-general', WOOT\_ASSETS\_LINK . 'css/general.css', ['data-table-23'], WOOT\_VERSION); |
| [346](#L346) | wp\_enqueue\_style('woot-popup-23', WOOT\_ASSETS\_LINK . 'css/popup-23.css', [], WOOT\_VERSION); |
| [347](#L347) | wp\_enqueue\_style('woot-growls', WOOT\_ASSETS\_LINK . 'css/growls.css', [], WOOT\_VERSION); |
| [348](#L348) | wp\_enqueue\_style('woot-gallery', WOOT\_ASSETS\_LINK . 'css/gallery.css', [], WOOT\_VERSION); |
| [349](#L349) | wp\_enqueue\_style('woot-filter', WOOT\_ASSETS\_LINK . 'css/filter.css', [], WOOT\_VERSION); |
| [350](#L350) | wp\_enqueue\_style('woot-switcher-23', WOOT\_ASSETS\_LINK . 'css/switcher-23.css', [], WOOT\_VERSION); |
| [351](#L351) |  |
| [352](#L352) | wp\_enqueue\_style('calendar-23', WOOT\_ASSETS\_LINK . 'css/calendar-23.css', [], WOOT\_VERSION); |
| [353](#L353) | wp\_enqueue\_script('calendar-23', WOOT\_ASSETS\_LINK . 'js/calendar-23.js', [], WOOT\_VERSION); |
| [354](#L354) |  |
| [355](#L355) | wp\_enqueue\_style('ranger-23', WOOT\_ASSETS\_LINK . 'css/ranger-23.css', [], WOOT\_VERSION); |
| [356](#L356) | wp\_enqueue\_script('ranger-23', WOOT\_ASSETS\_LINK . 'js/ranger-23.js', [], WOOT\_VERSION); |
| [357](#L357) |  |
| [358](#L358) | wp\_enqueue\_style('selectm-23', WOOT\_ASSETS\_LINK . 'css/selectm-23.css', [], WOOT\_VERSION); |
| [359](#L359) | wp\_enqueue\_script('selectm-23', WOOT\_ASSETS\_LINK . 'js/selectm-23.js', [], WOOT\_VERSION); |
| [360](#L360) |  |
| [361](#L361) | wp\_enqueue\_script('select-23', WOOT\_ASSETS\_LINK . 'js/select-23.js', [], WOOT\_VERSION); |
| [362](#L362) |  |
| [363](#L363) | wp\_enqueue\_script('popup-23', WOOT\_ASSETS\_LINK . 'js/popup-23.js', [], WOOT\_VERSION); |
| [364](#L364) |  |
| [365](#L365) | wp\_enqueue\_script('woot-horizontal-scrollbar-23', WOOT\_ASSETS\_LINK . 'js/horizontal-scrollbar-23.js', array(), WOOT\_VERSION); |
| [366](#L366) | wp\_enqueue\_style('woot-horizontal-scrollbar-23', WOOT\_ASSETS\_LINK . 'css/horizontal-scrollbar-23.css', array(), WOOT\_VERSION); |
| [367](#L367) |  |
| [368](#L368) | wp\_enqueue\_script('woot-filter', WOOT\_ASSETS\_LINK . 'js/filter.js', [], WOOT\_VERSION, true); |
| [369](#L369) |  |
| [370](#L370) | wp\_enqueue\_script('alasql', WOOT\_ASSETS\_LINK . 'js/alasql.min.js', [], '0.5.5', true); |
| [371](#L371) | wp\_enqueue\_script('woot-general', WOOT\_ASSETS\_LINK . 'js/general.js', ['data-table-23', 'woot-horizontal-scrollbar-23'], WOOT\_VERSION, true); |
| [372](#L372) |  |
| [373](#L373) | $this->wp\_localize\_script('woot-general'); |
| [374](#L374) | } else { |
| [375](#L375) | wp\_enqueue\_style('woot-production', WOOT\_ASSETS\_LINK . 'css/\_production.css', [], WOOT\_VERSION); |
| [376](#L376) | wp\_enqueue\_script('alasql', WOOT\_ASSETS\_LINK . 'js/alasql.min.js', [], '0.5.5', true); |
| [377](#L377) | wp\_enqueue\_script('woot-production', WOOT\_ASSETS\_LINK . 'js/\_production.js', ['alasql'], WOOT\_VERSION, true); |
| [378](#L378) | $this->wp\_localize\_script('woot-production'); |
| [379](#L379) | } |
| [380](#L380) |  |
| [381](#L381) | do\_action('woot\_include\_assets'); |
| [382](#L382) | } |
| [383](#L383) |  |
| [384](#L384) | /\*\* |
| [385](#L385) | \* Main shortcode [woot] function |
| [386](#L386) | \* |
| [387](#L387) | \* @since 1.0.0 |
| [388](#L388) | \* @param array $args shortcode arguments |
| [389](#L389) | \* @return string table HTML |
| [390](#L390) | \*/ |
| [391](#L391) | public function do\_shortcode($args) { |
| [392](#L392) | $this->include\_assets(); |
| [393](#L393) |  |
| [394](#L394) | $args = (array) $args; |
| [395](#L395) |  |
| [396](#L396) | $table\_id = 0; |
| [397](#L397) | if (isset($args['id'])) { |
| [398](#L398) | $table\_id = intval($args['id']); |
| [399](#L399) | } |
| [400](#L400) |  |
| [401](#L401) | if ($table\_id > 0) { |
| [402](#L402) | if (!$this->tables->is\_exists($table\_id)) { |
| [403](#L403) | return '<div class="woot-notice">' . sprintf(esc\_html\_\_('Table #%s does not exists!', 'profit-products-tables-for-woocommerce'), $table\_id) . '</div>'; |
| [404](#L404) | } |
| [405](#L405) | } |
| [406](#L406) |  |
| [407](#L407) | $table\_html\_id = ''; |
| [408](#L408) |  |
| [409](#L409) | //+++ |
| [410](#L410) |  |
| [411](#L411) | if ($table\_id > 0 AND !isset($args['table\_html\_id'])) { |
| [412](#L412) | $table\_html\_id = $this->columns->options->get($table\_id, 'table\_html\_id', ''); |
| [413](#L413) | } |
| [414](#L414) |  |
| [415](#L415) | if (isset($args['table\_html\_id'])) { |
| [416](#L416) | $table\_html\_id = $args['table\_html\_id']; |
| [417](#L417) | } |
| [418](#L418) |  |
| [419](#L419) | if (empty($table\_html\_id)) { |
| [420](#L420) | $table\_html\_id = uniqid('t'); |
| [421](#L421) | } |
| [422](#L422) |  |
| [423](#L423) | //\*\*\* |
| [424](#L424) |  |
| [425](#L425) | $args['action'] = WOOT\_WooCommerce::$action; //HARDCODED FOR WOOT |
| [426](#L426) | //\*\*\* |
| [427](#L427) | $style = ''; |
| [428](#L428) |  |
| [429](#L429) | //for skin switcher |
| [430](#L430) | if (isset($\_GET['woot\_skin'])) { |
| [431](#L431) | $args['skin'] = WOOT\_HELPER::sanitize\_text($\_GET['woot\_skin']); |
| [432](#L432) | } |
| [433](#L433) |  |
| [434](#L434) | if (isset($args['skin'])) { |
| [435](#L435) | $style = $this->skins->get\_theme\_css($args['skin'], $table\_html\_id); |
| [436](#L436) | } else { |
| [437](#L437) | $style = $this->skins->get\_theme\_css($table\_id, $table\_html\_id); |
| [438](#L438) | } |
| [439](#L439) |  |
| [440](#L440) | if (isset($args['id'])) { |
| [441](#L441) | $style .= woot()->columns->get\_colums\_css($table\_id, $table\_html\_id); |
| [442](#L442) | $style .= WOOT\_Settings::get\_table\_custom\_prepared\_css($table\_id, $table\_html\_id); |
| [443](#L443) | } |
| [444](#L444) |  |
| [445](#L445) | //\*\*\* |
| [446](#L446) | //simple shortcode [woot] |
| [447](#L447) | if (!isset($args['id']) AND !isset($args['columns'])) { |
| [448](#L448) | $args['columns'] = implode(',', $this->default\_columns); |
| [449](#L449) | } |
| [450](#L450) |  |
| [451](#L451) | //\*\*\* |
| [452](#L452) |  |
| [453](#L453) | $args['no\_found\_text'] = apply\_filters('woot\_no\_found\_text', '', $table\_id); |
| [454](#L454) |  |
| [455](#L455) | $classes = apply\_filters('woot\_table\_classes', $args)['classes']; |
| [456](#L456) |  |
| [457](#L457) | if ($table\_id > 0) { |
| [458](#L458) | if (woot()->columns->options->get($table\_id, 'display\_cell\_info', false)) { |
| [459](#L459) | $classes .= ' woot-define-display-cell-info'; |
| [460](#L460) | } |
| [461](#L461) | } |
| [462](#L462) |  |
| [463](#L463) | if (isset($args['display\_cell\_info']) AND $args['display\_cell\_info']) { |
| [464](#L464) | $classes .= ' woot-define-display-cell-info'; |
| [465](#L465) | } |
| [466](#L466) |  |
| [467](#L467) | //+++ |
| [468](#L468) | $disable\_filter\_form = isset($args['disable\_filter\_form']) ? boolval($args['disable\_filter\_form']) : ($table\_id > 0 ? boolval($this->columns->options->get($table\_id, 'disable\_filter\_form', false)) : FALSE); |
| [469](#L469) |  |
| [470](#L470) | if (isset($args['mode'])) { |
| [471](#L471) | if (in\_array($args['mode'], ['json', 'to\_json'])) { |
| [472](#L472) | $disable\_filter\_form = true; |
| [473](#L473) | } |
| [474](#L474) | } |
| [475](#L475) |  |
| [476](#L476) | $filter = NULL; |
| [477](#L477) | if (!$disable\_filter\_form) { |
| [478](#L478) | $filter = $this->filter->draw\_filter\_form\_data((isset($args['filter\_form']) ? $args['filter\_form'] : ''), $table\_id); |
| [479](#L479) | } |
| [480](#L480) |  |
| [481](#L481) | $args = apply\_filters('woot\_review\_shortcode\_args', $args); |
| [482](#L482) |  |
| [483](#L483) | return WOOT\_HELPER::render\_html('views/table.php', array( |
| [484](#L484) | 'table\_html\_id' => $table\_html\_id, |
| [485](#L485) | 'table\_id' => $table\_id, |
| [486](#L486) | 'published' => ($table\_id > 0 && $this->tables->get($table\_id)) ? $this->tables->get($table\_id)['status'] : true, |
| [487](#L487) | 'hide\_text\_search' => isset($args['hide\_text\_search']) ? boolval($args['hide\_text\_search']) : ($table\_id > 0 ? !boolval($this->columns->options->get($table\_id, 'show\_text\_search', true)) : false), |
| [488](#L488) | 'skin' => isset($args['skin']) ? strval($args['skin']) : ($table\_id > 0 ? strval($this->skins->get($table\_id)) : ''), |
| [489](#L489) | 'text\_search\_min\_symbols' => isset($args['text\_search\_min\_symbols']) ? intval($args['text\_search\_min\_symbols']) : ($table\_id > 0 ? $this->columns->options->get($table\_id, 'text\_search\_min\_symbols', 3) : 0), |
| [490](#L490) | 'placeholder' => isset($args['text\_search\_placeholder']) ? WOOT\_Vocabulary::get($args['text\_search\_placeholder']) : ($table\_id > 0 ? WOOT\_Vocabulary::get($this->columns->options->get($table\_id, 'text\_search\_placeholder', esc\_html\_\_('search by title', 'profit-products-tables-for-woocommerce') . ' ...')) : ''), |
| [491](#L491) | 'action' => $table\_id > 0 ? WOOT::get\_table\_action($table\_id) : (isset($args['action']) ? $args['action'] : ''), |
| [492](#L492) | 'classes' => $classes, |
| [493](#L493) | 'filter' => $filter, |
| [494](#L494) | 'has\_filter' => isset($args['filter\_form']) ? boolval(!empty($args['filter\_form'])) : ($table\_id > 0 ? boolval(count((array) woot()->columns->filter->get\_acceptor\_keys($table\_id))) : FALSE), |
| [495](#L495) | 'hide\_filter\_form' => isset($args['hide\_filter\_form']) ? boolval($args['hide\_filter\_form']) : ($table\_id > 0 ? boolval($this->columns->options->get($table\_id, 'hide\_filter\_form', false)) : FALSE), |
| [496](#L496) | 'style' => $style, |
| [497](#L497) | 'orderby\_select' => WOOT\_WooCommerce::get\_select\_orderby\_options(isset($args['orderby\_select\_fields']) ? $args['orderby\_select\_fields'] : (($table\_id > 0 AND $this->columns->options->get($table\_id, 'is\_sort\_droptdown\_shown', 0)) ? $this->columns->options->get($table\_id, 'orderby\_select\_fields', '') : ''), $table\_id), |
| [498](#L498) | 'cart\_position' => isset($args['cart\_position']) ? intval($args['cart\_position']) : (($table\_id > 0 ? $this->columns->options->get($table\_id, 'cart\_position', 0) : 0)), |
| [499](#L499) | 'table\_view' => isset($args['table\_view']) ? $args['table\_view'] : '' |
| [500](#L500) | )) . $this->draw\_table\_data($args, $table\_html\_id); |
| [501](#L501) | } |
| [502](#L502) |  |
| [503](#L503) | /\*\* |
| [504](#L504) | \* Shortcode [woot\_button] function |
| [505](#L505) | \* |
| [506](#L506) | \* @since 1.0.0 |
| [507](#L507) | \* @param array $args shortcode arguments |
| [508](#L508) | \* @return table HTML |
| [509](#L509) | \*/ |
| [510](#L510) | public function do\_shortcode\_button($args) { |
| [511](#L511) | $this->include\_assets(); |
| [512](#L512) |  |
| [513](#L513) | $title = ''; |
| [514](#L514) | if (isset($args['title'])) { |
| [515](#L515) | $title = WOOT\_Vocabulary::get($args['title']); |
| [516](#L516) | unset($args['title']); |
| [517](#L517) | } |
| [518](#L518) |  |
| [519](#L519) | if (empty($title)) { |
| [520](#L520) | $title = WOOT\_Vocabulary::get(esc\_html\_\_('click on me', 'profit-products-tables-for-woocommerce')); |
| [521](#L521) | } |
| [522](#L522) |  |
| [523](#L523) | $popup\_title = ''; |
| [524](#L524) | if (isset($args['popup\_title'])) { |
| [525](#L525) | $popup\_title = WOOT\_Vocabulary::get($args['popup\_title']); |
| [526](#L526) | unset($args['popup\_title']); |
| [527](#L527) | } |
| [528](#L528) |  |
| [529](#L529) | $help\_title = ''; |
| [530](#L530) | if (isset($args['help\_title'])) { |
| [531](#L531) | $help\_title = WOOT\_Vocabulary::get($args['help\_title']); |
| [532](#L532) | $help\_title = trim($help\_title, '"'); |
| [533](#L533) | $help\_title = trim($help\_title, "'"); |
| [534](#L534) | unset($args['help\_title']); |
| [535](#L535) | } |
| [536](#L536) |  |
| [537](#L537) | $help\_link = ''; |
| [538](#L538) | if (isset($args['help\_link'])) { |
| [539](#L539) | $help\_link = $args['help\_link']; |
| [540](#L540) | unset($args['help\_link']); |
| [541](#L541) | } |
| [542](#L542) |  |
| [543](#L543) | $class = ''; |
| [544](#L544) | if (isset($args['class'])) { |
| [545](#L545) | $class = $args['class']; |
| [546](#L546) | unset($args['class']); |
| [547](#L547) | } |
| [548](#L548) |  |
| [549](#L549) | $args\_json = json\_encode($args); |
| [550](#L550) |  |
| [551](#L551) | return WOOT\_HELPER::draw\_html\_item('a', [ |
| [552](#L552) | 'href' => '#', |
| [553](#L553) | 'title' => esc\_attr($popup\_title), |
| [554](#L554) | 'class' => esc\_attr($class), |
| [555](#L555) | 'data-popup-title' => esc\_attr($popup\_title), |
| [556](#L556) | 'data-help-title' => esc\_attr($help\_title), |
| [557](#L557) | 'data-help-link' => esc\_url($help\_link), |
| [558](#L558) | 'data-what' => esc\_js($args\_json) |
| [559](#L559) | ], $title); |
| [560](#L560) | } |
| [561](#L561) |  |
| [562](#L562) | /\*\* |
| [563](#L563) | \* Table action name |
| [564](#L564) | \* |
| [565](#L565) | \* @since 1.0.0 |
| [566](#L566) | \* @param int $table\_id Table ID |
| [567](#L567) | \* @return string Table action |
| [568](#L568) | \*/ |
| [569](#L569) | public static function get\_table\_action($table\_id) { |
| [570](#L570) | $table\_action = ''; |
| [571](#L571) |  |
| [572](#L572) | //for woocommerce version no sense, but for future ideas left |
| [573](#L573) | if (woot()->tables->get($table\_id)) { |
| [574](#L574) | $table\_action = woot()->tables->get($table\_id)['table\_action']; |
| [575](#L575) | } |
| [576](#L576) |  |
| [577](#L577) | if (empty($table\_action)) { |
| [578](#L578) | $table\_action = WOOT\_WooCommerce::$action; //default profile |
| [579](#L579) | } |
| [580](#L580) |  |
| [581](#L581) | return $table\_action; |
| [582](#L582) | } |
| [583](#L583) |  |
| [584](#L584) | /\*\* |
| [585](#L585) | \* Get JSONed table options data and products data |
| [586](#L586) | \* |
| [587](#L587) | \* @since 1.0.0 |
| [588](#L588) | \* @param array $args arguments from shortcodes |
| [589](#L589) | \* @param string $table\_html\_id Table HTML ID |
| [590](#L590) | \* @param string $as\_script how to return data, if $as\_script return wrapped into <div> |
| [591](#L591) | \* @return string JSON data or JSON data wrapped into <div> container |
| [592](#L592) | \*/ |
| [593](#L593) | public function draw\_table\_data($args, $table\_html\_id, $as\_script = 'woot-table-json-data') { |
| [594](#L594) |  |
| [595](#L595) | $current\_page = 0; |
| [596](#L596) |  |
| [597](#L597) | if (isset($args['current\_page'])) { |
| [598](#L598) | $current\_page = intval($args['current\_page']) - 1; |
| [599](#L599) | } |
| [600](#L600) |  |
| [601](#L601) | if (isset($\_GET['current\_page'])) { |
| [602](#L602) | $current\_page = intval($\_GET['current\_page']) - 1; |
| [603](#L603) | } |
| [604](#L604) |  |
| [605](#L605) | if ($current\_page < 0) { |
| [606](#L606) | $current\_page = 0; |
| [607](#L607) | } |
| [608](#L608) |  |
| [609](#L609) | //\*\*\* |
| [610](#L610) |  |
| [611](#L611) | if (isset($args['id'])) { |
| [612](#L612) | if (intval($args['id']) <= 0) { |
| [613](#L613) | unset($args['id']); //fix, such tables can exists |
| [614](#L614) | } |
| [615](#L615) | } |
| [616](#L616) |  |
| [617](#L617) | //\*\*\* |
| [618](#L618) |  |
| [619](#L619) | if (isset($args['action'])) { |
| [620](#L620) |  |
| [621](#L621) |  |
| [622](#L622) | $profile = apply\_filters($args['action'], (isset($args['id']) ? intval($args['id']) : 0), $args); |
| [623](#L623) | //\*\*\* |
| [624](#L624) |  |
| [625](#L625) | if (isset($args['columns']) AND !empty($args['columns'])) { |
| [626](#L626) |  |
| [627](#L627) | if (is\_string($args['columns'])) { |
| [628](#L628) | $cols = explode(',', $args['columns']); |
| [629](#L629) | } else { |
| [630](#L630) | $cols = $args['columns']; |
| [631](#L631) | } |
| [632](#L632) |  |
| [633](#L633) | //for human fix in fields naming |
| [634](#L634) | if ($args['action'] === WOOT\_WooCommerce::$action) { |
| [635](#L635) | $cols = array\_map(function ($name) { |
| [636](#L636) | if (isset(WOOT::$synonyms[$name])) { |
| [637](#L637) | return WOOT::$synonyms[$name]; |
| [638](#L638) | } |
| [639](#L639) |  |
| [640](#L640) | return $name; |
| [641](#L641) | }, $cols); |
| [642](#L642) | } |
| [643](#L643) |  |
| [644](#L644) | //\*\*\* |
| [645](#L645) |  |
| [646](#L646) | $new\_profile = []; |
| [647](#L647) | $new\_profile[0] = $profile[0]; |
| [648](#L648) |  |
| [649](#L649) | if (!empty($cols)) { |
| [650](#L650) | foreach ($cols as $fk) { |
| [651](#L651) | if (isset($profile[$fk])) { |
| [652](#L652) | $new\_profile[$fk] = $profile[$fk]; |
| [653](#L653) | } |
| [654](#L654) | } |
| [655](#L655) |  |
| [656](#L656) | $profile = $new\_profile; |
| [657](#L657) | } |
| [658](#L658) | } |
| [659](#L659) | } else { |
| [660](#L660) | if (isset($args['id'])) { |
| [661](#L661) | $tid = intval($args['id']); |
| [662](#L662) |  |
| [663](#L663) | if ($tid > 0) { |
| [664](#L664) | $action = WOOT::get\_table\_action($tid); |
| [665](#L665) |  |
| [666](#L666) | if (!empty($action)) { |
| [667](#L667) | $profile = apply\_filters($action, $tid); |
| [668](#L668) | $args['action'] = $action; |
| [669](#L669) |  |
| [670](#L670) | $cols = $this->columns->get\_table\_columns($tid, ['fields' => 'title,field\_key'], ['is\_active' => 1]); |
| [671](#L671) |  |
| [672](#L672) | if (!empty($cols)) { |
| [673](#L673) | $custom\_profile = []; |
| [674](#L674) | $custom\_profile[0] = $profile[0]; |
| [675](#L675) | foreach ($cols as $key => $c) { |
| [676](#L676) | $profile[$c['field\_key']]['title'] = $c['title']; |
| [677](#L677) | $custom\_profile[$c['field\_key']] = $profile[$c['field\_key']]; |
| [678](#L678) | } |
| [679](#L679) |  |
| [680](#L680) | $profile = $custom\_profile; |
| [681](#L681) | } else { |
| [682](#L682) | return FALSE; |
| [683](#L683) | } |
| [684](#L684) | } else { |
| [685](#L685) | return FALSE; |
| [686](#L686) | } |
| [687](#L687) | } |
| [688](#L688) | } else { |
| [689](#L689) | return FALSE; |
| [690](#L690) | } |
| [691](#L691) | } |
| [692](#L692) |  |
| [693](#L693) |  |
| [694](#L694) | //\*\*\* |
| [695](#L695) |  |
| [696](#L696) | $add\_data = [ |
| [697](#L697) | 'post\_type' => 'product' |
| [698](#L698) | ]; |
| [699](#L699) |  |
| [700](#L700) | if (isset($profile[0])) { |
| [701](#L701) | $add\_data = $profile[0]; |
| [702](#L702) | unset($profile[0]); |
| [703](#L703) | } |
| [704](#L704) |  |
| [705](#L705) | //\*\*\* |
| [706](#L706) |  |
| [707](#L707) | $columns = []; |
| [708](#L708) | $orders = []; |
| [709](#L709) | $editable = []; |
| [710](#L710) | $custom\_field\_keys = []; //we need to save fields with the key another than data-field |
| [711](#L711) |  |
| [712](#L712) | if (!empty($profile) AND is\_array($profile)) { |
| [713](#L713) | foreach ($profile as $key => $c) { |
| [714](#L714) |  |
| [715](#L715) | if (!$c) { |
| [716](#L716) | continue; |
| [717](#L717) | } |
| [718](#L718) |  |
| [719](#L719) | //$columns[$key] = $c['title']; |
| [720](#L720) |  |
| [721](#L721) | if (isset($c['title'])) { |
| [722](#L722) | $columns[$key] = $c['title']; |
| [723](#L723) | } |
| [724](#L724) |  |
| [725](#L725) | if (isset($c['order']) AND $c['order']) { |
| [726](#L726) | $orders[$key] = $c['order']; |
| [727](#L727) | } |
| [728](#L728) |  |
| [729](#L729) | if (isset($c['editable']) AND $c['editable']) { |
| [730](#L730) | $editable[$key] = $c['editable']; |
| [731](#L731) | } |
| [732](#L732) |  |
| [733](#L733) | if (isset($c['custom\_field\_key']) AND $c['custom\_field\_key']) { |
| [734](#L734) | $custom\_field\_keys[$key] = $c['custom\_field\_key']; |
| [735](#L735) | } |
| [736](#L736) | } |
| [737](#L737) | } |
| [738](#L738) |  |
| [739](#L739) |  |
| [740](#L740) | //\*\*\* |
| [741](#L741) |  |
| [742](#L742) | $filter\_data = ''; |
| [743](#L743) | if (isset($add\_data['filter\_data'])) { |
| [744](#L744) | $filter\_data = json\_encode($add\_data['filter\_data']); //connect for filter plugins |
| [745](#L745) | } |
| [746](#L746) |  |
| [747](#L747) | //shortcode $args has more prioritet |
| [748](#L748) | if (isset($args['filter\_data'])) { |
| [749](#L749) | //$filter\_data = json\_encode($args['filter\_data']); |
| [750](#L750) | $filter\_data = $args['filter\_data']; |
| [751](#L751) | } |
| [752](#L752) |  |
| [753](#L753) | $filter\_provider = ''; |
| [754](#L754) | if (isset($add\_data['filter\_provider'])) { |
| [755](#L755) | $filter\_provider = $add\_data['filter\_provider']; |
| [756](#L756) | } |
| [757](#L757) |  |
| [758](#L758) | //$args has more prioritet |
| [759](#L759) | if (isset($args['filter\_provider'])) { |
| [760](#L760) | $filter\_provider = $args['filter\_provider']; |
| [761](#L761) | } |
| [762](#L762) |  |
| [763](#L763) | //\*\*\* |
| [764](#L764) |  |
| [765](#L765) | $ajax\_action = 'woot\_get\_table\_data'; |
| [766](#L766) | if (isset($add\_data['ajax\_action'])) { |
| [767](#L767) | $ajax\_action = $add\_data['ajax\_action']; |
| [768](#L768) | } |
| [769](#L769) |  |
| [770](#L770) |  |
| [771](#L771) | if (isset($args['ajax\_action'])) { |
| [772](#L772) | $ajax\_action = $args['ajax\_action']; |
| [773](#L773) | } |
| [774](#L774) |  |
| [775](#L775) |  |
| [776](#L776) | //for json mode |
| [777](#L777) | $table\_data = []; |
| [778](#L778) | if (isset($args['table\_data'])) { |
| [779](#L779) | $table\_data = $args['table\_data']; |
| [780](#L780) | } |
| [781](#L781) |  |
| [782](#L782) | //\*\*\* |
| [783](#L783) |  |
| [784](#L784) | $per\_page = 10; |
| [785](#L785) | $per\_page\_position = 'tb'; |
| [786](#L786) | $per\_page\_sel\_pp = range(10, 100, 10); |
| [787](#L787) | $per\_page\_sel\_position = 'tb'; |
| [788](#L788) | $orderby = 'id'; |
| [789](#L789) | $order = 'desc'; |
| [790](#L790) | $use\_load\_more = 0; |
| [791](#L791) | $cells\_width = []; |
| [792](#L792) | $hide\_on\_mobile = []; |
| [793](#L793) | $show\_print\_button = 0; |
| [794](#L794) | $compact\_view\_width = -1; |
| [795](#L795) |  |
| [796](#L796) | //constant filtr-independent choice |
| [797](#L797) | $predefinition = []; |
| [798](#L798) |  |
| [799](#L799) | if (isset($args['id'])) { |
| [800](#L800) | $per\_page = $this->columns->options->get(intval($args['id']), 'per\_page\_default', 10); |
| [801](#L801) | $per\_page\_sel\_pp = $this->columns->options->get\_per\_page\_sel\_pp(intval($args['id']), true); |
| [802](#L802) | $per\_page\_position = $this->columns->options->get(intval($args['id']), 'pagination\_position', 'tb'); |
| [803](#L803) | $per\_page\_sel\_position = $this->columns->options->get(intval($args['id']), 'per\_page\_sel\_position', 'tb'); |
| [804](#L804) | $orderby = $this->columns->options->get(intval($args['id']), 'default\_orderby', 'id'); |
| [805](#L805) | $order = $this->columns->options->get(intval($args['id']), 'default\_order', 'desc'); |
| [806](#L806) | $use\_load\_more = $this->columns->options->get(intval($args['id']), 'use\_load\_more\_button', false); |
| [807](#L807) | $show\_print\_button = $this->columns->options->get(intval($args['id']), 'show\_print\_button', 0); |
| [808](#L808) |  |
| [809](#L809) | if (!isset($args['compact\_view\_width'])) { |
| [810](#L810) | $compact\_view\_width = $this->columns->options->get(intval($args['id']), 'compact\_view\_width', -1); |
| [811](#L811) | } |
| [812](#L812) |  |
| [813](#L813) | if (!isset($args['use\_flow\_header'])) { |
| [814](#L814) | $args['use\_flow\_header'] = $this->columns->options->get(intval($args['id']), 'use\_flow\_header', 1); |
| [815](#L815) | } |
| [816](#L816) |  |
| [817](#L817) | $predefinition['rules'] = $this->predefinition->get(intval($args['id'])); |
| [818](#L818) |  |
| [819](#L819) | if (!isset($args['columns'])) {//columns can be set in shortcode |
| [820](#L820) | $table\_columns = $this->columns->get\_table\_columns(intval($args['id']), [], ['is\_active' => 1]); |
| [821](#L821) |  |
| [822](#L822) | if (!empty($table\_columns)) { |
| [823](#L823) | $cells\_width = array\_map(function ($f) { |
| [824](#L824) | return $f['width']; |
| [825](#L825) | }, $table\_columns); |
| [826](#L826) |  |
| [827](#L827) | $columns = []; |
| [828](#L828) |  |
| [829](#L829) | foreach ($table\_columns as $c) { |
| [830](#L830) | if ($c['is\_active']) { |
| [831](#L831) | $columns[$c['field\_key']] = $c['title']; |
| [832](#L832) | } |
| [833](#L833) | } |
| [834](#L834) |  |
| [835](#L835) |  |
| [836](#L836) | $hide\_on\_mobile = array\_values(array\_filter(array\_map(function ($f) { |
| [837](#L837) | if (!$f['show\_on\_mobile']) { |
| [838](#L838) | return $f['field\_key']; |
| [839](#L839) | } |
| [840](#L840) |  |
| [841](#L841) | return FALSE; |
| [842](#L842) | }, $table\_columns))); |
| [843](#L843) | } |
| [844](#L844) | } |
| [845](#L845) |  |
| [846](#L846) | //\*\*\* |
| [847](#L847) |  |
| [848](#L848) | $disable\_orders = $this->columns->options->get\_order\_disabled(intval($args['id'])); |
| [849](#L849) | if (!empty($disable\_orders)) { |
| [850](#L850) | foreach ($disable\_orders as $k) { |
| [851](#L851) | if (isset($orders[$k])) { |
| [852](#L852) | unset($orders[$k]); |
| [853](#L853) | } |
| [854](#L854) | } |
| [855](#L855) | } |
| [856](#L856) | } |
| [857](#L857) |  |
| [858](#L858) | //\*\*\* |
| [859](#L859) |  |
| [860](#L860) | if (isset($args['predefinition'])) { |
| [861](#L861) | $predefinition['rules'] = json\_decode($args['predefinition'], true); |
| [862](#L862) | } |
| [863](#L863) |  |
| [864](#L864) |  |
| [865](#L865) | if (isset($args['per\_page'])) { |
| [866](#L866) | if (intval($args['per\_page']) === -1) { |
| [867](#L867) | $per\_page = -1; |
| [868](#L868) | } else { |
| [869](#L869) | $per\_page = intval($args['per\_page']); |
| [870](#L870) | } |
| [871](#L871) | } |
| [872](#L872) |  |
| [873](#L873) | //\*\*\* |
| [874](#L874) |  |
| [875](#L875) |  |
| [876](#L876) | if (isset($args['per\_page\_sel\_pp'])) { |
| [877](#L877) | if (intval($args['per\_page\_sel\_pp']) === -1) { |
| [878](#L878) | $per\_page\_sel\_pp = -1; |
| [879](#L879) | } else { |
| [880](#L880) | $per\_page\_sel\_pp = explode(',', $args['per\_page\_sel\_pp']); |
| [881](#L881) | } |
| [882](#L882) | } |
| [883](#L883) |  |
| [884](#L884) | //\*\*\* |
| [885](#L885) |  |
| [886](#L886) | if (isset($args['per\_page\_position'])) { |
| [887](#L887) | $per\_page\_position = trim($args['per\_page\_position']); |
| [888](#L888) | } |
| [889](#L889) |  |
| [890](#L890) | //\*\*\* |
| [891](#L891) |  |
| [892](#L892) |  |
| [893](#L893) | if (isset($args['per\_page\_sel\_position'])) { |
| [894](#L894) | $per\_page\_sel\_position = trim($args['per\_page\_sel\_position']); |
| [895](#L895) | } |
| [896](#L896) |  |
| [897](#L897) | //\*\*\* |
| [898](#L898) |  |
| [899](#L899) |  |
| [900](#L900) | if (isset($args['orderby'])) { |
| [901](#L901) | $orderby = trim($args['orderby']); |
| [902](#L902) | if (!$orderby) { |
| [903](#L903) | $orderby = 'id'; |
| [904](#L904) | } |
| [905](#L905) | } |
| [906](#L906) |  |
| [907](#L907) |  |
| [908](#L908) | if (isset($args['order'])) { |
| [909](#L909) | $order = trim($args['order']); |
| [910](#L910) |  |
| [911](#L911) | if (!in\_array($order, ['asc', 'desc'])) { |
| [912](#L912) | $order = 'desc'; |
| [913](#L913) | } |
| [914](#L914) | } |
| [915](#L915) |  |
| [916](#L916) | if (isset($args['use\_load\_more'])) { |
| [917](#L917) | $use\_load\_more = intval($args['use\_load\_more']); |
| [918](#L918) | } |
| [919](#L919) |  |
| [920](#L920) | if (isset($args['cells\_width']) AND !empty($args['cells\_width'])) { |
| [921](#L921) | $cells\_width = explode(',', $args['cells\_width']); |
| [922](#L922) | } |
| [923](#L923) |  |
| [924](#L924) | if (isset($args['hide\_on\_mobile']) AND !empty($args['hide\_on\_mobile'])) { |
| [925](#L925) | $hide\_on\_mobile = explode(',', $args['hide\_on\_mobile']); |
| [926](#L926) | } |
| [927](#L927) |  |
| [928](#L928) | if (isset($args['author']) AND !empty($args['author'])) { |
| [929](#L929) | $predefinition['author'] = intval($args['author']); |
| [930](#L930) | } |
| [931](#L931) |  |
| [932](#L932) | if (isset($args['show\_print\_btn'])) { |
| [933](#L933) | $show\_print\_button = intval($args['show\_print\_btn']); |
| [934](#L934) | } |
| [935](#L935) |  |
| [936](#L936) | //\*\*\* |
| [937](#L937) |  |
| [938](#L938) | if (!empty($columns)) { |
| [939](#L939) | foreach ($columns as $key => $value) { |
| [940](#L940) | $columns[$key] = WOOT\_Vocabulary::get($value); |
| [941](#L941) | } |
| [942](#L942) | } |
| [943](#L943) |  |
| [944](#L944) | //\*\*\* |
| [945](#L945) |  |
| [946](#L946) | if (isset($args['compact\_view\_width'])) { |
| [947](#L947) | $compact\_view\_width = intval($args['compact\_view\_width']); |
| [948](#L948) | } |
| [949](#L949) |  |
| [950](#L950) | //\*\*\* |
| [951](#L951) | //filter non-existing keys in $columns |
| [952](#L952) | array\_walk($columns, function ($title, $key)use (&$profile, &$columns) { |
| [953](#L953) | if (!isset($profile[$key])) { |
| [954](#L954) | unset($columns[$key]); |
| [955](#L955) | } else { |
| [956](#L956) | //fix 16-09-2020 |
| [957](#L957) | $columns[$key] = WOOT\_Vocabulary::get($title); |
| [958](#L958) | } |
| [959](#L959) | }); |
| [960](#L960) |  |
| [961](#L961) | if ($this->show\_notes) { |
| [962](#L962) | $cut = true; |
| [963](#L963) | if (isset($\_REQUEST['action'])) { |
| [964](#L964) | if ($\_REQUEST['action'] === 'woot\_get\_columns\_data') { |
| [965](#L965) | $cut = false; |
| [966](#L966) | } |
| [967](#L967) | } |
| [968](#L968) |  |
| [969](#L969) | if (isset($args['action'])) { |
| [970](#L970) | if (in\_array($args['action'], [ |
| [971](#L971) | 'woot\_admin\_table', |
| [972](#L972) | 'woot\_settings\_table', |
| [973](#L973) | 'woot\_vocabulary\_table', |
| [974](#L974) | 'woot\_columns\_table', |
| [975](#L975) | 'woot\_predefinition\_table', |
| [976](#L976) | 'woot\_columns\_fields\_options\_table', |
| [977](#L977) | 'woot\_cart', |
| [978](#L978) | 'woot\_favourites', |
| [979](#L979) | //'woot\_get\_tables\_meta', |
| [980](#L980) | //'woot\_get\_tables\_options' |
| [981](#L981) | ])) { |
| [982](#L982) | $cut = false; |
| [983](#L983) | } |
| [984](#L984) | } |
| [985](#L985) |  |
| [986](#L986) | if ($cut) { |
| [987](#L987) | $columns = array\_slice($columns, 0, $this->max\_col); |
| [988](#L988) | } |
| [989](#L989) | } |
| [990](#L990) |  |
| [991](#L991) | $get\_data = WOOT\_HELPER::sanitize\_array($\_GET); |
| [992](#L992) | $js\_script\_data = [ |
| [993](#L993) | 'mode' => isset($args['mode']) ? $args['mode'] : 'ajax', |
| [994](#L994) | 'ajax\_url' => admin\_url('admin-ajax.php'), |
| [995](#L995) | 'selected\_lang' => apply\_filters('woot\_current\_lang', get\_locale()), |
| [996](#L996) | 'table\_data' => $table\_data, //for json mode |
| [997](#L997) | 'heads' => $columns, |
| [998](#L998) | 'hide\_on\_mobile' => $hide\_on\_mobile, |
| [999](#L999) | 'cells\_width' => $cells\_width, |
| [1000](#L1000) | 'orders' => $orders, |
| [1001](#L1001) | 'editable' => $editable, |
| [1002](#L1002) | 'custom\_field\_keys' => $custom\_field\_keys, |
| [1003](#L1003) | 'total\_rows\_count' => $per\_page, |
| [1004](#L1004) | 'use\_load\_more' => $use\_load\_more, |
| [1005](#L1005) | 'css\_classes' => isset($args['css\_classes']) ? $args['css\_classes'] : '', |
| [1006](#L1006) | 'no\_found\_text' => isset($args['no\_found\_text']) ? $args['no\_found\_text'] : '', |
| [1007](#L1007) | 'show\_print\_btn' => $show\_print\_button, |
| [1008](#L1008) | 'post\_id' => isset($args['post\_id']) ? intval($args['post\_id']) : 0, //for some program cases |
| [1009](#L1009) | 'compact\_view\_width' => $compact\_view\_width, |
| [1010](#L1010) | 'stop\_notice' => isset($args['stop\_notice']) ? $args['stop\_notice'] : '', |
| [1011](#L1011) | 'use\_flow\_header' => isset($args['use\_flow\_header']) ? intval($args['use\_flow\_header']) : 1, |
| [1012](#L1012) | 'style' => isset($args['style']) ? $args['style'] : '', |
| [1013](#L1013) | 'skin' => isset($args['skin']) ? $args['skin'] : '', |
| [1014](#L1014) | 'pagination' => [ |
| [1015](#L1015) | 'position' => $per\_page\_position, //t,b,tb,none |
| [1016](#L1016) | 'next' => [ |
| [1017](#L1017) | 'class' => 'woot-btn', |
| [1018](#L1018) | 'content' => apply\_filters('woot\_lang\_load\_next', '&gt;') |
| [1019](#L1019) | ], |
| [1020](#L1020) | 'prev' => [ |
| [1021](#L1021) | 'class' => 'woot-btn', |
| [1022](#L1022) | 'content' => apply\_filters('woot\_lang\_load\_prev', '&lt;') |
| [1023](#L1023) | ], |
| [1024](#L1024) | 'input' => [ |
| [1025](#L1025) | 'class' => 'woot-form-control' |
| [1026](#L1026) | ], |
| [1027](#L1027) | ], |
| [1028](#L1028) | 'lang' => [ |
| [1029](#L1029) | 'loading' => WOOT\_Vocabulary::get(esc\_html\_\_('Loading ...', 'profit-products-tables-for-woocommerce')), |
| [1030](#L1030) | 'no\_data' => WOOT\_Vocabulary::get(esc\_html\_\_('No Data!', 'profit-products-tables-for-woocommerce')), |
| [1031](#L1031) | 'error' => WOOT\_Vocabulary::get(esc\_html\_\_('Error!', 'profit-products-tables-for-woocommerce')), |
| [1032](#L1032) | 'items' => WOOT\_Vocabulary::get(esc\_html\_\_('Products', 'profit-products-tables-for-woocommerce')), |
| [1033](#L1033) | 'page' => WOOT\_Vocabulary::get(esc\_html\_\_('Page', 'profit-products-tables-for-woocommerce')), |
| [1034](#L1034) | 'pages' => WOOT\_Vocabulary::get(esc\_html\_\_('Pages', 'profit-products-tables-for-woocommerce')), |
| [1035](#L1035) | 'load\_more' => apply\_filters('woot\_lang\_load\_more', WOOT\_Vocabulary::get(esc\_html\_\_('Load More', 'profit-products-tables-for-woocommerce')))], |
| [1036](#L1036) | 'per\_page\_sel\_position' => $per\_page\_sel\_position, //t,b,tb,none |
| [1037](#L1037) | 'per\_page\_sel\_pp' => $per\_page\_sel\_pp, |
| [1038](#L1038) | 'print\_css\_url' => WOOT\_ASSETS\_LINK . 'css/print.css', |
| [1039](#L1039) | 'request\_data' => [ |
| [1040](#L1040) | 'action' => $ajax\_action, |
| [1041](#L1041) | 'fields' => array\_keys($columns), |
| [1042](#L1042) | 'post\_type' => isset($add\_data['post\_type']) ? $add\_data['post\_type'] : '', |
| [1043](#L1043) | 'wp\_columns\_actions' => isset($args['action']) ? $args['action'] : WOOT\_WooCommerce::$action, |
| [1044](#L1044) | 'table\_id' => isset($args['id']) ? intval($args['id']) : 0, |
| [1045](#L1045) | 'predefinition' => json\_encode($predefinition), |
| [1046](#L1046) | 'filter\_data' => $filter\_data, |
| [1047](#L1047) | 'filter\_provider' => $filter\_provider, |
| [1048](#L1048) | 'orderby' => $orderby, |
| [1049](#L1049) | 'order' => $order, |
| [1050](#L1050) | 'per\_page' => $per\_page, |
| [1051](#L1051) | 'current\_page' => $current\_page, |
| [1052](#L1052) | 'shortcode\_args\_set' => json\_encode($args), |
| [1053](#L1053) | 'woot\_link\_get\_data' => json\_encode($get\_data) |
| [1054](#L1054) | ] |
| [1055](#L1055) | ]; |
| [1056](#L1056) |  |
| [1057](#L1057) | //special param, not for customers |
| [1058](#L1058) | if (isset($args['not\_load\_on\_init'])) { |
| [1059](#L1059) | $js\_script\_data['not\_load\_on\_init'] = 1; |
| [1060](#L1060) | } |
| [1061](#L1061) |  |
| [1062](#L1062) | if (isset($args['mode']) AND isset($args['is\_front']) AND $args['mode'] === 'json') { |
| [1063](#L1063) | $js\_script\_data['table\_data'] = $this->get\_table\_data(true, array\_merge($js\_script\_data['request\_data'])); |
| [1064](#L1064) | } |
| [1065](#L1065) |  |
| [1066](#L1066) |  |
| [1067](#L1067) |  |
| [1068](#L1068) | if ($as\_script) { |
| [1069](#L1069) | return "<div class='{$as\_script}' data-table-id='{$table\_html\_id}' style='display: none;'>" . json\_encode($js\_script\_data, JSON\_HEX\_QUOT | JSON\_HEX\_TAG) . '</div>'; |
| [1070](#L1070) | } |
| [1071](#L1071) |  |
| [1072](#L1072) |  |
| [1073](#L1073) | return json\_encode($js\_script\_data); |
| [1074](#L1074) | } |
| [1075](#L1075) |  |
| [1076](#L1076) | /\*\* |
| [1077](#L1077) | \* Main query function, as by ajax so and direct call |
| [1078](#L1078) | \* |
| [1079](#L1079) | \* @since 1.0.0 |
| [1080](#L1080) | \* @param boolean $return return or output |
| [1081](#L1081) | \* @param array $request Table requested arguements |
| [1082](#L1082) | \* @return array or string |
| [1083](#L1083) | \*/ |
| [1084](#L1084) | public function get\_table\_data($return = false, $requested\_data = []) { |
| [1085](#L1085) | $posts = []; |
| [1086](#L1086) | $post\_type = 'product'; |
| [1087](#L1087) | $posts\_per\_page = 10; |
| [1088](#L1088) | $current\_page = 0; |
| [1089](#L1089) | $orderby = 'ID'; |
| [1090](#L1090) | $order = 'DESC'; |
| [1091](#L1091) | $table\_id = 0; |
| [1092](#L1092) | $wp\_columns\_actions = WOOT\_WooCommerce::$action; |
| [1093](#L1093) | $filter\_data = []; |
| [1094](#L1094) | $filter\_provider = ''; |
| [1095](#L1095) | $fields = []; |
| [1096](#L1096) | $lang = ''; |
| [1097](#L1097) | $predefinition = []; |
| [1098](#L1098) | $shortcode\_args\_set = []; |
| [1099](#L1099) |  |
| [1100](#L1100) | if (empty($requested\_data) && !empty($\_REQUEST)) { |
| [1101](#L1101) | //if is ajax going from hook lets take keys we need |
| [1102](#L1102) | foreach ($\_REQUEST as $key => $value) { |
| [1103](#L1103) | switch ($key) { |
| [1104](#L1104) | case 'post\_type': |
| [1105](#L1105) | $post\_type = sanitize\_key($value); |
| [1106](#L1106) | break; |
| [1107](#L1107) |  |
| [1108](#L1108) | case 'per\_page': |
| [1109](#L1109) | $posts\_per\_page = intval($value); |
| [1110](#L1110) | break; |
| [1111](#L1111) |  |
| [1112](#L1112) | case 'orderby': |
| [1113](#L1113) | $orderby = sanitize\_key($value); |
| [1114](#L1114) | break; |
| [1115](#L1115) |  |
| [1116](#L1116) | case 'current\_page': |
| [1117](#L1117) | $current\_page = intval($value) + 1; |
| [1118](#L1118) | break; |
| [1119](#L1119) |  |
| [1120](#L1120) | case 'order': |
| [1121](#L1121) | $order = sanitize\_key($value); |
| [1122](#L1122) | break; |
| [1123](#L1123) |  |
| [1124](#L1124) | case 'table\_id': |
| [1125](#L1125) | $table\_id = intval($value); |
| [1126](#L1126) | break; |
| [1127](#L1127) |  |
| [1128](#L1128) | case 'wp\_columns\_actions': |
| [1129](#L1129) | $wp\_columns\_actions = sanitize\_key($value); |
| [1130](#L1130) | break; |
| [1131](#L1131) |  |
| [1132](#L1132) | case 'filter\_data': |
| [1133](#L1133) | if (!is\_array($value)) { |
| [1134](#L1134) | $filter\_data = WOOT\_HELPER::sanitize\_array(json\_decode(html\_entity\_decode(stripslashes($value)), ARRAY\_N)); |
| [1135](#L1135) | } else { |
| [1136](#L1136) | $filter\_data = WOOT\_HELPER::sanitize\_array($value); |
| [1137](#L1137) | } |
| [1138](#L1138) | break; |
| [1139](#L1139) |  |
| [1140](#L1140) | case 'filter\_provider': |
| [1141](#L1141) | $filter\_provider = WOOT\_HELPER::sanitize\_text(trim($value)); |
| [1142](#L1142) | break; |
| [1143](#L1143) |  |
| [1144](#L1144) | case 'fields': |
| [1145](#L1145) |  |
| [1146](#L1146) | if (is\_array($value)) { |
| [1147](#L1147) | $fields = WOOT\_HELPER::sanitize\_array($value); |
| [1148](#L1148) | } else { |
| [1149](#L1149) | $fields = WOOT\_HELPER::sanitize\_array(explode(',', trim($value))); |
| [1150](#L1150) | } |
| [1151](#L1151) |  |
| [1152](#L1152) | break; |
| [1153](#L1153) |  |
| [1154](#L1154) | case 'lang': |
| [1155](#L1155) | $lang = apply\_filters('woot\_current\_lang', WOOT\_HELPER::sanitize\_text($value)); |
| [1156](#L1156) | break; |
| [1157](#L1157) |  |
| [1158](#L1158) | case 'predefinition': |
| [1159](#L1159) | $predefinition = WOOT\_HELPER::sanitize\_array(json\_decode((stripslashes($value)), true)); |
| [1160](#L1160) | break; |
| [1161](#L1161) |  |
| [1162](#L1162) | case 'shortcode\_args\_set': |
| [1163](#L1163) | $shortcode\_args\_set = WOOT\_HELPER::sanitize\_array(json\_decode((stripslashes($value)), true)); |
| [1164](#L1164) | break; |
| [1165](#L1165) | } |
| [1166](#L1166) | } |
| [1167](#L1167) | } |
| [1168](#L1168) |  |
| [1169](#L1169) |  |
| [1170](#L1170) | //\*\*\* |
| [1171](#L1171) |  |
| [1172](#L1172) | if (!empty($requested\_data['post\_type'])) { |
| [1173](#L1173) | $post\_type = sanitize\_key($requested\_data['post\_type']); |
| [1174](#L1174) | } |
| [1175](#L1175) |  |
| [1176](#L1176) |  |
| [1177](#L1177) | if (isset($requested\_data['per\_page'])) { |
| [1178](#L1178) | $posts\_per\_page = intval($requested\_data['per\_page']); |
| [1179](#L1179) | } |
| [1180](#L1180) |  |
| [1181](#L1181) | if (isset($requested\_data['current\_page'])) { |
| [1182](#L1182) | $current\_page = intval($requested\_data['current\_page']) + 1; |
| [1183](#L1183) | } |
| [1184](#L1184) |  |
| [1185](#L1185) | if (isset($requested\_data['orderby'])) { |
| [1186](#L1186) | $orderby = sanitize\_key($requested\_data['orderby']); |
| [1187](#L1187) | } |
| [1188](#L1188) |  |
| [1189](#L1189) | if (isset($requested\_data['order'])) { |
| [1190](#L1190) | $order = sanitize\_key($requested\_data['order']); |
| [1191](#L1191) | } |
| [1192](#L1192) |  |
| [1193](#L1193) | $args = array( |
| [1194](#L1194) | 'post\_type' => $post\_type, |
| [1195](#L1195) | 'post\_status' => 'publish', |
| [1196](#L1196) | 'posts\_per\_page' => $posts\_per\_page, |
| [1197](#L1197) | 'orderby' => $orderby, |
| [1198](#L1198) | 'order' => $order, |
| [1199](#L1199) | 'paged' => $current\_page |
| [1200](#L1200) | ); |
| [1201](#L1201) |  |
| [1202](#L1202) | //\*\*\* |
| [1203](#L1203) |  |
| [1204](#L1204) | if (isset($requested\_data['table\_id'])) { |
| [1205](#L1205) | $table\_id = intval($requested\_data['table\_id']); |
| [1206](#L1206) | } |
| [1207](#L1207) |  |
| [1208](#L1208) |  |
| [1209](#L1209) | if (isset($requested\_data['shortcode\_args\_set'])) { |
| [1210](#L1210) | $shortcode\_args\_set = WOOT\_HELPER::sanitize\_array(json\_decode((stripslashes($requested\_data['shortcode\_args\_set'])), true)); |
| [1211](#L1211) | } |
| [1212](#L1212) |  |
| [1213](#L1213) | if (!empty($shortcode\_args\_set)) { |
| [1214](#L1214) | //get all products, be care with memory overflow (in docs) |
| [1215](#L1215) | if (isset($shortcode\_args\_set['mode']) AND ($shortcode\_args\_set['mode'] === 'to\_json' OR $shortcode\_args\_set['mode'] === 'json')) { |
| [1216](#L1216) | $args['posts\_per\_page'] = -1; |
| [1217](#L1217) | } |
| [1218](#L1218) | } |
| [1219](#L1219) |  |
| [1220](#L1220) |  |
| [1221](#L1221) | if (isset($requested\_data['wp\_columns\_actions'])) { |
| [1222](#L1222) | $wp\_columns\_actions = sanitize\_key($requested\_data['wp\_columns\_actions']); |
| [1223](#L1223) | } |
| [1224](#L1224) |  |
| [1225](#L1225) | $profile = apply\_filters($wp\_columns\_actions, $table\_id, $shortcode\_args\_set); |
| [1226](#L1226) | if (!empty($profile)) { |
| [1227](#L1227) | if (isset($profile[$orderby])) { |
| [1228](#L1228) | $orderby\_field = $profile[$orderby]; |
| [1229](#L1229) | if (isset($orderby\_field['meta\_key'])) { |
| [1230](#L1230) | $args['orderby'] = $orderby\_field['orderby']; |
| [1231](#L1231) | $orderby = $args['meta\_key'] = $orderby\_field['meta\_key']; |
| [1232](#L1232) | } |
| [1233](#L1233) | } |
| [1234](#L1234) |  |
| [1235](#L1235) | //\*\*\* |
| [1236](#L1236) |  |
| [1237](#L1237) | if (isset($profile[0]['post\_statuses'])) { |
| [1238](#L1238) | $args['post\_status'] = explode(',', $profile[0]['post\_statuses']); |
| [1239](#L1239) | } else { |
| [1240](#L1240) | $args['post\_status'] = 'publish'; |
| [1241](#L1241) | } |
| [1242](#L1242) | } |
| [1243](#L1243) |  |
| [1244](#L1244) | //\*\*\* |
| [1245](#L1245) |  |
| [1246](#L1246) | if (isset($requested\_data['filter\_data'])) { |
| [1247](#L1247) | if (!is\_array($requested\_data['filter\_data'])) { |
| [1248](#L1248) | //means transmitted by ajax by hook |
| [1249](#L1249) | $filter\_data = WOOT\_HELPER::sanitize\_array(json\_decode(html\_entity\_decode(stripslashes($requested\_data['filter\_data'])), ARRAY\_N)); |
| [1250](#L1250) | } else { |
| [1251](#L1251) | $filter\_data = WOOT\_HELPER::sanitize\_array($requested\_data['filter\_data']); |
| [1252](#L1252) | } |
| [1253](#L1253) | } |
| [1254](#L1254) |  |
| [1255](#L1255) |  |
| [1256](#L1256) | if (isset($requested\_data['filter\_provider'])) { |
| [1257](#L1257) | $filter\_provider = WOOT\_HELPER::sanitize\_text(trim($requested\_data['filter\_provider'])); |
| [1258](#L1258) | } |
| [1259](#L1259) |  |
| [1260](#L1260) | //\*\*\* |
| [1261](#L1261) |  |
| [1262](#L1262) | if (!isset($args['tax\_query'])) { |
| [1263](#L1263) | $args['tax\_query'] = []; |
| [1264](#L1264) | } |
| [1265](#L1265) |  |
| [1266](#L1266) | //must be here on top!! |
| [1267](#L1267) | $args['tax\_query'][] = [ |
| [1268](#L1268) | 'taxonomy' => 'product\_visibility', |
| [1269](#L1269) | 'field' => 'name', |
| [1270](#L1270) | 'terms' => ['exclude-from-catalog'], |
| [1271](#L1271) | 'operator' => 'NOT IN' |
| [1272](#L1272) | ]; |
| [1273](#L1273) |  |
| [1274](#L1274) | $args['woot\_text\_search\_by'] = []; |
| [1275](#L1275) | if (isset($shortcode\_args\_set['woot\_text\_search\_by']) AND !empty($shortcode\_args\_set['woot\_text\_search\_by'])) { |
| [1276](#L1276) | $woot\_text\_search = explode(',', $shortcode\_args\_set['woot\_text\_search\_by']); |
| [1277](#L1277) | $args['woot\_text\_search\_by'] = array\_filter($woot\_text\_search, function ($val) { |
| [1278](#L1278) | return in\_array($val, ['post\_title', 'post\_content', 'post\_excerpt']); |
| [1279](#L1279) | }); |
| [1280](#L1280) | } else { |
| [1281](#L1281) | $args['woot\_text\_search\_by'][] = 'post\_title'; //by default |
| [1282](#L1282) | } |
| [1283](#L1283) |  |
| [1284](#L1284) | //\*\*\* |
| [1285](#L1285) | $limit\_found\_posts = -1; |
| [1286](#L1286) |  |
| [1287](#L1287) | if (isset($requested\_data['predefinition']) AND !empty($requested\_data['predefinition'])) { |
| [1288](#L1288) | $predefinition = WOOT\_HELPER::sanitize\_array(json\_decode(stripslashes($requested\_data['predefinition']), true)); |
| [1289](#L1289) | } |
| [1290](#L1290) |  |
| [1291](#L1291) | if (!empty($predefinition)) { |
| [1292](#L1292) | //fix 16-09-2020 [woot author=2] |
| [1293](#L1293) | if (isset($predefinition['author'])) { |
| [1294](#L1294) | if (!isset($predefinition['rules'])) { |
| [1295](#L1295) | $predefinition['rules'] = []; |
| [1296](#L1296) | } |
| [1297](#L1297) |  |
| [1298](#L1298) | $predefinition['rules']['authors'] = strval(intval($predefinition['author'])); |
| [1299](#L1299) | } |
| [1300](#L1300) |  |
| [1301](#L1301) | if (!empty($predefinition) AND isset($predefinition['rules'])) { |
| [1302](#L1302) | foreach ($predefinition['rules'] as $key => $value) { |
| [1303](#L1303) | if (!empty($value)) { |
| [1304](#L1304) | if (intval($value) !== -1) { |
| [1305](#L1305) | switch ($key) { |
| [1306](#L1306) | case 'ids': |
| [1307](#L1307) |  |
| [1308](#L1308) | $products\_ids = explode(',', $value); |
| [1309](#L1309) | if (!empty($products\_ids) AND is\_array($products\_ids)) { |
| [1310](#L1310) | $args['post\_\_in'] = array\_map(function ($id) { |
| [1311](#L1311) | return intval($id); |
| [1312](#L1312) | }, $products\_ids); |
| [1313](#L1313) | } |
| [1314](#L1314) |  |
| [1315](#L1315) | break; |
| [1316](#L1316) |  |
| [1317](#L1317) | case 'ids\_exclude': |
| [1318](#L1318) |  |
| [1319](#L1319) | $products\_ids = explode(',', $value); |
| [1320](#L1320) | if (!empty($products\_ids) AND is\_array($products\_ids)) { |
| [1321](#L1321) | $args['post\_\_not\_in'] = array\_map(function ($id) { |
| [1322](#L1322) | return intval($id); |
| [1323](#L1323) | }, $products\_ids); |
| [1324](#L1324) | } |
| [1325](#L1325) |  |
| [1326](#L1326) | break; |
| [1327](#L1327) |  |
| [1328](#L1328) | case 'sku': |
| [1329](#L1329) |  |
| [1330](#L1330) | if (!empty($value)) { |
| [1331](#L1331) | $skus = explode(',', $value); |
| [1332](#L1332) | add\_action('woot\_wp\_query\_args', function ($args, $table\_id) use ($skus) { |
| [1333](#L1333) | if (!empty($skus) AND is\_array($skus)) { |
| [1334](#L1334) | $ids = []; |
| [1335](#L1335) |  |
| [1336](#L1336) | foreach ($skus as $sku) { |
| [1337](#L1337) | $product\_id = wc\_get\_product\_id\_by\_sku($sku); |
| [1338](#L1338) | $product = WOOT\_WooCommerce::get\_product($product\_id); |
| [1339](#L1339) |  |
| [1340](#L1340) | if (is\_object($product) AND $product->get\_type() === 'variation') { |
| [1341](#L1341) | $ids[] = $product->get\_parent\_id(); |
| [1342](#L1342) | } else { |
| [1343](#L1343) | $ids[] = $product\_id; |
| [1344](#L1344) | } |
| [1345](#L1345) | } |
| [1346](#L1346) |  |
| [1347](#L1347) | //\*\*\* |
| [1348](#L1348) |  |
| [1349](#L1349) | if (!empty($ids)) { |
| [1350](#L1350) | $args['post\_\_in'] = $ids; |
| [1351](#L1351) | } |
| [1352](#L1352) | } |
| [1353](#L1353) |  |
| [1354](#L1354) | return $args; |
| [1355](#L1355) | }, 10, 2); |
| [1356](#L1356) | } |
| [1357](#L1357) |  |
| [1358](#L1358) | break; |
| [1359](#L1359) |  |
| [1360](#L1360) | case 'sku\_exclude': |
| [1361](#L1361) |  |
| [1362](#L1362) | if (!empty($value)) { |
| [1363](#L1363) | $skus = explode(',', $value); |
| [1364](#L1364) | add\_action('woot\_wp\_query\_args', function ($args, $table\_id) use ($skus) { |
| [1365](#L1365) | if (!empty($skus) AND is\_array($skus)) { |
| [1366](#L1366) | $ids = []; |
| [1367](#L1367) |  |
| [1368](#L1368) | foreach ($skus as $sku) { |
| [1369](#L1369) | $ids[] = wc\_get\_product\_id\_by\_sku($sku); |
| [1370](#L1370) | } |
| [1371](#L1371) |  |
| [1372](#L1372) | //\*\*\* |
| [1373](#L1373) |  |
| [1374](#L1374) | if (!empty($ids)) { |
| [1375](#L1375) | $args['post\_\_not\_in'] = $ids; |
| [1376](#L1376) | } |
| [1377](#L1377) | } |
| [1378](#L1378) |  |
| [1379](#L1379) | return $args; |
| [1380](#L1380) | }, 10, 2); |
| [1381](#L1381) | } |
| [1382](#L1382) |  |
| [1383](#L1383) | break; |
| [1384](#L1384) |  |
| [1385](#L1385) | case 'authors': |
| [1386](#L1386) | $value = explode(',', $value); |
| [1387](#L1387) | if (!empty($value) AND is\_array($value)) { |
| [1388](#L1388) | $args['author\_\_in'] = $value; |
| [1389](#L1389) | } |
| [1390](#L1390) | break; |
| [1391](#L1391) |  |
| [1392](#L1392) | case 'on\_sale\_only': |
| [1393](#L1393) | if (intval($value) > 0) { |
| [1394](#L1394) | add\_action('woot\_wp\_query\_args', function ($args, $table\_id) { |
| [1395](#L1395) | $product\_ids\_on\_sale = wc\_get\_product\_ids\_on\_sale(); |
| [1396](#L1396) |  |
| [1397](#L1397) | if (!empty($product\_ids\_on\_sale)) { |
| [1398](#L1398) | $args['post\_\_in'] = $product\_ids\_on\_sale; |
| [1399](#L1399) | } |
| [1400](#L1400) |  |
| [1401](#L1401) | return $args; |
| [1402](#L1402) | }, 10, 2); |
| [1403](#L1403) | } |
| [1404](#L1404) | break; |
| [1405](#L1405) |  |
| [1406](#L1406) | case 'in\_stock\_only': |
| [1407](#L1407) | if (intval($value) > 0) { |
| [1408](#L1408) | add\_action('woot\_wp\_query\_args', function ($args, $table\_id) { |
| [1409](#L1409) |  |
| [1410](#L1410) | if (!isset($args['meta\_query'])) { |
| [1411](#L1411) | $args['meta\_query'] = []; |
| [1412](#L1412) | } |
| [1413](#L1413) |  |
| [1414](#L1414) | $args['meta\_query'][] = array( |
| [1415](#L1415) | 'key' => '\_stock\_status', |
| [1416](#L1416) | 'value' => 'instock', |
| [1417](#L1417) | 'compare' => 'IN' |
| [1418](#L1418) | ); |
| [1419](#L1419) |  |
| [1420](#L1420) | return $args; |
| [1421](#L1421) | }, 10, 2); |
| [1422](#L1422) | } |
| [1423](#L1423) | break; |
| [1424](#L1424) |  |
| [1425](#L1425) | case 'featured\_only': |
| [1426](#L1426) | if (intval($value) > 0) { |
| [1427](#L1427) | add\_action('woot\_wp\_query\_args', function ($args, $table\_id) { |
| [1428](#L1428) | $ids = wc\_get\_featured\_product\_ids(); |
| [1429](#L1429) |  |
| [1430](#L1430) | if (!empty($ids)) { |
| [1431](#L1431) | $args['post\_\_in'] = $ids; |
| [1432](#L1432) | } |
| [1433](#L1433) |  |
| [1434](#L1434) | return $args; |
| [1435](#L1435) | }, 10, 2); |
| [1436](#L1436) | } |
| [1437](#L1437) | break; |
| [1438](#L1438) |  |
| [1439](#L1439) | case 'favourites\_only': |
| [1440](#L1440) | if (intval($value) > 0) { |
| [1441](#L1441) | add\_action('woot\_wp\_query\_args', function ($args, $table\_id) { |
| [1442](#L1442) | $ids = [-1]; |
| [1443](#L1443) | global $WOOT\_Favourites; |
| [1444](#L1444) |  |
| [1445](#L1445) | if ($WOOT\_Favourites) { |
| [1446](#L1446) | $ids = $WOOT\_Favourites->get\_user\_data(); |
| [1447](#L1447) | } |
| [1448](#L1448) |  |
| [1449](#L1449) | if (!empty($ids)) { |
| [1450](#L1450) | $args['post\_\_in'] = $ids; |
| [1451](#L1451) | } |
| [1452](#L1452) |  |
| [1453](#L1453) | return $args; |
| [1454](#L1454) | }, 10, 2); |
| [1455](#L1455) | } |
| [1456](#L1456) | break; |
| [1457](#L1457) |  |
| [1458](#L1458) | case 'bestsellers': |
| [1459](#L1459) | if (intval($value) > 0) { |
| [1460](#L1460) | $limit\_found\_posts = intval($value); |
| [1461](#L1461) | add\_action('woot\_wp\_query\_args', function ($args, $table\_id) use ($value) { |
| [1462](#L1462) |  |
| [1463](#L1463) | $args['meta\_key'] = 'total\_sales'; |
| [1464](#L1464) | $args['orderby'] = 'meta\_value\_num'; |
| [1465](#L1465) | $args['posts\_per\_page'] = intval($value); |
| [1466](#L1466) |  |
| [1467](#L1467) | return $args; |
| [1468](#L1468) | }, 10, 2); |
| [1469](#L1469) | } |
| [1470](#L1470) | break; |
| [1471](#L1471) |  |
| [1472](#L1472) | case 'newest': |
| [1473](#L1473) | if (intval($value) > 0) { |
| [1474](#L1474) | $limit\_found\_posts = intval($value); |
| [1475](#L1475) | add\_action('woot\_wp\_query\_args', function ($args, $table\_id) use ($value) { |
| [1476](#L1476) |  |
| [1477](#L1477) | $args['orderby'] = 'post\_date'; |
| [1478](#L1478) | $args['order'] = 'desc'; |
| [1479](#L1479) | $args['posts\_per\_page'] = intval($value); |
| [1480](#L1480) |  |
| [1481](#L1481) | return $args; |
| [1482](#L1482) | }, 10, 2); |
| [1483](#L1483) | } |
| [1484](#L1484) | break; |
| [1485](#L1485) |  |
| [1486](#L1486) | case 'by\_taxonomy': |
| [1487](#L1487) | $args = $this->predefinition->get\_by\_taxonomy($args, $value); |
| [1488](#L1488) | break; |
| [1489](#L1489) | case 'not\_by\_taxonomy': |
| [1490](#L1490) | $args = $this->predefinition->get\_by\_taxonomy($args, $value, 'NOT IN'); |
| [1491](#L1491) | break; |
| [1492](#L1492) | case 'show\_hidden': |
| [1493](#L1493) |  |
| [1494](#L1494) | if (intval($value) > 0) { |
| [1495](#L1495) | if (isset($args['tax\_query']) AND !empty($args['tax\_query'])) { |
| [1496](#L1496) | foreach ($args['tax\_query'] as $key => $v) { |
| [1497](#L1497) | if ($v['taxonomy'] === 'product\_visibility') { |
| [1498](#L1498) | unset($args['tax\_query'][$key]); |
| [1499](#L1499) | break; |
| [1500](#L1500) | } |
| [1501](#L1501) | } |
| [1502](#L1502) | } |
| [1503](#L1503) | } |
| [1504](#L1504) |  |
| [1505](#L1505) | break; |
| [1506](#L1506) | } |
| [1507](#L1507) | } |
| [1508](#L1508) | } |
| [1509](#L1509) | } |
| [1510](#L1510) | } |
| [1511](#L1511) | } |
| [1512](#L1512) |  |
| [1513](#L1513) | //+++ |
| [1514](#L1514) |  |
| [1515](#L1515) | $this->filter->provider($filter\_data); |
| [1516](#L1516) | if (!empty($filter\_provider)) { |
| [1517](#L1517) | //here we can include any filter plugins |
| [1518](#L1518) | $args = apply\_filters("woot\_filter\_provider\_{$filter\_provider}", $args, $filter\_data, $shortcode\_args\_set); |
| [1519](#L1519) | } |
| [1520](#L1520) |  |
| [1521](#L1521) | //+++ |
| [1522](#L1522) | //fix for ordering by, as not all works trought WP\_Query arguments |
| [1523](#L1523) | $posts\_wp\_hook = ''; |
| [1524](#L1524) | $posts\_wp\_hook\_filter = ''; |
| [1525](#L1525) | switch ($args['orderby']) { |
| [1526](#L1526) | case 'post\_status': |
| [1527](#L1527) | $posts\_wp\_hook = 'posts\_orderby'; |
| [1528](#L1528) |  |
| [1529](#L1529) | $posts\_wp\_hook\_filter = function () use ($args) { |
| [1530](#L1530) | return "post\_status {$args['order']}"; |
| [1531](#L1531) | }; |
| [1532](#L1532) |  |
| [1533](#L1533) | add\_filter($posts\_wp\_hook, $posts\_wp\_hook\_filter); |
| [1534](#L1534) |  |
| [1535](#L1535) | break; |
| [1536](#L1536) |  |
| [1537](#L1537) | default: |
| [1538](#L1538) | break; |
| [1539](#L1539) | } |
| [1540](#L1540) |  |
| [1541](#L1541) | //\*\*\* |
| [1542](#L1542) |  |
| [1543](#L1543) | if ($args['orderby'] === 'id') { |
| [1544](#L1544) | //hot and important fix!! |
| [1545](#L1545) | $args['orderby'] = strtoupper($args['orderby']); |
| [1546](#L1546) | } |
| [1547](#L1547) |  |
| [1548](#L1548) | //\*\*\* |
| [1549](#L1549) | //multi-lang fix |
| [1550](#L1550) | if (!empty($lang)) { |
| [1551](#L1551) | $args['lang'] = $lang; |
| [1552](#L1552) | } |
| [1553](#L1553) |  |
| [1554](#L1554) | if (isset($requested\_data['lang'])) { |
| [1555](#L1555) | $args['lang'] = apply\_filters('woot\_current\_lang', WOOT\_HELPER::sanitize\_text($requested\_data['lang'])); |
| [1556](#L1556) | } else { |
| [1557](#L1557) | $args['lang'] = apply\_filters('woot\_current\_lang', get\_locale()); |
| [1558](#L1558) | } |
| [1559](#L1559) |  |
| [1560](#L1560) |  |
| [1561](#L1561) | //\*\*\* |
| [1562](#L1562) |  |
| [1563](#L1563) | if (isset($args['meta\_query']) AND !empty($args['meta\_query'])) { |
| [1564](#L1564) | if (!isset($args['meta\_query']['relation'])) { |
| [1565](#L1565) | $args['meta\_query'] = array\_merge(['relation' => 'AND'], $args['meta\_query']); |
| [1566](#L1566) | } |
| [1567](#L1567) | } |
| [1568](#L1568) |  |
| [1569](#L1569) | $query = new WP\_Query(apply\_filters('woot\_wp\_query\_args', $args, $table\_id)); |
| [1570](#L1570) |  |
| [1571](#L1571) | if ($limit\_found\_posts > 0) { |
| [1572](#L1572) | //for bestsellers and newest predefinitions |
| [1573](#L1573) | $query->found\_posts = $limit\_found\_posts; |
| [1574](#L1574) | } |
| [1575](#L1575) |  |
| [1576](#L1576) | if (!empty($posts\_wp\_hook)) { |
| [1577](#L1577) | remove\_filter($posts\_wp\_hook, $posts\_wp\_hook\_filter); |
| [1578](#L1578) | } |
| [1579](#L1579) |  |
| [1580](#L1580) |  |
| [1581](#L1581) | if (isset($requested\_data['fields'])) { |
| [1582](#L1582) | if (is\_array($requested\_data['fields'])) { |
| [1583](#L1583) | $fields = WOOT\_HELPER::sanitize\_array($requested\_data['fields']); |
| [1584](#L1584) | } else { |
| [1585](#L1585) | $fields = explode(',', trim($requested\_data['fields'])); |
| [1586](#L1586) | } |
| [1587](#L1587) | } |
| [1588](#L1588) |  |
| [1589](#L1589) | //\*\*\* |
| [1590](#L1590) |  |
| [1591](#L1591) | if (!empty($fields) AND !empty($query)) { |
| [1592](#L1592) |  |
| [1593](#L1593) | foreach ($query->posts as $post) { |
| [1594](#L1594) | $tmp = []; |
| [1595](#L1595) | $post\_id = $post->ID; |
| [1596](#L1596) | $tmp['pid'] = $post\_id; //VERY IMPORTANT AS IT POST ID IN THE TABLES CELLS ACTIONS |
| [1597](#L1597) |  |
| [1598](#L1598) | foreach ($fields as $field) { |
| [1599](#L1599) | if (isset($profile[$field]['action'])) { |
| [1600](#L1600) | $tmp[$field] = $profile[$field]['action']($post\_id); |
| [1601](#L1601) | } |
| [1602](#L1602) | } |
| [1603](#L1603) |  |
| [1604](#L1604) | $posts[] = $tmp; |
| [1605](#L1605) | } |
| [1606](#L1606) | } |
| [1607](#L1607) |  |
| [1608](#L1608) | //\*\*\* |
| [1609](#L1609) |  |
| [1610](#L1610) | if ($return) { |
| [1611](#L1611) | return ['rows' => $posts, 'count' => $query->found\_posts]; |
| [1612](#L1612) | } |
| [1613](#L1613) |  |
| [1614](#L1614) | die(json\_encode(['rows' => $posts, 'count' => $query->found\_posts])); |
| [1615](#L1615) | } |
| [1616](#L1616) |  |
| [1617](#L1617) | /\*\* |
| [1618](#L1618) | \* Ajax actions for popup |
| [1619](#L1619) | \* |
| [1620](#L1620) | \* @since 1.0.0 |
| [1621](#L1621) | \* |
| [1622](#L1622) | \* @return output the string |
| [1623](#L1623) | \*/ |
| [1624](#L1624) | public function get\_smth() { |
| [1625](#L1625) | $res = ''; |
| [1626](#L1626) | $what = WOOT\_HELPER::sanitize\_text(strip\_tags($\_REQUEST['what'])); |
| [1627](#L1627) | ///$what = sanitize\_text\_field($what); |
| [1628](#L1628) | $post\_id = 0; |
| [1629](#L1629) |  |
| [1630](#L1630) | //\*\*\* |
| [1631](#L1631) |  |
| [1632](#L1632) | if (isset($\_REQUEST['post\_id']) AND intval($\_REQUEST['post\_id']) === -1) { |
| [1633](#L1633) | $post\_id = intval($\_REQUEST['post\_id']); |
| [1634](#L1634) | } |
| [1635](#L1635) |  |
| [1636](#L1636) | if ($post\_id === -1) { |
| [1637](#L1637) | //done such because shortcode can has diff arguments and no table\_id |
| [1638](#L1638) | $shortcode\_button\_args = $what; |
| [1639](#L1639) | $what = 'shortcode\_button'; |
| [1640](#L1640) | } |
| [1641](#L1641) |  |
| [1642](#L1642) | //\*\*\* |
| [1643](#L1643) |  |
| [1644](#L1644) | switch ($what) { |
| [1645](#L1645) | case 'excerpt': |
| [1646](#L1646) | //disabled |
| [1647](#L1647) | $res = apply\_filters('woot\_filter\_smth\_excerpt', apply\_filters('the\_content', get\_the\_excerpt($post\_id)), $what); |
| [1648](#L1648) | break; |
| [1649](#L1649) |  |
| [1650](#L1650) | case 'content': |
| [1651](#L1651) | //disabled |
| [1652](#L1652) | $res = apply\_filters('woot\_filter\_smth\_content', apply\_filters('the\_content', get\_the\_content(null, false, $post\_id)), $what); |
| [1653](#L1653) | break; |
| [1654](#L1654) |  |
| [1655](#L1655) | case 'shortcodes\_help': |
| [1656](#L1656) | //disabled |
| [1657](#L1657) | $res = WOOT\_HELPER::render\_html('views/shortcodes\_help.php'); |
| [1658](#L1658) | break; |
| [1659](#L1659) |  |
| [1660](#L1660) | case 'shortcode\_button': |
| [1661](#L1661) | $shortcode\_button\_args = json\_decode(html\_entity\_decode(stripslashes($shortcode\_button\_args)), ARRAY\_A); |
| [1662](#L1662) | $res = $this->do\_shortcode($shortcode\_button\_args); |
| [1663](#L1663) | break; |
| [1664](#L1664) |  |
| [1665](#L1665) | case 'shortcodes\_set': |
| [1666](#L1666) | $content = WOOT\_HELPER::delete\_not\_allowed\_shortcodes($\_REQUEST['shortcodes\_set']); |
| [1667](#L1667) | $res = WOOT\_HELPER::sanitize\_array(do\_shortcode($content)); |
| [1668](#L1668) | break; |
| [1669](#L1669) |  |
| [1670](#L1670) | case 'export': |
| [1671](#L1671) | if (!current\_user\_can('manage\_woocommerce')) { |
| [1672](#L1672) | die('0'); |
| [1673](#L1673) | } |
| [1674](#L1674) | $data = []; |
| [1675](#L1675) | $data['woot\_tables'] = $this->tables->gets(); |
| [1676](#L1676) | $data['woot\_tables\_columns'] = $this->columns->gets(); |
| [1677](#L1677) | $data['woot\_tables\_meta'] = $this->columns->meta->gets(); |
| [1678](#L1678) | $data['woot\_vocabulary'] = $this->vocabulary->gets(); |
| [1679](#L1679) | $data['woot\_settings'] = get\_option('woot\_settings', []); |
| [1680](#L1680) |  |
| [1681](#L1681) | if ($data['woot\_settings'] AND !is\_array($data['woot\_settings'])) { |
| [1682](#L1682) | $data['woot\_settings'] = json\_decode($data['woot\_settings'], true); |
| [1683](#L1683) | } |
| [1684](#L1684) |  |
| [1685](#L1685) | $data['woot\_mime\_types\_association'] = get\_option('woot\_mime\_types\_association', []); |
| [1686](#L1686) | if ($data['woot\_mime\_types\_association'] AND !is\_array($data['woot\_mime\_types\_association'])) { |
| [1687](#L1687) | $data['woot\_mime\_types\_association'] = json\_decode($data['woot\_mime\_types\_association'], true); |
| [1688](#L1688) | } |
| [1689](#L1689) |  |
| [1690](#L1690) | $res = WOOT\_HELPER::draw\_html\_item('textarea', [ |
| [1691](#L1691) | 'readonly' => 'readonly', |
| [1692](#L1692) | 'style' => 'width: 100%; height: 500px', |
| [1693](#L1693) | ], json\_encode($data)); |
| [1694](#L1694) |  |
| [1695](#L1695) | break; |
| [1696](#L1696) |  |
| [1697](#L1697) | case 'import': |
| [1698](#L1698) | if (!current\_user\_can('manage\_woocommerce')) { |
| [1699](#L1699) | die('0'); |
| [1700](#L1700) | } |
| [1701](#L1701) | $res = '<div class="woot-notice">' . esc\_html\_\_('ATTENTION! All existed WOOT data will be wiped!', 'profit-products-tables-for-woocommerce') . '</div>'; |
| [1702](#L1702) | $res .= WOOT\_HELPER::draw\_html\_item('textarea', [ |
| [1703](#L1703) | 'autofocus' => '', |
| [1704](#L1704) | 'id' => 'woot-import-text', |
| [1705](#L1705) | ], '') . '<br />' . WOOT\_HELPER::draw\_html\_item('a', [ |
| [1706](#L1706) | 'href' => 'javascript: woot\_import\_options();void(0);', |
| [1707](#L1707) | 'class' => 'button woot-dash-btn', |
| [1708](#L1708) | ], '<span class="dashicons-before dashicons-arrow-up-alt"></span>&nbsp;' . esc\_html\_\_('Import', 'profit-products-tables-for-woocommerce')); |
| [1709](#L1709) |  |
| [1710](#L1710) | break; |
| [1711](#L1711) |  |
| [1712](#L1712) | case 'possible\_columns\_keys': |
| [1713](#L1713) |  |
| [1714](#L1714) | $res = '<h2>' . esc\_html\_\_('Columns keys', 'profit-products-tables-for-woocommerce') . '</h2>'; |
| [1715](#L1715) | $res .= '<ul>'; |
| [1716](#L1716) | $profile = apply\_filters(WOOT\_WooCommerce::$action, 0); |
| [1717](#L1717) |  |
| [1718](#L1718) | foreach ($profile as $key => $value) { |
| [1719](#L1719) | if (!$key) { |
| [1720](#L1720) | continue; |
| [1721](#L1721) | } |
| [1722](#L1722) |  |
| [1723](#L1723) | $res .= "<li><b>{$key}</b>: {$value['title']}</li>"; |
| [1724](#L1724) | } |
| [1725](#L1725) |  |
| [1726](#L1726) | $res .= '</ul><br />'; |
| [1727](#L1727) |  |
| [1728](#L1728) | $res .= '<h2>' . esc\_html\_\_('Order by keys', 'profit-products-tables-for-woocommerce') . '</h2>'; |
| [1729](#L1729) | $res .= '<ul>'; |
| [1730](#L1730) | foreach ($this->columns->options->get\_orderby\_fields(0) as $key => $value) { |
| [1731](#L1731) | $res .= "<li><b>{$key}</b>: {$value}</li>"; |
| [1732](#L1732) | } |
| [1733](#L1733) |  |
| [1734](#L1734) | $res .= '</ul><br />'; |
| [1735](#L1735) |  |
| [1736](#L1736) | $res .= '<h2>' . esc\_html\_\_('Filter keys', 'profit-products-tables-for-woocommerce') . '</h2>'; |
| [1737](#L1737) | $res .= '<ul>'; |
| [1738](#L1738) | foreach ($profile as $key => $value) { |
| [1739](#L1739) |  |
| [1740](#L1740) | if (isset($value['filter']) AND $value['filter']) { |
| [1741](#L1741) | $res .= "<li><b>{$key}</b>: {$value['title']}</li>"; |
| [1742](#L1742) | } |
| [1743](#L1743) | } |
| [1744](#L1744) |  |
| [1745](#L1745) | $res .= '</ul><br />'; |
| [1746](#L1746) |  |
| [1747](#L1747) | break; |
| [1748](#L1748) |  |
| [1749](#L1749) | default: |
| [1750](#L1750) | $what = json\_decode(stripslashes(WOOT\_HELPER::sanitize\_text($\_REQUEST['what'])), true); |
| [1751](#L1751) | $what = wc\_clean($what); |
| [1752](#L1752) | if (isset($what['call\_action'])) { |
| [1753](#L1753) | $res = apply\_filters($what['call\_action'], $what['more\_data'], $\_REQUEST['call\_id']); |
| [1754](#L1754) | } |
| [1755](#L1755) |  |
| [1756](#L1756) | break; |
| [1757](#L1757) | } |
| [1758](#L1758) |  |
| [1759](#L1759) | die('<div class="woot-content-in-popup"><p>' . $res . '</div>'); |
| [1760](#L1760) | } |
| [1761](#L1761) |  |
| [1762](#L1762) | /\*\* |
| [1763](#L1763) | \* Adds to system blank page template for creating iframes for remote pages and pages in popup |
| [1764](#L1764) | \* |
| [1765](#L1765) | \* @since 1.0.0 |
| [1766](#L1766) | \* |
| [1767](#L1767) | \* @return string template name |
| [1768](#L1768) | \*/ |
| [1769](#L1769) | public function blank\_page\_init() { |
| [1770](#L1770) |  |
| [1771](#L1771) | $blank\_template = 'blank-template.php'; |
| [1772](#L1772) |  |
| [1773](#L1773) | //Add our template(s) to the dropdown in the admin |
| [1774](#L1774) | add\_filter('theme\_page\_templates', function (array $templates) use ($blank\_template) { |
| [1775](#L1775) | $templates[$blank\_template] = esc\_html\_\_('WOOT Blank Page', 'profit-products-tables-for-woocommerce'); |
| [1776](#L1776) | return $templates; |
| [1777](#L1777) | }); |
| [1778](#L1778) |  |
| [1779](#L1779) | //Ensure our template is loaded on the front end |
| [1780](#L1780) | add\_filter('template\_include', function ($template) use ($blank\_template) { |
| [1781](#L1781) | if (is\_singular()) { |
| [1782](#L1782) |  |
| [1783](#L1783) | $assigned\_template = trim(get\_post\_meta(get\_the\_ID(), '\_wp\_page\_template', true)); |
| [1784](#L1784) |  |
| [1785](#L1785) | if ($blank\_template === $assigned\_template ? $assigned\_template : null) { |
| [1786](#L1786) |  |
| [1787](#L1787) | if (file\_exists($assigned\_template)) { |
| [1788](#L1788) | return $assigned\_template; |
| [1789](#L1789) | } |
| [1790](#L1790) |  |
| [1791](#L1791) | $file = wp\_normalize\_path(WOOT\_PATH . 'views/' . $assigned\_template); |
| [1792](#L1792) |  |
| [1793](#L1793) | if (file\_exists($file)) { |
| [1794](#L1794) | return $file; |
| [1795](#L1795) | } |
| [1796](#L1796) | } |
| [1797](#L1797) | } |
| [1798](#L1798) |  |
| [1799](#L1799) | return $template; |
| [1800](#L1800) | }); |
| [1801](#L1801) | } |
| [1802](#L1802) |  |
| [1803](#L1803) | /\*\* |
| [1804](#L1804) | \* Get a field options of table $table\_id |
| [1805](#L1805) | \* |
| [1806](#L1806) | \* @since 1.0.0 |
| [1807](#L1807) | \* @param int $table\_id table ID |
| [1808](#L1808) | \* @param string $field\_key field key |
| [1809](#L1809) | \* @return array one field(column) options |
| [1810](#L1810) | \*/ |
| [1811](#L1811) | public function get\_field\_options($table\_id, $field\_key) { |
| [1812](#L1812) | $options = $this->columns->get\_by\_field\_key($table\_id, $field\_key)['options']; |
| [1813](#L1813) |  |
| [1814](#L1814) | if (!empty($options)) { |
| [1815](#L1815) | $options = json\_decode($options, true); |
| [1816](#L1816) | } else { |
| [1817](#L1817) | $options = []; |
| [1818](#L1818) | } |
| [1819](#L1819) |  |
| [1820](#L1820) | return $options; |
| [1821](#L1821) | } |
| [1822](#L1822) |  |
| [1823](#L1823) | /\*\* |
| [1824](#L1824) | \* For set of tables in the popup |
| [1825](#L1825) | \* |
| [1826](#L1826) | \* @since 1.0.0 |
| [1827](#L1827) | \* @param array $args shortcode arguments |
| [1828](#L1828) | \* @return string generated HTML |
| [1829](#L1829) | \*/ |
| [1830](#L1830) | public function do\_set\_button($args) { |
| [1831](#L1831) |  |
| [1832](#L1832) | if (empty($args['title'])) { |
| [1833](#L1833) | $title = WOOT\_Vocabulary::get(esc\_html\_\_('click me', 'profit-products-tables-for-woocommerce')); |
| [1834](#L1834) | } else { |
| [1835](#L1835) | $title = WOOT\_Vocabulary::get($args['title']); |
| [1836](#L1836) | } |
| [1837](#L1837) |  |
| [1838](#L1838) | $popup\_title = ''; |
| [1839](#L1839) | if (isset($args['popup\_title'])) { |
| [1840](#L1840) | $popup\_title = WOOT\_Vocabulary::get($args['popup\_title']); |
| [1841](#L1841) | } |
| [1842](#L1842) |  |
| [1843](#L1843) | $class = ''; |
| [1844](#L1844) | if (isset($args['class'])) { |
| [1845](#L1845) | $class = $args['class']; |
| [1846](#L1846) | } |
| [1847](#L1847) |  |
| [1848](#L1848) | return WOOT\_HELPER::draw\_html\_item('a', [ |
| [1849](#L1849) | 'href' => '#', |
| [1850](#L1850) | 'title' => esc\_attr($popup\_title), |
| [1851](#L1851) | 'class' => esc\_attr($class), |
| [1852](#L1852) | 'data-popup-title' => esc\_attr($popup\_title), |
| [1853](#L1853) | 'data-shortcodes-set' => esc\_js($args['shortcode']) |
| [1854](#L1854) | ], $title); |
| [1855](#L1855) | } |
| [1856](#L1856) |  |
| [1857](#L1857) | /\*\* |
| [1858](#L1858) | \* For creating set of tables |
| [1859](#L1859) | \* |
| [1860](#L1860) | \* @since 1.0.0 |
| [1861](#L1861) | \* @param array $shortcodes shortcodes |
| [1862](#L1862) | \* @param string $view\_path path to view |
| [1863](#L1863) | \* @return string generated HTML |
| [1864](#L1864) | \*/ |
| [1865](#L1865) | public function do\_set($shortcodes, $view\_path = '') { |
| [1866](#L1866) | if (!empty($shortcodes)) { |
| [1867](#L1867) | foreach ($shortcodes as $k => $sh) { |
| [1868](#L1868) | $shortcodes[$k]['content'] = do\_shortcode($sh['content']); |
| [1869](#L1869) | } |
| [1870](#L1870) | } |
| [1871](#L1871) |  |
| [1872](#L1872) | if (empty($view\_path)) { |
| [1873](#L1873) | return WOOT\_HELPER::render\_html('views/set.php', ['shortcodes' => $shortcodes]); |
| [1874](#L1874) | } |
| [1875](#L1875) |  |
| [1876](#L1876) | return WOOT\_HELPER::render\_html($view\_path, ['shortcodes' => $shortcodes], FALSE); |
| [1877](#L1877) | } |
| [1878](#L1878) |  |
| [1879](#L1879) | /\*\* |
| [1880](#L1880) | \* The plugin data import |
| [1881](#L1881) | \* |
| [1882](#L1882) | \* @since 1.0.0 |
| [1883](#L1883) | \* |
| [1884](#L1884) | \* @return void |
| [1885](#L1885) | \*/ |
| [1886](#L1886) | public function import\_data() { |
| [1887](#L1887) |  |
| [1888](#L1888) | if (!current\_user\_can('manage\_woocommerce')) { |
| [1889](#L1889) | die('0'); |
| [1890](#L1890) | } |
| [1891](#L1891) |  |
| [1892](#L1892) | if (!isset($\_REQUEST['settings\_nonce']) || !wp\_verify\_nonce($\_REQUEST['settings\_nonce'], 'woot\_settings\_nonce')) { |
| [1893](#L1893) | die('0'); |
| [1894](#L1894) | } |
| [1895](#L1895) | if (WOOT\_HELPER::can\_manage\_data()) { |
| [1896](#L1896) | if (!empty($\_REQUEST['data'])) { |
| [1897](#L1897) | $data = WOOT\_HELPER::sanitize\_array(json\_decode(stripslashes($\_REQUEST['data']), true)); |
| [1898](#L1898) |  |
| [1899](#L1899) | if (json\_last\_error() == JSON\_ERROR\_NONE AND is\_array($data)) { |
| [1900](#L1900) | foreach ($data as $key => $value) { |
| [1901](#L1901) | switch ($key) { |
| [1902](#L1902) | case 'woot\_tables': |
| [1903](#L1903) | $this->tables->import($value); |
| [1904](#L1904) | break; |
| [1905](#L1905) |  |
| [1906](#L1906) | case 'woot\_tables\_columns': |
| [1907](#L1907) | $this->columns->import($value); |
| [1908](#L1908) | break; |
| [1909](#L1909) |  |
| [1910](#L1910) | case 'woot\_tables\_meta': |
| [1911](#L1911) | $this->columns->meta->import($value); |
| [1912](#L1912) | break; |
| [1913](#L1913) |  |
| [1914](#L1914) | case 'woot\_vocabulary': |
| [1915](#L1915) | $this->vocabulary->import($value); |
| [1916](#L1916) | break; |
| [1917](#L1917) |  |
| [1918](#L1918) | case 'woot\_settings': |
| [1919](#L1919) | case 'woot\_mime\_types\_association': |
| [1920](#L1920) | update\_option($key, $value); |
| [1921](#L1921) | break; |
| [1922](#L1922) | } |
| [1923](#L1923) | } |
| [1924](#L1924) | } |
| [1925](#L1925) | } |
| [1926](#L1926) | } |
| [1927](#L1927) |  |
| [1928](#L1928) | die('done'); |
| [1929](#L1929) | } |
| [1930](#L1930) |  |
| [1931](#L1931) | /\*\* |
| [1932](#L1932) | \* The ask for rate |
| [1933](#L1933) | \* |
| [1934](#L1934) | \* @since 1.0.0 |
| [1935](#L1935) | \* |
| [1936](#L1936) | \* @return void |
| [1937](#L1937) | \*/ |
| [1938](#L1938) | public function ask\_favour() { |
| [1939](#L1939) | if (get\_option('woot\_rate\_alert', 0)) { |
| [1940](#L1940) | //old rate system mark for already set review users |
| [1941](#L1941) | return; |
| [1942](#L1942) | } |
| [1943](#L1943) |  |
| [1944](#L1944) | $slug = strtolower(get\_class($this)); |
| [1945](#L1945) |  |
| [1946](#L1946) | add\_action("wp\_ajax\_{$slug}\_dismiss\_rate\_alert", function () use ($slug) { |
| [1947](#L1947) | update\_option("{$slug}\_dismiss\_rate\_alert", 2); |
| [1948](#L1948) | }); |
| [1949](#L1949) |  |
| [1950](#L1950) | add\_action("wp\_ajax\_{$slug}\_later\_rate\_alert", function () use ($slug) { |
| [1951](#L1951) | update\_option("{$slug}\_later\_rate\_alert", time() + 4 \* 7 \* 24 \* 60 \* 60); //4 weeks |
| [1952](#L1952) | }); |
| [1953](#L1953) |  |
| [1954](#L1954) | //+++ |
| [1955](#L1955) |  |
| [1956](#L1956) | add\_action('admin\_notices', function () use ($slug) { |
| [1957](#L1957) |  |
| [1958](#L1958) | if (!current\_user\_can('manage\_options')) { |
| [1959](#L1959) | return; //show to admin only |
| [1960](#L1960) | } |
| [1961](#L1961) |  |
| [1962](#L1962) | if (intval(get\_option("{$slug}\_dismiss\_rate\_alert", 0)) === 2) { |
| [1963](#L1963) | return; |
| [1964](#L1964) | } |
| [1965](#L1965) |  |
| [1966](#L1966) | if (intval(get\_option("{$slug}\_later\_rate\_alert", 0)) === 0) { |
| [1967](#L1967) | update\_option("{$slug}\_later\_rate\_alert", time() + 1 \* 3 \* 24 \* 60 \* 60); //3 days after install |
| [1968](#L1968) | return; |
| [1969](#L1969) | } |
| [1970](#L1970) |  |
| [1971](#L1971) | if (intval(get\_option("{$slug}\_later\_rate\_alert", 0)) > time()) { |
| [1972](#L1972) | return; |
| [1973](#L1973) | } |
| [1974](#L1974) |  |
| [1975](#L1975) | $link = 'https://codecanyon.net/downloads#item-27928580'; |
| [1976](#L1976) | $on = 'CodeCanyon'; |
| [1977](#L1977) | if ($this->show\_notes) { |
| [1978](#L1978) | $link = 'https://wordpress.org/support/plugin/profit-products-tables-for-woocommerce/reviews/#new-post'; |
| [1979](#L1979) | $on = 'WordPress'; |
| [1980](#L1980) | } |
| [1981](#L1981) | ?> |
| [1982](#L1982) | <div class="notice notice-info" id="pn\_<?php echo $slug ?>\_ask\_favour" style="position: relative;"> |
| [1983](#L1983) | <button onclick="javascript: pn\_<?php echo $slug ?>\_dismiss\_review(1); |
| [1984](#L1984) | void(0);" title="<?php \_e('Later', 'profit-products-tables-for-woocommerce'); ?>" class="notice-dismiss"></button> |
| [1985](#L1985) | <div id="pn\_<?php echo $slug ?>\_review\_suggestion"> |
| [1986](#L1986) | <p><?php \_e('Hi! Are you enjoying using WOOT - WooCommerce Active Products Tables?', 'profit-products-tables-for-woocommerce'); ?></p> |
| [1987](#L1987) | <p><a href="javascript: pn\_<?php echo $slug ?>\_set\_review(1); void(0);"><?php \_e('Yes, I love it', 'profit-products-tables-for-woocommerce'); ?></a> 🙂 | <a href="javascript: pn\_<?php echo $slug ?>\_set\_review(0); void(0);"><?php \_e('Not really...', 'profit-products-tables-for-woocommerce'); ?></a></p> |
| [1988](#L1988) | </div> |
| [1989](#L1989) |  |
| [1990](#L1990) | <div id="pn\_<?php echo $slug ?>\_review\_yes" style="display: none;"> |
| [1991](#L1991) | <p><?php printf(\_\_('That\'s awesome! Could you please do us a BIG favor and give it a 5-star rating on %s to help us spread the word and boost our motivation?', 'profit-products-tables-for-woocommerce'), $on) ?></p> |
| [1992](#L1992) | <p style="font-weight: bold;">~ PluginUs.NET developers team</p> |
| [1993](#L1993) | <p> |
| [1994](#L1994) | <a href="<?php echo $link ?>" style="display: inline-block; margin-right: 10px;" onclick="pn\_<?php echo $slug ?>\_dismiss\_review(2)" target="\_blank"><?php esc\_html\_e('Okay, you deserve it', 'profit-products-tables-for-woocommerce'); ?></a> |
| [1995](#L1995) | <a href="javascript: pn\_<?php echo $slug ?>\_dismiss\_review(1); void(0);" style="display: inline-block; margin-right: 10px;"><?php esc\_html\_e('Nope, maybe later', 'profit-products-tables-for-woocommerce'); ?></a> |
| [1996](#L1996) | <a href="javascript: pn\_<?php echo $slug ?>\_dismiss\_review(2); void(0);"><?php esc\_html\_e('I already did', 'profit-products-tables-for-woocommerce'); ?></a> |
| [1997](#L1997) | </p> |
| [1998](#L1998) | </div> |
| [1999](#L1999) |  |
| [2000](#L2000) | <div id="pn\_<?php echo $slug ?>\_review\_no" style="display: none;"> |
| [2001](#L2001) | <p><?php \_e('We are sorry to hear you aren\'t enjoying WOOT. We would love a chance to improve it. Could you take a minute and let us know what we can do better?', 'profit-products-tables-for-woocommerce'); ?></p> |
| [2002](#L2002) | <p> |
| [2003](#L2003) | <a href="https://pluginus.net/contact-us/" onclick="pn\_<?php echo $slug ?>\_dismiss\_review(2)" target="\_blank"><?php esc\_html\_e('Give Feedback', 'profit-products-tables-for-woocommerce'); ?></a>&nbsp; |
| [2004](#L2004) | |&nbsp;<a href="javascript: pn\_<?php echo $slug ?>\_dismiss\_review(2); void(0);"><?php esc\_html\_e('No thanks', 'profit-products-tables-for-woocommerce'); ?></a> |
| [2005](#L2005) | </p> |
| [2006](#L2006) | </div> |
| [2007](#L2007) |  |
| [2008](#L2008) |  |
| [2009](#L2009) | <script> |
| [2010](#L2010) | function pn\_<?php echo $slug ?>\_set\_review(yes) { |
| [2011](#L2011) | document.getElementById('pn\_<?php echo $slug ?>\_review\_suggestion').style.display = 'none'; |
| [2012](#L2012) | if (yes) { |
| [2013](#L2013) | document.getElementById('pn\_<?php echo $slug ?>\_review\_yes').style.display = 'block'; |
| [2014](#L2014) | } else { |
| [2015](#L2015) | document.getElementById('pn\_<?php echo $slug ?>\_review\_no').style.display = 'block'; |
| [2016](#L2016) | } |
| [2017](#L2017) | } |
| [2018](#L2018) |  |
| [2019](#L2019) | function pn\_<?php echo $slug ?>\_dismiss\_review(what = 1) { |
| [2020](#L2020) | //1 maybe later, 2 do not ask more |
| [2021](#L2021) | jQuery('#pn\_<?php echo $slug ?>\_ask\_favour').fadeOut(); |
| [2022](#L2022) |  |
| [2023](#L2023) | if (what === 1) { |
| [2024](#L2024) | jQuery.post(ajaxurl, { |
| [2025](#L2025) | action: '<?php echo $slug ?>\_later\_rate\_alert' |
| [2026](#L2026) | }); |
| [2027](#L2027) | } else { |
| [2028](#L2028) | jQuery.post(ajaxurl, { |
| [2029](#L2029) | action: '<?php echo $slug ?>\_dismiss\_rate\_alert' |
| [2030](#L2030) | }); |
| [2031](#L2031) | } |
| [2032](#L2032) |  |
| [2033](#L2033) | return true; |
| [2034](#L2034) | } |
| [2035](#L2035) | </script> |
| [2036](#L2036) | </div> |
| [2037](#L2037) | <?php |
| [2038](#L2038) | }); |
| [2039](#L2039) | } |
| [2040](#L2040) | } |
| [2041](#L2041) |  |
| [2042](#L2042) | //\*\*\* |
| [2043](#L2043) |  |
| [2044](#L2044) | $GLOBALS['WOOT'] = new WOOT(); |
| [2045](#L2045) |  |
| [2046](#L2046) | function woot() { |
| [2047](#L2047) | global $WOOT; |
| [2048](#L2048) | return $WOOT; |
| [2049](#L2049) | } |
| [2050](#L2050) |  |
| [2051](#L2051) | add\_action('init', array(woot(), 'init'), 9999); |
| [2052](#L2052) | add\_action('plugins\_loaded', array(woot(), 'blank\_page\_init')); |
| [2053](#L2053) |  |
| [2054](#L2054) | /\*\* |
| [2055](#L2055) | \* Remote js action for iframe |
| [2056](#L2056) | \* |
| [2057](#L2057) | \* @since 1.0.0 |
| [2058](#L2058) | \* |
| [2059](#L2059) | \* @return output generated HTML |
| [2060](#L2060) | \*/ |
| [2061](#L2061) | add\_action('wp\_loaded', function () { |
| [2062](#L2062) | //Example: https://site.com/?woot-remote-page=\_\_PAGE\_SLUG\_\_&width=800&height=600&anchor=\_\_CONTAINER\_HTML\_ID\_\_ |
| [2063](#L2063) | //Example: https://site.com/woot-remote.php?woot-remote-page=\_\_PAGE\_SLUG\_\_&width=800&height=600&anchor=\_\_CONTAINER\_HTML\_ID\_\_ |
| [2064](#L2064) | $get\_data = WOOT\_HELPER::sanitize\_array($\_GET); |
| [2065](#L2065) | if (isset($get\_data['woot-remote-page']) AND isset($get\_data['anchor'])) { |
| [2066](#L2066) | ?> |
| [2067](#L2067) | var woot\_remote\_src = "<?php esc\_attr\_e(home\_url($get\_data['woot-remote-page'])) ?>"; |
| [2068](#L2068) | var woot\_remote\_width = '<?php esc\_attr\_e(isset($get\_data['width']) ? urldecode($get\_data['width']) : '100%') ?>'; |
| [2069](#L2069) | var woot\_remote\_height = <?php esc\_attr\_e(isset($get\_data['height']) ? intval($get\_data['height']) : 500) ?>; |
| [2070](#L2070) | var woot\_remote\_anchor = "#<?php esc\_attr\_e(strip\_tags(strval($get\_data['anchor']))) ?>"; |
| [2071](#L2071) | <?php |
| [2072](#L2072) | echo 'var woot\_link\_get\_data=' . json\_encode($get\_data) . ';'; |
| [2073](#L2073) | die(WOOT\_HELPER::render\_html('assets/js/remote.js')); |
| [2074](#L2074) | } |
| [2075](#L2075) | }); |
| [2076](#L2076) |  |
| [2077](#L2077) | //Special shortcodes |
| [2078](#L2078) |  |
| [2079](#L2079) | add\_shortcode('woot\_popup\_iframe\_button', function ($args) { |
| [2080](#L2080) | /\* |
| [2081](#L2081) | wp\_enqueue\_script('woot-helper', WOOT\_ASSETS\_LINK . 'js/helper.js', [], WOOT\_VERSION, true); |
| [2082](#L2082) | wp\_enqueue\_script('popup-23', WOOT\_ASSETS\_LINK . 'js/popup-23.js', ['woot-helper'], WOOT\_VERSION, true); |
| [2083](#L2083) | wp\_enqueue\_style('woot-popup-23', WOOT\_ASSETS\_LINK . 'css/popup-23.css', [], WOOT\_VERSION); |
| [2084](#L2084) | wp\_enqueue\_style('woot-general', WOOT\_ASSETS\_LINK . 'css/general.css', [], WOOT\_VERSION); |
| [2085](#L2085) | wp\_enqueue\_script('woot-general', WOOT\_ASSETS\_LINK . 'js/general.js', [], WOOT\_VERSION, true); |
| [2086](#L2086) | \* |
| [2087](#L2087) | \*/ |
| [2088](#L2088) |  |
| [2089](#L2089) | global $WOOT; |
| [2090](#L2090) |  |
| [2091](#L2091) | $WOOT->include\_assets(); |
| [2092](#L2092) |  |
| [2093](#L2093) | $popup\_page\_link = ''; |
| [2094](#L2094) | if (isset($args['popup\_page\_link'])) { |
| [2095](#L2095) | $popup\_page\_link = $args['popup\_page\_link']; |
| [2096](#L2096) | } |
| [2097](#L2097) |  |
| [2098](#L2098) | $button\_text = esc\_html\_\_('Products in popup', 'profit-products-tables-for-woocommerce') . ': '; |
| [2099](#L2099) | if (isset($args['button\_text'])) { |
| [2100](#L2100) | $button\_text = $args['button\_text']; |
| [2101](#L2101) | } |
| [2102](#L2102) |  |
| [2103](#L2103) | $popup\_title = ''; |
| [2104](#L2104) | if (isset($args['popup\_title'])) { |
| [2105](#L2105) | $popup\_title = $args['popup\_title']; |
| [2106](#L2106) | } |
| [2107](#L2107) |  |
| [2108](#L2108) | $css\_class = ''; |
| [2109](#L2109) | if (isset($args['css\_class'])) { |
| [2110](#L2110) | $css\_class = $args['css\_class']; |
| [2111](#L2111) | } |
| [2112](#L2112) |  |
| [2113](#L2113) | $help\_title = ''; |
| [2114](#L2114) | if (isset($args['help\_title'])) { |
| [2115](#L2115) | $help\_title = WOOT\_Vocabulary::get($args['help\_title']); |
| [2116](#L2116) | $help\_title = trim($help\_title, '"'); |
| [2117](#L2117) | $help\_title = trim($help\_title, "'"); |
| [2118](#L2118) | unset($args['help\_title']); |
| [2119](#L2119) | } |
| [2120](#L2120) |  |
| [2121](#L2121) | $help\_link = ''; |
| [2122](#L2122) | if (isset($args['help\_link'])) { |
| [2123](#L2123) | $help\_link = $args['help\_link']; |
| [2124](#L2124) | unset($args['help\_link']); |
| [2125](#L2125) | } |
| [2126](#L2126) |  |
| [2127](#L2127) | return WOOT\_HELPER::draw\_html\_item('a', [ |
| [2128](#L2128) | 'href' => '#', |
| [2129](#L2129) | 'title' => esc\_attr($popup\_title), |
| [2130](#L2130) | 'class' => esc\_attr($css\_class), |
| [2131](#L2131) | 'data-popup-title' => esc\_attr($popup\_title), |
| [2132](#L2132) | 'data-iframe' => esc\_url($popup\_page\_link), |
| [2133](#L2133) | 'data-style' => esc\_attr('height: 100vh'), |
| [2134](#L2134) | 'data-help-title' => esc\_attr($help\_title ?? ''), |
| [2135](#L2135) | 'data-help-link' => esc\_url($help\_link ?? ''), |
| [2136](#L2136) | ], $button\_text); |
| [2137](#L2137) | }); |
| [2138](#L2138) |  |
| [2139](#L2139) | //+++ |
| [2140](#L2140) |  |
| [2141](#L2141) | add\_shortcode('woot\_gallery', function ($args) { |
| [2142](#L2142) |  |
| [2143](#L2143) | $args = (array) $args; |
| [2144](#L2144) |  |
| [2145](#L2145) | $post\_id = 0; |
| [2146](#L2146) |  |
| [2147](#L2147) | if (isset($args['id'])) { |
| [2148](#L2148) | $post\_id = intval($args['id']); |
| [2149](#L2149) | } |
| [2150](#L2150) |  |
| [2151](#L2151) | if (!$post\_id) { |
| [2152](#L2152) | global $post; |
| [2153](#L2153) | $post\_id = $post->ID; |
| [2154](#L2154) | } |
| [2155](#L2155) |  |
| [2156](#L2156) | if ($post\_id > 0) { |
| [2157](#L2157) | wp\_enqueue\_script('woot-general', WOOT\_ASSETS\_LINK . 'js/general.js', [], WOOT\_VERSION, true); |
| [2158](#L2158) | wp\_enqueue\_style('woot-gallery', WOOT\_ASSETS\_LINK . 'css/gallery.css', [], WOOT\_VERSION); |
| [2159](#L2159) | wp\_enqueue\_style('woot-general', WOOT\_ASSETS\_LINK . 'css/general.css', [], WOOT\_VERSION); |
| [2160](#L2160) |  |
| [2161](#L2161) | $product = WOOT\_WooCommerce::get\_product($post\_id); |
| [2162](#L2162) |  |
| [2163](#L2163) | if (is\_object($product)) { |
| [2164](#L2164) | $images\_ids = $product->get\_gallery\_image\_ids(); |
| [2165](#L2165) |  |
| [2166](#L2166) | $img\_data = []; |
| [2167](#L2167) |  |
| [2168](#L2168) | foreach ($images\_ids as $attachment\_id) { |
| [2169](#L2169) | $img = wp\_get\_attachment\_image\_src($attachment\_id); |
| [2170](#L2170) | if (isset($img[0])) { |
| [2171](#L2171) | $img\_data[] = [ |
| [2172](#L2172) | 'thumb' => $img[0], |
| [2173](#L2173) | 'original' => wp\_get\_attachment\_image\_src($attachment\_id, 'full')[0], |
| [2174](#L2174) | 'title' => $product->get\_title() |
| [2175](#L2175) | ]; |
| [2176](#L2176) | } |
| [2177](#L2177) | } |
| [2178](#L2178) |  |
| [2179](#L2179) | if (!empty($img\_data)) { |
| [2180](#L2180) | $uniqid = uniqid(); |
| [2181](#L2181) | $data = [ |
| [2182](#L2182) | 'img\_data' => $img\_data, |
| [2183](#L2183) | 'uniqid' => $uniqid, |
| [2184](#L2184) | 'is\_shortcode' => true |
| [2185](#L2185) | ]; |
| [2186](#L2186) |  |
| [2187](#L2187) | return WOOT\_HELPER::render\_html('views/gallery.php', apply\_filters('woot\_print\_plugin\_options', $data)); |
| [2188](#L2188) | } else { |
| [2189](#L2189) | return ''; |
| [2190](#L2190) | } |
| [2191](#L2191) | } |
| [2192](#L2192) | } |
| [2193](#L2193) | }); |
| [2194](#L2194) |  |
| [2195](#L2195) | add\_shortcode('woot\_single\_btn', function ($args) { |
| [2196](#L2196) |  |
| [2197](#L2197) | $args = (array) $args; |
| [2198](#L2198) |  |
| [2199](#L2199) | $post\_id = 0; |
| [2200](#L2200) |  |
| [2201](#L2201) | if (isset($args['id'])) { |
| [2202](#L2202) | $post\_id = intval($args['id']); |
| [2203](#L2203) | } |
| [2204](#L2204) |  |
| [2205](#L2205) | if (!$post\_id) { |
| [2206](#L2206) | global $post; |
| [2207](#L2207) | if (is\_object($post)) { |
| [2208](#L2208) | $post\_id = $post->ID; |
| [2209](#L2209) | } |
| [2210](#L2210) | } |
| [2211](#L2211) |  |
| [2212](#L2212) | if ($post\_id > 0) { |
| [2213](#L2213) | woot()->include\_assets(); |
| [2214](#L2214) |  |
| [2215](#L2215) | $title = esc\_html\_\_('Product', 'profit-products-tables-for-woocommerce') . ': '; |
| [2216](#L2216) | $title .= addslashes(get\_post\_field('post\_title', $post\_id)); |
| [2217](#L2217) | $unique\_id = uniqid('gp'); |
| [2218](#L2218) |  |
| [2219](#L2219) | $button\_text = '<i class="woot-icon">&#xf1c6;</i>'; |
| [2220](#L2220) | if (isset($args['button\_text'])) { |
| [2221](#L2221) | $button\_text = $args['button\_text']; |
| [2222](#L2222) | } |
| [2223](#L2223) |  |
| [2224](#L2224) | $css\_class = 'woot-btn woot-btn-1'; |
| [2225](#L2225) | if (isset($args['css\_class'])) { |
| [2226](#L2226) | $css\_class = $args['css\_class']; |
| [2227](#L2227) | } |
| [2228](#L2228) |  |
| [2229](#L2229) | $columns = ''; |
| [2230](#L2230) | if (isset($args['columns'])) { |
| [2231](#L2231) | $columns = $args['columns']; |
| [2232](#L2232) | } |
| [2233](#L2233) |  |
| [2234](#L2234) | $help\_title = ''; |
| [2235](#L2235) | if (isset($args['help\_title'])) { |
| [2236](#L2236) | $help\_title = WOOT\_Vocabulary::get($args['help\_title']); |
| [2237](#L2237) | $help\_title = trim($help\_title, '"'); |
| [2238](#L2238) | $help\_title = trim($help\_title, "'"); |
| [2239](#L2239) | unset($args['help\_title']); |
| [2240](#L2240) | } |
| [2241](#L2241) |  |
| [2242](#L2242) | $help\_link = ''; |
| [2243](#L2243) | if (isset($args['help\_link'])) { |
| [2244](#L2244) | $help\_link = $args['help\_link']; |
| [2245](#L2245) | unset($args['help\_link']); |
| [2246](#L2246) | } |
| [2247](#L2247) |  |
| [2248](#L2248) | $skin = ''; |
| [2249](#L2249) | if (isset($args) AND isset($args['skin'])) { |
| [2250](#L2250) | $skin = $args['skin']; |
| [2251](#L2251) | } |
| [2252](#L2252) |  |
| [2253](#L2253) | return WOOT\_HELPER::draw\_html\_item('a', array( |
| [2254](#L2254) | 'href' => "javascript: woot\_helper.call\_popup(\"woot\_get\_table\_single\_product\",{product\_id: {$post\_id}, skin: \"{$skin}\", columns:\"{$columns}\", not\_paste:1}, \"{$unique\_id}\", \"{$title}\", {help\_title: \"{$help\_title}\",help\_link: \"{$help\_link}\"}); void(0);", |
| [2255](#L2255) | 'title' => $title, |
| [2256](#L2256) | 'class' => $css\_class |
| [2257](#L2257) | ), $button\_text); |
| [2258](#L2258) | } |
| [2259](#L2259) | }); |
| [2260](#L2260) |  |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/profit-products-tables-for-woocommerce/trunk/index.php?format=txt)
* [Original Format](/export/3222765/profit-products-tables-for-woocommerce/trunk/index.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_6e44ab0a_20250115_102354.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3199368)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3199367 "Changeset 3199367")
* [Next Changeset](/changeset/3199369 "Changeset 3199369") →

---

# Changeset 3199368

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
11/29/2024 10:53:34 AM
([7 weeks](/timeline?from=2024-11-29T10%3A53%3A34Z&precision=second "See timeline at 11/29/2024 10:53:34 AM") ago)

Author:
RealMag777
Message:

one security fix, thanks to Arkadiusz Hydzik and Wordfence

Location:
[profit-products-tables-for-woocommerce/trunk](/browser/profit-products-tables-for-woocommerce/trunk?rev=3199368)
Files:

2 edited

* [index.php](/browser/profit-products-tables-for-woocommerce/trunk/index.php?rev=3199368 "Show entry in browser")
  (modified)
  ([4 diffs](#file0 "Show differences"))
* [readme.txt](/browser/profit-products-tables-for-woocommerce/trunk/readme.txt?rev=3199368 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [profit-products-tables-for-woocommerce/trunk/index.php](/changeset/3199368/profit-products-tables-for-woocommerce/trunk/index.php "Show the changeset 3199368 restricted to profit-products-tables-for-woocommerce/trunk/index.php")

  | [r3188516](/browser/profit-products-tables-for-woocommerce/trunk/index.php?rev=3188516#L8 "Show revision 3188516 of this file in browser") | [r3199368](/browser/profit-products-tables-for-woocommerce/trunk/index.php?rev=3199368#L8 "Show revision 3199368 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | Author: realmag777 |
  | 9 | 9 | Author URI: https://pluginus.net/ |
  | 10 |  | Version: 1.0.6.~~5~~ |
  |  | 10 | Version: 1.0.6.6 |
  | 11 | 11 | Requires PHP: 7.2 |
  | 12 | 12 | Tags: tables, products, filter, woocommerce, products table |
  | […](/browser/profit-products-tables-for-woocommerce/trunk/index.php?rev=3188516#L14) | […](/browser/profit-products-tables-for-woocommerce/trunk/index.php?rev=3199368#L14) |  |
  | 14 | 14 | Domain Path: /languages |
  | 15 | 15 | WC requires at least: 5.6 |
  | 16 |  | WC tested up to: 9.~~3~~ |
  |  | 16 | WC tested up to: 9.4 |
  | 17 | 17 | Forum URI: https://pluginus.net/support/forum/woot-woocommerce-active-products-tables/ |
  | 18 | 18 | \*/ |
  | […](/browser/profit-products-tables-for-woocommerce/trunk/index.php?rev=3188516#L29) | […](/browser/profit-products-tables-for-woocommerce/trunk/index.php?rev=3199368#L29) |  |
  | 29 | 29 | define('WOOT\_ASSETS\_PATH', WOOT\_PATH . 'assets/'); |
  | 30 | 30 | define('WOOT\_PLUGIN\_NAME', plugin\_basename(\_\_FILE\_\_)); |
  | 31 |  | define('WOOT\_VERSION', '1.0.6.~~5~~'); |
  |  | 31 | define('WOOT\_VERSION', '1.0.6.6'); |
  | 32 | 32 | //define('WOOT\_VERSION', uniqid('woot-')); //for dev |
  | 33 | 33 |  |
  | […](/browser/profit-products-tables-for-woocommerce/trunk/index.php?rev=3188516#L53) | […](/browser/profit-products-tables-for-woocommerce/trunk/index.php?rev=3199368#L53) |  |
  | 53 | 53 | }); |
  | 54 | 54 |  |
  | 55 |  | //~~14~~-11-2024 |
  |  | 55 | //29-11-2024 |
  | 56 | 56 | class WOOT { |
  | 57 | 57 |  |
* ## [profit-products-tables-for-woocommerce/trunk/readme.txt](/changeset/3199368/profit-products-tables-for-woocommerce/trunk/readme.txt "Show the changeset 3199368 restricted to profit-products-tables-for-woocommerce/trunk/readme.txt")

  | [r3182136](/browser/profit-products-tables-for-woocommerce/trunk/readme.txt?rev=3182136#L6 "Show revision 3182136 of this file in browser") | [r3199368](/browser/profit-products-tables-for-woocommerce/trunk/readme.txt?rev=3199368#L6 "Show revision 3199368 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Tested up to: 6.7 |
  | 7 | 7 | Requires PHP: 7.2 |
  | 8 |  | Stable tag: 1.0.6.~~5~~ |
  |  | 8 | Stable tag: 1.0.6.6 |
  | 9 | 9 | License: GPLv2 |
  | 10 | 10 | License URI: https://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/profit-products-tables-for-woocommerce/trunk/readme.txt?rev=3182136#L176) | […](/browser/profit-products-tables-for-woocommerce/trunk/readme.txt?rev=3199368#L176) |  |
  | 176 | 176 | == Changelog == |
  | 177 | 177 |  |
  |  | 178 | = 1.0.6.6 = |
  |  | 179 | \* one security fix, thanks to Arkadiusz Hydzik and Wordfence |
  |  | 180 |  |
  | 178 | 181 | = 1.0.6.5 = |
  | 179 |  | \* one security fix, thanks to Peter Thaleikis ~~from~~ Wordfence |
  |  | 182 | \* one security fix, thanks to Peter Thaleikis and Wordfence |
  | 180 | 183 |  |
  | 181 | 184 | = 1.0.6.4 = |
  | 182 |  | \* one security fix, thanks to Le Ngoc Anh ~~from~~ Patchstack |
  |  | 185 | \* one security fix, thanks to Le Ngoc Anh and Patchstack |
  | 183 | 186 |  |
  | 184 | 187 | = 1.0.6.3 = |
  | 185 |  | \* security fixes, thanks to Dhabaleshwar Das ~~from~~ Patchstack |
  |  | 188 | \* security fixes, thanks to Dhabaleshwar Das and Patchstack |
  | 186 | 189 |  |
  | 187 | 190 | = 1.0.6.2 = |
  | […](/browser/profit-products-tables-for-woocommerce/trunk/readme.txt?rev=3182136#L189) | […](/browser/profit-products-tables-for-woocommerce/trunk/readme.txt?rev=3199368#L192) |  |
  | 189 | 192 |  |
  | 190 | 193 | = 1.0.6.1 = |
  | 191 |  | \* security fixes, thanks to Darius Sveikauskas ~~from~~ Patchstack |
  |  | 194 | \* security fixes, thanks to Darius Sveikauskas and Patchstack |
  | 192 | 195 |  |
  | 193 | 196 | = 1.0.6 = |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3199368)
* [Zip Archive](?format=zip&new=3199368)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


