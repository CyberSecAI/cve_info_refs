=== Content from wordpress.org_6ed580a9_20250114_211414.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Contact Form Builder by vcita

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fcontact-form-with-a-meeting-scheduler-by-vcita&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fcontact-form-with-a-meeting-scheduler-by-vcita&locale=en_US)

Search plugins

![](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/assets/banner-772x250.png?rev=2391901)

This plugin **hasn’t been tested with the latest 3 major releases of WordPress**. It may no longer be maintained or supported and may have compatibility issues when used with more recent versions of WordPress.

![](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/assets/icon-256x256.png?rev=2391899)
# Contact Form Builder by vcita

By [vCita.com](https://www.vcita.com)

[Download](https://downloads.wordpress.org/plugin/contact-form-with-a-meeting-scheduler-by-vcita.zip)

* [Details](https://wordpress.org/plugins/contact-form-with-a-meeting-scheduler-by-vcita/#description)
* [Reviews](https://wordpress.org/plugins/contact-form-with-a-meeting-scheduler-by-vcita/#reviews)
* [Installation](https://wordpress.org/plugins/contact-form-with-a-meeting-scheduler-by-vcita/#installation)
* [Development](https://wordpress.org/plugins/contact-form-with-a-meeting-scheduler-by-vcita/#developers)

[Support](https://wordpress.org/support/plugin/contact-form-with-a-meeting-scheduler-by-vcita/)

## Description

vcita’s Contact Form is the ultimate way to capture and manage leads on your WordPress website.

Create and integrate beautiful forms in seconds – customized to any purpose and perfectly match the website theme and design.

#### Contact Form Builder key features:

* Easily create and embed responsive contact forms that look great on any device
* Full customisation of the contact form look and feel – layout, colors, size, fonts and more
* Easy to add, remove, edit and reorder contact form fields
* Create as many forms as you want and embed those on any website
* Select which fields are mandatory on you contact form
* Unlimited number of fields on your contact form
* Add any question you need to your contact form. vcita will show all the information your clients provided on a client card including their picture, age and more
* Multiple contact form field options to choose from: Text fields, numeric fields, text areas and dropdown fields on your contact form
* Language customisation for all contact form texts and labels
* Unlimited contact form entries
* Receive Email & SMS notifications on any contact form submission, and provide immediate follow-up using any device.
* Manage all leads using vcita’s CRM tool.
* Export all contact form submissions and client information to Excel or CSV
* Send clients email confirmation for any contact form submission
* Easily search for contacts and follow up: take notes, edit contact information and track sent emails

Learn more about our [Contact Form for WordPress](https://www.vcita.com/contact_form?invite=WP-contact)

## Screenshots

* [![](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-1.jpg?rev=3200767)](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-1.jpg?rev=3200767)

  **vcita Contact Form** – Fully customized form, with several layout options and full customization.
* [![](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-2.jpg?rev=3200767)](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-2.jpg?rev=3200767)

  **Proactive Contact Form** – Don’t wait for visitors to contact you, approach them on any page and double your leads!
* [![](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-3.png?rev=3200767)](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-3.png?rev=3200767)

  **Customize colors and fonts** – Customize your contact form’s colors, border styles, fonts and sizes.
* [![](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-4.png?rev=3200767)](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-4.png?rev=3200767)

  **Multiple Layout Options to choose from** – Create the contact form that best fits your website. Your contact form can include different info and actions.
* [![](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-5.png?rev=3200767)](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-5.png?rev=3200767)

  **Custom Fields** – Add, Edit and Remove fields with a simple drag and drop UI.
* [![](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-6.png?rev=3200767)](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-6.png?rev=3200767)

  **Customize colors and fonts** – Customize your contact form’s colors, border styles, fonts and sizes.
* [![](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-7.png?rev=3200767)](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-7.png?rev=3200767)

  **View full correspondence** – View all client requests in one place, where you can also take action – reply, schedule a follow-up meeting and send an invoice.
* [![](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-8.png?rev=3200767)](https://ps.w.org/contact-form-with-a-meeting-scheduler-by-vcita/trunk/screenshot-8.png?rev=3200767)

  **Track and Manage contacts** – Keep history of contacts, manage contact details and track whether your messages are read by clients.

## Installation

#### Contact Form Plugin Installation for WordPress

1. Connect to WordPress Admin Panel
2. Click the “Plugins” menu on the left and choose “Add New”.

   Search for “Contact Form by vcita” and install it.
3. After the contact form plugin installation has completed, click “Activate”.
4. Click on the new “vcita Contact Form” tab that is now available on your left bar.
5. Enter an email to which new contact requests and contact form submissions will be sent, and click “OK”
6. Enter your first name and last name in the pop-up window and click “Submit” and start building your contact form.
7. Our contact form plugin offers you 3 different widgets. You can add any of the widgets to your wordPress website. For best results – we recommend to add all 3 widgets.

## FAQ

### Which contact form options do I have?

vcita offers three contact form options to engage more visitors within your website:

**Classic Contact form** – well designed contact form with full customization. You can use any of our form styles, which allows you to show different details on your form.

* Contact form with form fields
* Contact form with form fields, profile picture, name and title
* Contact form with form fields and scheduling buttons
* Contact form with form fields, profile picture, name and title and scheduling buttons

  You can add and edit all contact form fields, for your needs.The scheduling buttons allows clients to schedule an appointment or a meeting with you, directly from your contact form!

There’s more?

Of course! Along with our professional and classic contact form, we have two additional contact forms which can help you gain more leads from your website visitors!

**LiveSite** – a proactive contact form, display “call-to-action” at the bottom of your web page.

This contact form has proven to **produces twice as many contact and online scheduling requests as any other contact form**.

LiveSite can automatically display your invitation to visitors and encourage more leads to contact you – leave contact details or schedule appointments and meetings.

**Contact Form Sidebar** – can be added to any post or page and invite client to contact you.
 This form can include your profile photo or logo and a brief invitation to contact you or even schedule an appointment. This contact form plugin can be styled horizontally or vertically, include scheduling buttons, and even link to your full profile.

### Can I add LiveSite to a specific page?

Visit our support forum to see how to [Add LiveSite to specific pages](https://support.vcita.com/forums/21650943-wordpress)

### Is the contact form available in other languages?

You can add any text you want to our contact form, making our contact form **available in any language**!

### How do I manually change the size of the contact form widget?

You can add a resized widget using the HTML code: If vcita contact form widget is already installed, please remove the current vcita contact form widget form your WP sidebar

On your WordPress admin panel, click on “Appearance” menu and select Widgets.

Drag vcita Widget from Main Sidebar menu to Available Widgets section on the left. (This may disconnect your vcita account from the contact form plugin)

Reconnect your account to vcita contact form plugin – Click on Plugins menu and select vcita Contact Form

Enter the email address for your vcita account, click on “Already have a vcita account?” and click Connect.

Back on your vcita account at https://www.vcita.com/get\_widget?widget=widget Please resize the contact form widget on “Widget Preview” section and click on “Update changes”.

Click on Install New Widget (a new window should pop up), Select “Other Websites” (don’t select WordPress) and copy the code on the right.

Back on your WP account, install and activate HTML JavaScript Adder plugin – https://www.vcita.com/get\_widget?widget=widget

Add the HTML JavaScript Adder widget to your right sidebar – On your WP admin panel, click on Appearance menu and select Widgets.

Drag HTML JavaScript Adder widget to your right sidebar and paste the contact from widget’s HTML code (copied on the previous step). Click Save.

### What are vcita Terms and Conditions?

Please visit [Terms and Conditions](https://www.vcita.com/about/terms_of_service?invite=WP)

### What is vcita Privacy Policy?

Please visit [Privacy Policy](https://www.vcita.com/about/privacy_policy?invite=WP)

## Reviews

![](https://secure.gravatar.com/avatar/07dc00dc2f03647658fb9887ae38f83da254363b05ba652b2e22308a4a8ce3cb?s=60&d=retro&r=g)
### [Easy & Useful !!](https://wordpress.org/support/topic/easy-useful-7/)

[nikeslipper](https://profiles.wordpress.org/nikeslipper/ "Posts by nikeslipper")
February 28, 2017

I can sure this app must be hot in the future! Easy, looking good, useful and FREE!

![](https://secure.gravatar.com/avatar/75f8236f33fb25df663c71e993a56455465f9781d84e68207b7910d21d7c2dda?s=60&d=retro&r=g)
### [Easy and Professional](https://wordpress.org/support/topic/easy-and-professional/)

[Nicinnv](https://profiles.wordpress.org/nicinnv/ "Posts by Nicinnv")
September 3, 2016

fast setup, easy to install, considering the upgrade!

![](https://secure.gravatar.com/avatar/4dc446e44c66a7e5d961c7fb2a659deec1a75f45d6a9b7a7693484b3253d8286?s=60&d=retro&r=g)
### [Very cute tiny little app that does wonder in your lead gen](https://wordpress.org/support/topic/very-cute-tiny-little-app-that-does-wonder-in-your-lead-gen/)

[murtuzi](https://profiles.wordpress.org/murtuzi/ "Posts by murtuzi")
September 3, 2016

I love using Vcita, it is friendly, cute, and does what it says very well.
Try it to know yourself.

![](https://secure.gravatar.com/avatar/0b06ce670847af3834bba82b234fb79c1e902ccfc40a8e94cd67995a6480cca6?s=60&d=retro&r=g)
### [Works](https://wordpress.org/support/topic/works-866/)

[oldcode](https://profiles.wordpress.org/coconutcoder/ "Posts by oldcode")
September 3, 2016

Plugin works, thanks.

![](https://secure.gravatar.com/avatar/2fd9b9a4dd4248401b0403d24e69a0f8824a0252759a20eb6b34823df237ae44?s=60&d=retro&r=g)
### [Lost leads](https://wordpress.org/support/topic/lost-leads/)

September 3, 2016
1 reply

This plugin claims to have a free version which I was using but now it is forcing me to upgrade and I lost leads because I can’t reply to people who contacted me through the plugin.

![](https://secure.gravatar.com/avatar/4d81927a23b0114b2663e36476b2ffc092e77d8e9440861d0ba59f149f223e42?s=60&d=retro&r=g)
### [Poor customer service, full of glitches](https://wordpress.org/support/topic/poor-customer-service-full-of-glitches/)

[neverpaintagain](https://profiles.wordpress.org/neverpaintagain/ "Posts by neverpaintagain")
September 3, 2016

i was initially very pleased with what I could with this form but recently i am getting fed up with zero help from the customer service team. If you have a problem with this, you will get a “default” reply from them and zero help. Currently the form is not sending emails to me from its control panel, no idea why and am thinking of ditching it. I paid for the premium support, 200 bucks and to be honest i wish i carried on with the free version.
One final thing, if you use all features such as the livesite invite THIS WILL SLOW LOADING OF YOUR SITE DOWN which may instruct google to show you lower in the search lists. My site loads in about 1 or 1.5 seconds with this switched off, but switched on, it takes up to 3 seconds. That might not seem much but it can be the difference between that potential customer staying on your site or leaving and going to your rivals website. I really would not install this and we looking for a new system.
If you need help vcita could give a toss. A shame

[Read all 43 reviews](https://wordpress.org/support/plugin/contact-form-with-a-meeting-scheduler-by-vcita/reviews/)
## Contributors & Developers

“Contact Form Builder by vcita” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/7aa69a054ca9d3c50178584d1f5a569cf77dd8c5b3534e4fe6e08b62bc7dc09a?s=32&d=mm&r=g) [vcita](https://profiles.wordpress.org/vcita/)
* ![](https://secure.gravatar.com/avatar/500511c69cc86c013eb15b71294fb04d5366b98d6f4d54235579e82253d0ecf5?s=32&d=mm&r=g) [scheduling](https://profiles.wordpress.org/scheduling/)

[Translate “Contact Form Builder by vcita” into your language.](https://translate.wordpress.org/projects/wp-plugins/contact-form-with-a-meeting-scheduler-by-vcita)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/contact-form-with-a-meeting-scheduler-by-vcita/), check out the [SVN repository](https://plugins.svn.wordpress.org/contact-form-with-a-meeting-scheduler-by-vcita/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/contact-form-with-a-meeting-scheduler-by-vcita/) by [RSS](https://plugins.trac.wordpress.org/log/contact-form-with-a-meeting-scheduler-by-vcita/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### vcita Contact Form Version 4.10.5

* security update

#### vcita Contact Form Version 4.10.2

* security improvements

#### vcita Contact Form Version 4.10.0

* security improvements

#### vcita Contact Form Version 4.9.1

* Compatibility with WordPress 5.2

#### vcita Contact Form Version 4.9

* Compatibility with WordPress 5.1
* Automatic marketing campaigns added: send automatic birthday coupons to your customers, define your trigger and create beautiful email campaigns for any special occasion.
* Client portal updated
* New image gallery & upload function: increase your brand visibility & look as pro online as in real life
* Bug fixed

#### vcita Contact Form Version 4.8.1

* Fixed a redirection bug when updating via Rest API

#### vcita Contact Form Version 4.8

* Security and privacy adjustments (full compliance with GDPR requirements)
* Issue branded price estimates, let clients approve them online and turn them into invoices in a single click
* Charge clients’ credit card directly from your backoffice
* Accept, collect & record partial payments for upcoming or rendered services & appointments
* New automated reminders for overdue invoices and for about-to-expire estimates
* New “saved items” library to add pre-saved services to invoices & estimates
* Add your business terms & conditions to estimates and invoices
* New option to set and enforce your business cancellation & rescheduling policy
* Two new staff permission types: Manager and Marketer (in addition to the existing roles of Administrator, Collaborator and User)
* New option to add private documents to your client cards for internal use
* Schedule email & SMS campaigns to be sent out at a future date & time
* New parameters for campaigns: insert clients’ names within your email & SMS campaigns
* Brand new dashboard with a quick-view of all your business activity to gain insights and take action
* New sticky custom fields allowing you to ask a returning client for specific information until they fill it in
* Add, edit and manage past group events & classes
* New & improved Zapier integrations: new triggers, new actions and new search option

#### vcita Contact Form Version 4.7

* Compatibility with WordPress 4.9
* Set date-specific availability
* Schedule recurring appointments
* Create & share discount coupons
* Improved invoicing & payment management
* Full translation to Italian

#### vcita Contact Form Version 4.6

* Compatibility with WordPress 4.8

#### vcita Contact Form Version 4.5.4

* Staff assignment rules
* Email & SMS campaigns
* Mobile app performance improvements

#### vcita Contact Form Version 4.5.3

* Manage files and documents
* Compatibility with WordPress 4.7

#### vcita Contact Form Version 4.5.2

* Enhanced payment options
* Compatibility with WordPress 4.6

#### vcita Contact Form Version 4.5.0

* UI improvements

#### vcita Contact Form Version 4.4.0

* Compatibility with WordPress 4.5

#### vcita Contact Form Version 4.3.0

* Some UI improvements

#### vcita Contact Form Version 4.2.0

* Compatibility with WordPress 4.4.1
* Fixes to support PHP version 5.2.17

#### vcita Contact Form Version 4.1.0

* Compatibility with WordPress 4.4
* UI improvements
* 3rd party integrations

#### vcita Contact Form Version 4.0.0

* Completely new design with more widget options for your site
* Compatibility with WordPress 4.3.1

#### vcita Contact Form Version 3.10.0

* Compatibility with WordPress 4.3
* Scheduling form customization per service

#### vcita Contact Form Version 3.9.5

* Compatibility with WordPress 4.2
* New! SMS reminders to clients

#### vcita Contact Form Version 3.9.0

* New – collect payments using Stripe.
* Customize and better control the automatic email notifications sent to your clients and your business.
* Set Future Booking Cut-Off Date
* More Layouts for the LiveSite Widget

#### vcita Contact Form Version 3.8.0

* New design for the email notifications sent from vcita to you & your clients
* More customization for the emails including branding colors and logo
* New! Email signature option was added
* Enhencements with scheduling settings to prevent appointments from being scheduled to far in advance

#### vcita Contact Form Version 3.7.0

* Compatibility with WordPress 4.1

#### vcita Contact Form Version 3.6.0

* Complete Spanish translation
* New LiveSite widget
* Direct Payment option
* Direct document Sharing option

#### vcita Contact Form Version 3.5.0

* Full French support
* Online file sharing option

#### vcita Contact Form Version 3.4.0

* Compatibility with 4.0.1
* Improved payment options

#### vcita Contact Form Version 3.3.2

* Compatibility with 4.0
* Few Bugs Fixed

#### vcita Contact Form Version 3.3.0

* LiveSite widget for WordPress
* Added more contact management options

#### vcita Contact Form Version 3.2.1

* Text changes

#### vcita Contact Form Version 3.2

* Adjustments to WordPress “Parker” version 3.8
* Scheduling for multiple team members
* Scheduling and contact custom fields

#### vcita Contact Form Version 3.1

* A direct link to profile settings
* New contact form customization options: Fonts, font sizes, text box colors, new layouts, and more.

#### vcita Contact Form Version 3.0

* A new plugin management screen
* All widgets editing can now be done directly from WordPress
* Fix to Contact Sidebar disconnection issue
* New contact form color themes options

#### vcita Contact Form Version 2.1.3

* Contact form fully integrates with Facebook pages
* More payments options
* Removed 24 hours scheduling notification
* Full Spanish support
* Contact form FAQ and tips enhancements

#### vcita Contact Form Version 2.1.2

* Customised contact form fields and labels
* Add as many form fields as desired
* Created contact form labels in any language!
* Customised contact form style, shape and colors
* All clients’ details are available
* Add Watermarks to specific fields
* More contact from styles
* FAQ enhancements

#### vcita Contact Form Version 2.1.1

* FAQ enhancements
* Branding options to scheduling processes

#### vcita Contact Form Version 2.1.0

* Improved Active Engage look and feel

#### vcita Contact Form Version 2.0.0 (13 May 2012)

* Settings page now uses vcita site for much more customisation options on your contact form
* Redesign of the settings page to be simpler and contain more relevant information
* Changed to use the new API
* Fixed all warnings for referencing undefined array indices
* Updated FAQs

#### vcita Contact Form Version 1.4.6.2

* Optimised confirm your account link

#### vcita Contact Form Version 1.4.6.1

* Check for expert availability of upgrade

#### vcita Contact Form Version 1.4.6

* Image fixes

#### vcita Contact Form Version 1.4.5

* Doc and plugin name change

#### vcita Contact Form Version 1.4.4

* Moved vcita settings to be under the plugins menu

#### vcita Contact Form Version 1.4.3

* Typo fix

#### vcita Contact Form Version 1.4.2

* Fixed warning about missing parameter

#### vcita Contact Form Version 1.4.1

* Fixed default parameters

#### vcita Contact Form Version 1.4.0

* Added the new vcita Active Engage feature
* Fixed that from future upgrades the widget won’t be removed on upgrade.

#### vcita Contact Form Version 1.3.0

* Removed the dependency with the curl library
* Updated Documentation
* Improved widget preview (Using the settings page)
* Added FAQ

#### vcita Contact Form Version 1.2.2

* Updated Documentation

#### vcita Contact Form Version 1.2.0

* Redesign of the settings page
* Added a preview for the sidebar widget
* Added direct links to dedicated vcita settings
* Fixed a bug with the embedding of the shortcode
* Updated documentation

#### vcita Contact Form Version 1.1.0

* Created a new and simplified design for the Contact Form Settings page
* Added the “Professional Title” field which can be specified while creating a new user
* New screenshots

## Meta

* Version **4.10.2**
* Last updated **1 month ago**
* Active installations **1,000+**
* WordPress version **4.6 or higher**
* Tested up to **6.3.5**
* Tags [contact](https://wordpress.org/plugins/tags/contact/)[contact form](https://wordpress.org/plugins/tags/contact-form/)[custom form](https://wordpress.org/plugins/tags/custom-form/)[form builder](https://wordpress.org/plugins/tags/form-builder/)[lead](https://wordpress.org/plugins/tags/lead/)
* [Advanced View](https://wordpress.org/plugins/contact-form-with-a-meeting-scheduler-by-vcita/advanced/)

## Ratings

3.3 out of 5 stars.

* [21 5-star reviews
  5 stars

  21](https://wordpress.org/support/plugin/contact-form-with-a-meeting-scheduler-by-vcita/reviews/?filter=5)
* [3 4-star reviews
  4 stars

  3](https://wordpress.org/support/plugin/contact-form-with-a-meeting-scheduler-by-vcita/reviews/?filter=4)
* [0 3-star reviews
  3 stars

  0](https://wordpress.org/support/plugin/contact-form-with-a-meeting-scheduler-by-vcita/reviews/?filter=3)
* [2 2-star reviews
  2 stars

  2](https://wordpress.org/support/plugin/contact-form-with-a-meeting-scheduler-by-vcita/reviews/?filter=2)
* [16 1-star reviews
  1 star

  16](https://wordpress.org/support/plugin/contact-form-with-a-meeting-scheduler-by-vcita/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/contact-form-with-a-meeting-scheduler-by-vcita/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/contact-form-with-a-meeting-scheduler-by-vcita/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/7aa69a054ca9d3c50178584d1f5a569cf77dd8c5b3534e4fe6e08b62bc7dc09a?s=32&d=mm&r=g) [vcita](https://profiles.wordpress.org/vcita/)
* ![](https://secure.gravatar.com/avatar/500511c69cc86c013eb15b71294fb04d5366b98d6f4d54235579e82253d0ecf5?s=32&d=mm&r=g) [scheduling](https://profiles.wordpress.org/scheduling/)
## Support

Got something to say? Need help?

[View support forum](https://wordpress.org/support/plugin/contact-form-with-a-meeting-scheduler-by-vcita/)

## Donate

Would you like to support the advancement of this plugin?

[Donate to this plugin](https://www.vcita.com?invite=WP-contact)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_cf64d572_20250114_211416.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Contact Form Builder <= 4.10.4 - Authenticated (Contributor+) Stored Cross-Site Scripting via livesite-pay Shortcode

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Contact Form Builder <= 4.10.4 - Authenticated (Contributor+) Stored Cross-Site Scripting via livesite-pay Shortcode

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-10056](https://www.cve.org/CVERecord?id=CVE-2024-10056) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | December 4, 2024 |
| Last Updated | December 5, 2024 |
| Researcher | [Peter Thaleikis](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/spek) |

### Description

The Contact Form Builder by vcita plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the plugin's livesite-pay shortcode in all versions up to, and including, 4.10.4 due to insufficient input sanitization and output escaping on user supplied attributes. This makes it possible for authenticated attackers, with contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [wordpress.org](https://wordpress.org/plugins/contact-form-with-a-meeting-scheduler-by-vcita/#developers)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3200766/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fcontact-form-with-a-meeting-scheduler-by-vcita%2Fcontact-form-builder-4104-authenticated-contributor-stored-cross-site-scripting-via-livesite-pay-shortcode&t=Contact%20Form%20Builder%20%3C%3D%204.10.4%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20livesite-pay%20Shortcode "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fcontact-form-with-a-meeting-scheduler-by-vcita%2Fcontact-form-builder-4104-authenticated-contributor-stored-cross-site-scripting-via-livesite-pay-shortcode&text=Contact%20Form%20Builder%20%3C%3D%204.10.4%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20livesite-pay%20Shortcode "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fcontact-form-with-a-meeting-scheduler-by-vcita%2Fcontact-form-builder-4104-authenticated-contributor-stored-cross-site-scripting-via-livesite-pay-shortcode "LinkedIn")
Email

## Vulnerability Details for Contact Form Builder by vcita

#### [Contact Form Builder by vcita](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/contact-form-with-a-meeting-scheduler-by-vcita)

| Software Type | Plugin |
| --- | --- |
| Software Slug | contact-form-with-a-meeting-scheduler-by-vcita [(view on wordpress.org)](https://wordpress.org/plugins/contact-form-with-a-meeting-scheduler-by-vcita) |
| Patched? | Yes |
| Remediation | Update to version 4.10.5, or a newer patched version |
| Affected Version | * <= 4.10.4 |
| Patched Version | * 4.10.5 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_9386db8d_20250114_211413.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3200766)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3200765 "Changeset 3200765")
* [Next Changeset](/changeset/3200767 "Changeset 3200767") →

---

# Changeset 3200766

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
12/02/2024 09:54:17 AM
([6 weeks](/timeline?from=2024-12-02T09%3A54%3A17Z&precision=second "See timeline at 12/02/2024 09:54:17 AM") ago)

Author:
vCita
Message:

security update

Location:
[contact-form-with-a-meeting-scheduler-by-vcita/trunk](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk?rev=3200766)
Files:

14 edited

* [Livesite.php](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/Livesite.php?rev=3200766 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [core/ajax\_api.php](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/ajax_api.php?rev=3200766 "Show entry in browser")
  (modified)
  ([4 diffs](#file1 "Show differences"))
* [core/embed\_code.php](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/embed_code.php?rev=3200766 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [core/helpers.php](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=3200766 "Show entry in browser")
  (modified)
  ([7 diffs](#file3 "Show differences"))
* [core/sdk.php](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sdk.php?rev=3200766 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [core/settings.php](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=3200766 "Show entry in browser")
  (modified)
  ([9 diffs](#file5 "Show differences"))
* [core/shortcodes.php](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/shortcodes.php?rev=3200766 "Show entry in browser")
  (modified)
  ([3 diffs](#file6 "Show differences"))
* [core/sidebar\_widget.php](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sidebar_widget.php?rev=3200766 "Show entry in browser")
  (modified)
  ([3 diffs](#file7 "Show differences"))
* [js/livesite.js](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/js/livesite.js?rev=3200766 "Show entry in browser")
  (modified)
  ([2 diffs](#file8 "Show differences"))
* [plugin\_init.php](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=3200766 "Show entry in browser")
  (modified)
  ([7 diffs](#file9 "Show differences"))
* [readme.txt](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/readme.txt?rev=3200766 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))
* [system/parse\_vcita\_callback.php](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/parse_vcita_callback.php?rev=3200766 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [system/reset\_plugin.php](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/reset_plugin.php?rev=3200766 "Show entry in browser")
  (modified)
  ([2 diffs](#file12 "Show differences"))
* [system/settings\_page.php](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/settings_page.php?rev=3200766 "Show entry in browser")
  (modified)
  ([1 diff](#file13 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/Livesite.php](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/Livesite.php "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/Livesite.php")

  | [r2933403](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/Livesite.php?rev=2933403#L27 "Show revision 2933403 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/Livesite.php?rev=3200766#L27 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 27 | 27 | \*/ |
  | 28 | 28 | public $old\_plugin\_settings; |
  | 29 |  |  |
  | 30 |  | function \_\_construct() { |
  | 31 |  |  |
  | 32 |  | // Low level get option |
  | 33 |  | $this->old\_plugin\_settings = get\_option( 'livesite\_plugin\_settings', false ); |
  | 34 |  | $run\_plugin = true; |
  | 35 |  |  |
  | 36 |  | // If this is not a fresh install |
  | 37 |  | if ( $this->old\_plugin\_settings ){ |
  | 38 |  |  |
  | 39 |  | // Check if this plugin is not the active one |
  | 40 |  | if ( $this->old\_plugin\_settings['main\_module'] != 'form\_builder' ){ |
  | 41 |  |  |
  | 42 |  | add\_action('admin\_notices', array($this,'other\_plugin\_installed')); |
  | 43 |  | add\_action('admin\_init', array($this,'deactivate\_plugin')); |
  | 44 |  |  |
  | 45 |  | $run\_plugin = false; |
  | 46 |  |  |
  | 47 |  | } |
  | 48 |  |  |
  | 49 |  | } |
  | 50 |  |  |
  | 51 |  | if ( $run\_plugin ){ |
  | 52 |  | $path = plugin\_dir\_path( \_\_FILE\_\_ ); |
  | 53 |  |  |
  | 54 |  | require\_once( $path . 'plugin\_init.php' ); |
  | 55 |  |  |
  | 56 |  | new ls\_plugin\_init(); |
  | 57 |  | } |
  | 58 |  |  |
  | 59 |  |  |
  | 60 |  | } |
  |  | 29 |  |
  |  | 30 | function \_\_construct() { |
  |  | 31 | // Retrieve old plugin settings |
  |  | 32 | $this->old\_plugin\_settings = get\_option('livesite\_plugin\_settings', false); |
  |  | 33 | $run\_plugin = true; // Flag to determine if the plugin should run |
  |  | 34 |  |
  |  | 35 | // Check if this is not a fresh install |
  |  | 36 | if ($this->old\_plugin\_settings) { |
  |  | 37 | // Check if the active module is not the expected one |
  |  | 38 | if ($this->old\_plugin\_settings['main\_module'] != 'form\_builder') { |
  |  | 39 | // Display an admin notice |
  |  | 40 | add\_action('admin\_notices', array($this, 'other\_plugin\_installed')); |
  |  | 41 | // Deactivate the current plugin |
  |  | 42 | add\_action('admin\_init', array($this, 'deactivate\_plugin')); |
  |  | 43 |  |
  |  | 44 | $run\_plugin = false; // Set flag to false to prevent further execution |
  |  | 45 | } |
  |  | 46 | } |
  |  | 47 |  |
  |  | 48 | // Proceed with plugin initialization if the flag is true |
  |  | 49 | if ($run\_plugin) { |
  |  | 50 | $path = plugin\_dir\_path(\_\_FILE\_\_); // Get the plugin directory path |
  |  | 51 |  |
  |  | 52 | // Include the plugin initialization file |
  |  | 53 | require\_once($path . 'plugin\_init.php'); |
  |  | 54 |  |
  |  | 55 | // Initialize the main plugin class |
  |  | 56 | new ls\_plugin\_init(); |
  |  | 57 | } |
  |  | 58 | } |
  | 61 | 59 |  |
  | 62 | 60 | // Shows message that another plugin is installed |
  | 63 |  | function other\_plugin\_installed() { |
  | 64 |  | $settings = $this->old\_plugin\_settings; |
  | 65 |  | $main\_module = $settings['main\_module']; |
  | 66 |  | $module\_title = $settings['modules'][$main\_module]['title']; |
  | 67 |  | ?> |
  | 68 |  | <div id="message" class="error notice is-dismissible"> |
  | 69 |  | <p> |
  | 70 |  | <?php \_e('vCita LiveSite Pack is already installed. Please use <a href="'. get\_admin\_url('', '', 'admin').'plugins.php' .'">'. $module\_title .'</a>','livesite'); ?> |
  | 71 |  | </p> |
  | 72 |  | </div> |
  | 73 |  | <?php |
  | 74 |  | } |
  | 75 |  |  |
  | 76 |  | function deactivate\_plugin() { |
  | 77 |  | deactivate\_plugins( plugin\_basename( \_\_FILE\_\_ ) ); |
  | 78 |  | } |
  |  | 61 | function other\_plugin\_installed() { |
  |  | 62 | $settings = $this->old\_plugin\_settings; |
  |  | 63 |  |
  |  | 64 | if (isset($settings['main\_module'], $settings['modules'][$settings['main\_module']]['title'])) { |
  |  | 65 | $main\_module = $settings['main\_module']; |
  |  | 66 | $module\_title = $settings['modules'][$main\_module]['title']; |
  |  | 67 | } else { |
  |  | 68 | $module\_title = \_\_('Unknown Module', 'livesite'); |
  |  | 69 | } |
  |  | 70 |  |
  |  | 71 | ?> |
  |  | 72 | <div id="message" class="error notice is-dismissible"> |
  |  | 73 | <p> |
  |  | 74 | <?php |
  |  | 75 | echo sprintf(\_\_('vCita LiveSite Pack is already installed. Please use <a href="%s">%s</a>', 'livesite'), |
  |  | 76 | esc\_url(get\_admin\_url('', '', 'admin').'plugins.php'), |
  |  | 77 | esc\_html($module\_title)); |
  |  | 78 | ?> |
  |  | 79 | </p> |
  |  | 80 | </div> |
  |  | 81 | <?php |
  |  | 82 | } |
  |  | 83 |  |
  |  | 84 | function deactivate\_plugin() { |
  |  | 85 | deactivate\_plugins(plugin\_basename(\_\_FILE\_\_)); |
  |  | 86 | } |
  | 79 | 87 |  |
  | 80 | 88 | } |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/ajax\_api.php](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/ajax_api.php "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/ajax_api.php")

  | [r1277176](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/ajax_api.php?rev=1277176#L5 "Show revision 1277176 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/ajax_api.php?rev=3200766#L5 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* @since 0.1.0 |
  | 6 | 6 | \*/ |
  | 7 |  | function ls\_remote\_activate\_module(){ |
  | 8 |  |  |
  | 9 |  | $nonce = $\_POST['nonce']; |
  | 10 |  |  |
  | 11 |  | $return = array( |
  | 12 |  | 'status' => false |
  | 13 |  | ); |
  | 14 |  |  |
  | 15 |  | // check to see if the submitted nonce matches with the |
  | 16 |  | // generated nonce we created earlier |
  | 17 |  | if ( ! wp\_verify\_nonce( $nonce, 'activate-module' ) ) |
  | 18 |  | die ( 'Unauthorized attempt'); |
  | 19 |  |  |
  | 20 |  | // If you need to pass in extra information |
  | 21 |  | $module\_name = $\_POST['module\_name']; |
  | 22 |  |  |
  | 23 |  | if ( isset( $module\_name ) && $module\_name != '' ){ |
  | 24 |  |  |
  | 25 |  | ls\_activate\_module( $module\_name ); |
  | 26 |  |  |
  | 27 |  | $module\_data = ls\_get\_module\_data( $module\_name ); |
  | 28 |  |  |
  | 29 |  | $return['module\_slug'] = $module\_data['slug']; |
  | 30 |  | $return['status'] = true; |
  | 31 |  |  |
  | 32 |  | } |
  | 33 |  |  |
  | 34 |  | header( "Content-Type: application/json" ); |
  | 35 |  | echo json\_encode( $return ); |
  | 36 |  |  |
  | 37 |  | exit(); |
  | 38 |  |  |
  | 39 |  | } |
  |  | 7 | function ls\_remote\_activate\_module() { |
  |  | 8 | // Check if the request is an AJAX request |
  |  | 9 | if ( ! defined('DOING\_AJAX') || ! DOING\_AJAX ) { |
  |  | 10 | wp\_die('Unauthorized request'); |
  |  | 11 | } |
  |  | 12 |  |
  |  | 13 | // Validate nonce for security |
  |  | 14 | $nonce = isset($\_POST['nonce']) ? $\_POST['nonce'] : ''; |
  |  | 15 | if ( ! wp\_verify\_nonce($nonce, 'activate-module') ) { |
  |  | 16 | wp\_die('Unauthorized attempt'); |
  |  | 17 | } |
  |  | 18 |  |
  |  | 19 | // Initialize response array |
  |  | 20 | $return = array('status' => false); |
  |  | 21 |  |
  |  | 22 | // Sanitize module name input |
  |  | 23 | $module\_name = isset($\_POST['module\_name']) ? sanitize\_text\_field($\_POST['module\_name']) : ''; |
  |  | 24 |  |
  |  | 25 | if ( ! empty($module\_name) ) { |
  |  | 26 | // Activate the module |
  |  | 27 | ls\_activate\_module($module\_name); |
  |  | 28 |  |
  |  | 29 | // Get module data |
  |  | 30 | $module\_data = ls\_get\_module\_data($module\_name); |
  |  | 31 |  |
  |  | 32 | // Check if module data is retrieved successfully |
  |  | 33 | if ($module\_data) { |
  |  | 34 | $return['module\_slug'] = $module\_data['slug']; |
  |  | 35 | $return['status'] = true; |
  |  | 36 | } |
  |  | 37 | } |
  |  | 38 |  |
  |  | 39 | // Set the content type for JSON response |
  |  | 40 | header("Content-Type: application/json"); |
  |  | 41 | echo json\_encode($return); |
  |  | 42 |  |
  |  | 43 | // Exit the script |
  |  | 44 | exit(); |
  |  | 45 | } |
  |  | 46 |  |
  | 40 | 47 |  |
  | 41 | 48 | // Defines the connection between the ajax request and the wordpress backend function |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/ajax_api.php?rev=1277176#L51) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/ajax_api.php?rev=3200766#L58) |  |
  | 51 | 58 | \* @since 0.1.0 |
  | 52 | 59 | \*/ |
  | 53 |  | function ls\_remote\_create\_module\_page(){ |
  | 54 |  |  |
  | 55 |  | $nonce = $\_POST['nonce']; |
  | 56 |  |  |
  |  | 60 | function ls\_remote\_create\_module\_page() { |
  |  | 61 | // Check if the request is an AJAX request |
  |  | 62 | if ( ! defined('DOING\_AJAX') || ! DOING\_AJAX ) { |
  |  | 63 | wp\_die('Unauthorized request'); |
  |  | 64 | } |
  |  | 65 |  |
  |  | 66 | // Validate nonce for security |
  |  | 67 | $nonce = isset($\_POST['nonce']) ? $\_POST['nonce'] : ''; |
  |  | 68 | if ( ! wp\_verify\_nonce($nonce, 'module-page') ) { |
  |  | 69 | wp\_die('Unauthorized attempt'); |
  |  | 70 | } |
  |  | 71 |  |
  | 57 | 72 | $page\_id = false; |
  | 58 |  |  |
  | 59 |  | // check to see if the submitted nonce matches with the |
  | 60 |  | // generated nonce we created earlier |
  | 61 |  | if ( ! wp\_verify\_nonce( $nonce, 'module-page' ) ) |
  | 62 |  | die ( 'Unauthorized attempt'); |
  | 63 |  |  |
  | 64 |  | $page\_title = $\_POST['page\_title']; |
  | 65 |  | $page\_content = $\_POST['page\_content']; |
  | 66 |  | $module\_name = $\_POST['module\_name']; |
  | 67 |  |  |
  | 68 |  | if ( isset( $page\_title ) && isset( $page\_content ) && isset( $module\_name ) ) { |
  | 69 |  |  |
  |  | 73 |  |
  |  | 74 | // Sanitize inputs |
  |  | 75 | $page\_title = isset($\_POST['page\_title']) ? sanitize\_text\_field($\_POST['page\_title']) : ''; |
  |  | 76 | $page\_content = isset($\_POST['page\_content']) ? wp\_kses\_post($\_POST['page\_content']) : ''; |
  |  | 77 | $module\_name = isset($\_POST['module\_name']) ? sanitize\_text\_field($\_POST['module\_name']) : ''; |
  |  | 78 |  |
  |  | 79 | // Check if required fields are not empty |
  |  | 80 | if ( ! empty($page\_title) && ! empty($page\_content) && ! empty($module\_name) ) { |
  | 70 | 81 | $helpers = new ls\_helpers(); |
  | 71 |  |  |
  | 72 |  | $page\_id = $helpers->add\_wp\_page( $page\_title, $page\_content ); |
  | 73 |  |  |
  | 74 |  | if ( $page\_id ) |
  | 75 |  | ls\_set\_settings( array( |
  | 76 |  | 'modules' => array( |
  | 77 |  | $module\_name => array( |
  | 78 |  | 'custom\_page\_id' => $page\_id |
  | 79 |  | ) |
  | 80 |  | ) |
  |  | 82 |  |
  |  | 83 | // Add a new WordPress page |
  |  | 84 | $page\_id = $helpers->add\_wp\_page($page\_title, $page\_content); |
  |  | 85 |  |
  |  | 86 | // If page is created, update the module settings |
  |  | 87 | if ( $page\_id ) { |
  |  | 88 | ls\_set\_settings(array( |
  |  | 89 | 'modules' => array( |
  |  | 90 | $module\_name => array( |
  |  | 91 | 'custom\_page\_id' => $page\_id |
  |  | 92 | ) |
  |  | 93 | ) |
  | 81 | 94 | )); |
  | 82 |  |  |
  | 83 |  | } |
  | 84 |  |  |
  | 85 |  | header( "Content-Type: application/json" ); |
  | 86 |  | echo json\_encode( $page\_id ); |
  | 87 |  |  |
  | 88 |  | exit(); |
  | 89 |  |  |
  | 90 |  | } |
  |  | 95 | } |
  |  | 96 | } |
  |  | 97 |  |
  |  | 98 | // Return the page ID as a JSON response |
  |  | 99 | header("Content-Type: application/json"); |
  |  | 100 | echo json\_encode(array('page\_id' => $page\_id)); |
  |  | 101 |  |
  |  | 102 | // Exit the script |
  |  | 103 | exit(); |
  |  | 104 | } |
  |  | 105 |  |
  | 91 | 106 |  |
  | 92 | 107 | // Defines the connection between the ajax request and the wordpress backend function |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/ajax_api.php?rev=1277176#L101) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/ajax_api.php?rev=3200766#L116) |  |
  | 101 | 116 | \* @since 0.1.0 |
  | 102 | 117 | \*/ |
  | 103 |  | function ls\_remote\_remove\_module\_page(){ |
  | 104 |  |  |
  | 105 |  | $nonce = $\_POST['nonce']; |
  | 106 |  |  |
  | 107 |  | $page\_id = false; |
  | 108 |  |  |
  | 109 |  | // check to see if the submitted nonce matches with the |
  | 110 |  | // generated nonce we created earlier |
  | 111 |  | if ( ! wp\_verify\_nonce( $nonce, 'module-page' ) ) |
  | 112 |  | die ( 'Unauthorized attempt'); |
  | 113 |  |  |
  | 114 |  | $page\_id = $\_POST['page\_id']; |
  | 115 |  | $module\_name = $\_POST['module\_name']; |
  | 116 |  |  |
  | 117 |  | if ( isset( $page\_id ) && isset( $module\_name ) ) { |
  | 118 |  |  |
  | 119 |  | if ( $page\_id ) |
  | 120 |  | ls\_set\_settings( array( |
  | 121 |  | 'modules' => array( |
  | 122 |  | $module\_name => array( |
  | 123 |  | 'custom\_page\_id' => false |
  | 124 |  | ) |
  | 125 |  | ) |
  | 126 |  | )); |
  | 127 |  |  |
  | 128 |  | // Delete page permanantely skip the trash |
  | 129 |  | $page\_id = wp\_delete\_post( $page\_id, true ); |
  | 130 |  |  |
  | 131 |  | } |
  | 132 |  |  |
  | 133 |  | header( "Content-Type: application/json" ); |
  | 134 |  | echo json\_encode( $page\_id ); |
  | 135 |  |  |
  | 136 |  | exit(); |
  | 137 |  |  |
  | 138 |  | } |
  |  | 118 | function ls\_remote\_remove\_module\_page() { |
  |  | 119 | // Check if the request is an AJAX request |
  |  | 120 | if ( ! defined('DOING\_AJAX') || ! DOING\_AJAX ) { |
  |  | 121 | wp\_die('Unauthorized request'); |
  |  | 122 | } |
  |  | 123 |  |
  |  | 124 | // Validate nonce for security |
  |  | 125 | $nonce = isset($\_POST['nonce']) ? $\_POST['nonce'] : ''; |
  |  | 126 | if ( ! wp\_verify\_nonce($nonce, 'module-page') ) { |
  |  | 127 | wp\_die('Unauthorized attempt'); |
  |  | 128 | } |
  |  | 129 |  |
  |  | 130 | // Initialize response |
  |  | 131 | $response = array('success' => false, 'page\_id' => false); |
  |  | 132 |  |
  |  | 133 | // Sanitize inputs |
  |  | 134 | $page\_id = isset($\_POST['page\_id']) ? intval($\_POST['page\_id']) : 0; |
  |  | 135 | $module\_name = isset($\_POST['module\_name']) ? sanitize\_text\_field($\_POST['module\_name']) : ''; |
  |  | 136 |  |
  |  | 137 | // Check if required fields are not empty |
  |  | 138 | if ( $page\_id > 0 && ! empty($module\_name) ) { |
  |  | 139 | // Update module settings to remove custom page ID |
  |  | 140 | ls\_set\_settings(array( |
  |  | 141 | 'modules' => array( |
  |  | 142 | $module\_name => array( |
  |  | 143 | 'custom\_page\_id' => false |
  |  | 144 | ) |
  |  | 145 | ) |
  |  | 146 | )); |
  |  | 147 |  |
  |  | 148 | // Delete the page permanently, skipping the trash |
  |  | 149 | $deleted = wp\_delete\_post($page\_id, true); |
  |  | 150 |  |
  |  | 151 | // Check if the deletion was successful |
  |  | 152 | if ( $deleted ) { |
  |  | 153 | $response['success'] = true; |
  |  | 154 | $response['page\_id'] = $page\_id; |
  |  | 155 | } |
  |  | 156 | } |
  |  | 157 |  |
  |  | 158 | // Return the response as a JSON object |
  |  | 159 | header("Content-Type: application/json"); |
  |  | 160 | echo json\_encode($response); |
  |  | 161 |  |
  |  | 162 | // Exit the script |
  |  | 163 | exit(); |
  |  | 164 | } |
  |  | 165 |  |
  | 139 | 166 |  |
  | 140 | 167 | // Defines the connection between the ajax request and the wordpress backend function |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/ajax_api.php?rev=1277176#L149) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/ajax_api.php?rev=3200766#L176) |  |
  | 149 | 176 | \* @since 0.1.0 |
  | 150 | 177 | \*/ |
  | 151 |  | function ls\_update\_livesite\_status(){ |
  | 152 |  |  |
  | 153 |  | $nonce = $\_POST['nonce']; |
  | 154 |  |  |
  | 155 |  | $status = false; |
  | 156 |  |  |
  | 157 |  | // check to see if the submitted nonce matches with the |
  | 158 |  | // generated nonce we created earlier |
  | 159 |  | if ( ! wp\_verify\_nonce( $nonce, 'module-page' ) ) |
  | 160 |  | die ( 'Unauthorized attempt'); |
  | 161 |  |  |
  | 162 |  | // If you need to pass in extra information |
  | 163 |  | $show\_livesite = $\_POST['show\_livesite']; |
  | 164 |  |  |
  | 165 |  | if ( isset( $show\_livesite ) ) |
  | 166 |  | ls\_set\_settings( array( |
  | 167 |  | 'modules' => array( |
  | 168 |  | 'livesite\_widget' => array( |
  | 169 |  | 'show\_livesite' => filter\_var( $show\_livesite, FILTER\_VALIDATE\_BOOLEAN) |
  | 170 |  | ) |
  | 171 |  | ) |
  |  | 178 | function ls\_update\_livesite\_status() { |
  |  | 179 | // Check if the request is an AJAX request |
  |  | 180 | if ( ! defined('DOING\_AJAX') || ! DOING\_AJAX ) { |
  |  | 181 | wp\_die('Unauthorized request'); |
  |  | 182 | } |
  |  | 183 |  |
  |  | 184 | // Validate nonce for security |
  |  | 185 | $nonce = isset($\_POST['nonce']) ? $\_POST['nonce'] : ''; |
  |  | 186 | if ( ! wp\_verify\_nonce($nonce, 'module-page') ) { |
  |  | 187 | wp\_die('Unauthorized attempt'); |
  |  | 188 | } |
  |  | 189 |  |
  |  | 190 | // Initialize response |
  |  | 191 | $response = array('success' => false); |
  |  | 192 |  |
  |  | 193 | // Sanitize and validate input |
  |  | 194 | $show\_livesite = isset($\_POST['show\_livesite']) ? filter\_var($\_POST['show\_livesite'], FILTER\_VALIDATE\_BOOLEAN) : null; |
  |  | 195 |  |
  |  | 196 | // Check if the input is valid |
  |  | 197 | if ( ! is\_null($show\_livesite) ) { |
  |  | 198 | // Update settings |
  |  | 199 | ls\_set\_settings(array( |
  |  | 200 | 'modules' => array( |
  |  | 201 | 'livesite\_widget' => array( |
  |  | 202 | 'show\_livesite' => $show\_livesite |
  |  | 203 | ) |
  |  | 204 | ) |
  | 172 | 205 | )); |
  | 173 |  |  |
  | 174 |  | $status = true; |
  | 175 |  |  |
  | 176 |  | header( "Content-Type: application/json" ); |
  | 177 |  | echo json\_encode( $status ); |
  | 178 |  |  |
  | 179 |  | exit(); |
  | 180 |  |  |
  | 181 |  | } |
  |  | 206 |  |
  |  | 207 | // Update response status |
  |  | 208 | $response['success'] = true; |
  |  | 209 | } |
  |  | 210 |  |
  |  | 211 | // Return the response as a JSON object |
  |  | 212 | header("Content-Type: application/json"); |
  |  | 213 | echo json\_encode($response); |
  |  | 214 |  |
  |  | 215 | // Exit the script |
  |  | 216 | exit(); |
  |  | 217 | } |
  |  | 218 |  |
  | 182 | 219 |  |
  | 183 | 220 | // Defines the connection between the ajax request and the wordpress backend function |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/embed\_code.php](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/embed_code.php "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/embed_code.php")

  | [r1277176](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/embed_code.php?rev=1277176#L26 "Show revision 1277176 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/embed_code.php?rev=3200766#L26 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 | \*/ |
  | 27 | 27 | function parse\_response($response) { |
  | 28 |  | $success = false; |
  | 29 |  | $raw\_data = 'Unknown Error'; |
  | 30 |  |  |
  | 31 |  | if (is\_wp\_error($response)) { |
  | 32 |  | $raw\_data = $response->get\_error\_message(); |
  | 33 |  |  |
  | 34 |  | } elseif (!empty($response['response'])) { |
  | 35 |  | if ($response['response']['code'] != 200) { |
  | 36 |  | $raw\_data = $response['response']['message']; |
  | 37 |  | } else { |
  | 38 |  | $success = true; |
  | 39 |  | $raw\_data = $response['body']; |
  | 40 |  | } |
  | 41 |  | } |
  | 42 |  |  |
  | 43 |  | $return = array( 'success' => $success, 'raw\_data' => $raw\_data ); |
  | 44 |  |  |
  | 45 |  | return $return; |
  |  | 28 | $success = false; |
  |  | 29 | $raw\_data = 'Unknown Error'; |
  |  | 30 |  |
  |  | 31 | if (is\_wp\_error($response)) { |
  |  | 32 | $raw\_data = $response->get\_error\_message(); |
  |  | 33 | } elseif (!empty($response['response'])) { |
  |  | 34 | if ($response['response']['code'] != 200) { |
  |  | 35 | $raw\_data = isset($response['response']['message']) ? $response['response']['message'] : 'Error without message'; |
  |  | 36 | } else { |
  |  | 37 | $success = true; |
  |  | 38 | $raw\_data = isset($response['body']) ? $response['body'] : 'Empty response body'; |
  |  | 39 | } |
  |  | 40 | } |
  |  | 41 |  |
  |  | 42 | $return = array('success' => $success, 'raw\_data' => $raw\_data); |
  |  | 43 |  |
  |  | 44 | return $return; |
  | 46 | 45 | } |
  | 47 | 46 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/embed_code.php?rev=1277176#L55) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/embed_code.php?rev=3200766#L54) |  |
  | 55 | 54 | // create\_embed\_code( 'contact', $helpers->uid, '100%', '450px' ) |
  | 56 | 55 | function create\_embed\_code( $type, $uid, $width, $height ) { |
  |  | 56 | // Only present if UID is available |
  |  | 57 | if ( isset($uid) && !empty($uid) ) { |
  |  | 58 | $transient\_key = 'livesite\_embed\_code\_' . $type . '\_' . $uid . '\_' . $width . '\_' . $height; |
  |  | 59 |  |
  |  | 60 | // Load embed code from the cache if possible |
  |  | 61 | $code = get\_transient( $transient\_key ); |
  |  | 62 | if ( $code ) { |
  |  | 63 | return $code; // Return cached code immediately |
  |  | 64 | } |
  |  | 65 |  |
  |  | 66 | // Fetch the embed code from the API |
  |  | 67 | $response = $this->get\_contents( |
  |  | 68 | "https://www.vcita.com/api/experts/" . urlencode($uid) . "/embed\_code?type=" . $type . "&width=" . urlencode($width) . "&height=" . urlencode($height) |
  |  | 69 | ); |
  |  | 70 |  |
  |  | 71 | $data = json\_decode($response['raw\_data']); |
  |  | 72 | if ($response['success']) { |
  |  | 73 | $code = $data->code; |
  |  | 74 |  |
  |  | 75 | // Set the embed code to be cached for an hour |
  |  | 76 | set\_transient( $transient\_key, $code, HOUR\_IN\_SECONDS); |
  |  | 77 | } else { |
  |  | 78 | $code = '<iframe frameborder="0" src="https://www.vcita.com/' . urlencode($uid) . '/' . $type . '/" width="' . esc\_attr($width) . '" height="' . esc\_attr($height) . '"></iframe>'; |
  |  | 79 | } |
  |  | 80 | } else { |
  |  | 81 | // Handle case where UID is not available |
  |  | 82 | $code = ''; // Return an empty string or any default value |
  |  | 83 | } |
  |  | 84 |  |
  |  | 85 | return $code; // Return the generated or cached embed code |
  |  | 86 | } |
  | 57 | 87 |  |
  | 58 |  | ~~// Only present if UID is available~~ |
  | 59 |  | ~~if ( isset($uid) && !empty($uid) ) {~~ |
  | 60 |  |  |
  | 61 |  | ~~$transient\_key = 'livesite\_embed\_code' . $type . $uid . $width . $height;~~ |
  | 62 |  |  |
  | 63 |  | ~~$code = get\_transient( $transient\_key );~~ |
  | 64 |  |  |
  | 65 |  | ~~// Load embed code from the cache if possible~~ |
  | 66 |  | ~~if ( ! $code ) {~~ |
  | 67 |  |  |
  | 68 |  | ~~$response = $this->get\_contents(~~ |
  | 69 |  | ~~"https://www.vcita.com/api/experts/" . urlencode($uid) . "/embed\_code?type=" . $type . "&width=" . urlencode($width) . "&height=" . urlencode($height)~~ |
  | 70 |  | ~~);~~ |
  | 71 |  |  |
  | 72 |  | ~~$data = json\_decode($response['raw\_data']);~~ |
  | 73 |  |  |
  | 74 |  | ~~if ($response['success']) {~~ |
  | 75 |  |  |
  | 76 |  | ~~$code = $data->code;~~ |
  | 77 |  |  |
  | 78 |  | ~~// Set the embed code to be cached for an hour~~ |
  | 79 |  | ~~set\_transient( $transient\_key, $code, HOUR\_IN\_SECONDS);~~ |
  | 80 |  |  |
  | 81 |  | ~~} else {~~ |
  | 82 |  |  |
  | 83 |  | ~~$code = '<iframe frameborder="0" src="https://www.vcita.com/' . urlencode($uid) . '/' . $type . '/" width="'. $width .'" height="'. $height .'"></iframe>';~~ |
  | 84 |  |  |
  | 85 |  | ~~}~~ |
  | 86 |  | ~~}~~ |
  | 87 |  | ~~}~~ |
  | 88 |  |  |
  | 89 |  | ~~return $code;~~ |
  | 90 |  |  |
  | 91 |  | ~~}~~ |
  | 92 | 88 |  |
  | 93 | 89 | } |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php")

  | [r1335012](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=1335012#L10 "Show revision 1335012 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=3200766#L10 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | \* @since 0.1.0 |
  | 11 | 11 | \*/ |
  | 12 |  | function get\_os( $file = \_\_FILE\_\_ ){ |
  |  | 12 | function get\_os() { |
  |  | 13 | // Check if the OS is Windows or Cygwin |
  | 13 | 14 | return ((strpos(strtolower(PHP\_OS), 'win') === 0) || (strpos(strtolower(PHP\_OS), 'cygwin') !== false)) ? 'win32' : 'unix'; |
  | 14 | 15 | } |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=1335012#L127) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=3200766#L128) |  |
  | 127 | 128 | \* @since 0.1.0 |
  | 128 | 129 | \*/ |
  | 129 |  | function add\_wp\_page( $title, $page\_content, $unsafe\_html = false ){ |
  | 130 |  |  |
  | 131 |  | if ( $title != '' && $page\_content != '' ){ |
  | 132 |  |  |
  |  | 130 | function add\_wp\_page(string $title, string $page\_content, bool $unsafe\_html = false) { |
  |  | 131 | if ($title !== '' && $page\_content !== '') { |
  | 133 | 132 | $user\_ID = get\_current\_user\_id(); |
  | 134 |  |  |
  | 135 |  | // if ( $unsafe\_html ) |
  | 136 |  | //  $content = wp\_strip\_all\_tags( $page\_content ); |
  | 137 |  | // else |
  | 138 |  | $content = $page\_content; |
  | 139 |  |  |
  |  | 133 |  |
  |  | 134 | // Strip tags if unsafe HTML is not allowed |
  |  | 135 | $content = $unsafe\_html ? $page\_content : wp\_strip\_all\_tags($page\_content); |
  |  | 136 |  |
  | 140 | 137 | $new\_post\_settings = array( |
  | 141 |  | 'post\_title' ~~=> wp\_strip\_all\_tags( $title~~ ), |
  |  | 138 | 'post\_title'   => wp\_strip\_all\_tags($title), |
  | 142 | 139 | 'post\_content' => $content, |
  | 143 |  | 'post\_status' => 'publish', |
  | 144 |  | 'post\_date' ~~=> date('Y-m-d H:i:s'),~~ |
  | 145 |  | 'post\_author' => $user\_ID, |
  | 146 |  | 'post\_type' => 'page', |
  | 147 |  | 'post\_category' => array(0) |
  |  | 140 | 'post\_status'  => 'publish', |
  |  | 141 | 'post\_date'    => current\_time('mysql'), // Use WordPress's time function |
  |  | 142 | 'post\_author'  => $user\_ID, |
  |  | 143 | 'post\_type'    => 'page', |
  |  | 144 | 'post\_category' => array(0) // This parameter is deprecated, consider using tags instead |
  | 148 | 145 | ); |
  | 149 |  |  |
  | 150 |  | $post\_id = false; |
  | 151 |  |  |
  | 152 |  | $post\_id = wp\_insert\_post( $new\_post\_settings ); |
  | 153 |  |  |
  |  | 146 |  |
  |  | 147 | $post\_id = wp\_insert\_post($new\_post\_settings); |
  |  | 148 |  |
  |  | 149 | // Check for errors |
  |  | 150 | if (is\_wp\_error($post\_id)) { |
  |  | 151 | // Handle error (you can log it, or return a specific error code/message) |
  |  | 152 | return false; |
  |  | 153 | } |
  |  | 154 |  |
  | 154 | 155 | return $post\_id; |
  | 155 |  |  |
  | 156 |  | } |
  | 157 |  |  |
  | 158 |  | return false; |
  | 159 |  |  |
  |  | 156 | } |
  |  | 157 |  |
  |  | 158 | return false; // Return false if title or content is empty |
  | 160 | 159 | } |
  | 161 | 160 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=1335012#L226) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=3200766#L225) |  |
  | 226 | 225 | \* @since 0.1.0 |
  | 227 | 226 | \*/ |
  | 228 |  | function get\_custom\_page\_url~~( $module\_name = false )~~{ |
  | 229 |  |  |
  |  | 227 | function get\_custom\_page\_url(string $module\_name = '') { |
  |  | 228 | // Initialize custom page URL as false |
  | 230 | 229 | $custom\_page\_url = false; |
  | 231 |  |  |
  | 232 |  | if ( $module\_name ){ |
  | 233 |  |  |
  | 234 |  | $module\_data = ls\_get\_module\_data( $module\_name ); |
  | 235 |  |  |
  | 236 |  | // Get custom page id |
  | 237 |  | $custom\_page\_id = $module\_data['custom\_page\_id']; |
  | 238 |  |  |
  | 239 |  | // Setup edit url if custom page id exists |
  | 240 |  | if ( $custom\_page\_id ) |
  | 241 |  | $custom\_page\_url = get\_admin\_url('', '', 'admin') . 'post.php?action=edit&post=' . $custom\_page\_id; |
  | 242 |  |  |
  | 243 |  | } |
  | 244 |  |  |
  | 245 |  | return $custom\_page\_url; |
  | 246 |  |  |
  |  | 230 |  |
  |  | 231 | // Proceed only if a module name is provided |
  |  | 232 | if ($module\_name) { |
  |  | 233 | // Retrieve module data |
  |  | 234 | $module\_data = ls\_get\_module\_data($module\_name); |
  |  | 235 |  |
  |  | 236 | // Check if module data is valid and contains custom page ID |
  |  | 237 | if (!empty($module\_data) && isset($module\_data['custom\_page\_id'])) { |
  |  | 238 | $custom\_page\_id = $module\_data['custom\_page\_id']; |
  |  | 239 |  |
  |  | 240 | // Set up the edit URL if custom page ID exists |
  |  | 241 | if ($custom\_page\_id) { |
  |  | 242 | $custom\_page\_url = get\_admin\_url(null, 'post.php?action=edit&post=' . $custom\_page\_id); |
  |  | 243 | } |
  |  | 244 | } |
  |  | 245 | } |
  |  | 246 |  |
  |  | 247 | return $custom\_page\_url; // Return the constructed URL or false |
  | 247 | 248 | } |
  | 248 | 249 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=1335012#L255) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=3200766#L256) |  |
  | 255 | 256 | \* @since 0.1.0 |
  | 256 | 257 | \*/ |
  | 257 |  | function get\_plugin\_page\_url ( $page\_name = '' ){ |
  | 258 |  |  |
  | 259 |  | $custom\_page\_url = $page\_name != '' ? get\_admin\_url() . 'admin.php?page=' . $page\_name : false; |
  | 260 |  |  |
  | 261 |  | return $custom\_page\_url; |
  | 262 |  |  |
  |  | 258 | function get\_plugin\_page\_url(string $page\_name = '') { |
  |  | 259 | // Initialize the custom page URL as false |
  |  | 260 | $custom\_page\_url = false; |
  |  | 261 |  |
  |  | 262 | // Proceed only if a valid page name is provided |
  |  | 263 | if (!empty($page\_name)) { |
  |  | 264 | $custom\_page\_url = get\_admin\_url() . 'admin.php?page=' . urlencode($page\_name); |
  |  | 265 | } |
  |  | 266 |  |
  |  | 267 | return $custom\_page\_url; // Return the constructed URL or false |
  | 263 | 268 | } |
  | 264 | 269 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=1335012#L310) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=3200766#L315) |  |
  | 310 | 315 | \* @since 0.1.0 |
  | 311 | 316 | \*/ |
  | 312 |  | function generate\_custom\_page\_once ( $module\_name = false ){ |
  | 313 |  |  |
  | 314 |  | if ( $module\_name ){ |
  | 315 |  |  |
  | 316 |  | $module\_data = ls\_get\_module\_data( $module\_name ); |
  | 317 |  |  |
  | 318 |  | // Get custom page id returns false if does not exist |
  | 319 |  | $custom\_page\_id = $module\_data['custom\_page\_id']; |
  | 320 |  | $custom\_page\_previously\_created = $module\_data['custom\_page\_previously\_created']; |
  | 321 |  |  |
  | 322 |  | // If custom page id does not exist and was not previously created |
  | 323 |  | if ( ! $custom\_page\_id && ! $custom\_page\_previously\_created ){ |
  | 324 |  |  |
  | 325 |  | // Get random content method knows how to handle single string and array |
  | 326 |  | $custom\_page\_content = $this->get\_random\_page\_content( $module\_data['custom\_page\_content'] ); |
  | 327 |  |  |
  | 328 |  | // Add the modules custom page |
  | 329 |  | $page\_id = $this->add\_wp\_page( $module\_data['custom\_page\_title'], $custom\_page\_content ); |
  | 330 |  |  |
  | 331 |  | // Only if page was added define the new page id in the plugins settings |
  | 332 |  | if ( $page\_id ){ |
  | 333 |  |  |
  | 334 |  | ls\_set\_settings( array( |
  | 335 |  | 'modules' => array( |
  | 336 |  | $module\_name => array( |
  | 337 |  | 'custom\_page\_id' => $page\_id, |
  | 338 |  | 'custom\_page\_previously\_created' => true |
  | 339 |  | ) |
  | 340 |  | ) |
  | 341 |  | )); |
  | 342 |  |  |
  | 343 |  | } |
  | 344 |  |  |
  |  | 317 | function generate\_custom\_page\_once($module\_name = false) { |
  |  | 318 | // Proceed only if a valid module name is provided |
  |  | 319 | if (!$module\_name) { |
  |  | 320 | return false; // Early return if no module name is given |
  |  | 321 | } |
  |  | 322 |  |
  |  | 323 | $module\_data = ls\_get\_module\_data($module\_name); |
  |  | 324 |  |
  |  | 325 | // Get custom page ID and check if it was previously created |
  |  | 326 | $custom\_page\_id = $module\_data['custom\_page\_id']; |
  |  | 327 | $custom\_page\_previously\_created = $module\_data['custom\_page\_previously\_created']; |
  |  | 328 |  |
  |  | 329 | // If the custom page does not exist and was not previously created |
  |  | 330 | if (!$custom\_page\_id && !$custom\_page\_previously\_created) { |
  |  | 331 | // Get random content for the custom page |
  |  | 332 | $custom\_page\_content = $this->get\_random\_page\_content($module\_data['custom\_page\_content']); |
  |  | 333 |  |
  |  | 334 | // Add the module's custom page |
  |  | 335 | $page\_id = $this->add\_wp\_page($module\_data['custom\_page\_title'], $custom\_page\_content); |
  |  | 336 |  |
  |  | 337 | // If the page was successfully added, update the plugin's settings |
  |  | 338 | if ($page\_id) { |
  |  | 339 | ls\_set\_settings(array( |
  |  | 340 | 'modules' => array( |
  |  | 341 | $module\_name => array( |
  |  | 342 | 'custom\_page\_id' => $page\_id, |
  |  | 343 | 'custom\_page\_previously\_created' => true |
  |  | 344 | ) |
  |  | 345 | ) |
  |  | 346 | )); |
  | 345 | 347 | } |
  | 346 |  |  |
  | 347 |  | return $custom\_page\_previously\_created; |
  | 348 |  |  |
  | 349 |  | } |
  | 350 |  |  |
  |  | 348 | } |
  |  | 349 |  |
  |  | 350 | return $custom\_page\_previously\_created; // Return the previous creation status |
  | 351 | 351 | } |
  | 352 | 352 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=1335012#L476) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=3200766#L476) |  |
  | 476 | 476 | \* @since 0.1.0 |
  | 477 | 477 | \*/ |
  | 478 |  | function parse\_old\_plugin\_params( $params ){ |
  | 479 |  |  |
  | 480 |  | ls\_set\_settings( array( |
  | 481 |  | 'vcita\_connected' => true, |
  | 482 |  | 'vcita\_params' => array( |
  | 483 |  | 'success'              => 1, |
  | 484 |  | 'uid'                  => $params['uid'], |
  | 485 |  | 'first\_name'           => $params['first\_name'], |
  | 486 |  | 'last\_name'            => $params['last\_name'], |
  | 487 |  | 'title'                => $params['title'], |
  | 488 |  | 'confirmation\_token'   => $params['confirmation\_token'], |
  | 489 |  | 'confirmed'            => $params['confirmed'], |
  | 490 |  | 'engage\_delay'         => 5, |
  | 491 |  | 'implementation\_key'   => $params['implementation\_key'], |
  | 492 |  | 'email'                => $params['email'], |
  | 493 |  | // convert to boolean |
  | 494 |  | 'engage\_active'        => filter\_var( $params['engage\_active'], FILTER\_VALIDATE\_BOOLEAN) |
  | 495 |  | ) |
  | 496 |  | )); |
  | 497 |  |  |
  | 498 |  | delete\_option( $this->get\_old\_plugin\_db\_key() ); |
  | 499 |  |  |
  | 500 |  | } |
  |  | 478 | function parse\_old\_plugin\_params( $params ) { |
  |  | 479 | // Проверяем, что $params является массивом и содержит необходимые ключи |
  |  | 480 | if ( is\_array( $params ) && isset($params['uid'], $params['first\_name'], $params['last\_name'], $params['title'], $params['confirmation\_token'], $params['confirmed'], $params['implementation\_key'], $params['email'], $params['engage\_active']) ) { |
  |  | 481 |  |
  |  | 482 | // Обрабатываем и проверяем параметры перед сохранением |
  |  | 483 | ls\_set\_settings( array( |
  |  | 484 | 'vcita\_connected' => true, |
  |  | 485 | 'vcita\_params' => array( |
  |  | 486 | 'success'              => 1, |
  |  | 487 | 'uid'                  => sanitize\_text\_field($params['uid']), |
  |  | 488 | 'first\_name'           => sanitize\_text\_field($params['first\_name']), |
  |  | 489 | 'last\_name'            => sanitize\_text\_field($params['last\_name']), |
  |  | 490 | 'title'                => sanitize\_text\_field($params['title']), |
  |  | 491 | 'confirmation\_token'   => sanitize\_text\_field($params['confirmation\_token']), |
  |  | 492 | 'confirmed'            => filter\_var($params['confirmed'], FILTER\_VALIDATE\_BOOLEAN), |
  |  | 493 | 'engage\_delay'         => 5, |
  |  | 494 | 'implementation\_key'   => sanitize\_text\_field($params['implementation\_key']), |
  |  | 495 | 'email'                => sanitize\_email($params['email']), |
  |  | 496 | 'engage\_active'        => filter\_var($params['engage\_active'], FILTER\_VALIDATE\_BOOLEAN) |
  |  | 497 | ) |
  |  | 498 | )); |
  |  | 499 |  |
  |  | 500 | // Удаляем старую опцию, если она существует |
  |  | 501 | delete\_option( $this->get\_old\_plugin\_db\_key() ); |
  |  | 502 | } |
  |  | 503 | } |
  | 501 | 504 |  |
  | 502 | 505 | /\*\* |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=1335012#L507) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/helpers.php?rev=3200766#L510) |  |
  | 507 | 510 | \*/ |
  | 508 | 511 | function get\_random\_page\_content( $page\_content\_list ) { |
  | 509 |  |  |
  | 510 |  | // Initially the list is just one string |
  | 511 |  | $random\_sentence = $page\_content\_list; |
  | 512 |  |  |
  | 513 |  | // If the list is an array |
  | 514 |  | if ( is\_array( $page\_content\_list ) ){ |
  | 515 |  |  |
  | 516 |  | // Get a random number up to the length of the custom sentences |
  | 517 |  | $random\_sentence\_number = mt\_rand( 0, count($page\_content\_list) - 1 ); |
  | 518 |  |  |
  | 519 |  | $random\_sentence = $page\_content\_list[ $random\_sentence\_number ]; |
  | 520 |  |  |
  | 521 |  | } |
  | 522 |  |  |
  | 523 |  | return $random\_sentence; |
  | 524 |  |  |
  |  | 512 | if ( is\_array( $page\_content\_list ) ) { |
  |  | 513 | if ( count( $page\_content\_list ) > 0 ) { |
  |  | 514 | $random\_sentence\_number = mt\_rand( 0, count( $page\_content\_list ) - 1 ); |
  |  | 515 | return sanitize\_text\_field( $page\_content\_list[ $random\_sentence\_number ] ); |
  |  | 516 | } |
  |  | 517 | } elseif ( is\_string( $page\_content\_list ) ) { |
  |  | 518 | return sanitize\_text\_field( $page\_content\_list ); |
  |  | 519 | } |
  |  | 520 |  |
  |  | 521 | return ''; |
  | 525 | 522 | } |
  | 526 | 523 |  |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sdk.php](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sdk.php "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sdk.php")

  | [r1277176](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sdk.php?rev=1277176#L26 "Show revision 1277176 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sdk.php?rev=3200766#L26 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 | \* @since 0.1.0 |
  | 27 | 27 | \*/ |
  | 28 |  | function init\_register\_scripts(){ |
  | 29 |  |  |
  |  | 28 | function init\_register\_scripts() { |
  | 30 | 29 | $ls\_helpers = $this->ls\_helpers; |
  | 31 |  |  |
  | 32 | 30 | $path = $ls\_helpers->get\_dir( \_\_FILE\_\_ ); |
  | 33 |  |  |
  |  | 31 |  |
  | 34 | 32 | $vcita\_params = ls\_get\_vcita\_params(); |
  | 35 |  | $livesite\_widget\_module = ls\_get\_module\_data('livesite\_widget'); |
  | 36 |  |  |
  | 37 |  | $ls\_helpers->register\_scripts(array( |
  | 38 |  | 'livesite\_sdk'  => array( |
  | 39 |  | 'path'   => $path . '../js/livesite-include-sdk.js', |
  |  | 33 |  |
  |  | 34 | $uid = isset( $vcita\_params['uid'] ) && is\_string( $vcita\_params['uid'] ) ? sanitize\_text\_field( $vcita\_params['uid'] ) : ''; |
  |  | 35 |  |
  |  | 36 | $livesite\_widget\_module = ls\_get\_module\_data( 'livesite\_widget' ); |
  |  | 37 |  |
  |  | 38 | $show\_livesite = isset( $livesite\_widget\_module['show\_livesite'] ) && is\_bool( $livesite\_widget\_module['show\_livesite'] ) ? $livesite\_widget\_module['show\_livesite'] : false; |
  |  | 39 |  |
  |  | 40 | $ls\_helpers->register\_scripts( array( |
  |  | 41 | 'livesite\_sdk' => array( |
  |  | 42 | 'path' => $path . '../js/livesite-include-sdk.js', |
  | 40 | 43 | 'params' => array( |
  | 41 |  | 'ls\_sdk\_uid' => $~~vcita\_params['uid']~~, |
  | 42 |  | 'ls\_sdk\_show\_livesite' => $~~livesite\_widget\_module['show\_livesite']~~ |
  |  | 44 | 'ls\_sdk\_uid' => $uid, |
  |  | 45 | 'ls\_sdk\_show\_livesite' => $show\_livesite, |
  | 43 | 46 | ) |
  | 44 | 47 | ) |
  | 45 | 48 | )); |
  | 46 |  |  |
  | 47 | 49 | } |
  | 48 | 50 | /\*\* |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php")

  | [r1335012](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=1335012#L6 "Show revision 1335012 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=3200766#L6 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 |  | if ( !function\_exists('array\_replace\_recursive') ) { |
  | 9 |  |  |
  | 10 |  | function array\_recurse\_function($array, $array1) { |
  | 11 |  | foreach ($array1 as $key => $value) { |
  | 12 |  | // create new key in $array, if it is empty or not an array |
  | 13 |  | if (!isset($array[$key]) || (isset($array[$key]) && !is\_array($array[$key]))) |
  | 14 |  | $array[$key] = array(); |
  | 15 |  |  |
  | 16 |  | // overwrite the value in the base array |
  | 17 |  | if (is\_array($value)) |
  | 18 |  | $value = array\_recurse\_function($array[$key], $value); |
  | 19 |  |  |
  | 20 |  | $array[$key] = $value; |
  | 21 |  | } |
  | 22 |  |  |
  | 23 |  | return $array; |
  | 24 |  | } |
  | 25 |  |  |
  | 26 |  | function array\_replace\_recursive($array, $array1) { |
  | 27 |  |  |
  | 28 |  | // handle the arguments, merge one by one |
  | 29 |  | $args = func\_get\_args(); |
  | 30 |  | $array = $args[0]; |
  | 31 |  |  |
  | 32 |  | if (!is\_array($array)) |
  | 33 |  | return $array; |
  | 34 |  |  |
  | 35 |  | for ($i = 1; $i < count($args); $i++){ |
  | 36 |  | if (is\_array($args[$i])) |
  | 37 |  | $array = array\_recurse\_function($array, $args[$i]); |
  | 38 |  | } |
  | 39 |  |  |
  | 40 |  | return $array; |
  | 41 |  | } |
  |  | 8 | if ( ! function\_exists( 'array\_replace\_recursive' ) ) { |
  |  | 9 |  |
  |  | 10 | function array\_recurse\_function( $array, $array1 ) { |
  |  | 11 | foreach ( $array1 as $key => $value ) { |
  |  | 12 | if ( ! is\_string( $key ) && ! is\_int( $key ) ) { |
  |  | 13 | continue; |
  |  | 14 | } |
  |  | 15 |  |
  |  | 16 | if ( ! isset( $array[ $key ] ) || ( isset( $array[ $key ] ) && ! is\_array( $array[ $key ] ) ) ) { |
  |  | 17 | $array[ $key ] = array(); |
  |  | 18 | } |
  |  | 19 |  |
  |  | 20 | if ( is\_array( $value ) ) { |
  |  | 21 | $array[ $key ] = array\_recurse\_function( $array[ $key ], $value ); |
  |  | 22 | } |
  |  | 23 | else { |
  |  | 24 | $array[ $key ] = $value; |
  |  | 25 | } |
  |  | 26 | } |
  |  | 27 |  |
  |  | 28 | return $array; |
  |  | 29 | } |
  |  | 30 |  |
  |  | 31 | function array\_replace\_recursive( $array, $array1 ) { |
  |  | 32 | $args  = func\_get\_args(); |
  |  | 33 | $array = $args[ 0 ]; |
  |  | 34 |  |
  |  | 35 | if ( ! is\_array( $array ) ) { |
  |  | 36 | return $array; |
  |  | 37 | } |
  |  | 38 |  |
  |  | 39 | for ( $i = 1; $i < count( $args ); $i ++ ) { |
  |  | 40 | if ( is\_array( $args[ $i ] ) ) { |
  |  | 41 | $array = array\_recurse\_function( $array, $args[ $i ] ); |
  |  | 42 | } |
  |  | 43 | } |
  |  | 44 |  |
  |  | 45 | return $array; |
  |  | 46 | } |
  | 42 | 47 | } |
  | 43 | 48 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=1335012#L46) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=3200766#L51) |  |
  | 46 | 51 | \* @since 0.1.0 |
  | 47 | 52 | \*/ |
  | 48 |  | function ls\_get\_main\_module(){ |
  | 49 |  |  |
  | 50 |  | $settings = ls\_get\_settings(); |
  | 51 |  |  |
  | 52 |  | ~~return isset( $settings['main\_module'] ) ? $settings['main\_module'~~] : false; |
  | 53 |  |  |
  |  | 53 | function ls\_get\_main\_module() { |
  |  | 54 |  |
  |  | 55 | $settings = ls\_get\_settings(); |
  |  | 56 |  |
  |  | 57 | return isset( $settings[ 'main\_module' ] ) ? $settings[ 'main\_module' ] : false; |
  |  | 58 |  |
  | 54 | 59 | } |
  | 55 | 60 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=1335012#L58) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=3200766#L63) |  |
  | 58 | 63 | \* @since 0.1.0 |
  | 59 | 64 | \*/ |
  | 60 |  | function ls\_get\_modules(){ |
  | 61 |  |  |
  | 62 |  | $settings = ls\_get\_settings(); |
  | 63 |  |  |
  | 64 |  | ~~return $settings['modules'~~]; |
  | 65 |  |  |
  |  | 65 | function ls\_get\_modules() { |
  |  | 66 |  |
  |  | 67 | $settings = ls\_get\_settings(); |
  |  | 68 |  |
  |  | 69 | return $settings[ 'modules' ]; |
  |  | 70 |  |
  | 66 | 71 | } |
  | 67 | 72 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=1335012#L70) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=3200766#L75) |  |
  | 70 | 75 | \* @since 0.1.0 |
  | 71 | 76 | \*/ |
  | 72 |  | function ls\_get\_vcita\_params(){ |
  | 73 |  |  |
  | 74 |  | $settings = ls\_get\_settings(); |
  | 75 |  |  |
  | 76 |  | ~~return isset( $settings['vcita\_params'] ) ? $settings['vcita\_params'~~] : false; |
  | 77 |  |  |
  |  | 77 | function ls\_get\_vcita\_params() { |
  |  | 78 |  |
  |  | 79 | $settings = ls\_get\_settings(); |
  |  | 80 |  |
  |  | 81 | return isset( $settings[ 'vcita\_params' ] ) ? $settings[ 'vcita\_params' ] : false; |
  |  | 82 |  |
  | 78 | 83 | } |
  | 79 | 84 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=1335012#L82) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=3200766#L87) |  |
  | 82 | 87 | \* @since 0.1.0 |
  | 83 | 88 | \*/ |
  | 84 |  | function ls\_get\_module\_data( $module\_name ){ |
  | 85 |  |  |
  | 86 |  | if ( isset( $module\_name ) ){ |
  | 87 |  |  |
  | 88 |  | $modules = ls\_get\_modules(); |
  | 89 |  |  |
  | 90 |  | return $modules[ $module\_name ]; |
  | 91 |  |  |
  | 92 |  | } |
  | 93 |  |  |
  | 94 |  | return false; |
  | 95 |  |  |
  |  | 89 | function ls\_get\_module\_data( $module\_name ) { |
  |  | 90 |  |
  |  | 91 | if ( isset( $module\_name ) ) { |
  |  | 92 |  |
  |  | 93 | $modules = ls\_get\_modules(); |
  |  | 94 |  |
  |  | 95 |  |
  |  | 96 | if ( ! isset( $modules[ $module\_name ] ) ) { |
  |  | 97 | return false; |
  |  | 98 | } |
  |  | 99 |  |
  |  | 100 | return $modules[ $module\_name ]; |
  |  | 101 |  |
  |  | 102 | } |
  |  | 103 |  |
  |  | 104 | return false; |
  |  | 105 |  |
  | 96 | 106 | } |
  | 97 | 107 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=1335012#L101) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=3200766#L111) |  |
  | 101 | 111 | \* @since 0.1.0 |
  | 102 | 112 | \*/ |
  | 103 |  | function ls\_init\_default\_settings(){ |
  | 104 |  |  |
  | 105 |  | ~~ls\_set\_settings(~~array( |
  | 106 |  | // Defines the initial module when plugin starts up |
  | 107 |  | ~~'main\_module'~~ => 'form\_builder', |
  | 108 |  | // This is setup if the plugin has been upgraded |
  | 109 |  | // So we know not to auto install module pages |
  | 110 |  | 'plugin\_upgraded' => false, |
  | 111 |  | // Specifies the paths for each modules code and if it's active or not |
  | 112 |  | ~~'modules'~~ => array( |
  | 113 |  | ~~'form\_builder'~~ => array( |
  | 114 |  | ~~'active'~~ => true, |
  | 115 |  | ~~'path'   => 'modules'. LS\_SLASH .~~'form\_builder.php', |
  | 116 |  | ~~'icon'~~ => 'icon-File-Edit', |
  | 117 |  | ~~'title'~~ => 'Contact Form', |
  | 118 |  | ~~'main\_title'~~ => 'Contact Form', |
  | 119 |  | ~~'text'~~ => 'Create beautiful forms using a simple Drag &amp; Drop editor.', |
  | 120 |  | ~~'slug'~~ => 'ls\_cf', |
  | 121 |  | ~~'custom\_page\_id'~~ => false, |
  | 122 |  | ~~'custom\_page\_title'~~ => 'Contact Us', |
  | 123 |  | ~~'custom\_page\_content'~~ => array( |
  | 124 |  | '<strong>Fill in the form below and we will get in touch as soon as we can.</strong> [livesite-contact title="Contact request"]', |
  | 125 |  | '<strong>We are always interested to hear from anyone who wishes to get in touch with us. Please fill up the contact form below and we\'ll get back to you soon. A confirmation email will be sent to you once the message was sent.</strong> [livesite-contact title="Contact request"]', |
  | 126 |  | '<strong>Feel free to contact our team with your inquiries, by using the contact management software form below:</strong> [livesite-contact title="Contact request"]', |
  | 127 |  | '<strong>Please complete the contact form below to schedule time with our team.</strong> [livesite-contact title="Contact request"]' |
  | 128 |  | ), |
  | 129 |  | 'custom\_page\_previously\_created' => false, |
  | 130 |  | ~~'module\_tray\_text'~~ => array( |
  | 131 |  | ~~'active'~~ => 'Customize your contact form', |
  | 132 |  | 'disabled' => 'Add a contact form to your site' |
  | 133 |  | ) |
  | 134 |  | ), |
  | 135 |  | 'livesite\_widget' => array( |
  | 136 |  | ~~'active'~~ => true, |
  | 137 |  | ~~'path'   => 'modules'. LS\_SLASH .~~'livesite\_widget.php', |
  | 138 |  | ~~'icon'~~ => 'icon-Livesite', |
  | 139 |  | ~~'title'~~ => 'LiveSite Widget', |
  | 140 |  | ~~'main\_title'~~ => 'Livesite Widget', |
  | 141 |  | ~~'text'~~ => 'Encourage clients to take actions and capture twice as many leads', |
  | 142 |  | ~~'slug'~~ => 'ls\_lw', |
  | 143 |  | ~~'custom\_page\_id'~~ => false, |
  | 144 |  | ~~'show\_livesite'~~ => true, |
  | 145 |  | 'module\_tray\_text' => array( |
  | 146 |  | ~~'active'~~ => 'Customize your lead capturing widget', |
  | 147 |  | 'disabled' => '' |
  | 148 |  | ) |
  | 149 |  | ), |
  | 150 |  | ~~'payments'~~ => array( |
  | 151 |  | ~~'active'~~ => false, |
  | 152 |  | ~~'path'   => 'modules'. LS\_SLASH .~~'payments.php', |
  | 153 |  | ~~'icon'~~ => 'icon-Money', |
  | 154 |  | ~~'title'~~ => 'Payments Button', |
  | 155 |  | ~~'main\_title'~~ => 'Online Payments', |
  | 156 |  | ~~'text'~~ => 'Offer your clients a simple way to pay for your services', |
  | 157 |  | ~~'slug'~~ => 'ls\_pm', |
  | 158 |  | ~~'custom\_page\_id'~~ => false, |
  | 159 |  | ~~'custom\_page\_title'~~ => 'Pay Online', |
  | 160 |  | ~~'custom\_page\_content'~~ => array( |
  | 161 |  | '<strong>You are invited to securely pay online using any Credit Card or PayPal. Simply fill in the form below.</strong> [livesite-pay]', |
  | 162 |  | '<p>We accept online payments!</p><p>You may pay securely using any Credit Card or PayPal account.<br>Please use the form below to complete your payment. A confirmation email will be sent to you once the charge has been made.</p> [livesite-pay]', |
  | 163 |  | '<strong>Make a payment using our secure and convenient online payment system.</strong> [livesite-pay]', |
  | 164 |  | '<strong>We invite you to make a secure online payment.<br>To get started, please fill up the form below:</strong> [livesite-pay]', |
  | 165 |  | ), |
  | 166 |  | 'custom\_page\_previously\_created' => false, |
  | 167 |  | ~~'module\_tray\_text'~~ => array( |
  | 168 |  | ~~'active'~~ => 'Customize your payment form', |
  | 169 |  | 'disabled' => 'Add online payment options to your site' |
  | 170 |  | ) |
  | 171 |  | ), |
  | 172 |  | ~~'scheduler'~~ => array( |
  | 173 |  | ~~'active'~~ => false, |
  | 174 |  | ~~'path'   => 'modules'. LS\_SLASH .~~'scheduler.php', |
  | 175 |  | ~~'icon'~~ => 'icon-Calendar', |
  | 176 |  | ~~'title'~~ => 'Scheduler', |
  | 177 |  | ~~'main\_title'~~ => 'Appointment Scheduler', |
  | 178 |  | ~~'text'~~ => 'Self service appointment scheduling for your clients', |
  | 179 |  | ~~'slug'~~ => 'ls\_sc', |
  | 180 |  | ~~'custom\_page\_id'~~ => false, |
  | 181 |  | ~~'custom\_page\_title'~~ => 'Book Appointment', |
  | 182 |  | ~~'custom\_page\_content'~~ => array( |
  | 183 |  | '<strong>We invite you to schedule an appointment online. See our available time below and pick a time that works best for you.</strong> [livesite-schedule title="Contact request"]', |
  | 184 |  | '<strong>Use this calendar to schedule an appointment with us.</strong> [livesite-schedule title="Contact request"]', |
  | 185 |  | '<strong>Please use the below CRM Software to reach out to us.</strong> [livesite-schedule title="Contact request"]', |
  | 186 |  | '<strong>Use our Online Scheduling system to book an appointment, request a service or schedule a meeting.</strong> [livesite-schedule title="Contact request"]', |
  | 187 |  | ), |
  | 188 |  | 'custom\_page\_previously\_created' => false, |
  | 189 |  | ~~'module\_tray\_text'~~ => array( |
  | 190 |  | ~~'active'~~ => 'Customize your scheduling options', |
  | 191 |  | 'disabled' => 'Add online scheduling to your site' |
  | 192 |  | ) |
  | 193 |  | ) |
  | 194 |  | ) |
  | 195 |  | ~~)~~); |
  | 196 |  |  |
  |  | 113 | function ls\_init\_default\_settings() { |
  |  | 114 |  |
  |  | 115 | ls\_set\_settings( array( |
  |  | 116 | // Defines the initial module when plugin starts up |
  |  | 117 | 'main\_module'     => 'form\_builder', |
  |  | 118 | // This is setup if the plugin has been upgraded |
  |  | 119 | // So we know not to auto install module pages |
  |  | 120 | 'plugin\_upgraded' => false, |
  |  | 121 | // Specifies the paths for each modules code and if it's active or not |
  |  | 122 | 'modules'         => array( |
  |  | 123 | 'form\_builder'    => array( |
  |  | 124 | 'active'                         => true, |
  |  | 125 | 'path'                           => 'modules' . LS\_SLASH . 'form\_builder.php', |
  |  | 126 | 'icon'                           => 'icon-File-Edit', |
  |  | 127 | 'title'                          => 'Contact Form', |
  |  | 128 | 'main\_title'                     => 'Contact Form', |
  |  | 129 | 'text'                           => 'Create beautiful forms using a simple Drag &amp; Drop editor.', |
  |  | 130 | 'slug'                           => 'ls\_cf', |
  |  | 131 | 'custom\_page\_id'                 => false, |
  |  | 132 | 'custom\_page\_title'              => 'Contact Us', |
  |  | 133 | 'custom\_page\_content'            => array( |
  |  | 134 | '<strong>Fill in the form below and we will get in touch as soon as we can.</strong> [livesite-contact title="Contact request"]', |
  |  | 135 | '<strong>We are always interested to hear from anyone who wishes to get in touch with us. Please fill up the contact form below and we\'ll get back to you soon. A confirmation email will be sent to you once the message was sent.</strong> [livesite-contact title="Contact request"]', |
  |  | 136 | '<strong>Feel free to contact our team with your inquiries, by using the contact management software form below:</strong> [livesite-contact title="Contact request"]', |
  |  | 137 | '<strong>Please complete the contact form below to schedule time with our team.</strong> [livesite-contact title="Contact request"]' |
  |  | 138 | ), |
  |  | 139 | 'custom\_page\_previously\_created' => false, |
  |  | 140 | 'module\_tray\_text'               => array( |
  |  | 141 | 'active'   => 'Customize your contact form', |
  |  | 142 | 'disabled' => 'Add a contact form to your site' |
  |  | 143 | ) |
  |  | 144 | ), |
  |  | 145 | 'livesite\_widget' => array( |
  |  | 146 | 'active'           => true, |
  |  | 147 | 'path'             => 'modules' . LS\_SLASH . 'livesite\_widget.php', |
  |  | 148 | 'icon'             => 'icon-Livesite', |
  |  | 149 | 'title'            => 'LiveSite Widget', |
  |  | 150 | 'main\_title'       => 'Livesite Widget', |
  |  | 151 | 'text'             => 'Encourage clients to take actions and capture twice as many leads', |
  |  | 152 | 'slug'             => 'ls\_lw', |
  |  | 153 | 'custom\_page\_id'   => false, |
  |  | 154 | 'show\_livesite'    => true, |
  |  | 155 | 'module\_tray\_text' => array( |
  |  | 156 | 'active'   => 'Customize your lead capturing widget', |
  |  | 157 | 'disabled' => '' |
  |  | 158 | ) |
  |  | 159 | ), |
  |  | 160 | 'payments'        => array( |
  |  | 161 | 'active'                         => false, |
  |  | 162 | 'path'                           => 'modules' . LS\_SLASH . 'payments.php', |
  |  | 163 | 'icon'                           => 'icon-Money', |
  |  | 164 | 'title'                          => 'Payments Button', |
  |  | 165 | 'main\_title'                     => 'Online Payments', |
  |  | 166 | 'text'                           => 'Offer your clients a simple way to pay for your services', |
  |  | 167 | 'slug'                           => 'ls\_pm', |
  |  | 168 | 'custom\_page\_id'                 => false, |
  |  | 169 | 'custom\_page\_title'              => 'Pay Online', |
  |  | 170 | 'custom\_page\_content'            => array( |
  |  | 171 | '<strong>You are invited to securely pay online using any Credit Card or PayPal. Simply fill in the form below.</strong> [livesite-pay]', |
  |  | 172 | '<p>We accept online payments!</p><p>You may pay securely using any Credit Card or PayPal account.<br>Please use the form below to complete your payment. A confirmation email will be sent to you once the charge has been made.</p> [livesite-pay]', |
  |  | 173 | '<strong>Make a payment using our secure and convenient online payment system.</strong> [livesite-pay]', |
  |  | 174 | '<strong>We invite you to make a secure online payment.<br>To get started, please fill up the form below:</strong> [livesite-pay]', |
  |  | 175 | ), |
  |  | 176 | 'custom\_page\_previously\_created' => false, |
  |  | 177 | 'module\_tray\_text'               => array( |
  |  | 178 | 'active'   => 'Customize your payment form', |
  |  | 179 | 'disabled' => 'Add online payment options to your site' |
  |  | 180 | ) |
  |  | 181 | ), |
  |  | 182 | 'scheduler'       => array( |
  |  | 183 | 'active'                         => false, |
  |  | 184 | 'path'                           => 'modules' . LS\_SLASH . 'scheduler.php', |
  |  | 185 | 'icon'                           => 'icon-Calendar', |
  |  | 186 | 'title'                          => 'Scheduler', |
  |  | 187 | 'main\_title'                     => 'Appointment Scheduler', |
  |  | 188 | 'text'                           => 'Self service appointment scheduling for your clients', |
  |  | 189 | 'slug'                           => 'ls\_sc', |
  |  | 190 | 'custom\_page\_id'                 => false, |
  |  | 191 | 'custom\_page\_title'              => 'Book Appointment', |
  |  | 192 | 'custom\_page\_content'            => array( |
  |  | 193 | '<strong>We invite you to schedule an appointment online. See our available time below and pick a time that works best for you.</strong> [livesite-schedule title="Contact request"]', |
  |  | 194 | '<strong>Use this calendar to schedule an appointment with us.</strong> [livesite-schedule title="Contact request"]', |
  |  | 195 | '<strong>Please use the below CRM Software to reach out to us.</strong> [livesite-schedule title="Contact request"]', |
  |  | 196 | '<strong>Use our Online Scheduling system to book an appointment, request a service or schedule a meeting.</strong> [livesite-schedule title="Contact request"]', |
  |  | 197 | ), |
  |  | 198 | 'custom\_page\_previously\_created' => false, |
  |  | 199 | 'module\_tray\_text'               => array( |
  |  | 200 | 'active'   => 'Customize your scheduling options', |
  |  | 201 | 'disabled' => 'Add online scheduling to your site' |
  |  | 202 | ) |
  |  | 203 | ) |
  |  | 204 | ) |
  |  | 205 | ) ); |
  |  | 206 |  |
  | 197 | 207 | } |
  | 198 | 208 |  |
  | 199 | 209 | /\*\* |
  | 200 | 210 | \* Change settings values |
  |  | 211 | \* |
  | 201 | 212 | \* @param: $options: Array |
  | 202 |  | \* @since 0.1.0 |
  | 203 |  | \*/ |
  | 204 |  | function ls\_set\_settings( $options = array() ){ |
  | 205 |  |  |
  | 206 |  | $ls\_settings = ls\_get\_settings(); |
  | 207 |  |  |
  | 208 |  | // Combine arrays |
  | 209 |  | $new\_settings = array\_replace\_recursive( $ls\_settings, $options ); |
  | 210 |  |  |
  | 211 |  | update\_option( 'livesite\_plugin\_settings', $new\_settings ); |
  | 212 |  |  |
  | 213 |  | return $new\_settings; |
  |  | 213 | \* |
  |  | 214 | \* @since 0.1.0 |
  |  | 215 | \*/ |
  |  | 216 | function ls\_set\_settings( $options = array() ) { |
  |  | 217 |  |
  |  | 218 | $ls\_settings = ls\_get\_settings(); |
  |  | 219 |  |
  |  | 220 | // Combine arrays |
  |  | 221 | $new\_settings = array\_replace\_recursive( $ls\_settings, $options ); |
  |  | 222 |  |
  |  | 223 | update\_option( 'livesite\_plugin\_settings', $new\_settings ); |
  |  | 224 |  |
  |  | 225 | return $new\_settings; |
  | 214 | 226 | } |
  | 215 | 227 |  |
  | 216 | 228 | // Gets the settings for the plugin |
  | 217 |  | function ls\_get\_settings(){ |
  | 218 |  |  |
  | 219 |  | $default\_option = array(); |
  | 220 |  |  |
  | 221 |  | return get\_option( 'livesite\_plugin\_settings', $default\_option ); |
  | 222 |  |  |
  |  | 229 | function ls\_get\_settings() { |
  |  | 230 |  |
  |  | 231 | $default\_option = array(); |
  |  | 232 |  |
  |  | 233 | return get\_option( 'livesite\_plugin\_settings', $default\_option ); |
  |  | 234 |  |
  | 223 | 235 | } |
  | 224 | 236 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=1335012#L229) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=3200766#L241) |  |
  | 229 | 241 | \* @since 0.1.0 |
  | 230 | 242 | \*/ |
  | 231 |  | function ls\_is\_vcita\_connected(){ |
  | 232 |  |  |
  | 233 |  | $settings = ls\_get\_settings(); |
  | 234 |  |  |
  | 235 |  | ~~return isset( $settings['vcita\_connected'] ) ? $settings['vcita\_connected'~~] : false; |
  | 236 |  |  |
  |  | 243 | function ls\_is\_vcita\_connected() { |
  |  | 244 |  |
  |  | 245 | $settings = ls\_get\_settings(); |
  |  | 246 |  |
  |  | 247 | return isset( $settings[ 'vcita\_connected' ] ) ? $settings[ 'vcita\_connected' ] : false; |
  |  | 248 |  |
  | 237 | 249 | } |
  | 238 | 250 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=1335012#L243) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=3200766#L255) |  |
  | 243 | 255 | \* @since 2.3.0 |
  | 244 | 256 | \*/ |
  | 245 |  | function ls\_is\_plugin\_upgraded(){ |
  | 246 |  |  |
  | 247 |  | $settings = ls\_get\_settings(); |
  | 248 |  |  |
  | 249 |  | ~~return isset( $settings['plugin\_upgraded'] ) ? $settings['plugin\_upgraded'~~] : false; |
  | 250 |  |  |
  |  | 257 | function ls\_is\_plugin\_upgraded() { |
  |  | 258 |  |
  |  | 259 | $settings = ls\_get\_settings(); |
  |  | 260 |  |
  |  | 261 | return isset( $settings[ 'plugin\_upgraded' ] ) ? $settings[ 'plugin\_upgraded' ] : false; |
  |  | 262 |  |
  | 251 | 263 | } |
  | 252 | 264 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=1335012#L254) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/settings.php?rev=3200766#L266) |  |
  | 254 | 266 | \* Settings |
  | 255 | 267 | \* Activates module according to key name |
  |  | 268 | \* |
  | 256 | 269 | \* @param: $module\_name: @String |
  | 257 |  | \* @since 0.1.0 |
  | 258 |  | \*/ |
  | 259 |  | function ls\_activate\_module( $module\_name ){ |
  | 260 |  |  |
  | 261 |  | // Set module as active based on array key name |
  | 262 |  | ls\_set\_settings( array( |
  | 263 |  | 'modules' => array( |
  | 264 |  | $module\_name => array( |
  | 265 |  | 'active' => true |
  | 266 |  | ) |
  | 267 |  | ) |
  | 268 |  | )); |
  | 269 |  |  |
  | 270 |  | } |
  | 271 |  |  |
  | 272 |  | /\*\* |
  | 273 |  | \* Settings |
  | 274 |  | \* Changes a specific modules settings |
  | 275 |  | \* @param: $module\_name{String}, $module\_data{Array} |
  | 276 |  | \* @since 0.1.0 |
  | 277 |  | \*/ |
  | 278 |  | function ls\_set\_module\_data( $module\_name, $module\_data ){ |
  | 279 |  |  |
  | 280 |  | // Set module as active based on array key name |
  | 281 |  | ls\_set\_settings( array( |
  | 282 |  | 'modules' => array( |
  | 283 |  | $module\_name => $module\_data |
  | 284 |  | ) |
  | 285 |  | )); |
  | 286 |  |  |
  | 287 |  | } |
  |  | 270 | \* |
  |  | 271 | \* @since 0.1.0 |
  |  | 272 | \*/ |
  |  | 273 | function ls\_activate\_module( $module\_name ) { |
  |  | 274 |  |
  |  | 275 | // Set module as active based on array key name |
  |  | 276 | ls\_set\_settings( array( |
  |  | 277 | 'modules' => array( |
  |  | 278 | $module\_name => array( |
  |  | 279 | 'active' => true |
  |  | 280 | ) |
  |  | 281 | ) |
  |  | 282 | ) ); |
  |  | 283 |  |
  |  | 284 | } |
  |  | 285 |  |
  |  | 286 | /\*\* |
  |  | 287 | \* Settings |
  |  | 288 | \* Changes a specific modules settings |
  |  | 289 | \* |
  |  | 290 | \* @param: $module\_name{String}, $module\_data{Array} |
  |  | 291 | \* |
  |  | 292 | \* @since 0.1.0 |
  |  | 293 | \*/ |
  |  | 294 | function ls\_set\_module\_data( $module\_name, $module\_data ) { |
  |  | 295 |  |
  |  | 296 | // Set module as active based on array key name |
  |  | 297 | ls\_set\_settings( array( |
  |  | 298 | 'modules' => array( |
  |  | 299 | $module\_name => $module\_data |
  |  | 300 | ) |
  |  | 301 | ) ); |
  |  | 302 |  |
  |  | 303 | } |
  | 288 | 304 |  |
  | 289 | 305 | ?> |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/shortcodes.php](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/shortcodes.php "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/shortcodes.php")

  | [r1277176](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/shortcodes.php?rev=1277176#L49 "Show revision 1277176 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/shortcodes.php?rev=3200766#L49 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 49 | 49 | \*/ |
  | 50 | 50 | function livesite\_pay\_shortcode( $atts ) { |
  | 51 |  |  |
  | 52 | 51 | // Attributes |
  | 53 | 52 | $atts = shortcode\_atts(array( |
  | 54 |  | 'label' => 'PAY NOW', |
  | 55 |  | 'show\_icons' => 'false', |
  | 56 |  | 'payment\_amount' => '', |
  | 57 |  | 'title'=> '', |
  | 58 |  | 'class' => '' |
  |  | 53 | 'label'          => 'PAY NOW', |
  |  | 54 | 'show\_icons'     => 'false', |
  |  | 55 | 'payment\_amount' => '', |
  |  | 56 | 'title'          => '', |
  |  | 57 | 'class'          => '' |
  | 59 | 58 | ), $atts, 'livesite'); |
  | 60 |  |  |
  | 61 |  | $~~payment\_icons = $atts['show\_icons'] ? '<div class="ls-payment-button-icons"></div>' : ''~~; |
  | 62 |  |  |
  | 63 |  | ~~// Add button options~~ |
  |  | 59 |  |
  |  | 60 | $show\_icons = filter\_var($atts['show\_icons'], FILTER\_VALIDATE\_BOOLEAN); |
  |  | 61 | $payment\_icons = $show\_icons ? '<div class="ls-payment-button-icons"></div>' : ''; |
  |  | 62 |  |
  | 64 | 63 | $options = 'data-options="'; |
  | 65 |  |  |
  | 66 |  | // Add custom amount |
  | 67 |  | if ( $atts['payment\_amount'] != '' ) |
  | 68 |  | $options .= 'amount:' . wp\_strip\_all\_tags( $atts['payment\_amount'] ) . ';'; |
  | 69 |  |  |
  | 70 |  | // Add custom title |
  | 71 |  | if ( $atts['title'] != '' ) |
  | 72 |  | $options .= 'title:' . wp\_strip\_all\_tags( $atts['title'] ) . ';'; |
  | 73 |  |  |
  | 74 |  | // Close attribute |
  |  | 64 |  |
  |  | 65 | if ( !empty($atts['payment\_amount']) ) { |
  |  | 66 | $options .= 'amount:' . esc\_attr($atts['payment\_amount']) . ';'; |
  |  | 67 | } |
  |  | 68 |  |
  |  | 69 | if ( !empty($atts['title']) ) { |
  |  | 70 | $options .= 'title:' . esc\_attr($atts['title']) . ';'; |
  |  | 71 | } |
  |  | 72 |  |
  | 75 | 73 | $options .= '"'; |
  | 76 |  |  |
  | 77 |  | // Generate html |
  |  | 74 |  |
  | 78 | 75 | $html = '<div class="ls-payment-button-wrapper"> |
  | 79 |  | ~~<div class="ls-payment-button livesite-pay '. wp\_strip\_all\_tags( $atts['class'] ) .'" '. $options .'>'. wp\_strip\_all\_tags( $atts['label'] ) .~~'</div> |
  | 80 |  | ~~'. $payment\_icons .~~' |
  | 81 |  | </div>'; |
  | 82 |  |  |
  |  | 76 | <div class="ls-payment-button livesite-pay ' . esc\_attr($atts['class']) . '" ' . $options . '>' . esc\_html($atts['label']) . '</div> |
  |  | 77 | ' . $payment\_icons . ' |
  |  | 78 | </div>'; |
  |  | 79 |  |
  | 83 | 80 | return $html; |
  | 84 |  |  |
  | 85 | 81 | } |
  | 86 |  |  |
  |  | 82 |  |
  |  | 83 |  |
  | 87 | 84 | /\*\* |
  | 88 | 85 | \* Add livesite contact form shortcode |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/shortcodes.php?rev=1277176#L90) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/shortcodes.php?rev=3200766#L87) |  |
  | 90 | 87 | \*/ |
  | 91 | 88 | function livesite\_contact\_shortcode( $atts ) { |
  | 92 |  |  |
  | 93 | 89 | $ls\_embed = $this->ls\_embed; |
  | 94 |  |  |
  |  | 90 |  |
  | 95 | 91 | // Attributes |
  | 96 | 92 | $atts = shortcode\_atts(array( |
  | 97 |  | 'title' => 'Contact request', |
  | 98 |  | 'class'=> '', |
  | 99 |  | 'type'=> 'contact', |
  | 100 |  | 'width' => '100%', |
  | 101 |  | 'height' => '450px', |
  |  | 93 | 'title'   => 'Contact request', |
  |  | 94 | 'class'   => '', |
  |  | 95 | 'type'    => 'contact', |
  |  | 96 | 'width'   => '100%', |
  |  | 97 | 'height'  => '450px', |
  | 102 | 98 | ), $atts, 'livesite'); |
  | 103 |  |  |
  | 104 |  | // Set contact form title |
  | 105 |  | $title = 'title=' . wp\_strip\_all\_tags( $atts['title'] ); |
  | 106 |  |  |
  | 107 |  | // Check if user has a custom class |
  | 108 |  | if ( $atts['class'] != '' ) |
  | 109 |  | $class = 'class="'. wp\_strip\_all\_tags( $atts['class'] ) .'"'; |
  | 110 |  | else |
  | 111 |  | $class = ''; |
  | 112 |  |  |
  | 113 |  | // Get UID |
  |  | 99 |  |
  |  | 100 | $title = 'title=' . esc\_attr($atts['title']); |
  |  | 101 |  |
  |  | 102 | $class = !empty($atts['class']) ? 'class="' . esc\_attr($atts['class']) . '"' : ''; |
  |  | 103 |  |
  |  | 104 | // Получаем UID |
  | 114 | 105 | $settings = ls\_get\_settings(); |
  | 115 |  | $uid = $settings['vcita\_params']['uid']; |
  | 116 |  |  |
  | 117 |  | // Generate html |
  | 118 |  | // $html = '<iframe frameborder="0" '. $class .' src="//www.vcita.com/widgets/contact\_form/' . urlencode($uid) . '?ver=2" width="100%" height="470"></iframe>'; |
  | 119 |  | $html = $ls\_embed->create\_embed\_code( $atts['type'], $uid, $atts['width'], $atts['height'] ); |
  | 120 |  |  |
  |  | 106 | $uid = isset($settings['vcita\_params']['uid']) ? $settings['vcita\_params']['uid'] : ''; |
  |  | 107 |  |
  |  | 108 | // Генерируем HTML |
  |  | 109 | $html = $ls\_embed->create\_embed\_code($atts['type'], $uid, esc\_attr($atts['width']), esc\_attr($atts['height'])); |
  |  | 110 |  |
  | 121 | 111 | return $html; |
  | 122 |  |  |
  | 123 | 112 | } |
  | 124 | 113 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/shortcodes.php?rev=1277176#L128) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/shortcodes.php?rev=3200766#L117) |  |
  | 128 | 117 | \*/ |
  | 129 | 118 | function livesite\_scheduler\_shortcode( $atts ) { |
  | 130 |  |  |
  | 131 | 119 | // Attributes |
  | 132 | 120 | $atts = shortcode\_atts(array( |
  | 133 |  | 'title' => 'Contact request', |
  | 134 |  | 'class'=> '' |
  |  | 121 | 'title' => 'Contact request', |
  |  | 122 | 'class' => '' |
  | 135 | 123 | ), $atts, 'livesite'); |
  |  | 124 |  |
  |  | 125 | $title = 'title=' . esc\_attr($atts['title']); |
  |  | 126 |  |
  |  | 127 | $class = !empty($atts['class']) ? 'class="' . esc\_attr($atts['class']) . '"' : ''; |
  |  | 128 |  |
  |  | 129 | // UID |
  |  | 130 | $settings = ls\_get\_settings(); |
  |  | 131 | $uid = isset($settings['vcita\_params']['uid']) ? $settings['vcita\_params']['uid'] : ''; |
  |  | 132 |  |
  |  | 133 | // HTML |
  |  | 134 | $html = '<iframe frameborder="0" ' . $class . ' src="//www.vcita.com/widgets/scheduler/' . esc\_url($uid) . '?ver=2" width="100%" height="470"></iframe>'; |
  |  | 135 |  |
  |  | 136 | return $html; |
  |  | 137 | } |
  | 136 | 138 |  |
  | 137 |  | ~~// Set contact form title~~ |
  | 138 |  | ~~$title = 'title=' . wp\_strip\_all\_tags( $atts['title'] );~~ |
  | 139 |  |  |
  | 140 |  | ~~// Check if user has a custom class~~ |
  | 141 |  | ~~if ( $atts['class'] != '' )~~ |
  | 142 |  | ~~$class = 'class="'. wp\_strip\_all\_tags( $atts['class'] ) .'"';~~ |
  | 143 |  | ~~else~~ |
  | 144 |  | ~~$class = '';~~ |
  | 145 |  |  |
  | 146 |  | ~~// Get UID~~ |
  | 147 |  | ~~$settings = ls\_get\_settings();~~ |
  | 148 |  | ~~$uid = $settings['vcita\_params']['uid'];~~ |
  | 149 |  |  |
  | 150 |  | ~~// Generate html~~ |
  | 151 |  | ~~$html = '<iframe frameborder="0" '. $class .' src="//www.vcita.com/widgets/scheduler/' . urlencode($uid) . '?ver=2" width="100%" height="470"></iframe>';~~ |
  | 152 |  |  |
  | 153 |  | ~~return $html;~~ |
  | 154 |  |  |
  | 155 |  | ~~}~~ |
  | 156 | 139 |  |
  | 157 | 140 | } |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sidebar\_widget.php](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sidebar_widget.php "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sidebar_widget.php")

  | [r1277176](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sidebar_widget.php?rev=1277176#L2 "Show revision 1277176 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sidebar_widget.php?rev=3200766#L2 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | class ls\_sidebar\_widget { |
  | 4 |  |  |
  |  | 4 |  |
  | 5 | 5 | /\*\* |
  | 6 | 6 | \* Sets up helpers as global |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sidebar_widget.php?rev=1277176#L8) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sidebar_widget.php?rev=3200766#L8) |  |
  | 8 | 8 | \*/ |
  | 9 | 9 | public $ls\_helpers; |
  | 10 |  |  |
  |  | 10 |  |
  | 11 | 11 | /\*\* |
  | 12 | 12 | \* Sets up helpers as global |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sidebar_widget.php?rev=1277176#L14) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/core/sidebar_widget.php?rev=3200766#L14) |  |
  | 14 | 14 | \*/ |
  | 15 | 15 | public $ls\_embed; |
  | 16 |  |  |
  | 17 |  | function \_\_construct(){ |
  | 18 |  |  |
  |  | 16 |  |
  |  | 17 | function \_\_construct() { |
  |  | 18 |  |
  | 19 | 19 | $this->ls\_helpers = new ls\_helpers(); |
  | 20 |  | $this->ls\_embed = new livesite\_embed\_code(); |
  | 21 |  |  |
  | 22 |  | ~~add\_action( 'admin\_enqueue\_scripts', array($this,'enqueue\_scripts'~~) ); |
  | 23 |  |  |
  | 24 |  | ~~wp\_register\_sidebar\_widget('vcita\_widget\_id', 'vCita Sidebar Widget', array($this,'vcita\_widget\_content')~~); |
  | 25 |  | ~~wp\_register\_widget\_control('vcita\_widget\_id', 'vCita Sidebar Widget', array($this,'vcita\_widget\_admin')~~); |
  | 26 |  |  |
  |  | 20 | $this->ls\_embed   = new livesite\_embed\_code(); |
  |  | 21 |  |
  |  | 22 | add\_action( 'admin\_enqueue\_scripts', array( $this, 'enqueue\_scripts' ) ); |
  |  | 23 |  |
  |  | 24 | wp\_register\_sidebar\_widget( 'vcita\_widget\_id', 'vCita Sidebar Widget', array( $this, 'vcita\_widget\_content' ) ); |
  |  | 25 | wp\_register\_widget\_control( 'vcita\_widget\_id', 'vCita Sidebar Widget', array( $this, 'vcita\_widget\_admin' ) ); |
  |  | 26 |  |
  | 27 | 27 | } |
  | 28 |  |  |
  | 29 |  | /\*\* |
  |  | 28 |  |
  |  | 29 | /\*\* |
  | 30 | 30 | \* Load Scripts |
  | 31 | 31 | \* @since 0.1.0 |
  | 32 | 32 | \*/ |
  | 33 |  | function enqueue\_scripts( $hook\_suffix ){ |
  | 34 |  |  |
  |  | 33 | function enqueue\_scripts( $hook\_suffix ) { |
  |  | 34 |  |
  | 35 | 35 | $ls\_helpers = $this->ls\_helpers; |
  | 36 |  |  |
  |  | 36 |  |
  | 37 | 37 | $path = plugin\_dir\_url( \_\_FILE\_\_ ); |
  | 38 |  |  |
  | 39 |  | // Remove core from url |
  | 40 |  | $path = str\_replace( '/core', '', $path ); |
  | 41 |  |  |
  | 42 |  | $ls\_helpers->register\_scripts(array( |
  |  | 38 |  |
  |  | 39 | // Remove core from url |
  |  | 40 | $path = str\_replace( '/core', '', $path ); |
  |  | 41 |  |
  |  | 42 | $nonce = wp\_create\_nonce( 'vcita\_callback' ); |
  |  | 43 |  |
  |  | 44 | $ls\_helpers->register\_scripts( array( |
  | 43 | 45 | 'livesite' => array( |
  | 44 |  | 'path'=> $path . "js/livesite.js", |
  | 45 |  | 'deps'~~=> array('jquery'~~), |
  |  | 46 | 'path'   => $path . "js/livesite.js", |
  |  | 47 | 'deps'   => array( 'jquery' ), |
  | 46 | 48 | 'params' => array( |
  | 47 |  | 'ls\_admin\_url'      => get\_admin\_url(), |
  | 48 |  | 'ls\_locale'             => get\_locale(), |
  | 49 |  | 'ls\_site\_url'           => get\_site\_url() |
  |  | 49 | 'ls\_wp\_nonce'  => $nonce, |
  |  | 50 | 'ls\_admin\_url' => get\_admin\_url(), |
  |  | 51 | 'ls\_locale'    => get\_locale(), |
  |  | 52 | 'ls\_site\_url'  => get\_site\_url() |
  | 50 | 53 | ) |
  | 51 | 54 | ) |
  | 52 |  | )); |
  | 53 |  |  |
  |  | 55 | ) ); |
  |  | 56 |  |
  | 54 | 57 | $page\_hook\_id = $this->setings\_page\_id(); |
  | 55 |  |  |
  | 56 |  | if ( $hook\_suffix == $page\_hook\_id ){ |
  |  | 58 |  |
  |  | 59 | if ( $hook\_suffix == $page\_hook\_id ) { |
  | 57 | 60 | wp\_enqueue\_script( 'livesite' ); |
  | 58 | 61 | } |
  | 59 | 62 | } |
  | 60 |  |  |
  | 61 |  | /\*\* |
  |  | 63 |  |
  |  | 64 | /\*\* |
  | 62 | 65 | \* Utility: Page Hook |
  | 63 | 66 | \* The Settings Page Hook, it's the same with global $hook\_suffix. |
  | 64 | 67 | \* @since 0.1.0 |
  | 65 | 68 | \*/ |
  | 66 |  | function setings\_page\_id(){ |
  |  | 69 | function setings\_page\_id() { |
  | 67 | 70 | return 'widgets.php'; |
  | 68 | 71 | } |
  | 69 |  |  |
  | 70 |  | /\*\* |
  | 71 |  | \* Use the current settings and create the vCita widget. - simply call the main vcita\_add\_contact function with the required parameters |
  | 72 |  | \*/ |
  | 73 |  | function vcita\_widget\_content($args) { |
  | 74 |  |  |
  | 75 |  | $ls\_embed = $this->ls\_embed; |
  | 76 |  |  |
  | 77 |  | $settings = ls\_get\_settings(); |
  | 78 |  | $uid = $settings['vcita\_params']['uid']; |
  | 79 |  |  |
  | 80 |  | $atts = array('type' => 'widget', 'height' => '430px', 'width' => '100%'); |
  | 81 |  |  |
  | 82 |  | $html = $ls\_embed->create\_embed\_code( 'widget', $uid, '100%', '430px' ); |
  | 83 |  |  |
  | 84 |  | echo $html; |
  | 85 |  |  |
  | 86 |  | } |
  | 87 |  |  |
  | 88 |  | /\*\* |
  | 89 |  | \* Create the vCita floatting widget Settings form content. |
  | 90 |  | \* |
  | 91 |  | \* This is based on Wordpress guidelines for creating a single widget. |
  | 92 |  | \*/ |
  | 93 |  | function vcita\_widget\_admin() { ?> |
  | 94 |  | <script type="text/javascript"> |
  | 95 |  | jQuery(function ($) { |
  | 96 |  | $('.vcita-email') |
  | 97 |  | .on('keypress', function( e ){ |
  | 98 |  | if (e.keyCode == 13) |
  | 99 |  | $('.js-vcita-reconnect').click(); |
  | 100 |  | }); |
  | 101 |  | }); |
  | 102 |  | </script> |
  | 103 |  | <div id="vcita\_config"> |
  | 104 |  | <?php |
  | 105 |  |  |
  | 106 |  | $is\_vcita\_connected = ls\_is\_vcita\_connected(); |
  | 107 |  |  |
  | 108 |  | if( !$is\_vcita\_connected ) { |
  | 109 |  |  |
  | 110 |  | $admin\_email = get\_option('admin\_email',''); |
  | 111 |  |  |
  | 112 |  | ?> |
  | 113 |  | <h3>Contact requests will be sent to this email:</h3> |
  | 114 |  | <input id="connect-email" type="text" value="<?php echo $admin\_email; ?>"> |
  | 115 |  | <a href="#" class="js-vcita-connect button button-primary">OK</a> |
  | 116 |  | <?php } |
  | 117 |  | else { |
  | 118 |  | $vcita\_params = ls\_get\_vcita\_params(); |
  | 119 |  | ?> |
  | 120 |  | <h3>Contact requests will be sent to this email:</h3> |
  | 121 |  | <label class="checked" for="user-email"></label> |
  | 122 |  | <input class="vcita-email" type="text" disabled="disabled" value="<?php echo $vcita\_params['email']; ?>"/> |
  | 123 |  | <br><br> |
  | 124 |  | <a href="#" class="js-vcita-reconnect button button-primary">Change Email</a> |
  | 125 |  | <br><br> |
  | 126 |  | <a data-open-popup class="button button-primary" href="https://www.vcita.com/widget\_implementations?platform=wordpress&widget=sidebar&key=<?php $vcita\_params['uid'] ?>">Edit</a> |
  | 127 |  | <?php } ?> |
  | 128 |  | </div> |
  | 129 |  | <?php } |
  | 130 |  |  |
  |  | 72 |  |
  |  | 73 | /\*\* |
  |  | 74 | \* Use the current settings and create the vCita widget. - simply call the main vcita\_add\_contact function with the required parameters |
  |  | 75 | \*/ |
  |  | 76 | function vcita\_widget\_content( $args ) { |
  |  | 77 |  |
  |  | 78 | $ls\_embed = $this->ls\_embed; |
  |  | 79 |  |
  |  | 80 | $settings = ls\_get\_settings(); |
  |  | 81 | $uid      = $settings[ 'vcita\_params' ][ 'uid' ]; |
  |  | 82 |  |
  |  | 83 | $atts = array( 'type' => 'widget', 'height' => '430px', 'width' => '100%' ); |
  |  | 84 |  |
  |  | 85 | $html = $ls\_embed->create\_embed\_code( 'widget', $uid, '100%', '430px' ); |
  |  | 86 |  |
  |  | 87 | echo $html; |
  |  | 88 |  |
  |  | 89 | } |
  |  | 90 |  |
  |  | 91 | /\*\* |
  |  | 92 | \* Create the vCita floatting widget Settings form content. |
  |  | 93 | \* |
  |  | 94 | \* This is based on Wordpress guidelines for creating a single widget. |
  |  | 95 | \*/ |
  |  | 96 | function vcita\_widget\_admin() { ?> |
  |  | 97 | <script type="text/javascript"> |
  |  | 98 | jQuery(function ($) { |
  |  | 99 | $('.vcita-email') |
  |  | 100 | .on('keypress', function (e) { |
  |  | 101 | if (e.keyCode == 13) |
  |  | 102 | $('.js-vcita-reconnect').click() |
  |  | 103 | }) |
  |  | 104 | }) |
  |  | 105 | </script> |
  |  | 106 | <div id="vcita\_config"> |
  |  | 107 | <?php |
  |  | 108 |  |
  |  | 109 | $is\_vcita\_connected = ls\_is\_vcita\_connected(); |
  |  | 110 |  |
  |  | 111 | if ( ! $is\_vcita\_connected ) { |
  |  | 112 |  |
  |  | 113 | $admin\_email = get\_option( 'admin\_email', '' ); |
  |  | 114 |  |
  |  | 115 | ?> |
  |  | 116 | <h3>Contact requests will be sent to this email:</h3> |
  |  | 117 | <input id="connect-email" type="text" value="<?php echo $admin\_email; ?>"> |
  |  | 118 | <a href="#" class="js-vcita-connect button button-primary">OK</a> |
  |  | 119 | <?php } |
  |  | 120 | else { |
  |  | 121 | $vcita\_params = ls\_get\_vcita\_params(); |
  |  | 122 | ?> |
  |  | 123 | <h3>Contact requests will be sent to this email:</h3> |
  |  | 124 | <label class="checked" for="user-email"></label> |
  |  | 125 | <input class="vcita-email" type="text" disabled="disabled" |
  |  | 126 | value="<?php echo $vcita\_params[ 'email' ]; ?>"/> |
  |  | 127 | <br><br> |
  |  | 128 | <a href="#" class="js-vcita-reconnect button button-primary">Change Email</a> |
  |  | 129 | <br><br> |
  |  | 130 | <a data-open-popup class="button button-primary" |
  |  | 131 | href="https://www.vcita.com/widget\_implementations?platform=wordpress&widget=sidebar&key=<?php $vcita\_params[ 'uid' ] ?>">Edit</a> |
  |  | 132 | <?php } ?> |
  |  | 133 | </div> |
  |  | 134 | <?php } |
  |  | 135 |  |
  | 131 | 136 | } |
  | 132 | 137 |  |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/js/livesite.js](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/js/livesite.js "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/js/livesite.js")

  | [r1277176](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/js/livesite.js?rev=1277176#L3 "Show revision 1277176 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/js/livesite.js?rev=3200766#L3 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | // Generate url for vcita connect or relogin |
  | 4 | 4 | var get\_vcita\_connect\_url = function ( reconnect ) { |
  | 5 |  |  |
  |  | 5 | // Получаем nonce из глобальной переменной |
  |  | 6 | var nonce = ls\_PHPVAR\_livesite.ls\_module\_nonce; |
  |  | 7 |  |
  | 6 | 8 | var callbackURL = ls\_PHPVAR\_livesite.ls\_admin\_url + 'admin.php?page=live-site-parse-vcita-callback', |
  | 7 |  | vcita\_connect\_url = [ |
  | 8 |  | "//www.vcita.com/integrations/wordpress/new", |
  | 9 |  | "?callback=" + encodeURIComponent(callbackURL), |
  | 10 |  | "&invite=WP", |
  | 11 |  | "&lang=" + ls\_PHPVAR\_livesite.ls\_locale |
  | 12 |  | ]; |
  | 13 |  |  |
  |  | 9 | vcita\_connect\_url = [ |
  |  | 10 | "//www.vcita.com/integrations/wordpress/new", |
  |  | 11 | "?callback=" + encodeURIComponent(callbackURL), |
  |  | 12 | "&\_wpnonce=" + nonce, |
  |  | 13 | "&invite=WP", |
  |  | 14 | "&lang=" + ls\_PHPVAR\_livesite.ls\_locale, |
  |  | 15 | ]; |
  |  | 16 |  |
  | 14 | 17 | // add reconnect option to url if required |
  | 15 | 18 | if ( reconnect === true ){ |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/js/livesite.js?rev=1277176#L19) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/js/livesite.js?rev=3200766#L22) |  |
  | 19 | 22 | vcita\_connect\_url.push( "&email=" + connect\_email ); |
  | 20 | 23 | } |
  | 21 |  |  |
  |  | 24 |  |
  | 22 | 25 | return vcita\_connect\_url.join(''); |
  | 23 |  |  |
  | 24 | 26 | }; |
  | 25 |  |  |
  |  | 27 |  |
  | 26 | 28 | // Go to connect url |
  | 27 | 29 | var vcita\_connect = function ( e ) { |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin\_init.php](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php")

  | [r2040939](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=2040939#L38 "Show revision 2040939 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=3200766#L38 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 38 | 38 | \* @since 0.1.0 |
  | 39 | 39 | \*/ |
  | 40 |  | function ls\_settings\_setup(){ |
  | 41 |  |  |
  |  | 40 | function ls\_settings\_setup() { |
  | 42 | 41 | $ls\_helpers = $this->ls\_helpers; |
  | 43 |  |  |
  | 44 |  | // Setup small link on ~~wordp~~ress plugins page that directs user to settings page |
  | 45 |  | add\_filter(~~'plugin\_action\_links', array($this,'plugin\_action\_links'), 10, 2~~ ); |
  | 46 |  |  |
  |  | 42 |  |
  |  | 43 | // Setup small link on WordPress plugins page that directs user to settings page |
  |  | 44 | add\_filter('plugin\_action\_links', array($this, 'plugin\_action\_links'), 10, 2); |
  |  | 45 |  |
  | 47 | 46 | /\* Add settings menu page \*/ |
  | 48 | 47 | $settings\_page = add\_menu\_page( |
  | 49 |  | 'LiveSite Pack', /\* Page Title \*/ |
  | 50 |  | 'LiveSite',             /\* Menu Title \*/ |
  | 51 |  | 'manage\_options',       /\* Capability \*/ |
  | 52 |  | 'live-site',            /\* Page Slug \*/ |
  | 53 |  | array($this,~~'ls\_settings\_page'),~~ /\* Settings Page Function Callback \*/ |
  | 54 |  | plugin\_dir\_url(~~\_\_FILE\_\_ ) . 'images/vcita-icon.png',~~/\* Menu icon \*/ |
  |  | 48 | 'LiveSite Pack',             /\* Page Title \*/ |
  |  | 49 | 'LiveSite',                  /\* Menu Title \*/ |
  |  | 50 | 'manage\_options',            /\* Capability \*/ |
  |  | 51 | 'live-site',                 /\* Page Slug \*/ |
  |  | 52 | array($this, 'ls\_settings\_page'), /\* Settings Page Function Callback \*/ |
  |  | 53 | plugin\_dir\_url(\_\_FILE\_\_) . 'images/vcita-icon.png', /\* Menu icon \*/ |
  | 55 | 54 | '2.3489' |
  | 56 | 55 | ); |
  | 57 |  |  |
  |  | 56 |  |
  | 58 | 57 | $os = $ls\_helpers->get\_os(); |
  | 59 |  |  |
  | 60 |  | // ~~For popular os (unix)~~ |
  | 61 |  | if (~~$os != 'win32' )~~ |
  | 62 |  | define('LS\_SLASH','/'); |
  | 63 |  | ~~// For win32 os~~ |
  | 64 |  | ~~else~~ |
  | 65 |  | ~~define('LS\_SLASH','\\');~~ |
  | 66 |  |  |
  |  | 58 |  |
  |  | 59 | // Define directory separator based on OS |
  |  | 60 | if ($os !== 'win32') { |
  |  | 61 | define('LS\_SLASH', '/'); |
  |  | 62 | } else { |
  |  | 63 | define('LS\_SLASH', '\\'); |
  |  | 64 | } |
  |  | 65 |  |
  | 67 | 66 | // If settings don't exist in db set them up from defaults |
  | 68 |  | if (~~! ls\_get\_settings() )~~ |
  |  | 67 | if (!ls\_get\_settings()) { |
  | 69 | 68 | ls\_init\_default\_settings(); |
  | 70 |  |  |
  |  | 69 | } |
  |  | 70 |  |
  | 71 | 71 | // Check if vcita is not connected |
  | 72 | 72 | // If old connection details are in place use them |
  | 73 |  | if ( ! ls\_is\_vcita\_connected() ){ |
  | 74 |  |  |
  |  | 73 | if (!ls\_is\_vcita\_connected()) { |
  | 75 | 74 | $old\_plugin\_db\_key = $ls\_helpers->get\_old\_plugin\_db\_key(); |
  | 76 |  |  |
  |  | 75 |  |
  | 77 | 76 | // Get old plugin connection details |
  | 78 |  | $old\_connection\_options = get\_option(~~$old\_plugin\_db\_key~~ ); |
  | 79 |  |  |
  |  | 77 | $old\_connection\_options = get\_option($old\_plugin\_db\_key); |
  |  | 78 |  |
  | 80 | 79 | // Setup connection details |
  | 81 |  | if ( $old\_connection\_options ){ |
  | 82 |  |  |
  | 83 |  | $ls\_helpers->parse\_old\_plugin\_params( $old\_connection\_options ); |
  | 84 |  |  |
  | 85 |  | // Flag plugin as upgraded plugin so we know not to auto install module pages |
  | 86 |  | ls\_set\_settings( array( |
  |  | 80 | if ($old\_connection\_options) { |
  |  | 81 | $ls\_helpers->parse\_old\_plugin\_params($old\_connection\_options); |
  |  | 82 |  |
  |  | 83 | // Flag plugin as upgraded plugin so we know not to auto-install module pages |
  |  | 84 | ls\_set\_settings(array( |
  | 87 | 85 | 'plugin\_upgraded' => true |
  | 88 | 86 | )); |
  | 89 |  |  |
  |  | 87 |  |
  | 90 | 88 | $vcita\_params = ls\_get\_vcita\_params(); |
  | 91 |  |  |
  |  | 89 |  |
  | 92 | 90 | // Set value of active engage widget to the same value as the old plugin |
  | 93 |  | if ( isset( $vcita\_params['engage\_active'] ) ) { |
  | 94 |  |  |
  | 95 |  | ls\_set\_module\_data( 'livesite\_widget', array('show\_livesite' => $vcita\_params['engage\_active']) ); |
  | 96 |  |  |
  |  | 91 | if (isset($vcita\_params['engage\_active'])) { |
  |  | 92 | ls\_set\_module\_data('livesite\_widget', array('show\_livesite' => $vcita\_params['engage\_active'])); |
  | 97 | 93 | } |
  | 98 |  |  |
  | 99 |  | $redirect\_url = $ls\_helpers->get\_plugin\_path(); |
  | 100 |  |  |
  | 101 |  | wp\_redirect( $redirect\_url ); |
  | 102 |  |  |
  |  | 94 |  |
  |  | 95 | $redirect\_url = esc\_url($ls\_helpers->get\_plugin\_path()); // Escape the redirect URL |
  |  | 96 | wp\_redirect($redirect\_url); |
  | 103 | 97 | exit; |
  | 104 |  |  |
  | 105 | 98 | } |
  | 106 | 99 | } |
  | 107 |  |  |
  | 108 |  |  |
  |  | 100 |  |
  | 109 | 101 | // Only show modules and settings if we're connected to vcita |
  | 110 |  | if ( ls\_is\_vcita\_connected() ){ |
  | 111 |  |  |
  |  | 102 | if (ls\_is\_vcita\_connected()) { |
  | 112 | 103 | require\_once('system/settings\_page.php'); |
  | 113 | 104 | require\_once('system/backoffice\_page.php'); |
  | 114 |  |  |
  |  | 105 |  |
  | 115 | 106 | $this->init\_modules(); |
  | 116 |  |  |
  |  | 107 |  |
  | 117 | 108 | $main\_module = ls\_get\_main\_module(); |
  | 118 | 109 | $settings = ls\_get\_settings(); |
  | 119 |  |  |
  | 120 |  | // For a one time redirect after vcita connect |
  | 121 |  | if ( ! $settings['plugin\_initially\_activated'] ){ |
  | 122 |  |  |
  | 123 |  | // Set plugin as already activated, this only allows it to happen once when we connect to vcita |
  |  | 110 |  |
  |  | 111 | // For a one-time redirect after vcita connect |
  |  | 112 | if (!$settings['plugin\_initially\_activated']) { |
  |  | 113 | // Set plugin as already activated |
  | 124 | 114 | ls\_set\_settings(array( |
  | 125 | 115 | 'plugin\_initially\_activated' => true |
  | 126 | 116 | )); |
  | 127 |  |  |
  |  | 117 |  |
  | 128 | 118 | // Get main module data |
  | 129 |  | $module\_data = ls\_get\_module\_data(~~$main\_module~~ ); |
  | 130 |  |  |
  |  | 119 | $module\_data = ls\_get\_module\_data($main\_module); |
  |  | 120 |  |
  | 131 | 121 | // Redirect to main module page |
  | 132 |  | $plugin\_page\_url = $ls\_helpers->get\_plugin\_page\_url( $module\_data['slug'] ); |
  | 133 |  |  |
  | 134 |  | wp\_redirect( $plugin\_page\_url ); |
  |  | 122 | $plugin\_page\_url = esc\_url($ls\_helpers->get\_plugin\_page\_url($module\_data['slug'])); // Escape URL |
  |  | 123 | wp\_redirect($plugin\_page\_url); |
  | 135 | 124 | exit; |
  | 136 |  |  |
  | 137 | 125 | } |
  | 138 |  |  |
  | 139 |  | } |
  | 140 |  |  |
  |  | 126 | } |
  |  | 127 |  |
  | 141 | 128 | /\* Vars \*/ |
  | 142 | 129 | $page\_hook\_id = $this->setings\_page\_id(); |
  | 143 |  |  |
  |  | 130 |  |
  | 144 | 131 | /\* Do stuff in settings page, such as adding scripts, etc. \*/ |
  | 145 |  | if ( !empty( $settings\_page ) ) { |
  | 146 |  |  |
  |  | 132 | if (!empty($settings\_page)) { |
  | 147 | 133 | /\* Load the JavaScript needed for the settings screen. \*/ |
  | 148 |  | add\_action(~~'admin\_enqueue\_scripts', array($this,'enqueue\_scripts')~~ ); |
  | 149 |  | add\_action(~~'admin\_enqueue\_scripts', array($this,'enqueue\_styles')~~ ); |
  | 150 |  |  |
  | 151 |  | } |
  | 152 |  | } |
  |  | 134 | add\_action('admin\_enqueue\_scripts', array($this, 'enqueue\_scripts')); |
  |  | 135 | add\_action('admin\_enqueue\_scripts', array($this, 'enqueue\_styles')); |
  |  | 136 | } |
  |  | 137 | } |
  |  | 138 |  |
  | 153 | 139 |  |
  | 154 | 140 | /\*\* |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=2040939#L157) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=3200766#L143) |  |
  | 157 | 143 | \*/ |
  | 158 | 144 | function plugin\_action\_links( $links, $file ) { |
  | 159 |  |  |
  | 160 | 145 | $ls\_helpers = $this->ls\_helpers; |
  | 161 |  |  |
  | 162 |  | // This function runs for every plugin entry in the plugins page |
  | 163 |  | // So, we have to check that we're only adding the link to our plugin |
  | 164 |  | if ( $file != plugin\_basename( plugin\_dir\_path( \_\_FILE\_\_ ) ) . '/Livesite.php' ) |
  | 165 |  | return $links; |
  | 166 |  |  |
  | 167 |  | $redirect\_url = $ls\_helpers->get\_plugin\_path(); |
  | 168 |  |  |
  | 169 |  | $settings\_link = '<a href="' . $redirect\_url . '">' |
  | 170 |  | . esc\_html( \_\_( 'Settings', 'livesite' ) ) . '</a>'; |
  | 171 |  |  |
  |  | 146 |  |
  |  | 147 | // Check if the current plugin matches our plugin |
  |  | 148 | if ( $file !== plugin\_basename( plugin\_dir\_path( \_\_FILE\_\_ ) ) . '/Livesite.php' ) { |
  |  | 149 | return $links; // Return the original links if not matching |
  |  | 150 | } |
  |  | 151 |  |
  |  | 152 | // Get the redirect URL safely |
  |  | 153 | $redirect\_url = esc\_url( $ls\_helpers->get\_plugin\_path() ); |
  |  | 154 |  |
  |  | 155 | // Create the settings link with escaped text |
  |  | 156 | $settings\_link = '<a href="' . $redirect\_url . '">' . esc\_html\_\_( 'Settings', 'livesite' ) . '</a>'; |
  |  | 157 |  |
  |  | 158 | // Prepend the settings link to the existing links |
  | 172 | 159 | array\_unshift( $links, $settings\_link ); |
  | 173 |  |  |
  | 174 |  | return $links; |
  |  | 160 |  |
  |  | 161 | return $links; // Return the modified links |
  | 175 | 162 | } |
  | 176 | 163 |  |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=2040939#L179) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=3200766#L166) |  |
  | 179 | 166 | \* @since 0.1.0 |
  | 180 | 167 | \*/ |
  | 181 |  | function redirect\_after\_upgrade( $upgrader\_object, $options ){ |
  | 182 |  |  |
  | 183 |  | if (is\_admin()) { |
  | 184 |  | $contactform\_plugin = plugin\_basename( \_\_FILE\_\_ ); |
  | 185 |  |  |
  | 186 |  | if($options['action'] == 'update' && $options['type'] == 'plugin' && isset($options['plugins'])) { |
  | 187 |  | foreach($options['plugins'] as $plugin) { |
  | 188 |  | if($plugin == $contactform\_plugin) { |
  | 189 |  |  |
  | 190 |  | $ls\_helpers = $this->ls\_helpers; |
  | 191 |  |  |
  | 192 |  | $redirect\_url = $ls\_helpers->get\_plugin\_path(); |
  | 193 |  |  |
  | 194 |  | wp\_redirect( $redirect\_url ); |
  | 195 |  |  |
  | 196 |  | } |
  | 197 |  | } |
  | 198 |  | } |
  | 199 |  | } |
  | 200 |  |  |
  | 201 |  | exit; |
  | 202 |  |  |
  | 203 |  | } |
  |  | 168 | function redirect\_after\_upgrade( $upgrader\_object, $options ) { |
  |  | 169 | // Ensure this runs only in admin area |
  |  | 170 | if ( is\_admin() ) { |
  |  | 171 | $contactform\_plugin = plugin\_basename( \_\_FILE\_\_ ); |
  |  | 172 |  |
  |  | 173 | // Check if the action is an update for a plugin |
  |  | 174 | if ( isset($options['action']) && $options['action'] == 'update' |
  |  | 175 | && isset($options['type']) && $options['type'] == 'plugin' |
  |  | 176 | && isset($options['plugins']) && is\_array($options['plugins'])) { |
  |  | 177 |  |
  |  | 178 | foreach ( $options['plugins'] as $plugin ) { |
  |  | 179 | // Validate the plugin basename |
  |  | 180 | if ( $plugin === $contactform\_plugin ) { |
  |  | 181 | $ls\_helpers = $this->ls\_helpers; |
  |  | 182 |  |
  |  | 183 | // Get the redirect URL safely |
  |  | 184 | $redirect\_url = esc\_url($ls\_helpers->get\_plugin\_path()); |
  |  | 185 |  |
  |  | 186 | // Redirect to the plugin path |
  |  | 187 | wp\_redirect( $redirect\_url ); |
  |  | 188 | exit; // Ensure no further code runs after redirect |
  |  | 189 | } |
  |  | 190 | } |
  |  | 191 | } |
  |  | 192 | } |
  |  | 193 | } |
  | 204 | 194 |  |
  | 205 | 195 | /\*\* |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=2040939#L216) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=3200766#L206) |  |
  | 216 | 206 | \* @since 0.1.0 |
  | 217 | 207 | \*/ |
  | 218 |  | function enqueue\_scripts( $hook\_suffix ){ |
  | 219 |  |  |
  |  | 208 | function enqueue\_scripts($hook\_suffix) { |
  | 220 | 209 | $ls\_helpers = $this->ls\_helpers; |
  | 221 |  |  |
  | 222 |  | $path = $ls\_helpers->get\_dir( \_\_FILE\_\_ ); |
  | 223 |  |  |
  |  | 210 |  |
  |  | 211 | // Get the plugin directory path |
  |  | 212 | $path = $ls\_helpers->get\_dir(\_\_FILE\_\_); |
  |  | 213 |  |
  |  | 214 | // Register scripts with proper escaping |
  | 224 | 215 | $ls\_helpers->register\_scripts(array( |
  | 225 | 216 | 'livesite' => array( |
  | 226 |  | 'path'~~=> $path . "js/livesite.js",~~ |
  | 227 |  | 'deps'=> array('jquery'), |
  |  | 217 | 'path' => esc\_url($path . 'js/livesite.js'), // Escape URL for safety |
  |  | 218 | 'deps' => array('jquery'), |
  | 228 | 219 | 'params' => array( |
  | 229 |  | 'ls\_admin\_url' ~~=> get\_admin\_url(),~~ |
  | 230 |  | 'ls\_locale'=> get\_locale(), |
  | 231 |  | 'ls\_module\_nonce' => wp\_create\_nonce( 'activate-module' ), |
  | 232 |  | 'ls\_site\_url'~~=> get\_site\_url()~~ |
  |  | 220 | 'ls\_admin\_url' => esc\_url(get\_admin\_url()), // Escape URL for safety |
  |  | 221 | 'ls\_locale' => get\_locale(), |
  |  | 222 | 'ls\_module\_nonce' => wp\_create\_nonce( 'activate-module' ), // Nonce for security |
  |  | 223 | 'ls\_site\_url' => esc\_url(get\_site\_url()) // Escape URL for safety |
  | 233 | 224 | ) |
  | 234 | 225 | ), |
  | 235 |  | 'custom\_page'=> array( |
  | 236 |  | 'path' => ~~$path . 'js/custom-page.js'~~ |
  |  | 226 | 'custom\_page' => array( |
  |  | 227 | 'path' => esc\_url($path . 'js/custom-page.js') // Escape URL for safety |
  | 237 | 228 | ) |
  | 238 | 229 | )); |
  | 239 |  |  |
  |  | 230 |  |
  |  | 231 | // Get the settings page ID |
  | 240 | 232 | $page\_hook\_id = $this->setings\_page\_id(); |
  | 241 |  |  |
  | 242 |  | if ( $hook\_suffix == $page\_hook\_id ){ |
  | 243 |  | wp\_enqueue\_script( 'common' ); |
  | 244 |  | wp\_enqueue\_script( 'wp-lists' ); |
  | 245 |  | wp\_enqueue\_script( 'livesite' ); |
  | 246 |  | } |
  | 247 |  | } |
  |  | 233 |  |
  |  | 234 | // Enqueue scripts if the current hook suffix matches the settings page ID |
  |  | 235 | if ($hook\_suffix === $page\_hook\_id) { |
  |  | 236 | wp\_enqueue\_script('common'); |
  |  | 237 | wp\_enqueue\_script('wp-lists'); |
  |  | 238 | wp\_enqueue\_script('livesite'); |
  |  | 239 | } |
  |  | 240 | } |
  |  | 241 |  |
  | 248 | 242 |  |
  | 249 | 243 | /\*\* |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=2040939#L251) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=3200766#L245) |  |
  | 251 | 245 | \* @since 0.1.0 |
  | 252 | 246 | \*/ |
  | 253 |  | function enqueue\_styles( $hook\_suffix ){ |
  | 254 |  |  |
  |  | 247 | function enqueue\_styles($hook\_suffix) { |
  | 255 | 248 | $ls\_helpers = $this->ls\_helpers; |
  | 256 |  |  |
  | 257 |  | $path = $ls\_helpers->get\_dir( \_\_FILE\_\_ ); |
  |  | 249 |  |
  |  | 250 | // Get the plugin directory path and version |
  |  | 251 | $path = $ls\_helpers->get\_dir(\_\_FILE\_\_); |
  | 258 | 252 | $version = $ls\_helpers->get\_plugin\_version(); |
  | 259 |  |  |
  | 260 |  | // ~~register acf~~ styles |
  |  | 253 |  |
  |  | 254 | // Register ACF styles |
  | 261 | 255 | $styles = array( |
  | 262 |  | 'livesite'~~=> $path . 'css/livesite.css',~~ |
  | 263 |  | 'livesite\_icon\_font'~~=> $path . 'css/icon-font.css',~~ |
  | 264 |  | 'toggle\_switch'~~=> $path . 'css/toggles-full.css',~~ |
  |  | 256 | 'livesite' => esc\_url($path . 'css/livesite.css'), // Escape URL for safety |
  |  | 257 | 'livesite\_icon\_font' => esc\_url($path . 'css/icon-font.css'), // Escape URL for safety |
  |  | 258 | 'toggle\_switch' => esc\_url($path . 'css/toggles-full.css'), // Escape URL for safety |
  | 265 | 259 | ); |
  | 266 |  |  |
  | 267 |  | foreach( $styles as $k => $v ){ |
  | 268 |  | wp\_register\_style( $k, $v, false, $version ); |
  | 269 |  | } |
  | 270 |  |  |
  |  | 260 |  |
  |  | 261 | // Register each style |
  |  | 262 | foreach ($styles as $k => $v) { |
  |  | 263 | wp\_register\_style($k, $v, array(), $version); // Ensure dependencies are handled (set to array()) |
  |  | 264 | } |
  |  | 265 |  |
  |  | 266 | // Get the settings page ID |
  | 271 | 267 | $page\_hook\_id = $this->setings\_page\_id(); |
  | 272 |  |  |
  | 273 |  | if ( $hook\_suffix == $page\_hook\_id ){ |
  | 274 |  | wp\_enqueue\_style( 'livesite' ); |
  | 275 |  | wp\_enqueue\_style( 'livesite\_icon\_font' ); |
  |  | 268 |  |
  |  | 269 | // Enqueue styles if the current hook suffix matches the settings page ID |
  |  | 270 | if ($hook\_suffix === $page\_hook\_id) { |
  |  | 271 | wp\_enqueue\_style('livesite'); |
  |  | 272 | wp\_enqueue\_style('livesite\_icon\_font'); |
  | 276 | 273 | } |
  | 277 | 274 | } |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=2040939#L285) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=3200766#L282) |  |
  | 285 | 282 |  |
  | 286 | 283 | /\* global vars \*/ |
  | 287 |  | global $hook\_suffix; |
  | 288 |  |  |
  | 289 |  | $ls\_helpers = $this->ls\_helpers; |
  | 290 |  |  |
  | 291 |  | $modules = ls\_get\_modules(); |
  | 292 |  |  |
  | 293 |  | // When plugin is not connected to vcita get admin email to populate email signup field |
  | 294 |  | $admin\_email = get\_option('admin\_email',''); |
  | 295 |  |  |
  | 296 |  | // Check if user has connected his account to vcita |
  | 297 |  | $is\_vcita\_connected = ls\_is\_vcita\_connected(); |
  | 298 |  |  |
  | 299 |  | $plugin\_page\_url = $ls\_helpers->get\_plugin\_page\_url('live-site-backoffice'); |
  | 300 |  |  |
  | 301 |  | $main\_module = ls\_get\_main\_module(); |
  |  | 284 | global $hook\_suffix; // Access the global hook suffix |
  |  | 285 |  |
  |  | 286 | $ls\_helpers = $this->ls\_helpers; // Access helper methods |
  |  | 287 | $modules = ls\_get\_modules(); // Get the list of modules |
  |  | 288 |  |
  |  | 289 | // When plugin is not connected to vcita get admin email to populate email signup field |
  |  | 290 | $admin\_email = sanitize\_email(get\_option('admin\_email', '')); // Sanitize admin email to prevent potential issues |
  |  | 291 |  |
  |  | 292 | // Check if user has connected their account to vCita |
  |  | 293 | $is\_vcita\_connected = ls\_is\_vcita\_connected(); // Presume this function is secure |
  |  | 294 |  |
  |  | 295 | $plugin\_page\_url = esc\_url($ls\_helpers->get\_plugin\_page\_url('live-site-backoffice')); // Escape URL for safety |
  |  | 296 |  |
  |  | 297 | $main\_module = ls\_get\_main\_module(); // Get the main module |
  | 302 | 298 | $main\_title = ''; |
  | 303 | 299 |  |
  | 304 |  | // Partner url |
  | 305 |  | $partner\_url = 'https://www.vcita.com/partners?' . $ls\_helpers->get\_plugin\_identifier(); |
  | 306 |  |  |
  |  | 300 | // Partner URL |
  |  | 301 | $partner\_url = esc\_url('https://www.vcita.com/partners?' . $ls\_helpers->get\_plugin\_identifier()); // Escape URL for safety |
  |  | 302 |  |
  |  | 303 |  |
  | 307 | 304 | if ( $main\_module ){ |
  | 308 |  |  |
  | 309 |  | $module\_data = ls\_get\_module\_data( $main\_module ); |
  | 310 |  |  |
  | 311 |  | $module\_main\_title = $module\_data['main\_title']; |
  | 312 |  | $module\_text = $module\_data['text']; |
  |  | 305 |  |
  |  | 306 | $module\_data = ls\_get\_module\_data($main\_module); // Get module data |
  |  | 307 |  |
  |  | 308 | // Check if module data is set and not empty |
  |  | 309 | if (isset($module\_data['main\_title'], $module\_data['text'])) { |
  |  | 310 | $module\_main\_title = sanitize\_text\_field($module\_data['main\_title']); // Sanitize module title |
  |  | 311 | $module\_text = wp\_kses\_post($module\_data['text']); // Sanitize module text for safe HTML output |
  |  | 312 | } |
  | 313 | 313 |  |
  | 314 | 314 | } |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=2040939#L430) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/plugin_init.php?rev=3200766#L430) |  |
  | 430 | 430 | \* @since 0.1.0 |
  | 431 | 431 | \*/ |
  | 432 |  | function init\_modules(){ |
  | 433 |  |  |
  | 434 |  | $ls\_helpers = $this->ls\_helpers; |
  | 435 |  |  |
  | 436 |  | $modules = ls\_get\_modules(); |
  | 437 |  | $dir = $ls\_helpers->get\_path(); |
  | 438 |  |  |
  | 439 |  | // Run over all modules and start them up |
  | 440 |  | foreach ( $modules as $module\_name => $module ){ |
  | 441 |  |  |
  | 442 |  | if ( $module['active'] ){ |
  | 443 |  |  |
  | 444 |  | $base\_dir = str\_replace( '/core', '', $dir ); |
  | 445 |  | $base\_dir = str\_replace( '\core', '', $base\_dir ); |
  | 446 |  | $base\_dir = str\_replace( '/', LS\_SLASH, $base\_dir ); |
  | 447 |  |  |
  | 448 |  | require\_once( $base\_dir . $module['path'] ); |
  | 449 |  |  |
  |  | 432 | function init\_modules() { |
  |  | 433 | $ls\_helpers = $this->ls\_helpers; // Access the helper methods |
  |  | 434 | $modules = ls\_get\_modules(); // Retrieve the list of modules |
  |  | 435 | $dir = $ls\_helpers->get\_path(); // Get the base directory path |
  |  | 436 |  |
  |  | 437 | // Iterate through all modules and initialize the active ones |
  |  | 438 | foreach ($modules as $module\_name => $module) { |
  |  | 439 | if ($module['active']) { |
  |  | 440 | // Clean up the directory path |
  |  | 441 | $base\_dir = str\_replace('/core', '', $dir); // Remove '/core' from the path |
  |  | 442 | $base\_dir = str\_replace('\\core', '', $base\_dir); // Remove '\core' (Windows compatibility) |
  |  | 443 | $base\_dir = str\_replace('/', LS\_SLASH, $base\_dir); // Normalize the directory separator |
  |  | 444 |  |
  |  | 445 | // Attempt to require the module file, handle potential errors |
  |  | 446 | $module\_path = $base\_dir . $module['path']; |
  |  | 447 | if (file\_exists($module\_path)) { |
  |  | 448 | require\_once($module\_path); // Include the module file |
  |  | 449 | } else { |
  |  | 450 | error\_log("Module file not found: " . $module\_path); // Log an error if the file does not exist |
  |  | 451 | } |
  | 450 | 452 | } |
  | 451 |  |  |
  | 452 | 453 | } |
  | 453 | 454 | } |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/readme.txt](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/readme.txt "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/readme.txt")

  | [r2965933](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/readme.txt?rev=2965933#L5 "Show revision 2965933 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/readme.txt?rev=3200766#L5 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 4.6 |
  | 6 | 6 | Tested up to: 6.3.1 |
  | 7 |  | Stable tag: 4.10.~~3~~ |
  |  | 7 | Stable tag: 4.10.5 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/readme.txt?rev=2965933#L121) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/readme.txt?rev=3200766#L121) |  |
  | 121 | 121 |  |
  | 122 | 122 | == Changelog == |
  |  | 123 |  |
  |  | 124 | = vcita Contact Form Version 4.10.5 = |
  |  | 125 | \* security update |
  | 123 | 126 |  |
  | 124 | 127 | = vcita Contact Form Version 4.10.2 = |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/parse\_vcita\_callback.php](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/parse_vcita_callback.php "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/parse_vcita_callback.php")

  | [r2933403](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/parse_vcita_callback.php?rev=2933403#L53 "Show revision 2933403 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/parse_vcita_callback.php?rev=3200766#L53 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 53 | 53 | \* @since 0.1.0 |
  | 54 | 54 | \*/ |
  | 55 |  | function ls\_parse\_vcita\_callback(){ |
  | 56 |  | if(current\_user\_can('install\_plugins')) { |
  | 57 |  | $success = filter\_var($\_GET['success'], FILTER\_VALIDATE\_BOOLEAN); |
  | 58 |  | $uid = filter\_var($\_GET['uid'], FILTER\_SANITIZE\_SPECIAL\_CHARS, FILTER\_FLAG\_ENCODE\_HIGH); |
  | 59 |  | $first\_name = filter\_var($\_GET['first\_name'], FILTER\_SANITIZE\_SPECIAL\_CHARS, FILTER\_FLAG\_ENCODE\_HIGH); |
  | 60 |  | $last\_name = filter\_var($\_GET['last\_name'], FILTER\_SANITIZE\_SPECIAL\_CHARS, FILTER\_FLAG\_ENCODE\_HIGH); |
  | 61 |  | $title = filter\_var($\_GET['title'], FILTER\_SANITIZE\_SPECIAL\_CHARS, FILTER\_FLAG\_ENCODE\_HIGH); |
  | 62 |  | $confirmation\_token = filter\_var($\_GET['confirmation\_token'], FILTER\_SANITIZE\_SPECIAL\_CHARS, FILTER\_FLAG\_ENCODE\_HIGH); |
  | 63 |  | $confirmed = filter\_var($\_GET['confirmed'], FILTER\_VALIDATE\_BOOLEAN); |
  | 64 |  | $engage\_delay = filter\_var($\_GET['engage\_delay'], FILTER\_SANITIZE\_SPECIAL\_CHARS, FILTER\_FLAG\_ENCODE\_HIGH); |
  | 65 |  | $implementation\_key = filter\_var($\_GET['implementation\_key'], FILTER\_SANITIZE\_SPECIAL\_CHARS, FILTER\_FLAG\_ENCODE\_HIGH); |
  | 66 |  | $email = filter\_var($\_GET['email'], FILTER\_VALIDATE\_EMAIL); |
  | 67 |  |  |
  | 68 |  | ls\_set\_settings( array( |
  | 69 |  | 'vcita\_connected' => true, |
  | 70 |  | 'vcita\_params' => array( |
  | 71 |  | 'success'              => $success, |
  | 72 |  | 'uid'                  => $uid, |
  | 73 |  | 'first\_name'           => $first\_name, |
  | 74 |  | 'last\_name'            => $last\_name, |
  | 75 |  | 'title'                => $title, |
  | 76 |  | 'confirmation\_token'   => $confirmation\_token, |
  | 77 |  | 'confirmed'            => $confirmed, |
  | 78 |  | 'engage\_delay'         => $engage\_delay, |
  | 79 |  | 'implementation\_key'   => $implementation\_key, |
  | 80 |  | 'email'                => $email |
  | 81 |  | ) |
  | 82 |  | )); |
  | 83 |  |  |
  | 84 |  | $ls\_helpers = $this->ls\_helpers; |
  | 85 |  |  |
  | 86 |  | // Replace curly brace tags inside of html code |
  | 87 |  | // $ls\_helpers->ls\_replace\_default\_tags(); |
  | 88 |  |  |
  | 89 |  | $redirect\_url = $ls\_helpers->get\_plugin\_path(); |
  | 90 |  | } |
  | 91 |  | ?> |
  | 92 |  | <script type="text/javascript"> |
  | 93 |  | window.location = "<?php echo $redirect\_url; ?>"; |
  | 94 |  | </script> |
  | 95 |  | <?php } |
  | 96 |  |  |
  |  | 55 | function ls\_parse\_vcita\_callback() { |
  |  | 56 | // Check if the current user has permission to install plugins |
  |  | 57 | if (current\_user\_can('install\_plugins')) { |
  |  | 58 | // Validate and sanitize input parameters |
  |  | 59 |  |
  |  | 60 | if (!isset($\_GET['\_wpnonce']) || !wp\_verify\_nonce($\_GET['\_wpnonce'], 'activate-module')) { |
  |  | 61 | wp\_die(\_\_('Invalid request. Please try again.', 'livesite')); |
  |  | 62 | } |
  |  | 63 |  |
  |  | 64 | $success = filter\_var($\_GET['success'], FILTER\_VALIDATE\_BOOLEAN); |
  |  | 65 | $uid = filter\_var($\_GET['uid'], FILTER\_SANITIZE\_STRING); |
  |  | 66 | $first\_name = filter\_var($\_GET['first\_name'], FILTER\_SANITIZE\_STRING); |
  |  | 67 | $last\_name = filter\_var($\_GET['last\_name'], FILTER\_SANITIZE\_STRING); |
  |  | 68 | $title = filter\_var($\_GET['title'], FILTER\_SANITIZE\_STRING); |
  |  | 69 | $confirmation\_token = filter\_var($\_GET['confirmation\_token'], FILTER\_SANITIZE\_STRING); |
  |  | 70 | $confirmed = filter\_var($\_GET['confirmed'], FILTER\_VALIDATE\_BOOLEAN); |
  |  | 71 | $engage\_delay = filter\_var($\_GET['engage\_delay'], FILTER\_SANITIZE\_STRING); |
  |  | 72 | $implementation\_key = filter\_var($\_GET['implementation\_key'], FILTER\_SANITIZE\_STRING); |
  |  | 73 | $email = filter\_var($\_GET['email'], FILTER\_VALIDATE\_EMAIL); |
  |  | 74 |  |
  |  | 75 | // Check if email is valid |
  |  | 76 | if ($email === false) { |
  |  | 77 | wp\_die(\_\_('Invalid email address.', 'livesite')); |
  |  | 78 | } |
  |  | 79 |  |
  |  | 80 | // Save settings |
  |  | 81 | ls\_set\_settings(array( |
  |  | 82 | 'vcita\_connected' => true, |
  |  | 83 | 'vcita\_params' => array( |
  |  | 84 | 'success'              => $success, |
  |  | 85 | 'uid'                  => $uid, |
  |  | 86 | 'first\_name'           => $first\_name, |
  |  | 87 | 'last\_name'            => $last\_name, |
  |  | 88 | 'title'                => $title, |
  |  | 89 | 'confirmation\_token'   => $confirmation\_token, |
  |  | 90 | 'confirmed'            => $confirmed, |
  |  | 91 | 'engage\_delay'         => $engage\_delay, |
  |  | 92 | 'implementation\_key'   => $implementation\_key, |
  |  | 93 | 'email'                => $email, |
  |  | 94 | ) |
  |  | 95 | )); |
  |  | 96 |  |
  |  | 97 | $ls\_helpers = $this->ls\_helpers; |
  |  | 98 |  |
  |  | 99 | // Optionally replace curly brace tags inside of HTML code |
  |  | 100 | // $ls\_helpers->ls\_replace\_default\_tags(); |
  |  | 101 |  |
  |  | 102 | $redirect\_url = $ls\_helpers->get\_plugin\_path(); |
  |  | 103 | ?> |
  |  | 104 | <script type="text/javascript"> |
  |  | 105 | window.location = "<?php echo esc\_url($redirect\_url); ?>"; |
  |  | 106 | </script> |
  |  | 107 | <?php |
  |  | 108 | } |
  |  | 109 | } |
  |  | 110 |  |
  |  | 111 |  |
  | 97 | 112 | } |
  | 98 | 113 |  |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/reset\_plugin.php](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/reset_plugin.php "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/reset_plugin.php")

  | [r1277176](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/reset_plugin.php?rev=1277176#L38 "Show revision 1277176 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/reset_plugin.php?rev=3200766#L38 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 38 | 38 | \* @since 0.1.0 |
  | 39 | 39 | \*/ |
  | 40 |  | function add\_reset\_plugin\_page(){ |
  | 41 |  | add\_submenu\_page( |
  | 42 |  | null, |
  | 43 |  | \_\_('', 'livesite'), |
  | 44 |  | \_\_('', 'livesite'), |
  | 45 |  | 'edit\_posts', |
  | 46 |  | 'live-site-reset-plugin', |
  | 47 |  | array($this, 'reset\_plugin') |
  | 48 |  | ); |
  | 49 |  | } |
  |  | 40 | function add\_reset\_plugin\_page() { |
  |  | 41 | // Check if the user has the required capability to manage posts |
  |  | 42 | if (current\_user\_can('edit\_posts')) { |
  |  | 43 | add\_submenu\_page( |
  |  | 44 | null, |
  |  | 45 | \_\_('Reset Plugin', 'livesite'), // Page title |
  |  | 46 | \_\_('Reset Plugin', 'livesite'), // Menu title |
  |  | 47 | 'edit\_posts',                    // Capability |
  |  | 48 | 'live-site-reset-plugin',        // Menu slug |
  |  | 49 | array($this, 'reset\_plugin')     // Callback function |
  |  | 50 | ); |
  |  | 51 | } |
  |  | 52 | } |
  | 50 | 53 |  |
  | 51 | 54 | /\*\* |
  | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/reset_plugin.php?rev=1277176#L53) | […](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/reset_plugin.php?rev=3200766#L56) |  |
  | 53 | 56 | \* @since 0.1.0 |
  | 54 | 57 | \*/ |
  | 55 |  | function remove\_custom\_pages(){ |
  | 56 |  |  |
  |  | 58 | function remove\_custom\_pages() { |
  |  | 59 | // Get the modules |
  | 57 | 60 | $modules = ls\_get\_modules(); |
  | 58 |  |  |
  |  | 61 |  |
  | 59 | 62 | // Run over all modules and start them up |
  | 60 |  | foreach ( $modules as $module ){ |
  | 61 |  |  |
  | 62 |  | $page\_id = $module['custom\_page\_id']; |
  | 63 |  |  |
  | 64 |  | // If custom page has been created delete page permanantely and skip the trash |
  | 65 |  | if ( $page\_id ) |
  | 66 |  | wp\_delete\_post( $page\_id, true ); |
  | 67 |  |  |
  |  | 63 | foreach ($modules as $module) { |
  |  | 64 | // Check if the custom page ID exists |
  |  | 65 | if (isset($module['custom\_page\_id']) && !empty($module['custom\_page\_id'])) { |
  |  | 66 | $page\_id = intval($module['custom\_page\_id']); // Ensure the ID is an integer |
  |  | 67 |  |
  |  | 68 | // Check if the post exists before trying to delete |
  |  | 69 | if (get\_post\_status($page\_id) !== false) { |
  |  | 70 | // If the custom page has been created, delete it permanently (skip the trash) |
  |  | 71 | wp\_delete\_post($page\_id, true); |
  |  | 72 | } |
  |  | 73 | } |
  | 68 | 74 | } |
  | 69 |  |  |
  | 70 | 75 | } |
  | 71 | 76 |  |
* ## [contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/settings\_page.php](/changeset/3200766/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/settings_page.php "Show the changeset 3200766 restricted to contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/settings_page.php")

  | [r1277176](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/settings_page.php?rev=1277176#L46 "Show revision 1277176 of this file in browser") | [r3200766](/browser/contact-form-with-a-meeting-scheduler-by-vcita/trunk/system/settings_page.php?rev=3200766#L46 "Show revision 3200766 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | \* @since 0.1.0 |
  | 47 | 47 | \*/ |
  | 48 |  | function add\_settings\_page(){ |
  | 49 |  | add\_submenu\_page( |
  | 50 |  | 'live-site', |
  | 51 |  | \_\_('Settings', 'livesite'), |
  | 52 |  | \_\_('Settings', 'livesite'), |
  | 53 |  | 'edit\_posts', |
  | 54 |  | $this->module\_slug, |
  | 55 |  | array($this, 'settings\_page\_html') |
  | 56 |  | ); |
  | 57 |  |  |
  | 58 |  | add\_action( 'admin\_enqueue\_scripts', array($this,'enqueue\_styles') ); |
  | 59 |  | add\_action( 'admin\_enqueue\_scripts', array($this,'enqueue\_scripts') ); |
  | 60 |  | } |
  |  | 48 | function add\_settings\_page() { |
  |  | 49 | // Check if the user has the required capability to manage posts |
  |  | 50 | if (current\_user\_can('edit\_posts')) { |
  |  | 51 | add\_submenu\_page( |
  |  | 52 | 'live-site',                       // Parent slug |
  |  | 53 | \_\_('Settings', 'livesite'),       // Page title |
  |  | 54 | \_\_('Settings', 'livesite'),       // Menu title |
  |  | 55 | 'edit\_posts',                     // Capability |
  |  | 56 | $this->module\_slug,               // Menu slug |
  |  | 57 | array($this, 'settings\_page\_html') // Callback function |
  |  | 58 | ); |
  |  | 59 |  |
  |  | 60 | // Enqueue styles and scripts only for the settings page |
  |  | 61 | add\_action('admin\_enqueue\_scripts', array($this, 'enqueue\_styles')); |
  |  | 62 | add\_action('admin\_enqueue\_scripts', array($this, 'enqueue\_scripts')); |
  |  | 63 | } |
  |  | 64 | } |
  | 61 | 65 |  |
  | 62 | 66 | /\*\* |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3200766)
* [Zip Archive](?format=zip&new=3200766)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


