=== Content from plugins.trac.wordpress.org_9b6efcf9_20250114_183129.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fproduct-delivery-date-for-woocommerce-lite%2Ftags%2F2.7.5%2Fincludes%2Fadmin%2Fclass-prdd-lite-view-deliveries-table.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=2829950 "Revision 2829950")
* [Next Revision](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3185534 "Revision 3185534") →
* [Blame](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/product-delivery-date-for-woocommerce-lite/tags/2.7.5/includes/admin/class-prdd-lite-view-deliveries-table.php)

---

# [source:](/browser?order=name "Go to repository root") [product-delivery-date-for-woocommerce-lite](/browser/product-delivery-date-for-woocommerce-lite?order=name "View product-delivery-date-for-woocommerce-lite")/[tags](/browser/product-delivery-date-for-woocommerce-lite/tags?order=name "View tags")/[2.7.5](/browser/product-delivery-date-for-woocommerce-lite/tags/2.7.5?order=name "View 2.7.5")/[includes](/browser/product-delivery-date-for-woocommerce-lite/tags/2.7.5/includes?order=name "View includes")/[admin](/browser/product-delivery-date-for-woocommerce-lite/tags/2.7.5/includes/admin?order=name "View admin")/[class-prdd-lite-view-deliveries-table.php](/browser/product-delivery-date-for-woocommerce-lite/tags/2.7.5/includes/admin/class-prdd-lite-view-deliveries-table.php?order=name "View class-prdd-lite-view-deliveries-table.php")

View diff against:

View revision:

| [Last change](/changeset/3014250/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php "View differences") on this file was [3014250](/changeset/3014250/ "View changeset 3014250"), checked in by tychesoftwares, [13 months ago](/timeline?from=2023-12-26T08%3A19%3A30Z&precision=second "See timeline at 12/26/2023 08:19:30 AM") |
| --- |
| Update to version --2.7.1 from GitHub |
| **File size:** 24.1 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Product Delivery Date Pro for WooCommerce |
| [4](#L4) | \* |
| [5](#L5) | \* This file is used for displaying all delivery Date & Time with customer name, product name & Amount under View Deliveries menu. |
| [6](#L6) | \* |
| [7](#L7) | \* @author  Tyche Softwares |
| [8](#L8) | \* @package Product-Delivery-Date-Lite/View-Deliveries |
| [9](#L9) | \* @since   2.0 |
| [10](#L10) | \*/ |
| [11](#L11) |  |
| [12](#L12) | // Load WP\_List\_Table if not loaded. |
| [13](#L13) | if ( ! class\_exists( 'WP\_List\_Table' ) ) { |
| [14](#L14) | require\_once ABSPATH . 'wp-admin/includes/class-wp-list-table.php'; |
| [15](#L15) | } |
| [16](#L16) | /\*\* |
| [17](#L17) | \* Class for displaying the delivery date and time. |
| [18](#L18) | \* |
| [19](#L19) | \* @since 2.0 |
| [20](#L20) | \*/ |
| [21](#L21) | class PRDD\_Lite\_View\_Deliveries\_Table extends WP\_List\_Table { |
| [22](#L22) | /\*\* |
| [23](#L23) | \* Number of results to show per page |
| [24](#L24) | \* |
| [25](#L25) | \* @var string |
| [26](#L26) | \* @since 2.0 |
| [27](#L27) | \*/ |
| [28](#L28) | public $per\_page = 30; |
| [29](#L29) |  |
| [30](#L30) | /\*\* |
| [31](#L31) | \* URL of this page |
| [32](#L32) | \* |
| [33](#L33) | \* @var string |
| [34](#L34) | \* @since 2.0 |
| [35](#L35) | \*/ |
| [36](#L36) | public $base\_url; |
| [37](#L37) |  |
| [38](#L38) | /\*\* |
| [39](#L39) | \* Total number of deliveries |
| [40](#L40) | \* |
| [41](#L41) | \* @var int |
| [42](#L42) | \* @since 2.0 |
| [43](#L43) | \*/ |
| [44](#L44) | public $total\_count; |
| [45](#L45) |  |
| [46](#L46) | /\*\* |
| [47](#L47) | \* Total number of deliveries from today onwards |
| [48](#L48) | \* |
| [49](#L49) | \* @var int |
| [50](#L50) | \* @since 2.0 |
| [51](#L51) | \*/ |
| [52](#L52) | public $future\_count; |
| [53](#L53) |  |
| [54](#L54) | /\*\* |
| [55](#L55) | \* Total number of deliveries today |
| [56](#L56) | \* |
| [57](#L57) | \* @var int |
| [58](#L58) | \* @since 2.0 |
| [59](#L59) | \*/ |
| [60](#L60) | public $today\_delivery\_count; |
| [61](#L61) |  |
| [62](#L62) | /\*\* |
| [63](#L63) | \* Total number of deliveries for tomorrow |
| [64](#L64) | \* |
| [65](#L65) | \* @var int |
| [66](#L66) | \* @since 2.0 |
| [67](#L67) | \*/ |
| [68](#L68) | public $tomorrow\_delivery\_count; |
| [69](#L69) |  |
| [70](#L70) | /\*\* |
| [71](#L71) | \* Get things started |
| [72](#L72) | \* |
| [73](#L73) | \* @since 2.0 |
| [74](#L74) | \*/ |
| [75](#L75) | public function \_\_construct() { |
| [76](#L76) | global $status, $page; |
| [77](#L77) | // Set parent defaults. |
| [78](#L78) | parent::\_\_construct( |
| [79](#L79) | array( |
| [80](#L80) | 'ajax' => false,                        // Does this table support ajax? |
| [81](#L81) | ) |
| [82](#L82) | ); |
| [83](#L83) | $this->get\_delivery\_counts(); |
| [84](#L84) | $this->base\_url = admin\_url( 'admin.php?page=woocommerce\_prdd\_lite\_history\_page' ); |
| [85](#L85) | } |
| [86](#L86) | /\*\* |
| [87](#L87) | \* Prepare data to be displayed on View Delivery List Page |
| [88](#L88) | \* |
| [89](#L89) | \* @since 2.0 |
| [90](#L90) | \*/ |
| [91](#L91) | public function prdd\_lite\_prepare\_items() { |
| [92](#L92) | $columns               = $this->get\_columns(); |
| [93](#L93) | $hidden                = array(); // No hidden columns. |
| [94](#L94) | $sortable              = $this->get\_sortable\_columns(); |
| [95](#L95) | $data                  = $this->deliveries\_data(); |
| [96](#L96) | $status                = isset( $\_GET['status'] ) ? sanitize\_text\_field( wp\_unslash( $\_GET['status'] ) ) : 'any'; // phpcs:ignore WordPress.Security.NonceVerification |
| [97](#L97) | $this->\_column\_headers = array( $columns, $hidden, $sortable ); |
| [98](#L98) | switch ( $status ) { |
| [99](#L99) | case 'future': |
| [100](#L100) | $total\_items = $this->future\_count; |
| [101](#L101) | break; |
| [102](#L102) | case 'today\_delivery': |
| [103](#L103) | $total\_items = $this->today\_delivery\_count; |
| [104](#L104) | break; |
| [105](#L105) | case 'tomorrow\_delivery': |
| [106](#L106) | $total\_items = $this->tomorrow\_delivery\_count; |
| [107](#L107) | break; |
| [108](#L108) | case 'any': |
| [109](#L109) | $total\_items = $this->total\_count; |
| [110](#L110) | break; |
| [111](#L111) | default: |
| [112](#L112) | $total\_items = $this->total\_count; |
| [113](#L113) | } |
| [114](#L114) | $this->items = $data; |
| [115](#L115) | $this->set\_pagination\_args( |
| [116](#L116) | array( |
| [117](#L117) | 'total\_items' => $total\_items,                      // WE have to calculate the total number of items. |
| [118](#L118) | 'per\_page'    => $this->per\_page,                       // WE have to determine how many items to show on a page. |
| [119](#L119) | 'total\_pages' => ceil( $total\_items / $this->per\_page ),   // WE have to calculate the total number of pages. |
| [120](#L120) | ) |
| [121](#L121) | ); |
| [122](#L122) | } |
| [123](#L123) | /\*\* |
| [124](#L124) | \* Get the current Views |
| [125](#L125) | \* |
| [126](#L126) | \* @return array $views Current Views available to be displayed |
| [127](#L127) | \* @since 2.0 |
| [128](#L128) | \*/ |
| [129](#L129) | public function get\_views() { |
| [130](#L130) | $current                 = isset( $\_GET['status'] ) ? sanitize\_text\_field( wp\_unslash( $\_GET['status'] ) ) : ''; // phpcs:ignore WordPress.Security.NonceVerification |
| [131](#L131) | $total\_count             = '&nbsp;<span class="count">(' . $this->total\_count . ')</span>'; |
| [132](#L132) | $future\_count            = '&nbsp;<span class="count">(' . $this->future\_count . ')</span>'; |
| [133](#L133) | $today\_delivery\_count    = '&nbsp;<span class="count">(' . $this->today\_delivery\_count . ')</span>'; |
| [134](#L134) | $tomorrow\_delivery\_count = '&nbsp;<span class="count">(' . $this->tomorrow\_delivery\_count . ')</span>'; |
| [135](#L135) | $views                   = array( |
| [136](#L136) | 'all'               => sprintf( '<a href="%s"%s>%s</a>', remove\_query\_arg( array( 'status', 'paged' ) ), 'all' === $current || '' === $current ? ' class="current"' : '', \_\_( 'All', 'woocommerce-prdd' ) . $total\_count ), |
| [137](#L137) | 'future'            => sprintf( |
| [138](#L138) | '<a href="%s"%s>%s</a>', |
| [139](#L139) | add\_query\_arg( |
| [140](#L140) | array( |
| [141](#L141) | 'status' => 'future', |
| [142](#L142) | 'paged'  => false, |
| [143](#L143) | ) |
| [144](#L144) | ), |
| [145](#L145) | 'future' === $current ? ' class="current"' : '', |
| [146](#L146) | \_\_( 'Deliveries From Today Onwards', 'woocommerce-prdd' ) . $future\_count |
| [147](#L147) | ), |
| [148](#L148) | 'today\_delivery'    => sprintf( |
| [149](#L149) | '<a href="%s"%s>%s</a>', |
| [150](#L150) | add\_query\_arg( |
| [151](#L151) | array( |
| [152](#L152) | 'status' => 'today\_delivery', |
| [153](#L153) | 'paged'  => false, |
| [154](#L154) | ) |
| [155](#L155) | ), |
| [156](#L156) | 'today\_delivery' === $current ? ' class="current"' : '', |
| [157](#L157) | \_\_( 'Today\'s Deliveries', 'woocommerce-prdd' ) . $today\_delivery\_count |
| [158](#L158) | ), |
| [159](#L159) | 'tomorrow\_delivery' => sprintf( |
| [160](#L160) | '<a href="%s"%s>%s</a>', |
| [161](#L161) | add\_query\_arg( |
| [162](#L162) | array( |
| [163](#L163) | 'status' => 'tomorrow\_delivery', |
| [164](#L164) | 'paged'  => false, |
| [165](#L165) | ) |
| [166](#L166) | ), |
| [167](#L167) | 'tomorrow\_delivery' === $current ? ' class="current"' : '', |
| [168](#L168) | \_\_( 'Tomorrow\'s Deliveries', 'woocommerce-prdd' ) . $tomorrow\_delivery\_count |
| [169](#L169) | ), |
| [170](#L170) | ); |
| [171](#L171) |  |
| [172](#L172) | return apply\_filters( 'prdd\_deliveries\_table\_views', $views ); |
| [173](#L173) | } |
| [174](#L174) |  |
| [175](#L175) | /\*\* |
| [176](#L176) | \* Get Columns to be displayed |
| [177](#L177) | \* |
| [178](#L178) | \* @return array $columns Columns to be displayed |
| [179](#L179) | \* @since 2.0 |
| [180](#L180) | \*/ |
| [181](#L181) | public function get\_columns() { |
| [182](#L182) | $columns = array( |
| [183](#L183) | 'ID'            => \_\_( 'Order ID', 'woocommerce-prdd' ), |
| [184](#L184) | 'name'          => \_\_( 'Customer Name', 'woocommerce-prdd' ), |
| [185](#L185) | 'product\_name'  => \_\_( 'Product Name', 'woocommerce-prdd' ), |
| [186](#L186) | 'delivery\_date' => \_\_( 'Delivery Date', 'woocommerce-prdd' ), |
| [187](#L187) | 'quantity'      => \_\_( 'Quantity', 'woocommerce-prdd' ), |
| [188](#L188) | 'amount'        => \_\_( 'Amount', 'woocommerce-prdd' ), |
| [189](#L189) | 'order\_date'    => \_\_( 'Order Date', 'woocommerce-prdd' ), |
| [190](#L190) | 'actions'       => \_\_( 'Actions', 'woocommerce-prdd' ), |
| [191](#L191) | ); |
| [192](#L192) | return apply\_filters( 'prdd\_lite\_view\_deliveries\_table\_columns', $columns ); |
| [193](#L193) | } |
| [194](#L194) |  |
| [195](#L195) | /\*\* |
| [196](#L196) | \* Set the columns that can be sorted. |
| [197](#L197) | \* |
| [198](#L198) | \* @return array $columns Columns array with sortable columns set or reset. |
| [199](#L199) | \* @since 2.0 |
| [200](#L200) | \*/ |
| [201](#L201) | public function get\_sortable\_columns() { |
| [202](#L202) | $columns = array( |
| [203](#L203) | 'delivery\_date' => array( 'delivery\_date', false ), |
| [204](#L204) | ); |
| [205](#L205) | return apply\_filters( 'prdd\_lite\_view\_deliveries\_sortable\_columns', $columns ); |
| [206](#L206) | } |
| [207](#L207) |  |
| [208](#L208) | /\*\* |
| [209](#L209) | \* Add Advanced Filters - Search Box |
| [210](#L210) | \* |
| [211](#L211) | \* @param string $text Text Searched for. |
| [212](#L212) | \* @param string $input\_id ID of the field searched. |
| [213](#L213) | \* @since 1.1 |
| [214](#L214) | \* @todo Function is not necessary. |
| [215](#L215) | \*/ |
| [216](#L216) | public function search\_box( $text, $input\_id ) { |
| [217](#L217) | if ( empty( $\_REQUEST['s'] ) && ! $this->has\_items() ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [218](#L218) | return; |
| [219](#L219) | } |
| [220](#L220) | $input\_id = $input\_id . '-search-input'; |
| [221](#L221) | if ( ! empty( $\_REQUEST['orderby'] ) ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [222](#L222) | echo '<input type="hidden" name="orderby" value="' . esc\_attr( sanitize\_text\_field( wp\_unslash( $\_REQUEST['orderby'] ) ) ) . '" />'; // phpcs:ignore WordPress.Security.NonceVerification |
| [223](#L223) | } |
| [224](#L224) |  |
| [225](#L225) | if ( ! empty( $\_REQUEST['order'] ) ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [226](#L226) | echo '<input type="hidden" name="order" value="' . esc\_attr( sanitize\_text\_field( wp\_unslash( $\_REQUEST['order'] ) ) ) . '" />'; // phpcs:ignore WordPress.Security.NonceVerification |
| [227](#L227) | } |
| [228](#L228) | ?> |
| [229](#L229) | <p class="search-box"> |
| [230](#L230) | <?php do\_action( 'delivery\_search' ); ?> |
| [231](#L231) | <label class="screen-reader-text" for="<?php esc\_attr( $input\_id ); ?>"><?php esc\_html\_e( $text, 'woocommerce-prdd-lite' ); // phpcs:ignore ?>:</label> |
| [232](#L232) | <input type="search" id="<?php esc\_attr( $input\_id ); ?>" name="s" value="<?php \_admin\_search\_query(); ?>" /> |
| [233](#L233) | <?php submit\_button( $text, 'button', false, false, array( 'ID' => 'search-submit' ) ); ?><br/> |
| [234](#L234) | </p> |
| [235](#L235) | <?php |
| [236](#L236) | } |
| [237](#L237) | /\*\* |
| [238](#L238) | \* Get the total product delivery count and apply at appropriate places |
| [239](#L239) | \* |
| [240](#L240) | \* @since 1.1 |
| [241](#L241) | \*/ |
| [242](#L242) | public function get\_delivery\_counts() { |
| [243](#L243) | $args = array(); |
| [244](#L244) | if ( isset( $\_GET['user'] ) ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [245](#L245) | $args['user'] = urldecode( sanitize\_text\_field( wp\_unslash( $\_GET['user'] ) ) ); // phpcs:ignore WordPress.Security.NonceVerification |
| [246](#L246) | } elseif ( isset( $\_GET['s'] ) ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [247](#L247) | $args['s'] = urldecode( sanitize\_text\_field( wp\_unslash( $\_GET['s'] ) ) ); // phpcs:ignore WordPress.Security.NonceVerification |
| [248](#L248) | } |
| [249](#L249) |  |
| [250](#L250) | if ( ! empty( $\_GET['start-date'] ) ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [251](#L251) | $args['start-date'] = urldecode( sanitize\_text\_field( wp\_unslash( $\_GET['start-date'] ) ) ); // phpcs:ignore WordPress.Security.NonceVerification |
| [252](#L252) | } |
| [253](#L253) |  |
| [254](#L254) | if ( ! empty( $\_GET['end-date'] ) ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [255](#L255) | $args['end-date'] = urldecode( sanitize\_text\_field( wp\_unslash( $\_GET['end-date'] ) ) ); // phpcs:ignore WordPress.Security.NonceVerification |
| [256](#L256) | } |
| [257](#L257) |  |
| [258](#L258) | $deliveries\_count              = $this->prdd\_lite\_count\_deliveries( $args ); |
| [259](#L259) | $this->total\_count             = $deliveries\_count['total\_count']; |
| [260](#L260) | $this->future\_count            = $deliveries\_count['future\_count']; |
| [261](#L261) | $this->today\_delivery\_count    = $deliveries\_count['today\_delivery\_count']; |
| [262](#L262) | $this->tomorrow\_delivery\_count = $deliveries\_count['tomorrow\_delivery\_count']; |
| [263](#L263) | } |
| [264](#L264) | /\*\* |
| [265](#L265) | \* Get the product deliveries counts |
| [266](#L266) | \* |
| [267](#L267) | \* @param mixed $args Filters added for counts. |
| [268](#L268) | \* @return string $deliveries\_count Total deliveries Count. |
| [269](#L269) | \* @since 2.0 |
| [270](#L270) | \* @globals mixed $wpdb |
| [271](#L271) | \*/ |
| [272](#L272) | public function prdd\_lite\_count\_deliveries( $args ) { |
| [273](#L273) | global $wpdb; |
| [274](#L274) |  |
| [275](#L275) | $deliveries\_count = array( |
| [276](#L276) | 'total\_count'             => 0, |
| [277](#L277) | 'future\_count'            => 0, |
| [278](#L278) | 'today\_delivery\_count'    => 0, |
| [279](#L279) | 'tomorrow\_delivery\_count' => 0, |
| [280](#L280) | ); |
| [281](#L281) |  |
| [282](#L282) | // Today's date. |
| [283](#L283) | $current\_time  = current\_time( 'timestamp' ); |
| [284](#L284) | $current\_date  = gmdate( 'Y-m-d', $current\_time ); // phpcs:ignore |
| [285](#L285) | $tomorrow\_date = gmdate( 'Y-m-d', $current\_time + 86400 ); // phpcs:ignore |
| [286](#L286) |  |
| [287](#L287) | $get\_dates  = array(); |
| [288](#L288) | $start\_date = ''; |
| [289](#L289) | $end\_date   = ''; |
| [290](#L290) | if ( isset( $args['start-date'] ) ) { |
| [291](#L291) | $start\_date = $args['start-date']; |
| [292](#L292) | } |
| [293](#L293) |  |
| [294](#L294) | if ( isset( $args['end-date'] ) ) { |
| [295](#L295) | $end\_date = $args['end-date']; |
| [296](#L296) | } |
| [297](#L297) |  |
| [298](#L298) | if ( '' === $start\_date || '' === $end\_date || '1970-01-01' === $start\_date || '1970-01-01' === $end\_date ) { |
| [299](#L299) |  |
| [300](#L300) | $get\_order\_item\_ids = $wpdb->get\_results( $wpdb->prepare( 'SELECT order\_item\_id FROM `' . $wpdb->prefix . 'woocommerce\_order\_itemmeta` WHERE meta\_key = %s', '\_prdd\_lite\_date' ) ); // WPCS: db call ok, WPCS: cache ok. |
| [301](#L301) |  |
| [302](#L302) | if ( is\_array( $get\_order\_item\_ids ) && count( $get\_order\_item\_ids ) > 0 ) { |
| [303](#L303) | foreach ( $get\_order\_item\_ids as $item\_key => $item\_value ) { |
| [304](#L304) |  |
| [305](#L305) | $get\_order\_id = $wpdb->get\_results( $wpdb->prepare( 'SELECT order\_id FROM `' . $wpdb->prefix . 'woocommerce\_order\_items` WHERE order\_item\_id = %d', $item\_value->order\_item\_id ) ); // WPCS: db call ok, WPCS: cache ok. |
| [306](#L306) | if ( false !== get\_post\_status( $get\_order\_id[0]->order\_id ) ) { |
| [307](#L307) | $order = new WC\_Order( $get\_order\_id[0]->order\_id ); |
| [308](#L308) | } else { |
| [309](#L309) | continue; |
| [310](#L310) | } |
| [311](#L311) |  |
| [312](#L312) | if ( version\_compare( get\_option( 'woocommerce\_version ' ), '3.0.0', '>=' ) ) { |
| [313](#L313) | $order\_post\_status = $order->get\_status(); |
| [314](#L314) | if ( 'trash' !== $order\_post\_status ) { |
| [315](#L315) | $order\_post\_status = 'wc-' . $order\_post\_status; |
| [316](#L316) | } |
| [317](#L317) | } else { |
| [318](#L318) | $order\_post\_status = $order->post\_status; |
| [319](#L319) | } |
| [320](#L320) |  |
| [321](#L321) | if ( isset( $order\_post\_status ) && ( '' !== $order\_post\_status ) && ( 'wc-cancelled' !== $order\_post\_status ) && ( 'wc-refunded' !== $order\_post\_status ) && ( 'trash' !== $order\_post\_status ) && ( 'wc-failed' !== $order\_post\_status ) ) { |
| [322](#L322) | $get\_dates[] = $wpdb->get\_results( $wpdb->prepare( 'SELECT meta\_value, meta\_key FROM `' . $wpdb->prefix . 'woocommerce\_order\_itemmeta` WHERE meta\_key = %d AND order\_item\_id = %d', '\_prdd\_lite\_date', $item\_value->order\_item\_id ) ); // WPCS: cache ok, db call ok. |
| [323](#L323) | } |
| [324](#L324) | } |
| [325](#L325) | } |
| [326](#L326) | } |
| [327](#L327) |  |
| [328](#L328) | foreach ( $get\_dates as $key => $value ) { |
| [329](#L329) | if ( count( $value ) > 0 ) { |
| [330](#L330) | foreach ( $value as $k => $v ) { |
| [331](#L331) | if ( '\_prdd\_lite\_date' === $v->meta\_key ) { |
| [332](#L332) | $deliveries\_count['total\_count'] += 1; |
| [333](#L333) | if ( $v->meta\_value >= $current\_date ) { |
| [334](#L334) | $deliveries\_count['future\_count'] += 1; |
| [335](#L335) | } |
| [336](#L336) | if ( $v->meta\_value === $current\_date ) { |
| [337](#L337) | $deliveries\_count['today\_delivery\_count'] += 1; |
| [338](#L338) | } elseif ( $v->meta\_value === $tomorrow\_date ) { |
| [339](#L339) | $deliveries\_count['tomorrow\_delivery\_count'] += 1; |
| [340](#L340) | } |
| [341](#L341) | } |
| [342](#L342) | } |
| [343](#L343) | } |
| [344](#L344) | } |
| [345](#L345) | return $deliveries\_count; |
| [346](#L346) | } |
| [347](#L347) | /\*\* |
| [348](#L348) | \* It will generate the all the product deliveries date and time under View Deliveries section. |
| [349](#L349) | \* |
| [350](#L350) | \* @globals mixed $wpdb |
| [351](#L351) | \* @return array $return\_delivery\_display Key and value of all the columns |
| [352](#L352) | \* @since  2.0 |
| [353](#L353) | \*/ |
| [354](#L354) | public function deliveries\_data() { |
| [355](#L355) | global $wpdb; |
| [356](#L356) | $return\_deliveries = array(); |
| [357](#L357) | $results           = array(); |
| [358](#L358) |  |
| [359](#L359) | if ( isset( $\_GET['paged'] ) && sanitize\_text\_field( wp\_unslash( $\_GET['paged'] ) ) > 1 ) {  // phpcs:ignore WordPress.Security.NonceVerification |
| [360](#L360) | $page\_number = sanitize\_text\_field( wp\_unslash( $\_GET['paged'] ) ) - 1; // phpcs:ignore WordPress.Security.NonceVerification |
| [361](#L361) | } else { |
| [362](#L362) | $page\_number = 0; |
| [363](#L363) | } |
| [364](#L364) |  |
| [365](#L365) |  |
| [366](#L366) | if ( Prdd\_Lite\_Woocommerce::is\_hpos\_enabled() ) { |
| [367](#L367) | $table = "wc\_orders"; |
| [368](#L368) | $condition = "status NOT IN ( 'wc-cancelled', 'wc-refunded', 'trash', 'wc-failed' )"; |
| [369](#L369) | } else { |
| [370](#L370) | $table = 'posts'; |
| [371](#L371) | $condition = "post\_type = 'shop\_order' AND post\_status NOT IN ( 'wc-cancelled', 'wc-refunded', 'trash', 'wc-failed' )"; |
| [372](#L372) | } |
| [373](#L373) |  |
| [374](#L374) |  |
| [375](#L375) | $per\_page = $this->per\_page; |
| [376](#L376) |  |
| [377](#L377) | $current\_time  = current\_time( 'timestamp' ); |
| [378](#L378) | $current\_date  = gmdate( 'Y-m-d', $current\_time ); // phpcs:ignore |
| [379](#L379) | $tomorrow\_date = gmdate( 'Y-m-d', $current\_time + 86400 ); // phpcs:ignore |
| [380](#L380) | $i             = 0; |
| [381](#L381) |  |
| [382](#L382) | if ( isset( $\_GET['paged'] ) && sanitize\_text\_field( wp\_unslash( $\_GET['paged'] ) ) > 0 ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [383](#L383) | $start\_record = ( sanitize\_text\_field( wp\_unslash( $\_GET['paged'] ) ) - 1 ) \* $per\_page; // phpcs:ignore WordPress.Security.NonceVerification |
| [384](#L384) | $limit        = "LIMIT $start\_record, $per\_page"; |
| [385](#L385) | } else { |
| [386](#L386) | $limit = "LIMIT $per\_page"; |
| [387](#L387) | } |
| [388](#L388) |  |
| [389](#L389) | if ( isset( $\_GET['status'] ) && 'future' === $\_GET['status'] ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [390](#L390) | $get\_order\_item\_id = $wpdb->get\_results( $wpdb->prepare( "SELECT t1.order\_id, GROUP\_CONCAT( t2.meta\_key, '=' ,t2.meta\_value SEPARATOR '&' ) AS meta\_values FROM  `" . $wpdb->prefix . "woocommerce\_order\_items` AS t1, `" . $wpdb->prefix . "woocommerce\_order\_itemmeta` AS t2 WHERE t2.meta\_key IN (%s,%s) AND t2.order\_item\_id IN ( SELECT order\_item\_id FROM `" . $wpdb->prefix . "woocommerce\_order\_itemmeta` WHERE meta\_key = %s AND meta\_value >= %s ) AND t1.order\_item\_id = t2.order\_item\_id AND t1.order\_id IN ( SELECT ID FROM `" . $wpdb->prefix . "posts` WHERE post\_type = 'shop\_order' AND post\_status NOT IN ( 'wc-cancelled', 'wc-refunded', 'trash', 'wc-failed', '' ) ) GROUP BY t1.order\_item\_id HAVING COUNT( DISTINCT t2.meta\_key ) = 3 OR COUNT( DISTINCT t2.meta\_key ) = 2 ORDER BY t1.order\_id DESC $limit", '\_product\_id', '\_prdd\_lite\_date', '\_prdd\_lite\_date', $current\_date ) ); // phpcs:ignore |
| [391](#L391) | } elseif ( isset( $\_GET['status'] ) && 'today\_delivery' === $\_GET['status'] ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [392](#L392) | $get\_order\_item\_id = $wpdb->get\_results( $wpdb->prepare( "SELECT t1.order\_id, GROUP\_CONCAT( t2.meta\_key, '=' ,t2.meta\_value SEPARATOR '&' ) AS meta\_values FROM  `" . $wpdb->prefix . "woocommerce\_order\_items` AS t1, `" . $wpdb->prefix . "woocommerce\_order\_itemmeta` AS t2 WHERE t2.meta\_key IN (%s,%s) AND t2.order\_item\_id IN ( SELECT order\_item\_id FROM `" . $wpdb->prefix . "woocommerce\_order\_itemmeta` WHERE meta\_key = %s AND meta\_value = %s ) AND t1.order\_item\_id = t2.order\_item\_id AND t1.order\_id IN ( SELECT ID FROM `" . $wpdb->prefix . "posts` WHERE post\_type = 'shop\_order' AND post\_status NOT IN ( 'wc-cancelled', 'wc-refunded', 'trash', 'wc-failed', '' ) ) GROUP BY t1.order\_item\_id HAVING COUNT( DISTINCT t2.meta\_key ) = 3 OR COUNT( DISTINCT t2.meta\_key ) = 2 ORDER BY t1.order\_id DESC $limit", '\_product\_id', '\_prdd\_lite\_date', '\_prdd\_lite\_date', $current\_date ) ); // phpcs:ignore |
| [393](#L393) | } elseif ( isset( $\_GET['status'] ) && 'tomorrow\_delivery' === $\_GET['status'] ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [394](#L394) | $get\_order\_item\_id = $wpdb->get\_results( $wpdb->prepare( "SELECT t1.order\_id, GROUP\_CONCAT( t2.meta\_key, '=' ,t2.meta\_value SEPARATOR '&' ) AS meta\_values FROM  `" . $wpdb->prefix . "woocommerce\_order\_items` AS t1, `" . $wpdb->prefix . "woocommerce\_order\_itemmeta` AS t2 WHERE t2.meta\_key IN (%s,%s) AND t2.order\_item\_id IN ( SELECT order\_item\_id FROM `" . $wpdb->prefix . "woocommerce\_order\_itemmeta` WHERE meta\_key = %s AND meta\_value = %s ) AND t1.order\_item\_id = t2.order\_item\_id AND t1.order\_id IN ( SELECT ID FROM `" . $wpdb->prefix . "posts` WHERE post\_type = 'shop\_order' AND post\_status NOT IN ( 'wc-cancelled', 'wc-refunded', 'trash', 'wc-failed', '' ) ) GROUP BY t1.order\_item\_id HAVING COUNT( DISTINCT t2.meta\_key ) = 3 OR COUNT( DISTINCT t2.meta\_key ) = 2 ORDER BY t1.order\_id DESC $limit", '\_product\_id', '\_prdd\_lite\_date', '\_prdd\_lite\_date', $tomorrow\_date ) ); // phpcs:ignore |
| [395](#L395) | } else { |
| [396](#L396) | $get\_order\_item\_id = $wpdb->get\_results( $wpdb->prepare( "SELECT t1.order\_id, GROUP\_CONCAT( t2.meta\_key, '=' ,t2.meta\_value SEPARATOR '&' ) AS meta\_values FROM  `" . $wpdb->prefix . "woocommerce\_order\_items` AS t1, `" . $wpdb->prefix . "woocommerce\_order\_itemmeta` AS t2 WHERE t2.meta\_key IN (%s,%s) AND t1.order\_item\_id = t2.order\_item\_id AND t1.order\_id IN ( SELECT ID FROM `" . $wpdb->prefix . "posts` WHERE post\_type = 'shop\_order' AND post\_status NOT IN ( 'wc-cancelled', 'wc-refunded', 'trash', 'wc-failed', '' ) ) GROUP BY t1.order\_item\_id HAVING COUNT( DISTINCT t2.meta\_key ) = 3 OR COUNT( DISTINCT t2.meta\_key ) = 2 ORDER BY t1.order\_id DESC $limit", '\_prdd\_lite\_date', '\_product\_id' ) ); // phpcs:ignore |
| [397](#L397) | } |
| [398](#L398) |  |
| [399](#L399) | foreach ( $get\_order\_item\_id as $key => $value ) { |
| [400](#L400) | $time\_slot         = ''; |
| [401](#L401) | $date              = ''; |
| [402](#L402) | $selected\_quantity = 0; |
| [403](#L403) | $amount            = 0; |
| [404](#L404) |  |
| [405](#L405) | if ( false !== get\_post\_status( $value->order\_id ) ) { |
| [406](#L406) | $order = new WC\_Order( $value->order\_id ); |
| [407](#L407) | } else { |
| [408](#L408) | continue; |
| [409](#L409) | } |
| [410](#L410) |  |
| [411](#L411) | $meta\_values = explode( '&', $value->meta\_values ); |
| [412](#L412) | foreach ( $meta\_values as $mk => $mv ) { |
| [413](#L413) | $values = explode( '=', $mv ); |
| [414](#L414) | if ( '\_prdd\_lite\_date' === $values[0] ) { |
| [415](#L415) | $date = $values[1]; |
| [416](#L416) | } |
| [417](#L417) |  |
| [418](#L418) | if ( '\_product\_id' === $values[0] ) { |
| [419](#L419) | $product\_id = $values[1]; |
| [420](#L420) | } |
| [421](#L421) | } |
| [422](#L422) |  |
| [423](#L423) | $return\_deliveries[ $i ] = new stdClass(); |
| [424](#L424) | if ( version\_compare( get\_option( 'woocommerce\_version ' ), '3.0.0', '>=' ) ) { |
| [425](#L425) | $billing\_first\_name = $order->get\_billing\_first\_name(); |
| [426](#L426) | $billing\_last\_name  = $order->get\_billing\_last\_name(); |
| [427](#L427) | } else { |
| [428](#L428) | $billing\_first\_name = $order->get\_billing\_first\_name(); |
| [429](#L429) | $billing\_last\_name  = $order->get\_billing\_last\_name(); |
| [430](#L430) | } |
| [431](#L431) |  |
| [432](#L432) | $return\_deliveries[ $i ]->name = $billing\_first\_name . ' ' . $billing\_last\_name; |
| [433](#L433) | $get\_quantity                  = $order->get\_items(); |
| [434](#L434) | // The array needs to be reversed as we r displaying the last item first. |
| [435](#L435) | $get\_quantity = array\_reverse( $get\_quantity, true ); |
| [436](#L436) | foreach ( $get\_quantity as $k => $v ) { |
| [437](#L437) | $product\_exists = 'NO'; |
| [438](#L438) | if ( $v['product\_id'] == $product\_id ) { // phpcs:ignore |
| [439](#L439) | foreach ( $return\_deliveries as $deliver\_key => $deliver\_value ) { |
| [440](#L440) | if ( isset( $deliver\_value->ID ) && $deliver\_value->ID === $value->order\_id && $v['product\_id'] === $deliver\_value->product\_id ) { |
| [441](#L441) | if ( isset( $deliver\_value->item\_id ) && $k === $deliver\_value->item\_id ) { |
| [442](#L442) | $product\_exists = 'YES'; |
| [443](#L443) | } |
| [444](#L444) | } |
| [445](#L445) | } |
| [446](#L446) | if ( 'NO' === $product\_exists ) { |
| [447](#L447) | $selected\_quantity                = $v['qty']; |
| [448](#L448) | $amount                           = $v['line\_total'] + $v['line\_tax']; |
| [449](#L449) | $return\_deliveries[ $i ]->item\_id = $k; |
| [450](#L450) | break; |
| [451](#L451) | } |
| [452](#L452) | } |
| [453](#L453) | } |
| [454](#L454) | $product\_name = get\_the\_title( $product\_id ); |
| [455](#L455) | // Populate the array. |
| [456](#L456) | $return\_deliveries[ $i ]->ID            = $value->order\_id; |
| [457](#L457) | $return\_deliveries[ $i ]->product\_id    = $product\_id; |
| [458](#L458) | $return\_deliveries[ $i ]->product\_name  = $product\_name; |
| [459](#L459) | $return\_deliveries[ $i ]->delivery\_date = $date; |
| [460](#L460) | $return\_deliveries[ $i ]->quantity      = $selected\_quantity; |
| [461](#L461) | $return\_deliveries[ $i ]->amount        = $amount; |
| [462](#L462) | if ( version\_compare( get\_option( 'woocommerce\_version ' ), '3.0.0', '>=' ) ) { |
| [463](#L463) | $order\_date\_obj = $order->get\_date\_created(); |
| [464](#L464) | $order\_date     = $order\_date\_obj->format( 'Y-m-d' ); |
| [465](#L465) | } else { |
| [466](#L466) | $order\_date = $order->completed\_date; |
| [467](#L467) | } |
| [468](#L468) | $return\_deliveries[ $i ]->order\_date = $order\_date; |
| [469](#L469) | $i++; |
| [470](#L470) | } |
| [471](#L471) |  |
| [472](#L472) | // sort for delivery date. |
| [473](#L473) | if ( isset( $\_GET['orderby'] ) && 'delivery\_date' === $\_GET['orderby'] ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [474](#L474) | if ( isset( $\_GET['order'] ) && 'asc' === $\_GET['order'] ) { // phpcs:ignore WordPress.Security.NonceVerification |
| [475](#L475) | usort( $return\_deliveries, array( \_\_CLASS\_\_, 'prdd\_lite\_class\_delivery\_date\_asc' ) ); |
| [476](#L476) | } else { |
| [477](#L477) | usort( $return\_deliveries, array( \_\_CLASS\_\_, 'prdd\_lite\_class\_delivery\_date\_dsc' ) ); |
| [478](#L478) | } |
| [479](#L479) | } |
| [480](#L480) | return apply\_filters( 'prdd\_lite\_deliveries\_table\_data', $return\_deliveries ); |
| [481](#L481) | } |
| [482](#L482) |  |
| [483](#L483) | /\*\* |
| [484](#L484) | \* It will sort the ascending data based on the Delivery Date. |
| [485](#L485) | \* |
| [486](#L486) | \* @param array | object $value1 All data of the list. |
| [487](#L487) | \* @param array | object $value2 All data of the list. |
| [488](#L488) | \* @return timestamp |
| [489](#L489) | \* @since  1.1 |
| [490](#L490) | \*/ |
| [491](#L491) | public function prdd\_lite\_class\_delivery\_date\_asc( $value1, $value2 ) { |
| [492](#L492) | if ( isset( $value1->delivery\_date ) && isset( $value2->delivery\_date ) ) { |
| [493](#L493) | $date\_two           = ''; |
| [494](#L494) | $date\_one           = ''; |
| [495](#L495) | $value\_one          = $value1->delivery\_date; |
| [496](#L496) | $value\_two          = $value2->delivery\_date; |
| [497](#L497) | $date\_formatted\_one = date\_create\_from\_format( 'Y-m-d', $value\_one ); // phpcs:ignore |
| [498](#L498) | $date\_formatted\_two = date\_create\_from\_format( 'Y-m-d', $value\_two ); // phpcs:ignore |
| [499](#L499) | if ( isset( $date\_formatted\_one ) && '' !== $date\_formatted\_one ) { |
| [500](#L500) | $date\_one = date\_format( $date\_formatted\_one, 'Y-m-d' ); |
| [501](#L501) | } |
| [502](#L502) | if ( isset( $date\_formatted\_two ) && '' !== $date\_formatted\_two ) { |
| [503](#L503) | $date\_two = date\_format( $date\_formatted\_two, 'Y-m-d' ); |
| [504](#L504) | } |
| [505](#L505) | return strtotime( $date\_one ) - strtotime( $date\_two ); |
| [506](#L506) | } else { |
| [507](#L507) | return 1; |
| [508](#L508) | } |
| [509](#L509) | } |
| [510](#L510) | /\*\* |
| [511](#L511) | \* It will sort the descending data based on the Delivery Date. |
| [512](#L512) | \* |
| [513](#L513) | \* @param  array | object $value1 All data of the list. |
| [514](#L514) | \* @param  array | object $value2 All data of the list. |
| [515](#L515) | \* @return timestamp |
| [516](#L516) | \* @since  1.1 |
| [517](#L517) | \*/ |
| [518](#L518) | public function prdd\_lite\_class\_delivery\_date\_dsc( $value1, $value2 ) { |
| [519](#L519) | if ( isset( $value1->delivery\_date ) && isset( $value2->delivery\_date ) ) { |
| [520](#L520) | $date\_two           = ''; |
| [521](#L521) | $date\_one           = ''; |
| [522](#L522) | $value\_one          = $value1->delivery\_date; |
| [523](#L523) | $value\_two          = $value2->delivery\_date; |
| [524](#L524) | $date\_formatted\_one = date\_create\_from\_format( 'Y-m-d', $value\_one ); |
| [525](#L525) | $date\_formatted\_two = date\_create\_from\_format( 'Y-m-d', $value\_two ); |
| [526](#L526) | if ( isset( $date\_formatted\_one ) && '' !== $date\_formatted\_one ) { |
| [527](#L527) | $date\_one = date\_format( $date\_formatted\_one, 'Y-m-d' ); |
| [528](#L528) | } |
| [529](#L529) | if ( isset( $date\_formatted\_two ) && '' !== $date\_formatted\_two ) { |
| [530](#L530) | $date\_two = date\_format( $date\_formatted\_two, 'Y-m-d' ); |
| [531](#L531) | } |
| [532](#L532) | return strtotime( $date\_two ) - strtotime( $date\_one ); |
| [533](#L533) | } else { |
| [534](#L534) | return 1; |
| [535](#L535) | } |
| [536](#L536) | } |
| [537](#L537) |  |
| [538](#L538) | /\*\* |
| [539](#L539) | \* It will display the data for Delivery Date. |
| [540](#L540) | \* |
| [541](#L541) | \* @param  array | object $delivery All data of the list. |
| [542](#L542) | \* @param  stirng         $column\_name Name of the column. |
| [543](#L543) | \* @return string $value Data of the column |
| [544](#L544) | \* @since  1.1 |
| [545](#L545) | \*/ |
| [546](#L546) | public function column\_default( $delivery, $column\_name ) { |
| [547](#L547) | switch ( $column\_name ) { |
| [548](#L548) | case 'ID': |
| [549](#L549) | $value = '<a href="post.php?post=' . $delivery->ID . '&action=edit">' . $delivery->ID . '</a>'; |
| [550](#L550) | break; |
| [551](#L551) | case 'delivery\_date': |
| [552](#L552) | $date                 = strtotime( $delivery->delivery\_date ); |
| [553](#L553) | $date\_formats         = prdd\_lite\_get\_delivery\_arrays( 'prdd\_lite\_date\_formats' ); |
| [554](#L554) | $date\_format\_selected = get\_option( 'prdd\_lite\_date\_format' ); |
| [555](#L555) | if ( '' === $date\_format\_selected ) { |
| [556](#L556) | $date\_format\_selected = 'mm/dd/y'; |
| [557](#L557) | } |
| [558](#L558) |  |
| [559](#L559) | // get the global settings to find the date formats. |
| [560](#L560) | $date\_format\_set = $date\_formats[ $date\_format\_selected ]; |
| [561](#L561) | $value           = gmdate( $date\_format\_set, $date ); // phpcs:ignore |
| [562](#L562) | break; |
| [563](#L563) | case 'amount': |
| [564](#L564) | $amount          = ! empty( $delivery->amount ) ? $delivery->amount : 0; |
| [565](#L565) | $currency\_symbol = get\_woocommerce\_currency\_symbol(); |
| [566](#L566) | $value           = $currency\_symbol . number\_format( $amount, 2 ); |
| [567](#L567) | break; |
| [568](#L568) | case 'actions': |
| [569](#L569) | $value = '<a href="post.php?post=' . $delivery->ID . '&action=edit">View Order</a>'; |
| [570](#L570) | break; |
| [571](#L571) | default: |
| [572](#L572) | $value = isset( $delivery->$column\_name ) ? $delivery->$column\_name : ''; |
| [573](#L573) | break; |
| [574](#L574) | } |
| [575](#L575) | return apply\_filters( 'prdd\_lite\_delivery\_table\_column\_default', $value, $delivery, $column\_name ); |
| [576](#L576) | } |
| [577](#L577) | } |
| [578](#L578) | ?> |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/product-delivery-date-for-woocommerce-lite/tags/2.7.5/includes/admin/class-prdd-lite-view-deliveries-table.php?format=txt)
* [Original Format](/export/3222434/product-delivery-date-for-woocommerce-lite/tags/2.7.5/includes/admin/class-prdd-lite-view-deliveries-table.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_3b796825_20250114_183134.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Product Delivery Date for WooCommerce - Lite <= 2.8.0 - Reflected Cross-Site Scripting

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Product Delivery Date for WooCommerce - Lite <= 2.8.0 - Reflected Cross-Site Scripting

6.1

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-10882](https://www.cve.org/CVERecord?id=CVE-2024-10882) |
| --- | --- |
| CVSS | 6.1 (Medium) |
| Publicly Published | November 12, 2024 |
| Last Updated | November 13, 2024 |
| Researcher | [Peter Thaleikis](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/spek) |

### Description

The Product Delivery Date for WooCommerce – Lite plugin for WordPress is vulnerable to Reflected Cross-Site Scripting due to the use of add\_query\_arg & remove\_query\_arg without appropriate escaping on the URL in all versions up to, and including, 2.8.0. This makes it possible for unauthenticated attackers to inject arbitrary web scripts in pages that execute if they can successfully trick a user into performing an action such as clicking on a link.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/product-delivery-date-for-woocommerce-lite/tags/2.7.5/includes/admin/class-prdd-lite-view-deliveries-table.php#L129)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&old=3185534%40product-delivery-date-for-woocommerce-lite&new=3185534%40product-delivery-date-for-woocommerce-lite&sfp_email=&sfph_mail=)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fproduct-delivery-date-for-woocommerce-lite%2Fproduct-delivery-date-for-woocommerce-lite-280-reflected-cross-site-scripting&t=Product%20Delivery%20Date%20for%20WooCommerce%20-%20Lite%20%3C%3D%202.8.0%20-%20Reflected%20Cross-Site%20Scripting "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fproduct-delivery-date-for-woocommerce-lite%2Fproduct-delivery-date-for-woocommerce-lite-280-reflected-cross-site-scripting&text=Product%20Delivery%20Date%20for%20WooCommerce%20-%20Lite%20%3C%3D%202.8.0%20-%20Reflected%20Cross-Site%20Scripting "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fproduct-delivery-date-for-woocommerce-lite%2Fproduct-delivery-date-for-woocommerce-lite-280-reflected-cross-site-scripting "LinkedIn")
Email

## Vulnerability Details for Product Delivery Date for WooCommerce – Lite

#### [Product Delivery Date for WooCommerce – Lite](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/product-delivery-date-for-woocommerce-lite)

| Software Type | Plugin |
| --- | --- |
| Software Slug | product-delivery-date-for-woocommerce-lite [(view on wordpress.org)](https://wordpress.org/plugins/product-delivery-date-for-woocommerce-lite) |
| Patched? | Yes |
| Remediation | Update to version 2.8.1, or a newer patched version |
| Affected Version | * <= 2.8.0 |
| Patched Version | * 2.8.1 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_1beb80b9_20250114_183132.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3185534%2540product-delivery-date-for-woocommerce-lite%26old%3D3185534%2540product-delivery-date-for-woocommerce-lite)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3182252/product-delivery-date-for-woocommerce-lite "Changeset 3182252 for product-delivery-date-for-woocommerce-lite")
* [Next Change](/changeset/3201433/product-delivery-date-for-woocommerce-lite "Changeset 3201433 for product-delivery-date-for-woocommerce-lite") →

---

# Changeset [3185534](/changeset/3185534 "Show full changeset") for [product-delivery-date-for-woocommerce-lite](/browser/product-delivery-date-for-woocommerce-lite?rev=3185534 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
11/11/2024 08:59:12 AM
([2 months](/timeline?from=2024-11-11T08%3A59%3A12Z&precision=second "See timeline at 11/11/2024 08:59:12 AM") ago)

Author:
tychesoftwares
Message:

Update to version 2.8.1 from GitHub

Location:
[product-delivery-date-for-woocommerce-lite](/browser/product-delivery-date-for-woocommerce-lite?rev=3185534)
Files:

8 edited
1 copied

* [tags/2.8.1](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1?rev=3185534 "Show entry in browser")
  (copied)
  *(copied from [product-delivery-date-for-woocommerce-lite/trunk](/browser/product-delivery-date-for-woocommerce-lite/trunk?rev=3182252 "Show original file (revision 3185533)"))*
* [tags/2.8.1/class-prdd-lite-woocommerce.php](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1/class-prdd-lite-woocommerce.php?rev=3185534 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [tags/2.8.1/includes/admin/class-prdd-lite-view-deliveries-table.php](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3185534 "Show entry in browser")
  (modified)
  ([3 diffs](#file2 "Show differences"))
* [tags/2.8.1/product-delivery-date-for-woocommerce-lite.php](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1/product-delivery-date-for-woocommerce-lite.php?rev=3185534 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [tags/2.8.1/readme.txt](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1/readme.txt?rev=3185534 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [trunk/class-prdd-lite-woocommerce.php](/browser/product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php?rev=3185534 "Show entry in browser")
  (modified)
  ([3 diffs](#file5 "Show differences"))
* [trunk/includes/admin/class-prdd-lite-view-deliveries-table.php](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3185534 "Show entry in browser")
  (modified)
  ([3 diffs](#file6 "Show differences"))
* [trunk/product-delivery-date-for-woocommerce-lite.php](/browser/product-delivery-date-for-woocommerce-lite/trunk/product-delivery-date-for-woocommerce-lite.php?rev=3185534 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [trunk/readme.txt](/browser/product-delivery-date-for-woocommerce-lite/trunk/readme.txt?rev=3185534 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [product-delivery-date-for-woocommerce-lite/tags/2.8.1/class-prdd-lite-woocommerce.php](/changeset/3185534/product-delivery-date-for-woocommerce-lite/tags/2.8.1/class-prdd-lite-woocommerce.php "Show the changeset 3185534 restricted to product-delivery-date-for-woocommerce-lite/tags/2.8.1/class-prdd-lite-woocommerce.php")

  | [r3182252](/browser/product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php?rev=3182252#L20 "Show revision 3182252 of this file in browser") | [r3185534](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1/class-prdd-lite-woocommerce.php?rev=3185534#L20 "Show revision 3185534 of this file in browser") |  |
  | --- | --- | --- |
  | 20 | 20 |  |
  | 21 | 21 | global $prdd\_lite\_update\_checker; |
  | 22 |  | $prdd\_lite\_update\_checker = '2.8.~~0~~'; |
  |  | 22 | $prdd\_lite\_update\_checker = '2.8.1'; |
  | 23 | 23 | use Automattic\WooCommerce\Utilities\OrderUtil; |
  | 24 | 24 |  |
  | […](/browser/product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php?rev=3182252#L171) | […](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1/class-prdd-lite-woocommerce.php?rev=3185534#L171) |  |
  | 171 | 171 | \*/ |
  | 172 | 172 | public function prdd\_lite\_activate() { |
  | 173 |  | update\_option( 'woocommerce\_prdd\_lite\_db\_version', '2.8.~~0~~' ); |
  |  | 173 | update\_option( 'woocommerce\_prdd\_lite\_db\_version', '2.8.1' ); |
  | 174 | 174 | // Check if installed for the first time. |
  | 175 | 175 | add\_option( 'prdd\_lite\_installed', 'yes' ); |
  | […](/browser/product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php?rev=3182252#L195) | […](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1/class-prdd-lite-woocommerce.php?rev=3185534#L195) |  |
  | 195 | 195 | $prdd\_plugin\_version = get\_option( 'woocommerce\_prdd\_lite\_db\_version' ); |
  | 196 | 196 | if ( $prdd\_plugin\_version !== $this->get\_plugin\_version() ) { |
  | 197 |  | update\_option( 'woocommerce\_prdd\_lite\_db\_version', '2.8.~~0~~' ); |
  |  | 197 | update\_option( 'woocommerce\_prdd\_lite\_db\_version', '2.8.1' ); |
  | 198 | 198 | } |
  | 199 | 199 |  |
* ## [product-delivery-date-for-woocommerce-lite/tags/2.8.1/includes/admin/class-prdd-lite-view-deliveries-table.php](/changeset/3185534/product-delivery-date-for-woocommerce-lite/tags/2.8.1/includes/admin/class-prdd-lite-view-deliveries-table.php "Show the changeset 3185534 restricted to product-delivery-date-for-woocommerce-lite/tags/2.8.1/includes/admin/class-prdd-lite-view-deliveries-table.php")

  | [r3014250](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3014250#L134 "Show revision 3014250 of this file in browser") | [r3185534](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3185534#L134 "Show revision 3185534 of this file in browser") |  |
  | --- | --- | --- |
  | 134 | 134 | $tomorrow\_delivery\_count = '&nbsp;<span class="count">(' . $this->tomorrow\_delivery\_count . ')</span>'; |
  | 135 | 135 | $views                   = array( |
  | 136 |  | 'all'               => sprintf( '<a href="%s"%s>%s</a>', ~~remove\_query\_arg( array( 'status', 'paged' ) ), 'all' === $current || '' === $current ? ' class="current"' : '',~~ \_\_( 'All', 'woocommerce-prdd' ) . $total\_count ), |
  |  | 136 | 'all'               => sprintf( '<a href="%s"%s>%s</a>', esc\_url( remove\_query\_arg( array( 'status', 'paged' ) ) ), 'all' === $current || '' === $current ? ' class="current"' : '', esc\_html\_\_( 'All', 'woocommerce-prdd' ) . $total\_count ), |
  | 137 | 137 | 'future'            => sprintf( |
  | 138 | 138 | '<a href="%s"%s>%s</a>', |
  | 139 |  | add\_query\_arg( |
  | 140 |  | array( |
  | 141 |  | 'status' => 'future', |
  | 142 |  | 'paged'  => false, |
  |  | 139 | esc\_url( |
  |  | 140 | add\_query\_arg( |
  |  | 141 | array( |
  |  | 142 | 'status' => 'future', |
  |  | 143 | 'paged'  => false, |
  |  | 144 | ) |
  | 143 | 145 | ) |
  | 144 | 146 | ), |
  | […](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3014250#L148) | […](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3185534#L150) |  |
  | 148 | 150 | 'today\_delivery'    => sprintf( |
  | 149 | 151 | '<a href="%s"%s>%s</a>', |
  | 150 |  | add\_query\_arg( |
  | 151 |  | array( |
  | 152 |  | 'status' => 'today\_delivery', |
  | 153 |  | 'paged'  => false, |
  |  | 152 | esc\_url( |
  |  | 153 | add\_query\_arg( |
  |  | 154 | array( |
  |  | 155 | 'status' => 'today\_delivery', |
  |  | 156 | 'paged'  => false, |
  |  | 157 | ) |
  | 154 | 158 | ) |
  | 155 | 159 | ), |
  | […](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3014250#L159) | […](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3185534#L163) |  |
  | 159 | 163 | 'tomorrow\_delivery' => sprintf( |
  | 160 | 164 | '<a href="%s"%s>%s</a>', |
  | 161 |  | add\_query\_arg( |
  | 162 |  | array( |
  | 163 |  | 'status' => 'tomorrow\_delivery', |
  | 164 |  | 'paged'  => false, |
  |  | 165 | esc\_url( |
  |  | 166 | add\_query\_arg( |
  |  | 167 | array( |
  |  | 168 | 'status' => 'tomorrow\_delivery', |
  |  | 169 | 'paged'  => false, |
  |  | 170 | ) |
  | 165 | 171 | ) |
  | 166 | 172 | ), |
* ## [product-delivery-date-for-woocommerce-lite/tags/2.8.1/product-delivery-date-for-woocommerce-lite.php](/changeset/3185534/product-delivery-date-for-woocommerce-lite/tags/2.8.1/product-delivery-date-for-woocommerce-lite.php "Show the changeset 3185534 restricted to product-delivery-date-for-woocommerce-lite/tags/2.8.1/product-delivery-date-for-woocommerce-lite.php")

  | [r3182252](/browser/product-delivery-date-for-woocommerce-lite/trunk/product-delivery-date-for-woocommerce-lite.php?rev=3182252#L3 "Show revision 3182252 of this file in browser") | [r3185534](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1/product-delivery-date-for-woocommerce-lite.php?rev=3185534#L3 "Show revision 3185534 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | \* Plugin Name: Product Delivery Date for WooCommerce - Lite |
  | 4 | 4 | \* Description: This plugin lets you capture the Delivery Date for each product. |
  | 5 |  | \* Version: 2.8.~~0~~ |
  |  | 5 | \* Version: 2.8.1 |
  | 6 | 6 | \* Author: Tyche Softwares |
  | 7 | 7 | \* Author URI: https://www.tychesoftwares.com/ |
* ## [product-delivery-date-for-woocommerce-lite/tags/2.8.1/readme.txt](/changeset/3185534/product-delivery-date-for-woocommerce-lite/tags/2.8.1/readme.txt "Show the changeset 3185534 restricted to product-delivery-date-for-woocommerce-lite/tags/2.8.1/readme.txt")

  | [r3182252](/browser/product-delivery-date-for-woocommerce-lite/trunk/readme.txt?rev=3182252#L192 "Show revision 3182252 of this file in browser") | [r3185534](/browser/product-delivery-date-for-woocommerce-lite/tags/2.8.1/readme.txt?rev=3185534#L192 "Show revision 3185534 of this file in browser") |  |
  | --- | --- | --- |
  | 192 | 192 | == Changelog == |
  | 193 | 193 |  |
  |  | 194 | = 2.8.1 (11.11.2024) |
  |  | 195 | \* Fix - Fixed a Reflected Cross-Site Scripting (XSS) vulnerability. |
  |  | 196 |  |
  | 194 | 197 | = 2.8.0 (05.11.2024) = |
  | 195 | 198 | \* Supporting code changes for the Trial Version of Product Delivery Date Pro for WooCommerce. |
* ## [product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php](/changeset/3185534/product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php "Show the changeset 3185534 restricted to product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php")

  | [r3182252](/browser/product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php?rev=3182252#L20 "Show revision 3182252 of this file in browser") | [r3185534](/browser/product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php?rev=3185534#L20 "Show revision 3185534 of this file in browser") |  |
  | --- | --- | --- |
  | 20 | 20 |  |
  | 21 | 21 | global $prdd\_lite\_update\_checker; |
  | 22 |  | $prdd\_lite\_update\_checker = '2.8.~~0~~'; |
  |  | 22 | $prdd\_lite\_update\_checker = '2.8.1'; |
  | 23 | 23 | use Automattic\WooCommerce\Utilities\OrderUtil; |
  | 24 | 24 |  |
  | […](/browser/product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php?rev=3182252#L171) | […](/browser/product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php?rev=3185534#L171) |  |
  | 171 | 171 | \*/ |
  | 172 | 172 | public function prdd\_lite\_activate() { |
  | 173 |  | update\_option( 'woocommerce\_prdd\_lite\_db\_version', '2.8.~~0~~' ); |
  |  | 173 | update\_option( 'woocommerce\_prdd\_lite\_db\_version', '2.8.1' ); |
  | 174 | 174 | // Check if installed for the first time. |
  | 175 | 175 | add\_option( 'prdd\_lite\_installed', 'yes' ); |
  | […](/browser/product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php?rev=3182252#L195) | […](/browser/product-delivery-date-for-woocommerce-lite/trunk/class-prdd-lite-woocommerce.php?rev=3185534#L195) |  |
  | 195 | 195 | $prdd\_plugin\_version = get\_option( 'woocommerce\_prdd\_lite\_db\_version' ); |
  | 196 | 196 | if ( $prdd\_plugin\_version !== $this->get\_plugin\_version() ) { |
  | 197 |  | update\_option( 'woocommerce\_prdd\_lite\_db\_version', '2.8.~~0~~' ); |
  |  | 197 | update\_option( 'woocommerce\_prdd\_lite\_db\_version', '2.8.1' ); |
  | 198 | 198 | } |
  | 199 | 199 |  |
* ## [product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php](/changeset/3185534/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php "Show the changeset 3185534 restricted to product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php")

  | [r3014250](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3014250#L134 "Show revision 3014250 of this file in browser") | [r3185534](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3185534#L134 "Show revision 3185534 of this file in browser") |  |
  | --- | --- | --- |
  | 134 | 134 | $tomorrow\_delivery\_count = '&nbsp;<span class="count">(' . $this->tomorrow\_delivery\_count . ')</span>'; |
  | 135 | 135 | $views                   = array( |
  | 136 |  | 'all'               => sprintf( '<a href="%s"%s>%s</a>', ~~remove\_query\_arg( array( 'status', 'paged' ) ), 'all' === $current || '' === $current ? ' class="current"' : '',~~ \_\_( 'All', 'woocommerce-prdd' ) . $total\_count ), |
  |  | 136 | 'all'               => sprintf( '<a href="%s"%s>%s</a>', esc\_url( remove\_query\_arg( array( 'status', 'paged' ) ) ), 'all' === $current || '' === $current ? ' class="current"' : '', esc\_html\_\_( 'All', 'woocommerce-prdd' ) . $total\_count ), |
  | 137 | 137 | 'future'            => sprintf( |
  | 138 | 138 | '<a href="%s"%s>%s</a>', |
  | 139 |  | add\_query\_arg( |
  | 140 |  | array( |
  | 141 |  | 'status' => 'future', |
  | 142 |  | 'paged'  => false, |
  |  | 139 | esc\_url( |
  |  | 140 | add\_query\_arg( |
  |  | 141 | array( |
  |  | 142 | 'status' => 'future', |
  |  | 143 | 'paged'  => false, |
  |  | 144 | ) |
  | 143 | 145 | ) |
  | 144 | 146 | ), |
  | […](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3014250#L148) | […](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3185534#L150) |  |
  | 148 | 150 | 'today\_delivery'    => sprintf( |
  | 149 | 151 | '<a href="%s"%s>%s</a>', |
  | 150 |  | add\_query\_arg( |
  | 151 |  | array( |
  | 152 |  | 'status' => 'today\_delivery', |
  | 153 |  | 'paged'  => false, |
  |  | 152 | esc\_url( |
  |  | 153 | add\_query\_arg( |
  |  | 154 | array( |
  |  | 155 | 'status' => 'today\_delivery', |
  |  | 156 | 'paged'  => false, |
  |  | 157 | ) |
  | 154 | 158 | ) |
  | 155 | 159 | ), |
  | […](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3014250#L159) | […](/browser/product-delivery-date-for-woocommerce-lite/trunk/includes/admin/class-prdd-lite-view-deliveries-table.php?rev=3185534#L163) |  |
  | 159 | 163 | 'tomorrow\_delivery' => sprintf( |
  | 160 | 164 | '<a href="%s"%s>%s</a>', |
  | 161 |  | add\_query\_arg( |
  | 162 |  | array( |
  | 163 |  | 'status' => 'tomorrow\_delivery', |
  | 164 |  | 'paged'  => false, |
  |  | 165 | esc\_url( |
  |  | 166 | add\_query\_arg( |
  |  | 167 | array( |
  |  | 168 | 'status' => 'tomorrow\_delivery', |
  |  | 169 | 'paged'  => false, |
  |  | 170 | ) |
  | 165 | 171 | ) |
  | 166 | 172 | ), |
* ## [product-delivery-date-for-woocommerce-lite/trunk/product-delivery-date-for-woocommerce-lite.php](/changeset/3185534/product-delivery-date-for-woocommerce-lite/trunk/product-delivery-date-for-woocommerce-lite.php "Show the changeset 3185534 restricted to product-delivery-date-for-woocommerce-lite/trunk/product-delivery-date-for-woocommerce-lite.php")

  | [r3182252](/browser/product-delivery-date-for-woocommerce-lite/trunk/product-delivery-date-for-woocommerce-lite.php?rev=3182252#L3 "Show revision 3182252 of this file in browser") | [r3185534](/browser/product-delivery-date-for-woocommerce-lite/trunk/product-delivery-date-for-woocommerce-lite.php?rev=3185534#L3 "Show revision 3185534 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | \* Plugin Name: Product Delivery Date for WooCommerce - Lite |
  | 4 | 4 | \* Description: This plugin lets you capture the Delivery Date for each product. |
  | 5 |  | \* Version: 2.8.~~0~~ |
  |  | 5 | \* Version: 2.8.1 |
  | 6 | 6 | \* Author: Tyche Softwares |
  | 7 | 7 | \* Author URI: https://www.tychesoftwares.com/ |
* ## [product-delivery-date-for-woocommerce-lite/trunk/readme.txt](/changeset/3185534/product-delivery-date-for-woocommerce-lite/trunk/readme.txt "Show the changeset 3185534 restricted to product-delivery-date-for-woocommerce-lite/trunk/readme.txt")

  | [r3182252](/browser/product-delivery-date-for-woocommerce-lite/trunk/readme.txt?rev=3182252#L192 "Show revision 3182252 of this file in browser") | [r3185534](/browser/product-delivery-date-for-woocommerce-lite/trunk/readme.txt?rev=3185534#L192 "Show revision 3185534 of this file in browser") |  |
  | --- | --- | --- |
  | 192 | 192 | == Changelog == |
  | 193 | 193 |  |
  |  | 194 | = 2.8.1 (11.11.2024) |
  |  | 195 | \* Fix - Fixed a Reflected Cross-Site Scripting (XSS) vulnerability. |
  |  | 196 |  |
  | 194 | 197 | = 2.8.0 (05.11.2024) = |
  | 195 | 198 | \* Supporting code changes for the Trial Version of Product Delivery Date Pro for WooCommerce. |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3185534)
* [Zip Archive](?format=zip&new=3185534)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


