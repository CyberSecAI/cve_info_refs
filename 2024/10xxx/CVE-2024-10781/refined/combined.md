=== Content from plugins.trac.wordpress.org_ba91a665_20250114_201125.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fcleantalk-spam-protect%2Ftags%2F6.44%2Flib%2FCleantalk%2FApbctWP%2FRemoteCalls.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php)

---

# [source:](/browser?order=name "Go to repository root") [cleantalk-spam-protect](/browser/cleantalk-spam-protect?order=name "View cleantalk-spam-protect")/[tags](/browser/cleantalk-spam-protect/tags?order=name "View tags")/[6.44](/browser/cleantalk-spam-protect/tags/6.44?order=name "View 6.44")/[lib](/browser/cleantalk-spam-protect/tags/6.44/lib?order=name "View lib")/[Cleantalk](/browser/cleantalk-spam-protect/tags/6.44/lib/Cleantalk?order=name "View Cleantalk")/[ApbctWP](/browser/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP?order=name "View ApbctWP")/[RemoteCalls.php](/browser/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php?order=name "View RemoteCalls.php")

View diff against:

View revision:

| [Last change](/changeset/3179819/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php "View differences") on this file was [3179819](/changeset/3179819/ "View changeset 3179819"), checked in by sergefcleantalk, [2 months ago](/timeline?from=2024-11-01T08%3A48%3A02Z&precision=second "See timeline at 11/01/2024 08:48:02 AM") |
| --- |
| Update to 6.44 |
| **File size:** 21.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | namespace Cleantalk\ApbctWP; |
| [4](#L4) |  |
| [5](#L5) | use Cleantalk\ApbctWP\Firewall\SFWUpdateHelper; |
| [6](#L6) | use Cleantalk\ApbctWP\Variables\Post; |
| [7](#L7) | use Cleantalk\ApbctWP\Variables\Request; |
| [8](#L8) | use Cleantalk\ApbctWP\Variables\Get; |
| [9](#L9) | use Cleantalk\Common\TT; |
| [10](#L10) |  |
| [11](#L11) | class RemoteCalls |
| [12](#L12) | { |
| [13](#L13) | const COOLDOWN = 10; |
| [14](#L14) |  |
| [15](#L15) | private static $allowedActionsWithoutToken = [ |
| [16](#L16) | 'get\_fresh\_wpnonce', |
| [17](#L17) | 'post\_api\_key', |
| [18](#L18) | ]; |
| [19](#L19) |  |
| [20](#L20) | /\*\* |
| [21](#L21) | \* Checking if the current request is the Remote Call |
| [22](#L22) | \* |
| [23](#L23) | \* @return bool |
| [24](#L24) | \*/ |
| [25](#L25) | public static function check() |
| [26](#L26) | { |
| [27](#L27) | return Request::get('spbc\_remote\_call\_token') |
| [28](#L28) | ? self::checkWithToken() |
| [29](#L29) | : self::checkWithoutToken(); |
| [30](#L30) | } |
| [31](#L31) |  |
| [32](#L32) | public static function checkWithToken() |
| [33](#L33) | { |
| [34](#L34) | return Request::get('spbc\_remote\_call\_token') && |
| [35](#L35) | Request::get('spbc\_remote\_call\_action') && |
| [36](#L36) | in\_array(Request::get('plugin\_name'), array('antispam', 'anti-spam', 'apbct')); |
| [37](#L37) | } |
| [38](#L38) |  |
| [39](#L39) | private static function isAllowedWithoutToken($rc) |
| [40](#L40) | { |
| [41](#L41) | return in\_array($rc, self::$allowedActionsWithoutToken, true); |
| [42](#L42) | } |
| [43](#L43) |  |
| [44](#L44) | public static function checkWithoutToken() |
| [45](#L45) | { |
| [46](#L46) | global $apbct; |
| [47](#L47) |  |
| [48](#L48) | $rc\_servers = [ |
| [49](#L49) | 'netserv3.cleantalk.org', |
| [50](#L50) | 'netserv4.cleantalk.org', |
| [51](#L51) | ]; |
| [52](#L52) |  |
| [53](#L53) | $is\_noc\_request = ! $apbct->key\_is\_ok && |
| [54](#L54) | Request::get('spbc\_remote\_call\_action') && |
| [55](#L55) | in\_array(Request::get('plugin\_name'), array('antispam', 'anti-spam', 'apbct')) && |
| [56](#L56) | in\_array(Helper::ipResolve(Helper::ipGet('remote\_addr')), $rc\_servers, true); |
| [57](#L57) |  |
| [58](#L58) | // no token needs for this action, at least for now |
| [59](#L59) | // todo Probably we still need to validate this, consult with analytics team |
| [60](#L60) | $is\_wp\_nonce\_request = $apbct->key\_is\_ok && Request::get('spbc\_remote\_call\_action') === 'get\_fresh\_wpnonce'; |
| [61](#L61) |  |
| [62](#L62) | return $is\_wp\_nonce\_request || $is\_noc\_request; |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | /\*\* |
| [66](#L66) | \* Execute corresponding method of RemoteCalls if exists |
| [67](#L67) | \* |
| [68](#L68) | \* @return bool|string|string[]|null |
| [69](#L69) | \* @psalm-suppress PossiblyUnusedReturnValue |
| [70](#L70) | \*/ |
| [71](#L71) | public static function perform() |
| [72](#L72) | { |
| [73](#L73) | global $apbct; |
| [74](#L74) |  |
| [75](#L75) | $action = strtolower(Request::get('spbc\_remote\_call\_action')); |
| [76](#L76) | $token  = strtolower(Request::get('spbc\_remote\_call\_token')); |
| [77](#L77) |  |
| [78](#L78) | if ( isset($apbct->remote\_calls[$action]) ) { |
| [79](#L79) | $cooldown = isset($apbct->remote\_calls[$action]['cooldown']) ? $apbct->remote\_calls[$action]['cooldown'] : self::COOLDOWN; |
| [80](#L80) |  |
| [81](#L81) | // Return OK for test remote calls |
| [82](#L82) | if ( Request::get('test') ) { |
| [83](#L83) | die('OK'); |
| [84](#L84) | } |
| [85](#L85) |  |
| [86](#L86) | if ( |
| [87](#L87) | time() - $apbct->remote\_calls[$action]['last\_call'] >= $cooldown || |
| [88](#L88) | ($action === 'sfw\_update' && Request::get('file\_urls')) |
| [89](#L89) | ) { |
| [90](#L90) | $apbct->remote\_calls[$action]['last\_call'] = time(); |
| [91](#L91) | $apbct->save('remote\_calls'); |
| [92](#L92) |  |
| [93](#L93) | // Check Access key |
| [94](#L94) | if ( |
| [95](#L95) | ($token === strtolower(md5($apbct->api\_key)) || |
| [96](#L96) | $token === strtolower(hash('sha256', $apbct->api\_key))) || |
| [97](#L97) | (self::checkWithoutToken() && self::isAllowedWithoutToken($action)) |
| [98](#L98) | ) { |
| [99](#L99) | // Flag to let plugin know that Remote Call is running. |
| [100](#L100) | $apbct->rc\_running = true; |
| [101](#L101) |  |
| [102](#L102) | $action = 'action\_\_' . $action; |
| [103](#L103) |  |
| [104](#L104) | if ( method\_exists(\_\_CLASS\_\_, $action) ) { |
| [105](#L105) | // Delay before perform action; |
| [106](#L106) | if ( Request::get('delay') ) { |
| [107](#L107) | sleep((int)Request::get('delay')); |
| [108](#L108) | $params = $\_REQUEST; |
| [109](#L109) | unset($params['delay']); |
| [110](#L110) |  |
| [111](#L111) | return Helper::httpRequestRcToHost( |
| [112](#L112) | Request::get('spbc\_remote\_action'), |
| [113](#L113) | $params, |
| [114](#L114) | array('async'), |
| [115](#L115) | false |
| [116](#L116) | ); |
| [117](#L117) | } |
| [118](#L118) | $out = self::$action(); |
| [119](#L119) | } else { |
| [120](#L120) | $out = 'FAIL ' . json\_encode(array('error' => 'UNKNOWN\_ACTION\_METHOD')); |
| [121](#L121) | } |
| [122](#L122) | } else { |
| [123](#L123) | $out = 'FAIL ' . json\_encode(array('error' => 'WRONG\_TOKEN')); |
| [124](#L124) | } |
| [125](#L125) | } else { |
| [126](#L126) | $out = 'FAIL ' . json\_encode(array('error' => 'TOO\_MANY\_ATTEMPTS')); |
| [127](#L127) | } |
| [128](#L128) | } else { |
| [129](#L129) | $out = 'FAIL ' . json\_encode(array('error' => 'UNKNOWN\_ACTION')); |
| [130](#L130) | } |
| [131](#L131) |  |
| [132](#L132) | if ( $out ) { |
| [133](#L133) | die($out); |
| [134](#L134) | } |
| [135](#L135) | } |
| [136](#L136) |  |
| [137](#L137) | /\*\* |
| [138](#L138) | \* Close renew banner |
| [139](#L139) | \* |
| [140](#L140) | \* @return string |
| [141](#L141) | \*/ |
| [142](#L142) | public static function action\_\_close\_renew\_banner() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [143](#L143) | { |
| [144](#L144) | global $apbct; |
| [145](#L145) |  |
| [146](#L146) | $apbct->data['notice\_trial'] = 0; |
| [147](#L147) | $apbct->data['notice\_renew'] = 0; |
| [148](#L148) | $apbct->saveData(); |
| [149](#L149) | $cron = new Cron(); |
| [150](#L150) | $cron->updateTask('check\_account\_status', 'ct\_account\_status\_check', 86400); |
| [151](#L151) |  |
| [152](#L152) | return 'OK'; |
| [153](#L153) | } |
| [154](#L154) |  |
| [155](#L155) | /\*\* |
| [156](#L156) | \* SFW update |
| [157](#L157) | \* |
| [158](#L158) | \* @return void |
| [159](#L159) | \* |
| [160](#L160) | \* @psalm-suppress UnusedVariable |
| [161](#L161) | \*/ |
| [162](#L162) | public static function action\_\_sfw\_update() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [163](#L163) | { |
| [164](#L164) | global $apbct; |
| [165](#L165) | $result = apbct\_sfw\_update\_\_init(); |
| [166](#L166) | $apbct->errorToggle(! empty($result['error']), 'sfw\_update', $result); |
| [167](#L167) | die(empty($result['error']) ? 'OK' : 'FAIL ' . json\_encode(array('error' => $result['error']))); |
| [168](#L168) | } |
| [169](#L169) |  |
| [170](#L170) | /\*\* |
| [171](#L171) | \* SFW update |
| [172](#L172) | \* |
| [173](#L173) | \* @return string |
| [174](#L174) | \* |
| [175](#L175) | \* @psalm-suppress UnusedVariable |
| [176](#L176) | \*/ |
| [177](#L177) | public static function action\_\_sfw\_update\_\_worker() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [178](#L178) | { |
| [179](#L179) | $result = apbct\_sfw\_update\_\_worker(); |
| [180](#L180) |  |
| [181](#L181) | if ( ! empty($result['error']) ) { |
| [182](#L182) | SFWUpdateHelper::cleanData(); |
| [183](#L183) |  |
| [184](#L184) | die('FAIL ' . json\_encode(array('error' => $result['error']))); |
| [185](#L185) | } |
| [186](#L186) |  |
| [187](#L187) | die('OK'); |
| [188](#L188) | } |
| [189](#L189) |  |
| [190](#L190) | /\*\* |
| [191](#L191) | \* SFW send logs |
| [192](#L192) | \* |
| [193](#L193) | \* @return array|bool|int[]|string[] |
| [194](#L194) | \*/ |
| [195](#L195) | public static function action\_\_sfw\_send\_logs() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [196](#L196) | { |
| [197](#L197) | return ct\_sfw\_send\_logs(); |
| [198](#L198) | } |
| [199](#L199) |  |
| [200](#L200) | public static function action\_\_private\_record\_add() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [201](#L201) | { |
| [202](#L202) | return apbct\_sfw\_private\_records\_handler('add'); |
| [203](#L203) | } |
| [204](#L204) |  |
| [205](#L205) | public static function action\_\_private\_record\_delete() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [206](#L206) | { |
| [207](#L207) | return apbct\_sfw\_private\_records\_handler('delete'); |
| [208](#L208) | } |
| [209](#L209) |  |
| [210](#L210) | /\*\* |
| [211](#L211) | \* Handle remote call action "run\_service\_template\_get". |
| [212](#L212) | \* @return string |
| [213](#L213) | \* @throws \InvalidArgumentException |
| [214](#L214) | \*/ |
| [215](#L215) | public static function action\_\_run\_service\_template\_get() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [216](#L216) | { |
| [217](#L217) |  |
| [218](#L218) | global $apbct; |
| [219](#L219) | $error\_hat = 'apbct\_run\_service\_template\_get: '; |
| [220](#L220) |  |
| [221](#L221) | if ( empty($apbct->api\_key) ) { |
| [222](#L222) | throw new \InvalidArgumentException($error\_hat . 'api key not found'); |
| [223](#L223) | } |
| [224](#L224) | /\*\* |
| [225](#L225) | \* $template\_id validation |
| [226](#L226) | \*/ |
| [227](#L227) | $template\_id = Request::get('template\_id'); |
| [228](#L228) |  |
| [229](#L229) | if ( empty($template\_id) || !is\_string($template\_id) ) { |
| [230](#L230) | throw new \InvalidArgumentException($error\_hat . 'bad param template\_id'); |
| [231](#L231) | } |
| [232](#L232) |  |
| [233](#L233) | /\*\* |
| [234](#L234) | \* Run and validate API method service\_template\_get |
| [235](#L235) | \*/ |
| [236](#L236) | $options\_template\_data = apbct\_validate\_api\_response\_\_service\_template\_get( |
| [237](#L237) | $template\_id, |
| [238](#L238) | API::methodServicesTemplatesGet($apbct->api\_key) |
| [239](#L239) | ); |
| [240](#L240) |  |
| [241](#L241) | return apbct\_rc\_\_service\_template\_set($template\_id, $options\_template\_data, $apbct->api\_key); |
| [242](#L242) | } |
| [243](#L243) |  |
| [244](#L244) | /\*\* |
| [245](#L245) | \* Install plugin |
| [246](#L246) | \*/ |
| [247](#L247) | public static function action\_\_install\_plugin() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [248](#L248) | { |
| [249](#L249) | add\_action('wp', 'apbct\_rc\_\_install\_plugin', 1); |
| [250](#L250) | } |
| [251](#L251) |  |
| [252](#L252) | /\*\* |
| [253](#L253) | \* Activate plugin |
| [254](#L254) | \*/ |
| [255](#L255) | public static function action\_\_activate\_plugin() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [256](#L256) | { |
| [257](#L257) | return apbct\_rc\_\_activate\_plugin(Request::get('plugin')); |
| [258](#L258) | } |
| [259](#L259) |  |
| [260](#L260) | /\*\* |
| [261](#L261) | \* Update settins |
| [262](#L262) | \*/ |
| [263](#L263) | public static function action\_\_update\_settings() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [264](#L264) | { |
| [265](#L265) | return apbct\_rc\_\_update\_settings($\_REQUEST); |
| [266](#L266) | } |
| [267](#L267) |  |
| [268](#L268) | /\*\* |
| [269](#L269) | \* Deactivate plugin |
| [270](#L270) | \*/ |
| [271](#L271) | public static function action\_\_deactivate\_plugin() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [272](#L272) | { |
| [273](#L273) | add\_action('plugins\_loaded', 'apbct\_rc\_\_deactivate\_plugin', 1); |
| [274](#L274) | } |
| [275](#L275) |  |
| [276](#L276) | /\*\* |
| [277](#L277) | \* Uninstall plugin |
| [278](#L278) | \*/ |
| [279](#L279) | public static function action\_\_uninstall\_plugin() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [280](#L280) | { |
| [281](#L281) | add\_action('plugins\_loaded', 'apbct\_rc\_\_uninstall\_plugin', 1); |
| [282](#L282) | } |
| [283](#L283) |  |
| [284](#L284) | public static function action\_\_debug() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [285](#L285) | { |
| [286](#L286) | global $apbct, $wpdb; |
| [287](#L287) |  |
| [288](#L288) | $sfw\_table\_name = !empty($apbct->data['sfw\_common\_table\_name']) ? $apbct->data['sfw\_common\_table\_name'] : APBCT\_TBL\_FIREWALL\_DATA; |
| [289](#L289) |  |
| [290](#L290) | $out['sfw\_data\_base\_size'] = $wpdb->get\_var('SELECT COUNT(\*) FROM ' . $sfw\_table\_name); |
| [291](#L291) | $out['stats']              = $apbct->stats; |
| [292](#L292) | $out['settings']           = self::getSettings($apbct->settings); |
| [293](#L293) | $out['fw\_stats']           = $apbct->fw\_stats; |
| [294](#L294) | $out['data']               = $apbct->data; |
| [295](#L295) | $out['cron']               = $apbct->cron; |
| [296](#L296) | $out['errors']             = $apbct->errors; |
| [297](#L297) | $out['debug']              = $apbct->debug; |
| [298](#L298) | $out['queue']              = get\_option('cleantalk\_sfw\_update\_queue'); |
| [299](#L299) | $out['connection\_reports'] = $apbct->getConnectionReports()->remoteCallOutput(); |
| [300](#L300) | $out['cache\_plugins\_detected'] = apbct\_is\_cache\_plugins\_exists(true); |
| [301](#L301) |  |
| [302](#L302) | if ( APBCT\_WPMS ) { |
| [303](#L303) | $out['network\_settings'] = $apbct->network\_settings; |
| [304](#L304) | $out['network\_data']     = $apbct->network\_data; |
| [305](#L305) | } |
| [306](#L306) |  |
| [307](#L307) | // Output only one option |
| [308](#L308) | $show\_only = Get::get('show\_only'); |
| [309](#L309) | if ( $show\_only && isset($out[$show\_only]) ) { |
| [310](#L310) | /\*\* |
| [311](#L311) | \* @psalm-suppress InvalidArrayOffset |
| [312](#L312) | \*/ |
| [313](#L313) | $out = [$show\_only => $out[$show\_only]]; |
| [314](#L314) | } |
| [315](#L315) |  |
| [316](#L316) | if ( Request::equal('out', 'json') ) { |
| [317](#L317) | die(json\_encode($out)); |
| [318](#L318) | } |
| [319](#L319) | array\_walk($out, function (&$val, $\_key) { |
| [320](#L320) | $val = (array)$val; |
| [321](#L321) | }); |
| [322](#L322) |  |
| [323](#L323) | array\_walk\_recursive($out, function (&$val, $\_key) { |
| [324](#L324) | if ( is\_int($val) && preg\_match('@^\d{9,11}$@', (string)$val) ) { |
| [325](#L325) | $val = date('Y-m-d H:i:s', $val); |
| [326](#L326) | } |
| [327](#L327) | }); |
| [328](#L328) |  |
| [329](#L329) |  |
| [330](#L330) | $out = print\_r($out, true); |
| [331](#L331) | $out = str\_replace("\n", "<br>", $out); |
| [332](#L332) | $out = preg\_replace("/[^\S]{4}/", "&nbsp;&nbsp;&nbsp;&nbsp;", $out); |
| [333](#L333) |  |
| [334](#L334) | die($out); |
| [335](#L335) | } |
| [336](#L336) |  |
| [337](#L337) | /\*\* |
| [338](#L338) | \* The 'Cron::updateTask' remote call handler |
| [339](#L339) | \*/ |
| [340](#L340) | public static function action\_\_cron\_update\_task() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [341](#L341) | { |
| [342](#L342) | $update\_result = false; |
| [343](#L343) |  |
| [344](#L344) | if ( |
| [345](#L345) | Request::get('task') && |
| [346](#L346) | Request::get('handler') && |
| [347](#L347) | Request::get('period') && |
| [348](#L348) | Request::get('first\_call') |
| [349](#L349) | ) { |
| [350](#L350) | $cron          = new Cron(); |
| [351](#L351) | $update\_result = $cron->updateTask( |
| [352](#L352) | Request::get('task'), |
| [353](#L353) | Request::get('handler'), |
| [354](#L354) | (int)Request::get('period'), |
| [355](#L355) | (int)Request::get('first\_call') |
| [356](#L356) | ); |
| [357](#L357) | } |
| [358](#L358) |  |
| [359](#L359) | die($update\_result ? 'OK' : 'FAIL'); |
| [360](#L360) | } |
| [361](#L361) |  |
| [362](#L362) | public static function action\_\_post\_api\_key() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [363](#L363) | { |
| [364](#L364) | global $apbct; |
| [365](#L365) |  |
| [366](#L366) | if ( ! headers\_sent() ) { |
| [367](#L367) | header("Content-Type: application/json"); |
| [368](#L368) | } |
| [369](#L369) |  |
| [370](#L370) | $key = trim(Request::get('api\_key')); |
| [371](#L371) | if ( ! apbct\_api\_key\_\_is\_correct($key) ) { |
| [372](#L372) | die(json\_encode(['FAIL' => ['error' => 'Api key is incorrect']])); |
| [373](#L373) | } |
| [374](#L374) |  |
| [375](#L375) | require\_once APBCT\_DIR\_PATH . 'inc/cleantalk-settings.php'; |
| [376](#L376) |  |
| [377](#L377) | $template\_id = Request::get('apply\_template\_id'); |
| [378](#L378) | if ( ! empty($template\_id) ) { |
| [379](#L379) | $templates = CleantalkSettingsTemplates::getOptionsTemplate($key); |
| [380](#L380) | if ( ! empty($templates) ) { |
| [381](#L381) | foreach ( $templates as $template ) { |
| [382](#L382) | if ( $template['template\_id'] == $template\_id && ! empty($template['options\_site']) ) { |
| [383](#L383) | $template\_name = $template['template\_id']; |
| [384](#L384) | $settings      = $template['options\_site']; |
| [385](#L385) | $settings      = array\_replace((array)$apbct->settings, json\_decode($settings, true)); |
| [386](#L386) |  |
| [387](#L387) | $settings = \apbct\_settings\_\_validate($settings); |
| [388](#L388) |  |
| [389](#L389) | $apbct->settings = $settings; |
| [390](#L390) | $apbct->save('settings'); |
| [391](#L391) | $apbct->data['current\_settings\_template\_id']   = $template\_id; |
| [392](#L392) | $apbct->data['current\_settings\_template\_name'] = $template\_name; |
| [393](#L393) | $apbct->save('data'); |
| [394](#L394) | break; |
| [395](#L395) | } |
| [396](#L396) | } |
| [397](#L397) | } |
| [398](#L398) | } |
| [399](#L399) |  |
| [400](#L400) | $apbct->storage['settings']['apikey'] = $key; |
| [401](#L401) | $apbct->api\_key                       = $key; |
| [402](#L402) | $apbct->key\_is\_ok                     = true; |
| [403](#L403) | $apbct->save('settings'); |
| [404](#L404) |  |
| [405](#L405) | \apbct\_settings\_\_sync(true); |
| [406](#L406) |  |
| [407](#L407) | die(json\_encode(['OK' => ['template\_id' => $template\_id]])); |
| [408](#L408) | } |
| [409](#L409) |  |
| [410](#L410) | public static function action\_\_rest\_check() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [411](#L411) | { |
| [412](#L412) | $nonce = Post::get('\_rest\_nonce'); |
| [413](#L413) | if ( ! $nonce ) { |
| [414](#L414) | throw new \Exception('The nonce is not provided'); |
| [415](#L415) | } |
| [416](#L416) | $request = new \WP\_REST\_Request('POST', '/cleantalk-antispam/v1/apbct\_rest\_check'); |
| [417](#L417) | $request->set\_header('x\_wp\_nonce', $nonce); |
| [418](#L418) | $response = rest\_do\_request($request); |
| [419](#L419) | $server = rest\_get\_server(); |
| [420](#L420) | $data = $server->response\_to\_data($response, false); |
| [421](#L421) | return wp\_json\_encode($data); |
| [422](#L422) | } |
| [423](#L423) |  |
| [424](#L424) | private static function getSettings($settings) |
| [425](#L425) | { |
| [426](#L426) | $titles = array( |
| [427](#L427) | 'apikey' => 'Access key', |
| [428](#L428) | 'forms\_\_registrations\_test' => 'Registration Forms', |
| [429](#L429) | 'forms\_\_comments\_test' => 'Comments form', |
| [430](#L430) | 'forms\_\_contact\_forms\_test' => 'Contact Forms', |
| [431](#L431) | 'forms\_\_flamingo\_save\_spam' => 'Save Flamingo spam entries', |
| [432](#L432) | 'forms\_\_general\_contact\_forms\_test' => 'Custom contact forms', |
| [433](#L433) | 'forms\_\_search\_test' => 'Test default WordPress search form for spam', |
| [434](#L434) | 'forms\_\_check\_external' => 'Protect external forms', |
| [435](#L435) | 'forms\_\_check\_external\_\_capture\_buffer' => 'Capture buffer', |
| [436](#L436) | 'forms\_\_check\_internal' => 'Protect internal forms', |
| [437](#L437) | 'forms\_\_wc\_checkout\_test' => 'WooCommerce checkout form', |
| [438](#L438) | 'forms\_\_wc\_register\_from\_order' => 'Spam test for registration during checkout', |
| [439](#L439) | 'forms\_\_wc\_add\_to\_cart' => 'Check anonymous users when they add new items to the cart', |
| [440](#L440) | 'data\_\_wc\_store\_blocked\_orders' => 'Store blocked orders', |
| [441](#L441) | 'comments\_\_disable\_comments\_\_all' => 'Disable all comments', |
| [442](#L442) | 'comments\_\_disable\_comments\_\_posts' => 'Disable comments for all posts', |
| [443](#L443) | 'comments\_\_disable\_comments\_\_pages' => 'Disable comments for all pages', |
| [444](#L444) | 'comments\_\_disable\_comments\_\_media' => 'Disable comments for all media', |
| [445](#L445) | 'comments\_\_bp\_private\_messages' => 'BuddyPress Private Messages', |
| [446](#L446) | 'comments\_\_remove\_old\_spam' => 'Automatically delete spam comments', |
| [447](#L447) | 'comments\_\_remove\_comments\_links' => 'Remove links from approved comments', |
| [448](#L448) | 'comments\_\_show\_check\_links' => 'Show links to check Emails, IPs for spam', |
| [449](#L449) | 'comments\_\_manage\_comments\_on\_public\_page' => 'Manage comments on public pages', |
| [450](#L450) | 'data\_\_protect\_logged\_in' => 'Protect logged in Users', |
| [451](#L451) | 'comments\_\_check\_comments\_number' => "Don't check trusted user's comments", |
| [452](#L452) | 'data\_\_use\_ajax' => 'Use AJAX for JavaScript check', |
| [453](#L453) | 'data\_\_use\_static\_js\_key' => 'Use static keys for JavaScript check', |
| [454](#L454) | 'data\_\_general\_postdata\_test' => 'Check all post data', |
| [455](#L455) | 'data\_\_set\_cookies' => 'Set cookies', |
| [456](#L456) | 'data\_\_bot\_detector\_enabled' => 'Use JavaScript library', |
| [457](#L457) | 'exclusions\_\_bot\_detector' => 'JavaScript Library Exclusions', |
| [458](#L458) | 'exclusions\_\_bot\_detector\_\_form\_attributes' => 'Exclude any forms that has attribute matches', |
| [459](#L459) | 'exclusions\_\_bot\_detector\_\_form\_children\_attributes' => 'Exclude any forms that includes a child element with attribute matches', |
| [460](#L460) | 'exclusions\_\_bot\_detector\_\_form\_parent\_attributes' => 'Exclude any forms that includes a parent element with attribute matches', |
| [461](#L461) | 'wp\_\_use\_builtin\_http\_api' => 'Use WordPress HTTP API', |
| [462](#L462) | 'data\_\_pixel' => 'Add a Pixel to improve IP-detection', |
| [463](#L463) | 'data\_\_email\_check\_before\_post' => 'Check email before POST request', |
| [464](#L464) | 'data\_\_email\_check\_exist\_post' => 'Check email before POST request', |
| [465](#L465) | 'data\_\_honeypot\_field' => 'Add a honeypot field', |
| [466](#L466) | 'data\_\_email\_decoder' => 'Encode contact data', |
| [467](#L467) | 'data\_\_email\_decoder\_buffer' => 'Use the output buffer', |
| [468](#L468) | 'exclusions\_\_log\_excluded\_requests' => 'Log excluded requests', |
| [469](#L469) | 'exclusions\_\_urls' => 'URL exclusions', |
| [470](#L470) | 'exclusions\_\_urls\_\_use\_regexp' => 'Use Regular Expression in URL Exclusions', |
| [471](#L471) | 'exclusions\_\_fields' => 'Field Name Exclusions', |
| [472](#L472) | 'exclusions\_\_fields\_\_use\_regexp' => 'Use Regular Expression in Field Exclusions', |
| [473](#L473) | 'exclusions\_\_form\_signs' => 'Form Signs Exclusions', |
| [474](#L474) | 'exclusions\_\_roles' => 'Roles Exclusions', |
| [475](#L475) | 'admin\_bar\_\_show' => 'Show statistics in admin bar', |
| [476](#L476) | 'admin\_bar\_\_all\_time\_counter' => 'Show All-time counter', |
| [477](#L477) | 'admin\_bar\_\_daily\_counter' => 'Show 24 hours counter', |
| [478](#L478) | 'admin\_bar\_\_sfw\_counter' => 'SpamFireWall counter', |
| [479](#L479) | 'sfw\_\_random\_get' => 'Uniq GET option', |
| [480](#L480) | 'sfw\_\_custom\_logo' => 'Custom logo on SpamFireWall blocking pages', |
| [481](#L481) | 'sfw\_\_anti\_crawler' => 'Anti-Crawler', |
| [482](#L482) | 'sfw\_\_anti\_flood' => 'Anti-Flood', |
| [483](#L483) | 'sfw\_\_anti\_flood\_\_view\_limit' => 'Anti-Flood Page Views Limit', |
| [484](#L484) | 'misc\_\_send\_connection\_reports' => 'Send connection reports', |
| [485](#L485) | 'misc\_\_async\_js' => 'Async JavaScript loading', |
| [486](#L486) | 'misc\_\_store\_urls' => 'Store visited URLs', |
| [487](#L487) | 'wp\_\_comment\_notify' => 'Plugin stores last 5 visited URLs', |
| [488](#L488) | 'wp\_\_comment\_notify\_\_roles' => 'wp\_\_comment\_notify\_\_roles', |
| [489](#L489) | 'wp\_\_dashboard\_widget\_\_show' => 'Show Dashboard Widget', |
| [490](#L490) | 'misc\_\_complete\_deactivation' => 'Complete deactivation', |
| [491](#L491) | 'trusted\_and\_affiliate\_\_shortcode' => 'Shortcode', |
| [492](#L492) | 'trusted\_and\_affiliate\_\_shortcode\_tag' => 'Copy this text and place shortcode wherever you need', |
| [493](#L493) | 'trusted\_and\_affiliate\_\_footer' => 'Add to the footer', |
| [494](#L494) | 'trusted\_and\_affiliate\_\_under\_forms' => 'Add under forms', |
| [495](#L495) | 'trusted\_and\_affiliate\_\_add\_id' => 'Append your affiliate ID', |
| [496](#L496) | 'multisite\_\_work\_mode' => 'WordPress Multisite Work Mode', |
| [497](#L497) | 'multisite\_\_hoster\_api\_key' => 'Hoster Access key', |
| [498](#L498) | 'multisite\_\_white\_label' => 'Enable White Label Mode', |
| [499](#L499) | 'multisite\_\_white\_label\_\_plugin\_name' => 'Plugin name', |
| [500](#L500) | 'multisite\_\_allow\_custom\_settings' => 'Allow users to manage plugin settings', |
| [501](#L501) | 'multisite\_\_use\_settings\_template' => 'Use settings template', |
| [502](#L502) | 'multisite\_\_use\_settings\_template\_apply\_for\_new' => 'Apply for newly added sites', |
| [503](#L503) | 'multisite\_\_use\_settings\_template\_apply\_for\_current' => 'Apply for current sites', |
| [504](#L504) | 'multisite\_\_use\_settings\_template\_apply\_for\_current\_list\_sites' => 'Sites to apply settings', |
| [505](#L505) | ); |
| [506](#L506) |  |
| [507](#L507) | $out = []; |
| [508](#L508) |  |
| [509](#L509) | foreach ($settings as $key => $value) { |
| [510](#L510) | if (isset($titles[$key])) { |
| [511](#L511) | $out[$key . ' - ' . $titles[$key]] = $value; |
| [512](#L512) | continue; |
| [513](#L513) | } |
| [514](#L514) | $out[$key] = $value; |
| [515](#L515) | } |
| [516](#L516) |  |
| [517](#L517) | return $out; |
| [518](#L518) | } |
| [519](#L519) |  |
| [520](#L520) | /\*\* |
| [521](#L521) | \* Returns the fresh WP nonce depending on the AJAX type (rest/admin\_ajax). |
| [522](#L522) | \* @return string |
| [523](#L523) | \*/ |
| [524](#L524) | public static function action\_\_get\_fresh\_wpnonce() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [525](#L525) | { |
| [526](#L526) | if ( ! isset($\_POST['nonce\_prev']) ) { |
| [527](#L527) | return json\_encode(array('error' => 'No nonce provided')); |
| [528](#L528) | } |
| [529](#L529) |  |
| [530](#L530) | $nonce\_prev = $\_POST['nonce\_prev']; |
| [531](#L531) | $nonce\_name = apbct\_settings\_\_get\_ajax\_type() === 'rest' |
| [532](#L532) | ? 'wp\_rest' |
| [533](#L533) | : 'ct\_secret\_stuff'; |
| [534](#L534) |  |
| [535](#L535) | // Check $nonce\_prev by regexp '^[a-f0-9]{10}$' |
| [536](#L536) | if ( ! preg\_match('/^[a-f0-9]{10}$/', $nonce\_prev) ) { |
| [537](#L537) | return json\_encode(array('error' => 'Wrong nonce provided')); |
| [538](#L538) | } |
| [539](#L539) |  |
| [540](#L540) | // set response type 'json' |
| [541](#L541) | header('Content-Type: application/json'); |
| [542](#L542) | return TT::toString( |
| [543](#L543) | json\_encode( |
| [544](#L544) | array( |
| [545](#L545) | 'wpnonce' => TT::toString(wp\_create\_nonce($nonce\_name)) |
| [546](#L546) | ) |
| [547](#L547) | ) |
| [548](#L548) | ); |
| [549](#L549) | } |
| [550](#L550) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php?format=txt)
* [Original Format](/export/3222464/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_d6580362_20250114_201129.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3188546%2Fcleantalk-spam-protect)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3179819/cleantalk-spam-protect "Changeset 3179819 for cleantalk-spam-protect")
* [Next Change](/changeset/3189396/cleantalk-spam-protect "Changeset 3189396 for cleantalk-spam-protect") →

---

# Changeset [3188546](/changeset/3188546 "Show full changeset") for [cleantalk-spam-protect](/browser/cleantalk-spam-protect?rev=3188546 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
11/14/2024 10:28:14 AM
([2 months](/timeline?from=2024-11-14T10%3A28%3A14Z&precision=second "See timeline at 11/14/2024 10:28:14 AM") ago)

Author:
alexandergull
Message:

Update to 6.45

Location:
[cleantalk-spam-protect](/browser/cleantalk-spam-protect?rev=3188546)
Files:

607 added
53 edited

* [tags/6.45](/browser/cleantalk-spam-protect/tags/6.45?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/changelog.txt](/browser/cleantalk-spam-protect/tags/6.45/changelog.txt?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/cleantalk.php](/browser/cleantalk-spam-protect/tags/6.45/cleantalk.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css](/browser/cleantalk-spam-protect/tags/6.45/css?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/cleantalk-admin-settings-page.min.css](/browser/cleantalk-spam-protect/tags/6.45/css/cleantalk-admin-settings-page.min.css?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/cleantalk-admin.min.css](/browser/cleantalk-spam-protect/tags/6.45/css/cleantalk-admin.min.css?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/cleantalk-dashboard-widget.min.css](/browser/cleantalk-spam-protect/tags/6.45/css/cleantalk-dashboard-widget.min.css?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/cleantalk-email-decoder.min.css](/browser/cleantalk-spam-protect/tags/6.45/css/cleantalk-email-decoder.min.css?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/cleantalk-icons.min.css](/browser/cleantalk-spam-protect/tags/6.45/css/cleantalk-icons.min.css?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/cleantalk-public-admin.min.css](/browser/cleantalk-spam-protect/tags/6.45/css/cleantalk-public-admin.min.css?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/cleantalk-public.min.css](/browser/cleantalk-spam-protect/tags/6.45/css/cleantalk-public.min.css?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/cleantalk-spam-check.min.css](/browser/cleantalk-spam-protect/tags/6.45/css/cleantalk-spam-check.min.css?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/fonts](/browser/cleantalk-spam-protect/tags/6.45/css/fonts?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/fonts/icons](/browser/cleantalk-spam-protect/tags/6.45/css/fonts/icons?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/fonts/icons/icons.eot](/browser/cleantalk-spam-protect/tags/6.45/css/fonts/icons/icons.eot?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/fonts/icons/icons.svg](/browser/cleantalk-spam-protect/tags/6.45/css/fonts/icons/icons.svg?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/fonts/icons/icons.ttf](/browser/cleantalk-spam-protect/tags/6.45/css/fonts/icons/icons.ttf?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/fonts/icons/icons.woff](/browser/cleantalk-spam-protect/tags/6.45/css/fonts/icons/icons.woff?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/fonts/icons/icons.woff2](/browser/cleantalk-spam-protect/tags/6.45/css/fonts/icons/icons.woff2?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/fonts/icons/index.php](/browser/cleantalk-spam-protect/tags/6.45/css/fonts/icons/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/fonts/index.php](/browser/cleantalk-spam-protect/tags/6.45/css/fonts/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images](/browser/cleantalk-spam-protect/tags/6.45/css/images?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/bad\_email.svg](/browser/cleantalk-spam-protect/tags/6.45/css/images/bad_email.svg?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/cancel.svg](/browser/cleantalk-spam-protect/tags/6.45/css/images/cancel.svg?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/checking\_email.gif](/browser/cleantalk-spam-protect/tags/6.45/css/images/checking_email.gif?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/good\_email.svg](/browser/cleantalk-spam-protect/tags/6.45/css/images/good_email.svg?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/index.php](/browser/cleantalk-spam-protect/tags/6.45/css/images/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/menu.svg](/browser/cleantalk-spam-protect/tags/6.45/css/images/menu.svg?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/real\_user.svg](/browser/cleantalk-spam-protect/tags/6.45/css/images/real_user.svg?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/shield.svg](/browser/cleantalk-spam-protect/tags/6.45/css/images/shield.svg?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/ui-icons\_444444\_256x240.png](/browser/cleantalk-spam-protect/tags/6.45/css/images/ui-icons_444444_256x240.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/ui-icons\_555555\_256x240.png](/browser/cleantalk-spam-protect/tags/6.45/css/images/ui-icons_555555_256x240.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/ui-icons\_777620\_256x240.png](/browser/cleantalk-spam-protect/tags/6.45/css/images/ui-icons_777620_256x240.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/ui-icons\_777777\_256x240.png](/browser/cleantalk-spam-protect/tags/6.45/css/images/ui-icons_777777_256x240.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/ui-icons\_cc0000\_256x240.png](/browser/cleantalk-spam-protect/tags/6.45/css/images/ui-icons_cc0000_256x240.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/images/ui-icons\_ffffff\_256x240.png](/browser/cleantalk-spam-protect/tags/6.45/css/images/ui-icons_ffffff_256x240.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/index.php](/browser/cleantalk-spam-protect/tags/6.45/css/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/jquery-ui.min.css](/browser/cleantalk-spam-protect/tags/6.45/css/jquery-ui.min.css?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/css/jquery-ui.theme.min.css](/browser/cleantalk-spam-protect/tags/6.45/css/jquery-ui.theme.min.css?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n](/browser/cleantalk-spam-protect/tags/6.45/i18n?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk-da\_DK.mo](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk-da_DK.mo?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk-de\_DE.mo](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk-de_DE.mo?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk-en\_US.mo](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk-en_US.mo?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk-es\_ES.mo](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk-es_ES.mo?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk-fr\_FR.mo](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk-fr_FR.mo?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk-it\_IT.mo](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk-it_IT.mo?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk-pl\_PL.mo](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk-pl_PL.mo?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk-pt\_PT.mo](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk-pt_PT.mo?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk-ru\_RU.mo](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk-ru_RU.mo?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk-ru\_RU.po](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk-ru_RU.po?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk-spam-protect-nl\_NL.mo](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk-spam-protect-nl_NL.mo?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk-spam-protect-nl\_NL.po](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk-spam-protect-nl_NL.po?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/cleantalk.pot](/browser/cleantalk-spam-protect/tags/6.45/i18n/cleantalk.pot?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/i18n/index.php](/browser/cleantalk-spam-protect/tags/6.45/i18n/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc](/browser/cleantalk-spam-protect/tags/6.45/inc?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-admin.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-admin.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-ajax.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-ajax.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-common.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-common.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-find-spam.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-find-spam.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-pluggable.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-pluggable.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-public-integrations.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-public-integrations.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-public-validate-skip-functions.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-public-validate-skip-functions.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-public-validate.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-public-validate.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-public.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-public.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-settings.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-settings.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-updater.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-updater.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-wc-spam-orders.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-wc-spam-orders.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/cleantalk-wpcli.php](/browser/cleantalk-spam-protect/tags/6.45/inc/cleantalk-wpcli.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images](/browser/cleantalk-spam-protect/tags/6.45/inc/images?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/a1.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/a1.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ad.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ad.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ae.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ae.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/af.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/af.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ag.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ag.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ai.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ai.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/al.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/al.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/am.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/am.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/an.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/an.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ao.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ao.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ar.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ar.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/as.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/as.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/at.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/at.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/au.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/au.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/aw.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/aw.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ax.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ax.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/az.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/az.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ba.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ba.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bb.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bb.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bd.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bd.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/be.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/be.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bf.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bf.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bg.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bg.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bh.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bh.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bi.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bi.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bj.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bj.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bm.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bm.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bn.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bn.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bo.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bo.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/br.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/br.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bs.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bs.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bt.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bt.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bv.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bv.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bw.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bw.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/by.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/by.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/bz.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/bz.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ca.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ca.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/catalonia.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/catalonia.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cc.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cc.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cd.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cd.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cf.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cf.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cg.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cg.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ch.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ch.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ci.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ci.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ck.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ck.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cl.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cl.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cleantalk.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cleantalk.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cm.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cm.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cn.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cn.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/co.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/co.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cr.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cr.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cs.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cs.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cu.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cu.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cv.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cv.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cw.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cw.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cx.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cx.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cy.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cy.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/cz.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/cz.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/de.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/de.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/dj.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/dj.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/dk.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/dk.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/dm.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/dm.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/do.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/do.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/dz.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/dz.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ec.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ec.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ee.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ee.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/eg.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/eg.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/eh.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/eh.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/england.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/england.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/er.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/er.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/es.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/es.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/et.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/et.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/eu.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/eu.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/europeanunion.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/europeanunion.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/fam.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/fam.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/fi.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/fi.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/fj.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/fj.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/fk.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/fk.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/fm.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/fm.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/fo.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/fo.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/fr.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/fr.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ga.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ga.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gb.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gb.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gd.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gd.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ge.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ge.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gf.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gf.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gh.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gh.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gi.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gi.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gl.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gl.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gm.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gm.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gn.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gn.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gp.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gp.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gq.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gq.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gr.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gr.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gs.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gs.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gt.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gt.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gu.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gu.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gw.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gw.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/gy.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/gy.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/hk.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/hk.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/hm.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/hm.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/hn.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/hn.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/hr.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/hr.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ht.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ht.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/hu.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/hu.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/id.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/id.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ie.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ie.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/il.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/il.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/in.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/in.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/index.php](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/io.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/io.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/iq.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/iq.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ir.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ir.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/is.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/is.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/it.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/it.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/jm.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/jm.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/jo.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/jo.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/jp.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/jp.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ke.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ke.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/kg.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/kg.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/kh.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/kh.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ki.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ki.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/km.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/km.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/kn.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/kn.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/kp.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/kp.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/kr.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/kr.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/kw.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/kw.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ky.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ky.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/kz.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/kz.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/la.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/la.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/lb.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/lb.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/lc.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/lc.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/li.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/li.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/lk.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/lk.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/lr.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/lr.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ls.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ls.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/lt.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/lt.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/lu.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/lu.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/lv.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/lv.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ly.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ly.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ma.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ma.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mc.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mc.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/md.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/md.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/me.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/me.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mg.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mg.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mh.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mh.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mk.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mk.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ml.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ml.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mm.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mm.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mn.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mn.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mo.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mo.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mp.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mp.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mq.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mq.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mr.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mr.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ms.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ms.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mt.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mt.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mu.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mu.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mv.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mv.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mw.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mw.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mx.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mx.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/my.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/my.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/mz.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/mz.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/na.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/na.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/nc.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/nc.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ne.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ne.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/nf.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/nf.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ng.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ng.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ni.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ni.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/nl.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/nl.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/no.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/no.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/np.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/np.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/nr.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/nr.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/nu.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/nu.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/nz.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/nz.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/om.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/om.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/pa.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/pa.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/pe.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/pe.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/pf.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/pf.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/pg.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/pg.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ph.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ph.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/pk.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/pk.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/pl.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/pl.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/pm.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/pm.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/pn.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/pn.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/pr.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/pr.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ps.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ps.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/pt.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/pt.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/pw.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/pw.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/py.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/py.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/qa.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/qa.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/re.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/re.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ro.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ro.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/rs.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/rs.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ru.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ru.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/rw.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/rw.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sa.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sa.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sb.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sb.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sc.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sc.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/scotland.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/scotland.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sd.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sd.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/se.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/se.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sg.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sg.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sh.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sh.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/si.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/si.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sj.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sj.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sk.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sk.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sl.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sl.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sm.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sm.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sn.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sn.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/so.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/so.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sr.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sr.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/st.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/st.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sv.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sv.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sy.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sy.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/sz.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/sz.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tc.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tc.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/td.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/td.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tf.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tf.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tg.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tg.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/th.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/th.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tj.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tj.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tk.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tk.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tl.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tl.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tm.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tm.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tn.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tn.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/to.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/to.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tr.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tr.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tt.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tt.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tv.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tv.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tw.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tw.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/tz.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/tz.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ua.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ua.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ug.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ug.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/um.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/um.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/us.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/us.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/uy.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/uy.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/uz.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/uz.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/va.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/va.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/vc.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/vc.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ve.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ve.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/vg.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/vg.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/vi.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/vi.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/vn.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/vn.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/vu.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/vu.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/wales.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/wales.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/wf.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/wf.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ws.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ws.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/ye.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/ye.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/yt.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/yt.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/za.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/za.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/zm.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/zm.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/flags/zw.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/flags/zw.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/index.php](/browser/cleantalk-spam-protect/tags/6.45/inc/images/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/logo.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/logo.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/logo\_color.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/logo_color.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/logo\_small.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/logo_small.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/logo\_small1.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/logo_small1.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/new\_window.gif](/browser/cleantalk-spam-protect/tags/6.45/inc/images/new_window.gif?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/no.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/no.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/no\_gray.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/no_gray.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/placeholder.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/placeholder.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/preloader.gif](/browser/cleantalk-spam-protect/tags/6.45/inc/images/preloader.gif?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/preloader2.gif](/browser/cleantalk-spam-protect/tags/6.45/inc/images/preloader2.gif?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/yes.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/yes.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/yes2.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/yes2.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/images/yes\_gray.png](/browser/cleantalk-spam-protect/tags/6.45/inc/images/yes_gray.png?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/inc/index.php](/browser/cleantalk-spam-protect/tags/6.45/inc/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/index.php](/browser/cleantalk-spam-protect/tags/6.45/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js](/browser/cleantalk-spam-protect/tags/6.45/js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/apbct-disable-comments.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/apbct-disable-comments.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/apbct-disable-comments.min.js.map](/browser/cleantalk-spam-protect/tags/6.45/js/apbct-disable-comments.min.js.map?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/apbct-public--3--cleantalk-modal.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/apbct-public--3--cleantalk-modal.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/apbct-public--3--cleantalk-modal.min.js.map](/browser/cleantalk-spam-protect/tags/6.45/js/apbct-public--3--cleantalk-modal.min.js.map?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/apbct-public-bundle.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/apbct-public-bundle.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/apbct-public-bundle.min.js.map](/browser/cleantalk-spam-protect/tags/6.45/js/apbct-public-bundle.min.js.map?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-admin-settings-page.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-admin-settings-page.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-admin-settings-page.min.js.map](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-admin-settings-page.min.js.map?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-admin.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-admin.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-admin.min.js.map](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-admin.min.js.map?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-comments-checkspam.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-comments-checkspam.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-comments-checkspam.min.js.map](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-comments-checkspam.min.js.map?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-comments-editscreen.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-comments-editscreen.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-comments-editscreen.min.js.map](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-comments-editscreen.min.js.map?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-dashboard-widget--chartjs.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-dashboard-widget--chartjs.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-dashboard-widget.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-dashboard-widget.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-dashboard-widget.min.js.map](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-dashboard-widget.min.js.map?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-debug-ajax.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-debug-ajax.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-debug-ajax.min.js.map](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-debug-ajax.min.js.map?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-public-admin.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-public-admin.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-public-admin.min.js.map](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-public-admin.min.js.map?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-users-checkspam.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-users-checkspam.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-users-checkspam.min.js.map](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-users-checkspam.min.js.map?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-users-editscreen.min.js](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-users-editscreen.min.js?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/cleantalk-users-editscreen.min.js.map](/browser/cleantalk-spam-protect/tags/6.45/js/cleantalk-users-editscreen.min.js.map?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/js/index.php](/browser/cleantalk-spam-protect/tags/6.45/js/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib](/browser/cleantalk-spam-protect/tags/6.45/lib?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Cleantalk.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Cleantalk.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/CleantalkRequest.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/CleantalkRequest.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/CleantalkResponse.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/CleantalkResponse.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/DisableComments.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/DisableComments.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/EmailEncoder.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/EmailEncoder.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/AvadaBuilderFusionForm.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/AvadaBuilderFusionForm.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/BackInStockNotifier.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/BackInStockNotifier.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/BloomForms.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/BloomForms.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/BookingPress.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/BookingPress.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/CSCF.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/CSCF.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/CalculatedFieldsForm.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/CalculatedFieldsForm.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/ClassifiedListingRegister.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/ClassifiedListingRegister.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/CleantalkExternalForms.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/CleantalkExternalForms.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/CleantalkExternalFormsForceAjax.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/CleantalkExternalFormsForceAjax.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/CleantalkInternalForms.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/CleantalkInternalForms.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/CleantalkPreprocessComment.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/CleantalkPreprocessComment.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/CleantalkRegisterWidget.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/CleantalkRegisterWidget.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/CleantalkWpDieOnComment.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/CleantalkWpDieOnComment.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/ContactBank.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/ContactBank.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/ContactFormPlugin.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/ContactFormPlugin.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/EaelLoginRegister.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/EaelLoginRegister.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/EasyDigitalDownloads.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/EasyDigitalDownloads.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/ElementorPro.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/ElementorPro.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/ElementorUltimateAddonsRegister.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/ElementorUltimateAddonsRegister.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/ElfsightContactForm.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/ElfsightContactForm.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/EstimationForm.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/EstimationForm.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/EventsManager.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/EventsManager.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/FluentBookingPro.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/FluentBookingPro.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/FluentForm.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/FluentForm.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/Forminator.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/Forminator.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/GiveWP.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/GiveWP.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/Hustle.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/Hustle.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/IndeedUltimateMembershipPro.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/IndeedUltimateMembershipPro.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/IntegrationBase.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/IntegrationBase.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/JobstackThemeRegistration.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/JobstackThemeRegistration.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/KadenceBlocks.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/KadenceBlocks.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/KadenceBlocksAdvanced.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/KadenceBlocksAdvanced.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/KaliForms.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/KaliForms.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/LandingPageBuilder.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/LandingPageBuilder.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/LatePoint.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/LatePoint.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/LeadFormBuilder.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/LeadFormBuilder.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/LearnPress.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/LearnPress.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/MailChimp.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/MailChimp.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/MailPoet.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/MailPoet.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/MailPoet2.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/MailPoet2.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/MemberPress.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/MemberPress.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/ModernEventsCalendar.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/ModernEventsCalendar.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/NewUserApprove.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/NewUserApprove.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/NextendSocialLogin.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/NextendSocialLogin.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/OtterBlocksForm.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/OtterBlocksForm.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/OvaLogin.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/OvaLogin.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/PaidMembershipPro.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/PaidMembershipPro.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/PiotnetAddonsForElementorPro.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/PiotnetAddonsForElementorPro.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/PlansoFormBuilder.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/PlansoFormBuilder.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/ProductEnquiryPro.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/ProductEnquiryPro.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/Rafflepress.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/Rafflepress.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/SendyWidgetPro.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/SendyWidgetPro.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/SimpleMembership.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/SimpleMembership.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/SmartForms.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/SmartForms.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/StrongTestimonials.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/StrongTestimonials.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/Supsystic.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/Supsystic.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/ThriveLeads.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/ThriveLeads.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/TourMasterOrder.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/TourMasterOrder.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/TourMasterRegister.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/TourMasterRegister.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/UlitmateFormBuilder.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/UlitmateFormBuilder.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/UserRegistrationPro.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/UserRegistrationPro.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/VisualFormBuilder.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/VisualFormBuilder.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/WPUserMeta.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/WPUserMeta.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/WordpressFileUpload.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/WordpressFileUpload.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/WpBookingSystem.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/WpBookingSystem.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/WpForo.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/WpForo.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/WpGeoDirectory.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/WpGeoDirectory.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/WpMembers.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/WpMembers.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/Wpdiscuz.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/Wpdiscuz.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/Integrations/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/Integrations/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Antispam/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Antispam/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/API.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/API.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Activator.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Activator.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/AdjustToEnv](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/AdjustToEnv?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/AdjustToEnv/AdjustToEnvAbstract.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/AdjustToEnv/AdjustToEnvAbstract.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/AdjustToEnv/AdjustToEnvLiteSpeedCache.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/AdjustToEnv/AdjustToEnvLiteSpeedCache.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/AdjustToEnv/AdjustToEnvW3TotalCache.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/AdjustToEnv/AdjustToEnvW3TotalCache.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/AdjustToEnvironmentHandler.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/AdjustToEnvironmentHandler.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/AdjustToEnvironmentSettings.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/AdjustToEnvironmentSettings.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/Exceptions](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/Exceptions?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/Exceptions/ExceptionReverseAdjustClassNotExists.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/Exceptions/ExceptionReverseAdjustClassNotExists.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/Exceptions/ExceptionReverseAdjustNotIntervention.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/AdjustToEnvironmentModule/Exceptions/ExceptionReverseAdjustNotIntervention.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/AdminNotices.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/AdminNotices.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Antispam](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Antispam?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Antispam/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Antispam/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/ApbctUniversalBanner.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/ApbctUniversalBanner.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/CleantalkListTable.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/CleantalkListTable.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/CleantalkRealPerson.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/CleantalkRealPerson.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/CleantalkSettingsTemplates.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/CleantalkSettingsTemplates.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/CleantalkUpgrader.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/CleantalkUpgrader.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/CleantalkUpgraderSkin.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/CleantalkUpgraderSkin.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/CleantalkUpgraderSkinDeprecated.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/CleantalkUpgraderSkinDeprecated.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/ConnectionReports.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/ConnectionReports.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Cron.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Cron.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/DB.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/DB.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Deactivator.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Deactivator.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Escape.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Escape.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/Checker.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/Checker.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanParameters.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanParameters.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanResponse.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanResponse.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsLogs.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsLogs.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsScan.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsScan.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersLogs.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersLogs.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersScan.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersScan.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/ListTable/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/Page.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/Page.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/UsersScanParameters.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/UsersScanParameters.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/UsersScanResponse.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/UsersScanResponse.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/FindSpam/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Firewall](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Firewall?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Firewall/AntiCrawler.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Firewall/AntiCrawler.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Firewall/AntiFlood.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Firewall/AntiFlood.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Firewall/SFW.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Firewall/SFW.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Firewall/SFWUpdateHelper.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Firewall/SFWUpdateHelper.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Firewall/SFWUpdateSentinel.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Firewall/SFWUpdateSentinel.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Firewall/die\_page\_anticrawler.html](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Firewall/die_page_anticrawler.html?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Firewall/die\_page\_antiflood.html](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Firewall/die_page_antiflood.html?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Firewall/die\_page\_sfw.html](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Firewall/die_page_sfw.html?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Firewall/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Firewall/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/GetFieldsAny.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/GetFieldsAny.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/HTTP](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/HTTP?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/HTTP/Request.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/HTTP/Request.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/HTTP/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/HTTP/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Helper.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Helper.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/JsErrorsReport.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/JsErrorsReport.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/LinkConstructor.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/LinkConstructor.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Localize](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Localize?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Localize/CtPublicFunctionsLocalize.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Localize/CtPublicFunctionsLocalize.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Localize/CtPublicLocalize.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Localize/CtPublicLocalize.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Localize/LocalizeHandler.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Localize/LocalizeHandler.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Localize/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Localize/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Queue.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Queue.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/RemoteCalls.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/RemoteCalls.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/RemoteCallsCounter.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/RemoteCallsCounter.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/RemoteCallsLogger.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/RemoteCallsLogger.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/RequestParameters](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/RequestParameters?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/RequestParameters/RequestParameters.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/RequestParameters/RequestParameters.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/RequestParameters/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/RequestParameters/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/RestController.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/RestController.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Sanitize.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Sanitize.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/State.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/State.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Transaction.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Transaction.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/UpdatePlugin](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/UpdatePlugin?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/UpdatePlugin/DbAnalyzer.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/UpdatePlugin/DbAnalyzer.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/UpdatePlugin/DbColumnCreator.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/UpdatePlugin/DbColumnCreator.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/UpdatePlugin/DbTablesCreator.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/UpdatePlugin/DbTablesCreator.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/UpdatePlugin/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/UpdatePlugin/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Validate.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Validate.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Variables](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Variables?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Variables/AltSessions.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Variables/AltSessions.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Variables/Cookie.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Variables/Cookie.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Variables/Get.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Variables/Get.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Variables/NoCookie.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Variables/NoCookie.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Variables/Post.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Variables/Post.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Variables/Request.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Variables/Request.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Variables/Server.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Variables/Server.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/Variables/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/Variables/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/WcSpamOrdersFunctions.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/WcSpamOrdersFunctions.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/WcSpamOrdersListTable.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/WcSpamOrdersListTable.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/ApbctWP/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/ApbctWP/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/API.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/API.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Arr.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Arr.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Compatibility.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Compatibility.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Cron.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Cron.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/DB.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/DB.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/DNS.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/DNS.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Escape.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Escape.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Firewall](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Firewall?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Firewall.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Firewall.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Firewall/FirewallModule.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Firewall/FirewallModule.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Firewall/FirewallModuleAbstract.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Firewall/FirewallModuleAbstract.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Firewall/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Firewall/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/HTTP](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/HTTP?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/HTTP/Request.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/HTTP/Request.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/HTTP/Response.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/HTTP/Response.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/HTTP/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/HTTP/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Helper.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Helper.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/LinkConstructor.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/LinkConstructor.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Queue.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Queue.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Sanitize.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Sanitize.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Schema.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Schema.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/State.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/State.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/TT.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/TT.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Transaction.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Transaction.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/UniversalBanner](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/UniversalBanner?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/UniversalBanner/BannerDataDto.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/UniversalBanner/BannerDataDto.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/UniversalBanner/UniversalBanner.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/UniversalBanner/UniversalBanner.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/UniversalBanner/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/UniversalBanner/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/UniversalBanner/universal\_banner\_template.html](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/UniversalBanner/universal_banner_template.html?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/UniversalBanner/universal\_banner\_without\_btn\_template.html](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/UniversalBanner/universal_banner_without_btn_template.html?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/Validate.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/Validate.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Common/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Common/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Templates](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Templates?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Templates/Multiton.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Templates/Multiton.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Templates/Singleton.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Templates/Singleton.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Templates/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Templates/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Variables](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Variables?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Variables/Cookie.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Variables/Cookie.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Variables/Get.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Variables/Get.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Variables/Post.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Variables/Post.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Variables/Request.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Variables/Request.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Variables/Server.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Variables/Server.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Variables/ServerVariables.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Variables/ServerVariables.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/Variables/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/Variables/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/Cleantalk/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/Cleantalk/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/autoloader.php](/browser/cleantalk-spam-protect/tags/6.45/lib/autoloader.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/cleantalk-php-patch.php](/browser/cleantalk-spam-protect/tags/6.45/lib/cleantalk-php-patch.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/lib/index.php](/browser/cleantalk-spam-protect/tags/6.45/lib/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/readme.txt](/browser/cleantalk-spam-protect/tags/6.45/readme.txt?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/templates](/browser/cleantalk-spam-protect/tags/6.45/templates?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/templates/empty\_comments.php](/browser/cleantalk-spam-protect/tags/6.45/templates/empty_comments.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/templates/index.php](/browser/cleantalk-spam-protect/tags/6.45/templates/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/templates/lock-pages](/browser/cleantalk-spam-protect/tags/6.45/templates/lock-pages?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/templates/lock-pages/index.php](/browser/cleantalk-spam-protect/tags/6.45/templates/lock-pages/index.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/templates/lock-pages/lock-page-ct-die.html](/browser/cleantalk-spam-protect/tags/6.45/templates/lock-pages/lock-page-ct-die.html?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/templates/real-user-badge](/browser/cleantalk-spam-protect/tags/6.45/templates/real-user-badge?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/templates/real-user-badge/real-user-badge-native-comments.html](/browser/cleantalk-spam-protect/tags/6.45/templates/real-user-badge/real-user-badge-native-comments.html?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/templates/real-user-badge/real-user-badge-woocommerce.html](/browser/cleantalk-spam-protect/tags/6.45/templates/real-user-badge/real-user-badge-woocommerce.html?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/templates/settings](/browser/cleantalk-spam-protect/tags/6.45/templates/settings?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/templates/settings/settings\_top\_info.php](/browser/cleantalk-spam-protect/tags/6.45/templates/settings/settings_top_info.php?rev=3188546 "Show entry in browser")
  (added)
* [tags/6.45/templates/translate\_banner.php](/browser/cleantalk-spam-protect/tags/6.45/templates/translate_banner.php?rev=3188546 "Show entry in browser")
  (added)
* [trunk/cleantalk.php](/browser/cleantalk-spam-protect/trunk/cleantalk.php?rev=3188546 "Show entry in browser")
  (modified)
  ([3 diffs](#file607 "Show differences"))
* [trunk/css/cleantalk-email-decoder.min.css](/browser/cleantalk-spam-protect/trunk/css/cleantalk-email-decoder.min.css?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file608 "Show differences"))
* [trunk/css/fonts/icons/icons.ttf](/browser/cleantalk-spam-protect/trunk/css/fonts/icons/icons.ttf?rev=3188546 "Show entry in browser")
  (modified)
  ([previous](/browser/cleantalk-spam-protect/trunk/css/fonts/icons/icons.ttf?rev=2165729 "Show previous version in browser"))
* [trunk/i18n/cleantalk-da\_DK.mo](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-da_DK.mo?rev=3188546 "Show entry in browser")
  (modified)
  ([previous](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-da_DK.mo?rev=1303309 "Show previous version in browser"))
* [trunk/i18n/cleantalk-de\_DE.mo](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-de_DE.mo?rev=3188546 "Show entry in browser")
  (modified)
  ([previous](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-de_DE.mo?rev=1303309 "Show previous version in browser"))
* [trunk/i18n/cleantalk-en\_US.mo](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-en_US.mo?rev=3188546 "Show entry in browser")
  (modified)
  ([previous](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-en_US.mo?rev=1194494 "Show previous version in browser"))
* [trunk/i18n/cleantalk-es\_ES.mo](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-es_ES.mo?rev=3188546 "Show entry in browser")
  (modified)
  ([previous](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-es_ES.mo?rev=1426714 "Show previous version in browser"))
* [trunk/i18n/cleantalk-fr\_FR.mo](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-fr_FR.mo?rev=3188546 "Show entry in browser")
  (modified)
  ([previous](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-fr_FR.mo?rev=1303309 "Show previous version in browser"))
* [trunk/i18n/cleantalk-it\_IT.mo](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-it_IT.mo?rev=3188546 "Show entry in browser")
  (modified)
  ([previous](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-it_IT.mo?rev=1103993 "Show previous version in browser"))
* [trunk/i18n/cleantalk-pl\_PL.mo](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-pl_PL.mo?rev=3188546 "Show entry in browser")
  (modified)
  ([previous](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-pl_PL.mo?rev=1303309 "Show previous version in browser"))
* [trunk/i18n/cleantalk-pt\_PT.mo](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-pt_PT.mo?rev=3188546 "Show entry in browser")
  (modified)
  ([previous](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-pt_PT.mo?rev=1303309 "Show previous version in browser"))
* [trunk/i18n/cleantalk-ru\_RU.mo](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-ru_RU.mo?rev=3188546 "Show entry in browser")
  (modified)
  ([previous](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-ru_RU.mo?rev=2328161 "Show previous version in browser"))
* [trunk/i18n/cleantalk-spam-protect-nl\_NL.mo](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-spam-protect-nl_NL.mo?rev=3188546 "Show entry in browser")
  (modified)
  ([previous](/browser/cleantalk-spam-protect/trunk/i18n/cleantalk-spam-protect-nl_NL.mo?rev=3132421 "Show previous version in browser"))
* [trunk/inc/cleantalk-common.php](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-common.php?rev=3188546 "Show entry in browser")
  (modified)
  ([3 diffs](#file620 "Show differences"))
* [trunk/inc/cleantalk-pluggable.php](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-pluggable.php?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file621 "Show differences"))
* [trunk/inc/cleantalk-public-integrations.php](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-public-integrations.php?rev=3188546 "Show entry in browser")
  (modified)
  ([2 diffs](#file622 "Show differences"))
* [trunk/inc/cleantalk-public-validate-skip-functions.php](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-public-validate-skip-functions.php?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file623 "Show differences"))
* [trunk/inc/cleantalk-public-validate.php](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-public-validate.php?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file624 "Show differences"))
* [trunk/inc/cleantalk-settings.php](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-settings.php?rev=3188546 "Show entry in browser")
  (modified)
  ([2 diffs](#file625 "Show differences"))
* [trunk/js/apbct-public-bundle.min.js](/browser/cleantalk-spam-protect/trunk/js/apbct-public-bundle.min.js?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file626 "Show differences"))
* [trunk/js/cleantalk-admin.min.js](/browser/cleantalk-spam-protect/trunk/js/cleantalk-admin.min.js?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file627 "Show differences"))
* [trunk/js/cleantalk-admin.min.js.map](/browser/cleantalk-spam-protect/trunk/js/cleantalk-admin.min.js.map?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file628 "Show differences"))
* [trunk/js/cleantalk-dashboard-widget.min.js](/browser/cleantalk-spam-protect/trunk/js/cleantalk-dashboard-widget.min.js?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file629 "Show differences"))
* [trunk/js/cleantalk-dashboard-widget.min.js.map](/browser/cleantalk-spam-protect/trunk/js/cleantalk-dashboard-widget.min.js.map?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file630 "Show differences"))
* [trunk/js/cleantalk-users-checkspam.min.js](/browser/cleantalk-spam-protect/trunk/js/cleantalk-users-checkspam.min.js?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file631 "Show differences"))
* [trunk/js/cleantalk-users-checkspam.min.js.map](/browser/cleantalk-spam-protect/trunk/js/cleantalk-users-checkspam.min.js.map?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file632 "Show differences"))
* [trunk/lib/Cleantalk/Antispam/Cleantalk.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/Cleantalk.php?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file633 "Show differences"))
* [trunk/lib/Cleantalk/Antispam/EmailEncoder.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/EmailEncoder.php?rev=3188546 "Show entry in browser")
  (modified)
  ([4 diffs](#file634 "Show differences"))
* [trunk/lib/Cleantalk/Antispam/Integrations/Forminator.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/Integrations/Forminator.php?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file635 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php?rev=3188546 "Show entry in browser")
  (modified)
  ([4 diffs](#file636 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php?rev=3188546 "Show entry in browser")
  (modified)
  ([4 diffs](#file637 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546 "Show entry in browser")
  (modified)
  ([21 diffs](#file638 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanResponse.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanResponse.php?rev=3188546 "Show entry in browser")
  (modified)
  ([2 diffs](#file639 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php?rev=3188546 "Show entry in browser")
  (modified)
  ([5 diffs](#file640 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3188546 "Show entry in browser")
  (modified)
  ([9 diffs](#file641 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsLogs.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsLogs.php?rev=3188546 "Show entry in browser")
  (modified)
  ([2 diffs](#file642 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsScan.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsScan.php?rev=3188546 "Show entry in browser")
  (modified)
  ([2 diffs](#file643 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3188546 "Show entry in browser")
  (modified)
  ([8 diffs](#file644 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersLogs.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersLogs.php?rev=3188546 "Show entry in browser")
  (modified)
  ([2 diffs](#file645 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersScan.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersScan.php?rev=3188546 "Show entry in browser")
  (modified)
  ([2 diffs](#file646 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546 "Show entry in browser")
  (modified)
  ([18 diffs](#file647 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersScanResponse.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersScanResponse.php?rev=3188546 "Show entry in browser")
  (modified)
  ([2 diffs](#file648 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/Firewall/AntiFlood.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Firewall/AntiFlood.php?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file649 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/GetFieldsAny.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/GetFieldsAny.php?rev=3188546 "Show entry in browser")
  (modified)
  ([2 diffs](#file650 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/Helper.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Helper.php?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file651 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/LinkConstructor.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/LinkConstructor.php?rev=3188546 "Show entry in browser")
  (modified)
  ([3 diffs](#file652 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/RemoteCalls.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/RemoteCalls.php?rev=3188546 "Show entry in browser")
  (modified)
  ([2 diffs](#file653 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/Sanitize.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Sanitize.php?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file654 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/State.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/State.php?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file655 "Show differences"))
* [trunk/lib/Cleantalk/ApbctWP/Variables/Cookie.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Variables/Cookie.php?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file656 "Show differences"))
* [trunk/lib/Cleantalk/Common/LinkConstructor.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Common/LinkConstructor.php?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file657 "Show differences"))
* [trunk/lib/Cleantalk/Common/TT.php](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Common/TT.php?rev=3188546 "Show entry in browser")
  (modified)
  ([1 diff](#file658 "Show differences"))
* [trunk/readme.txt](/browser/cleantalk-spam-protect/trunk/readme.txt?rev=3188546 "Show entry in browser")
  (modified)
  ([2 diffs](#file659 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [cleantalk-spam-protect/trunk/cleantalk.php](/changeset/3188546/cleantalk-spam-protect/trunk/cleantalk.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/cleantalk.php")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/cleantalk.php?rev=3179819#L5 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/cleantalk.php?rev=3188546#L5 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Plugin URI: https://cleantalk.org |
  | 6 | 6 | Description: Max power, all-in-one, no Captcha, premium anti-spam plugin. No comment spam, no registration spam, no contact spam, protects any WordPress forms. |
  | 7 |  | Version: 6.4~~4~~ |
  |  | 7 | Version: 6.45 |
  | 8 | 8 | Author: СleanTalk - Anti-Spam Protection <welcome@cleantalk.org> |
  | 9 | 9 | Author URI: https://cleantalk.org |
  | […](/browser/cleantalk-spam-protect/trunk/cleantalk.php?rev=3179819#L2885) | […](/browser/cleantalk-spam-protect/trunk/cleantalk.php?rev=3188546#L2885) |  |
  | 2885 | 2885 | } |
  | 2886 | 2886 |  |
  | 2887 |  |  |
  | 2888 | 2887 | // Cookie names to validate |
  | 2889 | 2888 | $cookie\_test\_value = array( |
  | […](/browser/cleantalk-spam-protect/trunk/cleantalk.php?rev=3179819#L2904) | […](/browser/cleantalk-spam-protect/trunk/cleantalk.php?rev=3188546#L2903) |  |
  | 2904 | 2903 |  |
  | 2905 | 2904 | // Landing time |
  | 2906 |  | ~~// todo if cookies disabled there is no way to keep this data without DB:( always will be overwriteen~~ |
  | 2907 |  | $site\_landing\_timestamp = Cookie::get('apbct\_site\_landing\_ts'); |
  |  | 2905 | $site\_landing\_timestamp = RequestParameters::get('apbct\_site\_landing\_ts', true); |
  |  | 2906 |  |
  | 2908 | 2907 | if ( ! $site\_landing\_timestamp ) { |
  | 2909 | 2908 | $site\_landing\_timestamp = time(); |
  | 2910 |  | Cookie::set('apbct\_site\_landing\_ts', (string)$site\_landing\_timestamp, 0, '/', $domain, null, true, 'Lax', true); |
  | 2911 |  | } |
  | 2912 |  | $cookie\_test\_value['cookies\_names'][] = 'apbct\_site\_landing\_ts'; |
  | 2913 |  | $cookie\_test\_value['check\_value']     .= $site\_landing\_timestamp; |
  |  | 2909 | RequestParameters::set('apbct\_site\_landing\_ts', TT::toString($site\_landing\_timestamp), true); |
  |  | 2910 | } |
  | 2914 | 2911 |  |
  | 2915 | 2912 | if ($apbct->data['cookies\_type'] === 'native') { |
* ## [cleantalk-spam-protect/trunk/css/cleantalk-email-decoder.min.css](/changeset/3188546/cleantalk-spam-protect/trunk/css/cleantalk-email-decoder.min.css "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/css/cleantalk-email-decoder.min.css")

  | [r3170573](/browser/cleantalk-spam-protect/trunk/css/cleantalk-email-decoder.min.css?rev=3170573#L1 "Show revision 3170573 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/css/cleantalk-email-decoder.min.css?rev=3188546#L1 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | .apbct-ee-blur\_email-text,.apbct-email-encoder{position:relative}.apbct-email-encoder-popup{width:30vw;min-width:400px;font-size:16px}.apbct-email-encoder-~~elements\_center{display:flex;flex-direction:column;justify-content:center;align-items:center}.top-margin-long{margin-top:5px}.apbct-ee-blur-group br,.apbct-email-encoder br{display:none!important;visibility:hidden!important~~}.apbct-ee-blur{display:inline-block;position:absolute;background:rgba(255,255,255,.3);border-radius:15px;backdrop-filter:blur(1.5px);height:110%}.apbct-ee-blur-group{position:relative}.apbct-ee-static-blur{display:inherit}.apbct-ee-animate-blur{display:none}.apbct-ee-blur\_rectangle-init{width:80%;left:10%}.apbct-ee-blur\_animate-init{animation:apbct-resize-init 2s forwards}@keyframes apbct-resize-init{0%{width:80%;left:10%}100%{left:50%;width:0%}}.apbct-ee-blur\_rectangle-soft{width:70%;left:15%;border-radius:0}.apbct-ee-blur\_animate-soft{animation:apbct-resize-soft 2s forwards}@keyframes apbct-resize-soft{0%{width:70%;left:15%}100%{left:50%;width:0%}}.apbct-ee-blur\_rectangle-hard{width:60%;left:20%;border-radius:0}.apbct-ee-blur\_animate-hard{animation:apbct-resize-hard 2s forwards}.apbct\_dog\_one,.apbct\_dog\_three,.apbct\_dog\_two{animation-duration:1.5s;animation-iteration-count:infinite;animation-name:apbct\_dog}@keyframes apbct-resize-hard{0%{width:60%;left:20%}100%{left:50%;width:0%}}.apbct-ee-animation-wrapper{display:flex;height:60px;justify-content:center;font-size:16px;align-items:center}.apbct\_dog{margin:0 5px;color:transparent;text-shadow:0 0 2px #aaa}.apbct\_dog\_one{animation-delay:0s}.apbct\_dog\_two{animation-delay:.5s}.apbct\_dog\_three{animation-delay:1s}@keyframes apbct\_dog{0%,100%,75%{scale:100%;color:transparent;text-shadow:0 0 2px #aaa}25%{scale:200%;color:unset;text-shadow:unset}} |
  |  | 1 | .apbct-ee-blur\_email-text,.apbct-email-encoder{position:relative}.apbct-email-encoder-popup{width:30vw;min-width:400px;font-size:16px}.apbct-email-encoder--popup-header{font-size:16px;color:#333}.apbct-email-encoder-elements\_center{display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:16px;color:#000}.top-margin-long{margin-top:5px}.apbct-email-encoder-select-whole-email{-webkit-user-select:all;user-select:all}.apbct-ee-blur-group br,.apbct-email-encoder br{display:none!important;visibility:hidden!important}.apbct-email-encoder-got-it-button{all:unset;margin-top:10px;padding:5px 10px;border-radius:5px;background-color:#333;color:#fff;cursor:pointer;transition:background-color .3s}.apbct-ee-blur{display:inline-block;position:absolute;background:rgba(255,255,255,.3);border-radius:15px;backdrop-filter:blur(1.5px);height:110%}.apbct-ee-blur-group{position:relative}.apbct-ee-static-blur{display:inherit}.apbct-ee-animate-blur{display:none}.apbct-ee-blur\_rectangle-init{width:80%;left:10%}.apbct-ee-blur\_animate-init{animation:apbct-resize-init 2s forwards}@keyframes apbct-resize-init{0%{width:80%;left:10%}100%{left:50%;width:0%}}.apbct-ee-blur\_rectangle-soft{width:70%;left:15%;border-radius:0}.apbct-ee-blur\_animate-soft{animation:apbct-resize-soft 2s forwards}@keyframes apbct-resize-soft{0%{width:70%;left:15%}100%{left:50%;width:0%}}.apbct-ee-blur\_rectangle-hard{width:60%;left:20%;border-radius:0}.apbct-ee-blur\_animate-hard{animation:apbct-resize-hard 2s forwards}.apbct\_dog\_one,.apbct\_dog\_three,.apbct\_dog\_two{animation-duration:1.5s;animation-iteration-count:infinite;animation-name:apbct\_dog}@keyframes apbct-resize-hard{0%{width:60%;left:20%}100%{left:50%;width:0%}}.apbct-ee-animation-wrapper{display:flex;height:60px;justify-content:center;font-size:16px;align-items:center}.apbct\_dog{margin:0 5px;color:transparent;text-shadow:0 0 2px #aaa}.apbct\_dog\_one{animation-delay:0s}.apbct\_dog\_two{animation-delay:.5s}.apbct\_dog\_three{animation-delay:1s}@keyframes apbct\_dog{0%,100%,75%{scale:100%;color:transparent;text-shadow:0 0 2px #aaa}25%{scale:200%;color:unset;text-shadow:unset}} |
* ## [cleantalk-spam-protect/trunk/inc/cleantalk-common.php](/changeset/3188546/cleantalk-spam-protect/trunk/inc/cleantalk-common.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/inc/cleantalk-common.php")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-common.php?rev=3179819#L549 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-common.php?rev=3188546#L549 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 549 | 549 | $apbct\_urls = $apbct\_urls ? json\_encode(json\_decode($apbct\_urls, true)) : null; |
  | 550 | 550 |  |
  |  | 551 | $site\_landing\_ts = RequestParameters::get('apbct\_site\_landing\_ts', true); |
  |  | 552 | $site\_landing\_ts = !empty($site\_landing\_ts) ? TT::toString($site\_landing\_ts) : null; |
  |  | 553 |  |
  | 551 | 554 | //Let's keep $data\_array for debugging |
  | 552 | 555 | $data\_array = array( |
  | […](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-common.php?rev=3179819#L571) | […](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-common.php?rev=3188546#L574) |  |
  | 571 | 574 | ? Cookie::get('apbct\_prev\_referer') |
  | 572 | 575 | : null, |
  | 573 |  | 'site\_landing\_ts'           => Cookie::get('apbct\_site\_landing\_ts') && $cookie\_is\_ok |
  | 574 |  | ? Cookie::get('apbct\_site\_landing\_ts') |
  | 575 |  | : null, |
  |  | 576 | 'site\_landing\_ts'           => $site\_landing\_ts, |
  | 576 | 577 | 'page\_hits'                 => Cookie::get('apbct\_page\_hits') ?: null, |
  | 577 | 578 | 'mouse\_cursor\_positions'    => $param\_mouse\_cursor\_positions, |
  | […](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-common.php?rev=3179819#L923) | […](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-common.php?rev=3188546#L924) |  |
  | 923 | 924 | } |
  | 924 | 925 |  |
  |  | 926 | $ct\_server['ct\_work\_url'] = Sanitize::sanitizeCleantalkServerUrl(TT::getArrayValueAsString($ct\_server, 'ct\_work\_url')); |
  |  | 927 |  |
  | 925 | 928 | return $ct\_server; |
  | 926 | 929 | } |
  | 927 | 930 |  |
  |  | 931 | /\*\* |
  |  | 932 | \* @param $url |
  |  | 933 | \* |
  |  | 934 | \* @return string|null |
  |  | 935 | \*/ |
  |  | 936 | function sanitize\_cleantalk\_server\_url($url) |
  |  | 937 | { |
  |  | 938 | if (!is\_string($url)) { |
  |  | 939 | return null; |
  |  | 940 | } |
  |  | 941 | return preg\_match('/^.\*(moderate|api).\*\.cleantalk.org(?!\.)[\/\\\\]{0,1}/m', $url) |
  |  | 942 | ? $url |
  |  | 943 | : null; |
  |  | 944 | } |
  | 928 | 945 | /\*\* |
  | 929 | 946 | \* Inner function - Stores ang returns cleantalk hash of current comment |
* ## [cleantalk-spam-protect/trunk/inc/cleantalk-pluggable.php](/changeset/3188546/cleantalk-spam-protect/trunk/inc/cleantalk-pluggable.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/inc/cleantalk-pluggable.php")

  | [r3170573](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-pluggable.php?rev=3170573#L1445 "Show revision 3170573 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-pluggable.php?rev=3188546#L1445 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 1445 | 1445 | return 'no\_ajax\_wpdCheckNotificationType'; |
  | 1446 | 1446 | } |
  |  | 1447 |  |
  |  | 1448 | // Plugin Name: Profile Builder |
  |  | 1449 | if ( |
  |  | 1450 | apbct\_is\_plugin\_active('profile-builder/index.php') && |
  |  | 1451 | Post::get('action') === 'edit\_profile' |
  |  | 1452 | ) { |
  |  | 1453 | return 'Plugin Name: Profile Builder; ajax action wppb\_conditional\_logic'; |
  |  | 1454 | } |
  | 1447 | 1455 | } |
  | 1448 | 1456 |  |
* ## [cleantalk-spam-protect/trunk/inc/cleantalk-public-integrations.php](/changeset/3188546/cleantalk-spam-protect/trunk/inc/cleantalk-public-integrations.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/inc/cleantalk-public-integrations.php")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-public-integrations.php?rev=3179819#L2884 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-public-integrations.php?rev=3188546#L2884 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 2884 | 2884 | $sender\_email = ''; |
  | 2885 | 2885 | foreach ( $\_POST as $v ) { |
  | 2886 |  | if ( preg\_match("/^\S+@\S+\.\S+$/", TT::toString($v)) ) { |
  | 2887 |  | $sender\_email = TT::toString($v); |
  |  | 2886 | $sanitized\_value = TT::toString($v); |
  |  | 2887 | if ( preg\_match("/^\S+@\S+\.\S+$/", $sanitized\_value) ) { |
  |  | 2888 | $sender\_email = $sanitized\_value; |
  | 2888 | 2889 | break; |
  | 2889 | 2890 | } |
  | […](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-public-integrations.php?rev=3179819#L2892) | […](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-public-integrations.php?rev=3188546#L2893) |  |
  | 2892 | 2893 | $message = ''; |
  | 2893 | 2894 | if ( array\_key\_exists('form\_input\_values', $\_POST) ) { |
  | 2894 |  | $form\_input\_values = json\_decode(stripslashes(TT::~~toString($\_POST['form\_input\_values']~~)), true); |
  |  | 2895 | $form\_input\_values = json\_decode(stripslashes(TT::getArrayValueAsString($\_POST, 'form\_input\_values')), true); |
  | 2895 | 2896 | if ( is\_array($form\_input\_values) && array\_key\_exists('null', $form\_input\_values) ) { |
  | 2896 | 2897 | $message = Sanitize::cleanTextareaField($form\_input\_values['null']); |
* ## [cleantalk-spam-protect/trunk/inc/cleantalk-public-validate-skip-functions.php](/changeset/3188546/cleantalk-spam-protect/trunk/inc/cleantalk-public-validate-skip-functions.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/inc/cleantalk-public-validate-skip-functions.php")

  | [r3051262](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-public-validate-skip-functions.php?rev=3051262#L103 "Show revision 3051262 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-public-validate-skip-functions.php?rev=3188546#L103 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 103 | 103 | // Ticket #13668. Password reset. |
  | 104 | 104 | '12' => apbct\_is\_in\_referer('/wp-admin/'), |
  | 105 |  | '13' => apbct\_is\_in\_uri('/login/'), |
  |  | 105 | // task 9405 - prevent Forminator forms direct attacks |
  |  | 106 | '13' => apbct\_is\_in\_uri('/login/') && Post::get('action') !== 'forminator\_submit\_form\_custom-forms', |
  | 106 | 107 | '14' => apbct\_is\_in\_uri('/my-account/edit-account/'), |
  | 107 | 108 | // WooCommerce edit account page |
* ## [cleantalk-spam-protect/trunk/inc/cleantalk-public-validate.php](/changeset/3188546/cleantalk-spam-protect/trunk/inc/cleantalk-public-validate.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/inc/cleantalk-public-validate.php")

  | [r3170573](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-public-validate.php?rev=3170573#L500 "Show revision 3170573 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-public-validate.php?rev=3188546#L500 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 500 | 500 | global $apbct; |
  | 501 | 501 |  |
  | 502 |  | ~~// modification to correctly check gravity forms attacks~~ |
  | 503 |  | ~~if ( !empty($form\_data['action']) && !empty($form\_data['gform\_ajax']) ) {~~ |
  | 504 |  | ~~unset($form\_data['ct\_checkjs']);~~ |
  | 505 |  | ~~}~~ |
  | 506 |  |  |
  | 507 | 502 | if (isset($form\_data['data']) && is\_array($form\_data['data'])) { |
  | 508 | 503 | $form\_data['data'] = apbct\_\_filter\_form\_data($form\_data['data']); |
* ## [cleantalk-spam-protect/trunk/inc/cleantalk-settings.php](/changeset/3188546/cleantalk-spam-protect/trunk/inc/cleantalk-settings.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/inc/cleantalk-settings.php")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-settings.php?rev=3179819#L189 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-settings.php?rev=3188546#L189 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 189 | 189 | 'type'        => 'checkbox', |
  | 190 | 190 | 'title'       => \_\_('Encode contact data', 'cleantalk-spam-protect'), |
  | 191 |  | 'description' => |
  | 192 |  | sprintf( |
  | 193 |  | \_\_( |
  | 194 |  | 'This option allows you to encode contacts on the public pages of the site. This prevents robots from automatically collecting such data and prevents it from being included in spam lists. %s', |
  | 195 |  | 'cleantalk-spam-protect' |
  | 196 |  | ), |
  | 197 |  | '<a href="https://blog.cleantalk.org/wordpress-how-hide-email-address-from-bots-and-spammers/?utm\_source=apbct\_hint\_data\_\_email\_decoder&utm\_medium=WordPress&utm\_campaign=ABPCT\_Settings" target="\_blank">' . \_\_( |
  | 198 |  | 'Learn more.', |
  | 199 |  | 'cleantalk-spam-protect' |
  | 200 |  | ) . '</a>' |
  | 201 |  | ) |
  | 202 |  | . '<br><span id="apbct-email-decoder-example-text">' . \_\_( |
  | 203 |  | 'Try to decode, just click on email ', |
  | 204 |  | 'cleantalk-spam-protect' |
  | 205 |  | ) . '</span>' |
  | 206 |  | . '<span id="apbct-email-decoder-example-email">' . $current\_user\_email . '</span>' |
  | 207 |  | . '<br>' |
  | 208 |  | . sprintf( |
  | 209 |  | \_\_( |
  | 210 |  | 'If the option was turned off, you can anyway encode contact data using shortcode\hook. Learn more %s.', |
  | 211 |  | 'cleantalk-spam-protect' |
  | 212 |  | ), |
  | 213 |  | '<a href="#" target="\_blank">' . \_\_('here', 'cleantalk-spam-protect') . '</a>' |
  | 214 |  | ) |
  |  | 191 | 'description' => EmailEncoder::getEncoderOptionDescription($current\_user\_email) |
  | 215 | 192 | ), |
  | 216 | 193 | 'comments\_\_the\_real\_person' => array( |
  | […](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-settings.php?rev=3179819#L651) | […](/browser/cleantalk-spam-protect/trunk/inc/cleantalk-settings.php?rev=3188546#L628) |  |
  | 651 | 628 | 'data\_\_email\_decoder'        => array( |
  | 652 | 629 | 'title' => \_\_('Encode contact data', 'cleantalk-spam-protect'), |
  | 653 |  | 'description' => |
  | 654 |  | sprintf( |
  | 655 |  | \_\_( |
  | 656 |  | 'This option allows you to encode contacts on the public pages of the site. This prevents robots from automatically collecting such data and prevents it from being included in spam lists. %s', |
  | 657 |  | 'cleantalk-spam-protect' |
  | 658 |  | ), |
  | 659 |  | '<a href="https://blog.cleantalk.org/wordpress-how-hide-email-address-from-bots-and-spammers/?utm\_source=apbct\_hint\_data\_\_email\_decoder&utm\_medium=WordPress&utm\_campaign=ABPCT\_Settings" target="\_blank">' . \_\_( |
  | 660 |  | 'Learn more.', |
  | 661 |  | 'cleantalk-spam-protect' |
  | 662 |  | ) . '</a>' |
  | 663 |  | ) |
  | 664 |  | . '<br>' |
  | 665 |  | . sprintf( |
  | 666 |  | \_\_( |
  | 667 |  | 'If the option was turned off, you can anyway encode contact data using shortcode\hook. Learn more %s.', |
  | 668 |  | 'cleantalk-spam-protect' |
  | 669 |  | ), |
  | 670 |  | '<a href="#" target="\_blank">' . \_\_('here', 'cleantalk-spam-protect') . '</a>' |
  | 671 |  | ), |
  |  | 630 | 'description' => EmailEncoder::getEncoderOptionDescription(), |
  | 672 | 631 | 'childrens' => array('data\_\_email\_decoder\_buffer') |
  | 673 | 632 | ), |
  | 674 | 633 | 'data\_\_email\_decoder\_buffer'        => array( |
  | 675 | 634 | 'title'       => \_\_('Use the output buffer', 'cleantalk-spam-protect'), |
  | 676 |  | 'description' => ~~\_\_('Use this option only if no encoding occurs when the "Encode contact data" option is enabled.', 'cleantalk-spam-protect'~~), |
  |  | 635 | 'description' => EmailEncoder::getBufferUsageOptionDescription(), |
  | 677 | 636 | 'parent'          => 'data\_\_email\_decoder', |
  | 678 | 637 | 'class'           => 'apbct\_settings-field\_wrapper--sub', |
* ## [cleantalk-spam-protect/trunk/js/apbct-public-bundle.min.js](/changeset/3188546/cleantalk-spam-protect/trunk/js/apbct-public-bundle.min.js "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/js/apbct-public-bundle.min.js")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/js/apbct-public-bundle.min.js?rev=3179819#L1 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/js/apbct-public-bundle.min.js?rev=3188546#L1 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | function ownKeys(t,e){var o,n=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)),n}function \_objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){\_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function \_callSuper(e,t,o){return t=\_getPrototypeOf(t),\_possibleConstructorReturn(e,\_isNativeReflectConstruct()?Reflect.construct(t,o||[],\_getPrototypeOf(e).constructor):t.apply(e,o))}function \_possibleConstructorReturn(e,t){if(t&&("object"==\_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return \_assertThisInitialized(e)}function \_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function \_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(\_isNativeReflectConstruct=function(){return!!e})()}function \_getPrototypeOf(e){return(\_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.\_\_proto\_\_||Object.getPrototypeOf(e)})(e)}function \_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&\_setPrototypeOf(e,t)}function \_setPrototypeOf(e,t){return(\_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.\_\_proto\_\_=t,e})(e,t)}function \_createForOfIteratorHelper(e,t){var o,n,a,c,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return a=!(n=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return n=e.done,e},e:function(e){a=!0,o=e},f:function(){try{n||null==i.return||i.return()}finally{if(a)throw o}}};if(Array.isArray(e)||(i=\_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),c=0,{s:t=function(){},n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function \_unsupportedIterableToArray(e,t){var o;if(e)return"string"==typeof e?\_arrayLikeToArray(e,t):"Map"===(o="Object"===(o={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?\_arrayLikeToArray(e,t):void 0}function \_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function \_typeof(e){return(\_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function \_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function \_defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,\_toPropertyKey(n.key),n)}}function \_createClass(e,t,o){return t&&\_defineProperties(e.prototype,t),o&&\_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function \_defineProperty(e,t,o){return(t=\_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function \_toPropertyKey(e){e=\_toPrimitive(e,"string");return"symbol"==\_typeof(e)?e:e+""}function \_toPrimitive(e,t){if("object"!=\_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);o=o.call(e,t||"default");if("object"!=\_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}var ApbctCore=~~(()=>\_createClass(function e(t){\_classCallCheck(this,e),\_defineProperty(this,"ajax\_parameters",{}),\_defineProperty(this,"restParameters",{}),\_defineProperty(this,"selector",null),\_defineProperty(this,"elements",[]),\_defineProperty(this,"eventCallback",void 0),\_defineProperty(this,"eventSelector",void 0),\_defineProperty(this,"event",void 0),this.select(t)},[{key:"select",value:function(e){return e instanceof HTMLCollection?(this.selector=null,this.elements=[],this.elements=Array.prototype.slice.call(e)):"object"===\_typeof(e)?(this.selector=null,this.elements=[],this.elements[0]=e):"string"==typeof e?(this.selector=e,this.elements=Array.prototype.slice.call(document.querySelectorAll(e))):this.deselect(),this}},{key:"addElement",value:function(e){"object"===\_typeof(e)?this.elements.push(e):"string"==typeof e?(this.selector=e,this.elements=Array.prototype.slice.call(document.querySelectorAll(e))):this.deselect()}},{key:"push",value:function(e){this.elements.push(e)}},{key:"reduce",value:function(){this.elements=this.elements.slice(0,-1)}},{key:"deselect",value:function(){this.elements=[]}},{key:"css",value:function(e,t){if(t=t||!1,"object"===\_typeof(e)){for(var o in e)if(Object.hasOwn(e,o))for(var n=o.replace(/([-\_][a-z])/g,function(e){return e.toUpperCase().replace("-","").replace("\_","")}),a=0;a<this.elements.length;a++)this.elements[a].style[n]=e[o];return this}var c;if("string"==typeof e)return void 0!==(c=getComputedStyle(this.elements[0])[e])&&!t&&(c=c.replace(/(\d)(em|pt|%|px){1,2}$/,"$1"),Number(c)==c)?Number(c):c}},{key:"hide",value:function(){this.prop("prev-display",this.css("display")),this.css({display:"none"})}},{key:"show",value:function(){this.css({display:this.prop("prev-display")})}},{key:"addClass",value:function(){for(var e=0;e<this.elements.length;e++)this.elements[e].classList.add(className)}},{key:"removeClass",value:function(){for(var e=0;e<this.elements.length;e++)this.elements[e].classList.remove(className)}},{key:"toggleClass",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t].classList.toggle(e)}},{key:"ajax",value:function(e){return this.ajax\_parameters=e,new ApbctAjax(e)}},{key:"rest",value:function(e){return this.restParameters=e,new ApbctRest(e)}},{key:"on",value:function(){this.event=arguments.length<=0?void 0:arguments[0],this.eventCallback=(arguments.length<=2?void 0:arguments[2])||(arguments.length<=1?void 0:arguments[1]),this.eventSelector="string"==typeof(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:null;for(var e=0;e<this.elements.length;e++)this.elements[e].addEventListener(this.event,null!==this.eventSelector?this.onChecker.bind(this):this.eventCallback)}},{key:"onChecker",value:function(e){if(e.target===document.querySelector(this.eventSelector))return e.stopPropagation(),this.eventCallback(e)}},{key:"ready",value:function(e){document.addEventListener("DOMContentLoaded",e)}},{key:"change",value:function(e){this.on("change",e)}},{key:"attr",value:function(e){for(var t=[],o=0;o<this.elements.length;o++)void 0!==this.elements[o][e]?t.push(this.elements[o][e]):t.push(this.elements[o].getAttribute(e));return 1===t.length?t[0]:t}},{key:"prop",value:function(e,t){if(void 0!==t){for(var o=0;o<this.elements.length;o++)this.elements[o][e]=t;return this}for(var n=[],a=0;a<this.elements.length;a++)n.push(this.elements[a][e]);return 1===n.length?n[0]:n}},{key:"html",value:function(e){return void 0!==e?this.prop("innerHTML",e):this.prop("innerHTML")}},{key:"val",value:function(e){return void 0!==e?this.prop("value",e):this.prop("value")}},{key:"data",value:function(e,t){return void 0!==t?this.prop("apbct-data",e,t):this.prop("apbct-data")}},{key:"is",value:function(e){var t,o=!1,n=\_createForOfIteratorHelper(this.elements);try{for(n.s();!(t=n.n()).done;)var a=t.value,o=o||this.isElem(a,e)}catch(e){n.e(e)}finally{n.f()}return o}},{key:"isElem",value:function(e,t){var o=!1;return"function"==typeof t&&(o=o||t.call(this,e)),o="string"==typeof t?t.match(/^[a-z]/)&&(e=>(e=document.createElement(e).constructor,!Boolean(~[HTMLElement,HTMLUnknownElement].indexOf(e))))(t)?o||e.tagName.toLowerCase()===t.toLowerCase():t.match(/^[a-z]/)?o||Boolean(e[t]):o||(null!==this.selector?null!==document.querySelector(this.selector+t):this.isWithoutSelector(e,t)):o}},{key:"isWithoutSelector",value:function(e,t){var o,n=!1,a=\_createForOfIteratorHelper(document.querySelectorAll(t));try{for(a.s();!(o=a.n()).done;)n=n||e===o.value}catch(e){a.e(e)}finally{a.f()}return n}},{key:"filter",value:function(e){this.selector=null;for(var t=this.elements.length-1;0<=t;t--)this.isElem(this.elements[t],e)||this.elements.splice(Number(t),1);return this}},{key:"parent",value:function(e){return this.select(this.elements[0].parentElement),void 0===e||this.is(e)||this.deselect(),this}},{key:"parents",value:function(e){for(this.select(this.elements[0]);null!==this.elements[this.elements.length-1].parentElement;)this.push(this.elements[this.elements.length-1].parentElement);return this.elements.splice(0,1),void 0!==e&&this.filter(e),this}},{key:"children",value:function(e){return this.select(this.elements[0].children),void 0!==e&&this.filter(e),this}},{key:"siblings",value:function(e){var t=this.elements[0];return this.parent(),this.children(e),this.elements.splice(this.elements.indexOf(t),1),this}},{key:"remove",value:function(){var e,t=\_createForOfIteratorHelper(this.elements);try{for(t.s();!(e=t.n()).done;)e.value.remove()}catch(e){t.e(e)}finally{t.f()}}},{key:"after",value:function(e){var t,o=\_createForOfIteratorHelper(this.elements);try{for(o.s();!(t=o.n()).done;)t.value.after(e)}catch(e){o.e(e)}finally{o.f()}}},{key:"append",value:function(e){var t,o=\_createForOfIteratorHelper(this.elements);try{for(o.s();!(t=o.n()).done;)t.value.append(e)}catch(e){o.e(e)}finally{o.f()}}},{key:"fadeIn",value:function(n){var a,t=\_createForOfIteratorHelper(this.elements);try{for(t.s();!(a=t.n()).done;)(()=>{function e(){t.style.opacity=+t.style.opacity+(new Date-o)/n,o=+new Date,+t.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(e)||setTimeout(e,16))}var t=a.value,o=(t.style.opacity=0,t.style.display="block",+new Date);e()})()}catch(e){t.e(e)}finally{t.f()}}},{key:"fadeOut",value:function(n){var a,t=\_createForOfIteratorHelper(this.elements);try{for(t.s();!(a=t.n()).done;)(()=>{function e(){t.style.opacity=+t.style.opacity-(new Date-o)/n,o=+new Date,0<+t.style.opacity?window.requestAnimationFrame&&requestAnimationFrame(e)||setTimeout(e,16):t.style.display="none"}var t=a.value,o=(t.style.opacity=1,+new Date);e()})()}catch(e){t.e(e)}finally{t.f()}}}]))();function ctProcessError(e,t){var o={},e=(e&&e.message?o.err={msg:e.message,file:e.fileName||!1,ln:e.lineNumber||lineNo||!1,col:e.columnNumber||columnNo||!1,stacktrace:e.stack||!1,cause:!!t&&JSON.stringify(t),errorObj:error||!1}:(o.err={msg:e},t&&(o.err.file=t)),o.url=window.location.href,o.userAgent=window.navigator.userAgent,"ct\_js\_errors");null===(n=localStorage.getItem(e))&&(n="[]");for(var n=JSON.parse(n),a=0;a<n.length;a++)if(n[a].err.msg===o.err.msg)return;n.push(o),localStorage.setItem(e,JSON.stringify(n))}function selectActualNonce(){var e="";return ctPublicFunctions.hasOwnProperty("\_fresh\_nonce")&&"string"==typeof ctPublicFunctions.\_fresh\_nonce&&0<ctPublicFunctions.\_fresh\_nonce.length?ctPublicFunctions.\_fresh\_nonce:("admin\_ajax"===ctPublicFunctions.data\_\_ajax\_type&&ctPublicFunctions.hasOwnProperty("\_ajax\_nonce")&&"string"==typeof ctPublicFunctions.\_ajax\_nonce&&0<ctPublicFunctions.\_ajax\_nonce.length&&(e=ctPublicFunctions.\_ajax\_nonce),"rest"===ctPublicFunctions.data\_\_ajax\_type&&ctPublicFunctions.hasOwnProperty("\_rest\_nonce")&&"string"==typeof ctPublicFunctions.\_rest\_nonce&&0<ctPublicFunctions.\_rest\_nonce.length?ctPublicFunctions.\_rest\_nonce:e)}function apbct(e){return(new ApbctCore).select(e)}1===Math.floor(100\*Math.random())&&(window.onerror=function(e,t){for(var o=["apbct","ctPublic"],n=o.length;n--;)-1!==e.indexOf(o[n])&&ctProcessError(e,t);return!1});var ApbctXhr=(()=>{function n(e){for(var t in \_classCallCheck(this,n),\_defineProperty(this,"xhr",new XMLHttpRequest),\_defineProperty(this,"method","POST"),\_defineProperty(this,"url",""),\_defineProperty(this,"async",!0),\_defineProperty(this,"user",null),\_defineProperty(this,"password",null),\_defineProperty(this,"data",{}),\_defineProperty(this,"button",null),\_defineProperty(this,"spinner",null),\_defineProperty(this,"progressbar",null),\_defineProperty(this,"context",this),\_defineProperty(this,"callback",null),\_defineProperty(this,"onErrorCallback",null),\_defineProperty(this,"responseType","json"),\_defineProperty(this,"headers",{}),\_defineProperty(this,"timeout",15e3),\_defineProperty(this,"methods\_to\_convert\_data\_to\_URL",["GET","HEAD"]),\_defineProperty(this,"body",null),\_defineProperty(this,"http\_code",0),\_defineProperty(this,"status\_text",""),e)void 0!==this[t]&&(this[t]=e[t]);if(this.prepare(),Object.keys(this.data).length&&(this.deleteDoubleJSONEncoding(this.data),this.convertData()),!this.url)return console.log("%cXHR%c not URL provided","color: red; font-weight: bold;","color: grey; font-weight: normal;"),!1;this.xhr.open(this.method,this.url,this.async,this.user,this.password),this.setHeaders(),this.xhr.responseType=this.responseType,this.xhr.timeout=this.timeout,this.xhr.onreadystatechange=function(){this.isWpNonceError()?this.getFreshNonceAndRerunXHR(e):this.onReadyStateChange()}.bind(this),this.xhr.onload=function(){this.onLoad()}.bind(this),this.xhr.onprogress=function(e){this.onProgress(e)}.bind(this),this.xhr.onerror=function(){this.onError()}.bind(this),this.xhr.ontimeout=function(){this.onTimeout()}.bind(this),this.xhr.send(this.body)}return \_createClass(n,[{key:"prepare",value:function(){this.button&&(this.button.setAttribute("disabled","disabled"),this.button.style.cursor="not-allowed"),this.spinner&&(this.spinner.style.display="inline")}},{key:"complete",value:function(){this.http\_code=this.xhr.status,this.status\_text=this.xhr.statusText,this.button&&(this.button.removeAttribute("disabled"),this.button.style.cursor="auto"),this.spinner&&(this.spinner.style.display="none"),this.progressbar&&this.progressbar.fadeOut("slow")}},{key:"onReadyStateChange",value:function(){null!==this.on\_ready\_state\_change&&"function"==typeof this.on\_ready\_state\_change&&this.on\_ready\_state\_change()}},{key:"onProgress",value:function(e){null!==this.on\_progress&&"function"==typeof this.on\_progress&&this.on\_progress()}},{key:"onError",value:function(){console.log("error"),this.complete(),this.error(this.http\_code,this.status\_text),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback(this.status\_text)}},{key:"onTimeout",value:function(){this.complete(),this.error(0,"timeout"),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback("Timeout")}},{key:"onLoad",value:function(){if(this.complete(),"json"===this.responseType){if(null===this.xhr.response)return this.error(this.http\_code,this.status\_text,"No response"),!1;if(void 0!==this.xhr.response.error)return this.error(this.http\_code,this.status\_text,this.xhr.response.error),!1}null!==this.callback&&"function"==typeof this.callback&&this.callback.call(this.context,this.xhr.response,this.data)}},{key:"isWpNonceError",value:function(){var e=!1,t=!1;return 4==this.xhr.readyState&&(e="object"===\_typeof(this.xhr.response)&&null!==this.xhr.response&&this.xhr.response.hasOwnProperty("data")&&this.xhr.response.data.hasOwnProperty("status")&&403===this.xhr.response.data.status,t="-1"===this.xhr.response&&403===this.xhr.status),e||t}},{key:"getFreshNonceAndRerunXHR",value:function(e){var t,o="";e.hasOwnProperty("headers")&&e.headers.hasOwnProperty("X-WP-Nonce")&&(o=e.headers["X-WP-Nonce"]),""!==(o=e.hasOwnProperty("data")&&e.data.hasOwnProperty("\_ajax\_nonce")?e.data.\_ajax\_nonce:o)&&((t={method:"POST"}).data={spbc\_remote\_call\_action:"get\_fresh\_wpnonce",plugin\_name:"antispam",nonce\_prev:o,initial\_request\_params:e},t.notJson=!0,t.url=ctPublicFunctions.host\_url,t.callback=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var n=t[0],a=!1;(a=void 0!==t[1]&&t[1].hasOwnProperty("initial\_request\_params")?t[1].initial\_request\_params:a)&&n.hasOwnProperty("wpnonce")&&(ctPublicFunctions.\_fresh\_nonce=n.wpnonce,"rest"===ctPublicFunctions.data\_\_ajax\_type?(new ApbctCore).rest(a):(new ApbctCore).ajax(a))},new n(t))}},{key:"error",value:function(e,t,o){var n="";"timeout"===t?n+="Server response timeout":200===e?"parsererror"===t?n+="Unexpected response from server. See console for details.":(n+="Unexpected error. Status: "+t+".",void 0!==o&&(n+=" Additional error info: "+o)):n+=500===e?"Internal server error.":"Unexpected response code:"+e,this.errorOutput(n)}},{key:"errorOutput",value:function(e){console.log("%c ctXHR error: %c"+e,"color: red;","color: grey;")}},{key:"setHeaders",value:function(){for(var e in this.headers)void 0!==this.headers[e]&&this.xhr.setRequestHeader(e,this.headers[e])}},{key:"convertData",value:function(){return~this.methods\_to\_convert\_data\_to\_URL.indexOf(this.method)?this.convertDataToURL():this.convertDataToBody()}},{key:"convertDataToURL",value:function(){var e=new URLSearchParams(this.data).toString(),t=this.url.match(/^(https?:\/{2})?[a-z0-9.]+\?/)?"&":"?";return this.url+=t+e,this.url}},{key:"convertDataToBody",value:function(){for(var e in this.body=new FormData,this.data)Object.hasOwn(this.data,e)&&this.body.append(e,"object"===\_typeof(this.data[e])?JSON.stringify(this.data[e]):this.data[e]);return this.body}},{key:"deleteDoubleJSONEncoding",value:function(e){if("object"===\_typeof(e))for(var t in e){var o;Object.hasOwn(e,t)&&("object"===\_typeof(e[t])&&(e[t]=this.deleteDoubleJSONEncoding(e[t])),"string"==typeof e[t])&&null!==e[t].match(/^[\[{].\*?[\]}]$/)&&"object"===\_typeof(o=JSON.parse(e[t]))&&(e[t]=o)}return e}}])})(),ApbctAjax=(()=>{function n(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return \_classCallCheck(this,n),(t=t[0]).data.\_ajax\_nonce=selectActualNonce(),\_callSuper(this,n,[t])}return \_inherits(n,ApbctXhr),\_createClass(n)})(),ApbctRest=(()=>{function a(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];\_classCallCheck(this,a);var t=t[0],n=selectActualNonce();return t.url=a.default\_route+t.route,t.headers={"X-WP-Nonce":n},\_defineProperty(n=\_callSuper(this,a,[t]),"route",""),n}return \_inherits(a,ApbctXhr),\_createClass(a)})();function ctSetCookie(e,t,n){var o,a=["ct\_sfw\_pass\_key","ct\_sfw\_passed","wordpress\_apbct\_antibot","apbct\_anticrawler\_passed","apbct\_antiflood\_passed","apbct\_email\_encoder\_passed"],c=!1;"string"==typeof e&&(c="ct\_pointer\_data"===e,"string"!=typeof t&&"number"!=typeof t||(e=[[e,t,n]])),"none"===ctPublicFunctions.data\_\_cookies\_type?(o=[],e.forEach(function(e){-1!==a.indexOf(e[0])?o.push(e):apbctLocalStorage.set(e[0],encodeURIComponent(e[1]))}),0<o.length&&ctSetAlternativeCookie(o),ctPublic.force\_alt\_cookies&&!c?ctSetAlternativeCookie(e,{forceAltCookies:!0}):ctNoCookieAttachHiddenFieldsToForms()):"native"===ctPublicFunctions.data\_\_cookies\_type?(ctPublic.force\_alt\_cookies&&!c&&ctSetAlternativeCookie(e,{forceAltCookies:!0}),e.forEach(function(e){var t=void 0!==e[2]?"expires="+n+"; ":"",o="https:"===location.protocol?"; secure":"";document.cookie=ctPublicFunctions.cookiePrefix+e[0]+"="+encodeURIComponent(e[1])+"; "+t+"path=/; samesite=lax"+o})):"alternative"!==ctPublicFunctions.data\_\_cookies\_type||c||ctSetAlternativeCookie(e)}function ctDetectForcedAltCookiesForms(){var e=0<document.querySelectorAll("#tmpl-nf-layout").length,t=0<document.querySelectorAll(".uael-registration-form-wrapper").length,o=0<document.querySelectorAll('script[id\*="smart-forms"]').length,n=0<document.querySelectorAll('iframe[name="jetpack\_remote\_comment"]').length,a=0<document.querySelectorAll(".cwginstock-subscribe-form").length,c=0<document.querySelectorAll('div[id^="user-registration-form"]').length,i=0<document.querySelectorAll('div[class^="et\_pb\_newsletter\_form"]').length,r=0<document.querySelectorAll('div[class^="fluent\_booking\_app"]').length,l=0<document.querySelectorAll('div[class^="et\_bloom\_form\_container"]').length,s=0<document.querySelectorAll('div[class\*="pafe-form"]').length,u=0<document.querySelectorAll('div [class\*="otter-form"]').length;ctPublic.force\_alt\_cookies=o||e||n||t||a||c||i||r||s||l||u,setTimeout(function(){var e;ctPublic.force\_alt\_cookies||(e=0<document.querySelectorAll('main[id^="bookingpress\_booking\_form"]').length,ctPublic.force\_alt\_cookies=e)},1e3)}function ctSetAlternativeCookie(e,t){"function"==typeof getJavascriptClientData?Array.isArray(e)&&(e=getJavascriptClientData(e)):console.log("APBCT ERROR: getJavascriptClientData() is not loaded");try{e=JSON.parse(e)}catch(e){return void console.log("APBCT ERROR: JSON parse error:"+e)}e.apbct\_site\_referer||(e.apbct\_site\_referer=location.href);var o=t&&t.callback||null,n=t&&t.onErrorCallback||null;t&&t.forceAltCookies&&(e.apbct\_force\_alt\_cookies=!0),"rest"===ctPublicFunctions.data\_\_ajax\_type?("string"==typeof e.apbct\_pixel\_url&&-1!==e.apbct\_pixel\_url.indexOf("%3A")&&(e.apbct\_pixel\_url=decodeURIComponent(e.apbct\_pixel\_url)),apbct\_public\_sendREST("alt\_sessions",{method:"POST",data:{cookies:e},callback:o,onErrorCallback:n})):"admin\_ajax"===ctPublicFunctions.data\_\_ajax\_type&&apbct\_public\_sendAJAX({action:"apbct\_alt\_session\_\_save\_\_AJAX",cookies:e},{notJson:1,callback:o,onErrorCallback:n,beforeSend:function(e){e.setRequestHeader("X-Robots-Tag","noindex, nofollow")}})}function ctGetCookie(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?\*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]\*)"));return e?decodeURIComponent(e[1]):void 0}function ctDeleteCookie(e){var t;"none"!==ctPublicFunctions.data\_\_cookies\_type&&("native"===ctPublicFunctions.data\_\_cookies\_type?(t="https:"===location.protocol?"; secure":"",document.cookie=e+'=""; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax'+t):ctPublicFunctions.data\_\_cookies\_type)}function apbct\_public\_sendAJAX(e,t,o){var n=[],o=(n.callback=t.callback||null,n.onErrorCallback=t.onErrorCallback||null,n.callback\_context=t.callback\_context||null,n.callback\_params=t.callback\_params||null,n.async=t.async||!0,n.notJson=t.notJson||null,n.responseType=t.notJson?"text":"json",n.timeout=t.timeout||15e3,n.obj=o||null,n.button=t.button||null,n.spinner=t.spinner||null,n.progressbar=t.progressbar||null,n.silent=t.silent||null,n.no\_nonce=t.no\_nonce||null,n.data=e,n.url=ctPublicFunctions.\_ajax\_url,selectActualNonce());"string"==typeof e?(n.no\_nonce||(n.data=n.data+"&\_ajax\_nonce="+o),n.data=n.data+"&no\_cache="+Math.random()):(n.no\_nonce||(n.data.\_ajax\_nonce=o),n.data.no\_cache=Math.random()),(new ApbctCore).ajax(n)}function apbct\_public\_sendREST(e,t){var o=[];o.route=e,o.callback=t.callback||null,o.onErrorCallback=t.onErrorCallback||null,o.data=t.data||[],o.method=t.method||"POST",(new ApbctCore).rest(o)}function apbctGenerateUniqueID(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)}\_defineProperty(ApbctRest,"default\_route",ctPublicFunctions.\_rest\_url+"cleantalk-antispam/v1/"),Object.prototype.hasOwn||Object.defineProperty(Object.prototype,"hasOwn",{value:function(e){return Object.prototype.hasOwnProperty.call(this,e)},enumerable:!1,configurable:!0,writable:!0});var apbctLocalStorage={get:function(t,o){void 0===o&&(o="value");t=localStorage.getItem(t);if(null!==t)try{var n=JSON.parse(t);if(!n.hasOwnProperty(o))return n;try{return JSON.parse(n[o])}catch(e){return n[o].toString()}}catch(e){return t}return!1},set:function(e,t){var o;!(2<arguments.length&&void 0!==arguments[2])||arguments[2]?(o={value:JSON.stringify(t),timestamp:Math.floor((new Date).getTime()/1e3)},localStorage.setItem(e,JSON.stringify(o))):localStorage.setItem(e,t)},isAlive:function(e,t){return void 0===t&&(t=86400),this.get(e,"timestamp")+t>Math.floor((new Date).getTime()/1e3)},isSet:function(e){return null!==localStorage.getItem(e)},delete:function(e){localStorage.removeItem(e)},getCleanTalkData:function(){for(var e={},t=0;t<localStorage.length;t++){var o=localStorage.key(t);-1===o.indexOf("ct\_")&&-1===o.indexOf("apbct\_")||(e[o.toString()]=apbctLocalStorage.get(o))}return e}},apbctSessionStorage={get:function(t,e){void 0===e&&(e="value");t=sessionStorage.getItem(t);if(null!==t)try{var o=JSON.parse(t);return o.hasOwnProperty(e)?JSON.parse(o[e]):o}catch(e){return t}return!1},set:function(e,t){var o;!(2<arguments.length&&void 0!==arguments[2])||arguments[2]?(o={value:JSON.stringify(t),timestamp:Math.floor((new Date).getTime()/1e3)},sessionStorage.setItem(e,JSON.stringify(o))):sessionStorage.setItem(e,t)},isSet:function(e){return null!==sessionStorage.getItem(e)},delete:function(e){sessionStorage.removeItem(e)},getCleanTalkData:function(){for(var e={},t=0;t<sessionStorage.length;t++){var o=sessionStorage.key(t);-1===o.indexOf("ct\_")&&-1===o.indexOf("apbct\_")||(e[o.toString()]=apbctSessionStorage.get(o))}return e}};function apbctOnAnimationStart(e){("onautofillstart"===e.animationName?apbctAutocomplete:apbctCancelAutocomplete)(e.target)}function apbctOnInput(e){("insertReplacementText"!==e.inputType&&"data"in e?apbctCancelAutocomplete:apbctAutocomplete)(e.target)}function apbctAutocomplete(e){var t;e.hasAttribute("autocompleted")||(e.setAttribute("autocompleted",""),t=new window.CustomEvent("onautocomplete",{bubbles:!0,cancelable:!0,detail:null}),e.dispatchEvent(t))||(e.value="")}function apbctCancelAutocomplete(e){e.hasAttribute("autocompleted")&&(e.removeAttribute("autocompleted"),e.dispatchEvent(new window.CustomEvent("onautocomplete",{bubbles:!0,cancelable:!1,detail:null})))}var ctMouseReadInterval,ctMouseWriteDataInterval,tokenCheckerIntervalId,CTTypoData=(()=>\_createClass(function e(){\_classCallCheck(this,e),\_defineProperty(this,"fieldData",{isAutoFill:!1,isUseBuffer:!1,speedDelta:0,firstKeyTimestamp:0,lastKeyTimestamp:0,lastDelta:0,countOfKey:0}),\_defineProperty(this,"fields",document.querySelectorAll("textarea[name=comment]")),\_defineProperty(this,"data",[])},[{key:"gatheringFields",value:function(){var o=this;Array.prototype.slice.call(this.fields).forEach(function(e,t){o.data.push(Object.assign({},o.fieldData))})}},{key:"setListeners",value:function(){var n=this;this.fields.forEach(function(e,t){e.addEventListener("paste",function(){n.data[t].isUseBuffer=!0})}),this.fields.forEach(function(e,t){e.addEventListener("onautocomplete",function(){n.data[t].isAutoFill=!0})}),this.fields.forEach(function(e,o){e.addEventListener("input",function(){n.data[o].countOfKey++;var e,t=+new Date;1===n.data[o].countOfKey?(n.data[o].lastKeyTimestamp=t,n.data[o].firstKeyTimestamp=t):(e=t-n.data[o].lastKeyTimestamp,2===n.data[o].countOfKey?(n.data[o].lastKeyTimestamp=t,n.data[o].lastDelta=e):2<n.data[o].countOfKey&&(n.data[o].speedDelta+=Math.abs(n.data[o].lastDelta-e),n.data[o].lastKeyTimestamp=t,n.data[o].lastDelta=e))})})}}]))(),ctDate=new Date,ctTimeMs=(new Date).getTime(),ctMouseEventTimerFlag=!0,ctMouseData=[],ctMouseDataCounter=0,ctCheckedEmails={},ctCheckedEmailsExist={};function apbct\_attach\_event\_handler(e,t,o){"function"==typeof window.addEventListener?e.addEventListener(t,o):e.attachEvent(t,o)}function apbct\_remove\_event\_handler(e,t,o){"function"==typeof window.removeEventListener?e.removeEventListener(t,o):e.detachEvent(t,o)}var ctFunctionFirstKey=function(e){ctSetCookie("ct\_fkp\_timestamp",Math.floor((new Date).getTime()/1e3)),ctKeyStopStopListening()},ctFunctionMouseMove=(cronFormsHandler(2e3),ctPublic.data\_\_key\_is\_ok&&(ctMouseReadInterval=setInterval(function(){ctMouseEventTimerFlag=!0},150),ctMouseWriteDataInterval=setInterval(function(){ctSetCookie("ct\_pointer\_data",JSON.stringify(ctMouseData))},1200)),function(e){ctSetMouseMoved(),!0===ctMouseEventTimerFlag&&(ctMouseData.push([Math.round(e.clientY),Math.round(e.clientX),Math.round((new Date).getTime()-ctTimeMs)]),ctMouseEventTimerFlag=!1,50<=++ctMouseDataCounter)&&ctMouseStopData()});function cronFormsHandler(){setTimeout(function(){setInterval(function(){restartFieldsListening(),restartBotDetectorEventTokenAttach()},2e3)},0<arguments.length&&void 0!==arguments[0]?arguments[0]:2e3)}function restartBotDetectorEventTokenAttach(){var e,t=0<document.getElementsByClassName("latepoint-form").length||0<document.getElementsByClassName("mec-booking-form-container").length||null!==document.getElementById("login-form-popup");try{t&&(e=apbctLocalStorage.get("bot\_detector\_event\_token"),"function"==typeof setEventTokenField)&&void 0!==e&&64===e.length&&setEventTokenField(e)}catch(e){console.log(e.toString())}}function ctMouseStopData(){apbct\_remove\_event\_handler(document,"mousemove",ctFunctionMouseMove),clearInterval(ctMouseReadInterval),clearInterval(ctMouseWriteDataInterval)}function ctKeyStopStopListening(){apbct\_remove\_event\_handler(document,"mousedown",ctFunctionFirstKey),apbct\_remove\_event\_handler(document,"keydown",ctFunctionFirstKey)}function checkEmail(e){var t=e.target.value;!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||!t||t in ctCheckedEmails||("rest"===ctPublicFunctions.data\_\_ajax\_type?apbct\_public\_sendREST("check\_email\_before\_post",{method:"POST",data:{email:t},callback:function(e){e.result&&(ctCheckedEmails[t]={result:e.result,timestamp:Date.now()/1e3|0},ctSetCookie("ct\_checked\_emails",JSON.stringify(ctCheckedEmails)))}}):"admin\_ajax"===ctPublicFunctions.data\_\_ajax\_type&&apbct\_public\_sendAJAX({action:"apbct\_email\_check\_before\_post",email:t},{callback:function(e){e.result&&(ctCheckedEmails[t]={result:e.result,timestamp:Date.now()/1e3|0},ctSetCookie("ct\_checked\_emails",JSON.stringify(ctCheckedEmails)))}}))}function checkEmailExist(t){var e,o=t.target.value;o&&o.length?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)&&(o in ctCheckedEmailsExist?(e=ctCheckedEmailsExist[o],getResultCheckEmailExist(t,e,o)):(viewCheckEmailExist(t,"load"),(ctPublicFunctions.data\_\_ajax\_type="rest")===ctPublicFunctions.data\_\_ajax\_type?apbct\_public\_sendREST("check\_email\_exist\_post",{method:"POST",data:{email:o},callback:function(e){getResultCheckEmailExist(t,e,o)}}):"admin\_ajax"===ctPublicFunctions.data\_\_ajax\_type&&apbct\_public\_sendAJAX({action:"apbct\_email\_check\_exist\_post",email:o},{callback:function(e){getResultCheckEmailExist(t,e,o)}}))):((e=document.getElementById("apbct-check\_email\_exist-block"))&&e.remove(),(e=document.getElementById("apbct-check\_email\_exist-popup\_description"))&&e.remove())}function getResultCheckEmailExist(e,t,o){t&&t.result&&(t=t.result,ctCheckedEmailsExist[o]={result:t,timestamp:Date.now()/1e3|0},"EXISTS"==t.result?viewCheckEmailExist(e,"good\_email",t.text\_result):viewCheckEmailExist(e,"bad\_email",t.text\_result),ctSetCookie("ct\_checked\_emails\_exist",JSON.stringify(ctCheckedEmailsExist)))}function viewCheckEmailExist(e,t,o){var e=e.target.parentElement,n=e.querySelector('[name\*="email"]');if(n){var a,c;switch(document.getElementById("apbct-check\_email\_exist-block")?a=document.getElementById("apbct-check\_email\_exist-block"):((a=document.createElement("div")).setAttribute("class","apbct-check\_email\_exist-block"),a.setAttribute("id","apbct-check\_email\_exist-block"),a.style.top=n.getBoundingClientRect().top+"px",a.style.left=n.getBoundingClientRect().right-35-10+"px",a.style.height=n.offsetHeight+"px",a.style.width="35px",window.addEventListener("scroll",function(){a.style.top=n.getBoundingClientRect().top+"px"}),e.after(a)),document.getElementById("apbct-check\_email\_exist-popup\_description")?c=document.getElementById("apbct-check\_email\_exist-popup\_description"):((c=document.createElement("div")).setAttribute("class","apbct-check\_email\_exist-popup\_description"),c.setAttribute("id","apbct-check\_email\_exist-popup\_description"),c.style.width=n.offsetWidth+"px",c.style.left=n.getBoundingClientRect().left+"px",window.addEventListener("scroll",function(){c.style.top=a.getBoundingClientRect().top+"px"}),a.after(c)),t){case"load":a.classList.remove("apbct-check\_email\_exist-good\_email","apbct-check\_email\_exist-bad\_email"),a.classList.add("apbct-check\_email\_exist-load");break;case"good\_email":a.classList.remove("apbct-check\_email\_exist-load","apbct-check\_email\_exist-bad\_email"),a.classList.add("apbct-check\_email\_exist-good\_email"),a.onmouseover=function(){c.textContent=o,c.style.display="block",c.style.top=n.getBoundingClientRect().top-c.getBoundingClientRect().height+"px",c.style.color="#1C7129"},a.onmouseout=function(){c.style.display="none"};break;case"bad\_email":a.classList.remove("apbct-check\_email\_exist-load","apbct-check\_email\_exist-good\_email"),a.classList.add("apbct-check\_email\_exist-bad\_email"),a.onmouseover=function(){c.textContent=o,c.style.display="block",c.style.top=n.getBoundingClientRect().top-c.getBoundingClientRect().height+"px",c.style.color="#E01111"},a.onmouseout=function(){c.style.display="none"}}}}function ctIsDrawPixel(){return+ctPublic.pixel\_\_enabled||"none"===ctPublic.data\_\_cookies\_type&&0===document.querySelectorAll("img#apbct\_pixel").length||"alternative"===ctPublic.data\_\_cookies\_type&&0===document.querySelectorAll("img#apbct\_pixel").length}function ctSetPixelImg(e){var t;ctSetCookie("apbct\_pixel\_url",e),ctIsDrawPixel()&&!document.getElementById("apbct\_pixel")&&((t=document.createElement("img")).setAttribute("alt","CleanTalk Pixel"),t.setAttribute("title","CleanTalk Pixel"),t.setAttribute("id","apbct\_pixel"),t.setAttribute("style","display: none; left: 99999px;"),t.setAttribute("src",e),apbct("body").append(t))}function ctSetPixelImgFromLocalstorage(e){var t;ctIsDrawPixel()&&!document.getElementById("apbct\_pixel")&&((t=document.createElement("img")).setAttribute("alt","CleanTalk Pixel"),t.setAttribute("title","CleanTalk Pixel"),t.setAttribute("id","apbct\_pixel"),t.setAttribute("style","display: none; left: 99999px;"),t.setAttribute("src",decodeURIComponent(e)),apbct("body").append(t))}function ctGetPixelUrl(){var e=apbctLocalStorage.get("apbct\_pixel\_url");if(!1!==e){if(apbctLocalStorage.isAlive("apbct\_pixel\_url",10800))return void ctSetPixelImgFromLocalstorage(e);apbctLocalStorage.delete("apbct\_pixel\_url")}"rest"===ctPublicFunctions.data\_\_ajax\_type?apbct\_public\_sendREST("apbct\_get\_pixel\_url",{method:"POST",callback:function(e){e&&("string"==typeof e||e instanceof String)&&0===e.indexOf("https")&&(apbctLocalStorage.get("apbct\_pixel\_url")||(apbctLocalStorage.set("apbct\_pixel\_url",e),ctNoCookieAttachHiddenFieldsToForms()),ctSetPixelImg(e))}}):apbct\_public\_sendAJAX({action:"apbct\_get\_pixel\_url"},{notJson:!0,callback:function(e){e&&("string"==typeof e||e instanceof String)&&0===e.indexOf("https")&&(apbctLocalStorage.get("apbct\_pixel\_url")||(apbctLocalStorage.set("apbct\_pixel\_url",e),ctNoCookieAttachHiddenFieldsToForms()),ctSetPixelImg(e))},beforeSend:function(e){e.setRequestHeader("X-Robots-Tag","noindex, nofollow")}})}function ctSetHasScrolled(){apbctLocalStorage.isSet("ct\_has\_scrolled")&&apbctLocalStorage.get("ct\_has\_scrolled")||(ctSetCookie("ct\_has\_scrolled","true"),apbctLocalStorage.set("ct\_has\_scrolled",!0)),"native"===ctPublic.data\_\_cookies\_type&&void 0===ctGetCookie("ct\_has\_scrolled")&&ctSetCookie("ct\_has\_scrolled","true")}function ctSetMouseMoved(){apbctLocalStorage.isSet("ct\_mouse\_moved")&&apbctLocalStorage.get("ct\_mouse\_moved")||(ctSetCookie("ct\_mouse\_moved","true"),apbctLocalStorage.set("ct\_mouse\_moved",!0)),"native"===ctPublic.data\_\_cookies\_type&&void 0===ctGetCookie("ct\_mouse\_moved")&&ctSetCookie("ct\_mouse\_moved","true")}function restartFieldsListening(){apbctLocalStorage.isSet("ct\_has\_input\_focused")||apbctLocalStorage.isSet("ct\_has\_key\_up")||ctStartFieldsListening()}function ctStartFieldsListening(){if(!apbctLocalStorage.isSet("ct\_has\_key\_up")&&!apbctLocalStorage.get("ct\_has\_key\_up")||!apbctLocalStorage.isSet("ct\_has\_input\_focused")&&!apbctLocalStorage.get("ct\_has\_input\_focused")||"native"!==ctPublic.data\_\_cookies\_type||void 0===ctGetCookie("ct\_has\_input\_focused")||void 0===ctGetCookie("ct\_has\_key\_up")){var e=ctGetPageForms();if(ctPublic.handled\_fields=[],0<e.length)for(var t=0;t<e.length;t++)for(var o=e[t].querySelectorAll("input,textarea"),n=0;n<o.length;n++)"hidden"!==o[n].type&&(ctPublic.handled\_fields.push(o[n]),apbct\_attach\_event\_handler(o[n],"focus",ctFunctionHasInputFocused),apbct\_attach\_event\_handler(o[n],"keyup",ctFunctionHasKeyUp))}}function ctStopFieldsListening(e,t){if(void 0!==ctPublic.handled\_fields&&0<ctPublic.handled\_fields.length)for(var o=0;o<ctPublic.handled\_fields.length;o++)apbct\_remove\_event\_handler(ctPublic.handled\_fields[o],e,t)}var ctFunctionHasInputFocused=function(e){ctSetHasInputFocused(),ctStopFieldsListening("focus",ctFunctionHasInputFocused)},ctFunctionHasKeyUp=function(e){ctSetHasKeyUp(),ctStopFieldsListening("keyup",ctFunctionHasKeyUp)};function ctSetHasInputFocused(){apbctLocalStorage.isSet("ct\_has\_input\_focused")&&apbctLocalStorage.get("ct\_has\_input\_focused")||apbctLocalStorage.set("ct\_has\_input\_focused",!0),("native"===ctPublic.data\_\_cookies\_type&&void 0===ctGetCookie("ct\_has\_input\_focused")||"alternative"===ctPublic.data\_\_cookies\_type||"none"===ctPublic.data\_\_cookies\_type&&(void 0!==ctPublic.force\_alt\_cookies||void 0!==ctPublic.force\_alt\_cookies&&ctPublic.force\_alt\_cookies))&&ctSetCookie("ct\_has\_input\_focused","true")}function ctSetHasKeyUp(){apbctLocalStorage.isSet("ct\_has\_key\_up")&&apbctLocalStorage.get("ct\_has\_key\_up")||apbctLocalStorage.set("ct\_has\_key\_up",!0),("native"===ctPublic.data\_\_cookies\_type&&void 0===ctGetCookie("ct\_has\_key\_up")||"alternative"===ctPublic.data\_\_cookies\_type||"none"===ctPublic.data\_\_cookies\_type&&(void 0!==ctPublic.force\_alt\_cookies||void 0!==ctPublic.force\_alt\_cookies&&ctPublic.force\_alt\_cookies))&&ctSetCookie("ct\_has\_key\_up","true")}function apbctPrepareBlockForAjaxForms(){function n(e){if(e.responseText&&-1!==e.responseText.indexOf('"apbct')&&-1===e.responseText.indexOf("DOCTYPE"))try{ctParseBlockMessage(JSON.parse(e.responseText))}catch(e){console.log(e.toString())}}"undefined"!=typeof jQuery?"function"!=typeof jQuery(document).ajaxComplete()?jQuery(document).on("ajaxComplete",function(e,t,o){n(t)}):jQuery(document).ajaxComplete(function(e,t,o){n(t)}):"undefined"!=typeof XMLHttpRequest&&document.addEventListener("readystatechange",function(e){4===e.target.readyState&&n(e.target)})}function startForcedAltEventTokenChecker(){tokenCheckerIntervalId=setInterval(function(){var e;"1"===apbctLocalStorage.get("event\_token\_forced\_set")?clearInterval(tokenCheckerIntervalId):(e=apbctLocalStorage.get("bot\_detector\_event\_token"))&&(ctSetAlternativeCookie([["ct\_bot\_detector\_event\_token",e]],{forceAltCookies:!0}),apbctLocalStorage.set("event\_token\_forced\_set","1"),clearInterval(tokenCheckerIntervalId))},1e3)}function apbct\_ready(){document.addEventListener("gform\_page\_loaded",function(){void 0!==ctPublic.force\_alt\_cookies&&("undefined"===ctPublic.force\_alt\_cookies||ctPublic.force\_alt\_cookies)||(ctNoCookieAttachHiddenFieldsToForms(),"function"!=typeof setEventTokenField)||"function"!=typeof botDetectorLocalStorage||setEventTokenField(botDetectorLocalStorage.get("bot\_detector\_event\_token"))}),ctPublic.wc\_ajax\_add\_to\_cart||apbctCheckAddToCartByGet(),apbctPrepareBlockForAjaxForms(),apbctSessionStorage.isSet("apbct\_session\_id")?apbctLocalStorage.set("apbct\_page\_hits",Number(apbctLocalStorage.get("apbct\_page\_hits"))+1):(e=apbctGenerateUniqueID(),apbctSessionStorage.set("apbct\_session\_id",e,!1),apbctLocalStorage.set("apbct\_page\_hits",1),document.referrer&&new URL(document.referrer).host!==location.host&&apbctSessionStorage.set("apbct\_site\_referer",document.referrer,!1)),apbctWriteReferrersToSessionStorage();var e=apbctLocalStorage.get("ct\_cookies\_type"),e=(e&&e===ctPublic.data\_\_cookies\_type||(apbctLocalStorage.set("ct\_cookies\_type",ctPublic.data\_\_cookies\_type),apbctLocalStorage.delete("ct\_mouse\_moved"),apbctLocalStorage.delete("ct\_has\_scrolled")),"alternative"!==ctPublic.data\_\_cookies\_type&&(ctStartFieldsListening(),setTimeout(ctStartFieldsListening,1e3)),window.addEventListener("animationstart",apbctOnAnimationStart,!0),window.addEventListener("input",apbctOnInput,!0),document.ctTypoData=new CTTypoData,document.ctTypoData.gatheringFields(),document.ctTypoData.setListeners(),[["ct\_ps\_timestamp",Math.floor((new Date).getTime()/1e3)],["ct\_fkp\_timestamp","0"],["ct\_pointer\_data","0"],["ct\_timezone",ctDate.getTimezoneOffset()/60\*-1],["ct\_screen\_info",apbctGetScreenInfo()],["apbct\_headless",navigator.webdriver]]);if(apbctLocalStorage.set("ct\_ps\_timestamp",Math.floor((new Date).getTime()/1e3)),apbctLocalStorage.set("ct\_fkp\_timestamp","0"),apbctLocalStorage.set("ct\_pointer\_data","0"),apbctLocalStorage.set("ct\_timezone",ctDate.getTimezoneOffset()/60\*-1),apbctLocalStorage.set("ct\_screen\_info",apbctGetScreenInfo()),apbctLocalStorage.set("apbct\_headless",navigator.webdriver),"native"!==ctPublic.data\_\_cookies\_type)e.push(["apbct\_visible\_fields","0"]);else{var t=document.cookie.split(";");if(0!==t.length)for(var o=0;o<t.length;o++){var n=t[o].trim().split("=")[0];0===n.indexOf("apbct\_visible\_fields\_")&&ctDeleteCookie(n)}}+ctPublic.pixel\_\_setting&&(ctIsDrawPixel()?ctGetPixelUrl():e.push(["apbct\_pixel\_url",ctPublic.pixel\_\_url])),+ctPublic.data\_\_email\_check\_before\_post&&(e.push(["ct\_checked\_emails","0"]),apbct("input[type = 'email'], #email").on("blur",checkEmail)),+ctPublic.data\_\_email\_check\_exist\_post&&(e.push(["ct\_checked\_emails\_exist","0"]),apbct("comment-form input[name = 'email'], input#email").on("blur",checkEmailExist)),apbctLocalStorage.isSet("ct\_checkjs")?e.push(["ct\_checkjs",apbctLocalStorage.get("ct\_checkjs")]):e.push(["ct\_checkjs",0]),ctDetectForcedAltCookiesForms();var a=apbctLocalStorage.get("bot\_detector\_event\_token"),c=(void 0!==ctPublic.force\_alt\_cookies&&ctPublic.force\_alt\_cookies&&ctPublic.settings\_\_data\_\_bot\_detector\_enabled&&(apbctLocalStorage.set("event\_token\_forced\_set","0"),a?(e.push(["ct\_bot\_detector\_event\_token",a]),apbctLocalStorage.set("event\_token\_forced\_set","1")):startForcedAltEventTokenChecker()),ctSetCookie(e),setTimeout(function(){void 0!==ctPublic.force\_alt\_cookies&&("undefined"===ctPublic.force\_alt\_cookies||ctPublic.force\_alt\_cookies)||ctNoCookieAttachHiddenFieldsToForms(),void 0!==ctPublic.data\_\_cookies\_type&&"none"===ctPublic.data\_\_cookies\_type&&(ctAjaxSetupAddCleanTalkDataBeforeSendAjax(),ctAddWCMiddlewares());for(var e=0;e<document.forms.length;e++){var t,o,n=document.forms[e];ctCheckHiddenFieldsExclusions(document.forms[e],"visible\_fields")||void 0!==document.forms[e].elements.apbct\_visible\_fields&&0<document.forms[e].elements.apbct\_visible\_fields.length||(n.querySelector('input[name="apbct\_visible\_fields"]')&&(t=n.querySelector('input[name="apbct\_visible\_fields"]'),n.removeChild(t)),(t=document.createElement("input")).setAttribute("type","hidden"),t.setAttribute("id","apbct\_visible\_fields\_"+e),t.setAttribute("name","apbct\_visible\_fields"),(o={})[0]=apbct\_collect\_visible\_fields(n),t.value=btoa(JSON.stringify(o)),n.append(t),n.onsubmit\_prev=n.onsubmit,n.ctFormIndex=e,n.onsubmit=function(e){var t;"native"!==ctPublic.data\_\_cookies\_type&&void 0!==e.target.ctFormIndex&&((t={})[0]=apbct\_collect\_visible\_fields(this),apbct\_visible\_fields\_set\_cookie(t,e.target.ctFormIndex)),"none"===ctPublic.data\_\_cookies\_type&&isFormThatNeedCatchXhr(e.target)&&(window.XMLHttpRequest.prototype.send=function(e){var t=getNoCookieData();defaultSend.call(this,"data%5Bct\_no\_cookie\_hidden\_field%5D="+t+"&"+e),setTimeout(function(){window.XMLHttpRequest.prototype.send=defaultSend},0)}),e.target.onsubmit\_prev instanceof Function&&!ctOnsubmitPrevCallExclude(e.target)&&setTimeout(function(){e.target.onsubmit\_prev.call(e.target,e)},500)})}},1e3),document.querySelectorAll("[data-original-string]"));if((ctPublic.encodedEmailNodes=c).length)for(var i=0;i<c.length;++i)c[i].parentElement.href||c[i].parentElement.parentElement.href||c[i].addEventListener("click",ctFillDecodedEmailHandler);var r,l=\_createForOfIteratorHelper(document.forms);try{for(l.s();!(r=l.n()).done;)(()=>{var t=r.value;"undefined"!=typeof ctPublic&&1==+ctPublic.settings\_\_forms\_\_search\_test&&("searchform"===t.getAttribute("id")||null!==t.getAttribute("class")&&-1!==t.getAttribute("class").indexOf("search-form")||null!==t.getAttribute("role")&&-1!==t.getAttribute("role").indexOf("search"))&&(t.apbctSearchPrevOnsubmit=t.onsubmit,t.onsubmit=function(e){return ctSearchFormOnSubmitHandler(e,t)})})()}catch(e){l.e(e)}finally{l.f()}apbctCatchXmlHttpRequest(),apbctAjaxSetImportantParametersOnCacheExist(ctPublic.advancedCacheExists||ctPublic.varnishCacheExists),void 0!==apbctTrpBrokenIntervalId&&setTimeout(function(){clearInterval(apbctTrpBrokenIntervalId)},1e3)}ctPublic.data\_\_key\_is\_ok&&(apbct\_attach\_event\_handler(document,"mousemove",ctFunctionMouseMove),apbct\_attach\_event\_handler(document,"mousedown",ctFunctionFirstKey),apbct\_attach\_event\_handler(document,"keydown",ctFunctionFirstKey),apbct\_attach\_event\_handler(document,"scroll",ctSetHasScrolled));var apbctTrpBrokenIntervalId=setInterval(apbctFixBrokenTRP,100);function apbctFixBrokenTRP(){var t='<div class="apbct-real-user-author-name">';if(-1<document.documentElement.textContent.indexOf(t)){for(var o=document.documentElement.textContent.match(new RegExp(t+"(.\*?)</div>"))[1],e=document.querySelectorAll(".comment-author"),n=0;n<e.length;n++)e[n].childNodes.forEach(function(e){e.textContent.includes(t)&&(e.textContent=o,apbctFixBrokenTRP())});for(var a=document.querySelectorAll(".woocommerce-review\_\_author"),c=0;c<a.length;c++)a[c].childNodes.forEach(function(e){e.textContent.includes(t)&&(e.textContent=o,apbctFixBrokenTRP())})}}function ctAddWCMiddlewares(){window.hasOwnProperty("wp")&&window.wp.hasOwnProperty("apiFetch")&&"function"==typeof window.wp.apiFetch.use&&window.wp.apiFetch.use(function(e,t){return"object"===\_typeof(e)&&null!==e&&e.hasOwnProperty("data")&&e.hasOwnProperty("path")&&(e.data.hasOwnProperty("requests")&&0<e.data.requests.length&&e.data.requests[0].hasOwnProperty("path")&&"/wc/store/v1/cart/add-item"===e.data.requests[0].path&&(e.data.requests[0].data.ct\_no\_cookie\_hidden\_field=getNoCookieData()),"/wc/store/v1/checkout"===e.path)&&(e.data.ct\_no\_cookie\_hidden\_field=getNoCookieData()),t(e)})}function apbctCatchXmlHttpRequest(){var n;null!==document.querySelector("div.wfu\_container")&&(n=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(e){if(e&&"string"==typeof e&&-1!==e.indexOf("action=wfu\_ajax\_action\_ask\_server")){var t="",o=localStorage.getItem("bot\_detector\_event\_token");try{o=JSON.parse(o)}catch(e){o=!1}null!==o&&!1!==o&&o.hasOwnProperty("value")&&""!==o.value&&(t+="&data%5Bct\_bot\_detector\_event\_token%5D="+(o=o.value));o=getNoCookieData();return n.apply(this,[e+=t+="&data%5Bct\_no\_cookie\_hidden\_field%5D="+o])}return n.apply(this,[e])})}function apbctAjaxSetImportantParametersOnCacheExist(e){e&&("rest"===ctPublicFunctions.data\_\_ajax\_type?apbct\_public\_sendREST("apbct\_set\_important\_parameters",{}):"admin\_ajax"===ctPublicFunctions.data\_\_ajax\_type&&apbct\_public\_sendAJAX({action:"apbct\_set\_important\_parameters"},{}))}function ctAjaxSetupAddCleanTalkDataBeforeSendAjax(){var n=!1;"undefined"!=typeof jQuery&&"function"==typeof jQuery.ajaxSetup&&jQuery.ajaxSetup({beforeSend:function(e,t){var o=!1;if("string"==typeof t.data&&(-1!==t.data.indexOf("twt\_cc\_signup")&&(o="twt\_cc\_signup"),-1!==t.data.indexOf("action=mailpoet")&&(o="action=mailpoet"),-1!==t.data.indexOf("action=user\_registration")&&-1!==t.data.indexOf("ur\_frontend\_form\_nonce")&&(o="action=user\_registration"),-1!==t.data.indexOf("action=happyforms\_message")&&(o="action=happyforms\_message"),-1!==t.data.indexOf("action=new\_activity\_comment"))&&(o="action=new\_activity\_comment"),"string"==typeof t.url&&-1!==t.url.indexOf("wc-ajax=add\_to\_cart")&&(o="wc-ajax=add\_to\_cart",null!==localStorage.getItem("bot\_detector\_event\_token"))){n=localStorage.getItem("bot\_detector\_event\_token");try{n=JSON.parse(n)}catch(e){n=!1}!1!==n&&n.hasOwnProperty("value")&&""!==n.value&&(n=n.value)}o&&(o=getNoCookieData(),n="string"==typeof n?"data%5Bct\_bot\_detector\_event\_token%5D="+n+"&":"",t.data=(o="data%5Bct\_no\_cookie\_hidden\_field%5D="+o+"&")+n+t.data)}})}function ctOnsubmitPrevCallExclude(e){return!!e.classList.contains("hb-booking-search-form")}function ctSearchFormOnSubmitHandler(e,t){try{var o,n,a,c=t.querySelector('[id\*="apbct\_\_email\_id\_\_"]'),i=null,r=null,l=(null!==c&&null!==c.value&&null!==c.getAttribute("apbct\_event\_id")&&(i=c.value,r=c.getAttribute("apbct\_event\_id")),getCleanTalkStorageDataArray()),s=apbctLocalStorage.get("bot\_detector\_event\_token");null===l&&null===c&&null===s||(e.preventDefault(),o=function(){null!==c&&c.parentNode.removeChild(c),"function"==typeof t.apbctSearchPrevOnsubmit?t.apbctSearchPrevOnsubmit():HTMLFormElement.prototype.submit.call(t)},n=l,null!==i&&null!==r&&(n.apbct\_search\_form\_\_honeypot\_value=i,n.apbct\_search\_form\_\_honeypot\_id=r),n.ct\_bot\_detector\_event\_token=s,"string"==typeof n.apbct\_pixel\_url&&-1!==n.apbct\_pixel\_url.indexOf("%3A")&&(n.apbct\_pixel\_url=decodeURIComponent(n.apbct\_pixel\_url)),void 0!==(a=JSON.stringify(n))&&0!==a.length?ctSetAlternativeCookie(a,{callback:o,onErrorCallback:o,forceAltCookies:!0}):o())}catch(e){console.warn("APBCT search form onsubmit handler error. "+e)}}function ctFillDecodedEmailHandler(e){this.removeEventListener("click",ctFillDecodedEmailHandler);ctPublic.encodedEmailNodesIsMixed=!1,document.body.classList.add("apbct-popup-fade");var t,o,n,a,c=document.getElementById("apbct\_popup");c?(c.setAttribute("style","display: inherit"),document.getElementById("apbct\_popup\_text").innerHTML="Please wait while "+ctPublic.wl\_brandname+" is decoding the email addresses."):(c=null,"A"===e.currentTarget.tagName&&(c=(c=e.currentTarget.querySelector("span.apbct-ee-blur\_email-text"))&&c.innerHTML),"SPAN"===e.currentTarget.tagName&&(c=e.currentTarget.querySelector("span.apbct-ee-blur\_email-text").innerHTML),null===(c="IMG"===e.currentTarget.tagName?e.currentTarget.parentNode.innerHTML:c)&&(c="obfuscated email"),(t=document.createElement("div")).setAttribute("class","apbct-popup apbct-email-encoder-popup"),t.setAttribute("id","apbct\_popup"),(o=document.createElement("span")).classList="apbct-email-encoder-elements\_center",(n=document.createElement("p")).innerText=ctPublic.wl\_brandname,o.append(n),(n=document.createElement("div")).setAttribute("id","apbct\_popup\_text"),n.setAttribute("class","apbct-email-encoder-elements\_center"),n.style.color="black",(a=document.createElement("p")).id="apbct\_email\_ecoder\_\_popup\_text\_node\_first",a.innerText="Decoding "+c+" to the original one.",(c=document.createElement("p")).id="apbct\_email\_ecoder\_\_popup\_text\_node\_second",c.innerText="The magic is on the way, please wait for a few seconds!",n.append(a),n.append(c),t.append(o),t.append(n),t.append(apbctSetEmailDecoderPopupAnimation()),document.body.append(t)),apbctAjaxEmailDecodeBulk(e,ctPublic.encodedEmailNodes,this)}function apbctSetEmailDecoderPopupAnimation(){var e=["apbct\_dog\_one","apbct\_dog\_two","apbct\_dog\_three"],t=document.createElement("div");t.classList="apbct-ee-animation-wrapper";for(var o=0;o<e.length;o++){var n=document.createElement("span");n.classList="apbct\_dog "+e[o],n.innerText="@",t.append(n)}return t}function apbctAjaxEmailDecodeBulk(e,t,o){for(var n={event\_javascript\_data:getJavascriptClientData(),post\_url:document.location.href,referrer:document.referrer,encodedEmails:""},a={},c=0;c<t.length;c++){void 0!==t[c].href&&0===t[c].href.indexOf("mailto:")&&(e.preventDefault(),ctPublic.encodedEmailNodesIsMixed=!0);var i=document.createElement("div");i.setAttribute("class","apbct-tooltip"),apbct(t[c]).append(i),a[c]=t[c].dataset.originalString}n.encodedEmails=JSON.stringify(a),"rest"===ctPublicFunctions.data\_\_ajax\_type?apbct\_public\_sendREST("apbct\_decode\_email",{data:n,method:"POST",callback:function(e){ctSetCookie("apbct\_email\_encoder\_passed",ctPublic.emailEncoderPassKey),apbctEmailEncoderCallbackBulk(e,t,o)},onErrorCallback:function(e){resetEncodedNodes(),ctShowDecodeComment(e)}}):(n.action="apbct\_decode\_email",apbct\_public\_sendAJAX(n,{notJson:!1,callback:function(e){ctSetCookie("apbct\_email\_encoder\_passed",ctPublic.emailEncoderPassKey),apbctEmailEncoderCallbackBulk(e,t,o)},onErrorCallback:function(e){resetEncodedNodes(),ctShowDecodeComment(e)}}))}function apbctEmailEncoderCallbackBulk(i,r,l){i.success&&!0===i.data[0].is\_allowed?setTimeout(function(){var t,e,o,n,a,c=document.getElementById("apbct\_popup");null!==c&&(i.data.forEach(function(e){e.encoded\_email===l.dataset.originalString&&(t=e)}),e=t.decoded\_email.split(/[&?]/)[0],(a=document.createElement("span")).classList.add("copy-email-icon"),a.innerHTML="📋",a.style.cursor="pointer",a.title="Copy email to clipboard",a.addEventListener("click",function(){navigator.clipboard?navigator.clipboard.writeText(e).then(function(){console.log("Email copied to clipboard!")}).catch(function(e){console.log("Failed to copy email: ",e)}):console.log("Clipboard API not supported")}),n=c.querySelector("#apbct\_email\_ecoder\_\_popup\_text\_node\_first"),o=c.querySelector("#apbct\_email\_ecoder\_\_popup\_text\_node\_second"),n.innerText="The original one is "+e+".",n.append(a),o.innerText="Happy conversations!",c.querySelector(".apbct-ee-animation-wrapper").remove(),(n=document.createElement("span")).classList="apbct-email-encoder-elements\_center top-margin-long",(a=document.createElement("button")).innerText="Got it",a.addEventListener("click",function(){document.body.classList.remove("apbct-popup-fade"),c.setAttribute("style","display:none"),fillDecodedEmails(r,i),ctPublic.encodedEmailNodesIsMixed&&l.click()}),a.style.cursor="pointer",n.append(a),c.append(n))},3e3):i.success?(resetEncodedNodes(),ctShowDecodeComment("Blocked: "+i.data[0].comment)):(resetEncodedNodes(),ctShowDecodeComment("Cannot connect with CleanTalk server: "+i.data[0].comment))}function fillDecodedEmails(a,c){for(var e,t=0;t<a.length;t++)if(e=(t=>{var o,e,n;if(c.data.forEach(function(e){e.encoded\_email===a[t].dataset.originalString&&(o=e)}),!1===o.is\_allowed)return{v:void 0};void 0!==a[t].href&&0===a[t].href.indexOf("mailto:")?(e=a[t].href.replace("mailto:",""),n=a[t].innerHTML,a[t].innerHTML=n.replace(e,o.decoded\_email),a[t].href="mailto:"+o.decoded\_email,a[t].querySelectorAll("span.apbct-email-encoder").forEach(function(e){var t=o.decoded\_email.split("&")[0];e.querySelector(".apbct-ee-blur\_email-text").innerHTML=t})):ctProcessDecodedDataResult(o,a[t]),ctPerformMagicBlur(a[t]),a[t].removeEventListener("click",ctFillDecodedEmailHandler)})(t))return e.v}function resetEncodedNodes(){void 0!==ctPublic.encodedEmailNodes&&ctPublic.encodedEmailNodes.forEach(function(e){e.addEventListener("click",ctFillDecodedEmailHandler)})}function getJavascriptClientData(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t={},o=(t.ct\_checked\_emails=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_checked\_emails"),t.ct\_checked\_emails\_exist=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_checked\_emails\_exist"),t.ct\_checkjs=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_checkjs"),t.ct\_fkp\_timestamp=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_fkp\_timestamp"),t.ct\_pointer\_data=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_pointer\_data"),t.ct\_ps\_timestamp=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_ps\_timestamp"),t.ct\_screen\_info=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_screen\_info"),t.ct\_timezone=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_timezone"),apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct\_mouse\_moved")),n=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct\_has\_scrolled"),a=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct\_cookies\_type"),c=apbctLocalStorage.get("apbct\_page\_hits"),i=apbctSessionStorage.get("apbct\_prev\_referer"),r=apbctSessionStorage.get("apbct\_site\_referer"),l=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct\_js\_errors"),s=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"apbct\_pixel\_url"),u=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"apbct\_headless"),d=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_mouse\_moved"),p=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_has\_scrolled"),\_=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_cookies\_type"),m=ctGetCookie(ctPublicFunctions.cookiePrefix+"apbct\_pixel\_url"),f=!!ctGetCookie(ctPublicFunctions.cookiePrefix+"apbct\_headless");if(t.ct\_mouse\_moved=void 0!==o?o:d,t.ct\_has\_scrolled=void 0!==n?n:p,t.ct\_cookies\_type=void 0!==a?a:\_,t.apbct\_pixel\_url=void 0!==s?s:m,t.apbct\_headless=void 0!==u?u:f,t.apbct\_pixel\_url&&"string"==typeof t.apbct\_pixel\_url&&t.apbct\_pixel\_url.indexOf("%3A%2F")&&(t.apbct\_pixel\_url=decodeURIComponent(t.apbct\_pixel\_url)),t.apbct\_page\_hits=c,t.apbct\_prev\_referer=i,t.apbct\_site\_referer=r,t.apbct\_ct\_js\_errors=l,t.apbct\_pixel\_url||(t.apbct\_pixel\_url=ctPublic.pixel\_\_url),"object"===\_typeof(e)&&e!==[])for(var b=0;b<e.length;++b)"object"===\_typeof(e[b][1])?t[e[b][1][0]]=e[b][1][1]:t[e[b][0]]=e[b][1];else console.log("APBCT JS ERROR: Collecting data type mismatch");return t=removeDoubleJsonEncoding(t),JSON.stringify(t)}function removeDoubleJsonEncoding(e){if("object"===\_typeof(e))for(var t in e){var o;"object"===\_typeof(e[t])&&(e[t]=removeDoubleJsonEncoding(e[t])),"string"==typeof e[t]&&null!==e[t].match(/^[\[{].\*?[\]}]$/)&&"object"===\_typeof(o=JSON.parse(e[t]))&&(e[t]=o)}return e}function ctProcessDecodedDataResult(e,t){t.setAttribute("title",""),t.removeAttribute("style"),ctFillDecodedEmail(t,e.decoded\_email)}function ctPerformMagicBlur(e){var t=e.querySelector(".apbct-ee-static-blur"),e=e.querySelector(".apbct-ee-animate-blur");null!==t&&(t.style.display="none"),null!==e&&(e.style.display="inherit")}function ctFillDecodedEmail(e,t){apbct(e).html(apbct(e).html().replace(/.?<span class=["']apbct-ee-blur\_email-text["'].\*>(.+?)<\/span>/,t))}function ctShowDecodeComment(e){e=e||"Can not decode email. Unknown reason";var t=document.getElementById("apbct\_popup"),o=document.getElementById("apbct\_popup\_text");null!==t&&(document.body.classList.remove("apbct-popup-fade"),o.innerText="CleanTalk email decoder: "+e,setTimeout(function(){t.setAttribute("style","display:none")},3e3))}function apbct\_collect\_visible\_fields(e){var t,o=[],n="",a=0,c="",i=0,r=[];for(t in e.elements)isNaN(+t)||(o[t]=e.elements[t]);return(o=o.filter(function(e){return-1===r.indexOf(e.getAttribute("name"))&&(-1===["radio","checkbox"].indexOf(e.getAttribute("type"))||(r.push(e.getAttribute("name")),!1))})).forEach(function(e,t,o){"submit"!==e.getAttribute("type")&&null!==e.getAttribute("name")&&"ct\_checkjs"!==e.getAttribute("name")&&("none"!==getComputedStyle(e).display&&"hidden"!==getComputedStyle(e).visibility&&"0"!==getComputedStyle(e).opacity&&"hidden"!==e.getAttribute("type")||e.classList.contains("wp-editor-area")?(n+=" "+e.getAttribute("name"),a++):(c+=" "+e.getAttribute("name"),i++))}),c=c.trim(),{visible\_fields:n=n.trim(),visible\_fields\_count:a,invisible\_fields:c,invisible\_fields\_count:i}}function apbct\_visible\_fields\_set\_cookie(e,t){var o="object"===\_typeof(e)&&null!==e?e:{};if("native"===ctPublic.data\_\_cookies\_type)for(var n in o){if(10<n)return;ctSetCookie("apbct\_visible\_fields\_"+(void 0!==t?t:n),JSON.stringify(o[n]))}else"none"===ctPublic.data\_\_cookies\_type?ctSetCookie("apbct\_visible\_fields",JSON.stringify(o[0])):ctSetCookie("apbct\_visible\_fields",JSON.stringify(o))}function apbct\_js\_keys\_\_set\_input\_value(e,t,o,n){if(0<document.querySelectorAll("[name^=ct\_checkjs]").length)for(var a=document.querySelectorAll("[name^=ct\_checkjs]"),c=0;c<a.length;c++)a[c].value=e.js\_key}function apbctGetScreenInfo(){return JSON.stringify({fullWidth:document.documentElement.scrollWidth,fullHeight:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),visibleWidth:document.documentElement.clientWidth,visibleHeight:document.documentElement.clientHeight})}function ctParseBlockMessage(e){void 0!==e.apbct&&(e=e.apbct).blocked&&(document.dispatchEvent(new CustomEvent("apbctAjaxBockAlert",{bubbles:!0,detail:{message:e.comment}})),cleantalkModal.loaded=e.comment,cleantalkModal.open(),1==+e.stop\_script)&&window.stop()}function ctSetPixelUrlLocalstorage(e){ctSetCookie("apbct\_pixel\_url",e)}function ctNoCookieConstructHiddenField(e){var t="hidden",e=("submit"===e&&(t="submit"),""),o=getCleanTalkStorageDataArray(),o=JSON.stringify(o);return o="\_ct\_no\_cookie\_data\_"+btoa(o),(e=document.createElement("input")).setAttribute("name","ct\_no\_cookie\_hidden\_field"),e.setAttribute("value",o),e.setAttribute("type",t),e.classList.add("apbct\_special\_field"),e.classList.add("ct\_no\_cookie\_hidden\_field"),e}function getCleanTalkStorageDataArray(){var e=apbctLocalStorage.getCleanTalkData(),t=apbctSessionStorage.getCleanTalkData(),o={typo:[]};return document.ctTypoData&&document.ctTypoData.data&&(o={typo:document.ctTypoData.data}),\_objectSpread(\_objectSpread(\_objectSpread({},e),t),o)}function ctGetPageForms(){var e=document.forms;return e||!1}function ctGetHiddenFieldExclusionsType(e){var t={no\_cookie:0,visible\_fields:0},o=((0==+ctPublic.data\_\_visible\_fields\_required||"get"===e.method.toString().toLowerCase()&&0===e.querySelectorAll(".nf-form-content").length&&"twt\_cc\_signup"!==e.id||e.classList.contains("slp\_search\_form")||e.parentElement.classList.contains("mec-booking")||-1!==e.action.toString().indexOf("activehosted.com")||e.id&&"caspioform"===e.id||e.classList&&e.classList.contains("tinkoffPayRow")||e.classList&&e.classList.contains("give-form")||e.id&&"ult-forgot-password-form"===e.id||e.id&&-1!==e.id.toString().indexOf("calculatedfields")||e.id&&-1!==e.id.toString().indexOf("sac-form")||e.id&&-1!==e.id.toString().indexOf("cp\_tslotsbooking\_pform")||e.name&&-1!==e.name.toString().indexOf("cp\_tslotsbooking\_pform")||"https://epayment.epymtservice.com/epay.jhtml"===e.action.toString()||e.name&&-1!==e.name.toString().indexOf("tribe-bar-form")||e.id&&"ihf-login-form"===e.id||e.id&&"subscriberForm"===e.id&&-1!==e.action.toString().indexOf("actionType=update")||e.id&&"ihf-main-search-form"===e.id||e.id&&"frmCalc"===e.id||-1!==e.action.toString().indexOf("property-organizer-delete-saved-search-submit")||null!==e.querySelector('a[name="login"]'))&&(t.visible\_fields=1),e.parentNode);return(o&&o.classList.contains("proinput")||"options"===e.name&&e.classList.contains("asp-fss-flex"))&&(t.no\_cookie=1),e&&e.classList.contains("woocommerce-form-login")&&(t.visible\_fields=1,t.no\_cookie=1),t}function ctCheckHiddenFieldsExclusions(e,t){return!!Boolean(e.querySelector("fieldset.asl\_sett\_scroll"))||!!e.classList.contains("swpf-instant-filtering")||"string"==typeof t&&-1!==["visible\_fields","no\_cookie"].indexOf(t)&&1===ctGetHiddenFieldExclusionsType(e)[t]}function ctNoCookieAttachHiddenFieldsToForms(){if("none"===ctPublic.data\_\_cookies\_type){var e=ctGetPageForms();if(e)for(var t=0;t<e.length;t++)if(!ctCheckHiddenFieldsExclusions(document.forms[t],"no\_cookie")&&(null===document.forms[t].getAttribute("method")||"post"===document.forms[t].getAttribute("method").toLowerCase())){for(var o=e[t].querySelectorAll(".ct\_no\_cookie\_hidden\_field"),n=0;n<o.length;n++)o[n].outerHTML="";document.forms[t].append(ctNoCookieConstructHiddenField())}}}ctPublic.data\_\_key\_is\_ok&&("loading"!==document.readyState?apbct\_ready():apbct\_attach\_event\_handler(document,"DOMContentLoaded",apbct\_ready),apbctLocalStorage.set("ct\_checkjs",ctPublic.ct\_checkjs\_key,!0));var defaultFetch=window.fetch,defaultSend=XMLHttpRequest.prototype.send;function apbctRealUserBadgeWoocommerce(e,t){if(!(window.innerWidth<768)){var o=document.createElement("div"),t=(o.className="apbct-real-user-wrapper",document.querySelector("#comment-"+t).querySelector(".woocommerce-review\_\_author"));try{e=atob(e),o.innerHTML=e,void 0!==t&&(t.style.display="inline-flex",t.appendChild(o))}catch(e){console.log("APBCT error: "+e.toString())}}}function checkFormsExistForCatching(){setTimeout(function(){isFormThatNeedCatch()&&(window.fetch=function(){for(var e,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return o&&o[0]&&"function"==typeof o[0].includes&&o[0].includes("/wp-json/metform/")&&(e=getNoCookieData(),o)&&o[1]&&o[1].body&&o[1].body.append("ct\_no\_cookie\_hidden\_field",e),defaultFetch.apply(window,o)})},1e3)}function isFormThatNeedCatch(){var e,o=["metform-form-content"],n=!1,t=\_createForOfIteratorHelper(document.forms);try{for(t.s();!(e=t.n()).done;)(()=>{var t=e.value;o.forEach(function(e){t.classList.contains(e)&&(n=!0)})})~~()}catch(e){t.e(e)}finally{t.f()}return n}function isFormThatNeedCatchXhr(e){return null==document.querySelector("div.elementor-widget[title='Login/Signup']")&&!(!e||!e.action||-1===e.action.toString().indexOf("mailpoet\_subscription\_form"))}function getNoCookieData(){var e=apbctLocalStorage.getCleanTalkData(),t=apbctSessionStorage.getCleanTalkData(),e=\_objectSpread(\_objectSpread({},e),t),e=JSON.stringify(e);return"\_ct\_no\_cookie\_data\_"+btoa(e)}function apbctWriteReferrersToSessionStorage(){var e=apbctSessionStorage.get("apbct\_session\_current\_page");!1!==e&&document.location.href!==e&&apbctSessionStorage.set("apbct\_prev\_referer",e,!1),apbctSessionStorage.set("apbct\_session\_current\_page",document.location.href,!1)}function apbctCheckAddToCartByGet(){document.querySelectorAll("a.add\_to\_cart\_button:not(.product\_type\_variable):not(.wc-interactive)").forEach(function(n){n.addEventListener("click",function(e){var t=n.getAttribute("href"),o=apbctLocalStorage.get("bot\_detector\_event\_token");o&&(-1===t.indexOf("?")?t+="?":t+="&",n.setAttribute("href",t+="ct\_bot\_detector\_event\_token="+o))})})}"loading"!==document.readyState?checkFormsExistForCatching():apbct\_attach\_event\_handler(document,"DOMContentLoaded",checkFormsExistForCatching);var ctProtectOutsideIframeCheck,cleantalkModal={loaded:!1,loading:!1,opened:!1,opening:!1,ignoreURLConvert:!1,load:function(e){var t;this.loaded||(this.loading=!0,t=function(e,t,o,n){cleantalkModal.loading=!1,cleantalkModal.loaded=e,document.dispatchEvent(new CustomEvent("cleantalkModalContentLoaded",{bubbles:!0}))},("function"==typeof apbct\_admin\_sendAJAX?apbct\_admin\_sendAJAX:apbct\_public\_sendAJAX)({action:e},{callback:t,notJson:!0}))},open:function(){function e(){var e,t="";for(e in this.styles)t+=e+":"+this.styles[e]+";";return t}var t={styles:{"z-index":"9999999999",position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",display:"flex","justify-content":"center","align-items":"center"},toString:e},o={styles:{position:"relative",padding:"30px",background:"#FFF",border:"1px solid rgba(0,0,0,0.75)","border-radius":"4px","box-shadow":"7px 7px 5px 0px rgba(50,50,50,0.75)"},toString:e},n={styles:{position:"absolute",background:"#FFF",width:"20px",height:"20px",border:"2px solid rgba(0,0,0,0.75)","border-radius":"15px",cursor:"pointer",top:"-8px",right:"-8px","box-sizing":"content-box"},toString:e},a={styles:{content:'""',display:"block",position:"absolute",background:"#000","border-radius":"1px",width:"2px",height:"16px",top:"2px",left:"9px",transform:"rotate(45deg)"},toString:e},c={styles:{content:'""',display:"block",position:"absolute",background:"#000","border-radius":"1px",width:"2px",height:"16px",top:"2px",left:"9px",transform:"rotate(-45deg)"},toString:e},i={styles:{overflow:"hidden"},toString:e},r=document.createElement("style"),i=(r.setAttribute("id","cleantalk-modal-styles"),r.innerHTML="body.cleantalk-modal-opened{"+i+"}",r.innerHTML+="#cleantalk-modal-overlay{"+t+"}",r.innerHTML+="#cleantalk-modal-close{"+n+"}",r.innerHTML+="#cleantalk-modal-close:before{"+a+"}",r.innerHTML+="#cleantalk-modal-close:after{"+c+"}",document.body.append(r),document.createElement("div")),t=(i.setAttribute("id","cleantalk-modal-overlay"),document.body.append(i),document.body.classList.add("cleantalk-modal-opened"),document.createElement("div")),n=(t.setAttribute("id","cleantalk-modal-inner"),t.setAttribute("style",o),i.append(t),document.createElement("div")),a=(n.setAttribute("id","cleantalk-modal-close"),t.append(n),document.createElement("div"));this.loaded?/.\*\/inc/g.test(this.loaded)||this.ignoreURLConvert?a.innerHTML=this.loaded:a.innerHTML=this.loaded.replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="\_blank">$1</a>'):(a.innerHTML="Loading...",this.load("get\_options\_template")),a.setAttribute("id","cleantalk-modal-content"),t.append(a),this.opened=!0},close:function(){document.body.classList.remove("cleantalk-modal-opened"),document.getElementById("cleantalk-modal-overlay").remove(),document.getElementById("cleantalk-modal-styles").remove(),document.dispatchEvent(new CustomEvent("cleantalkModalClosed",{bubbles:!0}))}};function ctProtectExternal(){for(var e,t,o=0;o<document.forms.length;o++)void 0!==document.forms[o].cleantalk\_hidden\_action||void 0!==document.forms[o].cleantalk\_hidden\_method||formIsExclusion(e=document.forms[o])||(isIntegratedForm(e)?apbctProcessExternalForm(e,o,document):void 0!==e.dataset.mailingListId||"string"==typeof e.action&&-1!==e.action.indexOf("webto.salesforce.com")||"string"==typeof e.action&&e.querySelector('[href\*="activecampaign"]')?apbctProcessExternalFormByFakeButton(e,o,document):"string"!=typeof e.action||-1===e.action.indexOf("http://")&&-1===e.action.indexOf("https://")||e.action.split("//")[1].split("/")[0].toLowerCase()!==location.hostname.toLowerCase()&&((t=document.createElement("input")).name="cleantalk\_hidden\_action",t.value=e.action,t.type="hidden",e.appendChild(t),(t=document.createElement("input")).name="cleantalk\_hidden\_method",t.value=e.method,t.type="hidden",e.method="POST",e.appendChild(t),e.action=document.location));apbctProcessIframes(),ctStartFieldsListening()}function formIsExclusion(o){var n=!1;try{o.parentElement&&0<o.parentElement.classList.length&&-1!==o.parentElement.classList[0].indexOf("mewtwo")&&(n=!0),null!==o.getAttribute("action")&&["paypal.com/cgi-bin/webscr"].forEach(function(e){-1!==o.getAttribute("action").indexOf(e)&&(n=!0)}),["give-form","frmCalc","ihf-contact-request-form","wpforms"].forEach(function(e){var t=o.getAttribute("id");null!=t&&-1!==t.indexOf(e)&&(n=!0)}),["search-form","hs-form","ihc-form-create-edit","nf-form-content","elementor-form","wpforms","et\_pb\_searchform"].forEach(function(e){var t=o.getAttribute("class")?o.getAttribute("class"):apbctGetFormClass(o,e);null!=t&&-1!==t.indexOf(e)&&(n=!0)}),["search"].forEach(function(e){var t=o.getAttribute("id");null!=t&&-1!==t.indexOf(e)&&(n=!0)})}catch(e){console.table("APBCT ERROR: formIsExclusion() - ",e)}return n}function apbctGetFormClass(e,t){if("object"==\_typeof(e)&&e.querySelector("."+t))return t}function apbctProcessIframes(){var e=document.getElementsByTagName("iframe");if(0<e.length)for(var t=0;t<e.length;t++)if(null!=e[t].contentDocument){var o=e[t].contentDocument.forms;if(0!==o.length)for(var n=0;n<o.length;n++){var a=o[n];formIsExclusion(a)||apbctProcessExternalForm(a,n,e[t].contentDocument)}}}function apbctProcessExternalForm(e,t,o){var n=document.createElement("i"),n=(n.className="cleantalk\_placeholder",n.style="display: none",e.parentElement.insertBefore(n,e),e.previousSibling),a=e.outerHTML,c=e,e=(e.parentElement.removeChild(e),document.createElement("div")),a=(e.innerHTML=a,n.after(e.firstElementChild),document.createElement("input")),i=(a.name="action",a.value="cleantalk\_force\_ajax\_check",a.type="hidden",o.forms[t]),r=(i.appendChild(a),i.apbctPrev=n,i.apbctFormOriginal=c,!1);void 0!==i.classList&&["newsletterform","ml-block-form"].forEach(function(e){i.classList.contains(e)&&(r=e)}),r?void 0!==(e=o.querySelector("form."+r).querySelector('button[type="submit"]'))&&e.addEventListener("click",function(e){e.preventDefault(),sendAjaxCheckingFormData(i)}):o.forms[t].onsubmit=function(e){e.preventDefault(),sendAjaxCheckingFormData(e.currentTarget)}}function apbctProcessExternalFormByFakeButton(e,t,o){var n,a,c,i=e.querySelector('[type="submit"]'),e=e.querySelector('[type="submit"]').form.onsubmit;i&&(n=i.parentElement,a=i.outerHTML,i.remove(),(c=document.createElement("div")).innerHTML=a,n.appendChild(c.firstElementChild),(a=document.createElement("input")).name="action",a.value="cleantalk\_force\_ajax\_check",a.type="hidden",(c=o.forms[t]).appendChild(a),c.apbctParent=n,c.submitButtonOriginal=i,c.onsubmitOriginal=e,o.forms[t].onsubmit=function(e){e.preventDefault(),sendAjaxCheckingFormData(e.currentTarget)})}function apbctReplaceInputsValuesFromOtherForm(e,t){var o=e.querySelectorAll("button, input, textarea, select"),n=t.querySelectorAll("button, input, textarea, select");-1!==e.outerHTML.indexOf('action="https://www.kulahub.net')||isFormHasDiviRedirect(e)||-1!==e.outerHTML.indexOf('class="et\_pb\_contact\_form')?o.forEach(function(t){n.forEach(function(e){t.name===e.name&&("checkbox"===e.type||"radio"===e.type?e.checked=apbctVal(t):e.value=apbctVal(t))})}):o.forEach(function(t){n.forEach(function(e){t.outerHTML===e.outerHTML&&("checkbox"===e.type||"radio"===e.type?e.checked=apbctVal(t):e.value=apbctVal(t))})})}function ctProtectKlaviyoForm(){var t;document.querySelector('link[rel="dns-prefetch"][href="//static.klaviyo.com"]')&&(t=setInterval(function(){var e=document.querySelectorAll("form.klaviyo-form");e.length&&(clearInterval(t),e.forEach(function(e,t){apbctProcessExternalFormKlaviyo(e,t,document)}))},500))}function apbctProcessExternalFormKlaviyo(t,e,o){var n,a=t.querySelector('button[type="button"].needsclick');a&&(a.disabled=!0,(n=document.createElement("input")).name="action",n.value="cleantalk\_force\_ajax\_check",n.type="hidden",t.appendChild(n),(n=document.createElement("div")).id="apbct-klaviyo-cover",n.style.width="100%",n.style.height="100%",n.style.background="black",n.style.opacity=0,n.style.position="absolute",n.style.top=0,n.style.cursor="pointer",n.onclick=function(e){sendAjaxCheckingFormData(t)},a.parentNode.style.position="relative",a.parentNode.appendChild(n))}function ctProtectOutsideIframe(){var e=document.querySelectorAll("iframe");0<e.length&&e.forEach(function(e){!(-1!==e.src.indexOf("form.typeform.com")||-1!==e.src.indexOf("forms.zohopublic.com")||-1!==e.src.indexOf("link.surepathconnect.com")||e.classList.contains("hs-form-iframe")||-1!==e.src.indexOf("facebook.com")&&-1!==e.src.indexOf("plugins/comments.php"))||!1!==apbctLocalStorage.get("apbct\_iframes\_protected")&&0<apbctLocalStorage.get("apbct\_iframes\_protected").length&&void 0!==e.id&&-1!==apbctLocalStorage.get("apbct\_iframes\_protected").indexOf[e.id]||ctProtectOutsideIframeHandler(e)})}function ctProtectOutsideIframeHandler(e){var t=document.createElement("div"),t=(t.style.width="100%",t.style.height="100%",t.style.background="black",t.style.opacity=0,t.style.position="absolute",t.style.top=0,t.onclick=function(e){var t;void 0===ctProtectOutsideIframeCheck&&((e=e.currentTarget).style.opacity=.5,(t=document.createElement("div")).className="apbct-iframe-preloader",e.appendChild(t),e="",document.querySelector('[name\*="ct\_bot\_detector\_event\_token"]')&&(e=document.querySelector('[name\*="ct\_bot\_detector\_event\_token"]').value),apbct\_public\_sendAJAX({action:"cleantalk\_outside\_iframe\_ajax\_check",ct\_no\_cookie\_hidden\_field:getNoCookieData(),ct\_bot\_detector\_event\_token:e},{async:!1,callback:function(t){!(ctProtectOutsideIframeCheck=!0)===t.apbct.blocked?document.querySelectorAll("div.apbct-iframe-preloader").forEach(function(e){e.parentNode.remove()}):(document.querySelectorAll("div.apbct-iframe-preloader").forEach(function(e){e.parentNode.style.color="white",e.parentNode.innerHTML+=t.apbct.comment}),document.querySelectorAll("div.apbct-iframe-preloader").forEach(function(e){e.remove()}))}}))},e.parentNode.style.position="relative",e.parentNode.appendChild(t),apbctLocalStorage.get("apbct\_iframes\_protected"));!1===t&&(t=[]),void 0!==e.id&&(t.push(e.id),apbctLocalStorage.set("apbct\_iframes\_protected",t))}function catchNextendSocialLoginForm(){var e=document.getElementById("nsl-custom-login-form-main");e&&blockBtnNextendSocialLogin(e)}function blockBtnNextendSocialLogin(e){var t=e.querySelectorAll(".nsl-container-buttons a"),e=e.querySelectorAll('a[data-plugin="nsl"] .nsl-button');t.forEach(function(e){e.setAttribute("data-oauth-login-blocked","true"),e.addEventListener("click",function(e){e.preventDefault()})}),e.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),ctCheckAjax(t)})})}function allowAjaxNextendSocialLogin(e){e.parentElement.setAttribute("data-oauth-login-blocked","false"),e.parentElement.click()}function forbiddenAjaxNextendSocialLogin(e,t){var o,e=e.parentElement;"false"==e.getAttribute("data-oauth-login-blocked")&&e.setAttribute("data-oauth-login-blocked","true"),document.querySelector(".ct-forbidden-msg")||((o=document.createElement("div")).className="ct-forbidden-msg",o.style.background="red",o.style.color="white",o.style.padding="5px",o.innerHTML=t,e.insertAdjacentElement("beforebegin",o))}function ctCheckAjax(t){apbct\_public\_sendAJAX({action:"cleantalk\_nsl\_ajax\_check",ct\_no\_cookie\_hidden\_field:document.getElementsByName("ct\_no\_cookie\_hidden\_field")[0].value},{async:!1,callback:function(e){!1===e.apbct.blocked?allowAjaxNextendSocialLogin(t):forbiddenAjaxNextendSocialLogin(t,e.apbct.comment)}})}function isIntegratedForm(e){var t="string"==typeof e.action?e.action:"",o=null!==e.getAttribute("id")?e.getAttribute("id"):"";return!!(-1!==t.indexOf("app.convertkit.com")||void 0!==e.firstChild.classList&&e.firstChild.classList.contains("cb-form-group")||-1!==t.indexOf("mailerlite.com")||-1!==t.indexOf("colcolmail.co.uk")||-1!==t.indexOf("paypal.com")||-1!==t.indexOf("infusionsoft.com")||-1!==t.indexOf("secure2.convio.net")||-1!==t.indexOf("hookb.in")||-1!==t.indexOf("external.url")||-1!==t.indexOf("tp.media")||-1!==t.indexOf("flodesk.com")||-1!==t.indexOf("sendfox.com")||-1!==t.indexOf("aweber.com")||-1!==t.indexOf("secure.payu.com")||-1!==t.indexOf("mautic")||-1!==o.indexOf("mauticform\_")||-1!==o.indexOf("ihf-contact-request-form")||-1!==t.indexOf("crm.zoho.com")||-1!==o.indexOf("delivra-external-form")||-1!==t.indexOf("eloqua.com")||-1!==t.indexOf("kulahub.net")||isFormHasDiviRedirect(e)||-1!==t.indexOf("eocampaign1.com")||-1!==t.indexOf("wufoo.com"))}function isFormHasDiviRedirect(e){var t=!1,o=document.querySelector('div[id^="et\_pb\_contact\_form"]');return t="object"===\_typeof(e)&&null!==e&&null!==o&&o.hasAttribute("data-redirect\_url")&&""!==o.getAttribute("data-redirect\_url")&&null!==o.querySelector('form[class^="et\_pb\_contact\_form"]')?e===o.querySelector('form[class^="et\_pb\_contact\_form"]'):t}function sendAjaxCheckingFormData(p){var e={},o=(e[0]=apbct\_collect\_visible\_fields(p),apbct\_visible\_fields\_set\_cookie(e),{ct\_bot\_detector\_event\_token:apbctLocalStorage.get("bot\_detector\_event\_token")}),e=p.elements;(e=Array.prototype.slice.call(e)).forEach(function(e,t){""===e.name?o["input\_"+t]=e.value:o[e.name]=e.value}),apbct\_public\_sendAJAX(o,{async:!1,callback:function(e,t,o,n){if(void 0===e.apbct||!+e.apbct.blocked){if(void 0!==p.classList&&p.classList.contains("klaviyo-form"))return(c=document.getElementById("apbct-klaviyo-cover"))&&c.remove(),void((c=p.querySelector('button[type="button"].needsclick'))&&(c.disabled=!1,c.click()));if(void 0!==p.dataset.mailingListId)return p.querySelector('[type="submit"]').remove(),p.apbctParent.appendChild(p.submitButtonOriginal),void p.querySelector('[type="submit"]').click();if(p.hasAttribute("action")&&-1!==p.getAttribute("action").indexOf("webto.salesforce.com"))return p.querySelector('[type="submit"]').remove(),p.apbctParent.appendChild(p.submitButtonOriginal),p.onsubmit=p.onsubmitOriginal,void p.querySelector('[type="submit"]').click();if(p.querySelector('[href\*="activecampaign"]'))return p.querySelector('[type="submit"]').remove(),p.apbctParent.appendChild(p.submitButtonOriginal),p.onsubmit=p.onsubmitOriginal,void p.querySelector('[type="submit"]').click();var a,c=p,i=(p.parentElement.removeChild(p),p.apbctPrev),r=p.apbctFormOriginal,l=!1,s=(apbctReplaceInputsValuesFromOtherForm(c,r),-1!==r.id.indexOf("mautic")&&(l=!0),i.after(r),\_createForOfIteratorHelper(r.querySelectorAll('input[name="apbct\_visible\_fields"]')));try{for(s.s();!(a=s.n()).done;)a.value.remove()}catch(e){s.e(e)}finally{s.f()}var u,d=\_createForOfIteratorHelper(r.querySelectorAll('input[value="cleantalk\_force\_ajax\_check"]'));try{for(d.s();!(u=d.n()).done;)u.value.remove()}catch(e){d.e(e)}finally{d.f()}c=r.querySelectorAll("button[type=submit]");if(0!==c.length)return c[0].click(),void(l&&setTimeout(function(){ctProtectExternal()},1500));if(0!==(c=r.querySelectorAll("input[type=submit]")).length)return void c[0].click();if(0!==(c=r.querySelectorAll('button[data-element="submit"]')).length)return void c[0].click();0!==(c=r.querySelectorAll('input[type="image"][name="submit"]')).length&&c[0].click()}void 0!==e.apbct&&+e.apbct.blocked&&ctParseBlockMessage(e)}})}function catchDynamicRenderedForm(){catchDynamicRenderedFormHandler(document.getElementsByTagName("form"));var e=document.getElementsByTagName("iframe");if(0<e.length)for(var t=0;t<e.length;t++)if(null!=e[t].contentDocument){var o=e[t].contentDocument.forms;if(0===o.length)return;catchDynamicRenderedFormHandler(o,e[t].contentDocument)}}function catchDynamicRenderedFormHandler(e){var t,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,n=[],a=\_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;-1!==c.id.indexOf("hsForm")&&n.push(c.id),-1!==c.id.indexOf("createuser")&&void 0!==c.classList&&c.classList.contains("ihc-form-create-edit")&&n.push(c.id)}}catch(e){a.e(e)}finally{a.f()}for(var i=0,r=n;i<r.length;i++){var l=o.getElementById(r[i]);l.apbct\_external\_onsubmit\_prev=l.onsubmit,l.onsubmit=sendAjaxCheckingDynamicFormData}}function sendAjaxCheckingDynamicFormData(l){l.preventDefault(),l.stopImmediatePropagation();var s=l,e=(l=l.target,document.createElement("input")),e=(e.name="action",e.value="cleantalk\_force\_ajax\_check",e.type="hidden",l.appendChild(e),{}),o=(e[0]=apbct\_collect\_visible\_fields(l),apbct\_visible\_fields\_set\_cookie(e),l.append(ctNoCookieConstructHiddenField("hidden")),{}),e=l.elements;(e=Array.prototype.slice.call(e)).forEach(function(e,t){""===e.name?o["input\_"+t]=e.value:o[e.name]=e.value}),apbct\_public\_sendAJAX(o,{async:!1,callback:function(e){if(void 0===e.apbct||!+e.apbct.blocked){l.onsubmit=null;var t,o=\_createForOfIteratorHelper(l.querySelectorAll('input[name="apbct\_visible\_fields"]'));try{for(o.s();!(t=o.n()).done;)t.value.remove()}catch(e){o.e(e)}finally{o.f()}var n,a=\_createForOfIteratorHelper(l.querySelectorAll('input[value="cleantalk\_force\_ajax\_check"]'));try{for(a.s();!(n=a.n()).done;)n.value.remove()}catch(e){a.e(e)}finally{a.f()}var c,i=\_createForOfIteratorHelper(l.querySelectorAll('input[name="ct\_no\_cookie\_hidden\_field"]'));try{for(i.s();!(c=i.n()).done;)c.value.remove()}catch(e){i.e(e)}finally{i.f()}l.apbct\_external\_onsubmit\_prev instanceof Function&&(r=setTimeout(function(){l.apbct\_external\_onsubmit\_prev.call(l,s)},500),clearTimeout(r));var r=l.querySelector('input[type="submit"]');if(r)return void r.click()}void 0!==e.apbct&&+e.apbct.blocked&&ctParseBlockMessage(e)}})}function apbctVal(e){return e.options&&e.multiple?e.options.filter(function(e){return e.selected}).map(function(e){return e.value}):"checkbox"===e.type||"radio"===e.type?e.checked||null:e.value}function ctCheckInternal(t){var e,o={},n=t.elements;for(e in n)"submit"!==n[e].type&&void 0!==n[e].value&&""!==n[e].value&&(o[n[e].name]=t.elements[e].value);o.action="ct\_check\_internal",apbct\_public\_sendAJAX(o,{url:ctPublicFunctions.\_ajax\_url,callback:function(e){if(!0!==e.success)return alert(e.data),!1;t.origSubmit()}})}function ctCheckInternalIsExcludedForm(t){return["wp-login.php","wp-comments-post.php"].some(function(e){return null!==t.match(new RegExp(ctPublic.blog\_home+".\*"+e))})}document.addEventListener("click",function(e){!e.target||"cleantalk-modal-overlay"!==e.target.id&&"cleantalk-modal-close"!==e.target.id||cleantalkModal.close()}),document.addEventListener("cleantalkModalContentLoaded",function(e){cleantalkModal.opened&&cleantalkModal.loaded&&(document.getElementById("cleantalk-modal-content").innerHTML=cleantalkModal.loaded)}),apbctLocalStorage.set("apbct\_iframes\_protected",[]),window.onload=function(){+ctPublic.settings\_\_forms\_\_check\_external&&(setTimeout(function(){ctProtectExternal(),catchDynamicRenderedForm(),catchNextendSocialLoginForm(),ctProtectOutsideIframe()},2e3),ctProtectKlaviyoForm())},document.addEventListener("DOMContentLoaded",function(){var o="",n="";+ctPublic.settings\_\_forms\_\_check\_internal&&setTimeout(function(){for(var e,t=0;t<document.forms.length;t++)"string"==typeof document.forms[t].action&&(n=document.forms[t],null===(o=n.action).indexOf("https?://")||null===o.match(ctPublic.blog\_home+".\*?.php")||ctCheckInternalIsExcludedForm(o)||(e=n.cloneNode(!0),n.parentNode.replaceChild(e,n),e.origSubmit=n.submit,e.submit=null,e.addEventListener("submit",function(e){return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),ctCheckInternal(e.target),!1})))},500)}); |
  |  | 1 | function ownKeys(t,e){var o,n=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)),n}function \_objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){\_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function \_callSuper(e,t,o){return t=\_getPrototypeOf(t),\_possibleConstructorReturn(e,\_isNativeReflectConstruct()?Reflect.construct(t,o||[],\_getPrototypeOf(e).constructor):t.apply(e,o))}function \_possibleConstructorReturn(e,t){if(t&&("object"==\_typeof(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return \_assertThisInitialized(e)}function \_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function \_isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(\_isNativeReflectConstruct=function(){return!!e})()}function \_getPrototypeOf(e){return(\_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.\_\_proto\_\_||Object.getPrototypeOf(e)})(e)}function \_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&\_setPrototypeOf(e,t)}function \_setPrototypeOf(e,t){return(\_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.\_\_proto\_\_=t,e})(e,t)}function \_createForOfIteratorHelper(e,t){var o,n,a,c,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return a=!(n=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return n=e.done,e},e:function(e){a=!0,o=e},f:function(){try{n||null==i.return||i.return()}finally{if(a)throw o}}};if(Array.isArray(e)||(i=\_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),c=0,{s:t=function(){},n:function(){return c>=e.length?{done:!0}:{done:!1,value:e[c++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function \_unsupportedIterableToArray(e,t){var o;if(e)return"string"==typeof e?\_arrayLikeToArray(e,t):"Map"===(o="Object"===(o={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?\_arrayLikeToArray(e,t):void 0}function \_arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=Array(t);o<t;o++)n[o]=e[o];return n}function \_typeof(e){return(\_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function \_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function \_defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,\_toPropertyKey(n.key),n)}}function \_createClass(e,t,o){return t&&\_defineProperties(e.prototype,t),o&&\_defineProperties(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}function \_defineProperty(e,t,o){return(t=\_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function \_toPropertyKey(e){e=\_toPrimitive(e,"string");return"symbol"==\_typeof(e)?e:e+""}function \_toPrimitive(e,t){if("object"!=\_typeof(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0===o)return("string"===t?String:Number)(e);o=o.call(e,t||"default");if("object"!=\_typeof(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}var ApbctCore=function(){return \_createClass(function e(t){\_classCallCheck(this,e),\_defineProperty(this,"ajax\_parameters",{}),\_defineProperty(this,"restParameters",{}),\_defineProperty(this,"selector",null),\_defineProperty(this,"elements",[]),\_defineProperty(this,"eventCallback",void 0),\_defineProperty(this,"eventSelector",void 0),\_defineProperty(this,"event",void 0),this.select(t)},[{key:"select",value:function(e){return e instanceof HTMLCollection?(this.selector=null,this.elements=[],this.elements=Array.prototype.slice.call(e)):"object"===\_typeof(e)?(this.selector=null,this.elements=[],this.elements[0]=e):"string"==typeof e?(this.selector=e,this.elements=Array.prototype.slice.call(document.querySelectorAll(e))):this.deselect(),this}},{key:"addElement",value:function(e){"object"===\_typeof(e)?this.elements.push(e):"string"==typeof e?(this.selector=e,this.elements=Array.prototype.slice.call(document.querySelectorAll(e))):this.deselect()}},{key:"push",value:function(e){this.elements.push(e)}},{key:"reduce",value:function(){this.elements=this.elements.slice(0,-1)}},{key:"deselect",value:function(){this.elements=[]}},{key:"css",value:function(e,t){if(t=t||!1,"object"===\_typeof(e)){for(var o in e)if(Object.hasOwn(e,o))for(var n=o.replace(/([-\_][a-z])/g,function(e){return e.toUpperCase().replace("-","").replace("\_","")}),a=0;a<this.elements.length;a++)this.elements[a].style[n]=e[o];return this}var c;if("string"==typeof e)return void 0!==(c=getComputedStyle(this.elements[0])[e])&&!t&&(c=c.replace(/(\d)(em|pt|%|px){1,2}$/,"$1"),Number(c)==c)?Number(c):c}},{key:"hide",value:function(){this.prop("prev-display",this.css("display")),this.css({display:"none"})}},{key:"show",value:function(){this.css({display:this.prop("prev-display")})}},{key:"addClass",value:function(){for(var e=0;e<this.elements.length;e++)this.elements[e].classList.add(className)}},{key:"removeClass",value:function(){for(var e=0;e<this.elements.length;e++)this.elements[e].classList.remove(className)}},{key:"toggleClass",value:function(e){for(var t=0;t<this.elements.length;t++)this.elements[t].classList.toggle(e)}},{key:"ajax",value:function(e){return this.ajax\_parameters=e,new ApbctAjax(e)}},{key:"rest",value:function(e){return this.restParameters=e,new ApbctRest(e)}},{key:"on",value:function(){this.event=arguments.length<=0?void 0:arguments[0],this.eventCallback=(arguments.length<=2?void 0:arguments[2])||(arguments.length<=1?void 0:arguments[1]),this.eventSelector="string"==typeof(arguments.length<=1?void 0:arguments[1])?arguments.length<=1?void 0:arguments[1]:null;for(var e=0;e<this.elements.length;e++)this.elements[e].addEventListener(this.event,null!==this.eventSelector?this.onChecker.bind(this):this.eventCallback)}},{key:"onChecker",value:function(e){if(e.target===document.querySelector(this.eventSelector))return e.stopPropagation(),this.eventCallback(e)}},{key:"ready",value:function(e){document.addEventListener("DOMContentLoaded",e)}},{key:"change",value:function(e){this.on("change",e)}},{key:"attr",value:function(e){for(var t=[],o=0;o<this.elements.length;o++)void 0!==this.elements[o][e]?t.push(this.elements[o][e]):t.push(this.elements[o].getAttribute(e));return 1===t.length?t[0]:t}},{key:"prop",value:function(e,t){if(void 0!==t){for(var o=0;o<this.elements.length;o++)this.elements[o][e]=t;return this}for(var n=[],a=0;a<this.elements.length;a++)n.push(this.elements[a][e]);return 1===n.length?n[0]:n}},{key:"html",value:function(e){return void 0!==e?this.prop("innerHTML",e):this.prop("innerHTML")}},{key:"val",value:function(e){return void 0!==e?this.prop("value",e):this.prop("value")}},{key:"data",value:function(e,t){return void 0!==t?this.prop("apbct-data",e,t):this.prop("apbct-data")}},{key:"is",value:function(e){var t,o=!1,n=\_createForOfIteratorHelper(this.elements);try{for(n.s();!(t=n.n()).done;)var a=t.value,o=o||this.isElem(a,e)}catch(e){n.e(e)}finally{n.f()}return o}},{key:"isElem",value:function(e,t){var o=!1;return"function"==typeof t&&(o=o||t.call(this,e)),o="string"==typeof t?t.match(/^[a-z]/)&&function(e){e=document.createElement(e).constructor;return!Boolean(~[HTMLElement,HTMLUnknownElement].indexOf(e))}(t)?o||e.tagName.toLowerCase()===t.toLowerCase():t.match(/^[a-z]/)?o||Boolean(e[t]):o||(null!==this.selector?null!==document.querySelector(this.selector+t):this.isWithoutSelector(e,t)):o}},{key:"isWithoutSelector",value:function(e,t){var o,n=!1,a=\_createForOfIteratorHelper(document.querySelectorAll(t));try{for(a.s();!(o=a.n()).done;)var c=o.value,n=n||e===c}catch(e){a.e(e)}finally{a.f()}return n}},{key:"filter",value:function(e){this.selector=null;for(var t=this.elements.length-1;0<=t;t--)this.isElem(this.elements[t],e)||this.elements.splice(Number(t),1);return this}},{key:"parent",value:function(e){return this.select(this.elements[0].parentElement),void 0===e||this.is(e)||this.deselect(),this}},{key:"parents",value:function(e){for(this.select(this.elements[0]);null!==this.elements[this.elements.length-1].parentElement;)this.push(this.elements[this.elements.length-1].parentElement);return this.elements.splice(0,1),void 0!==e&&this.filter(e),this}},{key:"children",value:function(e){return this.select(this.elements[0].children),void 0!==e&&this.filter(e),this}},{key:"siblings",value:function(e){var t=this.elements[0];return this.parent(),this.children(e),this.elements.splice(this.elements.indexOf(t),1),this}},{key:"remove",value:function(){var e,t=\_createForOfIteratorHelper(this.elements);try{for(t.s();!(e=t.n()).done;)e.value.remove()}catch(e){t.e(e)}finally{t.f()}}},{key:"after",value:function(e){var t,o=\_createForOfIteratorHelper(this.elements);try{for(o.s();!(t=o.n()).done;)t.value.after(e)}catch(e){o.e(e)}finally{o.f()}}},{key:"append",value:function(e){var t,o=\_createForOfIteratorHelper(this.elements);try{for(o.s();!(t=o.n()).done;)t.value.append(e)}catch(e){o.e(e)}finally{o.f()}}},{key:"fadeIn",value:function(n){var e,t=\_createForOfIteratorHelper(this.elements);try{for(t.s();!(e=t.n()).done;)!function(){var t=e.value,o=(t.style.opacity=0,t.style.display="block",+new Date);(function e(){t.style.opacity=+t.style.opacity+(new Date-o)/n,o=+new Date,+t.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(e)||setTimeout(e,16))})()}()}catch(e){t.e(e)}finally{t.f()}}},{key:"fadeOut",value:function(n){var e,t=\_createForOfIteratorHelper(this.elements);try{for(t.s();!(e=t.n()).done;)!function(){var t=e.value,o=(t.style.opacity=1,+new Date);(function e(){t.style.opacity=+t.style.opacity-(new Date-o)/n,o=+new Date,0<+t.style.opacity?window.requestAnimationFrame&&requestAnimationFrame(e)||setTimeout(e,16):t.style.display="none"})()}()}catch(e){t.e(e)}finally{t.f()}}}])}();function ctProcessError(e,t){var o={},e=(e&&e.message?o.err={msg:e.message,file:e.fileName||!1,ln:e.lineNumber||lineNo||!1,col:e.columnNumber||columnNo||!1,stacktrace:e.stack||!1,cause:!!t&&JSON.stringify(t),errorObj:error||!1}:(o.err={msg:e},t&&(o.err.file=t)),o.url=window.location.href,o.userAgent=window.navigator.userAgent,"ct\_js\_errors");null===(n=localStorage.getItem(e))&&(n="[]");for(var n=JSON.parse(n),a=0;a<n.length;a++)if(n[a].err.msg===o.err.msg)return;n.push(o),localStorage.setItem(e,JSON.stringify(n))}function selectActualNonce(){var e="";return ctPublicFunctions.hasOwnProperty("\_fresh\_nonce")&&"string"==typeof ctPublicFunctions.\_fresh\_nonce&&0<ctPublicFunctions.\_fresh\_nonce.length?ctPublicFunctions.\_fresh\_nonce:("admin\_ajax"===ctPublicFunctions.data\_\_ajax\_type&&ctPublicFunctions.hasOwnProperty("\_ajax\_nonce")&&"string"==typeof ctPublicFunctions.\_ajax\_nonce&&0<ctPublicFunctions.\_ajax\_nonce.length&&(e=ctPublicFunctions.\_ajax\_nonce),"rest"===ctPublicFunctions.data\_\_ajax\_type&&ctPublicFunctions.hasOwnProperty("\_rest\_nonce")&&"string"==typeof ctPublicFunctions.\_rest\_nonce&&0<ctPublicFunctions.\_rest\_nonce.length?ctPublicFunctions.\_rest\_nonce:e)}function apbct(e){return(new ApbctCore).select(e)}1===Math.floor(100\*Math.random())&&(window.onerror=function(e,t){for(var o=["apbct","ctPublic"],n=o.length;n--;)-1!==e.indexOf(o[n])&&ctProcessError(e,t);return!1});var ApbctXhr=function(){function n(e){for(var t in \_classCallCheck(this,n),\_defineProperty(this,"xhr",new XMLHttpRequest),\_defineProperty(this,"method","POST"),\_defineProperty(this,"url",""),\_defineProperty(this,"async",!0),\_defineProperty(this,"user",null),\_defineProperty(this,"password",null),\_defineProperty(this,"data",{}),\_defineProperty(this,"button",null),\_defineProperty(this,"spinner",null),\_defineProperty(this,"progressbar",null),\_defineProperty(this,"context",this),\_defineProperty(this,"callback",null),\_defineProperty(this,"onErrorCallback",null),\_defineProperty(this,"responseType","json"),\_defineProperty(this,"headers",{}),\_defineProperty(this,"timeout",15e3),\_defineProperty(this,"methods\_to\_convert\_data\_to\_URL",["GET","HEAD"]),\_defineProperty(this,"body",null),\_defineProperty(this,"http\_code",0),\_defineProperty(this,"status\_text",""),e)void 0!==this[t]&&(this[t]=e[t]);if(this.prepare(),Object.keys(this.data).length&&(this.deleteDoubleJSONEncoding(this.data),this.convertData()),!this.url)return console.log("%cXHR%c not URL provided","color: red; font-weight: bold;","color: grey; font-weight: normal;"),!1;this.xhr.open(this.method,this.url,this.async,this.user,this.password),this.setHeaders(),this.xhr.responseType=this.responseType,this.xhr.timeout=this.timeout,this.xhr.onreadystatechange=function(){this.isWpNonceError()?this.getFreshNonceAndRerunXHR(e):this.onReadyStateChange()}.bind(this),this.xhr.onload=function(){this.onLoad()}.bind(this),this.xhr.onprogress=function(e){this.onProgress(e)}.bind(this),this.xhr.onerror=function(){this.onError()}.bind(this),this.xhr.ontimeout=function(){this.onTimeout()}.bind(this),this.xhr.send(this.body)}return \_createClass(n,[{key:"prepare",value:function(){this.button&&(this.button.setAttribute("disabled","disabled"),this.button.style.cursor="not-allowed"),this.spinner&&(this.spinner.style.display="inline")}},{key:"complete",value:function(){this.http\_code=this.xhr.status,this.status\_text=this.xhr.statusText,this.button&&(this.button.removeAttribute("disabled"),this.button.style.cursor="auto"),this.spinner&&(this.spinner.style.display="none"),this.progressbar&&this.progressbar.fadeOut("slow")}},{key:"onReadyStateChange",value:function(){null!==this.on\_ready\_state\_change&&"function"==typeof this.on\_ready\_state\_change&&this.on\_ready\_state\_change()}},{key:"onProgress",value:function(e){null!==this.on\_progress&&"function"==typeof this.on\_progress&&this.on\_progress()}},{key:"onError",value:function(){console.log("error"),this.complete(),this.error(this.http\_code,this.status\_text),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback(this.status\_text)}},{key:"onTimeout",value:function(){this.complete(),this.error(0,"timeout"),null!==this.onErrorCallback&&"function"==typeof this.onErrorCallback&&this.onErrorCallback("Timeout")}},{key:"onLoad",value:function(){if(this.complete(),"json"===this.responseType){if(null===this.xhr.response)return this.error(this.http\_code,this.status\_text,"No response"),!1;if(void 0!==this.xhr.response.error)return this.error(this.http\_code,this.status\_text,this.xhr.response.error),!1}null!==this.callback&&"function"==typeof this.callback&&this.callback.call(this.context,this.xhr.response,this.data)}},{key:"isWpNonceError",value:function(){var e=!1,t=!1;return 4==this.xhr.readyState&&(e="object"===\_typeof(this.xhr.response)&&null!==this.xhr.response&&this.xhr.response.hasOwnProperty("data")&&this.xhr.response.data.hasOwnProperty("status")&&403===this.xhr.response.data.status,t="-1"===this.xhr.response&&403===this.xhr.status),e||t}},{key:"getFreshNonceAndRerunXHR",value:function(e){var t,o="";e.hasOwnProperty("headers")&&e.headers.hasOwnProperty("X-WP-Nonce")&&(o=e.headers["X-WP-Nonce"]),""!==(o=e.hasOwnProperty("data")&&e.data.hasOwnProperty("\_ajax\_nonce")?e.data.\_ajax\_nonce:o)&&((t={method:"POST"}).data={spbc\_remote\_call\_action:"get\_fresh\_wpnonce",plugin\_name:"antispam",nonce\_prev:o,initial\_request\_params:e},t.notJson=!0,t.url=ctPublicFunctions.host\_url,t.callback=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var n=t[0],a=!1;(a=void 0!==t[1]&&t[1].hasOwnProperty("initial\_request\_params")?t[1].initial\_request\_params:a)&&n.hasOwnProperty("wpnonce")&&(ctPublicFunctions.\_fresh\_nonce=n.wpnonce,"rest"===ctPublicFunctions.data\_\_ajax\_type?(new ApbctCore).rest(a):(new ApbctCore).ajax(a))},new n(t))}},{key:"error",value:function(e,t,o){var n="";"timeout"===t?n+="Server response timeout":200===e?"parsererror"===t?n+="Unexpected response from server. See console for details.":(n+="Unexpected error. Status: "+t+".",void 0!==o&&(n+=" Additional error info: "+o)):n+=500===e?"Internal server error.":"Unexpected response code:"+e,this.errorOutput(n)}},{key:"errorOutput",value:function(e){console.log("%c ctXHR error: %c"+e,"color: red;","color: grey;")}},{key:"setHeaders",value:function(){for(var e in this.headers)void 0!==this.headers[e]&&this.xhr.setRequestHeader(e,this.headers[e])}},{key:"convertData",value:function(){return~this.methods\_to\_convert\_data\_to\_URL.indexOf(this.method)?this.convertDataToURL():this.convertDataToBody()}},{key:"convertDataToURL",value:function(){var e=new URLSearchParams(this.data).toString(),t=this.url.match(/^(https?:\/{2})?[a-z0-9.]+\?/)?"&":"?";return this.url+=t+e,this.url}},{key:"convertDataToBody",value:function(){for(var e in this.body=new FormData,this.data)Object.hasOwn(this.data,e)&&this.body.append(e,"object"===\_typeof(this.data[e])?JSON.stringify(this.data[e]):this.data[e]);return this.body}},{key:"deleteDoubleJSONEncoding",value:function(e){if("object"===\_typeof(e))for(var t in e){var o;Object.hasOwn(e,t)&&("object"===\_typeof(e[t])&&(e[t]=this.deleteDoubleJSONEncoding(e[t])),"string"==typeof e[t])&&null!==e[t].match(/^[\[{].\*?[\]}]$/)&&"object"===\_typeof(o=JSON.parse(e[t]))&&(e[t]=o)}return e}}])}(),ApbctAjax=function(){function n(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return \_classCallCheck(this,n),(t=t[0]).data.\_ajax\_nonce=selectActualNonce(),\_callSuper(this,n,[t])}return \_inherits(n,ApbctXhr),\_createClass(n)}(),ApbctRest=function(){function a(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];\_classCallCheck(this,a);var t=t[0],n=selectActualNonce();return t.url=a.default\_route+t.route,t.headers={"X-WP-Nonce":n},\_defineProperty(n=\_callSuper(this,a,[t]),"route",""),n}return \_inherits(a,ApbctXhr),\_createClass(a)}();function ctSetCookie(e,t,n){var o,a=["ct\_sfw\_pass\_key","ct\_sfw\_passed","wordpress\_apbct\_antibot","apbct\_anticrawler\_passed","apbct\_antiflood\_passed","apbct\_email\_encoder\_passed"],c=!1;"string"==typeof e&&(c="ct\_pointer\_data"===e,"string"!=typeof t&&"number"!=typeof t||(e=[[e,t,n]])),"none"===ctPublicFunctions.data\_\_cookies\_type?(o=[],e.forEach(function(e){-1!==a.indexOf(e[0])?o.push(e):apbctLocalStorage.set(e[0],encodeURIComponent(e[1]))}),0<o.length&&ctSetAlternativeCookie(o),ctPublic.force\_alt\_cookies&&!c?ctSetAlternativeCookie(e,{forceAltCookies:!0}):ctNoCookieAttachHiddenFieldsToForms()):"native"===ctPublicFunctions.data\_\_cookies\_type?(ctPublic.force\_alt\_cookies&&!c&&ctSetAlternativeCookie(e,{forceAltCookies:!0}),e.forEach(function(e){var t=void 0!==e[2]?"expires="+n+"; ":"",o="https:"===location.protocol?"; secure":"";document.cookie=ctPublicFunctions.cookiePrefix+e[0]+"="+encodeURIComponent(e[1])+"; "+t+"path=/; samesite=lax"+o})):"alternative"!==ctPublicFunctions.data\_\_cookies\_type||c||ctSetAlternativeCookie(e)}function ctDetectForcedAltCookiesForms(){var e=0<document.querySelectorAll("#tmpl-nf-layout").length,t=0<document.querySelectorAll(".uael-registration-form-wrapper").length,o=0<document.querySelectorAll('script[id\*="smart-forms"]').length,n=0<document.querySelectorAll('iframe[name="jetpack\_remote\_comment"]').length,a=0<document.querySelectorAll(".cwginstock-subscribe-form").length,c=0<document.querySelectorAll('div[id^="user-registration-form"]').length,i=0<document.querySelectorAll('div[class^="et\_pb\_newsletter\_form"]').length,r=0<document.querySelectorAll('div[class^="fluent\_booking\_app"]').length,l=0<document.querySelectorAll('div[class^="et\_bloom\_form\_container"]').length,s=0<document.querySelectorAll('div[class\*="pafe-form"]').length,u=0<document.querySelectorAll('div [class\*="otter-form"]').length;ctPublic.force\_alt\_cookies=o||e||n||t||a||c||i||r||s||l||u,setTimeout(function(){var e;ctPublic.force\_alt\_cookies||(e=0<document.querySelectorAll('main[id^="bookingpress\_booking\_form"]').length,ctPublic.force\_alt\_cookies=e)},1e3)}function ctSetAlternativeCookie(e,t){"function"==typeof getJavascriptClientData?Array.isArray(e)&&(e=getJavascriptClientData(e)):console.log("APBCT ERROR: getJavascriptClientData() is not loaded");try{e=JSON.parse(e)}catch(e){return void console.log("APBCT ERROR: JSON parse error:"+e)}e.apbct\_site\_referer||(e.apbct\_site\_referer=location.href);var o=t&&t.callback||null,n=t&&t.onErrorCallback||null;t&&t.forceAltCookies&&(e.apbct\_force\_alt\_cookies=!0),"rest"===ctPublicFunctions.data\_\_ajax\_type?("string"==typeof e.apbct\_pixel\_url&&-1!==e.apbct\_pixel\_url.indexOf("%3A")&&(e.apbct\_pixel\_url=decodeURIComponent(e.apbct\_pixel\_url)),apbct\_public\_sendREST("alt\_sessions",{method:"POST",data:{cookies:e},callback:o,onErrorCallback:n})):"admin\_ajax"===ctPublicFunctions.data\_\_ajax\_type&&apbct\_public\_sendAJAX({action:"apbct\_alt\_session\_\_save\_\_AJAX",cookies:e},{notJson:1,callback:o,onErrorCallback:n,beforeSend:function(e){e.setRequestHeader("X-Robots-Tag","noindex, nofollow")}})}function ctGetCookie(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?\*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]\*)"));return e?decodeURIComponent(e[1]):void 0}function ctDeleteCookie(e){var t;"none"!==ctPublicFunctions.data\_\_cookies\_type&&("native"===ctPublicFunctions.data\_\_cookies\_type?(t="https:"===location.protocol?"; secure":"",document.cookie=e+'=""; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; samesite=lax'+t):ctPublicFunctions.data\_\_cookies\_type)}function apbct\_public\_sendAJAX(e,t,o){var n=[],o=(n.callback=t.callback||null,n.onErrorCallback=t.onErrorCallback||null,n.callback\_context=t.callback\_context||null,n.callback\_params=t.callback\_params||null,n.async=t.async||!0,n.notJson=t.notJson||null,n.responseType=t.notJson?"text":"json",n.timeout=t.timeout||15e3,n.obj=o||null,n.button=t.button||null,n.spinner=t.spinner||null,n.progressbar=t.progressbar||null,n.silent=t.silent||null,n.no\_nonce=t.no\_nonce||null,n.data=e,n.url=ctPublicFunctions.\_ajax\_url,selectActualNonce());"string"==typeof e?(n.no\_nonce||(n.data=n.data+"&\_ajax\_nonce="+o),n.data=n.data+"&no\_cache="+Math.random()):(n.no\_nonce||(n.data.\_ajax\_nonce=o),n.data.no\_cache=Math.random()),(new ApbctCore).ajax(n)}function apbct\_public\_sendREST(e,t){var o=[];o.route=e,o.callback=t.callback||null,o.onErrorCallback=t.onErrorCallback||null,o.data=t.data||[],o.method=t.method||"POST",(new ApbctCore).rest(o)}function apbctGenerateUniqueID(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(2,10)}\_defineProperty(ApbctRest,"default\_route",ctPublicFunctions.\_rest\_url+"cleantalk-antispam/v1/"),Object.prototype.hasOwn||Object.defineProperty(Object.prototype,"hasOwn",{value:function(e){return Object.prototype.hasOwnProperty.call(this,e)},enumerable:!1,configurable:!0,writable:!0});var apbctLocalStorage={get:function(t,o){void 0===o&&(o="value");t=localStorage.getItem(t);if(null!==t)try{var n=JSON.parse(t);if(!n.hasOwnProperty(o))return n;try{return JSON.parse(n[o])}catch(e){return n[o].toString()}}catch(e){return t}return!1},set:function(e,t){var o;!(2<arguments.length&&void 0!==arguments[2])||arguments[2]?(o={value:JSON.stringify(t),timestamp:Math.floor((new Date).getTime()/1e3)},localStorage.setItem(e,JSON.stringify(o))):localStorage.setItem(e,t)},isAlive:function(e,t){return void 0===t&&(t=86400),this.get(e,"timestamp")+t>Math.floor((new Date).getTime()/1e3)},isSet:function(e){return null!==localStorage.getItem(e)},delete:function(e){localStorage.removeItem(e)},getCleanTalkData:function(){for(var e={},t=0;t<localStorage.length;t++){var o=localStorage.key(t);-1===o.indexOf("ct\_")&&-1===o.indexOf("apbct\_")||(e[o.toString()]=apbctLocalStorage.get(o))}return e}},apbctSessionStorage={get:function(t,e){void 0===e&&(e="value");t=sessionStorage.getItem(t);if(null!==t)try{var o=JSON.parse(t);return o.hasOwnProperty(e)?JSON.parse(o[e]):o}catch(e){return t}return!1},set:function(e,t){var o;!(2<arguments.length&&void 0!==arguments[2])||arguments[2]?(o={value:JSON.stringify(t),timestamp:Math.floor((new Date).getTime()/1e3)},sessionStorage.setItem(e,JSON.stringify(o))):sessionStorage.setItem(e,t)},isSet:function(e){return null!==sessionStorage.getItem(e)},delete:function(e){sessionStorage.removeItem(e)},getCleanTalkData:function(){for(var e={},t=0;t<sessionStorage.length;t++){var o=sessionStorage.key(t);-1===o.indexOf("ct\_")&&-1===o.indexOf("apbct\_")||(e[o.toString()]=apbctSessionStorage.get(o))}return e}};function apbctOnAnimationStart(e){("onautofillstart"===e.animationName?apbctAutocomplete:apbctCancelAutocomplete)(e.target)}function apbctOnInput(e){("insertReplacementText"!==e.inputType&&"data"in e?apbctCancelAutocomplete:apbctAutocomplete)(e.target)}function apbctAutocomplete(e){var t;e.hasAttribute("autocompleted")||(e.setAttribute("autocompleted",""),t=new window.CustomEvent("onautocomplete",{bubbles:!0,cancelable:!0,detail:null}),e.dispatchEvent(t))||(e.value="")}function apbctCancelAutocomplete(e){e.hasAttribute("autocompleted")&&(e.removeAttribute("autocompleted"),e.dispatchEvent(new window.CustomEvent("onautocomplete",{bubbles:!0,cancelable:!1,detail:null})))}var ctMouseReadInterval,ctMouseWriteDataInterval,tokenCheckerIntervalId,CTTypoData=function(){return \_createClass(function e(){\_classCallCheck(this,e),\_defineProperty(this,"fieldData",{isAutoFill:!1,isUseBuffer:!1,speedDelta:0,firstKeyTimestamp:0,lastKeyTimestamp:0,lastDelta:0,countOfKey:0}),\_defineProperty(this,"fields",document.querySelectorAll("textarea[name=comment]")),\_defineProperty(this,"data",[])},[{key:"gatheringFields",value:function(){var o=this;Array.prototype.slice.call(this.fields).forEach(function(e,t){o.data.push(Object.assign({},o.fieldData))})}},{key:"setListeners",value:function(){var n=this;this.fields.forEach(function(e,t){e.addEventListener("paste",function(){n.data[t].isUseBuffer=!0})}),this.fields.forEach(function(e,t){e.addEventListener("onautocomplete",function(){n.data[t].isAutoFill=!0})}),this.fields.forEach(function(e,o){e.addEventListener("input",function(){n.data[o].countOfKey++;var e,t=+new Date;1===n.data[o].countOfKey?(n.data[o].lastKeyTimestamp=t,n.data[o].firstKeyTimestamp=t):(e=t-n.data[o].lastKeyTimestamp,2===n.data[o].countOfKey?(n.data[o].lastKeyTimestamp=t,n.data[o].lastDelta=e):2<n.data[o].countOfKey&&(n.data[o].speedDelta+=Math.abs(n.data[o].lastDelta-e),n.data[o].lastKeyTimestamp=t,n.data[o].lastDelta=e))})})}}])}(),ctDate=new Date,ctTimeMs=(new Date).getTime(),ctMouseEventTimerFlag=!0,ctMouseData=[],ctMouseDataCounter=0,ctCheckedEmails={},ctCheckedEmailsExist={};function apbct\_attach\_event\_handler(e,t,o){"function"==typeof window.addEventListener?e.addEventListener(t,o):e.attachEvent(t,o)}function apbct\_remove\_event\_handler(e,t,o){"function"==typeof window.removeEventListener?e.removeEventListener(t,o):e.detachEvent(t,o)}var ctFunctionFirstKey=function(e){ctSetCookie("ct\_fkp\_timestamp",Math.floor((new Date).getTime()/1e3)),ctKeyStopStopListening()},ctFunctionMouseMove=(cronFormsHandler(2e3),ctPublic.data\_\_key\_is\_ok&&(ctMouseReadInterval=setInterval(function(){ctMouseEventTimerFlag=!0},150),ctMouseWriteDataInterval=setInterval(function(){ctSetCookie("ct\_pointer\_data",JSON.stringify(ctMouseData))},1200)),function(e){ctSetMouseMoved(),!0===ctMouseEventTimerFlag&&(ctMouseData.push([Math.round(e.clientY),Math.round(e.clientX),Math.round((new Date).getTime()-ctTimeMs)]),ctMouseEventTimerFlag=!1,50<=++ctMouseDataCounter)&&ctMouseStopData()});function cronFormsHandler(){setTimeout(function(){setInterval(function(){restartFieldsListening(),restartBotDetectorEventTokenAttach()},2e3)},0<arguments.length&&void 0!==arguments[0]?arguments[0]:2e3)}function restartBotDetectorEventTokenAttach(){var e,t=0<document.getElementsByClassName("latepoint-form").length||0<document.getElementsByClassName("mec-booking-form-container").length||null!==document.getElementById("login-form-popup");try{t&&(e=apbctLocalStorage.get("bot\_detector\_event\_token"),"function"==typeof setEventTokenField)&&void 0!==e&&64===e.length&&setEventTokenField(e)}catch(e){console.log(e.toString())}}function ctMouseStopData(){apbct\_remove\_event\_handler(document,"mousemove",ctFunctionMouseMove),clearInterval(ctMouseReadInterval),clearInterval(ctMouseWriteDataInterval)}function ctKeyStopStopListening(){apbct\_remove\_event\_handler(document,"mousedown",ctFunctionFirstKey),apbct\_remove\_event\_handler(document,"keydown",ctFunctionFirstKey)}function checkEmail(e){var t=e.target.value;!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||!t||t in ctCheckedEmails||("rest"===ctPublicFunctions.data\_\_ajax\_type?apbct\_public\_sendREST("check\_email\_before\_post",{method:"POST",data:{email:t},callback:function(e){e.result&&(ctCheckedEmails[t]={result:e.result,timestamp:Date.now()/1e3|0},ctSetCookie("ct\_checked\_emails",JSON.stringify(ctCheckedEmails)))}}):"admin\_ajax"===ctPublicFunctions.data\_\_ajax\_type&&apbct\_public\_sendAJAX({action:"apbct\_email\_check\_before\_post",email:t},{callback:function(e){e.result&&(ctCheckedEmails[t]={result:e.result,timestamp:Date.now()/1e3|0},ctSetCookie("ct\_checked\_emails",JSON.stringify(ctCheckedEmails)))}}))}function checkEmailExist(t){var e,o=t.target.value;o&&o.length?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)&&(o in ctCheckedEmailsExist?(e=ctCheckedEmailsExist[o],getResultCheckEmailExist(t,e,o)):(viewCheckEmailExist(t,"load"),(ctPublicFunctions.data\_\_ajax\_type="rest")===ctPublicFunctions.data\_\_ajax\_type?apbct\_public\_sendREST("check\_email\_exist\_post",{method:"POST",data:{email:o},callback:function(e){getResultCheckEmailExist(t,e,o)}}):"admin\_ajax"===ctPublicFunctions.data\_\_ajax\_type&&apbct\_public\_sendAJAX({action:"apbct\_email\_check\_exist\_post",email:o},{callback:function(e){getResultCheckEmailExist(t,e,o)}}))):((e=document.getElementById("apbct-check\_email\_exist-block"))&&e.remove(),(e=document.getElementById("apbct-check\_email\_exist-popup\_description"))&&e.remove())}function getResultCheckEmailExist(e,t,o){t&&t.result&&(t=t.result,ctCheckedEmailsExist[o]={result:t,timestamp:Date.now()/1e3|0},"EXISTS"==t.result?viewCheckEmailExist(e,"good\_email",t.text\_result):viewCheckEmailExist(e,"bad\_email",t.text\_result),ctSetCookie("ct\_checked\_emails\_exist",JSON.stringify(ctCheckedEmailsExist)))}function viewCheckEmailExist(e,t,o){var e=e.target.parentElement,n=e.querySelector('[name\*="email"]');if(n){var a,c;switch(document.getElementById("apbct-check\_email\_exist-block")?a=document.getElementById("apbct-check\_email\_exist-block"):((a=document.createElement("div")).setAttribute("class","apbct-check\_email\_exist-block"),a.setAttribute("id","apbct-check\_email\_exist-block"),a.style.top=n.getBoundingClientRect().top+"px",a.style.left=n.getBoundingClientRect().right-35-10+"px",a.style.height=n.offsetHeight+"px",a.style.width="35px",window.addEventListener("scroll",function(){a.style.top=n.getBoundingClientRect().top+"px"}),e.after(a)),document.getElementById("apbct-check\_email\_exist-popup\_description")?c=document.getElementById("apbct-check\_email\_exist-popup\_description"):((c=document.createElement("div")).setAttribute("class","apbct-check\_email\_exist-popup\_description"),c.setAttribute("id","apbct-check\_email\_exist-popup\_description"),c.style.width=n.offsetWidth+"px",c.style.left=n.getBoundingClientRect().left+"px",window.addEventListener("scroll",function(){c.style.top=a.getBoundingClientRect().top+"px"}),a.after(c)),t){case"load":a.classList.remove("apbct-check\_email\_exist-good\_email","apbct-check\_email\_exist-bad\_email"),a.classList.add("apbct-check\_email\_exist-load");break;case"good\_email":a.classList.remove("apbct-check\_email\_exist-load","apbct-check\_email\_exist-bad\_email"),a.classList.add("apbct-check\_email\_exist-good\_email"),a.onmouseover=function(){c.textContent=o,c.style.display="block",c.style.top=n.getBoundingClientRect().top-c.getBoundingClientRect().height+"px",c.style.color="#1C7129"},a.onmouseout=function(){c.style.display="none"};break;case"bad\_email":a.classList.remove("apbct-check\_email\_exist-load","apbct-check\_email\_exist-good\_email"),a.classList.add("apbct-check\_email\_exist-bad\_email"),a.onmouseover=function(){c.textContent=o,c.style.display="block",c.style.top=n.getBoundingClientRect().top-c.getBoundingClientRect().height+"px",c.style.color="#E01111"},a.onmouseout=function(){c.style.display="none"}}}}function ctIsDrawPixel(){return+ctPublic.pixel\_\_enabled||"none"===ctPublic.data\_\_cookies\_type&&0===document.querySelectorAll("img#apbct\_pixel").length||"alternative"===ctPublic.data\_\_cookies\_type&&0===document.querySelectorAll("img#apbct\_pixel").length}function ctSetPixelImg(e){var t;ctSetCookie("apbct\_pixel\_url",e),ctIsDrawPixel()&&!document.getElementById("apbct\_pixel")&&((t=document.createElement("img")).setAttribute("alt","CleanTalk Pixel"),t.setAttribute("title","CleanTalk Pixel"),t.setAttribute("id","apbct\_pixel"),t.setAttribute("style","display: none; left: 99999px;"),t.setAttribute("src",e),apbct("body").append(t))}function ctSetPixelImgFromLocalstorage(e){var t;ctIsDrawPixel()&&!document.getElementById("apbct\_pixel")&&((t=document.createElement("img")).setAttribute("alt","CleanTalk Pixel"),t.setAttribute("title","CleanTalk Pixel"),t.setAttribute("id","apbct\_pixel"),t.setAttribute("style","display: none; left: 99999px;"),t.setAttribute("src",decodeURIComponent(e)),apbct("body").append(t))}function ctGetPixelUrl(){var e=apbctLocalStorage.get("apbct\_pixel\_url");if(!1!==e){if(apbctLocalStorage.isAlive("apbct\_pixel\_url",10800))return void ctSetPixelImgFromLocalstorage(e);apbctLocalStorage.delete("apbct\_pixel\_url")}"rest"===ctPublicFunctions.data\_\_ajax\_type?apbct\_public\_sendREST("apbct\_get\_pixel\_url",{method:"POST",callback:function(e){e&&("string"==typeof e||e instanceof String)&&0===e.indexOf("https")&&(apbctLocalStorage.get("apbct\_pixel\_url")||(apbctLocalStorage.set("apbct\_pixel\_url",e),ctNoCookieAttachHiddenFieldsToForms()),ctSetPixelImg(e))}}):apbct\_public\_sendAJAX({action:"apbct\_get\_pixel\_url"},{notJson:!0,callback:function(e){e&&("string"==typeof e||e instanceof String)&&0===e.indexOf("https")&&(apbctLocalStorage.get("apbct\_pixel\_url")||(apbctLocalStorage.set("apbct\_pixel\_url",e),ctNoCookieAttachHiddenFieldsToForms()),ctSetPixelImg(e))},beforeSend:function(e){e.setRequestHeader("X-Robots-Tag","noindex, nofollow")}})}function ctSetHasScrolled(){apbctLocalStorage.isSet("ct\_has\_scrolled")&&apbctLocalStorage.get("ct\_has\_scrolled")||(ctSetCookie("ct\_has\_scrolled","true"),apbctLocalStorage.set("ct\_has\_scrolled",!0)),"native"===ctPublic.data\_\_cookies\_type&&void 0===ctGetCookie("ct\_has\_scrolled")&&ctSetCookie("ct\_has\_scrolled","true")}function ctSetMouseMoved(){apbctLocalStorage.isSet("ct\_mouse\_moved")&&apbctLocalStorage.get("ct\_mouse\_moved")||(ctSetCookie("ct\_mouse\_moved","true"),apbctLocalStorage.set("ct\_mouse\_moved",!0)),"native"===ctPublic.data\_\_cookies\_type&&void 0===ctGetCookie("ct\_mouse\_moved")&&ctSetCookie("ct\_mouse\_moved","true")}function restartFieldsListening(){apbctLocalStorage.isSet("ct\_has\_input\_focused")||apbctLocalStorage.isSet("ct\_has\_key\_up")||ctStartFieldsListening()}function ctStartFieldsListening(){if(!apbctLocalStorage.isSet("ct\_has\_key\_up")&&!apbctLocalStorage.get("ct\_has\_key\_up")||!apbctLocalStorage.isSet("ct\_has\_input\_focused")&&!apbctLocalStorage.get("ct\_has\_input\_focused")||"native"!==ctPublic.data\_\_cookies\_type||void 0===ctGetCookie("ct\_has\_input\_focused")||void 0===ctGetCookie("ct\_has\_key\_up")){var e=ctGetPageForms();if(ctPublic.handled\_fields=[],0<e.length)for(var t=0;t<e.length;t++)for(var o=e[t].querySelectorAll("input,textarea"),n=0;n<o.length;n++)"hidden"!==o[n].type&&(ctPublic.handled\_fields.push(o[n]),apbct\_attach\_event\_handler(o[n],"focus",ctFunctionHasInputFocused),apbct\_attach\_event\_handler(o[n],"keyup",ctFunctionHasKeyUp))}}function ctStopFieldsListening(e,t){if(void 0!==ctPublic.handled\_fields&&0<ctPublic.handled\_fields.length)for(var o=0;o<ctPublic.handled\_fields.length;o++)apbct\_remove\_event\_handler(ctPublic.handled\_fields[o],e,t)}var ctFunctionHasInputFocused=function(e){ctSetHasInputFocused(),ctStopFieldsListening("focus",ctFunctionHasInputFocused)},ctFunctionHasKeyUp=function(e){ctSetHasKeyUp(),ctStopFieldsListening("keyup",ctFunctionHasKeyUp)};function ctSetHasInputFocused(){apbctLocalStorage.isSet("ct\_has\_input\_focused")&&apbctLocalStorage.get("ct\_has\_input\_focused")||apbctLocalStorage.set("ct\_has\_input\_focused",!0),("native"===ctPublic.data\_\_cookies\_type&&void 0===ctGetCookie("ct\_has\_input\_focused")||"alternative"===ctPublic.data\_\_cookies\_type||"none"===ctPublic.data\_\_cookies\_type&&(void 0!==ctPublic.force\_alt\_cookies||void 0!==ctPublic.force\_alt\_cookies&&ctPublic.force\_alt\_cookies))&&ctSetCookie("ct\_has\_input\_focused","true")}function ctSetHasKeyUp(){apbctLocalStorage.isSet("ct\_has\_key\_up")&&apbctLocalStorage.get("ct\_has\_key\_up")||apbctLocalStorage.set("ct\_has\_key\_up",!0),("native"===ctPublic.data\_\_cookies\_type&&void 0===ctGetCookie("ct\_has\_key\_up")||"alternative"===ctPublic.data\_\_cookies\_type||"none"===ctPublic.data\_\_cookies\_type&&(void 0!==ctPublic.force\_alt\_cookies||void 0!==ctPublic.force\_alt\_cookies&&ctPublic.force\_alt\_cookies))&&ctSetCookie("ct\_has\_key\_up","true")}function apbctPrepareBlockForAjaxForms(){function n(e){if(e.responseText&&-1!==e.responseText.indexOf('"apbct')&&-1===e.responseText.indexOf("DOCTYPE"))try{ctParseBlockMessage(JSON.parse(e.responseText))}catch(e){console.log(e.toString())}}"undefined"!=typeof jQuery?"function"!=typeof jQuery(document).ajaxComplete()?jQuery(document).on("ajaxComplete",function(e,t,o){n(t)}):jQuery(document).ajaxComplete(function(e,t,o){n(t)}):"undefined"!=typeof XMLHttpRequest&&document.addEventListener("readystatechange",function(e){4===e.target.readyState&&n(e.target)})}function startForcedAltEventTokenChecker(){tokenCheckerIntervalId=setInterval(function(){var e;"1"===apbctLocalStorage.get("event\_token\_forced\_set")?clearInterval(tokenCheckerIntervalId):(e=apbctLocalStorage.get("bot\_detector\_event\_token"))&&(ctSetAlternativeCookie([["ct\_bot\_detector\_event\_token",e]],{forceAltCookies:!0}),apbctLocalStorage.set("event\_token\_forced\_set","1"),clearInterval(tokenCheckerIntervalId))},1e3)}function apbct\_ready(){document.addEventListener("gform\_page\_loaded",function(){void 0!==ctPublic.force\_alt\_cookies&&("undefined"===ctPublic.force\_alt\_cookies||ctPublic.force\_alt\_cookies)||(ctNoCookieAttachHiddenFieldsToForms(),"function"!=typeof setEventTokenField)||"function"!=typeof botDetectorLocalStorage||setEventTokenField(botDetectorLocalStorage.get("bot\_detector\_event\_token"))}),ctPublic.wc\_ajax\_add\_to\_cart||apbctCheckAddToCartByGet(),apbctPrepareBlockForAjaxForms(),apbctSessionStorage.isSet("apbct\_session\_id")?apbctLocalStorage.set("apbct\_page\_hits",Number(apbctLocalStorage.get("apbct\_page\_hits"))+1):(e=apbctGenerateUniqueID(),apbctSessionStorage.set("apbct\_session\_id",e,!1),apbctLocalStorage.set("apbct\_page\_hits",1),document.referrer&&new URL(document.referrer).host!==location.host&&apbctSessionStorage.set("apbct\_site\_referer",document.referrer,!1)),apbctWriteReferrersToSessionStorage();var e=apbctLocalStorage.get("ct\_cookies\_type"),e=(e&&e===ctPublic.data\_\_cookies\_type||(apbctLocalStorage.set("ct\_cookies\_type",ctPublic.data\_\_cookies\_type),apbctLocalStorage.delete("ct\_mouse\_moved"),apbctLocalStorage.delete("ct\_has\_scrolled")),"alternative"!==ctPublic.data\_\_cookies\_type&&(ctStartFieldsListening(),setTimeout(ctStartFieldsListening,1e3)),window.addEventListener("animationstart",apbctOnAnimationStart,!0),window.addEventListener("input",apbctOnInput,!0),document.ctTypoData=new CTTypoData,document.ctTypoData.gatheringFields(),document.ctTypoData.setListeners(),[["ct\_ps\_timestamp",Math.floor((new Date).getTime()/1e3)],["ct\_fkp\_timestamp","0"],["ct\_pointer\_data","0"],["ct\_timezone",ctDate.getTimezoneOffset()/60\*-1],["ct\_screen\_info",apbctGetScreenInfo()],["apbct\_headless",navigator.webdriver]]);if(apbctLocalStorage.set("ct\_ps\_timestamp",Math.floor((new Date).getTime()/1e3)),apbctLocalStorage.set("ct\_fkp\_timestamp","0"),apbctLocalStorage.set("ct\_pointer\_data","0"),apbctLocalStorage.set("ct\_timezone",ctDate.getTimezoneOffset()/60\*-1),apbctLocalStorage.set("ct\_screen\_info",apbctGetScreenInfo()),apbctLocalStorage.set("apbct\_headless",navigator.webdriver),"native"!==ctPublic.data\_\_cookies\_type)e.push(["apbct\_visible\_fields","0"]);else{var t=document.cookie.split(";");if(0!==t.length)for(var o=0;o<t.length;o++){var n=t[o].trim().split("=")[0];0===n.indexOf("apbct\_visible\_fields\_")&&ctDeleteCookie(n)}}+ctPublic.pixel\_\_setting&&(ctIsDrawPixel()?ctGetPixelUrl():e.push(["apbct\_pixel\_url",ctPublic.pixel\_\_url])),+ctPublic.data\_\_email\_check\_before\_post&&(e.push(["ct\_checked\_emails","0"]),apbct("input[type = 'email'], #email").on("blur",checkEmail)),+ctPublic.data\_\_email\_check\_exist\_post&&(e.push(["ct\_checked\_emails\_exist","0"]),apbct("comment-form input[name = 'email'], input#email").on("blur",checkEmailExist)),apbctLocalStorage.isSet("ct\_checkjs")?e.push(["ct\_checkjs",apbctLocalStorage.get("ct\_checkjs")]):e.push(["ct\_checkjs",0]),ctDetectForcedAltCookiesForms();var a=apbctLocalStorage.get("bot\_detector\_event\_token"),c=(void 0!==ctPublic.force\_alt\_cookies&&ctPublic.force\_alt\_cookies&&ctPublic.settings\_\_data\_\_bot\_detector\_enabled&&(apbctLocalStorage.set("event\_token\_forced\_set","0"),a?(e.push(["ct\_bot\_detector\_event\_token",a]),apbctLocalStorage.set("event\_token\_forced\_set","1")):startForcedAltEventTokenChecker()),ctSetCookie(e),setTimeout(function(){void 0!==ctPublic.force\_alt\_cookies&&("undefined"===ctPublic.force\_alt\_cookies||ctPublic.force\_alt\_cookies)||ctNoCookieAttachHiddenFieldsToForms(),void 0!==ctPublic.data\_\_cookies\_type&&"none"===ctPublic.data\_\_cookies\_type&&(ctAjaxSetupAddCleanTalkDataBeforeSendAjax(),ctAddWCMiddlewares());for(var e=0;e<document.forms.length;e++){var t,o,n=document.forms[e];ctCheckHiddenFieldsExclusions(document.forms[e],"visible\_fields")||void 0!==document.forms[e].elements.apbct\_visible\_fields&&0<document.forms[e].elements.apbct\_visible\_fields.length||(n.querySelector('input[name="apbct\_visible\_fields"]')&&(t=n.querySelector('input[name="apbct\_visible\_fields"]'),n.removeChild(t)),(t=document.createElement("input")).setAttribute("type","hidden"),t.setAttribute("id","apbct\_visible\_fields\_"+e),t.setAttribute("name","apbct\_visible\_fields"),(o={})[0]=apbct\_collect\_visible\_fields(n),t.value=btoa(JSON.stringify(o)),n.append(t),n.onsubmit\_prev=n.onsubmit,n.ctFormIndex=e,n.onsubmit=function(e){var t;"native"!==ctPublic.data\_\_cookies\_type&&void 0!==e.target.ctFormIndex&&((t={})[0]=apbct\_collect\_visible\_fields(this),apbct\_visible\_fields\_set\_cookie(t,e.target.ctFormIndex)),"none"===ctPublic.data\_\_cookies\_type&&isFormThatNeedCatchXhr(e.target)&&(window.XMLHttpRequest.prototype.send=function(e){var t=getNoCookieData();defaultSend.call(this,"data%5Bct\_no\_cookie\_hidden\_field%5D="+t+"&"+e),setTimeout(function(){window.XMLHttpRequest.prototype.send=defaultSend},0)}),e.target.onsubmit\_prev instanceof Function&&!ctOnsubmitPrevCallExclude(e.target)&&setTimeout(function(){e.target.onsubmit\_prev.call(e.target,e)},500)})}},1e3),document.querySelectorAll("[data-original-string]"));if((ctPublic.encodedEmailNodes=c).length)for(var i=0;i<c.length;++i)c[i].parentElement.href||c[i].parentElement.parentElement.href||c[i].addEventListener("click",ctFillDecodedEmailHandler);var r,l=\_createForOfIteratorHelper(document.forms);try{for(l.s();!(r=l.n()).done;)!function(){var t=r.value;"undefined"!=typeof ctPublic&&1==+ctPublic.settings\_\_forms\_\_search\_test&&("searchform"===t.getAttribute("id")||null!==t.getAttribute("class")&&-1!==t.getAttribute("class").indexOf("search-form")||null!==t.getAttribute("role")&&-1!==t.getAttribute("role").indexOf("search"))&&(t.apbctSearchPrevOnsubmit=t.onsubmit,t.onsubmit=function(e){return ctSearchFormOnSubmitHandler(e,t)})}()}catch(e){l.e(e)}finally{l.f()}apbctCatchXmlHttpRequest(),apbctAjaxSetImportantParametersOnCacheExist(ctPublic.advancedCacheExists||ctPublic.varnishCacheExists),void 0!==apbctTrpBrokenIntervalId&&setTimeout(function(){clearInterval(apbctTrpBrokenIntervalId)},1e3)}ctPublic.data\_\_key\_is\_ok&&(apbct\_attach\_event\_handler(document,"mousemove",ctFunctionMouseMove),apbct\_attach\_event\_handler(document,"mousedown",ctFunctionFirstKey),apbct\_attach\_event\_handler(document,"keydown",ctFunctionFirstKey),apbct\_attach\_event\_handler(document,"scroll",ctSetHasScrolled));var apbctTrpBrokenIntervalId=setInterval(apbctFixBrokenTRP,100);function apbctFixBrokenTRP(){var t='<div class="apbct-real-user-author-name">';if(-1<document.documentElement.textContent.indexOf(t)){for(var o=document.documentElement.textContent.match(new RegExp(t+"(.\*?)</div>"))[1],e=document.querySelectorAll(".comment-author"),n=0;n<e.length;n++)e[n].childNodes.forEach(function(e){e.textContent.includes(t)&&(e.textContent=o,apbctFixBrokenTRP())});for(var a=document.querySelectorAll(".woocommerce-review\_\_author"),c=0;c<a.length;c++)a[c].childNodes.forEach(function(e){e.textContent.includes(t)&&(e.textContent=o,apbctFixBrokenTRP())})}}function ctAddWCMiddlewares(){window.hasOwnProperty("wp")&&window.wp.hasOwnProperty("apiFetch")&&"function"==typeof window.wp.apiFetch.use&&window.wp.apiFetch.use(function(e,t){return"object"===\_typeof(e)&&null!==e&&e.hasOwnProperty("data")&&e.hasOwnProperty("path")&&(e.data.hasOwnProperty("requests")&&0<e.data.requests.length&&e.data.requests[0].hasOwnProperty("path")&&"/wc/store/v1/cart/add-item"===e.data.requests[0].path&&(e.data.requests[0].data.ct\_no\_cookie\_hidden\_field=getNoCookieData()),"/wc/store/v1/checkout"===e.path)&&(e.data.ct\_no\_cookie\_hidden\_field=getNoCookieData()),t(e)})}function apbctCatchXmlHttpRequest(){var n;null!==document.querySelector("div.wfu\_container")&&(n=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.send=function(e){if(e&&"string"==typeof e&&-1!==e.indexOf("action=wfu\_ajax\_action\_ask\_server")){var t="",o=localStorage.getItem("bot\_detector\_event\_token");try{o=JSON.parse(o)}catch(e){o=!1}null!==o&&!1!==o&&o.hasOwnProperty("value")&&""!==o.value&&(t+="&data%5Bct\_bot\_detector\_event\_token%5D="+(o=o.value));o=getNoCookieData();return n.apply(this,[e+=t+="&data%5Bct\_no\_cookie\_hidden\_field%5D="+o])}return n.apply(this,[e])})}function apbctAjaxSetImportantParametersOnCacheExist(e){e&&("rest"===ctPublicFunctions.data\_\_ajax\_type?apbct\_public\_sendREST("apbct\_set\_important\_parameters",{}):"admin\_ajax"===ctPublicFunctions.data\_\_ajax\_type&&apbct\_public\_sendAJAX({action:"apbct\_set\_important\_parameters"},{}))}function ctAjaxSetupAddCleanTalkDataBeforeSendAjax(){var n=!1;"undefined"!=typeof jQuery&&"function"==typeof jQuery.ajaxSetup&&jQuery.ajaxSetup({beforeSend:function(e,t){var o=!1;if("string"==typeof t.data&&(-1!==t.data.indexOf("twt\_cc\_signup")&&(o="twt\_cc\_signup"),-1!==t.data.indexOf("action=mailpoet")&&(o="action=mailpoet"),-1!==t.data.indexOf("action=user\_registration")&&-1!==t.data.indexOf("ur\_frontend\_form\_nonce")&&(o="action=user\_registration"),-1!==t.data.indexOf("action=happyforms\_message")&&(o="action=happyforms\_message"),-1!==t.data.indexOf("action=new\_activity\_comment"))&&(o="action=new\_activity\_comment"),"string"==typeof t.url&&-1!==t.url.indexOf("wc-ajax=add\_to\_cart")&&(o="wc-ajax=add\_to\_cart",null!==localStorage.getItem("bot\_detector\_event\_token"))){n=localStorage.getItem("bot\_detector\_event\_token");try{n=JSON.parse(n)}catch(e){n=!1}!1!==n&&n.hasOwnProperty("value")&&""!==n.value&&(n=n.value)}o&&(o=getNoCookieData(),n="string"==typeof n?"data%5Bct\_bot\_detector\_event\_token%5D="+n+"&":"",t.data=(o="data%5Bct\_no\_cookie\_hidden\_field%5D="+o+"&")+n+t.data)}})}function ctOnsubmitPrevCallExclude(e){return!!e.classList.contains("hb-booking-search-form")}function ctSearchFormOnSubmitHandler(e,t){try{var o,n,a,c=t.querySelector('[id\*="apbct\_\_email\_id\_\_"]'),i=null,r=null,l=(null!==c&&null!==c.value&&null!==c.getAttribute("apbct\_event\_id")&&(i=c.value,r=c.getAttribute("apbct\_event\_id")),getCleanTalkStorageDataArray()),s=apbctLocalStorage.get("bot\_detector\_event\_token");null===l&&null===c&&null===s||(e.preventDefault(),o=function(){null!==c&&c.parentNode.removeChild(c),"function"==typeof t.apbctSearchPrevOnsubmit?t.apbctSearchPrevOnsubmit():HTMLFormElement.prototype.submit.call(t)},n=l,null!==i&&null!==r&&(n.apbct\_search\_form\_\_honeypot\_value=i,n.apbct\_search\_form\_\_honeypot\_id=r),n.ct\_bot\_detector\_event\_token=s,"string"==typeof n.apbct\_pixel\_url&&-1!==n.apbct\_pixel\_url.indexOf("%3A")&&(n.apbct\_pixel\_url=decodeURIComponent(n.apbct\_pixel\_url)),void 0!==(a=JSON.stringify(n))&&0!==a.length?ctSetAlternativeCookie(a,{callback:o,onErrorCallback:o,forceAltCookies:!0}):o())}catch(e){console.warn("APBCT search form onsubmit handler error. "+e)}}function ctFillDecodedEmailHandler(e){this.removeEventListener("click",ctFillDecodedEmailHandler);ctPublic.encodedEmailNodesIsMixed=!1,document.body.classList.add("apbct-popup-fade");var t,o,n,a,c=document.getElementById("apbct\_popup");c?(c.setAttribute("style","display: inherit"),document.getElementById("apbct\_popup\_text").innerHTML="Please wait while "+ctPublic.wl\_brandname+" is decoding the email addresses."):(c=null,"A"===e.currentTarget.tagName&&(c=(c=e.currentTarget.querySelector("span.apbct-ee-blur\_email-text"))&&c.innerHTML),"SPAN"===e.currentTarget.tagName&&(c=e.currentTarget.querySelector("span.apbct-ee-blur\_email-text").innerHTML),null===(c="IMG"===e.currentTarget.tagName?e.currentTarget.parentNode.innerHTML:c)&&(c="obfuscated email"),(t=document.createElement("div")).setAttribute("class","apbct-popup apbct-email-encoder-popup"),t.setAttribute("id","apbct\_popup"),(o=document.createElement("span")).classList="apbct-email-encoder-elements\_center",(n=document.createElement("p")).innerText=ctPublic.wl\_brandname,n.setAttribute("class","apbct-email-encoder--popup-header"),o.append(n),(n=document.createElement("div")).setAttribute("id","apbct\_popup\_text"),n.setAttribute("class","apbct-email-encoder-elements\_center"),n.style.color="black",(a=document.createElement("p")).id="apbct\_email\_ecoder\_\_popup\_text\_node\_first",a.innerText="Decoding "+c+" to the original one.",(c=document.createElement("p")).id="apbct\_email\_ecoder\_\_popup\_text\_node\_second",c.innerText="The magic is on the way, please wait for a few seconds!",c.setAttribute("class","apbct-email-encoder-elements\_center"),n.append(a),n.append(c),t.append(o),t.append(n),t.append(apbctSetEmailDecoderPopupAnimation()),document.body.append(t)),apbctAjaxEmailDecodeBulk(e,ctPublic.encodedEmailNodes,this)}function apbctSetEmailDecoderPopupAnimation(){var e=["apbct\_dog\_one","apbct\_dog\_two","apbct\_dog\_three"],t=document.createElement("div");t.classList="apbct-ee-animation-wrapper";for(var o=0;o<e.length;o++){var n=document.createElement("span");n.classList="apbct\_dog "+e[o],n.innerText="@",t.append(n)}return t}function apbctAjaxEmailDecodeBulk(e,t,o){for(var n={event\_javascript\_data:getJavascriptClientData(),post\_url:document.location.href,referrer:document.referrer,encodedEmails:""},a={},c=0;c<t.length;c++){void 0!==t[c].href&&0===t[c].href.indexOf("mailto:")&&(e.preventDefault(),ctPublic.encodedEmailNodesIsMixed=!0);var i=document.createElement("div");i.setAttribute("class","apbct-tooltip"),apbct(t[c]).append(i),a[c]=t[c].dataset.originalString}n.encodedEmails=JSON.stringify(a),"rest"===ctPublicFunctions.data\_\_ajax\_type?apbct\_public\_sendREST("apbct\_decode\_email",{data:n,method:"POST",callback:function(e){ctSetCookie("apbct\_email\_encoder\_passed",ctPublic.emailEncoderPassKey),apbctEmailEncoderCallbackBulk(e,t,o)},onErrorCallback:function(e){resetEncodedNodes(),ctShowDecodeComment(e)}}):(n.action="apbct\_decode\_email",apbct\_public\_sendAJAX(n,{notJson:!1,callback:function(e){ctSetCookie("apbct\_email\_encoder\_passed",ctPublic.emailEncoderPassKey),apbctEmailEncoderCallbackBulk(e,t,o)},onErrorCallback:function(e){resetEncodedNodes(),ctShowDecodeComment(e)}}))}function apbctEmailEncoderCallbackBulk(c,i,r){c.success&&!0===c.data[0].is\_allowed?setTimeout(function(){var t,e,o,n,a=document.getElementById("apbct\_popup");null!==a&&(c.data.forEach(function(e){e.encoded\_email===r.dataset.originalString&&(t=e)}),o=t.decoded\_email.split(/[&?]/)[0],e=a.querySelector("#apbct\_email\_ecoder\_\_popup\_text\_node\_first"),(n=document.createElement("b")).setAttribute("class","apbct-email-encoder-select-whole-email"),n.innerText=o,n.title="Click to select the whole email",e.innerHTML="The original contact is&nbsp;"+n.outerHTML+".",e.setAttribute("style","flex-direction: row;"),a.querySelector("#apbct\_email\_ecoder\_\_popup\_text\_node\_second").innerText="Happy conversations!",a.querySelector(".apbct-ee-animation-wrapper").remove(),(o=document.createElement("span")).classList="apbct-email-encoder-elements\_center top-margin-long",(n=document.createElement("button")).innerText="Got it",n.classList="apbct-email-encoder-got-it-button",n.addEventListener("click",function(){document.body.classList.remove("apbct-popup-fade"),a.setAttribute("style","display:none"),fillDecodedEmails(i,c),ctPublic.encodedEmailNodesIsMixed&&r.click()}),o.append(n),a.append(o))},3e3):c.success?(resetEncodedNodes(),ctShowDecodeComment("Blocked: "+c.data[0].comment)):(resetEncodedNodes(),ctShowDecodeComment("Cannot connect with CleanTalk server: "+c.data[0].comment))}function fillDecodedEmails(a,c){for(var e,t=0;t<a.length;t++)if(e=function(t){var o,e,n;if(c.data.forEach(function(e){e.encoded\_email===a[t].dataset.originalString&&(o=e)}),!1===o.is\_allowed)return{v:void 0};void 0!==a[t].href&&0===a[t].href.indexOf("mailto:")?(e=a[t].href.replace("mailto:",""),n=a[t].innerHTML,a[t].innerHTML=n.replace(e,o.decoded\_email),a[t].href="mailto:"+o.decoded\_email,a[t].querySelectorAll("span.apbct-email-encoder").forEach(function(e){var t=o.decoded\_email.split("&")[0];e.querySelector(".apbct-ee-blur\_email-text").innerHTML=t})):ctProcessDecodedDataResult(o,a[t]),ctPerformMagicBlur(a[t]),a[t].removeEventListener("click",ctFillDecodedEmailHandler)}(t))return e.v}function resetEncodedNodes(){void 0!==ctPublic.encodedEmailNodes&&ctPublic.encodedEmailNodes.forEach(function(e){e.addEventListener("click",ctFillDecodedEmailHandler)})}function getJavascriptClientData(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t={},o=(t.ct\_checked\_emails=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_checked\_emails"),t.ct\_checked\_emails\_exist=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_checked\_emails\_exist"),t.ct\_checkjs=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_checkjs"),t.ct\_fkp\_timestamp=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_fkp\_timestamp"),t.ct\_pointer\_data=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_pointer\_data"),t.ct\_ps\_timestamp=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_ps\_timestamp"),t.ct\_screen\_info=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_screen\_info"),t.ct\_timezone=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_timezone"),apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct\_mouse\_moved")),n=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct\_has\_scrolled"),a=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct\_cookies\_type"),c=apbctLocalStorage.get("apbct\_page\_hits"),i=apbctSessionStorage.get("apbct\_prev\_referer"),r=apbctSessionStorage.get("apbct\_site\_referer"),l=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"ct\_js\_errors"),s=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"apbct\_pixel\_url"),u=apbctLocalStorage.get(ctPublicFunctions.cookiePrefix+"apbct\_headless"),d=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_mouse\_moved"),p=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_has\_scrolled"),\_=ctGetCookie(ctPublicFunctions.cookiePrefix+"ct\_cookies\_type"),m=ctGetCookie(ctPublicFunctions.cookiePrefix+"apbct\_pixel\_url"),f=!!ctGetCookie(ctPublicFunctions.cookiePrefix+"apbct\_headless");if(t.ct\_mouse\_moved=void 0!==o?o:d,t.ct\_has\_scrolled=void 0!==n?n:p,t.ct\_cookies\_type=void 0!==a?a:\_,t.apbct\_pixel\_url=void 0!==s?s:m,t.apbct\_headless=void 0!==u?u:f,t.apbct\_pixel\_url&&"string"==typeof t.apbct\_pixel\_url&&t.apbct\_pixel\_url.indexOf("%3A%2F")&&(t.apbct\_pixel\_url=decodeURIComponent(t.apbct\_pixel\_url)),t.apbct\_page\_hits=c,t.apbct\_prev\_referer=i,t.apbct\_site\_referer=r,t.apbct\_ct\_js\_errors=l,t.apbct\_pixel\_url||(t.apbct\_pixel\_url=ctPublic.pixel\_\_url),"object"===\_typeof(e)&&e!==[])for(var b=0;b<e.length;++b)"object"===\_typeof(e[b][1])?t[e[b][1][0]]=e[b][1][1]:t[e[b][0]]=e[b][1];else console.log("APBCT JS ERROR: Collecting data type mismatch");return t=removeDoubleJsonEncoding(t),JSON.stringify(t)}function removeDoubleJsonEncoding(e){if("object"===\_typeof(e))for(var t in e){var o;"object"===\_typeof(e[t])&&(e[t]=removeDoubleJsonEncoding(e[t])),"string"==typeof e[t]&&null!==e[t].match(/^[\[{].\*?[\]}]$/)&&"object"===\_typeof(o=JSON.parse(e[t]))&&(e[t]=o)}return e}function ctProcessDecodedDataResult(e,t){t.setAttribute("title",""),t.removeAttribute("style"),ctFillDecodedEmail(t,e.decoded\_email)}function ctPerformMagicBlur(e){var t=e.querySelector(".apbct-ee-static-blur"),e=e.querySelector(".apbct-ee-animate-blur");null!==t&&(t.style.display="none"),null!==e&&(e.style.display="inherit")}function ctFillDecodedEmail(e,t){apbct(e).html(apbct(e).html().replace(/.?<span class=["']apbct-ee-blur\_email-text["'].\*>(.+?)<\/span>/,t))}function ctShowDecodeComment(e){e=e||"Can not decode email. Unknown reason";var t=document.getElementById("apbct\_popup"),o=document.getElementById("apbct\_popup\_text");null!==t&&(document.body.classList.remove("apbct-popup-fade"),o.innerText="CleanTalk email decoder: "+e,setTimeout(function(){t.setAttribute("style","display:none")},3e3))}function apbct\_collect\_visible\_fields(e){var t,o=[],n="",a=0,c="",i=0,r=[];for(t in e.elements)isNaN(+t)||(o[t]=e.elements[t]);return(o=o.filter(function(e){return-1===r.indexOf(e.getAttribute("name"))&&(-1===["radio","checkbox"].indexOf(e.getAttribute("type"))||(r.push(e.getAttribute("name")),!1))})).forEach(function(e,t,o){"submit"!==e.getAttribute("type")&&null!==e.getAttribute("name")&&"ct\_checkjs"!==e.getAttribute("name")&&("none"!==getComputedStyle(e).display&&"hidden"!==getComputedStyle(e).visibility&&"0"!==getComputedStyle(e).opacity&&"hidden"!==e.getAttribute("type")||e.classList.contains("wp-editor-area")?(n+=" "+e.getAttribute("name"),a++):(c+=" "+e.getAttribute("name"),i++))}),c=c.trim(),{visible\_fields:n=n.trim(),visible\_fields\_count:a,invisible\_fields:c,invisible\_fields\_count:i}}function apbct\_visible\_fields\_set\_cookie(e,t){var o="object"===\_typeof(e)&&null!==e?e:{};if("native"===ctPublic.data\_\_cookies\_type)for(var n in o){if(10<n)return;ctSetCookie("apbct\_visible\_fields\_"+(void 0!==t?t:n),JSON.stringify(o[n]))}else"none"===ctPublic.data\_\_cookies\_type?ctSetCookie("apbct\_visible\_fields",JSON.stringify(o[0])):ctSetCookie("apbct\_visible\_fields",JSON.stringify(o))}function apbct\_js\_keys\_\_set\_input\_value(e,t,o,n){if(0<document.querySelectorAll("[name^=ct\_checkjs]").length)for(var a=document.querySelectorAll("[name^=ct\_checkjs]"),c=0;c<a.length;c++)a[c].value=e.js\_key}function apbctGetScreenInfo(){return JSON.stringify({fullWidth:document.documentElement.scrollWidth,fullHeight:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight),visibleWidth:document.documentElement.clientWidth,visibleHeight:document.documentElement.clientHeight})}function ctParseBlockMessage(e){void 0!==e.apbct&&(e=e.apbct).blocked&&(document.dispatchEvent(new CustomEvent("apbctAjaxBockAlert",{bubbles:!0,detail:{message:e.comment}})),cleantalkModal.loaded=e.comment,cleantalkModal.open(),1==+e.stop\_script)&&window.stop()}function ctSetPixelUrlLocalstorage(e){ctSetCookie("apbct\_pixel\_url",e)}function ctNoCookieConstructHiddenField(e){var t="hidden",e=("submit"===e&&(t="submit"),""),o=getCleanTalkStorageDataArray(),o=JSON.stringify(o);return o="\_ct\_no\_cookie\_data\_"+btoa(o),(e=document.createElement("input")).setAttribute("name","ct\_no\_cookie\_hidden\_field"),e.setAttribute("value",o),e.setAttribute("type",t),e.classList.add("apbct\_special\_field"),e.classList.add("ct\_no\_cookie\_hidden\_field"),e}function getCleanTalkStorageDataArray(){var e=apbctLocalStorage.getCleanTalkData(),t=apbctSessionStorage.getCleanTalkData(),o={typo:[]};return document.ctTypoData&&document.ctTypoData.data&&(o={typo:document.ctTypoData.data}),\_objectSpread(\_objectSpread(\_objectSpread({},e),t),o)}function ctGetPageForms(){var e=document.forms;return e||!1}function ctGetHiddenFieldExclusionsType(e){var t={no\_cookie:0,visible\_fields:0},o=((0==+ctPublic.data\_\_visible\_fields\_required||"get"===e.method.toString().toLowerCase()&&0===e.querySelectorAll(".nf-form-content").length&&"twt\_cc\_signup"!==e.id||e.classList.contains("slp\_search\_form")||e.parentElement.classList.contains("mec-booking")||-1!==e.action.toString().indexOf("activehosted.com")||e.id&&"caspioform"===e.id||e.classList&&e.classList.contains("tinkoffPayRow")||e.classList&&e.classList.contains("give-form")||e.id&&"ult-forgot-password-form"===e.id||e.id&&-1!==e.id.toString().indexOf("calculatedfields")||e.id&&-1!==e.id.toString().indexOf("sac-form")||e.id&&-1!==e.id.toString().indexOf("cp\_tslotsbooking\_pform")||e.name&&-1!==e.name.toString().indexOf("cp\_tslotsbooking\_pform")||"https://epayment.epymtservice.com/epay.jhtml"===e.action.toString()||e.name&&-1!==e.name.toString().indexOf("tribe-bar-form")||e.id&&"ihf-login-form"===e.id||e.id&&"subscriberForm"===e.id&&-1!==e.action.toString().indexOf("actionType=update")||e.id&&"ihf-main-search-form"===e.id||e.id&&"frmCalc"===e.id||-1!==e.action.toString().indexOf("property-organizer-delete-saved-search-submit")||null!==e.querySelector('a[name="login"]'))&&(t.visible\_fields=1),e.parentNode);return(o&&o.classList.contains("proinput")||"options"===e.name&&e.classList.contains("asp-fss-flex"))&&(t.no\_cookie=1),e&&e.classList.contains("woocommerce-form-login")&&(t.visible\_fields=1,t.no\_cookie=1),t}function ctCheckHiddenFieldsExclusions(e,t){return!!Boolean(e.querySelector("fieldset.asl\_sett\_scroll"))||!!e.classList.contains("swpf-instant-filtering")||"string"==typeof t&&-1!==["visible\_fields","no\_cookie"].indexOf(t)&&1===ctGetHiddenFieldExclusionsType(e)[t]}function ctNoCookieAttachHiddenFieldsToForms(){if("none"===ctPublic.data\_\_cookies\_type){var e=ctGetPageForms();if(e)for(var t=0;t<e.length;t++)if(!ctCheckHiddenFieldsExclusions(document.forms[t],"no\_cookie")&&(null===document.forms[t].getAttribute("method")||"post"===document.forms[t].getAttribute("method").toLowerCase())){for(var o=e[t].querySelectorAll(".ct\_no\_cookie\_hidden\_field"),n=0;n<o.length;n++)o[n].outerHTML="";document.forms[t].append(ctNoCookieConstructHiddenField())}}}ctPublic.data\_\_key\_is\_ok&&("loading"!==document.readyState?apbct\_ready():apbct\_attach\_event\_handler(document,"DOMContentLoaded",apbct\_ready),apbctLocalStorage.set("ct\_checkjs",ctPublic.ct\_checkjs\_key,!0));var defaultFetch=window.fetch,defaultSend=XMLHttpRequest.prototype.send;function apbctRealUserBadgeWoocommerce(e,t){if(!(window.innerWidth<768)){var o=document.createElement("div"),t=(o.className="apbct-real-user-wrapper",document.querySelector("#comment-"+t).querySelector(".woocommerce-review\_\_author"));try{e=atob(e),o.innerHTML=e,void 0!==t&&(t.style.display="inline-flex",t.appendChild(o))}catch(e){console.log("APBCT error: "+e.toString())}}}function checkFormsExistForCatching(){setTimeout(function(){isFormThatNeedCatch()&&(window.fetch=function(){for(var e,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return o&&o[0]&&"function"==typeof o[0].includes&&o[0].includes("/wp-json/metform/")&&(e=getNoCookieData(),o)&&o[1]&&o[1].body&&o[1].body.append("ct\_no\_cookie\_hidden\_field",e),defaultFetch.apply(window,o)})},1e3)}function isFormThatNeedCatch(){var e,o=["metform-form-content"],n=!1,t=\_createForOfIteratorHelper(document.forms);try{for(t.s();!(e=t.n()).done;)!function(){var t=e.value;o.forEach(function(e){t.classList.contains(e)&&(n=!0)})}()}catch(e){t.e(e)}finally{t.f()}return n}function isFormThatNeedCatchXhr(e){return null==document.querySelector("div.elementor-widget[title='Login/Signup']")&&!(!e||!e.action||-1===e.action.toString().indexOf("mailpoet\_subscription\_form"))}function getNoCookieData(){var e=apbctLocalStorage.getCleanTalkData(),t=apbctSessionStorage.getCleanTalkData(),e=\_objectSpread(\_objectSpread({},e),t),e=JSON.stringify(e);return"\_ct\_no\_cookie\_data\_"+btoa(e)}function apbctWriteReferrersToSessionStorage(){var e=apbctSessionStorage.get("apbct\_session\_current\_page");!1!==e&&document.location.href!==e&&apbctSessionStorage.set("apbct\_prev\_referer",e,!1),apbctSessionStorage.set("apbct\_session\_current\_page",document.location.href,!1)}function apbctCheckAddToCartByGet(){document.querySelectorAll("a.add\_to\_cart\_button:not(.product\_type\_variable):not(.wc-interactive)").forEach(function(n){n.addEventListener("click",function(e){var t=n.getAttribute("href"),o=apbctLocalStorage.get("bot\_detector\_event\_token");o&&(-1===t.indexOf("?")?t+="?":t+="&",n.setAttribute("href",t+="ct\_bot\_detector\_event\_token="+o))})})}"loading"!==document.readyState?checkFormsExistForCatching():apbct\_attach\_event\_handler(document,"DOMContentLoaded",checkFormsExistForCatching);var ctProtectOutsideIframeCheck,cleantalkModal={loaded:!1,loading:!1,opened:!1,opening:!1,ignoreURLConvert:!1,load:function(e){var t;this.loaded||(this.loading=!0,t=function(e,t,o,n){cleantalkModal.loading=!1,cleantalkModal.loaded=e,document.dispatchEvent(new CustomEvent("cleantalkModalContentLoaded",{bubbles:!0}))},("function"==typeof apbct\_admin\_sendAJAX?apbct\_admin\_sendAJAX:apbct\_public\_sendAJAX)({action:e},{callback:t,notJson:!0}))},open:function(){function e(){var e,t="";for(e in this.styles)t+=e+":"+this.styles[e]+";";return t}var t={styles:{"z-index":"9999999999",position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0,0,0,0.5)",display:"flex","justify-content":"center","align-items":"center"},toString:e},o={styles:{position:"relative",padding:"30px",background:"#FFF",border:"1px solid rgba(0,0,0,0.75)","border-radius":"4px","box-shadow":"7px 7px 5px 0px rgba(50,50,50,0.75)"},toString:e},n={styles:{position:"absolute",background:"#FFF",width:"20px",height:"20px",border:"2px solid rgba(0,0,0,0.75)","border-radius":"15px",cursor:"pointer",top:"-8px",right:"-8px","box-sizing":"content-box"},toString:e},a={styles:{content:'""',display:"block",position:"absolute",background:"#000","border-radius":"1px",width:"2px",height:"16px",top:"2px",left:"9px",transform:"rotate(45deg)"},toString:e},c={styles:{content:'""',display:"block",position:"absolute",background:"#000","border-radius":"1px",width:"2px",height:"16px",top:"2px",left:"9px",transform:"rotate(-45deg)"},toString:e},i={styles:{overflow:"hidden"},toString:e},r=document.createElement("style"),i=(r.setAttribute("id","cleantalk-modal-styles"),r.innerHTML="body.cleantalk-modal-opened{"+i+"}",r.innerHTML+="#cleantalk-modal-overlay{"+t+"}",r.innerHTML+="#cleantalk-modal-close{"+n+"}",r.innerHTML+="#cleantalk-modal-close:before{"+a+"}",r.innerHTML+="#cleantalk-modal-close:after{"+c+"}",document.body.append(r),document.createElement("div")),t=(i.setAttribute("id","cleantalk-modal-overlay"),document.body.append(i),document.body.classList.add("cleantalk-modal-opened"),document.createElement("div")),n=(t.setAttribute("id","cleantalk-modal-inner"),t.setAttribute("style",o),i.append(t),document.createElement("div")),a=(n.setAttribute("id","cleantalk-modal-close"),t.append(n),document.createElement("div"));this.loaded?/.\*\/inc/g.test(this.loaded)||this.ignoreURLConvert?a.innerHTML=this.loaded:a.innerHTML=this.loaded.replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="\_blank">$1</a>'):(a.innerHTML="Loading...",this.load("get\_options\_template")),a.setAttribute("id","cleantalk-modal-content"),t.append(a),this.opened=!0},close:function(){document.body.classList.remove("cleantalk-modal-opened"),document.getElementById("cleantalk-modal-overlay").remove(),document.getElementById("cleantalk-modal-styles").remove(),document.dispatchEvent(new CustomEvent("cleantalkModalClosed",{bubbles:!0}))}};function ctProtectExternal(){for(var e,t,o=0;o<document.forms.length;o++)void 0!==document.forms[o].cleantalk\_hidden\_action||void 0!==document.forms[o].cleantalk\_hidden\_method||formIsExclusion(e=document.forms[o])||(isIntegratedForm(e)?apbctProcessExternalForm(e,o,document):void 0!==e.dataset.mailingListId||"string"==typeof e.action&&-1!==e.action.indexOf("webto.salesforce.com")||"string"==typeof e.action&&e.querySelector('[href\*="activecampaign"]')?apbctProcessExternalFormByFakeButton(e,o,document):"string"!=typeof e.action||-1===e.action.indexOf("http://")&&-1===e.action.indexOf("https://")||e.action.split("//")[1].split("/")[0].toLowerCase()!==location.hostname.toLowerCase()&&((t=document.createElement("input")).name="cleantalk\_hidden\_action",t.value=e.action,t.type="hidden",e.appendChild(t),(t=document.createElement("input")).name="cleantalk\_hidden\_method",t.value=e.method,t.type="hidden",e.method="POST",e.appendChild(t),e.action=document.location));apbctProcessIframes(),ctStartFieldsListening()}function formIsExclusion(o){var n=!1;try{o.parentElement&&0<o.parentElement.classList.length&&-1!==o.parentElement.classList[0].indexOf("mewtwo")&&(n=!0),null!==o.getAttribute("action")&&["paypal.com/cgi-bin/webscr"].forEach(function(e){-1!==o.getAttribute("action").indexOf(e)&&(n=!0)}),["give-form","frmCalc","ihf-contact-request-form","wpforms"].forEach(function(e){var t=o.getAttribute("id");null!=t&&-1!==t.indexOf(e)&&(n=!0)}),["search-form","hs-form","ihc-form-create-edit","nf-form-content","elementor-form","wpforms","et\_pb\_searchform"].forEach(function(e){var t=o.getAttribute("class")?o.getAttribute("class"):apbctGetFormClass(o,e);null!=t&&-1!==t.indexOf(e)&&(n=!0)}),["search"].forEach(function(e){var t=o.getAttribute("id");null!=t&&-1!==t.indexOf(e)&&(n=!0)})}catch(e){console.table("APBCT ERROR: formIsExclusion() - ",e)}return n}function apbctGetFormClass(e,t){if("object"==\_typeof(e)&&e.querySelector("."+t))return t}function apbctProcessIframes(){var e=document.getElementsByTagName("iframe");if(0<e.length)for(var t=0;t<e.length;t++)if(null!=e[t].contentDocument){var o=e[t].contentDocument.forms;if(0!==o.length)for(var n=0;n<o.length;n++){var a=o[n];formIsExclusion(a)||apbctProcessExternalForm(a,n,e[t].contentDocument)}}}function apbctProcessExternalForm(e,t,o){var n=document.createElement("i"),n=(n.className="cleantalk\_placeholder",n.style="display: none",e.parentElement.insertBefore(n,e),e.previousSibling),a=e.outerHTML,c=e,e=(e.parentElement.removeChild(e),document.createElement("div")),a=(e.innerHTML=a,n.after(e.firstElementChild),document.createElement("input")),i=(a.name="action",a.value="cleantalk\_force\_ajax\_check",a.type="hidden",o.forms[t]),r=(i.appendChild(a),i.apbctPrev=n,i.apbctFormOriginal=c,!1);void 0!==i.classList&&["newsletterform","ml-block-form"].forEach(function(e){i.classList.contains(e)&&(r=e)}),r?void 0!==(e=o.querySelector("form."+r).querySelector('button[type="submit"]'))&&e.addEventListener("click",function(e){e.preventDefault(),sendAjaxCheckingFormData(i)}):o.forms[t].onsubmit=function(e){e.preventDefault(),sendAjaxCheckingFormData(e.currentTarget)}}function apbctProcessExternalFormByFakeButton(e,t,o){var n,a,c,i=e.querySelector('[type="submit"]'),e=e.querySelector('[type="submit"]').form.onsubmit;i&&(n=i.parentElement,a=i.outerHTML,i.remove(),(c=document.createElement("div")).innerHTML=a,n.appendChild(c.firstElementChild),(a=document.createElement("input")).name="action",a.value="cleantalk\_force\_ajax\_check",a.type="hidden",(c=o.forms[t]).appendChild(a),c.apbctParent=n,c.submitButtonOriginal=i,c.onsubmitOriginal=e,o.forms[t].onsubmit=function(e){e.preventDefault(),sendAjaxCheckingFormData(e.currentTarget)})}function apbctReplaceInputsValuesFromOtherForm(e,t){var o=e.querySelectorAll("button, input, textarea, select"),n=t.querySelectorAll("button, input, textarea, select");-1!==e.outerHTML.indexOf('action="https://www.kulahub.net')||isFormHasDiviRedirect(e)||-1!==e.outerHTML.indexOf('class="et\_pb\_contact\_form')?o.forEach(function(t){n.forEach(function(e){t.name===e.name&&("checkbox"===e.type||"radio"===e.type?e.checked=apbctVal(t):e.value=apbctVal(t))})}):o.forEach(function(t){n.forEach(function(e){t.outerHTML===e.outerHTML&&("checkbox"===e.type||"radio"===e.type?e.checked=apbctVal(t):e.value=apbctVal(t))})})}function ctProtectKlaviyoForm(){var t;document.querySelector('link[rel="dns-prefetch"][href="//static.klaviyo.com"]')&&(t=setInterval(function(){var e=document.querySelectorAll("form.klaviyo-form");e.length&&(clearInterval(t),e.forEach(function(e,t){apbctProcessExternalFormKlaviyo(e,t,document)}))},500))}function apbctProcessExternalFormKlaviyo(t,e,o){var n,a=t.querySelector('button[type="button"].needsclick');a&&(a.disabled=!0,(n=document.createElement("input")).name="action",n.value="cleantalk\_force\_ajax\_check",n.type="hidden",t.appendChild(n),(n=document.createElement("div")).id="apbct-klaviyo-cover",n.style.width="100%",n.style.height="100%",n.style.background="black",n.style.opacity=0,n.style.position="absolute",n.style.top=0,n.style.cursor="pointer",n.onclick=function(e){sendAjaxCheckingFormData(t)},a.parentNode.style.position="relative",a.parentNode.appendChild(n))}function ctProtectOutsideIframe(){var e=document.querySelectorAll("iframe");0<e.length&&e.forEach(function(e){!(-1!==e.src.indexOf("form.typeform.com")||-1!==e.src.indexOf("forms.zohopublic.com")||-1!==e.src.indexOf("link.surepathconnect.com")||e.classList.contains("hs-form-iframe")||-1!==e.src.indexOf("facebook.com")&&-1!==e.src.indexOf("plugins/comments.php"))||!1!==apbctLocalStorage.get("apbct\_iframes\_protected")&&0<apbctLocalStorage.get("apbct\_iframes\_protected").length&&void 0!==e.id&&-1!==apbctLocalStorage.get("apbct\_iframes\_protected").indexOf[e.id]||ctProtectOutsideIframeHandler(e)})}function ctProtectOutsideIframeHandler(e){var t=document.createElement("div"),t=(t.style.width="100%",t.style.height="100%",t.style.background="black",t.style.opacity=0,t.style.position="absolute",t.style.top=0,t.onclick=function(e){var t;void 0===ctProtectOutsideIframeCheck&&((e=e.currentTarget).style.opacity=.5,(t=document.createElement("div")).className="apbct-iframe-preloader",e.appendChild(t),e="",document.querySelector('[name\*="ct\_bot\_detector\_event\_token"]')&&(e=document.querySelector('[name\*="ct\_bot\_detector\_event\_token"]').value),apbct\_public\_sendAJAX({action:"cleantalk\_outside\_iframe\_ajax\_check",ct\_no\_cookie\_hidden\_field:getNoCookieData(),ct\_bot\_detector\_event\_token:e},{async:!1,callback:function(t){!(ctProtectOutsideIframeCheck=!0)===t.apbct.blocked?document.querySelectorAll("div.apbct-iframe-preloader").forEach(function(e){e.parentNode.remove()}):(document.querySelectorAll("div.apbct-iframe-preloader").forEach(function(e){e.parentNode.style.color="white",e.parentNode.innerHTML+=t.apbct.comment}),document.querySelectorAll("div.apbct-iframe-preloader").forEach(function(e){e.remove()}))}}))},e.parentNode.style.position="relative",e.parentNode.appendChild(t),apbctLocalStorage.get("apbct\_iframes\_protected"));!1===t&&(t=[]),void 0!==e.id&&(t.push(e.id),apbctLocalStorage.set("apbct\_iframes\_protected",t))}function catchNextendSocialLoginForm(){var e=document.getElementById("nsl-custom-login-form-main");e&&blockBtnNextendSocialLogin(e)}function blockBtnNextendSocialLogin(e){var t=e.querySelectorAll(".nsl-container-buttons a"),e=e.querySelectorAll('a[data-plugin="nsl"] .nsl-button');t.forEach(function(e){e.setAttribute("data-oauth-login-blocked","true"),e.addEventListener("click",function(e){e.preventDefault()})}),e.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),ctCheckAjax(t)})})}function allowAjaxNextendSocialLogin(e){e.parentElement.setAttribute("data-oauth-login-blocked","false"),e.parentElement.click()}function forbiddenAjaxNextendSocialLogin(e,t){var o,e=e.parentElement;"false"==e.getAttribute("data-oauth-login-blocked")&&e.setAttribute("data-oauth-login-blocked","true"),document.querySelector(".ct-forbidden-msg")||((o=document.createElement("div")).className="ct-forbidden-msg",o.style.background="red",o.style.color="white",o.style.padding="5px",o.innerHTML=t,e.insertAdjacentElement("beforebegin",o))}function ctCheckAjax(t){apbct\_public\_sendAJAX({action:"cleantalk\_nsl\_ajax\_check",ct\_no\_cookie\_hidden\_field:document.getElementsByName("ct\_no\_cookie\_hidden\_field")[0].value},{async:!1,callback:function(e){!1===e.apbct.blocked?allowAjaxNextendSocialLogin(t):forbiddenAjaxNextendSocialLogin(t,e.apbct.comment)}})}function isIntegratedForm(e){var t="string"==typeof e.action?e.action:"",o=null!==e.getAttribute("id")?e.getAttribute("id"):"";return!!(-1!==t.indexOf("app.convertkit.com")||void 0!==e.firstChild.classList&&e.firstChild.classList.contains("cb-form-group")||-1!==t.indexOf("mailerlite.com")||-1!==t.indexOf("colcolmail.co.uk")||-1!==t.indexOf("paypal.com")||-1!==t.indexOf("infusionsoft.com")||-1!==t.indexOf("secure2.convio.net")||-1!==t.indexOf("hookb.in")||-1!==t.indexOf("external.url")||-1!==t.indexOf("tp.media")||-1!==t.indexOf("flodesk.com")||-1!==t.indexOf("sendfox.com")||-1!==t.indexOf("aweber.com")||-1!==t.indexOf("secure.payu.com")||-1!==t.indexOf("mautic")||-1!==o.indexOf("mauticform\_")||-1!==o.indexOf("ihf-contact-request-form")||-1!==t.indexOf("crm.zoho.com")||-1!==o.indexOf("delivra-external-form")||-1!==t.indexOf("eloqua.com")||-1!==t.indexOf("kulahub.net")||isFormHasDiviRedirect(e)||-1!==t.indexOf("eocampaign1.com")||-1!==t.indexOf("wufoo.com"))}function isFormHasDiviRedirect(e){var t=!1,o=document.querySelector('div[id^="et\_pb\_contact\_form"]');return t="object"===\_typeof(e)&&null!==e&&null!==o&&o.hasAttribute("data-redirect\_url")&&""!==o.getAttribute("data-redirect\_url")&&null!==o.querySelector('form[class^="et\_pb\_contact\_form"]')?e===o.querySelector('form[class^="et\_pb\_contact\_form"]'):t}function sendAjaxCheckingFormData(p){var e={},o=(e[0]=apbct\_collect\_visible\_fields(p),apbct\_visible\_fields\_set\_cookie(e),{ct\_bot\_detector\_event\_token:apbctLocalStorage.get("bot\_detector\_event\_token")}),e=p.elements;(e=Array.prototype.slice.call(e)).forEach(function(e,t){""===e.name?o["input\_"+t]=e.value:o[e.name]=e.value}),apbct\_public\_sendAJAX(o,{async:!1,callback:function(e,t,o,n){if(void 0===e.apbct||!+e.apbct.blocked){if(void 0!==p.classList&&p.classList.contains("klaviyo-form"))return(c=document.getElementById("apbct-klaviyo-cover"))&&c.remove(),void((c=p.querySelector('button[type="button"].needsclick'))&&(c.disabled=!1,c.click()));if(void 0!==p.dataset.mailingListId)return p.querySelector('[type="submit"]').remove(),p.apbctParent.appendChild(p.submitButtonOriginal),void p.querySelector('[type="submit"]').click();if(p.hasAttribute("action")&&-1!==p.getAttribute("action").indexOf("webto.salesforce.com"))return p.querySelector('[type="submit"]').remove(),p.apbctParent.appendChild(p.submitButtonOriginal),p.onsubmit=p.onsubmitOriginal,void p.querySelector('[type="submit"]').click();if(p.querySelector('[href\*="activecampaign"]'))return p.querySelector('[type="submit"]').remove(),p.apbctParent.appendChild(p.submitButtonOriginal),p.onsubmit=p.onsubmitOriginal,void p.querySelector('[type="submit"]').click();var a,c=p,i=(p.parentElement.removeChild(p),p.apbctPrev),r=p.apbctFormOriginal,l=!1,s=(apbctReplaceInputsValuesFromOtherForm(c,r),-1!==r.id.indexOf("mautic")&&(l=!0),i.after(r),\_createForOfIteratorHelper(r.querySelectorAll('input[name="apbct\_visible\_fields"]')));try{for(s.s();!(a=s.n()).done;)a.value.remove()}catch(e){s.e(e)}finally{s.f()}var u,d=\_createForOfIteratorHelper(r.querySelectorAll('input[value="cleantalk\_force\_ajax\_check"]'));try{for(d.s();!(u=d.n()).done;)u.value.remove()}catch(e){d.e(e)}finally{d.f()}c=r.querySelectorAll("button[type=submit]");if(0!==c.length)return c[0].click(),void(l&&setTimeout(function(){ctProtectExternal()},1500));if(0!==(c=r.querySelectorAll("input[type=submit]")).length)return void c[0].click();if(0!==(c=r.querySelectorAll('button[data-element="submit"]')).length)return void c[0].click();0!==(c=r.querySelectorAll('input[type="image"][name="submit"]')).length&&c[0].click()}void 0!==e.apbct&&+e.apbct.blocked&&ctParseBlockMessage(e)}})}function catchDynamicRenderedForm(){catchDynamicRenderedFormHandler(document.getElementsByTagName("form"));var e=document.getElementsByTagName("iframe");if(0<e.length)for(var t=0;t<e.length;t++)if(null!=e[t].contentDocument){var o=e[t].contentDocument.forms;if(0===o.length)return;catchDynamicRenderedFormHandler(o,e[t].contentDocument)}}function catchDynamicRenderedFormHandler(e){var t,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document,n=[],a=\_createForOfIteratorHelper(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;-1!==c.id.indexOf("hsForm")&&n.push(c.id),-1!==c.id.indexOf("createuser")&&void 0!==c.classList&&c.classList.contains("ihc-form-create-edit")&&n.push(c.id)}}catch(e){a.e(e)}finally{a.f()}for(var i=0,r=n;i<r.length;i++){var l=o.getElementById(r[i]);l.apbct\_external\_onsubmit\_prev=l.onsubmit,l.onsubmit=sendAjaxCheckingDynamicFormData}}function sendAjaxCheckingDynamicFormData(l){l.preventDefault(),l.stopImmediatePropagation();var s=l,e=(l=l.target,document.createElement("input")),e=(e.name="action",e.value="cleantalk\_force\_ajax\_check",e.type="hidden",l.appendChild(e),{}),o=(e[0]=apbct\_collect\_visible\_fields(l),apbct\_visible\_fields\_set\_cookie(e),l.append(ctNoCookieConstructHiddenField("hidden")),{}),e=l.elements;(e=Array.prototype.slice.call(e)).forEach(function(e,t){""===e.name?o["input\_"+t]=e.value:o[e.name]=e.value}),apbct\_public\_sendAJAX(o,{async:!1,callback:function(e){if(void 0===e.apbct||!+e.apbct.blocked){l.onsubmit=null;var t,o=\_createForOfIteratorHelper(l.querySelectorAll('input[name="apbct\_visible\_fields"]'));try{for(o.s();!(t=o.n()).done;)t.value.remove()}catch(e){o.e(e)}finally{o.f()}var n,a=\_createForOfIteratorHelper(l.querySelectorAll('input[value="cleantalk\_force\_ajax\_check"]'));try{for(a.s();!(n=a.n()).done;)n.value.remove()}catch(e){a.e(e)}finally{a.f()}var c,i=\_createForOfIteratorHelper(l.querySelectorAll('input[name="ct\_no\_cookie\_hidden\_field"]'));try{for(i.s();!(c=i.n()).done;)c.value.remove()}catch(e){i.e(e)}finally{i.f()}l.apbct\_external\_onsubmit\_prev instanceof Function&&(r=setTimeout(function(){l.apbct\_external\_onsubmit\_prev.call(l,s)},500),clearTimeout(r));var r=l.querySelector('input[type="submit"]');if(r)return void r.click()}void 0!==e.apbct&&+e.apbct.blocked&&ctParseBlockMessage(e)}})}function apbctVal(e){return e.options&&e.multiple?e.options.filter(function(e){return e.selected}).map(function(e){return e.value}):"checkbox"===e.type||"radio"===e.type?e.checked||null:e.value}function ctCheckInternal(t){var e,o={},n=t.elements;for(e in n)"submit"!==n[e].type&&void 0!==n[e].value&&""!==n[e].value&&(o[n[e].name]=t.elements[e].value);o.action="ct\_check\_internal",apbct\_public\_sendAJAX(o,{url:ctPublicFunctions.\_ajax\_url,callback:function(e){if(!0!==e.success)return alert(e.data),!1;t.origSubmit()}})}function ctCheckInternalIsExcludedForm(t){return["wp-login.php","wp-comments-post.php"].some(function(e){return null!==t.match(new RegExp(ctPublic.blog\_home+".\*"+e))})}document.addEventListener("click",function(e){!e.target||"cleantalk-modal-overlay"!==e.target.id&&"cleantalk-modal-close"!==e.target.id||cleantalkModal.close()}),document.addEventListener("cleantalkModalContentLoaded",function(e){cleantalkModal.opened&&cleantalkModal.loaded&&(document.getElementById("cleantalk-modal-content").innerHTML=cleantalkModal.loaded)}),apbctLocalStorage.set("apbct\_iframes\_protected",[]),window.onload=function(){+ctPublic.settings\_\_forms\_\_check\_external&&(setTimeout(function(){ctProtectExternal(),catchDynamicRenderedForm(),catchNextendSocialLoginForm(),ctProtectOutsideIframe()},2e3),ctProtectKlaviyoForm())},document.addEventListener("DOMContentLoaded",function(){var o="",n="";+ctPublic.settings\_\_forms\_\_check\_internal&&setTimeout(function(){for(var e,t=0;t<document.forms.length;t++)"string"==typeof document.forms[t].action&&(n=document.forms[t],null===(o=n.action).indexOf("https?://")||null===o.match(ctPublic.blog\_home+".\*?.php")||ctCheckInternalIsExcludedForm(o)||(e=n.cloneNode(!0),n.parentNode.replaceChild(e,n),e.origSubmit=n.submit,e.submit=null,e.addEventListener("submit",function(e){return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),ctCheckInternal(e.target),!1})))},500)}); |
* ## [cleantalk-spam-protect/trunk/js/cleantalk-admin.min.js](/changeset/3188546/cleantalk-spam-protect/trunk/js/cleantalk-admin.min.js "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/js/cleantalk-admin.min.js")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/js/cleantalk-admin.min.js?rev=3179819#L1 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/js/cleantalk-admin.min.js?rev=3188546#L1 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | function ctFillDecodedEmailHandler(){document.body.classList.add("apbct-popup-fade");var e,t,n,a,~~o=document.getElementById("apbct\_popup");o?(o.setAttribute("style","display: inherit"),document.getElementById("apbct\_popup\_text").innerHTML="Please wait while "+ctAdminCommon.plugin\_name+" is decoding the email addresses."):(o=null,o=document.querySelector("span.apbct-ee-blur\_email-text").innerHTML,(e=document.createElement("div")).setAttribute("class","apbct-popup apbct-email-encoder-popup"),e.setAttribute("id","apbct\_popup"),(t=document.createElement("span")).classList="apbct-email-encoder-elements\_center",(n=document.createElement("p")).innerText=ctAdminCommon.plugin\_name,t.append(n),(n=document.createElement("div")).setAttribute("id","apbct\_popup\_text"),n.setAttribute("class","apbct-email-encoder-elements\_center"),n.style.color="black",(a=document.createElement("p")).id="apbct\_email\_ecoder\_\_popup\_text\_node\_first",a.innerText="Decoding "+o+" to the original contact.",(o=document.createElement("p")).id="apbct\_email\_ecoder\_\_popup\_text\_node\_second",o.innerText="The magic is on the way, please wait for a few seconds!",n.append(a),n.append(o),e.append(t),e.append(n),e.append(apbctSetEmailDecoderPopupAnimation()),document.body.append(e)),apbctAjaxEmailDecodeBulk(ctAdminCommon.encodedEmailNode)}function apbctSetEmailDecoderPopupAnimation(){var t=["apbct\_dog\_one","apbct\_dog\_two","apbct\_dog\_three"],n=document.createElement("div");n.classList="apbct-ee-animation-wrapper";for(let e=0;e<t.length;e++){var a=document.createElement("span");a.classList="apbct\_dog "+t[e],a.innerText="@",n.append(a)}return n}function apbctAjaxEmailDecodeBulk(t){var e=t.dataset.originalString,e={encodedEmails:JSON.stringify({0:e})},n=document.createElement("div");n.setAttribute("class","apbct-tooltip"),t.append(n),apbct\_admin\_sendAJAX({action:"apbct\_decode\_email",encodedEmails:e.encodedEmails},{callback:function(e){apbctEmailEncoderCallbackBulk(e,t)},notJson:!0})}function apbctEmailEncoderCallbackBulk(c,l){c.success?setTimeout(function(){let e=Object.values(c.data)[0];var t,n,a=document.createElement("span");a.classList.add("copy-email-icon"),a.innerHTML="📋",a.style.cursor="pointer",a.title="Copy email to clipboard",a.addEventListener("click",function(){navigator.clipboard?navigator.clipboard.writeText(e).then(()=>{console.log("Email copied to clipboard!")}).catch(e=>{console.log("Failed to copy email: ",e)}):console.log("Clipboard API not supported")});let o=document.getElementById("apbct\_popup");null!==o&&(n=o.querySelector("#apbct\_email\_ecoder\_\_popup\_text\_node\_first"),t=o.querySelector("#apbct\_email\_ecoder\_\_popup\_text\_node\_second"),n.innerText="The original contact is "+e+".",n.append(a),t.innerText="Happy conversations!",o.querySelector(".apbct-ee-animation-wrapper").remove(),(n=document.createElement("span")).classList="apbct-email-encoder-elements\_center top-margin-long",(a=document.createElement("button")).innerText="Got it",a.addEventListener("click",function(){document.body.classList.remove("apbct-popup-fade"),o.setAttribute("style","display:none"),fillDecodedEmails(l,c)}),a.style.cursor="pointer",n.append(a),o.append(n))},3e3):console.log("result",c)}function ctPerformMagicBlur(e){var t=e.querySelector(".apbct-ee-static-blur"),e=e.querySelector(".apbct-ee-animate-blur");null!==t&&(t.style.display="none"),null!==e&&(e.style.display="inherit")}function fillDecodedEmails(e,t){t=Object.values(t.data)[0];e.setAttribute("title",""),e.removeAttribute("style"),ctFillDecodedEmail(e,t),ctPerformMagicBlur(e),e.removeEventListener("click",ctFillDecodedEmailHandler)}function ctFillDecodedEmail(e,t){jQuery(e).html(jQuery(e).html().replace(/.?<span class=["']apbct-ee-blur\_email-text["'].\*>(.+?)<\/span>/,t))}function apbct\_admin\_sendAJAX(t,n,a){let o=n.callback||null,c=n.callback\_context||null,l=n.callback\_params||null;var e=n.async||!0;let i=n.notJson||null;var r=n.timeout||15e3,a=a||null;let s=n.button||null,d=n.spinner||null,p=n.progressbar||null;"string"==typeof t?t=t+"&\_ajax\_nonce="+ctAdminCommon.\_ajax\_nonce+"&no\_cache="+Math.random():(t.\_ajax\_nonce=ctAdminCommon.\_ajax\_nonce,t.no\_cache=Math.random()),s&&(s.setAttribute("disabled","disabled"),s.style.cursor="not-allowed"),d&&jQuery(d).css("display","inline"),jQuery.ajax({type:"POST",url:ctAdminCommon.\_ajax\_url,data:t,async:e,success:function(e){s&&(s.removeAttribute("disabled"),s.style.cursor="pointer"),d&&jQuery(d).css("display","none"),(e=i?e:JSON.parse(e)).error?(setTimeout(function(){p&&p.fadeOut("slow")},1e3),"undefined"!=typeof cleantalkModal?(cleantalkModal.loaded="Error:<br>"+e.error.toString(),cleantalkModal.open()):alert("Error happens: "+(e.error||"Unkown"))):o&&(l?o.apply(c,l.concat(e,t,n,a)):o~~(e,t,n,a))},error:function(e,t,n){s&&(s.removeAttribute("disabled"),s.style.cursor="pointer"),d&&jQuery(d).css("display","none"),console.log("APBCT\_AJAX\_ERROR"),console.log(e),console.log(t),console.log(n)},timeout:r})}jQuery(document).ready(function(t){var e;jQuery(".apbct\_update\_notice").on("click","button",function(){var e=new Date((new Date).getTime()+2592e6),t="https:"===location.protocol?"; secure":"";document.cookie="apbct\_update\_banner\_closed=1; path=/; expires="+e.toUTCString()+"; samesite=lax"+t}),jQuery('li a[href="options-general.php?page=cleantalk"]').css("white-space","nowrap").css("display","inline-block"),jQuery("body").on("click",".apbct-notice .notice-dismiss-link",function(e){jQuery(e.target).parent().siblings(".apbct-notice .notice-dismiss").click()}),jQuery("body").on("click",".apbct-notice .notice-dismiss",function(e){var t=jQuery(e.target).parent().attr("id");t&&(apbct\_admin\_sendAJAX({action:"cleantalk\_dismiss\_notice",notice\_id:t},{callback:null,notJson:!0}),jQuery(e.target).parent(".notice").after('<div id="apbct-notice-dismiss-success" class="notice notice-success is-dismissible"><p>'+ctAdminCommon.apbctNoticeDismissSuccess+"</p></div>"),setTimeout(function(){jQuery("#apbct-notice-dismiss-success").fadeOut()},2e3))}),jQuery(".ct\_username .row-actions .delete a").on("click",function(e){e.preventDefault(),confirm(ctAdminCommon.notice\_when\_deleting\_user\_text)&&(window.location=this.href)}),t(".apbct-restore-spam-order-button").click(function(){var e=t(this).data("spam-order-id"),e={action:"apbct\_restore\_spam\_order",\_ajax\_nonce:ctAdminCommon.\_ajax\_nonce,order\_id:e};t.ajax({type:"POST",url:ctAdminCommon.\_ajax\_url,data:e,success:function(e){e.success?window.location.reload():alert(e.data.message)}})}),jQuery("#deactivate-cleantalk-spam-protect").on("click",function(e){e.preventDefault();var t,e=this.getAttribute("href");"undefined"!=typeof cleantalkModal&&"1"===ctAdminCommon.deactivation\_banner\_is\_needed?(t=` |
  |  | 1 | function ctFillDecodedEmailHandler(){document.body.classList.add("apbct-popup-fade");var e,t,n,a,c=document.getElementById("apbct\_popup");c?(c.setAttribute("style","display: inherit"),document.getElementById("apbct\_popup\_text").innerHTML="Please wait while "+ctAdminCommon.plugin\_name+" is decoding the email addresses."):(c=null,c=document.querySelector("span.apbct-ee-blur\_email-text").innerHTML,(e=document.createElement("div")).setAttribute("class","apbct-popup apbct-email-encoder-popup"),e.setAttribute("id","apbct\_popup"),(t=document.createElement("span")).setAttribute("class","apbct-email-encoder-elements\_center"),(n=document.createElement("p")).innerText=ctAdminCommon.plugin\_name,n.setAttribute("class","apbct-email-encoder--popup-header"),t.append(n),(n=document.createElement("div")).setAttribute("id","apbct\_popup\_text"),n.setAttribute("class","apbct-email-encoder-elements\_center"),n.style.color="black",(a=document.createElement("p")).id="apbct\_email\_ecoder\_\_popup\_text\_node\_first",a.innerText="Decoding "+c+" to the original contact.",a.setAttribute("class","apbct-email-encoder-elements\_center"),(c=document.createElement("p")).id="apbct\_email\_ecoder\_\_popup\_text\_node\_second",c.innerText="The magic is on the way, please wait for a few seconds!",c.setAttribute("class","apbct-email-encoder-elements\_center"),n.append(a),n.append(c),e.append(t),e.append(n),e.append(apbctSetEmailDecoderPopupAnimation()),document.body.append(e)),apbctAjaxEmailDecodeBulk(ctAdminCommon.encodedEmailNode)}function apbctSetEmailDecoderPopupAnimation(){var t=["apbct\_dog\_one","apbct\_dog\_two","apbct\_dog\_three"],n=document.createElement("div");n.classList="apbct-ee-animation-wrapper";for(let e=0;e<t.length;e++){var a=document.createElement("span");a.classList="apbct\_dog "+t[e],a.innerText="@",n.append(a)}return n}function apbctAjaxEmailDecodeBulk(t){var e=t.dataset.originalString;apbct\_admin\_sendAJAX({action:"apbct\_decode\_email",encodedEmails:{encodedEmails:JSON.stringify({0:e})}.encodedEmails},{callback:function(e){apbctEmailEncoderCallbackBulk(e,t)},notJson:!0})}function apbctEmailEncoderCallbackBulk(c,o){c.success?setTimeout(function(){var e,t,n=Object.values(c.data)[0];let a=document.getElementById("apbct\_popup");null!==a&&(e=a.querySelector("#apbct\_email\_ecoder\_\_popup\_text\_node\_first"),(t=document.createElement("b")).setAttribute("class","apbct-email-encoder-select-whole-email"),t.innerText=n,t.title="Click to select the whole email",e.innerHTML="The original contact is&nbsp;"+t.outerHTML+".",e.setAttribute("style","flex-direction: row;"),a.querySelector("#apbct\_email\_ecoder\_\_popup\_text\_node\_second").innerText="Happy conversations!",a.querySelector(".apbct-ee-animation-wrapper").remove(),(n=document.createElement("span")).classList="apbct-email-encoder-elements\_center top-margin-long",(t=document.createElement("button")).innerText="Got it",t.classList="apbct-email-encoder-got-it-button",t.addEventListener("click",function(){document.body.classList.remove("apbct-popup-fade"),a.setAttribute("style","display:none"),fillDecodedEmails(o,c)}),n.append(t),a.append(n))},3e3):console.log("result",c)}function ctPerformMagicBlur(e){var t=e.querySelector(".apbct-ee-static-blur"),e=e.querySelector(".apbct-ee-animate-blur");null!==t&&(t.style.display="none"),null!==e&&(e.style.display="inherit")}function fillDecodedEmails(e,t){t=Object.values(t.data)[0];e.setAttribute("title",""),e.removeAttribute("style"),ctFillDecodedEmail(e,t),ctPerformMagicBlur(e),e.removeEventListener("click",ctFillDecodedEmailHandler)}function ctFillDecodedEmail(e,t){jQuery(e).html(jQuery(e).html().replace(/.?<span class=["']apbct-ee-blur\_email-text["'].\*>(.+?)<\/span>/,t))}function apbct\_admin\_sendAJAX(t,n,a){let c=n.callback||null,o=n.callback\_context||null,l=n.callback\_params||null;var e=n.async||!0;let i=n.notJson||null;var r=n.timeout||15e3,a=a||null;let s=n.button||null,d=n.spinner||null,p=n.progressbar||null;"string"==typeof t?t=t+"&\_ajax\_nonce="+ctAdminCommon.\_ajax\_nonce+"&no\_cache="+Math.random():(t.\_ajax\_nonce=ctAdminCommon.\_ajax\_nonce,t.no\_cache=Math.random()),s&&(s.setAttribute("disabled","disabled"),s.style.cursor="not-allowed"),d&&jQuery(d).css("display","inline"),jQuery.ajax({type:"POST",url:ctAdminCommon.\_ajax\_url,data:t,async:e,success:function(e){s&&(s.removeAttribute("disabled"),s.style.cursor="pointer"),d&&jQuery(d).css("display","none"),(e=i?e:JSON.parse(e)).error?(setTimeout(function(){p&&p.fadeOut("slow")},1e3),"undefined"!=typeof cleantalkModal?(cleantalkModal.loaded="Error:<br>"+e.error.toString(),cleantalkModal.open()):alert("Error happens: "+(e.error||"Unkown"))):c&&(l?c.apply(o,l.concat(e,t,n,a)):c(e,t,n,a))},error:function(e,t,n){s&&(s.removeAttribute("disabled"),s.style.cursor="pointer"),d&&jQuery(d).css("display","none"),console.log("APBCT\_AJAX\_ERROR"),console.log(e),console.log(t),console.log(n)},timeout:r})}jQuery(document).ready(function(t){var e;jQuery(".apbct\_update\_notice").on("click","button",function(){var e=new Date((new Date).getTime()+2592e6),t="https:"===location.protocol?"; secure":"";document.cookie="apbct\_update\_banner\_closed=1; path=/; expires="+e.toUTCString()+"; samesite=lax"+t}),jQuery('li a[href="options-general.php?page=cleantalk"]').css("white-space","nowrap").css("display","inline-block"),jQuery("body").on("click",".apbct-notice .notice-dismiss-link",function(e){jQuery(e.target).parent().siblings(".apbct-notice .notice-dismiss").click()}),jQuery("body").on("click",".apbct-notice .notice-dismiss",function(e){var t=jQuery(e.target).parent().attr("id");t&&(apbct\_admin\_sendAJAX({action:"cleantalk\_dismiss\_notice",notice\_id:t},{callback:null,notJson:!0}),jQuery(e.target).parent(".notice").after('<div id="apbct-notice-dismiss-success" class="notice notice-success is-dismissible"><p>'+ctAdminCommon.apbctNoticeDismissSuccess+"</p></div>"),setTimeout(function(){jQuery("#apbct-notice-dismiss-success").fadeOut()},2e3))}),jQuery(".ct\_username .row-actions .delete a").on("click",function(e){e.preventDefault(),confirm(ctAdminCommon.notice\_when\_deleting\_user\_text)&&(window.location=this.href)}),t(".apbct-restore-spam-order-button").click(function(){var e=t(this).data("spam-order-id"),e={action:"apbct\_restore\_spam\_order",\_ajax\_nonce:ctAdminCommon.\_ajax\_nonce,order\_id:e};t.ajax({type:"POST",url:ctAdminCommon.\_ajax\_url,data:e,success:function(e){e.success?window.location.reload():alert(e.data.message)}})}),jQuery("#deactivate-cleantalk-spam-protect").on("click",function(e){e.preventDefault();var t,e=this.getAttribute("href");"undefined"!=typeof cleantalkModal&&"1"===ctAdminCommon.deactivation\_banner\_is\_needed?(t=` |
  | 2 | 2 | <div class="ct-modal-message"> |
  | 3 | 3 | ${bannertText=ctAdminCommon.deactivation\_banner\_text.replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="\_blank">$1</a>')} |
* ## [cleantalk-spam-protect/trunk/js/cleantalk-admin.min.js.map](/changeset/3188546/cleantalk-spam-protect/trunk/js/cleantalk-admin.min.js.map "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/js/cleantalk-admin.min.js.map")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/js/cleantalk-admin.min.js.map?rev=3179819#L1 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/js/cleantalk-admin.min.js.map?rev=3188546#L1 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | {"version":3,"file":"cleantalk-admin.min.js","sources":["cleantalk-admin.js"],"sourcesContent":["jQuery(document).ready(function($) {\n    // Auto update banner close handler\n    jQuery('.apbct\_update\_notice').on('click', 'button', function() {\n        let ctDate = new Date(new Date().getTime() + 1000 \* 86400 \* 30 );\n        let ctSecure = location.protocol === 'https:' ? '; secure' : '';\n        document.cookie = 'apbct\_update\_banner\_closed=1; path=/; expires=' +\n        ctDate.toUTCString() + '; samesite=lax' + ctSecure;\n    });\n\n    jQuery('li a[href=\"options-general.php?page=cleantalk\"]').css('white-space', 'nowrap')\n        .css('display', 'inline-block');\n\n    jQuery('body').on('click', '.apbct-notice .notice-dismiss-link', function(e) {\n        jQuery(e.target).parent().siblings('.apbct-notice .notice-dismiss').click();\n    });\n    jQuery('body').on('click', '.apbct-notice .notice-dismiss', function(e) {\n        let apbctNoticeName = jQuery(e.target).parent().attr('id');\n        if ( apbctNoticeName ) {\n            apbct\_admin\_sendAJAX(\n                {\n                    'action': 'cleantalk\_dismiss\_notice',\n                    'notice\_id': apbctNoticeName,\n                },\n                {\n                    'callback': null,\n                    'notJson': true,\n                },\n            );\n            jQuery(e.target)\n                .parent('.notice')\n                .after('<div id=\"apbct-notice-dismiss-success\" class=\"notice notice-success is-dismissible\"><p>' +\n                    ctAdminCommon.apbctNoticeDismissSuccess +\n                    '</p></div>');\n            setTimeout(function() {\n                jQuery('#apbct-notice-dismiss-success').fadeOut();\n            }, 2000);\n        }\n    });\n\n    // Notice when deleting user\n    jQuery('.ct\_username .row-actions .delete a').on('click', function(e) {\n        e.preventDefault();\n\n        let result = confirm(ctAdminCommon.notice\_when\_deleting\_user\_text);\n\n        if (result) {\n            window.location = this.href;\n        }\n    });\n\n    // Restore spam order\n    $('.apbct-restore-spam-order-button').click(function() {\n        const spmOrderId = $(this).data('spam-order-id');\n        let data = {\n            action: 'apbct\_restore\_spam\_order',\n            \_ajax\_nonce: ctAdminCommon.\_ajax\_nonce,\n            order\_id: spmOrderId,\n        };\n        $.ajax({\n            type: 'POST',\n            url: ctAdminCommon.\_ajax\_url,\n            data: data,\n            success: function(result) {\n                if (result.success) {\n                    window.location.reload();\n                } else {\n                    alert(result.data.message);\n                }\n            },\n        });\n    });\n\n    // Deactivation banner\n    jQuery('#deactivate-cleantalk-spam-protect').on('click', function(e) {\n        e.preventDefault();\n        let deactivationLink = this.getAttribute('href');\n        if ( typeof cleantalkModal !== 'undefined' && ctAdminCommon.deactivation\_banner\_is\_needed === '1') {\n            // force replace raw link to the href - fix for https://doboard.com/1/task/10192\n            bannertText = ctAdminCommon.deactivation\_banner\_text\n                .replace(/(https?:\\/\\/[^\\s]+)/g, '<a href=\"$1\" target=\"\_blank\">$1</a>');\n            const modalHTML = `\n                <div class=\"ct-modal-message\">\n                    ${bannertText}\n                </div>\n                <div class=\"ct-modal-buttons\">\n                    <button class=\"button action\" onclick=\"cleantalkModal.close();\">Ok</button>\n                    <a class=\"button action\" href=\"${deactivationLink}\">No, deactivate anyway</a>\n                </div>\n            `;\n            // look ahead ^ deactivationLink in the href was broken after modal handler URL converison\n            cleantalkModal.loaded = modalHTML;\n            // ignore URL conversions due modal handler\n            cleantalkModal.ignoreURLConvert = true;\n            cleantalkModal.open();\n        } else {\n            window.location.href = deactivationLink;\n        }\n    });\n\n    document.querySelectorAll('.apbct-real-user').forEach((el) => {\n        el.addEventListener('click', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.currentTarget.querySelector('.apbct-real-user-popup').style.display = 'block';\n        });\n    });\n    document.querySelector('body').addEventListener('click', function(e) {\n        document.querySelectorAll('.apbct-real-user-popup').forEach((el) => {\n            el.style.display = 'none';\n        });\n    });\n    if (window.location.pathname.includes('wp-admin/edit-comments.php')) {\n        const trashElements = document.querySelectorAll('.row-actions .trash');\n        if (trashElements.length) {\n            trashElements.forEach((el) => {\n                el.addEventListener('click', (c) => {\n                    const name = c.target.parentElement.parentElement.parentElement\n                        .querySelector('.apbct-admin-real-user-author-name');\n                    if (!name || !name.textContent) {\n                        return;\n                    }\n                    setTimeout(() => {\n                        const nameForUndo = document.querySelector('.untrash .trash-undo-inside');\n                        if (!nameForUndo) {\n                            return;\n                        }\n                        const nameUndo = nameForUndo.querySelector('strong');\n                        if (nameUndo) {\n                            nameUndo.textContent = name.textContent;\n                        }\n                    }, 10);\n                });\n            });\n        }\n    }\n\n    // Email decoder example\n    if (window.location.href.includes('options-general.php?page=cleantalk')) {\n        let encodedEmailNode = document.querySelector('[data-original-string]');\n        if (encodedEmailNode) {\n            ctAdminCommon.encodedEmailNode = encodedEmailNode;\n            encodedEmailNode.style.cursor = 'pointer';\n            encodedEmailNode.addEventListener('click', ctFillDecodedEmailHandler);\n        }\n    }\n});\n\n/\*\*\n \* @param {mixed} event\n \*/\nfunction ctFillDecodedEmailHandler() {\n    document.body.classList.add('apbct-popup-fade');\n    let encoderPopup = document.getElementById('apbct\_popup');\n\n    if (!encoderPopup) {\n        // get obfuscated email\n        let obfuscatedEmail = null;\n        obfuscatedEmail = document.querySelector('span.apbct-ee-blur\_email-text').innerHTML;\n\n        // construct popup\n        let waitingPopup = document.createElement('div');\n        waitingPopup.setAttribute('class', 'apbct-popup apbct-email-encoder-popup');\n        waitingPopup.setAttribute('id', 'apbct\_popup');\n\n        // construct text header\n        let popupHeaderWrapper = document.createElement('span');\n        popupHeaderWrapper.~~classList = 'apbct-email-encoder-elements\_center';\n        let popupHeader = document.createElement('p');\n        popupHeader.innerText = ctAdminCommon.plugin\_name;\n        popupHeaderWrapper.append(popupHeader);\n\n        // construct text wrapper\n        let popupTextWrapper = document.createElement('div');\n        popupTextWrapper.setAttribute('id', 'apbct\_popup\_text');\n        popupTextWrapper.setAttribute('class', 'apbct-email-encoder-elements\_center');\n        popupTextWrapper.style.color = 'black';\n\n        // construct text first node\n        // todo make translateable\n        let popupTextDecoding = document.createElement('p');\n        popupTextDecoding.id = 'apbct\_email\_ecoder\_\_popup\_text\_node\_first';\n        popupTextDecoding.innerText = 'Decoding ' + obfuscatedEmail + ' to the original contact.';\n\n        // construct text first node\n        // todo make translateable\n        let popupTextWaiting = document.createElement('p');\n        popupTextWaiting.id = 'apbct\_email\_ecoder\_\_popup\_text\_node\_second';\n        popupTextWaiting.innerText = 'The magic is on the way, please wait for a few seconds!';\n\n        // appendings\n        popupTextWrapper.append(popupTextDecoding);\n        popupTextWrapper.append(popupTextWaiting);\n        waitingPopup.append(popupHeaderWrapper);\n        waitingPopup.append(popupTextWrapper);\n        waitingPopup.append(apbctSetEmailDecoderPopupAnimation());\n        document.body.append(waitingPopup);\n    } else {\n        encoderPopup.setAttribute('style', 'display: inherit');\n        document.getElementById('apbct\_popup\_text').innerHTML =\n            'Please wait while ' + ctAdminCommon.plugin\_name + ' is decoding the email addresses.';\n    }\n\n    apbctAjaxEmailDecodeBulk(ctAdminCommon.encodedEmailNode);\n}\n/\*\*\n \* @return {HTMLElement} event\n \*/\nfunction apbctSetEmailDecoderPopupAnimation() {\n    const animationElements = ['apbct\_dog\_one', 'apbct\_dog\_two', 'apbct\_dog\_three'];\n    const animationWrapper = document.createElement('div');\n    animationWrapper.classList = 'apbct-ee-animation-wrapper';\n    for (let i = 0; i < animationElements.length; i++) {\n        const apbctEEAnimationDogOne = document.createElement('span');\n        apbctEEAnimationDogOne.classList = 'apbct\_dog ' + animationElements[i];\n        apbctEEAnimationDogOne.innerText = '@';\n        animationWrapper.append(apbctEEAnimationDogOne);\n    }\n    return animationWrapper;\n}\n\n/\*\*\n \* @param {HTMLElement} encodedEmailNode\n \*/\nfunction apbctAjaxEmailDecodeBulk(encodedEmailNode) {\n    const encodedEmail = encodedEmailNode.dataset.originalString;\n    let data = {\n        encodedEmails: JSON.stringify({0: encodedEmail}),\n    };\n\n    // Adding a tooltip\n    let apbctTooltip = document.createElement('div');\n    apbctTooltip.setAttribute('class', 'apbct-tooltip');\n    encodedEmailNode.append(apbctTooltip);\n\n    apbct\_admin\_sendAJAX(\n        {\n            'action': 'apbct\_decode\_email',\n            'encodedEmails': data.encodedEmails,\n        },\n        {\n            'callback': function(result) {\n                apbctEmailEncoderCallbackBulk(result, encodedEmailNode);\n            },\n            'notJson': true,\n        },\n    );\n}\n\n/\*\*\n \* @param {mixed} result\n \* @param {mixed} encodedEmailNode\n \*/\nfunction apbctEmailEncoderCallbackBulk(result, encodedEmailNode) {\n    if (result.success) {\n        // start process of visual decoding\n        setTimeout(function() {\n            let email = Object.values(result.data)[0];\n\n            // copy icon\n            const copyIcon = document.createElement('span');\n            copyIcon.classList.add('copy-email-icon');\n            copyIcon.innerHTML = '📋'; // You can replace this with an actual icon if needed\n            copyIcon.style.cursor = 'pointer';\n            copyIcon.title = 'Copy email to clipboard';\n\n            copyIcon.addEventListener('click', function() {\n                if (navigator.clipboard) {\n                    navigator.clipboard.writeText(email).then(() => {\n                        console.log('Email copied to clipboard!');\n                    }).catch((err) => {\n                        console.log('Failed to copy email: ', err);\n                    });\n                } else {\n                    console.log('Clipboard API not supported');\n                }\n            });\n\n            // change text\n            let popup = document.getElementById('apbct\_popup');\n            if (popup !== null) {\n                let firstNode = popup.querySelector('#apbct\_email\_ecoder\_\_popup\_text\_node\_first');\n                let secondNode = popup.querySelector('#apbct\_email\_ecoder\_\_popup\_text\_node\_second');\n                firstNode.innerText = 'The original contact is ' + email + '.';\n                firstNode.append(copyIcon);\n                secondNode.innerText = 'Happy conversations!';\n                // remove antimation\n                popup.querySelector('.apbct-ee-animation-wrapper').remove();\n                // add button\n                let buttonWrapper = document.createElement('span');\n                buttonWrapper.classList = 'apbct-email-encoder-elements\_center top-margin-long';\n                let button = document.createElement('button');\n                button.innerText = 'Got it';\n                button.addEventListener('click', function() {\n                    document.body.classList.remove('apbct-popup-fade');\n                    popup.setAttribute('style', 'display:none');\n                    fillDecodedEmails(encodedEmailNode, result);\n                });\n                button.style.cursor = 'pointer';\n                buttonWrapper.append(button);\n                popup.append(buttonWrapper);\n            }\n        }, 3000);\n    } else {\n        console.log('result', result);\n    }\n}\n\n/\*\*\n \* @param {HTMLElement} targetElement\n \*/\nfunction ctPerformMagicBlur(targetElement) {\n    const staticBlur = targetElement.querySelector('.apbct-ee-static-blur');\n    const animateBlur = targetElement.querySelector('.apbct-ee-animate-blur');\n    if (staticBlur !== null) {\n        staticBlur.style.display = 'none';\n    }\n    if (animateBlur !== null) {\n        animateBlur.style.display = 'inherit';\n    }\n}\n\n/\*\*\n \* Run filling for every node with decoding result.\n \* @param {mixed} encodedEmailNode\n \* @param {mixed} decodingResult\n \*/\nfunction fillDecodedEmails(encodedEmailNode, decodingResult) {\n    let currentResultData = Object.values(decodingResult.data)[0];\n\n    encodedEmailNode.setAttribute('title', '');\n    encodedEmailNode.removeAttribute('style');\n    ctFillDecodedEmail(encodedEmailNode, currentResultData);\n\n    ctPerformMagicBlur(encodedEmailNode);\n    encodedEmailNode.removeEventListener('click', ctFillDecodedEmailHandler);\n}\n\n/\*\*\n \* @param {mixed} target\n \* @param {string} email\n \*/\nfunction ctFillDecodedEmail(target, email) {\n    jQuery(target).html(\n        jQuery(target)\n            .html()\n            .replace(/.?<span class=[\"']apbct-ee-blur\_email-text[\"'].\*>(.+?)<\\/span>/, email),\n    );\n}\n\n// eslint-disable-next-line camelcase,require-jsdoc,no-unused-vars\nfunction apbct\_admin\_sendAJAX(data, params, obj) {\n    // Default params\n    let callback = params.callback || null;\n    let callbackContext = params.callback\_context || null;\n    let callbackParams = params.callback\_params || null;\n    let async = params.async || true;\n    let notJson = params.notJson || null;\n    let timeout = params.timeout || 15000;\n    var obj = obj || null; // eslint-disable-line no-var\n    let button = params.button || null;\n    let spinner = params.spinner || null;\n    let progressbar = params.progressbar || null;\n\n    if (typeof (data) === 'string') {\n        data = data + '&\_ajax\_nonce=' + ctAdminCommon.\_ajax\_nonce + '&no\_cache=' + Math.random();\n    } else {\n        data.\_ajax\_nonce = ctAdminCommon.\_ajax\_nonce;\n        data.no\_cache = Math.random();\n    }\n    // Button and spinner\n    if (button) {\n        button.setAttribute('disabled', 'disabled'); button.style.cursor = 'not-allowed';\n    }\n    if (spinner) jQuery(spinner).css('display', 'inline');\n\n    jQuery.ajax({\n        type: 'POST',\n        url: ctAdminCommon.\_ajax\_url,\n        data: data,\n        async: async,\n        success: function(result) {\n            if (button) {\n                button.removeAttribute('disabled'); button.style.cursor = 'pointer';\n            }\n            if (spinner) jQuery(spinner).css('display', 'none');\n            if (!notJson) result = JSON.parse(result);\n            if (result.error) {\n                setTimeout(function() {\n                    if (progressbar) progressbar.fadeOut('slow');\n                }, 1000);\n                if ( typeof cleantalkModal !== 'undefined' ) {\n                    // Show the result by modal\n                    cleantalkModal.loaded = 'Error:<br>' + result.error.toString();\n                    cleantalkModal.open();\n                } else {\n                    alert('Error happens: ' + (result.error || 'Unkown'));\n                }\n            } else {\n                if (callback) {\n                    if (callbackParams) {\n                        callback.apply( callbackContext, callbackParams.concat( result, data, params, obj ) );\n                    } else {\n                        callback(result, data, params, obj);\n                    }\n                }\n            }\n        },\n        error: function(jqXHR, textStatus, errorThrown) {\n            if (button) {\n                button.removeAttribute('disabled'); button.style.cursor = 'pointer';\n            }\n            if (spinner) jQuery(spinner).css('display', 'none');\n            console.log('APBCT\_AJAX\_ERROR');\n            console.log(jqXHR);\n            console.log(textStatus);\n            console.log(errorThrown);\n        },\n        timeout: timeout,\n    });\n}\n"],"names":["ctFillDecodedEmailHandler","document","body","classList","add","let","waitingPopup","popupHeaderWrapper","popupTextWrapper","popupTextDecoding","encoderPopup","getElementById","setAttribute","innerHTML","ctAdminCommon","plugin\_name","obfuscatedEmail","querySelector","createElement","popupHeader","innerText","append","style","color","id","popupTextWaiting","apbctSetEmailDecoderPopupAnimation","apbctAjaxEmailDecodeBulk","encodedEmailNode","animationElements","animationWrapper","i","length","apbctEEAnimationDogOne","encodedEmail","dataset","originalString","data","encodedEmails","JSON","stringify","0","apbctTooltip","apbct\_admin\_sendAJAX","action","callback","result","apbctEmailEncoderCallbackBulk","notJson","success","setTimeout","email","Object","values","secondNode","buttonWrapper","copyIcon","cursor","title","addEventListener","navigator","clipboard","writeText","then","console","log","catch","err","popup","firstNode","remove","button","fillDecodedEmails","ctPerformMagicBlur","targetElement","staticBlur","animateBlur","display","decodingResult","currentResultData","removeAttribute","ctFillDecodedEmail","removeEventListener","target","jQuery","html","replace","params","obj","callbackContext","callback\_context","callbackParams","callback\_params","async","timeout","spinner","progressbar","\_ajax\_nonce","Math","random","no\_cache","css","ajax","type","url","\_ajax\_url","parse","error","fadeOut","cleantalkModal","loaded","toString","open","alert","apply","concat","jqXHR","textStatus","errorThrown","ready","$","on","ctDate","Date","getTime","ctSecure","location","protocol","cookie","toUTCString","e","parent","siblings","click","apbctNoticeName","attr","notice\_id","after","apbctNoticeDismissSuccess","preventDefault","confirm","notice\_when\_deleting\_user\_text","window","this","href","spmOrderId","order\_id","reload","message","modalHTML","deactivationLink","getAttribute","deactivation\_banner\_is\_needed","bannertText","deactivation\_banner\_text","ignoreURLConvert","querySelectorAll","forEach","el","stopPropagation","currentTarget","pathname","includes","trashElements","name","c","parentElement","textContent","nameForUndo","nameUndo"],"mappings":"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~~D,yBAAyB,EAGhF,CAAC"} |
  |  | 1 | {"version":3,"file":"cleantalk-admin.min.js","sources":["cleantalk-admin.js"],"sourcesContent":["jQuery(document).ready(function($) {\n    // Auto update banner close handler\n    jQuery('.apbct\_update\_notice').on('click', 'button', function() {\n        let ctDate = new Date(new Date().getTime() + 1000 \* 86400 \* 30 );\n        let ctSecure = location.protocol === 'https:' ? '; secure' : '';\n        document.cookie = 'apbct\_update\_banner\_closed=1; path=/; expires=' +\n        ctDate.toUTCString() + '; samesite=lax' + ctSecure;\n    });\n\n    jQuery('li a[href=\"options-general.php?page=cleantalk\"]').css('white-space', 'nowrap')\n        .css('display', 'inline-block');\n\n    jQuery('body').on('click', '.apbct-notice .notice-dismiss-link', function(e) {\n        jQuery(e.target).parent().siblings('.apbct-notice .notice-dismiss').click();\n    });\n    jQuery('body').on('click', '.apbct-notice .notice-dismiss', function(e) {\n        let apbctNoticeName = jQuery(e.target).parent().attr('id');\n        if ( apbctNoticeName ) {\n            apbct\_admin\_sendAJAX(\n                {\n                    'action': 'cleantalk\_dismiss\_notice',\n                    'notice\_id': apbctNoticeName,\n                },\n                {\n                    'callback': null,\n                    'notJson': true,\n                },\n            );\n            jQuery(e.target)\n                .parent('.notice')\n                .after('<div id=\"apbct-notice-dismiss-success\" class=\"notice notice-success is-dismissible\"><p>' +\n                    ctAdminCommon.apbctNoticeDismissSuccess +\n                    '</p></div>');\n            setTimeout(function() {\n                jQuery('#apbct-notice-dismiss-success').fadeOut();\n            }, 2000);\n        }\n    });\n\n    // Notice when deleting user\n    jQuery('.ct\_username .row-actions .delete a').on('click', function(e) {\n        e.preventDefault();\n\n        let result = confirm(ctAdminCommon.notice\_when\_deleting\_user\_text);\n\n        if (result) {\n            window.location = this.href;\n        }\n    });\n\n    // Restore spam order\n    $('.apbct-restore-spam-order-button').click(function() {\n        const spmOrderId = $(this).data('spam-order-id');\n        let data = {\n            action: 'apbct\_restore\_spam\_order',\n            \_ajax\_nonce: ctAdminCommon.\_ajax\_nonce,\n            order\_id: spmOrderId,\n        };\n        $.ajax({\n            type: 'POST',\n            url: ctAdminCommon.\_ajax\_url,\n            data: data,\n            success: function(result) {\n                if (result.success) {\n                    window.location.reload();\n                } else {\n                    alert(result.data.message);\n                }\n            },\n        });\n    });\n\n    // Deactivation banner\n    jQuery('#deactivate-cleantalk-spam-protect').on('click', function(e) {\n        e.preventDefault();\n        let deactivationLink = this.getAttribute('href');\n        if ( typeof cleantalkModal !== 'undefined' && ctAdminCommon.deactivation\_banner\_is\_needed === '1') {\n            // force replace raw link to the href - fix for https://doboard.com/1/task/10192\n            bannertText = ctAdminCommon.deactivation\_banner\_text\n                .replace(/(https?:\\/\\/[^\\s]+)/g, '<a href=\"$1\" target=\"\_blank\">$1</a>');\n            const modalHTML = `\n                <div class=\"ct-modal-message\">\n                    ${bannertText}\n                </div>\n                <div class=\"ct-modal-buttons\">\n                    <button class=\"button action\" onclick=\"cleantalkModal.close();\">Ok</button>\n                    <a class=\"button action\" href=\"${deactivationLink}\">No, deactivate anyway</a>\n                </div>\n            `;\n            // look ahead ^ deactivationLink in the href was broken after modal handler URL converison\n            cleantalkModal.loaded = modalHTML;\n            // ignore URL conversions due modal handler\n            cleantalkModal.ignoreURLConvert = true;\n            cleantalkModal.open();\n        } else {\n            window.location.href = deactivationLink;\n        }\n    });\n\n    document.querySelectorAll('.apbct-real-user').forEach((el) => {\n        el.addEventListener('click', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.currentTarget.querySelector('.apbct-real-user-popup').style.display = 'block';\n        });\n    });\n    document.querySelector('body').addEventListener('click', function(e) {\n        document.querySelectorAll('.apbct-real-user-popup').forEach((el) => {\n            el.style.display = 'none';\n        });\n    });\n    if (window.location.pathname.includes('wp-admin/edit-comments.php')) {\n        const trashElements = document.querySelectorAll('.row-actions .trash');\n        if (trashElements.length) {\n            trashElements.forEach((el) => {\n                el.addEventListener('click', (c) => {\n                    const name = c.target.parentElement.parentElement.parentElement\n                        .querySelector('.apbct-admin-real-user-author-name');\n                    if (!name || !name.textContent) {\n                        return;\n                    }\n                    setTimeout(() => {\n                        const nameForUndo = document.querySelector('.untrash .trash-undo-inside');\n                        if (!nameForUndo) {\n                            return;\n                        }\n                        const nameUndo = nameForUndo.querySelector('strong');\n                        if (nameUndo) {\n                            nameUndo.textContent = name.textContent;\n                        }\n                    }, 10);\n                });\n            });\n        }\n    }\n\n    // Email decoder example\n    if (window.location.href.includes('options-general.php?page=cleantalk')) {\n        let encodedEmailNode = document.querySelector('[data-original-string]');\n        if (encodedEmailNode) {\n            ctAdminCommon.encodedEmailNode = encodedEmailNode;\n            encodedEmailNode.style.cursor = 'pointer';\n            encodedEmailNode.addEventListener('click', ctFillDecodedEmailHandler);\n        }\n    }\n});\n\n/\*\*\n \* @param {mixed} event\n \*/\nfunction ctFillDecodedEmailHandler() {\n    document.body.classList.add('apbct-popup-fade');\n    let encoderPopup = document.getElementById('apbct\_popup');\n\n    if (!encoderPopup) {\n        // get obfuscated email\n        let obfuscatedEmail = null;\n        obfuscatedEmail = document.querySelector('span.apbct-ee-blur\_email-text').innerHTML;\n\n        // construct popup\n        let waitingPopup = document.createElement('div');\n        waitingPopup.setAttribute('class', 'apbct-popup apbct-email-encoder-popup');\n        waitingPopup.setAttribute('id', 'apbct\_popup');\n\n        // construct text header\n        let popupHeaderWrapper = document.createElement('span');\n        popupHeaderWrapper.setAttribute('class', 'apbct-email-encoder-elements\_center');\n        let popupHeader = document.createElement('p');\n        popupHeader.innerText = ctAdminCommon.plugin\_name;\n        popupHeader.setAttribute('class', 'apbct-email-encoder--popup-header');\n        popupHeaderWrapper.append(popupHeader);\n\n        // construct text wrapper\n        let popupTextWrapper = document.createElement('div');\n        popupTextWrapper.setAttribute('id', 'apbct\_popup\_text');\n        popupTextWrapper.setAttribute('class', 'apbct-email-encoder-elements\_center');\n        popupTextWrapper.style.color = 'black';\n\n        // construct text first node\n        // todo make translateable\n        let popupTextDecoding = document.createElement('p');\n        popupTextDecoding.id = 'apbct\_email\_ecoder\_\_popup\_text\_node\_first';\n        popupTextDecoding.innerText = 'Decoding ' + obfuscatedEmail + ' to the original contact.';\n        popupTextDecoding.setAttribute('class', 'apbct-email-encoder-elements\_center');\n\n\n        // construct text first node\n        // todo make translateable\n        let popupTextWaiting = document.createElement('p');\n        popupTextWaiting.id = 'apbct\_email\_ecoder\_\_popup\_text\_node\_second';\n        popupTextWaiting.innerText = 'The magic is on the way, please wait for a few seconds!';\n        popupTextWaiting.setAttribute('class', 'apbct-email-encoder-elements\_center');\n\n\n        // appendings\n        popupTextWrapper.append(popupTextDecoding);\n        popupTextWrapper.append(popupTextWaiting);\n        waitingPopup.append(popupHeaderWrapper);\n        waitingPopup.append(popupTextWrapper);\n        waitingPopup.append(apbctSetEmailDecoderPopupAnimation());\n        document.body.append(waitingPopup);\n    } else {\n        encoderPopup.setAttribute('style', 'display: inherit');\n        document.getElementById('apbct\_popup\_text').innerHTML =\n            'Please wait while ' + ctAdminCommon.plugin\_name + ' is decoding the email addresses.';\n    }\n\n    apbctAjaxEmailDecodeBulk(ctAdminCommon.encodedEmailNode);\n}\n/\*\*\n \* @return {HTMLElement} event\n \*/\nfunction apbctSetEmailDecoderPopupAnimation() {\n    const animationElements = ['apbct\_dog\_one', 'apbct\_dog\_two', 'apbct\_dog\_three'];\n    const animationWrapper = document.createElement('div');\n    animationWrapper.classList = 'apbct-ee-animation-wrapper';\n    for (let i = 0; i < animationElements.length; i++) {\n        const apbctEEAnimationDogOne = document.createElement('span');\n        apbctEEAnimationDogOne.classList = 'apbct\_dog ' + animationElements[i];\n        apbctEEAnimationDogOne.innerText = '@';\n        animationWrapper.append(apbctEEAnimationDogOne);\n    }\n    return animationWrapper;\n}\n\n/\*\*\n \* @param {HTMLElement} encodedEmailNode\n \*/\nfunction apbctAjaxEmailDecodeBulk(encodedEmailNode) {\n    const encodedEmail = encodedEmailNode.dataset.originalString;\n    let data = {\n        encodedEmails: JSON.stringify({0: encodedEmail}),\n    };\n\n    apbct\_admin\_sendAJAX(\n        {\n            'action': 'apbct\_decode\_email',\n            'encodedEmails': data.encodedEmails,\n        },\n        {\n            'callback': function(result) {\n                apbctEmailEncoderCallbackBulk(result, encodedEmailNode);\n            },\n            'notJson': true,\n        },\n    );\n}\n\n/\*\*\n \* @param {mixed} result\n \* @param {mixed} encodedEmailNode\n \*/\nfunction apbctEmailEncoderCallbackBulk(result, encodedEmailNode) {\n    if (result.success) {\n        // start process of visual decoding\n        setTimeout(function() {\n            let email = Object.values(result.data)[0];\n\n            // change text\n            let popup = document.getElementById('apbct\_popup');\n            if (popup !== null) {\n                // handle first node\n                let firstNode = popup.querySelector('#apbct\_email\_ecoder\_\_popup\_text\_node\_first');\n                // get email selectable by click\n                let selectableEmail = document.createElement('b');\n                selectableEmail.setAttribute('class', 'apbct-email-encoder-select-whole-email');\n                selectableEmail.innerText = email;\n                selectableEmail.title = 'Click to select the whole email';\n                // add email to the first node\n                firstNode.innerHTML = 'The original contact is&nbsp;' + selectableEmail.outerHTML + '.';\n                firstNode.setAttribute('style', 'flex-direction: row;');\n                // handle second node\n                let secondNode = popup.querySelector('#apbct\_email\_ecoder\_\_popup\_text\_node\_second');\n                secondNode.innerText = 'Happy conversations!';\n                // remove antimation\n                popup.querySelector('.apbct-ee-animation-wrapper').remove();\n                // add button\n                let buttonWrapper = document.createElement('span');\n                buttonWrapper.classList = 'apbct-email-encoder-elements\_center top-margin-long';\n                let button = document.createElement('button');\n                button.innerText = 'Got it';\n                button.classList = 'apbct-email-encoder-got-it-button';\n                button.addEventListener('click', function() {\n                    document.body.classList.remove('apbct-popup-fade');\n                    popup.setAttribute('style', 'display:none');\n                    fillDecodedEmails(encodedEmailNode, result);\n                });\n                buttonWrapper.append(button);\n                popup.append(buttonWrapper);\n            }\n        }, 3000);\n    } else {\n        console.log('result', result);\n    }\n}\n\n/\*\*\n \* @param {HTMLElement} targetElement\n \*/\nfunction ctPerformMagicBlur(targetElement) {\n    const staticBlur = targetElement.querySelector('.apbct-ee-static-blur');\n    const animateBlur = targetElement.querySelector('.apbct-ee-animate-blur');\n    if (staticBlur !== null) {\n        staticBlur.style.display = 'none';\n    }\n    if (animateBlur !== null) {\n        animateBlur.style.display = 'inherit';\n    }\n}\n\n/\*\*\n \* Run filling for every node with decoding result.\n \* @param {mixed} encodedEmailNode\n \* @param {mixed} decodingResult\n \*/\nfunction fillDecodedEmails(encodedEmailNode, decodingResult) {\n    let currentResultData = Object.values(decodingResult.data)[0];\n\n    encodedEmailNode.setAttribute('title', '');\n    encodedEmailNode.removeAttribute('style');\n    ctFillDecodedEmail(encodedEmailNode, currentResultData);\n\n    ctPerformMagicBlur(encodedEmailNode);\n    encodedEmailNode.removeEventListener('click', ctFillDecodedEmailHandler);\n}\n\n/\*\*\n \* @param {mixed} target\n \* @param {string} email\n \*/\nfunction ctFillDecodedEmail(target, email) {\n    jQuery(target).html(\n        jQuery(target)\n            .html()\n            .replace(/.?<span class=[\"']apbct-ee-blur\_email-text[\"'].\*>(.+?)<\\/span>/, email),\n    );\n}\n\n// eslint-disable-next-line camelcase,require-jsdoc,no-unused-vars\nfunction apbct\_admin\_sendAJAX(data, params, obj) {\n    // Default params\n    let callback = params.callback || null;\n    let callbackContext = params.callback\_context || null;\n    let callbackParams = params.callback\_params || null;\n    let async = params.async || true;\n    let notJson = params.notJson || null;\n    let timeout = params.timeout || 15000;\n    var obj = obj || null; // eslint-disable-line no-var\n    let button = params.button || null;\n    let spinner = params.spinner || null;\n    let progressbar = params.progressbar || null;\n\n    if (typeof (data) === 'string') {\n        data = data + '&\_ajax\_nonce=' + ctAdminCommon.\_ajax\_nonce + '&no\_cache=' + Math.random();\n    } else {\n        data.\_ajax\_nonce = ctAdminCommon.\_ajax\_nonce;\n        data.no\_cache = Math.random();\n    }\n    // Button and spinner\n    if (button) {\n        button.setAttribute('disabled', 'disabled'); button.style.cursor = 'not-allowed';\n    }\n    if (spinner) jQuery(spinner).css('display', 'inline');\n\n    jQuery.ajax({\n        type: 'POST',\n        url: ctAdminCommon.\_ajax\_url,\n        data: data,\n        async: async,\n        success: function(result) {\n            if (button) {\n                button.removeAttribute('disabled'); button.style.cursor = 'pointer';\n            }\n            if (spinner) jQuery(spinner).css('display', 'none');\n            if (!notJson) result = JSON.parse(result);\n            if (result.error) {\n                setTimeout(function() {\n                    if (progressbar) progressbar.fadeOut('slow');\n                }, 1000);\n                if ( typeof cleantalkModal !== 'undefined' ) {\n                    // Show the result by modal\n                    cleantalkModal.loaded = 'Error:<br>' + result.error.toString();\n                    cleantalkModal.open();\n                } else {\n                    alert('Error happens: ' + (result.error || 'Unkown'));\n                }\n            } else {\n                if (callback) {\n                    if (callbackParams) {\n                        callback.apply( callbackContext, callbackParams.concat( result, data, params, obj ) );\n                    } else {\n                        callback(result, data, params, obj);\n                    }\n                }\n            }\n        },\n        error: function(jqXHR, textStatus, errorThrown) {\n            if (button) {\n                button.removeAttribute('disabled'); button.style.cursor = 'pointer';\n            }\n            if (spinner) jQuery(spinner).css('display', 'none');\n            console.log('APBCT\_AJAX\_ERROR');\n            console.log(jqXHR);\n            console.log(textStatus);\n            console.log(errorThrown);\n        },\n        timeout: timeout,\n    });\n}\n"],"names":["ctFillDecodedEmailHandler","document","body","classList","add","let","waitingPopup","popupHeaderWrapper","popupTextWrapper","popupTextDecoding","encoderPopup","getElementById","setAttribute","innerHTML","ctAdminCommon","plugin\_name","obfuscatedEmail","querySelector","createElement","popupHeader","innerText","append","style","color","id","popupTextWaiting","apbctSetEmailDecoderPopupAnimation","apbctAjaxEmailDecodeBulk","encodedEmailNode","animationElements","animationWrapper","i","length","apbctEEAnimationDogOne","encodedEmail","dataset","originalString","apbct\_admin\_sendAJAX","action","encodedEmails","JSON","stringify","0","callback","result","apbctEmailEncoderCallbackBulk","notJson","success","setTimeout","firstNode","button","email","Object","values","data","popup","selectableEmail","title","outerHTML","remove","buttonWrapper","addEventListener","fillDecodedEmails","console","log","ctPerformMagicBlur","targetElement","staticBlur","animateBlur","display","decodingResult","currentResultData","removeAttribute","ctFillDecodedEmail","removeEventListener","target","jQuery","html","replace","params","obj","callbackContext","callback\_context","callbackParams","callback\_params","async","timeout","spinner","progressbar","\_ajax\_nonce","Math","random","no\_cache","cursor","css","ajax","type","url","\_ajax\_url","parse","error","fadeOut","cleantalkModal","loaded","toString","open","alert","apply","concat","jqXHR","textStatus","errorThrown","ready","$","on","ctDate","Date","getTime","ctSecure","location","protocol","cookie","toUTCString","e","parent","siblings","click","apbctNoticeName","attr","notice\_id","after","apbctNoticeDismissSuccess","preventDefault","confirm","notice\_when\_deleting\_user\_text","window","this","href","spmOrderId","order\_id","reload","message","modalHTML","deactivationLink","getAttribute","deactivation\_banner\_is\_needed","bannertText","deactivation\_banner\_text","ignoreURLConvert","querySelectorAll","forEach","el","stopPropagation","currentTarget","pathname","includes","trashElements","name","c","parentElement","textContent","nameForUndo","nameUndo"],"mappings":"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"} |
* ## [cleantalk-spam-protect/trunk/js/cleantalk-dashboard-widget.min.js](/changeset/3188546/cleantalk-spam-protect/trunk/js/cleantalk-dashboard-widget.min.js "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/js/cleantalk-dashboard-widget.min.js")

  | [r3161895](/browser/cleantalk-spam-protect/trunk/js/cleantalk-dashboard-widget.min.js?rev=3161895#L1 "Show revision 3161895 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/js/cleantalk-dashboard-widget.min.js?rev=3188546#L1 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | jQuery(document).ready(function(){jQuery(".ct\_widget\_refresh\_link").on("click",function(){jQuery(".ct\_preloader").show(),setTimeout(function(){window.scrollTo(0,jQuery("#ct\_widget\_wrapper").offset().top-130)},1),setTimeout(function(){jQuery("#ct\_refresh\_form").submit()},2500)}),"#ct\_widget"==location.hash&&setTimeout(function(){window.scrollTo(0,jQuery("#ct\_widget\_wrapper").offset().top-130)},1),jQuery("#ct\_widget\_wrapper").parent().css("padding",0),locale=navigator.language||navigator.userLanguage;var o=new Intl.DateTimeFormat(locale,{month:"short",day:"numeric"});var e=document.getElementById("ct\_widget\_chart"),t=~~(t=>{var a={labels:[],counts:[]};for(let e=0;e<t.length;e++)a.labels.push(o.format(new Date(t[e][0]))),a.counts.push(t[e][1]);return a})~~(apbctDashboardWidget.data);new Chart(e,{type:"bar",data:{labels:t.labels,datasets:[{label:"Requests blocked",data:t.counts,borderWidth:1,backgroundColor:"steelblue"}]},options:{legend:{display:!1},maintainAspectRatio:!1,responsive:!0,scales:{y:{beginAtZero:!0}},title:{display:!0,text:"Requests were blocked by Anti-Spam and SpamFireWall",fontSize:18},plugins:{legend:{display:!1},title:{display:!0,text:"Requests were blocked by Anti-Spam and SpamFireWall",font:{size:18}}},elements:{bar:{backgroundColor:"steelblue"}},animations:{tension:{duration:1e3,easing:"linear",from:1,to:0,loop:!0}}}})}); |
  |  | 1 | jQuery(document).ready(function(){jQuery(".ct\_widget\_refresh\_link").on("click",function(){jQuery(".ct\_preloader").show(),setTimeout(function(){window.scrollTo(0,jQuery("#ct\_widget\_wrapper").offset().top-130)},1),setTimeout(function(){jQuery("#ct\_refresh\_form").submit()},2500)}),"#ct\_widget"==location.hash&&setTimeout(function(){window.scrollTo(0,jQuery("#ct\_widget\_wrapper").offset().top-130)},1),jQuery("#ct\_widget\_wrapper").parent().css("padding",0),locale=navigator.language||navigator.userLanguage;var o=new Intl.DateTimeFormat(locale,{month:"short",day:"numeric"});var e=document.getElementById("ct\_widget\_chart"),t=function(t){var a={labels:[],counts:[]};for(let e=0;e<t.length;e++)a.labels.push(o.format(new Date(t[e][0]))),a.counts.push(t[e][1]);return a}(apbctDashboardWidget.data);new Chart(e,{type:"bar",data:{labels:t.labels,datasets:[{label:"Requests blocked",data:t.counts,borderWidth:1,backgroundColor:"steelblue"}]},options:{legend:{display:!1},maintainAspectRatio:!1,responsive:!0,scales:{y:{beginAtZero:!0}},title:{display:!0,text:"Requests were blocked by Anti-Spam and SpamFireWall",fontSize:18},plugins:{legend:{display:!1},title:{display:!0,text:"Requests were blocked by Anti-Spam and SpamFireWall",font:{size:18}}},elements:{bar:{backgroundColor:"steelblue"}},animations:{tension:{duration:1e3,easing:"linear",from:1,to:0,loop:!0}}}})}); |
  | 2 | 2 | //# sourceMappingURL=cleantalk-dashboard-widget.min.js.map |
* ## [cleantalk-spam-protect/trunk/js/cleantalk-dashboard-widget.min.js.map](/changeset/3188546/cleantalk-spam-protect/trunk/js/cleantalk-dashboard-widget.min.js.map "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/js/cleantalk-dashboard-widget.min.js.map")

  | [r3161895](/browser/cleantalk-spam-protect/trunk/js/cleantalk-dashboard-widget.min.js.map?rev=3161895#L1 "Show revision 3161895 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/js/cleantalk-dashboard-widget.min.js.map?rev=3188546#L1 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | {"version":3,"file":"cleantalk-dashboard-widget.min.js","sources":["cleantalk-dashboard-widget.js"],"sourcesContent":["jQuery(document).ready(function(){\n\n\t// Set \"refresh\" link handler\n\tjQuery(\".ct\_widget\_refresh\_link\").on('click', function(){\n\t\tjQuery('.ct\_preloader').show();\n\t\tsetTimeout(function(){window.scrollTo(0, jQuery('#ct\_widget\_wrapper').offset().top - 130);}, 1);\n\t\tsetTimeout(function(){jQuery(\"#ct\_refresh\_form\").submit();}, 2500);\n\t});\n\n\tif(location.hash == '#ct\_widget')\n\t\tsetTimeout(function(){window.scrollTo(0, jQuery('#ct\_widget\_wrapper').offset().top - 130);}, 1);\n\n\t// Fixing default wrapper style\n\tjQuery(\"#ct\_widget\_wrapper\").parent().css('padding', 0);\n\n\tlocale = navigator.language || navigator.userLanguage;\n\n\tvar date\_formatter = new Intl.DateTimeFormat(locale, {\n\t\tmonth: \"short\",\n\t\tday: \"numeric\"\n\t});\n\n\tfunction reformatWidgetData(apbctDashboardWidget){\n\t\tlet widgetData = {'labels':[],'counts':[]}\n\t\tfor (let i = 0; i < apbctDashboardWidget.length; i++) {\n\t\t\twidgetData.labels.push(date\_formatter.format(new Date(apbctDashboardWidget[i]['0'])))\n\t\t\twidgetData.counts.push(apbctDashboardWidget[i]['1'])\n\t\t}\n\t\treturn widgetData\n\t}\n\n\tconst ctx = document.getElementById('ct\_widget\_chart')\n\tlet widgetData = reformatWidgetData(apbctDashboardWidget['data'])\n\n\tnew Chart(ctx, {\n\t\ttype: 'bar',\n\t\tdata: {\n\t\t\tlabels: widgetData.labels,\n\t\t\tdatasets: [{\n\t\t\t\tlabel: 'Requests blocked',\n\t\t\t\tdata: widgetData.counts,\n\t\t\t\tborderWidth: 1,\n\t\t\t\tbackgroundColor: 'steelblue'\n\t\t\t}]\n\t\t},\n\t\toptions: {\n\t\t\tlegend: {\n\t\t\t\tdisplay: false\n\t\t\t},\n\t\t\tmaintainAspectRatio: false,\n\t\t\tresponsive: true,\n\t\t\tscales: {\n\t\t\t\ty: {\n\t\t\t\t\tbeginAtZero: true\n\t\t\t\t}\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tdisplay: true,\n\t\t\t\ttext: 'Requests were blocked by Anti-Spam and SpamFireWall',\n\t\t\t\tfontSize: 18\n\t\t\t},\n\t\t\tplugins: {\n\t\t\t\tlegend: {\n\t\t\t\t\tdisplay: false\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\ttext: 'Requests were blocked by Anti-Spam and SpamFireWall',\n\t\t\t\t\tfont: {\n\t\t\t\t\t\tsize: 18,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\telements: {\n\t\t\t\tbar:{\n\t\t\t\t\tbackgroundColor: 'steelblue'\n\t\t\t\t}\n\t\t\t},\n\t\t\tanimations: {\n\t\t\t\ttension: {\n\t\t\t\t\tduration: 1000,\n\t\t\t\t\teasing: 'linear',\n\t\t\t\t\tfrom: 1,\n\t\t\t\t\tto: 0,\n\t\t\t\t\tloop: true\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t});\n\n});"],"names":["jQuery","document","ready","on","show","setTimeout","window","scrollTo","offset","top","submit","location","hash","parent","css","locale","navigator","language","userLanguage","date\_formatter","Intl","DateTimeFormat","month","day","ctx","getElementById","widgetData","apbctDashboardWidget","let","labels","counts","i","length","push","format","Date","Chart","type","data","datasets","label","borderWidth","backgroundColor","options","legend","display","maintainAspectRatio","responsive","scales","y","beginAtZero","title","text","fontSize","plugins","font","size","elements","bar","animations","tension","duration","easing","from","to","loop"],"mappings":"AAAAA,OAAOC,QAAQ,EAAEC,MAAM,WAGtBF,OAAO,yBAAyB,EAAEG,GAAG,QAAS,WAC7CH,OAAO,eAAe,EAAEI,KAAK,EAC7BC,WAAW,WAAWC,OAAOC,SAAS,EAAGP,OAAO,oBAAoB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CAAE,EAAG,CAAC,EAC9FJ,WAAW,WAAWL,OAAO,kBAAkB,EAAEU,OAAO,CAAE,EAAG,IAAI,CAClE,CAAC,EAEmB,cAAjBC,SAASC,MACXP,WAAW,WAAWC,OAAOC,SAAS,EAAGP,OAAO,oBAAoB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CAAE,EAAG,CAAC,EAG/FT,OAAO,oBAAoB,EAAEa,OAAO,EAAEC,IAAI,UAAW,CAAC,EAEtDC,OAASC,UAAUC,UAAYD,UAAUE,aAEzC,IAAIC,EAAiB,IAAIC,KAAKC,eAAeN,OAAQ,CACpDO,MAAO,QACPC,IAAK,SACN,CAAC,EAWD,IAAMC,EAAMvB,SAASwB,eAAe,iBAAiB,EACjDC,~~GAVwBC,IAC3BC,IAAIF,EAAa,CAACG,OAAS,GAAGC,OAAS,EAAE,EACzC,IAAKF,IAAIG,EAAI,EAAGA,EAAIJ,EAAqBK,OAAQD,CAAC,GACjDL,EAAWG,OAAOI,KAAKd,EAAee,OAAO,IAAIC,KAAKR,EAAqBI,GAAG,EAAI,CAAC,CAAC,EACpFL,EAAWI,OAAOG,KAAKN,EAAqBI,GAAG,EAAI,EAEpD,OAAOL,CACR,G~~AGoCC,qBAA2B,IAAC,EAEhE,IAAIS,MAAMZ,EAAK,CACda,KAAM,MACNC,KAAM,CACLT,OAAQH,EAAWG,OACnBU,SAAU,CAAC,CACVC,MAAO,mBACPF,KAAMZ,EAAWI,OACjBW,YAAa,EACbC,gBAAiB,WAClB,EACD,EACAC,QAAS,CACRC,OAAQ,CACPC,QAAS,CAAA,CACV,EACAC,oBAAqB,CAAA,EACrBC,WAAY,CAAA,EACZC,OAAQ,CACPC,EAAG,CACFC,YAAa,CAAA,CACd,CACD,EACAC,MAAO,CACNN,QAAS,CAAA,EACTO,KAAM,sDACNC,SAAU,EACX,EACAC,QAAS,CACRV,OAAQ,CACPC,QAAS,CAAA,CACV,EACAM,MAAO,CACNN,QAAS,CAAA,EACTO,KAAM,sDACNG,KAAM,CACLC,KAAM,EACP,CACD,CACD,EACAC,SAAU,CACTC,IAAI,CACHhB,gBAAiB,WAClB,CACD,EACAiB,WAAY,CACXC,QAAS,CACRC,SAAU,IACVC,OAAQ,SACRC,KAAM,EACNC,GAAI,EACJC,KAAM,CAAA,CACP,CACD,CACD,CACD,CAAC,CAEF,CAAC"} |
  |  | 1 | {"version":3,"file":"cleantalk-dashboard-widget.min.js","sources":["cleantalk-dashboard-widget.js"],"sourcesContent":["jQuery(document).ready(function(){\n\n\t// Set \"refresh\" link handler\n\tjQuery(\".ct\_widget\_refresh\_link\").on('click', function(){\n\t\tjQuery('.ct\_preloader').show();\n\t\tsetTimeout(function(){window.scrollTo(0, jQuery('#ct\_widget\_wrapper').offset().top - 130);}, 1);\n\t\tsetTimeout(function(){jQuery(\"#ct\_refresh\_form\").submit();}, 2500);\n\t});\n\n\tif(location.hash == '#ct\_widget')\n\t\tsetTimeout(function(){window.scrollTo(0, jQuery('#ct\_widget\_wrapper').offset().top - 130);}, 1);\n\n\t// Fixing default wrapper style\n\tjQuery(\"#ct\_widget\_wrapper\").parent().css('padding', 0);\n\n\tlocale = navigator.language || navigator.userLanguage;\n\n\tvar date\_formatter = new Intl.DateTimeFormat(locale, {\n\t\tmonth: \"short\",\n\t\tday: \"numeric\"\n\t});\n\n\tfunction reformatWidgetData(apbctDashboardWidget){\n\t\tlet widgetData = {'labels':[],'counts':[]}\n\t\tfor (let i = 0; i < apbctDashboardWidget.length; i++) {\n\t\t\twidgetData.labels.push(date\_formatter.format(new Date(apbctDashboardWidget[i]['0'])))\n\t\t\twidgetData.counts.push(apbctDashboardWidget[i]['1'])\n\t\t}\n\t\treturn widgetData\n\t}\n\n\tconst ctx = document.getElementById('ct\_widget\_chart')\n\tlet widgetData = reformatWidgetData(apbctDashboardWidget['data'])\n\n\tnew Chart(ctx, {\n\t\ttype: 'bar',\n\t\tdata: {\n\t\t\tlabels: widgetData.labels,\n\t\t\tdatasets: [{\n\t\t\t\tlabel: 'Requests blocked',\n\t\t\t\tdata: widgetData.counts,\n\t\t\t\tborderWidth: 1,\n\t\t\t\tbackgroundColor: 'steelblue'\n\t\t\t}]\n\t\t},\n\t\toptions: {\n\t\t\tlegend: {\n\t\t\t\tdisplay: false\n\t\t\t},\n\t\t\tmaintainAspectRatio: false,\n\t\t\tresponsive: true,\n\t\t\tscales: {\n\t\t\t\ty: {\n\t\t\t\t\tbeginAtZero: true\n\t\t\t\t}\n\t\t\t},\n\t\t\ttitle: {\n\t\t\t\tdisplay: true,\n\t\t\t\ttext: 'Requests were blocked by Anti-Spam and SpamFireWall',\n\t\t\t\tfontSize: 18\n\t\t\t},\n\t\t\tplugins: {\n\t\t\t\tlegend: {\n\t\t\t\t\tdisplay: false\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\tdisplay: true,\n\t\t\t\t\ttext: 'Requests were blocked by Anti-Spam and SpamFireWall',\n\t\t\t\t\tfont: {\n\t\t\t\t\t\tsize: 18,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\telements: {\n\t\t\t\tbar:{\n\t\t\t\t\tbackgroundColor: 'steelblue'\n\t\t\t\t}\n\t\t\t},\n\t\t\tanimations: {\n\t\t\t\ttension: {\n\t\t\t\t\tduration: 1000,\n\t\t\t\t\teasing: 'linear',\n\t\t\t\t\tfrom: 1,\n\t\t\t\t\tto: 0,\n\t\t\t\t\tloop: true\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t});\n\n});"],"names":["jQuery","document","ready","on","show","setTimeout","window","scrollTo","offset","top","submit","location","hash","parent","css","locale","navigator","language","userLanguage","date\_formatter","Intl","DateTimeFormat","month","day","ctx","getElementById","widgetData","apbctDashboardWidget","let","labels","counts","i","length","push","format","Date","Chart","type","data","datasets","label","borderWidth","backgroundColor","options","legend","display","maintainAspectRatio","responsive","scales","y","beginAtZero","title","text","fontSize","plugins","font","size","elements","bar","animations","tension","duration","easing","from","to","loop"],"mappings":"AAAAA,OAAOC,QAAQ,EAAEC,MAAM,WAGtBF,OAAO,yBAAyB,EAAEG,GAAG,QAAS,WAC7CH,OAAO,eAAe,EAAEI,KAAK,EAC7BC,WAAW,WAAWC,OAAOC,SAAS,EAAGP,OAAO,oBAAoB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CAAE,EAAG,CAAC,EAC9FJ,WAAW,WAAWL,OAAO,kBAAkB,EAAEU,OAAO,CAAE,EAAG,IAAI,CAClE,CAAC,EAEmB,cAAjBC,SAASC,MACXP,WAAW,WAAWC,OAAOC,SAAS,EAAGP,OAAO,oBAAoB,EAAEQ,OAAO,EAAEC,IAAM,GAAG,CAAE,EAAG,CAAC,EAG/FT,OAAO,oBAAoB,EAAEa,OAAO,EAAEC,IAAI,UAAW,CAAC,EAEtDC,OAASC,UAAUC,UAAYD,UAAUE,aAEzC,IAAIC,EAAiB,IAAIC,KAAKC,eAAeN,OAAQ,CACpDO,MAAO,QACPC,IAAK,SACN,CAAC,EAWD,IAAMC,EAAMvB,SAASwB,eAAe,iBAAiB,EACjDC,EAVJ,SAA4BC,GAC3BC,IAAIF,EAAa,CAACG,OAAS,GAAGC,OAAS,EAAE,EACzC,IAAKF,IAAIG,EAAI,EAAGA,EAAIJ,EAAqBK,OAAQD,CAAC,GACjDL,EAAWG,OAAOI,KAAKd,EAAee,OAAO,IAAIC,KAAKR,EAAqBI,GAAG,EAAI,CAAC,CAAC,EACpFL,EAAWI,OAAOG,KAAKN,EAAqBI,GAAG,EAAI,EAEpD,OAAOL,CACR,EAGoCC,qBAA2B,IAAC,EAEhE,IAAIS,MAAMZ,EAAK,CACda,KAAM,MACNC,KAAM,CACLT,OAAQH,EAAWG,OACnBU,SAAU,CAAC,CACVC,MAAO,mBACPF,KAAMZ,EAAWI,OACjBW,YAAa,EACbC,gBAAiB,WAClB,EACD,EACAC,QAAS,CACRC,OAAQ,CACPC,QAAS,CAAA,CACV,EACAC,oBAAqB,CAAA,EACrBC,WAAY,CAAA,EACZC,OAAQ,CACPC,EAAG,CACFC,YAAa,CAAA,CACd,CACD,EACAC,MAAO,CACNN,QAAS,CAAA,EACTO,KAAM,sDACNC,SAAU,EACX,EACAC,QAAS,CACRV,OAAQ,CACPC,QAAS,CAAA,CACV,EACAM,MAAO,CACNN,QAAS,CAAA,EACTO,KAAM,sDACNG,KAAM,CACLC,KAAM,EACP,CACD,CACD,EACAC,SAAU,CACTC,IAAI,CACHhB,gBAAiB,WAClB,CACD,EACAiB,WAAY,CACXC,QAAS,CACRC,SAAU,IACVC,OAAQ,SACRC,KAAM,EACNC,GAAI,EACJC,KAAM,CAAA,CACP,CACD,CACD,CACD,CAAC,CAEF,CAAC"} |
* ## [cleantalk-spam-protect/trunk/js/cleantalk-users-checkspam.min.js](/changeset/3188546/cleantalk-spam-protect/trunk/js/cleantalk-users-checkspam.min.js "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/js/cleantalk-users-checkspam.min.js")

  | [r2972860](/browser/cleantalk-spam-protect/trunk/js/cleantalk-users-checkspam.min.js?rev=2972860#L1 "Show revision 2972860 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/js/cleantalk-users-checkspam.min.js?rev=3188546#L1 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | String.prototype.printf=function(){var e,t=this;for(e in arguments)var c=t.substring(0,t.indexOf("%s",0)),a=t.substring(t.indexOf("%s",0)+2,t.length),t=c+arguments[e]+a;return t};var ct\_working=!(document.cookie="ct\_check\_users\_\_amount=100; path=/; samesite=lax"),ct\_new\_check=!0,ct\_cooling\_down\_flag=!1,ct\_close\_animate=!0,ct\_accurate\_check=!1,ct\_pause=!1,ct\_prev\_accurate=ctUsersCheck.ct\_prev\_accurate,ct\_prev\_from=ctUsersCheck.ct\_prev\_from,ct\_prev\_till=ctUsersCheck.ct\_prev\_till,ct\_cool\_down\_time=9e4,ct\_requests\_counter=0,ct\_max\_requests=60,ct\_ajax\_nonce=ctUsersCheck.ct\_ajax\_nonce,ct\_users\_total=0,ct\_users\_checked=0,ct\_users\_spam=0,ct\_users\_bad=0,ct\_unchecked="unset",ct\_date\_from=0,ct\_date\_till=0;function apbct\_cookie\_\_get(\_,r){var s={};return"string"==typeof(\_=\_||null)&&(\_=\_.split()),"string"==typeof(r="none"===(r=r||["apbct\_","ct\_"])?null:r)&&(r=r.split()),document.cookie.split(";").forEach(function(e,t,c){var a=e.trim().split("=");\_&&\_.forEach(function(e,t,c){a[0]===e&&(s[a[0]]=a[1])}),r&&r.forEach(function(e,t,c){0===a[0].indexOf(e)&&(s[a[0]]=a[1])})}),s}function apbct\_get\_cookie(e){var t=apbct\_cookie\_\_get(e,e);return"object"==typeof t&&void 0!==t[e]?t[e]:null}function animate\_comment(e,t){ct\_close\_animate?.3===e?jQuery("#comment-"+t).fadeTo(200,e,function(){animate\_comment(1,t)}):jQuery("#comment-"+t).fadeTo(200,e,function(){animate\_comment(.3,t)}):ct\_close\_animate=!0}function ct\_clear\_users(){var e=0,t=0,c=(jQuery("#ct\_allow\_date\_range").is(":checked")&&(e=jQuery("#ct\_date\_range\_from").val(),t=jQuery("#ct\_date\_range\_till").val()),"https:"===location.protocol?"; secure":""),c=(document.cookie="apbct\_check\_users\_offset=0; path=/; samesite=lax"+c,{action:"ajax\_clear\_users",security:ct\_ajax\_nonce,from:e,till:t,no\_cache:Math.random()});jQuery.ajax({type:"POST",url:ajaxurl,data:c,success:function(e){ct\_show\_users\_info(),ct\_send\_users()}})}function ct\_cooling\_down\_toggle(){ct\_cooling\_down\_flag=!1,ct\_send\_users(),ct\_show\_users\_info()}function ct\_send\_users(){if(!0!==ct\_cooling\_down\_flag)if(!0===ct\_pause){ct\_working=!1,jQuery("#ct\_working\_message").hide();let e="users.php?page=ct\_check\_users&ct\_worked=1";0!==ct\_date\_from&&0!==ct\_date\_till&&(e+="&from="+ct\_date\_from+"&till="+ct\_date\_till),void(location.href=e)}else{var a,e;ct\_max\_requests<=ct\_requests\_counter?(setTimeout(ct\_cooling\_down\_toggle,ct\_cool\_down\_time),ct\_cooling\_down\_flag=!(ct\_requests\_counter=0)):(ct\_requests\_counter++,a=apbct\_get\_cookie("ct\_check\_users\_\_amount"),e={action:"ajax\_check\_users",security:ct\_ajax\_nonce,new\_check:ct\_new\_check,unchecked:ct\_unchecked,amount:a,no\_cache:Math.random(),offset:Number(getCookie("apbct\_check\_users\_offset"))},ct\_accurate\_check&&(e.accurate\_check=!0),ct\_date\_from&&ct\_date\_till&&(e.from=ct\_date\_from,e.till=ct\_date\_till),jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){var t;e=jQuery.parseJSON(e),parseInt(e.error)?(ct\_working=!1,confirm(e.error\_message+". Do you want to proceed?")?ct\_send\_users():(t="users.php?page=ct\_check\_users",0!=ct\_date\_from&&0!=ct\_date\_till&&(t+="&from="+ct\_date\_from+"&till="+ct\_date\_till),location.href=t)):(ct\_new\_check=!1,1==parseInt(e.end)?(1==parseInt(e.end)&&(document.cookie="ct\_paused\_users\_check=0; path=/; samesite=lax"),ct\_working=!1,jQuery("#ct\_working\_message").hide(),t="users.php?page=ct\_check\_users&ct\_worked=1",0!=ct\_date\_from&&0!=ct\_date\_till&&(t+="&from="+ct\_date\_from+"&till="+ct\_date\_till),location.href=t):0==parseInt(e.end)&&(ct\_users\_checked=parseInt(ct\_users\_checked)+parseInt(e.checked),ct\_users\_spam=parseInt(ct\_users\_spam)+parseInt(e.spam),ct\_users\_bad=parseInt(e.bad),ct\_unchecked=ct\_users\_total-ct\_users\_checked-ct\_users\_bad,t=(t=String(ctUsersCheck.ct\_status\_string)).printf(ct\_users\_checked,ct\_users\_spam,ct\_users\_bad),0<parseInt(ct\_users\_spam)&&(t+=ctUsersCheck.ct\_status\_string\_warning),jQuery("#ct\_checking\_status").html(t),jQuery("#ct\_error\_message").hide(),e=Number(getCookie("apbct\_check\_users\_offset"))+100,t="https:"===location.protocol?"; secure":"",document.cookie="apbct\_check\_users\_offset="+e+"; path=/; samesite=lax"+t,ct\_send\_users()))},error:function(e,t,c){20<a&&(a-=20,document.cookie="ct\_check\_users\_\_amount="+a+"; path=/; samesite=lax"),jQuery("#ct\_error\_message").show(),jQuery("#cleantalk\_ajax\_error").html(t),jQuery("#cleantalk\_js\_func").html("Check users"),setTimeout(ct\_send\_users(),3e3)},timeout:25e3}))}}function ct\_show\_users\_info(){var e;ct\_working&&(!0===ct\_cooling\_down\_flag?jQuery("#ct\_cooling\_notice").html("Waiting for API to cool down. (About a minute)").show():(jQuery("#ct\_cooling\_notice").hide(),ct\_users\_total||(e={action:"ajax\_info\_users",security:ct\_ajax\_nonce,no\_cache:Math.random()},ct\_date\_from&&ct\_date\_till&&(e.from=ct\_date\_from,e.till=ct\_date\_till),jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){e=jQuery.parseJSON(e),jQuery("#ct\_checking\_status").html(e.message),ct\_users\_spam=e.spam,ct\_users\_checked=e.checked,ct\_users\_bad=e.bad},error:function(e,t,c){jQuery("#ct\_error\_message").show(),jQuery("#cleantalk\_ajax\_error").html(t),jQuery("#cleantalk\_js\_func").html("Show users"),setTimeout(ct\_show\_users\_info(),3e3)},timeout:15e3}))))}function ct\_toggle\_depended(e,t){t=t||null;var c=jQuery(e.data("depended"));e.data("state")||t?(e.data("state",!1),c.prop("disabled",!0),c.removeProp("checked"),c.data("depended")&&ct\_toggle\_depended(c,!0)):(e.data("state",!0),c.removeProp("disabled"))}function ct\_start\_check(e){e=e||null,jQuery("#ct\_allow\_date\_range").is(":checked")&&(ct\_date\_from=jQuery("#ct\_date\_range\_from").val(),ct\_date\_till=jQuery("#ct\_date\_range\_till").val(),""===ct\_date\_from||""===ct\_date\_till)?alert(ctUsersCheck.ct\_specify\_date\_range):(jQuery("#ct\_accurate\_check").is(":checked")&&(ct\_accurate\_check=!0),jQuery("#ct\_accurate\_check").is(":checked")&&!jQuery("#ct\_allow\_date\_range").is(":checked")?alert(ctUsersCheck.ct\_select\_date\_range):(jQuery(".ct\_to\_hide").hide(),jQuery("#ct\_working\_message").show(),jQuery("#ct\_preloader").show(),jQuery("#ct\_pause").show(),ct\_working=!0,(e?(ct\_show\_users\_info(),ct\_send\_users):ct\_clear\_users)()))}function ct\_delete\_all\_users(a){var t={action:"ajax\_delete\_all\_users",security:ct\_ajax\_nonce,no\_cache:Math.random()};jQuery("."+a.target.id).addClass("disabled"),jQuery(".spinner").css("visibility","visible"),jQuery.ajax({type:"POST",url:ajaxurl,data:t,success:function(e){0<e?(jQuery("#cleantalk\_users\_left").html(e),ct\_delete\_all\_users(a,t)):(jQuery("."+a.target.id).removeClass("disabled"),jQuery(".spinner").css("visibility","hidden"),location.href="users.php?page=ct\_check\_users")},error:function(e,t,c){jQuery("#ct\_error\_message").show(),jQuery("#cleantalk\_ajax\_error").html(t),jQuery("#cleantalk\_js\_func").html("All users deleteion"),setTimeout(ct\_delete\_all\_users(a),3e3)},timeout:25e3})}function getCookie(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?\*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]\*)"));return e?decodeURIComponent(e[1]):void 0}jQuery(document).ready(function(){ct\_prev\_accurate&&jQuery("#ct\_accurate\_check").prop("checked",!0),ct\_prev\_from&&(jQuery("#ct\_allow\_date\_range").prop("checked",!0).data("state",!0),jQuery("#ct\_date\_range\_from").removeProp("disabled").val(ct\_prev\_from),jQuery("#ct\_date\_range\_till").removeProp("disabled").val(ct\_prev\_till)),jQuery("#ct\_allow\_date\_range").on("change",function(){document.cookie="ct\_users\_dates\_from="+jQuery("#ct\_date\_range\_from").val()+"; path=/; samesite=lax",document.cookie="ct\_users\_dates\_till="+jQuery("#ct\_date\_range\_till").val()+"; path=/; samesite=lax",this.checked?(document.cookie="ct\_users\_dates\_allowed=1; path=/; samesite=lax",jQuery(".ct\_date").prop("checked",!0).attr("disabled",!1)):(document.cookie="ct\_users\_dates\_allowed=0; path=/; samesite=lax",jQuery(".ct\_date").prop("disabled",!0).attr("disabled",!0))}),jQuery.datepicker.setDefaults(jQuery.datepicker.regional.en);var a=jQuery("#ct\_date\_range\_from, #ct\_date\_range\_till").datepicker({dateFormat:"M d yy",maxDate:"+0D",changeMonth:!0,changeYear:!0,showAnim:"slideDown",onSelect:function(e){var t="ct\_date\_range\_from"==this.id?"minDate":"maxDate",c=jQuery(this).data("datepicker"),e=jQuery.datepicker.parseDate(c.settings.dateFormat||jQuery.datepicker.\_defaults.dateFormat,e,c.settings);a.not(this).datepicker("option",t,e),document.cookie="ct\_users\_dates\_from="+jQuery("#ct\_date\_range\_from").val()+"; path=/; samesite=lax",document.cookie="ct\_users\_dates\_till="+jQuery("#ct\_date\_range\_till").val()+"; path=/; samesite=lax"}});function t(t){t=t||null;var e={action:"ajax\_insert\_users",security:ct\_ajax\_nonce,no\_cache:Math.random()}~~;t&&(e.delete=!0),jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){t?alert("Deleted "+e+" users"):alert("Inserted "+e+" users"~~)}})}jQuery("#ct\_check\_spam\_button").click(function(){document.cookie="ct\_paused\_users\_check=0; path=/; samesite=lax",ct\_start\_check(ct\_pause=!1)}),jQuery("#ct\_proceed\_check\_button").click(function(){ct\_start\_check(!(ct\_pause=!1))}),jQuery("#ct\_pause").on("click",function(){ct\_pause=!0;var e={accurate:ct\_accurate\_check,from:ct\_date\_from,till:ct\_date\_till};document.cookie="ct\_paused\_users\_check="+JSON.stringify(e)+"; path=/; samesite=lax"}),jQuery(".cleantalk\_delete\_from\_list\_button").click(function(){ct\_id=jQuery(this).attr("data-id");var e={action:"ajax\_ct\_approve\_user",security:ct\_ajax\_nonce,id:ct\_id,no\_cache:Math.random()},e=(jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){jQuery("#comment-"+ct\_id).fadeOut("slow",function(){jQuery("#comment-"+ct\_id).remove()})}}),{action:"ct\_feedback\_user",security:ct\_ajax\_nonce,user\_id:ct\_id,status:"approve",no\_cache:Math.random()});jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){},error:function(e,t,c){},timeout:5e3})}),jQuery(".ct\_get\_csv\_file").click(function(c){var e={action:"ajax\_ct\_get\_csv\_file",security:ct\_ajax\_nonce,filename:ctUsersCheck.ct\_csv\_filename,no\_cache:Math.random()};jQuery("."+c.target.id).addClass("disabled"),jQuery(".spinner").css("visibility","visible"),jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){var t;0===parseInt(e)?alert(ctUsersCheck.ct\_bad\_csv):(e=URL.createObjectURL(new Blob([e])),(t=document.createElement("a")).href=e,t.download=ctUsersCheck.ct\_csv\_filename+".csv",document.body.appendChild(t),t.click()),jQuery("."+c.target.id).removeClass("disabled"),jQuery(".spinner").css("visibility","hidden")}})}),jQuery(".ct\_insert\_users").click(function(e){t()}),jQuery(".ct\_insert\_users\_\_delete").click(function(e){t(!0)}),jQuery(".ct\_delete\_all\_users").click(function(e){if(!confirm(ctUsersCheck.ct\_confirm\_deletion\_all))return!1;ct\_delete\_all\_users(e)}),jQuery("#ct\_accurate\_check").change(function(){this.checked&&(jQuery("#ct\_allow\_date\_range").prop("checked",!0),jQuery(".ct\_date").prop("checked",!0).attr("disabled",!1))})}),jQuery("#doaction").on("click",function(e){jQuery('select[name="action"]').each(function(){"delete"!==jQuery(this).val()||showNotice.warn()||e.preventDefault()})}); |
  |  | 1 | String.prototype.printf=function(){var e,t=this;for(e in arguments)var c=t.substring(0,t.indexOf("%s",0)),a=t.substring(t.indexOf("%s",0)+2,t.length),t=c+arguments[e]+a;return t};var ct\_working=!(document.cookie="ct\_check\_users\_\_amount=100; path=/; samesite=lax"),ct\_new\_check=!0,ct\_cooling\_down\_flag=!1,ct\_close\_animate=!0,ct\_accurate\_check=!1,ct\_pause=!1,ct\_prev\_accurate=ctUsersCheck.ct\_prev\_accurate,ct\_prev\_from=ctUsersCheck.ct\_prev\_from,ct\_prev\_till=ctUsersCheck.ct\_prev\_till,ct\_cool\_down\_time=9e4,ct\_requests\_counter=0,ct\_max\_requests=60,ct\_ajax\_nonce=ctUsersCheck.ct\_ajax\_nonce,ct\_users\_total=0,ct\_users\_checked=0,ct\_users\_spam=0,ct\_users\_bad=0,ct\_unchecked="unset",ct\_date\_from=0,ct\_date\_till=0;function apbct\_cookie\_\_get(\_,r){var s={};return"string"==typeof(\_=\_||null)&&(\_=\_.split()),"string"==typeof(r="none"===(r=r||["apbct\_","ct\_"])?null:r)&&(r=r.split()),document.cookie.split(";").forEach(function(e,t,c){var a=e.trim().split("=");\_&&\_.forEach(function(e,t,c){a[0]===e&&(s[a[0]]=a[1])}),r&&r.forEach(function(e,t,c){0===a[0].indexOf(e)&&(s[a[0]]=a[1])})}),s}function apbct\_get\_cookie(e){var t=apbct\_cookie\_\_get(e,e);return"object"==typeof t&&void 0!==t[e]?t[e]:null}function animate\_comment(e,t){ct\_close\_animate?.3===e?jQuery("#comment-"+t).fadeTo(200,e,function(){animate\_comment(1,t)}):jQuery("#comment-"+t).fadeTo(200,e,function(){animate\_comment(.3,t)}):ct\_close\_animate=!0}function ct\_clear\_users(){var e=0,t=0,c=(jQuery("#ct\_allow\_date\_range").is(":checked")&&(e=jQuery("#ct\_date\_range\_from").val(),t=jQuery("#ct\_date\_range\_till").val()),"https:"===location.protocol?"; secure":""),c=(document.cookie="apbct\_check\_users\_offset=0; path=/; samesite=lax"+c,{action:"ajax\_clear\_users",security:ct\_ajax\_nonce,from:e,till:t,no\_cache:Math.random()});jQuery.ajax({type:"POST",url:ajaxurl,data:c,success:function(e){ct\_show\_users\_info(),ct\_send\_users()}})}function ct\_cooling\_down\_toggle(){ct\_cooling\_down\_flag=!1,ct\_send\_users(),ct\_show\_users\_info()}function ct\_send\_users(){if(!0!==ct\_cooling\_down\_flag)if(!0===ct\_pause){ct\_working=!1,jQuery("#ct\_working\_message").hide();let e="users.php?page=ct\_check\_users&ct\_worked=1";0!==ct\_date\_from&&0!==ct\_date\_till&&(e+="&from="+ct\_date\_from+"&till="+ct\_date\_till),void(location.href=e)}else{var a,e;ct\_max\_requests<=ct\_requests\_counter?(setTimeout(ct\_cooling\_down\_toggle,ct\_cool\_down\_time),ct\_cooling\_down\_flag=!(ct\_requests\_counter=0)):(ct\_requests\_counter++,a=apbct\_get\_cookie("ct\_check\_users\_\_amount"),e={action:"ajax\_check\_users",security:ct\_ajax\_nonce,new\_check:ct\_new\_check,unchecked:ct\_unchecked,amount:a,no\_cache:Math.random(),offset:Number(getCookie("apbct\_check\_users\_offset"))},ct\_accurate\_check&&(e.accurate\_check=!0),ct\_date\_from&&ct\_date\_till&&(e.from=ct\_date\_from,e.till=ct\_date\_till),jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){var t;e=jQuery.parseJSON(e),parseInt(e.error)?(ct\_working=!1,confirm(e.error\_message+". Do you want to proceed?")?ct\_send\_users():(t="users.php?page=ct\_check\_users",0!=ct\_date\_from&&0!=ct\_date\_till&&(t+="&from="+ct\_date\_from+"&till="+ct\_date\_till),location.href=t)):(ct\_new\_check=!1,1==parseInt(e.end)?(1==parseInt(e.end)&&(document.cookie="ct\_paused\_users\_check=0; path=/; samesite=lax"),ct\_working=!1,jQuery("#ct\_working\_message").hide(),t="users.php?page=ct\_check\_users&ct\_worked=1",0!=ct\_date\_from&&0!=ct\_date\_till&&(t+="&from="+ct\_date\_from+"&till="+ct\_date\_till),location.href=t):0==parseInt(e.end)&&(ct\_users\_checked=parseInt(ct\_users\_checked)+parseInt(e.checked),ct\_users\_spam=parseInt(ct\_users\_spam)+parseInt(e.spam),ct\_users\_bad=parseInt(e.bad),ct\_unchecked=ct\_users\_total-ct\_users\_checked-ct\_users\_bad,t=(t=String(ctUsersCheck.ct\_status\_string)).printf(ct\_users\_checked,ct\_users\_spam,ct\_users\_bad),0<parseInt(ct\_users\_spam)&&(t+=ctUsersCheck.ct\_status\_string\_warning),jQuery("#ct\_checking\_status").html(t),jQuery("#ct\_error\_message").hide(),e=Number(getCookie("apbct\_check\_users\_offset"))+100,t="https:"===location.protocol?"; secure":"",document.cookie="apbct\_check\_users\_offset="+e+"; path=/; samesite=lax"+t,ct\_send\_users()))},error:function(e,t,c){20<a&&(a-=20,document.cookie="ct\_check\_users\_\_amount="+a+"; path=/; samesite=lax"),jQuery("#ct\_error\_message").show(),jQuery("#cleantalk\_ajax\_error").html(t),jQuery("#cleantalk\_js\_func").html("Check users"),setTimeout(ct\_send\_users(),3e3)},timeout:25e3}))}}function ct\_show\_users\_info(){var e;ct\_working&&(!0===ct\_cooling\_down\_flag?jQuery("#ct\_cooling\_notice").html("Waiting for API to cool down. (About a minute)").show():(jQuery("#ct\_cooling\_notice").hide(),ct\_users\_total||(e={action:"ajax\_info\_users",security:ct\_ajax\_nonce,no\_cache:Math.random()},ct\_date\_from&&ct\_date\_till&&(e.from=ct\_date\_from,e.till=ct\_date\_till),jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){e=jQuery.parseJSON(e),jQuery("#ct\_checking\_status").html(e.message),ct\_users\_spam=e.spam,ct\_users\_checked=e.checked,ct\_users\_bad=e.bad},error:function(e,t,c){jQuery("#ct\_error\_message").show(),jQuery("#cleantalk\_ajax\_error").html(t),jQuery("#cleantalk\_js\_func").html("Show users"),setTimeout(ct\_show\_users\_info(),3e3)},timeout:15e3}))))}function ct\_toggle\_depended(e,t){t=t||null;var c=jQuery(e.data("depended"));e.data("state")||t?(e.data("state",!1),c.prop("disabled",!0),c.removeProp("checked"),c.data("depended")&&ct\_toggle\_depended(c,!0)):(e.data("state",!0),c.removeProp("disabled"))}function ct\_start\_check(e){e=e||null,jQuery("#ct\_allow\_date\_range").is(":checked")&&(ct\_date\_from=jQuery("#ct\_date\_range\_from").val(),ct\_date\_till=jQuery("#ct\_date\_range\_till").val(),""===ct\_date\_from||""===ct\_date\_till)?alert(ctUsersCheck.ct\_specify\_date\_range):(jQuery("#ct\_accurate\_check").is(":checked")&&(ct\_accurate\_check=!0),jQuery("#ct\_accurate\_check").is(":checked")&&!jQuery("#ct\_allow\_date\_range").is(":checked")?alert(ctUsersCheck.ct\_select\_date\_range):(jQuery(".ct\_to\_hide").hide(),jQuery("#ct\_working\_message").show(),jQuery("#ct\_preloader").show(),jQuery("#ct\_pause").show(),ct\_working=!0,(e?(ct\_show\_users\_info(),ct\_send\_users):ct\_clear\_users)()))}function ct\_delete\_all\_users(a){var t={action:"ajax\_delete\_all\_users",security:ct\_ajax\_nonce,no\_cache:Math.random()};jQuery("."+a.target.id).addClass("disabled"),jQuery(".spinner").css("visibility","visible"),jQuery.ajax({type:"POST",url:ajaxurl,data:t,success:function(e){0<e?(jQuery("#cleantalk\_users\_left").html(e),ct\_delete\_all\_users(a,t)):(jQuery("."+a.target.id).removeClass("disabled"),jQuery(".spinner").css("visibility","hidden"),location.href="users.php?page=ct\_check\_users")},error:function(e,t,c){jQuery("#ct\_error\_message").show(),jQuery("#cleantalk\_ajax\_error").html(t),jQuery("#cleantalk\_js\_func").html("All users deleteion"),setTimeout(ct\_delete\_all\_users(a),3e3)},timeout:25e3})}function getCookie(e){e=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?\*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]\*)"));return e?decodeURIComponent(e[1]):void 0}jQuery(document).ready(function(){ct\_prev\_accurate&&jQuery("#ct\_accurate\_check").prop("checked",!0),ct\_prev\_from&&(jQuery("#ct\_allow\_date\_range").prop("checked",!0).data("state",!0),jQuery("#ct\_date\_range\_from").removeProp("disabled").val(ct\_prev\_from),jQuery("#ct\_date\_range\_till").removeProp("disabled").val(ct\_prev\_till)),jQuery("#ct\_allow\_date\_range").on("change",function(){document.cookie="ct\_users\_dates\_from="+jQuery("#ct\_date\_range\_from").val()+"; path=/; samesite=lax",document.cookie="ct\_users\_dates\_till="+jQuery("#ct\_date\_range\_till").val()+"; path=/; samesite=lax",this.checked?(document.cookie="ct\_users\_dates\_allowed=1; path=/; samesite=lax",jQuery(".ct\_date").prop("checked",!0).attr("disabled",!1)):(document.cookie="ct\_users\_dates\_allowed=0; path=/; samesite=lax",jQuery(".ct\_date").prop("disabled",!0).attr("disabled",!0))}),jQuery.datepicker.setDefaults(jQuery.datepicker.regional.en);var a=jQuery("#ct\_date\_range\_from, #ct\_date\_range\_till").datepicker({dateFormat:"M d yy",maxDate:"+0D",changeMonth:!0,changeYear:!0,showAnim:"slideDown",onSelect:function(e){var t="ct\_date\_range\_from"==this.id?"minDate":"maxDate",c=jQuery(this).data("datepicker"),e=jQuery.datepicker.parseDate(c.settings.dateFormat||jQuery.datepicker.\_defaults.dateFormat,e,c.settings);a.not(this).datepicker("option",t,e),document.cookie="ct\_users\_dates\_from="+jQuery("#ct\_date\_range\_from").val()+"; path=/; samesite=lax",document.cookie="ct\_users\_dates\_till="+jQuery("#ct\_date\_range\_till").val()+"; path=/; samesite=lax"}});function t(t){t=t||null;var e={action:"ajax\_insert\_users",security:ct\_ajax\_nonce,no\_cache:Math.random()},c=(t&&(e.delete=!0),document.createElement("div"));c.setAttribute("class","apbct-popup"),c.setAttribute("id","apbct\_popup"),c.setAttribute("style","font-size: 20px"),c.innerText="Wait for users handling!..",document.body.append(c),document.body.classList.add("apbct-popup-fade"),jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){t?alert("Deleted "+e+" users"):alert("Inserted "+e+" users"),jQuery("#apbct\_popup")[0].remove(),document.body.classList.remove("apbct-popup-fade"),window.location.reload()}})}jQuery("#ct\_check\_spam\_button").click(function(){document.cookie="ct\_paused\_users\_check=0; path=/; samesite=lax",ct\_start\_check(ct\_pause=!1)}),jQuery("#ct\_proceed\_check\_button").click(function(){ct\_start\_check(!(ct\_pause=!1))}),jQuery("#ct\_pause").on("click",function(){ct\_pause=!0;var e={accurate:ct\_accurate\_check,from:ct\_date\_from,till:ct\_date\_till};document.cookie="ct\_paused\_users\_check="+JSON.stringify(e)+"; path=/; samesite=lax"}),jQuery(".cleantalk\_delete\_from\_list\_button").click(function(){ct\_id=jQuery(this).attr("data-id");var e={action:"ajax\_ct\_approve\_user",security:ct\_ajax\_nonce,id:ct\_id,no\_cache:Math.random()},e=(jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){jQuery("#comment-"+ct\_id).fadeOut("slow",function(){jQuery("#comment-"+ct\_id).remove()})}}),{action:"ct\_feedback\_user",security:ct\_ajax\_nonce,user\_id:ct\_id,status:"approve",no\_cache:Math.random()});jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){},error:function(e,t,c){},timeout:5e3})}),jQuery(".ct\_get\_csv\_file").click(function(c){var e={action:"ajax\_ct\_get\_csv\_file",security:ct\_ajax\_nonce,filename:ctUsersCheck.ct\_csv\_filename,no\_cache:Math.random()};jQuery("."+c.target.id).addClass("disabled"),jQuery(".spinner").css("visibility","visible"),jQuery.ajax({type:"POST",url:ajaxurl,data:e,success:function(e){var t;0===parseInt(e)?alert(ctUsersCheck.ct\_bad\_csv):(e=URL.createObjectURL(new Blob([e])),(t=document.createElement("a")).href=e,t.download=ctUsersCheck.ct\_csv\_filename+".csv",document.body.appendChild(t),t.click()),jQuery("."+c.target.id).removeClass("disabled"),jQuery(".spinner").css("visibility","hidden")}})}),jQuery(".ct\_insert\_users").click(function(e){t()}),jQuery(".ct\_insert\_users\_\_delete").click(function(e){t(!0)}),jQuery(".ct\_delete\_all\_users").click(function(e){if(!confirm(ctUsersCheck.ct\_confirm\_deletion\_all))return!1;ct\_delete\_all\_users(e)}),jQuery("#ct\_accurate\_check").change(function(){this.checked&&(jQuery("#ct\_allow\_date\_range").prop("checked",!0),jQuery(".ct\_date").prop("checked",!0).attr("disabled",!1))})}),jQuery("#doaction").on("click",function(e){jQuery('select[name="action"]').each(function(){"delete"!==jQuery(this).val()||showNotice.warn()||e.preventDefault()})}); |
  | 2 | 2 | //# sourceMappingURL=cleantalk-users-checkspam.min.js.map |
* ## [cleantalk-spam-protect/trunk/js/cleantalk-users-checkspam.min.js.map](/changeset/3188546/cleantalk-spam-protect/trunk/js/cleantalk-users-checkspam.min.js.map "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/js/cleantalk-users-checkspam.min.js.map")

  | [r2972860](/browser/cleantalk-spam-protect/trunk/js/cleantalk-users-checkspam.min.js.map?rev=2972860#L1 "Show revision 2972860 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/js/cleantalk-users-checkspam.min.js.map?rev=3188546#L1 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | {"version":3,"file":"cleantalk-users-checkspam.min.js","sources":["cleantalk-users-checkspam.js"],"sourcesContent":["// Printf for JS\nString.prototype.printf = function(){\n    var formatted = this;\n    for( var arg in arguments ) {\n\t\tvar before\_formatted = formatted.substring(0, formatted.indexOf(\"%s\", 0));\n\t\tvar after\_formatted  = formatted.substring(formatted.indexOf(\"%s\", 0)+2, formatted.length);\n\t\tformatted = before\_formatted + arguments[arg] + after\_formatted;\n    }\n    return formatted;\n};\n\n// Set deafult amount to check by request.\ndocument.cookie = \"ct\_check\_users\_\_amount=\" + 100 + \"; path=/; samesite=lax\";\n\n// Flags\nvar ct\_working = false,\n\tct\_new\_check = true,\n\tct\_cooling\_down\_flag = false,\n\tct\_close\_animate = true,\n\tct\_accurate\_check = false,\n\tct\_pause = false,\n\tct\_prev\_accurate = ctUsersCheck.ct\_prev\_accurate,\n\tct\_prev\_from     = ctUsersCheck.ct\_prev\_from,\~~t\n\tct\_prev\_till     = ctUsersCheck.ct\_prev\_till;\n// Settings\nvar ct\_cool\_down\_time = 90000,\n\tct\_requests\_counter = 0,\n\tct\_max\_requests = 60;\n// Variables\nvar ct\_ajax\_nonce = ctUsersCheck.ct\_ajax\_nonce,\n\tct\_users\_total = 0,\n\tct\_users\_checked = 0,\n\tct\_users\_spam = 0,\n\tct\_users\_bad = 0,\n\tct\_unchecked = 'unset',\n\tct\_date\_from = 0,\n\tct\_date\_till = 0;\n\n/\* Function: Reuturns cookie with prefix \*/\nfunction apbct\_cookie\_\_get(names, prefixes){\n\tvar cookie = {};\n\tnames = names || null;\n\tif(typeof names == 'string') names = names.split();\n\tprefixes = prefixes || ['apbct\_', 'ct\_'];\n\tif(prefixes === 'none')          prefixes = null;\n\tif(typeof prefixes == 'string') prefixes = prefixes.split();\n\tdocument.cookie.split(';').forEach(function(item, i, arr){\n\t\tvar curr = item.trim().split('=');\n\t\t// Detect by full cookie name\n\t\tif(names){\n\t\t\tnames.forEach(function(name, i, all){\n\t\t\t\tif(curr[0] === name)\n\t\t\t\t\tcookie[curr[0]] = (curr[1]);\n\t\t\t});\n\t\t}\n\t\t// Detect by name prefix\n\t\tif(prefixes){\n\t\t\tprefixes.forEach(function(prefix, i, all){\n\t\t\t\tif(curr[0].indexOf(prefix) === 0)\n\t\t\t\t\tcookie[curr[0]] = (curr[1]);\n\t\t\t});\n\t\t}\n\t});\n\treturn cookie;\n}\n\nfunction apbct\_get\_cookie( name ){\n\tvar cookie = apbct\_cookie\_\_get( name, name );\n\tif(typeof cookie === 'object' && typeof cookie[name] != 'undefined'){\n\t\treturn cookie[name];\n\t}else\n\t\treturn null;\n}\n\nfunction animate\_comment(to,id){\n\tif(ct\_close\_animate){\n\t\tif(to === 0.3){\n\t\t\tjQuery('#comment-'+id).fadeTo(200,to,function(){\n\t\t\t\tanimate\_comment(1,id)\n\t\t\t});\n\t\t}else{\n\t\t\tjQuery('#comment-'+id).fadeTo(200,to,function(){\n\t\t\t\tanimate\_comment(0.3,id)\n\t\t\t});\n\t\t}\n\t}else{\n\t\tct\_close\_animate=true;\n\t}\n}\n\nfunction ct\_clear\_users(){\n\n\tvar from = 0, till = 0;\n\tif(jQuery('#ct\_allow\_date\_range').is(':checked')) {\n\t\tfrom = jQuery('#ct\_date\_range\_from').val();\n\t\ttill = jQuery('#ct\_date\_range\_till').val();\n\t}\n\n\tvar ctSecure = location.protocol === 'https:' ? '; secure' : '';\n\tdocument.cookie = 'apbct\_check\_users\_offset' + \"=\" + 0 + \"; path=/; samesite=lax\" + ctSecure;\n\n\tvar data = {\n\t\t'action'   : 'ajax\_clear\_users',\n\t\t'security' : ct\_ajax\_nonce,\n\t\t'from'     : from,\n\t\t'till'     : till,\n\t\t'no\_cache': Math.random()\n\t};\n\n\tjQuery.ajax({\n\t\ttype: \"POST\",\n\t\turl: ajaxurl,\n\t\tdata: data,\n\t\tsuccess: function(msg){\n\t\t\tct\_show\_users\_info();\n\t\t\tct\_send\_users();\n\t\t}\n\t});\n\n}\n\n//Continues the check after cooldown time\n//Called by ct\_send\_users();\nfunction ct\_cooling\_down\_toggle(){\n\tct\_cooling\_down\_flag = false;\n\tct\_send\_users();\n\tct\_show\_users\_info();\n}\n\nfunction ct\_send\_users(){\n\t\n\tif(ct\_cooling\_down\_flag === true)\n\t\treturn;\n\tif (ct\_pause === true) {\n\t\tct\_working=false;\n\t\tjQuery('#ct\_working\_message').hide();\n\t\tlet new\_href = 'users.php?page=ct\_check\_users&ct\_worked=1';\n\t\tif(ct\_date\_from !== 0 && ct\_date\_till !== 0)\n\t\t\tnew\_href+='&from='+ct\_date\_from+'&till='+ct\_date\_till;\n\t\tlocation.href = new\_href;\n\t\treturn;\n\t}\n\t\n\tif(ct\_requests\_counter >= ct\_max\_requests){\n\t\tsetTimeout(ct\_cooling\_down\_toggle, ct\_cool\_down\_time);\n\t\tct\_requests\_counter = 0;\n\t\tct\_cooling\_down\_flag = true;\n\t\treturn;\n\t}else{\n\t\tct\_requests\_counter++;\n\t}\n\n\tvar check\_amount = apbct\_get\_cookie('ct\_check\_users\_\_amount');\n\n\tvar data = {\n\t\taction: 'ajax\_check\_users',\n\t\tsecurity: ct\_ajax\_nonce,\n\t\tnew\_check: ct\_new\_check,\n\t\tunchecked: ct\_unchecked,\n\t\tamount: check\_amount,\n\t\t'no\_cache': Math.random(),\n\t\t'offset' : Number(getCookie('apbct\_check\_users\_offset'))\n\t};\n\n\tif(ct\_accurate\_check)\n\t\tdata['accurate\_check'] = true;\n\t\n\tif(ct\_date\_from && ct\_date\_till){\n\t\tdata['from'] = ct\_date\_from;\n\t\tdata['till'] = ct\_date\_till;\n\t}\n\t\n\tjQuery.ajax({\n\t\ttype: \"POST\",\n\t\turl: ajaxurl,\n\t\tdata: data,\n\t\tsuccess: function(msg){\n\t\t\t\n\t\t\tmsg = jQuery.parseJSON(msg);\n\t\t\t\n\t\t\tif(parseInt(msg.error)){\n\t\t\t\tct\_working=false;\n\t\t\t\tif(!confirm(msg.error\_message+\". Do you want to proceed?\")){\n\t\t\t\t\tvar new\_href = 'users.php?page=ct\_check\_users';\n\t\t\t\t\tif(ct\_date\_from != 0 && ct\_date\_till != 0)\n\t\t\t\t\t\tnew\_href+='&from='+ct\_date\_from+'&till='+ct\_date\_till;\n\t\t\t\t\tlocation.href = new\_href;\n\t\t\t\t}else\n\t\t\t\t\tct\_send\_users();\n\t\t\t}else{\n\t\t\t\tct\_new\_check = false;\n\t\t\t\tif(parseInt(msg.end) == 1){\n\t\t\t\t\tif(parseInt(msg.end) == 1)\n\t\t\t\t\t\tdocument.cookie = 'ct\_paused\_users\_check=0; path=/; samesite=lax';\n\t\t\t\t\tct\_working=false;\n\t\t\t\t\tjQuery('#ct\_working\_message').hide();\n\t\t\t\t\tvar new\_href = 'users.php?page=ct\_check\_users&ct\_worked=1';\n\t\t\t\t\tif(ct\_date\_from != 0 && ct\_date\_till != 0)\n\t\t\t\t\t\tnew\_href+='&from='+ct\_date\_from+'&till='+ct\_date\_till;\n\t\t\t\t\tlocation.href = new\_href;\n\t\t\t\t}else if(parseInt(msg.end) == 0){\n\t\t\t\t\tct\_users\_checked = parseInt( ct\_users\_checked ) + parseInt( msg.checked );\n\t\t\t\t\tct\_users\_spam    = parseInt( ct\_users\_spam ) + parseInt (msg.spam );\n\t\t\t\t\tct\_users\_bad     = parseInt( msg.bad );\n\t\t\t\t\tct\_unchecked     = ct\_users\_total - ct\_users\_checked - ct\_users\_bad;\n\t\t\t\t\tvar status\_string = String(ctUsersCheck.ct\_status\_string);\n\t\t\t\t\tstatus\_string = status\_string.printf(ct\_users\_checked, ct\_users\_spam, ct\_users\_bad);\n\t\t\t\t\tif(parseInt(ct\_users\_spam) > 0)\n\t\t\t\t\t\tstatus\_string += ctUsersCheck.ct\_status\_string\_warning;\n\t\t\t\t\tjQuery('#ct\_checking\_status').html(status\_string);\n\t\t\t\t\tjQuery('#ct\_error\_message').hide();\n\n\t\t\t\t\tvar offset = Number(getCookie('apbct\_check\_users\_offset')) + 100;\n\t\t\t\t\tvar ctSecure = location.protocol === 'https:' ? '; secure' : '';\n\t\t\t\t\tdocument.cookie = 'apbct\_check\_users\_offset' + \"=\" + offset + \"; path=/; samesite=lax\" + ctSecure;\n\t\t\t\t\t\n\t\t\t\t\tct\_send\_users();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n        error: function(jqXHR, textStatus, errorThrown) {\n\t\t\tif(check\_amount > 20){\n\t\t\t\tcheck\_amount -= 20;\n\t\t\t\tdocument.cookie = \"ct\_check\_users\_\_amount=\" + check\_amount + \"; path=/; samesite=lax\";\n\t\t\t}\n\t\t\tjQuery('#ct\_error\_message').show();\n\t\t\tjQuery('#cleantalk\_ajax\_error').html(textStatus);\n\t\t\tjQuery('#cleantalk\_js\_func').html('Check users');\n\t\t\tsetTimeout(ct\_send\_users(), 3000);\n        },\n        timeout: 25000\n\t});\n}\nfunction ct\_show\_users\_info(){\n\t\n\tif( ct\_working ){\n\t\t\n\t\tif(ct\_cooling\_down\_flag === true){\n\t\t\tjQuery('#ct\_cooling\_notice').html('Waiting for API to cool down. (About a minute)').show();\n\t\t\treturn;\t\t\t\n\t\t}else{\n\t\t\tjQuery('#ct\_cooling\_notice').hide();\n\t\t}\n\t\t\n\t\tif( ! ct\_users\_total ){\n\t\t\t\n\t\t\tvar data = {\n\t\t\t\t'action': 'ajax\_info\_users',\n\t\t\t\t'security': ct\_ajax\_nonce,\n\t\t\t\t'no\_cache': Math.random()\n\t\t\t};\n\t\t\t\n\t\t\tif( ct\_date\_from && ct\_date\_till ){\n\t\t\t\tdata['from'] = ct\_date\_from;\n\t\t\t\tdata['till'] = ct\_date\_till;\n\t\t\t}\n\t\t\t\n\t\t\tjQuery.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: data,\n\t\t\t\tsuccess: function(msg){\n\t\t\t\t\tmsg = jQuery.parseJSON(msg);\n\t\t\t\t\tjQuery('#ct\_checking\_status').html(msg.message);\n\t\t\t\t\tct\_users\_spam    = msg.spam;\n\t\t\t\t\tct\_users\_checked = msg.checked;\n\t\t\t\t\tct\_users\_bad     = msg.bad;\n\t\t\t\t},\n\t\t\t\terror: function (jqXHR, textStatus, errorThrown){\n\t\t\t\t\tjQuery('#ct\_error\_message').show();\n\t\t\t\t\tjQuery('#cleantalk\_ajax\_error').html(textStatus);\n\t\t\t\t\tjQuery('#cleantalk\_js\_func').html('Show users');\n\t\t\t\t\tsetTimeout(ct\_show\_users\_info(), 3000);\n\t\t\t\t},\n\t\t\t\ttimeout: 15000\n\t\t\t});\n\t\t}\n\t}\n}\n// Function to toggle dependences\nfunction ct\_toggle\_depended(obj, secondary){\n\n    secondary = secondary || null;\n\n\tvar depended = jQuery(obj.data('depended')),\n\t\tstate = obj.data('state');\n\t\t\n\tif(!state && !secondary){\n\t\tobj.data('state', true);\n\t\tdepended.removeProp('disabled');\n\t}else{\n\t\tobj.data('state', false);\n\t\tdepended.prop('disabled', true);\n\t\tdepended.removeProp('checked');\n\t\tif(depended.data('depended'))\n\t\t\tct\_toggle\_depended(depended, true);\n\t}\n}\n\n// Main function of checking\nfunction ct\_start\_check( continue\_check ){\n\n\tcontinue\_check = continue\_check || null;\n\n\tif(jQuery('#ct\_allow\_date\_range').is(':checked')){\n\n\t\tct\_date\_from = jQuery('#ct\_date\_range\_from').val();\n\t\tct\_date\_till = jQuery('#ct\_date\_range\_till').val();\n\n\t\tif(!(ct\_date\_from !== '' && ct\_date\_till !== '')){\n\t\t\talert(ctUsersCheck.ct\_specify\_date\_range);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif(jQuery('#ct\_accurate\_check').is(':checked')){\n\t\tct\_accurate\_check = true;\n\t}\n\n\t//\n\tif (\n\t\tjQuery('#ct\_accurate\_check').is(':checked') &&\n\t\t! jQuery('#ct\_allow\_date\_range').is(':checked')\n\t) {\n\t\talert(ctUsersCheck.ct\_select\_date\_range);\n\t\treturn;\n\t}\n\n\tjQuery('.ct\_to\_hide').hide();\n\tjQuery('#ct\_working\_message').show();\n\tjQuery('#ct\_preloader').show();\n\tjQuery('#ct\_pause').show();\n\n\tct\_working = true;\n\n\tif( continue\_check ){\n\t\tct\_show\_users\_info();\n\t\tct\_send\_users();\n\t} else {\n\t\tct\_clear\_users();\n\t}\n\n}\n\nfunction ct\_delete\_all\_users( e ){\n\n\tvar data = {\n\t\t'action': 'ajax\_delete\_all\_users',\n\t\t'security': ct\_ajax\_nonce,\n\t\t'no\_cache': Math.random()\n\t};\n\n\tjQuery('.' + e.target.id).addClass('disabled');\n\tjQuery('.spinner').css('visibility', 'visible');\n\tjQuery.ajax({\n\t\ttype: \"POST\",\n\t\turl: ajaxurl,\n\t\tdata: data,\n\t\tsuccess: function( msg ){\n\t\t\tif( msg > 0 ){\n\t\t\t\tjQuery('#cleantalk\_users\_left').html(msg);\n\t\t\t\tct\_delete\_all\_users( e, data );\n\t\t\t}else{\n\t\t\t\tjQuery('.' + e.target.id).removeClass('disabled');\n\t\t\t\tjQuery('.spinner').css('visibility', 'hidden');\n\t\t\t\tlocation.href='users.php?page=ct\_check\_users';\n\t\t\t}\n\t\t},\n\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\tjQuery('#ct\_error\_message').show();\n\t\t\tjQuery('#cleantalk\_ajax\_error').html(textStatus);\n\t\t\tjQuery('#cleantalk\_js\_func').html('All users deleteion');\n\t\t\tsetTimeout(ct\_delete\_all\_users( e ), 3000);\n\t\t},\n\t\ttimeout: 25000\n\t});\n}\n\njQuery(document).ready(function(){\n\n\t// Setting dependences\n\t\n\t// Prev check parameters\n\tif(ct\_prev\_accurate){\n\t\tjQuery(\"#ct\_accurate\_check\").prop('checked', true);\n\t}\n\tif(ct\_prev\_from){\n\t\tjQuery(\"#ct\_allow\_date\_range\").prop('checked', true).data('state', true);\n\t\tjQuery(\"#ct\_date\_range\_from\").removeProp('disabled').val(ct\_prev\_from);\n\t\tjQuery(\"#ct\_date\_range\_till\").removeProp('disabled').val(ct\_prev\_till);\n\t}\n\t\n\t// Toggle dependences\n\tjQuery(\"#ct\_allow\_date\_range\").on('change', function(){\n\t\tdocument.cookie = 'ct\_users\_dates\_from='+ jQuery('#ct\_date\_range\_from').val() +'; path=/; samesite=lax';\n\t\tdocument.cookie = 'ct\_users\_dates\_till='+ jQuery('#ct\_date\_range\_till').val() +'; path=/; samesite=lax';\n\t\tif( this.checked ) {\n\t\t\tdocument.cookie = 'ct\_users\_dates\_allowed=1; path=/; samesite=lax';\n\t\t\tjQuery('.ct\_date').prop('checked', true).attr('disabled',false);\n\t\t} else {\n\t\t\tdocument.cookie = 'ct\_users\_dates\_allowed=0; path=/; samesite=lax';\n\t\t\tjQuery('.ct\_date').prop('disabled', true).attr('disabled',true);\n\t\t}\n\t});\n\n\tjQuery.datepicker.setDefaults(jQuery.datepicker.regional['en']);\n\tvar dates = jQuery('#ct\_date\_range\_from, #ct\_date\_range\_till').datepicker(\n\t\t{\n\t\t\tdateFormat: 'M d yy',\n\t\t\tmaxDate:\"+0D\",\n\t\t\tchangeMonth:true,\n\t\t\tchangeYear:true,\n\t\t\tshowAnim: 'slideDown',\n\t\t\tonSelect: function(selectedDate){\n\t\t\tvar option = this.id == \"ct\_date\_range\_from\" ? \"minDate\" : \"maxDate\",\n\t\t\t\tinstance = jQuery( this ).data( \"datepicker\" ),\n\t\t\t\tdate = jQuery.datepicker.parseDate(\n\t\t\t\t\tinstance.settings.dateFormat || jQuery.datepicker.\_defaults.dateFormat,\n\t\t\t\t\tselectedDate, instance.settings);\n\t\t\t\tdates.not(this).datepicker(\"option\", option, date);\n\t\t\t\tdocument.cookie = 'ct\_users\_dates\_from='+ jQuery('#ct\_date\_range\_from').val() +'; path=/; samesite=lax';\n\t\t\t\tdocument.cookie = 'ct\_users\_dates\_till='+ jQuery('#ct\_date\_range\_till').val() +'; path=/; samesite=lax';\n\t\t\t}\n\t\t}\n\t);\n\t\n\t// Check users\n\tjQuery(\"#ct\_check\_spam\_button\").click(function(){\n\t\tdocument.cookie = 'ct\_paused\_users\_check=0; path=/; samesite=lax';\n\t\tct\_pause = false;\n\n\t\t//\n\n\n\t\tct\_start\_check(false);\n\t});\n\tjQuery(\"#ct\_proceed\_check\_button\").click(function(){\n\t\tct\_pause = false;\n\t\tct\_start\_check(true);\n\t});\n\t\n\t// Pause the check\n\tjQuery('#ct\_pause').on('click', function(){\n\t\tct\_pause = true;\n\t\tvar ct\_check = {\n\t\t\t'accurate': ct\_accurate\_check,\n\t\t\t'from'    : ct\_date\_from,\n\t\t\t'till'    : ct\_date\_till\n\t\t};\n\t\tdocument.cookie = 'ct\_paused\_users\_check=' + JSON.stringify(ct\_check) + '; path=/; samesite=lax';\n\t});\n\t\t\n\t//Approve button\n\tjQuery(\".cleantalk\_delete\_from\_list\_button\").click(function(){\n\t\tct\_id = jQuery(this).attr(\"data-id\");\n\t\t\n\t\t// Approving\n\t\tvar data = {\n\t\t\t'action': 'ajax\_ct\_approve\_user',\n\t\t\t'security': ct\_ajax\_nonce,\n\t\t\t'id': ct\_id,\n\t\t\t'no\_cache': Math.random()\n\t\t};\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: ajaxurl,\n\t\t\tdata: data,\n\t\t\tsuccess: function(msg){\n\t\t\t\tjQuery(\"#comment-\"+ct\_id).fadeOut('slow', function(){\n\t\t\t\t\tjQuery(\"#comment-\"+ct\_id).remove();\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t\t\n\t\t// Positive feedback\n\t\tvar data = {\n\t\t\t'action': 'ct\_feedback\_user',\n\t\t\t'security': ct\_ajax\_nonce,\n\t\t\t'user\_id': ct\_id,\n\t\t\t'status': 'approve',\n\t\t\t'no\_cache': Math.random()\n\t\t};\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: ajaxurl,\n\t\t\tdata: data,\n\t\t\tsuccess: function(msg){\n\t\t\t\tif(msg == 1){\n\t\t\t\t\t// Success\n\t\t\t\t}\n\t\t\t\tif(msg == 0){\n\t\t\t\t\t// Error occurred\n\t\t\t\t}\n\t\t\t\tif(msg == 'no\_hash'){\n\t\t\t\t\t// No hash\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t\t\n\t\t\t},\n\t\t\ttimeout: 5000\n\t\t});\n\t\t\n\t});\n\t\n\t// Request to Download CSV file.\n\tjQuery(\".ct\_get\_csv\_file\").click(function( e ){\n\t\tvar data = {\n\t\t\t'action': 'ajax\_ct\_get\_csv\_file',\n\t\t\t'security': ct\_ajax\_nonce,\n\t\t\t'filename': ctUsersCheck.ct\_csv\_filename,\n\t\t\t'no\_cache': Math.random()\n\t\t};\n\t\tjQuery('.' + e.target.id).addClass('disabled');\n\t\tjQuery('.spinner').css('visibility', 'visible');\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: ajaxurl,\n\t\t\tdata: data,\n\t\t\tsuccess: function(msg){\n\t\t\t\tif( parseInt(msg) === 0 ) {\n\t\t\t\t\talert(ctUsersCheck.ct\_bad\_csv);\n\t\t\t\t} else {\n\t\t\t\t\tvar url = URL.createObjectURL(new Blob([msg]));\n\n\t\t\t\t\tvar dummy = document.createElement('a');\n\t\t\t\t\tdummy.href = url;\n\t\t\t\t\tdummy.download = ctUsersCheck.ct\_csv\_filename + '.csv';\n\n\t\t\t\t\tdocument.body.appendChild(dummy);\n\t\t\t\t\tdummy.click();\n\t\t\t\t}\n\t\t\t\tjQuery('.' + e.target.id).removeClass('disabled');\n\t\t\t\tjQuery('.spinner').css('visibility', 'hidden');\n\t\t\t}\n\t\t});\n\t});\n\n\t// Delete inserted users\n\tjQuery(\".ct\_insert\_users\").click(function( e ){\n\t\tct\_insert\_users();\n\t});\n\n\t// Insert users\n\tjQuery(\".ct\_insert\_users\_\_delete\").click(function( e ){\n\t\tct\_insert\_users( true );\n\t});\n\n\t// Delete all spam users\n\tjQuery(\".ct\_delete\_all\_users\").click(function( e ){\n\n\t\tif ( ! confirm( ctUsersCheck.ct\_confirm\_deletion\_all ) )\n\t\t\treturn false;\n\n\t\tct\_delete\_all\_users( e );\n\n\t});\n\n\tfunction ct\_insert\_users(delete\_accounts){\n\n\t\tdelete\_accounts = delete\_accounts || null;\n\n\t\tvar data = {\n\t\t\t'action': 'ajax\_insert\_users',\n\t\t\t'security': ct\_ajax\_nonce,\n\t\t\t'no\_cache': Math.random()\n\t\t};\n\n\t\tif(delete\_accounts)\n\t\t\tdata['delete'] = true;\n\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: ajaxurl,\n\t\t\tdata: data,\n\t\t\tsuccess: function(msg){\n\t\t\t\tif(delete\_accounts)\n\t\t\t\t\talert('Deleted ' + msg + ' users');\n\t\t\t\telse\n\t\t\t\t\talert('Inserted ' + msg + ' users');\n\t\t\t}\n\t\t});\n\t}\n\n\n\t/\*\*\n\t \* Checked ct\_accurate\_check\n\t \*/\n\tjQuery('#ct\_accurate\_check').change(function () {\n\t\tif(this.checked) {\n\t\t\tjQuery('#ct\_allow\_date\_range').prop('checked', true);\n\t\t\tjQuery('.ct\_date').prop('checked', true).attr('disabled',false);\n\t\t}\n\t});\n});\n\n/\*\*\n \* Get cookie by name\n \* @param name\n \* @returns {string|undefined}\n \*/\nfunction getCookie(name) {\n\tlet matches = document.cookie.match(new RegExp(\n\t\t\"(?:^|; )\" + name.replace(/([\\.$?\*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]\*)\"\n\t));\n\treturn matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\n// Binds the bulk action events to the submit buttons.\n// This code has been copied from wordpress core js file wp-admin/js/media.js:184\njQuery( '#doaction' ).on( 'click', function( event ) {\n\t/\*\n     \* Handle the bulk action based on its value.\n     \*/\n\tjQuery( 'select[name=\"action\"]' ).each( function() {\n\t\tvar optionValue = jQuery( this ).val();\n\t\tif ( 'delete' === optionValue ) {\n\t\t\tif ( ! showNotice.warn() ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t});\n});"],"names":["String","prototype","printf","arg","formatted","this","arguments","before\_formatted","substring","indexOf","after\_formatted","length","ct\_working","document","cookie","ct\_new\_check","ct\_cooling\_down\_flag","ct\_close\_animate","ct\_accurate\_check","ct\_pause","ct\_prev\_accurate","ctUsersCheck","ct\_prev\_from","ct\_prev\_till","ct\_cool\_down\_time","ct\_requests\_counter","ct\_max\_requests","ct\_ajax\_nonce","ct\_users\_total","ct\_users\_checked","ct\_users\_spam","ct\_users\_bad","ct\_unchecked","ct\_date\_from","ct\_date\_till","apbct\_cookie\_\_get","names","prefixes","split","forEach","item","i","arr","curr","trim","name","all","prefix","apbct\_get\_cookie","animate\_comment","to","id","jQuery","fadeTo","ct\_clear\_users","from","till","ctSecure","is","val","location","protocol","data","action","security","no\_cache","Math","random","ajax","type","url","ajaxurl","success","msg","ct\_show\_users\_info","ct\_send\_users","ct\_cooling\_down\_toggle","hide","let","new\_href","href","check\_amount","setTimeout","new\_check","unchecked","amount","offset","Number","getCookie","parseJSON","parseInt","error","confirm","error\_message","end","checked","spam","bad","status\_string","ct\_status\_string","ct\_status\_string\_warning","html","jqXHR","textStatus","errorThrown","show","timeout","message","ct\_toggle\_depended","obj","secondary","depended","prop","removeProp","ct\_start\_check","continue\_check","alert","ct\_specify\_date\_range","ct\_select\_date\_range","ct\_delete\_all\_users","e","target","addClass","css","removeClass","matches","match","RegExp","replace","decodeURIComponent","undefined","ready","on","attr","datepicker","setDefaults","regional","dates","dateFormat","maxDate","changeMonth","changeYear","showAnim","onSelect","selectedDate","option","instance","date","parseDate","settings","\_defaults","not","ct\_insert\_users","delete\_accounts","click","ct\_check","accurate","JSON","stringify","ct\_id","fadeOut","remove","user\_id","status","filename","ct\_csv\_filename","dummy","ct\_bad\_csv","URL","createObjectURL","Blob","createElement","download","body","appendChild","ct\_confirm\_deletion\_all","change","event","each","showNotice","warn","preventDefault"],"mappings":"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~~,WAAWC,KAAK,GACtBH,EAAMI,eAAe,CAGxB,CAAC,CACF,CAAC"} |
  |  | 1 | {"version":3,"file":"cleantalk-users-checkspam.min.js","sources":["cleantalk-users-checkspam.js"],"sourcesContent":["// Printf for JS\nString.prototype.printf = function(){\n    var formatted = this;\n    for( var arg in arguments ) {\n\t\tvar before\_formatted = formatted.substring(0, formatted.indexOf(\"%s\", 0));\n\t\tvar after\_formatted  = formatted.substring(formatted.indexOf(\"%s\", 0)+2, formatted.length);\n\t\tformatted = before\_formatted + arguments[arg] + after\_formatted;\n    }\n    return formatted;\n};\n\n// Set deafult amount to check by request.\ndocument.cookie = \"ct\_check\_users\_\_amount=\" + 100 + \"; path=/; samesite=lax\";\n\n// Flags\nvar ct\_working = false,\n\tct\_new\_check = true,\n\tct\_cooling\_down\_flag = false,\n\tct\_close\_animate = true,\n\tct\_accurate\_check = false,\n\tct\_pause = false,\n\tct\_prev\_accurate = ctUsersCheck.ct\_prev\_accurate,\n\tct\_prev\_from     = ctUsersCheck.ct\_prev\_from,\n\tct\_prev\_till     = ctUsersCheck.ct\_prev\_till;\n// Settings\nvar ct\_cool\_down\_time = 90000,\n\tct\_requests\_counter = 0,\n\tct\_max\_requests = 60;\n// Variables\nvar ct\_ajax\_nonce = ctUsersCheck.ct\_ajax\_nonce,\n\tct\_users\_total = 0,\n\tct\_users\_checked = 0,\n\tct\_users\_spam = 0,\n\tct\_users\_bad = 0,\n\tct\_unchecked = 'unset',\n\tct\_date\_from = 0,\n\tct\_date\_till = 0;\n\n/\* Function: Reuturns cookie with prefix \*/\nfunction apbct\_cookie\_\_get(names, prefixes){\n\tvar cookie = {};\n\tnames = names || null;\n\tif(typeof names == 'string') names = names.split();\n\tprefixes = prefixes || ['apbct\_', 'ct\_'];\n\tif(prefixes === 'none')          prefixes = null;\n\tif(typeof prefixes == 'string') prefixes = prefixes.split();\n\tdocument.cookie.split(';').forEach(function(item, i, arr){\n\t\tvar curr = item.trim().split('=');\n\t\t// Detect by full cookie name\n\t\tif(names){\n\t\t\tnames.forEach(function(name, i, all){\n\t\t\t\tif(curr[0] === name)\n\t\t\t\t\tcookie[curr[0]] = (curr[1]);\n\t\t\t});\n\t\t}\n\t\t// Detect by name prefix\n\t\tif(prefixes){\n\t\t\tprefixes.forEach(function(prefix, i, all){\n\t\t\t\tif(curr[0].indexOf(prefix) === 0)\n\t\t\t\t\tcookie[curr[0]] = (curr[1]);\n\t\t\t});\n\t\t}\n\t});\n\treturn cookie;\n}\n\nfunction apbct\_get\_cookie( name ){\n\tvar cookie = apbct\_cookie\_\_get( name, name );\n\tif(typeof cookie === 'object' && typeof cookie[name] != 'undefined'){\n\t\treturn cookie[name];\n\t}else\n\t\treturn null;\n}\n\nfunction animate\_comment(to,id){\n\tif(ct\_close\_animate){\n\t\tif(to === 0.3){\n\t\t\tjQuery('#comment-'+id).fadeTo(200,to,function(){\n\t\t\t\tanimate\_comment(1,id)\n\t\t\t});\n\t\t}else{\n\t\t\tjQuery('#comment-'+id).fadeTo(200,to,function(){\n\t\t\t\tanimate\_comment(0.3,id)\n\t\t\t});\n\t\t}\n\t}else{\n\t\tct\_close\_animate=true;\n\t}\n}\n\nfunction ct\_clear\_users(){\n\n\tvar from = 0, till = 0;\n\tif(jQuery('#ct\_allow\_date\_range').is(':checked')) {\n\t\tfrom = jQuery('#ct\_date\_range\_from').val();\n\t\ttill = jQuery('#ct\_date\_range\_till').val();\n\t}\n\n\tvar ctSecure = location.protocol === 'https:' ? '; secure' : '';\n\tdocument.cookie = 'apbct\_check\_users\_offset' + \"=\" + 0 + \"; path=/; samesite=lax\" + ctSecure;\n\n\tvar data = {\n\t\t'action'   : 'ajax\_clear\_users',\n\t\t'security' : ct\_ajax\_nonce,\n\t\t'from'     : from,\n\t\t'till'     : till,\n\t\t'no\_cache': Math.random()\n\t};\n\n\tjQuery.ajax({\n\t\ttype: \"POST\",\n\t\turl: ajaxurl,\n\t\tdata: data,\n\t\tsuccess: function(msg){\n\t\t\tct\_show\_users\_info();\n\t\t\tct\_send\_users();\n\t\t}\n\t});\n\n}\n\n//Continues the check after cooldown time\n//Called by ct\_send\_users();\nfunction ct\_cooling\_down\_toggle(){\n\tct\_cooling\_down\_flag = false;\n\tct\_send\_users();\n\tct\_show\_users\_info();\n}\n\nfunction ct\_send\_users(){\n\n\tif(ct\_cooling\_down\_flag === true)\n\t\treturn;\n\tif (ct\_pause === true) {\n\t\tct\_working=false;\n\t\tjQuery('#ct\_working\_message').hide();\n\t\tlet new\_href = 'users.php?page=ct\_check\_users&ct\_worked=1';\n\t\tif(ct\_date\_from !== 0 && ct\_date\_till !== 0)\n\t\t\tnew\_href+='&from='+ct\_date\_from+'&till='+ct\_date\_till;\n\t\tlocation.href = new\_href;\n\t\treturn;\n\t}\n\n\tif(ct\_requests\_counter >= ct\_max\_requests){\n\t\tsetTimeout(ct\_cooling\_down\_toggle, ct\_cool\_down\_time);\n\t\tct\_requests\_counter = 0;\n\t\tct\_cooling\_down\_flag = true;\n\t\treturn;\n\t}else{\n\t\tct\_requests\_counter++;\n\t}\n\n\tvar check\_amount = apbct\_get\_cookie('ct\_check\_users\_\_amount');\n\n\tvar data = {\n\t\taction: 'ajax\_check\_users',\n\t\tsecurity: ct\_ajax\_nonce,\n\t\tnew\_check: ct\_new\_check,\n\t\tunchecked: ct\_unchecked,\n\t\tamount: check\_amount,\n\t\t'no\_cache': Math.random(),\n\t\t'offset' : Number(getCookie('apbct\_check\_users\_offset'))\n\t};\n\n\tif(ct\_accurate\_check)\n\t\tdata['accurate\_check'] = true;\n\n\tif(ct\_date\_from && ct\_date\_till){\n\t\tdata['from'] = ct\_date\_from;\n\t\tdata['till'] = ct\_date\_till;\n\t}\n\n\tjQuery.ajax({\n\t\ttype: \"POST\",\n\t\turl: ajaxurl,\n\t\tdata: data,\n\t\tsuccess: function(msg){\n\n\t\t\tmsg = jQuery.parseJSON(msg);\n\n\t\t\tif(parseInt(msg.error)){\n\t\t\t\tct\_working=false;\n\t\t\t\tif(!confirm(msg.error\_message+\". Do you want to proceed?\")){\n\t\t\t\t\tvar new\_href = 'users.php?page=ct\_check\_users';\n\t\t\t\t\tif(ct\_date\_from != 0 && ct\_date\_till != 0)\n\t\t\t\t\t\tnew\_href+='&from='+ct\_date\_from+'&till='+ct\_date\_till;\n\t\t\t\t\tlocation.href = new\_href;\n\t\t\t\t}else\n\t\t\t\t\tct\_send\_users();\n\t\t\t}else{\n\t\t\t\tct\_new\_check = false;\n\t\t\t\tif(parseInt(msg.end) == 1){\n\t\t\t\t\tif(parseInt(msg.end) == 1)\n\t\t\t\t\t\tdocument.cookie = 'ct\_paused\_users\_check=0; path=/; samesite=lax';\n\t\t\t\t\tct\_working=false;\n\t\t\t\t\tjQuery('#ct\_working\_message').hide();\n\t\t\t\t\tvar new\_href = 'users.php?page=ct\_check\_users&ct\_worked=1';\n\t\t\t\t\tif(ct\_date\_from != 0 && ct\_date\_till != 0)\n\t\t\t\t\t\tnew\_href+='&from='+ct\_date\_from+'&till='+ct\_date\_till;\n\t\t\t\t\tlocation.href = new\_href;\n\t\t\t\t}else if(parseInt(msg.end) == 0){\n\t\t\t\t\tct\_users\_checked = parseInt( ct\_users\_checked ) + parseInt( msg.checked );\n\t\t\t\t\tct\_users\_spam    = parseInt( ct\_users\_spam ) + parseInt (msg.spam );\n\t\t\t\t\tct\_users\_bad     = parseInt( msg.bad );\n\t\t\t\t\tct\_unchecked     = ct\_users\_total - ct\_users\_checked - ct\_users\_bad;\n\t\t\t\t\tvar status\_string = String(ctUsersCheck.ct\_status\_string);\n\t\t\t\t\tstatus\_string = status\_string.printf(ct\_users\_checked, ct\_users\_spam, ct\_users\_bad);\n\t\t\t\t\tif(parseInt(ct\_users\_spam) > 0)\n\t\t\t\t\t\tstatus\_string += ctUsersCheck.ct\_status\_string\_warning;\n\t\t\t\t\tjQuery('#ct\_checking\_status').html(status\_string);\n\t\t\t\t\tjQuery('#ct\_error\_message').hide();\n\n\t\t\t\t\tvar offset = Number(getCookie('apbct\_check\_users\_offset')) + 100;\n\t\t\t\t\tvar ctSecure = location.protocol === 'https:' ? '; secure' : '';\n\t\t\t\t\tdocument.cookie = 'apbct\_check\_users\_offset' + \"=\" + offset + \"; path=/; samesite=lax\" + ctSecure;\n\n\t\t\t\t\tct\_send\_users();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n        error: function(jqXHR, textStatus, errorThrown) {\n\t\t\tif(check\_amount > 20){\n\t\t\t\tcheck\_amount -= 20;\n\t\t\t\tdocument.cookie = \"ct\_check\_users\_\_amount=\" + check\_amount + \"; path=/; samesite=lax\";\n\t\t\t}\n\t\t\tjQuery('#ct\_error\_message').show();\n\t\t\tjQuery('#cleantalk\_ajax\_error').html(textStatus);\n\t\t\tjQuery('#cleantalk\_js\_func').html('Check users');\n\t\t\tsetTimeout(ct\_send\_users(), 3000);\n        },\n        timeout: 25000\n\t});\n}\nfunction ct\_show\_users\_info(){\n\n\tif( ct\_working ){\n\n\t\tif(ct\_cooling\_down\_flag === true){\n\t\t\tjQuery('#ct\_cooling\_notice').html('Waiting for API to cool down. (About a minute)').show();\n\t\t\treturn;\n\t\t}else{\n\t\t\tjQuery('#ct\_cooling\_notice').hide();\n\t\t}\n\n\t\tif( ! ct\_users\_total ){\n\n\t\t\tvar data = {\n\t\t\t\t'action': 'ajax\_info\_users',\n\t\t\t\t'security': ct\_ajax\_nonce,\n\t\t\t\t'no\_cache': Math.random()\n\t\t\t};\n\n\t\t\tif( ct\_date\_from && ct\_date\_till ){\n\t\t\t\tdata['from'] = ct\_date\_from;\n\t\t\t\tdata['till'] = ct\_date\_till;\n\t\t\t}\n\n\t\t\tjQuery.ajax({\n\t\t\t\ttype: \"POST\",\n\t\t\t\turl: ajaxurl,\n\t\t\t\tdata: data,\n\t\t\t\tsuccess: function(msg){\n\t\t\t\t\tmsg = jQuery.parseJSON(msg);\n\t\t\t\t\tjQuery('#ct\_checking\_status').html(msg.message);\n\t\t\t\t\tct\_users\_spam    = msg.spam;\n\t\t\t\t\tct\_users\_checked = msg.checked;\n\t\t\t\t\tct\_users\_bad     = msg.bad;\n\t\t\t\t},\n\t\t\t\terror: function (jqXHR, textStatus, errorThrown){\n\t\t\t\t\tjQuery('#ct\_error\_message').show();\n\t\t\t\t\tjQuery('#cleantalk\_ajax\_error').html(textStatus);\n\t\t\t\t\tjQuery('#cleantalk\_js\_func').html('Show users');\n\t\t\t\t\tsetTimeout(ct\_show\_users\_info(), 3000);\n\t\t\t\t},\n\t\t\t\ttimeout: 15000\n\t\t\t});\n\t\t}\n\t}\n}\n// Function to toggle dependences\nfunction ct\_toggle\_depended(obj, secondary){\n\n    secondary = secondary || null;\n\n\tvar depended = jQuery(obj.data('depended')),\n\t\tstate = obj.data('state');\n\n\tif(!state && !secondary){\n\t\tobj.data('state', true);\n\t\tdepended.removeProp('disabled');\n\t}else{\n\t\tobj.data('state', false);\n\t\tdepended.prop('disabled', true);\n\t\tdepended.removeProp('checked');\n\t\tif(depended.data('depended'))\n\t\t\tct\_toggle\_depended(depended, true);\n\t}\n}\n\n// Main function of checking\nfunction ct\_start\_check( continue\_check ){\n\n\tcontinue\_check = continue\_check || null;\n\n\tif(jQuery('#ct\_allow\_date\_range').is(':checked')){\n\n\t\tct\_date\_from = jQuery('#ct\_date\_range\_from').val();\n\t\tct\_date\_till = jQuery('#ct\_date\_range\_till').val();\n\n\t\tif(!(ct\_date\_from !== '' && ct\_date\_till !== '')){\n\t\t\talert(ctUsersCheck.ct\_specify\_date\_range);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif(jQuery('#ct\_accurate\_check').is(':checked')){\n\t\tct\_accurate\_check = true;\n\t}\n\n\t//\n\tif (\n\t\tjQuery('#ct\_accurate\_check').is(':checked') &&\n\t\t! jQuery('#ct\_allow\_date\_range').is(':checked')\n\t) {\n\t\talert(ctUsersCheck.ct\_select\_date\_range);\n\t\treturn;\n\t}\n\n\tjQuery('.ct\_to\_hide').hide();\n\tjQuery('#ct\_working\_message').show();\n\tjQuery('#ct\_preloader').show();\n\tjQuery('#ct\_pause').show();\n\n\tct\_working = true;\n\n\tif( continue\_check ){\n\t\tct\_show\_users\_info();\n\t\tct\_send\_users();\n\t} else {\n\t\tct\_clear\_users();\n\t}\n\n}\n\nfunction ct\_delete\_all\_users( e ){\n\n\tvar data = {\n\t\t'action': 'ajax\_delete\_all\_users',\n\t\t'security': ct\_ajax\_nonce,\n\t\t'no\_cache': Math.random()\n\t};\n\n\tjQuery('.' + e.target.id).addClass('disabled');\n\tjQuery('.spinner').css('visibility', 'visible');\n\tjQuery.ajax({\n\t\ttype: \"POST\",\n\t\turl: ajaxurl,\n\t\tdata: data,\n\t\tsuccess: function( msg ){\n\t\t\tif( msg > 0 ){\n\t\t\t\tjQuery('#cleantalk\_users\_left').html(msg);\n\t\t\t\tct\_delete\_all\_users( e, data );\n\t\t\t}else{\n\t\t\t\tjQuery('.' + e.target.id).removeClass('disabled');\n\t\t\t\tjQuery('.spinner').css('visibility', 'hidden');\n\t\t\t\tlocation.href='users.php?page=ct\_check\_users';\n\t\t\t}\n\t\t},\n\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\tjQuery('#ct\_error\_message').show();\n\t\t\tjQuery('#cleantalk\_ajax\_error').html(textStatus);\n\t\t\tjQuery('#cleantalk\_js\_func').html('All users deleteion');\n\t\t\tsetTimeout(ct\_delete\_all\_users( e ), 3000);\n\t\t},\n\t\ttimeout: 25000\n\t});\n}\n\njQuery(document).ready(function(){\n\n\t// Setting dependences\n\n\t// Prev check parameters\n\tif(ct\_prev\_accurate){\n\t\tjQuery(\"#ct\_accurate\_check\").prop('checked', true);\n\t}\n\tif(ct\_prev\_from){\n\t\tjQuery(\"#ct\_allow\_date\_range\").prop('checked', true).data('state', true);\n\t\tjQuery(\"#ct\_date\_range\_from\").removeProp('disabled').val(ct\_prev\_from);\n\t\tjQuery(\"#ct\_date\_range\_till\").removeProp('disabled').val(ct\_prev\_till);\n\t}\n\n\t// Toggle dependences\n\tjQuery(\"#ct\_allow\_date\_range\").on('change', function(){\n\t\tdocument.cookie = 'ct\_users\_dates\_from='+ jQuery('#ct\_date\_range\_from').val() +'; path=/; samesite=lax';\n\t\tdocument.cookie = 'ct\_users\_dates\_till='+ jQuery('#ct\_date\_range\_till').val() +'; path=/; samesite=lax';\n\t\tif( this.checked ) {\n\t\t\tdocument.cookie = 'ct\_users\_dates\_allowed=1; path=/; samesite=lax';\n\t\t\tjQuery('.ct\_date').prop('checked', true).attr('disabled',false);\n\t\t} else {\n\t\t\tdocument.cookie = 'ct\_users\_dates\_allowed=0; path=/; samesite=lax';\n\t\t\tjQuery('.ct\_date').prop('disabled', true).attr('disabled',true);\n\t\t}\n\t});\n\n\tjQuery.datepicker.setDefaults(jQuery.datepicker.regional['en']);\n\tvar dates = jQuery('#ct\_date\_range\_from, #ct\_date\_range\_till').datepicker(\n\t\t{\n\t\t\tdateFormat: 'M d yy',\n\t\t\tmaxDate:\"+0D\",\n\t\t\tchangeMonth:true,\n\t\t\tchangeYear:true,\n\t\t\tshowAnim: 'slideDown',\n\t\t\tonSelect: function(selectedDate){\n\t\t\tvar option = this.id == \"ct\_date\_range\_from\" ? \"minDate\" : \"maxDate\",\n\t\t\t\tinstance = jQuery( this ).data( \"datepicker\" ),\n\t\t\t\tdate = jQuery.datepicker.parseDate(\n\t\t\t\t\tinstance.settings.dateFormat || jQuery.datepicker.\_defaults.dateFormat,\n\t\t\t\t\tselectedDate, instance.settings);\n\t\t\t\tdates.not(this).datepicker(\"option\", option, date);\n\t\t\t\tdocument.cookie = 'ct\_users\_dates\_from='+ jQuery('#ct\_date\_range\_from').val() +'; path=/; samesite=lax';\n\t\t\t\tdocument.cookie = 'ct\_users\_dates\_till='+ jQuery('#ct\_date\_range\_till').val() +'; path=/; samesite=lax';\n\t\t\t}\n\t\t}\n\t);\n\n\t// Check users\n\tjQuery(\"#ct\_check\_spam\_button\").click(function(){\n\t\tdocument.cookie = 'ct\_paused\_users\_check=0; path=/; samesite=lax';\n\t\tct\_pause = false;\n\n\t\t//\n\n\n\t\tct\_start\_check(false);\n\t});\n\tjQuery(\"#ct\_proceed\_check\_button\").click(function(){\n\t\tct\_pause = false;\n\t\tct\_start\_check(true);\n\t});\n\n\t// Pause the check\n\tjQuery('#ct\_pause').on('click', function(){\n\t\tct\_pause = true;\n\t\tvar ct\_check = {\n\t\t\t'accurate': ct\_accurate\_check,\n\t\t\t'from'    : ct\_date\_from,\n\t\t\t'till'    : ct\_date\_till\n\t\t};\n\t\tdocument.cookie = 'ct\_paused\_users\_check=' + JSON.stringify(ct\_check) + '; path=/; samesite=lax';\n\t});\n\n\t//Approve button\n\tjQuery(\".cleantalk\_delete\_from\_list\_button\").click(function(){\n\t\tct\_id = jQuery(this).attr(\"data-id\");\n\n\t\t// Approving\n\t\tvar data = {\n\t\t\t'action': 'ajax\_ct\_approve\_user',\n\t\t\t'security': ct\_ajax\_nonce,\n\t\t\t'id': ct\_id,\n\t\t\t'no\_cache': Math.random()\n\t\t};\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: ajaxurl,\n\t\t\tdata: data,\n\t\t\tsuccess: function(msg){\n\t\t\t\tjQuery(\"#comment-\"+ct\_id).fadeOut('slow', function(){\n\t\t\t\t\tjQuery(\"#comment-\"+ct\_id).remove();\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\n\t\t// Positive feedback\n\t\tvar data = {\n\t\t\t'action': 'ct\_feedback\_user',\n\t\t\t'security': ct\_ajax\_nonce,\n\t\t\t'user\_id': ct\_id,\n\t\t\t'status': 'approve',\n\t\t\t'no\_cache': Math.random()\n\t\t};\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: ajaxurl,\n\t\t\tdata: data,\n\t\t\tsuccess: function(msg){\n\t\t\t\tif(msg == 1){\n\t\t\t\t\t// Success\n\t\t\t\t}\n\t\t\t\tif(msg == 0){\n\t\t\t\t\t// Error occurred\n\t\t\t\t}\n\t\t\t\tif(msg == 'no\_hash'){\n\t\t\t\t\t// No hash\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\n\t\t\t},\n\t\t\ttimeout: 5000\n\t\t});\n\n\t});\n\n\t// Request to Download CSV file.\n\tjQuery(\".ct\_get\_csv\_file\").click(function( e ){\n\t\tvar data = {\n\t\t\t'action': 'ajax\_ct\_get\_csv\_file',\n\t\t\t'security': ct\_ajax\_nonce,\n\t\t\t'filename': ctUsersCheck.ct\_csv\_filename,\n\t\t\t'no\_cache': Math.random()\n\t\t};\n\t\tjQuery('.' + e.target.id).addClass('disabled');\n\t\tjQuery('.spinner').css('visibility', 'visible');\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: ajaxurl,\n\t\t\tdata: data,\n\t\t\tsuccess: function(msg){\n\t\t\t\tif( parseInt(msg) === 0 ) {\n\t\t\t\t\talert(ctUsersCheck.ct\_bad\_csv);\n\t\t\t\t} else {\n\t\t\t\t\tvar url = URL.createObjectURL(new Blob([msg]));\n\n\t\t\t\t\tvar dummy = document.createElement('a');\n\t\t\t\t\tdummy.href = url;\n\t\t\t\t\tdummy.download = ctUsersCheck.ct\_csv\_filename + '.csv';\n\n\t\t\t\t\tdocument.body.appendChild(dummy);\n\t\t\t\t\tdummy.click();\n\t\t\t\t}\n\t\t\t\tjQuery('.' + e.target.id).removeClass('disabled');\n\t\t\t\tjQuery('.spinner').css('visibility', 'hidden');\n\t\t\t}\n\t\t});\n\t});\n\n\t// Delete inserted users\n\tjQuery(\".ct\_insert\_users\").click(function( e ){\n\t\tct\_insert\_users();\n\t});\n\n\t// Insert users\n\tjQuery(\".ct\_insert\_users\_\_delete\").click(function( e ){\n\t\tct\_insert\_users( true );\n\t});\n\n\t// Delete all spam users\n\tjQuery(\".ct\_delete\_all\_users\").click(function( e ){\n\n\t\tif ( ! confirm( ctUsersCheck.ct\_confirm\_deletion\_all ) )\n\t\t\treturn false;\n\n\t\tct\_delete\_all\_users( e );\n\n\t});\n\n\tfunction ct\_insert\_users(delete\_accounts){\n\n\t\tdelete\_accounts = delete\_accounts || null;\n\n\t\tvar data = {\n\t\t\t'action': 'ajax\_insert\_users',\n\t\t\t'security': ct\_ajax\_nonce,\n\t\t\t'no\_cache': Math.random()\n\t\t};\n\n\t\tif(delete\_accounts)\n\t\t\tdata['delete'] = true;\n\n\t\tlet waitingPopup = document.createElement('div');\n\t\twaitingPopup.setAttribute('class', 'apbct-popup');\n\t\twaitingPopup.setAttribute('id', 'apbct\_popup');\n\t\twaitingPopup.setAttribute('style', 'font-size: 20px');\n\t\twaitingPopup.innerText = 'Wait for users handling!..'\n\t\tdocument.body.append(waitingPopup);\n\t\tdocument.body.classList.add('apbct-popup-fade');\n\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: ajaxurl,\n\t\t\tdata: data,\n\t\t\tsuccess: function(msg){\n\t\t\t\tif(delete\_accounts)\n\t\t\t\t\talert('Deleted ' + msg + ' users');\n\t\t\t\telse\n\t\t\t\t\talert('Inserted ' + msg + ' users');\n\t\t\t\tjQuery('#apbct\_popup')[0].remove()\n\t\t\t\tdocument.body.classList.remove('apbct-popup-fade');\n\t\t\t\twindow.location.reload();\n\t\t\t}\n\t\t});\n\t}\n\n\n\t/\*\*\n\t \* Checked ct\_accurate\_check\n\t \*/\n\tjQuery('#ct\_accurate\_check').change(function () {\n\t\tif(this.checked) {\n\t\t\tjQuery('#ct\_allow\_date\_range').prop('checked', true);\n\t\t\tjQuery('.ct\_date').prop('checked', true).attr('disabled',false);\n\t\t}\n\t});\n});\n\n/\*\*\n \* Get cookie by name\n \* @param name\n \* @returns {string|undefined}\n \*/\nfunction getCookie(name) {\n\tlet matches = document.cookie.match(new RegExp(\n\t\t\"(?:^|; )\" + name.replace(/([\\.$?\*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]\*)\"\n\t));\n\treturn matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\n// Binds the bulk action events to the submit buttons.\n// This code has been copied from wordpress core js file wp-admin/js/media.js:184\njQuery( '#doaction' ).on( 'click', function( event ) {\n\t/\*\n     \* Handle the bulk action based on its value.\n     \*/\n\tjQuery( 'select[name=\"action\"]' ).each( function() {\n\t\tvar optionValue = jQuery( this ).val();\n\t\tif ( 'delete' === optionValue ) {\n\t\t\tif ( ! showNotice.warn() ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t});\n});\n"],"names":["String","prototype","printf","arg","formatted","this","arguments","before\_formatted","substring","indexOf","after\_formatted","length","ct\_working","document","cookie","ct\_new\_check","ct\_cooling\_down\_flag","ct\_close\_animate","ct\_accurate\_check","ct\_pause","ct\_prev\_accurate","ctUsersCheck","ct\_prev\_from","ct\_prev\_till","ct\_cool\_down\_time","ct\_requests\_counter","ct\_max\_requests","ct\_ajax\_nonce","ct\_users\_total","ct\_users\_checked","ct\_users\_spam","ct\_users\_bad","ct\_unchecked","ct\_date\_from","ct\_date\_till","apbct\_cookie\_\_get","names","prefixes","split","forEach","item","i","arr","curr","trim","name","all","prefix","apbct\_get\_cookie","animate\_comment","to","id","jQuery","fadeTo","ct\_clear\_users","from","till","ctSecure","is","val","location","protocol","data","action","security","no\_cache","Math","random","ajax","type","url","ajaxurl","success","msg","ct\_show\_users\_info","ct\_send\_users","ct\_cooling\_down\_toggle","hide","let","new\_href","href","check\_amount","setTimeout","new\_check","unchecked","amount","offset","Number","getCookie","parseJSON","parseInt","error","confirm","error\_message","end","checked","spam","bad","status\_string","ct\_status\_string","ct\_status\_string\_warning","html","jqXHR","textStatus","errorThrown","show","timeout","message","ct\_toggle\_depended","obj","secondary","depended","prop","removeProp","ct\_start\_check","continue\_check","alert","ct\_specify\_date\_range","ct\_select\_date\_range","ct\_delete\_all\_users","e","target","addClass","css","removeClass","matches","match","RegExp","replace","decodeURIComponent","undefined","ready","on","attr","datepicker","setDefaults","regional","dates","dateFormat","maxDate","changeMonth","changeYear","showAnim","onSelect","selectedDate","option","instance","date","parseDate","settings","\_defaults","not","ct\_insert\_users","delete\_accounts","waitingPopup","createElement","setAttribute","innerText","body","append","classList","add","remove","window","reload","click","ct\_check","accurate","JSON","stringify","ct\_id","fadeOut","user\_id","status","filename","ct\_csv\_filename","dummy","ct\_bad\_csv","URL","createObjectURL","Blob","download","appendChild","ct\_confirm\_deletion\_all","change","event","each","showNotice","warn","preventDefault"],"mappings":"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"} |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/Cleantalk.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/Cleantalk.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/Cleantalk.php")

  | [r3139584](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/Cleantalk.php?rev=3139584#L548 "Show revision 3139584 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/Cleantalk.php?rev=3188546#L548 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 548 | 548 |  |
  | 549 | 549 | //common way - left this if we need to specify method uri for 2.0 |
  | 550 |  | $url ~~.~~= !empty($this->method\_uri) && is\_string($this->method\_uri) |
  | 551 |  | ? '/' . $this->method\_uri |
  |  | 550 | $url = !empty($this->method\_uri) && is\_string($this->method\_uri) |
  |  | 551 | ? $url . '/' . $this->method\_uri |
  | 552 | 552 | : $url; |
  | 553 | 553 |  |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/EmailEncoder.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/EmailEncoder.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/EmailEncoder.php")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/EmailEncoder.php?rev=3179819#L3 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/EmailEncoder.php?rev=3188546#L3 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | namespace Cleantalk\Antispam; |
  | 4 | 4 |  |
  |  | 5 | use Cleantalk\ApbctWP\UpdatePlugin\DbAnalyzer; |
  | 5 | 6 | use Cleantalk\ApbctWP\Variables\Cookie; |
  | 6 | 7 | use Cleantalk\ApbctWP\Variables\Server; |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/EmailEncoder.php?rev=3179819#L203) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/EmailEncoder.php?rev=3188546#L204) |  |
  | 203 | 204 | }, $content); |
  | 204 | 205 |  |
  |  | 206 | // modify content to turn back aria-label |
  |  | 207 | $replacing\_result = $this->modifyAriaLabelContent($replacing\_result, true); |
  |  | 208 |  |
  | 205 | 209 | //please keep this var (do not simplify the code) for further debug |
  | 206 | 210 | return $replacing\_result; |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/EmailEncoder.php?rev=3179819#L495) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/EmailEncoder.php?rev=3188546#L499) |  |
  | 495 | 499 | $encoded = $this->encodeString($string); |
  | 496 | 500 |  |
  | 497 |  | return ~~'~~<span |
  | 498 |  | data-original-string=~~"' . $encoded . '"~~ |
  | 499 |  | class=~~"apbct-email-encoder"~~ |
  | 500 |  | title=~~"' . esc\_attr($this->getTooltip()) . '">' . $this->addMagicBlur($obfuscated) . '</span>'~~; |
  |  | 501 | return "<span |
  |  | 502 | data-original-string='" . $encoded . "' |
  |  | 503 | class='apbct-email-encoder' |
  |  | 504 | title='" . esc\_attr($this->getTooltip()) . "'>'" . $this->addMagicBlur($obfuscated) . "'</span>"; |
  | 501 | 505 | } |
  | 502 | 506 |  |
  | 503 | 507 | private function addMagicBlur($obfuscated) |
  | 504 | 508 | { |
  | 505 |  | $template = ~~'~~ |
  | 506 |  | <span class=~~"apbct-ee-blur-group"~~> |
  | 507 |  | <span class=~~"apbct-ee-blur\_email-text"~~>%s</span> |
  | 508 |  | <span class=~~"apbct-ee-static-blur"~~> |
  | 509 |  | <span class=~~"apbct-ee-blur apbct-ee-blur\_rectangle-init"~~></span> |
  | 510 |  | <span class=~~"apbct-ee-blur apbct-ee-blur\_rectangle-soft"~~></span> |
  | 511 |  | <span class=~~"apbct-ee-blur apbct-ee-blur\_rectangle-hard"~~></span> |
  |  | 509 | $template = " |
  |  | 510 | <span class='apbct-ee-blur-group'> |
  |  | 511 | <span class='apbct-ee-blur\_email-text'>%s</span> |
  |  | 512 | <span class='apbct-ee-static-blur'> |
  |  | 513 | <span class='apbct-ee-blur apbct-ee-blur\_rectangle-init'></span> |
  |  | 514 | <span class='apbct-ee-blur apbct-ee-blur\_rectangle-soft'></span> |
  |  | 515 | <span class='apbct-ee-blur apbct-ee-blur\_rectangle-hard'></span> |
  | 512 | 516 | </span> |
  | 513 |  | <span class=~~"apbct-ee-animate-blur"~~> |
  | 514 |  | <span class=~~"apbct-ee-blur apbct-ee-blur\_rectangle-init apbct-ee-blur\_animate-init"~~></span> |
  | 515 |  | <span class=~~"apbct-ee-blur apbct-ee-blur\_rectangle-soft apbct-ee-blur\_animate-soft "~~></span> |
  | 516 |  | <span class=~~"apbct-ee-blur apbct-ee-blur\_rectangle-hard apbct-ee-blur\_animate-hard"~~></span> |
  |  | 517 | <span class='apbct-ee-animate-blur'> |
  |  | 518 | <span class='apbct-ee-blur apbct-ee-blur\_rectangle-init apbct-ee-blur\_animate-init'></span> |
  |  | 519 | <span class='apbct-ee-blur apbct-ee-blur\_rectangle-soft apbct-ee-blur\_animate-soft'></span> |
  |  | 520 | <span class='apbct-ee-blur apbct-ee-blur\_rectangle-hard apbct-ee-blur\_animate-hard'></span> |
  | 517 | 521 | </span> |
  | 518 | 522 | </span> |
  | 519 |  | ~~'~~; |
  |  | 523 | "; |
  | 520 | 524 | return sprintf($template, $obfuscated); |
  | 521 | 525 | } |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/EmailEncoder.php?rev=3179819#L611) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/EmailEncoder.php?rev=3188546#L615) |  |
  | 611 | 615 | private function isExcludedRequest() |
  | 612 | 616 | { |
  |  | 617 | // chunk to fix when we can't delete plugin because of sessions table missing |
  |  | 618 | $db\_analyzer = new DbAnalyzer(); |
  |  | 619 | if (!in\_array(APBCT\_TBL\_SESSIONS, $db\_analyzer->getExistsTables())) { |
  |  | 620 | return true; |
  |  | 621 | } |
  | 613 | 622 |  |
  | 614 | 623 | // Excluded request by alt cookie |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/Integrations/Forminator.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/Integrations/Forminator.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/Integrations/Forminator.php")

  | [r3170573](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/Integrations/Forminator.php?rev=3170573#L9 "Show revision 3170573 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Antispam/Integrations/Forminator.php?rev=3188546#L9 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 9 | 9 | public function getDataForChecking($argument) |
  | 10 | 10 | { |
  | 11 |  | $data = ~~$\_POST~~; |
  |  | 11 | $data = apply\_filters('apbct\_\_filter\_post', $\_POST); |
  | 12 | 12 |  |
  | 13 | 13 | $username = ''; |
  | 14 | 14 | $email = ''; |
  | 15 |  | foreach ($~~\_POST~~ as $key => $value) { |
  |  | 15 | foreach ($data as $key => $value) { |
  | 16 | 16 | if (is\_string($key) && strpos($key, 'name-') === 0) { |
  | 17 | 17 | $username = $value; |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php")

  | [r3023325](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php?rev=3023325#L3 "Show revision 3023325 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php?rev=3188546#L3 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | namespace Cleantalk\ApbctWP\Antispam; |
  | 4 | 4 |  |
  | 5 |  | ~~use Cleantalk\ApbctWP\API;~~ |
  | 6 | 5 | use Cleantalk\ApbctWP\Helper; |
  |  | 6 | use Cleantalk\Common\TT; |
  | 7 | 7 | use Cleantalk\Variables\Post; |
  | 8 | 8 | use Cleantalk\Antispam\CleantalkRequest; |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php?rev=3023325#L28) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php?rev=3188546#L28) |  |
  | 28 | 28 | { |
  | 29 | 29 | global $apbct; |
  | 30 |  |  |
  | 31 |  | $browser\_sign          = hash('sha256', Post::get('browser\_signature\_params')); |
  | 32 |  | $event\_javascript\_data = Helper::isJson(Post::get('event\_javascript\_data')) |
  | 33 |  | ? Post::get('event\_javascript\_data') |
  | 34 |  | : stripslashes(Post::get('event\_javascript\_data')); |
  |  | 30 | $post\_browser\_sign = TT::toString(Post::get('browser\_signature\_params')); |
  |  | 31 | $post\_event\_javascript\_data = TT::toString(Post::get('event\_javascript\_data')); |
  |  | 32 | $browser\_sign          = hash('sha256', $post\_browser\_sign); |
  |  | 33 | $event\_javascript\_data = Helper::isJson($post\_event\_javascript\_data) |
  |  | 34 | ? $post\_event\_javascript\_data |
  |  | 35 | : stripslashes($post\_event\_javascript\_data); |
  | 35 | 36 |  |
  | 36 | 37 | $params = array( |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php?rev=3023325#L57) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php?rev=3188546#L58) |  |
  | 57 | 58 | $config             = ct\_get\_server(); |
  | 58 | 59 | $ct->server\_url     = APBCT\_MODERATE\_URL; |
  | 59 |  | $ct->work\_url       = preg\_match('/https:\/\/.+/', $config['ct\_work\_url']) ? $config['ct\_work\_url'] : null; |
  | 60 |  | $ct->server\_ttl     = $config['ct\_server\_ttl']; |
  | 61 |  | $ct->server\_changed = $config['ct\_server\_changed']; |
  |  | 60 | $config\_work\_url    = TT::getArrayValueAsString($config, 'ct\_work\_url'); |
  |  | 61 | $ct->work\_url       = preg\_match('/https:\/\/.+/', $config\_work\_url) |
  |  | 62 | ? $config\_work\_url |
  |  | 63 | : ''; |
  |  | 64 | $ct->server\_ttl     = TT::getArrayValueAsInt($config, 'ct\_server\_ttl'); |
  |  | 65 | $ct->server\_changed = TT::getArrayValueAsInt($config, 'ct\_server\_changed'); |
  | 62 | 66 | $api\_response = $ct->checkBot($ct\_request); |
  | 63 | 67 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php?rev=3023325#L101) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Antispam/EmailEncoder.php?rev=3188546#L105) |  |
  | 101 | 105 | return $result; |
  | 102 | 106 | } |
  |  | 107 |  |
  |  | 108 | public static function getEncoderOptionDescription($example\_email = '') |
  |  | 109 | { |
  |  | 110 | $common\_description = \_\_( |
  |  | 111 | 'Option encodes emails on public pages of the site. This prevents robots from collecting and including your emails in lists to spam.', |
  |  | 112 | 'cleantalk-spam-protect' |
  |  | 113 | ); |
  |  | 114 | $example\_encoded = ''; |
  |  | 115 | if ( !empty($example\_email) && is\_string($example\_email)) { |
  |  | 116 | $example\_encoded = sprintf( |
  |  | 117 | '%s: %s', |
  |  | 118 | \_\_('Here is a sample of encoded email', 'cleantalk-spam-protect'), |
  |  | 119 | TT::toString($example\_email) |
  |  | 120 | ); |
  |  | 121 | } |
  |  | 122 |  |
  |  | 123 | $template = '%s&nbsp;%s'; |
  |  | 124 |  |
  |  | 125 | return sprintf( |
  |  | 126 | $template, |
  |  | 127 | $common\_description, |
  |  | 128 | empty($example\_encoded) ? '&nbsp;' : '<span style="position:absolute">' . $example\_encoded . '</span>' |
  |  | 129 | ); |
  |  | 130 | } |
  |  | 131 |  |
  |  | 132 | public static function getBufferUsageOptionDescription() |
  |  | 133 | { |
  |  | 134 | return \_\_('Use this option only if no encoding occurs when the "Encode contact data" option is enabled.', 'cleantalk-spam-protect'); |
  |  | 135 | } |
  | 103 | 136 | } |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php")

  | [r3170573](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php?rev=3170573#L4 "Show revision 3170573 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php?rev=3188546#L4 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 |  |
  | 5 | 5 | use Cleantalk\ApbctWP\Variables\Cookie; |
  |  | 6 | use Cleantalk\Common\TT; |
  | 6 | 7 |  |
  | 7 | 8 | abstract class Checker |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php?rev=3170573#L90) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php?rev=3188546#L91) |  |
  | 90 | 91 | $dates\_disabled = ''; |
  | 91 | 92 | } |
  | 92 |  |  |
  | 93 | 93 | $dates\_from = $dates\_till = ''; |
  | 94 |  |  |
  |  | 94 | $cookie\_dates\_from = TT::toString(Cookie::get('ct\_' . $this->page\_slug . '\_dates\_from')); |
  |  | 95 | $cookie\_dates\_till = TT::toString(Cookie::get('ct\_' . $this->page\_slug . '\_dates\_till')); |
  | 95 | 96 | if ( |
  | 96 |  | preg\_match('/^[a-zA-Z]{3}\s{1}\d{1,2}\s{1}\d{4}$/', ~~Cookie::get('ct\_' . $this->page\_slug . '\_dates\_from')~~) && |
  | 97 |  | preg\_match('/^[a-zA-Z]{3}\s{1}\d{1,2}\s{1}\d{4}$/', ~~Cookie::get('ct\_' . $this->page\_slug . '\_dates\_till')~~) |
  |  | 97 | preg\_match('/^[a-zA-Z]{3}\s{1}\d{1,2}\s{1}\d{4}$/', $cookie\_dates\_from) && |
  |  | 98 | preg\_match('/^[a-zA-Z]{3}\s{1}\d{1,2}\s{1}\d{4}$/', $cookie\_dates\_till) |
  | 98 | 99 | ) { |
  | 99 |  | $dates\_from = ~~Cookie::get('ct\_' . $this->page\_slug . '\_dates\_from')~~; |
  | 100 |  | $dates\_till = ~~Cookie::get('ct\_' . $this->page\_slug . '\_dates\_till')~~; |
  |  | 100 | $dates\_from = $cookie\_dates\_from; |
  |  | 101 | $dates\_till = $cookie\_dates\_till; |
  | 101 | 102 | } |
  | 102 | 103 | ?> |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php?rev=3170573#L152) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php?rev=3188546#L153) |  |
  | 152 | 153 | type="text" |
  | 153 | 154 | id="ct\_date\_range\_from" |
  | 154 |  | value="<?php echo ~~$dates\_from~~; ?>" |
  | 155 |  | <?php echo ~~$dates\_disabled~~; ?> |
  |  | 155 | value="<?php echo esc\_html($dates\_from); ?>" |
  |  | 156 | <?php echo esc\_html($dates\_disabled); ?> |
  | 156 | 157 | readonly |
  | 157 | 158 | /> |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php?rev=3170573#L161) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/Checker.php?rev=3188546#L162) |  |
  | 161 | 162 | type="text" |
  | 162 | 163 | id="ct\_date\_range\_till" |
  | 163 |  | value="<?php echo ~~$dates\_till~~; ?>" |
  | 164 |  | <?php echo ~~$dates\_disabled~~; ?> |
  |  | 164 | value="<?php echo esc\_html($dates\_till); ?>" |
  |  | 165 | <?php echo esc\_html($dates\_disabled); ?> |
  | 165 | 166 | readonly |
  | 166 | 167 | /> |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php")

  | [r3125332](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L3 "Show revision 3125332 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L3 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | namespace Cleantalk\ApbctWP\FindSpam; |
  | 4 | 4 |  |
  | 5 |  | ~~use Cleantalk\ApbctWP\API;~~ |
  | 6 | 5 | use Cleantalk\ApbctWP\Variables\Cookie; |
  | 7 |  | use Cleantalk\~~ApbctWP\Variables\Post~~; |
  |  | 6 | use Cleantalk\Common\TT; |
  | 8 | 7 |  |
  | 9 | 8 | class CommentsChecker extends Checker |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L19) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L18) |  |
  | 19 | 18 | // Preparing data |
  | 20 | 19 | if ( Cookie::get('ct\_paused\_comments\_check') ) { |
  | 21 |  | $prev\_check = json\_decode(stripslashes(~~Cookie::get('ct\_paused\_comments\_check'~~)), true); |
  |  | 20 | $prev\_check = json\_decode(stripslashes(TT::toString(Cookie::get('ct\_paused\_comments\_check'))), true); |
  | 22 | 21 | $prev\_check\_from = $prev\_check\_till = ''; |
  | 23 | 22 | if ( |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L64) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L63) |  |
  | 64 | 63 | \* Get all comments from DB |
  | 65 | 64 | \* |
  | 66 |  | \* @return array~~|false~~ |
  |  | 65 | \* @return array |
  | 67 | 66 | \*/ |
  | 68 | 67 | private static function getAllComments(CommentsScanParameters $commentsScanParameters) |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L112) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L111) |  |
  | 112 | 111 | \* @param array $skip\_roles |
  | 113 | 112 | \* |
  | 114 |  | \* @return array~~|false~~ |
  |  | 113 | \* @return array |
  | 115 | 114 | \*/ |
  | 116 | 115 | private static function removeSkipRoles(array $comments, array $skip\_roles) |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L121) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L120) |  |
  | 121 | 120 | } |
  | 122 | 121 | $user\_meta  = get\_userdata($comment->user\_id); |
  |  | 122 | if ( !($user\_meta instanceof \WP\_User) ) { |
  |  | 123 | return $comments; |
  |  | 124 | } |
  | 123 | 125 | $user\_roles = $user\_meta->roles; |
  | 124 | 126 | foreach ($user\_roles as $user\_role) { |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L136) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L138) |  |
  | 136 | 138 | \* @param array $comments |
  | 137 | 139 | \* |
  | 138 |  | \* @return array~~|false~~ |
  |  | 140 | \* @return array |
  | 139 | 141 | \*/ |
  | 140 | 142 | private static function removeCommentsWithoutIPEmail(array $comments) |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L208) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L210) |  |
  | 208 | 210 |  |
  | 209 | 211 | if ( $res ) { |
  | 210 |  | return date("~~M j Y~~", strtotime($res['start\_time'])); |
  |  | 212 | return date("Y-m-d", strtotime($res['start\_time'])); |
  | 211 | 213 | } else { |
  | 212 | 214 | $params        = array( |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L218) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L220) |  |
  | 218 | 220 | $first\_comment = get\_comments($params); |
  | 219 | 221 |  |
  | 220 |  | return get\_comment\_date("M j Y", current($first\_comment)); |
  |  | 222 | if ( ! is\_array($first\_comment) || empty($first\_comment) ) { |
  |  | 223 | return 'unknown'; |
  |  | 224 | } |
  |  | 225 |  |
  |  | 226 | return get\_comment\_date("Y-m-d", current($first\_comment)); |
  | 221 | 227 | } |
  | 222 | 228 | } |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L246) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L252) |  |
  | 246 | 252 | } |
  | 247 | 253 |  |
  | 248 |  | $cnt\_checked ~~= $apbct->data['count\_checked\_comments']~~; |
  |  | 254 | $cnt\_checked = TT::toInt($apbct->data['count\_checked\_comments']); |
  | 249 | 255 |  |
  | 250 | 256 | // Spam comments |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L261) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L267) |  |
  | 261 | 267 | ); |
  | 262 | 268 | $cnt\_spam = get\_comments($params\_spam); |
  |  | 269 |  |
  |  | 270 | if (!is\_int($cnt\_spam)) { |
  |  | 271 | $cnt\_spam = 'unknown'; |
  |  | 272 | } else { |
  |  | 273 | $cnt\_spam = TT::toString($cnt\_spam); |
  |  | 274 | } |
  | 263 | 275 |  |
  | 264 | 276 | // Bad comments (without IP and Email) |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L326) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L338) |  |
  | 326 | 338 | return $return['message']; |
  | 327 | 339 | } else { |
  | 328 |  | echo ~~json\_encode($return~~); |
  |  | 340 | echo esc\_html(json\_encode($return)); |
  | 329 | 341 | die(); |
  | 330 | 342 | } |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L388) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L400) |  |
  | 388 | 400 | ); |
  | 389 | 401 | $c\_spam    = get\_comments($args\_spam); |
  |  | 402 | if ( !is\_array($c\_spam) ) { |
  |  | 403 | $c\_spam = array(); |
  |  | 404 | } |
  | 390 | 405 |  |
  | 391 | 406 | $args\_spam = array( |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L402) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L417) |  |
  | 402 | 417 |  |
  | 403 | 418 | foreach ( $c\_spam as $iValue ) { |
  | 404 |  | wp\_trash\_comment($iValue->comment\_ID); |
  | 405 |  | usleep(10000); |
  |  | 419 | if ($iValue instanceof \WP\_Comment) { |
  |  | 420 | wp\_trash\_comment($iValue); |
  |  | 421 | usleep(10000); |
  |  | 422 | } |
  | 406 | 423 | } |
  | 407 | 424 | /\*\* @psalm-suppress InvalidArgument \*/ |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L425) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L442) |  |
  | 425 | 442 | ); |
  | 426 | 443 | $c\_spam    = get\_comments($args\_spam); |
  |  | 444 | if (!is\_array($c\_spam)) { |
  |  | 445 | $c\_spam = array(); |
  |  | 446 | } |
  | 427 | 447 |  |
  | 428 | 448 | $args\_spam = array( |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L439) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L459) |  |
  | 439 | 459 |  |
  | 440 | 460 | foreach ( $c\_spam as $iValue ) { |
  | 441 |  | wp\_spam\_comment($iValue->comment\_ID); |
  | 442 |  | usleep(10000); |
  |  | 461 | if ($iValue instanceof \WP\_Comment) { |
  |  | 462 | wp\_trash\_comment($iValue); |
  |  | 463 | usleep(10000); |
  |  | 464 | } |
  | 443 | 465 | } |
  | 444 | 466 | /\*\* @psalm-suppress InvalidArgument \*/ |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L494) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L516) |  |
  | 494 | 516 | ); |
  | 495 | 517 |  |
  | 496 |  | echo CommentsScanResponse::getInstance()->toJson(); |
  | 497 |  | die; |
  |  | 518 | die(CommentsScanResponse::getInstance()->toJson()); |
  | 498 | 519 | } |
  | 499 | 520 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L501) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L522) |  |
  | 501 | 522 |  |
  | 502 | 523 | $result = \Cleantalk\ApbctWP\API::methodSpamCheckCms( |
  | 503 |  | $apbct->api\_key, |
  | 504 |  | $ips\_emails\_data, |
  | 505 |  | null |
  | 506 |  | ); |
  | 507 |  |  |
  | 508 |  | if (!empty($result['error'])) { |
  |  | 524 | TT::toString($apbct->api\_key), |
  |  | 525 | $ips\_emails\_data |
  |  | 526 | ); |
  |  | 527 |  |
  |  | 528 | $error = !is\_array($result) |
  |  | 529 | ? 'Unknown API error' |
  |  | 530 | : null; |
  |  | 531 | $error = !empty($result['error']) |
  |  | 532 | ? TT::getArrayValueAsString($result, 'error') |
  |  | 533 | : $error; |
  |  | 534 |  |
  |  | 535 | if ( !is\_null($error) ) { |
  | 509 | 536 | CommentsScanResponse::getInstance()->setError(1); |
  | 510 |  | CommentsScanResponse::getInstance()->setErrorMessage($~~result['error']~~); |
  |  | 537 | CommentsScanResponse::getInstance()->setErrorMessage($error); |
  | 511 | 538 | } else { |
  | 512 |  | $onlySpammers = self::getSpammersFromResultAPI(~~$result~~); |
  |  | 539 | $onlySpammers = self::getSpammersFromResultAPI(TT::toArray($result)); |
  | 513 | 540 | $marked\_comment\_ids = []; |
  | 514 | 541 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L536) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L563) |  |
  | 536 | 563 | $apbct->saveData(); |
  | 537 | 564 |  |
  | 538 |  | echo CommentsScanResponse::getInstance()->toJson(); |
  | 539 |  | die; |
  |  | 565 | die(CommentsScanResponse::getInstance()->toJson()); |
  | 540 | 566 | } |
  | 541 | 567 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L564) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L590) |  |
  | 564 | 590 | ); |
  | 565 | 591 |  |
  | 566 |  | echo CommentsScanResponse::getInstance()->toJson(); |
  | 567 |  | die; |
  |  | 592 | die(CommentsScanResponse::getInstance()->toJson()); |
  | 568 | 593 | } |
  | 569 | 594 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L583) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L608) |  |
  | 583 | 608 |  |
  | 584 | 609 | $result = \Cleantalk\ApbctWP\API::methodSpamCheckCms( |
  | 585 |  | ~~$apbct->api\_key~~, |
  |  | 610 | TT::toString($apbct->api\_key), |
  | 586 | 611 | $ips\_emails\_data, |
  | 587 | 612 | $date |
  | 588 | 613 | ); |
  | 589 | 614 |  |
  | 590 |  | if (!empty($result['error'])) { |
  |  | 615 | $error = !is\_array($result) |
  |  | 616 | ? 'Unknown API error' |
  |  | 617 | : null; |
  |  | 618 | $error = !empty($result['error']) |
  |  | 619 | ? TT::getArrayValueAsString($result, 'error') |
  |  | 620 | : $error; |
  |  | 621 |  |
  |  | 622 | if ( !is\_null($error) ) { |
  | 591 | 623 | CommentsScanResponse::getInstance()->setError(1); |
  | 592 |  | CommentsScanResponse::getInstance()->setErrorMessage($~~result['error']~~); |
  |  | 624 | CommentsScanResponse::getInstance()->setErrorMessage($error); |
  | 593 | 625 | } else { |
  | 594 |  | $onlySpammers = self::getSpammersFromResultAPI(~~$result~~); |
  |  | 626 | $onlySpammers = self::getSpammersFromResultAPI(TT::toArray($result)); |
  | 595 | 627 | $marked\_comment\_ids = []; |
  | 596 | 628 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3125332#L620) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsChecker.php?rev=3188546#L652) |  |
  | 620 | 652 | CommentsScanResponse::getInstance()->setBad((int)self::getCountBadComments()); |
  | 621 | 653 |  |
  | 622 |  | echo CommentsScanResponse::getInstance()->toJson(); |
  | 623 |  | die; |
  |  | 654 | die(CommentsScanResponse::getInstance()->toJson()); |
  | 624 | 655 | } |
  | 625 | 656 |  |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanResponse.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanResponse.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanResponse.php")

  | [r2819563](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanResponse.php?rev=2819563#L4 "Show revision 2819563 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanResponse.php?rev=3188546#L4 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | namespace Cleantalk\ApbctWP\FindSpam; |
  | 5 | 5 |  |
  |  | 6 | use Cleantalk\Common\TT; |
  | 6 | 7 | use Cleantalk\Templates\Singleton; |
  | 7 | 8 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanResponse.php?rev=2819563#L44) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/CommentsScanResponse.php?rev=3188546#L45) |  |
  | 44 | 45 |  |
  | 45 | 46 | /\*\* |
  | 46 |  | \* @return ~~false|~~string |
  |  | 47 | \* @return string |
  | 47 | 48 | \* @psalm-suppress PossiblyUnusedMethod |
  | 48 | 49 | \*/ |
  | 49 | 50 | public function toJson() |
  | 50 | 51 | { |
  | 51 |  | return ~~json\_encode($this->toArray(~~)); |
  |  | 52 | return TT::toString(json\_encode($this->toArray())); |
  | 52 | 53 | } |
  | 53 | 54 |  |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php")

  | [r3108581](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php?rev=3108581#L4 "Show revision 3108581 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php?rev=3188546#L4 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 |  |
  | 5 | 5 | use Cleantalk\ApbctWP\Variables\Get; |
  |  | 6 | use Cleantalk\Common\TT; |
  | 6 | 7 |  |
  | 7 | 8 | class BadUsers extends Users |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php?rev=3108581#L15) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php?rev=3188546#L16) |  |
  | 15 | 16 | $this->\_column\_headers = array($columns, array(), array()); |
  | 16 | 17 |  |
  | 17 |  | $~~per\_page\_option = ! is\_null(get\_current\_screen()) ? get\_current\_screen()->get\_option(~~ |
  | 18 |  | ~~'per\_page',~~ |
  | 19 |  | ~~'option'~~ |
  | 20 |  | ~~)~~ : '10'; |
  |  | 18 | $current\_screen = get\_current\_screen(); |
  |  | 19 | $per\_page\_option = !is\_null($current\_screen) |
  |  | 20 | ? $current\_screen->get\_option('per\_page', 'option') |
  |  | 21 | : '10'; |
  | 21 | 22 | $per\_page        = get\_user\_meta(get\_current\_user\_id(), $per\_page\_option, true); |
  | 22 | 23 | if ( ! $per\_page ) { |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php?rev=3108581#L41) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php?rev=3188546#L42) |  |
  | 41 | 42 | foreach ( $scanned\_users\_to\_show as $user\_id ) { |
  | 42 | 43 | $user\_obj = get\_userdata($user\_id); |
  | 43 |  |  |
  |  | 44 | if ( ! $user\_obj ) { |
  |  | 45 | continue; |
  |  | 46 | } |
  | 44 | 47 | $this->items[] = array( |
  | 45 | 48 | 'ct\_id'        => $user\_obj->ID, |
  | 46 |  | 'ct\_user~~name~~'  => $user\_obj, |
  |  | 49 | 'ct\_user\_obj'  => $user\_obj, |
  | 47 | 50 | 'ct\_name'      => $user\_obj->display\_name, |
  | 48 | 51 | 'ct\_email'     => $user\_obj->user\_email, |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php?rev=3108581#L63) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php?rev=3188546#L66) |  |
  | 63 | 66 | public function column\_ct\_username($item) // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
  | 64 | 67 | { |
  | 65 |  | $user\_obj       = $item['ct\_username']; |
  | 66 |  | $email          = $user\_obj->user\_email; |
  | 67 |  | $column\_content = ''; |
  |  | 68 | $user\_obj       = isset($item['ct\_user\_obj']) ? $item['ct\_user\_obj'] : null; |
  |  | 69 | if (is\_null($user\_obj)) { |
  |  | 70 | return ''; |
  |  | 71 | } |
  |  | 72 | $email          = TT::toString($user\_obj->user\_email); |
  | 68 | 73 |  |
  | 69 | 74 | // Avatar, nickname |
  | 70 |  | $column\_content .= '<strong>' . get\_avatar($user\_obj->ID, 32) . '&nbsp;' . $user\_obj->user\_login . '</strong>'; |
  |  | 75 | $avatar = TT::toString(get\_avatar($user\_obj->ID, 32)); |
  |  | 76 | $column\_content = '<strong>' . $avatar . '&nbsp;' . TT::toString($user\_obj->user\_login) . '</strong>'; |
  | 71 | 77 | $column\_content .= '<br /><br />'; |
  | 72 | 78 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php?rev=3108581#L107) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/BadUsers.php?rev=3188546#L113) |  |
  | 107 | 113 | 'delete' => sprintf( |
  | 108 | 114 | '<a href="?page=%s&action=%s&spam=%s">Delete</a>', |
  | 109 |  | htmlspecialchars(addslashes(~~Get::get('page'~~))), |
  |  | 115 | htmlspecialchars(addslashes(TT::toString(Get::get('page')))), |
  | 110 | 116 | 'delete', |
  | 111 | 117 | $user\_obj->ID |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php")

  | [r3108581](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3108581#L5 "Show revision 3108581 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3188546#L5 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | use Cleantalk\ApbctWP\Variables\Get; |
  | 6 | 6 | use Cleantalk\ApbctWP\Variables\Post; |
  |  | 7 | use Cleantalk\Common\TT; |
  | 7 | 8 |  |
  | 8 | 9 | class Comments extends \Cleantalk\ApbctWP\CleantalkListTable |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3108581#L10) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3188546#L11) |  |
  | 10 | 11 | protected $apbct; |
  | 11 | 12 |  |
  |  | 13 |  |
  |  | 14 | /\*\* |
  |  | 15 | \*@psalm-suppress PossiblyUnusedMethod |
  |  | 16 | \*/ |
  | 12 | 17 | public function \_\_construct() |
  | 13 | 18 | { |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3108581#L51) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3188546#L56) |  |
  | 51 | 56 | public function column\_cb($item) // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
  | 52 | 57 | { |
  | 53 |  | echo '<input type="checkbox" name="spamids[]" id="cb-select-' . $item['ct\_id'] . '" value="' . $item['ct\_id'] . '" />'; |
  |  | 58 | $ct\_id = TT::getArrayValueAsString($item, 'ct\_id'); |
  |  | 59 | echo '<input type="checkbox" name="spamids[]" id="cb-select-' . esc\_html($ct\_id) . '" value="' . esc\_html($ct\_id) . '" />'; |
  | 54 | 60 | } |
  | 55 | 61 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3108581#L130) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3188546#L136) |  |
  | 130 | 136 | $column\_content .= '</div>'; |
  | 131 | 137 |  |
  |  | 138 | $page = htmlspecialchars(addslashes(TT::toString(Get::get('page')))); |
  |  | 139 |  |
  | 132 | 140 | $actions = array( |
  | 133 | 141 | 'approve' => sprintf( |
  | 134 | 142 | '<span class="approve"><a href="?page=%s&action=%s&spam=%s">Approve</a></span>', |
  | 135 |  | ~~htmlspecialchars(addslashes(Get::get('page')))~~, |
  |  | 143 | $page, |
  | 136 | 144 | 'approve', |
  | 137 | 145 | $id |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3108581#L139) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3188546#L147) |  |
  | 139 | 147 | 'spam'    => sprintf( |
  | 140 | 148 | '<span class="spam"><a href="?page=%s&action=%s&spam=%s">Spam</a></span>', |
  | 141 |  | ~~htmlspecialchars(addslashes(Get::get('page')))~~, |
  |  | 149 | $page, |
  | 142 | 150 | 'spam', |
  | 143 | 151 | $id |
  | 144 | 152 | ), |
  | 145 |  | 'trash'   => sprintf('<a href="?page=%s&action=%s&spam=%s">Trash</a>', htmlspecialchars(addslashes(Get::get('page'))), 'trash', $id), |
  |  | 153 | 'trash'   => sprintf( |
  |  | 154 | '<a href="?page=%s&action=%s&spam=%s">Trash</a>', |
  |  | 155 | $page, |
  |  | 156 | 'trash', |
  |  | 157 | $id |
  |  | 158 | ), |
  | 146 | 159 | ); |
  | 147 | 160 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3108581#L198) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3188546#L211) |  |
  | 198 | 211 | case 'ct\_spam': |
  | 199 | 212 | case 'ct\_bad': |
  | 200 |  | return ~~$item[$column\_name]~~; |
  |  | 213 | return TT::getArrayValueAsString($item, $column\_name); |
  | 201 | 214 | default: |
  | 202 | 215 | return print\_r($item, true); |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3108581#L222) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3188546#L235) |  |
  | 222 | 235 | } |
  | 223 | 236 |  |
  | 224 |  | if ( ! wp\_verify\_nonce(Post::get('\_wpnonce'), 'bulk-' . $this->\_args['plural']) ) { |
  |  | 237 | $awaited\_action = 'bulk-' . TT::getArrayValueAsString($this->\_args, 'plural'); |
  |  | 238 | if ( ! wp\_verify\_nonce(TT::toString(Post::get('\_wpnonce')), $awaited\_action)) { |
  | 225 | 239 | wp\_die('nonce error'); |
  | 226 | 240 | } |
  | 227 | 241 |  |
  | 228 |  | $spam\_ids = wp\_parse\_id\_list(~~Post::get('spamids'~~)); |
  |  | 242 | $spam\_ids = wp\_parse\_id\_list(TT::toString(Post::get('spamids'))); |
  | 229 | 243 | if ( 'trash' === $action ) { |
  | 230 | 244 | $this->moveToTrash($spam\_ids); |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3108581#L284) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3188546#L298) |  |
  | 284 | 298 | delete\_comment\_meta((int)$id, 'ct\_marked\_as\_spam'); |
  | 285 | 299 | $comment = get\_comment((int)$id); |
  | 286 |  | wp\_trash\_comment($comment); |
  |  | 300 | if (is\_int($comment) || $comment instanceof \WP\_Comment) { |
  |  | 301 | wp\_trash\_comment($comment); |
  |  | 302 | } |
  | 287 | 303 | } |
  | 288 | 304 | } |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3108581#L295) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Comments.php?rev=3188546#L311) |  |
  | 295 | 311 | delete\_comment\_meta((int)$id, 'ct\_marked\_as\_spam'); |
  | 296 | 312 | $comment = get\_comment((int)$id); |
  | 297 |  | wp\_spam\_comment($comment); |
  |  | 313 | if (is\_int($comment) || $comment instanceof \WP\_Comment) { |
  |  | 314 | wp\_spam\_comment($comment); |
  |  | 315 | } |
  | 298 | 316 | } |
  | 299 | 317 | } |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsLogs.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsLogs.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsLogs.php")

  | [r3029899](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsLogs.php?rev=3029899#L4 "Show revision 3029899 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsLogs.php?rev=3188546#L4 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 |  |
  | 5 | 5 | use Cleantalk\ApbctWP\Variables\Post; |
  |  | 6 | use Cleantalk\Common\TT; |
  | 6 | 7 |  |
  | 7 | 8 | class CommentsLogs extends Comments |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsLogs.php?rev=3029899#L53) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsLogs.php?rev=3188546#L54) |  |
  | 53 | 54 | return; |
  | 54 | 55 | } |
  | 55 |  |  |
  | 56 |  | if ( ! wp\_verify\_nonce(~~Post::get('\_wpnonce'), 'bulk-' . $this->\_args['plural']~~) ) { |
  |  | 56 | $awaited\_action = 'bulk-' . TT::getArrayValueAsString($this->\_args, 'plural'); |
  |  | 57 | if ( ! wp\_verify\_nonce(TT::toString(Post::get('\_wpnonce')), $awaited\_action) ) { |
  | 57 | 58 | wp\_die('nonce error'); |
  | 58 | 59 | } |
  | 59 | 60 |  |
  | 60 |  | $spam\_ids = wp\_parse\_id\_list(~~Post::get('spamids'~~)); |
  |  | 61 | $spam\_ids = wp\_parse\_id\_list(TT::toString(Post::get('spamids'))); |
  | 61 | 62 | $this->removeLogs($spam\_ids); |
  | 62 | 63 | } |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsScan.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsScan.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsScan.php")

  | [r2724384](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsScan.php?rev=2724384#L10 "Show revision 2724384 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsScan.php?rev=3188546#L10 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 10 | 10 | $this->\_column\_headers = array($columns, array(), array()); |
  | 11 | 11 |  |
  | 12 |  | $per\_page\_option = get\_current\_screen()->get\_option('per\_page', 'option'); |
  |  | 12 | $current\_screen = get\_current\_screen(); |
  |  | 13 | $per\_page\_option = !is\_null($current\_screen) |
  |  | 14 | ? $current\_screen->get\_option('per\_page', 'option') |
  |  | 15 | : '10'; |
  | 13 | 16 | $per\_page        = get\_user\_meta(get\_current\_user\_id(), $per\_page\_option, true); |
  | 14 | 17 | if ( ! $per\_page ) { |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsScan.php?rev=2724384#L19) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/CommentsScan.php?rev=3188546#L22) |  |
  | 19 | 22 |  |
  | 20 | 23 | $scanned\_comments = $this->getSpamNow($per\_page, $current\_page); |
  | 21 |  |  |
  |  | 24 | $total\_comments = $this->getScannedTotal()->get\_comments(); |
  | 22 | 25 | $this->set\_pagination\_args(array( |
  | 23 |  | 'total\_items' => ~~count($this->getScannedTotal()->get\_comments())~~, |
  |  | 26 | 'total\_items' => is\_array($total\_comments) ? count($total\_comments) : 0, |
  | 24 | 27 | 'per\_page'    => $per\_page, |
  | 25 | 28 | )); |
  | 26 | 29 |  |
  | 27 |  | foreach ( $scanned\_comments->get\_comments() as $comment ) { |
  |  | 30 | $get\_scanned\_comments = $scanned\_comments->get\_comments(); |
  |  | 31 | $get\_scanned\_comments = is\_array($get\_scanned\_comments) ? $get\_scanned\_comments : array(); |
  |  | 32 |  |
  |  | 33 | foreach ( $get\_scanned\_comments as $comment ) { |
  |  | 34 | if ( !($comment instanceof \WP\_Comment) ) { |
  |  | 35 | continue; |
  |  | 36 | } |
  | 28 | 37 | $this->items[] = array( |
  | 29 | 38 | 'ct\_id'          => $comment->comment\_ID, |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php")

  | [r3108581](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3108581#L5 "Show revision 3108581 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3188546#L5 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | use Cleantalk\ApbctWP\Variables\Get; |
  | 6 | 6 | use Cleantalk\ApbctWP\Variables\Post; |
  |  | 7 | use Cleantalk\Common\TT; |
  | 7 | 8 |  |
  | 8 | 9 | class Users extends \Cleantalk\ApbctWP\CleantalkListTable |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3108581#L61) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3188546#L62) |  |
  | 61 | 62 | public function column\_cb($item) // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
  | 62 | 63 | { |
  | 63 |  | echo '<input type="checkbox" name="spamids[]" id="cb-select-' . $item['ct\_id'] . '" value="' . $item['ct\_id'] . '" />'; |
  |  | 64 | $ct\_id = TT::getArrayValueAsString($item, 'ct\_id'); |
  |  | 65 | echo '<input type="checkbox" name="spamids[]" id="cb-select-' . esc\_html($ct\_id) . '" value="' . esc\_html($ct\_id) . '" />'; |
  | 64 | 66 | } |
  | 65 | 67 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3108581#L76) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3188546#L78) |  |
  | 76 | 78 | $user\_obj       = $item['ct\_username']; |
  | 77 | 79 | $email          = $user\_obj->user\_email; |
  | 78 |  | ~~$column\_content = '';~~ |
  | 79 | 80 |  |
  | 80 | 81 | // Avatar, nickname |
  | 81 |  | $column\_content .= '<strong>' . get\_avatar($user\_obj->ID, 32) . '&nbsp;' . $user\_obj->user\_login . '</strong>'; |
  |  | 82 | $avatar = TT::toString(get\_avatar($user\_obj->ID, 32)); |
  |  | 83 | $column\_content = '<strong>' . $avatar . '&nbsp;' . TT::toString($user\_obj->user\_login) . '</strong>'; |
  | 82 | 84 | $column\_content .= '<br /><br />'; |
  | 83 | 85 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3108581#L115) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3188546#L117) |  |
  | 115 | 117 | } |
  | 116 | 118 |  |
  |  | 119 | $page = htmlspecialchars(addslashes(TT::toString(Get::get('page')))); |
  |  | 120 |  |
  | 117 | 121 | $actions = array( |
  | 118 | 122 | 'approve' => sprintf( |
  | 119 | 123 | '<a href="?page=%s&action=%s&spam=%s">Approve</a>', |
  | 120 |  | ~~htmlspecialchars(addslashes(Get::get('page')))~~, |
  |  | 124 | $page, |
  | 121 | 125 | 'approve', |
  | 122 | 126 | $user\_obj->ID |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3108581#L124) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3188546#L128) |  |
  | 124 | 128 | 'delete' => sprintf( |
  | 125 | 129 | '<a href="?page=%s&action=%s&spam=%s">Delete</a>', |
  | 126 |  | ~~htmlspecialchars(addslashes(Get::get('page')))~~, |
  |  | 130 | $page, |
  | 127 | 131 | 'delete', |
  | 128 | 132 | $user\_obj->ID |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3108581#L155) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3188546#L159) |  |
  | 155 | 159 | case 'ct\_bad': |
  | 156 | 160 | case 'ct\_orders': |
  | 157 |  | return ~~$item[$column\_name]~~; |
  |  | 161 | return TT::getArrayValueAsString($item, $column\_name); |
  | 158 | 162 | default: |
  | 159 | 163 | return print\_r($item, true); |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3108581#L185) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3188546#L189) |  |
  | 185 | 189 | } |
  | 186 | 190 |  |
  | 187 |  | if ( ! wp\_verify\_nonce(Post::get('\_wpnonce'), 'bulk-' . $this->\_args['plural']) ) { |
  |  | 191 | $awaited\_action = 'bulk-' . TT::getArrayValueAsString($this->\_args, 'plural'); |
  |  | 192 | if ( ! wp\_verify\_nonce(TT::toString(Post::get('\_wpnonce')), $awaited\_action)) { |
  | 188 | 193 | wp\_die('nonce error'); |
  | 189 | 194 | } |
  | 190 | 195 |  |
  | 191 | 196 | if ( $this->current\_action() === 'approve' ) { |
  | 192 |  | $this->approveSpam(~~Post::get('spamids'~~)); |
  |  | 197 | $this->approveSpam(TT::toArray(Post::get('spamids'))); |
  | 193 | 198 | } |
  | 194 | 199 |  |
  | 195 | 200 | if ( $this->current\_action() === 'delete' ) { |
  | 196 |  | $this->removeSpam(~~Post::get('spamids'~~)); |
  |  | 201 | $this->removeSpam(TT::toArray(Post::get('spamids'))); |
  | 197 | 202 | } |
  | 198 | 203 | } |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3108581#L274) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/Users.php?rev=3188546#L279) |  |
  | 274 | 279 | public function getTotal() |
  | 275 | 280 | { |
  | 276 |  | return ~~count\_users()['total\_users']~~; |
  |  | 281 | return TT::getArrayValueAsInt(count\_users(), 'total\_users'); |
  | 277 | 282 | } |
  | 278 | 283 |  |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersLogs.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersLogs.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersLogs.php")

  | [r3029899](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersLogs.php?rev=3029899#L4 "Show revision 3029899 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersLogs.php?rev=3188546#L4 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 |  |
  | 5 | 5 | use Cleantalk\ApbctWP\Variables\Post; |
  |  | 6 | use Cleantalk\Common\TT; |
  | 6 | 7 |  |
  | 7 | 8 | class UsersLogs extends Users |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersLogs.php?rev=3029899#L54) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersLogs.php?rev=3188546#L55) |  |
  | 54 | 55 | } |
  | 55 | 56 |  |
  | 56 |  | if ( ! wp\_verify\_nonce(Post::get('\_wpnonce'), 'bulk-' . $this->\_args['plural']) ) { |
  |  | 57 | $awaited\_action = 'bulk-' . TT::getArrayValueAsString($this->\_args, 'plural'); |
  |  | 58 | if ( ! wp\_verify\_nonce(TT::toString(Post::get('\_wpnonce')), $awaited\_action)) { |
  | 57 | 59 | wp\_die('nonce error'); |
  | 58 | 60 | } |
  | 59 | 61 |  |
  | 60 |  | $this->removeLogs(~~Post::get('spamids'~~)); |
  |  | 62 | $this->removeLogs(TT::toArray(Post::get('spamids'))); |
  | 61 | 63 | } |
  | 62 | 64 |  |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersScan.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersScan.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersScan.php")

  | [r2766197](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersScan.php?rev=2766197#L12 "Show revision 2766197 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersScan.php?rev=3188546#L12 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 | $this->\_column\_headers = array($columns, array(), array()); |
  | 13 | 13 |  |
  | 14 |  | $per\_page\_option = get\_current\_screen()->get\_option('per\_page', 'option'); |
  |  | 14 | $current\_screen = get\_current\_screen(); |
  |  | 15 | $per\_page\_option = !is\_null($current\_screen) |
  |  | 16 | ? $current\_screen->get\_option('per\_page', 'option') |
  |  | 17 | : '10'; |
  | 15 | 18 | $per\_page        = get\_user\_meta(get\_current\_user\_id(), $per\_page\_option, true); |
  | 16 | 19 | if ( ! $per\_page ) { |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersScan.php?rev=2766197#L29) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/ListTable/UsersScan.php?rev=3188546#L32) |  |
  | 29 | 32 | foreach ( $scanned\_users->get\_results() as $user\_id ) { |
  | 30 | 33 | $user\_obj = get\_userdata($user\_id); |
  | 31 |  |  |
  |  | 34 | if ( ! $user\_obj ) { |
  |  | 35 | continue; |
  |  | 36 | } |
  | 32 | 37 | $items = array( |
  | 33 | 38 | 'ct\_id'        => $user\_obj->ID, |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php")

  | [r3125332](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L8 "Show revision 3125332 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L8 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | use Cleantalk\ApbctWP\Variables\Cookie; |
  | 9 | 9 | use Cleantalk\ApbctWP\Variables\Post; |
  |  | 10 | use Cleantalk\Common\TT; |
  | 10 | 11 |  |
  | 11 | 12 | class UsersChecker extends Checker |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L21) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L22) |  |
  | 21 | 22 | // Preparing data |
  | 22 | 23 | $current\_user = wp\_get\_current\_user(); |
  | 23 |  | if ( ! empty(Cookie::get('ct\_paused\_users\_check')) ) { |
  | 24 |  | $prev\_check = json\_decode(stripslashes(Cookie::get('ct\_paused\_users\_check')), true); |
  |  | 24 | $is\_paused = TT::toString(Cookie::get('ct\_paused\_users\_check')); |
  |  | 25 | if ( ! empty($is\_paused) ) { |
  |  | 26 | $prev\_check = json\_decode(stripslashes($is\_paused), true); |
  | 25 | 27 | $prev\_check\_from = $prev\_check\_till = ''; |
  | 26 | 28 | if ( |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L133) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L135) |  |
  | 133 | 135 | // removed skip\_roles and return $users |
  | 134 | 136 | $users =  self::removeSkipRoles($users, $skip\_roles); |
  | 135 |  |  |
  |  | 137 | if (false === $users) { |
  |  | 138 | $users = array(); |
  |  | 139 | } |
  | 136 | 140 | // removed users without IP and Email |
  | 137 | 141 | $users =  self::removeUsersWithoutIPEmail($users); |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L149) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L153) |  |
  | 149 | 153 | { |
  | 150 | 154 | foreach ($users as $index => $user) { |
  | 151 |  | $user\_meta  = get\_userdata($user->ID); |
  |  | 155 | if (empty($user->user\_id) || !property\_exists($user, 'user\_id') === false) { |
  |  | 156 | continue; |
  |  | 157 | } |
  |  | 158 |  |
  |  | 159 | $user\_meta  = get\_userdata($user->user\_id); |
  |  | 160 | if ( !($user\_meta instanceof \WP\_User) ) { |
  |  | 161 | continue; |
  |  | 162 | } |
  |  | 163 |  |
  | 152 | 164 | $user\_roles = $user\_meta->roles; |
  | 153 | 165 | foreach ($user\_roles as $user\_role) { |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L166) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L178) |  |
  | 166 | 178 | \* @param array $users |
  | 167 | 179 | \* |
  | 168 |  | \* @return array~~|false~~ |
  |  | 180 | \* @return array |
  | 169 | 181 | \*/ |
  | 170 | 182 | private static function removeUsersWithoutIPEmail(array $users) |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L178) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L190) |  |
  | 178 | 190 |  |
  | 179 | 191 | $user\_meta = self::getUserMeta($user->ID); |
  | 180 |  |  |
  | 181 |  | $user\_ip    = ! empty($user\_meta[0]['ip']) ? trim($user\_meta[0]['ip']) : false; |
  |  | 192 | if (empty($user\_meta)) { |
  |  | 193 | unset($users[$index]); |
  |  | 194 | continue; |
  |  | 195 | } |
  |  | 196 | $ip\_of\_user\_meta = TT::getArrayValueAsString($user\_meta, 'ip'); |
  |  | 197 | $user\_ip    = ! empty($ip\_of\_user\_meta) ? trim($ip\_of\_user\_meta) : false; |
  | 182 | 198 | $user\_email = ! empty($user->user\_email) ? trim($user->user\_email) : false; |
  | 183 | 199 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L236) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L252) |  |
  | 236 | 252 |  |
  | 237 | 253 | return $spammers; |
  |  | 254 | } |
  |  | 255 |  |
  |  | 256 | /\*\* |
  |  | 257 | \* @param $result |
  |  | 258 | \* @param array $users |
  |  | 259 | \* |
  |  | 260 | \* @return array |
  |  | 261 | \*/ |
  |  | 262 | public static function getUserIDsMarked($result, array $users) |
  |  | 263 | { |
  |  | 264 | $onlySpammers    = self::getSpammersFromResultAPI(TT::toArray($result)); |
  |  | 265 | $marked\_user\_ids = []; |
  |  | 266 |  |
  |  | 267 | foreach ( $users as $user ) { |
  |  | 268 | if ( |
  |  | 269 | ! in\_array($user->ID, $marked\_user\_ids, true) && |
  |  | 270 | (in\_array($user->user\_ip, $onlySpammers, true) || |
  |  | 271 | in\_array($user->user\_email, $onlySpammers, true)) |
  |  | 272 | ) { |
  |  | 273 | $marked\_user\_ids[] = $user->ID; |
  |  | 274 | update\_user\_meta($user->ID, 'ct\_marked\_as\_spam', '1', true); |
  |  | 275 | } |
  |  | 276 | } |
  |  | 277 |  |
  |  | 278 | return $marked\_user\_ids; |
  | 238 | 279 | } |
  | 239 | 280 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L486) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L527) |  |
  | 486 | 527 |  |
  | 487 | 528 | $u = get\_users($params); |
  | 488 |  |  |
  | 489 | 529 | foreach ( $u as $iValue ) { |
  | 490 | 530 | $user\_meta = get\_user\_meta($iValue->ID, 'session\_tokens', true); |
  | 491 |  | if ( is\_array($user\_meta) ) { |
  | 492 |  | $user\_meta = array\_values($user\_meta); |
  | 493 |  | } |
  |  | 531 | $user\_meta\_array = reset($user\_meta); |
  |  | 532 | $user\_meta\_array = !empty($user\_meta\_array) ? $user\_meta\_array : false; |
  |  | 533 | // skip empty or invalid data users |
  |  | 534 | if (!$user\_meta\_array || !is\_array($user\_meta\_array)) { |
  |  | 535 | continue; |
  |  | 536 | } |
  |  | 537 | $ip\_of\_user\_meta = TT::getArrayValueAsString($user\_meta\_array, 'ip'); |
  | 494 | 538 | $text .= $iValue->user\_login . ','; |
  | 495 | 539 | $text .= $iValue->data->user\_email . ','; |
  | 496 |  | $text .= ! empty($~~user\_meta[0]['ip']) ? trim($user\_meta[0]['ip']~~) : ''; |
  |  | 540 | $text .= ! empty($ip\_of\_user\_meta) ? trim($ip\_of\_user\_meta) : ''; |
  | 497 | 541 | $text .= PHP\_EOL; |
  | 498 | 542 | } |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L502) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L546) |  |
  | 502 | 546 | if ( $filename !== false ) { |
  | 503 | 547 | header('Content-Type: text/csv'); |
  | 504 |  | echo ~~$text~~; |
  |  | 548 | echo esc\_html($text); |
  | 505 | 549 | } else { |
  | 506 | 550 | echo 'Export error.'; // file not exists or empty $\_POST['filename'] |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L559) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L603) |  |
  | 559 | 603 |  |
  | 560 | 604 | $curr\_user = get\_user\_by('email', $email); |
  |  | 605 |  |
  |  | 606 | if (false === $curr\_user) { |
  |  | 607 | continue; |
  |  | 608 | } |
  | 561 | 609 |  |
  | 562 | 610 | update\_user\_meta($curr\_user->ID, 'session\_tokens', array($rnd => array('ip' => $ips[$i]))); |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L701) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L749) |  |
  | 701 | 749 | } |
  | 702 | 750 |  |
  |  | 751 | /\*\* |
  |  | 752 | \* @param $user\_id |
  |  | 753 | \* |
  |  | 754 | \* @return array |
  |  | 755 | \*/ |
  | 703 | 756 | public static function getUserMeta($user\_id) |
  | 704 | 757 | { |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L706) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L759) |  |
  | 706 | 759 |  |
  | 707 | 760 | if ( is\_array($user\_meta) ) { |
  | 708 |  | return array\_values($user\_meta); |
  | 709 |  | } |
  | 710 |  |  |
  | 711 |  | return false; |
  |  | 761 | $user\_meta = array\_values($user\_meta); |
  |  | 762 | return reset($user\_meta); |
  |  | 763 | } |
  |  | 764 |  |
  |  | 765 | return array(); |
  | 712 | 766 | } |
  | 713 | 767 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L736) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L790) |  |
  | 736 | 790 | ); |
  | 737 | 791 |  |
  | 738 |  | echo UsersScanResponse::getInstance()->toJson(); |
  | 739 |  | die; |
  |  | 792 | die(UsersScanResponse::getInstance()->toJson()); |
  | 740 | 793 | } |
  | 741 | 794 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L748) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L801) |  |
  | 748 | 801 | ); |
  | 749 | 802 |  |
  | 750 |  | if (!empty($result['error'])) { |
  |  | 803 | $error = !is\_array($result) |
  |  | 804 | ? 'Unknown API error' |
  |  | 805 | : null; |
  |  | 806 | $error = !empty($result['error']) |
  |  | 807 | ? TT::getArrayValueAsString($result, 'error') |
  |  | 808 | : $error; |
  |  | 809 |  |
  |  | 810 | if ( !is\_null($error) ) { |
  | 751 | 811 | UsersScanResponse::getInstance()->setError(1); |
  | 752 |  | UsersScanResponse::getInstance()->setErrorMessage($~~result['error']~~); |
  |  | 812 | UsersScanResponse::getInstance()->setErrorMessage($error); |
  | 753 | 813 | } else { |
  | 754 |  | $onlySpammers = self::getSpammersFromResultAPI($result); |
  | 755 |  | $marked\_user\_ids = []; |
  | 756 |  |  |
  | 757 |  | foreach ($users as $user) { |
  | 758 |  | if ( |
  | 759 |  | ! in\_array($user->ID, $marked\_user\_ids, true) && |
  | 760 |  | (in\_array($user->user\_ip, $onlySpammers, true) || |
  | 761 |  | in\_array($user->user\_email, $onlySpammers, true)) |
  | 762 |  | ) { |
  | 763 |  | $marked\_user\_ids[] = $user->ID; |
  | 764 |  | update\_user\_meta($user->ID, 'ct\_marked\_as\_spam', '1', true); |
  | 765 |  | } |
  | 766 |  | } |
  |  | 814 | $marked\_user\_ids = self::getUserIDsMarked($result, $users); |
  | 767 | 815 |  |
  | 768 | 816 | // Count spam |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L778) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L826) |  |
  | 778 | 826 | $apbct->saveData(); |
  | 779 | 827 |  |
  | 780 |  | echo UsersScanResponse::getInstance()->toJson(); |
  | 781 |  | die; |
  |  | 828 | die(UsersScanResponse::getInstance()->toJson()); |
  | 782 | 829 | } |
  | 783 | 830 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L806) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L853) |  |
  | 806 | 853 | ); |
  | 807 | 854 |  |
  | 808 |  | echo UsersScanResponse::getInstance()->toJson(); |
  | 809 |  | die; |
  |  | 855 | die(UsersScanResponse::getInstance()->toJson()); |
  | 810 | 856 | } |
  | 811 | 857 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L830) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L876) |  |
  | 830 | 876 | ); |
  | 831 | 877 |  |
  | 832 |  | if (!empty($result['error'])) { |
  |  | 878 | $error = !is\_array($result) |
  |  | 879 | ? 'Unknown API error' |
  |  | 880 | : null; |
  |  | 881 | $error = !empty($result['error']) |
  |  | 882 | ? TT::getArrayValueAsString($result, 'error') |
  |  | 883 | : $error; |
  |  | 884 |  |
  |  | 885 | if ( !is\_null($error) ) { |
  | 833 | 886 | UsersScanResponse::getInstance()->setError(1); |
  | 834 |  | UsersScanResponse::getInstance()->setErrorMessage($~~result['error']~~); |
  |  | 887 | UsersScanResponse::getInstance()->setErrorMessage($error); |
  | 835 | 888 | } else { |
  | 836 |  | $onlySpammers = self::getSpammersFromResultAPI($result); |
  | 837 |  | $marked\_user\_ids = []; |
  | 838 |  |  |
  | 839 |  | foreach ($users as $user) { |
  | 840 |  | if ( |
  | 841 |  | ! in\_array($user->ID, $marked\_user\_ids, true) && |
  | 842 |  | (in\_array($user->user\_ip, $onlySpammers, true) || |
  | 843 |  | in\_array($user->user\_email, $onlySpammers, true)) |
  | 844 |  | ) { |
  | 845 |  | $marked\_user\_ids[] = $user->ID; |
  | 846 |  | update\_user\_meta($user->ID, 'ct\_marked\_as\_spam', '1', true); |
  | 847 |  | } |
  | 848 |  | } |
  |  | 889 | $marked\_user\_ids = self::getUserIDsMarked($result, $users); |
  | 849 | 890 |  |
  | 850 | 891 | // Count spam |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3125332#L862) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersChecker.php?rev=3188546#L903) |  |
  | 862 | 903 | UsersScanResponse::getInstance()->setBad((int)self::getCountBadUsers()); |
  | 863 | 904 |  |
  | 864 |  | echo UsersScanResponse::getInstance()->toJson(); |
  | 865 |  | die; |
  |  | 905 | die(UsersScanResponse::getInstance()->toJson()); |
  | 866 | 906 | } |
  | 867 | 907 | } |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersScanResponse.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersScanResponse.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersScanResponse.php")

  | [r2743361](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersScanResponse.php?rev=2743361#L4 "Show revision 2743361 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersScanResponse.php?rev=3188546#L4 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | namespace Cleantalk\ApbctWP\FindSpam; |
  | 5 | 5 |  |
  |  | 6 | use Cleantalk\Common\TT; |
  | 6 | 7 | use Cleantalk\Templates\Singleton; |
  | 7 | 8 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersScanResponse.php?rev=2743361#L44) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/FindSpam/UsersScanResponse.php?rev=3188546#L45) |  |
  | 44 | 45 |  |
  | 45 | 46 | /\*\* |
  | 46 |  | \* @return ~~false|~~string |
  |  | 47 | \* @return string |
  | 47 | 48 | \* @psalm-suppress PossiblyUnusedMethod |
  | 48 | 49 | \*/ |
  | 49 | 50 | public function toJson() |
  | 50 | 51 | { |
  | 51 |  | return ~~json\_encode($this->toArray(~~)); |
  |  | 52 | return TT::toString(json\_encode($this->toArray())); |
  | 52 | 53 | } |
  | 53 | 54 |  |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Firewall/AntiFlood.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Firewall/AntiFlood.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Firewall/AntiFlood.php")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Firewall/AntiFlood.php?rev=3179819#L247 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Firewall/AntiFlood.php?rev=3188546#L247 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 247 | 247 | '{HOST}'                           => get\_home\_url() . ', ' . APBCT\_VERSION, |
  | 248 | 248 | '{GENERATED}'                      => '<p>The page was generated at&nbsp;' . date('D, d M Y H:i:s') . "</p>", |
  | 249 |  | '{COOKIE\_ANTIFLOOD\_PASSED}'        => md5($~~this->api\_key . $result['ip']~~), |
  |  | 249 | '{COOKIE\_ANTIFLOOD\_PASSED}'        => md5($result['ip'] . $this->api\_key), |
  | 250 | 250 | '{SCRIPT\_URL}'                     => $js\_url, |
  | 251 | 251 |  |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/GetFieldsAny.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/GetFieldsAny.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/GetFieldsAny.php")

  | [r3174374](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/GetFieldsAny.php?rev=3174374#L267 "Show revision 3174374 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/GetFieldsAny.php?rev=3188546#L267 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 267 | 267 | 0 === strpos($key, "ct\_checkjs") |
  | 268 | 268 | ) { |
  | 269 |  | $this->contact = false; |
  |  | 269 | //todo We do need to refactor ct\_checkjs check to be sure, that excluded request is not fake! |
  |  | 270 | $this->contact = $this->skipExclusionsOnVulnerableFormsData($arr); |
  | 270 | 271 | } |
  | 271 | 272 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/GetFieldsAny.php?rev=3174374#L379) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/GetFieldsAny.php?rev=3188546#L380) |  |
  | 379 | 380 | $this->contact = false; |
  | 380 | 381 | } |
  |  | 382 | } |
  |  | 383 |  |
  |  | 384 | /\*\* |
  |  | 385 | \* Check if the form is possible vulnerable for direct calls. |
  |  | 386 | \* |
  |  | 387 | \* @param array $form\_data |
  |  | 388 | \* |
  |  | 389 | \* @return bool If do skip exclusions on vulnerable forms data. |
  |  | 390 | \*/ |
  |  | 391 | private function skipExclusionsOnVulnerableFormsData($form\_data) |
  |  | 392 | { |
  |  | 393 | // modification to correctly check gravity forms attacks |
  |  | 394 | if ( isset($form\_data) && is\_array($form\_data)) { |
  |  | 395 | if (! empty($form\_data['action']) && |
  |  | 396 | ( |
  |  | 397 | ! empty($form\_data['gform\_ajax']) || |
  |  | 398 | ! empty($form\_data['gform\_submit']) |
  |  | 399 | ) |
  |  | 400 | ) { |
  |  | 401 | return true; |
  |  | 402 | } |
  |  | 403 | } |
  |  | 404 | return false; |
  | 381 | 405 | } |
  | 382 | 406 |  |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Helper.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Helper.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Helper.php")

  | [r3154548](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Helper.php?rev=3154548#L105 "Show revision 3154548 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Helper.php?rev=3188546#L105 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 105 | 105 | $RCCounter->execute(); |
  | 106 | 106 |  |
  |  | 107 | $value\_for\_token = ''; |
  |  | 108 | if ( $apbct->api\_key ) { |
  |  | 109 | $value\_for\_token = $apbct->api\_key; |
  |  | 110 | } elseif ( apbct\_\_is\_hosting\_license() ) { |
  |  | 111 | $value\_for\_token = $apbct->api\_key . $apbct->data['salt']; |
  |  | 112 | } |
  |  | 113 |  |
  | 107 | 114 | $request\_params = array\_merge(array( |
  | 108 |  | 'spbc\_remote\_call\_token' => md5($~~apbct->api\_key~~), |
  |  | 115 | 'spbc\_remote\_call\_token' => md5($value\_for\_token), |
  | 109 | 116 | 'spbc\_remote\_call\_action' => $rc\_action, |
  | 110 | 117 | 'plugin\_name' => 'apbct', |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/LinkConstructor.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/LinkConstructor.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/LinkConstructor.php")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/LinkConstructor.php?rev=3179819#L2 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/LinkConstructor.php?rev=3188546#L2 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | namespace Cleantalk\ApbctWP; |
  |  | 4 |  |
  |  | 5 | use Cleantalk\Common\TT; |
  | 4 | 6 |  |
  | 5 | 7 | class LinkConstructor extends \Cleantalk\Common\LinkConstructor |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/LinkConstructor.php?rev=3179819#L172) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/LinkConstructor.php?rev=3188546#L174) |  |
  | 172 | 174 | 'utm\_content' => 'get\_access\_key\_link', |
  | 173 | 175 | ), |
  |  | 176 | 'blog\_email\_encoder\_common\_post' => array( |
  |  | 177 | 'utm\_id' => '', |
  |  | 178 | 'utm\_term' => '', |
  |  | 179 | 'utm\_source' => 'apbct\_hint\_data\_\_email\_decoder', |
  |  | 180 | 'utm\_medium' => 'WordPress', |
  |  | 181 | 'utm\_content' => '', |
  |  | 182 | 'utm\_campaign' => 'ABPCT\_Settings', |
  |  | 183 | ), |
  | 174 | 184 | ); |
  | 175 | 185 |  |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/LinkConstructor.php?rev=3179819#L192) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/LinkConstructor.php?rev=3188546#L202) |  |
  | 192 | 202 | . '&utm\_campaign=apbct\_links'; |
  | 193 | 203 | } |
  |  | 204 |  |
  |  | 205 | /\*\* |
  |  | 206 | \* @param $href |
  |  | 207 | \* @param $link\_word |
  |  | 208 | \* |
  |  | 209 | \* @return string |
  |  | 210 | \* @psalm-suppress PossiblyUnusedMethod |
  |  | 211 | \*/ |
  |  | 212 | public static function buildSimpleHref($href, $link\_word) |
  |  | 213 | { |
  |  | 214 | return '<a href="' . esc\_html(TT::toString($href)) . '" target="\_blank">' . esc\_html(TT::toString($link\_word)) . '</a>'; |
  |  | 215 | } |
  | 194 | 216 | } |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/RemoteCalls.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/RemoteCalls.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/RemoteCalls.php")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/RemoteCalls.php?rev=3179819#L91 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/RemoteCalls.php?rev=3188546#L91 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 91 | 91 | $apbct->save('remote\_calls'); |
  | 92 | 92 |  |
  |  | 93 | if ( ! self::isRcAllowed() ) { |
  |  | 94 | die('FAIL ' . json\_encode(array('error' => 'FORBIDDEN'))); |
  |  | 95 | } |
  |  | 96 |  |
  | 93 | 97 | // Check Access key |
  | 94 | 98 | if ( |
  | 95 |  | ($token === strtolower(md5($apbct->api\_key)) || |
  | 96 |  | $token === strtolower(hash('sha256', $apbct->api\_key))) || |
  |  | 99 | (self::checkToken($token)) || |
  | 97 | 100 | (self::checkWithoutToken() && self::isAllowedWithoutToken($action)) |
  | 98 | 101 | ) { |
  | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/RemoteCalls.php?rev=3179819#L548) | […](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/RemoteCalls.php?rev=3188546#L551) |  |
  | 548 | 551 | ); |
  | 549 | 552 | } |
  |  | 553 |  |
  |  | 554 | private static function isRcAllowed() |
  |  | 555 | { |
  |  | 556 | global $apbct; |
  |  | 557 | return $apbct->api\_key || apbct\_\_is\_hosting\_license(); |
  |  | 558 | } |
  |  | 559 |  |
  |  | 560 | private static function checkToken($token) |
  |  | 561 | { |
  |  | 562 | global $apbct; |
  |  | 563 | $value\_for\_token = ''; |
  |  | 564 | if ( $apbct->api\_key ) { |
  |  | 565 | $value\_for\_token = $apbct->api\_key; |
  |  | 566 | } elseif ( apbct\_\_is\_hosting\_license() ) { |
  |  | 567 | $value\_for\_token = $apbct->api\_key . $apbct->data['salt']; |
  |  | 568 | } |
  |  | 569 |  |
  |  | 570 | return |
  |  | 571 | $value\_for\_token && |
  |  | 572 | ( |
  |  | 573 | $token === strtolower(md5($value\_for\_token)) || |
  |  | 574 | $token === strtolower(hash('sha256', $value\_for\_token)) |
  |  | 575 | ); |
  |  | 576 | } |
  | 550 | 577 | } |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Sanitize.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Sanitize.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Sanitize.php")

  | [r2709629](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Sanitize.php?rev=2709629#L140 "Show revision 2709629 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Sanitize.php?rev=3188546#L140 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 140 | 140 | return sanitize\_user($variable); |
  | 141 | 141 | } |
  |  | 142 |  |
  |  | 143 | /\*\* |
  |  | 144 | \* @param $url |
  |  | 145 | \* |
  |  | 146 | \* @return string|null |
  |  | 147 | \*/ |
  |  | 148 | public static function sanitizeCleantalkServerUrl($url) |
  |  | 149 | { |
  |  | 150 | if (!is\_string($url)) { |
  |  | 151 | return null; |
  |  | 152 | } |
  |  | 153 | return preg\_match('/^.\*(moderate|api).\*\.cleantalk.org(?!\.)[\/\\\\]{0,1}/m', $url) |
  |  | 154 | ? $url |
  |  | 155 | : null; |
  |  | 156 | } |
  | 142 | 157 | } |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/State.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/State.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/State.php")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/State.php?rev=3179819#L546 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/State.php?rev=3188546#L546 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 546 | 546 | if ($wpdb\_option\_name === 'cleantalk\_settings') { |
  | 547 | 547 | // A/B testing here |
  |  | 548 | // @ToDo remove this after testing |
  |  | 549 | if ( ! is\_array($option) ) { |
  |  | 550 | $this->default\_settings['data\_\_email\_check\_exist\_post'] = 1; |
  |  | 551 | } |
  | 548 | 552 | $option = is\_array($option) ? array\_merge($this->default\_settings, $option) : $this->default\_settings; |
  | 549 | 553 | } |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Variables/Cookie.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Variables/Cookie.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Variables/Cookie.php")

  | [r3154548](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Variables/Cookie.php?rev=3154548#L47 "Show revision 3154548 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/ApbctWP/Variables/Cookie.php?rev=3188546#L47 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 47 | 47 | 'apbct\_page\_hits', |
  | 48 | 48 | 'apbct\_prev\_referer', |
  | 49 |  | ~~'apbct\_site\_landing\_ts',~~ |
  | 50 |  | ~~//'apbct\_urls',~~ |
  | 51 | 49 | 'apbct\_timestamp', |
  | 52 | 50 | 'apbct\_site\_referer')) |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/Common/LinkConstructor.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/Common/LinkConstructor.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/Common/LinkConstructor.php")

  | [r3125332](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Common/LinkConstructor.php?rev=3125332#L44 "Show revision 3125332 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Common/LinkConstructor.php?rev=3188546#L44 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 44 | 44 | } |
  | 45 | 45 |  |
  | 46 |  | $utm\_data['utm\_campaign'] = static::$utm\_campaign; |
  |  | 46 | $utm\_data['utm\_campaign'] = isset($utm\_data['utm\_campaign']) ? $utm\_data['utm\_campaign'] : static::$utm\_campaign; |
  | 47 | 47 | $glued = array\_merge($get\_params, $utm\_data); |
  | 48 | 48 | return http\_build\_query($glued); |
* ## [cleantalk-spam-protect/trunk/lib/Cleantalk/Common/TT.php](/changeset/3188546/cleantalk-spam-protect/trunk/lib/Cleantalk/Common/TT.php "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/lib/Cleantalk/Common/TT.php")

  | [r3146886](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Common/TT.php?rev=3146886#L38 "Show revision 3146886 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/lib/Cleantalk/Common/TT.php?rev=3188546#L38 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 38 | 38 | \* |
  | 39 | 39 | \* @param mixed $value The value to be converted to a string. |
  |  | 40 | \* |
  | 40 | 41 | \* @return string The converted string value, or an empty string if conversion is not possible. |
  |  | 42 | \* |
  |  | 43 | \* @psalm-taint-specialize |
  |  | 44 | \* todo Attention. The suppressing above is enabled to avoid taint analysis FP. |
  |  | 45 | \* todo However we should sanitize any POST usage that aggregated in this method. |
  | 41 | 46 | \*/ |
  | 42 | 47 | public static function toString($value) |
* ## [cleantalk-spam-protect/trunk/readme.txt](/changeset/3188546/cleantalk-spam-protect/trunk/readme.txt "Show the changeset 3188546 restricted to cleantalk-spam-protect/trunk/readme.txt")

  | [r3179819](/browser/cleantalk-spam-protect/trunk/readme.txt?rev=3179819#L3 "Show revision 3179819 of this file in browser") | [r3188546](/browser/cleantalk-spam-protect/trunk/readme.txt?rev=3188546#L3 "Show revision 3188546 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Tags: spam, antispam, anti-spam, comments, firewall |
  | 4 | 4 | Requires at least: 4.7 |
  | 5 |  | Tested up to: 6.~~6~~ |
  |  | 5 | Tested up to: 6.7 |
  | 6 | 6 | Requires PHP: 5.6 |
  | 7 |  | Stable tag: 6.4~~4~~ |
  |  | 7 | Stable tag: 6.45 |
  | 8 | 8 | License: GPLv2 |
  | 9 | 9 |  |
  | […](/browser/cleantalk-spam-protect/trunk/readme.txt?rev=3179819#L445) | […](/browser/cleantalk-spam-protect/trunk/readme.txt?rev=3188546#L445) |  |
  | 445 | 445 | == Changelog == |
  | 446 | 446 |  |
  |  | 447 | = 6.45 14 Nov 2024 = |
  |  | 448 | \* Code. Psalm level 3. New progress. |
  |  | 449 | \* Fix. Anti-Flood. Blocking page loop fixed. |
  |  | 450 | \* Fix. Code. GetFieldsAny(). Added protection for unknown Gravity forms attack that ignores integration hooks. |
  |  | 451 | \* Fix. Common check. Prevent spam on Formintator forms direct call attacks. |
  |  | 452 | \* Fix. EmailEncoder. Editing the change of double quotes to single quotes. |
  |  | 453 | \* Fix. EmailEncoder. Issue with missing tables fixed. |
  |  | 454 | \* Fix. EmailEncoder. Revived lost modifyAriaLabelContent() call used to replace back the origin aria attr. |
  |  | 455 | \* Fix. Remote Calls. RC calling for the services without the api key fixed. |
  |  | 456 | \* Fix. Request Parameters. `apbct\_site\_landing\_ts` parameter handling fixed. |
  |  | 457 | \* Fix. Skip request. Skipping an ajax request to edit a profile. |
  |  | 458 | \* Mod. EmailEncoder. Popup. Copy button removed. Email made selectable by click. Styles unified. |
  |  | 459 | \* Mod. EmailEncoder. Descriptions updated. |
  |  | 460 | \* Mod. Sanitize::sanitizeCleantalkServerUrl implemented. |
  |  | 461 | \* Upd. Settings. Checking email existence option will be enabled by default for the new users. |
  |  | 462 |  |
  | 447 | 463 | = 6.44 31 Oct 2024 = |
  | 448 | 464 | \* New. Integrations. Added honeypot for elementor form. |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3188546)
* [Zip Archive](?format=zip&new=3188546)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_971529ce_20250114_201130.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Spam protection, Anti-Spam, FireWall by CleanTalk <= 6.44 - Authorization Bypass due to Missing Empty Value Check to Unauthenticated Arbitrary Plugin Installation

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Spam protection, Anti-Spam, FireWall by CleanTalk <= 6.44 - Authorization Bypass due to Missing Empty Value Check to Unauthenticated Arbitrary Plugin Installation

8.1

**Improper Check or Handling of Exceptional Conditions**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:H/PR:N/UI:N/S:U/C:H/I:H/A:H)

| CVE | [CVE-2024-10781](https://www.cve.org/CVERecord?id=CVE-2024-10781) |
| --- | --- |
| CVSS | 8.1 (High) |
| Publicly Published | November 25, 2024 |
| Last Updated | November 26, 2024 |
| Researcher | [István Márton - Wordfence](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/lana-codes) |

### Description

The Spam protection, Anti-Spam, FireWall by CleanTalk plugin for WordPress is vulnerable to unauthorized Arbitrary Plugin Installation due to an missing empty value check on the 'api\_key' value in the 'perform' function in all versions up to, and including, 6.44. This makes it possible for unauthenticated attackers to install and activate arbitrary plugins which can be leveraged to achieve remote code execution if another vulnerable plugin is installed and activated.

Wordfence blocked **9,737 attacks** targeting this vulnerability in the past 24 hours.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php#L95)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php#L96)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3188546/cleantalk-spam-protect#file653)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fcleantalk-spam-protect%2Fspam-protection-anti-spam-firewall-by-cleantalk-644-authorization-bypass-due-to-missing-empty-value-check-to-unauthenticated-arbitrary-plugin-installation&t=Spam%20protection%2C%20Anti-Spam%2C%20FireWall%20by%20CleanTalk%20%3C%3D%206.44%20-%20Authorization%20Bypass%20due%20to%20Missing%20Empty%20Value%20Check%20to%20Unauthenticated%20Arbitrary%20Plugin%20Installation "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fcleantalk-spam-protect%2Fspam-protection-anti-spam-firewall-by-cleantalk-644-authorization-bypass-due-to-missing-empty-value-check-to-unauthenticated-arbitrary-plugin-installation&text=Spam%20protection%2C%20Anti-Spam%2C%20FireWall%20by%20CleanTalk%20%3C%3D%206.44%20-%20Authorization%20Bypass%20due%20to%20Missing%20Empty%20Value%20Check%20to%20Unauthenticated%20Arbitrary%20Plugin%20Installation "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fcleantalk-spam-protect%2Fspam-protection-anti-spam-firewall-by-cleantalk-644-authorization-bypass-due-to-missing-empty-value-check-to-unauthenticated-arbitrary-plugin-installation "LinkedIn")
Email

## Vulnerability Details for Spam protection, Anti-Spam, FireWall by CleanTalk

#### [Spam protection, Anti-Spam, FireWall by CleanTalk](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/cleantalk-spam-protect)

| Software Type | Plugin |
| --- | --- |
| Software Slug | cleantalk-spam-protect [(view on wordpress.org)](https://wordpress.org/plugins/cleantalk-spam-protect) |
| Patched? | Yes |
| Remediation | Update to version 6.45, or a newer patched version |
| Affected Version | * <= 6.44 |
| Patched Version | * 6.45 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_1c3d0c3f_20250114_201124.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fcleantalk-spam-protect%2Ftags%2F6.44%2Flib%2FCleantalk%2FApbctWP%2FRemoteCalls.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php)

---

# [source:](/browser?order=name "Go to repository root") [cleantalk-spam-protect](/browser/cleantalk-spam-protect?order=name "View cleantalk-spam-protect")/[tags](/browser/cleantalk-spam-protect/tags?order=name "View tags")/[6.44](/browser/cleantalk-spam-protect/tags/6.44?order=name "View 6.44")/[lib](/browser/cleantalk-spam-protect/tags/6.44/lib?order=name "View lib")/[Cleantalk](/browser/cleantalk-spam-protect/tags/6.44/lib/Cleantalk?order=name "View Cleantalk")/[ApbctWP](/browser/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP?order=name "View ApbctWP")/[RemoteCalls.php](/browser/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php?order=name "View RemoteCalls.php")

View diff against:

View revision:

| [Last change](/changeset/3179819/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php "View differences") on this file was [3179819](/changeset/3179819/ "View changeset 3179819"), checked in by sergefcleantalk, [2 months ago](/timeline?from=2024-11-01T08%3A48%3A02Z&precision=second "See timeline at 11/01/2024 08:48:02 AM") |
| --- |
| Update to 6.44 |
| **File size:** 21.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | namespace Cleantalk\ApbctWP; |
| [4](#L4) |  |
| [5](#L5) | use Cleantalk\ApbctWP\Firewall\SFWUpdateHelper; |
| [6](#L6) | use Cleantalk\ApbctWP\Variables\Post; |
| [7](#L7) | use Cleantalk\ApbctWP\Variables\Request; |
| [8](#L8) | use Cleantalk\ApbctWP\Variables\Get; |
| [9](#L9) | use Cleantalk\Common\TT; |
| [10](#L10) |  |
| [11](#L11) | class RemoteCalls |
| [12](#L12) | { |
| [13](#L13) | const COOLDOWN = 10; |
| [14](#L14) |  |
| [15](#L15) | private static $allowedActionsWithoutToken = [ |
| [16](#L16) | 'get\_fresh\_wpnonce', |
| [17](#L17) | 'post\_api\_key', |
| [18](#L18) | ]; |
| [19](#L19) |  |
| [20](#L20) | /\*\* |
| [21](#L21) | \* Checking if the current request is the Remote Call |
| [22](#L22) | \* |
| [23](#L23) | \* @return bool |
| [24](#L24) | \*/ |
| [25](#L25) | public static function check() |
| [26](#L26) | { |
| [27](#L27) | return Request::get('spbc\_remote\_call\_token') |
| [28](#L28) | ? self::checkWithToken() |
| [29](#L29) | : self::checkWithoutToken(); |
| [30](#L30) | } |
| [31](#L31) |  |
| [32](#L32) | public static function checkWithToken() |
| [33](#L33) | { |
| [34](#L34) | return Request::get('spbc\_remote\_call\_token') && |
| [35](#L35) | Request::get('spbc\_remote\_call\_action') && |
| [36](#L36) | in\_array(Request::get('plugin\_name'), array('antispam', 'anti-spam', 'apbct')); |
| [37](#L37) | } |
| [38](#L38) |  |
| [39](#L39) | private static function isAllowedWithoutToken($rc) |
| [40](#L40) | { |
| [41](#L41) | return in\_array($rc, self::$allowedActionsWithoutToken, true); |
| [42](#L42) | } |
| [43](#L43) |  |
| [44](#L44) | public static function checkWithoutToken() |
| [45](#L45) | { |
| [46](#L46) | global $apbct; |
| [47](#L47) |  |
| [48](#L48) | $rc\_servers = [ |
| [49](#L49) | 'netserv3.cleantalk.org', |
| [50](#L50) | 'netserv4.cleantalk.org', |
| [51](#L51) | ]; |
| [52](#L52) |  |
| [53](#L53) | $is\_noc\_request = ! $apbct->key\_is\_ok && |
| [54](#L54) | Request::get('spbc\_remote\_call\_action') && |
| [55](#L55) | in\_array(Request::get('plugin\_name'), array('antispam', 'anti-spam', 'apbct')) && |
| [56](#L56) | in\_array(Helper::ipResolve(Helper::ipGet('remote\_addr')), $rc\_servers, true); |
| [57](#L57) |  |
| [58](#L58) | // no token needs for this action, at least for now |
| [59](#L59) | // todo Probably we still need to validate this, consult with analytics team |
| [60](#L60) | $is\_wp\_nonce\_request = $apbct->key\_is\_ok && Request::get('spbc\_remote\_call\_action') === 'get\_fresh\_wpnonce'; |
| [61](#L61) |  |
| [62](#L62) | return $is\_wp\_nonce\_request || $is\_noc\_request; |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | /\*\* |
| [66](#L66) | \* Execute corresponding method of RemoteCalls if exists |
| [67](#L67) | \* |
| [68](#L68) | \* @return bool|string|string[]|null |
| [69](#L69) | \* @psalm-suppress PossiblyUnusedReturnValue |
| [70](#L70) | \*/ |
| [71](#L71) | public static function perform() |
| [72](#L72) | { |
| [73](#L73) | global $apbct; |
| [74](#L74) |  |
| [75](#L75) | $action = strtolower(Request::get('spbc\_remote\_call\_action')); |
| [76](#L76) | $token  = strtolower(Request::get('spbc\_remote\_call\_token')); |
| [77](#L77) |  |
| [78](#L78) | if ( isset($apbct->remote\_calls[$action]) ) { |
| [79](#L79) | $cooldown = isset($apbct->remote\_calls[$action]['cooldown']) ? $apbct->remote\_calls[$action]['cooldown'] : self::COOLDOWN; |
| [80](#L80) |  |
| [81](#L81) | // Return OK for test remote calls |
| [82](#L82) | if ( Request::get('test') ) { |
| [83](#L83) | die('OK'); |
| [84](#L84) | } |
| [85](#L85) |  |
| [86](#L86) | if ( |
| [87](#L87) | time() - $apbct->remote\_calls[$action]['last\_call'] >= $cooldown || |
| [88](#L88) | ($action === 'sfw\_update' && Request::get('file\_urls')) |
| [89](#L89) | ) { |
| [90](#L90) | $apbct->remote\_calls[$action]['last\_call'] = time(); |
| [91](#L91) | $apbct->save('remote\_calls'); |
| [92](#L92) |  |
| [93](#L93) | // Check Access key |
| [94](#L94) | if ( |
| [95](#L95) | ($token === strtolower(md5($apbct->api\_key)) || |
| [96](#L96) | $token === strtolower(hash('sha256', $apbct->api\_key))) || |
| [97](#L97) | (self::checkWithoutToken() && self::isAllowedWithoutToken($action)) |
| [98](#L98) | ) { |
| [99](#L99) | // Flag to let plugin know that Remote Call is running. |
| [100](#L100) | $apbct->rc\_running = true; |
| [101](#L101) |  |
| [102](#L102) | $action = 'action\_\_' . $action; |
| [103](#L103) |  |
| [104](#L104) | if ( method\_exists(\_\_CLASS\_\_, $action) ) { |
| [105](#L105) | // Delay before perform action; |
| [106](#L106) | if ( Request::get('delay') ) { |
| [107](#L107) | sleep((int)Request::get('delay')); |
| [108](#L108) | $params = $\_REQUEST; |
| [109](#L109) | unset($params['delay']); |
| [110](#L110) |  |
| [111](#L111) | return Helper::httpRequestRcToHost( |
| [112](#L112) | Request::get('spbc\_remote\_action'), |
| [113](#L113) | $params, |
| [114](#L114) | array('async'), |
| [115](#L115) | false |
| [116](#L116) | ); |
| [117](#L117) | } |
| [118](#L118) | $out = self::$action(); |
| [119](#L119) | } else { |
| [120](#L120) | $out = 'FAIL ' . json\_encode(array('error' => 'UNKNOWN\_ACTION\_METHOD')); |
| [121](#L121) | } |
| [122](#L122) | } else { |
| [123](#L123) | $out = 'FAIL ' . json\_encode(array('error' => 'WRONG\_TOKEN')); |
| [124](#L124) | } |
| [125](#L125) | } else { |
| [126](#L126) | $out = 'FAIL ' . json\_encode(array('error' => 'TOO\_MANY\_ATTEMPTS')); |
| [127](#L127) | } |
| [128](#L128) | } else { |
| [129](#L129) | $out = 'FAIL ' . json\_encode(array('error' => 'UNKNOWN\_ACTION')); |
| [130](#L130) | } |
| [131](#L131) |  |
| [132](#L132) | if ( $out ) { |
| [133](#L133) | die($out); |
| [134](#L134) | } |
| [135](#L135) | } |
| [136](#L136) |  |
| [137](#L137) | /\*\* |
| [138](#L138) | \* Close renew banner |
| [139](#L139) | \* |
| [140](#L140) | \* @return string |
| [141](#L141) | \*/ |
| [142](#L142) | public static function action\_\_close\_renew\_banner() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [143](#L143) | { |
| [144](#L144) | global $apbct; |
| [145](#L145) |  |
| [146](#L146) | $apbct->data['notice\_trial'] = 0; |
| [147](#L147) | $apbct->data['notice\_renew'] = 0; |
| [148](#L148) | $apbct->saveData(); |
| [149](#L149) | $cron = new Cron(); |
| [150](#L150) | $cron->updateTask('check\_account\_status', 'ct\_account\_status\_check', 86400); |
| [151](#L151) |  |
| [152](#L152) | return 'OK'; |
| [153](#L153) | } |
| [154](#L154) |  |
| [155](#L155) | /\*\* |
| [156](#L156) | \* SFW update |
| [157](#L157) | \* |
| [158](#L158) | \* @return void |
| [159](#L159) | \* |
| [160](#L160) | \* @psalm-suppress UnusedVariable |
| [161](#L161) | \*/ |
| [162](#L162) | public static function action\_\_sfw\_update() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [163](#L163) | { |
| [164](#L164) | global $apbct; |
| [165](#L165) | $result = apbct\_sfw\_update\_\_init(); |
| [166](#L166) | $apbct->errorToggle(! empty($result['error']), 'sfw\_update', $result); |
| [167](#L167) | die(empty($result['error']) ? 'OK' : 'FAIL ' . json\_encode(array('error' => $result['error']))); |
| [168](#L168) | } |
| [169](#L169) |  |
| [170](#L170) | /\*\* |
| [171](#L171) | \* SFW update |
| [172](#L172) | \* |
| [173](#L173) | \* @return string |
| [174](#L174) | \* |
| [175](#L175) | \* @psalm-suppress UnusedVariable |
| [176](#L176) | \*/ |
| [177](#L177) | public static function action\_\_sfw\_update\_\_worker() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [178](#L178) | { |
| [179](#L179) | $result = apbct\_sfw\_update\_\_worker(); |
| [180](#L180) |  |
| [181](#L181) | if ( ! empty($result['error']) ) { |
| [182](#L182) | SFWUpdateHelper::cleanData(); |
| [183](#L183) |  |
| [184](#L184) | die('FAIL ' . json\_encode(array('error' => $result['error']))); |
| [185](#L185) | } |
| [186](#L186) |  |
| [187](#L187) | die('OK'); |
| [188](#L188) | } |
| [189](#L189) |  |
| [190](#L190) | /\*\* |
| [191](#L191) | \* SFW send logs |
| [192](#L192) | \* |
| [193](#L193) | \* @return array|bool|int[]|string[] |
| [194](#L194) | \*/ |
| [195](#L195) | public static function action\_\_sfw\_send\_logs() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [196](#L196) | { |
| [197](#L197) | return ct\_sfw\_send\_logs(); |
| [198](#L198) | } |
| [199](#L199) |  |
| [200](#L200) | public static function action\_\_private\_record\_add() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [201](#L201) | { |
| [202](#L202) | return apbct\_sfw\_private\_records\_handler('add'); |
| [203](#L203) | } |
| [204](#L204) |  |
| [205](#L205) | public static function action\_\_private\_record\_delete() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [206](#L206) | { |
| [207](#L207) | return apbct\_sfw\_private\_records\_handler('delete'); |
| [208](#L208) | } |
| [209](#L209) |  |
| [210](#L210) | /\*\* |
| [211](#L211) | \* Handle remote call action "run\_service\_template\_get". |
| [212](#L212) | \* @return string |
| [213](#L213) | \* @throws \InvalidArgumentException |
| [214](#L214) | \*/ |
| [215](#L215) | public static function action\_\_run\_service\_template\_get() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [216](#L216) | { |
| [217](#L217) |  |
| [218](#L218) | global $apbct; |
| [219](#L219) | $error\_hat = 'apbct\_run\_service\_template\_get: '; |
| [220](#L220) |  |
| [221](#L221) | if ( empty($apbct->api\_key) ) { |
| [222](#L222) | throw new \InvalidArgumentException($error\_hat . 'api key not found'); |
| [223](#L223) | } |
| [224](#L224) | /\*\* |
| [225](#L225) | \* $template\_id validation |
| [226](#L226) | \*/ |
| [227](#L227) | $template\_id = Request::get('template\_id'); |
| [228](#L228) |  |
| [229](#L229) | if ( empty($template\_id) || !is\_string($template\_id) ) { |
| [230](#L230) | throw new \InvalidArgumentException($error\_hat . 'bad param template\_id'); |
| [231](#L231) | } |
| [232](#L232) |  |
| [233](#L233) | /\*\* |
| [234](#L234) | \* Run and validate API method service\_template\_get |
| [235](#L235) | \*/ |
| [236](#L236) | $options\_template\_data = apbct\_validate\_api\_response\_\_service\_template\_get( |
| [237](#L237) | $template\_id, |
| [238](#L238) | API::methodServicesTemplatesGet($apbct->api\_key) |
| [239](#L239) | ); |
| [240](#L240) |  |
| [241](#L241) | return apbct\_rc\_\_service\_template\_set($template\_id, $options\_template\_data, $apbct->api\_key); |
| [242](#L242) | } |
| [243](#L243) |  |
| [244](#L244) | /\*\* |
| [245](#L245) | \* Install plugin |
| [246](#L246) | \*/ |
| [247](#L247) | public static function action\_\_install\_plugin() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [248](#L248) | { |
| [249](#L249) | add\_action('wp', 'apbct\_rc\_\_install\_plugin', 1); |
| [250](#L250) | } |
| [251](#L251) |  |
| [252](#L252) | /\*\* |
| [253](#L253) | \* Activate plugin |
| [254](#L254) | \*/ |
| [255](#L255) | public static function action\_\_activate\_plugin() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [256](#L256) | { |
| [257](#L257) | return apbct\_rc\_\_activate\_plugin(Request::get('plugin')); |
| [258](#L258) | } |
| [259](#L259) |  |
| [260](#L260) | /\*\* |
| [261](#L261) | \* Update settins |
| [262](#L262) | \*/ |
| [263](#L263) | public static function action\_\_update\_settings() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [264](#L264) | { |
| [265](#L265) | return apbct\_rc\_\_update\_settings($\_REQUEST); |
| [266](#L266) | } |
| [267](#L267) |  |
| [268](#L268) | /\*\* |
| [269](#L269) | \* Deactivate plugin |
| [270](#L270) | \*/ |
| [271](#L271) | public static function action\_\_deactivate\_plugin() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [272](#L272) | { |
| [273](#L273) | add\_action('plugins\_loaded', 'apbct\_rc\_\_deactivate\_plugin', 1); |
| [274](#L274) | } |
| [275](#L275) |  |
| [276](#L276) | /\*\* |
| [277](#L277) | \* Uninstall plugin |
| [278](#L278) | \*/ |
| [279](#L279) | public static function action\_\_uninstall\_plugin() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [280](#L280) | { |
| [281](#L281) | add\_action('plugins\_loaded', 'apbct\_rc\_\_uninstall\_plugin', 1); |
| [282](#L282) | } |
| [283](#L283) |  |
| [284](#L284) | public static function action\_\_debug() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [285](#L285) | { |
| [286](#L286) | global $apbct, $wpdb; |
| [287](#L287) |  |
| [288](#L288) | $sfw\_table\_name = !empty($apbct->data['sfw\_common\_table\_name']) ? $apbct->data['sfw\_common\_table\_name'] : APBCT\_TBL\_FIREWALL\_DATA; |
| [289](#L289) |  |
| [290](#L290) | $out['sfw\_data\_base\_size'] = $wpdb->get\_var('SELECT COUNT(\*) FROM ' . $sfw\_table\_name); |
| [291](#L291) | $out['stats']              = $apbct->stats; |
| [292](#L292) | $out['settings']           = self::getSettings($apbct->settings); |
| [293](#L293) | $out['fw\_stats']           = $apbct->fw\_stats; |
| [294](#L294) | $out['data']               = $apbct->data; |
| [295](#L295) | $out['cron']               = $apbct->cron; |
| [296](#L296) | $out['errors']             = $apbct->errors; |
| [297](#L297) | $out['debug']              = $apbct->debug; |
| [298](#L298) | $out['queue']              = get\_option('cleantalk\_sfw\_update\_queue'); |
| [299](#L299) | $out['connection\_reports'] = $apbct->getConnectionReports()->remoteCallOutput(); |
| [300](#L300) | $out['cache\_plugins\_detected'] = apbct\_is\_cache\_plugins\_exists(true); |
| [301](#L301) |  |
| [302](#L302) | if ( APBCT\_WPMS ) { |
| [303](#L303) | $out['network\_settings'] = $apbct->network\_settings; |
| [304](#L304) | $out['network\_data']     = $apbct->network\_data; |
| [305](#L305) | } |
| [306](#L306) |  |
| [307](#L307) | // Output only one option |
| [308](#L308) | $show\_only = Get::get('show\_only'); |
| [309](#L309) | if ( $show\_only && isset($out[$show\_only]) ) { |
| [310](#L310) | /\*\* |
| [311](#L311) | \* @psalm-suppress InvalidArrayOffset |
| [312](#L312) | \*/ |
| [313](#L313) | $out = [$show\_only => $out[$show\_only]]; |
| [314](#L314) | } |
| [315](#L315) |  |
| [316](#L316) | if ( Request::equal('out', 'json') ) { |
| [317](#L317) | die(json\_encode($out)); |
| [318](#L318) | } |
| [319](#L319) | array\_walk($out, function (&$val, $\_key) { |
| [320](#L320) | $val = (array)$val; |
| [321](#L321) | }); |
| [322](#L322) |  |
| [323](#L323) | array\_walk\_recursive($out, function (&$val, $\_key) { |
| [324](#L324) | if ( is\_int($val) && preg\_match('@^\d{9,11}$@', (string)$val) ) { |
| [325](#L325) | $val = date('Y-m-d H:i:s', $val); |
| [326](#L326) | } |
| [327](#L327) | }); |
| [328](#L328) |  |
| [329](#L329) |  |
| [330](#L330) | $out = print\_r($out, true); |
| [331](#L331) | $out = str\_replace("\n", "<br>", $out); |
| [332](#L332) | $out = preg\_replace("/[^\S]{4}/", "&nbsp;&nbsp;&nbsp;&nbsp;", $out); |
| [333](#L333) |  |
| [334](#L334) | die($out); |
| [335](#L335) | } |
| [336](#L336) |  |
| [337](#L337) | /\*\* |
| [338](#L338) | \* The 'Cron::updateTask' remote call handler |
| [339](#L339) | \*/ |
| [340](#L340) | public static function action\_\_cron\_update\_task() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [341](#L341) | { |
| [342](#L342) | $update\_result = false; |
| [343](#L343) |  |
| [344](#L344) | if ( |
| [345](#L345) | Request::get('task') && |
| [346](#L346) | Request::get('handler') && |
| [347](#L347) | Request::get('period') && |
| [348](#L348) | Request::get('first\_call') |
| [349](#L349) | ) { |
| [350](#L350) | $cron          = new Cron(); |
| [351](#L351) | $update\_result = $cron->updateTask( |
| [352](#L352) | Request::get('task'), |
| [353](#L353) | Request::get('handler'), |
| [354](#L354) | (int)Request::get('period'), |
| [355](#L355) | (int)Request::get('first\_call') |
| [356](#L356) | ); |
| [357](#L357) | } |
| [358](#L358) |  |
| [359](#L359) | die($update\_result ? 'OK' : 'FAIL'); |
| [360](#L360) | } |
| [361](#L361) |  |
| [362](#L362) | public static function action\_\_post\_api\_key() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [363](#L363) | { |
| [364](#L364) | global $apbct; |
| [365](#L365) |  |
| [366](#L366) | if ( ! headers\_sent() ) { |
| [367](#L367) | header("Content-Type: application/json"); |
| [368](#L368) | } |
| [369](#L369) |  |
| [370](#L370) | $key = trim(Request::get('api\_key')); |
| [371](#L371) | if ( ! apbct\_api\_key\_\_is\_correct($key) ) { |
| [372](#L372) | die(json\_encode(['FAIL' => ['error' => 'Api key is incorrect']])); |
| [373](#L373) | } |
| [374](#L374) |  |
| [375](#L375) | require\_once APBCT\_DIR\_PATH . 'inc/cleantalk-settings.php'; |
| [376](#L376) |  |
| [377](#L377) | $template\_id = Request::get('apply\_template\_id'); |
| [378](#L378) | if ( ! empty($template\_id) ) { |
| [379](#L379) | $templates = CleantalkSettingsTemplates::getOptionsTemplate($key); |
| [380](#L380) | if ( ! empty($templates) ) { |
| [381](#L381) | foreach ( $templates as $template ) { |
| [382](#L382) | if ( $template['template\_id'] == $template\_id && ! empty($template['options\_site']) ) { |
| [383](#L383) | $template\_name = $template['template\_id']; |
| [384](#L384) | $settings      = $template['options\_site']; |
| [385](#L385) | $settings      = array\_replace((array)$apbct->settings, json\_decode($settings, true)); |
| [386](#L386) |  |
| [387](#L387) | $settings = \apbct\_settings\_\_validate($settings); |
| [388](#L388) |  |
| [389](#L389) | $apbct->settings = $settings; |
| [390](#L390) | $apbct->save('settings'); |
| [391](#L391) | $apbct->data['current\_settings\_template\_id']   = $template\_id; |
| [392](#L392) | $apbct->data['current\_settings\_template\_name'] = $template\_name; |
| [393](#L393) | $apbct->save('data'); |
| [394](#L394) | break; |
| [395](#L395) | } |
| [396](#L396) | } |
| [397](#L397) | } |
| [398](#L398) | } |
| [399](#L399) |  |
| [400](#L400) | $apbct->storage['settings']['apikey'] = $key; |
| [401](#L401) | $apbct->api\_key                       = $key; |
| [402](#L402) | $apbct->key\_is\_ok                     = true; |
| [403](#L403) | $apbct->save('settings'); |
| [404](#L404) |  |
| [405](#L405) | \apbct\_settings\_\_sync(true); |
| [406](#L406) |  |
| [407](#L407) | die(json\_encode(['OK' => ['template\_id' => $template\_id]])); |
| [408](#L408) | } |
| [409](#L409) |  |
| [410](#L410) | public static function action\_\_rest\_check() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [411](#L411) | { |
| [412](#L412) | $nonce = Post::get('\_rest\_nonce'); |
| [413](#L413) | if ( ! $nonce ) { |
| [414](#L414) | throw new \Exception('The nonce is not provided'); |
| [415](#L415) | } |
| [416](#L416) | $request = new \WP\_REST\_Request('POST', '/cleantalk-antispam/v1/apbct\_rest\_check'); |
| [417](#L417) | $request->set\_header('x\_wp\_nonce', $nonce); |
| [418](#L418) | $response = rest\_do\_request($request); |
| [419](#L419) | $server = rest\_get\_server(); |
| [420](#L420) | $data = $server->response\_to\_data($response, false); |
| [421](#L421) | return wp\_json\_encode($data); |
| [422](#L422) | } |
| [423](#L423) |  |
| [424](#L424) | private static function getSettings($settings) |
| [425](#L425) | { |
| [426](#L426) | $titles = array( |
| [427](#L427) | 'apikey' => 'Access key', |
| [428](#L428) | 'forms\_\_registrations\_test' => 'Registration Forms', |
| [429](#L429) | 'forms\_\_comments\_test' => 'Comments form', |
| [430](#L430) | 'forms\_\_contact\_forms\_test' => 'Contact Forms', |
| [431](#L431) | 'forms\_\_flamingo\_save\_spam' => 'Save Flamingo spam entries', |
| [432](#L432) | 'forms\_\_general\_contact\_forms\_test' => 'Custom contact forms', |
| [433](#L433) | 'forms\_\_search\_test' => 'Test default WordPress search form for spam', |
| [434](#L434) | 'forms\_\_check\_external' => 'Protect external forms', |
| [435](#L435) | 'forms\_\_check\_external\_\_capture\_buffer' => 'Capture buffer', |
| [436](#L436) | 'forms\_\_check\_internal' => 'Protect internal forms', |
| [437](#L437) | 'forms\_\_wc\_checkout\_test' => 'WooCommerce checkout form', |
| [438](#L438) | 'forms\_\_wc\_register\_from\_order' => 'Spam test for registration during checkout', |
| [439](#L439) | 'forms\_\_wc\_add\_to\_cart' => 'Check anonymous users when they add new items to the cart', |
| [440](#L440) | 'data\_\_wc\_store\_blocked\_orders' => 'Store blocked orders', |
| [441](#L441) | 'comments\_\_disable\_comments\_\_all' => 'Disable all comments', |
| [442](#L442) | 'comments\_\_disable\_comments\_\_posts' => 'Disable comments for all posts', |
| [443](#L443) | 'comments\_\_disable\_comments\_\_pages' => 'Disable comments for all pages', |
| [444](#L444) | 'comments\_\_disable\_comments\_\_media' => 'Disable comments for all media', |
| [445](#L445) | 'comments\_\_bp\_private\_messages' => 'BuddyPress Private Messages', |
| [446](#L446) | 'comments\_\_remove\_old\_spam' => 'Automatically delete spam comments', |
| [447](#L447) | 'comments\_\_remove\_comments\_links' => 'Remove links from approved comments', |
| [448](#L448) | 'comments\_\_show\_check\_links' => 'Show links to check Emails, IPs for spam', |
| [449](#L449) | 'comments\_\_manage\_comments\_on\_public\_page' => 'Manage comments on public pages', |
| [450](#L450) | 'data\_\_protect\_logged\_in' => 'Protect logged in Users', |
| [451](#L451) | 'comments\_\_check\_comments\_number' => "Don't check trusted user's comments", |
| [452](#L452) | 'data\_\_use\_ajax' => 'Use AJAX for JavaScript check', |
| [453](#L453) | 'data\_\_use\_static\_js\_key' => 'Use static keys for JavaScript check', |
| [454](#L454) | 'data\_\_general\_postdata\_test' => 'Check all post data', |
| [455](#L455) | 'data\_\_set\_cookies' => 'Set cookies', |
| [456](#L456) | 'data\_\_bot\_detector\_enabled' => 'Use JavaScript library', |
| [457](#L457) | 'exclusions\_\_bot\_detector' => 'JavaScript Library Exclusions', |
| [458](#L458) | 'exclusions\_\_bot\_detector\_\_form\_attributes' => 'Exclude any forms that has attribute matches', |
| [459](#L459) | 'exclusions\_\_bot\_detector\_\_form\_children\_attributes' => 'Exclude any forms that includes a child element with attribute matches', |
| [460](#L460) | 'exclusions\_\_bot\_detector\_\_form\_parent\_attributes' => 'Exclude any forms that includes a parent element with attribute matches', |
| [461](#L461) | 'wp\_\_use\_builtin\_http\_api' => 'Use WordPress HTTP API', |
| [462](#L462) | 'data\_\_pixel' => 'Add a Pixel to improve IP-detection', |
| [463](#L463) | 'data\_\_email\_check\_before\_post' => 'Check email before POST request', |
| [464](#L464) | 'data\_\_email\_check\_exist\_post' => 'Check email before POST request', |
| [465](#L465) | 'data\_\_honeypot\_field' => 'Add a honeypot field', |
| [466](#L466) | 'data\_\_email\_decoder' => 'Encode contact data', |
| [467](#L467) | 'data\_\_email\_decoder\_buffer' => 'Use the output buffer', |
| [468](#L468) | 'exclusions\_\_log\_excluded\_requests' => 'Log excluded requests', |
| [469](#L469) | 'exclusions\_\_urls' => 'URL exclusions', |
| [470](#L470) | 'exclusions\_\_urls\_\_use\_regexp' => 'Use Regular Expression in URL Exclusions', |
| [471](#L471) | 'exclusions\_\_fields' => 'Field Name Exclusions', |
| [472](#L472) | 'exclusions\_\_fields\_\_use\_regexp' => 'Use Regular Expression in Field Exclusions', |
| [473](#L473) | 'exclusions\_\_form\_signs' => 'Form Signs Exclusions', |
| [474](#L474) | 'exclusions\_\_roles' => 'Roles Exclusions', |
| [475](#L475) | 'admin\_bar\_\_show' => 'Show statistics in admin bar', |
| [476](#L476) | 'admin\_bar\_\_all\_time\_counter' => 'Show All-time counter', |
| [477](#L477) | 'admin\_bar\_\_daily\_counter' => 'Show 24 hours counter', |
| [478](#L478) | 'admin\_bar\_\_sfw\_counter' => 'SpamFireWall counter', |
| [479](#L479) | 'sfw\_\_random\_get' => 'Uniq GET option', |
| [480](#L480) | 'sfw\_\_custom\_logo' => 'Custom logo on SpamFireWall blocking pages', |
| [481](#L481) | 'sfw\_\_anti\_crawler' => 'Anti-Crawler', |
| [482](#L482) | 'sfw\_\_anti\_flood' => 'Anti-Flood', |
| [483](#L483) | 'sfw\_\_anti\_flood\_\_view\_limit' => 'Anti-Flood Page Views Limit', |
| [484](#L484) | 'misc\_\_send\_connection\_reports' => 'Send connection reports', |
| [485](#L485) | 'misc\_\_async\_js' => 'Async JavaScript loading', |
| [486](#L486) | 'misc\_\_store\_urls' => 'Store visited URLs', |
| [487](#L487) | 'wp\_\_comment\_notify' => 'Plugin stores last 5 visited URLs', |
| [488](#L488) | 'wp\_\_comment\_notify\_\_roles' => 'wp\_\_comment\_notify\_\_roles', |
| [489](#L489) | 'wp\_\_dashboard\_widget\_\_show' => 'Show Dashboard Widget', |
| [490](#L490) | 'misc\_\_complete\_deactivation' => 'Complete deactivation', |
| [491](#L491) | 'trusted\_and\_affiliate\_\_shortcode' => 'Shortcode', |
| [492](#L492) | 'trusted\_and\_affiliate\_\_shortcode\_tag' => 'Copy this text and place shortcode wherever you need', |
| [493](#L493) | 'trusted\_and\_affiliate\_\_footer' => 'Add to the footer', |
| [494](#L494) | 'trusted\_and\_affiliate\_\_under\_forms' => 'Add under forms', |
| [495](#L495) | 'trusted\_and\_affiliate\_\_add\_id' => 'Append your affiliate ID', |
| [496](#L496) | 'multisite\_\_work\_mode' => 'WordPress Multisite Work Mode', |
| [497](#L497) | 'multisite\_\_hoster\_api\_key' => 'Hoster Access key', |
| [498](#L498) | 'multisite\_\_white\_label' => 'Enable White Label Mode', |
| [499](#L499) | 'multisite\_\_white\_label\_\_plugin\_name' => 'Plugin name', |
| [500](#L500) | 'multisite\_\_allow\_custom\_settings' => 'Allow users to manage plugin settings', |
| [501](#L501) | 'multisite\_\_use\_settings\_template' => 'Use settings template', |
| [502](#L502) | 'multisite\_\_use\_settings\_template\_apply\_for\_new' => 'Apply for newly added sites', |
| [503](#L503) | 'multisite\_\_use\_settings\_template\_apply\_for\_current' => 'Apply for current sites', |
| [504](#L504) | 'multisite\_\_use\_settings\_template\_apply\_for\_current\_list\_sites' => 'Sites to apply settings', |
| [505](#L505) | ); |
| [506](#L506) |  |
| [507](#L507) | $out = []; |
| [508](#L508) |  |
| [509](#L509) | foreach ($settings as $key => $value) { |
| [510](#L510) | if (isset($titles[$key])) { |
| [511](#L511) | $out[$key . ' - ' . $titles[$key]] = $value; |
| [512](#L512) | continue; |
| [513](#L513) | } |
| [514](#L514) | $out[$key] = $value; |
| [515](#L515) | } |
| [516](#L516) |  |
| [517](#L517) | return $out; |
| [518](#L518) | } |
| [519](#L519) |  |
| [520](#L520) | /\*\* |
| [521](#L521) | \* Returns the fresh WP nonce depending on the AJAX type (rest/admin\_ajax). |
| [522](#L522) | \* @return string |
| [523](#L523) | \*/ |
| [524](#L524) | public static function action\_\_get\_fresh\_wpnonce() // phpcs:ignore PSR1.Methods.CamelCapsMethodName.NotCamelCaps |
| [525](#L525) | { |
| [526](#L526) | if ( ! isset($\_POST['nonce\_prev']) ) { |
| [527](#L527) | return json\_encode(array('error' => 'No nonce provided')); |
| [528](#L528) | } |
| [529](#L529) |  |
| [530](#L530) | $nonce\_prev = $\_POST['nonce\_prev']; |
| [531](#L531) | $nonce\_name = apbct\_settings\_\_get\_ajax\_type() === 'rest' |
| [532](#L532) | ? 'wp\_rest' |
| [533](#L533) | : 'ct\_secret\_stuff'; |
| [534](#L534) |  |
| [535](#L535) | // Check $nonce\_prev by regexp '^[a-f0-9]{10}$' |
| [536](#L536) | if ( ! preg\_match('/^[a-f0-9]{10}$/', $nonce\_prev) ) { |
| [537](#L537) | return json\_encode(array('error' => 'Wrong nonce provided')); |
| [538](#L538) | } |
| [539](#L539) |  |
| [540](#L540) | // set response type 'json' |
| [541](#L541) | header('Content-Type: application/json'); |
| [542](#L542) | return TT::toString( |
| [543](#L543) | json\_encode( |
| [544](#L544) | array( |
| [545](#L545) | 'wpnonce' => TT::toString(wp\_create\_nonce($nonce\_name)) |
| [546](#L546) | ) |
| [547](#L547) | ) |
| [548](#L548) | ); |
| [549](#L549) | } |
| [550](#L550) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php?format=txt)
* [Original Format](/export/3222464/cleantalk-spam-protect/tags/6.44/lib/Cleantalk/ApbctWP/RemoteCalls.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


