=== Content from togithub.com_a168cc01_20250115_115355.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faio-libs%2Faiohttp%2Fsecurity%2Fadvisories%2FGHSA-8qpw-xqxj-h4r2)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faio-libs%2Faiohttp%2Fsecurity%2Fadvisories%2FGHSA-8qpw-xqxj-h4r2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=aio-libs%2Faiohttp)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aio-libs](/aio-libs)
/
**[aiohttp](/aio-libs/aiohttp)**
Public

* [Notifications](/login?return_to=%2Faio-libs%2Faiohttp) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Faio-libs%2Faiohttp)
* [Star
   15.3k](/login?return_to=%2Faio-libs%2Faiohttp)

* [Code](/aio-libs/aiohttp)
* [Issues
  189](/aio-libs/aiohttp/issues)
* [Pull requests
  62](/aio-libs/aiohttp/pulls)
* [Discussions](/aio-libs/aiohttp/discussions)
* [Actions](/aio-libs/aiohttp/actions)
* [Security](/aio-libs/aiohttp/security)
* [Insights](/aio-libs/aiohttp/pulse)

Additional navigation options

* [Code](/aio-libs/aiohttp)
* [Issues](/aio-libs/aiohttp/issues)
* [Pull requests](/aio-libs/aiohttp/pulls)
* [Discussions](/aio-libs/aiohttp/discussions)
* [Actions](/aio-libs/aiohttp/actions)
* [Security](/aio-libs/aiohttp/security)
* [Insights](/aio-libs/aiohttp/pulse)

# HTTP parser (the python one, not llhttp) still overly lenient about separators

Low

[Dreamsorcerer](/Dreamsorcerer)
published
GHSA-8qpw-xqxj-h4r2
Jan 29, 2024

## Package

pip

aiohttp
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

< 3.9.1

## Patched versions

3.9.2

## Description

### Summary

Security-sensitive parts of the *Python HTTP parser* retained minor differences in allowable character sets, that must trigger error handling to robustly match frame boundaries of proxies in order to protect against injection of additional requests. Additionally, validation could trigger exceptions that were not handled consistently with processing of other malformed input.

### Details

These problems are rooted in pattern matching protocol elements, previously improved by PR [#3235](https://github.com/aio-libs/aiohttp/pull/3235) and [GHSA-gfw2-4jvh-wgfg](https://github.com/advisories/GHSA-gfw2-4jvh-wgfg "GHSA-gfw2-4jvh-wgfg"):

1. The expression `HTTP/(\d).(\d)` lacked another backslash to clarify that the separator should be a literal dot, not just *any* Unicode code point (result: `HTTP/(\d)\.(\d)`).
2. The HTTP version was permitting Unicode digits, where only ASCII digits are standards-compliant.
3. Distinct regular expressions for validating HTTP Method and Header field names were used - though both should (at least) apply the common restrictions of rfc9110 `token`.

### PoC

`GET / HTTP/1√∂1`

`GET / HTTP/1.ùüô`

`GET/: HTTP/1.1`

`Content-Encoding?: chunked`

### Impact

Primarily concerns running an aiohttp server without llhttp:

1. **behind a proxy**: Being more lenient than internet standards require could, depending on deployment environment, assist in request smuggling.
2. **directly accessible** or exposed behind proxies relaying malformed input: the unhandled exception could cause excessive resource consumption on the application server and/or its logging facilities.

---

Patch: <https://github.com/aio-libs/aiohttp/pull/8074/files>

### Severity

Low

### CVE ID

CVE-2024-23829

### Weaknesses

[CWE-444](/advisories?query=cwe%3A444)

### Credits

* [![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)
  [pajod](/pajod)
  Reporter

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from lists.fedoraproject.org_0f88d4d2_20250114_195516.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ICUOCFGTB25WUT336BZ4UNYLSZOUVKBD/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ICUOCFGTB25WUT336BZ4UNYLSZOUVKBD/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ICUOCFGTB25WUT336BZ4UNYLSZOUVKBD/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/ICUOCFGTB25WUT336BZ4UNYLSZOUVKBD/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

√ó
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-ICUOCFGTB25WUT336BZ4UNYLSZOUVKBD.mbox.gz?message=ICUOCFGTB25WUT336BZ4UNYLSZOUVKBD "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/ICUOCFGTB25WUT336BZ4UNYLSZOUVKBD/#ICUOCFGTB25WUT336BZ4UNYLSZOUVKBD)

# [SECURITY] Fedora 38 Update: python-aiohttp-3.9.3-1.fc38

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updatesÔº†fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updatesÔº†fedoraproject.org")

8 Feb
2024

8 Feb
'24

8:52 p.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2024-0ddda4c691
2024-02-09 01:50:00.832021
--------------------------------------------------------------------------------

Name : python-aiohttp
Product : Fedora 38
Version : 3.9.3
Release : 1.fc38
URL : <https://github.com/aio-libs/aiohttp>
Summary : Python HTTP client/server for asyncio
Description :
Python HTTP client/server for asyncio which supports both the client and the
server side of the HTTP protocol, client and server websocket, and webservers
with middlewares and pluggable routing.

--------------------------------------------------------------------------------
Update Information:

Security update for CVE-2024-23334 and CVE-2024-23829
<https://github.com/aio-libs/aiohttp/releases/tag/v3.9.2>
<https://github.com/aio-libs/aiohttp/releases/tag/v3.9.3>
--------------------------------------------------------------------------------
ChangeLog:

\* Tue Jan 30 2024 Benjamin A. Beasley code@musicinmybrain.net - 3.9.3-1
- Update to 3.9.3, security update for CVE-2024-23334 and CVE-2024-23829 (fix
RHBZ#2261891, fix RHBZ#2261910)
\* Tue Jan 30 2024 Benjamin A. Beasley code@musicinmybrain.net - 3.9.1-4
- Skip a couple of spurious or insignificant test failures (close RHBZ#2261544)
\* Fri Jan 26 2024 Fedora Release Engineering releng@fedoraproject.org - 3.9.1-3
- Rebuilt for <https://fedoraproject.org/wiki/Fedora_40_Mass_Rebuild>
\* Sun Jan 21 2024 Fedora Release Engineering releng@fedoraproject.org - 3.9.1-2
- Rebuilt for <https://fedoraproject.org/wiki/Fedora_40_Mass_Rebuild>
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #2261887 - CVE-2024-23334 aiohttp: follow\_symlinks directory traversal vulnerability
<https://bugzilla.redhat.com/show_bug.cgi?id=2261887>
[ 2 ] Bug #2261909 - CVE-2024-23829 python-aiohttp: http request smuggling
<https://bugzilla.redhat.com/show_bug.cgi?id=2261909>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2024-0ddda4c691' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/ICUOCFGTB25WUT336BZ4UNYLSZOUVKBD/#ICUOCFGTB25WUT336BZ4UNYLSZOUVKBD)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from github.com_573d2535_20250114_195507.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faio-libs%2Faiohttp%2Fcommit%2F33ccdfb0a12690af5bb49bda2319ec0907fa7827)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faio-libs%2Faiohttp%2Fcommit%2F33ccdfb0a12690af5bb49bda2319ec0907fa7827)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=aio-libs%2Faiohttp)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aio-libs](/aio-libs)
/
**[aiohttp](/aio-libs/aiohttp)**
Public

* [Notifications](/login?return_to=%2Faio-libs%2Faiohttp) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Faio-libs%2Faiohttp)
* [Star
   15.3k](/login?return_to=%2Faio-libs%2Faiohttp)

* [Code](/aio-libs/aiohttp)
* [Issues
  189](/aio-libs/aiohttp/issues)
* [Pull requests
  62](/aio-libs/aiohttp/pulls)
* [Discussions](/aio-libs/aiohttp/discussions)
* [Actions](/aio-libs/aiohttp/actions)
* [Security](/aio-libs/aiohttp/security)
* [Insights](/aio-libs/aiohttp/pulse)

Additional navigation options

* [Code](/aio-libs/aiohttp)
* [Issues](/aio-libs/aiohttp/issues)
* [Pull requests](/aio-libs/aiohttp/pulls)
* [Discussions](/aio-libs/aiohttp/discussions)
* [Actions](/aio-libs/aiohttp/actions)
* [Security](/aio-libs/aiohttp/security)
* [Insights](/aio-libs/aiohttp/pulse)

## Commit

[Permalink](/aio-libs/aiohttp/commit/33ccdfb0a12690af5bb49bda2319ec0907fa7827)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Improve validation in HTTP parser ([#8074](https://github.com/aio-libs/aiohttp/pull/8074))

[Browse files](/aio-libs/aiohttp/tree/33ccdfb0a12690af5bb49bda2319ec0907fa7827)
Browse the repository at this point in the history

```
Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ) <sviat@redhat.com>
```

* Loading branch information

[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer) [![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod) [![@webknjaz](https://avatars.githubusercontent.com/u/578543?s=40&v=4)](/webknjaz)

3 people

authored
Jan 28, 2024

1 parent
[822fbc7](/aio-libs/aiohttp/commit/822fbc7431f3c5522d3e587ad0b658bef8b6a0ab)

commit 33ccdfb

 Show file tree

 Hide file tree

Showing
**4 changed files**
with
**164 additions**
and
**17 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* CHANGES

  + CHANGES/8074.bugfix.rst
    [8074.bugfix.rst](#diff-4b49c6e2a1807737f22dd7010ed6b68b6d374749786991e3eec2b7ea395159d5)
* CONTRIBUTORS.txt
  [CONTRIBUTORS.txt](#diff-44b5b723e10631f6405ab05e55bf01c1e807bb8ba3955d7fdbdb20942e5b28b4)
* aiohttp

  + aiohttp/http\_parser.py
    [http\_parser.py](#diff-197153342549adb4b25580f8b842876841eec42dc48ae12cb72ba2ae4f7ced10)
* tests

  + tests/test\_http\_parser.py
    [test\_http\_parser.py](#diff-76b0b02daa82174aa89afea7f661160a60cfd3f7baeabad08ff4c29a141e57d4)

## There are no files selected for viewing

5 changes: 5 additions & 0 deletions

5
[CHANGES/8074.bugfix.rst](#diff-4b49c6e2a1807737f22dd7010ed6b68b6d374749786991e3eec2b7ea395159d5 "CHANGES/8074.bugfix.rst")

Show comments

[View file](/aio-libs/aiohttp/blob/33ccdfb0a12690af5bb49bda2319ec0907fa7827/CHANGES/8074.bugfix.rst)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,5 @@ |
|  |  | Fixed an unhandled exception in the Python HTTP parser on header lines starting with a colon -- by :user:`pajod`. |
|  |  |  |
|  |  | Invalid request lines with anything but a dot between the HTTP major and minor version are now rejected. Invalid header field names containing question mark or slash are now rejected. Such requests are incompatible with :rfc:`9110#section-5.6.2` and are not known to be of any legitimate use. |
|  |  |  |
|  |  | (BACKWARD INCOMPATIBLE) |

1 change: 1 addition & 0 deletions

1
[CONTRIBUTORS.txt](#diff-44b5b723e10631f6405ab05e55bf01c1e807bb8ba3955d7fdbdb20942e5b28b4 "CONTRIBUTORS.txt")

Show comments

[View file](/aio-libs/aiohttp/blob/33ccdfb0a12690af5bb49bda2319ec0907fa7827/CONTRIBUTORS.txt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -263,6 +263,7 @@ Pankaj Pandey |
|  |  | Parag Jain |
|  |  | Pau Freixes |
|  |  | Paul Colomiets |
|  |  | Paul J. Dorn |
|  |  | Paulius ≈†ileikis |
|  |  | Paulus Schoutsen |
|  |  | Pavel Kamaev |
| Expand Down | |  |

32 changes: 18 additions & 14 deletions

32
[aiohttp/http\_parser.py](#diff-197153342549adb4b25580f8b842876841eec42dc48ae12cb72ba2ae4f7ced10 "aiohttp/http_parser.py")

Show comments

[View file](/aio-libs/aiohttp/blob/33ccdfb0a12690af5bb49bda2319ec0907fa7827/aiohttp/http_parser.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -69,12 +69,11 @@ |
|  |  | # tchar = "!" / "#" / "$" / "%" / "&" / "'" / "\*" / "+" / "-" / "." / |
|  |  | # "^" / "\_" / "`" / "|" / "~" / DIGIT / ALPHA |
|  |  | # token = 1\*tchar |
|  |  | METHRE: Final[Pattern[str]] = re.compile(r"[!#$%&'\*+\-.^\_`|~0-9A-Za-z]+") |
|  |  | VERSRE: Final[Pattern[str]] = re.compile(r"HTTP/(\d).(\d)") |
|  |  | HDRRE: Final[Pattern[bytes]] = re.compile( |
|  |  | rb"[\x00-\x1F\x7F-\xFF()<>@,;:\[\]={} \t\"\\]" |
|  |  | ) |
|  |  | HEXDIGIT = re.compile(rb"[0-9a-fA-F]+") |
|  |  | \_TCHAR\_SPECIALS: Final[str] = re.escape("!#$%&'\*+-.^\_`|~") |
|  |  | TOKENRE: Final[Pattern[str]] = re.compile(f"[0-9A-Za-z{\_TCHAR\_SPECIALS}]+") |
|  |  | VERSRE: Final[Pattern[str]] = re.compile(r"HTTP/(\d)\.(\d)", re.ASCII) |
|  |  | DIGITS: Final[Pattern[str]] = re.compile(r"\d+", re.ASCII) |
|  |  | HEXDIGITS: Final[Pattern[bytes]] = re.compile(rb"[0-9a-fA-F]+") |
|  |  |  |
|  |  |  |
|  |  | class RawRequestMessage(NamedTuple): |
| Expand Down  Expand Up | | @@ -133,6 +132,7 @@ def parse\_headers( |
|  |  | self, lines: List[bytes] |
|  |  | ) -> Tuple["CIMultiDictProxy[str]", RawHeaders]: |
|  |  | headers: CIMultiDict[str] = CIMultiDict() |
|  |  | # note: "raw" does not mean inclusion of OWS before/after the field value |
|  |  | raw\_headers = [] |
|  |  |  |
|  |  | lines\_idx = 1 |
| Expand All | | @@ -146,13 +146,14 @@ def parse\_headers( |
|  |  | except ValueError: |
|  |  | raise InvalidHeader(line) from None |
|  |  |  |
|  |  | if len(bname) == 0: |
|  |  | raise InvalidHeader(bname) |
|  |  |  |
|  |  | # https://www.rfc-editor.org/rfc/rfc9112.html#section-5.1-2 |
|  |  | if {bname[0], bname[-1]} & {32, 9}: # {" ", "\t"} |
|  |  | raise InvalidHeader(line) |
|  |  |  |
|  |  | bvalue = bvalue.lstrip(b" \t") |
|  |  | if HDRRE.search(bname): |
|  |  | raise InvalidHeader(bname) |
|  |  | if len(bname) > self.max\_field\_size: |
|  |  | raise LineTooLong( |
|  |  | "request header name {}".format( |
| Expand All | | @@ -161,6 +162,9 @@ def parse\_headers( |
|  |  | str(self.max\_field\_size), |
|  |  | str(len(bname)), |
|  |  | ) |
|  |  | name = bname.decode("utf-8", "surrogateescape") |
|  |  | if not TOKENRE.fullmatch(name): |
|  |  | raise InvalidHeader(bname) |
|  |  |  |
|  |  | header\_length = len(bvalue) |
|  |  |  |
| Expand Down  Expand Up | | @@ -207,7 +211,6 @@ def parse\_headers( |
|  |  | ) |
|  |  |  |
|  |  | bvalue = bvalue.strip(b" \t") |
|  |  | name = bname.decode("utf-8", "surrogateescape") |
|  |  | value = bvalue.decode("utf-8", "surrogateescape") |
|  |  |  |
|  |  | # https://www.rfc-editor.org/rfc/rfc9110.html#section-5.5-5 |
| Expand Down  Expand Up | | @@ -331,7 +334,8 @@ def get\_content\_length() -> Optional[int]: |
|  |  |  |
|  |  | # Shouldn't allow +/- or other number formats. |
|  |  | # https://www.rfc-editor.org/rfc/rfc9110#section-8.6-2 |
|  |  | if not length\_hdr.strip(" \t").isdecimal(): |
|  |  | # msg.headers is already stripped of leading/trailing wsp |
|  |  | if not DIGITS.fullmatch(length\_hdr): |
|  |  | raise InvalidHeader(CONTENT\_LENGTH) |
|  |  |  |
|  |  | return int(length\_hdr) |
| Expand Down  Expand Up | | @@ -559,7 +563,7 @@ def parse\_message(self, lines: List[bytes]) -> RawRequestMessage: |
|  |  | ) |
|  |  |  |
|  |  | # method |
|  |  | if not METHRE.fullmatch(method): |
|  |  | if not TOKENRE.fullmatch(method): |
|  |  | raise BadStatusLine(method) |
|  |  |  |
|  |  | # version |
| Expand Down  Expand Up | | @@ -676,8 +680,8 @@ def parse\_message(self, lines: List[bytes]) -> RawResponseMessage: |
|  |  | raise BadStatusLine(line) |
|  |  | version\_o = HttpVersion(int(match.group(1)), int(match.group(2))) |
|  |  |  |
|  |  | # The status code is a three-digit number |
|  |  | if len(status) != 3 or not status.isdecimal(): |
|  |  | # The status code is a three-digit ASCII number, no padding |
|  |  | if len(status) != 3 or not DIGITS.fullmatch(status): |
|  |  | raise BadStatusLine(line) |
|  |  | status\_i = int(status) |
|  |  |  |
| Expand Down  Expand Up | | @@ -818,7 +822,7 @@ def feed\_data( |
|  |  | if self.\_lax: # Allow whitespace in lax mode. |
|  |  | size\_b = size\_b.strip() |
|  |  |  |
|  |  | if not re.fullmatch(HEXDIGIT, size\_b): |
|  |  | if not re.fullmatch(HEXDIGITS, size\_b): |
|  |  | exc = TransferEncodingError( |
|  |  | chunk[:pos].decode("ascii", "surrogateescape") |
|  |  | ) |
| Expand Down | |  |

143 changes: 140 additions & 3 deletions

143
[tests/test\_http\_parser.py](#diff-76b0b02daa82174aa89afea7f661160a60cfd3f7baeabad08ff4c29a141e57d4 "tests/test_http_parser.py")

Show comments

[View file](/aio-libs/aiohttp/blob/33ccdfb0a12690af5bb49bda2319ec0907fa7827/tests/test_http_parser.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -3,7 +3,8 @@ |
|  |  |  |
|  |  | import asyncio |
|  |  | import re |
|  |  | from typing import Any, List |
|  |  | from contextlib import nullcontext |
|  |  | from typing import Any, Dict, List |
|  |  | from unittest import mock |
|  |  | from urllib.parse import quote |
|  |  |  |
| Expand Down  Expand Up | | @@ -168,11 +169,27 @@ def test\_cve\_2023\_37276(parser: Any) -> None: |
|  |  | parser.feed\_data(text) |
|  |  |  |
|  |  |  |
|  |  | @pytest.mark.parametrize( |
|  |  | "rfc9110\_5\_6\_2\_token\_delim", |
|  |  | r'"(),/:;<=>?@[\]{}', |
|  |  | ) |
|  |  | def test\_bad\_header\_name(parser: Any, rfc9110\_5\_6\_2\_token\_delim: str) -> None: |
|  |  | text = f"POST / HTTP/1.1\r\nhead{rfc9110\_5\_6\_2\_token\_delim}er: val\r\n\r\n".encode() |
|  |  | expectation = pytest.raises(http\_exceptions.BadHttpMessage) |
|  |  | if rfc9110\_5\_6\_2\_token\_delim == ":": |
|  |  | # Inserting colon into header just splits name/value earlier. |
|  |  | expectation = nullcontext() |
|  |  | with expectation: |
|  |  | parser.feed\_data(text) |
|  |  |  |
|  |  |  |
|  |  | @pytest.mark.parametrize( |
|  |  | "hdr", |
|  |  | ( |
|  |  | "Content-Length: -5", # https://www.rfc-editor.org/rfc/rfc9110.html#name-content-length |
|  |  | "Content-Length: +256", |
|  |  | "Content-Length: \N{superscript one}", |
|  |  | "Content-Length: \N{mathematical double-struck digit one}", |
|  |  | "Foo: abc\rdef", # https://www.rfc-editor.org/rfc/rfc9110.html#section-5.5-5 |
|  |  | "Bar: abc\ndef", |
|  |  | "Baz: abc\x00def", |
| Expand Down  Expand Up | | @@ -265,6 +282,20 @@ def test\_parse\_headers\_longline(parser: Any) -> None: |
|  |  | parser.feed\_data(text) |
|  |  |  |
|  |  |  |
|  |  | def test\_parse\_unusual\_request\_line(parser: Any) -> None: |
|  |  | if not isinstance(response, HttpResponseParserPy): |
|  |  | pytest.xfail("Regression test for Py parser. May match C behaviour later.") |
|  |  | text = b"#smol //a HTTP/1.3\r\n\r\n" |
|  |  | messages, upgrade, tail = parser.feed\_data(text) |
|  |  | assert len(messages) == 1 |
|  |  | msg, \_ = messages[0] |
|  |  | assert msg.compression is None |
|  |  | assert not msg.upgrade |
|  |  | assert msg.method == "#smol" |
|  |  | assert msg.path == "//a" |
|  |  | assert msg.version == (1, 3) |
|  |  |  |
|  |  |  |
|  |  | def test\_parse(parser: Any) -> None: |
|  |  | text = b"GET /test HTTP/1.1\r\n\r\n" |
|  |  | messages, upgrade, tail = parser.feed\_data(text) |
| Expand Down  Expand Up | | @@ -567,6 +598,45 @@ def test\_headers\_content\_length\_err\_2(parser: Any) -> None: |
|  |  | parser.feed\_data(text) |
|  |  |  |
|  |  |  |
|  |  | \_pad: Dict[bytes, str] = { |
|  |  | b"": "empty", |
|  |  | # not a typo. Python likes triple zero |
|  |  | b"\000": "NUL", |
|  |  | b" ": "SP", |
|  |  | b" ": "SPSP", |
|  |  | # not a typo: both 0xa0 and 0x0a in case of 8-bit fun |
|  |  | b"\n": "LF", |
|  |  | b"\xa0": "NBSP", |
|  |  | b"\t ": "TABSP", |
|  |  | } |
|  |  |  |
|  |  |  |
|  |  | @pytest.mark.parametrize("hdr", [b"", b"foo"], ids=["name-empty", "with-name"]) |
|  |  | @pytest.mark.parametrize("pad2", \_pad.keys(), ids=["post-" + n for n in \_pad.values()]) |
|  |  | @pytest.mark.parametrize("pad1", \_pad.keys(), ids=["pre-" + n for n in \_pad.values()]) |
|  |  | def test\_invalid\_header\_spacing( |
|  |  | parser: Any, pad1: bytes, pad2: bytes, hdr: bytes |
|  |  | ) -> None: |
|  |  | text = b"GET /test HTTP/1.1\r\n" b"%s%s%s: value\r\n\r\n" % (pad1, hdr, pad2) |
|  |  | expectation = pytest.raises(http\_exceptions.BadHttpMessage) |
|  |  | if pad1 == pad2 == b"" and hdr != b"": |
|  |  | # one entry in param matrix is correct: non-empty name, not padded |
|  |  | expectation = nullcontext() |
|  |  | if pad1 == pad2 == hdr == b"": |
|  |  | if not isinstance(response, HttpResponseParserPy): |
|  |  | pytest.xfail("Regression test for Py parser. May match C behaviour later.") |
|  |  | with expectation: |
|  |  | parser.feed\_data(text) |
|  |  |  |
|  |  |  |
|  |  | def test\_empty\_header\_name(parser: Any) -> None: |
|  |  | if not isinstance(response, HttpResponseParserPy): |
|  |  | pytest.xfail("Regression test for Py parser. May match C behaviour later.") |
|  |  | text = b"GET /test HTTP/1.1\r\n" b":test\r\n\r\n" |
|  |  | with pytest.raises(http\_exceptions.BadHttpMessage): |
|  |  | parser.feed\_data(text) |
|  |  |  |
|  |  |  |
|  |  | def test\_invalid\_header(parser: Any) -> None: |
|  |  | text = b"GET /test HTTP/1.1\r\n" b"test line\r\n\r\n" |
|  |  | with pytest.raises(http\_exceptions.BadHttpMessage): |
| Expand Down  Expand Up | | @@ -689,6 +759,34 @@ def test\_http\_request\_bad\_status\_line(parser: Any) -> None: |
|  |  | assert r"\n" not in exc\_info.value.message |
|  |  |  |
|  |  |  |
|  |  | \_num: Dict[bytes, str] = { |
|  |  | # dangerous: accepted by Python int() |
|  |  | # unicodedata.category("\U0001D7D9") == 'Nd' |
|  |  | "\N{mathematical double-struck digit one}".encode(): "utf8digit", |
|  |  | # only added for interop tests, refused by Python int() |
|  |  | # unicodedata.category("\U000000B9") == 'No' |
|  |  | "\N{superscript one}".encode(): "utf8number", |
|  |  | "\N{superscript one}".encode("latin-1"): "latin1number", |
|  |  | } |
|  |  |  |
|  |  |  |
|  |  | @pytest.mark.parametrize("nonascii\_digit", \_num.keys(), ids=\_num.values()) |
|  |  | def test\_http\_request\_bad\_status\_line\_number( |
|  |  | parser: Any, nonascii\_digit: bytes |
|  |  | ) -> None: |
|  |  | text = b"GET /digit HTTP/1." + nonascii\_digit + b"\r\n\r\n" |
|  |  | with pytest.raises(http\_exceptions.BadStatusLine): |
|  |  | parser.feed\_data(text) |
|  |  |  |
|  |  |  |
|  |  | def test\_http\_request\_bad\_status\_line\_separator(parser: Any) -> None: |
|  |  | # single code point, old, multibyte NFKC, multibyte NFKD |
|  |  | utf8sep = "\N{arabic ligature sallallahou alayhe wasallam}".encode() |
|  |  | text = b"GET /ligature HTTP/1" + utf8sep + b"1\r\n\r\n" |
|  |  | with pytest.raises(http\_exceptions.BadStatusLine): |
|  |  | parser.feed\_data(text) |
|  |  |  |
|  |  |  |
|  |  | def test\_http\_request\_bad\_status\_line\_whitespace(parser: Any) -> None: |
|  |  | text = b"GET\n/path\fHTTP/1.1\r\n\r\n" |
|  |  | with pytest.raises(http\_exceptions.BadStatusLine): |
| Expand All | | @@ -710,6 +808,31 @@ def test\_http\_request\_upgrade(parser: Any) -> None: |
|  |  | assert tail == b"some raw data" |
|  |  |  |
|  |  |  |
|  |  | def test\_http\_request\_parser\_utf8\_request\_line(parser: Any) -> None: |
|  |  | if not isinstance(response, HttpResponseParserPy): |
|  |  | pytest.xfail("Regression test for Py parser. May match C behaviour later.") |
|  |  | messages, upgrade, tail = parser.feed\_data( |
|  |  | # note the truncated unicode sequence |
|  |  | b"GET /P\xc3\xbcnktchen\xa0\xef\xb7 HTTP/1.1\r\n" + |
|  |  | # for easier grep: ASCII 0xA0 more commonly known as non-breaking space |
|  |  | # note the leading and trailing spaces |
|  |  | "sTeP: \N{latin small letter sharp s}nek\t\N{no-break space} " |
|  |  | "\r\n\r\n".encode() |
|  |  | ) |
|  |  | msg = messages[0][0] |
|  |  |  |
|  |  | assert msg.method == "GET" |
|  |  | assert msg.path == "/P√ºnktchen\udca0\udcef\udcb7" |
|  |  | assert msg.version == (1, 1) |
|  |  | assert msg.headers == CIMultiDict([("STEP", "√ünek\t\xa0")]) |
|  |  | assert msg.raw\_headers == ((b"sTeP", "√ünek\t\xa0".encode()),) |
|  |  | assert not msg.should\_close |
|  |  | assert msg.compression is None |
|  |  | assert not msg.upgrade |
|  |  | assert not msg.chunked |
|  |  | assert msg.url.path == URL("/P%C3%BCnktchen\udca0\udcef\udcb7").path |
|  |  |  |
|  |  |  |
|  |  | def test\_http\_request\_parser\_utf8(parser: Any) -> None: |
|  |  | text = "GET /path HTTP/1.1\r\nx-test:—Ç–µ—Å—Ç\r\n\r\n".encode() |
|  |  | messages, upgrade, tail = parser.feed\_data(text) |
| Expand Down  Expand Up | | @@ -759,9 +882,15 @@ def test\_http\_request\_parser\_two\_slashes(parser: Any) -> None: |
|  |  | assert not msg.chunked |
|  |  |  |
|  |  |  |
|  |  | def test\_http\_request\_parser\_bad\_method(parser: Any) -> None: |
|  |  | @pytest.mark.parametrize( |
|  |  | "rfc9110\_5\_6\_2\_token\_delim", |
|  |  | [bytes([i]) for i in rb'"(),/:;<=>?@[\]{}'], |
|  |  | ) |
|  |  | def test\_http\_request\_parser\_bad\_method( |
|  |  | parser: Any, rfc9110\_5\_6\_2\_token\_delim: bytes |
|  |  | ) -> None: |
|  |  | with pytest.raises(http\_exceptions.BadStatusLine): |
|  |  | parser.feed\_data(b'G=":<>(e),[T];?" /get HTTP/1.1\r\n\r\n') |
|  |  | parser.feed\_data(rfc9110\_5\_6\_2\_token\_delim + b'ET" /get HTTP/1.1\r\n\r\n') |
|  |  |  |
|  |  |  |
|  |  | def test\_http\_request\_parser\_bad\_version(parser: Any) -> None: |
| Expand Down  Expand Up | | @@ -979,6 +1108,14 @@ def test\_http\_response\_parser\_code\_not\_int(response: Any) -> None: |
|  |  | response.feed\_data(b"HTTP/1.1 ttt test\r\n\r\n") |
|  |  |  |
|  |  |  |
|  |  | @pytest.mark.parametrize("nonascii\_digit", \_num.keys(), ids=\_num.values()) |
|  |  | def test\_http\_response\_parser\_code\_not\_ascii( |
|  |  | response: Any, nonascii\_digit: bytes |
|  |  | ) -> None: |
|  |  | with pytest.raises(http\_exceptions.BadStatusLine): |
|  |  | response.feed\_data(b"HTTP/1.1 20" + nonascii\_digit + b" test\r\n\r\n") |
|  |  |  |
|  |  |  |
|  |  | def test\_http\_request\_chunked\_payload(parser: Any) -> None: |
|  |  | text = b"GET /test HTTP/1.1\r\n" b"transfer-encoding: chunked\r\n\r\n" |
|  |  | msg, payload = parser.feed\_data(text)[0][0] |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `33ccdfb`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faio-libs%2Faiohttp%2Fcommit%2F33ccdfb0a12690af5bb49bda2319ec0907fa7827) to comment.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_204f43e7_20250114_195512.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faio-libs%2Faiohttp%2Fpull%2F8074)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faio-libs%2Faiohttp%2Fpull%2F8074)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=aio-libs%2Faiohttp)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aio-libs](/aio-libs)
/
**[aiohttp](/aio-libs/aiohttp)**
Public

* [Notifications](/login?return_to=%2Faio-libs%2Faiohttp) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Faio-libs%2Faiohttp)
* [Star
   15.3k](/login?return_to=%2Faio-libs%2Faiohttp)

* [Code](/aio-libs/aiohttp)
* [Issues
  189](/aio-libs/aiohttp/issues)
* [Pull requests
  62](/aio-libs/aiohttp/pulls)
* [Discussions](/aio-libs/aiohttp/discussions)
* [Actions](/aio-libs/aiohttp/actions)
* [Security](/aio-libs/aiohttp/security)
* [Insights](/aio-libs/aiohttp/pulse)

Additional navigation options

* [Code](/aio-libs/aiohttp)
* [Issues](/aio-libs/aiohttp/issues)
* [Pull requests](/aio-libs/aiohttp/pulls)
* [Discussions](/aio-libs/aiohttp/discussions)
* [Actions](/aio-libs/aiohttp/actions)
* [Security](/aio-libs/aiohttp/security)
* [Insights](/aio-libs/aiohttp/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Faio-libs%2Faiohttp%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Faio-libs%2Faiohttp%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Improve validation in HTTP parser #8074

 Merged

[Dreamsorcerer](/Dreamsorcerer)
merged 24 commits into
[master](/aio-libs/aiohttp/tree/master "aio-libs/aiohttp:master")
from
[thing1](/aio-libs/aiohttp/tree/thing1 "aio-libs/aiohttp:thing1")

Jan 28, 2024

 Merged

# [Improve validation in HTTP parser](#top) #8074

[Dreamsorcerer](/Dreamsorcerer)
merged 24 commits into
[master](/aio-libs/aiohttp/tree/master "aio-libs/aiohttp:master")
from
[thing1](/aio-libs/aiohttp/tree/thing1 "aio-libs/aiohttp:thing1")

Jan 28, 2024

+164

‚àí17

[Conversation
9](/aio-libs/aiohttp/pull/8074)
[Commits
24](/aio-libs/aiohttp/pull/8074/commits)
[Checks
34](/aio-libs/aiohttp/pull/8074/checks)
[Files changed
4](/aio-libs/aiohttp/pull/8074/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=60&v=4)](/Dreamsorcerer)

Copy link

Member

### @Dreamsorcerer **[Dreamsorcerer](/Dreamsorcerer)** commented [Jan 28, 2024](#issue-2104234725)

 *No description provided.*

Sorry, something went wrong.

All reactions

 [pajod](/pajod)
and others
added 23 commits
[December 18, 2023 12:26](#commits-pushed-dc567ba)

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[http_parser: test edge cases](/aio-libs/aiohttp/pull/8074/commits/dc567ba4119c26d49fe579c285b57bc34a48a05c "http_parser: test edge cases")`

`[dc567ba](/aio-libs/aiohttp/pull/8074/commits/dc567ba4119c26d49fe579c285b57bc34a48a05c)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[http_parser: enforce HTTP version & header sep](/aio-libs/aiohttp/pull/8074/commits/00cb2a2ad5a27602bec149a9402e5b5410eb9c32 "http_parser: enforce HTTP version & header sep")`

`[00cb2a2](/aio-libs/aiohttp/pull/8074/commits/00cb2a2ad5a27602bec149a9402e5b5410eb9c32)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[style: remove backslash from METHRE](/aio-libs/aiohttp/pull/8074/commits/3b7e9eb0a52f098715d210a5ec14fb1955a83cd3 "style: remove backslash from METHRE

No functional changes; old and new re.Pattern[str] differ still:

>>> re.compile(r\"[!#$%&'*+\-.^_`|~0-9A-Za-z]+\").pattern
\"[!#$%&'*+\\-.^_`|~0-9A-Za-z]+\"
>>> re.compile(\"[%s0-9A-Za-z]+\" % re.escape(\"!#$%&'*+-.^_`|~\")).pattern
\"[!\\#\\$%\\&'\\*\\+\\-\\.\\^_`\\|\\~0-9A-Za-z]+\"

re.escape() escapes characters even when they (as of Python 3.12, anyway)
 lose their special meaning inside character classes anyway.")`
 ‚Ä¶

`[3b7e9eb](/aio-libs/aiohttp/pull/8074/commits/3b7e9eb0a52f098715d210a5ec14fb1955a83cd3)`

```
No functional changes; old and new re.Pattern[str] differ still:

>>> re.compile(r"[!#$%&'*+\-.^_`|~0-9A-Za-z]+").pattern
"[!#$%&'*+\\-.^_`|~0-9A-Za-z]+"
>>> re.compile("[%s0-9A-Za-z]+" % re.escape("!#$%&'*+-.^_`|~")).pattern
"[!\\#\\$%\\&'\\*\\+\\-\\.\\^_`\\|\\~0-9A-Za-z]+"

re.escape() escapes characters even when they (as of Python 3.12, anyway)
 lose their special meaning inside character classes anyway.
```

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[http_parser: test edge cases (v2)](/aio-libs/aiohttp/pull/8074/commits/e0dde7c899a14a7e860c6d85036dc176d78894ad "http_parser: test edge cases (v2)")`

`[e0dde7c](/aio-libs/aiohttp/pull/8074/commits/e0dde7c899a14a7e860c6d85036dc176d78894ad)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[use identical re.Pattern to validate method/header](/aio-libs/aiohttp/pull/8074/commits/e2b0483d94b13064255c550837d57d5c45d0b4ba "use identical re.Pattern to validate method/header

doing this on Unicode strings instead of on bytes only works when
 we are not accepting *any* 8-bit characters (otherwise, multibyte sequences ruin it)")`
 ‚Ä¶

`[e2b0483](/aio-libs/aiohttp/pull/8074/commits/e2b0483d94b13064255c550837d57d5c45d0b4ba)`

```
doing this on Unicode strings instead of on bytes only works when
 we are not accepting *any* 8-bit characters (otherwise, multibyte sequences ruin it)
```

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[FIXME: rename CHANGES/*.bugfix before merging](/aio-libs/aiohttp/pull/8074/commits/b38306ba0595a2c870965883fde6d089f8076e3b "FIXME: rename CHANGES/*.bugfix before merging")`

`[b38306b](/aio-libs/aiohttp/pull/8074/commits/b38306ba0595a2c870965883fde6d089f8076e3b)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[FIXME: rename CHANGES/*.bugfix before merging](/aio-libs/aiohttp/pull/8074/commits/ea85a3cbbc33e6a93db4e44b77cbf8f6e3da75eb "FIXME: rename CHANGES/*.bugfix before merging

PR template demands changes are documented, and changelog demands backwards incompatible changes - which this definitely + intentionally contains - are marked as such.")`
 ‚Ä¶

`[ea85a3c](/aio-libs/aiohttp/pull/8074/commits/ea85a3cbbc33e6a93db4e44b77cbf8f6e3da75eb)`

```
PR template demands changes are documented, and changelog demands backwards incompatible changes - which this definitely + intentionally contains - are marked as such.
```

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[http_parser: test edge cases (v3)](/aio-libs/aiohttp/pull/8074/commits/f0314ca1fd8353942e5daf4546914b8f1c22aa2c "http_parser: test edge cases (v3)

Based on https://github.com/aio-libs/aiohttp/pull/3235#discussion_r214536881")`
 ‚Ä¶

`[f0314ca](/aio-libs/aiohttp/pull/8074/commits/f0314ca1fd8353942e5daf4546914b8f1c22aa2c)`

```
Based on [#3235 (comment)](https://github.com/aio-libs/aiohttp/pull/3235#discussion_r214536881)
```

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[ùü≠/ùüè/ùü∑/1/ùü£/Ôºë/€±/ùüô](/aio-libs/aiohttp/pull/8074/commits/70cd60e371390e096593af177f13ce218fe31453 "ùü≠/ùüè/ùü∑/1/ùü£/Ôºë/€±/ùüô")`

`[70cd60e](/aio-libs/aiohttp/pull/8074/commits/70cd60e371390e096593af177f13ce218fe31453)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[typo, whitespace](/aio-libs/aiohttp/pull/8074/commits/4878638621365a499f5fcbd76daf21c68e1f54c4 "typo, whitespace")`

`[4878638](/aio-libs/aiohttp/pull/8074/commits/4878638621365a499f5fcbd76daf21c68e1f54c4)`

[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)

`[Update aiohttp/http_parser.py](/aio-libs/aiohttp/pull/8074/commits/372fe5b77d86567dd97b1033012d2fbdba9ad905 "Update aiohttp/http_parser.py")`

`[372fe5b](/aio-libs/aiohttp/pull/8074/commits/372fe5b77d86567dd97b1033012d2fbdba9ad905)`

[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)

`[Update http_parser.py](/aio-libs/aiohttp/pull/8074/commits/43c127a61c4e719e2ff2cc96b117d465c2638ea0 "Update http_parser.py")`

`[43c127a](/aio-libs/aiohttp/pull/8074/commits/43c127a61c4e719e2ff2cc96b117d465c2638ea0)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[xfail in tests: just expect no exception, these will remain unchanged](/aio-libs/aiohttp/pull/8074/commits/4e8306c2e1fd70b1ec53c5c70018a274e062a9cf "xfail in tests: just expect no exception, these will remain unchanged")`

`[4e8306c](/aio-libs/aiohttp/pull/8074/commits/4e8306c2e1fd70b1ec53c5c70018a274e062a9cf)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[example: additional unicode confusion](/aio-libs/aiohttp/pull/8074/commits/92342241a2c5bf63e3efb12943de2f585c4c1d27 "example: additional unicode confusion")`

`[9234224](/aio-libs/aiohttp/pull/8074/commits/92342241a2c5bf63e3efb12943de2f585c4c1d27)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod) [![@webknjaz](https://avatars.githubusercontent.com/u/578543?s=40&v=4)](/webknjaz)

`[FIXME: rename CHANGES/*.bugfix before merging](/aio-libs/aiohttp/pull/8074/commits/39549e5e92c2e41836c9740fca2bb242c37b93c7 "FIXME: rename CHANGES/*.bugfix before merging

Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ) <sviat@redhat.com>")`
 ‚Ä¶

`[39549e5](/aio-libs/aiohttp/pull/8074/commits/39549e5e92c2e41836c9740fca2bb242c37b93c7)`

```
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ) <sviat@redhat.com>
```

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[CI: 3.8 compat typings, silence but not un-parametrize regression test](/aio-libs/aiohttp/pull/8074/commits/ddb4bc2c01053308d7e8731828207e0c6c5c2142 "CI: 3.8 compat typings, silence but not un-parametrize regression test")`

`[ddb4bc2](/aio-libs/aiohttp/pull/8074/commits/ddb4bc2c01053308d7e8731828207e0c6c5c2142)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[CI: un-parametrize the other broken request, too](/aio-libs/aiohttp/pull/8074/commits/dd4bdc4938e21c2fa1c5c89239ec271ca5d0880f "CI: un-parametrize the other broken request, too")`

`[dd4bdc4](/aio-libs/aiohttp/pull/8074/commits/dd4bdc4938e21c2fa1c5c89239ec271ca5d0880f)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[style: name plus-suffixed patterns with plural S](/aio-libs/aiohttp/pull/8074/commits/c38e243b2b7ef89a0713df9674b864dcf2f1f7c6 "style: name plus-suffixed patterns with plural S")`

`[c38e243](/aio-libs/aiohttp/pull/8074/commits/c38e243b2b7ef89a0713df9674b864dcf2f1f7c6)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[style: must not name the one and only encoding](/aio-libs/aiohttp/pull/8074/commits/8cc25ff2e33fe445f61946d9da04328c5d10494f "style: must not name the one and only encoding")`

`[8cc25ff](/aio-libs/aiohttp/pull/8074/commits/8cc25ff2e33fe445f61946d9da04328c5d10494f)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[CI: not a spelling mistake](/aio-libs/aiohttp/pull/8074/commits/75b4489a5ec70a577fdf76abb367df867ff53216 "CI: not a spelling mistake")`

`[75b4489](/aio-libs/aiohttp/pull/8074/commits/75b4489a5ec70a577fdf76abb367df867ff53216)`

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[FIXME: rename CHANGES/*.bugfix before merging](/aio-libs/aiohttp/pull/8074/commits/d1b746f323d6b8b8c37a435ae31dc016432635bf "FIXME: rename CHANGES/*.bugfix before merging

CI does not like my placeholder, shut it up for now")`
 ‚Ä¶

`[d1b746f](/aio-libs/aiohttp/pull/8074/commits/d1b746f323d6b8b8c37a435ae31dc016432635bf)`

```
CI does not like my placeholder, shut it up for now
```

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[FIXME: rename CHANGES/*.bugfix before merging](/aio-libs/aiohttp/pull/8074/commits/480fc51132b5dcc6467c93fb4565da02cc50214c "FIXME: rename CHANGES/*.bugfix before merging

towncrier-fragments complained")`
 ‚Ä¶

`[480fc51](/aio-libs/aiohttp/pull/8074/commits/480fc51132b5dcc6467c93fb4565da02cc50214c)`

```
towncrier-fragments complained
```

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)

`[CI: xfail the empty case for C parser](/aio-libs/aiohttp/pull/8074/commits/5ecbf79c89064f85acb0145e150af94b9a860b1d "CI: xfail the empty case for C parser")`

`[5ecbf79](/aio-libs/aiohttp/pull/8074/commits/5ecbf79c89064f85acb0145e150af94b9a860b1d)`

[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)
[Dreamsorcerer](/Dreamsorcerer)
added
[backport-3.9](/aio-libs/aiohttp/labels/backport-3.9)
labels
[Jan 28, 2024](#event-11620337338)

 [![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)
[Dreamsorcerer](/Dreamsorcerer)
requested review from
[webknjaz](/webknjaz) and
[asvetlov](/asvetlov)
as [code owners](/aio-libs/aiohttp/blob/822fbc7431f3c5522d3e587ad0b658bef8b6a0ab/.github/CODEOWNERS#L15)
[January 28, 2024 16:09](#event-11620337354)

[![@psf-chronographer](https://avatars.githubusercontent.com/in/34011?s=40&v=4)](/apps/psf-chronographer)
[psf-chronographer](/apps/psf-chronographer)
bot
added
the
[bot:chronographer:provided](/aio-libs/aiohttp/labels/bot%3Achronographer%3Aprovided)
There is a change note present in this PR
label
[Jan 28, 2024](#event-11620337482)

[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)

`[Rename 0.bugfix to 8074.bugfix.rst](/aio-libs/aiohttp/pull/8074/commits/6b82936fcf52878a45f0b5d983943121bc83bbd1 "Rename 0.bugfix to 8074.bugfix.rst")`

`[6b82936](/aio-libs/aiohttp/pull/8074/commits/6b82936fcf52878a45f0b5d983943121bc83bbd1)`

[![@codecov](https://avatars.githubusercontent.com/in/254?s=80&v=4)](/apps/codecov)
[![Codecov](https://avatars.githubusercontent.com/in/254?s=40&u=c392dd7c2afc51fe2347d4296afa8494ac05772e&v=4)](https://github.com/apps/codecov)

Copy link

### **[codecov](/apps/codecov) bot** commented [Jan 28, 2024](#issuecomment-1913649101) ‚Ä¢ edited Loading

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [Codecov](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) Report Attention: `30 lines` in your changes are missing coverage. Please review.  Comparison is base [(`5e44ba4`)](https://app.codecov.io/gh/aio-libs/aiohttp/commit/5e44ba465c2168c6e1842df441828ec5759093e1?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) 97.44% compared to head [(`6b82936`)](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) 97.40%. Report is 35 commits behind head on master.   | [Files](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | Patch % | Lines | | --- | --- | --- | | [tests/test\_http\_parser.py](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs#diff-dGVzdHMvdGVzdF9odHRwX3BhcnNlci5weQ==) | 62.66% | [24 Missing and 4 partials ‚ö†Ô∏è](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | | [aiohttp/http\_parser.py](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs#diff-YWlvaHR0cC9odHRwX3BhcnNlci5weQ==) | 85.71% | [1 Missing and 1 partial ‚ö†Ô∏è](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) |   Additional details and impacted files ``` @@            Coverage Diff             @@ ##           master    #8074      +/-   ## ========================================== - Coverage   97.44%   97.40%   -0.04%      ==========================================   Files         107      107                 Lines       32346    32675     +329        Branches     3748     3823      +75      ========================================== + Hits        31518    31826     +308      - Misses        627      641      +14      - Partials      201      208       +7      ```  | [Flag](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flags&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | Coverage Œî |  | | --- | --- | --- | | [CI-GHA](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `97.31% <66.29%> (-0.04%)` | ‚¨áÔ∏è | | [OS-Linux](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `96.98% <66.29%> (-0.04%)` | ‚¨áÔ∏è | | [OS-Windows](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `95.49% <66.29%> (-0.03%)` | ‚¨áÔ∏è | | [OS-macOS](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `96.80% <66.29%> (-0.05%)` | ‚¨áÔ∏è | | [Py-3.10.11](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `95.41% <66.29%> (-0.03%)` | ‚¨áÔ∏è | | [Py-3.10.13](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `96.80% <66.29%> (-0.04%)` | ‚¨áÔ∏è | | [Py-3.11.6](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `?` |  | | [Py-3.11.7](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `96.45% <66.29%> (-0.09%)` | ‚¨áÔ∏è | | [Py-3.12.0](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `?` |  | | [Py-3.12.1](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `96.60% <66.29%> (-0.01%)` | ‚¨áÔ∏è | | [Py-3.8.10](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `95.38% <66.29%> (-0.03%)` | ‚¨áÔ∏è | | [Py-3.8.18](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `96.73% <66.29%> (-0.04%)` | ‚¨áÔ∏è | | [Py-3.9.13](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `95.38% <66.29%> (-0.03%)` | ‚¨áÔ∏è | | [Py-3.9.18](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `96.76% <66.29%> (-0.04%)` | ‚¨áÔ∏è | | [Py-pypy7.3.13](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `?` |  | | [Py-pypy7.3.15](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `96.32% <66.29%> (?)` |  | | [VM-macos](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `96.80% <66.29%> (-0.05%)` | ‚¨áÔ∏è | | [VM-ubuntu](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `96.98% <66.29%> (-0.04%)` | ‚¨áÔ∏è | | [VM-windows](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs) | `95.49% <66.29%> (-0.03%)` | ‚¨áÔ∏è |   Flags with carried forward coverage won't be shown. [Click here](https://docs.codecov.io/docs/carryforward-flags?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs#carryforward-flags-in-the-pull-request-comment) to find out more.  [‚òî View full report in Codecov by Sentry](https://app.codecov.io/gh/aio-libs/aiohttp/pull/8074?src=pr&el=continue&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs). üì¢ Have feedback on the report? [Share it here](https://about.codecov.io/codecov-pr-comment-feedback/?utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=aio-libs). |

All reactions

Sorry, something went wrong.

[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)
[Dreamsorcerer](/Dreamsorcerer)
enabled auto-merge (squash)
[January 28, 2024 16:24](#event-11620378496)

 Hide details
View details

[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)
[Dreamsorcerer](/Dreamsorcerer)
merged commit [`33ccdfb`](/aio-libs/aiohttp/commit/33ccdfb0a12690af5bb49bda2319ec0907fa7827)
into
master

[Jan 28, 2024](https://github.com/aio-libs/aiohttp/pull/8074#event-11620384186)
28 of 32 checks passed

 [![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)
[Dreamsorcerer](/Dreamsorcerer)
deleted the
thing1

branch
[January 28, 2024 16:27](#event-11620384209)

[![@patchback](https://avatars.githubusercontent.com/in/21488?s=80&v=4)](/apps/patchback)
[![Patchback](https://avatars.githubusercontent.com/in/21488?s=40&u=a31b5f9c1d266fb0ef014c54900c09d7b2a42df2&v=4)](https://github.com/apps/patchback)

Copy link

Contributor

### **[patchback](/apps/patchback) bot** commented [Jan 28, 2024](#issuecomment-1913651954) ‚Ä¢ edited Loading

| Backport to 3.9: üíî cherry-picking failed ‚Äî conflicts found ‚ùå Failed to cleanly apply [33ccdfb](https://github.com/aio-libs/aiohttp/commit/33ccdfb0a12690af5bb49bda2319ec0907fa7827) on top of patchback/backports/3.9/33ccdfb0a12690af5bb49bda2319ec0907fa7827/pr-8074 Backporting merged PR [#8074](https://github.com/aio-libs/aiohttp/pull/8074) into master  1. Ensure you have a local repo clone of your fork. Unless you cloned it    from the upstream, this would be your `origin` remote. 2. Make sure you have an upstream repo added as a remote too. In these    instructions you'll refer to it by the name `upstream`. If you don't    have it, here's how you can add it:    ```    $ git remote add upstream https://github.com/aio-libs/aiohttp.git    ``` 3. Ensure you have the latest copy of upstream and prepare a branch    that will hold the backported code:    ```    $ git fetch upstream    $ git checkout -b patchback/backports/3.9/33ccdfb0a12690af5bb49bda2319ec0907fa7827/pr-8074 upstream/3.9    ``` 4. Now, cherry-pick PR [Improve validation in HTTP parser¬†#8074](https://github.com/aio-libs/aiohttp/pull/8074) contents into that branch:    ```    $ git cherry-pick -x 33ccdfb0a12690af5bb49bda2319ec0907fa7827    ```        If it'll yell at you with something like `fatal: Commit 33ccdfb0a12690af5bb49bda2319ec0907fa7827 is a merge but no -m option was given.`, add `-m 1` as follows instead:    ```    $ git cherry-pick -m1 -x 33ccdfb0a12690af5bb49bda2319ec0907fa7827    ``` 5. At this point, you'll probably encounter some merge conflicts. You must    resolve them in to preserve the patch from PR [Improve validation in HTTP parser¬†#8074](https://github.com/aio-libs/aiohttp/pull/8074) as close to the    original as possible. 6. Push this branch to your fork on GitHub:    ```    $ git push origin patchback/backports/3.9/33ccdfb0a12690af5bb49bda2319ec0907fa7827/pr-8074    ``` 7. Create a PR, ensure that the CI is green. If it's not ‚Äî update it so that    the tests and any other checks pass. This is it!    Now relax and wait for the maintainers to process your pull request    when they have some cycles to do reviews. Don't worry ‚Äî they'll tell you if    any improvements are necessary when the time comes!   ü§ñ @patchback I'm built with [octomachinery](https://octomachinery.dev) and my source is open ‚Äî <https://github.com/sanitizers/patchback-github-app>. |
| --- |

All reactions

Sorry, something went wrong.

[![@patchback](https://avatars.githubusercontent.com/in/21488?s=80&v=4)](/apps/patchback)
[![Patchback](https://avatars.githubusercontent.com/in/21488?s=40&u=a31b5f9c1d266fb0ef014c54900c09d7b2a42df2&v=4)](https://github.com/apps/patchback)

Copy link

Contributor

### **[patchback](/apps/patchback) bot** commented [Jan 28, 2024](#issuecomment-1913651997) ‚Ä¢ edited Loading

| Backport to 3.10: üíî cherry-picking failed ‚Äî conflicts found ‚ùå Failed to cleanly apply [33ccdfb](https://github.com/aio-libs/aiohttp/commit/33ccdfb0a12690af5bb49bda2319ec0907fa7827) on top of patchback/backports/3.10/33ccdfb0a12690af5bb49bda2319ec0907fa7827/pr-8074 Backporting merged PR [#8074](https://github.com/aio-libs/aiohttp/pull/8074) into master  1. Ensure you have a local repo clone of your fork. Unless you cloned it    from the upstream, this would be your `origin` remote. 2. Make sure you have an upstream repo added as a remote too. In these    instructions you'll refer to it by the name `upstream`. If you don't    have it, here's how you can add it:    ```    $ git remote add upstream https://github.com/aio-libs/aiohttp.git    ``` 3. Ensure you have the latest copy of upstream and prepare a branch    that will hold the backported code:    ```    $ git fetch upstream    $ git checkout -b patchback/backports/3.10/33ccdfb0a12690af5bb49bda2319ec0907fa7827/pr-8074 upstream/3.10    ``` 4. Now, cherry-pick PR [Improve validation in HTTP parser¬†#8074](https://github.com/aio-libs/aiohttp/pull/8074) contents into that branch:    ```    $ git cherry-pick -x 33ccdfb0a12690af5bb49bda2319ec0907fa7827    ```        If it'll yell at you with something like `fatal: Commit 33ccdfb0a12690af5bb49bda2319ec0907fa7827 is a merge but no -m option was given.`, add `-m 1` as follows instead:    ```    $ git cherry-pick -m1 -x 33ccdfb0a12690af5bb49bda2319ec0907fa7827    ``` 5. At this point, you'll probably encounter some merge conflicts. You must    resolve them in to preserve the patch from PR [Improve validation in HTTP parser¬†#8074](https://github.com/aio-libs/aiohttp/pull/8074) as close to the    original as possible. 6. Push this branch to your fork on GitHub:    ```    $ git push origin patchback/backports/3.10/33ccdfb0a12690af5bb49bda2319ec0907fa7827/pr-8074    ``` 7. Create a PR, ensure that the CI is green. If it's not ‚Äî update it so that    the tests and any other checks pass. This is it!    Now relax and wait for the maintainers to process your pull request    when they have some cycles to do reviews. Don't worry ‚Äî they'll tell you if    any improvements are necessary when the time comes!   ü§ñ @patchback I'm built with [octomachinery](https://octomachinery.dev) and my source is open ‚Äî <https://github.com/sanitizers/patchback-github-app>. |
| --- |

All reactions

Sorry, something went wrong.

[Dreamsorcerer](/Dreamsorcerer)
added a commit
that referenced
this pull request
[Jan 28, 2024](#ref-commit-0378ee3)
[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)

`[Improve validation in HTTP parser (](/aio-libs/aiohttp/commit/0378ee3fbaf3e86d03e59ecbb492ef9ac99dd0e5 "Improve validation in HTTP parser (#8074)

Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ) <sviat@redhat.com>
(cherry picked from commit 33ccdfb0a12690af5bb49bda2319ec0907fa7827)")[#8074](https://github.com/aio-libs/aiohttp/pull/8074)[)](/aio-libs/aiohttp/commit/0378ee3fbaf3e86d03e59ecbb492ef9ac99dd0e5 "Improve validation in HTTP parser (#8074)

Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ) <sviat@redhat.com>
(cherry picked from commit 33ccdfb0a12690af5bb49bda2319ec0907fa7827)")`
‚Ä¶

`[0378ee3](/aio-libs/aiohttp/commit/0378ee3fbaf3e86d03e59ecbb492ef9ac99dd0e5)`

```
Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ) <sviat@redhat.com>
(cherry picked from commit [33ccdfb](https://github.com/aio-libs/aiohttp/commit/33ccdfb0a12690af5bb49bda2319ec0907fa7827))
```

[Dreamsorcerer](/Dreamsorcerer)
added a commit
that referenced
this pull request
[Jan 28, 2024](#ref-commit-de2f7f1)
[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)

`[Improve validation in HTTP parser (](/aio-libs/aiohttp/commit/de2f7f121a1bb3b0db8a709802c020b0fab3a0a7 "Improve validation in HTTP parser (#8074)

Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ) <sviat@redhat.com>
(cherry picked from commit 33ccdfb0a12690af5bb49bda2319ec0907fa7827)")[#8074](https://github.com/aio-libs/aiohttp/pull/8074)[)](/aio-libs/aiohttp/commit/de2f7f121a1bb3b0db8a709802c020b0fab3a0a7 "Improve validation in HTTP parser (#8074)

Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ) <sviat@redhat.com>
(cherry picked from commit 33ccdfb0a12690af5bb49bda2319ec0907fa7827)")`
‚Ä¶

`[de2f7f1](/aio-libs/aiohttp/commit/de2f7f121a1bb3b0db8a709802c020b0fab3a0a7)`

```
Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ) <sviat@redhat.com>
(cherry picked from commit [33ccdfb](https://github.com/aio-libs/aiohttp/commit/33ccdfb0a12690af5bb49bda2319ec0907fa7827))
```

[Dreamsorcerer](/Dreamsorcerer)
added a commit
that referenced
this pull request
[Jan 28, 2024](#ref-commit-a67fb10)
[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)

`[Improve validation in HTTP parser (](/aio-libs/aiohttp/commit/a67fb1066f5b8dced690f64bd09f689c032126a6 "Improve validation in HTTP parser (#8074) (#8077)

Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ)
<sviat@redhat.com>
(cherry picked from commit 33ccdfb0a12690af5bb49bda2319ec0907fa7827)")[#8074](https://github.com/aio-libs/aiohttp/pull/8074)[) (](/aio-libs/aiohttp/commit/a67fb1066f5b8dced690f64bd09f689c032126a6 "Improve validation in HTTP parser (#8074) (#8077)

Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ)
<sviat@redhat.com>
(cherry picked from commit 33ccdfb0a12690af5bb49bda2319ec0907fa7827)")[#8077](https://github.com/aio-libs/aiohttp/pull/8077)[)](/aio-libs/aiohttp/commit/a67fb1066f5b8dced690f64bd09f689c032126a6 "Improve validation in HTTP parser (#8074) (#8077)

Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ)
<sviat@redhat.com>
(cherry picked from commit 33ccdfb0a12690af5bb49bda2319ec0907fa7827)")`
‚Ä¶

`[a67fb10](/aio-libs/aiohttp/commit/a67fb1066f5b8dced690f64bd09f689c032126a6)`

```
Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ)
<sviat@redhat.com>
(cherry picked from commit [33ccdfb](https://github.com/aio-libs/aiohttp/commit/33ccdfb0a12690af5bb49bda2319ec0907fa7827))
```

[Dreamsorcerer](/Dreamsorcerer)
added a commit
that referenced
this pull request
[Jan 28, 2024](#ref-commit-d33bc21)
[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)

`[Improve validation in HTTP parser (](/aio-libs/aiohttp/commit/d33bc21414e283c9e6fe7f6caf69e2ed60d66c82 "Improve validation in HTTP parser (#8074) (#8078)

Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ)
<sviat@redhat.com>
(cherry picked from commit 33ccdfb0a12690af5bb49bda2319ec0907fa7827)")[#8074](https://github.com/aio-libs/aiohttp/pull/8074)[) (](/aio-libs/aiohttp/commit/d33bc21414e283c9e6fe7f6caf69e2ed60d66c82 "Improve validation in HTTP parser (#8074) (#8078)

Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ)
<sviat@redhat.com>
(cherry picked from commit 33ccdfb0a12690af5bb49bda2319ec0907fa7827)")[#8078](https://github.com/aio-libs/aiohttp/pull/8078)[)](/aio-libs/aiohttp/commit/d33bc21414e283c9e6fe7f6caf69e2ed60d66c82 "Improve validation in HTTP parser (#8074) (#8078)

Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ)
<sviat@redhat.com>
(cherry picked from commit 33ccdfb0a12690af5bb49bda2319ec0907fa7827)")`
‚Ä¶

`[d33bc21](/aio-libs/aiohttp/commit/d33bc21414e283c9e6fe7f6caf69e2ed60d66c82)`

```
Co-authored-by: Paul J. Dorn <pajod@users.noreply.github.com>
Co-authored-by: Sviatoslav Sydorenko (–°–≤—è—Ç–æ—Å–ª–∞–≤ –°–∏–¥–æ—Ä–µ–Ω–∫–æ)
<sviat@redhat.com>
(cherry picked from commit [33ccdfb](https://github.com/aio-libs/aiohttp/commit/33ccdfb0a12690af5bb49bda2319ec0907fa7827))
```

[![webknjaz](https://avatars.githubusercontent.com/u/578543?s=60&v=4)](/webknjaz)

**[webknjaz](/webknjaz)**
reviewed
[Jan 28, 2024](#pullrequestreview-1847592698)

 [View reviewed changes](/aio-libs/aiohttp/pull/8074/files/6b82936fcf52878a45f0b5d983943121bc83bbd1)

[tests/test\_http\_parser.py](/aio-libs/aiohttp/pull/8074/files/6b82936fcf52878a45f0b5d983943121bc83bbd1#diff-76b0b02daa82174aa89afea7f661160a60cfd3f7baeabad08ff4c29a141e57d4)

|  |  |  |
| --- | --- | --- |
|  |  |  |
|  |  | def test\_http\_request\_bad\_status\_line\_separator(parser: Any) -> None: |
|  |  | # single code point, old, multibyte NFKC, multibyte NFKD |

Copy link

Member

### @webknjaz **[webknjaz](/webknjaz)** [Jan 28, 2024](#discussion_r1468904395)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Hey [@pajod](https://github.com/pajod), could you expand what this comment refers to? Does the `utf8sep` variable contain a value that matches all the listed cases? I'm rather confused. Or did you mean to test different cases but added just one?

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @pajod **[pajod](/pajod)** [Jan 28, 2024](#discussion_r1468915440) ‚Ä¢ edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

That utf8sep has those properties (and LTR), a popular choice for being multiple edge cases in one. None of which are strictly needed for.. *comparing to the literal ASCII dot* as we do here, but some of which I expect to regain relevance on future refactoring.

Sorry, something went wrong.

All reactions

[![webknjaz](https://avatars.githubusercontent.com/u/578543?s=60&v=4)](/webknjaz)

**[webknjaz](/webknjaz)**
reviewed
[Jan 28, 2024](#pullrequestreview-1847592861)

 [View reviewed changes](/aio-libs/aiohttp/pull/8074/files/6b82936fcf52878a45f0b5d983943121bc83bbd1)

[tests/test\_http\_parser.py](/aio-libs/aiohttp/pull/8074/files/6b82936fcf52878a45f0b5d983943121bc83bbd1#diff-76b0b02daa82174aa89afea7f661160a60cfd3f7baeabad08ff4c29a141e57d4)

|  |  | @@ -710,6 +808,31 @@ def test\_http\_request\_upgrade(parser: Any) -> None: | |
| --- | --- | --- | --- |
|  |  | assert tail == b"some raw data" |
|  |  |  |
|  |  |  |
|  |  | def test\_http\_request\_parser\_utf8\_request\_line(parser: Any) -> None: |
|  |  | if not isinstance(response, HttpResponseParserPy): |

Copy link

Member

### @webknjaz **[webknjaz](/webknjaz)** [Jan 28, 2024](#discussion_r1468904573)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

[@pajod](https://github.com/pajod) FYI it's much cleaner to use the `@pytest.mark.xfail` decorator since it allows pytest to make the decisions earlier in the process.

Sorry, something went wrong.

All reactions

Copy link

Contributor

### @pajod **[pajod](/pajod)** [Jan 28, 2024](#discussion_r1468917013) ‚Ä¢ edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

But that *only* explains why a llhttp-only code coverage report complains!? There is something much more wrong here. Like, *I completely broke that test* levels of wrong.

*Edit:* Sorry, I did. Four times. I meant to acknowledge (in [two cases, expected to be changed](https://github.com/nodejs/llhttp/commit/10ff94eb252e0e7cb792dcde6d40d0e46b794f8a)) behaviour differences of the C parser, while keeping my tests parametrized to keep running both parsers anyway. But each time I copied the `not isinstance(response, HttpResponseParserPy)` line where it should say `not isinstance(parser, HttpRequestParserPy)`. And mypy would have told me, if not for that `Any` and the duplicate use of the `response` identifier (global scope function but also function scope variable)

Sorry, something went wrong.

All reactions

Copy link

Member

Author

### @Dreamsorcerer **[Dreamsorcerer](/Dreamsorcerer)** [Jan 28, 2024](#discussion_r1468917277)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Yeah, I noticed there was no coverage on these tests for some reason. Something to look at later.

Sorry, something went wrong.

All reactions

Copy link

Member

### @webknjaz **[webknjaz](/webknjaz)** [Jan 28, 2024](#discussion_r1468919068) ‚Ä¢ edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Yep. I started looking into the coverage drop and that's how I noticed this thing.

FWIW we *really* should refactor how the tests with and without extensions are parametrized/generated, like I did in multidict recently. Essentially, there was an import loop in some places in tests that prevented C-extension tests from being executed ([aio-libs/multidict#837](https://github.com/aio-libs/multidict/issues/837) / [aio-libs/multidict#915](https://github.com/aio-libs/multidict/pull/915) / <https://multidict.aio-libs.org/en/latest/changes/#contributor-facing-changes>). So I fixed that by having an explicit global option for requiring one mode or the other, with a collection of fixtures reused everywhere and zero magic around import attempts and handling failures in weird ways.

Another thing I configured is the module classification in Codecov with different expected coverage thresholds ‚Äî the goal should be that tests get 100% coverage in every CI run (from all jobs combined, of course). And the actual project code coverage should be measured as a separate metric. Currently, a global threshold value allows coverage to drop in tests if it's compensated by coverage in the project, meaning that we may be gaining more dead code (read: tests that are never executed), which results in a false sense of things being tested, when they aren't.

Sorry, something went wrong.

All reactions

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)
[pajod](/pajod)
mentioned this pull request
[Jan 29, 2024](#ref-pullrequest-2104570049)

[re-enable 4 tests, accidentally dropped
#8088](/aio-libs/aiohttp/pull/8088)
 Merged

5 tasks

[renovate](/apps/renovate) bot
referenced
this pull request
in allenporter/pyrainbird
[Feb 1, 2024](#ref-commit-bbc390c)
[![@renovate](https://avatars.githubusercontent.com/in/2740?s=40&v=4)](/marketplace/renovate)

`[Update dependency aiohttp to v3.9.2 [SECURITY] (](/allenporter/pyrainbird/commit/bbc390cd18439045e879f78bd4e4ee500400e8c9 "Update dependency aiohttp to v3.9.2 [SECURITY] (#349)

[![Mend
Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)

This PR contains the following updates:

| Package | Change | Age | Adoption | Passing | Confidence |
|---|---|---|---|---|---|
| [aiohttp](https://togithub.com/aio-libs/aiohttp) | `==3.9.1` ->
`==3.9.2` |
[![age](https://developer.mend.io/api/mc/badges/age/pypi/aiohttp/3.9.2?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![adoption](https://developer.mend.io/api/mc/badges/adoption/pypi/aiohttp/3.9.2?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![passing](https://developer.mend.io/api/mc/badges/compatibility/pypi/aiohttp/3.9.1/3.9.2?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![confidence](https://developer.mend.io/api/mc/badges/confidence/pypi/aiohttp/3.9.1/3.9.2?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|

### GitHub Vulnerability Alerts

####
[CVE-2024-23829](https://togithub.com/aio-libs/aiohttp/security/advisories/GHSA-8qpw-xqxj-h4r2)

### Summary
Security-sensitive parts of the *Python HTTP parser* retained minor
differences in allowable character sets, that must trigger error
handling to robustly match frame boundaries of proxies in order to
protect against injection of additional requests. Additionally,
validation could trigger exceptions that were not handled consistently
with processing of other malformed input.

### Details
These problems are rooted in pattern matching protocol elements,
previously improved by PR #&#8203;3235 and GHSA-gfw2-4jvh-wgfg:

1. The expression `HTTP/(\d).(\d)` lacked another backslash to clarify
that the separator should be a literal dot, not just *any* Unicode code
point (result: `HTTP/(\d)\.(\d)`).

2. The HTTP version was permitting Unicode digits, where only ASCII
digits are standards-compliant.

3. Distinct regular expressions for validating HTTP Method and Header
field names were used - though both should (at least) apply the common
restrictions of rfc9110 `token`.

### PoC
`GET / HTTP/1√∂1`
`GET / HTTP/1.ùüô`
`GET/: HTTP/1.1`
`Content-Encoding?: chunked`

### Impact
Primarily concerns running an aiohttp server without llhttp:
1. **behind a proxy**: Being more lenient than internet standards
require could, depending on deployment environment, assist in request
smuggling.
2. **directly accessible** or exposed behind proxies relaying malformed
input: the unhandled exception could cause excessive resource
consumption on the application server and/or its logging facilities.

-----

Patch:
[https://github.com/aio-libs/aiohttp/pull/8074](https://togithub.com/aio-libs/aiohttp/pull/8074)/files

####
[CVE-2024-23334](https://togithub.com/aio-libs/aiohttp/security/advisories/GHSA-5h86-8mv2-jq9f)

### Summary
Improperly configuring static resource resolution in aiohttp when used
as a web server can result in the unauthorized reading of arbitrary
files on the system.

### Details
When using aiohttp as a web server and configuring static routes, it is
necessary to specify the root path for static files. Additionally, the
option 'follow_symlinks' can be used to determine whether to follow
symbolic links outside the static root directory. When 'follow_symlinks'
is set to True, there is no validation to check if a given file path is
within the root directory.This can lead to directory traversal
vulnerabilities, resulting in unauthorized access to arbitrary files on
the system, even when symlinks are not present.

i.e. An application is only vulnerable with setup code like:
```
app.router.add_routes([
    web.static(\"/static\", \"static/\", follow_symlinks=True),  # Remove follow_symlinks to avoid the vulnerability
])
```

### Impact
This is a directory traversal vulnerability with CWE ID 22. When using
aiohttp as a web server and enabling static resource resolution with
`follow_symlinks` set to True, it can lead to this vulnerability. This
vulnerability has been present since the introduction of the
`follow_symlinks` parameter.

### Workaround
Even if upgrading to a patched version of aiohttp, we recommend
following these steps regardless.

If using `follow_symlinks=True` outside of a restricted local
development environment, disable the option immediately. This option is
NOT needed to follow symlinks which point to a location _within_ the
static root directory, it is _only_ intended to allow a symlink to break
out of the static directory. Even with this CVE fixed, there is still a
substantial risk of misconfiguration when using this option on a server
that accepts requests from remote users.

Additionally, aiohttp has always recommended using a reverse proxy
server (such as nginx) to handle static resources and _not_ to use these
static resources in aiohttp for production environments. Doing so also
protects against this vulnerability, and is why we expect the number of
affected users to be very low.

-----

Patch:
[https://github.com/aio-libs/aiohttp/pull/8079](https://togithub.com/aio-libs/aiohttp/pull/8079)/files

---

### Release Notes

<details>
<summary>aio-libs/aiohttp (aiohttp)</summary>

###
[`v3.9.2`](https://togithub.com/aio-libs/aiohttp/releases/tag/v3.9.2):
3.9.2

[Compare
Source](https://togithub.com/aio-libs/aiohttp/compare/v3.9.1...v3.9.2)

## Bug fixes

-   Fixed server-side websocket connection leak.

    *Related issues and pull requests on GitHub:*
    [#&#8203;7978](https://togithub.com/aio-libs/aiohttp/issues/7978).

-   Fixed `web.FileResponse` doing blocking I/O in the event loop.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8012](https://togithub.com/aio-libs/aiohttp/issues/8012).

- Fixed double compress when compression enabled and compressed file
exists in server file responses.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8014](https://togithub.com/aio-libs/aiohttp/issues/8014).

-   Added runtime type check for `ClientSession` `timeout` parameter.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8021](https://togithub.com/aio-libs/aiohttp/issues/8021).

- Fixed an unhandled exception in the Python HTTP parser on header lines
starting with a colon -- by :user:`pajod`.

Invalid request lines with anything but a dot between the HTTP major and
minor version are now rejected.
Invalid header field names containing question mark or slash are now
rejected.
Such requests are incompatible with :rfc:`9110#section-5.6.2` and are
not known to be of any legitimate use.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8074](https://togithub.com/aio-libs/aiohttp/issues/8074).

- Improved validation of paths for static resources requests to the
server -- by :user:`bdraco`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8079](https://togithub.com/aio-libs/aiohttp/issues/8079).

## Features

- Added support for passing :py:data:`True` to `ssl` parameter in
`ClientSession` while
    deprecating :py:data:`None` -- by :user:`xiangyan99`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;7698](https://togithub.com/aio-libs/aiohttp/issues/7698).

## Breaking changes

- Fixed an unhandled exception in the Python HTTP parser on header lines
starting with a colon -- by :user:`pajod`.

Invalid request lines with anything but a dot between the HTTP major and
minor version are now rejected.
Invalid header field names containing question mark or slash are now
rejected.
Such requests are incompatible with :rfc:`9110#section-5.6.2` and are
not known to be of any legitimate use.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8074](https://togithub.com/aio-libs/aiohttp/issues/8074).

## Improved documentation

- Fixed examples of `fallback_charset_resolver` function in the
:doc:`client_advanced` document. -- by :user:`henry0312`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;7995](https://togithub.com/aio-libs/aiohttp/issues/7995).

-   The Sphinx setup was updated to avoid showing the empty
    changelog draft section in the tagged release documentation
    builds on Read The Docs -- by :user:`webknjaz`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8067](https://togithub.com/aio-libs/aiohttp/issues/8067).

## Packaging updates and notes for downstreams

-   The changelog categorization was made clearer. The
    contributors can now mark their fragment files more
    accurately -- by :user:`webknjaz`.

    The new category tags are:

        * ``bugfix``

        * ``feature``

        * ``deprecation``

        * ``breaking`` (previously, ``removal``)

        * ``doc``

        * ``packaging``

        * ``contrib``

        * ``misc``

    *Related issues and pull requests on GitHub:*
    [#&#8203;8066](https://togithub.com/aio-libs/aiohttp/issues/8066).

## Contributor-facing changes

- Updated :ref:`contributing/Tests coverage <aiohttp-contributing>`
section to show how we use `codecov` -- by :user:`Dreamsorcerer`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;7916](https://togithub.com/aio-libs/aiohttp/issues/7916).

-   The changelog categorization was made clearer. The
    contributors can now mark their fragment files more
    accurately -- by :user:`webknjaz`.

    The new category tags are:

        * ``bugfix``

        * ``feature``

        * ``deprecation``

        * ``breaking`` (previously, ``removal``)

        * ``doc``

        * ``packaging``

        * ``contrib``

        * ``misc``

    *Related issues and pull requests on GitHub:*
    [#&#8203;8066](https://togithub.com/aio-libs/aiohttp/issues/8066).

## Miscellaneous internal changes

-   Replaced all `tmpdir` fixtures with `tmp_path` in test suite.

    *Related issues and pull requests on GitHub:*
    [#&#8203;3551](https://togithub.com/aio-libs/aiohttp/issues/3551).

***

</details>

---

### Configuration

üìÖ **Schedule**: Branch creation - \"\" (UTC), Automerge - At any time (no
schedule defined).

üö¶ **Automerge**: Enabled.

‚ôª **Rebasing**: Whenever PR becomes conflicted, or you tick the
rebase/retry checkbox.

üîï **Ignore**: Close this PR and you won't be reminded about this update
again.

---

- [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check
this box

---

This PR has been generated by [Mend
Renovate](https://www.mend.io/free-developer-tools/renovate/). View
repository job log
[here](https://developer.mend.io/github/allenporter/pyrainbird).

<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy4xNTMuMiIsInVwZGF0ZWRJblZlciI6IjM3LjE1My4yIiwidGFyZ2V0QnJhbmNoIjoibWFpbiJ9-->

Co-authored-by: renovate[bot] <29139614+renovate[bot]@users.noreply.github.com>")[#349](https://github.com/allenporter/pyrainbird/pull/349)[)](/allenporter/pyrainbird/commit/bbc390cd18439045e879f78bd4e4ee500400e8c9 "Update dependency aiohttp to v3.9.2 [SECURITY] (#349)

[![Mend
Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)

This PR contains the following updates:

| Package | Change | Age | Adoption | Passing | Confidence |
|---|---|---|---|---|---|
| [aiohttp](https://togithub.com/aio-libs/aiohttp) | `==3.9.1` ->
`==3.9.2` |
[![age](https://developer.mend.io/api/mc/badges/age/pypi/aiohttp/3.9.2?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![adoption](https://developer.mend.io/api/mc/badges/adoption/pypi/aiohttp/3.9.2?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![passing](https://developer.mend.io/api/mc/badges/compatibility/pypi/aiohttp/3.9.1/3.9.2?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|
[![confidence](https://developer.mend.io/api/mc/badges/confidence/pypi/aiohttp/3.9.1/3.9.2?slim=true)](https://docs.renovatebot.com/merge-confidence/)
|

### GitHub Vulnerability Alerts

####
[CVE-2024-23829](https://togithub.com/aio-libs/aiohttp/security/advisories/GHSA-8qpw-xqxj-h4r2)

### Summary
Security-sensitive parts of the *Python HTTP parser* retained minor
differences in allowable character sets, that must trigger error
handling to robustly match frame boundaries of proxies in order to
protect against injection of additional requests. Additionally,
validation could trigger exceptions that were not handled consistently
with processing of other malformed input.

### Details
These problems are rooted in pattern matching protocol elements,
previously improved by PR #&#8203;3235 and GHSA-gfw2-4jvh-wgfg:

1. The expression `HTTP/(\d).(\d)` lacked another backslash to clarify
that the separator should be a literal dot, not just *any* Unicode code
point (result: `HTTP/(\d)\.(\d)`).

2. The HTTP version was permitting Unicode digits, where only ASCII
digits are standards-compliant.

3. Distinct regular expressions for validating HTTP Method and Header
field names were used - though both should (at least) apply the common
restrictions of rfc9110 `token`.

### PoC
`GET / HTTP/1√∂1`
`GET / HTTP/1.ùüô`
`GET/: HTTP/1.1`
`Content-Encoding?: chunked`

### Impact
Primarily concerns running an aiohttp server without llhttp:
1. **behind a proxy**: Being more lenient than internet standards
require could, depending on deployment environment, assist in request
smuggling.
2. **directly accessible** or exposed behind proxies relaying malformed
input: the unhandled exception could cause excessive resource
consumption on the application server and/or its logging facilities.

-----

Patch:
[https://github.com/aio-libs/aiohttp/pull/8074](https://togithub.com/aio-libs/aiohttp/pull/8074)/files

####
[CVE-2024-23334](https://togithub.com/aio-libs/aiohttp/security/advisories/GHSA-5h86-8mv2-jq9f)

### Summary
Improperly configuring static resource resolution in aiohttp when used
as a web server can result in the unauthorized reading of arbitrary
files on the system.

### Details
When using aiohttp as a web server and configuring static routes, it is
necessary to specify the root path for static files. Additionally, the
option 'follow_symlinks' can be used to determine whether to follow
symbolic links outside the static root directory. When 'follow_symlinks'
is set to True, there is no validation to check if a given file path is
within the root directory.This can lead to directory traversal
vulnerabilities, resulting in unauthorized access to arbitrary files on
the system, even when symlinks are not present.

i.e. An application is only vulnerable with setup code like:
```
app.router.add_routes([
    web.static(\"/static\", \"static/\", follow_symlinks=True),  # Remove follow_symlinks to avoid the vulnerability
])
```

### Impact
This is a directory traversal vulnerability with CWE ID 22. When using
aiohttp as a web server and enabling static resource resolution with
`follow_symlinks` set to True, it can lead to this vulnerability. This
vulnerability has been present since the introduction of the
`follow_symlinks` parameter.

### Workaround
Even if upgrading to a patched version of aiohttp, we recommend
following these steps regardless.

If using `follow_symlinks=True` outside of a restricted local
development environment, disable the option immediately. This option is
NOT needed to follow symlinks which point to a location _within_ the
static root directory, it is _only_ intended to allow a symlink to break
out of the static directory. Even with this CVE fixed, there is still a
substantial risk of misconfiguration when using this option on a server
that accepts requests from remote users.

Additionally, aiohttp has always recommended using a reverse proxy
server (such as nginx) to handle static resources and _not_ to use these
static resources in aiohttp for production environments. Doing so also
protects against this vulnerability, and is why we expect the number of
affected users to be very low.

-----

Patch:
[https://github.com/aio-libs/aiohttp/pull/8079](https://togithub.com/aio-libs/aiohttp/pull/8079)/files

---

### Release Notes

<details>
<summary>aio-libs/aiohttp (aiohttp)</summary>

###
[`v3.9.2`](https://togithub.com/aio-libs/aiohttp/releases/tag/v3.9.2):
3.9.2

[Compare
Source](https://togithub.com/aio-libs/aiohttp/compare/v3.9.1...v3.9.2)

## Bug fixes

-   Fixed server-side websocket connection leak.

    *Related issues and pull requests on GitHub:*
    [#&#8203;7978](https://togithub.com/aio-libs/aiohttp/issues/7978).

-   Fixed `web.FileResponse` doing blocking I/O in the event loop.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8012](https://togithub.com/aio-libs/aiohttp/issues/8012).

- Fixed double compress when compression enabled and compressed file
exists in server file responses.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8014](https://togithub.com/aio-libs/aiohttp/issues/8014).

-   Added runtime type check for `ClientSession` `timeout` parameter.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8021](https://togithub.com/aio-libs/aiohttp/issues/8021).

- Fixed an unhandled exception in the Python HTTP parser on header lines
starting with a colon -- by :user:`pajod`.

Invalid request lines with anything but a dot between the HTTP major and
minor version are now rejected.
Invalid header field names containing question mark or slash are now
rejected.
Such requests are incompatible with :rfc:`9110#section-5.6.2` and are
not known to be of any legitimate use.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8074](https://togithub.com/aio-libs/aiohttp/issues/8074).

- Improved validation of paths for static resources requests to the
server -- by :user:`bdraco`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8079](https://togithub.com/aio-libs/aiohttp/issues/8079).

## Features

- Added support for passing :py:data:`True` to `ssl` parameter in
`ClientSession` while
    deprecating :py:data:`None` -- by :user:`xiangyan99`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;7698](https://togithub.com/aio-libs/aiohttp/issues/7698).

## Breaking changes

- Fixed an unhandled exception in the Python HTTP parser on header lines
starting with a colon -- by :user:`pajod`.

Invalid request lines with anything but a dot between the HTTP major and
minor version are now rejected.
Invalid header field names containing question mark or slash are now
rejected.
Such requests are incompatible with :rfc:`9110#section-5.6.2` and are
not known to be of any legitimate use.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8074](https://togithub.com/aio-libs/aiohttp/issues/8074).

## Improved documentation

- Fixed examples of `fallback_charset_resolver` function in the
:doc:`client_advanced` document. -- by :user:`henry0312`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;7995](https://togithub.com/aio-libs/aiohttp/issues/7995).

-   The Sphinx setup was updated to avoid showing the empty
    changelog draft section in the tagged release documentation
    builds on Read The Docs -- by :user:`webknjaz`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8067](https://togithub.com/aio-libs/aiohttp/issues/8067).

## Packaging updates and notes for downstreams

-   The changelog categorization was made clearer. The
    contributors can now mark their fragment files more
    accurately -- by :user:`webknjaz`.

    The new category tags are:

        * ``bugfix``

        * ``feature``

        * ``deprecation``

        * ``breaking`` (previously, ``removal``)

        * ``doc``

        * ``packaging``

        * ``contrib``

        * ``misc``

    *Related issues and pull requests on GitHub:*
    [#&#8203;8066](https://togithub.com/aio-libs/aiohttp/issues/8066).

## Contributor-facing changes

- Updated :ref:`contributing/Tests coverage <aiohttp-contributing>`
section to show how we use `codecov` -- by :user:`Dreamsorcerer`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;7916](https://togithub.com/aio-libs/aiohttp/issues/7916).

-   The changelog categorization was made clearer. The
    contributors can now mark their fragment files more
    accurately -- by :user:`webknjaz`.

    The new category tags are:

        * ``bugfix``

        * ``feature``

        * ``deprecation``

        * ``breaking`` (previously, ``removal``)

        * ``doc``

        * ``packaging``

        * ``contrib``

        * ``misc``

    *Related issues and pull requests on GitHub:*
    [#&#8203;8066](https://togithub.com/aio-libs/aiohttp/issues/8066).

## Miscellaneous internal changes

-   Replaced all `tmpdir` fixtures with `tmp_path` in test suite.

    *Related issues and pull requests on GitHub:*
    [#&#8203;3551](https://togithub.com/aio-libs/aiohttp/issues/3551).

***

</details>

---

### Configuration

üìÖ **Schedule**: Branch creation - \"\" (UTC), Automerge - At any time (no
schedule defined).

üö¶ **Automerge**: Enabled.

‚ôª **Rebasing**: Whenever PR becomes conflicted, or you tick the
rebase/retry checkbox.

üîï **Ignore**: Close this PR and you won't be reminded about this update
again.

---

- [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check
this box

---

This PR has been generated by [Mend
Renovate](https://www.mend.io/free-developer-tools/renovate/). View
repository job log
[here](https://developer.mend.io/github/allenporter/pyrainbird).

<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy4xNTMuMiIsInVwZGF0ZWRJblZlciI6IjM3LjE1My4yIiwidGFyZ2V0QnJhbmNoIjoibWFpbiJ9-->

Co-authored-by: renovate[bot] <29139614+renovate[bot]@users.noreply.github.com>")`
‚Ä¶

`[bbc390c](/allenporter/pyrainbird/commit/bbc390cd18439045e879f78bd4e4ee500400e8c9)`

```
[![Mend
Renovate]([https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com](https://app.renovatebot.com/images/banner.svg%29%5D%28https%3A//renovatebot.com))

This PR contains the following updates:

| Package | Change | Age | Adoption | Passing | Confidence |
|---|---|---|---|---|---|
| [aiohttp](<https://togithub.com/aio-libs/aiohttp>) | `==3.9.1` ->
`==3.9.2` |
[![age](<https://developer.mend.io/api/mc/badges/age/pypi/aiohttp/3.9.2?slim=true)](https://docs.renovatebot.com/merge-confidence/>)
|
[![adoption](<https://developer.mend.io/api/mc/badges/adoption/pypi/aiohttp/3.9.2?slim=true)](https://docs.renovatebot.com/merge-confidence/>)
|
[![passing](<https://developer.mend.io/api/mc/badges/compatibility/pypi/aiohttp/3.9.1/3.9.2?slim=true)](https://docs.renovatebot.com/merge-confidence/>)
|
[![confidence](<https://developer.mend.io/api/mc/badges/confidence/pypi/aiohttp/3.9.1/3.9.2?slim=true)](https://docs.renovatebot.com/merge-confidence/>)
|

### GitHub Vulnerability Alerts

####
[[CVE-2024-23829](https://github.com/advisories/GHSA-8qpw-xqxj-h4r2 "CVE-2024-23829")](<https://togithub.com/aio-libs/aiohttp/security/advisories/GHSA-8qpw-xqxj-h4r2>)

### Summary
Security-sensitive parts of the *Python HTTP parser* retained minor
differences in allowable character sets, that must trigger error
handling to robustly match frame boundaries of proxies in order to
protect against injection of additional requests. Additionally,
validation could trigger exceptions that were not handled consistently
with processing of other malformed input.

### Details
These problems are rooted in pattern matching protocol elements,
previously improved by PR #&#8203;3235 and [GHSA-gfw2-4jvh-wgfg](https://github.com/advisories/GHSA-gfw2-4jvh-wgfg "GHSA-gfw2-4jvh-wgfg"):

1. The expression `HTTP/(\d).(\d)` lacked another backslash to clarify
that the separator should be a literal dot, not just *any* Unicode code
point (result: `HTTP/(\d)\.(\d)`).

2. The HTTP version was permitting Unicode digits, where only ASCII
digits are standards-compliant.

3. Distinct regular expressions for validating HTTP Method and Header
field names were used - though both should (at least) apply the common
restrictions of rfc9110 `token`.

### PoC
`GET / HTTP/1√∂1`
`GET / HTTP/1.ùüô`
`GET/: HTTP/1.1`
`Content-Encoding?: chunked`

### Impact
Primarily concerns running an aiohttp server without llhttp:
1. **behind a proxy**: Being more lenient than internet standards
require could, depending on deployment environment, assist in request
smuggling.
2. **directly accessible** or exposed behind proxies relaying malformed
input: the unhandled exception could cause excessive resource
consumption on the application server and/or its logging facilities.

-----

Patch:
[[https://github.com/aio-libs/aiohttp/pull/8074](https://togithub.com/aio-libs/aiohttp/pull/8074)/files](https://github.com/aio-libs/aiohttp/pull/8074%5D%28https%3A//togithub.com/aio-libs/aiohttp/pull/8074%29/files)

####
[[CVE-2024-23334](https://github.com/advisories/GHSA-5h86-8mv2-jq9f "CVE-2024-23334")](<https://togithub.com/aio-libs/aiohttp/security/advisories/GHSA-5h86-8mv2-jq9f>)

### Summary
Improperly configuring static resource resolution in aiohttp when used
as a web server can result in the unauthorized reading of arbitrary
files on the system.

### Details
When using aiohttp as a web server and configuring static routes, it is
necessary to specify the root path for static files. Additionally, the
option 'follow_symlinks' can be used to determine whether to follow
symbolic links outside the static root directory. When 'follow_symlinks'
is set to True, there is no validation to check if a given file path is
within the root directory.This can lead to directory traversal
vulnerabilities, resulting in unauthorized access to arbitrary files on
the system, even when symlinks are not present.

i.e. An application is only vulnerable with setup code like:
```
app.router.add_routes([
    web.static("/static", "static/", follow_symlinks=True),  # Remove follow_symlinks to avoid the vulnerability
])
```

### Impact
This is a directory traversal vulnerability with CWE ID 22. When using
aiohttp as a web server and enabling static resource resolution with
`follow_symlinks` set to True, it can lead to this vulnerability. This
vulnerability has been present since the introduction of the
`follow_symlinks` parameter.

### Workaround
Even if upgrading to a patched version of aiohttp, we recommend
following these steps regardless.

If using `follow_symlinks=True` outside of a restricted local
development environment, disable the option immediately. This option is
NOT needed to follow symlinks which point to a location _within_ the
static root directory, it is _only_ intended to allow a symlink to break
out of the static directory. Even with this CVE fixed, there is still a
substantial risk of misconfiguration when using this option on a server
that accepts requests from remote users.

Additionally, aiohttp has always recommended using a reverse proxy
server (such as nginx) to handle static resources and _not_ to use these
static resources in aiohttp for production environments. Doing so also
protects against this vulnerability, and is why we expect the number of
affected users to be very low.

-----

Patch:
[[https://github.com/aio-libs/aiohttp/pull/8079](https://togithub.com/aio-libs/aiohttp/pull/8079)/files](https://github.com/aio-libs/aiohttp/pull/8079%5D%28https%3A//togithub.com/aio-libs/aiohttp/pull/8079%29/files)

---

### Release Notes

<details>
<summary>aio-libs/aiohttp (aiohttp)</summary>

###
[`v3.9.2`](<https://togithub.com/aio-libs/aiohttp/releases/tag/v3.9.2>):
3.9.2

[Compare
Source](<https://togithub.com/aio-libs/aiohttp/compare/v3.9.1...v3.9.2>)

## Bug fixes

-   Fixed server-side websocket connection leak.

    *Related issues and pull requests on GitHub:*
    [#&#8203;7978](<https://togithub.com/aio-libs/aiohttp/issues/7978>).

-   Fixed `web.FileResponse` doing blocking I/O in the event loop.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8012](<https://togithub.com/aio-libs/aiohttp/issues/8012>).

- Fixed double compress when compression enabled and compressed file
exists in server file responses.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8014](<https://togithub.com/aio-libs/aiohttp/issues/8014>).

-   Added runtime type check for `ClientSession` `timeout` parameter.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8021](<https://togithub.com/aio-libs/aiohttp/issues/8021>).

- Fixed an unhandled exception in the Python HTTP parser on header lines
starting with a colon -- by :user:`pajod`.

Invalid request lines with anything but a dot between the HTTP major and
minor version are now rejected.
Invalid header field names containing question mark or slash are now
rejected.
Such requests are incompatible with :rfc:`9110#section-5.6.2` and are
not known to be of any legitimate use.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8074](<https://togithub.com/aio-libs/aiohttp/issues/8074>).

- Improved validation of paths for static resources requests to the
server -- by :user:`bdraco`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8079](<https://togithub.com/aio-libs/aiohttp/issues/8079>).

## Features

- Added support for passing :py:data:`True` to `ssl` parameter in
`ClientSession` while
    deprecating :py:data:`None` -- by :user:`xiangyan99`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;7698](<https://togithub.com/aio-libs/aiohttp/issues/7698>).

## Breaking changes

- Fixed an unhandled exception in the Python HTTP parser on header lines
starting with a colon -- by :user:`pajod`.

Invalid request lines with anything but a dot between the HTTP major and
minor version are now rejected.
Invalid header field names containing question mark or slash are now
rejected.
Such requests are incompatible with :rfc:`9110#section-5.6.2` and are
not known to be of any legitimate use.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8074](<https://togithub.com/aio-libs/aiohttp/issues/8074>).

## Improved documentation

- Fixed examples of `fallback_charset_resolver` function in the
:doc:`client_advanced` document. -- by :user:`henry0312`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;7995](<https://togithub.com/aio-libs/aiohttp/issues/7995>).

-   The Sphinx setup was updated to avoid showing the empty
    changelog draft section in the tagged release documentation
    builds on Read The Docs -- by :user:`webknjaz`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;8067](<https://togithub.com/aio-libs/aiohttp/issues/8067>).

## Packaging updates and notes for downstreams

-   The changelog categorization was made clearer. The
    contributors can now mark their fragment files more
    accurately -- by :user:`webknjaz`.

    The new category tags are:

        * ``bugfix``

        * ``feature``

        * ``deprecation``

        * ``breaking`` (previously, ``removal``)

        * ``doc``

        * ``packaging``

        * ``contrib``

        * ``misc``

    *Related issues and pull requests on GitHub:*
    [#&#8203;8066](<https://togithub.com/aio-libs/aiohttp/issues/8066>).

## Contributor-facing changes

- Updated :ref:`contributing/Tests coverage <aiohttp-contributing>`
section to show how we use `codecov` -- by :user:`Dreamsorcerer`.

    *Related issues and pull requests on GitHub:*
    [#&#8203;7916](<https://togithub.com/aio-libs/aiohttp/issues/7916>).

-   The changelog categorization was made clearer. The
    contributors can now mark their fragment files more
    accurately -- by :user:`webknjaz`.

    The new category tags are:

        * ``bugfix``

        * ``feature``

        * ``deprecation``

        * ``breaking`` (previously, ``removal``)

        * ``doc``

        * ``packaging``

        * ``contrib``

        * ``misc``

    *Related issues and pull requests on GitHub:*
    [#&#8203;8066](<https://togithub.com/aio-libs/aiohttp/issues/8066>).

## Miscellaneous internal changes

-   Replaced all `tmpdir` fixtures with `tmp_path` in test suite.

    *Related issues and pull requests on GitHub:*
    [#&#8203;3551](<https://togithub.com/aio-libs/aiohttp/issues/3551>).

***

</details>

---

### Configuration

üìÖ **Schedule**: Branch creation - "" (UTC), Automerge - At any time (no
schedule defined).

üö¶ **Automerge**: Enabled.

‚ôª **Rebasing**: Whenever PR becomes conflicted, or you tick the
rebase/retry checkbox.

üîï **Ignore**: Close this PR and you won't be reminded about this update
again.

---

- [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check
this box

---

This PR has been generated by [Mend
Renovate](<https://www.mend.io/free-developer-tools/renovate/>). View
repository job log
[here](<https://developer.mend.io/github/allenporter/pyrainbird>).

<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy4xNTMuMiIsInVwZGF0ZWRJblZlciI6IjM3LjE1My4yIiwidGFyZ2V0QnJhbmNoIjoibWFpbiJ9-->

Co-authored-by: renovate[bot] <29139614+renovate[bot]@users.noreply.github.com>
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Faio-libs%2Faiohttp%2Fpull%2F8074)

Reviewers

[![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod) [pajod](/pajod)

pajod left review comments

[![@webknjaz](https://avatars.githubusercontent.com/u/578543?s=40&v=4)](/webknjaz) [webknjaz](/webknjaz)

webknjaz left review comments

[![@asvetlov](https://avatars.githubusercontent.com/u/356399?s=40&v=4)](/asvetlov) [asvetlov](/asvetlov)

 Awaiting requested review from asvetlov

 asvetlov is a code owner

Assignees

No one assigned

Labels

[bot:chronographer:provided](/aio-libs/aiohttp/labels/bot%3Achronographer%3Aprovided)
There is a change note present in this PR

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=52&v=4)](/Dreamsorcerer) [![@webknjaz](https://avatars.githubusercontent.com/u/578543?s=52&v=4)](/webknjaz) [![@pajod](https://avatars.githubusercontent.com/u/6084746?s=52&v=4)](/pajod)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from lists.fedoraproject.org_42ee4177_20250114_195517.html ===


[![Fedora Mailing-Lists](/static/logo-hyperkitty-fedora.png)](/archives/ "Fedora Mailing-Lists")

[Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/XXWVZIVAYWEBHNRIILZVB3R3SDQNNAA7/)
[Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/XXWVZIVAYWEBHNRIILZVB3R3SDQNNAA7/)

* [Sign In](/accounts/login/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/XXWVZIVAYWEBHNRIILZVB3R3SDQNNAA7/)
* [Sign Up](/accounts/signup/?next=/archives/list/package-announce%40lists.fedoraproject.org/message/XXWVZIVAYWEBHNRIILZVB3R3SDQNNAA7/)

* [Manage this list](/admin/lists/package-announce.lists.fedoraproject.org/)

√ó
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/archives/list/package-announce%40lists.fedoraproject.org/2025/1/)

### 2024

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2024/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2024/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2024/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2024/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2024/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2024/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2024/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2024/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2024/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2024/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2024/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2024/1/)

### 2023

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2023/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2023/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2023/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2023/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2023/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2023/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2023/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2023/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2023/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2023/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2023/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2023/1/)

### 2022

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2022/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2022/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2022/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2022/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2022/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2022/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2022/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2022/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2022/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2022/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2022/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2022/1/)

### 2021

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2021/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2021/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2021/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2021/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2021/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2021/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2021/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2021/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2021/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2021/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2021/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2021/1/)

### 2020

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2020/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2020/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2020/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2020/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2020/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2020/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2020/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2020/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2020/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2020/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2020/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2020/1/)

### 2019

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2019/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2019/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2019/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2019/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2019/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2019/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2019/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2019/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2019/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2019/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2019/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2019/1/)

### 2018

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2018/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2018/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2018/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2018/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2018/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2018/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2018/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2018/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2018/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2018/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2018/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2018/1/)

### 2017

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2017/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2017/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2017/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2017/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2017/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2017/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2017/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2017/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2017/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2017/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2017/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2017/1/)

### 2016

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2016/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2016/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2016/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2016/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2016/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2016/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2016/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2016/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2016/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2016/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2016/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2016/1/)

### 2015

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2015/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2015/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2015/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2015/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2015/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2015/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2015/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2015/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2015/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2015/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2015/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2015/1/)

### 2014

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2014/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2014/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2014/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2014/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2014/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2014/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2014/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2014/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2014/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2014/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2014/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2014/1/)

### 2013

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2013/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2013/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2013/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2013/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2013/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2013/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2013/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2013/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2013/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2013/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2013/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2013/1/)

### 2012

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2012/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2012/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2012/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2012/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2012/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2012/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2012/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2012/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2012/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2012/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2012/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2012/1/)

### 2011

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2011/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2011/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2011/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2011/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2011/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2011/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2011/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2011/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2011/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2011/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2011/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2011/1/)

### 2010

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2010/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2010/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2010/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2010/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2010/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2010/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2010/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2010/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2010/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2010/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2010/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2010/1/)

### 2009

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2009/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2009/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2009/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2009/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2009/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2009/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2009/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2009/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2009/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2009/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2009/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2009/1/)

### 2008

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2008/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2008/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2008/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2008/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2008/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2008/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2008/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2008/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2008/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2008/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2008/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2008/1/)

### 2007

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2007/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2007/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2007/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2007/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2007/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2007/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2007/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2007/5/)
* [April](/archives/list/package-announce%40lists.fedoraproject.org/2007/4/)
* [March](/archives/list/package-announce%40lists.fedoraproject.org/2007/3/)
* [February](/archives/list/package-announce%40lists.fedoraproject.org/2007/2/)
* [January](/archives/list/package-announce%40lists.fedoraproject.org/2007/1/)

### 2006

* [December](/archives/list/package-announce%40lists.fedoraproject.org/2006/12/)
* [November](/archives/list/package-announce%40lists.fedoraproject.org/2006/11/)
* [October](/archives/list/package-announce%40lists.fedoraproject.org/2006/10/)
* [September](/archives/list/package-announce%40lists.fedoraproject.org/2006/9/)
* [August](/archives/list/package-announce%40lists.fedoraproject.org/2006/8/)
* [July](/archives/list/package-announce%40lists.fedoraproject.org/2006/7/)
* [June](/archives/list/package-announce%40lists.fedoraproject.org/2006/6/)
* [May](/archives/list/package-announce%40lists.fedoraproject.org/2006/5/)

[List overview](/archives/list/package-announce%40lists.fedoraproject.org/)

[Download](/archives/list/package-announce%40lists.fedoraproject.org/export/package-announce%40lists.fedoraproject.org-XXWVZIVAYWEBHNRIILZVB3R3SDQNNAA7.mbox.gz?message=XXWVZIVAYWEBHNRIILZVB3R3SDQNNAA7 "This message in gzipped mbox format")

[thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/XXWVZIVAYWEBHNRIILZVB3R3SDQNNAA7/#XXWVZIVAYWEBHNRIILZVB3R3SDQNNAA7)

# [SECURITY] Fedora 39 Update: python-aiohttp-3.9.3-1.fc39

![](https://seccdn.libravatar.org/avatar/be256568dfce45c1862b55e6cf3f2726.jpg?s=120&d=retro&r=g)

[updatesÔº†fedoraproject.org](/archives/users/3d8bb2e4c1d843beb492d4f8a7c44761/ "See the profile for updatesÔº†fedoraproject.org")

5 Feb
2024

5 Feb
'24

1:27 a.m.

--------------------------------------------------------------------------------
Fedora Update Notification
FEDORA-2024-f249b74f03
2024-02-05 01:23:58.727147
--------------------------------------------------------------------------------

Name : python-aiohttp
Product : Fedora 39
Version : 3.9.3
Release : 1.fc39
URL : <https://github.com/aio-libs/aiohttp>
Summary : Python HTTP client/server for asyncio
Description :
Python HTTP client/server for asyncio which supports both the client and the
server side of the HTTP protocol, client and server websocket, and webservers
with middlewares and pluggable routing.

--------------------------------------------------------------------------------
Update Information:

Security update for CVE-2024-23334 and CVE-2024-23829 <https://github.com/aio->
libs/aiohttp/releases/tag/v3.9.2 <https://github.com/aio->
libs/aiohttp/releases/tag/v3.9.3
--------------------------------------------------------------------------------
ChangeLog:

\* Tue Jan 30 2024 Benjamin A. Beasley code@musicinmybrain.net - 3.9.3-1
- Update to 3.9.3, security update for CVE-2024-23334 and CVE-2024-23829 (fix
RHBZ#2261891, fix RHBZ#2261910)
\* Tue Jan 30 2024 Benjamin A. Beasley code@musicinmybrain.net - 3.9.1-4
- Skip a couple of spurious or insignificant test failures (close RHBZ#2261544)
\* Fri Jan 26 2024 Fedora Release Engineering releng@fedoraproject.org - 3.9.1-3
- Rebuilt for <https://fedoraproject.org/wiki/Fedora_40_Mass_Rebuild>
\* Sun Jan 21 2024 Fedora Release Engineering releng@fedoraproject.org - 3.9.1-2
- Rebuilt for <https://fedoraproject.org/wiki/Fedora_40_Mass_Rebuild>
--------------------------------------------------------------------------------
References:

[ 1 ] Bug #2261887 - CVE-2024-23334 aiohttp: follow\_symlinks directory traversal vulnerability
<https://bugzilla.redhat.com/show_bug.cgi?id=2261887>
[ 2 ] Bug #2261909 - CVE-2024-23829 python-aiohttp: http request smuggling
<https://bugzilla.redhat.com/show_bug.cgi?id=2261909>
--------------------------------------------------------------------------------

This update can be installed with the "dnf" update program. Use
su -c 'dnf upgrade --advisory FEDORA-2024-f249b74f03' at the command
line. For more information, refer to the dnf documentation available at
<http://dnf.readthedocs.io/en/latest/command_ref.html#upgrade-command-label>

All packages are signed with the Fedora Project GPG key. More details on the
GPG keys used by the Fedora Project can be found at
<https://fedoraproject.org/keys>
--------------------------------------------------------------------------------

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/archives/list/package-announce%40lists.fedoraproject.org/thread/XXWVZIVAYWEBHNRIILZVB3R3SDQNNAA7/#XXWVZIVAYWEBHNRIILZVB3R3SDQNNAA7)

[Back to the list](/archives/list/package-announce%40lists.fedoraproject.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from github.com_7837b4f1_20250114_195515.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faio-libs%2Faiohttp%2Fsecurity%2Fadvisories%2FGHSA-8qpw-xqxj-h4r2)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Faio-libs%2Faiohttp%2Fsecurity%2Fadvisories%2FGHSA-8qpw-xqxj-h4r2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=aio-libs%2Faiohttp)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[aio-libs](/aio-libs)
/
**[aiohttp](/aio-libs/aiohttp)**
Public

* [Notifications](/login?return_to=%2Faio-libs%2Faiohttp) You must be signed in to change notification settings
* [Fork
  2.1k](/login?return_to=%2Faio-libs%2Faiohttp)
* [Star
   15.3k](/login?return_to=%2Faio-libs%2Faiohttp)

* [Code](/aio-libs/aiohttp)
* [Issues
  189](/aio-libs/aiohttp/issues)
* [Pull requests
  62](/aio-libs/aiohttp/pulls)
* [Discussions](/aio-libs/aiohttp/discussions)
* [Actions](/aio-libs/aiohttp/actions)
* [Security](/aio-libs/aiohttp/security)
* [Insights](/aio-libs/aiohttp/pulse)

Additional navigation options

* [Code](/aio-libs/aiohttp)
* [Issues](/aio-libs/aiohttp/issues)
* [Pull requests](/aio-libs/aiohttp/pulls)
* [Discussions](/aio-libs/aiohttp/discussions)
* [Actions](/aio-libs/aiohttp/actions)
* [Security](/aio-libs/aiohttp/security)
* [Insights](/aio-libs/aiohttp/pulse)

# HTTP parser (the python one, not llhttp) still overly lenient about separators

Low

[Dreamsorcerer](/Dreamsorcerer)
published
GHSA-8qpw-xqxj-h4r2
Jan 29, 2024

## Package

pip

aiohttp
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

< 3.9.1

## Patched versions

3.9.2

## Description

### Summary

Security-sensitive parts of the *Python HTTP parser* retained minor differences in allowable character sets, that must trigger error handling to robustly match frame boundaries of proxies in order to protect against injection of additional requests. Additionally, validation could trigger exceptions that were not handled consistently with processing of other malformed input.

### Details

These problems are rooted in pattern matching protocol elements, previously improved by PR [#3235](https://github.com/aio-libs/aiohttp/pull/3235) and [GHSA-gfw2-4jvh-wgfg](https://github.com/advisories/GHSA-gfw2-4jvh-wgfg "GHSA-gfw2-4jvh-wgfg"):

1. The expression `HTTP/(\d).(\d)` lacked another backslash to clarify that the separator should be a literal dot, not just *any* Unicode code point (result: `HTTP/(\d)\.(\d)`).
2. The HTTP version was permitting Unicode digits, where only ASCII digits are standards-compliant.
3. Distinct regular expressions for validating HTTP Method and Header field names were used - though both should (at least) apply the common restrictions of rfc9110 `token`.

### PoC

`GET / HTTP/1√∂1`

`GET / HTTP/1.ùüô`

`GET/: HTTP/1.1`

`Content-Encoding?: chunked`

### Impact

Primarily concerns running an aiohttp server without llhttp:

1. **behind a proxy**: Being more lenient than internet standards require could, depending on deployment environment, assist in request smuggling.
2. **directly accessible** or exposed behind proxies relaying malformed input: the unhandled exception could cause excessive resource consumption on the application server and/or its logging facilities.

---

Patch: <https://github.com/aio-libs/aiohttp/pull/8074/files>

### Severity

Low

### CVE ID

CVE-2024-23829

### Weaknesses

[CWE-444](/advisories?query=cwe%3A444)

### Credits

* [![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)
  [pajod](/pajod)
  Reporter

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_8fc387bd_20250115_115355.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-8qpw-xqxj-h4r2)

**CVE-2024-23829**

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-8qpw-xqxj-h4r2)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2Fadvisories%2F%3Cid%3E&source=header)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

1. [GitHub Advisory Database](/advisories)
2. [GitHub Reviewed](/advisories?query=type%3Areviewed)
3. [CVE-2024-23829](/advisories/GHSA-8qpw-xqxj-h4r2)

## aiohttp's HTTP parser (the python one, not llhttp) still overly lenient about separators

Moderate severity

GitHub Reviewed

Published
Jan 29, 2024
in
[aio-libs/aiohttp](/aio-libs/aiohttp)
‚Ä¢
Updated Sep 4, 2024

[Vulnerability details](/advisories/GHSA-8qpw-xqxj-h4r2)
[Dependabot alerts
0](/advisories/GHSA-8qpw-xqxj-h4r2/dependabot)

## Package

pip

aiohttp
([pip](/advisories?query=ecosystem%3Apip))

## Affected versions

< 3.9.2

## Patched versions

3.9.2

## Description

### Summary

Security-sensitive parts of the *Python HTTP parser* retained minor differences in allowable character sets, that must trigger error handling to robustly match frame boundaries of proxies in order to protect against injection of additional requests. Additionally, validation could trigger exceptions that were not handled consistently with processing of other malformed input.

### Details

These problems are rooted in pattern matching protocol elements, previously improved by PR #3235 and [GHSA-gfw2-4jvh-wgfg](https://github.com/advisories/GHSA-gfw2-4jvh-wgfg "GHSA-gfw2-4jvh-wgfg"):

1. The expression `HTTP/(\d).(\d)` lacked another backslash to clarify that the separator should be a literal dot, not just *any* Unicode code point (result: `HTTP/(\d)\.(\d)`).
2. The HTTP version was permitting Unicode digits, where only ASCII digits are standards-compliant.
3. Distinct regular expressions for validating HTTP Method and Header field names were used - though both should (at least) apply the common restrictions of rfc9110 `token`.

### PoC

`GET / HTTP/1√∂1`

`GET / HTTP/1.ùüô`

`GET/: HTTP/1.1`

`Content-Encoding?: chunked`

### Impact

Primarily concerns running an aiohttp server without llhttp:

1. **behind a proxy**: Being more lenient than internet standards require could, depending on deployment environment, assist in request smuggling.
2. **directly accessible** or exposed behind proxies relaying malformed input: the unhandled exception could cause excessive resource consumption on the application server and/or its logging facilities.

---

Patch: <https://github.com/aio-libs/aiohttp/pull/8074/files>

### References

* [GHSA-8qpw-xqxj-h4r2](https://github.com/aio-libs/aiohttp/security/advisories/GHSA-8qpw-xqxj-h4r2 "GHSA-8qpw-xqxj-h4r2")
* [GHSA-gfw2-4jvh-wgfg](https://github.com/aio-libs/aiohttp/security/advisories/GHSA-gfw2-4jvh-wgfg "GHSA-gfw2-4jvh-wgfg")
* [aio-libs/aiohttp#3235](https://github.com/aio-libs/aiohttp/pull/3235)
* <https://github.com/aio-libs/aiohttp/pull/8074/files>
* [aio-libs/aiohttp@33ccdfb](https://github.com/aio-libs/aiohttp/commit/33ccdfb0a12690af5bb49bda2319ec0907fa7827)
* <https://nvd.nist.gov/vuln/detail/CVE-2024-23829>
* [aio-libs/aiohttp#8074](https://github.com/aio-libs/aiohttp/pull/8074)
* <https://github.com/pypa/advisory-database/tree/main/vulns/aiohttp/PYSEC-2024-26.yaml>
* [https://lists.fedoraproject.org/archives/list/package-announce@lists.fedoraproject.org/message/ICUOCFGTB25WUT336BZ4UNYLSZOUVKBD](https://lists.fedoraproject.org/archives/list/package-announce%40lists.fedoraproject.org/message/ICUOCFGTB25WUT336BZ4UNYLSZOUVKBD)
* [https://lists.fedoraproject.org/archives/list/package-announce@lists.fedoraproject.org/message/XXWVZIVAYWEBHNRIILZVB3R3SDQNNAA7](https://lists.fedoraproject.org/archives/list/package-announce%40lists.fedoraproject.org/message/XXWVZIVAYWEBHNRIILZVB3R3SDQNNAA7)

[![@Dreamsorcerer](https://avatars.githubusercontent.com/u/2203121?s=40&v=4)](/Dreamsorcerer)
[Dreamsorcerer](/Dreamsorcerer)
published to
[aio-libs/aiohttp](/aio-libs/aiohttp/security/advisories/GHSA-8qpw-xqxj-h4r2)
Jan 29, 2024

Published to the GitHub Advisory Database
Jan 29, 2024

Reviewed
Jan 29, 2024

Published by the [National Vulnerability Database](https://nvd.nist.gov/vuln/detail/CVE-2024-23829)
Jan 29, 2024

Last updated
Sep 4, 2024

### Severity

Moderate

6.9

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v4 base metrics

##### Exploitability Metrics

Attack Vector
Network

Attack Complexity
Low

Attack Requirements
None

Privileges Required
None

User interaction
None
##### Vulnerable System Impact Metrics

Confidentiality
None

Integrity
Low

Availability
Low
##### Subsequent System Impact Metrics

Confidentiality
None

Integrity
None

Availability
None

Learn more about base metrics

# CVSS v4 base metrics

##### Exploitability Metrics

Attack Vector:
This metric reflects the context by which vulnerability exploitation is possible. This metric value (and consequently the resulting severity) will be larger the more remote (logically, and physically) an attacker can be in order to exploit the vulnerable system. The assumption is that the number of potential attackers for a vulnerability that could be exploited from across a network is larger than the number of potential attackers that could exploit a vulnerability requiring physical access to a device, and therefore warrants a greater severity.

Attack Complexity:
This metric captures measurable actions that must be taken by the attacker to actively evade or circumvent existing built-in security-enhancing conditions in order to obtain a working exploit. These are conditions whose primary purpose is to increase security and/or increase exploit engineering complexity. A vulnerability exploitable without a target-specific variable has a lower complexity than a vulnerability that would require non-trivial customization. This metric is meant to capture security mechanisms utilized by the vulnerable system.

Attack Requirements:
This metric captures the prerequisite deployment and execution conditions or variables of the vulnerable system that enable the attack. These differ from security-enhancing techniques/technologies (ref Attack Complexity) as the primary purpose of these conditions is not to explicitly mitigate attacks, but rather, emerge naturally as a consequence of the deployment and execution of the vulnerable system.

Privileges Required:
This metric describes the level of privileges an attacker must possess prior to successfully exploiting the vulnerability. The method by which the attacker obtains privileged credentials prior to the attack (e.g., free trial accounts), is outside the scope of this metric. Generally, self-service provisioned accounts do not constitute a privilege requirement if the attacker can grant themselves privileges as part of the attack.

User interaction:
This metric captures the requirement for a human user, other than the attacker, to participate in the successful compromise of the vulnerable system. This metric determines whether the vulnerability can be exploited solely at the will of the attacker, or whether a separate user (or user-initiated process) must participate in some manner.
##### Vulnerable System Impact Metrics

Confidentiality:
This metric measures the impact to the confidentiality of the information managed by the VULNERABLE SYSTEM due to a successfully exploited vulnerability. Confidentiality refers to limiting information access and disclosure to only authorized users, as well as preventing access by, or disclosure to, unauthorized ones.

Integrity:
This metric measures the impact to integrity of a successfully exploited vulnerability. Integrity refers to the trustworthiness and veracity of information. Integrity of the VULNERABLE SYSTEM is impacted when an attacker makes unauthorized modification of system data. Integrity is also impacted when a system user can repudiate critical actions taken in the context of the system (e.g. due to insufficient logging).

Availability:
This metric measures the impact to the availability of the VULNERABLE SYSTEM resulting from a successfully exploited vulnerability. While the Confidentiality and Integrity impact metrics apply to the loss of confidentiality or integrity of data (e.g., information, files) used by the system, this metric refers to the loss of availability of the impacted system itself, such as a networked service (e.g., web, database, email). Since availability refers to the accessibility of information resources, attacks that consume network bandwidth, processor cycles, or disk space all impact the availability of a system.
##### Subsequent System Impact Metrics

Confidentiality:
This metric measures the impact to the confidentiality of the information managed by the SUBSEQUENT SYSTEM due to a successfully exploited vulnerability. Confidentiality refers to limiting information access and disclosure to only authorized users, as well as preventing access by, or disclosure to, unauthorized ones.

Integrity:
This metric measures the impact to integrity of a successfully exploited vulnerability. Integrity refers to the trustworthiness and veracity of information. Integrity of the SUBSEQUENT SYSTEM is impacted when an attacker makes unauthorized modification of system data. Integrity is also impacted when a system user can repudiate critical actions taken in the context of the system (e.g. due to insufficient logging).

Availability:
This metric measures the impact to the availability of the SUBSEQUENT SYSTEM resulting from a successfully exploited vulnerability. While the Confidentiality and Integrity impact metrics apply to the loss of confidentiality or integrity of data (e.g., information, files) used by the system, this metric refers to the loss of availability of the impacted system itself, such as a networked service (e.g., web, database, email). Since availability refers to the accessibility of information resources, attacks that consume network bandwidth, processor cycles, or disk space all impact the availability of a system.

 CVSS:4.0/AV:N/AC:L/AT:N/PR:N/UI:N/VC:N/VI:L/VA:L/SC:N/SI:N/SA:N

### [EPSS score](https://www.first.org/epss/user-guide)

0.086%
 (39th percentile)

### Weaknesses

[CWE-444](/advisories?query=cwe%3A444)

### CVE ID

CVE-2024-23829

### GHSA ID

GHSA-8qpw-xqxj-h4r2

### Source code

[aio-libs/aiohttp](https://github.com/aio-libs/aiohttp)

### Credits

* [![@pajod](https://avatars.githubusercontent.com/u/6084746?s=40&v=4)](/pajod)
  [pajod](/pajod)
  Reporter

 Loading

Checking history

See something to contribute?
[Suggest improvements for this vulnerability](/advisories/GHSA-8qpw-xqxj-h4r2/improve).

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


