=== Content from github.com_dfe82b6c_20250115_100818.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTablePress%2FTablePress%2Fcommit%2F62aab50e7a9c486caaeff26dff4dc01e059ecb91)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTablePress%2FTablePress%2Fcommit%2F62aab50e7a9c486caaeff26dff4dc01e059ecb91)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=TablePress%2FTablePress)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[TablePress](/TablePress)
/
**[TablePress](/TablePress/TablePress)**
Public

* [Notifications](/login?return_to=%2FTablePress%2FTablePress) You must be signed in to change notification settings
* [Fork
  85](/login?return_to=%2FTablePress%2FTablePress)
* [Star
   276](/login?return_to=%2FTablePress%2FTablePress)

* [Code](/TablePress/TablePress)
* [Issues
  0](/TablePress/TablePress/issues)
* [Pull requests
  0](/TablePress/TablePress/pulls)
* [Actions](/TablePress/TablePress/actions)
* [Security](/TablePress/TablePress/security)
* [Insights](/TablePress/TablePress/pulse)

Additional navigation options

* [Code](/TablePress/TablePress)
* [Issues](/TablePress/TablePress/issues)
* [Pull requests](/TablePress/TablePress/pulls)
* [Actions](/TablePress/TablePress/actions)
* [Security](/TablePress/TablePress/security)
* [Insights](/TablePress/TablePress/pulse)

## Commit

[Permalink](/TablePress/TablePress/commit/62aab50e7a9c486caaeff26dff4dc01e059ecb91)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Finish TablePress 2.2.5.

[Browse files](/TablePress/TablePress/tree/62aab50e7a9c486caaeff26dff4dc01e059ecb91)
Browse the repository at this point in the history

* Loading branch information

[![@TobiasBg](https://avatars.githubusercontent.com/u/155439?s=40&v=4)](/TobiasBg)

[TobiasBg](/TablePress/TablePress/commits?author=TobiasBg "View all commits by TobiasBg")
committed
Jan 27, 2024

1 parent
[1030008](/TablePress/TablePress/commit/1030008095bc0369bbf6a7128b1ea0c917829d18)

commit 62aab50

 Show file tree

 Hide file tree

Showing
**29 changed files**
with
**186 additions**
and
**71 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* .gitattributes
  [.gitattributes](#diff-618cd5b83d62060ba3d027e314a21ceaf75d36067ff820db126642944145393e)
* .github/workflows

  + .github/workflows/wp-org-deploy.yml
    [wp-org-deploy.yml](#diff-d044663d2cf1624fea708d9cddfe155d7c50cf12b44272fa5bf689873a576e95)
* admin/js

  + build

    - admin/js/build/edit.asset.php
      [edit.asset.php](#diff-8d96e7fdc434b26b64d10b65c0f4c6cfa8b7b903164cad59562fa9f8563374d5)
    - admin/js/build/edit.js
      [edit.js](#diff-e2857891cdca94a7d75ea4f70497e4e19aa9bceb4fb0660b9f75ced0ea8cd95a)
  + admin/js/edit.js
    [edit.js](#diff-e31601d13432422cb94ff653c1524266a9d70680bee949f81df2daf7edfb1a3d)
* blocks/table

  + blocks/table/block.json
    [block.json](#diff-c60027bd8110b160ba4fdd56356835eaa49d31121c1228f248dc27e082415488)
* classes

  + classes/class-import-phpspreadsheet.php
    [class-import-phpspreadsheet.php](#diff-8b578962d248e2a90b7f46c51a509b7586b9e7be0214db0f2f9194b59e381cb2)
  + classes/class-import.php
    [class-import.php](#diff-e7d5889bf8669e953a00ad368a0c8450fba4ec2f76add1c0ab666f6e838e0eb1)
  + classes/class-tablepress.php
    [class-tablepress.php](#diff-842272d57a4c1047326031c63613c48e878ec89eb62a602344aa1cf97267c0ba)
  + classes/class-view.php
    [class-view.php](#diff-dc469257002bb7c3fc47e38d14c9896d933c212fef568c0b5fd1e10694928743)
* controllers

  + controllers/controller-admin.php
    [controller-admin.php](#diff-543e0b43e6a80c1828ef3e591040a6557b6f45b73d238b3bdc2a7d260c36f408)
  + controllers/controller-admin\_ajax.php
    [controller-admin\_ajax.php](#diff-e2c7e262d1cee5f3fb18185469d3346d4df40945cc60c783118632772cf62750)
  + controllers/controller-frontend.php
    [controller-frontend.php](#diff-444dde4bcbfedb27398465add537472db3f693839bf1af0250bea3da97df375a)
* libraries/freemius

  + includes

    - libraries/freemius/includes/class-freemius.php
      [class-freemius.php](#diff-8880914d5fc6d6439ce271e9a187e2646b5dcd709f7223d1cb99702e5d0864d6)
    - libraries/freemius/includes/class-fs-garbage-collector.php
      [class-fs-garbage-collector.php](#diff-18a401af71b7ab25f11e79ad1ed921ae082a91a6ff4373df935c80ac1a6bd8e5)
  + libraries/freemius/start.php
    [start.php](#diff-14ac300d516c844fc5b5bc8f0e1b3d5fd8a2ac6b996948c30493bbbac89f0b6a)
* models

  + models/model-table.php
    [model-table.php](#diff-a46685791ca906d8abf86c13f22623b5c20dd804d7a1aeac6d9fdfe1a7f181fc)
* package-lock.json
  [package-lock.json](#diff-053150b640a7ce75eff69d1a22cae7f0f94ad64ce9a855db544dda0929316519)
* package.json
  [package.json](#diff-7ae45ad102eab3b6d7e7896acd08c427a9b25b346470d7bc6507b6481575d519)
* phpstan.neon.dist
  [phpstan.neon.dist](#diff-6f19df6a6307a48db0940e6897591fb08776d2db8a6134737aa708defdb5c92d)
* readme.md
  [readme.md](#diff-5a831ea67cf5cf8703b0de46901ab25bd191f56b320053be9332d9a3b0d01d15)
* readme.txt
  [readme.txt](#diff-9e6e4772050998a5c0dc3c61acf3dab0a7e594566171fa5746d6b62f9598efb6)
* tablepress.php
  [tablepress.php](#diff-872c3ea78d5cdb85f86626232f146795a47b7800ff39932ab2673b7f57a6f75a)
* tests

  + data/import/phpspreadsheet

    - tests/data/import/phpspreadsheet/test-table.xlsx
      [test-table.xlsx](#diff-944051be57b0b60704e2ed8458d0bda54c29f6ccf505b4864c02628308e8413c)
  + tests/test-tablepress\_import.php
    [test-tablepress\_import.php](#diff-a07d0a70d1a35c661564cf0a4eb6768fb862407dabeda78b529ff69b39530bb7)
* views

  + views/view-about.php
    [view-about.php](#diff-0f9469ff461069b9c433ee0ec429d271745610bebd25b05f964d1fc522205410)
  + views/view-edit.php
    [view-edit.php](#diff-4520510eb8ceb80151c3113d9738e2f13b3b0b1b825c0dd3e1b1e17c29897bbf)
  + views/view-editor\_button\_thickbox.php
    [view-editor\_button\_thickbox.php](#diff-4f384e633af264ef8df5c692ea5f0fecbd0b2b3b0bdeb91e376ed4bc0b0dd41f)
  + views/view-list.php
    [view-list.php](#diff-ab815b29fcfda7ac951122a0492cfd35457a2641f279f9f814e20b3c1bc107dc)

## There are no files selected for viewing

6 changes: 5 additions & 1 deletion

6
[.gitattributes](#diff-618cd5b83d62060ba3d027e314a21ceaf75d36067ff820db126642944145393e ".gitattributes")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/.gitattributes)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4,6 +4,7 @@ |
|  |  | /.git/ export-ignore |
|  |  | /.github/ export-ignore |
|  |  | /.phpstan/ export-ignore |
|  |  | /.wordpress-org/ export-ignore |
|  |  | /node\_modules/ export-ignore |
|  |  | /tests/ export-ignore |
|  |  | /vendor/ export-ignore |
| Expand All | | @@ -13,20 +14,23 @@ |
|  |  | /.eslintrc.js export-ignore |
|  |  | /.gitattributes export-ignore |
|  |  | /.gitignore export-ignore |
|  |  | /.phpunit.result.cache export-ignore |
|  |  | /.prettierignore export-ignore |
|  |  | /.prettierrc.js export-ignore |
|  |  | /.stylelintignore export-ignore |
|  |  | /.stylelintrc.json export-ignore |
|  |  | /.typos.toml export-ignore |
|  |  | /composer.json export-ignore |
|  |  | /composer.lock export-ignore |
|  |  | /Gruntfile.js export-ignore |
|  |  | /package.json export-ignore |
|  |  | /package-lock.json export-ignore |
|  |  | /package.json export-ignore |
|  |  | /phpcompat.xml.dist export-ignore |
|  |  | /phpcs.xml.dist export-ignore |
|  |  | /phpstan.neon.dist export-ignore |
|  |  | /phpunit.xml.dist export-ignore |
|  |  | /readme.md export-ignore |
|  |  | /rector.php export-ignore |
|  |  | /webpack.config.js export-ignore |
|  |  |  |
|  |  | # Set default behaviour, in case users don't have core.autocrlf set. |
| Expand Down | |  |

47 changes: 47 additions & 0 deletions

47
[.github/workflows/wp-org-deploy.yml](#diff-d044663d2cf1624fea708d9cddfe155d7c50cf12b44272fa5bf689873a576e95 ".github/workflows/wp-org-deploy.yml")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/.github/workflows/wp-org-deploy.yml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,47 @@ |
|  |  | name: Deploy to wordpress.org Repository |
|  |  |  |
|  |  | on: |
|  |  | # Deploy to wordpress.org when a production release is created. |
|  |  | release: |
|  |  | types: [ released ] |
|  |  | # Do a "dry run" (without comming to SVN) when the workflow is manually triggered. |
|  |  | workflow\_dispatch: |
|  |  |  |
|  |  | jobs: |
|  |  |  |
|  |  | deploy\_to\_wordpress\_org: |
|  |  | name: Deploy to wordpress.org${{ github.event\_name == 'workflow\_dispatch' && ' (dry run)' || '' }} |
|  |  | if: github.repository == 'TablePress/TablePress' |
|  |  | runs-on: ubuntu-latest |
|  |  |  |
|  |  | steps: |
|  |  | - name: Checkout TablePress repository |
|  |  | uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11 # v4.1.1 |
|  |  |  |
|  |  | - name: WordPress Plugin Deploy |
|  |  | id: deploy |
|  |  | uses: 10up/action-wordpress-plugin-deploy@stable |
|  |  | with: |
|  |  | generate-zip: true |
|  |  | dry-run: ${{ github.event\_name == 'workflow\_dispatch' }} |
|  |  | env: |
|  |  | SVN\_USERNAME: ${{ secrets.SVN\_USERNAME }} |
|  |  | SVN\_PASSWORD: ${{ secrets.SVN\_PASSWORD }} |
|  |  | SLUG: ${{ vars.SLUG }} |
|  |  |  |
|  |  | - name: Get plugin version |
|  |  | id: get-version |
|  |  | if: ${{ github.event\_name != 'workflow\_dispatch' }} |
|  |  | run: | |
|  |  | echo "version=$(awk '/Stable tag: /{print $NF}' readme.txt)" >> $GITHUB\_OUTPUT |
|  |  |  |
|  |  | - name: Upload release ZIP file |
|  |  | uses: actions/upload-release-asset@v1 |
|  |  | if: ${{ github.event\_name != 'workflow\_dispatch' }} |
|  |  | env: |
|  |  | GITHUB\_TOKEN: ${{ secrets.GITHUB\_TOKEN }} |
|  |  | with: |
|  |  | upload\_url: ${{ github.event.release.upload\_url }} |
|  |  | asset\_path: ${{ steps.deploy.outputs.zip-path }} |
|  |  | asset\_name: ${{ vars.SLUG }}.${{ steps.get-version.outputs.version }}.zip |
|  |  | asset\_content\_type: application/zip |

2 changes: 1 addition & 1 deletion

2
[admin/js/build/edit.asset.php](#diff-8d96e7fdc434b26b64d10b65c0f4c6cfa8b7b903164cad59562fa9f8563374d5 "admin/js/build/edit.asset.php")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/admin/js/build/edit.asset.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1 +1 @@ |
|  |  | <?php return array('dependencies' => array('wp-hooks', 'wp-i18n', 'wp-url'), 'version' => 'cdf1475bc9e3883381b2'); |
|  |  | <?php return array('dependencies' => array('wp-hooks', 'wp-i18n', 'wp-url'), 'version' => 'aabe698a026e2cdb0743'); |

2 changes: 1 addition & 1 deletion

2
[admin/js/build/edit.js](#diff-e2857891cdca94a7d75ea4f70497e4e19aa9bceb4fb0660b9f75ced0ea8cd95a "admin/js/build/edit.js")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/admin/js/build/edit.js)
Edit file

Delete file

Load diff

Large diffs are not rendered by default.

Oops, something went wrong.

Retry

28 changes: 19 additions & 9 deletions

28
[admin/js/edit.js](#diff-e31601d13432422cb94ff653c1524266a9d70680bee949f81df2daf7edfb1a3d "admin/js/edit.js")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/admin/js/edit.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -765,7 +765,7 @@ tp.callbacks.table\_preview.process = function ( event ) { |
|  |  |  |
|  |  | // Add spinner, disable "Preview" buttons, and change cursor. |
|  |  | event.target.parentNode.insertAdjacentHTML( 'beforeend', `<span id="spinner-table-preview" class="spinner-table-preview spinner is-active" title="${ \_\_( 'The Table Preview is being loaded …', 'tablepress' ) }"/>` ); |
|  |  | $( '.button-show-preview' ).forEach( ( button ) => button.classList.add( 'disabled' ) ); |
|  |  | $( '.button-preview' ).forEach( ( button ) => button.classList.add( 'disabled' ) ); |
|  |  | document.body.classList.add( 'wait' ); |
|  |  |  |
|  |  | // Load the table preview data from the server via an AJAX request. |
| Expand Down  Expand Up | | @@ -800,7 +800,7 @@ tp.callbacks.table\_preview.process = function ( event ) { |
|  |  | .catch( ( error ) => tp.callbacks.table\_preview.error( error.message ) ) |
|  |  | .finally( () => { |
|  |  | $( '#spinner-table-preview' ).remove(); |
|  |  | $( '.button-show-preview' ).forEach( ( button ) => button.classList.remove( 'disabled' ) ); |
|  |  | $( '.button-preview' ).forEach( ( button ) => button.classList.remove( 'disabled' ) ); |
|  |  | document.body.classList.remove( 'wait' ); |
|  |  | } ); |
|  |  | }; |
| Expand Down  Expand Up | | @@ -938,12 +938,22 @@ tp.callbacks.save\_changes.success = function ( data ) { |
|  |  | // Update the nonces. |
|  |  | tp.nonces.edit\_table = data.new\_edit\_nonce; |
|  |  | tp.nonces.preview\_table = data.new\_preview\_nonce; |
|  |  | tp.nonces.copy\_table = data.new\_copy\_nonce; |
|  |  | tp.nonces.delete\_table = data.new\_delete\_nonce; |
|  |  |  |
|  |  | // Update URLs in Preview, Copy, and Delete links/buttons. |
|  |  | [ 'preview', 'copy', 'delete' ].forEach( ( action ) => { |
|  |  | $( `.button-${ action }` ).forEach( ( button ) => { |
|  |  | button.href = button.href |
|  |  | .replace( /item=[a-zA-Z0-9\_-]+/g, `item=${ data.table\_id }` ) // Updates both the "item" and the "return\_item" parameters. |
|  |  | .replace( /&\_wpnonce=[a-z0-9]+/ig, `&\_wpnonce=${ data[ `new\_${ action }\_nonce` ] }` ); |
|  |  | } ); |
|  |  | } ); |
|  |  |  |
|  |  | // Update URLs in Preview links. |
|  |  | $( '.button-show-preview' ).forEach( ( button ) => { |
|  |  | // Update URL in Export links/buttons. |
|  |  | $( '.button-export' ).forEach( ( button ) => { |
|  |  | button.href = button.href |
|  |  | .replace( /item=[a-zA-Z0-9\_-]+/g, `item=${ data.table\_id }` ) |
|  |  | .replace( /&\_wpnonce=[a-z0-9]+/ig, `&\_wpnonce=${ data.new\_preview\_nonce }` ); |
|  |  | .replace( /table\_id=[a-zA-Z0-9\_-]+/g, `table\_id=${ data.table\_id }` ); |
|  |  | } ); |
|  |  |  |
|  |  | // Update last-modified date and user nickname. |
| Expand Down  Expand Up | | @@ -1309,7 +1319,7 @@ tp.callbacks.keyboard\_shortcuts = function ( event ) { |
|  |  | if ( event.ctrlKey || event.metaKey ) { |
|  |  | if ( 80 === event.keyCode ) { |
|  |  | // Preview: Ctrl/Cmd + P. |
|  |  | action = 'show-preview'; |
|  |  | action = 'preview'; |
|  |  | } else if ( 83 === event.keyCode ) { |
|  |  | // Save Changes: Ctrl/Cmd + S. |
|  |  | action = 'save-changes'; |
| Expand Down  Expand Up | | @@ -1365,7 +1375,7 @@ tp.callbacks.keyboard\_shortcuts = function ( event ) { |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | if ( 'save-changes' === action || 'show-preview' === action ) { |
|  |  | if ( 'save-changes' === action || 'preview' === action ) { |
|  |  | // Blur the focussed element to make sure that all change events were triggered. |
|  |  | document.activeElement.blur(); // eslint-disable-line @wordpress/no-global-active-element |
|  |  |  |
| Expand Down  Expand Up | | @@ -1446,7 +1456,7 @@ $( '#tablepress-page' ).addEventListener( 'click', ( event ) => { |
|  |  | return; |
|  |  | } |
|  |  |  |
|  |  | if ( event.target.matches( '.button-show-preview' ) ) { |
|  |  | if ( event.target.matches( '.button-preview' ) ) { |
|  |  | tp.callbacks.table\_preview.process( event ); |
|  |  | return; |
|  |  | } |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[blocks/table/block.json](#diff-c60027bd8110b160ba4fdd56356835eaa49d31121c1228f248dc27e082415488 "blocks/table/block.json")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/blocks/table/block.json)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2,7 +2,7 @@ |
|  |  | "$schema": "https://schemas.wp.org/trunk/block.json", |
|  |  | "apiVersion": 3, |
|  |  | "name": "tablepress/table", |
|  |  | "version": "2.2.4", |
|  |  | "version": "2.2.5", |
|  |  | "title": "TablePress table", |
|  |  | "category": "media", |
|  |  | "icon": "list-view", |
| Expand Down | |  |

17 changes: 13 additions & 4 deletions

17
[classes/class-import-phpspreadsheet.php](#diff-8b578962d248e2a90b7f46c51a509b7586b9e7be0214db0f2f9194b59e381cb2 "classes/class-import-phpspreadsheet.php")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/classes/class-import-phpspreadsheet.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -77,10 +77,12 @@ public function import\_table( array $file ) /\* : array|WP\_Error \*/ { |
|  |  | \* @return array<string, mixed>|false Table array on success, false if the file is not a JSON file. |
|  |  | \*/ |
|  |  | protected function \_maybe\_import\_json( string $data ) /\* : array|false \*/ { |
|  |  | // If the first non-whitespace character is not a { or [, the file is not a supported JSON file. |
|  |  | $data = ltrim( $data ); |
|  |  | $data = trim( $data ); |
|  |  |  |
|  |  | // If the file does not begin / end with [ / ] or { / }, it's not a supported JSON file. |
|  |  | $first\_character = $data[0]; |
|  |  | if ( '{' !== $first\_character && '[' !== $first\_character ) { |
|  |  | $last\_character = $data[-1]; |
|  |  | if ( ! ( '[' === $first\_character && ']' === $last\_character ) && ! ( '{' === $first\_character && '}' === $last\_character ) ) { |
|  |  | return false; |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -246,9 +248,16 @@ protected function \_import\_phpspreadsheet( array $file ) /\* : array|WP\_Error \*/ |
|  |  |  |
|  |  | // Apply data type formatting. |
|  |  | $style = $spreadsheet->getCellXfByIndex( $cell->getXfIndex() ); |
|  |  |  |
|  |  | $format = $style->getNumberFormat()->getFormatCode() ?? \TablePress\PhpOffice\PhpSpreadsheet\Style\NumberFormat::FORMAT\_GENERAL; |
|  |  |  |
|  |  | // Fix floating point precision issues with numbers in the "General" Excel .xlsx format. |
|  |  | if ( 'xlsx' === $detected\_format && \TablePress\PhpOffice\PhpSpreadsheet\Style\NumberFormat::FORMAT\_GENERAL === $format && is\_numeric( $cell\_data ) ) { |
|  |  | $cell\_data = (string) (float) $cell\_data; // Type-cast strings to float and back. |
|  |  | } |
|  |  | $cell\_data = \TablePress\PhpOffice\PhpSpreadsheet\Style\NumberFormat::toFormattedString( |
|  |  | $cell\_data, |
|  |  | $style->getNumberFormat() ? $style->getNumberFormat()->getFormatCode() : \TablePress\PhpOffice\PhpSpreadsheet\Style\NumberFormat::FORMAT\_GENERAL, // @phpstan-ignore-line |
|  |  | $format, |
|  |  | array( $this, 'format\_color' ) |
|  |  | ); |
|  |  |  |
| Expand Down | |  |

28 changes: 19 additions & 9 deletions

28
[classes/class-import.php](#diff-e7d5889bf8669e953a00ad368a0c8450fba4ec2f76add1c0ab666f6e838e0eb1 "classes/class-import.php")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/classes/class-import.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -127,12 +127,16 @@ protected function \_get\_import\_files() /\* : array|WP\_Error \*/ { |
|  |  | return new WP\_Error( 'table\_import\_url\_host\_invalid', '', $this->import\_config['url'] ); |
|  |  | } |
|  |  |  |
|  |  | // Check the host of the Import URL against a blacklist of hosts, which should not be accessible, e.g. for security considerations. |
|  |  | $blocked\_hosts = array( |
|  |  | '169.254.169.254', // AWS Meta-data API. |
|  |  | // Check the IP address of the host against a blocklist of hosts which should not be accessible, e.g. for security considerations. |
|  |  | $ip = gethostbyname( $host ); // If no IP address can be found, this will return the host name, which will then be checked against the blocklist. |
|  |  | $blocked\_ips = array( |
|  |  | '169.254.169.254', // Meta-data API for various cloud providers. |
|  |  | '169.254.170.2', // AWS task metadata endpoint. |
|  |  | '192.0.0.192', // Oracle Cloud endpoint. |
|  |  | '100.100.100.200', // Alibaba Cloud endpoint. |
|  |  | ); |
|  |  | if ( in\_array( $host, $blocked\_hosts, true ) ) { |
|  |  | return new WP\_Error( 'table\_import\_url\_host\_blocked', '', $this->import\_config['url'] ); |
|  |  | if ( in\_array( $ip, $blocked\_ips, true ) ) { |
|  |  | return new WP\_Error( 'table\_import\_url\_host\_blocked', '', array( 'url' => $this->import\_config['url'], 'ip' => $ip ) ); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
| Expand Down  Expand Up | | @@ -395,7 +399,7 @@ protected function \_should\_use\_legacy\_import\_class(): bool { |
|  |  | && class\_exists( 'ZipArchive', false ) |
|  |  | && class\_exists( 'DOMDocument', false ) |
|  |  | && function\_exists( 'simplexml\_load\_string' ) |
|  |  | && function\_exists( 'libxml\_disable\_entity\_loader' ); |
|  |  | && ( function\_exists( 'libxml\_disable\_entity\_loader' ) || PHP\_VERSION\_ID >= 80000 ); // This function is only needed for older versions of PHP. |
|  |  | if ( ! $phpspreadsheet\_requirements\_fulfilled ) { |
|  |  | return true; |
|  |  | } |
| Expand Down  Expand Up | | @@ -531,11 +535,17 @@ protected function \_load\_table\_from\_file\_legacy( array $file ) /\* : array|WP\_Err |
|  |  |  |
|  |  | // If no format could be determined from the file extension, try guessing from the file content. |
|  |  | if ( '' === $format ) { |
|  |  | $data = trim( $data ); |
|  |  | $first\_character = $data[0]; |
|  |  | if ( '<' === $first\_character ) { |
|  |  | $last\_character = $data[-1]; |
|  |  |  |
|  |  | if ( '<' === $first\_character && '>' === $last\_character ) { |
|  |  | $format = 'html'; |
|  |  | } elseif ( '{' === $first\_character || '[' === $first\_character ) { |
|  |  | $format = 'json'; |
|  |  | } elseif ( ( '[' === $first\_character && ']' === $last\_character ) || ( '{' === $first\_character && '}' === $last\_character ) ) { |
|  |  | $json\_table = json\_decode( $data, true ); |
|  |  | if ( ! is\_null( $json\_table ) ) { |
|  |  | $format = 'json'; |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  |  |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[classes/class-tablepress.php](#diff-842272d57a4c1047326031c63613c48e878ec89eb62a602344aa1cf97267c0ba "classes/class-tablepress.php")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/classes/class-tablepress.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -27,7 +27,7 @@ abstract class TablePress { |
|  |  | \* @since 1.0.0 |
|  |  | \* @const string |
|  |  | \*/ |
|  |  | public const version = '2.2.4'; // phpcs:ignore Generic.NamingConventions.UpperCaseConstantName.ClassConstantNotUpperCase |
|  |  | public const version = '2.2.5'; // phpcs:ignore Generic.NamingConventions.UpperCaseConstantName.ClassConstantNotUpperCase |
|  |  |  |
|  |  | /\*\* |
|  |  | \* TablePress internal plugin version ("options scheme" version). |
| Expand All | | @@ -37,7 +37,7 @@ abstract class TablePress { |
|  |  | \* @since 1.0.0 |
|  |  | \* @const int |
|  |  | \*/ |
|  |  | public const db\_version = 70; // phpcs:ignore Generic.NamingConventions.UpperCaseConstantName.ClassConstantNotUpperCase |
|  |  | public const db\_version = 73; // phpcs:ignore Generic.NamingConventions.UpperCaseConstantName.ClassConstantNotUpperCase |
|  |  |  |
|  |  | /\*\* |
|  |  | \* TablePress "table scheme" (data format structure) version. |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[classes/class-view.php](#diff-dc469257002bb7c3fc47e38d14c9896d933c212fef568c0b5fd1e10694928743 "classes/class-view.php")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/classes/class-view.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -411,7 +411,7 @@ protected function print\_nav\_tab\_menu(): void { |
|  |  | ?> |
|  |  | <div id="tablepress-header" class="header"> |
|  |  | <h1 class="name"><img src="<?php echo plugins\_url( 'admin/img/tablepress-icon.png', TABLEPRESS\_\_FILE\_\_ ); ?>" class="tablepress-icon" alt="<?php esc\_attr\_e( 'TablePress plugin logo', 'tablepress' ); ?>" /><?php \_e( 'TablePress', 'tablepress' ); ?></h1> |
|  |  | <?php if ( tb\_tp\_fs()->is\_free\_plan() ) : ?> |
|  |  | <?php if ( ! TABLEPRESS\_IS\_PLAYGROUND\_PREVIEW && tb\_tp\_fs()->is\_free\_plan() ) : ?> |
|  |  | <div class="buttons"> |
|  |  | <a href="https://tablepress.org/premium/?utm\_source=plugin&utm\_medium=button&utm\_content=upgrade-button" class="tablepress-button"> |
|  |  | <span><?php \_e( 'Upgrade to Premium', 'tablepress' ); ?></span> |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[controllers/controller-admin.php](#diff-543e0b43e6a80c1828ef3e591040a6557b6f45b73d238b3bdc2a7d260c36f408 "controllers/controller-admin.php")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/controllers/controller-admin.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -410,7 +410,7 @@ public function add\_plugin\_row\_meta( array $links, string $file ): array { |
|  |  | $links[] = '<a href="https://tablepress.org/faq/" title="' . esc\_attr\_\_( 'Frequently Asked Questions', 'tablepress' ) . '">' . \_\_( 'FAQ', 'tablepress' ) . '</a>'; |
|  |  | $links[] = '<a href="https://tablepress.org/documentation/">' . \_\_( 'Documentation', 'tablepress' ) . '</a>'; |
|  |  | $links[] = '<a href="https://tablepress.org/support/">' . \_\_( 'Support', 'tablepress' ) . '</a>'; |
|  |  | if ( tb\_tp\_fs()->is\_free\_plan() ) { |
|  |  | if ( ! TABLEPRESS\_IS\_PLAYGROUND\_PREVIEW && tb\_tp\_fs()->is\_free\_plan() ) { |
|  |  | $links[] = '<a href="https://tablepress.org/premium/?utm\_source=plugin&utm\_medium=textlink&utm\_content=plugins-screen" title="' . esc\_attr\_\_( 'Check out the Premium version of TablePress!', 'tablepress' ) . '"><strong>' . \_\_( 'Go Premium', 'tablepress' ) . '</strong></a>'; |
|  |  | } |
|  |  | } |
| Expand Down  Expand Up | | @@ -790,7 +790,7 @@ public function handle\_post\_action\_add(): void { |
|  |  |  |
|  |  | $add\_table = wp\_unslash( $\_POST['table'] ); |
|  |  |  |
|  |  | // Perform sanity checks of posted data. |
|  |  | // Perform confidence checks of posted data. |
|  |  | $name = ( isset( $add\_table['name'] ) ) ? $add\_table['name'] : ''; |
|  |  | $description = ( isset( $add\_table['description'] ) ) ? $add\_table['description'] : ''; |
|  |  | if ( ! isset( $add\_table['rows'], $add\_table['columns'] ) ) { |
| Expand Down | |  |

2 changes: 2 additions & 0 deletions

2
[controllers/controller-admin\_ajax.php](#diff-e2c7e262d1cee5f3fb18185469d3346d4df40945cc60c783118632772cf62750 "controllers/controller-admin_ajax.php")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/controllers/controller-admin_ajax.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -174,6 +174,8 @@ public function ajax\_action\_save\_table(): void { |
|  |  | $response['table\_id'] = $table['id']; // @phpstan-ignore-line |
|  |  | $response['new\_edit\_nonce'] = wp\_create\_nonce( TablePress::nonce( 'edit', $table['id'] ) ); // @phpstan-ignore-line |
|  |  | $response['new\_preview\_nonce'] = wp\_create\_nonce( TablePress::nonce( 'preview\_table', $table['id'] ) ); // @phpstan-ignore-line |
|  |  | $response['new\_copy\_nonce'] = wp\_create\_nonce( TablePress::nonce( 'copy\_table', $table['id'] ) ); // @phpstan-ignore-line |
|  |  | $response['new\_delete\_nonce'] = wp\_create\_nonce( TablePress::nonce( 'delete\_table', $table['id'] ) ); // @phpstan-ignore-line |
|  |  | $response['last\_modified'] = TablePress::format\_datetime( $table['last\_modified'] ); // @phpstan-ignore-line |
|  |  | $response['last\_editor'] = TablePress::get\_user\_display\_name( $table['options']['last\_editor'] ); // @phpstan-ignore-line |
|  |  | } |
| Expand Down | |  |

14 changes: 8 additions & 6 deletions

14
[controllers/controller-frontend.php](#diff-444dde4bcbfedb27398465add537472db3f693839bf1af0250bea3da97df375a "controllers/controller-frontend.php")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/controllers/controller-frontend.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -253,6 +253,8 @@ public function add\_datatables\_calls(): void { |
|  |  | $commands = array(); |
|  |  |  |
|  |  | foreach ( $this->shown\_tables as $table\_id => $table\_store ) { |
|  |  | $table\_id = (string) $table\_id; // Ensure that the table ID is a string, as it comes from an array key where numeric strings are converted to integers. |
|  |  |  |
|  |  | if ( empty( $table\_store['instances'] ) ) { |
|  |  | continue; |
|  |  | } |
| Expand Down  Expand Up | | @@ -514,7 +516,7 @@ public function shortcode\_table( /\* array|string \*/ $shortcode\_atts ): string { |
|  |  | // Check, if a table with the given ID exists. |
|  |  | $table\_id = (string) preg\_replace( '/[^a-zA-Z0-9\_-]/', '', $shortcode\_atts['id'] ); |
|  |  | if ( ! TablePress::$model\_table->table\_exists( $table\_id ) ) { |
|  |  | $message = "[table &#8220;{$table\_id}&#8221; not found /]<br />\n"; |
|  |  | $message = "&#91;table “{$table\_id}” not found /&#93;<br />\n"; |
|  |  | /\*\* |
|  |  | \* Filters the "Table not found" message. |
|  |  | \* |
| Expand All | | @@ -530,7 +532,7 @@ public function shortcode\_table( /\* array|string \*/ $shortcode\_atts ): string { |
|  |  | // Load table, with table data, options, and visibility settings. |
|  |  | $table = TablePress::$model\_table->load( $table\_id, true, true ); |
|  |  | if ( is\_wp\_error( $table ) ) { |
|  |  | $message = "[table &#8220;{$table\_id}&#8221; could not be loaded /]<br />\n"; |
|  |  | $message = "&#91;table “{$table\_id}” could not be loaded /&#93;<br />\n"; |
|  |  | /\*\* |
|  |  | \* Filters the "Table could not be loaded" message. |
|  |  | \* |
| Expand All | | @@ -544,7 +546,7 @@ public function shortcode\_table( /\* array|string \*/ $shortcode\_atts ): string { |
|  |  | return $message; |
|  |  | } |
|  |  | if ( isset( $table['is\_corrupted'] ) && $table['is\_corrupted'] ) { |
|  |  | $message = "<div>Attention: The internal data of table &#8220;{$table\_id}&#8221; is corrupted!</div>"; |
|  |  | $message = "<div>Attention: The internal data of table “{$table\_id}” is corrupted!</div>"; |
|  |  | /\*\* |
|  |  | \* Filters the "Table data is corrupted" message. |
|  |  | \* |
| Expand Down  Expand Up | | @@ -786,7 +788,7 @@ public function shortcode\_table\_info( /\* array|string \*/ $shortcode\_atts ): stri |
|  |  | // Check, if a table with the given ID exists. |
|  |  | $table\_id = preg\_replace( '/[^a-zA-Z0-9\_-]/', '', $shortcode\_atts['id'] ); |
|  |  | if ( ! TablePress::$model\_table->table\_exists( $table\_id ) ) { |
|  |  | $message = "[table &#8220;{$table\_id}&#8221; not found /]<br />\n"; |
|  |  | $message = "&#91;table “{$table\_id}” not found /&#93;<br />\n"; |
|  |  | /\*\* This filter is documented in controllers/controller-frontend.php \*/ |
|  |  | $message = apply\_filters( 'tablepress\_table\_not\_found\_message', $message, $table\_id ); |
|  |  | return $message; |
| Expand All | | @@ -795,7 +797,7 @@ public function shortcode\_table\_info( /\* array|string \*/ $shortcode\_atts ): stri |
|  |  | // Load table, with table data, options, and visibility settings. |
|  |  | $table = TablePress::$model\_table->load( $table\_id, true, true ); |
|  |  | if ( is\_wp\_error( $table ) ) { |
|  |  | $message = "[table &#8220;{$table\_id}&#8221; could not be loaded /]<br />\n"; |
|  |  | $message = "&#91;table “{$table\_id}” could not be loaded /&#93;<br />\n"; |
|  |  | /\*\* This filter is documented in controllers/controller-frontend.php \*/ |
|  |  | $message = apply\_filters( 'tablepress\_table\_load\_error\_message', $message, $table\_id, $table ); |
|  |  | return $message; |
| Expand Down  Expand Up | | @@ -860,7 +862,7 @@ public function shortcode\_table\_info( /\* array|string \*/ $shortcode\_atts ): stri |
|  |  | $output = count( $table['data'][0] ); |
|  |  | break; |
|  |  | default: |
|  |  | $output = "[table-info field &#8220;{$field}&#8221; not found in table &#8220;{$table\_id}&#8221; /]<br />\n"; |
|  |  | $output = "&#91;table-info field “{$field}” not found in table “{$table\_id}” /&#93;<br />\n"; |
|  |  | /\*\* |
|  |  | \* Filters the "table info field not found" message. |
|  |  | \* |
| Expand Down | |  |

3 changes: 1 addition & 2 deletions

3
[libraries/freemius/includes/class-freemius.php](#diff-8880914d5fc6d6439ce271e9a187e2646b5dcd709f7223d1cb99702e5d0864d6 "libraries/freemius/includes/class-freemius.php")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/libraries/freemius/includes/class-freemius.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -1357,8 +1357,7 @@ function \_plugins\_loaded() { |
|  |  | } |
|  |  |  |
|  |  | function \_run\_garbage\_collector() { |
|  |  | // @todo - Remove this check once the garbage collector is ready to be out of beta. |
|  |  | if ( true !== fs\_get\_optional\_constant( 'WP\_FS\_\_ENABLE\_GARBAGE\_COLLECTOR', false ) ) { |
|  |  | if ( true !== fs\_get\_optional\_constant( 'WP\_FS\_\_ENABLE\_GARBAGE\_COLLECTOR', true ) ) { |
|  |  | return; |
|  |  | } |
|  |  |  |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[libraries/freemius/includes/class-fs-garbage-collector.php](#diff-18a401af71b7ab25f11e79ad1ed921ae082a91a6ff4373df935c80ac1a6bd8e5 "libraries/freemius/includes/class-fs-garbage-collector.php")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/libraries/freemius/includes/class-fs-garbage-collector.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -281,7 +281,7 @@ function clean() { |
|  |  | $has\_updated\_option = false; |
|  |  |  |
|  |  | foreach ( $users as $user\_id => $user ) { |
|  |  | if ( ! isset( $user\_has\_install[ $user\_id ] ) ) { |
|  |  | if ( ! isset( $user\_has\_install\_map[ $user\_id ] ) ) { |
|  |  | unset( $users[ $user\_id ] ); |
|  |  |  |
|  |  | foreach( $products\_user\_id\_license\_ids\_map as $product\_id => $user\_id\_license\_ids\_map ) { |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[libraries/freemius/start.php](#diff-14ac300d516c844fc5b5bc8f0e1b3d5fd8a2ac6b996948c30493bbbac89f0b6a "libraries/freemius/start.php")

Show comments

[View file](/TablePress/TablePress/blob/62aab50e7a9c486caaeff26dff4dc01e059ecb91/libraries/freemius/start.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -15,7 +15,7 @@ |
|  |  | \* |
|  |  | \* @var string |
|  |  | \*/ |
|  |  | $this\_sdk\_version = '2.6.1'; |
|  |  | $this\_sdk\_version = '2.6.2'; |
|  |  |  |
|  |  | #region SDK Selection Logic -------------------------------------------------------------------- |
|  |  |  |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `62aab50`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTablePress%2FTablePress%2Fcommit%2F62aab50e7a9c486caaeff26dff4dc01e059ecb91) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_e5bc1d71_20250115_100820.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTablePress%2FTablePress%2Fsecurity%2Fadvisories%2FGHSA-x8rf-c8x6-mrpg)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTablePress%2FTablePress%2Fsecurity%2Fadvisories%2FGHSA-x8rf-c8x6-mrpg)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=TablePress%2FTablePress)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[TablePress](/TablePress)
/
**[TablePress](/TablePress/TablePress)**
Public

* [Notifications](/login?return_to=%2FTablePress%2FTablePress) You must be signed in to change notification settings
* [Fork
  85](/login?return_to=%2FTablePress%2FTablePress)
* [Star
   276](/login?return_to=%2FTablePress%2FTablePress)

* [Code](/TablePress/TablePress)
* [Issues
  0](/TablePress/TablePress/issues)
* [Pull requests
  0](/TablePress/TablePress/pulls)
* [Actions](/TablePress/TablePress/actions)
* [Security](/TablePress/TablePress/security)
* [Insights](/TablePress/TablePress/pulse)

Additional navigation options

* [Code](/TablePress/TablePress)
* [Issues](/TablePress/TablePress/issues)
* [Pull requests](/TablePress/TablePress/pulls)
* [Actions](/TablePress/TablePress/actions)
* [Security](/TablePress/TablePress/security)
* [Insights](/TablePress/TablePress/pulse)

# SSRF vulnerability due to insufficient filtering of cloud provider hosts

Low

[TobiasBg](/TobiasBg)
published
GHSA-x8rf-c8x6-mrpg
Jan 30, 2024

## Package

TablePress
(PHP)

## Affected versions

<= 2.2.4

## Patched versions

>= 2.2.5

## Description

### Summary

For importing tables, TablePress makes external HTTP requests based on a URL that is provided by the user.

That user input is filtered insufficiently, which makes it is possible to send requests to unintended network locations and receive responses.

Specifically, the metadata API endpoint `169.254.169.254` of common cloud providers like AWS, Google Cloud, and others is at risk. While that exact IP address is already filtered, other notations like decimal or hex notations, or hostnames returning that IP, are not.

### Details

The PoC requires a WordPress user role of Author or higher (to which the `tablepress_import_tables` access capability is assigned), as only these can use the import feature.

### PoC

1. Go to the TablePress "Import" screen.
2. Choose the "URL" import source.
3. Use an Import URL like `http://host/latest/meta-data/`, with `host` being having an DNS `A` record of `169.254.169.254`.
4. If the site is hosted on a common cloud provider's infrastructure, that endpoint's data will be parsed as a CSV file and shown, if it is available.

### Impact

On sites in a cloud environment like AWS, an attacker can potentially make GET requests to the instance's metadata REST API. If the instance's configuration is insecure, this can lead to the exposure of internal data, including credentials.

Notably, cloud providers are more and more protecting this API endpoint by also requiring a special HTTP header to be present during the request. Also, only GET requests are possible with this method, further limiting the risk. Given that most WordPress sites are not hosted on dedicated cloud provider setups, the overall impact of this issue is low.

### Severity

Low

3.0

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
High

Privileges required
High

User interaction
None

Scope
Changed

Confidentiality
Low

Integrity
None

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:H/PR:H/UI:N/S:C/C:L/I:N/A:N

### CVE ID

CVE-2024-23825

### Weaknesses

[CWE-918](/advisories?query=cwe%3A918)

### Credits

* [![@isacaya](https://avatars.githubusercontent.com/u/114328108?s=40&v=4)](/isacaya)
  [isacaya](/isacaya)
  Reporter
* [![@TobiasBg](https://avatars.githubusercontent.com/u/155439?s=40&v=4)](/TobiasBg)
  [TobiasBg](/TobiasBg)
  Coordinator

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


