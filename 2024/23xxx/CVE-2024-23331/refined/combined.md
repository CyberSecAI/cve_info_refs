=== Content from vitejs.dev_0bfe1a9c_20250114_224318.html ===

 [Skip to content](#VPContent) [![](/logo.svg)Vite](/)Search`K` Main Navigation [Guide](/guide/)[Config](/config/)[Plugins](/plugins/)Resources[Team](/team)[Blog](/blog)[Releases](/releases)[Bluesky](https://bsky.app/profile/vite.dev)[Mastodon](https://elk.zone/m.webtoo.ls/%40vite)[X](https://x.com/vite_js)[Discord Chat](https://chat.vite.dev)[Awesome Vite](https://github.com/vitejs/awesome-vite)[ViteConf](https://viteconf.org)[DEV Community](https://dev.to/t/vite)[Changelog](https://github.com/vitejs/vite/blob/main/packages/vite/CHANGELOG.md)[Contributing](https://github.com/vitejs/vite/blob/main/CONTRIBUTING.md)Version[Vite 5 Docs](https://v5.vite.dev)[Vite 4 Docs](https://v4.vite.dev)[Vite 3 Docs](https://v3.vite.dev)[Vite 2 Docs](https://v2.vite.dev)

English

[简体中文](https://cn.vite.dev/config/server-options)[日本語](https://ja.vite.dev/config/server-options)[Español](https://es.vite.dev/config/server-options)[Português](https://pt.vite.dev/config/server-options)[한국어](https://ko.vite.dev/config/server-options)[Deutsch](https://de.vite.dev/config/server-options)

English

[简体中文](https://cn.vite.dev/config/server-options)[日本語](https://ja.vite.dev/config/server-options)[Español](https://es.vite.dev/config/server-options)[Português](https://pt.vite.dev/config/server-options)[한국어](https://ko.vite.dev/config/server-options)[Deutsch](https://de.vite.dev/config/server-options)

Appearance

MenuReturn to top Sidebar Navigation
## Config

[Configuring Vite](/config/)[Shared Options](/config/shared-options)[Server Options](/config/server-options)[Build Options](/config/build-options)[Preview Options](/config/preview-options)[Dep Optimization Options](/config/dep-optimization-options)[SSR Options](/config/ssr-options)[Worker Options](/config/worker-options)On this page

[![ViteConf Logo](/viteconf.svg)

Building Together

ViteConf 2024

Watch the replay!](https://viteconf.org/24/replay?utm=vite-sidebar)
# Server Options [​](#server-options)

Unless noted, the options in this section are only applied to dev.

## server.host [​](#server-host)

* **Type:** `string | boolean`
* **Default:** `'localhost'`

Specify which IP addresses the server should listen on. Set this to `0.0.0.0` or `true` to listen on all addresses, including LAN and public addresses.

This can be set via the CLI using `--host 0.0.0.0` or `--host`.

NOTE

There are cases when other servers might respond instead of Vite.

The first case is when `localhost` is used. Node.js under v17 reorders the result of DNS-resolved addresses by default. When accessing `localhost`, browsers use DNS to resolve the address and that address might differ from the address which Vite is listening to. Vite prints the resolved address when it differs.

You can set [`dns.setDefaultResultOrder('verbatim')`](https://nodejs.org/api/dns.html#dns_dns_setdefaultresultorder_order) to disable the reordering behavior. Vite will then print the address as `localhost`.

vite.config.jsjs
```
import { defineConfig } from 'vite'
import dns from 'node:dns'

dns.setDefaultResultOrder('verbatim')

export default defineConfig({
  // omit
})
```

The second case is when wildcard hosts (e.g. `0.0.0.0`) are used. This is because servers listening on non-wildcard hosts take priority over those listening on wildcard hosts.

Accessing the server on WSL2 from your LAN

When running Vite on WSL2, it is not sufficient to set `host: true` to access the server from your LAN. See [the WSL document](https://learn.microsoft.com/en-us/windows/wsl/networking#accessing-a-wsl-2-distribution-from-your-local-area-network-lan) for more details.

## server.port [​](#server-port)

* **Type:** `number`
* **Default:** `5173`

Specify server port. Note if the port is already being used, Vite will automatically try the next available port so this may not be the actual port the server ends up listening on.

## server.strictPort [​](#server-strictport)

* **Type:** `boolean`

Set to `true` to exit if port is already in use, instead of automatically trying the next available port.

## server.https [​](#server-https)

* **Type:** `https.ServerOptions`

Enable TLS + HTTP/2. Note this downgrades to TLS only when the [`server.proxy` option](#server-proxy) is also used.

The value can also be an [options object](https://nodejs.org/api/https.html#https_https_createserver_options_requestlistener) passed to `https.createServer()`.

A valid certificate is needed. For a basic setup, you can add [@vitejs/plugin-basic-ssl](https://github.com/vitejs/vite-plugin-basic-ssl) to the project plugins, which will automatically create and cache a self-signed certificate. But we recommend creating your own certificates.

## server.open [​](#server-open)

* **Type:** `boolean | string`

Automatically open the app in the browser on server start. When the value is a string, it will be used as the URL's pathname. If you want to open the server in a specific browser you like, you can set the env `process.env.BROWSER` (e.g. `firefox`). You can also set `process.env.BROWSER_ARGS` to pass additional arguments (e.g. `--incognito`).

`BROWSER` and `BROWSER_ARGS` are also special environment variables you can set in the `.env` file to configure it. See [the `open` package](https://github.com/sindresorhus/open#app) for more details.

**Example:**

js
```
export default defineConfig({
  server: {
    open: '/docs/index.html',
  },
})
```
## server.proxy [​](#server-proxy)

* **Type:** `Record<string, string | ProxyOptions>`

Configure custom proxy rules for the dev server. Expects an object of `{ key: options }` pairs. Any requests that request path starts with that key will be proxied to that specified target. If the key starts with `^`, it will be interpreted as a `RegExp`. The `configure` option can be used to access the proxy instance. If a request matches any of the configured proxy rules, the request won't be transformed by Vite.

Note that if you are using non-relative [`base`](/config/shared-options#base), you must prefix each key with that `base`.

Extends [`http-proxy`](https://github.com/http-party/node-http-proxy#options). Additional options are [here](https://github.com/vitejs/vite/blob/main/packages/vite/src/node/server/middlewares/proxy.ts#L13).

In some cases, you might also want to configure the underlying dev server (e.g. to add custom middlewares to the internal [connect](https://github.com/senchalabs/connect) app). In order to do that, you need to write your own [plugin](/guide/using-plugins) and use [configureServer](/guide/api-plugin#configureserver) function.

**Example:**

js
```
export default defineConfig({
  server: {
    proxy: {
      // string shorthand:
      // http://localhost:5173/foo
      //   -> http://localhost:4567/foo
      '/foo': 'http://localhost:4567',
      // with options:
      // http://localhost:5173/api/bar
      //   -> http://jsonplaceholder.typicode.com/bar
      '/api': {
        target: 'http://jsonplaceholder.typicode.com',
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/api/, ''),
      },
      // with RegExp:
      // http://localhost:5173/fallback/
      //   -> http://jsonplaceholder.typicode.com/
      '^/fallback/.*': {
        target: 'http://jsonplaceholder.typicode.com',
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/fallback/, ''),
      },
      // Using the proxy instance
      '/api': {
        target: 'http://jsonplaceholder.typicode.com',
        changeOrigin: true,
        configure: (proxy, options) => {
          // proxy will be an instance of 'http-proxy'
        },
      },
      // Proxying websockets or socket.io:
      // ws://localhost:5173/socket.io
      //   -> ws://localhost:5174/socket.io
      // Exercise caution using `rewriteWsOrigin` as it can leave the
      // proxying open to CSRF attacks.
      '/socket.io': {
        target: 'ws://localhost:5174',
        ws: true,
        rewriteWsOrigin: true,
      },
    },
  },
})
```
## server.cors [​](#server-cors)

* **Type:** `boolean | CorsOptions`

Configure CORS for the dev server. This is enabled by default and allows any origin. Pass an [options object](https://github.com/expressjs/cors#configuration-options) to fine tune the behavior or `false` to disable.

## server.headers [​](#server-headers)

* **Type:** `OutgoingHttpHeaders`

Specify server response headers.

## server.hmr [​](#server-hmr)

* **Type:** `boolean | { protocol?: string, host?: string, port?: number, path?: string, timeout?: number, overlay?: boolean, clientPort?: number, server?: Server }`

Disable or configure HMR connection (in cases where the HMR websocket must use a different address from the http server).

Set `server.hmr.overlay` to `false` to disable the server error overlay.

`protocol` sets the WebSocket protocol used for the HMR connection: `ws` (WebSocket) or `wss` (WebSocket Secure).

`clientPort` is an advanced option that overrides the port only on the client side, allowing you to serve the websocket on a different port than the client code looks for it on.

When `server.hmr.server` is defined, Vite will process the HMR connection requests through the provided server. If not in middleware mode, Vite will attempt to process HMR connection requests through the existing server. This can be helpful when using self-signed certificates or when you want to expose Vite over a network on a single port.

Check out [`vite-setup-catalogue`](https://github.com/sapphi-red/vite-setup-catalogue) for some examples.

NOTE

With the default configuration, reverse proxies in front of Vite are expected to support proxying WebSocket. If the Vite HMR client fails to connect WebSocket, the client will fall back to connecting the WebSocket directly to the Vite HMR server bypassing the reverse proxies:

```
Direct websocket connection fallback. Check out https://vite.dev/config/server-options.html#server-hmr to remove the previous connection error.
```

The error that appears in the Browser when the fallback happens can be ignored. To avoid the error by directly bypassing reverse proxies, you could either:

* configure the reverse proxy to proxy WebSocket too
* set [`server.strictPort = true`](#server-strictport) and set `server.hmr.clientPort` to the same value with `server.port`
* set `server.hmr.port` to a different value from [`server.port`](#server-port)
## server.warmup [​](#server-warmup)

* **Type:** `{ clientFiles?: string[], ssrFiles?: string[] }`
* **Related:** [Warm Up Frequently Used Files](/guide/performance#warm-up-frequently-used-files)

Warm up files to transform and cache the results in advance. This improves the initial page load during server starts and prevents transform waterfalls.

`clientFiles` are files that are used in the client only, while `ssrFiles` are files that are used in SSR only. They accept an array of file paths or [`tinyglobby`](https://github.com/SuperchupuDev/tinyglobby) patterns relative to the `root`.

Make sure to only add files that are frequently used to not overload the Vite dev server on startup.

js
```
export default defineConfig({
  server: {
    warmup: {
      clientFiles: ['./src/components/*.vue', './src/utils/big-utils.js'],
      ssrFiles: ['./src/server/modules/*.js'],
    },
  },
})
```
## server.watch [​](#server-watch)

* **Type:** `object | null`

File system watcher options to pass on to [chokidar](https://github.com/paulmillr/chokidar/tree/3.6.0#api).

The Vite server watcher watches the `root` and skips the `.git/`, `node_modules/`, and Vite's `cacheDir` and `build.outDir` directories by default. When updating a watched file, Vite will apply HMR and update the page only if needed.

If set to `null`, no files will be watched. `server.watcher` will provide a compatible event emitter, but calling `add` or `unwatch` will have no effect.

Watching files in `node_modules`

It's currently not possible to watch files and packages in `node_modules`. For further progress and workarounds, you can follow [issue #8619](https://github.com/vitejs/vite/issues/8619).

Using Vite on Windows Subsystem for Linux (WSL) 2

When running Vite on WSL2, file system watching does not work when a file is edited by Windows applications (non-WSL2 process). This is due to [a WSL2 limitation](https://github.com/microsoft/WSL/issues/4739). This also applies to running on Docker with a WSL2 backend.

To fix it, you could either:

* **Recommended**: Use WSL2 applications to edit your files.
  + It is also recommended to move the project folder outside of a Windows filesystem. Accessing Windows filesystem from WSL2 is slow. Removing that overhead will improve performance.
* Set `{ usePolling: true }`.
  + Note that [`usePolling` leads to high CPU utilization](https://github.com/paulmillr/chokidar/tree/3.6.0#performance).
## server.middlewareMode [​](#server-middlewaremode)

* **Type:** `boolean`
* **Default:** `false`

Create Vite server in middleware mode.

* **Related:** [appType](/config/shared-options#apptype), [SSR - Setting Up the Dev Server](/guide/ssr#setting-up-the-dev-server)
* **Example:**

js
```
import express from 'express'
import { createServer as createViteServer } from 'vite'

async function createServer() {
  const app = express()

  // Create Vite server in middleware mode
  const vite = await createViteServer({
    server: { middlewareMode: true },
    // don't include Vite's default HTML handling middlewares
    appType: 'custom',
  })
  // Use vite's connect instance as middleware
  app.use(vite.middlewares)

  app.use('*', async (req, res) => {
    // Since `appType` is `'custom'`, should serve response here.
    // Note: if `appType` is `'spa'` or `'mpa'`, Vite includes middlewares
    // to handle HTML requests and 404s so user middlewares should be added
    // before Vite's middlewares to take effect instead
  })
}

createServer()
```
## server.fs.strict [​](#server-fs-strict)

* **Type:** `boolean`
* **Default:** `true` (enabled by default since Vite 2.7)

Restrict serving files outside of workspace root.

## server.fs.allow [​](#server-fs-allow)

* **Type:** `string[]`

Restrict files that could be served via `/@fs/`. When `server.fs.strict` is set to `true`, accessing files outside this directory list that aren't imported from an allowed file will result in a 403.

Both directories and files can be provided.

Vite will search for the root of the potential workspace and use it as default. A valid workspace met the following conditions, otherwise will fall back to the [project root](/guide/#index-html-and-project-root).

* contains `workspaces` field in `package.json`
* contains one of the following file
  + `lerna.json`
  + `pnpm-workspace.yaml`

Accepts a path to specify the custom workspace root. Could be a absolute path or a path relative to [project root](/guide/#index-html-and-project-root). For example:

js
```
export default defineConfig({
  server: {
    fs: {
      // Allow serving files from one level up to the project root
      allow: ['..'],
    },
  },
})
```

When `server.fs.allow` is specified, the auto workspace root detection will be disabled. To extend the original behavior, a utility `searchForWorkspaceRoot` is exposed:

js
```
import { defineConfig, searchForWorkspaceRoot } from 'vite'

export default defineConfig({
  server: {
    fs: {
      allow: [
        // search up for workspace root
        searchForWorkspaceRoot(process.cwd()),
        // your custom rules
        '/path/to/custom/allow_directory',
        '/path/to/custom/allow_file.demo',
      ],
    },
  },
})
```
## server.fs.deny [​](#server-fs-deny)

* **Type:** `string[]`
* **Default:** `['.env', '.env.*', '*.{crt,pem}', '**/.git/**']`

Blocklist for sensitive files being restricted to be served by Vite dev server. This will have higher priority than [`server.fs.allow`](#server-fs-allow). [picomatch patterns](https://github.com/micromatch/picomatch#globbing-features) are supported.

## server.origin [​](#server-origin)

* **Type:** `string`

Defines the origin of the generated asset URLs during development.

js
```
export default defineConfig({
  server: {
    origin: 'http://127.0.0.1:8080',
  },
})
```
## server.sourcemapIgnoreList [​](#server-sourcemapignorelist)

* **Type:** `false | (sourcePath: string, sourcemapPath: string) => boolean`
* **Default:** `(sourcePath) => sourcePath.includes('node_modules')`

Whether or not to ignore source files in the server sourcemap, used to populate the [`x_google_ignoreList` source map extension](https://developer.chrome.com/articles/x-google-ignore-list/).

`server.sourcemapIgnoreList` is the equivalent of [`build.rollupOptions.output.sourcemapIgnoreList`](https://rollupjs.org/configuration-options/#output-sourcemapignorelist) for the dev server. A difference between the two config options is that the rollup function is called with a relative path for `sourcePath` while `server.sourcemapIgnoreList` is called with an absolute path. During dev, most modules have the map and the source in the same folder, so the relative path for `sourcePath` is the file name itself. In these cases, absolute paths makes it convenient to be used instead.

By default, it excludes all paths containing `node_modules`. You can pass `false` to disable this behavior, or, for full control, a function that takes the source path and sourcemap path and returns whether to ignore the source path.

js
```
export default defineConfig({
  server: {
    // This is the default value, and will add all files with node_modules
    // in their paths to the ignore list.
    sourcemapIgnoreList(sourcePath, sourcemapPath) {
      return sourcePath.includes('node_modules')
    },
  },
})
```

Note

[`server.sourcemapIgnoreList`](#server-sourcemapignorelist) and [`build.rollupOptions.output.sourcemapIgnoreList`](https://rollupjs.org/configuration-options/#output-sourcemapignorelist) need to be set independently. `server.sourcemapIgnoreList` is a server only config and doesn't get its default value from the defined rollup options.

 [Suggest changes to this page](https://github.com/vitejs/vite/edit/main/docs/config/server-options.md)Pager[Previous pageShared Options](/config/shared-options)[Next pageBuild Options](/config/build-options)

Released under the MIT License. (282496da)

Copyright © 2019-present VoidZero Inc. & Vite Contributors



=== Content from github.com_9f840075_20250114_224317.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvitejs%2Fvite%2Fsecurity%2Fadvisories%2FGHSA-c24v-8rfc-w8vw)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvitejs%2Fvite%2Fsecurity%2Fadvisories%2FGHSA-c24v-8rfc-w8vw)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=vitejs%2Fvite)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vitejs](/vitejs)
/
**[vite](/vitejs/vite)**
Public

* [Notifications](/login?return_to=%2Fvitejs%2Fvite) You must be signed in to change notification settings
* [Fork
  6.3k](/login?return_to=%2Fvitejs%2Fvite)
* [Star
   70k](/login?return_to=%2Fvitejs%2Fvite)

* [Code](/vitejs/vite)
* [Issues
  463](/vitejs/vite/issues)
* [Pull requests
  176](/vitejs/vite/pulls)
* [Discussions](/vitejs/vite/discussions)
* [Actions](/vitejs/vite/actions)
* [Projects
  1](/vitejs/vite/projects)
* [Security](/vitejs/vite/security)
* [Insights](/vitejs/vite/pulse)

Additional navigation options

* [Code](/vitejs/vite)
* [Issues](/vitejs/vite/issues)
* [Pull requests](/vitejs/vite/pulls)
* [Discussions](/vitejs/vite/discussions)
* [Actions](/vitejs/vite/actions)
* [Projects](/vitejs/vite/projects)
* [Security](/vitejs/vite/security)
* [Insights](/vitejs/vite/pulse)

# Vite dev server option `server.fs.deny` can be bypassed when hosted on case-insensitive filesystem

High

[patak-dev](/patak-dev)
published
GHSA-c24v-8rfc-w8vw
Jan 19, 2024

## Package

npm

vite
([npm](/advisories?query=ecosystem%3Anpm))

## Affected versions

>=2.7.0 <=2.9.16
>=3.0.0 <=3.2.7
>=4.0.0 <=4.5.1
>=5.0.0 <=5.0.11

## Patched versions

>=2.9.17 <3.0.0
>=3.2.8 <4.0.0
>=4.5.2 <5.0.0
>=5.0.12

## Description

### Summary

[Vite dev server option](https://vitejs.dev/config/server-options.html#server-fs-deny) `server.fs.deny` can be bypassed on case-insensitive file systems using case-augmented versions of filenames. Notably this affects servers hosted on Windows.

This bypass is similar to <https://nvd.nist.gov/vuln/detail/CVE-2023-34092> -- with surface area reduced to hosts having case-insensitive filesystems.

### Patches

Fixed in vite@5.0.12, vite@4.5.2, vite@3.2.8, vite@2.9.17

### Details

Since `picomatch` defaults to case-sensitive glob matching, but the file server doesn't discriminate; a blacklist bypass is possible.

See `picomatch` usage, where `nocase` is defaulted to `false`: <https://github.com/vitejs/vite/blob/v5.1.0-beta.1/packages/vite/src/node/server/index.ts#L632>

By requesting raw filesystem paths using augmented casing, the matcher derived from `config.server.fs.deny` fails to block access to sensitive files.

### PoC

**Setup**

1. Created vanilla Vite project using `npm create vite@latest` on a Standard Azure hosted Windows 10 instance.
   * `npm run dev -- --host 0.0.0.0`
   * Publicly accessible for the time being here: <http://20.12.242.81:5173/>
2. Created dummy secret files, e.g. `custom.secret` and `production.pem`
3. Populated `vite.config.js` with

```
export default { server: { fs: { deny: ['.env', '.env.*', '*.{crt,pem}', 'custom.secret'] } } }
```

**Reproduction**

1. `curl -s http://20.12.242.81:5173/@fs//`
   * Descriptive error page reveals absolute filesystem path to project root
2. `curl -s http://20.12.242.81:5173/@fs/C:/Users/darbonzo/Desktop/vite-project/vite.config.js`
   * Discoverable configuration file reveals locations of secrets
3. `curl -s http://20.12.242.81:5173/@fs/C:/Users/darbonzo/Desktop/vite-project/custom.sEcReT`
   * Secrets are directly accessible using case-augmented version of filename

**Proof**

[![Screenshot 2024-01-19 022736](https://user-images.githubusercontent.com/907968/298020728-3a8d3c06-fcfd-4009-9182-e842f66a6ea5.png)](https://user-images.githubusercontent.com/907968/298020728-3a8d3c06-fcfd-4009-9182-e842f66a6ea5.png)

### Impact

**Who**

* Users with exposed dev servers on environments with case-insensitive filesystems

**What**

* Files protected by `server.fs.deny` are both discoverable, and accessible

### Severity

High

7.5

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
None

User interaction
None

Scope
Unchanged

Confidentiality
High

Integrity
None

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:N/A:N

### CVE ID

CVE-2024-23331

### Weaknesses

[CWE-178](/advisories?query=cwe%3A178) [CWE-200](/advisories?query=cwe%3A200) [CWE-284](/advisories?query=cwe%3A284)

### Credits

* [![@dariushoule](https://avatars.githubusercontent.com/u/907968?s=40&v=4)](/dariushoule)
  [dariushoule](/dariushoule)
  Reporter

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_f9785c6c_20250114_224315.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvitejs%2Fvite%2Fcommit%2F91641c4da0a011d4c5352e88fc68389d4e1289a5)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvitejs%2Fvite%2Fcommit%2F91641c4da0a011d4c5352e88fc68389d4e1289a5)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=vitejs%2Fvite)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[vitejs](/vitejs)
/
**[vite](/vitejs/vite)**
Public

* [Notifications](/login?return_to=%2Fvitejs%2Fvite) You must be signed in to change notification settings
* [Fork
  6.3k](/login?return_to=%2Fvitejs%2Fvite)
* [Star
   70k](/login?return_to=%2Fvitejs%2Fvite)

* [Code](/vitejs/vite)
* [Issues
  463](/vitejs/vite/issues)
* [Pull requests
  176](/vitejs/vite/pulls)
* [Discussions](/vitejs/vite/discussions)
* [Actions](/vitejs/vite/actions)
* [Projects
  1](/vitejs/vite/projects)
* [Security](/vitejs/vite/security)
* [Insights](/vitejs/vite/pulse)

Additional navigation options

* [Code](/vitejs/vite)
* [Issues](/vitejs/vite/issues)
* [Pull requests](/vitejs/vite/pulls)
* [Discussions](/vitejs/vite/discussions)
* [Actions](/vitejs/vite/actions)
* [Projects](/vitejs/vite/projects)
* [Security](/vitejs/vite/security)
* [Insights](/vitejs/vite/pulse)

## Commit

[Permalink](/vitejs/vite/commit/91641c4da0a011d4c5352e88fc68389d4e1289a5)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

fix: fs deny for case insensitive systems ([#15653](https://github.com/vitejs/vite/pull/15653))

[Browse files](/vitejs/vite/tree/91641c4da0a011d4c5352e88fc68389d4e1289a5)
Browse the repository at this point in the history

* Loading branch information

[![@patak-dev](https://avatars.githubusercontent.com/u/583075?s=40&v=4)](/patak-dev)

[patak-dev](/vitejs/vite/commits?author=patak-dev "View all commits by patak-dev")
committed
Jan 19, 2024

1 parent
[ef89f80](/vitejs/vite/commit/ef89f8092f0eb1d8fd7d21256e6af8c4e64fe9b2)

commit 91641c4

 Show file tree

 Hide file tree

Showing
**4 changed files**
with
**33 additions**
and
**4 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* packages/vite/src/node/server

  + packages/vite/src/node/server/index.ts
    [index.ts](#diff-abb3345b6e3b2ec6d297c2ebc54cca85ae4487a31bac3cc9e78457f5114adb26)
* playground/fs-serve

  + \_\_tests\_\_

    - base

      * playground/fs-serve/\_\_tests\_\_/base/fs-serve-base.spec.ts
        [fs-serve-base.spec.ts](#diff-35572ce1553d5c069c9c1b7ace245ebfcda3f4c9e4ca10fd6363e8754efbd611)
    - playground/fs-serve/\_\_tests\_\_/fs-serve.spec.ts
      [fs-serve.spec.ts](#diff-10340becd8c598536405e6d3756e9be1938152aec68e6838cb8970b7ef3ea2aa)
  + root/src

    - playground/fs-serve/root/src/index.html
      [index.html](#diff-53afab1be2e9b658586c6c3398bffe6d6ce4850c69f946f7fe7e4efad00fb618)

## There are no files selected for viewing

5 changes: 4 additions & 1 deletion

5
[packages/vite/src/node/server/index.ts](#diff-abb3345b6e3b2ec6d297c2ebc54cca85ae4487a31bac3cc9e78457f5114adb26 "packages/vite/src/node/server/index.ts")

Show comments

[View file](/vitejs/vite/blob/91641c4da0a011d4c5352e88fc68389d4e1289a5/packages/vite/src/node/server/index.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -617,7 +617,10 @@ export async function \_createServer( |
|  |  | \_importGlobMap: new Map(), |
|  |  | \_forceOptimizeOnRestart: false, |
|  |  | \_pendingRequests: new Map(), |
|  |  | \_fsDenyGlob: picomatch(config.server.fs.deny, { matchBase: true }), |
|  |  | \_fsDenyGlob: picomatch(config.server.fs.deny, { |
|  |  | matchBase: true, |
|  |  | nocase: true, |
|  |  | }), |
|  |  | \_shortcutsOptions: undefined, |
|  |  | } |
|  |  |  |
| Expand Down | |  |

8 changes: 7 additions & 1 deletion

8
[playground/fs-serve/\_\_tests\_\_/base/fs-serve-base.spec.ts](#diff-35572ce1553d5c069c9c1b7ace245ebfcda3f4c9e4ca10fd6363e8754efbd611 "playground/fs-serve/__tests__/base/fs-serve-base.spec.ts")

Show comments

[View file](/vitejs/vite/blob/91641c4da0a011d4c5352e88fc68389d4e1289a5/playground/fs-serve/__tests__/base/fs-serve-base.spec.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -92,7 +92,13 @@ describe.runIf(isServe)('main', () => { |
|  |  | }) |
|  |  |  |
|  |  | test('denied', async () => { |
|  |  | expect(await page.textContent('.unsafe-dotenv')).toBe('404') |
|  |  | expect(await page.textContent('.unsafe-dotenv')).toBe('403') |
|  |  | }) |
|  |  |  |
|  |  | test('denied EnV casing', async () => { |
|  |  | // It is 403 in case insensitive system, 404 in others |
|  |  | const code = await page.textContent('.unsafe-dotEnV-casing') |
|  |  | expect(code === '403' || code === '404').toBeTruthy() |
|  |  | }) |
|  |  | }) |
|  |  |  |
| Expand Down | |  |

8 changes: 7 additions & 1 deletion

8
[playground/fs-serve/\_\_tests\_\_/fs-serve.spec.ts](#diff-10340becd8c598536405e6d3756e9be1938152aec68e6838cb8970b7ef3ea2aa "playground/fs-serve/__tests__/fs-serve.spec.ts")

Show comments

[View file](/vitejs/vite/blob/91641c4da0a011d4c5352e88fc68389d4e1289a5/playground/fs-serve/__tests__/fs-serve.spec.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -92,7 +92,13 @@ describe.runIf(isServe)('main', () => { |
|  |  | }) |
|  |  |  |
|  |  | test('denied', async () => { |
|  |  | expect(await page.textContent('.unsafe-dotenv')).toBe('404') |
|  |  | expect(await page.textContent('.unsafe-dotenv')).toBe('403') |
|  |  | }) |
|  |  |  |
|  |  | test('denied EnV casing', async () => { |
|  |  | // It is 403 in case insensitive system, 404 in others |
|  |  | const code = await page.textContent('.unsafe-dotEnV-casing') |
|  |  | expect(code === '403' || code === '404').toBeTruthy() |
|  |  | }) |
|  |  | }) |
|  |  |  |
| Expand Down | |  |

16 changes: 15 additions & 1 deletion

16
[playground/fs-serve/root/src/index.html](#diff-53afab1be2e9b658586c6c3398bffe6d6ce4850c69f946f7fe7e4efad00fb618 "playground/fs-serve/root/src/index.html")

Show comments

[View file](/vitejs/vite/blob/91641c4da0a011d4c5352e88fc68389d4e1289a5/playground/fs-serve/root/src/index.html)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -45,6 +45,7 @@ <h2>Nested Entry</h2> |
|  |  |  |
|  |  | <h2>Denied</h2> |
|  |  | <pre class="unsafe-dotenv"></pre> |
|  |  | <pre class="unsafe-dotEnV-casing"></pre> |
|  |  |  |
|  |  | <script type="module"> |
|  |  | import '../../entry' |
| Expand Down  Expand Up | | @@ -236,14 +237,27 @@ <h2>Denied</h2> |
|  |  | }) |
|  |  |  |
|  |  | // .env, denied by default |
|  |  | fetch(joinUrlSegments(base, joinUrlSegments('/@fs/', ROOT) + '/root/.env')) |
|  |  | fetch( |
|  |  | joinUrlSegments(base, joinUrlSegments('/@fs/', ROOT) + '/root/src/.env'), |
|  |  | ) |
|  |  | .then((r) => { |
|  |  | text('.unsafe-dotenv', r.status) |
|  |  | }) |
|  |  | .catch((e) => { |
|  |  | console.error(e) |
|  |  | }) |
|  |  |  |
|  |  | // .env, for case insensitive file systems |
|  |  | fetch( |
|  |  | joinUrlSegments(base, joinUrlSegments('/@fs/', ROOT) + '/root/src/.EnV'), |
|  |  | ) |
|  |  | .then((r) => { |
|  |  | text('.unsafe-dotEnV-casing', r.status) |
|  |  | }) |
|  |  | .catch((e) => { |
|  |  | console.error(e) |
|  |  | }) |
|  |  |  |
|  |  | function text(sel, text) { |
|  |  | document.querySelector(sel).textContent = text |
|  |  | } |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `91641c4`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fvitejs%2Fvite%2Fcommit%2F91641c4da0a011d4c5352e88fc68389d4e1289a5) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


