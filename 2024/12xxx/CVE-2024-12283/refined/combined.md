=== Content from www.wordfence.com_736f4e00_20250114_193242.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# WP Pipes <= 1.4.1 - Reflected Cross-Site Scripting via x1 Parameter

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel) ¬†¬†>¬†¬†  [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities) ¬†¬†>¬†¬† WP Pipes <= 1.4.1 - Reflected Cross-Site Scripting via x1 Parameter

6.1

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-12283](https://www.cve.org/CVERecord?id=CVE-2024-12283) |
| --- | --- |
| CVSS | 6.1 (Medium) |
| Publicly Published | December 10, 2024 |
| Last Updated | December 11, 2024 |
| Researcher | [vgo0](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/dale-mavers) |

### Description

The WP Pipes plugin for WordPress is vulnerable to Reflected Cross-Site Scripting via the ‚Äòx1‚Äô parameter in all versions up to, and including, 1.4.1 due to insufficient input sanitization and output escaping. This makes it possible for unauthenticated attackers to inject arbitrary web scripts in pages that execute if they can successfully trick a user into performing an action such as clicking on a link.

#### References

* [wordpress.org](https://wordpress.org/plugins/wp-pipes/#developers)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3204551/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwp-pipes%2Fwp-pipes-141-reflected-cross-site-scripting-via-x1-parameter&t=WP%20Pipes%20%3C%3D%201.4.1%20-%20Reflected%20Cross-Site%20Scripting%20via%20x1%20Parameter "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwp-pipes%2Fwp-pipes-141-reflected-cross-site-scripting-via-x1-parameter&text=WP%20Pipes%20%3C%3D%201.4.1%20-%20Reflected%20Cross-Site%20Scripting%20via%20x1%20Parameter "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwp-pipes%2Fwp-pipes-141-reflected-cross-site-scripting-via-x1-parameter "LinkedIn")
Email

## Vulnerability Details for WP Pipes

#### [WP Pipes](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/wp-pipes)

| Software Type | Plugin |
| --- | --- |
| Software Slug | wp-pipes [(view on wordpress.org)](https://wordpress.org/plugins/wp-pipes) |
| Patched? | Yes |
| Remediation | Update to version 1.4.2, or a newer patched version |
| Affected Version | * <= 1.4.1 |
| Patched Version | * 1.4.2 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE¬Æ). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from wordpress.org_f2696f9b_20250114_193241.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ‚ÜóÔ∏é](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ‚ÜóÔ∏é](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ‚ÜóÔ∏é](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ‚ÜóÔ∏é](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

WP Pipes

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fwp-pipes&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fwp-pipes&locale=en_US)

Search plugins

![](https://ps.w.org/wp-pipes/assets/banner-772x250.png?rev=1315487)
![](https://ps.w.org/wp-pipes/assets/icon-256x256.png?rev=1315487)
# WP Pipes

By [ThimPress](http://thimpress.com)

[Download](https://downloads.wordpress.org/plugin/wp-pipes.zip)

* [Details](https://wordpress.org/plugins/wp-pipes/#description)
* [Reviews](https://wordpress.org/plugins/wp-pipes/#reviews)
* [Installation](https://wordpress.org/plugins/wp-pipes/#installation)
* [Development](https://wordpress.org/plugins/wp-pipes/#developers)

[Support](https://wordpress.org/support/plugin/wp-pipes/)

## Description

Yahoo Pipes & Zapier are powerful online services for making pipeline of data, [WP Pipes](http://thimpress.com/pipes "WP Pipes plugin") by [ThimPress](http://thimpress.com "WordPress Plugins & Themes for lazy people") comes available to the WordPress community to bring such of powerful abilities to WordPress site, works right inside your WordPress site.

You can create many Pipes, give your Pipes input and get output as your needs.

### WordPress Data Migration

Powerful Data Migration WordPress plugin: CSV importing for Posts/WooCommerce, RSS Feed Creator, AutoBlogging, auto post to Twitter/Facebook/LinkedIn.

### WordPress Content Curation

Curated Content is still safe with SEO, and this content curation plugin for WordPress works perfectly to create curated content from RSS Feed, Google News or any other sources.

> **Are you looking for a great news WordPress theme?**
>
> You found it! Mag WP is an amazing magazine WordPress theme for a blog, news, newspaper, magazine, publishing industry and reviews website.
>
> [Read more](https://themeforest.net/item/magazine-wordpress-theme-mag-wp/19305239?utm_source=wporg&utm_medium=pipes&ref=thimpress&utm_campaign=magwp) | [View MagWP Demo](https://magwp.thimpress.com)

### News and Magazine WordPress Themes

As you are using WP Pipes, most of the time you will use it for a newspaper or magazine website. Take a look at MagWP, **the only Magazine WordPress theme** we developed to work perfectly with Pipes and to publish content professionally on the web.

It has many functions and demos which looks **90% similar to great newspapers like Nytimes, Bloomberg, Lifehack, Pinterest, etc**.

#### Here are things you can do with WP Pipes (just like Yahoo Pipes):

* **RSS Feed to post**: a powerful RSS Feed to Post solution, get newsfeed from RSS Feed source and store into your WordPress as posts.
* **RSS Feed Creator**: getting Posts from WordPress Posts > Export as RSS Feed.
* **iTunes Podcast creator**: get Posts from WordPress Posts > Export as iTunes Podcast,
* **Google XML Sitemap generator**: get Posts from WordPress Posts > Export as Google XML Sitemap
* **WooCommerce RSS Feed creator**: get WooCommerce Products > Export as RSS Feed or Google XML Sitemap
* **CSV Importer for WooCommerce**: upload CSV files and import to WooCommerce.
* **Auto Social Poster**: post from Posts, WooCommerce Products, bbPress topics / comments to Twitter, Facebook, LinkedIn, Google+ Moments, Pinterest, Vkontakle, ‚Ä¶

  ‚Ä¶ It‚Äôs your plugin, freebie, we provide you a tools to make pipelines, just like Yahoo Pipes, do what ever you needs. This Yahoo Pipes style plugin will empower the WordPress CMS to a new high.

#### FEATURES

* Requires PHP 5.3 or higher with JSON, cURL to work properly.
* Create unlimited pipes.
* Each Pipe will start by a SOURCE and finish by a DESTINATION.
* There is PROCESSOR between SOURCE and DESTINATION to process your Pipe.
* Builtin SOURCE: RSS, Post
* Builtin DESTINATION: Post, RSS, Sitemap
* Extra SOURCEs and DESTINATIONs will come up later.
* There are number of PROCESSORS: slug, text cutter, keywords filter, metadata
* Unlimited usage, there is no FREE or PRO version.
* Smart schedule to execute pipes using cronjob.

#### AVAILABLE SOURCES (more will come up later):

* RSS Reader: to read RSS Feed, to offer RSS Feed to Post functionality.
* Post: to read Posts from WordPress.
* [CSV: to read CSV files](http://thimpress.com/shop/csv-source-pipes/ "WordPress plugin import from CSV").
* Email: to read mailbox.
* WooCommerce: to deal with WooCommerce products (coming soon)
* bbPress: to deal with bbPress topics (coming soon)
* Facebook (coming soon)
* WordPress.com: using oauth to connect to your blogs on wordpress.com.
* WordPress: deal with xmlrpc from WordPress (hosted or wordpress.com) (coming soon)

#### AVAILABLE DESTINATIONS (more will come up later):

* RSS Creator: to create RSS Feed for WordPress.
* Post: to create Posts for WordPress. Can works with RSSReader source to offer RSS Feed to post functionality.
* WooCommerce: to create products in WooCommerce plugin.
* [WordPress.com: to create post on WordPress.com blog](http://thimpress.com/shop/wordpress-com-destination-pipes/ "WordPress plugin auto post to WordPress.com").
* [Blogger: to create blog post on Blogger](http://thimpress.com/shop/blogger-blogspot-destination-for-pipes/ "WordPress plugin Auto post to Blogger / Blogspot").
* bbPress: to create topics in bbPress plugin. (coming soon)
* Email: to send a new email to a mailbox. (coming soon)
* [Twitter: to create Twitter tweets](http://thimpress.com/shop/twitter-destination-pipes/ "WordPress plugin Auto post to Twitter").
* Facebook: to create message on Facebook personal wall. (coming soon)
* Facebook Page: to create message on Facebook Page. (coming soon)
* Facebook Group: to create message on Facebook Group. (coming soon)
* LinkedIn: to create message on LinkedIn personal wall. (coming soon)
* LinkedIn Group: to create message on LinkedIn Group wall. (coming soon)
* LinkedIn Company: to create message on LinkedIn Company wall. (coming soon)
* Vkontakle: to create message on Vkontakle (VK). (coming soon)
* Google Plus (Google+ or G+): to create message on Google+ / G+ / Google Plus. (comming soon)

#### AVAILABLE PROCESSORS (more will come up later):

* Alias: create slug from text/title/subject.
* Combine: combine fields together into one output field using shortcode. (new)
* Duplicate: check and prevent duplicate data items from source, recommend to use right after alias.
* Cut Introtext: cutting text into two parts.
* Get Fulltext: getting fulltext from a link.
* Get Images: get images from a link or html.
* Keywords Filter: filter by keywords with AND, OR and NOT operators.
* Strip Tags: strip html tags out of input html or text.
* Change Time: adjust date/time.

#### ROADMAP

* Writing more Source Addons: WooCommerce Products, Easy Digital Downloads, bbPress; will add ability to WP Pipes to create RSS Feed for WooCommerce, Easy Digital Downloads or bbPress.
* Writing more Destination Addons: Google Drive (to store document as Google Drive Docs),iTunes Podcast (to generate iTunes Podcast), Google XML Sitemap (to generate Google XML Sitemap).
* Custom schedule for each Pipe instead of the whole Pipes.
* Adding Pre-made / Template Fields Matching sets.

> If you are looking for a [WordPress LMS](https://wordpress.org/plugins/learnpress/ "WordPress LMS"), check out our [WordPress LMS Plugin](https://wordpress.org/plugins/learnpress/ "WordPress LMS Plugin").

## Screenshots

* [![](https://ps.w.org/wp-pipes/assets/screenshot-1.png?rev=857592)](https://ps.w.org/wp-pipes/assets/screenshot-1.png?rev=857592)

  All Pipes: list of all created Pipes.
* [![](https://ps.w.org/wp-pipes/assets/screenshot-2.png?rev=857592)](https://ps.w.org/wp-pipes/assets/screenshot-2.png?rev=857592)

  Add New Pipe: create a data pipeline from SOURCE to DESTINATION
* [![](https://ps.w.org/wp-pipes/assets/screenshot-3.png?rev=857592)](https://ps.w.org/wp-pipes/assets/screenshot-3.png?rev=857592)

  Addons: empower WP Pipes by adding more SOURCES, DESTINATIONS.
* [![](https://ps.w.org/wp-pipes/assets/screenshot-4.png?rev=857592)](https://ps.w.org/wp-pipes/assets/screenshot-4.png?rev=857592)

  Settings: where to configure cronjob.

## Installation

This section describes how to install the plugin and get it working.

1. Upload `wp-pipes` to the `/wp-content/plugins/` directory
2. Activate the plugin through the ‚ÄòPlugins‚Äô menu in WordPress
3. A new menu item ‚ÄúPipes‚Äù created right after Posts on the admin sidebar.

## FAQ

### Is there any limitation when using the WP Pipes plugin?

NO, there is no limitation when using WP Pipes plugin. It‚Äôs GNU/GPL, you can download & use it for free forever.

### What is a Pipe?

Let‚Äôs imagine it as a pipeline of data from one place (Source) to another place (Destination).

One Pipe will start with a Source.

On the way of each Pipe, it can pass over some or many Processors to transform its format to suit the Destination.

At the end, it will stop at a Destination.

### What is a WP Pipes Source?

Pipe Source is where your Pipe begins. It can be: Posts, Pages, WooCommerce Products, RSS Feeds, Files/Folders,‚Ä¶ the sky is unlimited üôÇ

### What is a WP Pipes Destination?

Pipe Destination is the end of your Pipes. It can be: RSS Feeds, Google XML Sitemap, Files/Folders, WooCommerce Products, Posts,‚Ä¶ once again, the sky is unlimited üôÇ

### What is a WP Pipes Processor?

Pipe Processor is for doing some processes to get more fields for the Destination Input.

Pipe Processor will process some input fields (depends on Processor) and provide some output fields. After that, you can use those output fields for the Destination Input.

## Reviews

![](https://secure.gravatar.com/avatar/021c9b25c0b1122427861930c935bcf670a784f944a457a8ef4cbcc6a9c82a9e?s=60&d=retro&r=g)
### [Not working with 6.2.2 üôÅ](https://wordpress.org/support/topic/not-working-with-6-2-2/)

[brenning](https://profiles.wordpress.org/brenning/ "Posts by brenning")
June 20, 2023

Not working with WP 6.2.2. Throws a critical error when you click anything on the plugin menu. All the pre-requisites check out fine

![](https://secure.gravatar.com/avatar/48539aa9f7510c42836b92a99468e78f52d272b94366f6f92cecaf2a023e0138?s=60&d=retro&r=g)
### [Great Plugin](https://wordpress.org/support/topic/fix-feature-when-choose-source/)

[tunguyentrong](https://profiles.wordpress.org/tunguyentrong/ "Posts by tunguyentrong")
April 9, 2020

The plugin is very simple but useful

![](https://secure.gravatar.com/avatar/b1c356c12bc350820e6d1966b19c229d48f4e4174b8bf65c933a720e4c1cb849?s=60&d=retro&r=g)
### [BEWARE: Deactivation deletes data](https://wordpress.org/support/topic/robust-code-solid-support/)

[Herky Fishbine](https://profiles.wordpress.org/herky-fishbine/ "Posts by Herky Fishbine")
September 16, 2018

UPDATE:
This is a nice plugin, but it has a serious flaw. Deactivating will remove all of the plugin‚Äôs data, including feeds.
Deactivation is a common practice, often used to troubleshoot plugin conflicts. Other plugins retain data when deactivated and data is available again when plugin is reactivated. Not this one. Data is wiped with deactivation.
Data should be removed when the plugin is ‚Äúremoved‚Äù not when it is deactivated.
Because the potential to lose data through the deactivation process, the plugin now gets 2 stars.
The Plugin
This plugin is a little complicated but it works well. Instructions are written in English but not always very clear English; however, if you spend a little time with it, you will discover its variety of good features.
Addon
I purchased an addon at a reasonable price and with no payment problems through Paypal, but it installed itself with an improper directory name, which was annoying and required some troubleshooting all of which should have been avoided by some attention to detail by the developer. All in all, though, that was not typical of my experience with the rest of the programming which is robust and solid.
Support
The naming issue and some other questions required me to seek support, which is provided via a forum on the developer‚Äôs website. We live on opposite sides of the world, literally, so our opportunities to communicate simultaneously during waking hours were very limited, this caused some delays, but the developer was tenacious, polite and thorough in addressing my issues and, within a few days, they were resolved. I allowed the developer administrator access to my site as he requested for troubleshooting and he proved himself trustworthy and responsible in using it.

![](https://secure.gravatar.com/avatar/843f5325e1010cbdc2d37e5d02f29d613d1e6c8f9b0231cf773ce7eece88056c?s=60&d=retro&r=g)
### [Best plugin for crawl](https://wordpress.org/support/topic/best-plugin-for-crawl/)

[Vy Le](https://profiles.wordpress.org/tienvy/ "Posts by Vy Le")
August 11, 2018

Best plugin for crawl !

![](https://secure.gravatar.com/avatar/991756cfe95d1d44b99da8e09b783211cfa580134fd6578eae7eb10582097ff5?s=60&d=retro&r=g)
### [Best Plugin ever](https://wordpress.org/support/topic/best-plugin-ever-211/)

[queeneve](https://profiles.wordpress.org/queeneve/ "Posts by queeneve")
December 29, 2017

It is really a great plugin, it helped me to grab posts from my customers facebook pages and posted on my website which made them happy to announce their news on our website
Thanks wp pipe for the great options

![](https://secure.gravatar.com/avatar/38d4e0c7ee05c1f046671c1d8b533a570339047e2b0bfe01b3f0da19f7d63091?s=60&d=retro&r=g)
### [Missing tag on destination](https://wordpress.org/support/topic/missing-tag-on-destination/)

[mytourvn](https://profiles.wordpress.org/mytourvn/ "Posts by mytourvn")
September 4, 2017
2 replies

After update plugin. My exist pipes got broken. Missing tag on destination. Do you want split to another addon? LOL

[Read all 37 reviews](https://wordpress.org/support/plugin/wp-pipes/reviews/)
## Contributors & Developers

‚ÄúWP Pipes‚Äù is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/aba15b750bc077adbb112f70b5dd109c57d36962cb2438280339c2ad4b49f342?s=32&d=mm&r=g) [ThimPress](https://profiles.wordpress.org/thimpress/)
* ![](https://secure.gravatar.com/avatar/f7eef1200c6a048755679a1e1df21ee92d353e160e1bd58522e7f5f20318abe9?s=32&d=mm&r=g) [Thong Tran](https://profiles.wordpress.org/thongta/)
* ![](https://secure.gravatar.com/avatar/f8879378fb2d5e55b39add8409ad7c2196a3269d35d9e824397191f64b96e79e?s=32&d=mm&r=g) [Tung Pham](https://profiles.wordpress.org/phamtungpth/)
* ![](https://secure.gravatar.com/avatar/2c00c6928f43f041d0fff4d71bdb7a0c230d533885de9d52287f8b56cc2e4d39?s=32&d=mm&r=g) [Tu Nguyen](https://profiles.wordpress.org/tunnhn/)

[Translate ‚ÄúWP Pipes‚Äù into your language.](https://translate.wordpress.org/projects/wp-plugins/wp-pipes)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/wp-pipes/), check out the [SVN repository](https://plugins.svn.wordpress.org/wp-pipes/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/wp-pipes/) by [RSS](https://plugins.trac.wordpress.org/log/wp-pipes/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### 1.4.2

~ Fixed: security.

#### 1.4.1

* Fixed: security CSRF.

#### 1.4.0

* Fixed: security sql inject.

#### 1.33

* Added hook to allow putting more configs of Post Destination with other plugins.
* Added hook to allow triggering before the processing of Post Destination.

#### 1.32

* Fix: the conflict issue with several other translate plugins.
* Fix: bug when using both Get Fulltext processor and HTML Parser processor within PHP7+.

#### 1.31

* Improve: added more option in RSSReader Source to define the separate character for output data of [so] category field.
* Fix: can not export single pipe in Edit page.

#### 1.30

* Improve: added more output field in RSSReader Source.
* Improve: not create file on server when export pipes files.
* Fix: actions in Bulk Actions not work.

#### 1.29

* Improve: added more method to read data from original images before download.
* Improve: used security code of wordpress with input and output data.
* Fix: avoid storing image file with invalid extension type.

#### 1.28

* Fix: bug when delete pipes ‚Äì the related cache files were not deleted.
* Fix: bug with installing WPPipes ‚Äì $collation was not declared.
* Improve: Possible to add date field into RSS feeds with RSS Source add-on.

#### 1.27

* Fix: bug with GMT datetime issue which causes the posts come to schedule when importing posts by Post Destination add-on.
* Change: update new description about MagWP theme.

#### 1.26

* Fix: bug with Combine processor for working on PHP7+.
* Fix: Remove Deprecated bugs in library of RSS Destination add-on.
* Improve: Add new option in Get Image processor to force only downloading files which have mime as image.

#### 1.25

* Improve: Add new button in Settings page to restore the configurations of WPPipes to default value.
* Improve: Add new button in All Pipes page to create tables in case they are missing after installing.
* Change: Provide more info about our other products.

#### 1.24

* Fix: work more properly with PHP7.
* Fix: corrected links in back end of WPPipes.
* Improve: add new button in Settings page to delete Cache folder.
* Improve: add new input field in Post Destination, WPPipes could create new categories automatically.

#### 1.23

* Fix: changed name of my\_enqueue function for avoiding the conflict with other plugins.
* Fix: put an example pipe into the root folder of WPPipes plugin. Users could call it via Import Sample Pipe button.
* Fix: could work on PHP7.
* Change: add buttons for displaying the output value of the first grabbed item with Source and Processors.
* Improve: add new option in Post Destination add-on for forcing the pipe runs in Update mode even via cronjob.
* Improve: Post Destination add-on could check if the image is featured and attached or not.
* Improve: Post Source add-on allows users choosing multiple authors.

#### 1.22

* Fix: solved bug lost input, output params of getFullText processor.
* Fix: Check and use current using collation of database when installing new WP Pipes.
* Change: add new layout for addons manager page.
* Improve: Added [so] content which contains data of elements from RSS feeds with RSSReader Source.

#### 1.21

* Change: Parser Code function in Get Fulltext processor is disabled by default. To activate Parser Code function again you need install and acivate WP Pipes Addon HTML Parser Processor.
* Fix: solved deprecated issue with iconv function in high version php.
* Fix: solved bug when checking duplication with Post Destination.
* Fix: solved the issue can not set feature image in Post Destination although the Get Image processor pulled images successfully into the server.
* Fix: solved the issue which relates to slashes characters in Combine processor.
* Improve: WPPipes can work interact with Amazon.

#### 1.20

* Fix: solved issue ‚ÄúParse error: syntax error, unexpected T\_PAAMAYIM\_NEKUDOTAYIM in /wp-content/plugins/wp-pipes/grab.php on line 163‚Äù

  which appears with some version of PHP.

#### 1.19

* New: added filter options ‚Äúminimum words‚Äù and ‚Äúmaximum words‚Äù in Get Fulltext processor
* New: added more input field of Get Image processor, could get images from enclosures
* Fix: get free position of menu only after Post menu
* New: add 1 more method of using curl in both common file and psc file of Get Fulltext processor.
* New: add 1 more option allow choosing use cache or not when running cronjob

#### 1.18

* New: checked free position of menu before activating
* New: added 1 more case for Keyword Filter processor: the keywords are Latin
* New: added option in Post Destination allow using custom fields or not
* New: added sort by date with RSSReader source

#### 1.17

* Fix: Fixed some minor bugs in Get Fulltext, Get Image processor.
* Fix: Removed some unnecessary Joomla code
* Fix: Checked duplicate custom fields when creating the inputs of Post Destination.
* New: Use other way in using curl\_level3 instead of the old way.
* New: Added 1 option allow choosing stop processing item without images or not

#### 1.16

* Fix: Fixed notice, minor bug.
* Fix: Clear HTML comment.
* Fix: Clear tag and parse code cho hr, link, br, img, meta, input.
* Fix: Get image Processor.
* New: Use other way in using curl instead of the old way.
* New: Set input as the current time if leave blank in Change Time processor.

#### 1.15

* Fix: Repaired get full title with rssreader source.
* Fix: Fixed bugs: pipes not run when turn off debug mode.
* Fix: active and cron active in setting
* New: Able to set separate schedule for each pipe.
* New: Added quick\_edit mode for pipes.
* New: Check writable permission of ‚Äúcache‚Äù folder and ‚Äúupload‚Äù folder.
* Improve: Possible to remove unnecessary templates.

#### 1.14

* Fix: Repaired write cache function in rssreader source.
* Fix: Fixed errors when click Test this pipe button. It was caused by define.
* Fix: Fixed bug when save image from redirect urls to server.
* Fix: Not use cache in cronjob.
* New: Able to set a Pipe as a Pipe template. Can be loaded later conveniently.
* New: Added one requirement: turn on allow\_url\_fopen.
* New: Auto fix html input data for Blogger Destination.
* New: Saving the export pipe as a template; in edit view, could load that template.
* Improve: Moved the templates folder to uploads > wppipes.
* Improve: Rewrote ajax in post.js.
* Improve: Added User Agent input for get fulltext processor.

#### 1.13

* New: Added line number to the Parser Code area in the Get Fulltext processor.
* Improve: Pipes core tweaks to allow redirection to Pipes plugin after activating a Pipes add-ons plugin.

#### 1.12

* Fix: Fixed minor bugs.
* Improve: Improved Pipes UI/UX.

#### 1.11

* New: Added drag & drop feature for fields matching area.
* Improve: Improved fields matching UI/UX.
* Improve: Improved Get Fulltext processor UX.
* Improve: Improved Import feature UX.

#### 1.10

* Fix: Emergency fix for wrong condition to get addons (sources, engines and processors) for Pipes.

#### 1.9

* Improve: Moved extra addons to WordPress plugin structure, keepin the core addons at the current place.
* New: Added Test button to HTML Parser feature inside Get Fulltext processor.
* New: Added ‚ÄúDisplay the first output from Source to Source Output and Processors Output Fields‚Äù.
* Improve: Removed description from Processors drop down list.

#### 1.8

* Improve: Updated condition to check type of output data in default-item file.

#### 1.7

* Fix: Fixed missing slug processor.
* Fix: Fixed missing combine processor.
* Fix: Fixed minor issues with UI/UX.

#### 1.6

* Fix: Fixed error with Import feature.
* Improve: Set ‚Äúexcerpt‚Äù as default view mode for the Pipes listing.

#### 1.5

* Improve: Improved slug processor.
* Improve: Cleaned source code.
* Improve: Added combine processor to combine fields together.
* New: Added sample source output for rssreader source.
* Msg: WordPress.com & Blogger destination addons will come up to public soon in the next release.

#### 1.4

* New: Added Import/Export feature in the ‚ÄúAll Pipes‚Äù page.
* New: Added Export feature in the ‚ÄúAdd/Edit Pipe‚Äù page as a sub-menu of Save button.
* New: Added Help box in the ‚ÄúAll Pipes‚Äù page.
* New: Added ‚ÄúWelcome‚Äù box in the ‚ÄúAll Pipes‚Äù page as the Guideline for the first time usage.

#### 1.3

* Fix: Fixed error when choose only 1 category in Post destination.
* Fix: Only display pipes with both source and destination selected.
* Fix: Added missing jQuery in cronjob pages.

#### 1.2

* Improve: Improved PHP code to work with PHP 5.3. It used to requires PHP 5.4 or higher.
* New: Allowed user to choose the number of pipes to be displayed on the Pipes Listing.
* Fix: Fixed minor bugs on Pipe form.
* Improve: Improved RSS Creator Destination addon.

#### 1.1

* Fix: Fixed RSS Destination to force create RSS in any file extension.

#### 1.0

* New: The first version

## Meta

* Version **1.4.2**
* Last updated **1 month ago**
* Active installations **700+**
* WordPress version **5.8 or higher**
* Tested up to **6.7.1**
* PHP version **7.4 or higher**
* Tags [auto post](https://wordpress.org/plugins/tags/auto-post/)[rss](https://wordpress.org/plugins/tags/rss/)[syndicate](https://wordpress.org/plugins/tags/syndicate/)[syndication](https://wordpress.org/plugins/tags/syndication/)
* [Advanced View](https://wordpress.org/plugins/wp-pipes/advanced/)

## Ratings

4.3 out of 5 stars.

* [29 5-star reviews
  5 stars

  29](https://wordpress.org/support/plugin/wp-pipes/reviews/?filter=5)
* [0 4-star reviews
  4 stars

  0](https://wordpress.org/support/plugin/wp-pipes/reviews/?filter=4)
* [3 3-star reviews
  3 stars

  3](https://wordpress.org/support/plugin/wp-pipes/reviews/?filter=3)
* [1 2-star review
  2 stars

  1](https://wordpress.org/support/plugin/wp-pipes/reviews/?filter=2)
* [4 1-star reviews
  1 star

  4](https://wordpress.org/support/plugin/wp-pipes/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/wp-pipes/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/wp-pipes/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/aba15b750bc077adbb112f70b5dd109c57d36962cb2438280339c2ad4b49f342?s=32&d=mm&r=g) [ThimPress](https://profiles.wordpress.org/thimpress/)
* ![](https://secure.gravatar.com/avatar/f7eef1200c6a048755679a1e1df21ee92d353e160e1bd58522e7f5f20318abe9?s=32&d=mm&r=g) [Thong Tran](https://profiles.wordpress.org/thongta/)
* ![](https://secure.gravatar.com/avatar/f8879378fb2d5e55b39add8409ad7c2196a3269d35d9e824397191f64b96e79e?s=32&d=mm&r=g) [Tung Pham](https://profiles.wordpress.org/phamtungpth/)
* ![](https://secure.gravatar.com/avatar/2c00c6928f43f041d0fff4d71bdb7a0c230d533885de9d52287f8b56cc2e4d39?s=32&d=mm&r=g) [Tu Nguyen](https://profiles.wordpress.org/tunnhn/)
## Support

Got something to say? Need help?

[View support forum](https://wordpress.org/support/plugin/wp-pipes/)

## Donate

Would you like to support the advancement of this plugin?

[Donate to this plugin](http://thimpress.com/)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ‚Üó](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ‚Üó](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ‚Üó](https://wordpress.com/?ref=wporg-footer)
* [Matt ‚Üó](https://ma.tt/)
* [bbPress ‚Üó](https://bbpress.org/)
* [BuddyPress ‚Üó](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_67585240_20250114_193239.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ‚ÜóÔ∏é](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ‚ÜóÔ∏é](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ‚ÜóÔ∏é](https://central.wordcamp.org/)
  + [Meetups ‚ÜóÔ∏é](https://www.meetup.com/pro/wordpress/)
  + [Job Board ‚ÜóÔ∏é](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ‚ÜóÔ∏é](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ‚ÜóÔ∏é](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3204551)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ‚Üê [Previous Changeset](/changeset/3204550 "Changeset 3204550")
* [Next Changeset](/changeset/3204552 "Changeset 3204552") ‚Üí

---

# Changeset 3204551

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
12/09/2024 02:45:55 AM
([5 weeks](/timeline?from=2024-12-09T02%3A45%3A55Z&precision=second "See timeline at 12/09/2024 02:45:55 AM") ago)

Author:
ThimPress
Message:

~ Release 1.4.2

Location:
[wp-pipes/trunk](/browser/wp-pipes/trunk?rev=3204551)
Files:

26 edited

* [assets/js/process.js](/browser/wp-pipes/trunk/assets/js/process.js?rev=3204551 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [controllers/pipe.php](/browser/wp-pipes/trunk/controllers/pipe.php?rev=3204551 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [controllers/pipes.php](/browser/wp-pipes/trunk/controllers/pipes.php?rev=3204551 "Show entry in browser")
  (modified)
  ([7 diffs](#file2 "Show differences"))
* [controllers/plugins.php](/browser/wp-pipes/trunk/controllers/plugins.php?rev=3204551 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [controllers/settings.php](/browser/wp-pipes/trunk/controllers/settings.php?rev=3204551 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [cronjob.php](/browser/wp-pipes/trunk/cronjob.php?rev=3204551 "Show entry in browser")
  (modified)
  ([4 diffs](#file5 "Show differences"))
* [grab.php](/browser/wp-pipes/trunk/grab.php?rev=3204551 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [includes/client/ftp.php](/browser/wp-pipes/trunk/includes/client/ftp.php?rev=3204551 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [includes/filesystem/path.php](/browser/wp-pipes/trunk/includes/filesystem/path.php?rev=3204551 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [includes/phputf8/ord.php](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=3204551 "Show entry in browser")
  (modified)
  ([7 diffs](#file9 "Show differences"))
* [includes/phputf8/utf8.php](/browser/wp-pipes/trunk/includes/phputf8/utf8.php?rev=3204551 "Show entry in browser")
  (modified)
  ([1 diff](#file10 "Show differences"))
* [includes/phputf8/utils/bad.php](/browser/wp-pipes/trunk/includes/phputf8/utils/bad.php?rev=3204551 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [includes/phputf8/utils/unicode.php](/browser/wp-pipes/trunk/includes/phputf8/utils/unicode.php?rev=3204551 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [includes/phputf8/utils/validation.php](/browser/wp-pipes/trunk/includes/phputf8/utils/validation.php?rev=3204551 "Show entry in browser")
  (modified)
  ([1 diff](#file13 "Show differences"))
* [includes/registry/format/ini.php](/browser/wp-pipes/trunk/includes/registry/format/ini.php?rev=3204551 "Show entry in browser")
  (modified)
  ([2 diffs](#file14 "Show differences"))
* [includes/string/string.php](/browser/wp-pipes/trunk/includes/string/string.php?rev=3204551 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [install.pipes.php](/browser/wp-pipes/trunk/install.pipes.php?rev=3204551 "Show entry in browser")
  (modified)
  ([2 diffs](#file16 "Show differences"))
* [models/pipe.php](/browser/wp-pipes/trunk/models/pipe.php?rev=3204551 "Show entry in browser")
  (modified)
  ([8 diffs](#file17 "Show differences"))
* [models/settings.php](/browser/wp-pipes/trunk/models/settings.php?rev=3204551 "Show entry in browser")
  (modified)
  ([4 diffs](#file18 "Show differences"))
* [pipes.php](/browser/wp-pipes/trunk/pipes.php?rev=3204551 "Show entry in browser")
  (modified)
  ([1 diff](#file19 "Show differences"))
* [plugins/processors/cut\_introtext/cut\_introtext.php](/browser/wp-pipes/trunk/plugins/processors/cut_introtext/cut_introtext.php?rev=3204551 "Show entry in browser")
  (modified)
  ([2 diffs](#file20 "Show differences"))
* [post.html.php](/browser/wp-pipes/trunk/post.html.php?rev=3204551 "Show entry in browser")
  (modified)
  ([2 diffs](#file21 "Show differences"))
* [readme.txt](/browser/wp-pipes/trunk/readme.txt?rev=3204551 "Show entry in browser")
  (modified)
  ([3 diffs](#file22 "Show differences"))
* [tables/pipes.php](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551 "Show entry in browser")
  (modified)
  ([23 diffs](#file23 "Show differences"))
* [views/pipe/tmpl/form\_bs3.php](/browser/wp-pipes/trunk/views/pipe/tmpl/form_bs3.php?rev=3204551 "Show entry in browser")
  (modified)
  ([5 diffs](#file24 "Show differences"))
* [views/settings/tmpl/default.php](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=3204551 "Show entry in browser")
  (modified)
  ([10 diffs](#file25 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [wp-pipes/trunk/assets/js/process.js](/changeset/3204551/wp-pipes/trunk/assets/js/process.js "Show the changeset 3204551 restricted to wp-pipes/trunk/assets/js/process.js")

  | [r1595456](/browser/wp-pipes/trunk/assets/js/process.js?rev=1595456#L709 "Show revision 1595456 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/assets/js/process.js?rev=3204551#L709 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 709 | 709 | submitbutton(ogb\_gid('adminForm'), 'apply'); |
  | 710 | 710 | } |
  |  | 711 |  |
  |  | 712 |  |
  |  | 713 |  |
  |  | 714 |  |
  | 711 | 715 | function call\_function\_from\_addon(type, name, callback, value) { |
  | 712 | 716 | jQuery('#dvLoading').show(); |
* ## [wp-pipes/trunk/controllers/pipe.php](/changeset/3204551/wp-pipes/trunk/controllers/pipe.php "Show the changeset 3204551 restricted to wp-pipes/trunk/controllers/pipe.php")

  | [r1812495](/browser/wp-pipes/trunk/controllers/pipe.php?rev=1812495#L171 "Show revision 1812495 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/controllers/pipe.php?rev=3204551#L171 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 171 | 171 | } |
  | 172 | 172 |  |
  | 173 |  | function save() { |
  | 174 |  | /\*echo "\n\n<br /><i><b>File:</b>".\_\_FILE\_\_.' <b>Line:</b>'.\_\_LINE\_\_."</i><br />\n\n"; |
  | 175 |  | echo '<pre>'; |
  | 176 |  | print\_r($\_POST); |
  | 177 |  | echo '</pre>';exit();\*/ |
  | 178 |  |  |
  | 179 |  | global $mainframe, $option; |
  | 180 |  | $mod = $this->getModel( 'pipe' ); |
  | 181 |  | $res = $mod->save(); |
  | 182 |  | $msg = $res->msg; |
  | 183 |  | PIPES::add\_message( $msg ); |
  | 184 |  |  |
  | 185 |  | $task = filter\_input( INPUT\_POST, 'task' ); |
  |  | 173 | // Handle add new item here |
  |  | 174 | function save() |
  |  | 175 | { |
  |  | 176 | // Initialize $msg as an empty string and $res as an empty object |
  |  | 177 | $msg = ''; |
  |  | 178 | $res= new stdClass(); |
  |  | 179 | try { |
  |  | 180 | global $mainframe, $option; |
  |  | 181 | $mod = $this->getModel('pipe'); |
  |  | 182 | // Get nonce token |
  |  | 183 | $nonce\_token\_saveData = $\_POST['nonce\_token\_saveData'] ?? ''; |
  |  | 184 | $nonce\_action = 'nonce\_token\_saveData'; |
  |  | 185 |  |
  |  | 186 | // Verify nonce token |
  |  | 187 | if (!wp\_verify\_nonce($nonce\_token\_saveData,¬† $nonce\_action)) { |
  |  | 188 | throw new Exception('Nonce verification failed!'); |
  |  | 189 | } |
  |  | 190 |  |
  |  | 191 | $res = $mod->save(); |
  |  | 192 | $msg = $res->msg; |
  |  | 193 |  |
  |  | 194 | } catch (Exception $e) { |
  |  | 195 | $msg = $e->getMessage(); |
  |  | 196 | } |
  |  | 197 |  |
  |  | 198 | PIPES::add\_message($msg); |
  | 186 | 199 | //$apply¬† ¬† = $task=='apply'?'&task=edit&id[]='.$res->id:''; |
  | 187 | 200 | $url = admin\_url() . 'admin.php?page=' . PIPES::$\_\_page\_prefix . '.pipe&id=' . $res->id; |
  | 188 |  | header( 'Location: ' . $url ); |
  | 189 |  | exit(); |
  | 190 |  | //¬† ¬† ¬† $mainframe->enqueueMessage($msg, $res->typemsg); |
  | 191 |  | //¬† ¬† ¬† $mainframe->redirect("index.php?option={$option}&controller=items".$apply); |
  | 192 |  | } |
  |  | 201 | header('Location: ' . $url); |
  |  | 202 | exit(); |
  |  | 203 | //¬† ¬† ¬† $mainframe->enqueueMessage($msg, $res->typemsg); |
  |  | 204 | //¬† ¬† ¬† $mainframe->redirect("index.php?option={$option}&controller=items".$apply); |
  |  | 205 | } |
  |  | 206 |  |
  | 193 | 207 |  |
  | 194 | 208 | function cancel() { |
  | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipe.php?rev=1812495#L423) | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipe.php?rev=3204551#L437) |  |
  | 423 | 437 |  |
  | 424 | 438 | public function quick\_edit(){ |
  |  | 439 |  |
  | 425 | 440 | $mod = $this->getModel( 'pipe' ); |
  | 426 | 441 | $res = $mod->quick\_edit\_pipe(); |
* ## [wp-pipes/trunk/controllers/pipes.php](/changeset/3204551/wp-pipes/trunk/controllers/pipes.php "Show the changeset 3204551 restricted to wp-pipes/trunk/controllers/pipes.php")

  | [r1853065](/browser/wp-pipes/trunk/controllers/pipes.php?rev=1853065#L1 "Show revision 1853065 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/controllers/pipes.php?rev=3204551#L1 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  |  | 2 |  |
  | 2 | 3 | /\*\* |
  | 3 | 4 | \* @package¬† ¬† ¬† ¬† ¬† WP Pipes plugin - PIPES |
  | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipes.php?rev=1853065#L7) | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipes.php?rev=3204551#L8) |  |
  | 7 | 8 | \* @license¬† ¬† ¬† ¬† ¬† GNU/GPL v3, see LICENSE |
  | 8 | 9 | \*/ |
  | 9 |  | defined( 'PIPES\_CORE' ) or die( 'Restricted access' ); |
  | 10 |  |  |
  | 11 |  | class PIPESControllerPipes extends Controller { |
  | 12 |  |  |
  | 13 |  | public function \_\_construct() { |
  | 14 |  |  |
  | 15 |  | } |
  | 16 |  |  |
  | 17 |  | function display( $cachable = false, $urlparams = false ) { |
  |  | 10 | defined('PIPES\_CORE') or die('Restricted access'); |
  |  | 11 |  |
  |  | 12 | class PIPESControllerPipes extends Controller |
  |  | 13 | { |
  |  | 14 | public function \_\_construct() |
  |  | 15 | { |
  |  | 16 | } |
  |  | 17 |  |
  |  | 18 | function display($cachable = false, $urlparams = false) |
  |  | 19 | { |
  | 18 | 20 | return; |
  | 19 | 21 | } |
  | 20 | 22 |  |
  | 21 |  | public function edit() { |
  | 22 |  | $id¬† = isset( $\_GET['id'] ) ? (int) sanitize\_text\_field( $\_GET['id'] ) : ''; |
  | 23 |  | $url = admin\_url() . 'admin.php?page=' . PIPES::$\_\_page\_prefix . '.pipe&id=' . $id; |
  | 24 |  | header( 'Location: ' . $url ); |
  | 25 |  | } |
  | 26 |  |  |
  | 27 |  | public function delete() { |
  | 28 |  | $mod = $this->getModel( 'pipes' ); |
  | 29 |  | $id¬† = isset( $\_GET['id'] ) ? array\_map( 'sanitize\_text\_field', $\_GET['id'] ) : 0; |
  | 30 |  | if ( $id == '' ) { |
  | 31 |  | $res = "Please pick up at least 1 pipe first!"; |
  | 32 |  | } else { |
  | 33 |  | $res = $mod->delete( $id ); |
  | 34 |  | } |
  | 35 |  | PIPES::add\_message( $res ); |
  | 36 |  | $url = remove\_query\_arg( array( 'id', 'action', 'action2' ), $\_SERVER['HTTP\_REFERER'] ); |
  | 37 |  | header( 'Location: ' . $url ); |
  |  | 23 | public function edit() |
  |  | 24 | { |
  |  | 25 | try { |
  |  | 26 | $id¬† = isset($\_GET['id']) ? (int) sanitize\_text\_field($\_GET['id']) : ''; |
  |  | 27 | $edit\_nonce\_token = isset($\_GET['edit\_nonce']) ? $\_GET['edit\_nonce'] : ''; |
  |  | 28 |  |
  |  | 29 | $nonce\_action = 'edit\_none\_token'; |
  |  | 30 |  |
  |  | 31 | if (!wp\_verify\_nonce($edit\_nonce\_token, $nonce\_action)) { |
  |  | 32 | throw new Exception("Nonce verification failed! Unauthorized edition for pipe with ID: " . $id); |
  |  | 33 | } |
  |  | 34 |  |
  |  | 35 | $url = admin\_url() . 'admin.php?page=' . PIPES::$\_\_page\_prefix . '.pipe&id=' . $id; |
  |  | 36 | header('Location: ' . $url); |
  |  | 37 | } catch (Exception $e) { |
  |  | 38 | $res = $e->getMessage(); |
  |  | 39 | $\_SESSION['PIPES']['messages'][] = array('type' => 'error', 'msg' => $res); |
  |  | 40 | } |
  |  | 41 | } |
  |  | 42 |  |
  |  | 43 | // Add nonce token |
  |  | 44 | public function delete() |
  |  | 45 | { |
  |  | 46 | // Initialize $res as an empty string |
  |  | 47 | $res = ''; |
  |  | 48 | try { |
  |  | 49 | $mod = $this->getModel('pipes'); |
  |  | 50 | // Make sure the id is an absolute integer |
  |  | 51 | $id = isset($\_GET['id']) ? absint($\_GET['id']) : 0; |
  |  | 52 | $nonce = isset($\_GET['delete\_nonce']) ? $\_GET['delete\_nonce'] : ''; |
  |  | 53 |  |
  |  | 54 | // Define the nonce action. Make sure it matches the one used when generating the nonce. |
  |  | 55 | $nonce\_action = 'delete\_none\_token'; |
  |  | 56 |  |
  |  | 57 | if (!wp\_verify\_nonce($nonce, $nonce\_action)) { |
  |  | 58 | throw new Exception("Nonce verification failed! Unauthorized deletion for pipe with ID: " . $id); |
  |  | 59 | } else { |
  |  | 60 | // Nonce is valid, perform the delete operation for this ID |
  |  | 61 | $res = $mod->delete($id); |
  |  | 62 | $\_SESSION['PIPES']['messages'][] = array('type' => 'message', 'msg' => $res); |
  |  | 63 | } |
  |  | 64 | } catch (Exception $e) { |
  |  | 65 | $res = $e->getMessage(); |
  |  | 66 | $\_SESSION['PIPES']['messages'][] = array('type' => 'error', 'msg' => $res); |
  |  | 67 | } |
  |  | 68 | if (isset($\_SERVER['HTTP\_REFERER'])) { |
  |  | 69 | $url = remove\_query\_arg(array('id', 'action', 'action2', 'nonce'), $\_SERVER['HTTP\_REFERER']); |
  |  | 70 | wp\_safe\_redirect($url); |
  |  | 71 | } else { |
  |  | 72 | echo "Oops! Something went wrong. Please go back to the previous page."; |
  |  | 73 | } |
  |  | 74 |  |
  |  | 75 | exit(); |
  |  | 76 | } |
  |  | 77 |  |
  |  | 78 | public function copy() |
  |  | 79 | { |
  |  | 80 | $mod = $this->getModel('pipes'); |
  |  | 81 | $id¬† = isset($\_GET['id']) ? array\_map('sanitize\_text\_field', $\_GET['id']) : 0; |
  |  | 82 |  |
  |  | 83 | $nonce = isset($\_GET['pipe\_nonce']) ? $\_GET['pipe\_nonce'] : ''; |
  |  | 84 | $nonce\_action = 'pipe\_non'; |
  |  | 85 | // Check the validity of the nonce before copying |
  |  | 86 |  |
  |  | 87 | if (!wp\_verify\_nonce($nonce, $nonce\_action)) { |
  |  | 88 | // Nonce verification failed |
  |  | 89 | $res = 'Nonce verification failed!'; |
  |  | 90 | } else { |
  |  | 91 | if ($id == '') { |
  |  | 92 | $res = "Please pick up at least 1 pipe first!"; |
  |  | 93 | } else { |
  |  | 94 | $res = $mod->copy($id); |
  |  | 95 | } |
  |  | 96 | } |
  |  | 97 | PIPES::add\_message($res); |
  |  | 98 | if (isset($\_SERVER['HTTP\_REFERER'])) { |
  |  | 99 | $url = remove\_query\_arg(array('id', 'action', 'action2', 'nonce'), $\_SERVER['HTTP\_REFERER']); |
  |  | 100 | header('Location: ' . $url); |
  |  | 101 | } else { |
  |  | 102 | echo "Oops! Something went wrong. Please go back to the previous page."; |
  |  | 103 | } |
  |  | 104 |  |
  |  | 105 | exit(); |
  |  | 106 | } |
  |  | 107 |  |
  |  | 108 | public function publish() |
  |  | 109 | { |
  |  | 110 | $mod = $this->getModel('pipes'); |
  |  | 111 | $id¬† = isset($\_GET['id']) ? array\_map('sanitize\_text\_field', $\_GET['id']) : 0; |
  |  | 112 |  |
  |  | 113 | $nonce = isset($\_GET['pipe\_nonce']) ? $\_GET['pipe\_nonce'] : ''; |
  |  | 114 | $nonce\_action = 'pipe\_non'; |
  |  | 115 |  |
  |  | 116 | // Check the validity of the nonce before publishing |
  |  | 117 | if (!wp\_verify\_nonce($nonce, $nonce\_action)) { |
  |  | 118 | // Nonce verification failed |
  |  | 119 | $res = 'Nonce verification failed!'; |
  |  | 120 | } else { |
  |  | 121 | if ($id == '') { |
  |  | 122 | $res = "Please pick up at least 1 pipe first!"; |
  |  | 123 | } else { |
  |  | 124 | $res = $mod->change\_status($id, 1); |
  |  | 125 | } |
  |  | 126 | } |
  |  | 127 | PIPES::add\_message($res); |
  |  | 128 |  |
  |  | 129 | if (isset($\_SERVER['HTTP\_REFERER'])) { |
  |  | 130 | $url = remove\_query\_arg(array('id', 'action', 'action2', 'nonce'), $\_SERVER['HTTP\_REFERER']); |
  |  | 131 | header('Location: ' . $url); |
  |  | 132 | } else { |
  |  | 133 | echo "Oops! Something went wrong. Please go back to the previous page."; |
  |  | 134 | } |
  |  | 135 |  |
  |  | 136 |  |
  | 38 | 137 | exit(); |
  | 39 | 138 | //$this->display(); |
  | 40 | 139 | } |
  | 41 | 140 |  |
  | 42 |  | public function copy() { |
  | 43 |  | $mod = $this->getModel( 'pipes' ); |
  | 44 |  | $id¬† = isset( $\_GET['id'] ) ? array\_map( 'sanitize\_text\_field', $\_GET['id'] ) : 0; |
  | 45 |  | if ( $id == '' ) { |
  | 46 |  | $res = "Please pick up at least 1 pipe first!"; |
  | 47 |  | } else { |
  | 48 |  | $res = $mod->copy( $id ); |
  | 49 |  | } |
  | 50 |  | PIPES::add\_message( $res ); |
  | 51 |  |  |
  | 52 |  | $url = remove\_query\_arg( array( 'id', 'action', 'action2' ), $\_SERVER['HTTP\_REFERER'] ); |
  | 53 |  | header( 'Location: ' . $url ); |
  | 54 |  | exit(); |
  | 55 |  | } |
  | 56 |  |  |
  | 57 |  | public function publish() { |
  | 58 |  | $mod = $this->getModel( 'pipes' ); |
  | 59 |  | $id¬† = isset( $\_GET['id'] ) ? array\_map( 'sanitize\_text\_field', $\_GET['id'] ) : 0; |
  | 60 |  | if ( $id == '' ) { |
  | 61 |  | $res = "Please pick up at least 1 pipe first!"; |
  | 62 |  | } else { |
  | 63 |  | $res = $mod->change\_status( $id, 1 ); |
  | 64 |  | } |
  | 65 |  | PIPES::add\_message( $res ); |
  | 66 |  | $url = remove\_query\_arg( array( 'id', 'action', 'action2' ), $\_SERVER['HTTP\_REFERER'] ); |
  | 67 |  | header( 'Location: ' . $url ); |
  | 68 |  | exit(); |
  | 69 |  | //$this->display(); |
  | 70 |  | } |
  | 71 |  |  |
  | 72 |  | public function create\_tables() { |
  |  | 141 | public function create\_tables() |
  |  | 142 | { |
  | 73 | 143 | global $wpdb; |
  | 74 |  | require\_once(~~ABSPATH . 'wp-admin/includes/upgrade.php'~~ ); |
  | 75 |  |  |
  | 76 |  | #-------------------------------------------------- |
  | 77 |  | # Add user\_meta for all admins |
  | 78 |  | #-------------------------------------------------- |
  |  | 144 | require\_once(ABSPATH . 'wp-admin/includes/upgrade.php'); |
  |  | 145 |  |
  |  | 146 | #-------------------------------------------------- |
  |  | 147 | # Add user\_meta for all admins |
  |  | 148 | #-------------------------------------------------- |
  | 79 | 149 | $users¬† ¬† ¬†= get\_users(); |
  | 80 |  | $user\_meta = array(~~'pipes\_help\_box' => 1, 'pipes\_per\_page' => 20, 'addons\_per\_page' => 20~~ ); |
  | 81 |  | foreach (~~$users as $user~~ ) { |
  | 82 |  | if (~~is\_super\_admin( $user->ID )~~ ) { |
  | 83 |  | foreach (~~$user\_meta as $meta\_key => $value~~ ) { |
  | 84 |  | $meta\_value = get\_user\_meta(~~$user->ID, $meta\_key, true~~ ); |
  | 85 |  | if (~~$meta\_value == ''~~ ) { |
  | 86 |  | update\_user\_meta(~~$user->ID, $meta\_key, $value~~ ); |
  |  | 150 | $user\_meta = array('pipes\_help\_box' => 1, 'pipes\_per\_page' => 20, 'addons\_per\_page' => 20); |
  |  | 151 | foreach ($users as $user) { |
  |  | 152 | if (is\_super\_admin($user->ID)) { |
  |  | 153 | foreach ($user\_meta as $meta\_key => $value) { |
  |  | 154 | $meta\_value = get\_user\_meta($user->ID, $meta\_key, true); |
  |  | 155 | if ($meta\_value == '') { |
  |  | 156 | update\_user\_meta($user->ID, $meta\_key, $value); |
  | 87 | 157 | } |
  | 88 | 158 | } |
  | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipes.php?rev=1853065#L90) | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipes.php?rev=3204551#L160) |  |
  | 90 | 160 | } |
  | 91 | 161 |  |
  | 92 |  | #-------------------------------------------------- |
  | 93 |  | # Create Items table |
  | 94 |  | #-------------------------------------------------- |
  | 95 |  |  |
  | 96 |  |  |
  | 97 |  | if ( $wpdb->has\_cap( 'collation' ) ) { |
  | 98 |  | if ( ! empty( $wpdb->charset ) ) { |
  |  | 162 |  |
  |  | 163 | #-------------------------------------------------- |
  |  | 164 | # Create Items table |
  |  | 165 | #-------------------------------------------------- |
  |  | 166 |  |
  |  | 167 |  |
  |  | 168 | if ($wpdb->has\_cap('collation')) { |
  |  | 169 | if (!empty($wpdb->charset)) { |
  | 99 | 170 | $collation .= "DEFAULT CHARACTER SET $wpdb->charset"; |
  | 100 | 171 | } |
  | 101 |  | if (~~! empty( $wpdb->collate )~~ ) { |
  |  | 172 | if (!empty($wpdb->collate)) { |
  | 102 | 173 | $collation .= " COLLATE $wpdb->collate"; |
  | 103 | 174 | } |
  | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipes.php?rev=1853065#L117) | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipes.php?rev=3204551#L188) |  |
  | 117 | 188 | PRIMARY KEY (`id`) |
  | 118 | 189 | ) ' . $collation; |
  | 119 |  | dbDelta(~~$sql~~ ); |
  | 120 |  |  |
  | 121 |  |  |
  | 122 |  | #-------------------------------------------------- |
  | 123 |  | # Create Pipes table |
  | 124 |  | #-------------------------------------------------- |
  |  | 190 | dbDelta($sql); |
  |  | 191 |  |
  |  | 192 |  |
  |  | 193 | #-------------------------------------------------- |
  |  | 194 | # Create Pipes table |
  |  | 195 | #-------------------------------------------------- |
  | 125 | 196 | $sql = 'CREATE TABLE IF NOT EXISTS `' . $wpdb->prefix . 'wppipes\_pipes` ( |
  | 126 | 197 | `id` int(11) NOT NULL AUTO\_INCREMENT, |
  | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipes.php?rev=1853065#L132) | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipes.php?rev=3204551#L203) |  |
  | 132 | 203 | PRIMARY KEY (`id`) |
  | 133 | 204 | ) ' . $collation; |
  | 134 |  | dbDelta( $sql ); |
  | 135 |  | header( 'Location: ' . $\_SERVER['HTTP\_REFERER'] ); |
  | 136 |  | exit(); |
  | 137 |  | } |
  | 138 |  |  |
  | 139 |  | public function pipes\_restore\_default\_options() { |
  | 140 |  | global $pipes\_settings; |
  | 141 |  | include\_once( dirname( dirname( \_\_FILE\_\_ ) ) . DS . 'settings-init.php' ); |
  | 142 |  | foreach ( $pipes\_settings as $section ) { |
  | 143 |  | foreach ( $section as $value ) { |
  | 144 |  | if ( isset( $value['default'] ) && isset( $value['id'] ) ) { |
  | 145 |  | update\_option( $value['id'], $value['default'] ); |
  |  | 205 | dbDelta($sql); |
  |  | 206 | if (isset($\_SERVER['HTTP\_REFERER'])) { |
  |  | 207 | header('Location: ' . $\_SERVER['HTTP\_REFERER']); |
  |  | 208 | } else { |
  |  | 209 | echo "Oops! Something went wrong. Please go back to the previous page."; |
  |  | 210 | } |
  |  | 211 |  |
  |  | 212 | exit(); |
  |  | 213 | } |
  |  | 214 |  |
  |  | 215 | // Handle nonce token of restore feature |
  |  | 216 | public function pipes\_restore\_default\_options() |
  |  | 217 | { |
  |  | 218 | $res = ''; |
  |  | 219 | try { |
  |  | 220 | global $pipes\_settings; |
  |  | 221 | include\_once(dirname(dirname(\_\_FILE\_\_)) . DS . 'settings-init.php'); |
  |  | 222 |  |
  |  | 223 | // Get nonce token from url |
  |  | 224 | $nonce = isset($\_GET['nonce']) ? $\_GET['nonce'] : ''; |
  |  | 225 | $nonce\_action = 'nonce\_token'; |
  |  | 226 |  |
  |  | 227 | if (!wp\_verify\_nonce($nonce, $nonce\_action)) { |
  |  | 228 | throw new Exception("Nonce verification failed!"); |
  |  | 229 | } |
  |  | 230 |  |
  |  | 231 | foreach ($pipes\_settings as $section) { |
  |  | 232 | foreach ($section as $value) { |
  |  | 233 | if (isset($value['default']) && isset($value['id'])) { |
  |  | 234 | update\_option($value['id'], $value['default']); |
  |  | 235 | $res = "Restore successfully."; |
  |  | 236 | } |
  | 146 | 237 | } |
  | 147 | 238 | } |
  | 148 |  | } |
  | 149 |  | header( 'Location: ' . $\_SERVER['HTTP\_REFERER'] ); |
  | 150 |  | exit(); |
  | 151 |  | } |
  | 152 |  |  |
  | 153 |  | public function delete\_cache\_folder() { |
  | 154 |  | $dirPath = OGRAB\_CACHE; |
  | 155 |  | $this->deleteDirCache( $dirPath ); |
  | 156 |  | header( 'Location: ' . $\_SERVER['HTTP\_REFERER'] ); |
  | 157 |  | exit(); |
  | 158 |  | } |
  | 159 |  |  |
  | 160 |  | function deleteDirCache( $dirPath ) { |
  | 161 |  | if ( ! is\_dir( $dirPath ) ) { |
  | 162 |  | throw new InvalidArgumentException( "$dirPath must be a directory" ); |
  | 163 |  | } |
  | 164 |  | if ( substr( $dirPath, strlen( $dirPath ) - 1, 1 ) != '/' ) { |
  |  | 239 | $\_SESSION['PIPES']['messages'][] = array('type' => 'message', 'msg' => $res); |
  |  | 240 | } catch (Exception $e) { |
  |  | 241 | $res = $e->getMessage(); |
  |  | 242 | $\_SESSION['PIPES']['messages'][] = array('type' => 'error', 'msg' => $res); |
  |  | 243 | } |
  |  | 244 |  |
  |  | 245 | if (isset($\_SERVER['HTTP\_REFERER'])) { |
  |  | 246 | header('Location: ' . $\_SERVER['HTTP\_REFERER']); |
  |  | 247 | } else { |
  |  | 248 | echo "Oops! Something went wrong. Please go back to the previous page."; |
  |  | 249 | } |
  |  | 250 |  |
  |  | 251 | exit(); |
  |  | 252 | } |
  |  | 253 |  |
  |  | 254 |  |
  |  | 255 | // Add nonce token for feature: Clear cache and delete the folder that created in uploads/wppipes |
  |  | 256 | public function delete\_cache\_folder() |
  |  | 257 | { |
  |  | 258 | $res = ''; |
  |  | 259 | try { |
  |  | 260 | $nonce = isset($\_GET['nonce']) ? $\_GET['nonce'] : ''; |
  |  | 261 | $nonce\_action = 'nonce\_token'; |
  |  | 262 |  |
  |  | 263 | if (!wp\_verify\_nonce($nonce, $nonce\_action)) { |
  |  | 264 | throw new Exception("Nonce verification failed!"); |
  |  | 265 | } |
  |  | 266 |  |
  |  | 267 | $dirPath = OGRAB\_CACHE; |
  |  | 268 | $this->deleteDirCache($dirPath); |
  |  | 269 |  |
  |  | 270 | $res = "Delete cache folder successfully."; |
  |  | 271 | $\_SESSION['PIPES']['messages'][] = array('type' => 'message', 'msg' => $res); |
  |  | 272 | } catch (Exception $e) { |
  |  | 273 | $res = $e->getMessage(); |
  |  | 274 | $\_SESSION['PIPES']['messages'][] = array('type' => 'error', 'msg' => $res); |
  |  | 275 | } |
  |  | 276 |  |
  |  | 277 |  |
  |  | 278 | // PIPES::add\_message($res); |
  |  | 279 | if (isset($\_SERVER['HTTP\_REFERER'])) { |
  |  | 280 | header('Location: ' . $\_SERVER['HTTP\_REFERER']); |
  |  | 281 | } else { |
  |  | 282 | echo "Oops! Something went wrong. Please go back to the previous page."; |
  |  | 283 | } |
  |  | 284 |  |
  |  | 285 | exit(); |
  |  | 286 | } |
  |  | 287 |  |
  |  | 288 | function deleteDirCache($dirPath) |
  |  | 289 | { |
  |  | 290 | if (!is\_dir($dirPath)) { |
  |  | 291 | throw new InvalidArgumentException("$dirPath must be a directory"); |
  |  | 292 | } |
  |  | 293 | if (substr($dirPath, strlen($dirPath) - 1, 1) != '/') { |
  | 165 | 294 | $dirPath .= '/'; |
  | 166 | 295 | } |
  | 167 |  | $files = glob( $dirPath . '\*', GLOB\_MARK ); |
  | 168 |  | foreach ( $files as $file ) { |
  | 169 |  | if ( is\_dir( $file ) ) { |
  | 170 |  | self::deleteDirCache( $file ); |
  | 171 |  | } else { |
  | 172 |  | unlink( $file ); |
  | 173 |  | } |
  | 174 |  | } |
  | 175 |  | rmdir( $dirPath ); |
  | 176 |  | } |
  | 177 |  |  |
  | 178 |  | public function move\_to\_draft() { |
  | 179 |  | $mod = $this->getModel( 'pipes' ); |
  | 180 |  | $id¬† = isset( $\_GET['id'] ) ? array\_map( 'sanitize\_text\_field', $\_GET['id'] ) : 0; |
  | 181 |  | if ( $id == '' ) { |
  | 182 |  | $res = "Please pick up at least 1 pipe first!"; |
  | 183 |  | } else { |
  | 184 |  | $res = $mod->change\_status( $id, 0 ); |
  | 185 |  | } |
  | 186 |  | PIPES::add\_message( $res ); |
  | 187 |  |  |
  | 188 |  | $url = remove\_query\_arg( array( 'id', 'action', 'action2' ), $\_SERVER['HTTP\_REFERER'] ); |
  | 189 |  | header( 'Location: ' . $url ); |
  | 190 |  | exit(); |
  | 191 |  | } |
  | 192 |  |  |
  | 193 |  | public function update\_meta() { |
  | 194 |  | if ( isset( $\_POST['uid'] ) ) { |
  | 195 |  | $user¬† = sanitize\_text\_field( $\_POST['uid'] ); |
  | 196 |  | $value = sanitize\_text\_field( $\_POST['select'] ); |
  | 197 |  | update\_user\_meta( $user, 'pipes\_help\_box', $value ); |
  |  | 296 | $files = glob($dirPath . '\*', GLOB\_MARK); |
  |  | 297 | foreach ($files as $file) { |
  |  | 298 | if (is\_dir($file)) { |
  |  | 299 | self::deleteDirCache($file); |
  |  | 300 | } else { |
  |  | 301 | unlink($file); |
  |  | 302 | } |
  |  | 303 | } |
  |  | 304 | rmdir($dirPath); |
  |  | 305 | } |
  |  | 306 |  |
  |  | 307 | public function move\_to\_draft() |
  |  | 308 | { |
  |  | 309 | if (isset($\_GET['id']) && isset($\_GET['nonce']) && wp\_verify\_nonce($\_GET['nonce'], 'move\_to\_draft\_action')) { |
  |  | 310 | $mod = $this->getModel('pipes'); |
  |  | 311 | $id¬† = isset($\_GET['id']) ? array\_map('sanitize\_text\_field', $\_GET['id']) : 0; |
  |  | 312 | if ($id == '') { |
  |  | 313 | $res = "Please pick up at least 1 pipe first!"; |
  |  | 314 | } else { |
  |  | 315 | $res = $mod->change\_status($id, 0); |
  |  | 316 | } |
  |  | 317 | PIPES::add\_message($res); |
  |  | 318 |  |
  |  | 319 | if (isset($\_SERVER['HTTP\_REFERER'])) { |
  |  | 320 | $url = remove\_query\_arg(array('id', 'action', 'action2'), $\_SERVER['HTTP\_REFERER']); |
  |  | 321 | header('Location: ' . $url); |
  |  | 322 | } else { |
  |  | 323 | echo "Oops! Something went wrong. Please go back to the previous page."; |
  |  | 324 | } |
  |  | 325 |  |
  |  | 326 | exit(); |
  |  | 327 | } else { |
  |  | 328 | $res = "Nonce verification failed!"; |
  |  | 329 | PIPES::add\_message($res); |
  |  | 330 | } |
  |  | 331 | } |
  |  | 332 |  |
  |  | 333 | public function update\_meta() |
  |  | 334 | { |
  |  | 335 | if (isset($\_POST['uid']) && isset($\_POST['select']) && isset($\_POST['nonce']) && wp\_verify\_nonce($\_POST['nonce'], 'update\_meta\_action')) { |
  |  | 336 | $user¬† = sanitize\_text\_field($\_POST['uid']); |
  |  | 337 | $value = sanitize\_text\_field($\_POST['select']); |
  |  | 338 | update\_user\_meta($user, 'pipes\_help\_box', $value); |
  | 198 | 339 |  |
  | 199 | 340 | return 'Success!'; |
  | 200 |  | } |
  | 201 |  | } |
  | 202 |  |  |
  | 203 |  | public function export\_to\_share() { |
  | 204 |  | $mod = $this->getModel( 'pipes' ); |
  | 205 |  | $id¬† = isset( $\_GET['id'] ) ? ( is\_array( $\_GET['id'] ) ? array\_map( 'sanitize\_text\_field', $\_GET['id'] ) : $\_GET['id'] ) : 0; |
  | 206 |  | if ( $id == '' ) { |
  | 207 |  | PIPES::add\_message( "Please pick up at least 1 pipe first!" ); |
  | 208 |  | $url = remove\_query\_arg( array( 'id', 'action', 'action2' ), $\_SERVER['HTTP\_REFERER'] ); |
  | 209 |  | header( 'Location: ' . $url ); |
  |  | 341 | } else { |
  |  | 342 | $res = "Nonce verification failed!"; |
  |  | 343 | PIPES::add\_message($res); |
  |  | 344 | } |
  |  | 345 | } |
  |  | 346 |  |
  |  | 347 | public function export\_to\_share() |
  |  | 348 | { |
  |  | 349 | $mod = $this->getModel('pipes'); |
  |  | 350 | $id¬† = isset($\_GET['id']) ? (is\_array($\_GET['id']) ? array\_map('sanitize\_text\_field', $\_GET['id']) : $\_GET['id']) : 0; |
  |  | 351 | if ($id == '') { |
  |  | 352 | PIPES::add\_message("Please pick up at least 1 pipe first!"); |
  |  | 353 | if (isset($\_SERVER['HTTP\_REFERER'])) { |
  |  | 354 | $url = remove\_query\_arg(array('id', 'action', 'action2'), $\_SERVER['HTTP\_REFERER']); |
  |  | 355 | header('Location: ' . $url); |
  |  | 356 | } else { |
  |  | 357 | echo "Oops! Something went wrong. Please go back to the previous page."; |
  |  | 358 | } |
  | 210 | 359 | exit(); |
  | 211 | 360 | } |
  | 212 |  | $set\_template = isset(~~$\_GET['set\_template'] ) ? sanitize\_text\_field( $\_GET['set\_template']~~ ) : 0; |
  | 213 |  | $res¬† ¬† ¬† ¬† ¬† = $mod->export\_to\_share(~~$id~~ ); |
  |  | 361 | $set\_template = isset($\_GET['set\_template']) ? sanitize\_text\_field($\_GET['set\_template']) : 0; |
  |  | 362 | $res¬† ¬† ¬† ¬† ¬† = $mod->export\_to\_share($id); |
  | 214 | 363 | //PIPES::add\_message($res->msg); |
  | 215 |  | if (~~count( $res->result ) == 1~~ ) { |
  | 216 |  | $file\_name = sanitize\_title(~~$res->result[0]->name~~ ) . '.pipe'; |
  | 217 |  | } else { |
  | 218 |  | $file\_name = 'pipes-' . date(~~'d-m-Y', time()~~ ) . '.pipe'; |
  |  | 364 | if (count($res->result) == 1) { |
  |  | 365 | $file\_name = sanitize\_title($res->result[0]->name) . '.pipe'; |
  |  | 366 | } else { |
  |  | 367 | $file\_name = 'pipes-' . date('d-m-Y', time()) . '.pipe'; |
  | 219 | 368 | } |
  | 220 | 369 | $upload\_dir = wp\_upload\_dir(); |
  | 221 |  | if (~~$set\_template~~ ) { |
  |  | 370 | if ($set\_template) { |
  | 222 | 371 | $file\_name = $upload\_dir['basedir'] . DS . 'wppipes' . DS . 'templates' . DS . $file\_name; |
  | 223 |  | if (~~! is\_file( $file\_name )~~ ) { |
  | 224 |  | ogbFolder::create(~~$upload\_dir['basedir'] . DS . 'wppipes' . DS . 'templates'~~ ); |
  |  | 372 | if (!is\_file($file\_name)) { |
  |  | 373 | ogbFolder::create($upload\_dir['basedir'] . DS . 'wppipes' . DS . 'templates'); |
  | 225 | 374 | } |
  | 226 | 375 | } |
  | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipes.php?rev=1853065#L232) | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipes.php?rev=3204551#L381) |  |
  | 232 | 381 | fclose( $fp );\*/ |
  | 233 | 382 | $output\_content = ''; |
  | 234 |  | foreach (~~$res->result as $result~~ ) { |
  | 235 |  | $output\_content .= json\_encode(~~$result~~ ) . "\n"; |
  | 236 |  | } |
  | 237 |  | if (~~$set\_template~~ ) { |
  | 238 |  | PIPES::add\_message(~~$res->msg~~ ); |
  |  | 383 | foreach ($res->result as $result) { |
  |  | 384 | $output\_content .= json\_encode($result) . "\n"; |
  |  | 385 | } |
  |  | 386 | if ($set\_template) { |
  |  | 387 | PIPES::add\_message($res->msg); |
  | 239 | 388 | $url = admin\_url() . 'admin.php?page=' . PIPES::$\_\_page\_prefix . '.pipe&id=' . $id; |
  | 240 |  | header(~~'Location: ' . $url~~ ); |
  |  | 389 | header('Location: ' . $url); |
  | 241 | 390 | } |
  | 242 | 391 | ob\_start(); |
  | 243 |  | header(~~"Cache-Control: public"~~ ); |
  | 244 |  | header(~~"Content-Description: File Transfer"~~ ); |
  |  | 392 | header("Cache-Control: public"); |
  |  | 393 | header("Content-Description: File Transfer"); |
  | 245 | 394 | //header( "Content-Length: " . filesize( "$file\_name" ) . ";" ); |
  | 246 |  | header(~~"Content-Disposition: attachment; filename=$file\_name"~~ ); |
  | 247 |  | header(~~"Content-Transfer-Encoding: binary"~~ ); |
  |  | 395 | header("Content-Disposition: attachment; filename=$file\_name"); |
  |  | 396 | header("Content-Transfer-Encoding: binary"); |
  | 248 | 397 |  |
  | 249 | 398 | //readfile( $file\_name ); |
  | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipes.php?rev=1853065#L253) | [‚Ä¶](/browser/wp-pipes/trunk/controllers/pipes.php?rev=3204551#L402) |  |
  | 253 | 402 | } |
  | 254 | 403 |  |
  | 255 |  | public function import\_from\_file() { |
  |  | 404 | public function import\_from\_file() |
  |  | 405 | { |
  | 256 | 406 | $upload\_dir = wp\_upload\_dir(); |
  | 257 |  | $mod¬† ¬† ¬† ¬† = $this->getModel(~~'pipes'~~ ); |
  | 258 |  | $id¬† ¬† ¬† ¬† ¬†= isset(~~$\_GET['id'] ) ? (int) sanitize\_text\_field( $\_GET['id']~~ ) : 0; |
  | 259 |  | $file\_name¬† = isset(~~$\_GET['file\_name'] ) ? sanitize\_text\_field( $\_GET['file\_name']~~ ) : ''; |
  | 260 |  | if (~~isset ( $\_FILES["file\_import"]["name"] )~~ ) { |
  |  | 407 | $mod¬† ¬† ¬† ¬† = $this->getModel('pipes'); |
  |  | 408 | $id¬† ¬† ¬† ¬† ¬†= isset($\_GET['id']) ? (int) sanitize\_text\_field($\_GET['id']) : 0; |
  |  | 409 | $file\_name¬† = isset($\_GET['file\_name']) ? sanitize\_text\_field($\_GET['file\_name']) : ''; |
  |  | 410 | if (isset($\_FILES["file\_import"]["name"])) { |
  | 261 | 411 | $filename = $\_FILES["file\_import"]["tmp\_name"]; |
  | 262 |  | } elseif (~~isset( $\_GET['url'] )~~ ) { |
  | 263 |  | $filename = sanitize\_text\_field(~~$\_GET['url']~~ ); |
  | 264 |  | } elseif (~~is\_file( $upload\_dir['basedir'] . DS . 'wppipes' . DS . 'templates' . DS . $file\_name )~~ ) { |
  |  | 412 | } elseif (isset($\_GET['url'])) { |
  |  | 413 | $filename = sanitize\_text\_field($\_GET['url']); |
  |  | 414 | } elseif (is\_file($upload\_dir['basedir'] . DS . 'wppipes' . DS . 'templates' . DS . $file\_name)) { |
  | 265 | 415 | $filename = $upload\_dir['basedir'] . DS . 'wppipes' . DS . 'templates' . DS . $file\_name; |
  | 266 | 416 | } |
  | 267 |  | $file\_content = file\_get\_contents(~~$filename~~ ); |
  | 268 |  | $items¬† ¬† ¬† ¬† = explode(~~"\n", $file\_content~~ ); |
  |  | 417 | $file\_content = file\_get\_contents($filename); |
  |  | 418 | $items¬† ¬† ¬† ¬† = explode("\n", $file\_content); |
  | 269 | 419 | $new\_pipes¬† ¬† = array(); |
  | 270 |  | if (~~$file\_content == ''~~ ) { |
  |  | 420 | if ($file\_content == '') { |
  | 271 | 421 | $new\_pipes[] = "The file has not content!"; |
  | 272 | 422 | } |
  | 273 |  | foreach (~~$items as $value~~ ) { |
  | 274 |  | if (~~$value != ''~~ ) { |
  | 275 |  | if (~~substr( $value, 0, 1 ) == '{'~~ ) { |
  | 276 |  | $item = json\_decode(~~$value~~ ); |
  |  | 423 | foreach ($items as $value) { |
  |  | 424 | if ($value != '') { |
  |  | 425 | if (substr($value, 0, 1) == '{') { |
  |  | 426 | $item = json\_decode($value); |
  | 277 | 427 | } else { |
  | 278 |  | $item = json\_decode(~~substr( $value, 3 )~~ ); |
  |  | 428 | $item = json\_decode(substr($value, 3)); |
  | 279 | 429 | } |
  | 280 |  | if (~~! is\_object( $item )~~ ) { |
  |  | 430 | if (!is\_object($item)) { |
  | 281 | 431 | $new\_pipes[] = "There is something wrong with the structure of file's content!"; |
  | 282 | 432 | continue; |
  | 283 | 433 | } |
  | 284 | 434 | $item->current\_id = $id; |
  | 285 |  | $new\_pipes[]¬† ¬† ¬† = $mod->import\_from\_file( $item ); |
  | 286 |  | } |
  | 287 |  | } |
  | 288 |  | $message = implode( "</br>", $new\_pipes ); |
  | 289 |  | PIPES::add\_message( $message ); |
  | 290 |  | if ( isset( $\_GET['url'] ) ) { |
  | 291 |  | $url = remove\_query\_arg( array( 'task', 'url' ), $\_SERVER['HTTP\_REFERER'] ); |
  | 292 |  | header( 'Location: ' . $url ); |
  |  | 435 | $new\_pipes[]¬† ¬† ¬† = $mod->import\_from\_file($item); |
  |  | 436 | } |
  |  | 437 | } |
  |  | 438 | $message = implode("</br>", $new\_pipes); |
  |  | 439 | PIPES::add\_message($message); |
  |  | 440 | if (isset($\_GET['url'])) { |
  |  | 441 | if (isset($\_SERVER['HTTP\_REFERER'])) { |
  |  | 442 | $url = remove\_query\_arg(array('task', 'url'), $\_SERVER['HTTP\_REFERER']); |
  |  | 443 | header('Location: ' . $url); |
  |  | 444 | } else { |
  |  | 445 | echo "Oops! Something went wrong. Please go back to the previous page."; |
  |  | 446 | } |
  |  | 447 |  |
  | 293 | 448 | exit(); |
  | 294 |  | } elseif (~~$id > 0~~ ) { |
  |  | 449 | } elseif ($id > 0) { |
  | 295 | 450 | $url = admin\_url() . 'admin.php?page=' . PIPES::$\_\_page\_prefix . '.pipe&id=' . $id; |
  | 296 |  | header(~~'Location: ' . $url~~ ); |
  |  | 451 | header('Location: ' . $url); |
  | 297 | 452 | exit(); |
  | 298 | 453 | } |
* ## [wp-pipes/trunk/controllers/plugins.php](/changeset/3204551/wp-pipes/trunk/controllers/plugins.php "Show the changeset 3204551 restricted to wp-pipes/trunk/controllers/plugins.php")

  | [r1812495](/browser/wp-pipes/trunk/controllers/plugins.php?rev=1812495#L8 "Show revision 1812495 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/controllers/plugins.php?rev=3204551#L8 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | \*/ |
  | 9 | 9 | defined( 'PIPES\_CORE' ) or die( 'Restricted access' ); |
  |  | 10 |  |
  | 10 | 11 |  |
  | 11 | 12 | class PIPESControllerPlugins extends Controller { |
* ## [wp-pipes/trunk/controllers/settings.php](/changeset/3204551/wp-pipes/trunk/controllers/settings.php "Show the changeset 3204551 restricted to wp-pipes/trunk/controllers/settings.php")

  | [r1300954](/browser/wp-pipes/trunk/controllers/settings.php?rev=1300954#L8 "Show revision 1300954 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/controllers/settings.php?rev=3204551#L8 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 8 | 8 | \*/ |
  | 9 | 9 | defined( 'PIPES\_CORE' ) or die( 'Restricted access' ); |
  |  | 10 |  |
  | 10 | 11 |  |
  | 11 | 12 | class PIPESControllerSettings extends Controller { |
* ## [wp-pipes/trunk/cronjob.php](/changeset/3204551/wp-pipes/trunk/cronjob.php "Show the changeset 3204551 restricted to wp-pipes/trunk/cronjob.php")

  | [r1812495](/browser/wp-pipes/trunk/cronjob.php?rev=1812495#L24 "Show revision 1812495 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/cronjob.php?rev=3204551#L24 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 24 | 24 | require\_once OBGRAB\_HELPERS . 'common.php'; |
  | 25 | 25 | require\_once OBGRAB\_SITE . 'grab.php'; |
  |  | 26 |  |
  | 26 | 27 |  |
  | 27 | 28 | class ogbDebug { |
  | [‚Ä¶](/browser/wp-pipes/trunk/cronjob.php?rev=1812495#L237) | [‚Ä¶](/browser/wp-pipes/trunk/cronjob.php?rev=3204551#L238) |  |
  | 237 | 238 | public static function getGbParams() { |
  | 238 | 239 | global $gbParams; |
  |  | 240 |  |
  | 239 | 241 | if ( is\_object( $gbParams ) ) { |
  | 240 | 242 | return $gbParams; |
  | 241 | 243 | } |
  | 242 |  | $gbParams¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†= new stdClass(); |
  | 243 |  | $gbParams->cronjob\_active = get\_option( 'pipes\_cronjob\_active' ); |
  | 244 |  | $gbParams->active¬† ¬† ¬† ¬† ¬†= get\_option( 'pipes\_active' ); |
  | 245 |  | $gbParams->schedule¬† ¬† ¬† ¬†= get\_option( 'pipes\_schedule' ); |
  | 246 |  | $gbParams->start\_at¬† ¬† ¬† ¬†= get\_option( 'pipes\_start\_at' ); |
  | 247 |  | $gbParams->not\_use\_cache¬† = get\_option( 'pipes\_not\_use\_cache' ); |
  | 248 |  | self::udParams( $gbParams ); |
  | 249 |  |  |
  |  | 244 |  |
  |  | 245 | if(current\_user\_can( 'manage\_options' )) { |
  |  | 246 | $gbParams¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬†= new stdClass(); |
  |  | 247 | $gbParams->cronjob\_active = get\_option( 'pipes\_cronjob\_active' ); |
  |  | 248 | $gbParams->active¬† ¬† ¬† ¬† ¬†= get\_option( 'pipes\_active' ); |
  |  | 249 | $gbParams->schedule¬† ¬† ¬† ¬†= get\_option( 'pipes\_schedule' ); |
  |  | 250 | $gbParams->start\_at¬† ¬† ¬† ¬†= get\_option( 'pipes\_start\_at' ); |
  |  | 251 | $gbParams->not\_use\_cache¬† = get\_option( 'pipes\_not\_use\_cache' ); |
  |  | 252 | self::udParams( $gbParams ); |
  |  | 253 | } else { |
  |  | 254 | // Prevent unauthorized users from accessing information |
  |  | 255 | die('Access denied.'); |
  |  | 256 | } |
  |  | 257 |  |
  | 250 | 258 | return $gbParams; |
  | 251 | 259 | } |
  | [‚Ä¶](/browser/wp-pipes/trunk/cronjob.php?rev=1812495#L260) | [‚Ä¶](/browser/wp-pipes/trunk/cronjob.php?rev=3204551#L268) |  |
  | 260 | 268 | \*/ |
  | 261 | 269 | public static function udParams( &$params ) { |
  | 262 |  | global $wpdb; |
  | 263 |  | $a = explode( ':', $params->start\_at ); |
  | 264 |  | if ( $a[count( $a ) - 1] == '00' ) { |
  | 265 |  | return; |
  | 266 |  | } |
  | 267 |  | $params->start\_at = date( 'Y-m-d' ) . ' 01:00:00'; |
  | 268 |  | update\_option( 'pipes\_start\_at', $params->start\_at ); |
  | 269 |  | $udparams = json\_encode( $params ); |
  |  | 270 | // Valid Nonce Check |
  |  | 271 | if (isset($\_REQUEST['nonce\_token']) && wp\_verify\_nonce( $\_REQUEST['nonce\_token'], 'wp\_pipes\_action')) { |
  |  | 272 | // Check User Roles |
  |  | 273 | if(current\_user\_can( 'manage\_options' )) { |
  |  | 274 | global $wpdb; |
  |  | 275 | $a = explode( ':', $params->start\_at ); |
  |  | 276 | if ( $a[count( $a ) - 1] == '00' ) { |
  |  | 277 | return; |
  |  | 278 | } |
  |  | 279 | $params->start\_at = date( 'Y-m-d' ) . ' 01:00:00'; |
  |  | 280 | update\_option( 'pipes\_start\_at', $params->start\_at ); |
  |  | 281 | $udparams = json\_encode( $params ); |
  |  | 282 | } else { |
  |  | 283 | die('Access denied.'); |
  |  | 284 | } |
  |  | 285 | } else { |
  |  | 286 | // Prevent request if Nonce is invalid |
  |  | 287 | die('CSRF detection: Access denied.'); |
  |  | 288 | } |
  | 270 | 289 | } |
  | 271 | 290 |  |
  | [‚Ä¶](/browser/wp-pipes/trunk/cronjob.php?rev=1812495#L355) | [‚Ä¶](/browser/wp-pipes/trunk/cronjob.php?rev=3204551#L374) |  |
  | 355 | 374 | /\*Get global config\*/ |
  | 356 | 375 | $gbParams = self::getGbParams(); |
  |  | 376 |  |
  | 357 | 377 | if ( isset( $\_GET['x'] ) ) { |
  | 358 | 378 | \_e("\n\n<br /><i><b>File:</b>" . \_\_FILE\_\_ . ' <b>Line:</b>' . \_\_LINE\_\_ . "</i><br />\n\n"); |
* ## [wp-pipes/trunk/grab.php](/changeset/3204551/wp-pipes/trunk/grab.php "Show the changeset 3204551 restricted to wp-pipes/trunk/grab.php")

  | [r1812495](/browser/wp-pipes/trunk/grab.php?rev=1812495#L12 "Show revision 1812495 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/grab.php?rev=3204551#L12 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 |  |
  | 13 | 13 | if ( isset( $\_GET['x1'] ) ) { |
  | 14 |  | $c = ~~$\_GET['x1']~~; |
  |  | 14 | $c = sanitize\_text\_field( $\_GET['x1'] ); |
  | 15 | 15 | if ( $c == 1 ) { |
  | 16 | 16 | $c = 'utf-8'; |
  | 17 | 17 | } |
  | 18 |  | \_e('<meta http-equiv="content-type" content="text/html; charset=' . ~~$c~~ . '"/>'); |
  |  | 18 | \_e('<meta http-equiv="content-type" content="text/html; charset=' . esc\_attr( $c ) . '"/>'); |
  | 19 | 19 | } |
  | 20 | 20 | require\_once OBGRAB\_HELPERS . 'common.php'; |
* ## [wp-pipes/trunk/includes/client/ftp.php](/changeset/3204551/wp-pipes/trunk/includes/client/ftp.php "Show the changeset 3204551 restricted to wp-pipes/trunk/includes/client/ftp.php")

  | [r1595456](/browser/wp-pipes/trunk/includes/client/ftp.php?rev=1595456#L1612 "Show revision 1595456 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/includes/client/ftp.php?rev=3204551#L1612 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 1612 | 1612 | if (@preg\_match($regexp, $file, $regs)) |
  | 1613 | 1613 | { |
  | 1614 |  | $fType = (int) strpos("-dl", $regs[1]~~{0}~~); |
  |  | 1614 | $fType = (int) strpos("-dl", $regs[1][0]); |
  | 1615 | 1615 |  |
  | 1616 | 1616 | // $tmp\_array['line'] = $regs[0]; |
* ## [wp-pipes/trunk/includes/filesystem/path.php](/changeset/3204551/wp-pipes/trunk/includes/filesystem/path.php "Show the changeset 3204551 restricted to wp-pipes/trunk/includes/filesystem/path.php")

  | [r1595456](/browser/wp-pipes/trunk/includes/filesystem/path.php?rev=1595456#L141 "Show revision 1595456 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/includes/filesystem/path.php?rev=3204551#L141 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 141 | 141 | { |
  | 142 | 142 | // Read |
  | 143 |  | $parsed\_mode .= ($mode~~{$i}~~ & 04) ? "r" : "-"; |
  |  | 143 | $parsed\_mode .= ($mode[$i] & 04) ? "r" : "-"; |
  | 144 | 144 |  |
  | 145 | 145 | // Write |
  | 146 |  | $parsed\_mode .= ($mode~~{$i}~~ & 02) ? "w" : "-"; |
  |  | 146 | $parsed\_mode .= ($mode[$i] & 02) ? "w" : "-"; |
  | 147 | 147 |  |
  | 148 | 148 | // Execute |
  | 149 |  | $parsed\_mode .= ($mode~~{$i}~~ & 01) ? "x" : "-"; |
  |  | 149 | $parsed\_mode .= ($mode[$i] & 01) ? "x" : "-"; |
  | 150 | 150 | } |
  | 151 | 151 |  |
* ## [wp-pipes/trunk/includes/phputf8/ord.php](/changeset/3204551/wp-pipes/trunk/includes/phputf8/ord.php "Show the changeset 3204551 restricted to wp-pipes/trunk/includes/phputf8/ord.php")

  | [r1300954](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=1300954#L25 "Show revision 1300954 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=3204551#L25 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 25 | 25 | } |
  | 26 | 26 |  |
  | 27 |  | if ( ! isset( $chr~~{1}~~ ) ) { |
  |  | 27 | if ( ! isset( $chr[1] ) ) { |
  | 28 | 28 | trigger\_error( 'Short sequence - at least 2 bytes expected, only 1 seen' ); |
  | 29 | 29 |  |
  | [‚Ä¶](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=1300954#L31) | [‚Ä¶](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=3204551#L31) |  |
  | 31 | 31 | } |
  | 32 | 32 |  |
  | 33 |  | $ord1 = ord( $chr~~{1}~~ ); |
  |  | 33 | $ord1 = ord( $chr[1] ); |
  | 34 | 34 | if ( $ord0 >= 192 && $ord0 <= 223 ) { |
  | 35 | 35 | return ( $ord0 - 192 ) \* 64 |
  | [‚Ä¶](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=1300954#L37) | [‚Ä¶](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=3204551#L37) |  |
  | 37 | 37 | } |
  | 38 | 38 |  |
  | 39 |  | if ( ! isset( $chr~~{2}~~ ) ) { |
  |  | 39 | if ( ! isset( $chr[2] ) ) { |
  | 40 | 40 | trigger\_error( 'Short sequence - at least 3 bytes expected, only 2 seen' ); |
  | 41 | 41 |  |
  | 42 | 42 | return FALSE; |
  | 43 | 43 | } |
  | 44 |  | $ord2 = ord( $chr~~{2}~~ ); |
  |  | 44 | $ord2 = ord( $chr[2] ); |
  | 45 | 45 | if ( $ord0 >= 224 && $ord0 <= 239 ) { |
  | 46 | 46 | return ( $ord0 - 224 ) \* 4096 |
  | [‚Ä¶](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=1300954#L49) | [‚Ä¶](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=3204551#L49) |  |
  | 49 | 49 | } |
  | 50 | 50 |  |
  | 51 |  | if ( ! isset( $chr~~{3}~~ ) ) { |
  |  | 51 | if ( ! isset( $chr[3] ) ) { |
  | 52 | 52 | trigger\_error( 'Short sequence - at least 4 bytes expected, only 3 seen' ); |
  | 53 | 53 |  |
  | 54 | 54 | return FALSE; |
  | 55 | 55 | } |
  | 56 |  | $ord3 = ord( $chr~~{3}~~ ); |
  |  | 56 | $ord3 = ord( $chr[3] ); |
  | 57 | 57 | if ( $ord0 >= 240 && $ord0 <= 247 ) { |
  | 58 | 58 | return ( $ord0 - 240 ) \* 262144 |
  | [‚Ä¶](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=1300954#L63) | [‚Ä¶](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=3204551#L63) |  |
  | 63 | 63 | } |
  | 64 | 64 |  |
  | 65 |  | if ( ! isset( $chr~~{4}~~ ) ) { |
  |  | 65 | if ( ! isset( $chr[4] ) ) { |
  | 66 | 66 | trigger\_error( 'Short sequence - at least 5 bytes expected, only 4 seen' ); |
  | 67 | 67 |  |
  | 68 | 68 | return FALSE; |
  | 69 | 69 | } |
  | 70 |  | $ord4 = ord( $chr~~{4}~~ ); |
  |  | 70 | $ord4 = ord( $chr[4] ); |
  | 71 | 71 | if ( $ord0 >= 248 && $ord0 <= 251 ) { |
  | 72 | 72 | return ( $ord0 - 248 ) \* 16777216 |
  | [‚Ä¶](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=1300954#L77) | [‚Ä¶](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=3204551#L77) |  |
  | 77 | 77 | } |
  | 78 | 78 |  |
  | 79 |  | if ( ! isset( $chr~~{5}~~ ) ) { |
  |  | 79 | if ( ! isset( $chr[5] ) ) { |
  | 80 | 80 | trigger\_error( 'Short sequence - at least 6 bytes expected, only 5 seen' ); |
  | 81 | 81 |  |
  | [‚Ä¶](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=1300954#L88) | [‚Ä¶](/browser/wp-pipes/trunk/includes/phputf8/ord.php?rev=3204551#L88) |  |
  | 88 | 88 | + ( $ord3 - 128 ) \* 4096 |
  | 89 | 89 | + ( $ord4 - 128 ) \* 64 |
  | 90 |  | + ( ord( $chr~~{5}~~ ) - 128 ); |
  |  | 90 | + ( ord( $chr[5] ) - 128 ); |
  | 91 | 91 | } |
  | 92 | 92 |  |
* ## [wp-pipes/trunk/includes/phputf8/utf8.php](/changeset/3204551/wp-pipes/trunk/includes/phputf8/utf8.php "Show the changeset 3204551 restricted to wp-pipes/trunk/includes/phputf8/utf8.php")

  | [r1300954](/browser/wp-pipes/trunk/includes/phputf8/utf8.php?rev=1300954#L36 "Show revision 1300954 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/includes/phputf8/utf8.php?rev=3204551#L36 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 36 | 36 | \*/ |
  | 37 | 37 | if ( extension\_loaded( 'mbstring' ) ) { |
  | 38 |  | if ( ini\_get( 'mbstring.func\_overload' ) ~~& MB\_OVERLOAD\_STRING~~ ) { |
  |  | 38 | if ( ini\_get( 'mbstring.func\_overload' ) ) { |
  | 39 | 39 | trigger\_error( 'String functions are overloaded by mbstring', E\_USER\_ERROR ); |
  | 40 | 40 | } |
* ## [wp-pipes/trunk/includes/phputf8/utils/bad.php](/changeset/3204551/wp-pipes/trunk/includes/phputf8/utils/bad.php "Show the changeset 3204551 restricted to wp-pipes/trunk/includes/phputf8/utils/bad.php")

  | [r1812495](/browser/wp-pipes/trunk/includes/phputf8/utils/bad.php?rev=1812495#L273 "Show revision 1812495 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/includes/phputf8/utils/bad.php?rev=3204551#L273 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 273 | 273 | for ( $i = 0; $i < $len; $i ++ ) { |
  | 274 | 274 |  |
  | 275 |  | $in = ord( $str~~{$i}~~ ); |
  |  | 275 | $in = ord( $str[$i] ); |
  | 276 | 276 |  |
  | 277 | 277 | if ( $mState == 0 ) { |
* ## [wp-pipes/trunk/includes/phputf8/utils/unicode.php](/changeset/3204551/wp-pipes/trunk/includes/phputf8/utils/unicode.php "Show the changeset 3204551 restricted to wp-pipes/trunk/includes/phputf8/utils/unicode.php")

  | [r1812495](/browser/wp-pipes/trunk/includes/phputf8/utils/unicode.php?rev=1812495#L49 "Show revision 1812495 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/includes/phputf8/utils/unicode.php?rev=3204551#L49 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 49 | 49 | for ( $i = 0; $i < $len; $i ++ ) { |
  | 50 | 50 |  |
  | 51 |  | $in = ord( $str~~{$i}~~ ); |
  |  | 51 | $in = ord( $str[$i] ); |
  | 52 | 52 |  |
  | 53 | 53 | if ( $mState == 0 ) { |
* ## [wp-pipes/trunk/includes/phputf8/utils/validation.php](/changeset/3204551/wp-pipes/trunk/includes/phputf8/utils/validation.php "Show the changeset 3204551 restricted to wp-pipes/trunk/includes/phputf8/utils/validation.php")

  | [r1300954](/browser/wp-pipes/trunk/includes/phputf8/utils/validation.php?rev=1300954#L43 "Show revision 1300954 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/includes/phputf8/utils/validation.php?rev=3204551#L43 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 43 | 43 | for ( $i = 0; $i < $len; $i ++ ) { |
  | 44 | 44 |  |
  | 45 |  | $in = ord( $str~~{$i}~~ ); |
  |  | 45 | $in = ord( $str[$i] ); |
  | 46 | 46 |  |
  | 47 | 47 | if ( $mState == 0 ) { |
* ## [wp-pipes/trunk/includes/registry/format/ini.php](/changeset/3204551/wp-pipes/trunk/includes/registry/format/ini.php "Show the changeset 3204551 restricted to wp-pipes/trunk/includes/registry/format/ini.php")

  | [r1300954](/browser/wp-pipes/trunk/includes/registry/format/ini.php?rev=1300954#L115 "Show revision 1300954 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/includes/registry/format/ini.php?rev=3204551#L115 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 115 | 115 |  |
  | 116 | 116 | // Ignore empty lines and comments. |
  | 117 |  | if (empty($line) || ($line~~{0}~~ == ';')) |
  |  | 117 | if (empty($line) || ($line[0] == ';')) |
  | 118 | 118 | { |
  | 119 | 119 | continue; |
  | [‚Ä¶](/browser/wp-pipes/trunk/includes/registry/format/ini.php?rev=1300954#L132) | [‚Ä¶](/browser/wp-pipes/trunk/includes/registry/format/ini.php?rev=3204551#L132) |  |
  | 132 | 132 | } |
  | 133 | 133 | } |
  | 134 |  | elseif ($line~~{0}~~ == '[') |
  |  | 134 | elseif ($line[0] == '[') |
  | 135 | 135 | { |
  | 136 | 136 | continue; |
* ## [wp-pipes/trunk/includes/string/string.php](/changeset/3204551/wp-pipes/trunk/includes/string/string.php "Show the changeset 3204551 restricted to wp-pipes/trunk/includes/string/string.php")

  | [r1300954](/browser/wp-pipes/trunk/includes/string/string.php?rev=1300954#L785 "Show revision 1300954 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/includes/string/string.php?rev=3204551#L785 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 785 | 785 | for ($i = 0; $i < $len; $i++) |
  | 786 | 786 | { |
  | 787 |  | $in = ord($str~~{$i}~~); |
  |  | 787 | $in = ord($str[$i]); |
  | 788 | 788 |  |
  | 789 | 789 | if ($mState == 0) |
* ## [wp-pipes/trunk/install.pipes.php](/changeset/3204551/wp-pipes/trunk/install.pipes.php "Show the changeset 3204551 restricted to wp-pipes/trunk/install.pipes.php")

  | [r1722544](/browser/wp-pipes/trunk/install.pipes.php?rev=1722544#L1 "Show revision 1722544 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/install.pipes.php?rev=3204551#L1 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | <?php |
  |  | 1 | mkm<?php |
  | 2 | 2 | /\*\* |
  | 3 | 3 | \* @package¬† ¬† ¬† ¬† ¬† WP Pipes plugin - PIPES |
  | [‚Ä¶](/browser/wp-pipes/trunk/install.pipes.php?rev=1722544#L29) | [‚Ä¶](/browser/wp-pipes/trunk/install.pipes.php?rev=3204551#L29) |  |
  | 29 | 29 |  |
  | 30 | 30 | #-------------------------------------------------- |
  | 31 |  | # Create Items table |
  |  | 31 | # Create Items table |
  | 32 | 32 | #-------------------------------------------------- |
  | 33 | 33 |  |
* ## [wp-pipes/trunk/models/pipe.php](/changeset/3204551/wp-pipes/trunk/models/pipe.php "Show the changeset 3204551 restricted to wp-pipes/trunk/models/pipe.php")

  | [r1812495](/browser/wp-pipes/trunk/models/pipe.php?rev=1812495#L500 "Show revision 1812495 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/models/pipe.php?rev=3204551#L500 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 500 | 500 | if ( $jdata['name'] == '' ) { |
  | 501 | 501 | $res->msg¬† ¬† ¬†= 'Please input Title field!'; |
  | 502 |  | ~~$res->typemsg = 'Warning';~~ |
  | 503 |  |  |
  |  | 502 | // Display warning msg |
  |  | 503 | $\_SESSION['PIPES']['messages'][] = array('type' => 'warning', 'msg' => $res->msg); |
  | 504 | 504 | return $res; |
  | 505 | 505 | } |
  | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=1812495#L514) | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=3204551#L514) |  |
  | 514 | 514 | $jdata['engine\_params'] = $this->arrToStr( $post['engine']['params'] ); |
  | 515 | 515 | } |
  |  | 516 |  |
  |  | 517 | // Check if engine or adapter is empty and show the msg |
  |  | 518 | if (empty($jdata['engine']) || empty($jdata['adapter'])) { |
  |  | 519 | $res->msg = 'Engine or Adapter is empty. Please select them and then save the data.'; |
  |  | 520 | // Display Error msg |
  |  | 521 | $\_SESSION['PIPES']['messages'][] = array('type' => 'error', 'msg' => $res->msg); |
  |  | 522 | return $res; |
  |  | 523 | } |
  |  | 524 |  |
  |  | 525 |  |
  | 516 | 526 |  |
  | 517 | 527 | if ( ! isset( $jdata['id'] ) || ! $jdata['id'] ) { |
  | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=1812495#L547) | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=3204551#L557) |  |
  | 547 | 557 | } |
  | 548 | 558 |  |
  |  | 559 |  |
  |  | 560 |  |
  | 549 | 561 | if ( @$jdata['input\_default'] != '' ) { |
  | 550 | 562 | $file = OBGRAB\_HELPERS . 'processors.php'; |
  | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=1812495#L561) | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=3204551#L573) |  |
  | 561 | 573 | $res->id¬† = $jdata['id']; |
  | 562 | 574 | $res->msg = sprintf( 'Pipe#%s saved. You can click <span class="label label-primary"><i class="fa fa-flask" title=""></i> Test this Pipe</span> button to test the results.', $jdata['id'] ); |
  | 563 |  |  |
  |  | 575 | // Display successfully |
  |  | 576 | $\_SESSION['PIPES']['messages'][] = array('type' => 'message', 'msg' => $res->msg); |
  | 564 | 577 | return $res; |
  | 565 | 578 | } |
  | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=1812495#L736) | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=3204551#L749) |  |
  | 736 | 749 | function getListEngine( $default, $disabled = false ) { |
  | 737 | 750 | $rows = $this->getAddons( 'engine' ); |
  |  | 751 |  |
  | 738 | 752 | // if there is only one engine, set it as default |
  | 739 | 753 | // @TODO: it doens't load params |
  | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=1812495#L753) | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=3204551#L767) |  |
  | 753 | 767 | function getListAdapter( $default, $disabled = false ) { |
  | 754 | 768 | $rows = $this->getAddons( 'adapter' ); |
  |  | 769 |  |
  |  | 770 |  |
  | 755 | 771 | // if there is only one adapter, set it as default |
  | 756 | 772 | // @TODO: it doens't load params |
  | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=1812495#L764) | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=3204551#L780) |  |
  | 764 | 780 | $first¬† = \_\_( '- Select a Destination -' ); |
  | 765 | 781 | $select = $this->getHtmlList( $select, $rows, $default, $first ); |
  |  | 782 |  |
  | 766 | 783 |  |
  | 767 | 784 | return $select; |
  | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=1812495#L877) | [‚Ä¶](/browser/wp-pipes/trunk/models/pipe.php?rev=3204551#L894) |  |
  | 877 | 894 | global $mainframe, $option; |
  | 878 | 895 | $order¬† ¬† ¬†= $mainframe->getUserStateFromRequest( $option . '.pipes.order', 'filter\_order', 'inherit', 'cmd' ); |
  | 879 |  | $order\_Dir = $mainframe->getUserStateFromRequest( $option . '.pipes.order\_Dir', 'filter\_order\_Dir', 'ASC', 'word' ); |
  |  | 896 | $order¬† ¬† ¬†= sanitize\_sql\_orderby( $order ); |
  |  | 897 | $order\_Dir = strtoupper( $mainframe->getUserStateFromRequest( $option . '.pipes.order\_Dir', 'filter\_order\_Dir', 'ASC', 'word' ) ); |
  |  | 898 | if ( ! in\_array( $order\_Dir, [ 'DESC', 'ASC' ] ) ) { |
  |  | 899 | $order\_Dir = 'ASC'; |
  |  | 900 | } |
  | 880 | 901 |  |
  | 881 | 902 | return array( $order, $order\_Dir ); |
* ## [wp-pipes/trunk/models/settings.php](/changeset/3204551/wp-pipes/trunk/models/settings.php "Show the changeset 3204551 restricted to wp-pipes/trunk/models/settings.php")

  | [r1812495](/browser/wp-pipes/trunk/models/settings.php?rev=1812495#L1 "Show revision 1812495 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/models/settings.php?rev=3204551#L1 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  |  | 2 |  |
  | 2 | 3 | /\*\* |
  | 3 | 4 | \* @package¬† ¬† ¬† ¬† ¬† ¬† ¬† WP Pipes plugin - PIPES |
  | [‚Ä¶](/browser/wp-pipes/trunk/models/settings.php?rev=1812495#L7) | [‚Ä¶](/browser/wp-pipes/trunk/models/settings.php?rev=3204551#L8) |  |
  | 7 | 8 | \* @license¬† ¬† ¬† ¬† ¬† ¬† ¬† GNU/GPL v3, see LICENSE |
  | 8 | 9 | \*/ |
  | 9 |  | defined(~~'PIPES\_CORE' ) or die( 'Restricted access'~~ ); |
  |  | 10 | defined('PIPES\_CORE') or die('Restricted access'); |
  | 10 | 11 | // require\_once dirname(dirname(dirname(\_\_FILE\_\_))).DS.'includes'.DS.'model.php'; |
  | 11 | 12 | // require\_once ''; |
  | 12 |  | if (~~! class\_exists( 'WP\_List\_Table' )~~ ) { |
  | 13 |  | require\_once(~~ABSPATH . 'wp-admin/includes/class-wp-list-table.php'~~ ); |
  |  | 13 | if (!class\_exists('WP\_List\_Table')) { |
  |  | 14 | require\_once(ABSPATH . 'wp-admin/includes/class-wp-list-table.php'); |
  | 14 | 15 | } |
  | 15 |  | class PIPESModelSettings extends Model { |
  |  | 16 | class PIPESModelSettings extends Model |
  |  | 17 | { |
  | 16 | 18 |  |
  | 17 |  | public function getTable() { |
  | 18 |  | require\_once dirname( dirname( \_\_FILE\_\_ ) ) . DS . 'tables' . DS . 'settings.php'; |
  |  | 19 | public function getTable() |
  |  | 20 | { |
  |  | 21 | require\_once dirname(dirname(\_\_FILE\_\_)) . DS . 'tables' . DS . 'settings.php'; |
  | 19 | 22 | $itemsListTable = new PIPES\_Settings\_List\_Table(); |
  | 20 | 23 | //Fetch, prepare, sort, and filter our data... |
  | [‚Ä¶](/browser/wp-pipes/trunk/models/settings.php?rev=1812495#L25) | [‚Ä¶](/browser/wp-pipes/trunk/models/settings.php?rev=3204551#L28) |  |
  | 25 | 28 | } |
  | 26 | 29 |  |
  | 27 |  | public function save() { |
  |  | 30 | public function save() |
  |  | 31 | { |
  | 28 | 32 | global $wpdb; |
  | 29 | 33 | $res¬† ¬† ¬† ¬† ¬† = new stdClass(); |
  | [‚Ä¶](/browser/wp-pipes/trunk/models/settings.php?rev=1812495#L32) | [‚Ä¶](/browser/wp-pipes/trunk/models/settings.php?rev=3204551#L36) |  |
  | 32 | 36 | $res->typemsg = 'message'; |
  | 33 | 37 |  |
  | 34 |  | if ( isset( $\_POST ) ) { |
  | 35 |  | foreach ( $\_POST as $key => $value ) { |
  | 36 |  | if ( $key != 'task' && $key != 'submit' ) { |
  | 37 |  | if ( 'pipes\_start\_at' == $key ) { |
  | 38 |  | $value .= ' ' . ( ( sanitize\_text\_field($\_POST['pipes\_hh']) != '' ) ? sanitize\_text\_field($\_POST['pipes\_hh']) : '00' ) . ':' . ( ( $\_POST['pipes\_mn'] != '' ) ? sanitize\_text\_field($\_POST['pipes\_mn']) : '00' ); |
  | 39 |  | $value = strtotime( $value ); |
  |  | 38 | if (!isset($\_POST['nonce\_token']) || !wp\_verify\_nonce($\_POST['nonce\_token'], 'nonce\_token')) { |
  |  | 39 | $res->msg = \_\_("Nonce verification failed!"); |
  |  | 40 | $\_SESSION['PIPES']['messages'][] = array('type' => 'error', 'msg' => $res->msg); |
  |  | 41 | } else { |
  |  | 42 | foreach ($\_POST as $key => $value) { |
  |  | 43 | if ($key !== 'task' && $key !== 'submit' && $key !== 'nonce\_token') { |
  |  | 44 | if ('pipes\_start\_at' == $key) { |
  |  | 45 | $value .= ' ' . (sanitize\_text\_field($\_POST['pipes\_hh']) != '' ? sanitize\_text\_field($\_POST['pipes\_hh']) : '00') . ':' . ($\_POST['pipes\_mn'] != '' ? sanitize\_text\_field($\_POST['pipes\_mn']) : '00'); |
  |  | 46 | $value = strtotime($value); |
  |  | 47 | } else { |
  |  | 48 | $value = sanitize\_text\_field($value); |
  | 40 | 49 | } |
  | 41 | 50 | update\_option($key, $value); |
  |  | 51 | $res->msg = \_\_('Settings saved.'); |
  | 42 | 52 | } |
  | 43 | 53 | } |
  | 44 |  |  |
  | 45 |  | $res->msg = \_\_( 'Settings saved.' ); |
  | 46 |  |  |
  | 47 |  | return $res; |
  |  | 54 | $\_SESSION['PIPES']['messages'][] = array('type' => 'message', 'msg' => $res->msg); |
  | 48 | 55 | } |
  | 49 |  |  |
  |  | 56 | return $res; |
  | 50 | 57 | } |
  | 51 | 58 | } |
* ## [wp-pipes/trunk/pipes.php](/changeset/3204551/wp-pipes/trunk/pipes.php "Show the changeset 3204551 restricted to wp-pipes/trunk/pipes.php")

  | [r2952003](/browser/wp-pipes/trunk/pipes.php?rev=2952003#L5 "Show revision 2952003 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/pipes.php?rev=3204551#L5 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* Plugin URI: http://thimpress.com/shop/pipes/ |
  | 6 | 6 | \* Description: WP Pipes plugin works the same way as Yahoo Pipes or Zapier does, give your Pipes input and get output as your needs. |
  | 7 |  | \* Version: 1.~~33~~ |
  |  | 7 | \* Version: 1.4.2 |
  | 8 | 8 | \* Author: ThimPress |
  | 9 | 9 | \* Author URI: http://thimpress.com |
  | 10 | 10 | \* Requires at least: 5.8 |
  | 11 |  | \* Tested up to: 6.~~3~~ |
  |  | 11 | \* Tested up to: 6.7.1 |
  | 12 | 12 | \* Requires PHP: 7.4 |
  | 13 | 13 | \* Text Domain: pipes |
* ## [wp-pipes/trunk/plugins/processors/cut\_introtext/cut\_introtext.php](/changeset/3204551/wp-pipes/trunk/plugins/processors/cut_introtext/cut_introtext.php "Show the changeset 3204551 restricted to wp-pipes/trunk/plugins/processors/cut_introtext/cut_introtext.php")

  | [r1812495](/browser/wp-pipes/trunk/plugins/processors/cut_introtext/cut_introtext.php?rev=1812495#L135 "Show revision 1812495 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/plugins/processors/cut_introtext/cut_introtext.php?rev=3204551#L135 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 135 | 135 | $end\_sentence¬† = false; |
  | 136 | 136 | while ( $i < strlen( $text ) ) { |
  | 137 |  | $symbol = $text~~{$i}~~; |
  |  | 137 | $symbol = $text[$i]; |
  | 138 | 138 | $result .= $symbol; |
  | 139 | 139 | $pos ++; |
  | [‚Ä¶](/browser/wp-pipes/trunk/plugins/processors/cut_introtext/cut_introtext.php?rev=1812495#L142) | [‚Ä¶](/browser/wp-pipes/trunk/plugins/processors/cut_introtext/cut_introtext.php?rev=3204551#L142) |  |
  | 142 | 142 | if ( $finish\_sentence == 0 && in\_array( $symbol, array( ' ' ) ) ) { |
  | 143 | 143 | break; |
  | 144 |  | } elseif ( in\_array( $symbol, array( '.', "\n" ) ) && self::isEndCentence( $text~~{$i + 1}~~ ) ) { |
  |  | 144 | } elseif ( in\_array( $symbol, array( '.', "\n" ) ) && self::isEndCentence( $text[$i + 1] ) ) { |
  | 145 | 145 | break; |
  | 146 | 146 | } |
* ## [wp-pipes/trunk/post.html.php](/changeset/3204551/wp-pipes/trunk/post.html.php "Show the changeset 3204551 restricted to wp-pipes/trunk/post.html.php")

  | [r1812495](/browser/wp-pipes/trunk/post.html.php?rev=1812495#L1 "Show revision 1812495 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/post.html.php?rev=3204551#L1 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  |  | 2 |  |
  | 2 | 3 | /\*\* |
  | 3 | 4 | \* @package¬† ¬† ¬† ¬† ¬† WP Pipes plugin - PIPES |
  | [‚Ä¶](/browser/wp-pipes/trunk/post.html.php?rev=1812495#L8) | [‚Ä¶](/browser/wp-pipes/trunk/post.html.php?rev=3204551#L9) |  |
  | 8 | 9 | \*/ |
  | 9 | 10 |  |
  | 10 |  | defined(~~'\_JEXEC' ) or die( 'Restricted access'~~ ); |
  | 11 |  | $id = filter\_input(~~INPUT\_GET, 'id'~~ ); |
  | 12 |  | $params\_pipes = ogb\_common::get\_param\_pipe(~~$id, 'image'~~ ); |
  | 13 |  | foreach (~~$params\_pipes as $params\_pipe~~ ) { |
  | 14 |  | $param\_array = json\_decode(~~$params\_pipe->params~~ ); |
  | 15 |  | if (~~@$param\_array->empty\_folder~~ ) { |
  | 16 |  | ogb\_common::empty\_folder(~~$param\_array->image\_local~~ ); |
  |  | 11 | defined('\_JEXEC') or die('Restricted access'); |
  |  | 12 | $id = filter\_input(INPUT\_GET, 'id'); |
  |  | 13 | $params\_pipes = ogb\_common::get\_param\_pipe($id, 'image'); |
  |  | 14 | foreach ($params\_pipes as $params\_pipe) { |
  |  | 15 | $param\_array = json\_decode($params\_pipe->params); |
  |  | 16 | if (@$param\_array->empty\_folder) { |
  |  | 17 | ogb\_common::empty\_folder($param\_array->image\_local); |
  | 17 | 18 | } |
  | 18 | 19 | } |
  | 19 | 20 |  |
  | 20 | 21 | $host = ''; |
  |  | 22 |  |
  |  | 23 |  |
  | 21 | 24 | ?> |
  | 22 | 25 | <html> |
  |  | 26 |  |
  | 23 | 27 | <head> |
  | 24 |  | <link rel='stylesheet' id='pipes-bootstrap-min-css' href='<?php esc\_html\_e(plugin\_dir\_url(~~PIPES\_MAIN\_FILE\_PATH~~ )); ?>/assets/css/bootstrap.min.css' type='text/css' media='all' /> |
  |  | 28 | <link rel='stylesheet' id='pipes-bootstrap-min-css' href='<?php esc\_html\_e(plugin\_dir\_url(PIPES\_MAIN\_FILE\_PATH)); ?>/assets/css/bootstrap.min.css' type='text/css' media='all' /> |
  | 25 | 29 | <script type='text/javascript' src='<?php \_e(get\_site\_url()); ?>/wp-includes/js/jquery/jquery.js?ver=1.10.2'></script> |
  | 26 | 30 | <script type='text/javascript' src='<?php \_e(get\_site\_url()); ?>/wp-includes/js/jquery/jquery-migrate.js?ver=1.2.1'></script> |
  | 27 |  | <script src="<?php \_e(plugin\_dir\_url(~~PIPES\_MAIN\_FILE\_PATH~~ ) . '/assets/js/ogb-lib.js'); ?>"></script> |
  | 28 |  | <script src="<?php \_e(plugin\_dir\_url(~~PIPES\_MAIN\_FILE\_PATH~~ ) . '/assets/js/post.js'); ?>"></script> |
  |  | 31 | <script src="<?php \_e(plugin\_dir\_url(PIPES\_MAIN\_FILE\_PATH) . '/assets/js/ogb-lib.js'); ?>"></script> |
  |  | 32 | <script src="<?php \_e(plugin\_dir\_url(PIPES\_MAIN\_FILE\_PATH) . '/assets/js/post.js'); ?>"></script> |
  | 29 | 33 | <script type="text/javascript"> |
  | 30 |  | <?php \_e("ogbHost='{$host}';ogb\_id={$id}"~~.(isset($\_GET['u'])?',ogb\_ud=true':'').';');~~?> |
  | 31 |  | window.addEventListener('load', function() { |
  |  | 34 | <?php \_e("ogbHost='{$host}';ogb\_id={$id}"¬†. (isset($\_GET['u']) ? ',ogb\_ud=true' : '') . ';'); ?> |
  |  | 35 | window.addEventListener('load', function() { |
  | 32 | 36 | ogbPost.onload(); |
  | 33 | 37 | }, true); |
  | 34 | 38 | </script> |
  | 35 |  | <script type='text/javascript' src='<?php \_e(plugin\_dir\_url(~~PIPES\_MAIN\_FILE\_PATH~~ )); ?>/assets/js/bootstrap.min.js'></script> |
  |  | 39 | <script type='text/javascript' src='<?php \_e(plugin\_dir\_url(PIPES\_MAIN\_FILE\_PATH)); ?>/assets/js/bootstrap.min.js'></script> |
  | 36 | 40 | </head> |
  |  | 41 |  |
  | 37 | 42 | <body> |
  | 38 |  | <div class="foobla"> |
  | 39 |  | <div id="ogb\_res">&nbsp;</div> |
  | 40 |  | </div> |
  |  | 43 | <div class="foobla"> |
  |  | 44 | <div id="ogb\_res">&nbsp;</div> |
  |  | 45 | </div> |
  | 41 | 46 | </body> |
  |  | 47 |  |
  | 42 | 48 | </html><?php exit(); ?> |
* ## [wp-pipes/trunk/readme.txt](/changeset/3204551/wp-pipes/trunk/readme.txt "Show the changeset 3204551 restricted to wp-pipes/trunk/readme.txt")

  | [r2951999](/browser/wp-pipes/trunk/readme.txt?rev=2951999#L3 "Show revision 2951999 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/readme.txt?rev=3204551#L3 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Donate link: http://thimpress.com/ |
  | 4 | 4 | Tags: pipes, rss, syndicate, syndication, auto post, aggregation, aggregate, aggregator, autoblog, autoblogging, curating, curation, curated content, content curation, autopost, posts, seo, automation, automatic, import, export, migrate, migrator, migration, blogger, blogspot, feed to post, rss to post |
  | 5 |  | Requires at least: 5.8 |
  | 6 |  | Tested up to: 6.3 |
  | 7 |  | Stable tag: 1.4.1 |
  |  | 5 | Requires at least: 6.0 |
  |  | 6 | Tested up to: 6.7.1 |
  |  | 7 | Requires PHP: 7.0 |
  |  | 8 | Stable tag: trunk |
  | 8 | 9 | License: GPLv2 or later |
  | 9 | 10 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | [‚Ä¶](/browser/wp-pipes/trunk/readme.txt?rev=2951999#L38) | [‚Ä¶](/browser/wp-pipes/trunk/readme.txt?rev=3204551#L39) |  |
  | 38 | 39 | \* \*\*RSS Feed to post\*\*: a powerful RSS Feed to Post solution, get newsfeed from RSS Feed source and store into your WordPress as posts. |
  | 39 | 40 | \* \*\*RSS Feed Creator\*\*: getting Posts from WordPress Posts > Export as RSS Feed. |
  | 40 |  | \* \*\*iTunes Podcast creator\*\*: get Posts from WordPress Posts > Export as iTunes Podcast, |
  |  | 41 | \* \*\*iTunes Podcast creator\*\*: get Posts from WordPress Posts > Export as iTunes Podcast, |
  | 41 | 42 | \* \*\*Google XML Sitemap generator\*\*: get Posts from WordPress Posts > Export as Google XML Sitemap |
  | 42 | 43 | \* \*\*WooCommerce RSS Feed creator\*\*: get WooCommerce Products > Export as RSS Feed or Google XML Sitemap |
  | [‚Ä¶](/browser/wp-pipes/trunk/readme.txt?rev=2951999#L149) | [‚Ä¶](/browser/wp-pipes/trunk/readme.txt?rev=3204551#L150) |  |
  | 149 | 150 |  |
  | 150 | 151 | == Changelog == |
  |  | 152 |  |
  |  | 153 | = 1.4.2 = |
  |  | 154 | ~ Fixed: security. |
  |  | 155 |  |
  |  | 156 | = 1.4.1 = |
  |  | 157 | + Fixed: security CSRF. |
  |  | 158 |  |
  |  | 159 | = 1.4.0 = |
  |  | 160 | + Fixed: security sql inject. |
  |  | 161 |  |
  | 151 | 162 | = 1.33 = |
  | 152 | 163 | + Added hook to allow putting more configs of Post Destination with other plugins. |
* ## [wp-pipes/trunk/tables/pipes.php](/changeset/3204551/wp-pipes/trunk/tables/pipes.php "Show the changeset 3204551 restricted to wp-pipes/trunk/tables/pipes.php")

  | [r1812495](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L1 "Show revision 1812495 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L1 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  |  | 2 |  |
  | 2 | 3 | /\*\* |
  | 3 | 4 | \* @package¬† ¬† ¬† ¬† ¬† ¬† ¬† WP Pipes plugin - PIPES |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L7) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L8) |  |
  | 7 | 8 | \* @license¬† ¬† ¬† ¬† ¬† ¬† ¬† GNU/GPL v3, see LICENSE |
  | 8 | 9 | \*/ |
  | 9 |  | defined(~~'PIPES\_CORE' ) or die( 'Restricted access'~~ ); |
  | 10 |  |  |
  | 11 |  | if (~~! class\_exists( 'WP\_List\_Table' )~~ ) { |
  | 12 |  | require\_once(~~ABSPATH . 'wp-admin/includes/class-wp-list-table.php'~~ ); |
  |  | 10 | defined('PIPES\_CORE') or die('Restricted access'); |
  |  | 11 |  |
  |  | 12 | if (!class\_exists('WP\_List\_Table')) { |
  |  | 13 | require\_once(ABSPATH . 'wp-admin/includes/class-wp-list-table.php'); |
  | 13 | 14 | } |
  | 14 | 15 |  |
  | 15 |  | class Lo\_Items\_List\_Table extends WP\_List\_Table { |
  |  | 16 | class Lo\_Items\_List\_Table extends WP\_List\_Table |
  |  | 17 | { |
  | 16 | 18 |  |
  | 17 | 19 | public $data = array(); |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L19) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L21) |  |
  | 19 | 21 | public $messages = ''; |
  | 20 | 22 |  |
  | 21 |  | function \_\_construct( $args = array() ) { |
  | 22 |  | parent::\_\_construct( array( |
  |  | 23 | function \_\_construct($args = array()) |
  |  | 24 | { |
  |  | 25 | parent::\_\_construct(array( |
  | 23 | 26 | 'singular' => 'item', |
  | 24 | 27 | 'plural'¬† ¬†=> 'items', |
  | 25 |  | 'screen'¬† ¬†=> isset(~~$args['screen']~~ ) ? $args['screen'] : null, |
  |  | 28 | 'screen'¬† ¬†=> isset($args['screen']) ? $args['screen'] : null, |
  | 26 | 29 | 'ajax'¬† ¬† ¬†=> false |
  | 27 |  | ) ); |
  | 28 |  | add\_filter( "manage\_{$this->screen->id}\_columns", array( $this, 'get\_columns' ), 0 ); |
  | 29 |  | } |
  | 30 |  |  |
  | 31 |  | function column\_default( $item, $column\_name ) { |
  | 32 |  | switch ( $column\_name ) { |
  |  | 30 | )); |
  |  | 31 | add\_filter("manage\_{$this->screen->id}\_columns", array($this, 'get\_columns'), 0); |
  |  | 32 | } |
  |  | 33 |  |
  |  | 34 | function column\_default($item, $column\_name) |
  |  | 35 | { |
  |  | 36 | switch ($column\_name) { |
  | 33 | 37 | case 'name': |
  | 34 | 38 | case 'engine': |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L38) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L42) |  |
  | 38 | 42 | return $item[$column\_name]; |
  | 39 | 43 | default: |
  | 40 |  | return print\_r( $column\_name, true ); //Show the whole array for troubleshooting purposes |
  | 41 |  | } |
  | 42 |  | } |
  | 43 |  |  |
  | 44 |  | function column\_title( $item ) { |
  |  | 44 | return print\_r($column\_name, true); //Show the whole array for troubleshooting purposes |
  |  | 45 | } |
  |  | 46 | } |
  |  | 47 |  |
  |  | 48 | function column\_title($item) |
  |  | 49 | { |
  | 45 | 50 | //Build row actions |
  | 46 | 51 | $actions = array( |
  | 47 |  | 'edit'¬† ¬†=> sprintf(~~'<a href="?page=%s&task=%s&id=%s">Edit</a>', sanitize\_text\_field($\_REQUEST['page']), 'edit', $item['id']~~ ), |
  | 48 |  | 'delete' => sprintf(~~'<a href="?page=%s&task=%s&id=%s">Delete</a>', sanitize\_text\_field($\_REQUEST['page']), 'delete', $item['id']~~ ), |
  |  | 52 | 'edit'¬† ¬†=> sprintf('<a href="?page=%s&task=%s&id=%s">Edit</a>', sanitize\_text\_field($\_REQUEST['page']), 'edit', $item['id']), |
  |  | 53 | 'delete' => sprintf('<a href="?page=%s&task=%s&id=%s">Delete</a>', sanitize\_text\_field($\_REQUEST['page']), 'delete', $item['id']), |
  | 49 | 54 | ); |
  | 50 | 55 |  |
  | 51 | 56 | //Return the title contents |
  | 52 |  | return sprintf( '%1$s <span style="color:silver">(id:%2$s)</span>%3$s', |
  |  | 57 | return sprintf( |
  |  | 58 | '%1$s <span style="color:silver">(id:%2$s)</span>%3$s', |
  | 53 | 59 | /\*$1%s\*/ |
  | 54 | 60 | $item['name'], |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L56) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L62) |  |
  | 56 | 62 | $item['id'], |
  | 57 | 63 | /\*$3%s\*/ |
  | 58 |  | $this->row\_actions( $actions ) |
  | 59 |  | ); |
  | 60 |  | } |
  | 61 |  |  |
  | 62 |  | function column\_cb( $item ) { |
  |  | 64 | $this->row\_actions($actions) |
  |  | 65 | ); |
  |  | 66 | } |
  |  | 67 |  |
  |  | 68 | function column\_cb($item) |
  |  | 69 | { |
  | 63 | 70 | return sprintf( |
  | 64 | 71 | '<input type="checkbox" name="%1$s[]" value="%2$s" />', |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L70) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L77) |  |
  | 70 | 77 | } |
  | 71 | 78 |  |
  | 72 |  | function views() { |
  |  | 79 | function views() |
  |  | 80 | { |
  | 73 | 81 | $views = $this->get\_views(); |
  | 74 | 82 | /\*\* |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L82) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L90) |  |
  | 82 | 90 | \* @param array $views An array of available list table views. |
  | 83 | 91 | \*/ |
  | 84 |  | $views = apply\_filters(~~"views\_{$this->screen->id}", $views~~ ); |
  | 85 |  |  |
  | 86 |  | if (~~empty( $views )~~ ) { |
  |  | 92 | $views = apply\_filters("views\_{$this->screen->id}", $views); |
  |  | 93 |  |
  |  | 94 | if (empty($views)) { |
  | 87 | 95 | return; |
  | 88 | 96 | } |
  | 89 | 97 |  |
  | 90 | 98 | \_e("<ul class='subsubsub'>\n"); |
  | 91 |  | foreach (~~$views as $class => $view~~ ) { |
  |  | 99 | foreach ($views as $class => $view) { |
  | 92 | 100 | $views[$class] = "\t<li class='$class'>$view"; |
  | 93 | 101 | } |
  | 94 |  | \_e(implode(~~" |</li>\n", $views~~ ) . "</li>\n"); |
  |  | 102 | \_e(implode(" |</li>\n", $views) . "</li>\n"); |
  | 95 | 103 | \_e("</ul>"); |
  | 96 | 104 | } |
  | 97 | 105 |  |
  | 98 |  | function get\_views() { |
  |  | 106 | function get\_views() |
  |  | 107 | { |
  | 99 | 108 | global $status; |
  | 100 | 109 | $status\_arr = array( |
  | 101 |  | 'all'¬† ¬† ¬†=> \_\_(~~'All'~~ ), |
  | 102 |  | 'publish' => \_\_(~~'Publish'~~ ) |
  | 103 |  | ); |
  | 104 |  | foreach (~~$status\_arr as $key => $title~~ ) { |
  | 105 |  | $total¬† ¬† ¬† ¬† ¬† ¬† = $this->getTotal(~~$condition = '', $key~~ ); |
  | 106 |  | $class¬† ¬† ¬† ¬† ¬† ¬† = (~~$status == $key~~ ) ? 'class="current"' : ''; |
  | 107 |  | $status\_arr[$key] = "<a href='" . esc\_url(~~add\_query\_arg( 'post\_status', $key, $\_SERVER['REQUEST\_URI'] )~~ ) . "' $class>$title¬† <span class=\"count\">($total)</span></a>"; |
  |  | 110 | 'all'¬† ¬† ¬†=> \_\_('All'), |
  |  | 111 | 'publish' => \_\_('Publish') |
  |  | 112 | ); |
  |  | 113 | foreach ($status\_arr as $key => $title) { |
  |  | 114 | $total¬† ¬† ¬† ¬† ¬† ¬† = $this->getTotal($condition = '', $key); |
  |  | 115 | $class¬† ¬† ¬† ¬† ¬† ¬† = ($status == $key) ? 'class="current"' : ''; |
  |  | 116 | $status\_arr[$key] = "<a href='" . esc\_url(add\_query\_arg('post\_status', $key, $\_SERVER['REQUEST\_URI'])) . "' $class>$title¬† <span class=\"count\">($total)</span></a>"; |
  | 108 | 117 | } |
  | 109 | 118 |  |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L111) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L120) |  |
  | 111 | 120 | } |
  | 112 | 121 |  |
  | 113 |  | function extra\_tablenav( $which ) { |
  | 114 |  | if ( 'top' == $which ) { |
  |  | 122 | function extra\_tablenav($which) |
  |  | 123 | { |
  |  | 124 | if ('top' == $which) { |
  | 115 | 125 | \_e('<div class="alignleft actions">'); |
  | 116 | 126 | $dropdown\_adapters = array( |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L118) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L128) |  |
  | 118 | 128 | 'name'¬† ¬† ¬† ¬† ¬† ¬† => 'adapter', |
  | 119 | 129 | 'taxonomy'¬† ¬† ¬† ¬† => 'link\_category', |
  | 120 |  | 'show\_option\_all' => \_\_(~~'View all destinations'~~ ), |
  |  | 130 | 'show\_option\_all' => \_\_('View all destinations'), |
  | 121 | 131 | 'hide\_empty'¬† ¬† ¬† => true, |
  | 122 | 132 | 'hierarchical'¬† ¬† => 1, |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L128) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L138) |  |
  | 128 | 138 | 'name'¬† ¬† ¬† ¬† ¬† ¬† => 'engine', |
  | 129 | 139 | 'taxonomy'¬† ¬† ¬† ¬† => 'link\_category', |
  | 130 |  | 'show\_option\_all' => \_\_(~~'View all sources'~~ ), |
  |  | 140 | 'show\_option\_all' => \_\_('View all sources'), |
  | 131 | 141 | 'hide\_empty'¬† ¬† ¬† => true, |
  | 132 | 142 | 'hierarchical'¬† ¬† => 1, |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L134) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L144) |  |
  | 134 | 144 | 'orderby'¬† ¬† ¬† ¬† ¬†=> 'name', |
  | 135 | 145 | ); |
  | 136 |  | $this->render\_list\_plugins(~~$dropdown\_engines~~ ); |
  | 137 |  | $this->render\_list\_plugins(~~$dropdown\_adapters~~ ); //var\_dump($this->get\_list\_adapter( $dropdown\_adapters )); |
  | 138 |  |  |
  | 139 |  | submit\_button(~~\_\_( 'Filter' ), 'button', false, false, array( 'id' => 'post-query-submit' )~~ ); |
  |  | 146 | $this->render\_list\_plugins($dropdown\_engines); |
  |  | 147 | $this->render\_list\_plugins($dropdown\_adapters); //var\_dump($this->get\_list\_adapter( $dropdown\_adapters )); |
  |  | 148 |  |
  |  | 149 | submit\_button(\_\_('Filter'), 'button', false, false, array('id' => 'post-query-submit')); |
  | 140 | 150 | \_e('</div>'); |
  | 141 | 151 | } |
  | 142 | 152 | } |
  | 143 | 153 |  |
  | 144 |  | function get\_list\_used\_plugins( $type ) { |
  |  | 154 | function get\_list\_used\_plugins($type) |
  |  | 155 | { |
  | 145 | 156 | global $wpdb; |
  | 146 | 157 | $sql¬† ¬†= "SELECT `" . $type . "` |
  | 147 | 158 | FROM `" . $wpdb->prefix . "wppipes\_items` |
  | 148 | 159 | GROUP BY `" . $type . "`"; |
  | 149 |  | $datas = $wpdb->get\_results(~~$sql, ARRAY\_A~~ ); |
  |  | 160 | $datas = $wpdb->get\_results($sql, ARRAY\_A); |
  | 150 | 161 |  |
  | 151 | 162 | return $datas; |
  | 152 | 163 | } |
  | 153 | 164 |  |
  | 154 |  | function render\_list\_plugins( $render ) { |
  | 155 |  | $value\_arrays = $this->get\_list\_used\_plugins( $render['name'] ); |
  |  | 165 | function render\_list\_plugins($render) |
  |  | 166 | { |
  |  | 167 | $value\_arrays = $this->get\_list\_used\_plugins($render['name']); |
  | 156 | 168 | $options¬† ¬† ¬† = ''; |
  | 157 |  | foreach (~~$value\_arrays as $element~~ ) { |
  | 158 |  | $select = (~~! empty( $\_REQUEST[$render['name']] ) AND ( $\_REQUEST[$render['name']] == $element[$render['name']] )~~ ) ? ' selected ' : ''; |
  | 159 |  | if (~~$element[$render['name']] != ''~~ ) { |
  |  | 169 | foreach ($value\_arrays as $element) { |
  |  | 170 | $select = (!empty($\_REQUEST[$render['name']]) and ($\_REQUEST[$render['name']] == $element[$render['name']])) ? ' selected ' : ''; |
  |  | 171 | if ($element[$render['name']] != '') { |
  | 160 | 172 | $options .= '<option value="' . $element[$render['name']] . '"' . $select . '>' . $element[$render['name']] . '</option>'; |
  | 161 | 173 | } |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L164) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L176) |  |
  | 164 | 176 | <option value="">' . $render['show\_option\_all'] . '</option>' . $options . ' |
  | 165 | 177 | </select>'; |
  | 166 |  | $output = apply\_filters(~~'wp\_dropdown\_cats', $output~~ ); |
  |  | 178 | $output = apply\_filters('wp\_dropdown\_cats', $output); |
  | 167 | 179 | \_e($output); |
  | 168 | 180 |  |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L170) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L182) |  |
  | 170 | 182 | } |
  | 171 | 183 |  |
  | 172 |  | function get\_bulk\_actions() { |
  |  | 184 | function get\_bulk\_actions() |
  |  | 185 | { |
  | 173 | 186 | $actions = array(); |
  | 174 | 187 |  |
  | 175 |  | $actions['copy']¬† ¬† ¬† ¬† ¬† ¬† = \_\_(~~'Copy'~~ ); |
  | 176 |  | $actions['delete']¬† ¬† ¬† ¬† ¬† = \_\_(~~'Delete'~~ ); |
  | 177 |  | $actions['export\_to\_share'] = \_\_(~~'Export'~~ ); |
  | 178 |  | $actions['publish']¬† ¬† ¬† ¬† ¬†= \_\_(~~'Publish'~~ ); |
  | 179 |  | $actions['move\_to\_draft']¬† ¬†= \_\_(~~'Draft'~~ ); |
  |  | 188 | $actions['copy']¬† ¬† ¬† ¬† ¬† ¬† = \_\_('Copy'); |
  |  | 189 | $actions['delete']¬† ¬† ¬† ¬† ¬† = \_\_('Delete'); |
  |  | 190 | $actions['export\_to\_share'] = \_\_('Export'); |
  |  | 191 | $actions['publish']¬† ¬† ¬† ¬† ¬†= \_\_('Publish'); |
  |  | 192 | $actions['move\_to\_draft']¬† ¬†= \_\_('Draft'); |
  | 180 | 193 |  |
  | 181 | 194 | //$actions['inherit'] = \_\_( 'Inherit' ); |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L185) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L198) |  |
  | 185 | 198 | } |
  | 186 | 199 |  |
  | 187 |  | function get\_columns() { |
  |  | 200 | function get\_columns() |
  |  | 201 | { |
  | 188 | 202 | $columns = array( |
  | 189 | 203 | 'cb'¬† ¬† ¬† => '<input type="checkbox" />', //Render a checkbox instead of text |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L191) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L205) |  |
  | 191 | 205 | 'engine'¬† => 'Source', |
  | 192 | 206 | 'adapter' => 'Destination', |
  | 193 |  | //¬† ¬† ¬† ¬† ¬† ¬† ¬† 'created\_time'¬† => 'Created Time', |
  | 194 |  | //¬† ¬† ¬† ¬† ¬† ¬† ¬† 'hits'¬† ¬† ¬† ¬† ¬† => 'Hits', |
  | 195 |  | //¬† ¬† ¬† ¬† ¬† ¬† ¬† 'published'¬† ¬† ¬†=> 'Published', |
  | 196 |  | //¬† ¬† ¬† ¬† ¬† 'id'¬† ¬† ¬† => 'Id' |
  |  | 207 | //¬† ¬† ¬† ¬† ¬† ¬† ¬† 'created\_time'¬† => 'Created Time', |
  |  | 208 | //¬† ¬† ¬† ¬† ¬† ¬† ¬† 'hits'¬† ¬† ¬† ¬† ¬† => 'Hits', |
  |  | 209 | //¬† ¬† ¬† ¬† ¬† ¬† ¬† 'published'¬† ¬† ¬†=> 'Published', |
  |  | 210 | //¬† ¬† ¬† ¬† ¬† 'id'¬† ¬† ¬† => 'Id' |
  | 197 | 211 | ); |
  | 198 | 212 |  |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L200) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L214) |  |
  | 200 | 214 | } |
  | 201 | 215 |  |
  | 202 |  | function row\_actions( $actions, $always\_visible = false ) { |
  |  | 216 | function row\_actions($actions, $always\_visible = false) |
  |  | 217 | { |
  | 203 | 218 | return array(); |
  | 204 | 219 | } |
  | 205 | 220 |  |
  | 206 |  | function get\_sortable\_columns() { |
  |  | 221 | function get\_sortable\_columns() |
  |  | 222 | { |
  | 207 | 223 | $sortable\_columns = array( |
  | 208 |  | 'name'¬† ¬† ¬† => array(~~'name', false~~ ), //true means it's already sorted |
  | 209 |  | 'published' => array(~~'published', false~~ ), |
  | 210 |  | 'id'¬† ¬† ¬† ¬† => array(~~'id', false~~ ) |
  |  | 224 | 'name'¬† ¬† ¬† => array('name', false), //true means it's already sorted |
  |  | 225 | 'published' => array('published', false), |
  |  | 226 | 'id'¬† ¬† ¬† ¬† => array('id', false) |
  | 211 | 227 | ); |
  | 212 | 228 |  |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L214) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L230) |  |
  | 214 | 230 | } |
  | 215 | 231 |  |
  | 216 |  | function prepare\_items() { |
  |  | 232 | function prepare\_items() |
  |  | 233 | { |
  | 217 | 234 | global $mode, $status; //This is used only if making any database queries |
  | 218 |  | $mode¬† ¬† ¬† = empty(~~$\_REQUEST['mode']~~ ) ? 'excerpt' : sanitize\_text\_field($\_REQUEST['mode']); |
  | 219 |  | $status¬† ¬† = empty(~~$\_REQUEST['post\_status']~~ ) ? 'all' : sanitize\_text\_field($\_REQUEST['post\_status']); |
  |  | 235 | $mode¬† ¬† ¬† = empty($\_REQUEST['mode']) ? 'excerpt' : sanitize\_text\_field($\_REQUEST['mode']); |
  |  | 236 | $status¬† ¬† = empty($\_REQUEST['post\_status']) ? 'all' : sanitize\_text\_field($\_REQUEST['post\_status']); |
  | 220 | 237 | $condition = $this->buildquery\_condition(); |
  | 221 | 238 | /\*\* |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L237) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L254) |  |
  | 237 | 254 | \* for sortable columns. |
  | 238 | 255 | \*/ |
  | 239 |  | $this->\_column\_headers = array(~~$columns, $hidden, $sortable~~ ); |
  |  | 256 | $this->\_column\_headers = array($columns, $hidden, $sortable); |
  | 240 | 257 |  |
  | 241 | 258 |  |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L270) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L287) |  |
  | 270 | 287 | \* in your own package classes. |
  | 271 | 288 | \*/ |
  | 272 |  | $total\_items = $this->getTotal(~~$condition~~ ); |
  |  | 289 | $total\_items = $this->getTotal($condition); |
  | 273 | 290 |  |
  | 274 | 291 | /\*\* |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L276) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L293) |  |
  | 276 | 293 | \* it can be used by the rest of the class. |
  | 277 | 294 | \*/ |
  | 278 |  | $this->items = $this->getItems(~~$condition~~ ); |
  |  | 295 | $this->items = $this->getItems($condition); |
  | 279 | 296 |  |
  | 280 | 297 |  |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L282) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L299) |  |
  | 282 | 299 | \* REQUIRED. We also have to register our pagination options & calculations. |
  | 283 | 300 | \*/ |
  | 284 |  | $this->set\_pagination\_args(array( |
  |  | 301 | $this->set\_pagination\_args(array( |
  | 285 | 302 | 'total\_items' => $total\_items, //WE have to calculate the total number of items |
  | 286 | 303 | 'per\_page'¬† ¬† => $this->per\_page, //WE have to determine how many items to show on a page |
  | 287 |  | 'total\_pages' => ceil( $total\_items / $this->per\_page ) //WE have to calculate the total number of pages |
  | 288 |  | ) ); |
  | 289 |  |  |
  | 290 |  |  |
  | 291 |  | } |
  | 292 |  |  |
  | 293 |  | public function buildquery\_condition() { |
  |  | 304 | 'total\_pages' => ceil($total\_items / $this->per\_page) //WE have to calculate the total number of pages |
  |  | 305 | )); |
  |  | 306 | } |
  |  | 307 |  |
  |  | 308 | public function buildquery\_condition() |
  |  | 309 | { |
  | 294 | 310 | global $status; |
  | 295 | 311 | $where¬† ¬†= array(); |
  | 296 | 312 | $where[] = "`engine` <> '' AND `adapter` <> ''"; |
  | 297 |  | if (~~$status != 'all'~~ ) { |
  |  | 313 | if ($status != 'all') { |
  | 298 | 314 | $where[] = ' `published` = 1'; |
  | 299 | 315 | } |
  | 300 |  | if (~~! empty( $\_REQUEST['s'] )~~ ) { |
  |  | 316 | if (!empty($\_REQUEST['s'])) { |
  | 301 | 317 | $where[] = ' `name` LIKE "%' . sanitize\_text\_field($\_REQUEST['s']) . '%"'; |
  | 302 | 318 | } |
  | 303 |  | if (~~! empty( $\_REQUEST['adapter'] )~~ ) { |
  |  | 319 | if (!empty($\_REQUEST['adapter'])) { |
  | 304 | 320 | $where[] = ' `adapter` LIKE "' . sanitize\_text\_field($\_REQUEST['adapter']) . '"'; |
  | 305 | 321 | } |
  | 306 |  | if (~~! empty( $\_REQUEST['engine'] )~~ ) { |
  |  | 322 | if (!empty($\_REQUEST['engine'])) { |
  | 307 | 323 | $where[] = ' `engine` LIKE "' . sanitize\_text\_field($\_REQUEST['engine']) . '"'; |
  | 308 | 324 | } |
  | 309 |  | $where\_str = (~~count( $where ) > 0 ) ? 'WHERE ' . implode( ' AND ', $where~~ ) : ''; |
  |  | 325 | $where\_str = (count($where) > 0) ? 'WHERE ' . implode(' AND ', $where) : ''; |
  | 310 | 326 |  |
  | 311 | 327 | return $where\_str; |
  | 312 | 328 | } |
  | 313 | 329 |  |
  | 314 |  | public function getItems( $condition = '' ) { |
  |  | 330 | public function getItems($condition = '') |
  |  | 331 | { |
  | 315 | 332 | global $wpdb; |
  | 316 | 333 |  |
  | 317 | 334 |  |
  | 318 |  | $orderby¬† ¬† ¬†= ( ! empty( $\_REQUEST['orderby'] ) ) ? sanitize\_text\_field($\_REQUEST['orderby']) : 'id'; //If no sort, default to title |
  | 319 |  | $order¬† ¬† ¬† ¬†= ( ! empty( $\_REQUEST['order'] ) ) ? sanitize\_text\_field($\_REQUEST['order']) : 'asc'; //If no order, default to asc |
  | 320 |  | $paged¬† ¬† ¬† ¬†= ( ! empty( $\_REQUEST['paged'] ) ) ? (int) sanitize\_text\_field($\_REQUEST['paged']) : 1; |
  | 321 |  | $limit\_start = ( $this->per\_page \* ( $paged - 1 ) ); |
  |  | 335 | $orderby¬† ¬† ¬†= sanitize\_sql\_orderby($\_REQUEST['orderby'] ?? 'id'); |
  |  | 336 | $order¬† ¬† ¬† ¬†= strtoupper(sanitize\_text\_field($\_REQUEST['order'] ?? 'ASC')); |
  |  | 337 | if (!in\_array($order, ['DESC', 'ASC'])) { |
  |  | 338 | $order = 'ASC'; |
  |  | 339 | } |
  |  | 340 | $paged¬† ¬† ¬† ¬†= (!empty($\_REQUEST['paged'])) ? (int) sanitize\_text\_field($\_REQUEST['paged']) : 1; |
  |  | 341 | $limit\_start = ($this->per\_page \* ($paged - 1)); |
  | 322 | 342 | $sql¬† ¬† ¬† ¬† ¬†= "SELECT `id`, `name`, `engine`, `adapter`, `engine\_params`, `adapter\_params`, `published` |
  | 323 | 343 | FROM `" . $wpdb->prefix . "wppipes\_items` $condition |
  | 324 | 344 | ORDER BY {$orderby} {$order} LIMIT {$limit\_start},{$this->per\_page}"; |
  | 325 | 345 |  |
  | 326 |  | $datas = $wpdb->get\_results(~~$sql, ARRAY\_A~~ ); |
  |  | 346 | $datas = $wpdb->get\_results($sql, ARRAY\_A); |
  | 327 | 347 |  |
  | 328 | 348 | return $datas; |
  | 329 | 349 | } |
  | 330 | 350 |  |
  | 331 |  | public function getTotal( $condition = '', $status = null ) { |
  |  | 351 | public function getTotal($condition = '', $status = null) |
  |  | 352 | { |
  | 332 | 353 | global $wpdb; |
  | 333 |  | $status¬† = empty(~~$status~~ ) ? 'all' : $status; |
  |  | 354 | $status¬† = empty($status) ? 'all' : $status; |
  | 334 | 355 | $where¬† ¬†= array(); |
  | 335 | 356 | $where[] = "`engine` <> '' AND `adapter` <> ''"; |
  | 336 |  | if (~~$status != 'all'~~ ) { |
  |  | 357 | if ($status != 'all') { |
  | 337 | 358 | $where[] = "`published` = 1"; |
  | 338 | 359 | } |
  | 339 |  | if (~~'' == $condition~~ ) { |
  | 340 |  | $condition = 'WHERE ' . implode(~~' AND ', $where~~ ); |
  |  | 360 | if ('' == $condition) { |
  |  | 361 | $condition = 'WHERE ' . implode(' AND ', $where); |
  | 341 | 362 | } |
  | 342 | 363 | $sql = "SELECT count(\*) |
  | 343 | 364 | FROM `" . $wpdb->prefix . "wppipes\_items` $condition"; |
  | 344 |  | $res = $wpdb->get\_var(~~$sql~~ ); |
  |  | 365 | $res = $wpdb->get\_var($sql); |
  | 345 | 366 |  |
  | 346 | 367 | return $res; |
  | 347 | 368 | } |
  | 348 | 369 |  |
  | 349 |  | function pagination( $which ) { |
  |  | 370 | function pagination($which) |
  |  | 371 | { |
  | 350 | 372 | global $mode; |
  | 351 | 373 |  |
  | 352 |  | parent::pagination( $which ); |
  | 353 |  |  |
  | 354 |  | if ( 'top' == $which ) { |
  | 355 |  | $this->view\_switcher( $mode ); |
  | 356 |  | } |
  | 357 |  | } |
  | 358 |  |  |
  | 359 |  | function get\_more\_display( $params ) { |
  | 360 |  | $params\_obj = json\_decode( $params ); |
  |  | 374 | parent::pagination($which); |
  |  | 375 |  |
  |  | 376 | if ('top' == $which) { |
  |  | 377 | $this->view\_switcher($mode); |
  |  | 378 | } |
  |  | 379 | } |
  |  | 380 |  |
  |  | 381 | function get\_more\_display($params) |
  |  | 382 | { |
  |  | 383 | $params\_obj = json\_decode($params); |
  | 361 | 384 |  |
  | 362 | 385 | return $params\_obj->feed\_url; |
  | 363 | 386 | } |
  | 364 | 387 |  |
  | 365 |  | public function single\_row\_columns( $item ) { |
  |  | 388 | public function single\_row\_columns($item) |
  |  | 389 | { |
  | 366 | 390 | global $mode; |
  | 367 |  | if ( 'rssreader' == $item['engine'] ) { |
  | 368 |  | $more\_display = $this->get\_more\_display( $item['engine\_params'] ); |
  |  | 391 |  |
  |  | 392 | // Add nonce token |
  |  | 393 | $delete\_nonce = wp\_create\_nonce('delete\_none\_token'); |
  |  | 394 | $edit\_nonce = wp\_create\_nonce('edit\_none\_token'); |
  |  | 395 | $pipe\_nonce = wp\_create\_nonce('pipe\_non'); |
  |  | 396 |  |
  |  | 397 | if ('rssreader' == $item['engine']) { |
  |  | 398 | $more\_display = $this->get\_more\_display($item['engine\_params']); |
  | 369 | 399 | } else { |
  | 370 | 400 | $more\_display = ''; |
  | 371 | 401 | } |
  | 372 |  | list(~~$columns, $hidden~~ ) = $this->get\_column\_info(); |
  | 373 |  | foreach (~~$columns as $column\_name => $column\_display\_name~~ ) { |
  |  | 402 | list($columns, $hidden) = $this->get\_column\_info(); |
  |  | 403 | foreach ($columns as $column\_name => $column\_display\_name) { |
  | 374 | 404 | $class = "class='$column\_name column-$column\_name'"; |
  | 375 | 405 |  |
  | 376 | 406 | $style = ''; |
  | 377 |  | if (~~in\_array( $column\_name, $hidden )~~ ) { |
  |  | 407 | if (in\_array($column\_name, $hidden)) { |
  | 378 | 408 | $style = ' style="display:none;"'; |
  | 379 | 409 | } |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L381) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L411) |  |
  | 381 | 411 | $attributes = "$class$style"; |
  | 382 | 412 |  |
  | 383 |  | if (~~'cb' == $column\_name~~ ) { |
  |  | 413 | if ('cb' == $column\_name) { |
  | 384 | 414 | \_e("<th scope='row' class='check-column'>"); |
  | 385 |  | \_e(sprintf(~~'<input id="cb-select-%s" type="checkbox" name="id[]" value="%s" />', $item['id'], $item['id']~~ )); |
  |  | 415 | \_e(sprintf('<input id="cb-select-%s" type="checkbox" name="id[]" value="%s" />', $item['id'], $item['id'])); |
  | 386 | 416 | \_e("</th>"); |
  | 387 |  | } elseif (~~'name' == $column\_name~~ ) { |
  |  | 417 | } elseif ('name' == $column\_name) { |
  | 388 | 418 | \_e("<td $attributes>"); |
  | 389 | 419 |  |
  | 390 | 420 | \_e('<strong>'); |
  | 391 | 421 | \_e(' |
  | 392 |  | <a class="row-title" id="row\_title\_' . $item['id'] . '" href="' . sprintf(~~'?page=%s&task=%s&id=%s"', sanitize\_text\_field($\_REQUEST['page']), 'edit', $item['id']~~ ) . '>' |
  | 393 |  | . sprintf(~~'Pipe#%s', $item['id']~~ ) . ' - ' . $item['name'] . ' |
  |  | 422 | <a class="row-title" id="row\_title\_' . $item['id'] . '" href="' . sprintf('?page=%s&task=%s&id=%s"', sanitize\_text\_field($\_REQUEST['page']), 'edit', $item['id']) . '>' |
  |  | 423 | . sprintf('Pipe#%s', $item['id']) . ' - ' . $item['name'] . ' |
  | 394 | 424 | </a> |
  | 395 | 425 | '); |
  | 396 | 426 |  |
  | 397 | 427 | // If the Pipe is unpublished, show it as Draft |
  | 398 |  | if (~~$item['published'] == 0~~ ) { |
  | 399 |  | \_e('<span class="post-state">' . \_\_(~~' - Draft'~~ ) . '</span>'); |
  |  | 428 | if ($item['published'] == 0) { |
  |  | 429 | \_e('<span class="post-state">' . \_\_(' - Draft') . '</span>'); |
  | 400 | 430 | } |
  | 401 | 431 | \_e('</strong>'); |
  | 402 | 432 |  |
  | 403 |  | \_e((~~'excerpt' == $mode && $more\_display != ''~~ ) ? '</br><span>' . $more\_display . '</span></br>' : ''); |
  |  | 433 | \_e(('excerpt' == $mode && $more\_display != '') ? '</br><span>' . $more\_display . '</span></br>' : ''); |
  | 404 | 434 |  |
  | 405 | 435 | \_e("<div class='row-actions'><span class='edit'>"); |
  | 406 |  | \_e(sprintf( '<a href="?page=%s&task=%s&id=%s">Edit</a>', sanitize\_text\_field($\_REQUEST['page']), 'edit', $item['id'] )); |
  |  | 436 | // Add edit\_none\_token token for href attribute |
  |  | 437 | \_e(sprintf('<a href="?page=%s&task=%s&id=%s&edit\_nonce=%s">Edit</a>', sanitize\_text\_field($\_REQUEST['page']), 'edit', $item['id'], $edit\_nonce)); |
  |  | 438 |  |
  | 407 | 439 | \_e("</span> | <span class='quickedit'>"); |
  | 408 |  | \_e('<span class="quick\_edit\_link" onclick="display\_quick\_edit(this,'~~. $item['id'] .~~');">Quick Edit</span>'); |
  |  | 440 | \_e('<span class="quick\_edit\_link" onclick="display\_quick\_edit(this,'¬†. $item['id'] . ');">Quick Edit</span>'); |
  | 409 | 441 | \_e("</span> | <span class='trash'>"); |
  | 410 |  | \_e(sprintf( '<a href="?page=%s&task=%s&id=%s">Delete</a>', sanitize\_text\_field($\_REQUEST['page']), 'delete', $item['id'] )); |
  |  | 442 | // Add delete\_nonce token for href attribute |
  |  | 443 | \_e(sprintf('<a href="?page=%s&task=%s&id=%s&delete\_nonce=%s">Delete</a>', sanitize\_text\_field($\_REQUEST['page']), 'delete', $item['id'], $delete\_nonce)); |
  |  | 444 |  |
  | 411 | 445 | \_e("</span> | <span class='post'>"); |
  | 412 |  | \_e(sprintf(~~'<a data-id="%s" class="btn-pipes-post" href="?page=%s&task=%s&id=%s">Test</a>', $item['id'], PIPES::$\_\_page\_prefix . '.pipe', 'post', $item['id']~~ )); |
  |  | 446 | \_e(sprintf('<a data-id="%s" class="btn-pipes-post" href="?page=%s&task=%s&id=%s">Test</a>', $item['id'], PIPES::$\_\_page\_prefix . '.pipe', 'post', $item['id'])); |
  | 413 | 447 | \_e("</span> | <span class='postupdate'>"); |
  | 414 |  | \_e(sprintf(~~'<a data-id="%s" class="btn-pipes-post" href="?page=%s&task=%s&id=%s&u=1">Test in Update mode</a>', $item['id'], PIPES::$\_\_page\_prefix . '.pipe', 'post', $item['id']~~ )); |
  |  | 448 | \_e(sprintf('<a data-id="%s" class="btn-pipes-post" href="?page=%s&task=%s&id=%s&u=1">Test in Update mode</a>', $item['id'], PIPES::$\_\_page\_prefix . '.pipe', 'post', $item['id'])); |
  | 415 | 449 | \_e("</span> | <span class='export'>"); |
  | 416 |  | \_e(sprintf(~~'<a data-id="%s" class="btn-pipes-export" href="?page=%s&task=%s&id=%s">Export</a>', $item['id'], PIPES::$\_\_page\_prefix . '.pipes', 'export\_to\_share', $item['id']~~ )); |
  |  | 450 | \_e(sprintf('<a data-id="%s" class="btn-pipes-export" href="?page=%s&task=%s&id=%s">Export</a>', $item['id'], PIPES::$\_\_page\_prefix . '.pipes', 'export\_to\_share', $item['id'])); |
  | 417 | 451 | \_e("</span></div></td>"); |
  | 418 | 452 | } else { |
  | 419 | 453 | \_e("<td $attributes>"); |
  | 420 |  | \_e($this->column\_default(~~$item, $column\_name~~ )); |
  |  | 454 | \_e($this->column\_default($item, $column\_name)); |
  | 421 | 455 | \_e("</td>"); |
  | 422 | 456 | } |
  | 423 |  |  |
  | 424 | 457 | } |
  | 425 | 458 | $select = $item['published'] == 1 ? 'selected' : ''; |
  | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=1812495#L455) | [‚Ä¶](/browser/wp-pipes/trunk/tables/pipes.php?rev=3204551#L488) |  |
  | 455 | 488 | <br class=\"clear\"> |
  | 456 | 489 | </p> |
  |  | 490 | <input name=\"pipe\_nonce\" value=\"" . $pipe\_nonce . "\" /> |
  | 457 | 491 | </td>"); |
  | 458 | 492 | \_e("</tr>"); |
  | 459 | 493 | } |
  | 460 |  |  |
  | 461 | 494 | } |
* ## [wp-pipes/trunk/views/pipe/tmpl/form\_bs3.php](/changeset/3204551/wp-pipes/trunk/views/pipe/tmpl/form_bs3.php "Show the changeset 3204551 restricted to wp-pipes/trunk/views/pipe/tmpl/form_bs3.php")

  | [r2002693](/browser/wp-pipes/trunk/views/pipe/tmpl/form_bs3.php?rev=2002693#L26 "Show revision 2002693 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/views/pipe/tmpl/form_bs3.php?rev=3204551#L26 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 26 | 26 | } |
  | 27 | 27 | $siteurl = get\_site\_url(); |
  |  | 28 |  |
  |  | 29 | $nonce = wp\_create\_nonce( 'wp\_pipes\_action' ); |
  | 28 | 30 | ?> |
  | 29 | 31 | <script type="text/javascript"> |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/pipe/tmpl/form_bs3.php?rev=2002693#L114) | [‚Ä¶](/browser/wp-pipes/trunk/views/pipe/tmpl/form_bs3.php?rev=3204551#L116) |  |
  | 114 | 116 | <h2> |
  | 115 | 117 | <?php |
  |  | 118 |  |
  |  | 119 | // Create nonce token for add new pipe item |
  |  | 120 | $nonce\_token\_saveData = wp\_create\_nonce('nonce\_token\_saveData'); |
  |  | 121 |  |
  |  | 122 |  |
  | 116 | 123 | if ( ! $item->id ) { // New Pipe |
  | 117 | 124 | \_e( 'Add New Pipe', 'pipes' ); |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/pipe/tmpl/form_bs3.php?rev=2002693#L133) | [‚Ä¶](/browser/wp-pipes/trunk/views/pipe/tmpl/form_bs3.php?rev=3204551#L140) |  |
  | 133 | 140 | \_e(' <a class="add-new-h2" href="admin.php?page=pipes.pipe">' . \_\_( 'Add New', 'pipes' ) . '</a>'); |
  | 134 | 141 | } |
  |  | 142 |  |
  | 135 | 143 | ?> |
  | 136 | 144 | </h2> |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/pipe/tmpl/form_bs3.php?rev=2002693#L140) | [‚Ä¶](/browser/wp-pipes/trunk/views/pipe/tmpl/form_bs3.php?rev=3204551#L148) |  |
  | 140 | 148 | <div class="foobla" style="padding-top:15px;"> |
  | 141 | 149 | <div class="alert alert-info alert-dismissable hidden"> |
  |  | 150 | <!-- Add nonce token¬† --> |
  |  | 151 | <input type="hidden" name="nonce\_token\_saveData" value="<?php echo $nonce\_token\_saveData ;?>"/> |
  | 142 | 152 | <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button> |
  | 143 | 153 | <h3><?php \_e( 'The first time here?', 'pipes' ); ?></h3> |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/pipe/tmpl/form_bs3.php?rev=2002693#L266) | [‚Ä¶](/browser/wp-pipes/trunk/views/pipe/tmpl/form_bs3.php?rev=3204551#L276) |  |
  | 266 | 276 | <div class="btn-wrapper" id="toolbar-postu"> |
  | 267 | 277 | <div class="btn-group"> |
  | 268 |  | <button id="openBtn" |
  | 269 |  | href="admin.php?page=<?php \_e(PIPES::$\_\_page\_prefix); ?>.pipe&task=post&id=<?php \_e($item->id); ?>" |
  |  | 278 | <button id="openBtn"¬†name="nonce\_token" |
  |  | 279 | href="admin.php?page=<?php \_e(PIPES::$\_\_page\_prefix); ?>.pipe&task=post&id=<?php \_e($item->id); ?>&nonce=<?php echo $nonce; ?>" |
  | 270 | 280 | class="btn btn-default btn-lg btn-pipes-post"> |
  | 271 | 281 | <i class="fa fa-flask" title=""></i> <?php \_e( 'Test this Pipe' ); ?> |
* ## [wp-pipes/trunk/views/settings/tmpl/default.php](/changeset/3204551/wp-pipes/trunk/views/settings/tmpl/default.php "Show the changeset 3204551 restricted to wp-pipes/trunk/views/settings/tmpl/default.php")

  | [r1812495](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=1812495#L1 "Show revision 1812495 of this file in browser") | [r3204551](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=3204551#L1 "Show revision 3204551 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  |  | 2 |  |
  | 2 | 3 | /\*\* |
  | 3 | 4 | \* @package¬† ¬† ¬† ¬† ¬† ¬† ¬† WP Pipes plugin - PIPES |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=1812495#L7) | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=3204551#L8) |  |
  | 7 | 8 | \* @license¬† ¬† ¬† ¬† ¬† ¬† ¬† GNU/GPL v3, see LICENSE |
  | 8 | 9 | \*/ |
  | 9 |  | defined(~~'PIPES\_CORE' ) or die( 'Restricted access'~~ ); |
  |  | 10 | defined('PIPES\_CORE') or die('Restricted access'); |
  | 10 | 11 |  |
  | 11 |  | wp\_enqueue\_style(~~'pipes-font-awesome-css'~~ ); |
  | 12 |  | wp\_enqueue\_style(~~'pipes-bootstrap-min'~~ ); |
  | 13 |  | wp\_enqueue\_style(~~'pipes-bootstrap-extended'~~ ); |
  | 14 |  | wp\_enqueue\_style(~~'jquery-style', 'https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/themes/smoothness/jquery-ui.css'~~ ); |
  | 15 |  | wp\_enqueue\_script(~~'jquery-ui-datepicker'~~ ); |
  | 16 |  | wp\_enqueue\_script(~~'pipes-bootstrap-min'~~ ); |
  | 17 |  | $tab = filter\_input(~~INPUT\_GET, 'tab'~~ ); |
  | 18 |  | if~~(!$tab)~~{ |
  |  | 12 | wp\_enqueue\_style('pipes-font-awesome-css'); |
  |  | 13 | wp\_enqueue\_style('pipes-bootstrap-min'); |
  |  | 14 | wp\_enqueue\_style('pipes-bootstrap-extended'); |
  |  | 15 | wp\_enqueue\_style('jquery-style', 'https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/themes/smoothness/jquery-ui.css'); |
  |  | 16 | wp\_enqueue\_script('jquery-ui-datepicker'); |
  |  | 17 | wp\_enqueue\_script('pipes-bootstrap-min'); |
  |  | 18 | $tab = filter\_input(INPUT\_GET, 'tab'); |
  |  | 19 | if¬†(!$tab) { |
  | 19 | 20 | $tab = 'requirements'; |
  | 20 | 21 | } |
  | 21 | 22 |  |
  | 22 |  | require\_once(~~OBGRAB\_HELPERS . 'requirements.php'~~ ); |
  |  | 23 | require\_once(OBGRAB\_HELPERS . 'requirements.php'); |
  | 23 | 24 | $requirements = new AppRequirements; |
  | 24 | 25 | $requirements->checkRequirements(); |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=1812495#L26) | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=3204551#L27) |  |
  | 26 | 27 | ?> |
  | 27 | 28 | <script> |
  | 28 |  | jQuery(~~document~~ ).ready(function() { |
  | 29 |  | jQuery('#pipes\_settings a').click(function(e) { |
  |  | 29 | jQuery(document).ready(function() { |
  |  | 30 | jQuery('#pipes\_settings a').click(function(e) { |
  | 30 | 31 | e.preventDefault() |
  | 31 | 32 | jQuery(this).tab('show') |
  | 32 | 33 | }) |
  | 33 | 34 | }); |
  | 34 |  |  |
  | 35 | 35 | </script> |
  | 36 | 36 | <style> |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=1812495#L43) | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=3204551#L43) |  |
  | 43 | 43 | </style> |
  | 44 | 44 |  |
  | 45 |  | <h2><?php \_e(~~'WP Pipes plugin Settings'~~ ); ?></h2> |
  |  | 45 | <h2><?php \_e('WP Pipes plugin Settings'); ?></h2> |
  | 46 | 46 |  |
  | 47 | 47 | <?php |
  | 48 |  | \_e(PIPES::show\_message( false )); |
  |  | 48 | \_e(PIPES::show\_message(false)); |
  |  | 49 |  |
  |  | 50 | //todo create nonce token |
  |  | 51 | $nonce\_token = wp\_create\_nonce('nonce\_token'); |
  |  | 52 |  |
  | 49 | 53 | ?> |
  | 50 | 54 | <div class="foobla" style="padding-top:15px;"> |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=1812495#L52) | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=3204551#L56) |  |
  | 52 | 56 | <table class="form-table"> |
  | 53 | 57 | <?php |
  | 54 |  | foreach ( $this->configs->items as $setting ) { |
  |  | 58 |  |
  |  | 59 | foreach ($this->configs->items as $setting) { |
  |  | 60 |  |
  | 55 | 61 | \_e('<tr valign="top"'); |
  | 56 | 62 | // Start at settings seems to be not necessary |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=1812495#L60) | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=3204551#L66) |  |
  | 60 | 66 | \_e('>'); |
  | 61 | 67 |  |
  | 62 |  | switch ( $setting->option\_name ) { |
  |  | 68 | // todo add esc\_attr(); esc\_url() |
  |  | 69 | switch ($setting->option\_name) { |
  | 63 | 70 | case 'pipes\_cronjob\_active': |
  | 64 |  | \_e('<th scope="row">' . \_\_(~~'Cronjob Active'~~ ) . '</th>'); |
  |  | 71 | \_e('<th scope="row">' . \_\_('Cronjob Active') . '</th>'); |
  | 65 | 72 | \_e('<td>'); |
  |  | 73 | \_e('<fieldset><legend class="screen-reader-text"><span>Cronjob Active</span></legend> |
  |  | 74 | <label title="Yes"> |
  |  | 75 | <input type="radio" name="' . esc\_attr($setting->option\_name) . '" value="1" ' . (($setting->option\_value == 1) ? 'checked="checked"' : '') . '> |
  |  | 76 | <span>Yes, I want to run my Pipes automatically when someone access my Wordpress site.</span></label><br> |
  |  | 77 | <label title="No"><input type="radio" name="' . esc\_attr($setting->option\_name) . '" value="0" ' . (($setting->option\_value == 0) ? 'checked="checked"' : '') . '> |
  |  | 78 | <span>No, I will create a cronjob task myself to run the script <a href="' . esc\_url(get\_site\_url()) . '/?pipes=cron&task=callaio" target="\_blank">' . esc\_url(get\_site\_url()) . '/?pipes=cron&task=callaio</a>. More instruction can be found at <a href="http://thimpress.com/schedule-auto-posting-pipes-cron-job/" target="\_blank">this cronjob guideline</a></span>.</label><br /> |
  |  | 79 |  |
  | 66 | 80 |  |
  | 67 |  | ~~\_e('<fieldset><legend class="screen-reader-text"><span>Cronjob Active</span></legend>~~ |
  | 68 |  | ~~<label title="Yes"><input type="radio" name="' . $setting->option\_name . '" value="1" ' . ( ( $setting->option\_value == 1 ) ? 'checked="checked"' : '' ) . '>~~ |
  | 69 |  | ~~<span>Yes, I want to run my Pipes automatically when someone access my Wordpress site.</span></label><br>~~ |
  | 70 |  | ~~<label title="No"><input type="radio" name="' . $setting->option\_name . '" value="0" ' . ( ( $setting->option\_value == 0 ) ? 'checked="checked"' : '' ) . '>~~ |
  | 71 |  | ~~<span>No, I will create a cronjob task myself to run the script <a href="'.get\_site\_url().'/?pipes=cron&task=callaio" target="\_blank">'.get\_site\_url().'/?pipes=cron&task=callaio</a>. More instruction can be found at <a href="http://thimpress.com/schedule-auto-posting-pipes-cron-job/" target="\_blank">this cronjob guideline</a></span>.</label><br />~~ |
  | 72 | 81 | </fieldset>'); |
  | 73 |  | if~~($this->area != '' && $this->area != 'Vietnam')~~{ |
  |  | 82 | if¬†($this->area != '' && $this->area != 'Vietnam') { |
  | 74 | 83 | \_e('<span style="color:red;">One of our partners released a plugin for you setting up cronjob with any specific pipes. Check it out at <a href="http://virtualstuff.info/product/cronjob-single-pipe/" alt="cronjob single pipe">http://virtualstuff.info/product/cronjob-single-pipe/</a></span>'); |
  | 75 | 84 | } |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=1812495#L83) | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=3204551#L92) |  |
  | 83 | 92 | //¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </ol> |
  | 84 | 93 | //¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† ¬† </div>'); |
  | 85 |  | \_e('<th scope="row">' . \_\_(~~'Allow Auto Run'~~ ) . '</th>'); |
  |  | 94 | \_e('<th scope="row">' . \_\_('Allow Auto Run') . '</th>'); |
  | 86 | 95 | \_e('<td>'); |
  | 87 | 96 |  |
  | 88 | 97 | \_e('<fieldset><legend class="screen-reader-text"><span>Auto Run</span></legend> |
  | 89 |  | <label title="Yes"><input type="radio" name="' . ~~$setting->option\_name . '" value="1" ' . ( ( $setting->option\_value == 1 ) ? 'checked="checked"' : ''~~ ) . '> |
  |  | 98 | <label title="Yes"><input type="radio" name="' . esc\_attr($setting->option\_name) . '" value="1" ' . (($setting->option\_value == 1) ? 'checked="checked"' : '') . '> |
  | 90 | 99 | <span>Yes, I want to run my Pipes in both manually and automatically methods.</span></label><br> |
  | 91 |  | <label title="No"><input type="radio" name="' . ~~$setting->option\_name . '" value="0" ' . ( ( $setting->option\_value == 0 ) ? 'checked="checked"' : ''~~ ) . '> |
  |  | 100 | <label title="No"><input type="radio" name="' . esc\_attr($setting->option\_name) . '" value="0" ' . (($setting->option\_value == 0) ? 'checked="checked"' : '') . '> |
  | 92 | 101 | <span>No, I want to run my Pipes manually.</span></label><br> |
  | 93 | 102 | </fieldset>'); |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=1812495#L95) | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=3204551#L104) |  |
  | 95 | 104 | break; |
  | 96 | 105 | case 'pipes\_schedule': |
  | 97 |  | \_e('<th scope="row" style="display:none;"><label for="' . ~~$setting->option\_name~~ . '">Run every</label></th>'); |
  |  | 106 | \_e('<th scope="row" style="display:none;"><label for="' . esc\_attr($setting->option\_name) . '">Run every</label></th>'); |
  | 98 | 107 | \_e('<td style="display:none;">'); |
  | 99 |  | \_e('<select name="' . ~~$setting->option\_name . '" id="' . $setting->option\_name~~ . '"> |
  | 100 |  | <option ' . (~~( $setting->option\_value == 'i5' ) ? 'selected="selected"' : ''~~ ) . ' value="i5">5 minutes</option> |
  | 101 |  | <option ' . (~~( $setting->option\_value == 'i10' ) ? 'selected="selected"' : ''~~ ) . ' value="i10">10 minutes</option> |
  | 102 |  | <option ' . (~~( $setting->option\_value == 'i15' ) ? 'selected="selected"' : ''~~ ) . ' value="i15">15 minutes</option> |
  | 103 |  | <option ' . (~~( $setting->option\_value == 'i20' ) ? 'selected="selected"' : ''~~ ) . ' value="i20">20 minutes</option> |
  | 104 |  | <option ' . (~~( $setting->option\_value == 'i25' ) ? 'selected="selected"' : ''~~ ) . ' value="i25">25 minutes</option> |
  | 105 |  | <option ' . (~~( $setting->option\_value == 'i30' ) ? 'selected="selected"' : ''~~ ) . ' value="i30">30 minutes</option> |
  | 106 |  | <option ' . (~~( $setting->option\_value == 'h1' ) ? 'selected="selected"' : ''~~ ) . ' value="h1">1 hour</option> |
  | 107 |  | <option ' . (~~( $setting->option\_value == 'h2' ) ? 'selected="selected"' : ''~~ ) . ' value="h2">2 hours</option> |
  | 108 |  | <option ' . (~~( $setting->option\_value == 'h3' ) ? 'selected="selected"' : ''~~ ) . ' value="h3">3 hours</option> |
  | 109 |  | <option ' . (~~( $setting->option\_value == 'h4' ) ? 'selected="selected"' : ''~~ ) . ' value="h4">4 hours</option> |
  | 110 |  | <option ' . (~~( $setting->option\_value == 'h6' ) ? 'selected="selected"' : ''~~ ) . ' value="h6">6 hours</option> |
  | 111 |  | <option ' . (~~( $setting->option\_value == 'h8' ) ? 'selected="selected"' : ''~~ ) . ' value="h8">8 hours</option> |
  | 112 |  | <option ' . (~~( $setting->option\_value == 'h12' ) ? 'selected="selected"' : ''~~ ) . ' value="h12">12 hours</option> |
  | 113 |  | <option ' . (~~( $setting->option\_value == 'h24' ) ? 'selected="selected"' : ''~~ ) . ' value="h24">24 hours</option> |
  |  | 108 | \_e('<select name="' . esc\_attr($setting->option\_name) . '" id="' . esc\_attr($setting->option\_name) . '"> |
  |  | 109 | <option ' . (($setting->option\_value == 'i5') ? 'selected="selected"' : '') . ' value="i5">5 minutes</option> |
  |  | 110 | <option ' . (($setting->option\_value == 'i10') ? 'selected="selected"' : '') . ' value="i10">10 minutes</option> |
  |  | 111 | <option ' . (($setting->option\_value == 'i15') ? 'selected="selected"' : '') . ' value="i15">15 minutes</option> |
  |  | 112 | <option ' . (($setting->option\_value == 'i20') ? 'selected="selected"' : '') . ' value="i20">20 minutes</option> |
  |  | 113 | <option ' . (($setting->option\_value == 'i25') ? 'selected="selected"' : '') . ' value="i25">25 minutes</option> |
  |  | 114 | <option ' . (($setting->option\_value == 'i30') ? 'selected="selected"' : '') . ' value="i30">30 minutes</option> |
  |  | 115 | <option ' . (($setting->option\_value == 'h1') ? 'selected="selected"' : '') . ' value="h1">1 hour</option> |
  |  | 116 | <option ' . (($setting->option\_value == 'h2') ? 'selected="selected"' : '') . ' value="h2">2 hours</option> |
  |  | 117 | <option ' . (($setting->option\_value == 'h3') ? 'selected="selected"' : '') . ' value="h3">3 hours</option> |
  |  | 118 | <option ' . (($setting->option\_value == 'h4') ? 'selected="selected"' : '') . ' value="h4">4 hours</option> |
  |  | 119 | <option ' . (($setting->option\_value == 'h6') ? 'selected="selected"' : '') . ' value="h6">6 hours</option> |
  |  | 120 | <option ' . (($setting->option\_value == 'h8') ? 'selected="selected"' : '') . ' value="h8">8 hours</option> |
  |  | 121 | <option ' . (($setting->option\_value == 'h12') ? 'selected="selected"' : '') . ' value="h12">12 hours</option> |
  |  | 122 | <option ' . (($setting->option\_value == 'h24') ? 'selected="selected"' : '') . ' value="h24">24 hours</option> |
  | 114 | 123 | </select>'); |
  | 115 | 124 | \_e('</td>'); |
  | 116 | 125 | break; |
  | 117 | 126 | case 'pipes\_start\_at': |
  | 118 |  | if (~~'' == $setting->option\_value~~ ) { |
  |  | 127 | if ('' == $setting->option\_value) { |
  | 119 | 128 | $setting->option\_value = '0'; |
  | 120 | 129 | } |
  | 121 |  | $date¬† ¬†= date('Y-m-d'); |
  |  | 130 | $date¬† ¬†= date('Y-m-d'); |
  | 122 | 131 | $hour¬† ¬†= 0; |
  | 123 | 132 | $minute = 0; |
  | 124 |  | \_e('<th scope="row"><label for="' . ~~$setting->option\_name . '">' . \_\_( 'Start from'~~ ) . '</label></th>'); |
  |  | 133 | \_e('<th scope="row"><label for="' . esc\_attr($setting->option\_name) . '">' . \_\_('Start from') . '</label></th>'); |
  | 125 | 134 | \_e('<td>'); |
  | 126 |  | \_e('<input style="max-width: 250px" name="' . ~~$setting->option\_name . '" type="text" id="' . $setting->option\_name . '" value="' . $date~~ . '" class="regular-text">'); |
  | 127 |  | \_e(' at <input type="number" min="0" max="23" id="pipes\_hh" name="pipes\_hh" value="' . ~~$hour~~ . '" size="2" maxlength="2" autocomplete="off"> |
  | 128 |  | : <input type="number" min="0" max="59" id="pipes\_mn" name="pipes\_mn" value="' . ~~$minute~~ . '" size="2" maxlength="2" autocomplete="off"></td>'); |
  |  | 135 | \_e('<input style="max-width: 250px" name="' . esc\_attr($setting->option\_name) . '" type="text" id="' . esc\_attr($setting->option\_name) . '" value="' . esc\_attr($date) . '" class="regular-text">'); |
  |  | 136 | \_e(' at <input type="number" min="0" max="23" id="pipes\_hh" name="pipes\_hh" value="' . esc\_attr($hour) . '" size="2" maxlength="2" autocomplete="off"> |
  |  | 137 | : <input type="number" min="0" max="59" id="pipes\_mn" name="pipes\_mn" value="' . esc\_attr($minute) . '" size="2" maxlength="2" autocomplete="off"></td>'); |
  | 129 | 138 | \_e("<script> |
  | 130 | 139 | jQuery(document).ready(function() { |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=1812495#L135) | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=3204551#L144) |  |
  | 135 | 144 | </script>"); |
  | 136 | 145 | case 'pipes\_not\_use\_cache': |
  | 137 |  | \_e('<th scope="row">' . \_\_(~~'Not Use Cache'~~ ) . '</th>'); |
  |  | 146 | \_e('<th scope="row">' . \_\_('Not Use Cache') . '</th>'); |
  | 138 | 147 | \_e('<td>'); |
  | 139 | 148 |  |
  | 140 | 149 | \_e('<fieldset><legend class="screen-reader-text"><span>Not Use Cache</span></legend> |
  | 141 |  | <label title="Yes"><input type="radio" name="' . ~~$setting->option\_name . '" value="1" ' . ( ( $setting->option\_value == 1 ) ? 'checked="checked"' : ''~~ ) . '> |
  |  | 150 | <label title="Yes"><input type="radio" name="' . esc\_attr($setting->option\_name) . '" value="1" ' . (($setting->option\_value == 1) ? 'checked="checked"' : '') . '> |
  | 142 | 151 | <span>Yes, I want the cronjob will be executed getting data directly from the source, not from Cache.</span></label><br> |
  | 143 |  | <label title="No"><input type="radio" name="' . ~~$setting->option\_name . '" value="0" ' . ( ( $setting->option\_value == 0 ) ? 'checked="checked"' : ''~~ ) . '> |
  |  | 152 | <label title="No"><input type="radio" name="' . esc\_attr($setting->option\_name) . '" value="0" ' . (($setting->option\_value == 0) ? 'checked="checked"' : '') . '> |
  | 144 | 153 | <span>No, cronjob will get data from the cache if the cache is not expired</span>.</label><br /> |
  | 145 | 154 | </fieldset>'); |
  | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=1812495#L156) | [‚Ä¶](/browser/wp-pipes/trunk/views/settings/tmpl/default.php?rev=3204551#L165) |  |
  | 156 | 165 | <input type="hidden" name="task" value="save" /> |
  | 157 | 166 |  |
  |  | 167 | <input type="hidden" name="nonce\_token" value="<?php echo $nonce\_token; ?>" /> |
  |  | 168 |  |
  | 158 | 169 | <p class="submit"> |
  | 159 | 170 | <input type="submit" name="submit" id="submit" class="button button-primary" value="Save Changes" /> |
  | 160 |  | <a href="admin.php?page=pipes.pipes&task=pipes\_restore\_default\_options" class="btn btn-primary btn-default" style="float: right;">Restore</a> |
  | 161 |  | <a href="admin.php?page=pipes.pipes&task=delete\_cache\_folder" class="btn btn-primary btn-default" style="float: right; margin-right: 20px;">Clear Cache</a> |
  |  | 171 |  |
  |  | 172 | <a href="<?php echo 'admin.php?page=pipes.pipes&task=pipes\_restore\_default\_options&nonce=' . $nonce\_token; ?>" class="btn btn-primary btn-default" style="float: right;">Restore</a> |
  |  | 173 |  |
  |  | 174 | <a href="<?php echo 'admin.php?page=pipes.pipes&task=delete\_cache\_folder&nonce=' . $nonce\_token; ?>" class="btn btn-primary btn-default" style="float: right; margin-right: 20px;">Clear Cache</a> |
  | 162 | 175 | </p> |
  | 163 | 176 | </form> |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3204551)
* [Zip Archive](?format=zip&new=3204551)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


