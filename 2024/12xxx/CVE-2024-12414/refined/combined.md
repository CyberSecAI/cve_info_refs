=== Content from plugins.trac.wordpress.org_a34758b6_20250114_195129.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fthemify-store-locator%2Ftags%2F1.1.9%2Fincludes%2Finit.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/themify-store-locator/tags/1.1.9/includes/init.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/themify-store-locator/tags/1.1.9/includes/init.php)

---

# [source:](/browser?order=name "Go to repository root") [themify-store-locator](/browser/themify-store-locator?order=name "View themify-store-locator")/[tags](/browser/themify-store-locator/tags?order=name "View tags")/[1.1.9](/browser/themify-store-locator/tags/1.1.9?order=name "View 1.1.9")/[includes](/browser/themify-store-locator/tags/1.1.9/includes?order=name "View includes")/[init.php](/browser/themify-store-locator/tags/1.1.9/includes/init.php?order=name "View init.php")

View diff against:

View revision:

| [Last change](/changeset/3095371/themify-store-locator/tags/1.1.9/includes/init.php "View differences") on this file was [3095371](/changeset/3095371/ "View changeset 3095371"), checked in by themifyme, [8 months ago](/timeline?from=2024-05-30T22%3A26%3A10Z&precision=second "See timeline at 05/30/2024 10:26:10 PM") |
| --- |
| update |
| **File size:** 20.2 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | class Themify\_Store\_Locator { |
| [4](#L4) |  |
| [5](#L5) | private $post\_type = 'themify\_storelocator'; |
| [6](#L6) | private $post\_slug = 'store'; |
| [7](#L7) | public $repeating=false; |
| [8](#L8) | /\*\* |
| [9](#L9) | \* Creates or returns an instance of this class. |
| [10](#L10) | \* |
| [11](#L11) | \* @return      A single instance of this class. |
| [12](#L12) | \*/ |
| [13](#L13) | public static function get\_instance() { |
| [14](#L14) | static $instance=null; |
| [15](#L15) | if($instance===null){ |
| [16](#L16) | $instance=new self; |
| [17](#L17) | } |
| [18](#L18) | return $instance; |
| [19](#L19) | } |
| [20](#L20) |  |
| [21](#L21) | private function \_\_construct() { |
| [22](#L22) | add\_action( 'init', array( $this, 'i18n' ), 5 ); |
| [23](#L23) | add\_action( 'after\_setup\_theme', array( $this, 'custom\_image\_size' )); |
| [24](#L24) | add\_action( 'init', array( $this, 'register\_post\_type' ) ); |
| [25](#L25) | add\_filter( 'query\_vars',  array( $this, 'add\_query\_vars\_filter') ); |
| [26](#L26) | if ( is\_admin() ) { |
| [27](#L27) | add\_action( 'admin\_init', array( $this, 'activation\_redirect' ) ); |
| [28](#L28) | add\_action( 'admin\_menu', array( $this,'setting\_menu' ) ); |
| [29](#L29) | add\_action( 'admin\_notices', array($this,'error\_notice') ); |
| [30](#L30) | add\_action( 'admin\_enqueue\_scripts', array( $this, 'admin\_enqueue' ) ); |
| [31](#L31) | add\_filter( 'themify\_specific\_post\_types', array( $this, 'specific\_post\_types' ) ); |
| [32](#L32) | add\_filter( 'themify\_metabox/fields/themify-meta-boxes', array( $this, 'meta\_box' ), 999 ); |
| [33](#L33) | add\_action( 'wp\_ajax\_themify\_sl\_ajax', array( $this, 'get\_store\_locations' )); |
| [34](#L34) | add\_action( 'wp\_ajax\_nopriv\_themify\_sl\_ajax', array( $this, 'get\_store\_locations' )); |
| [35](#L35) | if ( function\_exists( 'themify\_is\_themify\_theme' ) ) { |
| [36](#L36) | add\_filter( 'themify\_exclude\_CPT\_for\_sidebar', array( $this, 'exclude\_sidebar\_setting' ) ); |
| [37](#L37) | } |
| [38](#L38) | } else { |
| [39](#L39) | add\_action( 'wp\_enqueue\_scripts', array( $this, 'user\_enqueue' )); |
| [40](#L40) | add\_filter( 'single\_template', array( $this, 'single\_post\_template' ), 1 ); |
| [41](#L41) | add\_shortcode( 'tsl\_map', array( $this, 'shortcode\_map' ) ); |
| [42](#L42) | add\_shortcode( 'tsl\_stores', array( $this, 'shortcode\_store' ) ); |
| [43](#L43) | } |
| [44](#L44) | if ( current\_user\_can( 'publish\_posts' ) && get\_user\_option( 'rich\_editing' ) == 'true' ) { |
| [45](#L45) | add\_filter( 'mce\_external\_plugins', array( $this, 'mce\_external\_plugins' ) ); |
| [46](#L46) | add\_filter( 'mce\_buttons', array( $this, 'mce\_buttons' ) ); |
| [47](#L47) | add\_action( 'wp\_enqueue\_editor', array( $this, 'tinymce\_localize' ) ); |
| [48](#L48) | } |
| [49](#L49) | } |
| [50](#L50) |  |
| [51](#L51) | public function i18n() { |
| [52](#L52) | load\_plugin\_textdomain( 'themify-store-locator', false, plugin\_basename( THEMIFY\_STORE\_LOCATOR\_DIR ) . '/languages' ); |
| [53](#L53) | } |
| [54](#L54) |  |
| [55](#L55) | public function error\_notice() { |
| [56](#L56) | $map\_key = self::get\_api\_key(); |
| [57](#L57) | if ( empty( $map\_key ) ) { ?> |
| [58](#L58) | <div class="notice notice-error"> |
| [59](#L59) | <p><?php printf( \_\_('Themify Store Locator: missing Google Map Api Key, <a href="%s">click Here</a> to add Map Api.','themify-store-locator'), admin\_url( 'edit.php?post\_type=' . $this->post\_type . '&page=themify-sl-setting' ) ); ?></p> |
| [60](#L60) | </div> |
| [61](#L61) | <?php } |
| [62](#L62) | } |
| [63](#L63) |  |
| [64](#L64) | function register\_post\_type() { |
| [65](#L65) | $this->post\_slug = get\_option( 'themify\_store\_base\_slug','store' ); |
| [66](#L66) | $labels = array( |
| [67](#L67) | 'name'               => \_x( 'Store Locations', 'post type general name', 'themify-store-locator' ), |
| [68](#L68) | 'singular\_name'      => \_x( 'Store Locator', 'post type singular name', 'themify-store-locator' ), |
| [69](#L69) | 'menu\_name'          => \_x( 'Store Locations', 'admin menu', 'themify-store-locator' ), |
| [70](#L70) | 'name\_admin\_bar'     => \_x( 'Store Locations', 'add new on admin bar', 'themify-store-locator' ), |
| [71](#L71) | 'add\_new'            => \_x( 'Add New', 'book', 'themify-store-locator' ), |
| [72](#L72) | 'add\_new\_item'       => \_\_( 'Add New Location', 'themify-store-locator' ), |
| [73](#L73) | 'new\_item'           => \_\_( 'New Store Location', 'themify-store-locator' ), |
| [74](#L74) | 'edit\_item'          => \_\_( 'Edit Location', 'themify-store-locator' ), |
| [75](#L75) | 'all\_items'          => \_\_( 'Manage Locations', 'themify-store-locator' ), |
| [76](#L76) | 'not\_found'          => \_\_( 'No store location found.', 'themify-store-locator' ), |
| [77](#L77) | 'not\_found\_in\_trash' => \_\_( 'No store location found in Trash.', 'themify-store-locator' ) |
| [78](#L78) | ); |
| [79](#L79) |  |
| [80](#L80) | $args = array( |
| [81](#L81) | 'labels'             => $labels, |
| [82](#L82) | 'description'        => \_\_( 'Store Locations for Themify Store Locator map.', 'your-plugin-textdomain' ), |
| [83](#L83) | 'public'             => true, |
| [84](#L84) | 'publicly\_queryable' => true, |
| [85](#L85) | 'show\_ui'            => true, |
| [86](#L86) | 'show\_in\_menu'       => true, |
| [87](#L87) | 'show\_in\_nav\_menus'  => true, |
| [88](#L88) | 'query\_var'          => true, |
| [89](#L89) | 'rewrite'            => array( 'slug' => $this->post\_slug ), |
| [90](#L90) | 'capability\_type'    => 'post', |
| [91](#L91) | 'menu\_position'      => 6, /\* below Posts \*/ |
| [92](#L92) | 'has\_archive'        => false, |
| [93](#L93) | 'supports'           => array( 'title', 'editor', 'thumbnail' ) |
| [94](#L94) | ); |
| [95](#L95) |  |
| [96](#L96) | register\_post\_type( $this->post\_type , $args ); |
| [97](#L97) |  |
| [98](#L98) | // Register Category Taxonomy |
| [99](#L99) | $labels = array( |
| [100](#L100) | 'name'              => \_x( 'Categories', 'Store taxonomy general name', 'themify-store-locator' ), |
| [101](#L101) | 'singular\_name'     => \_x( 'Category', 'Store taxonomy singular name', 'themify-store-locator' ), |
| [102](#L102) | 'search\_items'      => \_\_( 'Search Categories', 'themify-store-locator' ), |
| [103](#L103) | 'all\_items'         => \_\_( 'All Categories', 'themify-store-locator' ), |
| [104](#L104) | 'parent\_item'       => \_\_( 'Parent Category', 'themify-store-locator' ), |
| [105](#L105) | 'parent\_item\_colon' => \_\_( 'Parent Category:', 'themify-store-locator' ), |
| [106](#L106) | 'edit\_item'         => \_\_( 'Edit Category', 'themify-store-locator' ), |
| [107](#L107) | 'update\_item'       => \_\_( 'Update Category', 'themify-store-locator' ), |
| [108](#L108) | 'add\_new\_item'      => \_\_( 'Add New Category', 'themify-store-locator' ), |
| [109](#L109) | 'new\_item\_name'     => \_\_( 'New Category Name', 'themify-store-locator' ), |
| [110](#L110) | 'menu\_name'         => \_\_( 'Categories', 'themify-store-locator' ), |
| [111](#L111) | ); |
| [112](#L112) |  |
| [113](#L113) | $args = array( |
| [114](#L114) | 'hierarchical'      => true, |
| [115](#L115) | 'labels'            => $labels, |
| [116](#L116) | 'show\_ui'           => true, |
| [117](#L117) | 'show\_admin\_column' => true, |
| [118](#L118) | 'query\_var'         => true, |
| [119](#L119) | 'rewrite'           => array( 'slug' => 'store-category' ), |
| [120](#L120) | ); |
| [121](#L121) |  |
| [122](#L122) | register\_taxonomy( 'store\_category', array( $this->post\_type ), $args ); |
| [123](#L123) |  |
| [124](#L124) | unset( $args ); |
| [125](#L125) | unset( $labels ); |
| [126](#L126) | } |
| [127](#L127) |  |
| [128](#L128) | function setting\_menu(){ |
| [129](#L129) | add\_submenu\_page( 'edit.php?post\_type='.$this->post\_type, \_\_('Themify Store Locator Settings','themify-store-locator'), \_\_('Settings','themify-store-locator'), 'administrator', 'themify-sl-setting', array($this,'setting\_page') ); |
| [130](#L130) | add\_submenu\_page( 'edit.php?post\_type='.$this->post\_type, \_\_('About Themify Store Locator','themify-store-locator'), \_\_('About','themify-store-locator'), 'administrator', 'themify-sl-about', array($this,'about\_page') ); |
| [131](#L131) |  |
| [132](#L132) | } |
| [133](#L133) |  |
| [134](#L134) | function custom\_image\_size(){ |
| [135](#L135) | add\_image\_size( 'tsl-single-size', get\_option('single\_image\_size\_w',1024), get\_option('single\_image\_size\_h',768), true ); |
| [136](#L136) | add\_image\_size( 'tsl-archive-size', get\_option('archive\_image\_size\_w',250), get\_option('archive\_image\_size\_h',250), true ); |
| [137](#L137) | } |
| [138](#L138) |  |
| [139](#L139) | function setting\_page(){ |
| [140](#L140) | if(isset($\_POST['action']) && $\_POST['action'] == 'themify\_sl\_data'){ |
| [141](#L141) | update\_option( 'themify\_sl\_map\_api', esc\_sql($\_REQUEST['google\_map\_api']) ); |
| [142](#L142) | update\_option( 'themify\_store\_base\_slug', esc\_sql($\_REQUEST['store\_locator\_slug']) ); |
| [143](#L143) | update\_option( 'archive\_image\_size\_w', esc\_sql($\_REQUEST['archive\_image\_size\_width']) ); |
| [144](#L144) | update\_option( 'archive\_image\_size\_h', esc\_sql($\_REQUEST['archive\_image\_size\_height']) ); |
| [145](#L145) | update\_option( 'single\_image\_size\_w', esc\_sql($\_REQUEST['single\_image\_size\_width']) ); |
| [146](#L146) | update\_option( 'single\_image\_size\_h', esc\_sql($\_REQUEST['single\_image\_size\_height']) ); |
| [147](#L147) | } |
| [148](#L148) | $arhive\_width  = get\_option('archive\_image\_size\_w',250); |
| [149](#L149) | $arhive\_height = get\_option('archive\_image\_size\_h',250); |
| [150](#L150) | $single\_width  = get\_option('single\_image\_size\_w',1024); |
| [151](#L151) | $single\_height  = get\_option('single\_image\_size\_h',768); |
| [152](#L152) | ?> |
| [153](#L153) |  |
| [154](#L154) | <div class="wrap"> |
| [155](#L155) | <h2><?php echo \_\_( 'Themify Store Locator Settings', 'themify-store-locator' ); ?></h2> |
| [156](#L156) | <form action="" method="post"> |
| [157](#L157) | <style> |
| [158](#L158) | .sl\_table { |
| [159](#L159) | text-align:left; |
| [160](#L160) | width:100%; |
| [161](#L161) | } |
| [162](#L162) | .first\_th h3{ |
| [163](#L163) | vertical-align: text-top; |
| [164](#L164) | margin-top:0; |
| [165](#L165) | } |
| [166](#L166) | </style> |
| [167](#L167) | <input type="hidden" name="action" value="themify\_sl\_data" /> |
| [168](#L168) | <br> |
| [169](#L169) | <table class="sl\_table"> |
| [170](#L170) | <tr> |
| [171](#L171) | <th class="first\_th" style="width:25%;"><h3><label for="google\_map\_api"><?php echo \_\_( 'Google Map Key', 'themify-store-locator' ); ?></label></h3></th> |
| [172](#L172) | <td > |
| [173](#L173) | <?php echo sprintf('<input type="text" id="google\_map\_api" size="55" name="google\_map\_api" placeholder="%s" value="%s" autofocus><br>',\_\_( 'Google Map API Goes Here', 'themify-store-locator' ), esc\_attr(get\_option('themify\_sl\_map\_api',''))); ?> |
| [174](#L174) | <span class="pushlabel"> |
| [175](#L175) | <small> |
| [176](#L176) | <?php printf( \_\_( 'Google API Key is required to use the plugin. <a href="%s">Generate an API key</a> and insert it here.', 'themify-store-locator' ), 'https://developers.google.com/maps/documentation/javascript/get-api-key' ); ?> |
| [177](#L177) | </small><br> |
| [178](#L178) | <small> |
| [179](#L179) | <?php printf( \_\_( 'Geocoding API must be enabled. Go to your <a href="%s">GCP dashboard</a> and click on "ENABLE APIS AND SERVICES", find "Geocoding API" and make sure it\'s enabled.', 'themify-store-locator' ), 'https://console.cloud.google.com/apis/dashboard' ); ?> |
| [180](#L180) | </small> |
| [181](#L181) | </span> |
| [182](#L182) | </td> |
| [183](#L183) | </tr> |
| [184](#L184) | <tr> |
| [185](#L185) | <th class="first\_th" style="width:25%;"><h3><label for="store\_slug"><?php echo \_\_( 'Store Base Slug', 'themify-store-locator' ); ?></label></h3></th> |
| [186](#L186) | <td > |
| [187](#L187) | <?php echo sprintf('<input type="text" id="store\_slug" size="55" name="store\_locator\_slug" value="%s" autofocus><br>', esc\_attr($this->post\_slug)); ?> |
| [188](#L188) | <span class="pushlabel"><small><?php echo \_\_('Use only lowercase letters, numbers, underscores and dashes.', 'themify-store-locator'); ?> </small></span> |
| [189](#L189) | <br /> |
| [190](#L190) | <span class="pushlabel"><small><?php echo sprintf(\_\_('After changing this, go to <a href="%s">permalinks</a> and click "Save changes" to refresh them.', 'themify-store-locator'), admin\_url('options-permalink.php')); ?></small></span><br /> |
| [191](#L191) | </td> |
| [192](#L192) | </tr> |
| [193](#L193) | <tr> |
| [194](#L194) | <th class="first\_th" style="width:25%;"><h3><label for="archive\_image\_size"><?php echo \_\_( 'Archive Image Size', 'themify-store-locator' ); ?></label></h3></th> |
| [195](#L195) | <td > |
| [196](#L196) | <?php echo sprintf('<input type="text" id="archive\_image\_size" size="small" name="archive\_image\_size\_width" value="%s"> X <input type="text" id="archive\_image\_size\_height" size="small" name="archive\_image\_size\_height" value="%s">', esc\_attr($arhive\_width), esc\_attr($arhive\_height)); ?> |
| [197](#L197) | <br /><span class="pushlabel"><small><?php \_e( 'Width X Height', 'themify-store-locator' ); ?></small></span> |
| [198](#L198) | </td> |
| [199](#L199) | </tr> |
| [200](#L200) | <tr> |
| [201](#L201) | <th class="first\_th" style="width:25%;"><h3><label for="single\_image\_size"><?php echo \_\_( 'Single Post Image Size', 'themify-store-locator' ); ?></label></h3></th> |
| [202](#L202) | <td > |
| [203](#L203) | <?php echo sprintf('<input type="text" id="single\_image\_size" size="small" name="single\_image\_size\_width" value="%s"> X <input type="text" id="single\_image\_size\_height" size="small" name="single\_image\_size\_height" value="%s">', esc\_attr($single\_width), esc\_attr($single\_height)); ?> |
| [204](#L204) | <br /><span class="pushlabel"><small><?php \_e( 'Width X Height', 'themify-store-locator' ); ?></small></span> |
| [205](#L205) | </td> |
| [206](#L206) | </tr> |
| [207](#L207) | </table> |
| [208](#L208) | <?php submit\_button(); ?> |
| [209](#L209) | </form> |
| [210](#L210) | </div> |
| [211](#L211) |  |
| [212](#L212) | <?php |
| [213](#L213) |  |
| [214](#L214) | } |
| [215](#L215) |  |
| [216](#L216) | function about\_page(){ |
| [217](#L217) | include (THEMIFY\_STORE\_LOCATOR\_DIR.'assets/doc/about.html'); |
| [218](#L218) | } |
| [219](#L219) |  |
| [220](#L220) | function specific\_post\_types( $types ) { |
| [221](#L221) | $types[] = $this->post\_type; |
| [222](#L222) | return $types; |
| [223](#L223) | } |
| [224](#L224) |  |
| [225](#L225) | function meta\_box( $panels ) { |
| [226](#L226) | /\* disabled in Page Options frontend editor \*/ |
| [227](#L227) | if ( ! empty( $\_GET['tf-meta-opts'] ) ) { |
| [228](#L228) | return $panels; |
| [229](#L229) | } |
| [230](#L230) |  |
| [231](#L231) | $options = include( $this->get\_view\_path( 'config-for-include.php' ) ); |
| [232](#L232) | $panels = array\_merge( [ array( |
| [233](#L233) | 'name'=> \_\_( 'Store Info', 'themify' ), |
| [234](#L234) | 'id' => 'themify-store-locator', |
| [235](#L235) | 'options' => $options, |
| [236](#L236) | 'pages' => $this->post\_type, |
| [237](#L237) | 'default\_active' => true, |
| [238](#L238) | ) ], $panels ); |
| [239](#L239) | return $panels; |
| [240](#L240) | } |
| [241](#L241) |  |
| [242](#L242) | function is\_admin\_screen() { |
| [243](#L243) | $screen = get\_current\_screen(); |
| [244](#L244) | return $screen->base === 'post' && $screen->post\_type === $this->post\_type; |
| [245](#L245) | } |
| [246](#L246) |  |
| [247](#L247) | public function admin\_enqueue() { |
| [248](#L248) | if( ! $this->is\_admin\_screen() ) |
| [249](#L249) | return; |
| [250](#L250) | self::themify\_enque\_style( 'themify-icons', THEMIFY\_STORE\_LOCATOR\_URI . 'includes/themify-icons/themify-icons.css', null, THEMIFY\_STORE\_LOCATOR\_VERSION); |
| [251](#L251) | wp\_enqueue\_script( 'themify-store-locator-marker', THEMIFY\_STORE\_LOCATOR\_URI . 'assets/js/marker.js', null, THEMIFY\_STORE\_LOCATOR\_VERSION, true ); |
| [252](#L252) | wp\_enqueue\_script( 'themify-store-locator', THEMIFY\_STORE\_LOCATOR\_URI . 'assets/js/admin\_js.js', null, THEMIFY\_STORE\_LOCATOR\_VERSION, true ); |
| [253](#L253) | wp\_localize\_script( 'themify-store-locator', 'ThemifyStoreLocator', array( |
| [254](#L254) | 'map\_key' => self::get\_api\_key(), |
| [255](#L255) | )); |
| [256](#L256) | } |
| [257](#L257) |  |
| [258](#L258) | function user\_enqueue(){ |
| [259](#L259) | wp\_enqueue\_script( 'themify-store-locator', THEMIFY\_STORE\_LOCATOR\_URI . 'assets/js/user\_js.js', null, THEMIFY\_STORE\_LOCATOR\_VERSION, true ); |
| [260](#L260) | wp\_localize\_script( 'themify-store-locator', 'themifyStoreLocator', array( |
| [261](#L261) | 'ajaxurl' => admin\_url( 'admin-ajax.php' ), |
| [262](#L262) | 'marker\_js' =>  THEMIFY\_STORE\_LOCATOR\_URI . 'assets/js/marker.js', |
| [263](#L263) | 'map\_js' => '//maps.googleapis.com/maps/api/js?key=' . self::get\_api\_key(), |
| [264](#L264) | ) ); |
| [265](#L265) | self::themify\_enque\_style( 'themify-store-locator', THEMIFY\_STORE\_LOCATOR\_URI . 'assets/css/themify-store-locator-style.css', null, THEMIFY\_STORE\_LOCATOR\_VERSION, 'all' ); |
| [266](#L266) | } |
| [267](#L267) |  |
| [268](#L268) | function tinymce\_localize() { |
| [269](#L269) | $fields = include( $this->get\_view\_path( 'shortcode-fields.php' ) ); |
| [270](#L270) | wp\_localize\_script( 'editor', 'mceThemifyStoreLocator', array( |
| [271](#L271) | 'shortcodes' => $fields, |
| [272](#L272) | 'editor' => array( |
| [273](#L273) | 'menuTooltip' => \_\_('Themify Store Locator Shortcodes', 'themify-store-locator'), |
| [274](#L274) | 'menuName' => \_\_('Themify Store Locator Shortcodes', 'themify-store-locator'), |
| [275](#L275) | ), |
| [276](#L276) | 'url' => THEMIFY\_STORE\_LOCATOR\_URI |
| [277](#L277) | )); |
| [278](#L278) | } |
| [279](#L279) |  |
| [280](#L280) | function mce\_external\_plugins( $mce\_external\_plugins ) { |
| [281](#L281) | $mce\_external\_plugins['mceThemifyStoreLocator'] = THEMIFY\_STORE\_LOCATOR\_URI . 'assets/js/tinymce.js'; |
| [282](#L282) |  |
| [283](#L283) | return $mce\_external\_plugins; |
| [284](#L284) | } |
| [285](#L285) |  |
| [286](#L286) | function mce\_buttons( $mce\_buttons ) { |
| [287](#L287) | array\_push( $mce\_buttons, 'separator', 'mceThemifyStoreLocator' ); |
| [288](#L288) | return $mce\_buttons; |
| [289](#L289) | } |
| [290](#L290) |  |
| [291](#L291) | function get\_store\_locations(){ |
| [292](#L292) | $category=''; |
| [293](#L293) | if(!empty($\_POST['category'])){ |
| [294](#L294) | $category = sanitize\_text\_field($\_POST['category']); |
| [295](#L295) | } |
| [296](#L296) | $stores = $this->get\_stores($category); |
| [297](#L297) | $locations = array(); |
| [298](#L298) | foreach($stores as $store){ |
| [299](#L299) | $location = array('position'=>'','content'=>''); |
| [300](#L300) | $post\_meta = get\_post\_meta($store->ID); |
| [301](#L301) | $temp = json\_decode(get\_post\_meta($store->ID,'themify\_storelocator\_address',true),true); |
| [302](#L302) | if ( empty( $temp['position'] ) ) { |
| [303](#L303) | continue; |
| [304](#L304) | } |
| [305](#L305) | $location['position'] = $temp['position']; |
| [306](#L306) | $location['content'] = '<div style="text-align:center;width:100%;padding:10px 0px 10px 14px"><a href="'.esc\_attr(get\_post\_permalink($store->ID)).'" target="\_blank" style="text-decoration:none;color:black"><h3><b>'.esc\_html($store->post\_title).'</b></h3></a><div style="line-height:16px;font-size:13px;">'.esc\_html($temp['address']).'<br>'; |
| [307](#L307) | $temp = json\_decode(get\_post\_meta($store->ID,'themify\_storelocator\_numbers',true),true); |
| [308](#L308) | foreach($temp as $data){ |
| [309](#L309) | $location['content'] .= $data['lable'].' '.$data['number'].'<br>'; |
| [310](#L310) | } |
| [311](#L311) | $location['content'] .= '</div><div style="margin-top:5px;line-height:16px;">'; |
| [312](#L312) | $temp = json\_decode(get\_post\_meta($store->ID,'themify\_storelocator\_timing',true),true); |
| [313](#L313) | foreach($temp as $data){ |
| [314](#L314) | $location['content'] .= $data['lable'].': '.$data['open']; |
| [315](#L315) | if(!empty($data['close'])){ |
| [316](#L316) | $location['content'] .= ' - '.$data['close']; |
| [317](#L317) | } |
| [318](#L318) | $location['content'] .= '<br>'; |
| [319](#L319) | } |
| [320](#L320) | $location['content'] .= '</div></div>'; |
| [321](#L321) | $locations[] = $location; |
| [322](#L322) | } |
| [323](#L323) | echo json\_encode($locations); |
| [324](#L324) | } |
| [325](#L325) |  |
| [326](#L326) | function single\_post\_template($template){ |
| [327](#L327) | global $post; |
| [328](#L328) | if($post->post\_type === $this->post\_type){ |
| [329](#L329) | $template = $this->get\_view\_path("single-loop.php","template"); |
| [330](#L330) | } |
| [331](#L331) | return $template; |
| [332](#L332) | } |
| [333](#L333) |  |
| [334](#L334) | private function get\_stores($category=null) { |
| [335](#L335) | $args = array( |
| [336](#L336) | 'post\_type' => $this->post\_type, |
| [337](#L337) | 'post\_per\_page' => -1, |
| [338](#L338) | 'post\_status' => 'publish', |
| [339](#L339) | 'nopaging'      =>      true |
| [340](#L340) | ); |
| [341](#L341) | if(!empty($category)){ |
| [342](#L342) | $args['tax\_query'] = array( |
| [343](#L343) | array ( |
| [344](#L344) | 'taxonomy' => 'store\_category', |
| [345](#L345) | 'field' => 'slug', |
| [346](#L346) | 'terms' => $category, |
| [347](#L347) | ) |
| [348](#L348) | ); |
| [349](#L349) | } |
| [350](#L350) | $the\_query = new WP\_Query(); |
| [351](#L351) | $posts = $the\_query->query( $args ); |
| [352](#L352) | return $posts; |
| [353](#L353) | } |
| [354](#L354) |  |
| [355](#L355) | public function get\_view\_path( $name, $template = false ) { |
| [356](#L356) | if( locate\_template( 'themify-store-locator/' . $name ) ) { |
| [357](#L357) | return locate\_template( 'themify-store-locator/' . $name ); |
| [358](#L358) | } elseif($template && file\_exists( THEMIFY\_STORE\_LOCATOR\_DIR . $template .'/' . $name )){ |
| [359](#L359) | return THEMIFY\_STORE\_LOCATOR\_DIR . $template .'/' . $name; |
| [360](#L360) | } elseif( file\_exists( THEMIFY\_STORE\_LOCATOR\_DIR . 'views/' . $name ) ) { |
| [361](#L361) | return THEMIFY\_STORE\_LOCATOR\_DIR . 'views/' . $name; |
| [362](#L362) | } |
| [363](#L363) |  |
| [364](#L364) | return false; |
| [365](#L365) | } |
| [366](#L366) |  |
| [367](#L367) | function shortcode\_defaults($for){ |
| [368](#L368) | $default = array( |
| [369](#L369) | 'map' => array( |
| [370](#L370) | 'category' => '', |
| [371](#L371) | 'width' => '100%', |
| [372](#L372) | 'height' => '500px', |
| [373](#L373) | 'map\_controls' => 'yes', |
| [374](#L374) | 'scrollwheel' => 'no', |
| [375](#L375) | 'mobile\_draggable' => 'no' |
| [376](#L376) | ), |
| [377](#L377) | 'store' => array( |
| [378](#L378) | 'category' => '', |
| [379](#L379) | 'posts\_per\_page' => '', |
| [380](#L380) | 'layout' => 'fullwidth', |
| [381](#L381) | 'hours' => 'yes', |
| [382](#L382) | 'contact' => 'yes', |
| [383](#L383) | 'description' => 'yes', |
| [384](#L384) | 'feature\_image' => 'yes', |
| [385](#L385) | 'unlink\_title' => 'no', |
| [386](#L386) | 'pagination' => 'no', |
| [387](#L387) | 'order' => '', |
| [388](#L388) | 'orderby' => '' |
| [389](#L389) | ) |
| [390](#L390) | ); |
| [391](#L391) | return ($default[$for])? $default[$for] : array(); |
| [392](#L392) | } |
| [393](#L393) |  |
| [394](#L394) | function add\_query\_vars\_filter( $vars ){ |
| [395](#L395) | $vars[] = 'tsl\_paged'; |
| [396](#L396) | return $vars; |
| [397](#L397) | } |
| [398](#L398) |  |
| [399](#L399) | function shortcode\_store( $atts, $content = null ) { |
| [400](#L400) |  |
| [401](#L401) | extract(shortcode\_atts( $this->shortcode\_defaults('store'), $atts )); |
| [402](#L402) |  |
| [403](#L403) | $layout\_types = array('fullwidth','grid2', 'grid3', 'grid4');   // allowed layouts |
| [404](#L404) |  |
| [405](#L405) | if(empty($posts\_per\_page) || !is\_numeric($posts\_per\_page)){ |
| [406](#L406) | $posts\_per\_page = get\_option( 'posts\_per\_page' ); |
| [407](#L407) | } |
| [408](#L408) | if(!in\_array($layout,$layout\_types,true)){ |
| [409](#L409) | $layout = 'fullwidth'; |
| [410](#L410) | } |
| [411](#L411) |  |
| [412](#L412) | $args = array( |
| [413](#L413) | 'post\_type' => $this->post\_type, |
| [414](#L414) | 'post\_status' => 'publish', |
| [415](#L415) | 'posts\_per\_page' => $posts\_per\_page |
| [416](#L416) | ); |
| [417](#L417) | if(!empty($category)){ |
| [418](#L418) | $args['tax\_query'] = array( |
| [419](#L419) | array ( |
| [420](#L420) | 'taxonomy' => 'store\_category', |
| [421](#L421) | 'field' => 'slug', |
| [422](#L422) | 'terms' => sanitize\_text\_field($category), |
| [423](#L423) | ) |
| [424](#L424) | ); |
| [425](#L425) | } |
| [426](#L426) | if(!empty($order)){ |
| [427](#L427) | $args['order'] = sanitize\_text\_field($order); |
| [428](#L428) | } |
| [429](#L429) | if(!empty($orderby)){ |
| [430](#L430) | $args['orderby'] = sanitize\_text\_field($orderby); |
| [431](#L431) | } |
| [432](#L432) | if($pagination === 'yes'){ |
| [433](#L433) | if(is\_front\_page()){ |
| [434](#L434) | $paged = ( get\_query\_var('page') ) ? get\_query\_var('page') : 1; |
| [435](#L435) | }else |
| [436](#L436) | $paged = ( get\_query\_var('tsl\_paged') ) ? get\_query\_var('tsl\_paged') : 1; |
| [437](#L437) | $args['paged'] = $paged; |
| [438](#L438) | $args['page'] = $paged; |
| [439](#L439) | } |
| [440](#L440) | $the\_query = new WP\_Query(); |
| [441](#L441) | $stores = $the\_query->query( $args ); |
| [442](#L442) | $is\_single = false; |
| [443](#L443) | $loop\_tmpl = $this->get\_view\_path('archive-loop.php','template'); |
| [444](#L444) | $this->repeating = true; |
| [445](#L445) | ob\_start(); |
| [446](#L446) | include $loop\_tmpl; |
| [447](#L447) | $html = ob\_get\_contents(); |
| [448](#L448) | ob\_end\_clean(); |
| [449](#L449) | $this->repeating = false; |
| [450](#L450) |  |
| [451](#L451) | return $html; |
| [452](#L452) | } |
| [453](#L453) |  |
| [454](#L454) | function shortcode\_map( $atts, $content = null ) { |
| [455](#L455) | $atts = shortcode\_atts( $this->shortcode\_defaults('map'), $atts ); |
| [456](#L456) | $atts['single\_post\_map'] = false; |
| [457](#L457) | ob\_start(); |
| [458](#L458) | ?> |
| [459](#L459) | <div class="themify\_SL\_map\_container themify\_SL\_scripts" style="display:none;" data-settings="<?php echo base64\_encode(json\_encode($atts))?>"> |
| [460](#L460) | <span class="wait\_sl"><?php \_e( 'Wait Loading Map...', 'themify-store-locator' ); ?></span> |
| [461](#L461) | </div> |
| [462](#L462) | <?php |
| [463](#L463) | $html = ob\_get\_contents(); |
| [464](#L464) | ob\_end\_clean(); |
| [465](#L465) |  |
| [466](#L466) | return $html; |
| [467](#L467) | } |
| [468](#L468) |  |
| [469](#L469) | public function activation\_redirect() { |
| [470](#L470) | if( get\_option( 'themify\_store\_locator\_activation\_redirect', false ) ) { |
| [471](#L471) | $this->register\_post\_type(); |
| [472](#L472) | flush\_rewrite\_rules(); |
| [473](#L473) | delete\_option( 'themify\_store\_locator\_activation\_redirect' ); |
| [474](#L474) | wp\_redirect( admin\_url( 'edit.php?post\_type=themify\_storelocator&page=themify-sl-about' ) ); |
| [475](#L475) | } |
| [476](#L476) | } |
| [477](#L477) |  |
| [478](#L478) | private static function themify\_enque\_style($handle, $src = '', $deps = array(), $ver = false, $media = 'all' ){ |
| [479](#L479) | static $is=null; |
| [480](#L480) | if($is===null){ |
| [481](#L481) | $is=  function\_exists('themify\_is\_themify\_theme') && themify\_is\_themify\_theme(); |
| [482](#L482) | } |
| [483](#L483) | if($is===true){ |
| [484](#L484) | themify\_enque\_style($handle,$src,$deps,$ver,$media); |
| [485](#L485) | } |
| [486](#L486) | else{ |
| [487](#L487) | wp\_enqueue\_style($handle,$src,$deps,$ver,$media); |
| [488](#L488) | } |
| [489](#L489) | } |
| [490](#L490) |  |
| [491](#L491) | public function exclude\_sidebar\_setting( $types ) { |
| [492](#L492) | unset($types[$this->post\_type]); |
| [493](#L493) | $types[]=$this->post\_type; |
| [494](#L494) | return $types; |
| [495](#L495) | } |
| [496](#L496) |  |
| [497](#L497) | /\*\* |
| [498](#L498) | \* Returns the Google Maps api key |
| [499](#L499) | \* |
| [500](#L500) | \* @return string|null |
| [501](#L501) | \*/ |
| [502](#L502) | public static function get\_api\_key() { |
| [503](#L503) | static $key = null; |
| [504](#L504) | if ( $key === null ) { |
| [505](#L505) | $key = get\_option( 'themify\_sl\_map\_api', '' ); |
| [506](#L506) | } |
| [507](#L507) |  |
| [508](#L508) | return $key; |
| [509](#L509) | } |
| [510](#L510) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/themify-store-locator/tags/1.1.9/includes/init.php?format=txt)
* [Original Format](/export/3222463/themify-store-locator/tags/1.1.9/includes/init.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_dff4ca6c_20250114_195130.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3206624%2540themify-store-locator%26old%3D3206624%2540themify-store-locator)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3095371/themify-store-locator "Changeset 3095371 for themify-store-locator")
* Next Change →

---

# Changeset [3206624](/changeset/3206624 "Show full changeset") for [themify-store-locator](/browser/themify-store-locator?rev=3206624 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
12/11/2024 11:21:34 PM
([5 weeks](/timeline?from=2024-12-11T23%3A21%3A34Z&precision=second "See timeline at 12/11/2024 11:21:34 PM") ago)

Author:
themifyme
Message:

update

Location:
[themify-store-locator](/browser/themify-store-locator?rev=3206624)
Files:

80 added
3 edited

* [tags/1.2.0](/browser/themify-store-locator/tags/1.2.0?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets](/browser/themify-store-locator/tags/1.2.0/assets?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/css](/browser/themify-store-locator/tags/1.2.0/assets/css?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/css/themify-store-locator-style.css](/browser/themify-store-locator/tags/1.2.0/assets/css/themify-store-locator-style.css?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/css/themify-store-locator-style.css.gz](/browser/themify-store-locator/tags/1.2.0/assets/css/themify-store-locator-style.css.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/doc](/browser/themify-store-locator/tags/1.2.0/assets/doc?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/doc/about.html](/browser/themify-store-locator/tags/1.2.0/assets/doc/about.html?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/img](/browser/themify-store-locator/tags/1.2.0/assets/img?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/img/X\_icon.png](/browser/themify-store-locator/tags/1.2.0/assets/img/X_icon.png?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/img/tsl-editor-icon.png](/browser/themify-store-locator/tags/1.2.0/assets/img/tsl-editor-icon.png?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/js](/browser/themify-store-locator/tags/1.2.0/assets/js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/js/admin\_js.js](/browser/themify-store-locator/tags/1.2.0/assets/js/admin_js.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/js/admin\_js.js.gz](/browser/themify-store-locator/tags/1.2.0/assets/js/admin_js.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/js/marker.js](/browser/themify-store-locator/tags/1.2.0/assets/js/marker.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/js/marker.js.gz](/browser/themify-store-locator/tags/1.2.0/assets/js/marker.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/js/tinymce.js](/browser/themify-store-locator/tags/1.2.0/assets/js/tinymce.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/js/tinymce.js.gz](/browser/themify-store-locator/tags/1.2.0/assets/js/tinymce.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/js/user\_js.js](/browser/themify-store-locator/tags/1.2.0/assets/js/user_js.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/assets/js/user\_js.js.gz](/browser/themify-store-locator/tags/1.2.0/assets/js/user_js.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes](/browser/themify-store-locator/tags/1.2.0/includes?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/init.php](/browser/themify-store-locator/tags/1.2.0/includes/init.php?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-icons](/browser/themify-store-locator/tags/1.2.0/includes/themify-icons?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-icons/themify-icons.css](/browser/themify-store-locator/tags/1.2.0/includes/themify-icons/themify-icons.css?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-icons/themify-icons.css.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-icons/themify-icons.css.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-icons/themify.woff2](/browser/themify-store-locator/tags/1.2.0/includes/themify-icons/themify.woff2?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/css](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/css?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/css/jquery-ui-timepicker.min.css](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/css/jquery-ui-timepicker.min.css?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/css/jquery-ui-timepicker.min.css.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/css/jquery-ui-timepicker.min.css.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/css/page-options-iframe.css](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/css/page-options-iframe.css?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/css/page-options-iframe.css.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/css/page-options-iframe.css.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/css/page-options.css](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/css/page-options.css?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/css/page-options.css.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/css/page-options.css.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/css/styles.css](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/css/styles.css?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/css/styles.css.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/css/styles.css.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/css/themify.minicolors.css](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/css/themify.minicolors.css?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/css/themify.minicolors.css.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/css/themify.minicolors.css.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/example-functions.php](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/example-functions.php?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/img](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/img?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/img/ddbtn-blank.png](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/img/ddbtn-blank.png?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/img/ddbtn-check.png](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/img/ddbtn-check.png?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/img/ddbtn-cross.png](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/img/ddbtn-cross.png?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/img/icon-delete.png](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/img/icon-delete.png?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/img/jquery.minicolors.png](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/img/jquery.minicolors.png?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/img/jquery.minicolors.webp](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/img/jquery.minicolors.webp?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/includes](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/includes?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/includes/themify-field-types.php](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/includes/themify-field-types.php?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/includes/themify-metabox-core.php](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/includes/themify-metabox-core.php?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/includes/themify-metabox-utils.php](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/includes/themify-metabox-utils.php?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/includes/themify-term-fields.php](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/includes/themify-term-fields.php?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/includes/themify-user-fields.php](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/includes/themify-user-fields.php?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/gallery-shortcode.js](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/gallery-shortcode.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/gallery-shortcode.js.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/gallery-shortcode.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/jquery-ui-timepicker.min.js](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/jquery-ui-timepicker.min.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/jquery-ui-timepicker.min.js.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/jquery-ui-timepicker.min.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/media-lib-browse.js](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/media-lib-browse.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/media-lib-browse.js.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/media-lib-browse.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/meta-box-tabs.js](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/meta-box-tabs.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/meta-box-tabs.js.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/meta-box-tabs.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/page-options-modal.js](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/page-options-modal.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/page-options-modal.js.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/page-options-modal.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/page-options.js](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/page-options.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/page-options.js.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/page-options.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/plupload.js](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/plupload.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/plupload.js.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/plupload.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/scripts.js](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/scripts.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/scripts.js.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/scripts.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/themify.minicolors.js](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/themify.minicolors.js?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/js/themify.minicolors.js.gz](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/js/themify.minicolors.js.gz?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/readme.txt](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/readme.txt?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/includes/themify-metabox/themify-metabox.php](/browser/themify-store-locator/tags/1.2.0/includes/themify-metabox/themify-metabox.php?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/readme.txt](/browser/themify-store-locator/tags/1.2.0/readme.txt?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/store\_locator.php](/browser/themify-store-locator/tags/1.2.0/store_locator.php?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/template](/browser/themify-store-locator/tags/1.2.0/template?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/template/archive-loop.php](/browser/themify-store-locator/tags/1.2.0/template/archive-loop.php?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/template/single-loop.php](/browser/themify-store-locator/tags/1.2.0/template/single-loop.php?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/views](/browser/themify-store-locator/tags/1.2.0/views?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/views/config-for-include.php](/browser/themify-store-locator/tags/1.2.0/views/config-for-include.php?rev=3206624 "Show entry in browser")
  (added)
* [tags/1.2.0/views/shortcode-fields.php](/browser/themify-store-locator/tags/1.2.0/views/shortcode-fields.php?rev=3206624 "Show entry in browser")
  (added)
* [trunk/includes/init.php](/browser/themify-store-locator/trunk/includes/init.php?rev=3206624 "Show entry in browser")
  (modified)
  ([2 diffs](#file80 "Show differences"))
* [trunk/readme.txt](/browser/themify-store-locator/trunk/readme.txt?rev=3206624 "Show entry in browser")
  (modified)
  ([1 diff](#file81 "Show differences"))
* [trunk/store\_locator.php](/browser/themify-store-locator/trunk/store_locator.php?rev=3206624 "Show entry in browser")
  (modified)
  ([2 diffs](#file82 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [themify-store-locator/trunk/includes/init.php](/changeset/3206624/themify-store-locator/trunk/includes/init.php "Show the changeset 3206624 restricted to themify-store-locator/trunk/includes/init.php")

  | [r3095371](/browser/themify-store-locator/trunk/includes/init.php?rev=3095371#L139 "Show revision 3095371 of this file in browser") | [r3206624](/browser/themify-store-locator/trunk/includes/init.php?rev=3206624#L139 "Show revision 3206624 of this file in browser") |  |
  | --- | --- | --- |
  | 139 | 139 | function setting\_page(){ |
  | 140 | 140 | if(isset($\_POST['action']) && $\_POST['action'] == 'themify\_sl\_data'){ |
  | 141 |  | update\_option( 'themify\_sl\_map\_api', esc\_sql($\_REQUEST['google\_map\_api']) ); |
  | 142 |  | update\_option( 'themify\_store\_base\_slug', esc\_sql($\_REQUEST['store\_locator\_slug']) ); |
  | 143 |  | update\_option( 'archive\_image\_size\_w', esc\_sql($\_REQUEST['archive\_image\_size\_width']) ); |
  | 144 |  | update\_option( 'archive\_image\_size\_h', esc\_sql($\_REQUEST['archive\_image\_size\_height']) ); |
  | 145 |  | update\_option( 'single\_image\_size\_w', esc\_sql($\_REQUEST['single\_image\_size\_width']) ); |
  | 146 |  | update\_option( 'single\_image\_size\_h', esc\_sql($\_REQUEST['single\_image\_size\_height']) ); |
  |  | 141 | if ( wp\_verify\_nonce( $\_POST['\_wpnonce'], 'themify\_storelocator\_settings' ) ) { |
  |  | 142 | update\_option( 'themify\_sl\_map\_api', esc\_sql($\_REQUEST['google\_map\_api']) ); |
  |  | 143 | update\_option( 'themify\_store\_base\_slug', esc\_sql($\_REQUEST['store\_locator\_slug']) ); |
  |  | 144 | update\_option( 'archive\_image\_size\_w', esc\_sql($\_REQUEST['archive\_image\_size\_width']) ); |
  |  | 145 | update\_option( 'archive\_image\_size\_h', esc\_sql($\_REQUEST['archive\_image\_size\_height']) ); |
  |  | 146 | update\_option( 'single\_image\_size\_w', esc\_sql($\_REQUEST['single\_image\_size\_width']) ); |
  |  | 147 | update\_option( 'single\_image\_size\_h', esc\_sql($\_REQUEST['single\_image\_size\_height']) ); |
  |  | 148 | } |
  | 147 | 149 | } |
  | 148 | 150 | $arhive\_width  = get\_option('archive\_image\_size\_w',250); |
  | […](/browser/themify-store-locator/trunk/includes/init.php?rev=3095371#L155) | […](/browser/themify-store-locator/trunk/includes/init.php?rev=3206624#L157) |  |
  | 155 | 157 | <h2><?php echo \_\_( 'Themify Store Locator Settings', 'themify-store-locator' ); ?></h2> |
  | 156 | 158 | <form action="" method="post"> |
  |  | 159 | <?php |
  |  | 160 | wp\_nonce\_field( 'themify\_storelocator\_settings' ); |
  |  | 161 | ?> |
  | 157 | 162 | <style> |
  | 158 | 163 | .sl\_table { |
* ## [themify-store-locator/trunk/readme.txt](/changeset/3206624/themify-store-locator/trunk/readme.txt "Show the changeset 3206624 restricted to themify-store-locator/trunk/readme.txt")

  | [r3095371](/browser/themify-store-locator/trunk/readme.txt?rev=3095371#L3 "Show revision 3095371 of this file in browser") | [r3206624](/browser/themify-store-locator/trunk/readme.txt?rev=3206624#L3 "Show revision 3206624 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Plugin Name: Themify Store Locator |
  | 4 | 4 | Tags: map, google-map, location, store, shortcode |
  | 5 |  | Requires at least: 4.6 |
  | 6 |  | Tested up to: 6.5.3 |
  | 7 |  | Stable tag: 1.1.9 |
  |  | 5 | Requires at least: 5.2 |
  |  | 6 | Tested up to: 6.7.1 |
  |  | 7 | Stable tag: 1.2.0 |
  |  | 8 | License: GPL v2 |
  |  | 9 | License URI: https://www.gnu.org/licenses/old-licenses/gpl-2.0.html |
  | 8 | 10 |  |
  | 9 | 11 | A free plugin to add store locations and stores map in your WordPress site. |
* ## [themify-store-locator/trunk/store\_locator.php](/changeset/3206624/themify-store-locator/trunk/store_locator.php "Show the changeset 3206624 restricted to themify-store-locator/trunk/store_locator.php")

  | [r3095371](/browser/themify-store-locator/trunk/store_locator.php?rev=3095371#L3 "Show revision 3095371 of this file in browser") | [r3206624](/browser/themify-store-locator/trunk/store_locator.php?rev=3206624#L3 "Show revision 3206624 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Plugin Name:  Themify Store Locator |
  | 4 | 4 | Plugin URI:   https://themify.me/store-locator |
  | 5 |  | Version:      1.~~1.9~~ |
  |  | 5 | Version:      1.2.0 |
  | 6 | 6 | Author:       Themify |
  | 7 | 7 | Author URI:   https://themify.me |
  | […](/browser/themify-store-locator/trunk/store_locator.php?rev=3095371#L14) | […](/browser/themify-store-locator/trunk/store_locator.php?rev=3206624#L14) |  |
  | 14 | 14 |  |
  | 15 | 15 | defined( 'ABSPATH' ) or die( '-1' ); |
  | 16 |  | const THEMIFY\_STORE\_LOCATOR\_VERSION='1.~~1.9~~'; |
  |  | 16 | const THEMIFY\_STORE\_LOCATOR\_VERSION='1.2.0'; |
  | 17 | 17 | register\_activation\_hook( \_\_FILE\_\_, 'themify\_store\_locator\_plugin\_activation' ); |
  | 18 | 18 | add\_action( 'after\_setup\_theme', 'themify\_store\_locator\_setup' ); |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3206624)
* [Zip Archive](?format=zip&new=3206624)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_6c6ba9d5_20250114_195131.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Themify Store Locator <= 1.1.9 - Cross-Site Request Forgery

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Themify Store Locator <= 1.1.9 - Cross-Site Request Forgery

4.3

**Cross-Site Request Forgery (CSRF)**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N)

| CVE | [CVE-2024-12414](https://www.cve.org/CVERecord?id=CVE-2024-12414) |
| --- | --- |
| CVSS | 4.3 (Medium) |
| Publicly Published | December 12, 2024 |
| Last Updated | December 13, 2024 |
| Researcher | [Peter Thaleikis](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/spek) |

### Description

The Themify Store Locator plugin for WordPress is vulnerable to Cross-Site Request Forgery in all versions up to, and including, 1.1.9. This is due to missing or incorrect nonce validation on the setting\_page() function. This makes it possible for unauthenticated attackers to modify the plugin's settings via a forged request granted they can trick a site administrator into performing an action such as clicking on a link.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/themify-store-locator/tags/1.1.9/includes/init.php#L142)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&old=3206624%40themify-store-locator&new=3206624%40themify-store-locator&sfp_email=&sfph_mail=)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fthemify-store-locator%2Fthemify-store-locator-119-cross-site-request-forgery&t=Themify%20Store%20Locator%20%3C%3D%201.1.9%20-%20Cross-Site%20Request%20Forgery "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fthemify-store-locator%2Fthemify-store-locator-119-cross-site-request-forgery&text=Themify%20Store%20Locator%20%3C%3D%201.1.9%20-%20Cross-Site%20Request%20Forgery "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fthemify-store-locator%2Fthemify-store-locator-119-cross-site-request-forgery "LinkedIn")
Email

## Vulnerability Details for Themify Store Locator

#### [Themify Store Locator](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/themify-store-locator)

| Software Type | Plugin |
| --- | --- |
| Software Slug | themify-store-locator [(view on wordpress.org)](https://wordpress.org/plugins/themify-store-locator) |
| Patched? | Yes |
| Remediation | Update to version 1.2.0, or a newer patched version |
| Affected Version | * <= 1.1.9 |
| Patched Version | * 1.2.0 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation


