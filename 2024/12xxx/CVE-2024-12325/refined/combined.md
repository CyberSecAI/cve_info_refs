=== Content from plugins.trac.wordpress.org_179ab784_20250115_082658.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fwaymark%2Ftrunk%2Finc%2FAdmin%2FWaymark_Settings.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468 "Revision 3102468")
* Next Revision →
* [Blame](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/waymark/trunk/inc/Admin/Waymark_Settings.php)

---

# [source:](/browser?order=name "Go to repository root") [waymark](/browser/waymark?order=name "View waymark")/[trunk](/browser/waymark/trunk?order=name "View trunk")/[inc](/browser/waymark/trunk/inc?order=name "View inc")/[Admin](/browser/waymark/trunk/inc/Admin?order=name "View Admin")/[Waymark\_Settings.php](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?order=name "View Waymark_Settings.php")

View diff against:

View revision:

| [Last change](/changeset/3205103/waymark/trunk/inc/Admin/Waymark_Settings.php "View differences") on this file was [3205103](/changeset/3205103/ "View changeset 3205103"), checked in by morehawes, [5 weeks ago](/timeline?from=2024-12-09T20%3A11%3A24Z&precision=second "See timeline at 12/09/2024 08:11:24 PM") |
| --- |
| v1.4.2 |
| **File size:** 73.5 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | class Waymark\_Settings { |
| [4](#L4) | private $settings\_id      = 'Waymark\_Settings'; |
| [5](#L5) | private $page\_slug        = 'waymark-settings'; |
| [6](#L6) | private $default\_content  = 'waymark-settings-tab-tiles'; |
| [7](#L7) | private $current\_settings = []; |
| [8](#L8) | public $tabs              = []; |
| [9](#L9) | public $settings\_nav; |
| [10](#L10) |  |
| [11](#L11) | function \_\_construct() { |
| [12](#L12) |  |
| [13](#L13) | //Execute action? |
| [14](#L14) | if (sizeof($\_POST)) { |
| [15](#L15) | //Clear cache |
| [16](#L16) | if (isset($\_POST['Waymark\_Settings']['advanced']['performance']['clear\_cache'])) { |
| [17](#L17) | $this->execute\_action('clear\_cache'); |
| [18](#L18) | } |
| [19](#L19) | } |
| [20](#L20) |  |
| [21](#L21) | //Get current settings from DB |
| [22](#L22) | $current\_settings = get\_option('Waymark\_Settings'); |
| [23](#L23) | if (is\_array($current\_settings)) { |
| [24](#L24) | $this->current\_settings = $current\_settings; |
| [25](#L25) | } |
| [26](#L26) |  |
| [27](#L27) | /\*\* |
| [28](#L28) | \* =========================================== |
| [29](#L29) | \* =============== SETTINGS NAV ============== |
| [30](#L30) | \* =========================================== |
| [31](#L31) | \*/ |
| [32](#L32) |  |
| [33](#L33) | $this->settings\_nav = [ |
| [34](#L34) | 'label\_maps' => esc\_html\_\_('Maps'), |
| [35](#L35) | 'waymark-settings-tab-tiles' => '-- ' . esc\_html\_\_('Basemaps', 'waymark'), |
| [36](#L36) | 'waymark-settings-section-shortcode\_options' => '-- ' . esc\_html\_\_('Shortcodes', 'waymark'), |
| [37](#L37) | 'waymark-settings-section-elevation\_options' => '-- ' . esc\_html\_\_('Elevation', 'waymark'), |
| [38](#L38) | 'waymark-settings-tab-meta' => '-- ' . esc\_html\_\_('Meta', 'waymark'), |
| [39](#L39) | 'waymark-settings-section-interaction\_options' => '-- ' . esc\_html\_\_('Sleep', 'waymark'), |
| [40](#L40) | 'waymark-settings-section-cluster\_options' => '-- ' . esc\_html\_\_('Clustering', 'waymark'), |
| [41](#L41) | 'waymark-settings-section-map\_options' => '-- ' . esc\_html\_\_('Misc.', 'waymark'), |
| [42](#L42) | 'label\_overlays' => esc\_html\_\_('Overlays'), |
| [43](#L43) | 'waymark-settings-tab-markers' => '-- ' . esc\_html\_\_('Markers', 'waymark'), |
| [44](#L44) | 'waymark-settings-tab-lines' => '-- ' . esc\_html\_\_('Lines', 'waymark'), |
| [45](#L45) | 'waymark-settings-tab-shapes' => '-- ' . esc\_html\_\_('Shapes', 'waymark'), |
| [46](#L46) | 'waymark-settings-tab-properties' => '-- ' . esc\_html\_\_('Properties', 'waymark'), |
| [47](#L47) | 'label\_sources' => esc\_html\_\_('Sources'), |
| [48](#L48) | 'waymark-settings-tab-submission' => '-- ' . esc\_html\_\_('Submissions', 'waymark'), |
| [49](#L49) | 'waymark-settings-tab-misc' => esc\_html\_\_('Advanced', 'waymark'), |
| [50](#L50) | ]; |
| [51](#L51) |  |
| [52](#L52) | /\*\* |
| [53](#L53) | \* =========================================== |
| [54](#L54) | \* ================= BASEMAPS ================ |
| [55](#L55) | \* =========================================== |
| [56](#L56) | \*/ |
| [57](#L57) |  |
| [58](#L58) | $this->tabs['tiles'] = [ |
| [59](#L59) | 'name' => esc\_html\_\_('Basemaps', 'waymark'), |
| [60](#L60) | 'description' => '', |
| [61](#L61) | 'sections' => [ |
| [62](#L62) | 'layers' => [ |
| [63](#L63) | 'repeatable' => true, |
| [64](#L64) | 'title' => esc\_html\_\_('Basemaps', 'waymark'), |
| [65](#L65) | 'description' => sprintf(\_\_('<span class="waymark-lead">Waymark uses the excellent <a href="%s">OpenStreetMap</a> as it’s default Basemap and supports many <a href="%s">other providers</a>.<br /><br /><a href="%s">Thunderforest</a> and <a href="%s">Mapbox</a> are examples of providers that offer easy access to beautiful Basemaps (including satellite imagery). They require registration, but have a free usage tier.', 'waymark'), 'https://www.openstreetmap.org/fixthemap', 'https://leaflet-extras.github.io/leaflet-providers/preview/', 'https://www.thunderforest.com/', 'https://www.mapbox.com/maps/'), |
| [66](#L66) | 'footer' => sprintf(\_\_('<small><b>Pro Tip!</b> If you have more than one Basemap, you can switch between them when viewing the Map. The first listed will be used as the default, unless specified in the shortcode like this: %s. Drag to re-order, remove all to restore defaults.</small>', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; basemap=&quot;Basemap Name&quot;]'), |
| [67](#L67) | 'help' => [ |
| [68](#L68) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/basemaps')), |
| [69](#L69) | 'text' => esc\_attr\_\_('Basemap Docs &raquo;', 'waymark'), |
| [70](#L70) | ], |
| [71](#L71) | 'fields' => [ |
| [72](#L72) | 'layer\_name' => [ |
| [73](#L73) | 'name' => 'layer\_name', |
| [74](#L74) | 'id' => 'layer\_name', |
| [75](#L75) | 'type' => 'text', |
| [76](#L76) | 'class' => '', |
| [77](#L77) | 'title' => '<u>' . esc\_html\_\_('Basemap', 'waymark') . '</u> ' . esc\_html\_\_('Name', 'waymark'), |
| [78](#L78) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_name'), |
| [79](#L79) | 'tip' => sprintf(esc\_attr\_\_('The Layer Name will appear in a dropdown list shown by the Map when multiple Basemaps have been entered. You can change the default basemap in the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; basemap=&quot;Basemap Name&quot;]'), |
| [80](#L80) | 'input\_processing' => [ |
| [81](#L81) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Basemap', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [82](#L82) | ], |
| [83](#L83) | ], |
| [84](#L84) | 'layer\_url' => [ |
| [85](#L85) | 'name' => 'layer\_url', |
| [86](#L86) | 'id' => 'layer\_url', |
| [87](#L87) | 'type' => 'text', |
| [88](#L88) | 'class' => '', |
| [89](#L89) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Basemap', 'waymark') . '</span> URL', |
| [90](#L90) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_url'), |
| [91](#L91) | 'tip' => sprintf(esc\_attr\_\_('Many mapping services support the Slippy Map format. Waymark requires URLs that contain {z} (zoom level) and {x}/{y} (tile coordinates). For example the OpenCycleMap URL is %s.', 'waymark'), 'https://tile.thunderforest.com/cycle/{z}/{x}/{y}@2x.png?apikey=[your\_api\_key]'), |
| [92](#L92) | 'tip\_link' => 'https://www.thunderforest.com/docs/map-tiles-api/', |
| [93](#L93) | ], |
| [94](#L94) | 'layer\_attribution' => [ |
| [95](#L95) | 'name' => 'layer\_attribution', |
| [96](#L96) | 'id' => 'layer\_attribution', |
| [97](#L97) | 'type' => 'text', |
| [98](#L98) | 'class' => '', |
| [99](#L99) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Basemap', 'waymark') . '</span> Attribution', |
| [100](#L100) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_attribution'), |
| [101](#L101) | 'tip' => esc\_attr\_\_('Mapping services often have the requirement that attribution is displayed by the map. Text and HTML links are supported.', 'waymark'), |
| [102](#L102) | 'tip\_link' => 'https://www.thunderforest.com/terms/#attribution', |
| [103](#L103) | 'input\_processing' => [ |
| [104](#L104) | '(! strpos($param\_value, "&")) ? htmlspecialchars($param\_value) : $param\_value', |
| [105](#L105) | ], |
| [106](#L106) | ], |
| [107](#L107) | 'layer\_max\_zoom' => [ |
| [108](#L108) | 'name' => 'layer\_max\_zoom', |
| [109](#L109) | 'id' => 'layer\_max\_zoom', |
| [110](#L110) | 'type' => 'text', |
| [111](#L111) | 'class' => 'waymark-short-input', |
| [112](#L112) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Basemap', 'waymark') . '</span> ' . esc\_html\_\_('Max Zoom', 'waymark'), |
| [113](#L113) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_max\_zoom'), |
| [114](#L114) | 'tip' => esc\_attr\_\_('Set a maximum zoom level for this Basemap, the default is 18.', 'waymark'), |
| [115](#L115) | 'input\_processing' => [ |
| [116](#L116) | '(is\_numeric($param\_value) && $param\_value >= 1 && $param\_value <= 18) ? $param\_value : 18;', //Fallback |
| [117](#L117) | ], |
| [118](#L118) | ], |
| [119](#L119) | ], |
| [120](#L120) | ], |
| [121](#L121) | ], |
| [122](#L122) | ]; |
| [123](#L123) |  |
| [124](#L124) | /\*\* |
| [125](#L125) | \* =========================================== |
| [126](#L126) | \* ================= MARKERS ================= |
| [127](#L127) | \* =========================================== |
| [128](#L128) | \*/ |
| [129](#L129) |  |
| [130](#L130) | $this->tabs['markers'] = [ |
| [131](#L131) | 'name' => esc\_html\_\_('Markers', 'waymark'), |
| [132](#L132) | 'description' => '', |
| [133](#L133) | 'sections' => [ |
| [134](#L134) | 'marker\_types' => [ |
| [135](#L135) | 'repeatable' => true, |
| [136](#L136) | 'title' => esc\_html\_\_('Marker', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
| [137](#L137) | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Markers are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
| [138](#L138) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [139](#L139) | 'help' => [ |
| [140](#L140) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
| [141](#L141) | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
| [142](#L142) | ], |
| [143](#L143) | 'fields' => [ |
| [144](#L144) | 'marker\_title' => [ |
| [145](#L145) | 'name' => 'marker\_title', |
| [146](#L146) | 'id' => 'marker\_title', |
| [147](#L147) | 'type' => 'text', |
| [148](#L148) | 'class' => 'waymark-uneditable', |
| [149](#L149) | 'title' => '<u>' . esc\_html\_\_('Marker', 'waymark') . '</u> ' . esc\_html\_\_('Label', 'waymark'), |
| [150](#L150) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_title'), |
| [151](#L151) | 'tip' => esc\_attr\_\_('What kind of Marker is this? E.g. "Photo", "Grocery Store", "Warning!". Once saved, Marker labels can not be edited. The Marker Label is displayed in the Tooltip (when hovering over the Marker) and in the Info Window (once the Marker is clicked). Hide in Settings > Map > Misc. > Type Labels.', 'waymark'), |
| [152](#L152) | 'input\_processing' => [ |
| [153](#L153) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Marker', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [154](#L154) | ], |
| [155](#L155) | ], |
| [156](#L156) | 'marker\_shape' => [ |
| [157](#L157) | 'name' => 'marker\_shape', |
| [158](#L158) | 'id' => 'marker\_shape', |
| [159](#L159) | 'type' => 'select', |
| [160](#L160) | 'class' => '', |
| [161](#L161) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Shape', 'waymark'), |
| [162](#L162) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_shape'), |
| [163](#L163) | 'tip' => esc\_attr\_\_('Which shape of Marker to use. Circles and Squares are centered at the specified location, Markers point down to that location.', 'waymark'), |
| [164](#L164) | 'options' => [ |
| [165](#L165) | 'marker' => esc\_html\_\_('Marker', 'waymark'), |
| [166](#L166) | 'circle' => esc\_html\_\_('Circle', 'waymark'), |
| [167](#L167) | 'rectangle' => esc\_html\_\_('Square', 'waymark'), |
| [168](#L168) | ], |
| [169](#L169) | ], |
| [170](#L170) | 'marker\_size' => [ |
| [171](#L171) | 'name' => 'marker\_size', |
| [172](#L172) | 'id' => 'marker\_size', |
| [173](#L173) | 'type' => 'select', |
| [174](#L174) | 'class' => '', |
| [175](#L175) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Size', 'waymark'), |
| [176](#L176) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_size'), |
| [177](#L177) | 'tip' => esc\_attr\_\_('Which size of Marker to use.', 'waymark'), |
| [178](#L178) | 'options' => [ |
| [179](#L179) | 'small' => esc\_html\_\_('Small', 'waymark'), |
| [180](#L180) | 'medium' => esc\_html\_\_('Medium', 'waymark'), |
| [181](#L181) | 'large' => esc\_html\_\_('Large', 'waymark'), |
| [182](#L182) | ], |
| [183](#L183) | ], |
| [184](#L184) | 'marker\_colour' => [ |
| [185](#L185) | 'name' => 'marker\_colour', |
| [186](#L186) | 'id' => 'marker\_colour', |
| [187](#L187) | 'type' => 'text', |
| [188](#L188) | 'class' => 'waymark-short-input', |
| [189](#L189) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Background', 'waymark'), |
| [190](#L190) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_colour'), |
| [191](#L191) | 'tip' => esc\_attr\_\_('The Marker background colour. Click "Select Colour" to select.', 'waymark'), |
| [192](#L192) | 'input\_processing' => [ |
| [193](#L193) | '(! empty($param\_value)) ? $param\_value : "white";', //Fallback |
| [194](#L194) | ], |
| [195](#L195) | ], |
| [196](#L196) | 'marker\_display' => [ |
| [197](#L197) | 'name' => 'marker\_display', |
| [198](#L198) | 'id' => 'marker\_display', |
| [199](#L199) | 'type' => 'boolean', |
| [200](#L200) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Show Initially', 'waymark'), |
| [201](#L201) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_display'), |
| [202](#L202) | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
| [203](#L203) | 'input\_processing' => [ |
| [204](#L204) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [205](#L205) | ], |
| [206](#L206) | ], |
| [207](#L207) | 'marker\_submission' => [ |
| [208](#L208) | 'name' => 'marker\_submission', |
| [209](#L209) | 'id' => 'marker\_submission', |
| [210](#L210) | 'type' => 'boolean', |
| [211](#L211) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Submissions?', 'waymark'), |
| [212](#L212) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_submission'), |
| [213](#L213) | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
| [214](#L214) | 'input\_processing' => [ |
| [215](#L215) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [216](#L216) | ], |
| [217](#L217) | ], |
| [218](#L218) | 'icon\_type' => [ |
| [219](#L219) | 'name' => 'icon\_type', |
| [220](#L220) | 'id' => 'icon\_type', |
| [221](#L221) | 'type' => 'select', |
| [222](#L222) | 'class' => '', |
| [223](#L223) | 'title' => '<span style="display:inline-block;min-width:50px">' . esc\_html\_\_('Icon', 'waymark') . '</span>' . esc\_html\_\_('Type', 'waymark'), |
| [224](#L224) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'icon\_type'), |
| [225](#L225) | 'tip' => esc\_attr\_\_('Font Icons are available from Font Awesome and Ionic Icons. Simple Text or Emojis are supported, as well as custom HTML. So you can pretty much use anything you like!', 'waymark'), |
| [226](#L226) | 'tip\_link' => 'https://emojifinder.com/', |
| [227](#L227) | 'options' => [ |
| [228](#L228) | 'icon' => esc\_html\_\_('Font Icon', 'waymark'), |
| [229](#L229) | 'text' => esc\_html\_\_('Text (or Emoji!)', 'waymark'), |
| [230](#L230) | 'html' => esc\_html\_\_('HTML', 'waymark'), |
| [231](#L231) | ], |
| [232](#L232) | ], |
| [233](#L233) | 'marker\_icon' => [ |
| [234](#L234) | 'name' => 'marker\_icon', |
| [235](#L235) | 'id' => 'marker\_icon', |
| [236](#L236) | 'type' => 'text', |
| [237](#L237) | 'class' => 'waymark-short-input', |
| [238](#L238) | 'title' => '<span class="waymark-invisible" style="display:inline-block;min-width:50px">' . esc\_html\_\_('Icon', 'waymark') . '</span><span class="waymark-icon-type">' . esc\_html\_\_('Name', 'waymark') . '</span>', |
| [239](#L239) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_icon'), |
| [240](#L240) | 'tip' => esc\_attr\_\_('The desired icon name from Ionicons or Font Awesome, e.g. "ion-camera", or "fa-camera". Click the links to see the full list of icons available.|Text to display inside the Marker, in the chosen colour. Space is very limited! Pro Tip: adjust text size using CSS; for all Markers: .waymark-icon-text{font-size: 18px}, or by Type: .waymark-marker-photo .waymark-icon-text{...}. Use your browser\'s inspector to dig for Type class names.|The HTML entered will be added inside each Marker. Pro Tip! HTML Entities supported (e.g. &amp;cross; as well as Unicode and Emojis!), or provide HTML to integrate with other Icon providers.', 'waymark'), |
| [241](#L241) | 'input\_processing' => [ |
| [242](#L242) | '(strpbrk($param\_value, "\">")) ? htmlspecialchars($param\_value) : $param\_value', |
| [243](#L243) | ], |
| [244](#L244) | 'append' => '<div class="waymark-icons-help"><a href="https://ionic.io/ionicons/v2/cheatsheet.html">Ionic Icons</a><a href="https://fontawesome.com/v4.7.0/cheatsheet/">Font Awesome</a></div>', |
| [245](#L245) | ], |
| [246](#L246) | 'icon\_colour' => [ |
| [247](#L247) | 'name' => 'icon\_colour', |
| [248](#L248) | 'id' => 'icon\_colour', |
| [249](#L249) | 'type' => 'text', |
| [250](#L250) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [251](#L251) | 'title' => '<span class="waymark-invisible" style="display:inline-block;min-width:50px">' . esc\_html\_\_('Icon', 'waymark') . '</span>' . esc\_html\_\_('Colour', 'waymark'), |
| [252](#L252) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'icon\_colour'), |
| [253](#L253) | 'tip' => esc\_attr\_\_('The colour of the icon. Click "Select Colour" to select.', 'waymark'), |
| [254](#L254) | 'input\_processing' => [ |
| [255](#L255) | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
| [256](#L256) | ], |
| [257](#L257) | ], |
| [258](#L258) | ], |
| [259](#L259) | ], |
| [260](#L260) | ], |
| [261](#L261) | ]; |
| [262](#L262) |  |
| [263](#L263) | /\*\* |
| [264](#L264) | \* =========================================== |
| [265](#L265) | \* ================== LINES ================== |
| [266](#L266) | \* =========================================== |
| [267](#L267) | \*/ |
| [268](#L268) |  |
| [269](#L269) | $this->tabs['lines'] = [ |
| [270](#L270) | 'name' => esc\_html\_\_('Lines', 'waymark'), |
| [271](#L271) | 'description' => '', |
| [272](#L272) | 'sections' => [ |
| [273](#L273) | 'line\_types' => [ |
| [274](#L274) | 'repeatable' => true, |
| [275](#L275) | 'title' => esc\_html\_\_('Line', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
| [276](#L276) | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Lines are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
| [277](#L277) | 'help' => [ |
| [278](#L278) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
| [279](#L279) | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
| [280](#L280) | ], |
| [281](#L281) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [282](#L282) | 'fields' => [ |
| [283](#L283) | 'line\_title' => [ |
| [284](#L284) | 'name' => 'line\_title', |
| [285](#L285) | 'id' => 'line\_title', |
| [286](#L286) | 'type' => 'text', |
| [287](#L287) | 'class' => 'waymark-uneditable', |
| [288](#L288) | 'title' => '<u>' . esc\_html\_\_('Line', 'waymark') . '</u> ' . esc\_html\_\_('Label', 'waymark'), |
| [289](#L289) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_title'), |
| [290](#L290) | 'tip' => esc\_attr\_\_('What kind of Line is this? E.g. "Easy", "Walking Only", "Dark Red". The Line Label is displayed in the Tooltip (when hovering over the Line) and in the Line Info Window. Once saved, Line labels can not be edited.', 'waymark'), |
| [291](#L291) | 'input\_processing' => [ |
| [292](#L292) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Line', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [293](#L293) | ], |
| [294](#L294) | ], |
| [295](#L295) | 'line\_colour' => [ |
| [296](#L296) | 'name' => 'line\_colour', |
| [297](#L297) | 'id' => 'line\_colour', |
| [298](#L298) | 'type' => 'text', |
| [299](#L299) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [300](#L300) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Colour', 'waymark'), |
| [301](#L301) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_colour'), |
| [302](#L302) | 'tip' => esc\_attr\_\_('The colour of the Line. Click "Select Colour" to select.', 'waymark'), |
| [303](#L303) | 'input\_processing' => [ |
| [304](#L304) | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
| [305](#L305) | ], |
| [306](#L306) | ], |
| [307](#L307) | 'line\_weight' => [ |
| [308](#L308) | 'name' => 'line\_weight', |
| [309](#L309) | 'id' => 'line\_weight', |
| [310](#L310) | 'type' => 'text', |
| [311](#L311) | 'class' => 'waymark-short-input', |
| [312](#L312) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Weight', 'waymark'), |
| [313](#L313) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_weight'), |
| [314](#L314) | 'tip' => esc\_attr\_\_('The width of the Line, in pixels.', 'waymark'), |
| [315](#L315) | 'input\_processing' => [ |
| [316](#L316) | '(is\_numeric($param\_value)) ? $param\_value : 3;', //Fallback |
| [317](#L317) | ], |
| [318](#L318) | ], |
| [319](#L319) | 'line\_opacity' => [ |
| [320](#L320) | 'name' => 'line\_opacity', |
| [321](#L321) | 'id' => 'line\_opacity', |
| [322](#L322) | 'type' => 'text', |
| [323](#L323) | 'class' => 'waymark-short-input', |
| [324](#L324) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Opacity', 'waymark'), |
| [325](#L325) | 'default' => Waymark\_Config::get\_default('lines', 'line\_types', 'line\_opacity'), |
| [326](#L326) | 'tip' => esc\_attr\_\_('The opacity of the Line, between 0.0 and 1.0 (e.g. "0.5").', 'waymark'), |
| [327](#L327) | 'input\_processing' => [ |
| [328](#L328) | '(is\_numeric($param\_value) && $param\_value > 0 && $param\_value <= 1) ? $param\_value : 0.7;', //Fallback |
| [329](#L329) | ], |
| [330](#L330) | ], |
| [331](#L331) | 'line\_display' => [ |
| [332](#L332) | 'name' => 'line\_display', |
| [333](#L333) | 'id' => 'line\_display', |
| [334](#L334) | 'type' => 'boolean', |
| [335](#L335) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Show Initially', 'waymark'), |
| [336](#L336) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_display'), |
| [337](#L337) | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
| [338](#L338) | 'input\_processing' => [ |
| [339](#L339) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [340](#L340) | ], |
| [341](#L341) | ], |
| [342](#L342) | 'line\_submission' => [ |
| [343](#L343) | 'name' => 'line\_submission', |
| [344](#L344) | 'id' => 'line\_submission', |
| [345](#L345) | 'type' => 'boolean', |
| [346](#L346) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Submissions?', 'waymark'), |
| [347](#L347) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_submission'), |
| [348](#L348) | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
| [349](#L349) | 'input\_processing' => [ |
| [350](#L350) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [351](#L351) | ], |
| [352](#L352) | ], |
| [353](#L353) | ], |
| [354](#L354) | ], |
| [355](#L355) | ], |
| [356](#L356) | ]; |
| [357](#L357) |  |
| [358](#L358) | /\*\* |
| [359](#L359) | \* =========================================== |
| [360](#L360) | \* ================= SHAPES ================== |
| [361](#L361) | \* =========================================== |
| [362](#L362) | \*/ |
| [363](#L363) |  |
| [364](#L364) | $this->tabs['shapes'] = [ |
| [365](#L365) | 'name' => esc\_html\_\_('Shapes', 'waymark'), |
| [366](#L366) | 'description' => '', |
| [367](#L367) | 'sections' => [ |
| [368](#L368) | 'shape\_types' => [ |
| [369](#L369) | 'repeatable' => true, |
| [370](#L370) | 'title' => esc\_html\_\_('Shape', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
| [371](#L371) | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Shapes are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
| [372](#L372) | 'help' => [ |
| [373](#L373) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
| [374](#L374) | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
| [375](#L375) | ], |
| [376](#L376) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [377](#L377) | 'fields' => [ |
| [378](#L378) | 'shape\_title' => [ |
| [379](#L379) | 'name' => 'shape\_title', |
| [380](#L380) | 'id' => 'shape\_title', |
| [381](#L381) | 'type' => 'text', |
| [382](#L382) | 'class' => 'waymark-uneditable', |
| [383](#L383) | 'title' => '<u>' . esc\_html\_\_('Shape', 'waymark') . '</u> ' . esc\_html\_\_('Label', 'waymark'), |
| [384](#L384) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_title'), |
| [385](#L385) | 'tip' => esc\_attr\_\_('What kind of Shape is this? E.g. "Park", "Danger!", "Light Blue". The Shape Label is displayed in the Tooltip (when hovering over the Shape) and in the Shape Info Window. Once saved, Shape labels can not be edited.', 'waymark'), |
| [386](#L386) | 'input\_processing' => [ |
| [387](#L387) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Shape', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [388](#L388) | ], |
| [389](#L389) | ], |
| [390](#L390) | 'shape\_colour' => [ |
| [391](#L391) | 'name' => 'shape\_colour', |
| [392](#L392) | 'id' => 'shape\_colour', |
| [393](#L393) | 'type' => 'text', |
| [394](#L394) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [395](#L395) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Colour', 'waymark'), |
| [396](#L396) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_colour'), |
| [397](#L397) | 'tip' => esc\_attr\_\_('The colour of the Shape. Click "Select Colour" to select.', 'waymark'), |
| [398](#L398) | 'input\_processing' => [ |
| [399](#L399) | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
| [400](#L400) | ], |
| [401](#L401) | ], |
| [402](#L402) | 'fill\_opacity' => [ |
| [403](#L403) | 'name' => 'fill\_opacity', |
| [404](#L404) | 'id' => 'fill\_opacity', |
| [405](#L405) | 'type' => 'text', |
| [406](#L406) | 'class' => 'waymark-short-input', |
| [407](#L407) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Fill Opacity', 'waymark'), |
| [408](#L408) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'fill\_opacity'), |
| [409](#L409) | 'tip' => esc\_attr\_\_('The opacity of the inside of the shape, between 0.0 and 1.0 (e.g. "0.5").', 'waymark'), |
| [410](#L410) | 'input\_processing' => [ |
| [411](#L411) | '(is\_numeric($param\_value) && $param\_value > 0 && $param\_value <= 1) ? $param\_value : 0.5;', //Fallback |
| [412](#L412) | ], |
| [413](#L413) | ], |
| [414](#L414) | 'shape\_display' => [ |
| [415](#L415) | 'name' => 'shape\_display', |
| [416](#L416) | 'id' => 'shape\_display', |
| [417](#L417) | 'type' => 'boolean', |
| [418](#L418) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Show Initially', 'waymark'), |
| [419](#L419) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_display'), |
| [420](#L420) | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
| [421](#L421) | 'input\_processing' => [ |
| [422](#L422) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [423](#L423) | ], |
| [424](#L424) | ], |
| [425](#L425) | 'shape\_submission' => [ |
| [426](#L426) | 'name' => 'shape\_submission', |
| [427](#L427) | 'id' => 'shape\_submission', |
| [428](#L428) | 'type' => 'boolean', |
| [429](#L429) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Submissions?', 'waymark'), |
| [430](#L430) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_submission'), |
| [431](#L431) | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
| [432](#L432) | 'input\_processing' => [ |
| [433](#L433) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [434](#L434) | ], |
| [435](#L435) | ], |
| [436](#L436) | ], |
| [437](#L437) | ], |
| [438](#L438) | ], |
| [439](#L439) | ]; |
| [440](#L440) |  |
| [441](#L441) | /\*\* |
| [442](#L442) | \* =========================================== |
| [443](#L443) | \* =================== META ================== |
| [444](#L444) | \* =========================================== |
| [445](#L445) | \*/ |
| [446](#L446) |  |
| [447](#L447) | $meta\_group\_options = Waymark\_Helper::repeatable\_setting\_option\_array('meta', 'groups', 'group\_title'); |
| [448](#L448) | $meta\_group\_options = array\_merge(['' => 'None'], $meta\_group\_options); |
| [449](#L449) |  |
| [450](#L450) | $this->tabs['meta'] = [ |
| [451](#L451) | 'name' => esc\_html\_\_('Meta', 'waymark'), |
| [452](#L452) | 'description' => '', |
| [453](#L453) | 'sections' => [ |
| [454](#L454) | 'inputs' => [ |
| [455](#L455) | 'repeatable' => true, |
| [456](#L456) | 'title' => esc\_html\_\_('Meta', 'waymark'), |
| [457](#L457) | 'description' => '<span class="waymark-lead">' . sprintf(\_\_('Create additional input fields that appear underneath the Map Editor. Any Meta that has been input is displayed on the <a href="%s">Map Details</a> page, and can also be displayed by the Shortcode.', 'waymark'), 'https://www.waymark.dev/map/route-map/') . '</span>', |
| [458](#L458) | 'help' => [ |
| [459](#L459) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/meta')), |
| [460](#L460) | 'text' => esc\_attr\_\_('Meta Docs &raquo;', 'waymark'), |
| [461](#L461) | ], |
| [462](#L462) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [463](#L463) | 'fields' => [ |
| [464](#L464) | 'meta\_title' => [ |
| [465](#L465) | 'name' => 'meta\_title', |
| [466](#L466) | 'id' => 'meta\_title', |
| [467](#L467) | 'type' => 'text', |
| [468](#L468) | 'class' => '', |
| [469](#L469) | 'title' => '<u>' . esc\_html\_\_('Meta', 'waymark') . '</u> ' . esc\_html\_\_('Title', 'waymark'), |
| [470](#L470) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_title'), |
| [471](#L471) | 'tip' => esc\_attr\_\_('The title appears next to the input field.', 'waymark'), |
| [472](#L472) | 'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
| [473](#L473) | 'input\_processing' => [ |
| [474](#L474) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Meta', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [475](#L475) | ], |
| [476](#L476) | ], |
| [477](#L477) | 'meta\_default' => [ |
| [478](#L478) | 'name' => 'meta\_default', |
| [479](#L479) | 'id' => 'meta\_default', |
| [480](#L480) | 'type' => 'text', |
| [481](#L481) | 'class' => '', |
| [482](#L482) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Default', 'waymark'), |
| [483](#L483) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_default'), |
| [484](#L484) | 'tip' => esc\_attr\_\_('The default value for the input field. For Select and Multi-Select enter the option/comma-separated options to be selected by default.', 'waymark'), |
| [485](#L485) | ], |
| [486](#L486) | 'meta\_tip' => [ |
| [487](#L487) | 'name' => 'meta\_tip', |
| [488](#L488) | 'id' => 'meta\_tip', |
| [489](#L489) | 'type' => 'text', |
| [490](#L490) | 'class' => '', |
| [491](#L491) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Tip', 'waymark'), |
| [492](#L492) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_tip'), |
| [493](#L493) | 'tip' => esc\_attr\_\_('A tip provides additional information about an input field... just like this!', 'waymark'), |
| [494](#L494) | ], |
| [495](#L495) | 'meta\_type' => [ |
| [496](#L496) | 'name' => 'meta\_type', |
| [497](#L497) | 'id' => 'meta\_type', |
| [498](#L498) | 'type' => 'select', |
| [499](#L499) | 'class' => '', |
| [500](#L500) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Type', 'waymark'), |
| [501](#L501) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_type'), |
| [502](#L502) | 'tip' => esc\_attr\_\_('The type of input field to use.', 'waymark'), |
| [503](#L503) | 'options' => [ |
| [504](#L504) | 'text' => esc\_html\_\_('Text', 'waymark'), |
| [505](#L505) | 'textarea' => esc\_html\_\_('Textarea', 'waymark'), |
| [506](#L506) | 'textarea\_rich' => esc\_html\_\_('Rich Text', 'waymark'), |
| [507](#L507) | 'select' => esc\_html\_\_('Select', 'waymark'), |
| [508](#L508) | 'select\_multi' => esc\_html\_\_('Multi-Select', 'waymark'), |
| [509](#L509) | ], |
| [510](#L510) | ], |
| [511](#L511) | 'meta\_options' => [ |
| [512](#L512) | 'name' => 'meta\_options', |
| [513](#L513) | 'id' => 'meta\_options', |
| [514](#L514) | 'type' => 'text', |
| [515](#L515) | 'class' => '', |
| [516](#L516) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Options', 'waymark'), |
| [517](#L517) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_options'), |
| [518](#L518) | 'tip' => esc\_attr\_\_('A comma-separated list of options for the input.', 'waymark'), |
| [519](#L519) | ], |
| [520](#L520) | 'meta\_group' => [ |
| [521](#L521) | 'name' => 'meta\_group', |
| [522](#L522) | 'id' => 'meta\_group', |
| [523](#L523) | 'type' => 'select', |
| [524](#L524) | 'options' => $meta\_group\_options, |
| [525](#L525) | 'class' => (sizeof($meta\_group\_options) === 1) ? 'waymark-hidden' : '', |
| [526](#L526) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Group', 'waymark'), |
| [527](#L527) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_group'), |
| [528](#L528) | 'tip' => esc\_attr\_\_('Which group this Meta belongs to (if any). Meta in the same group will be displayed together when editing and viewing Maps. Meta not in a group will be displayed above any groups.', 'waymark'), |
| [529](#L529) | ], |
| [530](#L530) | 'meta\_shortcode' => [ |
| [531](#L531) | 'name' => 'meta\_shortcode', |
| [532](#L532) | 'id' => 'meta\_shortcode', |
| [533](#L533) | 'type' => 'boolean', |
| [534](#L534) | 'class' => '', |
| [535](#L535) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('In Shortcode?', 'waymark'), |
| [536](#L536) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_shortcode'), |
| [537](#L537) | 'tip' => esc\_attr\_\_('Whether this content should be displayed when embedding a Map using the Shortcode.', 'waymark'), |
| [538](#L538) | ], |
| [539](#L539) | 'meta\_submission' => [ |
| [540](#L540) | 'name' => 'meta\_submission', |
| [541](#L541) | 'id' => 'meta\_submission', |
| [542](#L542) | 'type' => 'boolean', |
| [543](#L543) | 'class' => '', |
| [544](#L544) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('In Submissions?', 'waymark'), |
| [545](#L545) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_submission'), |
| [546](#L546) | 'tip' => esc\_attr\_\_('Make this Meta available in front-end Submissions?', 'waymark'), |
| [547](#L547) | ], |
| [548](#L548) | ], |
| [549](#L549) | ], |
| [550](#L550) | 'groups' => [ |
| [551](#L551) | 'repeatable' => true, |
| [552](#L552) | 'title' => esc\_html\_\_('Groups', 'waymark'), |
| [553](#L553) | 'description' => '<span class="waymark-lead">' . \_\_('Create groups to organise your Map Meta. Meta in the same group will be displayed together when editing and viewing Maps.', 'waymark') . '</span>', |
| [554](#L554) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> Drag to re-order, remove all to disable groups.', 'waymark') . '</small>', |
| [555](#L555) | 'fields' => [ |
| [556](#L556) | 'group\_title' => [ |
| [557](#L557) | 'name' => 'group\_title', |
| [558](#L558) | 'id' => 'group\_title', |
| [559](#L559) | 'type' => 'text', |
| [560](#L560) | 'class' => '', |
| [561](#L561) | 'title' => '<u>' . esc\_html\_\_('Group', 'waymark') . '</u> ' . esc\_html\_\_('Title', 'waymark'), |
| [562](#L562) | 'default' => '', |
| [563](#L563) | 'tip' => esc\_attr\_\_('The title appears above the Meta in that group.', 'waymark'), |
| [564](#L564) | //                                                      'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
| [565](#L565) | //                                                      'input\_processing' => array( |
| [566](#L566) | //                                                              '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Meta', 'waymark') . ' ' . substr(md5(rand(0,999999)), 0, 5) . '";'   //Fallback |
| [567](#L567) | //                                                      ) |
| [568](#L568) | ], |
| [569](#L569) | ], |
| [570](#L570) | ], |
| [571](#L571) | ], |
| [572](#L572) | ]; |
| [573](#L573) |  |
| [574](#L574) | /\*\* |
| [575](#L575) | \* =========================================== |
| [576](#L576) | \* =============== PROPERTIES ================ |
| [577](#L577) | \* =========================================== |
| [578](#L578) | \*/ |
| [579](#L579) |  |
| [580](#L580) | $this->tabs['properties'] = [ |
| [581](#L581) | 'name' => esc\_html\_\_('Properties', 'waymark'), |
| [582](#L582) | 'description' => '', |
| [583](#L583) | 'sections' => [ |
| [584](#L584) | 'props' => [ |
| [585](#L585) | 'repeatable' => true, |
| [586](#L586) | 'title' => esc\_html\_\_('Properties', 'waymark'), |
| [587](#L587) | 'description' => '<span class="waymark-lead">' . \_\_('Read <b><a href="https://geojson.org/">GeoJSON</a></b> feature properties when importing.', 'waymark') . '</span><br /><br />' . \_\_('If Waymark finds data for the property keys below it will stored when it is imported. These can be automatically appended to the Overlay Description, or accessed programatically the <code>layer.feature.properties</code> Object.', 'waymark'), |
| [588](#L588) | 'footer' => '<small>' . \_\_(sprintf('For example, the properties below can be accessed through the %s, %s, %s Property Keys:', '<code>created\_date</code>', '<code>updated\_date</code>', '<code>expires\_date</code>'), 'waymark') . '</small> |
| [589](#L589) | <pre><code>{ |
| [590](#L590) | "type": "FeatureCollection", |
| [591](#L591) | "features": [ |
| [592](#L592) | { |
| [593](#L593) | "geometry": { ... }, |
| [594](#L594) | "type": "Feature", |
| [595](#L595) | "properties": { |
| [596](#L596) | "created\_date": "2021-07-15T00:42:41Z", |
| [597](#L597) | "updated\_date": "2021-07-16T00:42:41Z", |
| [598](#L598) | "expires\_date": "2021-07-17T00:42:41Z" |
| [599](#L599) | } |
| [600](#L600) | } |
| [601](#L601) | ] |
| [602](#L602) | } |
| [603](#L603) | </code></pre>', |
| [604](#L604) |  |
| [605](#L605) | //                                      'help' => array( |
| [606](#L606) | //                                              'url' => esc\_attr(Waymark\_Helper::site\_url('docs/meta')), |
| [607](#L607) | //                                              'text' => esc\_attr\_\_('Meta Docs &raquo;', 'waymark') |
| [608](#L608) | //                                      ), |
| [609](#L609) | 'fields' => [ |
| [610](#L610) | 'property\_key' => [ |
| [611](#L611) | 'name' => 'property\_key', |
| [612](#L612) | 'id' => 'property\_key', |
| [613](#L613) | 'type' => 'text', |
| [614](#L614) | 'class' => '', |
| [615](#L615) | 'title' => '<u>' . esc\_html\_\_('Property', 'waymark') . '</u> ' . esc\_html\_\_('Key', 'waymark'), |
| [616](#L616) | 'default' => Waymark\_Config::get\_setting('property', 'props', 'property\_key'), |
| [617](#L617) | 'tip' => esc\_attr\_\_('This is the key associated with the data you are trying to access, i.e. "properties": {"property\_key": "Some content here"}', 'waymark'), |
| [618](#L618) | //                                                      'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
| [619](#L619) | 'input\_processing' => [ |
| [620](#L620) | 'preg\_replace("/[^0-9a-zA-Z -\_.]/", "", $param\_value);', |
| [621](#L621) | ], |
| [622](#L622) | ], |
| [623](#L623) | 'property\_title' => [ |
| [624](#L624) | 'name' => 'property\_title', |
| [625](#L625) | 'id' => 'property\_title', |
| [626](#L626) | 'type' => 'text', |
| [627](#L627) | 'class' => '', |
| [628](#L628) | 'title' => '<u><span class="waymark-invisible">' . esc\_html\_\_('Property', 'waymark') . '</span></u> ' . esc\_html\_\_('Title', 'waymark'), |
| [629](#L629) | 'default' => Waymark\_Config::get\_setting('property', 'props', 'property\_title'), |
| [630](#L630) | 'tip' => esc\_attr\_\_('The value for this property will be added to the Overlay Description under this title.', 'waymark'), |
| [631](#L631) | //                                                      'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '' |
| [632](#L632) | ], |
| [633](#L633) | ], |
| [634](#L634) | ], |
| [635](#L635) |  |
| [636](#L636) | 'options' => [ |
| [637](#L637) | 'title' => esc\_html\_\_('Options', 'waymark'), |
| [638](#L638) | 'description' => 'Append listed Properties to the Overlay Description.', |
| [639](#L639) | 'footer' => sprintf(\_\_('<small><b>Pro Tip!</b> Properties are added to the Overlay Description with class names that can be used to target them, e.g. %s.</small>', 'waymark'), '<code class="waymark-code" style="display:inline">&lt;p class="waymark-property waymark-property-property\_key"&gt;&lt;b&gt;property\_title&lt;/b&gt;&lt;br&gt;proprty\_value&lt;/p&gt;</code>'), |
| [640](#L640) | 'fields' => [ |
| [641](#L641) | 'description\_append' => [ |
| [642](#L642) | 'name' => 'description\_append', |
| [643](#L643) | 'id' => 'description\_append', |
| [644](#L644) | 'type' => 'boolean', |
| [645](#L645) | 'title' => esc\_html\_\_('Append', 'waymark'), |
| [646](#L646) | 'default' => Waymark\_Config::get\_setting('property', 'options', 'description\_append'), |
| [647](#L647) | 'tip' => esc\_attr\_\_('Append the property value to the Overlay Description.', 'waymark'), |
| [648](#L648) |  |
| [649](#L649) | ], |
| [650](#L650) | ], |
| [651](#L651) | ], |
| [652](#L652) | ], |
| [653](#L653) | ]; |
| [654](#L654) |  |
| [655](#L655) | //Prepare Basemap values for editor option |
| [656](#L656) | $tile\_layers = Waymark\_Config::get\_item('tiles', 'layers', true); |
| [657](#L657) |  |
| [658](#L658) | //Each layer |
| [659](#L659) | $basemap\_options = []; |
| [660](#L660) | foreach ($tile\_layers as $layer) { |
| [661](#L661) | //If name exists |
| [662](#L662) | if (array\_key\_exists('layer\_name', $layer)) { |
| [663](#L663) | //Add as option |
| [664](#L664) | $basemap\_options[$layer['layer\_name']] = $layer['layer\_name']; |
| [665](#L665) | } |
| [666](#L666) | } |
| [667](#L667) |  |
| [668](#L668) | /\*\* |
| [669](#L669) | \* =========================================== |
| [670](#L670) | \* =============== SUBMISSIONS =============== |
| [671](#L671) | \* =========================================== |
| [672](#L672) | \*/ |
| [673](#L673) |  |
| [674](#L674) | //Build list of Collections to use as <select> options |
| [675](#L675) | $collection\_objects = get\_terms([ |
| [676](#L676) | 'taxonomy' => 'waymark\_collection', |
| [677](#L677) | 'hide\_empty' => false, |
| [678](#L678) | ]); |
| [679](#L679) | $collection\_array = [ |
| [680](#L680) | '' => ' - ', |
| [681](#L681) | ]; |
| [682](#L682) | foreach ($collection\_objects as $collection) { |
| [683](#L683) | $collection\_array[$collection->term\_id] = $collection->name; |
| [684](#L684) | } |
| [685](#L685) |  |
| [686](#L686) | //Roles |
| [687](#L687) | if (! function\_exists('get\_editable\_roles')) { |
| [688](#L688) | require\_once ABSPATH . 'wp-admin/includes/user.php'; |
| [689](#L689) | } |
| [690](#L690) |  |
| [691](#L691) | $role\_options = []; |
| [692](#L692) | foreach (get\_editable\_roles() as $key => $role) { |
| [693](#L693) | $role\_options[$key] = $role['name']; |
| [694](#L694) | } |
| [695](#L695) | unset($role\_options['administrator']); |
| [696](#L696) |  |
| [697](#L697) | //Public upload dir |
| [698](#L698) | $upload\_dir = wp\_upload\_dir(); |
| [699](#L699) | $upload\_dir['subdir'] = ($upload\_dir['subdir']) ? $upload\_dir['subdir'] : '/'; |
| [700](#L700) |  |
| [701](#L701) | $this->tabs['submission'] = [ |
| [702](#L702) | 'name' => esc\_html\_\_('Submissions', 'waymark'), |
| [703](#L703) | 'sections' => [ |
| [704](#L704) | //Global |
| [705](#L705) | 'global' => [ |
| [706](#L706) | 'title' => esc\_html\_\_('Front-End Submissions', 'waymark'), |
| [707](#L707) | 'description' => sprintf(\_\_('Use the %s Shortcode to allow Map submissions from the front-end of your site.', 'waymark'), '<span class="waymark-code">[Waymark content="submission"]</span>'), |
| [708](#L708) | 'help' => [ |
| [709](#L709) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/submissions')), |
| [710](#L710) | 'text' => esc\_attr\_\_('Submission Docs &raquo;', 'waymark'), |
| [711](#L711) | ], |
| [712](#L712) | 'fields' => [ |
| [713](#L713) | 'submission\_enable' => [ |
| [714](#L714) | 'name' => 'submission\_enable', |
| [715](#L715) | 'id' => 'submission\_enable', |
| [716](#L716) | 'type' => 'boolean', |
| [717](#L717) | 'title' => esc\_html\_\_('Allow Submissions', 'waymark'), |
| [718](#L718) | 'default' => Waymark\_Config::get\_setting('submission', 'global', 'submission\_enable'), |
| [719](#L719) | 'tip' => esc\_attr\_\_('Submissions will be available only to site administrators by default, but can also be allowed for registered users or even to guests without registration.', 'waymark'), |
| [720](#L720) | ], |
| [721](#L721) | ], |
| [722](#L722) | ], |
| [723](#L723) | //By role |
| [724](#L724) | 'from\_users' => [ |
| [725](#L725) | 'title' => esc\_html\_\_('User Submissions', 'waymark'), |
| [726](#L726) | 'description' => esc\_html\_\_('Allow registered users to create Maps from the front-end.', 'waymark'), |
| [727](#L727) | 'fields' => [ |
| [728](#L728) | 'submission\_roles' => [ |
| [729](#L729) | 'name' => 'submission\_roles', |
| [730](#L730) | 'id' => 'submission\_roles', |
| [731](#L731) | 'type' => 'select\_multi', |
| [732](#L732) | 'class' => 'waymark-align-top', |
| [733](#L733) | 'title' => esc\_html\_\_('Allow From', 'waymark'), |
| [734](#L734) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_roles'), |
| [735](#L735) | 'tip' => esc\_attr\_\_('Users with the selected roles will be able to make Submissions through the front-end', 'waymark'), |
| [736](#L736) | 'options' => $role\_options, |
| [737](#L737) | ], |
| [738](#L738) | 'submission\_features' => [ |
| [739](#L739) | 'name' => 'submission\_features', |
| [740](#L740) | 'id' => 'submission\_users\_features', |
| [741](#L741) | 'type' => 'select\_multi', |
| [742](#L742) | 'class' => 'waymark-align-top', |
| [743](#L743) | 'title' => esc\_html\_\_('Editor Features', 'waymark'), |
| [744](#L744) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_features'), |
| [745](#L745) | 'tip' => esc\_attr\_\_('What features to offer in the Editor. Important! Uploaded images are added to the Media Library, reading from file does not keep a copy of the file on the server. Whether an individual Meta input is displayed can be set in the Settings > Map > Meta.', 'waymark'), |
| [746](#L746) | 'options' => [ |
| [747](#L747) | 'draw' => esc\_attr\_\_('Drawing', 'waymark'), |
| [748](#L748) | 'photo' => esc\_attr\_\_('Image upload', 'waymark'), |
| [749](#L749) | 'file' => esc\_attr\_\_('Read from File', 'waymark'), |
| [750](#L750) | 'title' => esc\_attr\_\_('Title', 'waymark'), |
| [751](#L751) | 'meta' => esc\_attr\_\_('Meta', 'waymark'), |
| [752](#L752) | ], |
| [753](#L753) | ], |
| [754](#L754) | 'submission\_status' => [ |
| [755](#L755) | 'name' => 'submission\_status', |
| [756](#L756) | 'id' => 'submission\_users\_status', |
| [757](#L757) | 'type' => 'select', |
| [758](#L758) | 'title' => esc\_html\_\_('Default Status', 'waymark'), |
| [759](#L759) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_status'), |
| [760](#L760) | 'tip' => esc\_attr\_\_('This is the initial status of the submitted Map. Note! Publish means that the Map (including any images added) will be \*immediately\* visible on your site.', 'waymark'), |
| [761](#L761) | 'options' => [ |
| [762](#L762) | 'publish' => esc\_attr\_\_('Publish', 'waymark'), |
| [763](#L763) | 'draft' => esc\_attr\_\_('Draft', 'waymark'), |
| [764](#L764) | ], |
| [765](#L765) | ], |
| [766](#L766) | 'submission\_collection' => [ |
| [767](#L767) | 'name' => 'submission\_collection', |
| [768](#L768) | 'id' => 'submission\_users\_collection', |
| [769](#L769) | 'type' => 'select', |
| [770](#L770) | 'title' => esc\_html\_\_('Default Collection', 'waymark'), |
| [771](#L771) | 'tip' => esc\_attr\_\_('If specified, user submissions will be automatically added to this Collection.', 'waymark'), |
| [772](#L772) | 'options' => $collection\_array, |
| [773](#L773) | ], |
| [774](#L774) | //                                              'submission\_alert' => array( |
| [775](#L775) | //                                                      'name' => 'submission\_alert', |
| [776](#L776) | //                                                      'id' => 'submission\_users\_alert', |
| [777](#L777) | //                                                      'type' => 'boolean', |
| [778](#L778) | //                                                      'title' => esc\_html\_\_('Email Alert', 'waymark'), |
| [779](#L779) | //                                                      'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_alert'), |
| [780](#L780) | //                                                      'tip' => esc\_attr\_\_('Receive email alerts for new submissions.', 'waymark'), |
| [781](#L781) | //                                                      'class' => 'waymark-hidden' |
| [782](#L782) | //                                              ) |
| [783](#L783) | ], |
| [784](#L784) | ], |
| [785](#L785) |  |
| [786](#L786) | //Public |
| [787](#L787) | 'from\_public' => [ |
| [788](#L788) | 'title' => esc\_html\_\_('Public Submissions', 'waymark'), |
| [789](#L789) | 'description' => \_\_('This will allow Submissions from <b>any visitor</b>, without registration.<!--<br /><br /><b>Important!</b>-->', 'waymark'), |
| [790](#L790) | 'fields' => [ |
| [791](#L791) | 'submission\_public' => [ |
| [792](#L792) | 'name' => 'submission\_public', |
| [793](#L793) | 'id' => 'submission\_public', |
| [794](#L794) | 'type' => 'boolean', |
| [795](#L795) | 'title' => esc\_html\_\_('Public Submissions', 'waymark'), |
| [796](#L796) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_public'), |
| [797](#L797) | 'tip' => esc\_attr\_\_('Allow \*anyone\* to submit Maps to your site, without registration.', 'waymark'), |
| [798](#L798) | ], |
| [799](#L799) | 'submission\_features' => [ |
| [800](#L800) | 'name' => 'submission\_features', |
| [801](#L801) | 'id' => 'submission\_public\_features', |
| [802](#L802) | 'type' => 'select\_multi', |
| [803](#L803) | 'class' => 'waymark-align-top', |
| [804](#L804) | 'title' => esc\_html\_\_('Editor Features', 'waymark'), |
| [805](#L805) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_features'), |
| [806](#L806) | 'tip' => esc\_attr\_\_('What features to offer in the Editor. Important! Uploaded images are added to the Media Library (see Upload Location below), reading from file does not keep a copy of the file on the server. Whether an individual Meta input is displayed can be set in the Settings > Map > Meta.', 'waymark'), |
| [807](#L807) | 'options' => [ |
| [808](#L808) | 'draw' => esc\_attr\_\_('Drawing', 'waymark'), |
| [809](#L809) | 'photo' => esc\_attr\_\_('Image upload', 'waymark'), |
| [810](#L810) | 'file' => esc\_attr\_\_('Read from File', 'waymark'), |
| [811](#L811) | 'title' => esc\_attr\_\_('Title', 'waymark'), |
| [812](#L812) | 'meta' => esc\_attr\_\_('Meta', 'waymark'), |
| [813](#L813) | ], |
| [814](#L814) | ], |
| [815](#L815) | 'submission\_upload\_dir' => [ |
| [816](#L816) | 'name' => 'submission\_upload\_dir', |
| [817](#L817) | 'id' => 'submission\_upload\_dir', |
| [818](#L818) | 'type' => 'select', |
| [819](#L819) | 'title' => esc\_html\_\_('Upload Location', 'waymark'), |
| [820](#L820) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_upload\_dir'), |
| [821](#L821) | 'tip' => esc\_attr\_\_('Images upload by non-registered users can be stored seperately from other Media Library uploads, to aid with moderation. All uploaded images will be stored in a single directory (/waymark\_submission) found in the upload root.', 'waymark'), |
| [822](#L822) | 'class' => '', |
| [823](#L823) | 'options' => [ |
| [824](#L824) | 'waymark\_submission' => esc\_attr\_\_('Seperated (/waymark\_submission)', 'waymark'), |
| [825](#L825) | '' => sprintf(esc\_attr\_\_('Media Library Default (%s)', 'waymark'), $upload\_dir['subdir']), |
| [826](#L826) | ], |
| [827](#L827) | ], |
| [828](#L828) | 'submission\_status' => [ |
| [829](#L829) | 'name' => 'submission\_status', |
| [830](#L830) | 'id' => 'submission\_public\_status', |
| [831](#L831) | 'type' => 'select', |
| [832](#L832) | 'title' => esc\_html\_\_('Default Status', 'waymark'), |
| [833](#L833) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_status'), |
| [834](#L834) | 'tip' => esc\_attr\_\_('This is the initial status of the submitted Map. Note! Publish means that the Map (including any images added) will be \*immediately\* visible on your site.', 'waymark'), |
| [835](#L835) | 'options' => [ |
| [836](#L836) | 'draft' => esc\_attr\_\_('Draft', 'waymark'), |
| [837](#L837) | 'publish' => esc\_attr\_\_('Publish (not recommended!)', 'waymark'), |
| [838](#L838) | ], |
| [839](#L839) | 'class' => '', |
| [840](#L840) | ], |
| [841](#L841) | 'submission\_collection' => [ |
| [842](#L842) | 'name' => 'submission\_collection', |
| [843](#L843) | 'id' => 'submission\_public\_collection', |
| [844](#L844) | 'type' => 'select', |
| [845](#L845) | 'title' => esc\_html\_\_('Default Collection', 'waymark'), |
| [846](#L846) | 'tip' => esc\_attr\_\_('If specified, user submissions will be automatically added to this Collection.', 'waymark'), |
| [847](#L847) | 'options' => $collection\_array, |
| [848](#L848) | ], |
| [849](#L849) | //                                              'submission\_alert' => array( |
| [850](#L850) | //                                                      'name' => 'submission\_alert', |
| [851](#L851) | //                                                      'id' => 'submission\_public\_alert', |
| [852](#L852) | //                                                      'type' => 'boolean', |
| [853](#L853) | //                                                      'title' => esc\_html\_\_('Email Alert', 'waymark'), |
| [854](#L854) | //                                                      'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_alert'), |
| [855](#L855) | //                                                      'tip' => esc\_attr\_\_('Receive email alerts for new submissions.', 'waymark'), |
| [856](#L856) | //                                                      'class' => 'waymark-hidden' |
| [857](#L857) | //                                              ), |
| [858](#L858) | ], |
| [859](#L859) | ], |
| [860](#L860) | ], |
| [861](#L861) | ]; |
| [862](#L862) |  |
| [863](#L863) | //Submissions not enabled |
| [864](#L864) | if (! Waymark\_Config::get\_setting('submission', 'global', 'submission\_enable')) { |
| [865](#L865) | //Hide related inputs |
| [866](#L866) | $this->tabs['meta']['sections']['inputs']['fields']['meta\_submission']['class'] = ' waymark-hidden'; |
| [867](#L867) |  |
| [868](#L868) | $this->tabs['markers']['sections']['marker\_types']['fields']['marker\_submission']['class'] = 'waymark-hidden'; |
| [869](#L869) | $this->tabs['lines']['sections']['line\_types']['fields']['line\_submission']['class'] = 'waymark-hidden'; |
| [870](#L870) | $this->tabs['shapes']['sections']['shape\_types']['fields']['shape\_submission']['class'] = 'waymark-hidden'; |
| [871](#L871) |  |
| [872](#L872) | $this->tabs['submission']['sections']['from\_users']['class'] = 'waymark-hidden'; |
| [873](#L873) | $this->tabs['submission']['sections']['from\_public']['class'] = 'waymark-hidden'; |
| [874](#L874) | //If No public submissions |
| [875](#L875) | } elseif (! Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_public')) { |
| [876](#L876) | //Hide settings |
| [877](#L877) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_features']['class'] = ' waymark-hidden'; |
| [878](#L878) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_status']['class'] = ' waymark-hidden'; |
| [879](#L879) | //                      $this->tabs['submission']['sections']['from\_public']['fields']['submission\_alert']['class'] .= ' waymark-hidden'; |
| [880](#L880) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_upload\_dir']['class'] = ' waymark-hidden'; |
| [881](#L881) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_collection']['class'] = ' waymark-hidden'; |
| [882](#L882) | } |
| [883](#L883) |  |
| [884](#L884) | /\*\* |
| [885](#L885) | \* =========================================== |
| [886](#L886) | \* ================== MISC =================== |
| [887](#L887) | \* =========================================== |
| [888](#L888) | \*/ |
| [889](#L889) |  |
| [890](#L890) | $this->tabs['misc'] = [ |
| [891](#L891) | 'name' => esc\_html\_\_('Misc.', 'waymark'), |
| [892](#L892) | 'description' => '', |
| [893](#L893) | 'sections' => [ |
| [894](#L894) | 'map\_options' => [ |
| [895](#L895) | 'title' => esc\_html\_\_('Map Options', 'waymark'), |
| [896](#L896) | 'description' => esc\_html\_\_('Use these options to change how Maps are displayed.', 'waymark'), |
| [897](#L897) | 'help' => [ |
| [898](#L898) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs-cat/examples')), |
| [899](#L899) | 'text' => esc\_attr\_\_('See Examples &raquo;', 'waymark'), |
| [900](#L900) | ], |
| [901](#L901) | 'fields' => [ |
| [902](#L902) | 'map\_default\_latlng' => [ |
| [903](#L903) | 'name' => 'map\_default\_latlng', |
| [904](#L904) | 'id' => 'map\_default\_latlng', |
| [905](#L905) | 'type' => 'text', |
| [906](#L906) | 'class' => '', |
| [907](#L907) | 'title' => esc\_html\_\_('Default Centre', 'waymark'), |
| [908](#L908) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_default\_latlng'), |
| [909](#L909) | 'tip' => esc\_attr\_\_('Waymark centres the Map automatically when displaying data. These coordinates (Latitude,Longitude) will be used when there is no data available.', 'waymark'), |
| [910](#L910) | 'input\_processing' => [ |
| [911](#L911) | 'preg\_replace("/[^0-9.,-]+/", "", $param\_value);', |
| [912](#L912) | ], |
| [913](#L913) | 'output\_processing' => [ |
| [914](#L914) | sprintf('(! empty($param\_value)) ? $param\_value : "%s";', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_default\_latlng')), |
| [915](#L915) | ], |
| [916](#L916) | ], |
| [917](#L917) | 'map\_height' => [ |
| [918](#L918) | 'name' => 'map\_height', |
| [919](#L919) | 'id' => 'map\_height', |
| [920](#L920) | 'type' => 'text', |
| [921](#L921) | 'class' => 'waymark-short-input waymark-align-top', |
| [922](#L922) | 'title' => esc\_html\_\_('Map Height', 'waymark'), |
| [923](#L923) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height'), |
| [924](#L924) | 'append' => '<br />' . sprintf(esc\_attr\_\_('Or set in Shortcode: %s', 'waymark'), '<code>[' . Waymark\_Config::get\_item('shortcode') . ' map\_height=&quot;' . Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height') . '&quot; map\_width=&quot;320&quot;]</code>'), |
| [925](#L925) | 'tip' => sprintf(esc\_attr\_\_('Specify the desired height of the Map (in pixels). Pro Tip! This will affect all Maps, but you can change the height (and width) of an individual Map through the Shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; map\_height=&quot;' . Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height') . '&quot;]'), |
| [926](#L926) | 'input\_processing' => [ |
| [927](#L927) | 'preg\_replace("/[^0-9]/", "", $param\_value);', |
| [928](#L928) | ], |
| [929](#L929) | 'output\_processing' => [ |
| [930](#L930) | sprintf('(! empty($param\_value)) ? $param\_value : %d;', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_height')), |
| [931](#L931) | ], |
| [932](#L932) | ], |
| [933](#L933) | 'map\_default\_zoom' => [ |
| [934](#L934) | 'name' => 'map\_default\_zoom', |
| [935](#L935) | 'id' => 'map\_default\_zoom', |
| [936](#L936) | 'type' => 'text', |
| [937](#L937) | 'class' => 'waymark-short-input', |
| [938](#L938) | 'title' => esc\_html\_\_('Default Zoom', 'waymark'), |
| [939](#L939) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_default\_zoom'), |
| [940](#L940) | 'tip' => esc\_attr\_\_('Waymark zooms the Map automatically when displaying data. This zoom level (0-18) will be used when there is no data available.', 'waymark'), |
| [941](#L941) | 'input\_processing' => [ |
| [942](#L942) | 'preg\_replace("/[^0-9]/", "", $param\_value);', |
| [943](#L943) | ], |
| [944](#L944) | 'output\_processing' => [ |
| [945](#L945) | sprintf('(! empty($param\_value)) ? $param\_value : "%d";', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_default\_zoom')), |
| [946](#L946) | ], |
| [947](#L947) | ], |
| [948](#L948) | 'show\_gallery' => [ |
| [949](#L949) | 'name' => 'show\_gallery', |
| [950](#L950) | 'id' => 'show\_gallery', |
| [951](#L951) | 'type' => 'boolean', |
| [952](#L952) | 'title' => esc\_html\_\_('Image Gallery', 'waymark'), |
| [953](#L953) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_gallery'), |
| [954](#L954) | 'tip' => sprintf(esc\_attr\_\_('Whether to display an image gallery for Markers that have images associated with them. Pro Tip! This will affect all Maps, but you can choose to show/hide the gallery of an individual Map through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' show\_gallery=&quot;1&quot;]'), |
| [955](#L955) | 'options' => [ |
| [956](#L956) | '1' => esc\_html\_\_('Show', 'waymark'), |
| [957](#L957) | '0' => esc\_html\_\_('Hide', 'waymark'), |
| [958](#L958) | ], |
| [959](#L959) | ], |
| [960](#L960) | 'show\_filter' => [ |
| [961](#L961) | 'name' => 'show\_filter', |
| [962](#L962) | 'id' => 'show\_filter', |
| [963](#L963) | 'type' => 'boolean', |
| [964](#L964) | 'title' => esc\_html\_\_('Overlay Filter', 'waymark'), |
| [965](#L965) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_filter'), |
| [966](#L966) | 'tip' => sprintf(esc\_attr\_\_('Allow the user to filter which Markers, Lines and Shapes are currently visible on the Map. Pro Tip! This will affect all Maps, but you can choose to show/hide the filter for individual Maps through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' show\_filter=&quot;1&quot;]'), |
| [967](#L967) | 'options' => [ |
| [968](#L968) | '1' => esc\_html\_\_('Show', 'waymark'), |
| [969](#L969) | '0' => esc\_html\_\_('Hide', 'waymark'), |
| [970](#L970) | ], |
| [971](#L971) | ], |
| [972](#L972) | 'allow\_export' => [ |
| [973](#L973) | 'name' => 'allow\_export', |
| [974](#L974) | 'id' => 'allow\_export', |
| [975](#L975) | 'type' => 'boolean', |
| [976](#L976) | 'title' => esc\_html\_\_('Public Export', 'waymark'), |
| [977](#L977) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'allow\_export'), |
| [978](#L978) | 'tip' => sprintf(esc\_attr\_\_('Offer visitors the ability to Download all Collection/Map Overlays in the Shortcode Header and on the Map Details page. GeoJSON, GPX and KML formats supported.', 'waymark')), |
| [979](#L979) | ], |
| [980](#L980) | 'show\_scale' => [ |
| [981](#L981) | 'name' => 'show\_scale', |
| [982](#L982) | 'id' => 'show\_scale', |
| [983](#L983) | 'type' => 'boolean', |
| [984](#L984) | 'title' => esc\_html\_\_('Show Scale', 'waymark'), |
| [985](#L985) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_scale'), |
| [986](#L986) | 'tip' => sprintf(esc\_attr\_\_('Show a distance scale (km and miles) on the Map.', 'waymark')), |
| [987](#L987) | ], |
| [988](#L988) | ], |
| [989](#L989) | ], |
| [990](#L990) |  |
| [991](#L991) | //Interaction |
| [992](#L992) |  |
| [993](#L993) | //Sleep |
| [994](#L994) | 'interaction\_options' => [ |
| [995](#L995) | 'title' => esc\_html\_\_('Sleep Options', 'waymark'), |
| [996](#L996) | 'description' => sprintf(\_\_('Waymark Maps will zoom when the user scrolls. This can cause some unexpected/annoying behaviour when scrolling a page.<br /><br /><b>Sleeping</b> the Map initially and <b>Waking</b> upon user interaction (i.e. hovering/clicking/tapping) may create a better experience.', 'waymark'), Waymark\_Config::get\_default('misc', 'interaction\_options', 'delay\_seconds')), |
| [997](#L997) | 'fields' => [ |
| [998](#L998) | 'delay\_seconds' => [ |
| [999](#L999) | 'name' => 'delay\_seconds', |
| [1000](#L1000) | 'id' => 'delay\_seconds', |
| [1001](#L1001) | 'type' => 'text', |
| [1002](#L1002) | 'class' => 'waymark-short-input', |
| [1003](#L1003) | 'title' => esc\_html\_\_('Hover Wake Time', 'waymark'), |
| [1004](#L1004) | 'append' => esc\_html\_\_('Seconds', 'waymark'), |
| [1005](#L1005) | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'delay\_seconds'), |
| [1006](#L1006) | 'tip' => esc\_attr\_\_('How many seconds before scroll zoom is enabled. 0 seconds will mean no delay (disabling this feature). A large number of seconds like 3600 (an hour) will esentially \*disable hover to wake\*, meaning the user will need to \*click\* to wake.', 'waymark'), |
| [1007](#L1007) | 'input\_processing' => [ |
| [1008](#L1008) | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'interaction\_options', 'delay\_seconds') . ';', //Fallback |
| [1009](#L1009) | ], |
| [1010](#L1010) | ], |
| [1011](#L1011) | 'do\_message' => [ |
| [1012](#L1012) | 'name' => 'do\_message', |
| [1013](#L1013) | 'id' => 'do\_message', |
| [1014](#L1014) | 'type' => 'boolean', |
| [1015](#L1015) | 'title' => esc\_html\_\_('Display Message', 'waymark'), |
| [1016](#L1016) | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'do\_message'), |
| [1017](#L1017) | 'tip' => esc\_attr\_\_('This message will be displayed by the Map while scroll zoom is disabled.', 'waymark'), |
| [1018](#L1018) | ], |
| [1019](#L1019) | 'wake\_message' => [ |
| [1020](#L1020) | 'name' => 'wake\_message', |
| [1021](#L1021) | 'id' => 'wake\_message', |
| [1022](#L1022) | 'type' => 'text', |
| [1023](#L1023) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Display', 'waymark') . ' </span> ' . esc\_html\_\_('Message Text', 'waymark'), |
| [1024](#L1024) | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'wake\_message'), |
| [1025](#L1025) | ], |
| [1026](#L1026) | ], |
| [1027](#L1027) | ], |
| [1028](#L1028) |  |
| [1029](#L1029) | // Cluster |
| [1030](#L1030) |  |
| [1031](#L1031) | 'cluster\_options' => [ |
| [1032](#L1032) | 'title' => esc\_html\_\_('Cluster Options', 'waymark'), |
| [1033](#L1033) | 'description' => sprintf(\_\_('With Clustering enabled, Markers will be grouped together when they are close together. This can help to reduce clutter on the Map.', 'waymark'), Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_threshold')), |
| [1034](#L1034) | 'help' => [ |
| [1035](#L1035) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/marker-clustering')), |
| [1036](#L1036) | 'text' => esc\_attr\_\_('Clustering Docs &raquo;', 'waymark'), |
| [1037](#L1037) | ], |
| [1038](#L1038) | 'fields' => [ |
| [1039](#L1039) | 'show\_cluster' => [ |
| [1040](#L1040) | 'name' => 'show\_cluster', |
| [1041](#L1041) | 'id' => 'show\_cluster', |
| [1042](#L1042) | 'type' => 'boolean', |
| [1043](#L1043) | 'options' => [ |
| [1044](#L1044) | '1' => esc\_html\_\_('Enabled', 'waymark'), |
| [1045](#L1045) | '0' => esc\_html\_\_('Disabled', 'waymark'), |
| [1046](#L1046) | ], |
| [1047](#L1047) |  |
| [1048](#L1048) | 'title' => esc\_html\_\_('Marker Clustering', 'waymark'), |
| [1049](#L1049) | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'show\_cluster'), |
| [1050](#L1050) | 'tip' => esc\_attr\_\_('Whether to cluster (stack) Markers that are close together. Pro Tip! This will affect all Maps, but you can also enable/disable clustering through the Shortcode: [Waymark show\_cluster="0"]', 'waymark'), |
| [1051](#L1051) | ], |
| [1052](#L1052) | 'cluster\_threshold' => [ |
| [1053](#L1053) | 'name' => 'cluster\_threshold', |
| [1054](#L1054) | 'id' => 'cluster\_threshold', |
| [1055](#L1055) | 'type' => 'text', |
| [1056](#L1056) | 'class' => 'waymark-short-input', |
| [1057](#L1057) | 'title' => esc\_html\_\_('Cluster Threshold', 'waymark'), |
| [1058](#L1058) | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'cluster\_threshold'), |
| [1059](#L1059) | 'tip' => esc\_attr\_\_('Markers will not be clustered above this zoom level.', 'waymark'), |
| [1060](#L1060) | 'input\_processing' => [ |
| [1061](#L1061) | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_threshold') . ';', //Fallback |
| [1062](#L1062) | ], |
| [1063](#L1063) | ], |
| [1064](#L1064) | 'cluster\_radius' => [ |
| [1065](#L1065) | 'name' => 'cluster\_radius', |
| [1066](#L1066) | 'id' => 'cluster\_radius', |
| [1067](#L1067) | 'type' => 'text', |
| [1068](#L1068) | 'class' => 'waymark-short-input', |
| [1069](#L1069) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Cluster', 'waymark') . ' </span> ' . esc\_html\_\_('Radius', 'waymark'), |
| [1070](#L1070) | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'cluster\_radius'), |
| [1071](#L1071) | 'tip' => esc\_attr\_\_('The maximum radius that a cluster will cover from the central marker (in pixels). Decreasing will make more, smaller clusters.     Default 80.', 'waymark'), |
| [1072](#L1072) |  |
| [1073](#L1073) | 'input\_processing' => [ |
| [1074](#L1074) | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_radius') . ';', //Fallback |
| [1075](#L1075) | ], |
| [1076](#L1076) | ], |
| [1077](#L1077) | ], |
| [1078](#L1078) | ], |
| [1079](#L1079) |  |
| [1080](#L1080) | //Shortcode |
| [1081](#L1081) |  |
| [1082](#L1082) | 'shortcode\_options' => [ |
| [1083](#L1083) | 'title' => esc\_html\_\_('Shortcode Options', 'waymark'), |
| [1084](#L1084) | 'description' => esc\_html\_\_('How Maps are embedded into your content using the shortcode.', 'waymark'), |
| [1085](#L1085) | 'help' => [ |
| [1086](#L1086) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/shortcodes')), |
| [1087](#L1087) | 'text' => esc\_attr\_\_('Shortcode Docs &raquo;', 'waymark'), |
| [1088](#L1088) | ], |
| [1089](#L1089) | 'fields' => [ |
| [1090](#L1090) | 'shortcode\_header' => [ |
| [1091](#L1091) | 'name' => 'shortcode\_header', |
| [1092](#L1092) | 'id' => 'shortcode\_header', |
| [1093](#L1093) | 'type' => 'select', |
| [1094](#L1094) | 'title' => esc\_html\_\_('Shortcode Header', 'waymark'), |
| [1095](#L1095) | 'default' => Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'shortcode\_header'), |
| [1096](#L1096) | 'tip' => sprintf(esc\_attr\_\_('The shortcode header displays the title and link to the Map or Collection. Pro Tip! This will affect all shortcodes, but you can override the setting through the shortcode: %s (the value must be either 0 or 1).', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; shortcode\_header=&quot;' . Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'shortcode\_header') . '&quot;]'), |
| [1097](#L1097) | 'options' => [ |
| [1098](#L1098) | '1' => esc\_html\_\_('Show', 'waymark'), |
| [1099](#L1099) | '0' => esc\_html\_\_('Hide', 'waymark'), |
| [1100](#L1100) | ], |
| [1101](#L1101) | ], |
| [1102](#L1102) | 'header\_override' => [ |
| [1103](#L1103) | 'name' => 'header\_override', |
| [1104](#L1104) | 'id' => 'header\_override', |
| [1105](#L1105) | 'type' => 'select', |
| [1106](#L1106) | 'title' => esc\_html\_\_('Header for Admin', 'waymark'), |
| [1107](#L1107) | 'default' => Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'header\_override'), |
| [1108](#L1108) | 'tip' => esc\_attr\_\_('Use this Setting to always show the Shortcode Header when signed in as admin, useful for quickly navigating to embeded Maps.', 'waymark'), |
| [1109](#L1109) | 'options' => [ |
| [1110](#L1110) | '0' => esc\_html\_\_('Use Setting', 'waymark'), |
| [1111](#L1111) | '1' => esc\_html\_\_('Always Show', 'waymark'), |
| [1112](#L1112) | ], |
| [1113](#L1113) | ], |
| [1114](#L1114) | ], |
| [1115](#L1115) | ], |
| [1116](#L1116) |  |
| [1117](#L1117) | //Elevation |
| [1118](#L1118) |  |
| [1119](#L1119) | 'elevation\_options' => [ |
| [1120](#L1120) | 'title' => esc\_html\_\_('Elevation Options', 'waymark'), |
| [1121](#L1121) | 'description' => esc\_html\_\_('Lines with elevation data.', 'waymark'), |
| [1122](#L1122) | 'help' => [ |
| [1123](#L1123) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/elevation-profile-colours')), |
| [1124](#L1124) | 'text' => esc\_attr\_\_('Elevation Styling &raquo;', 'waymark'), |
| [1125](#L1125) | ], |
| [1126](#L1126) | 'fields' => [ |
| [1127](#L1127) | 'show\_elevation' => [ |
| [1128](#L1128) | 'name' => 'show\_elevation', |
| [1129](#L1129) | 'id' => 'show\_elevation', |
| [1130](#L1130) | 'type' => 'select', |
| [1131](#L1131) | 'title' => esc\_html\_\_('Elevation Profile', 'waymark'), |
| [1132](#L1132) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'show\_elevation'), |
| [1133](#L1133) | 'tip' => sprintf(esc\_attr\_\_('Display an interactive elevation profile graph below the Map for Lines that have elevation data. Pro Tip! You can choose to show/hide the elevation graph of an individual Map through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; show\_elevation=&quot;1&quot;]'), |
| [1134](#L1134) | 'options' => [ |
| [1135](#L1135) | '2' => esc\_html\_\_('Show on Map Details', 'waymark'), |
| [1136](#L1136) | '1' => esc\_html\_\_('Show everywhere', 'waymark'), |
| [1137](#L1137) | '0' => esc\_html\_\_('Hide everywhere', 'waymark'), |
| [1138](#L1138) | ], |
| [1139](#L1139) | ], |
| [1140](#L1140) | 'elevation\_units' => [ |
| [1141](#L1141) | 'name' => 'elevation\_units', |
| [1142](#L1142) | 'id' => 'elevation\_units', |
| [1143](#L1143) | 'type' => 'select', |
| [1144](#L1144) | 'title' => esc\_html\_\_('Elevation Units', 'waymark'), |
| [1145](#L1145) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_units'), |
| [1146](#L1146) | 'tip' => sprintf(esc\_attr\_\_('Display elevation data in metric (m/km) or imperial (ft/mi) units.', 'waymark')), |
| [1147](#L1147) | 'options' => [ |
| [1148](#L1148) | 'metric' => esc\_html\_\_('Metric (m/km)', 'waymark'), |
| [1149](#L1149) | 'imperial' => esc\_html\_\_('Imperial (ft/mi)', 'waymark'), |
| [1150](#L1150) | ], |
| [1151](#L1151) | ], |
| [1152](#L1152) | 'elevation\_colour' => [ |
| [1153](#L1153) | 'name' => 'elevation\_colour', |
| [1154](#L1154) | 'id' => 'elevation\_colour', |
| [1155](#L1155) | 'type' => 'text', |
| [1156](#L1156) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [1157](#L1157) | 'title' => esc\_html\_\_('Elevation Colour', 'waymark'), |
| [1158](#L1158) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_colour'), |
| [1159](#L1159) | 'tip' => sprintf(esc\_attr\_\_('The colour of the elevation graph and associated Line.', 'waymark')), |
| [1160](#L1160) | 'input\_processing' => [ |
| [1161](#L1161) | '(! empty($param\_value)) ? $param\_value : "#b42714";', //Fallback |
| [1162](#L1162) | ], |
| [1163](#L1163) | ], |
| [1164](#L1164) | 'elevation\_initial' => [ |
| [1165](#L1165) | 'name' => 'elevation\_initial', |
| [1166](#L1166) | 'id' => 'elevation\_initial', |
| [1167](#L1167) | 'type' => 'boolean', |
| [1168](#L1168) | 'title' => esc\_html\_\_('Show Initially?', 'waymark'), |
| [1169](#L1169) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_initial'), |
| [1170](#L1170) | 'tip' => sprintf(esc\_attr\_\_('Whether to show the elevation profile when the Map loads. If set to No, the user must click on a Line in order to display the elevation data. If there are multiple Lines with elevation data, the one added to the editor first will be the one shown initially.', 'waymark')), |
| [1171](#L1171) | ], |
| [1172](#L1172) | ], |
| [1173](#L1173) | ], |
| [1174](#L1174) |  |
| [1175](#L1175) | /\*\* |
| [1176](#L1176) | \* =========================================== |
| [1177](#L1177) | \* ================= ADVANCED ================ |
| [1178](#L1178) | \* =========================================== |
| [1179](#L1179) | \*/ |
| [1180](#L1180) |  |
| [1181](#L1181) | //Collections |
| [1182](#L1182) |  |
| [1183](#L1183) | 'collection\_options' => [ |
| [1184](#L1184) | 'title' => esc\_html\_\_('Collection Options', 'waymark'), |
| [1185](#L1185) | 'description' => esc\_html\_\_('How Collections are displayed.', 'waymark'), |
| [1186](#L1186) | 'help' => [ |
| [1187](#L1187) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/collections')), |
| [1188](#L1188) | 'text' => esc\_attr\_\_('Collection Docs &raquo;', 'waymark'), |
| [1189](#L1189) | ], |
| [1190](#L1190) | 'fields' => [ |
| [1191](#L1191) | 'load\_method' => [ |
| [1192](#L1192) | 'name' => 'load\_method', |
| [1193](#L1193) | 'id' => 'load\_method', |
| [1194](#L1194) | 'type' => 'select', |
| [1195](#L1195) | 'options' => [ |
| [1196](#L1196) | 'fetch' => esc\_html\_\_('Background', 'waymark'), |
| [1197](#L1197) | 'embed' => esc\_html\_\_('Embed', 'waymark'), |
| [1198](#L1198) | ], |
| [1199](#L1199) | 'class' => 'waymark-short-input', |
| [1200](#L1200) | 'title' => esc\_html\_\_('Shortcode Method', 'waymark'), |
| [1201](#L1201) | 'default' => Waymark\_Config::get\_setting('misc', 'collection\_options', 'load\_method'), |
| [1202](#L1202) | 'tip' => esc\_attr\_\_('Whether to load multiple Maps in the Background (uses AJAX to improve page load) when embedding with the Shortcode, or to Embed them within the page. Embedding may be a bad idea for LARGE COLLECTIONS, but can resolve some issues where Collections are not displaying correctly.', 'waymark'), |
| [1203](#L1203) | ], |
| [1204](#L1204) | ], |
| [1205](#L1205) | ], |
| [1206](#L1206) |  |
| [1207](#L1207) | //Editor |
| [1208](#L1208) |  |
| [1209](#L1209) | 'editor\_options' => [ |
| [1210](#L1210) | 'title' => esc\_html\_\_('Editor Options', 'waymark'), |
| [1211](#L1211) | 'description' => esc\_html\_\_('Customising the Map Editor.', 'waymark'), |
| [1212](#L1212) | 'fields' => [ |
| [1213](#L1213) | 'confirm\_delete' => [ |
| [1214](#L1214) | 'name' => 'confirm\_delete', |
| [1215](#L1215) | 'id' => 'confirm\_delete', |
| [1216](#L1216) | 'type' => 'boolean', |
| [1217](#L1217) | 'title' => esc\_html\_\_('Confirm Delete?', 'waymark'), |
| [1218](#L1218) | 'default' => Waymark\_Config::get\_setting('misc', 'editor\_options', 'confirm\_delete'), |
| [1219](#L1219) | 'tip' => esc\_attr\_\_('Whether to show a confirmation dialog before deleting Markers/Lines/Shapes from the Map. Pro Tip! Even if you accidentally delete something, changes are not saved until the "Update" button is clicked.', 'waymark'), |
| [1220](#L1220) | ], |
| [1221](#L1221) | 'editor\_basemap' => [ |
| [1222](#L1222) | 'name' => 'editor\_basemap', |
| [1223](#L1223) | 'id' => 'editor\_basemap', |
| [1224](#L1224) | 'type' => 'select', |
| [1225](#L1225) | 'title' => esc\_html\_\_('Default Basemap', 'waymark'), |
| [1226](#L1226) | 'default' => Waymark\_Config::get\_setting('misc', 'editor\_options', 'editor\_basemap'), |
| [1227](#L1227) | 'tip' => esc\_attr\_\_('Which Basemap to use as the editor default.', 'waymark'), |
| [1228](#L1228) | 'options' => $basemap\_options, |
| [1229](#L1229) | ], |
| [1230](#L1230) | ], |
| [1231](#L1231) | ], |
| [1232](#L1232) |  |
| [1233](#L1233) | //Permalinks |
| [1234](#L1234) |  |
| [1235](#L1235) | 'permalinks' => [ |
| [1236](#L1236) | 'title' => esc\_html\_\_('Permalinks', 'waymark'), |
| [1237](#L1237) | 'description' => 'Customise your Map and Collection URLs.', |
| [1238](#L1238) | 'footer' => '<small>For the changes to take affect you must rebuild your Permalinks by going to WP Settings > Permalinks and clicking "Save Changes".</small>', |
| [1239](#L1239) | 'fields' => [ |
| [1240](#L1240) | 'permalink\_slug\_map' => [ |
| [1241](#L1241) | 'name' => 'permalink\_slug\_map', |
| [1242](#L1242) | 'id' => 'permalink\_slug\_map', |
| [1243](#L1243) | 'type' => 'text', |
| [1244](#L1244) | 'class' => 'waymark-short-input', |
| [1245](#L1245) | 'title' => esc\_html\_\_('Map Slug', 'waymark'), |
| [1246](#L1246) | 'default' => Waymark\_Config::get\_setting('misc', 'permalinks', 'permalink\_slug\_map'), |
| [1247](#L1247) | 'tip' => esc\_attr\_\_('The URL slug that will be used for links to your Maps, i.e. example.com/[map-slug]/example-map/. Only alpha-numeric characters and hyphens (-) are allowed.', 'waymark'), |
| [1248](#L1248) | 'input\_processing' => [ |
| [1249](#L1249) | 'preg\_replace("/[^0-9a-z-]+/", "", $param\_value);', |
| [1250](#L1250) | ], |
| [1251](#L1251) | 'prepend' => '<small>/</small>', |
| [1252](#L1252) | 'append' => '<small>/map-name/</small>', |
| [1253](#L1253) | ], |
| [1254](#L1254) | 'permalink\_slug\_collection' => [ |
| [1255](#L1255) | 'name' => 'permalink\_slug\_collection', |
| [1256](#L1256) | 'id' => 'permalink\_slug\_collection', |
| [1257](#L1257) | 'type' => 'text', |
| [1258](#L1258) | 'class' => 'waymark-short-input', |
| [1259](#L1259) | 'title' => esc\_html\_\_('Collection Slug', 'waymark'), |
| [1260](#L1260) | 'default' => Waymark\_Config::get\_setting('misc', 'permalinks', 'permalink\_slug\_collection'), |
| [1261](#L1261) | 'tip' => esc\_attr\_\_('The URL slug that will be used for links to your Collections, i.e. example.com/[collection-slug]/example-collection/. Only alpha-numeric characters and hyphens (-) are allowed.', 'waymark'), |
| [1262](#L1262) | 'input\_processing' => [ |
| [1263](#L1263) | 'preg\_replace("/[^0-9a-z-]+/", "", $param\_value);', |
| [1264](#L1264) | ], |
| [1265](#L1265) | 'prepend' => '<small>/</small>', |
| [1266](#L1266) | 'append' => '<small>/collection-name/</small>', |
| [1267](#L1267) | ], |
| [1268](#L1268) | ], |
| [1269](#L1269) | ], |
| [1270](#L1270) |  |
| [1271](#L1271) | // Custom Post Type Supports |
| [1272](#L1272) |  |
| [1273](#L1273) | 'post' => [ |
| [1274](#L1274) | 'title' => esc\_html\_\_('Post Type', 'waymark'), |
| [1275](#L1275) | 'description' => 'Enable Custom Post Type features.', |
| [1276](#L1276) | 'fields' => [ |
| [1277](#L1277) | 'supports' => [ |
| [1278](#L1278) | 'name' => 'supports', |
| [1279](#L1279) | 'id' => 'supports', |
| [1280](#L1280) | 'type' => 'select\_multi', |
| [1281](#L1281) | 'title' => esc\_html\_\_('Supports', 'waymark'), |
| [1282](#L1282) | 'default' => Waymark\_Config::get\_setting('misc', 'post', 'supports'), |
| [1283](#L1283) | 'tip' => esc\_attr\_\_('Enable or disable various WordPress features of the Map Custom Post Type.', 'waymark'), |
| [1284](#L1284) | 'tip\_link' => 'https://developer.wordpress.org/reference/functions/add\_post\_type\_support/', |
| [1285](#L1285) | 'options' => [ |
| [1286](#L1286) | 'title' => esc\_html\_\_('Title', 'waymark'), |
| [1287](#L1287) | 'author' => esc\_html\_\_('Author', 'waymark'), |
| [1288](#L1288) | 'revisions' => esc\_html\_\_('Revisions', 'waymark'), |
| [1289](#L1289) | 'thumbnail' => esc\_html\_\_('Thumbnail', 'waymark'), |
| [1290](#L1290) | 'comments' => esc\_html\_\_('Comments', 'waymark'), |
| [1291](#L1291) | 'excerpt' => esc\_html\_\_('Excerpt', 'waymark'), |
| [1292](#L1292) | ], |
| [1293](#L1293) | ], |
| [1294](#L1294) | ], |
| [1295](#L1295) | ], |
| [1296](#L1296) |  |
| [1297](#L1297) | //Debug |
| [1298](#L1298) |  |
| [1299](#L1299) | 'advanced' => [ |
| [1300](#L1300) | 'title' => esc\_html\_\_('Debug', 'waymark'), |
| [1301](#L1301) | 'description' => '', |
| [1302](#L1302) | 'fields' => [ |
| [1303](#L1303) | 'debug\_mode' => [ |
| [1304](#L1304) | 'name' => 'debug\_mode', |
| [1305](#L1305) | 'id' => 'debug\_mode', |
| [1306](#L1306) | 'type' => 'boolean', |
| [1307](#L1307) | 'title' => esc\_html\_\_('Debug Mode', 'waymark'), |
| [1308](#L1308) | 'default' => Waymark\_Config::get\_setting('misc', 'advanced', 'debug\_mode'), |
| [1309](#L1309) | 'tip' => esc\_attr\_\_('With debug mode enabled, the plugin will output Map and Settings data in Admin Dashboard. This may come in handy if you need to report a bug. Pro Tip! Check the browser console for Waymark output when signed in as an administrator.', 'waymark'), |
| [1310](#L1310) | 'tip\_link' => 'https://www.waymark.dev/docs/debug-mode/', |
| [1311](#L1311) | 'options' => [ |
| [1312](#L1312) | '0' => esc\_html\_\_('Disable', 'waymark'), |
| [1313](#L1313) | '1' => esc\_html\_\_('Enable', 'waymark'), |
| [1314](#L1314) | ], |
| [1315](#L1315) | ], |
| [1316](#L1316) | ], |
| [1317](#L1317) | ], |
| [1318](#L1318) | ], |
| [1319](#L1319) | ]; |
| [1320](#L1320) |  |
| [1321](#L1321) | //Debug? |
| [1322](#L1322) | if (Waymark\_Helper::is\_debug()) { |
| [1323](#L1323) | $this->tabs['misc']['sections']['advanced']['fields']['settings\_output'] = [ |
| [1324](#L1324) | 'name' => 'settings\_output', |
| [1325](#L1325) | 'id' => 'settings\_output', |
| [1326](#L1326) | 'type' => 'textarea', |
| [1327](#L1327) | 'class' => 'waymark-align-top', |
| [1328](#L1328) | 'title' => esc\_html\_\_('Settings Data', 'waymark'), |
| [1329](#L1329) | 'default' => serialize(get\_option('Waymark\_Settings')), |
| [1330](#L1330) | //Don't save to DB |
| [1331](#L1331) | 'input\_processing' => [ |
| [1332](#L1332) | 'null', |
| [1333](#L1333) | ], |
| [1334](#L1334) | //Don't allow editing |
| [1335](#L1335) | 'output\_processing' => [ |
| [1336](#L1336) | 'serialize(get\_option("Waymark\_Settings"))', |
| [1337](#L1337) | ], |
| [1338](#L1338) | ]; |
| [1339](#L1339) | } |
| [1340](#L1340) |  |
| [1341](#L1341) | add\_action('admin\_notices', [$this, 'admin\_notices']); |
| [1342](#L1342) | add\_action('admin\_init', [$this, 'register\_settings']); |
| [1343](#L1343) | } |
| [1344](#L1344) |  |
| [1345](#L1345) | function get\_settings() { |
| [1346](#L1346) | return $this->current\_settings; |
| [1347](#L1347) | } |
| [1348](#L1348) |  |
| [1349](#L1349) | function register\_settings() { |
| [1350](#L1350) | register\_setting($this->page\_slug, 'Waymark\_Settings', [$this, 'sanitize\_callback']); |
| [1351](#L1351) |  |
| [1352](#L1352) | //For each tab |
| [1353](#L1353) | foreach ($this->tabs as $tab\_key => $tab\_data) { |
| [1354](#L1354) | //For each section |
| [1355](#L1355) | foreach ($tab\_data['sections'] as $section\_key => $section\_data) { |
| [1356](#L1356) | //Set if blank if unset |
| [1357](#L1357) | $section\_data['title'] = (isset($section\_data['title'])) ? $section\_data['title'] : ''; |
| [1358](#L1358) |  |
| [1359](#L1359) | //Create section |
| [1360](#L1360) | add\_settings\_section($section\_key, $section\_data['title'], [$this, 'section\_text'], $this->page\_slug); |
| [1361](#L1361) |  |
| [1362](#L1362) | //For each field in section |
| [1363](#L1363) | if (is\_array($section\_data['fields']) && sizeof($section\_data['fields'])) { |
| [1364](#L1364) | foreach ($section\_data['fields'] as $field) { |
| [1365](#L1365) | //Get set\_value |
| [1366](#L1366) | if (array\_key\_exists($tab\_key, $this->current\_settings) && array\_key\_exists($section\_key, $this->current\_settings[$tab\_key])) { |
| [1367](#L1367) | if (array\_key\_exists($field['name'], $this->current\_settings[$tab\_key][$section\_key])) { |
| [1368](#L1368) | $field['set\_value'] = $this->current\_settings[$tab\_key][$section\_key][$field['name']]; |
| [1369](#L1369) | } |
| [1370](#L1370) | } |
| [1371](#L1371) |  |
| [1372](#L1372) | //Modify name for multi-dimensional array |
| [1373](#L1373) | $field['name'] = 'Waymark\_Settings[' . $tab\_key . '][' . $section\_key . '][' . $field['name'] . ']'; |
| [1374](#L1374) |  |
| [1375](#L1375) | //Repeatable section |
| [1376](#L1376) | if (isset($section\_data['repeatable']) && $section\_data['repeatable']) { |
| [1377](#L1377) | //Get count |
| [1378](#L1378) | $repeatable\_count = Waymark\_Helper::get\_section\_repeatable\_count($section\_data); |
| [1379](#L1379) |  |
| [1380](#L1380) | //Must be an array |
| [1381](#L1381) | if (! is\_array($field['default'])) { |
| [1382](#L1382) | //Make array |
| [1383](#L1383) | $field['default'] = Waymark\_Helper::convert\_single\_value\_to\_array($field['default']); |
| [1384](#L1384) | } |
| [1385](#L1385) |  |
| [1386](#L1386) | //Array size must match |
| [1387](#L1387) | if (sizeof($field['default']) < $repeatable\_count) { |
| [1388](#L1388) | //Pad |
| [1389](#L1389) | $field['default'] = array\_pad($field['default'], $repeatable\_count, $field['default'][0]); |
| [1390](#L1390) | } |
| [1391](#L1391) | } |
| [1392](#L1392) |  |
| [1393](#L1393) | add\_settings\_field($field['name'], $field['title'], [$this, 'create\_input'], $this->page\_slug, $section\_key, $field); |
| [1394](#L1394) | } |
| [1395](#L1395) | } |
| [1396](#L1396) | } |
| [1397](#L1397) | } |
| [1398](#L1398) | } |
| [1399](#L1399) |  |
| [1400](#L1400) | function create\_input($field) { |
| [1401](#L1401) | //Set value |
| [1402](#L1402) | if (array\_key\_exists('set\_value', $field)) { |
| [1403](#L1403) | $set\_value = $field['set\_value']; |
| [1404](#L1404) | } else { |
| [1405](#L1405) | $set\_value = null; |
| [1406](#L1406) | } |
| [1407](#L1407) |  |
| [1408](#L1408) | echo Waymark\_Input::create\_field($field, $set\_value, false); |
| [1409](#L1409) | } |
| [1410](#L1410) |  |
| [1411](#L1411) | function section\_text($args) { |
| [1412](#L1412) | //Unused |
| [1413](#L1413) | } |
| [1414](#L1414) |  |
| [1415](#L1415) | function sanitize\_callback($input\_data) { |
| [1416](#L1416) | //For each tab |
| [1417](#L1417) | foreach ($this->tabs as $tab\_key => $tab\_data) { |
| [1418](#L1418) | //If we have sections |
| [1419](#L1419) | if (array\_key\_exists('sections', $tab\_data)) { |
| [1420](#L1420) | //Iterate over each section |
| [1421](#L1421) | foreach ($tab\_data['sections'] as $section\_key => $section\_data) { |
| [1422](#L1422) | //If section has fields |
| [1423](#L1423) | if (array\_key\_exists('fields', $section\_data)) { |
| [1424](#L1424) | //For each field |
| [1425](#L1425) | foreach ($section\_data['fields'] as $field\_key => $field\_definition) { |
| [1426](#L1426) | //If this field was submitted |
| [1427](#L1427) | if (isset($input\_data[$tab\_key][$section\_key][$field\_definition['name']])) { |
| [1428](#L1428) | $value = $input\_data[$tab\_key][$section\_key][$field\_definition['name']]; |
| [1429](#L1429) |  |
| [1430](#L1430) | //If no input processing specified |
| [1431](#L1431) | if (! array\_key\_exists('input\_processing', $field\_definition)) { |
| [1432](#L1432) | //Make safe by default |
| [1433](#L1433) | $field\_definition['input\_processing'][] = 'htmlspecialchars($param\_value)'; |
| [1434](#L1434) | } |
| [1435](#L1435) |  |
| [1436](#L1436) | //Process the input |
| [1437](#L1437) | $input\_data[$tab\_key][$section\_key][$field\_definition['name']] = Waymark\_Input::process\_input($field\_definition, $value); |
| [1438](#L1438) | } |
| [1439](#L1439) | } |
| [1440](#L1440) | } |
| [1441](#L1441) | } |
| [1442](#L1442) | } |
| [1443](#L1443) | } |
| [1444](#L1444) |  |
| [1445](#L1445) | return $input\_data; |
| [1446](#L1446) | } |
| [1447](#L1447) |  |
| [1448](#L1448) | function content\_admin\_page() { |
| [1449](#L1449) | echo '<div id="waymark-admin-container">' . "\n"; |
| [1450](#L1450) |  |
| [1451](#L1451) | echo Waymark\_Helper::plugin\_about(); |
| [1452](#L1452) |  |
| [1453](#L1453) | echo '  <div class="card">' . "\n"; |
| [1454](#L1454) |  |
| [1455](#L1455) | //Tabs |
| [1456](#L1456) | $active\_content = (isset($\_GET['content'])) ? esc\_html($\_GET['content']) : $this->default\_content; |
| [1457](#L1457) | $this->settings\_nav($active\_content); |
| [1458](#L1458) |  |
| [1459](#L1459) | //Open form |
| [1460](#L1460) | echo '          <form action="' . admin\_url('options.php') . '" method="post">' . "\n"; |
| [1461](#L1461) | settings\_fields($this->page\_slug); |
| [1462](#L1462) |  |
| [1463](#L1463) | //For each tab |
| [1464](#L1464) | foreach ($this->tabs as $tab\_key => $tab\_data) { |
| [1465](#L1465) | $style = ''; |
| [1466](#L1466) | echo '  <div class="waymark-settings-tab waymark-settings-tab-' . $tab\_key . '"' . $style . '>' . "\n"; |
| [1467](#L1467) |  |
| [1468](#L1468) | //Tab description? |
| [1469](#L1469) | if (array\_key\_exists('description', $tab\_data)) { |
| [1470](#L1470) | echo '  <div class="waymark-settings-tab-description">' . $tab\_data['description'] . '</div>' . "\n"; |
| [1471](#L1471) | } |
| [1472](#L1472) |  |
| [1473](#L1473) | //For each section |
| [1474](#L1474) | foreach ($tab\_data['sections'] as $section\_key => $section\_data) { |
| [1475](#L1475) | $class = (isset($section\_data['class'])) ? ' ' . $section\_data['class'] : ''; |
| [1476](#L1476) | echo '          <div class="waymark-settings-section waymark-settings-section-' . $section\_key . $class . '">' . "\n"; |
| [1477](#L1477) |  |
| [1478](#L1478) | //Help |
| [1479](#L1479) | if (array\_key\_exists('help', $section\_data) && isset($section\_data['help']['url'])) { |
| [1480](#L1480) | $help\_text = (isset($section\_data['help']['text'])) ? $section\_data['help']['text'] : 'View Help &raquo;'; |
| [1481](#L1481) |  |
| [1482](#L1482) | echo '          <a class="waymark-docs-link button" href="' . $section\_data['help']['url'] . '" target="\_blank">' . $help\_text . '</a>' . "\n"; |
| [1483](#L1483) | } |
| [1484](#L1484) |  |
| [1485](#L1485) | //Title |
| [1486](#L1486) | if (isset($section\_data['title'])) { |
| [1487](#L1487) | echo '          <h2>' . $section\_data['title'] . '</h2>' . "\n"; |
| [1488](#L1488) | } |
| [1489](#L1489) |  |
| [1490](#L1490) | //Description |
| [1491](#L1491) | if (array\_key\_exists('description', $section\_data)) { |
| [1492](#L1492) | echo '          <div class="waymark-settings-section-description">' . $section\_data['description'] . '</div>' . "\n"; |
| [1493](#L1493) | } |
| [1494](#L1494) |  |
| [1495](#L1495) | //Repeatable? |
| [1496](#L1496) | if (array\_key\_exists('repeatable', $section\_data) && $section\_data['repeatable']) { |
| [1497](#L1497) | echo '<div class="waymark-repeatable" data-count="0">' . "\n"; |
| [1498](#L1498) | } |
| [1499](#L1499) |  |
| [1500](#L1500) | echo '          <table class="form-table">' . "\n"; |
| [1501](#L1501) | do\_settings\_fields($this->page\_slug, $section\_key); |
| [1502](#L1502) | echo '          </table>' . "\n"; |
| [1503](#L1503) |  |
| [1504](#L1504) | //Repeatable? |
| [1505](#L1505) | if (array\_key\_exists('repeatable', $section\_data) && $section\_data['repeatable']) { |
| [1506](#L1506) | echo '</div>' . "\n"; |
| [1507](#L1507) | } |
| [1508](#L1508) |  |
| [1509](#L1509) | //Footer |
| [1510](#L1510) | if (array\_key\_exists('footer', $section\_data)) { |
| [1511](#L1511) | echo '  <div class="waymark-settings-section-footer">' . $section\_data['footer'] . '</div>' . "\n"; |
| [1512](#L1512) | } |
| [1513](#L1513) |  |
| [1514](#L1514) | echo '</div>' . "\n"; |
| [1515](#L1515) | } |
| [1516](#L1516) |  |
| [1517](#L1517) | echo '  </div>' . "\n"; |
| [1518](#L1518) | } |
| [1519](#L1519) |  |
| [1520](#L1520) | submit\_button(null, 'primary large'); |
| [1521](#L1521) | echo '          </form>' . "\n"; |
| [1522](#L1522) |  |
| [1523](#L1523) | echo '  </div>' . "\n"; |
| [1524](#L1524) | echo '</div>' . "\n"; |
| [1525](#L1525) | } |
| [1526](#L1526) |  |
| [1527](#L1527) | function settings\_nav($current = 'tiles') { |
| [1528](#L1528) | echo '<div id="waymark-settings-nav" data-init\_tab\_key="' . esc\_html($current) . '">' . "\n"; |
| [1529](#L1529) | echo '  <select>' . "\n"; |
| [1530](#L1530) |  |
| [1531](#L1531) | foreach ($this->settings\_nav as $content\_id => $content\_title) { |
| [1532](#L1532) | if (strpos($content\_id, 'label') === 0) { |
| [1533](#L1533) | echo '  <option disabled="disabled">' . $content\_title . '</option>' . "\n"; |
| [1534](#L1534) | } else { |
| [1535](#L1535) | echo '  <option value="' . $content\_id . '"' . (($current == $content\_id) ? ' selected="selected"' : '') . '>' . $content\_title . '</option>' . "\n"; |
| [1536](#L1536) | } |
| [1537](#L1537) | } |
| [1538](#L1538) |  |
| [1539](#L1539) | echo '  </select>' . "\n"; |
| [1540](#L1540) | echo '</div>' . "\n"; |
| [1541](#L1541) | } |
| [1542](#L1542) |  |
| [1543](#L1543) | function execute\_action($action) { |
| [1544](#L1544) | switch ($action) { |
| [1545](#L1545) | //Clear cache |
| [1546](#L1546) | case 'clear\_cache': |
| [1547](#L1547) | Waymark\_Cache::flush(); |
| [1548](#L1548) |  |
| [1549](#L1549) | break; |
| [1550](#L1550) | } |
| [1551](#L1551) |  |
| [1552](#L1552) | wp\_redirect(admin\_url('admin.php?page=waymark-settings&tab=advanced&settings-updated=waymark\_action')); |
| [1553](#L1553) |  |
| [1554](#L1554) | die; |
| [1555](#L1555) | } |
| [1556](#L1556) |  |
| [1557](#L1557) | function admin\_notices() { |
| [1558](#L1558) | if (isset($\_GET['settings-updated'])) { |
| [1559](#L1559) | //Settings updates |
| [1560](#L1560) | if ($\_GET['settings-updated'] == 'true') { |
| [1561](#L1561) | echo '<div class="waymark-notice notice notice-success is-dismissible"><p>' . esc\_html\_\_('Settings Updated', 'waymark') . '.</p></div>'; |
| [1562](#L1562) | //Action |
| [1563](#L1563) | } elseif ($\_GET['settings-updated'] == 'waymark\_action') { |
| [1564](#L1564) | echo '<div class="waymark-notice notice notice-success is-dismissible"><p>' . esc\_html\_\_('Action Complete', 'waymark') . '.</p></div>'; |
| [1565](#L1565) | } |
| [1566](#L1566) | } |
| [1567](#L1567) | } |
| [1568](#L1568) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?format=txt)
* [Original Format](/export/3222677/waymark/trunk/inc/Admin/Waymark_Settings.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_b1544531_20250115_082744.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3205103)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3205102 "Changeset 3205102")
* [Next Changeset](/changeset/3205104 "Changeset 3205104") →

---

# Changeset 3205103

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
12/09/2024 08:11:24 PM
([5 weeks](/timeline?from=2024-12-09T20%3A11%3A24Z&precision=second "See timeline at 12/09/2024 08:11:24 PM") ago)

Author:
morehawes
Message:

v1.4.2

Location:
[waymark](/browser/waymark?rev=3205103)
Files:

103 added
13 edited

* [tags/1.4.2](/browser/waymark/tags/1.4.2?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/LICENSE.txt](/browser/waymark/tags/1.4.2/LICENSE.txt?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/Waymark.php](/browser/waymark/tags/1.4.2/Waymark.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets](/browser/waymark/tags/1.4.2/assets?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/css](/browser/waymark/tags/1.4.2/assets/css?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/css/admin.css](/browser/waymark/tags/1.4.2/assets/css/admin.css?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/css/admin.min.css](/browser/waymark/tags/1.4.2/assets/css/admin.min.css?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/css/front.css](/browser/waymark/tags/1.4.2/assets/css/front.css?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/css/front.min.css](/browser/waymark/tags/1.4.2/assets/css/front.min.css?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/css/shared.css](/browser/waymark/tags/1.4.2/assets/css/shared.css?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/img](/browser/waymark/tags/1.4.2/assets/img?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/img/waymark-editor-icon.png](/browser/waymark/tags/1.4.2/assets/img/waymark-editor-icon.png?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/img/waymark-icon-blue.png](/browser/waymark/tags/1.4.2/assets/img/waymark-icon-blue.png?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/img/waymark-icon-dark.png](/browser/waymark/tags/1.4.2/assets/img/waymark-icon-dark.png?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/img/waymark-icon-light.png](/browser/waymark/tags/1.4.2/assets/img/waymark-icon-light.png?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/img/waymark-icon-primary.png](/browser/waymark/tags/1.4.2/assets/img/waymark-icon-primary.png?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/img/waymark-icon-white.png](/browser/waymark/tags/1.4.2/assets/img/waymark-icon-white.png?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/js](/browser/waymark/tags/1.4.2/assets/js?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/js/admin.js](/browser/waymark/tags/1.4.2/assets/js/admin.js?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/js/admin.min.js](/browser/waymark/tags/1.4.2/assets/js/admin.min.js?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/js/front.js](/browser/waymark/tags/1.4.2/assets/js/front.js?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/js/front.min.js](/browser/waymark/tags/1.4.2/assets/js/front.min.js?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/js/shared.js](/browser/waymark/tags/1.4.2/assets/js/shared.js?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/less](/browser/waymark/tags/1.4.2/assets/less?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/less/admin.less](/browser/waymark/tags/1.4.2/assets/less/admin.less?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/less/front.less](/browser/waymark/tags/1.4.2/assets/less/front.less?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/assets/less/shared.less](/browser/waymark/tags/1.4.2/assets/less/shared.less?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc](/browser/waymark/tags/1.4.2/inc?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Admin](/browser/waymark/tags/1.4.2/inc/Admin?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Admin/Waymark\_AJAX.php](/browser/waymark/tags/1.4.2/inc/Admin/Waymark_AJAX.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Admin/Waymark\_CSS.php](/browser/waymark/tags/1.4.2/inc/Admin/Waymark_CSS.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Admin/Waymark\_JS.php](/browser/waymark/tags/1.4.2/inc/Admin/Waymark_JS.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Admin/Waymark\_Menu.php](/browser/waymark/tags/1.4.2/inc/Admin/Waymark_Menu.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Admin/Waymark\_Meta.php](/browser/waymark/tags/1.4.2/inc/Admin/Waymark_Meta.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Admin/Waymark\_Settings.php](/browser/waymark/tags/1.4.2/inc/Admin/Waymark_Settings.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Front](/browser/waymark/tags/1.4.2/inc/Front?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Front/Waymark\_CSS.php](/browser/waymark/tags/1.4.2/inc/Front/Waymark_CSS.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Front/Waymark\_Content.php](/browser/waymark/tags/1.4.2/inc/Front/Waymark_Content.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Front/Waymark\_HTTP.php](/browser/waymark/tags/1.4.2/inc/Front/Waymark_HTTP.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Front/Waymark\_JS.php](/browser/waymark/tags/1.4.2/inc/Front/Waymark_JS.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Front/Waymark\_Shortcode.php](/browser/waymark/tags/1.4.2/inc/Front/Waymark_Shortcode.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Front/Waymark\_Submission.php](/browser/waymark/tags/1.4.2/inc/Front/Waymark_Submission.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Helpers](/browser/waymark/tags/1.4.2/inc/Helpers?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Helpers/Waymark\_GeoJSON.php](/browser/waymark/tags/1.4.2/inc/Helpers/Waymark_GeoJSON.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Helpers/Waymark\_Helper.php](/browser/waymark/tags/1.4.2/inc/Helpers/Waymark_Helper.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Helpers/Waymark\_Input.php](/browser/waymark/tags/1.4.2/inc/Helpers/Waymark_Input.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Helpers/Waymark\_Lang.php](/browser/waymark/tags/1.4.2/inc/Helpers/Waymark_Lang.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Objects](/browser/waymark/tags/1.4.2/inc/Objects?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Objects/Waymark\_Collection.php](/browser/waymark/tags/1.4.2/inc/Objects/Waymark_Collection.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Objects/Waymark\_Map.php](/browser/waymark/tags/1.4.2/inc/Objects/Waymark_Map.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Objects/Waymark\_Object.php](/browser/waymark/tags/1.4.2/inc/Objects/Waymark_Object.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Waymark\_Admin.php](/browser/waymark/tags/1.4.2/inc/Waymark_Admin.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Waymark\_Config.php](/browser/waymark/tags/1.4.2/inc/Waymark_Config.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Waymark\_Front.php](/browser/waymark/tags/1.4.2/inc/Waymark_Front.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Waymark\_Install.php](/browser/waymark/tags/1.4.2/inc/Waymark_Install.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Waymark\_Taxonomies.php](/browser/waymark/tags/1.4.2/inc/Waymark_Taxonomies.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/inc/Waymark\_Types.php](/browser/waymark/tags/1.4.2/inc/Waymark_Types.php?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages](/browser/waymark/tags/1.4.2/languages?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-en\_CA.mo](/browser/waymark/tags/1.4.2/languages/waymark-en_CA.mo?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-en\_CA.po](/browser/waymark/tags/1.4.2/languages/waymark-en_CA.po?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-en\_GB.mo](/browser/waymark/tags/1.4.2/languages/waymark-en_GB.mo?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-en\_GB.po](/browser/waymark/tags/1.4.2/languages/waymark-en_GB.po?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-es\_ES.mo](/browser/waymark/tags/1.4.2/languages/waymark-es_ES.mo?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-es\_ES.po](/browser/waymark/tags/1.4.2/languages/waymark-es_ES.po?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-fr\_CA.mo](/browser/waymark/tags/1.4.2/languages/waymark-fr_CA.mo?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-fr\_CA.po](/browser/waymark/tags/1.4.2/languages/waymark-fr_CA.po?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-ja\_JP.mo](/browser/waymark/tags/1.4.2/languages/waymark-ja_JP.mo?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-ja\_JP.po](/browser/waymark/tags/1.4.2/languages/waymark-ja_JP.po?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-sv\_SE.mo](/browser/waymark/tags/1.4.2/languages/waymark-sv_SE.mo?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-sv\_SE.po](/browser/waymark/tags/1.4.2/languages/waymark-sv_SE.po?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-uk\_UA.mo](/browser/waymark/tags/1.4.2/languages/waymark-uk_UA.mo?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-uk\_UA.po](/browser/waymark/tags/1.4.2/languages/waymark-uk_UA.po?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-zh\_CN.mo](/browser/waymark/tags/1.4.2/languages/waymark-zh_CN.mo?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark-zh\_CN.po](/browser/waymark/tags/1.4.2/languages/waymark-zh_CN.po?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/languages/waymark.pot](/browser/waymark/tags/1.4.2/languages/waymark.pot?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/readme.txt](/browser/waymark/tags/1.4.2/readme.txt?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js](/browser/waymark/tags/1.4.2/waymark-js?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist](/browser/waymark/tags/1.4.2/waymark-js/dist?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/css](/browser/waymark/tags/1.4.2/waymark-js/dist/css?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/css/waymark-js.css](/browser/waymark/tags/1.4.2/waymark-js/dist/css/waymark-js.css?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/css/waymark-js.min.css](/browser/waymark/tags/1.4.2/waymark-js/dist/css/waymark-js.min.css?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/fonts](/browser/waymark/tags/1.4.2/waymark-js/dist/fonts?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/fonts/FontAwesome.otf](/browser/waymark/tags/1.4.2/waymark-js/dist/fonts/FontAwesome.otf?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/fonts/fontawesome-webfont.eot](/browser/waymark/tags/1.4.2/waymark-js/dist/fonts/fontawesome-webfont.eot?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/fonts/fontawesome-webfont.svg](/browser/waymark/tags/1.4.2/waymark-js/dist/fonts/fontawesome-webfont.svg?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/fonts/fontawesome-webfont.ttf](/browser/waymark/tags/1.4.2/waymark-js/dist/fonts/fontawesome-webfont.ttf?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/fonts/fontawesome-webfont.woff](/browser/waymark/tags/1.4.2/waymark-js/dist/fonts/fontawesome-webfont.woff?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/fonts/fontawesome-webfont.woff2](/browser/waymark/tags/1.4.2/waymark-js/dist/fonts/fontawesome-webfont.woff2?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/fonts/ionicons.eot](/browser/waymark/tags/1.4.2/waymark-js/dist/fonts/ionicons.eot?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/fonts/ionicons.svg](/browser/waymark/tags/1.4.2/waymark-js/dist/fonts/ionicons.svg?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/fonts/ionicons.ttf](/browser/waymark/tags/1.4.2/waymark-js/dist/fonts/ionicons.ttf?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/fonts/ionicons.woff](/browser/waymark/tags/1.4.2/waymark-js/dist/fonts/ionicons.woff?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/images](/browser/waymark/tags/1.4.2/waymark-js/dist/images?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/images/fullscreen.png](/browser/waymark/tags/1.4.2/waymark-js/dist/images/fullscreen.png?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/images/fullscreen@2x.png](/browser/waymark/tags/1.4.2/waymark-js/dist/images/fullscreen%402x.png?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/images/geocoder.png](/browser/waymark/tags/1.4.2/waymark-js/dist/images/geocoder.png?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/images/layers-2x.png](/browser/waymark/tags/1.4.2/waymark-js/dist/images/layers-2x.png?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/images/layers.png](/browser/waymark/tags/1.4.2/waymark-js/dist/images/layers.png?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/images/throbber.gif](/browser/waymark/tags/1.4.2/waymark-js/dist/images/throbber.gif?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/images/waymark-icon-red.png](/browser/waymark/tags/1.4.2/waymark-js/dist/images/waymark-icon-red.png?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/js](/browser/waymark/tags/1.4.2/waymark-js/dist/js?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/js/waymark-js.js](/browser/waymark/tags/1.4.2/waymark-js/dist/js/waymark-js.js?rev=3205103 "Show entry in browser")
  (added)
* [tags/1.4.2/waymark-js/dist/js/waymark-js.min.js](/browser/waymark/tags/1.4.2/waymark-js/dist/js/waymark-js.min.js?rev=3205103 "Show entry in browser")
  (added)
* [trunk/Waymark.php](/browser/waymark/trunk/Waymark.php?rev=3205103 "Show entry in browser")
  (modified)
  ([1 diff](#file103 "Show differences"))
* [trunk/inc/Admin/Waymark\_Settings.php](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103 "Show entry in browser")
  (modified)
  ([99 diffs](#file104 "Show differences"))
* [trunk/inc/Waymark\_Config.php](/browser/waymark/trunk/inc/Waymark_Config.php?rev=3205103 "Show entry in browser")
  (modified)
  ([1 diff](#file105 "Show differences"))
* [trunk/languages/waymark-en\_CA.po](/browser/waymark/trunk/languages/waymark-en_CA.po?rev=3205103 "Show entry in browser")
  (modified)
  ([1 diff](#file106 "Show differences"))
* [trunk/languages/waymark-en\_GB.po](/browser/waymark/trunk/languages/waymark-en_GB.po?rev=3205103 "Show entry in browser")
  (modified)
  ([1 diff](#file107 "Show differences"))
* [trunk/languages/waymark-es\_ES.po](/browser/waymark/trunk/languages/waymark-es_ES.po?rev=3205103 "Show entry in browser")
  (modified)
  ([1 diff](#file108 "Show differences"))
* [trunk/languages/waymark-fr\_CA.po](/browser/waymark/trunk/languages/waymark-fr_CA.po?rev=3205103 "Show entry in browser")
  (modified)
  ([1 diff](#file109 "Show differences"))
* [trunk/languages/waymark-ja\_JP.po](/browser/waymark/trunk/languages/waymark-ja_JP.po?rev=3205103 "Show entry in browser")
  (modified)
  ([1 diff](#file110 "Show differences"))
* [trunk/languages/waymark-sv\_SE.po](/browser/waymark/trunk/languages/waymark-sv_SE.po?rev=3205103 "Show entry in browser")
  (modified)
  ([1 diff](#file111 "Show differences"))
* [trunk/languages/waymark-uk\_UA.po](/browser/waymark/trunk/languages/waymark-uk_UA.po?rev=3205103 "Show entry in browser")
  (modified)
  ([1 diff](#file112 "Show differences"))
* [trunk/languages/waymark-zh\_CN.po](/browser/waymark/trunk/languages/waymark-zh_CN.po?rev=3205103 "Show entry in browser")
  (modified)
  ([1 diff](#file113 "Show differences"))
* [trunk/languages/waymark.pot](/browser/waymark/trunk/languages/waymark.pot?rev=3205103 "Show entry in browser")
  (modified)
  ([2 diffs](#file114 "Show differences"))
* [trunk/readme.txt](/browser/waymark/trunk/readme.txt?rev=3205103 "Show entry in browser")
  (modified)
  ([2 diffs](#file115 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [waymark/trunk/Waymark.php](/changeset/3205103/waymark/trunk/Waymark.php "Show the changeset 3205103 restricted to waymark/trunk/Waymark.php")

  | [r3181723](/browser/waymark/trunk/Waymark.php?rev=3181723#L5 "Show revision 3181723 of this file in browser") | [r3205103](/browser/waymark/trunk/Waymark.php?rev=3205103#L5 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Plugin URI: https://www.waymark.dev/ |
  | 6 | 6 | Description: Mapping with WordPress made easy. With Waymark enabled, click on the "Maps" link in the sidebar to create and edit Maps. Once you are happy with your Map, copy the Waymark shortcode and add it to your content. |
  | 7 |  | Version: 1.4.~~1~~ |
  |  | 7 | Version: 1.4.2 |
  | 8 | 8 | Text Domain: waymark |
  | 9 | 9 | Author: Joe Hawes |
* ## [waymark/trunk/inc/Admin/Waymark\_Settings.php](/changeset/3205103/waymark/trunk/inc/Admin/Waymark_Settings.php "Show the changeset 3205103 restricted to waymark/trunk/inc/Admin/Waymark_Settings.php")

  | [r3102468](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L2 "Show revision 3102468 of this file in browser") | [r3205103](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L2 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | class Waymark\_Settings { |
  | 4 |  | private $settings\_id = 'Waymark\_Settings'; |
  | 5 |  | private $page\_slug = 'waymark-settings'; |
  | 6 |  | private $default\_content = 'waymark-settings-tab-tiles'; |
  | 7 |  | private $current\_settings = ~~array()~~; |
  | 8 |  | public $tabs ~~= array()~~; |
  |  | 4 | private $settings\_id      = 'Waymark\_Settings'; |
  |  | 5 | private $page\_slug        = 'waymark-settings'; |
  |  | 6 | private $default\_content  = 'waymark-settings-tab-tiles'; |
  |  | 7 | private $current\_settings = []; |
  |  | 8 | public $tabs              = []; |
  | 9 | 9 | public $settings\_nav; |
  | 10 | 10 |  |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L56) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L56) |  |
  | 56 | 56 | \*/ |
  | 57 | 57 |  |
  | 58 |  | $this->tabs['tiles'] = ~~array(~~ |
  |  | 58 | $this->tabs['tiles'] = [ |
  | 59 | 59 | 'name' => esc\_html\_\_('Basemaps', 'waymark'), |
  | 60 | 60 | 'description' => '', |
  | 61 |  | 'sections' => ~~array(~~ |
  | 62 |  | 'layers' => ~~array(~~ |
  |  | 61 | 'sections' => [ |
  |  | 62 | 'layers' => [ |
  | 63 | 63 | 'repeatable' => true, |
  | 64 | 64 | 'title' => esc\_html\_\_('Basemaps', 'waymark'), |
  | 65 | 65 | 'description' => sprintf(\_\_('<span class="waymark-lead">Waymark uses the excellent <a href="%s">OpenStreetMap</a> as it’s default Basemap and supports many <a href="%s">other providers</a>.<br /><br /><a href="%s">Thunderforest</a> and <a href="%s">Mapbox</a> are examples of providers that offer easy access to beautiful Basemaps (including satellite imagery). They require registration, but have a free usage tier.', 'waymark'), 'https://www.openstreetmap.org/fixthemap', 'https://leaflet-extras.github.io/leaflet-providers/preview/', 'https://www.thunderforest.com/', 'https://www.mapbox.com/maps/'), |
  | 66 | 66 | 'footer' => sprintf(\_\_('<small><b>Pro Tip!</b> If you have more than one Basemap, you can switch between them when viewing the Map. The first listed will be used as the default, unless specified in the shortcode like this: %s. Drag to re-order, remove all to restore defaults.</small>', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; basemap=&quot;Basemap Name&quot;]'), |
  | 67 |  | 'help' => ~~array(~~ |
  |  | 67 | 'help' => [ |
  | 68 | 68 | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/basemaps')), |
  | 69 | 69 | 'text' => esc\_attr\_\_('Basemap Docs &raquo;', 'waymark'), |
  | 70 |  | ~~)~~, |
  | 71 |  | 'fields' => ~~array(~~ |
  | 72 |  | 'layer\_name' => ~~array(~~ |
  |  | 70 | ], |
  |  | 71 | 'fields' => [ |
  |  | 72 | 'layer\_name' => [ |
  | 73 | 73 | 'name' => 'layer\_name', |
  | 74 | 74 | 'id' => 'layer\_name', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L78) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L78) |  |
  | 78 | 78 | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_name'), |
  | 79 | 79 | 'tip' => sprintf(esc\_attr\_\_('The Layer Name will appear in a dropdown list shown by the Map when multiple Basemaps have been entered. You can change the default basemap in the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; basemap=&quot;Basemap Name&quot;]'), |
  | 80 |  | 'input\_processing' => ~~array(~~ |
  |  | 80 | 'input\_processing' => [ |
  | 81 | 81 | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Basemap', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
  | 82 |  | ~~)~~, |
  | 83 |  | ~~)~~, |
  | 84 |  | 'layer\_url' => ~~array(~~ |
  |  | 82 | ], |
  |  | 83 | ], |
  |  | 84 | 'layer\_url' => [ |
  | 85 | 85 | 'name' => 'layer\_url', |
  | 86 | 86 | 'id' => 'layer\_url', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L91) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L91) |  |
  | 91 | 91 | 'tip' => sprintf(esc\_attr\_\_('Many mapping services support the Slippy Map format. Waymark requires URLs that contain {z} (zoom level) and {x}/{y} (tile coordinates). For example the OpenCycleMap URL is %s.', 'waymark'), 'https://tile.thunderforest.com/cycle/{z}/{x}/{y}@2x.png?apikey=[your\_api\_key]'), |
  | 92 | 92 | 'tip\_link' => 'https://www.thunderforest.com/docs/map-tiles-api/', |
  | 93 |  | ~~)~~, |
  | 94 |  | 'layer\_attribution' => ~~array(~~ |
  |  | 93 | ], |
  |  | 94 | 'layer\_attribution' => [ |
  | 95 | 95 | 'name' => 'layer\_attribution', |
  | 96 | 96 | 'id' => 'layer\_attribution', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L101) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L101) |  |
  | 101 | 101 | 'tip' => esc\_attr\_\_('Mapping services often have the requirement that attribution is displayed by the map. Text and HTML links are supported.', 'waymark'), |
  | 102 | 102 | 'tip\_link' => 'https://www.thunderforest.com/terms/#attribution', |
  | 103 |  | 'input\_processing' => ~~array(~~ |
  |  | 103 | 'input\_processing' => [ |
  | 104 | 104 | '(! strpos($param\_value, "&")) ? htmlspecialchars($param\_value) : $param\_value', |
  | 105 |  | ~~)~~, |
  | 106 |  | ~~)~~, |
  | 107 |  | 'layer\_max\_zoom' => ~~array(~~ |
  |  | 105 | ], |
  |  | 106 | ], |
  |  | 107 | 'layer\_max\_zoom' => [ |
  | 108 | 108 | 'name' => 'layer\_max\_zoom', |
  | 109 | 109 | 'id' => 'layer\_max\_zoom', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L113) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L113) |  |
  | 113 | 113 | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_max\_zoom'), |
  | 114 | 114 | 'tip' => esc\_attr\_\_('Set a maximum zoom level for this Basemap, the default is 18.', 'waymark'), |
  | 115 |  | 'input\_processing' => ~~array(~~ |
  |  | 115 | 'input\_processing' => [ |
  | 116 | 116 | '(is\_numeric($param\_value) && $param\_value >= 1 && $param\_value <= 18) ? $param\_value : 18;', //Fallback |
  | 117 |  | ~~)~~, |
  | 118 |  | ~~)~~, |
  | 119 |  | ~~)~~, |
  | 120 |  | ~~)~~, |
  | 121 |  | ~~)~~, |
  | 122 |  | ~~)~~; |
  |  | 117 | ], |
  |  | 118 | ], |
  |  | 119 | ], |
  |  | 120 | ], |
  |  | 121 | ], |
  |  | 122 | ]; |
  | 123 | 123 |  |
  | 124 | 124 | /\*\* |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L128) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L128) |  |
  | 128 | 128 | \*/ |
  | 129 | 129 |  |
  | 130 |  | $this->tabs['markers'] = ~~array(~~ |
  |  | 130 | $this->tabs['markers'] = [ |
  | 131 | 131 | 'name' => esc\_html\_\_('Markers', 'waymark'), |
  | 132 | 132 | 'description' => '', |
  | 133 |  | 'sections' => ~~array(~~ |
  | 134 |  | 'marker\_types' => ~~array(~~ |
  |  | 133 | 'sections' => [ |
  |  | 134 | 'marker\_types' => [ |
  | 135 | 135 | 'repeatable' => true, |
  | 136 | 136 | 'title' => esc\_html\_\_('Marker', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
  | 137 | 137 | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Markers are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
  | 138 | 138 | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
  | 139 |  | 'help' => ~~array(~~ |
  |  | 139 | 'help' => [ |
  | 140 | 140 | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
  | 141 | 141 | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
  | 142 |  | ~~)~~, |
  | 143 |  | 'fields' => ~~array(~~ |
  | 144 |  | 'marker\_title' => ~~array(~~ |
  |  | 142 | ], |
  |  | 143 | 'fields' => [ |
  |  | 144 | 'marker\_title' => [ |
  | 145 | 145 | 'name' => 'marker\_title', |
  | 146 | 146 | 'id' => 'marker\_title', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L150) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L150) |  |
  | 150 | 150 | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_title'), |
  | 151 | 151 | 'tip' => esc\_attr\_\_('What kind of Marker is this? E.g. "Photo", "Grocery Store", "Warning!". Once saved, Marker labels can not be edited. The Marker Label is displayed in the Tooltip (when hovering over the Marker) and in the Info Window (once the Marker is clicked). Hide in Settings > Map > Misc. > Type Labels.', 'waymark'), |
  | 152 |  | 'input\_processing' => ~~array(~~ |
  |  | 152 | 'input\_processing' => [ |
  | 153 | 153 | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Marker', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
  | 154 |  | ~~)~~, |
  | 155 |  | ~~)~~, |
  | 156 |  | 'marker\_shape' => ~~array(~~ |
  |  | 154 | ], |
  |  | 155 | ], |
  |  | 156 | 'marker\_shape' => [ |
  | 157 | 157 | 'name' => 'marker\_shape', |
  | 158 | 158 | 'id' => 'marker\_shape', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L162) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L162) |  |
  | 162 | 162 | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_shape'), |
  | 163 | 163 | 'tip' => esc\_attr\_\_('Which shape of Marker to use. Circles and Squares are centered at the specified location, Markers point down to that location.', 'waymark'), |
  | 164 |  | 'options' => ~~array(~~ |
  |  | 164 | 'options' => [ |
  | 165 | 165 | 'marker' => esc\_html\_\_('Marker', 'waymark'), |
  | 166 | 166 | 'circle' => esc\_html\_\_('Circle', 'waymark'), |
  | 167 | 167 | 'rectangle' => esc\_html\_\_('Square', 'waymark'), |
  | 168 |  | ~~)~~, |
  | 169 |  | ~~)~~, |
  | 170 |  | 'marker\_size' => ~~array(~~ |
  |  | 168 | ], |
  |  | 169 | ], |
  |  | 170 | 'marker\_size' => [ |
  | 171 | 171 | 'name' => 'marker\_size', |
  | 172 | 172 | 'id' => 'marker\_size', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L176) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L176) |  |
  | 176 | 176 | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_size'), |
  | 177 | 177 | 'tip' => esc\_attr\_\_('Which size of Marker to use.', 'waymark'), |
  | 178 |  | 'options' => ~~array(~~ |
  |  | 178 | 'options' => [ |
  | 179 | 179 | 'small' => esc\_html\_\_('Small', 'waymark'), |
  | 180 | 180 | 'medium' => esc\_html\_\_('Medium', 'waymark'), |
  | 181 | 181 | 'large' => esc\_html\_\_('Large', 'waymark'), |
  | 182 |  | ~~)~~, |
  | 183 |  | ~~)~~, |
  | 184 |  | 'marker\_colour' => ~~array(~~ |
  |  | 182 | ], |
  |  | 183 | ], |
  |  | 184 | 'marker\_colour' => [ |
  | 185 | 185 | 'name' => 'marker\_colour', |
  | 186 | 186 | 'id' => 'marker\_colour', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L190) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L190) |  |
  | 190 | 190 | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_colour'), |
  | 191 | 191 | 'tip' => esc\_attr\_\_('The Marker background colour. Click "Select Colour" to select.', 'waymark'), |
  | 192 |  | 'input\_processing' => ~~array(~~ |
  |  | 192 | 'input\_processing' => [ |
  | 193 | 193 | '(! empty($param\_value)) ? $param\_value : "white";', //Fallback |
  | 194 |  | ~~)~~, |
  | 195 |  | ~~)~~, |
  | 196 |  | 'marker\_display' => ~~array(~~ |
  |  | 194 | ], |
  |  | 195 | ], |
  |  | 196 | 'marker\_display' => [ |
  | 197 | 197 | 'name' => 'marker\_display', |
  | 198 | 198 | 'id' => 'marker\_display', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L201) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L201) |  |
  | 201 | 201 | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_display'), |
  | 202 | 202 | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
  | 203 |  | 'input\_processing' => ~~array(~~ |
  |  | 203 | 'input\_processing' => [ |
  | 204 | 204 | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
  | 205 |  | ~~)~~, |
  | 206 |  | ~~)~~, |
  | 207 |  | 'marker\_submission' => ~~array(~~ |
  |  | 205 | ], |
  |  | 206 | ], |
  |  | 207 | 'marker\_submission' => [ |
  | 208 | 208 | 'name' => 'marker\_submission', |
  | 209 | 209 | 'id' => 'marker\_submission', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L212) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L212) |  |
  | 212 | 212 | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_submission'), |
  | 213 | 213 | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
  | 214 |  | 'input\_processing' => ~~array(~~ |
  |  | 214 | 'input\_processing' => [ |
  | 215 | 215 | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
  | 216 |  | ~~)~~, |
  | 217 |  | ~~)~~, |
  | 218 |  | 'icon\_type' => ~~array(~~ |
  |  | 216 | ], |
  |  | 217 | ], |
  |  | 218 | 'icon\_type' => [ |
  | 219 | 219 | 'name' => 'icon\_type', |
  | 220 | 220 | 'id' => 'icon\_type', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L225) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L225) |  |
  | 225 | 225 | 'tip' => esc\_attr\_\_('Font Icons are available from Font Awesome and Ionic Icons. Simple Text or Emojis are supported, as well as custom HTML. So you can pretty much use anything you like!', 'waymark'), |
  | 226 | 226 | 'tip\_link' => 'https://emojifinder.com/', |
  | 227 |  | 'options' => ~~array(~~ |
  |  | 227 | 'options' => [ |
  | 228 | 228 | 'icon' => esc\_html\_\_('Font Icon', 'waymark'), |
  | 229 | 229 | 'text' => esc\_html\_\_('Text (or Emoji!)', 'waymark'), |
  | 230 | 230 | 'html' => esc\_html\_\_('HTML', 'waymark'), |
  | 231 |  | ~~)~~, |
  | 232 |  | ~~)~~, |
  | 233 |  | 'marker\_icon' => ~~array(~~ |
  |  | 231 | ], |
  |  | 232 | ], |
  |  | 233 | 'marker\_icon' => [ |
  | 234 | 234 | 'name' => 'marker\_icon', |
  | 235 | 235 | 'id' => 'marker\_icon', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L239) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L239) |  |
  | 239 | 239 | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_icon'), |
  | 240 | 240 | 'tip' => esc\_attr\_\_('The desired icon name from Ionicons or Font Awesome, e.g. "ion-camera", or "fa-camera". Click the links to see the full list of icons available.|Text to display inside the Marker, in the chosen colour. Space is very limited! Pro Tip: adjust text size using CSS; for all Markers: .waymark-icon-text{font-size: 18px}, or by Type: .waymark-marker-photo .waymark-icon-text{...}. Use your browser\'s inspector to dig for Type class names.|The HTML entered will be added inside each Marker. Pro Tip! HTML Entities supported (e.g. &amp;cross; as well as Unicode and Emojis!), or provide HTML to integrate with other Icon providers.', 'waymark'), |
  | 241 |  | 'input\_processing' => ~~array(~~ |
  |  | 241 | 'input\_processing' => [ |
  | 242 | 242 | '(strpbrk($param\_value, "\">")) ? htmlspecialchars($param\_value) : $param\_value', |
  | 243 |  | ~~)~~, |
  |  | 243 | ], |
  | 244 | 244 | 'append' => '<div class="waymark-icons-help"><a href="https://ionic.io/ionicons/v2/cheatsheet.html">Ionic Icons</a><a href="https://fontawesome.com/v4.7.0/cheatsheet/">Font Awesome</a></div>', |
  | 245 |  | ~~)~~, |
  | 246 |  | 'icon\_colour' => ~~array(~~ |
  |  | 245 | ], |
  |  | 246 | 'icon\_colour' => [ |
  | 247 | 247 | 'name' => 'icon\_colour', |
  | 248 | 248 | 'id' => 'icon\_colour', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L252) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L252) |  |
  | 252 | 252 | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'icon\_colour'), |
  | 253 | 253 | 'tip' => esc\_attr\_\_('The colour of the icon. Click "Select Colour" to select.', 'waymark'), |
  | 254 |  | 'input\_processing' => ~~array(~~ |
  |  | 254 | 'input\_processing' => [ |
  | 255 | 255 | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
  | 256 |  | ~~)~~, |
  | 257 |  | ~~)~~, |
  | 258 |  | ~~)~~, |
  | 259 |  | ~~)~~, |
  | 260 |  | ~~)~~, |
  | 261 |  | ~~)~~; |
  |  | 256 | ], |
  |  | 257 | ], |
  |  | 258 | ], |
  |  | 259 | ], |
  |  | 260 | ], |
  |  | 261 | ]; |
  | 262 | 262 |  |
  | 263 | 263 | /\*\* |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L267) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L267) |  |
  | 267 | 267 | \*/ |
  | 268 | 268 |  |
  | 269 |  | $this->tabs['lines'] = ~~array(~~ |
  |  | 269 | $this->tabs['lines'] = [ |
  | 270 | 270 | 'name' => esc\_html\_\_('Lines', 'waymark'), |
  | 271 | 271 | 'description' => '', |
  | 272 |  | 'sections' => ~~array(~~ |
  | 273 |  | 'line\_types' => ~~array(~~ |
  |  | 272 | 'sections' => [ |
  |  | 273 | 'line\_types' => [ |
  | 274 | 274 | 'repeatable' => true, |
  | 275 | 275 | 'title' => esc\_html\_\_('Line', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
  | 276 | 276 | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Lines are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
  | 277 |  | 'help' => ~~array(~~ |
  |  | 277 | 'help' => [ |
  | 278 | 278 | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
  | 279 | 279 | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
  | 280 |  | ~~)~~, |
  |  | 280 | ], |
  | 281 | 281 | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
  | 282 |  | 'fields' => ~~array(~~ |
  | 283 |  | 'line\_title' => ~~array(~~ |
  |  | 282 | 'fields' => [ |
  |  | 283 | 'line\_title' => [ |
  | 284 | 284 | 'name' => 'line\_title', |
  | 285 | 285 | 'id' => 'line\_title', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L289) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L289) |  |
  | 289 | 289 | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_title'), |
  | 290 | 290 | 'tip' => esc\_attr\_\_('What kind of Line is this? E.g. "Easy", "Walking Only", "Dark Red". The Line Label is displayed in the Tooltip (when hovering over the Line) and in the Line Info Window. Once saved, Line labels can not be edited.', 'waymark'), |
  | 291 |  | 'input\_processing' => ~~array(~~ |
  |  | 291 | 'input\_processing' => [ |
  | 292 | 292 | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Line', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
  | 293 |  | ~~)~~, |
  | 294 |  | ~~)~~, |
  | 295 |  | 'line\_colour' => ~~array(~~ |
  |  | 293 | ], |
  |  | 294 | ], |
  |  | 295 | 'line\_colour' => [ |
  | 296 | 296 | 'name' => 'line\_colour', |
  | 297 | 297 | 'id' => 'line\_colour', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L301) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L301) |  |
  | 301 | 301 | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_colour'), |
  | 302 | 302 | 'tip' => esc\_attr\_\_('The colour of the Line. Click "Select Colour" to select.', 'waymark'), |
  | 303 |  | 'input\_processing' => ~~array(~~ |
  |  | 303 | 'input\_processing' => [ |
  | 304 | 304 | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
  | 305 |  | ~~)~~, |
  | 306 |  | ~~)~~, |
  | 307 |  | 'line\_weight' => ~~array(~~ |
  |  | 305 | ], |
  |  | 306 | ], |
  |  | 307 | 'line\_weight' => [ |
  | 308 | 308 | 'name' => 'line\_weight', |
  | 309 | 309 | 'id' => 'line\_weight', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L313) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L313) |  |
  | 313 | 313 | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_weight'), |
  | 314 | 314 | 'tip' => esc\_attr\_\_('The width of the Line, in pixels.', 'waymark'), |
  | 315 |  | 'input\_processing' => ~~array(~~ |
  |  | 315 | 'input\_processing' => [ |
  | 316 | 316 | '(is\_numeric($param\_value)) ? $param\_value : 3;', //Fallback |
  | 317 |  | ~~)~~, |
  | 318 |  | ~~)~~, |
  | 319 |  | 'line\_opacity' => ~~array(~~ |
  |  | 317 | ], |
  |  | 318 | ], |
  |  | 319 | 'line\_opacity' => [ |
  | 320 | 320 | 'name' => 'line\_opacity', |
  | 321 | 321 | 'id' => 'line\_opacity', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L325) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L325) |  |
  | 325 | 325 | 'default' => Waymark\_Config::get\_default('lines', 'line\_types', 'line\_opacity'), |
  | 326 | 326 | 'tip' => esc\_attr\_\_('The opacity of the Line, between 0.0 and 1.0 (e.g. "0.5").', 'waymark'), |
  | 327 |  | 'input\_processing' => ~~array(~~ |
  |  | 327 | 'input\_processing' => [ |
  | 328 | 328 | '(is\_numeric($param\_value) && $param\_value > 0 && $param\_value <= 1) ? $param\_value : 0.7;', //Fallback |
  | 329 |  | ~~)~~, |
  | 330 |  | ~~)~~, |
  | 331 |  | 'line\_display' => ~~array(~~ |
  |  | 329 | ], |
  |  | 330 | ], |
  |  | 331 | 'line\_display' => [ |
  | 332 | 332 | 'name' => 'line\_display', |
  | 333 | 333 | 'id' => 'line\_display', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L336) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L336) |  |
  | 336 | 336 | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_display'), |
  | 337 | 337 | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
  | 338 |  | 'input\_processing' => ~~array(~~ |
  |  | 338 | 'input\_processing' => [ |
  | 339 | 339 | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
  | 340 |  | ~~)~~, |
  | 341 |  | ~~)~~, |
  | 342 |  | 'line\_submission' => ~~array(~~ |
  |  | 340 | ], |
  |  | 341 | ], |
  |  | 342 | 'line\_submission' => [ |
  | 343 | 343 | 'name' => 'line\_submission', |
  | 344 | 344 | 'id' => 'line\_submission', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L347) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L347) |  |
  | 347 | 347 | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_submission'), |
  | 348 | 348 | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
  | 349 |  | 'input\_processing' => ~~array(~~ |
  |  | 349 | 'input\_processing' => [ |
  | 350 | 350 | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
  | 351 |  | ~~)~~, |
  | 352 |  | ~~)~~, |
  | 353 |  | ~~)~~, |
  | 354 |  | ~~)~~, |
  | 355 |  | ~~)~~, |
  | 356 |  | ~~)~~; |
  |  | 351 | ], |
  |  | 352 | ], |
  |  | 353 | ], |
  |  | 354 | ], |
  |  | 355 | ], |
  |  | 356 | ]; |
  | 357 | 357 |  |
  | 358 | 358 | /\*\* |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L362) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L362) |  |
  | 362 | 362 | \*/ |
  | 363 | 363 |  |
  | 364 |  | $this->tabs['shapes'] = ~~array(~~ |
  |  | 364 | $this->tabs['shapes'] = [ |
  | 365 | 365 | 'name' => esc\_html\_\_('Shapes', 'waymark'), |
  | 366 | 366 | 'description' => '', |
  | 367 |  | 'sections' => ~~array(~~ |
  | 368 |  | 'shape\_types' => ~~array(~~ |
  |  | 367 | 'sections' => [ |
  |  | 368 | 'shape\_types' => [ |
  | 369 | 369 | 'repeatable' => true, |
  | 370 | 370 | 'title' => esc\_html\_\_('Shape', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
  | 371 | 371 | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Shapes are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
  | 372 |  | 'help' => ~~array(~~ |
  |  | 372 | 'help' => [ |
  | 373 | 373 | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
  | 374 | 374 | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
  | 375 |  | ~~)~~, |
  |  | 375 | ], |
  | 376 | 376 | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
  | 377 |  | 'fields' => ~~array(~~ |
  | 378 |  | 'shape\_title' => ~~array(~~ |
  |  | 377 | 'fields' => [ |
  |  | 378 | 'shape\_title' => [ |
  | 379 | 379 | 'name' => 'shape\_title', |
  | 380 | 380 | 'id' => 'shape\_title', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L384) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L384) |  |
  | 384 | 384 | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_title'), |
  | 385 | 385 | 'tip' => esc\_attr\_\_('What kind of Shape is this? E.g. "Park", "Danger!", "Light Blue". The Shape Label is displayed in the Tooltip (when hovering over the Shape) and in the Shape Info Window. Once saved, Shape labels can not be edited.', 'waymark'), |
  | 386 |  | 'input\_processing' => ~~array(~~ |
  |  | 386 | 'input\_processing' => [ |
  | 387 | 387 | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Shape', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
  | 388 |  | ~~)~~, |
  | 389 |  | ~~)~~, |
  | 390 |  | 'shape\_colour' => ~~array(~~ |
  |  | 388 | ], |
  |  | 389 | ], |
  |  | 390 | 'shape\_colour' => [ |
  | 391 | 391 | 'name' => 'shape\_colour', |
  | 392 | 392 | 'id' => 'shape\_colour', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L396) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L396) |  |
  | 396 | 396 | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_colour'), |
  | 397 | 397 | 'tip' => esc\_attr\_\_('The colour of the Shape. Click "Select Colour" to select.', 'waymark'), |
  | 398 |  | 'input\_processing' => ~~array(~~ |
  |  | 398 | 'input\_processing' => [ |
  | 399 | 399 | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
  | 400 |  | ~~)~~, |
  | 401 |  | ~~)~~, |
  | 402 |  | 'fill\_opacity' => ~~array(~~ |
  |  | 400 | ], |
  |  | 401 | ], |
  |  | 402 | 'fill\_opacity' => [ |
  | 403 | 403 | 'name' => 'fill\_opacity', |
  | 404 | 404 | 'id' => 'fill\_opacity', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L408) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L408) |  |
  | 408 | 408 | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'fill\_opacity'), |
  | 409 | 409 | 'tip' => esc\_attr\_\_('The opacity of the inside of the shape, between 0.0 and 1.0 (e.g. "0.5").', 'waymark'), |
  | 410 |  | 'input\_processing' => ~~array(~~ |
  |  | 410 | 'input\_processing' => [ |
  | 411 | 411 | '(is\_numeric($param\_value) && $param\_value > 0 && $param\_value <= 1) ? $param\_value : 0.5;', //Fallback |
  | 412 |  | ~~)~~, |
  | 413 |  | ~~)~~, |
  | 414 |  | 'shape\_display' => ~~array(~~ |
  |  | 412 | ], |
  |  | 413 | ], |
  |  | 414 | 'shape\_display' => [ |
  | 415 | 415 | 'name' => 'shape\_display', |
  | 416 | 416 | 'id' => 'shape\_display', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L419) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L419) |  |
  | 419 | 419 | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_display'), |
  | 420 | 420 | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
  | 421 |  | 'input\_processing' => ~~array(~~ |
  |  | 421 | 'input\_processing' => [ |
  | 422 | 422 | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
  | 423 |  | ~~)~~, |
  | 424 |  | ~~)~~, |
  | 425 |  | 'shape\_submission' => ~~array(~~ |
  |  | 423 | ], |
  |  | 424 | ], |
  |  | 425 | 'shape\_submission' => [ |
  | 426 | 426 | 'name' => 'shape\_submission', |
  | 427 | 427 | 'id' => 'shape\_submission', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L430) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L430) |  |
  | 430 | 430 | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_submission'), |
  | 431 | 431 | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
  | 432 |  | 'input\_processing' => ~~array(~~ |
  |  | 432 | 'input\_processing' => [ |
  | 433 | 433 | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
  | 434 |  | ~~)~~, |
  | 435 |  | ~~)~~, |
  | 436 |  | ~~)~~, |
  | 437 |  | ~~)~~, |
  | 438 |  | ~~)~~, |
  | 439 |  | ~~)~~; |
  |  | 434 | ], |
  |  | 435 | ], |
  |  | 436 | ], |
  |  | 437 | ], |
  |  | 438 | ], |
  |  | 439 | ]; |
  | 440 | 440 |  |
  | 441 | 441 | /\*\* |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L448) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L448) |  |
  | 448 | 448 | $meta\_group\_options = array\_merge(['' => 'None'], $meta\_group\_options); |
  | 449 | 449 |  |
  | 450 |  | $this->tabs['meta'] = ~~array(~~ |
  |  | 450 | $this->tabs['meta'] = [ |
  | 451 | 451 | 'name' => esc\_html\_\_('Meta', 'waymark'), |
  | 452 | 452 | 'description' => '', |
  | 453 |  | 'sections' => ~~array(~~ |
  | 454 |  | 'inputs' => ~~array(~~ |
  |  | 453 | 'sections' => [ |
  |  | 454 | 'inputs' => [ |
  | 455 | 455 | 'repeatable' => true, |
  | 456 | 456 | 'title' => esc\_html\_\_('Meta', 'waymark'), |
  | 457 | 457 | 'description' => '<span class="waymark-lead">' . sprintf(\_\_('Create additional input fields that appear underneath the Map Editor. Any Meta that has been input is displayed on the <a href="%s">Map Details</a> page, and can also be displayed by the Shortcode.', 'waymark'), 'https://www.waymark.dev/map/route-map/') . '</span>', |
  | 458 |  | 'help' => ~~array(~~ |
  |  | 458 | 'help' => [ |
  | 459 | 459 | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/meta')), |
  | 460 | 460 | 'text' => esc\_attr\_\_('Meta Docs &raquo;', 'waymark'), |
  | 461 |  | ~~)~~, |
  |  | 461 | ], |
  | 462 | 462 | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
  | 463 |  | 'fields' => ~~array(~~ |
  | 464 |  | 'meta\_title' => ~~array(~~ |
  |  | 463 | 'fields' => [ |
  |  | 464 | 'meta\_title' => [ |
  | 465 | 465 | 'name' => 'meta\_title', |
  | 466 | 466 | 'id' => 'meta\_title', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L471) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L471) |  |
  | 471 | 471 | 'tip' => esc\_attr\_\_('The title appears next to the input field.', 'waymark'), |
  | 472 | 472 | 'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
  | 473 |  | 'input\_processing' => ~~array(~~ |
  |  | 473 | 'input\_processing' => [ |
  | 474 | 474 | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Meta', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
  | 475 |  | ~~)~~, |
  | 476 |  | ~~)~~, |
  | 477 |  | 'meta\_default' => ~~array(~~ |
  |  | 475 | ], |
  |  | 476 | ], |
  |  | 477 | 'meta\_default' => [ |
  | 478 | 478 | 'name' => 'meta\_default', |
  | 479 | 479 | 'id' => 'meta\_default', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L483) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L483) |  |
  | 483 | 483 | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_default'), |
  | 484 | 484 | 'tip' => esc\_attr\_\_('The default value for the input field. For Select and Multi-Select enter the option/comma-separated options to be selected by default.', 'waymark'), |
  | 485 |  | ~~)~~, |
  | 486 |  | 'meta\_tip' => ~~array(~~ |
  |  | 485 | ], |
  |  | 486 | 'meta\_tip' => [ |
  | 487 | 487 | 'name' => 'meta\_tip', |
  | 488 | 488 | 'id' => 'meta\_tip', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L492) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L492) |  |
  | 492 | 492 | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_tip'), |
  | 493 | 493 | 'tip' => esc\_attr\_\_('A tip provides additional information about an input field... just like this!', 'waymark'), |
  | 494 |  | ~~)~~, |
  | 495 |  | 'meta\_type' => ~~array(~~ |
  |  | 494 | ], |
  |  | 495 | 'meta\_type' => [ |
  | 496 | 496 | 'name' => 'meta\_type', |
  | 497 | 497 | 'id' => 'meta\_type', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L501) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L501) |  |
  | 501 | 501 | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_type'), |
  | 502 | 502 | 'tip' => esc\_attr\_\_('The type of input field to use.', 'waymark'), |
  | 503 |  | 'options' => ~~array(~~ |
  |  | 503 | 'options' => [ |
  | 504 | 504 | 'text' => esc\_html\_\_('Text', 'waymark'), |
  | 505 | 505 | 'textarea' => esc\_html\_\_('Textarea', 'waymark'), |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L507) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L507) |  |
  | 507 | 507 | 'select' => esc\_html\_\_('Select', 'waymark'), |
  | 508 | 508 | 'select\_multi' => esc\_html\_\_('Multi-Select', 'waymark'), |
  | 509 |  | ~~)~~, |
  | 510 |  | ~~)~~, |
  | 511 |  | 'meta\_options' => ~~array(~~ |
  |  | 509 | ], |
  |  | 510 | ], |
  |  | 511 | 'meta\_options' => [ |
  | 512 | 512 | 'name' => 'meta\_options', |
  | 513 | 513 | 'id' => 'meta\_options', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L517) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L517) |  |
  | 517 | 517 | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_options'), |
  | 518 | 518 | 'tip' => esc\_attr\_\_('A comma-separated list of options for the input.', 'waymark'), |
  | 519 |  | ~~)~~, |
  | 520 |  | 'meta\_group' => ~~array(~~ |
  |  | 519 | ], |
  |  | 520 | 'meta\_group' => [ |
  | 521 | 521 | 'name' => 'meta\_group', |
  | 522 | 522 | 'id' => 'meta\_group', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L527) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L527) |  |
  | 527 | 527 | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_group'), |
  | 528 | 528 | 'tip' => esc\_attr\_\_('Which group this Meta belongs to (if any). Meta in the same group will be displayed together when editing and viewing Maps. Meta not in a group will be displayed above any groups.', 'waymark'), |
  | 529 |  | ~~)~~, |
  | 530 |  | 'meta\_shortcode' => ~~array(~~ |
  |  | 529 | ], |
  |  | 530 | 'meta\_shortcode' => [ |
  | 531 | 531 | 'name' => 'meta\_shortcode', |
  | 532 | 532 | 'id' => 'meta\_shortcode', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L536) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L536) |  |
  | 536 | 536 | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_shortcode'), |
  | 537 | 537 | 'tip' => esc\_attr\_\_('Whether this content should be displayed when embedding a Map using the Shortcode.', 'waymark'), |
  | 538 |  | ~~)~~, |
  | 539 |  | 'meta\_submission' => ~~array(~~ |
  |  | 538 | ], |
  |  | 539 | 'meta\_submission' => [ |
  | 540 | 540 | 'name' => 'meta\_submission', |
  | 541 | 541 | 'id' => 'meta\_submission', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L545) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L545) |  |
  | 545 | 545 | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_submission'), |
  | 546 | 546 | 'tip' => esc\_attr\_\_('Make this Meta available in front-end Submissions?', 'waymark'), |
  | 547 |  | ~~)~~, |
  | 548 |  | ~~)~~, |
  | 549 |  | ~~)~~, |
  | 550 |  | 'groups' => ~~array(~~ |
  |  | 547 | ], |
  |  | 548 | ], |
  |  | 549 | ], |
  |  | 550 | 'groups' => [ |
  | 551 | 551 | 'repeatable' => true, |
  | 552 | 552 | 'title' => esc\_html\_\_('Groups', 'waymark'), |
  | 553 | 553 | 'description' => '<span class="waymark-lead">' . \_\_('Create groups to organise your Map Meta. Meta in the same group will be displayed together when editing and viewing Maps.', 'waymark') . '</span>', |
  | 554 | 554 | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> Drag to re-order, remove all to disable groups.', 'waymark') . '</small>', |
  | 555 |  | 'fields' => ~~array(~~ |
  | 556 |  | 'group\_title' => ~~array(~~ |
  |  | 555 | 'fields' => [ |
  |  | 556 | 'group\_title' => [ |
  | 557 | 557 | 'name' => 'group\_title', |
  | 558 | 558 | 'id' => 'group\_title', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L566) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L566) |  |
  | 566 | 566 | //                              '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Meta', 'waymark') . ' ' . substr(md5(rand(0,999999)), 0, 5) . '";'   //Fallback |
  | 567 | 567 | //                          ) |
  | 568 |  | ~~)~~, |
  | 569 |  | ~~)~~, |
  | 570 |  | ~~)~~, |
  | 571 |  | ~~)~~, |
  | 572 |  | ~~)~~; |
  |  | 568 | ], |
  |  | 569 | ], |
  |  | 570 | ], |
  |  | 571 | ], |
  |  | 572 | ]; |
  | 573 | 573 |  |
  | 574 | 574 | /\*\* |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L578) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L578) |  |
  | 578 | 578 | \*/ |
  | 579 | 579 |  |
  | 580 |  | $this->tabs['properties'] = ~~array(~~ |
  |  | 580 | $this->tabs['properties'] = [ |
  | 581 | 581 | 'name' => esc\_html\_\_('Properties', 'waymark'), |
  | 582 | 582 | 'description' => '', |
  | 583 |  | 'sections' => ~~array(~~ |
  | 584 |  | 'props' => ~~array(~~ |
  |  | 583 | 'sections' => [ |
  |  | 584 | 'props' => [ |
  | 585 | 585 | 'repeatable' => true, |
  | 586 | 586 | 'title' => esc\_html\_\_('Properties', 'waymark'), |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L607) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L607) |  |
  | 607 | 607 | //                      'text' => esc\_attr\_\_('Meta Docs &raquo;', 'waymark') |
  | 608 | 608 | //                  ), |
  | 609 |  | 'fields' => ~~array(~~ |
  | 610 |  | 'property\_key' => ~~array(~~ |
  |  | 609 | 'fields' => [ |
  |  | 610 | 'property\_key' => [ |
  | 611 | 611 | 'name' => 'property\_key', |
  | 612 | 612 | 'id' => 'property\_key', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L617) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L617) |  |
  | 617 | 617 | 'tip' => esc\_attr\_\_('This is the key associated with the data you are trying to access, i.e. "properties": {"property\_key": "Some content here"}', 'waymark'), |
  | 618 | 618 | //                          'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
  | 619 |  | 'input\_processing' => ~~array(~~ |
  |  | 619 | 'input\_processing' => [ |
  | 620 | 620 | 'preg\_replace("/[^0-9a-zA-Z -\_.]/", "", $param\_value);', |
  | 621 |  | ~~)~~, |
  | 622 |  | ~~)~~, |
  | 623 |  | 'property\_title' => ~~array(~~ |
  |  | 621 | ], |
  |  | 622 | ], |
  |  | 623 | 'property\_title' => [ |
  | 624 | 624 | 'name' => 'property\_title', |
  | 625 | 625 | 'id' => 'property\_title', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L630) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L630) |  |
  | 630 | 630 | 'tip' => esc\_attr\_\_('The value for this property will be added to the Overlay Description under this title.', 'waymark'), |
  | 631 | 631 | //                          'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '' |
  | 632 |  | ~~)~~, |
  | 633 |  | ~~)~~, |
  | 634 |  | ~~)~~, |
  | 635 |  |  |
  | 636 |  | 'options' => ~~array(~~ |
  |  | 632 | ], |
  |  | 633 | ], |
  |  | 634 | ], |
  |  | 635 |  |
  |  | 636 | 'options' => [ |
  | 637 | 637 | 'title' => esc\_html\_\_('Options', 'waymark'), |
  | 638 | 638 | 'description' => 'Append listed Properties to the Overlay Description.', |
  | 639 | 639 | 'footer' => sprintf(\_\_('<small><b>Pro Tip!</b> Properties are added to the Overlay Description with class names that can be used to target them, e.g. %s.</small>', 'waymark'), '<code class="waymark-code" style="display:inline">&lt;p class="waymark-property waymark-property-property\_key"&gt;&lt;b&gt;property\_title&lt;/b&gt;&lt;br&gt;proprty\_value&lt;/p&gt;</code>'), |
  | 640 |  | 'fields' => ~~array(~~ |
  | 641 |  | 'description\_append' => ~~array(~~ |
  |  | 640 | 'fields' => [ |
  |  | 641 | 'description\_append' => [ |
  | 642 | 642 | 'name' => 'description\_append', |
  | 643 | 643 | 'id' => 'description\_append', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L647) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L647) |  |
  | 647 | 647 | 'tip' => esc\_attr\_\_('Append the property value to the Overlay Description.', 'waymark'), |
  | 648 | 648 |  |
  | 649 |  | ~~)~~, |
  | 650 |  | ~~)~~, |
  | 651 |  | ~~)~~, |
  | 652 |  | ~~)~~, |
  | 653 |  | ~~)~~; |
  |  | 649 | ], |
  |  | 650 | ], |
  |  | 651 | ], |
  |  | 652 | ], |
  |  | 653 | ]; |
  | 654 | 654 |  |
  | 655 | 655 | //Prepare Basemap values for editor option |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L657) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L657) |  |
  | 657 | 657 |  |
  | 658 | 658 | //Each layer |
  | 659 |  | $basemap\_options = ~~array()~~; |
  |  | 659 | $basemap\_options = []; |
  | 660 | 660 | foreach ($tile\_layers as $layer) { |
  | 661 | 661 | //If name exists |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L685) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L685) |  |
  | 685 | 685 |  |
  | 686 | 686 | //Roles |
  | 687 |  | if (!function\_exists('get\_editable\_roles')) { |
  |  | 687 | if (! function\_exists('get\_editable\_roles')) { |
  | 688 | 688 | require\_once ABSPATH . 'wp-admin/includes/user.php'; |
  | 689 | 689 | } |
  | 690 | 690 |  |
  | 691 |  | $role\_options = ~~array()~~; |
  |  | 691 | $role\_options = []; |
  | 692 | 692 | foreach (get\_editable\_roles() as $key => $role) { |
  | 693 | 693 | $role\_options[$key] = $role['name']; |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L699) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L699) |  |
  | 699 | 699 | $upload\_dir['subdir'] = ($upload\_dir['subdir']) ? $upload\_dir['subdir'] : '/'; |
  | 700 | 700 |  |
  | 701 |  | $this->tabs['submission'] = ~~array(~~ |
  |  | 701 | $this->tabs['submission'] = [ |
  | 702 | 702 | 'name' => esc\_html\_\_('Submissions', 'waymark'), |
  | 703 |  | 'sections' => ~~array(~~ |
  |  | 703 | 'sections' => [ |
  | 704 | 704 | //Global |
  | 705 |  | 'global' => ~~array(~~ |
  |  | 705 | 'global' => [ |
  | 706 | 706 | 'title' => esc\_html\_\_('Front-End Submissions', 'waymark'), |
  | 707 | 707 | 'description' => sprintf(\_\_('Use the %s Shortcode to allow Map submissions from the front-end of your site.', 'waymark'), '<span class="waymark-code">[Waymark content="submission"]</span>'), |
  | 708 |  | 'help' => ~~array(~~ |
  |  | 708 | 'help' => [ |
  | 709 | 709 | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/submissions')), |
  | 710 | 710 | 'text' => esc\_attr\_\_('Submission Docs &raquo;', 'waymark'), |
  | 711 |  | ~~)~~, |
  | 712 |  | 'fields' => ~~array(~~ |
  | 713 |  | 'submission\_enable' => ~~array(~~ |
  |  | 711 | ], |
  |  | 712 | 'fields' => [ |
  |  | 713 | 'submission\_enable' => [ |
  | 714 | 714 | 'name' => 'submission\_enable', |
  | 715 | 715 | 'id' => 'submission\_enable', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L718) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L718) |  |
  | 718 | 718 | 'default' => Waymark\_Config::get\_setting('submission', 'global', 'submission\_enable'), |
  | 719 | 719 | 'tip' => esc\_attr\_\_('Submissions will be available only to site administrators by default, but can also be allowed for registered users or even to guests without registration.', 'waymark'), |
  | 720 |  | ~~)~~, |
  | 721 |  | ~~)~~, |
  | 722 |  | ~~)~~, |
  |  | 720 | ], |
  |  | 721 | ], |
  |  | 722 | ], |
  | 723 | 723 | //By role |
  | 724 |  | 'from\_users' => ~~array(~~ |
  |  | 724 | 'from\_users' => [ |
  | 725 | 725 | 'title' => esc\_html\_\_('User Submissions', 'waymark'), |
  | 726 | 726 | 'description' => esc\_html\_\_('Allow registered users to create Maps from the front-end.', 'waymark'), |
  | 727 |  | 'fields' => ~~array(~~ |
  | 728 |  | 'submission\_roles' => ~~array(~~ |
  |  | 727 | 'fields' => [ |
  |  | 728 | 'submission\_roles' => [ |
  | 729 | 729 | 'name' => 'submission\_roles', |
  | 730 | 730 | 'id' => 'submission\_roles', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L735) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L735) |  |
  | 735 | 735 | 'tip' => esc\_attr\_\_('Users with the selected roles will be able to make Submissions through the front-end', 'waymark'), |
  | 736 | 736 | 'options' => $role\_options, |
  | 737 |  | ~~)~~, |
  | 738 |  | 'submission\_features' => ~~array(~~ |
  |  | 737 | ], |
  |  | 738 | 'submission\_features' => [ |
  | 739 | 739 | 'name' => 'submission\_features', |
  | 740 | 740 | 'id' => 'submission\_users\_features', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L744) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L744) |  |
  | 744 | 744 | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_features'), |
  | 745 | 745 | 'tip' => esc\_attr\_\_('What features to offer in the Editor. Important! Uploaded images are added to the Media Library, reading from file does not keep a copy of the file on the server. Whether an individual Meta input is displayed can be set in the Settings > Map > Meta.', 'waymark'), |
  | 746 |  | 'options' => ~~array(~~ |
  |  | 746 | 'options' => [ |
  | 747 | 747 | 'draw' => esc\_attr\_\_('Drawing', 'waymark'), |
  | 748 | 748 | 'photo' => esc\_attr\_\_('Image upload', 'waymark'), |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L750) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L750) |  |
  | 750 | 750 | 'title' => esc\_attr\_\_('Title', 'waymark'), |
  | 751 | 751 | 'meta' => esc\_attr\_\_('Meta', 'waymark'), |
  | 752 |  | ~~)~~, |
  | 753 |  | ~~)~~, |
  | 754 |  | 'submission\_status' => ~~array(~~ |
  |  | 752 | ], |
  |  | 753 | ], |
  |  | 754 | 'submission\_status' => [ |
  | 755 | 755 | 'name' => 'submission\_status', |
  | 756 | 756 | 'id' => 'submission\_users\_status', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L759) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L759) |  |
  | 759 | 759 | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_status'), |
  | 760 | 760 | 'tip' => esc\_attr\_\_('This is the initial status of the submitted Map. Note! Publish means that the Map (including any images added) will be \*immediately\* visible on your site.', 'waymark'), |
  | 761 |  | 'options' => ~~array(~~ |
  |  | 761 | 'options' => [ |
  | 762 | 762 | 'publish' => esc\_attr\_\_('Publish', 'waymark'), |
  | 763 | 763 | 'draft' => esc\_attr\_\_('Draft', 'waymark'), |
  | 764 |  | ~~)~~, |
  | 765 |  | ~~)~~, |
  | 766 |  | 'submission\_collection' => ~~array(~~ |
  |  | 764 | ], |
  |  | 765 | ], |
  |  | 766 | 'submission\_collection' => [ |
  | 767 | 767 | 'name' => 'submission\_collection', |
  | 768 | 768 | 'id' => 'submission\_users\_collection', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L771) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L771) |  |
  | 771 | 771 | 'tip' => esc\_attr\_\_('If specified, user submissions will be automatically added to this Collection.', 'waymark'), |
  | 772 | 772 | 'options' => $collection\_array, |
  | 773 |  | ~~)~~, |
  |  | 773 | ], |
  | 774 | 774 | //                      'submission\_alert' => array( |
  | 775 | 775 | //                          'name' => 'submission\_alert', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L781) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L781) |  |
  | 781 | 781 | //                          'class' => 'waymark-hidden' |
  | 782 | 782 | //                      ) |
  | 783 |  | ~~)~~, |
  | 784 |  | ~~)~~, |
  |  | 783 | ], |
  |  | 784 | ], |
  | 785 | 785 |  |
  | 786 | 786 | //Public |
  | 787 |  | 'from\_public' => ~~array(~~ |
  |  | 787 | 'from\_public' => [ |
  | 788 | 788 | 'title' => esc\_html\_\_('Public Submissions', 'waymark'), |
  | 789 | 789 | 'description' => \_\_('This will allow Submissions from <b>any visitor</b>, without registration.<!--<br /><br /><b>Important!</b>-->', 'waymark'), |
  | 790 |  | 'fields' => ~~array(~~ |
  | 791 |  | 'submission\_public' => ~~array(~~ |
  |  | 790 | 'fields' => [ |
  |  | 791 | 'submission\_public' => [ |
  | 792 | 792 | 'name' => 'submission\_public', |
  | 793 | 793 | 'id' => 'submission\_public', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L796) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L796) |  |
  | 796 | 796 | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_public'), |
  | 797 | 797 | 'tip' => esc\_attr\_\_('Allow \*anyone\* to submit Maps to your site, without registration.', 'waymark'), |
  | 798 |  | ~~)~~, |
  | 799 |  | 'submission\_features' => ~~array(~~ |
  |  | 798 | ], |
  |  | 799 | 'submission\_features' => [ |
  | 800 | 800 | 'name' => 'submission\_features', |
  | 801 | 801 | 'id' => 'submission\_public\_features', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L805) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L805) |  |
  | 805 | 805 | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_features'), |
  | 806 | 806 | 'tip' => esc\_attr\_\_('What features to offer in the Editor. Important! Uploaded images are added to the Media Library (see Upload Location below), reading from file does not keep a copy of the file on the server. Whether an individual Meta input is displayed can be set in the Settings > Map > Meta.', 'waymark'), |
  | 807 |  | 'options' => ~~array(~~ |
  |  | 807 | 'options' => [ |
  | 808 | 808 | 'draw' => esc\_attr\_\_('Drawing', 'waymark'), |
  | 809 | 809 | 'photo' => esc\_attr\_\_('Image upload', 'waymark'), |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L811) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L811) |  |
  | 811 | 811 | 'title' => esc\_attr\_\_('Title', 'waymark'), |
  | 812 | 812 | 'meta' => esc\_attr\_\_('Meta', 'waymark'), |
  | 813 |  | ~~)~~, |
  | 814 |  | ~~)~~, |
  | 815 |  | 'submission\_upload\_dir' => ~~array(~~ |
  |  | 813 | ], |
  |  | 814 | ], |
  |  | 815 | 'submission\_upload\_dir' => [ |
  | 816 | 816 | 'name' => 'submission\_upload\_dir', |
  | 817 | 817 | 'id' => 'submission\_upload\_dir', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L821) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L821) |  |
  | 821 | 821 | 'tip' => esc\_attr\_\_('Images upload by non-registered users can be stored seperately from other Media Library uploads, to aid with moderation. All uploaded images will be stored in a single directory (/waymark\_submission) found in the upload root.', 'waymark'), |
  | 822 | 822 | 'class' => '', |
  | 823 |  | 'options' => ~~array(~~ |
  |  | 823 | 'options' => [ |
  | 824 | 824 | 'waymark\_submission' => esc\_attr\_\_('Seperated (/waymark\_submission)', 'waymark'), |
  | 825 | 825 | '' => sprintf(esc\_attr\_\_('Media Library Default (%s)', 'waymark'), $upload\_dir['subdir']), |
  | 826 |  | ~~)~~, |
  | 827 |  | ~~)~~, |
  | 828 |  | 'submission\_status' => ~~array(~~ |
  |  | 826 | ], |
  |  | 827 | ], |
  |  | 828 | 'submission\_status' => [ |
  | 829 | 829 | 'name' => 'submission\_status', |
  | 830 | 830 | 'id' => 'submission\_public\_status', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L833) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L833) |  |
  | 833 | 833 | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_status'), |
  | 834 | 834 | 'tip' => esc\_attr\_\_('This is the initial status of the submitted Map. Note! Publish means that the Map (including any images added) will be \*immediately\* visible on your site.', 'waymark'), |
  | 835 |  | 'options' => ~~array(~~ |
  |  | 835 | 'options' => [ |
  | 836 | 836 | 'draft' => esc\_attr\_\_('Draft', 'waymark'), |
  | 837 | 837 | 'publish' => esc\_attr\_\_('Publish (not recommended!)', 'waymark'), |
  | 838 |  | ~~)~~, |
  | 839 |  | 'class' => '', |
  | 840 |  | ~~)~~, |
  | 841 |  | 'submission\_collection' => ~~array(~~ |
  |  | 838 | ], |
  |  | 839 | 'class' => '', |
  |  | 840 | ], |
  |  | 841 | 'submission\_collection' => [ |
  | 842 | 842 | 'name' => 'submission\_collection', |
  | 843 | 843 | 'id' => 'submission\_public\_collection', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L846) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L846) |  |
  | 846 | 846 | 'tip' => esc\_attr\_\_('If specified, user submissions will be automatically added to this Collection.', 'waymark'), |
  | 847 | 847 | 'options' => $collection\_array, |
  | 848 |  | ~~)~~, |
  |  | 848 | ], |
  | 849 | 849 | //                      'submission\_alert' => array( |
  | 850 | 850 | //                          'name' => 'submission\_alert', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L856) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L856) |  |
  | 856 | 856 | //                          'class' => 'waymark-hidden' |
  | 857 | 857 | //                      ), |
  | 858 |  | ~~)~~, |
  | 859 |  | ~~)~~, |
  | 860 |  | ~~)~~, |
  | 861 |  | ~~)~~; |
  |  | 858 | ], |
  |  | 859 | ], |
  |  | 860 | ], |
  |  | 861 | ]; |
  | 862 | 862 |  |
  | 863 | 863 | //Submissions not enabled |
  | 864 |  | if (!Waymark\_Config::get\_setting('submission', 'global', 'submission\_enable')) { |
  |  | 864 | if (! Waymark\_Config::get\_setting('submission', 'global', 'submission\_enable')) { |
  | 865 | 865 | //Hide related inputs |
  | 866 | 866 | $this->tabs['meta']['sections']['inputs']['fields']['meta\_submission']['class'] = ' waymark-hidden'; |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L873) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L873) |  |
  | 873 | 873 | $this->tabs['submission']['sections']['from\_public']['class'] = 'waymark-hidden'; |
  | 874 | 874 | //If No public submissions |
  | 875 |  | } elseif (!Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_public')) { |
  |  | 875 | } elseif (! Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_public')) { |
  | 876 | 876 | //Hide settings |
  | 877 | 877 | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_features']['class'] = ' waymark-hidden'; |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L888) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L888) |  |
  | 888 | 888 | \*/ |
  | 889 | 889 |  |
  | 890 |  | $this->tabs['misc'] = ~~array(~~ |
  |  | 890 | $this->tabs['misc'] = [ |
  | 891 | 891 | 'name' => esc\_html\_\_('Misc.', 'waymark'), |
  | 892 | 892 | 'description' => '', |
  | 893 |  | 'sections' => ~~array(~~ |
  | 894 |  | 'map\_options' => ~~array(~~ |
  |  | 893 | 'sections' => [ |
  |  | 894 | 'map\_options' => [ |
  | 895 | 895 | 'title' => esc\_html\_\_('Map Options', 'waymark'), |
  | 896 | 896 | 'description' => esc\_html\_\_('Use these options to change how Maps are displayed.', 'waymark'), |
  | 897 |  | 'help' => ~~array(~~ |
  |  | 897 | 'help' => [ |
  | 898 | 898 | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs-cat/examples')), |
  | 899 | 899 | 'text' => esc\_attr\_\_('See Examples &raquo;', 'waymark'), |
  | 900 |  | ~~)~~, |
  | 901 |  | 'fields' => ~~array(~~ |
  | 902 |  | 'map\_default\_latlng' => ~~array(~~ |
  |  | 900 | ], |
  |  | 901 | 'fields' => [ |
  |  | 902 | 'map\_default\_latlng' => [ |
  | 903 | 903 | 'name' => 'map\_default\_latlng', |
  | 904 | 904 | 'id' => 'map\_default\_latlng', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L908) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L908) |  |
  | 908 | 908 | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_default\_latlng'), |
  | 909 | 909 | 'tip' => esc\_attr\_\_('Waymark centres the Map automatically when displaying data. These coordinates (Latitude,Longitude) will be used when there is no data available.', 'waymark'), |
  | 910 |  | 'input\_processing' => ~~array(~~ |
  |  | 910 | 'input\_processing' => [ |
  | 911 | 911 | 'preg\_replace("/[^0-9.,-]+/", "", $param\_value);', |
  | 912 |  | ~~)~~, |
  | 913 |  | 'output\_processing' => ~~array(~~ |
  |  | 912 | ], |
  |  | 913 | 'output\_processing' => [ |
  | 914 | 914 | sprintf('(! empty($param\_value)) ? $param\_value : "%s";', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_default\_latlng')), |
  | 915 |  | ~~)~~, |
  | 916 |  | ~~)~~, |
  | 917 |  | 'map\_height' => ~~array(~~ |
  |  | 915 | ], |
  |  | 916 | ], |
  |  | 917 | 'map\_height' => [ |
  | 918 | 918 | 'name' => 'map\_height', |
  | 919 | 919 | 'id' => 'map\_height', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L924) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L924) |  |
  | 924 | 924 | 'append' => '<br />' . sprintf(esc\_attr\_\_('Or set in Shortcode: %s', 'waymark'), '<code>[' . Waymark\_Config::get\_item('shortcode') . ' map\_height=&quot;' . Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height') . '&quot; map\_width=&quot;320&quot;]</code>'), |
  | 925 | 925 | 'tip' => sprintf(esc\_attr\_\_('Specify the desired height of the Map (in pixels). Pro Tip! This will affect all Maps, but you can change the height (and width) of an individual Map through the Shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; map\_height=&quot;' . Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height') . '&quot;]'), |
  | 926 |  | 'input\_processing' => ~~array(~~ |
  |  | 926 | 'input\_processing' => [ |
  | 927 | 927 | 'preg\_replace("/[^0-9]/", "", $param\_value);', |
  | 928 |  | ~~)~~, |
  | 929 |  | 'output\_processing' => ~~array(~~ |
  |  | 928 | ], |
  |  | 929 | 'output\_processing' => [ |
  | 930 | 930 | sprintf('(! empty($param\_value)) ? $param\_value : %d;', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_height')), |
  | 931 |  | ~~)~~, |
  | 932 |  | ~~)~~, |
  | 933 |  | 'map\_default\_zoom' => ~~array(~~ |
  |  | 931 | ], |
  |  | 932 | ], |
  |  | 933 | 'map\_default\_zoom' => [ |
  | 934 | 934 | 'name' => 'map\_default\_zoom', |
  | 935 | 935 | 'id' => 'map\_default\_zoom', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L939) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L939) |  |
  | 939 | 939 | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_default\_zoom'), |
  | 940 | 940 | 'tip' => esc\_attr\_\_('Waymark zooms the Map automatically when displaying data. This zoom level (0-18) will be used when there is no data available.', 'waymark'), |
  | 941 |  | 'input\_processing' => ~~array(~~ |
  |  | 941 | 'input\_processing' => [ |
  | 942 | 942 | 'preg\_replace("/[^0-9]/", "", $param\_value);', |
  | 943 |  | ~~)~~, |
  | 944 |  | 'output\_processing' => ~~array(~~ |
  |  | 943 | ], |
  |  | 944 | 'output\_processing' => [ |
  | 945 | 945 | sprintf('(! empty($param\_value)) ? $param\_value : "%d";', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_default\_zoom')), |
  | 946 |  | ~~)~~, |
  | 947 |  | ~~)~~, |
  | 948 |  | 'show\_gallery' => ~~array(~~ |
  |  | 946 | ], |
  |  | 947 | ], |
  |  | 948 | 'show\_gallery' => [ |
  | 949 | 949 | 'name' => 'show\_gallery', |
  | 950 | 950 | 'id' => 'show\_gallery', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L953) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L953) |  |
  | 953 | 953 | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_gallery'), |
  | 954 | 954 | 'tip' => sprintf(esc\_attr\_\_('Whether to display an image gallery for Markers that have images associated with them. Pro Tip! This will affect all Maps, but you can choose to show/hide the gallery of an individual Map through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' show\_gallery=&quot;1&quot;]'), |
  | 955 |  | 'options' => ~~array(~~ |
  |  | 955 | 'options' => [ |
  | 956 | 956 | '1' => esc\_html\_\_('Show', 'waymark'), |
  | 957 | 957 | '0' => esc\_html\_\_('Hide', 'waymark'), |
  | 958 |  | ~~)~~, |
  | 959 |  | ~~)~~, |
  | 960 |  | 'show\_filter' => ~~array(~~ |
  |  | 958 | ], |
  |  | 959 | ], |
  |  | 960 | 'show\_filter' => [ |
  | 961 | 961 | 'name' => 'show\_filter', |
  | 962 | 962 | 'id' => 'show\_filter', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L965) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L965) |  |
  | 965 | 965 | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_filter'), |
  | 966 | 966 | 'tip' => sprintf(esc\_attr\_\_('Allow the user to filter which Markers, Lines and Shapes are currently visible on the Map. Pro Tip! This will affect all Maps, but you can choose to show/hide the filter for individual Maps through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' show\_filter=&quot;1&quot;]'), |
  | 967 |  | 'options' => ~~array(~~ |
  |  | 967 | 'options' => [ |
  | 968 | 968 | '1' => esc\_html\_\_('Show', 'waymark'), |
  | 969 | 969 | '0' => esc\_html\_\_('Hide', 'waymark'), |
  | 970 |  | ~~)~~, |
  | 971 |  | ~~)~~, |
  | 972 |  | 'allow\_export' => ~~array(~~ |
  |  | 970 | ], |
  |  | 971 | ], |
  |  | 972 | 'allow\_export' => [ |
  | 973 | 973 | 'name' => 'allow\_export', |
  | 974 | 974 | 'id' => 'allow\_export', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L977) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L977) |  |
  | 977 | 977 | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'allow\_export'), |
  | 978 | 978 | 'tip' => sprintf(esc\_attr\_\_('Offer visitors the ability to Download all Collection/Map Overlays in the Shortcode Header and on the Map Details page. GeoJSON, GPX and KML formats supported.', 'waymark')), |
  | 979 |  | ~~)~~, |
  | 980 |  | 'show\_scale' => ~~array(~~ |
  |  | 979 | ], |
  |  | 980 | 'show\_scale' => [ |
  | 981 | 981 | 'name' => 'show\_scale', |
  | 982 | 982 | 'id' => 'show\_scale', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L985) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L985) |  |
  | 985 | 985 | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_scale'), |
  | 986 | 986 | 'tip' => sprintf(esc\_attr\_\_('Show a distance scale (km and miles) on the Map.', 'waymark')), |
  | 987 |  | ~~)~~, |
  | 988 |  | ~~)~~, |
  | 989 |  | ~~)~~, |
  |  | 987 | ], |
  |  | 988 | ], |
  |  | 989 | ], |
  | 990 | 990 |  |
  | 991 | 991 | //Interaction |
  | 992 | 992 |  |
  | 993 | 993 | //Sleep |
  | 994 |  | 'interaction\_options' => ~~array(~~ |
  |  | 994 | 'interaction\_options' => [ |
  | 995 | 995 | 'title' => esc\_html\_\_('Sleep Options', 'waymark'), |
  | 996 | 996 | 'description' => sprintf(\_\_('Waymark Maps will zoom when the user scrolls. This can cause some unexpected/annoying behaviour when scrolling a page.<br /><br /><b>Sleeping</b> the Map initially and <b>Waking</b> upon user interaction (i.e. hovering/clicking/tapping) may create a better experience.', 'waymark'), Waymark\_Config::get\_default('misc', 'interaction\_options', 'delay\_seconds')), |
  | 997 |  | 'fields' => ~~array(~~ |
  | 998 |  | 'delay\_seconds' => ~~array(~~ |
  |  | 997 | 'fields' => [ |
  |  | 998 | 'delay\_seconds' => [ |
  | 999 | 999 | 'name' => 'delay\_seconds', |
  | 1000 | 1000 | 'id' => 'delay\_seconds', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1005) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1005) |  |
  | 1005 | 1005 | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'delay\_seconds'), |
  | 1006 | 1006 | 'tip' => esc\_attr\_\_('How many seconds before scroll zoom is enabled. 0 seconds will mean no delay (disabling this feature). A large number of seconds like 3600 (an hour) will esentially \*disable hover to wake\*, meaning the user will need to \*click\* to wake.', 'waymark'), |
  | 1007 |  | 'input\_processing' => ~~array(~~ |
  |  | 1007 | 'input\_processing' => [ |
  | 1008 | 1008 | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'interaction\_options', 'delay\_seconds') . ';', //Fallback |
  | 1009 |  | ~~)~~, |
  | 1010 |  | ~~)~~, |
  | 1011 |  | 'do\_message' => ~~array(~~ |
  |  | 1009 | ], |
  |  | 1010 | ], |
  |  | 1011 | 'do\_message' => [ |
  | 1012 | 1012 | 'name' => 'do\_message', |
  | 1013 | 1013 | 'id' => 'do\_message', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1016) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1016) |  |
  | 1016 | 1016 | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'do\_message'), |
  | 1017 | 1017 | 'tip' => esc\_attr\_\_('This message will be displayed by the Map while scroll zoom is disabled.', 'waymark'), |
  | 1018 |  | ~~)~~, |
  | 1019 |  | 'wake\_message' => ~~array(~~ |
  |  | 1018 | ], |
  |  | 1019 | 'wake\_message' => [ |
  | 1020 | 1020 | 'name' => 'wake\_message', |
  | 1021 | 1021 | 'id' => 'wake\_message', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1023) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1023) |  |
  | 1023 | 1023 | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Display', 'waymark') . ' </span> ' . esc\_html\_\_('Message Text', 'waymark'), |
  | 1024 | 1024 | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'wake\_message'), |
  | 1025 |  | ~~)~~, |
  | 1026 |  | ~~)~~, |
  | 1027 |  | ~~)~~, |
  |  | 1025 | ], |
  |  | 1026 | ], |
  |  | 1027 | ], |
  | 1028 | 1028 |  |
  | 1029 | 1029 | // Cluster |
  | 1030 | 1030 |  |
  | 1031 |  | 'cluster\_options' => ~~array(~~ |
  |  | 1031 | 'cluster\_options' => [ |
  | 1032 | 1032 | 'title' => esc\_html\_\_('Cluster Options', 'waymark'), |
  | 1033 | 1033 | 'description' => sprintf(\_\_('With Clustering enabled, Markers will be grouped together when they are close together. This can help to reduce clutter on the Map.', 'waymark'), Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_threshold')), |
  | 1034 |  | 'help' => ~~array(~~ |
  |  | 1034 | 'help' => [ |
  | 1035 | 1035 | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/marker-clustering')), |
  | 1036 | 1036 | 'text' => esc\_attr\_\_('Clustering Docs &raquo;', 'waymark'), |
  | 1037 |  | ~~)~~, |
  | 1038 |  | 'fields' => ~~array(~~ |
  | 1039 |  | 'show\_cluster' => ~~array(~~ |
  |  | 1037 | ], |
  |  | 1038 | 'fields' => [ |
  |  | 1039 | 'show\_cluster' => [ |
  | 1040 | 1040 | 'name' => 'show\_cluster', |
  | 1041 | 1041 | 'id' => 'show\_cluster', |
  | 1042 | 1042 | 'type' => 'boolean', |
  | 1043 |  | 'options' => ~~array(~~ |
  |  | 1043 | 'options' => [ |
  | 1044 | 1044 | '1' => esc\_html\_\_('Enabled', 'waymark'), |
  | 1045 | 1045 | '0' => esc\_html\_\_('Disabled', 'waymark'), |
  | 1046 |  | ~~)~~, |
  |  | 1046 | ], |
  | 1047 | 1047 |  |
  | 1048 | 1048 | 'title' => esc\_html\_\_('Marker Clustering', 'waymark'), |
  | 1049 | 1049 | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'show\_cluster'), |
  | 1050 | 1050 | 'tip' => esc\_attr\_\_('Whether to cluster (stack) Markers that are close together. Pro Tip! This will affect all Maps, but you can also enable/disable clustering through the Shortcode: [Waymark show\_cluster="0"]', 'waymark'), |
  | 1051 |  | ~~)~~, |
  | 1052 |  | 'cluster\_threshold' => ~~array(~~ |
  |  | 1051 | ], |
  |  | 1052 | 'cluster\_threshold' => [ |
  | 1053 | 1053 | 'name' => 'cluster\_threshold', |
  | 1054 | 1054 | 'id' => 'cluster\_threshold', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1058) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1058) |  |
  | 1058 | 1058 | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'cluster\_threshold'), |
  | 1059 | 1059 | 'tip' => esc\_attr\_\_('Markers will not be clustered above this zoom level.', 'waymark'), |
  | 1060 |  | 'input\_processing' => ~~array(~~ |
  |  | 1060 | 'input\_processing' => [ |
  | 1061 | 1061 | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_threshold') . ';', //Fallback |
  | 1062 |  | ~~)~~, |
  | 1063 |  | ~~)~~, |
  | 1064 |  | 'cluster\_radius' => ~~array(~~ |
  |  | 1062 | ], |
  |  | 1063 | ], |
  |  | 1064 | 'cluster\_radius' => [ |
  | 1065 | 1065 | 'name' => 'cluster\_radius', |
  | 1066 | 1066 | 'id' => 'cluster\_radius', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1071) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1071) |  |
  | 1071 | 1071 | 'tip' => esc\_attr\_\_('The maximum radius that a cluster will cover from the central marker (in pixels). Decreasing will make more, smaller clusters. Default 80.', 'waymark'), |
  | 1072 | 1072 |  |
  | 1073 |  | 'input\_processing' => ~~array(~~ |
  |  | 1073 | 'input\_processing' => [ |
  | 1074 | 1074 | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_radius') . ';', //Fallback |
  | 1075 |  | ~~)~~, |
  | 1076 |  | ~~)~~, |
  | 1077 |  | ~~)~~, |
  | 1078 |  | ~~)~~, |
  |  | 1075 | ], |
  |  | 1076 | ], |
  |  | 1077 | ], |
  |  | 1078 | ], |
  | 1079 | 1079 |  |
  | 1080 | 1080 | //Shortcode |
  | 1081 | 1081 |  |
  | 1082 |  | 'shortcode\_options' => ~~array(~~ |
  |  | 1082 | 'shortcode\_options' => [ |
  | 1083 | 1083 | 'title' => esc\_html\_\_('Shortcode Options', 'waymark'), |
  | 1084 | 1084 | 'description' => esc\_html\_\_('How Maps are embedded into your content using the shortcode.', 'waymark'), |
  | 1085 |  | 'help' => ~~array(~~ |
  |  | 1085 | 'help' => [ |
  | 1086 | 1086 | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/shortcodes')), |
  | 1087 | 1087 | 'text' => esc\_attr\_\_('Shortcode Docs &raquo;', 'waymark'), |
  | 1088 |  | ~~)~~, |
  | 1089 |  | 'fields' => ~~array(~~ |
  | 1090 |  | 'shortcode\_header' => ~~array(~~ |
  |  | 1088 | ], |
  |  | 1089 | 'fields' => [ |
  |  | 1090 | 'shortcode\_header' => [ |
  | 1091 | 1091 | 'name' => 'shortcode\_header', |
  | 1092 | 1092 | 'id' => 'shortcode\_header', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1095) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1095) |  |
  | 1095 | 1095 | 'default' => Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'shortcode\_header'), |
  | 1096 | 1096 | 'tip' => sprintf(esc\_attr\_\_('The shortcode header displays the title and link to the Map or Collection. Pro Tip! This will affect all shortcodes, but you can override the setting through the shortcode: %s (the value must be either 0 or 1).', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; shortcode\_header=&quot;' . Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'shortcode\_header') . '&quot;]'), |
  | 1097 |  | 'options' => ~~array(~~ |
  |  | 1097 | 'options' => [ |
  | 1098 | 1098 | '1' => esc\_html\_\_('Show', 'waymark'), |
  | 1099 | 1099 | '0' => esc\_html\_\_('Hide', 'waymark'), |
  | 1100 |  | ~~)~~, |
  | 1101 |  | ~~)~~, |
  | 1102 |  | 'header\_override' => ~~array(~~ |
  |  | 1100 | ], |
  |  | 1101 | ], |
  |  | 1102 | 'header\_override' => [ |
  | 1103 | 1103 | 'name' => 'header\_override', |
  | 1104 | 1104 | 'id' => 'header\_override', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1107) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1107) |  |
  | 1107 | 1107 | 'default' => Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'header\_override'), |
  | 1108 | 1108 | 'tip' => esc\_attr\_\_('Use this Setting to always show the Shortcode Header when signed in as admin, useful for quickly navigating to embeded Maps.', 'waymark'), |
  | 1109 |  | 'options' => ~~array(~~ |
  |  | 1109 | 'options' => [ |
  | 1110 | 1110 | '0' => esc\_html\_\_('Use Setting', 'waymark'), |
  | 1111 | 1111 | '1' => esc\_html\_\_('Always Show', 'waymark'), |
  | 1112 |  | ~~)~~, |
  | 1113 |  | ~~)~~, |
  | 1114 |  | ~~)~~, |
  | 1115 |  | ~~)~~, |
  |  | 1112 | ], |
  |  | 1113 | ], |
  |  | 1114 | ], |
  |  | 1115 | ], |
  | 1116 | 1116 |  |
  | 1117 | 1117 | //Elevation |
  | 1118 | 1118 |  |
  | 1119 |  | 'elevation\_options' => ~~array(~~ |
  |  | 1119 | 'elevation\_options' => [ |
  | 1120 | 1120 | 'title' => esc\_html\_\_('Elevation Options', 'waymark'), |
  | 1121 | 1121 | 'description' => esc\_html\_\_('Lines with elevation data.', 'waymark'), |
  | 1122 |  | 'help' => ~~array(~~ |
  |  | 1122 | 'help' => [ |
  | 1123 | 1123 | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/elevation-profile-colours')), |
  | 1124 | 1124 | 'text' => esc\_attr\_\_('Elevation Styling &raquo;', 'waymark'), |
  | 1125 |  | ~~)~~, |
  | 1126 |  | 'fields' => ~~array(~~ |
  | 1127 |  | 'show\_elevation' => ~~array(~~ |
  |  | 1125 | ], |
  |  | 1126 | 'fields' => [ |
  |  | 1127 | 'show\_elevation' => [ |
  | 1128 | 1128 | 'name' => 'show\_elevation', |
  | 1129 | 1129 | 'id' => 'show\_elevation', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1132) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1132) |  |
  | 1132 | 1132 | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'show\_elevation'), |
  | 1133 | 1133 | 'tip' => sprintf(esc\_attr\_\_('Display an interactive elevation profile graph below the Map for Lines that have elevation data. Pro Tip! You can choose to show/hide the elevation graph of an individual Map through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; show\_elevation=&quot;1&quot;]'), |
  | 1134 |  | 'options' => ~~array(~~ |
  |  | 1134 | 'options' => [ |
  | 1135 | 1135 | '2' => esc\_html\_\_('Show on Map Details', 'waymark'), |
  | 1136 | 1136 | '1' => esc\_html\_\_('Show everywhere', 'waymark'), |
  | 1137 | 1137 | '0' => esc\_html\_\_('Hide everywhere', 'waymark'), |
  | 1138 |  | ~~)~~, |
  | 1139 |  | ~~)~~, |
  | 1140 |  | 'elevation\_units' => ~~array(~~ |
  |  | 1138 | ], |
  |  | 1139 | ], |
  |  | 1140 | 'elevation\_units' => [ |
  | 1141 | 1141 | 'name' => 'elevation\_units', |
  | 1142 | 1142 | 'id' => 'elevation\_units', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1145) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1145) |  |
  | 1145 | 1145 | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_units'), |
  | 1146 | 1146 | 'tip' => sprintf(esc\_attr\_\_('Display elevation data in metric (m/km) or imperial (ft/mi) units.', 'waymark')), |
  | 1147 |  | 'options' => ~~array(~~ |
  |  | 1147 | 'options' => [ |
  | 1148 | 1148 | 'metric' => esc\_html\_\_('Metric (m/km)', 'waymark'), |
  | 1149 | 1149 | 'imperial' => esc\_html\_\_('Imperial (ft/mi)', 'waymark'), |
  | 1150 |  | ~~)~~, |
  | 1151 |  | ~~)~~, |
  | 1152 |  | 'elevation\_colour' => ~~array(~~ |
  |  | 1150 | ], |
  |  | 1151 | ], |
  |  | 1152 | 'elevation\_colour' => [ |
  | 1153 | 1153 | 'name' => 'elevation\_colour', |
  | 1154 | 1154 | 'id' => 'elevation\_colour', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1158) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1158) |  |
  | 1158 | 1158 | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_colour'), |
  | 1159 | 1159 | 'tip' => sprintf(esc\_attr\_\_('The colour of the elevation graph and associated Line.', 'waymark')), |
  | 1160 |  | 'input\_processing' => ~~array(~~ |
  |  | 1160 | 'input\_processing' => [ |
  | 1161 | 1161 | '(! empty($param\_value)) ? $param\_value : "#b42714";', //Fallback |
  | 1162 |  | ~~)~~, |
  | 1163 |  | ~~)~~, |
  | 1164 |  | 'elevation\_initial' => ~~array(~~ |
  |  | 1162 | ], |
  |  | 1163 | ], |
  |  | 1164 | 'elevation\_initial' => [ |
  | 1165 | 1165 | 'name' => 'elevation\_initial', |
  | 1166 | 1166 | 'id' => 'elevation\_initial', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1169) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1169) |  |
  | 1169 | 1169 | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_initial'), |
  | 1170 | 1170 | 'tip' => sprintf(esc\_attr\_\_('Whether to show the elevation profile when the Map loads. If set to No, the user must click on a Line in order to display the elevation data. If there are multiple Lines with elevation data, the one added to the editor first will be the one shown initially.', 'waymark')), |
  | 1171 |  | ~~)~~, |
  | 1172 |  | ~~)~~, |
  | 1173 |  | ~~)~~, |
  |  | 1171 | ], |
  |  | 1172 | ], |
  |  | 1173 | ], |
  | 1174 | 1174 |  |
  | 1175 | 1175 | /\*\* |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1181) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1181) |  |
  | 1181 | 1181 | //Collections |
  | 1182 | 1182 |  |
  | 1183 |  | 'collection\_options' => ~~array(~~ |
  |  | 1183 | 'collection\_options' => [ |
  | 1184 | 1184 | 'title' => esc\_html\_\_('Collection Options', 'waymark'), |
  | 1185 | 1185 | 'description' => esc\_html\_\_('How Collections are displayed.', 'waymark'), |
  | 1186 |  | 'help' => ~~array(~~ |
  |  | 1186 | 'help' => [ |
  | 1187 | 1187 | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/collections')), |
  | 1188 | 1188 | 'text' => esc\_attr\_\_('Collection Docs &raquo;', 'waymark'), |
  | 1189 |  | ~~)~~, |
  | 1190 |  | 'fields' => ~~array(~~ |
  | 1191 |  | 'load\_method' => ~~array(~~ |
  |  | 1189 | ], |
  |  | 1190 | 'fields' => [ |
  |  | 1191 | 'load\_method' => [ |
  | 1192 | 1192 | 'name' => 'load\_method', |
  | 1193 | 1193 | 'id' => 'load\_method', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1201) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1201) |  |
  | 1201 | 1201 | 'default' => Waymark\_Config::get\_setting('misc', 'collection\_options', 'load\_method'), |
  | 1202 | 1202 | 'tip' => esc\_attr\_\_('Whether to load multiple Maps in the Background (uses AJAX to improve page load) when embedding with the Shortcode, or to Embed them within the page. Embedding may be a bad idea for LARGE COLLECTIONS, but can resolve some issues where Collections are not displaying correctly.', 'waymark'), |
  | 1203 |  | ~~)~~, |
  | 1204 |  | ~~)~~, |
  | 1205 |  | ~~)~~, |
  |  | 1203 | ], |
  |  | 1204 | ], |
  |  | 1205 | ], |
  | 1206 | 1206 |  |
  | 1207 | 1207 | //Editor |
  | 1208 | 1208 |  |
  | 1209 |  | 'editor\_options' => ~~array(~~ |
  |  | 1209 | 'editor\_options' => [ |
  | 1210 | 1210 | 'title' => esc\_html\_\_('Editor Options', 'waymark'), |
  | 1211 | 1211 | 'description' => esc\_html\_\_('Customising the Map Editor.', 'waymark'), |
  | 1212 |  | 'fields' => ~~array(~~ |
  | 1213 |  | 'confirm\_delete' => ~~array(~~ |
  |  | 1212 | 'fields' => [ |
  |  | 1213 | 'confirm\_delete' => [ |
  | 1214 | 1214 | 'name' => 'confirm\_delete', |
  | 1215 | 1215 | 'id' => 'confirm\_delete', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1218) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1218) |  |
  | 1218 | 1218 | 'default' => Waymark\_Config::get\_setting('misc', 'editor\_options', 'confirm\_delete'), |
  | 1219 | 1219 | 'tip' => esc\_attr\_\_('Whether to show a confirmation dialog before deleting Markers/Lines/Shapes from the Map. Pro Tip! Even if you accidentally delete something, changes are not saved until the "Update" button is clicked.', 'waymark'), |
  | 1220 |  | ~~)~~, |
  | 1221 |  | 'editor\_basemap' => ~~array(~~ |
  |  | 1220 | ], |
  |  | 1221 | 'editor\_basemap' => [ |
  | 1222 | 1222 | 'name' => 'editor\_basemap', |
  | 1223 | 1223 | 'id' => 'editor\_basemap', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1227) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1227) |  |
  | 1227 | 1227 | 'tip' => esc\_attr\_\_('Which Basemap to use as the editor default.', 'waymark'), |
  | 1228 | 1228 | 'options' => $basemap\_options, |
  | 1229 |  | ~~)~~, |
  | 1230 |  | ~~)~~, |
  | 1231 |  | ~~)~~, |
  |  | 1229 | ], |
  |  | 1230 | ], |
  |  | 1231 | ], |
  | 1232 | 1232 |  |
  | 1233 | 1233 | //Permalinks |
  | 1234 | 1234 |  |
  | 1235 |  | 'permalinks' => ~~array(~~ |
  |  | 1235 | 'permalinks' => [ |
  | 1236 | 1236 | 'title' => esc\_html\_\_('Permalinks', 'waymark'), |
  | 1237 | 1237 | 'description' => 'Customise your Map and Collection URLs.', |
  | 1238 | 1238 | 'footer' => '<small>For the changes to take affect you must rebuild your Permalinks by going to WP Settings > Permalinks and clicking "Save Changes".</small>', |
  | 1239 |  | 'fields' => ~~array(~~ |
  | 1240 |  | 'permalink\_slug\_map' => ~~array(~~ |
  |  | 1239 | 'fields' => [ |
  |  | 1240 | 'permalink\_slug\_map' => [ |
  | 1241 | 1241 | 'name' => 'permalink\_slug\_map', |
  | 1242 | 1242 | 'id' => 'permalink\_slug\_map', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1246) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1246) |  |
  | 1246 | 1246 | 'default' => Waymark\_Config::get\_setting('misc', 'permalinks', 'permalink\_slug\_map'), |
  | 1247 | 1247 | 'tip' => esc\_attr\_\_('The URL slug that will be used for links to your Maps, i.e. example.com/[map-slug]/example-map/. Only alpha-numeric characters and hyphens (-) are allowed.', 'waymark'), |
  | 1248 |  | 'input\_processing' => ~~array(~~ |
  |  | 1248 | 'input\_processing' => [ |
  | 1249 | 1249 | 'preg\_replace("/[^0-9a-z-]+/", "", $param\_value);', |
  | 1250 |  | ~~)~~, |
  |  | 1250 | ], |
  | 1251 | 1251 | 'prepend' => '<small>/</small>', |
  | 1252 | 1252 | 'append' => '<small>/map-name/</small>', |
  | 1253 |  | ~~)~~, |
  | 1254 |  | 'permalink\_slug\_collection' => ~~array(~~ |
  |  | 1253 | ], |
  |  | 1254 | 'permalink\_slug\_collection' => [ |
  | 1255 | 1255 | 'name' => 'permalink\_slug\_collection', |
  | 1256 | 1256 | 'id' => 'permalink\_slug\_collection', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1260) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1260) |  |
  | 1260 | 1260 | 'default' => Waymark\_Config::get\_setting('misc', 'permalinks', 'permalink\_slug\_collection'), |
  | 1261 | 1261 | 'tip' => esc\_attr\_\_('The URL slug that will be used for links to your Collections, i.e. example.com/[collection-slug]/example-collection/. Only alpha-numeric characters and hyphens (-) are allowed.', 'waymark'), |
  | 1262 |  | 'input\_processing' => ~~array(~~ |
  |  | 1262 | 'input\_processing' => [ |
  | 1263 | 1263 | 'preg\_replace("/[^0-9a-z-]+/", "", $param\_value);', |
  | 1264 |  | ~~)~~, |
  |  | 1264 | ], |
  | 1265 | 1265 | 'prepend' => '<small>/</small>', |
  | 1266 | 1266 | 'append' => '<small>/collection-name/</small>', |
  | 1267 |  | ~~)~~, |
  | 1268 |  | ~~)~~, |
  | 1269 |  | ~~)~~, |
  |  | 1267 | ], |
  |  | 1268 | ], |
  |  | 1269 | ], |
  | 1270 | 1270 |  |
  | 1271 | 1271 | // Custom Post Type Supports |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1297) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1297) |  |
  | 1297 | 1297 | //Debug |
  | 1298 | 1298 |  |
  | 1299 |  | 'advanced' => ~~array(~~ |
  |  | 1299 | 'advanced' => [ |
  | 1300 | 1300 | 'title' => esc\_html\_\_('Debug', 'waymark'), |
  | 1301 | 1301 | 'description' => '', |
  | 1302 |  | 'fields' => ~~array(~~ |
  | 1303 |  | 'debug\_mode' => ~~array(~~ |
  |  | 1302 | 'fields' => [ |
  |  | 1303 | 'debug\_mode' => [ |
  | 1304 | 1304 | 'name' => 'debug\_mode', |
  | 1305 | 1305 | 'id' => 'debug\_mode', |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1309) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1309) |  |
  | 1309 | 1309 | 'tip' => esc\_attr\_\_('With debug mode enabled, the plugin will output Map and Settings data in Admin Dashboard. This may come in handy if you need to report a bug. Pro Tip! Check the browser console for Waymark output when signed in as an administrator.', 'waymark'), |
  | 1310 | 1310 | 'tip\_link' => 'https://www.waymark.dev/docs/debug-mode/', |
  | 1311 |  | 'options' => ~~array(~~ |
  |  | 1311 | 'options' => [ |
  | 1312 | 1312 | '0' => esc\_html\_\_('Disable', 'waymark'), |
  | 1313 | 1313 | '1' => esc\_html\_\_('Enable', 'waymark'), |
  | 1314 |  | ~~)~~, |
  | 1315 |  | ~~)~~, |
  | 1316 |  | ~~)~~, |
  | 1317 |  | ~~)~~, |
  | 1318 |  | ~~)~~, |
  | 1319 |  | ~~)~~; |
  |  | 1314 | ], |
  |  | 1315 | ], |
  |  | 1316 | ], |
  |  | 1317 | ], |
  |  | 1318 | ], |
  |  | 1319 | ]; |
  | 1320 | 1320 |  |
  | 1321 | 1321 | //Debug? |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1329) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1329) |  |
  | 1329 | 1329 | 'default' => serialize(get\_option('Waymark\_Settings')), |
  | 1330 | 1330 | //Don't save to DB |
  | 1331 |  | 'input\_processing' => ~~array(~~ |
  |  | 1331 | 'input\_processing' => [ |
  | 1332 | 1332 | 'null', |
  | 1333 |  | ~~)~~, |
  |  | 1333 | ], |
  | 1334 | 1334 | //Don't allow editing |
  | 1335 |  | 'output\_processing' => ~~array(~~ |
  |  | 1335 | 'output\_processing' => [ |
  | 1336 | 1336 | 'serialize(get\_option("Waymark\_Settings"))', |
  | 1337 |  | ~~)~~, |
  |  | 1337 | ], |
  | 1338 | 1338 | ]; |
  | 1339 | 1339 | } |
  | 1340 | 1340 |  |
  | 1341 |  | add\_action('admin\_notices', ~~array($this, 'admin\_notices')~~); |
  | 1342 |  | add\_action('admin\_init', ~~array($this, 'register\_settings')~~); |
  |  | 1341 | add\_action('admin\_notices', [$this, 'admin\_notices']); |
  |  | 1342 | add\_action('admin\_init', [$this, 'register\_settings']); |
  | 1343 | 1343 | } |
  | 1344 | 1344 |  |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1348) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1348) |  |
  | 1348 | 1348 |  |
  | 1349 | 1349 | function register\_settings() { |
  | 1350 |  | register\_setting($this->page\_slug, 'Waymark\_Settings', ~~array($this, 'sanitize\_callback')~~); |
  |  | 1350 | register\_setting($this->page\_slug, 'Waymark\_Settings', [$this, 'sanitize\_callback']); |
  | 1351 | 1351 |  |
  | 1352 | 1352 | //For each tab |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1358) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1358) |  |
  | 1358 | 1358 |  |
  | 1359 | 1359 | //Create section |
  | 1360 |  | add\_settings\_section($section\_key, $section\_data['title'], ~~array($this, 'section\_text')~~, $this->page\_slug); |
  |  | 1360 | add\_settings\_section($section\_key, $section\_data['title'], [$this, 'section\_text'], $this->page\_slug); |
  | 1361 | 1361 |  |
  | 1362 | 1362 | //For each field in section |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1379) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1379) |  |
  | 1379 | 1379 |  |
  | 1380 | 1380 | //Must be an array |
  | 1381 |  | if (!is\_array($field['default'])) { |
  |  | 1381 | if (! is\_array($field['default'])) { |
  | 1382 | 1382 | //Make array |
  | 1383 | 1383 | $field['default'] = Waymark\_Helper::convert\_single\_value\_to\_array($field['default']); |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1391) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1391) |  |
  | 1391 | 1391 | } |
  | 1392 | 1392 |  |
  | 1393 |  | add\_settings\_field($field['name'], $field['title'], ~~array($this, 'create\_input')~~, $this->page\_slug, $section\_key, $field); |
  |  | 1393 | add\_settings\_field($field['name'], $field['title'], [$this, 'create\_input'], $this->page\_slug, $section\_key, $field); |
  | 1394 | 1394 | } |
  | 1395 | 1395 | } |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1429) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1429) |  |
  | 1429 | 1429 |  |
  | 1430 | 1430 | //If no input processing specified |
  | 1431 |  | if (!array\_key\_exists('input\_processing', $field\_definition)) { |
  |  | 1431 | if (! array\_key\_exists('input\_processing', $field\_definition)) { |
  | 1432 | 1432 | //Make safe by default |
  | 1433 | 1433 | $field\_definition['input\_processing'][] = 'htmlspecialchars($param\_value)'; |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1452) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1452) |  |
  | 1452 | 1452 |  |
  | 1453 | 1453 | echo '  <div class="card">' . "\n"; |
  | 1454 |  | ~~//      echo '      <h1>' . esc\_html\_\_('Settings', 'waymark') . '</h1>' . "\n";~~ |
  | 1455 | 1454 |  |
  | 1456 | 1455 | //Tabs |
  | 1457 |  | $active\_content = (isset($\_GET['content'])) ? ~~$\_GET['content']~~ : $this->default\_content; |
  |  | 1456 | $active\_content = (isset($\_GET['content'])) ? esc\_html($\_GET['content']) : $this->default\_content; |
  | 1458 | 1457 | $this->settings\_nav($active\_content); |
  | 1459 | 1458 |  |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1465) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1464) |  |
  | 1465 | 1464 | foreach ($this->tabs as $tab\_key => $tab\_data) { |
  | 1466 | 1465 | $style = ''; |
  | 1467 |  | ~~//          if($active\_tab != $tab\_key) {~~ |
  | 1468 |  | ~~//              $style = ' style="display:none;"';~~ |
  | 1469 |  | ~~//          }~~ |
  | 1470 | 1466 | echo '  <div class="waymark-settings-tab waymark-settings-tab-' . $tab\_key . '"' . $style . '>' . "\n"; |
  | 1471 | 1467 |  |
  | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468#L1530) | […](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3205103#L1526) |  |
  | 1530 | 1526 |  |
  | 1531 | 1527 | function settings\_nav($current = 'tiles') { |
  | 1532 |  | echo '<div id="waymark-settings-nav" data-init\_tab\_key="' . ~~$current~~ . '">' . "\n"; |
  |  | 1528 | echo '<div id="waymark-settings-nav" data-init\_tab\_key="' . esc\_html($current) . '">' . "\n"; |
  | 1533 | 1529 | echo '  <select>' . "\n"; |
  | 1534 | 1530 |  |
* ## [waymark/trunk/inc/Waymark\_Config.php](/changeset/3205103/waymark/trunk/inc/Waymark_Config.php "Show the changeset 3205103 restricted to waymark/trunk/inc/Waymark_Config.php")

  | [r3181723](/browser/waymark/trunk/inc/Waymark_Config.php?rev=3181723#L12 "Show revision 3181723 of this file in browser") | [r3205103](/browser/waymark/trunk/inc/Waymark_Config.php?rev=3205103#L12 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 12 | 12 | 'plugin\_name\_short' => 'Waymark', |
  | 13 | 13 | 'custom\_types' => [], |
  | 14 |  | 'plugin\_version' => '1.4.~~1~~', |
  |  | 14 | 'plugin\_version' => '1.4.2', |
  | 15 | 15 | 'nonce\_string' => 'Waymark\_Nonce', |
  | 16 | 16 | 'site\_url' => 'https://www.waymark.dev/', |
* ## [waymark/trunk/languages/waymark-en\_CA.po](/changeset/3205103/waymark/trunk/languages/waymark-en_CA.po "Show the changeset 3205103 restricted to waymark/trunk/languages/waymark-en_CA.po")

  | [r3181723](/browser/waymark/trunk/languages/waymark-en_CA.po?rev=3181723#L3 "Show revision 3181723 of this file in browser") | [r3205103](/browser/waymark/trunk/languages/waymark-en_CA.po?rev=3205103#L3 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: Waymark 1.4.~~1~~\n" |
  |  | 5 | "Project-Id-Version: Waymark 1.4.2\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/waymark\n" |
  | 7 | 7 | "POT-Creation-Date: 2024-01-18 00:24:31+00:00\n" |
* ## [waymark/trunk/languages/waymark-en\_GB.po](/changeset/3205103/waymark/trunk/languages/waymark-en_GB.po "Show the changeset 3205103 restricted to waymark/trunk/languages/waymark-en_GB.po")

  | [r3181723](/browser/waymark/trunk/languages/waymark-en_GB.po?rev=3181723#L3 "Show revision 3181723 of this file in browser") | [r3205103](/browser/waymark/trunk/languages/waymark-en_GB.po?rev=3205103#L3 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: Waymark 1.4.~~1~~\n" |
  |  | 5 | "Project-Id-Version: Waymark 1.4.2\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/waymark\n" |
  | 7 | 7 | "POT-Creation-Date: 2024-01-18 00:24:31+00:00\n" |
* ## [waymark/trunk/languages/waymark-es\_ES.po](/changeset/3205103/waymark/trunk/languages/waymark-es_ES.po "Show the changeset 3205103 restricted to waymark/trunk/languages/waymark-es_ES.po")

  | [r3181723](/browser/waymark/trunk/languages/waymark-es_ES.po?rev=3181723#L3 "Show revision 3181723 of this file in browser") | [r3205103](/browser/waymark/trunk/languages/waymark-es_ES.po?rev=3205103#L3 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: Waymark 1.4.~~1~~\n" |
  |  | 5 | "Project-Id-Version: Waymark 1.4.2\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/waymark\n" |
  | 7 | 7 | "POT-Creation-Date: 2024-01-18 00:24:31+00:00\n" |
* ## [waymark/trunk/languages/waymark-fr\_CA.po](/changeset/3205103/waymark/trunk/languages/waymark-fr_CA.po "Show the changeset 3205103 restricted to waymark/trunk/languages/waymark-fr_CA.po")

  | [r3181723](/browser/waymark/trunk/languages/waymark-fr_CA.po?rev=3181723#L3 "Show revision 3181723 of this file in browser") | [r3205103](/browser/waymark/trunk/languages/waymark-fr_CA.po?rev=3205103#L3 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: Waymark 1.4.~~1~~\n" |
  |  | 5 | "Project-Id-Version: Waymark 1.4.2\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/waymark\n" |
  | 7 | 7 | "POT-Creation-Date: 2024-01-18 00:24:31+00:00\n" |
* ## [waymark/trunk/languages/waymark-ja\_JP.po](/changeset/3205103/waymark/trunk/languages/waymark-ja_JP.po "Show the changeset 3205103 restricted to waymark/trunk/languages/waymark-ja_JP.po")

  | [r3181723](/browser/waymark/trunk/languages/waymark-ja_JP.po?rev=3181723#L3 "Show revision 3181723 of this file in browser") | [r3205103](/browser/waymark/trunk/languages/waymark-ja_JP.po?rev=3205103#L3 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: Waymark 1.4.~~1~~\n" |
  |  | 5 | "Project-Id-Version: Waymark 1.4.2\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/waymark\n" |
  | 7 | 7 | "POT-Creation-Date: 2024-01-23 14:32:30+00:00\n" |
* ## [waymark/trunk/languages/waymark-sv\_SE.po](/changeset/3205103/waymark/trunk/languages/waymark-sv_SE.po "Show the changeset 3205103 restricted to waymark/trunk/languages/waymark-sv_SE.po")

  | [r3181723](/browser/waymark/trunk/languages/waymark-sv_SE.po?rev=3181723#L3 "Show revision 3181723 of this file in browser") | [r3205103](/browser/waymark/trunk/languages/waymark-sv_SE.po?rev=3205103#L3 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: Waymark 1.4.~~1~~\n" |
  |  | 5 | "Project-Id-Version: Waymark 1.4.2\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/waymark\n" |
  | 7 | 7 | "POT-Creation-Date: 2024-01-18 00:24:31+00:00\n" |
* ## [waymark/trunk/languages/waymark-uk\_UA.po](/changeset/3205103/waymark/trunk/languages/waymark-uk_UA.po "Show the changeset 3205103 restricted to waymark/trunk/languages/waymark-uk_UA.po")

  | [r3181723](/browser/waymark/trunk/languages/waymark-uk_UA.po?rev=3181723#L3 "Show revision 3181723 of this file in browser") | [r3205103](/browser/waymark/trunk/languages/waymark-uk_UA.po?rev=3205103#L3 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: Waymark 1.4.~~1~~\n" |
  |  | 5 | "Project-Id-Version: Waymark 1.4.2\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/waymark\n" |
  | 7 | 7 | "POT-Creation-Date: 2024-01-18 00:24:31+00:00\n" |
* ## [waymark/trunk/languages/waymark-zh\_CN.po](/changeset/3205103/waymark/trunk/languages/waymark-zh_CN.po "Show the changeset 3205103 restricted to waymark/trunk/languages/waymark-zh_CN.po")

  | [r3181723](/browser/waymark/trunk/languages/waymark-zh_CN.po?rev=3181723#L3 "Show revision 3181723 of this file in browser") | [r3205103](/browser/waymark/trunk/languages/waymark-zh_CN.po?rev=3205103#L3 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: Waymark 1.4.~~1~~\n" |
  |  | 5 | "Project-Id-Version: Waymark 1.4.2\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/waymark\n" |
  | 7 | 7 | "POT-Creation-Date: 2024-01-23 14:32:30+00:00\n" |
* ## [waymark/trunk/languages/waymark.pot](/changeset/3205103/waymark/trunk/languages/waymark.pot "Show the changeset 3205103 restricted to waymark/trunk/languages/waymark.pot")

  | [r3181723](/browser/waymark/trunk/languages/waymark.pot?rev=3181723#L5 "Show revision 3181723 of this file in browser") | [r3205103](/browser/waymark/trunk/languages/waymark.pot?rev=3205103#L5 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | "Project-Id-Version: Waymark 1.4.1\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/waymark\n" |
  | 7 |  | "POT-Creation-Date: 2024-~~06-13 18:49:59~~+00:00\n" |
  |  | 7 | "POT-Creation-Date: 2024-12-09 20:02:54+00:00\n" |
  | 8 | 8 | "MIME-Version: 1.0\n" |
  | 9 | 9 | "Content-Type: text/plain; charset=utf-8\n" |
  | […](/browser/waymark/trunk/languages/waymark.pot?rev=3181723#L1257) | […](/browser/waymark/trunk/languages/waymark.pot?rev=3205103#L1257) |  |
  | 1257 | 1257 | msgstr "" |
  | 1258 | 1258 |  |
  | 1259 |  | #: inc/Admin/Waymark\_Settings.php:156~~5~~ |
  |  | 1259 | #: inc/Admin/Waymark\_Settings.php:1561 |
  | 1260 | 1260 | msgid "Settings Updated" |
  | 1261 | 1261 | msgstr "" |
  | 1262 | 1262 |  |
  | 1263 |  | #: inc/Admin/Waymark\_Settings.php:156~~8~~ |
  |  | 1263 | #: inc/Admin/Waymark\_Settings.php:1564 |
  | 1264 | 1264 | msgid "Action Complete" |
  | 1265 | 1265 | msgstr "" |
* ## [waymark/trunk/readme.txt](/changeset/3205103/waymark/trunk/readme.txt "Show the changeset 3205103 restricted to waymark/trunk/readme.txt")

  | [r3181723](/browser/waymark/trunk/readme.txt?rev=3181723#L5 "Show revision 3181723 of this file in browser") | [r3205103](/browser/waymark/trunk/readme.txt?rev=3205103#L5 "Show revision 3205103 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Tested up to: 6.7 |
  | 6 | 6 | Requires PHP: 5.2 |
  | 7 |  | Stable tag: 1.4.~~1~~ |
  |  | 7 | Stable tag: 1.4.2 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/waymark/trunk/readme.txt?rev=3181723#L174) | […](/browser/waymark/trunk/readme.txt?rev=3205103#L174) |  |
  | 174 | 174 | == Changelog == |
  | 175 | 175 |  |
  |  | 176 | = 1.4.2 = |
  |  | 177 |  |
  |  | 178 | Fixed a vulnerability where content output to the browser was not being escaped. Thanks to vgo0 for reporting this via Wordfence. |
  |  | 179 |  |
  | 176 | 180 | = 1.4.1 = |
  | 177 | 181 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3205103)
* [Zip Archive](?format=zip&new=3205103)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_3f6d741d_20250115_082709.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fwaymark%2Ftrunk%2Finc%2FAdmin%2FWaymark_Settings.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468 "Revision 3102468")
* Next Revision →
* [Blame](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/waymark/trunk/inc/Admin/Waymark_Settings.php)

---

# [source:](/browser?order=name "Go to repository root") [waymark](/browser/waymark?order=name "View waymark")/[trunk](/browser/waymark/trunk?order=name "View trunk")/[inc](/browser/waymark/trunk/inc?order=name "View inc")/[Admin](/browser/waymark/trunk/inc/Admin?order=name "View Admin")/[Waymark\_Settings.php](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?order=name "View Waymark_Settings.php")

View diff against:

View revision:

| [Last change](/changeset/3205103/waymark/trunk/inc/Admin/Waymark_Settings.php "View differences") on this file was [3205103](/changeset/3205103/ "View changeset 3205103"), checked in by morehawes, [5 weeks ago](/timeline?from=2024-12-09T20%3A11%3A24Z&precision=second "See timeline at 12/09/2024 08:11:24 PM") |
| --- |
| v1.4.2 |
| **File size:** 73.5 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | class Waymark\_Settings { |
| [4](#L4) | private $settings\_id      = 'Waymark\_Settings'; |
| [5](#L5) | private $page\_slug        = 'waymark-settings'; |
| [6](#L6) | private $default\_content  = 'waymark-settings-tab-tiles'; |
| [7](#L7) | private $current\_settings = []; |
| [8](#L8) | public $tabs              = []; |
| [9](#L9) | public $settings\_nav; |
| [10](#L10) |  |
| [11](#L11) | function \_\_construct() { |
| [12](#L12) |  |
| [13](#L13) | //Execute action? |
| [14](#L14) | if (sizeof($\_POST)) { |
| [15](#L15) | //Clear cache |
| [16](#L16) | if (isset($\_POST['Waymark\_Settings']['advanced']['performance']['clear\_cache'])) { |
| [17](#L17) | $this->execute\_action('clear\_cache'); |
| [18](#L18) | } |
| [19](#L19) | } |
| [20](#L20) |  |
| [21](#L21) | //Get current settings from DB |
| [22](#L22) | $current\_settings = get\_option('Waymark\_Settings'); |
| [23](#L23) | if (is\_array($current\_settings)) { |
| [24](#L24) | $this->current\_settings = $current\_settings; |
| [25](#L25) | } |
| [26](#L26) |  |
| [27](#L27) | /\*\* |
| [28](#L28) | \* =========================================== |
| [29](#L29) | \* =============== SETTINGS NAV ============== |
| [30](#L30) | \* =========================================== |
| [31](#L31) | \*/ |
| [32](#L32) |  |
| [33](#L33) | $this->settings\_nav = [ |
| [34](#L34) | 'label\_maps' => esc\_html\_\_('Maps'), |
| [35](#L35) | 'waymark-settings-tab-tiles' => '-- ' . esc\_html\_\_('Basemaps', 'waymark'), |
| [36](#L36) | 'waymark-settings-section-shortcode\_options' => '-- ' . esc\_html\_\_('Shortcodes', 'waymark'), |
| [37](#L37) | 'waymark-settings-section-elevation\_options' => '-- ' . esc\_html\_\_('Elevation', 'waymark'), |
| [38](#L38) | 'waymark-settings-tab-meta' => '-- ' . esc\_html\_\_('Meta', 'waymark'), |
| [39](#L39) | 'waymark-settings-section-interaction\_options' => '-- ' . esc\_html\_\_('Sleep', 'waymark'), |
| [40](#L40) | 'waymark-settings-section-cluster\_options' => '-- ' . esc\_html\_\_('Clustering', 'waymark'), |
| [41](#L41) | 'waymark-settings-section-map\_options' => '-- ' . esc\_html\_\_('Misc.', 'waymark'), |
| [42](#L42) | 'label\_overlays' => esc\_html\_\_('Overlays'), |
| [43](#L43) | 'waymark-settings-tab-markers' => '-- ' . esc\_html\_\_('Markers', 'waymark'), |
| [44](#L44) | 'waymark-settings-tab-lines' => '-- ' . esc\_html\_\_('Lines', 'waymark'), |
| [45](#L45) | 'waymark-settings-tab-shapes' => '-- ' . esc\_html\_\_('Shapes', 'waymark'), |
| [46](#L46) | 'waymark-settings-tab-properties' => '-- ' . esc\_html\_\_('Properties', 'waymark'), |
| [47](#L47) | 'label\_sources' => esc\_html\_\_('Sources'), |
| [48](#L48) | 'waymark-settings-tab-submission' => '-- ' . esc\_html\_\_('Submissions', 'waymark'), |
| [49](#L49) | 'waymark-settings-tab-misc' => esc\_html\_\_('Advanced', 'waymark'), |
| [50](#L50) | ]; |
| [51](#L51) |  |
| [52](#L52) | /\*\* |
| [53](#L53) | \* =========================================== |
| [54](#L54) | \* ================= BASEMAPS ================ |
| [55](#L55) | \* =========================================== |
| [56](#L56) | \*/ |
| [57](#L57) |  |
| [58](#L58) | $this->tabs['tiles'] = [ |
| [59](#L59) | 'name' => esc\_html\_\_('Basemaps', 'waymark'), |
| [60](#L60) | 'description' => '', |
| [61](#L61) | 'sections' => [ |
| [62](#L62) | 'layers' => [ |
| [63](#L63) | 'repeatable' => true, |
| [64](#L64) | 'title' => esc\_html\_\_('Basemaps', 'waymark'), |
| [65](#L65) | 'description' => sprintf(\_\_('<span class="waymark-lead">Waymark uses the excellent <a href="%s">OpenStreetMap</a> as it’s default Basemap and supports many <a href="%s">other providers</a>.<br /><br /><a href="%s">Thunderforest</a> and <a href="%s">Mapbox</a> are examples of providers that offer easy access to beautiful Basemaps (including satellite imagery). They require registration, but have a free usage tier.', 'waymark'), 'https://www.openstreetmap.org/fixthemap', 'https://leaflet-extras.github.io/leaflet-providers/preview/', 'https://www.thunderforest.com/', 'https://www.mapbox.com/maps/'), |
| [66](#L66) | 'footer' => sprintf(\_\_('<small><b>Pro Tip!</b> If you have more than one Basemap, you can switch between them when viewing the Map. The first listed will be used as the default, unless specified in the shortcode like this: %s. Drag to re-order, remove all to restore defaults.</small>', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; basemap=&quot;Basemap Name&quot;]'), |
| [67](#L67) | 'help' => [ |
| [68](#L68) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/basemaps')), |
| [69](#L69) | 'text' => esc\_attr\_\_('Basemap Docs &raquo;', 'waymark'), |
| [70](#L70) | ], |
| [71](#L71) | 'fields' => [ |
| [72](#L72) | 'layer\_name' => [ |
| [73](#L73) | 'name' => 'layer\_name', |
| [74](#L74) | 'id' => 'layer\_name', |
| [75](#L75) | 'type' => 'text', |
| [76](#L76) | 'class' => '', |
| [77](#L77) | 'title' => '<u>' . esc\_html\_\_('Basemap', 'waymark') . '</u> ' . esc\_html\_\_('Name', 'waymark'), |
| [78](#L78) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_name'), |
| [79](#L79) | 'tip' => sprintf(esc\_attr\_\_('The Layer Name will appear in a dropdown list shown by the Map when multiple Basemaps have been entered. You can change the default basemap in the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; basemap=&quot;Basemap Name&quot;]'), |
| [80](#L80) | 'input\_processing' => [ |
| [81](#L81) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Basemap', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [82](#L82) | ], |
| [83](#L83) | ], |
| [84](#L84) | 'layer\_url' => [ |
| [85](#L85) | 'name' => 'layer\_url', |
| [86](#L86) | 'id' => 'layer\_url', |
| [87](#L87) | 'type' => 'text', |
| [88](#L88) | 'class' => '', |
| [89](#L89) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Basemap', 'waymark') . '</span> URL', |
| [90](#L90) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_url'), |
| [91](#L91) | 'tip' => sprintf(esc\_attr\_\_('Many mapping services support the Slippy Map format. Waymark requires URLs that contain {z} (zoom level) and {x}/{y} (tile coordinates). For example the OpenCycleMap URL is %s.', 'waymark'), 'https://tile.thunderforest.com/cycle/{z}/{x}/{y}@2x.png?apikey=[your\_api\_key]'), |
| [92](#L92) | 'tip\_link' => 'https://www.thunderforest.com/docs/map-tiles-api/', |
| [93](#L93) | ], |
| [94](#L94) | 'layer\_attribution' => [ |
| [95](#L95) | 'name' => 'layer\_attribution', |
| [96](#L96) | 'id' => 'layer\_attribution', |
| [97](#L97) | 'type' => 'text', |
| [98](#L98) | 'class' => '', |
| [99](#L99) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Basemap', 'waymark') . '</span> Attribution', |
| [100](#L100) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_attribution'), |
| [101](#L101) | 'tip' => esc\_attr\_\_('Mapping services often have the requirement that attribution is displayed by the map. Text and HTML links are supported.', 'waymark'), |
| [102](#L102) | 'tip\_link' => 'https://www.thunderforest.com/terms/#attribution', |
| [103](#L103) | 'input\_processing' => [ |
| [104](#L104) | '(! strpos($param\_value, "&")) ? htmlspecialchars($param\_value) : $param\_value', |
| [105](#L105) | ], |
| [106](#L106) | ], |
| [107](#L107) | 'layer\_max\_zoom' => [ |
| [108](#L108) | 'name' => 'layer\_max\_zoom', |
| [109](#L109) | 'id' => 'layer\_max\_zoom', |
| [110](#L110) | 'type' => 'text', |
| [111](#L111) | 'class' => 'waymark-short-input', |
| [112](#L112) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Basemap', 'waymark') . '</span> ' . esc\_html\_\_('Max Zoom', 'waymark'), |
| [113](#L113) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_max\_zoom'), |
| [114](#L114) | 'tip' => esc\_attr\_\_('Set a maximum zoom level for this Basemap, the default is 18.', 'waymark'), |
| [115](#L115) | 'input\_processing' => [ |
| [116](#L116) | '(is\_numeric($param\_value) && $param\_value >= 1 && $param\_value <= 18) ? $param\_value : 18;', //Fallback |
| [117](#L117) | ], |
| [118](#L118) | ], |
| [119](#L119) | ], |
| [120](#L120) | ], |
| [121](#L121) | ], |
| [122](#L122) | ]; |
| [123](#L123) |  |
| [124](#L124) | /\*\* |
| [125](#L125) | \* =========================================== |
| [126](#L126) | \* ================= MARKERS ================= |
| [127](#L127) | \* =========================================== |
| [128](#L128) | \*/ |
| [129](#L129) |  |
| [130](#L130) | $this->tabs['markers'] = [ |
| [131](#L131) | 'name' => esc\_html\_\_('Markers', 'waymark'), |
| [132](#L132) | 'description' => '', |
| [133](#L133) | 'sections' => [ |
| [134](#L134) | 'marker\_types' => [ |
| [135](#L135) | 'repeatable' => true, |
| [136](#L136) | 'title' => esc\_html\_\_('Marker', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
| [137](#L137) | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Markers are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
| [138](#L138) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [139](#L139) | 'help' => [ |
| [140](#L140) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
| [141](#L141) | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
| [142](#L142) | ], |
| [143](#L143) | 'fields' => [ |
| [144](#L144) | 'marker\_title' => [ |
| [145](#L145) | 'name' => 'marker\_title', |
| [146](#L146) | 'id' => 'marker\_title', |
| [147](#L147) | 'type' => 'text', |
| [148](#L148) | 'class' => 'waymark-uneditable', |
| [149](#L149) | 'title' => '<u>' . esc\_html\_\_('Marker', 'waymark') . '</u> ' . esc\_html\_\_('Label', 'waymark'), |
| [150](#L150) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_title'), |
| [151](#L151) | 'tip' => esc\_attr\_\_('What kind of Marker is this? E.g. "Photo", "Grocery Store", "Warning!". Once saved, Marker labels can not be edited. The Marker Label is displayed in the Tooltip (when hovering over the Marker) and in the Info Window (once the Marker is clicked). Hide in Settings > Map > Misc. > Type Labels.', 'waymark'), |
| [152](#L152) | 'input\_processing' => [ |
| [153](#L153) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Marker', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [154](#L154) | ], |
| [155](#L155) | ], |
| [156](#L156) | 'marker\_shape' => [ |
| [157](#L157) | 'name' => 'marker\_shape', |
| [158](#L158) | 'id' => 'marker\_shape', |
| [159](#L159) | 'type' => 'select', |
| [160](#L160) | 'class' => '', |
| [161](#L161) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Shape', 'waymark'), |
| [162](#L162) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_shape'), |
| [163](#L163) | 'tip' => esc\_attr\_\_('Which shape of Marker to use. Circles and Squares are centered at the specified location, Markers point down to that location.', 'waymark'), |
| [164](#L164) | 'options' => [ |
| [165](#L165) | 'marker' => esc\_html\_\_('Marker', 'waymark'), |
| [166](#L166) | 'circle' => esc\_html\_\_('Circle', 'waymark'), |
| [167](#L167) | 'rectangle' => esc\_html\_\_('Square', 'waymark'), |
| [168](#L168) | ], |
| [169](#L169) | ], |
| [170](#L170) | 'marker\_size' => [ |
| [171](#L171) | 'name' => 'marker\_size', |
| [172](#L172) | 'id' => 'marker\_size', |
| [173](#L173) | 'type' => 'select', |
| [174](#L174) | 'class' => '', |
| [175](#L175) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Size', 'waymark'), |
| [176](#L176) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_size'), |
| [177](#L177) | 'tip' => esc\_attr\_\_('Which size of Marker to use.', 'waymark'), |
| [178](#L178) | 'options' => [ |
| [179](#L179) | 'small' => esc\_html\_\_('Small', 'waymark'), |
| [180](#L180) | 'medium' => esc\_html\_\_('Medium', 'waymark'), |
| [181](#L181) | 'large' => esc\_html\_\_('Large', 'waymark'), |
| [182](#L182) | ], |
| [183](#L183) | ], |
| [184](#L184) | 'marker\_colour' => [ |
| [185](#L185) | 'name' => 'marker\_colour', |
| [186](#L186) | 'id' => 'marker\_colour', |
| [187](#L187) | 'type' => 'text', |
| [188](#L188) | 'class' => 'waymark-short-input', |
| [189](#L189) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Background', 'waymark'), |
| [190](#L190) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_colour'), |
| [191](#L191) | 'tip' => esc\_attr\_\_('The Marker background colour. Click "Select Colour" to select.', 'waymark'), |
| [192](#L192) | 'input\_processing' => [ |
| [193](#L193) | '(! empty($param\_value)) ? $param\_value : "white";', //Fallback |
| [194](#L194) | ], |
| [195](#L195) | ], |
| [196](#L196) | 'marker\_display' => [ |
| [197](#L197) | 'name' => 'marker\_display', |
| [198](#L198) | 'id' => 'marker\_display', |
| [199](#L199) | 'type' => 'boolean', |
| [200](#L200) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Show Initially', 'waymark'), |
| [201](#L201) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_display'), |
| [202](#L202) | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
| [203](#L203) | 'input\_processing' => [ |
| [204](#L204) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [205](#L205) | ], |
| [206](#L206) | ], |
| [207](#L207) | 'marker\_submission' => [ |
| [208](#L208) | 'name' => 'marker\_submission', |
| [209](#L209) | 'id' => 'marker\_submission', |
| [210](#L210) | 'type' => 'boolean', |
| [211](#L211) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Submissions?', 'waymark'), |
| [212](#L212) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_submission'), |
| [213](#L213) | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
| [214](#L214) | 'input\_processing' => [ |
| [215](#L215) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [216](#L216) | ], |
| [217](#L217) | ], |
| [218](#L218) | 'icon\_type' => [ |
| [219](#L219) | 'name' => 'icon\_type', |
| [220](#L220) | 'id' => 'icon\_type', |
| [221](#L221) | 'type' => 'select', |
| [222](#L222) | 'class' => '', |
| [223](#L223) | 'title' => '<span style="display:inline-block;min-width:50px">' . esc\_html\_\_('Icon', 'waymark') . '</span>' . esc\_html\_\_('Type', 'waymark'), |
| [224](#L224) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'icon\_type'), |
| [225](#L225) | 'tip' => esc\_attr\_\_('Font Icons are available from Font Awesome and Ionic Icons. Simple Text or Emojis are supported, as well as custom HTML. So you can pretty much use anything you like!', 'waymark'), |
| [226](#L226) | 'tip\_link' => 'https://emojifinder.com/', |
| [227](#L227) | 'options' => [ |
| [228](#L228) | 'icon' => esc\_html\_\_('Font Icon', 'waymark'), |
| [229](#L229) | 'text' => esc\_html\_\_('Text (or Emoji!)', 'waymark'), |
| [230](#L230) | 'html' => esc\_html\_\_('HTML', 'waymark'), |
| [231](#L231) | ], |
| [232](#L232) | ], |
| [233](#L233) | 'marker\_icon' => [ |
| [234](#L234) | 'name' => 'marker\_icon', |
| [235](#L235) | 'id' => 'marker\_icon', |
| [236](#L236) | 'type' => 'text', |
| [237](#L237) | 'class' => 'waymark-short-input', |
| [238](#L238) | 'title' => '<span class="waymark-invisible" style="display:inline-block;min-width:50px">' . esc\_html\_\_('Icon', 'waymark') . '</span><span class="waymark-icon-type">' . esc\_html\_\_('Name', 'waymark') . '</span>', |
| [239](#L239) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_icon'), |
| [240](#L240) | 'tip' => esc\_attr\_\_('The desired icon name from Ionicons or Font Awesome, e.g. "ion-camera", or "fa-camera". Click the links to see the full list of icons available.|Text to display inside the Marker, in the chosen colour. Space is very limited! Pro Tip: adjust text size using CSS; for all Markers: .waymark-icon-text{font-size: 18px}, or by Type: .waymark-marker-photo .waymark-icon-text{...}. Use your browser\'s inspector to dig for Type class names.|The HTML entered will be added inside each Marker. Pro Tip! HTML Entities supported (e.g. &amp;cross; as well as Unicode and Emojis!), or provide HTML to integrate with other Icon providers.', 'waymark'), |
| [241](#L241) | 'input\_processing' => [ |
| [242](#L242) | '(strpbrk($param\_value, "\">")) ? htmlspecialchars($param\_value) : $param\_value', |
| [243](#L243) | ], |
| [244](#L244) | 'append' => '<div class="waymark-icons-help"><a href="https://ionic.io/ionicons/v2/cheatsheet.html">Ionic Icons</a><a href="https://fontawesome.com/v4.7.0/cheatsheet/">Font Awesome</a></div>', |
| [245](#L245) | ], |
| [246](#L246) | 'icon\_colour' => [ |
| [247](#L247) | 'name' => 'icon\_colour', |
| [248](#L248) | 'id' => 'icon\_colour', |
| [249](#L249) | 'type' => 'text', |
| [250](#L250) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [251](#L251) | 'title' => '<span class="waymark-invisible" style="display:inline-block;min-width:50px">' . esc\_html\_\_('Icon', 'waymark') . '</span>' . esc\_html\_\_('Colour', 'waymark'), |
| [252](#L252) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'icon\_colour'), |
| [253](#L253) | 'tip' => esc\_attr\_\_('The colour of the icon. Click "Select Colour" to select.', 'waymark'), |
| [254](#L254) | 'input\_processing' => [ |
| [255](#L255) | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
| [256](#L256) | ], |
| [257](#L257) | ], |
| [258](#L258) | ], |
| [259](#L259) | ], |
| [260](#L260) | ], |
| [261](#L261) | ]; |
| [262](#L262) |  |
| [263](#L263) | /\*\* |
| [264](#L264) | \* =========================================== |
| [265](#L265) | \* ================== LINES ================== |
| [266](#L266) | \* =========================================== |
| [267](#L267) | \*/ |
| [268](#L268) |  |
| [269](#L269) | $this->tabs['lines'] = [ |
| [270](#L270) | 'name' => esc\_html\_\_('Lines', 'waymark'), |
| [271](#L271) | 'description' => '', |
| [272](#L272) | 'sections' => [ |
| [273](#L273) | 'line\_types' => [ |
| [274](#L274) | 'repeatable' => true, |
| [275](#L275) | 'title' => esc\_html\_\_('Line', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
| [276](#L276) | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Lines are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
| [277](#L277) | 'help' => [ |
| [278](#L278) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
| [279](#L279) | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
| [280](#L280) | ], |
| [281](#L281) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [282](#L282) | 'fields' => [ |
| [283](#L283) | 'line\_title' => [ |
| [284](#L284) | 'name' => 'line\_title', |
| [285](#L285) | 'id' => 'line\_title', |
| [286](#L286) | 'type' => 'text', |
| [287](#L287) | 'class' => 'waymark-uneditable', |
| [288](#L288) | 'title' => '<u>' . esc\_html\_\_('Line', 'waymark') . '</u> ' . esc\_html\_\_('Label', 'waymark'), |
| [289](#L289) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_title'), |
| [290](#L290) | 'tip' => esc\_attr\_\_('What kind of Line is this? E.g. "Easy", "Walking Only", "Dark Red". The Line Label is displayed in the Tooltip (when hovering over the Line) and in the Line Info Window. Once saved, Line labels can not be edited.', 'waymark'), |
| [291](#L291) | 'input\_processing' => [ |
| [292](#L292) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Line', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [293](#L293) | ], |
| [294](#L294) | ], |
| [295](#L295) | 'line\_colour' => [ |
| [296](#L296) | 'name' => 'line\_colour', |
| [297](#L297) | 'id' => 'line\_colour', |
| [298](#L298) | 'type' => 'text', |
| [299](#L299) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [300](#L300) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Colour', 'waymark'), |
| [301](#L301) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_colour'), |
| [302](#L302) | 'tip' => esc\_attr\_\_('The colour of the Line. Click "Select Colour" to select.', 'waymark'), |
| [303](#L303) | 'input\_processing' => [ |
| [304](#L304) | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
| [305](#L305) | ], |
| [306](#L306) | ], |
| [307](#L307) | 'line\_weight' => [ |
| [308](#L308) | 'name' => 'line\_weight', |
| [309](#L309) | 'id' => 'line\_weight', |
| [310](#L310) | 'type' => 'text', |
| [311](#L311) | 'class' => 'waymark-short-input', |
| [312](#L312) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Weight', 'waymark'), |
| [313](#L313) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_weight'), |
| [314](#L314) | 'tip' => esc\_attr\_\_('The width of the Line, in pixels.', 'waymark'), |
| [315](#L315) | 'input\_processing' => [ |
| [316](#L316) | '(is\_numeric($param\_value)) ? $param\_value : 3;', //Fallback |
| [317](#L317) | ], |
| [318](#L318) | ], |
| [319](#L319) | 'line\_opacity' => [ |
| [320](#L320) | 'name' => 'line\_opacity', |
| [321](#L321) | 'id' => 'line\_opacity', |
| [322](#L322) | 'type' => 'text', |
| [323](#L323) | 'class' => 'waymark-short-input', |
| [324](#L324) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Opacity', 'waymark'), |
| [325](#L325) | 'default' => Waymark\_Config::get\_default('lines', 'line\_types', 'line\_opacity'), |
| [326](#L326) | 'tip' => esc\_attr\_\_('The opacity of the Line, between 0.0 and 1.0 (e.g. "0.5").', 'waymark'), |
| [327](#L327) | 'input\_processing' => [ |
| [328](#L328) | '(is\_numeric($param\_value) && $param\_value > 0 && $param\_value <= 1) ? $param\_value : 0.7;', //Fallback |
| [329](#L329) | ], |
| [330](#L330) | ], |
| [331](#L331) | 'line\_display' => [ |
| [332](#L332) | 'name' => 'line\_display', |
| [333](#L333) | 'id' => 'line\_display', |
| [334](#L334) | 'type' => 'boolean', |
| [335](#L335) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Show Initially', 'waymark'), |
| [336](#L336) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_display'), |
| [337](#L337) | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
| [338](#L338) | 'input\_processing' => [ |
| [339](#L339) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [340](#L340) | ], |
| [341](#L341) | ], |
| [342](#L342) | 'line\_submission' => [ |
| [343](#L343) | 'name' => 'line\_submission', |
| [344](#L344) | 'id' => 'line\_submission', |
| [345](#L345) | 'type' => 'boolean', |
| [346](#L346) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Submissions?', 'waymark'), |
| [347](#L347) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_submission'), |
| [348](#L348) | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
| [349](#L349) | 'input\_processing' => [ |
| [350](#L350) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [351](#L351) | ], |
| [352](#L352) | ], |
| [353](#L353) | ], |
| [354](#L354) | ], |
| [355](#L355) | ], |
| [356](#L356) | ]; |
| [357](#L357) |  |
| [358](#L358) | /\*\* |
| [359](#L359) | \* =========================================== |
| [360](#L360) | \* ================= SHAPES ================== |
| [361](#L361) | \* =========================================== |
| [362](#L362) | \*/ |
| [363](#L363) |  |
| [364](#L364) | $this->tabs['shapes'] = [ |
| [365](#L365) | 'name' => esc\_html\_\_('Shapes', 'waymark'), |
| [366](#L366) | 'description' => '', |
| [367](#L367) | 'sections' => [ |
| [368](#L368) | 'shape\_types' => [ |
| [369](#L369) | 'repeatable' => true, |
| [370](#L370) | 'title' => esc\_html\_\_('Shape', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
| [371](#L371) | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Shapes are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
| [372](#L372) | 'help' => [ |
| [373](#L373) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
| [374](#L374) | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
| [375](#L375) | ], |
| [376](#L376) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [377](#L377) | 'fields' => [ |
| [378](#L378) | 'shape\_title' => [ |
| [379](#L379) | 'name' => 'shape\_title', |
| [380](#L380) | 'id' => 'shape\_title', |
| [381](#L381) | 'type' => 'text', |
| [382](#L382) | 'class' => 'waymark-uneditable', |
| [383](#L383) | 'title' => '<u>' . esc\_html\_\_('Shape', 'waymark') . '</u> ' . esc\_html\_\_('Label', 'waymark'), |
| [384](#L384) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_title'), |
| [385](#L385) | 'tip' => esc\_attr\_\_('What kind of Shape is this? E.g. "Park", "Danger!", "Light Blue". The Shape Label is displayed in the Tooltip (when hovering over the Shape) and in the Shape Info Window. Once saved, Shape labels can not be edited.', 'waymark'), |
| [386](#L386) | 'input\_processing' => [ |
| [387](#L387) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Shape', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [388](#L388) | ], |
| [389](#L389) | ], |
| [390](#L390) | 'shape\_colour' => [ |
| [391](#L391) | 'name' => 'shape\_colour', |
| [392](#L392) | 'id' => 'shape\_colour', |
| [393](#L393) | 'type' => 'text', |
| [394](#L394) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [395](#L395) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Colour', 'waymark'), |
| [396](#L396) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_colour'), |
| [397](#L397) | 'tip' => esc\_attr\_\_('The colour of the Shape. Click "Select Colour" to select.', 'waymark'), |
| [398](#L398) | 'input\_processing' => [ |
| [399](#L399) | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
| [400](#L400) | ], |
| [401](#L401) | ], |
| [402](#L402) | 'fill\_opacity' => [ |
| [403](#L403) | 'name' => 'fill\_opacity', |
| [404](#L404) | 'id' => 'fill\_opacity', |
| [405](#L405) | 'type' => 'text', |
| [406](#L406) | 'class' => 'waymark-short-input', |
| [407](#L407) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Fill Opacity', 'waymark'), |
| [408](#L408) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'fill\_opacity'), |
| [409](#L409) | 'tip' => esc\_attr\_\_('The opacity of the inside of the shape, between 0.0 and 1.0 (e.g. "0.5").', 'waymark'), |
| [410](#L410) | 'input\_processing' => [ |
| [411](#L411) | '(is\_numeric($param\_value) && $param\_value > 0 && $param\_value <= 1) ? $param\_value : 0.5;', //Fallback |
| [412](#L412) | ], |
| [413](#L413) | ], |
| [414](#L414) | 'shape\_display' => [ |
| [415](#L415) | 'name' => 'shape\_display', |
| [416](#L416) | 'id' => 'shape\_display', |
| [417](#L417) | 'type' => 'boolean', |
| [418](#L418) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Show Initially', 'waymark'), |
| [419](#L419) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_display'), |
| [420](#L420) | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
| [421](#L421) | 'input\_processing' => [ |
| [422](#L422) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [423](#L423) | ], |
| [424](#L424) | ], |
| [425](#L425) | 'shape\_submission' => [ |
| [426](#L426) | 'name' => 'shape\_submission', |
| [427](#L427) | 'id' => 'shape\_submission', |
| [428](#L428) | 'type' => 'boolean', |
| [429](#L429) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Submissions?', 'waymark'), |
| [430](#L430) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_submission'), |
| [431](#L431) | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
| [432](#L432) | 'input\_processing' => [ |
| [433](#L433) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [434](#L434) | ], |
| [435](#L435) | ], |
| [436](#L436) | ], |
| [437](#L437) | ], |
| [438](#L438) | ], |
| [439](#L439) | ]; |
| [440](#L440) |  |
| [441](#L441) | /\*\* |
| [442](#L442) | \* =========================================== |
| [443](#L443) | \* =================== META ================== |
| [444](#L444) | \* =========================================== |
| [445](#L445) | \*/ |
| [446](#L446) |  |
| [447](#L447) | $meta\_group\_options = Waymark\_Helper::repeatable\_setting\_option\_array('meta', 'groups', 'group\_title'); |
| [448](#L448) | $meta\_group\_options = array\_merge(['' => 'None'], $meta\_group\_options); |
| [449](#L449) |  |
| [450](#L450) | $this->tabs['meta'] = [ |
| [451](#L451) | 'name' => esc\_html\_\_('Meta', 'waymark'), |
| [452](#L452) | 'description' => '', |
| [453](#L453) | 'sections' => [ |
| [454](#L454) | 'inputs' => [ |
| [455](#L455) | 'repeatable' => true, |
| [456](#L456) | 'title' => esc\_html\_\_('Meta', 'waymark'), |
| [457](#L457) | 'description' => '<span class="waymark-lead">' . sprintf(\_\_('Create additional input fields that appear underneath the Map Editor. Any Meta that has been input is displayed on the <a href="%s">Map Details</a> page, and can also be displayed by the Shortcode.', 'waymark'), 'https://www.waymark.dev/map/route-map/') . '</span>', |
| [458](#L458) | 'help' => [ |
| [459](#L459) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/meta')), |
| [460](#L460) | 'text' => esc\_attr\_\_('Meta Docs &raquo;', 'waymark'), |
| [461](#L461) | ], |
| [462](#L462) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [463](#L463) | 'fields' => [ |
| [464](#L464) | 'meta\_title' => [ |
| [465](#L465) | 'name' => 'meta\_title', |
| [466](#L466) | 'id' => 'meta\_title', |
| [467](#L467) | 'type' => 'text', |
| [468](#L468) | 'class' => '', |
| [469](#L469) | 'title' => '<u>' . esc\_html\_\_('Meta', 'waymark') . '</u> ' . esc\_html\_\_('Title', 'waymark'), |
| [470](#L470) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_title'), |
| [471](#L471) | 'tip' => esc\_attr\_\_('The title appears next to the input field.', 'waymark'), |
| [472](#L472) | 'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
| [473](#L473) | 'input\_processing' => [ |
| [474](#L474) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Meta', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [475](#L475) | ], |
| [476](#L476) | ], |
| [477](#L477) | 'meta\_default' => [ |
| [478](#L478) | 'name' => 'meta\_default', |
| [479](#L479) | 'id' => 'meta\_default', |
| [480](#L480) | 'type' => 'text', |
| [481](#L481) | 'class' => '', |
| [482](#L482) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Default', 'waymark'), |
| [483](#L483) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_default'), |
| [484](#L484) | 'tip' => esc\_attr\_\_('The default value for the input field. For Select and Multi-Select enter the option/comma-separated options to be selected by default.', 'waymark'), |
| [485](#L485) | ], |
| [486](#L486) | 'meta\_tip' => [ |
| [487](#L487) | 'name' => 'meta\_tip', |
| [488](#L488) | 'id' => 'meta\_tip', |
| [489](#L489) | 'type' => 'text', |
| [490](#L490) | 'class' => '', |
| [491](#L491) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Tip', 'waymark'), |
| [492](#L492) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_tip'), |
| [493](#L493) | 'tip' => esc\_attr\_\_('A tip provides additional information about an input field... just like this!', 'waymark'), |
| [494](#L494) | ], |
| [495](#L495) | 'meta\_type' => [ |
| [496](#L496) | 'name' => 'meta\_type', |
| [497](#L497) | 'id' => 'meta\_type', |
| [498](#L498) | 'type' => 'select', |
| [499](#L499) | 'class' => '', |
| [500](#L500) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Type', 'waymark'), |
| [501](#L501) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_type'), |
| [502](#L502) | 'tip' => esc\_attr\_\_('The type of input field to use.', 'waymark'), |
| [503](#L503) | 'options' => [ |
| [504](#L504) | 'text' => esc\_html\_\_('Text', 'waymark'), |
| [505](#L505) | 'textarea' => esc\_html\_\_('Textarea', 'waymark'), |
| [506](#L506) | 'textarea\_rich' => esc\_html\_\_('Rich Text', 'waymark'), |
| [507](#L507) | 'select' => esc\_html\_\_('Select', 'waymark'), |
| [508](#L508) | 'select\_multi' => esc\_html\_\_('Multi-Select', 'waymark'), |
| [509](#L509) | ], |
| [510](#L510) | ], |
| [511](#L511) | 'meta\_options' => [ |
| [512](#L512) | 'name' => 'meta\_options', |
| [513](#L513) | 'id' => 'meta\_options', |
| [514](#L514) | 'type' => 'text', |
| [515](#L515) | 'class' => '', |
| [516](#L516) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Options', 'waymark'), |
| [517](#L517) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_options'), |
| [518](#L518) | 'tip' => esc\_attr\_\_('A comma-separated list of options for the input.', 'waymark'), |
| [519](#L519) | ], |
| [520](#L520) | 'meta\_group' => [ |
| [521](#L521) | 'name' => 'meta\_group', |
| [522](#L522) | 'id' => 'meta\_group', |
| [523](#L523) | 'type' => 'select', |
| [524](#L524) | 'options' => $meta\_group\_options, |
| [525](#L525) | 'class' => (sizeof($meta\_group\_options) === 1) ? 'waymark-hidden' : '', |
| [526](#L526) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Group', 'waymark'), |
| [527](#L527) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_group'), |
| [528](#L528) | 'tip' => esc\_attr\_\_('Which group this Meta belongs to (if any). Meta in the same group will be displayed together when editing and viewing Maps. Meta not in a group will be displayed above any groups.', 'waymark'), |
| [529](#L529) | ], |
| [530](#L530) | 'meta\_shortcode' => [ |
| [531](#L531) | 'name' => 'meta\_shortcode', |
| [532](#L532) | 'id' => 'meta\_shortcode', |
| [533](#L533) | 'type' => 'boolean', |
| [534](#L534) | 'class' => '', |
| [535](#L535) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('In Shortcode?', 'waymark'), |
| [536](#L536) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_shortcode'), |
| [537](#L537) | 'tip' => esc\_attr\_\_('Whether this content should be displayed when embedding a Map using the Shortcode.', 'waymark'), |
| [538](#L538) | ], |
| [539](#L539) | 'meta\_submission' => [ |
| [540](#L540) | 'name' => 'meta\_submission', |
| [541](#L541) | 'id' => 'meta\_submission', |
| [542](#L542) | 'type' => 'boolean', |
| [543](#L543) | 'class' => '', |
| [544](#L544) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('In Submissions?', 'waymark'), |
| [545](#L545) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_submission'), |
| [546](#L546) | 'tip' => esc\_attr\_\_('Make this Meta available in front-end Submissions?', 'waymark'), |
| [547](#L547) | ], |
| [548](#L548) | ], |
| [549](#L549) | ], |
| [550](#L550) | 'groups' => [ |
| [551](#L551) | 'repeatable' => true, |
| [552](#L552) | 'title' => esc\_html\_\_('Groups', 'waymark'), |
| [553](#L553) | 'description' => '<span class="waymark-lead">' . \_\_('Create groups to organise your Map Meta. Meta in the same group will be displayed together when editing and viewing Maps.', 'waymark') . '</span>', |
| [554](#L554) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> Drag to re-order, remove all to disable groups.', 'waymark') . '</small>', |
| [555](#L555) | 'fields' => [ |
| [556](#L556) | 'group\_title' => [ |
| [557](#L557) | 'name' => 'group\_title', |
| [558](#L558) | 'id' => 'group\_title', |
| [559](#L559) | 'type' => 'text', |
| [560](#L560) | 'class' => '', |
| [561](#L561) | 'title' => '<u>' . esc\_html\_\_('Group', 'waymark') . '</u> ' . esc\_html\_\_('Title', 'waymark'), |
| [562](#L562) | 'default' => '', |
| [563](#L563) | 'tip' => esc\_attr\_\_('The title appears above the Meta in that group.', 'waymark'), |
| [564](#L564) | //                                                      'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
| [565](#L565) | //                                                      'input\_processing' => array( |
| [566](#L566) | //                                                              '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Meta', 'waymark') . ' ' . substr(md5(rand(0,999999)), 0, 5) . '";'   //Fallback |
| [567](#L567) | //                                                      ) |
| [568](#L568) | ], |
| [569](#L569) | ], |
| [570](#L570) | ], |
| [571](#L571) | ], |
| [572](#L572) | ]; |
| [573](#L573) |  |
| [574](#L574) | /\*\* |
| [575](#L575) | \* =========================================== |
| [576](#L576) | \* =============== PROPERTIES ================ |
| [577](#L577) | \* =========================================== |
| [578](#L578) | \*/ |
| [579](#L579) |  |
| [580](#L580) | $this->tabs['properties'] = [ |
| [581](#L581) | 'name' => esc\_html\_\_('Properties', 'waymark'), |
| [582](#L582) | 'description' => '', |
| [583](#L583) | 'sections' => [ |
| [584](#L584) | 'props' => [ |
| [585](#L585) | 'repeatable' => true, |
| [586](#L586) | 'title' => esc\_html\_\_('Properties', 'waymark'), |
| [587](#L587) | 'description' => '<span class="waymark-lead">' . \_\_('Read <b><a href="https://geojson.org/">GeoJSON</a></b> feature properties when importing.', 'waymark') . '</span><br /><br />' . \_\_('If Waymark finds data for the property keys below it will stored when it is imported. These can be automatically appended to the Overlay Description, or accessed programatically the <code>layer.feature.properties</code> Object.', 'waymark'), |
| [588](#L588) | 'footer' => '<small>' . \_\_(sprintf('For example, the properties below can be accessed through the %s, %s, %s Property Keys:', '<code>created\_date</code>', '<code>updated\_date</code>', '<code>expires\_date</code>'), 'waymark') . '</small> |
| [589](#L589) | <pre><code>{ |
| [590](#L590) | "type": "FeatureCollection", |
| [591](#L591) | "features": [ |
| [592](#L592) | { |
| [593](#L593) | "geometry": { ... }, |
| [594](#L594) | "type": "Feature", |
| [595](#L595) | "properties": { |
| [596](#L596) | "created\_date": "2021-07-15T00:42:41Z", |
| [597](#L597) | "updated\_date": "2021-07-16T00:42:41Z", |
| [598](#L598) | "expires\_date": "2021-07-17T00:42:41Z" |
| [599](#L599) | } |
| [600](#L600) | } |
| [601](#L601) | ] |
| [602](#L602) | } |
| [603](#L603) | </code></pre>', |
| [604](#L604) |  |
| [605](#L605) | //                                      'help' => array( |
| [606](#L606) | //                                              'url' => esc\_attr(Waymark\_Helper::site\_url('docs/meta')), |
| [607](#L607) | //                                              'text' => esc\_attr\_\_('Meta Docs &raquo;', 'waymark') |
| [608](#L608) | //                                      ), |
| [609](#L609) | 'fields' => [ |
| [610](#L610) | 'property\_key' => [ |
| [611](#L611) | 'name' => 'property\_key', |
| [612](#L612) | 'id' => 'property\_key', |
| [613](#L613) | 'type' => 'text', |
| [614](#L614) | 'class' => '', |
| [615](#L615) | 'title' => '<u>' . esc\_html\_\_('Property', 'waymark') . '</u> ' . esc\_html\_\_('Key', 'waymark'), |
| [616](#L616) | 'default' => Waymark\_Config::get\_setting('property', 'props', 'property\_key'), |
| [617](#L617) | 'tip' => esc\_attr\_\_('This is the key associated with the data you are trying to access, i.e. "properties": {"property\_key": "Some content here"}', 'waymark'), |
| [618](#L618) | //                                                      'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
| [619](#L619) | 'input\_processing' => [ |
| [620](#L620) | 'preg\_replace("/[^0-9a-zA-Z -\_.]/", "", $param\_value);', |
| [621](#L621) | ], |
| [622](#L622) | ], |
| [623](#L623) | 'property\_title' => [ |
| [624](#L624) | 'name' => 'property\_title', |
| [625](#L625) | 'id' => 'property\_title', |
| [626](#L626) | 'type' => 'text', |
| [627](#L627) | 'class' => '', |
| [628](#L628) | 'title' => '<u><span class="waymark-invisible">' . esc\_html\_\_('Property', 'waymark') . '</span></u> ' . esc\_html\_\_('Title', 'waymark'), |
| [629](#L629) | 'default' => Waymark\_Config::get\_setting('property', 'props', 'property\_title'), |
| [630](#L630) | 'tip' => esc\_attr\_\_('The value for this property will be added to the Overlay Description under this title.', 'waymark'), |
| [631](#L631) | //                                                      'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '' |
| [632](#L632) | ], |
| [633](#L633) | ], |
| [634](#L634) | ], |
| [635](#L635) |  |
| [636](#L636) | 'options' => [ |
| [637](#L637) | 'title' => esc\_html\_\_('Options', 'waymark'), |
| [638](#L638) | 'description' => 'Append listed Properties to the Overlay Description.', |
| [639](#L639) | 'footer' => sprintf(\_\_('<small><b>Pro Tip!</b> Properties are added to the Overlay Description with class names that can be used to target them, e.g. %s.</small>', 'waymark'), '<code class="waymark-code" style="display:inline">&lt;p class="waymark-property waymark-property-property\_key"&gt;&lt;b&gt;property\_title&lt;/b&gt;&lt;br&gt;proprty\_value&lt;/p&gt;</code>'), |
| [640](#L640) | 'fields' => [ |
| [641](#L641) | 'description\_append' => [ |
| [642](#L642) | 'name' => 'description\_append', |
| [643](#L643) | 'id' => 'description\_append', |
| [644](#L644) | 'type' => 'boolean', |
| [645](#L645) | 'title' => esc\_html\_\_('Append', 'waymark'), |
| [646](#L646) | 'default' => Waymark\_Config::get\_setting('property', 'options', 'description\_append'), |
| [647](#L647) | 'tip' => esc\_attr\_\_('Append the property value to the Overlay Description.', 'waymark'), |
| [648](#L648) |  |
| [649](#L649) | ], |
| [650](#L650) | ], |
| [651](#L651) | ], |
| [652](#L652) | ], |
| [653](#L653) | ]; |
| [654](#L654) |  |
| [655](#L655) | //Prepare Basemap values for editor option |
| [656](#L656) | $tile\_layers = Waymark\_Config::get\_item('tiles', 'layers', true); |
| [657](#L657) |  |
| [658](#L658) | //Each layer |
| [659](#L659) | $basemap\_options = []; |
| [660](#L660) | foreach ($tile\_layers as $layer) { |
| [661](#L661) | //If name exists |
| [662](#L662) | if (array\_key\_exists('layer\_name', $layer)) { |
| [663](#L663) | //Add as option |
| [664](#L664) | $basemap\_options[$layer['layer\_name']] = $layer['layer\_name']; |
| [665](#L665) | } |
| [666](#L666) | } |
| [667](#L667) |  |
| [668](#L668) | /\*\* |
| [669](#L669) | \* =========================================== |
| [670](#L670) | \* =============== SUBMISSIONS =============== |
| [671](#L671) | \* =========================================== |
| [672](#L672) | \*/ |
| [673](#L673) |  |
| [674](#L674) | //Build list of Collections to use as <select> options |
| [675](#L675) | $collection\_objects = get\_terms([ |
| [676](#L676) | 'taxonomy' => 'waymark\_collection', |
| [677](#L677) | 'hide\_empty' => false, |
| [678](#L678) | ]); |
| [679](#L679) | $collection\_array = [ |
| [680](#L680) | '' => ' - ', |
| [681](#L681) | ]; |
| [682](#L682) | foreach ($collection\_objects as $collection) { |
| [683](#L683) | $collection\_array[$collection->term\_id] = $collection->name; |
| [684](#L684) | } |
| [685](#L685) |  |
| [686](#L686) | //Roles |
| [687](#L687) | if (! function\_exists('get\_editable\_roles')) { |
| [688](#L688) | require\_once ABSPATH . 'wp-admin/includes/user.php'; |
| [689](#L689) | } |
| [690](#L690) |  |
| [691](#L691) | $role\_options = []; |
| [692](#L692) | foreach (get\_editable\_roles() as $key => $role) { |
| [693](#L693) | $role\_options[$key] = $role['name']; |
| [694](#L694) | } |
| [695](#L695) | unset($role\_options['administrator']); |
| [696](#L696) |  |
| [697](#L697) | //Public upload dir |
| [698](#L698) | $upload\_dir = wp\_upload\_dir(); |
| [699](#L699) | $upload\_dir['subdir'] = ($upload\_dir['subdir']) ? $upload\_dir['subdir'] : '/'; |
| [700](#L700) |  |
| [701](#L701) | $this->tabs['submission'] = [ |
| [702](#L702) | 'name' => esc\_html\_\_('Submissions', 'waymark'), |
| [703](#L703) | 'sections' => [ |
| [704](#L704) | //Global |
| [705](#L705) | 'global' => [ |
| [706](#L706) | 'title' => esc\_html\_\_('Front-End Submissions', 'waymark'), |
| [707](#L707) | 'description' => sprintf(\_\_('Use the %s Shortcode to allow Map submissions from the front-end of your site.', 'waymark'), '<span class="waymark-code">[Waymark content="submission"]</span>'), |
| [708](#L708) | 'help' => [ |
| [709](#L709) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/submissions')), |
| [710](#L710) | 'text' => esc\_attr\_\_('Submission Docs &raquo;', 'waymark'), |
| [711](#L711) | ], |
| [712](#L712) | 'fields' => [ |
| [713](#L713) | 'submission\_enable' => [ |
| [714](#L714) | 'name' => 'submission\_enable', |
| [715](#L715) | 'id' => 'submission\_enable', |
| [716](#L716) | 'type' => 'boolean', |
| [717](#L717) | 'title' => esc\_html\_\_('Allow Submissions', 'waymark'), |
| [718](#L718) | 'default' => Waymark\_Config::get\_setting('submission', 'global', 'submission\_enable'), |
| [719](#L719) | 'tip' => esc\_attr\_\_('Submissions will be available only to site administrators by default, but can also be allowed for registered users or even to guests without registration.', 'waymark'), |
| [720](#L720) | ], |
| [721](#L721) | ], |
| [722](#L722) | ], |
| [723](#L723) | //By role |
| [724](#L724) | 'from\_users' => [ |
| [725](#L725) | 'title' => esc\_html\_\_('User Submissions', 'waymark'), |
| [726](#L726) | 'description' => esc\_html\_\_('Allow registered users to create Maps from the front-end.', 'waymark'), |
| [727](#L727) | 'fields' => [ |
| [728](#L728) | 'submission\_roles' => [ |
| [729](#L729) | 'name' => 'submission\_roles', |
| [730](#L730) | 'id' => 'submission\_roles', |
| [731](#L731) | 'type' => 'select\_multi', |
| [732](#L732) | 'class' => 'waymark-align-top', |
| [733](#L733) | 'title' => esc\_html\_\_('Allow From', 'waymark'), |
| [734](#L734) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_roles'), |
| [735](#L735) | 'tip' => esc\_attr\_\_('Users with the selected roles will be able to make Submissions through the front-end', 'waymark'), |
| [736](#L736) | 'options' => $role\_options, |
| [737](#L737) | ], |
| [738](#L738) | 'submission\_features' => [ |
| [739](#L739) | 'name' => 'submission\_features', |
| [740](#L740) | 'id' => 'submission\_users\_features', |
| [741](#L741) | 'type' => 'select\_multi', |
| [742](#L742) | 'class' => 'waymark-align-top', |
| [743](#L743) | 'title' => esc\_html\_\_('Editor Features', 'waymark'), |
| [744](#L744) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_features'), |
| [745](#L745) | 'tip' => esc\_attr\_\_('What features to offer in the Editor. Important! Uploaded images are added to the Media Library, reading from file does not keep a copy of the file on the server. Whether an individual Meta input is displayed can be set in the Settings > Map > Meta.', 'waymark'), |
| [746](#L746) | 'options' => [ |
| [747](#L747) | 'draw' => esc\_attr\_\_('Drawing', 'waymark'), |
| [748](#L748) | 'photo' => esc\_attr\_\_('Image upload', 'waymark'), |
| [749](#L749) | 'file' => esc\_attr\_\_('Read from File', 'waymark'), |
| [750](#L750) | 'title' => esc\_attr\_\_('Title', 'waymark'), |
| [751](#L751) | 'meta' => esc\_attr\_\_('Meta', 'waymark'), |
| [752](#L752) | ], |
| [753](#L753) | ], |
| [754](#L754) | 'submission\_status' => [ |
| [755](#L755) | 'name' => 'submission\_status', |
| [756](#L756) | 'id' => 'submission\_users\_status', |
| [757](#L757) | 'type' => 'select', |
| [758](#L758) | 'title' => esc\_html\_\_('Default Status', 'waymark'), |
| [759](#L759) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_status'), |
| [760](#L760) | 'tip' => esc\_attr\_\_('This is the initial status of the submitted Map. Note! Publish means that the Map (including any images added) will be \*immediately\* visible on your site.', 'waymark'), |
| [761](#L761) | 'options' => [ |
| [762](#L762) | 'publish' => esc\_attr\_\_('Publish', 'waymark'), |
| [763](#L763) | 'draft' => esc\_attr\_\_('Draft', 'waymark'), |
| [764](#L764) | ], |
| [765](#L765) | ], |
| [766](#L766) | 'submission\_collection' => [ |
| [767](#L767) | 'name' => 'submission\_collection', |
| [768](#L768) | 'id' => 'submission\_users\_collection', |
| [769](#L769) | 'type' => 'select', |
| [770](#L770) | 'title' => esc\_html\_\_('Default Collection', 'waymark'), |
| [771](#L771) | 'tip' => esc\_attr\_\_('If specified, user submissions will be automatically added to this Collection.', 'waymark'), |
| [772](#L772) | 'options' => $collection\_array, |
| [773](#L773) | ], |
| [774](#L774) | //                                              'submission\_alert' => array( |
| [775](#L775) | //                                                      'name' => 'submission\_alert', |
| [776](#L776) | //                                                      'id' => 'submission\_users\_alert', |
| [777](#L777) | //                                                      'type' => 'boolean', |
| [778](#L778) | //                                                      'title' => esc\_html\_\_('Email Alert', 'waymark'), |
| [779](#L779) | //                                                      'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_alert'), |
| [780](#L780) | //                                                      'tip' => esc\_attr\_\_('Receive email alerts for new submissions.', 'waymark'), |
| [781](#L781) | //                                                      'class' => 'waymark-hidden' |
| [782](#L782) | //                                              ) |
| [783](#L783) | ], |
| [784](#L784) | ], |
| [785](#L785) |  |
| [786](#L786) | //Public |
| [787](#L787) | 'from\_public' => [ |
| [788](#L788) | 'title' => esc\_html\_\_('Public Submissions', 'waymark'), |
| [789](#L789) | 'description' => \_\_('This will allow Submissions from <b>any visitor</b>, without registration.<!--<br /><br /><b>Important!</b>-->', 'waymark'), |
| [790](#L790) | 'fields' => [ |
| [791](#L791) | 'submission\_public' => [ |
| [792](#L792) | 'name' => 'submission\_public', |
| [793](#L793) | 'id' => 'submission\_public', |
| [794](#L794) | 'type' => 'boolean', |
| [795](#L795) | 'title' => esc\_html\_\_('Public Submissions', 'waymark'), |
| [796](#L796) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_public'), |
| [797](#L797) | 'tip' => esc\_attr\_\_('Allow \*anyone\* to submit Maps to your site, without registration.', 'waymark'), |
| [798](#L798) | ], |
| [799](#L799) | 'submission\_features' => [ |
| [800](#L800) | 'name' => 'submission\_features', |
| [801](#L801) | 'id' => 'submission\_public\_features', |
| [802](#L802) | 'type' => 'select\_multi', |
| [803](#L803) | 'class' => 'waymark-align-top', |
| [804](#L804) | 'title' => esc\_html\_\_('Editor Features', 'waymark'), |
| [805](#L805) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_features'), |
| [806](#L806) | 'tip' => esc\_attr\_\_('What features to offer in the Editor. Important! Uploaded images are added to the Media Library (see Upload Location below), reading from file does not keep a copy of the file on the server. Whether an individual Meta input is displayed can be set in the Settings > Map > Meta.', 'waymark'), |
| [807](#L807) | 'options' => [ |
| [808](#L808) | 'draw' => esc\_attr\_\_('Drawing', 'waymark'), |
| [809](#L809) | 'photo' => esc\_attr\_\_('Image upload', 'waymark'), |
| [810](#L810) | 'file' => esc\_attr\_\_('Read from File', 'waymark'), |
| [811](#L811) | 'title' => esc\_attr\_\_('Title', 'waymark'), |
| [812](#L812) | 'meta' => esc\_attr\_\_('Meta', 'waymark'), |
| [813](#L813) | ], |
| [814](#L814) | ], |
| [815](#L815) | 'submission\_upload\_dir' => [ |
| [816](#L816) | 'name' => 'submission\_upload\_dir', |
| [817](#L817) | 'id' => 'submission\_upload\_dir', |
| [818](#L818) | 'type' => 'select', |
| [819](#L819) | 'title' => esc\_html\_\_('Upload Location', 'waymark'), |
| [820](#L820) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_upload\_dir'), |
| [821](#L821) | 'tip' => esc\_attr\_\_('Images upload by non-registered users can be stored seperately from other Media Library uploads, to aid with moderation. All uploaded images will be stored in a single directory (/waymark\_submission) found in the upload root.', 'waymark'), |
| [822](#L822) | 'class' => '', |
| [823](#L823) | 'options' => [ |
| [824](#L824) | 'waymark\_submission' => esc\_attr\_\_('Seperated (/waymark\_submission)', 'waymark'), |
| [825](#L825) | '' => sprintf(esc\_attr\_\_('Media Library Default (%s)', 'waymark'), $upload\_dir['subdir']), |
| [826](#L826) | ], |
| [827](#L827) | ], |
| [828](#L828) | 'submission\_status' => [ |
| [829](#L829) | 'name' => 'submission\_status', |
| [830](#L830) | 'id' => 'submission\_public\_status', |
| [831](#L831) | 'type' => 'select', |
| [832](#L832) | 'title' => esc\_html\_\_('Default Status', 'waymark'), |
| [833](#L833) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_status'), |
| [834](#L834) | 'tip' => esc\_attr\_\_('This is the initial status of the submitted Map. Note! Publish means that the Map (including any images added) will be \*immediately\* visible on your site.', 'waymark'), |
| [835](#L835) | 'options' => [ |
| [836](#L836) | 'draft' => esc\_attr\_\_('Draft', 'waymark'), |
| [837](#L837) | 'publish' => esc\_attr\_\_('Publish (not recommended!)', 'waymark'), |
| [838](#L838) | ], |
| [839](#L839) | 'class' => '', |
| [840](#L840) | ], |
| [841](#L841) | 'submission\_collection' => [ |
| [842](#L842) | 'name' => 'submission\_collection', |
| [843](#L843) | 'id' => 'submission\_public\_collection', |
| [844](#L844) | 'type' => 'select', |
| [845](#L845) | 'title' => esc\_html\_\_('Default Collection', 'waymark'), |
| [846](#L846) | 'tip' => esc\_attr\_\_('If specified, user submissions will be automatically added to this Collection.', 'waymark'), |
| [847](#L847) | 'options' => $collection\_array, |
| [848](#L848) | ], |
| [849](#L849) | //                                              'submission\_alert' => array( |
| [850](#L850) | //                                                      'name' => 'submission\_alert', |
| [851](#L851) | //                                                      'id' => 'submission\_public\_alert', |
| [852](#L852) | //                                                      'type' => 'boolean', |
| [853](#L853) | //                                                      'title' => esc\_html\_\_('Email Alert', 'waymark'), |
| [854](#L854) | //                                                      'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_alert'), |
| [855](#L855) | //                                                      'tip' => esc\_attr\_\_('Receive email alerts for new submissions.', 'waymark'), |
| [856](#L856) | //                                                      'class' => 'waymark-hidden' |
| [857](#L857) | //                                              ), |
| [858](#L858) | ], |
| [859](#L859) | ], |
| [860](#L860) | ], |
| [861](#L861) | ]; |
| [862](#L862) |  |
| [863](#L863) | //Submissions not enabled |
| [864](#L864) | if (! Waymark\_Config::get\_setting('submission', 'global', 'submission\_enable')) { |
| [865](#L865) | //Hide related inputs |
| [866](#L866) | $this->tabs['meta']['sections']['inputs']['fields']['meta\_submission']['class'] = ' waymark-hidden'; |
| [867](#L867) |  |
| [868](#L868) | $this->tabs['markers']['sections']['marker\_types']['fields']['marker\_submission']['class'] = 'waymark-hidden'; |
| [869](#L869) | $this->tabs['lines']['sections']['line\_types']['fields']['line\_submission']['class'] = 'waymark-hidden'; |
| [870](#L870) | $this->tabs['shapes']['sections']['shape\_types']['fields']['shape\_submission']['class'] = 'waymark-hidden'; |
| [871](#L871) |  |
| [872](#L872) | $this->tabs['submission']['sections']['from\_users']['class'] = 'waymark-hidden'; |
| [873](#L873) | $this->tabs['submission']['sections']['from\_public']['class'] = 'waymark-hidden'; |
| [874](#L874) | //If No public submissions |
| [875](#L875) | } elseif (! Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_public')) { |
| [876](#L876) | //Hide settings |
| [877](#L877) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_features']['class'] = ' waymark-hidden'; |
| [878](#L878) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_status']['class'] = ' waymark-hidden'; |
| [879](#L879) | //                      $this->tabs['submission']['sections']['from\_public']['fields']['submission\_alert']['class'] .= ' waymark-hidden'; |
| [880](#L880) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_upload\_dir']['class'] = ' waymark-hidden'; |
| [881](#L881) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_collection']['class'] = ' waymark-hidden'; |
| [882](#L882) | } |
| [883](#L883) |  |
| [884](#L884) | /\*\* |
| [885](#L885) | \* =========================================== |
| [886](#L886) | \* ================== MISC =================== |
| [887](#L887) | \* =========================================== |
| [888](#L888) | \*/ |
| [889](#L889) |  |
| [890](#L890) | $this->tabs['misc'] = [ |
| [891](#L891) | 'name' => esc\_html\_\_('Misc.', 'waymark'), |
| [892](#L892) | 'description' => '', |
| [893](#L893) | 'sections' => [ |
| [894](#L894) | 'map\_options' => [ |
| [895](#L895) | 'title' => esc\_html\_\_('Map Options', 'waymark'), |
| [896](#L896) | 'description' => esc\_html\_\_('Use these options to change how Maps are displayed.', 'waymark'), |
| [897](#L897) | 'help' => [ |
| [898](#L898) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs-cat/examples')), |
| [899](#L899) | 'text' => esc\_attr\_\_('See Examples &raquo;', 'waymark'), |
| [900](#L900) | ], |
| [901](#L901) | 'fields' => [ |
| [902](#L902) | 'map\_default\_latlng' => [ |
| [903](#L903) | 'name' => 'map\_default\_latlng', |
| [904](#L904) | 'id' => 'map\_default\_latlng', |
| [905](#L905) | 'type' => 'text', |
| [906](#L906) | 'class' => '', |
| [907](#L907) | 'title' => esc\_html\_\_('Default Centre', 'waymark'), |
| [908](#L908) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_default\_latlng'), |
| [909](#L909) | 'tip' => esc\_attr\_\_('Waymark centres the Map automatically when displaying data. These coordinates (Latitude,Longitude) will be used when there is no data available.', 'waymark'), |
| [910](#L910) | 'input\_processing' => [ |
| [911](#L911) | 'preg\_replace("/[^0-9.,-]+/", "", $param\_value);', |
| [912](#L912) | ], |
| [913](#L913) | 'output\_processing' => [ |
| [914](#L914) | sprintf('(! empty($param\_value)) ? $param\_value : "%s";', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_default\_latlng')), |
| [915](#L915) | ], |
| [916](#L916) | ], |
| [917](#L917) | 'map\_height' => [ |
| [918](#L918) | 'name' => 'map\_height', |
| [919](#L919) | 'id' => 'map\_height', |
| [920](#L920) | 'type' => 'text', |
| [921](#L921) | 'class' => 'waymark-short-input waymark-align-top', |
| [922](#L922) | 'title' => esc\_html\_\_('Map Height', 'waymark'), |
| [923](#L923) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height'), |
| [924](#L924) | 'append' => '<br />' . sprintf(esc\_attr\_\_('Or set in Shortcode: %s', 'waymark'), '<code>[' . Waymark\_Config::get\_item('shortcode') . ' map\_height=&quot;' . Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height') . '&quot; map\_width=&quot;320&quot;]</code>'), |
| [925](#L925) | 'tip' => sprintf(esc\_attr\_\_('Specify the desired height of the Map (in pixels). Pro Tip! This will affect all Maps, but you can change the height (and width) of an individual Map through the Shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; map\_height=&quot;' . Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height') . '&quot;]'), |
| [926](#L926) | 'input\_processing' => [ |
| [927](#L927) | 'preg\_replace("/[^0-9]/", "", $param\_value);', |
| [928](#L928) | ], |
| [929](#L929) | 'output\_processing' => [ |
| [930](#L930) | sprintf('(! empty($param\_value)) ? $param\_value : %d;', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_height')), |
| [931](#L931) | ], |
| [932](#L932) | ], |
| [933](#L933) | 'map\_default\_zoom' => [ |
| [934](#L934) | 'name' => 'map\_default\_zoom', |
| [935](#L935) | 'id' => 'map\_default\_zoom', |
| [936](#L936) | 'type' => 'text', |
| [937](#L937) | 'class' => 'waymark-short-input', |
| [938](#L938) | 'title' => esc\_html\_\_('Default Zoom', 'waymark'), |
| [939](#L939) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_default\_zoom'), |
| [940](#L940) | 'tip' => esc\_attr\_\_('Waymark zooms the Map automatically when displaying data. This zoom level (0-18) will be used when there is no data available.', 'waymark'), |
| [941](#L941) | 'input\_processing' => [ |
| [942](#L942) | 'preg\_replace("/[^0-9]/", "", $param\_value);', |
| [943](#L943) | ], |
| [944](#L944) | 'output\_processing' => [ |
| [945](#L945) | sprintf('(! empty($param\_value)) ? $param\_value : "%d";', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_default\_zoom')), |
| [946](#L946) | ], |
| [947](#L947) | ], |
| [948](#L948) | 'show\_gallery' => [ |
| [949](#L949) | 'name' => 'show\_gallery', |
| [950](#L950) | 'id' => 'show\_gallery', |
| [951](#L951) | 'type' => 'boolean', |
| [952](#L952) | 'title' => esc\_html\_\_('Image Gallery', 'waymark'), |
| [953](#L953) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_gallery'), |
| [954](#L954) | 'tip' => sprintf(esc\_attr\_\_('Whether to display an image gallery for Markers that have images associated with them. Pro Tip! This will affect all Maps, but you can choose to show/hide the gallery of an individual Map through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' show\_gallery=&quot;1&quot;]'), |
| [955](#L955) | 'options' => [ |
| [956](#L956) | '1' => esc\_html\_\_('Show', 'waymark'), |
| [957](#L957) | '0' => esc\_html\_\_('Hide', 'waymark'), |
| [958](#L958) | ], |
| [959](#L959) | ], |
| [960](#L960) | 'show\_filter' => [ |
| [961](#L961) | 'name' => 'show\_filter', |
| [962](#L962) | 'id' => 'show\_filter', |
| [963](#L963) | 'type' => 'boolean', |
| [964](#L964) | 'title' => esc\_html\_\_('Overlay Filter', 'waymark'), |
| [965](#L965) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_filter'), |
| [966](#L966) | 'tip' => sprintf(esc\_attr\_\_('Allow the user to filter which Markers, Lines and Shapes are currently visible on the Map. Pro Tip! This will affect all Maps, but you can choose to show/hide the filter for individual Maps through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' show\_filter=&quot;1&quot;]'), |
| [967](#L967) | 'options' => [ |
| [968](#L968) | '1' => esc\_html\_\_('Show', 'waymark'), |
| [969](#L969) | '0' => esc\_html\_\_('Hide', 'waymark'), |
| [970](#L970) | ], |
| [971](#L971) | ], |
| [972](#L972) | 'allow\_export' => [ |
| [973](#L973) | 'name' => 'allow\_export', |
| [974](#L974) | 'id' => 'allow\_export', |
| [975](#L975) | 'type' => 'boolean', |
| [976](#L976) | 'title' => esc\_html\_\_('Public Export', 'waymark'), |
| [977](#L977) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'allow\_export'), |
| [978](#L978) | 'tip' => sprintf(esc\_attr\_\_('Offer visitors the ability to Download all Collection/Map Overlays in the Shortcode Header and on the Map Details page. GeoJSON, GPX and KML formats supported.', 'waymark')), |
| [979](#L979) | ], |
| [980](#L980) | 'show\_scale' => [ |
| [981](#L981) | 'name' => 'show\_scale', |
| [982](#L982) | 'id' => 'show\_scale', |
| [983](#L983) | 'type' => 'boolean', |
| [984](#L984) | 'title' => esc\_html\_\_('Show Scale', 'waymark'), |
| [985](#L985) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_scale'), |
| [986](#L986) | 'tip' => sprintf(esc\_attr\_\_('Show a distance scale (km and miles) on the Map.', 'waymark')), |
| [987](#L987) | ], |
| [988](#L988) | ], |
| [989](#L989) | ], |
| [990](#L990) |  |
| [991](#L991) | //Interaction |
| [992](#L992) |  |
| [993](#L993) | //Sleep |
| [994](#L994) | 'interaction\_options' => [ |
| [995](#L995) | 'title' => esc\_html\_\_('Sleep Options', 'waymark'), |
| [996](#L996) | 'description' => sprintf(\_\_('Waymark Maps will zoom when the user scrolls. This can cause some unexpected/annoying behaviour when scrolling a page.<br /><br /><b>Sleeping</b> the Map initially and <b>Waking</b> upon user interaction (i.e. hovering/clicking/tapping) may create a better experience.', 'waymark'), Waymark\_Config::get\_default('misc', 'interaction\_options', 'delay\_seconds')), |
| [997](#L997) | 'fields' => [ |
| [998](#L998) | 'delay\_seconds' => [ |
| [999](#L999) | 'name' => 'delay\_seconds', |
| [1000](#L1000) | 'id' => 'delay\_seconds', |
| [1001](#L1001) | 'type' => 'text', |
| [1002](#L1002) | 'class' => 'waymark-short-input', |
| [1003](#L1003) | 'title' => esc\_html\_\_('Hover Wake Time', 'waymark'), |
| [1004](#L1004) | 'append' => esc\_html\_\_('Seconds', 'waymark'), |
| [1005](#L1005) | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'delay\_seconds'), |
| [1006](#L1006) | 'tip' => esc\_attr\_\_('How many seconds before scroll zoom is enabled. 0 seconds will mean no delay (disabling this feature). A large number of seconds like 3600 (an hour) will esentially \*disable hover to wake\*, meaning the user will need to \*click\* to wake.', 'waymark'), |
| [1007](#L1007) | 'input\_processing' => [ |
| [1008](#L1008) | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'interaction\_options', 'delay\_seconds') . ';', //Fallback |
| [1009](#L1009) | ], |
| [1010](#L1010) | ], |
| [1011](#L1011) | 'do\_message' => [ |
| [1012](#L1012) | 'name' => 'do\_message', |
| [1013](#L1013) | 'id' => 'do\_message', |
| [1014](#L1014) | 'type' => 'boolean', |
| [1015](#L1015) | 'title' => esc\_html\_\_('Display Message', 'waymark'), |
| [1016](#L1016) | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'do\_message'), |
| [1017](#L1017) | 'tip' => esc\_attr\_\_('This message will be displayed by the Map while scroll zoom is disabled.', 'waymark'), |
| [1018](#L1018) | ], |
| [1019](#L1019) | 'wake\_message' => [ |
| [1020](#L1020) | 'name' => 'wake\_message', |
| [1021](#L1021) | 'id' => 'wake\_message', |
| [1022](#L1022) | 'type' => 'text', |
| [1023](#L1023) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Display', 'waymark') . ' </span> ' . esc\_html\_\_('Message Text', 'waymark'), |
| [1024](#L1024) | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'wake\_message'), |
| [1025](#L1025) | ], |
| [1026](#L1026) | ], |
| [1027](#L1027) | ], |
| [1028](#L1028) |  |
| [1029](#L1029) | // Cluster |
| [1030](#L1030) |  |
| [1031](#L1031) | 'cluster\_options' => [ |
| [1032](#L1032) | 'title' => esc\_html\_\_('Cluster Options', 'waymark'), |
| [1033](#L1033) | 'description' => sprintf(\_\_('With Clustering enabled, Markers will be grouped together when they are close together. This can help to reduce clutter on the Map.', 'waymark'), Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_threshold')), |
| [1034](#L1034) | 'help' => [ |
| [1035](#L1035) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/marker-clustering')), |
| [1036](#L1036) | 'text' => esc\_attr\_\_('Clustering Docs &raquo;', 'waymark'), |
| [1037](#L1037) | ], |
| [1038](#L1038) | 'fields' => [ |
| [1039](#L1039) | 'show\_cluster' => [ |
| [1040](#L1040) | 'name' => 'show\_cluster', |
| [1041](#L1041) | 'id' => 'show\_cluster', |
| [1042](#L1042) | 'type' => 'boolean', |
| [1043](#L1043) | 'options' => [ |
| [1044](#L1044) | '1' => esc\_html\_\_('Enabled', 'waymark'), |
| [1045](#L1045) | '0' => esc\_html\_\_('Disabled', 'waymark'), |
| [1046](#L1046) | ], |
| [1047](#L1047) |  |
| [1048](#L1048) | 'title' => esc\_html\_\_('Marker Clustering', 'waymark'), |
| [1049](#L1049) | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'show\_cluster'), |
| [1050](#L1050) | 'tip' => esc\_attr\_\_('Whether to cluster (stack) Markers that are close together. Pro Tip! This will affect all Maps, but you can also enable/disable clustering through the Shortcode: [Waymark show\_cluster="0"]', 'waymark'), |
| [1051](#L1051) | ], |
| [1052](#L1052) | 'cluster\_threshold' => [ |
| [1053](#L1053) | 'name' => 'cluster\_threshold', |
| [1054](#L1054) | 'id' => 'cluster\_threshold', |
| [1055](#L1055) | 'type' => 'text', |
| [1056](#L1056) | 'class' => 'waymark-short-input', |
| [1057](#L1057) | 'title' => esc\_html\_\_('Cluster Threshold', 'waymark'), |
| [1058](#L1058) | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'cluster\_threshold'), |
| [1059](#L1059) | 'tip' => esc\_attr\_\_('Markers will not be clustered above this zoom level.', 'waymark'), |
| [1060](#L1060) | 'input\_processing' => [ |
| [1061](#L1061) | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_threshold') . ';', //Fallback |
| [1062](#L1062) | ], |
| [1063](#L1063) | ], |
| [1064](#L1064) | 'cluster\_radius' => [ |
| [1065](#L1065) | 'name' => 'cluster\_radius', |
| [1066](#L1066) | 'id' => 'cluster\_radius', |
| [1067](#L1067) | 'type' => 'text', |
| [1068](#L1068) | 'class' => 'waymark-short-input', |
| [1069](#L1069) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Cluster', 'waymark') . ' </span> ' . esc\_html\_\_('Radius', 'waymark'), |
| [1070](#L1070) | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'cluster\_radius'), |
| [1071](#L1071) | 'tip' => esc\_attr\_\_('The maximum radius that a cluster will cover from the central marker (in pixels). Decreasing will make more, smaller clusters.     Default 80.', 'waymark'), |
| [1072](#L1072) |  |
| [1073](#L1073) | 'input\_processing' => [ |
| [1074](#L1074) | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_radius') . ';', //Fallback |
| [1075](#L1075) | ], |
| [1076](#L1076) | ], |
| [1077](#L1077) | ], |
| [1078](#L1078) | ], |
| [1079](#L1079) |  |
| [1080](#L1080) | //Shortcode |
| [1081](#L1081) |  |
| [1082](#L1082) | 'shortcode\_options' => [ |
| [1083](#L1083) | 'title' => esc\_html\_\_('Shortcode Options', 'waymark'), |
| [1084](#L1084) | 'description' => esc\_html\_\_('How Maps are embedded into your content using the shortcode.', 'waymark'), |
| [1085](#L1085) | 'help' => [ |
| [1086](#L1086) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/shortcodes')), |
| [1087](#L1087) | 'text' => esc\_attr\_\_('Shortcode Docs &raquo;', 'waymark'), |
| [1088](#L1088) | ], |
| [1089](#L1089) | 'fields' => [ |
| [1090](#L1090) | 'shortcode\_header' => [ |
| [1091](#L1091) | 'name' => 'shortcode\_header', |
| [1092](#L1092) | 'id' => 'shortcode\_header', |
| [1093](#L1093) | 'type' => 'select', |
| [1094](#L1094) | 'title' => esc\_html\_\_('Shortcode Header', 'waymark'), |
| [1095](#L1095) | 'default' => Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'shortcode\_header'), |
| [1096](#L1096) | 'tip' => sprintf(esc\_attr\_\_('The shortcode header displays the title and link to the Map or Collection. Pro Tip! This will affect all shortcodes, but you can override the setting through the shortcode: %s (the value must be either 0 or 1).', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; shortcode\_header=&quot;' . Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'shortcode\_header') . '&quot;]'), |
| [1097](#L1097) | 'options' => [ |
| [1098](#L1098) | '1' => esc\_html\_\_('Show', 'waymark'), |
| [1099](#L1099) | '0' => esc\_html\_\_('Hide', 'waymark'), |
| [1100](#L1100) | ], |
| [1101](#L1101) | ], |
| [1102](#L1102) | 'header\_override' => [ |
| [1103](#L1103) | 'name' => 'header\_override', |
| [1104](#L1104) | 'id' => 'header\_override', |
| [1105](#L1105) | 'type' => 'select', |
| [1106](#L1106) | 'title' => esc\_html\_\_('Header for Admin', 'waymark'), |
| [1107](#L1107) | 'default' => Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'header\_override'), |
| [1108](#L1108) | 'tip' => esc\_attr\_\_('Use this Setting to always show the Shortcode Header when signed in as admin, useful for quickly navigating to embeded Maps.', 'waymark'), |
| [1109](#L1109) | 'options' => [ |
| [1110](#L1110) | '0' => esc\_html\_\_('Use Setting', 'waymark'), |
| [1111](#L1111) | '1' => esc\_html\_\_('Always Show', 'waymark'), |
| [1112](#L1112) | ], |
| [1113](#L1113) | ], |
| [1114](#L1114) | ], |
| [1115](#L1115) | ], |
| [1116](#L1116) |  |
| [1117](#L1117) | //Elevation |
| [1118](#L1118) |  |
| [1119](#L1119) | 'elevation\_options' => [ |
| [1120](#L1120) | 'title' => esc\_html\_\_('Elevation Options', 'waymark'), |
| [1121](#L1121) | 'description' => esc\_html\_\_('Lines with elevation data.', 'waymark'), |
| [1122](#L1122) | 'help' => [ |
| [1123](#L1123) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/elevation-profile-colours')), |
| [1124](#L1124) | 'text' => esc\_attr\_\_('Elevation Styling &raquo;', 'waymark'), |
| [1125](#L1125) | ], |
| [1126](#L1126) | 'fields' => [ |
| [1127](#L1127) | 'show\_elevation' => [ |
| [1128](#L1128) | 'name' => 'show\_elevation', |
| [1129](#L1129) | 'id' => 'show\_elevation', |
| [1130](#L1130) | 'type' => 'select', |
| [1131](#L1131) | 'title' => esc\_html\_\_('Elevation Profile', 'waymark'), |
| [1132](#L1132) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'show\_elevation'), |
| [1133](#L1133) | 'tip' => sprintf(esc\_attr\_\_('Display an interactive elevation profile graph below the Map for Lines that have elevation data. Pro Tip! You can choose to show/hide the elevation graph of an individual Map through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; show\_elevation=&quot;1&quot;]'), |
| [1134](#L1134) | 'options' => [ |
| [1135](#L1135) | '2' => esc\_html\_\_('Show on Map Details', 'waymark'), |
| [1136](#L1136) | '1' => esc\_html\_\_('Show everywhere', 'waymark'), |
| [1137](#L1137) | '0' => esc\_html\_\_('Hide everywhere', 'waymark'), |
| [1138](#L1138) | ], |
| [1139](#L1139) | ], |
| [1140](#L1140) | 'elevation\_units' => [ |
| [1141](#L1141) | 'name' => 'elevation\_units', |
| [1142](#L1142) | 'id' => 'elevation\_units', |
| [1143](#L1143) | 'type' => 'select', |
| [1144](#L1144) | 'title' => esc\_html\_\_('Elevation Units', 'waymark'), |
| [1145](#L1145) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_units'), |
| [1146](#L1146) | 'tip' => sprintf(esc\_attr\_\_('Display elevation data in metric (m/km) or imperial (ft/mi) units.', 'waymark')), |
| [1147](#L1147) | 'options' => [ |
| [1148](#L1148) | 'metric' => esc\_html\_\_('Metric (m/km)', 'waymark'), |
| [1149](#L1149) | 'imperial' => esc\_html\_\_('Imperial (ft/mi)', 'waymark'), |
| [1150](#L1150) | ], |
| [1151](#L1151) | ], |
| [1152](#L1152) | 'elevation\_colour' => [ |
| [1153](#L1153) | 'name' => 'elevation\_colour', |
| [1154](#L1154) | 'id' => 'elevation\_colour', |
| [1155](#L1155) | 'type' => 'text', |
| [1156](#L1156) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [1157](#L1157) | 'title' => esc\_html\_\_('Elevation Colour', 'waymark'), |
| [1158](#L1158) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_colour'), |
| [1159](#L1159) | 'tip' => sprintf(esc\_attr\_\_('The colour of the elevation graph and associated Line.', 'waymark')), |
| [1160](#L1160) | 'input\_processing' => [ |
| [1161](#L1161) | '(! empty($param\_value)) ? $param\_value : "#b42714";', //Fallback |
| [1162](#L1162) | ], |
| [1163](#L1163) | ], |
| [1164](#L1164) | 'elevation\_initial' => [ |
| [1165](#L1165) | 'name' => 'elevation\_initial', |
| [1166](#L1166) | 'id' => 'elevation\_initial', |
| [1167](#L1167) | 'type' => 'boolean', |
| [1168](#L1168) | 'title' => esc\_html\_\_('Show Initially?', 'waymark'), |
| [1169](#L1169) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_initial'), |
| [1170](#L1170) | 'tip' => sprintf(esc\_attr\_\_('Whether to show the elevation profile when the Map loads. If set to No, the user must click on a Line in order to display the elevation data. If there are multiple Lines with elevation data, the one added to the editor first will be the one shown initially.', 'waymark')), |
| [1171](#L1171) | ], |
| [1172](#L1172) | ], |
| [1173](#L1173) | ], |
| [1174](#L1174) |  |
| [1175](#L1175) | /\*\* |
| [1176](#L1176) | \* =========================================== |
| [1177](#L1177) | \* ================= ADVANCED ================ |
| [1178](#L1178) | \* =========================================== |
| [1179](#L1179) | \*/ |
| [1180](#L1180) |  |
| [1181](#L1181) | //Collections |
| [1182](#L1182) |  |
| [1183](#L1183) | 'collection\_options' => [ |
| [1184](#L1184) | 'title' => esc\_html\_\_('Collection Options', 'waymark'), |
| [1185](#L1185) | 'description' => esc\_html\_\_('How Collections are displayed.', 'waymark'), |
| [1186](#L1186) | 'help' => [ |
| [1187](#L1187) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/collections')), |
| [1188](#L1188) | 'text' => esc\_attr\_\_('Collection Docs &raquo;', 'waymark'), |
| [1189](#L1189) | ], |
| [1190](#L1190) | 'fields' => [ |
| [1191](#L1191) | 'load\_method' => [ |
| [1192](#L1192) | 'name' => 'load\_method', |
| [1193](#L1193) | 'id' => 'load\_method', |
| [1194](#L1194) | 'type' => 'select', |
| [1195](#L1195) | 'options' => [ |
| [1196](#L1196) | 'fetch' => esc\_html\_\_('Background', 'waymark'), |
| [1197](#L1197) | 'embed' => esc\_html\_\_('Embed', 'waymark'), |
| [1198](#L1198) | ], |
| [1199](#L1199) | 'class' => 'waymark-short-input', |
| [1200](#L1200) | 'title' => esc\_html\_\_('Shortcode Method', 'waymark'), |
| [1201](#L1201) | 'default' => Waymark\_Config::get\_setting('misc', 'collection\_options', 'load\_method'), |
| [1202](#L1202) | 'tip' => esc\_attr\_\_('Whether to load multiple Maps in the Background (uses AJAX to improve page load) when embedding with the Shortcode, or to Embed them within the page. Embedding may be a bad idea for LARGE COLLECTIONS, but can resolve some issues where Collections are not displaying correctly.', 'waymark'), |
| [1203](#L1203) | ], |
| [1204](#L1204) | ], |
| [1205](#L1205) | ], |
| [1206](#L1206) |  |
| [1207](#L1207) | //Editor |
| [1208](#L1208) |  |
| [1209](#L1209) | 'editor\_options' => [ |
| [1210](#L1210) | 'title' => esc\_html\_\_('Editor Options', 'waymark'), |
| [1211](#L1211) | 'description' => esc\_html\_\_('Customising the Map Editor.', 'waymark'), |
| [1212](#L1212) | 'fields' => [ |
| [1213](#L1213) | 'confirm\_delete' => [ |
| [1214](#L1214) | 'name' => 'confirm\_delete', |
| [1215](#L1215) | 'id' => 'confirm\_delete', |
| [1216](#L1216) | 'type' => 'boolean', |
| [1217](#L1217) | 'title' => esc\_html\_\_('Confirm Delete?', 'waymark'), |
| [1218](#L1218) | 'default' => Waymark\_Config::get\_setting('misc', 'editor\_options', 'confirm\_delete'), |
| [1219](#L1219) | 'tip' => esc\_attr\_\_('Whether to show a confirmation dialog before deleting Markers/Lines/Shapes from the Map. Pro Tip! Even if you accidentally delete something, changes are not saved until the "Update" button is clicked.', 'waymark'), |
| [1220](#L1220) | ], |
| [1221](#L1221) | 'editor\_basemap' => [ |
| [1222](#L1222) | 'name' => 'editor\_basemap', |
| [1223](#L1223) | 'id' => 'editor\_basemap', |
| [1224](#L1224) | 'type' => 'select', |
| [1225](#L1225) | 'title' => esc\_html\_\_('Default Basemap', 'waymark'), |
| [1226](#L1226) | 'default' => Waymark\_Config::get\_setting('misc', 'editor\_options', 'editor\_basemap'), |
| [1227](#L1227) | 'tip' => esc\_attr\_\_('Which Basemap to use as the editor default.', 'waymark'), |
| [1228](#L1228) | 'options' => $basemap\_options, |
| [1229](#L1229) | ], |
| [1230](#L1230) | ], |
| [1231](#L1231) | ], |
| [1232](#L1232) |  |
| [1233](#L1233) | //Permalinks |
| [1234](#L1234) |  |
| [1235](#L1235) | 'permalinks' => [ |
| [1236](#L1236) | 'title' => esc\_html\_\_('Permalinks', 'waymark'), |
| [1237](#L1237) | 'description' => 'Customise your Map and Collection URLs.', |
| [1238](#L1238) | 'footer' => '<small>For the changes to take affect you must rebuild your Permalinks by going to WP Settings > Permalinks and clicking "Save Changes".</small>', |
| [1239](#L1239) | 'fields' => [ |
| [1240](#L1240) | 'permalink\_slug\_map' => [ |
| [1241](#L1241) | 'name' => 'permalink\_slug\_map', |
| [1242](#L1242) | 'id' => 'permalink\_slug\_map', |
| [1243](#L1243) | 'type' => 'text', |
| [1244](#L1244) | 'class' => 'waymark-short-input', |
| [1245](#L1245) | 'title' => esc\_html\_\_('Map Slug', 'waymark'), |
| [1246](#L1246) | 'default' => Waymark\_Config::get\_setting('misc', 'permalinks', 'permalink\_slug\_map'), |
| [1247](#L1247) | 'tip' => esc\_attr\_\_('The URL slug that will be used for links to your Maps, i.e. example.com/[map-slug]/example-map/. Only alpha-numeric characters and hyphens (-) are allowed.', 'waymark'), |
| [1248](#L1248) | 'input\_processing' => [ |
| [1249](#L1249) | 'preg\_replace("/[^0-9a-z-]+/", "", $param\_value);', |
| [1250](#L1250) | ], |
| [1251](#L1251) | 'prepend' => '<small>/</small>', |
| [1252](#L1252) | 'append' => '<small>/map-name/</small>', |
| [1253](#L1253) | ], |
| [1254](#L1254) | 'permalink\_slug\_collection' => [ |
| [1255](#L1255) | 'name' => 'permalink\_slug\_collection', |
| [1256](#L1256) | 'id' => 'permalink\_slug\_collection', |
| [1257](#L1257) | 'type' => 'text', |
| [1258](#L1258) | 'class' => 'waymark-short-input', |
| [1259](#L1259) | 'title' => esc\_html\_\_('Collection Slug', 'waymark'), |
| [1260](#L1260) | 'default' => Waymark\_Config::get\_setting('misc', 'permalinks', 'permalink\_slug\_collection'), |
| [1261](#L1261) | 'tip' => esc\_attr\_\_('The URL slug that will be used for links to your Collections, i.e. example.com/[collection-slug]/example-collection/. Only alpha-numeric characters and hyphens (-) are allowed.', 'waymark'), |
| [1262](#L1262) | 'input\_processing' => [ |
| [1263](#L1263) | 'preg\_replace("/[^0-9a-z-]+/", "", $param\_value);', |
| [1264](#L1264) | ], |
| [1265](#L1265) | 'prepend' => '<small>/</small>', |
| [1266](#L1266) | 'append' => '<small>/collection-name/</small>', |
| [1267](#L1267) | ], |
| [1268](#L1268) | ], |
| [1269](#L1269) | ], |
| [1270](#L1270) |  |
| [1271](#L1271) | // Custom Post Type Supports |
| [1272](#L1272) |  |
| [1273](#L1273) | 'post' => [ |
| [1274](#L1274) | 'title' => esc\_html\_\_('Post Type', 'waymark'), |
| [1275](#L1275) | 'description' => 'Enable Custom Post Type features.', |
| [1276](#L1276) | 'fields' => [ |
| [1277](#L1277) | 'supports' => [ |
| [1278](#L1278) | 'name' => 'supports', |
| [1279](#L1279) | 'id' => 'supports', |
| [1280](#L1280) | 'type' => 'select\_multi', |
| [1281](#L1281) | 'title' => esc\_html\_\_('Supports', 'waymark'), |
| [1282](#L1282) | 'default' => Waymark\_Config::get\_setting('misc', 'post', 'supports'), |
| [1283](#L1283) | 'tip' => esc\_attr\_\_('Enable or disable various WordPress features of the Map Custom Post Type.', 'waymark'), |
| [1284](#L1284) | 'tip\_link' => 'https://developer.wordpress.org/reference/functions/add\_post\_type\_support/', |
| [1285](#L1285) | 'options' => [ |
| [1286](#L1286) | 'title' => esc\_html\_\_('Title', 'waymark'), |
| [1287](#L1287) | 'author' => esc\_html\_\_('Author', 'waymark'), |
| [1288](#L1288) | 'revisions' => esc\_html\_\_('Revisions', 'waymark'), |
| [1289](#L1289) | 'thumbnail' => esc\_html\_\_('Thumbnail', 'waymark'), |
| [1290](#L1290) | 'comments' => esc\_html\_\_('Comments', 'waymark'), |
| [1291](#L1291) | 'excerpt' => esc\_html\_\_('Excerpt', 'waymark'), |
| [1292](#L1292) | ], |
| [1293](#L1293) | ], |
| [1294](#L1294) | ], |
| [1295](#L1295) | ], |
| [1296](#L1296) |  |
| [1297](#L1297) | //Debug |
| [1298](#L1298) |  |
| [1299](#L1299) | 'advanced' => [ |
| [1300](#L1300) | 'title' => esc\_html\_\_('Debug', 'waymark'), |
| [1301](#L1301) | 'description' => '', |
| [1302](#L1302) | 'fields' => [ |
| [1303](#L1303) | 'debug\_mode' => [ |
| [1304](#L1304) | 'name' => 'debug\_mode', |
| [1305](#L1305) | 'id' => 'debug\_mode', |
| [1306](#L1306) | 'type' => 'boolean', |
| [1307](#L1307) | 'title' => esc\_html\_\_('Debug Mode', 'waymark'), |
| [1308](#L1308) | 'default' => Waymark\_Config::get\_setting('misc', 'advanced', 'debug\_mode'), |
| [1309](#L1309) | 'tip' => esc\_attr\_\_('With debug mode enabled, the plugin will output Map and Settings data in Admin Dashboard. This may come in handy if you need to report a bug. Pro Tip! Check the browser console for Waymark output when signed in as an administrator.', 'waymark'), |
| [1310](#L1310) | 'tip\_link' => 'https://www.waymark.dev/docs/debug-mode/', |
| [1311](#L1311) | 'options' => [ |
| [1312](#L1312) | '0' => esc\_html\_\_('Disable', 'waymark'), |
| [1313](#L1313) | '1' => esc\_html\_\_('Enable', 'waymark'), |
| [1314](#L1314) | ], |
| [1315](#L1315) | ], |
| [1316](#L1316) | ], |
| [1317](#L1317) | ], |
| [1318](#L1318) | ], |
| [1319](#L1319) | ]; |
| [1320](#L1320) |  |
| [1321](#L1321) | //Debug? |
| [1322](#L1322) | if (Waymark\_Helper::is\_debug()) { |
| [1323](#L1323) | $this->tabs['misc']['sections']['advanced']['fields']['settings\_output'] = [ |
| [1324](#L1324) | 'name' => 'settings\_output', |
| [1325](#L1325) | 'id' => 'settings\_output', |
| [1326](#L1326) | 'type' => 'textarea', |
| [1327](#L1327) | 'class' => 'waymark-align-top', |
| [1328](#L1328) | 'title' => esc\_html\_\_('Settings Data', 'waymark'), |
| [1329](#L1329) | 'default' => serialize(get\_option('Waymark\_Settings')), |
| [1330](#L1330) | //Don't save to DB |
| [1331](#L1331) | 'input\_processing' => [ |
| [1332](#L1332) | 'null', |
| [1333](#L1333) | ], |
| [1334](#L1334) | //Don't allow editing |
| [1335](#L1335) | 'output\_processing' => [ |
| [1336](#L1336) | 'serialize(get\_option("Waymark\_Settings"))', |
| [1337](#L1337) | ], |
| [1338](#L1338) | ]; |
| [1339](#L1339) | } |
| [1340](#L1340) |  |
| [1341](#L1341) | add\_action('admin\_notices', [$this, 'admin\_notices']); |
| [1342](#L1342) | add\_action('admin\_init', [$this, 'register\_settings']); |
| [1343](#L1343) | } |
| [1344](#L1344) |  |
| [1345](#L1345) | function get\_settings() { |
| [1346](#L1346) | return $this->current\_settings; |
| [1347](#L1347) | } |
| [1348](#L1348) |  |
| [1349](#L1349) | function register\_settings() { |
| [1350](#L1350) | register\_setting($this->page\_slug, 'Waymark\_Settings', [$this, 'sanitize\_callback']); |
| [1351](#L1351) |  |
| [1352](#L1352) | //For each tab |
| [1353](#L1353) | foreach ($this->tabs as $tab\_key => $tab\_data) { |
| [1354](#L1354) | //For each section |
| [1355](#L1355) | foreach ($tab\_data['sections'] as $section\_key => $section\_data) { |
| [1356](#L1356) | //Set if blank if unset |
| [1357](#L1357) | $section\_data['title'] = (isset($section\_data['title'])) ? $section\_data['title'] : ''; |
| [1358](#L1358) |  |
| [1359](#L1359) | //Create section |
| [1360](#L1360) | add\_settings\_section($section\_key, $section\_data['title'], [$this, 'section\_text'], $this->page\_slug); |
| [1361](#L1361) |  |
| [1362](#L1362) | //For each field in section |
| [1363](#L1363) | if (is\_array($section\_data['fields']) && sizeof($section\_data['fields'])) { |
| [1364](#L1364) | foreach ($section\_data['fields'] as $field) { |
| [1365](#L1365) | //Get set\_value |
| [1366](#L1366) | if (array\_key\_exists($tab\_key, $this->current\_settings) && array\_key\_exists($section\_key, $this->current\_settings[$tab\_key])) { |
| [1367](#L1367) | if (array\_key\_exists($field['name'], $this->current\_settings[$tab\_key][$section\_key])) { |
| [1368](#L1368) | $field['set\_value'] = $this->current\_settings[$tab\_key][$section\_key][$field['name']]; |
| [1369](#L1369) | } |
| [1370](#L1370) | } |
| [1371](#L1371) |  |
| [1372](#L1372) | //Modify name for multi-dimensional array |
| [1373](#L1373) | $field['name'] = 'Waymark\_Settings[' . $tab\_key . '][' . $section\_key . '][' . $field['name'] . ']'; |
| [1374](#L1374) |  |
| [1375](#L1375) | //Repeatable section |
| [1376](#L1376) | if (isset($section\_data['repeatable']) && $section\_data['repeatable']) { |
| [1377](#L1377) | //Get count |
| [1378](#L1378) | $repeatable\_count = Waymark\_Helper::get\_section\_repeatable\_count($section\_data); |
| [1379](#L1379) |  |
| [1380](#L1380) | //Must be an array |
| [1381](#L1381) | if (! is\_array($field['default'])) { |
| [1382](#L1382) | //Make array |
| [1383](#L1383) | $field['default'] = Waymark\_Helper::convert\_single\_value\_to\_array($field['default']); |
| [1384](#L1384) | } |
| [1385](#L1385) |  |
| [1386](#L1386) | //Array size must match |
| [1387](#L1387) | if (sizeof($field['default']) < $repeatable\_count) { |
| [1388](#L1388) | //Pad |
| [1389](#L1389) | $field['default'] = array\_pad($field['default'], $repeatable\_count, $field['default'][0]); |
| [1390](#L1390) | } |
| [1391](#L1391) | } |
| [1392](#L1392) |  |
| [1393](#L1393) | add\_settings\_field($field['name'], $field['title'], [$this, 'create\_input'], $this->page\_slug, $section\_key, $field); |
| [1394](#L1394) | } |
| [1395](#L1395) | } |
| [1396](#L1396) | } |
| [1397](#L1397) | } |
| [1398](#L1398) | } |
| [1399](#L1399) |  |
| [1400](#L1400) | function create\_input($field) { |
| [1401](#L1401) | //Set value |
| [1402](#L1402) | if (array\_key\_exists('set\_value', $field)) { |
| [1403](#L1403) | $set\_value = $field['set\_value']; |
| [1404](#L1404) | } else { |
| [1405](#L1405) | $set\_value = null; |
| [1406](#L1406) | } |
| [1407](#L1407) |  |
| [1408](#L1408) | echo Waymark\_Input::create\_field($field, $set\_value, false); |
| [1409](#L1409) | } |
| [1410](#L1410) |  |
| [1411](#L1411) | function section\_text($args) { |
| [1412](#L1412) | //Unused |
| [1413](#L1413) | } |
| [1414](#L1414) |  |
| [1415](#L1415) | function sanitize\_callback($input\_data) { |
| [1416](#L1416) | //For each tab |
| [1417](#L1417) | foreach ($this->tabs as $tab\_key => $tab\_data) { |
| [1418](#L1418) | //If we have sections |
| [1419](#L1419) | if (array\_key\_exists('sections', $tab\_data)) { |
| [1420](#L1420) | //Iterate over each section |
| [1421](#L1421) | foreach ($tab\_data['sections'] as $section\_key => $section\_data) { |
| [1422](#L1422) | //If section has fields |
| [1423](#L1423) | if (array\_key\_exists('fields', $section\_data)) { |
| [1424](#L1424) | //For each field |
| [1425](#L1425) | foreach ($section\_data['fields'] as $field\_key => $field\_definition) { |
| [1426](#L1426) | //If this field was submitted |
| [1427](#L1427) | if (isset($input\_data[$tab\_key][$section\_key][$field\_definition['name']])) { |
| [1428](#L1428) | $value = $input\_data[$tab\_key][$section\_key][$field\_definition['name']]; |
| [1429](#L1429) |  |
| [1430](#L1430) | //If no input processing specified |
| [1431](#L1431) | if (! array\_key\_exists('input\_processing', $field\_definition)) { |
| [1432](#L1432) | //Make safe by default |
| [1433](#L1433) | $field\_definition['input\_processing'][] = 'htmlspecialchars($param\_value)'; |
| [1434](#L1434) | } |
| [1435](#L1435) |  |
| [1436](#L1436) | //Process the input |
| [1437](#L1437) | $input\_data[$tab\_key][$section\_key][$field\_definition['name']] = Waymark\_Input::process\_input($field\_definition, $value); |
| [1438](#L1438) | } |
| [1439](#L1439) | } |
| [1440](#L1440) | } |
| [1441](#L1441) | } |
| [1442](#L1442) | } |
| [1443](#L1443) | } |
| [1444](#L1444) |  |
| [1445](#L1445) | return $input\_data; |
| [1446](#L1446) | } |
| [1447](#L1447) |  |
| [1448](#L1448) | function content\_admin\_page() { |
| [1449](#L1449) | echo '<div id="waymark-admin-container">' . "\n"; |
| [1450](#L1450) |  |
| [1451](#L1451) | echo Waymark\_Helper::plugin\_about(); |
| [1452](#L1452) |  |
| [1453](#L1453) | echo '  <div class="card">' . "\n"; |
| [1454](#L1454) |  |
| [1455](#L1455) | //Tabs |
| [1456](#L1456) | $active\_content = (isset($\_GET['content'])) ? esc\_html($\_GET['content']) : $this->default\_content; |
| [1457](#L1457) | $this->settings\_nav($active\_content); |
| [1458](#L1458) |  |
| [1459](#L1459) | //Open form |
| [1460](#L1460) | echo '          <form action="' . admin\_url('options.php') . '" method="post">' . "\n"; |
| [1461](#L1461) | settings\_fields($this->page\_slug); |
| [1462](#L1462) |  |
| [1463](#L1463) | //For each tab |
| [1464](#L1464) | foreach ($this->tabs as $tab\_key => $tab\_data) { |
| [1465](#L1465) | $style = ''; |
| [1466](#L1466) | echo '  <div class="waymark-settings-tab waymark-settings-tab-' . $tab\_key . '"' . $style . '>' . "\n"; |
| [1467](#L1467) |  |
| [1468](#L1468) | //Tab description? |
| [1469](#L1469) | if (array\_key\_exists('description', $tab\_data)) { |
| [1470](#L1470) | echo '  <div class="waymark-settings-tab-description">' . $tab\_data['description'] . '</div>' . "\n"; |
| [1471](#L1471) | } |
| [1472](#L1472) |  |
| [1473](#L1473) | //For each section |
| [1474](#L1474) | foreach ($tab\_data['sections'] as $section\_key => $section\_data) { |
| [1475](#L1475) | $class = (isset($section\_data['class'])) ? ' ' . $section\_data['class'] : ''; |
| [1476](#L1476) | echo '          <div class="waymark-settings-section waymark-settings-section-' . $section\_key . $class . '">' . "\n"; |
| [1477](#L1477) |  |
| [1478](#L1478) | //Help |
| [1479](#L1479) | if (array\_key\_exists('help', $section\_data) && isset($section\_data['help']['url'])) { |
| [1480](#L1480) | $help\_text = (isset($section\_data['help']['text'])) ? $section\_data['help']['text'] : 'View Help &raquo;'; |
| [1481](#L1481) |  |
| [1482](#L1482) | echo '          <a class="waymark-docs-link button" href="' . $section\_data['help']['url'] . '" target="\_blank">' . $help\_text . '</a>' . "\n"; |
| [1483](#L1483) | } |
| [1484](#L1484) |  |
| [1485](#L1485) | //Title |
| [1486](#L1486) | if (isset($section\_data['title'])) { |
| [1487](#L1487) | echo '          <h2>' . $section\_data['title'] . '</h2>' . "\n"; |
| [1488](#L1488) | } |
| [1489](#L1489) |  |
| [1490](#L1490) | //Description |
| [1491](#L1491) | if (array\_key\_exists('description', $section\_data)) { |
| [1492](#L1492) | echo '          <div class="waymark-settings-section-description">' . $section\_data['description'] . '</div>' . "\n"; |
| [1493](#L1493) | } |
| [1494](#L1494) |  |
| [1495](#L1495) | //Repeatable? |
| [1496](#L1496) | if (array\_key\_exists('repeatable', $section\_data) && $section\_data['repeatable']) { |
| [1497](#L1497) | echo '<div class="waymark-repeatable" data-count="0">' . "\n"; |
| [1498](#L1498) | } |
| [1499](#L1499) |  |
| [1500](#L1500) | echo '          <table class="form-table">' . "\n"; |
| [1501](#L1501) | do\_settings\_fields($this->page\_slug, $section\_key); |
| [1502](#L1502) | echo '          </table>' . "\n"; |
| [1503](#L1503) |  |
| [1504](#L1504) | //Repeatable? |
| [1505](#L1505) | if (array\_key\_exists('repeatable', $section\_data) && $section\_data['repeatable']) { |
| [1506](#L1506) | echo '</div>' . "\n"; |
| [1507](#L1507) | } |
| [1508](#L1508) |  |
| [1509](#L1509) | //Footer |
| [1510](#L1510) | if (array\_key\_exists('footer', $section\_data)) { |
| [1511](#L1511) | echo '  <div class="waymark-settings-section-footer">' . $section\_data['footer'] . '</div>' . "\n"; |
| [1512](#L1512) | } |
| [1513](#L1513) |  |
| [1514](#L1514) | echo '</div>' . "\n"; |
| [1515](#L1515) | } |
| [1516](#L1516) |  |
| [1517](#L1517) | echo '  </div>' . "\n"; |
| [1518](#L1518) | } |
| [1519](#L1519) |  |
| [1520](#L1520) | submit\_button(null, 'primary large'); |
| [1521](#L1521) | echo '          </form>' . "\n"; |
| [1522](#L1522) |  |
| [1523](#L1523) | echo '  </div>' . "\n"; |
| [1524](#L1524) | echo '</div>' . "\n"; |
| [1525](#L1525) | } |
| [1526](#L1526) |  |
| [1527](#L1527) | function settings\_nav($current = 'tiles') { |
| [1528](#L1528) | echo '<div id="waymark-settings-nav" data-init\_tab\_key="' . esc\_html($current) . '">' . "\n"; |
| [1529](#L1529) | echo '  <select>' . "\n"; |
| [1530](#L1530) |  |
| [1531](#L1531) | foreach ($this->settings\_nav as $content\_id => $content\_title) { |
| [1532](#L1532) | if (strpos($content\_id, 'label') === 0) { |
| [1533](#L1533) | echo '  <option disabled="disabled">' . $content\_title . '</option>' . "\n"; |
| [1534](#L1534) | } else { |
| [1535](#L1535) | echo '  <option value="' . $content\_id . '"' . (($current == $content\_id) ? ' selected="selected"' : '') . '>' . $content\_title . '</option>' . "\n"; |
| [1536](#L1536) | } |
| [1537](#L1537) | } |
| [1538](#L1538) |  |
| [1539](#L1539) | echo '  </select>' . "\n"; |
| [1540](#L1540) | echo '</div>' . "\n"; |
| [1541](#L1541) | } |
| [1542](#L1542) |  |
| [1543](#L1543) | function execute\_action($action) { |
| [1544](#L1544) | switch ($action) { |
| [1545](#L1545) | //Clear cache |
| [1546](#L1546) | case 'clear\_cache': |
| [1547](#L1547) | Waymark\_Cache::flush(); |
| [1548](#L1548) |  |
| [1549](#L1549) | break; |
| [1550](#L1550) | } |
| [1551](#L1551) |  |
| [1552](#L1552) | wp\_redirect(admin\_url('admin.php?page=waymark-settings&tab=advanced&settings-updated=waymark\_action')); |
| [1553](#L1553) |  |
| [1554](#L1554) | die; |
| [1555](#L1555) | } |
| [1556](#L1556) |  |
| [1557](#L1557) | function admin\_notices() { |
| [1558](#L1558) | if (isset($\_GET['settings-updated'])) { |
| [1559](#L1559) | //Settings updates |
| [1560](#L1560) | if ($\_GET['settings-updated'] == 'true') { |
| [1561](#L1561) | echo '<div class="waymark-notice notice notice-success is-dismissible"><p>' . esc\_html\_\_('Settings Updated', 'waymark') . '.</p></div>'; |
| [1562](#L1562) | //Action |
| [1563](#L1563) | } elseif ($\_GET['settings-updated'] == 'waymark\_action') { |
| [1564](#L1564) | echo '<div class="waymark-notice notice notice-success is-dismissible"><p>' . esc\_html\_\_('Action Complete', 'waymark') . '.</p></div>'; |
| [1565](#L1565) | } |
| [1566](#L1566) | } |
| [1567](#L1567) | } |
| [1568](#L1568) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?format=txt)
* [Original Format](/export/3222677/waymark/trunk/inc/Admin/Waymark_Settings.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_674c38c9_20250115_082653.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fwaymark%2Ftrunk%2Finc%2FAdmin%2FWaymark_Settings.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468 "Revision 3102468")
* Next Revision →
* [Blame](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/waymark/trunk/inc/Admin/Waymark_Settings.php)

---

# [source:](/browser?order=name "Go to repository root") [waymark](/browser/waymark?order=name "View waymark")/[trunk](/browser/waymark/trunk?order=name "View trunk")/[inc](/browser/waymark/trunk/inc?order=name "View inc")/[Admin](/browser/waymark/trunk/inc/Admin?order=name "View Admin")/[Waymark\_Settings.php](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?order=name "View Waymark_Settings.php")

View diff against:

View revision:

| [Last change](/changeset/3205103/waymark/trunk/inc/Admin/Waymark_Settings.php "View differences") on this file was [3205103](/changeset/3205103/ "View changeset 3205103"), checked in by morehawes, [5 weeks ago](/timeline?from=2024-12-09T20%3A11%3A24Z&precision=second "See timeline at 12/09/2024 08:11:24 PM") |
| --- |
| v1.4.2 |
| **File size:** 73.5 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | class Waymark\_Settings { |
| [4](#L4) | private $settings\_id      = 'Waymark\_Settings'; |
| [5](#L5) | private $page\_slug        = 'waymark-settings'; |
| [6](#L6) | private $default\_content  = 'waymark-settings-tab-tiles'; |
| [7](#L7) | private $current\_settings = []; |
| [8](#L8) | public $tabs              = []; |
| [9](#L9) | public $settings\_nav; |
| [10](#L10) |  |
| [11](#L11) | function \_\_construct() { |
| [12](#L12) |  |
| [13](#L13) | //Execute action? |
| [14](#L14) | if (sizeof($\_POST)) { |
| [15](#L15) | //Clear cache |
| [16](#L16) | if (isset($\_POST['Waymark\_Settings']['advanced']['performance']['clear\_cache'])) { |
| [17](#L17) | $this->execute\_action('clear\_cache'); |
| [18](#L18) | } |
| [19](#L19) | } |
| [20](#L20) |  |
| [21](#L21) | //Get current settings from DB |
| [22](#L22) | $current\_settings = get\_option('Waymark\_Settings'); |
| [23](#L23) | if (is\_array($current\_settings)) { |
| [24](#L24) | $this->current\_settings = $current\_settings; |
| [25](#L25) | } |
| [26](#L26) |  |
| [27](#L27) | /\*\* |
| [28](#L28) | \* =========================================== |
| [29](#L29) | \* =============== SETTINGS NAV ============== |
| [30](#L30) | \* =========================================== |
| [31](#L31) | \*/ |
| [32](#L32) |  |
| [33](#L33) | $this->settings\_nav = [ |
| [34](#L34) | 'label\_maps' => esc\_html\_\_('Maps'), |
| [35](#L35) | 'waymark-settings-tab-tiles' => '-- ' . esc\_html\_\_('Basemaps', 'waymark'), |
| [36](#L36) | 'waymark-settings-section-shortcode\_options' => '-- ' . esc\_html\_\_('Shortcodes', 'waymark'), |
| [37](#L37) | 'waymark-settings-section-elevation\_options' => '-- ' . esc\_html\_\_('Elevation', 'waymark'), |
| [38](#L38) | 'waymark-settings-tab-meta' => '-- ' . esc\_html\_\_('Meta', 'waymark'), |
| [39](#L39) | 'waymark-settings-section-interaction\_options' => '-- ' . esc\_html\_\_('Sleep', 'waymark'), |
| [40](#L40) | 'waymark-settings-section-cluster\_options' => '-- ' . esc\_html\_\_('Clustering', 'waymark'), |
| [41](#L41) | 'waymark-settings-section-map\_options' => '-- ' . esc\_html\_\_('Misc.', 'waymark'), |
| [42](#L42) | 'label\_overlays' => esc\_html\_\_('Overlays'), |
| [43](#L43) | 'waymark-settings-tab-markers' => '-- ' . esc\_html\_\_('Markers', 'waymark'), |
| [44](#L44) | 'waymark-settings-tab-lines' => '-- ' . esc\_html\_\_('Lines', 'waymark'), |
| [45](#L45) | 'waymark-settings-tab-shapes' => '-- ' . esc\_html\_\_('Shapes', 'waymark'), |
| [46](#L46) | 'waymark-settings-tab-properties' => '-- ' . esc\_html\_\_('Properties', 'waymark'), |
| [47](#L47) | 'label\_sources' => esc\_html\_\_('Sources'), |
| [48](#L48) | 'waymark-settings-tab-submission' => '-- ' . esc\_html\_\_('Submissions', 'waymark'), |
| [49](#L49) | 'waymark-settings-tab-misc' => esc\_html\_\_('Advanced', 'waymark'), |
| [50](#L50) | ]; |
| [51](#L51) |  |
| [52](#L52) | /\*\* |
| [53](#L53) | \* =========================================== |
| [54](#L54) | \* ================= BASEMAPS ================ |
| [55](#L55) | \* =========================================== |
| [56](#L56) | \*/ |
| [57](#L57) |  |
| [58](#L58) | $this->tabs['tiles'] = [ |
| [59](#L59) | 'name' => esc\_html\_\_('Basemaps', 'waymark'), |
| [60](#L60) | 'description' => '', |
| [61](#L61) | 'sections' => [ |
| [62](#L62) | 'layers' => [ |
| [63](#L63) | 'repeatable' => true, |
| [64](#L64) | 'title' => esc\_html\_\_('Basemaps', 'waymark'), |
| [65](#L65) | 'description' => sprintf(\_\_('<span class="waymark-lead">Waymark uses the excellent <a href="%s">OpenStreetMap</a> as it’s default Basemap and supports many <a href="%s">other providers</a>.<br /><br /><a href="%s">Thunderforest</a> and <a href="%s">Mapbox</a> are examples of providers that offer easy access to beautiful Basemaps (including satellite imagery). They require registration, but have a free usage tier.', 'waymark'), 'https://www.openstreetmap.org/fixthemap', 'https://leaflet-extras.github.io/leaflet-providers/preview/', 'https://www.thunderforest.com/', 'https://www.mapbox.com/maps/'), |
| [66](#L66) | 'footer' => sprintf(\_\_('<small><b>Pro Tip!</b> If you have more than one Basemap, you can switch between them when viewing the Map. The first listed will be used as the default, unless specified in the shortcode like this: %s. Drag to re-order, remove all to restore defaults.</small>', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; basemap=&quot;Basemap Name&quot;]'), |
| [67](#L67) | 'help' => [ |
| [68](#L68) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/basemaps')), |
| [69](#L69) | 'text' => esc\_attr\_\_('Basemap Docs &raquo;', 'waymark'), |
| [70](#L70) | ], |
| [71](#L71) | 'fields' => [ |
| [72](#L72) | 'layer\_name' => [ |
| [73](#L73) | 'name' => 'layer\_name', |
| [74](#L74) | 'id' => 'layer\_name', |
| [75](#L75) | 'type' => 'text', |
| [76](#L76) | 'class' => '', |
| [77](#L77) | 'title' => '<u>' . esc\_html\_\_('Basemap', 'waymark') . '</u> ' . esc\_html\_\_('Name', 'waymark'), |
| [78](#L78) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_name'), |
| [79](#L79) | 'tip' => sprintf(esc\_attr\_\_('The Layer Name will appear in a dropdown list shown by the Map when multiple Basemaps have been entered. You can change the default basemap in the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; basemap=&quot;Basemap Name&quot;]'), |
| [80](#L80) | 'input\_processing' => [ |
| [81](#L81) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Basemap', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [82](#L82) | ], |
| [83](#L83) | ], |
| [84](#L84) | 'layer\_url' => [ |
| [85](#L85) | 'name' => 'layer\_url', |
| [86](#L86) | 'id' => 'layer\_url', |
| [87](#L87) | 'type' => 'text', |
| [88](#L88) | 'class' => '', |
| [89](#L89) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Basemap', 'waymark') . '</span> URL', |
| [90](#L90) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_url'), |
| [91](#L91) | 'tip' => sprintf(esc\_attr\_\_('Many mapping services support the Slippy Map format. Waymark requires URLs that contain {z} (zoom level) and {x}/{y} (tile coordinates). For example the OpenCycleMap URL is %s.', 'waymark'), 'https://tile.thunderforest.com/cycle/{z}/{x}/{y}@2x.png?apikey=[your\_api\_key]'), |
| [92](#L92) | 'tip\_link' => 'https://www.thunderforest.com/docs/map-tiles-api/', |
| [93](#L93) | ], |
| [94](#L94) | 'layer\_attribution' => [ |
| [95](#L95) | 'name' => 'layer\_attribution', |
| [96](#L96) | 'id' => 'layer\_attribution', |
| [97](#L97) | 'type' => 'text', |
| [98](#L98) | 'class' => '', |
| [99](#L99) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Basemap', 'waymark') . '</span> Attribution', |
| [100](#L100) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_attribution'), |
| [101](#L101) | 'tip' => esc\_attr\_\_('Mapping services often have the requirement that attribution is displayed by the map. Text and HTML links are supported.', 'waymark'), |
| [102](#L102) | 'tip\_link' => 'https://www.thunderforest.com/terms/#attribution', |
| [103](#L103) | 'input\_processing' => [ |
| [104](#L104) | '(! strpos($param\_value, "&")) ? htmlspecialchars($param\_value) : $param\_value', |
| [105](#L105) | ], |
| [106](#L106) | ], |
| [107](#L107) | 'layer\_max\_zoom' => [ |
| [108](#L108) | 'name' => 'layer\_max\_zoom', |
| [109](#L109) | 'id' => 'layer\_max\_zoom', |
| [110](#L110) | 'type' => 'text', |
| [111](#L111) | 'class' => 'waymark-short-input', |
| [112](#L112) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Basemap', 'waymark') . '</span> ' . esc\_html\_\_('Max Zoom', 'waymark'), |
| [113](#L113) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_max\_zoom'), |
| [114](#L114) | 'tip' => esc\_attr\_\_('Set a maximum zoom level for this Basemap, the default is 18.', 'waymark'), |
| [115](#L115) | 'input\_processing' => [ |
| [116](#L116) | '(is\_numeric($param\_value) && $param\_value >= 1 && $param\_value <= 18) ? $param\_value : 18;', //Fallback |
| [117](#L117) | ], |
| [118](#L118) | ], |
| [119](#L119) | ], |
| [120](#L120) | ], |
| [121](#L121) | ], |
| [122](#L122) | ]; |
| [123](#L123) |  |
| [124](#L124) | /\*\* |
| [125](#L125) | \* =========================================== |
| [126](#L126) | \* ================= MARKERS ================= |
| [127](#L127) | \* =========================================== |
| [128](#L128) | \*/ |
| [129](#L129) |  |
| [130](#L130) | $this->tabs['markers'] = [ |
| [131](#L131) | 'name' => esc\_html\_\_('Markers', 'waymark'), |
| [132](#L132) | 'description' => '', |
| [133](#L133) | 'sections' => [ |
| [134](#L134) | 'marker\_types' => [ |
| [135](#L135) | 'repeatable' => true, |
| [136](#L136) | 'title' => esc\_html\_\_('Marker', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
| [137](#L137) | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Markers are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
| [138](#L138) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [139](#L139) | 'help' => [ |
| [140](#L140) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
| [141](#L141) | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
| [142](#L142) | ], |
| [143](#L143) | 'fields' => [ |
| [144](#L144) | 'marker\_title' => [ |
| [145](#L145) | 'name' => 'marker\_title', |
| [146](#L146) | 'id' => 'marker\_title', |
| [147](#L147) | 'type' => 'text', |
| [148](#L148) | 'class' => 'waymark-uneditable', |
| [149](#L149) | 'title' => '<u>' . esc\_html\_\_('Marker', 'waymark') . '</u> ' . esc\_html\_\_('Label', 'waymark'), |
| [150](#L150) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_title'), |
| [151](#L151) | 'tip' => esc\_attr\_\_('What kind of Marker is this? E.g. "Photo", "Grocery Store", "Warning!". Once saved, Marker labels can not be edited. The Marker Label is displayed in the Tooltip (when hovering over the Marker) and in the Info Window (once the Marker is clicked). Hide in Settings > Map > Misc. > Type Labels.', 'waymark'), |
| [152](#L152) | 'input\_processing' => [ |
| [153](#L153) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Marker', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [154](#L154) | ], |
| [155](#L155) | ], |
| [156](#L156) | 'marker\_shape' => [ |
| [157](#L157) | 'name' => 'marker\_shape', |
| [158](#L158) | 'id' => 'marker\_shape', |
| [159](#L159) | 'type' => 'select', |
| [160](#L160) | 'class' => '', |
| [161](#L161) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Shape', 'waymark'), |
| [162](#L162) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_shape'), |
| [163](#L163) | 'tip' => esc\_attr\_\_('Which shape of Marker to use. Circles and Squares are centered at the specified location, Markers point down to that location.', 'waymark'), |
| [164](#L164) | 'options' => [ |
| [165](#L165) | 'marker' => esc\_html\_\_('Marker', 'waymark'), |
| [166](#L166) | 'circle' => esc\_html\_\_('Circle', 'waymark'), |
| [167](#L167) | 'rectangle' => esc\_html\_\_('Square', 'waymark'), |
| [168](#L168) | ], |
| [169](#L169) | ], |
| [170](#L170) | 'marker\_size' => [ |
| [171](#L171) | 'name' => 'marker\_size', |
| [172](#L172) | 'id' => 'marker\_size', |
| [173](#L173) | 'type' => 'select', |
| [174](#L174) | 'class' => '', |
| [175](#L175) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Size', 'waymark'), |
| [176](#L176) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_size'), |
| [177](#L177) | 'tip' => esc\_attr\_\_('Which size of Marker to use.', 'waymark'), |
| [178](#L178) | 'options' => [ |
| [179](#L179) | 'small' => esc\_html\_\_('Small', 'waymark'), |
| [180](#L180) | 'medium' => esc\_html\_\_('Medium', 'waymark'), |
| [181](#L181) | 'large' => esc\_html\_\_('Large', 'waymark'), |
| [182](#L182) | ], |
| [183](#L183) | ], |
| [184](#L184) | 'marker\_colour' => [ |
| [185](#L185) | 'name' => 'marker\_colour', |
| [186](#L186) | 'id' => 'marker\_colour', |
| [187](#L187) | 'type' => 'text', |
| [188](#L188) | 'class' => 'waymark-short-input', |
| [189](#L189) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Background', 'waymark'), |
| [190](#L190) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_colour'), |
| [191](#L191) | 'tip' => esc\_attr\_\_('The Marker background colour. Click "Select Colour" to select.', 'waymark'), |
| [192](#L192) | 'input\_processing' => [ |
| [193](#L193) | '(! empty($param\_value)) ? $param\_value : "white";', //Fallback |
| [194](#L194) | ], |
| [195](#L195) | ], |
| [196](#L196) | 'marker\_display' => [ |
| [197](#L197) | 'name' => 'marker\_display', |
| [198](#L198) | 'id' => 'marker\_display', |
| [199](#L199) | 'type' => 'boolean', |
| [200](#L200) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Show Initially', 'waymark'), |
| [201](#L201) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_display'), |
| [202](#L202) | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
| [203](#L203) | 'input\_processing' => [ |
| [204](#L204) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [205](#L205) | ], |
| [206](#L206) | ], |
| [207](#L207) | 'marker\_submission' => [ |
| [208](#L208) | 'name' => 'marker\_submission', |
| [209](#L209) | 'id' => 'marker\_submission', |
| [210](#L210) | 'type' => 'boolean', |
| [211](#L211) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Submissions?', 'waymark'), |
| [212](#L212) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_submission'), |
| [213](#L213) | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
| [214](#L214) | 'input\_processing' => [ |
| [215](#L215) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [216](#L216) | ], |
| [217](#L217) | ], |
| [218](#L218) | 'icon\_type' => [ |
| [219](#L219) | 'name' => 'icon\_type', |
| [220](#L220) | 'id' => 'icon\_type', |
| [221](#L221) | 'type' => 'select', |
| [222](#L222) | 'class' => '', |
| [223](#L223) | 'title' => '<span style="display:inline-block;min-width:50px">' . esc\_html\_\_('Icon', 'waymark') . '</span>' . esc\_html\_\_('Type', 'waymark'), |
| [224](#L224) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'icon\_type'), |
| [225](#L225) | 'tip' => esc\_attr\_\_('Font Icons are available from Font Awesome and Ionic Icons. Simple Text or Emojis are supported, as well as custom HTML. So you can pretty much use anything you like!', 'waymark'), |
| [226](#L226) | 'tip\_link' => 'https://emojifinder.com/', |
| [227](#L227) | 'options' => [ |
| [228](#L228) | 'icon' => esc\_html\_\_('Font Icon', 'waymark'), |
| [229](#L229) | 'text' => esc\_html\_\_('Text (or Emoji!)', 'waymark'), |
| [230](#L230) | 'html' => esc\_html\_\_('HTML', 'waymark'), |
| [231](#L231) | ], |
| [232](#L232) | ], |
| [233](#L233) | 'marker\_icon' => [ |
| [234](#L234) | 'name' => 'marker\_icon', |
| [235](#L235) | 'id' => 'marker\_icon', |
| [236](#L236) | 'type' => 'text', |
| [237](#L237) | 'class' => 'waymark-short-input', |
| [238](#L238) | 'title' => '<span class="waymark-invisible" style="display:inline-block;min-width:50px">' . esc\_html\_\_('Icon', 'waymark') . '</span><span class="waymark-icon-type">' . esc\_html\_\_('Name', 'waymark') . '</span>', |
| [239](#L239) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_icon'), |
| [240](#L240) | 'tip' => esc\_attr\_\_('The desired icon name from Ionicons or Font Awesome, e.g. "ion-camera", or "fa-camera". Click the links to see the full list of icons available.|Text to display inside the Marker, in the chosen colour. Space is very limited! Pro Tip: adjust text size using CSS; for all Markers: .waymark-icon-text{font-size: 18px}, or by Type: .waymark-marker-photo .waymark-icon-text{...}. Use your browser\'s inspector to dig for Type class names.|The HTML entered will be added inside each Marker. Pro Tip! HTML Entities supported (e.g. &amp;cross; as well as Unicode and Emojis!), or provide HTML to integrate with other Icon providers.', 'waymark'), |
| [241](#L241) | 'input\_processing' => [ |
| [242](#L242) | '(strpbrk($param\_value, "\">")) ? htmlspecialchars($param\_value) : $param\_value', |
| [243](#L243) | ], |
| [244](#L244) | 'append' => '<div class="waymark-icons-help"><a href="https://ionic.io/ionicons/v2/cheatsheet.html">Ionic Icons</a><a href="https://fontawesome.com/v4.7.0/cheatsheet/">Font Awesome</a></div>', |
| [245](#L245) | ], |
| [246](#L246) | 'icon\_colour' => [ |
| [247](#L247) | 'name' => 'icon\_colour', |
| [248](#L248) | 'id' => 'icon\_colour', |
| [249](#L249) | 'type' => 'text', |
| [250](#L250) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [251](#L251) | 'title' => '<span class="waymark-invisible" style="display:inline-block;min-width:50px">' . esc\_html\_\_('Icon', 'waymark') . '</span>' . esc\_html\_\_('Colour', 'waymark'), |
| [252](#L252) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'icon\_colour'), |
| [253](#L253) | 'tip' => esc\_attr\_\_('The colour of the icon. Click "Select Colour" to select.', 'waymark'), |
| [254](#L254) | 'input\_processing' => [ |
| [255](#L255) | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
| [256](#L256) | ], |
| [257](#L257) | ], |
| [258](#L258) | ], |
| [259](#L259) | ], |
| [260](#L260) | ], |
| [261](#L261) | ]; |
| [262](#L262) |  |
| [263](#L263) | /\*\* |
| [264](#L264) | \* =========================================== |
| [265](#L265) | \* ================== LINES ================== |
| [266](#L266) | \* =========================================== |
| [267](#L267) | \*/ |
| [268](#L268) |  |
| [269](#L269) | $this->tabs['lines'] = [ |
| [270](#L270) | 'name' => esc\_html\_\_('Lines', 'waymark'), |
| [271](#L271) | 'description' => '', |
| [272](#L272) | 'sections' => [ |
| [273](#L273) | 'line\_types' => [ |
| [274](#L274) | 'repeatable' => true, |
| [275](#L275) | 'title' => esc\_html\_\_('Line', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
| [276](#L276) | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Lines are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
| [277](#L277) | 'help' => [ |
| [278](#L278) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
| [279](#L279) | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
| [280](#L280) | ], |
| [281](#L281) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [282](#L282) | 'fields' => [ |
| [283](#L283) | 'line\_title' => [ |
| [284](#L284) | 'name' => 'line\_title', |
| [285](#L285) | 'id' => 'line\_title', |
| [286](#L286) | 'type' => 'text', |
| [287](#L287) | 'class' => 'waymark-uneditable', |
| [288](#L288) | 'title' => '<u>' . esc\_html\_\_('Line', 'waymark') . '</u> ' . esc\_html\_\_('Label', 'waymark'), |
| [289](#L289) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_title'), |
| [290](#L290) | 'tip' => esc\_attr\_\_('What kind of Line is this? E.g. "Easy", "Walking Only", "Dark Red". The Line Label is displayed in the Tooltip (when hovering over the Line) and in the Line Info Window. Once saved, Line labels can not be edited.', 'waymark'), |
| [291](#L291) | 'input\_processing' => [ |
| [292](#L292) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Line', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [293](#L293) | ], |
| [294](#L294) | ], |
| [295](#L295) | 'line\_colour' => [ |
| [296](#L296) | 'name' => 'line\_colour', |
| [297](#L297) | 'id' => 'line\_colour', |
| [298](#L298) | 'type' => 'text', |
| [299](#L299) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [300](#L300) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Colour', 'waymark'), |
| [301](#L301) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_colour'), |
| [302](#L302) | 'tip' => esc\_attr\_\_('The colour of the Line. Click "Select Colour" to select.', 'waymark'), |
| [303](#L303) | 'input\_processing' => [ |
| [304](#L304) | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
| [305](#L305) | ], |
| [306](#L306) | ], |
| [307](#L307) | 'line\_weight' => [ |
| [308](#L308) | 'name' => 'line\_weight', |
| [309](#L309) | 'id' => 'line\_weight', |
| [310](#L310) | 'type' => 'text', |
| [311](#L311) | 'class' => 'waymark-short-input', |
| [312](#L312) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Weight', 'waymark'), |
| [313](#L313) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_weight'), |
| [314](#L314) | 'tip' => esc\_attr\_\_('The width of the Line, in pixels.', 'waymark'), |
| [315](#L315) | 'input\_processing' => [ |
| [316](#L316) | '(is\_numeric($param\_value)) ? $param\_value : 3;', //Fallback |
| [317](#L317) | ], |
| [318](#L318) | ], |
| [319](#L319) | 'line\_opacity' => [ |
| [320](#L320) | 'name' => 'line\_opacity', |
| [321](#L321) | 'id' => 'line\_opacity', |
| [322](#L322) | 'type' => 'text', |
| [323](#L323) | 'class' => 'waymark-short-input', |
| [324](#L324) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Opacity', 'waymark'), |
| [325](#L325) | 'default' => Waymark\_Config::get\_default('lines', 'line\_types', 'line\_opacity'), |
| [326](#L326) | 'tip' => esc\_attr\_\_('The opacity of the Line, between 0.0 and 1.0 (e.g. "0.5").', 'waymark'), |
| [327](#L327) | 'input\_processing' => [ |
| [328](#L328) | '(is\_numeric($param\_value) && $param\_value > 0 && $param\_value <= 1) ? $param\_value : 0.7;', //Fallback |
| [329](#L329) | ], |
| [330](#L330) | ], |
| [331](#L331) | 'line\_display' => [ |
| [332](#L332) | 'name' => 'line\_display', |
| [333](#L333) | 'id' => 'line\_display', |
| [334](#L334) | 'type' => 'boolean', |
| [335](#L335) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Show Initially', 'waymark'), |
| [336](#L336) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_display'), |
| [337](#L337) | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
| [338](#L338) | 'input\_processing' => [ |
| [339](#L339) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [340](#L340) | ], |
| [341](#L341) | ], |
| [342](#L342) | 'line\_submission' => [ |
| [343](#L343) | 'name' => 'line\_submission', |
| [344](#L344) | 'id' => 'line\_submission', |
| [345](#L345) | 'type' => 'boolean', |
| [346](#L346) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Submissions?', 'waymark'), |
| [347](#L347) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_submission'), |
| [348](#L348) | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
| [349](#L349) | 'input\_processing' => [ |
| [350](#L350) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [351](#L351) | ], |
| [352](#L352) | ], |
| [353](#L353) | ], |
| [354](#L354) | ], |
| [355](#L355) | ], |
| [356](#L356) | ]; |
| [357](#L357) |  |
| [358](#L358) | /\*\* |
| [359](#L359) | \* =========================================== |
| [360](#L360) | \* ================= SHAPES ================== |
| [361](#L361) | \* =========================================== |
| [362](#L362) | \*/ |
| [363](#L363) |  |
| [364](#L364) | $this->tabs['shapes'] = [ |
| [365](#L365) | 'name' => esc\_html\_\_('Shapes', 'waymark'), |
| [366](#L366) | 'description' => '', |
| [367](#L367) | 'sections' => [ |
| [368](#L368) | 'shape\_types' => [ |
| [369](#L369) | 'repeatable' => true, |
| [370](#L370) | 'title' => esc\_html\_\_('Shape', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
| [371](#L371) | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Shapes are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
| [372](#L372) | 'help' => [ |
| [373](#L373) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
| [374](#L374) | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
| [375](#L375) | ], |
| [376](#L376) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [377](#L377) | 'fields' => [ |
| [378](#L378) | 'shape\_title' => [ |
| [379](#L379) | 'name' => 'shape\_title', |
| [380](#L380) | 'id' => 'shape\_title', |
| [381](#L381) | 'type' => 'text', |
| [382](#L382) | 'class' => 'waymark-uneditable', |
| [383](#L383) | 'title' => '<u>' . esc\_html\_\_('Shape', 'waymark') . '</u> ' . esc\_html\_\_('Label', 'waymark'), |
| [384](#L384) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_title'), |
| [385](#L385) | 'tip' => esc\_attr\_\_('What kind of Shape is this? E.g. "Park", "Danger!", "Light Blue". The Shape Label is displayed in the Tooltip (when hovering over the Shape) and in the Shape Info Window. Once saved, Shape labels can not be edited.', 'waymark'), |
| [386](#L386) | 'input\_processing' => [ |
| [387](#L387) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Shape', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [388](#L388) | ], |
| [389](#L389) | ], |
| [390](#L390) | 'shape\_colour' => [ |
| [391](#L391) | 'name' => 'shape\_colour', |
| [392](#L392) | 'id' => 'shape\_colour', |
| [393](#L393) | 'type' => 'text', |
| [394](#L394) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [395](#L395) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Colour', 'waymark'), |
| [396](#L396) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_colour'), |
| [397](#L397) | 'tip' => esc\_attr\_\_('The colour of the Shape. Click "Select Colour" to select.', 'waymark'), |
| [398](#L398) | 'input\_processing' => [ |
| [399](#L399) | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
| [400](#L400) | ], |
| [401](#L401) | ], |
| [402](#L402) | 'fill\_opacity' => [ |
| [403](#L403) | 'name' => 'fill\_opacity', |
| [404](#L404) | 'id' => 'fill\_opacity', |
| [405](#L405) | 'type' => 'text', |
| [406](#L406) | 'class' => 'waymark-short-input', |
| [407](#L407) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Fill Opacity', 'waymark'), |
| [408](#L408) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'fill\_opacity'), |
| [409](#L409) | 'tip' => esc\_attr\_\_('The opacity of the inside of the shape, between 0.0 and 1.0 (e.g. "0.5").', 'waymark'), |
| [410](#L410) | 'input\_processing' => [ |
| [411](#L411) | '(is\_numeric($param\_value) && $param\_value > 0 && $param\_value <= 1) ? $param\_value : 0.5;', //Fallback |
| [412](#L412) | ], |
| [413](#L413) | ], |
| [414](#L414) | 'shape\_display' => [ |
| [415](#L415) | 'name' => 'shape\_display', |
| [416](#L416) | 'id' => 'shape\_display', |
| [417](#L417) | 'type' => 'boolean', |
| [418](#L418) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Show Initially', 'waymark'), |
| [419](#L419) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_display'), |
| [420](#L420) | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
| [421](#L421) | 'input\_processing' => [ |
| [422](#L422) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [423](#L423) | ], |
| [424](#L424) | ], |
| [425](#L425) | 'shape\_submission' => [ |
| [426](#L426) | 'name' => 'shape\_submission', |
| [427](#L427) | 'id' => 'shape\_submission', |
| [428](#L428) | 'type' => 'boolean', |
| [429](#L429) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Submissions?', 'waymark'), |
| [430](#L430) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_submission'), |
| [431](#L431) | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
| [432](#L432) | 'input\_processing' => [ |
| [433](#L433) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [434](#L434) | ], |
| [435](#L435) | ], |
| [436](#L436) | ], |
| [437](#L437) | ], |
| [438](#L438) | ], |
| [439](#L439) | ]; |
| [440](#L440) |  |
| [441](#L441) | /\*\* |
| [442](#L442) | \* =========================================== |
| [443](#L443) | \* =================== META ================== |
| [444](#L444) | \* =========================================== |
| [445](#L445) | \*/ |
| [446](#L446) |  |
| [447](#L447) | $meta\_group\_options = Waymark\_Helper::repeatable\_setting\_option\_array('meta', 'groups', 'group\_title'); |
| [448](#L448) | $meta\_group\_options = array\_merge(['' => 'None'], $meta\_group\_options); |
| [449](#L449) |  |
| [450](#L450) | $this->tabs['meta'] = [ |
| [451](#L451) | 'name' => esc\_html\_\_('Meta', 'waymark'), |
| [452](#L452) | 'description' => '', |
| [453](#L453) | 'sections' => [ |
| [454](#L454) | 'inputs' => [ |
| [455](#L455) | 'repeatable' => true, |
| [456](#L456) | 'title' => esc\_html\_\_('Meta', 'waymark'), |
| [457](#L457) | 'description' => '<span class="waymark-lead">' . sprintf(\_\_('Create additional input fields that appear underneath the Map Editor. Any Meta that has been input is displayed on the <a href="%s">Map Details</a> page, and can also be displayed by the Shortcode.', 'waymark'), 'https://www.waymark.dev/map/route-map/') . '</span>', |
| [458](#L458) | 'help' => [ |
| [459](#L459) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/meta')), |
| [460](#L460) | 'text' => esc\_attr\_\_('Meta Docs &raquo;', 'waymark'), |
| [461](#L461) | ], |
| [462](#L462) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [463](#L463) | 'fields' => [ |
| [464](#L464) | 'meta\_title' => [ |
| [465](#L465) | 'name' => 'meta\_title', |
| [466](#L466) | 'id' => 'meta\_title', |
| [467](#L467) | 'type' => 'text', |
| [468](#L468) | 'class' => '', |
| [469](#L469) | 'title' => '<u>' . esc\_html\_\_('Meta', 'waymark') . '</u> ' . esc\_html\_\_('Title', 'waymark'), |
| [470](#L470) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_title'), |
| [471](#L471) | 'tip' => esc\_attr\_\_('The title appears next to the input field.', 'waymark'), |
| [472](#L472) | 'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
| [473](#L473) | 'input\_processing' => [ |
| [474](#L474) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Meta', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [475](#L475) | ], |
| [476](#L476) | ], |
| [477](#L477) | 'meta\_default' => [ |
| [478](#L478) | 'name' => 'meta\_default', |
| [479](#L479) | 'id' => 'meta\_default', |
| [480](#L480) | 'type' => 'text', |
| [481](#L481) | 'class' => '', |
| [482](#L482) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Default', 'waymark'), |
| [483](#L483) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_default'), |
| [484](#L484) | 'tip' => esc\_attr\_\_('The default value for the input field. For Select and Multi-Select enter the option/comma-separated options to be selected by default.', 'waymark'), |
| [485](#L485) | ], |
| [486](#L486) | 'meta\_tip' => [ |
| [487](#L487) | 'name' => 'meta\_tip', |
| [488](#L488) | 'id' => 'meta\_tip', |
| [489](#L489) | 'type' => 'text', |
| [490](#L490) | 'class' => '', |
| [491](#L491) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Tip', 'waymark'), |
| [492](#L492) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_tip'), |
| [493](#L493) | 'tip' => esc\_attr\_\_('A tip provides additional information about an input field... just like this!', 'waymark'), |
| [494](#L494) | ], |
| [495](#L495) | 'meta\_type' => [ |
| [496](#L496) | 'name' => 'meta\_type', |
| [497](#L497) | 'id' => 'meta\_type', |
| [498](#L498) | 'type' => 'select', |
| [499](#L499) | 'class' => '', |
| [500](#L500) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Type', 'waymark'), |
| [501](#L501) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_type'), |
| [502](#L502) | 'tip' => esc\_attr\_\_('The type of input field to use.', 'waymark'), |
| [503](#L503) | 'options' => [ |
| [504](#L504) | 'text' => esc\_html\_\_('Text', 'waymark'), |
| [505](#L505) | 'textarea' => esc\_html\_\_('Textarea', 'waymark'), |
| [506](#L506) | 'textarea\_rich' => esc\_html\_\_('Rich Text', 'waymark'), |
| [507](#L507) | 'select' => esc\_html\_\_('Select', 'waymark'), |
| [508](#L508) | 'select\_multi' => esc\_html\_\_('Multi-Select', 'waymark'), |
| [509](#L509) | ], |
| [510](#L510) | ], |
| [511](#L511) | 'meta\_options' => [ |
| [512](#L512) | 'name' => 'meta\_options', |
| [513](#L513) | 'id' => 'meta\_options', |
| [514](#L514) | 'type' => 'text', |
| [515](#L515) | 'class' => '', |
| [516](#L516) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Options', 'waymark'), |
| [517](#L517) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_options'), |
| [518](#L518) | 'tip' => esc\_attr\_\_('A comma-separated list of options for the input.', 'waymark'), |
| [519](#L519) | ], |
| [520](#L520) | 'meta\_group' => [ |
| [521](#L521) | 'name' => 'meta\_group', |
| [522](#L522) | 'id' => 'meta\_group', |
| [523](#L523) | 'type' => 'select', |
| [524](#L524) | 'options' => $meta\_group\_options, |
| [525](#L525) | 'class' => (sizeof($meta\_group\_options) === 1) ? 'waymark-hidden' : '', |
| [526](#L526) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Group', 'waymark'), |
| [527](#L527) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_group'), |
| [528](#L528) | 'tip' => esc\_attr\_\_('Which group this Meta belongs to (if any). Meta in the same group will be displayed together when editing and viewing Maps. Meta not in a group will be displayed above any groups.', 'waymark'), |
| [529](#L529) | ], |
| [530](#L530) | 'meta\_shortcode' => [ |
| [531](#L531) | 'name' => 'meta\_shortcode', |
| [532](#L532) | 'id' => 'meta\_shortcode', |
| [533](#L533) | 'type' => 'boolean', |
| [534](#L534) | 'class' => '', |
| [535](#L535) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('In Shortcode?', 'waymark'), |
| [536](#L536) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_shortcode'), |
| [537](#L537) | 'tip' => esc\_attr\_\_('Whether this content should be displayed when embedding a Map using the Shortcode.', 'waymark'), |
| [538](#L538) | ], |
| [539](#L539) | 'meta\_submission' => [ |
| [540](#L540) | 'name' => 'meta\_submission', |
| [541](#L541) | 'id' => 'meta\_submission', |
| [542](#L542) | 'type' => 'boolean', |
| [543](#L543) | 'class' => '', |
| [544](#L544) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('In Submissions?', 'waymark'), |
| [545](#L545) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_submission'), |
| [546](#L546) | 'tip' => esc\_attr\_\_('Make this Meta available in front-end Submissions?', 'waymark'), |
| [547](#L547) | ], |
| [548](#L548) | ], |
| [549](#L549) | ], |
| [550](#L550) | 'groups' => [ |
| [551](#L551) | 'repeatable' => true, |
| [552](#L552) | 'title' => esc\_html\_\_('Groups', 'waymark'), |
| [553](#L553) | 'description' => '<span class="waymark-lead">' . \_\_('Create groups to organise your Map Meta. Meta in the same group will be displayed together when editing and viewing Maps.', 'waymark') . '</span>', |
| [554](#L554) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> Drag to re-order, remove all to disable groups.', 'waymark') . '</small>', |
| [555](#L555) | 'fields' => [ |
| [556](#L556) | 'group\_title' => [ |
| [557](#L557) | 'name' => 'group\_title', |
| [558](#L558) | 'id' => 'group\_title', |
| [559](#L559) | 'type' => 'text', |
| [560](#L560) | 'class' => '', |
| [561](#L561) | 'title' => '<u>' . esc\_html\_\_('Group', 'waymark') . '</u> ' . esc\_html\_\_('Title', 'waymark'), |
| [562](#L562) | 'default' => '', |
| [563](#L563) | 'tip' => esc\_attr\_\_('The title appears above the Meta in that group.', 'waymark'), |
| [564](#L564) | //                                                      'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
| [565](#L565) | //                                                      'input\_processing' => array( |
| [566](#L566) | //                                                              '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Meta', 'waymark') . ' ' . substr(md5(rand(0,999999)), 0, 5) . '";'   //Fallback |
| [567](#L567) | //                                                      ) |
| [568](#L568) | ], |
| [569](#L569) | ], |
| [570](#L570) | ], |
| [571](#L571) | ], |
| [572](#L572) | ]; |
| [573](#L573) |  |
| [574](#L574) | /\*\* |
| [575](#L575) | \* =========================================== |
| [576](#L576) | \* =============== PROPERTIES ================ |
| [577](#L577) | \* =========================================== |
| [578](#L578) | \*/ |
| [579](#L579) |  |
| [580](#L580) | $this->tabs['properties'] = [ |
| [581](#L581) | 'name' => esc\_html\_\_('Properties', 'waymark'), |
| [582](#L582) | 'description' => '', |
| [583](#L583) | 'sections' => [ |
| [584](#L584) | 'props' => [ |
| [585](#L585) | 'repeatable' => true, |
| [586](#L586) | 'title' => esc\_html\_\_('Properties', 'waymark'), |
| [587](#L587) | 'description' => '<span class="waymark-lead">' . \_\_('Read <b><a href="https://geojson.org/">GeoJSON</a></b> feature properties when importing.', 'waymark') . '</span><br /><br />' . \_\_('If Waymark finds data for the property keys below it will stored when it is imported. These can be automatically appended to the Overlay Description, or accessed programatically the <code>layer.feature.properties</code> Object.', 'waymark'), |
| [588](#L588) | 'footer' => '<small>' . \_\_(sprintf('For example, the properties below can be accessed through the %s, %s, %s Property Keys:', '<code>created\_date</code>', '<code>updated\_date</code>', '<code>expires\_date</code>'), 'waymark') . '</small> |
| [589](#L589) | <pre><code>{ |
| [590](#L590) | "type": "FeatureCollection", |
| [591](#L591) | "features": [ |
| [592](#L592) | { |
| [593](#L593) | "geometry": { ... }, |
| [594](#L594) | "type": "Feature", |
| [595](#L595) | "properties": { |
| [596](#L596) | "created\_date": "2021-07-15T00:42:41Z", |
| [597](#L597) | "updated\_date": "2021-07-16T00:42:41Z", |
| [598](#L598) | "expires\_date": "2021-07-17T00:42:41Z" |
| [599](#L599) | } |
| [600](#L600) | } |
| [601](#L601) | ] |
| [602](#L602) | } |
| [603](#L603) | </code></pre>', |
| [604](#L604) |  |
| [605](#L605) | //                                      'help' => array( |
| [606](#L606) | //                                              'url' => esc\_attr(Waymark\_Helper::site\_url('docs/meta')), |
| [607](#L607) | //                                              'text' => esc\_attr\_\_('Meta Docs &raquo;', 'waymark') |
| [608](#L608) | //                                      ), |
| [609](#L609) | 'fields' => [ |
| [610](#L610) | 'property\_key' => [ |
| [611](#L611) | 'name' => 'property\_key', |
| [612](#L612) | 'id' => 'property\_key', |
| [613](#L613) | 'type' => 'text', |
| [614](#L614) | 'class' => '', |
| [615](#L615) | 'title' => '<u>' . esc\_html\_\_('Property', 'waymark') . '</u> ' . esc\_html\_\_('Key', 'waymark'), |
| [616](#L616) | 'default' => Waymark\_Config::get\_setting('property', 'props', 'property\_key'), |
| [617](#L617) | 'tip' => esc\_attr\_\_('This is the key associated with the data you are trying to access, i.e. "properties": {"property\_key": "Some content here"}', 'waymark'), |
| [618](#L618) | //                                                      'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
| [619](#L619) | 'input\_processing' => [ |
| [620](#L620) | 'preg\_replace("/[^0-9a-zA-Z -\_.]/", "", $param\_value);', |
| [621](#L621) | ], |
| [622](#L622) | ], |
| [623](#L623) | 'property\_title' => [ |
| [624](#L624) | 'name' => 'property\_title', |
| [625](#L625) | 'id' => 'property\_title', |
| [626](#L626) | 'type' => 'text', |
| [627](#L627) | 'class' => '', |
| [628](#L628) | 'title' => '<u><span class="waymark-invisible">' . esc\_html\_\_('Property', 'waymark') . '</span></u> ' . esc\_html\_\_('Title', 'waymark'), |
| [629](#L629) | 'default' => Waymark\_Config::get\_setting('property', 'props', 'property\_title'), |
| [630](#L630) | 'tip' => esc\_attr\_\_('The value for this property will be added to the Overlay Description under this title.', 'waymark'), |
| [631](#L631) | //                                                      'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '' |
| [632](#L632) | ], |
| [633](#L633) | ], |
| [634](#L634) | ], |
| [635](#L635) |  |
| [636](#L636) | 'options' => [ |
| [637](#L637) | 'title' => esc\_html\_\_('Options', 'waymark'), |
| [638](#L638) | 'description' => 'Append listed Properties to the Overlay Description.', |
| [639](#L639) | 'footer' => sprintf(\_\_('<small><b>Pro Tip!</b> Properties are added to the Overlay Description with class names that can be used to target them, e.g. %s.</small>', 'waymark'), '<code class="waymark-code" style="display:inline">&lt;p class="waymark-property waymark-property-property\_key"&gt;&lt;b&gt;property\_title&lt;/b&gt;&lt;br&gt;proprty\_value&lt;/p&gt;</code>'), |
| [640](#L640) | 'fields' => [ |
| [641](#L641) | 'description\_append' => [ |
| [642](#L642) | 'name' => 'description\_append', |
| [643](#L643) | 'id' => 'description\_append', |
| [644](#L644) | 'type' => 'boolean', |
| [645](#L645) | 'title' => esc\_html\_\_('Append', 'waymark'), |
| [646](#L646) | 'default' => Waymark\_Config::get\_setting('property', 'options', 'description\_append'), |
| [647](#L647) | 'tip' => esc\_attr\_\_('Append the property value to the Overlay Description.', 'waymark'), |
| [648](#L648) |  |
| [649](#L649) | ], |
| [650](#L650) | ], |
| [651](#L651) | ], |
| [652](#L652) | ], |
| [653](#L653) | ]; |
| [654](#L654) |  |
| [655](#L655) | //Prepare Basemap values for editor option |
| [656](#L656) | $tile\_layers = Waymark\_Config::get\_item('tiles', 'layers', true); |
| [657](#L657) |  |
| [658](#L658) | //Each layer |
| [659](#L659) | $basemap\_options = []; |
| [660](#L660) | foreach ($tile\_layers as $layer) { |
| [661](#L661) | //If name exists |
| [662](#L662) | if (array\_key\_exists('layer\_name', $layer)) { |
| [663](#L663) | //Add as option |
| [664](#L664) | $basemap\_options[$layer['layer\_name']] = $layer['layer\_name']; |
| [665](#L665) | } |
| [666](#L666) | } |
| [667](#L667) |  |
| [668](#L668) | /\*\* |
| [669](#L669) | \* =========================================== |
| [670](#L670) | \* =============== SUBMISSIONS =============== |
| [671](#L671) | \* =========================================== |
| [672](#L672) | \*/ |
| [673](#L673) |  |
| [674](#L674) | //Build list of Collections to use as <select> options |
| [675](#L675) | $collection\_objects = get\_terms([ |
| [676](#L676) | 'taxonomy' => 'waymark\_collection', |
| [677](#L677) | 'hide\_empty' => false, |
| [678](#L678) | ]); |
| [679](#L679) | $collection\_array = [ |
| [680](#L680) | '' => ' - ', |
| [681](#L681) | ]; |
| [682](#L682) | foreach ($collection\_objects as $collection) { |
| [683](#L683) | $collection\_array[$collection->term\_id] = $collection->name; |
| [684](#L684) | } |
| [685](#L685) |  |
| [686](#L686) | //Roles |
| [687](#L687) | if (! function\_exists('get\_editable\_roles')) { |
| [688](#L688) | require\_once ABSPATH . 'wp-admin/includes/user.php'; |
| [689](#L689) | } |
| [690](#L690) |  |
| [691](#L691) | $role\_options = []; |
| [692](#L692) | foreach (get\_editable\_roles() as $key => $role) { |
| [693](#L693) | $role\_options[$key] = $role['name']; |
| [694](#L694) | } |
| [695](#L695) | unset($role\_options['administrator']); |
| [696](#L696) |  |
| [697](#L697) | //Public upload dir |
| [698](#L698) | $upload\_dir = wp\_upload\_dir(); |
| [699](#L699) | $upload\_dir['subdir'] = ($upload\_dir['subdir']) ? $upload\_dir['subdir'] : '/'; |
| [700](#L700) |  |
| [701](#L701) | $this->tabs['submission'] = [ |
| [702](#L702) | 'name' => esc\_html\_\_('Submissions', 'waymark'), |
| [703](#L703) | 'sections' => [ |
| [704](#L704) | //Global |
| [705](#L705) | 'global' => [ |
| [706](#L706) | 'title' => esc\_html\_\_('Front-End Submissions', 'waymark'), |
| [707](#L707) | 'description' => sprintf(\_\_('Use the %s Shortcode to allow Map submissions from the front-end of your site.', 'waymark'), '<span class="waymark-code">[Waymark content="submission"]</span>'), |
| [708](#L708) | 'help' => [ |
| [709](#L709) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/submissions')), |
| [710](#L710) | 'text' => esc\_attr\_\_('Submission Docs &raquo;', 'waymark'), |
| [711](#L711) | ], |
| [712](#L712) | 'fields' => [ |
| [713](#L713) | 'submission\_enable' => [ |
| [714](#L714) | 'name' => 'submission\_enable', |
| [715](#L715) | 'id' => 'submission\_enable', |
| [716](#L716) | 'type' => 'boolean', |
| [717](#L717) | 'title' => esc\_html\_\_('Allow Submissions', 'waymark'), |
| [718](#L718) | 'default' => Waymark\_Config::get\_setting('submission', 'global', 'submission\_enable'), |
| [719](#L719) | 'tip' => esc\_attr\_\_('Submissions will be available only to site administrators by default, but can also be allowed for registered users or even to guests without registration.', 'waymark'), |
| [720](#L720) | ], |
| [721](#L721) | ], |
| [722](#L722) | ], |
| [723](#L723) | //By role |
| [724](#L724) | 'from\_users' => [ |
| [725](#L725) | 'title' => esc\_html\_\_('User Submissions', 'waymark'), |
| [726](#L726) | 'description' => esc\_html\_\_('Allow registered users to create Maps from the front-end.', 'waymark'), |
| [727](#L727) | 'fields' => [ |
| [728](#L728) | 'submission\_roles' => [ |
| [729](#L729) | 'name' => 'submission\_roles', |
| [730](#L730) | 'id' => 'submission\_roles', |
| [731](#L731) | 'type' => 'select\_multi', |
| [732](#L732) | 'class' => 'waymark-align-top', |
| [733](#L733) | 'title' => esc\_html\_\_('Allow From', 'waymark'), |
| [734](#L734) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_roles'), |
| [735](#L735) | 'tip' => esc\_attr\_\_('Users with the selected roles will be able to make Submissions through the front-end', 'waymark'), |
| [736](#L736) | 'options' => $role\_options, |
| [737](#L737) | ], |
| [738](#L738) | 'submission\_features' => [ |
| [739](#L739) | 'name' => 'submission\_features', |
| [740](#L740) | 'id' => 'submission\_users\_features', |
| [741](#L741) | 'type' => 'select\_multi', |
| [742](#L742) | 'class' => 'waymark-align-top', |
| [743](#L743) | 'title' => esc\_html\_\_('Editor Features', 'waymark'), |
| [744](#L744) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_features'), |
| [745](#L745) | 'tip' => esc\_attr\_\_('What features to offer in the Editor. Important! Uploaded images are added to the Media Library, reading from file does not keep a copy of the file on the server. Whether an individual Meta input is displayed can be set in the Settings > Map > Meta.', 'waymark'), |
| [746](#L746) | 'options' => [ |
| [747](#L747) | 'draw' => esc\_attr\_\_('Drawing', 'waymark'), |
| [748](#L748) | 'photo' => esc\_attr\_\_('Image upload', 'waymark'), |
| [749](#L749) | 'file' => esc\_attr\_\_('Read from File', 'waymark'), |
| [750](#L750) | 'title' => esc\_attr\_\_('Title', 'waymark'), |
| [751](#L751) | 'meta' => esc\_attr\_\_('Meta', 'waymark'), |
| [752](#L752) | ], |
| [753](#L753) | ], |
| [754](#L754) | 'submission\_status' => [ |
| [755](#L755) | 'name' => 'submission\_status', |
| [756](#L756) | 'id' => 'submission\_users\_status', |
| [757](#L757) | 'type' => 'select', |
| [758](#L758) | 'title' => esc\_html\_\_('Default Status', 'waymark'), |
| [759](#L759) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_status'), |
| [760](#L760) | 'tip' => esc\_attr\_\_('This is the initial status of the submitted Map. Note! Publish means that the Map (including any images added) will be \*immediately\* visible on your site.', 'waymark'), |
| [761](#L761) | 'options' => [ |
| [762](#L762) | 'publish' => esc\_attr\_\_('Publish', 'waymark'), |
| [763](#L763) | 'draft' => esc\_attr\_\_('Draft', 'waymark'), |
| [764](#L764) | ], |
| [765](#L765) | ], |
| [766](#L766) | 'submission\_collection' => [ |
| [767](#L767) | 'name' => 'submission\_collection', |
| [768](#L768) | 'id' => 'submission\_users\_collection', |
| [769](#L769) | 'type' => 'select', |
| [770](#L770) | 'title' => esc\_html\_\_('Default Collection', 'waymark'), |
| [771](#L771) | 'tip' => esc\_attr\_\_('If specified, user submissions will be automatically added to this Collection.', 'waymark'), |
| [772](#L772) | 'options' => $collection\_array, |
| [773](#L773) | ], |
| [774](#L774) | //                                              'submission\_alert' => array( |
| [775](#L775) | //                                                      'name' => 'submission\_alert', |
| [776](#L776) | //                                                      'id' => 'submission\_users\_alert', |
| [777](#L777) | //                                                      'type' => 'boolean', |
| [778](#L778) | //                                                      'title' => esc\_html\_\_('Email Alert', 'waymark'), |
| [779](#L779) | //                                                      'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_alert'), |
| [780](#L780) | //                                                      'tip' => esc\_attr\_\_('Receive email alerts for new submissions.', 'waymark'), |
| [781](#L781) | //                                                      'class' => 'waymark-hidden' |
| [782](#L782) | //                                              ) |
| [783](#L783) | ], |
| [784](#L784) | ], |
| [785](#L785) |  |
| [786](#L786) | //Public |
| [787](#L787) | 'from\_public' => [ |
| [788](#L788) | 'title' => esc\_html\_\_('Public Submissions', 'waymark'), |
| [789](#L789) | 'description' => \_\_('This will allow Submissions from <b>any visitor</b>, without registration.<!--<br /><br /><b>Important!</b>-->', 'waymark'), |
| [790](#L790) | 'fields' => [ |
| [791](#L791) | 'submission\_public' => [ |
| [792](#L792) | 'name' => 'submission\_public', |
| [793](#L793) | 'id' => 'submission\_public', |
| [794](#L794) | 'type' => 'boolean', |
| [795](#L795) | 'title' => esc\_html\_\_('Public Submissions', 'waymark'), |
| [796](#L796) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_public'), |
| [797](#L797) | 'tip' => esc\_attr\_\_('Allow \*anyone\* to submit Maps to your site, without registration.', 'waymark'), |
| [798](#L798) | ], |
| [799](#L799) | 'submission\_features' => [ |
| [800](#L800) | 'name' => 'submission\_features', |
| [801](#L801) | 'id' => 'submission\_public\_features', |
| [802](#L802) | 'type' => 'select\_multi', |
| [803](#L803) | 'class' => 'waymark-align-top', |
| [804](#L804) | 'title' => esc\_html\_\_('Editor Features', 'waymark'), |
| [805](#L805) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_features'), |
| [806](#L806) | 'tip' => esc\_attr\_\_('What features to offer in the Editor. Important! Uploaded images are added to the Media Library (see Upload Location below), reading from file does not keep a copy of the file on the server. Whether an individual Meta input is displayed can be set in the Settings > Map > Meta.', 'waymark'), |
| [807](#L807) | 'options' => [ |
| [808](#L808) | 'draw' => esc\_attr\_\_('Drawing', 'waymark'), |
| [809](#L809) | 'photo' => esc\_attr\_\_('Image upload', 'waymark'), |
| [810](#L810) | 'file' => esc\_attr\_\_('Read from File', 'waymark'), |
| [811](#L811) | 'title' => esc\_attr\_\_('Title', 'waymark'), |
| [812](#L812) | 'meta' => esc\_attr\_\_('Meta', 'waymark'), |
| [813](#L813) | ], |
| [814](#L814) | ], |
| [815](#L815) | 'submission\_upload\_dir' => [ |
| [816](#L816) | 'name' => 'submission\_upload\_dir', |
| [817](#L817) | 'id' => 'submission\_upload\_dir', |
| [818](#L818) | 'type' => 'select', |
| [819](#L819) | 'title' => esc\_html\_\_('Upload Location', 'waymark'), |
| [820](#L820) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_upload\_dir'), |
| [821](#L821) | 'tip' => esc\_attr\_\_('Images upload by non-registered users can be stored seperately from other Media Library uploads, to aid with moderation. All uploaded images will be stored in a single directory (/waymark\_submission) found in the upload root.', 'waymark'), |
| [822](#L822) | 'class' => '', |
| [823](#L823) | 'options' => [ |
| [824](#L824) | 'waymark\_submission' => esc\_attr\_\_('Seperated (/waymark\_submission)', 'waymark'), |
| [825](#L825) | '' => sprintf(esc\_attr\_\_('Media Library Default (%s)', 'waymark'), $upload\_dir['subdir']), |
| [826](#L826) | ], |
| [827](#L827) | ], |
| [828](#L828) | 'submission\_status' => [ |
| [829](#L829) | 'name' => 'submission\_status', |
| [830](#L830) | 'id' => 'submission\_public\_status', |
| [831](#L831) | 'type' => 'select', |
| [832](#L832) | 'title' => esc\_html\_\_('Default Status', 'waymark'), |
| [833](#L833) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_status'), |
| [834](#L834) | 'tip' => esc\_attr\_\_('This is the initial status of the submitted Map. Note! Publish means that the Map (including any images added) will be \*immediately\* visible on your site.', 'waymark'), |
| [835](#L835) | 'options' => [ |
| [836](#L836) | 'draft' => esc\_attr\_\_('Draft', 'waymark'), |
| [837](#L837) | 'publish' => esc\_attr\_\_('Publish (not recommended!)', 'waymark'), |
| [838](#L838) | ], |
| [839](#L839) | 'class' => '', |
| [840](#L840) | ], |
| [841](#L841) | 'submission\_collection' => [ |
| [842](#L842) | 'name' => 'submission\_collection', |
| [843](#L843) | 'id' => 'submission\_public\_collection', |
| [844](#L844) | 'type' => 'select', |
| [845](#L845) | 'title' => esc\_html\_\_('Default Collection', 'waymark'), |
| [846](#L846) | 'tip' => esc\_attr\_\_('If specified, user submissions will be automatically added to this Collection.', 'waymark'), |
| [847](#L847) | 'options' => $collection\_array, |
| [848](#L848) | ], |
| [849](#L849) | //                                              'submission\_alert' => array( |
| [850](#L850) | //                                                      'name' => 'submission\_alert', |
| [851](#L851) | //                                                      'id' => 'submission\_public\_alert', |
| [852](#L852) | //                                                      'type' => 'boolean', |
| [853](#L853) | //                                                      'title' => esc\_html\_\_('Email Alert', 'waymark'), |
| [854](#L854) | //                                                      'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_alert'), |
| [855](#L855) | //                                                      'tip' => esc\_attr\_\_('Receive email alerts for new submissions.', 'waymark'), |
| [856](#L856) | //                                                      'class' => 'waymark-hidden' |
| [857](#L857) | //                                              ), |
| [858](#L858) | ], |
| [859](#L859) | ], |
| [860](#L860) | ], |
| [861](#L861) | ]; |
| [862](#L862) |  |
| [863](#L863) | //Submissions not enabled |
| [864](#L864) | if (! Waymark\_Config::get\_setting('submission', 'global', 'submission\_enable')) { |
| [865](#L865) | //Hide related inputs |
| [866](#L866) | $this->tabs['meta']['sections']['inputs']['fields']['meta\_submission']['class'] = ' waymark-hidden'; |
| [867](#L867) |  |
| [868](#L868) | $this->tabs['markers']['sections']['marker\_types']['fields']['marker\_submission']['class'] = 'waymark-hidden'; |
| [869](#L869) | $this->tabs['lines']['sections']['line\_types']['fields']['line\_submission']['class'] = 'waymark-hidden'; |
| [870](#L870) | $this->tabs['shapes']['sections']['shape\_types']['fields']['shape\_submission']['class'] = 'waymark-hidden'; |
| [871](#L871) |  |
| [872](#L872) | $this->tabs['submission']['sections']['from\_users']['class'] = 'waymark-hidden'; |
| [873](#L873) | $this->tabs['submission']['sections']['from\_public']['class'] = 'waymark-hidden'; |
| [874](#L874) | //If No public submissions |
| [875](#L875) | } elseif (! Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_public')) { |
| [876](#L876) | //Hide settings |
| [877](#L877) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_features']['class'] = ' waymark-hidden'; |
| [878](#L878) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_status']['class'] = ' waymark-hidden'; |
| [879](#L879) | //                      $this->tabs['submission']['sections']['from\_public']['fields']['submission\_alert']['class'] .= ' waymark-hidden'; |
| [880](#L880) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_upload\_dir']['class'] = ' waymark-hidden'; |
| [881](#L881) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_collection']['class'] = ' waymark-hidden'; |
| [882](#L882) | } |
| [883](#L883) |  |
| [884](#L884) | /\*\* |
| [885](#L885) | \* =========================================== |
| [886](#L886) | \* ================== MISC =================== |
| [887](#L887) | \* =========================================== |
| [888](#L888) | \*/ |
| [889](#L889) |  |
| [890](#L890) | $this->tabs['misc'] = [ |
| [891](#L891) | 'name' => esc\_html\_\_('Misc.', 'waymark'), |
| [892](#L892) | 'description' => '', |
| [893](#L893) | 'sections' => [ |
| [894](#L894) | 'map\_options' => [ |
| [895](#L895) | 'title' => esc\_html\_\_('Map Options', 'waymark'), |
| [896](#L896) | 'description' => esc\_html\_\_('Use these options to change how Maps are displayed.', 'waymark'), |
| [897](#L897) | 'help' => [ |
| [898](#L898) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs-cat/examples')), |
| [899](#L899) | 'text' => esc\_attr\_\_('See Examples &raquo;', 'waymark'), |
| [900](#L900) | ], |
| [901](#L901) | 'fields' => [ |
| [902](#L902) | 'map\_default\_latlng' => [ |
| [903](#L903) | 'name' => 'map\_default\_latlng', |
| [904](#L904) | 'id' => 'map\_default\_latlng', |
| [905](#L905) | 'type' => 'text', |
| [906](#L906) | 'class' => '', |
| [907](#L907) | 'title' => esc\_html\_\_('Default Centre', 'waymark'), |
| [908](#L908) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_default\_latlng'), |
| [909](#L909) | 'tip' => esc\_attr\_\_('Waymark centres the Map automatically when displaying data. These coordinates (Latitude,Longitude) will be used when there is no data available.', 'waymark'), |
| [910](#L910) | 'input\_processing' => [ |
| [911](#L911) | 'preg\_replace("/[^0-9.,-]+/", "", $param\_value);', |
| [912](#L912) | ], |
| [913](#L913) | 'output\_processing' => [ |
| [914](#L914) | sprintf('(! empty($param\_value)) ? $param\_value : "%s";', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_default\_latlng')), |
| [915](#L915) | ], |
| [916](#L916) | ], |
| [917](#L917) | 'map\_height' => [ |
| [918](#L918) | 'name' => 'map\_height', |
| [919](#L919) | 'id' => 'map\_height', |
| [920](#L920) | 'type' => 'text', |
| [921](#L921) | 'class' => 'waymark-short-input waymark-align-top', |
| [922](#L922) | 'title' => esc\_html\_\_('Map Height', 'waymark'), |
| [923](#L923) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height'), |
| [924](#L924) | 'append' => '<br />' . sprintf(esc\_attr\_\_('Or set in Shortcode: %s', 'waymark'), '<code>[' . Waymark\_Config::get\_item('shortcode') . ' map\_height=&quot;' . Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height') . '&quot; map\_width=&quot;320&quot;]</code>'), |
| [925](#L925) | 'tip' => sprintf(esc\_attr\_\_('Specify the desired height of the Map (in pixels). Pro Tip! This will affect all Maps, but you can change the height (and width) of an individual Map through the Shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; map\_height=&quot;' . Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height') . '&quot;]'), |
| [926](#L926) | 'input\_processing' => [ |
| [927](#L927) | 'preg\_replace("/[^0-9]/", "", $param\_value);', |
| [928](#L928) | ], |
| [929](#L929) | 'output\_processing' => [ |
| [930](#L930) | sprintf('(! empty($param\_value)) ? $param\_value : %d;', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_height')), |
| [931](#L931) | ], |
| [932](#L932) | ], |
| [933](#L933) | 'map\_default\_zoom' => [ |
| [934](#L934) | 'name' => 'map\_default\_zoom', |
| [935](#L935) | 'id' => 'map\_default\_zoom', |
| [936](#L936) | 'type' => 'text', |
| [937](#L937) | 'class' => 'waymark-short-input', |
| [938](#L938) | 'title' => esc\_html\_\_('Default Zoom', 'waymark'), |
| [939](#L939) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_default\_zoom'), |
| [940](#L940) | 'tip' => esc\_attr\_\_('Waymark zooms the Map automatically when displaying data. This zoom level (0-18) will be used when there is no data available.', 'waymark'), |
| [941](#L941) | 'input\_processing' => [ |
| [942](#L942) | 'preg\_replace("/[^0-9]/", "", $param\_value);', |
| [943](#L943) | ], |
| [944](#L944) | 'output\_processing' => [ |
| [945](#L945) | sprintf('(! empty($param\_value)) ? $param\_value : "%d";', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_default\_zoom')), |
| [946](#L946) | ], |
| [947](#L947) | ], |
| [948](#L948) | 'show\_gallery' => [ |
| [949](#L949) | 'name' => 'show\_gallery', |
| [950](#L950) | 'id' => 'show\_gallery', |
| [951](#L951) | 'type' => 'boolean', |
| [952](#L952) | 'title' => esc\_html\_\_('Image Gallery', 'waymark'), |
| [953](#L953) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_gallery'), |
| [954](#L954) | 'tip' => sprintf(esc\_attr\_\_('Whether to display an image gallery for Markers that have images associated with them. Pro Tip! This will affect all Maps, but you can choose to show/hide the gallery of an individual Map through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' show\_gallery=&quot;1&quot;]'), |
| [955](#L955) | 'options' => [ |
| [956](#L956) | '1' => esc\_html\_\_('Show', 'waymark'), |
| [957](#L957) | '0' => esc\_html\_\_('Hide', 'waymark'), |
| [958](#L958) | ], |
| [959](#L959) | ], |
| [960](#L960) | 'show\_filter' => [ |
| [961](#L961) | 'name' => 'show\_filter', |
| [962](#L962) | 'id' => 'show\_filter', |
| [963](#L963) | 'type' => 'boolean', |
| [964](#L964) | 'title' => esc\_html\_\_('Overlay Filter', 'waymark'), |
| [965](#L965) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_filter'), |
| [966](#L966) | 'tip' => sprintf(esc\_attr\_\_('Allow the user to filter which Markers, Lines and Shapes are currently visible on the Map. Pro Tip! This will affect all Maps, but you can choose to show/hide the filter for individual Maps through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' show\_filter=&quot;1&quot;]'), |
| [967](#L967) | 'options' => [ |
| [968](#L968) | '1' => esc\_html\_\_('Show', 'waymark'), |
| [969](#L969) | '0' => esc\_html\_\_('Hide', 'waymark'), |
| [970](#L970) | ], |
| [971](#L971) | ], |
| [972](#L972) | 'allow\_export' => [ |
| [973](#L973) | 'name' => 'allow\_export', |
| [974](#L974) | 'id' => 'allow\_export', |
| [975](#L975) | 'type' => 'boolean', |
| [976](#L976) | 'title' => esc\_html\_\_('Public Export', 'waymark'), |
| [977](#L977) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'allow\_export'), |
| [978](#L978) | 'tip' => sprintf(esc\_attr\_\_('Offer visitors the ability to Download all Collection/Map Overlays in the Shortcode Header and on the Map Details page. GeoJSON, GPX and KML formats supported.', 'waymark')), |
| [979](#L979) | ], |
| [980](#L980) | 'show\_scale' => [ |
| [981](#L981) | 'name' => 'show\_scale', |
| [982](#L982) | 'id' => 'show\_scale', |
| [983](#L983) | 'type' => 'boolean', |
| [984](#L984) | 'title' => esc\_html\_\_('Show Scale', 'waymark'), |
| [985](#L985) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_scale'), |
| [986](#L986) | 'tip' => sprintf(esc\_attr\_\_('Show a distance scale (km and miles) on the Map.', 'waymark')), |
| [987](#L987) | ], |
| [988](#L988) | ], |
| [989](#L989) | ], |
| [990](#L990) |  |
| [991](#L991) | //Interaction |
| [992](#L992) |  |
| [993](#L993) | //Sleep |
| [994](#L994) | 'interaction\_options' => [ |
| [995](#L995) | 'title' => esc\_html\_\_('Sleep Options', 'waymark'), |
| [996](#L996) | 'description' => sprintf(\_\_('Waymark Maps will zoom when the user scrolls. This can cause some unexpected/annoying behaviour when scrolling a page.<br /><br /><b>Sleeping</b> the Map initially and <b>Waking</b> upon user interaction (i.e. hovering/clicking/tapping) may create a better experience.', 'waymark'), Waymark\_Config::get\_default('misc', 'interaction\_options', 'delay\_seconds')), |
| [997](#L997) | 'fields' => [ |
| [998](#L998) | 'delay\_seconds' => [ |
| [999](#L999) | 'name' => 'delay\_seconds', |
| [1000](#L1000) | 'id' => 'delay\_seconds', |
| [1001](#L1001) | 'type' => 'text', |
| [1002](#L1002) | 'class' => 'waymark-short-input', |
| [1003](#L1003) | 'title' => esc\_html\_\_('Hover Wake Time', 'waymark'), |
| [1004](#L1004) | 'append' => esc\_html\_\_('Seconds', 'waymark'), |
| [1005](#L1005) | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'delay\_seconds'), |
| [1006](#L1006) | 'tip' => esc\_attr\_\_('How many seconds before scroll zoom is enabled. 0 seconds will mean no delay (disabling this feature). A large number of seconds like 3600 (an hour) will esentially \*disable hover to wake\*, meaning the user will need to \*click\* to wake.', 'waymark'), |
| [1007](#L1007) | 'input\_processing' => [ |
| [1008](#L1008) | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'interaction\_options', 'delay\_seconds') . ';', //Fallback |
| [1009](#L1009) | ], |
| [1010](#L1010) | ], |
| [1011](#L1011) | 'do\_message' => [ |
| [1012](#L1012) | 'name' => 'do\_message', |
| [1013](#L1013) | 'id' => 'do\_message', |
| [1014](#L1014) | 'type' => 'boolean', |
| [1015](#L1015) | 'title' => esc\_html\_\_('Display Message', 'waymark'), |
| [1016](#L1016) | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'do\_message'), |
| [1017](#L1017) | 'tip' => esc\_attr\_\_('This message will be displayed by the Map while scroll zoom is disabled.', 'waymark'), |
| [1018](#L1018) | ], |
| [1019](#L1019) | 'wake\_message' => [ |
| [1020](#L1020) | 'name' => 'wake\_message', |
| [1021](#L1021) | 'id' => 'wake\_message', |
| [1022](#L1022) | 'type' => 'text', |
| [1023](#L1023) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Display', 'waymark') . ' </span> ' . esc\_html\_\_('Message Text', 'waymark'), |
| [1024](#L1024) | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'wake\_message'), |
| [1025](#L1025) | ], |
| [1026](#L1026) | ], |
| [1027](#L1027) | ], |
| [1028](#L1028) |  |
| [1029](#L1029) | // Cluster |
| [1030](#L1030) |  |
| [1031](#L1031) | 'cluster\_options' => [ |
| [1032](#L1032) | 'title' => esc\_html\_\_('Cluster Options', 'waymark'), |
| [1033](#L1033) | 'description' => sprintf(\_\_('With Clustering enabled, Markers will be grouped together when they are close together. This can help to reduce clutter on the Map.', 'waymark'), Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_threshold')), |
| [1034](#L1034) | 'help' => [ |
| [1035](#L1035) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/marker-clustering')), |
| [1036](#L1036) | 'text' => esc\_attr\_\_('Clustering Docs &raquo;', 'waymark'), |
| [1037](#L1037) | ], |
| [1038](#L1038) | 'fields' => [ |
| [1039](#L1039) | 'show\_cluster' => [ |
| [1040](#L1040) | 'name' => 'show\_cluster', |
| [1041](#L1041) | 'id' => 'show\_cluster', |
| [1042](#L1042) | 'type' => 'boolean', |
| [1043](#L1043) | 'options' => [ |
| [1044](#L1044) | '1' => esc\_html\_\_('Enabled', 'waymark'), |
| [1045](#L1045) | '0' => esc\_html\_\_('Disabled', 'waymark'), |
| [1046](#L1046) | ], |
| [1047](#L1047) |  |
| [1048](#L1048) | 'title' => esc\_html\_\_('Marker Clustering', 'waymark'), |
| [1049](#L1049) | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'show\_cluster'), |
| [1050](#L1050) | 'tip' => esc\_attr\_\_('Whether to cluster (stack) Markers that are close together. Pro Tip! This will affect all Maps, but you can also enable/disable clustering through the Shortcode: [Waymark show\_cluster="0"]', 'waymark'), |
| [1051](#L1051) | ], |
| [1052](#L1052) | 'cluster\_threshold' => [ |
| [1053](#L1053) | 'name' => 'cluster\_threshold', |
| [1054](#L1054) | 'id' => 'cluster\_threshold', |
| [1055](#L1055) | 'type' => 'text', |
| [1056](#L1056) | 'class' => 'waymark-short-input', |
| [1057](#L1057) | 'title' => esc\_html\_\_('Cluster Threshold', 'waymark'), |
| [1058](#L1058) | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'cluster\_threshold'), |
| [1059](#L1059) | 'tip' => esc\_attr\_\_('Markers will not be clustered above this zoom level.', 'waymark'), |
| [1060](#L1060) | 'input\_processing' => [ |
| [1061](#L1061) | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_threshold') . ';', //Fallback |
| [1062](#L1062) | ], |
| [1063](#L1063) | ], |
| [1064](#L1064) | 'cluster\_radius' => [ |
| [1065](#L1065) | 'name' => 'cluster\_radius', |
| [1066](#L1066) | 'id' => 'cluster\_radius', |
| [1067](#L1067) | 'type' => 'text', |
| [1068](#L1068) | 'class' => 'waymark-short-input', |
| [1069](#L1069) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Cluster', 'waymark') . ' </span> ' . esc\_html\_\_('Radius', 'waymark'), |
| [1070](#L1070) | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'cluster\_radius'), |
| [1071](#L1071) | 'tip' => esc\_attr\_\_('The maximum radius that a cluster will cover from the central marker (in pixels). Decreasing will make more, smaller clusters.     Default 80.', 'waymark'), |
| [1072](#L1072) |  |
| [1073](#L1073) | 'input\_processing' => [ |
| [1074](#L1074) | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_radius') . ';', //Fallback |
| [1075](#L1075) | ], |
| [1076](#L1076) | ], |
| [1077](#L1077) | ], |
| [1078](#L1078) | ], |
| [1079](#L1079) |  |
| [1080](#L1080) | //Shortcode |
| [1081](#L1081) |  |
| [1082](#L1082) | 'shortcode\_options' => [ |
| [1083](#L1083) | 'title' => esc\_html\_\_('Shortcode Options', 'waymark'), |
| [1084](#L1084) | 'description' => esc\_html\_\_('How Maps are embedded into your content using the shortcode.', 'waymark'), |
| [1085](#L1085) | 'help' => [ |
| [1086](#L1086) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/shortcodes')), |
| [1087](#L1087) | 'text' => esc\_attr\_\_('Shortcode Docs &raquo;', 'waymark'), |
| [1088](#L1088) | ], |
| [1089](#L1089) | 'fields' => [ |
| [1090](#L1090) | 'shortcode\_header' => [ |
| [1091](#L1091) | 'name' => 'shortcode\_header', |
| [1092](#L1092) | 'id' => 'shortcode\_header', |
| [1093](#L1093) | 'type' => 'select', |
| [1094](#L1094) | 'title' => esc\_html\_\_('Shortcode Header', 'waymark'), |
| [1095](#L1095) | 'default' => Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'shortcode\_header'), |
| [1096](#L1096) | 'tip' => sprintf(esc\_attr\_\_('The shortcode header displays the title and link to the Map or Collection. Pro Tip! This will affect all shortcodes, but you can override the setting through the shortcode: %s (the value must be either 0 or 1).', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; shortcode\_header=&quot;' . Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'shortcode\_header') . '&quot;]'), |
| [1097](#L1097) | 'options' => [ |
| [1098](#L1098) | '1' => esc\_html\_\_('Show', 'waymark'), |
| [1099](#L1099) | '0' => esc\_html\_\_('Hide', 'waymark'), |
| [1100](#L1100) | ], |
| [1101](#L1101) | ], |
| [1102](#L1102) | 'header\_override' => [ |
| [1103](#L1103) | 'name' => 'header\_override', |
| [1104](#L1104) | 'id' => 'header\_override', |
| [1105](#L1105) | 'type' => 'select', |
| [1106](#L1106) | 'title' => esc\_html\_\_('Header for Admin', 'waymark'), |
| [1107](#L1107) | 'default' => Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'header\_override'), |
| [1108](#L1108) | 'tip' => esc\_attr\_\_('Use this Setting to always show the Shortcode Header when signed in as admin, useful for quickly navigating to embeded Maps.', 'waymark'), |
| [1109](#L1109) | 'options' => [ |
| [1110](#L1110) | '0' => esc\_html\_\_('Use Setting', 'waymark'), |
| [1111](#L1111) | '1' => esc\_html\_\_('Always Show', 'waymark'), |
| [1112](#L1112) | ], |
| [1113](#L1113) | ], |
| [1114](#L1114) | ], |
| [1115](#L1115) | ], |
| [1116](#L1116) |  |
| [1117](#L1117) | //Elevation |
| [1118](#L1118) |  |
| [1119](#L1119) | 'elevation\_options' => [ |
| [1120](#L1120) | 'title' => esc\_html\_\_('Elevation Options', 'waymark'), |
| [1121](#L1121) | 'description' => esc\_html\_\_('Lines with elevation data.', 'waymark'), |
| [1122](#L1122) | 'help' => [ |
| [1123](#L1123) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/elevation-profile-colours')), |
| [1124](#L1124) | 'text' => esc\_attr\_\_('Elevation Styling &raquo;', 'waymark'), |
| [1125](#L1125) | ], |
| [1126](#L1126) | 'fields' => [ |
| [1127](#L1127) | 'show\_elevation' => [ |
| [1128](#L1128) | 'name' => 'show\_elevation', |
| [1129](#L1129) | 'id' => 'show\_elevation', |
| [1130](#L1130) | 'type' => 'select', |
| [1131](#L1131) | 'title' => esc\_html\_\_('Elevation Profile', 'waymark'), |
| [1132](#L1132) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'show\_elevation'), |
| [1133](#L1133) | 'tip' => sprintf(esc\_attr\_\_('Display an interactive elevation profile graph below the Map for Lines that have elevation data. Pro Tip! You can choose to show/hide the elevation graph of an individual Map through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; show\_elevation=&quot;1&quot;]'), |
| [1134](#L1134) | 'options' => [ |
| [1135](#L1135) | '2' => esc\_html\_\_('Show on Map Details', 'waymark'), |
| [1136](#L1136) | '1' => esc\_html\_\_('Show everywhere', 'waymark'), |
| [1137](#L1137) | '0' => esc\_html\_\_('Hide everywhere', 'waymark'), |
| [1138](#L1138) | ], |
| [1139](#L1139) | ], |
| [1140](#L1140) | 'elevation\_units' => [ |
| [1141](#L1141) | 'name' => 'elevation\_units', |
| [1142](#L1142) | 'id' => 'elevation\_units', |
| [1143](#L1143) | 'type' => 'select', |
| [1144](#L1144) | 'title' => esc\_html\_\_('Elevation Units', 'waymark'), |
| [1145](#L1145) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_units'), |
| [1146](#L1146) | 'tip' => sprintf(esc\_attr\_\_('Display elevation data in metric (m/km) or imperial (ft/mi) units.', 'waymark')), |
| [1147](#L1147) | 'options' => [ |
| [1148](#L1148) | 'metric' => esc\_html\_\_('Metric (m/km)', 'waymark'), |
| [1149](#L1149) | 'imperial' => esc\_html\_\_('Imperial (ft/mi)', 'waymark'), |
| [1150](#L1150) | ], |
| [1151](#L1151) | ], |
| [1152](#L1152) | 'elevation\_colour' => [ |
| [1153](#L1153) | 'name' => 'elevation\_colour', |
| [1154](#L1154) | 'id' => 'elevation\_colour', |
| [1155](#L1155) | 'type' => 'text', |
| [1156](#L1156) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [1157](#L1157) | 'title' => esc\_html\_\_('Elevation Colour', 'waymark'), |
| [1158](#L1158) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_colour'), |
| [1159](#L1159) | 'tip' => sprintf(esc\_attr\_\_('The colour of the elevation graph and associated Line.', 'waymark')), |
| [1160](#L1160) | 'input\_processing' => [ |
| [1161](#L1161) | '(! empty($param\_value)) ? $param\_value : "#b42714";', //Fallback |
| [1162](#L1162) | ], |
| [1163](#L1163) | ], |
| [1164](#L1164) | 'elevation\_initial' => [ |
| [1165](#L1165) | 'name' => 'elevation\_initial', |
| [1166](#L1166) | 'id' => 'elevation\_initial', |
| [1167](#L1167) | 'type' => 'boolean', |
| [1168](#L1168) | 'title' => esc\_html\_\_('Show Initially?', 'waymark'), |
| [1169](#L1169) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_initial'), |
| [1170](#L1170) | 'tip' => sprintf(esc\_attr\_\_('Whether to show the elevation profile when the Map loads. If set to No, the user must click on a Line in order to display the elevation data. If there are multiple Lines with elevation data, the one added to the editor first will be the one shown initially.', 'waymark')), |
| [1171](#L1171) | ], |
| [1172](#L1172) | ], |
| [1173](#L1173) | ], |
| [1174](#L1174) |  |
| [1175](#L1175) | /\*\* |
| [1176](#L1176) | \* =========================================== |
| [1177](#L1177) | \* ================= ADVANCED ================ |
| [1178](#L1178) | \* =========================================== |
| [1179](#L1179) | \*/ |
| [1180](#L1180) |  |
| [1181](#L1181) | //Collections |
| [1182](#L1182) |  |
| [1183](#L1183) | 'collection\_options' => [ |
| [1184](#L1184) | 'title' => esc\_html\_\_('Collection Options', 'waymark'), |
| [1185](#L1185) | 'description' => esc\_html\_\_('How Collections are displayed.', 'waymark'), |
| [1186](#L1186) | 'help' => [ |
| [1187](#L1187) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/collections')), |
| [1188](#L1188) | 'text' => esc\_attr\_\_('Collection Docs &raquo;', 'waymark'), |
| [1189](#L1189) | ], |
| [1190](#L1190) | 'fields' => [ |
| [1191](#L1191) | 'load\_method' => [ |
| [1192](#L1192) | 'name' => 'load\_method', |
| [1193](#L1193) | 'id' => 'load\_method', |
| [1194](#L1194) | 'type' => 'select', |
| [1195](#L1195) | 'options' => [ |
| [1196](#L1196) | 'fetch' => esc\_html\_\_('Background', 'waymark'), |
| [1197](#L1197) | 'embed' => esc\_html\_\_('Embed', 'waymark'), |
| [1198](#L1198) | ], |
| [1199](#L1199) | 'class' => 'waymark-short-input', |
| [1200](#L1200) | 'title' => esc\_html\_\_('Shortcode Method', 'waymark'), |
| [1201](#L1201) | 'default' => Waymark\_Config::get\_setting('misc', 'collection\_options', 'load\_method'), |
| [1202](#L1202) | 'tip' => esc\_attr\_\_('Whether to load multiple Maps in the Background (uses AJAX to improve page load) when embedding with the Shortcode, or to Embed them within the page. Embedding may be a bad idea for LARGE COLLECTIONS, but can resolve some issues where Collections are not displaying correctly.', 'waymark'), |
| [1203](#L1203) | ], |
| [1204](#L1204) | ], |
| [1205](#L1205) | ], |
| [1206](#L1206) |  |
| [1207](#L1207) | //Editor |
| [1208](#L1208) |  |
| [1209](#L1209) | 'editor\_options' => [ |
| [1210](#L1210) | 'title' => esc\_html\_\_('Editor Options', 'waymark'), |
| [1211](#L1211) | 'description' => esc\_html\_\_('Customising the Map Editor.', 'waymark'), |
| [1212](#L1212) | 'fields' => [ |
| [1213](#L1213) | 'confirm\_delete' => [ |
| [1214](#L1214) | 'name' => 'confirm\_delete', |
| [1215](#L1215) | 'id' => 'confirm\_delete', |
| [1216](#L1216) | 'type' => 'boolean', |
| [1217](#L1217) | 'title' => esc\_html\_\_('Confirm Delete?', 'waymark'), |
| [1218](#L1218) | 'default' => Waymark\_Config::get\_setting('misc', 'editor\_options', 'confirm\_delete'), |
| [1219](#L1219) | 'tip' => esc\_attr\_\_('Whether to show a confirmation dialog before deleting Markers/Lines/Shapes from the Map. Pro Tip! Even if you accidentally delete something, changes are not saved until the "Update" button is clicked.', 'waymark'), |
| [1220](#L1220) | ], |
| [1221](#L1221) | 'editor\_basemap' => [ |
| [1222](#L1222) | 'name' => 'editor\_basemap', |
| [1223](#L1223) | 'id' => 'editor\_basemap', |
| [1224](#L1224) | 'type' => 'select', |
| [1225](#L1225) | 'title' => esc\_html\_\_('Default Basemap', 'waymark'), |
| [1226](#L1226) | 'default' => Waymark\_Config::get\_setting('misc', 'editor\_options', 'editor\_basemap'), |
| [1227](#L1227) | 'tip' => esc\_attr\_\_('Which Basemap to use as the editor default.', 'waymark'), |
| [1228](#L1228) | 'options' => $basemap\_options, |
| [1229](#L1229) | ], |
| [1230](#L1230) | ], |
| [1231](#L1231) | ], |
| [1232](#L1232) |  |
| [1233](#L1233) | //Permalinks |
| [1234](#L1234) |  |
| [1235](#L1235) | 'permalinks' => [ |
| [1236](#L1236) | 'title' => esc\_html\_\_('Permalinks', 'waymark'), |
| [1237](#L1237) | 'description' => 'Customise your Map and Collection URLs.', |
| [1238](#L1238) | 'footer' => '<small>For the changes to take affect you must rebuild your Permalinks by going to WP Settings > Permalinks and clicking "Save Changes".</small>', |
| [1239](#L1239) | 'fields' => [ |
| [1240](#L1240) | 'permalink\_slug\_map' => [ |
| [1241](#L1241) | 'name' => 'permalink\_slug\_map', |
| [1242](#L1242) | 'id' => 'permalink\_slug\_map', |
| [1243](#L1243) | 'type' => 'text', |
| [1244](#L1244) | 'class' => 'waymark-short-input', |
| [1245](#L1245) | 'title' => esc\_html\_\_('Map Slug', 'waymark'), |
| [1246](#L1246) | 'default' => Waymark\_Config::get\_setting('misc', 'permalinks', 'permalink\_slug\_map'), |
| [1247](#L1247) | 'tip' => esc\_attr\_\_('The URL slug that will be used for links to your Maps, i.e. example.com/[map-slug]/example-map/. Only alpha-numeric characters and hyphens (-) are allowed.', 'waymark'), |
| [1248](#L1248) | 'input\_processing' => [ |
| [1249](#L1249) | 'preg\_replace("/[^0-9a-z-]+/", "", $param\_value);', |
| [1250](#L1250) | ], |
| [1251](#L1251) | 'prepend' => '<small>/</small>', |
| [1252](#L1252) | 'append' => '<small>/map-name/</small>', |
| [1253](#L1253) | ], |
| [1254](#L1254) | 'permalink\_slug\_collection' => [ |
| [1255](#L1255) | 'name' => 'permalink\_slug\_collection', |
| [1256](#L1256) | 'id' => 'permalink\_slug\_collection', |
| [1257](#L1257) | 'type' => 'text', |
| [1258](#L1258) | 'class' => 'waymark-short-input', |
| [1259](#L1259) | 'title' => esc\_html\_\_('Collection Slug', 'waymark'), |
| [1260](#L1260) | 'default' => Waymark\_Config::get\_setting('misc', 'permalinks', 'permalink\_slug\_collection'), |
| [1261](#L1261) | 'tip' => esc\_attr\_\_('The URL slug that will be used for links to your Collections, i.e. example.com/[collection-slug]/example-collection/. Only alpha-numeric characters and hyphens (-) are allowed.', 'waymark'), |
| [1262](#L1262) | 'input\_processing' => [ |
| [1263](#L1263) | 'preg\_replace("/[^0-9a-z-]+/", "", $param\_value);', |
| [1264](#L1264) | ], |
| [1265](#L1265) | 'prepend' => '<small>/</small>', |
| [1266](#L1266) | 'append' => '<small>/collection-name/</small>', |
| [1267](#L1267) | ], |
| [1268](#L1268) | ], |
| [1269](#L1269) | ], |
| [1270](#L1270) |  |
| [1271](#L1271) | // Custom Post Type Supports |
| [1272](#L1272) |  |
| [1273](#L1273) | 'post' => [ |
| [1274](#L1274) | 'title' => esc\_html\_\_('Post Type', 'waymark'), |
| [1275](#L1275) | 'description' => 'Enable Custom Post Type features.', |
| [1276](#L1276) | 'fields' => [ |
| [1277](#L1277) | 'supports' => [ |
| [1278](#L1278) | 'name' => 'supports', |
| [1279](#L1279) | 'id' => 'supports', |
| [1280](#L1280) | 'type' => 'select\_multi', |
| [1281](#L1281) | 'title' => esc\_html\_\_('Supports', 'waymark'), |
| [1282](#L1282) | 'default' => Waymark\_Config::get\_setting('misc', 'post', 'supports'), |
| [1283](#L1283) | 'tip' => esc\_attr\_\_('Enable or disable various WordPress features of the Map Custom Post Type.', 'waymark'), |
| [1284](#L1284) | 'tip\_link' => 'https://developer.wordpress.org/reference/functions/add\_post\_type\_support/', |
| [1285](#L1285) | 'options' => [ |
| [1286](#L1286) | 'title' => esc\_html\_\_('Title', 'waymark'), |
| [1287](#L1287) | 'author' => esc\_html\_\_('Author', 'waymark'), |
| [1288](#L1288) | 'revisions' => esc\_html\_\_('Revisions', 'waymark'), |
| [1289](#L1289) | 'thumbnail' => esc\_html\_\_('Thumbnail', 'waymark'), |
| [1290](#L1290) | 'comments' => esc\_html\_\_('Comments', 'waymark'), |
| [1291](#L1291) | 'excerpt' => esc\_html\_\_('Excerpt', 'waymark'), |
| [1292](#L1292) | ], |
| [1293](#L1293) | ], |
| [1294](#L1294) | ], |
| [1295](#L1295) | ], |
| [1296](#L1296) |  |
| [1297](#L1297) | //Debug |
| [1298](#L1298) |  |
| [1299](#L1299) | 'advanced' => [ |
| [1300](#L1300) | 'title' => esc\_html\_\_('Debug', 'waymark'), |
| [1301](#L1301) | 'description' => '', |
| [1302](#L1302) | 'fields' => [ |
| [1303](#L1303) | 'debug\_mode' => [ |
| [1304](#L1304) | 'name' => 'debug\_mode', |
| [1305](#L1305) | 'id' => 'debug\_mode', |
| [1306](#L1306) | 'type' => 'boolean', |
| [1307](#L1307) | 'title' => esc\_html\_\_('Debug Mode', 'waymark'), |
| [1308](#L1308) | 'default' => Waymark\_Config::get\_setting('misc', 'advanced', 'debug\_mode'), |
| [1309](#L1309) | 'tip' => esc\_attr\_\_('With debug mode enabled, the plugin will output Map and Settings data in Admin Dashboard. This may come in handy if you need to report a bug. Pro Tip! Check the browser console for Waymark output when signed in as an administrator.', 'waymark'), |
| [1310](#L1310) | 'tip\_link' => 'https://www.waymark.dev/docs/debug-mode/', |
| [1311](#L1311) | 'options' => [ |
| [1312](#L1312) | '0' => esc\_html\_\_('Disable', 'waymark'), |
| [1313](#L1313) | '1' => esc\_html\_\_('Enable', 'waymark'), |
| [1314](#L1314) | ], |
| [1315](#L1315) | ], |
| [1316](#L1316) | ], |
| [1317](#L1317) | ], |
| [1318](#L1318) | ], |
| [1319](#L1319) | ]; |
| [1320](#L1320) |  |
| [1321](#L1321) | //Debug? |
| [1322](#L1322) | if (Waymark\_Helper::is\_debug()) { |
| [1323](#L1323) | $this->tabs['misc']['sections']['advanced']['fields']['settings\_output'] = [ |
| [1324](#L1324) | 'name' => 'settings\_output', |
| [1325](#L1325) | 'id' => 'settings\_output', |
| [1326](#L1326) | 'type' => 'textarea', |
| [1327](#L1327) | 'class' => 'waymark-align-top', |
| [1328](#L1328) | 'title' => esc\_html\_\_('Settings Data', 'waymark'), |
| [1329](#L1329) | 'default' => serialize(get\_option('Waymark\_Settings')), |
| [1330](#L1330) | //Don't save to DB |
| [1331](#L1331) | 'input\_processing' => [ |
| [1332](#L1332) | 'null', |
| [1333](#L1333) | ], |
| [1334](#L1334) | //Don't allow editing |
| [1335](#L1335) | 'output\_processing' => [ |
| [1336](#L1336) | 'serialize(get\_option("Waymark\_Settings"))', |
| [1337](#L1337) | ], |
| [1338](#L1338) | ]; |
| [1339](#L1339) | } |
| [1340](#L1340) |  |
| [1341](#L1341) | add\_action('admin\_notices', [$this, 'admin\_notices']); |
| [1342](#L1342) | add\_action('admin\_init', [$this, 'register\_settings']); |
| [1343](#L1343) | } |
| [1344](#L1344) |  |
| [1345](#L1345) | function get\_settings() { |
| [1346](#L1346) | return $this->current\_settings; |
| [1347](#L1347) | } |
| [1348](#L1348) |  |
| [1349](#L1349) | function register\_settings() { |
| [1350](#L1350) | register\_setting($this->page\_slug, 'Waymark\_Settings', [$this, 'sanitize\_callback']); |
| [1351](#L1351) |  |
| [1352](#L1352) | //For each tab |
| [1353](#L1353) | foreach ($this->tabs as $tab\_key => $tab\_data) { |
| [1354](#L1354) | //For each section |
| [1355](#L1355) | foreach ($tab\_data['sections'] as $section\_key => $section\_data) { |
| [1356](#L1356) | //Set if blank if unset |
| [1357](#L1357) | $section\_data['title'] = (isset($section\_data['title'])) ? $section\_data['title'] : ''; |
| [1358](#L1358) |  |
| [1359](#L1359) | //Create section |
| [1360](#L1360) | add\_settings\_section($section\_key, $section\_data['title'], [$this, 'section\_text'], $this->page\_slug); |
| [1361](#L1361) |  |
| [1362](#L1362) | //For each field in section |
| [1363](#L1363) | if (is\_array($section\_data['fields']) && sizeof($section\_data['fields'])) { |
| [1364](#L1364) | foreach ($section\_data['fields'] as $field) { |
| [1365](#L1365) | //Get set\_value |
| [1366](#L1366) | if (array\_key\_exists($tab\_key, $this->current\_settings) && array\_key\_exists($section\_key, $this->current\_settings[$tab\_key])) { |
| [1367](#L1367) | if (array\_key\_exists($field['name'], $this->current\_settings[$tab\_key][$section\_key])) { |
| [1368](#L1368) | $field['set\_value'] = $this->current\_settings[$tab\_key][$section\_key][$field['name']]; |
| [1369](#L1369) | } |
| [1370](#L1370) | } |
| [1371](#L1371) |  |
| [1372](#L1372) | //Modify name for multi-dimensional array |
| [1373](#L1373) | $field['name'] = 'Waymark\_Settings[' . $tab\_key . '][' . $section\_key . '][' . $field['name'] . ']'; |
| [1374](#L1374) |  |
| [1375](#L1375) | //Repeatable section |
| [1376](#L1376) | if (isset($section\_data['repeatable']) && $section\_data['repeatable']) { |
| [1377](#L1377) | //Get count |
| [1378](#L1378) | $repeatable\_count = Waymark\_Helper::get\_section\_repeatable\_count($section\_data); |
| [1379](#L1379) |  |
| [1380](#L1380) | //Must be an array |
| [1381](#L1381) | if (! is\_array($field['default'])) { |
| [1382](#L1382) | //Make array |
| [1383](#L1383) | $field['default'] = Waymark\_Helper::convert\_single\_value\_to\_array($field['default']); |
| [1384](#L1384) | } |
| [1385](#L1385) |  |
| [1386](#L1386) | //Array size must match |
| [1387](#L1387) | if (sizeof($field['default']) < $repeatable\_count) { |
| [1388](#L1388) | //Pad |
| [1389](#L1389) | $field['default'] = array\_pad($field['default'], $repeatable\_count, $field['default'][0]); |
| [1390](#L1390) | } |
| [1391](#L1391) | } |
| [1392](#L1392) |  |
| [1393](#L1393) | add\_settings\_field($field['name'], $field['title'], [$this, 'create\_input'], $this->page\_slug, $section\_key, $field); |
| [1394](#L1394) | } |
| [1395](#L1395) | } |
| [1396](#L1396) | } |
| [1397](#L1397) | } |
| [1398](#L1398) | } |
| [1399](#L1399) |  |
| [1400](#L1400) | function create\_input($field) { |
| [1401](#L1401) | //Set value |
| [1402](#L1402) | if (array\_key\_exists('set\_value', $field)) { |
| [1403](#L1403) | $set\_value = $field['set\_value']; |
| [1404](#L1404) | } else { |
| [1405](#L1405) | $set\_value = null; |
| [1406](#L1406) | } |
| [1407](#L1407) |  |
| [1408](#L1408) | echo Waymark\_Input::create\_field($field, $set\_value, false); |
| [1409](#L1409) | } |
| [1410](#L1410) |  |
| [1411](#L1411) | function section\_text($args) { |
| [1412](#L1412) | //Unused |
| [1413](#L1413) | } |
| [1414](#L1414) |  |
| [1415](#L1415) | function sanitize\_callback($input\_data) { |
| [1416](#L1416) | //For each tab |
| [1417](#L1417) | foreach ($this->tabs as $tab\_key => $tab\_data) { |
| [1418](#L1418) | //If we have sections |
| [1419](#L1419) | if (array\_key\_exists('sections', $tab\_data)) { |
| [1420](#L1420) | //Iterate over each section |
| [1421](#L1421) | foreach ($tab\_data['sections'] as $section\_key => $section\_data) { |
| [1422](#L1422) | //If section has fields |
| [1423](#L1423) | if (array\_key\_exists('fields', $section\_data)) { |
| [1424](#L1424) | //For each field |
| [1425](#L1425) | foreach ($section\_data['fields'] as $field\_key => $field\_definition) { |
| [1426](#L1426) | //If this field was submitted |
| [1427](#L1427) | if (isset($input\_data[$tab\_key][$section\_key][$field\_definition['name']])) { |
| [1428](#L1428) | $value = $input\_data[$tab\_key][$section\_key][$field\_definition['name']]; |
| [1429](#L1429) |  |
| [1430](#L1430) | //If no input processing specified |
| [1431](#L1431) | if (! array\_key\_exists('input\_processing', $field\_definition)) { |
| [1432](#L1432) | //Make safe by default |
| [1433](#L1433) | $field\_definition['input\_processing'][] = 'htmlspecialchars($param\_value)'; |
| [1434](#L1434) | } |
| [1435](#L1435) |  |
| [1436](#L1436) | //Process the input |
| [1437](#L1437) | $input\_data[$tab\_key][$section\_key][$field\_definition['name']] = Waymark\_Input::process\_input($field\_definition, $value); |
| [1438](#L1438) | } |
| [1439](#L1439) | } |
| [1440](#L1440) | } |
| [1441](#L1441) | } |
| [1442](#L1442) | } |
| [1443](#L1443) | } |
| [1444](#L1444) |  |
| [1445](#L1445) | return $input\_data; |
| [1446](#L1446) | } |
| [1447](#L1447) |  |
| [1448](#L1448) | function content\_admin\_page() { |
| [1449](#L1449) | echo '<div id="waymark-admin-container">' . "\n"; |
| [1450](#L1450) |  |
| [1451](#L1451) | echo Waymark\_Helper::plugin\_about(); |
| [1452](#L1452) |  |
| [1453](#L1453) | echo '  <div class="card">' . "\n"; |
| [1454](#L1454) |  |
| [1455](#L1455) | //Tabs |
| [1456](#L1456) | $active\_content = (isset($\_GET['content'])) ? esc\_html($\_GET['content']) : $this->default\_content; |
| [1457](#L1457) | $this->settings\_nav($active\_content); |
| [1458](#L1458) |  |
| [1459](#L1459) | //Open form |
| [1460](#L1460) | echo '          <form action="' . admin\_url('options.php') . '" method="post">' . "\n"; |
| [1461](#L1461) | settings\_fields($this->page\_slug); |
| [1462](#L1462) |  |
| [1463](#L1463) | //For each tab |
| [1464](#L1464) | foreach ($this->tabs as $tab\_key => $tab\_data) { |
| [1465](#L1465) | $style = ''; |
| [1466](#L1466) | echo '  <div class="waymark-settings-tab waymark-settings-tab-' . $tab\_key . '"' . $style . '>' . "\n"; |
| [1467](#L1467) |  |
| [1468](#L1468) | //Tab description? |
| [1469](#L1469) | if (array\_key\_exists('description', $tab\_data)) { |
| [1470](#L1470) | echo '  <div class="waymark-settings-tab-description">' . $tab\_data['description'] . '</div>' . "\n"; |
| [1471](#L1471) | } |
| [1472](#L1472) |  |
| [1473](#L1473) | //For each section |
| [1474](#L1474) | foreach ($tab\_data['sections'] as $section\_key => $section\_data) { |
| [1475](#L1475) | $class = (isset($section\_data['class'])) ? ' ' . $section\_data['class'] : ''; |
| [1476](#L1476) | echo '          <div class="waymark-settings-section waymark-settings-section-' . $section\_key . $class . '">' . "\n"; |
| [1477](#L1477) |  |
| [1478](#L1478) | //Help |
| [1479](#L1479) | if (array\_key\_exists('help', $section\_data) && isset($section\_data['help']['url'])) { |
| [1480](#L1480) | $help\_text = (isset($section\_data['help']['text'])) ? $section\_data['help']['text'] : 'View Help &raquo;'; |
| [1481](#L1481) |  |
| [1482](#L1482) | echo '          <a class="waymark-docs-link button" href="' . $section\_data['help']['url'] . '" target="\_blank">' . $help\_text . '</a>' . "\n"; |
| [1483](#L1483) | } |
| [1484](#L1484) |  |
| [1485](#L1485) | //Title |
| [1486](#L1486) | if (isset($section\_data['title'])) { |
| [1487](#L1487) | echo '          <h2>' . $section\_data['title'] . '</h2>' . "\n"; |
| [1488](#L1488) | } |
| [1489](#L1489) |  |
| [1490](#L1490) | //Description |
| [1491](#L1491) | if (array\_key\_exists('description', $section\_data)) { |
| [1492](#L1492) | echo '          <div class="waymark-settings-section-description">' . $section\_data['description'] . '</div>' . "\n"; |
| [1493](#L1493) | } |
| [1494](#L1494) |  |
| [1495](#L1495) | //Repeatable? |
| [1496](#L1496) | if (array\_key\_exists('repeatable', $section\_data) && $section\_data['repeatable']) { |
| [1497](#L1497) | echo '<div class="waymark-repeatable" data-count="0">' . "\n"; |
| [1498](#L1498) | } |
| [1499](#L1499) |  |
| [1500](#L1500) | echo '          <table class="form-table">' . "\n"; |
| [1501](#L1501) | do\_settings\_fields($this->page\_slug, $section\_key); |
| [1502](#L1502) | echo '          </table>' . "\n"; |
| [1503](#L1503) |  |
| [1504](#L1504) | //Repeatable? |
| [1505](#L1505) | if (array\_key\_exists('repeatable', $section\_data) && $section\_data['repeatable']) { |
| [1506](#L1506) | echo '</div>' . "\n"; |
| [1507](#L1507) | } |
| [1508](#L1508) |  |
| [1509](#L1509) | //Footer |
| [1510](#L1510) | if (array\_key\_exists('footer', $section\_data)) { |
| [1511](#L1511) | echo '  <div class="waymark-settings-section-footer">' . $section\_data['footer'] . '</div>' . "\n"; |
| [1512](#L1512) | } |
| [1513](#L1513) |  |
| [1514](#L1514) | echo '</div>' . "\n"; |
| [1515](#L1515) | } |
| [1516](#L1516) |  |
| [1517](#L1517) | echo '  </div>' . "\n"; |
| [1518](#L1518) | } |
| [1519](#L1519) |  |
| [1520](#L1520) | submit\_button(null, 'primary large'); |
| [1521](#L1521) | echo '          </form>' . "\n"; |
| [1522](#L1522) |  |
| [1523](#L1523) | echo '  </div>' . "\n"; |
| [1524](#L1524) | echo '</div>' . "\n"; |
| [1525](#L1525) | } |
| [1526](#L1526) |  |
| [1527](#L1527) | function settings\_nav($current = 'tiles') { |
| [1528](#L1528) | echo '<div id="waymark-settings-nav" data-init\_tab\_key="' . esc\_html($current) . '">' . "\n"; |
| [1529](#L1529) | echo '  <select>' . "\n"; |
| [1530](#L1530) |  |
| [1531](#L1531) | foreach ($this->settings\_nav as $content\_id => $content\_title) { |
| [1532](#L1532) | if (strpos($content\_id, 'label') === 0) { |
| [1533](#L1533) | echo '  <option disabled="disabled">' . $content\_title . '</option>' . "\n"; |
| [1534](#L1534) | } else { |
| [1535](#L1535) | echo '  <option value="' . $content\_id . '"' . (($current == $content\_id) ? ' selected="selected"' : '') . '>' . $content\_title . '</option>' . "\n"; |
| [1536](#L1536) | } |
| [1537](#L1537) | } |
| [1538](#L1538) |  |
| [1539](#L1539) | echo '  </select>' . "\n"; |
| [1540](#L1540) | echo '</div>' . "\n"; |
| [1541](#L1541) | } |
| [1542](#L1542) |  |
| [1543](#L1543) | function execute\_action($action) { |
| [1544](#L1544) | switch ($action) { |
| [1545](#L1545) | //Clear cache |
| [1546](#L1546) | case 'clear\_cache': |
| [1547](#L1547) | Waymark\_Cache::flush(); |
| [1548](#L1548) |  |
| [1549](#L1549) | break; |
| [1550](#L1550) | } |
| [1551](#L1551) |  |
| [1552](#L1552) | wp\_redirect(admin\_url('admin.php?page=waymark-settings&tab=advanced&settings-updated=waymark\_action')); |
| [1553](#L1553) |  |
| [1554](#L1554) | die; |
| [1555](#L1555) | } |
| [1556](#L1556) |  |
| [1557](#L1557) | function admin\_notices() { |
| [1558](#L1558) | if (isset($\_GET['settings-updated'])) { |
| [1559](#L1559) | //Settings updates |
| [1560](#L1560) | if ($\_GET['settings-updated'] == 'true') { |
| [1561](#L1561) | echo '<div class="waymark-notice notice notice-success is-dismissible"><p>' . esc\_html\_\_('Settings Updated', 'waymark') . '.</p></div>'; |
| [1562](#L1562) | //Action |
| [1563](#L1563) | } elseif ($\_GET['settings-updated'] == 'waymark\_action') { |
| [1564](#L1564) | echo '<div class="waymark-notice notice notice-success is-dismissible"><p>' . esc\_html\_\_('Action Complete', 'waymark') . '.</p></div>'; |
| [1565](#L1565) | } |
| [1566](#L1566) | } |
| [1567](#L1567) | } |
| [1568](#L1568) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?format=txt)
* [Original Format](/export/3222677/waymark/trunk/inc/Admin/Waymark_Settings.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_1cd37c6b_20250115_082747.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Waymark <= 1.4.1 - Reflected Cross-Site Scripting via 'content'

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Waymark <= 1.4.1 - Reflected Cross-Site Scripting via 'content'

6.1

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-12325](https://www.cve.org/CVERecord?id=CVE-2024-12325) |
| --- | --- |
| CVSS | 6.1 (Medium) |
| Publicly Published | December 10, 2024 |
| Last Updated | December 11, 2024 |
| Researcher | [vgo0](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/dale-mavers) |

### Description

The Waymark plugin for WordPress is vulnerable to Reflected Cross-Site Scripting via the ‘content’ parameter in all versions up to, and including, 1.4.1 due to insufficient input sanitization and output escaping. This makes it possible for unauthenticated attackers to inject arbitrary web scripts in pages that execute if they can successfully trick a user into performing an action such as clicking on a link.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/waymark/trunk/inc/Admin/Waymark_Settings.php#L1457)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/waymark/trunk/inc/Admin/Waymark_Settings.php#L1458)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/waymark/trunk/inc/Admin/Waymark_Settings.php#L1531)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/waymark/trunk/inc/Admin/Waymark_Settings.php#L1532)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3205103/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwaymark%2Fwaymark-141-reflected-cross-site-scripting-via-content&t=Waymark%20%3C%3D%201.4.1%20-%20Reflected%20Cross-Site%20Scripting%20via%20%27content%27 "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwaymark%2Fwaymark-141-reflected-cross-site-scripting-via-content&text=Waymark%20%3C%3D%201.4.1%20-%20Reflected%20Cross-Site%20Scripting%20via%20%27content%27 "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fwaymark%2Fwaymark-141-reflected-cross-site-scripting-via-content "LinkedIn")
Email

## Vulnerability Details for Waymark

#### [Waymark](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/waymark)

| Software Type | Plugin |
| --- | --- |
| Software Slug | waymark [(view on wordpress.org)](https://wordpress.org/plugins/waymark) |
| Patched? | Yes |
| Remediation | Update to version 1.4.2, or a newer patched version |
| Affected Version | * <= 1.4.1 |
| Patched Version | * 1.4.2 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_dc104a7a_20250115_082703.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fwaymark%2Ftrunk%2Finc%2FAdmin%2FWaymark_Settings.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?rev=3102468 "Revision 3102468")
* Next Revision →
* [Blame](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/waymark/trunk/inc/Admin/Waymark_Settings.php)

---

# [source:](/browser?order=name "Go to repository root") [waymark](/browser/waymark?order=name "View waymark")/[trunk](/browser/waymark/trunk?order=name "View trunk")/[inc](/browser/waymark/trunk/inc?order=name "View inc")/[Admin](/browser/waymark/trunk/inc/Admin?order=name "View Admin")/[Waymark\_Settings.php](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?order=name "View Waymark_Settings.php")

View diff against:

View revision:

| [Last change](/changeset/3205103/waymark/trunk/inc/Admin/Waymark_Settings.php "View differences") on this file was [3205103](/changeset/3205103/ "View changeset 3205103"), checked in by morehawes, [5 weeks ago](/timeline?from=2024-12-09T20%3A11%3A24Z&precision=second "See timeline at 12/09/2024 08:11:24 PM") |
| --- |
| v1.4.2 |
| **File size:** 73.5 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | class Waymark\_Settings { |
| [4](#L4) | private $settings\_id      = 'Waymark\_Settings'; |
| [5](#L5) | private $page\_slug        = 'waymark-settings'; |
| [6](#L6) | private $default\_content  = 'waymark-settings-tab-tiles'; |
| [7](#L7) | private $current\_settings = []; |
| [8](#L8) | public $tabs              = []; |
| [9](#L9) | public $settings\_nav; |
| [10](#L10) |  |
| [11](#L11) | function \_\_construct() { |
| [12](#L12) |  |
| [13](#L13) | //Execute action? |
| [14](#L14) | if (sizeof($\_POST)) { |
| [15](#L15) | //Clear cache |
| [16](#L16) | if (isset($\_POST['Waymark\_Settings']['advanced']['performance']['clear\_cache'])) { |
| [17](#L17) | $this->execute\_action('clear\_cache'); |
| [18](#L18) | } |
| [19](#L19) | } |
| [20](#L20) |  |
| [21](#L21) | //Get current settings from DB |
| [22](#L22) | $current\_settings = get\_option('Waymark\_Settings'); |
| [23](#L23) | if (is\_array($current\_settings)) { |
| [24](#L24) | $this->current\_settings = $current\_settings; |
| [25](#L25) | } |
| [26](#L26) |  |
| [27](#L27) | /\*\* |
| [28](#L28) | \* =========================================== |
| [29](#L29) | \* =============== SETTINGS NAV ============== |
| [30](#L30) | \* =========================================== |
| [31](#L31) | \*/ |
| [32](#L32) |  |
| [33](#L33) | $this->settings\_nav = [ |
| [34](#L34) | 'label\_maps' => esc\_html\_\_('Maps'), |
| [35](#L35) | 'waymark-settings-tab-tiles' => '-- ' . esc\_html\_\_('Basemaps', 'waymark'), |
| [36](#L36) | 'waymark-settings-section-shortcode\_options' => '-- ' . esc\_html\_\_('Shortcodes', 'waymark'), |
| [37](#L37) | 'waymark-settings-section-elevation\_options' => '-- ' . esc\_html\_\_('Elevation', 'waymark'), |
| [38](#L38) | 'waymark-settings-tab-meta' => '-- ' . esc\_html\_\_('Meta', 'waymark'), |
| [39](#L39) | 'waymark-settings-section-interaction\_options' => '-- ' . esc\_html\_\_('Sleep', 'waymark'), |
| [40](#L40) | 'waymark-settings-section-cluster\_options' => '-- ' . esc\_html\_\_('Clustering', 'waymark'), |
| [41](#L41) | 'waymark-settings-section-map\_options' => '-- ' . esc\_html\_\_('Misc.', 'waymark'), |
| [42](#L42) | 'label\_overlays' => esc\_html\_\_('Overlays'), |
| [43](#L43) | 'waymark-settings-tab-markers' => '-- ' . esc\_html\_\_('Markers', 'waymark'), |
| [44](#L44) | 'waymark-settings-tab-lines' => '-- ' . esc\_html\_\_('Lines', 'waymark'), |
| [45](#L45) | 'waymark-settings-tab-shapes' => '-- ' . esc\_html\_\_('Shapes', 'waymark'), |
| [46](#L46) | 'waymark-settings-tab-properties' => '-- ' . esc\_html\_\_('Properties', 'waymark'), |
| [47](#L47) | 'label\_sources' => esc\_html\_\_('Sources'), |
| [48](#L48) | 'waymark-settings-tab-submission' => '-- ' . esc\_html\_\_('Submissions', 'waymark'), |
| [49](#L49) | 'waymark-settings-tab-misc' => esc\_html\_\_('Advanced', 'waymark'), |
| [50](#L50) | ]; |
| [51](#L51) |  |
| [52](#L52) | /\*\* |
| [53](#L53) | \* =========================================== |
| [54](#L54) | \* ================= BASEMAPS ================ |
| [55](#L55) | \* =========================================== |
| [56](#L56) | \*/ |
| [57](#L57) |  |
| [58](#L58) | $this->tabs['tiles'] = [ |
| [59](#L59) | 'name' => esc\_html\_\_('Basemaps', 'waymark'), |
| [60](#L60) | 'description' => '', |
| [61](#L61) | 'sections' => [ |
| [62](#L62) | 'layers' => [ |
| [63](#L63) | 'repeatable' => true, |
| [64](#L64) | 'title' => esc\_html\_\_('Basemaps', 'waymark'), |
| [65](#L65) | 'description' => sprintf(\_\_('<span class="waymark-lead">Waymark uses the excellent <a href="%s">OpenStreetMap</a> as it’s default Basemap and supports many <a href="%s">other providers</a>.<br /><br /><a href="%s">Thunderforest</a> and <a href="%s">Mapbox</a> are examples of providers that offer easy access to beautiful Basemaps (including satellite imagery). They require registration, but have a free usage tier.', 'waymark'), 'https://www.openstreetmap.org/fixthemap', 'https://leaflet-extras.github.io/leaflet-providers/preview/', 'https://www.thunderforest.com/', 'https://www.mapbox.com/maps/'), |
| [66](#L66) | 'footer' => sprintf(\_\_('<small><b>Pro Tip!</b> If you have more than one Basemap, you can switch between them when viewing the Map. The first listed will be used as the default, unless specified in the shortcode like this: %s. Drag to re-order, remove all to restore defaults.</small>', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; basemap=&quot;Basemap Name&quot;]'), |
| [67](#L67) | 'help' => [ |
| [68](#L68) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/basemaps')), |
| [69](#L69) | 'text' => esc\_attr\_\_('Basemap Docs &raquo;', 'waymark'), |
| [70](#L70) | ], |
| [71](#L71) | 'fields' => [ |
| [72](#L72) | 'layer\_name' => [ |
| [73](#L73) | 'name' => 'layer\_name', |
| [74](#L74) | 'id' => 'layer\_name', |
| [75](#L75) | 'type' => 'text', |
| [76](#L76) | 'class' => '', |
| [77](#L77) | 'title' => '<u>' . esc\_html\_\_('Basemap', 'waymark') . '</u> ' . esc\_html\_\_('Name', 'waymark'), |
| [78](#L78) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_name'), |
| [79](#L79) | 'tip' => sprintf(esc\_attr\_\_('The Layer Name will appear in a dropdown list shown by the Map when multiple Basemaps have been entered. You can change the default basemap in the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; basemap=&quot;Basemap Name&quot;]'), |
| [80](#L80) | 'input\_processing' => [ |
| [81](#L81) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Basemap', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [82](#L82) | ], |
| [83](#L83) | ], |
| [84](#L84) | 'layer\_url' => [ |
| [85](#L85) | 'name' => 'layer\_url', |
| [86](#L86) | 'id' => 'layer\_url', |
| [87](#L87) | 'type' => 'text', |
| [88](#L88) | 'class' => '', |
| [89](#L89) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Basemap', 'waymark') . '</span> URL', |
| [90](#L90) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_url'), |
| [91](#L91) | 'tip' => sprintf(esc\_attr\_\_('Many mapping services support the Slippy Map format. Waymark requires URLs that contain {z} (zoom level) and {x}/{y} (tile coordinates). For example the OpenCycleMap URL is %s.', 'waymark'), 'https://tile.thunderforest.com/cycle/{z}/{x}/{y}@2x.png?apikey=[your\_api\_key]'), |
| [92](#L92) | 'tip\_link' => 'https://www.thunderforest.com/docs/map-tiles-api/', |
| [93](#L93) | ], |
| [94](#L94) | 'layer\_attribution' => [ |
| [95](#L95) | 'name' => 'layer\_attribution', |
| [96](#L96) | 'id' => 'layer\_attribution', |
| [97](#L97) | 'type' => 'text', |
| [98](#L98) | 'class' => '', |
| [99](#L99) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Basemap', 'waymark') . '</span> Attribution', |
| [100](#L100) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_attribution'), |
| [101](#L101) | 'tip' => esc\_attr\_\_('Mapping services often have the requirement that attribution is displayed by the map. Text and HTML links are supported.', 'waymark'), |
| [102](#L102) | 'tip\_link' => 'https://www.thunderforest.com/terms/#attribution', |
| [103](#L103) | 'input\_processing' => [ |
| [104](#L104) | '(! strpos($param\_value, "&")) ? htmlspecialchars($param\_value) : $param\_value', |
| [105](#L105) | ], |
| [106](#L106) | ], |
| [107](#L107) | 'layer\_max\_zoom' => [ |
| [108](#L108) | 'name' => 'layer\_max\_zoom', |
| [109](#L109) | 'id' => 'layer\_max\_zoom', |
| [110](#L110) | 'type' => 'text', |
| [111](#L111) | 'class' => 'waymark-short-input', |
| [112](#L112) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Basemap', 'waymark') . '</span> ' . esc\_html\_\_('Max Zoom', 'waymark'), |
| [113](#L113) | 'default' => Waymark\_Config::get\_setting('tiles', 'layers', 'layer\_max\_zoom'), |
| [114](#L114) | 'tip' => esc\_attr\_\_('Set a maximum zoom level for this Basemap, the default is 18.', 'waymark'), |
| [115](#L115) | 'input\_processing' => [ |
| [116](#L116) | '(is\_numeric($param\_value) && $param\_value >= 1 && $param\_value <= 18) ? $param\_value : 18;', //Fallback |
| [117](#L117) | ], |
| [118](#L118) | ], |
| [119](#L119) | ], |
| [120](#L120) | ], |
| [121](#L121) | ], |
| [122](#L122) | ]; |
| [123](#L123) |  |
| [124](#L124) | /\*\* |
| [125](#L125) | \* =========================================== |
| [126](#L126) | \* ================= MARKERS ================= |
| [127](#L127) | \* =========================================== |
| [128](#L128) | \*/ |
| [129](#L129) |  |
| [130](#L130) | $this->tabs['markers'] = [ |
| [131](#L131) | 'name' => esc\_html\_\_('Markers', 'waymark'), |
| [132](#L132) | 'description' => '', |
| [133](#L133) | 'sections' => [ |
| [134](#L134) | 'marker\_types' => [ |
| [135](#L135) | 'repeatable' => true, |
| [136](#L136) | 'title' => esc\_html\_\_('Marker', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
| [137](#L137) | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Markers are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
| [138](#L138) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [139](#L139) | 'help' => [ |
| [140](#L140) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
| [141](#L141) | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
| [142](#L142) | ], |
| [143](#L143) | 'fields' => [ |
| [144](#L144) | 'marker\_title' => [ |
| [145](#L145) | 'name' => 'marker\_title', |
| [146](#L146) | 'id' => 'marker\_title', |
| [147](#L147) | 'type' => 'text', |
| [148](#L148) | 'class' => 'waymark-uneditable', |
| [149](#L149) | 'title' => '<u>' . esc\_html\_\_('Marker', 'waymark') . '</u> ' . esc\_html\_\_('Label', 'waymark'), |
| [150](#L150) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_title'), |
| [151](#L151) | 'tip' => esc\_attr\_\_('What kind of Marker is this? E.g. "Photo", "Grocery Store", "Warning!". Once saved, Marker labels can not be edited. The Marker Label is displayed in the Tooltip (when hovering over the Marker) and in the Info Window (once the Marker is clicked). Hide in Settings > Map > Misc. > Type Labels.', 'waymark'), |
| [152](#L152) | 'input\_processing' => [ |
| [153](#L153) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Marker', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [154](#L154) | ], |
| [155](#L155) | ], |
| [156](#L156) | 'marker\_shape' => [ |
| [157](#L157) | 'name' => 'marker\_shape', |
| [158](#L158) | 'id' => 'marker\_shape', |
| [159](#L159) | 'type' => 'select', |
| [160](#L160) | 'class' => '', |
| [161](#L161) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Shape', 'waymark'), |
| [162](#L162) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_shape'), |
| [163](#L163) | 'tip' => esc\_attr\_\_('Which shape of Marker to use. Circles and Squares are centered at the specified location, Markers point down to that location.', 'waymark'), |
| [164](#L164) | 'options' => [ |
| [165](#L165) | 'marker' => esc\_html\_\_('Marker', 'waymark'), |
| [166](#L166) | 'circle' => esc\_html\_\_('Circle', 'waymark'), |
| [167](#L167) | 'rectangle' => esc\_html\_\_('Square', 'waymark'), |
| [168](#L168) | ], |
| [169](#L169) | ], |
| [170](#L170) | 'marker\_size' => [ |
| [171](#L171) | 'name' => 'marker\_size', |
| [172](#L172) | 'id' => 'marker\_size', |
| [173](#L173) | 'type' => 'select', |
| [174](#L174) | 'class' => '', |
| [175](#L175) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Size', 'waymark'), |
| [176](#L176) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_size'), |
| [177](#L177) | 'tip' => esc\_attr\_\_('Which size of Marker to use.', 'waymark'), |
| [178](#L178) | 'options' => [ |
| [179](#L179) | 'small' => esc\_html\_\_('Small', 'waymark'), |
| [180](#L180) | 'medium' => esc\_html\_\_('Medium', 'waymark'), |
| [181](#L181) | 'large' => esc\_html\_\_('Large', 'waymark'), |
| [182](#L182) | ], |
| [183](#L183) | ], |
| [184](#L184) | 'marker\_colour' => [ |
| [185](#L185) | 'name' => 'marker\_colour', |
| [186](#L186) | 'id' => 'marker\_colour', |
| [187](#L187) | 'type' => 'text', |
| [188](#L188) | 'class' => 'waymark-short-input', |
| [189](#L189) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Background', 'waymark'), |
| [190](#L190) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_colour'), |
| [191](#L191) | 'tip' => esc\_attr\_\_('The Marker background colour. Click "Select Colour" to select.', 'waymark'), |
| [192](#L192) | 'input\_processing' => [ |
| [193](#L193) | '(! empty($param\_value)) ? $param\_value : "white";', //Fallback |
| [194](#L194) | ], |
| [195](#L195) | ], |
| [196](#L196) | 'marker\_display' => [ |
| [197](#L197) | 'name' => 'marker\_display', |
| [198](#L198) | 'id' => 'marker\_display', |
| [199](#L199) | 'type' => 'boolean', |
| [200](#L200) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Show Initially', 'waymark'), |
| [201](#L201) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_display'), |
| [202](#L202) | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
| [203](#L203) | 'input\_processing' => [ |
| [204](#L204) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [205](#L205) | ], |
| [206](#L206) | ], |
| [207](#L207) | 'marker\_submission' => [ |
| [208](#L208) | 'name' => 'marker\_submission', |
| [209](#L209) | 'id' => 'marker\_submission', |
| [210](#L210) | 'type' => 'boolean', |
| [211](#L211) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Marker', 'waymark') . '</span> ' . esc\_html\_\_('Submissions?', 'waymark'), |
| [212](#L212) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_submission'), |
| [213](#L213) | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
| [214](#L214) | 'input\_processing' => [ |
| [215](#L215) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [216](#L216) | ], |
| [217](#L217) | ], |
| [218](#L218) | 'icon\_type' => [ |
| [219](#L219) | 'name' => 'icon\_type', |
| [220](#L220) | 'id' => 'icon\_type', |
| [221](#L221) | 'type' => 'select', |
| [222](#L222) | 'class' => '', |
| [223](#L223) | 'title' => '<span style="display:inline-block;min-width:50px">' . esc\_html\_\_('Icon', 'waymark') . '</span>' . esc\_html\_\_('Type', 'waymark'), |
| [224](#L224) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'icon\_type'), |
| [225](#L225) | 'tip' => esc\_attr\_\_('Font Icons are available from Font Awesome and Ionic Icons. Simple Text or Emojis are supported, as well as custom HTML. So you can pretty much use anything you like!', 'waymark'), |
| [226](#L226) | 'tip\_link' => 'https://emojifinder.com/', |
| [227](#L227) | 'options' => [ |
| [228](#L228) | 'icon' => esc\_html\_\_('Font Icon', 'waymark'), |
| [229](#L229) | 'text' => esc\_html\_\_('Text (or Emoji!)', 'waymark'), |
| [230](#L230) | 'html' => esc\_html\_\_('HTML', 'waymark'), |
| [231](#L231) | ], |
| [232](#L232) | ], |
| [233](#L233) | 'marker\_icon' => [ |
| [234](#L234) | 'name' => 'marker\_icon', |
| [235](#L235) | 'id' => 'marker\_icon', |
| [236](#L236) | 'type' => 'text', |
| [237](#L237) | 'class' => 'waymark-short-input', |
| [238](#L238) | 'title' => '<span class="waymark-invisible" style="display:inline-block;min-width:50px">' . esc\_html\_\_('Icon', 'waymark') . '</span><span class="waymark-icon-type">' . esc\_html\_\_('Name', 'waymark') . '</span>', |
| [239](#L239) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'marker\_icon'), |
| [240](#L240) | 'tip' => esc\_attr\_\_('The desired icon name from Ionicons or Font Awesome, e.g. "ion-camera", or "fa-camera". Click the links to see the full list of icons available.|Text to display inside the Marker, in the chosen colour. Space is very limited! Pro Tip: adjust text size using CSS; for all Markers: .waymark-icon-text{font-size: 18px}, or by Type: .waymark-marker-photo .waymark-icon-text{...}. Use your browser\'s inspector to dig for Type class names.|The HTML entered will be added inside each Marker. Pro Tip! HTML Entities supported (e.g. &amp;cross; as well as Unicode and Emojis!), or provide HTML to integrate with other Icon providers.', 'waymark'), |
| [241](#L241) | 'input\_processing' => [ |
| [242](#L242) | '(strpbrk($param\_value, "\">")) ? htmlspecialchars($param\_value) : $param\_value', |
| [243](#L243) | ], |
| [244](#L244) | 'append' => '<div class="waymark-icons-help"><a href="https://ionic.io/ionicons/v2/cheatsheet.html">Ionic Icons</a><a href="https://fontawesome.com/v4.7.0/cheatsheet/">Font Awesome</a></div>', |
| [245](#L245) | ], |
| [246](#L246) | 'icon\_colour' => [ |
| [247](#L247) | 'name' => 'icon\_colour', |
| [248](#L248) | 'id' => 'icon\_colour', |
| [249](#L249) | 'type' => 'text', |
| [250](#L250) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [251](#L251) | 'title' => '<span class="waymark-invisible" style="display:inline-block;min-width:50px">' . esc\_html\_\_('Icon', 'waymark') . '</span>' . esc\_html\_\_('Colour', 'waymark'), |
| [252](#L252) | 'default' => Waymark\_Config::get\_setting('markers', 'marker\_types', 'icon\_colour'), |
| [253](#L253) | 'tip' => esc\_attr\_\_('The colour of the icon. Click "Select Colour" to select.', 'waymark'), |
| [254](#L254) | 'input\_processing' => [ |
| [255](#L255) | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
| [256](#L256) | ], |
| [257](#L257) | ], |
| [258](#L258) | ], |
| [259](#L259) | ], |
| [260](#L260) | ], |
| [261](#L261) | ]; |
| [262](#L262) |  |
| [263](#L263) | /\*\* |
| [264](#L264) | \* =========================================== |
| [265](#L265) | \* ================== LINES ================== |
| [266](#L266) | \* =========================================== |
| [267](#L267) | \*/ |
| [268](#L268) |  |
| [269](#L269) | $this->tabs['lines'] = [ |
| [270](#L270) | 'name' => esc\_html\_\_('Lines', 'waymark'), |
| [271](#L271) | 'description' => '', |
| [272](#L272) | 'sections' => [ |
| [273](#L273) | 'line\_types' => [ |
| [274](#L274) | 'repeatable' => true, |
| [275](#L275) | 'title' => esc\_html\_\_('Line', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
| [276](#L276) | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Lines are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
| [277](#L277) | 'help' => [ |
| [278](#L278) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
| [279](#L279) | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
| [280](#L280) | ], |
| [281](#L281) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [282](#L282) | 'fields' => [ |
| [283](#L283) | 'line\_title' => [ |
| [284](#L284) | 'name' => 'line\_title', |
| [285](#L285) | 'id' => 'line\_title', |
| [286](#L286) | 'type' => 'text', |
| [287](#L287) | 'class' => 'waymark-uneditable', |
| [288](#L288) | 'title' => '<u>' . esc\_html\_\_('Line', 'waymark') . '</u> ' . esc\_html\_\_('Label', 'waymark'), |
| [289](#L289) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_title'), |
| [290](#L290) | 'tip' => esc\_attr\_\_('What kind of Line is this? E.g. "Easy", "Walking Only", "Dark Red". The Line Label is displayed in the Tooltip (when hovering over the Line) and in the Line Info Window. Once saved, Line labels can not be edited.', 'waymark'), |
| [291](#L291) | 'input\_processing' => [ |
| [292](#L292) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Line', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [293](#L293) | ], |
| [294](#L294) | ], |
| [295](#L295) | 'line\_colour' => [ |
| [296](#L296) | 'name' => 'line\_colour', |
| [297](#L297) | 'id' => 'line\_colour', |
| [298](#L298) | 'type' => 'text', |
| [299](#L299) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [300](#L300) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Colour', 'waymark'), |
| [301](#L301) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_colour'), |
| [302](#L302) | 'tip' => esc\_attr\_\_('The colour of the Line. Click "Select Colour" to select.', 'waymark'), |
| [303](#L303) | 'input\_processing' => [ |
| [304](#L304) | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
| [305](#L305) | ], |
| [306](#L306) | ], |
| [307](#L307) | 'line\_weight' => [ |
| [308](#L308) | 'name' => 'line\_weight', |
| [309](#L309) | 'id' => 'line\_weight', |
| [310](#L310) | 'type' => 'text', |
| [311](#L311) | 'class' => 'waymark-short-input', |
| [312](#L312) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Weight', 'waymark'), |
| [313](#L313) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_weight'), |
| [314](#L314) | 'tip' => esc\_attr\_\_('The width of the Line, in pixels.', 'waymark'), |
| [315](#L315) | 'input\_processing' => [ |
| [316](#L316) | '(is\_numeric($param\_value)) ? $param\_value : 3;', //Fallback |
| [317](#L317) | ], |
| [318](#L318) | ], |
| [319](#L319) | 'line\_opacity' => [ |
| [320](#L320) | 'name' => 'line\_opacity', |
| [321](#L321) | 'id' => 'line\_opacity', |
| [322](#L322) | 'type' => 'text', |
| [323](#L323) | 'class' => 'waymark-short-input', |
| [324](#L324) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Opacity', 'waymark'), |
| [325](#L325) | 'default' => Waymark\_Config::get\_default('lines', 'line\_types', 'line\_opacity'), |
| [326](#L326) | 'tip' => esc\_attr\_\_('The opacity of the Line, between 0.0 and 1.0 (e.g. "0.5").', 'waymark'), |
| [327](#L327) | 'input\_processing' => [ |
| [328](#L328) | '(is\_numeric($param\_value) && $param\_value > 0 && $param\_value <= 1) ? $param\_value : 0.7;', //Fallback |
| [329](#L329) | ], |
| [330](#L330) | ], |
| [331](#L331) | 'line\_display' => [ |
| [332](#L332) | 'name' => 'line\_display', |
| [333](#L333) | 'id' => 'line\_display', |
| [334](#L334) | 'type' => 'boolean', |
| [335](#L335) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Show Initially', 'waymark'), |
| [336](#L336) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_display'), |
| [337](#L337) | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
| [338](#L338) | 'input\_processing' => [ |
| [339](#L339) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [340](#L340) | ], |
| [341](#L341) | ], |
| [342](#L342) | 'line\_submission' => [ |
| [343](#L343) | 'name' => 'line\_submission', |
| [344](#L344) | 'id' => 'line\_submission', |
| [345](#L345) | 'type' => 'boolean', |
| [346](#L346) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Line', 'waymark') . '</span> ' . esc\_html\_\_('Submissions?', 'waymark'), |
| [347](#L347) | 'default' => Waymark\_Config::get\_setting('lines', 'line\_types', 'line\_submission'), |
| [348](#L348) | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
| [349](#L349) | 'input\_processing' => [ |
| [350](#L350) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [351](#L351) | ], |
| [352](#L352) | ], |
| [353](#L353) | ], |
| [354](#L354) | ], |
| [355](#L355) | ], |
| [356](#L356) | ]; |
| [357](#L357) |  |
| [358](#L358) | /\*\* |
| [359](#L359) | \* =========================================== |
| [360](#L360) | \* ================= SHAPES ================== |
| [361](#L361) | \* =========================================== |
| [362](#L362) | \*/ |
| [363](#L363) |  |
| [364](#L364) | $this->tabs['shapes'] = [ |
| [365](#L365) | 'name' => esc\_html\_\_('Shapes', 'waymark'), |
| [366](#L366) | 'description' => '', |
| [367](#L367) | 'sections' => [ |
| [368](#L368) | 'shape\_types' => [ |
| [369](#L369) | 'repeatable' => true, |
| [370](#L370) | 'title' => esc\_html\_\_('Shape', 'waymark') . ' ' . esc\_html\_\_('Types', 'waymark'), |
| [371](#L371) | 'description' => '<span class="waymark-lead">' . \_\_('Customise how Shapes are displayed on the Map. Set these styles once, then select the appropriate Type when you add to the Map.', 'waymark') . '</span>', |
| [372](#L372) | 'help' => [ |
| [373](#L373) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/types')), |
| [374](#L374) | 'text' => esc\_attr\_\_('Type Docs &raquo;', 'waymark'), |
| [375](#L375) | ], |
| [376](#L376) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [377](#L377) | 'fields' => [ |
| [378](#L378) | 'shape\_title' => [ |
| [379](#L379) | 'name' => 'shape\_title', |
| [380](#L380) | 'id' => 'shape\_title', |
| [381](#L381) | 'type' => 'text', |
| [382](#L382) | 'class' => 'waymark-uneditable', |
| [383](#L383) | 'title' => '<u>' . esc\_html\_\_('Shape', 'waymark') . '</u> ' . esc\_html\_\_('Label', 'waymark'), |
| [384](#L384) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_title'), |
| [385](#L385) | 'tip' => esc\_attr\_\_('What kind of Shape is this? E.g. "Park", "Danger!", "Light Blue". The Shape Label is displayed in the Tooltip (when hovering over the Shape) and in the Shape Info Window. Once saved, Shape labels can not be edited.', 'waymark'), |
| [386](#L386) | 'input\_processing' => [ |
| [387](#L387) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Shape', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [388](#L388) | ], |
| [389](#L389) | ], |
| [390](#L390) | 'shape\_colour' => [ |
| [391](#L391) | 'name' => 'shape\_colour', |
| [392](#L392) | 'id' => 'shape\_colour', |
| [393](#L393) | 'type' => 'text', |
| [394](#L394) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [395](#L395) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Colour', 'waymark'), |
| [396](#L396) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_colour'), |
| [397](#L397) | 'tip' => esc\_attr\_\_('The colour of the Shape. Click "Select Colour" to select.', 'waymark'), |
| [398](#L398) | 'input\_processing' => [ |
| [399](#L399) | '(! empty($param\_value)) ? $param\_value : "#81d742";', //Fallback |
| [400](#L400) | ], |
| [401](#L401) | ], |
| [402](#L402) | 'fill\_opacity' => [ |
| [403](#L403) | 'name' => 'fill\_opacity', |
| [404](#L404) | 'id' => 'fill\_opacity', |
| [405](#L405) | 'type' => 'text', |
| [406](#L406) | 'class' => 'waymark-short-input', |
| [407](#L407) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Fill Opacity', 'waymark'), |
| [408](#L408) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'fill\_opacity'), |
| [409](#L409) | 'tip' => esc\_attr\_\_('The opacity of the inside of the shape, between 0.0 and 1.0 (e.g. "0.5").', 'waymark'), |
| [410](#L410) | 'input\_processing' => [ |
| [411](#L411) | '(is\_numeric($param\_value) && $param\_value > 0 && $param\_value <= 1) ? $param\_value : 0.5;', //Fallback |
| [412](#L412) | ], |
| [413](#L413) | ], |
| [414](#L414) | 'shape\_display' => [ |
| [415](#L415) | 'name' => 'shape\_display', |
| [416](#L416) | 'id' => 'shape\_display', |
| [417](#L417) | 'type' => 'boolean', |
| [418](#L418) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Show Initially', 'waymark'), |
| [419](#L419) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_display'), |
| [420](#L420) | 'tip' => esc\_attr\_\_('When using the Overlay Filter you can choose to show/hide certain Types when the Map initially loads.', 'waymark'), |
| [421](#L421) | 'input\_processing' => [ |
| [422](#L422) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [423](#L423) | ], |
| [424](#L424) | ], |
| [425](#L425) | 'shape\_submission' => [ |
| [426](#L426) | 'name' => 'shape\_submission', |
| [427](#L427) | 'id' => 'shape\_submission', |
| [428](#L428) | 'type' => 'boolean', |
| [429](#L429) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Shape', 'waymark') . '</span> ' . esc\_html\_\_('Submissions?', 'waymark'), |
| [430](#L430) | 'default' => Waymark\_Config::get\_setting('shapes', 'shape\_types', 'shape\_submission'), |
| [431](#L431) | 'tip' => esc\_attr\_\_('Make this Type available in front-end Submissions?', 'waymark'), |
| [432](#L432) | 'input\_processing' => [ |
| [433](#L433) | '(is\_numeric($param\_value)) ? $param\_value : 1;', //Fallback |
| [434](#L434) | ], |
| [435](#L435) | ], |
| [436](#L436) | ], |
| [437](#L437) | ], |
| [438](#L438) | ], |
| [439](#L439) | ]; |
| [440](#L440) |  |
| [441](#L441) | /\*\* |
| [442](#L442) | \* =========================================== |
| [443](#L443) | \* =================== META ================== |
| [444](#L444) | \* =========================================== |
| [445](#L445) | \*/ |
| [446](#L446) |  |
| [447](#L447) | $meta\_group\_options = Waymark\_Helper::repeatable\_setting\_option\_array('meta', 'groups', 'group\_title'); |
| [448](#L448) | $meta\_group\_options = array\_merge(['' => 'None'], $meta\_group\_options); |
| [449](#L449) |  |
| [450](#L450) | $this->tabs['meta'] = [ |
| [451](#L451) | 'name' => esc\_html\_\_('Meta', 'waymark'), |
| [452](#L452) | 'description' => '', |
| [453](#L453) | 'sections' => [ |
| [454](#L454) | 'inputs' => [ |
| [455](#L455) | 'repeatable' => true, |
| [456](#L456) | 'title' => esc\_html\_\_('Meta', 'waymark'), |
| [457](#L457) | 'description' => '<span class="waymark-lead">' . sprintf(\_\_('Create additional input fields that appear underneath the Map Editor. Any Meta that has been input is displayed on the <a href="%s">Map Details</a> page, and can also be displayed by the Shortcode.', 'waymark'), 'https://www.waymark.dev/map/route-map/') . '</span>', |
| [458](#L458) | 'help' => [ |
| [459](#L459) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/meta')), |
| [460](#L460) | 'text' => esc\_attr\_\_('Meta Docs &raquo;', 'waymark'), |
| [461](#L461) | ], |
| [462](#L462) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> The first listed will be used as the default. Drag to re-order, remove all to restore defaults.', 'waymark') . '</small>', |
| [463](#L463) | 'fields' => [ |
| [464](#L464) | 'meta\_title' => [ |
| [465](#L465) | 'name' => 'meta\_title', |
| [466](#L466) | 'id' => 'meta\_title', |
| [467](#L467) | 'type' => 'text', |
| [468](#L468) | 'class' => '', |
| [469](#L469) | 'title' => '<u>' . esc\_html\_\_('Meta', 'waymark') . '</u> ' . esc\_html\_\_('Title', 'waymark'), |
| [470](#L470) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_title'), |
| [471](#L471) | 'tip' => esc\_attr\_\_('The title appears next to the input field.', 'waymark'), |
| [472](#L472) | 'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
| [473](#L473) | 'input\_processing' => [ |
| [474](#L474) | '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Meta', 'waymark') . ' ' . substr(md5(rand(0, 999999)), 0, 5) . '";', //Fallback |
| [475](#L475) | ], |
| [476](#L476) | ], |
| [477](#L477) | 'meta\_default' => [ |
| [478](#L478) | 'name' => 'meta\_default', |
| [479](#L479) | 'id' => 'meta\_default', |
| [480](#L480) | 'type' => 'text', |
| [481](#L481) | 'class' => '', |
| [482](#L482) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Default', 'waymark'), |
| [483](#L483) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_default'), |
| [484](#L484) | 'tip' => esc\_attr\_\_('The default value for the input field. For Select and Multi-Select enter the option/comma-separated options to be selected by default.', 'waymark'), |
| [485](#L485) | ], |
| [486](#L486) | 'meta\_tip' => [ |
| [487](#L487) | 'name' => 'meta\_tip', |
| [488](#L488) | 'id' => 'meta\_tip', |
| [489](#L489) | 'type' => 'text', |
| [490](#L490) | 'class' => '', |
| [491](#L491) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Tip', 'waymark'), |
| [492](#L492) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_tip'), |
| [493](#L493) | 'tip' => esc\_attr\_\_('A tip provides additional information about an input field... just like this!', 'waymark'), |
| [494](#L494) | ], |
| [495](#L495) | 'meta\_type' => [ |
| [496](#L496) | 'name' => 'meta\_type', |
| [497](#L497) | 'id' => 'meta\_type', |
| [498](#L498) | 'type' => 'select', |
| [499](#L499) | 'class' => '', |
| [500](#L500) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Type', 'waymark'), |
| [501](#L501) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_type'), |
| [502](#L502) | 'tip' => esc\_attr\_\_('The type of input field to use.', 'waymark'), |
| [503](#L503) | 'options' => [ |
| [504](#L504) | 'text' => esc\_html\_\_('Text', 'waymark'), |
| [505](#L505) | 'textarea' => esc\_html\_\_('Textarea', 'waymark'), |
| [506](#L506) | 'textarea\_rich' => esc\_html\_\_('Rich Text', 'waymark'), |
| [507](#L507) | 'select' => esc\_html\_\_('Select', 'waymark'), |
| [508](#L508) | 'select\_multi' => esc\_html\_\_('Multi-Select', 'waymark'), |
| [509](#L509) | ], |
| [510](#L510) | ], |
| [511](#L511) | 'meta\_options' => [ |
| [512](#L512) | 'name' => 'meta\_options', |
| [513](#L513) | 'id' => 'meta\_options', |
| [514](#L514) | 'type' => 'text', |
| [515](#L515) | 'class' => '', |
| [516](#L516) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Options', 'waymark'), |
| [517](#L517) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_options'), |
| [518](#L518) | 'tip' => esc\_attr\_\_('A comma-separated list of options for the input.', 'waymark'), |
| [519](#L519) | ], |
| [520](#L520) | 'meta\_group' => [ |
| [521](#L521) | 'name' => 'meta\_group', |
| [522](#L522) | 'id' => 'meta\_group', |
| [523](#L523) | 'type' => 'select', |
| [524](#L524) | 'options' => $meta\_group\_options, |
| [525](#L525) | 'class' => (sizeof($meta\_group\_options) === 1) ? 'waymark-hidden' : '', |
| [526](#L526) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('Group', 'waymark'), |
| [527](#L527) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_group'), |
| [528](#L528) | 'tip' => esc\_attr\_\_('Which group this Meta belongs to (if any). Meta in the same group will be displayed together when editing and viewing Maps. Meta not in a group will be displayed above any groups.', 'waymark'), |
| [529](#L529) | ], |
| [530](#L530) | 'meta\_shortcode' => [ |
| [531](#L531) | 'name' => 'meta\_shortcode', |
| [532](#L532) | 'id' => 'meta\_shortcode', |
| [533](#L533) | 'type' => 'boolean', |
| [534](#L534) | 'class' => '', |
| [535](#L535) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('In Shortcode?', 'waymark'), |
| [536](#L536) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_shortcode'), |
| [537](#L537) | 'tip' => esc\_attr\_\_('Whether this content should be displayed when embedding a Map using the Shortcode.', 'waymark'), |
| [538](#L538) | ], |
| [539](#L539) | 'meta\_submission' => [ |
| [540](#L540) | 'name' => 'meta\_submission', |
| [541](#L541) | 'id' => 'meta\_submission', |
| [542](#L542) | 'type' => 'boolean', |
| [543](#L543) | 'class' => '', |
| [544](#L544) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Meta', 'waymark') . '</span> ' . esc\_html\_\_('In Submissions?', 'waymark'), |
| [545](#L545) | 'default' => Waymark\_Config::get\_setting('meta', 'inputs', 'meta\_submission'), |
| [546](#L546) | 'tip' => esc\_attr\_\_('Make this Meta available in front-end Submissions?', 'waymark'), |
| [547](#L547) | ], |
| [548](#L548) | ], |
| [549](#L549) | ], |
| [550](#L550) | 'groups' => [ |
| [551](#L551) | 'repeatable' => true, |
| [552](#L552) | 'title' => esc\_html\_\_('Groups', 'waymark'), |
| [553](#L553) | 'description' => '<span class="waymark-lead">' . \_\_('Create groups to organise your Map Meta. Meta in the same group will be displayed together when editing and viewing Maps.', 'waymark') . '</span>', |
| [554](#L554) | 'footer' => '<small>' . \_\_('<b>Pro Tip!</b> Drag to re-order, remove all to disable groups.', 'waymark') . '</small>', |
| [555](#L555) | 'fields' => [ |
| [556](#L556) | 'group\_title' => [ |
| [557](#L557) | 'name' => 'group\_title', |
| [558](#L558) | 'id' => 'group\_title', |
| [559](#L559) | 'type' => 'text', |
| [560](#L560) | 'class' => '', |
| [561](#L561) | 'title' => '<u>' . esc\_html\_\_('Group', 'waymark') . '</u> ' . esc\_html\_\_('Title', 'waymark'), |
| [562](#L562) | 'default' => '', |
| [563](#L563) | 'tip' => esc\_attr\_\_('The title appears above the Meta in that group.', 'waymark'), |
| [564](#L564) | //                                                      'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
| [565](#L565) | //                                                      'input\_processing' => array( |
| [566](#L566) | //                                                              '(! empty($param\_value)) ? $param\_value : "' . esc\_html\_\_('Meta', 'waymark') . ' ' . substr(md5(rand(0,999999)), 0, 5) . '";'   //Fallback |
| [567](#L567) | //                                                      ) |
| [568](#L568) | ], |
| [569](#L569) | ], |
| [570](#L570) | ], |
| [571](#L571) | ], |
| [572](#L572) | ]; |
| [573](#L573) |  |
| [574](#L574) | /\*\* |
| [575](#L575) | \* =========================================== |
| [576](#L576) | \* =============== PROPERTIES ================ |
| [577](#L577) | \* =========================================== |
| [578](#L578) | \*/ |
| [579](#L579) |  |
| [580](#L580) | $this->tabs['properties'] = [ |
| [581](#L581) | 'name' => esc\_html\_\_('Properties', 'waymark'), |
| [582](#L582) | 'description' => '', |
| [583](#L583) | 'sections' => [ |
| [584](#L584) | 'props' => [ |
| [585](#L585) | 'repeatable' => true, |
| [586](#L586) | 'title' => esc\_html\_\_('Properties', 'waymark'), |
| [587](#L587) | 'description' => '<span class="waymark-lead">' . \_\_('Read <b><a href="https://geojson.org/">GeoJSON</a></b> feature properties when importing.', 'waymark') . '</span><br /><br />' . \_\_('If Waymark finds data for the property keys below it will stored when it is imported. These can be automatically appended to the Overlay Description, or accessed programatically the <code>layer.feature.properties</code> Object.', 'waymark'), |
| [588](#L588) | 'footer' => '<small>' . \_\_(sprintf('For example, the properties below can be accessed through the %s, %s, %s Property Keys:', '<code>created\_date</code>', '<code>updated\_date</code>', '<code>expires\_date</code>'), 'waymark') . '</small> |
| [589](#L589) | <pre><code>{ |
| [590](#L590) | "type": "FeatureCollection", |
| [591](#L591) | "features": [ |
| [592](#L592) | { |
| [593](#L593) | "geometry": { ... }, |
| [594](#L594) | "type": "Feature", |
| [595](#L595) | "properties": { |
| [596](#L596) | "created\_date": "2021-07-15T00:42:41Z", |
| [597](#L597) | "updated\_date": "2021-07-16T00:42:41Z", |
| [598](#L598) | "expires\_date": "2021-07-17T00:42:41Z" |
| [599](#L599) | } |
| [600](#L600) | } |
| [601](#L601) | ] |
| [602](#L602) | } |
| [603](#L603) | </code></pre>', |
| [604](#L604) |  |
| [605](#L605) | //                                      'help' => array( |
| [606](#L606) | //                                              'url' => esc\_attr(Waymark\_Helper::site\_url('docs/meta')), |
| [607](#L607) | //                                              'text' => esc\_attr\_\_('Meta Docs &raquo;', 'waymark') |
| [608](#L608) | //                                      ), |
| [609](#L609) | 'fields' => [ |
| [610](#L610) | 'property\_key' => [ |
| [611](#L611) | 'name' => 'property\_key', |
| [612](#L612) | 'id' => 'property\_key', |
| [613](#L613) | 'type' => 'text', |
| [614](#L614) | 'class' => '', |
| [615](#L615) | 'title' => '<u>' . esc\_html\_\_('Property', 'waymark') . '</u> ' . esc\_html\_\_('Key', 'waymark'), |
| [616](#L616) | 'default' => Waymark\_Config::get\_setting('property', 'props', 'property\_key'), |
| [617](#L617) | 'tip' => esc\_attr\_\_('This is the key associated with the data you are trying to access, i.e. "properties": {"property\_key": "Some content here"}', 'waymark'), |
| [618](#L618) | //                                                      'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '', |
| [619](#L619) | 'input\_processing' => [ |
| [620](#L620) | 'preg\_replace("/[^0-9a-zA-Z -\_.]/", "", $param\_value);', |
| [621](#L621) | ], |
| [622](#L622) | ], |
| [623](#L623) | 'property\_title' => [ |
| [624](#L624) | 'name' => 'property\_title', |
| [625](#L625) | 'id' => 'property\_title', |
| [626](#L626) | 'type' => 'text', |
| [627](#L627) | 'class' => '', |
| [628](#L628) | 'title' => '<u><span class="waymark-invisible">' . esc\_html\_\_('Property', 'waymark') . '</span></u> ' . esc\_html\_\_('Title', 'waymark'), |
| [629](#L629) | 'default' => Waymark\_Config::get\_setting('property', 'props', 'property\_title'), |
| [630](#L630) | 'tip' => esc\_attr\_\_('The value for this property will be added to the Overlay Description under this title.', 'waymark'), |
| [631](#L631) | //                                                      'class' => Waymark\_Config::get\_item('meta', 'inputs') ? 'waymark-uneditable' : '' |
| [632](#L632) | ], |
| [633](#L633) | ], |
| [634](#L634) | ], |
| [635](#L635) |  |
| [636](#L636) | 'options' => [ |
| [637](#L637) | 'title' => esc\_html\_\_('Options', 'waymark'), |
| [638](#L638) | 'description' => 'Append listed Properties to the Overlay Description.', |
| [639](#L639) | 'footer' => sprintf(\_\_('<small><b>Pro Tip!</b> Properties are added to the Overlay Description with class names that can be used to target them, e.g. %s.</small>', 'waymark'), '<code class="waymark-code" style="display:inline">&lt;p class="waymark-property waymark-property-property\_key"&gt;&lt;b&gt;property\_title&lt;/b&gt;&lt;br&gt;proprty\_value&lt;/p&gt;</code>'), |
| [640](#L640) | 'fields' => [ |
| [641](#L641) | 'description\_append' => [ |
| [642](#L642) | 'name' => 'description\_append', |
| [643](#L643) | 'id' => 'description\_append', |
| [644](#L644) | 'type' => 'boolean', |
| [645](#L645) | 'title' => esc\_html\_\_('Append', 'waymark'), |
| [646](#L646) | 'default' => Waymark\_Config::get\_setting('property', 'options', 'description\_append'), |
| [647](#L647) | 'tip' => esc\_attr\_\_('Append the property value to the Overlay Description.', 'waymark'), |
| [648](#L648) |  |
| [649](#L649) | ], |
| [650](#L650) | ], |
| [651](#L651) | ], |
| [652](#L652) | ], |
| [653](#L653) | ]; |
| [654](#L654) |  |
| [655](#L655) | //Prepare Basemap values for editor option |
| [656](#L656) | $tile\_layers = Waymark\_Config::get\_item('tiles', 'layers', true); |
| [657](#L657) |  |
| [658](#L658) | //Each layer |
| [659](#L659) | $basemap\_options = []; |
| [660](#L660) | foreach ($tile\_layers as $layer) { |
| [661](#L661) | //If name exists |
| [662](#L662) | if (array\_key\_exists('layer\_name', $layer)) { |
| [663](#L663) | //Add as option |
| [664](#L664) | $basemap\_options[$layer['layer\_name']] = $layer['layer\_name']; |
| [665](#L665) | } |
| [666](#L666) | } |
| [667](#L667) |  |
| [668](#L668) | /\*\* |
| [669](#L669) | \* =========================================== |
| [670](#L670) | \* =============== SUBMISSIONS =============== |
| [671](#L671) | \* =========================================== |
| [672](#L672) | \*/ |
| [673](#L673) |  |
| [674](#L674) | //Build list of Collections to use as <select> options |
| [675](#L675) | $collection\_objects = get\_terms([ |
| [676](#L676) | 'taxonomy' => 'waymark\_collection', |
| [677](#L677) | 'hide\_empty' => false, |
| [678](#L678) | ]); |
| [679](#L679) | $collection\_array = [ |
| [680](#L680) | '' => ' - ', |
| [681](#L681) | ]; |
| [682](#L682) | foreach ($collection\_objects as $collection) { |
| [683](#L683) | $collection\_array[$collection->term\_id] = $collection->name; |
| [684](#L684) | } |
| [685](#L685) |  |
| [686](#L686) | //Roles |
| [687](#L687) | if (! function\_exists('get\_editable\_roles')) { |
| [688](#L688) | require\_once ABSPATH . 'wp-admin/includes/user.php'; |
| [689](#L689) | } |
| [690](#L690) |  |
| [691](#L691) | $role\_options = []; |
| [692](#L692) | foreach (get\_editable\_roles() as $key => $role) { |
| [693](#L693) | $role\_options[$key] = $role['name']; |
| [694](#L694) | } |
| [695](#L695) | unset($role\_options['administrator']); |
| [696](#L696) |  |
| [697](#L697) | //Public upload dir |
| [698](#L698) | $upload\_dir = wp\_upload\_dir(); |
| [699](#L699) | $upload\_dir['subdir'] = ($upload\_dir['subdir']) ? $upload\_dir['subdir'] : '/'; |
| [700](#L700) |  |
| [701](#L701) | $this->tabs['submission'] = [ |
| [702](#L702) | 'name' => esc\_html\_\_('Submissions', 'waymark'), |
| [703](#L703) | 'sections' => [ |
| [704](#L704) | //Global |
| [705](#L705) | 'global' => [ |
| [706](#L706) | 'title' => esc\_html\_\_('Front-End Submissions', 'waymark'), |
| [707](#L707) | 'description' => sprintf(\_\_('Use the %s Shortcode to allow Map submissions from the front-end of your site.', 'waymark'), '<span class="waymark-code">[Waymark content="submission"]</span>'), |
| [708](#L708) | 'help' => [ |
| [709](#L709) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/submissions')), |
| [710](#L710) | 'text' => esc\_attr\_\_('Submission Docs &raquo;', 'waymark'), |
| [711](#L711) | ], |
| [712](#L712) | 'fields' => [ |
| [713](#L713) | 'submission\_enable' => [ |
| [714](#L714) | 'name' => 'submission\_enable', |
| [715](#L715) | 'id' => 'submission\_enable', |
| [716](#L716) | 'type' => 'boolean', |
| [717](#L717) | 'title' => esc\_html\_\_('Allow Submissions', 'waymark'), |
| [718](#L718) | 'default' => Waymark\_Config::get\_setting('submission', 'global', 'submission\_enable'), |
| [719](#L719) | 'tip' => esc\_attr\_\_('Submissions will be available only to site administrators by default, but can also be allowed for registered users or even to guests without registration.', 'waymark'), |
| [720](#L720) | ], |
| [721](#L721) | ], |
| [722](#L722) | ], |
| [723](#L723) | //By role |
| [724](#L724) | 'from\_users' => [ |
| [725](#L725) | 'title' => esc\_html\_\_('User Submissions', 'waymark'), |
| [726](#L726) | 'description' => esc\_html\_\_('Allow registered users to create Maps from the front-end.', 'waymark'), |
| [727](#L727) | 'fields' => [ |
| [728](#L728) | 'submission\_roles' => [ |
| [729](#L729) | 'name' => 'submission\_roles', |
| [730](#L730) | 'id' => 'submission\_roles', |
| [731](#L731) | 'type' => 'select\_multi', |
| [732](#L732) | 'class' => 'waymark-align-top', |
| [733](#L733) | 'title' => esc\_html\_\_('Allow From', 'waymark'), |
| [734](#L734) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_roles'), |
| [735](#L735) | 'tip' => esc\_attr\_\_('Users with the selected roles will be able to make Submissions through the front-end', 'waymark'), |
| [736](#L736) | 'options' => $role\_options, |
| [737](#L737) | ], |
| [738](#L738) | 'submission\_features' => [ |
| [739](#L739) | 'name' => 'submission\_features', |
| [740](#L740) | 'id' => 'submission\_users\_features', |
| [741](#L741) | 'type' => 'select\_multi', |
| [742](#L742) | 'class' => 'waymark-align-top', |
| [743](#L743) | 'title' => esc\_html\_\_('Editor Features', 'waymark'), |
| [744](#L744) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_features'), |
| [745](#L745) | 'tip' => esc\_attr\_\_('What features to offer in the Editor. Important! Uploaded images are added to the Media Library, reading from file does not keep a copy of the file on the server. Whether an individual Meta input is displayed can be set in the Settings > Map > Meta.', 'waymark'), |
| [746](#L746) | 'options' => [ |
| [747](#L747) | 'draw' => esc\_attr\_\_('Drawing', 'waymark'), |
| [748](#L748) | 'photo' => esc\_attr\_\_('Image upload', 'waymark'), |
| [749](#L749) | 'file' => esc\_attr\_\_('Read from File', 'waymark'), |
| [750](#L750) | 'title' => esc\_attr\_\_('Title', 'waymark'), |
| [751](#L751) | 'meta' => esc\_attr\_\_('Meta', 'waymark'), |
| [752](#L752) | ], |
| [753](#L753) | ], |
| [754](#L754) | 'submission\_status' => [ |
| [755](#L755) | 'name' => 'submission\_status', |
| [756](#L756) | 'id' => 'submission\_users\_status', |
| [757](#L757) | 'type' => 'select', |
| [758](#L758) | 'title' => esc\_html\_\_('Default Status', 'waymark'), |
| [759](#L759) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_status'), |
| [760](#L760) | 'tip' => esc\_attr\_\_('This is the initial status of the submitted Map. Note! Publish means that the Map (including any images added) will be \*immediately\* visible on your site.', 'waymark'), |
| [761](#L761) | 'options' => [ |
| [762](#L762) | 'publish' => esc\_attr\_\_('Publish', 'waymark'), |
| [763](#L763) | 'draft' => esc\_attr\_\_('Draft', 'waymark'), |
| [764](#L764) | ], |
| [765](#L765) | ], |
| [766](#L766) | 'submission\_collection' => [ |
| [767](#L767) | 'name' => 'submission\_collection', |
| [768](#L768) | 'id' => 'submission\_users\_collection', |
| [769](#L769) | 'type' => 'select', |
| [770](#L770) | 'title' => esc\_html\_\_('Default Collection', 'waymark'), |
| [771](#L771) | 'tip' => esc\_attr\_\_('If specified, user submissions will be automatically added to this Collection.', 'waymark'), |
| [772](#L772) | 'options' => $collection\_array, |
| [773](#L773) | ], |
| [774](#L774) | //                                              'submission\_alert' => array( |
| [775](#L775) | //                                                      'name' => 'submission\_alert', |
| [776](#L776) | //                                                      'id' => 'submission\_users\_alert', |
| [777](#L777) | //                                                      'type' => 'boolean', |
| [778](#L778) | //                                                      'title' => esc\_html\_\_('Email Alert', 'waymark'), |
| [779](#L779) | //                                                      'default' => Waymark\_Config::get\_setting('submission', 'from\_users', 'submission\_alert'), |
| [780](#L780) | //                                                      'tip' => esc\_attr\_\_('Receive email alerts for new submissions.', 'waymark'), |
| [781](#L781) | //                                                      'class' => 'waymark-hidden' |
| [782](#L782) | //                                              ) |
| [783](#L783) | ], |
| [784](#L784) | ], |
| [785](#L785) |  |
| [786](#L786) | //Public |
| [787](#L787) | 'from\_public' => [ |
| [788](#L788) | 'title' => esc\_html\_\_('Public Submissions', 'waymark'), |
| [789](#L789) | 'description' => \_\_('This will allow Submissions from <b>any visitor</b>, without registration.<!--<br /><br /><b>Important!</b>-->', 'waymark'), |
| [790](#L790) | 'fields' => [ |
| [791](#L791) | 'submission\_public' => [ |
| [792](#L792) | 'name' => 'submission\_public', |
| [793](#L793) | 'id' => 'submission\_public', |
| [794](#L794) | 'type' => 'boolean', |
| [795](#L795) | 'title' => esc\_html\_\_('Public Submissions', 'waymark'), |
| [796](#L796) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_public'), |
| [797](#L797) | 'tip' => esc\_attr\_\_('Allow \*anyone\* to submit Maps to your site, without registration.', 'waymark'), |
| [798](#L798) | ], |
| [799](#L799) | 'submission\_features' => [ |
| [800](#L800) | 'name' => 'submission\_features', |
| [801](#L801) | 'id' => 'submission\_public\_features', |
| [802](#L802) | 'type' => 'select\_multi', |
| [803](#L803) | 'class' => 'waymark-align-top', |
| [804](#L804) | 'title' => esc\_html\_\_('Editor Features', 'waymark'), |
| [805](#L805) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_features'), |
| [806](#L806) | 'tip' => esc\_attr\_\_('What features to offer in the Editor. Important! Uploaded images are added to the Media Library (see Upload Location below), reading from file does not keep a copy of the file on the server. Whether an individual Meta input is displayed can be set in the Settings > Map > Meta.', 'waymark'), |
| [807](#L807) | 'options' => [ |
| [808](#L808) | 'draw' => esc\_attr\_\_('Drawing', 'waymark'), |
| [809](#L809) | 'photo' => esc\_attr\_\_('Image upload', 'waymark'), |
| [810](#L810) | 'file' => esc\_attr\_\_('Read from File', 'waymark'), |
| [811](#L811) | 'title' => esc\_attr\_\_('Title', 'waymark'), |
| [812](#L812) | 'meta' => esc\_attr\_\_('Meta', 'waymark'), |
| [813](#L813) | ], |
| [814](#L814) | ], |
| [815](#L815) | 'submission\_upload\_dir' => [ |
| [816](#L816) | 'name' => 'submission\_upload\_dir', |
| [817](#L817) | 'id' => 'submission\_upload\_dir', |
| [818](#L818) | 'type' => 'select', |
| [819](#L819) | 'title' => esc\_html\_\_('Upload Location', 'waymark'), |
| [820](#L820) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_upload\_dir'), |
| [821](#L821) | 'tip' => esc\_attr\_\_('Images upload by non-registered users can be stored seperately from other Media Library uploads, to aid with moderation. All uploaded images will be stored in a single directory (/waymark\_submission) found in the upload root.', 'waymark'), |
| [822](#L822) | 'class' => '', |
| [823](#L823) | 'options' => [ |
| [824](#L824) | 'waymark\_submission' => esc\_attr\_\_('Seperated (/waymark\_submission)', 'waymark'), |
| [825](#L825) | '' => sprintf(esc\_attr\_\_('Media Library Default (%s)', 'waymark'), $upload\_dir['subdir']), |
| [826](#L826) | ], |
| [827](#L827) | ], |
| [828](#L828) | 'submission\_status' => [ |
| [829](#L829) | 'name' => 'submission\_status', |
| [830](#L830) | 'id' => 'submission\_public\_status', |
| [831](#L831) | 'type' => 'select', |
| [832](#L832) | 'title' => esc\_html\_\_('Default Status', 'waymark'), |
| [833](#L833) | 'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_status'), |
| [834](#L834) | 'tip' => esc\_attr\_\_('This is the initial status of the submitted Map. Note! Publish means that the Map (including any images added) will be \*immediately\* visible on your site.', 'waymark'), |
| [835](#L835) | 'options' => [ |
| [836](#L836) | 'draft' => esc\_attr\_\_('Draft', 'waymark'), |
| [837](#L837) | 'publish' => esc\_attr\_\_('Publish (not recommended!)', 'waymark'), |
| [838](#L838) | ], |
| [839](#L839) | 'class' => '', |
| [840](#L840) | ], |
| [841](#L841) | 'submission\_collection' => [ |
| [842](#L842) | 'name' => 'submission\_collection', |
| [843](#L843) | 'id' => 'submission\_public\_collection', |
| [844](#L844) | 'type' => 'select', |
| [845](#L845) | 'title' => esc\_html\_\_('Default Collection', 'waymark'), |
| [846](#L846) | 'tip' => esc\_attr\_\_('If specified, user submissions will be automatically added to this Collection.', 'waymark'), |
| [847](#L847) | 'options' => $collection\_array, |
| [848](#L848) | ], |
| [849](#L849) | //                                              'submission\_alert' => array( |
| [850](#L850) | //                                                      'name' => 'submission\_alert', |
| [851](#L851) | //                                                      'id' => 'submission\_public\_alert', |
| [852](#L852) | //                                                      'type' => 'boolean', |
| [853](#L853) | //                                                      'title' => esc\_html\_\_('Email Alert', 'waymark'), |
| [854](#L854) | //                                                      'default' => Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_alert'), |
| [855](#L855) | //                                                      'tip' => esc\_attr\_\_('Receive email alerts for new submissions.', 'waymark'), |
| [856](#L856) | //                                                      'class' => 'waymark-hidden' |
| [857](#L857) | //                                              ), |
| [858](#L858) | ], |
| [859](#L859) | ], |
| [860](#L860) | ], |
| [861](#L861) | ]; |
| [862](#L862) |  |
| [863](#L863) | //Submissions not enabled |
| [864](#L864) | if (! Waymark\_Config::get\_setting('submission', 'global', 'submission\_enable')) { |
| [865](#L865) | //Hide related inputs |
| [866](#L866) | $this->tabs['meta']['sections']['inputs']['fields']['meta\_submission']['class'] = ' waymark-hidden'; |
| [867](#L867) |  |
| [868](#L868) | $this->tabs['markers']['sections']['marker\_types']['fields']['marker\_submission']['class'] = 'waymark-hidden'; |
| [869](#L869) | $this->tabs['lines']['sections']['line\_types']['fields']['line\_submission']['class'] = 'waymark-hidden'; |
| [870](#L870) | $this->tabs['shapes']['sections']['shape\_types']['fields']['shape\_submission']['class'] = 'waymark-hidden'; |
| [871](#L871) |  |
| [872](#L872) | $this->tabs['submission']['sections']['from\_users']['class'] = 'waymark-hidden'; |
| [873](#L873) | $this->tabs['submission']['sections']['from\_public']['class'] = 'waymark-hidden'; |
| [874](#L874) | //If No public submissions |
| [875](#L875) | } elseif (! Waymark\_Config::get\_setting('submission', 'from\_public', 'submission\_public')) { |
| [876](#L876) | //Hide settings |
| [877](#L877) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_features']['class'] = ' waymark-hidden'; |
| [878](#L878) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_status']['class'] = ' waymark-hidden'; |
| [879](#L879) | //                      $this->tabs['submission']['sections']['from\_public']['fields']['submission\_alert']['class'] .= ' waymark-hidden'; |
| [880](#L880) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_upload\_dir']['class'] = ' waymark-hidden'; |
| [881](#L881) | $this->tabs['submission']['sections']['from\_public']['fields']['submission\_collection']['class'] = ' waymark-hidden'; |
| [882](#L882) | } |
| [883](#L883) |  |
| [884](#L884) | /\*\* |
| [885](#L885) | \* =========================================== |
| [886](#L886) | \* ================== MISC =================== |
| [887](#L887) | \* =========================================== |
| [888](#L888) | \*/ |
| [889](#L889) |  |
| [890](#L890) | $this->tabs['misc'] = [ |
| [891](#L891) | 'name' => esc\_html\_\_('Misc.', 'waymark'), |
| [892](#L892) | 'description' => '', |
| [893](#L893) | 'sections' => [ |
| [894](#L894) | 'map\_options' => [ |
| [895](#L895) | 'title' => esc\_html\_\_('Map Options', 'waymark'), |
| [896](#L896) | 'description' => esc\_html\_\_('Use these options to change how Maps are displayed.', 'waymark'), |
| [897](#L897) | 'help' => [ |
| [898](#L898) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs-cat/examples')), |
| [899](#L899) | 'text' => esc\_attr\_\_('See Examples &raquo;', 'waymark'), |
| [900](#L900) | ], |
| [901](#L901) | 'fields' => [ |
| [902](#L902) | 'map\_default\_latlng' => [ |
| [903](#L903) | 'name' => 'map\_default\_latlng', |
| [904](#L904) | 'id' => 'map\_default\_latlng', |
| [905](#L905) | 'type' => 'text', |
| [906](#L906) | 'class' => '', |
| [907](#L907) | 'title' => esc\_html\_\_('Default Centre', 'waymark'), |
| [908](#L908) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_default\_latlng'), |
| [909](#L909) | 'tip' => esc\_attr\_\_('Waymark centres the Map automatically when displaying data. These coordinates (Latitude,Longitude) will be used when there is no data available.', 'waymark'), |
| [910](#L910) | 'input\_processing' => [ |
| [911](#L911) | 'preg\_replace("/[^0-9.,-]+/", "", $param\_value);', |
| [912](#L912) | ], |
| [913](#L913) | 'output\_processing' => [ |
| [914](#L914) | sprintf('(! empty($param\_value)) ? $param\_value : "%s";', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_default\_latlng')), |
| [915](#L915) | ], |
| [916](#L916) | ], |
| [917](#L917) | 'map\_height' => [ |
| [918](#L918) | 'name' => 'map\_height', |
| [919](#L919) | 'id' => 'map\_height', |
| [920](#L920) | 'type' => 'text', |
| [921](#L921) | 'class' => 'waymark-short-input waymark-align-top', |
| [922](#L922) | 'title' => esc\_html\_\_('Map Height', 'waymark'), |
| [923](#L923) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height'), |
| [924](#L924) | 'append' => '<br />' . sprintf(esc\_attr\_\_('Or set in Shortcode: %s', 'waymark'), '<code>[' . Waymark\_Config::get\_item('shortcode') . ' map\_height=&quot;' . Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height') . '&quot; map\_width=&quot;320&quot;]</code>'), |
| [925](#L925) | 'tip' => sprintf(esc\_attr\_\_('Specify the desired height of the Map (in pixels). Pro Tip! This will affect all Maps, but you can change the height (and width) of an individual Map through the Shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; map\_height=&quot;' . Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_height') . '&quot;]'), |
| [926](#L926) | 'input\_processing' => [ |
| [927](#L927) | 'preg\_replace("/[^0-9]/", "", $param\_value);', |
| [928](#L928) | ], |
| [929](#L929) | 'output\_processing' => [ |
| [930](#L930) | sprintf('(! empty($param\_value)) ? $param\_value : %d;', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_height')), |
| [931](#L931) | ], |
| [932](#L932) | ], |
| [933](#L933) | 'map\_default\_zoom' => [ |
| [934](#L934) | 'name' => 'map\_default\_zoom', |
| [935](#L935) | 'id' => 'map\_default\_zoom', |
| [936](#L936) | 'type' => 'text', |
| [937](#L937) | 'class' => 'waymark-short-input', |
| [938](#L938) | 'title' => esc\_html\_\_('Default Zoom', 'waymark'), |
| [939](#L939) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'map\_default\_zoom'), |
| [940](#L940) | 'tip' => esc\_attr\_\_('Waymark zooms the Map automatically when displaying data. This zoom level (0-18) will be used when there is no data available.', 'waymark'), |
| [941](#L941) | 'input\_processing' => [ |
| [942](#L942) | 'preg\_replace("/[^0-9]/", "", $param\_value);', |
| [943](#L943) | ], |
| [944](#L944) | 'output\_processing' => [ |
| [945](#L945) | sprintf('(! empty($param\_value)) ? $param\_value : "%d";', Waymark\_Config::get\_default('misc', 'map\_options', 'map\_default\_zoom')), |
| [946](#L946) | ], |
| [947](#L947) | ], |
| [948](#L948) | 'show\_gallery' => [ |
| [949](#L949) | 'name' => 'show\_gallery', |
| [950](#L950) | 'id' => 'show\_gallery', |
| [951](#L951) | 'type' => 'boolean', |
| [952](#L952) | 'title' => esc\_html\_\_('Image Gallery', 'waymark'), |
| [953](#L953) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_gallery'), |
| [954](#L954) | 'tip' => sprintf(esc\_attr\_\_('Whether to display an image gallery for Markers that have images associated with them. Pro Tip! This will affect all Maps, but you can choose to show/hide the gallery of an individual Map through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' show\_gallery=&quot;1&quot;]'), |
| [955](#L955) | 'options' => [ |
| [956](#L956) | '1' => esc\_html\_\_('Show', 'waymark'), |
| [957](#L957) | '0' => esc\_html\_\_('Hide', 'waymark'), |
| [958](#L958) | ], |
| [959](#L959) | ], |
| [960](#L960) | 'show\_filter' => [ |
| [961](#L961) | 'name' => 'show\_filter', |
| [962](#L962) | 'id' => 'show\_filter', |
| [963](#L963) | 'type' => 'boolean', |
| [964](#L964) | 'title' => esc\_html\_\_('Overlay Filter', 'waymark'), |
| [965](#L965) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_filter'), |
| [966](#L966) | 'tip' => sprintf(esc\_attr\_\_('Allow the user to filter which Markers, Lines and Shapes are currently visible on the Map. Pro Tip! This will affect all Maps, but you can choose to show/hide the filter for individual Maps through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' show\_filter=&quot;1&quot;]'), |
| [967](#L967) | 'options' => [ |
| [968](#L968) | '1' => esc\_html\_\_('Show', 'waymark'), |
| [969](#L969) | '0' => esc\_html\_\_('Hide', 'waymark'), |
| [970](#L970) | ], |
| [971](#L971) | ], |
| [972](#L972) | 'allow\_export' => [ |
| [973](#L973) | 'name' => 'allow\_export', |
| [974](#L974) | 'id' => 'allow\_export', |
| [975](#L975) | 'type' => 'boolean', |
| [976](#L976) | 'title' => esc\_html\_\_('Public Export', 'waymark'), |
| [977](#L977) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'allow\_export'), |
| [978](#L978) | 'tip' => sprintf(esc\_attr\_\_('Offer visitors the ability to Download all Collection/Map Overlays in the Shortcode Header and on the Map Details page. GeoJSON, GPX and KML formats supported.', 'waymark')), |
| [979](#L979) | ], |
| [980](#L980) | 'show\_scale' => [ |
| [981](#L981) | 'name' => 'show\_scale', |
| [982](#L982) | 'id' => 'show\_scale', |
| [983](#L983) | 'type' => 'boolean', |
| [984](#L984) | 'title' => esc\_html\_\_('Show Scale', 'waymark'), |
| [985](#L985) | 'default' => Waymark\_Config::get\_setting('misc', 'map\_options', 'show\_scale'), |
| [986](#L986) | 'tip' => sprintf(esc\_attr\_\_('Show a distance scale (km and miles) on the Map.', 'waymark')), |
| [987](#L987) | ], |
| [988](#L988) | ], |
| [989](#L989) | ], |
| [990](#L990) |  |
| [991](#L991) | //Interaction |
| [992](#L992) |  |
| [993](#L993) | //Sleep |
| [994](#L994) | 'interaction\_options' => [ |
| [995](#L995) | 'title' => esc\_html\_\_('Sleep Options', 'waymark'), |
| [996](#L996) | 'description' => sprintf(\_\_('Waymark Maps will zoom when the user scrolls. This can cause some unexpected/annoying behaviour when scrolling a page.<br /><br /><b>Sleeping</b> the Map initially and <b>Waking</b> upon user interaction (i.e. hovering/clicking/tapping) may create a better experience.', 'waymark'), Waymark\_Config::get\_default('misc', 'interaction\_options', 'delay\_seconds')), |
| [997](#L997) | 'fields' => [ |
| [998](#L998) | 'delay\_seconds' => [ |
| [999](#L999) | 'name' => 'delay\_seconds', |
| [1000](#L1000) | 'id' => 'delay\_seconds', |
| [1001](#L1001) | 'type' => 'text', |
| [1002](#L1002) | 'class' => 'waymark-short-input', |
| [1003](#L1003) | 'title' => esc\_html\_\_('Hover Wake Time', 'waymark'), |
| [1004](#L1004) | 'append' => esc\_html\_\_('Seconds', 'waymark'), |
| [1005](#L1005) | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'delay\_seconds'), |
| [1006](#L1006) | 'tip' => esc\_attr\_\_('How many seconds before scroll zoom is enabled. 0 seconds will mean no delay (disabling this feature). A large number of seconds like 3600 (an hour) will esentially \*disable hover to wake\*, meaning the user will need to \*click\* to wake.', 'waymark'), |
| [1007](#L1007) | 'input\_processing' => [ |
| [1008](#L1008) | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'interaction\_options', 'delay\_seconds') . ';', //Fallback |
| [1009](#L1009) | ], |
| [1010](#L1010) | ], |
| [1011](#L1011) | 'do\_message' => [ |
| [1012](#L1012) | 'name' => 'do\_message', |
| [1013](#L1013) | 'id' => 'do\_message', |
| [1014](#L1014) | 'type' => 'boolean', |
| [1015](#L1015) | 'title' => esc\_html\_\_('Display Message', 'waymark'), |
| [1016](#L1016) | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'do\_message'), |
| [1017](#L1017) | 'tip' => esc\_attr\_\_('This message will be displayed by the Map while scroll zoom is disabled.', 'waymark'), |
| [1018](#L1018) | ], |
| [1019](#L1019) | 'wake\_message' => [ |
| [1020](#L1020) | 'name' => 'wake\_message', |
| [1021](#L1021) | 'id' => 'wake\_message', |
| [1022](#L1022) | 'type' => 'text', |
| [1023](#L1023) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Display', 'waymark') . ' </span> ' . esc\_html\_\_('Message Text', 'waymark'), |
| [1024](#L1024) | 'default' => Waymark\_Config::get\_setting('misc', 'interaction\_options', 'wake\_message'), |
| [1025](#L1025) | ], |
| [1026](#L1026) | ], |
| [1027](#L1027) | ], |
| [1028](#L1028) |  |
| [1029](#L1029) | // Cluster |
| [1030](#L1030) |  |
| [1031](#L1031) | 'cluster\_options' => [ |
| [1032](#L1032) | 'title' => esc\_html\_\_('Cluster Options', 'waymark'), |
| [1033](#L1033) | 'description' => sprintf(\_\_('With Clustering enabled, Markers will be grouped together when they are close together. This can help to reduce clutter on the Map.', 'waymark'), Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_threshold')), |
| [1034](#L1034) | 'help' => [ |
| [1035](#L1035) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/marker-clustering')), |
| [1036](#L1036) | 'text' => esc\_attr\_\_('Clustering Docs &raquo;', 'waymark'), |
| [1037](#L1037) | ], |
| [1038](#L1038) | 'fields' => [ |
| [1039](#L1039) | 'show\_cluster' => [ |
| [1040](#L1040) | 'name' => 'show\_cluster', |
| [1041](#L1041) | 'id' => 'show\_cluster', |
| [1042](#L1042) | 'type' => 'boolean', |
| [1043](#L1043) | 'options' => [ |
| [1044](#L1044) | '1' => esc\_html\_\_('Enabled', 'waymark'), |
| [1045](#L1045) | '0' => esc\_html\_\_('Disabled', 'waymark'), |
| [1046](#L1046) | ], |
| [1047](#L1047) |  |
| [1048](#L1048) | 'title' => esc\_html\_\_('Marker Clustering', 'waymark'), |
| [1049](#L1049) | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'show\_cluster'), |
| [1050](#L1050) | 'tip' => esc\_attr\_\_('Whether to cluster (stack) Markers that are close together. Pro Tip! This will affect all Maps, but you can also enable/disable clustering through the Shortcode: [Waymark show\_cluster="0"]', 'waymark'), |
| [1051](#L1051) | ], |
| [1052](#L1052) | 'cluster\_threshold' => [ |
| [1053](#L1053) | 'name' => 'cluster\_threshold', |
| [1054](#L1054) | 'id' => 'cluster\_threshold', |
| [1055](#L1055) | 'type' => 'text', |
| [1056](#L1056) | 'class' => 'waymark-short-input', |
| [1057](#L1057) | 'title' => esc\_html\_\_('Cluster Threshold', 'waymark'), |
| [1058](#L1058) | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'cluster\_threshold'), |
| [1059](#L1059) | 'tip' => esc\_attr\_\_('Markers will not be clustered above this zoom level.', 'waymark'), |
| [1060](#L1060) | 'input\_processing' => [ |
| [1061](#L1061) | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_threshold') . ';', //Fallback |
| [1062](#L1062) | ], |
| [1063](#L1063) | ], |
| [1064](#L1064) | 'cluster\_radius' => [ |
| [1065](#L1065) | 'name' => 'cluster\_radius', |
| [1066](#L1066) | 'id' => 'cluster\_radius', |
| [1067](#L1067) | 'type' => 'text', |
| [1068](#L1068) | 'class' => 'waymark-short-input', |
| [1069](#L1069) | 'title' => '<span class="waymark-invisible">' . esc\_html\_\_('Cluster', 'waymark') . ' </span> ' . esc\_html\_\_('Radius', 'waymark'), |
| [1070](#L1070) | 'default' => Waymark\_Config::get\_setting('misc', 'cluster\_options', 'cluster\_radius'), |
| [1071](#L1071) | 'tip' => esc\_attr\_\_('The maximum radius that a cluster will cover from the central marker (in pixels). Decreasing will make more, smaller clusters.     Default 80.', 'waymark'), |
| [1072](#L1072) |  |
| [1073](#L1073) | 'input\_processing' => [ |
| [1074](#L1074) | '(is\_numeric($param\_value)) ? $param\_value : ' . Waymark\_Config::get\_default('misc', 'cluster\_options', 'cluster\_radius') . ';', //Fallback |
| [1075](#L1075) | ], |
| [1076](#L1076) | ], |
| [1077](#L1077) | ], |
| [1078](#L1078) | ], |
| [1079](#L1079) |  |
| [1080](#L1080) | //Shortcode |
| [1081](#L1081) |  |
| [1082](#L1082) | 'shortcode\_options' => [ |
| [1083](#L1083) | 'title' => esc\_html\_\_('Shortcode Options', 'waymark'), |
| [1084](#L1084) | 'description' => esc\_html\_\_('How Maps are embedded into your content using the shortcode.', 'waymark'), |
| [1085](#L1085) | 'help' => [ |
| [1086](#L1086) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/shortcodes')), |
| [1087](#L1087) | 'text' => esc\_attr\_\_('Shortcode Docs &raquo;', 'waymark'), |
| [1088](#L1088) | ], |
| [1089](#L1089) | 'fields' => [ |
| [1090](#L1090) | 'shortcode\_header' => [ |
| [1091](#L1091) | 'name' => 'shortcode\_header', |
| [1092](#L1092) | 'id' => 'shortcode\_header', |
| [1093](#L1093) | 'type' => 'select', |
| [1094](#L1094) | 'title' => esc\_html\_\_('Shortcode Header', 'waymark'), |
| [1095](#L1095) | 'default' => Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'shortcode\_header'), |
| [1096](#L1096) | 'tip' => sprintf(esc\_attr\_\_('The shortcode header displays the title and link to the Map or Collection. Pro Tip! This will affect all shortcodes, but you can override the setting through the shortcode: %s (the value must be either 0 or 1).', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; shortcode\_header=&quot;' . Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'shortcode\_header') . '&quot;]'), |
| [1097](#L1097) | 'options' => [ |
| [1098](#L1098) | '1' => esc\_html\_\_('Show', 'waymark'), |
| [1099](#L1099) | '0' => esc\_html\_\_('Hide', 'waymark'), |
| [1100](#L1100) | ], |
| [1101](#L1101) | ], |
| [1102](#L1102) | 'header\_override' => [ |
| [1103](#L1103) | 'name' => 'header\_override', |
| [1104](#L1104) | 'id' => 'header\_override', |
| [1105](#L1105) | 'type' => 'select', |
| [1106](#L1106) | 'title' => esc\_html\_\_('Header for Admin', 'waymark'), |
| [1107](#L1107) | 'default' => Waymark\_Config::get\_setting('misc', 'shortcode\_options', 'header\_override'), |
| [1108](#L1108) | 'tip' => esc\_attr\_\_('Use this Setting to always show the Shortcode Header when signed in as admin, useful for quickly navigating to embeded Maps.', 'waymark'), |
| [1109](#L1109) | 'options' => [ |
| [1110](#L1110) | '0' => esc\_html\_\_('Use Setting', 'waymark'), |
| [1111](#L1111) | '1' => esc\_html\_\_('Always Show', 'waymark'), |
| [1112](#L1112) | ], |
| [1113](#L1113) | ], |
| [1114](#L1114) | ], |
| [1115](#L1115) | ], |
| [1116](#L1116) |  |
| [1117](#L1117) | //Elevation |
| [1118](#L1118) |  |
| [1119](#L1119) | 'elevation\_options' => [ |
| [1120](#L1120) | 'title' => esc\_html\_\_('Elevation Options', 'waymark'), |
| [1121](#L1121) | 'description' => esc\_html\_\_('Lines with elevation data.', 'waymark'), |
| [1122](#L1122) | 'help' => [ |
| [1123](#L1123) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/elevation-profile-colours')), |
| [1124](#L1124) | 'text' => esc\_attr\_\_('Elevation Styling &raquo;', 'waymark'), |
| [1125](#L1125) | ], |
| [1126](#L1126) | 'fields' => [ |
| [1127](#L1127) | 'show\_elevation' => [ |
| [1128](#L1128) | 'name' => 'show\_elevation', |
| [1129](#L1129) | 'id' => 'show\_elevation', |
| [1130](#L1130) | 'type' => 'select', |
| [1131](#L1131) | 'title' => esc\_html\_\_('Elevation Profile', 'waymark'), |
| [1132](#L1132) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'show\_elevation'), |
| [1133](#L1133) | 'tip' => sprintf(esc\_attr\_\_('Display an interactive elevation profile graph below the Map for Lines that have elevation data. Pro Tip! You can choose to show/hide the elevation graph of an individual Map through the shortcode: %s', 'waymark'), '[' . Waymark\_Config::get\_item('shortcode') . ' map\_id=&quot;1234&quot; show\_elevation=&quot;1&quot;]'), |
| [1134](#L1134) | 'options' => [ |
| [1135](#L1135) | '2' => esc\_html\_\_('Show on Map Details', 'waymark'), |
| [1136](#L1136) | '1' => esc\_html\_\_('Show everywhere', 'waymark'), |
| [1137](#L1137) | '0' => esc\_html\_\_('Hide everywhere', 'waymark'), |
| [1138](#L1138) | ], |
| [1139](#L1139) | ], |
| [1140](#L1140) | 'elevation\_units' => [ |
| [1141](#L1141) | 'name' => 'elevation\_units', |
| [1142](#L1142) | 'id' => 'elevation\_units', |
| [1143](#L1143) | 'type' => 'select', |
| [1144](#L1144) | 'title' => esc\_html\_\_('Elevation Units', 'waymark'), |
| [1145](#L1145) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_units'), |
| [1146](#L1146) | 'tip' => sprintf(esc\_attr\_\_('Display elevation data in metric (m/km) or imperial (ft/mi) units.', 'waymark')), |
| [1147](#L1147) | 'options' => [ |
| [1148](#L1148) | 'metric' => esc\_html\_\_('Metric (m/km)', 'waymark'), |
| [1149](#L1149) | 'imperial' => esc\_html\_\_('Imperial (ft/mi)', 'waymark'), |
| [1150](#L1150) | ], |
| [1151](#L1151) | ], |
| [1152](#L1152) | 'elevation\_colour' => [ |
| [1153](#L1153) | 'name' => 'elevation\_colour', |
| [1154](#L1154) | 'id' => 'elevation\_colour', |
| [1155](#L1155) | 'type' => 'text', |
| [1156](#L1156) | 'class' => 'waymark-short-input waymark-colour-picker', |
| [1157](#L1157) | 'title' => esc\_html\_\_('Elevation Colour', 'waymark'), |
| [1158](#L1158) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_colour'), |
| [1159](#L1159) | 'tip' => sprintf(esc\_attr\_\_('The colour of the elevation graph and associated Line.', 'waymark')), |
| [1160](#L1160) | 'input\_processing' => [ |
| [1161](#L1161) | '(! empty($param\_value)) ? $param\_value : "#b42714";', //Fallback |
| [1162](#L1162) | ], |
| [1163](#L1163) | ], |
| [1164](#L1164) | 'elevation\_initial' => [ |
| [1165](#L1165) | 'name' => 'elevation\_initial', |
| [1166](#L1166) | 'id' => 'elevation\_initial', |
| [1167](#L1167) | 'type' => 'boolean', |
| [1168](#L1168) | 'title' => esc\_html\_\_('Show Initially?', 'waymark'), |
| [1169](#L1169) | 'default' => Waymark\_Config::get\_setting('misc', 'elevation\_options', 'elevation\_initial'), |
| [1170](#L1170) | 'tip' => sprintf(esc\_attr\_\_('Whether to show the elevation profile when the Map loads. If set to No, the user must click on a Line in order to display the elevation data. If there are multiple Lines with elevation data, the one added to the editor first will be the one shown initially.', 'waymark')), |
| [1171](#L1171) | ], |
| [1172](#L1172) | ], |
| [1173](#L1173) | ], |
| [1174](#L1174) |  |
| [1175](#L1175) | /\*\* |
| [1176](#L1176) | \* =========================================== |
| [1177](#L1177) | \* ================= ADVANCED ================ |
| [1178](#L1178) | \* =========================================== |
| [1179](#L1179) | \*/ |
| [1180](#L1180) |  |
| [1181](#L1181) | //Collections |
| [1182](#L1182) |  |
| [1183](#L1183) | 'collection\_options' => [ |
| [1184](#L1184) | 'title' => esc\_html\_\_('Collection Options', 'waymark'), |
| [1185](#L1185) | 'description' => esc\_html\_\_('How Collections are displayed.', 'waymark'), |
| [1186](#L1186) | 'help' => [ |
| [1187](#L1187) | 'url' => esc\_attr(Waymark\_Helper::site\_url('docs/collections')), |
| [1188](#L1188) | 'text' => esc\_attr\_\_('Collection Docs &raquo;', 'waymark'), |
| [1189](#L1189) | ], |
| [1190](#L1190) | 'fields' => [ |
| [1191](#L1191) | 'load\_method' => [ |
| [1192](#L1192) | 'name' => 'load\_method', |
| [1193](#L1193) | 'id' => 'load\_method', |
| [1194](#L1194) | 'type' => 'select', |
| [1195](#L1195) | 'options' => [ |
| [1196](#L1196) | 'fetch' => esc\_html\_\_('Background', 'waymark'), |
| [1197](#L1197) | 'embed' => esc\_html\_\_('Embed', 'waymark'), |
| [1198](#L1198) | ], |
| [1199](#L1199) | 'class' => 'waymark-short-input', |
| [1200](#L1200) | 'title' => esc\_html\_\_('Shortcode Method', 'waymark'), |
| [1201](#L1201) | 'default' => Waymark\_Config::get\_setting('misc', 'collection\_options', 'load\_method'), |
| [1202](#L1202) | 'tip' => esc\_attr\_\_('Whether to load multiple Maps in the Background (uses AJAX to improve page load) when embedding with the Shortcode, or to Embed them within the page. Embedding may be a bad idea for LARGE COLLECTIONS, but can resolve some issues where Collections are not displaying correctly.', 'waymark'), |
| [1203](#L1203) | ], |
| [1204](#L1204) | ], |
| [1205](#L1205) | ], |
| [1206](#L1206) |  |
| [1207](#L1207) | //Editor |
| [1208](#L1208) |  |
| [1209](#L1209) | 'editor\_options' => [ |
| [1210](#L1210) | 'title' => esc\_html\_\_('Editor Options', 'waymark'), |
| [1211](#L1211) | 'description' => esc\_html\_\_('Customising the Map Editor.', 'waymark'), |
| [1212](#L1212) | 'fields' => [ |
| [1213](#L1213) | 'confirm\_delete' => [ |
| [1214](#L1214) | 'name' => 'confirm\_delete', |
| [1215](#L1215) | 'id' => 'confirm\_delete', |
| [1216](#L1216) | 'type' => 'boolean', |
| [1217](#L1217) | 'title' => esc\_html\_\_('Confirm Delete?', 'waymark'), |
| [1218](#L1218) | 'default' => Waymark\_Config::get\_setting('misc', 'editor\_options', 'confirm\_delete'), |
| [1219](#L1219) | 'tip' => esc\_attr\_\_('Whether to show a confirmation dialog before deleting Markers/Lines/Shapes from the Map. Pro Tip! Even if you accidentally delete something, changes are not saved until the "Update" button is clicked.', 'waymark'), |
| [1220](#L1220) | ], |
| [1221](#L1221) | 'editor\_basemap' => [ |
| [1222](#L1222) | 'name' => 'editor\_basemap', |
| [1223](#L1223) | 'id' => 'editor\_basemap', |
| [1224](#L1224) | 'type' => 'select', |
| [1225](#L1225) | 'title' => esc\_html\_\_('Default Basemap', 'waymark'), |
| [1226](#L1226) | 'default' => Waymark\_Config::get\_setting('misc', 'editor\_options', 'editor\_basemap'), |
| [1227](#L1227) | 'tip' => esc\_attr\_\_('Which Basemap to use as the editor default.', 'waymark'), |
| [1228](#L1228) | 'options' => $basemap\_options, |
| [1229](#L1229) | ], |
| [1230](#L1230) | ], |
| [1231](#L1231) | ], |
| [1232](#L1232) |  |
| [1233](#L1233) | //Permalinks |
| [1234](#L1234) |  |
| [1235](#L1235) | 'permalinks' => [ |
| [1236](#L1236) | 'title' => esc\_html\_\_('Permalinks', 'waymark'), |
| [1237](#L1237) | 'description' => 'Customise your Map and Collection URLs.', |
| [1238](#L1238) | 'footer' => '<small>For the changes to take affect you must rebuild your Permalinks by going to WP Settings > Permalinks and clicking "Save Changes".</small>', |
| [1239](#L1239) | 'fields' => [ |
| [1240](#L1240) | 'permalink\_slug\_map' => [ |
| [1241](#L1241) | 'name' => 'permalink\_slug\_map', |
| [1242](#L1242) | 'id' => 'permalink\_slug\_map', |
| [1243](#L1243) | 'type' => 'text', |
| [1244](#L1244) | 'class' => 'waymark-short-input', |
| [1245](#L1245) | 'title' => esc\_html\_\_('Map Slug', 'waymark'), |
| [1246](#L1246) | 'default' => Waymark\_Config::get\_setting('misc', 'permalinks', 'permalink\_slug\_map'), |
| [1247](#L1247) | 'tip' => esc\_attr\_\_('The URL slug that will be used for links to your Maps, i.e. example.com/[map-slug]/example-map/. Only alpha-numeric characters and hyphens (-) are allowed.', 'waymark'), |
| [1248](#L1248) | 'input\_processing' => [ |
| [1249](#L1249) | 'preg\_replace("/[^0-9a-z-]+/", "", $param\_value);', |
| [1250](#L1250) | ], |
| [1251](#L1251) | 'prepend' => '<small>/</small>', |
| [1252](#L1252) | 'append' => '<small>/map-name/</small>', |
| [1253](#L1253) | ], |
| [1254](#L1254) | 'permalink\_slug\_collection' => [ |
| [1255](#L1255) | 'name' => 'permalink\_slug\_collection', |
| [1256](#L1256) | 'id' => 'permalink\_slug\_collection', |
| [1257](#L1257) | 'type' => 'text', |
| [1258](#L1258) | 'class' => 'waymark-short-input', |
| [1259](#L1259) | 'title' => esc\_html\_\_('Collection Slug', 'waymark'), |
| [1260](#L1260) | 'default' => Waymark\_Config::get\_setting('misc', 'permalinks', 'permalink\_slug\_collection'), |
| [1261](#L1261) | 'tip' => esc\_attr\_\_('The URL slug that will be used for links to your Collections, i.e. example.com/[collection-slug]/example-collection/. Only alpha-numeric characters and hyphens (-) are allowed.', 'waymark'), |
| [1262](#L1262) | 'input\_processing' => [ |
| [1263](#L1263) | 'preg\_replace("/[^0-9a-z-]+/", "", $param\_value);', |
| [1264](#L1264) | ], |
| [1265](#L1265) | 'prepend' => '<small>/</small>', |
| [1266](#L1266) | 'append' => '<small>/collection-name/</small>', |
| [1267](#L1267) | ], |
| [1268](#L1268) | ], |
| [1269](#L1269) | ], |
| [1270](#L1270) |  |
| [1271](#L1271) | // Custom Post Type Supports |
| [1272](#L1272) |  |
| [1273](#L1273) | 'post' => [ |
| [1274](#L1274) | 'title' => esc\_html\_\_('Post Type', 'waymark'), |
| [1275](#L1275) | 'description' => 'Enable Custom Post Type features.', |
| [1276](#L1276) | 'fields' => [ |
| [1277](#L1277) | 'supports' => [ |
| [1278](#L1278) | 'name' => 'supports', |
| [1279](#L1279) | 'id' => 'supports', |
| [1280](#L1280) | 'type' => 'select\_multi', |
| [1281](#L1281) | 'title' => esc\_html\_\_('Supports', 'waymark'), |
| [1282](#L1282) | 'default' => Waymark\_Config::get\_setting('misc', 'post', 'supports'), |
| [1283](#L1283) | 'tip' => esc\_attr\_\_('Enable or disable various WordPress features of the Map Custom Post Type.', 'waymark'), |
| [1284](#L1284) | 'tip\_link' => 'https://developer.wordpress.org/reference/functions/add\_post\_type\_support/', |
| [1285](#L1285) | 'options' => [ |
| [1286](#L1286) | 'title' => esc\_html\_\_('Title', 'waymark'), |
| [1287](#L1287) | 'author' => esc\_html\_\_('Author', 'waymark'), |
| [1288](#L1288) | 'revisions' => esc\_html\_\_('Revisions', 'waymark'), |
| [1289](#L1289) | 'thumbnail' => esc\_html\_\_('Thumbnail', 'waymark'), |
| [1290](#L1290) | 'comments' => esc\_html\_\_('Comments', 'waymark'), |
| [1291](#L1291) | 'excerpt' => esc\_html\_\_('Excerpt', 'waymark'), |
| [1292](#L1292) | ], |
| [1293](#L1293) | ], |
| [1294](#L1294) | ], |
| [1295](#L1295) | ], |
| [1296](#L1296) |  |
| [1297](#L1297) | //Debug |
| [1298](#L1298) |  |
| [1299](#L1299) | 'advanced' => [ |
| [1300](#L1300) | 'title' => esc\_html\_\_('Debug', 'waymark'), |
| [1301](#L1301) | 'description' => '', |
| [1302](#L1302) | 'fields' => [ |
| [1303](#L1303) | 'debug\_mode' => [ |
| [1304](#L1304) | 'name' => 'debug\_mode', |
| [1305](#L1305) | 'id' => 'debug\_mode', |
| [1306](#L1306) | 'type' => 'boolean', |
| [1307](#L1307) | 'title' => esc\_html\_\_('Debug Mode', 'waymark'), |
| [1308](#L1308) | 'default' => Waymark\_Config::get\_setting('misc', 'advanced', 'debug\_mode'), |
| [1309](#L1309) | 'tip' => esc\_attr\_\_('With debug mode enabled, the plugin will output Map and Settings data in Admin Dashboard. This may come in handy if you need to report a bug. Pro Tip! Check the browser console for Waymark output when signed in as an administrator.', 'waymark'), |
| [1310](#L1310) | 'tip\_link' => 'https://www.waymark.dev/docs/debug-mode/', |
| [1311](#L1311) | 'options' => [ |
| [1312](#L1312) | '0' => esc\_html\_\_('Disable', 'waymark'), |
| [1313](#L1313) | '1' => esc\_html\_\_('Enable', 'waymark'), |
| [1314](#L1314) | ], |
| [1315](#L1315) | ], |
| [1316](#L1316) | ], |
| [1317](#L1317) | ], |
| [1318](#L1318) | ], |
| [1319](#L1319) | ]; |
| [1320](#L1320) |  |
| [1321](#L1321) | //Debug? |
| [1322](#L1322) | if (Waymark\_Helper::is\_debug()) { |
| [1323](#L1323) | $this->tabs['misc']['sections']['advanced']['fields']['settings\_output'] = [ |
| [1324](#L1324) | 'name' => 'settings\_output', |
| [1325](#L1325) | 'id' => 'settings\_output', |
| [1326](#L1326) | 'type' => 'textarea', |
| [1327](#L1327) | 'class' => 'waymark-align-top', |
| [1328](#L1328) | 'title' => esc\_html\_\_('Settings Data', 'waymark'), |
| [1329](#L1329) | 'default' => serialize(get\_option('Waymark\_Settings')), |
| [1330](#L1330) | //Don't save to DB |
| [1331](#L1331) | 'input\_processing' => [ |
| [1332](#L1332) | 'null', |
| [1333](#L1333) | ], |
| [1334](#L1334) | //Don't allow editing |
| [1335](#L1335) | 'output\_processing' => [ |
| [1336](#L1336) | 'serialize(get\_option("Waymark\_Settings"))', |
| [1337](#L1337) | ], |
| [1338](#L1338) | ]; |
| [1339](#L1339) | } |
| [1340](#L1340) |  |
| [1341](#L1341) | add\_action('admin\_notices', [$this, 'admin\_notices']); |
| [1342](#L1342) | add\_action('admin\_init', [$this, 'register\_settings']); |
| [1343](#L1343) | } |
| [1344](#L1344) |  |
| [1345](#L1345) | function get\_settings() { |
| [1346](#L1346) | return $this->current\_settings; |
| [1347](#L1347) | } |
| [1348](#L1348) |  |
| [1349](#L1349) | function register\_settings() { |
| [1350](#L1350) | register\_setting($this->page\_slug, 'Waymark\_Settings', [$this, 'sanitize\_callback']); |
| [1351](#L1351) |  |
| [1352](#L1352) | //For each tab |
| [1353](#L1353) | foreach ($this->tabs as $tab\_key => $tab\_data) { |
| [1354](#L1354) | //For each section |
| [1355](#L1355) | foreach ($tab\_data['sections'] as $section\_key => $section\_data) { |
| [1356](#L1356) | //Set if blank if unset |
| [1357](#L1357) | $section\_data['title'] = (isset($section\_data['title'])) ? $section\_data['title'] : ''; |
| [1358](#L1358) |  |
| [1359](#L1359) | //Create section |
| [1360](#L1360) | add\_settings\_section($section\_key, $section\_data['title'], [$this, 'section\_text'], $this->page\_slug); |
| [1361](#L1361) |  |
| [1362](#L1362) | //For each field in section |
| [1363](#L1363) | if (is\_array($section\_data['fields']) && sizeof($section\_data['fields'])) { |
| [1364](#L1364) | foreach ($section\_data['fields'] as $field) { |
| [1365](#L1365) | //Get set\_value |
| [1366](#L1366) | if (array\_key\_exists($tab\_key, $this->current\_settings) && array\_key\_exists($section\_key, $this->current\_settings[$tab\_key])) { |
| [1367](#L1367) | if (array\_key\_exists($field['name'], $this->current\_settings[$tab\_key][$section\_key])) { |
| [1368](#L1368) | $field['set\_value'] = $this->current\_settings[$tab\_key][$section\_key][$field['name']]; |
| [1369](#L1369) | } |
| [1370](#L1370) | } |
| [1371](#L1371) |  |
| [1372](#L1372) | //Modify name for multi-dimensional array |
| [1373](#L1373) | $field['name'] = 'Waymark\_Settings[' . $tab\_key . '][' . $section\_key . '][' . $field['name'] . ']'; |
| [1374](#L1374) |  |
| [1375](#L1375) | //Repeatable section |
| [1376](#L1376) | if (isset($section\_data['repeatable']) && $section\_data['repeatable']) { |
| [1377](#L1377) | //Get count |
| [1378](#L1378) | $repeatable\_count = Waymark\_Helper::get\_section\_repeatable\_count($section\_data); |
| [1379](#L1379) |  |
| [1380](#L1380) | //Must be an array |
| [1381](#L1381) | if (! is\_array($field['default'])) { |
| [1382](#L1382) | //Make array |
| [1383](#L1383) | $field['default'] = Waymark\_Helper::convert\_single\_value\_to\_array($field['default']); |
| [1384](#L1384) | } |
| [1385](#L1385) |  |
| [1386](#L1386) | //Array size must match |
| [1387](#L1387) | if (sizeof($field['default']) < $repeatable\_count) { |
| [1388](#L1388) | //Pad |
| [1389](#L1389) | $field['default'] = array\_pad($field['default'], $repeatable\_count, $field['default'][0]); |
| [1390](#L1390) | } |
| [1391](#L1391) | } |
| [1392](#L1392) |  |
| [1393](#L1393) | add\_settings\_field($field['name'], $field['title'], [$this, 'create\_input'], $this->page\_slug, $section\_key, $field); |
| [1394](#L1394) | } |
| [1395](#L1395) | } |
| [1396](#L1396) | } |
| [1397](#L1397) | } |
| [1398](#L1398) | } |
| [1399](#L1399) |  |
| [1400](#L1400) | function create\_input($field) { |
| [1401](#L1401) | //Set value |
| [1402](#L1402) | if (array\_key\_exists('set\_value', $field)) { |
| [1403](#L1403) | $set\_value = $field['set\_value']; |
| [1404](#L1404) | } else { |
| [1405](#L1405) | $set\_value = null; |
| [1406](#L1406) | } |
| [1407](#L1407) |  |
| [1408](#L1408) | echo Waymark\_Input::create\_field($field, $set\_value, false); |
| [1409](#L1409) | } |
| [1410](#L1410) |  |
| [1411](#L1411) | function section\_text($args) { |
| [1412](#L1412) | //Unused |
| [1413](#L1413) | } |
| [1414](#L1414) |  |
| [1415](#L1415) | function sanitize\_callback($input\_data) { |
| [1416](#L1416) | //For each tab |
| [1417](#L1417) | foreach ($this->tabs as $tab\_key => $tab\_data) { |
| [1418](#L1418) | //If we have sections |
| [1419](#L1419) | if (array\_key\_exists('sections', $tab\_data)) { |
| [1420](#L1420) | //Iterate over each section |
| [1421](#L1421) | foreach ($tab\_data['sections'] as $section\_key => $section\_data) { |
| [1422](#L1422) | //If section has fields |
| [1423](#L1423) | if (array\_key\_exists('fields', $section\_data)) { |
| [1424](#L1424) | //For each field |
| [1425](#L1425) | foreach ($section\_data['fields'] as $field\_key => $field\_definition) { |
| [1426](#L1426) | //If this field was submitted |
| [1427](#L1427) | if (isset($input\_data[$tab\_key][$section\_key][$field\_definition['name']])) { |
| [1428](#L1428) | $value = $input\_data[$tab\_key][$section\_key][$field\_definition['name']]; |
| [1429](#L1429) |  |
| [1430](#L1430) | //If no input processing specified |
| [1431](#L1431) | if (! array\_key\_exists('input\_processing', $field\_definition)) { |
| [1432](#L1432) | //Make safe by default |
| [1433](#L1433) | $field\_definition['input\_processing'][] = 'htmlspecialchars($param\_value)'; |
| [1434](#L1434) | } |
| [1435](#L1435) |  |
| [1436](#L1436) | //Process the input |
| [1437](#L1437) | $input\_data[$tab\_key][$section\_key][$field\_definition['name']] = Waymark\_Input::process\_input($field\_definition, $value); |
| [1438](#L1438) | } |
| [1439](#L1439) | } |
| [1440](#L1440) | } |
| [1441](#L1441) | } |
| [1442](#L1442) | } |
| [1443](#L1443) | } |
| [1444](#L1444) |  |
| [1445](#L1445) | return $input\_data; |
| [1446](#L1446) | } |
| [1447](#L1447) |  |
| [1448](#L1448) | function content\_admin\_page() { |
| [1449](#L1449) | echo '<div id="waymark-admin-container">' . "\n"; |
| [1450](#L1450) |  |
| [1451](#L1451) | echo Waymark\_Helper::plugin\_about(); |
| [1452](#L1452) |  |
| [1453](#L1453) | echo '  <div class="card">' . "\n"; |
| [1454](#L1454) |  |
| [1455](#L1455) | //Tabs |
| [1456](#L1456) | $active\_content = (isset($\_GET['content'])) ? esc\_html($\_GET['content']) : $this->default\_content; |
| [1457](#L1457) | $this->settings\_nav($active\_content); |
| [1458](#L1458) |  |
| [1459](#L1459) | //Open form |
| [1460](#L1460) | echo '          <form action="' . admin\_url('options.php') . '" method="post">' . "\n"; |
| [1461](#L1461) | settings\_fields($this->page\_slug); |
| [1462](#L1462) |  |
| [1463](#L1463) | //For each tab |
| [1464](#L1464) | foreach ($this->tabs as $tab\_key => $tab\_data) { |
| [1465](#L1465) | $style = ''; |
| [1466](#L1466) | echo '  <div class="waymark-settings-tab waymark-settings-tab-' . $tab\_key . '"' . $style . '>' . "\n"; |
| [1467](#L1467) |  |
| [1468](#L1468) | //Tab description? |
| [1469](#L1469) | if (array\_key\_exists('description', $tab\_data)) { |
| [1470](#L1470) | echo '  <div class="waymark-settings-tab-description">' . $tab\_data['description'] . '</div>' . "\n"; |
| [1471](#L1471) | } |
| [1472](#L1472) |  |
| [1473](#L1473) | //For each section |
| [1474](#L1474) | foreach ($tab\_data['sections'] as $section\_key => $section\_data) { |
| [1475](#L1475) | $class = (isset($section\_data['class'])) ? ' ' . $section\_data['class'] : ''; |
| [1476](#L1476) | echo '          <div class="waymark-settings-section waymark-settings-section-' . $section\_key . $class . '">' . "\n"; |
| [1477](#L1477) |  |
| [1478](#L1478) | //Help |
| [1479](#L1479) | if (array\_key\_exists('help', $section\_data) && isset($section\_data['help']['url'])) { |
| [1480](#L1480) | $help\_text = (isset($section\_data['help']['text'])) ? $section\_data['help']['text'] : 'View Help &raquo;'; |
| [1481](#L1481) |  |
| [1482](#L1482) | echo '          <a class="waymark-docs-link button" href="' . $section\_data['help']['url'] . '" target="\_blank">' . $help\_text . '</a>' . "\n"; |
| [1483](#L1483) | } |
| [1484](#L1484) |  |
| [1485](#L1485) | //Title |
| [1486](#L1486) | if (isset($section\_data['title'])) { |
| [1487](#L1487) | echo '          <h2>' . $section\_data['title'] . '</h2>' . "\n"; |
| [1488](#L1488) | } |
| [1489](#L1489) |  |
| [1490](#L1490) | //Description |
| [1491](#L1491) | if (array\_key\_exists('description', $section\_data)) { |
| [1492](#L1492) | echo '          <div class="waymark-settings-section-description">' . $section\_data['description'] . '</div>' . "\n"; |
| [1493](#L1493) | } |
| [1494](#L1494) |  |
| [1495](#L1495) | //Repeatable? |
| [1496](#L1496) | if (array\_key\_exists('repeatable', $section\_data) && $section\_data['repeatable']) { |
| [1497](#L1497) | echo '<div class="waymark-repeatable" data-count="0">' . "\n"; |
| [1498](#L1498) | } |
| [1499](#L1499) |  |
| [1500](#L1500) | echo '          <table class="form-table">' . "\n"; |
| [1501](#L1501) | do\_settings\_fields($this->page\_slug, $section\_key); |
| [1502](#L1502) | echo '          </table>' . "\n"; |
| [1503](#L1503) |  |
| [1504](#L1504) | //Repeatable? |
| [1505](#L1505) | if (array\_key\_exists('repeatable', $section\_data) && $section\_data['repeatable']) { |
| [1506](#L1506) | echo '</div>' . "\n"; |
| [1507](#L1507) | } |
| [1508](#L1508) |  |
| [1509](#L1509) | //Footer |
| [1510](#L1510) | if (array\_key\_exists('footer', $section\_data)) { |
| [1511](#L1511) | echo '  <div class="waymark-settings-section-footer">' . $section\_data['footer'] . '</div>' . "\n"; |
| [1512](#L1512) | } |
| [1513](#L1513) |  |
| [1514](#L1514) | echo '</div>' . "\n"; |
| [1515](#L1515) | } |
| [1516](#L1516) |  |
| [1517](#L1517) | echo '  </div>' . "\n"; |
| [1518](#L1518) | } |
| [1519](#L1519) |  |
| [1520](#L1520) | submit\_button(null, 'primary large'); |
| [1521](#L1521) | echo '          </form>' . "\n"; |
| [1522](#L1522) |  |
| [1523](#L1523) | echo '  </div>' . "\n"; |
| [1524](#L1524) | echo '</div>' . "\n"; |
| [1525](#L1525) | } |
| [1526](#L1526) |  |
| [1527](#L1527) | function settings\_nav($current = 'tiles') { |
| [1528](#L1528) | echo '<div id="waymark-settings-nav" data-init\_tab\_key="' . esc\_html($current) . '">' . "\n"; |
| [1529](#L1529) | echo '  <select>' . "\n"; |
| [1530](#L1530) |  |
| [1531](#L1531) | foreach ($this->settings\_nav as $content\_id => $content\_title) { |
| [1532](#L1532) | if (strpos($content\_id, 'label') === 0) { |
| [1533](#L1533) | echo '  <option disabled="disabled">' . $content\_title . '</option>' . "\n"; |
| [1534](#L1534) | } else { |
| [1535](#L1535) | echo '  <option value="' . $content\_id . '"' . (($current == $content\_id) ? ' selected="selected"' : '') . '>' . $content\_title . '</option>' . "\n"; |
| [1536](#L1536) | } |
| [1537](#L1537) | } |
| [1538](#L1538) |  |
| [1539](#L1539) | echo '  </select>' . "\n"; |
| [1540](#L1540) | echo '</div>' . "\n"; |
| [1541](#L1541) | } |
| [1542](#L1542) |  |
| [1543](#L1543) | function execute\_action($action) { |
| [1544](#L1544) | switch ($action) { |
| [1545](#L1545) | //Clear cache |
| [1546](#L1546) | case 'clear\_cache': |
| [1547](#L1547) | Waymark\_Cache::flush(); |
| [1548](#L1548) |  |
| [1549](#L1549) | break; |
| [1550](#L1550) | } |
| [1551](#L1551) |  |
| [1552](#L1552) | wp\_redirect(admin\_url('admin.php?page=waymark-settings&tab=advanced&settings-updated=waymark\_action')); |
| [1553](#L1553) |  |
| [1554](#L1554) | die; |
| [1555](#L1555) | } |
| [1556](#L1556) |  |
| [1557](#L1557) | function admin\_notices() { |
| [1558](#L1558) | if (isset($\_GET['settings-updated'])) { |
| [1559](#L1559) | //Settings updates |
| [1560](#L1560) | if ($\_GET['settings-updated'] == 'true') { |
| [1561](#L1561) | echo '<div class="waymark-notice notice notice-success is-dismissible"><p>' . esc\_html\_\_('Settings Updated', 'waymark') . '.</p></div>'; |
| [1562](#L1562) | //Action |
| [1563](#L1563) | } elseif ($\_GET['settings-updated'] == 'waymark\_action') { |
| [1564](#L1564) | echo '<div class="waymark-notice notice notice-success is-dismissible"><p>' . esc\_html\_\_('Action Complete', 'waymark') . '.</p></div>'; |
| [1565](#L1565) | } |
| [1566](#L1566) | } |
| [1567](#L1567) | } |
| [1568](#L1568) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/waymark/trunk/inc/Admin/Waymark_Settings.php?format=txt)
* [Original Format](/export/3222677/waymark/trunk/inc/Admin/Waymark_Settings.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


