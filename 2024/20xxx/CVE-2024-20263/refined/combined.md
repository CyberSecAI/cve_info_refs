=== Content from www.cisco.com_1217504f_20250115_132746.html ===
Cisco Business 350 Series Switches Administration Guide

First Published: 2020-05-07

Last Modified: 2024-06-27

Americas Headquarters
Cisco Systems, Inc.
170 West Tasman Drive
San Jose, CA 95134-1706
USA
http://www.cisco.com
Tel: 408 526-4000

800 553-NETS (6387)

Fax: 408 527-0883

© 2024 Cisco Systems, Inc. All rights reserved.

C H A P T E R 1

Get To Know Your Switch

This chapter contains the following sections:

• Introduction, on page 1
• Rack Mounting Switch, on page 2
• Wall Mounting a Switch, on page 3
• Out-Of-Band Port, on page 6
• Stacking the Switches, on page 6
• Power over Ethernet Considerations, on page 8
• Front Panel, on page 10
• Configuring Switches, on page 13
• Navigation, on page 16

Introduction

Thank you for purchasing the Cisco CBS Series Switch. The Cisco CBS Series Switches combine powerful
network performance and reliability with a complete suite of network features that you need for a solid business
network. These expandable Gigabit Ethernet switches, with Gigabit or 10-Gigabit uplinks, provide multiple
management options, rich security capabilities, and Layer-3 static routing features far beyond those of an
unmanaged or consumer-grade switch, at a lower cost than fully managed switches.

Before You Begin

Before you begin installing your device, ensure that the following items are available:

• RJ-45 Ethernet cables for connecting network devices. A category 6a and higher cable is required for

10G ports; a category 5e and higher cable is required for all other ports.

• Tools for installing the hardware.

• The rack-mount kit packed with the switch contains four rubber feet for desktop placement, and

two brackets and twelve screws for rack mounting.

• If the supplied screws are lost, use replacement screws in the following size:

• Diameter of the screw head: 6.9 mm

• Length of the face of the screw head to the base of screw: 5.9 mm

• Shaft diameter: 3.94 mm

Cisco Business 350 Series Switches Administration Guide

1

Rack Mounting Switch

Get To Know Your Switch

Warning

To prevent airflow restriction, allow clearance around the ventilation openings
to be at least 3 inches (7.6 cm).

• A computer to manage the device either via the console port or via the web-based interface. for web-based

interface the computer needs to support one of the following browsers:

• Microsoft Edge

• Firefox (version 82 or 81 or higher)

• Chrome (version 86 or 85 or higher)

• Safari over MAC (version 14.0 and higher)

Warning

Suitable for installation in information Technology Rooms in accordance with Article 645 of the national
Electric Code and NFPA 75.

Rack Mounting Switch

You can mount the switches on any standard size, 19-inch (about 48 cm) wide rack. The switch requires 1
rack unit (RU) of space, which is 1.75 inches (44.45 mm) high.

Caution

For stability, load the rack from the bottom to the top, with the heaviest devices on the bottom. A top-heavy
rack is likely to be unstable and might tip over.

To install the switch into a 19-inch standard chassis:

Procedure

Step 1

Step 2

Step 3

Place one of the supplied brackets on the side of the switch so that the four holes of the brackets align to the screw holes,
and then use the four supplied screws to secure it.

Repeat the previous step to attach the other bracket to the opposite side of the switch.

After the brackets are securely attached, the switch is now ready to be installed into a standard 19-inch rack.

Note

Use supplied brackets to rack mount the switch.

Supplied rack mounting for switch models with front mounting position. The mounting ears do not sit flush
to the front panel.

Cisco Business 350 Series Switches Administration Guide

2

Get To Know Your Switch

Wall Mounting a Switch

Due to design differences, some of the mounting brackets will attach such that the switch will protrude about
an inch from the mounting surface.

Supplied rack mounting for switch models with front mounting position. The mounting ears sit flush to the
front panel.

Wall Mounting a Switch

You can mount the switches on a wall, using wall studs or to a firmly attached plywood mounting backboard.

Caution

Read these instructions carefully before beginning installation. Failure to use the correct hardware or to follow
the correct procedures could result in a hazardous situation to people and damage to the system.

Caution

Do not wall-mount the switch with its front panel facing up. Following safety regulations, wall mount the
switch with its front panel facing down or to the side to prevent airflow restriction and to provide easier access
to the cables.

To wall-mount a 24-port switch using brackets:

Cisco Business 350 Series Switches Administration Guide

3

Wall Mount an 8 Port Switch

Get To Know Your Switch

Procedure

Step 1

Step 2

Step 3

Attach a 19-inch bracket to one side of the switch.

Repeat the previous step to attach the other bracket to the opposite side of the switch.

After the brackets are securely attached, mount the switch with the front panel facing down. Make sure that the switch
is attached securely to wall studs or to a firmly attached plywood-mounting backboard. Wall-mounting a 24-port switch.

Wall-mounting a 24-port

Wall Mount an 8 Port Switch

To wall-mount a 8-port switch using mounting screws, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

4

Locate the screw template. The template is used to align the mounting screw holes.

Position the screw template so that the edge that is marked as CABLE SIDE ENTRY faces toward the floor. Make sure
that the switch is attached securely to wall studs or to a firmly attached plywood mounting backboard.

Peel the adhesive strip off the bottom of the screw template.

Attach the screw template to the wall.

Use a 0.144-inch (3.7 mm) or a #27 drill bit to drill a 1/2-inch (12.7 mm) hole in the two screw template slots.

Cisco Business 350 Series Switches Administration Guide

Get To Know Your Switch

Wall Mount an 8 Port Switch

Step 6

Insert two screws in the slots on the screw template and tighten them until they touch the top of the screw template.
Installing the mounting screws on the wall

Figure 3 Installing the mounting screws on the wall

Step 7

Step 8

Remove the screw template from the wall.

Place the switch onto the mounting screws, and slide it down until it locks in place. Wall-mounting an 8-port switch

Figure 4 Wall-mounting an 8-port switch

Cisco Business 350 Series Switches Administration Guide

5

Out-Of-Band Port

Get To Know Your Switch

Out-Of-Band Port

The CBS350 “10G network port SKUs” support an Out-of-Band (OOB) port which can be used for the
management network. The out-of-band and the in-band ports share the same IP routing table. Thus, the same
subnet cannot be used on both the in-band and out-of-band interfaces.

The OOB port is assigned a MAC address which differs from the base MAC address and the in-band ports
addresses. This MAC address is used as the source MAC address in all frames sent by the switch on the OOB
port.

By default, VLAN 1 is configured with a default IP address 192.168.1.254, and can be accessed through any
in-band interfaces. This default IP address is used when no other address is assigned (dynamically or statically).
There is no default IP address on OOB port.

Table1:VLAN1andOOBFactoryDefaultIPsettings–Oldandnewbehavior

Cisco Business firmware up to version 3.1

Cisco Business firmware version 3.1.1

OOB interface

VLAN 1 interface

OOB interface

VLAN 1 interface

IP settings

Default IP + DHCP

DHCP enable

Default IP + DHCP

Interface CLI
configuration

None

None

"IP address DHCP"

None

Other

Bonjour enabled

None

None

Bonjour enabled

Stacking the Switches

A stack can have multiple devices in it. Any 10G port of the switch can be used for stacking.

By default, the ports on the switch function as regular Ethernet ports, except if you configure them to do
stacking. You cannot mix the stack speeds between the switches or ports.

At least two ports must be chosen for stacking in a given switch" and those ports must be 10Gig speed. For
two switches or more to form a stack, they must be running the same version of the firmware. This is the more
reason SG series switches cannot be stacked with CBS series switches. CBS250 series switches do not have
stacking capabilities.

Some switches have their stack LEDs numbered 1, 2, 3, and 4 to indicate Active, Standby, and Member while
the others types use the system LED flashing behavior to describe the same thing.

Note

Stack ports must have the same speed capability on the module or cable plug in.

The switch can only be stacked without Mesh topology. The switches in the same stack are connected together
through their stack ports. Depending on the type of stack ports and the desired speed, you may need Cat6a
Ethernet cables or Cisco approved modules or cables for the switches.

Cisco Business 350 Series Switches Administration Guide

6

Get To Know Your Switch

Feature Support on Hybrid Mode

Some network switches have the ability to be connected to other switches and operate together as a single
unit. These configurations are called stacks, and they are useful for quickly increasing the capacity of your
network.

Stack Management

The Cisco Business switches have a couple of different stacking modes, and you can stack different models.

Also, you need to note what feature may or may not be available in different stacking modes (native or hybrid).

• Native Stacking- The switch is part of a stack in which all of the units are of the same type.

• Hybrid Stacking – The switch is part of a stack that can consist of either mixed type of CBS350 devices.

Cisco Business Switch Stacking Mode Selector

This tool will guide you to selecting the correct stacking settings for your 10G Cisco Business 350 series
switch. Click on the link below to access the tool.

https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/
kmgmt-2799-switch-stack-selector-cbs.html

Note

You cannot stack the legacy switches with the new Cisco Business stackable switches. If you are stacking the
legacy switches, consult the following link: https://www.cisco.com/c/en/us/support/docs/smb/switches/
cisco-350x-series-stackable-managed-switches/
smb5367-feature-support-comparison-between-the-cisco-stackable-manag.html

Feature Support on Hybrid Mode

The feature set of the CBS350 SKUs with 10G network ports and the feature CBS350 SKUs with 10G uplink
ports are nearly identical. However, there are a few differences in feature support and table sizes between the
2 “sub-types”. The Cisco Business switches hybrid stack mode will support the lower denominator for these
features/tables The following table lists the feature differences between the 2 sub-types and the setting applied
in hybrid mode:

Hybrid mode works in any combination of stacking albeit reduced performance, MAC table size for example
can be reduced; but switches of the same model number (same PID) can take advantage of native stacking
mode. Some switches with different PID can stack in native mode as well, other combinations, however, can
only stack in hybrid mode.

In general, except for the CBS350-48XT-4X, all CBS350 switches that support stacking and have designated
uplink ports in their PID can stack natively among themselves, and those that do not have uplink ports,
including the CBS350-48T-4X can stack, among themselves, in native mode as well. The hybrid mode staking
comes into play only when mixing these two blocks, uplink supporting devices and non-uplink supporting
devices. So. knowing the exact PID of a given switch is so crucial when it comes to stacking mode
determination. The CBS350-48T-4X, although has 4X at the end of the PID that should designate this as
supporting an uplink, it is not the case, this 4X designation in this switch does not indicate uplink, instead,
they are network port (downlink port) as are the other ports in the switch.

Changing stacking mode from Native to Hybrid will force a switch to reboot and most of its settings in its
startup configuration will reset to default; on the other hand, changing the stacking mode from Hybrid to
Native will force the unit to reboot, but the settings will not reset back to default.

Cisco Business 350 Series Switches Administration Guide

7

Power over Ethernet Considerations

Get To Know Your Switch

Feature

CBS350 “10G uplink port
SKUs”

CBS350 “10G network port
SKUs”

Hybrid stack

OOB port

Not Supported

Supported

Not Supported

Green Settings (Short
reach and Energy Detect)

Per SKU and port type
behavior

Per SKU and port type
behavior

Per SKU and port type
behavior

MAC table size

Number of Multicast
groups

16K

2K

32K or 64K

4K

16K

2K

Number of ACEs
supported

1K- reserved

2K- reserved

1K- reserved

Total number of IP entries

992

7392

992

ARP table size

1K – reserved

8K – reserved

1K – reserved

Max number of IPv6
interfaces

106

200

106

Max MAC table aging

400 seconds

630 seconds

400 seconds

IPv6 Manual Tunnel/ 6tp4
tunnel/ ISATAP routing
tunnel

PoE support

Not supported

Supported

Not supported

Supported on specific
SKUs

Not supported

Per SKU type

Default number of VLAN
Mapping entries

0

32

0

Default IP address

On VLAN 1

On VLAN 1

On VLAN 1

Power over Ethernet Considerations

Some switches support PoE while others do not. The switch models that support PoE have a P in their model
number, such as: CBSxxx-xxP-xx. If your switch is one of the Power over Ethernet (PoE) models, consider
the following power requirement.

Warning

The switch is to be connected only to PoE networks without routing to the outside plant.

Table2:SwitcheswithPowerOverEthernet

SKU Name

Description

PoE PD Chipset Type

PoE PSE Support

CBS350-8MGP-2X

8-Port 2.5G PoE Managed Switch

1*69208M

AF/AT

Cisco Business 350 Series Switches Administration Guide

8

Get To Know Your Switch

Power over Ethernet Considerations

SKU Name

Description

PoE PD Chipset Type

PoE PSE Support

CBS350-8MP-2X

8-Port 2.5G PoE Stackable Managed
Switch

1*69208M

AF/AT

CBS350-24MGP-4X

24-Port 2.5G PoE Stackable Managed
Switch

1*69208M + 1*69204

AF/AT/60W

CBS350-12NP-4X

12-Port 5G PoE Stackable Managed
Switch

CBS350-24NGP-4X

24-Port 5G PoE Stackable Managed
Switch

3 * TPS2388

AF/AT/60W

4* TPS2388

AF/AT/60W

CBS350-48NGP-4X

48-Port 5G PoE Stackable Managed
Switch

7* TPS2388

CBS350-8P-2G

8-Port Gigabit PoE Managed Switch

TPS2388

CBS350-8P-E-2G

8-Port Gigabit PoE Managed Switch

TPS2388

CBS350-8FP-2G

8-Port Gigabit PoE Managed Switch

TPS2388

CBS350-8FP-E-2G

8-Port Gigabit PoE Managed Switch

TPS2388

CBS350-16P-2G

16-Port Gigabit PoE Managed Switch

2*TPS2388

CBS350-16P-E-2G

16-Port Gigabit PoE Managed Switch

2*TPS2388

CBS350-16FP-2G

16-Port Gigabit PoE Managed Switch

2*TPS2388

CBS350-24P-4G

24-Port Gigabit PoE Managed Switch

3*TPS2388

CBS350-24FP-4G

24-Port Gigabit PoE Managed Switch

3*TPS2388

CBS350-48P-4G

24-Port Gigabit PoE Managed Switch

6*TPS2388

CBS350-48FP-4G

48-Port Gigabit PoE Managed Switch

6*TPS2388

CBS350-24P-4X

24-Port Gigabit PoE Stackable Managed
Switch with 10G Uplinks

3*TPS2388

CBS350-24P-4X

24-Port Gigabit PoE Stackable Managed
Switch with 10G Uplinks

3*TPS2388

CBS350-24FP-4X

48-Port Gigabit PoE Stackable Managed
Switch with 10G Uplinks

6*TPS2388

CBS350-48P-4X

48-Port Gigabit PoE Stackable Managed
Switch with 10G Uplinks

6*TPS2388

CBS350-48FP-4X

48-Port Gigabit PoE Stackable Managed
Switch with 10G Uplinks

6*TPS2388

AF/AT

/60W

AF/AT

AF/AT

AF/AT

AF/AT

AF/AT

AF/AT

AF/AT

AF/AT

AF/AT

AF/AT

AF/AT

AF/AT

AF/AT

AF/AT

AF/AT

AF/AT

Cisco Business 350 Series Switches Administration Guide

9

Front Panel

Get To Know Your Switch

Caution

Consider the following when connecting a PoE switch. The PoE switches are PSE (Power Sourcing Equipment)
that are capable of supplying DC power to attaching powered devices (PD). These devices include VoIP
phones, IP cameras, and wireless access points. The PoE switches can detect and supply power to pre-standard
legacy PoE PD. Due to the PoE legacy support, it is possible that a PoE switch acting as a PSE may mistakenly
detect and supply power to an attaching PSE, including other PoE switches, as a legacy PD. Even though PoE
switches are PSE, and as such should be powered by AC, they could be powered up as a legacy PD by another
PSE due to false detection. When this happens, the PoE switch may not operate properly and may not be able
to properly supply power to its attaching PDs.

To prevent false detection, you should disable PoE on the ports on the PoE switches that are used to connect
to PSEs. You should also first power up a PSE device before connecting it to a PoE switch. When a device
is being falsely detected as a PD, you should disconnect the device from the PoE port and power recycle the
device with AC power before reconnecting its PoE ports.

Front Panel

The ports, LEDs, and Reset button are located on the front panel of the switch, as well as the following
components:

Cisco Business 350 Series Model

Note

Models may differ within the CBS 350 series and this is just a representation of a model within the series.

• There are 2 device types with different console interface:

• Console port with RJ-45 and mini USB connector if both are connected the Mini USB has precedence

over the RJ-45

• RJ-45 connector only type of console.

The console interface connects a serial cable to a computer serial port so that it can be configured using
a terminal emulation program or mini USB cable (depending on the connector).

Cisco Business 350 Series Switches Administration Guide

10

Get To Know Your Switch

Front Panel

• USB Port—The USB port connects the switch to a USB device so that you can save and restore the

configuration files, firmware images, and SYSLOG files through the connected USB device. The USB
port supports the FAT32 file system.

• RJ-45 Ethernet Ports—The RJ-45 Ethernet ports connect network devices, such as computers, printers,

and access points, to the switch.

• SFP+ Port (if present)—The small form-factor pluggable plus (SFP+) are connection points for modules
so that the switch can link to other switches. These ports are also commonly referred to as mini 10GigaBit
Interface Converter ports. The term SFP+ is used in this guide.

• The SFP+ ports (if present) are compatible with the following Cisco SFP 1G optical modules

MGBSX1, MGBLX1, MGBLH1, MGBT1, as well as other brands.

• The SFP+ ports are compatible with the following Cisco SFP 1G optical modules MGBSX1,

MGBLX1, MGBLH1, MGBT1, as well as other brands.

• The Cisco SFP+ Copper Cable modules that are supported in the Cisco switches are:

SFP-H10GB-CU1M, SFP-H10GB-CU3M, and SFP-H10GB-CU5M.

• The LEDs of the corresponding RJ-45 port flash green to respond to the SFP interface traffic.

• Small form-factor pluggable (SFP) ports are connection points for modules, so the switch can link to

other switches.

• Some SFP interfaces are shared with one other RJ-45 and SFP+ port, called a combo port. When the SFP

is active, the adjacent RJ-45 port is disabled.

• Reset button is used to reset or reboot the switch. The table below displays the reset behavior on the

switch.

Press Type

1- 5 seconds

6- 10 seconds

11-15 seconds

16-20 seconds

> 20 seconds

New Behavior (Firmware 3.2 and
on)

Old Behavior (Firmware prior to
3.2)

System LED is green, releasing
button does not cause reload.

Reload

Reload

System LED flash green,
releasing button during this period
will cause device reload, but
system is not set to factory
default.

System LED is green, releasing
button does not cause reload

Factory default

System LED flashes green,
releasing button during this period
will cause device reload to factory
default

Factory default

System LED is green, releasing
button does not cause reload

Factory default

Cisco Business 350 Series Switches Administration Guide

11

Front Panel LEDs

Get To Know Your Switch

Note

Stack Behavior

The reset button disable setting is applied to all units in the stack, meaning that
if configured, the reset button on all units in the stack are disabled, and if not
configured the reset button on all units in the stack are enabled. This applies also
to units that join an existing stack.

• OOB Port (if present)—The Out of Band (OOB) port is a CPU Ethernet port that can be used only as a
management interface. Bridging between the OOB port and the in-band Layer 2 interface is not supported.
This does not appear on 250 devices.

• Multi-Gigabit Ethernet Ports (if present) —Highlighted in blue, these ports support speeds up to 2.5 Gbps
or 5 Gbps on Cat5e cables. The maximum speed supported is printed on the blue shade under the port.
Uplink ports on CBS350-8MGP-2X also support multi-Gigabit speed. In this case, port speed can reach
10Gbps. Most of the cabling deployed worldwide is Cat5e, and previously limited to 1 Gbps at 100
meters. Cisco multi-Gigabit Ethernet enables speeds up to 2.5 or 5 Gbps on the same infrastructure
without replacing a cable.

• 60-Watt PoE Ports (if present)- The 60-Watt PoE port doubles the maximum PoE power delivered on

the port to 60W.

Front Panel LEDs

The following are the global LEDs found on the devices:

• System—(Green) The LED lights steady when the switch is powered on, and flashes when booting,

performing self-tests, or acquiring an IP address. If the LED flashes Amber, the switch has detected a
hardware or firmware failure, and/or a configuration file error.

The following LEDs describe the stacking status of the unit.

• *Stack ID LED (Green)- The LED lights steady when the switch is stacked and the corresponding number

indicates its Stack ID.

• *Active Unit ID LED- indicating this is the stack active unit.

Note

* These two LEDs are only available on certain models.

• System LED- Every 20 seconds, the System LED will flash according to unit ID of the member unit.

• Flash = LED going off and then on again.

• According to unit ID of the unit. This means

• Unit 1 (if not active unit)- system LED will flash 1 time

• Unit 2 (if not active unit)- system LED will flash 2 times

• Unit 3- system LED will flash 3 times

• Unit 4-system LED will flash 4 times;

Cisco Business 350 Series Switches Administration Guide

12

Get To Know Your Switch

Configuring Switches

• The duration of each flash (LED off time) will be as follows:

• LED off time (in each flash) ~ 0.5 seconds.

• “Interim” LED on (between 2 LED offs) ~ 0.5 seconds

• If a member unit is removed from the stack, its system LED will continue to flash according to

above definition.

The following are per port LEDs:

• LINK/ACT—(Green) Located on the left of each port. The LED lights steady when a link between the

corresponding port and another device is detected, and flashes when the port is passing traffic.

• SFP+ (if present)—(Green) Located on the right of a 10G port. The LED lights steady when a connection

is made through the shared port, and flashes when the port is passing traffic.

• XG—(Green) Located on the right of a 10G port. The LED lights steady when another device is connected
to the port, is powered on, and a 10 Gbps link is established between the devices. When the LED is off,
the connection speed is under 10 Gbps or nothing is cabled to the port.

• Gigabit—(Green) Located on the right of the 1G port. The LED lights steady when another device is
connected to the port, is powered on, and a 1000 Mbps link is established between the devices. When
the LED is off, the connection speed is under 1000 Mbps or nothing is cabled to the port. (This feature
is only available on certain models).

• PoE (if present)—(Amber) Located on the right of the port. The LED lights steady when power is being
supplied to a device attached to the corresponding port. (This feature is only available on certain models).

Configuring Switches

The switch can be accessed and managed over your IP network using the web-based interface, or by using
the switch’s command-line interface through the console port. Using the console port requires advanced user
skills and is only supported on certain models.

The following table shows the default settings used when configuring your switch for the first time.

Parameter

Username

Password

LAN IP

Default Value

cisco

cisco

192.168.1.254

Configuring Your Switch Using the Web-based Interface

To access the switch with a web-based interface, you must know the IP address that the switch is using. The
switch uses the factory default IP address of 192.168.1.254, with a subnet of /24. When the switch is using
the factory default IP address, the System LED flashes continuously. When the switch is using a DHCP
server-assigned IP address or an administrator has configured a static IP address, the System LED is a steady
green (DHCP is enabled by default).

Cisco Business 350 Series Switches Administration Guide

13

Configuring Your Switch Using the Web-based Interface

Get To Know Your Switch

If you are managing the switch through a network connection and the switch IP address is changed, either by
a DHCP server or manually, your access to the switch will be lost. You must enter the new IP address that
the switch is using into your browser to use the web-based interface. If you are managing the switch through
a console port connection, the link is retained.

To configure the switch using the web-based interface:

Procedure

Step 1

Step 2

Step 3

Power on the computer and your switch.

Connect the computer to any network port.

Set up the IP configuration on your computer.

a)

b)

If the switch is using the default static IP address of 192.168.1.254/24, you must choose an IP address for the computer
in the range of 192.168.1.2 to 192.168.1.253 that is not already in use.
If the IP addresses will be assigned by DHCP, make sure that your DHCP server is running and can be reached from
the switch and the computer. You may need to disconnect and reconnect the devices for them to discover their new
IP addresses from the DHCP server.

Note
Details on how to change the IP address on your computer depend upon the type of architecture and operating system
that you are using. Use your computers local Help and Support functionality and search for “IP Addressing.”

Step 4

Step 5

Step 6

Step 7

Step 8

Open a web browser window.

Enter the switch IP address in the address bar and press Enter. For example, http://192.168.1.254.

When the login page appears, choose the language that you prefer to use in the web-based interface and enter the username
and password.

The default username is cisco. The default password is cisco. Usernames and passwords are both case sensitive.

Click Log In.

If this is the first time that you have logged on with the default username and password, the Change username and
Password. Enter a new username and password and confirm.

If this is the first time that you have logged on with the default username and password, the Change username and Password

page opens

Note
Please refer to the password complexity rule section in Login Settings, on page 262 before creating a password.

Step 9

Click Apply.

Caution
Make sure that any configuration changes made are saved before exiting from the web-based interface by clicking on the
Save icon. Exiting before you save your configuration results in all changes being lost.

The Getting Started page opens. You are now ready to configure the switch. Refer to the Administration Guide or see
the help pages for further information.

Cisco Business 350 Series Switches Administration Guide

14

Get To Know Your Switch

Configuring Your Switch Using the Console Port

Configuring Your Switch Using the Console Port

To configure the switch using the console port, which is only supported on certain models, proceed with the
following steps:

Procedure

Step 1

Step 2

Step 3

Connect a computer to the switch console port using a Cisco console cable (purchased separately) or a cable with mini
USB connector.

Start a console port utility such as Hyper Terminal on the computer.

Configure the utility with the following parameters:

• 115200 bits per second

• 8 data bits

• no parity

• 1 stop bit

• no flow control

Step 4

Enter a username and password. The default username is cisco, and the default password is cisco. Usernames and passwords
are both case sensitive.

If this is the first time that you have logged on with the default username and password, the following message appears:

Please change your username AND password from the default settings. Change of credentials

is required for better protection of your network.

Please note that new password must follow password complexity rules

Step 5

Set a new administrator username and password.

Caution
Make sure that any configuration changes made are saved before exiting.

You are now ready to configure the switch. See the CLI Guide for your switch.

Note
If you are not using DHCP on your network, set the IP address type on the switch to Static and change the static IP address
and subnet mask to match your network topology. Failure to do so may result in multiple switches using the same factory
default IP address of 192.168.1.254.

Console access also provides additional interfaces for debug access which are not available via the web interface. These
debug access interfaces are intended to be used by a Cisco Support Team personnel, in cases where it is required to debug
device’s behavior. These interfaces are password protected. The passwords are held by the Cisco support team. The device
supports the following debug access interfaces:

• U-BOOT access during boot sequence

• Linux Kernel access during boot sequence

Cisco Business 350 Series Switches Administration Guide

15

Navigation

Get To Know Your Switch

• Run time debug modes- allows Cisco support team to view device settings and apply protocol and layer 1 debug
commands and settings. The run time debug mode is accessible over telnet and SSH terminals in addition to the
console.

Navigation

The navigation menu, located at the top right of each UI page, lists the device’s main features. You can access
each feature’s UI pages using a series of cascading menus. To access an individual UI page, click the
corresponding feature tab in the navigation menu to display a menu of subcategories. Select a subcategory
and repeat this process until you see the desired page, and then select the page to display it in the main window.

Basic or Advanced Display Mode

The product supports many features, and therefore the WEB GUI includes hundreds of configuration and
display pages. These pages are divided into the following display modes:

• Basic—Basic subset of configuration options are available. If you are missing some configuration option,

select the Advanced mode in the device header.

• Advanced—Full set of configuration options are available.

When the user switches from basic to advanced, the browser reloads the page. However, after reloading, the
user stays on the same page. When the user switches from advanced to basic, the browser reloads the page.
If the page exists also on the basic mode, the user stays on the same page. If the page does not exist in the
basic mode, the browser will load the first page of the folder which was used by the user. If the folder does
not exist, the Getting Started page will be displayed.

If there is an advanced configuration, and the page is loaded in basic mode, a page-level message will be
displayed to the user (e.g, there are 2 radius servers configured but in basic mode only a single server can be
displayed, or there is 802.1X port authentication with time range configured but time range is not visible in
basic mode). When switching from one mode to another, any configuration which was made on the page
(without Apply) is deleted.

Cisco Business 350 Series Switches Administration Guide

16

C H A P T E R 2

Getting Started

This chapter contains the following section:

• Getting Started, on page 17

Getting Started

This section will guide you on how to install and manage your device.

Click on Getting Started to access the page where you can use the various links and follow the on-screen
instructions to quickly configure your switch.

Basic or Advanced Display Mode

The switch's WEB GUI includes hundreds of configuration and display pages. These pages are divided into
the following display modes:

• Basic—Basic subset of configuration options.

• Advanced—Full set of configuration options are available

When switching from one mode to another, any configuration which was made on the page (without Apply)
is deleted.

Initial Setup

Manage Stack

Change Management Applications
and Services

Stack Management, on page 61

TCP/UDP Services, on page 284

Change Device IP Address

IPv4 Interface, on page 201

Create VLAN

VLAN Settings, on page 143

Configure Port Settings

Port Settings, on page 119

Device Status

System Summary

System Summary, on page 33

Cisco Business 350 Series Switches Administration Guide

17

Getting Started

Getting Started

Port Statistics

Interface, on page 36

RMON Statistics

Statistics, on page 50

View Log

RAM Memory, on page 57

Quick Access

Change Device Password

User Accounts, on page 62

Upgrade Device Software

Firmware Operations, on page 74

Backup Device Configuration

File Operations, on page 76

Create MAC-Based ACL

MAC-Based ACL, on page 329

Create IP-Based ACL

IPv4-based ACL, on page 331

Configure QoS

QoS Properties, on page 341

Configure SPAN

SPAN and RSPAN , on page 44

There are four hot links on the Getting Started page that take you to Cisco web pages for more information.
Clicking on the Support link takes you to the device product support page, and clicking on the Forums link
takes you to the Support Community page. Clicking on the Virtual Assistant will take you to the virtual
assistant where you can ask your questions and clicking on CBD will take you to the Cisco Business Dashboard
application where you can manage your network.

Cisco Business 350 Series Switches Administration Guide

18

C H A P T E R 3

Dashboard

This chapter contains the following section:

• Dashboard, on page 19

Dashboard

The dashboard is a collection of 8 squares, initially empty, that can be populated by various types of information.
You can select a number of modules from the available modules and place them in this grid. You can also
customize settings of the currently displayed modules. When the dashboard loads, the modules you selected
for the dashboard are loaded in their locations in the grid. The data in the modules is updated, in intervals
depending on the module type.

When you open the dashboard, a wire frame view of the grid is displayed. To display modules that aren’t
currently being displayed, click Customize. Add modules by selecting a module from the list of modules on
the right and dragging and dropping it to any space in the grid.

The modules are divided into the following groups:

• Small Modules are modules that take up a single square.

• Large Modules take up two squares.

If you drag a module into a space currently occupied, the new module replaces the previous one. You can
rearrange the placement of the modules in the grid by dragging a module from one occupied grid position to
another position. Only when you click Done are the modules populated by the relevant information. The title
bar of each module in the dashboard displays the title of the module and three buttons.

• Pencil — Opens configuration options (depending on the module).

• Refresh — Refreshes the information.

• X — Removes the module from the dashboard.

Cisco Business 350 Series Switches Administration Guide

19

Dashboard

Table3:SmallModules

Dashboard

System Health

The System Health displays information about device health.

• Fan Status

• Yellow— A fan has failed and is backed up by a redundant

fan.

• Green—Fan is operational.

• Red—Fan is faulty.

• Thermometer Status

• Green —Temperature is OK.

• Yellow—Temperature generates a warning.

• Red—Temperature is critical.

Resource Utilization

This module displays the utilization status in terms of a percentage of
the various system resources as a bar chart

The resources monitored are:

• Multicast Groups—Percentage of Multicast groups that exist out
of the maximum possible number that are permitted to be defined.

• MAC Address Table—Percentage of MAC Address table in use.

• TCAM—Percentage of TCAM used by QoS and ACL entries.

• CPU—Percentage of CPU being used.

Identification

This module displays basic information regarding the device. It displays
the following fields:

• System Description—Displays description of the device.

• Host Name—Entered in the System Settings, on page 59 or default

is used.

• Firmware Version—Current firmware version running on device.

• MAC Address—MAC address of the device.

• Serial Number—Serial number of the device.

• System Location (if configured)—Enter the physical location of

the device.

• System Contact (if configured)—Enter the name of a contact person.

• Total Available Power (for PoE devices only)—Amount of power

available to the device.

• Current Power Consumption (for PoE devices only)—Amount of

power consumed by the device.

Cisco Business 350 Series Switches Administration Guide

20

Dashboard

Dashboard

PoE Utilization

Table4:LargeModules

Latest Logs

This module displays a graphic representation of the PoE utilization
status. For a standalone unit, this module displays a gauge with a dial
of values from 0-100. The section of the dial from the traps threshold
to 100 is red. In the middle of the gauge, the actual PoE utilization value
is shown in watts.

Each bar represents the PoE utilization percentage value of the device
on a scale of 0 to 100. If the PoE utilization is higher than the traps
threshold, the bar is red. Otherwise the bar is green. When hovering on
a bar, a tool tip appears showing the actual PoE utilization of the device
in watts. Additional views can be selected in the configuration options
(pencil icon in upper-right corner).

• Refresh Time—Select one of the displayed options.

• PoE Global Properties—Link to the Port Management > PoE >

Properties page.

• PoE Port Settings—Link to the Port Management > PoE >

Settings page.

Note
This section is only relevant for devices supporting PoE.

This module contains information about the five latest events logged by
the system as SYSLOGs. The following configuration options
(right-hand corner) are available:

• Severity Threshold—Described in Log Settings, on page 71.

• Refresh Time—Select one of the options displayed.

• View logs—Click to open RAM Memory, on page 57 .

Cisco Business 350 Series Switches Administration Guide

21

Dashboard

Dashboard

Suspended Interfaces

Stack Topology

This module displays interfaces that have been suspended in either
device or table view. The view is selected in the configuration options-
Display Option (pencil icon in upper-right corner).

• Device View—In this view, the device is displayed. When units

are connected in a stack, a drop-down selector enables the user to
select the device to be viewed. All suspended ports in the device
are shown as red.

• Table View—In this view, there is no need to select a specific stack

unit. Information is displayed in table form as follows:

• Interface—Port or LAG that was suspended

• Suspension Reason—Reason interface was suspended

• Auto-recovery current status—Has auto recovery been enable

for the feature that caused the suspension.

The following configuration options (right-hand corner) are available:

• Refresh Time—Select one of the options displayed

• Error Recovery Settings—Click to open Error Recovery Settings,

on page 122.

This module is a graphic representation of the stack topology and is
identical in behavior to the Stack Topology View. It displays the
following fields:

• Stack Topology—Either Chain or Ring.

• Stack Active Unit—Number of unit functioning as the active unit

of the stack.

Hovering over a unit in the module displays a tool tip identifying the
unit and providing basic information on its stacking ports. Hovering
over a stack connection in the module displays a tool tip detailing the
connected units and the stacking ports generating the connection.

Cisco Business 350 Series Switches Administration Guide

22

Dashboard

Dashboard

Port Utilization

This section displays the port utilization on the device. The view is
selected in the configuration options (pencil icon in upper-right corner).

Traffic Errors

• Display Mode—Device View- Displays the device Hovering over

a port displays information about it.

• Display Mode—Chart View- A list of ports and how they are being
used is displayed. For each port, the following port utilization
information can be viewed.

• Tx—% (red)

• Rx—% (blue)

• Refresh Time—Select one of the displayed options.

• Interface Statistics—Link to the Status and Statistics > Interface.

This module displays the number of error packets of various types that
are counted on the RMON statistics. The view is selected in the
configuration options (pencil icon in upper-right corner).

• Display Mode- Device View

The device module mode displays a diagram of the device. All
suspended ports in the device are shown as red.

Hovering over a suspended port displays a tool tip with the
following information:

• Port name.

• If the port is a member of a LAG, the LAG identity of the

port.

• Details of the last error logged on the port.

• Display Mode- Table View

• Interface—Name of port

• Last Traffic Error—Traffic error that occurred on a port and

the last time the error occurred.

• Refresh Time—Select one of the refresh rates.

• Traffic Error Information—Click to link to the Statistics, on page

50.

Cisco Business 350 Series Switches Administration Guide

23

Dashboard

Dashboard

Cisco Business 350 Series Switches Administration Guide

24

C H A P T E R 4

Configuration Wizards

This chapter contains the following sections:

• Getting Started Wizard, on page 25
• VLAN Configuration Wizard, on page 26
• ACL Configuration Wizard, on page 27

Getting Started Wizard

The Getting Started Wizard will assist you in the initial configuration of the device.

Procedure

Step 1

Step 2

Step 3

In Configuration Wizards > Getting Started Wizard, click Launch Wizard.

Click Launch Wizard and Next.

Enter the fields in the General Information tab:

• System Location—Enter the physical location of the device.

• System Contact—Enter the name of a contact person.

• Host Name—Select the host name of this device. This is used in the prompt of CLI commands:

• Use Default—The default hostname (System Name) of these switches is: switch 123456, where 123456

represents the last three bytes of the device MAC address in hex format.

• User Defined—Enter the hostname. Use only letters, digits, and hyphens. Host names cannot begin or end
with a hyphen. No other symbols, punctuation characters, or blank spaces are permitted (as specified in
RFC1033, 1034, 1035).

Step 4

Step 5

Click Next.
Enter the fields in the IP Settings tab:

• Interface—Select the IP interface for the system.

• IP Interface Source—Select one of the following options:

• DHCP—Select for the device to receive its IP address from a DHCP server.

Cisco Business 350 Series Switches Administration Guide

25

VLAN Configuration Wizard

Configuration Wizards

• Static—Select to enter the IP address of the device manually.

• If you selected Static as the IP interface source, enter the following fields:

• IP Address—IP address of the interface.

• Network Mask—IP mask for this address.

• Administrative Default Gateway—Enter the default gateway IP address.

• DNS Server—Enter the IP address of the DNS server.

Step 6

Step 7

Click Next

Enter the fields in the User Account tab:

• Username—Enter a new user name between 0 and 20 characters. UTF-8 characters are not permitted.

• Password—Enter a password (UTF-8 characters are not permitted).

• Confirm Password—Enter the password again.

• Password Strength —Displays the strength of password.

• Keep current username and password—Select to keep current username and password.

Step 8

Step 9

Click Next

Enter the fields in the Time Settings tab:

• Clock Source—Select one of the following:

• Manual Settings—Select to enter the device system time. If this is selected, enter the Date and Time.

• Default SNTP Servers—Select to use the default SNTP servers.

Note
The default SNTP servers are defined by name, thus DNS must be configured and operational.

• Manual SNTP Server—Select and enter the IP address of an SNTP server.

Step 10

Step 11

Click Next to view a summary of configuration that you entered.

Click Apply to save the configuration data.

VLAN Configuration Wizard

The VLAN Configuration Wizard will assist you in configuring the VLANs. Each time you run this wizard,
you can configure the port memberships in a single VLAN. To use the VLAN Configuration Wizard to
configure your VLANs follow these steps:

Cisco Business 350 Series Switches Administration Guide

26

Configuration Wizards

ACL Configuration Wizard

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Step 6

Step 7

Step 8

Step 9

Step 10

In Configuration Wizards > VLAN Configuration Wizard, click Launch Wizard.

Click Launch Wizard and Next.

Select the ports that are to be configured as trunk port (by clicking with mouse on the required ports in the graphical
display). Ports that are already configured as Trunk ports are pre-selected.

Click Next.

In the VLAN Configuration section, configure the following::

• VLAN ID—Select the VLAN you want to configure. You can select either an existing VLAN or New VLAN.

• New VLAN ID—Enter the VLAN ID of a new VLAN.

• VLAN Name—Optionally, enter VLAN name.

Select the trunk ports that are to be configured as untagged members of the VLAN (by clicking with mouse on the
required ports in the graphical display). The trunk ports that are not selected in this step becomes tagged members of
the VLAN.

Click Next.

Select the ports are that to be the access ports of the VLAN. Access ports of a VLAN is untagged member of the VLAN.
(by clicking with mouse on the required ports in the graphical display).

Click Next to see the summary of the information that you entered.

Click Apply.

ACL Configuration Wizard

The ACL Configuration Wizard will assist you when creating a new ACL, or editing an existing ACL. To
add or modify an existing ACL, complete the following steps:

Procedure

Step 1

Step 2

Step 3

In Configuration Wizards > ACL Configuration Wizard, click Launch Wizard.

To create a new ACL, click Next. To edit an existing ACL, choose it from the ACL drop-down list and then click Next.

Enter the fields:

• ACL Name—Enter the name of a new ACL.

• ACL Type—Select the type of ACL: IPv4 or MAC.

Step 4

For the ACE Configuration, configure the following fields:

• Action on match—Select one of the options:

• Permit Traffic—Forward packets that meet the ACL criteria.

Cisco Business 350 Series Switches Administration Guide

27

ACL Configuration Wizard

Configuration Wizards

• Deny Traffic—Drop packets that meet the ACL criteria.

• Shutdown Interface—Drop packets that meet the ACL criteria, and disable the port from where the packets

received.

Step 5

For a MAC-based ACL, enter the fields:

Source MAC Address

Select Any if all source address are acceptable or User defined to enter a source address
or range of source addresses.

Source MAC Value

Enter the MAC address to which the source MAC address is to be matched and its mask
(if relevant).

Source MAC Wildcard Mask

Enter the mask to define a range of MAC addresses.

Destination MAC Address

Select Any if all destination addresses are acceptable or User defined to enter a destination
address or a range of destination addresses.

Destination MAC Value

Enter the MAC address to which the destination MAC address is to be matched and its
mask (if relevant).

Destination MAC Wildcard
Mask

Enter the mask to define a range of MAC addresses. Note that this mask is different than
in other uses, such as subnet mask. Here, setting a bit as 1 indicates don't care and 0
indicates to mask that value.

Note
Given a mask of 0000 0000 0000 0000 0000 0000 1111 1111 (which means that you
match on the bits where there is 0 and don't match on the bits where there is 1's). You
need to translate the 1's to a decimal integer and you write 0 for each four zeros. In this
example since 1111 1111 = 255, the mask would be written: as 0.0.0.255.

Time Range Name

If Time Range is selected, select the time range to be used.

Step 6

For a IPv4-based ACL, enter the fields:

Protocol

Select one of the following options to create an ACL based on a specific protocol:

• Any (IP)—Accept all IP protocols packets

• TCP—Accept Transmission Control Protocols packets

• UDP—Accept User Datagram Protocols packets

• ICMP—Accept ICMP Protocols packets

• IGMP—Accept IGMP Protocols packets

Source Port for TCP/UDP

Select a port from the drop-down list.

Destination Port for
TCP/UDP

Source IP Address

Select a port from the drop-down list.

Select Any if all source address are acceptable or User defined to enter a source address
or range of source addresses.

Cisco Business 350 Series Switches Administration Guide

28

Configuration Wizards

ACL Configuration Wizard

Source IP Value

Enter the IP address to which the source IP address is to be matched.

Source IP Wildcard Mask

Enter the mask to define a range of IP addresses. Note that this mask is different than in
other uses, such as subnet mask. Here, setting a bit as 1 indicates don't care and 0 indicates
to mask that value.

Destination IP Address

Select Any if all IP address are acceptable or User defined to enter a destination IP address
or range of destination IP addresses.

Destination IP Value

Enter the IP value to which the destination IP value is to be matched.

Destination IP Wildcard Mask

Enter the mask to define a range of IP addresses. Note that this mask is different than in
other uses, such as subnet mask. Here, setting a bit as 1 indicates don't care and 0 indicates
to mask that value.

Time Range Name

If Time Range is selected, select the time range to be used.

Step 7

Step 8

Click Next.

Confirm that you want the ACL and ACE to be created.

The details of the ACL rule are displayed. You can click Add another rule to this ACL to add another rule.

Step 9

Click Next and enter the ACL Binding information:

• Binding Type—Select one of the following options to bind the ACL:

• Physical interfaces only—Bind the ACL to a port. In this case, click a port or ports on which to bind the ACL.

• VLANs only—Bind the ACL to a VLAN. Enter the list of VLANs in the Enter the list of VLANs you want to

bind the ACL to field.

• No binding—Do not bind the ACL.

Click Apply.

Cisco Business 350 Series Switches Administration Guide

29

ACL Configuration Wizard

Configuration Wizards

Cisco Business 350 Series Switches Administration Guide

30

C H A P T E R 5

Search

This chapter contains the following section:

• Search , on page 31

Search

The search function helps the user to locate relevant GUI pages.

The search result for a keyword includes links to the relevant pages, and also links to the relevant help pages.

To access the search function, enter a key word and click on the magnifying glass icon.

Cisco Business 350 Series Switches Administration Guide

31

Search

Search

Cisco Business 350 Series Switches Administration Guide

32

C H A P T E R 6

Status and Statistics

This chapter contains the following sections:

• System Summary, on page 33
• CPU Utilization, on page 35
• Port Utilization, on page 36
• Interface, on page 36
• Etherlike, on page 37
• GVRP, on page 38
• 802.1X EAP, on page 39
• ACL, on page 40
• Hardware Resource Utilization, on page 41
• Health and Power, on page 42
• SPAN and RSPAN , on page 44
• Diagnostics, on page 46
• RMON, on page 49
• sFlow, on page 54
• View Log, on page 56

System Summary

The System Summary provides a preview of the device status, hardware, firmware version, general PoE status,
and other system information.

To view the system information, click Status and Statistics > System Summary.

System Information

The System Information section provides a quick way to get information about your device. In this section,
you will be able to see the following information:

• System Description—A description of the system.

• System Location—Physical location of the device. Click Edit to go System Settings, on page 59 to enter

this value.

Cisco Business 350 Series Switches Administration Guide

33

Software Information

Status and Statistics

• System Contact—Name of a contact person. Click Edit to go System Settings, on page 59 to enter this

value.

• Host Name—Name of the device. Click Edit to go System Settings, on page 59 to enter this value. By
default, the device host name is composed of the word switch concatenated with the three least significant
bytes of the device MAC address (the six furthest right hexadecimal digits).

• System Object ID—Unique vendor identification of the network management subsystem contained in

the entity (used in SNMP).

• System Uptime—Time that has elapsed since the last reboot.

Note

For the System Uptime, the time counter will reset after 497 days.

• Current Time—Current system time.

• Base MAC Address—Device MAC address.

• Jumbo Frames—Jumbo frame support status. This support can be enabled or disabled by using the Port

Settings, on page 119.

Note

Jumbo frames support takes effect only after it is enabled, and after the device is
rebooted.

Software Information

The Software Information section provides a quick way get information on the software running on your
device. In this section, you will be able to see the following:

• Firmware Version (Active Image)—Firmware version number of the active image.

• Firmware MD5 Checksum (Active Image)—MD5 checksum of the active image.

• Firmware Version (Non-active)—Firmware version number of the non-active image. If the system is in

a stack, the version of the active unit is displayed.

• Firmware MD5 Checksum (Non-active)—MD5 checksum of the non-active image.

TCP/UDP Services Status

To reset the following fields, click Edit. The following settings will be displayed.

• HTTP Service—Whether HTTP is enabled/disabled.

• HTTPS Service—Whether HTTPS is enabled/disabled.

• SNMP Service—Whether SNMP is enabled/disabled.

• Telnet Service—Whether Telnet is enabled/disabled.

Cisco Business 350 Series Switches Administration Guide

34

Status and Statistics

PoE Power Information on Device Supporting PoE

• SSH Service—Whether SSH is enabled/disabled.

PoE Power Information on Device Supporting PoE

The PoE Power Information on Device Supporting PoE section provides a quick way to get PoE information
on your device. In this section, the following will be displayed:

• PoE Power Information—Click on Detail to link you directly to the Properties, on page 131. This page

shows the PoE power information.

• Maximum Available PoE Power (W)—Maximum available power that can be delivered by the switch.

• Total PoE Power Allocated (W)—Total PoE power allocated to connected PoE devices.

• PoE Power Mode—Port Limit or Class Limit.

The unit is displayed graphically, and hovering on a port displays its name.

The following information is displayed for each unit:

• Unit 1 (Active)—Device model ID.

• Serial Number—Serial number.

CPU Utilization

The device CPU handles the following types of traffic, in addition to end-user traffic handling the management
interface:

• Management traffic

• Protocol traffic

• Snooping traffic

Excessive traffic burdens the CPU and might prevent normal device operation. The device uses the Secure
Core Technology (SCT) to ensure that the device receives and processes management and protocol traffic.
SCT is enabled by default on the device and can’t be disabled.

To display CPU utilization, follow these steps:

Procedure

Step 1

Click Status and Statistics > CPU Utilization.

The CPU Input Rate field displays the rate of input frames to the CPU per second. The window contains a graph displaying
CPU utilization on the device. The Y axis is percentage of usage, and the X axis is the sample number.

Step 2

Step 3

Check Enable to enable the CPU Utilization.

Select the Refresh Rate (time period in seconds) that passes before the statistics are refreshed. A new sample is created
for each time period.

Cisco Business 350 Series Switches Administration Guide

35

Port Utilization

Status and Statistics

The window containing a graph displaying CPU utilization on the device is displayed.

Port Utilization

The Port Utilization page displays utilization of broadband (both incoming and outgoing) per port.

To display port utilization, follow these steps:

Procedure

Step 1

Step 2

Click Status and Statistics > Port Utilization.

Enter the Refresh Rate, which is the time period that passes before the interface Ethernet statistics are refreshed.

The following fields are displayed for each port:

• Interface—Name of port.

• Tx Utilization—Amount of bandwidth used by outgoing packets.

• Rx Utilization—Amount of bandwidth used by incoming packets.

To view a graph of historical utilization over time on the port, select a port and click View Interface History Graph. In
addition to the above, the following field is displayed:

• Time Span—Select a unit of time. The graph displays the port utilization over this unit of time.

Interface

Procedure

The Interface page displays traffic statistics per port. This page is useful for analyzing the amount of traffic
that is both sent and received, and its dispersion (Unicast, Multicast, and Broadcast).

To display Ethernet statistics and/or set the refresh rate, follow these steps:

Step 1

Step 2

Click Status and Statistics > Interface.
To view statistics counters in table view or graphic view:

• Click Clear Interface Counters, to clear all counters.
• Click Refresh to refresh the counters.
• Click View All Interfaces Statistics to see all ports in table view.

• Click View Interface History Graph to display these results in graphic form. Select the Interface to view the the

statistics pertaining to that interface.

Cisco Business 350 Series Switches Administration Guide

36

Status and Statistics

Step 3

Enter the parameters.

Etherlike

• Interface—Select the interface for which Ethernet statistics are to be displayed.

• Refresh Rate—Select the time period that passes before the interface Ethernet statistics are refreshed.

Step 4

In the Receive Statistics section, the following stats are displayed:

• Total Bytes (Octets)—Octets received, including bad packets and FCS octets, but excluding framing bits.

• Unicast Packets—Good Unicast packets received.

• Multicast Packets—Good Multicast packets received.

• Broadcast Packets—Good Broadcast packets received.

• Packets with Errors—Packets with errors received.

Step 5

In the Transmit Statistics section, the following stats are displayed:

• Total Bytes (Octets)—Octets transmitted, including bad packets and FCS octets, but excluding framing bits.

• Unicast Packets—Good Unicast packets transmitted.

• Multicast Packets—Good Multicast packets transmitted.

• Broadcast Packets—Good Broadcast packets transmitted.

Etherlike

Procedure

The Etherlike page displays statistics per port according to the Etherlike MIB standard definition. The refresh
rate of the information can be selected. This page provides more detailed information regarding errors in the
physical layer (Layer 1) that might disrupt traffic.

To view Etherlike Statistics and/or set the refresh rate follow these steps:

Step 1

Step 2

Click Status and Statistics > Etherlike.
Enter the parameters.

• Interface-Select the specific interface for which Ethernet statistics are to be displayed.

• Refresh Rate-Select the amount of time that passes before the Etherlike statistics are refreshed.

The fields are displayed for the selected interface.

• Frame Check Sequence (FCS) Errors- Received frames that failed the CRC (cyclic redundancy checks).

• Single Collision Frames- Frames that involved in a single collision, but successfully transmitted.

• Late Collisions- Collisions that have been detected after the first 512 bits of data.

Cisco Business 350 Series Switches Administration Guide

37

GVRP

Status and Statistics

• Excessive Collisions- Transmissions rejected due to excessive collisions.

• Oversize Packets- Packets greater than 2000 octets received.

• Internal MAC Receive Errors- Frames rejected because of receiver errors.

• Pause Frames Received- Displays the number of frames received.

• Pause Frames Transmitted- Number of pause frames transmitted.

Note
If one of the fields listed above shows a number of errors (not 0), a Last Up time is displayed.

Step 3

To view statistics counters in table view, click View All Interfaces Statistics to see all ports in table view. You can also
click Refresh to refresh the stats or click Clear Interface Counters to clear the counters.

GVRP

Procedure

The GARP VLAN Registration Protocol (GVRP) page displays the GVRP frames that are sent or received
from a port. GVRP is a standards-based Layer 2 network protocol, for automatic configuration of VLAN
information on switches. It is defined in the 802.1ak amendment to 802.1Q-2005. GVRP statistics for a port
are only displayed if GVRP is enabled globally and on the port.

To view GVRP statistics and/or set the refresh rate, proceed as follows:

Step 1

Step 2

Click Status and Statistics > GVRP.
Enter the parameters.

Interface

Refresh Rate

Received - Transmitted

Select the specific interface for which GVRP statistics are to be displayed.

Select the time period that passes before the GVRP page is refreshed. The Attribute
Counter block displays the counters for various types of packets per interface. These are
displayed for Received and Transmitted packets.

Join Empty

Empty

GVRP Join Empty packets received/transmitted.

GVRP empty packets received/transmitted

Leave Empty

GVRP Leave Empty packets received/transmitted.

Join In

Leave In

Leave All

GVRP Join In packets received/transmitted.

GVRP Leave In packets received/transmitted.

GVRP Leave All packets received/transmitted. The GVRP Error Statistics section displays
the GVRP error counters.

Cisco Business 350 Series Switches Administration Guide

38

Status and Statistics

802.1X EAP

GVRP Error Statistics

Invalid Protocol ID

Invalid protocol ID errors.

Invalid Attribute Type

Invalid attribute ID errors.

Invalid Attribute Value

Invalid attribute value errors.

Invalid Attribute Length

Invalid attribute length errors.

Invalid Event

Invalid events.

Step 3

Step 4

To clear statistics counters, click Clear Interface Counters.

To view all interface statistics, click View All Interfaces Statistics to see all ports on a single page.

802.1X EAP

The 802.1x EAP page displays the Extensible Authentication Protocol (EAP) frames that are sent or received.
To view the EAP Statistics and/or set the refresh rate, proceed as follows:

Procedure

Step 1

Step 2

Step 3

Click Status and Statistics > 802.1x EAP.

Select the Interface that is polled for statistics.

Select the Refresh Rate (time period) that passes before the EAP statistics are refreshed.

The values are displayed for the selected interface.

EAPOL EAP Frames Received

Valid EAPOL frames received on the port.

EAPOL Start Frames Received

Valid EAPOL start frames received on the port.

EAPOL Logoff Frames Received

EAPOL Logoff frames received on the port.

EAPOL Announcement Frames Received

EAPOL Announcement frames received on the port.

EAPOL Announcement Request Frames Received

EAPOL Announcement Request frames received on the
port.

EAPOL Invalid Frames Received

EAPOL invalid frames received on the port.

EAPOL EAP Length Error Frames Received

EAPOL frames with an invalid Packet Body Length
received on this port.

MKPDU Frames with unrecognized CKN Received

EAP frames with unrecognized CKN received on this port.

MKPDU Invalid Frames Received

MKPDU invalid frames received on the port.

Cisco Business 350 Series Switches Administration Guide

39

ACL

Status and Statistics

Last EAPOL Frame Version

Last EAPOL Frame Source

Protocol version number attached to the most recently
received EAPOL frame.

Source MAC address attached to the most recently received
EAPOL frame.

EAPOL EAP Supplicant Frames Transmitted

EAPOL EAP Supplicant frames transmitted on the port.

EAPOL Start Frames Transmitted

EAPOL Start frames transmitted on the port.

EAPOL Logoff Frames Transmitted

EAPOL Logoff frames transmitted on the port.

EAPOL Announcement Frames Transmitted

EAPOL Announcement frames transmitted on the port.

EAPOL Announcement Request Frames Transmitted

EAPOL Announcement Request frames transmitted on the
port.

EAPOL EAP Authenticator Frames Transmitted

EAP Authenticator frames transmitted on the port.

EAPOL MKA Frames with No CKN Transmitted

MKA frames with no CKN transmitted on the port.

Step 4

To clear statistics counters:

• Click Clear Interface Counters to clear the counters of all interfaces.

• Click Refresh to refresh the counters.

• Click View All Interfaces Statistics to view the counters of all interfaces.

ACL

Procedure

Step 1

Step 2

When the ACL logging feature is enabled, an informational SYSLOG message is generated for packets that
match ACL rules. To view the interfaces on which packets are forwarded or rejected based on ACLs, follow
these steps:

Click Status and Statistics > ACL.

Select the Refresh Rate (time period in seconds) that passes before the page is refreshed. A new group of interfaces is
created for each time period.

The following information is displayed:

• Global Trapped Packet Counter—Number of packets trapped globally due to lack of resources.

• Trapped Packets - Port/LAG Based—The interfaces on which packets forwarded or rejected based on ACL rules.

• Trapped Packets - VLAN Based—The VLANs on which packets forwarded or rejected based on ACL rules.

Cisco Business 350 Series Switches Administration Guide

40

Status and Statistics

Hardware Resource Utilization

Step 3

To clear statistics counters, click Clear Counters or click Refresh to refresh the counters.

Hardware Resource Utilization

This page displays the resources used by the device, such as Access Control Lists (ACL) and Quality of
Service (QoS). Some applications allocate rules upon their initiation. Also, processes that initialize during the
system boot use some of their rules during the startup process.

To view the hardware resource utilization, click Status and Statistics > Hardware Resource Utilization.

The following fields are displayed:

• Unit No—Unit in stack for which TCAM utilization appears. This is not displayed when the device is

in not part of a stack.

• IP Entries

• In Use—Number of TCAM entries used for IP rules.

• Maximum—Number of available TCAM entries that can be used for IP rules.

• IPv4 Policy Based Routing

• In Use—Number of router TCAM entries used for IPv4 Policy-based routing

• Maximum—Maximum number of available router TCAM entries that can be used for IPv4

Policy-based routing.

• IPv6 Policy Based Routing

• In Use—Number of router TCAM entries used for IPv6 Policy-based routing

• Maximum—Maximum number of available router TCAM entries that can be used for IPv6

Policy-based routing.

• VLAN Mapping

• In Use—Number of router TCAM entries currently used for VLAN mapping

• Maximum—Maximum number of available router TCAM entries that can be used for VLAN

mapping.

• ACL and QoS Rules

• In Use—Number of TCAM entries used for ACL and QoS rules

• Maximum—Number of available TCAM entries that can be used for ACL and QoS rules.

To view the hardware resources, click the Hardware Resources Management button.

The following fields are displayed:

• Maximum IPv4 Policy-Based Routes

• Use Default—Use default values.

Cisco Business 350 Series Switches Administration Guide

41

Health and Power

Status and Statistics

• User Defined—Enter a user defined value (Range 0-32, Default 12).

• Maximum IPv6 Policy-Based Routes

• Use Default—Use default values.

• User Defined—Enter a user defined value (Range 0-32, Default 12).

• (Range 0-32, Default 12)
• Maximum VLAN-Mapping Entries

• Use Default—Use default values.

• User Defined—Enter a user defined value (Range 0-228, Default 0).

• Hardware-Based Routing: Displays whether hardware-based routing is active or inactive.

Health and Power

The Health and Power page monitors the temperature, power supply, and fan status on all relevant devices.
The fans on the device vary based on the model.

To view the settings on the Heath and Power page, navigate to Status and Statistics > Heath and Power.

Environmental Status

• Fan Status—Displays whether the fan is not available (N/A) or is available and is operating normally

(OK) or not (Failure).

• Sensor Status—Displays whether the sensor is functional (OK) or not functional (Failure).

• Temperature—Displays one of the following options:

• OK—The temperature is below the warning threshold.

• Warning—The temperature is between the warning threshold to the critical threshold.

• Critical—Temperature is above the critical threshold.

• N/A—Not relevant.

Main Power Status

• Main Power Supply Status— Displays the main power supply status.

Power Savings

• Current Green Ethernet and Port Power Savings—Current amount of the power savings on all the ports.

• Cumulative Green Ethernet and Port Power Savings—Accumulative amount of the power savings on all

the ports since the device was powered up.

Cisco Business 350 Series Switches Administration Guide

42

Status and Statistics

Health and Power

• Projected Annual Green Ethernet and Port Power Savings—Projection of the amount of the power that
will be saved on the device during one week. This value is calculated based on the savings that occurred
during the previous week.

• Current PoE Power Savings (available for PoE SKUs only)—Current amount of the PoE power saved
on ports that have PDs connected to them and on which PoE is not operational due to the Time Range
feature.

• Cumulative PoE Power Savings (available for PoE SKUs only)—Cumulative amount of the PoE power,
since the device was powered up, saved on ports which have PDs connected to them and to which PoE
is not operational due to the Time Range feature.

• Projected Annual PoE Power Savings (available for PoE SKUs only)—Yearly projected amount of PoE
power, since device was powered up, saved on ports that have PDs connected to them and to which PoE
is not operational due to the Time Range feature. The projection is based on the savings during the
previous week.

Health Table

• Unit No.—Displays the unit number in the stack.

• Fan Status— Displays the status of the fan.

• OK—Fan is operating normally.

• Failure—A fan is not operating correctly.

• N/A—Fan is not applicable for the specific model.

• Redundant Fan Status— Displays the redundant status of the fan:

• N/A—Redundant fan is not applicable for the specific model.

• Ready—Redundant fan is operational but not required.

• Active—One of the main fans is not working and this fan is replacing it.

Note

The Redundant Fan Status is only supported on certain SKUs.

• Sensor Status—The following values are possible:

• OK—Sensor is functional.

• Failure—Sensor has a failure.

• Temperature—The options are:

• OK—The temperature is below the warning threshold.

• Warning—The temperature is between the warning threshold to the critical threshold.

• Critical—Temperature is above the critical threshold.

• N/A—Not relevant.

Cisco Business 350 Series Switches Administration Guide

43

SPAN and RSPAN

Status and Statistics

SPAN and RSPAN

The SPAN feature, which is sometimes called port mirroring or port monitoring, selects network traffic for
analysis by a network analyzer. The network analyzer can be a Cisco Switch Probe device or other Remote
Monitoring (RMON) probes.

Port mirroring is used on a network device to send a copy of network packets, seen on a single device port,
multiple device ports, or an entire VLAN, to a network monitoring connection on another port on the device.
This is commonly used when monitoring of network traffic, such as for an intrusion-detection system, is
required. A network analyzer, connected to the monitoring port, processes the data packets. A packet, which
is received on a network port and assigned to a VLAN that is subject to mirroring, is mirrored to the analyzer
port even if the packet was eventually trapped or discarded. Packets sent by the device are mirrored when
Transmit (Tx) mirroring is activated.

Mirroring does not guarantee that all traffic from the source port(s) is received on the analyzer (destination)
port. If more data is sent to the analyzer port than it can support, some data might be lost.

VLAN mirroring cannot be active on a VLAN that was not manually created. For example, if VLAN 23 was
created by GVRP, port mirroring will not work on it.

RSPAN

RSPAN extends SPAN by enabling monitoring of multiple switches across your network and allowing the
analyzer port to be defined on a remote switch. In addition to the start (source) and final (destination) switches,
you can define intermediate switches over which the traffic flows. The traffic for each RSPAN session is
carried over a user-specified RSPAN VLAN that is dedicated for that RSPAN session in all participating
switches. The traffic from the source interfaces on the start device is copied to the RSPAN VLAN through a
reflector port and then forwarded over trunk ports configured in general mode on the intermediate devices to
the destination session on the final switch, which is monitoring the RSPAN VLAN. The reflector port is the
mechanism that copies packets to an RSPAN VLAN. It is a network port that handles various types of traffic.
The RSPAN VLAN must be configured on all the intermediate switches.

RSPAN VLAN

An RSPAN VLAN carries SPAN traffic between RSPAN source and destination sessions and must be defined
on the start, intermediate and final devices.

Note

A VLAN must be added to the VLAN Database using the VLAN Settings, on page 143 screen before it can
be configured as an RSPAN VLAN.

To configure a VLAN as an RSPAN VLAN, follow these steps:

Procedure

Step 1

Step 2

Click Status and Statistics > SPAN & RSPAN > RSPAN VLAN. to view the previously defined RSPAN VLAN.

To configure a VLAN as a RSPAN VLAN, select it from the RSPAN VLAN drop-down list of VLANs.

Cisco Business 350 Series Switches Administration Guide

44

Status and Statistics

Step 3

Click Apply.

SPAN Session Destinations

SPAN Session Destinations

A monitoring session consists of one or more source ports and a single destination ports. A destination port
must be configured on the start and final devices. On the start device, this is the reflector port. On the final
device, it is the analyzer port.

To add a destination port, follow these steps:

Procedure

Step 1

Step 2

Step 3

Click Status and Statistics >SPAN & RSPAN> SPAN Session Destinations.

Click Add.

Enter the following fields:

• Session ID—Select a session ID. This must match the session IDs of the source ports.

• Port—Select a port from the drop-down list.

• Destination Type—Select one of the following options:

• Local Interface—Is the destination port on the same device as the source ports (relevant to SPAN).

• Remote VLAN—Is the destination port on a different device than the source port (relevant to RSPAN).

If the Destination Type is Remote VLAN, configure the following field:

• Reflector Port—Select a unit/port that functions as a target port on the first device.

If the Destination Type is Local Interface, configure the following field:

• Network Traffic—Select to enable that traffic other than monitored traffic is possible on the port.

Step 4

Click Apply.

SPAN Session Sources

In a single local SPAN or RSPAN session source, you can monitor the port traffic, such as received (Rx),
transmitted (Tx), or bidirectional (both). The switch supports up to 8source ports per session ID.

Note

One or more SPAN or RSPAN sources must be configured on the start and final devices.

To configure the source ports to be mirrored, follow these steps:

Cisco Business 350 Series Switches Administration Guide

45

Diagnostics

Status and Statistics

Procedure

Step 1

Step 2

Step 3

Step 4

Click Status and Statistics > SPAN and RSPAN > SPAN Session Sources.

Click Add.

Select the session number from Session ID. This must be the same for all source ports and the destination port.

For SPAN or for RSPAN on the start switch, select the unit and port or VLAN from which traffic is monitored (Source
Interface). On the final switch, for RSPAN, select Remote VLAN

Step 5

In the Monitor Type field, select whether incoming, outgoing, or both types of traffic are mirrored.

• Rx and Tx—Port mirroring on both incoming and outgoing packets

• Rx—Port mirroring on incoming packets

• Tx—Port mirroring on outgoing packets

Step 6

Click Apply. The source interface for the mirroring is configured.

Diagnostics

You can use diagnostics to test and verify the functionality of the hardware components of your system
(chassis, supervisor engines, modules, and ASICs) while your device is connected to a live network. Diagnostics
consists of packet-switching tests that test hardware components and verify the data path and control signals.

Copper Test

The Copper Test page displays the results of integrated cable tests performed on copper cables by the Virtual
Cable Tester (VCT).

VCT performs two types of tests:

• Time Domain Reflectometry (TDR) technology tests the quality and characteristics of a copper cable

attached to a port. Cables of up to 140 meters long can be tested. These results are displayed in the Test
Results block of the Copper Test page.

• DSP-based tests are performed on active XG links to measure cable length. These results are displayed
in the Advanced Information block of the Copper Test page. This test can run only when the link speed
is 10G.

Preconditions to Running the Copper Test

Before running the test, do the following:

• (Mandatory) Disable Short Reach mode (see Properties, on page 136).

• (Optional) Disable EEE (see Properties, on page 136).

Use a CAT6a data cable when testing cables using (VCT).

Cisco Business 350 Series Switches Administration Guide

46

Status and Statistics

Copper Test

The test results have an accuracy within an error range of +/- 10 for advanced Testing and +/-2 for basic
testing.

Caution

When a port is tested, it is set to the Down state and communications are interrupted. After the test, the port
returns to the Up state. It is not recommended that you run the copper port test on a port you are using to run
the web-based switch configuration utility, because communications with that device are disrupted.

To test copper cables attached to ports:, follow these steps

Procedure

Step 1

Step 2

Step 3

Step 4

Click Status and Statistics > Diagnostics > Copper Test.

Select the unit and port on which to run the test.

Click Copper Test.

When the message appears, click OK to confirm that the link can go down or Cancel to abort the test. The following
fields are displayed in the Test Results block:

• Last Update—Time of the last test conducted on the port

• Test Results—Cable test results. Possible values are:

• OK—Cable passed the test.

• No Cable—Cable is not connected to the port.

• Open Cable—Cable is connected on only one side.

• Short Cable—Short circuit has occurred in the cable.

• Unknown Test Result—Error has occurred.

• Distance to Fault—Distance from the port to the location on the cable where the fault was discovered.

• Operational Port Status—Displays whether port is up or down.

The Advanced Information block (supported on some of the port types) contains the following information, which is
refreshed each time you enter the page:

• Cable Length—Provides an estimate for the length.

• Pair—Cable wire pair being tested.

• Status—Wire pair status. Red indicates fault and Green indicates status OK.

• Channel—Cable channel indicating whether the wires are straight or cross-over.

• Polarity—Indicates if automatic polarity detection and correction has been activated for the wire pair.

• Pair Skew—Difference in delay between wire pairs.

Cisco Business 350 Series Switches Administration Guide

47

Optical Module Status

Optical Module Status

Status and Statistics

The Optical Module Status page displays the operating conditions reported by the SFP (Small Form-factor
Pluggable) transceiver.

The following GE SFP (1000Mbps) transceivers are supported:

• MGBLH1: 1000BASE-LH SFP transceiver, for single-mode fiber, 1310 nm wavelength, supports up to

40 km.

• MGBLX1: 1000BASE-LX SFP transceiver, for single-mode fiber, 1310 nm wavelength, supports up to

10 km.

• MGBSX1:1000BASE-SX SFP transceiver, for multimode fiber, 850 nm wavelength, supports up to 550

m.

• MGBT1: 1000BASE-T SFP transceiver for category 5 copper wire, supports up to 100 m.

• GLC-SX-MMD - 1000BASE-SX short wavelength; with DOM

• GLC-LH-SMD - 1000BASE-LX/LH long-wavelength; with DOM

• GLC-BX-D - 1000BASE-BX10-D downstream bidirectional single fiber; with DOM

• GLC-BX-U - 1000BASE-BX10-U upstream bidirectional single fiber; with DOM

• GLC-TE - 1000BASE-T standard

The following XG SFP+ (10,000Mbps) transceivers are supported:

• Cisco SFP-10GBase-T

• Cisco SFP-10G-SR

• Cisco SFP-10G-LR

• Cisco SFP-10G-SR-S

• Cisco SFP-10G-LR-S

The following XG passive cables (Twinax/DAC) are supported:

• Cisco SFP-H10G-CU1M

• Cisco SFP-H10G-CU3M

• Cisco SFP-H10G-CU5M

To view the results of optical tests, click Status and Statistics > Diagnostics > Optical Module Status.

This page displays the following fields:

• Port—Port number on which the SFP is connected

• Description—Description of optical transceiver

• Serial Number—Serial number of optical transceiver

• PID—Product ID of the transceiver

• VID—Version ID of the transceiver

Cisco Business 350 Series Switches Administration Guide

48

Status and Statistics

Tech-Support Information

• Temperature—Temperature (Celsius) at which the SFP is operating

• Voltage—SFPs operating voltage

• Current—SFPs current consumption

• Output Power—Transmitted optical power

• Input Power—Received optical power

• Transmitter Fault—Remote SFP reports signal loss. Values are True, False, and No Signal (N/S)

• Loss of Signal—Local SFP reports signal loss. Values are True and False

• Data Ready—SFP is operational. Values are True and False

Tech-Support Information

This page provides a detailed log of the device status. This is valuable when the technical support is trying to
help a user with a problem, since it gives the output of many show commands (including debug command)
in a single command.

To view technical support information useful for debugging purposes:

Procedure

Step 1

Step 2

Click Status and Statistics > Diagnostics > Tech-Support Information.

Click Generate.

Note
Generation of output from this command may take some time. When the information is generated, you can copy it from
the text box in the screen by clicking on Select tech-support data.

RMON

Remote Networking Monitoring (RMON) enables an SNMP agent in the device to proactively monitor traffic
statistics over a given period and send traps to an SNMP manager. The local SNMP agent compares actual,
real-time counters against predefined thresholds and generates alarms, without the need for polling by a central
SNMP management platform. This is an effective mechanism for proactive management, provided that you
have set the correct thresholds relative to your network’s base line.

RMON decreases the traffic between the manager and the device since the SNMP manager does not have to
poll the device frequently for information, and enables the manager to get timely status reports, since the
device reports events as they occur.

With this feature, you can perform the following actions:

Cisco Business 350 Series Switches Administration Guide

49

Statistics

Status and Statistics

• View the current statistics (from the time that the counter values cleared). You can also collect the values
of these counters over a period of time, and then view the table of collected data, where each collected
set is a single line of the History tab.

• Define interesting changes in counter values, such as “reached a certain number of late collisions” (defines
the alarm), and then specify what action to perform when this event occurs (log, trap, or log and trap).

Statistics

The Statistics page displays detailed information regarding packet sizes and information regarding physical
layer errors. The information is displayed according to the RMON standard. An oversized packet is defined
as an Ethernet frame with the following criteria:

• Packet length is greater than MRU byte size.

• Collision event has not been detected.

• Late collision event has not been detected.

• Received (Rx) error event has not been detected.

• Packet has a valid CRC.

To view RMON statistics and/or set the refresh rate, complete the following:

Procedure

Step 1

Step 2

Step 3

Click Status and Statistics > RMON > Statistics.

Select the Interface for which Ethernet statistics are to be displayed.

Select the Refresh Rate, which is the time period that passes before the interface statistics are refreshed.

The following statistics are displayed for the selected interface.

Bytes Received

Drop Events

Packets Received

Broadcast Packets Received

Octets received, including bad packets and FCS octets, but excluding
framing bits.

Packets dropped.

Good packets received including Multicast and Broadcast packets.

Good Broadcast packets received. This number does not include
Multicast packets.

Multicast Packets Received

Good Multicast packets received.

CRC & Align Errors

CRC and Align errors that have occurred.

Undersize Packets

Oversize Packets

Fragments

Undersized packets (less than 64 octets) received.

Oversized packets (over 2000 octets) received.

Fragments (packets with less than 64 octets, excluding framing bits,
but including FCS octets) received.

Cisco Business 350 Series Switches Administration Guide

50

Status and Statistics

Jabbers

Collisions

History

Received packets that are longer than 1632 octets. This number
excludes frame bits, but includes FCS octets that had either a bad
FCS (Frame Check Sequence) with an integral number of octets
(FCS Error) or a bad FCS with a non-integral octet (Alignment
Error) number. A Jabber packet is defined as an Ethernet frame that
satisfies the following criteria:

Collisions received. If Jumbo frames are enabled, the threshold of
Jabber frames is raised to the maximum size of Jumbo frames.

Frames of 64 Bytes

Frames, containing 64 bytes that were sent or received.

Frames of 65 to 127 Bytes

Frames, containing 65-127 bytes that were sent or received.

Frames of 128 to 255 Bytes

Frames, containing 128-255 bytes that were sent or received.

Frames of 256 to 511 Bytes

Frames, containing 256-511 bytes that were sent or received.

Frames of 512 to 1023 Bytes

Frames, containing 512-1023 bytes that were sent or received.

Frames of 1024 Bytes or More

Frames, containing 1024-2000 bytes, and Jumbo Frames, that were
sent or received.

Note
If one of the fields above shows a number of errors (not 0), a Last Update time is displayed.

Step 4

To view counters in table view or graphic view:

• Click View All Interfaces Statistics to see all ports in table view.

• Click Graphic View to display these results in graphic form. In this view, you can select the Time Span for which

the results will be displayed and the type of statistic to be displayed.

History

Procedure

The RMON feature enables monitoring statistics per interface.

The History page defines the sampling frequency, amount of samples to store and the port from which to
gather the data. After the data is sampled and stored, it appears in the History Table page that can be viewed
by clicking History Table.

To enter RMON control information, complete the following:

Step 1

Click Status and Statistics > RMON > History. The fields displayed on this page are defined in the Add RMON History
page, below. The only field is that is on this page and not defined in the Add page is:

Cisco Business 350 Series Switches Administration Guide

51

Events

Status and Statistics

• Current Number of Samples-RMON is allowed by the standard not to grant all requested samples, but rather to limit
the number of samples per request. Therefore, this field represents the sample number granted to the request that is
equal or less than the requested value.

Step 2

Step 3

Click Add.

Enter the parameters.

Step 4

Step 5

Events

Procedure

Step 1

Step 2

Step 3

• New History Entry-Displays the number of the new History table entry.

• Source Interface-Select the type of interface from which the history samples are to be taken.

• Max No. of Samples to Keep-Enter the number of samples to store.

• Sampling Interval-Enter the time in seconds that samples are collected from the ports. The field range is 1-3600.

• Owner-Enter the RMON station or user that requested the RMON information.

Click Apply. The entry is added to the History Control Table page, and the Running Configuration file is updated.

Click History Table to view the actual statistics.

You can control the occurrences that trigger an alarm and the type of notification that occurs. This is performed
as follows:

• Events Page—Configures what happens when an alarm is triggered. This can be any combination of logs

and traps.

• Alarms Page—Configures the occurrences that trigger an alarm.

To define RMON events, complete the following steps:

Click Status and Statistics > RMON > Events.

Click Add.
Enter the parameters.

• Event Entry Number—Displays the event entry index number for the new entry.

• Community—Enter the SNMP community string to be included when traps are sent (optional).

• Description—Enter a name for the event. This name is used in the Add RMON Alarm page to attach an alarm to an

event.

• Notification Type—Select the type of action that results from this event. Values are:

• None—No action occurs when the alarm goes off.

• Log (Event Log Table)—Add a log entry to the Event Log table when the alarm is triggered.

• Trap (SNMP Manager and Syslog Server)—Send a trap to the remote log server when the alarm goes off.

Cisco Business 350 Series Switches Administration Guide

52

Status and Statistics

Alarms

• Log and Trap—Add a log entry to the Event Log table and send a trap to the remote log server when the alarm

goes off.

• Owner—Enter the device or user that defined the event.

Step 4

Step 5

Click Apply. The RMON event is saved to the Running Configuration file.

Click Event Log Table to display the log of alarms that have occurred and that have been logged (see description below).

Alarms

Procedure

RMON alarms provide a mechanism for setting thresholds and sampling intervals to generate exception events
on counters or any other SNMP object counter maintained by the agent. Both the rising and falling thresholds
must be configured in the alarm. After a rising threshold is crossed, no rising events are generated until the
companion falling threshold is crossed. After a falling alarm is issued, the next alarm is issued when a rising
threshold is crossed.

One or more alarms are bound to an event, which indicates the action to be taken when the alarm occurs.

Alarm counters can be monitored by either absolute values or changes (delta) in the counter values.

To enter RMON alarms, complete the following steps:

Step 1

Click Status and Statistics > RMON > Alarms.

All previously defined alarms are displayed. The fields are described in the Add RMON Alarm page below. In addition
to those fields, the following field appears:

• Counter Value—Displays the value of the statistic during the last sampling period.

Step 2

Step 3

Click Add.

Enter the parameters.

Alarm Entry

Displays the alarm entry number.

Interface

Select the type of interface for which RMON statistics are displayed.

Counter Name

Select the MIB variable that indicates the type of occurrence measured.

Sample Type

Select the sampling method to generate an alarm. The options are:

• Absolute—If the threshold is crossed, an alarm is generated.

• Delta—Subtracts the last sampled value from the current value The difference in the

values is compared to the threshold. If the threshold was crossed, an alarm is
generated.

Rising Threshold

Enter the value that triggers the rising threshold alarm.

Cisco Business 350 Series Switches Administration Guide

53

sFlow

Status and Statistics

Rising Event

Select an event to be performed when a rising event is triggered. Events are configured
in the Events, on page 52.

Falling Threshold

Enter the value that triggers the falling threshold alarm.

Falling Event

Select an event to be performed when a falling event is triggered.

Startup Alarm

Select the first event from which to start generation of alarms. Rising is defined by crossing
the threshold from a low-value threshold to a higher-value threshold.

• Rising Alarm—A rising value triggers the rising threshold alarm.

• Falling Alarm—A falling value triggers the falling threshold alarm.

• Rising and Falling—Both rising and falling values trigger the alarm.

Interval

Owner

Enter the alarm interval time in seconds.

Enter the name of the user or network management system that receives the alarm.

Step 4

Click Apply. The RMON alarm is saved to the Running Configuration file.

sFlow

The sFlow monitoring system consists of an sFlow agent (embedded in a switch or router or in a stand alone
probe) and a central data collector, known as the sFlow collector. The sFlow agent uses sampling technology
to capture traffic and statistics from the device it is monitoring. sFlow datagrams are used to forward the
sampled traffic and statistics to an sFlow collector for analysis.

sFlow V5 defines:

• How traffic is monitored.

• The sFlow MIB that controls the sFlow agent.

• The format of the sample data used by the sFlow agent when forwarding data to a central data collector.
The device provides support for two types of sFlow sampling: flow sampling and counters sampling.
The following counters sampling is performed according to sFlow V5 (if supported by the interface):

• Generic interface counters (RFC 2233)

• Ethernet interface counters (RFC 2358)

sFlow Receivers

The sFlow receiver defines the set of objects used to maintain a sFlow session between a sFlow Agent and a
sFlow Collector. To set the sFlow receiver parameters, follow these steps:

Cisco Business 350 Series Switches Administration Guide

54

Status and Statistics

sFlow Interface Settings

Procedure

Step 1

Step 2

Click Status and Statistics > sFlow > sFlow Receivers.

Enter the following fields:

• IPv4 Source Interface—Select the IPv4 source interface.

Note
If the Auto option is selected, the system takes the source IP address from the IP address defined on the outgoing
interface.

• IPv6 Source Interface— Select the IPv6 source interface

Step 3

To add a receiver (sFlow analyzer), click Add and select one of the predefined sampling definition indices in Receiver
Index.

Step 4

Enter the receiver’s address fields:

• Receiver Definition—Select whether to specify the sFlow server By IP address or By name.

If Receiver Definition is By IP Address:

• IP Version—Select whether an IPv4 or an IPv6 address for the server is used.

• IPv6 Address Type—Select the IPv6 address type (if IPv6 is used). The options are:

• Link Local —The IPv6 address uniquely identifies hosts on a single network link. A link local address has a
prefix of FE80, is not routable, and can be used for communication only on the local network. Only one link
local address is supported. If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable from other networks.

• Link Local Interface—Select the link local interface (if IPv6 is used) from the list.

Step 5

Enter the following fields:

• Receiver IP Address/Name—Enter the IP address or the name of the receiver, whichever is relevant.

• Port—Port to which SYSLOG messages are sent.

• Maximum Datagram Size—Maximum number of bytes that can be sent to the receiver in a single sample datagram

(frame).

Step 6

Click Apply.

sFlow Interface Settings

To sample datagrams or counters from a port, the port must be associated with a receiver. sFlow port settings
can be configured only after a receiver has been defined in the sFlow Receivers, on page 54 pages.

To enable sampling and configure the port from which to collect the sFlow information, follow these steps:

Cisco Business 350 Series Switches Administration Guide

55

sFlow Statistics

Procedure

Status and Statistics

Step 1

Click Status and Statistics > sFlow > sFlow Interface Settings.

The sFlow interface settings are displayed.

Step 2

To associate an sFlow receiver with a port, select a port, click Edit, and enter the fields:

• Interface—Select the unit/port from which information is collected.

• (Flow Sampling) State—Enable/disable flow sampling.

• Sampling Rate—If x is entered, a flow sample will be taken for each x frame.

• Maximum Header Size (Bytes)—Maximum number of bytes that should be copied from a sampled packet.

• Receiver Index—Select one of the indices that was defined in the sFlow Receivers, on page 54 pages.

• (Counter Sampling) State—Enable/disable counters sampling.

• Sampling Interval (Sec.)—If x is entered, this specifies that a counter sample will be taken for each x seconds.

• Receiver Index—Select one of the indices that was defined in these sFlow Receivers, on page 54 pages.

Step 3

Click Apply.

sFlow Statistics

To view the sFlow statistics, complete the following:

Procedure

Step 1

Step 2

Click Status and Statistics > sFlow > sFlow Statistics.

Select the Refresh Rate from the drop-down menu.

The following sFlow statistics per interface are displayed.

• Port—Port for which sample was collected.

• Packets Sampled—Number of packets sampled.

• Datagrams Sent to Receiver—Number of sFlow sampling packets sent.

View Log

The device can write to the following logs:

Cisco Business 350 Series Switches Administration Guide

56

Status and Statistics

RAM Memory

• Log in RAM (cleared during reboot).

• Log in Flash memory (cleared only upon user command).

You can configure the messages that are written to each log by severity, and a message can go to more than
one log, including logs that reside on external SYSLOG servers.

RAM Memory

The RAM Memory page displays all messages that are saved in the RAM (cache) in chronological order. All
entries are stored in the RAM log.

Pop-Up SYSLOG Notifications

When a new SYSLOG message is written to the RAM log file, a notification is displayed on the web GUI
showing its contents. The web GUI polls the RAM log every 10 seconds. Syslog notifications pop-ups for all
SYSLOGs created in the last 10 seconds appear at the bottom right of the screen.

If more than 7 pop-up notifications are displayed, a summary pop-up is displayed. This pop-up states how
many SYSLOG notifications aren’t displayed. It also contains a button that enables closing all of the displayed
pop-ups.

To view log entries, click Status and Statistics > View Log > RAM Memory.

The following are displayed at the top of the page:

• Alert Icon Blinking—Toggles between disable and enable.

• Pop-Up Syslog Notifications—Enables receiving pop-up SYSLOGs as described above.

• Current Logging Threshold—Specifies the levels of logging that are generated. This can be changed by

clicking Edit by the field’s name.

This page contains the following fields for every log file:

• Log Time—Time when message was generated.

• Severity—Event severity

• Description—Message text describing the event

To clear the log messages, click Clear Logs.

Flash Memory

The Flash Memory page displays the messages that stored in the Flash memory, in chronological order. The
minimum severity for logging is configured in the Log Settings, on page 71. Flash logs remain when the
device is rebooted. You can clear the logs manually.

To view the Flash logs, click Status and Statistics > View Log > Flash Memory.

The Current Logging Threshold specifies the levels of logging that are generated. This can be changed by
clicking Edit by the field’s name.

This page contains the following fields for each log file:

• Log Index—Log entry number

Cisco Business 350 Series Switches Administration Guide

57

Flash Memory

Status and Statistics

• Log Time—Time when message was generated.

• Severity—Event severity

• Description—Message text describing the event

To clear the messages, click Clear Logs. The messages are cleared.

Cisco Business 350 Series Switches Administration Guide

58

C H A P T E R 7

Administration

This chapter contains the following sections:

• System Settings, on page 59
• Console Settings , on page 60
• Stack Management, on page 61
• User Accounts, on page 62
• Idle Session Timeout, on page 63
• Time Settings, on page 63
• System Log, on page 70
• File Management, on page 73
• Cisco Business Dashboard Settings, on page 81
• Plug-n-Play (PNP), on page 84
• Reboot, on page 90
• Hardware Resources, on page 91
• Discovery Bonjour, on page 92
• Discovery - LLDP, on page 92
• Discovery - CDP, on page 108
• Locate Device, on page 115
• Ping, on page 115
• Traceroute, on page 117

System Settings

The system setting page allows you customize the settings on your switch. You can configure the following:

Procedure

Step 1

Step 2

Click Administration > System Settings.

View or modify the system settings.

• System Description—Displays a description of the device.

• System Location—Enter the physical location of the device.

Cisco Business 350 Series Switches Administration Guide

59

Console Settings

Administration

• System Contact—Enter the name of a contact person.

• Host Name—Select the host name of this device. This is used in the prompt of CLI commands:

• Use Default—The default hostname (System Name) of these switches is: switch123456, where 123456 represents

the last three bytes of the device MAC address in hex format.

• User Defined—Enter the hostname. Use only letters, digits, and hyphens. Host names can’t begin or end with
a hyphen. No other symbols, punctuation characters, or blank spaces are permitted (as specified in RFC1033,
1034, 1035).

• Custom Banner Settings—The following banners can be set:

• Login Banner—Enter text to display on the Login page before login. Click Preview to view the results.

• Welcome Banner—Enter text to display on the Login page after login. Click Preview to view the results.

Note
When you define a login banner from the web-based configuration utility, it also activates the banner for the
CLI interfaces (Console, Telnet, and SSH).

The banner can contain up to 1000 characters. After 510 characters, press <Enter> to continue.

Step 3

Click Apply to save the values in the Running Configuration file.

Console Settings

Note

The Console Setting is only available in the Advanced Mode view.

The console port speed can be set to one of the following speeds: 9600, 19200, 38400, 57600, and 115200 or
to Auto Detection. If Auto Detection is selected, the device detects console speed automatically. When Auto
Detection is not enabled, the console port speed is automatically set to the last speed that was set manually at
(115,200 by default). When Auto Detection is enabled but the console baud-rate has not yet been discovered,
the system uses speed 115,200 for displaying text (for example, the boot-up information). After Auto Detection
is enabled in the Console Settings page, it can be activated by connecting the console to the device and pressing
the Enter key twice. The device detects the baud rate automatically.

To enable Auto Detection or to manually set the baud rate of the console, follow these steps:

Procedure

Step 1

Step 2

Click Administration > Console Settings.
Select one of the following options in the Console Port Baud Rate field:

• Auto Detection—The console baud rate is detected automatically.

• Static—Select one of the available speeds.

Cisco Business 350 Series Switches Administration Guide

60

Stack Management

Administration

Step 3

Click Apply.

Stack Management

Note

Only certain models have stacking capabilities.

To manage the stack, complete the following steps:

Procedure

Step 1

Click Administration > Stack Management.

• Stack Mode—Displays one of the following options:

• Native Stacking—Device is part of a stack in which all of the units are of the same type.

• Hybrid Stacking—Device is part of a stack that can consist of multiple switches within the same series.

• Stack Topology—Displays whether the topology of the stack is chain or ring.

• Stack Active Unit—Displays the unit ID of the active unit of the stack.

Stack Topology View

This view provides a graphical view of the device. Hovering over it displays the unit number, its function in the stack
and the devices that it is connected to in the stack and through which stacking ports.

Unit View and Stack Port Configuration

When you click on a specific device in the Stack Topology View, a graphical view of the device is seen.

Step 2

To select stack ports for a device:

a. Click a device in the Stack Topology View. The ports on this device are displayed in the Unit View and Stack Port

Configuration.

b. When you hover over a port, a tool tip displays the stacking port number, unit that it is connected to (if there is one),

the port speed and its connection status.

Step 3

To configure unit ID after reset for devices in the stack, click the device in the Stack Topology View, and enter the
following field:

• Unit ID After Reset—Select a unit ID or select Auto to have the unit ID be assigned by the system.

• Unit x Stack Connection Speed—Displays the speed of the stack connection.

Step 4

Click Apply and Reboot. The parameters are copied to the Running Configuration file and the stack is rebooted.

Cisco Business 350 Series Switches Administration Guide

61

User Accounts

User Accounts

Administration

The User Accounts page enables entering additional users that are permitted to access to the device (read-only
or read-write) or changing the passwords of existing users. A user accessing the device for the first time uses
the cisco/cisco username and password. After providing the default credentials, you’re prompted to replace
the default level 15 username and password, and you must provide a new username and password. The new
password must comply with the password complexity rules.

To add a new user, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click Administration > User Accounts.

In the Password Recovery Service, check Enable to enable password recovery.

Click Add to add a new user or click Edit to modify a user and/or the password.

Enter the parameters.

• User Name—Enter a new username from 0 through 20 characters. UTF-8 characters aren’t permitted.

• Current Password— This will appear if editing the password for an existing user.
• Suggest Password— Click to auto generate a password.
• Password—Enter a password (UTF-8 characters aren’t permitted).

Note
Please refer to the password complexity rule section in Login Settings, on page 262 before creating a password.

Note
The password entered by the user is compared to a list of well known common passwords. If the password contains
words from this list, the password will be rejected and a new one will need to be entered.

• Confirm Password—Enter the password again.

• Password Strength Meter—Displays the strength of password.

• User Level—Select the privilege level of the user.

• Read-Only CLI Access (1)—User can’t access the GUI and can only access CLI commands that don’t change

the device configuration.

• Read/Limited Write CLI Access (7)—User can’t access the GUI and can only access some CLI commands that

change the device configuration. See the CLI Reference Guide for more information.

• Read/Write Management Access (15)—User can access the GUI and can configure the device.

Step 5

Click Apply. The user is added to the Running Configuration file of the device.

Note

Cisco Business 350 Series Switches Administration Guide

62

Administration

Idle Session Timeout

The password is stored in the configuration files as a non-recoverable hash using Password Based Key Derivation Function
2 (PBKDF2) with Secure Hash Algorithm, and SHA-512 as the hashing algorithm.

Idle Session Timeout

The Idle Session Timeout configures the time intervals that the management sessions can remain idle before
they timeout.

To set the idle session timeout for various types of sessions, complete these steps:

Procedure

Step 1

Step 2

Click Administration > Idle Session Timeout.

Select the timeout for each type of session from the list.

• HTTP Session Timeout

• HTTPS Session Timeout

• Console Session Timeout

• Telnet Session Timeout

• SSH Session Timeout

The default timeout value is 10 minutes. You must log in again to reestablish one of the chosen sessions.

Step 3

Click Apply to set the configuration settings on the device.

Time Settings

Note

This setting is only available in the Advanced Mode view.

Synchronized system clocks provide a frame of reference between all devices on the network. Network time
synchronization is critical because every aspect of managing, securing, planning, and debugging a network
involves determining when events occur. Without synchronized clocks, accurately correlating log files between
devices when tracking security breaches or network usage is impossible. Synchronized time also reduces
confusion in shared file systems, as it is important for the modification times to be consistent, regardless of
the machine on which the file systems reside. For these reasons, it is important that the time configured on
all of the devices on the network is accurate.

Cisco Business 350 Series Switches Administration Guide

63

System Time

Administration

Real Time Clock

Some devices have an internal self-sufficient Real Time Clock (RTC) component that keeps time even when
the device is shut down and not connected to a power source. This internal clock is initialized during
manufacturing and can be updated by the time features of the device when the software clock is set. When a
device with a functional RTC component starts up, the system clock is set to the time and date of the RTC.
The RTC component is updated whenever the system clock is changed - either dynamically by the Simple
Network Time Protocol (SNTP), or manually.

Note

The device supports SNTP, and when enabled, the device dynamically synchronizes the device time with time
from an SNTP server. The device operates only as an SNTP client, and cannot provide time services to other
devices.

System Time

Use the System Time page to select the system time source. If the source is manual, you can enter the time
here.

Caution

If the system time is set manually and the device is rebooted, the manual time settings must be reentered.

To define system time, complete these steps:

Procedure

Step 1

Click Administration > Time Settings > System Time.

The following fields are displayed:

• Actual Time— Actual system time on the device.

• Last Synchronized Server—Address, stratum and type of the SNTP server from which system time was last taken.

Step 2

Enter the following parameters:

• Clock Source Settings—Select the source used to set the system clock.

• Main Clock Source (SNTP Servers)—If this is enabled, the system time is obtained from an SNTP server. To
use this feature, you must also configure a connection to an SNTP server in the SNTP Multicast/Anycast, on
page 67.

• Alternate Clock Source (PC via active HTTP/HTTPS sessions)— Check Enable to enable the date and time

from the configuring computer using the HTTP protocol.

Note
The Clock Source Setting must be set to either of the above for RIP MD5 authentication to work.

• Manual Settings—Set the date and time manually. The local time is used when there’s no alternate source of time,

such as an SNTP server:

Cisco Business 350 Series Switches Administration Guide

64

Administration

System Time

• Date—Enter the system date.

• Local Time—Enter the system time.

• Time Zone Settings—The local time is used via the DHCP server or Time Zone offset.

• Get Time Zone from DHCP—Select to enable dynamic configuration of the time zone and the DST from the
DHCP server. Whether one or both of these parameters can be configured depends on the information found
in the DHCP packet. If this option is enabled, DHCP client must be enabled on the device.

• Time Zone from DHCP—Displays the acronym of the time zone configured from the DHCP server. This

acronym appears in the Actual Time field.

• Time Zone Offset—Select the difference in hours between Greenwich Mean Time (GMT) and the local time.
For example, the Time Zone Offset for Paris is GMT +1, while the Time Zone Offset for New York is GMT
– 5.

• Time Zone Acronym—Enter a name that represents this time zone. This acronym appears in the Actual Time

field.

• Daylight Savings Settings—Select how DST is defined:

• Daylight Savings—Select to enable Daylight Saving Time.

• Time Set Offset—Enter the number of minutes offset from GMT ranging 1—1440. The default is 60.

• Daylight Savings Type—Click one of the following:

USA—DST is set according to the dates used in the USA.

European—DST is set according to the dates used by the European Union and other countries that use this
standard.

By dates—DST is set manually, typically for a country other than the USA or a European country. Enter the
parameters described below.

Recurring—DST occurs on the same date every year.

Selecting By Dates allows customization of the start and stop of DST:

• From—Day and time that DST starts.

• To—Day and time that DST ends.

Step 3

Selecting Recurring allows different customization of the start and stop of DST:

• From—Date when DST begins each year.

• Day—Day of the week on which DST begins every year.

• Week—Week within the month from which DST begins every year.

• Month—Month of the year in which DST begins every year.

• Time—The time at which DST begins every year.

• To—Date when DST ends each year. For example, DST ends locally every fourth Friday in October at 5:00 a.m..

The parameters are:

Cisco Business 350 Series Switches Administration Guide

65

SNTP Unicast

Administration

• Day—Day of the week on which DST ends every year.

• Week—Week within the month from which DST ends every year.

• Month—Month of the year in which DST ends every year.

• Time—The time at which DST ends every year.

Step 4

Click Apply. The system time values are written to the Running Configuration file.

SNTP Unicast

SNTP synchronizes a computer's system time with a server that has already been synchronized by a source
such as a satellite receiver or modem. SNTP supports unicast, multicast and anycast operating modes. In
unicast mode, the client sends a request to a dedicated server by referencing its unicast address.Up to 16
Unicast SNTP servers can be configured.

Note

The Main Clock Source (SNTP Servers) System Time, on page 64 must be enable for SNTP Client Unicast
to operate.

To add a Unicast SNTP server, follow these steps:

Procedure

Step 1

Step 2

Click Administration > Time Settings > SNTP Unicast.

Configure the following fields:

SNTP Client Unicast

Select to enable the device to use SNTP-predefined Unicast clients with Unicast SNTP
servers.

IPv4 Source Interface

Select the IPv4 interface used for communication with the SNTP server.

IPv6 Source Interface

Select the IPv6 interface used for communication with the SNTP server.

Note
If the Auto option is selected, the system takes the source IP address from the IP address
defined on the outgoing interface.

Step 3

Click Add to add a Unicast SNTP server.

Note
To remove all user-defined SNTP servers, click Restore Default Servers.

Step 4

Enter the following parameters:

Server Definition

Select the SNTP server to be identified by its IP address or by name from the list.

Cisco Business 350 Series Switches Administration Guide

66

Administration

SNTP Multicast/Anycast

IP Version

Select the version of the IP address: Version 6 or Version 4.

IPv6 Address Type

Select the IPv6 address type (if IPv6 is used). The options are:

• Link Local—The IPv6 address uniquely identifies hosts on a single network link. A

link local address has a prefix of FE80, isn’t routable, and can be used for
communication only on the local network. Only one link local address is supported.
If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable

from other networks.

Link Local Interface

Select the link local interface (if IPv6 Address Type Link Local is selected) from the list.

SNTP Server IP
Address/Name

Poll Interval

Enter the SNTP server IP address or name. The format depends on which address type
was selected.

Select to enable polling of the SNTP server for system time information. All NTP servers
that are registered for polling are polled, and the clock is selected from the server with
the lowest stratum level that is reachable. The server with the lowest stratum is considered
to be the primary server. The server with the next lowest stratum is a secondary server,
and so forth. If the primary server is down, the device polls all servers with the polling
setting enabled, and selects a new primary server with the lowest stratum.

Authentication

Select the check box to enable authentication.

Authentication Key ID

If authentication is enabled, select the value of the key ID.

Step 5

Click Apply. The STNP server is added, and you are returned to the main page.

SNTP Multicast/Anycast

Note

This setting is only available in the Advanced Mode view.

Note

The Main Clock Source (SNTP Servers) System Time, on page 64 must be enable for SNTP Client Unicast
to operate.

To enable receiving SNTP packets from all servers on the subnet and/or to enable transmitting time requests
to SNTP servers, follow these steps:

Procedure

Step 1

Click Administration > Time Settings > SNTP Multicast/Anycast.

Cisco Business 350 Series Switches Administration Guide

67

SNTP Authentication

Administration

Select from the following options:

Option

Description

SNTP IPv4 Multicast Client Mode
(Client Broadcast Reception)

Select to receive system time IPv4 Multicast transmissions from any SNTP
server on the subnet.

SNTP IPv6 Multicast Client Mode
(Client Broadcast Reception)

Select to receive system time IPv6 Multicast transmissions from any SNTP
server on the subnet.

SNTP IPv4 Anycast Client Mode
(Client Broadcast Transmission)

Select to transmit SNTP IPv4 synchronization packets requesting system time
information. The packets are transmitted to all SNTP servers on the subnet.

SNTP IPv6 Anycast Client Mode
(Client Broadcast Transmission)

Select to transmit SNTP IPv6 synchronization packets requesting system time
information. The packets are transmitted to all SNTP servers on the subnet.

Step 2

Click Add to select the interface for SNTP.

Select an interface and configure the settings.

Step 3

Click Apply to save the settings to the Running Configuration file.

SNTP Authentication

Note

This setting is only available in the Advanced Mode view.

SNTP clients can authenticate responses by using HMAC-MD5. An SNTP server is associated with a key.
This is used as input together with the response itself to the MD5 function; the result of the MD5 is also
included in the response packet. The SNTP Authentication page enables configuration of the authentication
keys that are used when communicating with an SNTP server.

The authentication key is created on the SNTP server in a separate process that depends on the SNTP server
type. Consult with the SNTP server system administrator for more information.

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Click Administration > Time Settings > SNTP Authentication.

Select SNTP Authentication to support authentication of an SNTP session between the device and an SNTP server.

Click Apply to update the device.

Click Add.

Enter the following parameters:

• Authentication Key ID—Enter the number used to identify this SNTP authentication key internally.

• Authentication Key (Encrypted)—Enter the key used for authentication (up to eight characters) in encrypted format.

The SNTP server must send this key for the device to synchronize to it.

Cisco Business 350 Series Switches Administration Guide

68

Administration

Time Range

• Authentication Key (Plaintext)—Enter the key used for authentication (up to eight characters) in plaintext format.

The SNTP server must send this key for the device to synchronize to it.

• Trusted Key—Select to enable the device to receive synchronization information only from a SNTP server by using

this authentication key.

Step 6

Click Apply. The SNTP Authentication parameters are written to the Running Configuration file.

Time Range

Time ranges can be defined and associated with the following types of commands, so that they are applied
only during that time range:

• Port Stat

• Time-Based PoE

There are two types of time ranges:

• Absolute—This type of time range begins on a specific date or immediately and ends on a specific date

or extends infinitely. It is created in the Time Range pages. A periodic element can be added to it.

• Periodic—This type of time range contains a time range element that is added to an absolute range, and

begins and ends on a periodic basis. It is defined in the Periodic Range pages.

If a time range includes both absolute and periodic ranges, the process associated with it is activated only if
both absolute start time and the periodic time range have been reached. The process is deactivated when either
of the time ranges are reached. The device supports a maximum of 20 absolute time ranges.

To ensure that the time range entries take effect at the desired times, the system time must be set.The time-range
feature can be used for the following:

• Limit access of computers to the network during business hours (for example), after which the network
ports are locked, and access to the rest of the network is blocked (see Configuring Ports and Configuring
LAG Settings)

• Limit PoE operation to a specified period.

Add these descriptions for time range

Procedure

Step 1

Step 2

Step 3

Click Administration > Time Settings > Time Range.

In the Time Range Table, click Add to add a new time range or Edit or Delete to edit or delete an existing one.
To add a new time range, click Add and configure the following:

• Time Range Name—Enter a name for your time range

• Absolute Starting Time—Select Immediate or enter a date and time.

• Absolute Ending Time—Select Infinite or enter a date and time

Cisco Business 350 Series Switches Administration Guide

69

Recurring Time Range

Administration

Step 4

Click Apply to apply the new time range settings.

Recurring Time Range

Note

This setting is only available in the Advanced Mode view.

A recurring time element can be added to an absolute time range. This limits the operation to certain time
periods within the absolute range.

To add a recurring time range element to an absolute time range:

Procedure

Step 1

Click Administration > Time Settings > Recurring Range.

The existing recurring time ranges are displayed (filtered per a specific, absolute time range.)

Step 2

Step 3

Step 4

Select the absolute time range to which to add the recurring range.

To add a new recurring time range, click Add.

Enter the following fields:

• Recurring Starting Time—Enter the day of the week, and time that the Time Range begins.

• Recurring Ending Time—Enter the day of the week, and time that the Time Range ends.

Step 5

Click Apply.

System Log

This section describes the system logging, which enables the device to generate multiple independent logs.
Each log is a set of messages describing system events.

The device generates the following local logs:

• Log sent to the console interface.

• Log written into a cyclical list of logged events in the RAM and erased when the device reboots.

• Log written to a cyclical log-file saved to the Flash memory and persists across reboots.

In addition, you can send messages to remote SYSLOG servers in the form of SNMP traps and SYSLOG
messages.

Cisco Business 350 Series Switches Administration Guide

70

Administration

Log Settings

Log Settings

Note

The Console Setting is only available in the Advanced Mode view)

You can select the events to be logged by severity level. Each log message has a severity level marked with
the first letter of the severity level concatenated with a dash (-) on each side (except for Emergency that is
indicated by the letter F). For example, the log message "%INIT-I-InitCompleted: … " has a severity level
of I, meaning Informational.

The event severity levels are listed from the highest severity to the lowest severity, as follows:

• Emergency—System is not usable.

• Alert—Action is needed.

• Critical—System is in a critical condition.

• Error—System is in error condition.

• Warning—System warning has occurred.

• Notice—System is functioning properly, but a system notice has occurred.

• Informational—Device information.

• Debug—Detailed information about an event.

You can select different severity levels for RAM and Flash logs. These logs are displayed in the RAM Memory,
on page 57 and Flash Memory, on page 57, respectively.

Selecting a severity level to be stored in a log causes all of the higher severity events to be automatically
stored in the log. Lower severity events are not stored in the log. For example, if Warning is selected, all
severity levels that are Warning and higher are stored in the log (Emergency, Alert, Critical, Error, and
Warning). No events with severity level below Warning are stored (Notice, Informational, and Debug).

To set global log parameters, complete the following steps:

Procedure

Step 1

Step 2

Click Administration > System Log > Log Settings.

Enter the parameters.

Logging

Select to enable message logging.

Syslog Aggregator

Select to enable the aggregation of SYSLOG messages and traps. If enabled, identical
and contiguous SYSLOG messages and traps are aggregated over the specified Max.
Aggregation Time and sent in a single message. The aggregated messages are sent in the
order of their arrival. Each message states the number of times it was aggregated.

Max. Aggregation Time

Enter the interval of time that SYSLOG messages are aggregated.

Cisco Business 350 Series Switches Administration Guide

71

Remote Logging Settings

Administration

Originator Identifier

Enables adding an origin identifier to SYSLOG messages. The options are:

• None—Do not include the origin identifier in SYSLOG messages.

• Hostname—Include the system host name in SYSLOG messages.

• IPv4 Address—Include the IPv4 address of the sending interface in SYSLOG

messages.

• IPv6 Address—Include the IPv6 address of the sending interface in SYSLOG

messages.

• User Defined—Enter a description to be included in SYSLOG messages.

RAM Memory Logging

Select the severity levels of the messages to be logged to the RAM.

Flash Memory Logging

Select the severity levels of the messages to be logged to the Flash memory.

Step 3

Click Apply. The Running Configuration file is updated.

Remote Logging Settings

The Remote Log Servers page enables defining remote SYSLOG servers to which log messages are sent. For
each server, you can configure the severity of the messages that it receives.

To define SYSLOG servers, follow these steps:

Procedure

Step 1

Step 2

Click Administration > System Log > Remote Log Servers.

Note
This setting is only available in the Advanced Mode view)

Enter the following fields:

• IPv4 Source Interface—Select the source interface whose IPv4 address will be used as the source IPv4 address of

SYSLOG messages sent to SYSLOG servers.

• IPv6 Source Interface—Select the source interface whose IPv6 address will be used as the source IPv6 address of

SYSLOG messages sent to SYSLOG servers.

Note
If the Auto option is selected, the system takes the source IP address from the IP address defined on the outgoing
interface.

Information is described for each previously configured log server. The fields are described below in the Add page.

Step 3

Step 4

Click Add.

Enter the parameters.

Cisco Business 350 Series Switches Administration Guide

72

Administration

File Management

Server Definition

Select whether to identify the remote log server by IP address or name.

IP Version

Select the supported IP format.

IPv6 Address Type

Select the IPv6 address type (if IPv6 is used). The options are:

• Link Local—The IPv6 address uniquely identifies hosts on a single network link. A

link local address has a prefix of FE80::/10, isn’t routable, and can be used for
communication only on the local network. Only one link local address is supported.
If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable

from other networks.

Link Local Interface

Select the link local interface (if IPv6 Address Type Link Local is selected) from the list.

Log Server IP Address/Name

Enter the IP address or domain name of the log server.

UDP Port

Facility

Enter the UDP port to which the log messages are sent.

Select a facility value from which system logs are sent to the remote server. Only one
facility value can be assigned to a server. If a second facility code is assigned, the first
facility value is overridden.

Description

Enter a server description.

Minimum Severity

Select the minimum level of system log messages to be sent to the server.

Step 5

Click Apply. The Add Remote Log Server page closes, the SYSLOG server is added, and the Running Configuration
file is updated.

File Management

A File Management System is an application that is used to store, arrange and access the files that are on your
device. The system files are files that contain information, such as: configuration information or firmware
images. Generally, every file under the flash://system/ folder is a system file. Various actions can be performed
with these files, such as: selecting the firmware file from which the device boots, modifying various types of
configuration files internally on the device, or copying files to or from an external device, such as an external
server.

The following are some of the types of files are found on the device:

• Running Configuration—Contains the parameters currently being used by the device to operate. This

file is modified when you change parameter values on the device. If the device is rebooted, the Running
Configuration is lost. To preserve any changes you made to the device, you must save the Running
Configuration to the Startup Configuration, or another file type.

• Startup Configuration—The parameter values that saved by copying another configuration (usually the
Running Configuration) to the Startup Configuration. The Startup Configuration is retained in Flash and

Cisco Business 350 Series Switches Administration Guide

73

Firmware Operations

Administration

is preserved when the device is rebooted. At this time, the Startup Configuration is copied to RAM and
identified as the Running Configuration.

• Mirror Configuration—A copy of the Startup Configuration, created by the device when the following

conditions exist:

• The device has been operating continuously for 24 hours.

• No configuration changes have been made to the Running Configuration in the previous 24 hours.

• The Startup Configuration is identical to the Running Configuration.

Only the system can copy the Startup Configuration to the Mirror Configuration. However, you can
copy from the Mirror Configuration to other file types or to another device.

• Backup Files—Manual copies of a files used for protection against system shutdown or for the maintenance
of a specific operating state. For instance, you can copy the Mirror Configuration, Startup Configuration,
or Running Configuration to a Backup file. The Backup exists in Flash or on a PC or USB drive and is
preserved if the device is rebooted.

• Firmware—The program that controls the operations and functionality of the device. More commonly

referred to as the image.

• Language File—The dictionary that enables the web-based configuration utility windows to be displayed

in the selected language.

• Logging File—SYSLOG messages stored in Flash memory.

Firmware Operations

The Firmware Operations page can be used to:

• Update or backup the firmware image

• Swap the active image.

The software images of the units in a stack must be identical to ensure proper stack operations. Stack units
can be upgraded in any one of the following ways.

Procedure

Step 1

Click Administration > File Management > Firmware Operations.

The following fields are displayed:

• Active Firmware File—Displays the current, active firmware file.

• Active Firmware Version—Displays the version of the current, active firmware file.

Step 2

Select the Operation Type from the following options:

• Update Firmware

• Backup Firmware

Cisco Business 350 Series Switches Administration Guide

74

Administration

Firmware Operations

• Swap Image

Step 3

Select the Copy Method from the following options:

HTTP/HTTPS

For HTTP/HTTPS, enter the file name in the File Name field, or browse to locate and
select the file.

USB

TFTP

For USB, enter the file name in the File Name field, or browse to locate and select the
file.

For TFTP, proceed with the TFTP Instructions below.

SCP (File transfer via SSH)

For SCP, proceed with the SCP Instructions below.

TFTP Instructions

Note
This setting is only available in the Advanced Mode view.

Configure the following if you selected the TFTP as your copy method for the firmware operations.

Server Definition

Select from the following options:

• By IP Address

• By Name

IP Version

Select from the following options:

• IP Version 6

• IP Version 4

IPv6 Address Type

Select from the following options:

• Link Local—A link local address has a prefix of FE80, is not routable, and can be

used for communication only on the local network.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable

from other networks.

Link Local Interface

If for the IPv6 address type, you selected Link Local, select the interface from the drop
down list.

Server IP Address/Name

Enter the server IP address/name.

Source

Enter the name of the source (0- 160 characters used)

SCP Instructions

Note
This setting is only available in the Advanced Mode view.

Configure the following if you selected the SCP as your copy method for the firmware operations.

Cisco Business 350 Series Switches Administration Guide

75

File Operations

Administration

Remote SSH Server
Authentication

To enable SSH server authentication (which is disabled by default), click Edit .

SSH Client Authentication

Select from the following:

• Use SSH Client System Credentials.

• Use SSH Client One-Time Credentials:

Username

Password

Enter the username if using the SSH Client One-Time Credentials option.

Enter the password if using the SSH Client One-Time Credentials option.

Server Definition

Select from the following options:

• By IP Address

• By Name

IP Version

Select from the following options:

• Version 6

• Version 4

IPv6 Address Type

Select from the following options:

• Link Local—A link local address has a prefix of FE80, is not routable, and can be

used for communication only on the local network.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable

from other networks.

Link Local Interface

If for the IPv6 address type, you selected Link Local, select the interface from the drop
down list.

Server IP Address/Name

Enter the server IP address/name.

Source

Enter the name of the source (0- 160 characters used)

Step 4

Click Apply to save your settings.

File Operations

Procedure

Step 1

Step 2

Click Administration > File Management > File Operations.

Select the Operation Type from the following options:

• Update File

Cisco Business 350 Series Switches Administration Guide

76

File Operations

Administration

• Backup File

• Duplicate

Step 3

Select the Destination File Type from the following options:

• Running Configuration

• Startup Configuration

• Mirror Configuration

• Logging File

• Language File

• Dashboard Info File

Step 4

Select the Copy Method from the following options:

HTTP/HTTPS

USB

Internal Flash

For HTTP/HTTPS, enter the file name in the File Name field, or browse to locate and
select the file.

For USB, enter the file name in the File Name field, or browse to locate and select the
file.

For Internal File, enter the file name in the File name field or click on File Directory to
browse and to locate. Sensitive Data Handling -Select the method in which the data should
be handled. This applies only for file backup or duplication.

• Exclude - to exclude sensitive data

• Encrypt - to encrypt sensitive data

• Plaintext - to display sensitive data in plaintext.

TFTP

For TFTP, proceed with the TFTP Instructions below.

SCP (File transfer via SSH)

For SCP, proceed with the SCP Instructions below.

TFTP Instructions

Configure the following if you selected the TFTP as your update or backup method for the file operations.

Server Definition

Select from the following options:

• By IP Address

• By Name

IP Version

Select from the following options:

• IP Version 6

• IP Version 4

Cisco Business 350 Series Switches Administration Guide

77

File Operations

Administration

IPv6 Address Type

Select from the following options:

• Link Local—A link local address has a prefix of FE80, is not routable, and can be

used for communication only on the local network.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable

from other networks.

Link Local Interface

If for the IPv6 address type, you selected Link Local, select the interface from the drop
down list.

Server IP Address/Name

Enter the server IP address/name.

Source

Enter the name of the source (0 - 160 characters used)

SCP Instructions

Configure the following if you selected the SCP as your copy method for the file operations.

Remote SSH Server
Authentication

To enable SSH server authentication (which is disabled by default), click Edit .

SSH Client Authentication

Select from the following:

• Use SSH Client System Credentials:

• Use SSH Client One-Time Credentials:

Username

Password

Enter the username if using the SSH Client One-Time Credentials option.

Enter the password if using the SSH Client One-Time Credentials option.

Server Definition

Select from the following options:

• By IP Address

• By Name

IP Version

Select from the following options:

• IP Version 6

• IP Version 4

IPv6 Address Type

Select from the following options:

• Link Local—A link local address has a prefix of FE80, is not routable, and can be

used for communication only on the local network.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable

from other networks.

Link Local Interface

If for the IPv6 address type, you selected Link Local, select the interface from the drop
down list.

Server IP Address/Name

Enter the server IP address/name.

Cisco Business 350 Series Switches Administration Guide

78

Administration

File Directory

Source

Enter the name of the source (0 - 160 characters used)

Step 5

Step 6

In the File name section, click the Browse button to locate and select the file.

Click Apply.

File Directory

The File Directory page displays the system files existing in the system.

Procedure

Step 1

Step 2

Click Administration > File Management > File Directory.

If required, enable Auto Mirror Configuration. This enables the automatic creation of mirror configuration files. When
disabling this feature, the mirror configuration file, if it exists, is deleted.

Step 3

Select the drive from which you want to display the files and directories. The following options are available:

• Flash—Display all files in the root directory of the management station.

• USB—Display files on the USB drive.

Step 4

Click Go to display the following fields:

• File Name—Type of system file or actual name of file depending on the file type.

• Permissions—Read/write permissions of the user for the file.

• Size—Size of file.

• Last Modified—Date and time that file was modified.

• Full Path—Path of file.

DHCP Auto Update

The Auto Configuration/Image Update feature provides a convenient method to automatically configure
switches in a network and upgrade their firmware. This process enables the administrator to remotely ensure
that the configuration and firmware of these devices in the network are up to date.

Procedure

Step 1

Step 2

Click Administration > File Management > DHCP Auto Update.

Configure the following:

Cisco Business 350 Series Switches Administration Guide

79

DHCP Auto Update

Administration

Auto Configuration Via DHCP

Check to enable the auto configuration via DHCP. The Auto Configuration
feature provides a convenient method to automatically configure switches in a
network and upgrade their firmware.

Download Protocol

Select the download protocol from the following options:

• Auto By File Extension—(Default) Files with this extension are

downloaded using SCP (over SSH), while files with other extensions are
downloaded using TFTP.

• TFTP Only—The download is done through TFTP, regardless of the file

extension of the configuration file name.

• SCP Only—The download is done through SCP (over SSH), regardless

of the file extension of the configuration file name.

Image Auto Update via DHCP:

Check to enable image auto update via DHCP. The Image Auto Update feature
provides a convenient method to automatically update switches in a network
and upgrade their firmware.

Download Protocol

Select the download protocol from the following options:

• Auto By File Extension—(Default) Files with this extension are

downloaded using SCP (over SSH), while files with other extensions are
downloaded using TFTP.

• TFTP Only—The download is done through TFTP, regardless of the file

extension of the configuration file name.

• SCP Only—The download is done through SCP (over SSH), regardless

of the file extension of the configuration file name.

Step 3

Select the SSH settings for SCP.

Remote SSH Server Authentication:

Click the link to navigate to the SSH Server Authentication page. There you
can enable authentication of the SSH server to be used for the download and
enter the trusted SSH server if required.

SSH Client Authentication

• Click on the System Credentials to enter user credentials in the SSH User

Authentication page.

Backup Server Definition

Select from the following options:

• By IP Address

• By Name

IP Version

Select from the following options:

• IP Version 6

• IP Version 4

Cisco Business 350 Series Switches Administration Guide

80

Administration

Cisco Business Dashboard Settings

IPv6 Address Type

Select from the following options:

• Link Local—A link local address has a prefix of FE80, is not routable, and

can be used for communication only on the local network.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and

reachable from other networks.

Link Local Interface

If for the IPv6 address type, you selected Link Local, select the interface from
the drop down list.

Backup Server IP Address/Name

Enter the name of the backup configuration file.

Backup Configuration File Name

Enter the name of the backup configuration file (0- 160 characters used)

Backup Indirect Image File Name

Enter the name of backup indirect image file (0- 160 characters used).

Last Auto Configuration / Image Server
IP Address

The address of the last auto configuration/image server IP address is displayed.

Last Auto Configuration File Name

The name of the last auto configuration file is displayed.

Note
DHCP Auto Configuration / Image is operational only when the IP Address configuration is dynamic.

Step 4

Click Apply to save your settings.

Cisco Business Dashboard Settings

Cisco Business Dashboard helps you monitor and manage your Cisco 100 to 500 Series network with the use
of the Cisco Business Dashboard Manager. The Cisco Business Dashboard Manager is an add-on that
automatically discovers your network and allows you to configure and monitor all supported Cisco 100 to
500 Series devices such as Cisco switches, routers, and wireless access points.

You can view the Cisco Business Dashboard by clicking Request a Demo

Cisco Business Dashboard Manager is a distributed application which is comprised of two separate components
or applications: one or more Probes referred to as Cisco Business Dashboard Probe and a single Manager
called Cisco Business Dashboard Manager. An instance of Cisco Business Dashboard Probe is installed at
each site in the network, performs network discovery and communicates directly with each Cisco device.

Note

For detailed instructions on how to setup the Cisco Business Dashboard Manager and Probe, please consult
the Cisco Business Dashboard Quick Start Guide.

https://cisco.com/go/cbd-docs

Complete the following steps on the switch graphical user interface (GUI) to enable a Probe connection to a
Dashboard, configure the Organization and Network name, and other information required to allow connection
to the Dashboard:

Cisco Business 350 Series Switches Administration Guide

81

Cisco Business Dashboard Settings

Administration

Procedure

Step 1

Step 2

Click Administration > Cisco Business Dashboard Settings.

Configure the following:

Probe Operation

Check to enable the Cisco Business Dashboard Probe operation.

Probe Status

Displays the status of the CBD probe. Possible value are Active, Inactive or Fault.

If the probe status is Active then alongside the probe status "Active" the probe mode will
also be displayed as follows:

• Active (Probe Managed) - The Probe performs network discovery and communicates

directly with each managed device on behalf of the Dashboard.

In one network you should only enable one Probe.

• Active (Direct Managed) - Direct managed devices will discover other devices in

the broader network and connect those devices to the Dashboard automatically then
those devices become manageable. You may optionally have the dashboard explicitly
search the IP address ranges to discover network devices, which can be in other
VLANs or subnets.

Direct managed network is recommended if all your devices support direct
management.

Probe Version

Displays the version of the Cisco Business Dashboard probe.

Logging Threshold

Select one of the following options (Information, Debug, Warning, or Error) from the
drop-down list to limit the level of messages logged by the Cisco Business Dashboard
probe agent. Only messages with the specified level or higher will be logged.

All Module Logging

Check to enable. This logs all communication and events between all modules.

Call Home Logging

Check to enable. This logs all communication between the Probe and Manger.

Discovery Logging

Check to enable. This logs the device discovery events and topology discovery.

Services Logging

Check to enable. This logs the message translation between northbound and southbound.

System Logging

Check to enable. This logs the core system process not covered by any of the other logs.

Northbound Logging

Check to enable. This logs the communication between the Manager and the Probe.

Southbound Logging

Check to enable. This logs the low level communication between the Probe and devices.

Dashboard Connection

Check to enable connection.

Cisco Business 350 Series Switches Administration Guide

82

Administration

Cisco Business Dashboard Settings

Dashboard Status

Displays the status (Connected or Disconnected) of the Cisco Business Dashboard Manager.

If the Dashboard Status is "Disconnected" an error reason will be displayed. Here are
some examples:

• Certificate-error- unspecified certificate verification error

• Certificate-error- certificate is not yet valid

• Certificate-error- certificate has expired

• Certificate-error- certificate verify failed

• Connection-error- Host not found (authoritative)

• Connection-error- No route to host

Dashboard Definition

Define the address of the Cisco Business Dashboard. Select one of the following:

• By IP address- this option requires you to enter a valid IP address to the IP

Address/Name field.

• By Name- this option requires you to enter a host name to the IP Address/Name

field.

IP Address/Name

Enter the name or IP address of the Cisco Business Dashboard.

Dashboard Port

Specify one of the following TCP ports to connect to the Dashboard.

• Use Default (443).

• User Defined (Range: 1-65535). This option is available only if a valid address is

entered in the Dashboard Address field.

Connection Setup

Specify one of the following connection setups:

• Online with Web Browser

• Offline with Access Key

Access Key ID

Access Key Secret

The Access Key ID field consists of 24 hexadecimal digits. Note that the field should
only allow the input of hexadecimal characters.

Specify the secret to use for authentication. It can be Encrypted or in Plaintext format.
The Plaintext format is specified as an alphanumeric string without white-spaces (up to
160 chars). The Key ID and Secret settings must be set together.

Note
When applying, if the Key ID field is empty and the Secret field is not, or if the Secret
field is empty and the Key ID field is not, the following error message is displayed: “Key
ID and Secret must be set together”.

Step 3

Click Apply to save the setting to the running configuration.

Note

Cisco Business 350 Series Switches Administration Guide

83

Plug-n-Play (PNP)

Administration

The fields Organization Name, Network Name, Dashboard Address, Key ID cannot be modified if Dashboard Connection
setting is enabled. To modify any of these settings clear the Dashboard Connection check box, click Apply, and redo
steps 2-4 above.

Display Sensitive Data as Plaintext- Click to display the sensitive data a plain text.

Reset Connection - click to disconnect the current connection with the Dashboard, flush the Cisco Business Dashboard
Probe cached data, and then attempt to reconnect to the Dashboard. A confirmation message is displayed before the
operation starts. This control is enabled only if the Dashboard Connection and Probe Operation are enabled.

Note
The Reset Connection is only enabled if the Dashboard Connection and Probe Operation check boxes are checked.

Clear Probe Database- Click to clear the probe data. It is enabled only if the Probe Operation checkbox is unchecked
(and has been unchecked since the screen loaded). Otherwise, the button is disabled with the following tooltip: “Probe
Operation must be disabled prior to clearing probe database”.

Note
Many factors affect the number of network devices and clients that the Cisco Business Dashboard Probe on a switch can
manage. We recommend that a probe on a switch manage no more than 15 network devices (switches, routers, and wireless
access points) and no more than 150 connected clients. If your network is more complex, we recommend that you use
other platforms for the Cisco Business Dashboard Probe. For more information about Cisco Business Dashboard, go to
https://www.cisco.com/c/en/us/products/cloud-systems-management/business-dashboard/index.html.

Plug-n-Play (PNP)

Installation of new networking devices or replacement of devices can be expensive, time-consuming and
error-prone when performed manually. Typically, new devices are first sent to a central staging facility where
the devices are unboxed, connected to a staging network, updated with the right licenses, configurations and
images; then packaged and shipped to the actual installation location. After these processes are completed,
experts must travel to the installation locations to perform the installation. Even in scenarios where the devices
are installed in the NOC/Data Center itself, there may not be enough experts for the sheer number of devices.
All these issues contribute to delays in deployment and add to the operational costs.

Connecting to PNP Server

To allow the switch to connect to the PnP server, a discovery process takes place, in which the switch discovers
the PNP server address/url. There are multiple discovery methods, and they are executed by the switch
according to the sequence detailed below. If a PnP server is discovered by a certain method, the discovery
process is completed and the rest of the methods are not executed:

1. User configured address- the PnP server URL or IP address are specified by the user.

2. Address received from DHCP response option 43- the PnP server URL or IP address are received as part

of option 43 in the DHCP response

3. DNS resolution of host name "pnpserver"- the PnP server IP addressed is obtained via DNS server

resolution of host name “pnpserver”.

4. Cisco Plug and Play Connect - a redirection service that allows full “out of the box” PNP server discovery

which runs over HTTPs.

Cisco Business 350 Series Switches Administration Guide

84

Administration

Plug-n-Play (PNP)

The switch contacts the redirection service using the FQDN “devicehelper.cisco.com”.

Cisco PnP Connect Prerequisites

To allow Cisco Plug and Play Connect operation, the user needs to create devices and controller profiles in
Plug and Play Connect (navigate to https://software.cisco.com and click the PnP Connect link). Note that a
Cisco Smart Account is required to use PnP Connect. To create or update a Smart Account, see the
Administration section of https://software.cisco.com.

In addition, the following prerequisites are required to be met on the switch itself:

• The PNP server was not discovered by the other discovery methods

• The device is able to successfully resolve the name devicehelper.cisco.com (either static configuration

or using DNS server)

• System time was set using one of the following methods

• Time was updated by an SNTP server

• Clock was set manually by user

• Time was preserved across resets by Real Time Clock (RTC).

CA-Signed Certificate based Authentication

Cisco distributes certificates signed by a signing authorities in .tar file format and signs the bundle with Cisco
Certificate Authority (CA) signature. This certificate bundle is provided by Cisco infoSec for public downloads
on cisco.com.

Note

If the PNP server discovery is based on Cisco PnP Connect, the trust-pool is downloaded from following:
http://www.cisco.com/security/pki/trs/ios_core.p7b.

If the PNP server discovery is based on DHCP option 43, use the “T<Trust pool CA bundle URL>;” parameter
in DHCP option 43 to provide the URL for downloading the trust pool. The certificates from this bundle can
be installed on the Cisco device for server-side validation during SSL handshake. It is assumed that the server
uses a certificate, which is signed by one of the CA that is available in the bundle.

The PnP agent uses the built-in PKI capability to validate the certificate bundle. As the bundle is signed by
Cisco CA, the agent is capable of identifying a bundle that is tampered before installing the certificates on
the device. After the integrity of the bundle is ensured by the agent, the agent installs the certificates on the
device. After the certificates are installed on the device, the PnP agent initiates an HTTPs connection to the
server without any additional steps from the server.

Note

The device also supports a built in certificate bundle which is installed as part of the bootup process. this
bundle can be used to validate PNP server. If a Bundle is downloaded based on Cisco PnP Connect information
then the certificates from the downloaded bundle are installed and the certificates based on the built in bundle
are un-installed.

Cisco Business 350 Series Switches Administration Guide

85

Plug-n-Play (PNP)

Administration

Note

In addition to validating PNP certificate based on installed CA certificate the PNP Agent also validates that
the certificate's Common Name/Subject Alternate Name (CN/SAN) matches the host name/IP address of the
PNP server. If they don't match validation of certificate is rejected.

Cisco PnP DHCP Option 43 Usage Guidelines

DHCP option 43 is a vendor specific identifier which is one of the methods that can be used by the PnP agent
to locate and connect to the PnP server (see Cisco Plug-n-Play for more information).

The following provides Information on configuration of Option 43 to allow proper configuration on DHCP
server.

Option 43 includes the following fields/parameters:

<DHCP-typecode><feature-opcode><version><debug-option>;<arglist>

The <arglist> parameter should use the following syntax:

B<IP address type>;I<IP address>;J<Port>;K<Transport protocol>;T<Trust pool CA bundle URL>;Z<SNTP
server IP address>

The following table details the description and usage of option 43 fields

Parameter

DHCP-typecode

Feature-opcode

Version

Debug-option

K

B

I

Description

DHCP sub-option type. The DHCP sub-option type for PnP is 5.

Feature operation code – can be either Active (A) or Passive (P).
The feature operation code for PnP is Active (A) which implies
that PnP agent initiates a connection to the PnP server. If the PnP
server cannot be reached, PnP agent retries until it makes a
connection.

Version of template to be used by PnP agent. Must be 1.

Turns ON or OFF the debug messages during the processing of
the DHCP Option 43:

D – debug option is ON; N – debug option is OFF.

Transport protocol to be used between PnP agent and PnP server:

4 - HTTP or 5 – HTTPS.

IP address type of PnP server IP address specified with the letter
code

‘I’:

1- host, 2- IPv4, 3- IPv6

IP address or host name of PnP server. If host name is specified,
DNS related options must be present in the DHCP server to allow
for successful use of host name.

Cisco Business 350 Series Switches Administration Guide

86

Administration

PNP Settings

Parameter

T

Z

J

Description

URL of trust pool CA bundle. You can get the CA bundle from a
Cisco Business Dashboard, or from a TFTP server.

• When using Cisco Business Dashboard, use the following

URL format:

http://CBD IP address or domain
name/ca/trustpool/CA_bundle_name

• When using TFTP Server, use the following URL format:

tftp://tftp server IP/CA_bundle_name

SNTP server IP address. You must sync the clock before
configuring a trust pool.

Note
The switch clock is considered synchronized if it was updated by
any SNTP server supported by the switch (by default, user
configured or in Z parameter) or set manually by the user. This
parameter is required when using trust pool security if the switch
can not reach any other SNTP server. For example, for an
out-of-the box switch with factory default configuration but no
Internet connectivity to reach the default SNTP servers.

Port number HTTP=80 HTTPS=443

Examples for Option 43 usage:

• The following format is used for PnP connection setup using HTTP:

option 43 ascii 5A1N;K4;B2;I10.10.10.3;J80

• The following format is used for PnP connection setup on top of HTTPS, directly using a trust pool.
HTTPS can be used when the trust pool CA bundle is downloaded from a Cisco Business Dashboard
and the Cisco Business Dashboard server certificate was issued by a 3rd party (not self signed). In the
example below “10.10.10.3” is the Cisco Business Dashboard IP address. Optionally, you can specify a
domain name:

option 43 ascii

5A1N;K5;B2;I10.10.10.3;Thttp://10.10.10.3/ca/trustpool/ios.p7b;Z10.75.166.1

PNP Settings

To configure PNP settings, follow these steps:

Procedure

Step 1

Step 2

Click Administration > PNP > PNP Settings.

Configure PNP by entering information in the following fields:

Cisco Business 350 Series Switches Administration Guide

87

PNP Settings

Administration

PNP State

Check to enable.

PNP Transport / Settings
Definition

Select one of the following options for locating configuration information, regarding the
transport protocol to use, the PNP server address and the TCP port to use:

• Default Settings—If this option is selected, the PNP settings are then taken from
DHCP option 43. If settings aren’t received from DHCP option 43, the following
default values are used: default transport protocol HTTP, DNS name "pnpserver"
for PNP server and the port related to HTTP. If the “pnpserver” name is not resolved
by DNS, then Cisco Plug and Play Connect service is used, using DNS name
“devicehelper.cisco.com”. When selecting the Default Settings option, all fields in
PNP Transport section are grayed out. If both PNP agent and DHCP Auto
Configuration/Image Update are enabled on device- in case he DHCP reply includes,
in addition to option 43, options related to config or image file name, then device
ignores received option 43.

• Manual Settings—Manually set the TCP port and server settings to use for PNP

transport.

Transport Protocol

Select the transport protocol, HTTP or HTTPS.

TCP Port

Number of the TCP port. This is entered automatically by the system: 80 for HTTP.

Server Definition

Select whether to specify the PNP server By IP address or By name.

IP Version

Select the supported IP format.

• Version 6—IPv6

• Version 4—IPv4

Server IPv6 Address Type

Select one of the following options, if the IP version type is IPv6:

• Link Local—The IPv6 address uniquely identifies hosts on a single network link. A

link local address has a prefix of FE80, isn’t routable, and can be used for
communication only on the local network. Only one link local address is supported.
If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable

from other networks.

Link Local Interface

If the source IPv6 address type is Link Local, select from where it is received.

Server IP Address/Name

Enter the IP address or domain name of the PNP server.

PNP User / User Definition

User information to be sent in PNP packets sent to the server. Select one of the following
options:

• Default Settings—When selecting this option, the PNP username and password

settings are taken from DHCP option 43. If this option is selected the username and
password fields are grayed out.

• Manual Settings—Select to manually configure PNP username and password.

Cisco Business 350 Series Switches Administration Guide

88

Administration

PNP Session

User Name

Password

Username to be entered in the PNP packets.

Password in either Encrypted or Plaintext form.

PNP Behavior
Settings/Reconnection
Interval

Discovery Timeout

If you select User Defined, set the interval (in seconds) before attempting to reconnect
the session after the connection is lost.

Specifies the time to wait, in seconds, before attempting discovery again after a discovery
of the PNP server failed.

Timeout Exponential Factor

Value that triggers the discovery attempt exponentially. By multiplying the previous
timeout value by an exponential value and applying the result as timeout (if value is
smaller than max timeout value).

Max Discovery Timeout

Maximum value of timeout. Must be greater than the Discovery Timeout value.

Watchdog Timeout

Interval of time to wait for a reply from a PnP or file server during an active PNP session
(for example during a file download process).

Step 3

Click Apply. The parameters are copied to the Running Configuration file.

Click Display Sensitive Data as Plaintext to display the password if it’s encrypted.

PNP Session

Procedure

The PNP Session screen displays the value of the PNP parameters currently in effect. The source of the
parameter is displayed in parenthesis where relevant.

To display information about PNP parameters, follow these steps:

Click Administration > PNP > PNP Session.

The following fields are displayed:

• Administrative Status—Whether PNP is enabled or not.

• Operational Status—Is PNP operational.

• PNP Agent State—Indicates whether there’s an active PNP session. The possible values are Discovery Wait;

Discovery; Not Ready; Disabled; Session; Session Wait.

• Transport Protocol– Displays the PNP agent session information.

• TCP Port—TCP port of the PNP session

• Server IP Address—IP address of PNP server

• Username—Username to be sent in PNP packets.

Cisco Business 350 Series Switches Administration Guide

89

Reboot

Administration

• Password MD5—Password to be sent in PNP packets.

• Session Interval Timeout—Session Interval timeout configured (appears only when PNP Agent State is waiting).

• Remaining Timeout—Value of remaining timeout.

Note

Click the Resume button to immediately take the PnP agent out of the waiting state, in the following way:

• If the agent is in the Discovery Waiting state, it’s set to the Discovery state.

• If the agent is in the PnP Session Waiting state, it’s set to the PnP Session state.

Some configuration changes, such as enabling jumbo frame support, require the system to be rebooted before
they take effect. However, rebooting the device deletes the Running Configuration, so it’s critical to save the
Running Configuration as the Startup Configuration before rebooting. Clicking Apply doesn’t save the
configuration to the Startup Configuration. section.

To reboot the device, follow these steps:

Reboot

Procedure

Step 1

Step 2

Click Administration > Reboot.
Click Reboot to reboot the device.

• Reboot—Reboots the device. Since any unsaved information in the Running Configuration is discarded at reboot,
you must click Save to preserve the current configuration across the boot process. If the Save option isn’t displayed,
the Running Configuration matches the Startup Configuration and no action is necessary.

The following options are available:

• Immediate—Reboot immediately.

• Date—Enter the date (month/day) and time (hour and minutes) of the schedule reboot. This schedules a reload

of the software to take place at the specified time (using a 24-hour clock).

Note
This option can only be used if the system time has either been set manually or by SNTP.

• Click Cancel Reboot to cancel a scheduled reboot.

• In—Reboot within the specified number of days, hours and minutes The maximum amount of time that can

pass is 24 days.

• Restore to Factory Defaults—Reboots the device by using the factory default configuration. This process erases all

except the Active Image, Inactive Image, Mirror configuration and Localization files.

Cisco Business 350 Series Switches Administration Guide

90

Administration

Hardware Resources

• Clear Startup Configuration File—Check to clear the startup configuration on the device for the next time it boots

up.

Hardware Resources

The Hardware Resources page enables you to adjust the Router TCAM allocation for policy-based routing
(IPv4 and IPv6) and VLAN-mapping rules. It also enables you to view the status and to reactivate
hardware-based routing.

If you change the router TCAM allocation incorrectly, an error message is displayed. If your router TCAM
allocation is feasible, a message is displayed that an automatic reboot will be performed with the new settings.

Routing resources can be modified incorrectly, in one of the following ways:

• The number of router TCAM entries for a specific entry type that you allocate is less than the number

currently in use.

• The total number of router TCAM entries that you allocated is greater than the maximum available.

To view and modify routing resources, follow these steps:

Procedure

Step 1

Click Administration > Hardware Resources.

The following fields are displayed:

• Maximum IPv4 Policy-Based Routes

• Use Default—Use default values.

• User Defined—Enter a value.

• Maximum IPv6 Policy-Based Routes

• Use Default—Use default values.

• User Defined—Enter a value.

• Maximum VLAN-Mapping Entries—Select one of the following options:

• Use Default—Use default values.

• User Defined—Enter a value.

• Hardware-Based Routing: Displays whether hardware-based routing is enabled or suspended.

Step 2

Save the new settings by clicking Apply.

Cisco Business 350 Series Switches Administration Guide

91

Discovery Bonjour

Administration

Note

If hardware-based routing isn’t active, the Reactivate Hardware Based Routing button appears. Click on this
button to enable hardware-based routing. Activation of hardware-based routing depends on the hardware
resources that are available to support the current routing configuration. If router resources aren’t sufficient
to support device configuration, the operation fails and an error message is displayed to the user.

Discovery Bonjour

As a Bonjour client, the device broadcasts Bonjour Discovery protocol packets to directly connected IP subnets.
The device can be discovered by a network management system or other third-party applications. By default,
Bonjour is enabled on the Management VLAN.

To configure Bonjour, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Click Administration > Discovery - Bonjour.

Select Enable to enable Bonjour Discovery globally.

To enable Bonjour on a specific interface, click Add.

Select and configure the interface.

Click Apply to update the Running Configuration file.

Note
When Bonjour is enabled, it sends Bonjour Discovery packets to interfaces with IP addresses associated with Bonjour
on the Bonjour Discovery Interface Control table.

Step 6

Click Delete to disable Bonjour on an interface.

Note

If Bonjour is disabled, the device stops sending Bonjour Discovery advertisements and stops listening for
Bonjour Discovery advertisements sent by other devices.

Discovery - LLDP

LLDP is a protocol that enables network managers to troubleshoot and enhance network management in
multi-vendor environments. LLDP standardizes methods for network devices to advertise themselves to other
systems, and to store discovered information. LLDP enables a device to advertise its identification,
configuration, and capabilities to neighboring devices that then store the data in a Management Information
Base (MIB).

LDP is a link layer protocol. By default, the device terminates and processes all incoming LLDP packets as
required by the protocol. This section describes how to configure LLDP and covers the following topics:

Cisco Business 350 Series Switches Administration Guide

92

Administration

Properties

Properties

The Properties page enables entering LLDP general parameters, such as enabling/disabling the feature globally
and setting timers. To enter LLDP properties, proceed as follows:

Procedure

Step 1

Step 2

Click Administration > Discovery - LLDP > Properties.

Enter the parameters.

LLDP Status

Select to enable LLDP on the device (enabled by default).

LLDP Frames Handling

If LLDP isn’t enabled, select one of the following options:

• Filtering—Delete the packet.

• Flooding—Forward the packet to all VLAN members

TLV Advertise Interval

Enter the rate in seconds at which LLDP advertisement updates are sent, or use the default.

Topology Change SNMP
Notification Interval

Hold Multiplier

Enter the minimum time interval between SNMP notifications.

Enter the amount of time that LLDP packets are held before the packets are discarded,
measured in multiples of the TLV Advertise Interval. For example, if the TLV Advertise
Interval is 30 seconds, and the Hold Multiplier is 4, then the LLDP packets are discarded
after 120 seconds.

Reinitializing Delay

Enter the time interval in seconds that passes between disabling and reinitializing LLDP,
following an LLDP enable/disable cycle.

Transmit Delay

Enter the amount of time in seconds that passes between successive LLDP frame
transmissions, due to changes in the LLDP local systems MIB.

Chassis ID Advertisement

Select one of the following options for advertisement in the LLDP messages:

• MAC Address—Advertise the MAC address of the device.

• Host Name—Advertise the host name of the device.

Step 3

In the LED-MED Properties Fast Start Repeat Count field, enter the number of times LLDP packets are sent when the
LLDP-MED Fast Start mechanism is initialized. This occurs when a new endpoint device links to the device. For a
description of LLDP MED, refer to the LLDP MED Network Policy section.

Step 4

Click Apply. The LLDP properties are added to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

93

Port Settings

Port Settings

Administration

Note

This setting is only available in the Advanced Mode view.)

The LLDP Port Settings page enables LLDP and SNMP notification per port. The LLDP-MED TLVs can be
configured in the LLDP MED Port Settings, on page 97.

To define the LLDP port settings, follow these steps:

Procedure

Step 1

Click Administration > Discovery - LLDP > Port Settings.

This page contains the port LLDP information.

Step 2

Step 3

Select a port and click Edit.

Configure the following fields:

Interface

Select the port to edit.

Administrative Status

Select the LLDP publishing option for the port.

• Tx Only—Publishes but doesn’t discover.

• Rx Only—Discovers but doesn’t publish.

• Tx & Rx—Publishes and discovers.

• Disable—Indicates that LLDP is disabled on the port.

SNMP Notification

Select Enable to send notifications to SNMP notification recipients.

Cisco Business 350 Series Switches Administration Guide

94

Administration

Port Settings

Available/Selected Optional TLVs

Select the options to be published by the device:

• Port Description—Information about the port.

• System Name—System's assigned name.

• System Description—Description of the network entity.

• System Capabilities—Primary functions of the device, and whether these

functions are enabled on the device.

• 802.3 MAC-PHY—Duplex and bit rate capability and the current duplex

and bit rate settings of the sending device.

• 802.3 power via MDI—Maximum power transmitted via MDI

• 802.3 Link Aggregation—Whether the link (associated with the port on

which the LLDP PDU is transmitted) can be aggregated.

• 802.3 Maximum Frame Size—Maximum frame size capability of the

MAC/PHY implementation

• 4-Wire Power via MDI—(relevant to PoE ports supporting 60W PoE)

Proprietary Cisco TLV defined to support power over Ethernet that allows
for 60 watts power (standard support is up to 30 watts).

Management Address Optional TLV

Advertisement Mode

Select one of the following ways to advertise the IP management address of
the device:

• Auto Advertise—Specifies that the software automatically chooses a

management address to advertise from all the IP addresses of the device.
In case of multiple IP addresses, the software chooses the lowest IP
address among the dynamic IP addresses. If there are no dynamic
addresses, the software chooses the lowest IP address among the static
IP addresses.

• None—Select this option if no advertisement mode is desired.

• Manual Advertise—Select this option and the management IP address

to be advertised.

IP Address

PVID

If Manual Advertise was selected, select the Management IP address from
the addresses provided.

Select to advertise the PVID in the TLV.

Port & Protocol VLAN ID

Set VLAN ID to advertise based on the port VLAN protocol.

VLAN ID

Protocol IDs

Selected Protocol IDs

Select which VLANs will be advertised.

Select which protocols will be advertised.

Select the protocols to be used in the Protocols IDs box and move them to the
Selected Protocols ID box.

Cisco Business 350 Series Switches Administration Guide

95

LLDP MED Network Policy

Administration

Step 4

Enter the relevant information, and click Apply. The port settings are written to the Running Configuration file.

LLDP MED Network Policy

The LLDP-MED network policy is a related set of configuration settings for a specific real-time application
such as voice, or video. A network policy, if configured, can be included in the outgoing LLDP packets to
the attached LLDP media endpoint device. The media endpoint device must send its traffic as specified in the
network policy it receives. For example, a policy can be created for VoIP traffic that instructs VoIP phone to:

• Send voice traffic on VLAN 10 as tagged packet and with 802.1p priority 5.

• Send voice traffic with DSCP 46.

Network policies are associated with ports by using the LLDP MED Port Settings, on page 97. An administrator
can manually configure one or more network policies and the interfaces where the policies are to be sent. It
is the administrator's responsibility to manually create the VLANs and their port memberships according to
the network policies and their associated interfaces.

In addition, an administrator can instruct the device to automatically generate and advertise a network policy
for voice application based on the voice VLAN maintained by the device. Refer the Auto Voice VLAN section
for details on how the device maintains its voice VLAN.

To define an LLDP MED network policy, follow these steps:

Procedure

Step 1

Click Administration > Discovery - LLDP > LLDP MED Network Policy.

This page contains previously-created network policies.

Step 2

Select Auto for LLDP-MED Network Policy for Voice Application if the device is to automatically generate and advertise
a network policy for voice application based on the voice VLAN maintained by the device.

Note
When this box is checked, you may not manually configure a voice network policy.

Step 3

Step 4

Step 5

Click Apply to add this setting to the Running Configuration file.

To define a new policy, click Add.
Enter the values:

• Network Policy Number—Select the number of the policy to be created.

• Application—Select the type of application (type of traffic) for which the network policy is being defined.

• VLAN ID—Enter the VLAN ID to which the traffic must be sent.

• VLAN Type—Select whether the traffic is Tagged or Untagged.

• User Priority—Select the traffic priority applied to traffic defined by this network policy. This is the CoS value.

• DSCP Value—Select the DSCP value to associate with application data sent by neighbors. This value informs them

how they must mark the application traffic they send to the device.

Cisco Business 350 Series Switches Administration Guide

96

Administration

LLDP MED Port Settings

Step 6

Click Apply. The network policy is defined.

Note
You must manually configure the interfaces to include the desired manually-defined network policies for the outgoing
LLDP packets using the LLDP MED Port Settings.

LLDP MED Port Settings

Note

This setting is only available in the Advanced Mode view.)

The LLDP MED Port Settings page enables configuration of the LLDP-MED TLVs. Network policies are
configured using the LLDP MED Network Policy page.

Note

If LLDP-MED Network Policy for Voice Application is Auto and Auto Voice VLAN is in operation, then
the device automatically generates an LLDP-MED Network Policy for Voice Application for all the LLDP
ports. LLDP-MED enabled and are members of the voice VLAN.

To configure LLDP MED on each port, proceed as follows:

Procedure

Step 1

Click Administration > Discovery - LLDP > LLDP MED Port Settings.

This page displays the following LLDP MED settings for all ports:

• User-Defined Network Policy—Policies are defined for types of traffic in LLDP MED Network Policy, on page

96. The following information is displayed for the policy on the port:

• Active—Is the type of traffic active on the port.

• Application—Type of traffic for which the policy is defined.

• Location—Whether Location TLV is transmitted.

• PoE—Whether PoE-PSE TLV is transmitted.

• Inventory—Whether Inventory TLV is transmitted.

Step 2

Step 3

Step 4

The message at the top of the page indicates whether the generation of the LLDP MED Network Policy for the voice
application is automatic or not. Click on the link to change the mode.

To associate additional LLDP MED TLV and/or one or more user-defined LLDP MED Network Policies to a port, select
it, and click Edit.
Enter the parameters:

• Interface—Select the interface to configure.

Cisco Business 350 Series Switches Administration Guide

97

LLDP Port Status

Administration

• LLDP MED Status—Enable/disable LLDP MED on this port.

• SNMP Notification—Select whether SNMP notification is sent on a per-port basis when an end station that supports

MED is discovered.

• Selected Optional TLVs—Select the TLVs that can be published by the device by moving them from the Available

Optional TLVs list to the Selected Optional TLVs list.

• Selected Network Policies—Select the LLDP MED policies to be published by LLDP by moving them from the

Available Network Policies list to the Selected Network Policies list. To include one or more user-defined network
policies in the advertisement, you must also select Network Policy from the Available Optional TLVs.

Note
The following fields must be entered in hexadecimal characters in the exact data format that is defined in the
LLDP-MED standard (ANSI-TIA-1057_final_for_publication.pdf):

• Location Coordinate—Enter the coordinate location to be published by LLDP.

• Location Civic Address—Enter the civic address to be published by LLDP.

• Location ECS ELIN—Enter the Emergency Call Service (ECS) ELIN location to be published by LLDP.

Step 5

Click Apply. The LLDP MED port settings are written to the Running Configuration file.

LLDP Port Status

The LLDP Port Status page contains the LLDP global information for every port.

Procedure

Step 1

To view the LLDP port status, click Administration > Discovery - LLDP > LLDP Port Status.

Information for all ports is displayed.

Step 2

Step 3

Select a specific port and click LLDP Local Information Detail to see the details of the LLDP and LLDP-MED TLVs
sent out to the port.

Select a specific port and click LLDP Neighbor Information Detail to see the details of the LLDP and LLDP-MED
TLVs received from the port.

LLDP Port Status Global Information

• Chassis ID Subtype—Type of chassis ID (for example, MAC address).

• Chassis ID—Identifier of chassis. Where the chassis ID subtype is a MAC address, the MAC address of the device

appears.

• System Name—Name of device.

• System Description—Description of the device (in alpha-numeric format).

• Supported System Capabilities—Primary functions of the device, such as Bridge, WLAN AP, or Router.

Cisco Business 350 Series Switches Administration Guide

98

Administration

LLDP Local Information

• Enabled System Capabilities—Primary enabled function(s) of the device.

• Port ID Subtype—Type of the port identifier that is shown.

LLDP Port Status Table

• Interface—Port identifier.

• LLDP Status—LLDP publishing option.

• LLDP MED Status—Enabled or disabled.

• Local PoE ((Power Type, Power Source, Power Priority, Power Value)—Local PoE information advertised.

• Remote PoE (Power Type, Power Source, Power Priority, Power Value)—PoE information advertised by the

neighbor.

• # of neighbors—Number of neighbors discovered.

• Neighbor capability of 1st device—Displays the primary functions of the neighbor; for example: Bridge or Router.

LLDP Local Information

To view the LLDP local port status advertised on a port, follow these steps:

Procedure

Step 1

Step 2

Click Administration > Discovery - LLDP > LLDP Local Information.
Select the interface and port for which the LLDP local information is to be displayed.

The LLDP Local Information page contains the following fields:

Global

• Chassis ID Subtype—Type of chassis ID. (For example, the MAC address.)

• Chassis ID—Identifier of chassis. Where the chassis ID subtype is a MAC address, the MAC address of the device

appears.

• System Name—Name of device.

• System Description—Description of the device (in alpha-numeric format).

• Supported System Capabilities—Primary functions of the device, such as Bridge, WLAN AP, or Router.

• Enabled System Capabilities—Primary enabled function(s) of the device.

• Port ID Subtype—Type of the port identifier that is shown.

• Port ID—Identifier of port.

• Port Description—Information about the port, including manufacturer, product name and hardware/software version.

Management Address

Cisco Business 350 Series Switches Administration Guide

99

LLDP Local Information

Administration

• IPv4 Address—IPv4 returned address most appropriate for management use.

• IPv6 Global Address—IPv6 returned global address most appropriate for management use.

• IPv6 Link Local Address—IPv6 returned link local address most appropriate for management use.

MAC/PHY Details

• Auto-Negotiation Supported—Port speed auto-negotiation support status. The possible values are True and False.

• Auto-Negotiation Enabled—Port speed auto-negotiation active status. The possible values are True and False.

• Auto-Negotiation Advertised Capabilities—Port speed auto-negotiation capabilities, for example, 1000BASE-T

half duplex mode, 100BASE-TX full duplex mode.

• Operational MAU Type—Medium Attachment Unit (MAU) type. The MAU performs physical layer functions,

including digital data conversion from the Ethernet interfaces’ collision detection and bit injection into the network;
for example, 100BASE-TX full duplex mode.

802.3 Details

• 802.3 Maximum Frame Size - The maximum supported IEEE 802.3 frame size.

802.3 Link Aggregation

• Aggregation Capability—Indicates whether the interface can be aggregated.

• Aggregation Status—Indicates whether the interface is aggregated.

• Aggregation Port ID—Advertised aggregated interface ID.

802.3 Energy Efficient Ethernet (EEE)

• Local Tx—Indicates the local link partner’s reflection of the remote link partner’s Tx value.

• Local Rx—Indicates the local link partner’s reflection of the remote link partner’s Rx value.

• Remote Tx Echo—Indicates the time (in micro seconds) that the transmitting link partner waits before it starts

transmitting data after leaving Low Power Idle (LPI mode).

• Remote Rx Echo—Indicates the time (in micro seconds) that the receiving link partner requests that the transmitting

link partner waits before transmission of data following Low Power Idle (LPI mode).

802.3 Power via MDI

• MDI Power Support Port Class—Advertised power support port class.

• PSE MDI Power Support—Indicates if MDI power is supported on the port.

• PSE MDI Power State—Indicates if MDI power is enabled on the port.

• PSE Power Pair Control Ability—Indicates if power pair control is supported on the port.

• PSE Power Pair—Power pair control type supported on the port.

• PSE Power Class—Advertised power class of the port.

• Power Type—Type of pod device connected to the port.

• Power Source—Port power source.

Cisco Business 350 Series Switches Administration Guide

100

Administration

LLDP Local Information

• Power Priority—Port power priority

• PD Requested Power Value—Amount of power allocated by the PSE to the PD.

• PSE Allocated Power Value—Amount of power allocated to the sourcing equipment (PSE).

4-Wire Power via MDI

• 4-Pair PoE Supported—Indicates system and port support enabling the 4-pair wire (true only for specific ports that

have this HW ability).

• Spare Pair Detection/Classification Required—Indicates that the 4-pair wire is needed.

• PD Spare Pair Desired State—Indicates a pod device requesting to enable the 4-pair ability.

• PD Spare Pair Operational State—Indicates if the 4-pair ability is enabled or disabled.

MED Details

• Capabilities Supported—MED capabilities enabled on the port.

• Current Capabilities—MED TLVs advertised by the port.

• Device Class—LLDP-MED endpoint device class. The possible device classes are:

• Endpoint Class 1—Indicates a generic endpoint class, offering basic LLDP services.

• Endpoint Class 2—Indicates a media endpoint class, offering media streaming capabilities as well as all Class

1 features.

• Endpoint Class 3—Indicates a communications device class, offering all Class 1 and Class 2 features plus

location, 911, Layer 2 switch support and device information management capabilities.

• PoE Device Type—Port PoE type, for example, PD/PSE.

• PoE Power Source—Port’s power source.

• PoE Power Priority—Port’s power priority.

• PoE Power Value—Port’s power value.

• Hardware Revision –Hardware version.

• Firmware Revision—Firmware version.

• Software Revision—Software version.

• Serial Number—Device serial number.

• Manufacturer Name—Device manufacturer name.

• Model Name—Device model name.

• Asset ID—Asset ID.

Location Information

Enter the following data structures in hexadecimal as described in section 10.2.4 of the ANSI-TIA-1057 standard:

• Civic—Civic or street address.

Cisco Business 350 Series Switches Administration Guide

101

LLDP Neighbor Information

Administration

• Coordinates—Location map coordinates—latitude, longitude, and altitude.

• ECS ELIN—Device’s Emergency Call Service (ECS) Emergency Location Identification Number (ELIN).

Network Policy Table

• Application Type—Network policy application type, for example, Voice.

• VLAN ID—VLAN ID for which the network policy is defined.

• VLAN Type—VLAN type, Tagged or Untagged, for which the network policy is defined.

• User Priority—Network policy user priority.

• DSCP—Network policy DSCP.

LLDP Neighbor Information

The LLDP Neighbor Information page contains information that was received from neighboring devices.
After timeout (based on the value received from the neighbor Time To Live TLV during which no LLDP
PDU was received from a neighbor), the information is deleted.

To view the LLDP neighbors information, follow these steps:

Procedure

Step 1

Step 2

Click Administration > Discovery - LLDP > LLDP Neighbor Information.

Select the interface for which LLDP neighbor information is to be displayed.

This page displays the following fields for the selected interface:

• Local Port—Number of the local port to which the neighbor is connected.

• Chassis ID Subtype—Type of chassis ID (for example, MAC address).

• Chassis ID—Identifier of the 802 LAN neighboring device's chassis.

• Port ID Subtype—Type of the port identifier that is shown.

• Port ID—Identifier of port.

• System Name—Published name of the device.

• Time to Live—Time interval (in seconds) after which the information for this neighbor is deleted.

Step 3

Select a local port, and click Details.

The LLDP Neighbor Information page contains the following fields:

Port Details

• Local Port—Port number.

• MSAP Entry—Device Media Service Access Point (MSAP) entry number.

Cisco Business 350 Series Switches Administration Guide

102

Administration

LLDP Neighbor Information

Basic Details

• Chassis ID Subtype—Type of chassis ID (for example, MAC address).

• Chassis ID—Identifier of the 802 LAN neighboring device chassis.

• Port ID Subtype—Type of the port identifier that is shown.

• Port ID—Identifier of port.

• Port Description—Information about the port, including manufacturer, product name and hardware/software version.

• System Name—Name of system that is published.

• System Description—Description of the network entity (in alpha-numeric format). This includes the system name
and versions of the hardware, operating system, and networking software supported by the device. The value equals
the sysDescr object.

• Supported System Capabilities—Primary functions of the device. The capabilities are indicated by two octets. Bits
0 through 7 indicate Other, Repeater, Bridge, WLAN AP, Router, Telephone, DOCSIS cable device, and station,
respectively. Bits 8 through 15 are reserved.

• Enabled System Capabilities—Primary enabled function(s) of the device.

Management Address Table

• Address Subtype—Managed address subtype; for example, MAC or IPv4.

• Address—Managed address.

• Interface Subtype—Port subtype.

• Interface Number—Port number.

MAC/PHY Details

• Auto-Negotiation Supported—Port speed auto-negotiation support status. The possible values are True and False.

• Auto-Negotiation Enabled—Port speed auto-negotiation active status. The possible values are True and False.

• Auto-Negotiation Advertised Capabilities—Port speed auto-negotiation capabilities, for example, 1000BASE-T

half duplex mode, 100BASE-TX full duplex mode.

• Operational MAU Type—Medium Attachment Unit (MAU) type. The MAU performs physical layer functions,

including digital data conversion from the Ethernet interfaces’ collision detection and bit injection into the network;
for example, 100BASE-TX full duplex mode.

802.3 Power via MDI

• MDI Power Support Port Class—Advertised power support port class.

• PSE MDI Power Support—Indicates if MDI power is supported on the port.

• PSE MDI Power State—Indicates if MDI power is enabled on the port.

• PSE Power Pair Control Ability—Indicates if power pair control is supported on the port.

• PSE Power Pair—Power pair control type supported on the port.

• PSE Power Class—Advertised power class of the port.

Cisco Business 350 Series Switches Administration Guide

103

LLDP Neighbor Information

Administration

• Power Type—Type of pod device connected to the port.

• Power Source— Port power source.

• Power Priority—Port power priority.

• PD Requested Power Value—Amount of power requested by the pod device.

• PSE Allocated Power Value—Amount of power allocated by the PSE to the PD.

4-Wire Power via MDI

• 4-Pair PoE Supported—Indicates system and port support enabling the 4-pair wire (true only for specific ports that

have this HW ability).

• Spare Pair Detection/Classification Required—Indicates that the 4-pair wire is needed.

• PD Spare Pair Desired State—Indicates a pod device requesting to enable the 4-pair ability.

• PD Spare Pair Operational State—Indicates if the 4-pair ability is enabled or disabled.

802.3 Details

• 802.3 Maximum Frame Size—Advertised maximum frame size that is supported on the port.

802.3 Link Aggregation

• Aggregation Capability—Indicates if the port can be aggregated.

• Aggregation Status—Indicates if the port is currently aggregated.

• Aggregation Port ID—Advertised aggregated port ID.

802.3 Energy Efficient Ethernet (EEE)

• Remote Tx—Indicates the time (in micro seconds) that the transmitting link partner waits before it starts transmitting

data after leaving Low Power Idle (LPI mode).

• Remote Rx—Indicates the time (in micro seconds) that the receiving link partner requests that the transmitting link

partner waits before transmission of data following Low Power Idle (LPI mode).

• Local Tx Echo—Indicates the local link partner’s reflection of the remote link partner’s Tx value.

• Local Rx Echo—Indicates the local link partner’s reflection of the remote link partner’s Rx value.

MED Details

• Capabilities Supported—MED capabilities enabled on the port.

• Current Capabilities—MED TLVs advertised by the port.

• Device Class—LLDP-MED endpoint device class. The possible device classes are:

• Endpoint Class 1—Indicates a generic endpoint class, offering basic LLDP services.

• Endpoint Class 2—Indicates a media endpoint class, offering media streaming capabilities as well as all Class

1 features.

• Endpoint Class 3—Indicates a communications device class, offering all Class 1 and Class 2 features plus

location, 911, Layer 2 switch support and device information management capabilities.

Cisco Business 350 Series Switches Administration Guide

104

Administration

LLDP Neighbor Information

• PoE Device Type—Port PoE type, for example, PD/PSE.

• PoE Power Source—Port’s power source.

• PoE Power Priority—Port’s power priority.

• PoE Power Value—Port’s power value.

• Hardware Revision –Hardware version.

• Firmware Revision—Firmware version.

• Software Revision—Software version.

• Serial Number—Device serial number.

• Manufacturer Name—Device manufacturer name.

• Model Name—Device model name.

• Asset ID—Asset ID.

802.1 VLAN and Protocol

• PVID—Advertised port VLAN ID.

PPVID Table

• VID—Protocol VLAN ID.

• Supported—Supported Port and Protocol VLAN IDs.

• Enabled—Enabled Port and Protocol VLAN IDs.

VLAN ID Table

• VID—Port and Protocol VLAN ID.

• VLAN Name—Advertised VLAN names.

Protocol ID Table

• Protocol ID—Advertised protocol IDs.

Location Information

Enter the following data structures in hexadecimal as described in section 10.2.4 of the ANSI-TIA-1057 standard:

• Civic—Civic or street address.

• Coordinates—Location map coordinates—latitude, longitude, and altitude.

• ECS ELIN—Device’s Emergency Call Service (ECS) Emergency Location Identification Number (ELIN).

• Unknown—Unknown location information.

Network Policy Table

• Application Type—Network policy application type, for example, Voice.

• VLAN ID—VLAN ID for which the network policy is defined.

Cisco Business 350 Series Switches Administration Guide

105

LLDP Statistics

Administration

• VLAN Type—VLAN type, Tagged or Untagged, for which the network policy is defined.

• User Priority—Network policy user priority.

• DSCP—Network policy DSCP.

LLDP Statistics

The LLDP Statistics page displays LLDP statistical information per port.

To view the LLDP statistics, follow these steps:

Procedure

Step 1

Click Administration > Discovery - LLDP > LLDP Statistics.

For each port, the fields are displayed:

• Interface—Identifier of interface.

• Tx Frames (Total)—Number of transmitted frames.

• Rx Frames

• Total—Number of received frames

• Discarded—Total number of received frames that discarded

• Errors—Total number of received frames with errors

• Rx TLVs

• Discarded—Total number of received TLVs that discarded

• Unrecognized—Total number of received TLVs that unrecognized.

• Neighbor's Information Deletion Count—Number of neighbor ageouts on the interface.

Step 2

Click Refresh to view the latest statistics.

LLDP Overloading

Note

This setting is only available in the Advanced Mode view.)

Cisco Business 350 Series Switches Administration Guide

106

Administration

LLDP Overloading

LLDP adds information as LLDP and LLDP-MED TLVs into the LLDP packets. LLDP overload occurs when
the total amount of information to be included in an LLDP packet exceeds the maximum PDU size supported
by an interface.

The LLDP Overloading page displays the number of bytes of LLDP/LLDP-MED information, the number
of available bytes, and the overloading status of every interface.

To view LLDP overloading information:

Procedure

Step 1

Click Administration > Discovery - LLDP > LLDP Overloading.

In the LLDP Overloading Table, the following information is displayed for each port:

• Interface—Port identifier.

• Total Bytes In-Use—Total number of bytes of LLDP information in each packet

• Available Bytes Left—Total amount of available bytes left for other LLDP information in each packet.

• Status—Whether TLVs are being transmitted or if they are overloaded.

Step 2

To view the overloading details for a port, select it and click Details.

This page contains the following information for each TLV sent on the port:

• LLDP Mandatory TLVs

• Size (Bytes)—Total mandatory TLV byte size

• Status—If the mandatory TLV group is being transmitted, or if the TLV group was overloaded.

• LLDP MED Capabilities

• Size (Bytes)—Total LLDP MED capabilities packets byte size

• Status—If the LLDP MED capabilities packets sent, or if they overloaded.

• LLDP MED Location

• Size (Bytes)—Total LLDP MED location packets byte size

• Status—If the LLDP MED locations packets sent, or if they overloaded.

• LLDP MED Network Policy

• Size (Bytes)—Total LLDP MED network policies packets byte size

• Status—If the LLDP MED network policies packets sent, or if they overloaded.

• LLDP MED Extended Power via MDI

• Size (Bytes)—Total LLDP MED extended power via MDI packets byte size.

• Status—If the LLDP MED extended power via MDI packets sent, or if they overloaded.

Cisco Business 350 Series Switches Administration Guide

107

Discovery - CDP

• 802.3 TLVs

Administration

• Size (Bytes)—Total LLDP MED 802.3 TLVs packets byte size.

• Status—If the LLDP MED 802.3 TLVs packets sent, or if they overloaded.

• LLDP Optional TLVs

• Size (Bytes)—Total LLDP MED optional TLVs packets byte size.

• Status—If the LLDP MED optional TLVs packets sent, or if they overloaded.

• LLDP MED Inventory

• Size (Bytes)—Total LLDP MED inventory TLVs packets byte size.

• Status—If the LLDP MED inventory packets sent, or if they overloaded.

• Total

• Total (Bytes)—Total number of bytes of LLDP information in each packet.

• Available Bytes Left—Total number of available bytes left to send for additional LLDP information in each

packet.

Discovery - CDP

Cisco Discovery Protocol is a Layer 2, media-independent, and network-independent protocol that networking
applications use to learn about nearby, directly connected devices. Cisco Discovery Protocol is enabled by
default. Each device configured for Cisco Discovery Protocol advertises at least one address at which the
device can receive messages and sends periodic advertisements (messages) to the well-known multicast address
01:00:0C:CC:CC:CC. Devices discover each other by listening at that address. They also listen to messages
to learn when interfaces on other devices are up or go down.

Advertisements contain time-to-live information, which indicates the length of time a receiving device should
hold Cisco Discovery Protocol information before discarding it. Advertisements supported and configured in
Cisco software are sent, by default, every 60 seconds on interfaces that support Subnetwork Access Protocol
(SNAP) headers. Cisco devices never forward Cisco Discovery Protocol packets. Cisco devices that support
Cisco Discovery Protocol store the information received in a table. Information in this table is refreshed every
time an advertisement is received, and information about a device is discarded after three advertisements from
that device are missed.

This section describes how to configure CDP.

Properties

Similar to LLDP, the Cisco Discovery Protocol (CDP) is a link layer protocol for directlyconnected neighbors
to advertise themselves and their capabilities to each other. Unlike LLDP, CDP is a Cisco proprietary
protocol.To configure the CDP properties, complete the following steps:

Cisco Business 350 Series Switches Administration Guide

108

Administration

Properties

Procedure

Step 1

Step 2

Click Administration > Discovery - CDP > Properties.

Enter the parameters.

CDP Status

Select to enable CDP on the device.

CDP Frames Handling

If CDP is not enabled, select the action to be taken if a packet that matches the selected
criteria is received:

• Bridging—Forward the packet based on the VLAN

• Filtering—Delete the packet

• Flooding—VLAN unaware flooding that forwards incoming CDP packets to all the

ports excluding the ingress ports.

CDP Voice VLAN
Advertisement

Select to enable the device to advertise the voice VLAN in CDP on all of the ports that
are CDP enabled, and are member of the voice VLAN. The voice VLAN is configured
in the Properties, on page 156.

CDP Mandatory TLVs
Validation

If selected, incoming CDP packets not containing the mandatory TLVs are discarded and
the invalid error counter is incremented.

CDP Version

Select the version of CDP to use.

CDP Hold Time

Amount of time that CDP packets are held before the packets are discarded, measured in
multiples of the TLV Advertise Interval. For example, if the TLV Advertise Interval is
30 seconds, and the Hold Multiplier is 4, then the LLDP packets are discarded after 120
seconds. The following options are possible:

• Use Default—Use the default time (180 seconds)

• User Defined—Enter the time in seconds.

CDP Transmission Rate

The rate in seconds at which CDP advertisement updates are sent. The following options
are possible:

• Use Default—Use the default rate (60 seconds)

• User Defined—Enter the rate in seconds.

Device ID Format

Select the format of the device ID (MAC address or serial number). The following options
are possible:

• Use Default—Use the default rate (60 seconds)

• User Defined—Enter the rate in seconds.

Cisco Business 350 Series Switches Administration Guide

109

Interface Settings

Administration

Source Interface

IP address to be used in the TLV of the frames. The following options are possible:

• Use Default—Use the IP address of the outgoing interface.

• User Defined—Use the IP address of the interface (in the Interface field) in the

address TLV.

Interface

IF User Defined was selected for Source Interface, select the interface.

Syslog Voice VLAN
Mismatch

Syslog Native VLAN
Mismatch

Check to send a SYSLOG message when a voice VLAN mismatch is detected. This means
that the voice VLAN information in the incoming frame does not match what the local
device is advertising.

Check to send a SYSLOG message when a native VLAN mismatch is detected. This
means that the native VLAN information in the incoming frame does not match what the
local device is advertising.

Syslog Duplex Mismatch

Check to send a SYSLOG message when duplex information is mismatched. This means
that the duplex information in the incoming frame does not match what the local device
is advertising.

Step 3

Click Apply. The LLDP properties are defined.

Interface Settings

Note

This setting is only available in the Advanced Mode view.

The Interface Settings page enables you to enable/disable CDP per port. By setting these properties, it’s
possible to select the types of information to be provided to devices that support the LLDP protocol.

The LLDP-MED TLVs to be advertised can be selected in the LLDP MED Port Settings, on page 97.

To define the CDP interface settings:

Procedure

Step 1

Click Administration > Discovery - CDP > Interface Settings.

This page displays the following CDP information for each interface.

• CDP Status—CDP publishing option for the port.

• Reporting Conflicts with CDP Neighbors—Status of the reporting options that are enabled/disabled in the Edit page

(Voice VLAN/Native VLAN/Duplex).

• No. of Neighbors—Number of neighbors detected.

The bottom of the page has four buttons:

Cisco Business 350 Series Switches Administration Guide

110

Administration

CDP Local Information

• Copy Settings—Select to copy a configuration from one port to another.

• Edit—Fields explained in Step 2 below.

• CDP Local Information Details—Takes you to the CDP Local Information, on page 111 .

• CDP Neighbor Information Details—Takes you to the CDP Neighbors Information, on page 113.

Step 2

Select a port and click Edit.

This page provides the following fields:

• Interface—Select the interface to be defined.

• CDP Status—Select to enable/disable the CDP publishing option for the port.

Note
The next three fields are operational when the device has been set up to send traps to the management station.

• Syslog Voice VLAN Mismatch—Select to enable sending a SYSLOG message when a voice VLAN mismatch is
detected. This means that the voice VLAN information in the incoming frame doesn’t match what the local device
is advertising.

• Syslog Native VLAN Mismatch—Select to enable sending a SYSLOG message when a native VLAN mismatch is
detected. This means that the native VLAN information in the incoming frame doesn’t match what the local device
is advertising.

• Syslog Duplex Mismatch—Select to enable sending a SYSLOG message when duplex information mismatch is
detected. This means that the duplex information in the incoming frame doesn’t match what the local device is
advertising.

Step 3

Enter the relevant information, and click Apply. The port settings are written to the Running Configuration.

CDP Local Information

To view information that is advertised by the CDP protocol about the local device:

Procedure

Click Administration > Discovery - CDP > CDP Local Information. The following fields are displayed:

Interface

CDP State

Number of the local port.

Displays whether CDP is enabled or not.

Device ID TLV

• Device ID Type—Type of the device ID advertised in the device ID TLV

• Device ID—Device ID advertised in the device ID TLV

System Name TLV

System Name—System name of the device.

Cisco Business 350 Series Switches Administration Guide

111

CDP Local Information

Administration

Address TLV

Address1-3—IP addresses (advertised in the device address TLV).

Port TLV

Port ID

Port ID—Identifier of port advertised in the port TLV.

Identifier of port advertised in the port TLV.

Capabilities TLV

Capabilities—Capabilities advertised in the port TLV).

Version TLV

Version—Information about the software release on which the device is running.

Platform TLV

Platform—Identifier of platform advertised in the platform TLV.

Native VLAN TLV

Native VLAN—The native VLAN identifier advertised in the native VLAN TLV.

Full/Half Duplex TLV

Duplex—Whether port is half or full-duplex advertised in the full/half duplex TLV.

Appliance TLV

• Appliance ID—Type of device attached to port advertised in the appliance TLV

• Appliance VLAN ID—VLAN on the device used by the appliance, for instance if

the appliance is an IP phone, this is the voice VLAN.

Extended Trust TLV

Extended Trust—Enabled indicates that the port is trusted, and the packets received are
marked. In this case, packets received on such a port aren’t re-marked. Disabled indicates
that the port isn’t trusted in which case, the following field is relevant.

CoS for Untrusted Ports TLV

CoS for Untrusted Ports—If Extended Trust is disabled on the port, this field displays the
Layer 2 CoS value, meaning, an 802.1D/802.1p priority value. This is the COS value with
which all packets received on an untrusted port are remarked by the device.

Power Available TLV

• Request ID—Last power request ID received echoes the Request-ID field last received
in a Power Requested TLV. It’s 0 if no Power Requested TLV was received since
the interface last transitioned to Up.

• Power Management ID—Value incremented by 1 (or 2, to avoid 0) each time any

one of the following events occurs:

Available-Power or Management Power Level change

A Power Requested TLV is received with a Request-ID that is different from the
last-received set.

The interface transitions to Down.

• Available Power—Amount of power consumed by port

• Management Power Level—Displays the supplier's request to the pod device for its
Power Consumption TLV. The device always displays “No Preference” in this field.

Cisco Business 350 Series Switches Administration Guide

112

Administration

CDP Neighbors Information

4-Wire Power via MDI
(UPOE) TLV

Displays whether this TLV is supported.

• 4-Pair PoE Supported—Displays whether PoE is supported.

• Spare Pair Detection/Classification Required—Displays whether this classification

is required.

• PD Spare Pair Desired State—Displays the PD spare pair desired state.

• PD Spare Pair Operational State—Displays the PSE spare pair state.

CDP Neighbors Information

The CDP Neighbors Information page displays CDP information received from neighboring devices.

Information is deleted, after timeout (based on the value received from Time To Live TLV during which no
CDP PDU was received).

To view the CDP neighbors information, proceed as follows:

Procedure

Step 1

Step 2

Click Administration > Discovery - CDP > CDP Neighbor Information.

To select a filter, check the Filter checkbox, select a Local interface, and click Go.

The filter is applied on the list, and Clear Filter is activated to enable stopping the filter.

The CDP Neighbor Information page contains the following fields for the link partner (neighbor):

Device ID

Neighbors device ID.

System Name

Neighbors system name.

Local Interface

Number of the local port to which the neighbor is connected.

Advertisement Version

CDP protocol version.

Time to Live

Capabilities

Platform

Time interval (in seconds) after which the information for this neighbor is deleted.

Capabilities advertised by neighbor.

Information from Platform TLV of neighbor.

Neighbor Interface

Outgoing interface of the neighbor.

Step 3

Select a device, and click Details.

This page contains the following fields about the neighbor (actual field display depends on what the neighbor is advertising):

Device ID

Neighbors device ID.

Cisco Business 350 Series Switches Administration Guide

113

CDP Statistics

Administration

System Name

Neighbors system name.

Local Interface

Number of the local port to which the neighbor is connected.

Advertisement Version

CDP protocol version.

Time to Live (sec)

Time interval (in seconds) after which the information for this neighbor is deleted.

Capabilities

Platform

Capabilities advertised by neighbor.

Information from Platform TLV of neighbor.

Neighbor Interface

Outgoing interface of the neighbor.

Native VLAN

Neighbors native VLAN.

Duplex

Addresses

Whether neighbors interface is half or full-duplex.

Neighbors addresses.

Power Drawn

Amount of power consumed by neighbor on the interface.

Version

Neighbors software version.

Power Request

Power requested by PD that is connected to the port.

• Power Request List—Each PD may send a list (up to 3) of supported power levels.

Power Available

Shown if a PSE is connected to the port.

Note

Disconnects on the Clear Table button all connected devices if from CDP, and if Auto Smartport is enabled
change all port types to default.

CDP Statistics

The CDP Statistics page displays information regarding CDP frames that sent or received from a port. CDP
packets are received from devices attached to the switches interfaces, and are used for the Smartport feature.

To view CDP statistics, follow these steps:

Procedure

Step 1

Click Administration > Discovery - CDP > CDP Statistics.

The following fields are displayed for every interface:

Packets Received/Packets Transmitted:

Cisco Business 350 Series Switches Administration Guide

114

Administration

Locate Device

• Version 1—Number of CDP version 1 packets received/transmitted.

• Version 2—Number of CDP version 2 packets received/transmitted.

• Total—Total number of CDP packets received/transmitted.

CDP Error Statistics:

• Illegal Checksum—Number of packets received with illegal checksum value.

• Other Errors—Number of packets received with errors other than illegal checksums.

• Neighbors Over Maximum—Number of times that packet information couldn’t be stored in cache because of lack

of room.

Step 2

To clear all counters on all interfaces, click Clear All Interface Counters. To clear all counters on an interface, select
it and click Clear Interface Counters.

Locate Device

This feature enables flashing all network port LEDs on a specific device in the network to locate the device
physically. This feature is useful for locating a device within a room with many interconnected devices. When
this feature is activated, all network port LEDs on the device flash for a configured duration (one minute by
default).

Procedure

Step 1

Step 2

Click Administration > Locate Device.

Enter values in the following fields:

• Duration—Enter for how long (in seconds) the port’s LEDs flash.

• Remaining Time—This field is only displayed if the feature is currently activated. It displays the remaining time

during which the LED flashes.

• Unit ID—This field is only displayed when the device is in a stack. Specify the unit on which the network port LEDs

flash or All for all units.

Step 3

Click Start to activate the feature.

When the feature is activated the Start button is replaced by the Stop button, which allows you to stop the LED blinking
before the defined timer expires.

Ping

The Ping utility tests if a remote host can be reached and measures the round-trip time for packets sent.

Cisco Business 350 Series Switches Administration Guide

115

Administration

Ping operates by sending Internet Control Message Protocol (ICMP) echo request packets to the target host
and waiting for an ICMP response, sometimes called a pong. It measures the round-trip time and records any
packet loss.

To ping a host, follow these steps:

Ping

Procedure

Step 1

Step 2

Click Administration > Ping.

Configure ping by entering the fields:

Option

Host Definition

IP Version

Source IP

Description

Select whether to specify the source interface by its IP address or name. This field
influences the interfaces that are displayed in the Source IP field, as described below.

If the source interface is identified by its IP address, select either IPv4 or IPv6 to indicate
that it will be entered in the selected format.

Select the source interface as the source IPv4 address for communication with the
destination. If the Host Definition field was By Name, all IPv4 and IPv6 addresses are
displayed. If the Host Definition field was By IP Address, only the existing IP addresses
of the type specified in the IP Version field are displayed.

Note
If the Auto option is selected, the system computes the source address based on the
destination address.

Destination IPv6 Address Type

Select one of the following options:

• Link Local—The IPv6 address uniquely identifies hosts on a single network link.

A link local address has a prefix of FE80, isn’t routable, and can be used for
communication only on the local network. Only one link local address is supported.
If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable

from other networks.

Link Local Interface

If the IPv6 address type is Link Local, select from where it is received.

Destination IP Address/Name

Address or host name of the device to be pinged. Whether this is an IP address or host
name depends on the Host Definition.

Ping Interval

Note
This setting is only available
in the Advanced Mode view.

Number of Pings

Note

Length of time the system waits between ping packets. Ping is repeated the number of
times configured in the Number of Pings fields, whether the ping succeeds or not. Select
to use the default interval or specify your own value.

The number of times the ping operation is performed. Select to use the default or specify
your own value.

Cisco Business 350 Series Switches Administration Guide

116

Administration

Traceroute

Option

Description

This setting is only available
in the Advanced Mode view.

Status

Displays whether the ping succeeded or failed.

Step 3

Click Activate Ping to ping the host. The ping status appears and a message is added to the list of messages, indicating
the result of the ping operation.

Step 4

View the results of ping in the Ping Counters and Status section of the page:

• Number of Sent Packets—Number of packets sent by ping

• Number of Received Packets—Number of packets received by ping

• Packet Loss—Percentage of packets lost in ping process

• Minimum Round Trip Time—Shortest time for packet to return

• Maximum Round Trip Time—Longest time for packet to return

• Average Round Trip Time—Average time for packet to return

• Status—Fail or succeed

Traceroute

Traceroute discovers the IP routes forwarded by sending an IP packet to the target host and back to the device.
The Traceroute page shows each hop between the device and a target host, and the round-trip time to each
such hop.

Procedure

Step 1

Step 2

Click Administration > Traceroute.

Configure Traceroute by entering information in the following fields:

• Host Definition—Select whether hosts are identified by their IP address or name.

• IP Version—If the host is identified by its IP address, select either IPv4 or IPv6 to indicate that it will be entered in

the selected format.

• Source IP—Select the source interface whose IPv4 address will be used as the source IPv4 address for communication
messages. If the Host Definition field was By Name, all IPv4 and IPv6 addresses are displayed in this drop-down
field. If the Host Definition field was By IP Address, only the existing IP addresses of the type specified in the IP
Version field will be displayed.

• Host IP Address/Name—Enter the host address or name.

Cisco Business 350 Series Switches Administration Guide

117

Traceroute

Administration

• TTL—Enter the maximum number of hops that Traceroute permits. This is used to prevent a case where the sent

frame gets into an endless loop. The Traceroute command terminates when the destination is reached or when this
value is reached. To use the default value (30), select Use Default.

Note
This setting is only available in the Advanced Mode view.

• Timeout—Enter the length of time that the system waits for a frame to return before declaring it lost, or select Use

Default.

Note
This setting is only available in the Advanced Mode view.

Step 3

Click Activate Traceroute. The operation is performed.

Note
A pop-up will appear indicating if you would like to stop the traceroute. Click Stop Traceroute to stop the process.

A page appears to show the Round Trip Time (RTT) and status for each trip in the fields:

• Index—Displays the number of the hop.

• Host—Displays a stop along the route to the destination.

Round Trip Time (1-3)—Displays the round trip Time (ms) and Status.

Cisco Business 350 Series Switches Administration Guide

118

C H A P T E R 8

Port Management

This chapter contains the following sections:

• Port Settings, on page 119
• Error Recovery Settings, on page 122
• Loopback Detection Settings, on page 123
• Link Aggregation, on page 124
• UDLD, on page 127
• PoE, on page 130
• Green Ethernet, on page 135

Port Settings

The Port Settings page displays the global and per port setting of all the ports. Here, you can select and
configure the desired ports from the Edit Port Settings page.

To configure port settings, follow these steps:

Procedure

Step 1

Click Port Management > Port Settings.

The port settings are displayed for all ports.

Step 2

Enter the following fields:

• Link Flap Prevention—Select to minimize the disruption to your network. Enabled, this command automatically

disables ports that experience link-flap events.

• Jumbo Frames—Check to support packets of up to 9 KB in size. If Jumbo Frames isn’t enabled (default), the system
supports packet size up to 2,000 bytes. Note that receiving packets bigger than 9 KB might cause the receiving port
to shut down. Also, sending packets bigger than 10 KB bytes might cause the receiving port to shutdown.

For jumbo frames to take effect, the device must be rebooted after the feature is enabled.

Step 3

Click Apply to update the global setting.

Cisco Business 350 Series Switches Administration Guide

119

Port Settings

Port Management

Jumbo frames configuration changes take effect only after the Running Configuration is explicitly saved to the Startup
Configuration File using the File Operations, on page 76, and the device is rebooted.

Step 4

Step 5

To update the port settings, select the desired port, and click Edit.

Modify the following parameters:

Interface

Select the port number.

Port Description

Enter the port user-defined name or comment.

Note
The Interface and Port Description are displayed on the main page in the Port column.

Port Type

Displays the port type and speed. The possible options are:

• Copper Ports—Regular, not Combo, support the following values: 10M, 100M,

1000M (type: Copper) and 10G, 2.5G, 5G and 10G.

• Combo Ports —Combo port connected with either copper CAT6a cable or SFP Fiber

Gigabit Interface

• 10G-Fiber Optics—Ports with speed of either 1G or 10G

Administrative Status

Select whether the port must be Up or Down when the device is rebooted.

Operational Status

Displays whether the port is currently Up or Down. If the port is down because of an
error, the description of the error is displayed

Link Status SNMP Traps

Select to enable generation of SNMP traps that notify of changes to the link status of the
port.

Time Range

Select to enable the time range during which the port is in Up state. When the time range
isn’t active, the port is in shutdown. If a time range is configured, it is effective only when
the port is administratively Up.

Time Range Name

Select the profile that specifies the time range. Not relevant for the OOB port. If a time
range isn’t yet defined, click Edit.

Operational Time Range
State

Auto Negotiation

Operational Auto
Negotiation

Range State—Displays whether the time range is currently active or inactive.

Select to enable auto-negotiation on the port. Auto-negotiation enables a port to advertise
its transmission speed, duplex mode, and Flow Control abilities to the port link partner.

Displays the current auto-negotiation status on the port.

Administrative Port Speed

Select the speed of the port. The port type determines the available speeds. You can
designate Administrative Speed only when port auto-negotiation is disabled.

Operational Port Speed

Displays the current port speed that is the result of negotiation.

Cisco Business 350 Series Switches Administration Guide

120

Port Management

Port Settings

Administrative Duplex Mode

Select the port duplex mode. This field is configurable only when auto-negotiation is
disabled, and the port speed is set to 10M or 100M. At port speed of 1G, the mode is
always full-duplex. The possible options are:

• Half—The interface supports transmission between the device and the client in only

one direction at a time.

• Full—The interface supports transmission between the device and the client in both

directions simultaneously.

Operational Duplex Mode

Displays the ports current duplex mode.

Auto Advertisement

Select the capabilities advertised by auto-negotiation when it is enabled.

Note
Not all options are relevant for all devices.

The options are:

• Max Capability—All port speeds and duplex mode settings can be accepted.

• 10 Half—10 Mbps speed and Half Duplex mode (doesn’t appear on XG devices)

• 10 Full—10 Mbps speed and Full Duplex mode (doesn’t appear on XG devices)

• 100 Half—100 Mbps speed and Half Duplex mode (doesn’t appear on XG devices)

• 100 Full—100 Mbps speed and Full Duplex mode

• 1000 Full—1000 Mbps speed and Full Duplex mode

Operational Advertisement

Displays the capabilities currently published to the ports neighbor. The possible options
are those specified in the Administrative Advertisement field.

Preference Mode

Available only if auto-negotiation is enabled. Select the active-member mode of the
interface for the auto-negotiation operation. Select one of the following options:

• Member—Begin negotiation with the preference that the device port is the member

in the auto-negotiation process.

• Active—Begin negotiation with the preference that the device port is the active in

the auto-negotiation process.

Neighbor Advertisement

Displays the capabilities advertised by the neighboring device.

Back Pressure

Flow Control

Select the Back Pressure mode on the port (used with Half Duplex mode) to slow down
the packet reception speed when the device is congested. Selecting this option disables
the remote port, preventing it from sending packets by jamming the signal.

Enable or disable 802.3x Flow Control, or enable the auto-negotiation of Flow Control
on the port (only when in Full Duplex mode). Flow control auto-negotiation can’t be
enabled on combo ports.

Cisco Business 350 Series Switches Administration Guide

121

Error Recovery Settings

Port Management

MDI/MDIX-Media
Dependent Interface
(MDI)/Media Dependent
Interface with Crossover
(MDIX) status on the port.

The options are:

• MDIX—Select to swap the port's transmit and receive pairs.

• MDI—Select to connect this device to a station by using a straight through cable.

• Auto-Select to configure this device to automatically detect the correct pinouts for

connection to another device.

Operational MDI/MDIX

Displays the current MDI/MDIX setting.

Protected Port

Select to make this a protected port. (A protected port is also referred as a Private VLAN
Edge (PVE).) The features of a protected port are as follows:

• Protected Ports provide Layer 2 isolation between interfaces (Ethernet ports and

LAGs) that share the same VLAN.

• Packets received from protected ports can be forwarded only to unprotected egress
ports. Protected port filtering rules are also applied to packets that are forwarded by
software, such as snooping applications.

• Port protection is not subject to VLAN membership. Devices connected to protected
ports are not allowed to communicate with each other, even if they are members of
the same VLAN.

• Both ports and LAGs can be defined as protected or unprotected. Protected LAGs

are described in LAG Settings, on page 125.

Member in LAG

If the port is a member of a LAG, the LAG number appears; otherwise this field is left
blank.

Step 6

Click Apply. The Port Settings are written to the Running Configuration file.

Error Recovery Settings

The Error Recovery Settings page enables the user to automatically reactivate a port that has been shut down
because of a device error that occurs after the Automatic Recovery Interval has passed.

To configure the error recovery settings, complete these steps:

Procedure

Step 1

Step 2

Click Port Management > Error Recovery Settings.

Enter the following fields:

• Automatic Recovery Interval—Specify the time delay for automatic error recovery, if enabled, after a port is shut

down.

• Automatic ErrDisable Recovery

Cisco Business 350 Series Switches Administration Guide

122

Port Management

Loopback Detection Settings

• Port Security—Select to enable automatic error recovery when the port is shut down for port security violations.

• 802.1x Single Host Violation—Select to enable automatic error recovery when the port is shut down by 802.1x.

• ACL Deny—Select to enable automatic error recovery mechanism by an ACL action.

• STP BPDU Guard—Select to enable automatic error recovery mechanism when the port is shut down by STP

BPDU guard.

• STP Loopback Guard—Enable automatic recovery when the port is shut down by STP Loopback Guard.

• UDLD—Select to enable automatic error recovery mechanism for the UDLD shutdown state.

• Loopback Detection—Select to enable error recovery mechanism for ports shut down by loopback detection.

• Storm Control—Select to enable error recovery mechanism for ports shut down by storm control.

• Link Flap Prevention—Select to enable error recovery mechanism for ports shut down by link flap prevention.

Step 3

Click Apply to update the global setting.

To manually reactivate a port:

Step 4

Click Port Management > Error Recovery Settings.

The list of inactivated interfaces along with their Suspension Reason is displayed.

To filter the Suspension Reason, select a reason and click Go. Then, only the interfaces that are suspended for that reason
are displayed in the table.

Select the interface to be reactivated.

Click Reactivate.

Step 5

Step 6

Step 7

Loopback Detection Settings

Loopback Detection (LBD) provides protection against loops by transmitting loop protocol packets out of
ports on which loop protection has been enabled. When the switch sends out a loop protocol packet, and then
receives the same packet, it shuts down the port that received the packet.

Loopback Detection operates independently of STP. After a loop is discovered, the port that received the
loops is placed in the Shut Down state. A trap is sent and the event is logged. Network managers can define
a Detection Interval that sets the time interval between LBD packets.

To enable and configure LBD, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click Port Management > Loopback Detection Settings.

Select Enable in the Loopback Detection to enable the feature.

Enter the Detection Interval. This is the interval between transmission of LBD packets.

Click Apply to save the configuration to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

123

Link Aggregation

Port Management

The following fields are displayed for each interface, regarding the Loopback Detection State:

• Administrative—Loopback detection is enabled.

• Operational—Loopback detection is enabled but not active on the interface.

Step 5

Step 6

Step 7

Select whether to enable LBD on ports or LAGS in the Interface Type equals field in the filter.

Select the ports or LAGs on which LBD is to be enabled and click Edit.

Select the settings for the chosen Interface. Next, check Enable in the Loopback Detection State field for the port or LAG
selected.

Step 8

Click Apply to save the configuration to the Running Configuration file.

Link Aggregation

Link aggregation applies to various methods of combining multiple network connections in parallel in order
to increase throughput beyond what a single connection could sustain. It provides redundancy in case one of
the links should fail.

Link Aggregation Control Protocol (LACP) is part of the IEEE specification (802.3ad) that enables you to
bundle several ports together to form a single logical channel (LAG). LAGs multiply bandwidth, increase
port flexibility, and provide link redundancy between two devices.

Two types of LAGs are supported:

• Static—The ports in the LAG are manually configured. A LAG is static if LACP is disabled on it. The
group of ports assigned to a static LAG are always active members. After a LAG is manually created,
the LACP option can’t be added or removed, until the LAG is edited and a member is removed (which
can be added back prior to applying); the LACP button then become available for editing.

• Dynamic—A LAG is dynamic if LACP is enabled on it. The group of ports assigned to dynamic LAG
are candidate ports. LACP determines which candidate ports are active member ports. The nonactive
candidate ports are standby ports ready to replace any failing active member ports.

This section describes how to configure LAGs.

LAG Management

Link Aggregation Control Protocol (LACP) is part of the IEEE specification (802.3ad) that enables you to
bundle several ports together to form a single logical channel (LAG). LAGs multiply bandwidth, increase
port flexibility, and provide link redundancy between two devices.

To select the load-balancing algorithm of the LAG, follow these steps:

Procedure

Step 1

Step 2

Click Port Management > Link Aggregation > LAG Management.

Select one of the following Load Balance Algorithm:

Cisco Business 350 Series Switches Administration Guide

124

Port Management

LAG Settings

• MAC Address—Perform load balancing by source and destination MAC addresses on all packets.

• IP/MAC Address—Perform load balancing by the IP addresses on the IP packets, and by MAC addresses on non-IP

packets

Step 3

Click Apply. The Load Balance Algorithm is saved to the Running Configuration file.

To define the member or candidate ports in a LAG.

Step 4

Step 5

Select the LAG to be configured, and click Edit.

Enter the values for the following fields:

• LAG—Select the LAG number.

• LAG Name—Enter the LAG name or a comment.

• LACP—Select to enable LACP on the selected LAG. This makes it a dynamic LAG. This field can only be enabled

after moving a port to the LAG in the next field.

• Unit—Displays the stacking member for which LAG information is defined.

• Port List—Move the ports that are assigned to the Port List LAGs to the LAG Members. Up to eight ports per static

LAG can be assigned, and 16 ports can be assigned to a dynamic LAG.

Step 6

Click Apply. LAG membership is saved to the Running Configuration file.

LAG Settings

Procedure

The LAG Settings page displays a table of current settings for all LAGs. You can configure the settings of
selected LAGs, and reactivate suspended LAGs by launching the Edit LAG Settings page.

To configure the LAG settings or reactivate a suspended LAG:

Step 1

Click Port Management > Link Aggregation > LAG Settings.

The LAGs in the system are displayed.

Step 2

Step 3

Select a LAG, and click Edit.

Enter the values for the following fields:

Option

LAG

Description

Select the LAG ID number.

LAG Type

Displays the port type that comprises the LAG.

Description

Enter the LAG name or a comment.

Administrative Status

Set the selected LAG to be Up or Down.

Cisco Business 350 Series Switches Administration Guide

125

LAG Settings

Port Management

Option

Description

Link Status SNMP
Traps

Select to enable generation of SNMP traps notifying of changes to the link status of the ports
in the LAG.

Time Range

Select to enable the time range during which the port is in Up state. When the time range is
not active, the port is in shutdown. If a time range is configured, it is effective only when the
port is administratively up.

Time Range Name

Select the profile that specifies the time range. If a time range is not yet defined, click Edit to
configure the time range.

Operational Status

Displays whether the LAG is currently operating.

Operational Time
Range State

Administrative Auto
Negotiation

Displays whether the time range is currently active or inactive.

Enables or disable auto-negotiation on the LAG. Auto-negotiation is a protocol between two
link partners that enables a LAG to advertise its transmission speed and flow control to its
partner (the Flow Control default is disabled). It is recommended to keep auto-negotiation
enabled on both sides of an aggregate link, or disabled on both sides, while ensuring that link
speeds are identical.

Administrative Speed

Select the speed of the ports in the LAG.

Administrative
Advertisement

Select the capabilities to be advertised by the LAG. The options are:

• Max Capability—All LAG speeds and both duplex modes are available.

• 10 Full—The LAG advertises a 10 Mbps speed and the mode is full duplex.

• 100 Full—The LAG advertises a 100 Mbps speed and the mode is full duplex.

• 1000 Full—The LAG advertises a 1000 Mbps speed and the mode is full duplex.

Administrative Flow
Control

Set Flow Control to either Enable or Disable or enable the Auto-Negotiation of Flow Control
on the LAG.

Operational Auto
Negotiation

Displays the auto-negotiation setting.

Operational LAG Speed

Displays the current speed at which the LAG is operating.

Operational
Advertisement

Operational Flow
Control

Displays the Administrative Advertisement status. The LAG advertises its capabilities to its
neighbor LAG to start the negotiation process. The possible values are those specified in the
Administrative Advertisement field.

Displays the current Flow Control setting.

Protected LAG

Select to make the LAG a protected port for Layer 2 isolation.

Step 4

Click Apply. The Running Configuration file is updated.

Cisco Business 350 Series Switches Administration Guide

126

Port Management

LACP

LACP

A dynamic LAG is LACP-enabled, and LACP is run on every candidate port defined in the LAG. LACP
system priority and LACP port priority are both used to determine which of the candidate ports become active
member ports in a dynamic LAG configured with more than eight candidate ports.

Use the LACP page to configure the candidate ports for the LAG and to configure the LACP parameters per
port. With all factors equal, when the LAG is configured with more candidate ports than the maximum number
of active ports allowed (8), the device selects ports as active from the dynamic LAG on the device that has
the highest priority.

Note

The LACP setting is irrelevant on ports that are not members of a dynamic LAG.

To define the LACP settings, complete the following steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click Port Management > Link Aggregation > LACP.

If needed, edit the LACP System Priority and click Apply.

To edit an existing port, select the port, and click Edit.

In the Edit LACP Settings dialog box, enter the values for the following fields:

• Port—Select the port number to which timeout and priority values are assigned.

• LACP Port Priority—Enter the LACP priority value for the port.

• LACP Timeout—Time interval between the sending and receiving of consecutive LACP PDUs. Select the periodic

transmissions of LACP PDUs, which occur at either a Long or Short transmission speed, depending upon the
expressed LACP timeout preference.

Step 5

Click Apply. The Running Configuration file is updated.

UDLD

UDLD is a Layer 2-protocol that enables devices connected through fiber-optic or twisted-pair Ethernet cables
to detect unidirectional links. A unidirectional link occurs whenever traffic from a neighboring device is
received by the local device, but traffic from the local device is not received by the neighbor.

The purpose of UDLD is to detect ports on which the neighbor does not receive traffic from the local device
(unidirectional link) and to shut down those ports.

All connected devices must support UDLD for the protocol to successfully detect unidirectional links. If only
the local device supports UDLD, it is not possible for the device to detect the status of the link. In this case,
the status of the link is set to undetermined. The user can configure whether ports in the undetermined state
are shut down or not.

Cisco Business 350 Series Switches Administration Guide

127

Port Management

UDLD Global Settings

UDLD Global Settings

The Fiber Port UDLD Default State is only applicable to fiber ports.

The Message Time field is applicable to both copper and fiber ports.

To configure UDLD globally, follow these steps:

Procedure

Step 1

Step 2

Click Port Management > UDLD > UDLD Global Settings.

Enter the following fields:

• Message Time—Enter the interval between sending UDLD messages. This field is relevant for both fiber and copper

ports.

• Fiber Port UDLD Default State—This field is only relevant for fiber ports. The possible states are:

• Disabled—UDLD is disabled on all ports of the device.

• Normal—Device shuts down an interface if the link is unidirectional. If the link is undetermined, a notification

is issued.

• Aggressive—Device shuts down an interface if the link is uni-directional. If the link is bi-directional, the device

shuts down after the UDLD information times out. The port state is marked as undetermined.

Step 3

Click Apply to save the settings to the Running Configuration file.

UDLD Interface Settings

Use the UDLD Interface Settings page to change the UDLD state for a specific port. Here the state can be set
for copper or fiber ports. To copy a particular set of values to more than one port, set that value for one port
and use the Copy button to copy it to the other ports.

To configure UDLD for an interface, follow these steps:

Procedure

Step 1

Click Port Management > UDLD > UDLD Interface Settings.

Information is displayed for all UDLD enabled ports, or a selected group of ports.

• Port—The port identifier.

• UDLD State—The possible states are:

• Default—Port receives the value of the Fiber Port UDLD Default State.

• Disabled—UDLD is disabled on all fiber ports of the device.

Cisco Business 350 Series Switches Administration Guide

128

Port Management

UDLD Neighbors

• Normal—Device shuts down an interface if it detects that the link is unidirectional. It issues a notification if

the link is undetermined.

• Aggressive—Device shuts down an interface if the link is uni-directional. If the link is bi-directional, the device

shuts down after the UDLD information times out. The port state is marked as undetermined.

• Bidirectional State—The possible states are:

• Detection—The latest UDLD state of the port is in the process of being determined. Expiration time won't
expire since the last determination (if there was one), or since UDLD began running on the port, so that the
state isn’t yet determined.

• Bidirectional—Traffic sent by the local device is received by its neighbor, and traffic from the neighbor is

received by the local device.

• Undetermined—The state of the link between the port and its connected port can’t be determined either because

no UDLD message was received or the UDLD message didn’t contain the local device ID in it.

• Disabled (Default)—UDLD has been disabled on this port.

• Shutdown—The port has been shut down because its link with the connected device is undetermined in aggressive

mode.

• Idle—The port is idle.

• Number of Neighbors—Number of connected devices detected.

Step 2

Step 3

Step 4

To modify the UDLD state for a specific port, select it and click Edit.

Modify the value of the UDLD state.

Click Apply to save the settings to the Running Configuration file.

UDLD Neighbors

To view all devices connected to the local device, click Port Management > UDLD > UDLD Neighbors.

The following fields are displayed for all UDLD-enabled ports.

• Interface Name—Name of the local UDLD-enabled port.

• Neighbor Information:

• Device ID—ID of the remote device.

• Device MAC—MAC address of the remote device.

• Device Name—Name of the remote device.

• Port ID—Name of the remote port.

• State—State of the link between the local and neighboring device on the local port. The following values

are possible:

Cisco Business 350 Series Switches Administration Guide

129

PoE

Port Management

PoE

• Detection—The latest UDLD state of the port is in the process of being determined. Expiration time
has not yet expired since the last determination (if there was one), or since UDLD began running
on the port, so that the state is not yet determined.

• Bidirectional—Traffic sent by the local device is received by its neighbor, and traffic from the

neighbor is received by the local device.

• Undetermined—The state of the link between the port and its connected port cannot be determined
either because no UDLD message was received or the UDLD message did not contain the local
device ID in it.

• Disabled—UDLD has been disabled on this port.

• Shutdown—The port has been shut down because its link with the connected device is undetermined

in aggressive mode.

• Neighbor Expiration Time (Sec.)—Displays the time that must pass before the device attempts to determine

the port UDLD status. This is three times the Message Time.

• Neighbor Message Time (Sec.)—Displays the time between UDLD messages.

A PoE device is Power Sourcing Equipment (PSE) that delivers electrical power to a connected Pod Devices
(PD) over existing copper cables without interfering with the network traffic, updating the physical network
or modifying the network infrastructure.

PoE provides the following features:

• Eliminates the need to run 110/220 V AC power to all devices on a wired LAN.

• Eliminates the need to deploy double cabling systems in an enterprise significantly decreasing installation
costs. Power over Ethernet can be used in any enterprise network that deploys relatively low-pod devices
connected to the Ethernet LAN, such as: IP phones, Wireless access points, IP gateways, Audio and
video remote monitoring devices.

PoE implements in the following stages:

• Detection—Sends special pulses on the copper cable. When a PoE device is located at the other end, that

device responds to these pulses.

• Classification—Negotiation between the Power Sourcing Equipment (PSE) and the Pod Device (PD)
commences after the Detection stage. During negotiation, the PD specifies its class, which indicates
maximum amount of power that the PD consumes.

• Power Consumption—After the classification stage completes, the PSE provides power to the PD. If the
PD supports PoE, but without classification, it is assumed to be class 0 (the maximum). If a PD tries to
consume more power than permitted by the standard, the PSE stops supplying power to the port. PoE
supports two modes:

• Port Limit—The maximum power the device agrees to supply is limited to the value the system

administrator configures, regardless of the Classification result.

• Class Power Limit—The maximum power the device agrees to supply is determined by the results

of the Classification stage. This means that it is set as per the Client's request.

Cisco Business 350 Series Switches Administration Guide

130

Port Management

Properties

Warning

The PoE unit is to be connected only to PoE networks without routing to the outside plant.

Properties

Note

This section is only relevant for devices supporting PoE.

The PoE Properties page enables selecting either the Port Limit or Class Limit PoE mode and specifying the
PoE traps to be generated. These settings are entered in advance. When the PD actually connects and is
consuming power, it might consume much less than the maximum power allowed. Output power is disabled
during power-on reboot, initialization, and system configuration to ensure that PDs aren’t damaged.

To configure PoE on the device and monitor current power usage:

Procedure

Step 1

Step 2

Click Port Management > PoE > Properties.

Enter the values for the following fields:

• Power Mode—Select one of the following options:

• Class Limit—Maximum power limit per port is determined by the class of the device, which results from the

Classification stage.

• Port Limit—Maximum power limit per each port is configured by the user.

Note
When you change from Port Limit to Class Limit or conversely, disable the PoE ports, and enable them after
changing the power configuration.

• Traps—Enable or disable traps. If traps are enabled, you must also enable SNMP and configure at least one SNMP

Notification Recipient.

• Power Trap Threshold—Enter the usage threshold that is a percentage of the power limit. An alarm is initiated if

the power exceeds this value.

The following PoE power information is displayed for the device.

• Nominal Power—Total amount of power the device can supply to all the connected PDs.

• Allocated Power—The amount of power that is currently allocated to the PoE ports. The allocated power is

calculated by summing the power that is allocated to each of the PoE ports. If the port negotiated power allocation
with PD using CDP or LLDP then the port power allocation is based on the results of the CDP or LLDP
negotiation. If the port did not negotiate the power using CDP or LLDP then the power allocated to the port
equals the PD consumed power.

• Available Power—Nominal power minus the amount of consumed power.

Note

Cisco Business 350 Series Switches Administration Guide

131

PoE Settings

Port Management

• Power allocation based on LLDP negotiation may be higher than the negotiated power value.

• Power allocation based on CDP negotiation will be equal to the negotiated power value.

• The power allocated per port (if different from the consumed power value) is indicated in parentheses in

the “Power” column (PoE Setting Table).

• Software Version—Displays the software version of the PoE chip.

• PSE Chipset & Hardware Revision—PoE chipset and hardware revision number.

Step 3

Click Apply to save the PoE properties.

PoE Settings

The PoE Settings displays the system information for enabling PoE on the interfaces. It monitors the power
usage and maximum power limit per port when the PoE mode is Port Limit. When the power consumed on
the port exceeds the port limit, the port power is turned off.

To configure PoE settings, follow these steps:

Procedure

Step 1

Step 2

Step 3

Click Port Management > PoE > PoE Settings .

Select a port and click Edit.
Enter the value for the following field:

• Interface—Select the port to configure.

• Administrative Status—Enable or disable PoE on the port.

• Time Range—Select to enable.

• Time Range Name—If Time Range has been enabled, select the time range to be used. Click Edit to go to the Time

Range page.

• Priority Level—Select the port priority: low, high, or critical, for use when the power supply is low. For example,
if the power supply is running at 99% usage and port 1 is prioritized as high, but port 3 is prioritized as low, port 1
receives power and port 3 might be denied power.

• Administrative Power Allocation- The range depends on the port type. Ports supporting 60W PoE has a maximum

value of 60000. Otherwise, maximum value is 30000. Enter a value. (Range 0- 60000, Default: 30000).

• Force Four Pair—Enable this feature to provide enhanced power supply.

• Class—Displays the class of the device, which indicates the maximum power level of the device.

• Max Power Allocation—This field appears only if the Power Mode set in the PoE Properties page is Power Limit.

Displays the maximum amount of power permitted on this port.

• Negotiated Power—Power allocated to device.

Cisco Business 350 Series Switches Administration Guide

132

Port Management

PoE Settings-Class Limits

Note
The "expired" warning may appear alongside the Watt value when power is allocated to the device via CDP or LLDP
negotiation. When the switch stops receiving negotiation packets from the powered device, the port enters the expired
state. If this happens, the port will supply power based on the most recent negotiation packet received from this
device. If the device resends the negotiation packet, the port will exit the expired state and apply power based on
the information in the new packet.

• Power Negotiation Protocol—Protocol determining the negotiated power.

• Power Consumption—Displays the amount of power in milliwatts assigned Settings (Class Limit)

Step 4

Click Apply. The PoE settings for the port are written to the Running Configuration file.

PoE Settings-Class Limits

The PoE Settings (Class Limit) Settings page displays system PoE information for enabling PoE on the
interfaces and monitoring the current power usage and maximum power limit per port.

Note

PoE can be configured on the device for a specific period. This feature enables you to define, per port, the
days in the week and the hours that PoE is enabled. When the time range is not active, PoE is disabled.

This page limits the power per port based on the class of the connected PD. For these settings to be active,
the system must be in PoE Class Limit mode. That mode is configured in the PoE Properties, on page 131.
When the power consumed on the port exceeds the class limit, the port power is turned off.

To configure PoE class limit setting, complete the following steps:

Procedure

Step 1

Click Port Management > PoE > Settings (Class Limit).

Ports are displayed with relevant PoE information. These fields are described in the Edit page except for the following
fields:

• PoE Standard—Displays the type of PoE supported, such as 60W PoE and 802.3 AT PoE).

• Operational Status—Displays whether PoE is currently active on the port.

Step 2

Step 3

Select a port and click Edit.

Enter the value for the following field:

• Interface—Select the port to configure.

• Administrative Status—Check to enable.

• Time Range—Select to enabled PoE on the port.

• Time Range Name—If Time Range has been enabled, select the time range to be used. Click Edit to go to the Time

Range page.

Cisco Business 350 Series Switches Administration Guide

133

PoE Statistics

Port Management

• Priority Level—Select the port priority: low, high, or critical, for use when the power supply is low. For example,
if the power supply is running at 99% usage and port 1 is prioritized as high, but port 3 is prioritized as low, port 1
receives power and port 3 might be denied power.

• Class—Displays the class of the device, which indicates the maximum power level of the device:

Class

Maximum Power Delivered by Device Port

0

1

2

3

4

15.4 watt or 30.0 watt

4.0 watt

7.0 watt

15.4 watt

30.0 watt

• Max Power Allocation—This field appears only if the Power Mode set in the PoE Properties page is Power Limit.

Displays the maximum amount of power permitted on this port.

• Negotiated Power—Power allocated to device.

• Power Negotiation Protocol—Protocol determining the negotiated power

• Power Consumption—Displays the amount of power in milliwatts assigned Settings (Class Limit)

Step 4

Click Apply. The PoE settings for the port are written to the Running Configuration file.

PoE Statistics

PoE consumption readings are taken every 1 minute. The daily, weekly, and monthly statistics are saved in
flash memory, so that they are still available after reboot. A sample's average PoE consumption per port/device
is as follows: Sum of all PoE consumption readings in a period / Number of minutes in the sampling period.

To view the PoE consumption trend on the device and define settings for the view, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click Port Management > PoE Statistics.

Select the port.

Select the Refresh Rate.

The following fields are displayed for the selected interface:

Consumption History

• Average Consumption over Last Hour—Average of all PoE consumption readings in the last hour.

• Average Consumption over Last Day—Average of all PoE consumption readings in the last day.

• Average Consumption over Last Week—Average of all PoE consumption readings in the last week.

Cisco Business 350 Series Switches Administration Guide

134

Port Management

Green Ethernet

PoE Event Counters

• Overload Counter—Number of overload conditions detected.

• Short Counter—Number of short conditions detected

• Denied Counter—Number of denied conditions detected

• Absent Counter—Number of absent conditions detected

• Invalid Signature Counter—Number of invalid signature conditions detected

Step 5

Click View All Interfaces Statistics to complete the following tasks:

• Clear Event Counters—Clear the displayed event counters.

• View Interface Statistics—Display the above statistics for a selected interface

• View Interface History Graph—Display the counters in graph format for a selected interface

• Refresh—Refresh the displayed counters.

Step 6

Click View Interface History Graph, to complete the following tasks:

• View Interface Statistics—Display the graph statistics for a selected interface in table form. Enter the Time Span in

hours, days, weeks, or years.

• View All Interfaces Statistics—Display the above statistics for all interfaces in table format. Enter the Time Span

in hours, days, weeks, or years.

Green Ethernet

Green Ethernet is a common name for a set of features that is designed to be environmentally friendly, and
to reduce the power consumption of a device. Green Ethernet is different from EEE in that Green Ethernet
energy-detect is enabled on all devices whereas only Gigabyte ports are enabled with EEE.

The Green Ethernet feature can reduce overall power usage in the following ways:

• Energy-Detect Mode—On an inactive link, the port moves into inactive mode, saving power while

keeping the administrative status of the port Up. Recovery from this mode to full operational mode is
fast, transparent, and no frames are lost. This mode is supported on both GE and FE ports. This mode is
disabled by default.

• Short-Reach Mode—This feature provides for power savings on a short length of cable. After cable

length is analyzed, the power usage is adjusted for various cable lengths. If the cable is shorter than 30
meter for 10 gigabit ports and 50 meter for other type of ports, the device uses less power to send frames
over the cable, thus saving energy. This mode is only supported on RJ45 ports; it does not apply to Combo
ports. This mode is disabled by default.

In addition to the above Green Ethernet features, the 802.3az Energy Efficient Ethernet (EEE) is found on
devices supporting GE ports. EEE reduces power consumption when there is no traffic on the port. EEE is
enabled globally by default.

Cisco Business 350 Series Switches Administration Guide

135

Properties

Properties

Port Management

Power savings, current power consumption and cumulative energy saved can be monitored. The total amount
of saved energy can be viewed as a percentage of the power that would have been consumed by the physical
interfaces had they not been running in Green Ethernet mode. The saved energy displayed is only related to
Green Ethernet. The amount of energy saved by EEE is not displayed.

The Properties page displays and enables configuration of the Green Ethernet mode for the device. It also
displays the current power savings.

To enable Green Ethernet and EEE and view power savings, follow these steps:

Procedure

Step 1

Step 2

Click Port Management > Green Ethernet > Properties.

Enter the values for the following fields:

• Energy Detect Mode—Click the checkbox to enable this mode. This setting isn’t supported for some of the XG

devices.

• Short Reach—(For non-XG devices) Click the checkbox to enable this feature.

• Port LEDs—Select to enable the port LEDs. When these are disabled, they don’t display link status, activity, etc.

• 802.3 Energy Efficient Ethernet (EEE)—Globally enable or disable EEE mode. 802.3az EEE is designed to save

power when there is no traffic on the link. In Green Ethernet, power is reduced when the port is down. With 802.3az
EEE, power is reduced when the port is up, but there is no traffic on it.

Note
On Green Ethernet interfaces, the 802.3 EEE is supported for a link speed of 100Mbps and higher. On the 10G
interfaces, the 802.3 EEE is supported for a link speed of 1Gbps and higher.

Step 3

Step 4

Click Reset Energy Saving Counter—To reset the Cumulative Energy Saved information.

Click Apply. The Green Ethernet Properties are written to the Running Configuration file.

Port Settings

The Port Settings displays the current Green Ethernet and EEE modes per port, and enables configuring Green
Ethernet on a port using the Edit Port Setting page. For the Green Ethernet modes to operate on a port, the
corresponding modes must be activated globally in Properties, on page 136.

EEE settings are only displayed for devices that have GE ports. EEE works only when ports are set to Auto
negotiation. The exception is that EEE is still functional even when Auto Negotiation is disabled, but the port
is at 1GB or higher. The Short reach and Energy Detect features are always enabled on XG devices and can’t
be disabled. On devices with FE or GE ports these features can be enabled or disabled.

To define per port Green Ethernet settings, follow these steps:

Cisco Business 350 Series Switches Administration Guide

136

Port Management

Procedure

Port Settings

Step 1

Click Port Management > Green Ethernet > Port Settings.

The Port Settings page displays the following:

• Global Parameter Status-Displays following:

• Energy Detect Mode-Whether this mode is enabled or not.

• Short Reach Mode-Whether this mode is enabled.

• 802.3 Energy Efficient Ethernet (EEE) Mode-Whether this mode is enabled.

For each port the following fields are described:

Step 2

Step 3

Step 4

Step 5

Step 6

Select a Port and click Edit.

(For non-XG devices only) Select to enable or disable Energy Detect mode on the port.

(For non-XG devices only) Select to enable or disable Short Reach mode on the port if there are GE ports on the device.

Select to enable or disable 802.3 Energy Efficient Ethernet (EEE) mode on the port.

Select to enable or disable 802.3 Energy Efficient Ethernet (EEE) LLDP mode on the port (advertisement of EEE
capabilities through LLDP).

Step 7

Click Apply. The Green Ethernet port settings are written to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

137

Port Settings

Port Management

Cisco Business 350 Series Switches Administration Guide

138

C H A P T E R 9

Smartport

This chapter contains the following sections:

• Smartport Properties, on page 139
• Smartport Type Settings, on page 140
• Smartport Interface Settings, on page 141

Smartport Properties

A Smartport is an interface (port, VLAN or LAG) to which a built-in (or user-defined) macro may be applied.
This Smartport feature applies a preconfigured setup to a switch port based on the type of device that is trying
to connect. Auto Smartport lets the switch apply these configurations to interfaces automatically when it
detects the device. Smartport types refers to the types of devices, which can be attached to Smartports.

Note

If you have a 3.0.0.69 (or earlier) firmware version and you upgrade to the latest (March 2021) 3.1 version
(or later when available), the default setting will remain with the Smartport feature enabled.

If you purchase a switch that has the 3.1 firmware version (or later), the firmware will have the Smartport
feature disabled by default. This change was made because some customers didn’t necessarily want to use
the Smartport feature or it was causing an issue with connectivity and customers didn’t realize it was enabled.

To configure the Smartport feature, follow these steps:

Procedure

Step 1

Step 2

Click Smartport > Properties.
Enter the parameters.

• Administrative Auto Smartport-Select to enable or disable Auto Smartport. The following options are available:

• Disable-Select to disable Auto Smartport on the device. this is the default setting.

• Enable-Select to enable Auto Smartport on the device.

• Enable by Auto Voice VLAN-This enables the Auto Smartport, but is enabled only when Auto Voice VLAN

is on.

Cisco Business 350 Series Switches Administration Guide

139

Smartport Type Settings

Smartport

• Operational Auto Smartport-Displays the Auto Smartport status.

• Auto Smartport Device Detection Method-Select whether incoming CDP, LLDP, or both types of packets are used
to detect the Smartport type of the attaching devices. At least one must be checked for Auto Smartport to identify
devices.

• Operational CDP Status-Displays the operational status of CDP. Enable CDP if Auto Smartport is to detect the

Smartport type based on CDP advertisement.

• Operational LLDP Status-Displays the operational status of LLDP. Enable LLDP if Auto Smartport is to detect the

Smartport type based on LLDP/LLDP-MED advertisement.

• Auto Smartport Device Detection-Select each type of device for which Auto Smartport can assign Smartport types

to interfaces. If unchecked, Auto Smartport doesn’t assign that Smartport type to any interface.

Step 3

Click Apply. This sets the global Smartport parameters on the device.

Smartport Type Settings

Use the Smartport Type Settings page to edit the Smartport Type settings and view the Macro Source. Editing
the Smartport types parameters that are applied by the Auto Smartport configures the default values for these
parameters.

Note

Changes to Auto Smartport types cause the new settings to be applied to interfaces assigned to that type by
the Auto Smartport. In this case, binding an invalid macro or setting an invalid default parameter value causes
all ports of this Smartport type to become unknown.

Procedure

Step 1

Step 2

Step 3

Step 4

Click Smartport > Smartport Type Settings.

To view the Smartport macro associated with a Smartport type, select a Smartport type and click View Macro Source....

To modify the parameters of a macro, select a Smartport type and click Edit.

Enter the fields.

• Port Type—Select a Smartport type.

• Macro Name—Displays the name of the Smartport macro currently associated with the Smartport type.

• Macro Type—Select whether the pair of macro and antimacro associated with this Smartport type is a Built-in Macro

or a User-Defined Macro

• User Defined Macro—If desired, select the user-defined macro that is associated with the Smartport type. Pairing

of two macros is done by name and is described in the Smartport Macro section.
• Macro Parameters—Displays the following fields for three parameters in the macro:

• Parameter Name—Name of parameter in macro

Cisco Business 350 Series Switches Administration Guide

140

Smartport

Smartport Interface Settings

• Parameter Value—Current value of parameter in macro

• Parameter Description—Description of parameter

Step 5

Click Apply to save the changes to the running configuration. If the Smartport macro and/or its parameter values associated
with the Smartport type are modified, Auto Smartport automatically reapplies the macro to the interfaces currently assigned
with the Smartport type by Auto Smartport. Auto Smartport does not apply the changes to interfaces that statically assigned
a Smartport type.

Click Restore Defaults to restore the default values for the selected Smartport type.

Note

There’s no method to validate macro parameters because they don’t have a type association. Therefore, any
entry is valid at this point. However, invalid parameters can cause errors to the Smartport type assigned to an
interface, applying the associated macro.

Smartport Interface Settings

Use the Interface Settings page to perform the following tasks:

• Statically apply a specific Smartport type to an interface with interface-specific values for the macro

parameters.

• Enable Auto Smartport on an interface.

• Diagnose a Smartport macro that failed upon application, and caused the Smartport type to become

Unknown.

• Reapply a Smartport macro to an interface. In some circumstances, you may want to reapply a Smartport
macro so that the configuration at an interface is up to date. For instance, reapplying a switch Smartport
macro at a device interface makes the interface a member of the VLANs created since the last macro
application.

• Reset unknown interfaces, to set them to Default.

To apply a Smartport macro, follow these steps:

Procedure

Step 1

Click Smartport > Interface Settings.

To reapply the Smartport macros associated with a group of interfaces, select from the following and click Apply:

• All Switches, Routers, and Wireless Access Points—Reapplies the macros to all interfaces.

• All Switches—Reapplies the macros to all interfaces defined as switches.

• All Routers—Reapplies the macros to all interfaces defined as routers.

Cisco Business 350 Series Switches Administration Guide

141

Smartport Interface Settings

Smartport

• All Wireless Access Points—Reapplies the macros to all interfaces defined as access points.

To reapply the Smartport macros associated with an interface, select the interface and click Reapply.

The Reapply action also adds the interface to all newly created VLANs.

Step 2

Smartport Diagnostic.

If a Smartport macro fails, the Smartport Type of the interface is Unknown. Select an interface which is of unknown type
and click Show Diagnostic. This displays the command at which application of the macro failed.

Step 3

Resetting all Unknown interfaces to Default type.

• Select the Smartport Type equals to checkbox.

• Select Unknown.

• Click Go.

• Click Reset All Unknown Smartports. Then reapply the macro as described above. This performs a reset on all

interfaces with type Unknown, meaning that all interfaces are returned to the Default type.

Step 4

Step 5

Select an interface and click Edit.

Enter the fields.

• Interface—Select the port or LAG.

• Smartport Type—Displays the Smartport type currently assigned to the port/LAG.

• Smartport Application—Select the Smartport type from the Smartport Application pull-down.

• Smartport Application Method—If Auto Smartport is selected, Auto Smartport automatically assigns the Smartport

type based on the CDP and/or LLDP advertisement received from the connecting devices and applying the
corresponding Smartport macro. To statically assign a Smartport type and apply the corresponding Smartport macro
to the interface, select the desired Smartport type.

• Persistent Status—Select to enable the Persistent status. If enabled, the association of a Smartport type to an interface
remains even if the interface goes down, or the device is rebooted. Persistent is applicable only if the Smartport
Application of the interface is Auto Smartport. Enabling Persistent at an interface eliminates the device detection
delay that otherwise occurs.

• Macro Parameters—Displays the following fields for up to three parameters in the macro:

• Parameter Name—Name of parameter in macro

• Parameter Value—Current value of parameter in macro This can be changed here.

• Parameter Description—Description of parameter

Step 6

Click Reset to set an interface to Default if it is in Unknown status (as a result of an unsuccessful macro application).
The macro can be reapplied on the main page.

Step 7

Click Apply to update the changes and assign the Smartport type to the interface.

Cisco Business 350 Series Switches Administration Guide

142

C H A P T E R 10

VLAN Management

This chapter contains the following sections:

• VLAN Settings, on page 143
• VLAN Interface Settings, on page 144
• Port to VLAN, on page 146
• Port VLAN Membership, on page 147
• VLAN Translation, on page 149
• Private VLAN Settings, on page 151
• GVRP Settings, on page 152
• VLAN Groups, on page 152
• Voice VLAN, on page 156
• Access Port Multicast TV VLAN, on page 161
• Customer Port Multicast TV VLAN, on page 163

VLAN Settings

Virtual Local Area Network (VLAN) creation allows you to make separate broadcast domains on a switch.
The broadcast domains can associate with one another with the help of a Layer 3 device such as a router. A
VLAN is mainly used to form groups among the hosts regardless of where the hosts are physically located.
Thus, a VLAN improves security with the help of group formation among the hosts. When a VLAN is created,
it has no effect until that VLAN is attached to at least one port either manually or dynamically. One of the
most common reasons to set up a VLAN is to set up a separate VLAN for voice, and a separate VLAN for
data. This directs the packets for both types of data despite using the same network.

To create a VLAN, follow these steps:

Procedure

Step 1

Step 2

Click VLAN Management > VLAN Settings.

Click Add to add one or more new VLANs.

The page enables the creation of either a single VLAN or a range of VLANs.

Step 3

To create a single VLAN, select the VLAN radio button, enter the VLAN ID, and optionally the VLAN Name.

Cisco Business 350 Series Switches Administration Guide

143

VLAN Interface Settings

VLAN Management

Step 4

Add the following fields for the new VLANs.

• VLAN Interface State-Select to enable the VLAN.

• Link Status SNMP Traps-Select to enable link-status generation of SNMP traps.

Step 5

Step 6

To add a range of VLANs, check Range and enter a VLAN Range (Range 2 - 4094) in the VLAN range field.

Click Apply to create the VLAN(s).

VLAN Interface Settings

The VLAN Interface Settings page displays and enables configuration of VLAN-related parameters.

To configure the VLAN settings, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Click VLAN Management > Interface Settings.

Select a Global Ethertype Tagging method for the S-VLAN tag.

• Dot1q-8100

• Dot1ad-88a8

• 9100

• 9200

Select an interface type (Port or LAG), and click Go. Ports or LAGs and their VLAN parameters are displayed.

To configure a Port or LAG, select it and click Edit.

Enter the values for the following fields:

Interface

Select a Port/LAG.

Switchport Mode

Select either Layer 2 or Layer 3.

Cisco Business 350 Series Switches Administration Guide

144

VLAN Management

VLAN Interface Settings

Interface VLAN Mode

Select the interface mode for the VLAN. The options are:

• Access—The interface is an untagged member of a single VLAN. A port configured

in this mode is known as an access port.

• Trunk—The interface is an untagged member of one VLAN at most, and is a tagged
member of zero or more VLANs. A port configured in this mode is known as a trunk
port.

• General—The interface can support all functions as defined in the IEEE 802.1q
specification. The interface can be a tagged or untagged member of one or more
VLANs.

• Customer—Selecting this option places the interface in QinQ mode. This enables

you to use your own VLAN arrangements (PVID) across the provider network. The
device is in Q-in-Q mode when it has one or more customer ports.

• Private VLAN—Host—Select to set the interface as either isolated or community.
Then select either an isolated or community VLAN in the Secondary VLAN - Host
field.

• Private VLAN—Promiscuous—Select to set the interface as promiscuous.

• VLAN Mapping—Tunnel—Select to set the interface as a VLAN tunnel edge port.

• VLAN Mapping—One to One—Select to set the interface as to be used as a VLAN

mapping one to one edge port.

Ethertype Tagging

Select an Ethertype tagging method for the S-VLAN tag (see the Global Ethertype Tagging
field above).

Frame Type

Ingress Filtering

Primary VLAN

(Available only in General mode) Select the type of frame that the interface can receive.
Frames that aren’t of the configured frame type are discarded at ingress. Possible values
are:

• Admit All—The interface accepts all types of frames: untagged frames, tagged

frames, and priority tagged frames.

• Admit Tagged Only—The interface accepts only tagged frames.

• Admit Untagged Only—The interface accepts only untagged and priority frames.

Available only in General mode) Select to enable ingress filtering. When an interface is
ingress filtering enabled, the interface discards all incoming frames that are classified as
VLANs of which the interface isn’t a member. Ingress filtering can be disabled or enabled
on general ports. It’s always enabled on access ports and trunk ports.

Select the primary VLAN in the private VLAN. The primary VLAN is used to allow
Layer 2 connectivity from promiscuous ports to isolated ports and to community ports.
If None is selected if the interface isn’t in private VLAN mode.

Secondary VLAN Host

Select an isolated or community VLAN for those hosts that only require a single secondary
VLAN

Cisco Business 350 Series Switches Administration Guide

145

Port to VLAN

VLAN Management

Available Secondary VLANs
to Selected Secondary
VLANs

For promiscuous ports, move all secondary VLANs that are required for normal packet
forwarding from the Available Secondary VLANs. Promiscuous and trunk ports can be
members in multiple VLANs

Step 6

Click Apply.

Port to VLAN

The Port to VLAN section displays the VLAN memberships of the ports in various presentations. You can
use them to add or remove memberships to or from the VLANs.

When a port is forbidden default VLAN membership, that port isn’t allowed membership in any other VLAN.
An internal VID of 4095 is assigned to the port.

To forward packets, the VLAN-aware devices that carry VLAN traffic along the path between end nodes
must be manually configured or must dynamically learn the VLANs and their port memberships from the
Generic VLAN Registration Protocol (GVRP).

Untagged port membership between two VLAN-aware devices with no intervening VLAN-aware devices,
must be to the same VLAN. The PVID on the ports between the two devices must be the same if the ports
are to send and receive untagged packets to and from the VLAN. Otherwise, traffic might leak from one
VLAN to another.

Frames that are VLAN-tagged can pass through other network devices that are VLAN-aware or VLAN-unaware.
If a destination end node is VLAN-unaware, but is to receive traffic from a VLAN, then the last VLAN-aware
device, must send frames of the destination VLAN to the end node untagged.

Use the Port to VLAN page to display and configure the ports within a specific VLAN.

To map ports or LAGs to a VLAN, follow these steps:

Procedure

Step 1

Step 2

Click VLAN Management > Port to VLAN.

Select a VLAN and the interface type (Port or LAG), and click Go to display or to change the port characteristic with
respect to the VLAN.

The port mode for each port or LAG appears with its current port mode configured from the VLAN Interface Settings,
on page 144.

Each port or LAG appears with its current registration to the VLAN.

The following fields are displayed:

• VLAN Mode—Displays port type of ports in the VLAN.

• Membership Type: Select one of the following options:

• Forbidden—The interface isn’t allowed to join the VLAN even from GVRP registration. When a port isn’t a
member of any other VLAN, enabling this option on the port makes the port part of internal VLAN 4095 (a
reserved VID).

Cisco Business 350 Series Switches Administration Guide

146

VLAN Management

Port VLAN Membership

• Excluded—The interface is currently not a member of the VLAN. This is the default for all the ports and LAGs

when the VLAN is newly created.

• Tagged—The interface is a tagged member of the VLAN.

• Untagged—The interface is an untagged member of the VLAN. Frames of the VLAN are sent untagged to the

interface VLAN.

• Multicast MTV VLAN—The interface used for Digital TV using Multicast IP The port joins the VLAN with

a VLAN tag of Multicast TV VLAN.

• PVID—Select to set the PVID of the interface to the VID of the VLAN. PVID is a per-port setting.

Step 3

Click Apply. The interfaces are assigned to the VLAN, and written to the Running Configuration file.

You can continue to display and/or configure port membership of another VLAN by selecting another VLAN ID.

Port VLAN Membership

The Port VLAN Membership page displays all ports on the device along with a list of VLANs to which each
port belongs. If the port-based authentication method for an interface is 802.1x and the Administrative Port
Control is Auto, then:

• Until the port is authenticated, it’s excluded from all VLANs, except guest and unauthenticated ones. In

the VLAN to Port page, the port is marked with an upper case P.

• When the port is authenticated, it receives membership in the VLAN in which it was configured.

Note

VLAN IS mode is supported. This means that port VLAN membership can be configured ahead of time for
various VLAN modes. When the port is put into the specific VLAN mode, the configuration becomes active.

To assign a port to one or more VLANs, follow these steps:

Procedure

Step 1

Step 2

Click VLAN Management > Port VLAN Membership.
Select interface type (Port or LAG), and click Go. The following fields are displayed for all interfaces of the selected
type:

• Interface—Port/LAG ID.

• Mode—Interface VLAN mode that was selected in the VLAN Interface Settings, on page 144.

• Administrative VLANs—Drop-down list that displays all VLANs of which the interface might be a member.

• Operational VLANs—Drop-down list that displays all VLANs of which the interface is currently a member.

• LAG—If interface selected is Port, displays the LAG in which it’s a member.

Cisco Business 350 Series Switches Administration Guide

147

Port VLAN Membership

VLAN Management

Step 3

Step 4

Select a port, and click Join VLAN.

Enter the values for the following fields:

• Interface—Select a Port or LAG.

• Current VLAN Mode—Displays the port VLAN mode that was selected in the VLAN Interface Settings, on page

144.

• Access Mode Membership (Active)

• Access VLAN ID—Select the VLAN from the drop-down list.

• Multicast TV VLAN—Select the multicast TV VLAN from the drop-down list.

• Trunk Mode Membership

• Native VLAN ID—When the port is in Trunk mode, it’s a member of this VLAN.

• Tagged VLANs—When the port is in Trunk mode, it’s a member of these VLANs. The following options are

possible:

All VLANs—When the port is in Trunk mode, it’s a member of all VLANs.

User Defined—When the port is in Trunk mode, it’s a member of the VLANs that are entered here.

• General Mode Membership

• Untagged VLANs—When the port is in General mode, it’s an untagged member of this VLAN.

• Tagged VLANs—When the port is in General mode, it’s a tagged member of these VLANs.

• Forbidden VLANs—When the port is in General mode, the interface isn’t allowed to join the VLAN even from
GVRP registration. When a port isn’t a member of any other VLAN, enabling this option on the port makes
the port part of internal VLAN 4095 (a reserved VID).

• General PVID—When the port is in General mode, it’s a member of these VLANs.

• Customer Mode Membership

• Customer VLAN ID—When the port is in Customer mode, it’s a member of this VLAN.

• Customer Multicast VLANs—When the port is in Customer mode, it’s a member of this Multicast TV VLAN.

Step 5

Select a port and click Details to view the following fields:

• Administrative VLANs—Port is configured for these VLANs.

• Operational VLANs—Port is currently a member of these VLANs.

Click Apply (for Join VLAN). The settings are modified and written to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

148

VLAN Management

VLAN Translation

VLAN Translation

VLAN Translation is sometimes referred to when the same forwarding domain includes several different
VLANS. Therefore, a frame ingressing an interface with a certain VLAN ID can be forwarded to another port
with another VLAN ID.

VLAN Mapping

To configure a VLAN mapping, follow these steps:

Procedure

Step 1

Click VLAN Management > VLAN Translation > VLAN Mapping.

A table of previously defined VLAN mappings setting is displayed.

Step 2

Select one of the following mapping types:

• One to One—Select this option to display and edit settings of the interface set to one-to-one VLAN mapping mode.

• Tunnel Mapping—Select this option to display and edit settings of the interface set to Tunnel VLAN mapping mode.

Step 3

Click Add and enter the following fields:

• Interface—Select the port.

• Interface VLAN Mode—Displays the current interface mode.

• Mapping Type—Select one of the following:

• One to One—Select this option to define one-to-one VLAN mapping settings.

• Tunnel Mapping—Select this option to define tunnel VLAN mapping settings.

• One to One Translation—This option is available if you selected the one-to-one option in Mapping Type selection.

Select one of the following:

• Source VLAN—Configure the ID of the customer VLAN (C-VLAN) that will be translated to S-VLAN

(translated VLAN).

• Translated VLAN—Configure the S-VLAN that replaces the specified C-VLAN.

• Tunnel Mapping—This option is available if you selected the Tunnel Mapping option in the Mapping Type selection.

Select one of the following:

• Customer VLAN—Select Default to define the required action for C-VLANs not specified or VLAN List to

specifically define VLAN tunnel behavior for listed VLANs.

• Tunneling—Select Drop or Outer VLAN ID If Outer VLAN ID is selected, enter the VLANs.

Cisco Business 350 Series Switches Administration Guide

149

Protocol Handling

VLAN Management

Step 4

Click Apply. The parameters are written to the Running Configuration file.

Protocol Handling

Note

In order to configure per-interface protocol handling behavior, Hardware Resources, on page 91 must be
allocated to the VLAN Mapping feature.

To configure the handling of L2CP PDUs received on a VLAN translation tunnel edge port, follow these
steps:

Procedure

Step 1

Click VLAN Management > VLAN Translation > Protocol Handling.

Note
In order to configure per-interface protocol handling behavior, hardware resources must be allocated to the VLAN
Mapping feature.

Step 2

Step 3

Optionally, set the Default Tunneling CoS: enter a value between 0-7 (default=5) to define a global CoS value to apply
to L2CP PDUs which are forwarded and encapsulated on VLAN tunneling edge ports. This value is used for all interfaces
that do not have specific user CoS settings.

Select one of the entries listed and click Copy Settings to copy the settings in the selected entry to one or more entries.
Click Edit to edit the selected entry.

Step 4

Enter the following fields.

• Interface—Select the port.

• Interface VLAN Mode—Displays the current interface VLAN mode

• BPDU VLAN ID—Select one of the following:

• None—there is no VLAN selected for L2CP BPDU tunneling. Use this selection to disable tunneling L2CP

PDUs.

• vlan-id—one of the VLAN IDs configured on device - select one of the available VLAN IDs to use for tunneling

L2CP PDUs on this interface.

• CoS—Select one of the following:

• Use Default—Select this to use the global default value

• User Defined—Select this option set a value between 0-7.

• Drop Threshold—Select one of the following:

• None—Select this to disable the drop threshold.

Cisco Business 350 Series Switches Administration Guide

150

VLAN Management

Private VLAN Settings

• User Defined—Select this option to set the drop threshold. Valid values are between 8-256 Kbps (default is

32Kbps).

• Protocol Forwarding—Check the protocols that the device will forward and encapsulate:

• CDP —Check to enable forwarding and encapsulating this protocol.

• LLDP —Check to enable forwarding and encapsulating this protocol

• STP —Check to enable forwarding and encapsulating this protocol.

• VTP —Check to enable forwarding and encapsulating this protocol.

Step 5

Click Apply. The parameters are written to the Running Configuration file.

Private VLAN Settings

The Private VLAN feature provides layer-2 isolation between ports. This means that at the level of bridging
traffic, as opposed to IP routing, ports that share the same Broadcast domain cannot communicate with each
other. The ports in a private VLAN can be located anywhere in the layer 2 network, meaning that they do not
have to be on the same switch. The private VLAN is designed to receive untagged or priority-tagged traffic
and transmit untagged traffic.

Note

Interface membership in the Private VLANs is configured on the VLAN Interface Settings, on page 144. Use
Private VLAN—Host interface mode for Community and Isolated VLANs, or Private VLAN—Promiscuous
interface mode for Primary VLAN.

To create a new private VLAN, follow these steps:

Procedure

Step 1

Step 2

Step 3

Click VLAN Management > Private VLAN Settings.

Click Add.

Enter the values for the following fields:

• Primary VLAN ID—Select a VLAN to be defined as the primary VLAN in the private VLAN. The primary VLAN

is used to allow Layer 2 connectivity from promiscuous ports to isolated ports and to community ports.

• Isolated VLAN ID—An isolated VLAN is used to allow isolated ports to send traffic to the primary VLAN.

• Available Community VLANs—Move the VLANs that you want to be community VLANs to the Selected Community
VLANs list. Community VLANs allow Layer 2 connectivity from community ports to promiscuous ports and to
community ports of the same community. This is called Community VLAN Range on the main page.

Cisco Business 350 Series Switches Administration Guide

151

GVRP Settings

VLAN Management

Step 4

Click Apply. The settings are modified and written to the Running Configuration file.

GVRP Settings

Adjacent VLAN-aware devices can exchange VLAN information with each other by using the Generic VLAN
Registration Protocol (GVRP). GVRP is based on the Generic Attribute Registration Protocol (GARP) and
propagates VLAN information throughout a bridged network.

GVRP must be activated globally and on each port. When it’s activated, it transmits and receives GARP
Packet Data Units (GPDUs). VLANs that are defined but not active aren’t propagated. To propagate the
VLAN, it must be up on at least one port. By default, GVRP is disabled globally and on ports.

To define GVRP settings for an interface:

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Step 6

Click VLAN Management > GVRP Settings.

Select GVRP Global Status to enable GVRP globally.

Click Apply to set the global GVRP status.

Select an interface type (Port or LAG), and click Go to display all interfaces of that type.

To define GVRP settings for a port, select it, and click Edit.

Enter the values for the following fields:

• Interface—Select the interface (Port or LAG) to be edited.

• GVRP State—Select to enable GVRP on this interface.

• Dynamic VLAN Creation—Select to enable Dynamic VLAN Creation on this interface.

• GVRP Registration—Select to enable VLAN Registration using GVRP on this interface.

Step 7

Click Apply. GVRP settings are modified, and written to the Running Configuration file.

VLAN Groups

VLAN groups are used for load balancing of traffic on a Layer 2 network. Packets are assigned a VLAN
according to various classifications.

If several classifications schemes are defined, packets are assigned to a VLAN in the following order:

• TAG—If the packet is tagged, the VLAN is taken from the tag.

• MAC-Based VLAN—If a MAC-based VLAN has been defined, the VLAN is taken from the source

MAC-to-VLAN mapping of the ingress interface.

Cisco Business 350 Series Switches Administration Guide

152

VLAN Management

MAC-Based Groups

• Subnet-Based VLAN—If a subnet-based VLAN has been defined, the VLAN is taken from the source

IP-to-VLAN mapping of the ingress interface.

• Protocol-Based VLAN—If a protocol-based VLAN has been defined, the VLAN is taken from the

(Ethernet type) protocol-to-VLAN mapping of the ingress interface.

• PVID—VLAN is taken from the port default VLAN ID.

MAC-Based Groups

MAC-based VLAN classifications enable packets to be classified by their source MAC address. You can then
define MAC-to-VLAN mapping per interface. You can define several MAC-based VLAN groups, which each
group containing different MAC addresses. These MAC-based groups can be assigned to specific ports/LAGs.
MAC-based VLAN groups can’t contain overlapping ranges of MAC addresses on the same port.

To assign a MAC address to a VLAN Group, complete the following steps:

Procedure

Step 1

Step 2

Step 3

Click VLAN Management > VLAN Groups > MAC-Based Groups.

Click Add.

Enter the values for the following fields:

• MAC Address—Enter a MAC address to be assigned to a VLAN group.

Note
This MAC address can’t be assigned to any other VLAN group.

• Prefix Mask—Enter one of the following:

• Host(48)—To include all bits of MAC address in the prefix mask (48 bits)

• Length—Prefix of the MAC address

• Group ID—Enter a user-created VLAN group ID number.

Step 4

Click Apply. The MAC address is assigned to a VLAN group.

MAC-Based Groups to VLAN

To assign a MAC-based VLAN group to a VLAN on an interface, complete the following:

Procedure

Step 1

Step 2

Click VLAN Management > VLAN Groups > MAC-Based Groups to VLAN.

Click Add.

Cisco Business 350 Series Switches Administration Guide

153

Subnet-Based Groups

VLAN Management

Step 3

Enter the values for the following fields:

• Group Type—Displays that the group is MAC-Based.

• Interface—Enter a general interface (port/LAG) through which traffic is received.

• Group ID—Select a VLAN group.

• VLAN ID—Select the VLAN to which traffic from the VLAN group is forwarded.

Step 4

Click Apply to set the mapping of the VLAN group to the VLAN. This mapping does not bind the interface dynamically
to the VLAN; the interface must be manually added to the VLAN.)

Subnet-Based Groups

The subnet-based group VLAN classification enable packets to be classified according to their subnet. You
can then define subnet-to-VLAN mapping per interface. You can define several subnet-based VLAN groups,
which each group containing different subnets.

These groups can be assigned to specific ports/LAGs. Subnet-based VLAN groups cannot contain overlapping
ranges of subnets on the same port.

To add a subnet-based group, complete the following steps:

Procedure

Step 1

Step 2

Step 3

Click VLAN Management > VLAN Groups > Subnet-Based Groups.

Click Add.

Enter the following fields:

• IP Address—Enter the IP address on which the subgroup is based.

• Prefix Mask—Enter the prefix mask that defines the subnet.

• Group ID—Enter a group ID.

Step 4

Click Apply. The group is added, and written to the Running Configuration file.

Subnet-Based Groups to VLAN

To map a subnet group to a port, the port must not have DVA configured on it (see VLAN Interface Settings,
on page 144). Several groups can be bound to a single port, with each port being associated to its own VLAN.
It is possible to map several groups to a single VLAN as well.

To map the subnet group to a VLAN, follow these steps:

Cisco Business 350 Series Switches Administration Guide

154

VLAN Management

Protocol-Based Groups

Procedure

Step 1

Step 2

Click VLAN Management > VLAN Groups > Subnet-Based Groups to VLAN.

To associate an interface with a protocol-based group and VLAN, click Add.

The Group Type field displays the type of group being mapped.

Step 3

Enter the following fields.

• Interface—Port or LAG number assigned to VLAN according to protocol-based group.

• Group ID—Protocol group ID.

• VLAN ID—Attaches the specified group for this interface to a user-defined VLAN ID.

Step 4

Click Apply. The subnet-based group ports are mapped to VLANs, and written to the Running Configuration file.

Protocol-Based Groups

Groups of protocols can be defined and then bound to a port. After the protocol group is bound to a port, every
packet originating from a protocol in the group is assigned the VLAN that is configured in the Protocol-Based
Groups page. To define a set of protocols, follow these steps.

Procedure

Step 1

Step 2

Step 3

Click VLAN Management > VLAN Groups > Protocol-Based Groups.

Click Add to add a protocol-based VLAN group.

Enter the following fields:.

• Encapsulation—Protocol Packet type. The following options are available:

• Ethernet V2—If this is selected, select the Ethernet Type.

• LLC-SNAP (rfc1042)—If this is selected, enter the Protocol Value.

• LLC—If this is selected, select the DSAP-SSAP Values.

• Ethernet Type—Select the Ethernet type for Ethernet V2 encapsulation. This is the two-octet field in the Ethernet
frame used to indicate which protocol is encapsulated in the payload of the Ethernet packet) for the VLAN group.

• Protocol Value—Enter the protocol for LLC-SNAP (rfc 1042) encapsulation.

• Group ID—Enter a protocol group ID.

Step 4

Click Apply. The Protocol Group is added, and written to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

155

Protocol-Based Groups to VLAN

VLAN Management

Protocol-Based Groups to VLAN

Protocol-based VLANs divide the physical network into logical VLAN groups for each protocol. When a
frame is received at a port, its VLAN membership can then be determined based on the protocol type. Several
groups can be bound to a single port, with each port being associated to its own VLAN. It’s possible to map
several groups to a single VLAN as well.

To map the protocol port to a VLAN, follow these steps:

Procedure

Step 1

Step 2

Click VLAN Management > VLAN Groups > Protocol-Based Groups to VLAN.

To associate an interface with a protocol-based group and VLAN, click Add.

The Group Type field displays the type of group being mapped.

Step 3

Enter the following fields.

• Interface—Port or LAG number assigned to VLAN according to protocol-based group.

• Group ID—Protocol group ID.

• VLAN ID—Attaches the interface to a user-defined VLAN ID.

Step 4

Click Apply. The protocol ports are mapped to VLANs, and written to the Running Configuration file.

Voice VLAN

The voice VLAN feature enables access ports to carry IP voice traffic from an IP phone. When the switch is
connected to an IP Phone, the phone sends voice traffic with Layer 3 IP precedence and Layer 2 class of
service (CoS) values, which are both set to 5 by default. Because the sound quality of an IP phone call can
deteriorate if the data is unevenly sent, the switch supports quality of service (QoS) based on IEEE 802.1p
CoS. QoS uses classification and scheduling to send network traffic from the switch in a predictable manner.

Voice VLAN can propagate the CoS/802.1p and DSCP settings by using LLDP-MED Network policies. The
LLDP-MED is set by default to response with the Voice QoS setting if an appliance sends LLDP-MED
packets. MED-supported devices must send their voice traffic with the same CoS/802.1p and DSCP values,
as received with the LLDP-MED response.You can disable the automatic update between Voice VLAN and
LLDP-MED and use your own network polic ies. Working with the OUI mode, the device can additionally
configure the mapping and remarking (CoS/802.1p) of the voice traffic based on the OUI.

By default, all interfaces are CoS/802.1p trusted. The device applies the quality of service based on the
CoS/802.1p value found in the voice stream. For Telephony OUI voice streams, you can override the quality
of service and optionally remark the 802.1p of the voice streams by specifying the desired CoS/802.1p values
and using the remarking option under Telephony OUI.

Properties

Use the Voice VLAN Properties page for the following:

Cisco Business 350 Series Switches Administration Guide

156

VLAN Management

Properties

• View how voice VLAN is currently configured.

• Configure the VLAN ID of the Voice VLAN.

• Configure voice VLAN QoS settings.

• Configure the voice VLAN mode (Telephony OUI or Auto Voice VLAN).

• Configure how Auto Voice VLAN is triggered.

To view and configure Voice VLAN properties:

Procedure

Step 1

Click VLAN Management > Voice VLAN > Properties.

• The voice VLAN settings configured on the device are displayed in the Voice VLAN Settings (Administrative

Status) block.

• The voice VLAN settings that are actually being applied to the voice VLAN deployment are displayed in the Voice

VLAN Settings (Operational Status) block.

Step 2

Enter values for the following Administrative Status fields:

• Voice VLAN ID—Enter the VLAN that is to be the Voice VLAN.

Note
Changes in the voice VLAN ID, CoS/802.1p, and/or DSCP cause the device to advertise the administrative voice
VLAN as a static voice VLAN. If the option Auto Voice VLAN Activation triggered by external Voice VLAN is
selected, then the default values need to be maintained.

• CoS/802.1p —Select a CoS/802.1p value for the LLDP-MED as a voice network policy. Refer to Administration >

Discovery > LLDP > LLDP MED Network Policy for more details.

• DSCP—Selection of DSCP values for the LLDP-MED as a voice network policy. Refer to Administration > Discovery

> LLDP > LLDP MED Network Policy for more details.

The following Operational Status fields are displayed:

• Voice VLAN ID—Voice VLAN.

• CoS/802.1p —Value being used by LLDP-MED as a voice network policy. Refer to Administration > Discovery >

LLDP > LLDP MED Network Policy for more details.

• DSCP—Value used by the LLDP-MED as a voice network policy.

The following Dynamic Voice VLAN Settings fields are displayed:

• Dynamic Voice VLAN—Select this field to disable or enable voice VLAN feature in one of the following ways:

• Enable Auto Voice VLAN—Enable Dynamic Voice VLAN in Auto Voice VLAN mode.

• Enable Telephony OUI—Enable Dynamic Voice VLAN in Telephony OUI mode.

• Disable-Disable Auto Voice VLAN or Telephony OUI

Cisco Business 350 Series Switches Administration Guide

157

Auto Voice VLAN

VLAN Management

• Auto Voice VLAN Activation—If Auto Voice VLAN was enabled, select one of the following options to activate

Auto Voice VLAN:

• Immediate—Auto Voice VLAN on the device is to be activated and put into operation immediately if enabled.

• By external Voice VLAN trigger—Auto Voice VLAN on the device is activated and put into operation only

if the device detects a device advertising the voice VLAN.

Note
Manually reconfiguring the voice VLAN ID, CoS/802.1p, and/or DSCP from their default values results in a
static voice VLAN, which has higher priority than auto voice VLAN.

Step 3

Click Apply. The VLAN properties are written to the Running Configuration file.

Auto Voice VLAN

If Auto Voice VLAN mode is enabled, use the Auto Voice VLAN page to view the relevant global and
interface parameters.

You can also use this page to manually restart Auto Voice VLAN, by clicking Restart Auto Voice VLAN.
After a short delay, this resets the voice VLAN to the default voice VLAN and restarts the Auto Voice VLAN
discovery and synchronization process on all the switches in the LAN that are Auto Voice VLAN enabled.

Note

This only resets the voice VLAN to the default voice vlan if the Source Type is in the Inactive state.

To view Auto Voice VLAN parameters:

Procedure

Step 1

Click VLAN Management > Voice VLAN > Auto Voice VLAN.

The Operational Status block on this page shows the information about the current voice VLAN and its source:

• Auto Voice VLAN Status—Displays whether Auto Voice VLAN is enabled.

• Voice VLAN ID—The identifier of the current voice VLAN

• Source Type—Displays the type of source where the voice VLAN is discovered by the root device.

• CoS/802.1p—Displays CoS/802.1p values to be used by the LLDP-MED as a voice network policy.

• DSCP—Displays DSCP values to be used by the LLDP-MED as a voice network policy.

• Root Switch MAC Address—The MAC address of the Auto Voice VLAN root device that discovers or is configured

with the voice VLAN from which the voice VLAN is learned.

• Switch MAC Address—Base MAC address of the device. If the device's Switch MAC address is the Root Switch

MAC Address, the device is the Auto Voice VLAN root device.

• Voice VLAN ID Change Time—Last time that voice VLAN was updated.

Cisco Business 350 Series Switches Administration Guide

158

VLAN Management

Telephony OUI

Step 2

Click Restart Auto Voice VLAN to reset the voice VLAN to the default voice VLAN and restart Auto Voice VLAN
discovery on all the Auto-Voice-VLAN-enabled switches in the LAN.

The Voice VLAN Local Source Table displays voice VLAN configured on the device, and any voice VLAN configuration
advertised by directly connected neighbor devices. It contains the following fields:

• Interface—Displays the interface on which voice VLAN configuration was received or configured. If N/A appears,
the configuration was done on the device itself. If an interface appears, a voice configuration was received from a
neighbor.

• Source MAC Address—MAC address of a UC from which the voice configuration was received.

• Source Type—Type of UC from which voice configuration was received. The following options are available:

• Default—Default voice VLAN configuration on the device

• Static—User-defined voice VLAN configuration defined on the device

• CDP—UC that advertised voice VLAN configuration is running CDP.

• LLDP—UC that advertised voice VLAN configuration is running LLDP.

• Voice VLAN ID—The identifier of the advertised or configured voice VLAN

• Voice VLAN ID—The identifier of the current voice VLAN.

• CoS/802.1p—The advertised or configured CoS/802.1p values that are used by the LLDP-MED as a voice network

policy.

• DSCP—The advertised or configured DSCP values that are used by the LLDP-MED as a voice network policy.

• Best Local Source—Displays whether this voice VLAN was used by the device. The following options are available:

• Yes—The device uses this voice VLAN to synchronize with other Auto Voice VLAN-enabled switches. This
voice VLAN is the voice VLAN for the network unless a voice VLAN from a higher priority source is discovered.
Only one local source is the best local source.

• No—This isn’t the best local source.

Step 3

Click Refresh to refresh the information on the page

Telephony OUI

OUIs are assigned by the Institute of Electrical and Electronics Engineers, Incorporated (IEEE) Registration
Authority. Since the number of IP phone manufacturers is limited and well-known, the known OUI values
cause the relevant frames, and the port on which they are seen, to be automatically assigned to a Voice VLAN.
Use the Telephony OUI page to configure Telephony OUI QoS properties. In addition, the Auto Membership
Aging time can be configured. If the specified time period passes with no telephony activity, the port is
removed from the Voice VLAN.

To configure Telephony OUI and/or add a new Voice VLAN OUI:

Cisco Business 350 Series Switches Administration Guide

159

Telephone OUI Interface

Procedure

VLAN Management

Step 1

Click VLAN Management > Voice VLAN > Telephony OUI.

The Telephony OUI page contains the following fields:

• Telephony OUI Operational Status—Displays whether OUIs are used to identify voice traffic.

• CoS/802.1p—Select the CoS queue to be assigned to voice traffic.

• Remark CoS/802.1p—Select whether to remark egress traffic.

• Auto Membership Aging Time—Enter the time delay to remove a port from the voice VLAN after all of the MAC

addresses of the phones detected on the ports have aged out.

Step 2

Click Apply to update the Running Configuration of the device with these values.

The Telephony OUI table appears:

• Telephony OUI—First six digits of the MAC address that are reserved for OUIs.

• Description—User-assigned OUI description.

Step 3

Click Restore Default OUIs to delete all of the user-created OUIs, and leave only the default OUIs in the table. The OUI
information may not be accurate until the restoration is completed. This may take several seconds. After several seconds
have passed, refresh the page by exiting it and reentering it.

To delete all the OUIs, select the top checkbox. All the OUIs are selected and can be deleted by clicking Delete. If you
then click Restore Default OUIs, the system recovers the known OUIs.

Step 4

Step 5

To add a new OUI, click Add.

Enter the values for the following fields:

• Telephony OUI—Enter a new OUI.

• Description—Enter an OUI name.

Step 6

Click Apply. The OUI is added to the Telephony OUI Table.

Telephone OUI Interface

The QoS attributes can be assigned per port to the voice packets in one of the following modes:

• All—Quality of Service (QoS) values configured to the Voice VLAN are applied to all of the incoming

frames that are received on the interface and are classified to the Voice VLAN.

• Telephony Source MAC Address (SRC)—The QoS values configured for the Voice VLAN are applied
to any incoming frame that is classified to the Voice VLAN and contains an OUI in the source MAC
address that matches a configured telephony OUI.

Use the Telephony OUI Interface page to add an interface to the voice VLAN on the basis of the OUI identifier
and to configure the OUI QoS mode of voice VLAN.

Cisco Business 350 Series Switches Administration Guide

160

VLAN Management

Procedure

To configure Telephony OUI on an interface:

Access Port Multicast TV VLAN

Step 1

Click VLAN Management > Voice VLAN > Telephony OUI Interface.

The Telephony OUI Interface page contains voice VLAN OUI parameters for all interfaces.

Step 2

Step 3

To configure an interface to be a candidate port of the telephony OUI-based voice VLAN, click Edit.

Enter the values for the following fields:

• Interface—Select an interface.

• Telephony OUI VLAN Membership—If enabled, the interface is a candidate port of the telephony OUI based voice
VLAN. When packets that match one of the configured telephony OUI are received, the port is added to the voice
VLAN.

• Voice VLAN QoS Mode (Telephone OUI QoS Mode in main page)—Select one of the following options:

• All—QoS attributes are applied on all packets that are classified to the Voice VLAN.

• Telephony Source MAC Address—QoS attributes are applied only on packets from IP phones.

Step 4

Click Apply. The OUI is added.

Access Port Multicast TV VLAN

Multicast TV VLANs enable Multicast transmissions to subscribers who are not on the same data VLAN
(Layer 2-isolated), without replicating the Multicast transmission frames for each subscriber VLAN.

Subscribers, who are not on the same data VLAN (Layer 2-isolated) and are connected to the device with
different VLAN ID membership, can share the same Multicast stream by joining the ports to the same Multicast
VLAN ID.

The network port, connected to the Multicast server, is statically configured as a member in the Multicast
VLAN ID.

The network ports, which through subscribers communicate with the Multicast server (by sending IGMP
messages), receive the Multicast streams from the Multicast server, while including the Multicast TV VLAN
in the Multicast packet header. For this reasons, the network ports must be statically configured as the following:

• Trunk or general port type (see VLAN Interface Settings, on page 144)

• Member of the Multicast TV VLAN

The subscriber receiver ports can be associated with the Multicast TV VLAN only if it is defined as an access
port.

One or more IP Multicast address groups can be associated with the same Multicast TV VLAN.

Any VLAN can be configured as a Multicast-TV VLAN. A port assigned to a Multicast-TV VLAN:

Cisco Business 350 Series Switches Administration Guide

161

Multicast Group to VLAN

VLAN Management

• Joins the Multicast-TV VLAN.

• Packets passing through egress ports in the Multicast TV VLAN are untagged.

• The port’s Frame Type parameter is set to Admit All, allowing untagged packets (see VLAN Interface

Settings, on page 144).

The Multicast TV VLAN configuration is defined per port. Customer ports are configured to be member of
Multicast TV VLANs using the Port Multicast VLAN Membership page.

Multicast Group to VLAN

You can map up to 256 ranges of IPv4 addresses to a Multicast TV VLAN. In each range, you can configure
the full scope of Multicast addresses.

Note

An * indicates that the corresponding Multicast Group is inactive because the associated Multicast TV VLAN
does not exist. Go to the VLAN Settings, on page 143 to create the VLAN.

To define the Multicast TV VLAN configuration, follow these steps:

Procedure

Step 1

Step 2

Click VLAN Management > Access Port Multicast TV VLAN > Multicast Group to VLAN.

Click Add to associate a Multicast group to a VLAN. Any VLAN can be selected.

Enter the following fields:

• Multicast TV VLAN-VLAN to which the Multicast packets are assigned. When a VLAN is selected here, it becomes

a Multicast TV VLAN.

• Multicast Group Start-First IPv4 address of the Multicast group range.

• Group Definition-Select one of the following range options:

• By group size-Specify the number of Multicast addresses in the group range.

• By range-Specify an IPv4 Multicast address greater than the address in the Multicast Group Start field. This is

the last address of the range.

Step 3

Click Apply. Multicast TV VLAN settings are modified, and written to the Running Configuration file.

Port Multicast TV VLAN Membership

To define the Multicast TV VLAN configuration:

Cisco Business 350 Series Switches Administration Guide

162

VLAN Management

Customer Port Multicast TV VLAN

Procedure

Step 1

Step 2

Step 3

Step 4

Click VLAN Management > Access Port Multicast TV VLAN > Port Multicast VLAN Membership.

Select a VLAN from Multicast TV VLAN.

Select an interface from Interface Type.

The Candidate Access Ports list contains all access ports configured on the device. Move the required ports to the Member
Access Ports field.

Step 5

Click Apply. Multicast TV VLAN settings are modified, and written to the Running Configuration file.

Customer Port Multicast TV VLAN

A triple play service provisions three broadband services, over a single broadband connection:

• High-speed Internet access

• Video

• Voice

The triple play service is provisioned for service provider subscribers, while keeping Layer 2-isolation between
them.

Each subscriber has a CPE MUX box. The MUX has multiple access ports that are connected to the subscriber's
devices (PC, telephone and so on), and one network port that is connected to the access device.

The box forwards the packets from the network port to the subscriber's devices based on the VLAN tag of
the packet. Each VLAN is mapped to one of the MUX access ports.

Packets from subscribers to the service provider network are forwarded as VLAN tagged frames, in order to
distinguish between the service types, which mean that for each service type there is a unique VLAN ID in
the CPE box.

All packets from the subscriber to the service provider network are encapsulated by the access device with
the subscriber’s VLAN configured as customer VLAN (Outer tag or S-VID), except for IGMP snooping
messages from the TV receivers, which are associated with the Multicast TV VLAN. VOD information that
is also sent from the TV receivers are sent like any other type of traffic.

Packets from the service provider network that received on the network port to the subscriber are sent on the
service provider network as double tag packets, while the outer tag (Service Tag or S-Tag) represent one of
the two type of VLAN as following:

• Subscriber’s VLAN (Includes Internet and IP Phones)

• Multicast TV VLAN

The inner VLAN (C-Tag) is the tag that determines the destination in the subscriber’s network (by the CPE
MUX).

Cisco Business 350 Series Switches Administration Guide

163

VLAN Management

CPE VLAN to VLAN

CPE VLAN to VLAN

To support the CPE MUX with subscribers VLANs, subscribers may require multiple video providers, and
each provider is assigned a different external VLAN.

CPE (internal) Multicast VLANs must be mapped to the Multicast provider (external) VLANs.

After a CPE VLAN is mapped to a Multicast VLAN, it can participate in IGMP snooping.

To map CPE VLANs, follow these steps:

Procedure

Step 1

Step 2

Step 3

Click VLAN Management > Customer Port Multicast TV VLAN > CPE VLAN to VLAN.

Click Add.

Enter the following fields:

• CPE VLAN-Enter the VLAN defined on the CPE box.

• Multicast TV VLAN-Select the Multicast TV VLAN which is mapped to the CPE VLAN.

Step 4

Click Apply. CPE VLAN Mapping is modified, and written to the Running Configuration file.

Port Multicast VLAN Membership

The ports associated with the Multicast VLANs must be configured as customer ports (see VLAN Interface
Settings, on page 144).

To map ports to Multicast TV VLANs, follow these steps, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click VLAN Management > Customer Port Multicast TV VLAN > Port Multicast VLAN Membership.

Select a VLAN from Multicast TV VLAN.

Select an interface from Interface Type.

The Candidate Customer Ports list contains all access ports configured on the device. Move the required ports to the
Member Customer Ports field.

Step 5

Click Apply. The new settings are modified, and written to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

164

C H A P T E R 11

Spanning Tree

This chapter contains the following sections:

• STP Status and Global Settings, on page 165
• STP Interface Settings, on page 166
• RSTP Interface Settings, on page 169
• MSTP, on page 170
• PVST, on page 175

STP Status and Global Settings

Spanning Tree Protocol (STP) protects a Layer 2 Broadcast domain from Broadcast storms by selectively
setting links to standby mode to prevent loops. In standby mode, these links temporarily stop transferring user
data. After the topology changes so that the data transfer is made possible, the links are automatically
re-activated.

STP provides a tree topology for any arrangement of switches and interconnecting links, by creating a unique
path between end stations on a network, and thereby eliminating loops.

The STP Status and Global Settings page contains parameters for enabling the required STP mode. Use the
STP Interface Settings page, RSTP Interface Settings page, and MSTP Properties page to configure each
mode, respectively. To set the STP status and global settings, follow these steps:

Procedure

Step 1

Step 2

Click Spanning Tree > STP Status & Global Settings.

Enter the parameters.

Global Settings:

Spanning Tree State

Select to enable on the device.

STP Loopback Guard

Select to enable Loopback Guard on the device.

STP Operation Mode

Select an STP mode.

Cisco Business 350 Series Switches Administration Guide

165

STP Interface Settings

Spanning Tree

BPDU Handling

Select how Bridge Protocol Data Unit (BPDU) packets are managed when STP is disabled.
BPDUs are used to transmit spanning tree information.

• Filtering-Filters BPDU packets when Spanning Tree is disabled on an interface.

• Flooding-Floods BPDU packets when Spanning Tree is disabled on an interface.

Path Cost Default Values

Selects the method used to assign default path costs to the STP ports. The default path
cost assigned to an interface varies according to the selected method.

• Short-Specifies the range 1–65,535 for port path costs

• Long-Specifies the range 1–200,000,000 for port path costs

Bridge Settings:

Bridge Settings:

Priority

Hello Time

Max Age

Forward Delay

Sets the bridge priority value. After exchanging BPDUs, the device with the lowest priority
becomes the Root Bridge. In the case that all bridges use the same priority, then their
MAC addresses are used to determine the Root Bridge. The bridge priority value is
provided in increments of 4096. For example, 4096, 8192, 12288, and so on.

Set the interval (in seconds) that a Root Bridge waits between configuration messages.

Set the interval (in seconds) that the device can wait without receiving a configuration
message, before attempting to redefine its own configuration.

Set the interval (in seconds) that a bridge remains in a learning state before forwarding
packets. For more information, refer to STP Interface Settings, on page 166.

Designated Root / Bridge ID

The bridge priority concatenated with the MAC address of the device.

Root Bridge ID

The Root Bridge priority concatenated with the MAC address of the Root Bridge.

Root Port

The port that offers the lowest cost path from this bridge to the Root Bridge.

Root Path Cost

The cost of the path from this bridge to the root.

Topology Changes Counts

The total number of STP topology changes that have occurred.

Last Topology Change

The time interval that elapsed since the last topology change occurred. The time appears
in a days/hours/minutes/seconds format.

Step 3

Click Apply. The STP Global settings are written to the Running Configuration file.

STP Interface Settings

The STP Interface Settings page enables you to configure STP on a per-port basis, and to view the information
learned by the protocol, such as the designated bridge.

The defined configuration entered is valid for all flavors of the STP protocol.

Cisco Business 350 Series Switches Administration Guide

166

Spanning Tree

STP Interface Settings

To configure STP on an interface, follow these steps:

Procedure

Step 1

Step 2

Step 3

Click Spanning Tree > STP Interface Settings.

Select an interface and click Edit.

Enter the parameters

Interface

STP

Edge Port

Select the Port or LAG on which Spanning Tree is configured.

Enables or disables STP on the port.

Enables or disables Fast Link on the port. If Fast Link mode is enabled on a port, the port
is automatically set to Forwarding state when the port link is up. Fast Link optimizes the
STP protocol convergence. The options are:

• Enable—Enables Fast Link immediately

• Auto—Enables Fast Link a few seconds after the interface becomes active. This

allows STP to resolve loops before enabling Fast Link

• Disable—Disables Fast Link

Note
It’s recommended to set the value to Auto so that the device sets the port to fast link
mode if a host is connected to it, or sets it as a regular STP port if connected to
another device. This helps avoid loops. Edge Port isn’t operational in MSTP mode.

Root Guard

Root Guard—Enables or disables Root Guard on the device. The Root Guard option
provides a way to enforce the root bridge placement in the network

Root Guard ensures that the port on which this feature is enabled is the designated port.
Normally, all root bridge ports are designated ports, unless two or more ports of the root
bridge are connected. If the bridge receives superior BPDUs on a Root Guard-enabled
port, Root Guard moves this port to a root-inconsistent STP state. This root-inconsistent
state is effectively equal to a listening state. No traffic is forwarded across this port. In
this way, Root Guard enforces the position of the root bridge.

BPDU Guard

BPDU Guard—Enables or disables the Bridge Protocol Data Unit (BPDU) Guard feature
on the port.

The BPDU Guard enables you to enforce the STP domain borders and keep the active
topology predictable. The devices behind the ports that have BPDU Guard enabled can’t
influence the STP topology. At the reception of BPDUs, the BPDU guard operation
disables the port that has BPDU configured. In this case, a BPDU message is received,
and an appropriate SNMP trap is generated.

Cisco Business 350 Series Switches Administration Guide

167

STP Interface Settings

Spanning Tree

BPDU Handling

Select how BPDU packets are managed when STP is disabled on the port or the device.
BPDUs are used to transmit spanning tree information.

• Use Global Settings—Select to use the settings defined in the STP Status and Global

Settings, on page 165 page.

• Filtering—Filters BPDU packets when Spanning Tree is disabled on an interface.

• Flooding—Floods BPDU packets when Spanning Tree is disabled on an interface.

Path Cost

Priority

Set the port contribution to the root path cost or use the default cost generated by the
system.

Set the priority value of the port. The priority value influences the port choice when a
bridge has two ports connected in a loop. The priority is a value 0–240, and must be a
multiple of 16.

Port State

Displays the current STP state of a port.

• Disabled—STP is currently disabled on the port. The port forwards traffic while

learning MAC addresses.

• Blocking—The port is currently blocked, and can’t forward traffic (except for BPDU

data) or learn MAC addresses.

• Listening—The port is in Listening mode. The port can’t forward traffic, and can’t

learn MAC addresses.

• Learning—The port is in Learning mode. The port can’t forward traffic, but it can

learn new MAC addresses.

• Forwarding—The port is in Forwarding mode. The port can forward traffic and learn

new MAC addresses.

Designated Bridge ID

Displays the bridge priority and the MAC address of the designated bridge

Designated Port ID

Displays the priority and interface of the selected port.

Designated Cost

Displays the cost of the port participating in the STP topology. Ports with a lower cost
are less likely to be blocked if STP detects loops.

Forward Transitions

Displays the number of times the port has changed from the Blocking state to Forwarding
state.

Speed

LAG

Displays the speed of the port.

Displays the LAG to which the port belongs. If a port is a member of a LAG, the LAG
settings override the port settings.

Step 4

Click Apply. The interface settings are written to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

168

Spanning Tree

RSTP Interface Settings

RSTP Interface Settings

Rapid Spanning Tree Protocol (RSTP) enables a faster STP convergence without creating forwarding loops.

The RSTP Interface Settings page enables you to configure RSTP per port. Any configuration that is done on
this page is active when the global STP mode is set to RSTP.

To enter RSTP settings, proceed with the following steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Step 6

Step 7

Click Spanning Tree > STP Status and Global Settings.

Enable RSTP.

Click Spanning Tree > RSTP Interface Settings. The RSTP Interface Settings page appears.

Select a port.

Note
Activate Protocol Migration is only available after selecting the port that is connected to the bridge partner being tested.

If a link partner is discovered by using STP, click Activate Protocol Migration to run a Protocol Migration test. This
discovers whether the link partner using STP still exists, and if so whether it has migrated to RSTP or MSTP. If it still
exists as an STP link, the device continues to communicate with it by using STP. Otherwise, if it has been migrated to
RSTP or MSTP, the device communicates with it using RSTP or MSTP, respectively.

Select an interface, and click Edit.

Enter the parameters:

Interface

Set the interface, and specify the port or LAG where RSTP is to be configured.

Point to Point Administrative
Status

Define the point-to-point link status. Ports defined as Full Duplex are considered
Point-to-Point port links.

• Enabled-This port is an RSTP edge port when this feature is enabled, and is brought

to Forwarding mode quickly (usually within 2 seconds).

• Disabled-The port isn’t considered point-to-point for RSTP purposes, which means

that STP works on it at regular speed, as opposed to high speed.

• Auto-Automatically determines the device status by using RSTP BPDUs.

Point to Point Operational
Status

Displays the Point-to-Point operational status if the Point to Point Administrative Status
is set to Auto.

Cisco Business 350 Series Switches Administration Guide

169

MSTP

Spanning Tree

Role

Displays the role of the port that was assigned by STP to provide STP paths. The possible
roles are:

• Root-Lowest cost path to forward packets to the Root Bridge.

• Designated-The interface through which the bridge is connected to the LAN, which

provides the lowest cost path from the LAN to the Root Bridge.

• Alternate-Provides an alternate path to the Root Bridge from the root port.

• Backup-Provides a backup path to the designated port path toward the Spanning Tree
leaves. This provides a configuration in which two ports are connected in a loop by
a point-to-point link. Backup ports are also used when a LAN has two or more
established connections to a shared segment.

• Disabled-The port is not participating in Spanning Tree.

Mode

Displays the current Spanning Tree mode: Classic STP or RSTP.

Fast Link Operational Status

Displays whether the Fast Link (Edge Port) is enabled, disabled, or automatic for the
interface. The values are:

• Enabled-Fast Link is enabled.

• Disabled-Fast Link is disabled.

• Auto-Fast Link mode is enabled a few seconds after the interface becomes active.

Port Status

Displays the RSTP status on the specific port.

• Disabled-STP is currently disabled on the port.

• Discarding-The port is currently discarding/blocked, and it cannot forward traffic or

learn MAC addresses.

• Listening-The port is in Listening mode. The port cannot forward traffic, and cannot

learn MAC addresses.

• Learning-The port is in Learning mode. The port cannot forward traffic, however it

can learn new MAC addresses.

• Forwarding-The port is in Forwarding mode. The port can forward traffic and learn

new MAC addresses.

Step 8

Click Apply. The Running Configuration file is updated.

MSTP

Multiple Spanning Tree Protocol (MSTP) is used to separate the spanning tree protocol (STP) port state
between various domains (on different VLANs). For example, while port A is blocked in one STP instance
due to a loop on VLAN A, the same port can be placed in the Forwarding State in another STP instance. The
MSTP Properties page enables you to define the global MSTP settings.

Cisco Business 350 Series Switches Administration Guide

170

Spanning Tree

MSTP Properties

Multiple STP (MSTP) - MSTP is based on RSTP. It detects Layer 2 loops, and attempts to mitigate them by
preventing the involved port from transmitting traffic. Since loops exist on a per-Layer 2-domain basis, a
situation can occur when a port is blocked to eliminate a STP loop. Traffic will be forwarded to the port that
is not blocked, and no traffic will be forwarded to the port that is blocked. This is not an efficient usage of
bandwidth as the blocked port will always be unused. MSTP solves this problem by enabling several STP
instances, so that it is possible to detect and mitigate loops separately in each instance. This enables a port to
be blocked for one or more STP instances but non blocked for other STP instances. If different VLANs are
associated with different STP instances, then their traffic will be relayed based on the STP port state of their
associated MST instances. Better bandwidth utilization results.

MSTP Properties

The global MSTP configures a separate Spanning Tree for each VLAN group and blocks all but one of the
possible alternate paths within each spanning tree instance. MSTP enables formation of MST regions that can
run multiple MST instances (MSTI). Multiple regions and other STP bridges are interconnected using one
single common spanning tree (CST).

MSTP is fully compatible with RSTP bridges, in that an MSTP BPDU can be interpreted by an RSTP bridge
as an RSTP BPDU. This not only enables compatibility with RSTP bridges without configuration changes,
but also causes any RSTP bridges outside of an MSTP region to see the region as a single RSTP bridge,
regardless of the number of MSTP bridges inside the region itself. For two or more switches to be in the same
MST region, they must have the same VLANs to MST instance mapping, configuration revision number, and
region name. Switches intended to be in the same MST region are never separated by switches from another
MST region. If they are separated, the region becomes two separate regions.

This mapping can be done in the MSTP Instance Settings, on page 172. Use this page if the system operates
in MSTP mode.

To define MSTP, follow these steps:

Procedure

Step 1

Step 2

Click Spanning Tree > MSTP > MSTP Properties.

Enter the parameters.

• Region Name—Define an MSTP region name.

• Revision—Define an unsigned 16-bit number that identifies the revision of the current MST configuration. The field

range is 0–65535.

• Max Hops—Set the total number of hops that occur in a specific region before the BPDU is discarded. Once the

BPDU is discarded, the port information is aged out. The field range is 1–40.

• IST Active—Displays the active regions.

Step 3

Click Apply. The MSTP properties are defined, and the Running Configuration file is updated.

Cisco Business 350 Series Switches Administration Guide

171

Spanning Tree

MSTP Instance Settings

MSTP Instance Settings

The MSTP Instance Settings page enables you to configure and view parameters per MST instance. This is
the per-instance equivalent to the Configuring STP Status and Global Settings.

To enter the MSTP instance settings, proceed as follows:

Procedure

Step 1

Step 2

Click Spanning Tree > MSTP >MSTP Instance Settings.

Enter the parameters.

• Instance ID-Select an MST instance to be displayed and defined.

• Included VLAN-Displays the VLANs mapped to the selected instance. The default mapping is that all VLANs are

mapped to the common and internal spanning tree (CIST) instance 0).

• Bridge Priority-Set the priority of this bridge for the selected MST instance.

• Designated Root Bridge ID-Displays the priority and MAC address of the Root Bridge for the MST instance.

• Root Port-Displays the root port of the selected instance.

• Root Path Cost-Displays the root path cost of the selected instance.

• Bridge ID-Displays the bridge priority and the MAC address of this device for the selected instance.

• Remaining Hops-Displays the number of hops remaining to the next destination.

Step 3

Click Apply. The MST Instance configuration is defined, and the Running Configuration file is updated.

MSTP Interface Settings

The MSTP Interface Settings page enables you to configure the port MSTP settings for every MST instance,
and to view information that has currently been learned by the protocol, such as the designated bridge per
MST instance.

To configure the ports in an MST instance, follow these steps:

Procedure

Step 1

Step 2

Click Spanning Tree > MSTP > MSTP Interface Settings.

Enter the parameters.

• Instance equals to—Select the MSTP instance to be configured.

• Interface Type equals to—Select whether to display the list of ports or LAGs.

Step 3

Click Go. The MSTP parameters for the interfaces on the instance are displayed.

Cisco Business 350 Series Switches Administration Guide

172

Spanning Tree

MSTP Interface Settings

Step 4

Step 5

Select an interface, and click Edit.
Enter the parameters.

Option

Description

Instance ID

Select the MST instance to be configured.

Interface

Select the interface for which the MSTI settings are to be defined.

Interface Priority

Set the port priority for the specified interface and MST instance.

Path Cost

Port State

Enter the port contribution to the root path cost in the User Defined textbox or select Use
Default to use the default value.

Displays the MSTP status of the specific port on a specific MST instance. The parameters are
defined as:

• Disabled—STP is currently disabled.

• Discarding—The port on this instance is currently discarding/blocked, and cannot forward

traffic (with the exception of BPDU data) or learn MAC addresses.

• Listening—The port on this instance is in Listening mode. The port cannot forward traffic,

and cannot learn MAC addresses.

• Learning—The port on this instance is in Learning mode. The port cannot forward traffic,

but it can learn new MAC addresses.

• Forwarding—The port on this instance is in Forwarding mode. The port can forward

traffic and learn new MAC addresses.

• Boundary—The port on this instance is a boundary port. It inherits its state from instance

0 and can be viewed on the STP Interface Settings, on page 166.

Port Role

Displays the port or LAG role, per port or LAG per instance, assigned by the MSTP algorithm
to provide STP paths:

• Root—Forwarding packets through this interface provides the lowest cost path for

forwarding packets to the root device.

• Designated Port—The interface through which the bridge is connected to the LAN, which
provides the lowest root path cost from the LAN to the Root Bridge for the MST instance.

• Alternate—The interface provides an alternate path to the Root Bridge from the root port.

• Backup—The interface provides a backup path to the designated port path toward the

Spanning Tree leaves. Backup ports occur when two ports are connected in a loop by a
point-to-point link. Backup ports also occur when a LAN has two or more established
connections to a shared segment.

• Disabled—The interface does not participate in the Spanning Tree.

• Boundary—The port on this instance is a boundary port. It inherits its state from instance

0 and can be viewed on the STP Interface Settings, on page 166.

Mode

Displays the current interface Spanning Tree mode.

• If the link partner is using MSTP or RSTP, the displayed port mode is RSTP.

Cisco Business 350 Series Switches Administration Guide

173

VLANs to MSTP Instance

Spanning Tree

Option

Description

• If the link partner is using STP, the displayed port mode is STP.

Type

Displays the MST type of the port.

• Boundary—A Boundary port attaches MST bridges to a LAN in a remote region. If the
port is a boundary port, it also indicates whether the device on the other side of the link
is working in RSTP or STP mode.

• Internal—The port is an internal port.

Designated Bridge ID

Displays the ID number of the bridge that connects the link or shared LAN to the root.

Designated Port ID

Displays the Port ID number on the designated bridge that connects the link or the shared LAN
to the root.

Designated Cost

Displays the cost of the port participating in the STP topology. Ports with a lower cost are less
likely to be blocked if STP detects loops.

Remain Hops

Displays the hops remaining to the next destination.

Forward Transitions

Displays the number of times the port has changed from the Forwarding state to the Discarding
state.

Step 6

Click Apply. The Running Configuration file is updated.

VLANs to MSTP Instance

The VLAN to MSTP Instance page enables you to map each VLAN to a Multiple Spanning Tree Instance
(MSTI). For devices to be in the same region, they must have the same mapping of VLANs to MSTIs.

Note

The same MSTI can be mapped to more than one VLAN, but each VLAN can only have one MST instance
attached to it. Configuration on this page (and all of the MSTP pages) applies if the system STP mode is
MSTP. Up to 16 MST instances can be defined in addition to instance zero. For those VLANs that aren’t
explicitly mapped to one of the MST instances, the device automatically maps them to the CIST (Core and
Internal Spanning Tree) instance. The CIST instance is MST instance 0.

To map VLANs to MST Instances, follow these steps:

Procedure

Step 1

Click Spanning Tree > MSTP > VLANs to MSTP Instance.

The VLAN to MSTP Instance page displays the following fields:

• MSTP Instance ID-All MST instances are displayed.

Cisco Business 350 Series Switches Administration Guide

174

Spanning Tree

PVST

• VLANs-All VLANs belonging to the MST instance are displayed.

Step 2

Step 3

To add a VLAN to an MSTP instance, select the MST instance, and click Edit.

Enter the parameters:

• MSTP Instance ID-Select the MST instance.

• VLANs-Define the VLANs being mapped to this MST instance.

• Action-Define whether to Add (map) the VLAN to the MST instance or Remove it.

Step 4

Click Apply. The MSTP VLAN mappings are defined, and the Running Configuration file is updated.

PVST

Per VLAN Spanning Tree (PVST) is a protocol running a separate instance of the 802.1Q STP standard
protocol per each VLAN configured on the device. RSTP standard protocol per each VLAN configured on
the device. The PVST protocol is a protocol that was designed to address the problem that exist with STP/
RSTP standard based implementation - that in some cases a port that is in blocking mode (for more than 1
VLANs) may create an efficient usage of bandwidth since it cannot be used for any traffic forwarding.

PVST addresses this issue by assigning a separate spanning tree instance for each VLAN configured on the
device. Up to 126 PVST instances are supported. this means that if more than 126 VLANs are configured on
the device, PVST cannot be enabled. Likewise, if PVST is enabled you cannot configure more than 126
VLANs

The device supports the PVST/RPVST Plus flavor of the protocols. This section refers to PVST to describe
both PVST+ and RPVST+ feature behavior.

PVST VLAN Settings

To define the PVST VLAN settings, follow these steps:

Procedure

Step 1

Click Spanning Tree > PVST > PVST VLAN Settings.

The PVST VLAN Settings page enables you to configure PVST settings for each VLAN ID that is configured on the
device, except the VLAN ID 1.

To configure the PVST parameters on an interface:

Step 2

Select a row in the table and click Copy Settings to create an new PVST VLAN based on the selected row, or click Edit
to revise the selected row.

Note
VLAN entry 1 cannot be edited. Edit the values of the PVST VLAN as needed:

• VLAN ID—the VLAN ID of the PVST instance

Cisco Business 350 Series Switches Administration Guide

175

PVST Interface Settings

Spanning Tree

• Priority—The PVST VLAN STP priority value.

• Address—The address of the VLAN

• Hello Time—The interval (in seconds) that a Root Bridge waits between configuration messages.

• Max Age—The interval (in seconds) that this VLAN STP instance can wait without receiving a configuration

message, before attempting to redefine its own configuration.

• Forward Delay—The interval (in seconds) that this VLAN STP instance remains in a learning state before forwarding

packets.

Step 3

Click Details to view the PVST VLAN details.

• VLAN ID—the VLAN ID of the PVST instance

• Root Priority—The PVST VLAN STP priority value.

• Root Hello Time—The interval (in seconds) that a Root Bridge waits between configuration messages.

• Root Max Age—The interval (in seconds) that this VLAN STP instance can wait without receiving a configuration

message, before attempting to redefine its own configuration.

• Root Forward Delay—The interval (in seconds) that this VLAN STP instance remains in a learning state before

forwarding packets.

• Root Port—The port that offers the lowest cost path on this VLAN from this bridge to the root.

• Root Path Cost—The cost, on this VLAN of the path from this bridge to the root.

• Root Bridge ID—The bridge ID of the root bridge in this VLAN.

• Bridge ID—The bridge ID of this device and VLAN.

• Topology Change Count—The total number of STP topology changes that have occurred on this VLAN last topology

change.

• Last Topology Change— Details of when the last topology was changed.

Step 4

Click Apply. The new/revised PVST VLAN is added/updated.

PVST Interface Settings

The PVST Interface Settings page enables you to configure PVST on a per-port and VLAN basis, and to view
the information learned by the protocol, such as the designated bridge.

To configure the PVST parameters on an interface, proceed as follows:

Procedure

Step 1

Click Spanning Tree > PVST > PVST Interface Settings.

Cisco Business 350 Series Switches Administration Guide

176

Spanning Tree

PVST Interface Settings

Step 2

Using the filters, select the VLAN ID and Interface Type (Port or Lag) from the drop-down list and click Go. Then, the
following PVST interface information will be displayed for each VLAN PVST.

Option

Interface

Priority

Port Cost

Description

The interface name.

The priority value of the port for this VLAN instance. The priority value influences the port choice
when a bridge has two ports connected in a loop. The priority is a value 0–240, and must be a
multiple of 16.

The port contribution, per VLAN instance, to the root path cost or use the default cost generated
by the system.

State

Displays the current STP state of a port, per VLAN instance.

• Disabled—PVST is currently disabled on the port. The port forwards traffic while learning

MAC addresses.

• Blocking—The port is blocked for this VLAN instance and can’t forward traffic (except for

BPDU data) or learn MAC addresses.

• Listening—The port is in Listening state for this VLAN instance. The port can’t forward

traffic, and can’t learn MAC addresses.

• Learning—The port is in Learning state for this VLAN instance. The port can’t forward

traffic, but it can learn new MAC addresses.

• Forwarding—The port is in Forwarding state for this VLAN instance. The port can forward

traffic and learn new MAC addresses.

Role

Displays the PVST role, per PVST instance, assigned by the PVST algorithm to provide STP
path.

• Root—Forwarding packets through this interface provides the lowest cost path for forwarding

packets to the root device.

• Designated—The interface through which the bridge is connected to the LAN, which provides

the lowest root path cost from the LAN to the Root Bridge for the PVST instance.

• Alternate—The interface provides an alternate path to the root device from the root interface.

• Backup—The interface provides a backup path to the designated port path toward the

Spanning Tree leaves. Backup ports occur when two ports are connected in a loop by a
point-to-point link. Backup ports also occur when a LAN has two or more established
connections to a shared segment.

• Disable—The interface doesn’t participate in the Spanning Tree.

Mode

Displays the PVST mode.

• RPVST—The port is running the RPVST+ flavor of PVST.

• PVST—The port is running the PVST+ flavor of PVST.

Inconsistency

Displays the inconsistency.

Cisco Business 350 Series Switches Administration Guide

177

PVST Inconsistent Ports

Spanning Tree

Option

Description

Designated Bridge
ID

Displays the bridge priority and the MAC address of the designated bridge for the current VLAN
instance.

Designated Port ID

Displays the priority and interface of the selected port for the current VLAN instance.

Designated Cost

Displays the cost of the port participating in the STP topology for the current VLAN instance.
Ports with a lower cost are less likely to be blocked if STP detects loops

Forward Transitions

Displays the number of times the port has changed from the Blocking state to Forwarding state
for the current VLAN instance.

Step 3

Select an interface and click Edit, to edit the Interface type, Priority, or Path Cost of the selected VLAN,

To copy the configuration settings of the selected port to the other ports in the current VLAN click Copy Settings to
Ports...

To copy the port configuration settings to the same ports in a range of other VLANs, click Copy Settings to VLANs....

Step 4

Step 5

Step 6

Enter the parameters.

Click Apply. The interface settings are written to the Running Configuration file.

Click Apply to all existing VLANs to apply the settings to all the VLANs created on the switch.

PVST Inconsistent Ports

The PVST Inconsistent Ports page displays the inconsistent PVST ports.

To view inconsistent PVST ports, follow these steps:

Procedure

Click Spanning Tree > PVST > PVST Inconsistent Ports.

This page displays details on ports that are in the PVST inconsistent state:

• VLAN ID—the VLAN ID of the PVST instance

• Interface Name—The interface ID

• Inconsistency—Displays the inconsistency state.

Cisco Business 350 Series Switches Administration Guide

178

C H A P T E R 12

MAC Address Tables

This chapter contains the following sections:

• Static Addresses, on page 179
• Dynamic Address Settings, on page 180
• Dynamic Addresses, on page 180
• Reserved MAC Addresses, on page 181

Static Addresses

Static MAC addresses are assigned to a specific physical interface and VLAN on the device. If that address
is detected on another interface, it’s ignored, and isn’t written to the address table.

To define a static address, follow these steps:

Procedure

Step 1

Click MAC Address Tables > Static Addresses.

The Static Addresses page contains the currently defined static addresses.

Step 2

Step 3

Click Add.
Enter the parameters.

• VLAN ID—Select the VLAN ID for the port.

• MAC Address—Enter the interface MAC address.

• Interface—Select an interface for the entry.

• Status—Select how the entry is treated. The options are:

• Permanent—The system never removes this MAC address. If the static MAC address is saved in the Startup

Configuration, it’s retained after rebooting.

• Delete on reset—The static MAC address is deleted when the device is reset.

• Delete on timeout—The MAC address is deleted when aging occurs.

• Secure—The MAC address is secure when the interface is in classic locked mode.

Cisco Business 350 Series Switches Administration Guide

179

Dynamic Address Settings

MAC Address Tables

Step 4

Step 5

Click Apply. A new entry appears in the table.

To delete a static address, click the Delete icon and then click Apply to save the new settings.

Dynamic Address Settings

The Dynamic Address Table (bridging table) contains the MAC addresses acquired by monitoring the source
addresses of frames entering the device. To prevent this table from overflowing and to make room for new
MAC addresses, an address is deleted if no corresponding traffic is received for a certain period of time known
as the aging time.

To configure the aging time for dynamic addresses, follow these steps:

Procedure

Step 1

Step 2

Click MAC Address Tables > Dynamic Address Settings.

Enter Aging Time. The aging time is a value between the user-configured value and twice that value minus 1. For example,
if you entered 300 seconds, the aging time is between 300 and 599 seconds.

Step 3

Click Apply. The aging time is updated.

Dynamic Addresses

To query dynamic addresses, follow these steps:

Procedure

Step 1

Step 2

Click MAC Address Tables > Dynamic Addresses.

In the Filter block, you can enter the following query criteria:

• VLAN ID—Enter the VLAN ID for which the table is queried.

• MAC Address—Enter the MAC address for which the table is queried.

• Interface—Select the interface for which the table is queried. The query can search for specific ports, or LAGs.

Step 3

Step 4

Click Go. The Dynamic MAC Address Table is queried and the results are displayed.

To delete all of the dynamic MAC addresses. click Clear Table.

Cisco Business 350 Series Switches Administration Guide

180

MAC Address Tables

Reserved MAC Addresses

Reserved MAC Addresses

When the device receives a frame with a destination MAC address that belongs to a reserved range (per the
IEEE standard), the frame can be discarded or bridged. The entry in the Reserved MAC Address Table can
either specify the reserved MAC address or the reserved MAC address and a frame type:

To add an entry for a reserved MAC address, proceed as follows:

Procedure

Step 1

Click MAC Address Tables > Reserved MAC Addresses.

The reserved MAC addresses are displayed. The fields are described in the Add page, except for the following field:

Protocol—Displays the protocol supported on the device (called Peer),

Step 2

Step 3

Click Add.

Enter the values for the following fields:

• MAC Address—Select the MAC address to be reserved.

• Frame Type—Select a frame type based on the following criteria:

• Ethernet V2—Applies to Ethernet V2 packets with the specific MAC address.

• LLC—Applies to Logical Link Control (LLC) packets with the specific MAC address.

• LLC-SNAP—Applies to Logical Link Control/Sub-Network Access Protocol (LLC-SNAP) packets with the

specific MAC address.

• All—Applies to all packets with the specific MAC address.

• Action—Select one of the following actions to be taken upon receiving a packet that matches the selected criteria:

• Bridge—Forward the packet to all VLAN members

• Discard—Delete the packet.

Step 4

Click Apply. A new MAC address is reserved.

Cisco Business 350 Series Switches Administration Guide

181

Reserved MAC Addresses

MAC Address Tables

Cisco Business 350 Series Switches Administration Guide

182

C H A P T E R 13

Multicast

This chapter contains the following sections:

• Multicast Properties, on page 183
• MAC Group Address, on page 184
• IP Multicast Group Address, on page 186
• IPv4 Multicast Configuration, on page 187
• IPv6 Multicast Configuration, on page 192
• IGMP/MLD Snooping IP Multicast Group, on page 196
• Multicast Router Port, on page 197
• Forward All, on page 198
• Unregistered Multicast, on page 198

Multicast Properties

Multicast forwarding enables one-to-many information dissemination. Multicast applications are useful for
dissemination of information to multiple clients, where clients do not require reception of the entire content.
A typical application is a cable-TV-like service, where clients can join a channel in the middle of a transmission,
and leave before it ends.

The data is sent only to relevant ports. Forwarding the data only to the relevant ports conserves bandwidth
and host resources on links. By default, all Multicast frames are flooded to all ports of the VLAN. It is possible
to selectively forward only to relevant ports and filter (drop) the Multicast on the rest of the ports by enabling
the Bridge Multicast filtering status in this section.

Multicast addresses have the following properties:

• Each IPv4 Multicast address is in the address range 224.0.0.0 to 239.255.255.255.

• The IPv6 Multicast address is FF00:/8.

• To map an IP Multicast group address to an Layer 2 Multicast address:

For IPv4, this is mapped by taking the 23 low-order bits from the IPv4 address, and adding them to the 01:00:5e
prefix. By standard, the upper nine bits of the IP address are ignored, and any IP addresses that only differ in
the value of these upper bits are mapped to the same Layer 2 address, since the lower 23 bits that are used are
identical. For example, 234.129.2.3 is mapped to a MAC Multicast group address 01:00:5e:01:02:03. Up to
32 IP Multicast group addresses can be mapped to the same Layer 2 address.

Cisco Business 350 Series Switches Administration Guide

183

MAC Group Address

Multicast

For IPv6, this is mapped by taking the 32 low-order bits of the Multicast address, and adding the prefix of
33:33. For example, the IPv6 Multicast address FF00::1122:3344 is mapped to Layer 2 Multicast
33:33:11:22:33:44.

To enable Multicast filtering, and select the forwarding method, follow these steps:

Procedure

Step 1

Step 2

Click Multicast > Properties.

Enter the parameters.

Bridge Multicast Filtering
Status

Select to enable filtering.

VLAN ID

Select the VLAN ID to set its forwarding method.

Forwarding Method for IPv6

Set one of the following forwarding methods for IPv6 addresses:

• MAC Group Address—Forward packets according to the MAC Multicast group

address

• IP Group Address—Forward packets according to the IPv6 Multicast group address

• Source-Specific IP Group Address—Forward packets according to the source IPv6
and IPv6 Multicast group address. If an IPv6 address is configured on the VLAN,
the operational forwarding methods for IPv6 Multicast are IP Group Address.

Note
For IPv6 IP Group and Source-Specific IP Group Address modes, the device checks
a match only for 4 bytes of the destination Multicast and source address. For the
destination Multicast address, the last 4 bytes of group ID are matched. For the
source address, the last 3 bytes + the 5th from the last byte are matched.

Forwarding Method for IPv4

Set one of the following forwarding methods for IPv4 addresses:

• MAC Group Address—Forward packets according to the MAC Multicast group

address

• IP Group Address—Forward packets according to the IPv4 Multicast group address

• Source-Specific IP Group Address—Forward packets according to the source IPv4
and IPv4 Multicast group address. If an IPv4 address is configured on the VLAN,
the operational forwarding method for IPv4 Multicast are IP Group Address.

Step 3

Click Apply. The Running Configuration file is updated.

MAC Group Address

The MAC Group Address page has the following functions:

Cisco Business 350 Series Switches Administration Guide

184

Multicast

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

MAC Group Address

• Query and view information from the Multicast Forwarding Data Base (MFDB), relating to a specific

VLAN ID or a specific MAC address group This data is acquired either dynamically through IGMP/MLD
snooping or statically by manual entry.

• Add or delete static entries to the MFDB that provide static forwarding information, based on MAC

destination addresses.

• Displays all ports/LAGs that are members of each VLAN ID and MAC address group.

To define and view MAC Multicast groups, follow these steps:

Click Multicast > MAC Group Address.

Enter the Filter parameters.

• VLAN ID equals to—Set the VLAN ID of the group to be displayed.

• MAC Group Address equals to—Set the MAC address of the Multicast group to be displayed. If no MAC Group

Address is specified, the page contains all the MAC Group Addresses from the selected VLAN.

Click Go, and the MAC Multicast group addresses are displayed in the lower block.

Click Add to add a static MAC Group Address.

Enter the parameters.

• VLAN ID—Defines the VLAN ID of the new Multicast group.

• MAC Group Address—Defines the MAC address of the new Multicast group.

Step 6

Click Apply, the MAC Multicast group is saved to the Running Configuration file.

To configure and display the registration for the interfaces within the group, select an address, and click Details.

The page displays:

• VLAN ID—The VLAN ID of the Multicast group.

• MAC Group Address—The MAC address of the group.

Step 7

Step 8

Step 9

Select either port or LAG from the Filter: Interface Type menu.

Click Go to display the port or LAG membership of the VLAN.

Select the way that each interface is associated with the Multicast group:

• Static—Attaches the interface to the Multicast group as a static member.

• Dynamic—Indicates that the interface was added to the Multicast group as a result of IGMP/MLD snooping.

• Forbidden—Specifies that this port isn’t allowed to join this Multicast group on this VLAN.

• None—Specifies that the port isn’t currently a member of this Multicast group on this VLAN.

Step 10

Click Apply, and the Running Configuration file is updated.

Cisco Business 350 Series Switches Administration Guide

185

IP Multicast Group Address

Multicast

IP Multicast Group Address

The IP Multicast Group Address page is similar to the MAC Group Address page except that Multicast groups
are identified by IP addresses. The IP Multicast Group Address page enables querying and adding IP Multicast
groups.

To define and view IP Multicast groups, follow these steps:

Procedure

Step 1

Click Multicast > IP Multicast Group Address.

The page contains all of the IP Multicast group addresses learned by snooping.

Step 2

Enter the parameters required for filtering.

• VLAN ID equals to—Define the VLAN ID of the group to be displayed.

• IP Version equals to—Select IPv6 or IPv4.

• IP Multicast Group Address equals to—Define the IP address of the Multicast group to be displayed. This is only

relevant when the Forwarding mode is (S,G).

• Source IP Address equals to—Define the source IP address of the sending device. If mode is (S,G), enter the sender
S. This together with the IP Group Address is the Multicast group ID (S,G) to be displayed. If mode is (*.G), enter
an * to indicate that the Multicast group is only defined by destination.

Step 3

Step 4

Step 5

Click Go. The results are displayed in the lower block.

Click Add to add a static IP Multicast Group Address.

Enter the parameters.

• VLAN ID—Defines the VLAN ID of the group to be added.

• IP Version—Select the IP address type.

• IP Multicast Group Address—Define the IP address of the new Multicast group.

• Source Specific—Indicates that the entry contains a specific source, and adds the address in the IP Source Address

field. If not, the entry is added as a (*, G) entry, an IP group address from any IP source.

• Source IP Address—Defines the source address to be included.

Step 6

Step 7

Click Apply. The IP Multicast group is added, and the device is updated.

To configure and display the registration of an IP group address, select an address and click Details.

The VLAN ID, IP Version, IP Multicast Group Address, and Source IP Address selected are displayed as read-only in
the top of the window. You can select the filter type:

• Interface Type equals to—Select whether to display ports or LAGs.

Step 8

For each interface, select its association type. The options are as follows:

• Static—Attaches the interface to the Multicast group as a static member.

Cisco Business 350 Series Switches Administration Guide

186

Multicast

IPv4 Multicast Configuration

• Dynamic—Attaches the interface to the Multicast group as a dynamic member.

• Forbidden—Specifies that this port is forbidden from joining this group on this VLAN.

• None—Indicates that the port isn’t currently a member of this Multicast group on this VLAN. This is selected by

default until Static or Forbidden is selected.

Step 9

Click Apply. The Running Configuration file is updated.

IPv4 Multicast Configuration

A multicast address is a single IP data packet set that represents a network host group. Multicast addresses
are available to process datagrams or frames intended to be multicast to a designated network service. Multicast
addressing is applied in the link layer (Layer 2 of the OSI Model) and the Internet layer (Layer 3 of the OSI
Model) for IP versions 4 (IPv4) and 6 (IPv6).

Multicast addresses in IPV4 are defined using leading address bits of 1110, which originate from the classful
network design of the early Internet when this group of addresses was designated as Class D.

IPv4 multicast packets are delivered using the Ethernet MAC address range 01:00:5e:00:00:00–01:00:5e:7f:ff:ff.
This range has 23 bits of available address space. The first octet (01) includes the broadcast/multicast bit. The
lower 23 bits of the 28-bit multicast IP address are mapped into the 23 bits of available Ethernet address space.
This means that there is ambiguity in delivering packets. If two hosts on the same subnet each subscribe to a
different multicast group whose address differs only in the first 5 bits, Ethernet packets for both multicast
groups will be delivered to both hosts, requiring the network software in the hosts to discard the unrequired
packets.

This section covers how to configure the IPv4 multicast.

IGMP Snooping

To support selective IPv4 Multicast forwarding, bridge Multicast filtering must be enabled (in Multicast
Properties, on page 183). The IGMP Snooping must be enabled globally and for each relevant VLAN in the
IGMP Snooping page.

To enable IGMP Snooping and identify the device as an IGMP Snooping Querier on a VLAN, follow these
steps:

Procedure

Step 1

Click Multicast > IPv4 Multicast Configuration > IGMP Snooping.

• IGMP Snooping Status—Select to enable IGMP snooping globally on all interfaces.

• IGMP Querier Status—Select to enable IGMP querier globally on all interfaces.

Step 2

IGMP Snooping is only operational when Bridge Multicast Filtering is enabled. You can enable it here: Multicast
Properties, on page 183.

Step 3

To configure IGMP on an interface, select a static VLAN and click Edit. Enter the following fields:

Cisco Business 350 Series Switches Administration Guide

187

IGMP Snooping

Multicast

Option

VLAN ID

Description

Select The VLAN Id from the dropdown list.

IGMP Snooping Status

Select to enable IGMP Snooping on the VLAN. The device monitors network traffic to
determine which hosts have asked to be sent Multicast traffic.

MRouter Ports Auto
Learn

Immediate Leave

Select to enable Auto Learn of the Multicast router.

Select to enable the switch to remove an interface that sends a leave message from the
forwarding table without first sending out MAC-based general queries to the interface. When
an IGMP Leave Group message is received from a host, the system removes the host port
from the table entry. After it relays the IGMP queries from the Multicast router, it deletes
entries periodically if it doesn’t receive any IGMP membership reports from the Multicast
clients. When enabled, this feature reduces the time it takes to block unnecessary IGMP
traffic sent to a device port.

Last Member Query
Counter

Number of MLD group-specific queries sent before the device assumes that there are no
more members for the group, if the device is the elected querier.

• Use Query Robustness (x)—The number in parentheses is the current query robustness

value.

• User Defined—Enter a user-defined value.

IGMP Querier Status

Select to enable this feature. This feature is required if there’s no Multicast router.

IGMP Querier Election

IGMP Querier Election—Whether the IGMP querier election is enabled or disabled. If the
IGMP Querier election mechanism is enabled, the IGMP Snooping querier supports the
standard IGMP Querier election mechanism specified in RFC3810.

If the IGMP Querier election mechanism is disabled, the IGMP Snooping querier delays
sending General Query messages for 60 seconds after it was enabled, and if there’s no other
querier, it starts sending General Query messages. It stops sending General Query messages
when it detects another querier. The IGMP Snooping Querier resumes sending General Query
messages if it does hear another querier for a Query Passive interval that equals: Robustness
* (Query Interval) + 0.5 * Query Response Interval.

IGMP Querier Version

Select the IGMP version to be used if the device becomes the elected querier. Select IGMPv3
if there are switches and/or Multicast routers in the VLAN that perform source-specific IP
Multicast forwarding. Otherwise, select IGMPv2.

Querier Source IP
Address

The IP address of the device source interface to be used in messages sent. In MLD this
address is selected automatically by the system.

• Auto—The system takes the source IP address from the IP address defined on the

outgoing interface.

• User Defined—Enter a user-defined IP address.

Step 4

Click Apply. The Running Configuration file is updated.

Cisco Business 350 Series Switches Administration Guide

188

Multicast

IGMP Interface Settings

Note

Changes in IGMP Snooping timers configuration, such as: Query Robustness, Query Interval etc. don’t take
effect on timers which already created.

IGMP Interface Settings

An interface that is defined as a Multicast router port receives all IGMP packets (reports and queries) and all
Multicast data.

To define IGMP on an interface, complete the following steps:

Procedure

Step 1

Click Multicast > IPv4 Multicast Configuration > IGMP Interface Settings.

The following fields are displayed for each interface on which IGMP is enabled:

• Interface Name—Interface on which IGMP snooping is defined.

• Router IGMP Version—IGMP version.

• Query Robustness—Enter the number of expected packet losses on a link

• Query Interval (sec)—Interval between the General Queries to be used if this device is the elected querier.

• Query Max Response Interval (sec)—Delay used to calculate the Maximum Response Code inserted into the periodic

General Queries.

• Last Member Query Interval (msec)—Maximum Response Delay to be used if the device can’t read Max Response

Time value from group-specific queries sent by the elected querier.

• Multicast TTL Threshold—Enter the Time-to-Live (TTL) threshold of packets being forwarded on an interface.

Multicast packets with a TTL value less than the threshold aren’t forwarded on the interface.

The default value of 0 means that all Multicast packets are forwarded on the interface.

A value of 256 means that no Multicast packets are forwarded on the interface.

Configure the TTL threshold only on border routers. Conversely, routers on which you configure a TTL threshold
value automatically become border routers.

Step 2

Step 3

Select an interface, and click Edit. Enter the values of the fields described above.

Click Apply. The Running Configuration file is updated.

IGMP VLAN Settings

To configure IGMP on a specific VLAN, complete the following steps:

Cisco Business 350 Series Switches Administration Guide

189

IGMP Proxy

Procedure

Multicast

Step 1

Click Multicast > IPv4 Multicast Configuration > IGMP VLAN Settings.

The following fields are displayed for each VLAN on which IGMP is enabled:

• Interface Name—VLAN on which IGMP snooping is defined.

• Router IGMP Version—Version of IGMP Snooping.

• Query Robustness—Enter the number of expected packet losses on a link.

• Query Interval (sec)—Interval between the General Queries to be used if this device is the elected querier.

• Query Max Response Interval (sec)—Delay used to calculate the Maximum Response Code inserted into the periodic

General Queries.

• Last Member Query Interval (msec)—Enter the Maximum Response Delay to be used if the device can’t read Max

Response Time value from group-specific queries sent by the elected querier.

• Multicast TTL Threshold—Enter the Time-to-Live (TTL) threshold of packets being forwarded on an interface.

Multicast packets with a TTL value less than the threshold aren’t forwarded on the interface.

The default value of 0 means that all Multicast packets are forwarded on the interface.

A value of 256 means that no Multicast packets are forwarded on the interface.

Configure the TTL threshold only on border routers. Conversely, routers on which you configure a TTL threshold
value automatically become border routers.

Step 2

Step 3

Select an interface, and click Edit. Enter the values of the fields described above.

Click Apply. The Running Configuration file is updated.

IGMP Proxy

Procedure

Note

IGMP Proxy is only operational if IPv4 routing is enabled in IPv4 Interface, on page 201.

To configure IGMP Proxy, follow these steps:

Step 1

Step 2

Click Multicast > IPv4 Multicast Configuration > IGMP Proxy.
Enter the following global fields:

IGMP Multicast Routing

Select to enable IPv4 Multicast routing.

Downstream Protection

Select to discard downstream packets not required for the device.

Cisco Business 350 Series Switches Administration Guide

190

Multicast

IGMP Proxy

Source Specific Multicast

Select to enable delivering Multicast packets originating from a specific source address
defined in the next field.

SSM IPv4 Access List

Define the list containing source addresses from which to deliver Multicast packets:

• Default list—Defines the SSM range access list to 232.0.0.0/8.

• User-defined access list—Select the standard IPv4 access list name defining the SSM

range.

Step 3

Step 4

Click Apply. The Running Configuration file is updated.

To add protection to a VLAN, click Add and enter the following fields:

Upstream Interface

Select the upstream interface. Since there’s only a single upstream interface, if one has
already been selected, this field is grayed out.

Downstream Interface

Select the downstream interface. There can be multiple downstream interfaces.

Downstream Protection

Select one of the following options:

• Use global—Use the status set in the global block.

• Disable—This enables forwarding of IPv4 Multicast traffic from downstream

interfaces.

• Enable—This disables forwarding from downstream interfaces.

Step 5

Click Apply. The Running Configuration file is updated.

The following fields are displayed for each IPv4 Multicast route:

Source Address

Unicast source IPv4 address.

Group Address

Multicast destination IPv4 address.

Incoming Interface

Expected interface for a Multicast packet from the source. If the packet isn’t received on
this interface, it’s discarded.

Outgoing Interfaces

Interfaces through which packets will be forwarded.

Uptime

Expiry Time

Length of time in hours, minutes, and seconds that the entry has been in the IP Multicast
routing table.

Length of time in hours, minutes, and seconds until the entry is removed from the IP
Multicast routing table.

Cisco Business 350 Series Switches Administration Guide

191

IPv6 Multicast Configuration

Multicast

IPv6 Multicast Configuration

IP multicast is a method of sending Internet Protocol (IP) datagrams to a group of interested receivers in a
single transmission. It is the IP-specific form of multicast and is used for streaming media and other network
applications. It uses specially reserved multicast address blocks in IPv4 and IPv6.

Unicast packets are delivered to a specific recipient on an Ethernet or IEEE 802.3 subnet by setting a specific
layer 2 MAC address on the Ethernet packet address. Broadcast packets make use of a broadcast MAC address
(FF:FF:FF:FF:FF:FF). For IPv6 multicast addresses, the Ethernet MAC is derived by the four low-order octets
OR'ed with the MAC 33:33:00:00:00:00, so for example the IPv6 address FF02:DEAD:BEEF::1:3 would
map to the Ethernet MAC address 33:33:00:01:00:03.

This section covers how to configure the IPv6 multicast.

MLD Snooping

To support selective IPv6 Multicast forwarding, bridge Multicast filtering must be enabled (in the Multicast
Properties, on page 183), and MLD Snooping must be enabled globally and for each relevant VLAN in the
MLD Snooping pages.

To enable MLD Snooping and configure it on a VLAN, complete the following:

Procedure

Step 1

Click Multicast > IPv6 Multicast Configuration > MLD Snooping.

Note
MLD Snooping is only operational when Bridge Multicast Filtering is enabled and can be enabled here Multicast Properties,
on page 183.

Step 2

Enable or disable the following features:

• MLD Snooping Status—Select to enable MLD snooping globally on all interfaces.

• MLD Querier Status—Select to enable MLD querier globally on all interfaces.

Step 3

To configure MLD proxy on an interface, select a static VLAN and click Edit. Enter the following fields:

Option

Description

MLD Snooping Status

Select to enable MLD Snooping on the VLAN. The device monitors network traffic to determine
which hosts have asked to be sent Multicast traffic. The device performs MLD snooping only
when MLD snooping and Bridge Multicast filtering are both enabled.

MRouter Ports Auto
Learn

Immediate Leave

Select to enable Auto Learn of the Multicast router.

Select to enable the switch to remove an interface that sends a leave message from the forwarding
table without first sending out MAC-based general queries to the interface. When an MLD Leave
Group message is received from a host, the system removes the host port from the table entry.
After it relays the MLD queries from the Multicast router, it deletes entries periodically if it does

Cisco Business 350 Series Switches Administration Guide

192

Multicast

MLD Interface Settings

Option

Description

not receive any MLD membership reports from the Multicast clients. When enabled, this feature
reduces the time it takes to block unnecessary MLD traffic sent to a device port.

Last Member Query
Counter

Number of MLD group-specific queries sent before the device assumes there are no more members
for the group, if the device is the elected querier.

• Use Query Robustness (x)—The number in parentheses is the current query robustness

value.

• User Defined—Enter a user-defined value.

MLD Querier Status

Select to enable this feature. This feature is required if there is no Multicast router.

MLD Querier
Election

Whether the MLD querier election is enabled or disabled. If the MLD Querier election mechanism
is enabled, the MLD Snooping querier supports the standard MLD Querier election mechanism
specified in RFC3810.

If the MLD Querier election mechanism is disabled, the MLD Snooping querier delays sending
General Query messages for 60 seconds after it was enabled, and if there is no other querier, it
starts sending General Query messages. It stops sending General Query messages when it detects
another querier. The MLD Snooping Querier resumes sending General Query messages if it does
hear another querier for a Query Passive interval that equals: Robustness * (Query Interval) +
0.5 * Query Response Interval.

MLD Querier Version

Select the MLD version to be used if the device becomes the elected querier. Select MLDv2 if
there are switches and/or Multicast routers in the VLAN that perform source-specific IP Multicast
forwarding. Otherwise, select MLDv1.

Step 4

Click Apply. The Running Configuration file is updated.

Note

Changes in MLD Snooping timers configuration, such as: Query Robustness, Query Interval etc. do not take
effect on timers which already created.

MLD Interface Settings

An interface that is defined as a Multicast router port receives all MLD packets (reports and queries) and all
Multicast data.

To configure an interface as a Multicast router interface, complete the following::

Procedure

Step 1

Click Multicast > IPv6 Multicast Configuration > MLD Interface Settings.

The following fields are displayed for each interface on which MLD is enabled:

Cisco Business 350 Series Switches Administration Guide

193

MLD VLAN Settings

Multicast

• Router MLD Version—MLD version of the Multicast router.

• Query Robustness—Enter the number of expected packet losses on a link.

• Query Interval (sec)—Interval between the general queries to be used if this device is the elected querier.

• Query Max Response Interval (sec)—Delay used to calculate the Maximum Response Code inserted into the periodic

general queries.

• Last Member Query Interval (msec)—Maximum Response Delay to be used if the device can’t read Max Response

Time value from group-specific queries sent by the elected querier.

• Multicast TTL Threshold—Enter the Time-to-Live (TTL) threshold of packets being forwarded on an interface.

Multicast packets with a TTL value less than the threshold aren’t forwarded on the interface.

The default value of 0 means that all Multicast packets are forwarded on the interface.

A value of 256 means that no Multicast packets are forwarded on the interface.

Configure the TTL threshold only on border routers. Conversely, routers on which you configure a TTL threshold
value automatically become border routers.

Step 2

Step 3

To configure an interface, select it and click Edit. Enter the fields that are described above.

Click Apply. The Running Configuration file is updated.

MLD VLAN Settings

To configure MLD on a specific VLAN, follow these steps:

Procedure

Step 1

Click Multicast > IPv6 Multicast Configuration > MLD VLAN Settings.

The following fields are displayed for each VLAN on which MLD is enabled:

• Interface Name—VLAN for which MLD information is being displayed.

• Router MLD Version—Version of MLD router.

• Query Robustness—Enter the number of expected packet losses on a link

• Query Interval (sec)—Interval between the General Queries to be used if this device is the elected querier.

• Query Max Response Interval (sec)—Delay used to calculate the Maximum Response Code inserted into the periodic

General Queries.

• Last Member Query Interval (msec)—Enter the Maximum Response Delay to be used if the device can’t read Max

Response Time value from group-specific queries sent by the elected querier.

• Multicast TTL Threshold—Enter the Time-to-Live (TTL) threshold of packets being forwarded on an interface.

Multicast packets with a TTL value less than the threshold aren’t forwarded on the interface.

The default value of 0 means that all Multicast packets are forwarded on the interface.

Cisco Business 350 Series Switches Administration Guide

194

Multicast

MLD Proxy

A value of 256 means that no Multicast packets are forwarded on the interface.

Configure the TTL threshold only on border routers. Conversely, routers on which you configure a TTL threshold
value automatically become border routers.

Step 2

Step 3

To configure a VLAN, select it and click Edit. Enter the fields described above.

Click Apply. The Running Configuration file is updated.

MLD Proxy

Note

MLD Proxy is only operational if IPv6 routing is enabled in IPv6 Global Configuration, on page 227.

To configure MLD Proxy, follow these steps:

Procedure

Step 1

Step 2

Click Multicast > IPv6 Multicast Configuration > MLD Proxy.

Enter the following fields:

• MLD Multicast Routing—Select to enable IPv6 Multicast routing.

• Downstream Protection—Select to discard downstream packets not required for the device.

• Source Specific Multicast—Select to enable delivering Multicast packets originating from a specific source address

defined in the next field.

• SSM IPv6 Access List—Define the list containing source addresses from which to deliver Multicast packets:

• Default list—Defines the SSM range access list to FF3E::/32.

• User-defined access list—Select the standard IPv6 access list name defining the SSM range. These access lists

are defined in IPv6 Access Lists, on page 240.

Step 3

Step 4

Click Apply. The Running Configuration file is updated.

To add protection to a VLAN, click Add and enter the following fields:

• Upstream Interface—Select the outgoing interface.

• Downstream Interface—Select the incoming interface.

• Downstream Protection—Select one of the following options:

• Use global—Use the status set in the global block.

• Disable—This enables forwarding of IPv6 Multicast traffic from downstream interfaces.

• Enable—This disables forwarding from downstream interfaces.

Cisco Business 350 Series Switches Administration Guide

195

IGMP/MLD Snooping IP Multicast Group

Multicast

Step 5

Click Apply. The Running Configuration file is updated.

The following fields are displayed for each IPv6 Multicast route:

• Source Address—Unicast source IPv4 address.

• Group Address—Multicast destination IPv4 address.

• Incoming Interface—Expected interface for a Multicast packet from the source. If the packet isn’t received on this

interface, it’s discarded.

• Outgoing Interfaces—Interfaces through which packets will be forwarded.

• Uptime—Length of time in hours, minutes, and seconds that the entry has been in the IP Multicast routing table.

• Expiry Time—Length of time in hours, minutes, and seconds until the entry is removed from the IP Multicast routing

table.

IGMP/MLD Snooping IP Multicast Group

The IGMP/MLD Snooping IP Multicast Group page displays the IPv4 and IPv6 group addresses learned from
IGMP/MLD messages.

There might be a difference between information on this page and information on the MAC Group Address
page. For example, assume that the system filters according to MAC-based groups and a port requested to
join the following Multicast groups 224.1.1.1 and 225.1.1.1. Both are mapped to the same MAC Multicast
address 01:00:5e:01:01:01. In this case, there’s a single entry in the MAC Multicast page, but two entries on
this page.

To query for an IP Multicast group, complete the following steps:

Procedure

Step 1

Step 2

Step 3

Click Multicast > IGMP/MLD Snooping IP Multicast Group.

Set the type of snooping group for which to search: IGMP or MLD.

Enter some or all of following query filter criteria:

• Group Address equals to—Defines the Multicast group MAC address or IP address to query.

• Source Address equals to—Defines the sender address to query.

• VLAN ID equals to—Defines the VLAN ID to query.

Step 4

Click Go. The following fields are displayed for each Multicast group:

• VLAN—The VLAN ID.

• Group Address—The Multicast group MAC address or IP address.

• Source Address—The sender address for all of the specified group ports.

Cisco Business 350 Series Switches Administration Guide

196

Multicast

Multicast Router Port

• Included Ports—The list of destination ports for the Multicast stream.

• Excluded Ports—The list of ports not included in the group.

• Compatibility Mode—The oldest IGMP/MLD version of registration from the hosts the device receives on the IP

group address.

Multicast Router Port

A Multicast router (Mrouter) port is a port that connects to a Multicast router. The device includes one or
more Multicast router ports numbers when it forwards the Multicast streams and IGMP/MLD registration
messages. This is required so that the Multicast routers can, forward the Multicast streams and propagate the
registration messages to other subnets.

To statically configure or to view the dynamically detected ports connected to the Multicast router, follow
these steps:

Procedure

Step 1

Step 2

Click Multicast > Multicast Router Port.

Enter some or all of following query filter criteria:

• VLAN ID equals to—Select the VLAN ID for the router ports that are described.

• IP Version equals to—Select the IP version that the Multicast router supports.

• Interface Type equals to—Select whether to display ports or LAGs.

Step 3

Step 4

Click Go. The interfaces matching the query criteria are displayed.

For each port or LAG, select its association type. The options are as follows:

• Static—The port is statically configured as a Multicast router port.

• Dynamic—(Display only) The port is dynamically configured as a Multicast router port by a MLD/IGMP query.

To enable the dynamic learning of Multicast router ports, go to IGMP/MLD Snooping IP Multicast Group, on page
196.

• Forbidden—This port isn’t to be configured as a Multicast router port, even if IGMP or MLD queries are received
on this port. If Forbidden is enabled on a port, the MRouter isn’t learned on this port (i.e. MRouter Ports Auto-Learn
isn’t enabled on this port).

• None—The port isn’t currently a Multicast router port.

Step 5

Click Apply to update the device.

Cisco Business 350 Series Switches Administration Guide

197

Forward All

Forward All

Multicast

When Bridge Multicast Filtering is enabled, registered Multicast packets are forwarded to ports based on
IGMP and MLD snooping. If Bridge Multicast Filtering is disabled, all Multicast packets are flooded to the
corresponding VLAN.

The Forward All page configures the ports and/or LAGs that receive Multicast streams from a specific VLAN.
This feature requires that the Bridge Multicast filtering is enabled in Multicast Properties, on page 183. If it
is disabled, then all Multicast traffic is flooded to the ports on the device. You can statically (manually)
configure a port to Forward All, if the devices connecting to the port don’t support IGMP and/or MLD.
Multicast packets, excluding IGMP and MLD messages, are always forwarded to ports that are defined as
Forward All. The configuration affects only the ports that are members of the selected VLAN.

To define Forward All Multicast, complete the following steps:

Procedure

Step 1

Step 2

Click Multicast > Forward All.

Define the following:

• VLAN ID equals to—The VLAN ID the ports/LAGs are to be displayed.

• Interface Type equals to—Define whether to display ports or LAGs.

Step 3

Step 4

Click Go. The status of all ports/LAGs are displayed.

Select the port/LAG that is to be defined as Forward All by using the following methods:

• Static—The port receives all Multicast streams.

• Forbidden—Ports can’t receive any Multicast streams, even if IGMP/MLD snooping designated the port to join a

Multicast group.

• None—The port isn’t currently a Forward All port.

Step 5

Click Apply. The Running Configuration file is updated.

Unregistered Multicast

This feature is used to ensure that the customer receives only the Multicast groups requested (registered).

Unregistered Multicast frames are forwarded to all ports on the VLAN. You can select a port to filter
unregistered Multicast streams. The configuration is valid for any VLAN of which the port is a member.

To define unregistered Multicast settings, follow these steps:

Cisco Business 350 Series Switches Administration Guide

198

Unregistered Multicast

Multicast

Procedure

Step 1

Step 2

Step 3

Step 4

Click Multicast > Unregistered Multicast.

Select the Interface Type equals to— To view either ports or LAGs.

Click Go.

Define the following:

• Port/LAG—Displays the port or LAG ID.

• Displays the forwarding status of the selected interface. The possible values are:

• Forwarding—Enables forwarding of unregistered Multicast frames to the selected interface.

• Filtering—Enables filtering (rejecting) of unregistered Multicast frames to the selected interface.

Step 5

Click Apply. The settings are saved, and the Running Configuration file is updated.

Cisco Business 350 Series Switches Administration Guide

199

Unregistered Multicast

Multicast

Cisco Business 350 Series Switches Administration Guide

200

C H A P T E R 14

IPv4 Configuration

This chapter contains the following sections:

• IPv4 Interface, on page 201
• IPv4 Static Routes, on page 204
• IPv4 Forwarding Table, on page 205
• RIPv2, on page 206
• Access List, on page 210
• ARP, on page 212
• ARP Proxy, on page 213
• UDP Relay/IP Helper, on page 213
• DHCP Snooping/Relay, on page 214
• DHCP Server, on page 220

IPv4 Interface

IPv4 interface addresses can be configured manually by the user, or automatically configured by a DHCP
server. This section provides information for defining the device IPv4 addresses, either manually or by making
the device a DHCP client. The IPv4 Interface page is used to configure IP addresses for device management.
This IP address can be configured on a port, a LAG, VLAN, loopback interface or out-of-band interface. You
can configure multiple IP addresses (interfaces) on the device. It then supports traffic routing between these
various interfaces and also to remote networks. By default and typically, the routing functionality is performed
by the hardware. If hardware resources are exhausted or there’s a routing table overflow in the hardware, IP
routing is performed by the software.

Note

The device software consumes one VLAN ID (VID) for every IP address configured on a port or LAG. The
device takes the first VID that isn’t used starting from 4094.

To configure the IPv4 addresses, follow these steps:

Procedure

Step 1

Click IPv4 Configuration > IPv4 Interface.

Cisco Business 350 Series Switches Administration Guide

201

IPv4 Interface

IPv4 Configuration

Enter the following fields:

• IPv4 Routing—Check the Enable box to enable IPv4 routing (enabled by default).

Step 2

Click Apply. The parameter is saved to the Running Configuration file.

The following fields are displayed in the IPv4 Interface Table:

• Interface—Interface for which the IP address is defined. This can also be the out-of-band port.

• IP Address Type—The available options are:

• DHCP—Received from DHCP server

• Static—Entered manually. Static interfaces are non-DHCP interfaces that created by the user.

• Default—The default address that exists on the device by default, before any configurations have been made.

• IP Address—Configured IP address for the interface.

• Mask—Configured IP address mask.

• Status—Results of the IP address duplication check.

• Tentative—There’s no final result for the IP address duplication check.

• Valid—The IP address collision check was completed, and no IP address collision was detected.

• Valid-Duplicated—The IP address duplication check was completed, and a duplicate IP address was detected.

• Duplicated—A duplicated IP address was detected for the default IP address.

• Delayed—The assignment of the IP address is delayed for 60 second if DHCP Client is enabled on startup in

order to give time to discover DHCP address.

• Not Received—Relevant for DHCP Address When a DCHP Client starts a discovery process, it assigns a
dummy IP address 0.0.0.0 before the real address is obtained. This dummy address has the status of “Not
Received”.

Step 3

Step 4

Click Add.

Select the Interface: Select the port, LAG, VLAN or loopback as the interface associated with this IP configuration, and
select an interface from the list. select an interface from the associated list.

Step 5

Select the IP Address Type: Select one of the following options:

• Dynamic IP Address—Receive the IP address from a DHCP server.

• Static IP Address—Enter the IP address, and enter the Mask field:

• Network Mask—IP mask for this address

• Prefix Length—Length of the IPv4 prefix

• Renew IP Address Now—Check Enable to enable.
• Auto Configuration via DHCP—Display the status (Disabled or Enabled).

Step 6

Click Apply. The IPv4 address settings are written to the Running Configuration file.

Caution

Cisco Business 350 Series Switches Administration Guide

202

IPv4 Configuration

Configure the Out-of-Band Interface

When the system is in one of the stacking modes with a standby active unit present, Cisco recommends configuring the
IP address as a static address to prevent disconnecting from the network during a active stacking unit switchover. This
is because when the standby active unit takes control of the stack, when using DHCP, it might receive a different IP
address than the one that was received by the stack’s original active-enabled unit.

Configure the Out-of-Band Interface

Out-of-band management allows the network operator to establish trust boundaries in accessing the management
function to apply it to network resources. This section describes how to configure the IPv4 address on the
Out-of-Band (OOB) interface.

Procedure

Step 1

Log in to the web-based utility of the switch then choose IPv4 Configuration > IPv4 Interface.

The IPv4 Interface Table on the IPv4 Interface page contains the following information:

• Interface — The Unit or interface for which the IP address is defined. This can also be a loopback interface.

• IP Address Type — The available options are:

• DHCP — Received from Dynamic Host Configuration Protocol (DHCP) server.

• Static — Entered manually. Static interfaces are non-DHCP interfaces that are created by the user.

• Default — The default address that exists on the device by default, before any configurations have been made.

• IP Address — Configured IP address for the interface.

• Mask — Configured IP address mask.

• Status — Results of the IP address duplication check.

• Tentative — There is no final result for the IP address duplication check.

• Valid — The IP address collision check was completed, and no IP address collision was detected.

• Valid-Duplicated — The IP address duplication check was completed, and a duplicate IP address was detected.

• Duplicated — A duplicated IP address was detected for the default IP address.

• Delayed — The assignment of the IP address is delayed for 60 seconds if DHCP Client is enabled on startup

in order to give time to discover DHCP address.

• Not Received — Relevant only for DHCP Address. When a DHCP Client starts a discovery process, it assigns
a dummy IP address 0.0.0.0 before the real address is obtained. This dummy address has the status of Not
Received.

Step 2

Step 3

Step 4

Click Add to manually assign a static IP address.

From the Interface area, select Out of Band.

Select Static IP Address from the IP Address Type area.

Cisco Business 350 Series Switches Administration Guide

203

IPv4 Static Routes

IPv4 Configuration

Step 5

Step 6

Enter the IP address of the OOB interface in the IP Address field.

Click a radio button from the Mask area then enter the corresponding subnet mask. The options are:

• Network Mask — IP mask for this address.

• Prefix Length — Length of the IPv4 prefix.

Step 7

Click Apply then click Close.

Your session will be automatically closed and connection to the switch will be lost as it will apply the new
management IP address on the OOB port.

You should now have successfully configured the IPv4 management interface addresses on your switch.

IPv4 Static Routes

This page enables configuring and viewing IPv4 static routes on the device. When routing traffic, the next
hop is decided on according to the longest prefix match (LPM algorithm). A destination IPv4 address may
match multiple routes in the IPv4 Static Route Table. The device uses the matched route with the highest
subnet mask, that is, the longest prefix match. If more than one default gateway is defined with the same
metric value, the lowest IPv4 address from among all the configured default gateways is used.

To define an IP static route, follow these steps:

Procedure

Step 1

Click IPv4 Configuration > IPv4 Static Routes.

The IPv4 Static Routes Table is displayed. The following fields are displayed for each entry:

• Destination IP Prefix-Destination IP address prefix.

• Prefix Length- IP route prefix for the destination IP.

• Route Type-Whether the route is a reject or remote route.

• Next Hop Router IP Address-The next hop IP address or IP alias on the route.

• Metric-Cost of this hop (a lower value is preferred).

• Outgoing Interface-Outgoing interface for this route.

Step 2

Step 3

Click Add.

Enter values for the following fields:

• Destination IP Prefix-Enter the destination IP address prefix.

• Mask-Select and enter:

• Network Mask-IP route prefix for the destination IP, in the format of a mask (number of bits in of route network

address)

Cisco Business 350 Series Switches Administration Guide

204

IPv4 Configuration

IPv4 Forwarding Table

• Prefix Length-IP route prefix for the destination IP in IP address format

• Route Type-Select the route type.

• Reject-Rejects the route and stops routing to the destination network via all gateways This ensures that if a
frame arrives with the destination IP of this route, it’s dropped. Selecting this value disables the following
controls: Next Hop IP Address, Metric, and IP SLA Track.

• Remote-Indicates that the route is a remote path

• Next Hop Router IP Address-Enter the next hop IP address or IP alias on the route.

Note
You can’t configure a static route through a directly connected IP subnet where the device gets its IP address from
a DHCP server.

• Metric select one of the following:

• Use Default - select this to use the default metric.

• User Defined - Enter the administrative distance to the next hop. The range is 1–255.

Step 4

Click Apply. The IP Static route is saved to the Running Configuration file.

IPv4 Forwarding Table

To view the IPv4 Forwarding Table, follow these steps:

Procedure

Step 1

Click IPv4 Configuration > IPv4 Forwarding Table.

The IPv4 Forwarding Table is displayed. The following fields are displayed for each entry:

• Destination IP Prefix—Destination IP address prefix.

• Prefix Length— IP route prefix for the length of the destination IP.

• Route Type—Whether the route is a local, reject or remote route.

• Next Hop Router IP Address—The next hop IP address.

• Route Owner—This can be one of the following options:

• Default—Route was configured by default system configuration.

• Static—Route was manually created.

• Dynamic—Route was created by an IP routing protocol.

• DHCP—Route was received from a DHCP server.

Cisco Business 350 Series Switches Administration Guide

205

RIPv2

IPv4 Configuration

• Directly Connected—Route is a subnet to which the device is connected.

• Rejected—Route was rejected.

• Metric—Cost of this hop (a lower value is preferred).

• Administrative Distance—The administrative distance to the next hop (a lower value is preferred). This isn’t relevant

for static routes.

• Outgoing Interface—Outgoing interface for this route.

Step 2

Click the Refresh icon to refresh the data.

RIPv2

This section describes the Routing Information Protocol (RIP) version 2 feature.

Note

This feature is only supported on firmware 3.1 and beyond.

Routing Information Protocol (RIP) is an implementation of a distance-vector protocol for local and wide-area
networks. It classifies routers as either active or passive (silent). Active routers advertise their routes to others;
passive routers listen and update their routes based on advertisements, but do not advertise. Typically, routers
run RIP in active mode, while hosts usepassive mode.

The default gateway is a static route and it is advertised by RIP in the same way as all other static routers, if
it is enabled by configuration. When IP Routing is enabled, RIP works fully. When IP Routing is disabled,
RIP works in the passive mode, meaning that it only learns routes from the received RIP messages and does
not send them.

Note

To enable IP Routing, go to the IPv4 Interface page. The device supports RIP version 2, which is based on
the following standards:

• RFC2453 RIP Version 2, November 1998

• RFC2082 RIP-2 MD5 Authentication, January 1997

• RFC1724 RIP Version 2 MIB Extension

Received RIPv1 packets are dropped.

Enabling RIP

• RIP must be enabled globally and per interface.

• RIP can only be configured if it is enabled.

• Disabling RIP globally deletes the RIP configuration on the system.

Cisco Business 350 Series Switches Administration Guide

206

IPv4 Configuration

RIPv2 Properties

• Disabling RIP on an interface deletes the RIP configuration on the specified interface.

• If IP Routing is disabled, RIP messages are not sent, although when RIP messages are received, they are

used to update the routing table information.

Note

RIP can only be defined on manually-configured IP interfaces, meaning that RIP cannot be defined on an
interface whose IP address was received from a DHCP server or whose IP address is the default IP address.

RIPv2 Properties

To enable or disable RIPv2 on the device, follow these steps:

Procedure

Step 1

Step 2

Click IPv4 Configuration > RIPv2 > RIPv2 Properties.

Select the following options as required:

• RIP—The following options are available:

• Enable—Enable RIP.

• Disable—Disable RIP. Disabling RIP deletes the RIP configuration on the system.

• Shutdown—Set the RIP global state to shutdown.

• RIP Advertisement—Select to enable sending routing updates on all RIP IP interfaces.

• Default Route Advertisement—Select to enable sending the default route to the RIP domain. This route will serve

as the default router.

• Default Metric—Enter the value of the default metric.

Step 3

Step 4

Redistribute Static Route—Select to enable manually-defined (remote) routes.

If Redistribute Static Route is enabled, select an option for the Redistribute Static Metric field. The following options
are available:

• Default Metric—Causes RIP to use the default metric value for the propagated static route configuration.

• Transparent—Causes RIP to use the routing table metric as the RIP metric fo

• If the metric value of a static route is equal to or less than 15, this value is used in the RIP protocol when

advertising this static route.

• If the metric value of a static route is greater than 15, the static route is not advertised to other routers using

RIP.

• User Defined Metric—Enter the value of the metric.

Cisco Business 350 Series Switches Administration Guide

207

RIPv2 Settings

IPv4 Configuration

Step 5

Step 6

Redistribute Connected Route—Select to enable RIP routes that correspond to defined IP interfaces on which RIP is not
enabled (defined locally).

If Redistribute Connected Route is enabled, select an option for the Redistribute Connected Metric field. The following
options are available:

• Default Metric—Causes RIP to use the default metric value for the propagated static route configuration.

• Transparent—Causes RIP to use the routing table metric as the RIP metric for the propagated static route configuration.

This results in the following behavior:

• If the metric value of a static route is equal to or less than 15, this value is used in the RIP protocol when

advertising this static route.

• If the metric value of a static route is greater than 15, the static route is not advertised to other routers using

RIP.

• User Defined Metric—Enter the value of the metric.

Step 7

Click Apply. The settings are written to the Running Configuration file.

RIPv2 Settings

To configure RIP on an IP interface, complete the following steps:

Procedure

Step 1

Step 2

Click IPv4 Configuration > RIPv2 > RIPv2 Settings.
RIP parameters are displayed per IP interface. To add a new IP interface, click Add and enter the following fields:

• IP Address—Select an IP interface defined on the Layer 2 interface.

• Shutdown—Keep RIP configuration on the interface, but set the interface to inactive.

• Passive—Specifies whether sending RIP route update messages is allowed on the specified IP interface. If this field

isn’t enabled, RIP updates aren’t sent (passive).

• Offset—Specifies the metric number of the specified IP interface. This reflects the additional cost of using this

interface, based on the speed of the interface.

• Default Route Advertisement—This option is defined globally in the RIPv2 Properties, on page 207 page. You can

use the global definition or define this field for the specific interface. The following options are available:

• Global—Use the global settings defined in the RIPv2 Properties. Screen

• Disable—On this RIP interface, don’t advertise the default route.

• Enable—Advertise the default route on this RIP interface.

• Default Route Advertisement Metric—Enter the metric for the default route for this interface.

• Authentication Mode—RIP authentication state (enable/disable) on a specified IP interface. The following options

are available:

Cisco Business 350 Series Switches Administration Guide

208

IPv4 Configuration

RIPv2 Statistics

• None—There’s no authentication performed.

• Text—The key password entered below is used for authentication.

• MD5—The MD5 digest of the key chain selected below is used for authentication.

• Key Password—If Text was selected as the authentication type, enter the password to be used.

• Key Chain—If MD5 was selected as the authentication mode, enter the key chain to be digested. This key chain is

created as described in the section.

• Distribute-list In—Select to configure filtering on RIP incoming routes for one or more specified IP addresses in

the Access List Name. If this field is enabled, select the Access List Name below.

• Access List Name—Select the Access List name (which includes a list of IP addresses) of RIP incoming routes

filtering for a specified IP interface.

• Distribute-list Out—Select to configure filtering on RIP outgoing routes for one or more specified IP addresses in

the Access List Name. If this field is enabled, select the Access List Name below.

• Access List Name—Select the Access List name (which includes a list of IP addresses) of RIP outgoing routes

filtering for a specified IP interface.

Step 3

Click Apply. The settings are written to the Running Configuration file.

RIPv2 Statistics

To view the RIP statistical counters for each IP address, complete the following steps:

Procedure

Step 1

Click IPv4 Configuration > RIPv2 > RIPv2 Statistics.

The following fields are displayed:

• IP Interface—IP interface defined on the Layer 2 interface.

• Bad Packets Received—Specifies the number of bad packets identified by RIP on the IP interface.

• Bad Routes Received—Specifies the number of bad routes received and identified by RIP on the IP interface. Bad
routes mean that the route parameters are incorrect. For example, the IP destination is a Broadcast address, or the
metric is 0 or greater than 16.

• Update Sent—Specifies the number of packets sent by RIP on the IP interface.

Step 2

To clear all interface counters, click Clear All Interface Counters.

Cisco Business 350 Series Switches Administration Guide

209

RIPv2 Peer Router Database

IPv4 Configuration

RIPv2 Peer Router Database

To view RIP Peer Router Database, follow these steps:

Procedure

Step 1

Click IPv4 Configuration > RIPv2 > RIPv2 Peer Router Database.

The following fields are displayed for the peer router database:

• Router IP Address—IP interface defined on the Layer 2 interface.

• Bad Packets Received—Specifies the number of bad packets identified by RIP on the IP interface.

• Bad Routes Received—Specifies the number of bad routes received and identified by RIP on the IP interface. Bad
routes mean that the route parameters are incorrect. For example, the IP destination is a Broadcast, or the metric is
0 or greater than 16.

• Last Updated—Indicates the last time RIP received RIP routes from the remote IP address.

Step 2

To clear all counters, click Clear All Interface Counters.

Access List

Access lists consists of permit and/or deny statements that filter traffic on a device. These statements are
executed in a top down fashion. As traffic encounters the access list, the access list is parsed top to bottom,
looking for a match. The first match encountered will determine if the traffic is permitted or denied. Therefore,
the order of your access list statements is extremely important. Access list should be built from most specific
to least specific. This will keep unintentional matching to a minimum. If no match is found, there is an implicit
"deny everything" at the end of all access list statements.

Access lists are an integral part of working with switches, and they are vital to security.

Access List Settings

To set the global configuration of an access list, follow these steps:

Procedure

Step 1

Step 2

Click IPv4 Configuration > Access List > Access List Settings.

To add a new Access List, click Add to open the Add Access List page and enter the following fields:

• Name—Define a name for the access list.

• Source IPv4 Address—Enter the source IPv4 address. The following options are available:

• Any—All IP addresses are included.

Cisco Business 350 Series Switches Administration Guide

210

IPv4 Configuration

Source IPv4 Address List

• User defined—Enter an IP address.

• Source IPv4 Mask—Enter the source IPv4 address mask type and value. The following options are available:

• Network mask—Enter the network mask.

• Prefix length—Enter the prefix length.

• Action—Select an action for the access list. The following options are available:

• Permit—Permit entry of packets from one or more IP addresses in the access list.

• Deny—Reject entry of packets from one or more IP addresses in the access list.

Step 3

Click Apply. The settings are written to the Running Configuration file.

Source IPv4 Address List

To populate an access list with IP addresses, complete the following:

Procedure

Step 1

Step 2

Click IPv4 Configuration > Access List > Source IPv4 Address List.

To modify the parameters of an access list, click Add and modify any of the following fields:

• Access List Name—Name of the access list.

• Source IPv4 Address—Source IPv4 address. The following options are available:

• Any—All IP addresses are included.

• User defined—Enter an IP address.

• Source IPv4 Mask—Source IPv4 address mask type and value. The following options are available:

• Network mask—Enter the network mask (for example 255.255.0.0).

• Prefix length—Enter the prefix length.

• Action—Action for the access list. The following options are available:

• Permit—Permit entry of packets from one or more IP addresses in the access list.

• Deny—Reject entry of packets from one or more IP addresses in the access list.

Step 3

Click Apply. The settings are written to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

211

ARP

ARP

IPv4 Configuration

The device maintains an ARP (Address Resolution Protocol) table for all known devices that reside in the IP
subnets directly connected to it. A directly connected IP subnet is the subnet to which an IPv4 interface of
the device is connected. When the device is required to send/route a packet to a local device, it searches the
ARP table to obtain the MAC address of the device. The ARP table contains both static and dynamic addresses.
Static addresses are manually configured and don’t age out. The device creates dynamic addresses from the
ARP packets it receives. Dynamic addresses age out after a configured time.

Note

The mapping information is used for routing and to forward generated traffic.

To define the ARP tables, complete the following steps:

Procedure

Step 1

Step 2

Click IPv4 Configuration > ARP.

Enter the parameters.

• ARP Entry Age Out—Enter the number of seconds that dynamic addresses can remain in the ARP table. A dynamic
address age out after the time it’s in the table exceeds the ARP Entry Age Out time. When a dynamic address ages
out, it’s deleted from the table, and only returns when it’s relearned.

• Clear ARP Table Entries—Select the type of ARP entries to be cleared from the system.

• All—Deletes all of the static and dynamic addresses immediately

• Dynamic—Deletes all of the dynamic addresses immediately

• Static—Deletes all of the static addresses immediately

• Normal Age Out—Deletes dynamic addresses based on the configured ARP Entry Age Out time.

Step 3

Click Apply. The ARP global settings are written to the Running Configuration file.

The ARP table displays the following fields:

• Interface—The IPv4 Interface of the directly connected IP subnet where the IP device resides.

• IP Address—The IP address of the IP device.

• MAC Address—The MAC address of the IP device.

• Status—Whether the entry was manually entered or dynamically learned.

Step 4

Step 5

Click Add.

Enter the parameters:

• IP Version—The IP address format supported by the host. Only IPv4 is supported.

Cisco Business 350 Series Switches Administration Guide

212

IPv4 Configuration

ARP Proxy

• Interface—An IPv4 interface can be configured on a port, LAG, or VLAN. Select the desired interface from the list

of configured IPv4 interfaces on the device.

• IP Address—Enter the IP address of the local device.

• MAC Address—Enter the MAC address of the local device.

Step 6

Click Apply. The ARP entry is saved to the Running Configuration file.

ARP Proxy

The Proxy ARP technique is used by the device on a given IP subnet to answer ARP queries for a network
address that isn’t on that network.

Note

The ARP proxy feature is only available when the device is in L3 mode.

The ARP Proxy is aware of the destination of traffic, and offers another MAC address in reply. Serving as an
ARP Proxy for another host effectively directs LAN traffic destination to the host. The captured traffic is then
typically routed by the Proxy to the intended destination by using another interface, or by using a tunnel. The
process in which an ARP-query-request for a different IP address, for proxy purposes, results in the node
responding with its own MAC address is sometimes referred to as publishing.

To enable ARP Proxy on all IP interfaces, complete the following steps:

Procedure

Step 1

Step 2

Click IPv4 Configuration > ARP Proxy.

Select ARP Proxy to enable the device to respond to ARP requests for remotely-located nodes with the device MAC
address.

Step 3

Click Apply. The ARP proxy is enabled, and the Running Configuration file is updated.

UDP Relay/IP Helper

Switches don’t typically route IP Broadcast packets between IP subnets. However, this feature enables the
device to relay specific UDP Broadcast packets, received from its IPv4 interfaces, to specific destination IP
addresses.

To configure the relaying of UDP packets received from a specific IPv4 interface with a specific destination
UDP port, add a UDP Relay:

Cisco Business 350 Series Switches Administration Guide

213

DHCP Snooping/Relay

IPv4 Configuration

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Click IPv4 Configuration > UDP Relay/IP Helper.

Click Add.

Select the Source IP Interface to where the device is to relay UDP Broadcast packets based on a configured UDP destination
port. The interface must be one of the IPv4 interfaces configured on the device.

Enter the UDP Destination Port number for the packets that the device is to relay. Select a well-known port from the
drop-down list, or click the port radio button to enter the number manually.

Enter the Destination IP Address that receives the UDP packet relays. If this field is 0.0.0.0, UDP packets are discarded.
If this field is 255.255.255.255, UDP packets are flooded to all IP interfaces.

Step 6

Click Apply. The UDP relay settings are written to the Running Configuration file.

DHCP Snooping/Relay

This section covers Dynamic Host Configuration Protocol (DHCP) Snooping/Relay. A DHCP relay agent is
any host that forwards DHCP packets between clients and servers. Relay agents are used to forward requests
and replies between clients and servers when they are not on the same physical subnet. Relay agent forwarding
is distinct from the normal forwarding of an IP router, where IP datagrams are switched between networks
somewhat transparently. By contrast, relay agents receive DHCP messages and then generate a new DHCP
message to send on another interface.

DHCP snooping is a layer 2 security technology built into the operating system of a capable network switch
that drops DHCP traffic determined to be unacceptable. The fundamental use case for DHCP snooping is to
prevent unauthorized (rogue) DHCP servers offering IP addresses to DHCP clients.

Properties

DHCP Relay transfers DHCP packets to the DHCP server.

To set the DHCP Snooping/Relay properties, complete the following steps:

Procedure

Step 1

Step 2

Click IPv4 Configuration > DHCP Snooping/Relay > Properties.

Configure the following fields:

• DHCP Relay—Select to enable DHCP Relay

• DHCP Snooping Status—Select to enable DHCP Snooping.

• Option 82 Pass Through—Select to leave foreign Option 82 information when forwarding packets.

• Verify MAC Address—Select to verify that the source MAC address of the Layer 2 header matches the client

hardware address as appears in the DHCP Header (part of the payload) on DHCP untrusted ports.

Cisco Business 350 Series Switches Administration Guide

214

IPv4 Configuration

Option 82 Settings

• Backup Database—Select to back up the DHCP Snooping Binding database on the device’s flash memory.

Step 3

Step 4

Step 5

Click Apply. The settings are written to the Running Configuration file.

To define a DHCP server, click Add. The Add DHCP Server dialog appears, with the IP version indicated.

Enter the IP address of the DHCP server and click Apply. The settings are written to the Running Configuration file.

Option 82 Settings

Option 82 (DHCP Relay Agent Information Option) passes port and agent information to a central DHCP
server, indicating where an assigned IP address physically connects to the network. The main goal of option
82 is to help to the DHCP server select the best IP subnet (network pool) from which to obtain an IP address.

Option 82, when enabled, applies to DHCP Relay interface with IP address and DHCP Snooping. Even if
Option 82 isn’t enabled, and if DCHP relay is enabled on VLAN without an IP address, option 82 information
will be inserted to DHCP packets received on this VLAN.

To configure the status on the device and the format of the Option 82 data within the DHCP message, follow
these steps:

Procedure

Step 1

Click IPv4 Configuration > DHCP Snooping/Relay > Option 82 Settings.

Enter the following fields:

• Option 82 Insertion—Check Enable to insert Option 82 information into packets.

• Numeric Token Format—Select Hexadecimal or Ascii as needed. This parameter defines the format to use for the

following tokens:

• $int-ifindex$

• $int-portid$

• $switch-moduleid$

• $vlan-id$

For example, the $vlan-id$ token, where VLAN ID is 35. VLAN ID 35 can be sent either as Hexa byte of 0x23
or ASCII representation of value of 0x3335. See the full information on the various tokens in the following
table.

Step 2

Enter the Circuit-ID Template. Select Use Default to use the default Circuit-ID. Select User Defined to configure the
Circuit-ID. Use the text box to enter the Circuit-ID template. The template is a string of free text and pre-defined tokens
(see table below). You can enter tokens manually, or use the drop-down to select a token from the list of available tokens
and add it to the Circuit-ID text by clicking the arrow button. Use the Preview button to view actual Sub option byte
content and text representation of the selected sub-option.

Step 3

Enter the Remote-ID Template in the same way as the Circuit-ID Template, using the related text box and drop-down
list.

Note

Cisco Business 350 Series Switches Administration Guide

215

Option 82 Settings

IPv4 Configuration

The Total Sub-Option Payload shows the dynamically updated number of reserved byte count of the payload of both
sub-options. The payload must not exceed 247. Byte count is based on the reserved length of the tokens included in the
sub-option, plus the number of free text chars used in the sub-option.

Step 4

Click Apply. The settings are written to the Running Configuration file.

These are the tokens that are available from the drop-down box.

Option

Description

Reserved
bytes

Bytes used
in Hex
format

Bytes used in
ASCII format

$int-ifindex$

The ifIndex of the interface on which the DHCP client request
was received.

4

Value is taken from the ifIndex field of the ifTable MIB entry

$int-portid$

The interface number relative to the specific unit (standalone
or stacking unit).

2

For physical interfaces this value begins with 1 for the 1st port
on a specific unit, 2 for the 2nd port on that unit, until N for
last port on that unit.

For LAG interfaces the value is determined globally (and not
based on specific unit), according to the LAG ID. For example,
1,2,3….

$int-name$

The full name of the interface, upon which the DHCP client
request was received.

32

The name is based on the interface full name format as used
by CLI when configuring or displaying information for this
interface

$int-abrvname$

The abbreviated name of the interface, upon which the DHCP
client request was received.

8

This parameter is based on the abbreviated interface name
format as used by CLI when configuring or displaying
information for this interface.

$int-desc-16$

Up to 16 (first) bytes of the interface description- for the
interface, upon which the DHCP client packet was received.

16

The value for this variable is taken from the description added
by the user to the interface using the interface level
"description" command.

Max number of bytes to use is 16 (first bytes)- even if
description is longer than 16 bytes.

For interfaces without a user-defined description- the interface
abbreviated interface name format is used.

2

1

NA

NA

NA

4

2

Actual bytes used
for the ASCII
representation of
the interface
name (up to the
limit of reserved
bytes)

Actual bytes used
for the ASCII
representation of
the interface
description (up to
the limit of
reserved bytes)

Cisco Business 350 Series Switches Administration Guide

216

IPv4 Configuration

Option

Description

Option 82 Settings

Reserved
bytes

$int-desc-32$

Up to 32 (first) bytes of the interface description - for the
interface, upon which the DHCP client packet was received.

32

The value for this variable is taken from the description added
by the user to the interface using the interface level
"description" command.

Max number of bytes to use is 32 (1st bytes) - even if
description is longer than 32 bytes.

For interfaces without user-defined description - the interface
abbreviated interface name format is used.

Bytes used
in Hex
format

NA

Bytes used in

ASCII format

Actual bytes used

for the ASCII

representation of

the interface

description (up to

the limit of

reserved bytes)

$int-desc-64$

The full interface description (up to 64 bytes) - for the interface,
upon which the DHCP client packet was received.

64

NA

The value for this variable is taken from the description added
by the user to the interface using the interface level
"description" command.

For interfaces without user-defined description - the interface
abbreviated interface name format is used.

$int-mac$

The MAC address of the physical interface upon which the
DHCP client request was received.

The format of this field is always HEX format, with no
delimiter (for example, 000000112205).

$switch-mac$

The base MAC address of the device inserting the option 82
(the relay agent).

The format of this field is always HEX format, with no
delimiter (for example, 000000112200).

$switch-hostname-16$

Up to the first 16 bytes of the device hostname.

$switch-hostname-32$

Up to the first 32 bytes of the device hostname.

$switch-hostname-58$

The full hostname of the device.

$switch-module-id$

The unit ID of the unit upon which the DHCP client request
was received.

In standalone systems ID is always equal 1.

$vlan-id$

The VLAN ID of the VLAN upon the DHCP client request
was received.

Values 1-4094

6

6

16

32

58

2

4

6

6

NA

NA

NA

1

2

NA

NA

2

4

Actual bytes used

for the ASCII

representation of

the hostname (up

to the limit of

reserved bytes)

Cisco Business 350 Series Switches Administration Guide

217

Interface Settings

IPv4 Configuration

Option

Description

Reserved
bytes

Bytes used
in Hex
format

Bytes used in
ASCII format

$vlan-name-16$

Up to the first 16 bytes of the VLAN name, for the VLAN
upon which the DHCP client request was received.

16

NA

If a name isn’t configure for the specified VLAN, the value is
taken from the relevant VLAN ifDescr MIB field of ifTable
MIB entry.

$vlan-name-32$

The full VLAN name of the VLAN upon the DHCP client
request was received.

32

NA

If a name is configure for the specified VLAN, the value is
taken from the relevant ifDescr MIB field of ifTable MIB entry.

Actual bytes used
for the ASCII
representation of
the VLAN name
(up to the limit of
reserved bytes)

Note

The total reserved byte count of the payload of both sub-options must not exceed 247. The byte count isn’t
updated dynamically and shown at the bottom of the screen. Byte count is based on the reserved length (see
above) of the tokens included in the sub-option, plus the number of free text chars used in the sub-option.

Interface Settings

DHCP Relay and Snooping can be enabled on any interface or VLAN. For DHCP relay to be functional, an
IP address must be configured on the VLAN or interface.

DHCPv4 Relay Overview

DHCP Relay relays DHCP packets to the DHCP server. The device can relay DHCP messages received from
VLANs that do not have IP addresses. Whenever DHCP Relay is enabled on a VLAN without an IP address,
Option 82 is inserted automatically. This insertion is in the specific VLAN and does not influence the global
administration state of Option 82 insertion.

DHCPv4 Snooping Overview

DHCP snooping provides a security mechanism to prevent receiving false DHCP response packets and to log
DHCP addresses. It does this by treating ports on the device as either trusted or untrusted. A trusted port is a
port that is connected to a DHCP server and is allowed to assign DHCP addresses. DHCP messages received
on trusted ports are allowed to pass through the device. An untrusted port is a port that is not allowed to assign
DHCP addresses. By default, all ports are considered untrusted until you declare them trusted (in the Interface
Settings page).

To enable DHCP Snooping/Relay on specific interfaces, follow these steps:

Procedure

Step 1

Step 2

Step 3

Click IPv4 Configuration > DHCP Snooping/ Relay > Interface Settings.

To enable DHCP Relay or DHCP Snooping on an interface, click ADD.

Select the interface and the feature to be enabled: DHCP Relay or DHCP Snooping or both to enable.

Cisco Business 350 Series Switches Administration Guide

218

IPv4 Configuration

DHCP Snooping Trusted Interfaces

Note
The DHCP snooping setting is available only if there is an IP address configured on the selected interface.

Step 4

Click Apply. The settings are written to the Running Configuration file.

DHCP Snooping Trusted Interfaces

Packets from untrusted ports/LAGs are checked against the DHCP Snooping Binding database ( See DHCP
Snooping Binding Database, on page 219). By default, interfaces are untrusted. To designate an interface as
trusted, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click IPv4 Configuration > DHCP Snooping/Relay > DHCP Snooping Trusted Interfaces.

Select the interface and click Edit.

Select Trusted Interface (Yes for trusted or No for untrusted).

Click Apply to save the settings to the Running Configuration file.

DHCP Snooping Binding Database

Note the following points about maintenance of the DHCP Snooping Binding database:

• The device doesn’t update the DHCP Snooping Binding database when a station moves toanother interface.

• If a port is down, the entries for that port aren’t deleted.

• When DHCP Snooping is disabled for a VLAN, the binding entries that collected for that VLAN are

removed.

• If the database is full, DHCP Snooping continue to forward packets but new entries aren’t created. Note
that if the IP source guard and/or ARP inspection features are active, the clients that aren’t written in the
DHCP Snooping Binding database aren’t been able to connect to the network.

To add entries to the DHCP Snooping Binding database, follow these steps:

Procedure

Step 1

Click IPv4 Configuration > DHCP Snooping /Relay > DHCP Snooping Binding Database.

The fields in the DHCP Snooping Binding Database are displayed for the IP Source Guard:

• Status

• Active—IP Source Guard is active on the device.

• Inactive—IP Source Guard isn't active on the device.

Cisco Business 350 Series Switches Administration Guide

219

DHCP Server

IPv4 Configuration

• Reason

• No Problem

• No Resource

• No Snoop VLAN

• Trust Port

Step 2

Step 3

To add an entry, click Add. The supported address type is IPv4.

Enter the fields:

• VLAN ID—VLAN on which packet is expected.

• MAC Address—MAC address of packet.

• IP Address—IP address of packet.

• Interface—Unit/Slot/Interface on which packet is expected.

• Type—The possible field values are:

• Dynamic—Entry has limited lease time.

• Static—Entry was statically configured.

• Lease Time—If the entry is dynamic, enter the amount of time that the entry is to be active in the DHCP Database.

If there’s no Lease Time, check Infinite.)

Step 4

Step 5

Click Apply. The settings are defined, and the device is updated.

Click Clear Dynamic to delete the configuration.

DHCP Server

The DHCP Server feature enables you to configure the device as a DHCPv4 server. A DHCPv4 server is used
to assign IPv4 address and other information to another device (DHCP client) The DHCPv4 server allocates
IPv4 addresses from a user-defined pool of IPv4 addresses.

These can be in the following modes:

• Static Allocation—The hardware address or client identifier of a host is manually mapped to an IP address.

• Dynamic Allocation—A client obtains a leased IP address for a specified period of time (that can be
infinite). If the DHCP client does not renew the allocated IP Address, the IP address is revoked at the
end of this period, and the client must request another IP address.

DHCP Server Properties

To configure the device as a DHCPv4 server, follow these steps:

Cisco Business 350 Series Switches Administration Guide

220

IPv4 Configuration

Network Pools

Procedure

Step 1

Step 2

Step 3

Click IPv4 Configuration > DHCP Server > Properties to display the Properties page.

Select Enable to configure the device as a DHCP server.

Click Apply. The device immediately begins functioning as a DHCP server. However, it does not assign IP addresses to
clients until a pool is created.

Network Pools

When the device is serving as a DHCP server, one or more pools of IP addresses must be defined, from which
the device allocates IP addresses to DHCP clients. Each network pool contains a range of addresses that belong
to a specific subnet. These addresses are allocated to various clients within that subnet.

When a client requests an IP address, the device as DHCP server allocates an IP address according to the
following:

• Directly Attached Client—The device allocates an address from the network pool whose subnet matches

the subnet configured on the device’s IP interface from which the DHCP request was received.

If the message arrived directly (not via DHCP Relay) the pool is a Local pool and belongs to one of IP
subnets defined on the input layer 2 interface. In this case, the IP mask of the pool equals to the IP mask
of the IP interface and the minimum and maximum IP addresses of the pool belong to the IP subnet.

• Remote Client—The device takes an IP address from the network pool with the IP subnet that matches

the IP address of the DHCP relay agent.

If the message arrived via DHCP relay, the address used belongs to the IP subnet specified by minimum
IP address and IP mask of the pool. That pool is a remote pool.

Up to 16 network pools can be defined.

To create a pool of IP addresses, and define their lease durations, follow these steps:

Procedure

Step 1

Click IPv4 Configuration > DHCP Server > Network Pools.

The previously defined network pools are displayed. These fields are described below in the Add page. The following
field is displayed (but not in the Add page):

• Number of Leased Addresses—Number of addresses in the pool that have been assigned (leased).

Step 2

Click Add to define a new network pool. Note that you either enter the Subnet IP Address and the Mask, or enter the
Mask, the Address Pool Start and Address Pool End.

Step 3

Enter the fields:

• Pool Name—Enter the pool name.

• Subnet IP Address—Enter the subnet in which the network pool resides.

Cisco Business 350 Series Switches Administration Guide

221

Network Pools

IPv4 Configuration

• Mask—Enter one of following:

• Network Mask—Check and enter the pool’s network mask.

• Prefix Length—Check and enter the number of bits that comprise the address prefix.

• Address Pool Start—Enter the first IP address in the range of the network pool.

• Address Pool End—Enter the last IP address in the range of the network pool.

• Lease Duration—Enter the amount of time a DHCP client can use an IP address from this pool. You can configure

a lease duration of up to 49,710 days or an infinite duration.

• Infinite—The duration of the lease is unlimited.

• Days—The duration of the lease in number of days The ranges is 0–49,710 days.

• Hours—The number of hours in the lease A days value must be supplied before an hours value can be added.

• Minutes—The number of minutes in the lease A days value and an hours value must be added before a minutes

value can be added.

• Default Router IP Address (Option 3)—Enter the default router for the DHCP client.

• Domain Name Server IP Address (Option 6)—Select one of the devices DNS servers (if already configured) or

select Other and enter the IP address of the DNS server available to the DHCP client.

• Domain Name (Option 15)—Enter the domain name for a DHCP client.

• NetBIOS WINS Server IP Address (Option 44)—Enter the NetBIOS WINS name server available to a DHCP client.

• NetBIOS Node Type (Option 46)—Select how to resolve the NetBIOS name. Valid node types are:

• Hybrid—A hybrid combination of b-node and p-node is used. When configured to use h-node, a computer

always tries p-node first and uses b-node only if p-node fails. This is the default.

• Mixed—A combination of b-node and p-node communications is used to register and resolve NetBIOS names.
M-node first uses b-node; then, if necessary, p-node. M-node is typically not the best choice for larger networks
because its preference for b-node. Broadcasts increase network traffic.

• Peer-to-Peer—Point-to-point communications with a NetBIOS name server are used to register and resolve

computer names to IP addresses.

• Broadcast—IP Broadcast messages are used to register and resolve NetBIOS names to IP addresses.

• SNTP Server IP Address (Option 4)—Select one of the device’s SNTP servers (if already configured) or select

Other and enter the IP address of the time server for the DHCP client.

• File Server IP Address (siaddr)—Enter the IP address of the TFTP/SCP server from which the configuration file is

downloaded.

• File Server Host Name (sname/Option 66)—Enter the name of the TFTP/SCP server.

• Configuration File Name (file/Option 67)—Enter the name of the file that is used as a configuration file.

Step 4

Click Apply. The Running Configuration file is updated.

Cisco Business 350 Series Switches Administration Guide

222

IPv4 Configuration

Excluded Addresses

Excluded Addresses

By default, the DHCP server assumes that all pool addresses in a pool may be assigned to clients. A single
IP address or a range of IP addresses can be excluded. The excluded addresses are excluded from all DHCP
pools.

To define an excluded address range, follow these steps:

Procedure

Step 1

Click IPv4 Configuration > DHCP Server > Excluded Addresses.

The previously defined excluded IP addresses are displayed.

Step 2

To add a range of IP addresses to be excluded, click Add, and enter the fields:

• Start IP Address—First IP address in the range of excluded IP addresses.

• End IP Address—Last IP address in the range of excluded IP addresses.

Step 3

Click Apply. The Running Configuration file is updated.

Static Hosts

Procedure

You might want to assign some DHCP clients a permanent IP address that never changes. This client is then
known as a static host. You can define up to 120 static hosts.

To manually allocate a permanent IP address to a specific client, complete the following steps:

Step 1

Click IPv4 Configuration > DHCP Server > Static Hosts.

The static hosts are displayed. The fields displayed are described in the Add page, except for the following:

• MAC Address/Client Identifier

Step 2

To add a static host, click Add, and enter the fields:

IP Address

Host Name

Mask

Enter the IP address that was statically assigned to the host.

Enter the host name, which can be a string of symbols and an integer.

Enter the static host’s network mask.

• Network Mask—Check and enter the static host’s network mask.

• Prefix Length—Check and enter the number of bits that comprise the address prefix.

Cisco Business 350 Series Switches Administration Guide

223

Static Hosts

IPv4 Configuration

Identifier Type

Set how to identify the specific static host.

• Client Identifier—Enter a unique identification of the client specified in hexadecimal

notation, such as: 01b60819681172.

Or:

• MAC Address—Enter the MAC address of the client.

Enter either the Client Identifier or MAC Address, according to which type you
selected.

Client Name

Enter the name of the static host, using a standard set of ASCII characters. The client
name must not include the domain name.

Default Router IP Address
(Option 3)

Enter the default router for the static host.

Domain Name Server IP
Address (Option 6)

Select one of the devices DNS servers (if already configured) or select Other and enter
the IP address of the DNS server available to the DHCP client.

Domain Name (Option 15)

Enter the domain name for the static host.

NetBIOS WINS Server IP
Address (Option 44)

NetBIOS Node Type (Option
46)

Enter the NetBIOS WINS name server available to the static host.

Select how to resolve the NetBIOS name. Valid node types are:

• Hybrid—A hybrid combination of b-node and p-node is used. When configured to
use h-node, a computer always tries p-node first and uses b-node only if p-node fails.
This is the default.

• Mixed—A combination of b-node and p-node communications is used to register
and resolve NetBIOS names. M-node first uses b-node; then, if necessary, p-node.
M-node is typically not the best choice for larger networks because its preference
for b-node. Broadcasts increases network traffic.

• Peer-to-Peer—Point-to-point communications with a NetBIOS name server are used

to register and resolve computer names to IP addresses.

• Broadcast—IP Broadcast messages are used to register and resolve NetBIOS names

to IP addresses.

SNTP Server IP Address
(Option 4)

Select one of the device’s SNTP servers (if already configured) or select Other and enter
the IP address of the time server for the DHCP client.

File Server IP Address
(siaddr)

Enter the IP address of the TFTP/SCP server from which the configuration file is
downloaded.

File Server Host Name
(sname/Option 66)

Configuration File Name
(file/Option 67)

Enter the name of the TFTP/SCP server.

Enter the name of the file that is used as a configuration file.

Cisco Business 350 Series Switches Administration Guide

224

IPv4 Configuration

DHCP Options

Step 3

Click Apply. The Running Configuration file is updated.

DHCP Options

When the device is acting as a DHCP server, the DHCP options can be configured using the HEX option. A
description of these options can be found in RFC2131. The configuration of these options determines the
reply that is sent to DHCP clients whose packets include a request (using option 55) for the configured DHCP
options. Example: The DHCP option 66 is configured with the name of a TFTP server in the DHCP Options
page. When a client DHCP packet is received containing option 66, the TFTP server is returned as the value
of option 66.

To configure one or more DHCP options, follow these steps:

Procedure

Step 1

Click IPv4 Configuration > DHCP Server > DHCP Options.

The previously configured DHCP options are displayed.

Step 2

To configure an option that has not been configured yet, enter the field:

• DHCP Server Pool Name equals to—Select one of the pool of network addresses defined in the Network Pools, on

page 221 and click Go to filter by that pool of network addresses.

Step 3

Click Add and enter the fields:

• Pool Name—Displays the name of the pool name for which code is being defined.

• Code—Enter the DHCP option code.

• Type—The radio buttons for this field, change according to the type of the DHCP option’s parameter. Select one

of the following codes and enter the value for the DHCP options parameter:

• Hex—Select if you want to enter the hex value of the parameter for the DHCP option. A hex value can be

provided in place of any other type of value. For instance, you can provide a hex value of an IP address instead
of the IP address itself.

No validation is made of the hex value, therefore if you enter a HEX value, which represents an illegal value,
no error is provided, and the client might not be able to handle the DHCP packet from the server.

• IP—Select if you want to enter an IP address when this is relevant for the DHCP option selected.

• IP List—Enter list of IP addresses separated by commas.

• Integer—Select if you want to enter an integer value of the parameter for the DHCP option selected.

• Boolean—Select if the parameter for the DHCP option selected is Boolean.

• Boolean Value—If the type was Boolean, select the value to be returned: True or False.

• Value—If the type isn’t Boolean, enter the value to be sent for this code.

• Description—Enter a text description for documentation purposes.

Cisco Business 350 Series Switches Administration Guide

225

Address Binding

IPv4 Configuration

Step 4

Click Apply. The Running Configuration file is updated.

Address Binding

Use the Address Binding page to view and remove the IP addresses allocated by the device and their
corresponding MAC addresses.

To view and/or remove address bindings, complete the following steps:

Procedure

Step 1

Click IPv4 Configuration > DHCP Server > Address Binding.

The following fields for the address bindings are displayed:

• IP Address—The IP addresses of the DHCP clients.

• Address Type—Whether the address of the DHCP client appears as a MAC address or using a client identifier.

• MAC Address/Client Identifier—A unique identification of the client specified as a MAC Address or in hexadecimal

notation, e.g., 01b60819681172.

• Lease Expiration—The lease expiration date and time of the host’s IP address or Infinite is such was the lease

duration defined.

• Type—The manner in which the IP address was assigned to the client. The possible options are:

• Static—The hardware address of the host was mapped to an IP address.

• Dynamic—The IP address, obtained dynamically from the device, is owned by the client for a specified time.

The IP address is revoked at the end of this period, when the client must request another IP address.

• State—The possible options are:

• Allocated—IP address has been allocated. When a static-host is configured, its state is allocated.

• Declined—IP address was offered but not accepted, therefore it’s not allocated.

• Expired—The lease of the IP address has expired.

• Pre-allocated—An entry is in pre-allocated state from the time between the offer and the time that the DHCP

ACK is sent from the client. Then it becomes allocated.

Step 2

Click Delete. The Running Configuration file is updated.

Cisco Business 350 Series Switches Administration Guide

226

C H A P T E R 15

IPv6 Configuration

This chapter contains the following sections:

• IPv6 Global Configuration, on page 227
• IPv6 Interfaces, on page 228
• IPv6 Tunnels, on page 230
• IPv6 Addresses, on page 232
• IPv6 Router Configuration, on page 233
• IPv6 Default Router List, on page 236
• IPv6 Neighbors, on page 237
• IPv6 Prefix List, on page 238
• IPv6 Access Lists, on page 240
• IPv6 Routes, on page 240
• DHCPv6 Relay, on page 241

IPv6 Global Configuration

The Internet Protocol version 6 (IPv6) is a network-layer protocol for packet-switched internetworks. IPv6
was designed to replace IPv4, the predominantly deployed Internet protocol. IPv6 introduces greater flexibility
in assigning IP addresses, because the address size increases from 32-bit to 128-bit addresses. IPv6 addresses
are written as eight groups of four hexadecimal digits, for example
FE80:0000:0000:0000:0000:9C00:876A:130B. The abbreviated form, in which a group of zeroes can be left
out, and replaced with '::', is also acceptable, for example, FE80::9C00:876A:130B. IPv6 interface addresses
can be configured manually by the user, or automatically configured by a DHCP server.

This section provides information for defining the device IPv6 addresses, either manually or by making the
device a DHCP client. To define IPv6 global parameters and DHCPv6 client settings, follow these steps:

Procedure

Step 1

Step 2

Click IPv6 Configuration > IPv6 Global Configuration.

Enter values for the following fields:

Cisco Business 350 Series Switches Administration Guide

227

IPv6 Interfaces

IPv6 Configuration

• IPv6 Routing—Select to enable IPv6 routing. If this isn’t enabled, the device acts as a host (not a router) and can
receive management packets, but can’t forward packets. If routing is enabled, the device can forward the IPv6
packets.

Enabling IPv6 routing removes any address previously assigned to the device interface, via the auto-config operation,
from an RA sent by a Router in the network.

• ICMPv6 Rate Limit Interval—Enter how often the ICMP error messages are generated.

• ICMPv6 Rate Limit Bucket Size—Enter the maximum number of ICMP error messages that can be sent by the

device per interval.

• IPv6 Hop Limit—Enter the maximum number of intermediate routers on its way to the final destination to which a
packet can pass. Each time a packet is forwarded to another router, the hop limit is reduced. When the hop limit
becomes zero, the packet is discarded. This prevents packets from being transferred endlessly.

• DHCPv6 Client Settings

• Unique Identifier (DUID) Format—This is the identifier of the DHCP client that is used by the DHCP server

to locate the client. It can be in one of the following formats:

Link-Layer—(Default). If you select this option, the MAC address of the device is used.

Enterprise Number—If you select this option, enter the following fields.

• Enterprise Number—The vendors registered Private Enterprise number as maintained by IANA.

• Identifier—The vendor-defined hex string (up to 64 hex characters) If the number of the character isn’t even,

a zero is added at the right. Each 2 hex characters can be separated by a period or colon.

• DHCPv6 Unique Identifier (DUID)—Displays the identifier selected.

Step 3

Click Apply. The IPv6 global parameters and DHCPv6 client settings are updated.

IPv6 Interfaces

The Internet Protocol version 6 (IPv6) is a network-layer protocol used for packet-switched internet
communications.IPv6 was created to replace IPv4, the most widely used Internet protocol. Because the address
size increases from 32-bit to 128-bit, IPv6 allows for greater flexibility in assigning IP addresses.IPv6 addresses
are composed of eight groups of four hexadecimal digits, such as FE80:0000:0000:0000:0000:9C00:876A:130B.

To communicate with other IPv6 nodes over an IPv4-only network, IPv6 nodes require an intermediary
mapping mechanism. This mechanism, known as a tunnel, allows IPv6-only hosts to access IPv4 services and
isolated IPv6 hosts and networks to connect to an IPv6 node via the IPv4 infrastructure.

An IPv6 interface can be configured on a port, LAG, VLAN, loopback interface or tunnel. To define an IPv6
interface, follow these steps:

Procedure

Step 1

Click IPv6 Configuration > IPv6 Interfaces.

Cisco Business 350 Series Switches Administration Guide

228

IPv6 Configuration

Step 2

Enter the parameters.

IPv6 Interfaces

• IPv6 Link Local Default Zone—Select to enable defining a default zone. This is an interface to be used to egress

a link-local packet arriving without a specified interface or with its default zone 0.

• IPv6 Link Local Default Zone Interface—Select an interface to be used as a default zone. This can be a previously

defined tunnel or other interface.

Step 3

Click Apply to configure default zone.

Step 4

Step 5

Step 6

The IPv6 Interface Table is displayed along with the following field:

• Tunnel Type—Manual, 6–4 and ISATAP.

Click Add to add a new interface on which interface IPv6 is enabled.

Enter the fields:

• IPv6 Interface—Select a specific port, LAG, loopback interface or VLAN for the IPv6 address.

To configure the interface as a DHCPv6 client, meaning to enable the interface to receive information from the DHCPv6
server, such as: SNTP configuration and DNS information, enter the DHCPv6 Client fields:

• DHCPv6 Client—Select to enable DHCPv6 Client (stateless and stateful) on the interface.

• Rapid Commit—Select to enable the use of the two-message exchange for address allocation and other configuration.

If it’s enabled, the client includes the rapid-commit option in a solicit message.

• Minimum Information Refresh Time—This value is used to put a floor on the refresh time value. If the server

sends a refresh time option that is less than this value, this value is used instead. Select Infinite or User Defined
to set a value.

• Information Refresh Time—This value indicates how often the device refreshes information received from the

DHCPv6 server. If this option isn’t received from the server, the value entered here is used. Select Infinite or User
Defined to set a value.

Step 7

To configure additional IPv6 parameters, enter the following fields:

• IPv6 Address Auto Configuration—Select to enable automatic address configuration from router advertisements

sent by neighbors.

• Number of DAD Attempts—Enter the number of consecutive neighbor solicitation messages that are sent while
Duplicate Address Detection (DAD) is performed on the interface’s Unicast IPv6 addresses. DAD verifies the
uniqueness of a new Unicast IPv6 address before it’s assigned. New addresses remain in a tentative state during
DAD verification. Entering 0 in this field disables duplicate address detection processing on the specified interface.
Entering 1 in this field indicates a single transmission without follow-up transmissions.

• Send ICMPv6 Messages—Enable generating unreachable destination messages.

• IPv6 Redirects—Select to enable sending ICMP IPv6 redirect messages. These messages inform other devices

not to send traffic to the device, but rather to another device.

Step 8

Click Apply to enable IPv6 processing on the selected interface. Regular IPv6 interfaces have the following addresses
automatically configured:

• Link local address using EUI-64 format interface ID based on a device's MAC address

Cisco Business 350 Series Switches Administration Guide

229

IPv6 Tunnels

IPv6 Configuration

• All node link local Multicast addresses (FF02::1)

• Solicited-Node Multicast address (format FF02::1:FFXX:X)

Step 9

Step 10

Step 11

Step 12

Select an Interface and click Restart to initiate a refresh of the stateless information received from the DHCPv6 server.

Select an interface and click Details to display the information received on the interface from a DHCPv6 server.

Click IPv6 Address Table to manually assign IPv6 addresses to the interface, if required.

To add a tunnel, select an interface in the IPv6 Tunnel Table and click IPv6 Tunnel.

IPv6 Tunnels

Tunnels enable transmission of IPv6 packets over IPv4 networks. Each tunnel has a source IPv4 address and
if it’s a manual tunnel it also has a destination IPv4 address. The IPv6 packet is encapsulated between these
addresses.

ISATAP Tunnels

The device supports a single Intra-Site Automatic Tunnel Addressing Protocol (ISATAP) tunnel. An ISATAP
tunnel is a point-to-multi-point tunnel. The source address is the IPv4 address (or one of the IPv4 addresses)
of the device. When configuring an ISATAP tunnel, the destination IPv4 address is provided by the router.
Note that:

• An IPv6 link local address is assigned to the ISATAP interface. The initial IP address is assigned to the

interface, which is then activated.

• If an ISATAP interface is active, the ISATAP router IPv4 address is resolved via DNS by using

ISATAP-to-IPv4 mapping. If the ISATAP DNS record is not resolved, ISATAP host name-to-address
mapping is searched in the host mapping table

• When the ISATAP router IPv4 address is not resolved via the DNS process, the ISATAP IP interface
remains active. The system does not have a default router for ISATAP traffic until the DNS process is
resolved.

Additional Types of Tunnels

The following additional types of tunnels can be configured on the device:

Manual Tunnel

• An IPv6 link local address is assigned to the ISATAP interface. The initial IP address is assigned to the

interface, which is then activated

• If an ISATAP interface is active, the ISATAP router IPv4 address is resolved via DNS by using

ISATAP-to-IPv4 mapping. If the ISATAP DNS record is not resolved, ISATAP host name-to-address
mapping is searched in the host mapping table.

• When the ISATAP router IPv4 address is not resolved via the DNS process, the ISATAP IP interface
remains active. The system does not have a default router for ISATAP traffic until the DNS process is
resolved.

This is a point-to-point definition. When creating a manual tunnel, you enter both the source IP address (one
of the device’s IP addresses) and the destination IPv4 address.

Cisco Business 350 Series Switches Administration Guide

230

IPv6 Configuration

IPv6 Tunnels

6 to 4 Tunnel

• 6 to 4 is an automatic tunneling mechanism that uses the underlying IPv4 network as a non-Broadcast

multiple-access link layer for IPv6. Only one 6 to 4 tunnel is supported on a device.

• The 6 to 4 tunnel is supported only when IPv6 Forwarding is supported.

• IPv6 Multicast is not supported on the 6to4 tunnel interface

• The switch automatically creates a 2002::/16 on-link prefix on the 6to4 tunnel. The connected 2002::/16

route on the tunnel is added to the Routing Table as result of the on-link prefix creation

• When the tunnel mode is changed from 6to4 to another mode, the on-link prefix and connected routes

are removed.

• When the next hop outgoing interface is the 6to4 tunnel, the IPv4 address of the next hop node is taken
from the prefix 2002:WWXX:YYZZ::/48 of the IPv6 next hop IPv6 address, if it is global, and from the
last 32 bits of the interface identifier of the IPv6next hop IPv6 address, if it is link local.

The following table summarizes tunnel support in the various devices:

Tunnel Type

CBS350

CBS350
Stacking

ISATAP

Manual

Automatic 6to4
tunnel

Supported

Supported

Not
Supported

Not
Supported

Not Supported

Not Supported

To configure an IPv6 tunnel follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click IPv6 Configuration >IPv6 Tunnel.

Click Create ISATAP Tunnel.

The Tunnel Number (1) and its Tunnel Type (ISATAP) are displayed.

Enter the following fields

• Source IPv4 Address—Set the local (source) IPv4 address of a tunnel interface. The IPv4 address of the selected
IPv4 interface is used to form part of the IPv6 address over the ISATAP tunnel interface. The IPv6 address has a
64-bit network prefix of fe80::, with the rest of the 64-bit formed by concatenating 0000:5EFE and the IPv4 address.

• Auto—Automatically selects the lowest IPv4 address from among all of its configured IPv4 interfaces as the

source address for packets sent on the tunnel interface.

• Manual—Specifies the IPv4 address to use as the source address for packets sent on the tunnel interface. The

local address of the tunnel interface is not changed when the IPv4 address is moved to another interface.

Note
If the device IPv4 address is changed, the local address of the tunnel interface is also changed

Cisco Business 350 Series Switches Administration Guide

231

IPv6 Addresses

IPv6 Configuration

• Interface—Specifies the interface

• ISATAP Router Name— Select one of the following options to configure a global string that represents a specific

automatic tunnel router domain name.

• Use Default—This is always ISATAP.

• User Defined—Enter the router’s domain name.

Step 5

Enter the parameters:

• ISATAP Solicitation Interval—The number of seconds between ISATAP router solicitations messages, when no

active ISATAP router is discovered. The interval can be the Default Value or a User Defined interval.

• ISATAP Robustness—Used to calculate the interval for router solicitation queries. The bigger the number, the more

frequent the queries. The interval can be the Default Value or a User Defined interval .

Note
The ISATAP tunnel is not operational if the underlying IPv4 interface is not in operation.

Step 6

Click Apply to save the ISATAP parameters to the Running Configuration file.

IPv6 Addresses

To assign an IPv6 address to an IPv6 Interface, follow these steps:

Procedure

Step 1

Step 2

Click IPv6 Configuration > IPv6 Addresses.

To filter the table, select an interface name, and click Go. The interface appears in the IPv6 Address Table. These fields
are described in the Add page except for the following fields:

• Address Source—Displays one of the address source types: DHCP, System or Static.

• IPv6 Address Type—Displays the type of IPv6 address.

• IPv6 Address—Displays the IPv6 address.
• Preferred Lifetime—Displays the entry preferred lifetime.

• Valid Lifetime—Displays the entry valid lifetime.

• Expiry Time—Displays the expiry time.

Step 3

Step 4

Click Add.

Enter values for the fields.

Cisco Business 350 Series Switches Administration Guide

232

IPv6 Configuration

IPv6 Router Configuration

Option

Description

IPv6 Interface

Displays the interface on which the IPv6 address is to be defined. If an * is displayed, this means
that the IPv6 interface is not enabled but has been configured.

IPv6 Address Type

Select the type of the IPv6 address to add.

• Link Local—An IPv6 address that uniquely identifies hosts on a single network link. A link
local address has a prefix of FE80, is not routable, and can be used for communication only
on the local network. Only one link local address is supported. If a link local address exists
on the interface, this entry replaces the address in the configuration.

• Global—An IPv6 address that is a global Unicast IPV6 type that is visible and reachable

from other networks.

• Anycast—The IPv6 address is an Anycast address. This is an address that is assigned to a

set of interfaces that typically belong to different nodes. A packet sent to an Anycast address
is delivered to the closest interface—as defined by the routing protocols in use—identified
by the Anycast address.

Note
Anycast cannot be used, if the IPv6 address is on an ISATAP interface.

IPv6 Address

In addition to the default link local and Multicast addresses, the device also automatically adds
global addresses to the interface based on the router advertisements it receives. The device supports
a maximum of 128 addresses at the interface. Each address must be a valid IPv6 address that is
specified in hexadecimal format by using 16-bit values separated by colons.

Prefix Length

The length of the Global IPv6 prefix is a value from 0-128 indicating the number of the high-order
contiguous bits of the address comprise the prefix (the network portion of the address).

EUI-64

Select to use the EUI-64 parameter to identify the interface ID portion of the Global IPv6 address
by using the EUI-64 format based on a device MAC address.

Step 5

Click Apply. The Running Configuration file is updated.

IPv6 Router Configuration

The following sections describe how to configure IPv6 routers. It covers the following topics:

Router Advertisement

A router advertisement packet contains various configurations for IPv6 hosts including the network part of
the layer 3 IPv6 address required by hosts to communicate in the internet. Clients then generate the universally
unique host part of the address and derive the complete address. This feature can be enabled or suppressed
per interface, as follows:

Cisco Business 350 Series Switches Administration Guide

233

Router Advertisement

IPv6 Configuration

Procedure

Step 1

Step 2

Step 3

Click IPv6 Configuration > IPv6 Router Configuration > Router Advertisement.

To configure an interface listed in the Router Advertisement Table, select it and click Edit.
Enter the following fields:

Option

Description

Suppress Router Advertisement

Select Yes to suppress IPv6 router advertisement transmissions on the interface.

Router Preference

Select either Low, Medium or High preference for the router. Router advertisement
messages are sent with the preference configured in this field. If no preference is
configured, they are sent with a medium preference.

Include Advertisement Interval
Option

Select to indicate that an advertisement option will be used by the system. This option
indicates to a visiting mobile node the interval at which that node may expect to
receive router advertisements. The node may use this information in its movement
detection algorithm.

Hop Limit

This is the value that the router advertises. If it’s not zero, it’s used as the hop limit
by the host.

Managed Address Configuration
Flag

Select this flag to indicate to attached hosts that they should use stateful auto
configuration to obtain addresses. Hosts may use stateful and stateless address auto
configuration simultaneously.

Other Stateful Configuration Flag

Other Stateful Configuration Flag—Select this flag to indicate to attached hosts that
they should use stateful auto configuration to obtain other (non-address) information.

Neighbor Solicitation
Retransmissions Interval

Maximum Router Advertisement
Interval

Note
If the Managed Address Configuration flag is set, an attached host can use stateful
auto configuration to obtain the other (non-address) information regardless of the
setting of this flag.

Enter the interval to determine the time between retransmissions of neighbor
solicitation messages to a neighbor when resolving the address or when probing the
reachability of a neighbor (User Defined), or select Use Default to use the system
default (1000).

Enter the maximum amount of time that can pass between router advertisements.

The interval between transmissions should be less than or equal to the IPv6 router
advertisement lifetime if you configure the route as a default router by using this
command. To prevent synchronization with other IPv6 nodes, the actual interval used
is randomly selected from a value between the minimum and maximum values.

Minimum Router Advertisement
Interval

Enter the minimum amount of time that can pass between router advertisements (User
Defined) or select Use Default to user the system default.

Note
The minimum RA interval may never be more than 75% of the maximum RA interval
and never less than 3 seconds.

Cisco Business 350 Series Switches Administration Guide

234

IPv6 Configuration

IPv6 Prefixes

Option

Description

Router Advertisement Lifetime

Enter the remaining length of time, in seconds, that this router remains useful as a
default router. A value of zero indicates that it’s no longer useful as a default router.

Reachable Time

Enter the amount of time that a remote IPv6 node is considered reachable (in
milliseconds) (User Defined) or select the Use Default option to use the system default.

Step 4

Click Apply to save the configuration to the Running Configuration file.

IPv6 Prefixes

To define prefixes to be advertised on the interfaces of the device, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Click IPv6 Configuration > IPv6 Router Configuration > IPv6 Prefixes.

If required, enable the Filter field and click Go. The group of interfaces matching the filter are displayed.

To add an interface, click Add.

Select the required IPv6 Interface on which a prefix is to be added.

Enter the following fields:

Option

Description

Prefix Address

Prefix Length

The IPv6 network. This argument must be in the form documented in RFC 4293 where the
address is specified in hexadecimal—using 16-bit values between colons.

The length of the IPv6 prefix. A decimal value that indicates how many of the high-order
contiguous bits of the address comprise the prefix (the network portion of the address). A
slash mark must precede the decimal value.

Prefix Advertisement

Select to advertise this prefix.

Valid Lifetime

The remaining length of time, in seconds, that this prefix will continue to be valid, i.e., time
until invalidation. The address generated from an invalidated prefix should not appear as the
destination or source address of a packet.

• Infinite—Select this value to set the field to 4,294,967,295, which represents infinity.

• User Defined—Enter a value.

Preferred Lifetime

The remaining length of time, in seconds, that this prefix will continue to be preferred. After
this time has passed, the prefix should no longer be used as a source address in new
communications, but packets received on such an interface are processed as expected. The
preferred-lifetime must not be larger than the valid-lifetime.

• Infinite—Select this value to set the field to 4,294,967,295, which represents infinity.

• User Defined—Enter a value.

Cisco Business 350 Series Switches Administration Guide

235

IPv6 Default Router List

IPv6 Configuration

Option

Description

Auto Configuration

Enable automatic configuration of IPv6 addresses using stateless auto configuration on an
interface and enable IPv6 processing on the interface. Addresses are configured depending
on the prefixes received in Router Advertisement messages.

Prefix Status

Select one of the following options:

• Onlink—Configures the specified prefix as on-link. Nodes sending traffic to addresses
that contain the specified prefix consider the destination to be locally reachable on the
link. An onlink prefix is inserted into the routing table as a connected prefix (L-bit set).

• No-Onlink—Configures the specified prefix as not onlink. A no onlink prefix is inserted

into the routing table as a connected prefix but advertised with a L-bit clear.

• Offlink—Configures the specified prefix as offlink. The prefix will be advertised with
the L-bit clear. The prefix will not be inserted into the routing table as a connected prefix.
If the prefix is already present in the routing table as a connected prefix (for example,
because the prefix was also configured by adding an IPv6 address), it will be removed.

Step 6

Click Apply to save the configuration to the Running Configuration file.

IPv6 Default Router List

The IPv6 Default Router List page enables configuring and viewing the default IPv6 router addresses. This
list contains the routers that are candidates to become the device default router for non-local traffic (it may
be empty). The device randomly selects a router from the list. The device supports one static IPv6 default
router. Dynamic default routers are routers that have sent router advertisements to the device IPv6 interface.

When adding or deleting IP addresses, the following events occur:

• When removing an IP interface, all the default router IP addresses are removed. Dynamic IP addresses

can’t be removed.

• An alert message appears after an attempt is made to insert more than a single user-defined address.

• An alert message appears when attempting to insert a non-link local type address, meaning 'fe80:'.

To define a default router, complete the following:

Procedure

Step 1

Click IPv6 Configuration > IPv6 Default Router List.

This page displays the following fields for each default router:

• Outgoing Interface—Outgoing IPv6 interface where the default router resides.

• Default Router IPv6 Address—Link local IP address of the default router.

• Type—The default router configuration that includes the following options:

Cisco Business 350 Series Switches Administration Guide

236

IPv6 Configuration

IPv6 Neighbors

• Static—The default router was manually added to this table through the Add button.

• Dynamic—The default router was dynamically configured.

• Neighbor Discovery (ND)—The default router is set to ND. Neighbor Discovery Protocol is used to identify

the relationships between the different neighboring devices in an IPv6 network.

• Metric—Cost of this hop.

Step 2

Step 3

Click Add to add a static default router.

Enter the following fields:

• Next Hop Type—The IP address of the next destination to which the packet is sent. This is composed of the following:

• Global—An IPv6 address that is a global Unicast IPV6 type that is visible and reachable from other networks.

• Link Local—An IPv6 interface and IPv6 address that uniquely identifies hosts on a single network link. A link
local address has a prefix of FE80, isn’t routable, and can be used for communication only on the local network.
Only one link local address is supported. If a link local address exists on the interface, this entry replaces the
address in the configuration.

• Outgoing Interface—Displays the outgoing Link Local interface.

• Default Router IPv6 Address—The IP address of the static default router

• Metric—Enter the cost of this hop.

Step 4

Click Apply. The default router is saved to the Running Configuration file.

IPv6 Neighbors

The IPv6 Neighbors page enables configuring and viewing the list of IPv6 neighbors on the IPv6 interface.
The IPv6 Neighbor Table (also known as IPv6 Neighbor Discovery Cache) displays the MAC addresses of
the IPv6 neighbors that are in the same IPv6 subnet as the device. This is the IPv6 equivalent of the IPv4 ARP
Table. When the device needs to communicate with its neighbors, the device uses the IPv6 Neighbor Table
to determine the MAC addresses based on their IPv6 addresses.

This page displays the neighbors that automatically detected or manually configured entries. Each entry
displays to which interface the neighbor is connected, the neighbor’s IPv6 and MAC addresses, the entry type
(static or dynamic), and the state of the neighbor.

To define IPv6 neighbors, complete the following steps:

Procedure

Step 1

Click IPv6 Configuration > IPv6 Neighbors.

You can select an option to clear some or all of the IPv6 addresses in the Clear Table section.

• Static Only—Deletes the static IPv6 address entries.

Cisco Business 350 Series Switches Administration Guide

237

IPv6 Prefix List

IPv6 Configuration

• Dynamic Only—Deletes the dynamic IPv6 address entries.

• All Dynamic & Static—Deletes the static and dynamic address entries IPv6 address entries.

Step 2

Step 3

To add a neighbor to the table, click Add.

The following fields are displayed:

• Interface—Displays the neighboring IPv6 interface to be added.

• IPv6 Address—Enter the IPv6 network address assigned to the interface. The address must be a valid IPv6 address.

• MAC Address—Enter the MAC address mapped to the specified IPv6 address.

Step 4

Step 5

Click Apply. The Running Configuration file is updated.

Next, you will see the following settings displayed in the IPv6 Neighbor Table.

• Interface—Neighboring IPv6 interface type.

• IPv6 Address—IPv6 address of a neighbor.

• MAC Address—MAC address mapped to the specified IPv6 address.

• Type—Neighbor discovery cache information entry type (static or dynamic).

• State—Specifies the IPv6 neighbor status. The values are:

• Incomplete—Address resolution is working. The neighbor has not yet responded.

• Reachable—Neighbor is known to be reachable.

• Stale—Previously-known neighbor is unreachable. No action is taken to verify its reachability until traffic must

be sent.

• Delay—Previously-known neighbor is unreachable. The interface is in Delay state for a predefined Delay Time.

If no reachability confirmation is received, the state changes to Probe.

• Probe—Neighbor is no longer known to be reachable, and Unicast Neighbor Solicitation probes are being sent

to verify the reachability.

• Router—Specifies whether the neighbor is a router (Yes or No).

Step 6

To change the type of an IP address from Static to Dynamic, select the address, click Edit and use the Edit IPv6 Neighbors
page.

IPv6 Prefix List

Prefix lists are configured with permit or deny keywords to either permit or deny a prefix based on a matching
condition. An implicit deny is applied to traffic that doesn’t match any prefix-list entry. A prefix-list entry
consists of an IP address and a bit mask. The IP address can be for a classful network, a subnet, or a single
host route. The bit mask is a number 1–32.

Prefix lists are configured to filter traffic based on a match of an exact prefix length or a match within a range
when the ge and le keywords are used.

Cisco Business 350 Series Switches Administration Guide

238

IPv6 Configuration

IPv6 Prefix List

To create a prefix list, follow these steps:

Procedure

Step 1

Step 2

Step 3

Click IPv6 Configuration > IPv6 Prefix List.

Click Add.

Enter the following fields:

• List Name—Select one of the following options:

• Use existing list—Select a previously defined list to add a prefix to it.

• Create new list—Enter a name to create a new list.

• Sequence Number—Specifies the place of the prefix within the prefix list. Select one of the following options:

• Auto Numbering—Puts the new IPV6 prefix after the last entry of the prefix list. The sequence number equals

the last sequence number plus 5. If the list is empty the first prefix-list entry is assigned the number 5 and
subsequent prefix list entries increment by 5.

• User Defined—Puts the new IPV6 prefix into the place specified by the parameter. If an entry with the number

exists, it’s replaced by the new one.

• Rule Type—Enter the rule for the prefix list:

• Permit—Permits networks that match the condition.

• Deny—Denies networks that match the condition.

• Description—Text

• IPv6 Prefix—IP route prefix.

• Prefix Length—IP route prefix length.

• Greater Than—Minimum prefix length to be used for matching. Select one of the following options:

• No Limit—No minimum prefix length to be used for matching.

• User Defined—Minimum prefix length to be matched.

• Lower Than—Maximum prefix length to be used for matching. Select one of the following options:

• No Limit—No maximum prefix length to be used for matching.

• User Defined—Maximum prefix length to be matched.

• Description—Enter a description of the prefix list.

Step 4

Click Apply to save the configuration to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

239

IPv6 Access Lists

IPv6 Configuration

IPv6 Access Lists

The IPv6 access list can be used in MLD Proxy > Global MLD Proxy Settings > SSM IPv6 Access List page.

To create an access list, complete the following steps:

Procedure

Step 1

Click IPv6 Configuration > IPv6 Access List. To see a subset of entries in the list, enter the relevant search criteria in
the filter and click Go.

Step 2

To add a new Access List, click Add and enter the following fields:

• Access List Name—Select one of the following:

• Use existing list—Select a previously-existing access list.

• Create new list—Enter a name for the new access list.

• Source IPv6 Address—Enter the source IPv6 address. The following options are available:

• Any—All IP addresses are included.

• User Defined—Enter an IP address.

• Prefix length—Enter the source IPv6 prefix length:

• Action—Select an action for the access list. The following options are available:

• Permit—Permit entry of packets from the IP address(es) in the access list.

• Deny—Reject entry of packets from the IP address(es) in the access list.

Step 3

Click Apply. The settings are written to the Running Configuration file.

IPv6 Routes

The IPv6 Forwarding Table contains the various routes that have been configured. One of these routes is a
default route (IPv6 address: 0) that uses the default router selected from the IPv6 Default Router List to send
packets to destination devices that aren’t in the same IPv6 subnet as the device. In addition to the default
route, the table also contains dynamic routes that are ICMP redirect routes received from IPv6 routers by
using ICMP redirect messages. This could happen when the default router the device uses isn’t the router for
traffic to which the IPv6 subnets that the device wants to communicate.

To view IPv6 routes:

Click IPv6 Configuration > IPv6 Routes.

This page displays the following fields:

• IPv6 Prefix—IP route address prefix for the destination IPv6 subnet address

Cisco Business 350 Series Switches Administration Guide

240

IPv6 Configuration

DHCPv6 Relay

• Prefix Length—IP route prefix length for the destination IPv6 subnet address It’s preceded by a forward

slash.

• Outgoing Interface—Interface used to forward the packet.

• Next Hop—Type of address to which the packet is forwarded. Typically, this is the address of a

neighboring router. It can be one of the following types.

• Link Local—An IPv6 interface and IPv6 address that uniquely identifies hosts on a single network
link. A link local address has a prefix of FE80, isn’t routable, and can be used for communication
only on the local network. Only one link local address is supported. If a link local address exists on
the interface, this entry replaces the address in the configuration.

• Global—An IPv6 address that is a global Unicast IPV6 type that is visible and reachable from other

networks.

• Point-to-Point—A Point-to-point tunnel

• Metric—Value used for comparing this route to other routes with the same destination in the IPv6 router

table All default routes have the same value.

• Lifetime—Time period during which the packet can be sent, and resent, before being deleted.

• Route Type—How the destination is attached, and the method used to obtain the entry. The following

values are:

• S (Static)—Entry was manually configured by a user.

• I (ICMP Redirect)—Entry is an ICMP redirect dynamic route received from an IPv6 router by using

ICMP redirect messages.

• ND (Router Advertisement)—Entry is taken from a router advertisement message.

Procedure

Step 1

To add a new route, click Add and enter the fields described above. In addition, enter the following field:

• IPv6 Address—Add the IPv6 address of the new route.

Step 2

Click Apply to save the changes.

DHCPv6 Relay

DHCPv6 Relay is used for relaying DHCPv6 messages to DHCPv6 servers. It’s defined in RFC 3315.

When the DHCPv6 client isn’t directly connected to the DHCPv6 server, a DHCPv6 relay agent (the device)
to which this DHCPv6 client is directly-connected encapsulates the received messages from the directly
connected DHCPv6 client, and forwards them to the DHCPv6 server.

In the opposite direction, the relay agent decapsulates packets received from the DHCPv6 server and forwards
them, towards the DHCPv6 client.

Cisco Business 350 Series Switches Administration Guide

241

Global Destinations

IPv6 Configuration

The user must configure the list DHCP servers to which packets are forwarded. Two sets of DHCPv6 servers
can be configured:

• Global Destinations—Packets are always relayed to these DHCPv6 servers.

• Interface List—This is a per-interface list of DHCPv6 servers. When a DHCPv6 packet is received on
an interface, the packet is relayed both to the servers on the interface list (if it exists) and to the servers
on the global destination list.

Global Destinations

To configure a list of DHCPv6 servers to which all DHCPv6 packets are relayed, complete the following
steps:

Procedure

Step 1

Step 2

Step 3

Click IPv6 Configuration > DHCPv6 Relay > Global Destinations.

To add a default DHCPv6 server, click Add.

Enter the fields:

• IPv6 Address Type—Enter the type of the destination address to which client messages are forwarded. The address

type can be Link Local, Global, or Multicast (All_DHCP_Relay_Agents_and_Servers).

• DHCPv6 Server IP Address—Enter the address of the DHCPv6 server to which packets are forwarded.

• IPv6 Interface—Enter the destination interface on which packets are transmitted when the address type of the

DHCPv6 server is Link Local or Multicast. The interface can be a VLAN, LAG, or tunnel.

Step 4

Click Apply. The Running Configuration file is updated.

Interface Settings

To enable the DHCPv6 Relay feature on an interface and to configure a list of DHCPv6 servers, follow these
steps:

Procedure

Step 1

Step 2

Click IPv6 Configuration > DHCPv6 Relay > Interface Settings.

To enable DHCPv6 on an interface and optionally add a DHCPv6 server for an interface, click Add.

Enter the fields:

• Source Interface—Select the interface (port, LAG, VLAN, or tunnel) for which DHCPv6 Relay is enabled.

• Use Global Destinations Only—Select to forward packets to the DHCPv6 global destination servers only.

Cisco Business 350 Series Switches Administration Guide

242

IPv6 Configuration

Interface Settings

• IPv6 Address Type—Enter the type of the destination address to which client messages are forwarded. The address

type can be Link Local, Global, or Multicast (All_DHCP_Relay_Agents_and_Servers).

• DHCPv6 Server IP Address—Enter the address of the DHCPv6 server to which packets are forwarded.

• Destination IPv6 Interface— Select the destination IPv6 Interface from the drop-down menu.

Step 3

Click Apply. The Running Configuration file is updated.

Cisco Business 350 Series Switches Administration Guide

243

Interface Settings

IPv6 Configuration

Cisco Business 350 Series Switches Administration Guide

244

C H A P T E R 16

General IP Configuration

IP interface addresses can be configured manually by the user, or automatically configured by a DHCP server.
This section provides information for defining the device IP addresses, either manually or by making the
device a DHCP client.

• Policy-Based Routing, on page 245
• Domain Name System, on page 247

Policy-Based Routing

Policy-based Routing (PBR) provides a means for routing selected packets to a next hop address based on
packet fields, using ACLs for classification. PBR lessens reliance on routes derived from routing protocols.

Route Maps

Route maps are the means used to configure PBR.

To add a route map, complete the following steps:

Procedure

Step 1

Step 2

Click General IP Configuration > Policy Based Routing > Route Maps.

Click Add and enter the parameters:

• Route Map Name—Select one of the following options for defining a route map:

• Use existing map—Select a route map that was previously defined to add a new rule to it.

• Create new map—Enter the name of a new route map.

• Sequence Number—Number that indicates the position/priority of rules in a specified route map. If a route map has
more than one rule (ACL) defined on it, the sequence number determines the order in which the packets will be
matched against the ACLs (from lower to higher number).

• Route Map IP Type—Select either IPv6 or IPv4 depending on the type of the next hop IP address.

• Match ACL—Select a previously defined ACL. Packets will be matched to this ACL.

Cisco Business 350 Series Switches Administration Guide

245

Route Map Binding

General IP Configuration

• IPv6 Next Hop Type—If the next hop address is an IPv6 address, select one of the following characteristics:

• Global—An IPv6 address that is a global Unicast IPV6 type that is visible and reachable from other networks.

• Link Local—An IPv6 interface and IPv6 address that uniquely identifies hosts on a single network link. A link
local address has a prefix of FE80, isn’t routable, and can be used for communication only on the local network.

• Interface—Displays the outgoing Link Local interface.

• Next Hop—IP address of the next hop router.

Step 3

Click Apply. The Running Configuration file is updated.

Route Map Binding

All packets coming in on an interface that is bound to a route map and match a route map rule are routed to
the next hop defined in the rule.

To bind an interface to a route map, complete the following steps:

Procedure

Step 1

Step 2

Click General IP Configuration > Policy Based Routing > Route Map Binding.

Click Add and enter the parameters:

• Interface—Select an interface (with an IP address).

• Bound IPv4 Route Map—Select an IPv4 route map to bind to the interface.

• Bound IPv6 Route Map—Select an IPv6 route map to bind to the interface.

Step 3

Click Apply. The Running Configuration file is updated.

Policy-Based Routes

To view the route maps that defined, complete the following steps:

Procedure

Step 1

Step 2

Click General IP Configuration > Policy Based Routing > Policy Based Routes.

Previously-defined route maps are displayed:

• Interface Name—Interface on which route map is bound.

• Route Map Name—Name of route map.

Cisco Business 350 Series Switches Administration Guide

246

General IP Configuration

Domain Name System

• Route Map Status—Status of interface:

• Active—Interface is up.

• Interface Down—Interface is down.

• ACL Name—ACL associated with route map.

• Next Hop—Where packets matching route map will be routed.

• Next Hop Status—Reachability of next hop:

• Active—The next hop IP address is reachable.

• Unreachable—The status isn’t active the next hop IP address isn’t reachable.

• Not Direct—The status isn’t active because the next hop IP address isn’t directly attached to a device subnet.

Domain Name System

The Domain Name System (DNS) translates domain names into IP addresses for the purpose of locating and
addressing hosts.

As a DNS client, the device resolves domain names to IP addresses through the use of one or more configured
DNS servers.

DNS Settings

Procedure

Use the DNS Settings page to enable the DNS feature, configure the DNS servers and set the default domain
used by the device. To configure the DNS Settings, follow these steps;

Step 1

Step 2

Click General IP Configuration > DNS > DNS Settings.
In Basic Mode, enter the parameters:

• Server Definition—Select one of the following options for defining the DNS server:

• By IP Address—IP Address will be entered for DNS server.

• Disabled—No DNS server will be defined.

• Server IP Address—If you selected By IP Address above, enter the IP address of the DNS server.

• Default Domain Name—Enter the DNS domain name used to complete unqualified host names. The device appends

this to all nonfully qualified domain names (NFQDNs) turning them into FQDNs.

Note
Don’t include the initial period that separates an unqualified name from the domain name (like cisco.com).

Cisco Business 350 Series Switches Administration Guide

247

DNS Settings

General IP Configuration

Step 3

In Advanced Mode, enter the parameters.

• DNS—Select to designate the device as a DNS client, which can resolve DNS names into IP addresses through one

or more configured DNS servers.

• Polling Retries—Enter the number of times to send a DNS query to a DNS server until the device decides that the

DNS server doesn’t exist.

• Polling Timeout—Enter the number of seconds that the device waits for a response to a DNS query.

• Polling Interval—Enter how often (in seconds) the device sends DNS query packets after the number of retries has

been exhausted.

• Use Default—Select to use the default value.

This value = 2*(Polling Retries + 1)* Polling Timeout

• User Defined—Select to enter a user-defined value.

• Default Parameters—Enter the following default parameters:

• Default Domain Name—Enter the DNS domain name used to complete unqualified host names. The device

appends this to all nonfully qualified domain names (NFQDNs) turning them into FQDNs.

Note
Don’t include the initial period that separates an unqualified name from the domain name (like cisco.com).

• DHCP Domain Search List—Click Details to view the list of DNS servers configured on the device.

Step 4

Click Apply. The Running Configuration file is updated.

The DNS Server Table displays the following information for each DNS server configured:

• DNS Server—The IP address of the DNS server.

• Preference—Each server has a preference value, a lower value means a higher chance of being used.

• Source—Source of the server’s IP address (static or DHCPv4 or DHCPv6)

• Interface—Interface of the server’s IP address.

Step 5

Step 6

Up to eight DNS servers can be defined. To add a DNS server, click Add.
Enter the parameters.

• IP Version—Select Version 6 for IPv6 or Version 4 for IPv4.

• IPv6 Address Type—Select the IPv6 address type (if IPv6 is used). The options are:

• Link Local—The IPv6 address uniquely identifies hosts on a single network link. A link local address has a
prefix of FE80, isn’t routable, and can be used for communication only on the local network. Only one link
local address is supported. If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable from other networks.

• Link Local Interface—If the IPv6 address type is Link Local, select the interface through which it’s received.

• DNS Server IP Address—Enter the DNS server IP address.

Cisco Business 350 Series Switches Administration Guide

248

General IP Configuration

Search List

• Preference—Select a value that determines the order in which the domains are used (from low to high). This effectively

determines the order in which unqualified names are completed during DNS queries.

Step 7

Click Apply. The DNS server is saved to the Running Configuration file.

Search List

The search list can contain one static entry defined by the user in the DNS Settings, on page 247 and dynamic
entries received from DHCPv4 and DHCPv6 servers.

To view the domain names that have been configured on the device, click General IP Configuration > DNS
> Search List.

The following fields are displayed for each DNS server configured on the device.

• Domain Name—Name of domain that can be used on the device.

• Source—Source of the server’s IP address (static or DHCPv4 or DHCPv6) for this domain.

• Interface—Interface of the server’s IP address for this domain.

• Preference—This is the order in which the domains are used (from low to high). This effectively determines

the order in which unqualified names are completed during DNS queries.

Host Mapping

Host name/IP address mappings are stored in the Host Mapping Table (DNS cache).

This cache can contain the following type of entries:

• Static Entries—These are mapping pairs that manually added to the cache. There can be up to 64 static

entries.

• Dynamic Entries—Are mapping pairs that are either added by the system as a result of being used by

the user, or an entry for each IP address configured on the device by DHCP. There can be 256 dynamic
entries.

Name resolution always begins by checking static entries, continues by checking the dynamic entries, and
ends by sending requests to the external DNS server. Eight IP addresses are supported per DNS server per
host name.

To add a host name and its IP address, complete the following:

Procedure

Step 1

Step 2

Click General IP Configuration > DNS > Host Mapping.

If required, select one of the following options from Clear Table to clear some or all of the entries in the Host Mapping
Table.

• Static Only—Deletes the static hosts.

Cisco Business 350 Series Switches Administration Guide

249

Host Mapping

General IP Configuration

• Dynamic Only—Deletes the dynamic hosts.

• All Dynamic & Static—Deletes the static and dynamic hosts.

Step 3

To add a host mapping, click Add and configure the following:

• IP Version—Select Version 6 for IPv6 or Version 4 for IPv4.

• IPv6 Address Type—Select the IPv6 address type (if IPv6 is used). The options are:

• Link Local—The IPv6 address uniquely identifies hosts on a single network link. A link local address has a
prefix of FE80, isn’t routable, and can be used for communication only on the local network. Only one link
local address is supported. If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable from other networks.

• Link Local Interface—If the IPv6 address type is Link Local, select the interface through which it’s received.

• Host Name—Enter a user-defined host name or fully qualified name. Host names are restricted to the ASCII letters
A through Z (case-insensitive), the digits 0–9, the underscore, and the hyphen. A period (.) is used to separate labels.

• IP Address—Enter a single address or up to eight associated IP addresses (IPv4 or IPv6).

Step 4

Click Apply. The settings are saved to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

250

C H A P T E R 17

Security

This chapter contains the following sections:

• TACACS+ Client, on page 251
• RADIUS Client, on page 253
• RADIUS Server, on page 256
• Login Settings, on page 262
• Login Protection Status, on page 265
• Key Management, on page 266
• Management Access Method, on page 268
• Management Access Authentication, on page 272
• Secure Sensitive Data Management, on page 273
• SSL Server, on page 276
• SSH Server, on page 278
• SSH Client, on page 281
• TCP/UDP Services, on page 284
• Storm Control, on page 285
• Port Security, on page 287
• 802.1X Authentication, on page 289
• Denial of Service Prevention, on page 298
• IP Source Guard, on page 304
• ARP Inspection, on page 306
• IPv6 First Hop Security, on page 309
• Certificate Settings, on page 325

TACACS+ Client

An organization can establish a Terminal Access Controller Access Control System (TACACS+) server to
provide centralized security for all of its devices. In this way, authentication and authorization can be handled
on a single server for all devices in the organization.

The device can act as a TACACS+ client that uses the TACACS+ server for the following services: The
TACACS+ page enables configuring TACACS+ servers.

• Authentication—Provides authentication of users logging onto the device by using usernames and

user-defined passwords.

Cisco Business 350 Series Switches Administration Guide

251

TACACS+ Client

Security

• Authorization—Performed at login. After the authentication session is completed, an authorization session

starts using the authenticated username. The TACACS+ server then checks user privileges.

• Accounting—Enable accounting of login sessions using the TACACS+ server. This enables a system

administrator to generate accounting reports from the TACACS+ server.

TACACS+ is supported only with IPv4.

To configure TACACS+ server parameters, follow these steps:

Procedure

Step 1

Step 2

Step 3

Click Security > TACACS+ Client.

Enable TACACS+ Accounting if required.

Enter the following default parameters:

Option

Key String

Description

Enter the default Key String used for communicating with all TACACS+ servers in Encrypted
or Plaintext mode.

If you enter both a key string here and a key string for an individual TACACS+ server, the key
string configured for the individual TACACS+ server takes precedence.

Timeout for Reply

Enter the amount of time that passes before the connection between the device and the TACACS+
server times out. If a value isn’t entered in the Add TACACS+ Server page for a specific server,
the value is taken from this field.

Source IPv4 Interface

Select the device IPv4 source interface to be used in messages sent for communication with the
TACACS+ server.

Source IPv6 Interface

Select the device IPv6 source interface to be used in messages sent for communication with the
TACACS+ server.

Note
If the Auto option is selected, the system takes the source IP address from the IP address defined
on the outgoing interface.

Step 4

Click Apply. The TACACS+ default settings are added to the Running Configuration file. These are used if the equivalent
parameters are not defined in the Add page.

The information for each TACACS server is displayed in the TACACS+ Server Table. The fields in this table are entered
in the Add page except for the Status field. This field describes whether the server is connected or not to the device.

Step 5

Step 6

To add a TACACS+ server, click Add.

Enter the parameters.

Option

Description

Server Definition

Select one of the following ways to identify the TACACS+ server:

• By IP address-If this is selected, enter the IP address of the server in the Server IP

Address/Name field.

Cisco Business 350 Series Switches Administration Guide

252

Security

RADIUS Client

Option

Description

• By name-If this is selected enter the name of the server in the Server IP Address/Name

field.

IP Version

Select the supported IP version of the source address: IPv6 or IPv4.

IPv6 Address Type

Select the IPv6 address type (if IPv6 is used). The options are:

• Link Local-The IPv6 address uniquely identifies hosts on a single network link. A link

local address has a prefix of FE80, isn’t routable, and can be used for communication only
on the local network. Only one link local address is supported. If a link local address exists
on the interface, this entry replaces the address in the configuration.

• Global-The IPv6 address is a global Unicast IPV6 type that is visible and reachable from

other networks.

Link Local Interface

Select the link local interface (if IPv6 Address Type Link Local is selected) from the list.

Server IP
Address/Name

Priority

Enter the IP address or name of the TACACS+ server.

Enter the order in which this TACACS+ server is used. Zero is the highest priority TACACS+
server and is the first server used. If it can’t establish a session with the high priority server,
the device tries the next highest priority server.

Key String

Enter the default key string used for authenticating and encrypting between the device and the
TACACS+ server. This key must match the key configured on the TACACS+ server.

A key string is used to encrypt communications by using MD5. You can select the default key
on the device, or the key can be entered in Encrypted or Plaintext form. If you don’t have an
encrypted key string (from another device), enter the key string in plaintext mode and click
Apply. The encrypted key string is generated and displayed.

Timeout for Reply

Select User Defined and enter the amount of time that passes before the connection between
the device and the TACACS+ server times out. Select Use Default to use the default value
displayed on the page.

Authentication IP Port

Enter the port number through which the TACACS+ session occurs.

Single Connection

Select to enable receiving all information in a single connection. If the TACACS+ server doesn’t
support this, the device reverts to multiple connections.

Step 7

Step 8

Click Apply. The TACACS+ server is added to the Running Configuration file of the device.

To display sensitive data in plaintext form on this page, click Display Sensitive Data As Plaintext.

RADIUS Client

Remote Authorization Dial-In User Service (RADIUS) servers provide a centralized 802.1X or MAC-based
network access control. The device can be configured to be a RADIUS client that can use a RADIUS server

Cisco Business 350 Series Switches Administration Guide

253

RADIUS Client

Security

to provide centralized security, and as a RADIUS server. An organization can use the device as establish a
Remote Authorization Dial-In User Service (RADIUS) server to provide centralized 802.1X or MAC-based
network access control for all of its devices. In this way, authentication and authorization can be handled on
a single server for all devices in the organization.

Use RADIUS in network environments that require access security. To set the RADIUS server parameters,
follow these steps:

Procedure

Step 1

Step 2

Click Security > RADIUS Client.

Enter the RADIUS Accounting option. The following options are available:

• Port Based Access Control (802 1X, MAC Based, Web Authentication)—Specifies that the RADIUS server is used

for 802.1X port accounting.

• Management Access—Specifies that the RADIUS server is used for user login accounting.

• Both Port Based Access Control and Management Access—Specifies that the Radius server is used for both user

login accounting and 802.1X port accounting.

• None—Specifies that the RADIUS server is not used for accounting.

Step 3

Enter the default RADIUS parameters if required. Values entered in the Default Parameters are applied to all servers. If
a value is not entered for a specific server (in the Add RADIUS Server page) the device uses the values in these fields.

• Retries—Enter the number of transmitted requests that are sent to the RADIUS server before a failure is considered

to have occurred.

• Timeout for Reply—Enter the number of seconds that the device waits for an answer from the RADIUS server

before retrying the query, or switching to the next server.

• Dead Time—Enter the number of minutes that elapse before a non-responsive RADIUS server is bypassed for

service requests. If the value is 0, the server is not bypassed.

• Key String—Enter the default key string used for authenticating and encrypting between the device and the RADIUS
server. This key must match the key configured on the RADIUS server. A key string is used to encrypt communications
by using MD5. The key can be entered in Encrypted or Plaintext form. If you do not have an encrypted key string
(from another device), enter the key string in plaintext mode and click Apply. The encrypted key string is generated
and displayed.

This overrides the default key string if one has been defined.

• Source IPv4 Interface—Select the device IPv4 source interface to be used in messages for communication with the

RADIUS server.

• Source IPv6 Interface—Select the device IPv6 source interface to be used in messages for communication with the

RADIUS server.

Note
If the Auto option is selected, the system takes the source IP address from the IP address defined on the outgoing interface.

Step 4

Click Apply. The RADIUS default settings for the device are updated in the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

254

Security

RADIUS Client

Step 5

Step 6

To add a RADIUS server, click Add.

Enter the values in the fields for each RADIUS server.

• Server Definition—Select whether to specify the RADIUS server by IP address or name.

• IP Version—Select the version of the IP address of the RADIUS server.

• IPv6 Address Type—Select the IPv6 address type (if IPv6 is used). The options are:

• Link Local—The IPv6 address uniquely identifies hosts on a single network link. A link local address has a
prefix of FE80, is not routable, and can be used for communication only on the local network. Only one link
local address is supported. If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable from other networks.

• Link Local Interface—Select the link local interface (if IPv6 Address Type Link Local is selected) from the list. •

• Server IP Address/Name—Enter the RADIUS server by IP address or name.

• Priority—Enter the priority of the server. The priority determines the order the device attempts to contact the servers
to authenticate a user. The device starts with the highest priority RADIUS server first. Zero is the highest priority.

• Key String—Enter the key string used for authenticating and encrypting communication between the device and the
RADIUS server. This key must match the key configured on the RADIUS server. It can be entered in Encrypted or
Plaintext format. If Use Default is selected, the device attempts to authenticate to the RADIUS server by using the
default Key String.

• Timeout for Reply—Select User Defined and enter the number of seconds the device waits for an answer from the
RADIUS server before retrying the query, or switching to the next server if the maximum number of retries made.
If Use Default is selected, the device uses the default timeout value.

• Authentication Port—Enter the UDP port number of the RADIUS server port for authentication requests

• Accounting Port—Enter the UDP port number of the RADIUS server port for accounting requests.

• Retries—Select User Defined and enter the number of requests that are sent to the RADIUS server before a failure
is considered to have occurred. If Use Default is selected, the device uses the default value for the number of retries.

• Dead Time—Select User Defined and enter the number of minutes that must pass before a non-responsive RADIUS
server is bypassed for service requests. If Use Default is selected, the device uses the default value for the dead time.
If you enter 0 minutes, there is no dead time.

• Usage Type—Enter the RADIUS server authentication type. The options are:

• Login—RADIUS server is used for authenticating users that ask to administer the device.

• 802.1x—RADIUS server is used for 802.1x authentication.

• All—RADIUS server is used for authenticating user that ask to administer the device and for 802.1X

authentication.

Step 7

Step 8

Click Apply. The RADIUS server definition is added to the Running Configuration file of the device.

To display sensitive data in plaintext form on the page, click Display Sensitive Data As Plaintext.

Cisco Business 350 Series Switches Administration Guide

255

RADIUS Server

RADIUS Server

Security

An organization can use the device as a Remote Authorization Dial-In User Service (RADIUS) server to
provide centralized 802.1X or MAC-based network access control for all of its devices. Thus, authentication
and authorization can be handled on a single server for all devices.

When the device is configured as a RADIUS client, it can use the RADIUS server for the following services:

• Authentication-Provides authentication of regular and 802.1X users by using usernames and user-defined

passwords

• Authorization-Performed at login After the authentication session is completed, an authorization session

starts using the authenticated username. The RADIUS server then checks user privileges.

Accounting-Enable accounting of login sessions using the RADIUS server. This enables a system administrator
to generate accounting reports from the RADIUS server. The user-configurable, TCP port used for RADIUS
server accounting is the same TCP port that is used for RADIUS server authentication and authorization.

RADIUS Server Global Settings

The device can be configured as a RADIUS server. To set the RADIUS server global parameters, follow these
steps:

Procedure

Step 1

Step 2

Click Security > RADIUS Server > RADIUS Server Global Settings.

Enter the following parameters:

• RADIUS Server Status—Check to enable the RADIUS server feature status.

• Authentication Port—Enter the UDP port number of the RADIUS server port for authentication requests.

• Accounting Port—Enter the UDP port number of the RADIUS server port for accounting requests.

Trap Settings

• RADIUS Accounting Traps—Check to generate traps for RADIUS accounting events.

• RADIUS Authentication Failure Traps—Check to generate traps for logins that failed.

• RADIUS Authentication Success Traps—Check to generate traps for logins that succeeded.

Step 3

Click Apply. The RADIUS default settings for the device are updated in the Running Configuration file.

RADIUS Server Keys

To set the RADIUS server keys, follow these steps:

Cisco Business 350 Series Switches Administration Guide

256

Security

Procedure

Step 1

Step 2

Step 3

Step 4

RADIUS Server Groups

Click Security > RADIUS Server > RADIUS Server Keys.

Enter the default RADIUS keys if required. Values entered in the Default Key are applied to all servers configured (in
the Add RADIUS Server page) to use the default key.

• Default Key—Enter the default key string used for authenticating and encrypting between the device and the RADIUS

client. Select one of the following options:

• Keep existing default key—For specified servers, the device attempts to authenticate the RADIUS client by

using the existing, default Key String.

• Encrypted—To encrypt communications by using MD5, enter the key in encrypted form.

• Plaintext—Enter the key string in plaintext mode.

• MD5 Digest—Displays the MD5 digest of the user-entered password.

Click Apply. The RADIUS default settings for the device are updated in the Running Configuration file.

To add a secret key, click Add and enter the following fields:

• NAS Address—Address of switch containing RADIUS client.

• Secret Key—Address of switch containing RADIUS client.

• Use default Key—For specified servers, the device attempts to authenticate the RADIUS client by using the

existing, default Key String.

• Encrypted—To encrypt communications by using MD5, enter the key in encrypted form.

• Plaintext—Enter the key string in plaintext mode.

Step 5

Click Apply. The key for the device is updated in the Running Configuration file.

RADIUS Server Groups

To set up a group of users that will be using the device as its RADIUS server, complete the following:

Procedure

Step 1

Step 2

Click Security > RADIUS Server > RADIUS Server Groups.

Click Add and enter the following fields:

• Group Name—Enter a name for the group.

• Privilege Level—Enter the management access privilege level of the group.

• Time Range—Check to enable applying a time range to this group.

Cisco Business 350 Series Switches Administration Guide

257

RADIUS Server Users

Security

• Time Range Name—If Time Range is selected, select the time range to be used. Click Edit to define a time range.

This field is only displayed if a Time Range was previously created.

• VLAN—Select the VLAN for the users:

• None—No VLAN ID is sent.

• VLAN ID—VLAN ID sent.

• VLAN Name—VLAN name sent

Step 3

Click Apply. The RADIUS group definition is added to the Running Configuration file of the device.

RADIUS Server Users

To add a user, follow these steps:

Procedure

Step 1

Click Security > RADIUS Server > RADIUS Server Users.

The current users are displayed.

Step 2

Click Add to add a RADIUS Server User or Edit to edit an existing one. Next, complete the following:

• User Name—Enter the name of a user.

• Group Name—Select a previously defined group.

• Password MD5—a cryptographic hash algorithm of the password will be displayed. (Only available in Edit mode).

• Password—Enter one of the following options:

• Keep current password—Select to keep current password. (Only available in Edit mode).

• Encrypted—A key string is used to encrypt communications by using MD5. To use encryption, enter the key

in encrypted form.

• Plaintext—If you don’t have an encrypted key string (from another device), enter the key string in plaintext

mode. The encrypted key string is generated and displayed.

Step 3

Click Apply. The user definition is added to the Running Configuration file of the device.

RADIUS Server Accounting

The Radius server saves the last accounting logs in a cycle file on FLASH. These can be displayed.

To display RADIUS server accounting, complete the following steps:

Cisco Business 350 Series Switches Administration Guide

258

RADIUS Server Accounting

Security

Procedure

Step 1

Click Security > RADIUS Server > RADIUS Server Accounting.

RADIUS accounting events are displayed along with the following fields:

• User Name—Name of a user.

• Event Type—One of the following values:

• Start—Session was started.

• Stop—Session was stopped.

• Date/Time Change—Date/time on the device was changed.

• Reset—Device has reset at the specified time.

• Authentication Method—Authentication method used by the user. Displays N/A if the Event Type is Date/Time

Change or Reset.

• NAS Address—Address of switch containing RADIUS client. Displays N/A if the Event Type is Date/Time Change

or Reset.

• User Address—If the authenticated user is the network administrator, this is its IP address; if the user is a station,

this is its MAC address. Displays N/A if the Event Type is Date/Time Change or Reset.

• Event Time—Time of event.

Step 2

To see additional details for a user/event, select the user/event and click Details.

The following fields are displayed:

Note

The fields in this page depend on the type of account viewed and the details received for it. Not all fields are
always displayed.

• Event Time—See above.

• Event Type—See above.

• User Name—See above.

• Authentication Method—See above.

• NAS IPv4 Address—See NAS Address above.

• NAS Port—Port used on the switch at the NAS address

• User Address—See above.

• Accounting Session Time—See Event Time above.

• Session Termination Reason—Displays reason for session termination, such as User Request.

Cisco Business 350 Series Switches Administration Guide

259

RADIUS Server Rejected Users

Security

RADIUS Server Rejected Users

To view the users who have attempted to authenticate using the RADIUS server and have been rejected,
complete the following steps:

Procedure

Step 1

Click Security > RADIUS Server > RADIUS Rejected Users.

The rejected users are displayed along with the following fields:

• Event Type—Displays one of the following options:

• Rejected—User was rejected.

• Time Change—Clock on device was changed by the administrator.

• Reset—Device was reset by the administrator.

• User Name—Name of the rejected user.

• User Type—Displays one of the following authentication options relevant to the user:

• Login—Management access user

• 802.1x—802.1x network access user

• N/A—For Reset event

• Reason—Reason that the user was rejected.

• Time—Time that the user was rejected.

Step 2

To see additional details for the rejected user, select the user and click Details.

The following fields are displayed:

Note

The fields in this page depend on the type of account viewed and the details received for it. Not all fields are
always displayed.

• Event Time—See above.

• User Name—See above.

• User Type—See above.

• Rejection Reason—Reason that the user was rejected.

• NAS IP Address—Address of the Network Accessed Server (NAS). The NAS is the switch running the

RADIUS client.

To clear out the table of rejected users, click Clear.

Cisco Business 350 Series Switches Administration Guide

260

Security

RADIUS Server Unknown NAS Entries

RADIUS Server Unknown NAS Entries

To display authentication rejections due to NASs not being known to RADIUS server, complete the following:

Procedure

Step 1

Click Security > RADIUS Server > RADIUS Server Unknown NAS Entries.

The following fields are displayed:

• Event Type

• Unknown NAS—An unknown NAS event occurred.

• Time Change—Clock on device was changed by the administrator.

• Reset—Device was reset by the administrator.

• IP Address—IP address of the unknown NAS.

• Time—Timestamp of event

Step 2

Click Clear to delete an entry.

RADIUS Server Statistics

To display RADIUS server statistics, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click Security > RADIUS Server > RADIUS Server Statistics.

Select the Statistics Source from the following options:

•

• Global—Statistics for all users

• Specific NAS—Statistics for specific NAS

Select the Refresh Rate.

The following statistics will be displayed.

Incoming Packets on Authentication Port

Number of packets received on the authentication port.

Incoming Access-Requests from Unknown Addresses

Number of incoming access requests from unknown NAS
addresses

Duplicate Incoming Access-Requests

Number of retransmitted packets received.

Sent Access-Accepts

Number of access accepts sent.

Cisco Business 350 Series Switches Administration Guide

261

Login Settings

Security

Sent Access-Rejects

Sent Access-Challenges

Number of access rejects sent.

Number of access challenges sent.

Incoming Malformed Access-Requests

Number of malformed access requests received.

Incoming Authentication-Requests with Bad Authenticator

Number of incoming packets with bad passwords.

Incoming Authentication Packets with Other Mistakes

Incoming Authentication Packets of Unknown Type

Number of received incoming authentication packets with
other mistakes.

Number of received incoming authentication packets of
unknown type

Incoming Packets on the Accounting Port

Number of incoming packets on the accounting port.

Incoming Authentication-Requests from Unknown
Addresses

Number of incoming authentication requests from unknown
addresses.

Incoming Duplicate Accounting-Requests

Number of incoming duplicate account requests.

Accounting-Responses Sent

Number of accounting responses sent.

Incoming Malformed Accounting-Requests

Number of malformed accounting requests.

Incoming Accounting-Requests with Bad Authenticator

Incoming Accounting Packets with Other Mistakes

Number of incoming accounting requests with bad
authenticator.

Number of incoming accounting packets with other
mistakes.

Incoming Not Recorded Accounting-Requests

Number of incoming accounting requests not recorded.

Incoming Accounting Packets of Unknown Type

Number of incoming accounting packets of unknown type.

Step 5

Step 6

To clear the counters, click Clear Counters.

To refresh the counters, click Refresh.

Login Settings

The default username/password is cisco/cisco. The first time that you log in with the default username and
password, you’re required to enter a new password. Password complexity is enabled by default. If the password
that you choose isn’t complex enough, then you will be prompted to create another password.

Procedure

Step 1

Click Security > Login Settings .

Cisco Business 350 Series Switches Administration Guide

262

Security

Login Settings

Step 2

In the Password Aging section, check Enable to enable the password aging. When the Password Aging checkbox is
unchecked, the Password Aging Time is disabled.

Step 3

Next, configure the following:

Option

Password Aging Time

Recent Password Prevention

Password History Count

Minimal Password Length

Allowed Character Repetition

Minimal Number of Character Classes:

Note
The password complexity rules are as follows:

Description

Enter the number of days. (Range: 1 - 365, Default: 180)

Note
A warning message will appear 10 days prior to the
password expiration date. From the expiration day and on,
the user logging in will be forced to change the password
and will not be granted access to the device until the
password is changed.

Check Enable to enable this feature. It is disabled by
default.

Defines the number for a recent password prevention. range
is 1- 24 and default is 12.

Enter the number of character for the password. (Range: 8-
64, Default: 8)

A character cannot be repeated consecutively. Enter a
number for the allowed character repetition. (Range: 1- 16,
Default: 3)

Enter a number for the minimal number of character classes.
(Range: 0- 4, Default: 3)

• Minimal password length is 8 characters by default. Passwords are configurable with a range of 8-64.

• Character Repetition: A character cannot be repeated consecutively. The minimum number of repetition allowed is

3 by default.

• Recent password prevention: The password must be different than a number of previously used passwords on this

account. 12 by default, configurable to 3-24.

• Minimum number of character classes: The number of different character classes that must be included in the

password (classes are: uppercase letter, lowercase letter, number and special character). The minimum number is 3
by default and is configurable to 0-4 (0 and 1 are functionally identical).

• Any password established or altered by the user (hence "Secret") must be compared to the following file's list of
common passwords. If the secret contains a word from the list, the user will receive the following error message
and will need to re-enter an alternative password: "Password rejected- Passwords must not match words in the
dictionary, and must not contain commonly used passwords".

Definition for Known Password

Cisco Business 350 Series Switches Administration Guide

263

Login Lockdown

Security

When a user attempts to configure a new password, it is compared against the list of commonly used passwords. If new
password contains one of the passwords in the common password list the user configuration is rejected and the user will
need to configure a different password.

The new password is considered to contain a “word” (common password) in the list, if:

a. The word appears in any part of the password (beginning, middle, or end).

b. The word appears in reverse order in the password.

c. The word appears in the password in any case (lower or upper case) combination

d. The word letters are replaced with other characters, as follows: "$" for "s", "@" for "a", "0" for "o", "1" for "l", "!"

for "i", "3" for "e", is not permitted. For example, Pa$$w0rd is not permitted.

Definition for Sequential Characters

The password MUST NOT contain more than 2 sequential characters or numbers, or the reverse value of these sequences.
Restriction also includes letters that are replaced with other characters, as follows: "$" for "s", "@" for "a", "0" for "o",
"1" for "l", "!" for "i", "3" for "e".

Examples for prohibited passwords: “efg123!$”, “abcd765%”, “kji!$378”, qr$58!230.

Sequential letters are prohibited in any case combination (e.g. AbC or aBC).

If the password does not comply to these rules the configuration will be rejected and the user will need to configure a
new password.

Login Lockdown

If the address of a device is known, a malicious user may attempt to perform a dictionary attack. A dictionary
attack is an automated process to attempt to login by attempting thousands, or even millions, of credentials.
The purpose of a dictionary attack is to actually gain management access to the device.

To prevent these attacks the device can be configured to limit the amount of login attempts allowed within a
specific time range and by defining a quiet mode period following a specified number of failed attempts. If
the specified number of connection attempts fails (attempt tries) within a specified time (within seconds), the
device will not accept any additional login attempts for a specified period of time (block-for seconds). This
can also occur when the user forgets his login credentials and tries to login several times resulting in login
failure.

Note

Following a specified number of failed login attempts over a specified time period, the device will enter into
quiet mode. The device will not accept any more connection requests during the quiet mode time, including
telnet, SSH, SNMP, HTTP, or HTTPS. The device will restart accepting connection requests once the quiet
mode period has ended. The start and conclusion of the quiet mode time will be indicated by a Syslog message.

The number of failed attempts should be counted throughout a period of time that is measured from each
failed attempt. Failed attempts are not counted during the quiet period. When the quiet period expires, the
count of failed attempts resumes. A quiet period can be ended before the timer expires by disabling the
functionality.

Cisco Business 350 Series Switches Administration Guide

264

Security

Procedure

Step 1

Step 2

Login Protection Status

In the Login Response Delay, check Enable to enable the login response delay.

Next, configure the following:

Option

Response Delay Period

Description

Enter a number in seconds to set the response delay period.
(Range: 1- 10, Default: 1)

Quiet Period Enforcement

Check Enable to enforce quite period.

Quiet Period Length

Triggering Attempts

Triggering Interval

Enter the number of seconds to set the quiet period length.
(Range: 1- 65535, Default: 300)

Enter the number of triggering attempts. (Range: 1- 100,
Default: 4)

Enter the number in seconds for triggering interval. (Range:
1- 3600, Default: 60)

Quiet PeriodAccess Profiles, on page 269.

Console Only is the default setting.

Note
This link navigates to the Security → Management Access
Method → Access Profiles page.

Note
This drop down contains an option for every existing access
profile.

Login Protection Status

The Login Protection Status page will track and display any attempted attacks or login failures. (It will not
distinguish if the login failure is a user who forgot his credentials or an actual attack). Click the Refresh button
to refresh the data.

To view the settings for the Login Protection Status, navigate to Security > Login Protection Status.

• Quiet Mode Status- Can have either an active or inactive status.

• Login Failures in the Last 0 Seconds- Displays the number of login failures during the time lapse defined
by the "Quiet Period Length" Parameter. The "Quiet Period Length" is a value in seconds configured in
the Security > Login Settings page.

In the Login Failure Table, the following will be displayed:

• Username- the name of the user

• IP Address- the IP address of the user

• Service- the service being used. This can be either HTTP, HTTPS, Telnet, SSH or SNMP.

Cisco Business 350 Series Switches Administration Guide

265

Key Management

Security

• Count- the number of attempted login failures.

• Most Recent Attempt Time- the most recent time that a failed login was attempted.

Key Management

This section describes how to configure key chains for applications and protocols, such as RIP.

Key Chain

Procedure

To create a new key chain.

Step 1

Step 2

Click Security > Key Management > Key Chain Settings.
To add a new key chain, click Add to open the Add Key Chain page and enter the following fields:

• Key Chain-Name for the key chain.

• Key Identifier-Integer identifier for the key chain.

• Key String-Value of the key chain string. Enter one of the following options:

• User Defined (Encrypted)-Enter an encrypted version.

• User Defined (Plaintext)-Enter a plaintext version

Note
Both the Accept Life Time and the Send LifeTime values can be entered. The Accept Life Time indicates when
the key-identifier for receiving packets is valid. The Send Life Time indicates when the key-identifier for
sending packets is valid.

• Accept Life Time/Send Life Time-Specifies when packets with this key are accepted. Select one of the following

options.

• Always Valid-No limit to the life of the key-identifier

• User Defined-Life of the key-chain is limited. If this option, is selected enter values in the following fields.

Note
If you select User Defined, the system time must be set either manually or from SNTP. Otherwise, Accept Life
Time and Send Life Times always fail.

The following fields are relevant for the Accept Life Time and Send Life Time fields:

• Start Date-Enter the earliest date that the key-identifier is valid.

• Start Time-Enter the earliest time that the key-identifier is valid on the Start Date.

• End Time-Specifies the last date that the key-identifier is valid. Select one of the following options.

• Infinite-No limit to the life of the key-identifier

Cisco Business 350 Series Switches Administration Guide

266

Security

Key Settings

• Duration-Life of the key-identifier is limited. If this option, is selected enter values in the following fields.

• Duration-Length of time that the key identifier is valid. Enter the following fields:

• Days-Number of days that the key-identifier is valid.

• Hours-Number of hours that the key-identifier is valid.

• Minutes-Number of minutes that the key-identifier is valid.

• Seconds-Number of seconds that the key-identifier is valid.

Step 3

Click Apply. The settings are written to the Running Configuration file.

Key Settings

To add a key to an already existing key chain.

Procedure

Step 1

Step 2

Step 3

Click Security > Key Management > Key Settings.

Click Add to add a key string or Edit to edit and existing one.

Enter the following fields:

• Key Chain-Name for the key chain.

• Key Identifier-Integer identifier for the key chain.

• Key String-Value of the key chain string. Enter one of the following options:

• User Defined (Encrypted)-Enter an encrypted version.

• User Defined (Plaintext)-Enter a plaintext version.

Note
Both the Accept Life Time and the Send LifeTime values can be entered. The Accept Life Time indicates when
the key-identifier for receiving packets is valid. The Send Life Time indicates when the key-chain for sending
packets is valid. The fields are only described for the Accept Life Time. The Send Life Time has the same
fields.

• Accept Life Time-Specifies when packets with this key are accepted. Select one of the following options.

• Always Valid-No limit to the life of the key-identifier

• User Defined-Life of the key-chain is limited. If this option, is selected enter values in the following fields.

• Start Date-Enter the earliest date that the key-identifier is valid.

• Start Time-Enter the earliest time that the key-identifier is valid on the Start Date.

• End Time-Specifies the latest time that the key-identifier is valid. Select one of the following options.

Cisco Business 350 Series Switches Administration Guide

267

Management Access Method

Security

• Infinite-No limit to the life of the key-identifier

• Duration-Life of the key-identifier is limited. If this option, is selected enter values in the following fields.

• Duration-Length of time that the key identifier is valid. Enter the following fields:

• Days-Number of days that the key-identifier is valid.

• Hours-Number of hours that the key-identifier is valid.

• Minutes-Number of minutes that the key-identifier is valid.

• Seconds-Number of seconds that the key-identifier is valid.

Step 4

Step 5

Click Apply. The settings are written to the Running Configuration file.

Click Details to view the key details or click Display Sensitive Data as Plaintext to display the sensitive data as plaintext
(and not in encrypted form),

Management Access Method

This section describes access rules for various management methods.

Access profiles determine how to authenticate and authorize users accessing the device through various access
methods. Access Profiles can limit management access from specific sources.

Only users who pass both the active access profile and the management access authentication methods are
given management access to the device.

There can only be a single access profile active on the device at one time.

Access profiles consist of one or more rules. The rules are executed in order of their priority within the access
profile (top to bottom).

Rules are composed of filters that include the following elements:

• Access Methods-Methods for accessing and managing the device:

• Telnet

• Secure Telnet (SSH)

• Hypertext Transfer Protocol (HTTP)

• Secure HTTP (HTTPS)

• Simple Network Management Protocol (SNMP)

• All of the above

• Action-Permit or deny access to an interface or source address.

• Interface-Which ports, LAGs, or VLANs are permitted to access or are denied access to the web-based

configuration utility.

Cisco Business 350 Series Switches Administration Guide

268

Security

Access Profiles

• Source IP Address-IP addresses or subnets. Access to management methods might differ among user

groups. For example, one user group might be able to access the device module only by using an HTTPS
session, while another user group might be able to access the device module by using both HTTPS and
Telnet sessions.

Access Profiles

The Access Profiles page displays the access profiles that are defined and enables selecting one access profile
to be the active one.

When a user attempts to access the device through an access method, the device looks to see if the active
access profile explicitly permits management access to the device through this method. If no match is found,
access is denied.

When an attempt to access the device is in violation of the active access profile, the device generates a SYSLOG
message to alert the system administrator of the attempt.

If a console-only access profile has been activated, the only way to deactivate it’s through a direct connection
from the management station to the physical console port on the device.

For more information, see Profile Rules, on page 270.

Use the Access Profiles page to create an access profile and to add its first rule. If the access profile only
contains a single rule, you’re finished. To add more rules to the profile, use the Profile Rules page.

Procedure

Step 1

Click Security > Mgmt Access Method > Access Profiles.

This page displays all of the access profiles, active and inactive.

Step 2

To change the active access profile, select a profile from the Active Access Profile drop down menu and click Apply.
This makes the chosen profile the active access profile.

Note
A caution message appears if you selected Console Only. If you continue, you’re immediately disconnected from the
web-based configuration utility and can access the device only through the console port. This only applies to device types
that offer a console port.

Step 3

Step 4

Step 5

Step 6

Click OK to select the active access profile or click Cancel to discontinue the action.

Click Add to open the Add Access Profile page. The page allows you to configure a new profile and one rule.

Enter the Access Profile Name. This name can contain up to 32 characters.

Enter the parameters.

• Rule Priority—Enter the rule priority. When the packet is matched to a rule, user groups are either granted or denied
access to the device. The rule priority is essential to matching packets to rules, as packets are matched on a first-match
basis. The highest priority is ‘1’.

• Management Method—Select the management method for which the rule is defined. The options are:

• All—Assigns all management methods to the rule

Cisco Business 350 Series Switches Administration Guide

269

Profile Rules

Security

• Telnet—Users requesting access to the device that meets the Telnet access profile criteria are permitted or

denied access.

• Secure Telnet (SSH)—Users requesting access to the device that meets the SSH access profile criteria, are

permitted or denied access.

• HTTP— Users requesting access to the device that meets the HTTP access profile criteria, are permitted or

denied.

• Secure HTTP (HTTPS)—Users requesting access to the device that meets the HTTPS access profile criteria,

are permitted or denied.

• SNMP—Users requesting access to the device that meets the SNMP access profile criteria are permitted or

denied.

• Action—Select the action attached to the rule. The options are:

• Permit—Permits access to the device if the user matches the settings in the profile.

• Deny—Denies access to the device if the user matches the settings in the profile

• Applies to Interface—Select the interface attached to the rule. The options are:

• All—Applies to all ports, VLANs, and LAGs

• User Defined—Applies to selected interface.

• Interface—Enter the interface number if User Defined was selected.

• Applies to Source IP Address—Select the type of source IP address to which the access profile applies. The Source

IP Address field is valid for a subnetwork. Select one of the following values:

• All—Applies to all types of IP addresses

• User Defined—Applies to only those types of IP addresses defined in the fields.

• IP Version—Enter the version of the source IP address: Version 6 or Version 4.

• IP Address—Enter the source IP address.

• Mask—Select the format for the subnet mask for the source IP address, and enter a value in one of the fields:

• Network Mask—Select the subnet to which the source IP address belongs and enter the subnet mask in dotted

decimal format.

• Prefix Length—Select the Prefix Length and enter the number of bits that comprise the source IP address prefix.

Step 7

Click Apply. The access profile is written to the Running Configuration file. You can now select this access profile as
the active access profile.

Profile Rules

Access profiles can contain up to 128 rules to determine who is permitted to manage and access the device,
and the access methods that may be used.

Cisco Business 350 Series Switches Administration Guide

270

Security

Procedure

Profile Rules

Each rule in an access profile contains an action and criteria (one or more parameters) to match. Each rule
has a priority; rules with the lowest priority are checked first. If the incoming packet matches a rule, the action
associated with the rule is performed. If no matching rule is found within the active access profile, the packet
is dropped.

For example, you can limit access to the device from all IP addresses except IP addresses that are allocated
to the IT management center. In this way, the device can still be managed and has gained another layer of
security.

To add profile rules to an access profile, complete the following steps:

Step 1

Step 2

Click Security > Mgmt Access Method > Profile Rules.

Select the Filter field, and an access profile. Click Go.

The selected access profile appears in the Profile Rule Table.

Step 3

Step 4

Click Add to add a rule.

Enter the parameters.

• Access Profile Name—Select an access profile.

• Rule Priority—Enter the rule priority. When the packet is matched to a rule, user groups are either granted or denied
access to the device. The rule priority is essential to matching packets to rules, as packets are matched on a first-fit
basis.

• Management Method—Select the management method for which the rule is defined. The options are:

• All—Assigns all management methods to the rule

• Telnet—Users requesting access to the device that meets the Telnet access profile criteria are permitted or

denied access.

• Secure Telnet (SSH)—Users requesting access to the device that meets the Telnet access profile criteria, are

permitted or denied access.

• HTTP—Assigns HTTP access to the rule Users requesting access to the device that meets the HTTP access

profile criteria, are permitted or denied.

• Secure HTTP (HTTPS)—Users requesting access to the device that meets the HTTPS access profile criteria,

are permitted or denied.

• SNMP—Users requesting access to the device that meets the SNMP access profile criteria are permitted or

denied.

• Action—Select one of the following options.

• Permit—Allow device access to users coming from the interface and IP source defined in this rule.

• Deny—Deny device access to users coming from the interface and IP source defined in this rule.

• Applies to Interface—Select the interface attached to the rule. The options are:

• All—Applies to all ports, VLANs, and LAGs

Cisco Business 350 Series Switches Administration Guide

271

Management Access Authentication

Security

• User Defined—Applies only to the port, VLAN, or LAG selected.

• Interface—Enter the interface number if the User Defined option is selected for the field above.

• Applies to Source IP Address—Select the type of source IP address to which the access profile applies. The Source

IP Address field is valid for a subnetwork. Select one of the following values:

• All—Applies to all types of IP addresses

• User Defined—Applies to only those types of IP addresses defined in the fields.

• IP Version—Select the supported IP version of the source address: IPv6 or IPv4.

• IP Address—Enter the source IP address.

• Mask—Select the format for the subnet mask for the source IP address, and enter a value in one of the fields:

• Network Mask—Select the subnet to which the source IP address belongs and enter the subnet mask in dotted

decimal format.

• Prefix Length—Select the Prefix Length and enter the number of bits that comprise the source IP address prefix.

Step 5

Click Apply, and the rule is added to the access profile.

Management Access Authentication

You can assign authentication methods to the various management access methods, such as SSH, Telnet,
HTTP, and HTTPS. The authentication can be performed locally or on a server.

If authorization is enabled, both the identity and read/write privileges of the user are verified. If authorization
isn’t enabled, only the identity of the user is verified.

The authorization/authentication method used is determined by the order that the authentication methods are
selected. If the first authentication method isn’t available, the next selected method is used. For example, if
the selected authentication methods are RADIUS and Local, and all configured RADIUS servers are queried
in priority order and don’t reply, the user is authorized/authenticated locally.

If authorization is enabled, and an authentication method fails or the user has insufficient privilege level, the
user is denied access to the device. In other words, if authentication fails for an authentication method, the
device stops the authentication attempt; it doesn’t continue and doesn’t attempt to use the next authentication
method.

Similarly, if authorization isn’t enabled, and authentication fails for a method, the device stops the authentication
attempt.

To define authentication methods for an access method:

Procedure

Step 1

Step 2

272

Click Security > Management Access Authentication.

Enter the Application (type) of the management access method.

Cisco Business 350 Series Switches Administration Guide

Security

Secure Sensitive Data Management

Step 3

Step 4

Select Authorization to enable both authentication and authorization of the user by the list of methods described below.
If the field is not selected, only authentication is performed. If Authorization is enabled, the read/write privileges of users
are checked. This privilege level is set in the User Accounts page.

Use the arrows to move the authentication method between the Optional Methods column and the Selected Methods
column. The first method selected is the first method that is used.

• RADIUS—User is authorized/authenticated on a RADIUS server. You must have configured one or more RADIUS
servers. For the RADIUS server to grant access to the web-based configuration utility, the RADIUS server must
return RADIUS Attribute "Service-Type 6" value "Administrative".

• TACACS+—User authorized/authenticated on the TACACS+ server. You must have configured one or more

TACACS+ servers.

• None—User is allowed to access the device without authorization/authentication.

• Local—Username and password are checked against the data stored on the local device. These username and password

pairs are defined in the User Accounts page.

Note
The Local or None authentication method must always be selected last. All authentication methods selected after
Local or None are ignored.

Step 5

Click Apply. The selected authentication methods are associated with the access method.

Secure Sensitive Data Management

SSD protects sensitive data on a device, such as passwords and keys, permits and denies access to sensitive
data encrypted and in plain text based on user credentials and SSD rules, and protects configuration files
containing sensitive data from being tampered with.

In addition, SSD enables the secure backup and sharing of configuration files containing sensitive data.

SSD provides users with the flexibility to configure the desired level of protection on their sensitive data;
from no protection with sensitive data in plaintext, minimum protection with encryption based on the default
passphrase, and better protection with encryption based on user-defined passphrase.

SSD grants read permission to sensitive data only to authenticated and authorized users, and according to
SSD rules. A device authenticates and authorizes management access to users through the user authentication
process.

Whether or not SSD is used, it is recommended that the administrator secure the authentication process by
using the local authentication database, and/or secure the communication to the external authentication servers
used in the user authentication process.

In summary, SSD protects sensitive data on a device with SSD rules, SSD properties, and user authentication.
And SSD rules, SSD properties, and user authentication configurations of the device are themselves sensitive
data protected by SSD.

Cisco Business 350 Series Switches Administration Guide

273

Security

SSD Properties

SSD Properties

SSD properties are a set of parameters that, in conjunction with the SSD rules, define and control the SSD
environment of a device. The SSD environment consists of these properties:

• Controlling how the sensitive data is encrypted.

• Controlling the strength of security on configuration files.

• Controlling how the sensitive data is viewed within the current session.

To configure the SSD properties, follow these steps:

Procedure

Step 1

Click Security > Secure Sensitive Data Management > Properties.

The following field appears:

• Current Local Passphrase Type—Displays whether the default passphrase or a user-defined passphrase is currently

being used.

Step 2

In the Configuration File Passphrase Control—Select an option from the following:

• Unrestricted (default)—The device includes its passphrase when creating a configuration file. This enables any

device accepting the configuration file to learn the passphrase from the file.

• Restricted—The device restricts its passphrase from being exported into a configuration file. Restricted mode protects
the encrypted sensitive data in a configuration file from devices that do not have the passphrase. This mode should
be used when a user does not want to expose the passphrase in a configuration file.

Step 3

Step 4

Next, select to enable the Configuration File Integrity Control.

Select a Read Mode for the current session

• Plaintext —Users are permitted to access sensitive data in plaintext only. Users will also have read and write

permission to SSD parameters.

• Encrypted —Users are permitted to access sensitive data as encrypted only.

Step 5

Click Change Local Passphrase, and enter a new Local Passphrase:

• Default—Use the devices default passphrase.

• User Defined (Plaintext)—Enter a new passphrase.

• Confirm Passphrase—Confirm the new passphrase.

Step 6

Click Apply. The settings are saved to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

274

Security

SSD Rules

Procedure

SSD Rules

Only users with SSD read permission of Plaintext-only or Both are allowed to set SSD rules.

To configure SSD rules, follow these steps:

Step 1

Click Security > Secure Sensitive Data Management > SSD Rules.

The currently-defined rules are displayed. The Rule Type field indicates whether the rule is a user-defined one or a default
rule.

Step 2

To add a new rule, click Add. Enter the following fields:

• User—This defines the user(s) to which the rule applies: Select one of the following options:

• Specific User—Select and enter the specific user name to which this rule applies (this user does not necessarily

have to be defined).

• Default User (cisco)—Indicates that this rule applies to the default user.

• Level 15—Indicates that this rule applies to all users with privilege level 15.

• All—Indicates that this rule applies to all users.

• Channel—This defines the security level of the input channel to which the rule applies: Select one of the following

options:

• Secure—Indicates that this rule applies only to secure channels (console, SCP, SSH and HTTPS), not including

the SNMP and XML channels.

• Insecure—Indicates that this rule applies only to insecure channels (Telnet, TFTP and HTTP), not including

the SNMP and XML channels.

• Secure XML SNMP—Indicates that this rule applies only to XML over HTTPS and SNMPv3 with privacy.

• Insecure XML SNMP—Indicates that this rule applies only to XML over HTTP or and SNMPv1/v2and SNMPv3

without privacy.

• Read Permission—The read permissions associated with the rule. These can be the following:

• Exclude—Lowest read permission. Users are not permitted to get sensitive data in any form.

• Plaintext Only—Higher read permission than above ones. Users are permitted to get sensitive data in plaintext

only.

• Encrypted Only—Middle read permission. Users are permitted to get sensitive data as encrypted only.

• Both (Plaintext and Encrypted)—Highest read permission. Users have both encrypted and plaintext permissions

and are permitted to get sensitive data as encrypted and in plaintext

• Default Read Mode—All default read modes are subjected to the read permission of the rule. The following options

exist, but some might be rejected, depending on the rule’s read permission.

• Exclude—Do not allow reading the sensitive data.

Cisco Business 350 Series Switches Administration Guide

275

SSL Server

Security

• Encrypted—Sensitive data is presented encrypted.

• Plaintext—Sensitive data is presented as plaintext.

Step 3

Step 4

Click Apply. The settings are saved to the Running Configuration file.

The following actions can be performed on selected rules:

• Add, Edit or Delete rules or Restore To Default.

• Restore All Rules to Default—Restore a user-modified default rule to the default rule.

SSL Server

The Secure Socket Layer (SSL) feature is used to open an HTTPS session to the device. An HTTPS session
may be opened with the default certificate that exists on the device. Some browsers generate warnings when
using a default certificate, since this certificate is not signed by a Certification Authority (CA). It is best
practice to have a certificate signed by a trusted CA. By default, the device contains certificates that can be
modified. HTTPS is enabled by default.

SSL Server Authentication Settings

Secure Sockets Layer (SSL) authentication is a protocol for creating a secure connection for user-server
interactions. A server and a user are involved in every web interaction. Users frequently enter sensitive,
personal information on websites, putting persons and systems at risk. Better authentication strengthens
security, especially for sites that store financial, medical, or personal data. Stable, verifiable, and secure user
interactions are required. The way that a server verifies that the user is a real person is by collecting information.
There are a number of ways this can be done.

Procedure

Step 1

Step 2

Step 3

Step 4

Click Security > SSL Server > SSL Server Authentication Settings.

The device includes 2 certificates. Only one of them is the active certificate which can be used for the HTTPS session.
To define which certificate is active, in the SSL Active Certificate Number, select an active certificate (1 or 2).

Click Apply.

In the HTTPS Session Logging section, check Enable to enable. By enabling the HTTPS session logging, this will allow
a user to track the progress of HTTPS session setup and tear-down, via syslog messages generated by the device.

Step 5

Click Apply.

Create or Generate a New Certificate

A new self-signed certificate maybe required to replace the certificate found on the device. To create a new
certificate, complete the following steps:

Cisco Business 350 Series Switches Administration Guide

276

Security

Procedure

Step 1

Step 2

Select a certificate and click Edit.

Enter the following fields:

Create or Generate a New Certificate

• Certificate ID—Select the certificate ID that is to be replaced.

• Regenerate RSA Key—Check the checkbox to regenerate a RSA key.
• Key Length—Select the key length from one of the 2 options (2048 bits or 3072 bits).
• Common Name—Specifies the fully-qualified device URL or IP address. If unspecified, defaults to the lowest IP

address of the device (when the certificate is generated).

• Organization Unit—Specifies the organization-unit or department name.

• Organization Name—Specifies the organization name.

• Location—Specifies the location or city name.

• State—Specifies the state or province name.

• Country—Specifies the country name.

• Duration—Define the duration of the certificate.

Step 3

Step 4

Click Generate. The new certificate is generated and replaces existing one.

If you wish to generate a new certificate request, select a certificate and click Generate Certificate Request.

Note
A certificate request is a certificate that is exported to a CA for signing, and then imported back to the device as a signed
certificate. A certificate signed by a CA is considered secure (compare to a self sign certificate which is not).

Step 5

Enter the following fields:

• Certificate ID—Select the certificate ID that is to be replaced.

• Common Name—Specifies the fully-qualified device URL or IP address. If unspecified, defaults to the lowest IP

address of the device (when the certificate is generated).

• Organization Unit—Specifies the organization-unit or department name.

• Organization Name—Specifies the organization name.

• Location—Specifies the location or city name.

• State—Specifies the state or province name.

• Country—Specifies the country name.

• Certificate Request—Displays the key created when the Generate Certificate Request button is pressed.

Click Generate Certificate Request. This creates a certificate that must be entered on the Certification Authority (CA).
Copy the certificate key from the Certificate Request field.

To import a certificate signed by a CA, select an active certificate and click Import Certificate.

Enter the following fields:

Step 6

Step 7

Step 8

Cisco Business 350 Series Switches Administration Guide

277

SSH Server

Security

• Certificate ID—Select a certificate.

• Certificate Source—Displays that the certificate is auto-generated.

• Certificate—Copy in the received certificate.

• Import RSA Key—Pair-Select to enable copying in the new RSA key-pair.

• Public Key—Copy in the RSA public key.

• Fingerprint(Hex)- Displays the certificate's fingerprint in Hex format.
• Private Key (Encrypted)—Select and copy in the RSA private key in encrypted form.

• Private Key (Plaintext)—Select and copy in the RSA private key in plain text form.

Step 9

Step 10

Step 11

Click Apply to apply the changes to the Running Configuration.

Click the Details button to display the SSL certificate details.

Next, click Display Sensitive Data as Encrypted to display this key as encrypted. When this button is clicked, the
private keys are written to the configuration file in encrypted form (when Apply is clicked). When the text is displayed
in encrypted form, the button becomes Display Sensitive Data as Plaintext enabling you to view the text in plaintext
again.

SSH Server

The SSH Server feature enables a remote users to establish SSH sessions to the device. This is similar to
establishing a telnet session, except the session is secured.

The device, as a SSH server, supports SSH User Authentication which authenticates a remote user either by
password, or by public key. At the same time, the remote user as a SSH client can perform SSH Server
Authentication to authenticate the device using the device public key (fingerprint).

SSH Server can operate in the following modes:

• By Internally-generated RSA/DSA Keys (Default Setting)—An RSA and a DSA key are generated.
Users log on the SSH Server application and are automatically authenticated to open a session on the
device when they supply the IP address of the device.

• Public Key Mode—Users are defined on the device. Their RSA/DSA keys are generated in an external
SSH server application, such as PuTTY. The public keys are entered in the device. The users can then
open an SSH session on the device through the external SSH server application.

SSH User Authentication

If you use the SSH User Authentication page to create an SSH username for a user who is already configured
in the local user database. You can prevent additional authentication by configuring the Automatic Login
feature, which works as follows:

• Enabled—If a user is defined in the local database, and this user passed SSH Authentication using a

public-key, the authentication by the local database username and password is skipped.

Cisco Business 350 Series Switches Administration Guide

278

Security

SSH User Authentication

Note

The configured authentication method for this specific management method
(console, Telnet, SSH and so on) must be Local (i.e. not RADIUS or TACACS+).

• Not Enabled—After successful authentication by SSH public key, even if the username is configured in
the local user database, the user is authenticated again, as per the configured authentication methods.

This feature is optional and can be configured on the Management Access Authentication, on page 272. You
do not have to work with user authentication in SSH.

To enable authentication and add a user.

Procedure

Step 1

Step 2

Click Security > SSH Server > SSH User Authentication.

Select the following fields:

• SSH User Authentication by Password—Select to perform authentication of the SSH client user using the

username/password configured in the local database (see User Accounts, on page 62).

• SSH Session Logging— Click Enable to enable SSH session logging. The SSH session logging allows a user to

track the progress of an SSH session setup and tear-down, via syslog messages generated by the device.

• SSH User Authentication by Public Key—Select to perform authentication of the SSH client user using the public

key.

• Automatic Login—This field can be enabled if the SSH User Authentication by Public Key feature was selected.

Step 3

Click Apply. The settings are saved to the Running Configuration file.

The following fields are displayed for the configured users:

• SSH User Name—User name of user.

• Key Type—Whether this is an RSA or DSA key.

• Fingerprint—Fingerprint generated from the public keys.

Step 4

Click Add or Edit to add or edit a user and enter the fields:

• SSH User Name—Enter a user name.

• Key Type—Select either RSA or DSA.

• Public Key—Copy the public key generated by an external SSH client application (like PuTTY) into this text box.

Step 5

Click Apply to save the new user.

The following fields are displayed for all active users:

• IP Address—IP address of the active user.

• SSH User Name—User name of the active user.

Cisco Business 350 Series Switches Administration Guide

279

SSH Server Authentication

Security

• SSH Version—Version of SSH used by the active user.

• Cipher—Cipher of the active user.

• Authentication Code—Authentication code of the active user.

SSH Server Authentication

A remote SSH client can perform SSH Server Authentication to ensure it’s establishing an SSH session to
the expected SSH driver. To perform SSH Server Authentication, the remote SSH client must have a copy of
the SSH server public key (or fingerprint) of the target SSH server.

The SSH Server Authentication page generates/imports the private/public key for the device as an SSH server.
A user should copy the SSH server public key (or fingerprint) of this device to the application if it’s to perform
an SSH Server Authentication on its SSH sessions. Public and private RSA and DSA keys are automatically
generated when the device is booted from the factory defaults. Each key is also automatically created when
the appropriate user-configured key is deleted by the user.

To regenerate an RSA or DSA key or to copy in an RSA/DSA key generated on another device, complete the
following steps:

Procedure

Step 1

Click Security > SSH Server > SSH Server Authentication.

The following fields are displayed for each key:

• Key Type—RSA or DSA.

• Key Source—Auto Generated or User Defined.

• Fingerprint—Fingerprint generated from the key.

Step 2

Step 3

Select either an RSA or DSA key.

You can perform any of the following actions:

• Generate—Generates a key of the selected type.

• Edit—Enables you to copy in a key from another device. Enter the following fields:

• Key Type—As described above

• Public Key—Enter the public key.

• Private Key—Select either Plaintext or Encrypted and enter the private key.

Plaintext—Enter the key as plaintext.

Step 4

Click Apply to set the settings.

Cisco Business 350 Series Switches Administration Guide

280

Security

SSH Client

Step 5

Display Sensitive Data as Encrypted- click to display the SSH authentication settings as encrypted.

SSH Client

A SSH client helps the user manage a network composed of one or more switches in which various system
files are stored on a central SSH server. When configuration files are transferred over a network, the Secure
Copy (SCP), which is an application that utilizes the SSH protocol, ensures that sensitive data, such as
username/password cannot be intercepted.

The SSH client, only communicates with a trusted SSH server. When SSH server authentication is disabled
(the default setting), any SSH server is considered trusted. When SSH server authentication is enabled, the
user must add an entry for the trusted servers to the Trusted SSH Servers Table.

In general the SSH protocol can be used for two purposes, file transfers and terminal access.

SSH User Authentication

When a device (SSH client) attempts to establish a SSH session to a SSH server, the SSH server uses various
methods for client authentication. Use this page to select an SSH user authentication method, set a username
and password on the device, if the password method is selected or generate an RSA or DSA key, if the
public/private key method is selected.

To select an authentication method, and set the username/password/keys, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Click Security > SSH Client > SSH User Authentication.

Select an SSH User Authentication Method. This is the global method defined for the secure copy (SCP). Select one of
the options:

• By Password—This is the default setting. If this is selected, enter a password or retain the default one.

• By RSA Public Key—If this is selected, create an RSA public and Private key in the SSH User Key Table block.

• By DSA Public Key—If this is selected, create a DSA public/private key in the SSH User Key Table block.

Enter the Username (no matter what method was selected) or user the default username. This must match the username
defined on the SSH server.

If the By Password method was selected, enter a password (Encrypted or Plaintext) or leave the default encrypted password.

Perform one of the following actions:

• Apply—The selected authentication methods are associated with the access method.

• Restore Default Credentials—The default username and password (anonymous) are restored.

• Display Sensitive Data As Plaintext—Sensitive data for the current page appears as plaintext.

The SSH User Key Table contains the following fields for each key:

• Key Type—RSA or DSA.

Cisco Business 350 Series Switches Administration Guide

281

SSH Server Authentication

Security

• Key Source—Auto Generated or User Defined.

• Fingerprint—Fingerprint generated from the key.

Step 6

To handle an RSA or DSA key, select either RSA or DSA and perform one of the following actions:

• Generate—Generate a new key.

• Edit—Display the keys for copying/pasting to another device.

• Delete—Delete the key.

• Details—Display the keys.

SSH Server Authentication

To enable SSH server authentication and define the trusted servers, follow these steps:

Procedure

Step 1

Step 2

Click Security > SSH Client > SSH Server Authentication.

Select Enable to enable SSH server authentication.

• IPv4 Source Interface—Select the source interface whose IPv4 address will be used as the source IPv4 address for

messages used in communication with IPv4 SSH servers.

• IPv6 Source Interface—Select the source interface whose IPv6 address will be used as the source IPv6 address for

messages used in communication with IPv6 SSH servers.

Note
If the Auto option is selected, the system takes the source IP address from the IP address defined on the outgoing
interface.

Step 3

Step 4

Click Apply.

Click Add and enter the following fields for the Trusted SSH Server:

• Server Definition—Select one of the following ways to identify the SSH server:

• By IP address—If this is selected enter the IP address of the server in the fields below.

• By name—If this is selected enter the name of the server in the Server IP Address/Name field.

• IP Version—If you selected to specify the SSH server by IP address, select whether that IP address is an IPv4 or

IPv6 address.

• IPv6 Address Type—If the SSH server IP address is an IPv6 address, select the IPv6 address type. The options are:

• Link Local—The IPv6 address uniquely identifies hosts on a single network link. A link local address has a
prefix of FE80, isn’t routable, and can be used for communication only on the local network. Only one link

Cisco Business 350 Series Switches Administration Guide

282

Security

Change User Password on the SSH Server

local address is supported. If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable from other networks.

• Link Local Interface—Select the link local interface from the list of interfaces.

• Server IP Address/Name—Enter either the IP address of the SSH server or its name, depending on what was selected

in Server Definition.

• Fingerprint—Enter the fingerprint of the SSH server (copied from that server).

Step 5

Click Apply. The trusted server definition is stored in the Running Configuration file.

Change User Password on the SSH Server

To change the password on the SSH server, follow these steps:

Procedure

Step 1

Step 2

Click Security > SSH Client > Change User Password on SSH Server.

Enter the following fields:

• Server Definition—Define the SSH server by selecting either By IP Address or By Name. Enter the server name or

IP address of the server in the Server IP Address/Name field.

• IP Version—If you selected to specify the SSH server by IP address, select whether that IP address is an IPv4 or

IPv6 address.

• IPv6 Address Type—If the SSH server IP address is an IPv6 address, select the IPv6 address type. The options are:

• Link Local—The IPv6 address uniquely identifies hosts on a single network link. A link local address has a
prefix of FE80, isn’t routable, and can be used for communication only on the local network. Only one link
local address is supported. If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable from other networks.

• Link Local Interface—Select the link local interface from the list of interfaces.

• Server IP Address/Name—Enter either the IP address of the SSH server or its name, depending on what was selected

in Server Definition.

• Username—This must match the username on the server.

• Old Password—This must match the password on the server.

• New Password—Enter the new password and confirm it in the Confirm Password field.

Step 3

Click Apply. The password on the SSH server is modified.

Cisco Business 350 Series Switches Administration Guide

283

TCP/UDP Services

Security

TCP/UDP Services

The TCP/UDP Services page enables TCP or UDP-based services on the device, usually for security reasons.

The device offers the following TCP/UDP services:

• HTTP-Enabled by factory default

• HTTPS-Enabled by factory default

• SNMP-Disabled by factory default

• Telnet-Disabled by factory default

• SSH-Disabled by factory default

To configure TCP/UDP services, follow these steps:

Procedure

Step 1

Step 2

Click Security > TCP/UDP Services.

Enable or disable the following TCP/UDP services on the displayed services.

• HTTP Service-Indicates whether the HTTP service is enabled or disabled.

• HTTPS Service-Indicates whether the HTTPS service is enabled or disabled.

• SNMP Service-Indicates whether the SNMP service is enabled or disabled.

• Telnet Service-Indicates whether the Telnet service is enabled or disabled.

• SSH Service-Indicates whether the SSH server service is enabled or disabled.

Step 3

Click Apply. The services are written to the Running Configuration file.

The TCP Service Table displays the following fields for each service:

• Service Name-Access method through which the device is offering the TCP service.

• Type-IP protocol the service uses.

• Local IP Address-Local IP address through which the device is offering the service.

• Local Port-Local TCP port through which the device is offering the service.

• Remote IP Address-IP address of the remote device that is requesting the service.

• Remote Port-TCP port of the remote device that is requesting the service.

• State-Status of the service.

The UDP Service table displays the following information:

• Service Name-Access method through which the device is offering the UDP service.

• Type-IP protocol the service uses.

Cisco Business 350 Series Switches Administration Guide

284

Security

Storm Control

• Local IP Address-Local IP address through which the device is offering the service.

• Local Port-Local UDP port through which the device is offering the service.

• Application Instance-The service instance of the UDP service.

Storm Control

When Broadcast, Multicast, or Unknown Unicast frames are received, they are duplicated, and a copy is sent
to all possible egress ports. This means that in practice they are sent to all ports belonging to the relevant
VLAN. In this way, one ingress frame is turned into many, creating the potential for a traffic storm.

Storm protection enables you to limit the number of frames entering the device and to define the types of
frames that are counted towards this limit.

When the rate of Broadcast, Multicast, or Unknown Unicast frames is higher than the user-defined threshold,
frames received beyond the threshold are discarded.

Storm Control Settings

To define Storm Control, follow these steps:

Procedure

Step 1

Step 2

Step 3

Click Security > Storm Control > Storm Control Settings.

Select a port and click Edit.
Enter the parameters.

• Interface—Select the port for which storm control is enabled.

Unknown Unicast Storm Control

• Storm Control State—Select to enable Storm Control for Unicast packets.

• Rate Threshold—Enter the maximum rate at which unknown packets can be forwarded. This value can be entered

By kbits/sec or By percentage of the total available bandwidth.

• Trap on Storm—Select to send a trap when a storm occurs on a port. If this isn’t selected, the trap isn’t sent.

• Shutdown on Storm—Select to shut down a port when a storm occurs on the port. If this isn’t selected extra traffic

is discarded.

Multicast Storm Control

• Storm Control State—Select to enable Storm Control for Multicast packets.

• Multicast Type—Select one of the following types of Multicast packets on which to implement storm control:

• All—Enables storm control on all Multicast packets on the port

• Registered Multicast—Enables storm control only on registered Multicast addresses on the port

Cisco Business 350 Series Switches Administration Guide

285

Storm Control Statistics

Security

• Unregistered Multicast—Enables only unregistered Multicast storm control on the port

• Rate Threshold—Enter the maximum rate at which unknown packets can be forwarded. This value can be entered

By kbits/sec or By percentage of the total available bandwidth.

• Trap on Storm—Select to send a trap when a storm occurs on a port. If this isn’t selected, the trap isn’t sent.

• Shutdown on Storm—Select to shut down a port when a storm occurs on the port. If this isn’t selected extra traffic

is discarded.

Broadcast Storm Control

• Storm Control State—Select to enable Storm Control for Broadcast packets.

• Rate Threshold—Enter the maximum rate at which unknown packets can be forwarded. This value can be entered

By kbits/sec or By percentage of the total available bandwidth.

• Trap on Storm—Select to send a trap when a storm occurs on a port. If this isn’t selected, the trap isn’t sent.

• Shutdown on Storm—Select to shut down a port when a storm occurs on the port. If this isn’t selected extra traffic

is discarded.

Step 4

Click Apply. Storm control is modified, and the Running Configuration file is updated.

Storm Control Statistics

To view Storm Control statistics, complete the following:

Procedure

Step 1

Step 2

Step 3

Click Security > Storm Control > Storm Control Statistics.

Select an interface.

Enter the Refresh Rate—Select the how often the statistics should be refreshed. The available options are:

No Refresh

Statistics aren’t refreshed.

15 Sec

30 Sec

60 Sec

Statistics are refreshed every 15 seconds.

Statistics are refreshed every 30 seconds.

Statistics are refreshed every 60 seconds.

The following statistics are displayed for Unknown Unicast, Multicast and Broadcast Storm Control:

Multicast Traffic Type

(Only for Multicast traffic) All.

Bytes Passed

Number of bytes received.

Bytes Dropped

Number of bytes dropped because of storm control.

Last Drop Time

Time that the last byte was dropped.

Cisco Business 350 Series Switches Administration Guide

286

Security

Port Security

Step 4

To clear all counters on all interfaces, click Clear All Interfaces Counters. To clear all counters on an interface, select
it and click Clear Interface Counters.

Port Security

Note

Port security cannot be enabled on ports on which 802.1X is enabled or on ports that defined as SPAN
destination.

Network security can be increased by limiting access on a port to users with specific MAC addresses. The
MAC addresses can be either dynamically learned or statically configured.

Port security monitors received and learned packets. Access to locked ports is limited to users with specific
MAC addresses.

Port Security has four modes:

• Classic Lock—All learned MAC addresses on the port are locked, and the port doesn’t learn any new

MAC addresses. The learned addresses aren’t subject to aging or relearning.

• Limited Dynamic Lock—The device learns MAC addresses up to the configured limit of allowed

addresses. After the limit is reached, the device doesn’t learn additional addresses. In this mode, the
addresses are subject to aging and relearning.

• Secure Permanent—Keeps the current dynamic MAC addresses associated with the port (as long as the
configuration was saved to the Start configuration file). New MAC addresses can be learned as Permanent
Secure ones up to the maximum addresses allowed on the port. Relearning and aging are disabled.

• Secure Delete on Reset—Deletes the current dynamic MAC addresses associated with the port after

reset. New MAC addresses can be learned as Delete-On-Reset ones up to the maximum addresses allowed
on the port. Relearning and aging are disabled.

When a frame from a new MAC address is detected on a port where it’s not authorized (the port is classically
locked, and there’s a new MAC address, or the port is dynamically locked, and the maximum number of
allowed addresses has been exceeded), the protection mechanism is invoked, and one of the following actions
can take place:

• Frame is discarded.

• Frame is forwarded.

• Port is shut down.

When the secure MAC address is seen on another port, the frame is forwarded, but the MAC address isn’t
learned on that port.

In addition to one of these actions, you can also generate traps, and limit their frequency and number to avoid
overloading the devices.

To configure port security, complete the following:

Cisco Business 350 Series Switches Administration Guide

287

Port Security

Security

Procedure

Step 1

Step 2

Step 3

Click Security > Port Security.

Select an interface to be modified, and click Edit.

Enter the parameters.

• Interface—Select the interface name.

• Interface Status—Select to lock the port.

• Learning Mode—Select the type of port locking. To configure this field, the Interface Status must be unlocked. The
Learning Mode field is enabled only if the Interface Status field is locked. To change the Learning Mode, the Lock
Interface must be cleared. After the mode is changed, the Lock Interface can be reinstated. The options are:

• Classic Lock—Locks the port immediately, regardless of the number of addresses that have already been

learned.

• Limited Dynamic Lock—Locks the port by deleting the current dynamic MAC addresses associated with the
port. The port learns up to the maximum addresses allowed on the port. Both relearning and aging of MAC
addresses are enabled.

• Secure Permanent—Keeps the current dynamic MAC addresses associated with the port and learns up to the
maximum number of addresses allowed on the port (set by Max No. of Addresses Allowed). Relearning and
aging are disabled.

• Secure Delete on Reset—Deletes the current dynamic MAC addresses associated with the port after reset. New
MAC addresses can be learned as Delete-On-Reset ones up to the maximum addresses allowed on the port.
Relearning and aging are disabled.

• Max No. of Addresses Allowed—Enter the maximum number of MAC addresses that can be learned on the port if
Limited Dynamic Lock learning mode is selected. The number 0 indicates that only static addresses are supported
on the interface.

• Action on Violation—Select an action to be applied to packets arriving on a locked port. The options are:

• Discard—Discards packets from any unlearned source

• Forward—Forwards packets from an unknown source without learning the MAC address

• Shutdown—Discards packets from any unlearned source, and shuts down the port The port remains shut down

until reactivated, or until the device is rebooted.

• Trap—Select to enable traps when a packet is received on a locked port. This is relevant for lock violations. For
Classic Lock, this is any new address received. For Limited Dynamic Lock, this is any new address that exceeds
the number of allowed addresses.

• Trap Frequency—Enter minimum time (in seconds) that elapses between traps.

Step 4

Click Apply. Port security is modified, and the Running Configuration file is updated.

Cisco Business 350 Series Switches Administration Guide

288

Security

802.1X Authentication

802.1X Authentication

802.1x authentication restricts unauthorized clients from connecting to a LAN through publicity-accessible
ports. 802.1x authentication is a client-server model. In this model, network devices have the following specific
roles.

• Client or supplicant

• Authenticator

• Authentication server

A network device can be either a client/supplicant, authenticator or both per port.

802.1X Authentication Properties

The Properties page is used to globally enable port/device authentication. For authentication to function, it
must be activated both globally and individually on each port.

To define port-based authentication, follow these steps:

Procedure

Step 1

Step 2

Click Security > 802.1X Authentication > Properties.

Enter the parameters.

• Port-Based Authentication—Enable or disable port-based authentication.

• Authentication Method—Select the user authentication methods. The options are:

• RADIUS, None—Perform port authentication first by using the RADIUS server. If no response is received

from RADIUS, then no authentication is performed, and the session is permitted.

• RADIUS—Authenticate the user on the RADIUS server. If no authentication is performed, the session isn’t

permitted.

• None—Don’t authenticate the user. Permit the session.

• Guest VLAN—Select to enable the use of a guest VLAN for unauthorized ports. If a guest VLAN is enabled, all

unauthorized ports automatically join the VLAN selected in the Guest VLAN ID field. If a port is later authorized,
it’s removed from the guest VLAN.

The guest VLAN can be defined as a layer 3 interface (assigned an IP address) like any other VLAN. However,
device management isn’t available via the guest VLAN IP address.

• Guest VLAN ID—Select the guest VLAN from the list of VLANs.

• Guest VLAN Timeout—Define a time period as either Immediate or enter a value in User Defined. This value is

used as follows:

After linkup, if the software doesn’t detect the 802.1X supplicant, or the authentication has failed, the port is added
to the guest VLAN, only after the Guest VLAN timeout period has expired.

Cisco Business 350 Series Switches Administration Guide

289

Port Authentication

Security

If the port state changes from Authorized to Not Authorized, the port is added to the guest VLAN only after the
Guest VLAN timeout has expired.

• Trap Settings—To enable traps, select one of more of the following options:

• 802.1x Authentication Failure Traps—Select to generate a trap if 802.1x authentication fails.

• 802.1x Authentication Success Traps—Select to generate a trap if 802.1x authentication succeeds.

• MAC Authentication Failure Traps—Select to generate a trap if MAC authentication fails.

• MAC Authentication Success Traps—Select to generate a trap if MAC authentication succeeds.

• Supplicant Authentication Failure Traps—Select to generate a trap if supplicant authentication fails.

• Supplicant Authentication Success Traps—Select to generate a trap if supplicant authentication succeeds.

• Web Authentication Failure Traps—Select to generate a trap if Web authentication fails.

• Web Authentication Success Traps—Select to generate a trap if Web authentication succeeds.

• Web Authentication Quiet Traps—Select to generate a trap if a quiet period commences.

The VLAN Authentication Table displays all VLANs, and indicates whether authentication has been enabled
on them.

Step 3

Click Apply. The 802.1X properties are written to the Running Configuration file.

To change Enable or Disable authentication on a VLAN, click Edit and select VLAN and either Enable or Disable.

Port Authentication

The Port Authentication page enables configuration of parameters for each port. Since some of the configuration
changes are only possible while the port is in Force Authorized state, such as host authentication, it’s
recommended that you change the port control to Force Authorized before making changes. When the
configuration is complete, return the port control to its previous state.

Note

A port with 802.1x defined on it can’t become a member of a LAG. 802.1x and Port Security can’t be enabled
on same port at same time. If you enable port security on an interface, the Administrative Port Control can’t
be changed to Auto mode.

To define 802.1X authentication:

Procedure

Step 1

Click Security > 802.1X Authentication > Port Authentication.

This page displays authentication settings for all ports.

In addition to the fields described on the Add page, the following fields are displayed for each port:

Cisco Business 350 Series Switches Administration Guide

290

Security

Port Authentication

• Supplicant Status—Either Authorized or Unauthorized for an interface on which 802.1x supplicant has been enabled.

• Supplicant Credentials—Name of the credential structure used for the supplicant interface, so the possible value is
any name or N/A if the supplicant isn’t enabled. If a port has a configured supplicant credential name, the value for
the port control parameters is Supplicant. This value overrides any other port control information received from the
port.

Step 2

Step 3

Select a port and click Edit.
Enter the parameters.

• Interface—Select a port.

• Current Port Control—Displays the current port authorization state. If the state is Authorized, the port is either

authenticated or the Administrative Port Control is Force Authorized. Conversely, if the state is Unauthorized, then
the port is either not authenticated or the Administrative Port Control is Force Unauthorized. If supplicant is enabled
on an interface, the current port control is Supplicant.

• Administrative Port Control—Select the Administrative Port Authorization state. The options are:

• Force Unauthorized—Denies the interface access by moving the interface into the unauthorized state. The

device doesn’t provide authentication services to the client through the interface.

• Auto—Enables port-based authentication and authorization on the device. The interface moves between an
authorized or unauthorized state based on the authentication exchange between the device and the client.

• Force Authorized—Authorizes the interface without authentication.

• RADIUS VLAN Assignment—Select to enable Dynamic VLAN assignment on the selected port.

• Disable—Feature is not enabled.

• Reject—If the RADIUS server authorized the supplicant, but didn’t provide a supplicant VLAN, the supplicant

is rejected.

• Static—If the RADIUS server authorized the supplicant, but didn’t provide a supplicant VLAN, the supplicant

is accepted.

• Guest VLAN—Select to enable using a guest VLAN for unauthorized ports.

• Open Access—Select to successfully authenticate the port even though authentication fails.

• 802.1X Based Authentication—Select to enable 802.1X authentication on the port.

• MAC-Based Authentication—Select to enable port authentication based on the supplicant MAC address. Only 8

MAC-based authentications can be used on the port.

Note
For MAC authentication to succeed, the RADIUS server supplicant username and password must be the supplicant
MAC address. The MAC address must be in lower case letters and entered without the. Or - separators; for example:
0020aa00bbcc.

• Web-Based Authentication—Select to enable web-based authentication based on the supplicant MAC address.

• Periodic Reauthentication—Select to enable port reauthentication attempts after the specified Reauthentication

Period.

• Reauthentication Period—Enter the number of seconds after which the selected port is reauthenticated.

Cisco Business 350 Series Switches Administration Guide

291

Port Authentication

Security

• Reauthenticate Now—Select to enable immediate port reauthentication.

• Authenticator State—Displays the defined port authorization state. The options are:

• Initialize—In process of coming up.

• Force-Authorized—Controlled port state is set to Force-Authorized (forward traffic).

• Force-Unauthorized—Controlled port state is set to Force-Unauthorized (discard traffic).

Note
If the port isn’t in Force-Authorized or Force-Unauthorized, it’s in Auto Mode and the authenticator displays
the state of the authentication in progress. After the port is authenticated, the state is shown as Authenticated.

• Time Range—Select to enable limiting authentication to a specific time range.

• Time Range Name—If Time Range is selected, click the Edit button to be redirected to the time range page and

select the time range name to be used.

• Maximum WBA Login Attempts—Enter the maximum number of login attempts allowed for web-based authentication.

Select either Infinite for no limit or User Defined to set a limit.

• Maximum WBA Silence Period—Enter the maximum length of the silent period for web-based authentication

allowed on the interface. Select either Infinite for no limit or User Defined to set a limit.

• Max Hosts—Enter the maximum number of authorized hosts allowed on the interface.

Select either Infinite for no limit, or User Defined to set a limit.

Note
Set this value to 1 to simulate single-host mode for web-based authentication in multi-sessions mode.

• Quiet Period—Enter the length of the quiet period.

• Resending EAP—Enter the number of seconds that the device waits for a response to an Extensible Authentication

Protocol (EAP) request/identity frame from the supplicant (client) before resending the request.

• Max EAP Requests—Enter the maximum number of EAP requests that will be sent. If a response isn’t received

after the defined period (supplicant timeout), the authentication process is restarted.

• EAP Max Retries—Enter the maximum number of EAP retries that can be sent.

• EAP Timeout—Enter the maximum time that is waited for EAP responses before timeout occurs.

• Supplicant Timeout—Enter the number of seconds that lapses before EAP requests are resent to the supplicant.

• Server Timeout—Enter the number of seconds that lapses before the device resends a request to the authentication

server.

• Supplicant—Select to enable 802.1X.

• Credentials—Select credentials from the drop-down list to use for this supplicant. This parameter is available only
if supplicant is enabled on the interface. Edit links to the Supplicant Credentials page where credentials can be
configured.

• Supplicant Held Timeout—Enter the time period during which the supplicant waits before restarting authentication

after receiving the FAIL response from the RADIUS server.

Cisco Business 350 Series Switches Administration Guide

292

Security

Host and Session Authentication

Step 4

Click Apply. The port settings are written to the Running Configuration file.

Host and Session Authentication

The Host and Session Authentication page enables defining the mode in which 802.1X operates on the port
and the action to perform if a violation has been detected.

To define 802.1X advanced settings for ports, complete the following steps:

Procedure

Step 1

Click Security > 802.1X Authentication > Host and Session Authentication.

The authentication parameters are described for all ports. All fields except the following are described in the Edit page.

• Number of Violations—Displays the number of packets that arrive on the interface in single-host mode, from a host

whose MAC address isn’t the supplicant MAC address.

Step 2

Step 3

Select a port, and click Edit.

Enter the parameters.

• Interface—Enter a port number for which host authentication is enabled.

• Host Authentication—Select from one of the following modes.

• Single Host—A port is authorized if there is an authorized client. Only one host can be authorized on a port.

• Multiple Host (802.1x)—A port is authorized if there is if there is at least one authorized client.

• Multiple Sessions—Unlike the single-host and multi-host modes, a port in the multi-session mode does not

have an authentication status. This status is assigned to each client connected to the port.

Single Host Violation Settings—Can only be chosen if host authentication is Single Host.

• Action on Violation—Select the action to be applied to packets arriving in Single Session/Single Host mode, from

a host whose MAC address isn’t the supplicant MAC address. The options are:

• Protect (Discard)—Discards the packets.

• Restrict (Forward)—Forwards the packets.

• Shutdown—Discards the packets and shuts down the port. The ports remain shut down until reactivated, or

until the device is rebooted.

• Traps—Select to enable traps.

• Trap Frequency—Defines how often traps are sent to the host. This field can be defined only if multiple hosts are

disabled.

Step 4

Click Apply. The settings are written to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

293

Supplicant Credentials

Supplicant Credentials

Security

In addition to its capacity as an 802.1x authenticator, the switch itself can be configured as an 802.1x supplicant
seeking port access permission from a neighbor. The supplicant supports the EAP MD5-Challenge method
specified by RFC3748. The method authenticates a client by its name and password. When the supplicant is
enabled on an interface, the interface becomes unauthorized. When the 802.1X authentication process succeeds,
the interface state is changed to authorized. This page enables creating and configuring credentials that can
be used by an interface configured as an 802.1x supplicant.

To add a supplicant’s credentials, complete the following steps:

Procedure

Step 1

Step 2

Step 3

Click Security > 802.1X Authentication > Supplicant Credentials.

Click Add.

Enter the following fields:

• Credential Name—Name by which to identify the credential.

• User Name—Enter the user name associated with the credential name.

• Description—Enter text describing the user.

• Password—Select the type of password: Encrypted or Plaintext and add the password.

Step 4

Click Apply and the settings are saved to the Running Configuration file.

MAC-Based Authentication Settings

MAC-based authentication is an alternative to 802.1X authentication that allows network access to devices
(such as printers and IP phones) that do not have the 802.1X supplicant capability. MAC-based authentication
uses the MAC address of the connecting device to grant or deny network access.

To configure MAC-based authentication, complete the following steps:

Procedure

Step 1

Step 2

Click Security 802.1X Authentication > MAC-Based Authentication Settings

Enter the following fields:

• MAC Authentication Type—Select one of the following options:

• EAP—Use RADIUS with EAP encapsulation for the traffic between the switch (RADIUS client) and the

RADIUS server, which authenticates a MAC-based supplicant.

• RADIUS—Use RADIUS without EAP encapsulation for the traffic between the switch (RADIUS client) and

the RADIUS server, which authenticates a MAC-based supplicant.

Cisco Business 350 Series Switches Administration Guide

294

Security

Authenticated Hosts

Username Format

In MAC-based authentication, the supplicant's username is based on the supplicant device MAC address. The
following defines the format of this MAC-based username, which is sent from the switch to the RADIUS server, as
part of the authentication process.

• Group Size—Number of ASCII characters between delimiters of the MAC address sent as a user name.

• Group Separator—Character used as a delimiter between the defined groups of characters in the MAC address.

• Case—Send user name in lower or upper case.

MAC Authentication Password

• Password—Defines the password that the switch uses for authentication via the RADIUS server. Select one of the

following options:

• Use default (Username)—Select this to use the defined username as the password.

• Encrypted—Define a password in encrypted format.

• Plaintext—Define a password in plaintext format.

• Password MD5 Digest—Displays the MD5 Digest password.

Step 3

Click Apply and the settings are saved to the Running Configuration file. Click Display Sensitive Data as Plaintext to
display the password if it is encrypted.

Authenticated Hosts

To view details about authenticated users, click. Security > 802.1X Authentication > Authenticated Hosts.

This page displays the following fields:

• User Name—Supplicant names that authenticated on each port.

• Port—Number of the port

• Session Time (DD:HH:MM:SS)—Amount of time that the supplicant was authenticated and authorized

access at the port.

• Authentication Method—Method by which the last session was authenticated.

• Authentication Server—RADIUS server

• MAC Address—Displays the supplicant MAC address.

• VLAN ID—Port’s VLAN

Locked Clients

To view clients who have been locked out because of failed login attempts and to unlock a locked client,
follow these steps:

Cisco Business 350 Series Switches Administration Guide

295

Web Authentication Customization

Security

Procedure

Step 1

Click Security > 802.1X Authentication > Locked Client.

The following fields are displayed:

• Interface—Port that is locked.

• MAC Address—Displays the MAC address of locked station

• Remaining Time (Sec)—The time remaining for the port to be locked.

Step 2

Step 3

Select a port.

Click Unlock.

Web Authentication Customization

This page enables designing web-based authentication pages in various languages.

You can add up to 4 languages.

Note

Up to 5 HTTP users and one HTTPS user can request web-based authentication at the same time. When these
users are authenticated, more users can request authentication.

To add a language for web-based authentication, complete the following:

Procedure

Step 1

Step 2

Step 3

Step 4

Click Security > 802.1X Authentication > Web Authentication Customization.

Click Add.

Select a language from the Language drop-down list.

Select Set as Default Display Language if this language is the default language. the default language pages are displayed
if the end user does not select a language.

Step 5

Click Apply and the settings are saved to the Running Configuration file.

To customize the web-authentication pages:

Step 6

Click Security > 802.1X Authentication > Web Authentication Customization.

This page displays the languages that can be customized.

Step 7

Step 8

Click Edit Login Page.

Click Edit labeled 1. The following fields are displayed:

• Language—Displays the page’s language.

Cisco Business 350 Series Switches Administration Guide

296

Security

Web Authentication Customization

• Color Scheme—Select one of the contrast options.

If the Custom color scheme is selected, the following options are available:

• Page Background Color—Enter the ASCII code of the background color. The selected color is shown in the

Text field.

• Page Text Color—Enter the ASCII code of the text color. The selected color is shown in the Text field.

• Header and Footer Background Color—Enter the ASCII code of the header and footer background color.

The selected color is shown in the Text field.

• Header and Footer Text Color—Enter the ASCII code of the header and footer text color. The selected color

is shown in the Text field.

• Hyperlink Color—Enter the ASCII code of the hyperlink color. The selected color is shown in the Text field.

• Current Logo Image—Displays the name of the file containing the current logo image.

• Logo Image—Select one of the following options:

• None—No logo

• Default—Use the default logo.

• Other—Select to enter a customized logo.

If the Other logo option is selected, the following options are available:

• Logo Image Filename—Enter the logo file name or Browse to the image.

• Application Text—Enter text to accompany the logo.

• Window Title Text—Enter a title for the Login page.

Step 9

Step 10

Step 11

Step 12

Click Apply and the settings are saved to the Running Configuration file.

Click Edit labeled 2. The following fields are displayed:

• Invalid User Credentials—Enter the text of the message to be displayed when the end user enters an invalid

username or password.

• Service Not Available—Enter the text of the message to be displayed when the authentication service isn’t available.

Click Apply and the settings are saved to the Running Configuration file.

Click Edit labeled 3. The following fields are displayed:

• Welcome Message—Enter the text of the message to be displayed when the end user logs on.

• Instructional Message—Enter the instructions to be displayed to the end user.

• RADIUS Authentication—Displays whether RADIUS authentication is enabled. If so, the username and password

must be included in the login page.

• Username Textbox—Select for a username textbox to be displayed.

• Username Textbox Label—Select the label to be displayed before the username textbox.

• Password Textbox—Select for a password textbox to be displayed.

Cisco Business 350 Series Switches Administration Guide

297

Denial of Service Prevention

Security

• Password Textbox Label—Select the label to be displayed before the password textbox.

• Language Selection—Select to enable the end user to select a language.

• Language Dropdown Label—Enter the label of the language selection dropdown.

• Login Button Label—Enter the label of the login button.

• Login Progress Label—Enter the text that will be displayed during the login process.

Step 13

Step 14

Click Apply and the settings are saved to the Running Configuration file.

Click Edit labeled 4. The following fields are displayed:

• Terms and Conditions—Select to enable a terms and conditions text box.

• Terms and Conditions Warning—Enter the text of the message to be displayed as instructions to enter the terms

and conditions.

• Terms and Conditions Content—Enter the text of the message to be displayed as terms and conditions.

Step 15

Step 16

Step 17

Step 18

Step 19

Step 20

Step 21

Click Apply and the settings are saved to the Running Configuration file.

In Edit labeled 5, the following fields are displayed:

• Copyright—Select to enable displaying copyright text.

• Copyright Text—Enter the copyright text.

Click Apply and the settings are saved to the Running Configuration file.

Click Edit Success Page.

Click Edit on the right side of the page.

Enter the Success Message, which is the text that will be displayed if the end user successfully logs in.

Click Apply and the settings are saved to the Running Configuration file.

To preview the login or success message, click Preview.

To set the default language of the GUI interface as the default language for Web-based authentication, click Set Default
Display Language.

Denial of Service Prevention

A Denial of Service (DoS) attack is a hacker attempt to make a device unavailable to its users.

DoS attacks saturate the device with external communication requests, so that it cannot respond to legitimate
traffic. These attacks usually lead to a device CPU overload.

One method of resisting DoS attacks employed by the device is the use of Secure Core Technology (SCT),
which is enabled by default and cannot be disabled. The Cisco device is an advanced device that handles
management traffic, protocol traffic and snooping traffic, in addition to end-user (TCP) traffic. SCT ensures
that the device receives and processes management and protocol traffic, no matter how much total traffic is
received. This is done by rate-limiting TCP traffic to the CPU.

Cisco Business 350 Series Switches Administration Guide

298

Security

Security Suite Settings

Security Suite Settings

Note

Before activating DoS Prevention, you must unbind all Access Control Lists (ACLs) or advanced QoS policies
that are bound to a port. ACL and advanced QoS policies aren’t active when a port has DoS Protection enabled
on it.

To configure DoS Prevention global settings and monitor SCT:

Procedure

Step 1

Click Security > Denial of Service Prevention > Security Suite Settings.

CPU Protection Mechanism: Enabled indicates that SCT is enabled.

Step 2

Step 3

Step 4

Click Details beside CPU Utilization to go to the CPU Utilization, on page 35 page and view CPU resource utilization
information.

Click Edit beside TCP SYN Protection to set the feature.

Configure the DoS Prevention settings:

• Disable-Disable all types of Denial of Service features (except device level TCP SYN protection).

• System-Level Prevention-Enable preventing attacks from Stacheldraht Distribution, Invasor Trojan, Back Orifice

Trojan and Martian Addresses.

• System-Level and Interface-Level Prevention-In addition to the system-level prevention, you can enable and configure

the following interface-level settings: Syn Filtering, Syn Rate Protection, ICMP Filtering and IP Fragmented.

Step 5

If System-Level Prevention or System-Level and Interface-Level Prevention is selected, enable one or more of the
following Denial of Service Protection options:

• Stacheldraht Distribution-Discards TCP packets with source TCP port equal to 16660.

• Invasor Trojan-Discards TCP packets with destination TCP port equal to 2140 and source TCP port equal to 1024.

• Back Orifice Trojan-Discards UDP packets with destination UDP port equal to 31337 and source UDP port equal

to 1024.

Step 6

Click the following as required:

• Martian Addresses-Click Edit to go to the Martian Addresses, on page 301 page.

• SYN Filtering-Click Edit to go to the SYN Filtering, on page 302 page.

• SYN Rate Protection-(In Layer 2 only) Click Edit to go to the SYN Rate Protection, on page 302 page.

• ICMP Filtering-Click Edit to go to the ICMP Filtering, on page 303 page.

• IP Fragmented-Click Edit to go to the IP Fragments Filtering, on page 304 page.

Cisco Business 350 Series Switches Administration Guide

299

SYN Protection

Security

Step 7

Click Apply. The Denial of Service prevention Security Suite settings are written to the Running Configuration file.

SYN Protection

The network ports might be used by hackers to attack the device in a SYN attack, which consumes TCP
resources (buffers) and CPU power.

Since the CPU is protected using SCT, TCP traffic to the CPU is limited. However, if one or more ports are
attacked with a high rate of SYN packets, the CPU receives only the attacker packets, thus creating
Denial-of-Service.

When using the SYN protection feature, the CPU counts the SYN packets ingressing from each network port
to the CPU per second.

To configure SYN protection, follow these steps:

Procedure

Step 1

Step 2

Click Security > Denial of Service Prevention > SYN Protection.

Enter the parameters.

• Block SYN-FIN Packets-Select to enable the feature. All TCP packets with both SYN and FIN flags are dropped

on all ports.

• SYN Protection Mode-Select between three modes:

• Disable-The feature is disabled on a specific interface.

• Report-Generates a SYSLOG message. The status of the port is changed to Attacked when the threshold is

passed

• Block and Report-When a TCP SYN attack is identified, TCP SYN packets destined for the system are dropped

and the status of the port is changed to Blocked.

• SYN Protection Threshold-Number of SYN packets per second before SYN packets will be blocked (deny SYN

with MAC-to-me rule will be applied on the port).

• SYN Protection Period-Time in seconds before unblocking the SYN packets (the deny SYN with MAC-to-me rule

is unbound from the port).

Step 3

Click Apply. SYN protection is defined, and the Running Configuration file is updated.

The SYN Protection Interface Table displays the following fields for every port or LAG (as requested by the user).

• Current Status-Interface status. The possible values are:

• Normal-No attack was identified on this interface.

• Blocked-Traffic isn’t forwarded on this interface.

• Attacked-Attack was identified on this interface.

Cisco Business 350 Series Switches Administration Guide

300

Security

Martian Addresses

• Last Attack-Date of last SYN-FIN attack identified by the system and the system action.

Martian Addresses

The Martian Addresses page enables entering IP addresses that indicate an attack if they are seen on the
network. Packets from these addresses are discarded. The device supports a set of reserved Martian addresses
that are illegal from the point of view of the IP protocol. The supported reserved Martian addresses are:

• Addresses defined to be illegal in the Martian Addresses page

• Addresses that are illegal from the point of view of the protocol, such as loopback addresses, including

addresses within the following ranges:

• 0.0.0.0/8 (Except 0.0.0.0/32 as a Source Address)-Addresses in this block refer to source hosts on

this network.

• 127.0.0.0/8-Used as the Internet host loopback address

• 192.0.2.0/24-Used as the TEST-NET in documentation and example codes

• 224.0.0.0/4 (As a Source IP Address)-Used in IPv4 Multicast address assignments, and was formerly

known as Class D Address Space.

• 240.0.0.0/4 (Except 255.255.255.255/32 as a Destination Address)-Reserved address range, and

was formerly known as Class E Address Space.

You can also add new Martian Addresses for DoS prevention. Packets that have a Martian address are discarded.

To define Martian addresses, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click Security > Denial of Service Prevention > Martian Addresses.

Select Reserved Martian Addresses and click Apply to include the reserved Martian Addresses in the System Level
Prevention list.

To add a Martian address click Add.

Enter the parameters.

• IP Version-Indicates the supported IP version. Currently, support is only offered for IPv4.

• IP Address-Enter an IP address to reject. The possible values are:

• From Reserved List-Select a well-known IP address from the reserved list.

• New IP Address-Enter an IP address.

• Mask-Enter the mask of the IP address to define a range of IP addresses to reject. The values are:

• Network Mask-Network mask in dotted decimal format

Cisco Business 350 Series Switches Administration Guide

301

SYN Filtering

Security

• Prefix Length-Enter the prefix of the IP address to define the range of IP addresses for which Denial of Service

prevention is enabled.

Step 5

Click Apply.

SYN Filtering

The SYN Filtering page enables filtering TCP packets that contain a SYN flag, and are destined for one or
more ports.

To define a SYN filter, complete the following steps:

Procedure

Step 1

Step 2

Step 3

Click Security > Denial of Service Prevention > SYN Filtering.

Click Add.

Enter the parameters.

• Interface—Select the interface on which the filter is defined.

• IPv4 Address—Enter the IP address for which the filter is defined, or select All addresses.

• Network Mask—Enter the network mask for which the filter is enabled in IP address format. Enter one of the

following:

• Mask—Network mask in dotted decimal format

• Prefix length—Enter the Prefix length of the IP address to define the range of IP addresses for which Denial

of Service prevention is enabled.

• TCP Port—Select the destination TCP port being filtered:

• Known ports—Select a port from the list.

• User Defined—Enter a port number.

• All ports—Select to indicate that all ports are filtered.

Step 4

Click Apply. The SYN filter is defined, and the Running Configuration file is updated.

SYN Rate Protection

The SYN Rate Protection page enables limiting the number of SYN packets received on the ingress port. This
can mitigate the effect of a SYN flood against servers, by rate limiting the number of new connections opened
to handle packets.

To define SYN rate protection, complete the following steps:

Cisco Business 350 Series Switches Administration Guide

302

Security

Procedure

Step 1

Step 2

Step 3

ICMP Filtering

Click Security > Denial of Service Prevention > SYN Rate Protection.

Click Add.

Enter the parameters.

• Interface—Select the interface on which the rate protection is being defined.

• IP Address—Enter the IP address for which the SYN rate protection is defined or select All addresses. If you enter

the IP address, enter either the mask or prefix length.

• Network Mask—Select the format for the subnet mask for the source IP address, and enter a value in one of the

fields:

• Mask—Select the subnet to which the source IP address belongs and enter the subnet mask in dotted decimal

format.

• Prefix length—Select the Prefix length and enter the number of bits that comprise the source IP address prefix.

• SYN Rate Limit—Enter the number of SYN packets that be received.

Step 4

Click Apply. The SYN rate protection is defined, and the Running Configuration is updated.

ICMP Filtering

The ICMP Filtering page enables the blocking of ICMP packets from certain sources. This can reduce the
load on the network in case of an ICMP attack.

To configure the ICMP filtering, complete the following steps:

Procedure

Step 1

Step 2

Step 3

Click Security > Denial of Service Prevention > ICMP Filtering.

Click Add.
Enter the parameters.

• Interface—Select the interface on which the ICMP filtering is being defined.

• IP Address—Enter the IPv4 address for which the ICMP packet filtering is activated or select All addresses to block

ICMP packets from all source addresses. If you enter the IP address, enter either the mask or prefix length.

• Network Mask—Select the format for the subnet mask for the source IP address, and enter a value in one of the

field:

• Mask—Select the subnet to which the source IP address belongs and enter the subnet mask in dotted decimal

format.

• Prefix length—Select the Prefix length and enter the number of bits that comprise the source IP address prefix.

Cisco Business 350 Series Switches Administration Guide

303

IP Fragments Filtering

Security

Step 4

Click Apply. The ICMP filtering is defined, and the Running Configuration is updated.

IP Fragments Filtering

IP fragmentation occurs when the data of the network layer is too large to be transmitted over the data link
layer in one piece. Then the data of the network layer is split into several pieces (fragments), and this process
is called IP fragmentation.

To configure fragmented IP filtering and block fragmented IP packets, complete the following steps:

Procedure

Step 1

Step 2

Step 3

Click Security > Denial of Service Prevention > IP Fragments Filtering.

Click Add.

Enter the parameters.

• Interface—Select the interface on which the IP fragmentation is being defined.

• IP Address—Enter an IP network from which the fragmented IP packets is filtered or select All addresses to block

IP fragmented packets from all addresses. If you enter the IP address, enter either the mask or prefix length.

• Network Mask—Select the format for the subnet mask for the source IP address, and enter a value in one of the

fields:

• Mask—Select the subnet to which the source IP address belongs and enter the subnet mask in dotted decimal

format.

• Prefix length—Select the Prefix length and enter the number of bits that comprise the source IP address prefix.

Step 4

Click Apply. The IP fragmentation is defined, and the Running Configuration file is updated.

IP Source Guard

IP Source Guard is a security feature that can be used to prevent traffic attacks caused when a host tries to
use the IP address of its neighbor.

When IP Source Guard is enabled, the device only transmits client IP traffic to IP addresses contained in the
DHCP Snooping Binding database. This includes both addresses added by DHCP Snooping and manually-added
entries. If the packet matches an entry in the database, the device forwards it. If not, it is dropped.

If IP Source Guard is enabled on a port then:

• DHCP packets allowed by DHCP Snooping are permitted

• If source IP address filtering is enabled:

• IPv4 traffic: Only traffic with a source IP address that is associated with the port is permitted.

Cisco Business 350 Series Switches Administration Guide

304

Security

IP Source Guard Properties

• Non IPv4 traffic: Permitted (Including ARP packets).

IP Source Guard Properties

To enable IP Source Guard globally:

Procedure

Step 1

Step 2

Step 3

Click Security > IP Source Guard > Properties.

Select Enable to enable IP Source Guard globally.

Click Apply to enable IP Source Guard.

Interface Settings

If IP Source Guard is enabled on an untrusted port/LAG, DHCP packets, allowed by DHCP Snooping, are
transmitted. If source IP address filtering is enabled, packet transmission is permitted as follows:

• IPv4 traffic—Only IPv4 traffic with a source IP address that is associated with the specific port is

permitted.

• Non IPv4 traffic—All non-IPv4 traffic is permitted.

To configure IP Source Guard on interfaces:

Procedure

Step 1

Step 2

Step 3

Step 4

Click Security > IP Source Guard > Interface Settings.

Select port/LAG from the Filter field and click Go. The ports/LAGs on this unit are displayed along with the following:

• IP Source Guard—Indicates whether IP Source Guard is enabled on the port.

• DHCP Snooping Trusted Interface—Indicates whether this is a DHCP trusted interface.

Select the port/LAG and click Edit. Select Enable in the IP Source Guard field to enable IP Source Guard on the interface.

Click Apply to copy the setting to the Running Configuration file.

IP Source Guard Binding Database

IP Source Guard uses the DHCP Snooping - to check packets from untrusted ports. If the device attempts to
write too many entries to the DHCP Snooping -, the excessive entries are maintained in an inactive status.
Entries are deleted when their lease time expires and so inactive entries may be made active.

See DHCP Snooping/Relay, on page 214.

Cisco Business 350 Series Switches Administration Guide

305

ARP Inspection

Security

Note

The page only displays the entries in the DHCP Snooping - defined on IP-Source-Guard-enabled ports.

To view the DHCP Snooping - and see TCAM resources consumed, complete the following:

Procedure

Step 1

Click Security > IP Source Guard > Binding Database.

The Supported IP Format and TCAM Resources Consumed will be displayed.

Step 2

The DHCP Snooping uses TCAM resources for managing the database. Complete the Insert Inactive field to select how
frequently the device should attempt to activate inactive entries. It has the following options:

• Retry Frequency—The frequency with which the TCAM resources are checked.

• Never-Never try to reactivate inactive addresses.

Step 3

Click Apply to save the above changes to the Running Configuration and/or Retry Now to check TCAM resources.

The following entries are displayed:

• VLAN ID—VLAN on which packet is expected.

• MAC Address—MAC address to be matched.

• IP Address—IP address to be matched.

• Interface—Interface on which packet is expected.

• Status—Displays whether interface is active.

• Type—Displays whether entry is dynamic or static.

• Reason—If the interface isn’t active, displays the reason. The following reasons are possible:

• No Problem—Interface is active.

• No Snoop VLAN—DHCP Snooping isn’t enabled on the VLAN.

• Trusted Port—Port has become trusted.

• Resource Problem—TCAM resources are exhausted.

Step 4

To see a subset of these entries, enter the relevant search criteria and click Go.

ARP Inspection

ARP enables IP communication within a Layer 2 Broadcast domain by mapping IP addresses to a MAC
addresses.

Cisco Business 350 Series Switches Administration Guide

306

Security

ARP Inspection Properties

A malicious user can attack hosts, switches, and routers connected to a Layer 2 network by poisoning the
ARP caches of systems connected to the subnet and by intercepting traffic intended for other hosts on the
subnet. This can happen because ARP allows a gratuitous reply from a host even if an ARP request was not
received. After the attack, all traffic from the device under attack flows through the attacker's computer and
then to the router, switch, or host.

Hosts A, B, and C are connected to the switch on interfaces A, B and C, all of which are on the same subnet.
Their IP, MAC addresses are shown in parentheses; for example, Host A uses IP address IA and MAC address
MA. When Host A needs to communicate with Host B at the IP layer, it broadcasts an ARP request for the
MAC address associated with IP address IB. Host B responds with an ARP reply. The switch and Host A
update their ARP cache with the MAC and IP of Host B.

Host C can poison the ARP caches of the switch, Host A, and Host B by broadcasting forged ARP responses
with bindings for a host with an IP address of IA (or IB) and a MAC address of MC. Hosts with poisoned
ARP caches use the MAC address MC as the destination MAC address for traffic intended for IA or IB, which
enables Host C intercepts that traffic. Because Host C knows the true MAC addresses associated with IA and
IB, it can forward the intercepted traffic to those hosts by using the correct MAC address as the destination.
Host C has inserted itself into the traffic stream from Host A to Host B, the classic man-in-the-middle attack.

ARP Inspection Properties

To configure ARP Inspection properties:

Procedure

Step 1

Click Security > ARP Inspection > Properties.

Enter the following fields:

• ARP Inspection Status-Select to enable ARP Inspection.

• ARP Packet Validation-Select to enable validation checks.

• Log Buffer Interval-Select one of the following options:

• Retry Frequency-Enable sending SYSLOG messages for dropped packets. Entered the frequency with which

the messages are sent.

• Never-Disabled SYSLOG dropped packet messages.

Step 2

Click Apply. The settings are defined, and the Running Configuration file is updated.

ARP Inspection Interfaces Settings

Packets from untrusted ports/LAGs are checked against the ARP Access Rules table and the DHCP Snooping
Binding database if DHCP Snooping is enabled (see the DHCP Snooping Binding Database, on page 219).

By default, ports/LAGs are ARP Inspection untrusted.

To change the ARP trusted status of a port/LAG:

Cisco Business 350 Series Switches Administration Guide

307

ARP Access Control

Procedure

Security

Step 1

Click Security > ARP Inspection > Interface Settings.

The ports/LAGs and their ARP trusted/untrusted status are displayed.

Step 2

Step 3

To set a port/LAG as trusted or untrusted, select the port/LAG and click Edit.

Select Trusted or Untrusted and click Apply to save the settings to the Running Configuration file.

ARP Access Control

To add entries to the ARP Inspection table:

Procedure

Step 1

Step 2

Step 3

Click Security > ARP Inspection > ARP Access Control.

To add an entry, click Add.

Enter the fields:

• ARP Access Control Name-Enter a user-created name.

• IP Address-IP address of packet.

• MAC Address-MAC address of packet.

Step 4

Click Apply. The settings are defined, and the Running Configuration file is updated.

ARP Access Control Rules

To add more rules to a previously-created ARP Access Control group:

Procedure

Step 1

Click Security > ARP Inspection > ARP Access Control Rules.

The ARP Access Control Rule Table displays, with the currently-defined access rules.

To select a specific group, select Filter, select the control name and click Go.

Step 2

Step 3

To add more rules to a group, click Add.

Select an ARP Access Control Name and enter the fields:

• IP Address-IP address of packet.

Cisco Business 350 Series Switches Administration Guide

308

Security

ARP Inspection VLAN Settings

• MAC Address-MAC address of packet.

Step 4

Click Apply. The settings are defined, and the Running Configuration file is updated.

ARP Inspection VLAN Settings

To enable ARP Inspection on VLANs and associate Access Control Groups with a VLAN:

Procedure

Step 1

Step 2

Step 3

Click Security > ARP Inspection > VLAN Settings.

To enable ARP Inspection on a VLAN, move the VLAN from the Available VLANs list to the Enabled VLANs list.

To associate an ARP Access Control group with a VLAN, click Add. Select the VLAN number and select a
previously-defined ARP Access Control Name.

Step 4

Click Apply. The settings are defined, and the Running Configuration file is updated.

IPv6 First Hop Security

IPv6 First Hop Security (FHS) is a suite of features designed to secure link operations in an IPv6-enabled
network. It is based on the Neighbor Discovery Protocol and DHCPv6 messages.

In this feature, a Layer 2 switch filters Neighbor Discovery Protocol messages, DHCPv6 messages and user
data messages according to a number of different rules.

IPv6 First Hop Security Components

IPv6 First Hop Security includes the following features:

• IPv6 First Hop Security Common

• RA Guard

• ND Inspection

• Neighbor Binding Integrity

• DHCPv6 Guard

• IPv6 Source Guard

These components can be enabled or disabled on VLANs. There are two empty, pre-defined policies per each
feature with the following names: vlan_default and port_default. The first one is attached to each VLAN that
is not attached to a user-defined policy and the second one is connected to each interface and VLAN that is
not attached to a user-defined policy.

Cisco Business 350 Series Switches Administration Guide

309

Security

Use the FHS Settings page to enable the FHS Common feature on a specified group of VLANs and to set the
global configuration value for logging of dropped packets. If required, a policy can be added. The packet drop
logging can be added to the system-defined default policy.

To configure IPv6 First Hop Security common parameters:

FHS Settings

FHS Settings

Procedure

Step 1

Click Security > IPv6 First Hop Security > FHS Settings.

The currently defined policies are displayed. For each policy, its Policy Type is displayed, which indicates whether it’s
a default or user-defined policy.

Step 2

Enter the following global configuration fields:

• FHS VLAN List—Enter one or more VLANs on which IPv6 First Hop Security is enabled.

• Packet Drop Logging—Select to create a SYSLOG when a packet is dropped by a First Hop Security policy. This

is the global default value if no policy is defined.

Step 3

Step 4

Click Apply to add the settings to the Running Configuration file.

Create a FHS policy if required by clicking Add.

Enter the following fields:

• Policy Name—Enter a user-defined policy name.

• Packet Drop Logging—Select to create a SYSLOG when a packet is dropped as a result of a First Hop Security

feature within this policy.

• Inherited—Use the value from the VLAN or the global configuration.

• Enable—Create a SYSLOG when a packet is dropped as a result of First Hop Security.

• Disable—Don’t create a SYSLOG when a packet is dropped as a result of First Hop Security.

Step 5

Step 6

Click Apply to add the settings to the Running Configuration file.

To attach this policy to an interface:

• Attach Policy to VLAN—Click to jump to Policy Attachment (VLAN), on page 319 page where you can attach this

policy to a VLAN.

• Attach Policy to Interface—Click to jump to Policy Attachment (Port), on page 320 page where you can attach this

policy to a port.

Cisco Business 350 Series Switches Administration Guide

310

Security

RA Guard Settings

RA Guard Settings

Use the RA Guard Settings page to enable the RA Guard feature on a specified group of VLANs and to set
the global configuration values for this feature. If required, a policy can be added or the system-defined default
RA Guard policies can be configured in this page.

To configure RA Guard:

Procedure

Step 1

Click Security > IPv6 First Hop Security > RA Guard Settings.

The currently defined policies are displayed. For each policy, its Policy Type is displayed, which indicates whether it’s
a default or user-defined policy.

Step 2

Enter the following global configuration field:

• RA Guard VLAN List—Enter one or more VLANs on which RA Guard is enabled.

Enter the other configuration fields that are described below.

Step 3

To add a policy, click Add and enter the fields:

• Policy Name—Enter a user-defined policy name.

• Device Role—Displays one of the following options to specify the role of the device attached to the port for RA

Guard.

• Inherited—Device role is inherited from either the VLAN or system default (client).

• Host—Device role is host.

• Router—Device role is router.

• Managed Configuration Flag—This field specifies verification of the advertised Managed Address Configuration

flag within an IPv6 RA Guard policy.

• Inherited—Feature is inherited from either the VLAN or system default (client).

• No Verification—Disables verification of the advertised Managed Address Configuration flag.

• On—Enables verification of the advertised Managed Address Configuration flag.

• Off—The value of the flag must be 0.

• Other Configuration Flag—This field specifies verification of the advertised Other Configuration flag within an

IPv6 RA Guard policy.

• Inherited—Feature is inherited from either the VLAN or system default (client).

• No Verification—Disables verification of the advertised Other Configuration flag.

• On—Enables verification of the advertised Managed Other flag.

• Off—The value of the flag must be 0.

Cisco Business 350 Series Switches Administration Guide

311

RA Guard Settings

Security

• RA Address List—Specify the list of addresses to filter:

• Inherited—Value is inherited from either the VLAN or system default (no verification).

• No Verification—Advertised addresses aren’t verified.

• Match List—IPv6 address list to be matched.

• RA Prefix List—Specify the list of addresses to filter:

• Inherited—Value is inherited from either the VLAN or system default (no verification).

• No Verification—Advertised prefixes aren’t verified.

• Match List—Prefix list to be matched.

• Minimal Hop Limit—Indicates if the RA Guard policy checks that the minimum hop limit of the packet received.

• Inherited—Feature is inherited from either the VLAN or system default (client).

• No Limit—Disables verification of the lower boundary of the hop count limit.

• User Defined—Verifies that the hop-count limit is greater than or equal to this value.

• Maximal Hop Limit—Indicates if the RA Guard policy checks that the maximum hop limit of the packet received.

• Inherited—Feature is inherited from either the VLAN or system default (client).

• No Limit—Disables verification of the high boundary of the hop-count limit.

• User Defined—Verifies that the hop-count limit is less than or equal to this value. The value of the high boundary

must be equal or greater than the value of the low boundary.

• Minimal Router Preference—This field indicates whether the RA Guard policy verifies the minimum advertised

Default Router Preference value in RA messages within an RA Guard policy.

• Inherited—Feature is inherited from either the VLAN or system default (client).

• No Verification—Disables verification of the low boundary of Advertised Default Router Preference.

• Low—Specifies the minimum allowed Advertised Default Router Preference value. The following values are

acceptable: low, medium, and high (see RFC4191).

• Medium—Specifies the minimum allowed Advertised Default Router Preference value. The following values

are acceptable: low, medium, and high (see RFC4191).

• High—Specifies the minimum allowed Advertised Default Router Preference value. The following values are

acceptable: low, medium, and high (see RFC4191).

• Maximal Router Preference—This field indicates whether the RA Guard policy verifies the maximum advertised

Default Router Preference value in RA messages within an RA Guard policy.

• Inherited—Feature is inherited from either the VLAN or system default (client).

• No Verification—Disables verification of the high boundary of Advertised Default Router Preference.

• Low—Specifies the maximum allowed Advertised Default Router Preference value. The following values are

acceptable: low, medium, and high (see RFC4191).

Cisco Business 350 Series Switches Administration Guide

312

Security

DHCPv6 Guard Settings

• Medium—Specifies the maximum allowed Advertised Default Router Preference value. The following values

are acceptable: low, medium, and high (see RFC4191).

• High—Specifies the maximum allowed Advertised Default Router Preference value. The following values are

acceptable: low, medium, and high (see RFC4191).

Step 4

Step 5

Click Apply to add the settings to the Running Configuration file.

To configure system-defined default policies or existing user defined policy select the policy in the policy table and click
Edit.

Step 6

To attach this policy to an interface:

• Attach Policy to VLAN—Click to jump to Policy Attachment (VLAN), on page 319 page where you can attach this

policy to a VLAN.

• Attach Policy to Interface—Click to jump to Policy Attachment (Port), on page 320 page where you can attach this

policy to a port.

DHCPv6 Guard Settings

Use the DHCPv6 Guard Settings page to enable the DHCPv6 Guard feature on a specified group of VLANs
and to set the global configuration values for this feature. If required, a policy can be added or the
system-defined default DHCPv6 Guard policies can be configured in this page.

To configure DHCPv6 Guard:

Procedure

Step 1

Click Security > IPv6 First Hop Security > DHCPv6 Guard Settings.

The currently defined policies are displayed. For each policy, its Policy Type is displayed, which indicates whether it’s
a default or user-defined policy.

Step 2

Enter the following global configuration fields:

• DHCPv6 Guard VLAN List—Enter one or more VLANs on which DHCPv6 Guard is enabled.

• Device Role—Displays the device role. See definition in the Add page.

• Minimal Preference—This field indicates whether the DHCPv6 Guard policy checks the minimum advertised

preference value of the packet received.

• No Verification—Disables verification of the minimum advertised preference value of the packet received.

• User Defined—Verifies that the advertised preference value is greater than or equal to this value. This value

must be less than the Maximal Preference value.

• Maximal Preference—This field indicates whether the DHCPv6 Guard policy checks the maximum advertised

preference value of the packet received. This value must be greater than the Minimal Preference value.

• No Verification—Disables verification of the lower boundary of the hop count limit.

Cisco Business 350 Series Switches Administration Guide

313

DHCPv6 Guard Settings

Security

• User Defined—Verifies that the advertised preference value is less than or equal to this value.

Step 3

Click Apply to add the settings to the Running Configuration file.

The existing policies are displayed. The fields are displayed below except for the Policy Type field. This displays whether
the policy is user-defined or a default one.

Step 4

Step 5

If required, click Add to create a DHCPv6 policy.

Enter the following fields:

• Policy Name—Enter a user-defined policy name.

• Device Role—Select either Server or Client to specify the role of the device attached to the port for DHCPv6 Guard.

• Inherited—Role of device is inherited from either the VLAN or system default (client).

• Client—Role of device is client.

• Server—Role of device is server.

• Match Reply Prefixes—Select to enable verification of the advertised prefixes in received DHCP reply messages

within a DHCPv6 Guard policy.

• Inherited—Value is inherited from either the VLAN or system default (no verification).

• No Verification—Advertised prefixes aren’t verified.

• Match List—IPv6 prefix list to be matched.

• Match Server Address—Select to enable verification of the DHCP server's and relay’s IPv6 address in received

DHCP reply messages within a DHCPv6 Guard policy.

• Inherited—Value is inherited from either the VLAN or system default (no verification).

• No Verification—Disables verification of the DHCP server's and relay’s IPv6 address.

• Match List— IPv6 prefix list to be matched.

• Minimal Preference—This field indicates whether the DHCPv6 Guard policy checks the minimum advertised

preference value of the packet received.

• Inherited—Minimal preference is inherited from either the VLAN or system default (client).

• No Verification—Disables verification of the minimum advertised preference value of the packet received.

• User Defined—Verifies that the advertised preference value is greater than or equal to this value. This value

must be less than the Maximal Preference value.

• Maximal Preference—This field indicates whether the DHCPv6 Guard policy checks the maximum advertised

preference value of the packet received. This value must be greater than the Minimal Preference value.

• Inherited—Minimal preference is inherited from either the VLAN or system default (client).

• No Verification—Disables verification of the lower boundary of the hop count limit.

• User Defined—Verifies that the advertised preference value is less than or equal to this value.

Cisco Business 350 Series Switches Administration Guide

314

Security

Step 6

Step 7

ND Inspection Settings

Click Apply to add the settings to the Running Configuration file.

To attach this policy to an interface:

• Attach Policy to VLAN—Click to jump to Policy Attachment (VLAN), on page 319 page where you can attach this

policy to a VLAN.

• Attach Policy to Interface—Click to jump to Policy Attachment (Port), on page 320 page where you can attach this

policy to a port.

ND Inspection Settings

Use the Neighbor Discovery (ND) Inspection Settings page to enable the ND Inspection feature on a specified
group of VLANs and to set the global configuration values for this feature. If required, a policy can be added
or the system-defined default ND Inspection policies can be configured in this page.

To configure ND Inspection:

Procedure

Step 1

Click Security > IPv6 First Hop Security > ND Inspection Settings.

The existing policies are displayed. The fields are displayed below except for the Policy Type field. This displays whether
the policy is user-defined or a default one.

Step 2

Enter the following global configuration fields:

• ND Inspection VLAN List—Enter one or more VLANs on which ND Inspection is enabled.

• Device Role—Displays the device role that is explained below.

• Drop Unsecure—Select to enable dropping messages with no CGA or RSA Signature option within an IPv6 ND

Inspection policy.

• Minimal Security Level—If unsecure messages aren’t dropped, select the security level below which messages

aren’t forwarded.

• No Verification—Disables verification of the security level.

• User Defined—Specify the security level of the message to be forwarded.

• Validate Source MAC—Select to globally enable checking source MAC address against the link-layer address.

Step 3

Step 4

Step 5

Click Apply to add the settings to the Running Configuration file.

If required, click Add to create an ND Inspection policy.

Enter the following fields:

• Policy Name—Enter a user-defined policy name.

• Device Role—Select one of the following to specify the role of the device attached to the port for ND Inspection.

• Inherited—Role of device is inherited from either the VLAN or system default (client).

Cisco Business 350 Series Switches Administration Guide

315

Neighbor Binding Settings

Security

• Host—Role of device is host.

• Router—Role of device is router.

• Drop Unsecure—Select one of following options:

• Inherited—Inherit value from VLAN or system default (disabled).

• Enable—Enable dropping messages with no CGA or RSA Signature option within an IPv6 ND Inspection

policy.

• Disable—Disable dropping messages with no CGA or RSA Signature option within an IPv6 ND Inspection

policy.

• Minimal Security Level—If unsecure messages aren’t dropped, select the security level below which messages

aren’t forwarded.

• Inherited—Inherit value from VLAN or system default (disabled).

• No Verification—Disables verification of the security level.

• User Defined—Specify the security level of the message to be forwarded.

• Validate Source MAC—Specify whether to globally enable checking source MAC address against the link-layer

address:

• Inherited—Inherit value from VLAN or system default (disabled).

• Enable—Enable checking source MAC address against the link-layer address.

• Disable—Disable checking source MAC address against the link-layer address.

Step 6

Step 7

Click Apply to add the settings to the Running Configuration file.

To attach this policy to an interface:

• Attach Policy to VLAN— To attach this policy to a VLAN, jump to Policy Attachment (VLAN), on page 319 .

• Attach Policy to Interface—To attach this policy to an interface, jump to Policy Attachment (Port), on page 320

Neighbor Binding Settings

The Neighbor Binding table is a database table of IPv6 neighbors connected to a device is created from
information sources, such as Neighbor Discovery Protocol (NDP) snooping. This database, or binding, table
is used by various IPv6 guard features to prevent spoofing and redirect attacks.

Use the Neighbor Binding Settings page to enable the Neighbor Binding feature on a specified group of
VLANs and to set the global configuration values for this feature. If required, a policy can be added or the
system-defined default Neighbor Binding policies can be configured in this page.

To configure Neighbor Binding:

Cisco Business 350 Series Switches Administration Guide

316

Security

Procedure

Step 1

Step 2

Neighbor Binding Settings

Click Security > IPv6 First Hop Security > Neighbor Binding Settings.

Enter the following global configuration fields:

Neighbor Binding VLAN
List

Enter one or more VLANs on which Neighbor Binding is enabled.

Device Role

Displays the device global default role (Perimeter).

Neighbor Binding Lifetime

Enter the length of time that addresses remain in the Neighbor Bindings table.

Neighbor Binding Logging

Select to enable logging of Neighbor Binding table main events.

Address Prefix Validation

Select to enable IPv6 Source Guard validation of addresses.

Global Address Binding Configuration

Binding from NDP Messages

To change the global configuration of allowed configuration methods of global IPv6
addresses within an IPv6 Neighbor Binding policy, select one of the following options:

• Any—Any configuration methods (stateless and manual) are allowed for global IPv6

bound from NDP messages.

• Stateless—Only stateless auto configuration is allowed for global IPv6 bound from

NDP messages.

• Disable—Binding from NDP messages is disabled.

Binding from DHCPv6
Messages

Binding from DHCPv6 is allowed.

Neighbor Binding Entry Limits

Entries per VLAN

Select Inherited to use global value, No Limit to set no limit on the number of entries and
User Defined to set a special value for this policy.

Entries per Interface

Select Inherited to use global value, No Limit to set no limit on the number of entries and
User Defined to set a special value for this policy.

Entries per MAC
Address

Select Inherited to use global value, No Limit to set no limit on the number of entries and
User Defined to set a special value for this policy.

Step 3

Step 4

Step 5

Click Apply to add the settings to the Running Configuration file.

If required, click Add to create a Neighbor Binding policy.

Enter the following fields:

Policy Name

Enter a user-defined policy name.

Cisco Business 350 Series Switches Administration Guide

317

Neighbor Binding Settings

Security

Device Role

Select one of the following options to specify the role of the device attached to the port
for the Neighbor Binding policy.

• Inherited—Role of device is inherited from either the VLAN or system default

(client).

• Perimeter—Port is connected to devices not supporting IPv6 First Hop Security.

• Internal—Port is connected to devices supporting IPv6 First Hop Security.

Neighbor Binding Logging

Select one of the following options to specify logging:

• Inherited—Logging option is the same as the global value.

• Enable—Enable logging of Binding table main events.

• Disable—Disable logging of Binding table main events.

Address Prefix Validation

Select one of the following options to specify validation of addresses:

• Inherited—Validation option is the same as the global value.

• Enable—Enable validation of addresses.

• Disable—Disable validation of addresses

Global Address Binding Configuration

Inherit Address Binding
Settings

Enable to use the global address binding settings.

Binding from NDP Messages

To change the global configuration of allowed configuration methods of global IPv6
addresses within an IPv6 Neighbor Binding policy, select one of the following options:

• Any—Any configuration methods (stateless and manual) are allowed for global IPv6

bound from NDP messages.

• Stateless—Only stateless auto configuration is allowed for global IPv6 bound from

NDP messages.

• Disable—Binding from NDP messages is disabled.

Binding from DHCPv6
Messages

Select to enable binding from DHCPv6.

Neighbor Binding Entry Limits

Entries per VLAN

Select Inherited to use global value, No Limit to set no limit on the number of entries and
User Defined to set a special value for this policy.

Entries per Interface

Select Inherited to use global value, No Limit to set no limit on the number of entries and
User Defined to set a special value for this policy.

Entries per MAC
Address

Select Inherited to use global value, No Limit to set no limit on the number of entries and
User Defined to set a special value for this policy.

Cisco Business 350 Series Switches Administration Guide

318

Security

Step 6

Step 7

IPv6 Source Guard Settings

Click Apply to add the settings to the Running Configuration file.

To attach this policy to an interface:

Attach Policy to VLAN

Click to jump to Policy Attachment (VLAN), on page 319 page where you can attach this
policy to a VLAN.

Attach Policy to Interface

Click to jump to Policy Attachment (Port), on page 320 page where you can attach this
policy to a port.

IPv6 Source Guard Settings

Use the IPv6 Source Guard Settings page to enable the IPv6 Source Guard feature on a specified group of
VLANs. If required, a policy can be added or the system-defined default IPv6 Source Guard policies can be
configured in this page.

To configure IPv6 Source Guard:

Procedure

Step 1

Click Security > IPv6 First Hop Security > IPv6 Source Guard Settings.

The existing policies are displayed. The fields are displayed below except for the Policy Type field. This displays whether
the policy is user-defined or a default one.

Step 2

Enter the following global configuration fields:

• IPv6 Source Guard VLAN List—Enter one or more VLANs on which IPv6 Source Guard is enabled.

• Port Trust—Displays that by default the policies are for untrusted ports. This can be changed per policy.

Step 3

Step 4

Step 5

Step 6

If required, click Add to create a First Hop Security policy.

Enter the following fields:

• Policy Name—Enter a user-defined policy name.

• Port Trust—Select the port trust status of the policy:

• Inherited—When policy is attached to a port it’s untrusted).

• Trusted—When policy is attached to a port it’s trusted.

Click Apply to attach the policy.

To attach this policy to an interface click Attach Policy to Interface.

Policy Attachment (VLAN)

To attach a policy to one or more VLANs:

Cisco Business 350 Series Switches Administration Guide

319

Policy Attachment (Port)

Procedure

Security

Step 1

Click Security > IPv6 First Hop Security > Policy Attachment (VLAN).

The list of policies that are already attached are displayed along with their Policy Type, Policy Name and VLAN List.

Step 2

To attach a policy to a VLAN, click Add and enter the following fields:

• Policy Type—Select the policy type to attach to the interface.

• Policy Name—Select the name of the policy to attach to the interface.

• VLAN List—Select the VLANs to which the policy is attached.

Step 3

Click Apply to add the settings to the Running Configuration file.

Policy Attachment (Port)

To attach a policy to one or more ports or LAGs:

Procedure

Step 1

Click Security > IPv6 First Hop Security > Policy Attachment (Port).

The list of policies that are already attached are displayed along with their Interface, Policy Type, Policy Name and VLAN
List.

Step 2

To attach a policy to a port or LAG, click Add and enter the following fields:

• Interface—Select the interface on which the policy will be attached.

• Policy Type—Select the policy type to attach to the interface.

• Policy Name—Select the name of the policy to attach to the interface.

• VLAN List—Select the VLANs to which the policy is attached.

Step 3

Click Apply to add the settings to the Running Configuration file.

Neighbor Binding Table

To view entries in the Neighbor Binding table:

Cisco Business 350 Series Switches Administration Guide

320

Security

Procedure

Step 1

Step 2

Neighbor Prefix Table

Click Security > IPv6 First Hop Security > Neighbor Binding Table

Select one of the following clear table options:

• Static Only—Clear all static entries in the table.

• Dynamic Only—Clear all dynamic entries in the table.

• All Dynamic & Static—Clear all dynamic and static entries in the table.

The following fields are displayed for each policy (only fields not on Add page are displayed:

• Origin—Protocol that added the IPv6 address (only available for dynamic entries):

• Static—Added manually.

• NDP—Learnt from Neighbor Discovery Protocol messages

• DHCP—Learnt from DHCPv6 protocol messages

• State—State of the entry:

• Tentative—The new host IPv6 address is under validation. Since its lifetime is less than 1 sec its expiration

time isn’t displayed.

• Valid—The host IPv6 address was bound.

• Expiry Time (Sec.)—Remaining time in seconds until the entry will be removed, if it’s not confirmed.

• TCAM Overflow—Entries marked as No don’t have a TCAM overflow.

Step 3

To add a policy, click Add and enter the following fields:

• VLAN ID—VLAN ID of the entry.

• IPv6 Address—Source IPv6 address of the entry.

• Interface—Port on which packet is received.

• MAC Address—Neighbor MAC address of the packet.

Step 4

Click Apply to add the settings to the Running Configuration file.

Neighbor Prefix Table

You can add static prefixes for global IPv6 addresses bound from NDP messages in the Neighbor Prefix table.
Dynamic entries are learned.

To add entries to the Neighbor Prefix table:

Cisco Business 350 Series Switches Administration Guide

321

FHS Status

Security

Procedure

Step 1

Step 2

Click Security > IPv6 First Hop Security > Neighbor Prefix Table.

Select one of the following options in the Clear Table field to clear the Neighbor Prefix table:

• Static Only—Clear only static entries.

• Dynamic Only—Clear only dynamic entries.

• All Dynamic & Static—Clear static and dynamic entries.

Step 3

The following fields are displayed for the exiting entries:

• VLAN ID—VLAN on which the prefixes are relevant.

• IPv6 Prefix—IPv6 prefix.

• Prefix Length—IPv6 prefix length.

• Origin—Entry is dynamic (learned) or static (manually configured).

• Autoconfig—The prefix can be used for stateless configuration.

• Expiry Time (Sec)—Length of time entry remains before being deleted.

Step 4

Click Add to add a new entry to the table and enter the above fields for the new entry.

FHS Status

Procedure

To display the global configuration for the FHS features:

Step 1

Step 2

Step 3

Click Security > IPv6 First Hop Security > FHS Status.

Select a port, LAG or VLAN for which the FHS state is reported.

The following fields are displayed for the selected interface:

FHS Status

FHS State on Current VLAN

Is FHS enabled on the current VLAN

Packet Drop Logging

Is this feature enabled for the current interface (at the level of global configuration or in
a policy attached to the interface)

RA Guard Status

RA Guard State on Current
VLAN

Is RA Guard enabled on the current VLAN?

Cisco Business 350 Series Switches Administration Guide

322

Security

FHS Status

Device Role

RA device role.

Managed Configuration Flag

Is verification of the managed configuration flag enabled?

Other Configuration Flag

Is verification of the other configuration flag enabled?

RA Address List

RA address list to be matched.

RA Prefix List

RA prefix list to be matched.

Minimal Hop Limit

Is minimum RA hop limit verification enabled?

Maximal Hop Limit

Is maximum RA hop limit verification enabled?

Minimal Router Preference

Is minimum router preference verification enabled?

Maximal Router Preference

Is maximum router preference verification enabled?

DHCPv6 Guard Status

DHCPv6 Guard State on
Current VLAN

Is DHCPv6 Guard enabled on the current VLAN?

Device Role

DHCP device role

Match Reply Prefixes

Is DHCP reply prefixes verification enabled?

Match Server Address

Is DHCP server addresses verification enabled?

Minimal Preference

Is verification of the minimal preference enabled?

Maximal Preference

Is verification of the maximum preference enabled?

ND Inspection Status

ND Inspection State on
Current VLAN

Is ND Inspection enabled on the current VLAN?

Device Role

ND Inspection device role.

Drop Unsecure

Are unsecure messages dropped?

Minimal Security Level

If unsecure messages aren’t dropped, what is the minimum security level for packets to
be forwarded?

Validate Source MAC

Is source MAC address verification enabled?

Neighbor Binding Status

Neighbor Binding State on
Current VLAN

Is Neighbor Binding enabled on the current VLAN?

Device Role

Neighbor Binding device role.

Logging Binding

Is logging of Neighbor Binding table events enabled?

Cisco Business 350 Series Switches Administration Guide

323

FHS Statistics

Security

Address Prefix Validation

Is address prefix validation enabled?

Global Address
Configuration

Which messages are validated?

Max Entries per VLAN

Maximum number of dynamic Neighbor Binding table entries per VLAN allowed.

Max Entries per Interface

Maximum number of Neighbor Binding table entries per interface allowed.

Max Entries per MAC
Address

IPv6 Source Guard Status

IPv6 Source Guard State on
Current VLAN

Maximum number of Neighbor Binding table entries per MAC address allowed.

Is IPv6 Source Guard enabled on the current VLAN?

Port Trust

Whether the port is trusted and how it received its trusted status.

FHS Statistics

To display FHS statistics:

Procedure

Step 1

Step 2

Step 3

Click Security > IPv6 First Hop Security > FHS Statistics.

Select the Refresh Rate, the time period that passes before the statistics are refreshed.

The following global overflow counters are displayed:

Neighbor Binding Table

Number of entries that could not be added to this table because the table reached its
maximum size.

Neighbor Prefix Table

Number of entries that could not be added to this table because the table reached its
maximum size.

TCAM

Number of entries that could not be added because of TCAM overflow.

Step 4

Select an interface and the following fields are displayed:

Cisco Business 350 Series Switches Administration Guide

324

Security

Certificate Settings

NDP (Neighbor Discovery
Protocol) Messages

The number of received and dropped messages are displayed for the following types of
messages:

• RA—Router Advertisement messages

• REDIR—Redirect messages

• NS—Neighbor Solicitation messages.

• NA—Neighbor Advertisement messages.

• RS—Router Solicitation message.

DHCPv6 Messages

The number of received and dropped messages are displayed for the following types of
DHCPv6 messages:

• ADV— Advertise messages

• REP—Reply messages

• REC—Reconfigure messages

• REL-REP—Relay reply messages

• LEAS-REP—Lease query reply messages

• RLS—Released messages

• DEC—Decline messages

The following fields are displayed in the FHS Dropped Message Table

Feature

Count

Reason

Type of message dropped (DHCPv6 Guard, RA Guard and so on).

Number of messages dropped.

Reason that the messages dropped.

Step 5

Step 6

Click Clear Interface Counters or Clear All Interface Counters or Clear Global Counters to clear the counters.

Click Refresh to refresh the counters.

Certificate Settings

The Cisco Business Dashboard Probe (CBD) and Plug-n-Play (PNP) features require CA certificates to
establish HTTPS communication with the CBD or PNP servers. The Certificate Settings feature allows these
applications and device managers to do the following:

• Install trusted CA certificates and to remove certificates that are no longer wanted

• Statically add certificates to device configuration file

• Manage a revocation list of untrusted certificates

Cisco Business 350 Series Switches Administration Guide

325

CA Certificate Setting

Security

Note

The validity of the certificates is based on the system clock. Use the default system clock or it does not provide
proper validation. Therefore, make sure the system clock is based on device Real time clock (if supported)
or was actively set since the last reboot (preferably via SNTP service). If the system clock is not based on
RTC or was not set since last reboot validation of certificate will fail, even if the system clock is within the
validity date of the certificate.

Dynamic Certificates

The CBD and PNP applications can install dynamic trusted certificates to the device memory. The installed
certificate must include the following attributes:

• Certificate name - A string that is used to identify the certificate.

• Owner - The application name that installed the certificate (for example, PNP, CBD)

• The certificate itself in PEM format.

An application can also delete a specific or all dynamic certificates installed by that application.

Considerations

• Up to 512 dynamic certificates can be installed on the device.

• Dynamic certificates are removed when the device reboots

Static Certificates

If an application wants to add a certificate that will not be deleted on reset, or if a user of the switch wants to
add a certificate, they can add a static certificate. These certificates are saved in the device running configuration
and can be copied to the startup configuration.

Adding a static certificate requires providing the following attributes:

• Certificate name - This is a string that is used to identify the certificate.

• Owner - the name of the application that installed the certificate (for example, PNP, CBD), or "static" if

certificate is added by a user.

• The certificate itself in PEM format.

Considerations

• Up to 256 static certificates can be installed on the device.

• It is possible for identical certificates to be added by different applications or users as long as the names

used to identify them are different.

CA Certificate Setting

Users can access information on all installed certificates (dynamic and static). The following information is
displayed per each certificate:

Cisco Business 350 Series Switches Administration Guide

326

Security

Procedure

Step 1

Step 2

Step 3

Step 4

CA Certificate Setting

Click Security > Certificate Settings > CA Certificate Settings.

To import a new certificate, click Add and complete the following:

• Certificate Name—Enter the name of the certificate.

• Certificate—Paste the certificate in PEM format (including the begin and end marker lines).

Click Apply to apply the new settings.

To view the details of an existing certificate, select the certificate from the list and click Details. The following will be
displayed:

Option

Description

Certificate Name

The name or unique identifier of the certificate.

Type

Owner

Version

This can be signer, static or dynamic.

This can be signer, static, CBD or PNP

The version of the certificate.

Serial Number

The serial number of the certificate.

Status

Valid From

Valid To

Issuer

Subject

The status of the certificate.

The date and time from which certificate is valid,

The date and time until which the certificate is valid.

The entity or CA that signed the certificate.

Distinguished name (DN) information for the certificate.

Public Key Type

The type of the public key.

Public Key Length

The length (in bits) of the public key.

Signature Algorithm

The cryptographic algorithm used by the CA to sign the certificate.

Certificate

The certificate details in PEM format.

Step 5

You can use the following filters to find a specific certificate.

• Type equals to—Check this box and select Signer, Static, or Dynamic from the drop-down list, to filter by these

certificate types.

• Owner equals to—Paste the certificate in PEM format (including the begin and end marker lines).

Step 6

To remove one or more certificates select the certificate(s) and press Delete. Only Static certificates can be deleted.

Cisco Business 350 Series Switches Administration Guide

327

Security

CA Revocation List

CA Revocation List

If a certificate becomes untrusted for any reason, it can be added to the revocation list by the user or one of
the applications. If a certificate is included in the revocation list, it is considered non-valid and the device will
not allow it to be used. Adding a certificate to the revocation list will not remove the revoked certificate from
the certificate database. It will only update its status to Not Valid (Revoked). When a certificate is removed
from the revocation list, its status is automatically updated in the certificate database. There is no need to
re-install it.

To add or remove a certificate to/from the revocation list, complete the following:

Procedure

Step 1

Step 2

Step 3

Click Security > Certificate Settings > CA Certificate Revocation List.

Click Add to open the Add Revoked Certificate dialog box

Provide the following details:

• Issuer—The string identifying the issuer (for example: "C=US, O=MyTrustOrg, CN=MyCommonName") (0-160

chars).

• Serial Number—The serial number of the revoked certificate. This is a string of hexadecimal pairs (length 2-40).

Step 4

Click Apply to add the certificate.

Considerations

• Up to 512 certificates can be added to the revocation list.

• All certificates that match the entry in the revocation list are considered not valid (even if they are identified under

different names in the certificate database).

Step 5

To delete an existing certificate, select the certificate from the Revoked CA Certificate Table and click Delete.

Cisco Business 350 Series Switches Administration Guide

328

C H A P T E R 18

Access Control

The Access Control List (ACL) feature is part of the security mechanism. ACL definitions serve as one of
the mechanisms to define traffic flows that are given a specific Quality of Service (QoS). For more information
see Quality of Service. ACLs enable network managers to define patterns (filter and actions) for ingress traffic.
Packets, entering the device on a port or LAG with an active ACL, are either admitted or denied entry. This
chapter contains the following sections:

• MAC-Based ACL, on page 329
• MAC-based ACE, on page 330
• IPv4-based ACL, on page 331
• IPv4-Based ACE, on page 331
• IPv6-Based ACL, on page 335
• IPv6-Based ACE, on page 336
• ACL Binding (VLAN), on page 338
• ACL Binding (Port), on page 339

MAC-Based ACL

MAC-based ACLs are used to filter traffic based on Layer 2 fields. MAC-based ACLs check all frames for
a match. To define a MAC-based ACL follow these steps:

Procedure

Step 1

Click Access Control > MAC-Based ACL.

This page contains a list of all currently defined MAC-based ACLs.

Step 2

Step 3

Step 4

Click Add.

Enter the name of the new ACL in the ACL Name field. ACL names are case-sensitive.

Click Apply. The MAC-based ACL is saved to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

329

MAC-based ACE

MAC-based ACE

Access Control

Note

Each MAC-based rule consumes one TCAM rule. The TCAM allocation is performed in couples, such that,
for the first ACE, 2 TCAM rules are allocated and the second TCAM rule is allocated to the next ACE, and
so forth.

To add rules (ACEs) to an ACL, complete the following steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click Access Control > Mac-Based ACE.

Select an ACL, and click Go. The ACEs in the ACL are listed.

Click Add.

Enter the parameters.

• ACL Name—Displays the name of the ACL to which an ACE is being added.

• Priority—Enter the priority of the ACE. ACEs with higher priority are processed first. One is the highest priority.

• Action—Select the action taken upon a match. The options are:

• Permit—Forward packets that meet the ACE criteria.

• Deny—Drop packets that meet the ACE criteria.

• Shutdown—Drop packets that meet the ACE criteria, and disable the port from where the packets received.

• Logging—Select to enable logging ACL flows that match the ACL rule.

• Time Range—Select to enable limiting the use of the ACL to a specific time range.

• Time Range Name—If Time Range is selected, select the time range to be used. Click Edit to revise the time range.

• Destination MAC Address—Select Any if all destination addresses are acceptable or User defined to enter a destination

address or a range of destination addresses.

• Destination MAC Address Value—Enter the MAC address to which the destination MAC address is to be matched

and its mask (if relevant).

• Destination MAC Wildcard Mask—Enter the mask to define a range of MAC addresses. This mask is different than
in other uses, such as subnet mask. Here, setting a bit as 1 indicates don't care and 0 indicates to match that value.

Note
Given a mask of 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 1111 1111 (which means that you match
on the bits where there are 0's and ignore the bits where there are 1's): You need to translate the binary value to
hexadecimal (four bits per hex digit). In this example, since 1111 1111 = FF, the mask would be written as
00:00:00:00:00:FF.

Cisco Business 350 Series Switches Administration Guide

330

Access Control

IPv4-based ACL

• Source MAC Address—Select Any if all source addresses are acceptable or User defined to enter a source address

or range of source addresses.

• Source MAC Address Value—Enter the MAC address to which the source MAC address is to be matched and its

mask (if relevant).

• Source MAC Wildcard Mask—Enter the mask to define a range of MAC addresses.

• VLAN ID—Enter the VLAN ID section of the VLAN tag to match.

• 802.1p—Select Include to use 802.1p.

• 802.1p Value—Enter the 802.1p value to be added to the VPT tag.

• 802.1p Mask—Enter the wildcard mask to be applied to the VPT tag.

• Ethertype—Enter the frame Ethertype to be matched.

Step 5

Click Apply. The MAC-based ACE is saved to the Running Configuration file.

IPv4-based ACL

ACLs are also used as the building elements of flow definitions for per-flow QoS handling. IPv4-based ACLs
are used to check IPv4 packets. To define an IPv4-based ACL, follow these steps:

Procedure

Step 1

Click Access Control > IPv4-Based ACL.

This page contains all currently defined IPv4-based ACLs.

Step 2

Step 3

Step 4

Click Add.

Enter the name of the new ACL in the ACL Name field. The names are case-sensitive.

Click Apply. The IPv4-based ACL is saved to the Running Configuration file.

IPv4-Based ACE

Note

Each IPv4-based rule consumes one TCAM rule. The TCAM allocation is performed in couples, such that,
for the first ACE. Two TCAM rules are allocated and the second TCAM rule is allocated to the next ACE,
and so forth.

To add rules (ACEs) to an IPv4-based ACL, follow these steps:

Cisco Business 350 Series Switches Administration Guide

331

IPv4-Based ACE

Access Control

Procedure

Step 1

Step 2

Step 3

Step 4

Click Access Control > IPv4-Based ACE.

Select an ACL, and click Go. All currently-defined IP ACEs for the selected ACL are displayed.

Click Add.

Enter the parameters.

ACL Name

Displays the name of the ACL to which an ACE is being added.

Priority

Action

Enter the priority. ACEs with higher priority are processed first.

Select the action assigned to the packet matching the ACE from the following options:

• Permit—Forward packets that meet the ACE criteria.

• Deny—Drop packets that meet the ACE criteria.

• Shutdown—Drop packets that meet the ACE criteria, and disable the port to which
the packets addressed. Ports are reactivated on the Error Recovery Settings, on page
122 page.

Logging

Select to enable logging ACL flows that match the ACL rule.

Time Range

Select to enable limiting the use of the ACL to a specific time range

Time Range Name

If Time Range is selected, click the Edit button to be redirected to the time range page
and select the time range name to be used. Time ranges are described in the System Time,
on page 64 section.

Cisco Business 350 Series Switches Administration Guide

332

Access Control

IPv4-Based ACE

Protocol

Select to create an ACE based on a specific protocol or protocol ID. Select Any (IPv4)
to accept all IP protocols. Otherwise select one of the following protocols:

• ICMP—Internet Control Message Protocol

• IGMP—Internet Group Management Protocol

• IP in IP—IP in IP encapsulation

• TCP—Transmission Control Protocol

• EGP—Exterior Gateway Protocol

• IGP—Interior Gateway Protocol

• UDP—User Datagram Protocol

• HMP—Host-Mapping Protocol

• RDP—Reliable Datagram Protocol.

• IDPR—Inter-Domain Policy Routing Protocol

• IPV6—IPv6 over IPv4 tunneling

• IPV6:ROUT—Matches packets belonging to the IPv6 over IPv4 route through a

gateway

• IPV6:FRAG—Matches packets belonging to the IPv6 over IPv4 Fragment Header

• IDRP—Inter-Domain Routing Protocol

• RSVP—ReSerVation Protocol

• AH—Authentication Header

• IPV6:ICMP—Internet Control Message Protocol

• EIGRP—Enhanced Interior Gateway Routing Protocol

• OSPF—Open Shortest Path First

• IPIP—IP in IP

• PIM—Protocol Independent Multicast

• L2TP—Layer 2 Tunneling Protocol

• ISIS—IGP-specific protocol

• Protocol ID to Match—Instead of selecting the name, enter the protocol ID.

Source IP Address

Select Any if all source addresses are acceptable or User defined to enter a source address
or range of source addresses.

Source IP Address Value

Enter the IP address to which the source IP address is to be matched and its mask (if
relevant).

Cisco Business 350 Series Switches Administration Guide

333

IPv4-Based ACE

Access Control

Source IP Wildcard Mask

Enter the mask to define a range of IP addresses. This mask is different than in other uses,
such as subnet mask. Here, setting a bit as 1 indicates don't care and 0 indicates to mask
that value.

Note
Given a mask of 0000 0000 0000 0000 0000 0000 1111 1111, you need to translate the
1's to a decimal integer and you write 0 for every four zeros. In this example since 1111
1111 = 255, the mask would be written: as 0.0.0.255.

Destination IP Address

Select Any if all destination addresses are acceptable or User defined to enter a destination
address or a range of destination addresses.

Destination IP Address
Value

Enter the IP address to which the destination MAC address is matched and its mask (if
relevant).

Destination IP Wildcard
Mask

Enter the destination IP wildcard mask.

Source Port

Select one of the following

• Any—Match to all source ports.

• Single from list—Select a single TCP/UDP source port to which packets are matched.
This field is active only if 800/6-TCP or 800/17-UDP is selected in the IP Protocol
drop-down menu.

• Single by number—Enter a single TCP/UDP source port to which packets are

matched. This field is active only if 800/6-TCP or 800/17-UDP is selected in the IP
Protocol drop-down menu.

• Range—Enter a range from 0 - 65535.

Destination Port

Select one of the available values. They are the same as for the Source Port field described
above.

Note
You must specify the IPv6 protocol for the ACL before you can configure the source
and/or destination port.

TCP Flags

Select one or more TCP flags with which to filter packets. Filtered packets are either
forwarded or dropped. Filtering packets by TCP flags increases packet control, which
increases network security. For each type of flag, select one of the following options:

• Set—Match if the flag is SET.

• Unset—Match if the flag is Not SET.

• Don’t care—Ignore the TCP flag.

Cisco Business 350 Series Switches Administration Guide

334

Access Control

IPv6-Based ACL

Type of Service

The service type of the IP packet.

• Any—Any service type

• DSCP to match—Differentiated Serves Code Point (DSCP) to match.

• IP Precedence to match—IP precedence is a model of TOS (type of service) that the
network uses to help provide the appropriate QoS commitments. This model uses
the 3 most significant bits of the service type byte in the IP header, as described in
RFC 791 and RFC 1349.

ICMP

If the ACL is based on ICMP, select the ICMP message type that is used for filtering
purposes. Either select the message type by name or enter the message type number. If
all message types are accepted, select Any.

• Any—All message types are accepted.

• Select from list—Select message type by name from the drop-down list.

• ICMP Type to Match—Number of message types that is to be used for filtering

purposes.

ICMP Code

The ICMP messages may have a code field that indicates how to handle the message.
Select one of the following options, to configure whether to filter on this code:

• Any—Accept all codes.

• User Defined—Enter an ICMP code for filtering purposes.

IGMP

If the ACL is based on IGMP, select the IGMP message type to be used for filtering
purposes. Either select the message type by name or enter the message type number:

• Any—All message types are accepted.

• Select from list—Select message type by name.

• IGMP Type to match—Number of message type that is to be used for filtering

purposes.

Step 5

Click Apply. The IPv4-based ACE is saved to the Running Configuration file.

IPv6-Based ACL

The IPv6 based ACL check the IPv6-based traffic. ACLs are also used as the building elements of flow
definitions for per-flow QoS handling. To define an IPv6-based ACL, follow these steps:

Procedure

Step 1

Click Access Control > IPv6-Based ACL.

Cisco Business 350 Series Switches Administration Guide

335

IPv6-Based ACE

Access Control

This window contains the list of defined ACLs and their contents.

Step 2

Step 3

Step 4

Click Add.

Enter the name of a new ACL in the ACL Name field. The names are case-sensitive.

Click Apply. The IPv6-based ACL is saved to the Running Configuration file.

IPv6-Based ACE

Note

Each IPv6-based rule consumes two TCAM rules.

To define an IPv6-based ACL, follow these steps:

Procedure

Step 1

Click Access Control > IPv6-Based ACE.

This window contains the ACE (rules) for a specified ACL (group of rules).

Step 2

Step 3

Step 4

Select an ACL, and click Go. All currently-defined IP ACEs for the selected ACL are displayed.

Click Add.

Enter the parameters.

ACL Name

Displays the name of the ACL to which an ACE is being added.

Priority

Action

Enter the priority. ACEs with higher priority are processed first.

Select the action assigned to the packet matching the ACE from the following options:

• Permit—Forward packets that meet the ACE criteria.

• Deny—Drop packets that meet the ACE criteria.

• Shutdown—Drop packets that meet the ACE criteria, and disable the port to which
the packets addressed. Ports are reactivated on the Error Recovery Settings, on page
122 page.

Logging

Select to enable logging ACL flows that match the ACL rule.

Time Range

Select to enable limiting the use of the ACL to a specific time range

Time Range Name

If Time Range is selected, click the Edit button to be redirected to the time range page
and select the time range name to be used. Time ranges are described in the System Time,
on page 64 section.

Cisco Business 350 Series Switches Administration Guide

336

Access Control

IPv6-Based ACE

Protocol

Select to create an ACE based on a specific protocol from the following options:

• Any (IPv6)—All source IPv6 addresses apply to the ACE

• TCP—Transmission Control Protocol Enables two hosts to communicate and

exchange data streams TCP guarantees packet delivery, and guarantees that packets
are transmitted and received in the order they sent.

• UDP—User Datagram Protocol Transmits packets but doesn’t guarantee their

delivery.

• ICMP—Matches packets to the Internet Control Message Protocol (ICMP).

Or

• Protocol ID to Match—Enter the ID of the protocol to be matched.

Source IP Address

Select Any if all source addresses are acceptable or User defined to enter a source address
or range of source addresses.

Source IP Address Value

Enter the IP address to which the source IP address is to be matched and its mask (if
relevant).

Source IP Prefix Length

Enter the prefix length of the source IP address.

Destination IP Address

Select Any if all destination addresses are acceptable or User defined to enter a destination
address or a range of destination addresses.

Destination IP Address
Value

Enter the IP address to which the destination MAC address is matched and its mask (if
relevant).

Destination IP Prefix Length

Enter the prefix length of the IP address.

Source Port

Select one of the following

• Any—Match to all source ports.

• Single from list—Select a single TCP/UDP source port to which packets are matched.
This field is active only if 800/6-TCP or 800/17-UDP is selected in the IP Protocol
drop-down menu.

• By number—Enter a single TCP/UDP source port to which packets are matched.

This field is active only if 800/6-TCP or 800/17-UDP is selected in the IP Protocol
drop-down menu.

Destination Port

Select one of the available values. They are the same as for the Source Port field described
above.

Note
You must specify the IPv6 protocol for the ACL before you can configure the source
and/or destination port.

Flow Label

Classifies IPv6 traffic based on a IPv6 Flow label field. This is a 20-bit field that is part
of the IPv6 packet header. An IPv6 flow label can be used by a source station to label a
set of packets belonging to the same flow. Select Any if all flow labels are acceptable or
select User defined and then enter a specific flow label to be accepted by the ACL.

Cisco Business 350 Series Switches Administration Guide

337

ACL Binding (VLAN)

Access Control

TCP Flags

Select one or more TCP flags with which to filter packets. Filtered packets are either
forwarded or dropped. Filtering packets by TCP flags increases packet control, which
increases network security. For each type of flag, select one of the following options:

• Set—Match if the flag is SET.

• Unset—Match if the flag is Not SET.

• Don’t care—Ignore the TCP flag.

Type of Service

The service type of the IP packet.

• Any—Any service type

• DSCP to match—Differentiated Serves Code Point (DSCP) to match.

• IP Precedence to match—IP precedence is a model of TOS (type of service) that the
network uses to help provide the appropriate QoS commitments. This model uses
the 3 most significant bits of the service type byte in the IP header, as described in
RFC 791 and RFC 1349.

ICMP

If the ACL is based on ICMP, select the ICMP message type that is used for filtering
purposes. Either select the message type by name or enter the message type number. If
all message types are accepted, select Any.

• Any—All message types are accepted.

• Select from list—Select message type by name from the drop-down list.

• ICMP Type to Match—Number of message types that is to be used for filtering

purposes.

ICMP Code

The ICMP messages may have a code field that indicates how to handle the message.
Select one of the following options, to configure whether to filter on this code:

• Any—Accept all codes.

• User Defined—Enter an ICMP code for filtering purposes.

Step 5

Click Apply.

ACL Binding (VLAN)

When an ACL is bound to an interface, its ACE rules are applied to packets arriving at that interface. Packets
that do not match any of the ACEs in the ACL are matched to a default rule, whose action is to drop unmatched
packets. Although each interface can be bound to only one ACL, multiple interfaces can be bound to the same
ACL by grouping them into a policy-map, and binding that policy-map to the interface. After an ACL is bound
to an interface, it cannot be edited, modified, or deleted until it is removed from all the ports to which it is
bound or in use.

Cisco Business 350 Series Switches Administration Guide

338

Access Control

ACL Binding (Port)

Note

It is possible to bind an interface (port, LAG or VLAN) to a policy or to an ACL, but they cannot be bound
to both a policy and an ACL. In the same class map, a MAC ACL cannot be used with an IPv6 ACE that has
a Destination IPv6 address as a filtering condition.

To bind an ACL to a VLAN, follow these steps:

Procedure

Step 1

Step 2

Click Access Control > ACL Binding (VLAN).

Select a VLAN and click Edit.

If the VLAN you require is not displayed, add a new one.

Step 3

Select one of the following:

MAC-Based ACL

Select a MAC-based ACL to be bound to the interface.

IPv4-Based ACL

Select an IPv4-based ACL to be bound to the interface.

IPv6-Based ACL

Select an IPv6-based ACL to be bound to the interface.

Default Action

Select one of the following options:

• Deny Any—If packet doesn’t match an ACL, it’s denied (dropped).

• Permit Any—If packet doesn’t match an ACL, it’s permitted (forwarded).

Note
Default Action can be defined only if IP Source Guard isn’t activated on the interface.

Step 4

Click Apply. The ACL binding is modified, and the Running Configuration file is updated.

Note

If no ACL is selected, the ACL(s) that is previously bound to the VLAN are unbound.

ACL Binding (Port)

Access Control List (ACL) is a list of permissions applied on a port that filters the stream of packets transmitted
to the port. A port can be bound with either a policy or an ACL, but not both. To bind an ACL to a port or
LAG, follow these steps:

Cisco Business 350 Series Switches Administration Guide

339

ACL Binding (Port)

Access Control

Procedure

Step 1

Step 2

Step 3

Click Access Control > ACL Binding (Port).

Select an interface type Ports/LAGs (Port or LAG).

Click Go. For each type of interface selected, all interfaces of that type are displayed with a list of their current ACLs
(for Input ACLs and Output ACLs):

Interface

MAC ACL

IPv4 ACL

IPv6 ACL

Identifier of interface on which ACL is defined.

ACLs of type MAC that are bound to the interface (if any).

ACLs of type IPv4 that are bound to the interface (if any).

ACLs of type IPv6 that are bound to the interface (if any).

Default Action

Action of the ACL’s rules (drop any/permit any).

Step 4

Step 5

Step 6

To unbind all ACLs from an interface, select the interface, and click Clear.

Select an interface, and click Edit.

Enter the following for both the Input ACL and Output ACL:

MAC-Based ACL

Select a MAC-based ACL to be bound to the interface.

IPv4-Based ACL

Select an IPv4-based ACL to be bound to the interface.

IPv6-Based ACL

Select an IPv6-based ACL to be bound to the interface.

Default Action

Select one of the following options:

• Deny Any—If packet doesn’t match an ACL, it’s denied (dropped).

• Permit Any—If packet doesn’t match an ACL, it’s permitted (forwarded).

Note
Default Action can be defined only if IP Source Guard isn’t activated on the interface.

Step 7

Click Apply. The ACL binding is modified, and the Running Configuration file is updated.

Note
If no ACL is selected, the ACL(s) that is previously bound to the interface are unbound.

Cisco Business 350 Series Switches Administration Guide

340

C H A P T E R 19

Quality of Service

The Quality of Service feature is applied throughout the network to ensure that network traffic is prioritized
according to required criteria and that the desired traffic receives preferential treatment. This chapter contains
the following sections:

• General, on page 341
• QoS Basic Mode, on page 350
• QoS Advanced Mode, on page 352
• QoS Statistics, on page 360

General

Quality of Service (QoS) is a feature on the switch which prioritizes traffic resulting in a performance
improvement for critical network traffic. QoS varies by switch, as the higher the level switch, the higher the
network application layer it works with. The number of queues differ, as well as the kind of information used
to prioritize.

QoS Properties

Quality of Service (QoS) prioritizes the traffic flow based on the type of traffic and can be applied to prioritize
traffic for latency-sensitive applications (such as voice or video) and to control the impact of latency-insensitive
traffic.

To configure QoS properties, follow these steps:

Procedure

Step 1

Step 2

Click Quality of Service > General > QoS Properties.

Set the QoS mode. The following options are available:

• Disable—QoS is disabled on the device.

• Basic—QoS is enabled on the device in Basic mode.

• Advanced—QoS is enabled on the device in Advanced mode.

Cisco Business 350 Series Switches Administration Guide

341

Queues

Quality of Service

Step 3

Select Port/LAG and click GO to display/modify all ports/LAGs on the device and their CoS information.

The following fields are displayed for all ports/LAGs:

• Interface—Type of interface.

• Default CoS—Default VPT value for incoming packets that do not have a VLAN Tag. The default CoS is 0.

Step 4

Click Apply. The Running Configuration file is updated.

To set QoS on an interface, select it, and click Edit.

Step 5

Enter the parameters.

• Interface—Select the port or LAG.

• Default CoS—Select the default CoS (Class-of-Service) value to be assigned for incoming packets (that do not have

a VLAN tag).

Step 6

Click Apply. The interface default CoS value is saved to Running Configuration file.

To restore the default CoS values, click Restore CoS Defaults.

Queues

The device supports 8 queues for each interface. Queue number eight is the highest priority queue. Queue
number one is the lowest priority queue.

There are two ways of determining how traffic in queues is handled, Strict Priority and Weighted Round
Robin (WRR).

• Strict Priority—Egress traffic from the highest-priority queue is transmitted first. Traffic from the lower
queues is processed only after the highest queue has been transmitted, thus providing the highest level
of priority of traffic to the highest numbered queue.

• Weighted Round Robin (WRR)—In WRR mode the number of packets sent from the queue is proportional
to the weight of the queue (the higher the weight the more frames are sent). For example, if there are a
maximum of four queues possible and all four queues are WRR and the default weights are used, queue 1
receives 1/15 of the bandwidth (assuming all queues are saturated and there’s congestion), queue 2
receives 2/15, queue 3 receives 4/15 and queue 4 receives 8 /15 of the bandwidth. The type of WRR
algorithm used in the device isn’t the standard Deficit WRR (DWRR), but rather Shaped Deficit WRR
(SDWRR).

The queuing modes can be selected in the Queue page. When the queuing mode is by strict priority, the priority
sets the order in which queues are serviced, starting with the highest priority queue and going to the next
lower queue when each queue is completed.

When the queuing mode is Weighted Round Robin, queues are serviced until their quota has been used up
and then another queue is serviced. It’s also possible to assign some of the lower queues to WRR, while
keeping some of the higher queues in strict priority. In this case traffic for the strict-priority queues is always
sent before traffic from the WRR queues. Only after the strict-priority queues have been emptied is traffic
from the WRR queues forwarded. (The relative portion from each WRR queue depends on its weight).

To select the priority method and enter WRR data, complete the following steps:

Cisco Business 350 Series Switches Administration Guide

342

Quality of Service

CoS/802.1p to a Queue

Procedure

Step 1

Step 2

Click Quality of Service > General > Queue.

Enter the parameters.

• Queue—Displays the queue number.

• Scheduling Method—Select one of the following options:

• Strict Priority—Traffic scheduling for the selected queue and all higher queues is based strictly on the queue

priority.

• WRR—Traffic scheduling for the selected queue is based on WRR. The period time is divided between the
WRR queues that aren’t empty, meaning they have descriptors to egress. This division happens only if the
strict-priority queues are empty.

• WRR Weight—If WRR is selected, enter the WRR weight assigned to the queue.

• % of WRR Bandwidth—Displays the amount of bandwidth assigned to the queue. These values represent the

percent of the WRR weight.

Step 3

Click Apply. The queues are configured, and the Running Configuration file is updated.

CoS/802.1p to a Queue

The CoS/802.1p to Queue page maps 802.1p priorities to egress queues. The CoS/802.1p to Queue Table
determines the egress queues of the incoming packets based on the 802.1p priority in their VLAN Tags. For
incoming untagged packets, the 802.1p priority is the default CoS/802.1p priority assigned to the ingress ports.

The following table describes the default mapping when there are 8 queues:

802.1p Values (0-7,7 being the
highest)

Queue (8 queues 1-8,8 is the highest
priority)

7 Queues

0

1

2

3

4

5

6

7

1

2

3

6

5

8

8

7

1

1

2

5

4

7

7

6

Notes

Background

Best Effort

Excellent Effort

Critical Application - LVS phone
SIP

Video

Voice - Cisco IP phone default

Interwork Control LVS phone RTP

Network Control

Cisco Business 350 Series Switches Administration Guide

343

DSCP to Queue

Quality of Service

By changing the CoS/802.1p to Queue mapping (CoS/802.1p to Queue) and the Queue schedule method and
bandwidth allocation, it’s possible to achieve the desired quality of service in a network.

The CoS/802.1p to Queue mapping is applicable only if one of the following exists:

• The device is in QoS Basic mode and CoS/802.1p trusted mode.

• The device is in QoS Advanced mode and the packets belong to flows that are CoS/802.1p trusted.

To map CoS values to egress queues, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click Quality of Service > General > CoS/802.1p to Queue.

Enter the parameters.

• 802.1p—Displays the 802.1p priority tag values to be assigned to an egress queue, where 0 is the lowest and 7 is

the highest priority.

• Output Queue—Select the egress queue to which the 802.1p priority is mapped. Either four or eight egress queues
are supported, where Queue 4 or Queue 8 is the highest priority egress queue and Queue 1 is the lowest priority.

For each 802.1p priority, select the Output Queue to which it is mapped.

Click Apply, Cancel or Restore Defaults. 801.1p priority values to queues are mapped, and the Running Configuration
file is updated, the changes that entered are canceled, or previously defined values are restored.

DSCP to Queue

The DSCP (IP Differentiated Services Code Point) to Queue page maps DSCP values to egress queues. The
DSCP to Queue Table determines the egress queues of the incoming IP packets based on their DSCP values.
The original VPT (VLAN Priority Tag) of the packet is unchanged.

By simply changing the DSCP to Queue mapping and the Queue schedule method and bandwidth allocation,
it’s possible to achieve the desired quality of services in a network.

The DSCP to Queue mapping is applicable to IP packets if:

• The device is in QoS Basic mode and DSCP is the trusted mode.

• The device is in QoS Advanced mode and the packets belongs to flows that are DSCP trusted.

Non-IP packets are always classified to the best-effort queue.

The following tables describe the default DSCP to queue mapping for an 8-queue system where 7 is highest
and 8 is used for stack control purposes.

DSCP

Queue

DSCP

63

6

62

55

6

54

47

7

46

39

5

38

31

4

30

23

3

22

15

2

14

7

1

6

Cisco Business 350 Series Switches Administration Guide

344

Quality of Service

DSCP to Queue

Queue

DSCP

Queue

DSCP

Queue

DSCP

Queue

DSCP

Queue

DSCP

Queue

DSCP

Queue

6

61

6

60

6

59

6

58

6

57

6

56

6

6

53

6

52

6

51

6

50

6

49

6

48

6

7

45

7

44

7

43

7

42

7

41

7

40

6

5

37

5

36

5

35

5

34

5

33

5

32

7

4

29

4

28

4

27

4

26

4

25

4

24

6

3

21

3

20

3

19

3

18

3

17

3

16

6

2

13

2

12

2

11

2

10

2

9

2

8

1

1

5

1

4

1

3

1

2

1

1

1

0

1

The following tables describe the default DSCP to queue mapping for an 8-queue system where 8 is highest:

DSCP

Queue

DSCP

Queue

DSCP

Queue

DSCP

Queue

DSCP

Queue

DSCP

Queue

DSCP

Queue

DSCP

63

7

62

7

61

7

60

7

59

7

58

7

57

7

56

55

7

54

7

53

7

52

7

51

7

50

7

49

7

48

47

8

46

8

45

8

44

8

43

8

42

8

41

8

40

39

6

38

6

37

6

36

6

35

6

34

6

33

6

32

31

5

30

5

29

5

28

5

27

5

26

5

25

5

24

23

4

22

4

21

4

20

4

19

4

18

4

17

4

16

15

3

14

3

13

3

12

3

11

3

10

3

9

3

8

7

1

6

1

5

1

4

1

3

1

2

1

1

1

0

Cisco Business 350 Series Switches Administration Guide

345

Quality of Service

Queue

7

7

7

8

7

7

1

2

To map DSCP to queues, follow these steps:

Bandwidth

Procedure

Step 1

Click Quality of Service > General > DSCP to Queue.

The DSCP to Queue page contains Ingress DSCP. It displays the DSCP value in the incoming packet and its associated
class.

Step 2

Step 3

Select the Output Queue (traffic forwarding queue) to which the DSCP value is mapped.

Click Apply. The Running Configuration file is updated. Click Restore Defaults to restore the default settings.

Bandwidth

Procedure

Note

This setting is only available in the Advanced Setting view.

The Bandwidth page displays bandwidth information for each interface. To view the bandwidth information,
complete the following steps:

Step 1

Click Quality of Service > General > Bandwidth.

The fields in this page are described in the Edit page below, except for the following fields:

• Ingress Rate Limit:

• Status—Displays whether Ingress Rate Limit is enabled.

• Rate Limit (KBits/sec)—Displays the ingress rate limit for the port.

• %—Displays the ingress rate limit for the port divided by the total port bandwidth.

• CBS (Bytes)—Maximum burst size of data for the ingress interface in bytes of data

• Egress Shaping Rates:

• Status—Displays whether Egress Shaping Rates is enabled.

• CIR (KBits/sec)—Displays the maximum bandwidth for the egress interface.

• CBS (Bytes)—Maximum burst size of data for the egress interface in bytes of data

Step 2

Select an interface, and click Edit.

Cisco Business 350 Series Switches Administration Guide

346

Quality of Service

Egress Shaping per Queue

Step 3

Step 4

Select the Port or LAG interface.

Enter the fields for the selected interface:

Option

Ingress Rate Limit

Description

Select to enable the ingress rate limit, which is defined in the field below. (Not
relevant for LAGs).

Ingress Rate Limit (Kbits per sec)

Enter the maximum amount of bandwidth allowed on the interface. (Not relevant
for LAGs).

Ingress Committed Burst Size (CBS)

Enter the maximum burst size of data for the ingress interface in bytes of data.
This amount can be sent even if it temporarily increases the bandwidth beyond
the allowed limit. This field is only available if the interface is a port. (Not
relevant for LAGs).

Egress Shaping Rate

Select to enable egress shaping on the interface.

Committed Information Rate (CIR)

Enter the maximum bandwidth for the egress interface.

Egress Committed Burst Size (CBS)

Enter the maximum burst size of data for the egress interface in bytes of data.
This amount can be sent even if it temporarily increases the bandwidth beyond
the allowed limit.

Step 5

Click Apply. The bandwidth settings are written to the Running Configuration file.

Egress Shaping per Queue

This setting is only available in the Advanced Setting view.

In addition to limiting transmission rate per port, which is done in the Bandwidth page, the device can limit
the transmission rate of selected egressing frames on a per-queue per-port basis. Egress rate limiting is
performed by shaping the output load.

The device limits all frames except for management frames. Any frames that aren’t limited are ignored in the
rate calculations, meaning that their size isn’t included in the limit total.

To configure the egress shaping per queue, complete the following steps:

Procedure

Step 1

Click Quality of Service > General > Egress Shaping per Queue.

The Egress Shaping Per Queue page displays the rate limit (CIR) and burst size (CBS) for each queue.

Step 2

Step 3

Select an interface type (Port or LAG), and click Go.

Select a Port/LAG, and click Edit.

This page enables shaping the egress for up to eight queues on each interface.

Step 4

Select the Interface.

Cisco Business 350 Series Switches Administration Guide

347

VLAN Ingress Rate Limit

Quality of Service

Step 5

For each queue that is required, enter the following fields:

• Enable Shaping—Select to enable egress shaping on this queue.

• Committed Information Rate (CIR)—Enter the maximum rate (CIR) in Kbits per second (Kbps). CIR is the average

maximum amount of data that can be sent.

• Committed Burst Size (CBS)—Enter the maximum burst size (CBS) in bytes. CBS is the maximum burst of data

allowed to be sent even if a burst exceeds CIR.

Step 6

Click Apply. The bandwidth settings are written to the Running Configuration file.

VLAN Ingress Rate Limit

This setting is only available in the Advanced Setting view.

Rate limiting per VLAN, performed in the VLAN Ingress Rate Limit page, enables traffic limiting on VLANs.
When VLAN ingress rate limiting is configured, it limits aggregate traffic from all the ports on the device.

The following constraints apply to rate limiting per VLAN:

• It has lower precedence than any other traffic policing defined in the system. For example, if a packet is
subject to QoS rate limits but is also subject to VLAN rate limiting, and the rate limits conflict, the QoS
rate limits take precedence.

• It’s applied at the device level and within the device at the packet processor level. If there’s more than

one packet processor on the device, the configured VLAN rate limit value is applied to each of the packet
processors, independently. Devices with up to 24 ports have a single packet processor, while devices of
48 ports or more have two packet processors.

Rate limiting is calculated separately for each packet processor in a unit.

To define the VLAN ingress rate limit, complete the following steps:

Procedure

Step 1

Click Quality of Service > General > VLAN Ingress Rate Limit.

This page displays the VLAN Ingress Rate Limit Table.

Step 2

Step 3

Click Add.

Enter the parameters.

• VLAN ID—Select a VLAN.

• Committed Information Rate (CIR)—Enter the average maximum amount of data that can be accepted into the

VLAN in Kilobits per second.

• Committed Burst Size (CBS)—Enter the maximum burst size of data for the egress interface in bytes of data. This
amount can be sent even if it temporarily increases the bandwidth beyond the allowed limit. Can’t be entered for
LAGs.

Cisco Business 350 Series Switches Administration Guide

348

Quality of Service

iSCSI

Step 4

Click Apply. The VLAN rate limit is added, and the Running Configuration file is updated.

iSCSI

Procedure

Step 1

Step 2

Step 3

This setting is only available in the Advanced Setting view.

This page enables activating iSCSI optimization, which means setting up a mechanism for giving priority to
iSCSI traffic over other types of traffic. If this feature is enabled on a device, iSCSI traffic on any interface
will be assigned the defined priority, and iSCSI traffic won’t be subject to ACL or Policy rules set on interface.

iSCSI traffic is identified by the TCP port on which iSCSI targets listen to requests and optionally also by the
IPv4 address on which iSCSI targets listen to requests. Two iSCSI IPv4 flows with well-known TCP ports
3260 and 860 are defined by default on device. iSCSI flow optimization is bi-directional, which means that
it’s applied to streams in both directions – from and to targets.

To enable and configure the mechanism for prioritizing and, optionally, marking iSCSI traffic, complete the
following steps:

Click Quality of Service > General > iSCSI.

Check Enable in the iSCSI Status field to enable processing iSCSI traffic on the device.

Enter the fields under Quality of Service Settings:

• VPT Assignment—Select either Unchanged to leave the original VLAN Priority Tag (VPT) value in the packet or

enter a new value in the Reassigned field.

• DSCP Assignment—Select either Unchanged to leave the original DSCP value in the packet or enter a value in the

Reassigned field.

• Queue Assignment—Enter the Queue assignment for iSCSI traffic. By default it’s assigned to Queue 7.

Step 4

Click Apply to save the settings.

The iSCSI Flow Table displays the various iSCSI flows that have been defined.Two iSCSI flows, with well-known TCP
ports 3260 and 860, are displayed. The Flow Type of these flows is Default. If you add a new flow, its Flow Type is
Static.

To add a new flow:

Step 5

Click Add and enter the following fields:

• TCP Port—This is the TCP port number on which the iSCSI target listens to requests. You can configure up to 8

target TCP ports on the switch.

• Target IP Address—Specifies the IP address of the iSCSI target (where data is stored). This is also the source of the
iSCSI traffic. You can select Any to define a flow according to the TCP port parameter, or enter an IP address in
User-Defined field to define a specific target address.

Step 6

Click Apply to save the settings.

Cisco Business 350 Series Switches Administration Guide

349

TCP Congestion Avoidance

Quality of Service

Click Restore Default Flows to restore the default flows.

TCP Congestion Avoidance

This setting is only available in the Advanced Setting view.

The TCP Congestion Avoidance page enables activating a TCP congestion avoidance algorithm. The algorithm
breaks up or avoids TCP global synchronization in a congested node, where the congestion is due to various
sources sending packets with the same byte count.

To configure TCP congestion avoidance complete the following steps:

Procedure

Step 1

Step 2

Click Quality of Service > General > TCP Congestion Avoidance.

Click Enable to enable TCP congestion avoidance, and click Apply.

QoS Basic Mode

In QoS Basic mode, a specific domain in the network can be defined as trusted. Within that domain, packets
are marked with 802.1p priority and/or DSCP to signal the type of service they require. Nodes within the
domain use these fields to assign the packet to a specific output queue. The initial packet classification and
marking of these fields is done in the ingress of the trusted domain.

QoS Global Settings

The Global Settings page contains information for enabling Trust on the device (see the Trust Mode field
below). This configuration is active when the QoS mode is Basic mode. Packets entering a QoS domain are
classified at the edge of the QoS domain.

To define the Trust configuration, complete the following steps:

Procedure

Step 1

Step 2

Click Quality of Service > QoS Basic Mode > Global Settings.

Select the Trust Mode while the device is either in Basic or Advanced mode. If a packet CoS level and DSCP tag are
mapped to separate queues, the Trust mode determines the queue to which the packet is assigned:

• CoS/802.1p—Traffic is mapped to queues based on the VPT field in the VLAN tag, or based on the per-port default
CoS/802.1p value (if there’s no VLAN tag on the incoming packet), the actual mapping of the VPT to queue can
be configured in the mapping CoS/802.1p to Queue page.

Cisco Business 350 Series Switches Administration Guide

350

Quality of Service

QoS Interface Settings

• DSCP—All IP traffic is mapped to queues based on the DSCP field in the IP header. The actual mapping of the

DSCP to queue can be configured in the DSCP to Queue page. If traffic isn’t IP traffic, it’s mapped to the best effort
queue.

• CoS/802.1p-DSCP—Either CoS/802.1p or DSCP whichever has been set.

Step 3

Select Override Ingress DSCP to override the original DSCP values in the incoming packets with the new values entered
in the DSCP Override table. When Override Ingress DSCP is enabled, the device uses the new DSCP values for egress
queuing. It also replaces the original DSCP values in the packets with the new DSCP values.

Note
The frame is mapped to an egress queue using the new, rewritten value, and not by the original DSCP value.

Step 4

Step 5

Step 6

Click DSCP Override Table to reconfigure DSCP. (See DSCP Override Table).

DSCP In displays the DSCP value of the incoming packet that needs to be re-marked to an alternative value. Select the
DSCP Out value to indicate the outgoing value is mapped.

Click Apply. The Running Configuration file is updated with the new DSCP values. Click Restore Defaults to go back
to the default settings.

QoS Interface Settings

The Interface Settings page enables configuring QoS on each port of the device, as follows:

• QoS State Disabled on an Interface—All inbound traffic on the port is mapped to the best effort queue

and no classification/prioritization takes place.

• QoS State of the Port is Enabled—Port prioritize traffic on ingress is based on the system-wide configured

trusted mode, which is either CoS/802.1p trusted mode or DSCP trusted mode.

To enter QoS settings per interface, complete the following steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Step 6

Click Quality of Service > QoS Basic Mode > Interface Settings.

Use the filter to select the Interface Type (Port or Lag) and click Go to display the current settings. QoS State displays
whether QoS is enabled on the interface

Select an interface, and click Edit.

Select the Port or LAG interface.

Click to enable or disable QoS State for this interface.

Click Apply. The Running Configuration file is updated.

Cisco Business 350 Series Switches Administration Guide

351

QoS Advanced Mode

Quality of Service

QoS Advanced Mode

Frames that match an ACL and permitted entrance are implicitly labeled with the name of the ACL that
permitted their entrance. Advanced mode QoS actions can then be applied to these flows.

In QoS advanced mode, the device uses policies to support per flow QoS. A policy and its components have
the following characteristics and relationships:

• A policy contains one or more class maps.

• A class map defines a flow with one or more associating ACLs. Packets that match only ACL rules

(ACE) in a class map with Permit (forward) action are considered belonging to the same flow, and are
subjected to the same quality of services. Thus, a policy contains one or more flows, each with a user
defined QoS.

• The QoS of a class map (flow) is enforced by the associating policer. There are two type of policers,

single policer and aggregate policer. Each policer is configured with a QoS specification. A single policer
applies the QoS to a single class map, and thus to a single flow, based on the policer QoS specification.
An aggregate policer applies the QoS to one or more class maps, and thus one or more flows. An aggregate
policer can support class maps from different policies.

The 2 Rate 3 Color (2R3C) feature is supported on the device. In this feature, every policer has two
thresholds. If the first threshold is reached, a user-configured Exceed action is performed. If the second
threshold is reached, a user-configured Violate action is performed.

• Per flow QoS are applied to flows by binding the policies to the desired ports. A policy and its class maps

can be bound to one or more ports, but each port is bound with at most one policy.

Global Settings

The Global Settings page contains information for enabling Trust on the device. Packets entering a QoS
domain are classified at the edge of the QoS domain.

To define the Trust configuration:

Procedure

Step 1

Step 2

Click Quality of Service > QoS Advanced Mode > Global Settings.

Select the Trust Mode while the device is in Advanced mode. If a packet CoS level and DSCP tag are mapped to separate
queues, the Trust mode determines the queue to which the packet is assigned:

• CoS/802.1p—Traffic is mapped to queues based on the VPT field in the VLAN tag, or based on the per-port default
CoS/802.1p value (if there’s no VLAN tag on the incoming packet), the actual mapping of the VPT to queue can
be configured in the mapping CoS/802.1p to Queue page.

• DSCP—All IP traffic is mapped to queues based on the DSCP field in the IP header. The actual mapping of the

DSCP to queue can be configured in the DSCP to Queue page. If traffic isn’t IP traffic, it’s mapped to the best effort
queue.

• CoS/802.1p-DSCP—Select to use Trust CoS mode for non-IP traffic and Trust DSCP for IP traffic.

Cisco Business 350 Series Switches Administration Guide

352

Quality of Service

Out-of-Profile DSCP Remarking

Step 3

Step 4

Step 5

Step 6

Select the default Advanced mode QoS trust mode (either trusted or untrusted) for interfaces in the Default Mode Status
field. This provides basic QoS functionality on Advanced QoS, so that you can trust CoS/DSCP on Advanced QoS by
default (without having to create a policy).

In QoS Advanced Mode, when the Default Mode Status is set to Not Trusted, the default CoS values configured on the
interface is ignored and all the traffic goes to queue 1. See the Quality of Service > QoS Advanced Mode > Global Settings
page for details.

If you have a policy on an interface then the Default Mode is irrelevant, the action is according to the policy configuration
and unmatched traffic is dropped.

Select Override Ingress DSCP to override the original DSCP values in the incoming packets with the new values
according to the DSCP Override Table. When Override Ingress DSCP is enabled, the device uses the new DSCP values
for egress queuing. It also replaces the original DSCP values in the packets with the new DSCP values.

Note
The frame is mapped to an egress queue using the new, rewritten value, and not by the original DSCP value.

Step 7

If Override Ingress DSCP was enabled, click DSCP Override Table to reconfigure DSCP.
a)

In The DSCP Override Table, enter the following fields:

• DSCP In—Displays the DSCP value of the incoming packet that needs to be remarked to an alternative value.

• DSCP Out—Select the DSCP Out value to indicate the outgoing value is mapped.

b) Click Apply. To go back to the default settings, click Restore Defaults.

Out-of-Profile DSCP Remarking

When a policer is assigned to a class maps (flows), you can specify the action to take when the amount of
traffic in one or more flows exceeds the QoS-specified limits. The portion of the traffic that causes the flow
to exceed its QoS limit is referred to as out-of-profile packets. If the exceed/violate action is Out of Profile
DSCP, the device remaps the original DSCP value of the out-of-profile IP packets with a new value based on
the Out of Profile DSCP Remarking Table. The device uses the new values to assign resources and the egress
queues to these packets. The device also physically replaces the original DSCP value in the out of profile
packets with the new DSCP value.

To use the out-of-profile DSCP exceed action, remap the DSCP value in the Out Of Profile DSCP Remarking
Table. Otherwise the action is null, because the DSCP value in the table remaps the packets to itself by factory
default. This feature changes the DSCP tags for incoming traffic switched between trusted QoS domains.
Changing the DSCP values used in one domain, sets the priority of that type of traffic to the DSCP value used
in the other domain to identify the same type of traffic. These settings are active when the system is in the
QoS Advance mode, and once activated they are active globally. This can be configured in the QoS Properties,
on page 341.

To map DSCP values, follow these steps:

Procedure

Step 1

Click Quality of Service > QoS Advanced Mode > Out of Profile DSCP Remarking. This page enables setting the
DSCP-value of traffic entering or leaving the device.

Cisco Business 350 Series Switches Administration Guide

353

Class Mapping

Quality of Service

DSCP In displays the DSCP value of the incoming packet that needs to be re-marked to an alternative value.

Step 2

Step 3

Step 4

Select the DSCP Out value to where the incoming value is mapped.

Click Apply. The Running Configuration file is updated with the new DSCP Remarking table.

Click Restore Defaults to restore the factory CoS default setting for this interface.

Class Mapping

A Class Map defines a traffic flow with ACLs (Access Control Lists) defined on it. A MAC ACL, IP ACL,
and IPv6 ACL can be combined into a class map. Class maps are configured to match packet criteria on a
match-all or match-any basis. They are matched to packets on a first-fit basis, meaning that the action associated
with the first-matched class map is the action performed by the system. Packets that match the same class
map are considered to belong to the same flow.

Note

Defining class maps doesn’t have any effect on QoS; it’s an interim step, enabling the class maps to be used
later.

If more complex sets of rules are needed, several class maps can be grouped into a supergroup called a policy.

In the same class map, a MAC ACL can’t be used with an IPv6 ACE that has a Destination IPv6 address as
a filtering condition.

The Class Mapping page shows the list of defined class maps and the ACLs comprising each, and enables
you to add/delete class maps.

To define a Class Map, complete the following steps:

Procedure

Step 1

Click Quality of Service > QoS Advanced Mode > Class Mapping.

For each class map, the ACLs defined on it are displayed along with the relationship between them. Up to three ACLs
can be displayed along with their Match, which can be either And or Or. This indicates the relationship between the
ACLs. The Class Map is then the result of the three ACLs combined with either And or Or.

Step 2

Click Add.

A new class map is added by selecting one or two ACLs and giving the class map a name. If a class map has two ACLs,
you can specify that a frame must match both ACLs, or that it must match either one or both of the ACLs selected.

Step 3

Enter the parameters.

• Class Map Name—Enter the name of a new class map.

• Match ACL Type—The criteria that a packet must match in order to be considered to belong to the flow defined in

the class map. The options are:

• IP—A packet must match either of the IP-based ACLs in the class map.

• MAC—A packet must match the MAC-based ACL in the class map.

Cisco Business 350 Series Switches Administration Guide

354

Quality of Service

Aggregate Policer

• IP and MAC—A packet must match the IP-based ACL and the MAC-based ACL in the class map.

• IP or MAC—A packet must match either the IP-based ACL or the MAC-based ACL in the class map.

• IP—Select the IPv4 based ACL or the IPv6 based ACL for the class map.

• MAC—Select the MAC-based ACL for the class map.

• Preferred ACL—Select whether packets are first matched to an IP or MAC.

Step 4

Click Apply. The Running Configuration file is updated.

Aggregate Policer

You can measure the rate of traffic that matches a predefined set of rules. To enforce limits, use ACLs in one
or more class maps to match the desired traffic, and use a policer to apply the QoS on the matching traffic.

A policer is configured with a QoS specification. There are two kinds of policers:

• Single (Regular) Policer—A single policer applies the QoS to a single class map, and to a single flow
based on the policer's QoS specification. When a class map using single policer is bound to multiple
ports, each port has its own instance of single policer. Thus, each applying the QoS on the class map
(flow) at ports that are otherwise independent of each other. A single policer is created in the Policy
Table page.

• Aggregate Policer—An aggregate policer applies the QoS to one or more class maps, and one or more
flows. An aggregation policer can support class maps from different policies. An aggregate policer applies
QoS to all its flows in aggregation regardless of policies and ports. An aggregate policer is created in the
Aggregate Policer page.

An aggregate policer is defined if the policer is to be shared with more than one class. Policers on a port
can’t be shared with other policers in another device.

Each policer is defined with its own QoS specification with a combination of the following parameters:

• Peak Enforcement—Select to enable action if peak burst size is exceeded.

• Peak Information Rate (PIR)—Enter the peak traffic rate (PIR) in kbits per second (kbps).

• Peak Burst Size (PBS)—Enter the peak burst size (PBS) in bytes.

• Violate Action—Select one of the following actions if peak size is exceeded:

• Drop—Drop the frames violating the peak size.

• Out-of-Profile DSCP—Mark frames violating the peak size with the DSCP value with previously

set DSCP value

• A maximum allowed rate, called a Committed Information Rate (CIR), measured in Kbps.

• An amount of traffic, measured in bytes, called a Committed Burst Size (CBS). This is traffic that is

allowed to pass as a temporary burst even if it’s above the defined maximum rate.

Cisco Business 350 Series Switches Administration Guide

355

Aggregate Policer

Quality of Service

• An action to be applied to frames that are over the limits (called out-of-profile traffic), where such frames

can be passed as is, dropped, or passed, but remapped to a new DSCP value that marks them as
lower-priority frames for all subsequent handling within the device.

• Configures traffic policing on the basis of the specified rates and optional actions Enter the CIR and

these optional values and actions

Assigning a policer to a class map is done when a class map is added to a policy. If the policer is an aggregate
policer, you must create it using the Aggregate Policer page.

To define an aggregate policer, complete the following steps:

Procedure

Step 1

Click Quality of Service > QoS Advanced Mode > Aggregate Policer.

This page displays the existing aggregate policers.

Step 2

Step 3

Click Add.

Enter the parameters.

• Aggregate Policer Name—Enter the name of the Aggregate Policer.

• Ingress Committed Information Rate (CIR)—Enter the maximum bandwidth allowed in bits per second. See the

description of this in the Bandwidth, on page 346.

• Ingress Committed Burst Size (CBS)—Enter the maximum burst size (even if it goes beyond the CIR) in bytes. See

the description of this in the Bandwidth, on page 346.

• Exceed Action—Select the action to be performed on incoming packets that exceed the CIR. Possible values are:

• Drop—Packets exceeding the defined CIR value are dropped.

• Out of Profile DSCP—The DSCP values of packets exceeding the defined CIR value are remapped to a value

based on the Out Of Profile DSCP Remarking Table.

• Peak Enforcement—Select to enable action if peak burst size is exceeded.

• Peak Information Rate (PIR)—Enter the peak traffic rate (PIR) in kbits per second (kbps).

• Peak Burst Size (PBS)—Enter the peak burst size (PIR) in bytes.

• Violate Action—Select one of the following actions if peak size is exceeded:

• Drop—Drop the frames violating the peak size.

• Out-of-Profile DSCP—Mark frames violating the peak size with the DSCP value with previously set DSCP

value

Step 4

Click Apply. The Running Configuration file is updated.

Cisco Business 350 Series Switches Administration Guide

356

Quality of Service

Policy Table

Policy Table

The Policy Table Map page displays the list of advanced QoS policies defined in the system. The page also
allows you to create and delete policies. Only those policies that are bound to an interface are active (see
Policy Binding, on page 359).

Each policy consists of:

• One or more class maps of ACLs which define the traffic flows in the policy.

• One or more aggregates that applies the QoS to the traffic flows in the policy.

After a policy has been added, class maps can be added by using the Policy Table page. To add a QoS policy,
complete the following steps:

Procedure

Step 1

Click Quality of Service > QoS Advanced Mode > Policy Table.

This page displays the list of defined policies.

Step 2

Step 3

Step 4

Click Policy Class Map Table to display the Policy Class Maps page or click Add to open the Add Policy Table page.

Enter the name of the new policy in the New Policy Name field.

Click Apply. The QoS policy profile is added, and the Running Configuration file is updated.

Policy Class Maps

One or more class maps can be added to a policy. A class map defines the type of packets that are considered
to belong to the same traffic flow.

To add a class map to a policy:

Procedure

Step 1

Step 2

Step 3

Step 4

Click Quality of Service > QoS Advanced Mode > Policy Class Maps.

Select a policy in the Filter, and click Go. All class maps in that policy are displayed.

To add a new class map, click Add.

Enter the following parameters.

Policy Name

Displays the policy to which the class map is being added.

Class Map Name

Select an existing class map to be associated with the policy. Class maps are created in
the Class Mapping page.

Cisco Business 350 Series Switches Administration Guide

357

Policy Class Maps

Quality of Service

Action Type

Select the action regarding the ingress CoS/802.1p and/or DSCP value of all the matching
packets.

Traffic Redirect

Traffic Mirror

• Use default trust mode—If this option is selected, use the default mode status in

Global Trust mode. If the default mode status is “Not Trusted”, ignore the ingress
CoS/802.1p and/or DSCP value and the matching packets are sent as best effort.

• Always Trust—If this option is selected, the device trusts the matching packet based
on the Global Trust mode (selected in the Global Settings page). It ignores the Default
Mode status (selected in the Global Settings page).

• Set—If this option is selected, use the value entered in the New Value box to

determine the egress queue of the matching packets as follows:

If the new value (0..7) is a CoS/802.1p priority, use the priority value and the
CoS/802.1p to Queue Table to determine the egress queue of all the matching packets.

If the new value (0..63) is a DSCP, use the new DSCP and the DSCP to Queue Table
to determine the egress queue of the matching IP packets. Otherwise, use the new
value (1..8) as the egress queue number for all the matching packets.

Select whether to redirect matching traffic. If so, select the unit/port to which traffic will
be redirected.

Set to mirror a traffic flow to an analyzer Ethernet port. If this option is selected the traffic
is mirrored to the destination port specified in SPAN Session ID 1. If no target port is
specified in SPAN session ID 1 the mirror action won’t have effect. If a policy class map
with Traffic Mirror action is applied to an interface – and that same interface is defined
as a source port for SPAN session 1 – all traffic, and not only specific flow, will be
mirrored.

Additional rules and actions of the policy (and ACL) applied to the interface are still
enforced even when Traffic Mirror action is configured. For example:

• If the ACL action of the mirrored flow is permitted – in addition to being mirrored
– the flow traffic is also be forwarded. If the action of flow ACL is deny – flow traffic
will be mirrored but not forwarded to the egress network interface (drop behavior).

• Traffic flows on interfaces, to which policy is applied that don’t match the Mirrored

class map classification, follow the default policy default action.

Police Type

Select the policer type for the policy. The options are:

• None—No policy is used.

• Single—The policer for the policy is a single policer.

• Aggregate—The policer for the policy is an aggregate policer.

Step 5

Step 6

If Police Type is Aggregate, select the Aggregate Policer.

If Police Type is Single, enter the following QoS parameters:

Ingress Committed
Information Rate (CIR)

Enter the CIR in Kbps. See a description of this in the Bandwidth page.

Cisco Business 350 Series Switches Administration Guide

358

Quality of Service

Policy Binding

Ingress Committed Burst
Size (CBS)

Enter the CBS in bytes. See a description of this in the Bandwidth page.

Exceed Action

Select the action assigned to incoming packets exceeding the CIR. The options are:

• Drop—Packets exceeding the defined CIR value are dropped.

• Out of Profile DSCP—IP packets exceeding the defined CIR are forwarding with a

new DSCP derived from the Out Of Profile DSCP Remarking Table.

Peak Enforcement

Select to enable action if peak burst size is exceeded.

Peak Information Rate (PIR)

Enter the peak traffic rate (PIR) in kbits per second (kbps).

Peak Burst Size (PBS)

Enter the peak burst size (PIR) in kbits per second (kbps).

Violate Action

Select one of the following actions if peak size is exceeded.

• Drop—Drop the frames violating the peak size.

• Out of Profile DSCP—Mark frames violating the peak size with the DSCP value

with previously set DSCP value

Step 7

Click Apply.

Policy Binding

The Policy Binding page shows which policy profile is bound and to which port. A policy can be bound to
an interface as an ingress (input) policy or as an egress (output) policy. When a policy profile is bound to a
specific port, it’s active on that port. Only one policy profile can be configured per port and per direction.
However, a single policy can be bound to more than one port.

When a policy is bound to a port, it filters and applies QoS to traffic that belongs to the flows defined in the
policy.

To edit a policy, it must first be removed (unbound) from all those ports to which it’s bound.

Note

It’s possible to either bind a port to a policy or to an ACL but both can’t be bound.

To define policy binding, complete the following steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click Quality of Service > QoS Advanced Mode > Policy Binding.

Select an Interface Type if required.

Click Go. The policies for that interface are displayed.

Click Edit.

Cisco Business 350 Series Switches Administration Guide

359

QoS Statistics

Quality of Service

Step 5

Select the following for the input policy/interface:

• Input Policy Binding—Select to bind the input policy to the interface.

• Policy Name—Select the input policy being bound.

• Default Action—Select action if packet matches policy:

• Deny Any—Select to forward packets on the interface if they match any policy.

• Permit Any—Select to forward packets on the interface if they don’t match any policy.

Note
Permit Any can be defined only if IP Source Guard isn’t activated on the interface.

Step 6

Select the following for the output policy/interface:

• Output Policy Binding—Select to bind the output policy to the interface.

• Policy Name—Select the output policy being bound.

• Default Action—Select action if packet matches policy:

• Deny Any—Select to forward packets on the interface if they match any policy.

• Permit Any—Select to forward packets on the interface if they don’t match any policy.

Note
Permit Any can be defined only if IP Source Guard isn’t activated on the interface.

Step 7

Click Apply. The QoS policy binding is defined, and the Running Configuration file is updated.

QoS Statistics

QoS statistics feature allows you to gather statistics for the rate at which packets are forwarded out of a queue
and for the rate at which committed, conformed, or exceeded packets are dropped on the device.

Single Policer Statistics

The Single Policer Statistics page indicates the number of in-profile and out-of-profile packets that are received
from an interface that meet the conditions defined in the class map of a policy.

Note

This page isn’t displayed when the device is in Layer 3 mode.

To view policer statistics:

Cisco Business 350 Series Switches Administration Guide

360

Aggregate Policer Statistics

Quality of Service

Procedure

Step 1

Click Quality of Service > QoS Statistics > Single Policer Statistics.

This page displays the following fields:

• Interface—Statistics are displayed for this interface.

• Policy—Statistics are displayed for this policy.

• Class Map—Statistics are displayed for this class map.

• In-Profile Bytes—Number of in-profile bytes received.

• Out-of-Profile Bytes—Number of outprofile bytes received.

Step 2

Step 3

Click Add.

Enter the parameters.

• Interface—Select the interface for which statistics are accumulated.

• Policy Name—Select the policy name.

• Class Map Name—Select the class name.

Step 4

Click Apply. An additional request for statistics is created and the Running Configuration file is updated.

Aggregate Policer Statistics

To view aggregated policer statistics:

Procedure

Step 1

Click Quality of Service > QoS Statistics > Aggregate Policer Statistics.

This page displays the following fields:

• Aggregate Policer Name—Policer on which statistics are based.

• In-Profile Bytes—Number of in-profile packets that received.

• Out-of-Profile Bytes—Number of out-of-profile packets that received.

Step 2

Step 3

Step 4

Step 5

Click Add.

Select an Aggregate Policer Name, one of the previously-created Aggregate Policers for which statistics are displayed.

Click Apply. An additional request for statistics is created, and the Running Configuration file is updated.

Click Delete to remove a specific statistic.

Cisco Business 350 Series Switches Administration Guide

361

Queue Statistics

Quality of Service

Step 6

Click Clear Counters to clear the counters of the selected policer.

Queue Statistics

The Queues Statistics page displays queue statistics, including statistics of forwarded and dropped packets,
based on interface, queue, and drop precedence.

To view Queues Statistics and define what statistics to display (Counter Set):

Procedure

Step 1

Click Quality of Service > QoS Statistics > Queue Statistics.

This page displays the following fields:

• Refresh Rate—Select the time period that passes before the interface Ethernet statistics are refreshed. The available

options are:

• No Refresh—Statistics aren’t refreshed.

• 15 Sec—Statistics are refreshed every 15 seconds.

• 30 Sec—Statistics are refreshed every 30 seconds.

• 60 Sec—Statistics are refreshed every 60 seconds.

To view a specific unit and interface, select the unit/interface in the filter and click Go.

To view a specific interface, select the interface in the filter and click Go.

The Queue Statistics Table displays the following fields for each queue:

• Queue—Packets forwarded or tail dropped from this queue.

• Transmitted Packets—Number of packets that were transmitted.

• Tail Dropped Packets—Number of packets that were tail dropped.

• Transmitted Bytes—Number of bytes that were transmitted.

• Tail Dropped Bytes—Number of bytes that were tail dropped.

Step 2

Step 3

Click Clear Interface Counters to clear the statistic counters for the selected interface.

Click Clear All Interface Counters to clear the statistic counters for all interfaces.

Cisco Business 350 Series Switches Administration Guide

362

C H A P T E R 20

SNMP

This chapter describes the Simple Network Management Protocol (SNMP) feature that provides a method
for managing network devices. It contains the following sections:

• Engine ID, on page 363
• SNMP Views, on page 365
• SNMP Groups, on page 366
• SNMP Users, on page 367
• SNMP Communities, on page 369
• Trap Settings, on page 370
• Notification Recipients SNMPv1,2, on page 371
• Notification Recipients SNMPv3, on page 372
• Notification Filter, on page 374

Engine ID

The Engine ID is used by SNMPv3 entities to uniquely identify them. An SNMP agent is considered an
authoritative SNMP engine. This means that the agent responds to incoming messages (Get, GetNext, GetBulk,
Set) and sends trap messages to a manager. The agent's local information is encapsulated in fields in the
message.

Each SNMP agent maintains local information that is used in SNMPv3 message exchanges. The default SNMP
Engine ID is comprised of the enterprise number and the default MAC address. This engine ID must be unique
for the administrative domain, so that no two devices in a network have the same engine ID.

Local information is stored in four MIB variables that are read-only (snmpEngineId, snmpEngineBoots,
snmpEngineTime, and snmpEngineMaxMessageSize).

Caution

When the engine ID is changed, all configured users and groups are erased.

To configure the SNMP engine ID, complete the following steps:

Cisco Business 350 Series Switches Administration Guide

363

Engine ID

Procedure

SNMP

Step 1

Step 2

Click SNMP > Engine ID.

Choose which to use for Local Engine ID.

• Use Default—Select to use the device-generated engine ID. The default engine ID is based on the device MAC

address, and is defined per standard as:

• First 4 octets—First bit = 1, the rest is the IANA enterprise number.

• Fifth octet—Set to 3 to indicate the MAC address that follows.

• Last 6 octets—MAC address of the device

• None—No engine ID is used.

• User Defined—Enter the local device engine ID. The field value is a hexadecimal string (range: 10–64). Each byte

in the hexadecimal character strings is represented by two hexadecimal digits.

All remote engine IDs and their IP addresses are displayed in the Remote Engine ID table.

Step 3

Click Apply. The Running Configuration file is updated.

The Remote Engine ID table shows the mapping between IP addresses of the engine and Engine ID.

To add the IP address of an engine ID:

Step 4

Click Add. Enter the following fields:

• Server Definition—Select whether to specify the Engine ID server by IP address or name.

• IP Version—Select the supported IP format.

• IPv6 Address Type—Select the IPv6 address type (if IPv6 is used). The options are:

• Link Local—The IPv6 address uniquely identifies hosts on a single network link. A link local address has a
prefix of FE80, isn’t routable, and can be used for communication on the local network only. Only one link
local address is supported. If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable from other networks.

• Link Local Interface—Select the link local interface (if IPv6 Address Type Link Local is selected) from the list.

• Server IP Address/Name—Enter the IP address or domain name of the log server.

• Engine ID—Enter the Engine ID.

Step 5

Click Apply. The Running Configuration file is updated.

Cisco Business 350 Series Switches Administration Guide

364

SNMP

SNMP Views

SNMP Views

A view is a user-defined label for a collection of MIB subtrees. Each subtree ID is defined by the Object ID
(OID) of the root of the relevant subtrees. Either well-known names can be used to specify the root of the
desired subtree or an OID can be entered. The Views page enables creating and editing SNMP views. The
default views (Default, DefaultSuper) can’t be changed.

Views can be attached to groups or to a community which employs basic access mode through the SNMP
Groups, on page 366.

To configure the SNMP views, complete the following steps:

Procedure

Step 1

Click SNMP > Views.

The following fields are displayed for each view:

• Object ID Subtree—Node in the MIB tree that is included or excluded in the view.

• Object ID Subtree View—Whether the node is Included or Excluded.

Step 2

Step 3

Click Add to define new views.

Enter the parameters.

• View Name—Enter a view name 0–30 characters.

• Object ID Subtree—Select the node in the MIB tree that is included or excluded in the selected SNMP view. The

options to select the object are as follows:

• Select from list—Enables you to navigate the MIB tree.

• User Defined—Enter an OID not offered in the Select from list option.

Step 4

Step 5

Step 6

Select or deselect Include in view. If this is selected, the selected MIBs are included in the view, otherwise they are
excluded.

Click Apply.

In order to verify your view configuration, select the user-defined views from the Filter: View Name list.

• Default—Default SNMP view for read and read/write views.

• DefaultSuper—Default SNMP view for administrator views.

Cisco Business 350 Series Switches Administration Guide

365

SNMP Groups

SNMP Groups

SNMP

In SNMPv1 and SNMPv2, a community string is sent along with the SNMP frames. The community string
acts as a password to gain access to an SNMP agent. However, neither the frames nor the community string
is encrypted. Therefore, SNMPv1 and SNMPv2 aren’t secure.

In SNMPv3, the following security mechanisms can be configured.

• Authentication—The device checks that the SNMP user is an authorized system administrator. This is

done for each frame.

• Privacy—SNMP frames can carry encrypted data.

Thus, in SNMPv3, there are three levels of security:

• No security (No authentication and no privacy)

• Authentication (Authentication and no privacy)

• Authentication and privacy

SNMPv3 provides a means of controlling the content each user can read or write and the notifications they
receive. A group defines read/write privileges and a level of security. It becomes operational when it’s
associated with an SNMP user or community.

Note

To associate a non-default view with a group, first create the view in the SNMP Views, on page 365.

To create an SNMP group, complete the following steps:

Procedure

Step 1

Click SNMP > Groups.

This page contains the existing SNMP groups and their security levels.

Step 2

Step 3

Click Add.
Enter the parameters.

• Group Name—Enter a new group name.

• Security Model—Select the SNMP version attached to the group, SNMPv1, v2, or v3.

Three types of views with various security levels can be defined. For each security level, select the views for Read,
Write, and Notify by entering the following fields:

• Enable—Select this field to enable the Security Level.

• Security Level—Define the security level attached to the group. SNMPv1 and SNMPv2 support neither authentication

nor privacy. If SNMPv3 is selected, choose one of the following:

• No Authentication and No Privacy—Neither the Authentication nor the Privacy security levels are assigned to

the group.

Cisco Business 350 Series Switches Administration Guide

366

SNMP

SNMP Users

• Authentication and No Privacy—Authenticates SNMP messages, and ensures that the SNMP message origin

is authenticated but doesn’t encrypt them.

• Authentication and Privacy—Authenticates SNMP messages, and encrypts them.

• View—Select to associate a view with either read, write, and/or notify access privileges of the group limits the scope

of the MIB tree to which the group has read, write, and notify access.

• Read—Management access is read-only for the selected view. Otherwise, a user or a community associated

with this group is able to read all MIBs except those that control SNMP itself.

• Write—Management access is written for the selected view. Otherwise, a user or a community associated with

this group is able to write all MIBs except those that control SNMP itself.

• Notify—Limits the available content of the traps to those included in the selected view. Otherwise, there’s no

restriction on the contents of the traps. This can only be selected for SNMPv3.

Step 4

Click Apply. The SNMP group is saved to the Running Configuration file.

SNMP Users

An SNMP user is defined by the login credentials (username, passwords, and authentication method) and by
the context and scope in which it operates by association with a group and an Engine ID. The configured users
have the attributes of its group, having the access privileges configured within the associated view.

To create an SNMPv3 user, the following must first exist:

• An engine ID must first be configured on the device. This is done in the Engine ID, on page 363.

• An SNMPv3 group must be available. An SNMPv3 group is defined in the SNMP Groups, on page 366.

To display SNMP users and define new ones:

Procedure

Step 1

Click SNMP > Users.

This page displays existing users. The fields in this page are described in the Add page except for the following field:

• IP Address—Displays the IP address of the engine.

Step 2

Click Add.

This page provides information for assigning SNMP access control privileges to SNMP users.

Step 3

Enter the parameters.

• User Name—Enter a name for the user.

Cisco Business 350 Series Switches Administration Guide

367

SNMP Users

SNMP

• Engine ID—Select either the local or remote SNMP entity to which the user is connected. Changing or removing

the local SNMP Engine ID deletes the SNMPv3 User Database. To receive inform messages and request information,
you must define both a local and remote user.

• Local—User is connected to the local device.

• Remote IP Address—User is connected to a different SNMP entity in addition to the local device. If the remote

Engine ID is defined, remote devices receive inform messages, but can’t make requests for information.

• Group Name—Select the SNMP group to which the SNMP user belongs. SNMP groups are defined in the Add

Group page.

Note
Users, who belong to groups which have been deleted, remain, but they are inactive.

• Authentication Method—Select the Authentication method that varies according to the Group Name assigned. If

the group doesn’t require authentication, then the user can’t configure any authentication. The options are:

• None—No user authentication is used.

• SHA—A password that is used for generating a key by the SHA-1 (Secure Hash Algorithm) authentication

method.

• SHA224- A password that is used for generating a key by the SHA-224 (based on Secure Hash Algorithm 2)

authentication method truncated to 128 bits.

• SHA256- A password that is used for generating a key by the SHA-256 (based on Secure Hash Algorithm 2)

authentication method truncated to 192 bits.

• SHA384- A password that is used for generating a key by the SHA-384 (based on Secure Hash Algorithm 2)

authentication method truncated to 256 bits.

• SHA512- A password that is used for generating a key by the SHA-512 (based on Secure Hash Algorithm 2)

authentication method truncated to 384 bits.

• Authentication Password—If authentication is accomplished by password and authentication method, enter the local
user password in either Encrypted or Plaintext. Local user passwords are compared to the local database. And can
contain up to 32 ASCII characters.

• Privacy Method—Select one of the following options:

• None—Privacy password isn’t encrypted.

• AES—Privacy password is encrypted according to the AES.

• Privacy Password—16 bytes are required (AES encryption key) if the AES privacy method was selected. This field

must be exactly 32 hexadecimal characters. The Encrypted or Plaintext mode can be selected.

Step 4

Click Apply to save the settings.

Cisco Business 350 Series Switches Administration Guide

368

SNMP

SNMP Communities

SNMP Communities

Access rights in SNMPv1 and SNMPv2 are managed by defining communities in the Communities page. The
community name is a type of shared password between the SNMP management station and the device. It’s
used to authenticate the SNMP management station.

Communities are only defined in SNMPv1 and v2 because SNMPv3 works with users instead of communities.
The users belong to groups that have access rights assigned to them. The Communities page associates
communities with access rights, either directly (Basic mode) or through groups (Advanced mode):

• Basic mode—The access rights of a community can configure with Read Only, Read Write, or SNMP

Admin. In addition, you can restrict the access to the community to only certain MIB objects by selecting
a view (defined in the SNMP Users, on page 367).

• Advanced Mode—The access rights of a community are defined by a group (defined in the SNMP

Groups, on page 366). You can configure the group with a specific security model. The access rights of
a group are Read, Write, and Notify.

To define the SNMP communities, complete the following steps:

Procedure

Step 1

Step 2

Step 3

Click SNMP > Communities.

Click Add to define and configure new SNMP community.

Configure the following fields:

SNMP Management Station

Select one of the following options:

• All—to indicate that any IP device can access the SNMP community.

• User Defined—to enter the management station IP address that can access the SNMP

community.

IP Version

Select either IPv4 or IPv6.

IPv6 Address Type

Select the supported IPv6 address type if IPv6 is used. The options are:

• Link Local—The IPv6 address uniquely identifies hosts on a single network link. A

link local address has a prefix of FE80, isn’t routable, and can be used for
communication on the local network only. Only one link local address is supported.
If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable

from other networks.

Link Local Interface

If the IPv6 address type is Link Local, select whether it’s received through a VLAN or
ISATAP.

IP Address

Enter the SNMP management station IP address.

Cisco Business 350 Series Switches Administration Guide

369

Trap Settings

SNMP

Community String

Enter the community name used to authenticate the management station to the device.

Basic

In this community type, there’s no connection to any group. You can only choose the
community access level (Read Only, Read Write, or SNMP Admin) and, optionally,
further qualify it for a specific view. By default, it applies to the entire MIB. If this is
selected, enter the following fields:

• Access Mode—Select the access rights of the community. The options are:

Read Only—Management access is restricted to read-only. Changes can’t be made
to the community.

Read Write—Management access is read-write. Changes can be made to the device
configuration, but not to the community.

SNMP Admin—User has access to all device configuration options, and permissions
to modify the community. SNMP Admin is equivalent to Read Write for all MIBs
except for the SNMP MIBs. SNMP Admin is required for access to the SNMP MIBs.

• View Name—Select an SNMP view (a collection of MIB subtrees to which access

is granted).

Advanced

Select this type for a selected community.

• Group Name—Select an SNMP group that determines the access rights.

Step 4

Click Apply. The SNMP Community is defined, and the Running Configuration is updated.

Trap Settings

The Trap Settings page enables configuring whether SNMP notifications are sent from the device, and for
which cases.

To define trap settings, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Click SNMP > Trap Settings.

Select Enable for SNMP Notifications to specify that the device can send SNMP notifications.

Select Enable for Authentication Notifications to enable SNMP authentication failure notification.

Click Apply. The SNMP Trap settings are written to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

370

SNMP

Notification Recipients SNMPv1,2

Notification Recipients SNMPv1,2

The notification recipients enable configuring the destination to which SNMP notifications are sent, and the
types of SNMP notifications that are sent to each destination (traps or informs). An SNMP notification is a
message sent from the device to the SNMP management station indicating that a certain event has occurred,
such as a link up/down.

It is also possible to filter certain notifications. This can be done by creating a filter in the Notification Filter,
on page 374 and attaching it to an SNMP notification recipient. The notification filter enables filtering the type
of SNMP notifications that are sent to the management station based on the OID of the notification that is
about to be sent.

To define a recipient in SNMPv1,2:

Procedure

Step 1

Click SNMP > Notification Recipients SNMPv1,2.

This page displays recipients for SNMPv1,2.

Step 2

Enter the following fields:

• Informs IPv4 Source Interface—Select the source interface whose IPv4 address will be used as the source IPv4

address in inform messages for communication with IPv4 SNMP servers.

• Traps IPv4 Source Interface—Select the source interface whose IPv6 address will be used as the source IPv6 address

in trap messages for communication with IPv6 SNMP servers.

• Informs IPv6 Source Interface—Select the source interface whose IPv4 address will be used as the source IPv4

address in inform messages for communication with IPv4 SNMP servers.

• Traps IPv6 Source Interface—Select the source interface whose IPv6 address will be used as the source IPv6 address

in trap messages for communication with IPv6 SNMP servers.

Note
If the Auto option is selected, the system takes the source IP address from the IP address defined on the outgoing
interface.

Step 3

Step 4

Click Add.
Enter the parameters.

• Server Definition—Select whether to specify the remote log server by IP address or name.

• IP Version—Select either IPv4 or IPv6.

• IPv6 Address Type—Select either Link Local or Global.

• Link Local—The IPv6 address uniquely identifies hosts on a single network link. A link local address has a
prefix of FE80, isn’t routable, and can be used for communication on the local network only. Only one link
local address is supported. If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable from other networks.

Cisco Business 350 Series Switches Administration Guide

371

Notification Recipients SNMPv3

SNMP

• Link Local Interface—If the IPv6 address type is Link Local, select whether it’s received through a VLAN or

ISATAP.

• Recipient IP Address/Name—Enter the IP address or server name of where the traps are sent.

• UDP Port—Enter the UDP port used for notifications on the recipient device.

• Notification Type—Select whether to send Traps or Informs. If both are required, two recipients must be created.

• Timeout—Enter the number of seconds the device waits before resending informs.

• Retries—Enter the number of times that the device resends an inform request.

• Community String—Select from the pull-down the community string of the trap manager. Community String names

are generated from those listed in the SNMP Communities, on page 369.

• Notification Version—Select the trap SNMP version. Either SNMPv1 or SNMPv2 may be used as the version of

traps, with only a single version enabled at a time.

• Notification Filter—Select to enable filtering the type of SNMP notifications sent to the management station. The

filters are created in the Notification Filter, on page 374.

• Filter Name—Select the SNMP filter that defines the information contained in traps (defined in the Notification

Filter, on page 374).

Step 5

Click Apply. The SNMP Notification Recipient settings are written to the Running Configuration file.

Notification Recipients SNMPv3

To define a recipient in SNMPv3:

Procedure

Step 1

Step 2

Click SNMP > Notification Recipients SNMPv3.

Configure the following settings:

• Informs IPv4 Source Interface—From the drop-down list, select the source interface whose IPv4 address will be

used as the source IPv4 address in inform messages for communication with IPv4 SNMP servers.

• Traps IPv4 Source Interface—From the drop-down list, select the source interface whose IPv6 address will be used

as the source address in trap messages.

• Informs IPv6 Source Interface—From the drop-down list, select the source interface whose IPv4 address will be

used as the source IPv4 address in inform messages for communication with IPv4 SNMP servers.

• Traps IPv6 Source Interface—From the drop-down list, select the source interface whose IPv6 address will be used

as the source address in trap messages.

Step 3

Step 4

Click Add.

Enter the parameters.

Cisco Business 350 Series Switches Administration Guide

372

SNMP

Notification Recipients SNMPv3

• Server Definition—Select whether to specify the remote log server by IP address or name.

• IP Version—Select either IPv4 or IPv6.

• IPv6 Address Type—Select the IPv6 address type (if IPv6 is used). The options are:

• Link Local—The IPv6 address uniquely identifies hosts on a single network link. A link local address has a
prefix of FE80, isn’t routable, and can be used for communication on the local network only. Only one link
local address is supported. If a link local address exists on the interface, this entry replaces the address in the
configuration.

• Global—The IPv6 address is a global Unicast IPV6 type that is visible and reachable from other networks.

• Link Local Interface—Select the link local interface (if IPv6 Address Type Link Local is selected) from the pull-down

list.

• Recipient IP Address/Name—Enter the IP address or server name of where the traps are sent.

• UDP Port—Enter the UDP port used to for notifications on the recipient device.

• Notification Type—Select whether to send traps or informs. If both are required, two recipients must be created.

• Timeout—Enter the amount of time (seconds) the device waits before resending informs/traps. Time out: Range

1-300, default 15

• Retries—Enter the number of times that the device resends an inform request. Retries: Range 1-255, default 3

• User Name—Select from the drop-down list the user to whom SNMP notifications are sent. In order to receive

notifications, this user must be defined on the page, and its engine ID must be remote.

• Security Level—Select how much authentication is applied to the packet.

Note
The Security Level here depends on which User Name was selected. If this User Name was configured as No
Authentication, the Security Level is No Authentication only. However, if this User Name has been assigned with
Authentication and Privacy rights, the security level can be either No Authentication, or Authentication Only, or
Authentication and Privacy.

The options are:

• No Authentication—Indicates that the packet is not authenticated or encrypted.

• Authentication—Indicates that the packet is authenticated but not encrypted.

• Privacy—Indicates that the packet is both authenticated and encrypted.

• Notification Filter—Select to enable filtering the type of SNMP notifications sent to the management station.

• Filter Name—Select the SNMP filter that defines the information contained in traps.

Step 5

Click Apply. The SNMP Notification Recipient settings are written to the Running Configuration file.

Cisco Business 350 Series Switches Administration Guide

373

Notification Filter

SNMP

Notification Filter

The Notification Filter page enables configuring SNMP notification filters and Object IDs (OIDs) that are
checked. The notification filter enables filtering the type of SNMP notifications that are sent to the management
station based on the OID of the notification to be sent.

To define a notification filter:

Procedure

Step 1

Click SNMP > Notification Filter.

The Notification Filter Table contains notification information for each filter. The table is able to filter notification entries
by Filter Name. The Object ID Subtree Filter displays the current status of each configured filter.

Step 2

Step 3

Click Add.

Enter the parameters.

• Filter Name—Enter a name between 0-30 characters.

• Object ID Subtree—Select the node in the MIB tree that is included or excluded in the selected SNMP filter. The

options to select the object are as follows:

• Select from List—Enables you to navigate the MIB tree. Press the Up arrow to go to the level of the selected
node's parent and siblings; press the Down arrow to descend to the level of the selected node's children. Click
nodes in the view to pass from one node to its sibling. Use the scrollbar to bring siblings in view.

• Object ID—Select this option to include the entered object identifier in the view, if the Include in filter option

is selected.

Step 4

Select or deselect Include in filter. If this is selected, the selected MIBs are included in the filter, otherwise they are
excluded.

Step 5

Click Apply. The SNMP views are defined and the running configuration is updated.

Cisco Business 350 Series Switches Administration Guide

374

C H A P T E R 21

Annex

This chapter contains general topics that may only apply to certain models of the Cisco Business switches.

• Managing a Stack of Switches, on page 375
• Link Aggregation, on page 382
• UDLD , on page 384
• Smartport Overview, on page 385
• VLAN Description, on page 386
• Troubleshooting Link Flapping, on page 391
• Spanning Tree Protocol, on page 393
• RSPAN Configuration, on page 395
• Multicast, on page 396
• 802_1x Overview, on page 400
• Mode Behavior, on page 406
• DHCPv4 Types and Interactions, on page 407
• IPv6 First Hop Security, on page 412
• Secure Sensitive Data Management, on page 420
• Secure Shell, on page 421
• QoS, on page 422
• SNMP, on page 424

Managing a Stack of Switches

Switches can either function on their own, or they can be connected into a stack of switches. By default, a
device is always stackable, but has no stack port. All ports on the switches are network ports by default. You
can look at a switch without any stack port as the active unit in a stack of only itself. You can also look at a
switch without any stack port as a standalone switch. To stack two or more devices, reconfigure the desired
network ports as stack ports in the switches and connect the switches with the resulting stack ports in a ring
or chain topology.

The switches (units) in a stack are connected through stack ports. These switches are then collectively managed
as a single logical switch. In some cases, stack ports can become members in Link Aggregation Groups (LAGs)
increasing the bandwidth of the stack port.

The stack is based on a model of a single active/standby and multiple members. A stack provides the following
benefits:

Cisco Business 350 Series Switches Administration Guide

375

Stack Topology

Annex

• Network capacity can be expanded or contracted dynamically. By adding a unit, the administrator can

dynamically increase the number of ports in the stack while maintaining a single point of management.
Similarly, units can be removed to decrease network capacity.

• The stacked system supports redundancy in the following ways:

• The standby unit becomes the active of the stack if the original active fails.

• The stack system supports two types of topologies: chain and ring. In ring topology, if one of the

stack ports fails, the stack continues to function in chain topology.

• A process known as Fast Stack Link Failover is supported on the ports in a ring stack to reduce the
duration of data packet loss when one of the stack ports link fails. Until the stack recovers to the
new chain topology, a stack unit loops back the packets that are supposed to be sent through its
failed stacking port, and transmits the looped back packets through its remaining stacking port to
the destinations. During Fast Stack Link failover, the active/standby units remain active and
functioning.

Types of Units in Stack

A stack consists of a maximum of eight units. A unit in a stack is one of the following types:

• Active—The active unit’s ID must be either 1 or 2. The stack is managed through the active unit that

manages itself, the stand by unit and the member units.

• Stand by—If the active unit fails, the stand by unit assumes the active role(switchover). The stand by

unit’s ID must be either 1 or 2.

• Member—These units are managed by the active unit.

In order for a group of units to function as a stack, there must be an active-enabled unit. When the active-enabled
unit fails, the stack continues to function as long as there is a stand by unit (the main unit that assumes the
active role).If the stand by unit fails, in addition to the active unit, and the only functioning units are the
member units. These also stop functioning after one minute. This means for example, that if after 1 minute,
you plug in a cable to one of the member units that was running without an active, the link will not come up.

Backward Compatibility of Number of Units in Stack

The stackable switches support anywhere from four units to eight units. This varies based on the switch model.
Upgrading from and earlier software release can be done without changing the configuration files. When a
firmware version, which does not support the hybrid stack modes is loaded to the stack and the stack is
rebooted, the stack reverts to Native Stack mode. When a device in Hybrid stack mode is loaded with a
firmware version that does not support Hybrid stack mode, its system mode reverts to the default system
mode. If a stack’s unit IDs were manually-configured, those units whose ID is greater than 4 are switched to
auto numbering.

Stack Topology

The units in a stack can be connected in one of the following types of topologies:

• Chain Topology—Each unit is connected to the neighboring unit, but there is no cable connection between

the first and last unit.

Cisco Business 350 Series Switches Administration Guide

376

Annex

Stack Topology

• Ring Topology—Each unit is connected to the neighboring unit. The last unit is connected to the first

unit. The following shows a ring topology of an eight-unit stack:

A ring topology is more reliable than a chain topology. The failure of one link in a ring does not affect the
function of the stack, whereas the failure of one link in a chain connection might cause the stack to be split.

Topology Discovery

A stack is established by a process called topology discovery. This process is triggered by a change in the
up/down status of a stack port. The following are examples of events that trigger this process:

• Changing the stack topology from a ring to a chain

• Merging two stacks into a single stack

• Splitting the stack

• Inserting other member units to the stack, for instance because the units previously disconnected from
the stack due to a failure. This can happen in a chain topology if a unit in the middle of the stack fails.

During topology discovery, each unit in a stack exchanges packets, which contain topology information. After
the topology discovery process is completed, each unit contains the stack mapping information of all units in
the stack.

Unit ID Assignment

After topology discovery is completed, each unit in a stack is assigned a unique unit ID. The unit ID is set in
the System Mode and Stack Management page in one of the following ways:

• Automatically (Auto) —The Unit ID is assigned by the topology discovery process. This is the default

setting.

• Manually—The unit ID is manually set to an integer from 1-8.

Duplicate Unit IDs

If you assign the same unit ID to two separate units, only one of them can join the stack with that unit ID. If
auto numbering has been selected, the duplicate unit is assigned a new unit number. If auto numbering was
not selected, the duplicate unit is shut down. The following shows a case where two units were manually
assigned the same unit ID. Unit 1 does not join the stack and is shut down. It did not win the active selection
process between the active-enabled units (1 or 2).

Duplicate Unit Shut Down

Cisco Business 350 Series Switches Administration Guide

377

Stack Changes

Annex

Active Selection Process

The active unit is selected from the active-enabled units (1 or 2). The factors in selecting the active unit are
taken into account in the following priority:

• Force Active—If Force Active is activated on a unit, it is selected.

• System Up Time—The active-enabled units exchange up-time, which is measured in segments of 10
minutes. The unit with the higher number of segments is selected. If both units have the same number
of time segments,and the unit ID of one of the units was set manually while the other unit’s unit ID was
set automatically, the unit with the manually-defined unit ID is selected; otherwise the unit with the
lowest unit ID is selected. If both units IDs are the same, the unit with the lowest MAC address is chosen.

Note

The up time of the stand by unit is retained when it is selected as active in the
switch failover process.

• Unit ID—If both units have the same number of time segments, the unit with the lowest unit ID is

selected.

• MAC Address—If both units IDs are the same, the unit with the lowest MAC address is chosen.

Note

For a stack to operate, it must have an active unit. An active unit is defined as the main unit that assumes the
active role. The stack must contain a unit 1 and/or unit 2 after the active selection process. Otherwise, the
stack and all its units are partially shut down, not as a complete power-off, but with traffic-passing capabilities
halted

Stack Changes

This section describes various events that can cause a change to the stack. A stack topology changes when
one of the following occurs:

• One or more units are connecting and/or disconnecting to and from the stack.

• Any of its stack ports has a link up or down.

• The stack changes between ring and chain formation.

When units are added or removed to and from a stack, it triggers topology changes, master election process,
and/or unit ID assignment.

Connecting a New Unit

When a unit is inserted into the stack, a stack topology change is triggered. The unit ID is assigned (in case
of auto numbering), and the unit is configured by the active unit.

One of the following cases can occur when connecting a new unit to an existing stack:

• No duplicate unit IDs exist.

• Units with user-defined IDs retain their unit ID.

Cisco Business 350 Series Switches Administration Guide

378

Annex

Stack Changes

• Units with automatically-assigned IDs retain their unit ID.

• Factory default units receive unit IDs automatically, beginning from the lowest available ID.

• One or more duplicate unit IDs exist. Auto numbering resolves conflicts and assigns unit IDs. In case of

manual numbering, only one unit retains its unit ID and the other(s) are shutdown.

• The number of units in the stack exceeds the maximum number of units allowed. The new units that
joined the stack are shut down, and a SYSLOG message is generated and appears on the master unit

The following shows an example of auto numbering when an active-enabled unit joins the stack. There are
two units with unit ID = 1. The active selection process selects the best unit to be the active unit. The best
unit is the unit with the higher uptime in segments of 10 minutes. The other unit is made the backup

Auto-numbered Active-enabled Unit

The following shows an example of auto numbering when a new unit joins thes tack. The existing units retain
their ID. The new unit receives the lowest available ID.

Auto Number Unit

The following shows what happens when a user-assigned, active-enabled unit with Unit ID 1 joins a stack
that already has an active unit with user-assigned unit ID1. The newer Unit 1 does not join the stack and is
shutdown.

User-assigned Active-enabled Unit

Cisco Business 350 Series Switches Administration Guide

379

Unit Failure in Stack

Unit Failure in Stack

Annex

If the active unit fails, then the standby unit will take over the primary role and continues to operate the stack
normally.

For the standby switch to be able to take the place of the active switch, both units remain on reserve at all
times. When on reserve mode, the active switch and its standby switches are synchronized with a static
configuration (contained in both the Startup and Running configuration files). The standby switch configuration
file remains on the previous active switch.

Dynamic process-state information, such as the STP state table, dynamically-learned MAC addresses,
dynamically-learned Smartport types, MAC Multicast tables, LACP, and GVRP are not synchronized. When
an active switch is being configured, it synchronizes with the standby unit immediately. Synchronization is
performed as soon as a command is executed. This is transparent.

When an active switch is being configured, it synchronizes the backup immediately. Synchronization is
performed as soon as a command is executed. This is transparent.

If a unit is inserted into a running stack, and is selected as a standby unit, the active switch synchronizes it so
that it has an up-to date configuration, and then generates a SYNC COMPLETE SYSLOG message. This is
a unique SYSLOG message that appears only when standby is converging with the active unit, and looks like
this: %DSYNCH-I-SYNCH_SUCCEEDED: Synchronization with unit 2 is finished successfully.

Active / Standby Switchover

When a active switch fails on the stack, a switchover occurs. The standby unit becomes the active, and all of
its processes and protocol stacks are initialized to take responsibility for the entire stack. As a result, there is
temporarily no traffic forwarding in this unit, but member units remain active.

Note

When STP is used and the ports are in link up, the STP port’s state is temporarily Blocking, and it cannot
forward traffic or learn MAC addresses. This is to prevent spanning tree loops between active units.

Member Unit Handling

While the standby unit becomes the active switch, the member units remain active and continue to forward
packets based on the configuration from the original active switch. This minimizes data traffic interruption
in units. After the standby unit has completed the transition to the active state, it initializes the member units
one at a time by performing the following operations:

• Clear and reset the configuration of the member unit to default (to prevent an incorrect configuration

from the new active unit). As a result, there is no traffic forwarding on the member unit.

• Apply related user configurations to the member unit.

• Exchange dynamic information such as port STP state, dynamic MAC addresses, and link up/down status
between the new active and member unit. Packet forwarding on the member unit resumes after the state
of its ports are set to forwarding by the active switch according to STP.

Note

Packet flooding to unknown Unicast MAC addresses occurs until the MAC
addresses are learned or relearned.

Cisco Business 350 Series Switches Administration Guide

380

Annex

Stack Ports

Stack Ports

Reconnecting the Original Active Unit after Failover

After failover, if the original active switch is connected again, the active selection process is performed. If
the original active switch (unit 1) is reselected to be the active unit, the current active switch (unit 2, which
was the original backup unit) is rebooted and becomes the backup once again.

Note

During active unit failover, the uptime of the standby unit is retained.

Software Auto Synchronization in a Stack

All units in the stack must run the same software version (firmware and boot code). Each unit in a stack
automatically downloads firmware and boot code from the active unit if the firmware and/or boot code that
the unit and the active are running is different. The unit automatically reboots itself to run the new version.

All ports on the device are network (uplink) ports by default. To connect units, you must change the types of
the ports to be used to connect the devices as stack ports. These ports are used to transfer data and protocol
packets among the units

Stack Port Link Aggregation

When two neighboring units are connected, the stack ports connecting them are automatically assigned to a
stack LAG. This feature enables increasing the stack bandwidth of the stack port beyond that of a single port.
There can be up to two stack LAGs per unit.

The stack LAG can be composed of between two and up to the maximum number of stack ports depending
on the unit type.

Stack Port States

Stack ports can be in one of the following states:

• Down—Port operational status is down or stack port operational status is up, but traffic cannot pass on

the port.

• Active—Stack port was added to a stack LAG whose stack port operational status is up and traffic can

pass on the port and it is a member of a stack LAG.

• Standby—Stack port operational status is up and bidirectional traffic can pass on the port, but the port
cannot be added to a stack LAG, and the port does not transmit traffic. Possible reasons for a port being
in standby are:

• Stack ports with different speeds are used to connect a single neighbor.

Backwards Compatibility

The following modes have been expanded in the current software version of the device. Care must be taken
when using these features in previous software versions:

• Stack Port LAG—If a unit whose software supports stack ports in LAGs is connected to a unit whose
software does not support stack ports in LAGs, the stack port connecting the units is not made a member

Cisco Business 350 Series Switches Administration Guide

381

Link Aggregation

Annex

of the stack LAG. The units are connected through the stack ports, and the active stack unit copies its
software to the other unit. The software copied depends on the unit which becomes the active unit.

• Queues Mode—This mode can be changed from 4 QoS queues to 8 QoS queues. There is no issue when
upgrading from previous software versions that did not support 8 queues, since the 4-queue mode is the
default queues mode in the current software version. However, when changing the queues mode to 8
queues, the configuration must be examined and adjusted to meet the desired QoS objectives with the
new queues mode. Changing the queues mode takes effect after rebooting the system. Queue-related
configuration that conflicts with the new queues mode is rejected.

• Stacking Mode—The Stacking mode has been expanded to include hybrid stacking modes. There is no

problem in upgrading from previous software versions, since the device will boot with the existing
stacking mode (Native Stacking mode). If you want to downgrade software from a device that was
configured in a hybrid stacking mode to a software version that does not support hybrid stacking, configure
the device to Native Stacking mode first.

Physical Constraints for Stack LAGs

• A stack LAG must contain ports of the same speed.

• When attempting to connect a unit to a stack whose topology is not a ring/chain (for example, trying to
connect a unit to more than two neighboring units - star topology), only two stack LAGs can be active,
the remainder of the stack ports are set to standby mode (inactive).

Auto Selection of Port Speed

The stacking cable type is discovered automatically when the cable is connected to the port (auto-discovery
is the default setting). The system automatically identifies the stack cable type and selects the highest speed
supported by the cable and the port.

A SYSLOG message (informational level) is displayed when the cable type is not recognized.

Link Aggregation

Overview

Link Aggregation Control Protocol (LACP) is part of the IEEE specification (802.3az) that enables you to
bundle several physical ports together to form a single logical channel (LAG). LAGs multiply the bandwidth,
increase port flexibility, and provide link redundancy between two devices. Link aggregation allows you
combine multiple Ethernet links to a single link between two network devices. The most common combinations
involve connecting a switch to another switch, a server, a network attached storage (NAS) device, or a multiport
WiFi access point.

Network devices and management functions treat the link aggregation group (LAG) of multiple Ethernet
connections as a single link. For example, you can include a LAG in a virtual local area network (VLAN).
You can also configure more than one LAG on the same switch, or add more than two Ethernet links to the
same LAG (the maximum number of links per LAG depends on your device).

Some network devices support Link Aggregation Control Protocol (LACP), which helps to prevent errors in
the link aggregation setup process.

Cisco Business 350 Series Switches Administration Guide

382

Annex

Link Aggregation Set Up

Link Aggregation Benefits

Link Aggregation offers the following benefits:

• Increased reliability and availability- If one of the physical links in the LAG goes down, traffic reassigned

to another physical links.

• Better use of physical resources- Traffic can be load-balanced across the physical links.

• Increased bandwidth- The aggregated physical links deliver higher bandwidth than each individual link.

• Cost effectiveness- A physical network upgrade can be expensive, especially if it requires new cable

runs. Link aggregation increases bandwidth without requiring new equipment.

Link Aggregation Set Up

The following instructions describe in general terms how to set up link aggregation between two devices in
your network.

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Step 6

Step 7

Step 8

Make sure that both devices support link aggregation.

Configure the LAG on each of the two devices.

Make sure that the LAG that you create on each device has the same settings for port speed, duplex mode, flow control,
and MTU size.

Make sure that all ports that are members of a LAG have the same virtual local area network (VLAN) memberships. If
you want to add a LAG to a VLAN, set up the LAG first and then add the LAG to the VLAN; do not add individual ports.

Warning
Do not connect the devices to each other using more than one Ethernet cable until after you set up the LAG on each
device. If you form multiple connections between the two devices and neither device has loop prevention, you create a
network loop. Network loops can slow or stop normal traffic on your network.

Note the ports on each device to which you add the LAG, and make sure that you connect to the correct ones. The LAG
issues an alert and rejects the configuration if the port members have different settings for port speed, duplex mode, or
MTU size, or if you accidentally connect ports that are not members of the LAG.

Use Ethernet or fiber cable to connect the ports that you added to the LAG on each device.

Verify that the port LED for each connected port on each switch is blinking green.

Verify in the admin interface for each device that the link is up.

Cisco Business 350 Series Switches Administration Guide

383

Configure LAG Load Balance

Annex

Configure LAG Load Balance

Log in to the Cisco switch by entering the Username and Password. Click Log In. By default the username and password
are cisco, but since you are working on an existing network, you should have your own username and password. Enter
those credentials instead.

Navigate to Port Management > LAG Management and select the Load Balance Algorithm option. You can select
either MAC Address, or IP/MAC Address. Click Apply.

Note
By default, MAC Address is the option selected for Load Balance Algorithm.

Next, the Success notification should appear on the screen. Click File Operations to save the configuration on the switch
to startup configuration.

The File Operations page will open. Verify that the Source File Name is selected as Running Configuration and
Destination File Name is selected as Startup Configuration. Click Apply to save the configuration.

Procedure

Step 1

Step 2

Step 3

Step 4

UDLD

Overview

Unidirectional Link Detection (UDLD) is a Layer 2-protocol that enables devices connected through fiber-optic
or twisted-pair Ethernet cables to detect unidirectional links. A unidirectional link occurs whenever traffic
from a neighboring device is received by the local device, but traffic from the local device is not received by
the neighbor.

The purpose of UDLD is to detect ports on which the neighbor does not receive traffic from the local device
(unidirectional link) and to shut down those ports. All connected devices must support UDLD for the protocol
to successfully detect unidirectional links. If only the local device supports UDLD, it is not possible for the
device to detect the status of the link. In this case, the status of the link is set to undetermined. The user can
configure whether ports in the undetermined state are shut down or merely trigger notifications.

How UDLD Works

When UDLD is enabled on a port, the following actions are performed:

• UDLD initiates the detection state on the port.

• In this state, UDLD periodically sends messages on every active interface to all neighbors. These
messages contain the device ID of all known neighbors. It sends these messages according to a
user-defined message time.

• UDLD receives UDLD messages from neighboring devices. It caches these messages until the expiration
time (3 times message time) has passed. If a new message is received before the expiration time, the
information in that message replaces the previous one.

Cisco Business 350 Series Switches Administration Guide

384

Annex

Smartport Overview

• When the expiration time expires, the device does the following with the information received:

• If the neighbor message contains the local device ID—The link status of the port is set to bidirectional.

• If the neighbor message does not contain the local device ID—The link status of the port is set to

unidirectional, and the port is shut down.

• If UDLD messages are not received from a neighboring device during the expiration time frame, the link

status of the port is sent to undetermined and the following occurs:

• Device is in normal UDLD mode: A notification is issued.

• Device is in aggressive UDLD mode. The port is shut down.

While the interface is in the bidirectional or the undetermined state, the device periodically sends a message
each message time seconds. The above steps are performed over and over.

Usage Guidelines

Cisco does not recommend enabling UDLD on ports that are connected to devices on which UDLD is not
supported or disabled. Sending UDLD packets on a port connected to a device that does not support UDLD
causes more traffic on the port without providing benefits.

In addition, consider the following when configuring UDLD:

• Set the message time according to how urgent it is to shut down ports with a unidirectional link. The

lower the message time, the more UDLD packets are sent and analyzed, but the sooner the port is shut
down if the link is unidirectional.

• If you want UDLD to be enabled on a copper port, you must enable it per port. When you globally enable

UDLD, it is only enabled on fiber ports.

• Set the UDLD mode to normal when you do not want to shut down ports unless it is known for sure that

the link is unidirectional.

• Set the UDLD mode to aggressive when you want both unidirectional and bidirectional link loss.

Smartport Overview

The Smartport feature provides a convenient way to save and share common configurations. By applying the
same Smartport macro to multiple interfaces, the interfaces share a common set of configurations. A Smartport
macro is a script of CLI (Command Line Interface) commands

A Smartport macro can be applied to an interface by the macro name, or by the Smartport type associated
with the macro. Applying a Smartport macro by macro name can be done only through CLI.

There are two ways to apply a Smartport macro by Smartport type to an interface:

• Static Smartport—You manually assign a Smartport type to an interface. The result is the corresponding

Smartport macro is applied to the interface.

• Auto Smartport—Auto Smartport waits for a device to be attached to the interface before applying a
configuration. When a device is detected from an interface, the Smartport macro (if assigned) that
corresponds to the Smartport type of the attaching device is automatically applied.

Cisco Business 350 Series Switches Administration Guide

385

VLAN Description

Annex

A Smartport is an interface to which a built-in (or user-defined) macro may be applied. These macros are
designed to provide a means of quickly configuring the device to support the communication requirements
and utilize the features of various types of network devices. The network access and QoS requirements vary
if the interface is connected to an IP phone, a printer, or a router and/or Access Point (AP).

VLAN Description

Each VLAN is assigned a VLAN ID (VID) with a value ranging from 1 to 4094. A VLAN member is a port
on a device in a bridged network that may send and receive data from the VLAN. If all packets headed for
that port into the VLAN have no VLAN tag, the port is an untagged member of the VLAN. If all packets
headed for that port into the VLAN include a VLAN tag, that port is a tagged member of the VLAN. A port
can only belong to one untagged VLAN, although it can belong to several tagged VLANs.

In VLAN Access mode, a port can only belong to one VLAN. The port can be part of one or more VLANs
if it is in General or Trunk mode. VLANs are used to solve security and scalability problems. VLAN traffic
stays within the VLAN and is terminated at VLAN devices. It also simplifies network configuration by
conceptually linking devices without requiring them to be physically relocated.

A four-byte VLAN tag is applied to each Ethernet frame if it is VLAN-tagged. The tag comprises a VLAN
ID ranging from 1 to 4094, as well as a VLAN Priority Tag (VPT) ranging from 0 to 7 When a frame enters
a VLAN-aware device, the four-byte VLAN tag in the frame is used to classify it as belonging to a VLAN.
The frame is classified to the VLAN based on the PVID (Port VLAN Identifier) defined at the ingress port
where the frame is received if there is no VLAN tag in the frame or if the packet is merely priority-tagged. If
Ingress Filtering is enabled and the ingress port is not a member of the VLAN to which the packet belongs,
the frame is dropped at the ingress port. Only if the VID in the VLAN tag is 0 is a frame considered
priority-tagged. Frames that belong to a VLAN stay in the VLAN.

This is accomplished by transmitting or forwarding a frame only to members of the target VLAN's egress
ports. A VLAN's egress port can be either tagged or untagged.

The egress port's role is as follows:

• If the egress port is a tagged member of the target VLAN and the original frame does not include a VLAN

tag, the egress port adds a VLAN tag to the frame.

• If the egress port is an untagged member of the target VLAN and the original frame has a VLAN tag,

the VLAN tag is removed from the frame.

Layer 2 is where VLANs work. All VLAN traffic (Unicast, Broadcast, and Multicast) is contained within the
VLAN. Over the Ethernet MAC layer, devices connected to separate VLANs do not have direct connectivity.
Only Layer 3 routers allow devices from different VLANs to interact with one another. If each VLAN represents
an IP subnet, an IP router is necessary to route IP traffic between them.

The IP router could be a standard router with only one VLAN connected to each of its ports. VLAN untagged
traffic to and from a standard IP router is required. Each of the IP router's interfaces can connect to one or
more VLANs, making it a VLAN-aware IP router. Traffic to and from a VLAN-aware IP router can be VLAN
tagged or untagged.

Generic VLAN Registration Protocol is used by adjacent VLAN-aware devices to communicate VLAN
information (GVRP). VLAN information is thus conveyed across a bridged network. Based on the GVRP
information exchanged by devices, VLANs can be formed statically or dynamically on a device. A VLAN

VLAN Roles

Cisco Business 350 Series Switches Administration Guide

386

Annex

Private VLAN

Private VLAN

can be static or dynamic (thanks to the GVRP), but not both at the same time. Refer to the GVRP Settings
section for further information about GVRP.

QinQ

QinQ provides isolation between service provider networks and customers' networks. The device is a provider
bridge that supports port-based c-tagged service interface.

With QinQ, the device adds an ID tag known as Service Tag (S-tag) to forward packets into the provider
network. The S-tag is used to segregate traffic between various customers, while preserving the customer
VLAN tags.

Customer traffic is encapsulated with an S-tag with TPID 0x8100, regardless of whether it was originally
c-tagged or untagged. The S-tag enables this traffic to be treated as an aggregate within a provider bridge
network, where the bridging is based on the S-tag VID (S-VID) only.

The S-Tag is preserved while traffic is forwarded through the network service provider's infrastructure, and
is later removed by an egress device.

An additional benefit of QinQ is that there is no need to configure customers' edge devices.

The Private VLAN feature provides layer-2 isolation between ports. This means that at the level of bridging
traffic, as opposed to IP routing, ports that share the same Broadcast domain cannot communicate with each
other. The ports in a private VLAN can be located anywhere in the layer 2 network, meaning that they do not
have to be on the same switch. The private VLAN is designed to receive untagged or priority-tagged traffic
and transmit untagged traffic.

The following types of ports can be members in a private VLAN:

• Promiscuous—A promiscuous port can communicate with all ports of the same private VLAN. These

ports connect servers and routers.

• Community (host)—Community ports can define a group of ports that are member in the same Layer 2
domain. They are isolated at Layer 2 from other communities and from isolated ports. These ports connect
host ports.

• Isolated (host)—An isolated port has complete Layer 2 isolation from the other isolated and community

ports within the same private VLAN. These ports connect host ports.

The following types of private VLANs exist:

• Primary VLAN—The primary VLAN is used to enable Layer 2 connectivity from promiscuous ports to

isolated and to community ports. There can only be a single primary VLAN per private VLAN.

• Isolated VLAN (also known as a Secondary VLAN)—An isolated VLAN is used to enable isolated ports
to send traffic to the primary VLAN. There can only be a single, isolated VLAN per private VLAN.

• Community VLAN (also known as a Secondary VLAN)—To create a sub-group of ports (community)
within a VLAN, the ports must be added a community VLAN. The community VLAN is used to enable
Layer 2 connectivity from community ports to promiscuous ports and to community ports of the same
community. There can be a single community VLAN for each community and multiple community
VLANs can coexist in the system for the same private VLAN).

Host traffic is sent on isolated and community VLANs, while server and router traffic is sent on the primary
VLAN.

Cisco Business 350 Series Switches Administration Guide

387

Configure a VLAN on a Switch

Annex

Shared MAC address learning exists between all the VLANs that are members in the same private VLAN
(although the switch supports independent VLAN learning). This enables Unicast traffic, despite the fact that
host MAC addresses are learned by isolated and community VLANs, while routers and server MAC addresses
are learned by the primary VLAN.

A private VLAN-port can only be added to one private VLAN. Other port types, such as access or trunk ports,
can be added to the individual VLANs that make up the private VLAN (since they are regular 802.1Q VLANs).

A private VLAN can be configured to span across multiple switches by setting inter-switch ports as trunk
ports and adding them to all VLANs in the private VLAN. Inter-switch trunk ports send and receive tagged
traffic of the private VLAN’s various VLANs (primary, isolated and the communities).

Configure a VLAN on a Switch

Virtual Local Area Network (VLAN) creation allows you to make separate broadcast domains on a switch.
The broadcast domains can associate with one another with the help of a Layer 3 device such as a router. A
VLAN is mainly used to form groups among the hosts regardless of where the hosts are physically located.
Thus, a VLAN improves security with the help of group formation among the hosts. When a VLAN is created,
it has no effect until that VLAN is attached to at least one port either manually or dynamically. One of the
most common reasons to set up a VLAN is to set up a separate VLAN for voice, and a separate VLAN for
data. This directs the packets for both types of data despite using the same network.

Create a VLAN

Procedure

Step 1

Step 2

Step 3

Log in to the web-based utility and choose VLAN Management > VLAN Settings.

Under the VLAN Table area, click Add to create a new VLAN.

VLAN can be added in two different methods as shown by the options below. Choose a radio button that corresponds to
the desired method:

• VLAN — Use this method to create a specific VLAN.

• Range — Use this method to create a range VLANs.

Step 4

Step 5

If you chose VLAN in Step 3, enter the VLAN ID in the VLAN ID field. The range must be between 2 to 4094.

In the VLAN Name field, enter a name for the VLAN. For this example, the VLAN Name will be Accounting. Up to 32
characters may be used.

Cisco Business 350 Series Switches Administration Guide

388

Annex

Step 6

Step 7

Step 8

GVRP Configuration

Check the VLAN Interface State check box to enable the VLAN interface state; it is already checked by default. If not,
the VLAN will be effectively shut down, and nothing will be able to be transmitted or received through the VLAN.

Check the Link Status SNMP Traps check box if you want to enable the generation of SNMP traps. This is enabled by
default.

If you chose Range in Step 3, enter the range of the VLANs in the VLAN Range field. The available range is 2–4094.
For this example, the VLAN Range is from 3 to 52.

Note
Up to 100 VLANs can be created at a time.

Step 9

Click Apply.

GVRP Configuration

GVRP is supported only on COS switches. GVRP will run only on 802.1Q trunk ports and is used primarily
to prune traffic from VLANs that does not need to be passed between trunking switches. Use the following
steps to configure GVRP. To ensure that port remains in General mode it is strongly advised to disable
smartport macro auto on each interface participating in GVRP.

Procedure

Step 1

Configure the switch with the desired VLANs. For example, you can configure the following settings:

• Switch 1 can be assigned a VLAN ID of 1 as the default, then 300, 400 and 500.

• Switch 2 can be assigned a VLAN ID of 1 as the default.

• Switch 3 can be assigned a VLAN ID of 1 as the default, then 100 and 200.

Step 2

Step 3

Step 4

Step 5

Step 6

To enable GVRP on an interface, it must be configured in General Mode, otherwise the switch will not send any GARP
messages.

Enable GVRP globally. By default GVRP is not enabled for the switch. You must first enable GVRP on the switch before
you can configure the 802.1Q ports for GVRP operation.

Configure the port for 802.1Q operation. GVRP will run only on ports that are configured for 802.1Q trunking.

Configure the port GVRP. GVRP must be configured on both sides of the trunk to work correctly.

(Optional) Configure the port registration mode. By default GVRP ports are in normal registration mode. These ports
use GVRP join messages from neighboring switches to prune the VLANs running across the 802.1Q trunk link. If the
device on the other side is not capable of sending GVRP messages, or if you do not want to allow the switch to prune
any of the VLANs, use the fixed mode. Fixed mode ports will forward for all VLANs that exist in the switch database.
Ports in forbidden mode forward only for VLAN 1.

Voice VLAN Configuration

This troubleshooting tip is for Voice VLAN configuration.

Cisco Business 350 Series Switches Administration Guide

389

Delete a Voice VLAN

Annex

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Step 6

Step 7

Step 8

Step 9

Step 10

Step 11

Step 12

Create a VLAN on the switch. For example, if the data VLAN is set at 2 and the Voice VLAN is set at 5, then assign
VLAN 5 in the Auto Voice VLAN tab.

Make sure that you see the operational Voice VLAN set to 5.

Change Display Mode from Basic to Advanced.

Next, in the Interface Settings under VLAN Management, change the port mode from Access to Trunk.

Next, under Port to VLAN Membership, set the data VLAN as untagged and Voice VLAN as tagged on the port that
is connected to the IP phones. Do the same for the desktops and laptops that are connected to the IP phones.

Go to IP configuration > IPv4 Interface and assign an IP to both VLAN 2 and VLAN 5.

Create a DHCP pool for both VLANs just in case the DHCP server is enabled on the device. (Optional)

Go to Smart port tab, make sure Smart port is enabled.

Make sure IP Phone+Desktop is checked under Device Detection.

Go to Smartport Type settings and select Macro for IP Phone+Desktop.

Click on Edit. Make sure Macro Type is selected as Built-in Macro.

Change Macro Parameters.

• Change the Parameter2 value to the value of Data VLAN ID (in this case 2 as data VLAN is 2).

• Parameter3 value will automatically show 5 in case you see the operational voice VLAN as 5 under Auto voice

VLAN settings.

Step 13

Save the running configuration to start up configuration.

Delete a Voice VLAN

Note

If you run into an instance where you are not able to delete the voice VLAN and getting an error message:
“VLAN xxx cannot be deleted because it is used as the agreed Voice VLAN”, this is because of a behavior
of the Voice VLAN. By default, our switches are configured with “triggered auto voice VLAN” option set
to enable on any firmware 2.5.5.x and lower. Once the switch receives the VSDP packets from other switch
or CDP packets from UC router, the voice VLAN is automatically enabled.

If you want to delete the Voice VLAN for one reason or the other, you will need to follow a sequence of steps
for it to succeed. Via the GUI, here what you can do:

Procedure

Step 1

Step 2

Select VLAN Management > Voice VLAN > Properties, and set Dynamic Voice VLAN to Disable.

In VLAN Management > Voice VLAN > Properties, and set Voice VLAN Id to 1 (this is to remove the Voice ID that
is being used in the setup and set the value to default 1).

Step 3

Return back to VLAN Management > VLAN Settings and delete the VLAN that was being used as the Voice VLAN

Cisco Business 350 Series Switches Administration Guide

390

Annex

Troubleshooting Link Flapping

Note
However, that if you re-enable Dynamic Voice VLAN, the VLAN you removed will automatically be re-created and set
as Voice VLAN.

Troubleshooting Link Flapping

This troubleshooting tip will help to resolve link flapping issues in the Cisco Business switches.

Note

Whenever link flapping occurs between switches that are either stacked or there is an uplink with the another
switch; follow the steps below to get the issue resolved.

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Make sure that both switches are upgraded to the latest firmware version and that both switches are running the same
firmware.

Disable the Discovery-Bonjour Protocol by clicking Administration > Discovery-Bonjour > Disable.

Disable EEE (Energy Efficient Ethernet) on both the switches, by clicking Port Management>Green
ethernet>Properties> 802.3 Energy Efficient Ethernet (EEE)> Disable.

Enable Link Flap Prevention in both the switches by clicking on Port Management>Error Recovery.Next, check
Enable in Link Flap Prevention to enable.

Disable LLDP if issue persists after the Steps 1 to 4. Click Administration > Discovery-LLDP Properties > LLDP
Status > Disable).

If Steps 1 to 5 do not help to resolve the link flapping, then remove all port on the port used for uplink/stacking.

Important: In case stacking is configured then you must remove the ports from stacking and configure them
again.

Identifying Link Flapping

A link flap occurs when a physical interface on the switch continually goes up and down, three or more times
a second for duration of at least ten seconds. The common cause is usually related to bad, unsupported, or
non-standard cable or Small Form-Factor Pluggable (SFP) or related to other link synchronization issues. The
cause for link flapping can be intermittent or permanent.

Since link flapping tends to be a physical interference, this section explains the steps that can be taken to
diagnose and prevent it.

Cisco Business 350 Series Switches Administration Guide

391

Configure Link Flap Prevention

Annex

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Try changing cables and monitor. If the issue persists, proceed to Step 2

Go to Status and Statistics > Diagnostics > Copper Test.

Select the Port from the drop-down menu and click on Copper Test.

A warning will appear. Be aware that the port will be shut down for a short period of time. Choose OK.

The Test Results will be displayed. If it says OK, it is most likely not the cable. If the results are not OK, change the cable
and repeat the copper test to confirm that it is not the cable.

Analyzing your Topology

To confirm it is a physical problem and not a configuration issue on the switch, you need to analyze the devices connected
to your switch. Check the following:

a. What devices are connected to the switch?

• Analyze each device connected to the switch. Have you experienced any issues with those devices?

b. Which ports are causing the problem and which devices are connected to those ports?

• Test the ports by connecting other devices and verifying if the problem continues.

• See if the device is causing issues on another port.

c.

Is it the port or the device?

• Determining whether it is the port, or the device determines how to continue the troubleshooting process.

• If it is the device, you may have to contact support management for that device.

• If you have determined it is the port, it is time to check whether the issue is related to configuration or a physical

one.

Configure Link Flap Prevention

Link flap prevention minimizes the disruption to switch and network operations in a link flap situation. It
stabilizes the network topology by automatically setting the ports that experience excessive link flap events
to err-disable. This mechanism also provides time to debug and locate the root cause for the flapping. A
Syslog message or Simple Network Management Protocol (SNMP) trap is sent to alert regarding link flap
and port shutdown. The interface will become active again only if specifically enabled by you or your system
administrator.

Procedure

Step 1

Step 2

Log into your switch Web User Interface (UI).

Change to Advanced Mode.

Cisco Business 350 Series Switches Administration Guide

392

Annex

Spanning Tree Protocol

Step 3

Step 4

Step 5

Go to Port Management > Port Settings.

Check the Enable box for Link Flap Prevention. Press Apply.

Click on Save to save your configurations.

Spanning Tree Protocol

Spanning Tree Protocol (STP) is a Layer 2 link management protocol that provides path redundancy while
preventing loops in the network. For a Layer 2 Ethernet network to function properly, only one active path
can exist between any two stations. Multiple active paths among end stations cause loops in the network. If
a loop exists in the network, end stations might receive duplicate messages.

The STP uses a spanning-tree algorithm to select one switch of a redundantly connected network as the root
of the spanning tree. The algorithm calculates the best loop-free path through a switched Layer 2 network by
assigning a role to each port based on the role of the port in the active topology:

• Root—A forwarding port elected for the spanning-tree topology

• Designated—A forwarding port elected for every switched LAN segment

• Alternate—A blocked port providing an alternate path to the root bridge in the spanning tree

• Backup—A blocked port in a loopback configuration

The switch that has all of its ports as the designated role or as the backup role is the root switch. The switch
that has at least one of its ports in the designated role is called the designated switch.

STP provides a tree topology for any arrangement of switches and interconnecting links, by creating a unique
path between end stations on a network, and thereby eliminating loops.

The device supports the following Spanning Tree Protocol versions:

• Classic STP- Provides a single path between any two end stations, avoiding and eliminating loops.

• Rapid STP (RSTP)- Detects network topologies to provide faster convergence of the spanning tree. This
is most effective when the network topology is naturally tree-structured, and therefore faster convergence
might be possible. RSTP is enabled by default.

• Multiple STP (MSTP)- MSTP is based on RSTP. It detects Layer 2 loops, and attempts to mitigate them
by preventing the involved port from transmitting traffic. Since loops exist on a per-Layer 2-domain
basis, a situation can occur when a port is blocked to eliminate a STP loop. Traffic will be forwarded to
the port that is not blocked, and no traffic will be forwarded to the port that is blocked. This is not an
efficient usage of bandwidth as the blocked port will always be unused. MSTP solves this problem by
enabling several STP instances, so that it is possible to detect and mitigate loops separately in each
instance. This enables a port to be blocked for one or more STP instances but non blocked for other STP
instances. If different VLANs are associated with different STP instances, then their traffic will be relayed
based on the STP port state of their associated MST instances. Better bandwidth utilization results.

• PVST+ /RPVST+ - (Rapid) Per VLAN Spanning Tree

• PVST+ is a protocol that runs a separate instance of the 802.1Q STP standard protocol per VLAN

• Rapid PVST+ is a protocol that runs a separate instance of the 802.1Q RSTP standard protocol per

VLAN.

Cisco Business 350 Series Switches Administration Guide

393

Spanning Tree Protocol

Annex

As part of PVST/RPVST+ operation, a separate PVST frame is sent for each VLAN defined on a
port. This enables maintaining state and topology per each VLAN

• SSTP- Cisco switches use special Shared Spanning Tree Protocol (SSTP) Bridge Protocol Data Units

(BPDUs) to exchange PVST+ and rapid PVST+ spanning tree topology information. They transmit SSTP
BPDUs to the Cisco shared spanning tree MAC address 01-00-0C-CC-CC-CD. These BPDUs have a
format based on a proprietary enhancement of IEEE standard 802.1Q. On the native VLAN, these BPDUs
are untagged. When a port is configured in trunk mode with multiple VLANs, then it transmits the SSTP
BPDUs on that port tagged for those VLANs.

Interoperation Between Spanning Tree Protocols

There are two main aspects to the interoperation of IEEE standard MSTP (including RSTP and STP) with
PVST+ (and rapid PVST+). The first involves forming a common spanning tree between switches and regions
running MSTP and PVST+. The second involves tunneling PVST+ spanning trees across MSTP regions.

When a Cisco switch configured with PVST+ receives IEEE standard RSTP BPDUs on a port, it recognizes
them, and sends two versions of BPDUs on the port: SSTP format BPDUs and IEEE standard STP BPDUs.
Similarly, a switch configured with rapid PVST+ recognizes IEEE standard RSTP BPDUs, and on any port
that receives RSTP BPDUs, it sends two versions of BPDUs: SSTP format and IEEE standard RSTP format
BPDUs.

There are differences between the ways that MSTP and PVST+ map spanning tree instances to VLANs: we
know that PVST+ creates a spanning tree instance for every VLAN, whereas MSTP maps one or more VLANs
to each MST instance. At the point where a PVST+ region meets an MSTP region, the set of PVST+ instances
does not generally match the set of MST instances. Therefore, the PVST+ region and the MSTP region need
to communicate with each other on a single common spanning tree instance.

Interoperation between an MSTP region and a PVST+ region via the Common Spanning Tree is achieved as
follows.

MST and PVST+ both offer loop-free layer two topologies but they each use a different approach:

• MST maps multiple VLANs to an instance, reducing the number of spanning-tree instances.

• PVST+ calculates an instance for each spanning-tree instance.

PVST+ sends BPDUs for each instance/VLAN so you could let MST process each BPDU separately with the
instance that is configured for the VLAN.

When an MST region is connected to a PVST+ topology, MST simulates PVST+ with a PVST simulation
mechanism. The MST region will send PVST+ BPDUs (one for each VLAN) on the interfaces that are
connected to PVST+ switches. These BPDUs all carry the same information and advertise the same root
bridge. The interfaces that connect to the PVST+ topology are called boundary interfaces/ports. Since PVST+
switches now receive BPDUs for each VLAN from MST carrying the same information, they will all make
the same decisions when selecting a root bridge, root port, etc.

It is easiest to configure your network so that the MST region is the root bridge in your network. If your
PVST+ domain has the root bridge, then MST will use the same root port for all VLANs. If the root bridge
is in your MST region, then you change the cost per VLAN on your PVST+ switches to use different root
ports and use a bit of load balancing.

Cisco Business 350 Series Switches Administration Guide

394

Annex

RSPAN Configuration

RSPAN Configuration

SPAN (Switch Port Analyzer), also known as port mirroring or port monitoring, selects network traffic for
analysis by a network analyzer. A Cisco Switch Probe device or another Remote Monitoring (RMON) probe
can be used as the network analyzer.

Port mirroring is a network device feature that sends a copy of network packets seen on a single device port,
multiple device ports, or an entire Virtual Local Area Network (VLAN) to a network monitoring connection
on another device port. This is commonly used for network appliances that require network traffic monitoring,
such as intrusion detection systems. The data packets are processed by a network analyzer connected to the
monitoring port for diagnosis, debugging, and performance monitoring.

The Remote Switch Port Analyzer (RSPAN) is a SPAN extension. RSPAN extends SPAN by allowing you
to monitor multiple switches across your network and define the analyzer port on a remote switch. This means
you'll be able to centralize your network capture devices.

RSPAN works by mirroring traffic from an RSPAN session's source ports onto a VLAN dedicated to the
RSPAN session. This VLAN is then trunked to other switches, allowing RSPAN session traffic to traverse
multiple switches. Traffic from the RSPAN session VLAN is simply mirrored out the destination port on the
switch that contains the session's destination port.

The traffic for each RSPAN session is carried over a user-specified RSPAN VLAN that is dedicated for that
RSPAN session in all participating switches. The traffic from the source interfaces on the start device is copied
to the RSPAN VLAN through a reflector port. This is a physical port that has to be set. It is used exclusively
to build an RSPAN session. The "network" keyword is required when specifying the reflector port, and
non-RSPAN traffic is allowed over the link.

The reflector port has these characteristics:

• It can be a physical port that is assigned to an EtherChannel group, even if the EtherChannel group is
specified as a SPAN source. The port is removed from the group while it is configured as a reflector
port.

• A port used as a reflector port cannot be a SPAN source or destination port, nor can a port be a reflector

port for more than one session at a time.

• It is invisible to all VLANs.

• Spanning tree is automatically disabled on a reflector port.

• A reflector port receives copies of sent and received traffic for all monitored source ports.

RSPAN Traffic Flow

• Each RSPAN session's traffic is routed over a user-specified RSPAN VLAN that is dedicated to that

RSPAN session in all participating switches.

• The traffic from the start device's source interfaces is copied to the RSPAN VLAN via a reflector port.
This is a physical port that must be configured and requires a "network" keyword that allows other traffic
over the link.

• This reflector port serves as a mechanism for copying packets to an RSPAN VLAN.

• RSPAN traffic is then routed through trunk ports on intermediate devices to the final switch's destination

session.

Cisco Business 350 Series Switches Administration Guide

395

Multicast

Annex

Multicast

• The RSPAN VLAN is monitored by the destination switch and copied to a destination port.

RSPAN Port Membership Rules

• On all switches — Membership in RSPAN VLAN can be tagged only.

• Start Switch

• SPAN source interfaces are not permitted to be members of the RSPAN VLAN.

• Reflector port cannot be a member of this VLAN.

• Intermediate Switch

• It is recommended that RSPAN membership be removed from all ports that are not used to pass

mirrored traffic.

• An RSPAN VLAN typically has two ports.

• Final Switch

• Mirrored traffic requires that the source ports be members of the RSPAN VLAN.

• RSPAN membership should be removed from all other ports, including the destination interface.

Multicast offers an efficient communication mechanism for sending messages to multiple recipients in separate
locations. It is also capable of supporting many-to-many and many-to-one communication.

Multicast applications use User Datagram Protocol (UDP) on IP. Messages are sent by a source (called the
sender) and will send messages (termed as a stream) even if there is not another device on the network interested
in receiving that information. Receivers, on the other hand, must subscribe to a particular multicast stream in
order to inform the network to forward those messages.

IP multicasting is an efficient way to use network resources, especially for bandwidth-intensive services such
as audio and video. IP multicast routing enables a host (source) to send packets to a group of hosts (receivers)
anywhere within the IP network by using a special form of IP address called the IP multicast group address.
The sending host inserts the multicast group address into the IP destination address field of the packet, and
IP multicast routers and multilayer switches forward incoming IP multicast packets out all interfaces that lead
to members of the multicast group. Any host, regardless of whether it is a member of a group, can send to a
group. However, only the members of a group receive the message

Default IP Multicast Routing Configuration

This table displays the default IP multicast routing configuration.

Table5:DefaultIPMulticastRoutingConfiguration

Feature

Multicast routing

Default Settings

Disabled on all interfaces.

Cisco Business 350 Series Switches Administration Guide

396

Annex

Understanding IGMP

Feature

Candidate BSRs

Candidate RPs

Shortest-path tree threshold rate

Default Settings

Disabled.

Disabled.

0 kb/s.

Understanding IGMP

Internet Group Management Protocol (IGMP) is a protocol designed for multicast purposes. With IGMP, you
can establish group memberships between different users within a network. IGMP is mainly used for multimedia
streaming, such as video-chat, between different users in a network. Snooping is the term used when a third
party in a communication listens or observes the current connection data traffic. Therefore, IGMP Snooping
is a process that listens specifically to multicast traffic. You can enable IGMP Snooping to forward multicast
traffic to only already registered multicast clients on specific ports of the switch. This way, the multicast
frames are only forwarded to a specific multicast client within a VLAN instead of to all the users in that
VLAN.

Multicast is the network layer technique used to transmit data packets from one host to selected hosts in the
network. At the lower layer, the switch broadcasts the multicast traffic on all ports, even if only one host needs
to receive it. Internet Group Management Protocol (IGMP) snooping is used to forward Internet Protocol
version 4 (IPv4) multicast traffic to the desired host. On the other hand, Multicast Listener Discovery (MLD)
snooping is used to forward Internet Protocol version 6 (IPv6) multicast traffic to the desired hosts.

When IGMP is enabled, it detects the IGMP messages exchanged between the IPv4 router and the multicast
hosts attached to the interfaces. It then maintains a table that restricts IPv4 multicast traffic and forwards them
dynamically to the parts that need to receive them.

The following configurations are prerequisites for configuring IGMP.

1. Configure Virtual Local Area Network (VLAN).

2. Enable Bridge Multicast Filtering.

When MLD is enabled, it detects the MLD messages exchanged between the IPv6 router and the multicast
hosts attached to the interfaces. It then maintains a table that restricts IPv6 multicast traffic and forwards them
dynamically to the ports that need to receive them.

IGMP_MLD Proxy

IGMP/MLD Proxy is a simple IP Multicast protocol. Using IGMP/MLD Proxy to replicate Multicast traffic
on devices like edge boxes can make the design and installation of these devices a lot easier. It decreases not
just the cost of the devices, but also the operational overhead, by not supporting more advanced Multicast
routing protocols like Protocol Independent Multicast (PIM) or Distance Vector Multicast Routing Protocol
(DVMRP).

Another benefit is that it makes proxy devices independent of the core network routers' Multicast routing
protocol. As a result, proxy devices are simple to set up in any Multicast network.

Cisco Business 350 Series Switches Administration Guide

397

Configuring IGMP Snooping for Multicast Forwarding

Annex

IGMP/MLD Proxy Tree

The IGMP/MLD Proxy operates in a simple tree topology in which a robust Multicast routing protocol is not
required (for example, PIM). It is sufficient to utilize a simple IPM Routing system based on learning group
membership and proxy group membership information and forwarding Multicast packets based on that
information. Each proxy device must be manually setup by identifying upstream and downstream interfaces.

In addition, the proxying tree topology's IP addressing scheme should be adjusted such that a proxy device
can win the IGMP/MLD Querier election and forward Multicast traffic. Within the tree, there should be no
other Multicast routers except the proxy devices, and the root of the tree should be connected to a larger
multicast structure.

A proxy device that uses IGMP/MLD forwarding has a single upstream interface and one or more downstream
interfaces. These designations are explicitly configured; no protocol exists to determine the type of each
interface. On its downstream interfaces, a proxy device performs the router portion of IGMP/MLD, and on
its upstream interface, it performs the host portion of IGMP/MLD.

Forwarding Rules and Querier

The following rules are applied.

• A Multicast packet received on the upstream interface is forwarded on all downstream interfaces requesting

the packet only if the proxy device is the querier on the interfaces.

• A proxy device drops Multicast packets received on a downstream interface if it is not the querier on the

interface.

• A Multicast packet received on a downstream interface on which the proxy device is the querier is

forwarded on the upstream interface and on all downstream interfaces requesting the packet only if the
proxy device is the querier on the interfaces.

Configuring IGMP Snooping for Multicast Forwarding

For IGMP to work, an IGMP querier is required. While a Multicast router is more appropriate in Multicast
handling, the Cisco Small Business Switches can fulfill part of that role as long as the configuration is done
properly.

Because of IGMP snooping is linked to the VLAN to which multicast traffic is flowing, one can think of
having a multicast sever located in one VLAN while the subscriber is located in a different VLAN.

In this setup, 2 VLANs will be used. One VLAN where multicast traffic will take place, VLAN 115, and the
second VLAN is the default; in our case, it is VLAN 1.

Procedure

Step 1

For the VLAN assignment, Switch B, the non-querier switch is uplinked to SW A, the querier through their ports 3.
Both ports will be set as Trunk 1U, 115T (VLAN 1 untagged, VLAN 115 tagged).

a) Port 1 of switch A will have the Multicast server connected to it, VLAN 115U, Access
b) Port 2 of switch A will have the subscriber connected to it, VLAN 115U, Access
c) Port 1 of switch B will have the subscriber connected to it, VLAN 115U, Access
d) Port 2 of switch B will have the subscriber connected to it, VLAN 115U, Access
e) Port 10 of Switch A will have the router connected to it, VLAN 1U, 115T, Trunk

Cisco Business 350 Series Switches Administration Guide

398

Annex

Step 2

Step 3

Configuring IGMP Snooping for Multicast Forwarding

The port on the router to which the switch is connected to should be a trunk port VLAN 1U, 115T. Make sure
corresponding IP addresses, and DHPC settings are set as appropriate.

Go to the main configuration page for Multicast > IGMP Snooping on the switch. The location of this page will be
different based on the switch model.

Step 4

Check Enable for the following:

• IGMP Snooping Status

• IGMP Querier Status

Step 5

Step 6

Step 7

Step 8

Step 9

Step 10

Step 11

Step 12

Step 13

Step 14

Step 15

Step 16

Step 17

Step 18

Step 19

Step 20

Step 21

Step 22

Next, select VLAN 115 and click Edit.

Check Enable to enable IGMP Snooping Status.

Check MRouter Ports Auto Learn to enable. This option is for the switch to automatically learn where the querier
(Multicast Router) is located. Therefore, do no check this option if the switch will be acting as the querier.

Check Immediate Leave to enable. This option can be enabled or disabled without fear of side effects to IGMP Snooping
functionality. When enabled, it is meant to reduce the time it takes to block unnecessary IGMP traffic sent to a device
port.

Leave the Last Member Query Counter to its default setting and close the window to proceed to the next step.

Go back to the main configuration page for Multicast > IGMP Snooping on the switch. The location of this page will
be different based on the switch model.

Check IGMP Querier Status to enable. Only enable this option if this switch will be acting as a querier, otherwise,
leave it alone. In our case, only one querier is being set.

Next, select VLAN 115 and click Edit.

Check IGMP Querier Status to enable the switch to act as a querier. Please do so only if this switch is intended to act
as a querier. In most setup, only one querier is needed.

Check IGMP Querier Election. This option can be used to manage a situation where more than 1 querier in the VLAN
is being used and that IGMP Querier Status is globally enabled on the second querier.

Select the IGM Querier version, (version 2 or version 3). Most of the time it will be version 2 since selecting version
3 is used when there are switches and /or routers in the VLAN that perform source-specific IP Multicast forwarding.

Select “User Defined” for “Querier Source IP address” and select the IP address of the switch that is acting as the
querier.

Now that tweaks have been made on snooping page, we need to enable Bridge multicast Filtering to make the whole
thing to work. Go to Multicast > Properties on the web UI of the switch.

Check Bridge Multicast Filtering Status to enable the switch to handle multicast in concert with IGMP snooping. If
this feature is not checked, which is the default, multicast traffic is seen across all the ports.

Select VLAN 115 or any specific VLAN. Select the “Forwarding Method”; here we selected “IP Group Address” so
that Multicast IP address is seen in “Multicast /IP Multicast Group Address” table instead of MAC addresses in “Multicast
/MAC Group Address” table if “MAC Group Address” was chosen instead.

By default, Multicast Router Port is set to None. No need to adjust anything here. On a non-querier switch, the uplink
port to the querier device will be selected as Dynamic. To check on this, select VLAN 115, hit “go” and note port 3 is
selected on Dynamic row. This is to indicate that switch B is a non-querier but has detected a querier on its uplink port.

Click Multicast > Forward All and make sure that it is set to None. It is normally set to "None" by default. This also
applies to the querier switch.

Click Multicast > Unregistered Multicast. The default setting is set to Forwarding all, meaning, all multicast traffic,
registered or unregistered are forwarded. If you do not want unregistered traffic to be forwarded, then set it to “Filtering”
which is recommended, and only keep the “Forwarding” setting selected only on ports where the Multicast server
machines are connected.

Cisco Business 350 Series Switches Administration Guide

399

802_1x Overview

Annex

Step 23

Test to see if it works. Using VLC as the video streaming program and the video subscriber client, connect the devices
are shown in the diagram. From the VLC server, start streaming video and start the client to subscribe to those streams.
The results:

Using VLC as the video streaming program and the video subscriber client, connect the devices are shown in the
diagram. From the VLC server, start streaming video and start the client to subscribe to those streams. The results:

• Verify that the Multicast IP address is properly populated on Multicast /IP Multicast Group Address in VLAN

115. This is an indication that the client has successfully subscribed to the Video Streams

• In a setup of more than one switch, verify that the switch that is not acting as the querier has successfully identified
the querier. On a non-querier switch, the uplink port to the querier device will be selected as Dynamic. To check
on this, select VLAN 115, hit go and note port 3 is selected on Dynamic row. This is to indicate that this SW B
is a non-querier but has detected a querier on its uplink port.

Step 24

By default, multicast traffic is set on all ports on the switch until Multicast Bridge Filtering is enabled. If multicast
traffic is emanated from VLAN x while subscribers are on VLAN y, the above configuration will not work. The use
of Multicast TV can be used to accommodate this special configuration.

802_1x Overview

802.1x authentication restricts unauthorized clients from connecting to a LAN through publicity-accessible
ports. 802.1x authentication is a client-server model. In this model, network devices have the following specific
roles.

• Client or supplicant

• Authenticator

• Authentication server

A network device can be either a client/supplicant, authenticator or both per port.

Client or Supplicant

A client or supplicant is a network device that requests access to the LAN. The client is connected to an
authenticator.

If the client uses the 802.1x protocol for authentication, it runs the supplicant part of the 802.1x protocol and
the client part of the EAP protocol.

Authenticator

An authenticator is a network device that provides network services and to which supplicant ports are connected.
The following authentication modes on ports are supported.

• Single-host—Supports port-based authentication with a single client per port.

• Multi-host—Supports port-based authentication with a multiple clients per port.

• Multi-sessions—Supports client-based authentication with a multiple clients per port.

The following authentication methods are supported:

Cisco Business 350 Series Switches Administration Guide

400

Annex

Open Access

Open Access

• 802.1x-based—Supported in all authentication modes.

• MAC-based—Supported in all authentication modes.

• WEB-based—Supported only in multi-sessions modes.

In 802.1x-based authentication, the authenticator extracts the EAP messages from the 802.1x messages
(EAPOL packets) and passes them to the authentication server, using the RADIUS protocol.

With MAC-based or web-based authentication, the authenticator itself executes the EAP client part of the
software on behalf on the clients seeking network access.

In an 802.1x environment, the Open (Monitoring) Access feature assists in distinguishing genuine authentication
failures from failures caused by misconfiguration and/or a lack of resources. Open Access assists system
administrators in understanding the configuration issues of hosts connecting to the network, monitors bad
situations, and allows these issues to be resolved.

When Open Access is enabled on an interface, the switch treats all RADIUS server failures as successes and
allows access to the network for stations connected to the interfaces regardless of authentication results. Open
Access modifies the standard behavior of blocking traffic on an authentication-enabled port until authentication
and authorization are completed successfully.

Authentication's default behavior is still to block all traffic except Extensible Authentication Protocol over
LAN (EAPoL). Open Access, on the other hand, gives the administrator the option of allowing unrestricted
access to all traffic even if authentication (802.1X-based, MAC-based, and/or WEB-based) is enabled.

When RADIUS accounting is enabled, you can log authentication attempts and gain visibility of who and
what is connecting to your network with an audit trail.

Authenticator Overview

Port Administrative Authentication States

The port administrative state determines whether the client is granted access to the network.

The following values are available:

• force-authorized-Port authentication is disabled and the port transmits all traffic in accordance with its
static configuration without requiring any authentication. The switch sends the 802.1x EAP-packet with
the EAP success message inside when it receives the 802.1x EAPOL-start message. This is the default
state.

• force-unauthorized-Port authentication is disabled and the port transmits all traffic via the guest VLAN
and unauthenticated VLANs. The switch sends 802.1x EAP packets with EAP failure messages inside
when it receives 802.1x EAPOL-Start messages.

• auto-Enables 802.1 x authentications in accordance with the configured port host mode and authentication

methods configured on the port.

Port Host Modes

Ports can be placed in the following port host modes.

Cisco Business 350 Series Switches Administration Guide

401

Multiple Authentication Methods

Annex

• Single-Host Mode- A port is authorized if there is an authorized client. Only one host can be authorized
on a port. When a port is unauthorized and the guest VLAN is enabled, untagged traffic is remapped to
the guest VLAN. Tagged traffic is dropped unless it belongs to the guest VLAN or to an unauthenticated
VLAN. If a guest VLAN is not enabled on the port, only tagged traffic belonging to the unauthenticated
VLANs is bridged.

When a port is authorized, untagged and tagged traffic from the authorized host is bridged based on the
static VLAN membership port configuration. Traffic from other hosts is dropped. A user can specify
that untagged traffic from the authorized host will be remapped to a VLAN that is assigned by a RADIUS
server during the authentication process. Tagged traffic is dropped unless it belongs to the
RADIUS-assigned VLAN or the unauthenticated VLANs.

• Multi-Host Mode- A port is authorized if there is if there is at least one authorized client. When a port
is unauthorized and a guest VLAN is enabled, untagged traffic is remapped to the guest VLAN. Tagged
traffic is dropped unless it belongs to the guest VLAN or to an unauthenticated VLAN. If guest VLAN
is not enabled on a port, only tagged traffic belonging to unauthenticated VLANs is bridged.

When a port is authorized, untagged and tagged traffic from all hosts connected to the port is bridged,
based on the static VLAN membership port configuration. You can specify that untagged traffic from
the authorized port will be remapped to a VLAN that is assigned by a RADIUS server during the
authentication process. Tagged traffic is dropped unless it belongs to the RADIUS-assigned VLAN or
to the unauthenticated VLANs.

• Multi-Sessions Mode-Unlike the single-host and multi-host modes, a port in the multi-session mode does
not have an authentication status. This status is assigned to each client connected to the port. Tagged
traffic belonging to an unauthenticated VLAN is always bridged regardless of whether the host is
authorized or not.

Tagged and untagged traffic from unauthorized hosts not belonging to an unauthenticated VLAN is
remapped to the guest VLAN if it is defined and enabled on the VLAN, or is dropped if the guest VLAN
is not enabled on the port. You can specify that untagged traffic from the authorized port will be remapped
to a VLAN that is assigned by a RADIUS server during the authentication process. Tagged traffic is
dropped unless it belongs to the RADIUS-assigned VLAN or to the unauthenticated VLANs.

Multiple Authentication Methods

If more than one authentication method is enabled on the switch, the following hierarchy of authentication
methods is applied:

• 802.1x Authentication: Highest

• WEB-Based Authentication

• MAC-Based Authentication: Lowest

Multiple methods can run at the same time. When one method finishes successfully, the client becomes
authorized, the methods with lower priority are stopped and the methods with higher priority continue.

When one of authentication methods running simultaneously fails, the other methods continue.

When an authentication method finishes successfully for a client authenticated by an authentication method
with a lower priority, the attributes of the new authentication method are applied. When the new method fails,
the client is left authorized with the old method.

Cisco Business 350 Series Switches Administration Guide

402

Annex

Unauthenticated VLANs and the Guest VLAN

802.1x Based Authentication

The 802.1x-based authenticator is responsible for relaying transparent EAP messages between 802.1x
supplicants and authentication servers. The EAP messages exchanged between supplicants and the authenticator
are encapsulated in 802.1x messages, and the EAP messages exchanged between the authenticator and
authentication servers are encapsulated in RADIUS messages.

MAC-Based Authentication

MAC-based authentication is an alternative to 802.1X authentication that allows network access to devices
that lack the 802.1X supplicant capability (such as printers and IP phones). MAC-based authentication grants
or denies network access based on the MAC address of the connecting device. In this case, the switch supports
EAP MD5 functionality with the username and password being the client's MAC address, as shown below.

Web-Based Authentication

End-users who request access to a network via a switch are authenticated using WEB-based authentication.
It allows clients who are directly connected to the switch to be authenticated using a captive-portal mechanism
before being granted network access.

Web-based authentication is client-based authentication that is supported in both Layer 2 and Layer 3 in the
multi-sessions mode. When this method of authentication is enabled for a port, each host must authenticate
itself in order to access the network. So you can have both authenticated and unauthenticated hosts on an
enabled port.

When web-based authentication is enabled on a port, the switch drops all traffic from unauthorized clients,
with the exception of ARP, DHCP, and DNS packets. The switch allows these packets to be forwarded so
that even unauthorized clients can obtain an IP address and resolve host or domain names.

Unauthorized clients' HTTP/HTTPS over IPv4 packets are routed to the switch's CPU. When an end-user
requests network access, if Web-based authentication is enabled on the port, a login page appears before the
requested page. The user must enter his username and password, which are validated by a RADIUS server
via the EAP protocol. The user is notified if authentication is successful.

The user's session has now been authenticated. While the session is in use, it remains open. The session is
terminated if it is not used within a specified time interval. The system administrator configures this time
interval, which is known as Quiet Time. When a session expires, the username and password are lost, and the
guest must re-enter them to start a new one.

Unauthenticated VLANs and the Guest VLAN

Unauthenticated VLANs and the guest VLAN provide access to services that do not require the supplicant
devices or ports to be authenticated and authorized.

The guest VLAN is the VLAN that is assigned to an unauthorized client. You can configure the guest VLAN
and one or more VLANs to be unauthenticated in the 802.1x Authentication properties.

An unauthenticated VLAN is a VLAN that allows access by both authorized and unauthorized devices or
ports. An unauthenticated VLAN has the following characteristics:

• It must be a static VLAN, and cannot be the guest VLAN or the default VLAN.

• The member ports must be manually configured as tagged members.

• The member ports must be trunk and/or general ports. An access port cannot be member of an

unauthenticated VLAN.

Cisco Business 350 Series Switches Administration Guide

403

RADIUS VLAN Assignment or Dynamic VLAN Assignment

Annex

The guest VLAN, if configured, is a static VLAN with the following characteristics:

• It must be manually defined from an existing static VLAN.

• The guest VLAN cannot be used as the Voice VLAN or an unauthenticated VLAN.

Host Modes with Guest VLAN

The host modes work with guest VLAN in the following way:

• Single-Host and Multi-Host Mode-Untagged and tagged traffic from the guest VLAN arriving on an

unauthorized port are bridged through the guest VLAN. All other traffic is rejected. The traffic from an
unauthenticated VLAN is routed through the VLAN.

• Multi-Sessions Mode in Layer 2-Untagged and tagged traffic that does not belong to the unauthenticated
VLANs and arrives from unauthorized clients is assigned to the guest VLAN using the TCAM rule and
bridged through the guest VLAN. The tagged traffic from an unauthenticated VLAN is routed through
the VLAN.

This mode cannot be configured on the same interface with policy-based VLANs.

• Multi-Sessions Mode in Layer 3-The mode does not support the guest VLAN.

RADIUS VLAN Assignment or Dynamic VLAN Assignment

If this option is enabled on the Port Authentication page, the RADIUS server can assign a VLAN to an
authorized client. This is known as RADIUS-Assigned VLAN or Dynamic VLAN Assignment (DVA). The
term RADIUS Assigned VLAN is used throughout this guide.

When a port is in multi-session mode and RADIUS-Assigned VLAN is enabled, the device adds the port as
an untagged member of the VLAN that the RADIUS server assigns during the authentication process. Untagged
packets are classified as belonging to the assigned VLAN if they originate from authenticated and authorized
devices or ports.

Note

In multi-session mode, RADIUS VLAN assignment is only supported when the device is in Layer 2 system
mode.

For a device to be authenticated and authorized at a DVA-enabled port:

• The RADIUS server must authenticate the device and assign it a VLAN dynamically. In the Port

Authentication page, you can set the RADIUS VLAN Assignment field to static. This allows the host to
be bridged based on static configuration.

• DVA must be supported by a RADIUS server with the RADIUS attributes tunnel-type (64) = VLAN

(13), tunnel-media-type (65) = 802 (6), and tunnel-privategroup-id = a VLAN ID.

When the RADIUS-Assigned VLAN feature is enabled, the host modes behave as follows:

• Single-Host and Multi-Host Mode- Untagged traffic and tagged traffic belonging to the RADIUS-assigned
VLAN are bridged via this VLAN. All other traffic not belonging to unauthenticated VLANs is discarded

Cisco Business 350 Series Switches Administration Guide

404

Annex

RADIUS VLAN Assignment or Dynamic VLAN Assignment

• Full Multi-Sessions Mode-Untagged traffic and tagged traffic not belonging to the unauthenticated

VLANs arriving from the client are assigned to the RADIUS-assigned VLAN using TCAM rules and
are bridged via the VLAN.

• Multi-Sessions Mode in Layer 3 System Mode

This mode does not support RADIUS-assigned VLAN.

The following table describes guest VLAN and RADIUS(cid:0)VLAN assignment support depending on
authentication method and port mode.

Table6:VLANandRADIUS-VLANAssignment

Authentication
Method

802.1x

MAC

WEB

Legend

Single-host

Multi-host

Multi-sessions

Device in L3

Device in L2

†

†

N/S

†

†

N/S

N/S

N/S

N/S

†

†

N/S

†- The port mode supports the guest VLAN and RADIUS-VLAN assignment

N/S-The port mode does not support the authentication method.

Violation Mode

In single-host mode you can configure the action to be taken when an unauthorized host on authorized port
attempts to access the interface. This is done in the Host and Session Authentication page.

The following options are available:

• restrict-When a station attempts to access the interface with a MAC address other than the supplicant
MAC address, a trap is generated. The shortest time between traps is one second. These frames are
forwarded, but their source addresses remain unknown.

• protect-Frames with source addresses other than the supplicant address should be discarded.

• shutdown-Reject frames with source addresses other than the supplicant address and close the port.

The device can also be configured to send SNMP traps with a configurable minimum time between consecutive
traps. Traps are disabled if seconds = 0. If no minimum time is specified, the restrict mode defaults to 1 second
and the other modes to 0.

Quiet Period

Following a failed authentication exchange, the port (single-host or multi-host modes) or the client
(multi-sessions mode) cannot attempt authentication during the Quiet period. The period is defined per port
in single-host or multi-host mode, and it is defined per client in multi-sessions mode. The switch does not
accept or initiate authentication requests during the quiet period.

Only 802.1x-based and Web-based authentications are subject to the period. You can also specify the number
of login attempts allowed before the quiet period begins. A value of 0 indicates that the number of login

Cisco Business 350 Series Switches Administration Guide

405

Mode Behavior

Annex

attempts is unlimited. The Port Authentication page allows you to configure the duration of the quiet period
as well as the maximum number of login attempts.

Mode Behavior

The following table describes how authenticated and non-authenticated traffic is handled in various situations.

Unauthenticated Traffic

Authenticated Traffic

With Guest VLAN

Without Guest VLAN

With Radius VLAN

Without Radius VLAN

Untagged

Tagged

Untagged

Tagged

Untagged

Tagged

Untagged

Tagged

Frames are
dropped

Frames are
re-mapped to
the RADIUS
assigned
VLAN

Frames are
dropped
unless they
belong to
the
unauthenticated
VLANs

Frames are
re-mapped to
the Radius
assigned
VLAN

N/S

N/S

Frames are
dropped

Frames are
dropped

Frames are
dropped
unless they
belongs to
the
unauthenticated
VLANs

Frames are
dropped
unless they
belongs to
the
unauthenticated
VLANs

Frames are
dropped
unless they
belong to
the
RADIUS
VLAN or
to the
unauthenticated
VLANs

Frames are
dropped
unless they
belongs to
the Radius
VLAN or
to the
unauthenticated
VLANs

Frames are
bridged based on
the static VLAN
configuration

Frames are

bridged

based on the

static

VLAN

configuration

Frames are
bridged based on
the static VLAN
configuration

Frames are

bridged

based on the

static

VLAN

configuration

Frames are
bridged based on
the static VLAN
configuration

Frames are

bridged

based on the

static

VLAN

configuration

Single-host

Frames are
re-mapped to
the guest
VLAN

Multi-host

Frames are
re-mapped to
the guest
VLAN

Lite
multi-sessions

N/S

Frames are
dropped
unless they
belong to
the guest
VLAN or to
the
unauthenticated
VLANs

Frames are
dropped
unless they
belongs to
the guest
VLAN or to
the
unauthenticated
VLANs

N/S

Cisco Business 350 Series Switches Administration Guide

406

Annex

DHCPv4 Types and Interactions

Unauthenticated Traffic

Authenticated Traffic

With Guest VLAN

Without Guest VLAN

With Radius VLAN

Without Radius VLAN

Untagged

Tagged

Untagged

Tagged

Untagged

Tagged

Untagged

Tagged

Full
multi-sessions

Frames are
re-mapped to
the guest
VLAN

Frames are
dropped

Frames are
re-mapped to
the RADIUS
assigned
VLAN

Frames are
dropped
unless they
belongs to
the
unauthenticated
VLANs

Frames are
re-mapped
to the guest
VLAN
unless they
belongs to
the
unauthenticated
VLANs

Frames are
re-mapped
to the
Radius
VLAN
unless they
belongs to
the
unauthenticated
VLANs

Frames are
bridged based on
the static VLAN
configuration

Frames are

bridged

based on the

static

VLAN

configuration

DHCPv4 Types and Interactions

DHCPv4 Snooping

DHCP snooping is a security feature that prevents false DHCP response packets from being received and logs
DHCP addresses. This is accomplished by classifying ports on the device as trusted or untrusted.

A trustworthy port is one that is allowed to assign DHCP addresses and is connected to a DHCP server. The
device allows DHCP messages received on trustworthy ports to pass through. A port that is not allowed to
assign DHCP addresses is known as an untrusted port. Until you declare a port trusted, it is regarded untrusted
by default.

DHCPv4 Relay

DHCP Relay relays DHCP packets to the DHCP server.

DHCPv4 in Layer 2 and Layer 3

The device relays DHCP messages received from VLANs that have DHCP Relay enabled in Layer 2 system
mode. The device can also transmit DHCP signals received from VLANs that do not have IP addresses in
Layer 3 system mode. Option 82 is automatically inserted whenever DHCP Relay is enabled on a VLAN
without an IP address. This insertion takes place on a single VLAN and has no effect on the global
administrative state of Option 82.

Transparent DHCP Relay

For Transparent DHCP Relay where an external DHCP relay agent is being used,do the following:

• Enable DHCP Snooping.

• Enable Option 82 insertion.

• Disable DHCP Relay.

For regular DHCP Relay:

Cisco Business 350 Series Switches Administration Guide

407

DHCPv4 Types and Interactions

Annex

• Enable DHCP Relay.

• No need to enable Option 82 insertion.

Option 82

Option 82 (DHCP Relay Agent Information Option) sends port and agent information to a central DHCP
server, identifying the physical location of an allocated IP address on the network.

Option 82's main objective is to aid the DHCP server in determining the optimum IP subnet (network pool)
from which to receive an IP address.

On the device, the following Option 82 settings are available:

• DHCP Insertion- Add Option 82 information to packets that do not have foreign Option 82 information.

• DHCP Pass through- Forward or reject DHCP packets that contain Option 82 information from untrusted

ports. On trusted ports, DHCP packets containing Option 82 information are always forwarded.

The packet flow through the DHCP Relay, DHCP Snooping, and Option 82 modules is shown in the table
below:

There are a variety of scenarios that could occur:

• Both the DHCP client and the DHCP server are on the same VLAN. A typical bridge passes the DHCP

messages between the DHCP client and the DHCP server in this scenario.

• Both the DHCP client and the DHCP server are on different VLANs. Only DHCP Relay can and does
broadcast DHCP messages between the DHCP client and the DHCP server in this case. Regular routers
send unicast DHCP packets, therefore if DHCP Relay is enabled on a VLAN without an IP address or
if the device is not a router (Layer 2), an external router is required.

DHCP Relay and only DHCP Relay relays DHCP messages to a DHCP server.

Interactions Between DHCPv4 Snooping, DHCPv4 Relay and Option 82

The tables below describe how the device behaves when various combinations of DHCP Snooping, DHCP
Relay, and Option 82 are used. When DHCP Snooping is disabled and DHCP Relay is enabled, the following
describes how DHCP request packets are handled.

DHCP Relay VLAN with IP Address

DHCP Relay VLAN without IP Address

Packet arrives
without Option 82

Packet arrives with
Option 82

Packet arrives
without Option 82

Packet arrives with
Option 82

Option 82 Insertion
Disabled

Packet is sent
without Option 82

Packet is sent with
the original Option
82

Relay – inserts
Option 82 Bridge –
no Option 82 is
inserted

Relay – discards the
packet

Bridge – Packet is
sent with the
original Option 82

Cisco Business 350 Series Switches Administration Guide

408

Annex

DHCPv4 Types and Interactions

DHCP Relay VLAN with IP Address

DHCP Relay VLAN without IP Address

Option 82 Insertion
Enabled

Relay – is sent with
Option 82

Bridge – no Option
82 is sent

Packet is sent with
the original Option
82

Relay – is sent with
Option 82

Relay – discards the
packet

Bridge – no Option
82 is sent

Bridge – Packet is
sent with the
original Option 82

When both DHCP Snooping and DHCP Relay are enabled, the following is how DHCP request packets are
handled:

DHCP Relay VLAN with IP Address

DHCP Relay VLAN without IP Address

Packet arrives
without Option 82

Packet arrives with
Option 82

Packet arrives
without Option 82

Packet arrives with
Option 82

Option 82 Insertion
Disabled

Packet is sent
without Option 82

Packet is sent with
the original Option
82

Packet is sent with
the original Option
82

Option 82 Insertion
Enabled

Relay – is sent with
Option 82

Bridge – Option 82
is added

(if port is trusted,
behaves as if DHCP
Snooping is not
enabled)

Relay – inserts
Option 82

Relay – discards the
packet

Bridge – no Option
82 is inserted

Bridge – Packet is
sent with the
original Option 82

Relay – is sent with
Option 82

Relay – discards the
packet

Bridge – Packet is
sent with the
original Option 82

Bridge – Option 82
is added

(if port is trusted,
behaves as if DHCP
Snooping is not
enabled)

The following describes how DHCP Reply packets are handled when DHCP Snooping is disabled

DHCP Relay VLAN with IP Address

DHCP Relay VLAN without IP Address

Packet arrives
without Option 82

Packet arrives with
Option 82

Packet arrives
without Option 82

Packet arrives with
Option 82

Cisco Business 350 Series Switches Administration Guide

409

DHCPv4 Types and Interactions

Annex

DHCP Relay VLAN with IP Address

DHCP Relay VLAN without IP Address

Option 82 Insertion
Disabled

Packet is sent
without Option 82

Packet is sent with
the original Option
82

Relay –discards
Option 82

Bridge – Packet is
sent without Option
82

Relay –

1.

2.

If reply
originates in
device, packet is
sent without
Option 82

If reply does not
originate in
device, packet is
discarded.

Bridge – Packet is
sent with the
original Option 82

Option 82 Insertion
Enabled

Packet is sent
without Option 82

Relay – packet is
sent without Option
82

Bridge – Packet is
sent with Option 82

Relay –discards
Option 82

Bridge – Packet is
sent without Option
82

Relay – packet is
sent without Option
82

Bridge – Packet is
sent with Option 82

The following describes how DHCP reply packets are handled when both DHCP Snooping and DHCP Relay
are enabled.

DHCP Relay VLAN with IP Address

DHCP Relay VLAN without IP Address

Packet arrives
without Option 82

Packet arrives with
Option 82

Packet arrives
without Option 82

Packet arrives with
Option 82

Option 82 Insertion
Disabled

Packet is sent
without Option 82

Packet is sent with
the original Option
82

Relay –discards
Option 82

Bridge – Packet is
sent without Option
82

Relay –

1.

2.

If reply
originates in
device, packet is
sent without
Option 82

If reply does not
originate in
device, packet is
discarded.

Bridge – Packet is
sent with the
original Option 82

Cisco Business 350 Series Switches Administration Guide

410

Annex

IPv6 Management Interfaces

DHCP Relay VLAN with IP Address

DHCP Relay VLAN without IP Address

Option 82 Insertion
Enabled

Packet is sent
without Option 82

Packet is sent
without Option 82

Relay –discards
Option 82

Packet is sent
without Option 82

Bridge – Packet is
sent without Option
82

IPv6 Management Interfaces

IPv6 (Internet Protocol Version 6) is a network-layer protocol for packet-switched internet operations. IPv6
was created to take the place of IPv4, the most widely used Internet protocol. Because the address size grows
from 32 to 128 bits, IPv6 allows for more flexibility when allocating
IP:-FE80::9C00:876A:130BFE80:0000:0000:0000:0000:9C00:876A:130B is an example of an abbreviated
form in which a series of zeroes can be left out and replaced with '::'.

To connect with other IPv6 nodes over an IPv4-only network, IPv6 nodes require an intermediary mapping
mechanism. This tunneling technology allows IPv6-only hosts to connect to IPv4 services, as well as isolated
IPv6 hosts and networks to connect to an IPv6 node across IPv4 infrastructure.

An ISATAP or a manual mechanism is used for tunneling (see IPv6 Tunnel). The IPv4 network is treated as
a virtual IPv6 local link, with mappings from each IPv4 address to a link local IPv6 address, via tunneling.
The IPv6 Ethertype is used by the device to recognize IPv6 frames.

DoS Prevention

A Denial of Service (DoS) attack is an attempt by a hacker to make a device inaccessible to its users.

DoS attacks overload the device with external communication requests, preventing it from responding to
legitimate traffic.

These attacks typically result in a device CPU overload.

Secure Core Technology (SCT)

The device employs SCT as one method of resisting DoS attacks. SCT on the device is enabled by default
and cannot be disabled. In addition to end-user (TCP) traffic, the Cisco device handles management traffic,
protocol traffic, and snooping traffic. SCT ensures that no matter how much total traffic is received, the device
receives and processes management and protocol traffic. This is accomplished by limiting TCP traffic to the
CPU.

There are no interactions with other features.

Types of DoS Attacks

The following types of packets or other strategies might be involved in a Denial of Service attack

• TCP SYN Packets—These packets frequently have an incorrect sender address. Each packet is treated

as a connection request, causing the server to spawn a half-open connection by sending back a
TCP/SYN-ACK packet (Acknowledgment) and waiting for a packet from the sender address (response
to the ACK Packet). However, because the sender address is incorrect, the response is never received.

Cisco Business 350 Series Switches Administration Guide

411

IPv6 First Hop Security

Annex

These half-open connections saturate the device's available connections, preventing it from responding
to legitimate requests.

• TCP SYN-FIN Packets—To establish a new TCP connection, SYN packets are sent. TCP FIN packets
are used to terminate a connection. A packet with both the SYN and the FIN flags set should never exist.
As a result, these packets may indicate an attack on the device and should be blocked.

• Martian Addresses—Martian addresses are illegal from the point of view of the IP protocol.

• ICMP Attack—Sending malformed ICMP packets or a large number of ICMP packets to the victim,

potentially causing a system crash.

• IP Fragmentation—The device receives mangled IP fragments with overlapping, over-sized payloads.
Because of a bug in their TCP/IP fragmentation re-assembly code, this can cause various operating
systems to crash.

• Stacheldraht Distribution—The attacker connects to handlers, which are compromised systems that issue
commands to zombie agents, facilitating the DoS attack. The attacker compromises agents through the
handlers. Using automated routines to exploit vulnerabilities in programs that accept remote connections
and are running on the remote hosts under attack. Each handler has the ability to command up to a
thousand agents.

• Invasor Trojan—A trojan that allows the attacker to download a zombie agent (or the trojan may contain

one). Attackers can also gain access to systems by employing automated tools that exploit flaws in
programs that listen for connections from remote hosts. This scenario primarily concerns the device when
it acts as a web server.

• Back OrifaceTrojan—This is a trojan variant that uses Back Oriface software to install the trojan.

Defense Against DoS Attacks

The Denial of Service (DoS) Prevention feature assists the system administrator in resisting such attacks in
the following ways:

• Enable TCP SYN protection. If this feature is enabled, reports are issued when a SYN packet attack is
identified, and the attacked port can be temporarily shut-down. A SYN attack is identified if the number
of SYN packets per second exceeds a user-configured threshold.

• Block SYN-FIN packets.

• Block packets that contain reserved Martian addresses.

• Prevent TCP connections from a specific interface and rate limit the packets.

• Configure the blocking of certain ICMP packets.

• Discard fragmented IP packets from a specific interface. page)

• Deny attacks from Stacheldraht Distribution, Invasor Trojan, and Back Orifice Trojan.

IPv6 First Hop Security

IPv6 FHS is a suite of features designed to secure link operations in an IPv6-enabled network. It is based on
the Neighbor Discovery Protocol and DHCPv6messages.

Cisco Business 350 Series Switches Administration Guide

412

Annex

IPv6 First Hop Security

In this feature, a Layer 2 switch (as shown below) filters Neighbor Discovery Protocol messages, DHCPv6
messages and user data messages according to a number of different rules.

A separate and independent instance of IPv6 First Hop Security runs on each VLAN on which the feature is
enabled.

Table7:Abbreviations

Name

CPA message

CPS message

Description

Certification Path Advertisement message

Certification Path Solicitation message

DAD-NS message

Duplicate Address Detection Neighbor Solicitation message

FCFS-SAVI

NA message

NDP

NS message

RA message

RS message

SAVI

First Come First Served- Source Address Validation Improvement

Neighbor Advertisement message

Neighbor Discovery Protocol

Neighbor Solicitation message

Router Advertisement message

Router Solicitation message

Source Address Validation Improvement

IPv6 First Hop Security Components

IPv6 First Hop Security includes the following features:

• IPv6 First Hop Security Common

• RA Guard

• ND Inspection

Cisco Business 350 Series Switches Administration Guide

413

IPv6 First Hop Security

Annex

• Neighbor Binding Integrity

• DHCPv6 Guard

• IPv6 Source Guard

These components can be enabled or disabled on VLANs.

There are two empty, pre-defined policies for each feature, with the names VLAN default and port default.
The first is connected to each VLAN that is not attached to a user-defined policy, and the second is connected
to each interface and VLAN that is not attached to a user-defined policy. The user cannot explicitly attach
these policies.

IPv6 First Hop Security Pipe

If IPv6 First Hop Security is enabled on a VLAN, the switch traps the following messages:

• Router Advertisement (RA) messages

• Router Solicitation (RS) messages

• Neighbor Advertisement (NA) messages

• Neighbor Solicitation (NS) messages

• ICMPv6 Redirect messages

• Certification Path Advertisement (CPA) messages

• Certification Path Solicitation (CPS) messages

• DHCPv6 messages

Trapped RA, CPA, and ICMPv6 Redirect messages are routed to the RA Guard feature. RA Guard validates
these messages, discards illegal messages, and forwards legal messages to the ND Inspection feature. ND
Inspection validates these messages and discards illegal messages, while legal messages are routed to the IPv6
Source Guard feature.

Trapped DHCPv6 messages are routed to the DHCPv6 Guard feature. DHCPv6 Guard validates these messages,
discards illegal messages, and forwards legal messages to the IPv6 Source Guard feature.

Data messages that are being trapped are routed to the IPv6 Source Guard feature. Using the Neighbor Binding
Table, IPv6 Source Guard validates received messages (trapped data messages, NDP messages from ND
Inspection, and DHCPv6 messages from DHCPv6 Guard), drops illegal messages, and forwards legal messages.
Neighbor Binding Integrity obtains neighbors from received messages (NDP and DHCPv6) and saves them
in the Neighbor Binding table.

Static entries can also be manually added. After learning the addresses, the NBI feature forwards the frames.
The ND Inspection feature also receives trapped RS,CPS,NS, and NA messages. ND Inspection validates
these messages, discards illegal ones, and forwards legal ones to the IPv6 Source Guard feature.

IPv6 First Hop Security Perimeter

IPv6 First Hop Security switches can form a perimeter separating untrusted area from trusted area. All switches
inside the perimeter support IPv6 First Hop Security, and hosts and routers inside this perimeter are trusted
devices. For example, in the figure below, Switch B and Switch C are inner links inside the protected area.

Cisco Business 350 Series Switches Administration Guide

414

Annex

Router Advertisement Guard

The perimeter is specified by the device-role command in the Neighbor Binding policy configuration screen.
Each IPv6 First Hop Security switch binds neighbors partitioned by the edge. Binding entries are distributed
in this manner on IPv6 First Hop Security devices that form the perimeter. The IPv6 First Hop Security devices
can then provide binding integrity to the inside of the perimeter without having to configure bindings for
every address on each device.

Router Advertisement Guard

Router Advertisement (RA) Guard is the first FHS feature that treats trapped RA messages. RA Guard supports
the following functions:

• Filtering of received RA, CPA, and ICMPv6 redirect messages. The RA Guard discards RA and CPA

messages received on interfaces whose role are not router.

• Validation of received RA messages. The RA Guard validates RA messages using the filtering based on

the RA Guard policy attached to the interface.

If a message does not pass verification, it is dropped. If the logging packet drop configuration on the FHS
common component is enabled, a rate limited SYSLOG message is sent.

Neighbor Discovery Inspection

Neighbor Discovery (ND) Inspection supports the following functions:

Cisco Business 350 Series Switches Administration Guide

415

Neighbor Binding Integrity

Annex

• Validation of received Neighbor Discovery protocol messages

• Egress filtering

Message Validation

Based on an ND Inspection policy attached to the interface, ND Inspection validates the Neighbor Discovery
protocol messages. On the ND Inspection Settings page, you can define this policy.

If a message fails the policy-defined verification, it is dropped and a rate-limited SYSLOG message is sent
in its place.

Egress Filtering

ND Inspection blocks forwarding of RS and CPS messages on interfaces configured as host interfaces.

Neighbor Binding Integrity

Neighbor Binding (NB) Integrity establishes binding of neighbors. A separate, independent instance of NB
Integrity runs on each VLAN on which the feature is enabled.

Learning Advertised IPv6 Prefixes

NB Integrity learns IPv6 prefixes advertised in RA messages and saves it in the Neighbor Prefix table. The
prefixes are used for verification of assigned global IPv6 addresses. By default, this validation is disabled.
When it is enabled, addresses are validated against the prefixes in the Neighbor Binding Settings page. Static
prefixes used for the address validation can be added in the Neighbor Prefix Table page.

Validation of Global IPv6 Addresses

NB Integrity performs the following validations:

• If the target address in an NS or NA message is a global IPv6 address, it must belong to one of the prefixes

defined in the RA Prefix table.

• A global IPv6 address provided by a DHCPv6 server must belong to one of the prefixes defined in the

IPv6 Prefix List.

If a message does not pass this verification, it is dropped and a rate limited SYSLOG message is sent.

Neighbor Binding Table Overflow

When there is no free space to create a new entry, no entry is created and a SYSLOG message is sent.

Establishing Binding of Neighbors

An IPv6 First Hop Security switch can discover and record binding information by using the following
methods:

• NBI-NDP Method: Learning IPv6 addresses from the snooped Neighbor Discovery Protocol messages

• NBI-DHCP method: By learning IPv6 addresses from the snooped DHCPv6 messages

• NBI-Manual Method: By manual configuration

Cisco Business 350 Series Switches Administration Guide

416

Annex

Neighbor Binding Integrity

An IPv6 address is bound to a link layer property of the host's network attachment. This property, called a
"binding anchor" consists of the interface identifier (if Index) through which the host is connected to and the
host’s MAC address.

IPv6 First Hop Security switch establishes binding only on perimeterical interfaces. Binding information is
saved in the Neighbor Binding table

NBI-NDP Method

The NBI-NDP method used is based on the FCFS- SAVI method specified in RFC6620, with the following
differences:

• Unlike FCFS-SAVI, which supports only binding for link local IPv6 addresses, NBI-NDP additionally

supports binding global IPv6 addresses as well.

• NBI-NDP supports IPv6 address binding only for IPv6 addresses learned from NDP messages. Source

address validation for data message is provided by IPv6 Source Address Guard.

• In NBI-NDP, proof of address ownership is based on the First-Come, First- Served principle. The first
host that claims a given source address is the owner of that address until further notice. Since no host
changes are acceptable, a way must be found to confirm address ownership without requiring a new
protocol. For this reason, whenever an IPv6 address is first learned from an NDP message, the switch
binds the address to the interface. Subsequent NDP messages containing this IPV6 address can be checked
against the same binding anchor to confirm that the originator owns the source IP address.

The exception to this rule occurs when an IPv6 host roams in the L2 domain or changes its MAC address.
In this case, the host is still the owner of the IP address, but the associated binding anchor might have
changed. To cope with this case, the defined NBI-NDP behavior implies verification of whether or not
the host is still reachable by sending DAD-NS messages to the previous binding interface. If the host is
no longer reachable at the previously-recorded binding anchor, NBI-NDP assumes that the new anchor
is valid and changes the binding anchor. If the host is still reachable using the previously recorded binding
anchor, the binding interface is not changed.

To reduce the size of the Neighbor Binding table, NBI-NDP establishes binding only on perimeterical interfaces
(see IPv6 First Hop Security Perimeter) and distributes binding information through internal interfaces using
NS and NA messages. Before creating an NBI-NDP local binding, the device sends a DAD-NS message
querying for the address involved. If a host replies to that message with an NA message, the device that sent
the DAD-NS message infers that a binding for that address exists in another device and does not create a local
binding for it. If no NA message is received as a reply to the DAD-NS message, the local device infers that
no binding for that address exists in other devices and creates the local binding for that address.

NBI-NDP supports a lifetime timer. A value of the timer is configurable in the Neighbor Binding Settings
page. The timer is restarted each time that the bound IPv6 address is confirmed. If the timer expires, the device
sends up to 2 DAD-NS messages with short intervals to validate the neighbor.

NBI-DHCP Method

The NBI-NDP method is based on the SAVI-DHCP method specified in the SAVI Solution for DHCP,
draft-ietf-savi-dhcp-15, September 11, 2012.

Like NBI-NDP, NBI-DHCP provides perimeterical binding for scalability. The following difference between
the NBI-DHCP and NBI-FCFS method exists: NBIDHCP follows the state announced in DHCPv6 messages,
thus there is no need to distribute the state by NS/NA messages.

Cisco Business 350 Series Switches Administration Guide

417

DHCPv6 Guard

Annex

NB Integrity Policy

In the same way that other IPv6 First Hop Security features function, NB Integrity behavior on an interface
is specified by an NB Integrity policy attached to an interface. These policies are configured in the Neighbor
Binding Settings page

DHCPv6 Guard

DHCPv6 Guard treats the trapped DHCPv6 messages. DHCPv6 Guard supports the following functions:

• Filtering of received DHCPv6 messages. DHCP Guard discards DHCPv6 reply messages received on

interfaces whose role is client. The interface role is configured in the DHCP Guard Settings page.

• Validation of received DHCPv6 messages. DHCPv6 Guard validates DHCPv6 messages that match the

filtering based on the DHCPv6 Guard policy attached to the interface.

If a message does not pass verification, it is dropped. If the logging packet drop configuration on the FHS
common component is enabled, a rate limited SYSLOG message is sent.

IPv6 Source Guard

If Neighbor Binding Integrity (NB Integrity) is enabled, IPv6 Source Guard validates the source IPv6 addresses
of NDP and DHCPv6 messages, regardless of whether IPv6 Source Guard is enabled. If IPv6 Source Guard
is enabled together with NB Integrity, IPv6 Source Guard configures the TCAM to specify which IPv6 data
frames should be forwarded, dropped, or trapped to the CPU and validates the source IPv6 addresses of the
trapped IPv6 data messages. If NB Integrity is not enabled, IPv6 Source Guard is not activated regardless of
whether it is enabled or not.

If the TCAM does not have free room to add a new rule, the TCAM overflow counter is Incremented and a
rate-limited SYSLOG message containing the interface identifier, host MAC address, and host IPv6 address
is sent. IPv6 Source Guard validates the source addresses of all received IPv6 messages using the Neighbor
Binding table except for the following messages that are passed without validation:

• RS messages, if the source IPv6 address equals the unspecified IPv6 address.

• NS messages, if the source IPv6 address equals the unspecified IPv6 address.

• NA messages, if the source IPv6 address equals the target address.

IPv6 Source Guard drops all other IPv6 messages whose source IPv6 address equals the unspecified IPv6
address. IPv6 Source Guard runs only on untrusted interfaces belonging to the perimeter.

IPv6 Source Guard drops an input IPv6 message if:

• The Neighbor Binding table does not contain the IPv6 address

• The Neighbor Binding table contains the IPv6 address, but it is bound to another interface.

IPv6 Source Guard initiates the Neighbor Recovery process by sending DAD_NS messages for the unknown
source IPv6 addresses

•

Cisco Business 350 Series Switches Administration Guide

418

Annex

Attack Protection

Attack Protection

The section describes attack protection provided by IPv6 First Hop Security

Protection against IPv6 Router Spoofing

An IPv6 host can use the received RA messages for:

• IPv6 router discovery

• Stateless address configuration

A malicious host could send RA messages advertising itself as an IPv6 router and providing counterfeit
prefixes for stateless address configuration. RA Guard provides protection against such attacks by configuring
the interface role as a host interface for all interfaces where IPv6 routers cannot be connected.

Protection against IPv6 Address Resolution Spoofing

A malicious host could send NA messages advertising itself as an IPv6 Host having the given IPv6 address.
NB Integrity provides protection against such attacks in the following ways:

• If the given IPv6 address is unknown, the Neighbor Solicitation (NS) message is forwarded only on inner

interfaces.

• If the given IPv6 address is known, the NS message is forwarded only on the interface to which the IPv6

address is bound.

• A Neighbor Advertisement (NA) message is dropped if the target IPv6 address is bound with another

interface.

Protection against IPv6 Duplication Address Detection Spoofing

An IPv6 host must perform Duplication Address Detection for each assigned IPv6 address by sending a special
NS message (Duplicate Address Detection Neighbor Solicitation message (DAD_NS) message).

A malicious host could send reply to a DAD_NS message advertising itself as an IPv6 host having the given
IPv6 address. NB Integrity provides protection against such attacks in the following ways:

• If the given IPv6 address is unknown, the DAD_NS message is forwarded only on inner interfaces

• If the given IPv6 address is known, the DAD_NS message is forwarded only on the interface where the

IPv6 address is bound.

• An NA message is dropped if the target IPv6 address is bound with another interface.

Protection against DHCPv6 Server Spoofing

An IPv6 host can use the DHCPv6 protocol for:

• Stateless information configuration

• Stateless address configuration

Cisco Business 350 Series Switches Administration Guide

419

Secure Sensitive Data Management

Annex

Protection Against NBD Cache Spoofing

An IPv6 router supports the Neighbor Discovery Protocol (NDP) cache that maps the IPv6 address to the
MAC address for the last hop routing. A malicious host could send IPv6 messages with a different destination
IPv6 address for the last hop forwarding, causing overflow of the NBD cache.

An embedded mechanism in the NDP implementation limits the number of entries allowed in the
INCOMPLETE state in the Neighbor Discovery cache. This provides protection against the table being flooded
by hackers.

Secure Sensitive Data Management

Secure Sensitive Data (SSD) is an architecture that allows sensitive data on a device, such as passwords and
keys, to be protected. Passwords, encryption, access control, and user authentication are used to create a secure
approach for managing sensitive data at the institution.

The capability has been enhanced to safeguard configuration files, secure the configuration process, and
facilitate SSD zero-touch auto configuration.

SSD secures sensitive data on a device, such as passwords and keys, by allowing and disallowing access to
sensitive data encrypted and in plain text based on user credentials and SSD rules, and by preventing tampering
with configuration files holding sensitive data.

Furthermore, SSD allows for the secure backup and sharing of configuration files containing sensitive
information.

Users can select the level of protection they want for their sensitive data, ranging from no protection with
sensitive data in plaintext to minimal protection with encryption based on the default pass phrase to higher
protection with encryption based on user-defined pass phrase.

Only authenticated and authorized users are granted read privilege to sensitive data, and this is done in
accordance with SSD regulations. Through the user authentication procedure, a device authenticates and
authorizes management access to users. It is advised that the administrator protect the authentication process
by using the local authentication database and/or secure the communication to the external authentication
servers used in the user authentication process, regardless of whether SSD is utilized.

In summary, SSD uses SSD rules, SSD attributes, and user authentication to safeguard sensitive data on a
device. And the device's SSD rules, SSD characteristics, and user authentication configurations are all critical
data that SSD protects.

SSD Management

SSD management consists of a set of setup parameters that dictate how sensitive data is handled and secured.
The SSD configuration parameters are sensitive information that is safeguarded by SSD.

All SSD configuration is done through the SSD pages, which are only accessible to those with the appropriate
rights.

SSD Rules

The read privileges and default read mode assigned to a user session on a management channel are defined
by SSD rules. The user and SSD management channel that an SSD rule belongs to give it a distinct identity.
It's possible that distinct SSD rules exist for the same user but for different channels, and that different rules
exist for the same channel but for different users.

Cisco Business 350 Series Switches Administration Guide

420

Annex

Secure Shell

Read permissions specify how sensitive data can be viewed: solely in encrypted form, exclusively in plaintext
form, both encrypted and plaintext forms, or no authorization to access sensitive data at all. The SSD regulations
are classified as sensitive data and are therefore safeguarded.

There are a total of 32 SSD rules that can be supported by a device. The SSD read permission of the SSD rule
that best matches the user identity/credential and the type of management channel via which the user is/will
access the sensitive data is granted to a user by a device.

A set of default SSD rules is included with every device. SSD rules can be added, deleted, and changed at
any time by an administrator.

Default SSD Rules

The device has the following factory default rules:

Rule Key

Rule Action

User

Channel

Read Permission

Default Read Mode

Level 15

Secure XML SNMP

Plaintext Only

Plaintext

Level 15

Secure

Level 15

Insecure

Both

Both

Insecure XML SNMP

Exclude

Encrypted

Encrypted

Exclude

Secure

Insecure

Encrypted Only

Encrypted

Encrypted Only

Encrypted

All

All

All

The default rules can be modified, but they cannot be deleted. If the SSD default rules have been changed,
they can be restored.

Secure Shell

Secure Shell or SSH, is a network protocol that allows data to be sent securely between an SSH client (the
device) and an SSH server.

The SSH client aids in the management of a network consisting of one or more switches with various system
files kept on a central SSH server. Secure Copy (SCP), an application that uses the SSH protocol to transfer
configuration files over the network, ensures that sensitive data, such as username/password, is not intercepted.
Secure Copy (SCP) is a method of transferring firmware, boot images, configuration files, language files, and
log files from a central SCP server to a device in a secure manner.

With respect to SSH, the SCP running on the device is an SSH client application and the SCP server is a SSH
server application.

The data transfer is secure when files are downloaded through TFTP or HTTP. When files are downloaded
with SCP, the data is sent across a secure channel from the SCP server to the device. Authentication is required
before this secure channel can be created, as it verifies that the user is authorized to conduct the activity.
Although this article does not cover server operations, the user must submit authentication information on
both the device and the SSH server.

The following diagram depicts a common network configuration that could benefit from the SCP functionality.

Cisco Business 350 Series Switches Administration Guide

421

QoS

Annex

Typical Network Configuration

QoS

Quality of Service provides different priority to one or more types of traffic over other levels for different
applications, data flows, or users to guarantee performance. QoS looks at many different variables that exist
on an network in order to make decisions on how it is going to deal with the issue.

Problems that QoS Deals With

• Delay- less than ideal routes to the destination networks, and delays such as these can make some

applications such as VoIP, fail.

• Main reason to use QoS is real–time applications (RTA)

• Dropped Packets- Buffers are full and packets do not get processed in time so they are dropped. In a

contention link QoS would prioritize traffic, so less important traffic would be dropped.

• Errors- Packets get corrupted for many reasons, but since we use TCP we will keep re-transmitting until

we receave an ACK and that causes retransmissions and delays.

• Jitter- Packets may take multiple paths to a destination and may not be the most optimal path. This

variation causes delays, which is called jitter. Jitter should be below 30 ms. Packet loss shouldn't be more
than 1%

• Out of Order Delivery- Due to packets using varying paths to reach a destination, applications at the
receiving end may take longer than expected to re-order the packets and cause delays and drops. QoS
will ensure that applications with a required level of predictability will receive the needed bandwidth

QoS Mechanisms

• Classification- supported by a class-oriented QoS mechanism.

• Congestion Management- Used to prioritize the transmission of packets, with a queuing mechanism on

each interface.

• Policing-Used to enforce a rate limit by dropping or marking down packets.

Cisco Business 350 Series Switches Administration Guide

422

Annex

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

QoS Features and Components

• Shaping- Used to enforce a rate limit by delaying packets, using buffers.

To configure general QoS parameters, perform the following:

Enable QoS by using the QoS Properties page to select the trust mode. Then enable QoS on ports by using the Interface
Settings page.

Assign each interface a default CoS or DSCP priority by using the QoS Properties page.

Assign the schedule method (Strict Priority or WRR) and bandwidth allocation for WRR to the egress queues by using
the Queue page.

Designate an egress queue to each IP DSCP/TC value with the DSCP to Queue page. If the device is in DSCP trusted
mode, incoming packets are put into the egress queues based on the their DSCP/TC value.

Designate an egress queue to each CoS/802.1p priority. If the device is in CoS/802.1 trusted mode, all incoming packets
are put into the designated egress queues according to the CoS/802.1p priority in the packets. This is done by using the
CoS/802.1p to Queue page.

Step 6

Enter bandwidth and rate limits in the following pages:

a) Set egress shaping per queue by using the Egress Shaping Per Queue page.
b) Set ingress rate limit and egress shaping rate per port by using the Bandwidth page.

QoS Features and Components

The QoS feature is used to optimize network performance.

QoS provides the following:

• Classification of incoming traffic to traffic classes, based on attributes, including:

• Device Configuration

• Ingress interface

• Packet content

• Combination of these attributes

QoS includes the following:

• Traffic Classification—Classifies each incoming packet as belonging to a specific traffic flow, based on
the packet contents and/or the port. The classification is done by ACL (Access Control List), and only
traffic that meets the ACL criteria is subject to CoS or QoS classification.

• Assignment to Software Queues—Assigns incoming packets to forwarding queues. Packets are sent to

a particular queue for handling as a function of the traffic class to which they belong.

• Other Traffic Class-Handling Attribute—Applies QoS mechanisms to various classes, including bandwidth

management.

Cisco Business 350 Series Switches Administration Guide

423

QoS Modes

QoS Modes

SNMP

Annex

The QoS mode that is selected applies to all interfaces in the system.

• Basic Mode—Class of Service (CoS).

All traffic of the same class receives the same treatment, which is the single QoS action of determining
the egress queue on the egress port, based on the indicated QoS value in the incoming frame. This can
be the VLAN Priority Tag (VPT) 802.1p value in Layer 2 and the Differentiated Service Code Point
(DSCP) value for IPv4 or Traffic Class (TC) value for IPv6 in Layer 3. When operating in Basic Mode,
the device trusts this external assigned QoS value. The external assigned QoS value of a packet determines
its traffic class and QoS.

• Advanced Mode—Per-flow Quality of Service (QoS).

In advanced mode, a per flow QoS consists of a class map and/or a policer:

• A class map defines the kind of traffic in a flow, and contains one or more ACLs. Packets that match

the ACLs belong to the flow.

• A policer applies the configured QoS to a flow. The QoS configuration of a flow may consist of

egress queue, the DSCP or CoS/802.1p value, and actions on out of profile (excess) traffic.

• Disable Mode—In this mode all traffic is mapped to a single best effort queue, so that no type of traffic

is prioritized over another.

Only a single mode can be active at a time. When the system is configured to work in QoS Advanced mode,
settings for QoS Basic mode are not active and vice versa.

When the mode is changed, the following occurs:

• When changing from QoS Advanced mode to any other mode, policy profile definitions and class maps

are deleted. ACLs bonded directly to interfaces remain bonded.

• When changing from QoS Basic mode to Advanced mode, the QoS Trust mode configuration in Basic

mode is not retained.

• When disabling QoS, the shaper and queue setting (WRR/SP bandwidth setting) are reset to default

values.

All other user configurations remain intact.

SNMP is an application-layer protocol that provides a message format for communication between managers
and agents. The SNMP system consists of an SNMP manager, an SNMP agent, and a MIB. The SNMP
manager can be part of a network management system (NMS) such as CiscoWorks. The agent and MIB reside
on the switch. To configure SNMP on the switch, you define the relationship between the manager and the
agent.

SNMP usually is associated with managing routers, but it’s important to understand that it can be used to
manage many types of devices. The switch functions as SNMP agent and supports SNMPv1, v2, and v3.

The SNMP agent contains MIB variables whose values the SNMP manager can request or change. A manager
can get a value from an agent or store a value into the agent. The agent gathers data from the MIB, the repository

Cisco Business 350 Series Switches Administration Guide

424

Annex

SNMP

for information about device parameters and network data. The agent can also respond to a manager’s requests
to get or set data.

An agent can send unsolicited traps to the manager. Traps are messages alerting the SNMP manager to a
condition on the network. Traps can mean improper user authentication, restarts, link status (up or down),
MAC address tracking, closing of a TCP connection, loss of connection to a neighbor, or other significant
events.

SNMP Versions

The Internet Engineering Task Force (IETF) is responsible for defining the standard protocols that govern
Internet traffic, including SNMP. The IETF publishes Requests for Comments (RFCs), which are specifications
for many protocols that exist in the IP realm. Documents enter the standards track first as proposed standards,
then move to draft status. When a final draft is eventually approved, the RFC is given standard status—although
there are fewer completely approved standards than you might think. Two other standards-track designations,
historical and experimental , define (respectively) a document that has been replaced by a newer RFC and a
document that is not yet ready to become a standard. The following list includes all the current SNMP versions
and the IETF status of each.

• SNMP Version 1 (SNMPv1 ) is the initial version of the SNMP protocol. It’s defined in RFC 1157 and
is a historical IETF standard. SNMPv1’s security is based on communities, which are nothing more than
passwords: plain-text strings that allow any SNMP-based application that knows the strings to gain access
to a device’s management information. There are typically three communities in SNMPv1: read-only,
read-write, and trap. It should be noted that while SNMPv1 is historical, it is still the primary SNMP
implementation that many vendors support.

• SNMP version 2 (SNMPv2 ) is often referred to as community-string-based SNMPv2.

• SNMP version 3 (SNMPv3 ) is the latest version of SNMP. Its main contribution to network management
is security. It adds support for strong authentication and private communication between managed entities.

To control access to the system, a list of community entries is defined. Each community entry consists of a
community string and its access privilege. The system responds only to SNMP messages specifying the
community which has the correct permissions and correct operation.

SNMP agents maintain a list of variables that are used to manage the device. These variables are defined in
the Management Information Base (MIB).

Table8:SNMPVersionsandSecurityLevels

Version

SNMPv1

Level

Authentication

Encryption

noAuthNoPriv

Community string

SNMPv2C

noAuthNoPriv

Community string

SNMPv3

SNMPv3

noAuthNoPriv

Username

authNoPriv

Message Digest 5 (MD5)
or Secure Hash Algorithm
(SHA)

No

No

No

No

Cisco Business 350 Series Switches Administration Guide

425

SNMP

Annex

Version

SNMPv3

Level

Authentication

Encryption

authPriv(requires the
cryptographic software
image)

MD5 or SHA

Data Encryption Standard
(DES) or Advanced
Encryption Standard
(AES)

Note

Due to the security vulnerabilities of other versions, it is recommended to use SNMPv3.

SNMP Agent Functions

The SNMP agent responds to SNMP manager requests as follows:

• Get a MIB variable—The SNMP agent begins this function in response to a request from the NMS. The

agent retrieves the value of the requested MIB variable and responds to the NMS with that value.

• Set a MIB variable—The SNMP agent begins this function in response to a message from the NMS. The

SNMP agent changes the value of the MIB variable to the value requested by the NMS.

The SNMP agent also sends unsolicited trap messages to notify an NMS that a significant event has occurred
on the agent. Examples of trap conditions include, but are not limited to, when a port or module goes up or
down, when spanning-tree topology changes occur, and when authentication failures occur.

SNMP Community Strings

SNMP community strings authenticate access to MIB objects and function as embedded passwords. In order
for the NMS to access the switch, the community string definitions on the NMS must match at least one of
the three community string definitions on the switch.

A community string can have one of these attributes:

• Read-only (RO)—Gives read access to authorized management stations to all objects in the MIB except

the community strings, but does not allow write access

• Read-write (RW)—Gives read and write access to authorized management stations to all objects in the

MIB, but does not allow access to the community strings.

• When a cluster is created, the command switch manages the exchange of messages among member

switches and the SNMP application. The Network Assistant software appends the member switch number
( @esN, where N is the switch number) to the first configured RW and RO community strings on the
command switch and propagates them to the member switches.

Supported MIBs

Management Information Base (MIBs) are collections of definitions which define the properties of the managed
object within the device to be managed. For a list of supported MIBs, visit the following URL and navigate
to the download area listed as Cisco MIBS:

http://www.cisco.com/cisco/software/navigator.html

Cisco Business 350 Series Switches Administration Guide

426

Annex

Configure Switchport Mode Via SNMP

Configure Switchport Mode Via SNMP

To configure switchport mode via SNMP on your switch, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Connect the switch via console port and reset the switch back to factory default.

Enable SNMP and configure the community name for Read and Write privilege.

From a MIB browser of choice (I.e: MG-Soft), select vlanPortModeState and right click.

Next, select Set.

The Select Table Instance(s) will appear. The table will include an instance ID which corresponds to an interface ID and
the Value column value which corresponds to the switch port.

Example:

Instance 1 is for interface GigabitEthernet 1/0/1

Example:

Instance 3 is for Interface GigabitEthernet 1/0/3.

The Value indicates that the interface switchport mode is accessed.

General mode

Access mode

Trunk mode

10

11

12

Private-VLAN permiscouos
mode

Private-VLAN host mode

Customer

13

14

15

Step 6

Step 7

Select Instance 3 and change the interface GigabitEthernet 1/0/3 switchport mode to General.

Then, repeat the steps for trunk mode.

Create or Add a VLAN Via SNMP

To create or add a VLAN on your switch, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Connect the switch via a console port and reset the switch back to factory default.

Enable SNMP and configure the community name for Read and Write privilege.

Run a show run command.

From MIB browser of choice, I am using MG-Soft, select rldot1qVlanStaticListTable MIB container and run Get Bulk
operation.

Cisco Business 350 Series Switches Administration Guide

427

Create or Add a VLAN Via SNMP

Annex

Step 5

Refer to the slide above to create or add a VLAN.

a) Add VLANs 2-14, 16.
b) Select rldot1qVlanStaticList1to1024.
c) Open “Set” operation window.
d) Set the VLAN values in Octet format ”# 0x7F 0xFD.

Example:

VLAN ID. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16

Octet bits 0 1 1 1 1 1 1 1 1 1 1 1 1 1 0 1

Octet in Hex 7 F F D

Step 6

Click Set to add the VLANs.

Step 7

Complete the following if you wish to add an extra VLAN 1024.

Cisco Business 350 Series Switches Administration Guide

428

Annex

Reboot Reset Via SNMP

a) With the Set operation window open, click on Value to Set to refresh icon. The field will be updated with

“rldot1qVlanStaticList1to1024.

b) Right scroll inside the field until the last octet to set 1024th bit value to 1.
c) Click Set

There are 4 self explanatory VLAN lists:

• rldot1qVlanStaticList1to1024

• rldot1qVlanStaticList1025to2048

• rldot1qVlanStaticList2049to3072

• rldot1qVlanStaticList3073to4094

Reboot Reset Via SNMP

To reset the switch back to factory default settings, follow these steps:

Procedure

Step 1

Step 2

Step 3

Step 4

Step 5

Step 6

Connect the switch via console port and reset the switch back to factory default.

Enable SNMP and configure community name for Read and Write privelege.

Save the configuration.

Run show command.

From MIB browser of choice (i.e. MG-Soft), select rndAction MIB.

Right click and select Set.

Step 7

Next to the Value to Set field, you will find 2 icons.
a) Click Select From Value List.
b) From the drop-down list, select Reset and click OK.

Cisco Business 350 Series Switches Administration Guide

429

Reboot Reset Via SNMP

c) Next, click Set.

Annex

d) After the switch reboots, login with username and password and repeat the steps by selecting resetTo Factory

Default(27). After the reboot, you will need to create a new username and password.

Cisco Business 350 Series Switches Administration Guide

430



=== Content from www.cisco.com_abe025ae_20250115_132746.html ===


* [Skip to content](#fw-content)
* Skip to search
* [Skip to footer](#fw-footer-v2)

* [Cisco.com Worldwide](https://www.cisco.com/site/us/en/index.html)
* [Products and Services](/c/en/us/products/index.html)
* [Solutions](https://www.cisco.com/site/us/en/solutions/index.html)
* [Support](/c/en/us/support/index.html)
* [Learn](/c/en/us/training-events.html)
* [Explore Cisco](//www.cisco.com/c/en/us/about/sitemap.html)
* [How to Buy](/c/en/us/buy.html)
* [Partners Home](https://www.cisco.com/site/us/en/partners/index.html?dtid=odicdc001129)
* [Partner Program](https://www.cisco.com/site/us/en/partners/cisco-partner-program/index.html?ccid=cc000864&dtid=odiprc001129)
* [Support](https://www.cisco.com/site/us/en/partners/support-help/index.html)
* [Tools](https://www.cisco.com/site/us/en/partners/tools/index.html?dtid=odiprc001129)
* [Find a Cisco Partner](https://locatr.cloudapps.cisco.com/WWChannels/LOCATR/pf/index.jsp#/)
* [Meet our Partners](https://www.cisco.com/site/us/en/partners/connect-with-a-partner/index.html?ccid=cc000864&dtid=odiprc001129)
* [Become a Cisco Partner](https://www.cisco.com/site/us/en/partners/index.html?dtid=odicdc001129)

* [Support](/c/%3Clocale%3E/support/index.html)
# My Notifications

Create custom subscriptions for Cisco products, series, or software to receive email alerts or consume RSS feeds when new announcements are released for the following notices:

* Cisco Security Advisories
* Field Notices
* End of Sale and End-of-Support Announcements
* Software Updates
* Updates to Known Bugs

[Log In to My Notifications](/c/login/index.html?referer=https://cway.cisco.com/mynotifications)![](/etc/designs/cdc/fw/i/icon_lock_small.png "Login Required")

![](//cisco.112.2o7.net/b/ss/cisco-mobile/5/12345)


=== Content from sec.cloudapps.cisco.com_74e3ffdf_20250115_215222.html ===


[Home](http://www.cisco.com) / [Cisco Security](https://sec.cloudapps.cisco.com/security/center/home.x) / [Latest Threat Information](https://sec.cloudapps.cisco.com/security/center/navigation.x?i=118)
#### Cisco Security

# Common Vulnerability Scoring System

| Choose the version of CVSS calculator:   Version 1  Version 2  Version 3  Version 3.1 |
| --- |
| Common Vulnerability Scoring System (CVSS) Online Calculator, version 3.1 |
| Vector: CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:C/C:N/I:L/A:N/E:X/RL:X/RC:X/CR:X/IR:X/AR:X/MAV:X/MAC:X/MPR:X/MUI:X/MS:X/MC:X/MI:X/MA:X |
| This tool is used to calculate a specific threat/vulnerability's CVSS score. Please select the appropriate options below, click "Calculate Score," and the CVSS score will be displayed. Use of this calculator is subject to [the disclaimer below.](#disclaimer) |
| ---    | |
| Base Parameters |
| Once discovered, analyzed, and catalogued, there are certain aspects of a vulnerability that do not change, assuming the initial information is complete and correct. These immutable characteristics will not change over time, nor in different environments. The base metric group captures the access to and impact on the target.  Attack Vector AV: Local AV: Adjacent AV: Network AV: Physical  Select Attack Vector Parameters  Attack Complexity AC: Low AC: High  Select Attack Complexity Parameters  Privileges Required PR: None PR: Low PR: High  Select Privileges Required Parameters  User Interaction UI: Required UI: None  Select User Interaction Parameters  Scope S: Unchanged S: Changed  Select Scope Parameters  Confidentiality Impact C: Low C: High C: None  Select Confidentiality Impact Parameters  Integrity Impact I: None I: Low I: High  Select Integrity Impact Parameters  Availability Impact A: Low A: High A: None  Select Availability Impact Parameters    Base Score: 5.8 |
| Temporal Parameters |
| As a vulnerability ages, certain intrinsic characteristics will change with time. In many cases, when a vulnerability is first discovered, the number of vulnerable systems will be at or close to its peak, while the availability of exploit and remedial information will be at its lowest point. As time progresses, patch information will become more available and more systems will be fixed as more exploits occur, driving the need for the fix. Eventually, the number of vulnerable systems will reach its low point as remedial information reaches its high point. The CVSS temporal metrics group captures these characteristics of a vulnerability that change over time.  Exploit Code Maturity E: Functional  E: High  E: Not Defined  E: Proof-of-Concept  E: Unproven   Select Exploit Code Maturity Parameters  Remediation Level RL: Official-Fix  RL: Temporary-Fix  RL: Workaround  RL: Unavailable  RL: Not Defined   Select Remediation Level Parameters  Report Confidence RC: Unknown  RC: Reasonable  RC: Not Defined  RC: Confirmed   Select Report Confidence Parameters     Temporal Score: 5.8 |
| Environmental Parameters |
| Different user environments can have an immense bearing on how (or if) a vulnerability affects a given information system and its stakeholders. The CVSS environmental metrics group captures characteristics of vulnerabilities that are tied to system distribution and network environment.  Confidentiality Requirement CR: Low  CR: Medium  CR: High  CR: Not Defined   Select Confidentiality Requirement Parameters  Integrity Requirement IR: Not Defined  IR: Low  IR: Medium  IR: High   Select Integrity Requirement Parameters  Availability Requirement AR: Low  AR: Medium  AR: High  AR: Not Defined   Select Availability Requirement Parameters  Modified Attack Vector MAV: Local  MAV: Adjacent  MAV: Network  MAV: Physical  MAV: Not Defined   Select Modified Attack Vector Parameters  Modified Attack Complexity MAC: Low  MAC: High  MAC: Not Defined   Select Modified Attack Complexity Parameters  Modified Privileges Required MPR: None  MPR: Low  MPR: High  MPR: Not Defined   Select Modified Privileges Required Parameters  Modified User Interaction MUI: Required  MUI: None  MUI: Not Defined   Select Modified User Interaction Parameters  Modified Scope MS: Unchanged  MS: Changed  MS: Not Defined   Select Modified Scope Parameters  Modified Confidentiality MC: None  MC: Low  MC: High  MC: Not Defined   Select Modified Confidentiality Parameters  Modified Integrity MI: None  MI: Low  MI: High  MI: Not Defined   Select Modified Integrity Parameters  Modified Availability MA: None  MA: Low  MA: High  MA: Not Defined   Select Modified Availability Parameters    Environmental Score: 5.8 |
| --- |
|  |
|

![](https://www.static-cisco.com/web/fw/search//img/loader.gif)

Loading..

### Tools

* [Cisco Software Checker](/security/center/softwarechecker.x)
* [Cisco Vulnerability Repository](/security/center/cvr)
* [Bug Search](https://bst.cloudapps.cisco.com/bugsearch/)
* [Cisco PSIRT openVuln API](https://developer.cisco.com/psirt/)
* [CVRF Repository](/security/center/cvrfListing.x)
* [OVAL Repository](https://community.cisco.com/t5/services-blogs/update-regarding-oval-definitions-by-cisco/ba-p/3661030)

### Actions

* [Download Cisco Software](https://software.cisco.com/download/home)
* [Download Snort Rules](https://snort.org)
* [Open or Query a TAC Case](https://mycase.cloudapps.cisco.com/case)

### Related Links

* [Cisco Event Responses](/security/center/erp.x?i=52)
* [Cisco Policies and Processes](/security/center/securityResources.x)
* [Cisco Security Blog](https://blogs.cisco.com/security)
* [Security Solutions](https://www.cisco.com/site/us/en/products/security/index.html)

| --- |
| --- |
| **ENDORSEMENT**  Cisco endorses and subscribes to the vulnerability guidelines outlined by the National Infrastructure Advisory Council (NIAC). The NIAC commissioned the development of the Common Vulnerability Scoring System (CVSS), which is currently maintained by FIRST (Forum of Incident Response and Security Teams), www.first.org, and was a combined effort involving many companies, including Cisco Systems, Inc.  **GENERAL DISCLAIMER AND LIMITATION OF LIABILITY**  All information provided by the CVSS Online Calculator is for informational purposes only and is subject to change or withdrawal at any time without notice. The CVSS Online Calculator is a pilot program and Cisco assumes no responsibility for the accuracy or completeness of the information provided and any decision made or action taken or not taken in reliance upon the information provided or furnished hereunder. The information and results provided by the CVSS Online Calculator vary based on the information provided by each user, which is specific to each user's network and cannot be verified or confirmed by Cisco. The CVSS Online Calculator is offered only as a convenience and any use of the results or information provided is at the user's risk. |



=== Content from sec.cloudapps.cisco.com_6bc878d7_20250115_132748.html ===


[Home](https://www.cisco.com) / [Cisco Security](https://sec.cloudapps.cisco.com/security/center/home.x)
# Security Vulnerability Policy

Security Vulnerability Policy - Cisco

If you are experiencing a security vulnerability emergency, see the [Reporting or Obtaining Support for a Suspected Security Vulnerability](#roosfassv) section of this document.

---

### Contents

[Purpose](#purpose)

[Policy](#policy)

[Cisco Product Security Incident Response](#cpsir)

[Reporting or Obtaining Support for a Suspected Security Vulnerability](#roosfassv)

[General Security-Related Queries](#gsrq)

[Receiving Security Vulnerability Information from Cisco](#rsvifc)

[Cisco.com](#cc)

[Email](#email)

[RSS Feeds](#rss)

[Cisco PSIRT openVuln API](#openVuln_API)

[My Notifications](#cns)
[Creating a Notification](#pfsuc)

[Public Relations or Press Queries Regarding Cisco Security Vulnerability Information](#pr)

[Commitment to Product Security and Integrity at Cisco](#psi)

[Cisco Product Security Incident Response Process](#cpsirp)

[Disclosure of Security Vulnerabilities Discovered as Part of Cisco Services Delivery](#dsvdpcsd)

[Assessing Security Risk—Common Vulnerability Scoring System and the Security Impact Rating](#asr)

[Cisco Cloud-Hosted Services](#cloud)

[Third-Party Software Vulnerabilities](#3psv)

[Cisco Vulnerability Repository](#cvr)

[Vulnerability Exploitability eXchange](#vex)
[Types of Security Publications](#tosp)

[Cisco Security Advisories](#sa)

[Cisco Event Responses](#cer)

[Release Note Enclosures](#rne)
[Communications Plan](#cp)

[Disclosure Schedule](#ds)

[Cisco NX-OS Software](#cis)

[Cisco IOS XR Software](#cis)

[Cisco IOS and IOS XE Software](#cis)

[All Other Products](#aop)

[Exceptions](#exceptions)
 [Incident Response Eligibility](#ire)

[Security Software Updates](#ssu)

[Security Advisory Terms and Conventions](#terms)

[Cisco Bug Bounty Programs](#bug_bounties)

---

## Purpose

This policy was created to guide and inform Cisco customers in the event of a reported vulnerability in a Cisco product or cloud-hosted service. It ensures that Cisco customers have a consistent, unambiguous resource to help them understand how Cisco responds to events of this nature.

## Policy

This policy clearly states how Cisco addresses reported security vulnerabilities in Cisco products and cloud-hosted services, including the timeline, actions, and responsibilities that apply to all customers.

## Cisco Product Security Incident Response

The Cisco Product Security Incident Response Team (PSIRT) is responsible for responding to Cisco product security incidents. The Cisco PSIRT is a dedicated, global team that manages the receipt, investigation, and public reporting of information about security vulnerabilities and issues related to Cisco products and services. Cisco defines a security vulnerability as a weakness in the computational logic (e.g., code) found in software and hardware components that, when exploited, results in a negative impact to confidentiality, integrity, or availability. Cisco reserves the right to deviate from this definition based on specific circumstances. The Cisco PSIRT adheres to ISO/IEC 29147:2018, which are [guidelines for disclosure of potential vulnerabilities](https://www.iso.org/standard/72311.html) established by the International Organization for Standardization.

The on-call Cisco PSIRT works 24 hours a day with Cisco customers, independent security researchers, consultants, industry organizations, and other vendors to identify possible security vulnerabilities and issues with Cisco products and networks.

## Reporting or Obtaining Support for a Suspected Security Vulnerability

Individuals or organizations that are experiencing a product security issue are strongly encouraged to contact the Cisco PSIRT. Cisco welcomes reports from independent researchers, industry organizations, vendors, customers, and other sources concerned with product or network security. At minimum, a description of the potential vulnerability is needed to report a security issue.

To contact the Cisco PSIRT, use one of the following methods:

*Primary approach:* The most effective method for reaching the Cisco PSIRT is sending an email to psirt@cisco.com. In the email, provide a detailed problem description and any relevant details and logs.

Alternatively, the Cisco PSIRT may be contacted using the following phone numbers:

* +1 877 228 7302 (toll-free within North America)
* +1 408 525 6532 (international direct dial)

These contact numbers route to Cisco global customer support. To facilitate engagement, please explain that this is a product security issue or, alternatively, reference the PSIRT-SVP-001 search code.

Cisco encourages customers to encrypt sensitive information that is sent to Cisco by email. The Cisco PSIRT supports encrypted messages via Pretty Good Privacy (PGP)/GNU Privacy Guard (GPG) encryption software. The Cisco PSIRT public key is available at the following link: <https://cscrdr.cloudapps.cisco.com/cscrdr/security/center/files/Cisco_PSIRT_PGP_Public_Key.asc>.

**Note:** Cisco supports an RFC 9116-compliant security.txt file, located at <https://www.cisco.com/.well-known/security.txt>.

## General Security-Related Queries

For general security concerns about Cisco products and cloud-hosted services, the Cisco Technical Assistance Center (TAC) can provide configuration and technical assistance. The Cisco TAC can also help with nonsensitive security incidents and software upgrades for security bug fixes. To contact the Cisco TAC, use one of the following methods:

|  | **Cisco TAC Support** |
| --- | --- |
| **Phone** | +1 800 553 2447 (toll-free within North America)+1 408 526 7209 (international direct dial) Additional TAC numbers: [Customer Service Contacts](https://www.cisco.com/c/en/us/support/web/tsd-cisco-worldwide-contacts.html) |
| **Web** | <https://mycase.cloudapps.cisco.com/start> |
| **Hours** | 24 hours a day, 7 days a week |

## Receiving Security Vulnerability Information from Cisco

There are several ways to stay connected and receive the latest security vulnerability information from Cisco. Customers should review the following table, and subsequent summaries, to determine the appropriate option for them:

| **Cisco.com** | <https://www.cisco.com/security/> |
| --- | --- |
| **Email** | cust-security-announce@cisco.com |
| **RSS** | <https://sec.cloudapps.cisco.com/security/center/rss.x?i=44> |
| **Cisco PSIRT openVuln API** | [https://developer.cisco.com/site/PSIRT/](https://developer.cisco.com/site/PSIRT) |
| **My Notifications** | <https://www.cisco.com/c/en/us/support/web/tools/cns/notifications.html> |

### **Cisco.com**

The [Cisco Security portal](https://www.cisco.com/security) on Cisco.com provides Cisco security vulnerability documents and Cisco security information, including relevant security products and services.

For direct links to specific security functions, see the [Types of Security Publications](#tosp) section of this
document.

### **Email**

Cisco Security Advisories provide information about Critical-, High-, and Medium-severity security vulnerabilities. They are clear signed with the Cisco PSIRT [PGP public key](https://cscrdr.cloudapps.cisco.com/cscrdr/security/center/files/Cisco_PSIRT_PGP_Public_Key.asc) and distributed to the external cust-security-announce@cisco.com mailing list. The Cisco PSIRT may also send Informational advisories to the cust-security-announce mailing list. Informational advisories are used not as a disclosure mechanism for any Cisco vulnerabilities but for sharing information on security incidents that may impact Cisco products and that may be of interest to Cisco customers.

Emails are sent for the initial release of and major revisions to Cisco Security Advisories. A major revision is defined as a significant change to advisory content that could result in the customer addressing the vulnerability differently. Examples of a major advisory change include, but are not limited to, changes to the affected products list, changes in Security Impact Rating (SIR; see the [Assessing Security Risk—Common Vulnerability Scoring System and the Security Impact Rating](#asr) section of this document), and changes in mitigation and/or fix information. If a document undergoes a minor revision, the update will be posted to Cisco.com without an accompanying email. Customers that require automated alerts for minor revisions should subscribe to the Cisco Security Advisory Really Simple Syndication (RSS) feed or My Notifications. All Security Advisories on Cisco.com are displayed in chronological order, with the most recent advisories and updates appearing at the top of the page.

To subscribe to the cust-security-announce mailing list, email cust-security-announce-join@cisco.com. (The content of the message does not matter.) You will receive confirmation, instructions, and a list policy statement.

Please note that requests must be sent to cust-security-announce-join@cisco.com and not to the cust-security-announce@cisco.com list itself.

To unsubscribe from the cust-security-announce mailing list, email cust-security-announce-leave@cisco.com with the word "unsubscribe" in the subject line. (The content of the message does not matter.) You will receive a confirmation notice, to which you need to reply to be unsubscribed. You will not be unsubscribed unless you reply to the confirmation email.

Please note that requests to subscribe must be sent to cust-security-announce-join@cisco.com, and requests to unsubscribe must be sent to cust-security-announce-leave@cisco.com—not to the cust-security-announce@cisco.com email address itself.

You must send the messages from the account that you want to be subscribed to or unsubscribed from the list.

Customers can also request to be subscribed or unsubscribed to the cust-security-announce mailing list by emailing psirt@cisco.com.

### **RSS Feeds**

Cisco security vulnerability information is also available via RSS feeds from Cisco.com. These feeds are free and do not require an active Cisco.com registration. For information on how to subscribe to the RSS feeds, visit the [Cisco Security RSS Feeds page](https://sec.cloudapps.cisco.com/security/center/rss.x?i=44).

### **Cisco PSIRT openVuln API**

The Cisco PSIRT openVuln application programming interface (API) is a RESTful API that conforms to the [representational state transfer](https://restfulapi.net/) (REST) software architectural style and allows customers to obtain Cisco security vulnerability information in different machine-consumable formats. To learn about accessing and using the API, visit the [PSIRT page](https://developer.cisco.com/site/PSIRT) on the Cisco DevNet website.

### **My Notifications**

The [My Notifications website](https://www.cisco.com/c/en/us/support/web/tools/cns/notifications.html) allows registered Cisco.com users to subscribe to and receive important Cisco product and technology information, including Cisco Security Advisories. This service provides an improved unified subscription experience, allowing users to choose the timing of notifications as well as the notification delivery method (email or RSS feed). The level of access will be determined by the subscriber's relationship with Cisco.

### Creating a Notification

To create a notification, use the following steps:

1. Log in to the [My Notifications website](https://www.cisco.com/c/en/us/support/web/tools/cns/notifications.html) on Cisco.com using a registered Cisco.com account name and password.
2. Click the **Add Notification** button and follow the instructions.

## Public Relations or Press Queries Regarding Cisco Security Vulnerability Information

The following table shows the Cisco press contacts for Cisco security vulnerability information.

|  | **Press Contacts** |
| --- | --- |
| **Michael Ricketts** | Email: micricke@cisco.comPhone: +1 919 392 2756 |
| **Additional Public Relations** | media\_pr@cisco.com |

## Commitment to Product Security and Integrity at Cisco

Cisco product development practices specifically prohibit any intentional behaviors or product features that are designed to allow unauthorized device or network access, exposure of sensitive device information, or a bypass of security features or restrictions. These include, but are not limited to:

* Undisclosed device access methods or "back doors"
* Hardcoded or undocumented account credentials
* Covert communication channels
* Undocumented traffic diversion

Cisco considers such product behaviors to be serious vulnerabilities. Cisco will address any issues of this nature with the highest priority and encourages all parties to report suspected vulnerabilities to the Cisco PSIRT for immediate investigation. Internal and external reports of these vulnerabilities will be managed and disclosed in accordance with the terms of the Cisco Security Vulnerability Policy.

More information can be found on the [Cisco Secure Development Lifecycle (CSDL) website](https://www.cisco.com/c/en/us/about/trust-center/technology-built-in-security.html#~stickynav=2).

## Cisco Product Security Incident Response Process

Figure 1 illustrates the vulnerability life cycle and the Cisco PSIRT disclosure and resolution process at a high level.

**Figure 1.** Cisco Product Security Incident Response Process

![response process cycle from awareness to feedback](https://cscrdr.cloudapps.cisco.com/cscrdr/security/center/public/files/images/white_papers/psirtprocess.jpg "Cisco Product Security Incident Response Process")

The steps in the process illustrated in Figure 1 are as follows:

1. **Awareness:** PSIRT receives notification of a security incident.
2. **Active Management:** PSIRT prioritizes and identifies resources.
3. **Software Fixes:** PSIRT coordinates the fix and impact assessment.
4. **Customer Notification:** PSIRT notifies all customers simultaneously.

The Cisco PSIRT investigates all reports regardless of the Cisco software code version or product life cycle status until the product reaches the [Last Day of Support](https://www.cisco.com/c/en/us/products/eos-eol-policy.html) (LDoS). Issues will be prioritized based on the potential severity of the vulnerability and other environmental factors. Ultimately, the resolution of a reported incident may require upgrades to products and cloud-hosted services that are under active support from Cisco. As a best practice, Cisco strongly recommends that customers periodically verify that their products are under active support for access to the latest software updates and other benefits.

Throughout the investigative process, the Cisco PSIRT strives to work collaboratively with the source of the report (incident reporter) to confirm the nature of the vulnerability, gather required technical information, and ascertain appropriate remedial action. When the initial investigation is complete, results will be delivered to the incident reporter along with a plan for resolution and public disclosure. If the incident reporter disagrees with the conclusion, the Cisco PSIRT will make every effort to address those concerns.

In the case of incidents about which an agreement cannot be reached through the normal process, incident reporters may escalate by contacting the [Cisco TAC](#gsrq) and requesting the director of the global Cisco PSIRT team.

During any investigation, the Cisco PSIRT manages all sensitive information on a highly confidential basis. Internal distribution is limited to those individuals who have a legitimate need to know and can actively assist in the resolution. Similarly, the Cisco PSIRT asks incident reporters to maintain strict confidentiality until complete resolutions are available for customers and have been published by the Cisco PSIRT on the Cisco website through the appropriate coordinated disclosure.

With the agreement of the incident reporter, the Cisco PSIRT may acknowledge the reporter's contribution during the public disclosure of the vulnerability.

The Cisco PSIRT works with third-party coordination centers such as the [Computer Emergency Response Team Coordination Center](https://www.kb.cert.org/vuls/) (CERT/CC), [Computer Emergency Response Team of Finland](https://www.kyberturvallisuuskeskus.fi/en/) (CERT-FI), [Japan Computer Emergency Response Team](https://www.jpcert.or.jp/english/) (JP-CERT), and [National Protective Security Authority](https://www.npsa.gov.uk) (NPSA) to manage a coordinated industry disclosure for vulnerabilities reported to Cisco that may impact multiple vendors (for example, a generic protocol issue). In these situations, the Cisco PSIRT will either assist the incident reporter with contacting the coordination center or do so on the incident reporters behalf.

If a reported vulnerability involves a vendor product, the Cisco PSIRT will notify the vendor directly, coordinate with the incident reporter, or engage a third-party coordination center.

The Cisco PSIRT will coordinate with the incident reporter to determine the frequency of status updates on the incident and documentation updates.

In the event that Cisco becomes aware of a vulnerability that does not affect a Cisco product but does involve another vendor's product, Cisco will follow the Cisco [policy for reporting vulnerabilities to vendors](https://sec.cloudapps.cisco.com/security/center/resources/vendor_vulnerability_policy.html).

## Disclosure of Security Vulnerabilities Discovered as Part of Cisco Services Delivery

If a new or previously undisclosed security vulnerability is found during a Cisco Services engagement with a customer, Cisco will follow the [Cisco Product Security Incident Response Process](#cpsirp). Vulnerabilities found in Cisco products and cloud-hosted services will be handled by the Cisco PSIRT according to the [Cisco Security Vulnerability Policy](https://sec.cloudapps.cisco.com/security/center/resources/security_vulnerability_policy.html). If the vulnerability is in another vendors product, Cisco will follow the [Cisco Vendor Vulnerability Reporting and Disclosure Policy](https://sec.cloudapps.cisco.com/security/center/resources/vendor_vulnerability_policy.html) unless the affected customer wishes to report the vulnerability to the vendor directly; in that case, Cisco will facilitate contact between the customer and the vendor, and will notify CERT/CC (or its national equivalent).

Cisco will protect customer-specific data at all times throughout this process. Specifically, Cisco will not share any customer-specific data unless directed to do so by the affected customer, or as required by a legal investigation.

### **Assessing Security Risk—Common Vulnerability Scoring System and the Security Impact Rating**

Cisco uses [Version 3.1](https://www.first.org/cvss/v3-1/) of the [Common Vulnerability Scoring System](https://www.first.org/cvss/) (CVSS) as part of its standard process of evaluating reported potential vulnerabilities that do not have a CVE in Cisco products and cloud-hosted services. The CVSS model uses three distinct measurements, or scores, that include Base, Temporal, and Environmental calculations. Cisco will provide an evaluation of the Base vulnerability score and, in some instances, the Temporal vulnerability score. End users are encouraged to compute the Environmental score based on their network parameters. The combination of all three scores should be considered the final score, which represents a moment in time and is tailored to a specific environment. Organizations are advised to use this final score to prioritize responses in their own environments.

**Note:** Cisco began transitioning to CVSS Version 3.1 (CVSSv3.1) in May 2020.

In addition to CVSS scores, Cisco uses the Security Impact Rating (SIR) as a way to categorize vulnerability severity in a simpler manner. The SIR is based on the CVSS Qualitative Severity Rating Scale of the Base score, may be adjusted by PSIRT to account for Cisco-specific variables, and is included in every Cisco Security Advisory. Cisco uses the following guidelines to determine the Cisco Security Advisory type for vulnerabilities in Cisco-authored, customer-managed software. Security Advisories for Critical, High, and Medium SIRs include fixed software information.

| **Publication** | **Type** | **CVSS** | **CVE** | **Fix Information** | **Machine-Readable Format** |
| --- | --- | --- | --- | --- | --- |
| Cisco Security Advisory | Critical | 9.0–10.0 | Yes | Fix information in the Security Advisory and bug. Detailed fix information for Cisco IOS, IOS XE, NX-OS, Adaptive Security Appliance (ASA), Firepower Threat Defense (FTD), and Firepower Management Center (FMC) Software can be obtained using the Cisco Software Checker. | [RSS, CSAF](https://sec.cloudapps.cisco.com/security/center/rss.x?i=44) |
| High | 7.0–8.9 | Yes | Fix information in the Security Advisory and bug. Detailed fix information for Cisco IOS, IOS XE, NX-OS, ASA, FTD, and FMC Software can be obtained using the Cisco Software Checker. | [RSS, CSAF](https://sec.cloudapps.cisco.com/security/center/rss.x?i=44) |
| Medium | 4.0–6.9 | Yes | Fix information in the Security Advisory and bug. Detailed fix information for Cisco IOS, IOS XE, NX-OS, ASA, FTD, and FMC Software can be obtained using the Cisco Software Checker. | [RSS, CSAF](https://sec.cloudapps.cisco.com/security/center/rss.x?i=44) |
| Informational | N/A | No | Fix information in bug (if applicable). | [RSS](https://sec.cloudapps.cisco.com/security/center/rss.x?i=44) |

Issues with a Low SIR are typically published as a bug Release Note Enclosure (RNE) and not as a Security Advisory.

Cisco reserves the right to deviate from these guidelines in specific cases if additional factors are not properly captured in the CVSS score.

If there is a security issue with a third-party software component that is used in a Cisco product, Cisco typically uses the CVSS score provided by the third party. In some cases, Cisco may adjust the CVSS score to reflect the impact to the Cisco product.

**Note:** Cisco is a [Common Vulnerabilities and Exposures](https://cve.mitre.org/index.html) (CVE) Numbering Authority and will assign CVE IDs to Cisco software vulnerabilities from the MITRE block of IDs assigned to the company for this purpose. Cisco does not assign CVE IDs for reported vulnerabilities until the vulnerabilities have been confirmed by Cisco. After vulnerabilities are published, Cisco provides CVE details to MITRE for inclusion in its database.

For more information about CVSS, visit [FIRST.org](https://www.first.org/cvss/).
### **Cisco Cloud-Hosted Services**

Cisco offers multiple cloud-hosted services that are used by customers but are maintained, patched, and monitored by Cisco.

The Cisco PSIRT responds to vulnerabilities in Cisco cloud-hosted services and works closely with the teams that operate them. These teams ensure that security vulnerabilities are fixed and patches are deployed to all customer instances in a timely manner.

Typically, service-related security events are communicated to customers by the service teams through direct notification or through the service dashboard or portal. In some instances, Cisco may disclose vulnerabilities through Security Advisories for Cisco cloud-hosted services in coordination with the service teams.

In most cases, no user action is required because Cisco regularly patches cloud-hosted services.

### **Third-Party Software Vulnerabilities**

If there is a vulnerability in a third-party software component that is used in a Cisco product, Cisco typically uses the CVSS score provided by the component creator. Cisco may adjust the CVSS score to reflect the impact to Cisco products.

Cisco will consider a third-party vulnerability “high profile” if it meets the following criteria:

* The vulnerability exists in a third-party component.
* Multiple Cisco products and/or cloud-hosted services are affected.
* The CVSS score is 5.0 or above.
* The vulnerability has gathered significant public attention.
* The vulnerability is likely to have exploits available and is expected to be, or is being, actively exploited.

For high profile, third-party vulnerabilities, Cisco will begin assessing all potentially impacted products and cloud-hosted services that have not reached the LDoS and publish a Security Advisory within 24 hours after Cisco classifies the vulnerability as high profile. All known affected Cisco products and cloud-hosted services will be detailed in an update to the initial Security Advisory that will be published within 7 days of the initial disclosure. A Cisco bug will be created for each vulnerable product so that registered customers can view them using the Cisco Bug Search Toolkit. Third-party vulnerabilities that are not classified as high profile will be disclosed in a Release Note Enclosure.

### **Cisco Vulnerability Repository**

The [Cisco Vulnerability Repository](https://sec.cloudapps.cisco.com/security/center/cvr) (CVR) is a vulnerability search engine for CVEs reported after 2017 that may impact Cisco products. CVR can help customers understand if their Cisco product is affected by a particular third-party software vulnerability. This tool also displays any Cisco Security Advisories associated with a CVE. At this time, CVR does not include Cisco cloud offers. For help with a product not listed in this tool, please use the Feedback link on the [CVR page](https://sec.cloudapps.cisco.com/security/center/cvr) or contact your support organization.

### **Vulnerability Exploitability eXchange**

Customers may request a Vulnerability Exploitability eXchange (VEX) document for any CVE in CVR.

### **Types of Security Publications**

In all security publications, Cisco discloses the information required for an end user to assess the impact of a vulnerability and any potential steps needed to protect their environment. Cisco does not provide vulnerability details that could enable someone to craft an exploit. Cisco Security Advisories are point-in-time documents. Information should only be considered up to date as of the time and date of the last publication update as indicated by the "Last Updated" field in the advisory header.

Cisco provides the following types of security-related publications via the [Cisco Security portal](https://www.cisco.com/security) on Cisco.com.

### Cisco Security Advisories

[Cisco Security Advisories](https://sec.cloudapps.cisco.com/security/center/publicationListing.x) provide detailed information about security issues that directly involve Cisco products and cloud-hosted services and require an upgrade, fix, or other customer action. Security Advisories are used to disclose vulnerabilities in Cisco-authored software or in high-profile third-party software with a Critical, High, or Medium SIR. The Cisco PSIRT only validates the affected and fixed version information documented in the advisory.

All Cisco Security Advisories that disclose vulnerabilities with a Critical, High, or Medium SIR include an option to download [Common Security Advisory Framework (CSAF)](https://csaf.io/) content. CSAF is an industry standard designed to depict vulnerability information in machine-readable format. This machine-readable content can be used with other tools to automate the process of interpreting data contained in a Security Advisory. CSAF content can be downloaded directly from each Security Advisory. For more information about CSAF, see the preceding link.

The Informational type of Cisco Security Advisories addresses issues that require a response to information discussed in a public forum, such as a blog or discussion list. Informational advisories are normally published if a third party makes a public statement about a Cisco product vulnerability. Informational advisories may also be used to proactively notify customers about a security-related issue that is not a vulnerability.

### Cisco Event Responses

Cisco [Event Responses](https://sec.cloudapps.cisco.com/security/center/erp.x?i=52) provide information about security events that have the potential for widespread impact on customer networks, applications, and devices. Cisco Event Responses contain summary information, threat analysis, and mitigation techniques that feature Cisco products and cloud-hosted services. They are normally published under the following circumstances:

* If a significant security vulnerability exists in a vendor's product that could affect a Cisco product due to interoperation with the vendor's product or use of the network as a vector for exploitation
* In response to the release of Cisco IOS and IOS XE, Cisco IOS XR, Cisco NX-OS, and Cisco ASA, FTD, and FMC Software bundled publications

### Release Note Enclosures

Release Note Enclosures are used to disclose issues with a Low SIR and most third-party software vulnerabilities. All Cisco bug IDs that are disclosed by Cisco are available for registered customers to view in the [Cisco Bug Search Tool](https://tools.cisco.com/bugsearch/).

If a Cisco Security Advisory references a bug, the bug entry in the Cisco Bug Search Tool will link to the relevant Cisco Security Advisory.

Any Cisco bug that has been evaluated by the Cisco PSIRT includes a "PSIRT Evaluation" section in its Release Note Enclosure. This section includes, where Cisco deems appropriate and relevant, Base and Temporal CVSS scores and a CVE ID. Customers are invited to use this additional information at their discretion and correlate Cisco bugs with industry events. This information is not intended to supplement any standard Cisco warranties applicable to the software as stated in the [Cisco End User License Agreement](https://www.cisco.com/c/en/us/about/legal/cloud-and-software/end_user_license_agreement.html).

Free software updates will not be provided for issues that are disclosed through a Release Note Enclosure. Customers who wish to upgrade to a software version that includes fixes for those issues should contact their normal support channels. Any exception to this policy will be determined solely at the discretion of Cisco.

The following table summarizes the methods used to notify customers about the aforementioned security publications. Exceptions may be made on a case-by-case basis to increase communication for a given document.

| **Publication** | **Email** | **Security Portal** | **RSS** | **CNS** | **openVuln API** | **Bug Search Tool** |
| --- | --- | --- | --- | --- | --- | --- |
| **Cisco Security Advisory—Critical and High Severity** | Yes | Yes | Yes | Yes | Yes | Yes |
| **Cisco Security Advisory—Medium Severity** | Yes | Yes | Yes | Yes | Yes | Yes |
| **Cisco Security Advisory—Informational** | Yes | Yes | Yes | No | No | Yes |
| **Cisco Event Response** | No | Yes | Yes | No | No | No |
| **Release Note Enclosure** | No | No | No | No | No | Yes |

### **Communications Plan**

If one or more of the following conditions exist, Cisco will publicly disclose Cisco Security Advisories:

* The Cisco PSIRT has completed the incident response process and determined that enough software patches or workarounds exist to address the vulnerability, or subsequent public disclosure of code fixes is planned to address high-severity vulnerabilities.
* The Cisco PSIRT has observed active exploitation of a vulnerability that could lead to increased risk for Cisco customers. Cisco will accelerate the publication of a security announcement describing the vulnerability that may or may not include a complete set of patches or workarounds.
* There is the potential for increased public awareness of a vulnerability affecting Cisco products and/or cloud-hosted services that could lead to increased risk for Cisco customers. Cisco will accelerate the publication of a security announcement describing the vulnerability that may or may not include a complete set of patches or workarounds.
* The Cisco PSIRT has declared a third-party software vulnerability to be "high profile."

All Cisco security publications are disclosed to customers and the public simultaneously.

When coordinating disclosure with third parties, the Cisco PSIRT will attempt to provide notification of any changes to the Cisco PSIRT public disclosure schedule.

As documented in the [Receiving Security Vulnerability Information from Cisco](#rsvifc) section of this document, Cisco delivers technical security information about software fixes in Cisco products and distributes product updates through several channels. Cisco reserves the right to deviate from this policy on an exception basis to ensure access to Cisco.com for software patch availability.

### **Disclosure Schedule**

In direct response to customer feedback, Cisco releases the following bundles of Cisco Security Advisories at 1600 Greenwich Mean Time (GMT) on a regular schedule twice each year. This schedule applies to the disclosure of vulnerabilities in the following Cisco products and does not apply to the disclosure of vulnerabilities in other Cisco products.

| **Cisco Product(s)** | **Release Schedule** |
| --- | --- |
| Cisco NX-OS Software | Fourth Wednesday of February and August |
| Cisco IOS XR Software | Second Wednesday in March and September |
| Cisco IOS and IOS XE Software | Fourth Wednesday in March and September |

### All Other Products

Cisco generally discloses Cisco Security Advisories at 1600 GMT on any given Wednesday.

### Exceptions

Cisco reserves the right to publish an individual Security Advisory for Cisco IOS and IOS XE Software, Cisco IOS XR Software, or Cisco NX-OS Software or other products outside the published schedule. Conditions under which an out-of-cycle publication may occur include, but are not limited to, the following:

* Cisco detects heightened public awareness of a serious vulnerability.
* Cisco learns of active exploitation of a vulnerability.
* Cisco works with a third-party coordination center to publicly disclose a vulnerability.

### **Incident Response Eligibility**

All customers, regardless of contract status, are eligible to receive support from the Cisco TAC for a known or reasonably suspected security vulnerability in Cisco products and services. For more information about how to contact the Cisco TAC, see the [General Security-Related Queries](https://sec.cloudapps.cisco.com/security/center/resources/security_vulnerability_policy.html#gsrq) section of this document. Customers who contact the Cisco TAC should reference the URL of the Cisco security publication to assist in connecting with the proper support team.

Customers with paid service contracts for incident response and forensic assistance should request assistance through the contact methods specified in their contract.

Cisco, at its sole discretion, may offer customers additional security services free of charge. Cisco reserves the right to determine the type and degree of free assistance it may offer in connection with any incident and to withdraw from such an incident at any time.

### **Security Software Updates**

The Cisco PSIRT will investigate and disclose vulnerabilities in Cisco products and services from the date of First Commercial Shipment (FCS) to the [LDoS](https://www.cisco.com/c/en/us/products/eos-eol-policy.html). Cisco customers with service contracts that entitle them to regular software updates should obtain security fixes through their usual update channels, generally from the Cisco website for the relevant product. Cisco recommends contacting the Cisco TAC only with specific and imminent problems or questions.

As a special customer service, and to improve the overall security of the internet, Cisco may offer customers free software updates to address high-severity security problems. The decision to provide free software updates is made on a case-by-case basis. Refer to the Cisco security publication for details. Free software updates will typically be limited to Critical- and High-severity vulnerabilities.

Fixes for some third-party software vulnerabilities may be available only in the most recent major software releases and not backported to older releases.

If Cisco has offered a free software update to address a specific issue, noncontract customers who are eligible for the update may obtain it by contacting the Cisco TAC using any of the methods described in the [General Security-Related Queries](#gsrq) section of this document.

**Note:** To verify their entitlement, individuals who contact the Cisco TAC should have available the URL of the Cisco document that is offering the update.

Customers may only download, install, and expect support for software releases and feature sets for which they have purchased a valid license that is current and active. By installing, downloading, accessing, or otherwise using such software updates, customers agree to follow the terms of the [Cisco software license agreement](https://www.cisco.com/c/en/us/about/legal/cloud-and-software/end_user_license_agreement.html). In most cases, the software update will be a maintenance release to software that was previously purchased. Free security software updates do not entitle customers to a new software license, additional software feature sets, or major revision upgrades.

After [End of Sale](https://www.cisco.com/c/en/us/products/eos-eol-policy.html) (EoS), the availability of security fixes for vulnerabilities is defined in the product’s EoS bulletin. (See the [End-of-Life Policy](https://www.cisco.com/c/en/us/products/eos-eol-policy.html) for details.) The EoS bulletin may define the Last Day of Support (**LDoS**) milestone, which identifies the last date that Cisco will investigate and disclose product vulnerabilities.

Once the LDoS has been reached, the Cisco PSIRT will continue to accept vulnerability reports but will not analyze, fix, or disclose potential vulnerabilities. To this end, the Cisco PSIRT will not issue CVEs for issues reported on products that are past the LDoS milestone.

### Security Advisory Terms and Conventions

**Fixed Release Availability:** If a future release date is indicated for software, the date provided represents an estimate based on all information known to Cisco as of the "Last Updated" date at the top of the advisory. Availability dates are subject to change based on a number of factors, including satisfactory testing results and delivery of other priority features and fixes. If no version or date is listed for an affected component (indicated by a blank field and/or an advisory designation of Interim), Cisco is continuing to evaluate the fix and will update the advisory as additional information becomes available. After the advisory is marked Final, customers should refer to the associated Cisco bug(s) for further details.

The designated Security Advisory status indicates the following:

**Interim:** The Cisco investigation is ongoing. Cisco will issue revisions to the advisory when additional information, including fixed software release data, becomes available.

**Final:** Cisco has completed its evaluation of the vulnerability described in the advisory. There will be no further updates unless there is a material change in the nature of the vulnerability.

All aspects of this process are subject to change without notice and on a case-by-case basis. No particular level of response is guaranteed for any specific issue or class of issues.

## Cisco Bug Bounty Programs

For information on Cisco Bug Bounty programs, see [Bug Bounty Programs at Cisco](https://sec.cloudapps.cisco.com/security/center/resources/cisco_bug_bounty_faq.html).

Back to Top

---

Last Updated: 2024 December 23

This document is part of the [Cisco Security](https://www.cisco.com/security) portal. Cisco provides the official information contained on the  [Cisco Security](https://www.cisco.com/security) portal in English only.

This document is provided on an "as is" basis and does not imply any kind of guarantee or warranty, including the warranties of merchantability or fitness for a particular use. Your use of the information in the document or materials linked from the document is at your own risk. Cisco reserves the right to change or update this document without notice at any time.

Internal Reference Policy: Security Vulnerability Policy, EDCS-19443599

Owning Function: Cisco PSIRT

---

© 2024 Cisco and/or its affiliates. All rights reserved. This document is Cisco Public Information.

![](http://www.cisco.com/swa/i/spacer.gif)



=== Content from software.cisco.com_50ded7a6_20250115_132947.html ===




=== Content from sec.cloudapps.cisco.com_53341f93_20250115_132948.html ===


[Home](https://www.cisco.com) / [Cisco Security](https://sec.cloudapps.cisco.com/security/center/home.x)
# Security Vulnerability Policy

Security Vulnerability Policy - Cisco

If you are experiencing a security vulnerability emergency, see the [Reporting or Obtaining Support for a Suspected Security Vulnerability](#roosfassv) section of this document.

---

### Contents

[Purpose](#purpose)

[Policy](#policy)

[Cisco Product Security Incident Response](#cpsir)

[Reporting or Obtaining Support for a Suspected Security Vulnerability](#roosfassv)

[General Security-Related Queries](#gsrq)

[Receiving Security Vulnerability Information from Cisco](#rsvifc)

[Cisco.com](#cc)

[Email](#email)

[RSS Feeds](#rss)

[Cisco PSIRT openVuln API](#openVuln_API)

[My Notifications](#cns)
[Creating a Notification](#pfsuc)

[Public Relations or Press Queries Regarding Cisco Security Vulnerability Information](#pr)

[Commitment to Product Security and Integrity at Cisco](#psi)

[Cisco Product Security Incident Response Process](#cpsirp)

[Disclosure of Security Vulnerabilities Discovered as Part of Cisco Services Delivery](#dsvdpcsd)

[Assessing Security Risk—Common Vulnerability Scoring System and the Security Impact Rating](#asr)

[Cisco Cloud-Hosted Services](#cloud)

[Third-Party Software Vulnerabilities](#3psv)

[Cisco Vulnerability Repository](#cvr)

[Vulnerability Exploitability eXchange](#vex)
[Types of Security Publications](#tosp)

[Cisco Security Advisories](#sa)

[Cisco Event Responses](#cer)

[Release Note Enclosures](#rne)
[Communications Plan](#cp)

[Disclosure Schedule](#ds)

[Cisco NX-OS Software](#cis)

[Cisco IOS XR Software](#cis)

[Cisco IOS and IOS XE Software](#cis)

[All Other Products](#aop)

[Exceptions](#exceptions)
 [Incident Response Eligibility](#ire)

[Security Software Updates](#ssu)

[Security Advisory Terms and Conventions](#terms)

[Cisco Bug Bounty Programs](#bug_bounties)

---

## Purpose

This policy was created to guide and inform Cisco customers in the event of a reported vulnerability in a Cisco product or cloud-hosted service. It ensures that Cisco customers have a consistent, unambiguous resource to help them understand how Cisco responds to events of this nature.

## Policy

This policy clearly states how Cisco addresses reported security vulnerabilities in Cisco products and cloud-hosted services, including the timeline, actions, and responsibilities that apply to all customers.

## Cisco Product Security Incident Response

The Cisco Product Security Incident Response Team (PSIRT) is responsible for responding to Cisco product security incidents. The Cisco PSIRT is a dedicated, global team that manages the receipt, investigation, and public reporting of information about security vulnerabilities and issues related to Cisco products and services. Cisco defines a security vulnerability as a weakness in the computational logic (e.g., code) found in software and hardware components that, when exploited, results in a negative impact to confidentiality, integrity, or availability. Cisco reserves the right to deviate from this definition based on specific circumstances. The Cisco PSIRT adheres to ISO/IEC 29147:2018, which are [guidelines for disclosure of potential vulnerabilities](https://www.iso.org/standard/72311.html) established by the International Organization for Standardization.

The on-call Cisco PSIRT works 24 hours a day with Cisco customers, independent security researchers, consultants, industry organizations, and other vendors to identify possible security vulnerabilities and issues with Cisco products and networks.

## Reporting or Obtaining Support for a Suspected Security Vulnerability

Individuals or organizations that are experiencing a product security issue are strongly encouraged to contact the Cisco PSIRT. Cisco welcomes reports from independent researchers, industry organizations, vendors, customers, and other sources concerned with product or network security. At minimum, a description of the potential vulnerability is needed to report a security issue.

To contact the Cisco PSIRT, use one of the following methods:

*Primary approach:* The most effective method for reaching the Cisco PSIRT is sending an email to psirt@cisco.com. In the email, provide a detailed problem description and any relevant details and logs.

Alternatively, the Cisco PSIRT may be contacted using the following phone numbers:

* +1 877 228 7302 (toll-free within North America)
* +1 408 525 6532 (international direct dial)

These contact numbers route to Cisco global customer support. To facilitate engagement, please explain that this is a product security issue or, alternatively, reference the PSIRT-SVP-001 search code.

Cisco encourages customers to encrypt sensitive information that is sent to Cisco by email. The Cisco PSIRT supports encrypted messages via Pretty Good Privacy (PGP)/GNU Privacy Guard (GPG) encryption software. The Cisco PSIRT public key is available at the following link: <https://cscrdr.cloudapps.cisco.com/cscrdr/security/center/files/Cisco_PSIRT_PGP_Public_Key.asc>.

**Note:** Cisco supports an RFC 9116-compliant security.txt file, located at <https://www.cisco.com/.well-known/security.txt>.

## General Security-Related Queries

For general security concerns about Cisco products and cloud-hosted services, the Cisco Technical Assistance Center (TAC) can provide configuration and technical assistance. The Cisco TAC can also help with nonsensitive security incidents and software upgrades for security bug fixes. To contact the Cisco TAC, use one of the following methods:

|  | **Cisco TAC Support** |
| --- | --- |
| **Phone** | +1 800 553 2447 (toll-free within North America)+1 408 526 7209 (international direct dial) Additional TAC numbers: [Customer Service Contacts](https://www.cisco.com/c/en/us/support/web/tsd-cisco-worldwide-contacts.html) |
| **Web** | <https://mycase.cloudapps.cisco.com/start> |
| **Hours** | 24 hours a day, 7 days a week |

## Receiving Security Vulnerability Information from Cisco

There are several ways to stay connected and receive the latest security vulnerability information from Cisco. Customers should review the following table, and subsequent summaries, to determine the appropriate option for them:

| **Cisco.com** | <https://www.cisco.com/security/> |
| --- | --- |
| **Email** | cust-security-announce@cisco.com |
| **RSS** | <https://sec.cloudapps.cisco.com/security/center/rss.x?i=44> |
| **Cisco PSIRT openVuln API** | [https://developer.cisco.com/site/PSIRT/](https://developer.cisco.com/site/PSIRT) |
| **My Notifications** | <https://www.cisco.com/c/en/us/support/web/tools/cns/notifications.html> |

### **Cisco.com**

The [Cisco Security portal](https://www.cisco.com/security) on Cisco.com provides Cisco security vulnerability documents and Cisco security information, including relevant security products and services.

For direct links to specific security functions, see the [Types of Security Publications](#tosp) section of this
document.

### **Email**

Cisco Security Advisories provide information about Critical-, High-, and Medium-severity security vulnerabilities. They are clear signed with the Cisco PSIRT [PGP public key](https://cscrdr.cloudapps.cisco.com/cscrdr/security/center/files/Cisco_PSIRT_PGP_Public_Key.asc) and distributed to the external cust-security-announce@cisco.com mailing list. The Cisco PSIRT may also send Informational advisories to the cust-security-announce mailing list. Informational advisories are used not as a disclosure mechanism for any Cisco vulnerabilities but for sharing information on security incidents that may impact Cisco products and that may be of interest to Cisco customers.

Emails are sent for the initial release of and major revisions to Cisco Security Advisories. A major revision is defined as a significant change to advisory content that could result in the customer addressing the vulnerability differently. Examples of a major advisory change include, but are not limited to, changes to the affected products list, changes in Security Impact Rating (SIR; see the [Assessing Security Risk—Common Vulnerability Scoring System and the Security Impact Rating](#asr) section of this document), and changes in mitigation and/or fix information. If a document undergoes a minor revision, the update will be posted to Cisco.com without an accompanying email. Customers that require automated alerts for minor revisions should subscribe to the Cisco Security Advisory Really Simple Syndication (RSS) feed or My Notifications. All Security Advisories on Cisco.com are displayed in chronological order, with the most recent advisories and updates appearing at the top of the page.

To subscribe to the cust-security-announce mailing list, email cust-security-announce-join@cisco.com. (The content of the message does not matter.) You will receive confirmation, instructions, and a list policy statement.

Please note that requests must be sent to cust-security-announce-join@cisco.com and not to the cust-security-announce@cisco.com list itself.

To unsubscribe from the cust-security-announce mailing list, email cust-security-announce-leave@cisco.com with the word "unsubscribe" in the subject line. (The content of the message does not matter.) You will receive a confirmation notice, to which you need to reply to be unsubscribed. You will not be unsubscribed unless you reply to the confirmation email.

Please note that requests to subscribe must be sent to cust-security-announce-join@cisco.com, and requests to unsubscribe must be sent to cust-security-announce-leave@cisco.com—not to the cust-security-announce@cisco.com email address itself.

You must send the messages from the account that you want to be subscribed to or unsubscribed from the list.

Customers can also request to be subscribed or unsubscribed to the cust-security-announce mailing list by emailing psirt@cisco.com.

### **RSS Feeds**

Cisco security vulnerability information is also available via RSS feeds from Cisco.com. These feeds are free and do not require an active Cisco.com registration. For information on how to subscribe to the RSS feeds, visit the [Cisco Security RSS Feeds page](https://sec.cloudapps.cisco.com/security/center/rss.x?i=44).

### **Cisco PSIRT openVuln API**

The Cisco PSIRT openVuln application programming interface (API) is a RESTful API that conforms to the [representational state transfer](https://restfulapi.net/) (REST) software architectural style and allows customers to obtain Cisco security vulnerability information in different machine-consumable formats. To learn about accessing and using the API, visit the [PSIRT page](https://developer.cisco.com/site/PSIRT) on the Cisco DevNet website.

### **My Notifications**

The [My Notifications website](https://www.cisco.com/c/en/us/support/web/tools/cns/notifications.html) allows registered Cisco.com users to subscribe to and receive important Cisco product and technology information, including Cisco Security Advisories. This service provides an improved unified subscription experience, allowing users to choose the timing of notifications as well as the notification delivery method (email or RSS feed). The level of access will be determined by the subscriber's relationship with Cisco.

### Creating a Notification

To create a notification, use the following steps:

1. Log in to the [My Notifications website](https://www.cisco.com/c/en/us/support/web/tools/cns/notifications.html) on Cisco.com using a registered Cisco.com account name and password.
2. Click the **Add Notification** button and follow the instructions.

## Public Relations or Press Queries Regarding Cisco Security Vulnerability Information

The following table shows the Cisco press contacts for Cisco security vulnerability information.

|  | **Press Contacts** |
| --- | --- |
| **Michael Ricketts** | Email: micricke@cisco.comPhone: +1 919 392 2756 |
| **Additional Public Relations** | media\_pr@cisco.com |

## Commitment to Product Security and Integrity at Cisco

Cisco product development practices specifically prohibit any intentional behaviors or product features that are designed to allow unauthorized device or network access, exposure of sensitive device information, or a bypass of security features or restrictions. These include, but are not limited to:

* Undisclosed device access methods or "back doors"
* Hardcoded or undocumented account credentials
* Covert communication channels
* Undocumented traffic diversion

Cisco considers such product behaviors to be serious vulnerabilities. Cisco will address any issues of this nature with the highest priority and encourages all parties to report suspected vulnerabilities to the Cisco PSIRT for immediate investigation. Internal and external reports of these vulnerabilities will be managed and disclosed in accordance with the terms of the Cisco Security Vulnerability Policy.

More information can be found on the [Cisco Secure Development Lifecycle (CSDL) website](https://www.cisco.com/c/en/us/about/trust-center/technology-built-in-security.html#~stickynav=2).

## Cisco Product Security Incident Response Process

Figure 1 illustrates the vulnerability life cycle and the Cisco PSIRT disclosure and resolution process at a high level.

**Figure 1.** Cisco Product Security Incident Response Process

![response process cycle from awareness to feedback](https://cscrdr.cloudapps.cisco.com/cscrdr/security/center/public/files/images/white_papers/psirtprocess.jpg "Cisco Product Security Incident Response Process")

The steps in the process illustrated in Figure 1 are as follows:

1. **Awareness:** PSIRT receives notification of a security incident.
2. **Active Management:** PSIRT prioritizes and identifies resources.
3. **Software Fixes:** PSIRT coordinates the fix and impact assessment.
4. **Customer Notification:** PSIRT notifies all customers simultaneously.

The Cisco PSIRT investigates all reports regardless of the Cisco software code version or product life cycle status until the product reaches the [Last Day of Support](https://www.cisco.com/c/en/us/products/eos-eol-policy.html) (LDoS). Issues will be prioritized based on the potential severity of the vulnerability and other environmental factors. Ultimately, the resolution of a reported incident may require upgrades to products and cloud-hosted services that are under active support from Cisco. As a best practice, Cisco strongly recommends that customers periodically verify that their products are under active support for access to the latest software updates and other benefits.

Throughout the investigative process, the Cisco PSIRT strives to work collaboratively with the source of the report (incident reporter) to confirm the nature of the vulnerability, gather required technical information, and ascertain appropriate remedial action. When the initial investigation is complete, results will be delivered to the incident reporter along with a plan for resolution and public disclosure. If the incident reporter disagrees with the conclusion, the Cisco PSIRT will make every effort to address those concerns.

In the case of incidents about which an agreement cannot be reached through the normal process, incident reporters may escalate by contacting the [Cisco TAC](#gsrq) and requesting the director of the global Cisco PSIRT team.

During any investigation, the Cisco PSIRT manages all sensitive information on a highly confidential basis. Internal distribution is limited to those individuals who have a legitimate need to know and can actively assist in the resolution. Similarly, the Cisco PSIRT asks incident reporters to maintain strict confidentiality until complete resolutions are available for customers and have been published by the Cisco PSIRT on the Cisco website through the appropriate coordinated disclosure.

With the agreement of the incident reporter, the Cisco PSIRT may acknowledge the reporter's contribution during the public disclosure of the vulnerability.

The Cisco PSIRT works with third-party coordination centers such as the [Computer Emergency Response Team Coordination Center](https://www.kb.cert.org/vuls/) (CERT/CC), [Computer Emergency Response Team of Finland](https://www.kyberturvallisuuskeskus.fi/en/) (CERT-FI), [Japan Computer Emergency Response Team](https://www.jpcert.or.jp/english/) (JP-CERT), and [National Protective Security Authority](https://www.npsa.gov.uk) (NPSA) to manage a coordinated industry disclosure for vulnerabilities reported to Cisco that may impact multiple vendors (for example, a generic protocol issue). In these situations, the Cisco PSIRT will either assist the incident reporter with contacting the coordination center or do so on the incident reporters behalf.

If a reported vulnerability involves a vendor product, the Cisco PSIRT will notify the vendor directly, coordinate with the incident reporter, or engage a third-party coordination center.

The Cisco PSIRT will coordinate with the incident reporter to determine the frequency of status updates on the incident and documentation updates.

In the event that Cisco becomes aware of a vulnerability that does not affect a Cisco product but does involve another vendor's product, Cisco will follow the Cisco [policy for reporting vulnerabilities to vendors](https://sec.cloudapps.cisco.com/security/center/resources/vendor_vulnerability_policy.html).

## Disclosure of Security Vulnerabilities Discovered as Part of Cisco Services Delivery

If a new or previously undisclosed security vulnerability is found during a Cisco Services engagement with a customer, Cisco will follow the [Cisco Product Security Incident Response Process](#cpsirp). Vulnerabilities found in Cisco products and cloud-hosted services will be handled by the Cisco PSIRT according to the [Cisco Security Vulnerability Policy](https://sec.cloudapps.cisco.com/security/center/resources/security_vulnerability_policy.html). If the vulnerability is in another vendors product, Cisco will follow the [Cisco Vendor Vulnerability Reporting and Disclosure Policy](https://sec.cloudapps.cisco.com/security/center/resources/vendor_vulnerability_policy.html) unless the affected customer wishes to report the vulnerability to the vendor directly; in that case, Cisco will facilitate contact between the customer and the vendor, and will notify CERT/CC (or its national equivalent).

Cisco will protect customer-specific data at all times throughout this process. Specifically, Cisco will not share any customer-specific data unless directed to do so by the affected customer, or as required by a legal investigation.

### **Assessing Security Risk—Common Vulnerability Scoring System and the Security Impact Rating**

Cisco uses [Version 3.1](https://www.first.org/cvss/v3-1/) of the [Common Vulnerability Scoring System](https://www.first.org/cvss/) (CVSS) as part of its standard process of evaluating reported potential vulnerabilities that do not have a CVE in Cisco products and cloud-hosted services. The CVSS model uses three distinct measurements, or scores, that include Base, Temporal, and Environmental calculations. Cisco will provide an evaluation of the Base vulnerability score and, in some instances, the Temporal vulnerability score. End users are encouraged to compute the Environmental score based on their network parameters. The combination of all three scores should be considered the final score, which represents a moment in time and is tailored to a specific environment. Organizations are advised to use this final score to prioritize responses in their own environments.

**Note:** Cisco began transitioning to CVSS Version 3.1 (CVSSv3.1) in May 2020.

In addition to CVSS scores, Cisco uses the Security Impact Rating (SIR) as a way to categorize vulnerability severity in a simpler manner. The SIR is based on the CVSS Qualitative Severity Rating Scale of the Base score, may be adjusted by PSIRT to account for Cisco-specific variables, and is included in every Cisco Security Advisory. Cisco uses the following guidelines to determine the Cisco Security Advisory type for vulnerabilities in Cisco-authored, customer-managed software. Security Advisories for Critical, High, and Medium SIRs include fixed software information.

| **Publication** | **Type** | **CVSS** | **CVE** | **Fix Information** | **Machine-Readable Format** |
| --- | --- | --- | --- | --- | --- |
| Cisco Security Advisory | Critical | 9.0–10.0 | Yes | Fix information in the Security Advisory and bug. Detailed fix information for Cisco IOS, IOS XE, NX-OS, Adaptive Security Appliance (ASA), Firepower Threat Defense (FTD), and Firepower Management Center (FMC) Software can be obtained using the Cisco Software Checker. | [RSS, CSAF](https://sec.cloudapps.cisco.com/security/center/rss.x?i=44) |
| High | 7.0–8.9 | Yes | Fix information in the Security Advisory and bug. Detailed fix information for Cisco IOS, IOS XE, NX-OS, ASA, FTD, and FMC Software can be obtained using the Cisco Software Checker. | [RSS, CSAF](https://sec.cloudapps.cisco.com/security/center/rss.x?i=44) |
| Medium | 4.0–6.9 | Yes | Fix information in the Security Advisory and bug. Detailed fix information for Cisco IOS, IOS XE, NX-OS, ASA, FTD, and FMC Software can be obtained using the Cisco Software Checker. | [RSS, CSAF](https://sec.cloudapps.cisco.com/security/center/rss.x?i=44) |
| Informational | N/A | No | Fix information in bug (if applicable). | [RSS](https://sec.cloudapps.cisco.com/security/center/rss.x?i=44) |

Issues with a Low SIR are typically published as a bug Release Note Enclosure (RNE) and not as a Security Advisory.

Cisco reserves the right to deviate from these guidelines in specific cases if additional factors are not properly captured in the CVSS score.

If there is a security issue with a third-party software component that is used in a Cisco product, Cisco typically uses the CVSS score provided by the third party. In some cases, Cisco may adjust the CVSS score to reflect the impact to the Cisco product.

**Note:** Cisco is a [Common Vulnerabilities and Exposures](https://cve.mitre.org/index.html) (CVE) Numbering Authority and will assign CVE IDs to Cisco software vulnerabilities from the MITRE block of IDs assigned to the company for this purpose. Cisco does not assign CVE IDs for reported vulnerabilities until the vulnerabilities have been confirmed by Cisco. After vulnerabilities are published, Cisco provides CVE details to MITRE for inclusion in its database.

For more information about CVSS, visit [FIRST.org](https://www.first.org/cvss/).
### **Cisco Cloud-Hosted Services**

Cisco offers multiple cloud-hosted services that are used by customers but are maintained, patched, and monitored by Cisco.

The Cisco PSIRT responds to vulnerabilities in Cisco cloud-hosted services and works closely with the teams that operate them. These teams ensure that security vulnerabilities are fixed and patches are deployed to all customer instances in a timely manner.

Typically, service-related security events are communicated to customers by the service teams through direct notification or through the service dashboard or portal. In some instances, Cisco may disclose vulnerabilities through Security Advisories for Cisco cloud-hosted services in coordination with the service teams.

In most cases, no user action is required because Cisco regularly patches cloud-hosted services.

### **Third-Party Software Vulnerabilities**

If there is a vulnerability in a third-party software component that is used in a Cisco product, Cisco typically uses the CVSS score provided by the component creator. Cisco may adjust the CVSS score to reflect the impact to Cisco products.

Cisco will consider a third-party vulnerability “high profile” if it meets the following criteria:

* The vulnerability exists in a third-party component.
* Multiple Cisco products and/or cloud-hosted services are affected.
* The CVSS score is 5.0 or above.
* The vulnerability has gathered significant public attention.
* The vulnerability is likely to have exploits available and is expected to be, or is being, actively exploited.

For high profile, third-party vulnerabilities, Cisco will begin assessing all potentially impacted products and cloud-hosted services that have not reached the LDoS and publish a Security Advisory within 24 hours after Cisco classifies the vulnerability as high profile. All known affected Cisco products and cloud-hosted services will be detailed in an update to the initial Security Advisory that will be published within 7 days of the initial disclosure. A Cisco bug will be created for each vulnerable product so that registered customers can view them using the Cisco Bug Search Toolkit. Third-party vulnerabilities that are not classified as high profile will be disclosed in a Release Note Enclosure.

### **Cisco Vulnerability Repository**

The [Cisco Vulnerability Repository](https://sec.cloudapps.cisco.com/security/center/cvr) (CVR) is a vulnerability search engine for CVEs reported after 2017 that may impact Cisco products. CVR can help customers understand if their Cisco product is affected by a particular third-party software vulnerability. This tool also displays any Cisco Security Advisories associated with a CVE. At this time, CVR does not include Cisco cloud offers. For help with a product not listed in this tool, please use the Feedback link on the [CVR page](https://sec.cloudapps.cisco.com/security/center/cvr) or contact your support organization.

### **Vulnerability Exploitability eXchange**

Customers may request a Vulnerability Exploitability eXchange (VEX) document for any CVE in CVR.

### **Types of Security Publications**

In all security publications, Cisco discloses the information required for an end user to assess the impact of a vulnerability and any potential steps needed to protect their environment. Cisco does not provide vulnerability details that could enable someone to craft an exploit. Cisco Security Advisories are point-in-time documents. Information should only be considered up to date as of the time and date of the last publication update as indicated by the "Last Updated" field in the advisory header.

Cisco provides the following types of security-related publications via the [Cisco Security portal](https://www.cisco.com/security) on Cisco.com.

### Cisco Security Advisories

[Cisco Security Advisories](https://sec.cloudapps.cisco.com/security/center/publicationListing.x) provide detailed information about security issues that directly involve Cisco products and cloud-hosted services and require an upgrade, fix, or other customer action. Security Advisories are used to disclose vulnerabilities in Cisco-authored software or in high-profile third-party software with a Critical, High, or Medium SIR. The Cisco PSIRT only validates the affected and fixed version information documented in the advisory.

All Cisco Security Advisories that disclose vulnerabilities with a Critical, High, or Medium SIR include an option to download [Common Security Advisory Framework (CSAF)](https://csaf.io/) content. CSAF is an industry standard designed to depict vulnerability information in machine-readable format. This machine-readable content can be used with other tools to automate the process of interpreting data contained in a Security Advisory. CSAF content can be downloaded directly from each Security Advisory. For more information about CSAF, see the preceding link.

The Informational type of Cisco Security Advisories addresses issues that require a response to information discussed in a public forum, such as a blog or discussion list. Informational advisories are normally published if a third party makes a public statement about a Cisco product vulnerability. Informational advisories may also be used to proactively notify customers about a security-related issue that is not a vulnerability.

### Cisco Event Responses

Cisco [Event Responses](https://sec.cloudapps.cisco.com/security/center/erp.x?i=52) provide information about security events that have the potential for widespread impact on customer networks, applications, and devices. Cisco Event Responses contain summary information, threat analysis, and mitigation techniques that feature Cisco products and cloud-hosted services. They are normally published under the following circumstances:

* If a significant security vulnerability exists in a vendor's product that could affect a Cisco product due to interoperation with the vendor's product or use of the network as a vector for exploitation
* In response to the release of Cisco IOS and IOS XE, Cisco IOS XR, Cisco NX-OS, and Cisco ASA, FTD, and FMC Software bundled publications

### Release Note Enclosures

Release Note Enclosures are used to disclose issues with a Low SIR and most third-party software vulnerabilities. All Cisco bug IDs that are disclosed by Cisco are available for registered customers to view in the [Cisco Bug Search Tool](https://tools.cisco.com/bugsearch/).

If a Cisco Security Advisory references a bug, the bug entry in the Cisco Bug Search Tool will link to the relevant Cisco Security Advisory.

Any Cisco bug that has been evaluated by the Cisco PSIRT includes a "PSIRT Evaluation" section in its Release Note Enclosure. This section includes, where Cisco deems appropriate and relevant, Base and Temporal CVSS scores and a CVE ID. Customers are invited to use this additional information at their discretion and correlate Cisco bugs with industry events. This information is not intended to supplement any standard Cisco warranties applicable to the software as stated in the [Cisco End User License Agreement](https://www.cisco.com/c/en/us/about/legal/cloud-and-software/end_user_license_agreement.html).

Free software updates will not be provided for issues that are disclosed through a Release Note Enclosure. Customers who wish to upgrade to a software version that includes fixes for those issues should contact their normal support channels. Any exception to this policy will be determined solely at the discretion of Cisco.

The following table summarizes the methods used to notify customers about the aforementioned security publications. Exceptions may be made on a case-by-case basis to increase communication for a given document.

| **Publication** | **Email** | **Security Portal** | **RSS** | **CNS** | **openVuln API** | **Bug Search Tool** |
| --- | --- | --- | --- | --- | --- | --- |
| **Cisco Security Advisory—Critical and High Severity** | Yes | Yes | Yes | Yes | Yes | Yes |
| **Cisco Security Advisory—Medium Severity** | Yes | Yes | Yes | Yes | Yes | Yes |
| **Cisco Security Advisory—Informational** | Yes | Yes | Yes | No | No | Yes |
| **Cisco Event Response** | No | Yes | Yes | No | No | No |
| **Release Note Enclosure** | No | No | No | No | No | Yes |

### **Communications Plan**

If one or more of the following conditions exist, Cisco will publicly disclose Cisco Security Advisories:

* The Cisco PSIRT has completed the incident response process and determined that enough software patches or workarounds exist to address the vulnerability, or subsequent public disclosure of code fixes is planned to address high-severity vulnerabilities.
* The Cisco PSIRT has observed active exploitation of a vulnerability that could lead to increased risk for Cisco customers. Cisco will accelerate the publication of a security announcement describing the vulnerability that may or may not include a complete set of patches or workarounds.
* There is the potential for increased public awareness of a vulnerability affecting Cisco products and/or cloud-hosted services that could lead to increased risk for Cisco customers. Cisco will accelerate the publication of a security announcement describing the vulnerability that may or may not include a complete set of patches or workarounds.
* The Cisco PSIRT has declared a third-party software vulnerability to be "high profile."

All Cisco security publications are disclosed to customers and the public simultaneously.

When coordinating disclosure with third parties, the Cisco PSIRT will attempt to provide notification of any changes to the Cisco PSIRT public disclosure schedule.

As documented in the [Receiving Security Vulnerability Information from Cisco](#rsvifc) section of this document, Cisco delivers technical security information about software fixes in Cisco products and distributes product updates through several channels. Cisco reserves the right to deviate from this policy on an exception basis to ensure access to Cisco.com for software patch availability.

### **Disclosure Schedule**

In direct response to customer feedback, Cisco releases the following bundles of Cisco Security Advisories at 1600 Greenwich Mean Time (GMT) on a regular schedule twice each year. This schedule applies to the disclosure of vulnerabilities in the following Cisco products and does not apply to the disclosure of vulnerabilities in other Cisco products.

| **Cisco Product(s)** | **Release Schedule** |
| --- | --- |
| Cisco NX-OS Software | Fourth Wednesday of February and August |
| Cisco IOS XR Software | Second Wednesday in March and September |
| Cisco IOS and IOS XE Software | Fourth Wednesday in March and September |

### All Other Products

Cisco generally discloses Cisco Security Advisories at 1600 GMT on any given Wednesday.

### Exceptions

Cisco reserves the right to publish an individual Security Advisory for Cisco IOS and IOS XE Software, Cisco IOS XR Software, or Cisco NX-OS Software or other products outside the published schedule. Conditions under which an out-of-cycle publication may occur include, but are not limited to, the following:

* Cisco detects heightened public awareness of a serious vulnerability.
* Cisco learns of active exploitation of a vulnerability.
* Cisco works with a third-party coordination center to publicly disclose a vulnerability.

### **Incident Response Eligibility**

All customers, regardless of contract status, are eligible to receive support from the Cisco TAC for a known or reasonably suspected security vulnerability in Cisco products and services. For more information about how to contact the Cisco TAC, see the [General Security-Related Queries](https://sec.cloudapps.cisco.com/security/center/resources/security_vulnerability_policy.html#gsrq) section of this document. Customers who contact the Cisco TAC should reference the URL of the Cisco security publication to assist in connecting with the proper support team.

Customers with paid service contracts for incident response and forensic assistance should request assistance through the contact methods specified in their contract.

Cisco, at its sole discretion, may offer customers additional security services free of charge. Cisco reserves the right to determine the type and degree of free assistance it may offer in connection with any incident and to withdraw from such an incident at any time.

### **Security Software Updates**

The Cisco PSIRT will investigate and disclose vulnerabilities in Cisco products and services from the date of First Commercial Shipment (FCS) to the [LDoS](https://www.cisco.com/c/en/us/products/eos-eol-policy.html). Cisco customers with service contracts that entitle them to regular software updates should obtain security fixes through their usual update channels, generally from the Cisco website for the relevant product. Cisco recommends contacting the Cisco TAC only with specific and imminent problems or questions.

As a special customer service, and to improve the overall security of the internet, Cisco may offer customers free software updates to address high-severity security problems. The decision to provide free software updates is made on a case-by-case basis. Refer to the Cisco security publication for details. Free software updates will typically be limited to Critical- and High-severity vulnerabilities.

Fixes for some third-party software vulnerabilities may be available only in the most recent major software releases and not backported to older releases.

If Cisco has offered a free software update to address a specific issue, noncontract customers who are eligible for the update may obtain it by contacting the Cisco TAC using any of the methods described in the [General Security-Related Queries](#gsrq) section of this document.

**Note:** To verify their entitlement, individuals who contact the Cisco TAC should have available the URL of the Cisco document that is offering the update.

Customers may only download, install, and expect support for software releases and feature sets for which they have purchased a valid license that is current and active. By installing, downloading, accessing, or otherwise using such software updates, customers agree to follow the terms of the [Cisco software license agreement](https://www.cisco.com/c/en/us/about/legal/cloud-and-software/end_user_license_agreement.html). In most cases, the software update will be a maintenance release to software that was previously purchased. Free security software updates do not entitle customers to a new software license, additional software feature sets, or major revision upgrades.

After [End of Sale](https://www.cisco.com/c/en/us/products/eos-eol-policy.html) (EoS), the availability of security fixes for vulnerabilities is defined in the product’s EoS bulletin. (See the [End-of-Life Policy](https://www.cisco.com/c/en/us/products/eos-eol-policy.html) for details.) The EoS bulletin may define the Last Day of Support (**LDoS**) milestone, which identifies the last date that Cisco will investigate and disclose product vulnerabilities.

Once the LDoS has been reached, the Cisco PSIRT will continue to accept vulnerability reports but will not analyze, fix, or disclose potential vulnerabilities. To this end, the Cisco PSIRT will not issue CVEs for issues reported on products that are past the LDoS milestone.

### Security Advisory Terms and Conventions

**Fixed Release Availability:** If a future release date is indicated for software, the date provided represents an estimate based on all information known to Cisco as of the "Last Updated" date at the top of the advisory. Availability dates are subject to change based on a number of factors, including satisfactory testing results and delivery of other priority features and fixes. If no version or date is listed for an affected component (indicated by a blank field and/or an advisory designation of Interim), Cisco is continuing to evaluate the fix and will update the advisory as additional information becomes available. After the advisory is marked Final, customers should refer to the associated Cisco bug(s) for further details.

The designated Security Advisory status indicates the following:

**Interim:** The Cisco investigation is ongoing. Cisco will issue revisions to the advisory when additional information, including fixed software release data, becomes available.

**Final:** Cisco has completed its evaluation of the vulnerability described in the advisory. There will be no further updates unless there is a material change in the nature of the vulnerability.

All aspects of this process are subject to change without notice and on a case-by-case basis. No particular level of response is guaranteed for any specific issue or class of issues.

## Cisco Bug Bounty Programs

For information on Cisco Bug Bounty programs, see [Bug Bounty Programs at Cisco](https://sec.cloudapps.cisco.com/security/center/resources/cisco_bug_bounty_faq.html).

Back to Top

---

Last Updated: 2024 December 23

This document is part of the [Cisco Security](https://www.cisco.com/security) portal. Cisco provides the official information contained on the  [Cisco Security](https://www.cisco.com/security) portal in English only.

This document is provided on an "as is" basis and does not imply any kind of guarantee or warranty, including the warranties of merchantability or fitness for a particular use. Your use of the information in the document or materials linked from the document is at your own risk. Cisco reserves the right to change or update this document without notice at any time.

Internal Reference Policy: Security Vulnerability Policy, EDCS-19443599

Owning Function: Cisco PSIRT

---

© 2024 Cisco and/or its affiliates. All rights reserved. This document is Cisco Public Information.

![](http://www.cisco.com/swa/i/spacer.gif)



=== Content from sec.cloudapps.cisco.com_e94405ae_20250115_132950.html ===


[Home](https://www.cisco.com)  / [Cisco Security](/security/center/home.x) / [Security Advisories](https://sec.cloudapps.cisco.com/security/center/publicationListing.x)

|  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| | Cisco Security AdvisoryCisco Small Business Series Switches Stacked Reload ACL Bypass Vulnerability Medium   Advisory ID:  cisco-sa-sb-bus-acl-bypass-5zn9hNJk  First Published: 2024 January 24 16:00 GMT  Version 1.0:  [Final](https://sec.cloudapps.cisco.com/security/center/resources/security_vulnerability_policy.html#final)   Workarounds:  No workarounds available  Cisco Bug IDs: [CSCwf48882](https://bst.cloudapps.cisco.com/bugsearch/bug/CSCwf48882)  [CSCwh68993](https://bst.cloudapps.cisco.com/bugsearch/bug/CSCwh68993)     CVE-2024-20263     CWE-284       CVSS Score: [Base 5.8](https://sec.cloudapps.cisco.com/security/center/cvssCalculator.x?version=3.1&vector=CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:C/C:N/I:L/A:N)**Click Icon to Copy Verbose Score** CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:C/C:N/I:L/A:N/E:X/RL:X/RC:X       CVE-2024-20263     CWE-284       [Download CSAF](https://sec.cloudapps.cisco.com/security/center/content/CiscoSecurityAdvisory/cisco-sa-sb-bus-acl-bypass-5zn9hNJk/csaf/cisco-sa-sb-bus-acl-bypass-5zn9hNJk.json)   Email      Summary  * A vulnerability with the access control list (ACL) management within a stacked switch configuration of Cisco Business 250 Series Smart Switches and Business 350 Series Managed Switches could allow an unauthenticated, remote attacker to bypass protection offered by a configured ACL on an affected device.  This vulnerability is due to incorrect processing of ACLs on a stacked configuration when either the primary or backup switches experience a full stack reload or power cycle. An attacker could exploit this vulnerability by sending crafted traffic through an affected device. A successful exploit could allow the attacker to bypass configured ACLs, causing traffic to be dropped or forwarded in an unexpected manner. The attacker does not have control over the conditions that result in the device being in the vulnerable state.  **Note:** In the vulnerable state, the ACL would be correctly applied on the primary devices but could be incorrectly applied to the backup devices.  Cisco has released software updates that address this vulnerability. There are no workarounds that address this vulnerability.  This advisory is available at the following link:<https://sec.cloudapps.cisco.com/security/center/content/CiscoSecurityAdvisory/cisco-sa-sb-bus-acl-bypass-5zn9hNJk>  Affected Products  * Vulnerable Products At the time of publication, this vulnerability affected the following Cisco products if they were running a vulnerable release of Cisco Small Business Firmware Software and were in a stacked configuration with ACLs configured:    + 250 Series Smart Switches   + 350 Series Managed Switches   + 350X Series Stackable Managed Switches   + 550X Series Stackable Managed Switches   + Business 250 Series Smart Switches   + Business 350 Series Managed Switches For information on the stackable configuration of Business Switches, see the [Stacking Guidelines for Cisco Business Switches](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt2836-Stacking-Guidelines-for-CBS.html).  For information about which Cisco software releases were vulnerable at the time of publication, see the [Fixed Software](#fs) section of this advisory. See the Details section in the bug ID(s) at the top of this advisory for the most complete and current information. Products Confirmed Not Vulnerable Only products listed in the [Vulnerable Products](#vp) section of this advisory are known to be affected by this vulnerability.  Workarounds  * There are no workarounds that address this vulnerability.  This vulnerability can leave the ACL configuration in an undefined state on the switch. As a mitigation, unbind the ACL from the non-working VLANs and then bind the ACL again. This is not a permanent mitigation. It would need to be reapplied if any switch stack member reloads or is power cycled.  For the specific steps for unbinding and rebinding non-working ACLs, see the [Cisco Business Switches 350 Series CLI Guide](https://www.cisco.com/c/en/us/td/docs/switches/lan/csbms/CBS_250_350/CLI/cbs-350-cli-.pdf) (pages 105 to 107) and the [Cisco Business 350 Series Switches Administration Guide](https://www.cisco.com/c/en/us/td/docs/switches/lan/csbms/CBS_250_350/Administration-Guide/cbs-350.pdf) (pages 325 to 326). Contact the Cisco Technical Assistance Center (TAC) if further guidance is needed.  While this mitigation has been deployed and was proven successful in a test environment, customers should determine the applicability and effectiveness in their own environment and under their own use conditions. Customers should be aware that any workaround or mitigation that is implemented may negatively impact the functionality or performance of their network based on intrinsic customer deployment scenarios and limitations. Customers should not deploy any workarounds or mitigations before first evaluating the applicability to their own environment and any impact to such environment.  Fixed Software  * When [considering software upgrades](https://sec.cloudapps.cisco.com/security/center/resources/security_vulnerability_policy.html#fixes), customers are advised to regularly consult the advisories for Cisco products, which are available from the [Cisco Security Advisories page](https://www.cisco.com/go/psirt), to determine exposure and a complete upgrade solution.  In all cases, customers should ensure that the devices to be upgraded contain sufficient memory and confirm that current hardware and software configurations will continue to be supported properly by the new release. If the information is not clear, customers are advised to contact the Cisco Technical Assistance Center (TAC) or their contracted maintenance providers. Fixed Releases At the time of publication, the release information in the following tables was accurate. See the Details section in the bug ID(s) at the top of this advisory for the most complete and current information.  **Business 250 Series Smart Switches and Business 350 Series Managed Switches**       | Cisco Firmware Release | First Fixed Release |   | --- | --- |   | 3.4 and earlier | 3.4.0.17 |       **250 Series Smart Switches, 350 Series Managed Switches, 350X Series Stackable Managed Switches, and 550X Series Stackable Managed Switches**       | Cisco Firmware Release | First Fixed Release |   | --- | --- |   | 2.5 and earlier | 2.5.9.54 |       To download the firmware from the [Software Center](https://software.cisco.com/download/home) on Cisco.com, click **Browse all** and choose **Switches > LAN Switches - Small Business**.  The Cisco Product Security Incident Response Team (PSIRT) validates only the affected and fixed release information that is documented in this advisory.  Exploitation and Public Announcements  * The Cisco PSIRT is not aware of any public announcements or malicious use of the vulnerability that is described in this advisory.  Source  * This vulnerability was found during the resolution of a Cisco TAC support case.  Cisco Security Vulnerability Policy  * To learn about Cisco security vulnerability disclosure policies and publications, see the [Security Vulnerability Policy](http://www.cisco.com/web/about/security/psirt/security_vulnerability_policy.html). This document also contains instructions for obtaining fixed software and receiving security vulnerability information from Cisco.  Subscribe to Cisco Security Notifications  * [Subscribe](https://www.cisco.com/c/en/us/support/web/tools/cns/notifications.html)  Related to This Advisory    URL  * <https://sec.cloudapps.cisco.com/security/center/content/CiscoSecurityAdvisory/cisco-sa-sb-bus-acl-bypass-5zn9hNJk>  Revision History  * | Version | Description | Section | Status | Date |   | --- | --- | --- | --- | --- |   | 1.0 | Initial public release. | - | Final | 2024-JAN-24 |      Show Less  ---   Legal Disclaimer  * THIS DOCUMENT IS PROVIDED ON AN "AS IS" BASIS AND DOES NOT IMPLY ANY KIND OF GUARANTEE OR WARRANTY, INCLUDING THE WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR USE. YOUR USE OF THE INFORMATION ON THE DOCUMENT OR MATERIALS LINKED FROM THE DOCUMENT IS AT YOUR OWN RISK. CISCO RESERVES THE RIGHT TO CHANGE OR UPDATE THIS DOCUMENT AT ANY TIME.  A standalone copy or paraphrase of the text of this document that omits the distribution URL is an uncontrolled copy and may lack important information or contain factual errors. The information in this document is intended for end users of Cisco products.   Feedback  * Leave additional feedback     Cisco Security Vulnerability Policy  * To learn about Cisco security vulnerability disclosure policies and publications, see the [Security Vulnerability Policy](http://www.cisco.com/web/about/security/psirt/security_vulnerability_policy.html). This document also contains instructions for obtaining fixed software and receiving security vulnerability information from Cisco.  Subscribe to Cisco Security Notifications  * [Subscribe](https://www.cisco.com/c/en/us/support/web/tools/cns/notifications.html)  Related to This Advisory |        | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | |



=== Content from www.cisco.com_8d9d74c9_20250115_132943.html ===


* [Skip to content](#fw-content)
* Skip to search
* [Skip to footer](#fw-footer-v2)

* [Cisco.com Worldwide](https://www.cisco.com/site/us/en/index.html)
* [Products and Services](/c/en/us/products/index.html)
* [Solutions](https://www.cisco.com/site/us/en/solutions/index.html)
* [Support](/c/en/us/support/index.html)
* [Learn](/c/en/us/training-events.html)
* [Explore Cisco](//www.cisco.com/c/en/us/about/sitemap.html)
* [How to Buy](/c/en/us/buy.html)
* [Partners Home](https://www.cisco.com/site/us/en/partners/index.html?dtid=odicdc001129)
* [Partner Program](https://www.cisco.com/site/us/en/partners/cisco-partner-program/index.html?ccid=cc000864&dtid=odiprc001129)
* [Support](https://www.cisco.com/site/us/en/partners/support-help/index.html)
* [Tools](https://www.cisco.com/site/us/en/partners/tools/index.html?dtid=odiprc001129)
* [Find a Cisco Partner](https://locatr.cloudapps.cisco.com/WWChannels/LOCATR/pf/index.jsp#/)
* [Meet our Partners](https://www.cisco.com/site/us/en/partners/connect-with-a-partner/index.html?ccid=cc000864&dtid=odiprc001129)
* [Become a Cisco Partner](https://www.cisco.com/site/us/en/partners/index.html?dtid=odicdc001129)

* [Support](/c/en/us/support/index.html)
* [Product Support](/c/en/us/support/all-products.html)
* [Switches](/c/en/us/support/switches/category.html)
* [Cisco Business 350 Series Managed Switches](/c/en/us/support/switches/business-350-series-managed-switches/series.html)
* [Maintain and Operate TechNotes](/c/en/us/support/switches/business-350-series-managed-switches/tsd-products-support-maintain-and-operate-technotes-list.html)
# Stacking Guidelines for Cisco Business Switches

Save

[Log in](/c/login/index.html?referer=/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt2836-Stacking-Guidelines-for-CBS.html) to Save Content

Translations

Download
Print

### Available Languages

### Download Options

* [ePub](/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt2836-Stacking-Guidelines-for-CBS.epub)
  (2.7 MB)

  View in various apps on iPhone, iPad, Android, Sony Reader, or Windows Phone
* [Mobi (Kindle)](/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt2836-Stacking-Guidelines-for-CBS.mobi)
  (664.5 KB)

  View on Kindle device or Kindle app on multiple devices

Updated:September 2, 2021
Document ID:1628200586467437

Bias-Free Language

### Bias-Free Language

The documentation set for this product strives to use bias-free language. For the purposes of this documentation set, bias-free is defined as language that does not imply discrimination based on age, disability, gender, racial identity, ethnic identity, sexual orientation, socioeconomic status, and intersectionality. Exceptions may be present in the documentation due to language that is hardcoded in the user interfaces of the product software, language used based on RFP documentation, or language that is used by a referenced third-party product. [Learn more](https://www.cisco.com/c/en/us/about/social-justice/inclusive-language-policy.html) about how Cisco is using Inclusive Language.

$pagetitle$

## Objective

The objective of this article is to provide stacking guidelines and information about Cisco Business Switch (CBS) models that support stacking.

### Applicable Devices | Software Version

* CBS350 ([Data Sheet](https://www.cisco.com/c/en/us/products/collateral/switches/business-350-series-managed-switches/datasheet-c78-744156.html)) ([Administration Guide](https://www.cisco.com/c/en/us/td/docs/switches/lan/csbms/CBS_250_350/Administration-Guide/cbs-350/get-to-know-your-switch.html)) | 3.1.1.7 ([Download latest](https://software.cisco.com/download/home/286325769))
* CBS350-2X ([Data Sheet](https://www.cisco.com/c/en/us/products/collateral/switches/business-350-series-managed-switches/datasheet-c78-744156.html)) ([Administration Guide](https://www.cisco.com/c/en/us/td/docs/switches/lan/csbms/CBS_250_350/Administration-Guide/cbs-350/get-to-know-your-switch.html)) | 3.1.1.7 ([Download latest](https://software.cisco.com/download/home/286325769))
* CBS350-4X ([Data Sheet](https://www.cisco.com/c/en/us/products/collateral/switches/business-350-series-managed-switches/datasheet-c78-744156.html)) ([Administration Guide](https://www.cisco.com/c/en/us/td/docs/switches/lan/csbms/CBS_250_350/Administration-Guide/cbs-350/get-to-know-your-switch.html)) | 3.1.1.7 ([Download latest](https://software.cisco.com/download/home/286325769))

### Introduction

A subset of the CBS switch models can be connected to operate as a logical single unit. These configurations are called "stacks” and are useful for quickly increasing the capacity of a network. Stacking multiple switches together provide advanced and powerful technologies to administer and control your central network.

You cannot stack the legacy Sx350 or Sx550 switches (or Enterprise switches) with the new Cisco Business stackable switches. If you are stacking legacy switches, check out [**Feature Support Comparison Between the Cisco Stackable Managed Switches for Hybrid Stacking**](https://www.cisco.com/c/en/us/support/docs/smb/switches/cisco-350x-series-stackable-managed-switches/smb5367-feature-support-comparison-between-the-cisco-stackable-manag.html).

## Table of Contents

* [Which CBS models can be stacked?](#which-cbs-models-can-be-stacked)
* [What are the minimum requirements to support stacking?](#what-are-the-minimum-requirements-to-support-stacking)
* [What is the difference between Native Mode and Hybrid Mode?](#what-is-the-difference-between-native-mode-and-hybrid-mode)
* [What features are impacted in Hybrid Stack Mode?](#what-features-are-impacted-in-hybrid-stack-mode)
* [What combination of switches determine the Stack Mode?](#what-combination-of-switches-determine-the-stack-mode)
* [How is stacking configured?](#how-is-stacking-configured)
* [What if there are connection problems?](#what-if-there-are-connection-problems)

1. [Unit fails to join the stack](#unit-fails-to-join-the-stack-these-are-the-most-common)
2. [A topology error has occurred](#a-topology-error-has-occurred)
3. [Stacking mode interoperability](#stacking-mode-interoperability)

## Which CBS models can be stacked?

You can stack the following CBS models:

* CBS350-24T-4X
* CBS350-24P-4X
* CBS350-24FP-4X
* CBS350-48T-4X
* CBS350-48P-4X
* CBS350-48FP-4X
* CBS350-8MP-2X
* CBS350-24MGP-4X
* CBS350-12NP-4X
* CBS350-24NGP-4X
* CBS350-48NGP-4X
* CBS350-8XT
* CBS350-12XT
* CBS350-24XS
* CBS350-24XT
* CBS350-48XT-4X
* CBS350-12XS
* CBS350-16XTS
* CBS350-24XTS

Other ways to determine if a switch might support stacking include:

* [View model comparison](https://www.cisco.com/c/en/us/products/switches/business-350-series-managed-switches/models-comparison.html) to determine which models support stacking in addition to information regarding specific features and functions in the CBS switch portfolio.
![View model comparison to determine which models support stacking.](/c/dam/en/us/support/docs/smb/switches/Cisco-Business-Switching/images/kmgmt2836-Stacking-Guidelines-for-CBS-image1.png)
## What are the minimum requirements to support stacking?

### You need at least two units to configure a stack

The uplink network ports will be configured for stacking and the proper interconnecting small form-factor pluggable (SFP) cables support the stack channels. A list of supported SFP adapters is available in the CBS datasheets. For more information on SFP modules supported on CBS, refer to the article on [Cisco Business Switches: SFP Modules](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt-1524-SFP-Modules-CBS.html).

### The minimum firmware version should be MRv3.1 (or later)

While MRv3.0 provides stacking capabilities, only MRv3.1 provides the option to create a Hybrid Mode stack which allows the largest interoperability between CBS models. [Click if you need guidance performing a firmware upgrade.](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt-2524-2545-upgrade-firmware-cbs.html)

All units in a stack must run the same firmware version for proper operation.

## What is the difference between Native Mode and Hybrid Mode?

### Native Mode stacking

+ Requires that all models in the stack be compatible based on its internal hardware.
+ If your backbone is a heavy bandwidth, multi-protocol, and high-density environment, Native Mode will provide the best optimized configuration for internal resource allocation needed for satisfying high-demand network services.

### Hybrid Mode stacking

+ Allows the largest amount of interoperability between all the CBS stack models.
+ If your environment is a lightly loaded network backbone, Hybrid Mode may be a perfectly acceptable solution for best flexibility and physical changes to the stack.
+ Hybrid Mode forces internal resources to be allocated using the least common denominator. For example, if one model has a MAC table size of 16K and you have another, higher-performance model with a MAC table size of 64K, a stack using Hybrid Stack Mode will force the operating stack to 16K, thus limiting the availability of additional internal hardware resources.

## What features are impacted in Hybrid Stack Mode?

The following table lists the features impacted in Hybrid Mode and the differences between two CBS350 sub-types.

| Feature | CBS350 “10G uplink port SKUs” | CBS350 “10G network port SKUs” | Hybrid stack |
| --- | --- | --- | --- |
| MAC table size | 16K | 32K or 64K | 16K |
| Number of Multicast groups | 2K | 4K | 2K |
| Number of ACEs supported | 1K- reserved | 2K- reserved | 1K- reserved |
| Total number of IP entries | 992 | 7392 | 992 |
| ARP table size | 1K – reserved | 8K – reserved | 1K – reserved |
| Max number of IPv6 interfaces | 106 | 200 | 106 |
| Max MAC table aging | 400 seconds | 630 seconds | 400 seconds |
| IPv6 Manual Tunnel/ 6tp4 tunnel/ ISATAP routing tunnel | Not supported | Supported | Not supported |
| Default number of VLAN Mapping entries | 0 | 32 | 0 |

## What combination of switches determine the Stack Mode?

Trying to determine which switches to purchase for the mode you want to use?

Have you already purchased your switches and need to know which mode to select?

Use this stacking picker to easily determine the stacking operating modes.

CBS350 Stacking Mode Picker

I want to stack

2
3
4

switches

Clear devices

### S

#### Select devices to determine stacking mode

### H

#### Hybrid Mode

### N

#### Native Mode

 Device 1
+
Device 2
+
Device 3
+
Device 4

---

+ CBS350-24T-4X
+ CBS350-24P-4X
+ CBS350-24FP-4X
+ CBS350-48T-4X
+ CBS350-48P-4X
+ CBS350-48FP-4X
+ CBS350-8MP-2X
+ CBS350-24MGP-4X
+ CBS350-12NP-4X
+ CBS350-24NGP-4X
+ CBS350-48NGP-4X
+ CBS350-8XT
+ CBS350-12XT
+ CBS350-24XS
+ CBS350-24XT
+ CBS350-48XT-4X
+ CBS350-12XS
+ CBS350-16XTS
+ CBS350-24XTS
## How is stacking configured?

Stacking is relatively easy to configure. To configure stacking on a CBS350 switch, refer to the following articles:

+ [Configure Stack Settings on a Cisco Business 350 Series Switch](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt-2899-configure-stack-settings-cbs-350.html)
+ [Configure Stack Settings on a Cisco Business 350 Series Switch through the Command Line Interface (CLI)](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt2544-configure-stack-settings-on-a-switch-through-the-command-lin-cbs.html)

## What if there are connection problems?

Configuring a stack on Cisco Business switches is straightforward, but care must be taken to validate all end-to-end connections for successful deployment. If you encounter problems, check the following scenarios for resolution.

### Unit fails to join the stack (These are the most common)

+ All ports in default mode are uplink network ports.
+ Verify all ports used to interconnect the stack to the failed unit are configured for the stack.
+ Verify all ports used to interconnect the stack on the failed unit are configured for the stack.
+ Swap out the stack cable to check for a fault in the cable.

Verify the stack-connecting ports and interconnecting cables have the same speed/negotiation capabilities.

+ All CBS stack ports are 10G capable. Therefore, the focus should be on the type of interconnect cable/media used.

### A topology error has occurred

While a chain topology can be created (with certain limits), a ring topology provides resilience in the case of a single unit failure and does not allow the failure to cascade down to the remaining units in the stack.

1. Potential faults in a ring topology include a failure to create a true single ring topology as intended.

You may have a functional stack, but you may not have the expected resilience if a single unit fails. If you remove a unit from the stack, do you lose contact with two members in the stack? This would indicate an improper single-ring topology. Validate your ring topology to ensure that each segment between stack units is operational.

Log in to the user interface (UI) of the switch. Navigate **to Administration > Stack Management** and check the status of stacking ports.

![Log in to the user interface of the switch. Navigate to Administration > Stack Management and check the status of stacking ports](/c/dam/en/us/support/docs/smb/switches/Cisco-Business-Switching/images/kmgmt2836-Stacking-Guidelines-for-CBS-image2.png)
#### How to validate a single ring topology

+ Verify that any unit in your stack has only two connected neighbors and that each of those neighbors is connected by a single cable. Start with a random unit in your stack and ignore one of the stack cables. Validate that there is only one connection to a new neighbor in the stack.
+ Move down to the neighbor and verify that it connects ONLY to a NEW, unique neighbor.
+ Continue to move down the stack until you reach the original unit you started with (this indicates that the ring has been closed).
+ Any other remaining units that have not been traversed are improperly attached and outside of the ring.
+ If you never reach the original unit where you started to validate the topology, you do not have a ring.

![Graphical user interface Description automatically generated with medium confidence](/c/dam/en/us/support/docs/smb/switches/Cisco-Business-Switching/images/kmgmt2836-Stacking-Guidelines-for-CBS-image3.png)

2. Failure to create a functional dual ring stacking configuration.

A dual ring stacking configuration can be used to double the bandwidth of your network. For example, for a 10Gbps port, dual ring will effectively create a 20Gbps channel between each stack unit.

Some general tips when creating a dual ring stacking configuration:

+ Requires 4x stack ports per switch
+ Create the topology for dual ring by connecting pairs of ports to the next neighbor
+ The use of the correct pair of ports connecting to the next neighbor is important

Choose the left pair OR the right pair to connect to the next neighbor.

![Graphical user interface Description automatically generated](/c/dam/en/us/support/docs/smb/switches/Cisco-Business-Switching/images/kmgmt2836-Stacking-Guidelines-for-CBS-image4.png)

Diagnose the first ring of a dual ring topology.

+ Remove the cables that make up the second ring and check if the stack is functional.
+ Return to the single ring diagnostics before proceeding further.
+ Fix any cable, port configuration related to the primary ring.

Diagnose the secondary ring of a dual ring topology.

+ Reconnect the cables for the second ring.
+ Remove the cables that make up the first ring and check if the stack is functional.
+ Return to the single ring diagnostics before proceeding further.
+ Fix any cable, port configuration related to the secondary ring.

Re-Insert all cables and the dual ring should be fully functional.

### Stacking mode interoperability

If a unit refuses to join the stack even after the topology, cables, and port configuration have been validated, a change in stack mode may be required to overcome the failure.

Stack mode to support interoperability is available on MRv3.1 firmware and above.

Reconfigure ALL the stack ports to use Hybrid Mode instead of Native Mode based on the models listed in this document. Each switch participating in the stack must have its configuration changed (all or nothing). This should resolve any last problems with stack operation.

## Conclusion

Now that you have a better understanding of stacking, expand and manage your network with ease!

Looking for more articles on your CBS350 switch? Check out any of the links below for more information.

[IP Address Settings](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt-2516-configure-ip-address-settings-cli-cbs.html "This article provides instructions on how to configure the IP address settings of your Cisco Business 350 series switch through the Command Line Interface (CLI).")
[Stack Settings](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/2899-2544-stack-settings-cbs-switch.html "
This article provides instructions on how to configure stack settings on your Cisco Business 350 series switch.")
[Stacking Mode Selector](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt-2799-switch-stack-selector-cbs.html "This tool will help you decide if you need to select Native or Hybrid mode for stacking your 10G Cisco Business 350 series switch.")
[SSH User Authentication](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt-2775-configure-secure-shell-ssh-user-authentication-settings-cbs.html "This article provides instructions on how to configure client user authentication on Cisco Business 350 series switches.")
[SSH Server Authentication](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt-2776-configure-secure-shell-ssh-server-authentication-settings-cbs.html "This article provides instructions on how to configure server authentication on a Cisco Business 350 series switch.")
[Password Recovery](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt-2835-administrator-password-recovery-cbs-350.html "The objective of this document is to show you how to recover and configure the administrator password for Cisco Business 350 series switches.")
[Access CLI with PuTTY](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt-2837-access-the-cli-via-putty-using-a-console-connection-on-cbs-350.html "The objective of this document is to show you how to access the Command Line Interface (CLI) of a Cisco Business 350 series switch and a Secure Shell (SSH) client.")
[Create VLANs](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/2526-2527-create-vlan-cbs250--cbs350-switch.html "This article aims to show how to create, edit, or delete a VLAN on a Cisco Business 250 or 350 series switch.")
[Reset Switch](https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt-2542-how-to-manually-reload-or-reset-a-switch-through-the-command-cbs.html "This article provides instructions on how to manually reset a Cisco Business 350 series switch as well as how to reload or reset through the CLI.")

### Revision History

| Revision | Publish Date | Comments |
| --- | --- | --- |
| 2.0 | 02-Sep-2021 | Links to additional articles added. |
| 1.0 | 11-Aug-2021 | Initial Release |

### Was this Document Helpful?

Yes
No

![Feedback](//www.cisco.com/c/dam/cdc/i/Feedback_OceanBlue.png "Feedback")Feedback

### Contact Cisco

* [Open a Support Case](https://mycase.cloudapps.cisco.com/start?prodDocUrl=)![login required](/etc/designs/cdc/fw/i/icon_lock_small.png)
* (Requires a [Cisco Service Contract](//www.cisco.com/c/en/us/services/order-services.html))

### This Document Applies to These Products

* [Business 350 Series Managed Switches](/c/en/us/support/switches/business-350-series-managed-switches/series.html)

![](//cisco.112.2o7.net/b/ss/cisco-mobile/5/12345)


=== Content from sec.cloudapps.cisco.com_9f569a5d_20250115_215223.html ===
{
"document": {
"acknowledgments": [
{
"summary": "This vulnerability was found during the resolution of a Cisco TAC support case."
}
],
"category": "csaf\_security\_advisory",
"csaf\_version": "2.0",
"notes": [
{
"category": "summary",
"title": "Summary",
"text": "A vulnerability with the access control list (ACL) management within a stacked switch configuration of Cisco Business 250 Series Smart Switches and Business 350 Series Managed Switches could allow an unauthenticated, remote attacker to bypass protection offered by a configured ACL on an affected device.\r\n\r\nThis vulnerability is due to incorrect processing of ACLs on a stacked configuration when either the primary or backup switches experience a full stack reload or power cycle. An attacker could exploit this vulnerability by sending crafted traffic through an affected device. A successful exploit could allow the attacker to bypass configured ACLs, causing traffic to be dropped or forwarded in an unexpected manner. The attacker does not have control over the conditions that result in the device being in the vulnerable state.\r\n\r\nNote: In the vulnerable state, the ACL would be correctly applied on the primary devices but could be incorrectly applied to the backup devices.\r\n\r\nCisco has released software updates that address this vulnerability. There are no workarounds that address this vulnerability.\r\n\r\n"
},
{
"category": "general",
"title": "Vulnerable Products",
"text": "At the time of publication, this vulnerability affected the following Cisco products if they were running a vulnerable release of Cisco Small Business Firmware Software and were in a stacked configuration with ACLs configured:\r\n\r\n250 Series Smart Switches\r\n350 Series Managed Switches\r\n350X Series Stackable Managed Switches\r\n550X Series Stackable Managed Switches\r\nBusiness 250 Series Smart Switches\r\nBusiness 350 Series Managed Switches\r\n\r\nFor information on the stackable configuration of Business Switches, see the Stacking Guidelines for Cisco Business Switches [\"https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt2836-Stacking-Guidelines-for-CBS.html\"].\r\n\r\nFor information about which Cisco software releases were vulnerable at the time of publication, see the Fixed Software [\"#fs\"] section of this advisory. See the Details section in the bug ID(s) at the top of this advisory for the most complete and current information."
},
{
"category": "general",
"title": "Products Confirmed Not Vulnerable",
"text": "Only products listed in the Vulnerable Products [\"#vp\"] section of this advisory are known to be affected by this vulnerability."
},
{
"category": "general",
"title": "Workarounds",
"text": "There are no workarounds that address this vulnerability.\r\n\r\nThis vulnerability can leave the ACL configuration in an undefined state on the switch. As a mitigation, unbind the ACL from the non-working VLANs and then bind the ACL again. This is not a permanent mitigation. It would need to be reapplied if any switch stack member reloads or is power cycled.\r\n\r\nFor the specific steps for unbinding and rebinding non-working ACLs, see the Cisco Business Switches 350 Series CLI Guide [\"https://www.cisco.com/c/en/us/td/docs/switches/lan/csbms/CBS\_250\_350/CLI/cbs-350-cli-.pdf\"] (pages 105 to 107) and the Cisco Business 350 Series Switches Administration Guide [\"https://www.cisco.com/c/en/us/td/docs/switches/lan/csbms/CBS\_250\_350/Administration-Guide/cbs-350.pdf\"] (pages 325 to 326). Contact the Cisco Technical Assistance Center (TAC) if further guidance is needed.\r\n\r\nWhile this mitigation has been deployed and was proven successful in a test environment, customers should determine the applicability and effectiveness in their own environment and under their own use conditions. Customers should be aware that any workaround or mitigation that is implemented may negatively impact the functionality or performance of their network based on intrinsic customer deployment scenarios and limitations. Customers should not deploy any workarounds or mitigations before first evaluating the applicability to their own environment and any impact to such environment."
},
{
"category": "general",
"title": "Fixed Software",
"text": "When considering software upgrades [\"https://sec.cloudapps.cisco.com/security/center/resources/security\_vulnerability\_policy.html#fixes\"], customers are advised to regularly consult the advisories for Cisco products, which are available from the Cisco Security Advisories page [\"https://www.cisco.com/go/psirt\"], to determine exposure and a complete upgrade solution.\r\n\r\nIn all cases, customers should ensure that the devices to be upgraded contain sufficient memory and confirm that current hardware and software configurations will continue to be supported properly by the new release. If the information is not clear, customers are advised to contact the Cisco Technical Assistance Center (TAC) or their contracted maintenance providers.\r\n Fixed Releases\r\nAt the time of publication, the release information in the following tables was accurate. See the Details section in the bug ID(s) at the top of this advisory for the most complete and current information.\r\n\r\nBusiness 250 Series Smart Switches and Business 350 Series Managed Switches\r\n Cisco Firmware Release First Fixed Release 3.4 and earlier 3.4.0.17\r\n250 Series Smart Switches, 350 Series Managed Switches, 350X Series Stackable Managed Switches, and 550X Series Stackable Managed Switches\r\n Cisco Firmware Release First Fixed Release 2.5 and earlier 2.5.9.54\r\nTo download the firmware from the Software Center [\"https://software.cisco.com/download/home\"] on Cisco.com, click Browse all and choose Switches > LAN Switches - Small Business.\r\n\r\nThe Cisco Product Security Incident Response Team (PSIRT) validates only the affected and fixed release information that is documented in this advisory."
},
{
"category": "general",
"title": "Vulnerability Policy",
"text": "To learn about Cisco security vulnerability disclosure policies and publications, see the Security Vulnerability Policy [\"http://www.cisco.com/web/about/security/psirt/security\_vulnerability\_policy.html\"]. This document also contains instructions for obtaining fixed software and receiving security vulnerability information from Cisco."
},
{
"category": "general",
"title": "Exploitation and Public Announcements",
"text": "The Cisco PSIRT is not aware of any public announcements or malicious use of the vulnerability that is described in this advisory."
},
{
"category": "general",
"title": "Source",
"text": "This vulnerability was found during the resolution of a Cisco TAC support case."
},
{
"category": "legal\_disclaimer",
"title": "Legal Disclaimer",
"text": "THIS DOCUMENT IS PROVIDED ON AN \"AS IS\" BASIS AND DOES NOT IMPLY ANY KIND OF GUARANTEE OR WARRANTY, INCLUDING THE WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR USE. YOUR USE OF THE INFORMATION ON THE DOCUMENT OR MATERIALS LINKED FROM THE DOCUMENT IS AT YOUR OWN RISK. CISCO RESERVES THE RIGHT TO CHANGE OR UPDATE THIS DOCUMENT AT ANY TIME.\r\n\r\nA standalone copy or paraphrase of the text of this document that omits the distribution URL is an uncontrolled copy and may lack important information or contain factual errors. The information in this document is intended for end users of Cisco products."
}
],
"publisher": {
"category": "vendor",
"contact\_details": "psirt@cisco.com",
"issuing\_authority": "Cisco PSIRT",
"name": "Cisco",
"namespace": "https://wwww.cisco.com"
},
"references": [
{
"category": "self",
"summary": "Cisco Small Business Series Switches Stacked Reload ACL Bypass Vulnerability",
"url": "https://sec.cloudapps.cisco.com/security/center/content/CiscoSecurityAdvisory/cisco-sa-sb-bus-acl-bypass-5zn9hNJk"
},
{
"category": "external",
"summary": "Cisco Security Vulnerability Policy",
"url": "https://sec.cloudapps.cisco.com/security/center/resources/security\_vulnerability\_policy.html"
},
{
"category": "external",
"summary": "Stacking Guidelines for Cisco Business Switches",
"url": "https://www.cisco.com/c/en/us/support/docs/smb/switches/Cisco-Business-Switching/kmgmt2836-Stacking-Guidelines-for-CBS.html"
},
{
"category": "external",
"summary": "Cisco Business Switches 350 Series CLI Guide",
"url": "https://www.cisco.com/c/en/us/td/docs/switches/lan/csbms/CBS\_250\_350/CLI/cbs-350-cli-.pdf"
},
{
"category": "external",
"summary": "Cisco Business 350 Series Switches Administration Guide",
"url": "https://www.cisco.com/c/en/us/td/docs/switches/lan/csbms/CBS\_250\_350/Administration-Guide/cbs-350.pdf"
},
{
"category": "external",
"summary": "considering software upgrades",
"url": "https://sec.cloudapps.cisco.com/security/center/resources/security\_vulnerability\_policy.html#fixes"
},
{
"category": "external",
"summary": "Cisco Security Advisories page",
"url": "https://www.cisco.com/go/psirt"
},
{
"category": "external",
"summary": "Software Center",
"url": "https://software.cisco.com/download/home"
},
{
"category": "external",
"summary": "Security Vulnerability Policy",
"url": "http://www.cisco.com/web/about/security/psirt/security\_vulnerability\_policy.html"
}
],
"title": "Cisco Small Business Series Switches Stacked Reload ACL Bypass Vulnerability",
"tracking": {
"current\_release\_date": "2024-01-24T16:00:00+00:00",
"generator": {
"date": "2024-05-10T23:28:53+00:00",
"engine": {
"name": "TVCE"
}
},
"id": "cisco-sa-sb-bus-acl-bypass-5zn9hNJk",
"initial\_release\_date": "2024-01-24T16:00:00+00:00",
"revision\_history": [
{
"date": "2024-01-24T15:52:23+00:00",
"number": "1.0.0",
"summary": "Initial public release."
}
],
"status": "final",
"version": "1.0.0"
}
},
"product\_tree": {
"branches": [
{
"name": "Cisco",
"category": "vendor",
"branches": [
{
"name": "Cisco Small Business Smart and Managed Switches",
"category": "product\_family",
"product": {
"name": "Cisco Small Business Smart and Managed Switches ",
"product\_id": "CSAFPID-278027"
}
}
]
}
]
},
"vulnerabilities": [
{
"cve": "CVE-2024-20263",
"ids": [
{
"system\_name": "Cisco Bug ID",
"text": "CSCwf48882"
},
{
"system\_name": "Cisco Bug ID",
"text": "CSCwh68993"
}
],
"notes": [
{
"category": "other",
"title": "Affected Product Comprehensiveness",
"text": "Complete."
}
],
"product\_status": {
"known\_affected": [
"CSAFPID-278027"
]
},
"release\_date": "2024-01-24T16:00:00+00:00",
"remediations": [
{
"category": "vendor\_fix",
"details": "Cisco has released software updates that address this vulnerability.",
"product\_ids": [
"CSAFPID-278027"
],
"url": "https://software.cisco.com"
}
],
"scores": [
{
"cvss\_v3": {
"baseScore": 5.8,
"baseSeverity": "MEDIUM",
"vectorString": "CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:C/C:N/I:L/A:N",
"version": "3.1"
},
"products": [
"CSAFPID-278027"
]
}
],
"title": "Cisco Small Business Series Switches Stacked Reload ACL Bypass Vulnerability"
}
]
}

=== Content from www.cisco.com_c3f1a151_20250115_132943.html ===
Cisco Business Switches 350 Series CLI Guide

First Published: 2021-07-12

Last Modified: 2024-08-29

Americas Headquarters
Cisco Systems, Inc.
170 West Tasman Drive
San Jose, CA 95134-1706
USA
http://www.cisco.com
Tel: 408 526-4000

800 553-NETS (6387)

Fax: 408 527-0883

© 2024 Cisco Systems, Inc. All rights reserved.

Introduction

This chapter contains the following sections:

• Product Notes, on page 2
• Overview, on page 3
• User Privilege Levels, on page 4
• CLI Command Modes, on page 5
• Interfaces for Debug Access, on page 7
• Accessing the CLI, on page 8
• CLI Command Conventions, on page 10
• Editing Features, on page 11
• Interface Naming Conventions, on page 13
• IPv6z Address Conventions, on page 15
• Loopback Interface, on page 16
• Managing Ports Via CLI, on page 18
• Remote IP Address and OOB Port, on page 19
• PHY Diagnostics, on page 20
• CLI Output Modifiers, on page 21

Cisco Business Switches 350 Series CLI Guide

1

Product Notes

Product Notes

Introduction

This CLI guide provides CLI commands and guidelines for the CBS 350 Stacking and Non-Stacking switches.
These product line supports 2 "sub-types" - the devices in the first sub-type support 10GigabitEthernet on all
ports, the devices of the 2nd subtype support 10GigabitEthernet only on the uplink ports. Besides a few CLI
commands, which will be mentioned below, the CLI commands included in this document can be applied to
both "subtypes". Following are the notes and differences in CLI command support in regards to these product
lines:

• Ports types—

• The "all 10G" port subtype support ports with TengigabitEthernet (XG) speed.

• The "10G uplink" port subtype can support different network ports type of: Gigabitethernet (GE),
2.5 Gigabit Ethernet (TW) and 5 Gigabit Ethernet (FI); In addition these devices support 4 XG
uplink ports.

CLI examples in this document use the GE port type in examples, but the same commands can be applied
to TW, FI or XG port types, unless there is a difference in feature implementation between port types.

• Speed and negotiation settings—Each port type supports the negotiation and speed setting relevant to
the port type. For example a GE interface does not support speed or negotiation of 10G interface.

• OOB interface—The "all 10G" port subtype supports an OOB interface, while the "10G uplink port
subtype does not. Therefore, OOB as a configurable interface is relevant only to the "all 10G" port
subtype. For devices that support OOB – DHCP client and default IP address (192.168.1.254) are applied
to the OOB port and not to the default VLAN.

• Power Over Ethernet—PoE is supported on some of the "10G uplink" port subtype devices and not on
the "all 10G" port subtype devices. Therefore PoE commands are relevant only to the "10G uplink" port
subtype.

• Stacking—On both subtypes only 10G interfaces can be defined as stacking interfaces. Short reach and
energy detect—Short Reach is always enabled on the "all 10G" port subtype devices and TW and FI
ports (all SKUs); Energy Detect is always enabled on XG ports of the "all 10G" port subtype devices;
For all other interface types- both of these features can be enabled or disabled (default is disabled).

• MAC address aging time—The maximum value for "all 10G" port subtype devices is 630 seconds, while
the maximum value for "10G uplink" port subtype devices and Hybrid mode stack is 400 seconds. The
default value for both subtypes is the same – 300 seconds.

• IPv6 tunnels—IPv6 Manual, 6to4 and ISATAP routing tunnels are supported on the "all 10G" port

subtype devices, and are not supported on "10G uplink" port subtype devices.

• System Router Resources—The default values stated in command are for the "10G uplink" port subtype

devices. The "all 10G" port subtype devices supports the following default values:

• policy-ip-entries—16

• policy-ipv6-entries—16

• VLAN mapping entries —32

Cisco Business Switches 350 Series CLI Guide

2

Introduction

Overview

Overview

The CLI is divided into various command modes. Each mode includes a group of commands.

These modes are described in CLI Command Modes, on page 5.

Users are assigned privilege levels. Each user privilege level can access specific CLI modes.

User levels are described in the section below.

Cisco Business Switches 350 Series CLI Guide

3

User Privilege Levels

Introduction

User Privilege Levels

Users can be created with one of the following user levels:

• Level 1—Users with this level can only run User EXEC mode commands. Users at this level cannot

access the web GUI or commands in the Privileged EXEC mode.

• Level 7—Users with this level can run commands in the User EXEC mode and a subset of commands

in the Privileged EXEC mode. Users at this level cannot access the web GUI.

• Level 15—Users with this level can run all commands. Only users at this level can access the web GUI.

A system administrator (user with level 15) can create passwords that allow a lower level user to temporarily
become a higher level user. For example, the user may go from level 1 to level 7, level 1 to 15, or level 7 to
level 15.

The passwords for each level are set (by an administrator) using the following command:

enable password [level privilege-level]{password|encrypted encrypted-password}

Using these passwords, you can raise your user level by entering the command: enable and the password for
level 7 or 15. You can go from level 1 to level 7 or directly to level 15. The higher level holds only for the
current session.

The disable command returns the user to a lower level.

To create a user and assign it a user level, use the username command. Only users with command level 15,
can create users at this level.

Example—Create passwords for level 7 and 15 (by the administrator):

switchxxxxxx#configure
switchxxxxxx<conf># enable password level 7 level7@aBc
switchxxxxxx<conf># enable password level 15 level15@aBc
switchxxxxxx<conf>#

Create a user with user level 1:

switchxxxxxx#configure
switchxxxxxx<conf> username john password John1234 privilege 1
switchxxxxxx<conf>

Example 2— Switch between Level 1 to Level 15. The user must know the password:

switchxxxxxx#
switchxxxxxx# enable
Enter Password: ****** (this is the password for level 15
- Level15@abc)
switchxxxxxx#

Note

If authentication of passwords is performed on RADIUS or TACACS+ servers, the passwords assigned to
user level 7 and user level 15 must be configured on the external server and associated with the $enable7$
and $enable15$ user names, respectively

Cisco Business Switches 350 Series CLI Guide

4

Introduction

CLI Command Modes

CLI Command Modes

The CLI is divided into four command modes. The command modes are (in the order in which they are
accessed):

• User EXEC mode

• Privileged EXEC mode

• Global Configuration mode

Each command mode has its own unique console prompt and set of CLI commands. Entering a question mark
at the console prompt displays a list of available commands for the current mode and for the level of the user.
Specific commands are used to switch from one mode to another.

Users are assigned privilege levels that determine the modes and commands available to them.

User EXEC Mode

Users with level 1 initially log into User EXEC mode. User EXEC mode is used for tasks that do not change
the configuration, such as performing basic tests and listing system information.

The user-level prompt consists of the switch host name followed by a #. The default host name is switchxxxxxx
where xxxxxx is the last six digits of the device’s MAC address, as shown below

switchxxxxxx#

The default host name can be changed via the hostname command in Global Configuration mode.

Privileged EXEC Mode

A user with level 7 or 15 automatically logs into Privileged EXEC mode.

Users with level 1 can enter Privileged Exec mode by entering the enable command, and when prompted, the
password for level 15.

To return from the Privileged EXEC mode to the User EXEC mode, use the disable command

Global Configuration Mode

The Global Configuration mode is used to run commands that configure features at the system level, as opposed
to the interface level.

Only users with command level of 7 or 15 can access this mode.

To access Global Configuration mode from Privileged EXEC mode, enter the configure command at the
Privileged EXEC mode prompt and press Enter. The Global Configuration mode prompt, consisting of the
device host name followed by (config)#, is displayed:

switchxxxxxx(config)#

Use any of the following commands to return from Global Configuration mode to the Privileged EXEC mode:

• exit

• end

• Ctrl+Z

Cisco Business Switches 350 Series CLI Guide

5

CLI Command Modes

Introduction

The following example shows how to access Global Configuration mode and return to Privileged EXEC
mode:

switchxxxxxx#
switchxxxxxx# configure
switchxxxxxx(config)# exit
switchxxxxxx#

Interface or Line Configuration Modes

Various submodes may be entered from Global Configuration mode. These submodes enable

performing commands on a group of interfaces or lines.

For instance to perform several operations on a specific port or range of ports, you can enter

the Interface Configuration mode for that interface.

The following example enters Interface Configuration mode for vlan1 and then sets their

speed:

The exit command returns to Global Configuration mode.

switchxxxxxx#
switchxxxxxx# configure
switchxxxxxx(config)# interface range vlan1
switchxxxxxx(config-if)#speed 10
switchxxxxxx(config-if)#exit
switchxxxxxx(config)#

The following is a sample of some of the available submodes:

• Interface—Contains commands that configure a specific interface (port, VLAN, port channel, or tunnel)
or range of interfaces. The Global Configuration mode command interface is used to enter the Interface
Configuration mode. The interface Global Configuration command is used to enter this mode.

• Line Interface—Contains commands used to configure the management connections for the console,

Telnet and SSH. These include commands such as line timeout settings, etc. The line Global Configuration
command is used to enter the Line Configuration command mode.

• VLAN Database—Contains commands used to configure a VLAN as a whole. The vlan database Global

Configuration mode command is used to enter the VLAN Database Interface Configuration mode.

• Management Access List—Contains commands used to define management access-lists. The management

access-list Global Configuration mode command is used to enter the Management Access List
Configuration mode.

• MAC Access-List, IPv6 Access List, IP Access List—Configures conditions required to allow traffic

based on MAC addresses, IPv6 address and IPv4 address, respectively. The mac access-list, ipv6 access-list
and ip access-list Global Configuration mode commands are used to enter the these configuration mode.

To return from any Interface Configuration mode to the Global Configuration mode, use the exit command.

Cisco Business Switches 350 Series CLI Guide

6

Introduction

Interfaces for Debug Access

Interfaces for Debug Access

In addition to the standard CLI interface modes detailed above, the device supports additional interfaces for
device debug access. These interlaces are intended to be used by a Cisco Support Team personnel, in cases
where it is required to debug device’s behavior. These interfaces are password protected. The passwords are
held by the Cisco support team.

The device supports the following debug interfaces:

• U-BOOT access during boot sequence (access is possible only via serial console terminal)

• Linux Kernel access during boot sequence (access is possible only via serial console terminal)

• Run time debug modes - allows Cisco Support Team personnel to view device settings, and to apply

protocol and layer 1 debug commands and settings (access is possible via serial, telnet or SSH console
terminal)

Cisco Business Switches 350 Series CLI Guide

7

Accessing the CLI

Introduction

Accessing the CLI

The CLI can be accessed from a terminal or computer by performing one of the following tasks:

• Running a terminal application, such as HyperTerminal, on a computer’s com port that is directly

connected to the switch’s console port, or

• Running a Telnet session from a command prompt on a computer with a network connection to the

switch.

• Using SSH from an application that supports SSH client running on a computer with a network connection

to the switch.

Note

Telnet and SSH are disabled by default on the switch.

If access is via a Telnet or SSH connection, ensure that the following conditions are met before using CLI
commands:

• The switch has a defined IP address

• Corresponding management access is enabled.

• There is an IP path such that the computer and the switch can reach each other

Using HyperTerminal over the Console Interface

Some of the devices in this product line support a single RJ45 console management interface, while other
devices in this product line supports a dual console management interface - mini USB and an RJ45 port. The
RJ45 interface provides a direct connection to a computer’s serial port using a standard DB-9 null-modem or
crossover cable. If Both min USB and RJ45 are connected, on the devices that support dual management
interfaces, the mini USB interface has precedence

Note

Mini USB interface will become active a few seconds after device is turned on/rebooted

After the computer and switch are connected, run a terminal application to access the CLI. The terminal
emulator must be configured to databits=8 and parity=none.

Click Enter twice, so that the device sets the serial port speed to match the PC's serial port speed.

When the CLI appears, enter cisco at the User Name prompt and then enter cisco for the Password prompt.

Note

If this is the first time that you have logged on with the default username and password, the device will display
a prompt to change username and Password. The new password needs to comply to password complexity
rules.

The switchxxxxxx# prompt is displayed. You can now enter CLI commands to manage the switch. For detailed
information on CLI commands, refer to the appropriate chapter(s) of this reference guide.

Cisco Business Switches 350 Series CLI Guide

8

Introduction

Using Telnet over an Ethernet Interface

Using Telnet over an Ethernet Interface

Telnet provides a method of connecting to the CLI over an IP network.

To establish a telnet session from the command prompt, perform the following steps

Step 1

Step 2

Step 3

Step 4

Click Start, then select All Programs > Accessories > Command Prompt to open a command prompt.

At the prompt, enter telnet 1<IP address of switch>, then press Enter.

CLI will be displayed..

When the CLI appears, enter the defined username at the User Name prompt and then enter the defined password at the
Password prompt.

The switchxxxxxx# prompt is displayed. You can now enter CLI commands to manage the switch.

For detailed information on CLI commands, refer to the appropriate chapter(s) of this reference guide.

Cisco Business Switches 350 Series CLI Guide

9

CLI Command Conventions

Introduction

CLI Command Conventions

When entering commands there are certain command entry standards that apply to all commands. The following
table describes the command conventions.

Convention

Description

[ ]

{ }

In a command line, square brackets indicate an optional entry.

In a command line, curly brackets indicate a selection of compulsory parameters
separated the | character. One option must be selected. For example, flowcontrol
{auto|on|off} means that for the flowcontrol command, either auto, on, or off must
be selected

"" (inverted commas)

When the input string contains space and/or reserved words (i.e. VLAN), put the
string in inverted commas.

parameter

press key

Ctrl+F4

Italic text indicates a parameter.

Names of keys to be pressed are shown in bold.

Keys separated by the + character are to be pressed simultaneously on the keyboard

Screen Display

Fixed-width font indicates CLI prompts, CLI commands entered by the user, and
system messages displayed on the console.

all

text

When a parameter is required to define a range of ports or parameters and all is an
option, the default for the command is all when no parameters are defined. For
example, the command interface range port-channel has the option of either entering
a range of channels, or selecting all. When the command is entered without a
parameter, it automatically defaults to all.

When free text can be entered as a parameter for a command (for example in
command: snmp-server contact) if the text consists of multiple words separated by
blanks, the entire string must appear in double quotes. For example: snmp-server
contact "QA on floor 8"

Cisco Business Switches 350 Series CLI Guide

10

Introduction

Editing Features

Editing Features

Entering Commands

A CLI command is a series of keywords and arguments. Keywords identify a command, and arguments specify
configuration parameters. For example, in the command show interfaces status Gigabitethernet 1, show,
interfaces and status are keywords, Gigabitethernet is an argument that specifies the interface type, and1
specifies the port.

To enter commands that require parameters, enter the required parameters after the command keyword. For
example, to set a password for the administrator, enter:

switchxxxxxx(config)# username admin password Alansmith1

When working with the CLI, the command options are not displayed. The standard command to request help
is ?

There are two instances where help information can be displayed:

• Keyword lookup—The character ? is entered in place of a command. A list of all valid commands and

corresponding help messages are is displayed

• Partial keyword lookup—If a command is incomplete and or the character ? is entered in place of a

parameter, the matched keyword or parameters for this command are displayed.

Terminal Command Buffer

Every time a command is entered in the CLI, it is recorded on an internally managed Command History buffer.
Commands stored in the buffer are maintained on a First In First Out (FIFO) basis. These commands can be
recalled, reviewed, modified, and reissued. This buffer is not preserved across device resets.

Keyword

Up-Arrow key

Down-Arrow key

Description

Recalls commands in the history buffer, beginning with the most recent
command. Repeat the key sequence to recall successively older commands.

Returns to more recent commands in the history buffer after recalling
commands with the up-arrow key. Repeating the key sequence will recall
successively more recent commands.

By default, the history buffer system is enabled, but it can be disabled at any time. For more information on
enabling or disabling the history buffer, refer to the history command.

There is a standard default number of commands that are stored in the buffer. The standard number of 10
commands can be increased to 216. By configuring 0, the effect is the same as disabling the history buffer
system. For more information on configuring the command history buffer, refer to the history size command.

To display the history buffer, refer to the show history command.

Negating the Effect of Commands

For many configuration commands, the prefix keyword no can be entered to cancel the effect of a command
or reset the configuration to the default value. This Reference Guide provides a description of the negation
effect for each CLI command.

Cisco Business Switches 350 Series CLI Guide

11

Editing Features

Introduction

Command Completion

If the command entered is incomplete, invalid or has missing or invalid parameters, then the appropriate error
message is displayed. This assists in entering the correct command. By pressing Tab after an incomplete
command is entered, the system will attempt to identify and complete the command. If the characters already
entered are not enough for the system to identify a single matching command, press ? to display the available
commands matching the characters already entered.

Keyboard Shortcuts

The CLI has a range of keyboard shortcuts to assist in editing the CLI commands. The following table describes
the CLI shortcuts.

Keyboard Key

Description

Up-arrow

Down-arrow

Ctrl+A

Ctrl+E

Ctrl+Z / End

Backspace

Recalls commands from the history buffer, beginning with the most recent
command. Repeat the key sequence to recall successively older commands.

Returns the most recent commands from the history buffer after recalling
commands with the up arrow key. Repeating the key sequence will recall
successively more recent commands.

Moves the cursor to the beginning of the command line.

Moves the cursor to the end of the command line.

Returns back to the Privileged EXEC mode from any configuration mode.

Deletes one character left to the cursor position.

Copying and Pasting Text

Up to 1000 lines of text (or commands) can be copied and pasted into the device.

Note

It is the user’s responsibility to ensure that the text copied into the device consists of legal commands only.

When copying and pasting commands from a configuration file, make sure that the following conditions exist:

• A device Configuration mode has been accessed.

The commands contain no encrypted data, like encrypted passwords or keys. Encrypted data cannot be copied
and pasted into the device except for encrypted passwords where the keyword encrypted is used before the
encrypted data (for instance in the enable password command).

Cisco Business Switches 350 Series CLI Guide

12

Introduction

Interface Naming Conventions

Interface Naming Conventions

Interfaces on the device can be one of the following types:

• Gigabit Ethernet (10/100/1000 kbits) ports—These can be written as either GigabitEthernet or gi or GE.

• 2.5 Gigabit Ethernet (10/100/1000/25000 kbits) ports—These can be written as either

TwoPointFiveGigabitEthernet or tw.

• 5 Gigabit Ethernet (10/100/1000/25000/50000 kbits) ports—These can be written as either

FiveGigabitEthernet or fi.

• LAG (Port Channel)—Written as either Port-Channel or po.

• VLAN—Written as VLAN

• Tunnel—Written as tunnel or tu

• OOB—Written as OutOfBand or oob

Within the CLI, interfaces are denoted by concatenating the following elements:

• Type of Interface—As described above

• Unit Number—Unit in stack.

• Slot Number—The slot number is always 0.

• The syntax for interface names in stacking mode is:

{<port-type>[ ][<unit-number>/]<slot-number>/<port-number>} | {port-channel | po |

}[ ]<port-channel-number> |

{tunnel | tu}[ ]<tunnel-number> | vlan[ ]<vlan-id>

• Interface Number—Port, LAG, tunnel or VLAN numbers

Samples of these various options are shown in the example below:

switchxxxxxx(config)#interface GigabitEthernet 1
switchxxxxxx(config)#interface GE 1
switchxxxxxx(config)#interface TwoPointFiveGigabitEthernet
switchxxxxxx(config)#interface po1
switchxxxxxx(config)# interface vlan 1

Interface Range

Interfaces may be described on an individual basis or within a range. The interface range command has the
following syntax:

<interface-range> ::=

{<port-type>[

][<unit-number>/]<slot-number>/<first-port-number>[ -

<last-port-number]} |

port-channel[ ]<first-port-channel-number>[ -

Cisco Business Switches 350 Series CLI Guide

13

Interface Naming Conventions

Introduction

<last-port-channel-number>] |

tunnel[ ]<first-tunnel-number>[ - <last-tunnel-number>] |

vlan[ ]<first-vlan-id>[ - <last-vlan-id>]

A sample of this command is shown in the example below:

switchxxxxxx#configure
switchxxxxxx(config-if)#interface range gi1-5g

List of Multiple Interface Types

A combination of interface types can be specified in the interface range command in the following format:

<range-list> ::= <interface-range> | <range-list>, <interface-range>

Up to five ranges can be included.

Note

Range lists can contain either ports and port-channels or VLANs. Combinations of port/port-channels and
VLANs are not allowed.

The space after the comma is optional.

When a range list is defined, a space after the first entry and before the comma (,) must be entered.

A sample of this command is shown in the example below:

switchxxxxxx#configure
switchxxxxxx(config)#interface range gi1-5, vlan 1-2

Cisco Business Switches 350 Series CLI Guide

14

Introduction

IPv6z Address Conventions

IPv6z Address Conventions

The following describes how to write an IPv6z address, which is a link-local IPv6 address.

The format is: <ipv6-link-local-address>%<egress-interface>

where:

egress-interface (also known as zone) = vlan<vlan-id> | po<number> | tunnel<number> | port<number> | 0

If the egress interface is not specified, the default interface is selected. Specifying egress interface = 0 is equal
to not defining an egress interface.

The following combinations are possible:

• ipv6_address%egress-interface—Refers to the IPv6 address on the interface specified.

• ipv6_address%0—Refers to the IPv6 address on the single interface on which an IPv6 address is defined.

• ipv6_address—Refers to the IPv6 address on the single interface on which an IPv6 address is defined.

Cisco Business Switches 350 Series CLI Guide

15

Loopback Interface

Introduction

Loopback Interface

When an IP application on a router wants to communicate with a remote IP application, it must select the
local IP address to be used as its IP address. It can use any IP address defined on the router, but if this link
goes down, the communication is aborted, even though there might well be another IP route between these
IP applications.

The loopback interface is a virtual interface whose operational state is always up. If the IP address that is
configured on this virtual interface is used as the local address when communicating with remote IP applications,
the communication will not be aborted even if the actual route to the remote application was changed.

The name of the loopback interface is loopback1.

A loopback interface does not support bridging; it cannot be a member of any VLAN, and no layer 2 protocol
can be enabled on it.

Layer 3 Specification

IP Interface

IPv4 and IPv6 addresses can be assigned to a loopback interface.

The IPv6 link-local interface identifier is 1.

Routing Protocols

A routing protocol running on the switch supports the advertising of the IP prefixes defined on the loopback
interfaces via the routing protocol redistribution mechanism.

Configuration Examples

Static Routing

The following example shows you how to configure IP on a switch with static routing:

Switch# configure terminal
Switch(config)# interface vlan 1
Switch(config-if)# ip address 10.10.10.2 /24
Switch(config-if)# ipv6 address 2001:DB8:2222:7270::2312/64
Switch(config-if)# exit
Switch(config)# interface vlan 2
Switch(config-if)# ip address 10.11.11.2 /24
Switch(config-if)# ipv6 address 2001:DB8:3333:7271::2312/64
Switch(config-if)# exit
Switch(config)# interface loopback 1
Switch(config-if)# ip address 172.25.13.2 /32
Switch(config-if)# ipv6 address 2001:DB8:2222:7272::72/128
Switch(config-if)# exit
Switch(config)# ip route 0.0.0.0/0 10.10.11.1
Switch(config)# ip route 10.11.0.0 /16 10.11.11.1
Switch(config)# ipv6 route 0::/0 2001:DB8:2222:7270::1
Switch(config)# ipv6 route 2001:DB8:3333::/48
2001:DB8:3333:7271::1

The neighbor router 10.10.11.1 should be configured with the following static route: ip route 172.25.13.2 /32
10.10.10.2.

The neighbor router 10.11.11.1 should be configured with the following static route: ip route 172.25.13.2 /32
10.11.11.2.

Cisco Business Switches 350 Series CLI Guide

16

Introduction

Loopback Interface

The neighbor router 2001:DB8:2222:7270::1 connected to VLAN 1 should be configured with the following
static route:

ipv6 route 2001:DB8:2222:7272::72/128 2001:DB8:2222:7270::2312

The neighbor router 2001:DB8:3333:7271::1 connected to VLAN 1 should be configured with the static route
defined immediately below.

IPv6 Route 2001:DB8:2222:7272::72/128 2001:DB8:3333:7271::2312

Cisco Business Switches 350 Series CLI Guide

17

Managing Ports Via CLI

Introduction

Managing Ports Via CLI

To access a port interface on units that support stacking, type “interfaceGigabitEthernetX/0/Z (for 1gig
interfaces), or “interface TenGigabitEthernetX/0/Y for 10gig ports with X (1-4) being the stack ID, Y for the
uplink ports number (1-4), and Z for the downlink port number; Z is between 1- 48 even for the units that
have less than 48 ports.

Fiber cable and Transceivers

Cisco brand provides a panoply a SFP modules, while our switches support other 3rd party, it is important to
pay attention on the type of fiber cable to use in conjunction with the specific SFP module.

Fiber cables can be classified in two types: Single Mode and Multimode. The main difference is the distance
they are capable of covering and their diameter. Single Mode fibers cover greater distance compared to
Multimode and has lower diameter (around 9 micrometer) while the Multimode fibers diameter is 50-62.5
micrometer.

DAC cables for Direct Attach Copper Cable, on the other hand, can be used for short distances. They are
mainly based on the Multimode-Standard type of transceivers due to the fact that the max distance they can
cover is 15m. The AOC (Active Optical Cable), however, is a different story.

When troubleshooting fiber connectivity related issues, it is important to make a distinction between SMF
(Single Mode Fiber cables), and MMF (Multimode Fiber cables) and their corresponding SFP transceivers a
given fiber can support.

Cisco has matrix that we can refer to when trying to make a determination of the correct pairing. The following
link provide some insight on Cisco 10gig SFP

Example:

The Cisco SFP-10G-SR only works with MMF type of cable of 62.5 micrometer diameter, while the Cisco
SFP-10G-LR works only with SMF type of cable. The MMF range from OM1-OM5. OM is for Optical
Multimode. OM1 type cables have a diameter of 62.5 micrometer, while all other types (OM2-OM5) have a
diameter of 50 micrometer.

So, it is important to know what is being done to avoid mixing them up.

Cisco Business Switches 350 Series CLI Guide

18

Introduction

Remote IP Address and OOB Port

Remote IP Address and OOB Port

The switch supports an IP stack on the OutOfBand (OOB) port. This IP stack is separate from the IP stack
running on the ASIC ports, and it requires specific route table configuration

If the switch supports more than one IP interface, when you specify a remote IP address or a DNS name, you
must also specify the IP stack that is being referred to.

Cisco Business Switches 350 Series CLI Guide

19

PHY Diagnostics

Introduction

PHY Diagnostics

The following exceptions exist:

• Copper Ports—PHY diagnostics are only supported on copper ports.

• 10G ports—TDR test is supported when the operational port speed is 10G. Cable length resolution is 20

meters.

Cisco Business Switches 350 Series CLI Guide

20

Introduction

CLI Output Modifiers

CLI Output Modifiers

To all show and more commands (except show technical support) an output modifier may be added as
follows:

<show/more command> | <output-modifier> <regular-expression-pattern>

The output modifiers are:

• begin: Start output from the first line that has a sequence of characters matching thegiven regular

expression pattern

• include: Includes only lines that have a sequence of characters matching the given regular expression

pattern.

• exclude: Excludes all lines that have a sequence of characters matching the given regular expression

pattern.

• count: Counts all lines that have a sequence of characters matching the given regular expression pattern

and displays the result (no other output is displayed).

Note

Only 1 output modifier can be used in each command. The remainder of the text typed in is part of the regular
expression pattern.

A regular expression is a pattern (a phrase, number, or more complex pattern). The CLI String Search feature
matches regular expressions to the show or more command output. Regular expressions are case-sensitive
and allow for complex matching requirements.

A regular expression can be a single-character pattern or a multiple-character pattern. That is, a regular
expression can be a single character that matches the same single character in the command output or multiple
characters that match the same multiple characters in the command output. The pattern in the command output
is referred to as a string. This section describes creating both single-character patterns and multiple-character
patterns. It also discusses creating more complex regular expressions, using multipliers, alternation, anchoring,
and parentheses.

Single-Character Patterns

The simplest regular expression is a single character that matches the same single character in the command
output. You can use any letter (A-Z, a-z) or digit (0-9) as a single-character pattern. You can also use other
keyboard characters (such as ! or ~) as single-character patterns, but certain keyboard characters have special
meaning when used in regular expressions. The following table lists the keyboard characters that have special
meanings

Character

Meaning

.

*

+

?

Matches any single character, including white space.

Matches 0 or more sequences of the pattern.

Matches 1 or more sequences of the pattern.

Matches 0 or 1 occurrences of the pattern.

Cisco Business Switches 350 Series CLI Guide

21

CLI Output Modifiers

Introduction

Character

Meaning

^

$

Matches the beginning of the string.

Matches the end of the string.

To use these special characters as single-character patterns, remove the special meaning by preceding each
character with a backslash (\).

The following examples are single-character patterns matching a dollar sign, an underscore, and a plus sign,
respectively.

\$ \_ \+

You can specify a range of single-character patterns to match against command output. For example, you can
create a regular expression that matches a string containing one of the following letters: a, e, i, o, or u. Only
one of these characters must exist in the string for pattern matching to succeed. To specify a range of
single-character patterns, enclose the single-character patterns in square brackets ([ ]). For example, [aeiou]
matches any one of the five vowels of the lowercase alphabet, while [abcdABCD] matches any one of the
first four letters of the lower- or uppercase alphabet.

You can simplify ranges by entering only the endpoints of the range separated by a dash (-).

Simplify the previous range as follows:

[a-dA-D]

To add a dash as a single-character pattern in your range, include another dash and precede it with a backslash:

[a-dA-D\-]

You can also include a right square bracket (]) as a single-character pattern in your range, as shown here:

[a-dA-D\-\]]

The previous example matches any one of the first four letters of the lower- or uppercase alphabet, a dash, or
a right square bracket. You can reverse the matching of the range by including a caret (^) at the start of the
range. The following example matches any letter except the ones listed:

[^a-dqsv]

The following example matches anything except a right square bracket (]) or the letter d:

[^\]d]

Multiple-Character Patterns

When creating regular expressions, you can also specify a pattern containing multiple characters. You create
multiple-character regular expressions by joining letters, digits, or keyboard characters that do not have special
meaning. For example, a4% is a multiple-character regular expression.

With multiple-character patterns, order is important. The regular expression a4% matches the character a
followed by a 4 followed by a % sign. If the string does not have a4%, in that order, pattern matching fails.
The multiple-character regular expression a. uses the special meaning of the period character to match the
letter a followed by any single character. With this example, the strings ab, a!, or a2 are all valid matches for
the regular expression.

You can remove the special meaning of the period character by inserting a backslash before it. For example,
when the expression a\. is used in the command syntax, only the string a. will be matched.

Cisco Business Switches 350 Series CLI Guide

22

Introduction

CLI Output Modifiers

You can create a multiple-character regular expression containing all letters, all digits, all keyboard characters,
or a combination of letters, digits, and other keyboard characters. For example, telebit 3107 v32bis is a valid
regular expression.

Multipliers

You can create more complex regular expressions that instruct the system to match multiple occurrences of
a specified regular expression. To do so, use some special characters with your single-character and
multiple-character patterns. Table 1 lists the special characters that specify multiples of a regular expression.

Table1:Table1:SpecialCharactersUsedasMultipliers

Character

Description

*

+

?

Matches 0 or more single-character or multiple-character patterns.

Matches 1 or more single-character or multiple-character patterns.

Matches 0 or 1 occurrences of a single-character or multiple-character
pattern.

The following example matches any number of occurrences of the letter a, including none:

a*

The following pattern requires that at least one letter a be in the string to be matched:

a+

The following pattern matches the string bb or bab:

ba?b

The following string matches any number of asterisks (*):

\**

To use multipliers with multiple-character patterns, enclose the pattern in parentheses. In the following
example, the pattern matches any number of the multiple-character string ab:

(ab)*

The following pattern matches one or more instances of alphanumeric pairs, but not none (that is, an empty
string is not a match):

([A-Za-z][0-9])+

The order for matches using multipliers (*, +, or ?) is to put the longest construct first. Nested constructs are
matched from outside to inside. Concatenated constructs are matched beginning at the left side of the construct.
Thus, the regular expression above matches A9b3, but not 9Ab3 because the letters are specified before the
numbers.

Alternation

Alternation allows you to specify alternative patterns to match against a string. You separate the alternative
patterns with a vertical bar (|). Only one of the alternatives can match the string. For example, the regular
expression codex|telebit either matches the string codex or the string telebit, but not both codex and telebit.

Cisco Business Switches 350 Series CLI Guide

23

CLI Output Modifiers

Anchoring

Introduction

You can instruct the system to match a regular expression pattern against the beginning or the end of the
string. You anchor these regular expressions to a portion of the string using the special characters shown in
Table 2.

Table2:Table2:SpecialCharactersUsedforAnchoring

Character

Description

^

$

Matches the beginning of the string.

Matches the end of the string.

For example, the regular expression ^con matches any string that starts with con, and $sole matches any string
that ends with sole.

In addition to indicating the beginning of a string, the ^ symbol can be used to indicate the logical function
not when used in a bracketed range. For example, the expression [^abcd] indicates a range that matches any
single letter, as long as it is not the letters a, b, c, or d.

Cisco Business Switches 350 Series CLI Guide

24

802-1x Commands

This chapter contains the following sections:

• aaa authentication dot1x, on page 27
• authentication open, on page 28
• clear dot1x statistics, on page 29
• data , on page 30
• description 802.1x , on page 31
• dot1x auth-not-req, on page 32
• dot1x authentication, on page 33
• dot1x credentials, on page 34
• dot1x eap-max-retrans, on page 35
• dot1x guest-vlan, on page 36
• dot1x guest-vlan enable, on page 37
• dot1x guest-vlan timeout, on page 38
• dot1x host-mode, on page 39
• dot1x max-hosts, on page 41
• dot1x max-login-attempts, on page 42
• dot1x max-req, on page 43
• dot1x page customization, on page 44
• dot1x port-control, on page 45
• dot1x radius-attributes vlan, on page 47
• dot1x re-authenticate, on page 49
• dot1x reauthentication, on page 50
• dot1x supplicant, on page 51
• dot1x supplicant traps authentication failure, on page 52
• dot1x supplicant traps authentication success, on page 53
• dot1x system-auth-control, on page 54
• dot1x timeout eap-timeout, on page 55
• dot1x timeout quiet-period, on page 56
• dot1x timeout reauth-period, on page 57
• dot1x timeout server-timeout, on page 58
• dot1x timeout silence-period, on page 59
• dot1x timeout supp-timeout, on page 60
• dot1x timeout supplicant-held-period, on page 61

Cisco Business Switches 350 Series CLI Guide

25

802-1x Commands

• dot1x timeout tx-period, on page 62
• dot1x traps authentication failure, on page 63
• dot1x traps authentication quiet, on page 64
• dot1x traps authentication success, on page 65
• dot1x unlock client, on page 66
• dot1x violation-mode, on page 67
• password , on page 68
• show dot1x, on page 69
• show dot1x credentials, on page 74
• show dot1x locked clients, on page 75
• show dot1x statistics, on page 76
• show dot1x users, on page 78
• username (dot1x credentials), on page 79

Cisco Business Switches 350 Series CLI Guide

26

802-1x Commands

aaa authentication dot1x

aaa authentication dot1x

To specify which servers are used for authentication when 802.1X authentication is enabled, use the aaa
authentication dot1x command in Global Configuration mode. To restore the default configuration, use the
no form of this command.

Syntax

aaa authentication dot1x default {radius | none | {radius none}}

no aaa authentication dot1x default

Parameters

• radius - Uses the list of all RADIUS servers for authentication

• none - Uses no authentication

Default Configuration

RADIUS server.

Command Mode

Global Configuration mode

User Guidelines

You can select either authentication by a RADIUS server, no authentication (none), or both methods.

If you require that authentication succeeds even if no RADIUS server response was received, specify none
as the final method in the command line.

Example

The following example sets the 802.1X authentication mode to RADIUS server authentication. Even if no
response was received, authentication succeeds.

switchxxxxxx(config)# aaa authentication dot1x default radius none

Cisco Business Switches 350 Series CLI Guide

27

authentication open

802-1x Commands

authentication open

To enable open access (monitoring mode) on this port, use the authentication open command in Interface
Configuration mode. To disable open access on this port, use the no form of this command.

Syntax

authentication open

no authentication open

Parameters

This command has no arguments or keywords.

Default Configuration

Disabled.

Command Mode

Interface (Ethernet, OOB) Configuration mode

User Guidelines

Open Access or Monitoring mode allows clients or devices to gain network access before authentication is
performed. In the mode the switch performs failure replies received from a Radius server as success.

Example

The following example enables open mode on interface gi1/0/1:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# authentication open

Cisco Business Switches 350 Series CLI Guide

28

802-1x Commands

clear dot1x statistics

clear dot1x statistics

To clear 802.1X statistics, use the clear dot1x statistics command in Privileged EXEC mode.

Syntax

clear dot1x statistics [interface-id]

Parameters

• interface-id—Specify an Ethernet port ID.

Default Configuration

Statistics on all ports are cleared.

Command Mode

Privileged EXEC mode

User Guidelines

This command clears all the counters displayed in the show dot1x and show dot1x statistics command.

Example

switchxxxxxx# clear dot1x statistics

Cisco Business Switches 350 Series CLI Guide

29

data

data

802-1x Commands

To specify web-based page customizing, the data command is used in Web-Based Page Customization
Configuration mode.

Syntax

data value

Parameters

• value—String of hexadecimal digit characters up to 320 characters.

Default Configuration

No user customization.

Command Mode

Web-Based Page Customization Configuration mode

User Guidelines

The command should not be entered or edited manually (unless using copy-paste). It is a part of the
configuration file produced by the switch.

A user can only customize the web-based authentication pages by using the WEB interface.

Example 1—The following example shows a partial web-based page customization configuration:

switchxxxxxx(config)# dot1x page customization
switchxxxxxx(config-web-page)# data 1feabcde
switchxxxxxx(config-web-page)# data 17645874
switchxxxxxx(config-web-page)# exit

Example 2—The following example shows how Web-Based Page customization is displayed when
running the show running-config command:

switchxxxxxx# show running-config
dot1x page customization
data ********
exit

Cisco Business Switches 350 Series CLI Guide

30

802-1x Commands

description 802.1x

description 802.1x

To specify a description for an 802.1X credential structure, use the description command in Dot1x credentials
configuration mode. To remove the description, use the no form of this command.

Syntax

description text

no description

Parameters

• text—Text description. The description can be up to 80 characters.

Default Configuration

A description is not specified.

Command Mode

Dot1x credentials configuration mode

User Guidelines

An 802.1X credential structure is necessary when configuring the switch as a supplicant (client). This credentials
structure must contain a username and password and may contain a description.

Example

The following example configures an 802.1X credential structure:

switchxxxxxx(config)# dot1x credentials site-A
switchxxxxxx(config-dot1x-cred)# username inner-switch
switchxxxxxx(config-dot1x-cred)# password 6f3c576n8
switchxxxxxx(config-dot1x-cred)# description This credentials profile should be used to
connected to site-A

Cisco Business Switches 350 Series CLI Guide

31

dot1x auth-not-req

802-1x Commands

dot1x auth-not-req

To enable unauthorized devices access to a VLAN, use the dot1x auth-not-req command in Interface (VLAN)
Configuration mode. To disable access to a VLAN, use the no form of this command.

Syntax

dot1x auth-not-req

no dot1x auth-not-req

Default Configuration

Access is enabled.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

The guest VLAN cannot be configured as unauthorized VLAN.

Example

The following example enables unauthorized devices access to VLAN 5.

switchxxxxxx(config)# interface vlan 5
switchxxxxxx(config-if)# dot1x auth-not-req

Cisco Business Switches 350 Series CLI Guide

32

802-1x Commands

dot1x authentication

dot1x authentication

To enable authentication methods on a port, use the dot1x authentication command in Interface Configuration
mode. To restore the default configuration, use the no form of this command.

Syntax

dot1x authentication [802.1x] [mac] [web]

no dot1x authentication

Parameters

• 802.1x—Enables authentication based on 802.1X (802.1X-based authentication).

• mac—Enables authentication based on the station's MAC address (MAC-Based authentication).

• web—Enables WEB-Based authentication.

Default Configuration

802.1X-Based authentication is enabled.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

Static MAC addresses cannot be authorized by the MAC-based method.

It is not recommended to change a dynamic MAC address to a static one or delete it if the MAC address was
authorized by the MAC-based authentication:

1.

If a dynamic MAC address authenticated by MAC-based authentication is changed to a static one, it will
not be manually re-authenticated.

2. Removing a dynamic MAC address authenticated by the MAC-based authentication causes its

re-authentication.

802.1x enabled on a port associated with a port channel has the following limitations:

• Only the 802.1X-based authentication is supported.

• Only the multi-host (legacy 802.1x mode) mode is supported.

Example

The following example enables authentication based on 802.1x and the station’s MAC address on port gi1/0/1:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x authentication 802.1x mac

Cisco Business Switches 350 Series CLI Guide

33

dot1x credentials

802-1x Commands

dot1x credentials

To define the name of an 802.1X credential structure and enter the Dot1x credentials configuration mode, use
the dot1x credentials command in Global Configuration mode. To remove the credential structure, use the
no form of this command.

Syntax

dot1x credentials name

no dot1x credentials name

Parameters

• name—The credential structure name up to 32 characters.

Default Configuration

A credentials structure is not specified

Command Mode

Global Configuration mode

User Guidelines

Use the dot1x credentials command to start configuration of credential structure. The credential structure
contains the parameters of supplicant (client) and it is used during the 802.1X supplicant enabling on interface.

The credential configuration takes a place only after exit from the credential context.

Changing configuration of used credential causes supplicant logoff and logon.

The switch supports up to 24 credentials.

Use the no dot1x credentials command, to delete a credential. A used credential cannot be deleted.

Example

The following example configures an 802.1X credential structure:

switchxxxxxx(config)# dot1x credentials site-A
switchxxxxxx(config-dot1x-cred)# username inner-switch
switchxxxxxx(config-dot1x-cred)# password agrcx5642
switchxxxxxx(config-dot1x-cred)# description This credentials profile should be used to
connected to site-A

Cisco Business Switches 350 Series CLI Guide

34

802-1x Commands

dot1x eap-max-retrans

dot1x eap-max-retrans

To set the EAP maximum number retransmissions, use the dot1x eap-max-retrans command in Interface
Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

dot1x eap-max-retrans count

no dot1x eap-max-retrans

Parameters

• count—Specifies the maximum number of times that the EAP Server (EAP Authenticator) retransmits

an EAP request when no response from a EAP client (EAP Peer) was received. (Range: 1–10).

Default Configuration

The default maximum number of attempts is 2.

Command Mode

Interface (Ethernet, OOB) Configuration mode

User Guidelines

The default value of this command should be changed only to adjust to unusual circumstances, such as
unreliable links or specific behavioral problems with certain clients and authentication servers.

The parameter is used by the 802.1x Supplicant.

Example

The following example sets the EAP maximum number retransmissions to 6:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x eap-max-retrans 6

Cisco Business Switches 350 Series CLI Guide

35

dot1x guest-vlan

802-1x Commands

dot1x guest-vlan

To define a guest VLAN, use the dot1x guest-vlan mode command in Interface (VLAN) Configuration mode.
To restore the default configuration, use the no form of this command.

Syntax

dot1x guest-vlan

no dot1x guest-vlan

Default Configuration

No VLAN is defined as a guest VLAN.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

A device can have only one global guest VLAN.

The guest VLAN must be a static VLAN and it cannot be removed.

An unauthorized VLAN cannot be configured as guest VLAN.

Example

The following example defines VLAN 2 as a guest VLAN.

switchxxxxxx(config)# interface vlan 2
switchxxxxxx(config-if)# dot1x guest-vlan

Cisco Business Switches 350 Series CLI Guide

36

802-1x Commands

dot1x guest-vlan enable

dot1x guest-vlan enable

To enable unauthorized users on the access interface to the guest VLAN, use the dot1x guest-vlan enable
command in Interface Configuration mode. To disable access, use the no form of this command.

Syntax

dot1x guest-vlan enable

no dot1x guest-vlan enable

Default Configuration

The default configuration is disabled.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

The guest VLAN and the WEB-Based authentication cannot be configured on a port at the same time.

This command cannot be configured if the monitoring VLAN is enabled on the interface.

If the port does not belong to the guest VLAN it is added to the guest VLAN as an egress untagged port.

If the authentication mode is single-host or multi-host, the value of PVID is set to the guest VLAN_ID.

If the authentication mode is multi-sessions mode, the PVID is not changed and all untagged traffic and tagged
traffic not belonging to the unauthenticated VLANs from unauthorized hosts are mapped to the guest VLAN.

If 802.1X is disabled, the port static configuration is reset.

Example

The following example enables unauthorized users on gi1/0/1 to access the guest VLAN.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x guest-vlan enable

Cisco Business Switches 350 Series CLI Guide

37

dot1x guest-vlan timeout

802-1x Commands

dot1x guest-vlan timeout

To set the time delay between enabling 802.1X (or port up) and adding a port to the guest VLAN, use the
dot1x guest-vlan timeout command in Global Configuration mode. To restore the default configuration, use
the no form of this command.

Syntax

dot1x guest-vlan timeout timeout

no dot1x guest-vlan timeout

Parameters

• timeout—Specifies the time delay in seconds between enabling 802.1X (or port up) and adding the port

to the guest VLAN. (Range: 30–180).

Default Configuration

The guest VLAN is applied immediately.

Command Mode

Global Configuration mode

User Guidelines

This command is relevant if the guest VLAN is enabled on the port. Configuring the timeout adds a delay
from enabling 802.1X (or port up) to the time the device adds the port to the guest VLAN.

Example

The following example sets the delay between enabling 802.1X and adding a port to a guest VLAN to 60
seconds.

switchxxxxxx(config)# dot1x guest-vlan timeout 60

Cisco Business Switches 350 Series CLI Guide

38

802-1x Commands

dot1x host-mode

dot1x host-mode

To allow a single host (client) or multiple hosts on an IEEE 802.1X-authorized port, use the dot1x host-mode
command in Interface Configuration mode. To restore the default configuration, use the no form of this
command.

Syntax

dot1x host-mode {multi-host | single-host | multi-sessions}

Parameters

• multi-host—Enable multiple-hosts mode.

• single-host—Enable single-hosts mode.

• multi-sessions—Enable multiple-sessions mode.

Default Configuration

Default mode is multi-host.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

Single-Host Mode

The single-host mode manages the authentication status of the port: the port is authorized if there is an
authorized host. In this mode, only a single host can be authorized on the port.

When a port is unauthorized and the guest VLAN is enabled, untagged traffic is remapped to the guest VLAN.
Tagged traffic is dropped unless the VLAN tag is the guest VLAN or the unauthenticated VLANs. If guest
VLAN is not enabled on the port, only tagged traffic belonging to the unauthenticated VLANs is bridged.

When a port is authorized, untagged and tagged traffic from the authorized host is bridged based on the static
vlan membership configured at the port. Traffic from other hosts is dropped.

A user can specify that untagged traffic from the authorized host will be remapped to a VLAN that is assigned
by a RADIUS server during the authentication process. In this case, tagged traffic is dropped unless the VLAN
tag is the RADIUS-assigned VLAN or the unauthenticated VLANs.

The switch removes from FDB all MAC addresses learned on a port when its authentication status is changed
from authorized to unauthorized.

Multi-Host Mode

The multi-host mode manages the authentication status of the port: the port is authorized after at least one
host is authorized.

When a port is unauthorized and the guest VLAN is enabled, untagged traffic is remapped to the guest VLAN.
Tagged traffic is dropped unless the VLAN tag is the guest VLAN or the unauthenticated VLANs. If guest
VLAN is not enabled on the port, only tagged traffic belonging to the unauthenticated VLANs is bridged.

Cisco Business Switches 350 Series CLI Guide

39

dot1x host-mode

802-1x Commands

When a port is authorized, untagged and tagged traffic from all hosts connected to the port is bridged based
on the static vlan membership configured at the port.

A user can specify that untagged traffic from the authorized port will be remapped to a VLAN that is assigned
by a RADIUS server during the authentication process. In this case, tagged traffic is dropped unless the VLAN
tag is the RADIUS assigned VLAN or the unauthenticated VLANs.

The switch removes from FDB all MAC addresses learned on a port when its authentication status is changed
from authorized to unauthorized.

Multi-Sessions Mode

Unlike the single-host and multi-host modes (port-based modes) the multi-sessions mode manages the
authentication status for each host connected to the port (session-based mode). If the multi-sessions mode is
configured on a port the port does have any authentication status. Any number of hosts can be authorized on
the port. The dot1x max-hosts command can limit the maximum number of authorized hosts allowed on the
port.

Each authorized client requires a TCAM rule. If there is no available space in the TCAM, the authentication
is rejected.

When using the dot1x host-mode command to change the port mode to single-host or multi-host when
authentication is enabled, the port state is set to unauthorized.

If the dot1x host-mode command changes the port mode to multi-session when authentication is enabled,
the state of all attached hosts is set to unauthorized.

To change the port mode to single-host or multi-host, set the port (dot1x port-control) to force-unauthorized,
change the port mode to single-host or multi-host, and set the port to authorization auto.

Tagged traffic belonging to the unauthenticated VLANs is always bridged regardless if a host is authorized
or not.

When the guest VLAN is enabled, untagged and tagged traffic from unauthorized hosts not belonging to the
unauthenticated VLANs is bridged via the guest VLAN.

Traffic from an authorized hosts is bridged in accordance with the port static configuration. A user can specify
that untagged and tagged traffic from the authorized host not belonging to the unauthenticated VLANs will
be remapped to a VLAN that is assigned by a RADIUS server during the authentication process.

The switch does not remove from FDB the host MAC address learned on the port when its authentication
status is changed from authorized to unauthorized. The MAC address will be removed after the aging timeout
expires.

802.1x enabled on a port associated with a port channel has the following limitations:

• Only the 802.1X-based authentication is supported.

• Only the multi-host (legacy 802.1x mode) mode is supported.

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x host-mode multi-host

Cisco Business Switches 350 Series CLI Guide

40

802-1x Commands

dot1x max-hosts

dot1x max-hosts

To configure the maximum number of authorized hosts allowed on the interface, use the dot1x max-hosts
command in Interface Configuration mode. To restore the default configuration, use the no form of this
command.

Syntax

dot1x max-hosts count

no dot1x max-hosts

Parameters

• count—Specifies the maximum number of authorized hosts allowed on the interface. May be any 32

bits positive number.

Default Configuration

No limitation.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

By default, the number of authorized hosts allowed on an interface is not limited. To limit the number of
authorized hosts allowed on an interface, use the dot1x max-hosts command.

This command is relevant only for multi-session mode.

Example

The following example limits the maximum number of authorized hosts on Ethernet port gi1/0/1 to 6:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x max-hosts 6

Cisco Business Switches 350 Series CLI Guide

41

dot1x max-login-attempts

802-1x Commands

dot1x max-login-attempts

To set the maximum number of allowed login attempts, use the dot1x max-login-attempts command in
Interface Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

dot1x max-login-attempts count

no dot1x max-login-attempts

Parameters

• count—Specifies the maximum number of allowed login attempts. A value of 0 means an infinite numbers

of attempts. The valid range is 3-10.

Default Configuration

Unlimited.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

By default, the switch does not limit the number of failed login attempts. To specify the number of allowed
fail login attempts, use this command.

The command is applied only to the Web-based authentication.

Example

The following example sets maximum number of allowed login attempts to 5:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x max-login-attempts 5

Cisco Business Switches 350 Series CLI Guide

42

802-1x Commands

dot1x max-req

dot1x max-req

To set the maximum number of times that the device sends an Extensible Authentication Protocol (EAP)
request/identity frame (assuming that no response is received) to the client before restarting the authentication
process, use the dot1x max-req command in Interface Configuration mode. To restore the default configuration,
use the no form of this command.

Syntax

dot1x max-req count

no dot1x max-req

Parameters

• count—Specifies the maximum number of times that the device sends an EAP request/identity frame

before restarting the authentication process. (Range: 1–10).

Default Configuration

The default maximum number of attempts is 2.

Command Mode

Interface (Ethernet, OOB) Configuration mode

User Guidelines

The default value of this command should be changed only to adjust to unusual circumstances, such as
unreliable links or specific behavioral problems with certain clients and authentication servers.

Example

The following example sets the maximum number of times that the device sends an EAP request/identity
frame to 6.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x max-req 6

Cisco Business Switches 350 Series CLI Guide

43

dot1x page customization

802-1x Commands

dot1x page customization

To enter Web-Based Page Customization Configuration mode, use the dot1x page customization command
in Global Configuration mode.

Syntax

dot1x page customization

Default Configuration

No user customization.

Command Mode

Global Configuration mode

User Guidelines

The command should not be entered or edited manually (unless when using copy-paste). It is a part of the
configuration file produced by the switch.

A user must customize the web-based authentication pages by using the browser Interface.

Example

The following example shows part of a web-based page customization configuration:

switchxxxxxx(config)# dot1x page customization
switchxxxxxx(config-web-page)# data 1feabcde
switchxxxxxx(config-web-page)# data 17645874
switchxxxxxx(config-web-page)# exit

Cisco Business Switches 350 Series CLI Guide

44

802-1x Commands

dot1x port-control

dot1x port-control

To enable manual control of the port authorization state, use the dot1x port-control command in Interface
Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

dot1x port-control {auto | force-authorized | force-unauthorized} [time-range time-range-name]

no dot1x port-control

Parameters

• auto—Enables 802.1X authentication on the port and causes it to transition to the authorized or

unauthorized state, based on the 802.1X authentication exchange between the device and the client.

• force-authorized—Disables 802.1X authentication on the interface and causes the port to transition to
the authorized state without any authentication exchange required. The port sends and receives traffic
without 802.1X-based client authentication.

• force-unauthorized—Denies all access through this port by forcing it to transition to the unauthorized
state and ignoring all attempts by the client to authenticate. The device cannot provide authentication
services to the client through this port.

• time-range time-range-name—Specifies a time range. When the Time Range is not in effect, the port

state is Unauthorized. (Range: 1-32 characters).

Default Configuration

The port is in the force-authorized state.

Command Mode

Interface (Ethernet, OOB) Configuration mode

User Guidelines

802.1X authentication cannot be enabled on an interface if port security feature is already enabled on the same
interface.

The switch removes all MAC addresses learned on a port when its authorization control is changed from
force-authorized to another.

Note

It is recommended to disable spanning tree or to enable spanning-tree PortFast mode on 802.1X edge ports
in auto state that are connected to end stations, in order to proceed to the forwarding state immediately after
successful authentication.

Example

The following example sets 802.1X authentication on gi1/0/1 to auto mode.

Cisco Business Switches 350 Series CLI Guide

45

dot1x port-control

802-1x Commands

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x port-control auto

Cisco Business Switches 350 Series CLI Guide

46

802-1x Commands

dot1x radius-attributes vlan

dot1x radius-attributes vlan

To enable RADIUS-based VLAN assignment, use the dot1x radius-attributes vlan command in Interface
Configuration mode. To disable RADIUS-based VLAN assignment, use the no form of this command.

Syntax

dot1x radius-attributes vlan [reject | static]

no dot1x radius-attributes vlan

Parameters

• reject—If the RADIUS server authorized the supplicant, but did not provide a supplicant VLAN the

supplicant is rejected. If the parameter is omitted, this option is applied by default.

• static—If the RADIUS server authorized the supplicant, but did not provide a supplicant VLAN, the

supplicant is accepted.

Default Configuration

reject

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

If RADIUS provides invalid VLAN information, the authentication is rejected.

If a RADIUS server assigns a client with a non-existing VLAN, the switch creates the VLAN. The VLAN is
removed when it is no longer being used.

If RADIUS provides valid VLAN information and the port does not belong to the VLAN received from
RADIUS, it is added to the VLAN as an egress untagged port. When the last authorized client assigned to the
VLAN becomes unauthorized or 802.1x is disabled on the port, the port is excluded from the VLAN.

If the authentication mode is single-host or multi-host, the value of PVID is set to the VLAN_ID.

If an authorized port in the single-host or multi-host mode changes its status to unauthorized, the port static
configuration is reset.

If the authentication mode is multi-sessions mode, the PVID is not changed and all untagged traffic and tagged
traffic not belonging to the unauthenticated VLANs are mapped to the VLAN using TCAM.

If the last authorized host assigned to a VLAN received from RADIUS connected to a port in the multi-sessions
mode changes its status to unauthorized, the port is removed from the VLAN if it is not in the static
configuration.

See the User Guidelines of the dot1x host-mode command for more information.

If 802.1X is disabled the port static configuration is reset.

If the reject keyword is configured and the RADIUS server authorizes the host but the RADIUS accept
message does not assign a VLAN to the supplicant, authentication is rejected.

Cisco Business Switches 350 Series CLI Guide

47

dot1x radius-attributes vlan

802-1x Commands

If the static keyword is configured and the RADIUS server authorizes the host then even though the RADIUS
accept message does not assign a VLAN to the supplicant, authentication is accepted and the traffic from the
host is bridged in accordance with port static configuration.

If this command is used when there are authorized ports/hosts, it takes effect at subsequent authentications.
To manually re-authenticate, use the dot1x re-authenticate command.

Example 1. This example enables user-based VLAN assignment. If the RADIUS server authorized
the supplicant, but did not provide a supplicant VLAN, the supplicant is rejected.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x radius-attributes vlan
switchxxxxxx(config-if)# exit

Example 2. This example enables user-based VLAN assignment. If the RADIUS server authorized
the supplicant but did not provide a supplicant VLAN, the supplicant is accepted and the static VLAN
configurations is used.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x radius-attributes static
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

48

802-1x Commands

dot1x re-authenticate

dot1x re-authenticate

To initiate manually re-authentication of all 802.1X-enabled ports or the specified 802.1X-enabled port, use
the dot1x re-authenticate command in Privileged EXEC mode.

Syntax

dot1x re-authenticate [interface-id]

Parameters

• interface-id—Specifies an Ethernet port or OOB port.

Default Configuration

If no port is specified, command is applied to all ports.

Command Mode

Privileged EXEC mode

Example

The following command manually initiates re-authentication of 802.1X-enabled gi1/0/1:

switchxxxxxx# dot1x re-authenticate gi1/0/1

Cisco Business Switches 350 Series CLI Guide

49

dot1x reauthentication

802-1x Commands

dot1x reauthentication

To enable periodic re-authentication of the client, use the dot1x reauthentication command in Interface
Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

dot1x reauthentication

no dot1x reauthentication

Default Configuration

Periodic re-authentication is disabled.

Command Mode

Interface (Ethernet, OOB) Configuration mode

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x reauthentication

Cisco Business Switches 350 Series CLI Guide

50

802-1x Commands

dot1x supplicant

dot1x supplicant

To enable the dot1x supplicant role for a given interface, use the dot1x supplicant command in Interface
Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

dot1x supplicant name

no dot1x supplicant

Parameters

• name—The name of the credential structure applied on the interface.

Default Configuration

The supplicant role is disabled.

Command Mode

Interface (Ethernet, OOB) Configuration mode

User Guidelines

Use the dot1x supplicant command to enable the dot1x supplicant on a given interface. When the supplicant
is enabled on an interface the interface becomes an unauthorized. When the 802.1X authentication successes
the interface state is changed to authorized.

If the name argument specifies an undefined or not fully defined (password or username is not configured)
802.1X credential structure, the command is rejected.

Authenticator and Supplicant cannot be enabled together on the same interface.

The command cannot be configured a few times on the same port. To replace the configured credential, use
the no form of the command before configuration a new credential.

Unlike unauthorized authenticator interface an unauthorized supplicant interface does not limit any traffic
passed through.

The following events start the 802.1X supplicant authentication on a port:

• The dot1x supplicant command enables the supplicant on the port in the UP status.

• The status of the port is changed to UP and the supplicant is enabled on the port.

• The EAP Identifier Request message is received on the port and the supplicant is enabled on the port.

Example

The following example configures an 802.1X supplicant on port gi1/0/1:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x supplicant upstream-port

Cisco Business Switches 350 Series CLI Guide

51

dot1x supplicant traps authentication failure

802-1x Commands

dot1x supplicant traps authentication failure

To enable sending traps when an 802.1X supplicant authentication fails, use the dot1x supplicant traps
authentication failure command in Global Configuration mode. To restore the default configuration, use the
no form of this command.

Syntax

dot1x supplicant traps authentication failure

no dot1x supplicant traps authentication failure

Default Configuration

Traps are disabled.

Command Mode

Global Configuration mode

User Guidelines

A rate limit is applied to the traps: not more than one trap of this type can be sent in 10 seconds.

Example

The following example enables sending traps when an 802.1X supplicant authentication failed:

switchxxxxxx(config)# dot1x supplicant traps authentication failure

Cisco Business Switches 350 Series CLI Guide

52

802-1x Commands

dot1x supplicant traps authentication success

dot1x supplicant traps authentication success

To enable sending traps when an 802.1X supplicant authentication is succeeded, use the dot1x supplicant
traps authentication success command in Global Configuration mode. To restore the default configuration,
use the no form of this command.

Syntax

dot1x supplicant traps authentication success

no dot1x supplicant traps authentication success

Default Configuration

Traps are disabled.

Command Mode

Global Configuration mode

User Guidelines

A rate limit is applied to the traps: not more than one trap of this type can be sent in 10 seconds.

Example

The following example enables sending traps when an 802.1X supplicant authentication is succeeded:

switchxxxxxx(config)# dot1x supplicant traps authentication success

Cisco Business Switches 350 Series CLI Guide

53

dot1x system-auth-control

802-1x Commands

dot1x system-auth-control

To enable 802.1X globally, use the dot1x system-auth-control command in Global Configuration mode. To
restore the default configuration, use the no form of this command.

Syntax

dot1x system-auth-control

no dot1x system-auth-control

Default Configuration

Disabled.

Command Mode

Global Configuration mode

Example

The following example enables 802.1X globally.

switchxxxxxx(config)# dot1x system-auth-control

Cisco Business Switches 350 Series CLI Guide

54

802-1x Commands

dot1x timeout eap-timeout

dot1x timeout eap-timeout

To set the EAP timeout, use the dot1x timeout eap-timeout command in Interface Configuration mode. To
restore the default configuration, use the no form of this command.

Syntax

dot1x timeout eap-timeout seconds

no dot1x timeout eap-timeout

Parameters

• seconds—Specifies the time interval in seconds during which the EAP Server (EAP Authenticator) waits
for a response from the EAP client (EAP Peer) before the request retransmission. (Range: 1–65535
seconds).

Default Configuration

The default timeout period is 30 seconds.

Command Mode

Interface (Ethernet, OOB) Configuration mode

User Guidelines

The default value of this command should be changed only to adjust to unusual circumstances, such as
unreliable links or specific behavioral problems with certain clients and authentication servers.

The parameter is used by the 802.1x Supplicant.

Example

The following example sets the EAP timeout to 45 seconds.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x timeout eap-timeout 45

Cisco Business Switches 350 Series CLI Guide

55

dot1x timeout quiet-period

802-1x Commands

dot1x timeout quiet-period

To set the time interval that the device remains in a quiet state following a failed authentication exchange,
use the dot1x timeout quiet-period command in Interface Configuration mode. To restore the default
configuration, use the no form of this command.

Syntax

dot1x timeout quiet-period seconds

no dot1x timeout quiet-period

Parameters

• seconds—Specifies the time interval in seconds that the device remains in a quiet state following a failed

authentication exchange with a client. (Range: 10–65535 seconds).

Default Configuration

The default quiet period is 60 seconds.

Command Mode

Interface (Ethernet, OOB) Configuration mode

User Guidelines

During the quiet period, the device does not accept or initiate authentication requests.

The default value of this command should only be changed to adjust to unusual circumstances, such as
unreliable links or specific behavioral problems with certain clients and authentication servers.

To provide faster response time to the user, a smaller number than the default value should be entered.

For 802.1x and MAC-based authentication, the number of failed logins is 1.

For WEB-based authentication, the quiet period is applied after a number of failed attempts.

For 802.1x-based and MAC-based authentication methods, the quiet period is applied after each failed attempt.

Example

The following example sets the time interval that the device remains in the quiet state following a failed
authentication exchange to 120 seconds.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x timeout quiet-period 120

Cisco Business Switches 350 Series CLI Guide

56

802-1x Commands

dot1x timeout reauth-period

dot1x timeout reauth-period

To set the number of seconds between re-authentication attempts, use the dot1x timeout reauth-period
command in Interface Configuration mode. To restore the default configuration, use the no form of this
command.

Syntax

dot1x timeout reauth-period seconds

no dot1x timeout reauth-period

Parameters

• reauth-period seconds—Number of seconds between re-authentication attempts. (Range:

300-4294967295).

Default Configuration

3600

Command Mode

Interface (Ethernet, OOB) Configuration mode

User Guidelines

The command is only applied to the 802.1x authentication method.

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x timeout reauth-period 5000

Cisco Business Switches 350 Series CLI Guide

57

dot1x timeout server-timeout

802-1x Commands

dot1x timeout server-timeout

To set the time interval during which the device waits for a response from the authentication server, use the
dot1x timeout server-timeout command in Interface Configuration mode. To restore the default configuration,
use the no form of this command.

Syntax

dot1x timeout server-timeout seconds

no dot1x timeout server-timeout

Parameters

• server-timeout seconds—Specifies the time interval in seconds during which the device waits for a

response from the authentication server. (Range: 1–65535 seconds).

Default Configuration

The default timeout period is 30 seconds.

Command Mode

Interface (Ethernet, OOB) Configuration mode

User Guidelines

The actual timeout period can be determined by comparing the value specified by this command to the result
of multiplying the number of retries specified by the radius-server retransmit command by the timeout period
specified by the radius-server transmit command, and selecting the lower of the two values.

Example

The following example sets the time interval between retransmission of packets to the authentication server
to 3600 seconds.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x timeout server-timeout 3600

Cisco Business Switches 350 Series CLI Guide

58

802-1x Commands

dot1x timeout silence-period

dot1x timeout silence-period

To set the authentication silence time, use the dot1x timeout silence-period command in Interface
Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

dot1x timeout silence-period seconds

no dot1x timeout silence-period

Parameters

• seconds—Specifies the silence interval in seconds. The valid range is 60 - 65535.

Default Configuration

The silence period is not limited.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

The silence time is the number of seconds that if an authorized client does not send traffic during this period,
the client is changed to unauthorized.

If an authorized client does not send traffic during the silence period specified by the command, the state of
the client is changed to unauthorized.

The command is only applied to WEB-based authentication.

Example

The following example sets the authentication silence time to 100 seconds:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x timeout silence-period 100

Cisco Business Switches 350 Series CLI Guide

59

dot1x timeout supp-timeout

802-1x Commands

dot1x timeout supp-timeout

To set the time interval during which the device waits for a response to an Extensible Authentication Protocol
(EAP) request frame from the client before resending the request, use the dot1x timeout supp-timeout
command in Interface Configuration mode. To restore the default configuration, use the no form of this
command.

Syntax

dot1x timeout supp-timeout seconds

no dot1x timeout supp-timeout

Parameters

• supp-timeout seconds—Specifies the time interval in seconds during which the device waits for a

response to an EAP request frame from the client before resending the request. (Range: 1–65535 seconds).

Default Configuration

The default timeout period is 30 seconds.

Command Mode

Interface (Ethernet, OOB) Configuration mode

User Guidelines

The default value of this command should be changed only to adjust to unusual circumstances, such as
unreliable links or specific behavioral problems with certain clients and authentication servers.

The command is only applied to the 802.1x authentication method.

Example

The following example sets the time interval during which the device waits for a response to an EAP request
frame from the client before resending the request to 3600 seconds.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x timeout supp-timeout 3600

Cisco Business Switches 350 Series CLI Guide

60

802-1x Commands

dot1x timeout supplicant-held-period

dot1x timeout supplicant-held-period

To set the time period during which the supplicant waits before restarting authentication after receiving the
FAIL response from the Radius server, use the dot1x timeout supplicant-held-period command in Interface
Configuration mode. To restore the default configuration, use the no form of this command

Syntax

dot1x timeout supplicant-held-period seconds

no dot1x timeout supplicant-held-period

Parameters

• seconds—Specifies the time period during which the supplicant waits before restarting authentication

after receiving the FAIL response from the Radius server. (Range: 1–65535 seconds).

Default Configuration

The default timeout period is 60 seconds.

Command Mode

Interface (Ethernet, OOB) Configuration mode

User Guidelines

The default value of this command should be changed only to adjust to unusual circumstances, such as
unreliable links or specific behavioral problems with certain clients and authentication servers.

Example

The following example sets the time period during which the supplicant waits before restarting authentication
after receiving the FAIL response from the Radius server to 70 seconds.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x timeout supplicant-held-period 70

Cisco Business Switches 350 Series CLI Guide

61

dot1x timeout tx-period

802-1x Commands

dot1x timeout tx-period

To set the time interval during which the device waits for a response to an Extensible Authentication Protocol
(EAP) request/identity frame from the client before resending the request, use the dot1x timeout tx-period
command in Interface Configuration mode. To restore the default configuration, use the no form of this
command.

Syntax

dot1x timeout tx-period seconds

no dot1x timeout tx-period

Parameters

• seconds—Specifies the time interval in seconds during which the device waits for a response to an

EAP-request/identity frame from the client before resending the request. (Range: 30–65535 seconds).

Default Configuration

The default timeout period is 30 seconds.

Command Mode

Interface (Ethernet, OOB) Configuration mode

User Guidelines

The default value of this command should be changed only to adjust to unusual circumstances, such as
unreliable links or specific behavioral problems with certain clients and authentication servers.

The command is only applied to the 802.1x authentication method.

Example

The following command sets the time interval during which the device waits for a response to an EAP
request/identity frame to 60 seconds.

switchxxxxxx(config)# interface gi1/0/1:
switchxxxxxx(config-if)# dot1x timeout tx-period 60

Cisco Business Switches 350 Series CLI Guide

62

802-1x Commands

dot1x traps authentication failure

dot1x traps authentication failure

To enable sending traps when an 802.1X authentication method failed, use the dot1x traps authentication
failure command in Global Configuration mode. To restore the default configuration, use the no form of this
command.

Syntax

dot1x traps authentication failure {[802.1x] [mac] [web]}

no dot1x traps authentication failure

Parameters

• 802.1x—Enables traps for 802.1X-based authentication.

• mac—Enables traps for MAC-based authentication.

• web—Enables traps for WEB-based authentication.

Default Configuration

All traps are disabled.

Command Mode

Global Configuration mode

User Guidelines

Any combination of the keywords are allowed. At least one keyword must be configured.

A rate limit is applied to the traps: not more than one trap of this type can be sent in 10 seconds.

Example

The following example enables sending traps when a MAC address fails to be authorized by the 802.1X
mac-authentication access control.

switchxxxxxx(config)# dot1x traps authentication failure 802.1x

Cisco Business Switches 350 Series CLI Guide

63

dot1x traps authentication quiet

802-1x Commands

dot1x traps authentication quiet

To enable sending traps when a host state is set to the quiet state after failing the maximum sequential attempts
of login, use the dot1x traps authentication quiet command in Global Configuration mode. To disable the
traps, use the no form of this command.

Syntax

dot1x traps authentication quiet

no dot1x traps authentication quiet

Default Configuration

Quiet traps are disabled.

Command Mode

Global Configuration mode

User Guidelines

The traps are sent after the client is set to the quiet state after the maximum sequential attempts of login.

A rate limit is applied to the traps: not more than one trap of this type can be sent in 10 seconds.

Example

The following example enables sending traps when a host is set in the quiet state:

switchxxxxxx(config)# dot1x traps authentication quiet

Cisco Business Switches 350 Series CLI Guide

64

802-1x Commands

dot1x traps authentication success

dot1x traps authentication success

To enable sending traps when a host is successfully authorized by an 802.1X authentication method, use the
dot1x traps authentication success command in Global Configuration mode. To disable the traps, use the
no form of this command.

Syntax

dot1x traps authentication success {[802.1x] [mac] [web]}

no dot1x traps authentication success

Parameters

• 802.1x—Enables traps for 802.1X-based authentication.

• mac—Enables traps for MAC-based authentication.

• web—Enables traps for WEB-based authentication.

Default Configuration

Success traps are disabled.

Command Mode

Global Configuration mode

User Guidelines

Any combination of the keywords are allowed. At least one keyword must be configured.

A rate limit is applied to the traps: not more than one trap of this type can be sent in 10 seconds.

Example

The following example enables sending traps when a MAC address is successfully authorized by the 802.1X
MAC-authentication access control.

switchxxxxxx(config)# dot1x traps authentication success mac

Cisco Business Switches 350 Series CLI Guide

65

dot1x unlock client

802-1x Commands

dot1x unlock client

To unlock a locked (in the quiet period) client, use the dot1x unlock client command in Privileged EXEC
mode.

Syntax

dot1x unlock client interface-id mac-address

Parameters

• interface-id—Interface ID where the client is connected to.

• mac-address—Client MAC address.

Default Configuration

The client is locked until the silence interval is over.

Command Mode

Privileged EXEC mode

User Guidelines

Use this command to unlock a client that was locked after the maximum allowed authentication failed attempts
and to end the quiet period. If the client is not in the quiet period, the command has no affect.

Example

switchxxxxxx# dot1x unlock client gi1/0/1 00:01:12:af:00:56

Cisco Business Switches 350 Series CLI Guide

66

802-1x Commands

dot1x violation-mode

dot1x violation-mode

To configure the action to be taken when an unauthorized host on authorized port in single-host mode attempts
to access the interface, use the dot1x violation-mode command in Interface Configuration mode. To restore
the default configuration, use the no form of this command.

Syntax

dot1x violation-mode {restrict | protect | shutdown} [traps seconds]

no dot1x violation-mode

Parameters

• restrict—Generates a trap when a station, whose MAC address is not the supplicant MAC address,
attempts to access the interface. The minimum time between the traps is 1 second. Those frames are
forwarded but their source addresses are not learned.

• protect—Discard frames with source addresses that are not the supplicant address.

• shutdown—Discard frames with source addresses that are not the supplicant address and shutdown the

port.

• trap seconds - Send SNMP traps, and specifies the minimum time between consecutive traps. If seconds
= 0 traps are disabled. If the parameter is not specified, it defaults to 1 second for the restrict mode and
0 for the other modes.

Default Configuration

Protect

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

The command is relevant only for single-host mode.

For BPDU messages whose MAC addresses are not the supplicant MAC address are not discarded in Protect
mode.

BPDU message whose MAC addresses are not the supplicant MAC address cause a shutdown in Shutdown
mode.

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# dot1x violation-mode protect

Cisco Business Switches 350 Series CLI Guide

67

password

password

802-1x Commands

To specify a password for an 802.1X credential structure, use the password command in Dot1x credentials
configuration mode. To remove the password, use the no form of this command.

Syntax

encrypted password encrypted-password

password password

no password

Parameters

• encrypted-password—The password in encrypted format.

• password—The password up to 64 characters.

Default Configuration

A password is not specified.

Command Mode

Dot1x credentials configuration mode

User Guidelines

An 802.1X credential structure is necessary when configuring a supplicant (client). This credentials structure
must contain a username and password and might contain a description.

Example

The following example configures an 802.1X credential structure:

switchxxxxxx(config)# dot1x credentials site-A
switchxxxxxx(config-dot1x-cred)# username inner-switch
switchxxxxxx(config-dot1x-cred)# password 87b$#9hv5*
switchxxxxxx(config-dot1x-cred)# description This credentials profile should be used to
connect to site-A.

Cisco Business Switches 350 Series CLI Guide

68

802-1x Commands

show dot1x

show dot1x

To display the 802.1X interfaces or specified interface status, use the show dot1x command in Privileged
EXEC mode.

Syntax

show dot1x [interface interface-id | detailed]

Parameters

• interface-id—Specifies an Ethernet port or OOB port.

• detailed—Displays information for non-present ports in addition to present ports.

Default Configuration

Display for all ports. If detailed is not used, only present ports are displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays authentication information for all interfaces on which 802.1x is enabled:

switchxxxxxx# show dot1x
Authentication is enabled
Authenticator Global Configuration:
Authenticating Servers: Radius, None
MAC-Based Authentication:

Type: Radius
Username Groupsize: 2
Username Separator: -
Username case: Lowercase
Password: MD5 checksum 1238af77aaca17568f12988601fcabed

Unathenticated VLANs: 100, 1000, 1021
Guest VLAN: VLAN 11, timeout 30 sec
Authentication failure traps are enabled for 802.1x+mac
Authentication success traps are enabled for 802.1x
Authentication quiet traps are enabled for 802.1x
Supplicant Global Configuration:
Supplicant Authentication failure traps are enabled
Supplicant Authentication success traps are enabled
gi1/0/1

Authenticator is enabled
Supplicant is disabled
Authenticator Configuration:
Host mode: multi-sessions
Authentication methods: 802.1x+mac
Port Adminstrated status: auto
Guest VLAN: enabled
VLAN Radius Attribute: enabled, static
Open access: disabled
Time range name: work_hours (Active now)
Server-timeout: 30 sec

Cisco Business Switches 350 Series CLI Guide

69

show dot1x

802-1x Commands

Maximum Hosts: unlimited
Maximum Login Attempts: 3
Reauthentication is enabled
Reauthentication period: 3600 sec
Silence period: 1800 sec
Quiet Period: 60 sec
Interfaces 802.1X-Based Parameters

EAP Timeout: 30 sec
EAP Max-Retrans: 2
Tx period: 30 sec
Supplicant timeout: 30 sec
max-req: 2

Authentication success: 9
Authentication fails: 1
Number of Authorized Hosts: 10
Supplicant Configuration:
retry-max: 2
EAP time period: 15 sec
Supplicant Held Period: 30 sec

gi1/0/2

Authenticator is enabled
Supplicant is disabled
Authenticator Configuration:
Host mode: single-host
Authentication methods: 802.1x+mac
Port Adminstrated status: auto
Port Operational status: authorized
Guest VLAN: disabled
VLAN Radius Attribute: enabled
Open access: enabled
Time range name: work_hours (Active now)
Server-timeout: 30 sec
Aplied Authenticating Server: Radius
Applied Authentication method: 802.1x
Session Time (HH:MM:SS): 00:25:22
MAC Address: 00:08:78:32:98:66
Username: Bob
Violation:

Mode: restrict
Trap: enabled
Trap Min Interval: 20 sec
Violations were detected: 9

Reauthentication is enabled
Reauthentication period: 3600 sec
Silence period: 1800 sec
Quiet Period: 60 sec
Interfaces 802.1X-Based Parameters

EAP Timeout: 30 sec
EAP Max-Retrans: 2
Tx period: 30 sec
Supplicant timeout: 30 sec
max-req: 2

Authentication success: 2
Authentication fails: 0

gi1/0/3

Authenticator is enabled
Supplicant is disabled
Authenticator Configuration:
Host mode: multi-host
Authentication methods: 802.1x+mac
Port Adminstrated status: auto
Port Operational status: authorized
Guest VLAN: disabled
VLAN Radius Attribute: disabled

Cisco Business Switches 350 Series CLI Guide

70

802-1x Commands

show dot1x

Time range name: work_hours (Active now)
Open access: disabled
Server-timeout: 30 sec
Aplied Authenticating Server: Radius
Applied Authentication method: 802.1x
Session Time (HH:MM:SS): 00:25:22
MAC Address: 00:08:78:32:98:66
Username: Bob
Violation:

Mode: restrict
Trap: enabled
Trap Min Interval: 20 sec
Violations were detected: 0

Reauthentication is enabled
Reauthentication period: 3600 sec
Silence period: 1800 sec
Quiet Period: 60 sec
Interfaces 802.1X-Based Parameters

EAP Timeout: 30 sec
EAP Max-Retrans: 2
Tx period: 30 sec
Supplicant timeout: 30 sec
max-req: 2

Authentication success: 20
Authentication fails: 0
Supplicant Configuration:
retry-max: 2
EAP time period: 15 sec
Supplicant Held Period: 30 sec

gi1/0/4

Authenticator is disabled
Supplicant is enabled
Authenticator Configuration:
Host mode: multi-host
Authentication methods: 802.1x+mac
Port Adminstrated status: force-auto
Guest VLAN: disabled
VLAN Radius Attribute: disabled
Time range name: work_hours (Active now)
Open access: disabled
Server-timeout: 30 sec
Aplied Authenticating Server: Radius
Applied Authentication method: 802.1x
Session Time (HH:MM:SS): 00:25:22
MAC Address: 00:08:78:32:98:66
Username: Bob
Violation:

Mode: restrict
Trap: enabled
Trap Min Interval: 20 sec
Violations were detected: 0

Reauthentication is enabled
Reauthentication period: 3600 sec
Silence period: 1800 sec
Quiet Period: 60 sec
Interfaces 802.1X-Based Parameters

EAP Timeout: 30 sec
EAP Max-Retrans: 2
Tx period: 30 sec
Supplicant timeout: 30 sec
max-req: 2

Authentication success: 0
Authentication fails: 0
Supplicant Configuration:

Cisco Business Switches 350 Series CLI Guide

71

show dot1x

802-1x Commands

retry-max: 2
EAP time period: 15 sec
Supplicant Held Period: 30 sec
Credentials Name: Basic-User
Supplicant Operational status: authorized

The following describes the significant fields shown in the display:

• Port—The port interface-id.

• Host mode—The port authentication configured mode. Possible values: single-host, multi-host,

multi-sessions.

• single-host

• multi-host

• multi-sessions

• Authentication methods—Authentication methods configured on port. Possible values are combinations

of the following methods:

• 802.1x

• mac

• wba

• Port Administrated status—The port administration (configured) mode. Possible values: force-auth,

force-unauth, auto.

• Port Operational status—The port operational (actual) mode. Possible values: authorized or

unauthorized.

• Username—Username representing the supplicant identity. This field shows the username if the port
control is auto. If the port is Authorized, it displays the username of the current user. If the port is
Unauthorized, it displays the last user authorized successfully.

• Quiet period—Number of seconds that the device remains in the quiet state following a failed

authentication exchange (for example, the client provided an invalid password).

• Silence period—Number of seconds that If an authorized client does not send traffic during the silence

period specified by the command, the state of the client is changed to unauthorized.

• EAP timeout—Time interval in seconds during which the EAP Server (EAPAuthenticator) waits for a

response from the EAP client (EAP Peer) before the requestretransmission

• EAP Max Retrans—Maximum number of times that the EAP Server (EAPAuthenticator) retransmits

an EAP request when no response from a EAP client (EAPPeer) was received.

• Tx period—Number of seconds that the device waits for a response to an Extensible Authentication

Protocol (EAP) request/identity frame from the client before resending the request.

• Max req—Maximum number of times that the device sends an EAP request frame (assuming that no

response is received) to the client before restarting the authentication process.

• Server timeout—Number of seconds that the device waits for a response from the authentication server

before resending the request.

• Session Time—Amount of time (HH:MM:SS) that the user is logged in.

Cisco Business Switches 350 Series CLI Guide

72

802-1x Commands

show dot1x

• MAC address—Supplicant MAC address.

• Authentication success—Number of times the state machine received a Success message from the

Authentication Server.

• Authentication fails—Number of times the state machine received a Failure message from the

Authentication Server.

Cisco Business Switches 350 Series CLI Guide

73

show dot1x credentials

802-1x Commands

show dot1x credentials

To display 802.1X credentials, use the show dot1x credentials mode command in Privileged EXEC mode.

Syntax

show dot1x credentials

Command Mode

Privileged EXEC mode

Examples

The following example displays dot1x credentials:

switchxxxxxx# show dot1x credentials
downstream-interface

description: should be used for downstream ports
username: downstream
password’s MD5: 1238af77aaca17568f12988601fcabed

upstream-interface

description: should be used for connection to ISP
username: up2isp
password’s MD5: 1238bbff75431230965394466ac76549

Cisco Business Switches 350 Series CLI Guide

74

802-1x Commands

show dot1x locked clients

show dot1x locked clients

To display all clients who are locked and in the quiet period, use the show dot1x locked clients command in
Privileged EXEC mode.

Syntax

show dot1x locked clients

Command Mode

Privileged EXEC mode

User Guidelines

Use the show dot1x locked clients command to display all locked (in the quiet period) clients.

Example

The following example displays locked clients:

switchxxxxxx# show dot1x locked clients

Port
-------
gi1/0/1
gi1/0/1
gi1/0/2

MAC Address
--------------
0008.3b79.8787
0008.3b89.3128
0008.3b89.3129

Remaining Time
--------------
20
40
10

Cisco Business Switches 350 Series CLI Guide

75

show dot1x statistics

802-1x Commands

show dot1x statistics

To display 802.1X statistics for the specified port, use the show dot1x statistics command in Privileged EXEC
mode.

Syntax

show dot1x statistics interface interface-id

Parameters

• interface-id—Specifies an Ethernet port or OOB port.

Command Mode

Privileged EXEC mode

Example

The following example displays 802.1X statistics for gi1/0/1.

switchxxxxxx# show dot1x statistics interface gi1/0/1
EapolEapFramesRx: 10
EapolStartFramesRx: 0
EapolLogoffFramesRx: 1
EapolAnnouncementFramesRx: 0
EapolAnnouncementReqFramesRx: 0
EapolInvalidFramesRx: 0
EapolEapLengthErrorFramesRx: 0
EapolMkNoCknFramesRx: 0
EapolMkInvalidFramesRx: 0
EapolLastRxFrameVersion: 3
EapolLastRxFrameSource: 00:08:78:32:98:78
EapolSuppEapFramesTx: 0
EapolStartFramesTx: 1
EapolLogoffFramesTx: 0
EapolAnnouncementFramesTx: 0
EapolAnnouncementReqFramesTx: 0
EapolAuthEapFramesTx: 9
EapolMkaFramesTx: 0

The following table describes the significant fields shown in the display:

Field

Description

EapolInvalidFramesRx

The number of invalid EAPOL frames of any type that have been
received by this PAE.

EapolEapLengthErrorFramesRx

The number of EAPOL frames that the Packet Body Length does not
match a Packet Body that is contained within the octets of the received
EAPOL MPDU in this PAE.

EapolAnnouncementFramesRx

The number of EAPOL-Announcement frames that have been received
by this PAE.

Cisco Business Switches 350 Series CLI Guide

76

802-1x Commands

show dot1x statistics

Field

Description

EapolAnnouncementReqFramesRx

The number of EAPOL-Announcement-Req frames that have been
received by this PAE.

EapolStartFramesRx

EapolEapFramesRx

The number of EAPOL-Start frames that have been received by this
PAE.

The number of EAPOL-EAP frames that have been received by this
PAE.

EapolLogoffFramesRx

The number of EAPOL-Logoff frames that have been received by this
PAE.

EapolMkNoCknFramesRx

The number of MKPDUs received with MKA not enabled or CKN not
recognized in this PAE.

EapolMkInvalidFramesRx

The number of MKPDUs failing in message authentication on receipt
process in this PAE.

EapolLastRxFrameVersion

The version of last received EAPOL frame by this PAE.

EapolLastRxFrameSource

The source MAC address of last received EAPOL frame by this PAE.

EapolSuppEapFramesTx

The number of EAPOL-EAP frames that have been transmitted by the
supplicant of this PAE.

EapolLogoffFramesTx

The number of EAPOL-Logoff frames that have been transmitted by
this PAE.

EapolAnnouncementFramesTx

The number of EAPOL-Announcement frames that have been transmitted
by this PAE.

EapolAnnouncementReqFramesTx

The number of EAPOL-Announcement-Req frames that have been
transmitted by this PAE.

EapolStartFramesTx

The number of EAPOL-Start frames that have been received by this
PAE.

EapolAuthEapFramesTx

The number of EAPOL-EAP frames that have been transmitted by the
authenticator of this PAE.

EapolMkaFramesTx

The number of EAPOL-MKA frames with no CKN information that
have been transmitted by this PAE.

Cisco Business Switches 350 Series CLI Guide

77

show dot1x users

802-1x Commands

show dot1x users

To display active 802.1X authorized users for the device, use the show dot1x users command in Privileged
EXEC mode.

Syntax

show dot1x users [username username]

Parameters

• username username—Specifies the supplicant username (Length: 1–160 characters).

Default Configuration

Display all users.

Command Mode

Privileged EXEC mode

Example 1. The following commands displays all 802.1x users:

show dot1x users

Port

Username

----------------

-----------------

gi1/0/1

gi1/0/2

gi1/0/2

Bob

00083b798787

John

MAC
Address

--------------------

0008.3b71.1111

0008.3b79.8787

0008.3baa.0022

Auth

Auth

Session

VLAN

Method

Server

Time

-------

----------

---------

----------

1020

802.1x

Remote

09:01:00

MAC

WBA

Remote

00:11:12

Remote

00:27:16

Example 2. The following example displays 802.1X user with supplicant username Bob:

switchxxxxxx# show dot1x users username Bob

Port

Username

MAC Address

Auth

Auth

Session

VLAN

----------------

---------------

--------------------

Method

Server

Time

-------

gi1/0/1

Bob

0008.3b71.1111

----------

---------

----------

1020

802.1x

Remote

09:01:00

Cisco Business Switches 350 Series CLI Guide

78

802-1x Commands

username (dot1x credentials)

username (dot1x credentials)

To specify a username for an 802.1X credential structure, use the username command in Dot1x credentials
configuration mode. To remove the username, use the no form of this command.

Syntax

username username

no username

Parameters

• username—The user name up to 32 characters.

Default Configuration

A username is not specified.

Command Mode

Dot1x credentials configuration mode

User Guidelines

An 802.1X credential structure is necessary when configuring a supplicant (client). This credentials structure
may contain a username, password, and description.

Example

The following example configures an 802.1X credential structure:

switchxxxxxx(config)# dot1x credentials site-A
switchxxxxxx(config-dot1x-cred)# username inner-switch
switchxxxxxx(config-dot1x-cred)# password 87%$#bgd98^
switchxxxxxx(config-dot1x-cred)# description This credentials profile should be used to
connected to site-A

Cisco Business Switches 350 Series CLI Guide

79

username (dot1x credentials)

802-1x Commands

Cisco Business Switches 350 Series CLI Guide

80

ACL Commands

This chapter contains the following sections:

• ip access-list (IP extended), on page 82
• permit ( IP ), on page 83
• deny ( IP ), on page 86
• ipv6 access-list (IPv6 extended), on page 89
• permit ( IPv6 ), on page 90
• deny ( IPv6 ), on page 93
• mac access-list, on page 96
• permit ( MAC ), on page 97
• deny (MAC), on page 99
• service-acl input, on page 101
• service-acl output, on page 103
• time-range, on page 104
• absolute, on page 106
• periodic, on page 107
• show time-range, on page 108
• show access-lists, on page 109
• clear access-lists counters, on page 110
• show interfaces access-lists trapped packets, on page 111
• ip access-list (IP standard), on page 112
• ipv6 access-list (IP standard), on page 114

Cisco Business Switches 350 Series CLI Guide

81

ip access-list (IP extended)

ACL Commands

ip access-list (IP extended)

Use the ip access-list extended Global Configuration mode command to name an IPv4 access list (ACL) and
to place the device in IPv4 Access List Configuration mode. All commands after this command refer to this
ACL. The rules (ACEs) for this ACL are defined in the permit ( IP ), on page 83 and deny ( IP ), on page 86
commands. The service-acl input, on page 101 command is used to attach this ACL to an interface.

Use the no form of this command to remove the access list.

Syntax

ip access-list extended acl-name

no ip access-list extended acl-name

Parameters

• acl-name—Name of the IPv4 access list. (Range 1-32 characters)

Default Configuration

No IPv4 access list is defined.

Command Mode

Global Configuration mode

User Guidelines

An IPv4 ACL is defined by a unique name. IPv4 ACL, IPv6 ACL, MAC ACL or policy maps cannot have
the same name.

Example

switchxxxxxx(config)# ip access-list extended server
switchxxxxxx(config-ip-al)#

Cisco Business Switches 350 Series CLI Guide

82

ACL Commands

permit ( IP )

permit ( IP )

Use the permit IP Access-list Configuration mode command to set permit conditions for an IPv4 access list
(ACL). Permit conditions are also known as access control entries (ACEs). Use the no form of the command
to remove the access control entry.

Syntax

permit protocol {any | source source-wildcard} {any | destination destination-wildcard} [ace-priority
priority] [dscp number | precedence number] [time-range time-range-name] [log-input]

permit icmp {any | source source-wildcard} {any | destination destination-wildcard} [any | icmp-type] [any
| icmp-code]] [ace-priority priority] [dscp number | precedence number] [time-range time-range-name]
[log-input]

permit igmp {any | source source-wildcard} {any | destination destination-wildcard}[igmp-type] [ace-priority
priority] [dscp number | precedence number] [time-range time-range-name] [log-input]

permit tcp {any | source source-wildcard} {any|source-port/port-range}{any | destination
destination-wildcard} {any|destination-port/port-range} [ace-priority priority] [dscp number | precedence
number] [match-all list-of-flags] [time-range time-range-name] [log-input]

permit udp {any | source source-wildcard} {any|source-port/port-range} {any | destination
destination-wildcard} {any|destination-port/port-range} [ace-priority priority] [dscp number | precedence
number] [time-range time-range-name] [log-input]

no permit protocol {any | source source-wildcard} {any | destination destination-wildcard} [dscp number
| precedence number] [time-range time-range-name] [log-input]

no permit icmp {any | source source-wildcard} {any | destination destination-wildcard} [any | icmp-type]
[any | icmp-code]] [dscp number | precedence number] [time-range time-range-name] [log-input]

no permit igmp {any | source source-wildcard} {any | destination destination-wildcard}[igmp-type] [dscp
number | precedence number] [time-range time-range-name] [log-input]

no permit tcp {any | source source-wildcard} {any|source-port/port-range}{any | destination
destination-wildcard} {any|destination-port/port-range} [dscp number | precedence number] [match-all
list-of-flags] [time-range time-range-name] [log-input]

no permit udp {any | source source-wildcard} {any|source-port/port-range} {any | destination
destination-wildcard} {any|destination-port/port-range} [dscp number | precedence number] [time-range
time-range-name] [log-input]

Parameters

• protocol—The name or the number of an IP protocol. Available protocol names are: icmp, igmp, ip, tcp,
egp, igp, udp, hmp, rdp, idpr, ipv6, ipv6:rout, ipv6:frag, idrp, rsvp, gre, esp, ah, ipv6:icmp, eigrp, ospf,
ipinip, pim, l2tp, isis. To match any protocol, use the ip keyword.(Range: 0–255)

• source—Source IP address of the packet.

• source-wildcard—Wildcard bits to be applied to the source IP address. Use ones in the bit position that

you want to be ignored.

• destination—Destination IP address of the packet.

Cisco Business Switches 350 Series CLI Guide

83

permit ( IP )

ACL Commands

• destination-wildcard—Wildcard bits to be applied to the destination IP address. Use ones in the bit

position that you want to be ignored.

• priority - Specify the priority of the access control entry (ACE) in the access control list (ACL). "1"

value represents the highest priority and "2147483647" number represents the lowest priority.(Range:
1-2147483647)

• dscp number—Specifies the DSCP value.

• precedence number—Specifies the IP precedence value.

• icmp-type—Specifies an ICMP message type for filtering ICMP packets. Enter a number or one of the
following values: echo-reply, destination-unreachable, source-quench, redirect, alternate-host-address,
echo-request, router-advertisement, router-solicitation, time-exceeded, parameter-problem, timestamp,
timestamp-reply, information-request, information-reply, address-mask-request, address-mask-reply,
traceroute, datagram-conversion-error, mobile-host-redirect, mobile-registration-request,
mobile-registration-reply, domain-name-request, domain-name-reply, skip, photuris. (Range: 0–255)

• icmp-code—Specifies an ICMP message code for filtering ICMP packets. (Range: 0–255)

• igmp-type—IGMP packets can be filtered by IGMP message type. Enter a number or one of the following
values: host-query, host-report, dvmrp, pim, cisco-trace, host-report-v2, host-leave-v2, host-report-v3.
(Range: 0–255)

• destination-port—Specifies the UDP/TCP destination port. You can enter range of ports by using hyphen.
E.g. 20 - 21. For TCP enter a number or one of the following values: bgp (179), chargen (19), daytime
(13), discard (9), domain (53), drip (3949), echo (7), finger (79), ftp (21), ftp-data (20), gopher (70),
hostname (42), irc (194), klogin (543), kshell (544), lpd (515), nntp (119), pop2 (109), pop3 (110), smtp
(25), sunrpc (1110, syslog (514), tacacs-ds (49), talk (517), telnet (23), time (37), uucp (117), whois (43),
www (80). For UDP enter a number or one of the following values: biff (512), bootpc (68), bootps (67),
discard (9), dnsix (90), domain (53), echo (7), mobile-ip (434), nameserver (42), netbios-dgm (138),
netbios-ns (137), on500-isakmp (4500), ntp (123), rip (520), snmp (161), snmptrap (162), sunrpc (111),
syslog (514), tacacs-ds (49), talk (517), tftp (69), time (37), who (513), xdmcp (177).(Range: 0–65535).

• source-port—Specifies the UDP/TCP source port. Predefined port names are defined in the destination-port

parameter. (Range: 0–65535)

• match-all list-of-flags—List of TCP flags that should occur. If a flag should be set, it is prefixed by “+”.
If a flag should be unset, it is prefixed by “-”. Available options are +urg, +ack, +psh, +rst, +syn, +fin,
-urg, -ack, -psh, -rst, -syn and -fin. The flags are concatenated to a one string. For example: +fin-ack.

• time-range-name—Name of the time range that applies to this permit statement. (Range: 1–32)

• log-input—Specifies sending an informational SYSLOG message about the packet that matches the

entry. Because forwarding/dropping is done in hardware and logging is done in software, if a large number
of packets match an ACE containing a log-input keyword, the software might not be able to match the
hardware processing rate, and not all packets will be logged.

Default Configuration

No IPv4 access list is defined.

Command Mode

IP Access-list Configuration mode

Cisco Business Switches 350 Series CLI Guide

84

ACL Commands

permit ( IP )

User Guidelines

If a range of ports is used for source port in an ACE, it is not counted again, if it is also used for a source port
in another ACE. If a range of ports is used for the destination port in an ACE, it is not counted again if it is
also used for destination port in another ACE.

If a range of ports is used for source port it is counted again if it is also used for destination port.

If ace-priority is omitted, the system sets the rule's priority to the current highest priority ACE (in the current
ACL) + 20. The ACE-priority must be unique per ACL.If the user types already existed priority, then the
command is rejected.

Example

switchxxxxxx(config)# ip access-list extended server
switchxxxxxx(config-ip-al)# permit ip 176.212.0.0 00.255.255 any

Cisco Business Switches 350 Series CLI Guide

85

deny ( IP )

deny ( IP )

ACL Commands

Use the deny IP Access-list Configuration mode command to set deny conditions for IPv4 access list. Deny
conditions are also known as access control entries (ACEs). Use the no form of the command to remove the
access control entry.

Syntax

deny protocol {any | source source-wildcard} {any | destination destination-wildcard} [ace-priority priority]
[dscp number | precedence number] [time-range time-range-name] [disable-port|log-input ]

deny icmp {any | source source-wildcard} {any | destination destination-wildcard} [any | icmp-type] [any
| icmp-code]][ace-priority priority] [dscp number | precedence number][time-range time-range-name]
[disable-port |log-input ]

deny igmp {any | source source-wildcard} {any | destination destination-wildcard}[igmp-type][ace-priority
priority] [dscp number | precedence number][time-range time-range-name] [disable-port |log-input ]

deny tcp {any | source source-wildcard} {any|source-port/port-range}{any | destination destination-wildcard}
{any|destination-port/port-range} [ace-priority priority] [dscp number | precedence number][match-all
list-of-flags][time-range time-range-name] [disable-port |log-input ]

deny udp {any | source source-wildcard} {any|source-port/port-range} {any | destination
destination-wildcard} {any|destination-port/port-range} [ace-priority priority] [dscp number | precedence
number][time-range time-range-name] [disable-port |log-input ]

no deny protocol {any | source source-wildcard} {any | destination destination-wildcard} [dscp number |
precedence number][time-range time-range-name] [disable-port |log-input ]

no deny icmp {any | source source-wildcard} {any | destination destination-wildcard} [any | icmp-type]
[any | icmp-code]] [dscp number | precedence number][time-range time-range-name] [disable-port |log-input
]

no deny igmp {any | source source-wildcard} {any | destination destination-wildcard}[igmp-type] [dscp
number | precedence number][time-range time-range-name] [disable-port |log-input ]

no deny tcp {any | source source-wildcard} {any|source-port/port-range}{any | destination
destination-wildcard} {any|destination-port/port-range} [dscp number | precedence number][match-all
list-of-flags] [time-range time-range-name] [disable-port |log-input ]

no deny udp {any | source source-wildcard} {any|source-port/port-range} {any | destination
destination-wildcard} {any|destination-port/port-range} [dscp number | precedence number][time-range
time-range-name] [disable-port |log-input ]

Parameters

• protocol—The name or the number of an IP protocol. Available protocol names: icmp, igmp, ip, tcp,

egp, igp, udp, hmp, rdp, idpr, ipv6, ipv6:rout, ipv6:frag, idrp, rsvp, gre, esp, ah, ipv6:icmp, eigrp, ospf,
ipinip, pim, l2tp, isis. To match any protocol, use the Ip keyword. (Range: 0–255)

• source—Source IP address of the packet.

• source-wildcard—Wildcard bits to be applied to the source IP address. Use 1s in the bit position that

you want to be ignored.

• destination—Destination IP address of the packet.

Cisco Business Switches 350 Series CLI Guide

86

ACL Commands

deny ( IP )

• destination-wildcard—Wildcard bits to be applied to the destination IP address. Use 1s in the bit position

that you want to be ignored.

• priority - Specify the priority of the access control entry (ACE) in the access control list (ACL). "1"

value represents the highest priority and "2147483647" number represents the lowest priority.(Range:
1-2147483647)

• dscp number—Specifies the DSCP value.

• precedence number—Specifies the IP precedence value.

• icmp-type—Specifies an ICMP message type for filtering ICMP packets. Enter a number or one of the
following values: echo-reply, destination-unreachable, source-quench, redirect, alternate-host-address,
echo-request, router-advertisement, router-solicitation, time-exceeded, parameter-problem, timestamp,
timestamp-reply, information-request, information-reply, address-mask-request, address-mask-reply,
traceroute, datagram-conversion-error, mobile-host-redirect, mobile-registration-request,
mobile-registration-reply, domain-name-request, domain-name-reply, skip, photuris. (Range: 0–255)

• icmp-code—Specifies an ICMP message code for filtering ICMP packets. (Range: 0–255)

• igmp-type—IGMP packets can be filtered by IGMP message type. Enter a number or one of the following
values: host-query, host-report, dvmrp, pim, cisco-trace, host-report-v2, host-leave-v2, host-report-v3.
(Range: 0–255)

• destination-port—Specifies the UDP/TCP destination port. You can enter range of ports by using hyphen.
E.g. 20 - 21. For TCP enter a number or one of the following values: bgp (179), chargen (19), daytime
(13), discard (9), domain (53), drip (3949), echo (7), finger (79), ftp (21), ftp-data (20), gopher (70),
hostname (42), irc (194), klogin (543), kshell (544), lpd (515), nntp (119), pop2 (109), pop3 (110), smtp
(25), sunrpc (1110, syslog (514), tacacs-ds (49), talk (517), telnet (23), time (37), uucp (117), whois (43),
www (80). For UDP enter a number or one of the following values: biff (512), bootpc (68), bootps (67),
discard (9), dnsix (90), domain (53), echo (7), mobile-ip (434), nameserver (42), netbios-dgm (138),
netbios-ns (137), non500-isakmp (4500), ntp (123), rip (520), snmp 161), snmptrap (162), sunrpc (111),
syslog (514), tacacs-ds (49), talk (517), tftp (69), time (37), who (513), xdmcp (177). (Range: 0–65535)

• source-port—Specifies the UDP/TCP source port. Predefined port names are defined in the destination-port

parameter. (Range: 0–65535)

• match-all list-of-flags—List of TCP flags that should occur. If a flag should be set it is prefixed by “+”.If
a flag should be unset it is prefixed by “-”. Available options are +urg, +ack, +psh, +rst, +syn, +fin, -urg,
-ack, -psh, -rst, -syn and -fin. The flags are concatenated to a one string. For example: +fin-ack.

• time-range-name—Name of the time range that applies to this permit statement. (Range: 1–32)

• disable-port—The Ethernet interface is disabled if the condition is matched.

• log-input—Specifies sending an informational syslog message about the packet that matches the entry.
Because forwarding/dropping is done in hardware and logging is done in software, if a large number of
packets match an ACE containing a log-input keyword, the software might not be able to match the
hardware processing rate, and not all packets will be logged.

Default Configuration

No IPv4 access list is defined.

Cisco Business Switches 350 Series CLI Guide

87

deny ( IP )

ACL Commands

Command Mode

IP Access-list Configuration mode

User Guidelines

The number of TCP/UDP ranges that can be defined in ACLs is limited. If a range of ports is used for a source
port in ACE it is not counted again if it is also used for source port in another ACE. If a range of ports is used
for destination port in ACE it is not counted again if it is also used for destination port in another ACE.

If a range of ports is used for source port, it is counted again if it is also used for destination port.

If ace-priority is omitted, the system sets the rule's priority to the current highest priority ACE (in the current
ACL) + 20. The ACE-priority must be unique per ACL.If the user types already existed priority, then the
command is rejected.

Example

switchxxxxxx(config)# ip access-list extended server
switchxxxxxx(config-ip-al)# deny ip 176.212.0.0 00.255.255 any

Cisco Business Switches 350 Series CLI Guide

88

ACL Commands

ipv6 access-list (IPv6 extended)

ipv6 access-list (IPv6 extended)

Use the ipv6 access-list Global Configuration mode command to define an IPv6 access list (ACL) and to
place the device in Ipv6 Access-list Configuration mode. All commands after this command refer to this ACL.

Use the no form of this command to remove the access list.

Syntax

ipv6 access-list [acl-name]

no ipv6 access-list [acl-name]

Parameters

acl-name—Name of the IPv6 access list. Range 1-32 characters.

Default Configuration

No IPv6 access list is defined.

Command Mode

Global Configuration mode

User Guidelines

IPv6 ACL is defined by a unique name. IPv4 ACL, IPv6 ACL, MAC ACL or policy maps cannot have the
same name.

Every IPv6 ACL has an implicit permit icmp any any nd-ns any, permit icmp any any nd-na any, and
deny ipv6 any any statements as its last match conditions. (The former two match conditions allow for
ICMPv6 neighbor discovery.)

The IPv6 neighbor discovery process uses the IPv6 network layer service, therefore, by default, IPv6 ACLs
implicitly allow IPv6 neighbor discovery packets to be sent and received on an interface. In IPv4, the Address
Resolution Protocol (ARP), which is equivalent to the IPv6 neighbor discovery process, uses a separate data
link layer protocol; therefore, by default, IPv4 ACLs implicitly allow ARP packets to be sent and received
on an interface.

Example

switchxxxxxx(config)# ipv6 access-list acl1
switchxxxxxx(config-ip-al)# permit tcp 2001:0DB8:0300:0201::/64 any any 80

Cisco Business Switches 350 Series CLI Guide

89

permit ( IPv6 )

permit ( IPv6 )

ACL Commands

Use the permit command in Ipv6 Access-list Configuration mode to set permit conditions (ACEs) for IPv6
ACLs. Use the no form of the command to remove the access control entry.

Syntax

permit protocol {any |{source-prefix/length}{any | destination-prefix/length} [ace-priority priority][dscp
number | precedence number] [time-range time-range-name] [log-input] [flow-label flow-label-value]

permit icmp {any | {source-prefix/length}{any | destination-prefix/length} {any|icmp-type} {any|icmp-code}
[ace-priority priority][dscp number | precedence number] [time-range time-range-name] [log-input]
[flow-label flow-label-value]

permit tcp {any | {source-prefix/length} {any | source-port}}{any | destination-prefix/length} {any |
destination-port} [ace-priority priority][dscp number | precedence number] [match-all list-of-flags]
[time-range time-range-name] [log-input] [flow-label flow-label-value]

permit udp {any | {source-prefix/length}} {any | source-port}}{any | destination-prefix/length} {any |
destination-port} [ace-priority priority][dscp number | precedence number][time-range time-range-name]
[log-input] [flow-label flow-label-value]

no permit protocol {any |{source-prefix/length}{any | destination-prefix/length} [dscp number | precedence
number] [time-range time-range-name] [log-input] [flow-label flow-label-value]

no permit icmp {any | {source-prefix/length}{any | destination-prefix/length} {any|icmp-type}
{any|icmp-code} [dscp number | precedence number] [time-range time-range-name] [log-input] [flow-label
flow-label-value]

no permit tcp {any | {source-prefix/length} {any | source-port}}{any | destination- prefix/length} {any|
destination-port} [dscp number | precedence number] [match-all list-of-flags] [time-range time-range-name]
[log-input] [flow-label flow-label-value]

no permit udp {any | {source-prefix/length}} {any | source-port}}{any | destination-prefix/length} {any|
destination-port} [dscp number | precedence number] [time-range time-range-name] [log-input] [flow-label
flow-label-value]

Parameters

• protocol—The name or the number of an IP protocol. Available protocol names are: icmp (58), tcp (6)

and udp (17). To match any protocol, use the ipv6 keyword. (Range: 0–255)

• source-prefix / lenght—The source IPv6 network or class of networks about which to set permit

conditions. This argument must be in the form documented in RFC 3513 where the address is specified
in hexadecimal using 16-bit values between colons.

• destination-prefix/ lenght—The destination IPv6 network or class of networks about which to set permit
conditions. This argument must be in the form documented in RFC 3513 where the address is specified
in hexadecimal using 16-bit values between colons.

• priority - Specify the priority of the access control entry (ACE) in the access control list (ACL). "1"

value represents the highest priority and "2147483647" number represents the lowest priority.(Range:
1-2147483647)

• dscp number—Specifies the DSCP value. (Range: 0–63)

Cisco Business Switches 350 Series CLI Guide

90

ACL Commands

permit ( IPv6 )

• precedence number—Specifies the IP precedence value.

• icmp-type—Specifies an ICMP message type for filtering ICMP packets. Enter a number or one of the
following values: destination-unreachable (1), packet-too-big (2), time-exceeded (3), parameter-problem
(4), echo-request (128), echo-reply (129), mld-query (130), mld-report (131), mldv2-report (143),
mld-done (132), router-solicitation (133), router-advertisement (134), nd-ns (135), nd-na (136). (Range:
0–255)

• icmp-code—Specifies an ICMP message code for filtering ICMP packets. (Range: 0–255)

• destination-port—Specifies the UDP/TCP destination port. For TCP enter a number or one of the

following values: bgp (179), chargen (19), daytime (13), discard (9), domain (53), drip (3949), echo (7),
finger (79), ftp (21), ftp-data (20), gopher (70), hostname (42), irc (194), klogin (543), kshell (544), lpd
(515), nntp (119), pop2 (109), pop3 (110), smtp (25), sunrpc (1110, syslog (514), tacacs-ds (49), talk
(517), telnet (23), time (37), uucp (117), whois (43), www (80). For UDP enter a number or one of the
following values: biff (512), bootpc (68), bootps (67), discard (9), dnsix (90), domain (53), echo (7),
mobile-ip (434), nameserver (42), netbios-dgm (138), netbios-ns (137), non500-isakmp (4500), ntp (123),
rip (520), snmp (161), snmptrap (162), sunrpc (111), syslog (514), tacacs (49), talk (517), tftp (69), time
(37), who (513), xdmcp (177). (Range: 0–65535)

• source-port—Specifies the UDP/TCP source port. Predefined port names are defined in the destination-port

parameter. (Range: 0–65535)

• match-all list-of-flag —List of TCP flags that should occur. If a flag should be set it is prefixed by “+”.If
a flag should be unset it is prefixed by “-”. Available options are +urg, +ack, +psh, +rst, +syn, +fin, -urg,
-ack, -psh, -rst, -syn and -fin. The flags are concatenated to a one string. For example: +fin-ack.

• time-range-name—Name of the time range that applies to this permit statement. (Range: 1–32)

• log-input—Specifies sending an informational SYSLOG message about the packet that matches the

entry. Because forwarding/dropping is done in hardware and logging is done in software, if a large number
of packets match an ACE containing a log-input keyword, the software might not be able to match the
hardware processing rate, and not all packets will be logged.

• flow-label flow-label-value—Specifies the IPv6 Flow Label value. A value of these arguments must be

in range 0–1048575.

Default Configuration

No IPv6 access list is defined.

Command Mode

Ipv6 Access-list Configuration mode

User Guidelines

If ace-priority is omitted, the system sets the rule's priority to the current highest priority ACE (in the current
ACL) + 20. The ACE-priority must be unique per ACL.If the user types already existed priority, then the
command is rejected.

Flow label and port range cannot be configured together.

Flow label cannot be configured into an output ACL.

Example 1. This example defines an ACL by the name of server and enters a rule (ACE) for tcp packets.

Cisco Business Switches 350 Series CLI Guide

91

permit ( IPv6 )

ACL Commands

switchxxxxxx(config)# ipv6 access-list server
switchxxxxxx(config-ipv6-al)# permit tcp 3001::2/64 any any 80

Example 2. This example defines an ACL with the flow-label keyword:

switchxxxxxx(config)# ipv6 access-list server
switchxxxxxx(config-ipv6-al)# permit ipv6 any any flow-label 5

Cisco Business Switches 350 Series CLI Guide

92

ACL Commands

deny ( IPv6 )

deny ( IPv6 )

Use the deny command in Ipv6 Access-list Configuration mode to set deny conditions (ACEs) for IPv6 ACLs.
Use the no form of the command to remove the access control entry.

Syntax

deny protocol {any | {source-prefix/length}{any | destination-prefix/length} [ace-priority priority][dscp
number | precedence number] [time-range time-range-name] [disable-port |log-input] [flow-label
flow-label-value]

deny icmp {any | {source-prefix/length}{any | destination-prefix/length} {any|icmp-type} {any|icmp-code}
[ace-priority priority][dscp number | precedence number] [time-range time-range-name] [disable-port
|log-input] [flow-label flow-label-value]

deny tcp {any | {source-prefix/length} {any | source-port}}{any | destination-prefix/length} {any|
destination-port} [ace-priority priority][dscp number | precedence number] [match-all list-of-flags]
[time-range time-range-name] [disable-port |log-input] [flow-label flow-label-value]

deny udp {any | {source-prefix/length}} {any | source-port}}{any | destination-prefix/length} {any|
destination-port} [ace-priority priority][dscp number | precedence number] [time-range time-range-name]
[disable-port |log-input] [flow-label flow-label-value]

no deny protocol {any | {source-prefix/length}{any | destination-prefix/length} [dscp number | precedence
number] [time-range time-range-name] [disable-port |log-input] [flow-label flow-label-value]

no deny icmp {any | {source-prefix/length}{any | destination-prefix/length} {any|icmp-type} {any|icmp-code}
[dscp number | precedence number] [time-range time-range-name] [disable-port |log-input] [flow-label
flow-label-value]

no deny tcp {any | {source-prefix/length} {any | source-port}}{any | destination-prefix/length} {any|
destination-port} [dscp number | precedence number] [match-all list-of-flags] [time-range time-range-name]
[disable-port |log-input] [flow-label flow-label-value]

no deny udp {any | {source-prefix/length}} {any | source-port}}{any | destination-prefix/length} {any|
destination-port} [dscp number | precedence number] [time-range time-range-name] [disable-port |log-input]
[flow-label flow-label-value]

Parameters

• protocol—The name or the number of an IP protocol. Available protocol names are: icmp (58), tcp (6)

and udp (17). To match any protocol, use the ipv6 keyword. (Range: 0–255)

• source-prefix/length—The source IPv6 network or class of networks about which to set permit conditions.

This argument must be in the format documented in RFC 3513 where the address is specified in
hexadecimal using 16-bit values between colons.

• destination-prefix / lenght—The destination IPv6 network or class of networks about which to set permit
conditions. This argument must be in the format documented in RFC 3513 where the address is specified
in hexadecimal using 16-bit values between colons.

• priority - Specify the priority of the access control entry (ACE) in the access control list (ACL). "1"

value represents the highest priority and "2147483647" number represents the lowest priority.(Range:
1-2147483647)

Cisco Business Switches 350 Series CLI Guide

93

deny ( IPv6 )

ACL Commands

• dscp number—Specifies the DSCP value. (Range: 0–63)

• precedence number—Specifies the IP precedence value.

• icmp-type—Specifies an ICMP message type for filtering ICMP packets. Enter a number or one of the
following values: destination-unreachable (1), packet-too-big (2), time-exceeded (3), parameter-problem
(4), echo-request (128), echo-reply (129), mld-query (130), mld-report (131), mldv2-report (143),
mld-done (132), router-solicitation (133), router-advertisement (134), nd-ns (135), nd-na (136). (Range:
0–255)

• icmp-code—Specifies an ICMP message code for filtering ICMP packets. (Range: 0–255)

• destination-port—Specifies the UDP/TCP destination port. For TCP enter a number or one of the

following values: bgp (179), chargen (19), daytime (13), discard (9), domain (53), drip (3949), echo (7),
finger (79), ftp (21), ftp-data 20), gopher (70), hostname (42), irc (194), klogin (543), kshell (544), lpd
(515), nntp (119), pop2 (109), pop3 (110), smtp (25), sunrpc (1110, syslog (514), tacacs-ds (49), talk
(517), telnet (23), time (37), uucp (117), whois (43), www (80). For UDP enter a number or one of the
following values: biff (512), bootpc (68), bootps (67), discard (9), dnsix (90), domain (53), echo (7),
mobile-ip (434), nameserver (42), netbios-dgm (138), netbios-ns (137), non500-isakmp (4500), ntp (123),
rip (520), snmp (161), snmptrap (162), sunrpc (111), syslog (514), tacacs (49), talk (517), tftp (69), time
(37), who (513), xdmcp (177). (Range: 0–65535)

• source-port—Specifies the UDP/TCP source port. Predefined port names are defined in the destination-port

parameter. (Range: 0–65535)

• match-all list-of-flags—List of TCP flags that should occur. If a flag should be set it is prefixed by “+”.If
a flag should be unset it is prefixed by “-”. Available options are +urg, +ack, +psh, +rst, +syn, +fin, -urg,
-ack, -psh, -rst, -syn and -fin. The flags are concatenated to a one string. For example: +fin-ack.

• time-range-name—Name of the time range that applies to this permit statement. (Range: 1–32)

• disable-port—The Ethernet interface is disabled if the condition is matched.

• log-input—Specifies sending an informational syslog message about the packet that matches the entry.
Because forwarding/dropping is done in hardware and logging is done in software, if a large number of
packets match an ACE containing a log-input keyword, the software might not be able to match the
hardware processing rate, and not all packets will be logged.

• flow-label flow-label-value—Specifies the IPv6 Flow Label value. A value of these arguments must be

in range 0–1048575.

Default Configuration

No IPv6 access list is defined.

Command Mode

Ipv6 Access-list Configuration mode

User Guidelines

If ace-priority is omitted, the system sets the rule's priority to the current highest priority ACE (in the current
ACL) + 20. The ACE-priority must be unique per ACL.If the user types already existed priority, then the
command is rejected.

Flow label and port range cannot be configured together.

Cisco Business Switches 350 Series CLI Guide

94

ACL Commands

deny ( IPv6 )

Flow label cannot be configured into an output ACL.

Example

switchxxxxxx(config)# ipv6 access-list server
switchxxxxxx(config-ipv6-al)# deny tcp 3001::2/64 any any 80

Cisco Business Switches 350 Series CLI Guide

95

mac access-list

mac access-list

ACL Commands

Use the mac access-list Global Configuration mode command to define a Layer 2 access list (ACL) based
on source MAC address filtering and to place the device in MAC Access-list Configuration mode. All
commands after this command refer to this ACL.

Use the no form of this command to remove the access list.

Syntax

mac access-list extended acl-name

no mac access-list extended acl-name

Parameters

acl-name—Specifies the name of the MAC ACL (Range: 1–32 characters).

Default Configuration

No MAC access list is defined.

Command Mode

Global Configuration mode

User Guidelines

A MAC ACL is defined by a unique name. IPv4 ACL, IPv6 ACL, MAC ACL or policy maps cannot have
the same name. If ace-priority is omitted, the system sets the rule's priority to the current highest priority ACE
(in the current ACL) + 20. The ACE-priority must be unique per ACL.If the user types already existed priority,
then the command is rejected.

Example

switchxxxxxx(config)# mac access-list extended server1
switchxxxxxx(config-mac-al)# permit 00:00:00:00:00:01 00:00:00:00:00:ff any

Cisco Business Switches 350 Series CLI Guide

96

ACL Commands

permit ( MAC )

permit ( MAC )

Use the permit command in MAC Access-list Configuration mode to set permit conditions (ACEs) for a
MAC ACL. Use the no form of the command to remove the access control entry.

Syntax

permit {any | source source-wildcard} {any | destination destination-wildcard} [ace-priority priority][eth-type
0 | aarp | amber | dec-spanning | decnet-iv | diagnostic | dsm | etype-6000] [vlan vlan-id] [cos cos
cos-wildcard] [time-range time-range-name]

[log-input]

no permit {any | source source-wildcard} {any | destination destination-wildcard} [eth-type 0 | aarp | amber
| dec-spanning | decnet-iv | diagnostic | dsm | etype-6000] [vlan vlan-id] [cos cos cos-wildcard] [time-range
time-range-name]

[log-input]

Parameters

• source—Source MAC address of the packet.

• source-wildcard—Wildcard bits to be applied to the source MAC address. Use 1s in the bit position that

you want to be ignored.

• destination—Destination MAC address of the packet.

• destination-wildcard—Wildcard bits to be applied to the destination MAC address. Use 1s in the bit

position that you want to be ignored.

• priority - Specify the priority of the access control entry (ACE) in the access control list (ACL). "1"

value represents the highest priority and "2147483647" number represents the lowest priority.(Range:
1-2147483647)

• eth-type—The Ethernet type in hexadecimal format of the packet.

• vlan-id—The VLAN ID of the packet. (Range: 1–4094)

• cos—The Class of Service of the packet. (Range: 0–7)

• cos-wildcard—Wildcard bits to be applied to the CoS.

• time-range-name—Name of the time range that applies to this permit statement. (Range: 1–32)

• log-input—Specifies sending an informational SYSLOG message about the packet that matches the

entry. Because forwarding/dropping is done in hardware and logging is done in software, if a large number
of packets match an ACE containing a log-input keyword, the software might not be able to match the
hardware processing rate, and not all packets will be logged.

User Guidelines

A MAC ACL is defined by a unique name. IPv4 ACL, IPv6 ACL, MAC ACL or policy maps cannot have
the same name If ace-priority is omitted, the system sets the rule's priority to the current highest priority ACE

Cisco Business Switches 350 Series CLI Guide

97

permit ( MAC )

ACL Commands

(in the current ACL) + 20. The ACE-priority must be unique per ACL.If the user types already existed priority,
then the command is rejected.

Default Configuration

No MAC access list is defined.

Command Mode

MAC Access-list Configuration mode

Example

switchxxxxxx(config)# mac access-list extended server1
switchxxxxxx(config-mac-al)# permit 00:00:00:00:00:01 00:00:00:00:00:ff any

Cisco Business Switches 350 Series CLI Guide

98

ACL Commands

deny (MAC)

deny (MAC)

Use the deny command in MAC Access-list Configuration mode to set deny conditions (ACEs) for a MAC
ACL. Use the no form of the command to remove the access control entry.

Syntax

deny {any | source source-wildcard} {any | destination destination-wildcard} [ace-priority priority][{eth-type
0}| aarp | amber | dec-spanning | decnet-iv | diagnostic | dsm | etype-6000] [vlan vlan-id] [cos cos
cos-wildcard] [time-range time-range-name] [disable-port |log-input ]

no deny {any | source source-wildcard} {any | destination destination-wildcard} [{eth-type 0}| aarp | amber
| dec-spanning | decnet-iv | diagnostic | dsm | etype-6000] [vlan vlan-id] [cos cos cos-wildcard] [time-range
time-range-name] [disable-port |log-input ]

Parameters

• source—Source MAC address of the packet.

• source-wildcard—Wildcard bits to be applied to the source MAC address. Use ones in the bit position

that you want to be ignored.

• destination—Destination MAC address of the packet.

• destination-wildcard—Wildcard bits to be applied to the destination MAC address. Use 1s in the bit

position that you want to be ignored.

• priority - Specify the priority of the access control entry (ACE) in the access control list (ACL). "1"

value represents the highest priority and "2147483647" number represents the lowest priority.(Range:
1-2147483647)

• eth-type—The Ethernet type in hexadecimal format of the packet.

• vlan-id—The VLAN ID of the packet. (Range: 1–4094).

• cos—The Class of Service of the packet.(Range: 0–7).

• cos-wildcard—Wildcard bits to be applied to the CoS.

• time-range-name—Name of the time range that applies to this permit statement. (Range: 1–32)

• disable-port—The Ethernet interface is disabled if the condition is matched.

• log-input—Specifies sending an informational syslog message about the packet that matches the entry.
Because forwarding/dropping is done in hardware and logging is done in software, if a large number of
packets match an ACE containing a log-input keyword, the software might not be able to match the
hardware processing rate, and not all packets will be logged.

Default Configuration

No MAC access list is defined.

Command Mode

MAC Access-list Configuration mode

Cisco Business Switches 350 Series CLI Guide

99

deny (MAC)

ACL Commands

User Guidelines

A MAC ACL is defined by a unique name. IPv4 ACL, IPv6 ACL, MAC ACL or policy maps cannot have
the same name

If ace-priority is omitted, the system sets the rule's priority to the current highest priority ACE (in the current
ACL) + 20. The ACE-priority must be unique per ACL.If the user types already existed priority, then the
command is rejected.

Example

switchxxxxxx(config)# mac access-list extended server1
switchxxxxxx(config-mac-al)# deny 00:00:00:00:00:01 00:00:00:00:00:ff any

Cisco Business Switches 350 Series CLI Guide

100

ACL Commands

service-acl input

service-acl input

Use the service-acl input command in Interface Configuration mode to bind an access list(s) (ACL) to an
interface.

Use the no form of this command to remove all ACLs from the interface.

Syntax

sevice-acl input acl-name1 [acl-name2] [default-action {deny-any | permit-any}]

no service-acl input

Parameters

• acl-name—Specifies an ACL to apply to the interface. See the user guidelines. (Range: 1–32 characters).

• deny-any—Deny all packets (that were ingress at the port) that do not meet the rules in this ACL.

• permit-any—Forward all packets (that were ingress at the port) that do not meet the rules in this ACL.

Default Configuration

No ACL is assigned. Default action for ACL is deny-any.

Command Mode

Interface Configuration mode (Ethernet, Port-Channel,,VLAN )

User Guidelines

The following rules govern when ACLs can be bound or unbound from an interface:

• IPv4 ACLs and IPv6 ACLs can be bound together to an interface.

• A MAC ACL cannot be bound on an interface which already has an IPv4 ACL or IPv6 ACL bound to

it.

• Two ACLs of the same type cannot be bound to a port.

• An ACL cannot be bound to a port that is already bound to an ACL, without first removing the current

ACL. Both ACLs must be mentioned at the same time in this command.

• MAC ACLs that include a VLAN as match criteria cannot be bound to a VLAN.

• ACLs with time-based configuration on one of its ACEs cannot be bound to a VLAN.

• ACLs with the action Shutdown cannot be bound to a VLAN.

• When the user binds ACL to an interface, TCAM resources will be consumed. One TCAM rule for each
MAC or IP ACE and two TCAM rules for each IPv6 ACE.The TCAM consumption is always even
number, so in case of odd number of rules the consumption will be increased by 1.

• An ACL cannot be bound as input if it has been bound as output.

Cisco Business Switches 350 Series CLI Guide

101

service-acl input

ACL Commands

Example

switchxxxxxx(config)# mac access-list extended server-acl
switchxxxxxx(config-mac-al)# permit 00:00:00:00:00:01 00:00:00:00:00:ff any
switchxxxxxx(config-mac-al)# exit
switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# service-acl input server-acl default-action deny-any

Cisco Business Switches 350 Series CLI Guide

102

ACL Commands

service-acl output

service-acl output

Use the service-acl output command in Interface Configuration mode to control access to an interface on the
egress (transmit path).

Use the no form of this command to remove the access control.

Syntax

service-acl output acl-name1 [acl-name2] [default-action {deny-any | permit-any}]

no service-acl output

Parameters

• acl-name—Specifies an ACL to apply to the interface. See the user guidelines. (Range: 1–32 characters).

• deny-any—Deny all packets (on the output of port) that do not meet the rules in this ACL.

• permit-any—Forward all packets (on the output of port) that do not meet the rules in this ACL.

Default

No ACL is assigned. Default action is deny-any

Command Mode

Interface Configuration mode(Ethernet, Port-Channel).

User Guidelines

The rule actions: log-input is not supported. Trying to use it will result in an error.

The deny rule action disable-port is not supported. Trying to use it will result in an error.

IPv4 and IPv6 ACLs can be bound together on an interface.

A MAC ACL cannot be bound on an interface together with an IPv4 ACL or IPv6 ACL.

Two ACLs of the same type cannot be added to a port.

An ACL cannot be added to a port that is already bounded to an ACL, without first removing the current ACL
and binding the two ACLs together.

An ACL cannot be bound as output if it has been bound as input.

Example

This example binds an egress ACL to a port:

switchxxxxxx(config)# mac access-list extended server
switchxxxxxx(config-mac-al)# permit 00:00:00:00:00:01 00:00:00:00:00:ff any
switchxxxxxx(config-mac-al)# exit
switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# service-acl output server

Cisco Business Switches 350 Series CLI Guide

103

time-range

time-range

ACL Commands

Use the time-range Global Configuration mode command to define time ranges for different functions. In
addition, this command enters the Time-range Configuration mode. All commands after this one refer to the
time-range being defined.

This command sets a time-range name. Use the absolute, on page 106 and periodic, on page 107 commands to
actually configure the time-range.

Use the no form of this command to remove the time range from the device.

Syntax

time-range time-range-name

no time-range time-range-name

Parameters

time-range-name—Specifies the name for the time range. (Range: 1–32 characters)

Default Configuration

No time range is defined

Command Mode

Global Configuration mode

User Guidelines

If a time-range command has both absolute and periodic values specified, then the periodic items are evaluated
only after the absolute start time is reached, and are not evaluated again after the absolute end time is reached.

All time specifications are interpreted as local time.

To ensure that the time range entries take effect at the desired times, the software clock should be set by the
user or by SNTP. If the software clock is not set by the user or by SNTP, the time range ACEs are not activated.

The user cannot delete a time-range that is bound to any features.

When a time range is defined, it can be used in the following commands:

• dot1x port-control

• power inline

• operation time

• permit (IP)

• deny (IP)

• permit (IPv6)

• deny (IPv6)

• permit (MAC)

Cisco Business Switches 350 Series CLI Guide

104

ACL Commands

time-range

• deny (MAC)

Example

switchxxxxxx(config)# time-range http-allowed
console(config-time-range)#periodic mon 12:00 to wed 12:00

Cisco Business Switches 350 Series CLI Guide

105

absolute

absolute

ACL Commands

Use the absolute Time-range Configuration mode command to specify an absolute time when a time range
is in effect. Use the no form of this command to remove the time limitation.

Syntax

absolute start hh:mm day month year

no absolute start

absolute end hh:mm day month year

no absolute end

Parameters

• start—Absolute time and date that the permit or deny statement of the associated function going into

effect. If no start time and date are specified, the function is in effect immediately.

• end—Absolute time and date that the permit or deny statement of the associated function is no longer

in effect. If no end time and date are specified, the function is in effect indefinitely.

• hh:mm—Time in hours (military format) and minutes (Range: 0–23, mm: 0–5)

• day—Day (by date) in the month. (Range: 1–31)

• month—Month (first three letters by name). (Range: Jan...Dec)

• year—Year (no abbreviation) (Range: 2000–2097)

Default Configuration

There is no absolute time when the time range is in effect.

Command Mode

Time-range Configuration mode

Example

switchxxxxxx(config)# time-range http-allowed
switchxxxxxx(config-time-range)# absolute start 12:00 1 jan 2005
switchxxxxxx(config-time-range)# absolute end 12:00 31 dec 2005

Cisco Business Switches 350 Series CLI Guide

106

ACL Commands

periodic

periodic

Use the periodic Time-range Configuration mode command to specify a recurring (weekly) time range for
functions that support the time-range feature. Use the no form of this command to remove the time limitation.

Syntax

periodic day-of-the-week hh:mm to day-of-the-week hh:mm

no periodic day-of-the-week hh:mm to day-of-the-week hh:mm

periodic list hh:mm to hh:mm day-of-the-week1 [day-of-the-week2… day-of-the-week7]

no periodic list hh:mm to hh:mm day-of-the-week1 [day-of-the-week2… day-of-the-week7]

periodic list hh:mm to hh:mm all

no periodic list hh:mm to hh:mm all

Parameters

• day-of-the-week—The starting day that the associated time range is in effect. The second occurrence is
the ending day the associated statement is in effect. The second occurrence can be the following week
(see description in the User Guidelines). Possible values are: mon, tue, wed, thu, fri, sat, and sun.

• hh:mm—The first occurrence of this argument is the starting hours:minutes (military format) that the
associated time range is in effect. The second occurrence is the ending hours:minutes (military format)
the associated statement is in effect. The second occurrence can be at the following day (see description
in the User Guidelines). (Range: 0–23, mm: 0–59)

• list day-of-the-week—Specifies a list of days that the time range is in effect.

Default Configuration

There is no periodic time when the time range is in effect.

Command Mode

Time-range Configuration mode

User Guidelines

The second occurrence of the day can be at the following week, e.g. Thursday–Monday means that the time
range is effective on Thursday, Friday, Saturday, Sunday, and Monday.

The second occurrence of the time can be on the following day, e.g. “22:00–2:00”.

Example

switchxxxxxx(config)# time-range http-allowed
switchxxxxxx(config-time-range)# periodic mon 12:00 to wed 12:00

Cisco Business Switches 350 Series CLI Guide

107

show time-range

ACL Commands

show time-range

Use the show time-range User EXEC mode command to display the time range configuration.

Syntax

show time-range time-range-name

Parameters

time-range-name—Specifies the name of an existing time range.

Command Mode

User EXEC mode

Example

switchxxxxxx> show time-range
http-allowed
--------------
absolute start 12:00 1 Jan 2005 end 12:00 31 Dec 2005
periodic Monday 12:00 to Wednesday 12:00

Cisco Business Switches 350 Series CLI Guide

108

ACL Commands

show access-lists

show access-lists

Use the show access-lists Privileged EXEC mode command to display access control lists (ACLs) configured
on the switch.

Syntax

show access-lists [name]

show access-liststime-range-active [name]

Parameters

• name—Specifies the name of the ACL.(Range: 1-160 characters).

• time-range-active—Shows only the Access Control Entries (ACEs) whose time-range is currently active

(including those that are not associated with time-range).

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# show access-lists
Standard IP access list 1
Extended IP access list ACL2
permit 234 172.30.19.1 0.0.0.255 any priority 20 time-range weekdays
permit 234 172.30.23.8 0.0.0.255 any priority 40 time-range weekdays
switchxxxxxx# show access-lists time-range-active
Extended IP access list ACL1
permit 234 172.30.40.1 0.0.0.0 any priority 20
permit 234 172.30.8.8 0.0.0.0 any priority 40
Extended IP access list ACL2
permit 234 172.30.19.1 0.0.0.255 any priority 20 time-range weekdays
switchxxxxxx# show access-lists ACL1
Extended IP access list ACL1
permit 234 172.30.40.1 0.0.0.0 any priority 20
permit 234 172.30.8.8 0.0.0.0 any priority 40

Cisco Business Switches 350 Series CLI Guide

109

clear access-lists counters

ACL Commands

clear access-lists counters

Use the clear access-lists counters Privileged EXEC mode command to clear access-lists (ACLs) counters.

Syntax

clear access-lists counters [interface-id]

Parameters

interface-id—Specifies an interface ID. The interface ID can be one of the following types: Ethernet port or
port-channel.

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# clear access-lists counters gi1/0/1

Cisco Business Switches 350 Series CLI Guide

110

ACL Commands

show interfaces access-lists trapped packets

show interfaces access-lists trapped packets

Use the show interfaces access-lists trapped packets Privileged EXEC mode command to display Access
List (ACLs) trapped packets.

Syntax

show interfaces access-lists trapped packets [interface-id | port-channel-number | VLAN]

Parameters

• interface-id—Specifies an interface ID, the interface ID is an Ethernet port port-channel.

• port-channel—Specifies a port-channel.

• VLAN—Specifies a VLAN

Command Mode

Privileged EXEC mode

User Guidelines

This command shows whether packets were trapped from ACE hits with logging enable on an interface.

Example 1:

switchxxxxxx# show interfaces access-lists trapped packets
Ports/LAGs: gi1/0/1-gi1/0/3, ch1-ch3, ch4
VLANs: VLAN1, VLAN12-VLAN15
Packets were trapped globally due to lack of resources

Example 2:

switchxxxxxx# show interfaces access-lists trapped packets gi1/0/1
Packets were trapped on interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

111

ip access-list (IP standard)

ACL Commands

ip access-list (IP standard)

Use the ip access-list Global Configuration mode command to define an IP standard list. The no format of
the command removes the list.

Syntax

ip access-list access-list-name {deny|permit} {src-addr[/src-len] | any}

no ip access-list access-list-name

Parameters

• access-list-name—The name of the Standard IP access list. The name may contain maximum 32

characters.

• deny/permit—Denies/permits access if the conditions are matched.

src-addr[/src-len] | any— IP prefix defined as an IP address and length or any. The any value matches
all IP addresses. If src-len is not defined, a value of 32 is applied. A value of src-len must be in the
interval 1-32.

Default Configuration

No access list is defined.

Command Mode

Global Configuration mode

User Guidelines

Use the ip access-list command to configure IP address filtering. Access lists are configured with permit or
deny keywords to either permit or deny an IP address based on a matching condition. An implicit deny is
applied to address that does not match any access-list entry.

An access-list entry consists of an IP address and a bit mask. The bit mask is a number from 1 to 32.

Evaluation of an IP address by an access list starts with the first entry of the list and continues down the list
until a match is found. When the IP address match is found, the permit or deny statement is applied to that
address and the remainder of the list is not evaluated.

Use the no ip access-list command to delete the access list.

The IPv4 standard access list is used to filter received and sent IPv4 routing information.

Example 1 - The following example of a standard access list allows only the three specified networks.
Any IP address that does not match the access list statements will be rejected.

switchxxxxxx(config)# ip access-list 1 permit 192.168.34.0/24
switchxxxxxx(config)# ip access-list 1 permit 10.88.0.0/16
switchxxxxxx(config)# ip access-list 1 permit 10.0.0.0/8

Note: all other access is implicitly denied.

Cisco Business Switches 350 Series CLI Guide

112

ACL Commands

ip access-list (IP standard)

Example 2 - The following example of a standard access list allows access for IP addresses in the
range from 10.29.2.64 to 10.29.2.127. All IP addresses not in this range will be rejected.

switchxxxxxx(config)# ip access-list apo permit 10.29.2.64/26

Note: all other access is implicitly denied.

Example 3 - To specify a large number of individual addresses more easily, you can omit the mask
length if it is 32. Thus, the following two configuration commands are identical in effect:

switchxxxxxx(config)# ip access-list 2aa permit 10.48.0.3
switchxxxxxx(config)# ip access-list 2aa permit 10.48.0.3/32

Cisco Business Switches 350 Series CLI Guide

113

ipv6 access-list (IP standard)

ACL Commands

ipv6 access-list (IP standard)

The ipv6 access-list Global Configuration mode command defines an IPv6 standard list. The no format of
the command removes the list.

Syntax

ipv6 access-list access-list-name {deny|permit} {src-addr[/src-len] | any}

no ipv6 access-list access-list-name

Parameters

• access-list-name—The name of the Standard IPv6 access list. The name may contain maximum 32

characters.

• deny—Denies access if the conditions are matched.

• permit—Permits access if the conditions are matched.

• src-addr[/src-len] | any— IPv6 prefix defined as an IPv6 address and length or any. The any value

matches to all IPv6 addresses. If the src-len is not defined a value of 128 is applied. A value of src-len
must be in interval 1-128.

Default Configuration

no access list

Command Mode

Global Configuration mode

User Guidelines

Use the ipv6 access-list command to configure IPv6 address filtering. Access lists are configured with permit
or deny keywords to either permit or deny an IPv6 address based on a matching condition. An implicit deny
is applied to address that does not match any access-list entry.

An access-list entry consists of an IP address and a bit mask. The bit mask is a number from 1 to 128.

Evaluation of an IPv6 address by an access list starts with the first entry of the list and continues down the
list until a match is found. When the IPv6 address match is found, the permit or deny statement is applied to
that address and the remainder of the list is not evaluated.

Use the no ipv6 access-list command to delete the access list.

The IPv6 standard access list is used to filter received and sent IPv6 routing information.

Example

The following example of an access list allows only the one specified prefix: Any IPv6 address that does not
match the access list statements will be rejected.

switchxxxxxx(config)# ipv6 access-list 1 permit 3001::2/64

Cisco Business Switches 350 Series CLI Guide

114

ACL Commands

ipv6 access-list (IP standard)

Note: all other access implicitly denied.

Cisco Business Switches 350 Series CLI Guide

115

ipv6 access-list (IP standard)

ACL Commands

Cisco Business Switches 350 Series CLI Guide

116

Address Table Commands

This chapter contains the following sections:

• bridge multicast filtering, on page 119
• bridge multicast mode, on page 120
• bridge multicast address, on page 122
• bridge multicast forbidden address, on page 123
• bridge multicast ip-address, on page 124
• bridge multicast forbidden ip-address, on page 126
• bridge multicast source group, on page 127
• bridge multicast forbidden source group, on page 128
• bridge multicast ipv6 mode, on page 129
• bridge multicast ipv6 ip-address, on page 131
• bridge multicast ipv6 forbidden ip-address, on page 132
• bridge multicast ipv6 source group, on page 133
• bridge multicast ipv6 forbidden source group, on page 134
• bridge multicast unregistered, on page 135
• bridge multicast forward-all, on page 136
• bridge multicast forbidden forward-all, on page 137
• bridge unicast unknown, on page 138
• show bridge unicast unknown , on page 139
• mac address-table static , on page 140
• clear mac address-table , on page 142
• mac address-table aging-time , on page 143
• port security, on page 144
• port security mode, on page 146
• port security max, on page 147
• port security routed secure-address, on page 148
• show mac address-table , on page 149
• show mac address-table count , on page 151
• show bridge multicast mode, on page 153
• show bridge multicast address-table, on page 154
• show bridge multicast address-table static, on page 156
• show bridge multicast filtering, on page 158
• bridge multicast unregistered, on page 159

Cisco Business Switches 350 Series CLI Guide

117

Address Table Commands

• show ports security, on page 160
• show ports security addresses, on page 161
• bridge multicast reserved-address, on page 162
• show bridge multicast reserved-addresses, on page 164

Cisco Business Switches 350 Series CLI Guide

118

Address Table Commands

bridge multicast filtering

bridge multicast filtering

To enable the filtering of Multicast addresses, use the bridge multicast filtering Global Configuration mode
command. To disable Multicast address filtering, use the no form of this command.

Syntax

bridge multicast filtering

no bridge multicast filtering

Parameters

This command has no arguments or keywords.

Default Configuration

Multicast address filtering is disabled. All Multicast addresses are flooded to all ports.

Command Mode

Global Configuration mode

User Guidelines

When this feature is enabled, unregistered Multicast traffic (as opposed to registered) will still be flooded.

All registered Multicast addresses will be forwarded to the Multicast groups.

Example

The following example enables bridge Multicast filtering.

switchxxxxxx(config)# bridge multicast filtering

Cisco Business Switches 350 Series CLI Guide

119

bridge multicast mode

Address Table Commands

bridge multicast mode

To configure the Multicast bridging mode, use the bridge multicast mode Interface (VLAN) Configuration
mode command. To return to the default configuration, use the no form of this command.

Syntax

bridge multicast mode {mac-group | ipv4-group | ipv4-src-group}

no bridge multicast mode

Parameters

• mac-group—Specifies that Multicast bridging is based on the packet's VLAN and MAC address.

• ipv4-group—Specifies that Multicast bridging is based on the packet's VLAN and MAC address for

non-IPv4 packets, and on the packet's VLAN and IPv4 destination address for IPv4 packets.

• ipv4-src-group—Specifies that Multicast bridging is based on the packet's VLAN and MAC address

for non-IPv4 packets, and on the packet's VLAN, IPv4 destination address and IPv4 source address for
IPv4 packets.

Default Configuration

The default mode is mac-group.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Use the mac-group option when using a network management system that uses a MIB based on the Multicast
MAC address. Otherwise, it is recommended to use the ipv4 mode, because there is no overlapping of IPv4
Multicast addresses in these modes.

The following table describes the actual data that is written to the Forwarding Data Base (FDB) as a function
of the IGMP version that is used in the network:

FDB mode

mac-group

ipv4-group

IGMP version 2

IGMP version 3

MAC group address

MAC group address

IP group address

IP group address

ipv4-src-group

(*)

IP source and group addresses

(*) Note that (*,G) cannot be written to the FDB if the mode is ipv4-src-group. In that case, no new FDB
entry is created, but the port is added to the static (S,G) entries (if they exist) that belong to the requested
group. It is recommended to set the FDB mode to ipv4-group or mac-group for IGMP version 2.

If an application on the device requests (*,G), the operating FDB mode is changed to ipv4-group.

Cisco Business Switches 350 Series CLI Guide

120

Address Table Commands

bridge multicast mode

Example

The following example configures the Multicast bridging mode as an mac-group on VLAN 2.

switchxxxxxx(config)# interface vlan 2
switchxxxxxx(config-if)# bridge multicast mode mac-group

Cisco Business Switches 350 Series CLI Guide

121

bridge multicast address

Address Table Commands

bridge multicast address

To register a MAC-layer Multicast address in the bridge table and statically add or remove ports to or from
the group, use the bridge multicast address Interface (VLAN) Configuration mode command. To unregister
the MAC address, use the no form of this command.

Syntax

bridge multicast address {mac-multicast-address | ipv4-multicast-address} [{add | remove} {ethernet
interface-list | port-channel port-channel-list}]

no bridge multicast address mac-multicast-address

Parameters

• mac-multicast-address | ipv4-multicast-address—Specifies the group Multicast address.

• add—(Optional) Adds ports to the group.

• remove—(Optional) Removes ports from the group.

• ethernet interface-list—(Optional) Specifies a list of Ethernet ports. Separate nonconsecutive Ethernet

ports with a comma and no spaces. Use a hyphen to designate a range of ports.

• port-channel port-channel-list—(Optional) Specifies a list of port channels. Separate nonconsecutive

port-channels with a comma and no spaces; use a hyphen to designate a range of port channels.

Default Configuration

No Multicast addresses are defined.

If ethernet interface-list or port-channel port-channel-list is specified without specifying add or remove,
the default option is add.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

To register the group in the bridge database without adding or removing ports or port channels, specify the
mac-multicast-address parameter only.

Static Multicast addresses can be defined on static VLANs only. You can execute the command before the
VLAN is created.

Example 1 - The following example registers the MAC address to the bridge table:

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast address 01:00:5e:02:02:03

Example 2 - The following example registers the MAC address and adds ports statically.

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast address 01:00:5e:02:02:03 add gi1/0/1-2

Cisco Business Switches 350 Series CLI Guide

122

Address Table Commands

bridge multicast forbidden address

bridge multicast forbidden address

To forbid adding or removing a specific Multicast address to or from specific ports, use the bridge multicast
forbidden address IInterface (VLAN) Configuration mode command. To restore the default configuration,
use the no form of this command.

Syntax

bridge multicast forbidden address {mac-multicast-address | ipv4-multicast-address} {add | remove}
{ethernet interface-list | port-channel port-channel-list}

no bridge multicast forbidden address mac-multicast-address

Parameters

• mac-multicast-address | ipv4-multicast-address—Specifies the group Multicast address.

• add—Forbids adding ports to the group.

• remove—Forbids removing ports from the group.

• ethernet interface-list—Specifies a list of Ethernet ports. Separate nonconsecutive Ethernet ports with

a comma and no spaces. Use a hyphen to designate a range of ports.

• port-channel port-channel-list—Specifies a list of port channels. Separate nonconsecutive port-channels

with a comma and no spaces. Use a hyphen to designate a range of port channels.

Default Configuration

No forbidden addresses are defined.

Default option is add.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Before defining forbidden ports, the Multicast group should be registered, using bridge multicast address.

You can execute the command before the VLAN is created.

Example

The following example forbids MAC address 0100.5e02.0203 on port gi1/0/4 within VLAN 8.

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast address 0100.5e02.0203
switchxxxxxx(config-if)# bridge multicast forbidden address 0100.5e02.0203 add gi1/0/4

Cisco Business Switches 350 Series CLI Guide

123

bridge multicast ip-address

Address Table Commands

bridge multicast ip-address

To register IP-layer Multicast addresses to the bridge table, and statically add or remove ports to or from the
group, use the bridge multicast ip-address IInterface (VLAN) Configuration mode command. To unregister
the IP address, use the no form of this command.

Syntax

bridge multicast ip-address ip-multicast-address [[add | remove] {interface-list | port-channel
port-channel-list}]

no bridge multicast ip-address ip-multicast-address

Parameters

• ip-multicast-address—Specifies the group IP Multicast address.

• add—(Optional) Adds ports to the group.

• remove—(Optional) Removes ports from the group.

• interface-list—(Optional) Specifies a list of Ethernet ports. Separate nonconsecutive Ethernet ports with

a comma and no spaces. Use a hyphen to designate a range of ports.

• port-channel port-channel-list—(Optional) Specifies a list of port channels. Separate nonconsecutive

port-channels with a comma and no spaces. Use a hyphen to designate a range of port channels.

Default Configuration

No Multicast addresses are defined.

Default option is add.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

To register the group in the bridge database without adding or removing ports or port channels, specify the
ip-multicast-address parameter only.

Static Multicast addresses can be defined on static VLANs only.

You can execute the command before the VLAN is created.

Example

The following example registers the specified IP address to the bridge table:

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast ip-address 239.2.2.2

The following example registers the IP address and adds ports statically.

Cisco Business Switches 350 Series CLI Guide

124

Address Table Commands

bridge multicast ip-address

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast ip-address 239.2.2.2 add gi1/0/4

Cisco Business Switches 350 Series CLI Guide

125

bridge multicast forbidden ip-address

Address Table Commands

bridge multicast forbidden ip-address

To forbid adding or removing a specific IP Multicast address to or from specific ports, use the bridge multicast
forbidden ip-address Interface (VLAN) Configuration mode command. To restore the default configuration,
use the no form of this command.

Syntax

bridge multicast forbidden ip-address {ip-multicast-address} {add | remove} {ethernet interface-list |
port-channel port-channel-list}

no bridge multicast forbidden ip-address ip-multicast-address

Parameters

• ip-multicast-address—Specifies the group IP Multicast address.

• add—(Optional) Forbids adding ports to the group.

• remove—(Optional) Forbids removing ports from the group.

• ethernet interface-list —(Optional) Specifies a list of Ethernet ports. Separate nonconsecutive Ethernet

ports with a comma and no spaces. Use a hyphen to designate a range of ports.

• port-channel port-channel-list—(Optional) Specifies a list of port channels. Separate nonconsecutive

port-channels with a comma and no spaces. Use a hyphen to designate a range of port channels.

Default Configuration

No forbidden addresses are defined.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Before defining forbidden ports, the Multicast group should be registered.

You can execute the command before the VLAN is created.

Example

The following example registers IP address 239.2.2.2, and forbids the IP address on port gi1/0/4 within VLAN
8.

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast ip-address 239.2.2.2
switchxxxxxx(config-if)# bridge multicast forbidden ip-address 239.2.2.2 add gi1/0/4

Cisco Business Switches 350 Series CLI Guide

126

Address Table Commands

bridge multicast source group

bridge multicast source group

To register a source IP address - Multicast IP address pair to the bridge table, and statically add or remove
ports to or from the source-group, use the bridge multicast source group Interface (VLAN) Configuration
mode command. To unregister the source-group-pair, use the no form of this command.

Syntax

bridge multicast source ip-address group ip-multicast-address [[add | remove] {ethernet interface-list |
port-channel port-channel-list}]

no bridge multicast source ip-address group ip-multicast-address

Parameters

• ip-address—Specifies the source IP address.

• ip-multicast-address—Specifies the group IP Multicast address.

• add—(Optional) Adds ports to the group for the specific source IP address.

• remove—(Optional) Removes ports from the group for the specific source IP address.

• ethernet interface-list—(Optional) Specifies a list of Ethernet ports. Separate nonconsecutive Ethernet

ports with a comma and no spaces. Use a hyphen to designate a range of ports.

• port-channel port-channel-list—(Optional) Specifies a list of port channels. Separate nonconsecutive

port-channels with a comma and no spaces; use a hyphen to designate a range of port channels.

Default Configuration

No Multicast addresses are defined.

The default option is add.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

You can execute the command before the VLAN is created.

Example

The following example registers a source IP address - Multicast IP address pair to the bridge table:

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast source 13.16.1.1 group 239.2.2.2

Cisco Business Switches 350 Series CLI Guide

127

bridge multicast forbidden source group

Address Table Commands

bridge multicast forbidden source group

To forbid adding or removing a specific IP source address - Multicast address pair to or from specific ports,
use the bridge multicast forbidden source group IInterface (VLAN) Configuration mode command. To
return to the default configuration, use the no form of this command.

Syntax

bridge multicast forbidden source ip-address group ip-multicast-address {add | remove} {ethernet
interface-list | port-channel port-channel-list}

no bridge multicast forbidden source ip-address group ip-multicast-address

Parameters

• ip-address—Specifies the source IP address.

• ip-multicast-address—Specifies the group IP Multicast address.

• add—(Optional) Forbids adding ports to the group for the specific source IP address.

• remove—(Optional) Forbids removing ports from the group for the specific source IP address.

• ethernet interface-list—(Optional) Specifies a list of Ethernet ports. Separate nonconsecutive Ethernet

ports with a comma and no spaces. Use a hyphen to designate a range of ports.

• port-channel port-channel-list—(Optional) Specifies a list of port channels. Separate nonconsecutive

port-channels with a comma and no spaces; use a hyphen to designate a range of port channels.

Default Configuration

No forbidden addresses are defined.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Before defining forbidden ports, the Multicast group should be registered.

You can execute the command before the VLAN is created.

Example

The following example registers a source IP address - Multicast IP address pair to the bridge table, and forbids
adding the pair to port gi1/0/4 on VLAN 8:

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast source 13.16.1.1 group 239.2.2.2
switchxxxxxx(config-if)# bridge multicast forbidden source 13.16.1.1 group 239.2.2.2 add
gi1/0/4

Cisco Business Switches 350 Series CLI Guide

128

Address Table Commands

bridge multicast ipv6 mode

bridge multicast ipv6 mode

To configure the Multicast bridging mode for IPv6 Multicast packets, use the bridge multicast ipv6 mode
Interface (VLAN) Configuration mode command. To return to the default configuration, use the no form of
this command.

Syntax

bridge multicast ipv6 mode {mac-group | ip-group | ip-src-group}

no bridge multicast ipv6 mode

Parameters

• mac-group—Specifies that Multicast bridging is based on the packet's VLAN and MAC destination

address.

• ip-group—Specifies that Multicast bridging is based on the packet's VLAN and IPv6 destination address

for IPv6 packets.

• ip-src-group—Specifies that Multicast bridging is based on the packet's VLAN, IPv6 destination address

and IPv6 source address for IPv6 packets.

Default Configuration

The default mode is mac-group.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Use the mac-group mode when using a network management system that uses a MIB based on the Multicast
MAC address.

The following table describes the actual data that is written to the Forwarding Data Base (FDB) as a function
of the MLD version that is used in the network:

FDB mode

mac-group

ipv6-group

MLD version 1

MLD version 2

MAC group address

MAC group address

IPv6 group address

IPv6 group address

ipv6-src-group

(*)

IPv6 source and group addresses

(*) In ip-src-group mode a match is performed on 4 bytes of the multicast address and 4 bytes of the source
address. In the group address the last 4 bytes of the address are checked for match. In the source address the
last 3 bytes and 5th from last bytes of the interface ID are examined.

(*) Note that (*,G) cannot be written to the FDB if the mode is ip-src-group. In that case, no new FDB entry
is created, but the port is added to the (S,G) entries (if they exist) that belong to the requested group.

Cisco Business Switches 350 Series CLI Guide

129

bridge multicast ipv6 mode

Address Table Commands

If an application on the device requests (*,G), the operating FDB mode is changed to ip-group.

You can execute the command before the VLAN is created.

Example

The following example configures the Multicast bridging mode as an ip-group on VLAN 2.

switchxxxxxx(config)# interface vlan 2
switchxxxxxx(config-if)# bridge multicast ipv6 mode
ip-group

Cisco Business Switches 350 Series CLI Guide

130

Address Table Commands

bridge multicast ipv6 ip-address

bridge multicast ipv6 ip-address

To register an IPv6 Multicast address to the bridge table, and statically add or remove ports to or from the
group, use the bridge multicast ipv6 ip-address Interface (VLAN) Configuration mode command. To
unregister the IPv6 address, use the no form of this command.

Syntax

bridge multicast ipv6 ip-address ipv6-multicast-address [[add | remove] {ethernet interface-list |
port-channel port-channel-list}]

no bridge multicast ipv6 ip-address ip-multicast-address

Parameters

• ipv6-multicast-address—Specifies the group IPv6 multicast address.

• add—(Optional) Adds ports to the group.

• remove—(Optional) Removes ports from the group.

• ethernet interface-list—(Optional) Specifies a list of Ethernet ports. Separate nonconsecutive Ethernet

ports with a comma and no spaces; use a hyphen to designate a range of ports.

• port-channel port-channel-list—(Optional) Specifies a list of port channels. Separate nonconsecutive

port-channels with a comma and no spaces. Use a hyphen to designate a range of port channels.

Default Configuration

No Multicast addresses are defined.

The default option is add.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

To register the group in the bridge database without adding or removing ports or port channels, specify the
ipv6-multicast-address parameter only.

Static Multicast addresses can be defined on static VLANs only. You can execute the command before the
VLAN is created.

Example 1 - The following example registers the IPv6 address to the bridge table:

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast ipv6 ip-address FF00:0:0:0:4:4:4:1

Example 2 - The following example registers the IPv6 address and adds ports statically.

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast ipv6 ip-address FF00:0:0:0:4:4:4:1 add gi1/0/1-2

Cisco Business Switches 350 Series CLI Guide

131

bridge multicast ipv6 forbidden ip-address

Address Table Commands

bridge multicast ipv6 forbidden ip-address

To forbid adding or removing a specific IPv6 Multicast address to or from specific ports, use the bridge
multicast ipv6 forbidden ip-address Interface (VLAN) Configuration mode command. To restore the default
configuration, use the no form of this command.

Syntax

bridge multicast ipv6 forbidden ip-address {ipv6-multicast-address} {add | remove} {ethernet interface-list
| port-channel port-channel-list}

no bridge multicast ipv6 forbidden ip-address ipv6-multicast-address

Parameters

• ipv6-multicast-address—Specifies the group IPv6 Multicast address.

• add—(Optional) Forbids adding ports to the group.

• remove—(Optional) Forbids removing ports from the group.

• ethernet interface-list—(Optional) Specifies a list of Ethernet ports. Separate nonconsecutive Ethernet

ports with a comma and no spaces. Use a hyphen to designate a range of ports.

• port-channel port-channel-list—(Optional) Specifies a list of port channels. Separate nonconsecutive

port-channels with a comma and no spaces. Use a hyphen to designate a range of port channels.

Default Configuration

No forbidden addresses are defined.

The default option is add.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Before defining forbidden ports, the Multicast group should be registered.

You can execute the command before the VLAN is created.

Example

The following example registers an IPv6 Multicast address, and forbids the IPv6 address on port gi1/0/4 within
VLAN 8.

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast ipv6 ip-address FF00:0:0:0:4:4:4:1
switchxxxxxx(config-if)# bridge multicast ipv6 forbidden ip-address FF00:0:0:0:4:4:4:1 add

gi1/0/4

Cisco Business Switches 350 Series CLI Guide

132

Address Table Commands

bridge multicast ipv6 source group

bridge multicast ipv6 source group

To register a source IPv6 address - Multicast IPv6 address pair to the bridge table, and statically add or remove
ports to or from the source-group, use the bridge multicast ipv6 source group Interface (VLAN) Configuration
mode command. To unregister the source-group-pair, use the no form of this command.

Syntax

bridge multicast ipv6 source ipv6-source-address group ipv6-multicast-address [[add | remove] {ethernet
interface-list | port-channel port-channel-list}]

no bridge multicast ipv6 source ipv6-address group ipv6-multicast-address

Parameters

• ipv6-source-address—Specifies the source IPv6 address.

• ipv6-multicast-address—Specifies the group IPv6 Multicast address.

• add—(Optional) Adds ports to the group for the specific source IPv6 address.

• remove—(Optional) Removes ports from the group for the specific source IPv6 address.

• ethernet interface-list—(Optional) Specifies a list of Ethernet ports. Separate nonconsecutive Ethernet

ports with a comma and no spaces. Use a hyphen to designate a range of ports.

• port-channel port-channel-list—(Optional) Specifies a list of port channels. Separate nonconsecutive

port-channels with a comma and no spaces. Use a hyphen to designate a range of port channels.

Default Configuration

No Multicast addresses are defined.

The default option is add.

Command Mode

Interface (VLAN) Configuration mode

Example

The following example registers a source IPv6 address - Multicast IPv6 address pair to the bridge table:

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast source 2001:0:0:0:4:4:4 group FF00:0:0:0:4:4:4:1

Cisco Business Switches 350 Series CLI Guide

133

bridge multicast ipv6 forbidden source group

Address Table Commands

bridge multicast ipv6 forbidden source group

To forbid adding or removing a specific IPv6 source address - Multicast address pair to or from specific ports,
use the bridge multicast ipv6 forbidden source group Interface (VLAN) Configuration mode command.
To return to the default configuration, use the no form of this command.

Syntax

bridge multicast ipv6 forbidden source ipv6-source-address group ipv6-multicast-address {add | remove}
{ethernet interface-list | port-channel port-channel-list}

no bridge multicast ipv6 forbidden source ipv6-address group ipv6-multicast-address

Parameters

• ipv6-source-address—Specifies the source IPv6 address.

• ipv6-multicast-address—Specifies the group IPv6 Multicast address.

• add—Forbids adding ports to the group for the specific source IPv6 address.

• remove—Forbids removing ports from the group for the specific source IPv6 address.

• ethernet interface-list—Specifies a list of Ethernet ports. Separate nonconsecutive Ethernet ports with

a comma and no spaces. Use a hyphen to designate a range of ports.

• port-channel port-channel-list—Specifies a list of port channels. Separate nonconsecutive port-channels

with a comma and no spaces; use a hyphen to designate a range of port channels.

Default Configuration

No forbidden addresses are defined.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Before defining forbidden ports, the Multicast group should be registered.

You can execute the command before the VLAN is created.

Example

The following example registers a source IPv6 address - Multicast IPv6 address pair to the bridge table, and
forbids adding the pair to gi1/0/4 on VLAN 8:

switchxxxxxx(config)# interface vlan 8
switchxxxxxx(config-if)# bridge multicast source 2001:0:0:0:4:4:4 group FF00:0:0:0:4:4:4:1
switchxxxxxx(config-if)# bridge multicast forbidden source 2001:0:0:0:4:4:4:1 group
FF00:0:0:0:4:4:4:1 add gi1/0/4

Cisco Business Switches 350 Series CLI Guide

134

Address Table Commands

bridge multicast unregistered

bridge multicast unregistered

To configure forwarding unregistered Multicast addresses, use the bridge multicast unregistered Interface
(Ethernet, Port Channel) Configuration mode command. To restore the default configuration, use the no form
of this command.

Syntax

bridge multicast unregistered {forwarding | filtering}

no bridge multicast unregistered

Parameters

• forwarding—Forwards unregistered Multicast packets.

• filtering—Filters unregistered Multicast packets.

Default Configuration

Unregistered Multicast addresses are forwarded.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Do not enable unregistered Multicast filtering on ports that are connected to routers, because the 224.0.0.x
address range should not be filtered. Note that routers do not necessarily send IGMP reports for the 224.0.0.x
range.

You can execute the command before the VLAN is created.

Example

The following example specifies that unregistered Multicast packets are filtered on gi1/0/1:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# bridge multicast unregistered filtering

Cisco Business Switches 350 Series CLI Guide

135

bridge multicast forward-all

Address Table Commands

bridge multicast forward-all

To enable forwarding all multicast packets for a range of ports or port channels, use the bridge multicast
forward-all Interface (VLAN) Configuration mode command. To restore the default configuration, use the
no form of this command.

Syntax

bridge multicast forward-all {add | remove} {ethernet interface-list | port-channel port-channel-list}

no bridge multicast forward-all

Parameters

• add—Forces forwarding of all Multicast packets.

• remove—Does not force forwarding of all Multicast packets.

• ethernet interface-list—Specifies a list of Ethernet ports. Separate nonconsecutive Ethernet ports with

a comma and no spaces. Use a hyphen to designate a range of ports.

• port-channel port-channel-list—Specifies a list of port channels. Separate nonconsecutive port-channels

with a comma and no spaces. Use a hyphen to designate a range of port channels.

Default Configuration

Forwarding of all Multicast packets is disabled.

Command Mode

Interface (VLAN) Configuration mode

Example

The following example enables all Multicast packets on port gi1/0/4 to be forwarded.

switchxxxxxx(config)# interface vlan 2
switchxxxxxx(config-if)# bridge multicast forward-all add gi1/0/4

Cisco Business Switches 350 Series CLI Guide

136

Address Table Commands

bridge multicast forbidden forward-all

bridge multicast forbidden forward-all

To forbid a port to dynamically join Multicast groups, use the bridge multicast forbidden forward-all
Interface (VLAN) Configuration mode command. To restore the default configuration, use the no form of
this command.

Syntax

bridge multicast forbidden forward-all {add | remove} {ethernet interface-list | port-channel
port-channel-list}

no bridge multicast forbidden forward-all

Parameters

• add—Forbids forwarding of all Multicast packets.

• remove—Does not forbid forwarding of all Multicast packets.

• ethernet interface-list —Specifies a list of Ethernet ports. Separate nonconsecutive Ethernet ports with

a comma and no spaces. Use a hyphen to designate a range of ports.

• port-channel port-channel-list—Specifies a list of port channels. Separate nonconsecutive port-channels

with a comma and no spaces; use a hyphen to designate a range of port channels.

Default Configuration

Ports are not forbidden to dynamically join Multicast groups.

The default option is add.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Use this command to forbid a port to dynamically join (by IGMP, for example) a Multicast group.

The port can still be a Multicast router port.

Example

The following example forbids forwarding of all Multicast packets to gi1/0/1 within VLAN 2.

switchxxxxxx(config)# interface vlan 2
switchxxxxxx(config-if)# bridge multicast forbidden forward-all add ethernet gi1/0/1

Cisco Business Switches 350 Series CLI Guide

137

bridge unicast unknown

Address Table Commands

bridge unicast unknown

To enable egress filtering of Unicast packets where the destination MAC address is unknown to the device,
use the bridge unicast unknown Interface (Ethernet, Port Channel) Configuration mode command. To restore
the default configuration, use the no form of this command.

Syntax

bridge unicast unknown {filtering | forwarding}

no bridge unicast unknown

Parameters

• filtering—Filter unregistered Unicast packets.

• forwarding—Forward unregistered Unicast packets.

Default Configuration

Forwarding.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode.

Example

The following example drops Unicast packets on gi1/0/1 when the destination is unknown.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# bridge unicast unknown filtering

Cisco Business Switches 350 Series CLI Guide

138

Address Table Commands

show bridge unicast unknown

show bridge unicast unknown

To display the unknown Unicast filtering configuration, use the show bridge unicast unknown Privileged
EXEC mode command.

Syntax

show bridge unicast unknown [interface-id]

Parameters

interface-id—(Optional) Specify an interface ID. The interface ID can be one of the following types: Ethernet
port or port-channel

Command Mode

Privileged EXEC mode

Example

Console # show bridge unicast unknown

Port

Unregistered

--------

---------------------

gi1/0/1

gi1/0/2

gi1/0/3

Forward

Filter

Filter

Cisco Business Switches 350 Series CLI Guide

139

mac address-table static

Address Table Commands

mac address-table static

To add a MAC-layer station source address to the MAC address table, use the mac address-table static
Global Configuration mode command. To delete the MAC address, use the no form of this command.

Syntax

mac address-table static mac-address vlan vlan-id interface interface-id [permanent | delete-on-reset |
delete-on-timeout | secure]|

no mac address-table static [mac-address] vlan vlan-id

Parameters

• mac-address—MAC address (Range: Valid MAC address)

• vlan-id— Specify the VLAN

• interface-id—Specify an interface ID. The interface ID can be one of the following types: Ethernet port

or port-channel (Range: valid ethernet port, valid port-channel)

• permanent—(Optional) The permanent static MAC address. The keyword is applied by the default.

• delete-on-reset—(Optional)The delete-on-reset static MAC address.

• delete-on-timeout—(Optional)The delete-on-timeout static MAC address.

• secure—(Optional)The secure MAC address. May be used only in a secure mode.

Default Configuration

No static addresses are defined. The default mode for an added address is permanent.

Command Mode

Global Configuration mode

User Guidelines

Use the command to add a static MAC address with given time-to-live in any mode or to add a secure MAC
address in a secure mode.

Each MAC address in the MAC address table is assigned two attributes: type and time-to-live.

The following value of time-of-live is supported:

• permanent—MAC address is saved until it is removed manually.

• delete-on-reset—MAC address is saved until the next reboot.

delete-on-timeout—MAC address that may be removed by the aging timer.

The following types are supported:

• static— MAC address manually added by the command with the following keywords specifying its

time-of-live:

Cisco Business Switches 350 Series CLI Guide

140

Address Table Commands

mac address-table static

permanent

delete-on-reset

delete-on-timeout

A static MAC address may be added in any port mode.

secure— A MAC address added manually or learned in a secure mode. Use the mac address-table
static command with the secure keyword to add a secure MAC address. The MAC address cannot be
relearned.

A secure MAC address may be added only in a secure port mode.

• dynamic— a MAC address learned by the switch in non-secure mode. A value of its time-to-live attribute

is delete-on-timeout.

Example 1 - The following example adds two permanent static MAC address:

switchxxxxxx(config)# mac address-table static 00:3f:bd:45:5a:b1 vlan 1 interface gi1/0/1
switchxxxxxx(config)# mac address-table static 00:3f:bd:45:5a:b2 vlan 1 interface gi1/0/1
permanent

Example 2 - The following example adds a deleted-on-reset static MAC address:

switchxxxxxx(config)# mac address-table static 00:3f:bd:45:5a:b2 vlan 1 interface gi1/0/1
delete-on-reset

Example 3 - The following example adds a deleted-on-timeout static MAC address:

switchxxxxxx(config)# mac address-table static 00:3f:bd:45:5a:b2 vlan 1 interface gi1/0/1
delete-on-timeout

Example 4 - The following example adds a secure MAC address:

switchxxxxxx(config)# mac address-table static 00:3f:bd:45:5a:b2 vlan 1 interface gi1/0/1

secure

Cisco Business Switches 350 Series CLI Guide

141

clear mac address-table

Address Table Commands

clear mac address-table

To remove learned or secure entries from the forwarding database (FDB), use the clear mac address-table
Privileged EXEC mode command.

Syntax

clear mac address-table dynamic interface interface-id

clear mac address-table secure interface interface-id

Parameters

• dynamic interface interface-id—Delete all dynamic (learned) addresses on the specified interface.The

interface ID can be one of the following types: Ethernet port or port-channel. If interface ID is not
supplied, all dynamic addresses are deleted.

• secure interface interface-id—Delete all the secure addresses learned on the specific interface. A secure

address on a MAC address learned on ports on which port security is defined.

Default Configuration

For dynamic addresses, if interface-id is not supplied, all dynamic entries are deleted.

Command Mode

Privileged EXEC mode

Example 1 - Delete all dynamic entries from the FDB.

switchxxxxxx# clear mac address-table dynamic

Example 2 - Delete all secure entries from the FDB learned on secure port gi1/0/1.

switchxxxxxx# clear mac address-table secure interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

142

Address Table Commands

mac address-table aging-time

mac address-table aging-time

To set the aging time of the address table, use the mac address-table aging-time Global configuration
command. To restore the default, use the no form of this command.

Syntax

mac address-table aging-time seconds

no mac address-table aging-time

Parameters

seconds—Time is number of seconds. (Range:10-400)

Default Configuration

300

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# mac address-table aging-time 600

Cisco Business Switches 350 Series CLI Guide

143

port security

port security

Address Table Commands

To enable port security learning mode on an interface, use the port security Interface (Ethernet, Port Channel)
Configuration mode command. To disable port security learning mode on an interface, use the no form of
this command.

Syntax

port security [forward | discard | discard-shutdown] [trap seconds]

no port security

Parameters

• forward—(Optional) Forwards packets with unlearned source addresses, but does not learn the address.

• discard—(Optional) Discards packets with unlearned source addresses.

• discard-shutdown—(Optional) Discards packets with unlearned source addresses and shuts down the

port.

• trap seconds—(Optional) Sends SNMP traps and specifies the minimum time interval in seconds between

consecutive traps. (Range: 1–1000000)

Default Configuration

The feature is disabled by default.

The default mode is discard.

The default number of seconds is zero, but if traps is entered, a number of seconds must also be entered.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The command may be used only when the interface in the regular (non-secure with unlimited MAC learning)
mode.

Port Security cannot be enabled on an interface if 802.1X authentication is already active on the interface.

When the port security command enables the lock mode on a port all dynamic addresses learned on the port
are changed to permanent secure addresses.

When the port security command enables a mode on a port differing from the lock mode all dynamic addresses
learned on the port are deleted.

When the no port security command cancels a secure mode on a port all secure addresses defined on the port
are changed to dynamic addresses.

Additionally to set a mode, use the port security command to set an action that the switch should perform
on a frame which source MAC address cannot be learned.

Cisco Business Switches 350 Series CLI Guide

144

Address Table Commands

port security

Example

The following example forwards all packets to port gi1/0/1 without learning addresses of packets from unknown
sources and sends traps every 100 seconds, if a packet with an unknown source address is received.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# port security mode lock
switchxxxxxx(config-if)# port security forward trap 100
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

145

port security mode

Address Table Commands

port security mode

To configure the port security learning mode, use the port security mode Interface (Ethernet, Port Channel)
Configuration mode command. To restore the default configuration, use the no form of this command.

Syntax

port security mode {max-addresses | lock | secure permanent | secure delete-on-reset}

no port security mode

Parameters

• max-addresses— Non-secure mode with limited learning dynamic MAC addresses.

• lock— Secure mode without MAC learning.

• secure permanent—Secure mode with limited learning permanent secure MAC addresses with the

permanent time-of-live. The static and secure MAC addresses may be added on the port manually by
the mac address-table static command.

• secure delete-on-reset—Secure mode with limited learning secure MAC addresses with the

delete-on-reset time-of-live. The static and secure MAC addresses may be added on the port manually
by the mac address-table static command.

Default Configuration

The default port security mode islock.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The default port mode is called regular. In this mode, the port allows unlimited learning of dynamic addresses.

The command may be used only when the interface in the regular (non-secure with unlimited MAC learning)
mode.

Example

The following example sets the port security mode to Lock for gi1/0/4.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# port security mode
lock

switchxxxxxx(config-if)# port security
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

146

Address Table Commands

port security max

port security max

To configure the maximum number of addresses that can be learned on the port while the port is in port,
max-addresses or secure mode, use the port security max Interface (Ethernet, Port Channel) Configuration
mode command. To restore the default configuration, use the no form of this command.

Syntax

port security max max-addr

no port security max

Parameters

max-addr—Specifies the maximum number of addresses that can be learned on the port. (Range: 0–256)

Default Configuration

This default maximum number of addresses is 1.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The command may be used only when the interface in the regular (non-secure with unlimited MAC learning)
mode.

Example

The following example sets the port to limited learning mode:

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# port security mode max
switchxxxxxx(config-if)# port security max 20
switchxxxxxx(config-if)# port security
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

147

port security routed secure-address

Address Table Commands

port security routed secure-address

To add a MAC-layer secure address to a routed port. (port that has an IP address defined on it), use the port
security routed secure-address Interface (Ethernet, Port Channel) Configuration mode command. To delete
a MAC address from a routed port, use the no form of this command.

Syntax

port security routed secure-address mac-address

no port security routed secure-address mac-address

Parameters

mac-address—Specifies the MAC address.

Default Configuration

No addresses are defined.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode. It cannot be configured for a range of interfaces (range
context).

User Guidelines

This command enables adding secure MAC addresses to a routed port in port security mode. The command
is available when the port is a routed port and in port security mode. The address is deleted if the port exits
the security mode or is not a routed port.

Example

The following example adds the MAC-layer address 00:66:66:66:66:66 to gi1/0/1.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# port security routed secure-address 00:66:66:66:66:66

Cisco Business Switches 350 Series CLI Guide

148

Address Table Commands

show mac address-table

show mac address-table

To display entries in the MAC address table, use the show mac address-table Privileged EXEC mode
command.

Syntax

show mac address-table [dynamic | static | secure] [vlan vlan] [interface interface-id] [address mac-address]

Parameters

• dynamic—(Optional) Displays only dynamic MAC address table entries.

• static—(Optional) Displays only static MAC address table entries.

• secure—(Optional) Displays only secure MAC address table entries.

• vlan—(Optional) Displays entries for a specific VLAN.

• interface interface-id—(Optional) Displays entries for a specific interface ID. The interface ID can be

one of the following types: Ethernet port or port-channel.

• address mac-address—(Optional) Displays entries for a specific MAC address.

Default Configuration

If no parameters are entered, the entire table is displayed.

Command Mode

Privileged EXEC mode

User Guidelines

Internal usage VLANs (VLANs that are automatically allocated on routed ports) are presented in the VLAN
column by a port number and not by a VLAN ID.

Example 1 - Displays entire address table.

switchxxxxxx# show mac address-table
Aging time is 300 sec

VLAN

MAC Address

Port

Type

--------

---------------------

----------

----------

1

1

1

2

00:00:26:08:13:23

0

self

00:3f:bd:45:5a:b1

gi1/0/1

static

00:a1:b0:69:63:f3

gi1/0/2

dynamic

00:a1:b0:69:63:f3

gi1/0/3

dynamic

gi1/0/4

00:a1:b0:69:61:12

gi1/0/4

dynamic

Cisco Business Switches 350 Series CLI Guide

149

show mac address-table

Address Table Commands

Example 2 - Displays address table entries containing the specified MAC address.

switchxxxxxx# show mac address-table address 00:3f:bd:45:5a:b1
Aging time is 300 sec
VLAN
-------- --------------------- ---------- ----------
1

00:3f:bd:45:5a:b1

MAC Address

gi1/0/4

static

Type

Port

Cisco Business Switches 350 Series CLI Guide

150

Address Table Commands

show mac address-table count

show mac address-table count

To display the number of addresses present in the Forwarding Database, use the show mac address-table
count Privileged EXEC mode command.

Syntax

show mac address-table count [vlan vlan | interface interface-id]

Parameters

• vlan vlan—(Optional) Specifies VLAN.

• interface-id interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the

following types: Ethernet port or port-channel.

Command Mode

Privileged EXEC mode

User Guidelines

Use the show mac address-table count command to display the Forwarding Database capacity (total number
of entries), free entries (the number of entries that can still be used) and the consumed entries breakdown by
type of entry. The following entry types are displayed:

• Used Unicast - Occupied Forwarding Database entries which are layer 2 MAC unicast addresses.

• Used Multicast - Occupied Forwarding Database entries which are layer 2 MAC Multicast addresses.

• IPv4 hosts - Occupied Forwarding Database entries which are IPv4 Layer 3 host entries.

• IPv6 hosts - Occupied Forwarding Database entries which are IPv6 Layer 3 host entries.

• Secure - The amount of the secure unicast entries.

• Dynamic Unicast- The amount of the dynamic unicast entries.

• Static Unicast - The amount of the static (configured by user) unicast entries.

• Internal - The amount of the internal entries. For example device own MAC address.

The Secure, Dynamic Unicast, Static Unicast and Internal entry types present further breakdown of the Used
Unicast entries.

The total number of consumed entries is the aggregate value of the following entry types: Used Unicast; Used
Multicast ;IPv4 hosts ;IPv6 hosts .

If the Interface parameter is used the command will display only the following entry types: Used Unicast,
secure, Dynamic Unicast, Static Unicast and Internal.

Example 1 - The following example displays the number of entries present in forwarding table for
the entire device:

Cisco Business Switches 350 Series CLI Guide

151

show mac address-table count

Address Table Commands

: 16378

switchxxxxxx# show mac address-table count
This may take some time.
Capacity
: 16384
Free
Used unicast
: 5
: 1
Used multicast
Used IPv4 hosts : 1
Used IPv6 hosts : 1 (each IPv6 host consumes 2 entires in MAC address table)
Secure
: 0
Dynamic unicast : 2
: 2
Static unicast
Internal
: 1
console#

Example 2 - The following example displays the number of entries present in forwarding table for
a specific device interface.

switchxxxxxx# show mac address-table count interface gi1/0/1
This may take some time.
Capacity
: 16384
Free
: 5
Used unicast
Secure
: 0
Dynamic unicast : 2
: 2
Static unicast
Internal
: 0
console#

: 16378

Cisco Business Switches 350 Series CLI Guide

152

Address Table Commands

show bridge multicast mode

show bridge multicast mode

To display the Multicast bridging mode for all VLANs or for a specific VLAN, use the show bridge multicast
mode Privileged EXEC mode command.

Syntax

show bridge multicast mode [vlan vlan-id]

Parameters

vlan vlan-id—(Optional) Specifies the VLAN ID.

Command Mode

Privileged EXEC mode

Example

The following example displays the Multicast bridging mode for all VLANs

switchxxxxxx# show bridge multicast mode

VLAN

IPv4 Multicast Mode

IPv6 Multicast Mode

Admin

Oper

Admin

Oper

-----

-----------

-----------

-----------

-----------

1

11

12

MAC-GROUP

MAC-GROUP

MAC-GROUP

MAC-GROUP

IPv4-GROUP

IPv4-GROUP

IPv6-GROUP

IPv6-GROUP

IPv4-SRC-
GROUP

IPv4-SRC-
GROUP

IPv6-SRC-
GROUP

IPv6-SRC-
GROUP

Cisco Business Switches 350 Series CLI Guide

153

show bridge multicast address-table

Address Table Commands

show bridge multicast address-table

To display Multicast MAC addresses or IP Multicast address table information, use the show bridge multicast
address-table Privileged EXEC mode command.

Syntax

show bridge multicast address-table [vlan vlan-id]

show bridge multicast address-table [vlan vlan-id] [address mac-multicast-address] [format {ip | mac}]

show bridge multicast address-table [vlan vlan-id] [address ipv4-multicast-address] [source
ipv4-source-address]

show bridge multicast address-table [vlan vlan-id] [address ipv6-multicast-address] [source
ipv6-source-address]

Parameters

• vlan-id vlan-id—(Optional) Display entries for specified VLAN ID.

• address—(Optional) Display entries for specified Multicast address. The possible values are:

mac-multicast-address—(Optional) Specifies the MAC Multicast address.

ipv4-multicast-address—(Optional) Specifies the IPv4 Multicast address.

ipv6-multicast-address—(Optional) Specifies the IPv6 Multicast address.

• format—(Optional) Applies if mac-multicast-address was selected. In this case either MAC or IP format

can be displayed. Display entries for specified Multicast address format. The possible values are:

ip—Specifies that the Multicast address is an IP address.

mac—Specifies that the Multicast address is a MAC address.

• source —(Optional) Specifies the source address. The possible values are:

ipv4-address—(Optional) Specifies the source IPv4 address.

ipv6-address—(Optional) Specifies the source IPv6 address.

Default Configuration

If the format is not specified, it defaults to mac (only if mac-multicast-address was entered).

If VLAN ID is not entered, entries for all VLANs are displayed.

If MAC or IP address is not supplied, entries for all addresses are displayed.

Command Mode

Privileged EXEC mode

Cisco Business Switches 350 Series CLI Guide

154

Address Table Commands

show bridge multicast address-table

User Guidelines

A MAC address can be displayed in IP format only if it is within the range 0100.5e00.0000 through
0100.5e7f.ffff.

Multicast router ports (defined statically or discovered dynamically) are members in all MAC groups.

Changing the Multicast mode can move static Multicast addresses that are written in the device FDB to a
shadow configuration because of FDB hash collisions.

Example

The following example displays bridge Multicast address information.

MAC Address

switchxxxxxx# show bridge multicast address-table
Multicast address table for VLANs in MAC-GROUP bridging mode:
Vlan
Type
---- -----------------
8
01:00:5e:02:02:03
Forbidden ports for Multicast addresses:
Vlan
---- -----------------
01:00:5e:02:02:03
8

Ports
-----
gi1/0/4

Ports
-----
1-2

--------------

MAC Address

Static

Multicast address table for VLANs in IPv4-GROUP bridging mode:

Type

Dynamic

Dynamic

11.2.2.3

MAC Address

MAC Address

224.2.2.251

224.0.0.251

Ports
-----

--------------

Ports
-----
gi1/0/2

Ports
-----
gi1/0/1

Vlan
---- -----------------
1
Forbidden ports for Multicast addresses:
Vlan
---- -----------------
232.5.6.5
1
1
233.22.2.6
Multicast address table for VLANs in IPv4-SRC-GROUP bridging mode:
Vlan Group Address Source address Type
---- --------------- --------------- --------
1
Forbidden ports for Multicast addresses:
Vlan Group Address Source Address
---- --------------- --------------- -------
gi1/0/4
*
8
8
gi1/0/4
1.1.1.11
Multicast address table for VLANs in IPv6-GROUP bridging mode:
VLAN IP/MAC Address
---- ----------------- --------- ---------------------
8
Forbidden ports for Multicast addresses:
VLAN IP/MAC Address
---- ----------------- -----------
8
Multicast address table for VLANs in IPv6-SRC-GROUP bridging mode:
Vlan Group Address Source address Type
---- --------------- --------------- -------- ------------------
8
8

ff02::4:4:4
ff02::4:4:4

gi1/0/1-2, gi1/0/3, Po1

239.2.2.2
239.2.2.2

ff02::4:4:4

ff02::4:4:4

gi1/0/4

Static

Ports

Ports

Ports

Ports

Type

*
Static
fe80::200:7ff: Static
fe00:200

gi1/0/1-2,gi1/0/3,Po1

Forbidden ports for Multicast addresses:
Vlan Group Address Source address
---- --------------- ---------------
8
8

ff02::4:4:4
ff02::4:4:4

*
fe80::200:7ff:f
e00:200

Ports
----------
gi1/0/4
gi1/0/4

Cisco Business Switches 350 Series CLI Guide

155

show bridge multicast address-table static

Address Table Commands

show bridge multicast address-table static

To display the statically-configured Multicast addresses, use the show bridge multicast address-table static
Privileged EXEC mode command.

Syntax

show bridge multicast address-table static [vlan vlan-id] [all]

show bridge multicast address-table static [vlan vlan-id] [address mac-multicast-address] [mac| ip]

show bridge multicast address-table static [vlan vlan-id] [address ipv4-multicast-address] [source
ipv4-source-address]

show bridge multicast address-table static [vlan vlan-id] [address ipv6-multicast-address] [source
ipv6-source-address]

Parameters

• vlan vlan-id—(Optional) Specifies the VLAN ID.

• address—(Optional) Specifies the Multicast address. The possible values are:

mac-multicast-address—(Optional) Specifies the MAC Multicast address.

ipv4-multicast-address—(Optional) Specifies the IPv4 Multicast address.

ipv6-multicast-address—(Optional) Specifies the IPv6 Multicast address.

• source—(Optional) Specifies the source address. The possible values are:

ipv4-address—(Optional) Specifies the source IPv4 address.

ipv6-address—(Optional) Specifies the source IPv6 address.

Default Configuration

When all/mac/ip is not specified, all entries (MAC and IP) will be displayed.

Command Mode

Privileged EXEC mode

User Guidelines

A MAC address can be displayed in IP format only if it is within the range 0100.5e00.0000–- 0100.5e7f.ffff.

Example

The following example displays the statically-configured Multicast addresses.

switchxxxxxx# show bridge multicast address-table static
MAC-GROUP table

Vlan
----
1

MAC Address
--------------
0100.9923.8787

Ports
--------
gi1/0/1, gi1/0/2

Cisco Business Switches 350 Series CLI Guide

156

Address Table Commands

show bridge multicast address-table static

Forbidden ports for multicast addresses:

Vlan
----

MAC Address
--------------

Ports
--------

IPv4-GROUP Table

Vlan
----
1
19

IP Address
----------
231.2.2.3
231.2.2.8

Ports
--------
gi1/0/1, gi1/0/2
gi1/0/2-3

Forbidden ports for multicast addresses:

Vlan
----
1
19

IP Address
----------
231.2.2.3
231.2.2.8

IPv4-SRC-GROUP Table:

Ports
--------
gi1/0/4
gi1/0/3

Vlan
----

Group Address
---------------

Source address
---------------

Ports
------

Forbidden ports for multicast addresses:

Vlan
----

Group Address
---------------

Source address
---------------

Ports
------

IPv6-GROUP Table

Vlan
----
191

IP Address
----------------
FF12::8

Ports
---------
gi1/0/1-4

Forbidden ports for multicast addresses:

Vlan
----
11
191

IP Address
----------------
FF12::3
FF12::8

Ports
---------
gi1/0/4
gi1/0/4

IPv6-SRC-GROUP Table:

Vlan
----
192

Group Address
---------------
FF12::8

Source address
---------------
FE80::201:C9A9:FE40:8988

Ports
------
gi1/0/1-4

Forbidden ports for multicast addresses:

Vlan
----
192

Group Address
---------------
FF12::3

Source address
---------------
FE80::201:C9A9:FE40:8988

Ports
------
gi1/0/4

Cisco Business Switches 350 Series CLI Guide

157

show bridge multicast filtering

Address Table Commands

show bridge multicast filtering

To display the Multicast filtering configuration, use the show bridge multicast filtering Privileged EXEC
mode command.

Syntax

show bridge multicast filtering vlan-id

Parameters

vlan-id—Specifies the VLAN ID. (Range: Valid VLAN)

Default Configuration

None

Command Mode

Privileged EXEC mode

Example

The following example displays the Multicast configuration for VLAN 1.

switchxxxxxx# show bridge multicast filtering 1
Filtering: Enabled
VLAN: 1
Forward-All

Port
-----
gi1/0/1
gi1/0/2
gi1/0/3

Static
---------
Forbidden
Forward
-

Status
------
Filter
Forward(s)
Forward(d)

Cisco Business Switches 350 Series CLI Guide

158

Address Table Commands

bridge multicast unregistered

bridge multicast unregistered

To configure forwarding unregistered Multicast addresses, use the bridge multicast unregistered Interface
(Ethernet, Port Channel) Configuration mode command. To restore the default configuration, use the no form
of this command.

Syntax

bridge multicast unregistered {forwarding | filtering}

no bridge multicast unregistered

Parameters

• forwarding—Forwards unregistered Multicast packets.

• filtering—Filters unregistered Multicast packets.

Default Configuration

Unregistered Multicast addresses are forwarded.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Do not enable unregistered Multicast filtering on ports that are connected to routers, because the 224.0.0.x
address range should not be filtered. Note that routers do not necessarily send IGMP reports for the 224.0.0.x
range.

You can execute the command before the VLAN is created.

Example

The following example specifies that unregistered Multicast packets are filtered on gi1/0/1:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# bridge multicast unregistered filtering

Cisco Business Switches 350 Series CLI Guide

159

show ports security

Address Table Commands

show ports security

To display the port-lock status, use the show ports security Privileged EXEC mode command.

Syntax

show ports security [interface-id | detailed]

Parameters

• interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types:

Ethernet port or port-channel.

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Default Configuration

Display for all interfaces. If detailed is not used, only present ports are displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays the port-lock status of all ports.

switchxxxxxx# show ports security
Port
------- --------
gi1/0/1

Learning
---------

Status

Action
------

Maximum Trap
---

------- --------

Frequency

Enabled

Max-
Addresses

Discard

3

Enabled 100

gi1/0/2

Disabled

gi1/0/3

Max-
Addresses

-

28

-

-

Enabled

Lock

Discard

8

Disabled

-

The following table describes the fields shown above.

Field

Description

The port number.
Port

Status

The port security status. The possible values are: Enabled or Disabled.

Action

The action taken on violation.

Maximum

The maximum number of addresses that can be associated on this port
in the Max-Addresses mode.

Trap

The status of SNMP traps. The possible values are: Enable or Disable.

Frequency

The minimum time interval between consecutive traps.

Cisco Business Switches 350 Series CLI Guide

160

Address Table Commands

show ports security addresses

show ports security addresses

To display the current dynamic addresses in locked ports, use the show ports security addresses Privileged
EXEC mode command.

Syntax

show ports security addresses [interface-id | detailed]

Parameters

• interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types:

Ethernet port or port-channel.

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Default Configuration

Display for all interfaces. If detailed is not used, only present ports are displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays dynamic addresses in all currently locked port:

Port
-------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4
...

Status
--------
Disabled
Disabled
Disabled
Disabled

Learning
--------
Lock
Lock
Lock
Lock

Current
----------
0
0
0
0

Maximum
----------
10
1
1
1

Cisco Business Switches 350 Series CLI Guide

161

bridge multicast reserved-address

Address Table Commands

bridge multicast reserved-address

To define the action on Multicast reserved-address packets, use the bridge multicast reserved-address Global
Configuration mode command. To revert to default, use the no form of this command.

Syntax

bridge multicast reserved-address mac-multicast-address [ethernet-v2 ethtype | llc sap | llc-snap pid]
{discard | bridge}

no bridge multicast reserved-address mac-multicast-address [ethernet-v2 ethtype | llc sap | llc-snap pid]

Parameters

• mac-multicast-address—MAC Multicast address in the reserved MAC addresses range. (Range:

01-80-C2-00-00-00, 01-80-C2-00-00-02–01-80-C2-00-00-2F)

• ethernet-v2 ethtype—(Optional) Specifies that the packet type is Ethernet v2 and the Ethernet type field

(16 bits in hexadecimal format). (Range: 0x0600–0xFFFF)

• llc sap—(Optional) Specifies that the packet type is LLC and the DSAP-SSAP field (16 bits in hexadecimal

format). (Range: 0xFFFF)

• llc-snap pid—(Optional) Specifies that the packet type is LLC-SNAP and the PID field (40 bits in

hexadecimal format). (Range: 0x0000000000 - 0xFFFFFFFFFF)

• discard—Specifies discarding the packets.

• bridge—Specifies bridging (forwarding) the packets

Default Configuration

• If the user-supplied MAC Multicast address, ethertype and encapsulation (LLC) specifies a protocol

supported on the device (called Peer), the default action (discard or bridge) is determined by the protocol.

• If not, the default action is as follows:

For MAC addresses in the range 01-80-C2-00-00-00, 01-80-C2-00-00-02– 01-80-C2-00-00-0F, the
default is discard.

For MAC addresses in the range 00-80-C2-00-00-10– 01-80-C2-00-00-2F, the default is bridge.

Command Mode

Global Configuration mode

User Guidelines

If the packet/service type (ethertype/encapsulation) is not specified, the configuration is relevant to all the
packets with the configured MAC address.

Specific configurations (that contain service type) have precedence over less specific configurations (contain
only MAC address).

Cisco Business Switches 350 Series CLI Guide

162

Address Table Commands

bridge multicast reserved-address

The packets that are bridged are subject to security ACLs. The actions define by this command has precedence
over forwarding rules defined by applications/protocols (STP, LLDP etc.) supported on the device.

Example

switchxxxxxx(config)# bridge multicast reserved-address 00:3f:bd:45:5a:b1

Cisco Business Switches 350 Series CLI Guide

163

show bridge multicast reserved-addresses

Address Table Commands

show bridge multicast reserved-addresses

To display the Multicast reserved-address rules, use the show bridge multicast reserved-addresses Privileged
EXEC mode command.

Syntax

show bridge multicast reserved-addresses

Command Mode

Privileged EXEC mode

Example

switchxxxxxx # show bridge multicast reserved-addresses
MAC Address
Frame Type
----------------- - ---------- - -------------- - -----------
01-80-C2-00-00-00 LLC-SNAP 00-00-0C-01-29 Bridge

Protocol

Action

Cisco Business Switches 350 Series CLI Guide

164

AAA Commands

This chapter contains the following sections:

• aaa authentication login, on page 166
• aaa authentication enable, on page 168
• login authentication, on page 170
• enable authentication, on page 171
• ip http authentication, on page 172
• show authentication methods, on page 173
• login block-for, on page 174
• login delay, on page 176
• login quiet-mode access-class, on page 177
• show login, on page 178
• show login failures, on page 180
• password, on page 182
• enable password , on page 184
• service password-recovery, on page 186
• username , on page 187
• show users accounts, on page 189
• aaa accounting login start-stop, on page 190
• aaa accounting dot1x , on page 192
• show accounting, on page 194
• passwords complexity, on page 195
• passwords aging, on page 196
• password complexity history, on page 197
• aaa login-history file, on page 198
• show passwords configuration, on page 199
• show users login-history, on page 200

Cisco Business Switches 350 Series CLI Guide

165

aaa authentication login

AAA Commands

aaa authentication login

Use the aaa authentication login Global Configuration mode command to set one or more authentication
methods to be applied during login. Use the no form of this command to restore the default authentication
method.

Syntax

aaa authentication login [authorization] {default | list-name} method1 [method2...]

no aaa authentication login {default | list-name}

Parameters

• authorization—Specifies that authentication and authorization are applied to the given list. If the keyword

is not configured, then only authentication is applied to the given list.

• default—Uses the authentication methods that follow this argument as the default method list when a

user logs in (this list is unnamed).

• list-name—Specifies a name of a list of authentication methods activated when a user logs in. (Length:

1–12 characters)

• method1 [method2...]—Specifies a list of methods that the authentication algorithm tries (in the given
sequence). Each additional authentication method is used only if the previous method returns an error,
not if it fails. To ensure that the authentication succeeds even if all methods return an error, specify none
as the final method in the command line. Select one or more methods from the following list::

Keyword

enable

line

local

none

radius

tacacs

Description

Uses the enable password for authentication.

Uses the line password for authentication.

Uses the locally-defined usernames for authentication.

Uses no authentication.

Uses the list of all RADIUS servers for authentication.

Uses the list of all TACACS+ servers for authentication.

Default Configuration

If no methods are specified, the default are the locally-defined users and passwords. This is the same as entering
the command aaa authentication login local.

Command Mode

Global Configuration mode

Cisco Business Switches 350 Series CLI Guide

166

AAA Commands

aaa authentication login

User Guidelines

Create a list of authentication methods by entering this command with the list-name parameter where list-name
is any character string. The method arguments identifies the list of methods that the authentication algorithm
tries, in the given sequence.

Note. If authorization is enabled for login and the switch receives from a TACACS+ server user level 15,
then the enable command is not required and if received level 1 the enable command is required.

The no aaa authentication login list-name command deletes a list-name only if it has not been referenced
by another command.

Example

The following example sets the authentication login methods for the console.

switchxxxxxx(config)# aaa authentication login authen-list radius local none
switchxxxxxx(config)# line console
switchxxxxxx(config-line)# login authentication authen-list

Cisco Business Switches 350 Series CLI Guide

167

aaa authentication enable

AAA Commands

aaa authentication enable

The aaa authentication enable Global Configuration mode command sets one or more authentication methods
for accessing higher privilege levels. To restore the default authentication method, use the no form of this
command.

Syntax

aaa authentication enable [authorization] {default | list-name} method [method2...]}

no aaa authentication enable {default | list-name}

Parameters

• authorization—Specifies that authentication and authorization are applied to the given list. If the keyword

is not configured, then only authentication is applied to the given list.

• default—Uses the listed authentication methods that follow this argument as the default method list,

when accessing higher privilege levels.

• list-name —Specifies a name for the list of authentication methods activated when a user accesses higher

privilege levels. (Length: 1–12 characters)

• method [method2...]—Specifies a list of methods that the authentication algorithm tries, in the given

sequence. The additional authentication methods are used only if the previous method returns an error,
not if it fails. Specify none as the final method in the command line to ensure that the authentication
succeeds, even if all methods return an error. Select one or more methods from the following list:

Keyword

enable

line

none

radius

tacacs

Description

Uses the enable password for authentication.

Uses the line password for authentication.

Uses no authentication.

Uses the list of all RADIUS servers for authentication.

Uses the list of all TACACS+ servers for authentication.

Default Configuration

No Authentication lists exist by default.

Command Mode

Global Configuration mode

User Guidelines

Create a list by entering the aaa authentication enable list-name method1 [method2...] command where
list-name is any character string used to name this list. The method argument identifies the list of methods
that the authentication algorithm tries, in the given sequence.

Cisco Business Switches 350 Series CLI Guide

168

AAA Commands

aaa authentication enable

All aaa authentication enable requests sent by the device to a RADIUS server include the username $enabx$.,
where x is the requested privilege level.

All aaa authentication enable requests sent by the device to a TACACS+ server include the username that
is entered for login authentication.

The additional methods of authentication are used only if the previous method returns an error, not if it fails.
Specify none as the final method in the command line to ensure that the authentication succeeds even if all
methods return an error.

no aaa authentication enable list-name deletes list-name if it has not been referenced.

Example

The following example sets the enable password for authentication for accessing higher privilege levels.

switchxxxxxx(config)# aaa authentication enable enable-list radius none
switchxxxxxx(config)# line console
switchxxxxxx(config-line)# enable authentication enable-list

Cisco Business Switches 350 Series CLI Guide

169

login authentication

AAA Commands

login authentication

The login authentication Line Configuration mode command specifies the login authentication method list
for a remote Telnet or console session. Use the no form of this command to restore the default authentication
method.

Syntax

login authentication {default | list-name}

no login authentication

Parameters

• default—Uses the default list created with the aaa authentication login command.

• list-name—Uses the specified list created with the aaa authentication login command.

Default Configuration

default

Command Mode

Line Configuration Mode

Example 1 - The following example specifies the login authentication method as the default method
for a console session.

switchxxxxxx(config)# line console
switchxxxxxx(config-line)# login authentication default

Example 2 - The following example sets the authentication login methods for the console as a list
of methods.

switchxxxxxx(config)# aaa authentication login authen-list radius local none
switchxxxxxx(config)# line console
switchxxxxxx(config-line)# login authentication authen-list

Cisco Business Switches 350 Series CLI Guide

170

AAA Commands

enable authentication

enable authentication

The enable authentication Line Configuration mode command specifies the authentication method for
accessing a higher privilege level from a remote Telnet or console. Use the no form of this command to restore
the default authentication method.

Syntax

enable authentication {default | list-name}

no enable authentication

Parameters

• default—Uses the default list created with the aaa authentication enable command.

• list-name—Uses the specified list created with the aaa authentication enable command.

Default Configuration

default.

Command Mode

Line Configuration Mode

Example 1 - The following example specifies the authentication method as the default method when
accessing a higher privilege level from a console.

switchxxxxxx(config)# line console
switchxxxxxx(config-line)# enable authentication default

Example 2 - The following example sets a list of authentication methods for accessing higher privilege
levels.

switchxxxxxx(config)# aaa authentication enable enable-list radius none
switchxxxxxx(config)# line console
switchxxxxxx(config-line)# enable authentication enable-list

Cisco Business Switches 350 Series CLI Guide

171

ip http authentication

AAA Commands

ip http authentication

The ip http authentication Global Configuration mode command specifies authentication methods for HTTP
server access. Use the no form of this command to restore the default authentication method.

Syntax

ip http authentication aaa login-authentication [login-authorization] method1 [method2...]

no ip http authentication aaa login-authentication

Parameters

• login-authorization—Specifies that authentication and authorization are applied. If the keyword is not

configured, then only authentication is applied.

• method [method2...]—Specifies a list of methods that the authentication algorithm tries, in the given

sequence. The additional authentication methods are used only if the previous method returns an error,
not if it fails. Specify none as the final method in the command line to ensure that the authentication
succeeds, even if all methods return an error. Select one or more methods from the following list:

Keyword

Description

local

none

radius

tacacs

Uses the local username database for authentication.

Uses no authentication.

Uses the list of all RADIUS servers for authentication.

Uses the list of all TACACS+ servers for authentication.

Default Configuration

The local user database is the default authentication login method. This is the same as entering the ip http
authentication local command.

Command Mode

Global Configuration mode

User Guidelines

The command is relevant for HTTP and HTTPS server users.

Example

The following example specifies the HTTP access authentication methods.

switchxxxxxx(config)# ip http authentication aaa login-authentication radius local none

Cisco Business Switches 350 Series CLI Guide

172

AAA Commands

show authentication methods

show authentication methods

The show authentication methods Privileged EXEC mode command displays information about the
authentication methods.

Syntax

show authentication methods

Command Mode

Privileged EXEC mode

Example

The following example displays the authentication configuration:

switchxxxxxx# show

authentication methods
Login Authentication Method Lists
---------------------------------
Default: Radius, Local, Line
Consl_Login(with authorization): Line, None
Enable Authentication Method Lists
----------------------------------
Default: Radius, Enable
Consl_Enable(with authorization): Enable, None

.

Line
--------------
Console
Telnet
SSH

Login Method List
-----------------
Consl_Login
Default
Default

Enable Method List
------------------
Consl_Enable
Default
Default

HTTP, HHTPS: Radius, local
Dot1x: Radius

Cisco Business Switches 350 Series CLI Guide

173

login block-for

login block-for

Login Block-for

AAA Commands

Use the following global configuration mode command to configure a quiet mode period followed specified
number of failed login attempts. Use the no form of command to return to default settings:

Syntax

login block-for seconds attempts tries within seconds

no login block-for

Parameters

• Block for seconds - Duration (in seconds) of quiet mode period (the time in which login attempts are

denied) (range 1 - 65535 (18 hours) seconds).

• attempts tries - The number of failed login attempts that triggers the quiet mode period (range 1-100).

• within seconds - Duration of time (in seconds) in which the number of failed login attempts must be

made before the quiet mode period is triggered (range 1 - 3600 (1 hour) seconds).

Default Configuration

Quiet mode is not configured on device.

Command Mode

Global Configuration mode.

User Guidelines

If the specified number of connection attempts fails (attempt tries) within a specified time (within seconds),
the device will not accept any additional login attempts for a specified period of time (block-for seconds).

During the quiet-mode period, management connections to device are restricted by the quiet-mode access-class
which allows only the specified connections (command login quiet-mode access-class). For devices that
support a console connection the “console_only” management access-list is used as the default quiet-mode
access-class. In this case, all login attempts over the network (Telnet, SSH, SNMP, HTTP or HTTPS) are
denied during the quiet-mode period.

This command can be configured only if a quiet-mode access-class (default or user defined) is configured –
see “login quiet-mode access-class”

If the login block-for command is already configured on device and the command is reconfigured with new
parameters during the “watch period” – then the current count will be terminated, and a new count will begin
using new parameters. The Command is rejected if configured during login attack quiet-mode period.

The no form of command disables the feature and terminates the quiet mode period, if active.

Cisco Business Switches 350 Series CLI Guide

174

AAA Commands

Login Block-for

Examples

Example 1 - The following example shows how to block all login requests for 180 seconds if 18 failed login
attempts are exceeded within 180 seconds:

switchxxxxxx(config)# login block-for 180 attempts 18 within 180

Example 2 -The following example displays an attempt to configure command during device quiet mode
period:

switchxxxxxx(config)# login block-for 18 attempts 8 within 50

Cannot configure login block-for setting while device is in Quiet-Mode.

Example 3 - The following example displays an failure to configure command. Failure reason: quiet-mode
access class (default or user defined) is not configured:

switchxxxxxx(config)# login block-for 770 attempts 7 within 613

Cannot configure login block-for setting since quiet-mode access-class is not configured.

Cisco Business Switches 350 Series CLI Guide

175

login delay

login delay

AAA Commands

Use the login delay Global Configuration mode command to configure a delay in device response to a failed
login attempts. Use the no form of this command to return to the default setting.

Syntax

login delay seconds

no login delay

Parameters

• seconds - The delay (in seconds) that is imposed between failed login attempts (range 1-10 seconds).

Default Configuration

By default, login delay is disabled.

Command Mode

By default, login delay is disabled.

User Guidelines

The login delay command introduces a delay in device response following a failed login attempt (HTTP,
HTTPS, Telnet, SSH and SNMP). The delay provides better protection from possible dictionary attacks.

Examples

Example 1 - The following example sets a delay of 5 seconds following a failed login attempt:

switchxxxxxx(config)# login delay 5

Cisco Business Switches 350 Series CLI Guide

176

AAA Commands

login quiet-mode access-class

login quiet-mode access-class

Use the login quiet-mode access-class Global Configuration mode command to to specify a management
access control list (MACL) that will be applied when the device transitions to the login quiet-mode. Use the
no form of this command to return to the default setting.

Syntax

login quiet-mode access-class name

no login quiet-mode access-class

Parameters

• name – the name of the management ACL to apply on the device while in login quiet mode.

Default Configuration

By default, the "console-only" management access list is applied as the default quiet-mode access-class. For
devices that do not support console - the quiet-mode access-class has no default.

Command Mode

Global configuration mode.

User Guidelines

Use the login quiet-mode access-class command to allow selective hosts access to the device management
during a login quiet period. Access is allowed based on the specified Management ACL. The management
access list needs to be created prior to configuring this command using the management access-list command.

This settings provides the ability to grant access to a client or list of clients even during a quiet-mode period.
On devices that support a console connection the "console-only" management access-list is applied by default
during a quiet-mode period, meaning all network login connections (telnet, SSH, SNMP, HTTP, HTTPS) are
denied, while a connection from the console is allowed. On devices that do not support a console there is no
default access-class and the login block-for command cannot be configured if user did not first define a
quiet-mode access-class.

The command is rejected if it is configured during a quiet-mode period.

The no form of the command returns quiet-mode access-class to the default setting. On devices without a
console the no command cannot be applied if login block-for command is configured.

Examples

Example 1 - The following example shows how to configure the device to accept connection during quiet
mode period based on quiet-acl management access list:

switchxxxxxx(config)# login quiet-mode access-class quiet-acl

Cisco Business Switches 350 Series CLI Guide

177

show login

show login

Use the following privileged exec mode command to display login setting and status:

AAA Commands

Syntax

show login

Parameters

N/A

Default Configuration

N/A

Command Mode

Privileged EXEC mode

User Guidelines

This command displays setting and status related to commands login delay, Login block-for and login
quiet-mode access-class.

Examples

Example 1 - The following example shows output if no login settings have been applied or changed:

switchxxxxxx# show login
Login delay: disabled
Login Attacks watch: disabled
Quiet-Mode access list: console-only (the default)

Example 2 - The following example shows the show login command output where the user set the login delay
to 5 seconds, configured a login block period and the device is not in quiet-mode:

switchxxxxxx# show login
Login delay: 5 second
Login Attacks watch: enabled
If more than 4 login failures occur in 60 seconds or less, logins will be disabled for 60
seconds.
Quiet-Mode access list: console-only (the default)
Quiet-Mode: inactive
Watch Window remaining time: 44 seconds.
Present login failure count: 3.

Note

Login failure count is counted from the earliest failed login that is still valid (within a watching windows)

Example 3 - The following example shows output where user set login delay to 5 seconds, configured a login
block period and device is in quiet mode:

switchxxxxxx# show login
Login delay: 5 second

Cisco Business Switches 350 Series CLI Guide

178

AAA Commands

show login

Login Attacks watch: enabled
If more than 4 login failures occur in 60 seconds or less, logins will be disabled for 60
seconds.
Quiet-Mode access list: console-only (the default)
Quiet-Mode: active (time remaining: 20 seconds)

Cisco Business Switches 350 Series CLI Guide

179

show login failures

AAA Commands

show login failures

Use the following privileged exec mode command to display information on failed login attempts:

Syntax

Show login failures

Parameters

NA

Default Configuration

NA

Command Mode

Privileged EXEC mode

User Guidelines

This command displays information on last 50 failed login attempts. Information includes the username
provided in the failed attempt (if provided as part of attempt), source IP used in failed attempt, service requested
in the failed attempt, the number of failed attempts for this connection and the time stamp of last failed attempt
for this connection. Entries are sorted from the newest time stamp to the oldest.

Examples

switchxxxxxx# show login failures

Information about last 50 login failure's with the device.

Username

Source IP

Service

Count

TimeStamp

––––––––––

––––––––––

––––––––––

––––––––––

––––––––––

ffff

fff

bb

fff

ffff

10.5.44.25

telnet

10.5.44.25

telnet

10.5.44.25

10.5.44.25

10.5.44.25

ssh

ssh

ssh

3

4

2

2

2

00:01:23 edt Wed
Jul 7 2021

08:37:08 edt Thu Jul
8 2021

00:17:59 edt Wed
Jul 7 2021

00:20:37 edt Wed
Jul 7 2021

00:21:12 edt Wed
Jul 7 2021

Cisco Business Switches 350 Series CLI Guide

180

AAA Commands

show login failures

Username

Source IP

Service

Count

TimeStamp

aaaa

fe80::1111

ssh

10.5.44.25

telnet

10.5.44.22

telnet

10.5.44.23

telnet

aaa

555

2

3

1

1

00:21:26 edt Wed
Jul 7 2021

00:38:14 edt Wed
Jul 7 2021

08:37:16 edt Thu Jul
8 2021

08:37:26 edt Thu Jul
8 2021

Cisco Business Switches 350 Series CLI Guide

181

password

password

AAA Commands

Use the password Line Configuration mode command to specify a password on a line (also known as an
access method, such as a console or Telnet). Use the no form of this command to return to the default password.

Syntax

password {unencrypted-password [method hash-method] | encrypted-password encrypted}

password generate-password [method hash-method]

no password

Parameters

• unencrypted-password—The authentication password for the user. (Range: 1–64)

• [method hash-method] — (optional) specifies the method used for encrypting the clear-text password.

Supported values:

• sha512 - PBKDF2 encryption with HMAC using the SHA512 as the underlying Hashing Algorithm.

This is the default method if the method parameter is not specified.

• encrypted encrypted-password—Specifies that the password is encrypted and hashed using a salt. Use
this keyword to enter a password that is already encrypted (for instance, a password that was copied from
the configuration file of another device). The encrypted-password is specified in the format of
$<type>$<salt>$<encrypted-password >, where:

• <type> - is an integer value that indicates the type of hash algorithm used to generate the hash

• <salt> - The base64 encoding of the 96 bits used for salt (length – 16 bytes)

• <encrypted-password> - The base64 encoding of the encrypted hash output (length - 86 bytes)

Default Configuration

No password is defined.

Command Mode

Line Configuration Mode

User Guidelines

The unencrypted-password must comply to password complexity requirements.

If the generate-password option is selected, the user does not need to input a password. Instead, the device
will automatically generate a random based password suggestion. This suggestion will be displayed to the
user, and the user will be presented with an option to accept or reject the proposed password. If user selected
to accept the proposed password, then the specified username with this password (in encrypted format) will
be added to device configuration file. If user rejects the proposed password then a new command needs to be
entered by the user.

Cisco Business Switches 350 Series CLI Guide

182

AAA Commands

password

Example

Example 1 -The following example specifies the password ‘secreT123!’ on the console line.

switchxxxxxx(config)# line console
switchxxxxxx(config-line)# password secreT123!

Example 2 - The command in this example includes the generate-password key word. in this case the device
will propose a randomly generated password to be used. in the example below the user selects to accept the
proposed password.

switchxxxxxx(config)# line console
switchxxxxxx(config-line)# password generate-password
Generated password: aBgrT9!59Hq$
Accept generated password (y/n) [Y] y
“Configuration and password are added to device configuration. Please Note
password for future use.”

Example 3 - The command in this example includes the generate-password key word. in this case the device
will propose a randomly generated password to be used. in the example below the user selects to reject the
proposed password.

switchxxxxxx(config)# line console
switchxxxxxx(config-line)# password generate-password
Generated password: aBgrT9!59Hq$
Accept generated password (y/n) [Y] n
“Auto generated password rejected by user. Password configuration is not added to
device configuration”

Cisco Business Switches 350 Series CLI Guide

183

enable password

AAA Commands

enable password

Use the enable password Global Configuration mode command to set a local password to control access to
normal and privilege levels. Use the no form of this command to return to the default password.

Syntax

enable password [level privilege-level] {[method hash-method] unencrypted-password | encrypted
encrypted-password}

no enable password [level privilege-level]

Parameters

• level privilege-level—Level for which the password applies. If not specified, the level is 15. (Range:

1–15)

• [method hash-method] — (optional) specifies the method used for encrypting the clear-text password.

Supported values:

• sha512 - PBKDF2 encryption with HMAC using the SHA512 as the underlying Hashing Algorithm.

This is the default method if the method parameter is not specified.

• unencrypted-password—Password for this level. (Range: 0–159 chars)

• encrypted encrypted-password—Specifies that the password is encrypted and hashed using a salt. Use
this keyword to enter a password that is already encrypted (for instance, a password that was copied from
the configuration file of another device). The encrypted-password is specified in the format of
$<type>$<salt>$<encrypted-password >, where:

• <type> - is an integer value that indicates the type of hash algorithm used to generate the hash

• <salt> - The base64 encoding of the 96 bits used for salt (length – 16 bytes)

• <encrypted-password> - The base64 encoding of the encrypted hash output (length - 86 bytes)

Default Configuration

Default for level is 15.

Command Mode

Global Configuration mode

User Guidelines

The unencrypted-password must comply to password complexity requirements

When the administrator configures a new enable password, this password is encrypted automatically and
saved to the configuration file. No matter how the password was entered, it appears in the configuration file
with the keyword encrypted and the encrypted value. The administrator is required to use the encrypted
keyword only when actually entering an encrypted keyword.

Cisco Business Switches 350 Series CLI Guide

184

AAA Commands

enable password

If the administrator wants to manually copy a password that was configured on one switch (for instance,
switch B) to another switch (for instance, switch A), the administrator must add encrypted in front of this
encrypted password when entering the enable command in switch A. In this way, the two switches will have
the same password.

The administrator is required to use the encrypted keyword only when actually entering an encrypted keyword.

If the generate-password option is used, instead of entering a password the user will be presented with a
randomly generated password suggestion. This suggestion will comply with all current password strength
settings

The user will be given the choice to accept or reject the proposed password. If the user elects to accept the
password, then this password will be added for the configured enable level (in encrypted format) in the
configuration file.

If the user rejects the password suggestion, the command will need to be entered again to configure this enable
level.

Example

Example 1 - The command sets a password that has already been encrypted. It will be copied to the
configuration file just as it is entered. To login to device using this password, the user must know its unencrypted
form.

switchxxxxxx(config)# enable password encrypted
$15$TqKC13RgV/QJb2Ma$4JmeD7wgRGH2iwGKMM+g4M53uQxpOMlhkUN56UMAEUuMqhw0bsRH27zakc7
2hLxt/YhEknPA6LX7fTgqwZn6Vw==

Example 2 - The command sets an unencrypted password for level 1 (it will be encrypted in the configuration
file).

switchxxxxxx(config)# enable password level 1 let-me-In

Example 3 - The command in this example includes the generate-password key word. in this case the device
will propose a randomly generated password to be used. in the example below the user selects to accept the
proposed password.

switchxxxxxx(config)# enable password generate-password
Generated password: aBgrT9!59Hq$
Accept generated password (y/n) [Y] y
“Configuration and password are added to device configuration. Please Note
password for future use”

Example 4 - The command in this example includes the generate-password key word. in this case the device
will propose a randomly generated password to be used. in the example below the user selects to rejects the
proposed password.

switchxxxxxx(config)# enable password generate-password
Generated password: aBgrT9!59Hq$
Accept generated password (y/n) [Y] n
“Auto generated password rejected by user. Password configuration is not added to
device configuration”

Cisco Business Switches 350 Series CLI Guide

185

service password-recovery

AAA Commands

service password-recovery

Use the service password-recovery Global Configuration mode command to enable the password-recovery
mechanism. This mechanism allows an end user, with physical access to the console port of the device, to
enter the boot menu and trigger the password recovery process. Use the no service password-recovery
command to disable the password-recovery mechanism. When the password-recovery mechanism is disabled,
accessing the boot menu is still allowed and the user can trigger the password recovery process. The difference
is, that in this case, all the configuration files and all the user files are removed. The following log message
is generated to the terminal: “All the configuration and user files were removed”.

Syntax

service password-recovery

no service password-recovery

Default Configuration

The service password recovery is enabled by default.

Command Mode

Global Configuration mode

User Guidelines

• If password recovery is enabled, the user can access the boot menu and trigger the password recovery

in the boot menu. All configuration files and user files are kept.

• If password recovery is disabled, the user can access the boot menu and trigger the password recovery

in the boot menu. The configuration files and user files are removed.

• If a device is configured to protect its sensitive data with a user-defined passphrase for (Secure Sensitive
Data), then the user cannot trigger the password recovery from the boot menu even if password recovery
is enabled.

Example

The following command disables password recovery:

switchxxxxxx(config)# no service password recovery
Note that choosing to use Password recovery option in the Boot Menu during the boot process
will remove the configuration files and the user files. Would you like to continue ? Y/N.

Cisco Business Switches 350 Series CLI Guide

186

AAA Commands

username

username

Use the username Global Configuration mode command to create or edit a username based user authentication
account. Use the no form to remove a user account.

Syntax

username name {[method hash-method] password {unencrypted-password | {encrypted
encrypted-password}} | {privilege privilege-level {[method hash-method] unencrypted-password | {encrypted
encrypted-password}}}}

username name {[method hash-method] generate-password | {privilege privilege-level{[method
hash-method] generate-password}

no username name

Parameters

• name—The name of the user. (Range: 1–20 characters)

• [method hash-method] — (optional) specifies the method used for encrypting the clear-text password.

Supported values:

• sha512 - PBKDF2 encryption with HMAC using the SHA512 as the underlying Hashing Algorithm.

This is the default method if the method parameter is not specified.

• password—Specifies the password for this username.

• unencrypted-password—The authentication password for the user. (Range: 1–64)

• encrypted encrypted-password—Specifies that the password is encrypted and hashed using a salt. Use
this keyword to enter a password that is already encrypted (for instance, a password that was copied from
the configuration file of another device). The encrypted-password is specified in the format of
$<type>$<salt>$<encrypted-password >, where:

• <type> - is an integer value that indicates the type of hash algorithm used to generate the hash.

• <salt> - The base64 encoding of the 96 bits used for salt (length – 16 bytes)

• <encrypted-password> - The base64 encoding of the encrypted hash output (length - 86 bytes)

• generate-password - The device automatically generates a random based password suggestion. The user

has an option to accept or reject the proposed password.

• privilege privilege-level —User account privilege level. If not specified the level is 1. (Range: 1–15).

Default Configuration

No user is defined.

Command Mode

Global Configuration mode

Cisco Business Switches 350 Series CLI Guide

187

username

AAA Commands

Usage Guidelines

The unencrypted-password must comply to password complexity requirements.

If the generate-password option is used, instead of entering a password the user will be presented with a
randomly generated password suggestion. This suggestion will comply with all current password strength
settings. The user will be given the choice to accept or reject the proposed password. If the user elects to
accept the password, then this password will be added for the configured user name (in encrypted format) in
the configuration file.

If the user rejects the password suggestion, the command will need to be entered again to configure this user.

The knowledge of the current password is required if the user requests to modify the password of the account
used to login to the current session (while maintaining the current username). The user will be prompted to
provide the current password in clear-text format. The password change will succeed only if the user correctly
provided the current password.

The last level 15 user cannot be removed and cannot be a remote user

Example

Example 1- Sets an unencrypted password for user tom (level 15). It will be encrypted in the configuration
file.

switchxxxxxx(config)# username tom password 1234Ab$5678

Example 2 - Sets a password for user jerry (level 15) that has already been encrypted. It will be copied to the
configuration file just as it is entered. To use it, the user must know its unencrypted form.

switchxxxxxx(config)# username jerry privilege 15 encrypted
$15$TqKC13RgV/QJb2Ma$4JmeD7wgRGH2iwGKMM+g4M53uQxpOMlhkUN56UMAEUuMqhw0bsRH27zakc72hLxt/YhEknPA6LX7fTgqwZn6Vw==

Example 3 - The command in this example includes the generate-password key word. in this case the device
will propose a randomly generated password to be used. in the example below the user selects to accept the
proposed password.

switchxxxxxx(config)# username tom generate-password privilege 15
Generated password: aBgrT9!59Hq$
Accept generated password (y/n) [Y] y
“Configuration and password are added to device configuration. Please Note
password for future use.”

Example 4 - The command in this example includes the generate-password key word. in this case the device
will propose a randomly generated password to be used. in the example below the user selects to reject the
proposed password.

switchxxxxxx(config)# username tom generate-password privilege 15
Generated password: aBgrT9!59Hq$
Accept generated password (y/n) [Y] n
“Auto generated password rejected by user. Password configuration is not added to
device configuration.”

Cisco Business Switches 350 Series CLI Guide

188

AAA Commands

show users accounts

show users accounts

The show users accounts Privileged EXEC mode command displays information about the users local
database.

Syntax

show users accounts

Command Mode

Privileged EXEC mode

Example

The following example displays information about the users local database:

switchxxxxxx# show users accounts

Username
--------
Bob
Robert
Smith

Privilege
---------
15
15
15

Password
Expiry date
----------
Jan 18 2005
Jan 19 2005

The following table describes the significant fields shown in the display:

Field

Username

Privilege

Description

The user name.

The user’s privilege level.

Password Expiry date

The user's password expiration date.

Cisco Business Switches 350 Series CLI Guide

189

aaa accounting login start-stop

AAA Commands

aaa accounting login start-stop

Use the aaa accounting login start-stop command in Global Configuration mode to enable accounting of
device management sessions. Use the no form of this command to disable accounting.

Syntax

aaa accounting login start-stop group {radius | tacacs+}

no aaa accounting login start-stop

Parameters

• group radius—Uses a RADIUS server for accounting.

• group tacacs+—Uses a TACACS+ server for accounting.

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

This command enables the recording of device management sessions (Telnet, serial and WEB but not SNMP).

It records only users that were identified with a username (e.g. a user that was logged in with a line password
is not recorded).

If accounting is activated, the device sends a “start”/“stop” messages to a RADIUS server when a user logs
in / logs out respectively.

The device uses the configured priorities of the available RADIUS/TACACS+ servers in order to select the
RADIUS/TACACS+ server.

The following table describes the supported RADIUS accounting attributes values, and in which messages
they are sent by the switch.

Name

Start Message

Stop Message

Description

User-Name (1)

NAS-IP-Address (4)

Class (25)

Yes

Yes

Yes

Called-Station-ID (30)

Yes

Yes

Yes

Yes

Yes

User’s identity.

The switch IP address that is used for the
session with the RADIUS server.

Arbitrary value is included in all accounting
packets for a specific session.

The switch IP address that is used for the
management session.

Cisco Business Switches 350 Series CLI Guide

190

AAA Commands

aaa accounting login start-stop

Name

Start Message

Stop Message

Description

Calling-Station-ID (31)

Yes

Acct-Session-ID (44)

Acct-Authentic (45)

Yes

Yes

Acct-Session-Time (46)

No

Acct-Terminate-Cause
(49)

No

Yes

Yes

Yes

Yes

Yes

The user IP address.

A unique accounting identifier.

Indicates how the supplicant was
authenticated.

Indicates how long the user was logged in.

Reports why the session was terminated.

The following table describes the supported TACACS+ accounting arguments and in which messages they
are sent by the switch.

Description

Start Message

Stop Message

Name

task_id

user

A unique accounting session identifier.

username that is entered for login
authentication

Yes

Yes

Yes

rem-addr

IP address of the user

elapsed-time

Indicates how long the user was logged in.

No

reason

Reports why the session was terminated.

No

Example

switchxxxxxx(config)# aaa accounting login start-stop group radius

Yes

Yes

Yes

Yes

Yes

Cisco Business Switches 350 Series CLI Guide

191

aaa accounting dot1x

AAA Commands

aaa accounting dot1x

To enable accounting of 802.1x sessions, use the aaa accounting dot1x Global Configuration mode command.
Use the no form of this command to disable accounting.

Syntax

aaa accounting dot1x start-stop group radius

no aaa accounting dot1x start-stop group radius

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

This command enables the recording of 802.1x sessions.

If accounting is activated, the device sends start/stop messages to a RADIUS server when a user logs in / logs
out to the network, respectively. The device uses the configured priorities of the available RADIUS servers
in order to select the RADIUS server.

If a new supplicant replaces an old supplicant (even if the port state remains authorized), the software sends
a stop message for the old supplicant and a start message for the new supplicant.

In multiple sessions mode (dot1x multiple-hosts authentication), the software sends start/stop messages for
each authenticated supplicant.

In multiple hosts mode (dot1x multiple-hosts), the software sends start/stop messages only for the supplicant
that has been authenticated. The software does not send start/stop messages if the port is force-authorized.

The software does not send start/stop messages for hosts that are sending traffic on the guest VLAN or on the
unauthenticated VLANs.

The following table describes the supported Radius accounting Attributes Values and when they are sent by
the switch.

Name

Start

Stop

Description

User-Name (1)

NAS-IP-Address (4)

Yes

Yes

Yes

Yes

NAS-Port (5)

Yes

Yes

Supplicant’s identity.

The switch IP address that is
used for the session with the
RADIUS server.

The switch port from where
the supplicant has logged in.

Cisco Business Switches 350 Series CLI Guide

192

AAA Commands

aaa accounting dot1x

Name

Class (25)

Start

Stop

Description

Yes

Yes

Called-Station-ID (30)

Calling-Station-ID (31)

Acct-Session-ID (44)

Yes

Yes

Yes

Yes

Yes

Yes

Acct-Authentic (45)

Yes

Yes

Acct-Session-Time (46)

No

Yes

Acct-Terminate-Cause (49)

No

Yes

Nas-Port-Type (61)

Yes

Yes

The arbitrary value that is
included in all accounting
packets for a specific session.

The switch MAC address.

The supplicant MAC address.

A unique accounting
identifier.

Indicates how the supplicant
was authenticated.

Indicates how long the
supplicant was logged in.

Reports why the session was
terminated.

Indicates the supplicant
physical port type.

Example

switchxxxxxx(config)# aaa accounting dot1x start-stop group radius

Cisco Business Switches 350 Series CLI Guide

193

show accounting

AAA Commands

show accounting

The show accounting EXEC mode command displays information as to which type of accounting is enabled
on the switch.

Syntax

show accounting

Command Mode

User EXEC mode

Example

The following example displays information about the accounting status.

switchxxxxxx# show accounting
Login: Radius
802.1x: Disabled

Cisco Business Switches 350 Series CLI Guide

194

AAA Commands

passwords complexity

passwords complexity

Use the passwords complexity Global Configuration mode commands to control the minimum requirements
from a password when password complexity is enabled. Use the no form of these commands to return to
default.

Syntax

passwords complexity {min-length number} | {min-classes number} | {no-repeat number} | not-current
| not-username | not-manufacturer-name

no passwords complexity min-length | min-classes | no-repeat | not-current | not-username |
not-manufacturer-name

Parameters

• min-length number—Sets the minimal length of the password. (Range: 8–64)

• min-classes number—Sets the minimal character classes (uppercase letters, lowercase letters, numbers,

and special characters available on a standard keyboard). (Range: 1–4)

• no-repeat number—Specifies the maximum number of characters in the new password that can be

repeated consecutively. (Range: 1–16)

• not-current—Specifies that the new password cannot be the same as the current password.

• not-username—Specifies that the password cannot repeat or reverse the user name or any variant reached

by changing the case of the characters.

• not-manufacturer-name—Specifies that the password cannot repeat or reverse the manufacturer’s name

or any variant reached by changing the case of the characters.

Default Configuration

The minimal length is 8.

The number of classes is 3.

The default for no-repeat is 3.

All the other controls are enabled by default.

Command Mode

Global Configuration mode

Example

The following example configures the minimal required password length to 10 characters.

switchxxxxxx(config)# passwords complexity min-length 10

Cisco Business Switches 350 Series CLI Guide

195

passwords aging

AAA Commands

passwords aging

Use the passwords aging Global Configuration mode command to enforce password aging. Use the no form
of this command to return to default.

Syntax

passwords aging days

no passwords aging

Parameters

• days—Specifies the number of days before a password change is forced. You can use 0 to disable aging.

(Range: 0–365).

Default Configuration

Password aging is disabled by default.

Command Mode

Global Configuration mode

User Guidelines

The password aging setting is relevant to local database users, enable passwords and line passwords.

If password aging is enabled, when a user logs into the device within the 10 days preceding the password
expiration date, a warning will be displayed alerting the user that the password will expire soon. The user is
granted access to the device without changing the password. At this stage it is the user’s responsibility to
change the password before the expiration date.

Is the user logs into the device after the password expiration date, they are prompted to enter a new password
and are not allowed access to the device management until a new password has been configured.

To disable password aging, use passwords aging 0.

Example

The following example configures the aging time to be 24 days.

witchxxxxxx(config)# passwords aging 24

Cisco Business Switches 350 Series CLI Guide

196

AAA Commands

password complexity history

password complexity history

The passwords complexity history Global Configuration mode command configures the number of password
changes required before a password can be reused. Use the no form of this command to return to the default
setting

Syntax

passwords complexity history number

no passwords complexity history

Parameters

number—Specifies the number of password changes required before a password can be reused. (Range:
3–12).

Default Configuration

By default the number of passwords changes that are needed before password reuse is 12.

Command Mode

Global configuration mode.

User Guidelines

The setting is relevant to local users’ passwords, line passwords and enable passwords.

The local user history is maintained for users up to the number of local users supported on the device.

Password history is not checked during a configuration download.

The password history is kept even if the password history check is disabled.

Example

The following example sets the number of password changes required before a password can be reused to 10.

switchxxxxxx(config)# passwords complexity history 10

Cisco Business Switches 350 Series CLI Guide

197

aaa login-history file

AAA Commands

aaa login-history file

The aaa login-history file Global Configuration mode command enables writing to the login history file. Use
the no form of this command to disable writing to the login history file.

Syntax

aaa login-history file

no aaa login-history file

Default Configuration

Writing to the login history file is enabled.

Command Mode

Global Configuration mode.

User Guidelines

The login history is stored in the device internal buffer.

Example

The following example enables writing to the login history file.

switchxxxxxx(config)# aaa login-history file

Cisco Business Switches 350 Series CLI Guide

198

AAA Commands

show passwords configuration

show passwords configuration

The show passwords configuration Privileged EXEC mode command displays information about the password
management configuration.

Syntax

show passwords configuration

Parameters

N/A

Default Configuration

N/A

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# show passwords configuration
Passwords aging is enabled with aging time 180 days.
Passwords history is enabled, the number of previous passwords to check is 12
Passwords complexity is enabled with the following attributes:
Minimal length: 8 characters
Minimal classes: 3
Maximum consecutive same characters: 3
Password cannot contain the username, manufacturer name or product name
Password must be different from current password

Cisco Business Switches 350 Series CLI Guide

199

show users login-history

AAA Commands

show users login-history

The show users login-history Privileged EXEC mode command displays information about the user’s login
history.

Syntax

show users login-history [username name]

Parameters

• name—Name of the user. (Range: 1–20 characters).

Default Configuration

N/A

Command Mode

Privileged EXEC mode.

User Guidelines

This command displays information on users authenticated using the local AAA database and not on users
authenticated using remote AAA servers like Radius and TACACS.

Example

The following example displays information about the users’ login history.

Example 1 - The following example shows how to block all login requests for 180 seconds if 18 failed login
attempts are exceeded within 180 seconds:

Username Protocol

switchxxxxxx# show users login-history
File save: Enabled.
Login Time
--------------------
Jan 18 2004 23:58:17
Jan 19 2004 07:59:23
Jan 19 2004 08:23:48
Jan 19 2004 08:29:29
Jan 19 2004 08:42:31
Jan 19 2004 08:49:52

Robert
Robert
Bob
Robert
John
Betty

HTTP
HTTP
Serieal
HTTP
SSH
Telnet

Location

172.16.1.8
172.16.1.8

172.16.1.8
172.16.0.1
172.16.1.7

Cisco Business Switches 350 Series CLI Guide

200

Auto-Update and Auto-Configuration

This chapter contains the following sections:

• boot host auto-config, on page 202
• boot host auto-update, on page 203
• show boot, on page 204
• ip dhcp tftp-server ip address, on page 206
• ip dhcp tftp-server file, on page 207
• ip dhcp tftp-server image file, on page 208
• show ip dhcp tftp-server, on page 209

Cisco Business Switches 350 Series CLI Guide

201

boot host auto-config

Auto-Update and Auto-Configuration

boot host auto-config

Use the boot host auto-config Global Configuration mode command to enable auto configuration via DHCP.
Use the no form of this command to disable DHCP auto configuration.

Syntax

boot host auto-config [tftp | scp | auto [extension]]

no boot host auto-config

Parameters

• tftp—Only the TFTP protocol is used by auto-configuration.

• scp—Only the SCP protocol is used by auto-configuration.

• auto—(Default) Auto-configuration uses the TFTP or SCP protocol depending on the configuration file's

extension. If this option is selected, the extension parameter may be specified or, if not, the default
extension is used.

• extension—The SCP file extension. When no value is specified, 'scp' is used. (Range: 1-16 characters)

Default Configuration

Enabled by default with the auto option.

Command Mode

Global Configuration mode

User Guidelines

The TFTP or SCP protocol is used to download/upload a configuration file.

Example 1. The following example specifies the auto mode and specifies "scon" as the SCP extension:

switchxxxxxx(config)# boot host auto-config auto scon

Example 2. The following example specifies the auto mode and does not provide an SCP extension.

In this case "scp" is used.

switchxxxxxx(config)# boot host auto-config auto

Example 3. The following example specifies that only the SCP protocol will be used:

switchxxxxxx(config)# boot host auto-config scp

Cisco Business Switches 350 Series CLI Guide

202

Auto-Update and Auto-Configuration

boot host auto-update

boot host auto-update

Use the boot host auto-update Global Configuration mode command to enable the support of auto update
via DHCP. Use the no form of this command to disable DHCP auto configuration.

Syntax

boot host auto-update [tftp | scp | auto [extension]]

no boot host auto-update

Parameters

• tftp—Only the TFTP protocol is used by auto-update.

• scp—Only the SCP protocol is used by auto-update.

• auto (Default)—Auto-update uses the TFTP or SCP protocol depending on the Indirect image file's
extension. If this option is selected, the extension parameter may be specified or, if not, the default
extension is used.

• extension—The SCP file extension. When no value is specified, 'scp' is used. (Range: 1-16 characters)

Default Configuration

Enabled by default with the auto option.

Command Mode

Global Configuration mode

User Guidelines

The TFTP or SCP protocol is used to download/upload an image file.

Example 1—The following example specifies the auto mode and specifies "scon" as the SCP
extension:

switchxxxxxx(config)# boot host auto-update auto scon

Example 2—The following example specifies the auto mode and does not provide an SCP extension.
In this case "scp" is used.

switchxxxxxx(config)# boot host auto-update auto

Example 3—The following example specifies that only the SCP protocol will be used:

switchxxxxxx(config)# boot host auto-update scp

Cisco Business Switches 350 Series CLI Guide

203

show boot

show boot

Auto-Update and Auto-Configuration

Use the show boot Privilege EXEC mode command to show the status of the IP DHCP Auto Config process.

Syntax

show boot

Command Mode

Privileged EXEC mode

Examples

switchxxxxxx# show boot
Auto Config
------------
Config Download via DHCP: enabled
Download Protocol: auto
SCP protocol will be used for files with extension: scp
Configuration file auto-save: enabled
Auto Config State: Finished successfully
Server IP address: 1.2.20.2
Configuration filename: /config/configfile1.cfg

Auto Update
-----------

Image Download via DHCP: enabled
switchxxxxxx# show boot
Auto Config
------------
Config Download via DHCP: enabled
Download Protocol: scp
Configuration file auto-save: enabled
Auto Config State: Opening <hostname>-config file

Auto Update
-----------

Image Download via DHCP: enabled
switchxxxxxx# show boot
Auto Config
------------
Config Download via DHCP: enabled
"Download Protocol: scp
Configuration file auto-save: enabled
Auto Config State: Downloading configuration file

Auto Update
-----------

Image Download via DHCP: enabled
switchxxxxxx# show boot
Auto Config
------------
Config Download via DHCP: enabled
Download Protocol: tftp
Configuration file auto-save: enabled
Auto Config State: Searching device hostname in indirect file

Auto Update
-----------

Image Download via DHCP: enabled
switchxxxxxx# show boot
Auto Config

Cisco Business Switches 350 Series CLI Guide

204

Auto-Update and Auto-Configuration

show boot

------------
Config Download via DHCP: enabled
Download Protocol: tftp
Configuration file auto-save: enabled

Auto Update
-----------

Image Download via DHCP: enabled
Auto Update State: Downloaded indirect image file
Indirect Image filename: /image/indirectimage.txt

Cisco Business Switches 350 Series CLI Guide

205

ip dhcp tftp-server ip address

Auto-Update and Auto-Configuration

ip dhcp tftp-server ip address

Use the ip dhcp tftp-server ip address Global Configuration mode command to set the backup server’s IP
address. This address server as the default address used by a switch when it has not been received from the
DHCP server. Use the no form of the command to return to default.

Syntax

ip dhcp tftp-server ip address ip-addr

no ip dhcp tftp-server ip address

Parameters

• ip-addr—IPv4 Address, or IPv6 Address or DNS name of TFTP or SCP server.

Default Configuration

No IP address

Command Mode

Global Configuration mode

User Guidelines

The backup server can be a TFTP server or a SCP server.

Examples

Example 1. The example specifies the IPv4 address of TFTP server:

switchxxxxxx(config)# ip dhcp tftp-server ip address 10.5.234.232

Example 2. The example specifies the IPv6 address of TFTP server:

switchxxxxxx(config)# ip dhcp tftp-server ip address 3000:1::12

Example 3. The example specifies the IPv6 address of TFTP server:

switchxxxxxx(config)# ip dhcp tftp-server ip address tftp-server.company.com

Cisco Business Switches 350 Series CLI Guide

206

Auto-Update and Auto-Configuration

ip dhcp tftp-server file

ip dhcp tftp-server file

Use the ip dhcp tftp-server file Global Configuration mode command to set the full file name of the
configuration file to be downloaded from the backup server when it has not been received from the DHCP
server. Use the no form of this command to remove the name.

Syntax

ip dhcp tftp-server file file-path

no ip dhcp tftp-server file

Parameters

• file-path—Full file path and name of the configuration file on the server.

Default Configuration

No file name

Command Mode

Global Configuration mode

User Guidelines

The backup server can be a TFTP server or an SCP server.

Examples

switchxxxxxx(config)# ip dhcp tftp-server file conf/conf-file

Cisco Business Switches 350 Series CLI Guide

207

ip dhcp tftp-server image file

Auto-Update and Auto-Configuration

ip dhcp tftp-server image file

Use the ip dhcp tftp-server image file Global Configuration mode command to set the indirect file name of
the image file to be downloaded from the backup server when it has not been received from the DHCP server.
Use the no form of this command to remove the file name.

Syntax

ip dhcp tftp-server image file file-path

no ip dhcp tftp-server image file

Parameters

• file-path—Full indirect file path and name of the configuration file on the server.

Default Configuration

No file name

Command Mode

Global Configuration mode

User Guidelines

The backup server can be a TFTP server or a SCP server.

Examples

switchxxxxxx(config)# ip dhcp tftp-server image file imag/imag-file

Cisco Business Switches 350 Series CLI Guide

208

Auto-Update and Auto-Configuration

show ip dhcp tftp-server

show ip dhcp tftp-server

Use the show ip dhcp tftp-server EXEC mode command to display information about the backup server.

Syntax

show ip dhcp tftp-server

Command Mode

User EXEC mode

User Guidelines

The backup server can be a TFTP server or a SCP server.

Example

show ip dhcp tftp-server
server address
active 1.1.1.1 from sname
manual 2.2.2.2
file path on server
active conf/conf-file from option 67
manual conf/conf-file1

Cisco Business Switches 350 Series CLI Guide

209

show ip dhcp tftp-server

Auto-Update and Auto-Configuration

Cisco Business Switches 350 Series CLI Guide

210

Bonjour Commands

This chapter contains the following sections:

• bonjour enable, on page 212
• bonjour interface range, on page 213
• show bonjour, on page 214

Cisco Business Switches 350 Series CLI Guide

211

bonjour enable

bonjour enable

Bonjour Commands

To enable Bonjour globally, use the bonjour enable command in Global Configuration mode. To disable
Bonjour globally, use the no format of the command.

Syntax

bonjour enable

no bonjour enable.

Default Configuration

Enable

Command Mode

Global Configuration mode

Examples

switchxxxxxx(config)# bonjour enable

Cisco Business Switches 350 Series CLI Guide

212

Bonjour Commands

bonjour interface range

bonjour interface range

To add L2 interfaces to the Bonjour L2 interface list, use the bonjour interface range command in Global
Configuration mode. To remove L2 interfaces from this list, use the no format of the command.

Syntax

bonjour interface range interface-list

no bonjour interface range [interface-list]

Parameters

• interface-list—Specifies a list of interfaces. Only interfaces supporting L2 Multicast forwarding can be
specified. The follow: LAN and point, which support be of the following types: OOB, Ethernet port,
Port-channel, and VLAN.

Default Configuration

The list includes the Default VLAN and OOB.

Command Mode

Global Configuration mode

User Guidelines

The Bonjour L2 interface list specifies a set of interfaces on which Bonjour is enabled.

Use the bonjour interface range interface-list command, to add the specified interfaces to the Bonjour L2
interface list.

Use the no bonjour interface range interface-list command, to remove the specified interfaces from the
Bonjour L2 interface list.

Use the no bonjour interface range command, to clear the Bonjour L2 interface list.

Examples

switchxxxxxx(config)# bonjour interface range VLAN 100-103

Cisco Business Switches 350 Series CLI Guide

213

show bonjour

show bonjour

To display Bonjour information, use the show bonjour command in Privileged EXEC mode.

Bonjour Commands

Syntax

show bonjour [interface-id]

Parameters

• interface-id—Specifies an interface.

Command Mode

Privileged EXEC mode

Examples

The example displays Bonjour status.

switchxxxxxx# show bonjour
Bonjour global status: enabled
Bonjour L2 interfaces list: vlans 1
Admin Status
Service
------------
-------
enabled
csco-sb
enabled
http
enabled
https
enabled
ssh
enabled
telnet

Oper Status
--------------
enabled
enabled
disabled
disabled
disabled

Cisco Business Switches 350 Series CLI Guide

214

CA Certificate Commands

This chapter contains the following sections:

• ca-certificate install, on page 216
• ca-certificate revoke, on page 218
• show ca-certificate, on page 219
• show ca-certificate revocation, on page 221

Cisco Business Switches 350 Series CLI Guide

215

ca-certificate install

CA Certificate Commands

ca-certificate install

To manually install a CA certificate, use the ca-certificate install command in Global Configuration mode.
To remove a static CA certificate, use the no form of this command.

Syntax

ca-certificate install name name [owner owner]

no ca-certificate install {name name | owner owner}

Parameters

• name—Specifies the certificate name. The range is from 1 to 160 characters.

• owner—specifies the owner of the certificate. This is a string of 0 to 32 characters. If an owner is not

specified, the default owner is "Static".

When adding a certificate, the certificate itself should follow the command on the command line.

Default Configuration

There are no installed certificates.

Command Mode

Global Configuration mode

User Guidelines

Use the ca-certificate install name command to install a CA certificate.

Following the command, the user will be prompted to enter the certificate in the command line.

The user will need to enter or paste the certificate. Entering a period on a separate line indicates that the
certificate input is complete.

The entered certificate must use the pem format.

A certificate will not be valid if the system clock was not set by user or synchronized with SNTP, or based
on hardware based Real Time Clock (RTC).

Up to 256 certificates can be installed.

When using the no form of the command to remove certificates, a specific certificate can be removed by
name. Alternatively, the owner keyword can be used to remove all static certificates belonging to a specific
owner.

Example 1. The following example installs a CA certificate from the command line:

switchxxxxxx(config)# ca-certificate install root1
Please paste the input now, add a period (.) on a separate line after the
input,and press Enter.
-----BEGIN CERTIFICATE-----
MIIBkzCB/QIBADBUMQswCQYDVQQGEwIgIDEKMAgGA1UECBMBIDEKMAgGA1UEBxMB
IDEVMBMGA1UEAxMMMTAuNS4yMzQuMjA5MQowCAYDVQQKEwEgMQowCAYDVQQLEwEg
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDK+beogIcke73sBSL7tC2DMZrY

Cisco Business Switches 350 Series CLI Guide

216

CA Certificate Commands

ca-certificate install

OOg9XM1AxfOiqLlQJHd4xP+BHGZWwfkjKjUDBpZn52LxdDu1KrpB/h0+TZP0Fv38
7mIDqtnoF1NLsWxkVKRM5LPka0L/ha1pYxp7EWAt5iDBzSw5sO4lv0bSN7oaGjFA
6t4SW2rrnDy8JbwjWQIDAQABoAAwDQYJKoZIhvcNAQEEBQADgYEAuqYQiNJst6hI
XFDxe7I8Od3Uyt3Dmf7KE/AmUV0Pif2yUluy/RuxRwKhDp/lGrK12tzLQz+s5Ox7
Klft/IcjzbBYXLvih45ASWG3TRv2WVKyWs89rPPXu5hKxggEeTvWqpuS+gXrIqjW
WVZd0n1fXhMacoflgnnEmweIzmrqXBs=
-----END CERTIFICATE-----
switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

217

ca-certificate revoke

CA Certificate Commands

ca-certificate revoke

To add a certificate to the revocation list, use the ca-certificate revoke command in Global Configuration
mode. To remove a certificate from the revocation list, use the no form of this command.

Syntax

ca-certificate revoke issuer issuer serial-number serial-number

no ca-certificate revoke issuer issuer serial-number serial-number

Parameters

• issuer—The issuer string as it appears in the revoked certificate - including all parameters (Range: 1-160

characters).

• serial-number—The serial number of the revoked certificate. This is a string in hexadecimal format

(Range: 1-16 pairs of characters).

Default Configuration

There are no revoked certificates.

Command Mode

Global Configuration mode

User Guidelines

Use the ca-certificate revoke command to add a certificate to the revocation list.

When entering the issuer information, the full issuer string should be entered as it appears in the certificate.
If the string contains spaces, it must be contained in quotation marks.

Adding a certificate to this list will change the status of this certificate to "revoked" if it is installed. If the
certificate is not installed, it will receive the revoked status if it is installed at a later date.

Up to 512 certificates can be added to the revocation list.

Example 1. The following example adds a CA certificate to the revocation list:

switchxxxxxx(config)# ca-certificate revoke issuer "C=US, O=GlobalSign nv-sa, CN=GlobalSign

Organization Validation" serial-number 10ad0044a8418ad5005e45b6

switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

218

CA Certificate Commands

show ca-certificate

show ca-certificate

To display the CA certificates installed on the device and their status, use the show ca-certificate command
in Privileged EXEC mode.

Syntax

show ca-certificate [name name][type type][owner owner-name][detailed]

Parameters

• name name - Specifies the certificate name. (Range: 1-160 characters).

• type type—Specifies the certificate type. The possible values are static, dynamic or signer.

• owner owner-name—Specifies the name of the certificate owner - this is the application that installed a

dynamic certificate. (Range: 1-32 characters).

• detailed - This optional parameter shows detailed information of the displayed certificates. If this

parameter is not used, only limited information will be displayed for each certificate.

Command Mode

Privileged EXEC mode

User Guidelines

Use the show ca-certificate command to display all installed CA certificates.

Use the optional name, type and owner parameters to display the information of a subset of certificates.

Example 1 The following example displays brief information for all static CA certificates.

Type

Owner

switchxxxxxx# show ca-certificate type static
Name
------------- ------ -------- ----------- ----------- ----------
static rnd
local.cert
static app1
app1.cert1
app1.cert2
static app1
trusted-cert1 static app2
static app3
certif3

03-Aug-2019 03-Aug-2020 Valid
16-Jan-2021 16-Jul-2023 Premature
15-Mar-2017 14-Mar-2018 Expired
27-Jun-2019 26-Jun-2024 Valid
08-Feb-2018 08-Feb-2020 Revoked

Valid From

Valid To

Status

Example 2 The following example displays detailed information for all CA certificates:

switchxxxxxx# show ca-certificate detailed
>C-CountryName, ST-StateOrProvinceName, L-Locality, O-Organization,
>OU-OrganizationalUnit, CN-CommonName
cert1

Type: Signer
Owner: N/A
Version: 3 (0x2)
Serial Number: 10:ad:00:44:a8:41:8a:d5:00:5e:45:b6
Issuer: C=US, O=GlobalSign nv-sa, CN=GlobalSign Organization Validation
Status: Valid
Validity

Not Before: Nov 21 08:00:00 2015 GMT
Not After : Nov 22 07:59:59 2020 GMT

Subject: C=US, O=GlobalSign nv-sa, CN=GlobalSign Organization Validation

Cisco Business Switches 350 Series CLI Guide

219

show ca-certificate

CA Certificate Commands

Public Key Type: ECDSA_P256
Public Key Length: 2048 bits

Signature Algorithm: sha256RSA

certA

Type: Static
Owner: Static
Parent: cert1
Version: 3 (0x2)
Serial Number: 10:e6:fc:62:b7:41:8a:d5:00:5e:45:b6
Issuer: C=US, O=GlobalSign nv-sa, CN=GlobalSign Organization Validation
Status: Not Valid (expired)
Validity

Not Before: Nov 21 08:00:00 2016 GMT
Not After : Nov 22 07:59:59 2017 GMT

Subject: C=US, ST=California, L=San Francisco, O=AKB Foundation, Inc.,

CN=*.wikipedia.org

Finger print: DC72343 DC88A988 127897BC BB789788
Public Key Type: ECDSA_P256
Public Key Length: 2048 bits

Signature Algorithm: sha256RSA

certB
Type: Dynamic
Owner: PnP
Parent: cert1
Version: 3 (0x2)
Serial Number: 88:cc:55:ae:a8:41:8a:d5:00:5e:45:b6
Issuer: C=US, O=Google Trust Services, CN=GTS CA 101
Status: Not Valid (revoked)
Validity

Not Before: Sep 21 08:00:00 2019 GMT
Not After : Sep 22 07:59:59 2020 GMT

Subject: C=US, S=California, L=Mountain View O=Google LLC, CN=*.google.com
Finger print: DC789788 DC88A988 127897BC BB789788
Public Key Type: ECDSA_P256
Public Key Length: 2048 bits
Signature Algorithm: sha256RSA

Cisco Business Switches 350 Series CLI Guide

220

CA Certificate Commands

show ca-certificate revocation

show ca-certificate revocation

To display the CA certificate revocation list, use the show ca-certificate revocation command in Privileged
EXEC mode.

Syntax

show ca-certificate revocation

Command Mode

Privileged EXEC mode

User Guidelines

Use the show ca-certificate revocation command to display the CA certificate revocation list.

Example. The following displays the revocation list:

switchxxxxxx# show ca-certificate revocation
>C-CountryName, ST-StateOrProvinceName, L-Locality, O-Organization,
>OU-OrganizationalUnit, CN-CommonName

Issuer: C=US, O=GlobalSign nv-sa, CN=GlobalSign Organization Validation
Serial Number: 10:ad:00:44:a8:41:8a:d5:00:5e:45:b6

--------------------------------------------------------------------------

Issuer: C=US, O=Google Trust Services, CN=GTS CA 101
Serial Number: 00:9e:44:1b:49:08:8d:75:bb:02:00:00:00:00:40:a5:b4

Cisco Business Switches 350 Series CLI Guide

221

show ca-certificate revocation

CA Certificate Commands

Cisco Business Switches 350 Series CLI Guide

222

CDP Commands

This chapter contains the following sections:

• cdp advertise-v2, on page 224
• cdp appliance-tlv enable, on page 225
• cdp device-id format, on page 226
• cdp enable, on page 227
• cdp holdtime, on page 228
• cdp log mismatch duplex, on page 229
• cdp log mismatch native, on page 230
• cdp log mismatch voip, on page 231
• cdp mandatory-tlvs validation, on page 232
• cdp pdu, on page 233
• cdp run, on page 234
• cdp source-interface, on page 235
• cdp timer, on page 236
• clear cdp counters, on page 237
• clear cdp table, on page 238
• show cdp, on page 239
• show cdp entry, on page 240
• show cdp interface, on page 241
• show cdp neighbors, on page 242
• show cdp tlv, on page 246
• show cdp traffic, on page 249

Cisco Business Switches 350 Series CLI Guide

223

cdp advertise-v2

CDP Commands

cdp advertise-v2

To specify version 2 of transmitted CDP packets, use the cdp advertise-v2 command in Global Configuration
mode. To specify version 1, use the no form of this command.

Syntax

cdp advertise-v2

no cdp advertise-v2

Default Configuration

Version 2.

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# cdp run
switchxxxxxx(config)# cdp advertise-v2

Cisco Business Switches 350 Series CLI Guide

224

CDP Commands

cdp appliance-tlv enable

cdp appliance-tlv enable

To enable sending of the Appliance TLV, use the cdp appliance-tlv enable command in Global Configuration
mode. To disable the sending of the Appliance TLV, use the no form of this command.

Syntax

cdp appliance-tlv enable

no cdp appliance-tlv enable

Default Configuration

Enabled

Command Mode

Global Configuration mode

User Guidelines

This MIB specifies the Voice Vlan ID (VVID) to which this port belongs:

• 0—The CDP packets transmitting through this port contain Appliance VLAN-ID TLV with value of 0.
VoIP and related packets are expected to be sent and received with VLAN-ID=0 and an 802.1p priority.

• 1..4094—The CDP packets transmitting through this port contain Appliance VLAN-ID TLV with N.

VoIP and related packets are expected to be sent and received with VLAN-ID=N and an 802.1p priority.

• 4095—The CDP packets transmitting through this port contain Appliance VLAN-ID TLV with value
of 4095. VoIP and related packets are expected to be sent and received untagged without an 802.1p
priority.

• 4096—The CDP packets transmitting through this port do not include Appliance VLAN-ID TLV; or, if
the VVID is not supported on the port, this MIB object will not be configurable and will return 4096.

Example

switchxxxxxx(config)# cdp appliance-tlv enable

Cisco Business Switches 350 Series CLI Guide

225

cdp device-id format

CDP Commands

cdp device-id format

To specify the format of the Device-ID TLV, use the cdp device-id format command in Global Configuration
mode. To return to default, use the no form of this command.

Syntax

cdp device-id format {mac | serial-number | hostname}

no cdp device-id format

Parameters

• mac—Specifies that the Device-ID TLV contains the device’s MAC address.

• serial-number—Specifies that Device-ID TLV contains the device’s hardware serial number.

• hostname—Specifies that Device-ID TLV contains the device’s hostname.

Default Configuration

MAC address is selected by default.

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# cdp device-id format serial-number

Cisco Business Switches 350 Series CLI Guide

226

CDP Commands

cdp enable

cdp enable

Tp enable CDP on interface, use the cdp enable command in Interface (Ethernet) Configuration mode. To
disable CDP on an interface, use the no form of the CLI command.

Syntax

cdp enable

Default Configuration

Enabled

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

For CDP to be enabled on an interface, it must first be enabled globally using cdp advertise-v2, on page 224.

Example

switchxxxxxx(config)# cdp run
switchxxxxxx(config-if)# interface gi1/0/1
switchxxxxxx(config-if)# cdp enable

Cisco Business Switches 350 Series CLI Guide

227

cdp holdtime

cdp holdtime

CDP Commands

To specify a value of the Time-to-Live field into sent CDP messages, use the cdp holdtime command in
Global Configuration mode. To return to default, use the no form of this command.

Syntax

cdp holdtime seconds

no cdp holdtime

Parameters

seconds—Value of the Time-to-Live field in seconds. The value should be greater than the value of the
Transmission Timer.

Parameters range

seconds—10 - 255.

Default Configuration

180 seconds.

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# cdp holdtime 100

Cisco Business Switches 350 Series CLI Guide

228

CDP Commands

cdp log mismatch duplex

cdp log mismatch duplex

To enable validating that the duplex status of a port received in a CDP packet matches the ports actual
configuration and generation the SYSLOG duplex mismatch messages if they do not match, use the cdp log
mismatch duplex command in Global Configuration mode and Interface (Ethernet) Configuration mode. To
disable the generation of the SYSLOG messages, use the no form of the CLI command.

Syntax

cdp log mismatch duplex

no cdp log mismatch duplex

Default Configuration

The switch reports duplex mismatches from all ports.

Command Mode

Global Configuration mode

Interface (Ethernet) Configuration mode

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# cdp log mismatch duplex

Cisco Business Switches 350 Series CLI Guide

229

cdp log mismatch native

CDP Commands

cdp log mismatch native

To enable validating that the native VLAN received in a CDP packet matches the actual native VLAN of the
port and generation the SYSLOG VLAN native mismatch messages if they do not match, use the cdp log
mismatch native Global and Interface Configuration mode command in Global Configuration mode and
Interface (Ethernet) Configuration mode. To disable the generation of the SYSLOG messages, use the no
format of the CLI command.

Syntax

cdp log mismatch native

no cdp log mismatch native

Default Configuration

The switch reports native VLAN mismatches from all ports.

Command Mode

Global Configuration mode

Interface (Ethernet) Configuration mode

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# cdp log mismatch native

Cisco Business Switches 350 Series CLI Guide

230

CDP Commands

cdp log mismatch voip

cdp log mismatch voip

To enable validating that the VoIP status of the port received in a CDP packet matches its actual configuration
and generation the SYSLOG voip mismatch messages if they do not match, use the cdp log mismatch voip
Global and Interface Configuration mode command in Global Configuration mode and Interface (Ethernet)
Configuration mode. To disable the generation of the SYSLOG messages, use the no format of the CLI
command.

Syntax

cdp log mismatch voip

no cdp log mismatch voip

Default Configuration

The switch reports VoIP mismatches from all ports.

Command Mode

Global Configuration mode

Interface (Ethernet) Configuration mode

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# cdp log mismatch voip

Cisco Business Switches 350 Series CLI Guide

231

cdp mandatory-tlvs validation

CDP Commands

cdp mandatory-tlvs validation

To validate that all mandatory (according to the CDP protocol) TLVs are present in received CDP frames,
use the cdp mandatory-tlvs validation command in Global Configuration mode. To disables the validation,
use the no form of this command.

Syntax

cdp mandatory-tlvs validation

no cdp mandatory-tlvs validation

Default Configuration

Enabled.

Command Mode

Global Configuration mode

User Guidelines

Use the command to delete CDP packets not including all the mandatory TLVs.

Example

This example turns off mandatory TLV validation:

switchxxxxxx(config)# no cdp mandatory-tlvs validation

Cisco Business Switches 350 Series CLI Guide

232

CDP Commands

cdp pdu

cdp pdu

To specify CDP packets handling when CDP is globally disabled, use the cdp pdu command in Global
Configuration mode. To return to default, use the no form of this command.

Syntax

cdp pdu [filtering | bridging | flooding]

no cdp pdu

Parameters

• filtering—Specify that when CDP is globally disabled, CDP packets are filtered (deleted).

• bridging—Specify that when CDP is globally disabled, CDP packets are bridged as regular data packets

(forwarded based on VLAN).

• flooding—Specify that when CDP is globally disabled, CDP packets are flooded to all the ports in the

product that are in STP forwarding state, ignoring the VLAN filtering rules.

Default Configuration

bridging

Command Mode

Global Configuration mode

User Guidelines

When CDP is globally enabled, CDP packets are filtered (discarded) on CDP-disabled ports.

In the flooding mode, VLAN filtering rules are not applied, but STP rules are applied. In case of MSTP, the
CDP packets are classified to instance 0.

Example

switchxxxxxx(config)# cdp run
switchxxxxxx(config)# cdp pdu flooding

Cisco Business Switches 350 Series CLI Guide

233

cdp run

cdp run

CDP Commands

To enable CDP globally, use the cdp run command in Global Configuration mode. To disable CDP globally,
use the no form of this command.

Syntax

cdp run

no cdp run

Default Configuration

Enabled.

Command Mode

Global Configuration mode

User Guidelines

CDP is a link layer protocols for directly-connected CDP/LLDP-capable devices to advertise themselves and
their capabilities. In deployments where the CDP/LLDP capable devices are not directly connected and are
separated with CDP/LLDP incapable devices, the CDP/LLDP capable devices may be able to receive the
advertisement from other device(s) only if the CDP/LLDP incapable devices flood the CDP/LLDP packets
they receives. If the CDP/LLDP incapable devices perform VLAN-aware flooding, then CDP/LLDP capable
devices can hear each other only if they are in the same VLAN. It should be noted that a CDP/LLDP capable
device may receive advertisement from more than one device if the CDP/LLDP incapable devices flood the
CDP/LLDP packets.

To learn and advertise CDP information, it must be globally enabled (it is so by default) and also enabled on
interfaces (also by default).

Example

switchxxxxxx(config)# cdp run

Cisco Business Switches 350 Series CLI Guide

234

CDP Commands

cdp source-interface

cdp source-interface

To specify the CDP source port used for source IP address selection, use the cdp source-interface command
in Global Configuration mode. To delete the source interface, use the no form of this command.

Syntax

cdp source-interface interface-id

no cdp source-interface

Parameters

interface-id—Source port used for Source IP address selection.

Default Configuration

No CDP source interface is specified.

Command Mode

Global Configuration mode

User Guidelines

Use the cdp source-interface command to specify an interface whose minimal IP address will be advertised
in the TVL instead of the minimal IP address of the outgoing interface.

Example

switchxxxxxx(config)# cdp source-interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

235

cdp timer

cdp timer

CDP Commands

To specify how often CDP packets are transmitted, use the cdp timer command in Global Configuration
mode. To return to default, use the no form of this command.

Syntax

cdp timer seconds

no cdp timer

Parameters

seconds—Value of the Transmission Timer in seconds. Range: 5-254 seconds.

Default Configuration

60 seconds.

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# cdp timer 100

Cisco Business Switches 350 Series CLI Guide

236

CDP Commands

clear cdp counters

clear cdp counters

To reset the CDP traffic counters to 0, use the clear cdp counters command in Privileged EXEC mode.

Syntax

clear cdp counters [global | interface-id]

Parameters

• global—Clear only the global counters.

• interface-id—Specifies the interface identifier of the counters that should be cleared.

Command Mode

Privileged EXEC mode

User Guidelines

Use the command clear cdp counters without parameters to clear all the counters.

Use the clear cdp counters global to clear only the global counters.

Use the clear cdp counters interface-id command to clear the counters of the given interface.

Example

Example 1. The example clears all the CDP counters:

switchxxxxxx# clear cdp couters

Example 2. The example clears the CDP global counters.

switchxxxxxx# clear cdp couters global

Example 3. The example clears the CDP counters of Ethernet port gi1/0/1:

switchxxxxxx# clear cdp couters interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

237

clear cdp table

clear cdp table

CDP Commands

To delete the CDP Cache tables, use the clear cdp table command in Privileged EXEC mode.

Syntax

clear cdp table

Command Mode

Privileged EXEC mode

Example The example deletes all entries from the CDP Cache tables:

switchxxxxxx# clear cdp table

Cisco Business Switches 350 Series CLI Guide

238

CDP Commands

show cdp

show cdp

To display the interval between advertisements, the number of seconds the advertisements are valid and version
of the advertisements, use the show cdp Privileged EXEC mode command in Privileged EXEC mode.

Syntax

show cdp

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# show cdp
Global CDP information:

cdp is globally enabled
cdp log duplex mismatch is globally enabled
cdp log voice VLAN mismatch is globally enabled
cdp log native VLAN mismatch is globally disabled
Mandatory TLVs are

Device-ID TLV (0x0001
Address TLV (0x0002)
Port-ID TLV (0x0003)
Capabilities TLV (0x0004)
Version TLV (0x0005)
Platform TLV (0x0006)

Sending CDPv2 advertisements is enabled
Sending Appliance TLV is enabled
Device ID format is Serial Number
Sending CDP packets every 60 seconds
Sending a holdtime value of 180 seconds

Cisco Business Switches 350 Series CLI Guide

239

show cdp entry

show cdp entry

CDP Commands

To display information about specific neighbors, use the show cdp entry command in Privileged EXEC mode.

Syntax

show cdp entry {* | device-name} [protocol | version]

Parameters

• *—Specifies all neighbors

• device-name—Specifies the name of the neighbor.

• protocol—Limits the display to information about the protocols enabled on neighbors.

• version—Limits the display to information about the version of software running on the neighbors.

Default Configuration

Version

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# show cdp entry
device.cisco.com
Device ID: device.cisco.com
Advertisement version: 2
Entry address(es):

IP address: 192.168.68.18
CLNS address: 490001.1111.1111.1111.00
DECnet address: 10.1

Platform: cisco 4500, Capabilities: Router
Interface: gi1/0/1, Port ID (outgoing port): Ethernet0
Holdtime: 125 sec
Version:
Cisco Internetwork Operating System Software
IOS (tm) 4500 Software (C4500-J-M), Version 11.1(10.4), MAINTENANCE INTERIM SOFTWARE
Copyright (c) 1986-1997 by cisco Systems, Inc.
Compiled Mon 07-Apr-97 19:51 by dschwart
switchxxxxxx# show cdp entry device.cisco.com protocol
Protocol information for device.cisco.com:

IP address: 192.168.68.18
CLNS address: 490001.1111.1111.1111.00
DECnet address: 10.1

switchxxxxxx# show cdp entry device.cisco.com version
Version information for device.cisco.com:
Cisco Internetwork Operating System Software
IOS (tm) 4500 Software (C4500-J-M), Version 11.1(10.4), MAINTENANCE INTERIM SOFTWARE
Copyright (c) 1986-1997 by cisco Systems, Inc.
Compiled Mon 07-Apr-97 19:51 by dschwart

Cisco Business Switches 350 Series CLI Guide

240

CDP Commands

show cdp interface

show cdp interface

To display information about ports on which CDP is enabled, use the show cdp interface command in
Privileged EXEC mode.

Syntax

show cdp interface interface-id

Parameters

interface-id—Port ID.

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# show cdp interface gi1/0/1
CDP is globally enabled
CDP log duplex mismatch
Globally is enabled
Per interface is enabled
CDP log voice VLAN mismatch

Globally is enabled
Per interface is enabled
CDP log native VLAN mismatch

Globally is disabled
Per interface is enabled

gi1/0/1 is Down, CDP is enabled
Sending CDP packets every 60 seconds
Holdtime is 180 seconds

Cisco Business Switches 350 Series CLI Guide

241

show cdp neighbors

CDP Commands

show cdp neighbors

To display information about neighbors kept in the main or secondary cache, use the show cdp neighbors
command in Privileged EXEC mode.

Syntax

show cdp neighbors [interface-id] [detail | secondary]

Parameters

• interface-id—Displays the neighbors attached to this port.

• detail—Displays detailed information about a neighbor (or neighbors) from the main cache including

network address, enabled protocols, hold time, and software version.

• secondary—Displays information about neighbors from the secondary cache.

Default Configuration

If an interface ID is not specified, the command displays information for the neighbors of all ports.

If detail or secondary are not specified, the default is secondary.

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# show cdp neighbors

Capability Codes: R - Router, T - Trans Bridge, B - Source Route Bridge
S - Switch, H - Host, I - IGMP, r - Repeater,P - VoIP Phone,
M - Remotely-Managed Device, C - CAST Phone Port, W - Two-Port MAC Relay
Capability Codes: R - Router, T - Trans Bridge, B - Source Route Bridge

S - Switch, H - Host, I - IGMP, r - Repeater, P - VoIP Phone
M - Remotely-Managed Device, C - CAST Phone Port,
W - Two-Port MAC Relay

Device ID

Local
Interface Ver. Live

Adv Time To Capability

Platform

Port ID

------------------ ----------- ---- ------- ---------- ------------ -----------
PTK-SW-A-86.company
147
l.com

gi3/39

gi48

S I

2

Company
XX-10R-E
ESW-520-8P
ESW-540-8P
Company
XX-23R-E
Company
XX-23R-E
Company
XX-23R-E

g1
g9
fa2/1

fa2/2

fa2/5

ESW-520-8P
ESW-540-8P
003106131611

001828100211

gi48
gi48
gi48

gi48

2
2
2

2

153
146
143

173

S I M
S I M
S I

S I

c47d4fed9302

gi48

2

137

S I

switchxxxxxx# show cdp neighbors detail

-------------------------
Device ID: lab-7206
Advertisement version: 2

Cisco Business Switches 350 Series CLI Guide

242

CDP Commands

show cdp neighbors

Entry address(es):

IP address: 172.19.169.83

Platform: company x5660, Capabilities: Router
Interface: Ethernet0, Port ID (outgoing port): gi1/0/0
Time To Live : 123 sec
Version :
Company Network Operating System Software
NOS (tm) x5660 Software (D5660-I-N), Version 18.1(10.4), MAINTENANCE INTERIM SOFTWARE
Copyright (c) 1986-1997 by company Systems, Inc.
Compiled Mon 07-Apr-97 19:51 by xxdeeert
Duplex: half
-------------------------
Device ID: lab-as5300-1
Entry address(es):

IP address: 172.19.169.87

Platform: company TD6780, Capabilities: Router
Device ID: SEP000427D400ED
Advertisement version: 2
Entry address(es):

IP address: 1.6.1.81

Capabilities: Host

Port ID (outgoing port): Port 1

Platform: Company IP Phone x8810,
Interface: gi1/0/1,
Time To Live: 150 sec
Version :
P00303020204
Duplex: full
sysName: a-switch
Power drawn: 6.300 Watts
switchxxxxxx# show cdp neighbors secondary
Capability Codes: R - Router, T - Trans Bridge, B - Source Route Bridge
S - Switch, H - Host, I - IGMP, r - Repeater,
P - VoIP Phone,M - Remotely-Managed Device,
C - CAST Phone Port, W - Two-Port MAC Relay
Local Interface gi1/0/1, MAC Address: 00:00:01:23:86:9c

TimeToLive: 157
Capabilities: R S
VLAN-ID: 10
Platform: 206VXRYC

Local Interface gi1/0/1, MAC Address: 00:00:01:53:86:9c

TimeToLive: 163
Capabilities: R S
VLAN-ID: 10
Platform: ABCD-VSD
Power Available TLV: Request-ID is 1

Power management-ID is 1;
Available-Power is 15.4;
Management-Power-Level is 0xFFFFFFFF

Local Interface gi1/0/2, MAC Address: 00:00:01:2b:86:9c

TimeToLive: 140
Capabilities: R S
VLAN-ID: 1210
Platform: QACSZ

4-wire Power-via-MDI (UPOE) TLV:

4-pair PoE Supported: Yes
Spare pair Detection/Classification required: Yes
PD Spare Pair Desired State: Disabled
PSE Spare Pair Operational State: Disabled

Request-ID is 1 Power management-ID is 1;

Available-Power is 15.4;
Management-Power-Level is 0xFFFFFFFF

Local Interface gi1/0/2, MAC Address: 00:00:01:2c:86:9c

TimeToLive: 132
Capabilities: T

Cisco Business Switches 350 Series CLI Guide

243

show cdp neighbors

CDP Commands

VLAN-ID: 1005
Platform: CAT-3000

Field Definitions:

• Advertisement version—The version of CDP being used for CDP advertisements.

• Capabilities—The device type of the neighbor. This device can be a router, a bridge, a transparent bridge,

a source-routing bridge, a switch, a host, an IGMP device, or a repeater.

• COS for Untrusted Ports—The COS value with which all packets received on an untrusted port should

be marked by a simple switching device which cannot itself classify individual packets.

• Device ID—The name of the neighbor device and either the MAC address or the serial number of this

device.

• Duplex—The duplex state of connection between the current device and the neighbor device.

• Entry address(es)—A list of network addresses of neighbor devices.

• Extended Trust—The Extended Trust.

• External Port-ID—Identifies the physical connector port on which the CDP packet is transmitted. It is
used in devices, such as those with optical ports, in which signals from multiple hardware interfaces are
multiplexed through a single physical port. It contains the name of the external physical port through
which the multiplexed signal is transmitted.

• Interface—The protocol and port number of the port on the current device.

• IP Network Prefix—It is used by On Demand Routing (ODR). When transmitted by a hub router, it is
a default route (an IP address). When transmitted by a stub router, it is a list of network prefixes of stub
networks to which the sending stub router can forward IP packets.

• Management Address—When present, it contains a list of all the addresses at which the device will

accept SNMP messages, including those it will only accept when received on interface(s) other than the
one over which the CDP packet is being sent.

• MTU—The MTU of the interface via which the CDP packet is sent.

• Native VLAN—The ID number of the VLAN on the neighbor device.

• Physical Location—A character string indicating the physical location of a connector which is on, or

physically connected to, the interface over which the CDP packet containing this TLV is sent.

• Platform—The product name and number of the neighbor device. In the case of the Secondary Cache

only the 8 last characters of the value are printed.

• Power Available—Every switch interface transmits information in the Power Available TLV, which
permits a device which needs power to negotiate and select an appropriate power setting. The Power
Available TLV includes four fields.

• Power Consumption—The maximum amount of power, in milliwatts, expected to be obtained and

consumed from the interface over which the CDP packet is sent.

• Power Drawn—The maximum requested power.

Note: For IP Phones the value shown is the maximum requested power (6.3 Watts). This value can be
different than the actual power supplied by the routing device (generally 5 watts; shown using the show
power command).

Cisco Business Switches 350 Series CLI Guide

244

CDP Commands

show cdp neighbors

• Protocol-Hello—Specifies that a particular protocol has asked CDP to piggyback its "hello" messages

within transmitted CDP packets.

• Remote Port_ID—Identifies the port the CDP packet is sent on

• sysName—An ASCII string containing the same value as the sending device's sysName MIB object.

• sysObjectID—The OBJECT-IDENTIFIER value of the sending device's sysObjectID MIB object.

• Time To Live—The remaining amount of time, in seconds, the current device will hold the CDP

advertisement from a transmitting router before discarding it.

• Version—The software version running on the neighbor device.

• Voice VLAN-ID—The Voice VLAN-ID.

• VTP Management Domain—A string that is the name of the collective group of VLANs associated

with the neighbor device.

Cisco Business Switches 350 Series CLI Guide

245

show cdp tlv

show cdp tlv

CDP Commands

To display information about TLVs sent by CDP on all ports or on a specific port, use the show cdp tlv
command in Privileged EXEC mode.

Syntax

show cdp tlv [interface-id]

Parameters

interface-id—Port ID.

Default Configuration

TLVs for all ports.

Command Mode

Privileged EXEC mode

User Guidelines

You can use the show cdp tlv command to verify the TLVs configured to be sent in CDP packets. The show
cdp tlv command displays information for a single port if specified or for all ports if not specified. Information
for a port is displayed if only CDP is really running on the port, i.e. CDP is enabled globally and on the port,
which is UP.

Example 1 - In this example, CDP is disabled and no information is displayed.

switchxxxxxx# show cdp tlv
cdp globally is disabled

Example 2 - In this example, CDP is globally enabled but disabled on the port and no information
is displayed.

switchxxxxxx# show cdp tlv gi1/0/2
cdp globally is enabled
Capability Codes: R - Router,T - Trans Bridge, B - Source Route Bridge
S - Switch, H - Host, I - IGMP, r - Repeater,
P - VoIP Phone,M - Remotely-Managed Device,
C - CAST Phone Port, W - Two-Port MAC Relay
Interface TLV: gi1/0/2
CDP is disabled on gi1/0/2

Example 3 - In this example, CDP is globally enabled and enabled on the port, but the port is down
and no information is displayed.

switchxxxxxx# show cdp tlv interface gi1/0/2
cdp globally is enabled
Capability Codes: R - Router,T - Trans Bridge, B - Source Route Bridge
S - Switch, H - Host, I - IGMP, r - Repeater,
P - VoIP Phone,M - Remotely-Managed Device,
C - CAST Phone Port, W - Two-Port MAC Relay
Interface TLV: gi1/0/3
CDP is enabled on gi1/0/3
Ethernet gi1/0/3 is down

Cisco Business Switches 350 Series CLI Guide

246

CDP Commands

show cdp tlv

Example 4 - In this example, CDP is globally enabled, and no ports are specified, so information is
displayed for all ports on which CDP is enabled who are up.

switchxxxxxx# show cdp tlv interface
cdp globally is enabled
Capability Codes: R - Router,T - Trans Bridge, B - Source Route Bridge
S - Switch, H - Host, I - IGMP, r - Repeater,
P - VoIP Phone,M - Remotely-Managed Device,
C - CAST Phone Port, W - Two-Port MAC Relay
Interface TLV: gi1/0/1
CDP is enabled
Ethernet gi1/0/1 is up,
Device ID TLV: type is MAC address; Value is 00:11:22:22:33:33:44:44
Address TLV: IPv4: 1.2.2.2 IPv6:
Port_ID TLV: gi1/0/1
Capabilities: S, I
Version TLV: 1 and 2
Platform TLV: VSD Ardd
Native VLAN TLV: 1
Full/Half Duplex TLV: full-duplex
Appliance VLAN_ID TLV: Appliance-ID is 1; VLAN-ID is 100
COS for Untrusted Ports TLV: 1
sysName: a-switch
4-wire Power-via-MDI (UPOE) TLV:

Power Available TLV: Request-ID is 1 Power management-ID is 1;

4-pair PoE Supported: No

Available-Power is 15.4;
Management-Power-Level is 0xFFFFFFFF

Interface TLV: gi1/0/2
CDP is disabled on gi1/0/2
Interface TLV: gi1/0/3
CDP is enabled on gi1/0/3
Ethernet gi1/0/3 is down

Example 5 - In this example, CDP is globally enabled and enabled on the PSE PoE port, which is
up and information is displayed.

switchxxxxxx# show cdp tlv interface gi1/0/1
cdp globally is enabled
Capability Codes: R - Router,T - Trans Bridge, B - Source Route Bridge
S - Switch, H - Host, I - IGMP, r - Repeater,
P - VoIP Phone,M - Remotely-Managed Device,
C - CAST Phone Port, W - Two-Port MAC Relay
Interface TLV: gi1/0/1
CDP is enabled
Ethernet gi1/0/1 is up,
Device ID TLV: type is MAC address; Value is 00:11:22:22:33:33:44:44
Address TLV: IPv4: 1.2.2.2 IPv6:
Port_ID TLV: gi1/0/1
Capabilities: S, I
Version TLV: 1 and 2
Platform TLV: VSD Ardd
Native VLAN TLV: 1
Full/Half Duplex TLV: full-duplex
Appliance VLAN_ID TLV: Appliance-ID is 1; VLAN-ID is 100
COS for Untrusted Ports TLV: 1
sysName: a-switch
Power Available TLV: Request-ID is 1 Power management-ID is 1;

4-wire Power-via-MDI (UPOE) TLV:

4-pair PoE Supported: Yes
Spare pair Detection/Classification required: Yes
PD Spare Pair Desired State: Disabled

Available-Power is 15.4;
Management-Power-Level is 0xFFFFFFFF

Cisco Business Switches 350 Series CLI Guide

247

show cdp tlv

CDP Commands

Request-ID is 1 Power management-ID is 1;

PSE Spare Pair Operational State: Disabled

Available-Power is 15.4;
Management-Power-Level is 0xFFFFFFFF

Cisco Business Switches 350 Series CLI Guide

248

CDP Commands

show cdp traffic

show cdp traffic

To display the CDP counters, including the number of packets sent and received and checksum errors, use
the show cdp traffic command in Privileged EXEC mode.

Syntax

show cdp traffic [global | interface-id]

Parameters

• global—Display only the global counters

• interaface-id—Port for which counters should be displayed.

Command Mode

Privileged EXEC mode

User Guidelines

Use the command show cdp traffic without parameters to display all the counters.

Use the show cdp traffic global to display only the global counters.

Use the show cdp traffic interface-id command to display the counters of the given port.

Example

switchxxxxxx# show cdp traffic
CDP Global counters:

Total packets output: 81684, Input: 81790
Hdr syntax: 0, Chksum error: 0, Invalid packet: 0
No memory in main cache: 0, in secondary cache: 0
Input 0
CDP version 1 advertisements output: 100,
CDP version 2 advertisements output: 81784, Input 0

gi1/0/1

Total packets output: 81684, Input: 81790
Hdr syntax: 0, Chksum error: 0, Invalid packet: 0
No memory in main cache: 0, in secondary cache: 0
Input 0
CDP version 1 advertisements output: 100,
CDP version 2 advertisements output: 81784, Input 0

gi1/0/2

Total packets output: 81684, Input: 81790
Hdr syntax: 0, Chksum error: 0, Invalid packet: 0
No memory in main cache: 0, in secondary cache: 0
CDP version 1 advertisements output: 100,
Input 0
CDP version 2 advertisements output: 81784, Input 0

Field Definition:

• Total packets output—The number of CDP advertisements sent by the local device. Note that this value
is the sum of the CDP Version 1 advertisements output and CDP Version 2 advertisements output fields.

• Input—The number of CDP advertisements received by the local device. Note that this value is the sum

of the CDP Version 1 advertisements input and CDP Version 2 advertisements input fields.

Cisco Business Switches 350 Series CLI Guide

249

show cdp traffic

CDP Commands

• Hdr syntax—The number of CDP advertisements with bad headers, received by the local device.

• Chksum error—The number of times the checksum (verifying) operation failed on incoming CDP

advertisements.

• No memory—The number of times the local device did not have enough memory to store the CDP

advertisements in the advertisement cache table when the device was attempting to assemble advertisement
packets for transmission and parse them when receiving them.

• Invalid—The number of invalid CDP advertisements received.

• CDP version 1 advertisements output — The number of CDP Version 1 advertisements sent by the

local device.

• CDP version 1 advertisements Input—The number of CDP Version 1 advertisements received by the

local device.

• CDP version 2 advertisements output—The number of CDP Version 2 advertisements sent by the

local device.

• CDP version 2 advertisements Input—The number of CDP Version 2 advertisements received by the

local device.

Cisco Business Switches 350 Series CLI Guide

250

Clock Commands

This chapter contains the following sections:

• absolute, on page 252
• clock dhcp timezone, on page 253
• clock set, on page 254
• clock source, on page 255
• clock summer-time, on page 256
• clock timezone, on page 258
• periodic, on page 259
• sntp anycast client enable, on page 260
• sntp authenticate, on page 261
• sntp authentication-key, on page 262
• sntp broadcast client enable, on page 263
• sntp client enable, on page 264
• sntp client enable (interface), on page 265
• sntp server, on page 266
• sntp source-interface, on page 268
• sntp source-interface-ipv6, on page 269
• sntp trusted-key, on page 270
• sntp unicast client enable, on page 271
• sntp unicast client poll, on page 272
• show clock, on page 273
• show sntp configuration, on page 275
• show sntp status, on page 276
• show time-range, on page 278
• time-range, on page 279

Cisco Business Switches 350 Series CLI Guide

251

absolute

absolute

Clock Commands

To specify an absolute time when a time range is in effect, use the absolute command in Time-range
Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

absolute start hh:mm day month year

no absolute start

absolute end hh:mm day month year

no absolute end

Parameters

• start—Absolute time and date that the permit or deny statement of the associated function going into

effect. If no start time and date are specified, the function is in effect immediately.

• end—Absolute time and date that the permit or deny statement of the associated function is no longer

in effect. If no end time and date are specified, the function is in effect indefinitely.

• hh:mm—Time in hours (military format) and minutes (Range: 0–23, mm: 0–5)

• day—Day (by date) in the month. (Range: 1–31)

• month—Month (first three letters by name). (Range: Jan...Dec)

• year—Year (no abbreviation) (Range: 2000–2097)

Default Configuration

There is no absolute time when the time range is in effect.

Command Mode

Time-range Configuration mode

Example

switchxxxxxx(config)# time-range http-allowed
switchxxxxxx(config-time-range)# absolute start 12:00 1 jan 2005
switchxxxxxx(config-time-range)# absolute end 12:00 31 dec 2005

Cisco Business Switches 350 Series CLI Guide

252

Clock Commands

clock dhcp timezone

clock dhcp timezone

To specify that the timezone and the Summer Time (Daylight Saving Time) of the system can be taken from
the DHCP Timezone option, use the clock dhcp timezone command in Global Configuration mode. To restore
the default configuration, use the no form of this command.

Syntax

clock dhcp timezone

no clock dhcp timezone

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

The TimeZone taken from the DHCP server has precedence over the static TimeZone.

The Summer Time taken from the DHCP server has precedence over static SummerTime.

The TimeZone and SummerTime remain effective after the IP address lease time has expired.

The TimeZone and SummerTime that are taken from the DHCP server are cleared after reboot.

The no form of the command clears the dynamic Time Zone and Summer Time from the DHCP server are
cleared.

In case of multiple DHCP-enabled interfaces, the following precedence is applied: Disabling the DHCP client
from where the DHCP-TimeZone option was taken, clears the dynamic Time Zone and Summer Time
configuration.

• information received from DHCPv6 precedes information received from DHCPv4.

• information received from DHCP client running on lower interface precedes information received from

DHCP client running on higher interface.

Example

switchxxxxxx(config)# clock dhcp timezone

Cisco Business Switches 350 Series CLI Guide

253

clock set

clock set

Clock Commands

To set the system clock manually, use the clock set command in Privileged EXEC mode.

Syntax

clock set hh:mm:ss {[day month] | [month day]} year

Parameters

• hh:mm:ss—Specifies the current time in hours (military format), minutes, and seconds. (Range: hh:

0-23, mm: 0-59, ss: 0-59)

• day—Specifies the current day of the month. (Range: 1-31)

• month—Specifies the current month using the first three letters of the month name. (Range: Jan–Dec)

• year—Specifies the current year. (Range: 2000–2037)

Default Configuration

The time of the image creation.

Command Mode

Privileged EXEC mode

User Guidelines

After boot the system clock is set to the time of the image creation.

Example

The following example sets the system time to 13:32:00 on March 7th, 2005.

switchxxxxxx# clock set 13:32:00 7 Mar 2005

Cisco Business Switches 350 Series CLI Guide

254

Clock Commands

clock source

clock source

To configure an external time source for the system clock, use the clock source command in Global
Configuration mode. To disable the external time source, use the no form of this command.

Syntax

clock source {sntp | browser}

no clock source {sntp | browser}

Parameters

• sntp—(Optional) Specifies that an SNTP server is the external clock source.

• browser—(Optional) Specifies that if the system clock is not already set (either manually or by SNTP)
and a user login to the device using a WEB browser (either via HTTP or HTTPS), the system clock will
be set according to the browser’s time information.

Default Configuration

SNTP

Command Mode

Global Configuration mode

User Guidelines

After boot the system clock is set to the time of the image creation.

If no parameter is specified, SNTP will be configured as the time source.

if the command is executed twice, each time with a different clock source, both sources will be operational,
SNTP has higher priority than time from browser.

Example

The following example configures an SNTP server as an external time source for the system clock.

switchxxxxxx(config)# clock source sntp
switchxxxxxx(config)# clock source browser
switchxxxxxx(config)# exit
switchxxxxxx# show clock
*10:46:48 UTC May 28 2013
Time source is sntp
Time from Browser is enabled

Cisco Business Switches 350 Series CLI Guide

255

clock summer-time

Clock Commands

clock summer-time

To configure the system to automatically switch to summer time (Daylight Saving Time), use the clock
summer-time command in Global Configuration mode. To restore the default configuration, use the no form
of this command.

Syntax

clock summer-time zone recurring {usa | eu | {week day month hh:mm week day month hh:mm}} [offset]

clock summer-time zone date day month year hh:mm date month year hh:mm [offset]

clock summer-time zone date month day year hh:mm month day year hh:mm [offset]

no clock summer-time

Parameters

• zone—The acronym of the time zone. (Range: 1- 4 characters). Only letters can be included in the

acronym.

• recurring—Indicates that summer time starts and ends on the corresponding specified days every year.

• date—Indicates that summer time starts on the first date listed in the command and ends on the second

date in the command.

• usa—The summer time rules are the United States rules.

• eu—The summer time rules are the European Union rules.

• week—Week of the month. Can be 1–5, first to last.

• day—Day of the week (first three characters by name, such as Sun).

• date—Date of the month. (Range: 1–31)

• month—Month (first three characters by name, such as Feb).

• year—year (no abbreviation). (Range: 2000–2097)

• hh:mm—Time (military format) in hours and minutes. (Range: hh:mmhh: 0-23, mm: 0-59)

• offset—(Optional) Number of minutes to add during summer time (default is 60). (Range: 1440)

Default Configuration

Summer time is disabled.

Command Mode

Global Configuration mode

User Guidelines

In both the date and recurring forms of the command, the first part of the command specifies when summer
time begins, and the second part specifies when it ends. All times are relative to the local time zone. The start

Cisco Business Switches 350 Series CLI Guide

256

Clock Commands

clock summer-time

time is relative to standard time. The end time is relative to summer time. If the starting month is chronologically
after the ending month, the system assumes that you are in the southern hemisphere.

USA rules for Daylight Saving Time:

• From 2007:

Start: Second Sunday in March

End: First Sunday in November

Time: 2 AM local time

• Before 2007:

Start: First Sunday in April

End: Last Sunday in October

Time: 2 AM local time

EU rules for Daylight Saving Time:

• Start: Last Sunday in March

• End: Last Sunday in October

Time: 1.00 am (01:00) Greenwich Mean Time (GMT)

Example

switchxxxxxx(config)# clock summer-time abc date apr 1 2010 09:00 aug 2 2010 09:00

Cisco Business Switches 350 Series CLI Guide

257

clock timezone

clock timezone

Clock Commands

To set the time zone for display purposes, use the clock timezone command in Global Configuration mode.
To restore the default configuration, use the no form of this command.

Syntax

clock timezone zone hours-offset [minutes-offset]

no clock timezone

Parameters

• zone—The acronym of the time zone. (Range: 1- 4 characters). Only letters can be included in the

acronym.

• hours-offset—Hours difference from UTC. (Range: (-12)–(+13))

• minutes-offset—(Optional) Minutes difference from UTC. (Range: 0–59)

Default Configuration

Coordinated Universal Time (UTC) or Greenwich Mean Time (GMT), which is the same:

• Offsets are 0.

• Acronym is empty.

Command Mode

Global Configuration mode

User Guidelines

The system internally keeps time in UTC, so this command is used only for display purposes and when the
time is manually set.

Example

switchxxxxxx(config)# clock timezone abc +2 minutes 32

Cisco Business Switches 350 Series CLI Guide

258

Clock Commands

periodic

periodic

To specify a recurring (weekly) time range for functions that support the time-range feature, use the periodic
command in Time-range Configuration mode. To restore the default configuration, use the no form of this
command.

Syntax

periodic day-of-the-week hh:mm to day-of-the-week hh:mm

no periodic day-of-the-week hh:mm to day-of-the-week hh:mm

periodic list hh:mm to hh:mm day-of-the-week1 [day-of-the-week2… day-of-the-week7]

no periodic list hh:mm to hh:mm day-of-the-week1 [day-of-the-week2… day-of-the-week7]

periodic list hh:mm to hh:mm all

no periodic list hh:mm to hh:mm all

Parameters

• day-of-the-week—The starting day that the associated time range is in effect. The second occurrence is
the ending day the associated statement is in effect. The second occurrence can be the following week
(see description in the User Guidelines). Possible values are: mon, tue, wed, thu, fri, sat, and sun.

• hh:mm—The first occurrence of this argument is the starting hours:minutes (military format) that the
associated time range is in effect. The second occurrence is the ending hours:minutes (military format)
the associated statement is in effect. The second occurrence can be at the following day (see description
in the User Guidelines). (Range: 0–23, mm: 0–59)

• list day-of-the-week1—Specifies a list of days that the time range is in effect.

Default Configuration

There is no periodic time when the time range is in effect.

Command Mode

Time-range Configuration mode

User Guidelines

The second occurrence of the day can be at the following week, e.g. Thursday–Monday means that the time
range is effective on Thursday, Friday, Saturday, Sunday, and Monday.

The second occurrence of the time can be on the following day, e.g. “22:00–2:00”.

Example

switchxxxxxx(config)# time-range http-allowed
switchxxxxxx(config-time-range)# periodic mon 12:00 to wed 12:00

Cisco Business Switches 350 Series CLI Guide

259

sntp anycast client enable

Clock Commands

sntp anycast client enable

To enable the SNTP Anycast client, use the sntp anycast client enable command in Global Configuration
mode. To restore the default configuration, use the no form of this command.

Syntax

sntp anycast client enable [both | ipv4 | ipv6]

Parameters

• both—(Optional) Specifies the IPv4 and IPv6 SNTP Anycast clients are enabled. If the parameter is not

defined it is the default value.

• ipv4—(Optional) Specifies the IPv4 SNTP Anycast clients are enabled.

• ipv6—(Optional) Specifies the IPv6 SNTP Anycast clients are enabled.

Default Configuration

The SNTP anycast client is disabled.

Command Mode

Global Configuration mode

User Guidelines

Use this command to enable the SNTP Anycast client.

Example

The following example enables SNTP Anycast clients.

switchxxxxxx(config)# sntp anycast client enable

Cisco Business Switches 350 Series CLI Guide

260

Clock Commands

sntp authenticate

sntp authenticate

To enable authentication for received SNTP traffic from servers, use the sntp authenticate command in
Global Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

sntp authenticate

no sntp authenticate

Default Configuration

Authentication is disabled.

Command Mode

Global Configuration mode

Examples

The following example enables authentication for received SNTP traffic and sets the key and encryption key.

switchxxxxxx(config)# sntp authenticate
switchxxxxxx(config)# sntp authentication-key 8 md5 ClkKey
switchxxxxxx(config)# sntp trusted-key 8

Cisco Business Switches 350 Series CLI Guide

261

sntp authentication-key

Clock Commands

sntp authentication-key

To define an authentication key for Simple Network Time Protocol (SNTP), use the sntp authentication-key
command in Global Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

sntp authentication-key key-number md5 key-value

encrypted sntp authentication-key key-number md5 encrypted-key-value

no sntp authentication-key key-number

Parameters

• key-number—Specifies the key number. (Range: 1–4294967295)

• key-value—Specifies the key value. (Length: 1–8 characters)

• encrypted-key-value—Specifies the key value in encrypted format.

Default Configuration

No authentication key is defined.

Command Mode

Global Configuration mode

Examples

The following example defines the authentication key for SNTP.

switchxxxxxx(config)# sntp authentication-key 8 md5 ClkKey
switchxxxxxx(config)# sntp authentication-key 8 md5 ClkKey
switchxxxxxx(config)# sntp trusted-key 8
switchxxxxxx(config)# sntp authenticate

Cisco Business Switches 350 Series CLI Guide

262

Clock Commands

sntp broadcast client enable

sntp broadcast client enable

To enable SNTP Broadcast clients, use the sntp broadcast client enable command in Global Configuration
mode. To restore the default configuration, use the no form of this command.

Syntax

sntp broadcast client enable [both | ipv4 | ipv6]

no sntp broadcast client enable

Parameters

• both—(Optional) Specifies the IPv4 and IPv6 SNTP Broadcast clients are enabled. If the parameter is

not defined it is the default value.

• ipv4—(Optional) Specifies the IPv4 SNTP Broadcast clients are enabled.

• ipv6—(Optional) Specifies the IPv6 SNTP Broadcast clients are enabled.

Default Configuration

The SNTP Broadcast client is disabled.

Command Mode

Global Configuration mode

User Guidelines

Use the sntp broadcast client enable Interface Configuration mode command to enable the SNTP Broadcast
client on a specific interface.

Example

The following example enables SNTP Broadcast clients.

switchxxxxxx(config)# sntp broadcast client enable

Cisco Business Switches 350 Series CLI Guide

263

sntp client enable

Clock Commands

sntp client enable

To enable the SNTP Broadcast and Anycast client, use the sntp client enable command in Global Configuration
mode. To restore the default configuration, use the no form of this command.

Syntax

sntp client enable interface-id

no sntp client enable interface-id

Parameters

• interface-id—Specifies an interface ID, which can be one of the following types: Ethernet port,

Port-channel or VLAN.

Default Configuration

The SNTP client is disabled.

Command Mode

Global Configuration mode

User Guidelines

Use the sntp client enable command to enable SNTP Broadcast and Anycast clients.

Example

The following example enables the SNTP Broadcast and Anycast clients on VLAN 100:

switchxxxxxx(config)# sntp client enable vlan 100

Cisco Business Switches 350 Series CLI Guide

264

Clock Commands

sntp client enable (interface)

sntp client enable (interface)

To enable the SNTP Broadcast and Anycast client on an interface, use the sntp client enable command in
Interface Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

sntp client enable

no sntp client enable

Default Configuration

The SNTP client is disabled on an interface.

Command Mode

Interface Configuration mode

User Guidelines

This command enables the SNTP Broadcast and Anycast client on an interface. Use the no form of this
command to disable the SNTP client.

Example

The following example enables the SNTP broadcast and anycast client on an interface.

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# sntp client enable
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

265

sntp server

sntp server

Clock Commands

To configure the device to use the SNTP to request and accept Network Time Protocol (NTP) traffic from a
specified server (meaning to accept system time from an SNTP server), use the sntp server command in
Global Configuration mode. To remove a server from the list of SNTP servers, use the no form of this command.

Syntax

sntp server {default | {{ip-address | hostname} [poll] [key keyid]}}

no sntp server [ip-address | hostname]

Parameters

• default—Default defined SNTP servers.

• ip-address—Specifies the server IP address. This can be an IPv4, IPv6 or IPv6z address.

• hostname—Specifies the server hostname. Only translation to IPv4 addresses is supported. (Length:

1–158 characters. Maximum label length for each part of the hostname: 63 characters)

• poll—(Optional) Enables polling.

• key keyid—(Optional) Specifies the Authentication key to use when sending packets to this peer.

(Range:1–4294967295)

Default Configuration

The following servers with polling and without authentication are defined:

• time-a.timefreq.bldrdoc.gov

• time-b.timefreq.bldrdoc.gov

• time-c.timefreq.bldrdoc.gov

• pool.ntp.org

• time-pnp.cisco.com

Command Mode

Global Configuration mode

User Guidelines

Use the sntp server {ip-address | hostname} [poll] [key keyid] command to define a SNTP server. The switch
supports up to 8 SNTP servers.

Use the sntp server default command to return to the default configuration.

Use the no sntp server ip-address | hostname command to remove one SNTP server.

Use the no sntp server to remove all SNTP servers.

Cisco Business Switches 350 Series CLI Guide

266

Clock Commands

sntp server

Example

The following example configures the device to accept SNTP traffic from the server on 192.1.1.1 with polling.

switchxxxxxx(config)# sntp server 192.1.1.1 poll

Cisco Business Switches 350 Series CLI Guide

267

sntp source-interface

Clock Commands

sntp source-interface

To specify the source interface whose IPv4 address will be used as the source IPv4 address for communication
with IPv4 SNTP servers, use the sntp source-interface command in Global Configuration mode. To restore
the default configuration, use the no form of this command.

Syntax

sntp source-interface interface-id

no sntp source-interface

Parameters

• interface-id—Specifies the source interface.

Default Configuration

The source IPv4 address is the IPv4 address defined on the outgoing interface and belonging to next hop IPv4
subnet.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface, the interface IP address belonging to next hop IPv4 subnet is
applied.

If the source interface is not the outgoing interface, the minimal IPv4 address defined on the interface is
applied.

If there is no available IPv4 source address, a SYSLOG message is issued when attempting to communicate
with an IPv4 SNTP server.

OOB cannot be defined as a source interface.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# sntp source-interface vlan 10

Cisco Business Switches 350 Series CLI Guide

268

Clock Commands

sntp source-interface-ipv6

sntp source-interface-ipv6

To specify the source interface whose IPv6 address will be used ad the Source IPv6 address for communication
with IPv6 SNTP servers, use the sntp source-interface-ipv6 command in Global Configuration mode. To
restore the default configuration, use the no form of this command.

Syntax

sntp source-interface-ipv6 interface-id

no sntp source-interface-ipv6

Parameters

• interface-id—Specifies the source interface.

Default Configuration

The IPv6 source address is the IPv6 address defined of the outgoing interface and selected in accordance with
RFC6724.

Command Mode

Global Configuration mode

User Guidelines

The outgoing interface is selected based on the SNTP server's IP address. If the source interface is the outgoing
interface, the IPv6 address defined on the interfaces and selected in accordance with RFC 6724.

If the source interface is not the outgoing interface, the minimal IPv4 address defined on the interface and
with the scope of the destination IPv6 address is applied.

If there is no available IPv6 source address, a SYSLOG message is issued when attempting to communicate
with an IPv6 SNTP server.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# sntp source-interface-ipv6 vlan 10

Cisco Business Switches 350 Series CLI Guide

269

sntp trusted-key

sntp trusted-key

Clock Commands

To define the trusted key, use the sntp trusted-key command in Global Configuration mode. To restore the
default configuration, use the no form of this command.

Syntax

sntp trusted-key key-number

no sntp trusted-key key-number

Parameters

• key-number—Specifies the key number of the authentication key to be trusted. (Range: 1–4294967295).

Default Configuration

No keys are trusted.

Command Mode

Global Configuration mode

User Guidelines

The trusted key is used for authentication of all servers not having personal keys assigned.

Examples

The following example authenticates key 8.

switchxxxxxx(config)# sntp trusted-key 8
switchxxxxxx(config)# sntp authentication-key 8 md5 ClkKey
switchxxxxxx(config)# sntp trusted-key 8
switchxxxxxx(config)# sntp authenticate

Cisco Business Switches 350 Series CLI Guide

270

Clock Commands

sntp unicast client enable

sntp unicast client enable

To enable the device to use Simple Network Time Protocol (SNTP) Unicast clients, use the sntp unicast
client enable command in Global Configuration mode. To disable the SNTP Unicast clients, use the no form
of this command.

Syntax

sntp unicast client enable

no sntp unicast client enable

Default Configuration

The SNTP unicast clients are enabled.

Command Mode

Global Configuration mode

User Guidelines

Use the sntp server Global Configuration mode command to define SNTP servers.

Example

The following example enables the device to use SNTP Unicast clients.

switchxxxxxx(config)# sntp unicast client enable

Cisco Business Switches 350 Series CLI Guide

271

sntp unicast client poll

Clock Commands

sntp unicast client poll

To enable polling for the SNTP Unicast clients, use the sntp unicast client poll command in Global
Configuration mode. To disable the polling, use the no form of this command.

Syntax

sntp unicast client poll

no sntp unicast client poll

Default Configuration

Polling is enabled.

Command Mode

Global Configuration mode

User Guidelines

The polling interval is 1024 seconds.

Example

The following example enables polling for SNTP unicast clients.

switchxxxxxx(config)# sntp unicast client poll

Cisco Business Switches 350 Series CLI Guide

272

Clock Commands

show clock

show clock

To display the time and date from the system clock, use the show clock command in User EXEC mode.

Syntax

show clock [detail]

Parameters

• detail—(Optional) Displays the time zone and summer time configuration.

Command Mode

User EXEC mode

User Guidelines

The default output of the command shows the current system date and time, information on the operational
source of the system time and general clock related configurations.

The detailed output of the command shows additional information about time-zone and daylight savings
configuration.

The possible values for operational system time source are:

• RTC - Indicates that the system time was set from the Real Time Clock component. This happens if the

system clock hasn’t been set by SNTP, by a user or by the browser.

• User - If the system clock was last set manually by a user.

• SNTP - if the system clock was last set by SNTP. In this case, the time since the last synchronization

with the SNTP server is also displayed.

• None - If the clock hasn’t been set by any method since the last reboot and the system does not have an

RTC component.

Example 1 - The following example displays general system time and date information.

switchxxxxxx# show clock

15:29:03 PDT(UTC-7) Jun 17 2019

Operational Time Source: SNTP (last synchronized 2 days, 18 hours, 29 minutes and 3 seconds

ago)

Time from SNTP is enabled
Time from Browser is disabled

Example 2 - The following example displays the system time and date along with the time zone and
daylight saving configuration.

switchxxxxxx# show clock detail

15:22:55 SUN Apr 23 2019

Operational Time Source: User
Time from SNTP is disabled
Time from Browser is enabled
Time zone (DHCPv4 on VLAN1):
Acronym is RAIN

Cisco Business Switches 350 Series CLI Guide

273

show clock

Clock Commands

Offset is UTC+2
Time zone (Static):
Offset is UTC+0
Summertime (DHCPv4 on VLAN1):
Acronym is SUN
Recurring every year.
Begins at first Sunday of Apr at 02:00.
Ends at first Tuesday of Sep at 02:00.
Offset is 60 minutes.
Summertime (Static):
Acronym is GMT
Recurring every year.
Begins at first Sunday of Mar at 10:00.
Ends at first Sunday of Sep at 10:00.
Offset is 60 minutes.
DHCP timezone: Enabled

Cisco Business Switches 350 Series CLI Guide

274

Clock Commands

show sntp configuration

show sntp configuration

To display the SNTP configuration on the device, use the show sntp configuration command in Privileged
EXEC mode.

Syntax

show sntp configuration

Command Mode

Privileged EXEC mode

Examples

The following example displays the device’s current SNTP configuration.

John123
Alice456

switchxxxxxx# show sntp configuration
SNTP port : 123
Polling interval: 1024 seconds
MD5 Authentication Keys
-----------------------------------
2
3
-----------------------------------
Authentication is not required for synchronization.
No trusted keys
Unicast Clients: enabled
Unicast Clients Polling: enabled
Server: 1.1.1.121

Polling: disabled
Encryption Key: disabled

Server: 3001:1:1::1
Polling: enabled
Encryption Key: disabled

Server: dns_server1.comapany.com

Polling: enabled
Encryption Key: disabled

Server: dns_server2.comapany.com

Polling: enabled
Encryption Key: disabled

Broadcast Clients: enabled for IPv4 and IPv6
Anycast Clients: disabled
No Broadcast Interfaces
Source IPv4 interface: vlan 1
Source IPv6 interface: vlan 10

Cisco Business Switches 350 Series CLI Guide

275

show sntp status

Clock Commands

show sntp status

To display the SNTP servers status, use the show sntp status command in Privileged EXEC mode.

Syntax

show sntp status

Command Mode

Privileged EXEC mode

Example

The following example displays the SNTP servers status:

switchxxxxxx# show sntp status
Clock is synchronized, stratum 4, reference is 176.1.1.8, unicast
Reference time is afe2525e.70597b34 (00:10:22.438 PDT Jul 5 1993)
Unicast servers:
Server: 176.1.1.8

Source: DHCPv4 on VLAN 1
Status: Up
Last response: 19:58:22.289 PDT Feb 19 2015
Last request: 19:58:21.555 PDT Feb 19 2015
Stratum Level: 1
Offset: 7.33mSec
Delay: 117.79mSec

Server: dns_server.comapany.com

Source: static
Status: Unknown
Last response: 12:17.17.987 PDT Feb 19 2015
Last request: 12:58:21.555 PDT Feb 19 2015
Stratum Level: 1
Offset: 8.98mSec
Delay: 189.19mSec
Server: 3001:1:1::1

Source: DHCPv6 on VLAN 2
Status: Unknown
Last response:
Last request:
Offset: mSec
Delay: mSec

Server: dns1.company.com

Source: DHCPv6 on VLAN 20
Status: Unknown
Last response:
Last request:
Offset: mSec
Delay: mSec
Anycast servers:
Server: 176.1.11.8

Interface: VLAN 112
Status: Up
Last response: 9:53:21.789 PDT Feb 19 2005
Last request: 9:53:21.689 PDT Feb 19 2005
Stratum Level: 10
Offset: 9.98mSec
Delay: 289.19mSec

Broadcast servers:

Cisco Business Switches 350 Series CLI Guide

276

Clock Commands

show sntp status

Server: 3001:1::12

Interface: VLAN 101
Last response: 9:53:21.789 PDT Feb 19 2005
Last reqeust: 9:53:21.689 PDT Feb 19 2005
Stratum Level: 255

Cisco Business Switches 350 Series CLI Guide

277

show time-range

Clock Commands

show time-range

To display the time range configuration, use the show time-range command in User EXEC mode.

Syntax

show time-range time-range-name

Parameters

• time-range-name—Specifies the name of an existing time range.

Command Mode

User EXEC mode

Example

switchxxxxxx# show time-range
http-allowed
--------------
absolute start 12:00 1 Jan 2005 end 12:00 31 Dec 2005
periodic Monday 12:00 to Wednesday 12:00

Cisco Business Switches 350 Series CLI Guide

278

Clock Commands

time-range

time-range

To define time ranges and to enter to Time-range Configuration mode, use the time-range command to define
time ranges and to enter to Time-range Configuration mode in Global Configuration mode. To restore the
default configuration, use the no form of this command.

Syntax

time-range time-range-name

no time-range time-range-name

Parameters

• time-range-name—Specifies the name for the time range. (Range: 1–32 characters).

Default Configuration

No time range is defined

Command Mode

Global Configuration mode

User Guidelines

After entering to Time-range Configuration mode with this command, use the absolute and periodic commands
to actually configure the time-range. Multiple periodic commands are allowed in a time range. Only one
absolute command is allowed.

If a time-range command has both absolute and periodic values specified, then the periodic items are evaluated
only after the absolute start time is reached, and are not evaluated again after the absolute end time is reached.

All time specifications are interpreted as local time.

To ensure that the time range entries take effect at the desired times, the software clock should be set by the
user or by SNTP. If the software clock is not set by the user or by SNTP, the time range is not activated.

Example

switchxxxxxx(config)# time-range http-allowed
switchxxxxxx(config-time-range)# periodic mon 12:00 to wed 12:00

Cisco Business Switches 350 Series CLI Guide

279

time-range

Clock Commands

Cisco Business Switches 350 Series CLI Guide

280

DoS Commands

This chapter contains the following sections:

• security-suite deny fragmented, on page 282
• security-suite deny icmp, on page 283
• security-suite deny martian-addresses, on page 284
• security-suite deny syn, on page 286
• security-suite deny syn-fin, on page 287
• security-suite dos protect, on page 288
• security-suite dos syn-attack, on page 289
• security-suite enable, on page 290
• security-suite syn protection mode, on page 292
• security-suite syn protection recovery, on page 293
• security-suite syn protection threshold, on page 294
• show security-suite configuration, on page 295
• show security-suite syn protection, on page 296

Cisco Business Switches 350 Series CLI Guide

281

security-suite deny fragmented

DoS Commands

security-suite deny fragmented

To discard IP fragmented packets from a specific interface, use the security-suite deny fragmented Interface
(Ethernet, Port Channel) Configuration mode command.

To permit IP fragmented packets, use the no form of this command.

Syntax

security-suite deny fragmented {[add {ip-address | any} {mask | /prefix-length}] | [remove {ip-address |
any} {mask | /prefix-length}]}

no security-suite deny fragmented

Parameters

• add ip-address | any—Specifies the destination IP address. Use any to specify all IP addresses.

• mask—Specifies the network mask of the IP address.

• prefix-length—Specifies the number of bits that comprise the IP address prefix. The prefix length must

be preceded by a forward slash (/).

Default Configuration

Fragmented packets are allowed from all interfaces.

If mask is unspecified, the default is 255.255.255.255.

If prefix-length is unspecified, the default is 32.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

For this command to work, show security-suite configuration, on page 295 must be enabled both globally and
for interfaces.

Example

The following example attempts to discard IP fragmented packets from an interface.

switchxxxxxx(config)# security-suite enable global-rules-only
switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# security-suite deny fragmented add any /32
To perform this command, DoS Prevention must be enabled in the per-interface mode.

Cisco Business Switches 350 Series CLI Guide

282

DoS Commands

security-suite deny icmp

security-suite deny icmp

To discard ICMP echo requests from a specific interface (to prevent attackers from knowing that the device
is on the network), use the security-suite deny icmp Interface (Ethernet, Port Channel) Configuration mode
command.

To permit echo requests, use the no form of this command.

Syntax

security-suite deny icmp {[add {ip-address | any} {mask | /prefix-length}] | [remove {ip-address | any}
{mask | /prefix-length}]}

no security-suite deny icmp

Parameters

• ip-address | any—Specifies the destination IP address. Use any to specify all IP addresses.

• mask—Specifies the network mask of the IP address.

• prefix-length—Specifies the number of bits that comprise the IP address prefix. The prefix length must

be preceded by a forward slash (/).

Default Configuration

Echo requests are allowed from all interfaces.

If mask is not specified, it defaults to 255.255.255.255.

If prefix-length is not specified, it defaults to 32.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

For this command to work, show security-suite configuration, on page 295 must be enabled both globally and
for interfaces.

This command discards ICMP packets with "ICMP type= Echo request" that ingress the specified interface.

Example

The following example attempts to discard echo requests from an interface.

switchxxxxxx(config)# security-suite enable global-rules-only
switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# security-suite deny icmp add any /32
To perform this command, DoS Prevention must be enabled in the per-interface mode.

Cisco Business Switches 350 Series CLI Guide

283

security-suite deny martian-addresses

DoS Commands

security-suite deny martian-addresses

To deny packets containing system-reserved IP addresses or user-defined IP addresses, use the security-suite
deny martian-addresses Global Configuration mode command.

To restore the default, use the no form of this command.

Syntax

security-suite deny martian-addresses {add {ip-address {mask | /prefix-length}} | remove {ip-address {mask
| /prefix-length}} (Add/remove user-specified IP addresses)

security-suite deny martian-addresses reserved {add | remove} (Add/remove system-reserved IP addresses,
see tables below)

no security-suite deny martian-addresses (This command removes addresses reserved by security-suite
deny martian-addresses {add {ip-address {mask | /prefix-length}} | remove {ip-address {mask |
/prefix-length}}, and removes all entries added by the user. The user can remove a specific entry by using
remove ip-address {mask | /prefix-length} parameter.

There is no no form of the security-suite deny martian-addresses reserved {add | remove} command. Use
instead the security-suite deny martian-addresses reserved remove command to remove protection (and
free up hardware resources).

Parameters

• reserved add/remove—Add or remove the table of reserved addresses below.

• ip-address—Adds/discards packets with the specified IP source or destination address.

• mask—Specifies the network mask of the IP address.

• prefix-length—Specifies the number of bits that comprise the IP address prefix. The prefix length must

be preceded by a forward slash (/).

• reserved—Discards packets with the source or destination IP address in the block of the reserved (Martian)

IP addresses. See the User Guidelines for a list of reserved addresses.

Default Configuration

Martian addresses are allowed.

Command Mode

Global Configuration mode

User Guidelines

For this command to work, show security-suite configuration, on page 295 must be enabled globally.

security-suite deny martian-addresses reserved adds or removes the addresses in the following table:

Cisco Business Switches 350 Series CLI Guide

284

DoS Commands

security-suite deny martian-addresses

Address Block

Present Use

0.0.0.0/8 (except when 0.0.0.0/32
is the source address)

Addresses in this block refer to source hosts on "this" network.

127.0.0.0/8

192.0.2.0/24

This block is assigned for use as the Internet host loopback
address.

This block is assigned as "TEST-NET" for use in
documentation and example code.

224.0.0.0/4 as source

This block, formerly known as the Class D address space, is
allocated for use in IPv4 multicast address assignments.

240.0.0.0/4 (except when
255.255.255.255/32 is the
destination address)

This block, formerly known as the Class E address space, is
reserved.

Note

If the reserved addresses are included, individual reserved addresses cannot be removed.

Example

The following example discards all packets with a source or destination address in the block of the reserved
IP addresses.

switchxxxxxx(config)# security-suite deny martian-addresses reserved add

Cisco Business Switches 350 Series CLI Guide

285

security-suite deny syn

DoS Commands

security-suite deny syn

To block the creation of TCP connections from a specific interface, use the security-suite deny syn Interface
(Ethernet, Port Channel) Configuration mode command. This a complete block of these connections.

To permit creation of TCP connections, use the no form of this command.

Syntax

security-suite deny syn {[add {tcp-port | any} {ip-address | any} {mask | /prefix-length}] | [remove {tcp-port
| any} {ip-address | any} {mask | /prefix-length}]}

no security-suite deny syn

Parameters

• ip-address | any—Specifies the destination IP address. Use any to specify all IP addresses.

• mask— Specifies the network mask of the destination IP address.

• prefix-length—Specifies the number of bits that comprise the destination IP address prefix. The prefix

length must be preceded by a forward slash (/).

• tcp-port | any—Specifies the destination TCP port. The possible values are: http, ftp-control, ftp-data,

ssh, telnet, smtp, or port number. Use any to specify all ports.

Default Configuration

Creation of TCP connections is allowed from all interfaces.

If the mask is not specified, it defaults to 255.255.255.255.

If the prefix-length is not specified, it defaults to 32.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

For this command to work, show security-suite configuration, on page 295 must be enabled both globally and
for interfaces.

The blocking of TCP connection creation from an interface is done by discarding ingress TCP packets with
"SYN=1", "ACK=0" and "FIN=0" for the specified destination IP addresses and destination TCP ports.

Example

The following example attempts to block the creation of TCP connections from an interface. It fails because
security suite is enabled globally and not per interface.

switchxxxxxx(config)# security-suite enable global-rules-only
switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# security-suite deny syn add any /32 any
To perform this command, DoS Prevention must be enabled in the per-interface mode.

Cisco Business Switches 350 Series CLI Guide

286

DoS Commands

security-suite deny syn-fin

security-suite deny syn-fin

To drop all ingressing TCP packets in which both SYN and FIN are set, use the security-suite deny syn-fin
Global Configuration mode command.

To permit TCP packets in which both SYN and FIN are set, use the no form of this command.

Syntax

security-suite deny syn-fin

no security-suite deny syn-fin

Parameters

This command has no arguments or keywords.

Default Configuration

The feature is enabled by default.

Command Mode

Global Configuration mode

Example

The following example blocks TCP packets in which both SYN and FIN flags are set.

switchxxxxxx(config)# security-suite deny syn-fin

Cisco Business Switches 350 Series CLI Guide

287

security-suite dos protect

DoS Commands

security-suite dos protect

To protect the system from specific well-known Denial of Service (DoS) attacks, use the security-suite dos
protect Global Configuration mode command. There are three types of attacks against which protection can
be supplied (see parameters below).

To disable DoS protection, use the no form of this command.

Syntax

security-suite dos protect {add attack | remove attack}

no security-suite dos protect

Parameters

add/remove attack—Specifies the attack type to add/remove. To add an attack is to provide protection against
it; to remove the attack is to remove protection.

The possible attack types are:

• stacheldraht—Discards TCP packets with source TCP port 16660.

• invasor-trojan—Discards TCP packets with destination TCP port 2140 and source TCP port 1024.

• back-orifice-trojan—Discards UDP packets with destination UDP port 31337 and source UDP port

1024.

Default Configuration

No protection is configured.

Command Mode

Global Configuration mode

User Guidelines

For this command to work, show security-suite configuration, on page 295 must be enabled globally.

Example

The following example protects the system from the Invasor Trojan DOS attack.

switchxxxxxx(config)# security-suite dos protect add invasor-trojan

Cisco Business Switches 350 Series CLI Guide

288

DoS Commands

security-suite dos syn-attack

security-suite dos syn-attack

To rate limit Denial of Service (DoS) SYN attacks, use the security-suite dos syn-attack Interface
Configuration mode command. This provides partial blocking of SNY packets (up to the rate that the user
specifies).

To disable rate limiting, use the no form of this command.

Syntax

security-suite dos syn-attack syn-rate {any | ip-address} {mask | prefix-length}

no security-suite dos syn-attack {any | ip-address} {mask | prefix-length}

Parameters

• syn-rate—Specifies the maximum number of connections per second. (Range: 199–1000)

• any | ip-address—Specifies the destination IP address. Use any to specify all IP addresses.

• mask—Specifies the network mask of the destination IP address.

• prefix-length—Specifies the number of bits that comprise the destination IP address prefix. The prefix

length must be preceded by a forward slash (/).

Default Configuration

No rate limit is configured.

If ip-address is unspecified, the default is 255.255.255.255

If prefix-length is unspecified, the default is 32.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

For this command to work, show security-suite configuration, on page 295 must be enabled both globally and
for interfaces. This command rate limits ingress TCP packets with "SYN=1", "ACK=0" and "FIN=0" for the
specified destination IP addresses. SYN attack rate limiting is implemented after the security suite rules are
applied to the packets. The ACL and QoS rules are not applied to those packets. Since the hardware rate
limiting counts bytes, it is assumed that the size of “SYN” packets is short.

Example

The following example attempts to rate limit DoS SYN attacks on a port. It fails because security suite is
enabled globally and not per interface.

switchxxxxxx(config)# security-suite enable global-rules-only
switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# security-suite dos syn-attack 199 any /10
To perform this command, DoS Prevention must be enabled in the per-interface mode.

Cisco Business Switches 350 Series CLI Guide

289

security-suite enable

DoS Commands

security-suite enable

To enable the security suite feature and setting, use the security-suite enable Global Configuration mode
command. The security suite feature supports protection against various types of attacks. To restore the default
configuration, use the no form of this command.

Syntax

security-suite enable [global-rules-only | interface-rules-only]

no security-suite enable

Parameters

• global-rules-only—(Optional) Specifies that device will support only global level (and not interface

level) security suite commands). This setting saves space in the Ternary Content Addressable Memory
(TCAM). If this keyword is not used, security-suite commands can be used both globally on per-interface.

• interface-rules-only—(Optional) Specifies that device will support only interface level security suite
command (See details in user guidelines below). This mode cannot be enabled if an ACL is applied to
any interface on device.

• (none) - If no keyword is used, security-suite commands can be used both globally and per-interface.This

mode cannot be enabled if an ACL is applied to any interface on device.

Default Configuration

The security suite feature is disabled.

If neither global-rules-only or interface-rules-only are specified, the default is to enable security-suite
globally and per interfaces.

Command Mode

Global Configuration mode

User Guidelines

Use this command to enable the ability to define security suite settings, and to determine the type of settings
that can be enabled (only global level rules, only interface level rules or both types). When security-suite is
enabled, the following commands can be used, depending on the mode set by user:

When this command is used, hardware resources are reserved. The number of resources reserved depends on
the mode specified in command (global-rules-only, interface-rules-only or no mode (meaning both types)).
Resources are released when the no security-suite enable command is entered.

MAC ACLs must be removed before the security-suite is enabled. The rules can be re-entered after the
security-suite is enabled. If ACLs or policy maps are assigned on interfaces, per interface security-suite rules
cannot be enabled.

Example 1—The following example enables the security suite feature and specifies that security
suite commands are global commands only. When an attempt is made to configure security-suite on
a port, it fails.

Cisco Business Switches 350 Series CLI Guide

290

DoS Commands

security-suite enable

switchxxxxxx(config)# security-suite enable global-rules-only
switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# security-suite dos syn-attack 199 any /10
To perform this command, DoS Prevention must be enabled in the per-interface mode.

Example 2—The following example enables the security suite feature globally and on interfaces.
The security-suite command succeeds on the port.

switchxxxxxx(config)# security-suite enable
switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# security-suite dos syn-attack 199 any /10
switchxxxxxx(config-if)#

Cisco Business Switches 350 Series CLI Guide

291

security-suite syn protection mode

DoS Commands

security-suite syn protection mode

To set the TCP SYN protection mode, use the security-suite syn protection mode Global Configuration
mode command.

To set the TCP SYN protection mode to default, use the no form of this command.

Syntax

security-suite syn protection mode {disabled | report | block}

no security-suite syn protection mode

Parameters

• disabled—Feature is disabled

• report—Feature reports about TCP SYN traffic per port (including rate-limited SYSLOG message when

an attack is identified)

• block—TCP SYN traffic from attacking ports destined to the local system is blocked, and a rate-limited

SYSLOG message (one per minute) is generated

Default Configuration

The default mode is block.

Command Mode

Global Configuration mode

User Guidelines

On ports in which an ACL is defined (user-defined ACL etc.), this feature cannot block TCP SYN packets.
In case the protection mode is block but SYN Traffic cannot be blocked, a relevant SYSLOG message will
be created, e.g.: “port gi1/0/1 is under TCP SYN attack. TCP SYN traffic cannot be blocked on this port since
the port is bound to an ACL.”

Example 1: The following example sets the TCP SYN protection feature to report TCP SYN attack
on ports in case an attack is identified from these ports.

switchxxxxxx(config)# security-suite syn protection mode report

Example 2: The following example sets the TCP SYN protection feature to block TCP SYN attack
on ports in case an attack is identified from these ports.

switchxxxxxx(config)# security-suite syn protection mode block

Cisco Business Switches 350 Series CLI Guide

292

DoS Commands

security-suite syn protection recovery

security-suite syn protection recovery

To set the time period for the SYN Protection feature to block an attacked interface, use the security-suite
syn protection period Global Configuration mode command.

To set the time period to its default value, use the no form of this command.

Syntax

security-suite syn protection recovery timeout

no security-suite syn protection recovery

Parameters

timeout—Defines the timeout (in seconds) by which an interface from which SYN packets are blocked gets
unblocked. Note that if a SYN attack is still active on this interface it might become blocked again. (Range:
10-600)

Default Configuration

The default timeout is 60 seconds.

Command Mode

Global Configuration mode

User Guidelines

If the timeout is modified, the new value will be used only on interfaces which are not currently under attack.

Example

The following example sets the TCP SYN period to 100 seconds.

switchxxxxxx(config)# security-suite syn protection recovery 100

Cisco Business Switches 350 Series CLI Guide

293

security-suite syn protection threshold

DoS Commands

security-suite syn protection threshold

To set the threshold for the SYN protection feature, use the security-suite syn protection threshold Global
Configuration mode command.

To set the threshold to its default value, use the no form of this command.

Syntax

security-suite syn protection threshold syn-packet-rate

no security-suite syn protection threshold

Parameters

syn-packet-rate—defines the rate (number of packets per second) from each specific port that triggers
identification of TCP SYN attack. (Range: 20-200)

Default Configuration

The default threshold is 80pps (packets per second).

Command Mode

Global Configuration mode

Example

The following example sets the TCP SYN protection threshold to 40 pps.

switchxxxxxx(config)# security-suite syn protection threshold 40

Cisco Business Switches 350 Series CLI Guide

294

DoS Commands

show security-suite configuration

show security-suite configuration

To display the security-suite configuration, use the show security-suite configuration switchxxxxxx>
command.

Syntax

show security-suite configuration

Command Mode

User EXEC mode

Example

The following example displays the security-suite configuration.

switchxxxxxx# show security-suite configuration

Security suite is enabled (Per interface rules are enabled).

Denial Of Service Protect: stacheldraht, invasor-trojan, back-office-trojan.
Denial Of Service SYN-FIN Attack is enabled
Denial Of Service SYN Attack

Interface
-----------------
gi1/0/1

IP Address
--------------
176.16.23.0\24

SYN Rate (pps)
--------------
100

Martian addresses filtering
Reserved addresses: enabled.
Configured addresses: 10.0.0.0/8, 192.168.0.0/16
SYN filtering

Interface
----------------
gi1/0/2

ICMP filtering

Interface
---------------
gi1/0/2

IP Address
--------------
176.16.23.0\24

TCP port
--------------
FTP

IP Address
--------------
176.16.23.0\24

Fragmented packets filtering

Interface
--------------
gi1/0/2

IP Address
--------------
176.16.23.0\24

Cisco Business Switches 350 Series CLI Guide

295

show security-suite syn protection

DoS Commands

show security-suite syn protection

To display the SYN Protection feature configuration and the operational status per interface-id, including the
time of the last attack per interface, use the show security-suite syn protection switchxxxxxx> command.

Syntax

show security-suite syn protection [interface-id]

Parameters

interface-id—(Optional) Specifies an interface-ID. The interface-ID can be one of the following types:
Ethernet port of Port-Channel.

Command Mode

User EXEC mode

User Guidelines

Use the Interface-ID to display information on a specific interface.

Example

The following example displays the TCP SYN protection feature configuration and current status on all
interfaces. In this example, port gi1/0/2 is attacked but since there is a user-ACL on this port, it cannot become
blocked so its status is Reported and not Blocked and Reported.

switchxxxxxx# show security-suite syn protection
Protection Mode: Block
Threshold: 40 Packets Per Second
Period: 100 Seconds

Interface Name

Current Status

Last Attack

gi1/0/1

gi1/0/2

gi1/0/3

Attacked

19:58:22.289 PDT Feb 19 2012 Blocked and Reported

Attacked

19:58:22.289 PDT Feb 19 2012 Reported

Attacked

19:58:22.289 PDT Feb 19 2012 Blocked and Reported

Cisco Business Switches 350 Series CLI Guide

296

DHCP Relay Commands

This chapter contains the following sections:

• ip dhcp relay enable (Global), on page 298
• ip dhcp relay enable (Interface), on page 299
• ip dhcp relay address (Global), on page 300
• show ip dhcp relay, on page 301
• ip dhcp information option, on page 302
• ip dhcp information option numeric-token-format, on page 303
• ip dhcp information option circuit-id, on page 304
• ip dhcp information option remote-id, on page 309
• show ip dhcp information option tokens, on page 313
• show ip dhcp information option , on page 316

Cisco Business Switches 350 Series CLI Guide

297

ip dhcp relay enable (Global)

DHCP Relay Commands

ip dhcp relay enable (Global)

Use the ip dhcp relay enable Global Configuration mode command to enable the DHCP relay feature on the
device. Use the no form of this command to disable the DHCP relay feature.

Syntax

ip dhcp relay enable

no ip dhcp relay enable

Default Configuration

DHCP relay feature is disabled.

Command Mode

Global Configuration mode

Example

The following example enables the DHCP relay feature on the device.

switchxxxxxx(config)# ip dhcp relay enable

Cisco Business Switches 350 Series CLI Guide

298

DHCP Relay Commands

ip dhcp relay enable (Interface)

ip dhcp relay enable (Interface)

Use the ip dhcp relay enable Interface Configuration mode command to enable the DHCP relay feature on
an interface. Use the no form of this command to disable the DHCP relay agent feature on an interface.

Syntax

ip dhcp relay enable

no ip dhcp relay enable

Default Configuration

Disabled

Command Mode

Interface Configuration mode

User Guidelines

The operational status of DHCP Relay on an interface is active if one of the following conditions exist:

• DHCP Relay is globally enabled, and there is an IP address defined on the interface.

Or

• DHCP Relay is globally enabled, there is no IP address defined on the interface, the interface is a VLAN,

and option 82 is enabled.

Example

The following example enables DHCP Relay on VLAN 21.

switchxxxxxx(config)# interface vlan 21
switchxxxxxx(config-if)# ip dhcp relay enable

Cisco Business Switches 350 Series CLI Guide

299

ip dhcp relay address (Global)

DHCP Relay Commands

ip dhcp relay address (Global)

Use the ip dhcp relay address Global Configuration mode command to define the DHCP servers available
for the DHCP relay. Use the no form of this command to remove the server from the list.

Syntax

ip dhcp relay address ip-address

no ip dhcp relay address [ip-address]

Parameters

• ip-address—Specifies the DHCP server IP address. Up to 8 servers can be defined.

Default Configuration

No server is defined.

Command Mode

Global Configuration mode

User Guidelines

Use the ip dhcp relay address command to define a global DHCP Server IP address. To define a few DHCP
Servers, use the command a few times.

To remove a DHCP Server, use the no form of the command with the ip-address argument.

The no form of the command without the ip-address argument deletes all global defined DHCP servers.

Example

The following example defines the DHCP server on the device.

switchxxxxxx(config)# ip dhcp relay address 176.16.1.1

Cisco Business Switches 350 Series CLI Guide

300

DHCP Relay Commands

show ip dhcp relay

show ip dhcp relay

Use the show ip dhcp relay EXEC mode command to display the DHCP relay information.

Syntax

show ip dhcp relay

Command Mode

User EXEC mode

Examples

Option 82 is disabled:

switchxxxxxx# show ip dhcp relay
DHCP relay is globally disabled
Option 82 is disabled
Maximum number of supported VLANs without IP Address: 0
Number of DHCP Relays enabled on VLANs without IP Address: 4
DHCP relay is enabled on Ports: gi1/0/1,po1-2

Active:
Inactive: gi1/0/1, po1-4

DHCP relay is enabled on VLANs: 1, 2, 4, 5

Active:
Inactive: 1, 2, 4, 5

Global Servers: 1.1.1.1 , 2.2.2.2

Option 82 is enabled:

switchxxxxxx# show ip dhcp relay
DHCP relay is globally enabled
Option 82 is enabled
Maximum number of supported VLANs without IP Address is 4
Number of DHCP Relays enabled on VLANs without IP Address: 2
DHCP relay is enabled on Ports: gi1/0/1,po1-2

Active: gi1/0/1
Inactive: po1-2

DHCP relay is enabled on VLANs: 1, 2, 4, 5

Active: 1, 2, 4, 5
Inactive:

Global Servers: 1.1.1.1 , 2.2.2.2

Cisco Business Switches 350 Series CLI Guide

301

ip dhcp information option

DHCP Relay Commands

ip dhcp information option

Use the ip dhcp information option Global Configuration mode command to enable DHCP option-82 data
insertion. Use the no form of this command to disable DHCP option-82 data insertion.

Syntax

ip dhcp information option

no ip dhcp information option

Default Configuration

DHCP option-82 data insertion is disabled.

Command Mode

Global Configuration mode

User Guidelines

DHCP option 82 would be enabled only if DHCP snooping or DHCP relay are enabled.

Example

switchxxxxxx(config)# ip dhcp information option

Cisco Business Switches 350 Series CLI Guide

302

DHCP Relay Commands

ip dhcp information option numeric-token-format

ip dhcp information option numeric-token-format

Use the ip dhcp information option numeric-token-format Global Configuration mode command to define
the format of numeric tokens included in the Circuit-ID and Remote-ID sub-options payload template. Use
the no form of this command to return to default format.

Syntax

ip dhcp information option numeric-token-format {hex|ascii}

no ip dhcp information option numeric-token-format

Parameters

• hex - Hexadecimal (Numeric value) format will be used in packet for numeric token included in the

Circuit-ID and Remote-ID payload template.

• ascii - ASCII format will be used in packet for numeric token included in the Circuit-ID and Remote-ID
payload template. If this option is selected, each individual digit in a numeric token will be represented
by its value in the ASCII table.

Default Configuration

The default format used is the hexadecimal/numeric format

Command Mode

Global Configuration mode

User Guidelines

Use this command to configure the format of numeric token included in the Circuit-ID or Remote-ID sub-options
payload templates commands: ip dhcp information option circuit-id and ip dhcp information option remote-id.

The following are the numeric tokens affected by this command:

• $int-ifindex$

• $int-portid$

• $switch-moduleid$

• $vlan-id$

Example

The following example configures the device to use the ASCII format for insertion of numeric-tokens:

switchxxxxxx(config)# ip dhcp information option numeric-token-format ascii

Cisco Business Switches 350 Series CLI Guide

303

ip dhcp information option circuit-id

DHCP Relay Commands

ip dhcp information option circuit-id

Use the ip dhcp information option circuit-id Global Configuration mode command to configure the template
of DHCP option 82 Circuit-ID sub-option payload. Use the no form of this command to return to default
template.

Syntax

ip dhcp information option circuit-id text

no ip dhcp information option circuit-id

Parameters

• text - Concatenation of free text and one or more tokens in the format of $tokenname$ (length 1-160).

Default Configuration

The default Circuit-ID payload template is $vlan-id$$switch-moduleid$$int-portid$

Command Mode

Global Configuration mode

User Guidelines

Use this command to configure the template of the option 82 Circuit-ID sub-option payload, inserted by
device. The payload section of the Circuit-ID sub option includes all bytes of sub option besides the first 4
bytes of the sub option which values are set by device as follows:

Circuit ID sub option Type (value = 1)

• Sub option total length (not including 1st byte and total length byte)

Circuit ID type (value= 1); Note: if default sub option template is used - value of this field equals 0

Sub option payload length

The text field is a concatenation of free text and one or more tokens in the format of $tokenname$. Tokens
must be entered in the exact format specified (see table below) or it will not be recognized as a token

The text can begin or end with free text or a token. Tokens can be concatenated sequentially or separated by
free text. If the free text includes a space character - the text parameter must be placed between quotation (e.g.
"text1 text2").

The Circuit-ID payload template must include at least 1 token related to an interface parameter (token beginning
with $int-xxx$). In addition - if the string does not include a VLAN related token - user will be asked to
confirm setting.

The total length of the text field in the command cannot exceed 160 bytes. The byte count includes all bytes
of the text parameter - including all free text and Tokens as written in the text field.

The combined length of the Circuit-ID payload Remote-ID payload cannot exceed 247 bytes. The payload
byte count takes into account the count of free-text chars (1 byte each) and a predefined length reserved for
each token (see in table below).

Cisco Business Switches 350 Series CLI Guide

304

DHCP Relay Commands

ip dhcp information option circuit-id

The following table details supported tokens, the device parameter they represent and the reserved and actual
byte count per each token:

Token Name

Description

Reserved Length

Actual Length

$int-ifindex$

$int-portid$

Source interface ifIndex
value

4 bytes

Hex Format - 2 bytes

ASCII format - 4 bytes

Source interface
sequential number on the
specific module (in stack).
For LAG source interfaces
- it is the LAG ID

2 bytes

Hex Format - 1 bytes

ASCII format - 2 bytes

$int-name$

The full name of the
source interface, as used
in CLI commands

32 bytes

$int-abrvname$

The abbreviated name of
the source interface, as
used in CLI commands

8 bytes

$int-desc-16$

$int-desc-32$

16 bytes

32 bytes

The description
configured by user on
source interface. If
description is more than
16 bytes - only the 1st 16
bytes are used

If a description is not
configured, the
abbreviated interface
name is used

The description
configured by user on
source interface. If
description is more than
32 bytes - only the 1st 32
bytes are used

If a description is not
configured, the
abbreviated interface
name is used

The actual number of
bytes needed for ASCII
representation of the
interface full name

The actual number of
bytes needed for ASCII
representation of the
interface full name

The actual number of
bytes needed for ASCII
representation of the
interface description (max
16 bytes)

The actual number of
bytes needed for ASCII
representation of the
interface description (max
32 bytes)

Cisco Business Switches 350 Series CLI Guide

305

ip dhcp information option circuit-id

DHCP Relay Commands

Token Name

Description

Reserved Length

Actual Length

$int-desc-64$

$int-mac$

$switch-mac$

$switch-hostname-16$

$switch-hostname-32$

$switch-hostname-58$

$switch-moduleid$

The description
configured by user on
source interface.

If a description is not
configured, the
abbreviated interface
name is used

MAC address of the
source interface (Hex
value with no delimiter)

MAC address of the
switch
relaying/forwarding
DHCP packet (Hex value
with no delimiter)

The hostname of the
switch
relaying/forwarding
DHCP packet.

If the hostname is more
than 16 bytes - only the
1st 16 bytes are used

The hostname of the
switch
relaying/forwarding
DHCP packet.

If the hostname is more
than 32 bytes - only the
1st 32 bytes are used

The hostname of the
switch
relaying/forwarding
DHCP packet.

The unit ID of the source
interface upon which the
DHCP client request was
received

64 bytes

The actual number of
bytes needed for ASCII
representation of the
interface description

6 bytes

6 bytes

6 bytes

6 bytes

16 bytes

32 bytes

58 bytes

The actual number of
bytes needed for ASCII
representation of the
hostname (max 16 bytes)

The actual number of
bytes needed for ASCII
representation of the
hostname (max 32 bytes)

The actual number of
bytes needed for ASCII
representation of the
hostname

2 bytes

Hex Format - 1 bytes

ASCII format - 2 bytes

Hex Format - 2 bytes

ASCII format - 4 bytes

$vlan-id$

The Source VLAN ID
(1-4094)

4 bytes

Cisco Business Switches 350 Series CLI Guide

306

DHCP Relay Commands

ip dhcp information option circuit-id

Token Name

Description

Reserved Length

Actual Length

$vlan-name-16$

16 bytes

The VLAN name assigned
by user to the VLAN. If
the name is more than 16
bytes - only the 1st 16
bytes are used

If a name is not configure
for the VLAN, the value
is taken from the relevant
VLAN ifDescr MIB field

$vlan-name-32$

The VLAN name assigned
by user to the VLAN.

32 bytes

If a name is not configure
for the VLAN, the value
is taken from the relevant
VLAN ifDescr MIB field

The actual number of
bytes needed for ASCII
representation of the
VLAN name (max 16)

The actual number of
bytes needed for ASCII
representation of the
VLAN name (max 32)

Notes:

• Source Interface or VLAN int table refers to the Interface or VLAN on which the DHCP client packet

(to which the option 82 is added) was received on.

• Reserved (Byte) Length - The maximum length the token may “consume” in the packet. This value is
used for calculation of the 247 byte limit (for all sub options payload combined). The reserved length
does not change if numeric tokens are filled in as Hexadecimal or ASCII values.

• Actual (Byte) Length - The actual number of bytes the token will “consume” in packet itself. The actual

byte length may change (for relevant tokens) if token is filled in as exadecimal or ASCII values.

Example

The following example configures the Circuit-ID payload template to a concatenation of free text and tokens
representing interface name and VLAN name (up to 16 chars):

switchxxxxxx(config)# ip dhcp information option circuit-id aaa$int-name$bbb$vlan-name-16$ccc

The following example configures the Circuit-ID payload template to - where text parameter does not include
a token related to an interface:

switchxxxxxx(config)# ip dhcp information option circuit-id aaa
Illegal Circuit-ID payload: Cicuit-ID must include at least 1 interface related Token

The following example configures the Circuit-ID payload template to use a concatenation of free text and
tokens - where template does not include a token related to a VLAN:

switchxxxxxx(config)# ip dhcp information option circuit-id aaa$int-name$bbb
Circuit-ID payload does not include a token reflecting DHCP client source VLAN. Continue?
y/n[n] y

The following example configures the Circuit-ID payload template to use a concatenation of free text and
tokens - resulting in a combined Circuit-ID and Remote-ID reserved payloads which exceed 247 bytes:

Cisco Business Switches 350 Series CLI Guide

307

ip dhcp information option circuit-id

DHCP Relay Commands

switchxxxxxx(config)# ip dhcp information option circuit-id
aaa$vlan-name-32$bbb$int-desc-64$ccc$switch-hostname-58$ddd
Illegal Circuit-ID payload: Circuit-ID and Remote-ID payload reserved byte count exceeds
247 bytes

Cisco Business Switches 350 Series CLI Guide

308

DHCP Relay Commands

ip dhcp information option remote-id

ip dhcp information option remote-id

Use the ip dhcp information option remote-id Global Configuration mode command to configure the
template of DHCP option 82 Remote-ID sub-option payload. Use the no form of this command to return to
default template.

Syntax

ip dhcp information option remote-id text

no ip dhcp information option remote-id

Parameters

• text - concatenation of free text and one or more tokens in the format of $tokenname$ (length 1-160).

Default Configuration

The default Remote-ID payload template is $switch-mac$

Command Mode

Global Configuration mode

User Guidelines

Use this command to configure the template of the option 82 Remote-ID sub-option payload, inserted by
device. The payload section of the Remote-ID sub option includes all bytes of sub option besides the first 4
bytes of the sub option which values are set by device as follows:

Remote-ID sub option Type (value = 2)

• Sub option total length (not including 1st byte and total length byte) Remote-ID type (value= 1); Note:

if default sub option template is used - value of this field equals 0. Sub option payload length

The text field is a concatenation of free text and one or more tokens in the format of $tokenname$. Tokens
must be entered in the exact format specified (see table below) or it will not be recognized as a token

The text can begin or end with free text or a token. Tokens can be concatenated sequentially or separated by
free text. If the free text includes a space character - the text parameter must be placed between quotation (e.g.
"text1 text2").

The Remote-ID payload template may include 1 token, multiple tokens or no tokens at all.

The total length of the text field in the command cannot exceed 160 bytes. The byte count includes all bytes
of the text parameter - including all free text and Tokens as written in the text field.

The combined length of the Circuit-ID payload Remote-ID payload cannot exceed 247 bytes. The payload
byte count takes into account the count of free-text chars (1 byte each) and a predefined length reserved for
each token (see in table below).

The following table details supported tokens, the device parameter they represent and the reserved and actual
byte count per each token:

Cisco Business Switches 350 Series CLI Guide

309

ip dhcp information option remote-id

DHCP Relay Commands

Token Name

Description

Reserved Length

Actual Length

$int-ifindex$

$int-portid$

Source interface ifIndex
value

4 bytes

Hex Format - 2 bytes

ASCII format - 4 bytes

Source interface
sequential number on the
specific module (in stack).
For LAG source interfaces
- it is the LAG ID

2 bytes

Hex Format - 1 bytes

ASCII format - 2 bytes

$int-name$

The full name of the
source interface, as used
in CLI commands

32 bytes

$int-abrvname$

The abbreviated name of
the source interface, as
used in CLI commands

8 bytes

$int-desc-16$

$int-desc-32$

$int-desc-64$

16 bytes

32 bytes

64 bytes

The description
configured by user on
source interface. If
description is more than
16 bytes - only the 1st 16
bytes are used

If a description is not
configured, the
abbreviated interface
name is used

The description
configured by user on
source interface. If
description is more than
32 bytes - only the 1st 32
bytes are used

If a description is not
configured, the
abbreviated interface
name is used

The description
configured by user on
source interface.

If a description is not
configured, the
abbreviated interface
name is used

The actual number of
bytes needed for ASCII
representation of the
interface full name

The actual number of
bytes needed for ASCII
representation of the
interface full name

The actual number of
bytes needed for ASCII
representation of the
interface description (max
16 bytes)

The actual number of
bytes needed for ASCII
representation of the
interface description (max
32 bytes)

The actual number of
bytes needed for ASCII
representation of the
interface description

Cisco Business Switches 350 Series CLI Guide

310

DHCP Relay Commands

ip dhcp information option remote-id

Token Name

Description

Reserved Length

Actual Length

$int-mac$

$switch-mac$

$switch-hostname-16$

$switch-hostname-32$

$switch-hostname-58$

$switch-moduleid$

MAC address of the
source interface (Hex
value with no delimiter)

MAC address of the
switch
relaying/forwarding
DHCP packet (Hex value
with no delimiter)

The hostname of the
switch
relaying/forwarding
DHCP packet.

If the hostname is more
than 16 bytes - only the
1st 16 bytes are used

The hostname of the
switch
relaying/forwarding
DHCP packet.

If the hostname is more
than 32 bytes - only the
1st 32 bytes are used

The hostname of the
switch
relaying/forwarding
DHCP packet.

The unit ID of the source
interface upon which the
DHCP client request was
received

6 bytes

6 bytes

6 bytes

6 bytes

16 bytes

32 bytes

58 bytes

The actual number of
bytes needed for ASCII
representation of the
hostname (max 16 bytes)

The actual number of
bytes needed for ASCII
representation of the
hostname (max 32 bytes)

The actual number of
bytes needed for ASCII
representation of the
hostname

2 bytes

Hex Format - 1 bytes

ASCII format - 2 bytes

$vlan-id$

The Source VLAN ID
(1-4094)

4 bytes

$vlan-name-16$

16 bytes

The VLAN name assigned
by user to the VLAN. If
the name is more than 16
bytes - only the 1st 16
bytes are used

If a name is not configure
for the VLAN, the value
is taken from the relevant
VLAN ifDescr MIB field

Hex Format - 2 bytes

ASCII format - 4 bytes

The actual number of
bytes needed for ASCII
representation of the
VLAN name (max 16)

Cisco Business Switches 350 Series CLI Guide

311

ip dhcp information option remote-id

DHCP Relay Commands

Token Name

Description

Reserved Length

Actual Length

$vlan-name-32$

The VLAN name assigned
by user to the VLAN.

32 bytes

If a name is not configure
for the VLAN, the value
is taken from the relevant
VLAN ifDescr MIB field

The actual number of
bytes needed for ASCII
representation of the
VLAN name (max 32)

Notes:

• Source Interface or VLAN int table refers to the Interface or VLAN on which the DHCP client packet

(to which the option 82 is added) was received on.

• Reserved (Byte) Length - The maximum length the token may “consume” in the packet. This value is
used for calculation of the 247 byte limit (for all sub options payload combined). The reserved length
does not change if numeric tokens are filled in as Hexadecimal or ASCII values.

• Actual (Byte) Length - The actual number of bytes the token will “consume” in packet itself. The actual

byte length may change (for relevant tokens) if token is filled in as hexadecimal or ASCII values.

Example

The following example configures the device to use a Remote-ID which is a concatenation of free text and
the full device hostname:

switchxxxxxx(config)# ip dhcp information option remote-id aaa$switch-hostname-58$bbb

Cisco Business Switches 350 Series CLI Guide

312

DHCP Relay Commands

show ip dhcp information option tokens

show ip dhcp information option tokens

Use the show ip dhcp information option tokens User EXEC mode command to display tokens which can
be used when configuring the payloads of Circuit-ID and Remote-ID sub options (DHCP option 82):

Syntax

show ip dhcp information option tokens [brief]

Parameters

• Brief - Displays the name of the tokens without token information.

Default Configuration

Full token information is displayed

Command Mode

User EXEC mode

User Guidelines

Use this command to display the tokens that can be used as part of the text parameter in commands ip dhcp
information option circuit-id or ip dhcp information option remote-id. The tokens represent various system
info, which the user can include in either of the sub-options’ payloads. This allows automatic update of value
based on current system information and also based on relevant interfaces.

The tokens have meaningful and pre-determined names based on the information they represent. A $ symbol
is placed before and after the Token name ($token-name$).

Tokens can be divided, in general, into 3 groups: Tokens which represent interface level information (format
of $int-xxx$); Tokens which represent switch level information (format of $switch-xxx$), and tokens which
represent VLAN related information (format of $vlan-xxx$).

Example

The following example displays all supported tokens and all the information related to each token:

switchxxxxxx# show ip dhcp information option tokens
Interface level Tokens - relates to the interface upon which the DHCP client packet was
received:
Token Name: $int-ifindex$
Token value: ifIndex of the interface
Token format: Hex (default) or ASCII
Token reserved length: 4 bytes.
Token actual payload length: 2(HEX)/4(ASCII) bytes.
Token Name: $int-portid$
Token value: interface number relative to the specific unit (standalone or stacking unit)
Token format: Hex (default) or ASCII
Token reserved length: 2 bytes
Token actual payload length: 1(HEX)/2(ASCII) bytes
Token Name: $int-name$
Token value: The interface full name based as used in CLI
Token format: ASCII
Token reserved length: 32 bytes

Cisco Business Switches 350 Series CLI Guide

313

show ip dhcp information option tokens

DHCP Relay Commands

Token actual payload length: Actual number of bytes (ASCII) inserted to sub-option
Token Name: $int-abrvname$
Token value: The interface abbreviated name as used in CLI
Token format: ASCII
Token reserved length: 8 bytes
Token actual payload length: Actual number of bytes (ASCII) inserted to sub-option
Token Name: $int-desc-16$
Token value: (up to) The first 16 bytes of the description user configured for the interface
Token format: ASCII
Token reserved length: 16 bytes
Token actual payload length: Actual number of bytes (ASCII) inserted to sub-option
Token Name: $int-desc-32$
Token value: (up to) The first 32 bytes of the description user configured for the interface
Token format: ASCII
Token reserved length: 32 bytes
Token actual payload length: Actual number of bytes (ASCII) inserted to sub-option
Token Name: $int-desc-64$
Token value: The full description user configured for the interface (even if more than 32
bytes)
Token format: ASCII
Token reserved length: 64 bytes
Token actual payload length: Actual number of bytes (ASCII) inserted to sub-option
Token Name: $int-mac$
Token value: The MAC address of the physical interface
Token format: HEX
Token reserved length: 6 bytes
Token actual payload length:6 bytes
Device level Tokens - relates to switch level information:
Token Name: $switch-mac$
Token value: Device base MAC address
Token format: HEX
Token reserved length: 6 bytes
Token actual payload length:6 bytes
Token Name: $switch-hostname-16$
Token value: (Up to) The first 16 bytes of the hostname of the device
Token format: ASCII
Token reserved length: 16 bytes
Token actual payload length: Actual number of bytes (ASCII) inserted to sub-option
Token Name: $switch-hostname-32$
Token value: (Up to) The first 32 bytes of the hostname of the device
Token format: ASCII
Token reserved length: 32 bytes
Token actual payload length: Actual number of bytes (ASCII) inserted to sub-option
Token Name: $switch-hostname-58$
Token value: Device full hostname (even if more than 32 bytes)
Token format: ASCII
Token reserved length: 58 bytes
Token actual payload length: Actual number of bytes (ASCII) inserted to sub-option
Token Name: $switch-moduleid$
Token value: The unit ID of the unit within the stack
Token format: Hex (default) or ASCII
Token reserved length: 2 bytes
Token actual payload length: 1(HEX)/2(ASCII) bytes
VLAN level Tokens - relates to the VLAN upon which the DHCP client packet was received:
Token Name: $vlan-id$
Token value: VLAN ID (1-4094)
Token format: Hex (default) or ASCII
Token reserved length: 4 bytes
Token actual payload length: 2(HEX)/4(ASCII) bytes
Token Name: $vlan-name-16$
Token value: (Up to) The first 16 bytes of the VLAN name
Token format: ASCII
Token reserved length: 16 bytes
Token actual payload length: Actual number of bytes (ASCII) inserted to sub-option

Cisco Business Switches 350 Series CLI Guide

314

DHCP Relay Commands

show ip dhcp information option tokens

Token Name: $vlan-name-32$
Token value: The full VLAN name (even if more than 16 bytes)
Token format: ASCII
Token reserved length: 32 bytes
Token actual payload length: Actual number of bytes (ASCII) inserted to sub-option

The following example displays only the names of the supported Tokens:

switchxxxxxx# show ip dhcp information option tokens brief
Interface level Tokens:
$int-ifindex$
$int-portid$
$int-name$
$int-abrvname$
$int-desc-16$
$int-desc-32$
$int-desc-64$
$int-mac$
Device level Tokens:
$switch-mac$
$switch-hostname-16$
$switch-hostname-32$
$switch-hostname-58$
$switch-moduleid$
VLAN level Tokens:
$vlan-id$
$vlan-name-16$
$vlan-name-32$

Cisco Business Switches 350 Series CLI Guide

315

show ip dhcp information option

DHCP Relay Commands

show ip dhcp information option

The show ip dhcp information option User EXEC mode command displays the DHCP Option 82 and sub
option configuration.

Syntax

show ip dhcp information option [{interface interface-id} {vlan vlan}]

Parameters

• interface interface-id - Specifies an interface ID. The interface ID can be one of the following types:
Ethernet port or Port-channel. Use this parameter together with the vlan parameter to display actual
option 82 payload for a DHCP client message received on the specified interface and VLAN

• vlan vlan- Specifies a VLAN ID Use this parameter together with the interface parameter to display
actual option 82 payload for a DHCP client message received on the specified interface and VLAN

Default Configuration

If no parameter is entered the general settings of option 82 will be displayed.

Command Mode

User EXEC mode

Example

The following example displays global information for DHCP option 82, including sub options, when user
did not change the settings of Option 82 sub-options.

switchxxxxxx# show ip dhcp information option
Relay agent Information option is Enabled
Numeric Token format: hex
Circuit-id payload template: (default)
Remote-id payload template: (default)
Total sub Options reserved payload: 14/247 bytes

The following example displays global information for DHCP option 82, including sub options, where user
modified both Circuit-ID and Remote-ID sub-options.

switchxxxxxx# show ip dhcp information option
Relay agent Information option is Enabled
Numeric Token format: hex
Circuit-id payload template: aaa$int-name$bbb$vlan-name$ccc
Remote-id payload template: aaa$switch-hostname-58$bbb
Total sub Options reserved payload: 143/247 bytes

The following example displays specific interface and VLAN information for DHCP option 82, where user
modified both Circuit-ID and Remote-ID sub-options.

switchxxxxxx# show ip dhcp information option interface te1/0/1 vlan 2
Relay agent Information option is Enabled
Numeric Token format: hex
Circuit-id payload template: aaa$int-name$bbb$vlan-name$ccc
Remote-id payload template: aaa$switch-hostname-58$bbb
Total sub Options reserved payload: 143/247 bytes

Cisco Business Switches 350 Series CLI Guide

316

DHCP Relay Commands

show ip dhcp information option

Interface te1/0/1 vlan 2:
Circuit-id header content: 0131012f
Circuit-id payload content: 61616154656e6769676162697445746865726e657431
2f302f3162626241502d564c414e636363
Circuit-id payload textual resolution: aaaTengigabitEthernet1/0/1bbbAP-VLANccc //removed
support 31-Jul-18//
Circuit-id Total Length: 43
Remote-id header content: 0211010f
Remote-id payload content: 616161466c6f6f7234537769746368626262
Remote-id payload textual resolution: aaaFloor4Switchbbbb //removed support 31-Jul-18//
Remote-id Total Length: 22

The following example displays specific interface and VLAN information for DHCP option 82, including
sub options, when user modified only the Circuit-ID sub-option.

switchxxxxxx# show ip dhcp information option interface te1/0/10 vlan 13
Relay agent Information option is Enabled
Numeric Token format: hex
Circuit-id payload template: $int-portid$aaa$vlan-id$zzz
Remote-id payload template: (default)
Total sub Options reserved payload: 18/247 bytes
Interface te1/0/10 vlan 13:
Circuit-id header content: 010b012f
Circuit-id payload content: 0a616161000d7a7a7a
Circuit-id payload textual resolution: 10aaa13zzz //removed support 31-Jul-18//
Circuit-id Total Length: 13
Remote-id header content: 02080006
Remote-id payload content: 000000112233
Remote-id payload textual resolution: 000000112233 //removed support 31-Jul-18//
Remote-id Total Length: 10

The following example displays specific interface and VLAN information for DHCP option 82, when user
set Numeric Token format to ASCII and configured Circuit-ID sub-option.

switchxxxxxx# show ip dhcp information option interface te1/0/10 vlan 13
Relay agent Information option is Enabled
Numeric Token format: ascii
Circuit-id payload template: $int-portid$aaa$vlan-id$zzz
Remote-id payload template: (default)
Total sub Options reserved payload: 18/247 bytes
Interface te1/0/10 vlan 13:
Circuit-id header content: 010e012f
Circuit-id payload content: 3130616161303031337a7a7a
Circuit-id payload textual resolution: 10aaa13zzz ////removed support 31-Jul-18//
Circuit-id Total Length: 16
Remote-id header content: 0211000f
Remote-id payload content: 000000112233
Remote-id payload textual resolution: 000000112233 //removed support 31-Jul-18//
Remote-id Total Length: 10

The following example requested display is for specific interface and VLAN information for DHCP option
82, where $vlan-name-32$ is one of the tokens - but the specific VLAN was not created on device.

switchxxxxxx# show ip dhcp information option interface te1/0/1 vlan 2
Relay agent Information option is Enabled
Numeric Token format: hex
Circuit-id payload template: aaa$int-name$bbb$vlan-name-32$ccc
Remote-id payload template: aaa$switch-hostname-58$bbb
Total sub Options reserved payload: 137/247 bytes
Interface te1/0/1 vlan 2:
Error - Cannot calculate Circuit-ID info - sub-option contains VLAN related Token which
does not exist on device.

Cisco Business Switches 350 Series CLI Guide

317

show ip dhcp information option

DHCP Relay Commands

Cisco Business Switches 350 Series CLI Guide

318

DHCP Server Commands

This chapter contains the following sections:

• address (DHCP Host), on page 320
• address (DHCP Network), on page 321
• auto-default-router, on page 322
• bootfile, on page 323
• clear ip dhcp binding, on page 324
• client-name, on page 325
• default-router, on page 326
• dns-server, on page 327
• domain-name, on page 328
• ip dhcp excluded-address, on page 329
• ip dhcp pool host, on page 330
• ip dhcp pool network, on page 331
• ip dhcp server, on page 332
• lease, on page 333
• netbios-name-server, on page 334
• netbios-node-type, on page 335
• next-server, on page 336
• next-server-name, on page 337
• option , on page 338
• show ip dhcp, on page 340
• show ip dhcp allocated, on page 341
• show ip dhcp binding, on page 342
• show ip dhcp declined, on page 344
• show ip dhcp excluded-addresses, on page 345
• show ip dhcp expired, on page 346
• show ip dhcp pool host, on page 347
• show ip dhcp pool network, on page 348
• show ip dhcp pre-allocated, on page 349
• show ip dhcp server statistics, on page 350
• time-server, on page 351

Cisco Business Switches 350 Series CLI Guide

319

address (DHCP Host)

DHCP Server Commands

address (DHCP Host)

To manually bind an IP address to a DHCP client, use the address command in DHCP Pool Host Configuration
mode. To remove the IP address binding to the client, use the no form of this command.

Syntax

address ip-address {mask | prefix-length} {client-identifier unique-identifier | hardware-address
mac-address}

no address

Parameters

• address—Specifies the client IP address.

• mask—Specifies the client network mask.

• prefix-length—Specifies the number of bits that comprise the address prefix. The prefix is an alternative
way of specifying the client network mask. The prefix length must be preceded by a forward slash (/).

• unique-identifier—Specifies the distinct client identification in dotted hexadecimal notation. Each byte
in a hexadecimal character string is two hexadecimal digits. Bytes are separated by a period or colon.
For example, 01b7.0813.8811.66.

• mac-address—Specifies the client MAC address.

Default Configuration

No address are bound.

Command Mode

DHCP Pool Host Configuration mode

User Guidelines

To classify the DHCP client, DHCP server uses either the client identifier passed in Option 61, if the
client-identifier keyword is configured or the client MAC address, if the hardware-address keyword is
configured.

Example

The following example manually binds an IP address to a DHCP client.

switchxxxxxx(config)# ip dhcp pool host aaaa
switchxxxxxx(config-dhcp)# address 10.12.1.99 255.255.255.0 client-identifier
01b7.0813.8811.66
switchxxxxxx(config-dhcp)# exit
switchxxxxxx(config)# ip dhcp pool host bbbb
switchxxxxxx(config-dhcp)# address 10.12.1.88 255.255.255.0 hardware-address 00:01:b7:08:13:88
switchxxxxxx(config-dhcp)# exit
switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

320

DHCP Server Commands

address (DHCP Network)

address (DHCP Network)

To configure the subnet number and mask for a DHCP address pool on a DHCP server, use the address
command in DHCP Pool Network Configuration mode. To remove the subnet number and mask, use the no
form of this command.

Syntax

address {network-number | low low-address high high-address} {mask | prefix-length}

no address

Parameters

• network-number—Specifies the IP address of the DHCP address pool.

• mask—Specifies the pool network mask.

• prefix-length—Specifies the number of bits that comprise the address prefix. The prefix is an alternative
way of specifying the client network mask. The prefix length must be preceded by a forward slash (/).

• low low-address—Specifies the first IP address to use in the address range.

• high high-address—Specifies the last IP address to use in the address range.

Default Configuration

DHCP address pools are not configured.

If the low address is not specified, it defaults to the first IP address in the network.

If the high address is not specified, it defaults to the last IP address in the network.

Command Mode

DHCP Pool Network Configuration mode

Example

The following example configures the subnet number and mask for a DHCP address pool on a DHCP server.

switchxxxxxx(config-dhcp)# address 10.12.1.0 255.255.255.0

Cisco Business Switches 350 Series CLI Guide

321

auto-default-router

DHCP Server Commands

auto-default-router

To enable auto default router, use the auto-default-router command in DHCP Pool Network Configuration
mode or in DHCP Pool Host Configuration mode. To disable auto default router, use the no form of this
command.

Syntax

auto-default-router

no auto-default-router

Command Mode

DHCP Pool Network Configuration mode

DHCP Pool Host Configuration mode

Default Configuration

Enabled.

User Guidelines

If the feature is enabled then the DHCP server returns an IP address defined on the input interface as a default
router when an default router is not configured in the following case:

• Default router is not configurable.

• DHCP client is directly connected.

• IP Routing is enabled.

• Default router was required by the client.

Example

The following example disable auto default router sending.

switchxxxxxx(config-dhcp)# no auto-default-router

Cisco Business Switches 350 Series CLI Guide

322

DHCP Server Commands

bootfile

bootfile

To specify the default boot image file name for a DHCP client, use the bootfile command in DHCP Pool
Network Configuration mode or in DHCP Pool Host Configuration mode. To delete the boot image file name,
use the no form of this command.

Syntax

bootfile filename

no bootfile

Parameters

• filename—Specifies the file name used as a boot image. (Length: 1–128 characters).

Command Mode

DHCP Pool Network Configuration mode

DHCP Pool Host Configuration mode

Example

The following example specifies boot_image_file as the default boot image file name for a DHCP client.

switchxxxxxx(config-dhcp)# bootfile boot_image_file

Cisco Business Switches 350 Series CLI Guide

323

clear ip dhcp binding

DHCP Server Commands

clear ip dhcp binding

To delete the dynamic address binding from the DHCP server database, use the clear ip dhcp binding
command in Privileged EXEC mode.

Syntax

clear ip dhcp binding {address | *}

Parameters

• address —Specifies the binding address to delete from the DHCP database.

• * —Clears all dynamic bindings.

Command Mode

Privileged EXEC mode

User Guidelines

Typically, the address supplied denotes the client IP address. If the asterisk (*) character is specified as the
address parameter, DHCP clears all dynamic bindings.

Use the no ip dhcp pool Global Configuration mode command to delete a manual binding.

Example

The following example deletes the address binding 10.12.1.99 from a DHCP server database:

switchxxxxxx# clear ip dhcp binding 10.12.1.99

Cisco Business Switches 350 Series CLI Guide

324

DHCP Server Commands

client-name

client-name

To define the name of a DHCP client, use the client-name command in DHCP Pool Host Configuration mode.
To remove the client name, use the no form of this command.

Syntax

client-name name

no client-name

Parameters

• name—Specifies the client name, using standard ASCII characters. The client name should not include
the domain name. For example, the .name Mars should not be specified as mars.yahoo.com. (Length:
1–32 characters).

Command Mode

DHCP Pool Host Configuration mode

Default Configuration

No client name is defined.

Example

The following example defines the string client1 as the client name.

switchxxxxxx(config-dhcp)# client-name client1

Cisco Business Switches 350 Series CLI Guide

325

default-router

default-router

DHCP Server Commands

To configure the default router list for a DHCP client, use the default-router command in DHCP Pool Network
Configuration mode or in DHCP Pool Host Configuration mode. To remove the default router list, use the no
form of this command.

Syntax

default-router ip-address [ip-address2 ... ip-address8]

no default-router

Parameters

• ip-address [ip-address2 ... ip-address8]—Specifies the IP addresses of default routers. Up to eight

addresses can be specified in one command line.

Command Mode

DHCP Pool Network Configuration mode

DHCP Pool Host Configuration mode

Default Configuration

No default router is defined.

User Guidelines

The router IP address should be on the same subnet as the client subnet.

If the auto-default-router command is configured then the DHCP server returns an IP address defined on the
input interface as a default router when an default router is not configured in the following case:

• Default router is not configurable.

• DHCP client is directly connected.

• IP Routing is enabled.

• Default router was required by the client.

Example

The following example specifies 10.12.1.99 as the default router IP address.

switchxxxxxx(config-dhcp)# default-router 10.12.1.99

Cisco Business Switches 350 Series CLI Guide

326

DHCP Server Commands

dns-server

dns-server

To configure the Domain Name System (DNS) IP server list available to a DHCP client, use the dns-server
command in DHCP Pool Network Configuration mode or in DHCP Pool Host Configuration mode. To remove
the DNS server list, use the no form of this command.

Syntax

dns-server ip-address [ip-address2 ... ip-address8]

no dns-server

Parameters

• ip-address [ip-address2 ... ip-address8]—Specifies the IP addresses of DNS servers. Up to eight addresses

can be specified in one command line.

Command Mode

DHCP Pool Network Configuration mode

DHCP Pool Host Configuration mode

Default Configuration

No DNS server is defined.

User Guidelines

If DNS IP servers are not configured for a DHCP client, the client cannot correlate host names to IP addresses.

Example

The following example specifies 10.12.1.99 as the client domain name server IP address.

switchxxxxxx(config-dhcp)# dns-server 10.12.1.99

Cisco Business Switches 350 Series CLI Guide

327

domain-name

domain-name

DHCP Server Commands

To specify the domain name for a DHCP client, use the domain-name command in DHCP Pool Network
Configuration mode or in DHCP Pool Host Configuration mode. To remove the domain name, use the no
form of this command.

Syntax

domain-name domain

no domain-name

Parameters

• domain—Specifies the DHCP client domain name string. (Length: 1–32 characters).

Command Mode

DHCP Pool Network Configuration mode

DHCP Pool Host Configuration mode

Default Configuration

No domain name is defined.

Example

The following example specifies yahoo.com as the DHCP client domain name string.

switchxxxxxx(config-dhcp)# domain-name yahoo.com

Cisco Business Switches 350 Series CLI Guide

328

DHCP Server Commands

ip dhcp excluded-address

ip dhcp excluded-address

To specify IP addresses that a DHCP server must not assign to DHCP clients, use the ip dhcp excluded-address
command in Global Configuration mode. To remove the excluded IP addresses, use the no form of this
command.

Syntax

ip dhcp excluded-address low-address [high-address]

no ip dhcp excluded-address low-address [high-address]

Parameters

• low-address—Specifies the excluded IP address, or first IP address in an excluded address range.

• high-address—(Optional) Specifies the last IP address in the excluded address range.

Default Configuration

All IP pool addresses are assignable.

Command Mode

Global Configuration mode

User Guidelines

The DHCP server assumes that all pool addresses can be assigned to clients. Use this command to exclude a
single IP address or a range of IP addresses.

Example

The following example configures an excluded IP address range from 172.16.1.100 through 172.16.1.199.

switchxxxxxx(config)# ip dhcp excluded-address 172.16.1.100 172.16.1.199

Cisco Business Switches 350 Series CLI Guide

329

ip dhcp pool host

DHCP Server Commands

ip dhcp pool host

To configure a DHCP static address on a DHCP server and enter the DHCP Pool Host Configuration mode,
use the ip dhcp pool host command in Global Configuration mode. To remove the address pool, use the no
form of this command.

Syntax

ip dhcp pool host name

no ip dhcp pool host name

Parameters

• name—Specifies the DHCP address pool name. It can be either a symbolic string (such as Engineering)

or an integer (such as 8). (Length: 1–32 characters).

Default Configuration

DHCP hosts are not configured.

Command Mode

Global Configuration mode

User Guidelines

During execution of this command, the configuration mode changes to the DHCP Pool Configuration mode.
In this mode, the administrator can configure host parameters, such as the IP subnet number and default router
list.

Example

The following example configures station as the DHCP address pool:

switchxxxxxx(config)# ip dhcp pool host station
switchxxxxxx(config-dhcp)#

Cisco Business Switches 350 Series CLI Guide

330

DHCP Server Commands

ip dhcp pool network

ip dhcp pool network

To configure a DHCP address pool on a DHCP Server and enter DHCP Pool Network Configuration mode,
use the ip dhcp pool network command in Global Configuration mode. To remove the address pool, use the
no form of this command.

Syntax

ip dhcp pool network name

no ip dhcp pool network name

Parameters

• name—Specifies the DHCP address pool name. It can be either a symbolic string (such as ‘engineering’)

or an integer (such as 8). (Length: 1–32 characters).

Default Configuration

DHCP address pools are not configured.

Command Mode

Global Configuration mode

User Guidelines

During execution of this command, the configuration mode changes to DHCP Pool Network Configuration
mode. In this mode, the administrator can configure pool parameters, such as the IP subnet number and default
router list.

Example

The following example configures Pool1 as the DHCP address pool.

switchxxxxxx(config)# ip dhcp pool network Pool1
switchxxxxxx(config-dhcp)#

Cisco Business Switches 350 Series CLI Guide

331

ip dhcp server

ip dhcp server

DHCP Server Commands

To enable the DHCP server features on the device, use the ip dhcp server command in Global Configuration
mode. To disable the DHCP server, use the no form of this command.

Syntax

ip dhcp server

no ip dhcp server

Default Configuration

The DHCP server is disabled.

Command Mode

Global Configuration mode

Example

The following example enables the DHCP server on the device:

switchxxxxxx(config)# ip dhcp server

Cisco Business Switches 350 Series CLI Guide

332

DHCP Server Commands

lease

lease

To configure the time duration of the lease for an IP address that is assigned from a DHCP server to a DHCP
client, use the lease command in DHCP Pool Network Configuration mode. To restore the default value, use
the no form of this command.

Syntax

lease days [hours [minutes]] | infinite

no lease

Parameters

• days—Specifies the number of days in the lease.

• hours—(Optional) Specifies the number of hours in the lease. A days value must be supplied before

configuring an hours value.

• minutes—(Optional) Specifies the number of minutes in the lease. A days value and an hours value must

be supplied before configuring a minutes value.

• infinite—Specifies that the duration of the lease is unlimited.

Default Configuration

The default lease duration is 1 day.

Command Mode

DHCP Pool Network Configuration mode

Examples

The following example shows a 1-day lease.

switchxxxxxx(config-dhcp)# lease 1

The following example shows a one-hour lease.

switchxxxxxx(config-dhcp)# lease 0 1

The following example shows a one-minute lease.

switchxxxxxx(config-dhcp)# lease 0 0 1

The following example shows an infinite (unlimited) lease.

switchxxxxxx(config-dhcp)# lease infinite

Cisco Business Switches 350 Series CLI Guide

333

netbios-name-server

DHCP Server Commands

netbios-name-server

To configure the NetBIOS Windows Internet Naming Service (WINS) server list that is available to Microsoft
DHCP clients, use the netbios-name-server in DHCP Pool Network Configuration mode or in DHCP Pool
Host Configuration mode. To remove the NetBIOS name server list, use the no form of this command.

Syntax

netbios-name-server ip-address [ip-address2 ... ip-address8]

no netbios-name-server

Parameters

• ip-address [ip-address2 ... ip-address8]—Specifies the IP addresses of NetBIOS WINS name servers.

Up to eight addresses can be specified in one command line.

Command Mode

DHCP Pool Network Configuration mode

DHCP Pool Host Configuration mode

Default Configuration

No bios server is defined.

Example

The following example specifies the IP address of a NetBIOS name server available to the DHCP client.

switchxxxxxx(config-dhcp)# netbios-name-server 10.12.1.90

Cisco Business Switches 350 Series CLI Guide

334

DHCP Server Commands

netbios-node-type

netbios-node-type

To configure the NetBIOS node type for Microsoft DHCP clients, use the netbios-node-type command in
DHCP Pool Network Configuration mode or in DHCP Pool Host Configuration mode. To return to default,
use the no form of this command.

Syntax

netbios-node-type {b-node | p-node | m-node | h-node}

no netbios-node-type

Parameters

• b-node—Specifies the Broadcast NetBIOS node type.

• p-node—Specifies the Peer-to-peer NetBIOS node type.

• m-node—Specifies the Mixed NetBIOS node type.

• h-node—Specifies the Hybrid NetBIOS node type.

Command Mode

DHCP Pool Network Configuration mode

DHCP Pool Host Configuration mode

Default Configuration

h-node (Hybrid NetBIOS node type).

Example

The following example specifies the client's NetBIOS type as mixed.

switchxxxxxx(config-dhcp)# netbios node-type m-node

Cisco Business Switches 350 Series CLI Guide

335

next-server

next-server

DHCP Server Commands

To configure the next server (siaddr) in the boot process of a DHCP client, use the next-server command in
DHCP Pool Network Configuration mode or in DHCP Pool Host Configuration mode. To remove the next
server, use the no form of this command.

Syntax

next-server ip-address

no next-server

Parameters

• ip-address—Specifies the IP address of the next server in the boot process.

Default Configuration

If the next-server command is not used to configure a boot server list, the DHCP server uses inbound interface
helper addresses as boot servers.

Command Mode

DHCP Pool Network Configuration mode

DHCP Pool Host Configuration mode

User Guidelines

The client will connect, using the SCP/TFTP protocol, to this server in order to download the configuration
file.

Example

The following example specifies 10.12.1.99 as the IP address of the next server:

switchxxxxxx(config-dhcp)# next-server 10.12.1.99

Cisco Business Switches 350 Series CLI Guide

336

DHCP Server Commands

next-server-name

next-server-name

To configure the next server name (sname) in the boot process of a DHCP client, use the next-server-name
command in DHCP Pool Network Configuration mode or in DHCP Pool Host Configuration mode. To remove
the boot server name, use the no form of this command.

Syntax

next-server-name name

no next-server-name

Parameters

• name—Specifies the name of the next server in the boot process. (Length: 1–64 characters).

Command Mode

DHCP Pool Network Configuration mode

DHCP Pool Host Configuration mode

Default Configuration

No next server name is defined.

User Guidelines

The client will connect, using the SCP/TFTP protocol, to this server in order to download the configuration
file.

Example

The following example specifies www.bootserver.com as the name of the next server in the boot process of
a DHCP client.

switchxxxxxx(config-dhcp)# next-server www.bootserver.com

Cisco Business Switches 350 Series CLI Guide

337

option

option

DHCP Server Commands

To configure the DHCP server options, use the option command in DHCP Pool Network Configuration mode
or in DHCP Pool Host Configuration mode. To remove the options, use the no form of this command.

Syntax

option code {boolean {false | true} | integer value | ascii string | hex {string | none} | ip {address} | ip-list
{ip-address1 [ip-address2 …]}} [description text]

no option code

Parameters

• code—Specifies the DHCP option code. The supported values are defined in the User Guidelines.

• boolean {false | true}—Specifies a boolean value. The values are coded by integer values of one octet:

0 = false and 1 = true.

• integer value—Specifies an integer value. The option size depends on the option code.

• ascii string—Specifies a network virtual terminal (NVT) ASCII character string. ASCII character strings
that contain white spaces must be delimited by quotation marks. The ASCII value is truncated to the first
160 characters entered.

• ip address—Specifies an IP address.

• ip-list {ip-address1 [ip-address2 ...]}—Specifies up to 8 IP addresses.

• hex string—Specifies dotted hexadecimal data. The hexadecimal value is truncated to the first 320

characters entered. Each byte in hexadecimal character strings is two hexadecimal digits. Each byte can
be separated by a period, colon, or white space.

• hex none—Specifies the zero-length hexadecimal string.

• description text—User description

Command Mode

DHCP Pool Network Configuration mode

DHCP Pool Host Configuration mode

User Guidelines

The option command enables defining any option that cannot be defined by other special CLI commands. A
new definition of an option overrides the previous definition of this option.

The boolean keyword may be configured for the following options: 19, 20, 27, 29-31, 34, 36, and 39.

The integer keyword may be configured for the following options: 2, 13, 22-26, 35, 37-38, 132-134, and 211.
The switch checks the value range and builds the value field of the size in accordance with the option definition.

The ascii keyword may be configured for the following options: 14, 17-18, 40, 64, 130, 209, and 210.

The ip keyword may be configured for the following options: 16, 28, 32, 128-129, 131, 135, and 136.

Cisco Business Switches 350 Series CLI Guide

338

DHCP Server Commands

option

The ip-list keyword may be configured for the following options: 5, 7-11, 33, 41, 42, 45, 48, 49, 65, 68-76,
and 150.

The hex keyword may be configured for any option in the range 1-254 except for the following: 1, 3-4, 6, 12,
15, 44, 46, 50-51, 53-54, 56, 66-67, 82, and 255. The switch does not validate the syntax of an option defined
by this format.

Example 1. The following example configures DHCP option 19, which specifies whether the client
should configure its IP layer for packet forwarding:

switchxxxxxx(config-dhcp)# option 19 boolean true description "IP Forwarding Enable/Disable

Option"

Example 2. The following example configures DHCP option 2, which specifies the offset of the
client in seconds from Coordinated Universal Time (UTC):

switchxxxxxx(config-dhcp)# option 2 integer 3600

Example 3. The following example configures DHCP option 72, which specifies the World Wide
Web servers for DHCP clients. World Wide Web servers 172.16.3.252 and 172.16.3.253 are configured
in the following example:

switchxxxxxx(config-dhcp)# option 72 ip-list 172.16.3.252 172.16.3.253

Cisco Business Switches 350 Series CLI Guide

339

show ip dhcp

show ip dhcp

DHCP Server Commands

To display the DHCP configuration, use the show ip dhcp command in User EXEC mode.

Syntax

show ip dhcp

Command Mode

User EXEC mode

Example

The following example displays the DHCP configuration.

switchxxxxxx# show ip dhcp
DHCP server is enabled.

Cisco Business Switches 350 Series CLI Guide

340

DHCP Server Commands

show ip dhcp allocated

show ip dhcp allocated

To display the allocated address or all the allocated addresses on the DHCP server, use the show ip dhcp
allocated command in User EXEC mode.

Syntax

show ip dhcp allocated [ip-address]

Parameters

• ip-address —(Optional) Specifies the IP address.

Command Mode

User EXEC mode

Example

The following example displays the output of various forms of this command:

Type

Feb 01 1998 12:00 AM Dynamic
Infinite
Infinite

Hardware address Lease expiration
---------------- -------------------- ---------

switchxxxxxx# show ip dhcp allocated
DHCP server enabled
The number of allocated entries is 3
IP address
----------
172.16.1.11 00a0.9802.32de
172.16.3.253 02c7.f800.0422
172.16.3.254 02c7.f800.0422
switchxxxxxx# show ip dhcp allocated 172.16.1.11
DHCP server enabled
The number of allocated entries is 2
IP address
----------
172.16.1.11 00a0.9802.32de
switchxxxxxx# show ip dhcp allocated 172.16.3.254
DHCP server enabled
The number of allocated entries is 2
IP address
----------
172.16.3.254 02c7.f800.0422
The following table describes the significant fields shown in the display.

Hardware address Lease expiration
---------------- -------------------- --------

Hardware address Lease expiration
---------------- -------------------- -------

Feb 01 1998 12:00 AM Dynamic

Automatic
Static

Infinite

Static

Type

Type

Field

Description

IP address

The host IP address as recorded on the DHCP Server.

Hardware address

The MAC address or client identifier of the host as recorded
on the DHCP Server.

Lease expiration

The lease expiration date of the host IP address.

Type

The manner in which the IP address was assigned to the host.

Cisco Business Switches 350 Series CLI Guide

341

show ip dhcp binding

DHCP Server Commands

show ip dhcp binding

To display the specific address binding or all the address bindings on the DHCP server, use the show ip dhcp
binding command in User EXEC mode.

Syntax

show ip dhcp binding [ip-address]

Parameters

• ip-address—(Optional) Specifies the IP address.

Command Mode

User EXEC mode

Examples

The following examples display the DHCP server binding address parameters.

switchxxxxxx# show ip dhcp binding
DHCP server enabled
The number of used (all types) entries is 6
The number of pre-allocated entries is 1
The number of allocated entries is 1
The number of expired entries is 1
The number of declined entries is 2
The number of static entries is 1
The number of dynamic entries is 2
The number of automatic entries is 1
IP address Client Identifier Lease Expiration Type
---------- ----------------- -------------
1.16.1.11 00a0.9802.32de
1.16.3.23 02c7.f801.0422
1.16.3.24 02c7.f802.0422
1.16.3.25 02c7.f803.0422
1.16.3.26 02c7.f804.0422
switchxxxxxx# show ip dhcp binding 1.16.1.11
DHCP server enabled
IP address Client Identifier Lease Expiration Type
---------- ----------------- ----------------- ------- ---------
1.16.1.11 00a0.9802.32de

dynamic allocated
dynamic expired
dynamic declined
dynamic pre-allocated
dynamic declined

Feb 01 1998
12:00AM

------- ---------

dynamic allocated

State

State

Feb 01 1998
12:00 AM

switchxxxxxx# show ip dhcp binding 1.16.3.24
IP address Client Identifier
---------- -----------------
1.16.3.24 02c7.f802.0422

Lease Expiration Type
--------------- ------- ---------

State

dynamic declined

The following table describes the significant fields shown in the display.

Field

Description

IP address

The host IP address as recorded on the DHCP Server.

Client Identifier

The MAC address or client identifier of the host as recorded
on the DHCP Server.

Cisco Business Switches 350 Series CLI Guide

342

DHCP Server Commands

show ip dhcp binding

Field

Description

Lease expiration

The lease expiration date of the host IP address.

Type

State

The manner in which the IP address was assigned to the host.

The IP Address state.

Cisco Business Switches 350 Series CLI Guide

343

show ip dhcp declined

DHCP Server Commands

show ip dhcp declined

To display the specific declined address or all of the declined addresses on the DHCP server, use the show
ip dhcp declined command in User EXEC mode.

Syntax

show ip dhcp declined [ip-address]

Parameters

• ip-address—(Optional) Specifies the IP address.

Command Mode

User EXEC mode

Example

The following example displays the output of various forms of this command:

Hardware address

switchxxxxxx# show ip dhcp declined
DHCP server enabled
The number of declined entries is 2
IP address
172.16.1.11 00a0.9802.32de
172.16.3.254 02c7.f800.0422
switchxxxxxx# show ip dhcp declined 172.16.1.11
DHCP server enabled
The number of declined entries is 2
IP address
172.16.1.11

Hardware address
00a0.9802.32de

Cisco Business Switches 350 Series CLI Guide

344

DHCP Server Commands

show ip dhcp excluded-addresses

show ip dhcp excluded-addresses

To display the excluded addresses, use the show ip dhcp excluded-addresses command in User EXEC mode.

Syntax

show ip dhcp excluded-addresses

Command Mode

User EXEC mode

Example

The following example displays excluded addresses.

switchxxxxxx# show ip dhcp excluded-addresses
The number of excluded addresses ranges is 2
Excluded addresses:
10.1.1.212- 10.1.1.219, 10.1.2.212- 10.1.2.219

Cisco Business Switches 350 Series CLI Guide

345

show ip dhcp expired

DHCP Server Commands

show ip dhcp expired

To display the specific expired address or all of the expired addresses on the DHCP server, use the show ip
dhcp expired command in User EXEC mode.

Syntax

show ip dhcp expired [ip-address]

Parameters

• ip-address—(Optional) Specifies the IP.

Command Mode

User EXEC mode

Example

Hardware address

switchxxxxxx# show ip dhcp expired
DHCP server enabled
The number of expired entries is 1
IP address
172.16.1.11 00a0.9802.32de
172.16.3.254 02c7.f800.0422
switchxxxxxx# show ip dhcp expired 172.16.1.11
DHCP server enabled
The number of expired entries is 1
IP address Hardware address
172.16.1.13 00a0.9802.32de

Cisco Business Switches 350 Series CLI Guide

346

DHCP Server Commands

show ip dhcp pool host

show ip dhcp pool host

To display the DHCP pool host configuration, use the show ip dhcp pool host command in User EXEC mode.

Syntax

show ip dhcp pool host [address | name]

Parameters

• address—(Optional) Specifies the client IP address.

• name—(Optional) Specifies the DHCP pool name. (Length: 1-32 characters)

Command Mode

User EXEC mode

Example 1. The following example displays the configuration of all DHCP host pools:

switchxxxxxx# show ip dhcp pool host
The number of host pools is 1
Name
IP Address Hardware Address
---------- ---------- ----------------
station 172.16.1.11 01b7.0813.8811.66

Client Identifier
-----------------

Example 2. The following example displays the DHCP pool host configuration of the pool named
station:

switchxxxxxx# show ip dhcp pool host station
IP Address Hardware Address
Name
---------- ---------- ----------------
station 172.16.1.11 01b7.0813.8811.66

Client Identifier
-----------------

Mask: 255.255.0.0
Auto Default router: enabled
Default router: 172.16.1.1
Client name: client1
DNS server: 10.12.1.99
Domain name: yahoo.com
NetBIOS name server: 10.12.1.90
NetBIOS node type: h-node
Next server: 10.12.1.99
Next-server-name: 10.12.1.100
Bootfile: Bootfile
Time server 10.12.1.99
Options:
Code Type
--- ------- --- ---------------- --------------------------------
2
14
19

integer
ascii
boolean

16 qq/aaaa/bbb.txt

Description

Len Value

"IP Forwarding Enable/Disable

1 false

4 3600

21
31
47

ip
ip-list
hex

4 134.14.14.1
8 1.1.1.1, 12.23.45.2
5 02af00aa00

Option"

Cisco Business Switches 350 Series CLI Guide

347

show ip dhcp pool network

DHCP Server Commands

show ip dhcp pool network

To display the DHCP network configuration, use the show ip dhcp pool network command in User EXEC
mode.

Syntax

show ip dhcp pool network [name]

Parameters

• name—(Optional) Specifies the DHCP pool name. (Length: 1-32 characters).

Command Mode

User EXEC mode

Example 1—The following example displays configuration of all DHCP network pools:

switchxxxxxx# show ip dhcp pool network
The number of network pools is 2
Name Address range mask Lease
----------------------------------------------------
marketing 10.1.1.17-10.1.1.178 255.255.255.0 0d:12h:0m
finance 10.1.2.8-10.1.2.178 255.255.255.0 0d:12h:0m

Example 2—The following example displays configuration of the DHCP network pool marketing:

--------- --------- --------

3

9

Declined

----- -------------

switchxxxxxx# show ip dhcp pool network marketing
Name Address range mask Lease
--------------------------------- ------------------------
marketing 10.1.1.17-10.1.1.178 255.255.255.0 0d:12h:0m
Statistics:
All-range Available Free Pre-allocated Allocated Expired
---------- ---------
162 150 68 50 20
Auto Default router: enabled
Default router: 10.1.1.1
DNS server: 10.12.1.99
Domain name: yahoo.com
NetBIOS name server: 10.12.1.90
NetBIOS node type: h-node
Next server: 10.12.1.99
Next-server-name: 10.12.1.100
Bootfile: Bootfile
Time server 10.12.1.99
Options:
Code Type
--- ------- --- -------------------- --------------------------------
2
14
19

"IP Forwarding Enable/Disable

integer
ascii
boolean

16 qq/aaaa/bbb.txt

Description

Len Value

1 false

4 3600

21
31
47

ip
ip-list
hex

4 134.14.14.1
8 1.1.1.1, 12.23.45.2
5 02af00aa00

Option"

Cisco Business Switches 350 Series CLI Guide

348

DHCP Server Commands

show ip dhcp pre-allocated

show ip dhcp pre-allocated

To display the specific pre-allocated address or all the pre-allocated addresses on the DHCP server, use the
show ip dhcp pre-allocated command in User EXEC mode.

Syntax

show ip dhcp pre-allocated [ip-address]

Parameters

• ip-address—(Optional) Specifies the IP.

Command Mode

User EXEC mode

Examples

Hardware address

switchxxxxxx# show ip dhcp pre-allocated
DHCP server enabled
The number of pre-allocated entries is 1
IP address
172.16.1.11 00a0.9802.32de
172.16.3.254 02c7.f800.0422
switchxxxxxx# show ip dhcp pre-allocated 172.16.1.11
DHCP server enabled
The number of pre-allocated entries is 1
IP address
172.16.1.15 00a0.9802.32de

Hardware address

Cisco Business Switches 350 Series CLI Guide

349

show ip dhcp server statistics

DHCP Server Commands

show ip dhcp server statistics

To display DHCP server statistics, use the show ip dhcp server statistics command in User EXEC mode.

Syntax

show ip dhcp server statistics

Command Mode

User EXEC mode

Example

The following example displays DHCP server statistics

switchxxxxxx# show ip dhcp server statistics
DHCP server enabled
The number of network pools is 7
The number of excluded pools is 2
The number of used (all types) entries is 7
The number of pre-allocated entries is 1
The number of allocated entries is 3
The number of expired entries is 1
The number of declined entries is 2
The number of static entries is 1
The number of dynamic entries is 2
The number of automatic entries is 1

Cisco Business Switches 350 Series CLI Guide

350

DHCP Server Commands

time-server

time-server

To specify the time servers list for a DHCP client, use the time-server command in DHCP Pool Network
Configuration mode or in DHCP Pool Host Configuration mode. To remove the time servers list, use the no
form of this command.

Syntax

time-server ip-address [ip-address2 ... ip-address8]

no time-server

Parameters

• ip-address [ip-address2 ... ip-address8]—Specifies the IP addresses of Time servers. Up to eight addresses

can be specified in one command line.

Command Mode

DHCP Pool Network Configuration mode

DHCP Pool Host Configuration mode

Default Configuration

No time server is defined.

User Guidelines

The time server’s IP address should be on the same subnet as the client subnet.

Example

The following example specifies 10.12.1.99 as the time server IP address.

switchxxxxxx(config-dhcp)# time-server 10.12.1.99

Cisco Business Switches 350 Series CLI Guide

351

time-server

DHCP Server Commands

Cisco Business Switches 350 Series CLI Guide

352

DHCP Snooping Commands

This chapter contains the following sections:

• ip dhcp snooping, on page 354
• ip dhcp snooping vlan, on page 355
• ip dhcp snooping trust, on page 356
• ip dhcp snooping information option allowed-untrusted, on page 357
• ip dhcp snooping verify, on page 358
• ip dhcp snooping database, on page 359
• ip dhcp snooping binding, on page 360
• clear ip dhcp snooping database, on page 362
• show ip dhcp snooping, on page 363
• show ip dhcp snooping binding, on page 364
• ip arp inspection, on page 365
• ip arp inspection vlan, on page 366
• ip arp inspection validate, on page 367
• ip arp inspection list create, on page 368
• ip mac, on page 369
• ip arp inspection list assign, on page 370
• ip arp inspection logging interval, on page 371
• show ip arp inspection, on page 372
• show ip arp inspection list, on page 373
• show ip arp inspection statistics, on page 374
• clear ip arp inspection statistics, on page 375

Cisco Business Switches 350 Series CLI Guide

353

ip dhcp snooping

DHCP Snooping Commands

ip dhcp snooping

Use the ip dhcp snooping Global Configuration mode command to enable Dynamic Host Configuration
Protocol (DHCP) Snooping globally. Use the no form of this command to restore the default configuration.

Syntax

ip dhcp snooping

no ip dhcp snooping

Default Configuration

DHCP snooping is disabled.

Command Mode

Global Configuration mode

User Guidelines

For any DHCP Snooping configuration to take effect, DHCP Snooping must be enabled globally. DHCP
Snooping on a VLAN is not active until DHCP Snooping on a VLAN is enabled.

Example

The following example enables DHCP Snooping on the device.

switchxxxxxx(config)# ip dhcp snooping

Cisco Business Switches 350 Series CLI Guide

354

DHCP Snooping Commands

ip dhcp snooping vlan

ip dhcp snooping vlan

Use the ip dhcp snooping vlan Global Configuration mode command to enable DHCP Snooping on a VLAN.
Use the no form of this command to disable DHCP Snooping on a VLAN.

Syntax

ip dhcp snooping vlan vlan-id

no ip dhcp snooping vlan vlan-id

Parameters

• vlan-id—Specifies the VLAN ID.

Default Configuration

DHCP Snooping on a VLAN is disabled.

Command Mode

Global Configuration mode

User Guidelines

DHCP Snooping must be enabled globally before enabling DHCP Snooping on a VLAN.

Example

The following example enables DHCP Snooping on VLAN 21.

switchxxxxxx(config)# ip dhcp snooping vlan 21

Cisco Business Switches 350 Series CLI Guide

355

ip dhcp snooping trust

DHCP Snooping Commands

ip dhcp snooping trust

Use the ip dhcp snooping trust Interface Configuration (Ethernet, Port-channel) mode command to configure
a port as trusted for DHCP snooping purposes. Use the no form of this command to restore the default
configuration.

Syntax

ip dhcp snooping trust

no ip dhcp snooping trust

Default Configuration

The interface is untrusted.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Configure as trusted the ports that are connected to a DHCP server or to other switches or routers. Configure
the ports that are connected to DHCP clients as untrusted.

Example

The following example configures gi1/0/4 as trusted for DHCP Snooping.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# ip dhcp snooping trust

Cisco Business Switches 350 Series CLI Guide

356

DHCP Snooping Commands

ip dhcp snooping information option allowed-untrusted

ip dhcp snooping information option allowed-untrusted

Use the ip dhcp snooping information option allowed-untrusted Global Configuration mode command to
allow a device to accept DHCP packets with option-82 information from an untrusted port. Use the no form
of this command to drop these packets from an untrusted port.

Syntax

ip dhcp snooping information option allowed-untrusted

no ip dhcp snooping information option allowed-untrusted

Default Configuration

DHCP packets with option-82 information from an untrusted port are discarded.

Command Mode

Global Configuration mode

Example

The following example allows a device to accept DHCP packets with option-82 information from an untrusted
port.

switchxxxxxx(config)# ip dhcp snooping information option allowed-untrusted

Cisco Business Switches 350 Series CLI Guide

357

ip dhcp snooping verify

DHCP Snooping Commands

ip dhcp snooping verify

Use the ip dhcp snooping verify Global Configuration mode command to configure a device to verify that
the source MAC address in a DHCP packet received on an untrusted port matches the client hardware address.
Use the no form of this command to disable MAC address verification in a DHCP packet received on an
untrusted port.

Syntax

ip dhcp snooping verify

no ip dhcp snooping verify

Default Configuration

The switch verifies that the source MAC address in a DHCP packet received on an untrusted port matches
the client hardware address in the packet.

Command Mode

Global Configuration mode

Example

The following example configures a device to verify that the source MAC address in a DHCP packet received
on an untrusted port matches the client hardware address.

switchxxxxxx(config)# ip dhcp snooping verify

Cisco Business Switches 350 Series CLI Guide

358

DHCP Snooping Commands

ip dhcp snooping database

ip dhcp snooping database

Use the ip dhcp snooping database Global Configuration mode command to enable the DHCP Snooping
binding database file. Use the no form of this command to delete the DHCP Snooping binding database file.

Syntax

ip dhcp snooping database

no ip dhcp snooping database

Default Configuration

The DHCP Snooping binding database file is not defined.

Command Mode

Global Configuration mode

User Guidelines

The DHCP Snooping binding database file resides on Flash. To ensure that the lease time in the database is
accurate, the Simple Network Time Protocol (SNTP) must be enabled and configured. The device writes
binding changes to the binding database file only if the device system clock is synchronized with SNTP.

Example

The following example enables the DHCP Snooping binding database file.

switchxxxxxx(config)# ip dhcp snooping database

Cisco Business Switches 350 Series CLI Guide

359

ip dhcp snooping binding

DHCP Snooping Commands

ip dhcp snooping binding

Use the ip dhcp snooping binding Privileged EXEC mode command to configure the DHCP Snooping
binding database and add dynamic binding entries to the database. Use the no form of this command to delete
entries from the binding database.

Syntax

ip dhcp snooping binding mac-address vlan-id ip-address interface-id expiry {seconds | infinite}

no ip dhcp snooping binding mac-address vlan-id

Parameters

• mac-address—Specifies a MAC address.

• vlan-id—Specifies a VLAN number.

• ip-address—Specifies an IP address.

• interface-id—Specifies an interface ID. The interface ID can be one of the following types: Ethernet

port or Port-channel.

• expiry

• seconds—Specifies the time interval, in seconds, after which the binding entry is no longer valid.

(Range: 10–4294967294).

• infinite—Specifies infinite lease time.

Default Configuration

No static binding exists.

Command Mode

Privileged EXEC mode

User Guidelines

Use the ip dhcp snooping binding command to add manually a dynamic entry to the DHCP database.

After entering this command, an entry is added to the DHCP Snooping database. If the DHCP Snooping
binding file exists, the entry is also added to that file.

The entry would not be added to the configuration files. The entry would be displayed in the show commands
as a “DHCP Snooping” entry. An entry added by this command can override the existed dynamic entry. The
entry is displayed in the show commands as a DHCP Snooping entry.

Use the no ip dhcp snooping binding command to delete manually a dynamic entry from the DHCP database.

A dynamic temporary entries for which the IP address is 0.0.0.0 cannot be deleted.

Cisco Business Switches 350 Series CLI Guide

360

DHCP Snooping Commands

ip dhcp snooping binding

Example

The following example adds a binding entry to the DHCP Snooping binding database.

switchxxxxxx# ip dhcp snooping binding 0060.704C.73FF 23 176.10.1.1 gi1/0/4 expiry 900

Cisco Business Switches 350 Series CLI Guide

361

clear ip dhcp snooping database

DHCP Snooping Commands

clear ip dhcp snooping database

Use the clear ip dhcp snooping database Privileged EXEC mode command to clear the DHCP Snooping
binding database.

Syntax

clear ip dhcp snooping database

Command Mode

Privileged EXEC mode

Example

The following example clears the DHCP Snooping binding database.

switchxxxxxx# clear ip dhcp snooping database

Cisco Business Switches 350 Series CLI Guide

362

DHCP Snooping Commands

show ip dhcp snooping

show ip dhcp snooping

Use the show ip dhcp snooping EXEC mode command to display the DHCP snooping configuration for all
interfaces or for a specific interface.

Syntax

show ip dhcp snooping [interface-id]

Parameters

• interface-id—Specifies an interface ID. The interface ID can be one of the following types: Ethernet

port or Port-channel.

Command Mode

User EXEC mode

Example

The following example displays the DHCP snooping configuration.

switchxxxxxx# show ip dhcp snooping
DHCP snooping is Enabled
DHCP snooping is configured on following VLANs: 21
DHCP snooping database is Enabled
Relay agent Information option 82 is Enabled
Option 82 on untrusted port is allowed
Verification of hwaddr field is Enabled
DHCP snooping file update frequency is configured to: 6666 seconds

Interface

---------

gi1/0/1

gi1/0/2

Trusted

-------

Yes

Yes

Cisco Business Switches 350 Series CLI Guide

363

show ip dhcp snooping binding

DHCP Snooping Commands

show ip dhcp snooping binding

Use the show ip dhcp snooping binding User EXEC mode command to display the DHCP Snooping binding
database and configuration information for all interfaces or for a specific interface.

Syntax

show ip dhcp snooping binding [mac-address mac-address] [ip-address ip-address] [vlan vlan-id]
[interface-id]

Parameters

• mac-address mac-address—Specifies a MAC address.

• ip-address ip-address—Specifies an IP address.

• vlan vlan-id—Specifies a VLAN ID.

• interface-id—Specifies an interface ID. The interface ID can be one of the following types: Ethernet

port or Port-channel.

Command Mode

User EXEC mode

Example

The following examples displays the DHCP snooping binding database and configuration information for all
interfaces on a device.-

switchxxxxxx# show ip dhcp snooping binding
Update frequency: 1200
Total number of binding: 2

Mac Address
------------
0060.704C.73FF
0060.704C.7BC1

IP Address
---------
10.1.8.1
10.1.8.2

Lease
(sec)
-------
7983
92332

Type
--------
snooping
snooping (s)

VLAN
----
3
3

Interface
---------------
gi1/0/1
gi1/0/2

Cisco Business Switches 350 Series CLI Guide

364

DHCP Snooping Commands

ip arp inspection

ip arp inspection

Use the ip arp inspection Global Configuration mode command globally to enable Address Resolution
Protocol (ARP) inspection. Use the no form of this command to disable ARP inspection.

Syntax

ip arp inspection

no ip arp inspection

Default Configuration

ARP inspection is disabled.

Command Mode

Global Configuration mode

User Guidelines

Note that if a port is configured as an untrusted port, then it should also be configured as an untrusted port
for DHCP Snooping, or the IP-address-MAC-address binding for this port should be configured statically.
Otherwise, hosts that are attached to this port cannot respond to ARPs.

Example

The following example enables ARP inspection on the device.

switchxxxxxx(config)# ip arp inspection

Cisco Business Switches 350 Series CLI Guide

365

ip arp inspection vlan

DHCP Snooping Commands

ip arp inspection vlan

Use the ip arp inspection vlan Global Configuration mode command to enable ARP inspection on a VLAN,
based on the DHCP Snooping database. Use the no form of this command to disable ARP inspection on a
VLAN.

Syntax

ip arp inspection vlan vlan-id

no ip arp inspection vlan vlan-id

Parameters

• vlan-id—Specifies the VLAN ID.

Default Configuration

DHCP Snooping based ARP inspection on a VLAN is disabled.

Command Mode

Global Configuration mode

User Guidelines

This command enables ARP inspection on a VLAN based on the DHCP snooping database.

Example

The following example enables DHCP Snooping based ARP inspection on VLAN 23.

switchxxxxxx(config)# ip arp inspection vlan 23

Cisco Business Switches 350 Series CLI Guide

366

DHCP Snooping Commands

ip arp inspection validate

ip arp inspection validate

Use the ip arp inspection validate Global Configuration mode command to perform specific checks for
dynamic Address Resolution Protocol (ARP) inspection. Use the no form of this command to restore the
default configuration.

Syntax

ip arp inspection validate

no ip arp inspection validate

Default Configuration

ARP inspection validation is disabled.

Command Mode

Global Configuration mode

User Guidelines

The following checks are performed:

• Source MAC address: Compares the source MAC address in the Ethernet header against the sender

MAC address in the ARP body. This check is performed on both ARP requests and responses.

• Destination MAC address: Compares the destination MAC address in the Ethernet header against the

target MAC address in the ARP body. This check is performed for ARP responses.

• IP addresses: Compares the ARP body for invalid and unexpected IP addresses. Addresses include

0.0.0.0, 255.255.255.255, and all IP multicast addresses.

Example

The following example executes ARP inspection validation.

switchxxxxxx(config)# ip arp inspection validate

Cisco Business Switches 350 Series CLI Guide

367

ip arp inspection list create

DHCP Snooping Commands

ip arp inspection list create

Use the ip arp inspection list create Global Configuration mode command to create a static ARP binding
list and enters the ARP list configuration mode. Use the no form of this command to delete the list.

Syntax

ip arp inspection list create name

no ip arp inspection list create name

Parameters

• name—Specifies the static ARP binding list name. (Length: 1–32 characters).

Default Configuration

No static ARP binding list exists.

Command Mode

Global Configuration mode

User Guidelines

Use the ip arp inspection list assign command to assign the list to a VLAN.

Example

The following example creates the static ARP binding list ‘servers’ and enters the ARP list configuration
mode.

switchxxxxxx(config)# ip arp inspection list create servers

Cisco Business Switches 350 Series CLI Guide

368

DHCP Snooping Commands

ip mac

ip mac

Use the ip mac ARP-list Configuration mode command to create a static ARP binding. Use the no form of
this command to delete a static ARP binding.

Syntax

ip ip-address mac mac-address

no ip ip-address mac mac-address

Parameters

• ip-address—Specifies the IP address to be entered to the list.

• mac-address—Specifies the MAC address associated with the IP address.

Default Configuration

No static ARP binding is defined.

Command Mode

ARP-list Configuration mode

Example

The following example creates a static ARP binding.

switchxxxxxx(config)# ip arp inspection list create servers
switchxxxxxx(config-arp-list)# ip 172.16.1.1 mac 0060.704C.7321
switchxxxxxx(config-arp-list)# ip 172.16.1.2 mac 0060.704C.7322

Cisco Business Switches 350 Series CLI Guide

369

ip arp inspection list assign

DHCP Snooping Commands

ip arp inspection list assign

Use the ip arp inspection list assign Global Configuration mode command to assign a static ARP binding
list to a VLAN. Use the no form of this command to delete the assignment.

Syntax

ip arp inspection list assign vlan-id name

no ip arp inspection list assign vlan-id

Parameters

• vlan-id—Specifies the VLAN ID.

• name—Specifies the static ARP binding list name.

Default Configuration

No static ARP binding list assignment exists.

Command Mode

Global Configuration mode

Example

The following example assigns the static ARP binding list Servers to VLAN 37.

switchxxxxxx(config)# ip arp inspection list assign 37 servers

Cisco Business Switches 350 Series CLI Guide

370

DHCP Snooping Commands

ip arp inspection logging interval

ip arp inspection logging interval

Use the ip arp inspection logging interval Global Configuration mode command to set the minimum time
interval between successive ARP SYSLOG messages. Use the no form of this command to restore the default
configuration.

Syntax

ip arp inspection logging interval {seconds | infinite}

no ip arp inspection logging interval

Parameters

• seconds—Specifies the minimum time interval between successive ARP SYSLOG messages. A 0 value

means that a system message is immediately generated. (Range: 0–86400)

• infinite—Specifies that SYSLOG messages are not generated.

Default Configuration

The default minimum ARP SYSLOG message logging time interval is 5 seconds.

Command Mode

Global Configuration mode

Example

The following example sets the minimum ARP SYSLOG message logging time interval to 60 seconds.

switchxxxxxx(config)# ip arp inspection logging interval 60

Cisco Business Switches 350 Series CLI Guide

371

show ip arp inspection

DHCP Snooping Commands

show ip arp inspection

Use the show ip arp inspection EXEC mode command to display the ARP inspection configuration for all
interfaces or for a specific interface.

Syntax

show ip arp inspection [interface-id]

Parameters

• interface-id—Specifies an interface ID. The interface ID can be one of the following types: Ethernet

port or Port-channel.

Command Mode

User EXEC mode

Example

The following example displays the ARP inspection configuration.

switchxxxxxx# show ip arp inspection
IP ARP inspection is Enabled
IP ARP inspection is configured on following VLANs: 1
Verification of packet header is Enabled
IP ARP inspection logging interval is: 222 seconds

Interface

Trusted

----------- -----------
gi1/0/1
gi1/0/2

Yes
Yes

Cisco Business Switches 350 Series CLI Guide

372

DHCP Snooping Commands

show ip arp inspection list

show ip arp inspection list

Use the show ip arp inspection list Privileged EXEC mode command to display the static ARP binding list.

Syntax

show ip arp inspection list

Command Mode

Privileged EXEC mode

Example

The following example displays the static ARP binding list.

switchxxxxxx# show ip arp inspection list
List name: servers
Assigned to VLANs: 1,2

IP
-----------
172.16.1.1
172.16.1.2

ARP
--------------
0060.704C.7322
0060.704C.7322

Cisco Business Switches 350 Series CLI Guide

373

show ip arp inspection statistics

DHCP Snooping Commands

show ip arp inspection statistics

Use the show ip arp inspection statistics EXEC command to display statistics for the following types of
packets that have been processed by this feature: Forwarded, Dropped, IP/MAC Validation Failure.

Syntax

show ip arp inspection statistics [vlan vlan-id]

Parameters

• vlan-id—Specifies VLAN ID.

Command Mode

User EXEC mode

User Guidelines

Counters values are kept when disabling the ARP Inspection feature.

Example

switchxxxxxx# show ip arp inspection statistics
Forwarded Packets Dropped Packets
Vlan
---- ----------------- --------------- ---------------
2

IP/MAC Failures

1500

100

80

Cisco Business Switches 350 Series CLI Guide

374

DHCP Snooping Commands

clear ip arp inspection statistics

clear ip arp inspection statistics

Use the clear ip arp inspection statistics Privileged EXEC mode command to clear statistics ARP Inspection
statistics globally.

Syntax

clear ip arp inspection statistics [vlan vlan-id]

Parameters

• vlan-id—Specifies VLAN ID.

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# clear ip arp inspection statistics

Cisco Business Switches 350 Series CLI Guide

375

clear ip arp inspection statistics

DHCP Snooping Commands

Cisco Business Switches 350 Series CLI Guide

376

DHCPv6 Commands

This chapter contains the following sections:

• clear ipv6 dhcp client, on page 378
• ipv6 address dhcp, on page 379
• ipv6 dhcp client information refresh, on page 382
• ipv6 dhcp client information refresh minimum, on page 383
• ipv6 dhcp duid-en, on page 384
• ipv6 dhcp relay destination (Global), on page 385
• ipv6 dhcp relay destination (Interface), on page 387
• show ipv6 dhcp, on page 389
• show ipv6 dhcp interface, on page 390

Cisco Business Switches 350 Series CLI Guide

377

clear ipv6 dhcp client

DHCPv6 Commands

clear ipv6 dhcp client

To restart DHCP for an IPv6 client on an interface, use the clear ipv6 dhcp client command in Privileged
EXEC mode.

Syntax

clear ipv6 dhcp client interface-id

Parameters

• interface-id—Interface identifier.

Command Mode

Privileged EXEC mode

User Guidelines

This command restarts DHCP for an IPv6 client on a specified interface after first releasing and unconfiguring
previously-acquired prefixes and other configuration options (for example, Domain Name System [DNS]
servers).

Example

The following example restarts the DHCP for IPv6 client on VLAN 100:

switchxxxxxx# clear ipv6 dhcp client vlan 100

Cisco Business Switches 350 Series CLI Guide

378

DHCPv6 Commands

ipv6 address dhcp

ipv6 address dhcp

To enable DHCP for an IPv6 client process and acquire an IPv6 address on an interface, use the ipv6 address
dhcp command in Interface Configuration mode. To remove the address from the interface, use the no form
of this command.

Syntax

ipv6 address dhcp [rapid-commit]

no ipv6 address dhcp

Parameters

• rapid-commit—Allows the two-message exchange method for address assignment.

Default Configuration

No IPv6 addresses are acquired from the DHCPv6 server.

Command Mode

Interface (VLAN) Configuration mode

Interface (Ethernet, Port Channel, OOB) Configuration mode

User Guidelines

This command enables IPv6 on an interface (if it is not enabled) and starts the DHCP for IPv6 client process,
if this process is not yet running and if an IPv6 interface is enabled on the interface. This command allows
an interface to dynamically learn its IPv6 address by using DHCPv6 and enables the DHCPv6 Stateless service.

The rapid-commit keyword enables the use of the two-message exchange for address allocation and other
configuration. If it is enabled, the client includes the rapid-commit option in a solicit message.

This command allows an interface to dynamically learn its IPv6 address by using DHCPv6.

The DHCPv6 stateless service allows to receive the configuration from a DHCP server, passed in the following
options:

• Option 7: OPTION_PREFERENCE - The preference value for the server in this message

• Option 12: OPTION_UNICAST - The IP address to which the client should send messages delivered

using unicast

• Option 23: OPTION_DNS_SERVERS - List of DNS Servers IPv6 Addresses

• Option 24: OPTION_DOMAIN_LIST - Domain Search List

• Option 31: OPTION_SNTP_SERVERS - List of SNTP Servers IPv6 Addresses

• Option 32: OPTION_INFORMATION_REFRESH_TIME - Information Refresh Time Option

• Option 41: OPTION_NEW_POSIX_TIMEZONE - New Timezone Posix String

• Option 59: OPT_BOOTFILE_URL - Configuration Server URL

Cisco Business Switches 350 Series CLI Guide

379

ipv6 address dhcp

DHCPv6 Commands

Option 60: OPT_BOOTFILE_PARAM, the first parameter - Configuration File Path Name

The DHCPv6 client uses the following IAID format based on the interface-id on which it is running:

• Octet 1, bits 7-4: These bits are reserved and must be 0

• Octet 1, Bits 3-0: These bits contain the interface type:

0—VLAN

• 1—Ethernet port

• 2—Port channel

• 3—Tunnel

• Octets 2-4: The octets contain a value depending on the interface type in the network format:

• VLAN

Octet 2: Reserved, must be 0

Octets 3-4: VLAN ID (1-4095)

• Ethernet port

Octet 2, bits 7-4: Slot number

Octet 2, bits 3-0: Port Type:

0—Ethernet

1—Fast Ethernet

2—Giga Ethernet

3—2.5 Giga Ethernet

4—5 Giga Ethernet

5—10 Giga Ethernet

6—12 Giga Ethernet

7—13.6 Giga Ethernet

8—16 Giga Ethernet

9—20 Giga Ethernet

10—40 Giga Ethernet

11—100 Giga Ethernet

Octet 3: Unit number

Octet 4: Port number

• Port channel

Octets 2-3: Reserved, must be 0

Octet 4: Port channel number

Cisco Business Switches 350 Series CLI Guide

380

DHCPv6 Commands

ipv6 address dhcp

• Tunnel

Octets 2-3: Reserved, must be 0

Octet 4: Tunnel number

When IPv6 Forwarding is enabled only stateless information is required from a DHCPv6 server.

When IPv6 forwarding is changed from disabled to enabled, IPv6 addresses assigned by a DHCPv6 are
removed.

When IPv6 forwarding is changed from enabled to disabled receiving IPv6 addresses from a DHCPv6 server
is resumed.

The DHCPv6 client, server, and relay functions are mutually exclusive on an interface.

Example

The following example enables IPv6 on VLAN 100 and acquires an IPv6 address:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 address dhcp
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

381

ipv6 dhcp client information refresh

DHCPv6 Commands

ipv6 dhcp client information refresh

To configure the refresh time for IPv6 client information refresh time on a specified interface if the DHCPv6
server reply does not include the Information Refresh Time, use the ipv6 dhcp client information refresh
command in Interface Configuration mode. To return to the default value of the refresh time, use the no form
of this command.

Syntax

ipv6 dhcp client information refresh seconds | infinite

no ipv6 dhcp client information refresh

Parameters

• seconds—The refresh time, in seconds. The value cannot be less than the minimal acceptable refresh

time configured by the ipv6 dhcp client information refresh command. The maximum value that can
be used is 4,294967,294 seconds (0xFFFFFFFE).

• infinite—Infinite refresh time.

Default Configuration

The default is 86,400 seconds (24 hours).

Command Mode

Interface Configuration mode

User Guidelines

The ipv6 dhcp client information refresh command specifies the information refresh time. If the server does
not sends an information refresh time option then a value configured by the command is used.

Use the infinite keyword, to prevent refresh, if the server does not send an information refresh time option.

Example

The following example configures an upper limit of 2 days:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 dhcp client information refresh 172800
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

382

DHCPv6 Commands

ipv6 dhcp client information refresh minimum

ipv6 dhcp client information refresh minimum

To configure the minimum acceptable refresh time on the specified interface, use the ipv6 dhcp client
information refresh minimum command in Interface Configuration mode. To remove the configured refresh
time, use the no form of this command.

Syntax

ipv6 dhcp client information refresh minimum seconds | infinite

no ipv6 dhcp client information refresh minimum

Parameters

• seconds—The refresh time, in seconds. The minimum value that can be used is 600 seconds. The maximum

value that can be used is 4,294,967,294 seconds (0xFFFFFFFE).

• infinite—Infinite refresh time.

Default Configuration

The default is 86,400 seconds (24 hours).

Command Mode

Interface Configuration mode

User Guidelines

The ipv6 dhcp client information refresh minimum command specifies the minimum acceptable information
refresh time. If the server sends an information refresh time option of less than the configured minimum
refresh time, the configured minimum refresh time will be used instead.

This command may be configured in the following situations:

• In unstable environments where unexpected changes are likely to occur.

• For planned changes, including renumbering. An administrator can gradually decrease the time as the

planned event nears.

• Limit the amount of time before new services or servers are available to the client, such as the addition
of a new Simple Network Time Protocol (SNTP) server or a change of address of a Domain Name System
(DNS) server.

If you configure the infinite keyword client never refreshes the information.

Example

The following example configures an upper limit of 2 days:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 dhcp client information refresh 172800
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

383

ipv6 dhcp duid-en

DHCPv6 Commands

ipv6 dhcp duid-en

To set the Vendor Based on Enterprise Number DHVPv6 Unique Identified (DUID-EN) format, use the ipv6
dhcp duid-en command in Global Configuration mode.

To return to the default value, use the no form of this command.

Syntax

ipv6 dhcp duid-en enterprise-number identifier

no ipv6 dhcp duid-en

Parameters

• enterprise-number—The vendor’s registered Private Enterprise number as maintained by IANA.

• identifier—The vendor-defined non-empty hex string (up to 64 hex characters). If the number of the

character is not even ’0’ is added at the right. Each 2 hex characters can be separated by a period or colon.

Default Configuration

DUID Based on Link-layer Address (DUID-LL) is used. The base MAC Address is used as a Link-layer
Address.

Command Mode

Global Configuration mode

User Guidelines

By default, the DHCPv6 uses the DUID Based on Link-layer Address (see RFC3315) with the Base MAC
Address as a Link-layer Address.

Use this command to change the DUID format to the Vendor Based on Enterprise Number.

Example 1. The following sets the DIID-EN format:

ipv6 dhcp duid-en 9 0CC084D303000912

Example 2. The following sets the DIID-EN format using colons as delimiter:

switchxxxxxx(config)# ipv6 dhcp duid-en 9 0C:C0:84:D3:03:00:09:12

Cisco Business Switches 350 Series CLI Guide

384

DHCPv6 Commands

ipv6 dhcp relay destination (Global)

ipv6 dhcp relay destination (Global)

To specify a globally-defined relay destination address to which client messages are forwarded, use the ipv6
dhcp relay destination command in Global Configuration mode. To remove a relay destination address, use
the no form of this command.

Syntax

ipv6 dhcp relay destination {ipv6-address [interface-id]} | interface-id

no ipv6 dhcp relay destination [{ipv6-address [interface-id]} | interface-id]

Parameters

• ipv6-address [interface-id]—Relay destination IPv6 address in the form documented in RFC 4291 where
the address is specified in hexadecimal using 16-bit values between colons. There are the following types
of relay destination address:

• Link-local Unicast address. A user must specify the interface-id argument for this kind of address

• Global Unicast IPv6 address. If the interface-id argument is omitted then the Routing table is used.

• interface-id—Interface identifier that specifies the output interface for a destination. If this argument is

configured, client messages are forwarded to the well-known link-local Multicast address
All_DHCP_Relay_Agents_and_Servers (FF02::1:2) through the link to which the output interface is
connected.

Default Configuration

There is no globally-defined relay destination.

Command Mode

Global Configuration mode

User Guidelines

The ipv6 dhcp relay destination command specifies a destination address to which client messages are
forwarded. The address is used by all DHCPv6 relays running on the switch. Up to 100 addresses can be
defined.

When a relay service is running on an interface, a DHCP for IPv6 message received on that interface will be
forwarded to all configured relay destinations configured per interface and globally. Multiple destinations can
be configured on one interface, and multiple output interfaces can be configured for one destination.
Unspecified, loopback, and Multicast addresses are not acceptable as the relay destination.

Use the no form of the command with the ipv6-address and interface-id arguments to remove only the given
globally-defined address with the given output interface.

Use the no form of the command with the ipv6-address argument to remove only the given globally-defined
address for all output interfaces.

The no form of the command without the arguments removes all the globally-defined addresses.

Cisco Business Switches 350 Series CLI Guide

385

ipv6 dhcp relay destination (Global)

DHCPv6 Commands

Example 1. The following example sets the relay unicast link-local destination address per VLAN
200:

switchxxxxxx(config)# ipv6 dhcp relay destination FE80::1:2 vlan 200

Example 2. The following example sets that client messages are forwarded to VLAN 200:

switchxxxxxx(config)# ipv6 dhcp relay destination vlan 200

Example 3. The following example sets the unicast global relay destination address:

switchxxxxxx(config)# ipv6 dhcp relay destination 3002::1:2

Cisco Business Switches 350 Series CLI Guide

386

DHCPv6 Commands

ipv6 dhcp relay destination (Interface)

ipv6 dhcp relay destination (Interface)

To specify a destination address to which client messages are forwarded and to enable DHCP for IPv6 relay
service on the interface, use the ipv6 dhcp relay destination command in Interface Configuration mode. To
remove a relay destination on the interface or to delete an output interface for a destination, use the no form
of this command.

Syntax

ipv6 dhcp relay destination [{ipv6-address [interface-id]} | interface-id]

no ipv6 dhcp relay destination [{ipv6-address [interface-id]} | interface-id]

Parameters

• ipv6-address [interface-id]—Relay destination IPv6 address in the form documented in RFC 4291 where
the address is specified in hexadecimal using 16-bit values between colons. There are the following types
of relay destination address:

• Link-local Unicast address. A user must specify the interface-id argument for this kind of address

• Global Unicast IPv6 address. If the interface-id argument is omitted then the Routing table is used.

• interface-id—Interface identifier that specifies the output interface for a destination. If this argument is

configured, client messages are forwarded to the well-known link-local Multicast address
All_DHCP_Relay_Agents_and_Servers (FF02::1:2) through the link to which the output interface is
connected.

Default Configuration

The relay function is disabled, and there is no relay destination on an interface.

Command Mode

Interface Configuration mode

User Guidelines

This command specifies a destination address to which client messages are forwarded, and it enables DHCP
for IPv6 relay service on the interface. Up to 10 addresses can be defined per one interface and up to 100
addresses can be defined per switch.

DHCPv6 Relay inserts the Interface-id option if an IPv6 global address is not defined on the interface on
which the relay is running. The Interface-id field of the option is the interface name (a value of the ifName
field of the ifTable) on which the relay is running.

When relay service is running on an interface, a DHCP for IPv6 message received on that interface will be
forwarded to all configured relay destinations configured per interface and globally.

The incoming DHCP for IPv6 message may have come from a client on that interface, or it may have been
relayed by another relay agent.

The relay destination can be a Unicast address of a server or another relay agent, or it may be a Multicast
address. There are two types of relay destination addresses:

Cisco Business Switches 350 Series CLI Guide

387

ipv6 dhcp relay destination (Interface)

DHCPv6 Commands

• A link-local Unicast or Multicast IPv6 address, for which a user must specify an output interface

• A global Unicast IPv6 address. A user can optionally specify an output interface for this kind of address.

If no output interface is configured for a destination, the output interface is determined by routing tables. In
this case, it is recommended that a Unicast or Multicast routing protocol be running on the router.

Multiple destinations can be configured on one interface, and multiple output interfaces can be configured
for one destination. When the relay agent relays messages to a Multicast address, it sets the hop limit field in
the IPv6 packet header to 32. Unspecified, loopback, and node-local Multicast addresses are not acceptable
as the relay destination.

Note that it is not necessary to enable the relay function on an interface for it to accept and forward an incoming
relay reply message from servers. By default, the relay function is disabled, and there is no relay destination
on an interface.

Use the no form of the command with arguments to remove a specific address.

Use the no form of the command without arguments to remove all the defined addresses and to disable the
relay on the interface.

Example 1. The following example sets the relay Unicast link-local destination address per VLAN
200 and enables the DHCPv6 Relay on VLAN 100 if it was not enabled:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 dhcp relay destination FE80::1:2 vlan 200
switchxxxxxx(config-if)# exit

Example 2. The following example sets the relay well known Multicast link-local destination address
per VLAN 200 and enables the DHCPv6 Relay on VLAN 100 if it was not enabled:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 dhcp relay destination vlan 200
switchxxxxxx(config-if)# exit

Example 3. The following example sets the Unicast global relay destination address and enables the
DHCPv6 Relay on VLAN 100 if it was not enabled:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 dhcp relay destination 3002::1:2
switchxxxxxx(config-if)# exit

Example 4. The following example enables DHCPv6 relay on VLAN 100:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 dhcp relay destination
switchxxxxxx(config-if)# exit

Example 5. The following example disables DHCPv6 relay on VLAN 100:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# no ipv6 dhcp relay destination
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

388

DHCPv6 Commands

show ipv6 dhcp

show ipv6 dhcp

To display the Dynamic DHCP unique identifier (DUID) on a specified device, use the show ipv6 dhcp
command in User EXEC mode.This information is relevant for DHCPv6 clients and DHCPv6 relays.

Syntax

show ipv6 dhcp

Command Mode

User EXEC mode

User Guidelines

This command uses the DUID, which is based on the link-layer address for both client and server identifiers.
The device uses the MAC address from the lowest-numbered interface to form the DUID.

Example 1. The following is sample output from this command when the switch’s DUID format is
vendor based on enterprise number:

switchxxxxxx# show ipv6 dhcp
The switch’s DHCPv6 unique identifier(DUID)is 0002000000090CC084D303000912

Format: 2
Enterprise Number: 9
Identifier: 0CC084D303000912

Example 2. The following is sample output from this command when the switch’s DUID format is
the vendor-based on link-layer address:

switchxxxxxx# show ipv6 dhcp
The switch’s DHCPv6 unique identifier(DUID)is 000300010024012607AA

Format: 3
Hardware type: 1
MAC Address: 0024.0126.07AA

Example 3. The following is sample output from this command when the switch’s DUID format is
vendorbased on link-layer address and DHCPv6 Relay is supported:

switchxxxxxx# show ipv6 dhcp
The switch’s DHCPv6 unique identifier(DUID)is 000300010024012607AA

Format: 3
Hardware type: 1
MAC Address: 0024.0126.07AA

Relay Destinations:

2001:001:250:A2FF:FEBF:A056
2001:1001:250:A2FF:FEBF:A056
2001:1011:250:A2FF:FEBF:A056 via VLAN 100
FE80::250:A2FF:FEBF:A056 via VLAN 100
FE80::250:A2FF:FEBF:A056 via VLAN 200

Cisco Business Switches 350 Series CLI Guide

389

show ipv6 dhcp interface

DHCPv6 Commands

show ipv6 dhcp interface

To display DHCP for IPv6 interface information, use the show ipv6 dhcp interface command in User EXEC
mode.

Syntax

show ipv6 dhcp interface [interface-id]

Parameters

• interface-id—Interface identifier.

Command Mode

User EXEC mode

User Guidelines

If no interfaces are specified in the command, all interfaces on which DHCP for IPv6 (client or server) is
enabled are displayed. If an interface is specified in the command, only information about the specified
interface is displayed.

Note. This new output format is supported starting with the SW version supporting statefull configuration

Example

The following is sample output from this command when DHCPv6 client is enabled:

switchxxxxxx# show ipv6 dhcp interface
VLAN 100 is in client mode

Configuration:

Statefull Service is enabled (rapid-commit)
Auto-Configuration is enabled
Information Refresh Time: 86400 seconds
Information Refresh Minimum Time: 600 seconds

State:

DHCP Operational mode is enabled
Statefull Service is available

DHCP server:

Address: FE80::204:FCFF:FEA1:7439
DUID: 000300010002FCA17400
Preference: 20

IPv6 Address Information:

IA NA: IA ID 0x00040001, T1 120, T2 192
IPv6 Address: 30e0::12:45:11

preferred lifetime: 300, valid lifetime: 54333
expires at Nov 08 2002 09:11 (54331 seconds)
renew for address will be sent in 54301 seconds

IPv6 Address: 3012::13:af:25

preferred lifetime: 280, valid lifetime: 51111
expires at Nov 08 2002 08:17 (51109 seconds)
renew for address will be sent in 5101 seconds

Stateless Information:

Information Refresh Time: 86400 seconds
expires at Nov 08 2002 08:17 (51109 seconds)
DNS Servers: 1001::1, 2001::10

Cisco Business Switches 350 Series CLI Guide

390

DHCPv6 Commands

show ipv6 dhcp interface

DNS Domain Search List: company.com beta.org
SNTP Servers: 2004::1
POSIX Timezone string: EST5EDT4,M3.2.0/02:00,M11.1.0/02:00
Configuration Server: config.company.com
Configuration Path Name: qqq/config/aaa_config.dat
Indirect Image Path Name: qqq/config/aaa_image_name.txt

VLAN 105 is in client mode

Configuration:

Statefull Service is enabled
Auto-Configuration is disabled
Information Refresh Time: 86400 seconds
Information Refresh Minimum Time: 600 seconds

State:

DHCP Operational mode is enabled
Statefull Service is not available (IPv6 routing is enabled)

DHCP server:

Address: FE80::204:FCFF:FEA1:7439
DUID: 000300010002FCA17400
Preference: 20

Stateless Information:

Information Refresh Time: 86400 seconds
expires at Nov 08 2002 08:17 (51109 seconds)
DNS Servers: 1001::1, 2001::10
DNS Domain Search List: company.com beta.org
SNTP Servers: 2004::1
POSIX Timezone string: EST5EDT4,M3.2.0/02:00,M11.1.0/02:00
Configuration Server: config.company.com
Configuration Path Name: qqq/config/aaa_config.dat
Indirect Image Path Name: qqq/config/aaa_image_name.txt

VLAN 107 is in client mode

Configuration:

Statefull Service is enabled
Auto-Configuration is enabled
Information Refresh Time: 86400 seconds
Information Refresh Minimum Time: 600 seconds

State:

DHCP Operational mode is enabled
Statefull Service is not available (IPv6 routing is enabled)

DHCP server:

Address: FE80::204:FCFF:FEA1:7439
DUID: 000300010002FCA17400
Preference: 20

Stateless Information:

Information Refresh Time: 86400 seconds
expires at Nov 08 2002 08:17 (51109 seconds)
DNS Servers: 1001::1, 2001::10
DNS Domain Search List: company.com beta.org
SNTP Servers: 2004::1
POSIX Timezone string: EST5EDT4,M3.2.0/02:00,M11.1.0/02:00
Configuration Server: config.company.com
Configuration Path Name: qqq/config/aaa_config.dat
Indirect Image Path Name: qqq/config/aaa_image_name.txt

VLAN 110 is in client mode

Configuration:

Statefull Service is enabled
Auto-Configuration is disabled
Information Refresh Time: 86400 seconds
Information Refresh Minimum Time: 600 seconds

State:

DHCP Operational mode is disabled (IPv6 is not enabled)

VLAN 1000 is in client mode

Configuration:

Statefull Service is enabled
Auto-Configuration is enabled

Cisco Business Switches 350 Series CLI Guide

391

show ipv6 dhcp interface

DHCPv6 Commands

Information Refresh Time: 86400 seconds
Information Refresh Minimum Time: 600 seconds

State:

DHCP Operational mode is disabled (Interface status is DOWN)

DHCP server:

Address: FE80::204:FCFF:FEA1:7439
DUID: 000300010002FCA17400
Preference: 20

Stateless Information:

Information Refresh Time: 86400 seconds
expires at Nov 08 2002 08:17 (51109 seconds)
DNS Servers: 1001::1, 2001::10
DNS Domain Search List: company.com beta.org
SNTP Servers: 2004::1
POSIX Timezone string: EST5EDT4,M3.2.0/02:00,M11.1.0/02:00
Configuration Server: config.company.com
Configuration Path Name: qqq/config/aaa_config.dat
Indirect Image Path Name: qqq/config/aaa_image_name.txt

VLAN 1010 is in relay mode

DHCP Operational mode is enabled
Relay source interface: VLAN 101
Relay destinations:

2001:001:250:A2FF:FEBF:A056
FE80::250:A2FF:FEBF:A056 via FastEthernet 1/0/10

Cisco Business Switches 350 Series CLI Guide

392

DNS Client Commands

This chapter contains the following sections:

• clear host, on page 394
• ip domain lookup, on page 395
• ip domain name, on page 396
• ip domain polling-interval, on page 397
• ip domain retry, on page 398
• ip domain timeout, on page 399
• ip host, on page 400
• ip name-server, on page 401
• show hosts, on page 402

Cisco Business Switches 350 Series CLI Guide

393

clear host

clear host

DNS Client Commands

Use the clear host command in privileged EXEC mode to delete dynamic hostname-to-address mapping
entries from the DNS client name-to-address cache.

Syntax

clear host {hostname | *}

Parameters

• hostname—Name of the host for which hostname-to-address mappings are to be deleted from the DNS

client name-to-address cache.

• *—Specifies that all the dynamic hostname-to-address mappings are to be deleted from the DNS client

name-to-address cache.

Default Configuration

No hostname-to-address mapping entries are deleted from the DNS client name-to-address cache.

Command Mode

Privileged EXEC mode

User Guidelines

To remove the dynamic entry that provides mapping information for a single hostname, use the hostname
argument. To remove all the dynamic entries, use the * keyword.

To define a static hostname-to-address mappings in the DNS hostname cache, use the ip host, on page 400
command.

To delete a static hostname-to-address mappings in the DNS hostname cache, use the no ip host, on page 400
command.

Example

The following example deletes all dynamic entries from the DNS client name-to-address cache.

switchxxxxxx# clear host *

Cisco Business Switches 350 Series CLI Guide

394

DNS Client Commands

ip domain lookup

ip domain lookup

Use the ip domain lookup command in Global Configuration mode to enable the IP Domain Naming System
(DNS)-based host name-to-address translation.

To disable the DNS, use the no form of this command.

Syntax

ip domain lookup

no ip domain lookup

Default Configuration

Enabled.

Command Mode

Global Configuration mode

Example

The following example enables DNS-based host name-to-address translation.

switchxxxxxx(config)# ip domain lookup

Cisco Business Switches 350 Series CLI Guide

395

ip domain name

ip domain name

DNS Client Commands

Use the ip domain name command in Global Configuration mode. to define a default domain name that the
switch uses to complete unqualified hostnames (names without a dotted-decimal domain name).

To delete the static defined default domain name, use the no form of this command.

Syntax

ip domain name name

no ip domain name

Parameters

name—Default domain name used to complete unqualified host names. Do not include the initial period that
separates an unqualified name from the domain name. Length: 1–158 characters. Maximum label length of
each domain level is 63 characters.

Default Configuration

No default domain name is defined.

Command Mode

Global Configuration mode

User Guidelines

Any IP hostname that does not contain a domain name (that is, any name without a dot) will have the dot and
the default domain name appended to it before being added to the host table.

Domain names and host names are restricted to the ASCII letters A through Z (case-insensitive), the digits 0
through 9, the underscore and the hyphen. A period (.) is used to separate labels.

The maximum size of each domain level is 63 characters. The maximum name size is 158 bytes.

Example

The following example defines the default domain name as ‘www.website.com’.

switchxxxxxx(config)# ip domain name website.com

Cisco Business Switches 350 Series CLI Guide

396

DNS Client Commands

ip domain polling-interval

ip domain polling-interval

Use the ip domain polling-interval command in Global Configuration mode to specify the polling interval.

Use the no form of this command to return to the default behavior.

Syntax

ip domain polling-interval seconds

no ip domain polling-interval

Parameters

seconds—Polling interval in seconds. The range is from (2*(R+1)*T) to 3600.

Default Configuration

The default value is 2 * (R+1) * T, where

• R is a value configured by the ip domain retry command.

• T is a value configured by the ip domain timeout command.

Command Mode

Global Configuration mode

User Guidelines

Some applications communicate with the given IP address continuously. DNS clients for such applications,
which have not received resolution of the IP address or have not detected a DNS server using a fixed number
of retransmissions, return an error to the application and continue to send DNS Request messages for the IP
address using the polling interval.

Example

The following example shows how to configure the polling interval of 100 seconds:

switchxxxxxx(config)# ip domain polling-interval 100

Cisco Business Switches 350 Series CLI Guide

397

ip domain retry

ip domain retry

DNS Client Commands

Use the ip domain retry command in Global Configuration mode to specify the number of times the device
will send Domain Name System (DNS) queries when there is no replay.

To return to the default behavior, use the no form of this command.

Syntax

ip domain retry number

no ip domain retry

Parameters

number—Number of times to retry sending a DNS query to the DNS server. The range is from 0 to 16.

Default Configuration

The default value is 1.

Command Mode

Global Configuration mode

User Guidelines

The number argument specifies how many times the DNS query will be sent to a DNS server until the switch
decides that the DNS server does not exist.

Example

The following example shows how to configure the switch to send out 10 DNS queries before giving up:

switchxxxxxx(config)# ip domain retry 10

Cisco Business Switches 350 Series CLI Guide

398

DNS Client Commands

ip domain timeout

ip domain timeout

Use the ip domain timeout command in Global Configuration mode to specify the amount of time to wait
for a response to a DNS query.

To return to the default behavior, use the no form of this command.

Syntax

ip domain timeout seconds

no ip domain timeout

Parameters

seconds—Time, in seconds, to wait for a response to a DNS query. The range is from 1 to 60.

Default Configuration

The default value is 2 seconds.

Command Mode

Global Configuration mode

User Guidelines

Use the command to change the default time out value. Use the no form of this command to return to the
default time out value.

Example

The following example shows how to configure the switch to wait 50 seconds for a response to a DNS query:

switchxxxxxx(config)# ip domain timeout 50

Cisco Business Switches 350 Series CLI Guide

399

ip host

ip host

DNS Client Commands

Use the ip host Global Configuration mode command to define the static host name-to-address mapping in
the DNS host name cache.

Use the no form of this command to remove the static host name-to-address mapping.

Syntax

ip host hostname address1 [address2...address8]

no ip host name ip host name [address1...address8]

Parameters

• hostname—Name of the host. (Length: 1–158 characters. Maximum label length of each domain level

is 63 characters).

• address1—Associated host IP address (IPv4 or IPv6, if IPv6 stack is supported).

• address2...address8—Up to seven additional associated IP addresses, delimited by a single space (IPv4

or IPv6, if IPv6 stack is supported).

Default Configuration

No host is defined.

Command Mode

Global Configuration mode

User Guidelines

Host names are restricted to the ASCII letters A through Z (case-insensitive), the digits 0 through 9, the
underscore and the hyphen. A period (.) is used to separate labels.

An IP application will receive the IP addresses in the following order:

1.

2.

IPv6 addresses in the order specified by the command.

IPv4 addresses in the order specified by the command.

Use the no format of the command with the address1...address8 argument to delete the specified addresses.
The entry is deleted if all its addresses are deleted.

Example

The following example defines a static host name-to-address mapping in the host cache.

switchxxxxxx(config)# ip host accounting.website.com 176.10.23.1

Cisco Business Switches 350 Series CLI Guide

400

DNS Client Commands

ip name-server

ip name-server

Use the ip name-server command in Global Configuration mode to specify the address of one or more name
servers to use for name and address resolution.

Use the no form of this command to remove the static specified addresses.

Syntax

ip name-server server1-address [server-address2...erver-address8]

no ip name-server [server-address1...server-address8]

Parameters

• server-address1—IPv4 or IPv6 addresses of a single name server.

• server-address2...server-address8—IPv4 or IPv6 addresses of additional name servers.

Default Configuration

No name server IP addresses are defined.

Command Mode

Global Configuration mode

User Guidelines

The preference of the servers is determined by the order in which they were entered.

Each ip name-server command replaces the configuration defined by the previous one (if one existed).

Example

The following example shows how to specify IPv4 hosts 172.16.1.111, 172.16.1.2, and IPv6 host 2001:0DB8::3
as the name servers:

switchxxxxxx(config)# ip name-server 172.16.1.111 172.16.1.2 2001:0DB8::3

Cisco Business Switches 350 Series CLI Guide

401

show hosts

show hosts

DNS Client Commands

Use the show hosts command in privileged EXEC mode to display the default domain name, the style of
name lookup service, a list of name server hosts, and the cached list of hostnames and addresses.

Syntax

show hosts [all | hostname]

Parameters

• all—The specified host name cache information is to be displayed for all configured DNS views. This

is the default.

• hostname—The specified host name cache information displayed is to be limited to entries for a particular

host name.

Command Mode

Privileged EXEC mode

Default Configuration

Default is all.

User Guidelines

This command displays the default domain name, a list of name server hosts, and the cached list of host names
and addresses.

Example

The following is sample output with no parameters specified:

switchxxxxxx# show hosts
Name/address lookup is enabled
Domain Timeout: 3 seconds
Domain Retry: 4 times
Domain Polling Interval: 10 seconds
Default Domain Table
Source Interface Preference Domain
static
dhcpv6 vlan 100
dhcpv6 vlan 100
dhcpv6 vlan 1100
Name Server Table
Source Interface Preference IP Address
static
static
static
DHCPv6
DHCPv4
DHCPv4
Casche Table
Flags: (static/dynamic, OK/Ne/??)
OK - Okay, Ne - Negative Cache, ?? - No Response

1
2
3
vlan 100 1
1
vlan 1
2
vlan 1

website.com
qqtca.com
company.com
pptca.com

1
2
1

192.0.2.204
192.0.2.205
192.0.2.105
2002:0:22AC::11:231A:0BB4
192.1.122.20
154.1.122.20

Cisco Business Switches 350 Series CLI Guide

402

DNS Client Commands

show hosts

Host Flag Address;Age...in preference order
example1.company.com (dynamic, OK) 2002:0:130F::0A0:1504:0BB4;1 112.0.2.10 176.16.8.8;123
124 173.0.2.30;39
example2.company.com (dynamic, ??)
example3.company.com (static, OK) 120.0.2.27
example4.company.com (dynamic, OK) 24 173.0.2.30;15
example5.company.com (dynamic, Ne); 12

Cisco Business Switches 350 Series CLI Guide

403

show hosts

DNS Client Commands

Cisco Business Switches 350 Series CLI Guide

404

EEE Commands

This chapter contains the following sections:

• eee enable (global), on page 406
• eee enable (interface), on page 407
• eee lldp enable, on page 408
• show eee, on page 409

Cisco Business Switches 350 Series CLI Guide

405

eee enable (global)

EEE Commands

eee enable (global)

To enable the EEE mode globally, use the eee enable Global Configuration command. To disable the mode,
use the no format of the command.

Syntax

eee enable

no eee enable

Parameters

This command has no arguments or keywords.

Default Configuration

Enabled

Command Mode

Global Configuration mode

User Guidelines

In order for EEE to work, the device at the other end of the link must also support EEE and have it enabled.
In addition, for EEE to work properly, auto-negotaition must be enabled; however, if the port speed is negotiated
as 1Giga, EEE always works regardless of whether the auto-negotiation status is enabled or disabled.

If auto-negotiation is not enabled on the port and its speed is less than 1 Giga, the EEE operational status is
disabled.

Example

switchxxxxxx(config)# eee enable

Cisco Business Switches 350 Series CLI Guide

406

EEE Commands

eee enable (interface)

eee enable (interface)

To enable the EEE mode on an Ethernet port, use the eee enable Interface Configuration command. To disable
the mode, use the no format of the command.

Syntax

eee enable

no eee enable

Parameters

This command has no arguments or keywords.

Default Configuration

EEE is enabled.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

If auto-negotiation is not enabled on the port and its speed is 1 Giga, the EEE operational status is disabled.

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# eee enable

Cisco Business Switches 350 Series CLI Guide

407

eee lldp enable

eee lldp enable

EEE Commands

To enable EEE support by LLDP on an Ethernet port, use the eee lldp enable Interface Configuration command.
To disable the support, use the no format of the command.

Syntax

eee lldp enable

no eee lldp enable

Parameters

This command has no arguments or keywords.

Default Configuration

Enabled

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

Enabling EEE LLDP advertisement enables devices to choose and change system wake-up times in order to
get the optimal energy saving mode.

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# eee lldp enable

Cisco Business Switches 350 Series CLI Guide

408

EEE Commands

show eee

show eee

Use the show eee EXEC command to display EEE information.

Syntax

show eee [interface-id]

Parameters

interface-id—(Optional) Specify an Ethernet port.

Defaults

None

Command Mode

Privileged EXEC mode

User Guidelines

If the port is a 10G port, but the link speed is 1G, the EEE Remote status cannot be resolved (and displayed).

Example 1 - The following displays brief Information about all ports.

switchxxxxxx# show eee
EEE globally enabled
EEE Administrate status is enabled on ports: gi1/0/1-2, gi1/0/4
EEE Operational status is enabled on ports: gi1/0/1-2, gi1/0/4
EEE LLDP Administrate status is enabled on ports: gi1/0/1-3
EEE LLDP Operational status is enabled on ports: gi1/0/1-2

Example 2 - The following is the information displayed when a port is in the Not Present state; no
information is displayed if the port supports EEE.

switchxxxxxx# show eee gi1/0/1
Port Status: notPresent
EEE Administrate status: enabled
EEE LLDP Administrate status: enabled

Example 3 - The following is the information displayed when the port is in status DOWN.

switchxxxxxx# show eee gi1/0/1
Port Status: DOWN
EEE capabilities:
Speed 10M: EEE not supported
Speed 100M: EEE supported
Speed 1G: EEE supported
Speed 10G: EEE not supported
EEE Administrate status: enabled
EEE LLDP Administrate status: enabled

Example 4 - The following is the information displayed when the port is in status UP and does not
support EEE.

switchxxxxxx# show eee gi1/0/2
Port Status: UP
EEE capabilities:

Cisco Business Switches 350 Series CLI Guide

409

show eee

EEE Commands

Speed 10M: EEE not supported
Speed 100M: EEE supported
Speed 1G: EEE supported
Speed 10G: EEE not supported

Current port speed: 1000Mbps
EEE Administrate status: enabled
EEE LLDP Administrate status: enabled

Example 5 - The following is the information displayed when the neighbor does not support EEE.

switchxxxxxx# show eee gi1/0/4
Port Status: UP
EEE capabilities:
Speed 10M: EEE not supported
Speed 100M: EEE supported
Speed 1G: EEE supported
Speed 10G: EEE not supported

Current port speed: 1000Mbps
EEE Remote status: disabled
EEE Administrate status: enabled
EEE Operational status: disabled (neighbor does not support)
EEE LLDP Administrate status: enabled
EEE LLDP Operational status: disabled

Example 6 - The following is the information displayed when EEE is disabled on the port.

switchxxxxxx# show eee gi1/0/1
Port Status: UP
EEE capabilities:
Speed 10M: EEE not supported
Speed 100M: EEE supported
Speed 1G: EEE supported
Speed 10G: EEE not supported

Current port speed: 1000Mbps
EEE Administrate status: disabled
EEE Operational status: disabled
EEE LLDP Administrate status: enabled
EEE LLDP Operational status: disabled

Example 7 - The following is the information displayed when EEE is running on the port, and EEE
LLDP is disabled.

switchxxxxxx# show eee gi1/0/2
Port Status: UP
EEE capabilities:
Speed 10M: EEE not supported
Speed 100M: EEE supported
Speed 1G: EEE supported
Speed 10G: EEE not supported

Current port speed: 1000Mbps
EEE Remote status: enabled
EEE Administrate status: enabled
EEE Operational status: enabled
EEE LLDP Administrate status: disabled
EEE LLDP Operational status: disabled
Resolved Tx Timer: 10usec
Local Tx Timer: 10 usec
Resolved Timer: 25 usec
Local Rx Timer: 20 usec

Example 8 - The following is the information displayed when EEE and EEE LLDP are running on
the port.

Cisco Business Switches 350 Series CLI Guide

410

EEE Commands

show eee

switchxxxxxx# show eee gi1/0/3
Port Status: UP
EEE capabilities:
Speed 10M: EEE not supported
Speed 100M: EEE supported
Speed 1G: EEE supported
Speed 10G: EEE not supported

Current port speed: 1000Mbps
EEE Remote status: enabled
EEE Administrate status: enabled
EEE Operational status: enabled
EEE LLDP Administrate status: enabled
EEE LLDP Operational status: enabled
Resolved Tx Timer: 10usec
Local Tx Timer: 10 usec
Remote Rx Timer: 5 usec
Resolved Timer: 25 usec
Local Rx Timer: 20 usec
Remote Tx Timer: 25 usec

Example 9 - The following is the information displayed when EEE is running on the port, EEE
LLDP is enabled but not synchronized with the remote link partner.

switchxxxxxx# show eee gi1/0/4
Port Status: up
EEE capabilities:
Speed 10M: EEE not supported
Speed 100M: EEE supported
Speed 1G: EEE supported
Speed 10G: EEE not supported

Current port speed: 1000Mbps
EEE Remote status: enabled
EEE Administrate status: enabled
EEE Operational status: enabled
EEE LLDP Administrate status: enabled
EEE LLDP Operational status: disabled
Resolved Tx Timer: 64
Local Tx Timer: 64
Resolved Rx Timer: 16
Local Rx Timer: 16

Example 10 - The following is the information displayed when EEE and EEE LLDP are running on
the port.

switchxxxxxx# show eee gi1/0/3
Port Status: UP
EEE capabilities:
Speed 10M: EEE not supported
Speed 100M: EEE supported
Speed 1G: EEE supported
Speed 10G: EEE not supported

Current port speed: 1000Mbps
EEE Remote status: enabled
EEE Administrate status: enabled
EEE Operational status: enabled
EEE LLDP Administrate status: enabled
EEE LLDP Operational status: enabled
Resolved Tx Timer: 10usec
Local Tx Timer: 10 usec
Remote Rx Timer: 5 usec
Resolved Timer: 25 usec
Local Rx Timer: 20 usec
Remote Tx Timer: 25 usec

Cisco Business Switches 350 Series CLI Guide

411

show eee

EEE Commands

Cisco Business Switches 350 Series CLI Guide

412

Ethernet Configuration Commands

This chapter contains the following sections:

• interface, on page 414
• interface range, on page 415
• shutdown, on page 416
• operation time, on page 418
• description, on page 419
• speed, on page 420
• duplex, on page 421
• negotiation, on page 422
• flowcontrol , on page 423
• mdix, on page 424
• back-pressure, on page 425
• port jumbo-frame, on page 426
• link-flap prevention, on page 427
• clear counters, on page 428
• set interface active, on page 429
• errdisable recovery cause, on page 430
• errdisable recovery interval, on page 431
• errdisable recovery reset, on page 432
• show interfaces configuration, on page 433
• show interfaces status, on page 434
• show interfaces advertise, on page 435
• show interfaces description, on page 437
• show interfaces counters, on page 438
• show ports jumbo-frame, on page 440
• show link-flap prevention, on page 441
• show errdisable recovery, on page 442
• show errdisable interfaces, on page 443
• clear switchport monitor, on page 444
• show switchport monitor, on page 445

Cisco Business Switches 350 Series CLI Guide

413

interface

interface

Ethernet Configuration Commands

To enter Interface configuration mode in order to configure an interface, use the interface Global Configuration
mode command.

Syntax

interface interface-id

Parameters

interface-id—Specifies an interface ID. The interface ID can be one of the following types: Ethernet port,
port-channel, VLAN, range, OOB, IP interface or tunnel.

Command Mode

Global Configuration mode

Example 1—For Ethernet ports:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)#

Example 2—For port channels (LAGs):

switchxxxxxx(config)# interface po1
switchxxxxxx(config-if)#

Cisco Business Switches 350 Series CLI Guide

414

Ethernet Configuration Commands

interface range

interface range

To execute a command on multiple ports at the same time, use the interface range command.

Syntax

interface range interface-id-list

Parameters

interface-id-list—Specify list of interface IDs. The interface ID can be one of the following types: Ethernet
port, VLAN, or port-channel

Command Mode

Interface (Ethernet, Port Channel, VLAN) Configuration mode

User Guidelines

Commands under the interface range context are executed independently on each interface in the range. If the
command returns an error on one of the interfaces, it does not stop the execution of the command on other
interfaces.

Example

switchxxxxxx(config)# interface range gi1/0/1-4
switchxxxxxx(config-if-range)#

Cisco Business Switches 350 Series CLI Guide

415

shutdown

shutdown

Ethernet Configuration Commands

To disable an interface, use the shutdown Interface Configuration mode command. To restart a disabled
interface, use the no form of this command.

Syntax

shutdown

no shutdown

Parameters

This command has no arguments or keywords.

Default Configuration

The interface is enabled.

Command Mode

Interface Configuration mode

User Guidelines

The shutdown command set a value of ifAdminStatus (see RFC 2863) to DOWN. When ifAdminStatus is
changed to DOWN, ifOperStatus will be also changed to DOWN.

The DOWN state of ifOperStatus means that the interface does not transmit/receive messages from/to higher
levels. For example, if you shut down a VLAN, on which an IP interface is configured, bridging into the
VLAN continues, but the switch cannot transmit and receive IP traffic on the VLAN.

Notes:

• If the switch shuts down an Ethernet port it additionally shuts down the port MAC sublayer too.

• If the switch shuts down a port channel it additionally shuts down all ports of the port channel too.

Example 1—The following example disables gi1/0/4 operations.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# shutdown
switchxxxxxx(config-if)#

Example 2—The following example restarts the disabled Ethernet port.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# no shutdown
switchxxxxxx(config-if)#

Example 3—The following example shuts down vlan 100.

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# shutdown
switchxxxxxx(config-if)#

Example 4—The following example shuts down tunnel 1.

Cisco Business Switches 350 Series CLI Guide

416

Ethernet Configuration Commands

shutdown

switchxxxxxx(config)# interface tunnel 1
switchxxxxxx(config-if)# shutdown
switchxxxxxx(config-if)#

Example 5—The following example shuts down Port Channel 3.

switchxxxxxx(config)# interface po3
switchxxxxxx(config-if)# shutdown
switchxxxxxx(config-if)#

Cisco Business Switches 350 Series CLI Guide

417

operation time

operation time

Ethernet Configuration Commands

To control the time that the port is up, use the operation time Interface (Ethernet, Port Channel) Configuration
mode command. To cancel the time range for the port operation time, use the no form of this command.

Syntax

operation time time-range-name

no operation time

Parameters

• time-range-name—Specifies a time range the port operates (in up state). When the Time Range is not

in effect, the port is shutdown. (Range: 1–32 characters)

Default Configuration

There is no time range configured on the port authorized state.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

It is recommended to disable spanning tree or to enable spanning-tree PortFast mode on 802.1x edge ports
(ports in auto state that are connected to end stations), in order to proceed to the forwarding state immediately
after successful authentication.

Example

The operation time command influences the port if the port status is up. This command defines the time frame
during which the port stays up and at which time the port will be shutdown. While the port is in shutdown
because of other reasons, this command has no effect.

The following example activates an operation time range (named "morning") on port gi1/0/1.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# operation time morning

Cisco Business Switches 350 Series CLI Guide

418

Ethernet Configuration Commands

description

description

To add a description to an interface, use the description Interface (Ethernet, Port Channel) Configuration
mode command. To remove the description, use the no form of this command.

Syntax

description string

no description

Parameters

string—Specifies a comment or a description of the port to assist the user. (Length: 1–64 characters).

Default Configuration

The interface does not have a description.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example

The following example adds the description ‘SW#3’ to gi1/0/4.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# description SW#3

Cisco Business Switches 350 Series CLI Guide

419

speed

speed

Ethernet Configuration Commands

To configure the speed of a given Ethernet interface when not using auto-negotiation, use the speed Interface
(Ethernet, Port Channel) Configuration mode command. To restore the default configuration, use the no form
of this command.

Syntax

speed {100 | 1000 | 2500 | 5000 | 10000}

no speed

Parameters

• 100—Forces 100 Mbps operation

• 1000—Forces 1000 Mbps operation

• 2500—Forces 2500 Mbps operation

• 5000—Forces 5000 Mbps operation

• 10000—Forces 10000 Mbps operation

Default Configuration

The port operates at its maximum speed capability.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The no speed command in a port-channel context returns each port in the port-channel to its maximum
capability.

Example

The following example configures the speed of gi1/0/4 to 100 Mbps operation.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# speed 100

Cisco Business Switches 350 Series CLI Guide

420

Ethernet Configuration Commands

duplex

duplex

To configure the full/half duplex operation of a given Ethernet interface when not using auto-negotiation, use
the duplex Interface (Ethernet, Port Channel) Configuration mode command. To restore the default
configuration, use the no form of this command.

Syntax

duplex {half | full}

no duplex

Parameters

• half—Forces half-duplex operation.

• full—Forces full-duplex operation.

Default Configuration

The interface operates in full duplex mode.

Command Mode

Interface (Ethernet) Configuration mode

Example

The following example configures gi1/0/1 to operate in full duplex mode.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# duplex full

Cisco Business Switches 350 Series CLI Guide

421

negotiation

negotiation

Ethernet Configuration Commands

To enable auto-negotiation operation for the speed and duplex parameters and master-slave mode of a given
interface, use the negotiation Interface (Ethernet, Port Channel) Configuration mode command. To disable
auto-negotiation, use the no form of this command.

Syntax

negotiation [capability [capability2... capability5]] [preferred {master | slave}]

no negotiation

Parameters

• Capability—(Optional) Specifies the capabilities to advertise. (Possible values: 10h, 10f, 100h,100f,

1000f, 2500f, 5000f, 10000f ).

10h—Advertise 10 half-duplex

10f—Advertise 10 full-duplex

100h—Advertise 100 half-duplex

100f—Advertise 100 full-duplex

1000f—Advertise 1000 full-duplex

2500f—Advertise 2500 full-duplex

• 5000f—Advertise 5000 full-duplex

• 10000f—Advertise 10000 full-duplex

• Preferred—(Optional) Specifies the master-slave preference:

Master—Advertise master preference

Slave—Advertise slave preference

Default Configuration

If capability is unspecified, defaults to list of all the capabilities of the port and preferred slave mode.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example

The following example enables auto-negotiation on gi1/0/1.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# negotiation

Cisco Business Switches 350 Series CLI Guide

422

Ethernet Configuration Commands

flowcontrol

flowcontrol

To configure the Flow Control on a given interface, use the flowcontrol Interface (Ethernet, Port Channel)
Configuration mode command. To disable Flow Control, use the no form of this command.

Syntax

flowcontrol {auto | on | off}

no flowcontrol

Parameters

• auto—Specifies auto-negotiation of Flow Control.

• on—Enables Flow Control.

• off—Disables Flow Control.

Default Configuration

Flow control is set to Disabled.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use the negotiation command to enable flow control auto.

Example

The following example enables Flow Control on port gi1/0/1

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# flowcontrol on

Cisco Business Switches 350 Series CLI Guide

423

mdix

mdix

Ethernet Configuration Commands

To enable cable crossover on a given interface, use the mdix Interface (Ethernet) Configuration mode command.
To disable cable crossover, use the no form of this command.

Syntax

mdix {on | auto}

no mdix

Parameters

• on—Enables manual MDIX.

• auto—Enables automatic MDI/MDIX.

Default Configuration

The default setting is Auto.

Command Mode

Interface (Ethernet) Configuration mode

Example

The following example enables automatic crossover on port gi1/0/1.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# mdix auto

Cisco Business Switches 350 Series CLI Guide

424

Ethernet Configuration Commands

back-pressure

back-pressure

To enable back pressure on a specific interface, use the back-pressure Interface (Ethernet) Configuration
mode command. To disable back pressure, use the no form of this command.

Syntax

back-pressure

no back-pressure

Parameters

This command has no arguments or keywords.

Default Configuration

Back pressure is disabled.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

Back-pressure cannot be enabled when EEE is enabled.

Example

The following example enables back pressure on port gi1/0/1.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# back-pressure

Cisco Business Switches 350 Series CLI Guide

425

port jumbo-frame

Ethernet Configuration Commands

port jumbo-frame

To enable jumbo frames on the device, use the port jumbo-frame Global Configuration mode command. To
disable jumbo frames, use the no form of this command.

Syntax

port jumbo-frame

no port jumbo-frame

Parameters

This command has no arguments or keywords.

Default Configuration

Jumbo frames are disabled on the device.

Command Mode

Global Configuration mode

User Guidelines

This command takes effect only after resetting the device.

Example

The following example enables jumbo frames on the device.

switchxxxxxx(config)# port jumbo-frame

Cisco Business Switches 350 Series CLI Guide

426

Ethernet Configuration Commands

link-flap prevention

link-flap prevention

To enable setting a physical interface to err-disable state due to excessive link flapping, use the link-flap
prevention Global Configuration mode command. Use the no form of this command to restore the default
configuration.

Syntax

link-flap prevention {enable | disable}

no link-flap prevention

Parameters

enable—Enables Link-flap Prevention.

disable—Disables Link-flap Prevention.

Default Configuration

Link-flap prevention is enabled on the device.

Command Mode

Global Configuration mode

User Guidelines

This command will shutdown Ethernet (Physical) interfaces if the interface experienced, for a duration of 10
seconds, 3 link flaps (link status changes) within each second.

Example

The following example enables link-flap prevention on the device.

switchxxxxxx(config)# link-flap prevention

Cisco Business Switches 350 Series CLI Guide

427

clear counters

clear counters

Ethernet Configuration Commands

To clear counters on all or on a specific interface, use the clear counters Privileged EXEC mode command.

Syntax

clear counters [interface-id]

Parameters

interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types: Ethernet
port or port-channel.

Default Configuration

All counters are cleared.

Command Mode

Privileged EXEC mode

Example

The following example clears the statistics counters for gi1/0/1.

switchxxxxxx# clear counters gi1/0/1

Cisco Business Switches 350 Series CLI Guide

428

Ethernet Configuration Commands

set interface active

set interface active

To reactivate an interface that was shut down, use the set interface active Privileged EXEC mode command.

Syntax

set interface active interface-id

Parameters

interface-id— Specifies an interface ID. The interface ID can be one of the following types: Ethernet port
or port-channel.

Command Mode

Privileged EXEC mode

User Guidelines

This command is used to activate interfaces that were configured to be active, but were shut down by the
system.

Example

The following example reactivates gi1/0/1.

switchxxxxxx# set interface active gi1/0/1

Cisco Business Switches 350 Series CLI Guide

429

errdisable recovery cause

Ethernet Configuration Commands

errdisable recovery cause

To enable automatic re-activation of an interface after an Err-Disable shutdown, use the errdisable recovery
cause Global Configuration mode command. To disable automatic re-activation, use the no form of this
command.

Syntax

errdisable recovery cause {all | port-security | dot1x-src-address | acl-deny | stp-bpdu-guard |
stp-loopback-guard | loopback-detection | udld | storm-control | link-flap }

no errdisable recovery cause {all | port-security | dot1x-src-address | acl-deny | stp-bpdu-guard |
stp-loopback-guard | loopback-detection | udld | storm-control | link-flap }

Parameters

• all—Enables the error recovery mechanism for all reasons described below.

• port-security—Enables the error recovery mechanism for the port security Err-Disable state.

• dot1x-src-address—Enables the error recovery mechanism for the 802.1x Err-Disable state.

• acl-deny—Enables the error recovery mechanism for the ACL Deny Err-Disable state.

• stp-bpdu-guard—Enables the error recovery mechanism for the STP BPDU Guard Err-Disable state.

• stp-loopback-guard—Enables the error recovery mechanism for the STP Loopback Guard Err-Disable

state.

• loopback-detection—Enables the error recovery mechanism for the Loopback Detection Err-Disable

state.

• udld—Enables the error recovery mechanism for the UDLD Shutdown state.

• storm-control—Enables the error recovery mechanism for the Storm Control Shutdown state.

• link-flap—Enables the error recovery mechanism for the link-flap prevention Err-Disable state.

Default Configuration

Automatic re-activation is disabled, except for link-flap reason where automatic re-creation is enabled by
default.

Command Mode

Global Configuration mode

Example

The following example enables automatic re-activation of an interface after all states.

switchxxxxxx(config)# errdisable recovery cause all

Cisco Business Switches 350 Series CLI Guide

430

Ethernet Configuration Commands

errdisable recovery interval

errdisable recovery interval

To set the error recovery timeout intervalse the errdisable recovery interval Global Configuration mode
command. To return to the default configuration, use the no form of this command.

Syntax

errdisable recovery interval seconds

no errdisable recovery interval

Parameters

seconds—Specifies the error recovery timeout interval in seconds. (Range: 30–86400)

Default Configuration

The default error recovery timeout interval is 300 seconds.

Command Mode

Global Configuration mode

Example

The following example sets the error recovery timeout interval to 10 minutes.

switchxxxxxx(config)# errdisable recovery interval 600

Cisco Business Switches 350 Series CLI Guide

431

errdisable recovery reset

Ethernet Configuration Commands

errdisable recovery reset

To reactivate one or more interfaces that were shut down by a given application, use the errdisable recovery
reset Privileged EXEC mode command. A single interface, multiple interfaces or all interfaces can be specified.

Syntax

errdisable recovery reset {all | port-security | dot1x-src-address | acl-deny |stp-bpdu-guard |
stp-loopback-guard | loopback-detection | udld | storm-control | link-flap | interface interface-id}

Parameters

• all—Reactivate all interfaces regardless of their state.

• port-security—Reactivate all interfaces in the Port Security Err-Disable state.

• dot1x-src-address—Reactivate all interfaces in the 802.1x Err-Disable state.

• acl-deny—Reactivate all interfaces in the ACL Deny Err-Disable state.

• stp-bpdu-guard—Reactivate all interfaces in the STP BPDU Guard Err-Disable state.

• stp-loopback-guard—Reactivate all interfaces in the STP Loopback Guard Err-Disable state.

• loopback-detection—Reactivate all interfaces in the Loopback Detection Err-Disable state.

• udld—Reactivate all interfaces in the UDLD Shutdown state.

• storm-control—Reactivate all interfaces in the Storm Control Shutdown state.

• link-flap—Reactivate all interfaces in the link-flap prevention Err-Disable state.

• interface interface-id—Reactivate interfaces that were configured to be active, but were shut down by

the system.

Command Mode

Privileged EXEC mode

Example 1—The following example reactivates interface gi1/0/1:

switchxxxxxx# errdisable recovery reset interface gi1/0/1

Example 2—The following example reactivates all interfaces regardless their state:

switchxxxxxx# errdisable recovery reset all

Example 3—The following example enables all interfaces in the port security Err-Disable state

switchxxxxxx# errdisable recovery reset port-security

Cisco Business Switches 350 Series CLI Guide

432

Ethernet Configuration Commands

show interfaces configuration

show interfaces configuration

To display the configuration for all configured interfaces or for a specific interface, use the show interfaces
configuration Privileged EXEC mode command.

Syntax

show interfaces configuration [interface-id | detailed]

Parameters

• interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types:

Ethernet port or port-channel.

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Default Configuration

Display all interfaces. If detailed is not used, only present ports are displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays the configuration of all configured interfaces:

switchxxxxxx# show interfaces configuration

Type

Flow

Duplex Speed Neg

Admin Back
Port
control State Pressure Mode
------ -------- ------ ----- -------- ------- ----- -------- ----
Full
gi1/0/1 1G-Copper
gi1/0/2 1G-Copper
Full
gi1/0/2 10G-Copper Full
gi1/0/3 10G-Copper Full
gi1/0/4 10G-Copper Full

Enabled Off
1000
1000
Disabled Off
10000 Disabled Off
Disabled Off
2500
Disabled Off
5000

Disabled Off
Disabled Off
Disabled Off
Disabled Off
Disabled Off

Up
Up
Up
Up
Up

Mdix

Type

PO
------ ------ ----- --------
Disabled
Po1

Speed Neg

Flow
Control
-------
Off

Admin
State
-----
Up

Cisco Business Switches 350 Series CLI Guide

433

show interfaces status

Ethernet Configuration Commands

show interfaces status

To display the status of all interfaces or of a specific interface, use the show interfaces status Privileged
EXEC mode command.

Syntax

show interfaces status [interface-id | detailed]

Parameters

• interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types:

Ethernet port or port-channel.

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Command Mode

Privileged EXEC mode

Default Configuration

Display for all interfaces. If detailed is not used, only present ports are displayed.

Example

The following example displays the status of all configured interfaces.

switchxxxxxx# show interfaces status

Type

Duplex Speed Neg

Port
------ --------- ------ ----- -------- ---- ------ -------- --
gi1/0/1 1G-Copper Full
gi1/0/2 1G-Copper --
te1/0/1 10G-Copper --

1000 Disabled Off
--
2500

Disabled Off
--
--

--
--

--
--

--
--

Mdix
Flow Link
ctrl State Pressure Mode

Back

Type

PO
----- -------
Po1
*: The interface was suspended by the system.

Duplex Speed Neg
------ ----- ------- ----
10000 Disabled Off
Full

1G

Flow
control State

Up
Down
Down
Link

------
Up

Cisco Business Switches 350 Series CLI Guide

434

Ethernet Configuration Commands

show interfaces advertise

show interfaces advertise

To display auto-negotiation advertisement information for all configured interfaces or for a specific interface,
use the show interfaces advertise Privileged EXEC mode command.

Syntax

show interfaces advertise [interface-id | detailed]

Parameters

• interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types:

Ethernet port or port-channel.

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Default Configuration

Display for all interfaces. If detailed is not used, only present ports are displayed.

Command Mode

Privileged EXEC mode

Examples

The following examples display auto-negotiation information.

switchxxxxxx# show interfaces advertise

Port
----
gi1/0/1
gi1/0/2

Type
---------
1G-Copper
1G-Copper

Neg
------
Enable
Enable

Prefered
-------
Master
Slave

Operational Link Advertisement
----------------------------
1000f, 100f, 10f, 10h
1000f

tw1/03

2.5G-Copper

Enable

2500f, 1000f, 100f, 100h

Slave

te1/0/1

10G-Copper

Enable

Slave

10000f, 5000f, 2500f,1000f

switchxxxxxx# show interfaces advertise gi1/0/1
Port:gi1/0/1
Type: 1G-Copper
Link state: Up
Auto Negotiation: enabled
Preference: Master

Admin Local link Advertisement
Oper Local link Advertisement
Remote Local link Advertisement
Priority Resolution

10h
---
yes
yes
no
-

10f
---
yes
yes
no
-

100h
----
yes
yes
yes
-

100f
----
yes
yes
yes
-

1G
-----
yes
yes
yes
yes

2.5G
-----
no
no
no
-

5G

no

no

no

-

no

no

no

-

-----

10G

-----

Cisco Business Switches 350 Series CLI Guide

435

show interfaces advertise

Ethernet Configuration Commands

switchxxxxxx# show interfaces advertise gi1/0/1
Port: gi1/0/1
Type: 1G-Copper
Link state: Up
Auto negotiation: disabled.

Cisco Business Switches 350 Series CLI Guide

436

Ethernet Configuration Commands

show interfaces description

show interfaces description

To display the description for all configured interfaces or for a specific interface, use the show interfaces
description Privileged EXEC mode command.

Syntax

show interfaces description [interface-id | detailed]

Parameters

• interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types:

Ethernet port or port-channel.

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Default Configuration

Display description for all interfaces. If detailed is not used, only present ports are displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays the description of all configured interfaces.

switchxxxxxx# show interfaces description

Port
------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4

PO
----
Po1

Descriptions
---------------------------------------------
Port that should be used for management only

Description
-----------
Output

Cisco Business Switches 350 Series CLI Guide

437

show interfaces counters

Ethernet Configuration Commands

show interfaces counters

To display traffic seen by all the physical interfaces or by a specific interface, use the show interfaces counters
Privileged EXEC mode command.

Syntax

show interfaces counters [interface-id | detailed]

Parameters

• interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types:

Ethernet port or port-channel.

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Default Configuration

Display counters for all interfaces. If detailed is not used, only present ports are displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays traffic seen by all the physical interfaces.

0

0

0

0

InOctets

InUcastPkts InMcastPkts InBcastPkts

OutUcastPkts OutMcastPkts OutBcastPkts OutOctets

switchxxxxxx# show interfaces counters gi1/0/1
Port
---------- ------------ ------------ ------------ ------------
gi1/0/1
0
Port
---------- ------------ ------------ ------------ ------------
1
gi1/0/1
FCS Errors: 0
Single Collision Frames: 0
Multiple Collision Frames: 0
SQE Test Errors: 0
Deferred Transmissions: 0
Late Collisions: 0
Excessive Collisions: 0
Carrier Sense Errors: 0
Oversize Packets: 0
Internal MAC Rx Errors: 0
Symbol Errors: 0
Received Pause Frames: 0
Transmitted Pause Frames: 0

7051

35

The following table describes the fields shown in the display.

Field

InOctets

Description

Number of received octets.

InUcastPkts

Number of received Unicast packets.

Cisco Business Switches 350 Series CLI Guide

438

Ethernet Configuration Commands

show interfaces counters

Field

InMcastPkts

InBcastPkts

OutOctets

OutUcastPkts

OutMcastPkts

OutBcastPkts

FCS Errors

Single Collision Frames

Multiple Collision Frames

SQE Test Errors

Description

Number of received Unicast packets.

Number of received broadcast packets.

Number of transmitted octets.

Number of transmitted Unicast packets.

Nmber of transmitted Unicast packets.

Number of transmitted Broadcast packets.

Number of frames received that are an integral number
of octets in length but do not pass the FCS check.

Number of frames that are involved in a single
collision, and are subsequently transmitted
successfully.

Number of frames that are involved in more than one
collision and are subsequently transmitted
successfully.

Number of times that the SQE TEST ERROR is
received. The SQE TEST ERROR is set in accordance
with the rules for verification of the SQE detection
mechanism in the PLS Carrier Sense Function as
described in IEEE Std. 802.3, 2000 Edition, section
7.2.4.6.

Deferred Transmissions

Number of frames for which the first transmission
attempt is delayed because the medium is busy.

Late Collisions

Excessive Collisions

Oversize Packets

Number of times that a collision is detected later than
one slotTime into the transmission of a packet.

Number of frames for which transmission fails due
to excessive collisions.

Number of frames received that exceed the maximum
permitted frame size.

Internal MAC Rx Errors

Number of frames for which reception fails due to an
internal MAC sublayer receive error.

Received Pause Frames

Number of MAC Control frames received with an
opcode indicating the PAUSE operation.

Transmitted Pause Frames

Number of MAC Control frames transmitted on this
interface with an opcode indicating the PAUSE
operation.

Cisco Business Switches 350 Series CLI Guide

439

show ports jumbo-frame

Ethernet Configuration Commands

show ports jumbo-frame

To display whether jumbo frames are enabled on the device, use the show ports jumbo-frame Privileged
EXEC mode command.

Syntax

show ports jumbo-frame

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

Example

The following example displays whether jumbo frames are enabled on the device.

switchxxxxxx# show ports jumbo-frame
Jumbo frames are disabled
Jumbo frames will be enabled after reset

Cisco Business Switches 350 Series CLI Guide

440

Ethernet Configuration Commands

show link-flap prevention

show link-flap prevention

To display whether link-flap prevention is enabled on the device, use the show link-flap prevention Privileged
EXEC mode command.

Syntax

show link-flap prevention

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

Example

The following example displays whether link-flap prevention is enabled on the device.

switchxxxxxx# show link-flap prevention
link-flap prevention is currently enabled on device

Cisco Business Switches 350 Series CLI Guide

441

show errdisable recovery

Ethernet Configuration Commands

show errdisable recovery

To display the Err-Disable configuration of the device, use the show errdisable recovery Privileged EXEC
mode command.

Syntax

show errdisable recovery

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

Example

The following example displays the Err-Disable configuration.

switchxxxxxx# show errdisable recovery
Timer interval: 300 Seconds
Reason
Automatic Recovery
---------------------- ------------------
port-security
dot1x-src-address
acl-deny
stp-bpdu-guard
stp-loopback-guard
loop-detection
udld
storm control
link-flap

Disable
Disable
Enable
Disable
Disable
Disable
Disable
Disable

Disable

Cisco Business Switches 350 Series CLI Guide

442

Ethernet Configuration Commands

show errdisable interfaces

show errdisable interfaces

To display the Err-Disable state of all interfaces or of a specific interface, use the show errdisable interfaces
Privileged EXEC mode command.

Syntax

show errdisable interfaces [interface-id]

Parameters

• interface—(Optional) Port or port-channel number.

Default Configuration

Display for all interfaces.

Command Mode

Privileged EXEC mode

Example

The following example displays the Err-Disable state of gi1/0/1.

switchxxxxxx# show errdisable interfaces
Interface
(sec)
------------
gi1/0/1
gi1/0/5

------------------
port-security
acl-deny

Reason

Time to recovery

-------------

250
NA

Cisco Business Switches 350 Series CLI Guide

443

clear switchport monitor

Ethernet Configuration Commands

clear switchport monitor

To clear monitored statistics on all or on a specific interface or interface list, use the clear switchport monitor
Privileged EXEC mode command.

Syntax

clear switchport monitor [interface-id-list]

Parameters

interface-id-list—(Optional) Specifies a list of interface ID. The interface ID can be one of the following
types: Ethernet port or port-channel.

Default Configuration

All monitored statistics are cleared.

Command Mode

Privileged EXEC mode

Example

The following example clears the monitored statistics for gi1/0/1.

switchxxxxxx# clear switchport monitor gi1/0/1

Cisco Business Switches 350 Series CLI Guide

444

Ethernet Configuration Commands

show switchport monitor

show switchport monitor

To display the monitored statistics gathered by a specific interface, use the show switchport monitor Privileged
EXEC mode command.

Syntax

show switchport monitor interface-id {seconds | minutes | hours | days |weeks} [utilization | tx | rx |
frames]

show switchport monitor interface-id {days |weeks}

show switchport monitor utilization [interface-id]

Parameters

• interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types:

Ethernet port or port-channel.

• seconds— last 20 samples, sampled every 15 seconds.

• minutes —last 60 samples, sampled every 60 seconds (every round minute according to system time).

• hours —last 24 samples, sampled every 60 minutes (every round hour according to system time).

• days —last 7 samples, sampled every 24 hours (midnight to midnight according to system time).

• weeks —last 12 samples, sampled every 7 days (midnight saturday to midnight saturday according to

system time).

• utilization —shows per time frame the utilization calculated.

• rx —shows received counters statistics.

• tx —shows sent counters statistics.

• frames —show received counters statistics collected per packet size.

Default Configuration

Display monitored statistics for an interface or all interface in case of sshow switchport monitor utilization
command.

Command Mode

Privileged EXEC mode

User Guidelines

The show switchport monitor utilization is used to show a utilization summary per interface of the last time
frame in each time frame(i.e. last minute, last hour, last day and last week).

The show switchport monitor interface-id is used to show monitored statistics samples collected per time
frame and per counter types.

Cisco Business Switches 350 Series CLI Guide

445

show switchport monitor

Ethernet Configuration Commands

Example 1—The following example displays monitored statistics utilization seen by interface gi1/0/1.

switchxxxxxx# show switchport monitor utilization gi1/0/1

Interface
---------
gi1/0/1

Minutes Rx/TX
utilization
------------
95%

Hours Rx/TX
utilization
-----------
80%

Days Rx/TX
utilization
-----------
60%

Weeks Rx/TX
utilization
-----------
20%

Example 2—The following example displays monitored Tx statistics gathered in minutes time frame
seen by interface gi1/0/1.

switchxxxxxx# show switchport monitor gi1/0/1 minutes tx

Time
----------
04:22:00(~)
04:23:00

Unicast frames
Sent
--------------
95%
80%

Broadcast frames
Sent
-----------
80%
70%

Multicast frames
Sent
-----------
60%
60%

Good
Octet
Sent
-------
20%
50%

(~) Not all samples are available.

The following table describes the fields shown in the display.

Field

Time

Description

Time stamp of the current sample in system real time
clock.

For seconds, minutes and hours format is: hh:mm:ss.

For days and weeks format is:

<day of week> dd/mm/yy.

Good Octets Received

Number of received octets.

Good Unicast frames Received

Number of received Unicast packets.

Good Multicast frames Received

Number of received Unicast packets.

Good Broadcast frames Received

Number of received broadcast packets.

Good Octets Sent

Number of transmitted octets.

Good Unicast frames Sent

Number of transmitted Unicast packets.

Good Multicast frames Sent

Nmber of transmitted Unicast packets.

Good Broadcast frames Sent

Number of transmitted Broadcast packets.

Frames of 64 bytes

Number of received packets size of 64 bytes.

Frames of 65-127 bytes

Number of received packets size of 65-127 bytes.

Frames of 128-255 bytes

Number of received packets size of 128-255 bytes.

Frames of 256-511 bytes

Number of received packets size of 256-511 bytes.

Cisco Business Switches 350 Series CLI Guide

446

Ethernet Configuration Commands

show switchport monitor

Field

Description

Frames of 512-1023 bytes

Number of received packets size of 512-1023 bytes.

Frames of 1024-1518 bytes

Number of received packets size of 1024-1518 bytes.

Rx Error Frames Received

Number of frames received that are an integral number
of octets in length but do not pass the FCS check.

Rx Utilization

Tx Utilization

Rx/Tx Utilization

Utilization in percentage for Received frames on the
interface.

Utilization in percentage for Sent frames on the
interface.

An average of the Rx Utilization and the Tx
Utilization in percentage on the interface.

Cisco Business Switches 350 Series CLI Guide

447

show switchport monitor

Ethernet Configuration Commands

Cisco Business Switches 350 Series CLI Guide

448

CBD Probe Commands

This chapter contains the following sections:

• cbd probe enable, on page 450
• cbd address, on page 451
• cbd key, on page 452
• cbd connection enable, on page 453
• cbd reset, on page 454
• clear cbd probe database, on page 455
• show cbd , on page 456

Cisco Business Switches 350 Series CLI Guide

449

cbd probe enable

CBD Probe Commands

cbd probe enable

To enable the Cisco Business Dashboard Probe operation on device, use the cbd probe enable command in
Global Configuration mode. To disable the Cisco Business Dashboard Probe operation, use the no form of
this command.

Syntax

cbd probe enable

no cbd probe enable

Default Configuration

Cisco Business Dashboard Probe is disabled.

Command Mode

Global Configuration mode

User Guidelines

Use the command to enable the Cisco Business Dashboard Probe on the device.

Example

The following example enables the Cisco Business Dashboard Probe on the device:

switchxxxxxx(config)# cbd probe enable
This operation may take a few seconds....

Cisco Business Switches 350 Series CLI Guide

450

CBD Probe Commands

cbd address

cbd address

To configure the details of the Cisco Business Dashboard, use the cbd address command in Global
Configuration mode. To remove the details of the Cisco Business Dashboard, use the no form of this command.

Syntax

cbd address {ip-address | hostname} [port port]

no cbd address

Parameters

• address ip-address—Specifies the Cisco Business Dashboard IP address. This can be an IPv4 address.

• address hostname — Specifies the Cisco Business Dashboard as a hostname (Range: 1–158 characters.

Maximum label size of each part of the host name: 63).

• port — Specifies the TCP port used to connect to Cisco Business Dashboard. (Range: 1-65535)

Default Configuration

No address is configured. CBD port default is 443.

Command Mode

Global Configuration mode

User Guidelines

Use the cbd address command to configure the Cisco Business Dashboard IP address and the TCP port to
use to connect to the Cisco Business Dashboard. The cbd connection enable configuration must be removed
prior to making changes to this parameter.

Examples

The following example configures the IPv4 address of the Cisco Business Dashboard to 1.1.1.1 and sets the
TCP port to 8443.

switchxxxxxx(config)# cbd address 1.1.1.1 port 8443

In the following example configuration of the Cisco Business Dashboard IPv4 address fails because connection
to Dashboard is enabled.

switchxxxxxx(config)# cbd address 1.1.1.1
Command failed!
Please disable connection to Cisco Business Dashboard before configuring this command, using
command "no cbd connection enable". Only after configuring all Dashboard settings (Dashboard
address, Key parameters, Organization and Network name) re-enable connection (command "cbd
connection enable") to allow Probe connection to Cisco Business Dashboard

Cisco Business Switches 350 Series CLI Guide

451

cbd key

cbd key

CBD Probe Commands

To configure the key ID and secret of the Cisco Business Dashboard, use the cbd key command in Global
Configuration mode. To remove Cisco Business Dashboard key ID and secret configuration, use the no form
of this command.

Syntax

cbd key id id-string secret secret-string

encrypted cbd key id id-string secret encrypted-secret-string

no cbd key

Parameters

• id id-string—Specifies the key ID to use for initial authentication between the Cisco Business Dashboard
Probe running on the device and the Cisco Business Dashboard (A string of 24 hexadecimal digits).

• secret secret-string— Specifies the secret to use for authentication, can be specified as an alphanumeric

string without white-spaces. The key can be up to 160 characters.

• secret encrypted-secret-string — Same as the secret-string parameter, but the secret is in encrypted form.

Default Configuration

CBD key ID and secret are not defined.

Command Mode

Global Configuration mode

User Guidelines

Use the cbd key command to configure the Cisco Business Dashboard key ID and secret. The cbd connection
enable configuration must be removed prior to making changes to this parameter.

Example

The following example configures the key ID and secret of the Cisco Business Dashboard used for initial
authentication:

switchxxxxxx(config)# cbd key id 5cecde9f21bb450005fb790b secret secretExample123

Cisco Business Switches 350 Series CLI Guide

452

CBD Probe Commands

cbd connection enable

cbd connection enable

To configure the probe to connect with Cisco Business Dashboard, use the cbd connection enable command
in Global Configuration mode. To disable probe connection to the Cisco Business Dashboard, use the no form
of this command.

Syntax

cbd connection enable

no cbd connection enable

Default Configuration

Probe is not enabled for connection to Cisco Business Dashboard.

Command Mode

Global Configuration mode

User Guidelines

Use the cbd connection enable command to enable the probe to connect to the Cisco Business Dashboard.
The configuration of this command will trigger the Cisco Business Dashboard Probe to connect to the Cisco
Business Dashboard if the CBD Probe is enabled.

The cbd organization name, cbd network name, cbd address and cbd key settings must be configured for
the cbd connection enable command to succeed. Use the no cbd connection enable to disconnect the Probe
from the Cisco Business Dashboard and to allow the user to change the Cisco Business Dashboard settings
mentioned above.

Examples

The following example enables the probe to connect to the Cisco Business Dashboard:

switchxxxxxx(config)# cbd connection enable

In the following example the command fails because some of the Dashboard settings needed for connection
were not configured:

switchxxxxxx(config)# cbd connection enable
Command failed. Please make sure all of the following dashboard parameters are configured:

dashboard address, organization name, network name and key;

Cisco Business Switches 350 Series CLI Guide

453

cbd reset

cbd reset

CBD Probe Commands

To reset Cisco Business Dashboard Probe connection to the Cisco Business Dashboard use the cbd reset
command in Privileged EXEC mode.

Syntax

cbd reset

Command Mode

Privileged EXEC mode

User Guidelines

Use the cbd reset command to reset the connection to the Cisco Business Dashboard. Applying the command
will disconnect current connection with Dashboard, flush CBD probe cached data and then attempt to reconnect
to the Cisco Business Dashboard.

The command will be executed only if the Probe Agent is enabled (command cbd probe enable, on page 450)
and connection to Cisco Business Dashboard is also enabled (command cbd connection enable, on page 453).

Examples

The following example executes an attempt to reconnect using the configured key ID and secret:

switchxxxxxx# cbd reset

In the following example the reset command fails because Probe connection to Network Cisco Business
Dashboard is not enabled:

switchxxxxxx# cbd reset
Operation failed because Probe connection to Cisco Business Dashboard is not enabled.
Please enable conntection to Cisco Business Dashboard using command "cbd connection enable".

In the following example the reset command fails because Probe agent is not enabled on device:

switchxxxxxx# cbd reset
Operation failed because Probe is not enabled
Please enable Probe using command "cbd probe enable".

Cisco Business Switches 350 Series CLI Guide

454

CBD Probe Commands

clear cbd probe database

clear cbd probe database

To clear the Cisco Business Dashboard Probe database use the clear cbd probe database command in
Privileged EXEC mode.

Syntax

clear cbd probe database

Command Mode

Privileged EXEC mode

User Guidelines

Use the clear cbd probe database to clear the Cisco Business Dashboard Probe database.

The command will be executed only if the Cisco Business Dashboard Probe Agent is disabled.

Examples

The following example clears the Cisco Business Dashboard Probe Database:

switchxxxxxx# clear cbd probe database

In the following example, the clear command fails because the Cisco Business Dashboard Probe is enabled
on the switch:

switchxxxxxx# clear cbd probe database
Operation failed because Cisco Business Dashboard Probe is enabled on the switch.
Please disable Probe on switch using command "no cbd probe enable".

Cisco Business Switches 350 Series CLI Guide

455

show cbd

show cbd

CBD Probe Commands

To display information about Cisco Business Dashboard Probe Configuration and status, use the show cbd
command in Privileged EXEC mode.

Syntax

show cbd

Command Mode

Privileged EXEC mode

User Guidelines

Use the show cbd command, to display information about the Cisco Business Dashboard Probe running on
the device.

Example

The following example shows the output from the show cbd command:

switchxxxxxx# show cbd
Network Probe is enabled
Operational status: Active
Probe version: 1.1.2.20181019
Dashboard address: 1.1.1.1
Dashboard port: 443
Key ID: MyKey
Key Secret (encrypted): 8nPzy2hzuba9pG3iiC/q0451RynUn7kq94L9WORFrRM=
Organization name: ABC Company
Network name: my network
Dashboard status: connected

The following table describes the different Cisco Business Dashboard Probe setting and behavior and the
relevant Administrative & Operational state display.

Cisco Business Dashboard Probe Setting and Status

Administrative State
indication

Operational State
indication

Cisco Business Dashboard Probe Disabled

Disabled

Cisco Business Dashboard Probe Enabled and active

Enabled

Cisco Business Dashboard Probe Enabled but is not
active (indicates a failure)

Enabled

Inactive

Active

Fault

Cisco Business Switches 350 Series CLI Guide

456

File System Commands

This chapter contains the following sections:

• File Specification, on page 458
• System Flash Files, on page 461
• Flash File System on Stack, on page 462
• boot config, on page 463
• boot localization, on page 465
• boot system, on page 466
• cd, on page 467
• copy, on page 468
• delete, on page 470
• dir, on page 471
• mkdir, on page 472
• more, on page 473
• pwd, on page 474
• reload, on page 475
• rename, on page 477
• rmdir, on page 479
• service mirror-configuration, on page 480
• show bootvar / show version, on page 481
• show mirror-configuration service, on page 484
• show reload, on page 485
• show running-config, on page 486
• show startup-config, on page 488
• write, on page 489

Cisco Business Switches 350 Series CLI Guide

457

File Specification

File System Commands

File Specification

The files may be located on:

• Network: TFTP servers and/or SCP servers - Network files

• Active FLASH - Flash files

• mass-storage connected to a USB port of Active - USB files. Only one mass-storage is supported.

Note. Although inside the switch supports the File System on FLASH of all stack units the File System CLI
commands allow access only to flash files on Active unit. Needed file synchronizations between Active unit
and other units is performed by the switch automatically.

Uniform Resource Locators (URLs) are used to specify the location of a file or a directory. The URL has the
following syntax:

<url> ::= tftp://<location>/<file-path> | scp://[<username>:<password>@]<location>/<file-path> |
usb://<file-path> | flash://<file-path> | <current-directory>[/<file-path>] | <higher-directory>[/<file-path>]
| <file-path>

<username> ::= string up to 70 characters

<password> :: = string up to 70 characters

<location> ::= <ipv4-address> | <ipv6-address> | <dns-name>

<current-directory> ::= [{usb | flash}:][.]

<higher-directory> ::= [{usb | flash}:]..

<file-path> ::= [<directories-path>/]<filename>

<directories-path> ::= <directory-name> | <directories-path>/<directory-name>

The maximum number of directories in <directories-path> is 16.

<directory-name> ::= string up to 63 characters

<filename> ::= string up to 63 characters

Filenames and directory names consist only of characters from the portable filename character set. The set
includes the following characters:

• A B C D E F G H I J K L M N O P Q R S T U V W X Y Z

• a b c d e f g h i j k l m n o p q r s t u v w x y z

• <space>

• 0 1 2 3 4 5 6 7 8 9 . _ -

The last three characters are the <period>, <underscore>, and <hyphen> characters, respectively.

If an URL includes spaces it must be enclosed by the " characters.

For example:

"flash://aaa it/alpha/file 125"

The maximal length of URL is 160 characters

Cisco Business Switches 350 Series CLI Guide

458

File System Commands

File Specification

The following File systems are supported on USB:

• FAT32—Full support.

• NTFS—Partially support: read only.

The switch supports the following predefined URL aliases:

• active-image—The predefined URL alias specifies the Active Image file. This file has the following

permissions:

readable

executable

• inactive-image—The predefined URL alias specifies the Inactive Image file. This file has the following

permissions:

readable

executable

• running-config—The predefined URL alias specifies the Running Configuration File.

• startup-config—The predefined URL alias specifies the Startup Configuration File. This file has the

following permissions:

readable

• localization. The predefined URL alias specifies the Secondary Language Dictionary files. These files

have the following permissions:

readable

• logging. The predefined URL alias specifies the Syslog file. This file has the following permissions:

readable

• mirror-config. The predefined URL alias specifies the Mirror Configuration file. This file has the

following permissions:

readable

Example 1. The following example specifies a file on TFTP server using an IPv4 address:

tftp://1.1.1.1/aaa/dat/file.txt

Example 2. The following example specifies a file on TFTP server using an IPv6 address:

tftp://3000:1:2::11/aaa/dat/file.txt

Example 3. The following example specifies a file on TFTP server using a DNS name:

tftp://files.export.com/aaa/dat/file.txt

Example 4. The following example specifies a file on FLASH:

flash://aaa/dat/file.txt

Example 5. The following example specifies files using the current directory:

./dat/file.txt

dat/file.txt

Cisco Business Switches 350 Series CLI Guide

459

File Specification

File System Commands

Example 6. The following example specifies a file using the higher directory:

../dat/file.txt

Example 7. The following example specifies a file on mass-storage device connected to the USB
port:

usb://aaa/dat/file.txt

Example 8. The following example specifies files on mass-storage device connected to the USB
port using the current directory:

usb:aaa/dat/file.txt

usb:./aaa/dat/file.txt

Example 9. The following example specifies a file on mass-storage device connected to the USB
port using the higher directory:

usb:../aaa/dat/file.txt

Cisco Business Switches 350 Series CLI Guide

460

File System Commands

System Flash Files

System Flash Files

The system files used by the switch are in the flash://system/ directory. A user cannot add, delete, and rename
the system files and directories, a user cannot create new directories under the system directory.

The system files are divided to the following groups:

• Inner System files. The files are created by the switch itself. For example the Syslog file.

• Files installed/Uninstalled by user. This group includes the following files:

Active and Inactive Images

Startup Configuration

Secondary Language Dictionary

Additionally, the following commands from previous versions can be used too:

Note. Reset to Factory Default removes all files from the FLASH except the following files:

• active-image

• inactive-image

• mirror-config

• localization

The flash://system/ directory contains the following directories:

• flash://system/images/—The directory contains the Active and Inactive Image files.

• flash://system/configuration/—The directory contains the Startup and Mirror Configuration files.

• flash://system/localization/—The directory contains the Secondary Language Dictionary files.

• flash://system/syslog/—The directory contains the Syslog file.

• flash://system/applications/—The directory contains inner system files managed by the switch

applications.

Cisco Business Switches 350 Series CLI Guide

461

Flash File System on Stack

File System Commands

Flash File System on Stack

The CLI commands provide access only to files located on the Active unit FLASH. The switch performs
automatically synchronization files between Active unit and Member units:

• The Standby unit’s Flash File system is fully synchronized with the Active unit’s Flash File System.

• For non-Standby Member units File system only the following files are synchronized:

• Active Image file

• Inactive Image file

• Secondary Language Dictionary files

• All other files and directories are deleted.

Cisco Business Switches 350 Series CLI Guide

462

File System Commands

boot config

boot config

To install a file as Startup Configuration after reload, use the boot config command in Privileged EXEC mode.
To uninstall the Startup configuration file, use the no form of this command.

Syntax

boot config startup-config-url

boot config running-config

boot config mirror-config

no boot config

Parameters

• startup-config-url—the url of a file. The predefined URLs cannot be configured.

Command Mode

Privileged EXEC mode

User Guidelines

Use the boot config startup-config-url command to install Startup Configuration from the startup-config-url
file. The file must be a text file containing CLI commands. The command performs the following actions:

• Copies the file into the system directory flash://system/configuration/

• Converts the file format from the text format in the inner binary format.

• Installs the converted file as Startup Configuration. The previous Startup Configuration file is deleted.

• Installs Startup Configuration on Standby unit.

Use the boot config running-config command to install Startup Configuration from Running Configuration.

Use the boot config mirror-config command to install Startup Configuration from the Mirror Configuration
file.

Use the no boot config command, to uninstall Startup Configuration. The uninstalled file is deleted.

Example 1. The following example installs Startup Configuration from a TFTP server:

switchxxxxxx# boot config tftp://1.1.1./confiration-files/config-v1.9.dat

Example 2. The following example installs Startup Configuration from FLASH:

switchxxxxxx# boot config flash://confiration-files/config-v1.9.dat

Example 3. The following example unsets the current Startup Configuration:

switchxxxxxx# no boot config

Example 4. The following example installs Startup Configuration from the Running Configuration
file:

Cisco Business Switches 350 Series CLI Guide

463

boot config

File System Commands

switchxxxxxx# boot config running-config

Example 5. The following example installs Startup Configuration from the Mirror Configuration
file:

switchxxxxxx# boot config mirror-config

Cisco Business Switches 350 Series CLI Guide

464

File System Commands

boot localization

boot localization

To install a file as the Secondary Language Dictionary file, use the boot localization command in Privileged
EXEC mode. To remove all the installed language files, use the no form of this command.

Syntax

boot localization dictionary-url

no boot localization

Parameters

• dictionary-url—the url of a file. The predefined URLs cannot be configured.

Default Configuration

Default language.

Command Mode

Privileged EXEC mode

User Guidelines

Use the boot localization dictionary-url command to install aSecondary Language Dictionary from the
dictionary-url file. The command performs the following actions:

• Copies the file into the system directory flash://system/localization/

• Validates installed file format and if the file language is supported by the device. If the file does not have
the correct format, or if the file language is not supported by the device, the file is not copied and the
command will finish with an error.

• Replaces the relevant language file on device with the installed file. Update of language file does not

change the active secondary language used by web GUI user.

• Installs Secondary Language Dictionary relevant file on all the all other stack units.

Use the no boot dictionary command, to uninstall Secondary Language Dictionary. The uninstalled files are
deleted.

Example 1. The following example installs the Secondary Language Dictionary file from a TFTP
server:

switchxxxxxx# boot localization tftp://196.1.1.1/web-dictionaries/germany-dictionary.lang

Example 2. The following example installs the Secondary Language Dictionary file from FLASH:

switchxxxxxx# boot localization flash://web-dictionaries/germany-dictionary.lang

Cisco Business Switches 350 Series CLI Guide

465

boot system

boot system

File System Commands

To install the system (active) image that the switch loads at startup, use the boot system command in Privileged
EXEC mode.

Syntax

boot system image-url

boot system inactive-image

Parameters

• image-url—The URL of a file. The predefined URLs cannot be configured.

Default Configuration

No default.

Command Mode

Privileged EXEC mode

User Guidelines

Use the boot system image-url command to install a new active image from the image-url file. The command
performs the following actions:

• Copies the file into the system directory flash://system/image/

• Validates its format. If the file does not have the correct image format the file is deleted and the command

is finished with an error.

• Installs the copied file as the active image that will be used be loaded at startup. The previous active

image file is save as inactive image. The previous inactive image is deleted.

• Installs the new active image in all stack units.

Use the boot system inactive-image command to set the inactive image as active one and the active image
as inactive one.

The command installs the inactive image as active in all stack units.

Example 1. The following example sets a new active image from a TFTP server:

switchxxxxxx# boot system tftp://145.21.2.3/image/image-v1-1.ros

Example 2. The following example sets a new active image from FLASH:

switchxxxxxx# boot system flash://images/image-v1-1.ros

Example 3. The following example sets the inactive image:

switchxxxxxx# boot system inactive-image

Cisco Business Switches 350 Series CLI Guide

466

File System Commands

cd

cd

To change the current directory or file system, use the cd command in User EXEC mode.

Syntax

cd url

Parameters

• url—Specifies a directory on FLASH or on USB.

Default Configuration

The flash root directory (flash://)

Command Mode

User EXEC mode

User Guidelines

When a terminal session is started the current directory of the session is set to flash://. Use the cd command
to change the current directory.

Example 1. The following example sets a new current directory on FLASH:

switchxxxxxx> pwd
flash://
switchxxxxxx> cd date/aaa
switchxxxxxx> pwd
flash://date/aaa

Example 2. The following example sets a new current directory on USB:

switchxxxxxx> pwd
flash://
switchxxxxxx> cd usb://
switchxxxxxx> pwd
usb://

Cisco Business Switches 350 Series CLI Guide

467

copy

copy

File System Commands

To copy any file from a source to a destination, use the copy command in Privileged EXEC mode.

Syntax

copy src-url dst-url

*copy {running-config | startup-config} dst-url

copy {running-config | startup-config} dst-url [exclude | include-encrypted | include-plaintext]

copy src-url running-config

copy running-config startup-config

copy tech-support cbd usb://<file-path>

Parameters

• src-url—The location URL of the source file to be copied. The predefined URL aliases can be configured.

• dst-url—The URL of the destination file or the directory to be copied. The predefined URL aliases cannot

be configured.

• exclude—The file does not include sensitive data in the file being copied.

• include-encrypted—The file includes sensitive data in its encrypted form. This secure option is applied

by default, if no secure option is configured.

• include-plaintext—The file includes sensitive data in its plaintext form.

• tech-support cbd — Indicates that the source is the Cisco Business Dashboard (CBD) tech support

information. If this source is selected, the destination can only be USB. If specified filename does not
include the ".zip" suffix, this suffix will be added automatically to copied filename (full path length up
to 160 characters).

Command Mode

Privileged EXEC mode

User Guidelines

The following guidelines are relevant:

• You cannot copy one network file to another network file.

• Localization is not supported as a predefined src-url or dst-url.

• Use the copy src-url dst-url command to copy any file. If the dst-url argument defines an existed flash
file the command fails if this file does not have the writable permission. If the dst-url argument defines
a directory file then the file is copied into the directory with the same name. No file format validation or
conversion is performed. If the src-url argument and dst-url arguments define flash files the dst-url file
will have the permissions of the src-url file. If the src-url argument defines a non-flash file and the dst-url
argument defines a flash files the dst-url file will have the following permissions:

Cisco Business Switches 350 Series CLI Guide

468

File System Commands

copy

• readable

• writable

• Use the copy src-url running-config command to add a file to the Running Configuration file.

Example 1. The following example copies file file1 from the TFTP server 172.16.101.101 to the
flash://aaa/file1 file:

switchxxxxxx# copy tftp://172.16.101.101/file1 flash://aaa/file1

Example 2. The following example saves the Startup configuration file in the
tftp://172.16.101.101/config.txt file:

*switchxxxxxx# copy startup-config tftp://172.16.101.101/config.txt or switchxxxxxx# copy
startup-config tftp://172.16.101.101/config.txt include-encrypted

Example 3. The following example copies the Running Configuration file to the Startup configuration:

switchxxxxxx# copy running-config startup-config

Note

*

If ssd configuration in show running-config or startup-config reads “file SSD indicator plaintext”,
the copied file will have sensitive information in plaintext.

If ssd configuration in show running-config or startup-config reads “file SSD indicator encrypted
”, the copied file will have sensitive information encrypted.

If ssd configuration in show running-config or startup-config reads “file SSD indicator exclude ”,
the copied file will not include sensitive information will be excluded.

Example 4. The following example copies the Syslog file to a TFTP server:

switchxxxxxx# copy logging tftp://1.1.1.1/syslog.txt

Example 5. The following example copies a file from the mass-storage device connected to the USB
port to Flash:

switchxxxxxx# copy usb://aaa/file1.txt flash://dir1/file2

Cisco Business Switches 350 Series CLI Guide

469

delete

delete

File System Commands

To delete a local file, use the delete command in Privileged EXEC mode.

Syntax

delete url

delete startup-config

Parameters

• url—Specifies the local URL of the local file to be deleted. The predefined and network URLs cannot

be configured.

• file-name—Specifies the name of SNA user file to delete.

Command Mode

Privileged EXEC mode

User Guidelines

The delete url command cannot delete a network file.

Use the delete startup-config command to delete the Startup Configuration file.

Example 1. The following example deletes the file called ‘backup/config’ from FLASH:

switchxxxxxx# cd flash://backup/
switchxxxxxx# delete aaa.ttt
Delete flash://backup/aaa.ttt? [Y/N]Y

Example 2. The following example deletes the file called ‘aaa/config’ from the mass-storage device
connected to the USB port:

switchxxxxxx# delete usb://aaa/config
Delete usb://aaa/config? [Y/N]Y

Cisco Business Switches 350 Series CLI Guide

470

File System Commands

dir

dir

To display a list of files on a file system, use the dir command in User EXEC mode.

Syntax

dir [url]

Parameters

• url—Specifies the local URL of the directory to be displayed. The predefined and network URLs cannot

be configured. If the argument is omitted the current directory is used.

Command Mode

User EXEC mode

User Guidelines

The command cannot be applied to a network directory.

Use the dir command without the argument to display the current directory.

Examples

The following example displays the flash://mng/ directory:

switchxxxxxx> dir flash://mng/
Permissions

d-directory
r-readable
w-writable
x-executable

134560K of 520000K are free
Directory of flash://mng/
Permission File Size
---------- --------- -------------------- ------------------
4720148 Dec 12 2010 17:49:36 bin

Last Modified

File Name

drw-
-r--
-r--
-r-x
-rw-

60 Dec 12 2011 17:49:36 config-list

160 Feb 12 2011 17:49:36 image-list

6520148 Nov 29 2010 7:12:30 image1
2014 Nov 20 2010 9:12:30 data

Cisco Business Switches 350 Series CLI Guide

471

mkdir

mkdir

File System Commands

To create a new directory, use the mkdir command in Privileged EXEC mode.

Syntax

mkdir url

Parameters

• url—Specifies the URL of the created directory. The predefined and network URLs cannot be configured.

Command Mode

Privileged EXEC mode

User Guidelines

The mkdir command cannot be applied to a network directory.

The mkdir command cannot create a directory into the flash://system/ directory.

All directories defined in the url argument except the created one must exist.

Example 1. The following example creates a directory on FLASH:

switchxxxxxx# mkdir flash://date/aaa/

Example 2. The following example creates a directory on the mass-storage device connected to the
USB port:

switchxxxxxx# mkdir usb://newdir/

Cisco Business Switches 350 Series CLI Guide

472

File System Commands

more

more

To display the contents of a file, use the more command in User EXEC mode.

Syntax

more url

Parameters

• url—Specifies the local URL or predefined file name of the file to display.

Command Mode

User EXEC mode

Example

The following example displays the running configuration file contents:

switchxxxxxx> more running-config
no spanning-tree
interface range gi/11-48
speed 1000
exit
no lldp run
line console
exec-timeout 0

Cisco Business Switches 350 Series CLI Guide

473

pwd

pwd

File System Commands

To show the current directory, use the pwd command in User EXEC mode.

Syntax

pwd [usb: I flash:]

Parameters

• usb:—Display the current directory on the USB driver.

• flash:—Display the current directory on the FLASH driver.

Command Mode

User EXEC mode

User Guidelines

Use the pwd usb: I flash: command to show the current directory on the specified driver.

Use the pwd command to show the current directory set by the recent cd command.

Example

The following example uses the cd command to change the current directory and then uses the pwd command
to display that current directory:

switchxxxxxx> pwd
flash://
switchxxxxxx> cd date/aaa
switchxxxxxx> pwd
flash://date/aaa

Cisco Business Switches 350 Series CLI Guide

474

File System Commands

reload

reload

To reload the operating system, use the reload command in Privileged EXEC mode.

Syntax

reload [in [hhh:mm | mmm] | at hh:mm [day month]] | cancel]

reload cancel

Parameters

• in hhh:mm | mmm—Schedules a reload of the image to take effect in the specified minutes or hours and

minutes. The reload must take place within approximately 24 days.

• at hh:mm—Schedules a reload of the image to take place at the specified time (using a 24-hour clock).
If you specify the month and day, the reload is scheduled to take place at the specified time and date. If
you do not specify the month and day, the reload takes place at the specified time on the current day (if
the specified time is later than the current time) or on the next day (if the specified time is earlier than
the current time). Specifying 00:00 schedules the reload for midnight. The reload must take place within
24 hours.

• day—Number of the day in the range from 1 to 31.

• month—Month of the year. (Range: Jan–Dec)

• cancel—Cancels a scheduled reload.

Command Mode

Privileged EXEC mode

User Guidelines

Use the reload command to reload the switch.

Use the reload {in hhh:mm | mmm | at hh:mm [day month]} command the command to specify scheduled
switch reload.

The at keyword can be configured only if the system clock has been set on the switch.

When you specify the reload time using the at keyword, if you specify the month and day, the reload takes
place at the specified time and date. If you do not specify the month and day, the reload takes place at the
specified time on the current day (if the specified time is later than the current time), or on the next day (if
the specified time is earlier than the current time). Specifying 00:00 schedules the reload for midnight. The
reload must take place within 24 days.

Use the reload cancel command to cancel the scheduled reload.

Example 1. The following example reloads the switch:

switchxxxxxx# reload
This command will reset the whole system and disconnect your current session. Do you want
to continue? (Y/N) [Y]

Example 2. The following example reloads the image in 10 minutes:

Cisco Business Switches 350 Series CLI Guide

475

reload

File System Commands

switchxxxxxx# reload in 10
This command will reset the whole system and disconnect your current session. Reload is
scheduled for 11:57:08 UTC Fri Apr 21 2012 (in 10 minutes). Do you want to continue? (Y/N)

[Y]

Example 3. The following example reloads the image at 12:10 24 Aug:

switchxxxxxx# reload at 12:10 24 Aug
This command will reset the whole system and disconnect your current session. Reload is
scheduled for 12:10:00 UTC Sun Aug 24 2014 (in 1 hours and 12 minutes). Do you want to
continue ? (Y/N)[N]

Example 4. The following example reloads the image at 13:00:

switchxxxxxx# reload at 13:00 soft
This command will reset the whole system and disconnect your current session. Reload is
scheduled for 13:00:00 UTC Fri Apr 21 2012 (in 1 hour and 3 minutes). Do you want to continue?

(Y/N) [Y]

Example 5. The following example cancels a reload.

switchxxxxxx# reload cancel
Reload cancelled.

Cisco Business Switches 350 Series CLI Guide

476

File System Commands

rename

rename

To rename a local file or directory, use the rename command in Privileged EXEC mode.

Syntax

rename url new-url

Parameters

• url—Specifies the URL of the file or directory to be renamed. The predefined and network URLs cannot

be configured.

• new-url—Specifies the new URL of the renamed file or directory. The predefined and network URLs

cannot be configured.

Command Mode

Privileged EXEC mode

User Guidelines

The url and new-url arguments must specifies the same driver.

The command cannot rename a network file or network directory.

The command cannot rename a file or directory into the flash://system directory.

Example 1. The following example renames the flash://bin/text1.txt file to
flash://archive/text1sav.txt:

switchxxxxxx# cd flash://archive
switchxxxxxx# rename flash://bin/text1.txt ./text1sav.txt

Example 2. The following example renames the flash://a/b directory to the flash://e/g/h directory:

switchxxxxxx# pwd
flash://a/b/c/d
switchxxxxxx> dir flash://a
Permissions

• d-directory
• r-readable
• w-writable
• x-executable

134560K of 520000K are free
Directory of flash://a
File Name
---------
b
switchxxxxxx> dir flash://e/g/h
Permissions

Permission File Size
---------- ---------
472148

drw-

Last Modified
--------------------
Dec 13 2010 15:49:36

• d-directory
• r-readable
• w-writable
• x-executable

134560K of 520000K are free
Directory of flash://e/g/h
File Name

Permission File Size

Last Modified

Cisco Business Switches 350 Series CLI Guide

477

rename

File System Commands

---------- ---------

---------
switchxxxxxx# rename flash://a/b flash://e/g/h
switchxxxxxx# pwd
flash://e/g/h/c/d
switchxxxxxx> dir flash://a
Permissions

--------------------

• d-directory
• r-readable
• w-writable
• x-executable

134560K of 520000K are free
Directory of flash://mng/
File Name
---------
switchxxxxxx> dir flash://e/g/h
Permissions

Permission File Size
---------- ---------

• d-directory
• r-readable
• w-writable
• x-executable

134560K of 520000K are free
Directory of flash://e/g/h
File Name
---------
c

Permission File Size
---------- ---------
720148

drw-

Last Modified
--------------------

Last Modified
--------------------
Dec 12 2010 17:49:36

Cisco Business Switches 350 Series CLI Guide

478

File System Commands

rmdir

rmdir

To remove a local directory, use the rmdir command in Privileged EXEC mode.

Syntax

rmdir url

Parameters

• url—Specifies the URL of the file or directory to be deleted. The predefined and network URLs cannot

be configured.

Command Mode

Privileged EXEC mode

User Guidelines

Only empty directory can be deleted.

The command cannot remove a network directory.

The command cannot remove a directory into the flash://system directory.

Example 1. The following example removes the directory called ‘backup/config/’ from FLASH:

switchxxxxxx# rmdir flash://backup/config/
Remove flash://backup/config? [Y/N]Y

Example 2. The following example removes the directory called ‘aaa/config’ from the mass-storage
device connected to the USB port:

switchxxxxxx# rmdir usb://aaa/config/
Remove directory usb://aaa/config? [Y/N]Y

Cisco Business Switches 350 Series CLI Guide

479

service mirror-configuration

File System Commands

service mirror-configuration

Use the service mirror-configuration Global Configuration mode command to enable the mirror-configuration
service. Use no service mirror-configuration command to disable the service.

Syntax

service mirror-configuration

no service mirror-configuration

Parameters

This command has no arguments or keywords.

Default Configuration

The default configuration is mirror-configuration service enabled.

Command Mode

Global Configuration mode

User Guidelines

The mirror-configuration service automatically keeps a copy of the last known stable configuration (startup
configuration that has not been modified for 24H).

When this service is disabled, the mirror-configuration file is deleted.

Example 1 - The following example disables the mirror-configuration service:

switchxxxxxx(config)# no service mirror-configuration

This operation will delete the mirror-config file if exists. Do you want to continue? (Y/N) [N]

Example 2 - The following example enables the mirror-configuration service

switchxxxxxx(config)# service mirror-configuration

Service is enabled.

Cisco Business Switches 350 Series CLI Guide

480

File System Commands

show bootvar / show version

show bootvar / show version

To display the active system image file that was loaded by the device at startup, and to display the system
image file that will be loaded after rebooting the switch, use the show bootvar or show version command in
User EXEC mode.

Syntax

show bootvar

show version

Parameters

This command has no arguments or keywords.

Command Mode

User EXEC mode

User Guidelines

The show bootvar and show version commands have the same functionality.

Example 1. The following example gives an example of the command output after reload:

switchxxxxxx# show bootvar
Active-image: flash://system/images/image_v12-03.ros

Version: 12.03
MD5 Digest: 23FA000012857D8855AABC7577AB5562
Date: 04-Jul-2014
Time: 15:03:07

Inactive-image: flash://system/images/image_v12-01.ros

Version: 12.01
MD5 Digest: 3FA000012857D8855AABC7577AB8999
Date: 04-Feb-2001
Time: 11:13:17

Example 2. This example continues the inactive one, after applying the boot system
tftp://1.1.1.1/image_v14-01.ros command:

switchxxxxxx# show bootvar
Active-image: flash://system/images/image_v12-03.ros

Version: 12.03
MD5 Digest: 63FA000012857D8855AABEA7451265456
Date: 04-Jul-2014
Time: 15:03:07
Inactive after reboot

Inactive-image: flash://system/images/image_v14-01.ros

Version: 14.01
MD5 Digest: 23FA000012857D8855AABC7577AB5562
Date: 24-Jul-2014
Time: 23:11:17
Active after reboot

Example 3. This example continues the inactive one, after a system reload:

switchxxxxxx# show bootvar
Active-image: flash://system/images/image_v14-01.ros

Cisco Business Switches 350 Series CLI Guide

481

show bootvar / show version

File System Commands

Version: 14.01
MD5 Digest: 23FA000012857D8855AABC7577AB5562
Date: 24-Jul-2014
Time: 23:11:17

Inactive-image: flash://system/images/image_v12-03.ros

Version: 12.03
MD5 Digest: 63FA000012857D8855AABEA7451265456
Date: 04-Jul-2014
Time: 15:03:07

Example 4. This example continues the inactive one, after applying the boot system inactive-image
command:

switchxxxxxx# show bootvar
Active-image: flash://system/images/image_v14-01.ros

Version: 14.01
MD5 Digest: 23FA000012857D8855AABC7577AB5562
Date: 24-Jul-2014
Time: 23:11:17
Inactive after reboot

Inactive-image: flash://system/images/image_v12-03.ros

Version: 12.03
MD5 Digest: 63FA000012857D8855AABEA7451265456
Date: 04-Jul-2014
Time: 15:03:07
Active after reboot

Example 5. This example continues the inactive one, after a system reload:

switchxxxxxx# show bootvar
Active-image: flash://system/images/image_v12-03.ros

Version: 12.03
MD5 Digest: 63FA000012857D8855AABEA7451265456
Date: 04-Jul-2014
Time: 15:03:07

Inactive-image: flash://system/images/_image_v12-03.ros

Version: 12.03
MD5 Digest: 63FA000012857D8855AABEA7451265456
Date: 04-Jul-2014
Time: 15:03:07

Example 7. The following example gives an example of the command output after applying the boot
system command two times:

switchxxxxxx# show bootvar
Active-image: flash://system/images/image_v12-03.ros

Version: 12.03
MD5 Digest: 63FA000012857D8855AABEA7451265456
Date: 04-Jul-2014
Time: 15:03:07

Inactive-image: flash://system/images/image_v12-01.ros

Version: 12.01
MD5 Digest: 3FA000012857D8855AABC7577AB8999
Date: 04-Feb-2001
Time: 11:13:17

switchxxxxxx# boot system tftp://1.1.1.1/image_v14-01.ros
switchxxxxxx# show bootvar
Active-image: flash://system/images/image_v12-03.ros

Version: 12.03
MD5 Digest: 63FA000012857D8855AABEA7451265456
Date: 04-Jul-2014
Time: 15:03:07
Inactive after reboot

Inactive-image: flash://system/images/image_v14-01.ros

Version: 14.01

Cisco Business Switches 350 Series CLI Guide

482

File System Commands

show bootvar / show version

MD5 Digest: 23FA000012857D8855AABC7577AB5562
Date: 24-Jul-2014
Time: 23:11:17
Active after reboot

switchxxxxxx# boot system tftp://1.1.1.1/image_v14-04.ros
switchxxxxxx# show bootvar
Active-image: flash://system/images/image_v12-03.ros

Version: 12.03
MD5 Digest: 63FA000012857D8855AABEA7451265456
Date: 04-Jul-2014
Time: 15:03:07
Inactive after reboot

Inactive-image: flash://system/images/image_v14-04.ros

Version: 14.01
MD5 Digest: 23FA000012857D8855AABC7577AB5562
Date: 24-Jul-2014
Time: 23:11:17
Active after reboot

Example 8. The following example gives an example of the command output after applying the boot
system tftp://1.1.1.1/image_v14-01.ros command and the boot system inactive-image command:

switchxxxxxx# show bootvar
Active-image: flash://system/images/image_v12-03.ros

Version: 12.03
MD5 Digest: 63FA000012857D8855AABEA7451265456
Date: 04-Jul-2014
Time: 15:03:07

Inactive-image: flash://system/images/image_v12-01.ros

Version: 12.01
MD5 Digest: 3FA000012857D8855AABC7577AB8999
Date: 04-Feb-2001
Time: 11:13:17

switchxxxxxx# boot system tftp://1.1.1.1/image_v14-01.ros
switchxxxxxx# show bootvar
Active-image: flash://system/images/image_v12-03.ros

Version: 12.03
MD5 Digest: 63FA000012857D8855AABEA7451265456
Date: 04-Jul-2014
Time: 15:03:07
Inactive after reboot

Inactive-image: flash://system/images/image_v14-01.ros

Version: 14.01
MD5 Digest: 23FA000012857D8855AABC7577AB5562
Date: 24-Jul-2014
Time: 23:11:17
Active after reboot

switchxxxxxx# boot system inactive-image
switchxxxxxx# show bootvar
Active-image: flash://system/images/image_v12-03.ros

Version: 12.03
MD5 Digest: 63FA000012857D8855AABEA7451265456
Date: 04-Jul-2014
Time: 15:03:07

Inactive-image: flash://system/images/image_v14-01.ros

Version: 14.01
MD5 Digest: 23FA000012857D8855AABC7577AB5562
Date: 24-Jul-2014
Time: 23:11:17

Cisco Business Switches 350 Series CLI Guide

483

show mirror-configuration service

File System Commands

show mirror-configuration service

To display the mirror-configuration service status, use the show mirror-configuration service command in
User EXEC mode.

Syntax

show mirror-configuration service

Command Mode

User EXEC mode

Example

The following example displays the status of the mirror-configuration service

switchxxxxxx# show mirror-configuration service
Mirror-configuration service is enabled

Cisco Business Switches 350 Series CLI Guide

484

File System Commands

show reload

show reload

To display the reload status on the switch, use the show reload command in User EXEC mode.

Syntax

show reload

Parameters

This command has no arguments or keywords.

Command Mode

User EXEC mode

User Guidelines

You can use the show reload command to display a pending image reload.

Example 1. The following example displays information when scheduled reload has been configured:

switchxxxxxx> show reload
Image reload scheduled for 00:00:00 UTC Sat April 20 (in 3 hours and 12 minutes)

Example 2. The following example displays information when scheduled reload has not been
configured:

switchxxxxxx> show reload
No scheduled reload

Cisco Business Switches 350 Series CLI Guide

485

show running-config

File System Commands

show running-config

To display the contents of the currently running configuration file, use the show running-config command
in Privileged EXEC mode.

show running-config [interface interface-id-list | detailed | brief]

Parameters

• interface interface-id-list—Specifies a list of interface IDs. The interface IDs can be one of the following

types: Ethernet port, port-channel or VLAN.

• detailed—Displays configuration with SSL and SSH keys and certificates.

• brief—Displays configuration without SSL and SSH keys and certificates.

Default Configuration

All interfaces are displayed. If the detailed or brief keyword is not specified, the brief keyword is applied.

Command Mode

Privileged EXEC mode

Example

The following example displays the running configuration file contents.

switchxxxxxx# show running-config
config-file-header
AA307-02
v1.2.5.76 / R750_NIK_1_2_584_002
CLI v1.0
file SSD indicator encrypted
@
ssd-control-start
ssd config
ssd file passphrase control unrestricted
no ssd file integrity control
ssd-control-end cb0a3fdb1f3a1af4e4430033719968c0
!
unit-type unit 1 network te uplink none
unit-type unit 2 network te uplink none
unit-type unit 3 network te uplink none
unit-type unit 4 network te uplink none
unit-type-control-end
!
no spanning-tree
interface range gi1/0/1-4
speed 1000
exit
no lldp run
interface vlan 1
ip address 1.1.1.1 255.0.0.0
exit
line console
exec-timeout 0

Cisco Business Switches 350 Series CLI Guide

486

File System Commands

show running-config

exit
switchxxxxxx#

Cisco Business Switches 350 Series CLI Guide

487

show startup-config

File System Commands

show startup-config

To display the Startup Configuration file contents, use the show startup-config command in Privileged EXEC
mode.

Syntax

show startup-config [interface interface-id-list]

Parameters

• interface interface-id-list—Specifies a list of interface IDs. The interface IDs can be one of the following

types: Ethernet port, port-channel or VLAN.

Command Mode

Privileged EXEC mode

Example

The following example displays the startup configuration file contents.

switchxxxxxx# show startup-config
config-file-header
AA307-02
v1.2.5.76 / R750_NIK_1_2_584_002
CLI v1.0
file SSD indicator encrypted
@
ssd-control-start
ssd config
ssd file passphrase control unrestricted
no ssd file integrity control
ssd-control-end cb0a3fdb1f3a1af4e4430033719968c0
!
no spanning-tree
interface range gi1/0/1-4
speed 1000
exit
no lldp run
interface vlan 1
ip address 1.1.1.1 255.0.0.0
exit
line console
exec-timeout 0
exit
switchxxxxxx#

Cisco Business Switches 350 Series CLI Guide

488

File System Commands

write

write

To save the running configuration to the startup configuration file, use the write command in Privileged EXEC
mode.

Syntax

write

write memory

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

User Guidelines

Use the write command or the write memory command to save the Running Configuration file into the
Startup Configuration file.

Examples

The following example shows how to overwrite the startup-config file with the running-config file with the
write command.

switchxxxxxx# write
Overwrite file [startup-config] ?[Yes/press any key for no]....15-Sep-2010 11:27
:48 %COPY-I-FILECPY: Files Copy - source URL running-config destination URL
flash://startup-config
15-Sep-2010 11:27:50 %COPY-N-TRAP: The copy operation was completed successfully
Copy succeeded

Cisco Business Switches 350 Series CLI Guide

489

write

File System Commands

Cisco Business Switches 350 Series CLI Guide

490

GVRP Commands

This chapter contains the following sections:

• clear gvrp statistics, on page 492
• gvrp enable (Global), on page 493
• gvrp enable (Interface), on page 494
• gvrp registration-forbid, on page 495
• gvrp vlan-creation-forbid, on page 496
• show gvrp configuration, on page 497
• show gvrp error-statistics, on page 498
• show gvrp statistics, on page 499

Cisco Business Switches 350 Series CLI Guide

491

clear gvrp statistics

GVRP Commands

clear gvrp statistics

To clear GVRP statistical information for all interfaces or for a specific interface, use the clear gvrp statistics
Privileged EXEC mode command.

Syntax

clear gvrp statistics [interface-id]

Parameters

Interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types:
Ethernet port or Port-channel.

Default Configuration

All GVRP statistics are cleared.

Command Mode

Privileged EXEC mode

Example

The following example clears all GVRP statistical information on gi1/0/4.

switchxxxxxx# clear gvrp statistics gi1/0/4

Cisco Business Switches 350 Series CLI Guide

492

GVRP Commands

gvrp enable (Global)

gvrp enable (Global)

To enable the Generic Attribute Registration Protocol (GARP) VLAN Registration Protocol (GVRP) globally,
use the gvrp enable Global Configuration mode command. To disable GVRP on the device, use the no form
of this command.

Syntax

gvrp enable

no gvrp enable

Parameters

This command has no arguments or keywords.

Default Configuration

GVRP is globally disabled.

Command Mode

Global Configuration mode

Example

The following example enables GVRP globally on the device.

switchxxxxxx(config)# gvrp enable

Cisco Business Switches 350 Series CLI Guide

493

gvrp enable (Interface)

GVRP Commands

gvrp enable (Interface)

To enable GVRP on an interface, use the gvrp enable Interface (Ethernet, Port Channel) Configuration mode
command. To disable GVRP on an interface, use the no form of this command.

Syntax

gvrp enable

no gvrp enable

Parameters

This command has no arguments or keywords.

Default Configuration

GVRP is disabled on all interfaces.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

An access port does not dynamically join a VLAN because it is always a member of a single VLAN only.
Membership in an untagged VLAN is propagated in the same way as in a tagged VLAN. That is, the PVID
must be manually defined as the untagged VLAN ID.

Example

The following example enables GVRP on gi1/0/4.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# gvrp enable

Cisco Business Switches 350 Series CLI Guide

494

GVRP Commands

gvrp registration-forbid

gvrp registration-forbid

To deregister all dynamic VLANs on a port and prevent VLAN creation or registration on the port, use the
gvrp registration-forbid Interface Configuration mode command. To allow dynamic registration of VLANs
on a port, use the no form of this command.

Syntax

gvrp registration-forbid

no gvrp registration-forbid

Parameters

This command has no arguments or keywords.

Default Configuration

Dynamic registration of VLANs on the port is allowed.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example

The following example forbids dynamic registration of VLANs on gi1/0/2.

switchxxxxxx(config-if)# interface gi1/0/2
switchxxxxxx(config-if)# gvrp registration-forbid

Cisco Business Switches 350 Series CLI Guide

495

gvrp vlan-creation-forbid

GVRP Commands

gvrp vlan-creation-forbid

To disable dynamic VLAN creation or modification, use the gvrp vlan-creation-forbid Interface Configuration
mode command. To enable dynamic VLAN creation or modification, use the no form of this command.

Syntax

gvrp vlan-creation-forbid

no gvrp vlan-creation-forbid

Parameters

This command has no arguments or keywords.

Default Configuration

Enabled.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example

The following example disables dynamic VLAN creation on gi1/0/3.

switchxxxxxx(config-if)# interface gi1/0/3
switchxxxxxx(config-if)# gvrp vlan-creation-forbid

Cisco Business Switches 350 Series CLI Guide

496

GVRP Commands

show gvrp configuration

show gvrp configuration

To display GVRP configuration information, including timer values, whether GVRP and dynamic VLAN
creation are enabled, and which ports are running GVRP, use the show gvrp configuration EXEC mode
command.

Syntax

show gvrp configuration [interface-id | detailed]

Parameters

• interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types:

Ethernet port or port-channel.

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Default Configuration

All GVRP statistics are displayed for all interfaces. If detailed is not used, only present ports are displayed.

Command Mode

User EXEC mode

Example

The following example displays GVRP configuration.

switchxxxxxx# show gvrp configuration
GVRP Feature is currently Enabled on the device.
Maximum VLANs: 4094
Port(s) GVRP-Status Regist-

----------- --------

ration

----
gi1/0/1
gi1/0/2

Enabled
Enabled

Forbidden
Normal

-------------
Disabled
Enabled

Dynamic
VLAN Creation

Timers(ms)
Join

----

Leave
-----

Leave All
----------

600
1200

200
400

10000
20000

Cisco Business Switches 350 Series CLI Guide

497

show gvrp error-statistics

GVRP Commands

show gvrp error-statistics

Use the show gvrp error-statistics EXEC mode command to display GVRP error statistics for all interfaces
or for a specific interface.

Syntax

show gvrp error-statistics [interface-id]

Parameters

interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types: Ethernet
port or Port-channel.

Default Configuration

All GVRP error statistics are displayed.

Command Mode

User EXEC mode

Example

The following example displays GVRP error statistics.

switchxxxxxx# show gvrp error-statistics
GVRP Error Statistics:
----------------------
Legend:

INVPROT : Invalid Protocol Id
INVATYP : Invalid Attribute Type INVALEN : Invalid Attribute Length
INVAVAL : Invalid Attribute Value INVEVENT: Invalid Event
Port

INVPROT INVATYP INVAVAL INVALEN INVEVENT
-------- ------- ------- ------- ------- --------

gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4

0
0
0
0

0
0
0
0

0
0
0
0

0
0
0
0

0
0
0
0

Cisco Business Switches 350 Series CLI Guide

498

GVRP Commands

show gvrp statistics

show gvrp statistics

To display GVRP statistics for all interfaces or for a specific interface, use the show gvrp statistics EXEC
mode command.

Syntax

show gvrp statistics [interface-id]

Parameters

interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types: Ethernet
port or Port-channel.

Default Configuration

All GVRP statistics are displayed.

Command Mode

User EXEC mode

Example

The following example displays GVRP statistical information.

switchxxxxxx# show gvrp statistics

GVRP statistics:

----------------
Legend:

rJE :

Join Empty Received

rJIn: Join In Received

rEmp:

Empty Received

rLIn: Leave In Received

rLE :

sJE :

Leave Empty Received

rLA : Leave All Received

Join Empty Sent

sJIn: Join In Sent

sEmp:

Empty Sent

sLIn: Leave In Sent

sLE :

Leave Empty Sent

sLA : Leave All Sent

Port

-----

gi1/0/1

gi1/0/2

gi1/0/3

gi1/0/4

rJE

----

0

0

0

0

rJIn

rEmp

rLIn

rLE

rLA

----

----

----

----

----

0

0

0

0

0

0

0

0

0

0

0

0

0

0

0

0

0

0

0

0

sJE

----

0

0

0

0

sJIn

sEmp

sLIn

sLE

sLA

----

----

----

----

---

0

0

0

0

0

0

0

0

0

0

0

0

0

0

0

0

0

0

0

0

Cisco Business Switches 350 Series CLI Guide

499

show gvrp statistics

GVRP Commands

Cisco Business Switches 350 Series CLI Guide

500

Green Ethernet Commands

This chapter contains the following sections:

• green-ethernet energy-detect (global), on page 502
• green-ethernet energy-detect (interface), on page 503
• green-ethernet short-reach (global), on page 504
• green-ethernet short-reach (interface), on page 505
• green-ethernet power-meter reset, on page 506
• show green-ethernet, on page 507

Cisco Business Switches 350 Series CLI Guide

501

green-ethernet energy-detect (global)

Green Ethernet Commands

green-ethernet energy-detect (global)

To enable Green-Ethernet Energy-Detect mode globally, use the green-ethernet energy-detect Global
Configuration mode command. To disable this feature, use the no form of this command.

Syntax

green-ethernet energy-detect

no green-ethernet energy-detect

Parameters

This command has no arguments or keywords.

Default Configuration

Disabled.

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# green-ethernet energy-detect

Cisco Business Switches 350 Series CLI Guide

502

Green Ethernet Commands

green-ethernet energy-detect (interface)

green-ethernet energy-detect (interface)

Use the green-ethernet energy-detect Interface configuration mode command to enable Green
Ethernet-Energy-Detect mode on a port. Use the no form of this command, to disable it on a port.

Syntax

green-ethernet energy-detect

no green-ethernet energy-detect

Parameters

This command has no arguments or keywords.

Default Configuration

Disabled.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

Energy-Detect only works on copper ports. When a port is enabled for auto selection, copper/fiber
Energy-Detect cannot work.

It takes the PHY ~5 seconds to fall into sleep mode when the link is lost after normal operation.

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# green-ethernet energy-detect

Cisco Business Switches 350 Series CLI Guide

503

green-ethernet short-reach (global)

Green Ethernet Commands

green-ethernet short-reach (global)

Use the green-ethernet short-reach Global Configuration mode command to enable Green-Ethernet
Short-Reach mode globally. Use the no form of this command to disabled it.

Syntax

green-ethernet short-reach

no green-ethernet short-reach

Parameters

This command has no arguments or keywords.

Default Configuration

Disabled.

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# green-ethernet short-reach

Cisco Business Switches 350 Series CLI Guide

504

Green Ethernet Commands

green-ethernet short-reach (interface)

green-ethernet short-reach (interface)

Use the green-ethernet short-reach Interface Configuration mode command to enable green-ethernet
short-reach mode on a port. Use the no form of this command to disable it on a port.

Syntax

green-ethernet short-reach

no green-ethernet short-reach

Parameters

This command has no arguments or keywords.

Default Configuration

Disabled.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

The VCT length check can be performed only on a copper port operating at a speed of 1000 Mbps. If the
media is not copper or the link speed is not 1000, Mbps Short-Reach mode is not applied.

When the interface is set to enhanced mode, after the VCT length check has completed and set the power to
low, an active monitoring for errors is done continuously. In the case of errors crossing a certain threshold,
the PHY will be reverted to long reach.

Note that EEE cannot be enabled if the Short-Reach mode is enabled.

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# green-ethernet short-reach

Cisco Business Switches 350 Series CLI Guide

505

green-ethernet power-meter reset

Green Ethernet Commands

green-ethernet power-meter reset

Use the green-ethernet power meter reset Privileged EXEC mode command to reset the power save meter.

Syntax

green-ethernet power-meter reset

Parameters

This command has no arguments or keywords.

Default Configuration

None

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# green-ethernet power-meter reset

Cisco Business Switches 350 Series CLI Guide

506

Green Ethernet Commands

show green-ethernet

show green-ethernet

To display green-ethernet configuration and information, use the show green-ethernet Privileged EXEC
mode command.

Syntax

show green-ethernet [interface-id | detailed ]

Parameters

• interface-id—(Optional) Specifies an Ethernet port

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Default Configuration

Display for all ports. If detailed is not used, only present ports are displayed.

Command Mode

Privileged EXEC mode

User Guidelines

The power savings displayed is relevant to the power saved by:

• Port LEDs

• Energy detect

• Short reach

The EEE power saving is dynamic by nature since it is based on port utilization and is therefore not taken
into consideration.

The following describes the reasons for non-operation displayed by this command.

If there are a several reasons, then only the highest priority reason is displayed.

Energy-Detect Non-Operational Reasons

Priority

Reason

Description

1

2

3

NP

LT

LU

Port is not present

Link Type is not supported (fiber, auto media select)

Port Link is up – NA

Cisco Business Switches 350 Series CLI Guide

507

show green-ethernet

Green Ethernet Commands

Short-Reach Non-Operational Reasons

Priority

Reason

Description

NP

LT

LS

LL

LD

1

2

3

4

6

Example

Port is not present

Link Type is not supported (fiber)

Link Speed Is not Supported (10mbps,100mbps)

Link Length received from VCT test exceeds
threshold

Port Link is Down – NA

switchxxxxxx# show green-ethernet
Energy-Detect mode: Enabled
Short-Reach mode: Disabled
Disable Port LEDs mode: Enabled
Power Savings: 24% (1.08W out of maximum 4.33W)
Cumulative Energy Saved: 33 [Watt*Hour]
* Estimated Annual Power saving: 300 [Watt*Hour]
* Annual estimate is based on the saving during the previous week
NA – information for previous week is not available
Short-Reach cable length threshold: 50m
Port

VCT Cable
Length
---- ----- ---- ------- ----- ----- ---- ------- ------
gi1/0/1
gi1/0/2
gi1/0/3

off off
on
off
off off

on
off LU
off LU

Admin Force Oper Reason

Admin Oper Reason

Energy-Detect

Short-Reach

off
on
off

on
on
on

< 50

Cisco Business Switches 350 Series CLI Guide

508

IGMP Commands

This chapter contains the following sections:

• clear ip igmp counters, on page 510
• ip igmp last-member-query-count, on page 511
• ip igmp last-member-query-interval, on page 512
• ip igmp query-interval, on page 513
• ip igmp query-max-response-time, on page 514
• ip igmp robustness, on page 515
• ip igmp version, on page 516
• show ip igmp counters, on page 517
• show ip igmp counters, on page 518
• show ip igmp groups, on page 519
• show ip igmp groups summary, on page 521
• show ip igmp interface, on page 522

Cisco Business Switches 350 Series CLI Guide

509

clear ip igmp counters

IGMP Commands

clear ip igmp counters

To clear the Internet Group Management Protocol (IGMP) interface counters, use the clear ip igmp counters
command in Privileged EXEC mode.

Syntax

clear ip igmp counters [interface-id]

Parameters

• interface-id—(Optional) Interface Identifier

Command Mode

Privileged EXEC mode

User Guidelines

Use the clear ip igmp counters command to clear the IGMP counters, which keep track of the number of
joins and leaves received. If you omit the optional interface-id argument, the clear ip igmp counters command
clears the counters on all interfaces.

Example

The following example clears the counters for VLAN 100:

switchxxxxxx# clear ip igmp counters vlan 100

Cisco Business Switches 350 Series CLI Guide

510

IGMP Commands

ip igmp last-member-query-count

ip igmp last-member-query-count

To configure the Internet Group Management Protocol (IGMP) last member query counter, use the ip igmp
last-member-query-count command in Interface Configuration mode. To restore the default value, use the
no form of this command.

Syntax

ip igmp last-member-query-count count

no ip igmp last-member-query-count

Parameters

count—The number of times that group- or group-source-specific queries are sent upon receipt of a message
indicating a leave. (Range: 1–7)

Default Configuration

A value of IGMP Robustness variable.

Command Mode

Interface Configuration mode

User Guidelines

Use the ip igmp robustness command to change the IGMP last member query counter.

Example

The following example changes a value of the IGMP last member query counter to 3:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ip igmp last-member-query-count 3
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

511

ip igmp last-member-query-interval

IGMP Commands

ip igmp last-member-query-interval

To configure the Internet Group Management Protocol (IGMP) last member query interval, use the ip igmp
last-member-query-interval command in Interface Configuration mode. To restore the default IGMP query
interval, use the no form of this command.

Syntax

ip igmp last-member-query-interval milliseconds

no ip igmp last-member-query-interval

Parameters

• milliseconds—Interval, in milliseconds, at which IGMP group-specific host query messages are sent on

the interface. (Range: 100–25500).

Default Configuration

The default IGMP last member query interval is 1000 milliseconds.

Command Mode

Interface Configuration mode

User Guidelines

Use the ip igmp last-member-query-interval command to configure the IGMP last member query interval
on an interface.

Example

The following example shows how to increase the the IGMP last member query interval to 1500 milliseconds:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ip igmp last-member-query-interval 1500
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

512

IGMP Commands

ip igmp query-interval

ip igmp query-interval

To configure the frequency at which the IGMP querier sends Internet Group Management Protocol (IGMP)
host-query messages from an interface, use the ip igmp query-interval command in Interface Configuration
mode. To restore the default IGMP query interval, use the no form of this command.

Syntax

ip igmp query-interval seconds

no ip igmp query-interval

Parameters

• seconds—Frequency, in seconds, at which the switch sends IGMP query messages from the interface.

The range is from 30 to 18000.

Default Configuration

The default IGMP query interval is 125 seconds.

Command Mode

Interface Configuration mode

User Guidelines

Use the ip igmp query-interval command to configure the frequency at which the IGMP querier sends IGMP
host-query messages from an interface. The IGMP querier sends query-host messages to discover which
multicast groups have members on the attached networks of the router.

The query interval must be bigger than the maximum query response time.

Example

The following example shows how to increase the frequency at which the IGMP querier sends IGMP host-query
messages to 180 seconds:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ip igmp query-interval 180
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

513

ip igmp query-max-response-time

IGMP Commands

ip igmp query-max-response-time

To configure the maximum response time advertised in Internet Group Management Protocol (IGMP) queries,
use the ip igmp query-max-response-time command in Interface Configuration mode. To restore the default
value, use the no form of this command.

Syntax

ip igmp query-max-response-time seconds

no ip igmp query-max-response-time

Parameters

• seconds—Maximum response time, in seconds, advertised in IGMP queries. (Range: 5–20)

Default Configuration

10 seconds.

Command Mode

Interface Configuration mode

User Guidelines

This command controls the period during which the responder can respond to an IGMP query message before
the router deletes the group.

This command controls how much time the hosts have to answer an IGMP query message before the router
deletes their group. Configuring a value of fewer than 10 seconds enables the router to prune groups faster.

The maximum query response time must be less than the query interval.

Note. If the hosts do not respond fast enough, they might be pruned inadvertently. Therefore, the hosts must
know to respond faster than 10 seconds (or the value you configure).

Example

The following example configures a maximum response time of 8 seconds:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ip igmp query-max-response-time 8
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

514

IGMP Commands

ip igmp robustness

ip igmp robustness

To configure the Internet Group Management Protocol (IGMP) robustness variable, use the ip igmp robustness
command in Interface Configuration mode. To restore the default value, use the no form of this command.

Syntax

ip igmp robustness count

no ip igmp robustness

Parameters

• count—The number of expected packet loss on a link. Parameter range. (Range: 1–7).

Default Configuration

The default value is 2.

Command Mode

Interface Configuration mode

User Guidelines

Use the ip igmp robustness command to change the IGMP robustness variable.

Example

The following example changes a value of the IGMP robustness variable to 3:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ip igmp robustness 3
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

515

ip igmp version

ip igmp version

IGMP Commands

To configure which version of Internet Group Management Protocol (IGMP) the router uses, use the ip igmp
version command in Interface Configuration mode. To restore the default value, use the no form of this
command.

Syntax

ip igmp version {1 | 2 | 3}

no ip igmp version

Parameters

• 1—IGMP Version 1.

• 2—IGMP Version 2.

• 3—IGMP Version 3.

Default Configuration

3

Command Mode

Interface Configuration mode

User Guidelines

Use the commnad to change the default version of IGMP>

Example

The following example configures the router to use IGMP Version 2:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ip igmp version 2
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

516

IGMP Commands

show ip igmp counters

show ip igmp counters

To display the Internet Group Management Protocol (IGMP) traffic counters, use the show ip igmp counters
command in User EXEC mode.

Syntax

show ip igmp counters [interface-id]

Parameters

• interface-id—(Optional) Interface Identifier.

Command Mode

User EXEC mode

User Guidelines

Use the show ip igmp counters command to check if the expected number of IGMP protocol messages have
been received and sent.

If you omit the optional interface-id argument, the show ip igmp counters command displays counters of all
interfaces.

Example

The following example displays the IGMP protocol messages received and sent:

switchxxxxxx# show ip igmp counters vlan 100
VLAN 100
Elapsed time since counters cleared:00:00:21
Failed received Joins: 0
Total IGMPv1 received messages: 0
Total IGMPv2 received messages: 10
Total IGMPv3 received messages: 0
Total invalid received messages: 0
General Sent Queries: 0
Specific Sent Queries: 0

Cisco Business Switches 350 Series CLI Guide

517

show ip igmp counters

IGMP Commands

show ip igmp counters

To display the Internet Group Management Protocol (IGMP) traffic counters, use the show ip igmp counters
command in User EXEC mode.

Syntax

show ip igmp counters [interface-id]

Parameters

• interface-id—(Optional) Interface Identifier.

Command Mode

User EXEC mode

User Guidelines

Use the show ip igmp counters command to check if the expected number of IGMP protocol messages have
been received and sent.

If you omit the optional interface-id argument, the show ip igmp counters command displays counters of all
interfaces.

Example

The following example displays the IGMP protocol messages received and sent:

switchxxxxxx# show ip igmp counters vlan 100
VLAN 100
Elapsed time since counters cleared:00:00:21
Failed received Joins: 0
Total IGMPv1 received messages: 0
Total IGMPv2 received messages: 10
Total IGMPv3 received messages: 0
Total invalid received messages: 0
General Sent Queries: 0
Specific Sent Queries: 0

Cisco Business Switches 350 Series CLI Guide

518

IGMP Commands

show ip igmp groups

show ip igmp groups

To display the multicast groups that are directly connected to the router and that were learned through Internet
Group Management Protocol (IGMP), use the show ip igmp groups command in User EXEC mode.

Syntax

show ip igmp groups [group-name | group-address | interface-id] [detail]

Parameters

• group-name | group-address—(Optional) IP address or name of the multicast group.

• interface-id—(Optional) Interface identifier.

• detail—(Optional) Displays detailed information about individual sources.

Command Mode

User EXEC mode

User Guidelines

Use the show ip igmp groups [detail] command to display all directly connected groups.

Use the show ip igmp groups [group-name | group-address] [detail] command to display one given directly
connected group.

Use the show ip igmp groups interface-id [detail] command to display all groups directly connected to the
given interface.

Example 1. The following is sample output from the show ip igmp groups command. It shows all
of the groups joined by VLAN 100:

switchxxxxxx# show ip igmp groups vlan 100

IGMP Connected Group Membership

Expires: never - switch itself has joined the group
Group Address Interface Expires
224.1.1.1 VLAN 100 00:01:30
224.10.12.79 VLAN 100 never
225.1.1.1 VLAN 100 00:00:27

Example 2. The following is sample output from the show ip igmp groups command using the
detail keyword:

switchxxxxxx# show ip igmp groups detail
Expires: zero value - INCLUDE state; non-zero value - EXCLUDE state
Interface: VLAN 100
Group: 225.1.1.1
Router mode: INCLUDE
Last reporter: 10.0.119.133
Group Timer Expires: 00:20:11
Group source list:
Source Address Expires
20.1.1.1 00:04:08
120.1.1.1 00:02:01

Cisco Business Switches 350 Series CLI Guide

519

show ip igmp groups

IGMP Commands

Group: 226.1.1.2
Router mode: EXCLUDE
Last reporter: 100.1.12.130
Group Timer Expiry: 00:22:12
Exclude Mode Expiry (Filter) Timer: 00:10:11
Group source list:
Source Address Expires
2.2.2.1 00:04:08
192.168.1.1 00:04:08
12.1.1.10 00:00:00
40.3.4.2 00:00:00

Cisco Business Switches 350 Series CLI Guide

520

IGMP Commands

show ip igmp groups summary

show ip igmp groups summary

To display the number of (*, G) and (S, G) membership reports present in the Internet Group Management
Protocol (IGMP) cache, use the show ip igmp groups summary command in User EXEC mode.

Syntax

show ip igmp groups summary

Parameters

This command has no arguments or keywords.

Command Mode

User EXEC mode

User Guidelines

The show ip igmp groups summary command displays the number of directly connected multicast groups.

Example

The following is sample output from the show ip igmp groups summary command:

switchxxxxxx# show ip igmp groups summary
GMP Route Summary
No. of (*,G) routes = 5
No. of (S,G) routes = 0

Field Descriptions:
No. of (*,G) routes = 5—Displays the number of groups present in the IGMP cache.
No. of (S,G) routes = 0—Displays the number of include and exclude mode sources present in

the IGMP cache.

Cisco Business Switches 350 Series CLI Guide

521

show ip igmp interface

IGMP Commands

show ip igmp interface

To display multicast-related information about an interface, use the show ip igmp interface command in
User EXEC mode.

Syntax

show ip igmp interface [interface-id]

Parameters

• interface-id—(Optional) Interface identifier.

Command Mode

User EXEC mode

User Guidelines

If you omit the optional interface-id argument, the show ip igmp interface command displays information
about all interfaces.

Example

The following is sample output from the show ip igmp interface command for Ethernet interface 2/1/1:

switchxxxxxx# show ip igmp interface vlan 100
VLAN 100 is up

Administrative IGMP Querier IP address is 1.1.1.1
Operational IGMP Querier IP address is 1.1.1.1
Current IGMP version is 3
Administrative IGMP robustness variable is 2 seconds
Operational IGMP robustness variable is 2 seconds
Administrative IGMP query interval is 125 seconds
Operational IGMP query interval is 125 seconds
Administrative IGMP max query response time is 10 seconds
Operational IGMP max query response time is 10 seconds
Administrative Last member query response interval is 1000 milliseconds
Operational Last member query response interval is 1000 milliseconds

Cisco Business Switches 350 Series CLI Guide

522

IGMP Proxy Commands

This chapter contains the following sections:

• ip igmp-proxy, on page 524
• ip igmp-proxy downstream protected, on page 525
• ip igmp-proxy downstream protected interface, on page 526
• ip igmp-proxy ssm, on page 527
• show ip igmp-proxy interface, on page 528

Cisco Business Switches 350 Series CLI Guide

523

ip igmp-proxy

ip igmp-proxy

IGMP Proxy Commands

To add downstream interfaces to an IGMP proxy tree, use the ip igmp-proxy command in Interface
Configuration mode. To remove downstream from interfaces to an IGMP proxy tree, use the no form of this
command.

Syntax

ip igmp-proxy upstream-interface-id

no ip igmp-proxy

Parameters

• upstream-interface-id—Upstream Interface identifier.

Default Configuration

The protocol is disabled on the interface.

Command Mode

Interface Configuration mode

User Guidelines

Use the ip igmp-proxy command to add downstream interfaces to an IGMP proxy tree. If the proxy tree does
not exist it is created.

Use the no format of the command to remove the downstream interface. When the last downstream interface
is removed from the proxy tree it is deleted too.

Example 1. The following example adds a downstream interface to an IGMP Proxy process with
vlan 200 as its Upstream interface:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ip igmp-proxy vlan 200
switchxxxxxx(config-if)# exit

Example 2. The following example adds a range of downstream interfaces to an IGMP Proxy process
with vlan 200 as its Upstream interface:

switchxxxxxx(config)# interface range vlan 100-105
switchxxxxxx(config-if)# ip igmp-proxy vlan 200
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

524

IGMP Proxy Commands

ip igmp-proxy downstream protected

ip igmp-proxy downstream protected

To disable forwarding of IP Multicast traffic from downstream interfaces, use the ip igmp-proxy downstream
protected command in Global Configuration mode. To allow forwarding from downstream interfaces, use
the no form of this command.

Syntax

ip igmp-proxy downstream protected

no ip igmp-proxy downstream protected

Parameters

This command has no arguments or keywords.

Default Configuration

Forwarding from downstream interfaces is allowed.

Command Mode

Global Configuration mode

User Guidelines

Use the ip igmp-proxy downstream protected command to block forwarding from downstream interfaces.

Example

The following example prohibits forwarding from downstream interfaces:

switchxxxxxx(config)# ip igmp-proxy downstream protected

Cisco Business Switches 350 Series CLI Guide

525

ip igmp-proxy downstream protected interface

IGMP Proxy Commands

ip igmp-proxy downstream protected interface

To disable or enable forwarding of IP Multicast traffic from a given downstream interface, use the ip
igmp-proxy downstream protected interface command in Interface Configuration mode. To return to
default, use the no form of this command.

Syntax

ip igmp-proxy downstream protected interface {enabled | disabled}

no ip igmp-proxy downstream protected interface

Parameters

• enabled—Downstream interface protection on the interface is enabled. IPv4 Multicast traffic arriving

on the interface will not be forwarded.

• disabled—Downstream interface protection on the interface is disabled. IPv4 Multicast traffic arriving

on the interface will be forwarded.

Default Configuration

Global downstream protection configuration (see the ip igmp-proxy downstream protected command)

Command Mode

Interface Configuration mode

User Guidelines

Use the ip igmp-proxy downstream protected interface disabled command to block forwarding from the
given downstream interface.

Use the ip igmp-proxy downstream protected interface enabled command to allow forwarding from the
given downstream interface.

The command can be configured only for a downstream interface. When a downstream interface is removed
from the IGMP Proxy tree the configuration is removed too.

Example

The following example prohibits forwarding from downstream interface vlan 100:

switchxxxxxx(config)# interface vlan100
switchxxxxxx(config-if)# ip igmp-proxy downstream protected interface enabled
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

526

IGMP Proxy Commands

ip igmp-proxy ssm

ip igmp-proxy ssm

To define the Source Specific Multicast (SSM) range of IP Multicast addresses, use the ip igmp-proxy ssm
command in Global Configuration mode. To disable the SSM range, use the no form of this command.

Syntax

ip igmp-proxy ssm {default | range access-list}

no ip igmp-proxy ssm

Parameters

• default—Defines the SSM range access list to 232.0.0.0/8 (see rfc4607).

• range access-list—Specifies the standard IP access list name defining the SSM range.

Default Configuration

The command is disabled.

Command Mode

Global Configuration mode

User Guidelines

A new ip igmp-proxy ssm command overrides the previous ip igmp-proxy ssm command.

Use the no ip igmp-proxy ssm command to remove all defined ranges.

Example

The following example shows how to configure SSM service for the default IP address range and the IP
address ranges defined by access list list1:

switchxxxxxx(config)# ip access-list list1 permit 224.2.151.0/24
switchxxxxxx(config)# ip access-list list1 deny 224.2.152.141
switchxxxxxx(config)# ip access-list list1 permit 224.2.152.0/24
switchxxxxxx(config)# ip igmp-proxy ssm range list1

Cisco Business Switches 350 Series CLI Guide

527

show ip igmp-proxy interface

IGMP Proxy Commands

show ip igmp-proxy interface

To display information about interfaces configured for IGMP Proxy, use the show ip igmp-proxy interface
command in User EXEC mode or Privileged EXEC mode.

Syntax

show ip igmp-proxy interface [interface-id]

Parameters

• interface-id—(Optional) Display IGMP Proxy information about the interface.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

The show ip igmp-proxy interface command is used to display all interfaces where the IGMP Proxy is
enabled or to display the IGMP Proxy configuration for a given interface.

Example 1. The following example displays IGMP Proxy status on all interfaces where the IGMP
Proxy is enabled:

switchxxxxxx# show ip igmp-proxy interface

* - the switch is the Querier on the interface

IP Forwarding is enabled
IP Multicast Routing is enabled
IGMP Proxy is enabled
Global Downdtream interfaces protection is disabled
SSM Access List Name:list1
Interface Type

Interface Protection

vlan 100 upstream
*vlan 102 downstream
*vlan 110 downstream
vlan 113 downstream

enabled
default
disabled

Example 2. The following is sample output from the show ip igmp-proxy interface command for
given upstream interface:

switchxxxxxx# show ip igmp-proxy interface vlan 100

* - the switch is the Querier on the interface

IP Forwarding is enabled
IP Multicast Routing is enabled
IGMP Proxy is enabled
Global Downdtream interfaces protection is disabled
SSM Access List Name:
IP Multicast Tarffic Discarding from Downdtream interfaces is disabled
vlan 100 is a Upstream interface
Downstream interfaces:

*vlan 102, *vlan 110, vlan 113

Cisco Business Switches 350 Series CLI Guide

528

IGMP Proxy Commands

show ip igmp-proxy interface

Example 3. The following is sample output from the show ip igmp-proxy interface command for
given downstream interface:

switchxxxxxx# show ip igmp-proxy interface vlan 102
IP Forwarding is enabled
IP Multicast Routing is enabled
IGMP Proxy is enabled
Global Downdtream interfaces protection is disabled
vlan 102 is a Downstream interface
The switch is the Querier on vlan 102
Downsteam Interface protection is enabled
SSM Access List Name: default
Upstream interface: vlan 100

Example 4. The following is sample output from the show ip igmp-proxy interface command for
an interface on which IGMP Proxy is disabled:

switchxxxxxx# show ip igmp-proxy interface vlan 1
IP Forwarding is enabled
IP Multicast Routing is enabled
IGMP Proxy is disabled

Cisco Business Switches 350 Series CLI Guide

529

show ip igmp-proxy interface

IGMP Proxy Commands

Cisco Business Switches 350 Series CLI Guide

530

IGMP Snooping Commands

This chapter contains the following sections:

• ip igmp snooping (Global), on page 532
• ip igmp snooping vlan, on page 533
• ip igmp snooping vlan mrouter, on page 534
• ip igmp snooping vlan mrouter interface, on page 535
• ip igmp snooping vlan forbidden mrouter, on page 536
• ip igmp snooping vlan static, on page 537
• ip igmp snooping vlan multicast-tv, on page 538
• ip igmp snooping map cpe vlan, on page 539
• ip igmp snooping querier, on page 540
• ip igmp snooping vlan querier, on page 541
• ip igmp snooping vlan querier address, on page 542
• ip igmp snooping vlan querier election, on page 543
• ip igmp snooping vlan querier version, on page 544
• ip igmp snooping vlan immediate-leave, on page 545
• ip igmp snooping map cpe vlan, on page 546
• show ip igmp snooping groups, on page 547
• show ip igmp snooping interface, on page 548
• show ip igmp snooping mrouter, on page 549
• show ip igmp snooping multicast-tv, on page 550

Cisco Business Switches 350 Series CLI Guide

531

ip igmp snooping (Global)

IGMP Snooping Commands

ip igmp snooping (Global)

To enable Internet Group Management Protocol (IGMP) snooping, use the ip igmp snooping command in
Global Configuration mode. To return to the default, use the no form of this command.

Syntax

ip igmp snooping

no ip igmp snooping

Default Configuration

Disabled.

Command Mode

Global Configuration mode

Example

The following example enables IGMP snooping.

switchxxxxxx(config)# ip igmp snooping

Cisco Business Switches 350 Series CLI Guide

532

IGMP Snooping Commands

ip igmp snooping vlan

ip igmp snooping vlan

To enable IGMP snooping on a specific VLAN, use the ip igmp snooping vlan command in Global
Configuration mode. To return to the default, use the no form of this command.

Syntax

ip igmp snooping vlan vlan-id

no ip igmp snooping vlan vlan-id

Parameters

• vlan-id—Specifies the VLAN.

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

IGMP snooping can be enabled only on static VLANs.

IGMPv1, IGMPv2, and IGMPv3 Snooping are supported.

Example

switchxxxxxx(config)# ip igmp snooping vlan 2

Cisco Business Switches 350 Series CLI Guide

533

ip igmp snooping vlan mrouter

IGMP Snooping Commands

ip igmp snooping vlan mrouter

To enable automatic learning of Multicast router ports on a VLAN, use the ip igmp snooping vlan mrouter
command in Global Configuration mode. To remove the configuration, use the no form of this command.

Syntax

ip igmp snooping vlan vlan-id mrouter learn pim-dvmrp

no ip igmp snooping vlan vlan-id mrouter learn pim-dvmrp

Parameters

• vlan-id—Specifies the VLAN.

Default Configuration

Learning pim-dvmrp is enabled.

Command Mode

Global Configuration mode

User Guidelines

Multicast router ports are learned according to:

• Queries received on the port

• PIM/PIMv2 received on the port

• DVMRP received on the port

• MRDISC received on the port

MOSPF received on the port

You can execute the command before the VLAN is created.

Example

switchxxxxxx(config)# ip igmp snooping vlan 1 mrouter learn pim-dvmrp

Cisco Business Switches 350 Series CLI Guide

534

IGMP Snooping Commands

ip igmp snooping vlan mrouter interface

ip igmp snooping vlan mrouter interface

To define a port that is connected to a Multicast router port, use the ip igmp snooping mrouter interface
command in Global Configuration mode. To return to the default, use the no form of this command.

Syntax

ip igmp snooping vlan vlan-id mrouter interface interface-list

no ip igmp snooping vlan vlan-id mrouter interface interface-list

Parameters

• vlan-id—Specifies the VLAN.

• interface-list—Specifies the list of interfaces. The interfaces can be one of the following types: Ethernet

port or Port-channel.

Default Configuration

No ports defined

Command Mode

Global Configuration mode

User Guidelines

A port that is defined as a Multicast router port receives all IGMP packets (reports and queries) as well as all
Multicast data. You can execute the command before the VLAN is created.

Example

switchxxxxxx(config)# ip igmp snooping vlan 1 mrouter interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

535

ip igmp snooping vlan forbidden mrouter

IGMP Snooping Commands

ip igmp snooping vlan forbidden mrouter

To forbid a port from being defined as a Multicast router port by static configuration or by automatic learning,
use the ip igmp snooping vlan forbidden mrouter command in Global Configuration mode. To return to
the default, use the no form of this command.

Syntax

ip igmp snooping vlan vlan-id forbidden mrouter interface interface-list

no ip igmp snooping vlan vlan-id forbidden mrouter interface interface-list

Parameters

• vlan-id—Specifies the VLAN.

• interface-list—Specifies a list of interfaces. The interfaces can be of one of the following types: Ethernet

port or Port-channel.

Default Configuration

No ports defined.

Command Mode

Global Configuration mode

User Guidelines

A port that is a forbidden mrouter port cannot be a Multicast router port (i.e. cannot be learned dynamically
or assigned statically).

You can execute the command before the VLAN is created.

Example

switchxxxxxx(config)# ip igmp snooping vlan 1 forbidden mrouter interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

536

IGMP Snooping Commands

ip igmp snooping vlan static

ip igmp snooping vlan static

To register an IP-layer Multicast address to the bridge table, and to add static ports to the group defined by
this address, use the ip igmp snooping vlan static command in Global Configuration mode. To return to the
default, use the no form of this command.

Syntax

ip igmp snooping vlan vlan-id static ip-address [interface interface-list]

no ip igmp snooping vlan vlan-id static ip-address [interface interface-list]

Parameter

• vlan-id—Specifies the VLAN.

• ip-address—Specifies the IP Multicast address.

• interface interface-list—(Optional) Specifies a list of interfaces. The interfaces can be of one of the

following types: Ethernet port or Port-channel.

Default Configuration

No Multicast addresses are defined.

Command Mode

Global Configuration mode

User Guidelines

Static Multicast addresses can only be defined on static VLANs.

You can execute the command before the VLAN is created.

You can register an entry without specifying an interface.

Using the no command without a port-list removes the entry.

Example

switchxxxxxx(config)# ip igmp snooping vlan 1 static 239.2.2.2 interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

537

ip igmp snooping vlan multicast-tv

IGMP Snooping Commands

ip igmp snooping vlan multicast-tv

To define the Multicast IP addresses that are associated with a Multicast TV VLAN, use the ip igmp snooping
vlan multicast-tv command in Global Configuration mode. To return to the default, use the no form of this
command.

Syntax

ip igmp snooping vlan vlan-id multicast-tv first-ip-multicast-address [last-ip-multicast-address | {count
number}]

no ip igmp snooping vlan vlan-id multicast-tv first-ip-multicast-address [last-ip-multicast-address | {count
number}]

Parameters

• vlan-id—Specifies the VLAN

• first-ip-multicast-address—The first Multicast IP address of the range

• last-ip-multicast-address—The last Multicast IP address of the range

• count number—(Optional) Configures multiple contiguous Multicast IP addresses. If not specified, the

default is 1.

Default Configuration

No Multicast IP address is associated.

Command Mode

Global Configuration mode

User Guidelines

Use this command to define the Multicast transmissions on a Multicast-TV VLAN. The configuration is only
relevant for an Access port that is a member in the configured VLAN as a Multicast-TV VLAN.

If an IGMP message is received on such an Access port, it is associated with the Multicast-TV VLAN only
if it is for one of the Multicast IP addresses that are associated with the Multicast-TV VLAN.

Up to 256 VLANs can be configured.

Example

switchxxxxxx(config)# ip igmp snooping vlan 1 multicast-tv 239.2.2.2 count 3

Cisco Business Switches 350 Series CLI Guide

538

IGMP Snooping Commands

ip igmp snooping map cpe vlan

ip igmp snooping map cpe vlan

To map CPE VLANs to Multicast-TV VLANs, use the ip igmp snooping map cpe vlan command in Global
Configuration mode. To return to the default, use the no form of this command.

Syntax

ip igmp snooping map cpe vlan cpe-vlan-id multicast-tv vlan vlan-id

no ip igmp snooping map cpe vlan vlan-id

Parameters

• cpe-vlan-id—Specifies the CPE VLAN ID.

• vlan-id—Specifies the Multicast-TV VLAN ID.

Default Configuration

No mapping exists.

Command Mode

Global Configuration mode

User Guidelines

Use this command to associate the CPE VLAN with a Multicast-TV VLAN.

If an IGMP message is received on a customer port tagged with a CPE VLAN, and there is mapping from
that CPE VLAN to a Multicast-TV VLAN, the IGMP message is associated with the Multicast-TV VLAN.

Example

The following example maps CPE VLAN 2 to Multicast-TV VLAN 31.

switchxxxxxx(config)# ip igmp snooping map cpe vlan 2 multicast-tv vlan 31

Cisco Business Switches 350 Series CLI Guide

539

ip igmp snooping querier

IGMP Snooping Commands

ip igmp snooping querier

To enable globally the IGMP Snooping querier, use the ip igmp snooping querier command in Global
Configuration mode. To disable the IGMP Snooping querier globally, use the no form of this command.

Syntax

ip igmp snooping querier

no ip igmp snooping querier

Default Configuration

Enabled

Command Mode

Global Configuration mode

User Guidelines

To run the IGMP Snooping querier on a VLAN, you have enable it globally and on the VLAN.

Example

The following example disables the IGMP Snooping querier globally:

switchxxxxxx(config)# no ip igmp snooping querier

Cisco Business Switches 350 Series CLI Guide

540

IGMP Snooping Commands

ip igmp snooping vlan querier

ip igmp snooping vlan querier

To enable the IGMP Snooping querier on a specific VLAN, use the ip igmp snooping vlan querier command
in Global Configuration mode. To disable the IGMP Snooping querier on the VLAN interface, use the no
form of this command.

Syntax

ip igmp snooping vlan vlan-id querier

no ip igmp snooping vlan vlan-id querier

Parameters

• vlan-id—Specifies the VLAN.

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

The IGMP Snooping querier can be enabled on a VLAN only if IGMP Snooping is enabled for that VLAN.

Example

The following example enables the IGMP Snooping querier on VLAN 1:

switchxxxxxx(config)# ip igmp snooping vlan 1 querier

Cisco Business Switches 350 Series CLI Guide

541

ip igmp snooping vlan querier address

IGMP Snooping Commands

ip igmp snooping vlan querier address

To define the source IP address that the IGMP snooping querier uses, use the ip igmp snooping vlan querier
address command in Global Configuration mode. To return to the default, use the no form of this command.

Syntax

ip igmp snooping vlan vlan-id querier address ip-address

no ip igmp snooping vlan vlan-id querier address

Parameters

• vlan-id—Specifies the VLAN.

• ip-address—Source IP address.

Default Configuration

If an IP address is configured for the VLAN, it is used as the source address of the IGMP snooping querier.
If there are multiple IP addresses, the minimum IP address defined on the VLAN is used.

Command Mode

Global Configuration mode

User Guidelines

If an IP address is not configured by this command, and no IP address is configured for the querier’s VLAN,
the querier is disabled.

Example

switchxxxxxx(config)# ip igmp snooping vlan 1 querier address 10.5.234.205

Cisco Business Switches 350 Series CLI Guide

542

IGMP Snooping Commands

ip igmp snooping vlan querier election

ip igmp snooping vlan querier election

To enable IGMP Querier election mechanism of an IGMP Snooping querier on a specific VLAN, use the ip
igmp snooping vlan querier election command in Global Configuration mode. To disable Querier election
mechanism, use the no form of this command.

Syntax

ip igmp snooping vlan vlan-id querier election

no ip igmp snooping vlan vlan-id querier election

Parameters

• vlan-id—Specifies the VLAN.

Default Configuration

Enabled

Command Mode

Global Configuration mode

User Guidelines

Use the no form of the ip igmp snooping vlan querier election command to disable IGMP Querier election
mechanism on a VLAN. If the IGMP Querier election mechanism is enabled, the IGMP Snooping querier
supports the standard IGMP Querier election mechanism specified in RFC2236 and RFC3376. If IGMP
Querier election mechanism is disabled, IGMP Snooping Querier delays sending General Query messages
for 60 seconds from the time it was enabled. During this time, if the switch did not receive an IGMP query
from another Querier - it starts sending General Query messages. Once the switch acts as a Querier, it will
stop sending General Query messages if it detects another Querier on the VLAN. In this case, the switch will
resume sending General Query messages if it does hear another Querier for Query Passive interval that equals
to

<Robustness>*<Query Interval> + 0.5*<Query Response Interval).

It is recommended to disable IGMP Querier election mechanism if there is an IPM Multicast router on the
VLAN.

Example

The following example disables IGMP Snooping Querier election on VLAN 1:

switchxxxxxx(config)# no ip igmp snooping vlan 1 querier election

Cisco Business Switches 350 Series CLI Guide

543

ip igmp snooping vlan querier version

IGMP Snooping Commands

ip igmp snooping vlan querier version

To configure the IGMP version of an IGMP Snooping querier on a specific VLAN, use the ip igmp snooping
vlan querier version command in Global Configuration mode. To return to the default, use the no form of
this command.

Syntax

ip igmp snooping vlan vlan-id querier version {2 | 3}

no ip igmp snooping vlan vlan-id querier version

Parameters

• vlan-id—Specifies the VLAN.

• querier version 2—Specifies that the IGMP version would be IGMPv2.

• querier version 3—Specifies that the IGMP version would be IGMPv3.

Default Configuration

IGMPv2.

Command Mode

Global Configuration mode

Example

The following example sets the version of the IGMP Snooping Querier VLAN 1 to 3:

switchxxxxxx(config)# ip igmp snooping vlan 1 querier version 3

Cisco Business Switches 350 Series CLI Guide

544

IGMP Snooping Commands

ip igmp snooping vlan immediate-leave

ip igmp snooping vlan immediate-leave

To enable the IGMP Snooping Immediate-Leave processing on a VLAN, use the ip igmp snooping vlan
immediate-leave Global Configuration mode command in Global Configuration mode. To return to the
default, use the no form of this command.

Syntax

ip igmp snooping vlan vlan-id immediate-leave

no ip igmp snooping vlan vlan-id immediate-leave

Parameters

• vlan-id—Specifies the VLAN ID value. (Range: 1–4094).

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

You can execute the command before the VLAN is created.

Example

The following example enables IGMP snooping immediate-leave feature on VLAN 1.

switchxxxxxx(config)# ip igmp snooping vlan 1 immediate-leave

Cisco Business Switches 350 Series CLI Guide

545

ip igmp snooping map cpe vlan

IGMP Snooping Commands

ip igmp snooping map cpe vlan

To map CPE VLANs to Multicast-TV VLANs, use the ip igmp snooping map cpe vlan command in Global
Configuration mode. To return to the default, use the no form of this command.

Syntax

ip igmp snooping map cpe vlan cpe-vlan-id multicast-tv vlan vlan-id

no ip igmp snooping map cpe vlan vlan-id

Parameters

• cpe-vlan-id—Specifies the CPE VLAN ID.

• vlan-id—Specifies the Multicast-TV VLAN ID.

Default Configuration

No mapping exists.

Command Mode

Global Configuration mode

User Guidelines

Use this command to associate the CPE VLAN with a Multicast-TV VLAN.

If an IGMP message is received on a customer port tagged with a CPE VLAN, and there is mapping from
that CPE VLAN to a Multicast-TV VLAN, the IGMP message is associated with the Multicast-TV VLAN.

Example

The following example maps CPE VLAN 2 to Multicast-TV VLAN 31.

switchxxxxxx(config)# ip igmp snooping map cpe vlan 2 multicast-tv vlan 31

Cisco Business Switches 350 Series CLI Guide

546

IGMP Snooping Commands

show ip igmp snooping groups

show ip igmp snooping groups

To display the Multicast groups learned by the IGMP snooping, use the show ip igmp snooping groups
command in User EXEC mode.

Syntax

show ip igmp snooping groups [vlan vlan-id] [address ip-multicast-address] [source ip-address]

Parameters

• vlan vlan-id—(Optional) Specifies the VLAN ID.

• address ip-multicast-address—(Optional) Specifies the IP multicast address.

• source ip-address—(Optional) Specifies the IP source address.

Command Mode

User EXEC mode

User Guidelines

To see all Multicast groups learned by IGMP snooping, use the show ip igmp snooping groups command
without parameters.

Use the show ip igmp snooping groups command with parameters to see a needed subset of all Multicast
groups learned by IGMP snooping

Example

The following example shows sample output:

switchxxxxxx# show ip igmp snooping groups vlan 1

switchxxxxxx# show ip igmp snooping groups

Vlan
----
1

Group
Address
---------------
239.255.255.250

Source
Address
----------
*

Include Ports
---------
gi1/0/1

Exclude Ports
--------

Comp-Mode
---------
v2

Cisco Business Switches 350 Series CLI Guide

547

show ip igmp snooping interface

IGMP Snooping Commands

show ip igmp snooping interface

To display the IGMP snooping configuration for a specific VLAN, use the show ip igmp snooping interface
command in User EXEC mode.

Syntax

show ip igmp snooping interface vlan-id

Parameters

• vlan-id—Specifies the VLAN ID.

Command Mode

User EXEC mode

Example

The following example displays the IGMP snooping configuration for VLAN 1000

switchxxxxxx# show ip igmp snooping interface 1000
IGMP Snooping is globally enabled
IGMP Snooping Querier is globally enabled
VLAN 1000
IGMP Snooping is enabled
IGMP snooping last immediate leave: enable
Automatic learning of Multicast router ports is enabled
IGMP Snooping Querier is enabled
IGMP Snooping Querier operation state: is not running
IGMP Snooping Querier version: 2
IGMP Snooping Querier election is enabled
IGMP Snooping Querier address: 194.12.10.166
IGMP snooping robustness: admin 2 oper 2
IGMP snooping query interval: admin 125 sec oper 125 sec
IGMP snooping query maximum response: admin 10 sec oper 10 sec
IGMP snooping last member query counter: admin 2 oper 2
IGMP snooping last member query interval: admin 1000 msec oper 500 msec
IGMP Snooping interface active Querier address: 194.12.100.100 (remote)
Groups that are in IGMP version 1 compatibility mode:
231.2.2.3, 231.2.2.3

Cisco Business Switches 350 Series CLI Guide

548

IGMP Snooping Commands

show ip igmp snooping mrouter

show ip igmp snooping mrouter

To display information on dynamically learned Multicast router interfaces for all VLANs or for a specific
VLAN, use the show ip igmp snooping mrouter command in User EXEC mode.

Syntax

show ip igmp snooping mrouter [interface vlan-id]

Parameters

• interface vlan-id—(Optional) Specifies the VLAN ID.

Command Mode

User EXEC mode

Example

The following example displays information on dynamically learned Multicast router interfaces for VLAN
1000:

switchxxxxxx# show ip igmp snooping mrouter interface 1000

VLAN

----

1000

Dynamic

---------

gi1/0/1

Static

---------

gi1/0/2

Forbidden

----------

gi1/0/3-4

Cisco Business Switches 350 Series CLI Guide

549

show ip igmp snooping multicast-tv

IGMP Snooping Commands

show ip igmp snooping multicast-tv

To display the IP addresses associated with Multicast TV VLANs, use the show ip igmp snooping multicast-tv
EXEC mode command in User EXEC mode.

Syntax

show ip igmp snooping multicast-tv [vlan vlan-id]

Parameters

• vlan vlan-id—(Optional) Specifies the VLAN ID.

Command Mode

User EXEC mode

Example

The following example displays the IP addresses associated with all Multicast TV VLANs.

switchxxxxxx# show ip igmp snooping multicast-tv
VLAN First IP Address Last IP Address
---- ---------------- ---------------
1000 238.2.5.5 238.2.5.5
1000 239.255.0.0 239.255.1.1
1010 232.0.0.0 239.0.0.255
1010 239.0.1.2 239.255.4.5

Cisco Business Switches 350 Series CLI Guide

550

IP Addressing Commands

This chapter contains the following sections:

• ip address, on page 552
• ip address dhcp, on page 554
• renew dhcp, on page 555
• ip default-gateway, on page 556
• show ip interface, on page 557
• arp, on page 558
• arp timeout (Global), on page 559
• ip arp proxy disable, on page 560
• ip proxy-arp, on page 561
• clear arp-cache, on page 562
• show arp, on page 563
• show arp configuration, on page 564
• interface ip, on page 565
• ip helper-address, on page 566
• show ip helper-address, on page 568
• show ip dhcp client interface, on page 569

Cisco Business Switches 350 Series CLI Guide

551

ip address

ip address

IP Addressing Commands

Use the ip address Interface Configuration (Ethernet, VLAN, Port-channel) mode command to define an IP
address for an interface. Use the no form of this command to remove an IP address definition.

Syntax

OOB port:

ip address ip-address {mask | /prefix-length} [default-gateway-ip-address]

no ip address

In-Band interfaces:

ip address ip-address {mask | /prefix-length}

no ip address [ip-address]

Parameters

• ip-address—Specifies the IP address.

• mask—Specifies the network mask of the IP address.

• prefix-length—Specifies the number of bits that comprise the IP address prefix. The prefix length must

be preceded by a forward slash (/). (Range: 8–30)

• default-gateway-ip-address—Specifies the default gateway IP address. The route is gotten a metric of

4 for an In-Band interface and 2 for OOB.

Default Configuration

No IP address is defined for interfaces.

Command Mode

Interface Configuration mode

User Guidelines

Use the ip address command to define a static IP address on an interface.

In-Band interfaces

Multiple IP addresses are supported. A new defined IP address is added on the interface.

Defining a static IP address on an interface stops a DHCP client running on the interface and removes the IP
address assigned by the DHCP client.

If a configured IP address overlaps another configured one a warning message is displayed. To change an
existed IP address, delete the existed one and add the new one.

While no IP address is assigned either by DHCP client or manually the default IP address 192.168.1.254 is
assigned on the Default VLAN.

OOB port

Cisco Business Switches 350 Series CLI Guide

552

IP Addressing Commands

ip address

One IP address is supported. A new IP address defined on the OOB port overrides the previously defined IP
address on the OOB port.

Defining a static IP address on the OOB port stops a DHCP client running on the OOB port and deletes an
IP address assigned by the DHCP client.

While no IP address is assigned either by DHCP client or manually the default IP address 192.168.1.254 is
assigned on the OOB port

Example 1. The following example configures VLAN 1 with IP address 131.108.1.27 and subnet
mask 255.255.255.0.

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ip address 131.108.1.27 255.255.255.0

Example 2. The following example configures 3 overlapped IP addresses.

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ip address 1.1.1.1 255.0.0.0
switchxxxxxx(config)# exit
switchxxxxxx(config)# interface vlan 2
switchxxxxxx(config-if)# ip address 1.2.1.1 255.255.0.0
switchxxxxxx(config)# This IP address overlaps IP address 1.1.1.1/8 on vlan1, are you sure?

[Y/N]Y

switchxxxxxx(config)# exit
switchxxxxxx(config)# interface vlan 3
switchxxxxxx(config-if)# ip address 1.3.1.1 255.255.0.0
switchxxxxxx(config)# This IP address overlaps IP address 1.1.1.1/8 on vlan1, are you sure?

[Y/N]Y

switchxxxxxx(config)# exit

Example 3. The following example configures IP address on OOB:

switchxxxxxx(config)# interface oob
switchxxxxxx(config-if)# ip address 131.108.1.27 255.255.255.0 131.108.1.100

Cisco Business Switches 350 Series CLI Guide

553

ip address dhcp

ip address dhcp

IP Addressing Commands

Use the ip address dhcp Interface Configuration (Ethernet, VLAN, Port-channel) mode command to acquire
an IP address for an Ethernet interface from the Dynamic Host Configuration Protocol (DHCP) server. Use
the no form of this command to release an acquired IP address.

Syntax

ip address dhcp

no ip address dhcp

Command Mode

Interface Configuration mode

User Guidelines

Use the ip address dhcp command to enable DHCP client on the interface.

The ip address dhcp command removes all the manually configured addresses on the interface.

The default route (Default Gateway) received in DHCP Router option (Option 3) is assigned a metric of 8 for
an In-Band interface and 6 for OOB.

Use the no form of the command to disable DHCP client on interface.

Example

The following example acquires an IP address for VLAN 100 from DHCP.

switchxxxxxx(config)# interface vlan100
switchxxxxxx(config-if)# ip address dhcp

Cisco Business Switches 350 Series CLI Guide

554

IP Addressing Commands

renew dhcp

renew dhcp

Use the renew dhcp Privileged EXEC mode command to renew an IP address that was acquired from a DHCP
server for a specific interface.

Syntax

renew dhcp interface-id [force-autoconfig]

Parameters

• interface-id—Specifies an interface.

• force-autoconfig - If the DHCP server holds a DHCP option 67 record for the assigned IP address, the

record overwrites the existing device configuration.

Command Mode

Privileged EXEC mode

User Guidelines

Use the renew dhcp command to renew a DHCP address on an interface.

This command does not enable DHCP client on an interface and if DHCP client is not enabled on the interface,
the command returns an error message.

Example

The following example renews an IP address on VLAN 19 that was acquired from a DHCP server:

switchxxxxxx# renew dhcp vlan 19

Cisco Business Switches 350 Series CLI Guide

555

ip default-gateway

IP Addressing Commands

ip default-gateway

The ip default-gateway Global Configuration mode command defines a default gateway (device). Use the
no form of this command to restore the default configuration.

Syntax

ip default-gateway ip-address

no ip default-gateway [ip-address]

Parameters

• ip-address—Specifies the default gateway IP address.

Command Mode

Global Configuration mode

Default Configuration

No default gateway is defined.

User Guidelines

Use the ip default-gateway command to defines a default gateway (default route).

The ip default-gateway command adds the default route with metric of 4 for the gateway connected on an
In-Band interface and 2 for the gateway connected on OOB.

Use the no ip default-gateway ip-address command to delete one default gateway.

Use the no ip default-gateway command to delete all default gateways.

Example

The following example defines default gateway 192.168.1.1.

switchxxxxxx(config)# ip default-gateway 192.168.1.1

Cisco Business Switches 350 Series CLI Guide

556

IP Addressing Commands

show ip interface

show ip interface

Use the show ip interface EXEC mode command to display the usability status of configured IP interfaces.

Syntax

show ip interface [interface-id]

Parameters

• interface-id—Specifies an interface ID on which IP addresses are defined.

Default Configuration

All IP addresses.

Command Mode

User EXEC mode

Example 1 - The following example displays all configured IP addresses and their types:

switchxxxxxx# show ip interface

IP Address

I/F

I/F Status Type

admin/oper

Directed
Broadcast

Redirect Status

-------------
10.5.230.232/24 vlan 1 UP/UP
10.5.234.202/24 vlan 4 UP/DOWN Static disable Disabled Valid
10.5.240.200/24 oob UP/UP Static Valid

------ ----------- ------- -------- --------- -----
Valid

Static disable

Enabled

Example 2 - The following example displays the IP addresses configured on the given L2 interfaces
and their types:

switchxxxxxx# show ip interface vlan 1

IP Address

I/F

I/F Status Type

admin/oper

Directed
Broadcast

Redirect Status

-------------
10.5.230.232/24 vlan 1 UP/UP

------ ----------- ------- -------- --------- -----
Valid

Static disable

Enabled

Cisco Business Switches 350 Series CLI Guide

557

arp

arp

IP Addressing Commands

Use the arp Global Configuration mode command to add a permanent entry to the Address Resolution Protocol
(ARP) cache. Use the no form of this command to remove an entry from the ARP cache.

Syntax

arp ip-address mac-address [interface-id]

no arp ip-address

Parameters

• ip-address—IP address or IP alias to map to the specified MAC address.

• mac-address—MAC address to map to the specified IP address or IP alias.

• interface-id—Address pair is added for specified interface.

Command Mode

Global Configuration mode

Default Configuration

No permanent entry is defined.

If no interface ID is entered, address pair is relevant to all interfaces.

User Guidelines

The software uses ARP cache entries to translate 32-bit IP addresses into 48-bit hardware (MAC) addresses.
Because most hosts support dynamic address resolution, static ARP cache entries generally do not need to be
specified.

Example

The following example adds IP address 198.133.219.232 and MAC address 00:00:0c:40:0f:bc to the ARP
table.

switchxxxxxx(config)# arp 198.133.219.232 00:00:0c:40:0f:bc vlan100

Cisco Business Switches 350 Series CLI Guide

558

IP Addressing Commands

arp timeout (Global)

arp timeout (Global)

Use the arp timeout Global Configuration mode command to set the time interval during which an entry
remains in the ARP cache. Use the no form of this command to restore the default configuration.

Syntax

arp timeout seconds

no arp timeout

Parameters

• seconds—Specifies the time interval (in seconds) during which an entry remains in the ARP cache.

(Range: 1–40000000).

Default Configuration

The default ARP timeout is 60000 seconds, if IP Routing is enabled, and 300 seconds if IP Routing is disabled.

Command Mode

Global Configuration mode

Example

The following example configures the ARP timeout to 12000 seconds.

switchxxxxxx(config)# arp timeout 12000

Cisco Business Switches 350 Series CLI Guide

559

ip arp proxy disable

IP Addressing Commands

ip arp proxy disable

Use the ip arp proxy disable Global Configuration mode command to globally disable proxy Address
Resolution Protocol (ARP). Use the no form of this command reenable proxy ARP.

Syntax

ip arp proxy disable

no ip arp proxy disable

Default

Disabled by default.

Command Mode

Global Configuration mode

User Guidelines

This command overrides any proxy ARP interface configuration.

The command is supported only when IP Routing is enabled.

Example

The following example globally disables ARP proxy.

switchxxxxxx(config)# ip arp proxy disable

Cisco Business Switches 350 Series CLI Guide

560

IP Addressing Commands

ip proxy-arp

ip proxy-arp

Use the ip proxy-arp Interface Configuration mode command to enable an ARP proxy on specific interfaces.
Use the no form of this command disable it.

Syntax

ip proxy-arp

no ip proxy-arp

Default Configuration

ARP Proxy is enabled.

Command Mode

Interface Configuration mode

User Guidelines

This configuration can be applied only if at least one IP address is defined on a specific interface.

The command is supported only when IP Routing is enabled.

Example

The following example enables ARP proxy when the switch is in router mode.

switchxxxxxx(config-if)# ip proxy-arp

Cisco Business Switches 350 Series CLI Guide

561

clear arp-cache

clear arp-cache

IP Addressing Commands

Use the clear arp-cache Privileged EXEC mode command to delete all dynamic entries from the ARP cache.

Syntax

clear arp-cache

Command Mode

Privileged EXEC mode

Example

The following example deletes all dynamic entries from the ARP cache.

switchxxxxxx# clear arp-cache

Cisco Business Switches 350 Series CLI Guide

562

IP Addressing Commands

show arp

show arp

Use the show arp Privileged EXEC mode command to display entries in the ARP table.

Syntax

show arp [ip-address ip-address] [mac-address mac-address] [interface-id]

Parameters

• ip-address ip-address—Specifies the IP address.

• mac-address mac-address—Specifies the MAC address.

• interface-id—Specifies an interface ID.

Command Mode

Privileged EXEC mode

User Guidelines

Since the associated interface of a MAC address can be aged out from the FDB table, the Interface field can
be empty.

If an ARP entry is associated with an IP interface that is defined on a port or port-channel, the VLAN field
is empty.

Example

The following example displays entries in the ARP table.

switchxxxxxx# show arp
ARP timeout: 80000 Seconds

VLAN
-------
VLAN 1
VLAN 1
VLAN 2

Interface
---------------
gi1/0/1
gi1/0/2
gi1/0/1
gi1/0/2

IP Address
----------
10.7.1.102
10.7.1.135
11.7.1.135
12.10.1.13

HW Address
-----------------
00:10:B5:04:DB:4B
00:50:22:00:2A:A4
00:12:22:00:2A:A4
00:11:55:04:DB:4B

Status
-------
Dynamic
Static
Dynamic
Dynamic

Cisco Business Switches 350 Series CLI Guide

563

show arp configuration

IP Addressing Commands

show arp configuration

Use the show arp configuration privileged EXEC command to display the global and interface configuration
of the ARP protocol.

Syntax

show arp configuration

Parameters

This command has no arguments or key words.

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# show arp configuration
Global configuration:
ARP Proxy: enabled
ARP timeout:

80000 Seconds

Interface configuration:
VLAN 1:

ARP Proxy: disabled
ARP timeout:60000 Seconds

VLAN 10:

ARP Proxy: enabled
ARP timeout: 70000 Seconds

VLAN 20:

ARP Proxy: enabled
ARP timeout: 80000 Second (Global)

Cisco Business Switches 350 Series CLI Guide

564

IP Addressing Commands

interface ip

interface ip

Use the interface ip Global Configuration mode command to enter the IP Interface Configuration mode.

Syntax

interface ip ip-address

Parameters

• ip-address—Specifies one of the IP addresses of the device.

Command Mode

Global Configuration mode

Example

The following example enters the IP interface configuration mode.

switchxxxxxx(config)# interface ip 192.168.1.1
switchxxxxxx(config-ip)#

Cisco Business Switches 350 Series CLI Guide

565

ip helper-address

IP Addressing Commands

ip helper-address

Use the ip helper-address Global Configuration mode command to enable the forwarding of UDP Broadcast
packets received on an interface to a specific (helper) address. Use the no form of this command to disable
the forwarding of broadcast packets to a specific (helper) address.

Syntax

ip helper-address {ip-interface | all} address [udp-port-list]

no ip helper-address {ip-interface | all} address

Parameters

• ip-interface—Specifies the IP interface.

• all—Specifies all IP interfaces.

• address—Specifies the destination broadcast or host address to which to forward UDP broadcast packets.

A value of 0.0.0.0 specifies that UDP broadcast packets are not forwarded to any host.

• udp-port-list—Specifies the destination UDP port number to which to forward Broadcast packets (Range:

1–59999). This can be a list of port numbers separated by spaces.

Default Configuration

Forwarding of UDP Broadcast packets received on an interface to a specific (helper) address is disabled.

If udp-port-list is not specified, packets for the default services are forwarded to the helper address.

Command Mode

Global Configuration mode

User Guidelines

This command forwards specific UDP Broadcast packets from one interface to another, by specifying a UDP
port number to which UDP broadcast packets with that destination port number are forwarded. By default, if
no UDP port number is specified, the device forwards UDP broadcast packets for the following six services:

• IEN-116 Name Service (port 42)

• DNS (port 53)

• NetBIOS Name Server (port 137)

• NetBIOS Datagram Server (port 138)

• TACACS Server (port 49)

• Time Service (port 37)

Many helper addresses may be defined. However, the total number of address-port pairs is limited to 128 for
the device.

Cisco Business Switches 350 Series CLI Guide

566

IP Addressing Commands

ip helper-address

The setting of a helper address for a specific interface has precedence over the setting of a helper address for
all the interfaces.

Forwarding of BOOTP/DHCP (ports 67, 68) cannot be enabled with this command. Use the DHCP relay
commands to relay BOOTP/DHCP packets.

The ip-interface argument cannot be the OOB port.

Example

The following example enables the forwarding of UDP Broadcast packets received on all interfaces to the
UDP ports of a destination IP address and UDP port 1 and 2.

switchxxxxxx(config)# ip helper-address all 172.16.9.9 49 53 1 2

Cisco Business Switches 350 Series CLI Guide

567

show ip helper-address

IP Addressing Commands

show ip helper-address

Use the show ip helper-address Privileged EXEC mode command to display the IP helper addresses
configuration on the system.

Syntax

show ip helper-address

Parameters

This command has no arguments or key words.

Command Mode

Privileged EXEC mode

User Guidelines

Example

The following example displays the IP helper addresses configuration on the system:

switchxxxxxx# show ip

Interface
------------
192.168.1.1
192.168.2.1

Helper Address
--------------
172.16.8.8
172.16.9.9

UDP Ports
------------------------
37, 42, 49, 53, 137, 138
37, 49

Cisco Business Switches 350 Series CLI Guide

568

IP Addressing Commands

show ip dhcp client interface

show ip dhcp client interface

Use the show ip dhcp client interface command in User EXEC or Privileged EXEC mode to display DHCP
client interface information.

Syntax

show ip dhcp client interface [interface-id]

Parameters

• interface-id—Interface identifier.

Command Mode

User EXEC mode

User Guidelines

If no interfaces are specified, all interfaces on which DHCP client is enabled are displayed. If an interface is
specified, only information about the specified interface is displayed.

Example

The following is sample output of the show ip dhcp client interface command:

switchxxxxxx# show ip dhcp client interface
VLAN 100 is in client mode
Address: 170.10.100.100 Mask: 255.255.255.0 T1 120, T2 192
Default Gateway: 170.10.100.1
DNS Servers: 115.1.1.1, 87.12.34.20
DNS Domain Search List: company.com
Host Name: switch_floor7
Configuration Server Addresses: 192.1.1.1 202.1.1.1
Configuration Path Name: qqq/config/aaa_config.dat
Image Path Name: qqq/image/aaa_image.ros
POSIX Timezone string: EST5EDT4,M3.2.0/02:00,M11.1.0/02:00
VLAN 1200 is in client mode
Address: 180.10.100.100 Mask: 255.255.255.0 T1 120, T2 192
Default Gateway: 180.10.100.1
DNS Servers: 115.1.1.1, 87.12.34.20
DNS Domain Search List: company.com
Host Name: switch_floor7
Configuration Server Addresses: configuration.company.com
Configuration Path Name: qqq/config/aaa_config.dat
Image Path Name: qqq/image/aaa_image.ros
POSIX Timezone string: EST5EDT4,M3.2.0/02:00,M11.1.0/02:00
Option 43: 5A1N;K4;B3;IFE80::2E0:81FF:FE2D:3799;J6088

Cisco Business Switches 350 Series CLI Guide

569

show ip dhcp client interface

IP Addressing Commands

Cisco Business Switches 350 Series CLI Guide

570

IP Routing Protocol-Independent Commands

This chapter contains the following sections:

• accept-lifetime, on page 572
• directed-broadcast, on page 574
• ip policy route-map, on page 575
• ip redirects, on page 577
• ip route, on page 578
• ip routing, on page 580
• key-string, on page 581
• key (key chain), on page 582
• key chain, on page 584
• send-lifetime, on page 586
• show ip protocols, on page 588
• show ip route, on page 589
• show ip route summary, on page 590
• show key chain, on page 591

Cisco Business Switches 350 Series CLI Guide

571

accept-lifetime

IP Routing Protocol-Independent Commands

accept-lifetime

To set the time period during which the authentication key on a key chain is received as valid, use the
accept-lifetime command inkey chain key configuration mode. To revert to the default value, use the no form
of this command.

Syntax

accept-lifetime start-time {infinite | end-time | duration seconds}

no accept-lifetime

Parameters

• start-time—Beginning time that the key specified by the key command is valid to be received. The syntax

can be either of the following:

• hh:mm:ss Month date year

• hh:mm:ss date Month year

• hh—hours (0-23)

• mm—minutes (0-59)

• ss—seconds (0-59)

• Month—first three letters of the month

• date—date (1-31)

• year—year (four digits)

The default start time and the earliest acceptable date is January 1, 2000.

• infinite—Key is valid to be received from the start-time value on.

• end-time—Key is valid to be received from the start-time value until the end-time value. The syntax is
the same as that for the start-time value. The end-time value must be after the start-time value. The default
end time is an infinite time period.

• duration seconds—Length of time (in seconds) that the key is valid to be received. The range is from

1 to 2147483646.

Default Configuration

The default time period during which the authentication key is valid for authenticating incoming packets is
set to Forever.

The definition of Forever is: the starting time is January 1, 2000, and the ending time is infinite.

Command Mode

Key Chain Key Configuration mode

Cisco Business Switches 350 Series CLI Guide

572

IP Routing Protocol-Independent Commands

accept-lifetime

User Guidelines

The switch checks Time-of-Date again a value of the start-time argument regardless if Time-of-Date is not
set by management or by SNTP because of the default value of Time-of-Date always is an passed time.

If validation of the value of the start-time argument was passed and the end-time argument is configured and
its value is infinite the key is considered as actual regardless if Time-of-Date is not set by management or
by SNTP.

If Time-of-Date is not set by management or by SNTP and if the end-time argument is configured with a
value differing from infinite or the duration parameter is configured, the key is considered as expired.

If Time-of-Date is set by management or by SNTP, the switch checks Time-of-Date again a value of the
end-time argument or of the duration parameter.

If the last key expires, authentication will be finished with error.

Example

The following example configures a key chain called keychain1. The key named string1 will be accepted
from 1:30 p.m. to 3:30 p.m. and be sent from 2:00 p.m. to 3:00 p.m. The key named string2 will be accepted
from 2:30 p.m. to 4:30 p.m. and be sent from 3:00 p.m. to 4:00 p.m. The overlap allows for migration of keys
or discrepancies in the set time of the router. There is a 30-minute leeway on each side to handle time
differences:

switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# network 172.19.1.1
switchxxxxxx(config-rip)# exit
switchxxxxxx(config)# interface ip 172.19.1.1
switchxxxxxx(config-ip)# ip rip authentication mode md5
switchxxxxxx(config-ip)# ip rip authentication key-chain keychain1
switchxxxxxx(config-ip)# exit
switchxxxxxx(config)# key chain keychain1
switchxxxxxx(config-keychain)# key 1
switchxxxxxx(config-keychain-key)# key-string string1
switchxxxxxx(config-keychain-key)# accept-lifetime 13:30:00 Jan 25 2011 duration 7200
switchxxxxxx(config-keychain-key)# send-lifetime 14:00:00 Jan 25 2011 duration 3600
switchxxxxxx(config-keychain-key)# exit
switchxxxxxx(config-keychain)# key 2
switchxxxxxx(config-keychain-key)# key-string string2
switchxxxxxx(config-keychain-key)# accept-lifetime 14:30:00 Jan 25 2011 duration 7200
switchxxxxxx(config-keychain-key)# send-lifetime 15:00:00 Jan 25 2011 duration 3600
switchxxxxxx(config-keychain-key)# exit

Cisco Business Switches 350 Series CLI Guide

573

directed-broadcast

IP Routing Protocol-Independent Commands

directed-broadcast

Use the directed-broadcast IP Interface Configuration mode command to enable the translation of a directed
broadcast to physical broadcasts. Use the no form of this command to disable this function.

Syntax

directed-broadcast

no directed-broadcast

Default Configuration

Translation of a directed broadcast to physical broadcasts is disabled. All IP directed broadcasts are dropped.

Command Mode

IP Configuration mode

Example

The following example enables the translation of a directed broadcast to physical broadcasts.

switchxxxxxx(config)# interface ip 192.168.1.1
switchxxxxxx(config-ip)# directed-broadcast

Cisco Business Switches 350 Series CLI Guide

574

IP Routing Protocol-Independent Commands

ip policy route-map

ip policy route-map

To enable policy routing on an interface and identify a route map, use the ip policy route-map command in
Interface Configuration mode. To disable policy routing, use the no form of this command.

Syntax

ip policy route-map map-tag

no ip policy route-map

Parameters

• map-tag—Name of the route map to use for policy routing.

Default Configuration

No policy routing occurs on the interface.

Command Mode

Interface Configuration mode

User Guidelines

Use the ip policy route-map command to enable policy routing on an interface. The actual policy routing
will take a place if an IP address is defined on the interface.

The IP packets matched to the route-map conditions specified by the route map with the map-tag name will
take a route depended on the action of the matched ACL:

• permit—The route specified by the set command Policy routing.

• deny—The route specified by the IP Forwarding table (regular routing).

• Name of the route map to use for policy routing.

The IP packets that are not matched, will be forwarded using the obvious shortest path.

IP policy routing on a Layer 2 interface is performed only when IP interface is defined, its status is UP, and
the next hop is reachable. If the IP policy routing is not applied then the matched IP packets will be forwarded
using the obvious shortest path.

Note. Of course, like in the case of regular IP Routing Policy Based IP Router routes only MAC "tome" IP
frames. IP policy routing cannot be configured on an interface together with the following features:

• VLAN ACL

Example

The following example shows how to configure policy routing:

switchxxxxxx(config)# ip access-list extended pr-acl1
switchxxxxxx(config-ip-al)# permit tcp any any 156.12.5.0 0.0.0.255 any
switchxxxxxx(config-ip-al)# exit

Cisco Business Switches 350 Series CLI Guide

575

ip policy route-map

IP Routing Protocol-Independent Commands

switchxxxxxx(config)# ip access-list extended pr-acl2
switchxxxxxx(config-ip-al)# permit tcp any any 156.122.5.0 0.0.0.255 any
switchxxxxxx(config-ip-al)# exit
switchxxxxxx(config)# route-map pbr 10
switchxxxxxx(config-route-map)# match ip address access-list pr-acl1
switchxxxxxx(config-route-map)# set ip next-hop 56.1.1.1
switchxxxxxx(config-route-map)# exit
switchxxxxxx(config)# route-map pbr 20
switchxxxxxx(config-route-map)# match ip address access-list pr-acl2
switchxxxxxx(config-route-map)# set ip next-hop 50.1.1.1
switchxxxxxx(config-route-map)# exit
switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ip policy route-map pbr
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

576

IP Routing Protocol-Independent Commands

ip redirects

ip redirects

Use the ip redirects command in IP Interface Configuration mode to enable the sending of ICMP redirect
messages to re-send a packet through the same interface on which the packet was received. To disable the
sending of redirect messages, use the no form of this command.

Syntax

ip redirects

no ip redirects

Default Configuration

The sending of ICMP redirect messages is enabled.

Command Mode

IP Configuration mode

Example

The following example disables the sending of ICMP redirect messages on IP interface 1.1.1.1 and re-enables
the messages on IP interface 2.2.2.2:

switchxxxxxx(config)# interface ip 1.1.1.1
switchxxxxxx(config-ip)# no ip redirects
switchxxxxxx(config-ip)# exit
switchxxxxxx(config)# interface ip 2.2.2.2
switchxxxxxx(config-ip)# ip redirects
switchxxxxxx(config-ip)# exit

Cisco Business Switches 350 Series CLI Guide

577

ip route

ip route

IP Routing Protocol-Independent Commands

To establish static routes, use the ip route command in global configuration mode. To remove static routes,
use the no form of this command.

Syntax

ip route prefix {mask | /prefix-length} {{ip-address [metric value]} | reject-route}

no ip route prefix {mask | /prefix-length} [ip-address]

Parameters

• prefix—IP route prefix for the destination.

• mask—Prefix mask for the destination.

• / prefix-length—Prefix mask for the destination.Specifies the number of bits that comprise the IP address

prefix. The prefix length must be preceded by a forward slash (/). (Range: 0–32)

• ip-address—IP address of the next hop that can be used to reach that network.

• metric value—Metric of the route. The default metric is 4 for the Next Hop on an In-Band interface and

2 for the Next Hop on OOB. Range: 1–255.

• reject-route—Stopping routing to the destination network.

Default Configuration

No static routes are established.

Command Mode

Global Configuration mode

User Guidelines

Use the no ip route command without the ip-address parameter to remove all static routes to the given subnet.

Use the no ip route command with the ip-address parameter to remove only one static route to the given
subnet via the given next hop.

Example 1—The following example shows how to route packets for network 172.31.0.0 to a router
at 172.31.6.6 using mask:

switchxxxxxx(config)# ip route 172.31.0.0 255.255.0.0 172.31.6.6 metric 2

Example 2—The following example shows how to route packets for network 172.31.0.0 to a router
at 172.31.6.6 using prefix length :

switchxxxxxx(config)# ip route 172.31.0.0 /16 172.31.6.6 metric 2

Example 3—The following example shows how to reject packets for network 194.1.1.0:

switchxxxxxx(config)# ip route 194.1.1.0 255.255.255.0 reject-route

Example 4—The following example shows how to remove all static routes to network 194.1.1.0/24:

Cisco Business Switches 350 Series CLI Guide

578

IP Routing Protocol-Independent Commands

ip route

switchxxxxxx(config)# no ip route 194.1.1.0 /24

Example 5—The following example shows how to remove one static route to network 194.1.1.0/24
via 1.1.1.1:

switchxxxxxx(config)# no ip route 194.1.1.0 /24 1.1.1.1

Cisco Business Switches 350 Series CLI Guide

579

ip routing

ip routing

IP Routing Protocol-Independent Commands

To enable IP routing, use the ip routing command in global configuration mode. To disable IP routing, use
the no form of this command.

Syntax

ip routing

no ip routing

Parameters

This command has no arguments or keywords.

Default Configuration

IP routing is enabled.

Command Mode

Global Configuration mode.

User Guidelines

Use the command to enable IP Routing.

The switch supports one IPv4 stack on in-band interfaces and the OOB port.

The IP stack is always running on the OOB port as an IP host regardless whether IP routing is enabled. The
switch blocks routing between in-band interfaces and the OOB interface. In the case when there are two best
routes - one via an in-band and one via the OOB port, the switch will use the route via the OOB port.DHCP
Relay and IP Helper cannot be enabled on the OOB port. Routing protocols cannot be enabled on the OOB
port. The IP subnet defined on the OOB port is not redistributed to routing protocols running on in-band
interfaces.

Example

The following example enables IP routing:

switchxxxxxx(config)# ip routing

Cisco Business Switches 350 Series CLI Guide

580

IP Routing Protocol-Independent Commands

key-string

key-string

To specify the authentication string for a key, use the key-string command in key chain key configuration
mode. To remove the authentication string, use the no form of this command.

Syntax

key-string text

no key-string

Parameters

• text—Specifies the authentication string. The string can contain from 1 to 16 characters.

Default Configuration

No key exists.

Command Mode

Key Chain Key Configuration mode

Example

The following example configures a key chain named chain1. The key named key1 will be accepted from
1:30 p.m. to 3:30 p.m. and be sent from 2:00 p.m. to 3:00 p.m. The key named key2 will be accepted from
2:30 p.m. to 4:30 p.m. and be sent from 3:00 p.m. to 4:00 p.m. The overlap allows for migration of keys or a
discrepancy in the set time of the router. There is a 30-minute leeway on each side to handle time differences:

switchxxxxxx(config)# key chain chain1
switchxxxxxx(config-keychain)# key 1
switchxxxxxx(config-keychain-key)# key-string key1
switchxxxxxx(config-keychain-key)# accept-lifetime 13:30:00 Jan 25 2011 duration 7200
switchxxxxxx(config-keychain-key)# send-lifetime 14:00:00 Jan 25 2011 duration 3600
switchxxxxxx(config-keychain-key)# exit
switchxxxxxx(config-keychain)# key 2
switchxxxxxx(config-keychain-key)# key-string key2
switchxxxxxx(config-keychain-key)# accept-lifetime 14:30:00 Jan 25 2011 duration 7200
switchxxxxxx(config-keychain-key)# send-lifetime 15:00:00 Jan 25 2011 duration 3600
switchxxxxxx(config-keychain-key)# exit
switchxxxxxx(config-keychain)# exit
switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# network 172.19.1.1
switchxxxxxx(config-rip)# version 2
switchxxxxxx(config-rip)# exit
switchxxxxxx(config)# interface ip 172.19.1.1
switchxxxxxx(config-ip)# ip rip authentication key-chain chain1
switchxxxxxx(config-ip)# ip rip authentication mode md5
switchxxxxxx(config-ip)# exit

Cisco Business Switches 350 Series CLI Guide

581

key (key chain)

key (key chain)

IP Routing Protocol-Independent Commands

To identify an authentication key on a key chain, use the key command in key-chain configuration mode. To
remove the key from the key chain, use the no form of this command.

Syntax

key key-id

no key key-id

Parameters

• key-id—Identification number of an authentication key on a key chain. The range of keys is from 1 to

255. The key identification numbers need not be consecutive. The scope of a key identification number
is the key chain where the key is defined.

Default Configuration

No key exists on the key chain.

Command Mode

Key-Chain Configuration mode

User Guidelines

It is useful to have multiple keys on a key chain so that the software can sequence through the keys as they
become invalid after time, based on the accept-lifetime and send-lifetime key chain key command settings.

Each key has its own key identifier, which is stored locally. The combination of the key identifier and the
interface associated with the message uniquely identifies the authentication algorithm and authentication key
in use. Only one authentication packet is sent, regardless of the number of valid keys. The software starts
looking at the lowest key identifier number and uses the first valid key.

If the last key expires, authentication will be finished with error.

To remove all keys, remove the key chain by using the no key chain command.

Example

The following example configures a key chain named chain1. The key named key1 will be accepted from
1:30 p.m. to 3:30 p.m. and be sent from 2:00 p.m. to 3:00 p.m. The key named key2 will be accepted from
2:30 p.m. to 4:30 p.m. and be sent from 3:00 p.m. to 4:00 p.m. The overlap allows for migration of keys or a
discrepancy in the set time of the router. There is a 30-minute leeway on each side to handle time differences:

switchxxxxxx(config)# key 1
switchxxxxxx(config)# key chain chain1
switchxxxxxx(config-keychain)# key 1
switchxxxxxx(config-keychain-key)# key-string key1
switchxxxxxx(config-keychain-key)# accept-lifetime 13:30:00 Jan 25 2011 duration 7200
switchxxxxxx(config-keychain-key)# send-lifetime 14:00:00 Jan 25 2011 duration 3600
switchxxxxxx(config-keychain-key)# exit
switchxxxxxx(config-keychain)# key 2

Cisco Business Switches 350 Series CLI Guide

582

IP Routing Protocol-Independent Commands

key (key chain)

switchxxxxxx(config-keychain-key)# key-string key2
switchxxxxxx(config-keychain-key)# accept-lifetime 14:30:00 Jan 25 2011 duration 7200
switchxxxxxx(config-keychain-key)# send-lifetime 15:00:00 Jan 25 2011 duration 3600
switchxxxxxx(config-keychain-key)# exit
switchxxxxxx(config-keychain)# exit
switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# network 172.19.1.1
exit
switchxxxxxx(config)# interface ip 172.19.1.1
switchxxxxxx(config-ip)# ip rip authentication mode md5
switchxxxxxx(config-ip)# ip rip authentication key-chain chain1
switchxxxxxx(config-ip)# exit

Cisco Business Switches 350 Series CLI Guide

583

key chain

key chain

IP Routing Protocol-Independent Commands

To enable authentication for routing protocols, identify a group of authentication keys by using the key chain
command in global configuration mode. To remove the key chain, use the no form of this command

Syntax

key chain name-of-chain

no key chain name-of-chain

Parameters

• name-of-chain—Name of a key chain. The chain-name may have from 1 to 32 characters. A key chain

must have at least one key and can have up to 256 keys.

Default Configuration

No key chain exists.

Command Mode

Global Configuration mode

User Guidelines

You must configure a key chain with keys to enable authentication.

Although you can identify multiple key chains, we recommend using one key chain per interface per routing
protocol. Upon specifying the key chain command, you enter key-chain configuration mode.

Example

The following example configures a key chain named chain1. The key named key1 will be accepted from
1:30 p.m. to 3:30 p.m. and be sent from 2:00 p.m. to 3:00 p.m. The key named key2 will be accepted from
2:30 p.m. to 4:30 p.m. and be sent from 3:00 p.m. to 4:00 p.m. The overlap allows for migration of keys or a
discrepancy in the set time of the router. There is a 30-minute leeway on each side to handle time differences:

switchxxxxxx(config)# key chain chain1
switchxxxxxx(config-keychain)# key 1
switchxxxxxx(config-keychain-key)# key-string key1
switchxxxxxx(config-keychain-key)# accept-lifetime 13:30:00 Jan 25 2011 duration 7200
switchxxxxxx(config-keychain-key)# send-lifetime 14:00:00 Jan 25 2011 duration 3600
switchxxxxxx(config-keychain-key)# exit
switchxxxxxx(config-keychain)# key 2
switchxxxxxx(config-keychain-key)# key-string key2
switchxxxxxx(config-keychain-key)# accept-lifetime 14:30:00 Jan 25 2011 duration 7200
switchxxxxxx(config-keychain-key)# send-lifetime 15:00:00 Jan 25 2011 duration 3600
switchxxxxxx(config-keychain-key)# exit
switchxxxxxx(config-keychain)# exit
switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# network 172.19.1.1
switchxxxxxx(config-rip)# exit
switchxxxxxx(config)# interface ip 172.19.1.1
switchxxxxxx(config-ip)# ip rip authentication mode md5

Cisco Business Switches 350 Series CLI Guide

584

IP Routing Protocol-Independent Commands

key chain

switchxxxxxx(config-ip)# ip rip authentication key-chain chain1
switchxxxxxx(config-ip)# exit

Cisco Business Switches 350 Series CLI Guide

585

send-lifetime

send-lifetime

IP Routing Protocol-Independent Commands

To set the time period during which an authentication key on a key chain is valid to be sent, use the
send-lifetime command in Key Chain Key configuration mode. To revert to the default value, use the no
form of this command.

Syntax

send-lifetime start-time {infinite | end-time | duration seconds}

no send-lifetime

Parameters

• start-time—Beginning time that the key specified by the key command is valid to be received. The syntax

can be either of the following:

• hh:mm:ss Month date year

• hh:mm:ss date Month year

• hh—hours (0-23)

• mm—minutes (0-59)

• ss—seconds (0-59)

• Month—first three letters of the month

• date—date (1-31)

• year—year (four digits)

The default start time and the earliest acceptable date is January 1, 2000.

• infinite—Key is valid to be received from the start-time value on.

• end-time—Key is valid to be received from the start-time value until the end-time value. The syntax is
the same as that for the start-time value. The end-time value must be after the start-time value. The default
end time is an infinite time period.

• duration seconds—Length of time (in seconds) that the key is valid to be received. The range is from

1 to 2147483646.

Default Configuration

The default time period during which the authentication key is valid for authenticating incoming packets is
set to forever.

Forever (the starting time is January 1, 2000, and the ending time is infinite)

Command Mode

Key Chain Key Configuration mode

Cisco Business Switches 350 Series CLI Guide

586

IP Routing Protocol-Independent Commands

send-lifetime

User Guidelines

Specify a start-time value and one of the following values: infinite end-time, or duration seconds.

A key is considered as expired if Time-of-Date is not set by management or by SNTP.

If the last key expires, authentication will be finished with error.

Example

The following example configures a key chain called chain1. The key named key1 will be accepted from 1:30
p.m. to 3:30 p.m. and be sent from 2:00 p.m. to 3:00 p.m. The key named key2 will be accepted from 2:30
p.m. to 4:30 p.m. and be sent from 3:00 p.m. to 4:00 p.m. The overlap allows for migration of keys or
discrepancies in the set time of the router. There is a 30-minute leeway on each side to handle time differences:

switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# network 172.19.1.1
switchxxxxxx(config-rip)# exit
switchxxxxxx(config)# interface ip 172.19.1.1
switchxxxxxx(config-ip)# ip rip authentication mode md5
switchxxxxxx(config-ip)# ip rip authentication key-chain chain1
switchxxxxxx(config-ip)# exit
switchxxxxxx(config)# key chain chain1
switchxxxxxx(config-keychain)# key 1
switchxxxxxx(config-keychain-key)# key-string key1
switchxxxxxx(config-keychain-key)# accept-lifetime 13:30:00 Jan 25 1996 duration 7200
switchxxxxxx(config-keychain-key)# send-lifetime 14:00:00 Jan 25 1996 duration 3600
switchxxxxxx(config-keychain-key)# exit
switchxxxxxx(config-keychain)# key 2
switchxxxxxx(config-keychain-key)# key-string key2
switchxxxxxx(config-keychain-key)# accept-lifetime 14:30:00 Jan 25 1996 duration 7200
switchxxxxxx(config-keychain-key)# send-lifetime 15:00:00 Jan 25 1996 duration 3600
switchxxxxxx(config-keychain-key)# exit
switchxxxxxx(config-keychain)# exit

Cisco Business Switches 350 Series CLI Guide

587

show ip protocols

IP Routing Protocol-Independent Commands

show ip protocols

To display the parameters and current state of the active IP routing protocol processes, use the show ip
protocols command in user EXEC or privileged EXEC mode.

Syntax

show ip protocols [summary]

Parameters

• summary—Displays the configured routing protocol process names.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

The information displayed by the show ip protocols command is useful in debugging routing operations.

Example 1. The following is sample output from the show ip protocols command, showing active
routing protocols:

switchxxxxxx# show ip protocols
IP Routing Protocol is "rip"
Interfaces IP Addresses
VLAN 1
VLAN 1
VLAN 11

12.1.1.1
150.23.12.2
1.1.1.1

Example 2. The following is sample output from the show ip protocols command with the summary
keyword:

switchxxxxxx# show ipv6 protocols summary
IP Routing Protocol is "rip"

Cisco Business Switches 350 Series CLI Guide

588

IP Routing Protocol-Independent Commands

show ip route

show ip route

To display the current state of the routing table, use the show ip route command in user EXEC or privileged
EXEC mode.

Syntax

show ip route [address ip-address {mask [longer-prefixes]} [protocol | static | rejected | icmp | connected]

Parameters

• address ip-address—IP address about which routing information should be displayed.

• mask—The value of the subnet mask.

• longer-prefixes—Specifies that only routes matching the IP address and mask pair should be displayed.

• protocol—The name of the origin of the protocol to be displayed. Use one of the following arguments:

• rip—Displays routes added by RIP

• connected—Displays connected routes.

• icmp—Displays routes added by ICMP Direct.

• rejected—Displays rejected routes.

• static—Displays static routes.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

Use this command without parameters to display the whole IPv4 Routing table.

Use this command with parameters to specify required routes.

Example 1. The following is sample output from the show ip route command when IP Routing is
not enabled:

switchxxxxxx# show ip route
Maximum Parallel Paths: 1 (1 after reset)IP Forwarding: disabled
Codes: > - best, C - connected, S - static, I - ICMP
IP Routing Table - 5 entries
Code IP Route Distance/ Next Hop Last Time Outgoing

Metric IP Address Updated Interface

------ ------------------- ----------- --------------- ------------- ------------
S 10.10.0.0/16 1/2 10.119.254.244 00:02:22 vlan2
S> 10.10.0.0/16 1/1 10.120.254.244 00:02:22 vlan3
S> 10.16.2.0/24 1/1 10.119.254.244 00:02:22 vlan2
C> 10.119.0.0/16 0/1 0.0.0.0 vlan2
C> 10.120.0.0/16 0/1 0.0.0.0 vlan3

Cisco Business Switches 350 Series CLI Guide

589

show ip route summary

IP Routing Protocol-Independent Commands

show ip route summary

Use the show ip route summary command in User EXEC or Privileged EXEC mode to display the current
contents of the IP routing table in summary format.

Syntax

show ip route summary

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

Example

The following is sample output from the show ip route summary command:

switchxxxxxx# show ip route summary
IP Routing Table Summary - 90 entries
35 connected, 25 static, 12 RIP
Number of prefixes:
/16: 16, /18: 10, /22: 15, /24: 15, /28: 2, /30: 12

Cisco Business Switches 350 Series CLI Guide

590

IP Routing Protocol-Independent Commands

show key chain

show key chain

To display authentication key information, use the show key chain command in Privileged EXEC mode.

Syntax

show key chain [name-of-chain]

Parameters

• name-of-chain—Name of the key chain to display, as named in the key chain command.

Default Configuration

Information about all key chains is displayed.

Command Mode

Privileged EXEC mode

Example 1. The following is sample output from the show key chain command when the current
time of date is defined:

switchxxxxxx# show key chain
Current Time of Date is Feb 8 2011
Accept lifetime is configured to ignore
Key-chain trees:
key 1 -- text "chestnut"
accept lifetime (always valid) - (always valid) [valid now]
send lifetime (always valid) - (always valid) [valid now]
key 2 -- text "birch"
accept lifetime (00:00:00 Dec 5 2010) - (23:59:59 Dec 5 2010)
send lifetime (06:00:00 Dec 5 2010) - (18:00:00 Dec 5 2016)[valid now]

Example 2. The following is sample output from the show key chain command when the current
time of date is not defined:

switchxxxxxx# show key chain
Current Time of Date is not defined
Accept lifetime is ignored
Key-chain trees:
key 1 -- text "chestnut"
accept lifetime (always valid) - (always valid) [valid now]
send lifetime (always valid) - (always valid) [valid now]
key 2 -- text "birch"
accept lifetime (00:00:00 Dec 5 2010) - (23:59:59 Dec 5 2010)
send lifetime (06:00:00 Dec 5 2010) - (18:00:00 Dec 5 2016)

Cisco Business Switches 350 Series CLI Guide

591

show key chain

IP Routing Protocol-Independent Commands

Cisco Business Switches 350 Series CLI Guide

592

IP System Management Commands

This chapter contains the following sections:

• ping, on page 594
• ssh, on page 596
• telnet, on page 598
• traceroute, on page 601

Cisco Business Switches 350 Series CLI Guide

593

ping

ping

IP System Management Commands

Use the ping EXEC mode command to send ICMP echo request packets to another node on the network.

Syntax

ping [ip] {ipv4-address | hostname} [size packet_size] [count packet_count] [timeout time_out] [source
source-address]

ping ipv6 {ipv6-address | hostname} [size packet_size] [count packet_count] [timeout time_out] [source
source-address]

Parameters

• ip—Use IPv4 to check the network connectivity.

• ipv6—Use IPv6 to check the network connectivity.

• ipv4-address—IPv4 address to ping.

• ipv6-address—Unicast or Multicast IPv6 address to ping. When the IPv6 address is a Link Local address

(IPv6Z address), the outgoing interface name must be specified.

• hostname—Hostname to ping (Length: 1-158 characters. Maximum label size for each part of the host

name: 58.)

• size packet_size—Number of bytes in the packet not including the VLAN tag. The default is 64 bytes.

(IPv4:64–1518, IPv6: 68–1518)

• count packet_count—Number of packets to send, from 1 to 65535 packets. The default is 4 packets. If

0 is entered, it pings until stopped (0–65535).

• time time-out—Timeout in milliseconds to wait for each reply, from 50 to 65535 milliseconds. The

default is 2000 milliseconds (50–65535).

• source source-address—Source address (Unicast IPv4 address or global Unicast IPv6 address).

Command Mode

Privileged EXEC mode

User Guidelines

Press Esc to stop pinging. Following are sample results of the ping command:

• Destination does not respond—If the host does not respond, a “no answer from host” appears within

10 seconds.

• Destination unreachable—The gateway for this destination indicates that the destination is unreachable.

• Network or host unreachable—The switch found no corresponding entry in the route table.

When using the ping ipv6 command to check network connectivity of a directly attached host using its link
local address, the egress interface may be specified in the IPv6Z format. If the egress interface is not specified,
the default interface is selected.

Cisco Business Switches 350 Series CLI Guide

594

IP System Management Commands

ping

When using the ping ipv6 command with a Multicast address, the information displayed is taken from all
received echo responses.

When the source keyword is configured and the source address is not an address of the switch, the command
is halted with an error message and pings are not sent.

Example 1 - Ping an IP address.

switchxxxxxx> ping ip 10.1.1.1
Pinging 10.1.1.1 with 64 bytes of data:
64 bytes from 10.1.1.1: icmp_seq=0. time=11 ms
64 bytes from 10.1.1.1: icmp_seq=1. time=8 ms
64 bytes from 10.1.1.1: icmp_seq=2. time=8 ms
64 bytes from 10.1.1.1: icmp_seq=3. time=7 ms
----10.1.1.1 PING Statistics----
4 packets transmitted, 4 packets received, 0% packet loss
round-trip (ms) min/avg/max = 7/8/11

Example 2 - Ping a site.

switchxxxxxx> ping ip yahoo.com
Pinging yahoo.com [66.218.71.198] with 64 bytes of data:
64 bytes from 66.218.71.198: icmp_seq=0. time=11 ms
64 bytes from 66.218.71.198: icmp_seq=1. time=8 ms
64 bytes from 66.218.71.198: icmp_seq=2. time=8 ms
64 bytes from 66.218.71.198: icmp_seq=3. time=7 ms
----10.1.1.1 PING Statistics----
4 packets transmitted, 4 packets received, 0% packet loss
round-trip (ms) min/avg/max = 7/8/11

Example 3 - Ping an IPv6 address.

switchxxxxxx> ping ipv6 3003::11
Pinging 3003::11 with 64 bytes of data:
64 bytes from 3003::11: icmp_seq=1. time=0 ms
64 bytes from 3003::11: icmp_seq=2. time=50 ms
64 bytes from 3003::11: icmp_seq=3. time=0 ms
64 bytes from 3003::11: icmp_seq=4. time=0 ms
----3003::11 PING Statistics----
4 packets transmitted, 4 packets received, 0% packet loss
round-trip (ms) min/avg/max = 0/12/50
switchxxxxxx> ping ipv6 FF02::1
Pinging FF02::1 with 64 bytes of data:
64 bytes from FF02::1: icmp_seq=1. time=0 ms
64 bytes from FF02::1: icmp_seq=1. time=70 ms
64 bytes from FF02::1: icmp_seq=2. time=0 ms
64 bytes from FF02::1: icmp_seq=1. time=1050 ms
64 bytes from FF02::1: icmp_seq=2. time=70 ms
64 bytes from FF02::1: icmp_seq=2. time=1050 ms
64 bytes from FF02::1: icmp_seq=3. time=0 ms
64 bytes from FF02::1: icmp_seq=3. time=70 ms
64 bytes from FF02::1: icmp_seq=4. time=0 ms
64 bytes from FF02::1: icmp_seq=3. time=1050 ms
64 bytes from FF02::1: icmp_seq=4. time=70 ms
64 bytes from FF02::1: icmp_sq=4. time=1050 ms
---- FF02::1 PING Statistics----
4 packets transmitted, 12 packets received

Cisco Business Switches 350 Series CLI Guide

595

ssh

ssh

IP System Management Commands

To start an encrypted session with a remote networking device, use the ssh command in user EXEC or
privileged EXEC mode.

Syntax

ssh {ip-address | hostname} [port] [keyword...]

Parameters

• ip-address—Specifies the destination host IP address (IPv4 or IPv6).

• hostname—Hostname to ping (Length: 1-158 characters. Maximum label size for each part of the host

name: 58.)

• port—Specifies the decimal TCP port number. The default port is the SSH port (22).

• keyword—Specifies the one or more keywords listed in the Keywords table in the User Guidelines.

Keywords Table

Options

Description

/password password

/source-interface interface-id

/user user-name

Specifies the password to use when logging in on the remote networking
device running the SSH server. If the keyword is not specified, the
password configured by the ip ssh-client password command is used.
If this keyword is specified the the /user keyword must be specified too.

Specifies the source interface which minimal IPv4/v6 address will be
used as the source IPv4/v6 address. If the keyword is not specified, the
source IPv4/IPv6 address configured by the ip ssh-client
source-interface command is used.

Specifies the user name to use when logging in on the remote networking
device running the SSH server. If the keyword is not specified, the user
name configured by the ip ssh-client username command is used. If
this keyword is specified the /password keyword must be specified too.

Default Configuration

The default port is the SSH port (22) on the host.

Command Mode

Privileged EXEC mode

User Guidelines

The ssh command enables the switch to make a secure, encrypted connection to another switch running an
SSH server. This connection provides functionality that is similar to that of a Telnet connection except that

Cisco Business Switches 350 Series CLI Guide

596

IP System Management Commands

ssh

the connection is encrypted. With authentication and encryption, the SSH client allows for a secure
communication over an insecure network.

Only one SSH terminal connection can be active at the same time.

Example 1. The following example sets a secure session between the local device and the edge
device HQedge.

switchxxxxxx> ssh HQedge

Example 2. The following example sets a secure session between the local device and the edge
device 1.1.1.1. The user name is HQhost and the password is a password configured by the ip
ssh-client password command.

switchxxxxxx> ssh 1.1.1.1 /user HQhost

Example 3. The following example sets a secure session between the local device and the edge
device HQedge. The user name is HQhost and the password is ar3245ddd.

switchxxxxxx> ssh HQedge /user HQhost /password ar3245ddd

Example 4. The following example sets a lookback interface as a source interface:

switchxxxxxx> ssh HQedge /source-interface loopback1

Cisco Business Switches 350 Series CLI Guide

597

telnet

telnet

IP System Management Commands

The telnet EXEC mode command logs on to a host that supports Telnet.

Syntax

telnet {ip-address | hostname} [port] [keyword...]

Parameters

• ip-address—Specifies the destination host IP address (IPv4 or IPv6).

• hostname—Hostname to ping (Length: 1-158 characters. Maximum label size for each part of the host

name: 58.)

• port—Specifies the decimal TCP port number or one of the keywords listed in the Ports table in the User

Guidelines.

• keyword—Specifies the one or more keywords listed in the Keywords table in the User Guidelines.

Default Configuration

The default port is the Telnet port (23) on the host.

Command Mode

Privileged EXEC mode

User Guidelines

Telnet software supports special Telnet commands in the form of Telnet sequences that map generic terminal
control functions to operating system-specific functions. To enter a Telnet sequence, press the escape sequence
keys (Ctrl-shift-6) followed by a Telnet command character.

Special Telnet Sequences

Telnet Sequence

Ctrl-shift-6-b

Ctrl-shift-6-c

Ctrl-shift-6-h

Ctrl-shift-6-o

Ctrl-shift-6-t

Ctrl-shift-6-u

Purpose

Break

Interrupt Process (IP)

Erase Character (EC)

Abort Output (AO)

Are You There? (AYT)

Erase Line (EL)

At any time during an active Telnet session, available Telnet commands can be listed by pressing the ?/help
keys at the system prompt.

A sample of this list follows.

Cisco Business Switches 350 Series CLI Guide

598

IP System Management Commands

telnet

switchxxxxxx> ?/help
[Special telnet escape help]
^^ B sends telnet BREAK
^^ C sends telnet IP
^^ H sends telnet EC
^^ O sends telnet AO
^^ T sends telnet AYT
^^ U sends telnet EL
?/help suspends the session (return to system command prompt)

Several concurrent Telnet sessions can be opened, enabling switching between the sessions. To open a
subsequent session, the current connection has to be suspended by pressing the escape sequence keys
(Ctrl-shift-6) and x to return to the system command prompt. Then open a new connection with the telnet
EXEC mode command.

This command lists concurrent Telnet connections to remote hosts that were opened by the current Telnet
session to the local device. It does not list Telnet connections to remote hosts that were opened by other Telnet
sessions.

Keywords Table

Options

/echo

/quiet

Description

Enables local echo.

Prevents onscreen display of all messages from the software.

/source-interface

Specifies the source interface.

/stream

Turns on stream processing, which enables a raw TCP stream with no Telnet
control sequences. A stream connection does not process Telnet options and can
be appropriate for connections to ports running UNIX-to-UNIX Copy Program
(UUCP) and other non-Telnet protocols.

Ctrl-shift-6 x

Returns to the System Command Prompt.

Ports Table

Keyword

Description

Port Number

BGP

Border Gateway Protocol

chargen

Character generator

cmd

Remote commands

daytime

Daytime

discard

domain

echo

exec

finger

Discard

Domain Name Service

Echo

Exec

Finger

179

19

514

13

9

53

7

512

79

Cisco Business Switches 350 Series CLI Guide

599

telnet

IP System Management Commands

Keyword

Description

Port Number

ftp

ftp-data

gopher

File Transfer Protocol

FTP data connections

Gopher

hostname

NIC hostname server

ident

irc

klogin

kshell

login

lpd

nntp

Ident Protocol

Internet Relay Chat

Kerberos login

Kerberos shell

Login

Printer service

Network News Transport Protocol

pim-auto-rp

PIM Auto-RP

Post Office Protocol v2

Post Office Protocol v3

Simple Mail Transport Protocol

Sun Remote Procedure Call

Syslog

TAC Access Control System

Talk

Telnet

Time

Unix-to-Unix Copy Program

Nickname

World Wide Web

pop2

pop3

smtp

sunrpc

syslog

tacacs

talk

telnet

time

uucp

whois

www

Example

21

20

70

101

113

194

543

544

513

515

119

496

109

110

25

111

514

49

517

23

37

540

43

80

The following example displays logging in to IP address 176.213.10.50 via Telnet.

switchxxxxxx> telnet 176.213.10.50

Cisco Business Switches 350 Series CLI Guide

600

IP System Management Commands

traceroute

traceroute

To display the routes that packets will take when traveling to their destination, use the traceroute EXEC
mode command.

Syntax

traceroute ip {ipv4-address | hostname} [size packet_size] [ttl max-ttl] [count packet_count] [timeout
time_out] [source ip-address]

traceroute ipv6 {ipv6-address | hostname} [size packet_size] [ttl max-ttl] [count packet_count] [timeout
time_out] [source ip-address]

Parameters

• ip—Use IPv4 to discover the route.

• ipv6—Use IPv6 to discover the route.

• ipv4-address—IPv4 address of the destination host.

• ipv6-address—IPv6 address of the destination host.

• hostname—Hostname to ping (Length: 1-158 characters. Maximum label size for each part of the host

name: 58.)

• size packet_size—Number of bytes in the packet not including the VLAN tag. The default is 64 bytes.

(IPv4:64-1518, IPv6: 68-1518)

• ttl max-ttl—The largest TTL value that can be used. The default is 30. The traceroute command terminates

when the destination is reached or when this value is reached. (Range: 1–255)

• count packet_count—The number of probes to be sent at each TTL level. The default count is 3. (Range:

1–10)

• timeout time_out—The number of seconds to wait for a response to a probe packet. The default is 3

seconds. (Range: 1–60)

• source ip-address—One of the interface addresses of the device to use as a source address for the probes.

The device selects the optimal source address by default. (Range: Valid IP address)

Command Mode

Privileged EXEC mode

User Guidelines

The traceroute command works by taking advantage of the error messages generated by routers when a
datagram exceeds its time-to-live (TTL) value.

The traceroute command starts by sending probe datagrams with a TTL value of one. This causes the first
router to discard the probe datagram and send back an error message. The traceroute command sends several
probes at each TTL level and displays the round-trip time for each.

Cisco Business Switches 350 Series CLI Guide

601

traceroute

IP System Management Commands

The traceroute command sends out one probe at a time. Each outgoing packet can result in one or two error
messages. A "time exceeded” error message indicates that an intermediate router has seen and discarded the
probe. A "destination unreachable" error message indicates that the destination node has received the probe
and discarded it because it could not deliver the packet. If the timer goes off before a response comes in, the
traceroute command prints an asterisk (*).

The traceroute command terminates when the destination responds, when the maximum TTL is exceeded,
or when the user interrupts the trace with Esc.

The traceroute ipv6 command is not relevant to IPv6 link local addresses.

Example

switchxxxxxx> traceroute ip umaxp1.physics.lsa.umich.edu
Type Esc to abort.
Tracing the route to umaxp1.physics.lsa.umich.edu (141.211.101.64)
1 i2-gateway.stanford.edu (192.68.191.83) 0 msec 0 msec 0 msec
2 STAN.POS.calren2.NET (171.64.1.213) 0 msec 0 msec 0 msec
3 SUNV--STAN.POS.calren2.net (198.32.249.73) 1 msec 1 msec 1 msec
4 Abilene--QSV.POS.calren2.net (198.32.249.162) 1 msec 1 msec 1 msec
5 kscyng-snvang.abilene.ucaid.edu (198.32.8.103) 33 msec 35 msec 35 msec
6 iplsng-kscyng.abilene.ucaid.edu (198.32.8.80)
47 msec 45 msec 45 msec
7 so-0-2-0x1.aa1.mich.net (192.122.183.9) 56 msec 53 msec 54 msec
8 atm1-0x24.michnet8.mich.net (198.108.23.82) 56 msec 56 msec 57 msec
9 * * *
10 A-ARB3-LSA-NG.c-SEB.umnet.umich.edu(141.211.5.22)58 msec 58msec 58 msec
11 umaxp1.physics.lsa.umich.edu (141.211.101.64) 62 msec 63 msec 63 msec
Trace completed

The following table describes the significant fields shown in the display:

Field

1

Description

Indicates the sequence number of the router in the path to the
host.

i2-gateway.stanford.edu

Host name of this router.

192.68.191.83

IP address of this router.

1 msec 1 msec 1 msec

Round-trip time for each of the probes that are sent.

The following are characters that can appear in the traceroute command output:

Field

Description

*

?

A

F

H

N

The probe timed out.

Unknown packet type.

Administratively unreachable. Usually, this output indicates that an
access list is blocking traffic.

Fragmentation required and DF is set.

Host unreachable.

Network unreachable.

Cisco Business Switches 350 Series CLI Guide

602

IP System Management Commands

traceroute

Field

Description

P

Q

R

S

U

Protocol unreachable.

Source quench.

Fragment reassembly time exceeded

Source route failed.

Port unreachable.

Cisco Business Switches 350 Series CLI Guide

603

traceroute

IP System Management Commands

Cisco Business Switches 350 Series CLI Guide

604

IPv4 IPM Router Commands

This chapter contains the following sections:

• ip multicast-routing, on page 606
• ip multicast ttl-threshold, on page 607
• show ip mroute, on page 608
• show ip multicast, on page 610

Cisco Business Switches 350 Series CLI Guide

605

ip multicast-routing

IPv4 IPM Router Commands

ip multicast-routing

To enable IPv4 Multicast routing on all IP-enabled interfaces of the router and to enable Multicast forwarding,
use the ip multicast-routing command in global configuration mode. To stop Multicast routing and forwarding,
use the no form of this command.

Syntax

ip multicast-routing igmp-proxy

no ip multicast-routing

Parameters

• igmp-proxy—Enable Multicast routing using IGMP Proxy.

Default Configuration

Multicast routing is not enabled.

Command Mode

Global Configuration mode

User Guidelines

Use the ip multicast-routing command with parameter to specify the needed IP Multicast Routing Protocol.

To forward IPv4 Multicast packets on an interface, IPv4 Multicast forwarding must be enabled globally and
an IPMv4 Routing protocol must be enabled on the interface.

Example

The following example enables IP Multicast routing using IGMP Proxy:

switchxxxxxx(config)# ip multicast-routing igmp-proxy

Cisco Business Switches 350 Series CLI Guide

606

IPv4 IPM Router Commands

ip multicast ttl-threshold

ip multicast ttl-threshold

To configure the time-to-live (TTL) threshold of packets being forwarded out an interface, use the ip multicast
ttl-threshold command in Interface Configuration mode. To return to the default TTL threshold, use the no
form of this command.

Syntax

ip multicast ttl-threshold ttl-value

no ip multicast ttl-threshold

Parameters

• ttl-value—Time-to-live value, in hops. It can be a value from 0 to 256.

Default Configuration

The default TTL value is 0.

Command Mode

Interface Configuration mode

User Guidelines

Multicast packets with a TTL value less than the threshold will not be forwarded on the interface. The default
value of 0 means all Multicast packets are forwarded on the interface.

A value of 256 means that no Multicast packets are forwarded on the interface.

You should configure the TTL threshold only on border routers. Conversely, routers on which you configure
a TTL threshold value automatically become border routers.

Example

The following example sets the TTL threshold on a border router to 200:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ip multicast ttl-threshold 200
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

607

show ip mroute

show ip mroute

IPv4 IPM Router Commands

To display the contents of the Multicast routing (mroute) table, use the show ip mroute command in user
EXEC or privileged EXEC mode.

Syntax

show ip mroute [group-address [source-address]] [summary]

Parameters

• group-address—Destination Multicast IP address.

• source-address—Source IP address.

• summary—Filters the output to display a one-line, abbreviated summary of each entry in the mroute

table.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

Use the show ip mroute command to display information about Mroute entries in the mroute table. The switch
populates the Multicast routing table by creating (S, G) entries from (*, G) entries. The asterisk (*) refers to
all source addresses, the “S” refers to a single source address, and the “G” is the destination Multicast group
address. In creating (S, G) entries, the switch uses the best path to that destination group found in the Unicast
routing table (that is, through Reverse Path Forwarding [RPF]).

Examples

Description of Significant fields in the examples below

Timers:Uptime/Expires—“Uptime” indicates per interface how long (in hours, minutes, and seconds) the
entry has been in the IP Multicast routing table. “Expires” indicates per interface how long (in hours, minutes,
and seconds) until the entry will be removed from the IP Multicast routing table.

(*, 224.0.255.1) and (192.168.37.100/32, 224.0.255.1)—Entry in the IP Multicast routing table. The entry
consists of the IP address of the source router followed by the IP address of the Multicast group. An asterisk
(*) in place of the source router indicates all sources.

Entries in the first format are referred to as (*, G) or “star comma G” entries. Entries in the second format are
referred to as (S, G) or “S comma G” entries. (*, G) entries are used to build (S, G) entries.

Incoming interface: —Expected interface for a Multicast packet from the source. If the packet is not received
on this interface, it is discarded.

Outgoing Interface List (OIF):—Interfaces through which packets will be forwarded.

Example 1. The following is sample output from the show ip mroute command with the summary keyword:

switchxxxxxx# show ip mroute summary
Timers: Uptime/Expires

Cisco Business Switches 350 Series CLI Guide

608

IPv4 IPM Router Commands

show ip mroute

IP Multicast Routing Table
(172.16.160.67/32, 224.2.127.254), 00:02:46/00:00:12, OIF count:2
(172.16.244.217/32, 224.2.127.254), 00:02:15/00:00:40, OIF count:
(172.16.8.33/32, 224.2.127.254), 00:00:25/00:02:32, OIF count:2
(172.16.2.62/32, 224.2.127.254), 00:00:51/00:02:03, OIF count:2
(172.16.8.3/32, 224.2.127.254), 00:00:26/00:02:33, OIF count:2
(172.16.60.189/32, 224.2.127.254), 00:03:47/00:00:46, OIF count:2

Example 2. The following is sample output from the show ip mroute command:

switchxxxxxx# show ip mroute
Timers: Uptime/Expires
IP Multicast Routing Table
(*, 224.0.255.3), 5:29:15/00:03:01
Incoming interface: vlan2
Outgoing interface list:
vlan100, 5:29:15/0:02:57
(192.168.46.0/24, 224.0.255.3), 05:29:15/00:02:59
Incoming interface: vlan2
Outgoing interface list:
vlan5, 05:29:15/00:02:57

Cisco Business Switches 350 Series CLI Guide

609

show ip multicast

IPv4 IPM Router Commands

show ip multicast

To display general information about IP Multicast configuration, use the show ip multicast command in user
EXEC or privileged EXEC mode.

Syntax

show ip multicast [interface interface-id]

Parameters

• interface—Displays IP Multicast-related information about an interface configured for IP Multicast.

• interface-id—Interface identifier for which to display IP Multicast information.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

Use the show ip multicast command without the interface keyword to display general information about the
state of IP Multicast on the router.

Use the show ip multicast command with the interface keyword to display the IP Multicast information
about the specified interface.

Example 1. The following is sample output from the show ip multicast command without the
interface keyword when no IP Multicast Routing protocol is enabled:

switchxxxxxx# show ip multicast
IP Unicast Forwarding: enabled
IP Multicast Protocol: No

Example 2. The following is sample output from the show ip multicast command without the
interface keyword when IGMP Proxy is enabled:

switchxxxxxx# show ip multicast
IP Unicast Forwarding: enabled
IP Multicast Protocol: IGMP Proxy

Example 3. The following is sample output from the show ip multicast command about the given
interface. IGMP Proxy is enabled on the interface and the interface is an IGMP Proxy Upstream
interface:

switchxxxxxx# show ip multicast interface vlan 200
IP Unicast Forwarding: enabled
IP Multicast Protocol: IGMP Proxy
vlan 200
TTL-threshold: 0
IGMP Protocol: IGMPv3
IGMP Proxy: Upstream

Cisco Business Switches 350 Series CLI Guide

610

IPv4 IPM Router Commands

show ip multicast

Example 4. The following is sample output from the show ip multicast command about the given
interface. IGMP Proxy is enabled on the interface and the interface is an IGMP Proxy Downlink
interface:

switchxxxxxx# show ip multicast interface vlan 100
IP Unicast Forwarding: enabled
IP Multicast Protocol: IGP Proxy
vlan 200
TTL-threshold: 0
IGMP Protocol: IGMPv3
IGMP Proxy: DownStream (Upstream: vlan 200)

Example 5. The following is sample output from the show ip multicast command about the given
interface. IGMP Proxy is disabled on the interface:

switchxxxxxx# show ip multicast interface vlan 100
IP Unicast Forwarding: enabled
IP Multicast Protocol: IGMP Proxy
vlan 200
IP Status: enabled
hop-threshold: 100
IGMP Protocol: IGMPv3
IGMP Proxy: disabled

Cisco Business Switches 350 Series CLI Guide

611

show ip multicast

IPv4 IPM Router Commands

Cisco Business Switches 350 Series CLI Guide

612

IPv6 Commands

This chapter contains the following sections:

• clear ipv6 neighbors, on page 614
• ipv6 address, on page 615
• ipv6 address anycast, on page 616
• ipv6 address autoconfig, on page 618
• ipv6 address eui-64, on page 619
• ipv6 address link-local, on page 621
• ipv6 default-gateway, on page 622
• ipv6 enable, on page 623
• ipv6 hop-limit, on page 624
• ipv6 icmp error-interval, on page 625
• ipv6 link-local default zone, on page 626
• ipv6 nd advertisement-interval, on page 627
• ipv6 nd dad attempts, on page 628
• ipv6 nd hop-limit, on page 630
• ipv6 nd managed-config-flag, on page 631
• ipv6 nd prefix, on page 632
• ipv6 nd ra interval, on page 635
• ipv6 nd ra lifetime, on page 636
• ipv6 nd ra suppress, on page 637
• ipv6 nd reachable-time, on page 638
• ipv6 nd router-preference, on page 639
• ipv6 redirects, on page 640
• ipv6 route, on page 641
• ipv6 unicast-routing, on page 643
• ipv6 unreachables, on page 644
• show ipv6 interface, on page 645
• show ipv6 link-local default zone, on page 651
• show ipv6 nd prefix, on page 652
• show ipv6 neighbors, on page 653
• show ipv6 route, on page 655
• show ipv6 route summary, on page 657
• show ipv6 static, on page 658

Cisco Business Switches 350 Series CLI Guide

613

clear ipv6 neighbors

IPv6 Commands

clear ipv6 neighbors

Use the clear ipv6 neighbors command in privileged EXEC mode to delete all entries in the IPv6 neighbor
discovery cache, except static entries.

Syntax

clear ipv6 neighbors

Command Mode

Privileged EXEC mode

User Guidelines

Example

The following example deletes all entries, except static entries, in the neighbor discovery cache:

switchxxxxxx# clear ipv6 neighbors

Cisco Business Switches 350 Series CLI Guide

614

IPv6 Commands

ipv6 address

ipv6 address

Use the ipv6 address command in Interface Configuration mode to configure a global unicast IPv6 address
based on an IPv6 general prefix and enable IPv6 processing on an interface. To remove the address from the
interface, use the no form of this command.

Syntax

ipv6 address ipv6-address/prefix-length

no ipv6 address [ipv6-address/prefix-length]

Parameters

• ipv6-address—Specifies the global unicast IPv6 address assigned to the interface. This argument must
be in the form documented in RFC4293 where the address is specified in hexadecimal using 16-bit values
between colons.

• prefix-length—The length of the IPv6 prefix. A decimal value that indicates how many of the high-order
contiguous bits of the address comprise the prefix (the network portion of the address). A slash mark
must precede the decimal value.

Default Configuration

No IP address is defined for the interface.

Command Mode

Interface Configuration mode

User Guidelines

The ipv6 address command cannot be applied to define an IPv6 address on an ISATAP interface.

Using the no IPv6 address command without arguments removes all manually-configured IPv6 addresses
from an interface, including link local manually configured addresses.

Example

The following example defines the IPv6 global address 2001:DB8:2222:7272::72 on vlan 100:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 address 2001:DB8:2222:7272::72/64
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

615

ipv6 address anycast

IPv6 Commands

ipv6 address anycast

Use the ipv6 address anycast command in Interface Configuration mode to configure a global unicast IPv6
Anycast address and enable IPv6 processing on an interface. To remove the address from the interface, use
the no form of this command.

Syntax

ipv6 address ipv6-prefix/prefix-length anycast

no ipv6 address [ipv6-prefix/prefix-length]

Parameters

• ipv6-address—Specifies the global unicast IPv6 address assigned to the interface. This argument must
be in the form documented in RFC4293 where the address is specified in hexadecimal using 16-bit values
between colons.

• prefix-length—The length of the IPv6 prefix. A decimal value that indicates how many of the high-order
contiguous bits of the address comprise the prefix (the network portion of the address). A slash mark
must precede the decimal value.

Default Configuration

No IP address is defined for the interface.

Command Mode

Interface Configuration mode

User Guidelines

An Anycast address is an address that is assigned to a set of interfaces that typically belong to different nodes.
A packet sent to an Anycast address is delivered to the closest interface—as defined by the routing protocols
in use—identified by the Anycast address. Anycast addresses are syntactically indistinguishable from Unicast
addresses because Anycast addresses are allocated from the Unicast address space. Nodes to which the Anycast
address is assigned must be explicitly configured to recognize that the address is an Anycast address.

Anycast addresses can be used only by a router, not a host, and Anycast addresses must not be used as the
source address of an IPv6 packet.

The subnet router Anycast address has a prefix concatenated by a series of zeros (the interface ID). The subnet
router Anycast address can be used to reach a router on the link that is identified by the prefix in the subnet
router Anycast address.

The ipv6 address anycast command cannot be applied to define an IPv6 address on an ISATAP interface.

Example

The following example enables IPv6 processing on the interface, assigns the prefix 2001:0DB8:1:1::/64 to
the interface, and configures the IPv6 Anycast address 2001:0DB8:1:1:FFFF:FFFF:FFFF:FFFE:

Cisco Business Switches 350 Series CLI Guide

616

IPv6 Commands

ipv6 address anycast

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 address 2001:0DB8:1:1:FFFF:FFFF:FFFF:FFFE/64 anycast
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

617

ipv6 address autoconfig

IPv6 Commands

ipv6 address autoconfig

Use the ipv6 address autoconfig command in Interface Configuration mode to enable automatic configuration
of IPv6 addresses using stateless auto configuration on an interface and enable IPv6 processing on the interface.
Addresses are configured depending on the prefixes received in Router Advertisement messages. To disable
automatic configuration of IPv6 addresses and to remove the automatically configured address from the
interface, use the no form of this command.

Syntax

ipv6 address autoconfig

no ipv6 address autoconfig

Default Configuration

Stateless Auto configuration is enabled.

Command Mode

Interface Configuration mode

User Guidelines

This command enables IPv6 on an interface (if it was disabled) and causes the switch to perform IPv6 stateless
address auto-configuration to discover prefixes on the link and then to add the eui-64 based addresses to the
interface.

Stateless auto configuration is applied only when IPv6 Forwarding is disabled.

When IPv6 forwarding is changed from disabled to enabled, and stateless auto configuration is enabled the
switch stops stateless auto configuration and removes all stateless auto configured ipv6 addresses from all
interfaces.

When IPv6 forwarding is changed from enabled to disabled and stateless auto configuration is enabled the
switch resumes stateless auto configuration.

Additionally the ipv6 address autoconfig command enables on the interface the DHCPv6 Stateless client to
receive DHCP stateless information and this information is received from a DHCPv6 server regardless whether
IPv6 Forwarding is enabled or not.

Example

The following example assigns the IPv6 address automatically:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 address autoconfig
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

618

IPv6 Commands

ipv6 address eui-64

ipv6 address eui-64

Use the ipv6 address eui-64 command in Interface Configuration mode to configure a global unicast IPv6
address for an interface and enables IPv6 processing on the interface using an EUI-64 interface ID in the low
order 64 bits of the address. To remove the address from the interface, use the no form of this command.

Syntax

ipv6 address ipv6-prefix/prefix-length eui-64

no ipv6 address [ipv6-prefix/prefix-length eui-64]

Parameters

• ipv6-prefix—Specifies the global unicast IPv6 address assigned to the interface. This argument must be
in the form documented in RFC4293 where the address is specified in hexadecimal using 16-bit values
between colons.

• prefix-length—The length of the IPv6 prefix. A decimal value that indicates how many of the high-order
contiguous bits of the address comprise the prefix (the network portion of the address). A slash mark
must precede the decimal value.

Default Configuration

No IP address is defined for the interface.

Command Mode

Interface Configuration mode

User Guidelines

If the value specified for the prefix-length argument is greater than 64 bits, the prefix bits have precedence
over the interface ID.

The IPv6 address is built from ipv6-prefix and the EUI-64 Interface ID by the following way:

• The first prefix-length bits are taken from ipv6-prefix.

• If prefix-length < 64 then

The following (64-prefix-length) bits are filled by 0s.

• The last 64 bits are taken from the EUI-64 Interface ID.

• If prefix-length equals to 64 then the following 64 bits are taken from the EUI-64 Interface ID.

• If prefix-length > 64 then the following (128-prefix-length) bits are taken from the last (64-(prefix-length

-64)) bits of the EUI-64 Interface ID.

If the switch detects another host using one of its IPv6 addresses, it adds the IPv6 address and displays an
error message on the console.

Cisco Business Switches 350 Series CLI Guide

619

ipv6 address eui-64

Example

IPv6 Commands

The following example enables IPv6 processing on VLAN 1, configures IPv6 global address
2001:0DB8:0:1::/64 and specifies an EUI-64 interface ID in the low order 64 bits of the address:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 address 2001:0DB8:0:1::/64 eui-64
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

620

IPv6 Commands

ipv6 address link-local

ipv6 address link-local

Use the ipv6 address link-local command in Interface Configuration mode to configure an IPv6 link local
address for an interface and enable IPv6 processing on the interface. To remove the manually configured link
local address from the interface, use the no form of this command.

Syntax

ipv6 address ipv6-prefix link-local

no ipv6 address [link-local]

Parameters

• ipv6-address—Specifies the IPv6 network assigned to the interface. This argument must be in the form
documented in RFC4293 where the address is specified in hexadecimal using 16-bit values between
colons.

Default Configuration

The default Link-local address is defined.

Command Mode

Interface Configuration mode

User Guidelines

The switch automatically generates a link local address for an interface when IPv6 processing is enabled on
the interface, typically when an IPv6 address is configured on the interface. To manually specify a link local
address to be used by an interface, use the ipv6 address link-local command.

The ipv6 address link-local command cannot be applied to define an IPv6 address on an ISATAP interface.

Example

The following example enables IPv6 processing on VLAN 1 and configures FE80::260:3EFF:FE11:6770 as
the link local address for VLAN 1:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 address FE80::260:3EFF:FE11:6770 link-local
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

621

ipv6 default-gateway

IPv6 Commands

ipv6 default-gateway

Use the ipv6 default-gateway Global Configuration mode command to define an IPv6 default gateway. To
remove the IPv6 default gateway, use the no form of this command.

Syntax

ipv6 default-gateway {ipv6-address [outgoing-interface-id]} | interface-id

no ipv6 default-gateway [{ipv6-address [outgoing-interface-id]} | interface-id]

Parameters

• ipv6-address—Specifies the IPv6 address of an IPv6 router that can be used to reach a network.

• outgoing-interface-id—Outgoing Interface identifier.

• interface-id—Specifies the Interface Identifier of the outgoing interface that can be used to reach a

network. This argument can be applied only to point-to-point interfaces (manual IPv6 over IPv4 tunnels).

Default Configuration

No default gateway is defined.

Command Mode

Global Configuration mode

Example 1. The following example defines a default gateway with a global IPv6 address:

switchxxxxxx(config)# ipv6 default-gateway 5::5

Example 2. The following example defines a default gateway with a link-local IPv6 address:

switchxxxxxx(config)# ipv6 default-gateway FE80::260:3EFF:FE11:6770%vlan1

Example 3. The following example defines a default gateway on manual tunnel 1:

switchxxxxxx(config)# ipv6 default-gateway tunnel1

Cisco Business Switches 350 Series CLI Guide

622

IPv6 Commands

ipv6 enable

ipv6 enable

Use the ipv6 enable command in Interface Configuration mode to enable IPv6 processing on an interface.

To disable IPv6 processing on an interface that has not been configured with an explicit IPv6 address, use the
no form of this command.

Syntax

ipv6 enable

no ipv6 enable

Default Configuration

IPv6 interface is disabled.

Command Mode

Interface Configuration mode

User Guidelines

This command automatically configures an IPv6 link-local Unicast address on the interface while also enabling
the interface for IPv6 processing. The no ipv6 enable command does not disable IPv6 processing on an
interface that is configured with an explicit IPv6 address.

Example

The following example enables VLAN 1 for the IPv6 addressing mode.

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 enable
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

623

ipv6 hop-limit

ipv6 hop-limit

IPv6 Commands

Use the ipv6 hop-limit command in Global Configuration mode to configure the maximum number of hops
used in all IPv6 packets that are originated by the router.

To return the hop limit to its default value, use the no form of this command.

Syntax

ipv6 hop-limit value

no ipv6 hop-limit

Parameters

• value—Maximum number of hops. The acceptable range is from 1 to 255.

Default Configuration

The default is 64 hops.

Command Mode

Global Configuration mode

Example

The following example configures a maximum number of 15 hops for all IPv6 packets that are originated
from the router:

switchxxxxxx(config)# ipv6 hop-limit 15

Cisco Business Switches 350 Series CLI Guide

624

IPv6 Commands

ipv6 icmp error-interval

ipv6 icmp error-interval

Use the ipv6 icmp error-interval command in Global Configuration mode to configure the interval and
bucket size for IPv6 ICMP error messages. To return the interval to its default setting, use the no form of this
command.

Syntax

ipv6 icmp error-interval milliseconds [bucketsize]

no ipv6 icmp error-interval

Parameters

• milliseconds—Time interval between tokens being placed in the bucket. Each token represents a single
ICMP error message. The acceptable range is from 0 to 2147483647. A value of 0 disables ICMP rate
limiting.

• bucketsize—Maximum number of tokens stored in the bucket. The acceptable range is from 1 to 200.

Default Configuration

The default interval is 100ms and the default bucketsize is 10 i.e. 100 ICMP error messages per second.

Command Mode

Global Configuration mode

User Guidelines

Use this command to limit the rate at which IPv6 ICMP error messages are sent. A token bucket algorithm is
used with one token representing one IPv6 ICMP error message. Tokens are placed in the virtual bucket at a
specified interval until the maximum number of tokens allowed in the bucket is reached.

The milliseconds argument specifies the time interval between tokens arriving in the bucket. The optional
bucketsize argument is used to define the maximum number of tokens allowed in the bucket. Tokens are
removed from the bucket when IPv6 ICMP error messages are sent, which means that if the bucketsize is set
to 20, a rapid succession of 20 IPv6 ICMP error messages can be sent. When the bucket is empty of tokens,
IPv6 ICMP error messages are not sent until a new token is placed in the bucket.

Average Packets Per Second = (1000/ milliseconds) * bucketsize.

To disable ICMP rate limiting, set the milliseconds argument to zero.

Example

The following example shows an interval of 50 milliseconds and a bucket size of 20 tokens being configured
for IPv6 ICMP error messages:

switchxxxxxx(config)# ipv6 icmp error-interval 50 20

Cisco Business Switches 350 Series CLI Guide

625

ipv6 link-local default zone

IPv6 Commands

ipv6 link-local default zone

Use the Ipv6 link-local default zone command to configure an interface to egress a link local packet without
a specified interface or with the default zone 0.

Use the no form of this command to return the default link local interface to the default value.

Syntax

Ipv6 link-local default zone interface-id

no Ipv6 link-local default zone

Parameters

• interface-id—Specifies the interface that is used as the egress interface for packets sent without a specified

IPv6Z interface identifier or with the default 0 identifier.

Default

By default, link local default zone is disabled.

Command Mode

Global Configuration mode

Example

The following example defines VLAN 1 as a default zone:

switchxxxxxx(config)# ipv6 link-local default zone vlan1

Cisco Business Switches 350 Series CLI Guide

626

IPv6 Commands

ipv6 nd advertisement-interval

ipv6 nd advertisement-interval

Use the ipv6 nd advertisement-interval in Interface Configuration mode to configure the advertisement
interval option in router advertisements (RAs).

To reset the interval to the default value, use the no form of this command.

Syntax

ipv6 nd advertisement-interval

no ipv6 nd advertisement-interval

Default Configuration

Advertisement interval option is not sent.

Command Mode

Interface Configuration mode

User Guidelines

Use the ipv6 nd advertisement-interval command to indicate to a visiting mobile node the interval at which
that node may expect to receive RAs. The node may use this information in its movement detection algorithm.

Example

The following example enables the advertisement interval option to be sent in RAs:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 nd advertisement-interval
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

627

ipv6 nd dad attempts

IPv6 Commands

ipv6 nd dad attempts

Use the ipv6 nd dad attempts command in Interface Configuration mode to configure the number of
consecutive neighbor solicitation messages that are sent on an interface while duplicate address detection is
performed on the Unicast IPv6 addresses of the interface.

To return the number of messages to the default value, use the no form of this command.

Syntax

ipv6 nd dad attempts value

no ipv6 nd dad attempts

Parameters

• value—The number of neighbor solicitation messages. The acceptable range is from 0 to 600. Configuring

a value of 0 disables duplicate address detection processing on the specified interface; a value of 1
configures a single transmission without follow-up transmissions.

Default Configuration

1

Command Mode

Interface Configuration mode

User Guidelines

Duplicate address detection verifies the uniqueness of new Unicast IPv6 addresses before the addresses are
assigned to interfaces (the new addresses remain in a tentative state while duplicate address detection is
performed). Duplicate address detection uses neighbor solicitation messages to verify the uniqueness of
Unicast IPv6 addresses.

The DupAddrDetectTransmits node configuration variable (as specified in RFC 4862, IPv6 Stateless Address
Autoconfiguration) is used to automatically determine the number of consecutive neighbor solicitation messages
that are sent on an interface, while duplicate address detection is performed on a tentative Unicast IPv6 address.

The interval between duplicate address detection, neighbor solicitation messages (the duplicate address
detection timeout interval) is specified by the neighbor discovery-related variable RetransTimer (as specified
in RFC 4861, Neighbor Discovery for IPv6), which is used to determine the time between retransmissions of
neighbor solicitation messages to a neighbor when resolving the address or when probing the reachability of
a neighbor. This is the same management variable used to specify the interval for neighbor solicitation messages
during address resolution and neighbor unreachability detection.

Duplicate address detection is suspended on interfaces that are administratively down. While an interface is
administratively down, the Unicast IPv6 addresses assigned to the interface are set to a pending state. Duplicate
address detection is automatically restarted on an interface when the interface returns to being administratively
up.

An interface returning to administratively up, restarts duplicate address detection for all of the Unicast IPv6
addresses on the interface. While duplicate address detection is performed on the link-local address of an

Cisco Business Switches 350 Series CLI Guide

628

IPv6 Commands

ipv6 nd dad attempts

interface, the state for the other IPv6 addresses is still set to TENTATIVE. When duplicate address detection
is completed on the link-local address, duplicate address detection is performed on the remaining IPv6
addresses.

When duplicate address detection identifies a duplicate address, the state of the address is set to DUPLICATE
and the address is not used. If the duplicate address is the link-local address of the interface, the processing
of IPv6 packets is disabled on the interface and an error SYSLOG message is issued.

If the duplicate address is a global address of the interface, the address is not used and an error SYSLOG
message is issued.

All configuration commands associated with the duplicate address remain as configured while the state of the
address is set to DUPLICATE.

If the link-local address for an interface changes, duplicate address detection is performed on the new link-local
address and all of the other IPv6 address associated with the interface are regenerated (duplicate address
detection is performed only on the new link-local address).

Note. Since DAD is not supported on NBMA interfaces the command is allowed but does not impact on an
IPv6 tunnel interface of the ISATAP type it does not impact. The configuration is saved and will impacted
when the interface type is changed on another type on which DAD is supported (for example, to the IPv6
manual tunnel).

Example

The following example configures five consecutive neighbor solicitation messages to be sent on VLAN 1
while duplicate address detection is being performed on the tentative Unicast IPv6 address of the interface.
The example also disables duplicate address detection processing on VLAN 2.

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 nd dad attempts 5
switchxxxxxx(config-if)# exit
switchxxxxxx(config)# interface vlan 2
switchxxxxxx(config-if)# ipv6 nd dad attempts 0
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

629

ipv6 nd hop-limit

IPv6 Commands

ipv6 nd hop-limit

Use the ipv6 nd hop-limit command in Global Configuration mode to configure the maximum number of
hops used in router advertisements.

To return the hop limit to its default value, use the no form of this command.

Syntax

ipv6 nd hop-limit value

no ipv6 nd hop-limit

Parameters

• value—Maximum number of hops. The acceptable range is from 1 to 255.

Default Configuration

The default value is defined by the ipv6 hop-limit command, or is set to 64 hops, if the command was not
configured.

Command Mode

Interface Configuration mode

User Guidelines

Use this command if you want to change the default value. The default value is defined by the ipv6 hop-limit
command.

Example

The following example configures a maximum number of 15 hops for router advertisements on VLAN 2:

switchxxxxxx(config)# interface vlan 2
switchxxxxxx(config-if)# ipv6 nd hop-limit 15
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

630

IPv6 Commands

ipv6 nd managed-config-flag

ipv6 nd managed-config-flag

Use the ipv6 nd managed-config-flag command in Interface Configuration mode to set the “managed address
configuration flag” in IPv6 router advertisements.

To clear the flag from IPv6 router advertisements, use the no form of this command.

Syntax

ipv6 nd managed-config-flag

no ipv6 nd managed-config-flag

Default Configuration

The “managed address configuration flag” flag is not set in IPv6 router advertisements.

Command Mode

Interface Configuration mode

User Guidelines

Setting the Managed Address Configuration flag in IPv6 router advertisements indicates to attached hosts
whether they should use stateful autoconfiguration to obtain addresses. If this flag is set, the attached hosts
should use stateful autoconfiguration to obtain addresses, and if it is not set, the attached hosts should not use
stateful autoconfiguration to obtain addresses.

Hosts may use stateful and stateless address autoconfiguration simultaneously.

Example

The following example configures the Managed Address Configuration flag in IPv6 router advertisements
on VLAN 1:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 nd managed-config-flag
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

631

ipv6 nd prefix

ipv6 nd prefix

IPv6 Commands

Use the ipv6 nd prefix command in Interface Configuration mode to configure which IPv6 prefixes are
included in IPv6 Neighbor Discovery (ND) router advertisements.

To remove the prefixes, use the no form of this command.

Syntax

ipv6 nd prefix {ipv6-prefix/prefix-length | default} [no-advertise | {[valid-lifetime preferred-lifetime]
[no-autoconfig] [off-link | no-onlink]}]

no ipv6 nd prefix [ipv6-prefix/prefix-length | default]

Parameters

• ipv6-prefix—IPv6 network number to include in router advertisements. This argument must be in the

form documented in RFC4293, where the address is specified in hexadecimal using 16-bit values between
colons.

• prefix-length—Length of the IPv6 prefix. A decimal value that indicates how many of the high-order
contiguous bits of the address comprise the prefix (the network portion of the address). A slash mark
must precede the decimal value.

• default—Default values used for automatic advertised prefixes configured as addresses on the interface

using the ipv6 address command.

• no-advertise—Prefix is not advertised.

• valid-lifetime—Remaining length of time, in seconds, that this prefix will continue to be valid, i.e., time
until invalidation. A value of 4,294,967,295 represents infinity. The address generated from an invalidated
prefix should not appear as the destination or source address of a packet.

• preferred-lifetime—Remaining length of time, in seconds, that this prefix will continue to be preferred,
i.e., time until deprecation. A value of 4,294,967,295 represents infinity. The address generated from a
deprecated prefix should no longer be used as a source address in new communications, but packets
received on such an interface are processed as expected. The preferred-lifetime must not be larger than
the valid-lifetime.

• no-autoconfig—Indicates to hosts on the local link that the specified prefix cannot be used for IPv6

autoconfiguration.The prefix will be advertised with the A-bit clear.

• off-link—Configures the specified prefix as off-link. The prefix will be advertised with the L-bit clear.
The prefix will not be inserted into the routing table as a connected prefix. If the prefix is already present
in the routing table as a connected prefix (for example, because the prefix was also configured using the
ipv6 address command), then it will be removed.

• no-onlink—Configures the specified prefix as not on-link. The prefix will be advertised with the L-bit

clear.

Default Configuration

All prefixes configured on interfaces that originate IPv6 router advertisements are advertised with a valid
lifetime of 2,592,000 seconds (30 days) and a preferred lifetime of 604,800 seconds (7 days).

Cisco Business Switches 350 Series CLI Guide

632

IPv6 Commands

ipv6 nd prefix

Note that by default:

• All prefixes are inserted in the routing table as connected prefixes.

• All prefixes are advertised as on-link (for example, the L-bit is set in the advertisement)

• All prefixes are advertised as an auto-configuration prefix (for example, the A-bit is set in the

advertisement)

Command Mode

Interface Configuration mode

User Guidelines

This command enables control over the individual parameters per prefix, including whether the prefix should
be advertised.

Use the ipv6 nd prefix ipv6-prefix/prefix-length command to add the prefix to the Prefix table.

Use the no ipv6 nd prefix ipv6-prefix/prefix-length command to remove the prefix from the Prefix table.

Use the no ipv6 nd prefix command without the ipv6-prefix/prefix-length argument o remove all prefixes
from the Prefix Table.

Note. The no ipv6 nd prefix command does not return the default values to the original default values.

The switch supports the following advertisement algorithm:

• Advertise all prefixes that are configured as addresses on the interface using the parameters defined by
the ipv6 nd prefix default command (or the default value if the command has not been configured)
except refixes that are placed in the Prefix table (changed (configured) by the ipv6 nd prefix command).

Advertise all prefixes configured by the ipv6 nd prefix command without the no-advertise keyword.

Default Keyword

The default keyword can be used to set default values for automatic advertised prefixes configured as addresses
on the interface using the ipv6 address command.

Note. These default values are not used as the default values in the ipv6 nd prefix command.

Use the no ipv6 nd prefix default command to return the default values to the original default values.

On-Link

When on-link is “on” (by default), the specified prefix is assigned to the link. Nodes sending traffic to such
addresses that contain the specified prefix consider the destination to be locally reachable on the link. An
on-link prefix is inserted into the routing table as a Connected prefix.

Auto-configuration

When auto-configuration is on (by default), it indicates to hosts on the local link that the specified prefix can
be used for IPv6 auto-configuration.

The configuration options affect the L-bit and A-bit settings associated with the prefix in the IPv6 ND Router
Advertisement, and presence of the prefix in the routing table, as follows:

• Default L=1 A=1, In the Routing Table

• no-onlink L=0 A=1, In the Routing Table

Cisco Business Switches 350 Series CLI Guide

633

ipv6 nd prefix

IPv6 Commands

• no-autoconfig L=1 A=0, In the Routing Table

• no-onlink no-autoconfig L=0 A=0, In the Routing Table

• off-link L=0 A=1, Not in the Routing Table

• off-link no-autoconfig L=0 A=0, Not in the Routing Table

Example 1. The following example includes the IPv6 prefix 2001:0DB8::/35 in router advertisements
sent out VLAN 1 with a valid lifetime of 1000 seconds and a preferred lifetime of 900 seconds. The
prefix is inserted in the Routing table:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 nd prefix 2001:0DB8::/35 1000 900
switchxxxxxx(config-if)# exit

Example 2. The following example advertises the prefix with the L-bit clear:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 address 2001::1/64
switchxxxxxx(config-if)# ipv6 nd prefix 2001::/64 3600 3600 no-onlink
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

634

IPv6 Commands

ipv6 nd ra interval

ipv6 nd ra interval

Use the ipv6 nd ra interval command in Interface Configuration mode to configure the interval between
IPv6 router advertisement (RA) transmissions on an interface.

To restore the default interval, use the no form of this command.

Syntax

ipv6 nd ra interval maximum-secs [minimum-secs]

no ipv6 nd ra interval

Parameters

• maximum-secs—Maximum interval between IPv6 RA transmissions in seconds. The range is from 4 to

1800.

• minimum-secs—Minimum interval between IPv6 RA transmissions in seconds. The range is from 3 to

1350.

Default Configuration

maximum-secs is 600 seconds.

minimum-secs is 0.33*maximum-secs, if the value .=> 3 seconds and is 3 seconds, if the value .< 3 seconds.

Command Mode

Interface Configuration mode

User Guidelines

The interval between transmissions should be less than or equal to the IPv6 router advertisement lifetime if
you configure the route as a default router by using this command. To prevent synchronization with other
IPv6 nodes, the actual interval used is randomly selected from a value between the minimum and maximum
values.

The minimum RA interval may never be more than 75% of the maximum RA interval and never less than 3
seconds.

Example 1. The following example configures an IPv6 router advertisement interval of 201 seconds
for VLAN 1:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 nd ra interval 201
switchxxxxxx(config-if)# exit

Example 2. The following examples shows a maximum RA interval of 200 seconds and a minimum
RA interval of 50 seconds:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 nd ra interval 200 50
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

635

ipv6 nd ra lifetime

IPv6 Commands

ipv6 nd ra lifetime

Use the ipv6 nd ra lifetime command in Interface Configuration mode to configure the Router Lifetime value
in IPv6 router advertisements on an interface.

To restore the default lifetime, use the no form of this command.

Syntax

ipv6 nd ra lifetime seconds

no ipv6 nd ra lifetime

Parameters

• seconds—Remaining length of time, in seconds, that this router will continue to be useful as a default
router (Router Lifetime value). A value of zero indicates that it is no longer useful as a default router.
The acceptable range is 0 or from <Maximum RA Interval> to 9000 seconds.

Default Configuration

The default lifetime value is 3*<Maximum RA Interval> seconds.

Command Mode

Interface Configuration mode

User Guidelines

The Router Lifetime value is included in all IPv6 router advertisements sent out the interface. The value
indicates the usefulness of the router as a default router on this interface. Setting the value to 0 indicates that
the router should not be considered a default router on this interface. The Router Lifetime value can be set to
a non-zero value to indicate that it should be considered a default router on this interface. The non-zero value
for the Router Lifetime value should not be less than the router advertisement interval.

Example

The following example configures an IPv6 router advertisement lifetime of 1801 seconds for VLAN 1:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 nd ra lifetime 1801
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

636

IPv6 Commands

ipv6 nd ra suppress

ipv6 nd ra suppress

Use the ipv6 nd ra suppress command in Interface Configuration mode to suppress IPv6 router advertisement
transmissions on an interface. To re-enable the sending of IPv6 router advertisement transmissions on an
interface, use the no form of this command.

Syntax

ipv6 nd ra suppress

no ipv6 nd ra suppress

Default Configuration

LAN interface - IPv6 router advertisements are automatically sent.

Point-to-Point interface - IPv6 router advertisements are suppressed.

NBMA interface - IPv6 router advertisements are suppressed.

Command Mode

Interface Configuration mode

User Guidelines

Use the no ipv6 nd ra suppress command to enable the sending of IPv6 router advertisement transmissions
on a Point-to-Point interface (for example, manual tunnel).

NBMA interface - IPv6 router advertisements are suppressed.

Use the no ipv6 nd ra suppress command to enable the sending of IPv6 router advertisement transmissions
on a NBMA interface (for example, ISATAP tunnel).

Example 1. The following example suppresses IPv6 router advertisements on vlan 1:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 nd ra suppress
switchxxxxxx(config-if)# exit

Example 2. The following example enables the sending of IPv6 router advertisements on tunnel 1:

switchxxxxxx(config)# interface tunnel 1
switchxxxxxx(config-if)# no ipv6 nd ra suppress
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

637

ipv6 nd reachable-time

IPv6 Commands

ipv6 nd reachable-time

Use the ipv6 nd reachable-time command in Interface Configuration mode to configure the amount of time
that a remote IPv6 node is considered reachable after some reachability confirmation event has occurred.

To restore the default time, use the no form of this command.

Syntax

ipv6 nd reachable-time milliseconds

no ipv6 nd reachable-time

Parameters

• milliseconds—Amount of time that a remote IPv6 node is considered reachable (in milliseconds). The

acceptable range is from 0 to 3600000 milliseconds.

Default Configuration

0 milliseconds (unspecified) is advertised in router advertisements and the value 30000 (30 seconds) is used
for the neighbor discovery activity of the router itself.

Command Mode

Interface Configuration mode

User Guidelines

The configured time enables the router to detect unavailable neighbors. Shorter configured times enable the
router to detect unavailable neighbors more quickly; however, shorter times consume more IPv6 network
bandwidth and processing resources in all IPv6 network devices. Very short configured times are not
recommended in normal IPv6 operation.

The configured time is included in all router advertisements sent out of an interface so that nodes on the same
link use the same time value. A value of 0 means indicates that the configured time is unspecified by this
router.

Example

The following example configures an IPv6 reachable time of 1,700,000 milliseconds for VLAN 1:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 nd reachable-time 1700000
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

638

IPv6 Commands

ipv6 nd router-preference

ipv6 nd router-preference

Use the ipv6 nd router-preference command in Interface Configuration mode to configure a default router
preference (DRP) for the router on a specific interface.

To return to the default DRP, use the no form of this command.

Syntax

ipv6 nd router-preference {high | medium | low}

no ipv6 nd router-preference

Parameters

• high—Preference for the router specified on an interface is high.

• medium—Preference for the router specified on an interface is medium.

• low—Preference for the router specified on an interface is low.

Default Configuration

Router advertisements (RAs) are sent with the medium preference.

Command Mode

Interface Configuration mode

User Guidelines

RA messages are sent with the DRP configured by the this command. If no DRP is configured, RAs are sent
with a medium preference.

A DRP is useful when, for example, two routers on a link may provide equivalent, but not equal-cost, routing,
and policy may dictate that hosts should prefer one of the routers.

Example

The following example configures a DRP of high for the router on VLAN 1:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 nd router-preference high
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

639

ipv6 redirects

ipv6 redirects

IPv6 Commands

Use the ipv6 redirects command in Interface Configuration mode to enable the sending of ICMP IPv6 redirect
messages to re-send a packet through the same interface on which the packet was received.

To disable the sending of redirect messages, use the no form of this command.

Syntax

ipv6 redirects

no ipv6 redirects

Default Configuration

The sending of ICMP IPv6 redirect messages is enabled.

Command Mode

Interface Configuration mode

Example

The following example disables the sending of ICMP IPv6 redirect messages on VLAN 100 and re-enables
the messages on VLAN 2:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# no ipv6 redirects
switchxxxxxx(config-if)# exit
switchxxxxxx(config)# interface vlan 2
switchxxxxxx(config-if)# ipv6 redirects
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

640

IPv6 Commands

ipv6 route

ipv6 route

Use the ipv6 route command in Global Configuration mode to establish static IPv6 routes.

To remove a previously configured static route, use the no form of this command.

Syntax

ipv6 route ipv6-prefix/prefix-length {{next-ipv6-address [outgoing-interface-id]} | interface-id} [metric]

no ipv6 route ipv6-prefix/prefix-length [{next-ipv6-address [outgoing-interface-id]} | interface-id]

Parameters

• ipv6-prefix—IPv6 network that is the destination of the static route. Can also be a host name when static

host routes are configured.

• prefix-length—Length of the IPv6 prefix. A decimal value that indicates how many of the high-order
contiguous bits of the address comprise the prefix (the network portion of the address). A slash mark
must precede the decimal value.

• next-ipv6-address—IPv6 address of the next hop that can be used to reach the specified network. If the
next-ipv6-address argument is a link local address it must be defined in the zone format: IPv6 Zone
Format> ::= IPv6-Link-Local-Address%Interface-ID. The interface-id argument must be coded without
spaces.

• outgoing-interface-id—Outgoing Interface identifier.

• interface-id—Outgoing Interface identifier. This argument can be applied only to point-to-point interfaces

(manual IPv6 over IPv4 tunnels).

• metric—Static route metric. Acceptable values are from 1 to 65535. The default value is 1.

Default Configuration

Static entries are not configured in the IPv6 neighbor discovery cache.

Command Mode

Global Configuration mode

User Guidelines

Use the ipv6 route ipv6-prefix/prefix-length interface-id [metric] command to define a static route, if the
outgoing interface is a manual tunnel.

If the next-ipv6-address argument is a global IPv6 address that belongs to an on-link prefix you can omit the
outgoing-interface-id argument and in this case the L2 interface on which this on-link prefix is defined will
be used as the outgoing interface. If the outgoing-interface-id argument is configured it overrides this switch
decision.

If the next-ipv6-address argument is a global IPv6 address that does not belong to any on-link prefix you must
configure the outgoing-interface-id argument.

Cisco Business Switches 350 Series CLI Guide

641

ipv6 route

IPv6 Commands

If the next-ipv6-address argument is a link-local IPv6 address and the outgoing-interface-id argument is
omitted the zone of the next-ipv6-address argument will be used as the outgoing interface. If the
outgoing-interface-id argument is configured it overrides this zone.

Example 1. The following example defines a static route with a global next hop:

switchxxxxxx(config)# ipv6 route 2001::/64 5::5 10

Example 2. The following example defines a static route with a link-local next hop:

switchxxxxxx(config)# ipv6 route 2001:DB8:2222::/48 FE80::260:3EFF:FE11:6770%vlan1 12

Example 3. The following example defines a static route on manual tunnel 1:

switchxxxxxx(config)# ipv6 route 2001:DB8:2222::/48 tunnel1

Example 4. The following example defines a static route on with the outgoing interface:

switchxxxxxx(config)# ipv6 route 2001::/64 5::5 vlan10 10

Cisco Business Switches 350 Series CLI Guide

642

IPv6 Commands

ipv6 unicast-routing

ipv6 unicast-routing

Use the ipv6 unicast-routing command in Global Configuration mode to enable the forwarding of IPv6
Unicast datagrams.

To disable the forwarding of IPv6 Unicast datagrams, use the no form of this command.

Syntax

ipv6 unicast-routing

no ipv6 unicast-routing

Default Configuration

IPv6 Unicast routing is disabled.

Command Mode

Global Configuration mode

Example

The following example enables the forwarding of IPv6 Unicast datagrams:

switchxxxxxx(config)# ipv6 unicast-routing

Cisco Business Switches 350 Series CLI Guide

643

ipv6 unreachables

IPv6 Commands

ipv6 unreachables

Use the ipv6 unreachables command in Interface Configuration mode to enable the generation of Internet
Control Message Protocol for IPv6 (ICMPv6) unreachable messages for any packets arriving on a specified
interface.

To prevent the generation of unreachable messages, use the no form of this command.

Syntax

ipv6 unreachables

no ipv6 unreachables

Default Configuration

The sending of ICMP IPv6 unreachable messages is enabled.

Command Mode

Interface Configuration mode

User Guidelines

If the switch receives a Unicast packet destined for itself that uses a protocol it does not recognize, it sends
an ICMPv6 unreachable message to the source.

If the switch receives a datagram that it cannot deliver to its ultimate destination because it knows of no route
to the destination address, it replies to the originator of that datagram with an ICMP host unreachable message.

Example

The following example disables the generation of ICMPv6 unreachable messages, as appropriate, on an
interface:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# no ipv6 unreachables
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

644

IPv6 Commands

show ipv6 interface

show ipv6 interface

Use the show ipv6 interface command in user EXEC or privileged EXEC mode to display the usability status
of interfaces configured for IPv6.

Syntax

show ipv6 interface [brief] | [[interface-id] [prefix]]

Parameters

• brief—Displays a brief summary of IPv6 status and configuration for each interface where IPv6 is

defined.

• interface-id—Interface identifier about which to display information.

• prefix—Prefix generated from a local IPv6 prefix pool.

Default Configuration

Option brief - all IPv6 interfaces are displayed.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

Use this command to validate the IPv6 status of an interface and its configured addresses. This command also
displays the parameters that IPv6 uses for operation on this interface and any configured features.

If the interface’s hardware is usable, the interface is marked up.

If you specify an optional interface identifier, the command displays information only about that specific
interface. For a specific interface, you can enter the prefix keyword to see the IPv6 neighbor discovery (ND)
prefixes that are configured on the interface.

The keyword is supported only if IPv6 unicast routing is enabled.

Example 1. The show ipv6 interface command displays information about the specified interface:

switchxxxxxx# show ipv6 interface vlan 1
VLAN 1 is up/up
IPv6 is enabled, link-local address is FE80::0DB8:12AB:FA01
IPv6 Forwarding is enabled
Global unicast address(es):
Ipv6 Global Address
2000:0DB8::2/64 (ANY)
2000:0DB8::2/64
2000:1DB8::2011/64
Joined group address(es):
FF02::1
FF02::2
FF02::1:FF11:6770

Type
Manual
Manual
Manual

Cisco Business Switches 350 Series CLI Guide

645

show ipv6 interface

IPv6 Commands

MTU is 1500 bytes
ICMP error messages limited interval is 100ms; Bucket size is 10 tokens
ICMP redirects are enabled
ND DAD is enabled, number of DAD attempts: 1
ND reachable time is 30000 milliseconds
ND advertised reachable time is 0 milliseconds
ND advertised retransmit interval is 0 milliseconds
ND router maximum advertisement interval is 600 seconds
ND router minimum advertisement interval is 198 seconds (DEFAULT)
ND router advertisements live for 1800 seconds
ND advertised default router preference is Medium
Stateless autoconfiguration is enabled.
Stateless autoconfiguration is not available (IPv6 Forwarding is enabled).
MLD Version is 2
Field Descriptions:

• vlan 1 is up/up—Indicates the interface status: administrative/operational.

• IPv6 is enabled, stalled, disabled (stalled and disabled are not shown in sample

output)—Indicates that IPv6 is enabled, stalled, or disabled on the interface. If IPv6 is enabled,
the interface is marked Enabled. If duplicate address detection processing identified the link-local
address of the interface as being a duplicate address, the processing of IPv6 packets is disabled
on the interface and the interface is marked Stalled. If IPv6 is not enabled, the interface is marked
Disabled.

• link-local address—Displays the link-local address assigned to the interface.

• Global unicast address(es):—Displays the global Unicast addresses assigned to the interface.

The type is manual or autoconfig.

• Joined group address(es):—Indicates the Multicast groups to which this interface belongs.

• MTU is 1500 bytes—Maximum transmission unit of the interface.

• ICMP error messages—Specifies the minimum interval (in milliseconds) between error

messages sent on this interface.

• ICMP redirects—State of ICMP IPv6 redirect messages on the interface (the sending of the

messages is enabled or disabled).

• ND DAD—The state of duplicate address detection on the interface (enabled or disabled).

• number of DAD attempts:—Number of consecutive neighbor solicitation messages that are

sent on the interface while duplicate address detection is performed.

• ND reachable time—Displays the neighbor discovery reachable time (in milliseconds) assigned

to this interface.

• ND advertised reachable time—Displays the neighbor discovery reachable time (in

milliseconds) advertised on this interface.

• ND advertised retransmit interval—Displays the neighbor discovery retransmit interval (in

milliseconds) advertised on this interface.

• ND router advertisements—Specifies the interval (in seconds) for neighbor discovery router
advertisements sent on this interface and the amount of time before the advertisements expire.

• ND advertised default router preference is Medium—DRP for the router on a specific

interface.

Cisco Business Switches 350 Series CLI Guide

646

IPv6 Commands

show ipv6 interface

• MLD Version—Version of MLD

Example 2. The show ipv6 interface command displays information about the specified manual
Ipv6 tunnel:

Type
Manual
Manual
Manual

switchxxxxxx# show ipv6 interface tunnel 2
Tunnel 2 is up/up
IPv6 is enabled, link-local address is FE80::0DB8:12AB:FA01
IPv6 Forwarding is enabled
Global unicast address(es):
Ipv6 Global Address
2000:0DB8::2/64 (ANY)
2000:0DB8::2/64
2000:1DB8::2011/64
Joined group address(es):
FF02::1
FF02::2
FF02::1:FF11:6770
MTU is 1500 bytes
ICMP error messages limited interval is 100ms; Bucket size is 10 tokens
ICMP redirects are enabled
ND DAD is enabled, number of DAD attempts: 1
ND reachable time is 30000 milliseconds
ND advertised reachable time is 0 milliseconds
ND advertised retransmit interval is 0 milliseconds
ND router advertisements are sent every 200 seconds
ND router advertisements live for 1800 seconds
ND advertised default router preference is Medium
Hosts use stateless autoconfig for addresses.
Stateless autoconfiguration is disabled.
MLD Version is 2
Tunnel mode is manual
Tunnel Local IPv4 address : 10.10.10.1(auto)
Tunnel Remote Ipv4 address : 10.1.1.1
Field Descriptions:

• vlan 1 is up/up—Indicates the interface status: administrative/operational.

• IPv6 is enabled, stalled, disabled (stalled and disabled are not shown in sample

output)—Indicates that IPv6 is enabled, stalled, or disabled on the interface. If IPv6 is enabled,
the interface is marked “enabled.” If duplicate address detection processing identified the
link-local address of the interface as being a duplicate address, the processing of IPv6 packets
is disabled on the interface and the interface is marked “stalled.” If IPv6 is not enabled, the
interface is marked “disabled.”

• link-local address—Displays the link-local address assigned to the interface.

• Global Unicast address(es):—Displays the global Unicast addresses assigned to the interface.

The type is manual or autoconfig.

• Joined group address(es):—Indicates the Multicast groups to which this interface belongs.

• —Maximum transmission unit of the interface.

• ICMP error messages—Specifies the minimum interval (in milliseconds) between error

messages sent on this interface.

• ICMP redirects—The state of Internet Control Message Protocol (ICMP) IPv6 redirect messages

on the interface (the sending of the messages is enabled or disabled).

• ND DAD—The state of duplicate address detection on the interface (enabled or disabled).

Cisco Business Switches 350 Series CLI Guide

647

show ipv6 interface

IPv6 Commands

• number of DAD attempts:—Number of consecutive neighbor solicitation messages that are

sent on the interface while duplicate address detection is performed.

• ND reachable time—Displays the neighbor discovery reachable time (in milliseconds) assigned

to this interface.

• ND advertised reachable time—Displays the neighbor discovery reachable time (in

milliseconds) advertised on this interface.

• ND advertised retransmit interval—Displays the neighbor discovery retransmit interval (in

milliseconds) advertised on this interface.

• ND router advertisements—Specifies the interval (in seconds) for neighbor discovery router
advertisements sent on this interface and the amount of time before the advertisements expire.

• ND advertised default router preference is Medium—The DRP for the router on a specific

interface.

• MLD Version—The version of MLD

• Tunnel mode—Specifies the tunnel mode: manual

• Tunnel Local IPv4 address—Specifies the tunnel local IPv4 address and have one of the

following formats:

ipv4-address

ipv4-address (auto)

ipv4-address (interface-id)

Tunnel Remote Ipv4 address—Specifies the tunnel remote IPv4 address

Example 3. The show ipv6 interface command displays information about the specified ISATAP
tunnel:

switchxxxxxx# show ipv6 interface tunnel 1
Tunnel 1 is up/up
IPv6 is enabled, link-local address is FE80::0DB8:12AB:FA01
ICMP redirects are disabled
Global unicast address(es):
Ipv6 Global Address
2000:0DB8::2/64 (ANY)
2000:0DB8::2/64
2000:1DB8::2011/64
Joined group address(es):
FF02::1
FF02::2
FF02::1:FF11:6770

Type
Manual
Manual
Manual

is 1500 bytes

ICMP error messages limited interval is 100ms; Bucket size is 10 tokens
ICMP redirects are enabled
ND DAD is disabled, number of DAD attempts: 1
ND reachable time is 30000 milliseconds
ND advertised reachable time is 0 milliseconds
ND advertised retransmit interval is 0 milliseconds
ND router advertisements are sent every 200 seconds
ND router advertisements live for 1800 seconds
ND advertised default router preference is Medium
Stateless autoconfiguration is disabled.
MLD Version is 2
Tunnel mode is ISATAP

Cisco Business Switches 350 Series CLI Guide

648

IPv6 Commands

show ipv6 interface

Tunnel Local IPv4 address : 10.10.10.1(VLAN 1)
ISATAP Router DNS name is isatap
Field Descriptions:

• ND DAD—The state of duplicate address detection on the interface (enabled or disabled). Note.
The state of duplicate address detection on an IPv6 tunnel interface of ISATAP type always is
displayed as disabled regardless of a value of the number of DAD attempts parameter because
DAD is not supported on NBMA interfaces. The switch will enable DAD automatically when
the user change the type of the tunnel to manual if a the parameter value bigger than 0.

• number of DAD attempts:—Number of consecutive neighbor solicitation messages that are

sent on the interface while duplicate address detection is performed.

• vlan 1 is up/up—Indicates the interface status: administrative/operational.

• IPv6 is enabled, stalled, disabled (stalled and disabled are not shown in sample

output)—Indicates that IPv6 is enabled, stalled, or disabled on the interface. If IPv6 is enabled,
the interface is marked “enabled.” If duplicate address detection processing identified the
link-local address of the interface as being a duplicate address, the processing of IPv6 packets
is disabled on the interface and the interface is marked “stalled.” If IPv6 is not enabled, the
interface is marked “disabled.”

• link-local address—Displays the link-local address assigned to the interface.

• Global Unicast address(es):—Displays the global Unicast addresses assigned to the interface.

The type is manual or autoconfig.

• Joined group address(es):—Indicates the Multicast groups to which this interface belongs.

• —Maximum transmission unit of the interface.

• ICMP error messages—Specifies the minimum interval (in milliseconds) between error

messages sent on this interface.

• ICMP redirects—The state of Internet Control Message Protocol (ICMP) IPv6 redirect messages

on the interface (the sending of the messages is enabled or disabled).

• number of DAD attempts:—Number of consecutive neighbor solicitation messages that are

sent on the interface while duplicate address detection is performed.

• ND reachable time—Displays the neighbor discovery reachable time (in milliseconds) assigned

to this interface.

• ND advertised reachable time—Displays the neighbor discovery reachable time (in

milliseconds) advertised on this interface.

• ND advertised retransmit interval—Displays the neighbor discovery retransmit interval (in

milliseconds) advertised on this interface.

• ND router advertisements—Specifies the interval (in seconds) for neighbor discovery router
advertisements sent on this interface and the amount of time before the advertisements expire.

• ND advertised default router preference is Medium—The DRP for the router on a specific

interface.

• MLD Version—The version of MLD

• Tunnel mode—Specifies the tunnel mode: isatap

Cisco Business Switches 350 Series CLI Guide

649

show ipv6 interface

IPv6 Commands

• Tunnel Local IPv4 address—Specifies the tunnel local IPv4 address and have one of the

following formats:

• ipv4-address

• ipv4-address (auto)

• ipv4-address (interface-id)

• Tunnel Remote Ipv4 address—Specifies the tunnel remote IPv4 address

• ISATAP Router DNS name is—The DNS name of the ISATAP Router

Example 4. The following command with the brief keyword displays information about all interfaces
that IPv6 is defined on:

switchxxxxxx# show ipv6 interface brief
Interface Interface IPv6

State

State

Link Local
IPv6 Address

MLD

Number of

Version Global Addresses

--------- --------- ------- ----------------- -------
enabled FE80::0DB8:12AB:FA01
up/up
vlan 1
stalled FE80::0DB8:12AB:FA01
up/up
vlan 2
up/down
enabled FE80::0DB8:12AB:FA01
vlan 3
down/down enabled FE80::0DB8:12AB:FA01
vlan 4
enabled FE80::0DB8:12AB:FA01
up/up
vlan 5
enabled FE80::0DB8:12AB:FA01
vlan 100
up/up
stalled FE80::0DB8:12AB:FA01
vlan 1000 up/up

----------------
1
1
1

2

1
1
1

1
1

3
2
1
1
1

Example 5. This sample output shows the characteristics of VLAN 1 that has generated a prefix
from a local IPv6 prefix pool:

switchxxxxxx# configure terminal
switchxxxxxx(config)# interface vlan1
switchxxxxxx(config-if)# ipv6 address 2001:0DB8:1::1/64
switchxxxxxx(config-if)# ipv6 address 2001:0DB8:2::1/64
switchxxxxxx(config-if)# ipv6 address 2001:0DB8:3::1/64
switchxxxxxx(config-if)# ipv6 nd prefix 2001:0DB8:1::/64 no-advertise
switchxxxxxx(config-if)# ipv6 nd prefix 2001:0DB8:3::/64 2912000 564900 off-link
switchxxxxxx(config-if)# ipv6 nd prefix 2001:0DB8:4::/64
switchxxxxxx(config-if)# ipv6 nd prefix 2001:0DB8:5::/64 2912000 564900 off-link
switchxxxxxx(config-if)# exit
switchxxxxxx(config)# exit
switchxxxxxx# show ipv6 interface vlan 1 prefix
IPv6 Prefix Advertisements VLAN 1
Codes: A - Address, P - Prefix is advertised, R is in Routing Table
Code Prefix
---- ----------------

default
AR
2001:0DB8:1::/64
APR 2001:0DB8:2::/64
2001:0DB8:3::/64
AP
2001:0DB8:4::/64
PR
2001:0DB8:5::/64
P

Flags Valid Lifetime
---- ---------------
LA
LA
LA
A
LA
A

2592000
infinite
infinite
infinite
2592000
2912000

Preferred Lifetime
-----------------------
604800
infinite
infinite
infinite
604800
564900

Cisco Business Switches 350 Series CLI Guide

650

IPv6 Commands

show ipv6 link-local default zone

show ipv6 link-local default zone

Use the show ipv6 link-local default zone command in user EXEC or privileged EXEC mode to display the
IPv6 link local default zone.

Syntax

show ipv6 link-local default zone

Command Mode

User EXEC mode

Privileged EXEC mode

Example 1. The following example displays the default zone when it is defined:

switchxxxxxx# show ipv6 link-local default zone
Link Local Default Zone is VLAN 1

Example 2. The following example displays the default zone when it is not defined:

switchxxxxxx# show ipv6 link-local default zone
Link Local Default Zone is not defined

Cisco Business Switches 350 Series CLI Guide

651

show ipv6 nd prefix

IPv6 Commands

show ipv6 nd prefix

Use the show ipv6 nd prefix command in user EXEC or privileged EXEC mode to display IPv6 prefixes
included in IPv6 Neighbor Discovery (ND) router advertisements.

Syntax

show ipv6 nd prefix [interface-id]

Parameters

• interface-id—Specified interface identifier on which prefixes are advertised.

Default Configuration

No prefixes are displayed.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

Use the how ipv6 nd prefix command with the interface-id argument to display prefixes advertised on a
single interface.

Example

The following example displays IPv6 prefixes:

switchxxxxxx# show ipv6 nd prefix vlan 100
vlan 100
default
valid-lifetime 2,592,000 secs
preferred-lifetime 604,800 secs
on-link
auto-config
prefix 2001::1/64
valid-lifetime 3,600 secs
preferred-lifetime 2,700 secs
prefix 2001:2:12/64
no advertise
prefix 2002::1/64
valid-lifetime 3,600 secs
preferred-lifetime 2,700 secs
on-link
prefix 2011::1/64
valid-lifetime 3,600 secs
preferred-lifetime 2,700 secs
off-link
auto-config

Cisco Business Switches 350 Series CLI Guide

652

IPv6 Commands

show ipv6 neighbors

show ipv6 neighbors

Use the show ipv6 neighbors command in User EXEC or Privileged EXEC mode to display IPv6 neighbor
discovery (ND) cache information.

Syntax

show ipv6 neighbors [interface-id | ipv6-address | ipv6-hostname]

Parameters

• interface-id—Specifies the identifier of the interface from which IPv6 neighbor information is to be

displayed.

• ipv6-address—Specifies the IPv6 address of the neighbor. This argument must be in the form documented

in RFC4293 where the address is specified in hexadecimal using 16-bit values between colons.

• ipv6-hostname—Specifies the IPv6 host name of the remote networking device.

Default Configuration

All IPv6 ND cache entries are listed.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

When the interface-id argument is not specified, cache information for all IPv6 neighbors is displayed.
Specifying the interface-id argument displays only cache information about the specified interface.

Example 1. The following is sample output from the show ipv6 neighbors command when entered
with an interface-id:

switchxxxxxx# show ipv6 neighbors vlan 1
IPv6 Address
2000:0:0:4::2
3001:1::45a
FE80::203:A0FF:FED6:141E

0
-
0

0003.a0d6.141e
0002.7d1a.9472
0003.a0d6.141e

Age Link-layer Addr

State Interface Router
REACH VLAN1
REACH VLAN1
REACH VLAN1

Yes
-
No

Example 2. The following is sample output from the show ipv6 neighbors command when entered
with an IPv6 address:

switchxxxxxx# show ipv6 neighbors 2000:0:0:4::2
IPv6 Address
Age Link-layer Addr
2000:0:0:4::2
Field Descriptions:

0003.a0d6.141e

0

State Interface Router
REACH VLAN1

Yes

• Total number of entries—Number of entries (peers) in the cache.

• IPv6 Address—IPv6 address of neighbor or interface.

Cisco Business Switches 350 Series CLI Guide

653

show ipv6 neighbors

IPv6 Commands

• Age—Time (in minutes) since the address was confirmed to be reachable. A hyphen (-) indicates

a static entry.

• Link-layer Addr—MAC address. If the address is unknown, a hyphen (-) is displayed.

• Interface—Interface which the neighbor is connected to.

• Router—Specifies if the neighbor is a Router. A hyphen (-) is displayed for static entries.

Cisco Business Switches 350 Series CLI Guide

654

IPv6 Commands

show ipv6 route

show ipv6 route

Use the show ipv6 route command in user EXEC or privileged EXEC mode to display the current contents
of the IPv6 routing table.

Syntax

show ipv6 route [ipv6-address | ipv6-prefix/prefix-length | protocol | interface interface-id]

Parameters

• ipv6-address—Displays routing information for a specific IPv6 address. This argument must be in the
form documented in RFC4293 where the address is specified in hexadecimal using 16-bit values between
colons.

• ipv6-prefix—Displays routing information for a specific IPv6 network. This argument must be in the

form documented in RFC4293 where the address is specified in hexadecimal using 16-bit values between
colons.

• prefix-length—The length of the IPv6 prefix. A decimal value that indicates how many of the high-order
contiguous bits of the address comprise the prefix (the network portion of the address). A slash mark
must precede the decimal value.

• protocol—Displays routes for the specified routing protocol using any of these keywords: bgp, isis,

ospf, or rip; or displays routes for the specified type of route using any of these keywords: connected,
static, nd, or icmp.

• interface interface-id—Identifier of an interface.

Default Configuration

All IPv6 routing information for all active routing tables is displayed.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

This command provides output similar to the show ip route command, except that the information is
IPv6-specific.

When the ipv6-address or ipv6-prefix/prefix-length argument is specified, a longest match lookup is performed
from the routing table and only route information for that address or network is displayed. When the icmp,
nd, connected, local, or static keywords are specified, only that type of route is displayed. When the interface-id
argument are specified, only the specified interface-specific routes are displayed.

Example 1. The following is sample output from the show ipv6 route command when IPv6 Routing
is not enabled and the command is entered without an IPv6 address or prefix specified:

switchxxxxxx# show ipv6 route
Codes: > - Best

Cisco Business Switches 350 Series CLI Guide

655

show ipv6 route

IPv6 Commands

S - Static, C - Connected(from ipv6 address), I - ICMP Redirect, ND - Router

Advertisment
[d/m]: d - route’s distance, m - route’s metric
IPv6 Forwarding is disabled
IPv6 Routing Table - 4 entries
S> ::/0 [1/1]

via:: fe80::77 VLAN 1
[3/2]

ND> ::/0

via:: fe80::200:cff:fe4a:dfa8 VLAN 1 Lifetime 1784 sec

C> 3002:1:1:1:1/64
via:: VLAN 1
ND> 3004:1:1:1:1/64

[0/0]

[0/0]

via:: VLAN 100 Lifetime 1784 sec

Cisco Business Switches 350 Series CLI Guide

656

IPv6 Commands

show ipv6 route summary

show ipv6 route summary

Use the show ipv6 route summary command in User EXEC or Privileged EXEC mode to display the current
contents of the IPv6 routing table in summary format.

Syntax

show ipv6 route summary

Command Mode

User EXEC mode

Privileged EXEC mode

Example

The following is sample output from the show ipv6 route summary command:

switchxxxxxx# show ipv6 route summary
IPv6 Routing Table Summary - 97 entries
37 local, 35 connected, 25 static
Number of prefixes:
/16: 1, /28: 10, /32: 5, /35: 25, /40: 1, /64: 9
/96: 5, /112: 1, /127: 4, /128: 36

Cisco Business Switches 350 Series CLI Guide

657

show ipv6 static

show ipv6 static

IPv6 Commands

Use the show ipv6 static command in user EXEC or privileged EXEC mode to display the current static
routes of the IPv6 routing table.

Syntax

show ipv6 static [ipv6-address | ipv6-prefix/prefix-length] [interface interface-id][detail]

Parameters

• ipv6-address—Provides routing information for a specific IPv6 address. This argument must be in the
form documented in RFC4293 where the address is specified in hexadecimal using 16-bit values between
colons.

• ipv6-prefix—Provides routing information for a specific IPv6 network. This argument must be in the

form documented in RFC4293 where the address is specified in hexadecimal using 16-bit values between
colons.

• prefix-length—Length of the IPv6 prefix. A decimal value that indicates how many of the high-order
contiguous bits of the address comprise the prefix (the network portion of the address). A slash mark
must precede the decimal value.

• interface interface-id—Identifier of an interface.

• detail—Specifies for invalid routes, the reason why the route is not valid.

Default Configuration

All IPv6 static routing information for all active routing tables is displayed.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

When the ipv6-address or ipv6-prefix/prefix-length argument is specified, a longest match lookup is performed
from the routing table and only route information for that address or network is displayed. Only the information
matching the criteria specified in the command syntax is displayed. For example, when the interface-id
argument is specified, only the specified interface-specific routes are displayed.

When the detail keyword is specified, the reason why the route is not valid is displayed for invalid direct or
fully specified routes.

Example 1. The following is sample output from the show ipv6 static command without specified
options:

switchxxxxxx# show ipv6 static
IPv6 Static routes
IPv6 Static routes distance is 1
* 3000::/16, via outgoing interface tunnel1, metric 1

Code: * - installed in Forwarding Information Base (FIB)

Cisco Business Switches 350 Series CLI Guide

658

IPv6 Commands

show ipv6 static

5000::/16, via outgoing interface tunnel2, metric 1

* 5555::/16, via outgoing interface VLAN100 nexthop 4000::1 metric 1

5555::/16, via outgoing interface VLAN10 nexthop 9999::1 vlan100 metric 1
* 5555::/16, via outgoing interface VLAN100 nexthop 4001:AF00::1, metric 1
* 6000::/16, via outgoing interface VLAN1 nexthop 2007::1 metric 1

Example 2. The following is sample output from the show ipv6 static command when entered with
the IPv6 prefix 2001:200::/35:

switchxxxxxx# show ipv6 static 2001:200::/35
IPv6 Static routes
IPv6 Static routes distance is 1
* 2001:200::/35, via outgoing interface VLAN100 nexthop 4000::1, metric 1
2001:200::/35, via outgoing interface VLAN10 nexthop 9999::1, metric 1

Code: * - installed in Forwarding Information Base (FIB)

Example 3. The following is sample output from the show ipv6 static command when entered with
the interface VLAN 1:

switchxxxxxx# show ipv6 static interface vlan 1
IPv6 Static routes
IPv6 Static routes distance is 1
* 5000::/16, via outgoing interface VLAN1 nexthop 4000::1, metric 1

Code: * - installed in Forwarding Information Base (FIB)

Example 4. The following is sample output from the show ipv6 static command with the detail
keyword:

switchxxxxxx# show ipv6 static detail
IPv6 Static routes
IPv6 Static routes distance is 1
* 3000::/16, via outgoing interface tunnel1, metric 1
5000::/16, via outgoing interface tunnel2, metric 1
5000::/16, via outgoing interface VLAN2 nexthop 2003::1, metric 1

Code: * - installed in Forwarding Information Base (FIB)

Interface is down

* 5555::/16, via outgoing interface VLAN100 nexthop 4000::1, metric 1
5555::/16, via outgoing interface VLAN10 nexthop 9999::1, metric 1

Route does not fully resolve

* 5555::/16, via outgoing interface VLAN12 nexthop 4001:AF00::1, metric 1
* 6000::/16, via outgoing interface VLAN102 nexthop 2007::1, metric 1

Cisco Business Switches 350 Series CLI Guide

659

show ipv6 static

IPv6 Commands

Cisco Business Switches 350 Series CLI Guide

660

IPv6 First Hop Security

This chapter contains the following sections:

• address-config, on page 664
• address-prefix-validation, on page 665
• clear ipv6 first hop security counters, on page 666
• clear ipv6 first hop security error counters, on page 667
• clear ipv6 neighbor binding prefix table, on page 668
• clear ipv6 neighbor binding table, on page 669
• device-role (IPv6 DHCP Guard), on page 670
• device-role (Neighbor Binding), on page 671
• device-role (RA Guard Policy), on page 673
• device-role (ND Inspection Policy), on page 674
• drop-unsecure, on page 676
• hop-limit, on page 677
• ipv6 dhcp guard, on page 679
• ipv6 dhcp guard attach-policy (port mode), on page 680
• ipv6 dhcp guard attach-policy (VLAN mode), on page 682
• ipv6 dhcp guard policy, on page 683
• ipv6 dhcp guard preference, on page 685
• ipv6 first hop security, on page 687
• ipv6 first hop security attach-policy (port mode), on page 688
• ipv6 first hop security attach-policy (VLAN mode), on page 690
• ipv6 first hop security logging packet drop, on page 691
• ipv6 first hop security policy, on page 692
• ipv6 nd inspection, on page 694
• ipv6 nd inspection attach-policy (port mode), on page 695
• ipv6 nd inspection attach-policy (VLAN mode), on page 697
• ipv6 nd inspection drop-unsecure, on page 698
• ipv6 nd inspection policy, on page 699
• ipv6 nd inspection sec-level minimum, on page 701
• ipv6 nd inspection validate source-mac, on page 702
• ipv6 nd raguard, on page 703
• ipv6 nd raguard attach-policy (port mode), on page 704
• ipv6 nd raguard attach-policy (VLAN mode), on page 706

Cisco Business Switches 350 Series CLI Guide

661

IPv6 First Hop Security

• ipv6 nd raguard hop-limit, on page 707
• ipv6 nd raguard managed-config-flag, on page 709
• ipv6 nd raguard other-config-flag, on page 710
• ipv6 nd raguard policy, on page 711
• ipv6 nd raguard router-preference, on page 713
• ipv6 neighbor binding, on page 715
• ipv6 neighbor binding address-config, on page 716
• ipv6 neighbor binding address-prefix, on page 718
• ipv6 neighbor binding address-prefix-validation, on page 719
• ipv6 neighbor binding attach-policy (port mode), on page 720
• ipv6 neighbor binding attach-policy (VLAN mode), on page 722
• ipv6 neighbor binding lifetime, on page 723
• ipv6 neighbor binding max-entries, on page 724
• ipv6 neighbor binding policy, on page 725
• ipv6 neighbor binding static, on page 727
• ipv6 source guard, on page 728
• ipv6 source guard attach-policy (port mode), on page 729
• ipv6 source guard policy, on page 730
• logging binding, on page 731
• logging packet drop, on page 732
• managed-config-flag, on page 733
• match ra address, on page 734
• match ra prefixes, on page 735
• match reply, on page 736
• match server address, on page 738
• max-entries, on page 740
• other-config-flag, on page 742
• preference, on page 743
• router-preference, on page 744
• sec-level minimum, on page 745
• show ipv6 dhcp guard, on page 746
• show ipv6 dhcp guard policy, on page 747
• show ipv6 first hop security, on page 749
• show ipv6 first hop security active policies, on page 750
• show ipv6 first hop security attached policies, on page 752
• show ipv6 first hop security counters, on page 753
• show ipv6 first hop security error counters, on page 754
• show ipv6 first hop security policy, on page 755
• show ipv6 nd inspection, on page 757
• show ipv6 nd inspection policy, on page 758
• show ipv6 nd raguard, on page 760
• show ipv6 nd raguard policy, on page 761
• show ipv6 neighbor binding, on page 763
• show ipv6 neighbor binding policy, on page 764
• show ipv6 neighbor binding prefix table, on page 766
• show ipv6 neighbor binding table, on page 767

Cisco Business Switches 350 Series CLI Guide

662

IPv6 First Hop Security

• show ipv6 source guard, on page 769
• show ipv6 source guard policy, on page 770
• trusted-port (IPv6 Source Guard), on page 771
• validate source-mac, on page 772

Cisco Business Switches 350 Series CLI Guide

663

address-config

address-config

IPv6 First Hop Security

To specify allowed configuration methods of global IPv6 addresses within an IPv6 Neighbor Binding policy,
use the address-config command in Neighbor Binding Policy Configuration mode. To return to the default,
use the no form of this command.

Syntax

address-config [stateless | any] [dhcp]

no address-config

Parameters

• stateless—Only auto configuration for global IPv6 bound from NDP messages is allowed.

• any—All configuration methods for global IPv6 bound from NDP messages (stateless and manual) are

allowed. If no keyword is defined the any keyword is applied.

• dhcp—Bound from DHCPv6 is allowed.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configuration.

Command Mode

Neighbor Binding Policy Configuration mode.

User Guidelines

If this command is part of a policy attached to a VLAN, it is applied to all the ports in the VLAN. If it is
defined in a policy attached to a port in the VLAN, this value overrides the value in the policy attached to the
VLAN.

If no keyword is defined the address-config any command is applied.

Example

The following example shows how to change the global configuration to allow only DHCP address configuration
method:

switchxxxxxx(config)# ipv6 neighbor binding policy policy1
switchxxxxxx(config-nbr-binding)# address-config dhcp
switchxxxxxx(config-nbr-binding)# exit

Cisco Business Switches 350 Series CLI Guide

664

IPv6 First Hop Security

address-prefix-validation

address-prefix-validation

To define the bound address prefix validation within an IPv6 Neighbor Binding policy, use the
address-prefix-validation command in Neighbor Binding Policy Configuration mode. To return to the default,
use the no form of this command.

Syntax

address-prefix-validation [enable | disable]

no address-prefix-validation

Parameters

• enable—Enables bound address prefix validation. If no keyword is configured, this keyword is applied

by default.

• disable—Disables bound address prefix validation.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configured value.

Command Mode

Neighbor Binding Policy Configuration mode.

User Guidelines

When a policy containing this command is attached to a VLAN, it overrides the global configuration and is
applied to all ports of the VLAN. When this command is used in a policy attached to a port, it overrides the
global and the VLAN configurations.

Example

The following example shows how to define policy1 that changes the global bound address verification in
Neighbor Binding:

switchxxxxxx(config)# ipv6 neighbor binding policy policy1
switchxxxxxx(config-nbr-binding)# address-prefix-validation enable
switchxxxxxx(config-nbr-binding)# exit

Cisco Business Switches 350 Series CLI Guide

665

clear ipv6 first hop security counters

IPv6 First Hop Security

clear ipv6 first hop security counters

To clear IPv6 First Hop Security port counters, use the clear ipv6 first hop security counters command in
privileged EXEC mode.

Syntax

clear ipv6 first hop security counters [interface interface-id]

Parameters

• interface interface-id—Clear IPv6 First Hop Security counters for the specified Ethernet port or port

channel.

Command Mode

Privileged EXEC mode

User Guidelines

This command clears port counters about packets handled by IPv6 First Hop Security.

Use the interface keyword to clear all counters for the specific port.

Use the command without keyword to clear all counters.

Example

The following example clears IPv6 First Hop Security counters on port gi1/0/1

switchxxxxxx# clear ipv6 first hop security counters interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

666

IPv6 First Hop Security

clear ipv6 first hop security error counters

clear ipv6 first hop security error counters

To clear IPv6 First Hop Security global error counters, use the clear ipv6 first hop security error counters
command in privileged EXEC mode.

Syntax

clear ipv6 first hop security error counters

Command Mode

Privileged EXEC mode

User Guidelines

This command clears global error counters.

Example

The following example clears IPv6 First Hop Security error counters:

switchxxxxxx# clear ipv6 first hop security error counters

Cisco Business Switches 350 Series CLI Guide

667

clear ipv6 neighbor binding prefix table

IPv6 First Hop Security

clear ipv6 neighbor binding prefix table

To remove dynamic entries from the Neighbor Prefix table, use the clear ipv6 neighbor binding prefix table
command in Privilege EXEC configuration mode.

Syntax

clear ipv6 neighbor binding prefix table [vlan vlan-id] [prefix-address/prefix-length]

Parameters

• vlan-id—Clear the dynamic prefixes that match the specified VLAN.

• prefix-address/ prefix-length—Clear the specific dynamic prefix.

Command Mode

Privileged EXEC mode

User Guidelines

This command deletes the dynamic entries of the Neighbor Prefix table.

Use the clear ipv6 neighbor binding prefix table vlan vlan-id prefix-address/prefix-length command to
delete one specific entry.

Use the clear ipv6 neighbor binding prefix table vlan vlan-id command to delete the dynamic entries that
match the specified VLAN.

Use the clear ipv6 neighbor binding prefix table command to delete all dynamic entries.

Example 1. The following example clears all dynamic entries:

switchxxxxxx# clear ipv6 neighbor binding prefix table

Example 2. The following example clears all dynamic prefixes that match VLAN 100:

switchxxxxxx# clear ipv6 neighbor binding prefix table vlan 100

Example 3. The following example clears one specific prefix:

switchxxxxxx# clear ipv6 neighbor binding prefix table vlan 100 2002:11aa:0000:0001::/64

Cisco Business Switches 350 Series CLI Guide

668

IPv6 First Hop Security

clear ipv6 neighbor binding table

clear ipv6 neighbor binding table

To remove dynamic entries from the Neighbor Binding table, use the clear ipv6 neighbor binding table
command in Privilege EXEC configuration mode.

Syntax

clear ipv6 neighbor binding table [vlan vlan-id] [interface interface-id] [ipv6 ipv6-address] [mac
mac-address] [ndp | dhcp]

Parameters

• vlan vlan-id—Clear the dynamic entries that match the specified VLAN.

• interface interface-id—Clear the dynamic entries that match the specified port (Ethernet port or port

channel).

• ipv6 ipv6-address—Clear the dynamic entries that match the specified IPv6 address.

• mac mac-address—Clear the dynamic entries that match the specified MAC address.

• ndp—Clear the dynamic entries that are bound from NDP messages.

• dhcp—Clear the dynamic entries that are bound from DHCPv6 messages.

Command Mode

Privileged EXEC mode

User Guidelines

This command deletes the dynamic entries of the Neighbor Binding table. The dynamic entries to be deleted
can be specified by the vlan-id argument, the interface-id argument, IPv6 address, MAC address, or by type
of message from which they were bound.

If the ndp keyword and the dhcp keyword is not defined, the entries are removed regardless their origin. If
no keywords or arguments are entered, all dynamic entries are deleted. All keyword and argument combinations
are allowed.

Example

The following example clears all dynamic entries that exist on VLAN 100 & port gi1/0/1:

switchxxxxxx# clear ipv6 neighbor binding table vlan 100 interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

669

device-role (IPv6 DHCP Guard)

IPv6 First Hop Security

device-role (IPv6 DHCP Guard)

To specify the role of the device attached to the port within an IPv6 DHCP Guard policy, use the device-role
command in IPv6 DHCPv6 Guard Policy Configuration mode. To return to the default, use the no form of
this command.

Syntax

device-role {client | server}

no device-role

Parameters

• client—Sets the role of the device to DHCPv6 client.

• server—Sets the role of the device to DHCPv6 server.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: client.

Command Mode

DHCP Guard Policy Configuration mode

User Guidelines

If this command is part of a policy attached to a VLAN, it is applied to all the ports in the VLAN. If it is
defined in a policy attached to a port in the VLAN, this value overrides the value in the policy attached to the
VLAN.

IPv6 DHCP Guard discards the following DHCPv6 messages sent by DHCPv6 servers/relays and received
on ports configured as client:

• ADVERTISE

• REPLY

• RECONFIGURE

• RELAY-REPL

• LEASEQUERY-REPLY

Example

The following example defines an IPv6 DHCP Guard policy named policy 1 and configures the port role as
the server:

switchxxxxxx(config)# ipv6 dhcp guard policy policy1
switchxxxxxx(config-dhcp-guard)# device-role server
switchxxxxxx(config-dhcp-guard)# exit

Cisco Business Switches 350 Series CLI Guide

670

IPv6 First Hop Security

device-role (Neighbor Binding)

device-role (Neighbor Binding)

To specify the role of the device attached to the port within an IPv6 Neighbor Binding policy, use the
device-role command within IPv6 Neighbor Binding Policy Configuration mode. To return to the default,
use the no form of this command.

Syntax

device-role {perimeter | internal}

no device-role

Parameters

• perimeter—Specifies that the port is connected to devices not supporting IPv6 First Hop Security.

• internal—Specifies that the port is connected to devices supporting IPv6 First Hop Security.

Default Configuration

Policy attached to port or port channel: Value configured in the policy attached to the VLAN.

Policy attached to VLAN: Perimeter.

Command Mode

Neighbor Binding Policy Configuration mode.

User Guidelines

If this command is part of a policy attached to a VLAN, it is applied to all the ports in the VLAN. If it is
defined in a policy attached to a port in the VLAN, this value overrides the value in the policy attached to the
VLAN.

NB Integrity supports the perimetrical model (see RFC 6620).

This model specifies two types of ports:

• Perimeter Port—Specifies ports connected to devices not supporting NB Integrity. NB Integrity

establishes binding for neighbors connected to these ports. Source Guard does not function on these
ports.

• Internal Port—The second type specifies ports connected to devices supporting IPv6 First Hop Security.
NB Integrity does not establish binding for neighbors connected to these ports, but it does propagate the
bindings established on perimeter ports.

A dynamic IPv6 address bound to a port is deleted when its role is changed from perimetrical to internal. A
static IPv6 address is kept.

Example

The following example defines a Neighbor Binding policy named policy 1 and configures the port role as an
internal port:

Cisco Business Switches 350 Series CLI Guide

671

device-role (Neighbor Binding)

IPv6 First Hop Security

switchxxxxxx(config)# ipv6 neighbor binding policy policy1
switchxxxxxx(config-nbr-binding)# device-role internal
switchxxxxxx(config-nbr-binding)# exit

Cisco Business Switches 350 Series CLI Guide

672

IPv6 First Hop Security

device-role (RA Guard Policy)

device-role (RA Guard Policy)

To specify the role of the device attached to the port within an IPv6 RA Guard policy, use the device-role
command in RA Guard Policy Configuration mode. To returned to the default, use the no form of this command.

Syntax

device-role {host | router}

no device-role

Parameters

• host—Sets the role of the device to host.

• router—Sets the role of the device to router.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: host.

Command Mode

RA Guard Policy Configuration mode

User Guidelines

If this command is part of a policy attached to a VLAN, it is applied to all the ports in the VLAN. If it is
defined in a policy attached to a port in the VLAN, this value overrides the value in the policy attached to the
VLAN.

RA Guard discards input RA, CPA, and ICMPv6 Redirect messages received on ports configured as host.

Example

The following example defines an RA Guard policy named policy 1 and configures the port role as router:

switchxxxxxx(config)# ipv6 nd raguard policy policy1
switchxxxxxx(config-ra-guard)# device-role router
switchxxxxxx(config-ra-guard)# exit

Cisco Business Switches 350 Series CLI Guide

673

device-role (ND Inspection Policy)

IPv6 First Hop Security

device-role (ND Inspection Policy)

To specify the role of the device attached to the port within an IPv6 ND Inspection policy, use the device-role
command in ND Inspection Policy Configuration mode. To disable this function, use the no form of this
command.

Syntax

device-role {host | router}

no device-role

Parameters

• host—Sets the role of the device to host.

• router—Sets the role of the device to router.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: host.

Command Mode

ND inspection Policy Configuration mode

User Guidelines

If this command is part of a policy attached to a VLAN, it is applied to all the ports in the VLAN. If it is
defined in a policy attached to a port in the VLAN, this value overrides the value in the policy attached to the
VLAN.

ND Inspection performs egress filtering of NDP messages depending on a port role.The following table
specifies the filtering rules.

Message

RA

RS

CPA

CPS

ICMP Redirect

Example

Host

Permit

Deny

Permit

Deny

Permit

Router

Permit

Permit

Permit

Permit

Permit

The following example defines an ND Inspection policy named policy 1 and configures the port role as router:

Cisco Business Switches 350 Series CLI Guide

674

IPv6 First Hop Security

device-role (ND Inspection Policy)

switchxxxxxx(config)# ipv6 nd inspection policy policy1
switchxxxxxx(config-nd-inspection)# device-role router
switchxxxxxx(config-nd-inspection)# exit

Cisco Business Switches 350 Series CLI Guide

675

drop-unsecure

drop-unsecure

IPv6 First Hop Security

To enable dropping messages with no or invalid options or an invalid signature within an IPv6 ND Inspection
policy, use the drop-unsecure command in ND Inspection Policy Configuration mode. To return to the default,
use the no form of this command.

Syntax

drop-unsecure [enable | disable]

no drop-unsecure

Parameters

• enable—Enables dropping messages with no or invalid options or an invalid signature. If no keyword

is configured this keyword is applied by default.

• disable—Disables dropping messages with no or invalid options or an invalid signature.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configuration.

Command Mode

ND inspection Policy Configuration mode

User Guidelines

If this command is part of a policy attached to a VLAN, it is applied to all the ports in the VLAN. If it is
defined in a policy attached to a port in the VLAN, this value overrides the value in the policy attached to the
VLAN.

Example

The following example defines an ND Inspection policy named policy1, places the switch in ND Inspection
Policy Configuration mode, and enables the switch to drop messages with no or invalid options or an invalid
signature:

switchxxxxxx(config)# ipv6 nd inspection policy policy1
switchxxxxxx(config-nd-inspection)# drop-unsecure

switchxxxxxx(config-nd-inspection)# exit

Cisco Business Switches 350 Series CLI Guide

676

IPv6 First Hop Security

hop-limit

hop-limit

To enable the verification of the advertised Cur Hop Limit value in RA messages within an IPv6 RA Guard
policy, use the hop-limit command in RA Guard Policy Configuration mode. To return to the default, use the
no form of this command.

Syntax

hop-limit {[maximum {value | disable}] [minimum {value | disable}]}

no hop-limit [maximum] [minimum]

Parameters

• maximum value—Verifies that the hop-count limit is less than or equal to the value argument. Range
1-255. The value of the high boundary must be equal or greater than the value of the low boundary.

• maximum disable—Disables verification of the high boundary of the hop-count limit.

• minimum value—Verifies that the hop-count limit is greater than or equal to the value argument. Range

1-255.

• minimum disable—Disables verification of the lower boundary of the hop-count limit.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configuration.

Command Mode

RA Guard Policy Configuration mode

User Guidelines

If this command is part of a policy attached to a VLAN, it is applied to all the ports in the VLAN. If it is
defined in a policy attached to a port in the VLAN, this value overrides the value in the policy attached to the
VLAN.

Use the disable keyword to disable verification regardless of the global or VLAN configuration.

Example 1—The following example defines an RA Guard policy named policy1, places the switch
in RA Guard Policy Configuration mode, and defines a minimum Cur Hop Limit value of 5:

switchxxxxxx(config)# ipv6 nd raguard policy policy1
switchxxxxxx(config-ra-guard)# hop-limit minimum 5
switchxxxxxx(config-ra-guard)# exit

Example 2—The following example defines an RA Guard policy named policy1, places the switch
in RA Guard Policy Configuration mode, and disables validation of the Cur Hop Limit high boundary:

switchxxxxxx(config)# ipv6 nd raguard policy policy1

switchxxxxxx(config-ra-guard)# hop-limit maximum disable

Cisco Business Switches 350 Series CLI Guide

677

hop-limit

IPv6 First Hop Security

switchxxxxxx(config-ra-guard)# exit

Cisco Business Switches 350 Series CLI Guide

678

IPv6 First Hop Security

ipv6 dhcp guard

ipv6 dhcp guard

To enable the DHCPv6 guard feature on a VLAN, use the ipv6 dhcp guard command in VLAN Configuration
mode. To return to the default, use the no form of this command.

Syntax

ipv6 dhcp guard

no ipv6 dhcp guard

Default Configuration

DHCPv6 Guard on a VLAN is disabled.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

DHCPv6 Guard blocks messages sent by DHCPv6 servers/relays to clients received on ports that are not
configured as a DHCPv6 server. Client messages or messages sent by relay agents from clients to servers are
not blocked.

DHCPv6 Guard validates received DHCPv6 messages based on a DHCPv6 Guard policy attached to the
source port.

Example 1—The following example enables DHCPv6 Guard on VLAN 100:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 dhcp guard
switchxxxxxx(config-if)# exit

Example 2—The following example enables DHCPv6 Guard on VLANs 100-107:

switchxxxxxx(config)# interface range vlan 100-107
switchxxxxxx(config-if-range)# ipv6 dhcp guard
switchxxxxxx(config-if-range)# exit

Cisco Business Switches 350 Series CLI Guide

679

ipv6 dhcp guard attach-policy (port mode)

IPv6 First Hop Security

ipv6 dhcp guard attach-policy (port mode)

To attach a DHCPv6 Guard policy to a specific port, use the ipv6 dhcp guard attach-policy command in
Interface Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 dhcp guard attach-policy policy-name [vlan vlan-list]

no ipv6 dhcp guard attach-policy [policy-name]

Parameters

• policy-name—The DHCPv6 Guard policy name (up to 32 characters).

• vlan vlan-list—Specifies that the DHCPv6 Guard policy is to be attached to the VLAN(s) in vlan-list.

If the vlan keyword is not configured, the policy is applied to all VLANs on the device on which DHCPv6
Guard is enabled.

Default Configuration

The DHCPv6 Guard default policy is applied.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use this command to attach a DHCPv6 Guard policy to a port.

Each time the command is used, it overrides the previous command within the same policy.

If a policy specified by the policy-name argument is not defined, the command is rejected.

Multiple policies with the vlan keyword can be attached to the same port if they do not have common VLANs.

The set of rules that is applied to an input packet is built in the following way:

• The rules, configured in the policy attached to the port on the VLAN on which the packet arrived are

added to the set.

• The rules, configured in the policy attached to the VLAN are added to the set if they have not been added.

• The global rules are added to the set if they have not been added.

Use no ipv6 dhcp guard attach-policy to detach all user-defined DHCP Guard policies attached to the port.

Use no ipv6 dhcp guard attach-policy policy-name to detach the specific policy from the port.

Example 1—In the following example, the DHCPv6 Guard policy policy1 is attached to the gi1/0/1
port and the default policy port_default is detached:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 dhcp guard attach-policy policy1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

680

IPv6 First Hop Security

ipv6 dhcp guard attach-policy (port mode)

Example 2—In the following example, the DHCPv6 Guard policy policy1 is attached to the gi1/0/1
port and applied to VLANs 1-10 and 12-20:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 dhcp guard attach-policy policy1 vlan 1-10,12-20
switchxxxxxx(config-if)# exit

Example 3—In the following example, the DHCPv6 Guard policy policy1 is attached to the gi1/0/1
port and applied to VLANs 1-10 and the DHCPv6 Guard policy policy2 is attached to the gi1/0/1
port and applied to VLANs 12-20:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 dhcp guard attach-policy policy1 vlan 1-10
switchxxxxxx(config-if)# ipv6 dhcp guard attach-policy policy2 vlan 12-20
switchxxxxxx(config-if)# exit

Example 4—In the following example DHCPv6 Guard detaches policy1 from the gi1/0/1 port:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# no ipv6 dhcp guard attach-policy policy1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

681

ipv6 dhcp guard attach-policy (VLAN mode)

IPv6 First Hop Security

ipv6 dhcp guard attach-policy (VLAN mode)

To attach a DHCPv6 Guard policy to a specified VLAN, use the ipv6 dhcp guard attach-policy command
in VLAN Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 dhcp guard attach-policy policy-name

no ipv6 dhcp guard attach-policy

Parameters

• policy-name—The DHCPv6 Guard policy name (up to 32 characters).

Default Configuration

The DHCPv6 Guard default policy is applied.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Use this command to attach a DHCPv6 Guard policy to a VLAN.

If a policy specified by the policy-name argument is not defined, the command is rejected.

Use the no form of the command to detach the current policy and to re-attach the default policy. The the no
form of the command has no effect if the default policy was attached.

Example

In the following example, the DHCPv6 Guard policy policy1 is attached to VLAN 100:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 dhcp guard attach-policy policy1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

682

IPv6 First Hop Security

ipv6 dhcp guard policy

ipv6 dhcp guard policy

To define a DHCP Guard policy and place the switch in DHCPv6 Guard Policy Configuration mode, use the
ipv6 dhcp guard policy command in Global Configuration mode. To remove the DHCPv6 guard policy, use
the no form of this command.

Syntax

ipv6 dhcp guard policy policy-name

no ipv6 dhcp guard policy policy-name

Parameters

• policy-name—The DHCPv6 Guard policy name (up to 32 characters).

Default Configuration

No DHCPv6 Guard policy are configured

Command Mode

Global Configuration mode

User Guidelines

This command defines the DHCPv6 Guard policy name, and places the router in DHCPv6 Guard Policy
Configuration mode.

Each policy of the same type (for example, DHCPv6 Guard policies) must have a unique name. Policies of
different types can have the same policy name.

The switch supports two predefined, default DHCPv6 Guard policies named: "vlan_default" and "port_default":

ipv6 dhcp guard policy vlan_default

exit
ipv6 dhcp guard policy port_default
exit

The default policies are empty and cannot be removed, but can be changed. The no ipv6 dhcp guard policy
does not remove the default policies, it only removes the policy configuration defined by the user.

You can define a policy using the ipv6 dhcp guard policy command multiple times.

Before an attached policy is removed, a request for confirmation is presented to the user, as shown in Example
3 below.

Example 1—The following example defines a DHCPv6 Guard policy named policy1, places the
router in DHCPv6 Guard Policy Configuration mode, configures the port to drop unsecure messages
and sets the device role as router:

switchxxxxxx(config)# ipv6 dhcp guard policy policy1
switchxxxxxx(config-dhcp-guard)# match server address list1
switchxxxxxx(config-dhcp-guard)# device-role server
switchxxxxxx(config-dhcp-guard)# exit

Cisco Business Switches 350 Series CLI Guide

683

ipv6 dhcp guard policy

IPv6 First Hop Security

Example 2—The following example defines a DHCPv6 Guard named policy1 by multiple steps:

switchxxxxxx(config)# ipv6 dhcp guard policy policy1
switchxxxxxx(config-dhcp-guard)# match server address list1
switchxxxxxx(config-dhcp-guard)# exit
switchxxxxxx(config)# ipv6 dhcp guard policy policy1
switchxxxxxx(config-dhcp-guard)# device-role server
switchxxxxxx(config-dhcp-guard)# exit

Example 3—The following example removes an attached DHCPv6 Guard policy:

switchxxxxxx(config)# no ipv6 dhcp guard policy policy1
Policy policy1 is applied on the following ports:

gi1/0/1, gi1/0/2

The policy will be detached and removed, are you sure [Y/N]Y

Cisco Business Switches 350 Series CLI Guide

684

IPv6 First Hop Security

ipv6 dhcp guard preference

ipv6 dhcp guard preference

To globally enable verification of the preference in messages sent by DHCPv6 servers, use the ipv6 dhcp
guard preference command in Global Configuration mode. To return to the default, use the no form of this
command.

Syntax

ipv6 dhcp guard preference {[maximum value] [minimum value]}

no ipv6 dhcp guard preference [maximum] [minimum]

Parameters

• maximum value—Advertised preference value is lower than or equal to the value argument. Range

0-255. The value of the high boundary must be equal to or greater than the value of the low boundary.

• minimum value—Advertised preference value is greater than or equal to the value argument. Range

0-255.

Default Configuration

Verification is disabled.

Command Mode

Global Configuration mode

User Guidelines

This command enables verification that the preference value in messages sent by DHCPv6 servers messages
(see RFC3315) is greater than or less than the value argument.

Note. When DHCPv6 Guard receives a RELAY-REPL message, it takes it from the encapsulated message.

Configuring the minimum value keyword and argument specifies the minimum allowed value. The received
DHCPv6 reply message with a preference value less than a value specified by the value argument is dropped.

Configuring the maximum value keyword and argument specifies the maximum allowed value. The received
DHCPv6 reply message with a preference value greater than the value specified by the value argument is
dropped.

Use no ipv6 dhcp guard preference to disable verification of the advertised preference value in DHCPv6
reply messages.

Use no ipv6 dhcp guard preference maximum to disable verification of the maximum boundary of the
value of the advertised preference value in DHCPv6 messages.

Use the no ipv6 dhcp guard preference minimum command to disable verification of the minimum boundary
of the value of the advertised preference value in DHCPv6 messages.

Example 1—The following example defines a global minimum preference value of 10 and a global
maximum preference value of 102 using two commands:

Cisco Business Switches 350 Series CLI Guide

685

ipv6 dhcp guard preference

IPv6 First Hop Security

switchxxxxxx(config)# ipv6 dhcp guard preference minimum 10
switchxxxxxx(config)# ipv6 dhcp guard preference maximum 102

Example 2—The following example defines a global minimum preference value of 10 and a global
maximum preference value of 102 using a single command:

switchxxxxxx(config)# ipv6 dhcp guard preference minimum 10 maximum 102

Cisco Business Switches 350 Series CLI Guide

686

IPv6 First Hop Security

ipv6 first hop security

ipv6 first hop security

To globally enable IPv6 First Hop Security on a VLAN, use the ipv6 first hop security command in VLAN
Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 first hop security

no ipv6 first hop security

Default Configuration

IPv6 First Hop Security on a VLAN is disabled.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Use the ipv6 first hop security command to enable IPv6 First Hop Security on a VLAN.

Example 1—The following example enables IPv6 First Hop Security on VLAN 100:

switchxxxxxx(config)# interface vlan 100

switchxxxxxx(config-if)# ipv6 first hop security

switchxxxxxx(config-if)# exit

Example 2—The following example enables IPv6 First Hop Security on VLANs 100-107:

switchxxxxxx(config)# interface range vlan 100-107

switchxxxxxx(config-if-range)# ipv6 first hop security

switchxxxxxx(config-if-range)# exit

Cisco Business Switches 350 Series CLI Guide

687

ipv6 first hop security attach-policy (port mode)

IPv6 First Hop Security

ipv6 first hop security attach-policy (port mode)

To attach an IPv6 First Hop Security policy to a specific port, use the ipv6 first hop security attach-policy
command in Interface Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 first hop security attach-policy policy-name [vlan vlan-list]

no ipv6 first hop security attach-policy [policy-name]

Parameters

• policy-name—The IPv6 First Hop Security policy name (up to 32 characters).

• vlan vlan-list—Specifies that the IPv6 First Hop Security policy is to be attached to the VLAN(s) in
vlan-list. If the vlan keyword is not configured, the policy is applied to all VLANs on the device on
which IPv6 First Hop Security is enabled.

Default Configuration

The IPv6 First Hop Security default policy is applied.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use this command to attach an IPv6 First Hop Security policy to a port.

Each succeeding usage of this command overrides the previous usage of the command with the same policy.

Each time the command is used, it overrides the previous command within the same policy.

If a policy specified by the policy-name argument is not defined, the command is rejected.

Multiple policies with the vlan keyword can be attached to the same port if they do not have common VLANs.

The set of rules that is applied to an input packet is built in the following way:

• The rules, configured in the policy attached to the port on the VLAN on which the packet arrived are

added to the set.

• The rules, configured in the policy attached to the VLAN are added to the set if they have not been added.

• The global rules are added to the set if they have not been added.

Use the no ipv6 first hop security attach-policy command to detach all user-defined policies attached to the
port. The default policy is reattached.

Use the no ipv6 first hop security attach-policy policy-name command to detach the specific policy from
the port.

Cisco Business Switches 350 Series CLI Guide

688

IPv6 First Hop Security

ipv6 first hop security attach-policy (port mode)

Example 1—In the following example, the IPv6 First Hop Security policy policy1 is attached to the
gi1/0/1 port:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 first hop security attach-policy policy1
switchxxxxxx(config-if)# exit

Example 2—In the following example, the IPv6 First Hop Security policy policy1 is attached to the
gi1/0/1 port and applied to VLANs 1-10 and 12-20:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 first hop security attach-policy policy1 vlan 1-10,12-20
switchxxxxxx(config-if)# exit

Example 3—In the following example, the IPv6 First Hop Security policy policy1 is attached to the
gi1/0/1 port and applied to VLANs 1-10 and the IPv6 First Hop Security policy policy2 is attached
to the gi1/0/1 port and applied to VLANs 12-20:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 first hop security attach-policy policy1 vlan 1-10
switchxxxxxx(config-if)# ipv6 first hop security attach-policy policy2 vlan 12-20
switchxxxxxx(config-if)# exit

Example 4—In the following example the IPv6 First Hop Security policy policy1 is detached from
gi1/0/1 port:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# no ipv6 first hop security attach-policy policy1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

689

ipv6 first hop security attach-policy (VLAN mode)

IPv6 First Hop Security

ipv6 first hop security attach-policy (VLAN mode)

To attach an IPv6 First Hop Security policy to a specified VLAN, use the ipv6 first hop security attach-policy
command in VLAN Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 first hop security attach-policy policy-name

no ipv6 first hop security attach-policy

Parameters

• policy-name—The IPv6 First Hop Security policy name (up to 32 characters).

Default Configuration

The IPv6 First Hop Security default policy is applied.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Use this command to attach an IPv6 First Hop Security policy to a VLAN.

If a policy specified by the policy-name argument is not defined, the command is rejected.

Use the no form of the command to return to detach the current policy and to reattach the default policy. The
no form of the command does not have an effect if the default policy was attached.

Example

In the following example, the IPv6 First Hop Security policy policy1 is attached to VLAN 100:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 first hop security attach-policy policy1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

690

IPv6 First Hop Security

ipv6 first hop security logging packet drop

ipv6 first hop security logging packet drop

To globally enable the logging of dropped packets by the IPv6 First Hop Security feature, use the ipv6 first
hop security logging packet drop command in Global Configuration mode. To return to the default, use the
no form of this command.

Syntax

ipv6 first hop security logging packet drop

no ipv6 first hop security logging packet drop

Default Configuration

Logging is disabled.

Command Mode

Global Configuration mode

User Guidelines

Use this command to log packets that are dropped. If logging is enabled, the switch sends a rate-limited
SYSLOG message every time it drops a message.

Example

The following example shows how to enable logging of dropped packets by the IPv6 first-hop security feature:

switchxxxxxx(config)# ipv6 first hop security logging packet drop

Cisco Business Switches 350 Series CLI Guide

691

ipv6 first hop security policy

IPv6 First Hop Security

ipv6 first hop security policy

To define an IPv6 First Hop Security policy and place the switch in IPv6 First Hop Security Policy
Configuration mode, use the ipv6 first hop security policy command in Global Configuration mode. To
remove the IPv6 First Hop Security policy, use the no form of this command.

Syntax

ipv6 first hop security policy policy-name

no ipv6 first hop security policy policy-name

Parameters

• policy-name—The IPv6 First Hop Security policy name (up to 32 characters).

Default Configuration

No IPv6 First Hop Security policy is configured

Command Mode

Global Configuration mode

User Guidelines

This command defines an IPv6 First Hop Security policy, and places the switch in IPv6 First Hop Security
Policy Configuration mode. Each policy of the same type (for example, IPv6 First Hop Security policies)
must have a unique name. Policies of different types can have the same policy name. The switch supports
two predefined, empty, default IPv6 First Hop Security policies named: "vlan_default" and "port_default":

ipv6 first hop security policy vlan_default

exit
ipv6 first hop security policy port_default
exit

These policies cannot be removed but they can be changed. The no ipv6 first hop security policy does not
remove these policies, it only removes the policy configurations defined by the user.

You can define a policy using the ipv6 first hop security policy command multiple times.

If an attached policy is removed, it is detached automatically before removing.

Examples

Example 1—The following example defines the IPv6 First Hop Security policy named policy1, places the
switch in IPv6 First Hop Security Policy Configuration mode, and enables logging of dropped packets:

switchxxxxxx(config)# ipv6 first hop security policy policy1
switchxxxxxx(config-ipv6-fhs)# logging packet drop
switchxxxxxx(config)# exit

Example 2—The following example removes an attached IPv6 First Hop Security policy:

Cisco Business Switches 350 Series CLI Guide

692

IPv6 First Hop Security

ipv6 first hop security policy

switchxxxxxx(config)# no ipv6 first hop security policy policy1
Policy policy1 is applied on the following ports:
gi1/0/1, gi1/0/2

The policy1 will be detached and removed, are you sure [Y/N]Y

Cisco Business Switches 350 Series CLI Guide

693

ipv6 nd inspection

IPv6 First Hop Security

ipv6 nd inspection

To enable the IPv6 Neighbor Discovery (ND) Inspection feature on a VLAN, use the ipv6 nd inspection
command in VLAN Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 nd inspection

no ipv6 nd inspection

Default Configuration

ND Inspection on a VLAN is disabled.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Use the command to enable ND Inspection on a VLAN. The IPv6 ND Inspection validates the Neighbor
Discovery Protocol (NDP) messages using the ND Inspection policies and global ND Inspection configuration.
The ND Inspection bridges NDP messages to all ports excluding the source port within the VLAN with the
following exception: RS and CPS messages are not bridged to ports configured as host (see the device-role
command). The ND inspection is performed after RA Guard.

Example 1—The following example enables ND Inspection on VLAN 100:

switchxxxxxx(config)# interface vlan 100

switchxxxxxx(config-if)# ipv6 nd inspection

switchxxxxxx(config-if)# exit

Example 2—The following example enables ND Inspection on VLANs 100-107:

switchxxxxxx(config)# interface range vlan 100-107

switchxxxxxx(config-if-range)# ipv6 nd inspection

switchxxxxxx(config-if-range)# exit

Cisco Business Switches 350 Series CLI Guide

694

IPv6 First Hop Security

ipv6 nd inspection attach-policy (port mode)

ipv6 nd inspection attach-policy (port mode)

To attach an ND Inspection policy to a specific port, use the ipv6 nd inspection attach-policy command in
Interface Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 nd inspection attach-policy policy-name [vlan vlan-list]

no ipv6 nd inspection attach-policy [policy-name]

Parameters

• policy-name—The ND Inspection policy name (up to 32 characters).

• vlan vlan-list—Specifies that the ND Inspection policy is to be attached to the VLAN(s) in vlan-list. If
the vlan keyword is not configured, the policy is applied to all VLANs on the device on which ND
Inspection is enabled.

Default Configuration

The ND Inspection default policy is applied.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use the ipv6 nd inspection attach-policy command to attach an ND Inspection policy to a port.

Each time the command is used, it overrides the previous command within the same policy.

If a policy specified by the policy-name argument is not defined, the command is rejected.

Multiple policies with the vlan keyword can be attached to the same port if they do not have common VLANs.

The set of rules that is applied to an input packet is built in the following way:

• The rules, configured in the policy attached to the port on the VLAN on which the packet arrived are

added to the set.

• The rules, configured in the policy attached to the VLAN are added to the set if they have not been added.

• The global rules are added to the set if they have not been added.

Use the no ipv6 nd inspection attach-policy command to detach all user-defined policies attached to the
port.

Use the no ipv6 nd inspection attach-policy policy-name command to detach the specific policy from the
port.

Example 1—In the following example, the ND Inspection policy policy1 is attached to the gi1/0/1
port:

Cisco Business Switches 350 Series CLI Guide

695

ipv6 nd inspection attach-policy (port mode)

IPv6 First Hop Security

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 nd inspection attach-policy policy1
switchxxxxxx(config-if)# exit

Example 2—In the following example, the ND Inspection policy policy1 is attached to the gi1/0/1
port and applied to VLANs 1-10 and 12-20:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 nd inspection attach-policy policy1 vlan 1-10,12-20
switchxxxxxx(config-if)# exit

Example 3—In the following example, the ND Inspection policy policy1 is attached to the gi1/0/1
port and applied to VLANs 1-10 and the ND Inspection policy policy2 is attached to the gi1/0/1 port
and applied to VLANs 12-20:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 nd inspection attach-policy policy1 vlan 1-10
switchxxxxxx(config-if)# ipv6 nd inspection attach-policy policy2 vlan 12-20
switchxxxxxx(config-if)# exit

Example 4—In the following example, ND Inspection detaches policy policy1 from the gi1/0/1 port:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# no ipv6 nd inspection attach-policy policy1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

696

IPv6 First Hop Security

ipv6 nd inspection attach-policy (VLAN mode)

ipv6 nd inspection attach-policy (VLAN mode)

To attach an ND Inspection policy to a specified VLAN, use the ipv6 nd inspection attach-policy command
in VLAN Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 nd inspection attach-policy policy-name

no ipv6 nd inspection attach-policy

Parameters

• policy-name—The ND Inspection policy name (up to 32 characters).

Default Configuration

The ND Inspection default policy is applied.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Use this command to attach a ND Inspection policy to a VLAN. If the policy specified by the policy-name
argument is not defined, the command is rejected. Use the no form of the command to detach the current
policy and to reattach the default policy. The no form of the command does not have an effect if the default
policy was attached.

Example

In the following example, the ND Inspection policy policy1 is attached to VLAN 100:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 nd inspection attach-policy policy1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

697

ipv6 nd inspection drop-unsecure

IPv6 First Hop Security

ipv6 nd inspection drop-unsecure

To globally enable dropping messages with no CGA and RSA Signature options, use the ipv6 nd inspection
drop-unsecure command in Global Configuration mode. To disable this function, use the no form of this
command.

Syntax

ipv6 nd inspection drop-unsecure

no ipv6 nd inspection drop-unsecure

Default Configuration

All messages are bridged.

Command Mode

Global Configuration mode

User Guidelines

This command drops NDP messages if they do not contain CGA and RSA Signature options.

If this command is not configured, then the sec-level minimum command does not have an effect.

If this command is configured, then only the sec-level minimum command has an effect and all other configured
ND Inspection policy commands are ignored.

Example

The following example enables the switch to drop messages with no or invalid options or an invalid signature:

switchxxxxxx(config)# ipv6 nd inspection drop-unsecure

Cisco Business Switches 350 Series CLI Guide

698

IPv6 First Hop Security

ipv6 nd inspection policy

ipv6 nd inspection policy

To define an ND Inspection policy and place the switch in IPv6 ND Inspection Policy Configuration mode,
use the ipv6 nd inspection policy command in Global Configuration mode. To remove the ND Inspection
policy, use the no form of this command.

Syntax

ipv6 nd inspection policy policy-name

no ipv6 nd inspection policy policy-name

Parameters

• policy-name—The ND Inspection policy name (up to 32 characters).

Default Configuration

No ND Inspection policies are configured.

Command Mode

Global Configuration mode

User Guidelines

This command defines the ND Inspection policy name, and places the router in ND Inspection Policy
Configuration mode. Each policy of the same type (for example, ND Inspection policies) must have a unique
name. Policies of different types can have a same policy name.

The switch supports two predefined ND Inspection policies named: "vlan_default" and "port_default":

ipv6 nd inspection policy vlan_default

exit
ipv6 nd inspection policy port_default
exit

These policies cannot be removed, but they can be changed. The no ipv6 nd inspection policy does not
remove these policies, it only removes the policy configuration defined by the user.

You can define a policy using the ipv6 nd inspection policy command multiple times.

If an attached policy is removed it is detached automatically before removing.

Example 1. The following example defines a ND Inspection policy named policy1, places the switch
in ND Inspection Policy Configuration mode, and configures the port to drop unsecured messages
and sets the device role as router:

switchxxxxxx(config)# ipv6 nd inspection policy policy1
switchxxxxxx(config-nd-inspection)# drop-unsecure
switchxxxxxx(config-nd-inspection)# device-role router
switchxxxxxx(config-nd-inspection)# exit

Example 2. The following example defines an ND Inspection policy as policy1 by a few steps:

switchxxxxxx(config)# ipv6 nd inspection policy policy1
switchxxxxxx(config-nd-inspection)# drop-unsecure

Cisco Business Switches 350 Series CLI Guide

699

ipv6 nd inspection policy

IPv6 First Hop Security

switchxxxxxx(config-nd-inspection)# exit
switchxxxxxx(config)# ipv6 nd inspection policy policy1
switchxxxxxx(config-nd-inspection)# device-role router
switchxxxxxx(config-nd-inspection)# exit

Example 3. The following example removes an attached ND Inspection policy:

switchxxxxxx(config)# no ipv6 nd inspection policy policy1
Policy policy1 is applied on the following ports:
gi1/0/1, gi1/0/2

The policy will be detached and removed, are you sure [Y/N]Y

Cisco Business Switches 350 Series CLI Guide

700

IPv6 First Hop Security

ipv6 nd inspection sec-level minimum

ipv6 nd inspection sec-level minimum

To globally specify the minimum security level value, use the ipv6 nd inspection sec-level minimum command
in Global Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 nd inspection sec-level minimum value

no ipv6 nd inspection sec-level minimum

Parameters

• value—Sets the minimum security level. Range: 0–7.

Default Configuration

All messages are bridged.

Command Mode

Global Configuration mode

User Guidelines

This command specifies the minimum security level parameter value when the drop-unsecured feature is
configured.

This command has no effect if dropping of non secure messages is disabled.

Example

The following example enables the switch to specify 2 as the minimum CGA security level:

switchxxxxxx(config)# ipv6 nd inspection sec-level minimum 2

Cisco Business Switches 350 Series CLI Guide

701

ipv6 nd inspection validate source-mac

IPv6 First Hop Security

ipv6 nd inspection validate source-mac

To globally enable checking source MAC address against the link-layer address in the source/target link-layer
option, use the ipv6 nd inspection validate source-mac command in Global Configuration mode. To disable
this function, use the no form of this command.

Syntax

ipv6 nd inspection validate source-mac

no ipv6 nd inspection validate source-mac

Parameters

N/A

Default Configuration

This command is disabled by default.

Command Mode

Global Configuration mode

User Guidelines

When the switch receives an NDP message, which contains a link-layer address in the source/target link layer
option, the source MAC address is checked against the link-layer address. Use this command to drop the
packet if the link-layer address and the MAC addresses are different from each other.

Example

The following example enables the switch to drop an NDP message whose link-layer address in the source/target
link-layer option does not match the MAC address:

switchxxxxxx(config)# ipv6 nd inspection validate source-mac

Cisco Business Switches 350 Series CLI Guide

702

IPv6 First Hop Security

ipv6 nd raguard

ipv6 nd raguard

To globally enable the Router Advertisements (RA) guard feature on a VLAN, use the ipv6 nd raguard
command in VLAN Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 nd raguard

no ipv6 nd raguard

Parameters

N/A

Default Configuration

RA Guard on a VLAN is disabled.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Use the ipv6 nd raguard command, to enable IPv6 RA Guard on a VLAN. The RA Guard discards RA,
CPA, and ICMP Redirect messages received on ports that are not configured as router (see the device-role
command). The RA Guard validates received RA messages based on an RA Guard policy attached to the
source port.

RA Guard is performed before ND inspection.

Example 1—The following example enables RA Guard on VLAN 100:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 nd raguard
switchxxxxxx(config-if)# exit

Example 2—The following example enables RA Guard on VLANs 100-107:

switchxxxxxx(config)# interface range vlan 100-107
switchxxxxxx(config-if-range)# ipv6 nd raguard
switchxxxxxx(config-if-range)# exit

Cisco Business Switches 350 Series CLI Guide

703

ipv6 nd raguard attach-policy (port mode)

IPv6 First Hop Security

ipv6 nd raguard attach-policy (port mode)

To attach an RA Guard policy to a specific port, use the ipv6 nd raguard attach-policy command in Interface
Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 nd raguard attach-policy policy-name [vlan vlan-list]

no ipv6 nd raguard attach-policy [policy-name]

Parameters

• policy-name—The RA Guard policy name (up to 32 characters).

• vlan vlan-list—Specifies that the RA Guard policy is to be attached to the VLAN(s) in vlan-list. If the
vlan keyword is not configured, the policy is applied to all VLANs on the device on which RA Guard
policy is enabled.

Default Configuration

The RA Guard default policy is applied.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use this command to attach an RA Guard policy to a port. Each time the command is used, it overrides the
previous command within the same policy. If a policy specified by the policy-name argument is not defined,
the command is rejected.

Multiple policies with the vlan keyword can be attached to the same port if they do not have common VLANs.

The set of rules that is applied to an input packet is built in the following way:

• The rules, configured in the policy attached to the port on the VLAN on which the packet arrived are

added to the set.

• The rules, configured in the policy attached to the VLAN are added to the set if they have not been added.

• The global rules are added to the set if they have not been added.

Use the no ipv6 nd raguard attach-policy command to detach all user-defined policies attached to the port.

Use the no ipv6 nd raguard attach-policy policy-name command to detach the specific policy from the port.

Example 1—In the following example, the RA Guard policy policy1 is attached to the gi1/0/1 port:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 nd raguard attach-policy policy1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

704

IPv6 First Hop Security

ipv6 nd raguard attach-policy (port mode)

Example 2—In the following example, the RA Guard policy policy1 is attached to the gi1/0/1 port
and applied to VLANs 1-10 and 12-20:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 nd raguard attach-policy policy1 vlan 1-10,12-20
switchxxxxxx(config-if)# exit

Example 3—In the following example, the RA Guard policy policy1 is attached to the gi1/0/1 port
and applied to VLANs 1-10 and the RA Guard policy policy2 is attached to the gi1/0/1 port and
applied to VLANs 12-20:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 nd raguard attach-policy policy1 vlan 1-10
switchxxxxxx(config-if)# ipv6 nd raguard attach-policy policy2 vlan 12-20
switchxxxxxx(config-if)# exit

Example 4—In the following example RA Guard detaches policy policy1 from the gi1/0/1 port:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# no ipv6 nd raguard attach-policy policy1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

705

ipv6 nd raguard attach-policy (VLAN mode)

IPv6 First Hop Security

ipv6 nd raguard attach-policy (VLAN mode)

To attach an RA Guard policy to a specified VLAN, use the ipv6 nd raguard attach-policy command in
VLAN Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 nd raguard attach-policy policy-name

no ipv6 nd raguard attach-policy

Parameters

• policy-name—The RA Guard policy name (up to 32 characters).

Default Configuration

The RA Guard default policy is applied.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Use this command to attach an RA Guard policy to a VLAN.

If a policy specified by the policy-name argument is not defined, the command is rejected.

Use the no form of the command to detach the current policy and to reattach the default policy. The no form
of the command has no effect if the default policy was attached.

Example

In the following example, the RA Guard policy policy1 is attached to VLAN 100:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 nd raguard attach-policy policy1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

706

IPv6 First Hop Security

ipv6 nd raguard hop-limit

ipv6 nd raguard hop-limit

To globally enable verification of the advertised Cur Hop Limit value in RA messages, use the ipv6 nd
raguard hop-limit command in Global Configuration mode. To return to the default, use the no form of this
command.

Syntax

ipv6 nd raguard hop-limit {[maximum value] [minimum value]}

no ipv6 nd raguard hop-limit [maximum] [minimum]

Parameters

• maximum value—Verifies that the hop-count limit is lower than or equal to the value argument. Range
1-255. The value of the high boundary must be equal to or greater than the value of the low boundary.

• minimum value—Verifies that the hop-count limit is greater than or equal to the value argument. Range

1-255.

Default Configuration

No hop-count limit is verified.

Command Mode

Global Configuration mode

User Guidelines

This command enables verification that the advertised Cur Hop Limit value in an RA message (see RFC4861)
is greater than or less than the value set by the value argument.

Configuring the minimum value keyword and argument can prevent an attacker from setting a low Cur Hop
Limit value on the hosts to block them from generating traffic to remote destinations; that is, beyond their
default router. If the advertised Cur Hop Limit value is unspecified (which is the same as setting a value of
0), the packet is dropped.

Configuring the maximum value keyword and argument enables verification that the advertised Cur Hop
Limit value is less than or equal to the value set by the value argument. If the advertised Cur Hop Limit value
is unspecified (which is the same as setting a value of 0), the packet is dropped.

Use the no ipv6 nd raguard hop-limit maximum command to disable verification of the maximum boundary
of the advertised Cur Hop Limit value in an RA message.

Use the no ipv6 nd raguard hop-limit minimum command to disable verification of the minimum boundary
of the advertised Cur Hop Limit value in an RA message.

Example 1—The following example defines a minimum Cur Hop Limit value of 3 and a maximum
Cur Hop Limit value of 100 using two commands:

switchxxxxxx(config)# ipv6 nd raguard hop-limit minimum 3
switchxxxxxx(config)# ipv6 nd raguard hop-limit maximum 100

Cisco Business Switches 350 Series CLI Guide

707

ipv6 nd raguard hop-limit

IPv6 First Hop Security

Example 2—The following example defines a minimum Cur Hop Limit value of 3 and a maximum
Cur Hop Limit value of 100 using a single command:

switchxxxxxx(config)# ipv6 nd raguard hop-limit minimum 3 maximum 100

Cisco Business Switches 350 Series CLI Guide

708

IPv6 First Hop Security

ipv6 nd raguard managed-config-flag

ipv6 nd raguard managed-config-flag

To globally enable verification of the advertised the Managed Address Configuration flag in RA messages,
use the ipv6 nd raguard managed-config-flag command in Global Configuration mode. To return to the
default, use the no form of this command.

Syntax

ipv6 nd raguard managed-config-flag {on | off}

no ipv6 nd raguard managed-config-flag

Parameters

• on—The value of the flag must be 1.

• off—The value of the flag must be 0.

Default Configuration

Verification is disabled.

Command Mode

Global Configuration mode

User Guidelines

This command enables verification of the advertised the Managed Address Configuration flag (or the M flag)
in an RA message (see RFC4861). This flag could be set by an attacker to force hosts to obtain addresses
through a DHCPv6 server that might not be trustworthy.

Example

The following example enables M flag verification that checks if the value of the flag is 0:

switchxxxxxx(config)# ipv6 nd raguard managed-config-flag off

Cisco Business Switches 350 Series CLI Guide

709

ipv6 nd raguard other-config-flag

IPv6 First Hop Security

ipv6 nd raguard other-config-flag

To globally enable verification of the advertised “Other Configuration” flag in RA messages, use the ipv6
nd raguard other-config-flag command in Global Configuration mode. To return to the default, use the no
form of this command.

Syntax

ipv6 nd raguard other-config-flag {on | off}

no ipv6 nd raguard other-config-flag

Parameters

• on—The value of the flag must be 1.

• off—The value of the flag must be 0.

Default Configuration

Verification is disabled.

Command Mode

Global Configuration mode

User Guidelines

This command enables verification of the advertised “Other Configuration” flag (or "O" flag) in an RA message
(see RFC4861). This flag could be set by an attacker to force hosts to retrieve other configuration information
through a DHCPv6 server that might not be trustworthy.

Example

The following example shows how the command enables O flag verification that checks if the value of the
flag is 0:

switchxxxxxx(config)# ipv6 nd raguard other-config-flag off

Cisco Business Switches 350 Series CLI Guide

710

IPv6 First Hop Security

ipv6 nd raguard policy

ipv6 nd raguard policy

To define an RA Guard policy name and place the switch in IPv6 RA Guard Policy Configuration mode, use
the ipv6 nd raguard policy command in Global Configuration mode. To remove the RA Guard policy, use
the no form of this command.

Syntax

ipv6 nd raguard policy policy-name

no ipv6 nd raguard policy policy-name

Parameters

• policy-name—The RA Guard policy name (up to 32 characters).

Default Configuration

No RA Guard policy is configured

Command Mode

Global Configuration mode

User Guidelines

This command defines the RA Guard policy name, and places the switch in IPv6 RA Guard Policy Configuration
mode.

Each policy of the same type (for example, RA Guard policies) must have a unique name. Policies of different
types can have a same policy name.

The switch supports two predefined RA Guard policies, named: "vlan_default" and "port_default":

ipv6 nd raguard policy vlan_default
exit
ipv6 nd raguard policy port_default
exit

The policies cannot be removed, but they can be changed. The no ipv6 nd raguard policy does not remove
these policies, it only removes the policy configuration defined by the user.

The vlan_default policy is attached by default to a VLAN, if no other policy is attached to the VLAN. The
port_default policy is attached by default to a port, if no other policy is attached to the port.

You can define a policy using the ipv6 nd raguard policy command multiple times. If an attached policy is
removed, it is detached automatically before removing.

Example 1—The following example defines an RA Guard policy named policy1, places the router
in RA Guard Policy Configuration mode, and disenabled validation of the Other Configuration flag,
and sets the device role as router:

switchxxxxxx(config)# ipv6 nd raguard policy policy1
switchxxxxxx(config-ra-guard)# other-config-flag disable

Cisco Business Switches 350 Series CLI Guide

711

ipv6 nd raguard policy

IPv6 First Hop Security

switchxxxxxx(config-ra-guard)# device-role router
switchxxxxxx(config-ra-guard)# exit

Example 2—The following example defines an RA Guard named policy1 using multiple steps:

switchxxxxxx(config)# ipv6 nd raguard policy policy1
switchxxxxxx(config-ra-guard)# other-config-flag disable
switchxxxxxx(config-ra-guard)# exit
switchxxxxxx(config)# ipv6 nd raguard policy policy1
switchxxxxxx(config-ra-guard)# device-role router
switchxxxxxx(config-ra-guard)# exit

Example 3—The following example removes an attached RA Guard policy:

switchxxxxxx(config)# no ipv6 nd raguard policy policy1
Policy policy1 is applied on the following ports:
gi1/0/1, gi1/0/2

The policy will be detached and removed, are you sure [Y/N]Y

Cisco Business Switches 350 Series CLI Guide

712

IPv6 First Hop Security

ipv6 nd raguard router-preference

ipv6 nd raguard router-preference

To globally enable verification of the advertised Default Router Preference value in RA messages, use the
ipv6 nd raguard router-preference command in Global Configuration mode. To return to the default, use
the no form of this command.

Syntax

ipv6 nd raguard router-preference {[maximum value] [minimum value]}

no ipv6 nd raguard router-preference [maximum] [minimum]

Parameters

• maximum value—Specifies the maximum allowed Advertised Default Router Preference value. The

following values are acceptable: low, medium and high (see RFC4191). The value of the high boundary
must be equal to or greater than the value of the low boundary.

• minimum value—Specifies the minimum allowed Advertised Default Router Preference value. The

following values are acceptable: low, medium and high (see RFC4191).

Default Configuration

Verification is disabled.

Command Mode

Global Configuration mode

User Guidelines

This command enables verification of the advertised Default Router Preference value in RA messages (see
RFC4191).

Configuring the minimum value keyword and argument specifies the minimum allowed value. Received RA
messages with a Default Router Preference value less than the value argument are dropped.

Configuring the maximum value keyword and argument specifies the maximum allowed value. Received
RA messages with a Default Router Preference value greater than the value argument are dropped.

Use the no ipv6 nd raguard router-preference command to disable verification of the advertised Default
Router Preference value in RA messages.

Use the no ipv6 nd raguard router-preference maximum command to disable verification of the maximum
boundary of the advertised Default Router Preference value in RA messages.

Use the no ipv6 nd raguard router-preference minimum command to disable verification of the advertised
Default Router Preference value in RA messages.

Example 1—The following example defines that only a value of medium is acceptable using two
commands:

switchxxxxxx(config)# ipv6 nd raguard router-preference minimum medium
switchxxxxxx(config)# ipv6 nd raguard router-preference maximum medium

Cisco Business Switches 350 Series CLI Guide

713

ipv6 nd raguard router-preference

IPv6 First Hop Security

Example 2—The following example defines that only a value of medium is acceptable using a
single command:

switchxxxxxx(config)# ipv6 nd raguard router-preference minimum medium maximum medium

Cisco Business Switches 350 Series CLI Guide

714

IPv6 First Hop Security

ipv6 neighbor binding

ipv6 neighbor binding

To globally enable the Neighbor Binding (NB) integrity feature on a VLAN, use the ipv6 neighbor binding
command in VLAN Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 neighbor binding

no ipv6 neighbor binding

Parameters

N/A

Default Configuration

NB integrity on a VLAN is disabled.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

NB integrity establishes binding for neighbors connected to the perimetrical ports belonging to the VLANs
on which the feature is enabled.

Example 1—The following example enables NB integrity on VLAN 100:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 neighbor binding
switchxxxxxx(config-if)# exit

Example 2—The following example enables NB integrity on VLANs 100-107:

switchxxxxxx(config)# interface range vlan 100-107
switchxxxxxx(config-if-range)# ipv6 neighbor binding
switchxxxxxx(config-if-range)# exit

Cisco Business Switches 350 Series CLI Guide

715

ipv6 neighbor binding address-config

IPv6 First Hop Security

ipv6 neighbor binding address-config

To specify allowed configuration methods of global IPv6 addresses, use the ipv6 neighbor binding
address-config command in Global Configuration mode. To return to the default setting, use the no form of
this command.

Syntax

ipv6 neighbor binding address-config [stateless | any] [dhcp]

no ipv6 neighbor binding address-config

Parameters

• stateless—Only auto configuration is allowed for global IPv6 bound from NDP messages.

• any—All configuration methods for global IPv6 bound from NDP messages (stateless and manual) are

allowed. If no keyword is defined the any keyword is applied.

• dhcp—Binding from DHCPv6 is allowed.

Default Configuration

Any is the default parameter.

Command Mode

Global Configuration mode

User Guidelines

This command defines allowed IPv6 address configuration methods for global IPv6 addresses.

The stateless and any keywords specify the following:

• Global IPv6 addresses are bound from NDP messages. If none of these keywords are configured, only

link-local addresses are bound from NDP messages.

• How global IPv6 addresses, bound from NDP messages, are checked against the Neighbor Prefix table,

if prefix validation is enabled:

stateless—IPv6 addresses are bound from NDP messages, and only global addresses belonging to learned
prefixes with set A-flag or prefixes manually configured with the autoconfig keyword are allowed.

any—IPv6 addresses are bound from NDP messages and only global addresses belonging to prefixes in
NPT are allowed.

Use the dhcp keyword, to allow binding from DHCPv6 message. IPv6 addresses bound from DHCPv6
messages are never verified against the Neighbor Prefix table. IPv6 addresses bound from DHCPv6 messages
override IPv6 addresses bound from NDP messages.

Note. If the dhcp keyword is not configured, the switch will bind IPv6 addresses assigned by DHCPv6 from
NDP messages, because a host must execute the DAD process for these addresses.

If no keyword is defined the ipv6 neighbor binding address-config any command is applied.

Cisco Business Switches 350 Series CLI Guide

716

IPv6 First Hop Security

ipv6 neighbor binding address-config

Example 1. The following example specifies that any global IPv6 address configuration method can
be applied and there will be no binding from DHCPv6 messages:

switchxxxxxx(config)# ipv6 neighbor binding address-prefix-validation
switchxxxxxx(config)# ipv6 neighbor binding address-config any

Example 2. The following example specifies that any global IPv6 address binding from NDP and
global IPv6 address binding from DHCPv6 messages can be applied:

switchxxxxxx(config)# ipv6 neighbor binding address-prefix-validation
switchxxxxxx(config)# ipv6 neighbor binding address-config any dhcp

Example 3. The following example specifies that only stateless global IPv6 address binding from
NDP can be applied

switchxxxxxx(config)# ipv6 neighbor binding address-prefix-validation
switchxxxxxx(config)# ipv6 neighbor binding address-config stateless

Example 4. The following example specifies that only the stateless IPv6 address configuration and
assignment by DHCPv6 methods can be applied and binding only from NDP messages is supported:

switchxxxxxx(config)# ipv6 neighbor binding address-prefix-validation
switchxxxxxx(config)# ipv6 neighbor binding address-config stateless dhcp

Example 5. The following example specifies that global IPv6 addresses can be assigned only by
DHCPv6:

switchxxxxxx(config)# ipv6 neighbor binding address-config dhcp

Cisco Business Switches 350 Series CLI Guide

717

ipv6 neighbor binding address-prefix

IPv6 First Hop Security

ipv6 neighbor binding address-prefix

To define a static prefix for global IPv6 addresses bound from NDP messages, use the ipv6 neighbor binding
address-prefix command in Global Configuration mode. To delete the prefix, use the no form of this command.

Syntax

ipv6 neighbor binding address-prefix vlan vlan-id ipv6-prefix/prefix-length [autoconfig]

no ipv6 neighbor binding address-prefix [vlan vlan-id] [ipv6-prefix/prefix-length]

Parameters

• ipv6-prefix/prefix-length—IPv6 prefix.

• vlan vlan-id—ID of the specified VLAN.

• autoconfig—The prefix can be used for stateless configuration.

Default Configuration

No static prefix

Command Mode

Global Configuration mode

User Guidelines

Use the ipv6 neighbor binding address-prefix command to add a static prefix to the Neighbor Prefix table.

Use the no ipv6 neighbor binding address-prefix vlan vlan-id ipv6-prefix/prefix-length command to remove
one static entry from the Neighbor Prefix table.

Use the no ipv6 neighbor binding address-prefix vlan vlan-id command to remove all static entries from
the Neighbor Prefix table defined on the given VLAN.

Use the no ipv6 neighbor binding address-prefix command to remove all static entries from the Neighbor
Prefix table.

Example 1. The following example adds two static entries. The second one can be used for stateless
configuration.

switchxxxxxx(config)# ipv6 neighbor binding address-prefix vlan 100 2001:0DB8:101::/64
switchxxxxxx(config)# ipv6 neighbor binding address-prefix vlan 100 2001:0DB8:100::/64
autoconfig

Example 2. The following example deletes a single static entry:

switchxxxxxx(config)# no ipv6 neighbor binding address-prefix vlan 100 2001:0DB8:101::/64

Example 3. The following example deletes all static entries defined on the specified VLAN:

switchxxxxxx(config)# no ipv6 neighbor binding address-prefix vlan 100

Example 4. The following example deletes all static entries:

switchxxxxxx(config)# no ipv6 neighbor binding address-prefix

Cisco Business Switches 350 Series CLI Guide

718

IPv6 First Hop Security

ipv6 neighbor binding address-prefix-validation

ipv6 neighbor binding address-prefix-validation

To globally enable validation of a bound IPv6 address against the Neighbor Prefix table, use the ipv6 neighbor
binding address-prefix-validation command in Global Configuration mode. To disable this feature, use the
no form of this command.

Syntax

ipv6 neighbor binding address-prefix-validation

no ipv6 neighbor binding address-prefix-validation

Parameters

N/A

Default Configuration

The feature is disabled.

Command Mode

Global Configuration mode

User Guidelines

This command enables bound address prefix validation. If the Neighbor Binding feature is enabled, the switch
checks if a bound address belongs to one of the prefixes of the Neighbor Prefix table or to a manually-configured
prefix list by the ipv6 neighbor binding address-prefix command in the Neighbor Binding configuration mode.
If an address does not belong, it is not bound.

Example

The following example shows how to enable bound address validation against the Neighbor Prefix table:

switchxxxxxx(config)# ipv6 neighbor binding address-prefix-validation

Cisco Business Switches 350 Series CLI Guide

719

ipv6 neighbor binding attach-policy (port mode)

IPv6 First Hop Security

ipv6 neighbor binding attach-policy (port mode)

To attach a Neighbor Binding policy to a specific port, use the ipv6 neighbor binding attach-policy command
in Interface Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 neighbor binding attach-policy policy-name [vlan vlan-list]

no ipv6 neighbor binding attach-policy [policy-name]

Parameters

• policy-name—The Neighbor Binding policy name (up to 32 characters).

• vlan vlan-list—Specifies that the Neighbor Binding policy is to be attached to the VLAN(s) in vlan-list.
If the vlan keyword is not configured, the policy is applied to all VLANs on the device on which Neighbor
Binding policy is enabled.

Default Configuration

The Neighbor Binding default policy is applied.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use this command to attach a Neighbor Binding policy to a port.

Each time the command is used, it overrides the previous command within the same policy.

If a policy specified by the policy-name argument is not defined, the command is rejected.

Multiple policies with the vlan keyword can be attached to the same port if they do not have common VLANs.

The set of rules that is applied to an input packet is built in the following way:

• The rules, configured in the policy attached to the port on the VLAN on which the packet arrived are

added to the set.

• The rules, configured in the policy attached to the VLAN are added to the set if they have not been added.

• The global rules are added to the set if they have not been added.

Use the no ipv6 neighbor binding attach-policy command to detach all user-defined policies attached to
the port.

Use the no ipv6 neighbor binding attach-policy policy-name command to detach the specific policy from
the port.

Example 1—In the following example, the Neighbor Binding policy policy1 is attached to the gi1/0/1
port:

Cisco Business Switches 350 Series CLI Guide

720

IPv6 First Hop Security

ipv6 neighbor binding attach-policy (port mode)

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 neighbor binding attach-policy policy1
switchxxxxxx(config-if)# exit

Example 2—In the following example, the Neighbor Binding policy policy1 is attached to the gi1/0/1
port and applied to VLANs 1-10 and 12-20:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 neighbor binding attach-policy policy1 vlan 1-10,12-20
switchxxxxxx(config-if)# exit

Example 3—In the following example, the Neighbor Binding policy policy1 is attached to the gi1/0/1
port and applied to VLANs 1-10, and the Neighbor Binding policy policy2 is attached to the gi1/0/1
port and applied to VLANs 12-20:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 neighbor binding attach-policy policy1 vlan 1-10
switchxxxxxx(config-if)# ipv6 neighbor binding attach-policy policy2 vlan 12-20
switchxxxxxx(config-if)# exit

Example 4—In the following example, Neighbor Binding Integrity detaches policy policy1 detached
to the gi1/0/1 port:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# no ipv6 neighbor binding attach-policy policy1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

721

ipv6 neighbor binding attach-policy (VLAN mode)

IPv6 First Hop Security

ipv6 neighbor binding attach-policy (VLAN mode)

To attach a Neighbor Binding policy to a specific VLAN, use the ipv6 neighbor binding attach-policy
command in VLAN Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 neighbor binding attach-policy policy-name

no ipv6 neighbor binding attach-policy

Parameters

• policy-name—The Neighbor Binding policy name (up to 32 characters).

Default Configuration

The Neighbor Binding default policy is applied.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

Use this command to attach a Neighbor Binding policy to a VLAN.

If a policy specified by the policy-name argument is not defined, the command is rejected.

Use the no form of the command to return to detach the current policy and reattach the default policy. The
no form of the command has no effect if the default policy was attached.

Example

In the following example, the Neighbor Binding policy policy1 is attached to VLAN 100:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 neighbor binding attach-policy policy1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

722

IPv6 First Hop Security

ipv6 neighbor binding lifetime

ipv6 neighbor binding lifetime

To globally change the default of the Neighbor Binding table entry lifetime, use the ipv6 neighbor binding
lifetime command in Global Configuration mode. To return to the default setting, use the no form of this
command.

Syntax

ipv6 neighbor binding lifetime value

no ipv6 neighbor binding lifetime

Parameters

• value—The lifetime in minutes. The range is from 1 through 60 minutes.

Default Configuration

5 minutes

Command Mode

Global Configuration mode

User Guidelines

Use the ipv6 neighbor binding lifetime command to change the default lifetime.

Example

The following example changes the lifetime for binding entries to 10 minutes:

switchxxxxxx(config)# ipv6 neighbor binding lifetime 10

Cisco Business Switches 350 Series CLI Guide

723

ipv6 neighbor binding max-entries

IPv6 First Hop Security

ipv6 neighbor binding max-entries

To globally specify the maximum number of dynamic entries that are allowed to be inserted in the Binding
table cache, use the ipv6 neighbor binding max-entries command in Global Configuration mode. To return
to the default, use the no form of this command.

Syntax

ipv6 neighbor binding max-entries {[vlan-limit number] [interface-limit number] [mac-limit number]}

no ipv6 neighbor binding max-entries [vlan-limit] [interface-limit] [mac-limit]

Parameters

• vlan-limit number—Specifies a neighbor binding limit per number of VLANs.

• interface-limit number—Specifies a neighbor binding limit per port.

• mac-limit number—Specifies a neighbor binding limit per MAC address.

Default Configuration

This command is disabled.

Command Mode

Global Configuration mode

User Guidelines

This command is used to control the contents of the Binding table. This command specifies the maximum
number of dynamic entries that can be inserted in the Binding table cache. After this limit is reached, new
entries are refused, and a Neighbor Discovery Protocol (NDP) traffic source with a new entry is dropped.

If the maximum number of entries specified is lower than the current number of entries in the database, no
entries are cleared, and the new threshold is reached after normal cache attrition.

Example

The following example shows how to specify globally the maximum number of entries that can be inserted
into the cache per MAC:

switchxxxxxx(config)# ipv6 neighbor binding max-entries mac-limit 2

Cisco Business Switches 350 Series CLI Guide

724

IPv6 First Hop Security

ipv6 neighbor binding policy

ipv6 neighbor binding policy

To define a Neighbor Binding policy and place the switch in IPv6 Neighbor Binding Policy Configuration
mode, use the ipv6 neighbor binding policy command in Global Configuration mode. To remove the Neighbor
Binding policy, use the no form of this command.

Syntax

ipv6 neighbor binding policy policy-name

no ipv6 neighbor binding policy policy-name

Parameters

• policy-name—The Neighbor Binding policy name (up to 32 characters).

Default Configuration

No Neighbor Binding policy is configured

Command Mode

Global Configuration mode

User Guidelines

This command defines a Neighbor Binding policy name, and places the router in Neighbor Binding Policy
Configuration mode so that additional commands can be added to the policy.

The switch supports two predefined Neighbor Binding policies, named: "vlan_default" and "port_default":

ipv6 neighbor binding policy vlan_default

exit
ipv6 neighbor binding policy port_default
exit

The policies cannot be removed, but they can be changed. The no ipv6 neighbor binding policy does not
remove these policies, it only removes the policy configuration defined by the user.

You can define a policy using the ipv6 neighbor binding policy command multiple times.

If an attached policy is removed, it is detached automatically before removing.

Example 1—The following example defines a Neighbor Binding policy named policy1, places the
router in Neighbor Binding Policy Configuration mode, enables logging, and defines the port as
internal:

switchxxxxxx(config)# ipv6 neighbor binding policy policy1
switchxxxxxx(config-nbr-binding)# device-role internal
switchxxxxxx(config-nbr-binding)# logging binding
switchxxxxxx(config-nbr-binding)# exit

Example 2—The following example defines a Neighbor Binding policy named policy1 using multiple
steps:

Cisco Business Switches 350 Series CLI Guide

725

ipv6 neighbor binding policy

IPv6 First Hop Security

switchxxxxxx(config)# ipv6 neighbor binding policy policy1
switchxxxxxx(config-nbr-binding)# device-role internal
switchxxxxxx(config-nbr-binding)# exit
switchxxxxxx(config)# ipv6 neighbor binding policy policy1
logging binding
witchxxxxxx(config-nbr-binding)# exit

Example 3—The following example remove an attached Neighbor Binding policy:

switchxxxxxx(config)# no ipv6 neighbor binding policy policy1
Policy policy1 is applied on the following ports:

gi1/0/1, gi1/0/2

The policy will be detached and removed, are you sure [Y/N]Y

Cisco Business Switches 350 Series CLI Guide

726

IPv6 First Hop Security

ipv6 neighbor binding static

ipv6 neighbor binding static

To add a static entry to the Neighbor Binding table, use the ipv6 neighbor binding static command in Global
Configuration mode. To remove the static entry, use the no form of this command.

Syntax

ipv6 neighbor binding static ipv6 ipv6-address vlan vlan-id interface interface-id mac mac-address

no ipv6 neighbor binding static ipv6 ipv6-address vlan vlan-id

Parameters

• ipv6 ipv6-address—IPv6 address of the static entry.

• vlan vlan-id—ID of the specified VLAN.

• interface interface-id—Adds static entries to the specified port.

• mac mac-address—MAC address of the static entry.

Default Configuration

No static entry.

Command Mode

Global Configuration mode

User Guidelines

This command is used to add static entries to the Neighbor Binding table. Static entries can be configured
regardless the port role.

If the entry (dynamic or static) already exists, the new static entry overrides the existing one.

If the Neighbor Binding table overflows, the static entry is not added.

Example

The following example adds a static entry:

switchxxxxxx(config)# ipv6 neighbor binding static ipv6 2001:600::1 vlan 100 interface
gi1/0/1 mac 00BB.CC01.F500

Cisco Business Switches 350 Series CLI Guide

727

ipv6 source guard

IPv6 First Hop Security

ipv6 source guard

To enable the IPv6 Source Guard feature on a VLAN, use the ipv6 source guard command in VLAN
Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 source guard

no ipv6 source guard

Default Configuration

Source Guard on a VLAN is disabled.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

IPv6 Source Guard blocks an IPv6 data message arriving on a port if its source IPv6 address is bound to
another port, or it is unknown.

Example 1—The following example enables IPv6 Source Guard on VLAN 100:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 source guard
switchxxxxxx(config-if)# exit

Example 2—The following example enables IPv6 Source Guard on VLANs 100-107:

switchxxxxxx(config)# interface range vlan 100-107
switchxxxxxx(config-if-range)# ipv6 source guard
switchxxxxxx(config-if-range)# exit

Cisco Business Switches 350 Series CLI Guide

728

IPv6 First Hop Security

ipv6 source guard attach-policy (port mode)

ipv6 source guard attach-policy (port mode)

To attach an IPv6 Source Guard policy to a specific port, use the ipv6 source guard attach-policy command
in Interface Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 source guard attach-policy policy-name

no ipv6 source guard attach-policy

Parameters

• policy-name—The IPv6 Source Guard policy name (up to 32 characters).

Default Configuration

The IPv6 Source Guard default policy is applied.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use this command to attach an IPv6 Source Guard policy to a port.

Each succeeding ipv6 source guard attach-policy command overrides the previous policy attachment on
the same port.

IPv6 Source guard policies can be used to block forwarding IPv6 data messages with unknown source IPv6
addresses or with source IPv6 addresses bound to a port differing from the input one.

If a policy specified by the policy-name argument is not defined, the command is rejected.

The set of rules that is applied to an input packet is built in the following way:

• The rules, configured in the policy attached to the port.

• The global rules are added to the set if they have not been added.

Use the no ipv6 source guard attach-policy command to detach the user defined policy attached to the port
and to reattach the default policy with name "port_default".

Example 1—In the following example, the IPv6 Source Guard policy policy1 is attached to the
gi1/0/1 port:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 source guard attach-policy policy1
switchxxxxxx(config-if)# exit

Example 2—In the following example IPv6 Source Guard detaches policy1 from the gi1/0/1 port:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# no ipv6 source guard attach-policy
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

729

ipv6 source guard policy

IPv6 First Hop Security

ipv6 source guard policy

To define an IPv6 Source Guard policy name and place the user in IPv6 Source Guard Configuration, use the
ipv6 source guard policy command in Global Configuration mode. To remove the IPv6 Source Guard policy
name, use the no form of this command.

Syntax

ipv6 source guard policy policy-name

no ipv6 source guard policy policy-name

Parameters

• policy-name—The IPv6 Source Guard policy name (up to 32 characters).

Default Configuration

No IPv6 Source Guard policies are configured.

Command Mode

Global Configuration mode

User Guidelines

This command defines the IPv6 Source Guard policy name, and places the router in IPv6 Source Guard Policy
Configuration mode.

Each policy of the same type (for example, IPv6 Source Guard policies) must have a unique name. Policies
of different types can have the same policy name.

The switch supports one predefined IPv6 Source Guard policy named: "port_default":

ipv6 source guard policy port_default

exit

The policy cannot be removed, but it can be changed. The no ipv6 source guard policy does not remove the
policy, it only removes any policy configurations defined by the user.

If an attached policy is removed, it is detached automatically before removing.

Example 1—The following example defines the IPv6 Source Guard policy named policy1, places
the router in IPv6 Source Guard Policy Configuration mode, and configures the port as trusted:

switchxxxxxx(config)# ipv6 source guard policy policy1
switchxxxxxx(config-ipv6-srcguard)# trusted-port
switchxxxxxx(config)# exit

Example 2—The following example removes the attached IPv6 Source Guard policy:

switchxxxxxx(config)# no ipv6 source guard policy policy1
Policy policy1 is applied on the following ports:
gi1/0/1, gi1/0/2

The policy will be detached and removed, are you sure [Y/N]Y

Cisco Business Switches 350 Series CLI Guide

730

IPv6 First Hop Security

logging binding

logging binding

To enable the logging of Binding table main events within an IPv6 Neighbor Binding policy, use the logging
binding command in Neighbor Binding Policy Configuration mode. To return to the default, use the no form
of this command.

Syntax

logging binding [enable | disable]

no logging binding

Parameters

• enable—Enables logging of Binding table main events. If no keyword is configured, this keyword is

applied by default.

• disable—Disables logging of Binding table main events.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configuration.

Command Mode

Neighbor Binding Policy Configuration mode.

User Guidelines

If this command is part of a policy attached to a VLAN, it is applied to all the ports in the VLAN. If it is
defined in a policy attached to a port in the VLAN, this value overrides the value in the policy attached to the
VLAN.

Example

The following example enables logging of Binding table main events within the IPv6 Neighbor Binding policy
named policy1:

switchxxxxxx(config)# ipv6 neighbor binding policy policy1
switchxxxxxx(config-nbr-binding)# logging binding enable
switchxxxxxx(config-nbr-binding)# exit

Cisco Business Switches 350 Series CLI Guide

731

logging packet drop

IPv6 First Hop Security

logging packet drop

To enable the logging of dropped packets within an IPv6 First Hop Security policy, use the logging packet
drop command in IPv6 First Hop Security Policy Configuration mode. To return to the default, use the no
form of this command.

Syntax

logging packet drop [enable | disable]

no logging packet drop

Parameters

• enable—Enables logging of dropped packets. If no keyword is configured, this keyword is applied by

default.

• disable—Disables logging of dropped packets.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configuration.

Command Mode

IPv6 First Hop Security Policy Configuration mode

User Guidelines

If this command is part of a policy attached to a VLAN, it is applied to all the ports in the VLAN. If it is
defined in a policy attached to a port in the VLAN, this value overrides the value in the policy attached to the
VLAN.

Example

The following example enables logging of dropped messaged with the IPv6 First Hop Security Policy named
policy1:

switchxxxxxx(config)# ipv6 first hop security policy policy1
switchxxxxxx(config-ipv6-fhs)# logging packet drop
switchxxxxxx(config-ipv6-fhs)# exit

Cisco Business Switches 350 Series CLI Guide

732

IPv6 First Hop Security

managed-config-flag

managed-config-flag

To enable verification of the advertised Managed Address Configuration flag within an IPv6 RA Guard policy,
use the managed-config-flag command in RA Guard Policy Configuration mode. To return to the default,
use the no form of this command.

Syntax

managed-config-flag {on | off | disable}

no managed-config-flag

Parameters

• on—The value of the flag must be 1.

• off—The value of the flag must be 0.

• disable—The value of the flag is not validated.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configuration.

Command Mode

RA Guard Policy Configuration mode

Example

The following example defines an RA Guard policy named policy1, places the switch in RA Guard Policy
Configuration mode, and enables M flag verification that checks if the value of the flag is 0:

switchxxxxxx(config)# ipv6 nd raguard policy policy1
switchxxxxxx(config-ra-guard)# managed-config-flag off
switchxxxxxx(config-ra-guard)# exit

Cisco Business Switches 350 Series CLI Guide

733

match ra address

IPv6 First Hop Security

match ra address

To enable verification of the router's IPv6 address in received RA messages within an IPv6 RA Guard policy,
use the match ra address command in RA Guard Policy Configuration mode. To return to the default, use
the no form of this command.

Syntax

match ra address {prefix-list ipv6-prefix-list-name} | disable

no match ra address

Parameters

• prefix-list ipv6-prefix-list-name—The IPv6 prefix list to be matched.

• disable—Disables verification of the router’s IPv6 address.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: router's addresses are not verified.

Command Mode

RA Guard Policy Configuration mode

User Guidelines

This command enables verification of the router's IPv6 address in received RA messages by a configured
prefix list. If the router’s source IPv6 address does not match the prefix list or if the prefix list is not configured,
the RA message is dropped.

Use the disable keyword to disable verification of the router’s IPv6 address regardless of the VLAN
configuration.

Example

The following example defines an RA Guard policy named policy1, places the switch in RA Guard Policy
Configuration mode, matches the router addresses to the prefix list named list1, and defines the prefix list
named list1 authorizing the router with link-local address FE80::A8BB:CCFF:FE01:F700 only:

switchxxxxxx(config)# ipv6 nd raguard policy policy1
switchxxxxxx(config-ra-guard)# match ra address prefix-list list1
switchxxxxxx(config-ra-guard)# exit
switchxxxxxx(config)# ipv6 prefix-list list1 permit FE80::A8BB:CCFF:FE01:F700/128

Cisco Business Switches 350 Series CLI Guide

734

IPv6 First Hop Security

match ra prefixes

match ra prefixes

To enable verification of the advertised prefixes in received RA messages within an IPv6 RA Guard policy,
use the match ra prefixes command in RA Guard Policy Configuration mode. To return to the default, use
the no form of this command.

Syntax

match ra prefixes {prefix-list ipv6-prefix-list-name} | disable

no match ra prefixes

Parameters

• prefix-list ipv6-prefix-list-name—The IPv6 prefix list to be matched.

• disable—Disables verification of the advertised prefixes in received RA messages.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: advertised prefixes are not verified.

Command Mode

RA Guard Policy Configuration mode

User Guidelines

This command enables verification of the advertised prefixes in received RA messages by a configured prefix
list. If an advertised prefix does not match the prefix list, or if the prefix list is not configured, the RA message
is dropped.

Use the disable keyword to disable verification of the advertised prefixes in received RA messages in both
global or the VLAN configuration.

Example

The following example defines an RA Guard policy named policy1, places the switch in RA Guard configuration
mode, matches the prefixes to the prefix list named list1, and the 2001:101::/64 prefixes and denies
2001:100::/64 prefixes:

switchxxxxxx(config)# ipv6 nd raguard policy policy1
switchxxxxxx(config-ra-guard)# match ra prefixes prefix-list list1
switchxxxxxx(config-ra-guard)# exit
switchxxxxxx(config)# ipv6 prefix-list list1 deny 2001:0DB8:101::/64
switchxxxxxx(config)# ipv6 prefix-list list1 permit 2001:0DB8:100::/64

Cisco Business Switches 350 Series CLI Guide

735

match reply

match reply

IPv6 First Hop Security

To enable verification of the assigned IPv6 addressed in messages sent by DHCPv6 servers/relays to a
configured prefix list within a DHCPv6 Guard policy, use the match reply command in DHCPv6 Guard
Policy Configuration mode. To return to the default, use the no form of this command.

Syntax

match reply {prefix-list ipv6-prefix-list-name} | disable

no match reply

Parameters

• ipv6-prefix-list-name—The IPv6 prefix list to be matched.

• disable—Disables verification of the advertised prefixes in replies.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: advertised prefixes are not verified.

Command Mode

DHCP Guard Policy Configuration mode

User Guidelines

IPv6 DHCP Guard verifies the assigned IPv6 addresses to the configure prefix list passed in the IA_NA and
IA_TA options of the following DHCPv6 messages sent by DHCPv6 servers/relays:

• ADVERTISE

• REPLY

• RELAY-REPL

Note 1. Assigned addresses are not verified if a value of the Status Code option (if it presents) differs from
the following ones:

• Success

• UseMulticast

Note 2. In RELAY-REPL messages DHCPv6 Guard validates the message encapsulated in the
DHCP-relay-message option.

Use the disable keyword to disable verification of the assigned IPv6 addresses in replies.

Example

The following example defines a DHCPv6 Guard policy named policy1, places the switch in DHCPv6 Guard
policy configuration mode, matches the assigned addresses to the prefix list named list1: all assigned IPv6

Cisco Business Switches 350 Series CLI Guide

736

IPv6 First Hop Security

match reply

addresses must belong to 2001:0DB8:100:200/64 or to 2001:0DB8:100::/48. The "ge 128" parameter must
be configured for each prefix of the prefix-list with prefix length less than 128.

switchxxxxxx(config)# ipv6 dhcp guard policy policy1
switchxxxxxx(config-dhcp-guard)# match reply prefix-list list1
switchxxxxxx(config-dhcp-guard)# exit
switchxxxxxx(config)# ipv6 prefix-list list1 deny 2001:0DB8:100:200/64 ge 128
switchxxxxxx(config)# ipv6 prefix-list list1 permit 2001:0DB8:100::/48 ge 128

Cisco Business Switches 350 Series CLI Guide

737

match server address

IPv6 First Hop Security

match server address

To enable verification of the source IPv6 address in messages sent by DHCPv6 servers or DHCPv6 Relays
to a configured prefix list within a DHCPv6 Guard policy, use the match server address command in DHCPv6
Guard Policy Configuration mode. To return to the default, use the no form of this command.

Syntax

match server address {prefix-list ipv6-prefix-list-name} | disable

no match server address

Parameters

• prefix-list ipv6-prefix-list-name—The IPv6 prefix list to be matched.

• disable—Disables verification of the DHCP server's and relay’s IPv6 address.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: server's addresses are not verified.

Command Mode

DHCP Guard Policy Configuration mode

User Guidelines

This command enables verification of the source IPv6 address in messages sent by DHCPv6 servers and
DHCPv6 Relays to a configured prefix list. If the source IPv6 address does not match the configured prefix
list, or if the prefix list is not configured, the DHCPv6 reply is dropped.

IPv6 DHCP Guard verifies the source IPv6 address in the following DHCPv6 messages sent by DHCPv6
servers/relays:

• ADVERTISE

• REPLY

• RECONFIGURE

• RELAY-REPL

• LEASEQUERY-REPLY

Use the disable keyword to disable verification of the DHCP server's and relay’s IPv6 address.

Example

The following example defines a DHCPv6 Guard policy named policy1, places the switch in DHCPv6 Guard
Policy Configuration mode, matches the server or relay addresses to the prefix list named list1, and defines
the prefix list named list1 authorizing the server with link-local address FE80::A8BB:CCFF:FE01:F700 only:

Cisco Business Switches 350 Series CLI Guide

738

IPv6 First Hop Security

match server address

switchxxxxxx(config)# ipv6 dhcp guard policy policy1
switchxxxxxx(config-dhcp-guard)# match server address prefix-list list1
switchxxxxxx(config-dhcp-guard)# exit
switchxxxxxx(config)# ipv6 prefix-list list1 permit FE80::A8BB:CCFF:FE01:F700/128

Cisco Business Switches 350 Series CLI Guide

739

max-entries

max-entries

IPv6 First Hop Security

To define the maximum number of dynamic entries that can be inserted in the Binding table cache within an
IPv6 Neighbor Binding policy, use the max-entries command in Neighbor Binding Policy Configuration
mode.To return to the default, use the no form of this command.

Syntax

max-entries {[vlan-limit {number | disable}] [interface-limit {number | disable}] [mac-limit {number |
disable}]}

no max-entries [vlan-limit] [interface-limit] [mac-limit]

Parameters

• vlan-limit number—Specifies a neighbor binding limit per VLANs. The parameter is ignored in a policy

attached to port.

• vlan-limit disable—Disables a neighbor binding limit per VLANs.

• interface-limit number—Specifies a neighbor binding limit per port.

• interface-limit disable—Disables a neighbor binding limit per port.

• mac-limit number—Specifies a neighbor binding limit per MAC address.

• mac-limit disable—Disables a neighbor binding limit per MAC address.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configuration.

Command Mode

Neighbor Binding Policy Configuration mode.

User Guidelines

If this command is part of a policy attached to a VLAN, it is applied to all the ports in the VLAN. If it is
defined in a policy attached to a port in the VLAN, this value overrides the value in the policy attached to the
VLAN.

Example 1—The following example defines an Neighbor Binding policy named policy1, places the
router in Neighbor Binding Policy Configuration mode, and limits the number of IPv6 addresses
allowed on the port to 25:

switchxxxxxx(config)# ipv6 neighbor binding policy policy1
switchxxxxxx(config-nbr-binding)# max-entries interface-limit 25
switchxxxxxx(config)# exit

Example 2—The following example defines an RA Guard policy named policy1, places the switch
in RA Guard Policy Configuration mode, and disables limit per MAC:

Cisco Business Switches 350 Series CLI Guide

740

IPv6 First Hop Security

max-entries

switchxxxxxx(config)# ipv6 nd raguard policy policy1
switchxxxxxx(config-ra-guard)# max-entries mac-limit disable

switchxxxxxx(config-ra-guard)# exit

Cisco Business Switches 350 Series CLI Guide

741

other-config-flag

IPv6 First Hop Security

other-config-flag

To enable the verification of the advertised the Other Configuration flag in RA messages within an IPv6 RA
Guard policy, use the other-config-flag command in RA Guard Policy Configuration mode. To return to the
default, use the no form of this command.

Syntax

other-config-flag {on | off | disable}

no other-config-flag

Parameters

• on—The value of the flag must be 1.

• off—The value of the flag must be 0.

• disable—The value of the flag is not validated.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configuration.

Command Mode

RA Guard Policy Configuration mode

User Guidelines

Use the disable keyword to disable flag validation in both global or VLAN configuration.

Example

The following example defines an RA Guard policy named policy1, places the switch in RA Guard Policy
Configuration mode, and enables O flag verification that checks if the value of the flag is 0:

switchxxxxxx(config)# ipv6 nd raguard policy policy1
switchxxxxxx(config-ra-guard)# other-config-flag off
switchxxxxxx(config-ra-guard)# exit

Cisco Business Switches 350 Series CLI Guide

742

IPv6 First Hop Security

preference

preference

To enable verification of the preference in messages sent by DHCPv6 servers within a DHCPv6 Guard policy,
use the preference command in DHCPv6 Guard Policy Configuration mode. To return to the default, use the
no form of this command.

Syntax

preference {[maximum {value | disable}] [minimum {value | disable}]}

no preference [maximum] [minimum]

Parameters

• maximum value—Advertised preference value is lower or equal than that set by the value argument.

Range 0-255. A value of the high boundary must be equal to or greater than a value of the low boundary.

• maximum disable—Disables verification of the high boundary of the advertised preference value.

• minimum value—Advertised preference value is greater than or equal to the value argument. Range

0-255.

• minimum disable—Disables verification of the lower boundary of the advertised preference value.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configuration.

Command Mode

DHCP Guard Policy Configuration mode

User Guidelines

Use the disable keyword to disable verification in both global or VLAN configuration.

Example

The following example defines a DHCPv6 Guard policy named policy1, places the switch in DHCPv6 Guard
Policy Configuration mode, and defines a minimum preference value of 10:

switchxxxxxx(config)# ipv6 dhcp guard policy policy1
switchxxxxxx(config-dhcp-guard)# preference minimum 10
switchxxxxxx(config-dhcp-guard)# exit

Cisco Business Switches 350 Series CLI Guide

743

router-preference

IPv6 First Hop Security

router-preference

To enable verification of advertised Default Router Preference value in RA messages within an IPv6 RA
Guard policy, use the router-preference command in RA Guard Policy Configuration mode. To return to
the default, use the no form of this command.

Syntax

router-preference [maximum {value | disable}] [minimum {value | disable}]

no router-preference [maximum] [minimum]

Parameters

• maximum value—Specifies the maximum allowed Advertised Default Router Preference value. The

following values are acceptable: low, medium and high (see RFC4191). A value of the high boundary
must be equal to or greater than a value of the low boundary.

• maximum disable—Disables verification of the high boundary of Advertised Default Router Preference.

• minimum value—Specifies the minimum allowed Advertised Default Router Preference value. The

following values are acceptable: low, medium and high (see RFC4191).

• minimum disable—Disables verification of the low boundary of Advertised Default Router Preference.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configuration.

Command Mode

RA Guard Policy Configuration mode

Example

The following example defines an RA Guard policy named policy1, places the switch in RA Guard Policy
Configuration mode, and defines a minimum Default Router Preference value of medium:

switchxxxxxx(config)# ipv6 nd raguard policy policy1
switchxxxxxx(config-ra-guard)# router-preference minimum medium
switchxxxxxx(config-ra-guard)# exit

Cisco Business Switches 350 Series CLI Guide

744

IPv6 First Hop Security

sec-level minimum

sec-level minimum

To specify the minimum security level value within an Ipv6 ND Inspection policy, use the sec-level minimum
command in ND Inspection policy Configuration mode. To return to the default, use the no form of this
command.

Syntax

sec-level minimum value | disable

no sec-level minimum

Parameters

• value—Sets the minimum security level, which is a value from 0 through 7.

• disable—Disables verification of security level parameter

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configuration.

Command Mode

ND inspection Policy Configuration mode

User Guidelines

If this command is part of a policy attached to a VLAN, it is applied to all the ports in the VLAN. If it is
defined in a policy attached to a port in the VLAN, this value overrides the value in the policy attached to the
VLAN.

This command has no effect if dropping of unsecured messages is disabled.

Example

The following example defines an NDP Inspection policy named policy1, places the switch in ND Inspection
Policy Configuration mode, and specifies 2 as the minimum CGA security level:

switchxxxxxx(config)# ipv6 nd inspection policy policy1
switchxxxxxx(config-nd-inspection)# sec-level minimum 2
switchxxxxxx(config-nd-inspection)# exit

Cisco Business Switches 350 Series CLI Guide

745

show ipv6 dhcp guard

IPv6 First Hop Security

show ipv6 dhcp guard

To display DHCPv6 Guard global configuration, use the show ipv6 dhcp guard command in Privilege EXEC
configuration mode.

Syntax

show ipv6 dhcp guard

Command Mode

Privileged EXEC mode

User Guidelines

The show ipv6 dhcp guard command displays DHCPv6 Guard global configuration.

Example

The following example gives an example of the output of the show ipv6 dhcp guard command:

switchxxxxxx# show ipv6 dhcp guard
IPv6 DHCP Guard is enabled on VLANs:1-4,6,7,100-120
Default Preference

minimum: 10
maximum: 100

Cisco Business Switches 350 Series CLI Guide

746

IPv6 First Hop Security

show ipv6 dhcp guard policy

show ipv6 dhcp guard policy

To display DHCPv6 guard policies on all ports configured with the DHCPv6 guard feature, use the show
ipv6 dhcp guard policy command in privileged EXEC mode.

Syntax

show ipv6 dhcp guard policy [policy-name | active]

Parameters

• policy-name—Displays the DHCPv6 guard policy with the given name.

• active—Displays the attached DHCPv6 guard policies.

Command Mode

Privileged EXEC mode

User Guidelines

This command displays the options configured for the policy on all ports configured with the DHCPv6 guard
feature.

Example 1—The following example displays the Policy Configuration for a policy named policy1:

switchxxxxxx# show ipv6 dhcp guard policy policy1
DHCPv6 Guard Policy: policy1

device-role: server
preference

minimum: 1
maximum: 200

server address prefix list: list1
reply prefix list name: list10
Attached to VLANs: 1-100,111-4094
Attached to ports:

Ports

gi1/0/1-2

gi1/0/3-4

Po1-4

VLANs

1-58,68-4094

1-4094

1-4094

Example 2—The following example displays the attached policies:

switchxxxxxx# show ipv6 dhcp guard policy active
Attached to VLAN:

Policy Name
policy2
vlan-default 1-199,301-4094

VLANs
200-300

Attached to ports:

Cisco Business Switches 350 Series CLI Guide

747

show ipv6 dhcp guard policy

IPv6 First Hop Security

Policy Name

policy1

port-default

Ports

gi1/0/1-2

gi1/0/1-2

gi1/0/3-4

VLANs

1-100

101-4094

1-1094

Example 3—The following example displays the user defined policies:

switchxxxxxx# show ipv6 dhcp guard policy
policy1
policy2

Cisco Business Switches 350 Series CLI Guide

748

IPv6 First Hop Security

show ipv6 first hop security

show ipv6 first hop security

To display all IPv6 First Hop Security global configuration, use the show ipv6 first hop security command
in Privilege EXEC configuration mode.

Syntax

show ipv6 first hop security

Command Mode

Privileged EXEC mode

User Guidelines

This command displays all IPv6 First Hop Security global configuration.

Example

The following example gives an example of the show ipv6 first hop security command:

switchxxxxxx# show ipv6 first hop security
IPv6 First Hop Security is enabled on VLANs:1-4,6,7,100-120
Logging Packet Drop: enabled

Cisco Business Switches 350 Series CLI Guide

749

show ipv6 first hop security active policies

IPv6 First Hop Security

show ipv6 first hop security active policies

To display information about the policies applied to the port and to the VLAN, use the show ipv6 first hop
security active policies command in privileged EXEC mode.

Syntax

show ipv6 first hop security active policies interface interface-id vlan vlan-id

Parameters

• interface interface-id—Port Identifier (Ethernet port or port channel).

• vlan vlan-id—VLAN Identifier.

Command Mode

Privileged EXEC mode

User Guidelines

This command displays policies applied to frames arriving on given port and belonging to the given VLAN.
The policies are calculated automatically by using the policies attached to the port, VLAN, and the global
configuration

Example

The following example displays the active attached policies on gi1/0/1 and VLAN 100:

switchxxxxxx# show ipv6 first hop security active policies interface gi1/0/1 vlan 100
IPv6 First Hop Security is enabled on VLANs:1-4,6,7,100-120
IPv6 DHCP Guard is enabled on VLANs:1-4
IPv6 ND Inspection is enabled on VLANs:1-4,6,7,100-120
IPv6 Neighbor Binding Integrity is enabled on VLANs:1-4,6,7,100-120
IPv6 RA Guard is enabled on VLANs:1-4,6,7,100-120
IPv6 Source Guard is enabled on VLANs:1-3,7,100-112
gi1/0/1, VLAN 100
IPv6 First Hop Security Policy:

logging packet drop: enabled (from global configuration)

DHCPv6 Guard Policy:

device-role: server (from policy1 attached to the port)
reply prefix list name: list10 (from policy2 attached to the VLAN)
server address prefix list name: list22 (from policy2 attached to the VLAN)
preference

minimum: 1 (from policy2 attached to the VLAN)
maximum: 200 (from policy2 attached to the VLAN)

ND Inspection Policy:

device-role: host (default)
drop-unsecure: enabled (from policy2 attached to the VLAN)
sec-level minimum: 3 (from policy1 attached to the port)
validate source-mac: enabled (from global configuration)

Neighbor Binding Policy: policy1

device-role: perimiter (default)
logging binding: enabled (from policy1 attached to the port)
address-prefix-validation: enabled (from policy2 attached to the VLAN)
address-config: any (default)
maximum entries

Cisco Business Switches 350 Series CLI Guide

750

IPv6 First Hop Security

show ipv6 first hop security active policies

VLAN: unlimited (from global configuration)
Port: 1 (from policy1 attached to the port)
MAC: 2 (from policy2 attached to the VLAN)

RA Guard Policy:

device-role: router (from policy1 attached to the port)
hop-limit:

minimum: 10 (from policy2 attached to the VLAN)
maximum: 20 (from global configuration)

manage-config-flag: on(from policy2 attached to the VLAN)
ra address verification:: disabled(default)
ra prefixes prefix list name: list1(from policy2 attached to the VLAN)
other-flag: disabled (default)
router-preference:

minimum: medium (from policy2 attached to the VLAN)
maximum: medium (from policy2 attached to the VLAN)

IPv6 Source Guard Policy:

trusted port: enabled (from policy1 attached to the port)

Cisco Business Switches 350 Series CLI Guide

751

show ipv6 first hop security attached policies

IPv6 First Hop Security

show ipv6 first hop security attached policies

To display information about the policies attached to the port and to the VLAN, use the show ipv6 first hop
security attached policies command in privileged EXEC mode.

Syntax

show ipv6 first hop security attached policies interface interface-id vlan vlan-id

Parameters

• interface interface-id—Port Identifier (Ethernet port or port channel).

• vlan vlan-id—VLAN Identifier.

Command Mode

Privileged EXEC mode

User Guidelines

This command displays policies of all IPv6 First Hop Security attached to a VLAN specified by the vlan-id
argument and displays all policies attached to a port and to VLAN specified by the interface-id and vlan-id
arguments.

Examples

The following example displays the attached policy on gi1/0/1 and VLAN 100:

switchxxxxxx# show ipv6 first hop security attached policies interface gi1/0/1 vlan 100
Attached to VLAN 100

RA Guard Policy: policy1
Neighbor Bind Policy: policy2

Attached to port gi1/0/1 and VLAN 100

IPv6 First Hop Security Policy: FHSpolicy
ND Inspection Policy: policy1
RA Guard Policy: policy3
Neighbor Bind Policy: policy3
IPv6 Source Guard Policy: policy4

Cisco Business Switches 350 Series CLI Guide

752

IPv6 First Hop Security

show ipv6 first hop security counters

show ipv6 first hop security counters

To display information about the packets counted by the port counter, use the show ipv6 first hop security
counters command in privileged EXEC mode.

Syntax

show ipv6 first hop security counters interface interface-id

Parameters

• interface interface-id—Displays counters for specified Ethernet port or port channel.

Command Mode

Privileged EXEC mode

User Guidelines

This command displays packets handled by the switch that are being counted in port counters. The switch
counts packets captured per port and records whether the packet was received, bridged, or dropped. If a packet
is dropped, the reason for the drop and the feature that caused the drop are both also provided.

Examples

The following examples displays information about packets counted on port gi1/0/1:

switchxxxxxx# show ipv6 first hop security counters interface gi1/0/1
Received messages on gi1/0/1:
Protocol message
RA[63] RS[0] NA[13] NS[0] REDIR[0]
ADV[0] REP[20] REC[0] REL-REP[0] LEAS-REP[10] RLS[0] DEC[0]

Protocol
NDP
DHCPv6

Dropped messages on gi1/0/1:

Protocol
NDP
DHCPv6

Protocol message
RA[2] RS[0] NA[0] NS[0] REDIR[0]
ADV[1] REP[2] REC[0] REL-REP[1] LEAS-REP[0] RLS[0] DEC[0]

Dropped reasons on gi1/0/1:

Feature
DHCP Guard
DHCP Guard
DHCP Guard
DHCP Guard
RA guard
RA guard
RA guard
RA guard
RA guard
RA guard
RA guard
ND Inspection
ND Inspection
ND Inspection
Source guard
NB Integrity
NB Integrity

Number Reason

2 Server message on client port
1 Unauthorized assigned address
1 Unauthorized server source address
0 Unauthorized server preference
1 Router message on host port
1 Unauthorized source address
0 Unauthorized advertise prefix
0 Unauthorized router preference
0 Unauthorized other config flag
0 Unauthorized managed config flag
0 Unauthorized cur hop limit
0 Invalid source MAC
0 Unsecure message
0 Unauthorized sec level
0 NoBinding
0 Illegal ICMPv6 message
0 Illegal DHCPv6 message

Cisco Business Switches 350 Series CLI Guide

753

show ipv6 first hop security error counters

IPv6 First Hop Security

show ipv6 first hop security error counters

To display global error counters, use the show ipv6 first hop security error counters command in privileged
EXEC mode.

Syntax

show ipv6 first hop security error counters

Command Mode

Privileged EXEC mode

User Guidelines

This command displays global error counters.

Example 1—The following examples displays global error counters:

switchxxxxxx# show ipv6 first hop security error counters
Neighbor Binding Table Overflow counter: 0
Neighbor Prefix Table Overflow counter: 0
TCAM Overflow counter: 0

Cisco Business Switches 350 Series CLI Guide

754

IPv6 First Hop Security

show ipv6 first hop security policy

show ipv6 first hop security policy

To display IPv6 First Hop Security policies on all ports configured with the IPv6 First Hop Security feature,
use the show ipv6 first hop security policy command in privileged EXEC mode.

Syntax

show ipv6 first hop security policy [policy-name | active]

Parameters

• policy-name—Displays the IPv6 First Hop policy with the given name.

• active—Displays the attached Ipv6 First Hop Security policies.

Command Mode

Privileged EXEC mode

User Guidelines

This command displays the options configured for the policy on all ports configured with the IPv6 First Hop
feature.

Example 1—The following example displays the Policy Configuration for a policy named policy1:

switchxxxxxx# show ipv6 first hop security policy policy1
IPv6D First Hop Security Policy: policy1

logging packet drop: enabled
Attached to VLANs: 1-100,111-4094
Attached to ports:

Ports

gi1/0/1-2

gi1/0/3-4

Po1-4

VLANs

1-58,68-4094

1-4094

1-4094

Example 2—The following example displays the attached policies:

switchxxxxxx# show ipv6 first hop security policy active
Attached to VLAN:

Policy Name
policy2
vlan-default 1-199,301-4094

VLANs
200-300

Attached to ports:

Policy Name

policy1

port-default

Ports

gi1/0/1-2

gi1/0/1-2

gi1/0/3-4

VLANs

1-100

101-4094

1-1094

Cisco Business Switches 350 Series CLI Guide

755

show ipv6 first hop security policy

IPv6 First Hop Security

Example 3—The following example displays the user defined policies:

switchxxxxxx# show ipv6 first hop security policy
policy1
policy2

Cisco Business Switches 350 Series CLI Guide

756

IPv6 First Hop Security

show ipv6 nd inspection

show ipv6 nd inspection

To display ND Inspection global configuration, use the show ipv6 nd inspection command in Privilege EXEC
configuration mode.

Syntax

show ipv6 nd inspection

Command Mode

Privileged EXEC mode

User Guidelines

This command displays ND Inspection global configuration.

Example

The following example gives an example of the show ipv6 nd snooping command output:

switchxxxxxx# show ipv6 nd snooping
IPv6 ND Inspection is enabled on VLANs:1-4,6,7,100-120
unsecure drop: enabled
sec-level minimum value: 2
source mac validation: disabled

Cisco Business Switches 350 Series CLI Guide

757

show ipv6 nd inspection policy

IPv6 First Hop Security

show ipv6 nd inspection policy

To display an IPv6 ND Inspection policy on all ports configured with the ND Inspection feature, use the show
ipv6 nd inspection policy command in privileged EXEC mode.

Syntax

show ipv6 nd inspection policy [policy-name | active]

Parameters

• policy-name—Displays the ND Inspection policy with the given name.

• active—Displays the attached ND Inspection policies.

Command Mode

Privileged EXEC mode

Examples

Example 1—The following example displays the policy configuration for a policy named policy1:

switchxxxxxx# show ipv6 nd inspection policy policy1
ND Inspection Policy: policy1

device-role: router
drop-unsecure: enabled
Attached to VLANs: 1-100,111-4094
Attached to ports:

Ports

gi1/0/1-2

gi1/0/3-4

Po1

VLANs

1-58,68-4094

1-4094

1-4094

Example 2—The following example displays the attached policies:

switchxxxxxx# show ipv6 nd inspection policy active
Attached to VLANs:

Policy Name
vlan-default 1-4094

VLANs

Attached to ports:

Policy Name

policy1

port-default

Ports

gi1/0/1-2

gi1/0/1-2

gi1/0/3-4

VLANs

1-100

101-4094

1-1094

Example 3—The following example displays the user defined policies:

Cisco Business Switches 350 Series CLI Guide

758

IPv6 First Hop Security

show ipv6 nd inspection policy

switchxxxxxx# show ipv6 nd inspection policy
policy1
policy2

Cisco Business Switches 350 Series CLI Guide

759

show ipv6 nd raguard

IPv6 First Hop Security

show ipv6 nd raguard

To display RA Guard global configuration, use the show ipv6 nd raguard command in Privilege EXEC
configuration mode.

Syntax

show ipv6 nd raguard

Command Mode

Privileged EXEC mode

Example

The following example gives an example of the show ipv6 nd raguard command output:

switchxxxxxx# show ipv6 nd raguard
IPv6 RA Guard is enabled on VLANs:1-4,6,7,100-120
"Managed address configuration" flag (M-flag:) off
"Other configuration" flag (O-flag): disabled
Hop Limit:

minimum: 10
maximum: 100

Default Router Preference:

minimum: 1
maximum: 1

Cisco Business Switches 350 Series CLI Guide

760

IPv6 First Hop Security

show ipv6 nd raguard policy

show ipv6 nd raguard policy

To display a router advertisements (RAs) guard policy on all ports configured with the RA guard feature, use
the show ipv6 nd raguard policy command in privileged EXEC mode.

Syntax

show ipv6 nd raguard policy [policy-name | active]

Parameters

• policy-name—Displays the RA guard policy with the given name.

• active—Displays the attached user defined RA guard policies.

Command Mode

Privileged EXEC mode

User Guidelines

This command displays the options configured for the policy on all ports configured with the RA guard feature.

Example 1—The following example displays the policy configuration for a policy named policy1:

switchxxxxxx# show ipv6 nd raguard policy raguard1
RA Guard Policy: policy1
device-role: router
router address prefix list name: list1
prefixes prefix list name: list2
Attached to VLANs: 1-100,111-4094
Attached to ports:

Ports

gi1/0/1-2

gi1/0/3-4

Po1-4

VLANs

1-58,68-4094

1-4094

1-4094

Example 2—The following example displays the attached policies:

switchxxxxxx# show ipv6 nd raguard policy active
Attached to VLANs:

Policy Name
vlan-default 1-4094

VLANs

Attached to ports:

Policy Name

port-default

Ports

gi1/0/1-4

VLANs

1-4094

Example 3—The following example displays the user defined policies:

Cisco Business Switches 350 Series CLI Guide

761

show ipv6 nd raguard policy

IPv6 First Hop Security

switchxxxxxx# show ipv6 nd raguard policy
policy1
policy2

Cisco Business Switches 350 Series CLI Guide

762

IPv6 First Hop Security

show ipv6 neighbor binding

show ipv6 neighbor binding

To display Neighbor Binding global configuration, use the show ipv6 neighbor binding command in Privilege
EXEC configuration mode.

Syntax

show ipv6 neighbor binding

Command Mode

Privileged EXEC mode

User Guidelines

This displays Neighbor Binding global configuration.

Example

The following example gives an example of the show ipv6 neighbor binding command output:

switchxxxxxx# show ipv6 neighbor binding
Neighbor Binding Integrity is enabled on VLANs:1-4,6-7,100-120
Binding logging: disabled
Binding lifetime: 56 minutes
Address Configuration method: dhcp
Binding address prefix validation: disabled
Maximum entries

VLAN: unlimited
Port: 1
MAC: 1

Cisco Business Switches 350 Series CLI Guide

763

show ipv6 neighbor binding policy

IPv6 First Hop Security

show ipv6 neighbor binding policy

To display Neighbor Binding policies, use the show ipv6 neighbor binding policy command in Privilege
EXEC configuration mode.

Syntax

show ipv6 neighbor binding policy [policy-name | active]

Parameters

• policy-name—Neighbor Binding policy name.

• active—Displays the attached Neighbor Binding policies.

Command Mode

Privileged EXEC mode

User Guidelines

This command either displays all policies or a specific one.

Examples

Example 1—The following example displays the policy configuration for a policy named policy1:

switchxxxxxx# show ipv6 neighbor binding policy policy1
Neighbor Binding Policy: policy1

address configuration method: dhcp
binding address prefix validation: disabled
device-role: perimiter
binding logging: disabled
max-entries

VLAN: unlimited
Port: 10
MAC: 2

Attached to VLANs: 1-100,111-4094
Attached to ports:

Ports

gi1/0/1-2

gi1/0/3-4

Po1-4

VLANs

1-58,68-4094

1-4094

1-4094

Example 2—The following example displays the attached policies:

switchxxxxxx# show ipv6 neighbor binding policy active
Attached to VLAN:

Policy Name
policy2
vlan-default

VLANs
200-300
1-199,301-4094

Attached to ports:

Cisco Business Switches 350 Series CLI Guide

764

IPv6 First Hop Security

show ipv6 neighbor binding policy

Policy Name

policy1

port-default

Ports

gi1/0/1-4

gi1/0/1-4

VLANs

1-100

101-4094

Example 3—The following example displays the user defined policies:

switchxxxxxx# show ipv6 neighbor binding policy
policy1
policy2

Cisco Business Switches 350 Series CLI Guide

765

show ipv6 neighbor binding prefix table

IPv6 First Hop Security

show ipv6 neighbor binding prefix table

To display contents of the Neighbor Prefix table, use the show ipv6 neighbor binding prefix table command
in Privilege EXEC configuration mode.

Syntax

show ipv6 neighbor binding prefix table [vlan vlan-id]

Parameters

• vlan vlan-id—Displays the prefixes that match the specified VLAN.

Command Mode

Privileged EXEC mode

User Guidelines

This command displays the Neighbor Prefix table. The display output can be limited to the specified VLAN.
If no VLAN is configured, all prefixes are displayed.

Example

The following example displays the learned prefixes:

switchxxxxxx# show ipv6 neighbor binding prefix table
Flags: A - the prefix can be used for autoconfig (stateless configuration)
Neighbor Prefix Table has 4 entries
VLAN Prefix

Remaining Lifetime

Flags

7 2004:1::/64
7 2006:1::/64
7 2008:1::/64
1027 2002:1::/64

Type
static
dynamic
static
dynamic

A

A

1230

230

Cisco Business Switches 350 Series CLI Guide

766

IPv6 First Hop Security

show ipv6 neighbor binding table

show ipv6 neighbor binding table

To display contents of the Binding table, use the show ipv6 neighbor binding table command in Privilege
EXEC configuration mode.

Syntax

show ipv6 neighbor binding table [vlan vlan-id] [interface interface-id] [ipv6 ipv6-address] [mac
mac-address]

Parameters

• vlan vlan-id—Displays the Binding table entries that match the specified VLAN.

• interface interface-id—Displays the Binding table entries that match the specified port (Ethernet port

or port channel).

• ipv6 ipv6-address—Displays the Binding table entries that match the specified IPv6 address.

• mac mac-address—Displays the Binding table entries that match the specified MAC address.

Command Mode

Privileged EXEC mode

User Guidelines

This displays the contents of the Binding table. The display output can be specified by the specified VLAN,
port, IPv6 address, or MAC address. If no keywords or arguments are entered, all Binding table contents are
displayed.

Any keyword and argument combinations are allowed.

Example

The following example displays the contents of the Binding table:

switchxxxxxx# show ipv6 neighbor binding table
Binding Table has 4 entries

VLAN

IPv6 address

Inter

MAC address

Origin

State

Expir

TCAM

-----

-----------

-------

--------------

100

100

100

200

2001:300::1

gi1/0/1

AABB.CC01.F500

2001:600::1

gi1/0/1

AABB.CC01.F501AABB.CC01.F100

2001:100::2

gi1/0/2

AABB.CC01.F160

2001:200::3

gi1/0/2

------

NDP
NDP
NDP
NDP

-----

Time

Ovrfl

VALID

------

-----

TENT

559

*

VALID

96

VALID

79

Field Descriptions:

• VLAN—VLAN the host belongs to.

• IPv6 address—IPv6 address of the host.

Cisco Business Switches 350 Series CLI Guide

767

show ipv6 neighbor binding table

IPv6 First Hop Security

• Inter—port the host is connected on.

• MAC address—MAC address of the host.

• Origin—Protocol that has added the IPv6 address:

• Static—The static IPv6 address manually defined by the ipv6 neighbor binding static command.

• NDP—The IPv6 address learnt from the NDP protocol messages.

• DHCP—The IPv6 address learnt from the DHCPv6 protocol messages.

• State—Entry’s state:

• TENT—The new host IPv6 address is under validation. Since its lifetime is less than 1sec its expiration

time is not displayed.

• VALID—The host IPv6 address was bound.

• Expir. Time—Left time in seconds until the entry will be removed, if it is not confirmed.

• TCAM Ovrflw—Entries marked by ’*’ have not been added to TCAM because TCAM overflow.

Cisco Business Switches 350 Series CLI Guide

768

IPv6 First Hop Security

show ipv6 source guard

show ipv6 source guard

To display IPv6 Source Guard global configuration, use the show ipv6 source guard command in Privilege
EXEC configuration mode.

Syntax

show ipv6 source guard

Parameters

N/A

Command Mode

Privileged EXEC mode

User Guidelines

This displays IPv6 Source Guard global configuration.

Example

The following example gives an example of the show ipv6 source guard command output:

switchxxxxxx# show ipv6 source guard
IPv6 Source Guard is enabled on VLANs:1-4,6,7,100-120

Cisco Business Switches 350 Series CLI Guide

769

show ipv6 source guard policy

IPv6 First Hop Security

show ipv6 source guard policy

To display IPv6 Source Guard policies, use the show ipv6 source guard policy command in Privilege EXEC
configuration mode.

Syntax

show ipv6 source guard policy [policy-name | active]

Parameters

• policy-name—IPv6 Source Guard policy name.

• active—Displays the attached IPv6 Source Guard policies.

Command Mode

Privileged EXEC mode

User Guidelines

This command displays all configured IPv6 Source Guard policies, the given one or all attached IPv6 Source
Guard policies.

Example 1—The following example displays the policy configuration for a policy named policy1:

switchxxxxxx# show ipv6 source guard policy policy1
Neighbor Binding Policy: policy1

trusted port: disabled
Attached to ports:

Ports
gi1/0/1-2
gi1/0/4
Po1-4

Example 2—The following example displays the attached policies:

switchxxxxxx# show ipv6 source guard policy active
Attached to VLAN:
Attached to ports:

Policy Name

policy1

port-default

Ports

gi1/0/1-2

gi1/0/1-2

gi1/0/3

Example 3—The following example displays the user defined policies:

switchxxxxxx# show ipv6 source guard policy
policy1
policy2

Cisco Business Switches 350 Series CLI Guide

770

IPv6 First Hop Security

trusted-port (IPv6 Source Guard)

trusted-port (IPv6 Source Guard)

To configure a port as trusted port within an IPv6 Source Guard policy, use the trusted-port command in
IPv6 Source Guard Policy Configuration mode. To return to the default, use the no form of this command.

Syntax

trusted-port

no trusted-port

Default Configuration

not trusted.

Command Mode

IPv6 Source Guard Policy Configuration mode

User Guidelines

IPv6 data messages bridged from trusted ports are not validated by IPv6 Source Guard.

Example

The following example defines a policy that defines a port as trusted:

switchxxxxxx(config)# ipv6 ipv6 source guard policy policy1
switchxxxxxx(config-ipv6-srcguard)# trusted-port
switchxxxxxx(config-ipv6-srcguard)# exit

Cisco Business Switches 350 Series CLI Guide

771

validate source-mac

IPv6 First Hop Security

validate source-mac

To enable checking the MAC addresses against the link-layer address within an IPv6 ND Inspection policy,
use the validate source-mac command in ND Inspection Policy Configuration mode. To return to the default,
use the no form of this command.

Syntax

validate source-mac [enable | disable]

no validate source-mac

Parameters

• enable—Enables validation of the MAC address against the link-layer address. If no keyword is

configured, this keyword is applied by default.

• disable—Disables validation of MAC address against the link-layer address.

Default Configuration

Policy attached to port or port channel: the value configured in the policy attached to the VLAN.

Policy attached to VLAN: global configuration.

Command Mode

ND inspection Policy Configuration mode

User Guidelines

If this command is part of a policy attached to a VLAN, it is applied to all the ports in the VLAN. If it is
defined in a policy attached to a port in the VLAN, this value overrides the value in the policy attached to the
VLAN.

Example

The following example enables the router to drop an NDP message whose link-layer address does not match
the MAC address:

switchxxxxxx(config)# ipv6 nd inspection policy policy1
switchxxxxxx(config-nd-inspection)# validate source-mac
switchxxxxxx(config-nd-inspection)# exit

Cisco Business Switches 350 Series CLI Guide

772

IPv6 IPM Router Commands

This chapter contains the following sections:

• ipv6 multicast-routing, on page 774
• ipv6 multicast-routing, on page 775
• show ipv6 mroute, on page 776
• show ipv6 multicast, on page 778

Cisco Business Switches 350 Series CLI Guide

773

ipv6 multicast-routing

IPv6 IPM Router Commands

ipv6 multicast-routing

To enable IPv6 Multicast routing on all IPv6-enabled interfaces of the router and to enable Multicast forwarding,
use the ipv6 multicast-routing command in global configuration mode. To stop Multicast routing and
forwarding, use the no form of this command.

Syntax

ipv6 multicast-routing mld-proxy

no ipv6 multicast-routing

Parameters

• mld-proxy—Enable Multicast routing using MLD Proxy.

Default Configuration

Multicast routing is not enabled.

Command Mode

Global Configuration mode

User Guidelines

Use the ipv6 multicast-routing command with parameter to specify the needed IPv6 Multicast Routing
Protocol.

To forward IPv6 Multicast packets on an interface, IPv6 Multicast forwarding must be enabled globally and
an IPMv6 Routing protocol must be enabled on the interface.

Example

The following example enables IPv6 Multicast routing using MLD Proxy:

switchxxxxxx(config)# ipv6 multicast-routing mld-proxy

Cisco Business Switches 350 Series CLI Guide

774

IPv6 IPM Router Commands

ipv6 multicast-routing

ipv6 multicast-routing

To enable IPv6 Multicast routing on all IPv6-enabled interfaces of the router and to enable Multicast forwarding,
use the ipv6 multicast-routing command in global configuration mode. To stop Multicast routing and
forwarding, use the no form of this command.

Syntax

ipv6 multicast-routing mld-proxy

no ipv6 multicast-routing

Parameters

• mld-proxy—Enable Multicast routing using MLD Proxy.

Default Configuration

Multicast routing is not enabled.

Command Mode

Global Configuration mode

User Guidelines

Use the ipv6 multicast-routing command with parameter to specify the needed IPv6 Multicast Routing
Protocol.

To forward IPv6 Multicast packets on an interface, IPv6 Multicast forwarding must be enabled globally and
an IPMv6 Routing protocol must be enabled on the interface.

Example

The following example enables IPv6 Multicast routing using MLD Proxy:

switchxxxxxx(config)# ipv6 multicast-routing mld-proxy

Cisco Business Switches 350 Series CLI Guide

775

show ipv6 mroute

IPv6 IPM Router Commands

show ipv6 mroute

To display the contents of the Multicast routing (mroute) table, use the show ipv6 mroute command in user
EXEC or privileged EXEC mode.

Syntax

show ipv6 mroute [group-address [source-address]] [summary]

Parameters

• group-address—Destination Multicast IPv6 address.

• source-address—Source IPv6 address.

• summary—Filters the output to display a one-line, abbreviated summary of each entry in the mroute

table.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

Use the show ip mroute command to display information about Mroute entries in the mroute table. The switch
populates the Multicast routing table by creating (S, G) entries from (*, G) entries. The asterisk (*) refers to
all source addresses, the “S” refers to a single source address, and the “G” is the destination Multicast group
address. In creating (S, G) entries, the switch uses the best path to that destination group found in the Unicast
routing table (that is, through Reverse Path Forwarding [RPF]).

Examples

Description of Significant fields in the examples below

Timers:Uptime/Expires—“Uptime” indicates per interface how long (in hours, minutes, and seconds) the
entry has been in the IPv6 Multicast routing table. “Expires” indicates per interface how long (in hours,
minutes, and seconds) until the entry will be removed from the IPv6 Multicast routing table.

(*, FF07::1) and (FF07::1/128, FF07::1)—Entry in the IPv6 Multicast routing table. The entry consists of
the IP address of the source router followed by the IP address of the Multicast group. An asterisk (*) in place
of the source router indicates all sources.

Entries in the first format are referred to as (*, G) or “star comma G” entries. Entries in the second format are
referred to as (S, G) or “S comma G” entries. (*, G) entries are used to build (S, G) entries.

Incoming interface: —Expected interface for a Multicast packet from the source. If the packet is not received
on this interface, it is discarded.

Outgoing Interface List (OIF):—Interfaces through which packets will be forwarded.

Example 1. The following is sample output from the show ipv6 mroute command with the summary
keyword:

Cisco Business Switches 350 Series CLI Guide

776

IPv6 IPM Router Commands

show ipv6 mroute

switchxxxxxx# show ip mroute summary
Timers: Uptime/Expires
IPv6 Multicast Routing Table
(2001:0DB8:999::99, FF07::5), 00:04:55/00:02:36, OIF count:1
(2001:0DB8:999::99, FF07::1), 00:02:46/00:00:12, OIF count:1

Example 2. The following is sample output from the show ipv6 mroute command:

switchxxxxxx# show ip mroute
Timers: Uptime/Expires
IPv6 Multicast Routing Table
(*, FF07::1), 00:04:45/00:02:47, RP 2001:0DB8:6::6

Incoming interface: vlan5
Outgoing interface list:

vlan40, 00:04:45/00:02:47

(2001:0DB8:999::99, FF07::1), 00:02:06/00:01:23

Incoming interface: vlan5
Outgoing interface list:

vlan40, 00:02:06/00:03:27

Cisco Business Switches 350 Series CLI Guide

777

show ipv6 multicast

IPv6 IPM Router Commands

show ipv6 multicast

To display general information about IPv6 Multicast configuration, use the show ipv6 multicast command
in user EXEC or privileged EXEC mode.

Syntax

show ipv6 multicast [interface [interface-id]]

Parameters

• interface—Displays IPv6 Multicast-related information about interfaces configured for IPv6 Multicast.

• interface-id—Interface identifier for which to display IPv6 Multicast information.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

Use the show ipv6 multicast command without the interface keyword to display general information about
the state of IPv6 Multicast on the router.

Use the show ipv6 multicast command with the interface keyword to display the IPv6 Multicast information
about the specified interface.

Example 1. The following is sample output from the show ipv6 multicast command without the
interface keyword when no IPv6 Multicast Routing protocol is enabled:

switchxxxxxx# show ipv6 multicast
IPv6 Unicast Forwarding: enabled
IPv6 Multicast Protocol: No

Example 2. The following is sample output from the show ipv6 multicast command without the
interface keyword when MLD Proxy is enabled:

switchxxxxxx# show ipv6 multicast
IPv6 Unicast Forwarding: enabled
IPv6 Multicast Protocol: MLD Proxy

Example 3. The following is sample output from the show ipv6 multicast command about the given
interface. MLD Proxy is enabled on the interface and the interface is an MLD Proxy Upstream
interface:

switchxxxxxx# show ipv6 multicast interface vlan 200
IPv6 Unicast Forwarding: enabled
IPv6 Multicast Protocol: MLD Proxy
vlan 200

IPv6 Status: enabled
hop-threshold: 0
MLD Protocol: MLDv2
MLD Proxy: Upstream

Cisco Business Switches 350 Series CLI Guide

778

IPv6 IPM Router Commands

show ipv6 multicast

Example 4. The following is sample output from the show ipv6 multicast command about the given
interface. MLD Proxy is enabled on the interface and the interface is an MLD Proxy Downlink
interface:

switchxxxxxx# show ipv6 multicast interface vlan 100
IPv6 Unicast Forwarding: enabled
IPv6 Multicast Protocol: PIM
vlan 200

IPv6 Status: enabled
hop-threshold: 0
MLD Protocol: MLDv2
MLD Proxy: DownStream (Upstream: vlan 200)

Example 5. The following is sample output from the show ipv6 multicast command about the given
interface. MLD Proxy is disabled on the interface:

switchxxxxxx# show ipv6 multicast interface vlan 100
IPv6 Unicast Forwarding: enabled
IPv6 Multicast Protocol: MLD Proxy
vlan 200

IPv6 Status: enabled
hop-threshold: 100
MLD Protocol: MLDv2
MLD Proxy: disabled

Cisco Business Switches 350 Series CLI Guide

779

show ipv6 multicast

IPv6 IPM Router Commands

Cisco Business Switches 350 Series CLI Guide

780

IPv6 Prefix List

This chapter contains the following sections:

• clear ipv6 prefix-list, on page 782
• ipv6 prefix-list, on page 783
• show ipv6 prefix-list, on page 787

Cisco Business Switches 350 Series CLI Guide

781

clear ipv6 prefix-list

IPv6 Prefix List

clear ipv6 prefix-list

Use the clear ipv6 prefix-list command in privileged EXEC mode to reset the hit count of the IPv6 prefix
list entries.

Syntax

clear ipv6 prefix-list [prefix-list-name [ipv6-prefix/prefix-length]]

Parameters

• prefix-list-name—The name of the prefix list from which the hit count is to be cleared.

• ipv6-prefix—The IPv6 network from which the hit count is to be cleared. This argument must be in the
form documented in RFC 4293 where the address is specified in hexadecimal using 16-bit values between
colons.

• prefix-length—The length of the IPv6 prefix. A decimal value that indicates how many of the high-order
contiguous bits of the address comprise the prefix (the network portion of the address). A slash mark
must precede the decimal value.

Default Configuration

The hit count is automatically cleared for all IPv6 prefix lists.

Command Mode

Privileged EXEC mode

User Guidelines

The hit count is a value indicating the number of matches to a specific prefix list entry.

Example

The following example clears the hit count from the prefix list entries for the prefix list named first_list that
match the network mask 2001:0DB8::/35:

switchxxxxxx# clear ipv6 prefix-list first_list 2001:0DB8::/35

Cisco Business Switches 350 Series CLI Guide

782

IPv6 Prefix List

ipv6 prefix-list

ipv6 prefix-list

Use the ipv6 prefix-list command in Global Configuration mode to create an entry in an IPv6 prefix list. To
delete the entry, use the no form of this command.

Syntax

ipv6 prefix-list list-name [seq number] {{deny|permit} ipv6-prefix/prefix-length [ge ge-length] [le le-length]}
| description text

no ipv6 prefix-list list-name [seq number]

Parameters

• list-name—Name of the prefix list. The name may contain up to 32 characters.

• seq seq-number—Sequence number of the prefix list entry being configured. This is an integer value

from 1 to 4294967294.

• deny—Denies networks that matches the condition.

• permit—Permits networks that matches the condition.

• ipv6-prefix—IPv6 network assigned to the specified prefix list. This argument must be in the form

documented in RFC 4293 where the address is specified in hexadecimal—using 16-bit values between
colons.

• prefix-length—Length of the IPv6 prefix. A decimal value that indicates how many of the high-order
contiguous bits of the address comprise the prefix (the network portion of the address). A slash mark
must precede the decimal value from 0 to 128. The zero prefix-length may be used only with the zero
ipv6-prefix (::).

• description text—Text that can be up to 80 characters in length.

• ge ge-value—Specifies a prefix length greater than or equal to the /prefix-length argument. It is the lowest

value of a range of the length (the “from” portion of the length range).

• le le-value—Specifies a prefix length less than or equal to the /prefix-length argument. It is the highest

value of a range of the length (the “to” portion of the length range).

Default Configuration

No prefix list is created.

Command Mode

Global Configuration mode

User Guidelines

This command without the seq keyword adds the new entry after the last entry of the prefix list with the
sequence number equals to the last number plus 5. For example, if the last configured sequence number is 43,
the new entry will have the sequence number of 48. If the list is empty, the first prefix-list entry is assigned
the number 5 and subsequent prefix list entries increment by 5.

Cisco Business Switches 350 Series CLI Guide

783

ipv6 prefix-list

IPv6 Prefix List

This command with the seq keyword puts the new entry into the place specified by the parameter, if an entry
with the number exists it is replaced by the new one.

This command without the seq keyword removes the prefix list.

The no version of this command with the seq keyword removes the specified entry.

The sequence number of a prefix list entry determines the order of the entries in the list. The router compares
network addresses to the prefix list entries. The router begins the comparison at the top of the prefix list, with
the entry having the lowest sequence number.

If multiple entries of a prefix list match a prefix, the entry with the lowest sequence number is considered the
real match. Once a match or deny occurs, the router does not go through the rest of the prefix list. For efficiency,
you might want to put the most common permits or denies near the top of the list, using the seq-number
argument.

IPv6 prefix lists are used to specify certain prefixes or a range of prefixes that must be matched before a permit
or deny statement can be applied. Two operand keywords can be used to designate a range of prefix lengths
to be matched. A prefix length of less than, or equal to, a value is configured with the le keyword. A prefix
length greater than, or equal to, a value is specified using the ge keyword. The ge and le keywords can be
used to specify the range of the prefix length to be matched in more detail than the usual
ipv6-prefix/prefix-length argument.

For a candidate prefix to match against a prefix list entry the following conditions must exist:

• The candidate prefix must match the specified prefix list and prefix length entry

• The value of the optional le keyword specifies the range of allowed prefix lengths from 0 up to the value

of the le-length argument, and including, this value.

The value of the optional ge keyword specifies the range of allowed prefix lengths from the value of the
ge-length argument up to, and including, 128.

Note that the first condition must match before the other conditions take effect.

An exact match is assumed when the ge or le keywords are not specified. If only one keyword operand is
specified then the condition for that keyword is applied, and the other condition is not applied. The prefix-length
value must be less than the ge value. The ge value must be less than, or equal to, the le value. The le value
must be less than or equal to 128.

Every IPv6 prefix list, including prefix lists that do not have permit and deny condition statements, has an
implicit deny any any statement as its last match condition.

Formal Specification

Checked prefix is cP and checked prefix length is cL.

Function PrefixIsEqual(P1, P2, L) compares the first L bits of two addresses P1 and P2 and returns TRUE
if they are equal.

Case 1. A prefix-list entry is:

• P - prefix address

• L - prefix length

• ge - is not defined

• le - is not defined

Cisco Business Switches 350 Series CLI Guide

784

IPv6 Prefix List

ipv6 prefix-list

The prefix cP/cL matches the prefix-list entry if PrefixIsEqual(cP,P,L) && cL == L

Case 2. An prefix-list entry is:

• P - prefix address

• L - prefix length

• ge - is defined

le - is not defined

The prefix cP/cL matches the prefix-list entry if PrefixIsEqual(cP,P,L) && cL >= ge

Case 3. An prefix-list entry is:

• P - prefix address

• L - prefix length

• ge - is not defined

le - is defined

The prefix cP/cL matches to the prefix-list entry if PrefixIsEqual(cP,P,L) && cL <= le

Case 4. An prefix-list entry is:

• P - prefix address

• L - prefix length

• ge - is defined

le - is defined

The prefix cP/cL matches the prefix-list entry if PrefixIsEqual(cP,P,L) && ge <= cL <= le

Example 1. The following example denies all routes with a prefix of ::/0:

switchxxxxxx(config)# ipv6 prefix-list abc deny ::/0

Example 2. The following example permits the prefix 2002::/16:

switchxxxxxx(config)# ipv6 prefix-list abc permit 2002::/16

Example 3. The following example shows how to specify a group of prefixes to accept any prefixes
from prefix 5F00::/48 up to and including prefix 5F00::/64:

switchxxxxxx(config)# ipv6 prefix-list abc permit 5F00::/48 le 64

Example 4. The following example denies prefix lengths greater than 64 bits in routes that have the
prefix 2001:0DB8::/64:

switchxxxxxx(config)# ipv6 prefix-list abc permit 2001:0DB8::/64 le 128

Example 5. The following example permits mask lengths from 32 to 64 bits in all address space:

switchxxxxxx(config)# ipv6 prefix-list abc permit ::/0 ge 32 le 64

Example 6. The following example denies mask lengths greater than 32 bits in all address space:

switchxxxxxx(config)# ipv6 prefix-list abc deny ::/0 ge 32

Example 7. The following example denies all routes with a prefix of 2002::/128:

Cisco Business Switches 350 Series CLI Guide

785

ipv6 prefix-list

IPv6 Prefix List

switchxxxxxx(config)# ipv6 prefix-list abc deny 2002::/128

Example 8. The following example permits all routes with a prefix of ::/0:

switchxxxxxx(config)# ipv6 prefix-list abc permit ::/0

Cisco Business Switches 350 Series CLI Guide

786

IPv6 Prefix List

show ipv6 prefix-list

show ipv6 prefix-list

Use the show ipv6 prefix-list command in user EXEC or privileged EXEC mode. to display information
about an IPv6 prefix list or IPv6 prefix list entries.

Syntax

show ipv6 prefix-list [detail [list-name] | summary [list-name]]

show ipv6 prefix-list list-name ipv6-prefix/prefix-length [longer | first-match]

show ipv6 prefix-list list-name seq seq-num

Parameters

• detail | summary—Displays detailed or summarized information about all IPv6 prefix lists.

• list-name—Name of a specific IPv6 prefix list.

• ipv6-prefix—All prefix list entries for the specified IPv6 network. This argument must be in the form
documented in RFC 4293 where the address is specified in hexadecimal using 16-bit values between
colons.

• prefix-length—Length of the IPv6 prefix. A decimal value that indicates how many of the high-order
contiguous bits of the address comprise the prefix (the network portion of the address). A slash mark
must precede the decimal value.

• longer—Displays all entries of an IPv6 prefix list that are more specific than the given

ipv6-prefix/prefix-length values.

• first-match—Displays the entry of an IPv6 prefix list that matches the given ipv6-prefix/prefix-length

values.

• seq seq-num—Sequence number of the IPv6 prefix list entry.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

If the detail and summary keywords are omitted, the detail option is applied.

If the longer and first-match keywords are omitted, all entries of the specified prefix list that matches the
given network/length are displayed.

Example 1. The following example shows the output of this command with the detail keyword:

switchxxxxxx# ipv6 prefix-list detail
ipv6 prefix-list 6to4:

count: 1, range entries: 0
seq 5 permit 2002::/16 (hit count: 313)

ipv6 prefix-list aggregate:

count: 3, range entries: 2

Cisco Business Switches 350 Series CLI Guide

787

show ipv6 prefix-list

IPv6 Prefix List

seq 5 deny 3FFE:C00::/24 ge 25 (hit count: 568)
seq 10 description The Default Action
seq 15 permit ::/0 le 48 (hit count: 31310)

Field Descriptions

• count—Number of entries in the list.

• range entries—Number of entries with matching range.

• seq—Entry number in the list.

• permit, deny—Granting status.

• description—Comment.

• hit count—Number of matches for the prefix entry.

Example 2. The following example shows the output of the show ipv6 prefix-list command

with the summary keyword:

switchxxxxxx# show ipv6 prefix-list summary
ipv6 prefix-list 6to4:

count: 1, range entries: 0

ipv6 prefix-list aggregate:

count: 2, range entries: 2

Example 3. The following example shows the output of the show ipv6 prefix-list command

with the seq keyword:

switchxxxxxx# show ipv6 prefix-list bgp-in seq 15

seq 15 deny ::/1 (hit count: 0)

Cisco Business Switches 350 Series CLI Guide

788

iSCI QoS Commands

This chapter contains the following sections:

• iscsi enable, on page 790
• iscsi flow, on page 791
• iscsi qos, on page 793
• show iscsi, on page 794

Cisco Business Switches 350 Series CLI Guide

789

iscsi enable

iscsi enable

iSCI QoS Commands

To enable applying the quality of service profile to Internet Small Computer System Interface (iSCSI) flows,
use the iscsi enable command in Global Configuration mode. To restore the default configuration, use the no
form of the command.

Syntax

iscsi enable

no iscsi enable

Parameters

This command has no arguments or keywords

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

Use the iscsi enable command to enable the iSCSI QoS.

If an ACL is bounded on an interface and a frame matches both to the iSCLI and the ACL rules then only the
iSCSI rules are applied to this frame.

Example

The following example enables iSCSI QoS globally:

switchxxxxxx(config)# iscsi enable

Cisco Business Switches 350 Series CLI Guide

790

iSCI QoS Commands

iscsi flow

iscsi flow

To define an iSCSI flow, use the iscsi flow command in Global Configuration mode. To remove the iSCSI
flow, use the no form of the command.

Syntax

iscsi flow default | {tcp-port [ip-address]}

no iscsi flow [default | {tcp-port [ip-address]}]

Parameters

• default—Restores the default IPv4 flows.

• tcp-port—Specifies the TCP port number on which iSCSI targets listen to requests. (Range: 1–65535)

• ip-address—Specifies the IPv4 address on which iSCSI targets listen to requests.

Default Configuration

Two iSCSI IPv4 flows with well-known TCP ports 3260 and 860.

Command Mode

Global Configuration mode

User Guidelines

Each iscsi flow command defines an iSCSI flow including the following two sub-flows:

• From initiator to target sub-flow—The sub-flow is classified by the Destination TCP port defined by the
tcp-port argument and by the configured Destination IP address, if the ip-address argument is configured.

• From target to initiator sub-flow—The sub-flow is classified by the Source TCP port defined by the

tcp-port argument and by the configured Source IP address, if the ip-address argument is configured.

Up to 8 iSCSI flows are supported.

Use the iscsi flow default command, to restore the iSCSI default configuration.

For the same TCP port you can use either the iscsi flow tcp-port command or a few iscsi flow tcp-port
ip-address commands with different IP addresses.

Use the no iscsi flow tcp-port ip-address command, to delete the iSCSI flows defined by the iscsi target port
tcp-port ip-address command.

Use the no iscsi flow tcp-port command, to delete the iSCSI flows defined by the iscsi flow tcp-port command.

To delete a default iSCSI flow, use the no iscsi flow tcp-port command.

To delete all default iSCSI flows, use the no iscsi flow default command.

To delete all iSCSI flows (including the default ones), use the no iscsi flow command.

Cisco Business Switches 350 Series CLI Guide

791

iscsi flow

iSCI QoS Commands

Example

The following example defines four pair of iSCSI flows:

switchxxxxxx(config)# no iscsi flow default
switchxxxxxx(config)# iscsi flow 1200
switchxxxxxx(config)# iscsi flow 1201 1.1.1.1
switchxxxxxx(config)# iscsi flow 1201 1.1.1.10
switchxxxxxx(config)# iscsi flow 1201 101.12.21.410

Cisco Business Switches 350 Series CLI Guide

792

iSCI QoS Commands

iscsi qos

iscsi qos

To define the quality of service profile applying to iSCSI flows, use the iscsi qos command in Global
Configuration mode. To restore the default configuration, use the no form of the command.

Syntax

iscsi qos {[vpt vpt] [dscp dscp] [queue queue]}

no iscsi qos

Parameters

• vpt vpt—Specifies a value of the VLAN Priority Tag (VPT) that iSCSI tagged frames are assigned

(Range: 0–7).

• dscp dscp—Specifies the Differentiated Services Code Point (DSCP) that iSCSI frames are assigned.

(Range: 0–63).

• queue queue—Specify the outgoing queue that iSCSI frames are sent (Range: 1–8).

Default Configuration

• VPT is not changed.

• DSCP is not changed.

• Queue—7

Command Mode

Global Configuration mode

User Guidelines

Use the iscsi qos command, to change the default quality of service profile applying to iSCSI flows.

Note. At least one parameter is mandatory

Example

The following example configures the default quality of service profile applying to iSCSI flows:

switchxxxxxx(config)# iscsi qos vpt 6 queue 8

Cisco Business Switches 350 Series CLI Guide

793

show iscsi

show iscsi

To display the iSCSI configuration, use the show iscsi command in User EXEC mode.

iSCI QoS Commands

Syntax

show iscsi

Parameters

This command has no arguments or keywords

Default Configuration

This command has no default settings.

Command Mode

User EXEC mode

Example

This example shows how to display the iSCSI configuration:

switchxxxxxx> show iscsi
iSCSI is enabled
iSCSI vpt is not changed
iSCSI DSCP is 18
iSCSI Queue is 7 (default)
iSCSI Flows:

TCP
Port

Target IP
Address

--------- ---------------

860
3260
9876
20002
20002
25555

0.0.0.0
0.0.0.0
0.0.0.0
192.111.220.110
192.1.3.230
0.0.0.0

default
default

Cisco Business Switches 350 Series CLI Guide

794

IPv6 Tunnel Commands

This chapter contains the following sections:

• interface tunnel, on page 796
• tunnel destination, on page 797
• tunnel isatap solicitation-interval, on page 798
• tunnel isatap robustness, on page 799
• show ipv6 tunnel, on page 800

Cisco Business Switches 350 Series CLI Guide

795

interface tunnel

interface tunnel

IPv6 Tunnel Commands

To enter into the Interface Configuration (Tunnel) mode, use the interface tunnel command in Global
Configuration mode.

Syntax

interface tunnel number

Parameters

• number—Specifies the tunnel number.

Command Mode

Global Configuration mode

Example

The following example enters the Interface Configuration (Tunnel) mode.

switchxxxxxx(config)# interface tunnel 1
switchxxxxxx(config-if)# tunnel source auto
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

796

IPv6 Tunnel Commands

tunnel destination

tunnel destination

To specify the destination IPv4 address for the manual tunnel interface, use the tunnel destination command
in Interface (Tunnel) Configuration mode. To remove the destination IPv4 address, use the no form of this
command.

Syntax

tunnel destination {host-name | ip-address}

no tunnel destination

Parameters

• host-name—DNS name of the remote host.

• ip-address—IPv4 address of the remote host.

Default Configuration

No tunnel interface destination is specified.

Command Mode

Interface (Tunnel) Configuration mode

User Guidelines

You cannot configure two tunnels to use the same encapsulation mode with exactly the same source and
destination address.

Example

The following example shows how to configure the tunnel destination address for Manual IPv6 tunnel:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ip address 10.0.0.1 255.255.255.0
switchxxxxxx(config-if)# exit
switchxxxxxx(config)# interface tunnel1
switchxxxxxx(config-if)# ipv6 address 3ffe:b00:c18:1::3/127
switchxxxxxx(config-if)# tunnel source vlan1
switchxxxxxx(config-if)# tunnel destination 192.168.30.1
switchxxxxxx(config-if)# tunnel mode ipv6ip
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

797

tunnel isatap solicitation-interval

IPv6 Tunnel Commands

tunnel isatap solicitation-interval

To set the time interval between unsolicited router solicitation messages, use the tunnel isatap
solicitation-interval command in Global Configuration mode. To restore the default configuration, use the
no form of this command.

Syntax

tunnel isatap solicitation-interval seconds

no tunnel isatap solicitation-interval

Parameters

• seconds—Specifies the time interval in seconds between ISATAP router solicitation messages. (Range:

10–3600).

Default Configuration

The default time interval between ISATAP router solicitation messages is 10 seconds.

Command Mode

Global Configuration mode

User Guidelines

This command determines the interval between unsolicited router solicitation messages sent to discovery an
ISATAP router.

Example

The following example sets the time interval between ISATAP router solicitation messages to 30 seconds.

switchxxxxxx(config)# tunnel isatap solicitation-interval 30

Cisco Business Switches 350 Series CLI Guide

798

IPv6 Tunnel Commands

tunnel isatap robustness

tunnel isatap robustness

To configure the number of router solicitation refresh messages that the device sends, use the tunnel isatap
robustness command in Global Configuration mode. To restore the default configuration, use the no form
of this command.

Syntax

tunnel isatap robustness number

no tunnel isatap robustness

Parameters

• number—Specifies the number router solicitation refresh messages that the device sends. (Range: 1–20).

Default Configuration

The default number of router solicitation refresh messages that the device sends is 3.

Command Mode

Global Configuration mode

User Guidelines

The router solicitation interval (when there is an active ISATAP router) is the minimum-router-lifetime that
is received from the ISATAP router, divided by (Robustness + 1).

Example

The following example sets the number of router solicitation refresh messages that the device sends to 5.

switchxxxxxx(config)# tunnel isatap robustness 5

Cisco Business Switches 350 Series CLI Guide

799

show ipv6 tunnel

IPv6 Tunnel Commands

show ipv6 tunnel

To display information on IPv6 tunnels, use the show ipv6 tunnel command in User EXEC mode.

Syntax

show ipv6 tunnel [all]

Parameters

• all—(Optional) The switch displays all parameters of the tunnel. If the keyword is not configured only

the tunnel parameters corresponding to its type are displayed.

Command Mode

User EXEC mode

Example 1. The following example displays information on the ISATAP tunnel, when the all keyword
is not configured:

switchxxxxxx# show ipv6 tunnel
Tunnel 1

Tunnel type
Tunnel status
Tunnel Local address type
Tunnel Local Ipv4 address
Tunnel Remote Ipv4 address

Tunnel 2

Tunnel type
Tunnel status
Tunnel Local address type
Tunnel Local Ipv4 address
Router DNS name
Router IPv4 addresses

: Manual
: UP
: VLAN 100
: 192.1.3.4
: 192.3.4.5

: ISATAP
: UP
: auto
: 192.1.3.4
: ISATAP

1.1.1.1
100.1.1.1
14.1.100.1

Detected
Detected
Not Detected

Router Solicitation interval

: 10 seconds

Robustness : 2

Tunnel 3

Tunnel type
Tunnel status
Tunnel Local address type
Tunnel Local Ipv4 address

: 6to4
: UP
: auto
: 192.1.3.4

Example 2. The following example displays information when the all keyword is configured:

switchxxxxxx# show ipv6 tunnel all
Tunnel 1

Tunnel type
Tunnel status
Tunnel Local address type
Tunnel Local Ipv4 address
Manual parameters

: Manual
: UP
: VLAN 100
: 192.1.3.4

Tunnel Remote Ipv4 address

: 192.3.4.5

ISATAP Parameters
Router DNS name

: ISATAP

Cisco Business Switches 350 Series CLI Guide

800

IPv6 Tunnel Commands

show ipv6 tunnel

Router Solicitation interval

: 10 seconds

Robustness : 2

Tunnel 2

Tunnel type
Tunnel status
Tunnel Local address type
Manual parameters

: Manual
: DOWN
: auto

Tunnel Remote Ipv4 address

: 0.0.0.0

ISATAP Parameters

Tunnel Local Ipv4 address
Router DNS name
Router Solicitation interval

: 0.0.0.0
: ISATAP
: 10 seconds

Robustness : 2

Tunnel 3

Tunnel type
Tunnel status
Tunnel Local address type
Manual parameters

: ISATAP
: UP
: auto

Tunnel Remote Ipv4 address

: 0.0.0.0

ISATAP Parameters

Tunnel Local Ipv4 address
Router DNS name
Router IPv4 addresses

: 192.1.3.4
: ISATAP

1.1.1.1
100.1.1.1
14.1.100.1

Detected
Detected
Not Detected

Router Solicitation interval

: 10 seconds

Robustness : 2

Cisco Business Switches 350 Series CLI Guide

801

show ipv6 tunnel

IPv6 Tunnel Commands

Cisco Business Switches 350 Series CLI Guide

802

Line Commands

This chapter contains the following sections:

• autobaud, on page 804
• exec-timeout, on page 805
• line, on page 806
• speed, on page 807
• show line, on page 808

Cisco Business Switches 350 Series CLI Guide

803

autobaud

autobaud

Line Commands

To configure the line for automatic baud rate detection (autobaud), use the autobaud command in Line
Configuration mode.

Use the no form of this command to disable automatic baud rate detection.

Syntax

autobaud

no autobaud

Parameters

This command has no arguments or keywords.

Default Configuration

Automatic baud rate detection is enabled.

Command Mode

Line Configuration Mode

User Guidelines

When this command is enabled, it is activated as follows: connect the console to the device and press the
Enter key twice. The device detects the baud rate automatically.

Note that if characters other than Enter are typed, wrong speed might be detected.

Example

The following example enables autobaud.

switchxxxxxx(config)# line console
switchxxxxxx(config-line)# autobaud

Cisco Business Switches 350 Series CLI Guide

804

Line Commands

exec-timeout

exec-timeout

To set the session idle time interval, during which the system waits for user input before automatic logoff,
use the exec-timeout Line Configuration mode command. To restore the default configuration, use the no
form of this command.

Syntax

exec-timeout minutes [seconds]

no exec-timeout

Parameters

• minutes—Specifies the number of minutes. (Range: 0-65535)

• seconds—(Optional) Specifies the number of seconds. (Range: 0-59)

Default Configuration

The default idle time interval is 10 minutes.

Command Mode

Line Configuration Mode

Example

The following example sets the telnet session idle time interval before automatic logoff to 20 minutes and 10
seconds.

switchxxxxxx(config)# line telnet
switchxxxxxx(config-line)# exec-timeout 20 10

Cisco Business Switches 350 Series CLI Guide

805

line

line

Line Commands

To identify a specific line for configuration and enter the Line Configuration command mode, use the line
Global Configuration mode command.

Syntax

line {console | telnet | ssh}

Parameters

• console—Enters the terminal line mode.

• telnet—Configures the device as a virtual terminal for remote access (Telnet).

• ssh—Configures the device as a virtual terminal for secured remote access (SSH).

Command Mode

Global Configuration mode

Example

The following example configures the device as a virtual terminal for remote (Telnet) access.

switchxxxxxx(config)# line telnet
switchxxxxxx(config-line)#

Cisco Business Switches 350 Series CLI Guide

806

Line Commands

speed

speed

To set the line baud rate, use the speed command in Line Configuration mode.

To restore the default configuration, use the no form of this command.

Syntax

speed bps

no speed

Parameters

bps—Specifies the baud rate in bits per second (bps). Possible values are 9600, 19200, 38400, 57600, and
115200.

Default Configuration

The default speed is 115200 bps.

Command Mode

Line Configuration Mode

User Guidelines

The configured speed is only applied when autobaud is disabled. This configuration applies to the current
session only.

Example

The following example configures the line baud rate as 9600 bits per second.

switchxxxxxx(config-line)# speed 9600

Cisco Business Switches 350 Series CLI Guide

807

show line

show line

Line Commands

To display line parameters, use the show line Privileged EXEC mode command.

Syntax

show line [console | telnet | ssh]

Parameters

• console—(Optional) Displays the console configuration.

• telnet—(Optional) Displays the Telnet configuration.

• ssh—(Optional) Displays the SSH configuration.

Default Configuration

If the line is not specified, all line configuration parameters are displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays the line configuration.

switchxxxxxx# show line
Console configuration:
Interactive timeout: Disabled
History: 10
Baudrate: 9600
Databits: 8
Parity: none
Stopbits: 1
Telnet configuration:
Telnet is enabled.
Interactive timeout: 10 minutes 10 seconds
History: 10
SSH configuration:
SSH is enabled.
Interactive timeout: 10 minutes 10 seconds
History: 10

Cisco Business Switches 350 Series CLI Guide

808

LACP Commands

This chapter contains the following sections:

• lacp port-priority, on page 810
• lacp system-priority, on page 811
• lacp timeout, on page 812
• show lacp, on page 813
• show lacp port-channel, on page 815

Cisco Business Switches 350 Series CLI Guide

809

lacp port-priority

LACP Commands

lacp port-priority

To set the physical port priority, use the lacp port-priority Interface (Ethernet) Configuration mode command.
To restore the default configuration, use the no form of this command.

Syntax

lacp port-priority value

no lacp port-priority

Parameters

value—Specifies the port priority. (Range: 1–65535)

Default Configuration

The default port priority is 1.

Command Mode

Interface (Ethernet) Configuration mode

Example

The following example sets the priority of gi1/0/6.

switchxxxxxx(config)# interface gi1/0/6
switchxxxxxx(config-if)# lacp port-priority 247

Cisco Business Switches 350 Series CLI Guide

810

LACP Commands

lacp system-priority

lacp system-priority

To set the system priority, use the lacp system-priority Global Configuration mode command. To restore
the default configuration, use the no form of this command.

Syntax

lacp system-priority value

no lacp system-priority

Parameters

value—Specifies the system priority value. (Range: 1–65535)

Default Configuration

The default system priority is 1.

Command Mode

Global Configuration mode

Example

The following example sets the system priority to 120.

switchxxxxxx(config)# lacp system-priority 120

Cisco Business Switches 350 Series CLI Guide

811

lacp timeout

lacp timeout

LACP Commands

To assign an administrative LACP timeout to an interface, use the lacp timeout Interface (Ethernet)
Configuration mode command. To restore the default configuration, use the no form of this command.

Syntax

lacp timeout {long | short}

no lacp timeout

Parameters

• long—Specifies the long timeout value.

• short—Specifies the short timeout value.

Default Configuration

The default port timeout value is Long.

Command Mode

Interface (Ethernet) Configuration mode

Example

The following example assigns a long administrative LACP timeout to gi1/0/6.

switchxxxxxx(config)# interface gi1/0/6
switchxxxxxx(config-if)# lacp timeout long

Cisco Business Switches 350 Series CLI Guide

812

LACP Commands

show lacp

show lacp

To display LACP information for all Ethernet ports or for a specific Ethernet port, use the show lacp Privileged
EXEC mode command.

Syntax

show lacp interface-id [parameters | statistics | protocol-state]

Parameters

• interface-id—Specify an interface ID. The interface ID must be an Ethernet port

• parameters—(Optional) Displays parameters only.

• statistics—(Optional) Displays statistics only.

• protocol-state—(Optional) Displays protocol state only.

Command Mode

Privileged EXEC mode

Example

The following example displays LACP information for gi1/0/1.

switchxxxxxx# show lacp ethernet gi1/0/1

Port gi1/0/1 LACP parameters:

Actor

system priority:
system mac addr:
port Admin key:
port Oper key:
port Oper number:
port Admin priority:
port Oper priority:
port Admin timeout:
port Oper timeout:
LACP Activity:
Aggregation:
synchronization:
collecting:
distributing:
expired:

1
00:00:12:34:56:78
30
30
21
1
1
LONG
LONG
ACTIVE
AGGREGATABLE
FALSE
FALSE
FALSE
FALSE

Partner

Cisco Business Switches 350 Series CLI Guide

813

show lacp

LACP Commands

system priority:
system mac addr:
port Admin key:
port Oper key:
port Oper number:
port Admin priority:
port Oper priority:
port Admin timeout:
port Oper timeout:
LACP Activity:
Aggregation:
synchronization:
collecting:
distributing:
expired:

0
00:00:00:00:00:00
0
0
0
0
0
LONG
LONG
PASSIVE
AGGREGATABLE
FALSE
FALSE
FALSE
FALSE

Port gi1/0/1 LACP Statistics:
LACP PDUs sent:
LACP PDUs received:

2
2

Port gi1/0/1 LACP Protocol State:

LACP State Machines:

Receive FSM:
Mux FSM:

Port Disabled State
Detached State

Control Variables:

BEGIN:
LACP_Enabled:
Ready_N:
Selected:
Port_moved:
NNT:
Port_enabled:

Timer counters:

FALSE
TRUE
FALSE
UNSELECTED
FALSE
FALSE
FALSE

periodic tx timer:
current while timer:
wait while timer:

0
0
0

Cisco Business Switches 350 Series CLI Guide

814

LACP Commands

show lacp port-channel

show lacp port-channel

To display LACP information for a port-channel, use the show lacp port-channel Privileged EXEC mode
command.

Syntax

show lacp port-channel [port_channel_number]

Parameters

port_channel_number—(Optional) Specifies the port-channel number.

Command Mode

Privileged EXEC mode

Example

The following example displays LACP information about port-channel 1.

switchxxxxxx# show lacp port-channel 1

Port-Channel 1:Port Type 1000 Ethernet

Actor

Partner

System Priority:
MAC Address:
Admin Key:
Oper Key:

1
000285:0E1C00
29
29

System Priority:
MAC Address:
Oper Key:

0
00:00:00:00:00:00
14

Cisco Business Switches 350 Series CLI Guide

815

show lacp port-channel

LACP Commands

Cisco Business Switches 350 Series CLI Guide

816

LLDP Commands

This chapter contains the following sections:

• clear lldp statistics, on page 818
• clear lldp table , on page 819
• lldp chassis-id, on page 820
• lldp hold-multiplier, on page 821
• lldp lldpdu , on page 822
• lldp management-address, on page 823
• lldp med, on page 824
• lldp med notifications topology-change, on page 825
• lldp med fast-start repeat-count, on page 826
• lldp med location, on page 827
• lldp med network-policy (global), on page 828
• lldp med network-policy (interface), on page 830
• lldp med network-policy voice auto, on page 831
• lldp notifications, on page 832
• lldp notifications interval, on page 833
• lldp optional-tlv, on page 834
• lldp optional-tlv 802.1, on page 835
• lldp run , on page 836
• lldp receive , on page 837
• lldp reinit , on page 838
• lldp timer, on page 839
• lldp transmit , on page 840
• lldp tx-delay, on page 841
• show lldp configuration, on page 842
• show lldp local, on page 844
• show lldp local tlvs-overloading, on page 846
• show lldp med configuration, on page 847
• show lldp neighbors, on page 848
• show lldp statistics, on page 852

Cisco Business Switches 350 Series CLI Guide

817

clear lldp statistics

LLDP Commands

clear lldp statistics

Use the clear lldp statistics command in Privileged EXEC mode to clear LLDP statistics on device.

Syntax

clear lldp statistics [global | interface-id]

Parameters

• global—(Optional) clears only the global LLDP table statistics.

• interface-id—(Optional) Clears the counters only for specified port ID

Default Configuration

Clears all LLDP statistics - global statistics and all interface counters.

Command Mode

Privileged EXEC mode

User Guidelines

Use the command clear lldp statistics without parameters to clear all LLDP statistics on device. This clears
both global LLDP table statistics and all the interface counters.

Use the clear lldp statistics global to clear only the global LLDP table statistics.

Use the clear lldp statistics interface-id command to clear the counters of the given interface.

Examples

The following example clears lldp counter from interface gi1/0/1

switchxxxxxx# clear lldp statistics gi1/0/1

Cisco Business Switches 350 Series CLI Guide

818

LLDP Commands

clear lldp table

clear lldp table

To clear the neighbors table for all ports or for a specific port, use the clear lldp table command in Privileged
EXEC mode.

Syntax

clear lldp table [interface-id]

Parameters

interface-id—(Optional) Specifies a port ID.

Default Configuration

If no interface is specified, the default is to clear the LLDP table for all ports.

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# clear lldp table gi1/0/1

Cisco Business Switches 350 Series CLI Guide

819

lldp chassis-id

lldp chassis-id

LLDP Commands

To configure the source of the chassis ID of the port, use the lldp chassis-id Global Configuration mode
command. To restore the chassis ID source to default, use the no form of this command.

Syntax

lldp chassis-id {mac-address | host-name}

no lldp chassis-id

Parameters

• mac-address—Specifies the chassis ID to use the device MAC address.

• host-name—Specifies the chassis ID to use the device configured host name.

Default Configuration

MAC address.

Command Mode

Global Configuration mode

User Guidelines

The host name should be configured to be a unique value.

If the chassis ID configured to be used in LLDP packets is empty, LLDP uses the default chassis ID (specified
above).

Example

The following example configures the chassis ID to be the MAC address.

switchxxxxxx(config)# lldp chassis-id mac-address

Cisco Business Switches 350 Series CLI Guide

820

LLDP Commands

lldp hold-multiplier

lldp hold-multiplier

To specify how long the receiving device holds a LLDP packet before discarding it, use the lldp hold-multiplier
Global Configuration mode command. To restore the default configuration, use the no form of this command.

Syntax

lldp hold-multiplier number

no lldp hold-multiplier

Parameters

hold-multiplier number—Specifies the LLDP packet hold time interval as a multiple of the LLDP timer
value (range: 2-10).

Default Configuration

The default LLDP hold multiplier is 4.

Command Mode

Global Configuration mode

User Guidelines

The actual Time-To-Live (TTL) value of LLDP frames is calculated by the following formula:

TTL = min(65535, LLDP-Timer * LLDP-hold-multiplier)

For example, if the value of the LLDP timer is 30 seconds, and the value of the LLDP hold multiplier is 4,
then the value 120 is encoded in the TTL field of the LLDP header.

Example

The following example sets the LLDP packet hold time interval to 90 seconds.

switchxxxxxx(config)# lldp timer 30
switchxxxxxx(config)# lldp hold-multiplier 3

Cisco Business Switches 350 Series CLI Guide

821

lldp lldpdu

lldp lldpdu

LLDP Commands

To define LLDP packet handling when LLDP is globally disabled, use the lldp lldpdu Global Configuration
mode command. To restore the default configuration, use the no form of this command.

Syntax

lldp lldpdu {filtering | flooding}

no lldp lldpdu

Parameters

• filtering—Specifies that when LLDP is globally disabled, LLDP packets are filtered (deleted).

• flooding—Specifies that when LLDP is globally disabled, LLDP packets are flooded (forwarded to all

interfaces).

Default Configuration

LLDP packets are filtered when LLDP is globally disabled.

Command Mode

Global Configuration mode

User Guidelines

If the STP mode is MSTP, the LLDP packet handling mode cannot be set to flooding and vice versa.

If LLDP is globally disabled, and the LLDP packet handling mode is flooding, LLDP packets are treated as
data packets with the following exceptions:

• VLAN ingress rules are not applied to LLDP packets. The LLDP packets are trapped on all ports for

which the STP state is Forwarding.

• Default deny-all rules are not applied to LLDP packets.

• VLAN egress rules are not applied to LLDP packets. The LLDP packets are flooded to all ports for which

the STP state is Forwarding.

• LLDP packets are sent as untagged.

Example

The following example sets the LLDP packet handling mode to Flooding when LLDP is globally disabled.

switchxxxxxx(config)# lldp lldpdu flooding

Cisco Business Switches 350 Series CLI Guide

822

LLDP Commands

lldp management-address

lldp management-address

To specify the management address advertised by an interface, use the lldp management-address Interface
(Ethernet) Configuration mode command. To stop advertising management address information, use the no
form of this command.

Syntax

lldp management-address {ip-address | none | automatic [interface-id]}

no lldp management-address

Parameters

• ip-address—Specifies the static management address to advertise.

• none—Specifies that no address is advertised.

• automatic—Specifies that the software automatically selects a management address to advertise from
all the IP addresses of the product. In case of multiple IP addresses, the software selects the lowest IP
address among the dynamic IP addresses. If there are no dynamic addresses, the software selects the
lowest IP address among the static IP addresses.

• automatic interface-id—Specifies that the software automatically selects a management address to

advertise from the IP addresses that are configured on the interface ID. In case of multiple IP addresses,
the software selects the lowest IP address among the dynamic IP addresses of the interface. If there are
no dynamic addresses, the software selects the lowest IP address among the static IP addresses of the
interface. The interface ID can be one of the following types: Ethernet port, port-channel or VLAN. Note
that if the port or port- channel are members in a VLAN that has an IP address, that address is not included
because the address is associated with the VLAN.

Default Configuration

No IP address is advertised.

The default advertisement is automatic.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

Each port can advertise one IP address.

Example

The following example sets the LLDP management address advertisement mode to automatic on gi1/0/2.

switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# lldp management-address automatic

Cisco Business Switches 350 Series CLI Guide

823

lldp med

lldp med

LLDP Commands

To enable or disable LLDP Media Endpoint Discovery (MED) on a port, use the lldp med Interface (Ethernet)
Configuration mode command. To return to the default state, use the no form of this command.

Syntax

lldp med {enable [tlv … tlv4] | disable}

no lldp med

Parameters

• enable—Enable LLDP MED

• tlv—Specifies the TLV that should be included. Available TLVs are: Network-Policy, Location, and

POE-PSE, Inventory. The Capabilities TLV is always included if LLDP-MED is enabled.

• disable—Disable LLDP MED on the port

Default Configuration

Enabled with network-policy TLV

Command Mode

Interface (Ethernet) Configuration mode

Example

The following example enables LLDP MED with the location TLV on gi1/0/3.

switchxxxxxx(config)# interface gi1/0/3
switchxxxxxx(config-if)# lldp med enable location

Cisco Business Switches 350 Series CLI Guide

824

LLDP Commands

lldp med notifications topology-change

lldp med notifications topology-change

To enable sending LLDP MED topology change notifications on a port, use the lldp med notifications
topology-change Interface (Ethernet) Configuration mode command. To restore the default configuration,
use the no form of this command.

Syntax

lldp med notifications topology-change {enable | disable}

no lldp med notifications topology-change

Parameters

• enable—Enables sending LLDP MED topology change notifications.

• disable—Disables sending LLDP MED topology change notifications.

Default Configuration

Disable is the default.

Command Mode

Interface (Ethernet) Configuration mode

Example

The following example enables sending LLDP MED topology change notifications on gi1/0/2.

switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# lldp med notifications topology-change enable

Cisco Business Switches 350 Series CLI Guide

825

lldp med fast-start repeat-count

LLDP Commands

lldp med fast-start repeat-count

When a port comes up, LLDP can send packets more quickly than usual using its fast-start mechanism.

To configure the number of packets that is sent during the activation of the fast start mechanism, use the lldp
med fast-start repeat-count Global Configuration mode command. To return to default, use the no form of
this command.

Syntax

lldp med fast-start repeat-count number

no lldp med fast-start repeat-count

Parameters

repeat-count number—Specifies the number of times the fast start LLDPDU is being sent during the activation
of the fast start mechanism. The range is 1-10.

Default Configuration

3

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# lldp med fast-start repeat-count 4

Cisco Business Switches 350 Series CLI Guide

826

LLDP Commands

lldp med location

lldp med location

To configure the location information for the LLDP Media Endpoint Discovery (MED) for a port, use the
lldp med location Interface (Ethernet) Configuration mode command. To delete location information for a
port, use the no form of this command.

Syntax

lldp med location {{coordinate data} | {civic-address data} | {ecs-elin data}}

no lldp med location {coordinate | civic-address | ecs-elin}

Parameters

• coordinate data—Specifies the location data as coordinates in hexadecimal format.

• civic-address data—Specifies the location data as a civic address in hexadecimal format.

• ecs-elin data—Specifies the location data as an Emergency Call Service Emergency Location Identification

Number (ECS ELIN) in hexadecimal format.

• data—Specifies the location data in the format defined in ANSI/TIA 1057: dotted hexadecimal data:
Each byte in a hexadecimal character string is two hexadecimal digits. Bytes are separated by a period
or colon. (Length: coordinate: 16 bytes. Civic-address: 6-160 bytes. Ecs-elin: 10-25 bytes)

Default Configuration

The location is not configured.

Command Mode

Interface (Ethernet) Configuration mode

Example

The following example configures the LLDP MED location information on gi1/0/2 as a civic address.

switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# lldp med location civic-address 616263646566

Cisco Business Switches 350 Series CLI Guide

827

lldp med network-policy (global)

LLDP Commands

lldp med network-policy (global)

To define a LLDP MED network policy, use the lldp med network-policy Global Configuration mode
command.

The lldp med network-policy command creates the network policy, which is attached to a port by lldp med
network-policy (interface), on page 830.

The network policy defines how LLDP packets are constructed.

To remove LLDP MED network policy, use the no form of this command.

Syntax

lldp med network-policy number application [vlan vlan-id] [vlan-type {tagged | untagged}] [up priority]
[dscp value]

no lldp med network-policy number

Parameters

• number—Network policy sequential number. The range is 1-32.

• application—The name or the number of the primary function of the application defined for this network

policy. Available application names are:

• voice

• voice-signaling

• guest-voice

• guest-voice-signaling

• softphone-voice

• video-conferencing

• streaming-video

• video-signaling

• vlan vlan-id—(Optional) VLAN identifier for the application.

• vlan-type—(Optional) Specifies if the application is using a tagged or an untagged VLAN.

• up priority—(Optional) User Priority (Layer 2 priority) to be used for the specified application.

• dscp value—(Optional) DSCP value to be used for the specified application.

Default Configuration

No network policy is defined.

Command Mode

Global Configuration mode

Cisco Business Switches 350 Series CLI Guide

828

LLDP Commands

lldp med network-policy (global)

User Guidelines

Use the lldp med network-policy Interface Configuration command to attach a network policy to a port.

Up to 32 network policies can be defined.

Example

This example creates a network policy for the voice-signal application and attaches it to port 1. LLDP packets
sent on port 1 will contain the information defined in the network policy.

switchxxxxxx(config)# lldp med network-policy 1 voice-signaling vlan 1 vlan-type untagged

up 1 dscp 2

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# lldp med network-policy add 1

Cisco Business Switches 350 Series CLI Guide

829

lldp med network-policy (interface)

LLDP Commands

lldp med network-policy (interface)

To attach or remove an LLDP MED network policy on a port, use the lldp med network-policy Interface
(Ethernet) Configuration mode command. Network policies are created in lldp med network-policy (global),
on page 828.

To remove all the LLDP MED network policies from the port, use the no form of this command.

Syntax

lldp med network-policy {add | remove} number

no lldp med network-policy number

Parameters

• add/remove number—Attaches/removes the specified network policy to the interface.

• number—Specifies the network policy sequential number. The range is 1-32

Default Configuration

No network policy is attached to the interface.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

For each port, only one network policy per application (voice, voice-signaling, etc.) can be defined.

Example

This example creates a network policy for the voice-signally application and attaches it to port 1. LLDP
packets sent on port 1 will contain the information defined in the network policy.

switchxxxxxx(config)# lldp med network-policy 1 voice-signaling vlan 1 vlan-type untagged

up 1 dscp 2

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# lldp med network-policy add 1

Cisco Business Switches 350 Series CLI Guide

830

LLDP Commands

lldp med network-policy voice auto

lldp med network-policy voice auto

A network policy for voice LLDP packets can be created by using the lldp med network-policy (global), on
page 828. The lldp med network-policy voice auto Global Configuration mode is simpler in that it uses the
configuration of the Voice application to create the network policy instead of the user having to manually
configure it.

This command generates an LLDP MED network policy for voice, if the voice VLAN operation mode is auto
voice VLAN. The voice VLAN, 802.1p priority, and the DSCP of the voice VLAN are used in the policy.

To disable this mode, use the no form of this command.

The network policy is attached automatically to the voice VLAN.

Syntax

lldp med network-policy voice auto

no lldp med network-policy voice auto

Parameters

This command has no arguments or keywords.

Default Configuration

None

Command Mode

Global Configuration mode

User Guidelines

In Auto mode, the Voice VLAN feature determines on which interfaces to advertise the network policy TLV
with application type voice, and controls the parameters of that TLV.

To enable the auto generation of a network policy based on the auto voice VLAN, there must be no manually
pre-configured network policies for the voice application

In Auto mode, you cannot manually define a network policy for the voice application using the lldp med
network-policy (global), on page 828 command.

Example

switchxxxxxx(config)# lldp med network-policy voice auto

Cisco Business Switches 350 Series CLI Guide

831

lldp notifications

LLDP Commands

lldp notifications

To enable/disable sending LLDP notifications on an interface, use the lldp notifications Interface (Ethernet)
Configuration mode command. To restore the default configuration, use the no form of this command.

Syntax

lldp notifications {enable | disable}

no lldp notifications

Parameters

• enable—Enables sending LLDP notifications.

• disable—Disables sending LLDP notifications.

Default Configuration

Disabled.

Command Mode

Interface (Ethernet) Configuration mode

Example

The following example enables sending LLDP notifications on gi1/0/1.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# lldp notifications enable

Cisco Business Switches 350 Series CLI Guide

832

LLDP Commands

lldp notifications interval

lldp notifications interval

To configure the maximum transmission rate of LLDP notifications, use the lldp notifications interval Global
Configuration mode command. To return to the default, use the no form of this command.

Syntax

lldp notifications interval seconds

no lldp notifications interval

Parameters

interval seconds—The device does not send more than a single notification in the indicated period (range:
5–3600).

Default Configuration

5 seconds

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# lldp notifications interval 10

Cisco Business Switches 350 Series CLI Guide

833

lldp optional-tlv

lldp optional-tlv

LLDP Commands

To specify which optional TLVs are transmitted, use the lldp optional-tlv Interface (Ethernet) Configuration
mode command. To restore the default configuration, use the no form of this command.

Syntax

lldp optional-tlv tlv [tlv2 … tlv5 | none]

Parameters

• tlv—Specifies the TLVs to be included. Available optional TLVs are: port-desc, sys-name, sys-desc,
sys-cap, 802.3-mac-phy, 802.3-lag, 802.3-max-frame-size, Power-via-MDI , 4-wirePower-via-MDI.

none—(Optional) Clear all optional TLVs from the interface.

If the 802.1 protocol is selected, see the command below.

Default Configuration

The following TLV are transmitted:

• sys-name

• sys-cap

Command Mode

Interface (Ethernet) Configuration mode

Example

The following example specifies that the port description TLV is transmitted on gi1/0/2.

switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# lldp optional-tlv port-desc

Cisco Business Switches 350 Series CLI Guide

834

LLDP Commands

lldp optional-tlv 802.1

lldp optional-tlv 802.1

To specify whether to transmit the 802.1 TLV, use the lldp optional-tlv 802.1 Interface (Ethernet) Configuration
mode command. To revert to the default setting, use the no form of this command.

Syntax

lldp optional-tlv 802.1 pvid {enable | disable} - The PVID is advertised or not advertised.

no lldp optional-tlv 802.1 pvid - The PVID advertise state is returned to default.

lldp optional-tlv 802.1 ppvid add ppvid - The Protocol Port VLAN ID (PPVID) is advertised. The PPVID
is the PVID that is used depending on the packet’s protocol.

lldp optional-tlv 802.1 ppvid remove ppvid - The PPVID is not advertised.

lldp optional-tlv 802.1 vlan add vlan-id - This vlan-id is advertised.

lldp optional-tlv 802.1 vlan remove vlan-id - This vlan-id is not advertised.

lldp optional-tlv 802.1 protocol add {stp | rstp | mstp | pause | 802.1x | lacp | gvrp} - The protocols selected
are advertised.

lldp optional-tlv 802.1 protocol remove {stp | rstp | mstp | pause | 802.1x | lacp | gvrp} - The protocols
selected are not advertised.

Parameters

• lldp optional-tlv 802.1 pvid {enable | disable}—Advertises or stop advertize the PVID of the port.

• lldp optional-tlv 802.1 ppvid add/remove ppvid —Adds/removes PPVID for advertising. (range:

0–4094). PPVID = 0 indicates that the port is not capable of supporting port and protocol VLANs and/or
the port is not enabled with any protocol VLANs.

• add/remove vlan-id—Adds/removes VLAN for advertising (range: 1–4094).

• add/remove {stp | rstp | mstp | pause | 802.1x | lacp | gvrp}—Add specifies to advertise the specified

protocols; remove specifies not to advertise the specified protocol.

Default Configuration

The following 802.1 TLV is transmitted:

Command Mode

Interface (Ethernet) Configuration mode

Example

switchxxxxxx(config)# lldp optional-tlv 802.1 protocol add stp

Cisco Business Switches 350 Series CLI Guide

835

lldp run

lldp run

LLDP Commands

To enable LLDP, use the lldp run Global Configuration mode command. To disable LLDP, use the no form
of this command.

Syntax

lldp run

no lldp run

Parameters

This command has no arguments or keywords.

Default Configuration

Enabled

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# lldp run

Cisco Business Switches 350 Series CLI Guide

836

LLDP Commands

lldp receive

lldp receive

To enable receiving LLDP on an interface, use the lldp receive Interface (Ethernet) Configuration mode
command. To stop receiving LLDP on an Interface (Ethernet) Configuration mode interface, use the no form
of this command.

Syntax

lldp receive

no lldp receive

Parameters

This command has no arguments or keywords.

Default Configuration

Enabled

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

LLDP manages LAG ports individually. LLDP data received through LAG ports is stored individually per
port.

LLDP operation on a port is not dependent on the STP state of a port. I.e. LLDP frames are received on
blocked ports.

If a port is controlled by 802.1x, LLDP operates only if the port is authorized.

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# lldp receive

Cisco Business Switches 350 Series CLI Guide

837

lldp reinit

lldp reinit

LLDP Commands

To specify the minimum time an LLDP port waits before reinitializing LLDP transmission, use the lldp reinit
Global Configuration mode command. To revert to the default setting, use the no form of this command.

Syntax

lldp reinit seconds

no lldp reinit

Parameters

reinit seconds—Specifies the minimum time in seconds an LLDP port waits before reinitializing LLDP
transmission.(Range: 1–10)

Default Configuration

2 seconds

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# lldp reinit 4

Cisco Business Switches 350 Series CLI Guide

838

LLDP Commands

lldp timer

lldp timer

To specify how often the software sends LLDP updates, use the lldp timer Global Configuration mode
command. To restore the default configuration, use the no form of this command.

Syntax

lldp timer seconds

no lldp timer

Parameters

timer seconds—Specifies, in seconds, how often the software sends LLDP updates (range: 5-32768 seconds).

Default Configuration

30 seconds.

Command Mode

Global Configuration mode

Example

The following example sets the interval for sending LLDP updates to 60 seconds.

switchxxxxxx(config)# lldp timer 60

Cisco Business Switches 350 Series CLI Guide

839

lldp transmit

lldp transmit

LLDP Commands

To enable transmitting LLDP on an interface use the lldp transmit Interface (Ethernet) Configuration mode
command. Use the no form of this command to stop transmitting LLDP on an interface,

Syntax

lldp transmit

no lldp transmit

Parameters

This command has no arguments or keywords.

Default Configuration

Enabled

Command Mode

Interface (Ethernet) Configuration mode

switchxxxxxx(config-if)#

User Guidelines

LLDP manages LAG ports individually. LLDP sends separate advertisements on each port in a LAG.

LLDP operation on a port is not dependent on the STP state of a port. I.e. LLDP frames are sent on blocked
ports.

If a port is controlled by 802.1x, LLDP operates only if the port is authorized.

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# lldp transmit

Cisco Business Switches 350 Series CLI Guide

840

LLDP Commands

lldp tx-delay

lldp tx-delay

To set the delay between successive LLDP frame transmissions initiated by value/status changes in the LLDP
local systems MIB, use the lldp tx-delay Global Configuration mode command. To restore the default
configuration, use the no form of this command.

Syntax

lldp tx-delay seconds

no lldp tx-delay

Parameters

tx-delay seconds—Specifies the delay in seconds between successive LLDP frame transmissions initiated by
value/status changes in the LLDP local systems MIB (range: 1-8192 seconds).

Default Configuration

The default LLDP frame transmission delay is 2 seconds.

Command Mode

Global Configuration mode

User Guidelines

It is recommended that the tx-delay be less than 25% of the LLDP timer interval.

Example

The following example sets the LLDP transmission delay to 10 seconds.

switchxxxxxx(config)# lldp tx-delay 10

Cisco Business Switches 350 Series CLI Guide

841

show lldp configuration

LLDP Commands

show lldp configuration

To display the LLDP configuration for all ports or for a specific port, use the show lldp configuration
Privileged EXEC mode command.

Syntax

show lldp configuration [interface-id | detailed]

Parameters

• interface-id—(Optional) Specifies the port ID.

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Default Configuration

Display for all ports. If detailed is not used, only present ports are displayed.

Command Mode

Privileged EXEC mode

Example 1 - Display LLDP configuration for all ports.

switchxxxxxx# show lldp configuration
State: Enabled
Timer: 30 Seconds
Hold multiplier: 4
Reinit delay: 2 Seconds
Tx delay: 2 Seconds
Notifications interval: 5 seconds
LLDP packets handling: Filtering
Port
-------- ----- --------------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4

RX,TX PD, SN, SD, SC , 4W
TX
PD, SN
RX,TX PD, SN, SD, SC
RX,TX D, SN, SD, SC

State Optional TLVs

Address
-----------

Notifications
------------

172.16.1.1

Disabled

172.16.1.1
None
automatic

Disabled
Disabled
Disabled

Example 2 - Display LLDP configuration for port 1.

switchxxxxxx# show lldp configuration gi1/0/1
State: Enabled
Timer: 30 Seconds
Hold multiplier: 4
Reinit delay: 2 Seconds
Tx delay: 2 Seconds
Notifications interval: 5 seconds
LLDP packets handling: Filtering
Chassis ID: mac-address
Port State
---- ---------- --------------
gi1/0/1 RX, TX
802.3 optional TLVs: 802.3-mac-phy, 802.3-lag, 802.3-max-frame-size
802.1 optional TLVs
PVID: Enabled
PPVIDs: 0, 1, 92

Address
----------- -----------
72.16.1.1

PD, SN, SD, SC, 4W

Notifications

Optional TLVs

Disabled

Cisco Business Switches 350 Series CLI Guide

842

LLDP Commands

show lldp configuration

VLANs: 1, 92
Protocols: 802.1x

The following table describes the significant fields shown in the display:

Field

Timer

Description

The time interval between LLDP updates.

Hold multiplier

The amount of time (as a multiple of the timer interval) that the receiving
device holds a LLDP packet before discarding it.

Reinit timer

The minimum time interval an LLDP port waits before re-initializing
an LLDP transmission.

Tx delay

The delay between successive LLDP frame transmissions initiated by
value/status changes in the LLDP local systems MIB.

Port

State

The port number.

The port’s LLDP state.

Optional TLVs

Optional TLVs that are advertised. Possible values are:

PD - Port description

SN - System name

SD - System description

SC - System capabilities

4W - 4 wire spare pair capability

Address

The management address that is advertised.

Notifications

Indicates whether LLDP notifications are enabled or disabled.

PVID

PPVID

Port VLAN ID advertised.

Protocol Port VLAN ID advertised.

Protocols

Protocols advertised.

Cisco Business Switches 350 Series CLI Guide

843

show lldp local

show lldp local

LLDP Commands

To display the LLDP information that is advertised from a specific port, use the show lldp local Privileged
EXEC mode command.

Syntax

show lldp local interface-id

Parameters

Interface-id—(Optional) Specifies a port ID.

Default Configuration

If no port ID is entered, the command displays information for all ports.

Command Mode

Privileged EXEC mode

Example

The following examples display LLDP information that is advertised from gi1/0/1 and 2.

switchxxxxxx# show lldp local gi1/0/1
Device ID: 0060.704C.73FF
Port ID: gi1/0/1
Capabilities: Bridge
System Name: ts-7800-1
System description:
Port description:
Management address: 172.16.1.8
802.3 MAC/PHY Configuration/Status
Auto-negotiation support: Supported
Auto-negotiation status: Enabled
Auto-negotiation Advertised Capabilities: 100BASE-TX full duplex, 1000BASE-T full duplex
Operational MAU type: 1000BaseTFD
802.3 Link Aggregation
Aggregation capability: Capable of being aggregated
Aggregation status: Not currently in aggregation
Aggregation port ID: 1
802.3 Maximum Frame Size: 1522
Power Type: Type 1 PSE
Power Source: Primary Power Source
Power Priority: Unknown
PSE Allocated Power Value: 30
4-Pair POE supported: Yes
Spare Pair Detection/Classification required: Yes
PD Spare Pair Desired State: Enabled
802.3 EEE
Local Tx: 30 usec
Local Rx: 25 usec
Remote Tx Echo: 30 usec
Remote Rx Echo: 25 usec
802.1 PVID: 1
802.1 PPVID: 2 supported, enabled
802.1 VLAN: 2 (VLAN2)

Cisco Business Switches 350 Series CLI Guide

844

LLDP Commands

show lldp local

802.1 Protocol: 88 08 00 01 (PAUSE)
LLDP-MED capabilities: Network Policy, Location Identification
LLDP-MED Device type: Network Connectivity
LLDP-MED Network policy
Application type: Voice
Flags: Tagged VLAN
VLAN ID: 2
Layer 2 priority: 0
DSCP: 0
LLDP-MED Power over Ethernet
Device Type: Power Sourcing Entity
Power source: Primary Power Source
Power priority: High
Power value: 9.6 Watts
LLDP-MED Location
Coordinates: 54:53:c1:f7:51:57:50:ba:5b:97:27:80:00:00:67:01
Hardware Revision: B1
Firmware Revision: A1
Software Revision: 3.8
Serial number: 7978399
Manufacturer name: Manufacturer
Model name: Model 1
Asset ID: Asset 123
switchxxxxxx# show lldp local gi1/0/2
LLDP is disabled.

Cisco Business Switches 350 Series CLI Guide

845

show lldp local tlvs-overloading

LLDP Commands

show lldp local tlvs-overloading

When an LLDP packet contains too much information for one packet, this is called overloading. To display
the status of TLVs overloading of the LLDP on all ports or on a specific port, use the show lldp local
tlvs-overloading EXEC mode command.

Syntax

show lldp local tlvs-overloading [interface-id]

Parameters

interface-id—(Optional) Specifies a port ID.

Default Configuration

If no port ID is entered, the command displays information for all ports.

Command Mode

User EXEC mode

User Guidelines

The command calculates the overloading status of the current LLDP configuration, and not for the last LLDP
packet that was sent.

Example

Bytes
------

switchxxxxxx# show lldp local tlvs-overloading gi1/0/1
TLVs Group
------------
Mandatory
LLDP-MED Capabilities
LLDP-MED Location
802.1
Total: 1600 bytes
Left: 100 bytes

Status
--------------
Transmitted
Transmitted
Transmitted
Overloading

31
9
200
1360

Cisco Business Switches 350 Series CLI Guide

846

LLDP Commands

show lldp med configuration

show lldp med configuration

To display the LLDP Media Endpoint Discovery (MED) configuration for all ports or for a specific port, use
the show lldp med configuration Privileged EXEC mode command.

Syntax

show lldp med configuration [interface-id | detailed]

Parameters

• interface-id—(Optional) Specifies the port ID.

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Default Configuration

If no port ID is entered, the command displays information for all ports. If detailed is not used, only present
ports are displayed.

Command Mode

Privileged EXEC mode

Example 1 - The following example displays the LLDP MED configuration for all interfaces.

switchxxxxxx# show lldp med configuration
Fast Start Repeat Count: 4.
lldp med network-policy voice: manual
Network policy 1
-------------------
Application type: voiceSignaling
VLAN ID: 1 untagged
Layer 2 priority: 0
DSCP: 0
Port
------ -------------- -------------- ---------- -------------
Enabled
gi1/0/1
Enabled
gi1/0/2
Enabled
gi1/0/3

Network Policy Location Notifications Inventory
--------
Yes
No
No

Capabilities

Yes
No
No

Yes
Yes
No

Yes
Yes
No

Example 2 - The following example displays the LLDP MED configuration for gi1/0/1.

Capabilities

switchxxxxxx# show lldp med configuration gi1/0/1
Port
Network Policy
------- -------------- ---------------- --------- ----------
gi1/0/1
Yes
Network policies:
Location:
Civic-address: 61:62:63:64:65:66

Yes

Yes

Enabled

Location Notifications Inventory

--------
Yes

Cisco Business Switches 350 Series CLI Guide

847

show lldp neighbors

LLDP Commands

show lldp neighbors

To display information about neighboring devices discovered using LLDP, use the show lldp neighbors
Privileged EXEC mode command. The information can be displayed for all ports or for a specific port.

Syntax

show lldp neighbors [interface-id]

Parameters

interface-id—(Optional) Specifies a port ID.

Default Configuration

If no port ID is entered, the command displays information for all ports.

Command Mode

Privileged EXEC mode

User Guidelines

A TLV value that cannot be displayed as an ASCII string is displayed as an hexadecimal string.

Example 1 - The following example displays information about neighboring devices discovered
using LLDP on all ports on which LLDP is enabled and who are up.

Location information, if it exists, is also displayed.

switchxxxxxx# show lldp neighbors
System capability legend:
B - Bridge; R - Router; W - Wlan Access Point; T - telephone;
D - DOCSIS Cable Device; H - Host; r - Repeater;
TP - Two Ports MAC Relay; S - S-VLAN; C - C-VLAN; O - Other
Port Device ID
----- ---------------
gi1/0/1 00:00:00:11:11:11 gi1/0/1 ts-7800-2 B 90
gi1/0/1 00:00:00:11:11:11 gi1/0/1 ts-7800-2 B 90
gi1/0/2 00:00:26:08:13:24 gi1/0/3 ts-7900-1 B,R 90
gi1/0/3 00:00:26:08:13:24 gi1/0/2 ts-7900-2 W 90

Port ID System Name Capabilities TTL
-------- ---------- ----------- ----

Example 2 - The following example displays information about neighboring devices discovered
using LLDP on port 1.

switchxxxxxx# show lldp neighbors gi1/0/1
Device ID: 00:00:00:11:11:11
Port ID: gi1/0/1
System Name: ts-7800-2
Capabilities: B
System description:
Port description:
Management address: 172.16.1.1
Time To Live: 90 seconds
802.3 MAC/PHY Configuration/Status
Auto-negotiation support: Supported.
Auto-negotiation status: Enabled.
Auto-negotiation Advertised Capabilities: 100BASE-TX full duplex, 1000BASE-T full duplex.

Cisco Business Switches 350 Series CLI Guide

848

LLDP Commands

show lldp neighbors

Operational MAU type: 1000BaseTFD
802.3 Power via MDI
MDI Power support Port Class: PD
PSE MDI Power Support: Not Supported
PSE MDI Power State: Not Enabled
PSE power pair control ability: Not supported.
PSE Power Pair: Signal
PSE Power class: 1
Power Type: Type 1 PSE
Power Source: Primary Power Source
Power Priority: Unknown
PD Requested Power Value: 30
4-Pair POE supported: Yes
Spare Pair Detection/Classification required: Yes
PD Spare Pair Desired State: Enabled
PD Spare Pair Operational State: Enabled
802.3 Link Aggregation
Aggregation capability: Capable of being aggregated
Aggregation status: Not currently in aggregation
Aggregation port ID: 1
802.3 Maximum Frame Size: 1522
802.3 EEE
Remote Tx: 25 usec
Remote Rx: 30 usec
Local Tx Echo: 30 usec
Local Rx Echo: 25 usec
802.1 PVID: 1
802.1 PPVID: 2 supported, enabled
802.1 VLAN: 2(VLAN2)
802.1 Protocol: 88 8E 01
LLDP-MED capabilities: Network Policy.
LLDP-MED Device type: Endpoint class 2.
LLDP-MED Network policy
Application type: Voice
Flags: Unknown policy
VLAN ID: 0
Layer 2 priority: 0
DSCP: 0
LLDP-MED Power over Ethernet
Device Type: Power Device
Power source: Primary power
Power priority: High
Power value: 9.6 Watts
Hardware revision: 2.1
Firmware revision: 2.3
Software revision: 2.7.1
Serial number: LM759846587
Manufacturer name: VP
Model name: TR12
Asset ID: 9
LLDP-MED Location
Coordinates: 54:53:c1:f7:51:57:50:ba:5b:97:27:80:00:00:67:01

The following table describes significant LLDP fields shown in the display:

Field

Description

LLDP MED

LLDP MED - Network Policy

LLDP MED - Power Over Ethernet

Cisco Business Switches 350 Series CLI Guide

849

show lldp neighbors

LLDP Commands

Field

Description

LLDP MED - Location

Port

Device ID

Port ID

The port number.

The neighbor device’s configured ID (name) or MAC address.

The neighbor device’s port ID.

System name

The neighbor device’s administratively assigned name.

Capabilities

The capabilities discovered on the neighbor device. Possible
values are:

• B - Bridge

• R - Router

• W - WLAN Access Point

• T - Telephone

• D - DOCSIS cable device

• H - Host

• r - Repeater

• O - Other

System description

The neighbor device’s system description.

Port description

The neighbor device’s port description.

Management address

The neighbor device’s management address.

Auto-negotiation
support

The auto-negotiation support status on the port. (supported or
not supported)

Auto-negotiation status

The active status of auto-negotiation on the port. (enabled or
disabled)

Auto-negotiation
Advertised Capabilities

The port speed/duplex/flow-control capabilities advertised by
the auto-negotiation.

Operational MAU type

The port MAU type.

Power Source

The power source utilized by a PSE or PD device. A PSE
device advertises its power capability. The possible values are:
Primary power source, Backup power source. Unknown Power
source, PSE and local power source, Local Only power source
and PSE only power source.

Capabilities

The sender's LLDP-MED capabilities.

Cisco Business Switches 350 Series CLI Guide

850

LLDP Commands

show lldp neighbors

Field

Device type

Description

The device type. Indicates whether the sender is a Network
Connectivity Device or Endpoint Device, and if an Endpoint,
to which Endpoint Class it belongs.

Application type

The primary function of the application defined for this network
policy.

Flags

Flags. The possible values are:

Unknown policy: Policy is required by the device, but is
currently unknown.

Tagged VLAN: The specified application type is using a tagged
VLAN.

Untagged VLAN: The specified application type is using an
Untagged VLAN.

VLAN ID

The VLAN identifier for the application.

Layer 2 priority

The Layer 2 priority used for the specified application.

DSCP

Power type

Power Source

Power priority

Power value

The DSCP value used for the specified application.

The device power type. The possible values are: Power
Sourcing Entity (PSE) or Power Device (PD).

The power source utilized by a PSE or PD device. A PSE
device advertises its power capability. The possible values are:
Primary power source and Backup power source. A PD device
advertises its power source. The possible values are: Primary
power, Local power, Primary and Local power.

The PD device priority. A PSE device advertises the power
priority configured for the port. A PD device advertises the
power priority configured for the device. The possible values
are: Critical, High and Low.

The total power in watts required by a PD device from a PSE
device, or the total power a PSE device is capable of sourcing
over a maximum length cable based on its current configuration.

Coordinates, Civic
address, ECS ELIN.

The location information raw data.

Cisco Business Switches 350 Series CLI Guide

851

show lldp statistics

LLDP Commands

show lldp statistics

To display LLDP statistics on all ports or a specific port, use the show lldp statistics EXEC mode command.

Syntax

show lldp statistics [interface-id | detailed]

Parameters

• interface-id—(Optional) Specifies the port ID.

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Default Configuration

If no port ID is entered, the command displays information for all ports. If detailed is not used, only present
ports are displayed.

Command Mode

User EXEC mode

Example

switchxxxxxx# show lldp statistics
Tables Last Change Time: 14-Oct-2010 32:08:18
Tables Inserts: 26
Tables Deletes: 2
Tables Dropped: 0
Tables Ageouts: 1

TX Frames

RX Frame

RX TLVs

RX Ageouts

Port Total Total Discarded Errors
Discarded
----- ---- ----- --------- --------- ---------
0
gi1/0/1
0
gi1/0/2
0
gi1/0/3
0
gi1/0/4

730
0
730
0

850
0
0
0

0
0
0
0

0
0
0
0

Unrecognized Total
---------

------------

0

0
0
0

0

0
0
0

The following table describes significant LLDP fields shown in the display:

Field

Description

LLDP MED

LLDP MED - Power Over Ethernet

LLDP MED - Location

Port

Device ID

Port ID

The port number.

The neighbor device’s configured ID (name) or MAC address.

The neighbor device’s port ID.

Cisco Business Switches 350 Series CLI Guide

852

LLDP Commands

show lldp statistics

Field

Description

System name

The neighbor device’s administratively assigned name.

Capabilities

The capabilities discovered on the neighbor device. Possible values are:

• B - Bridge

• R - Router

• W - WLAN Access Point

• T - Telephone

• D - DOCSIS cable device

• H - Host

• r - Repeater

• O - Other

System description

The neighbor device’s system description.

Port description

The neighbor device’s port description.

Management address

The neighbor device’s management address.

Auto-negotiation
support

The auto-negotiation support status on the port. (Supported or Not
Supported)

Auto-negotiation status

The active status of auto-negotiation on the port. (Enabled or Disabled)

Auto-negotiation
Advertised Capabilities

The port speed/duplex/flow-control capabilities advertised by the
auto-negotiation.

Operational MAU type

The port MAU type.

Capabilities

The sender's LLDP-MED capabilities.

Device type

The device type. Indicates whether the sender is a Network Connectivity
Device or Endpoint Device, and if an Endpoint, to which Endpoint Class
it belongs.

LLDP MED - Network Policy

Application type

The primary function of the application defined for this network policy.

Flags

Flags. The possible values are:

Unknown policy: Policy is required by the device, but is currently
unknown.

Tagged VLAN: The specified application type is using a Tagged VLAN.

Untagged VLAN: The specified application type is using an Untagged
VLAN.

Cisco Business Switches 350 Series CLI Guide

853

show lldp statistics

LLDP Commands

Field

Description

VLAN ID

The VLAN identifier for the application.

Layer 2 priority

The Layer 2 priority used for the specified application.

DSCP

Power type

Power Source

Power priority

Power value

The DSCP value used for the specified application.

The device power type. The possible values are: Power Sourcing Entity
(PSE) or Power Device (PD).

The power source utilized by a PSE or PD device. A PSE device
advertises its power capability. The possible values are: Primary power
source and Backup power source. A PD device advertises its power
source. The possible values are: Primary power, Local power, Primary
and Local power.

The PD device priority. A PSE device advertises the power priority
configured for the port. A PD device advertises the power priority
configured for the device. The possible values are: Critical, High and
Low.

The total power in watts required by a PD device from a PSE device,
or the total power a PSE device is capable of sourcing over a maximum
length cable based on its current configuration.

Coordinates, Civic
address, ECS ELIN.

The location information raw data.

Cisco Business Switches 350 Series CLI Guide

854

Loopback Detection Commands

This chapter contains the following sections:

• loopback-detection enable (Global), on page 856
• loopback-detection enable (Interface), on page 857
• loopback-detection interval, on page 858
• show loopback-detection, on page 859

Cisco Business Switches 350 Series CLI Guide

855

loopback-detection enable (Global)

Loopback Detection Commands

loopback-detection enable (Global)

To enable the Loopback Detection (LBD) feature globally, use the loopback-detection enable Global
Configuration mode command. To disable the Loopback Detection feature, use the no form of this command.

Syntax

loopback-detection enable

no loopback-detection enable

Parameters

This command has no arguments or keywords.

Default Configuration

Loopback Detection is disabled.

Command Mode

Global Configuration mode

User Guidelines

This command enables the Loopback Detection feature globally. Use the loopback-detection enable Interface
Configuration mode command to enable Loopback Detection on an interface.

Example

The following example enables the Loopback Detection feature on the device.

switchxxxxxx(config)# loopback-detection enable

Cisco Business Switches 350 Series CLI Guide

856

Loopback Detection Commands

loopback-detection enable (Interface)

loopback-detection enable (Interface)

To enable the Loopback Detection (LBD) feature on an interface, use the loopback-detection enable Interface
(Ethernet, Port Channel) Configuration mode command. To disable the Loopback Detection feature on the
interface, use the no form of this command.

Syntax

loopback-detection enable

no loopback-detection enable

Parameters

This command has no arguments or keywords.

Default Configuration

Loopback Detection is enabled on an interface.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

This command enables Loopback Detection on an interface. Use the loopback-detection enable Global
Configuration command to enable Loopback Detection globally.

Example

The following example enables the Loopback Detection feature on port gi1/0/4.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# loopback-detection enable

Cisco Business Switches 350 Series CLI Guide

857

loopback-detection interval

Loopback Detection Commands

loopback-detection interval

To set the time interval between LBD packets, use the loopback-detection interval Global Configuration
mode command. To restore the default configuration, use the no form of this command.

Syntax

loopback-detection interval seconds

no loopback-detection interval

Parameters

seconds—Specifies the time interval in seconds between LBD packets. (Range: 10–60 seconds)

Default Configuration

The default time interval between LBD packets is 30 seconds.

Command Mode

Global Configuration mode

Example

The following example sets the time interval between LBD packets to 45 seconds.

switchxxxxxx(config)# loopback-detection interval 45

Cisco Business Switches 350 Series CLI Guide

858

Loopback Detection Commands

show loopback-detection

show loopback-detection

To display information about Loopback Detection, use the show loopback-detection Privileged EXEC mode
command.

Syntax

show loopback-detection [interface-id | detailed]

Parameters

• interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types:

Ethernet port or Port-channel.

• detailed—(Optional) Displays information for non-present ports in addition to present ports. If this is

not set, the default is to display all present ports.

Default Configuration

All ports are displayed. If detailed is not used, only present ports are displayed.

Command Mode

Privileged EXEC mode

User Guidelines

Operational status of Active indicates the following conditions are meet:

• Loopback is globally enabled.

• Loopback is enabled on the interface.

• Interface operational state of the interface is up.

• Interface STP state is Forwarding or STP state is disabled.

Operational status of LoopDetected indicates that the interface entered errDisabled state.

Operational status of Inactive indicates that loopback detection is not actively attempting to detect loops, i.e.
the Active status conditions are not meet.

Example

The following example displays information about the status of Loopback Detection.

Console# show loopback-detection
Loopback detection: Enabled
LBD packets interval: 30 Seconds

Cisco Business Switches 350 Series CLI Guide

859

show loopback-detection

Loopback Detection Commands

Interface
---------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4

Loopback Detection
Admin State
------------------
Enabled
Enabled
Enabled
Disabled

Loopback Detection
Operational State
------------------
Active
LoopDetected
Inactive
Inactive

Cisco Business Switches 350 Series CLI Guide

860

Macro Commands

This chapter contains the following sections:

• macro name, on page 862
• macro, on page 865
• macro description, on page 867
• macro global, on page 869
• macro global description, on page 871
• show parser macro, on page 872

Cisco Business Switches 350 Series CLI Guide

861

macro name

macro name

Macro Commands

Use the macro name Global Configuration mode command to define a macro. There are two types of macros
that can be defined:

• Global macros define a group of CLI commands that can be run at any time.

Smartport macros are associated with Smartport types. For each Smartport macro there must be an anti
macro (a macro whose name is concatenated with no_). The anti macro reverses the action of the macro.

If a macro with this name already exists, it overrides the previously-defined one.

Use the no form of this command to delete the macro definition.

Syntax

macro name macro-name

no macro name [macro-name]

Parameters

• macro-name—Name of the macro. Macro names are case sensitive.

Command Mode

Global Configuration mode

User Guidelines

A macro is a script that contains CLI commands and is assigned a name by the user. It can contain up to 3000
characters and 200 lines.

Keywords

Macros may contain keywords (parameters). The following describes these keywords:

• A macro can contain up to three keywords.

• All matching occurrences of the keyword are replaced by the corresponding value specified in the macro

command.

• Keyword matching is case-sensitive

Applying a macro with keywords does not change the state of the original macro definition.

User Feedback

The behavior of a macro command requiring user feedback is the same as if the command is entered from
terminal: it sends its prompt to the terminal and accepts the user reply.

Creating a Macro

Use the following guidelines to create a macro:

• Use macro name to create the macro with the specified name.

Cisco Business Switches 350 Series CLI Guide

862

Macro Commands

macro name

• Enter one macro command per line.

• Use the @ character to end the macro.

• Use the # character at the beginning of a line to enter a comment in the macro.

In addition, # is used to identify certain preprocessor commands that can only be used within a macro.
There are two possible preprocessor commands:

#macro key description - Each macro can be configured with up to 3 keyword/description pairs. The
keywords and descriptions are displayed in the GUI pages when the macro is displayed.

The syntax for this preprocessor command is as follows:

#macro key description $keyword1 description1 $keyword2 description2 $keyword3 description3

A keyword must be prefixed with '$'.

#macro keywords - This instruction enables the device to display the keywords as part of the CLI help.
It accepts up to 3 keywords. The command creates a CLI help string with the keywords for the macro.
The help string will be displayed if help on the macro is requested from the macro and macro global
commands. The GUI also uses the keywords specified in the command as the parameter names for the
macro. See Example 2 and 3 below for a description of how this command is used in the CLI.

The syntax for this preprocessor command is as follows:

#macro keywords $keyword1 $keyword2 $keyword3

where $keywordn is the name of the keyword.

Editing a Macro

Macros cannot be edited. Modify a macro by creating a new macro with the same name as the existing macro.
The newer macro overwrites the existing macro.

The exceptions to this are the built-in macros and corresponding anti-macros for the Smartport feature. You
cannot override a Smartport macro.

Scope of Macro

It is important to consider the scope of any user-defined macro. Because of the potential hazards of applying
unintended configurations, do not change configuration modes within the macro by using commands such as
exit, end, or interface interface-id. With a few exceptions, there are other ways of executing macros in the
various configuration modes. Macros may be executed in Privileged Exec mode, Global Configuration mode,
and Interface Configuration mode (when the interface is NOT a VLAN.)

Example 1 -The following example shows how to create a macro that configures the duplex mode
of a port.

switchxxxxxx(config)# macro name dup
Enter macro commands one per line. End with the character ‘@’.
#macro description dup
duplex full
negotiation
@

Example 2 -The following example shows how to create a macro with the parameters: DUPLEX
and SPEED. When the macro is run, the values of DUPLEX and SPEED must be provided by the
user. The #macro keywords command enables the user to receive help for the macro as shown in
Example 3.

Cisco Business Switches 350 Series CLI Guide

863

macro name

Macro Commands

switchxxxxxx(config)# macro name duplex
Enter macro commands one per line. End with the character ‘@’.
duplex $DUPLEX
no negotiation
speed $SPEED
#macro keywords $DUPLEX $SPEED
@

Example 3 -The following example shows how to display the keywords using the help character ?
(as defined by the #macro keywords command above) and then run the macro on the port. The
#macro keywords command entered in the macro definition enables the user to receive help for the
macro, as shown after the words e.g. below.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# macro apply duplex ?

WORD <1-32>
<cr>

Keyword to replace with value e.g. $DUPLEX, $SPEED

switchxxxxxx(config-if)# macro apply duplex $DUPLEX ?

WORD<1-32>
<cr>

First parameter value

switchxxxxxx(config-if)# macro apply duplex $DUPLEX full $SPEED ?

WORD<1-32>

Second parameter value

switchxxxxxx(config-if)# macro apply duplex $DUPLEX full $SPEED 100

Cisco Business Switches 350 Series CLI Guide

864

Macro Commands

macro

macro

Use the macro apply/trace Interface Configuration command to either:

• Apply a macro to an interface without displaying the actions being performed

• Apply a macro to the interface while displaying the actions being performed

Syntax

macro {apply | trace} macro-name [parameter-name1 value] [parameter-name2 value] [parameter-name3
value]

Parameters

• apply—Apply a macro to the specific interface.

• trace—Apply and trace a macro to the specific interface.

• macro-name—Name of the macro.

• parameter-name value—For each parameter defined in the macro, specify its name and value. You can
enter up to three parameter-value pairs. Parameter keyword matching is case sensitive. All matching
occurrences of the parameter name in the macro are replaced with the corresponding value.

Default Configuration

The command has no default setting.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The macro apply command hides the commands of the macro from the user while it is being run. The macro
trace command displays the commands along with any errors which are generated by them as they are executed.
This is used to debug the macro and find syntax or configuration errors.

When you run a macro, if a line in it fails because of a syntax or configuration error, the macro continues to
apply the remaining commands to the interface.

If you apply a macro that contains parameters in its commands, the command fails if you do not provide the
values for the parameters. You can use the macro apply macro-name with a '?' to display the help string for
the macro keywords (if you have defined these with the #macro keywords preprocessor command).

Parameter (keyword) matching is case sensitive. All matching occurrences of the parameter are replaced with
the provided value. Any full match of a keyword, even if it is part of a large string, is considered a match and
replaced by the corresponding value.

When you apply a macro to an interface, the switch automatically generates a macro description command
with the macro name. As a result, the macro name is appended to the macro history of the interface. The show
parser macro command displays the macro history of an interface.

Cisco Business Switches 350 Series CLI Guide

865

macro

Macro Commands

A macro applied to an interface range behaves the same way as a macro applied to a single interface. When
a macro is applied to an interface range, it is applied sequentially to each interface within the range. If a macro
command fails on one interface, it is nonetheless attempted to be applied and may fail or succeed on the
remaining interfaces.

Example 1 - The following is an example of a macro being applied to an interface with the trace
option.

switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# macro trace dup $DUPLEX full $SPEED 100

Applying command… ‘duplex full’
Applying command… ‘speed 100’

switchxxxxxx(config-if)#

Example 2 - The following is an example of a macro being applied without the trace option.

switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# macro apply dup $DUPLEX full $SPEED 100
switchxxxxxx(config-if)#

Example 3 - The following is an example of an incorrect macro being applied.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# macro trace dup
Applying command...'duplex full'
Applying command...'speed auto'
% bad parameter value
switchxxxxxx(config-if)#

Cisco Business Switches 350 Series CLI Guide

866

Macro Commands

macro description

macro description

Use the macro description Interface Configuration mode command to append a description, for example, a
macro name, to the macro history of an interface. Use the no form of this command to clear the macro history
of an interface. When the macro is applied to an interface, the switch automatically generates a macro description
command with the macro name. As a result, the name of the macro is appended to the macro history of the
interface.

Syntax

macro description text

no macro description

Parameters

• text—Description text. The text can contain up to 160 characters. The text must be double quoted if it

contains multiple words.

Default Configuration

The command has no default setting.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

When multiple macros are applied on a single interface, the description text is a concatenation of texts from
a number of previously-applied macros.

Example

switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# macro apply dup
switchxxxxxx(config-if)# exit
switchxxxxxx(config)# interface gi1/0/3
switchxxxxxx(config-if)# macro apply duplex $DUPLEX full $SPEED 100
switchxxxxxx(config-if)# macro description dup
switchxxxxxx(config-if)# macro description duplex
switchxxxxxx(config-if)# end
switchxxxxxx(config)# exit
switchxxxxxx# show parser macro description
Global Macro(s):
Interface
------------
dup
gi1/0/2
duplex | dup | duplex
gi1/0/3
--------------------------------------------------------------
switchxxxxxx# configure
switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# no macro description
switchxxxxxx(config-if)# end
switchxxxxxx(config)# exit
switchxxxxxx# show parser macro description

Macro Description(s)
--------------------------------------------------

Cisco Business Switches 350 Series CLI Guide

867

macro description

Macro Commands

Global Macro(s):
Interface
---------
gi1/0/3
--------------------------------------------------------------

Macro Description(s)
-----------------------------------------------------

duplex | dup | duplex

Cisco Business Switches 350 Series CLI Guide

868

Macro Commands

macro global

macro global

Use the macro global Global Configuration command to apply a macro to a switch (with or without the trace
option).

Syntax

macro global {apply | trace} macro-name [parameter-name1 value] [parameter-name2 value] [parameter
-name3 value]

Parameters

• apply—Apply a macro to the switch.

• trace—Apply and trace a macro to the switch.

• macro-name—Specify the name of the macro.

• parameter-name value—Specify the parameter values required for the switch. You can enter up to three
parameter-value pairs. Parameter keyword matching is case sensitive. All matching occurrences of the
parameters are replaced with the corresponding value.

Default Configuration

The command has no default setting.

Command Mode

Global Configuration mode.

User Guidelines

If a command fails because of a syntax error or a configuration error when you apply a macro, the macro
continues to apply the remaining commands to the switch.

Keyword matching is case sensitive. All matching occurrences of the keyword are replaced with the
corresponding value. Any full match of a keyword, even if it is part of a large string, is considered a match
and replaced by the corresponding value.

If you apply a macro that contains keywords in its commands, the command fails if you do not specify the
proper values for the keywords when you apply the macro. You can use this command with a '?' to display
the help string for the macro keywords. You define the keywords in the help string using the preprocessor
command #macro keywords when you define a macro.

When you apply a macro in Global Configuration mode, the switch automatically generates a global macro
description command with the macro name. As a result, the macro name is appended to the global macro
history.

Example

The following is an example of a macro being defined and then applied to the switch with the trace option.

switchxxxxxx(config)# macro name console-timeout
Enter macro commands one per line. End with the character ‘@’.

Cisco Business Switches 350 Series CLI Guide

869

macro global

Macro Commands

line console
exec-timeout $timeout-interval
@
switchxxxxxx(config)# macro global trace console-timeout $timeout-interval 100

Applying command… ‘line console’
Applying command… ‘exec-timeout 100’

Cisco Business Switches 350 Series CLI Guide

870

Macro Commands

macro global description

macro global description

Use the macro global description Global Configuration command to enter a description which is used to
indicate which macros have been applied to the switch. Use the no form of this command to remove the
description.

Syntax

macro global description text

no macro global description

Parameters

• text—Description text. The text can contain up to 160 characters.

Default Configuration

The command has no default setting.

Command Mode

Global Configuration mode

User Guidelines

When multiple global macros are applied to a switch, the global description text is a concatenation of texts
from a number of previously applied macros.

Examples

switchxxxxxx(config)# macro global description "set console timeout interval"

Cisco Business Switches 350 Series CLI Guide

871

show parser macro

Macro Commands

show parser macro

Use the show parser macro User EXEC mode command to display the parameters for all configured macros
or for one macro on the switch.

Syntax

show parser macro [{brief | description [interface interface-id | detailed] | name macro-name}]

Parameters

• brief—Display the name of all macros.

• description [interface interface-id]—Display the macro descriptions for all interfaces or if an interface

is specified, display the macro descriptions for that interface.

• name macro-name—Display information about a single macro identified by the macro name.

• detailed—Displays information for non-present ports in addition to present ports.

Default Configuration

Display description of all macros on present ports.

If the detailed keyword is not used, only present ports are displayed.

Command Mode

User EXEC mode

Example 1 - This is a partial output example from the show parser macro command.

switchxxxxxx# show parser macro
Total number of macros = 6
--------------------------------------------------------------
Macro name : company-global
Macro type : default global
# Enable dynamic port error recovery for link state
# failures
--------------------------------------------------------------
Macro name : company-desktop
Macro type : default interface
# macro keywords $AVID
# Basic interface - Enable data VLAN only
# Recommended value for access vlan (AVID) should not be 1
switchport access vlan $AVID
switchport mode access

Example 2 - This is an example of output from the show parser macro name command.

switchxxxxxx# show parser macro standard-switch10
Macro name : standard-switch10
Macro type : customizable
macro description standard-switch10
# Trust QoS settings on VOIP packets
auto qos voip trust
# Allow port channels to be automatically formed
channel-protocol pagp

Cisco Business Switches 350 Series CLI Guide

872

Macro Commands

show parser macro

Example 3 - This is an example of output from the show parser macro brief command.

switchxxxxxx# show parser macro brief
default global : company-global
default interface: company-desktop
default interface: company-phone
default interface: company-switch
default interface: company-router
customizable : snmp

Example 4 - This is an example of output from the show parser macro description command.

switchxxxxxx# show parser macro description
Global Macro(s): company-global

Example 5 - This is an example of output from the show parser macro description interface
command.

switchxxxxxx# show parser macro description interface gi1/0/2
Interface Macro Description
--------------------------------------------------------------
gi1/0/2 this is test macro
--------------------------------------------------------------

Cisco Business Switches 350 Series CLI Guide

873

show parser macro

Macro Commands

Cisco Business Switches 350 Series CLI Guide

874

Management ACL Commands

This chapter contains the following sections:

• deny (Management), on page 876
• permit (Management), on page 877
• management access-list, on page 878
• management access-class, on page 880
• show management access-list, on page 881
• show management access-class, on page 882

Cisco Business Switches 350 Series CLI Guide

875

deny (Management)

Management ACL Commands

deny (Management)

To set permit rules (ACEs) for the management access list (ACL), use the deny Management Access-list
Configuration mode command.

Syntax

deny [interface-id] [service service]

deny ip-source {ipv4-address | ipv6-address/ipv6-prefix-length} [mask {mask | prefix-length}] [interface-id]
[service service]

Parameters

• interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types:

Ethernet port, Port-channel or VLAN

• service service—(Optional) Specifies the service type. Possible values are: Telnet, SSH, HTTP, HTTPS

and SNMP.

• ipv4-address—Specifies the source IPv4 address.

• ipv6-address/ipv6-prefix-length—Specifies the source IPv6 address and source IPv6 address prefix

length. The prefix length must be preceded by a forward slash (/). The parameter is optional.

• mask mask—Specifies the source IPv4 address network mask. The parameter is relevant only to IPv4

addresses.

• mask prefix-length—Specifies the number of bits that comprise the source IPv4 address prefix. The

prefix length must be preceded by a forward slash (/). The parameter is relevant only to IPv4 addresses.
(Range: 0–32)

Default Configuration

No rules are configured.

Command Mode

Management Access-list Configuration mode

User Guidelines

Rules with ethernet, VLAN, and port-channel parameters are valid only if an IP address is defined on the
appropriate interface.

Example

The following example denies all ports in the ACL called mlist.

switchxxxxxx(config)# management access-list mlist
switchxxxxxx(config-macl)# deny

Cisco Business Switches 350 Series CLI Guide

876

Management ACL Commands

permit (Management)

permit (Management)

To set permit rules (ACEs) for the management access list (ACL), use the permit Management Access-list
Configuration mode command.

Syntax

permit [interface-id] [service service]

permit ip-source {ipv4-address | ipv6-address/ipv6-prefix-length} [mask {mask | prefix-length}] [interface-id]
[service service]

Parameters

• interface-id —(Optional) Specify an interface ID. The interface ID can be one of the following types:

Ethernet port, Port-channel or VLAN

• service service — (Optional) Specifies the service type. Possible values are: Telnet, SSH, HTTP, HTTPS

and SNMP.

• ipv4-address — Specifies the source IPv4 address.

• ipv6-address/ipv6-prefix-length — Specifies the source IPv6 address and source IPv6 address prefix

length. The prefix length must be preceded by a forward slash (/). The parameter is optional.

• mask mask — Specifies the source IPv4 address network mask. This parameter is relevant only to IPv4

addresses.

• mask prefix-length — Specifies the number of bits that comprise the source IPv4 address prefix. The

prefix length must be preceded by a forward slash (/). This parameter is relevant only to IPv4 addresses.
(Range: 0–32)

Default Configuration

No rules are configured.

Command Mode

Management Access-list Configuration mode

User Guidelines

Rules with Ethernet, VLAN, and port-channel parameters are valid only if an IP address is defined on the
appropriate interface.

Example

The following example permits all ports in the ACL called mlist

switchxxxxxx(config)# management access-list mlist
switchxxxxxx(config-macl)# permit

Cisco Business Switches 350 Series CLI Guide

877

management access-list

Management ACL Commands

management access-list

To configure a management access list (ACL) and enter the Management Access-list Configuration mode,
use the management access-list Global Configuration mode command. To delete an ACL, use the no form
of this command.

Syntax

management access-list name

no management access-list name

Parameters

name—Specifies the ACL name. (Length: 1–32 characters)

Default Configuration

N/A

Command Mode

Global Configuration mode

User Guidelines

Use this command to configure a management access list. This command enters the Management Access-list
Configuration mode, where the denied or permitted access conditions are defined with the deny and permit
commands.

If no match criteria are defined, the default value is deny.

When re-entering the access-list context, the new rules are entered at the end of the access list.

Use the management access-class, on page 880 command to select the active access list.

The active management list cannot be updated or removed.

A management access-list configured as the access-class for the quiet-mode period (command login quiet-mode
access-class in AAA Commands section) cannot be changed or removed.

For IPv6 management traffic that is tunneled in IPv4 packets, the management ACL is applied first on the
external IPv4 header (rules with the service field are ignored), and then again on the inner IPv6 header.

Example 1 - The following example creates a management access list called mlist, configures
management gi1/0/1 and gi1/0/9, and makes the new access list the active list.

switchxxxxxx(config)# management access-list mlist
switchxxxxxx(config-macl)# permit gi1/0/1
switchxxxxxx(config-macl)# permit gi1/0/9
switchxxxxxx(config-macl)# exit
switchxxxxxx(config)#

Example 2 - The following example creates a management access list called ‘mlist’, configures all
interfaces to be management interfaces except gi1/0/1 and gi1/0/9, and makes the new access list the
active list.

Cisco Business Switches 350 Series CLI Guide

878

Management ACL Commands

management access-list

switchxxxxxx(config)# management access-list mlist
switchxxxxxx(config-macl)# deny gi1/0/1
switchxxxxxx(config-macl)# deny gi1/0/9
switchxxxxxx(config-macl)# permit
switchxxxxxx(config-macl)# exit
switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

879

management access-class

Management ACL Commands

management access-class

To restrict management connections by defining the active management access list (ACL), use the management
access-class Global Configuration mode command. To disable management connection restrictions, use the
no form of this command.

Syntax

management access-class {console-only | name}

no management access-class

Parameters

• console-only—Specifies that the device can be managed only from the console.

• name—Specifies the ACL name to be used. (Length: 1–32 characters)

Default Configuration

The default configuration is no management connection restrictions.

Command Mode

Global Configuration mode

Example

The following example defines an access list called mlist as the active management access list.

switchxxxxxx(config)# management access-class mlist

Cisco Business Switches 350 Series CLI Guide

880

Management ACL Commands

show management access-list

show management access-list

To display management access lists (ACLs), use the show management access-list Privileged EXEC mode
command.

Syntax

show management access-list [name]

Parameters

name—(Optional) Specifies the name of a management access list to be displayed. (Length: 1–32 characters)

Default Configuration

All management ACLs are displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays the mlist management ACL.

switchxxxxxx# show management access-list mlist
m1
--
deny service telnet
permit gi1/0/1 service telnet
! (Note: all other access implicitly denied)
console(config-macl)#

Cisco Business Switches 350 Series CLI Guide

881

show management access-class

Management ACL Commands

show management access-class

To display information about the active management access list (ACLs), use the show management
access-class Privileged EXEC mode command.

Syntax

show management access-class

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

Example

Example 1 -The following example displays the active management ACL information.

switchxxxxxx# show management access-class
Management access-class is enabled, using access list mlist

Example 2 - The following example displays the active management ACL information, when management
access class is enabled on the device, and the device is in the quiet-mode period (see commands login block-for
and login quiet-mode access-class in AAA Commands section):

switchxxxxxx# show management access-class
Management access-class is enabled, using login quiet-mode period
access-class quiet-ACL(mlist access-list will be active when login quiet-mode
period ends

Cisco Business Switches 350 Series CLI Guide

882

MLD Commands

This chapter contains the following sections:

• clear ipv6 mld counters, on page 884
• ipv6 mld last-member-query-count, on page 885
• ipv6 mld last-member-query-interval, on page 886
• ipv6 mld query-interval, on page 887
• ipv6 mld query-max-response-time, on page 888
• ipv6 mld robustness, on page 889
• ipv6 mld version, on page 890
• show ipv6 mld counters, on page 891
• show ipv6 mld groups, on page 892
• show ipv6 mld groups summary, on page 894
• show ipv6 mld interface, on page 895

Cisco Business Switches 350 Series CLI Guide

883

clear ipv6 mld counters

MLD Commands

clear ipv6 mld counters

To clear the Multicast Listener Discovery (MLD) interface counters, use the clear ipv6 mld counters command
in Privileged EXEC mode.

Syntax

clear ipv6 mld counters [interface-id]

Parameters

• interface-id—(Optional) Interface Identifier.

Command Mode

Privileged EXEC mode

User Guidelines

Use the clear ipv6 mld counters command to clear the MLD counters, which keep track of the number of
joins and leaves received. If you omit the optional interface-id argument, the clear ipv6 mld counters command
clears the counters on all interfaces.

Example

The following example clears the counters for VLAN 100:

switchxxxxxx# clear ipv6 mld counters vlan 100

Cisco Business Switches 350 Series CLI Guide

884

MLD Commands

ipv6 mld last-member-query-count

ipv6 mld last-member-query-count

To configure the Multicast Listener Discovery (MLD) last member query counter, use the ipv6 mld
last-member-query-count command in Interface Configuration mode. To restore the default value, use the
no form of this command.

Syntax

ipv6 mld last-member-query-count count

no ipv6 mld last-member-query-count

Parameters

count—The number of times that group- or group-source-specific queries are sent upon receipt of a message
indicating a leave. (Range: 1–7)

Default Configuration

A value of MLD Robustness variable.

Command Mode

Interface Configuration mode

User Guidelines

Use the ipv6 mld robustness command to change the MLD last member query counter.

Example

The following example changes a value of the MLD last member query counter to 3:

switchxxxxxx(config)# interface vlan 1
ipv6 mld last-member-query-count 3
exit

Cisco Business Switches 350 Series CLI Guide

885

ipv6 mld last-member-query-interval

MLD Commands

ipv6 mld last-member-query-interval

To configure the Multicast Listener Discovery (MLD) last member query interval, use the ipv6 mld
last-member-query-interval command in Interface Configuration mode. To restore the default MLD query
interval, use the no form of this command.

Syntax

ipv6 mld last-member-query-interval milliseconds

no ipv6 mld last-member-query-interval

Parameters

• milliseconds—Interval, in milliseconds, at which MLD group-specific host query messages are sent on

the interface. (Range: 100–25500).

Default Configuration

The default MLD last member query interval is 1000 milliseconds.

Command Mode

Interface Configuration mode

User Guidelines

Use the ipv6 mld last-member-query-interval command to configure the MLD last member query interval
on an interface.

Example

The following example shows how to increase the MLD last member query interval to 1500 milliseconds:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 mld last-member-query-interval 1500
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

886

MLD Commands

ipv6 mld query-interval

ipv6 mld query-interval

To configure the frequency at which the switch sends Multicast Listener Discovery (MLD) host-query messages,
use the ipv6 mld query-interval command in Interface Configuration mode. To return to the default frequency,
use the no form of this command.

Syntax

ipv6 mld query-interval seconds

no ipv6 mld query-interval

Parameters

• seconds—Frequency, in seconds, at which the switch sends MLD query messages from the interface.

The range is from 30 to 18000.

Default Configuration

The default MLD query interval is 125 seconds.

Command Mode

Interface Configuration mode

User Guidelines

Use the ipv6 mld query-interval command to configure the frequency at which the MLD querier sends MLD
host-query messages from an interface. The MLD querier sends query-host messages to discover which
multicast groups have members on the attached networks of the router.

The query interval must be bigger than the maximum query response time.

Example

The following example shows how to increase the frequency at which the MLD querier sends MLD host-query
messages to 180 seconds:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 mld query-interval 180
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

887

ipv6 mld query-max-response-time

MLD Commands

ipv6 mld query-max-response-time

To configure the maximum response time advertised in Multicast Listener Discovery (MLD) queries, use the
ipv6 mld query-max-response-time command in Interface Configuration mode. To restore the default value,
use the no form of this command.

Syntax

ipv6 mld query-max-response-time seconds

no ipv6 mld query-max-response-time

Parameters

• seconds—Maximum response time, in seconds, advertised in MLD queries. (Range: 5–20)

Default Configuration

10 seconds.

Command Mode

Interface Configuration mode

User Guidelines

This command controls the period during which the responder can respond to an MLD query message before
the router deletes the group.

This command controls how much time the hosts have to answer an MLD query message before the router
deletes their group. Configuring a value of fewer than 10 seconds enables the router to prune groups faster.

The maximum query response time must be less than the query interval.

Note. If the hosts do not respond fast enough, they might be pruned inadvertently. Therefore, the hosts must
know to respond faster than 10 seconds (or the value you configure).

Example

The following example configures a maximum response time of 8 seconds:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 mld query-max-response-time 8
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

888

MLD Commands

ipv6 mld robustness

ipv6 mld robustness

To configure the Multicast Listener Discovery (MLD) robustness variable, use the ipv6 mld robustness
command in Interface Configuration mode. To restore the default value, use the no form of this command.

Syntax

ipv6 mld robustness count

no ipv6 mld robustness

Parameters

• count—The number of expected packet loss on a link. Parameter range. (Range: 1–7).

Default Configuration

The default value is 2.

Command Mode

Interface Configuration mode

User Guidelines

Use the ipv6 mld robustness command to change the MLD robustness variable.

Example

The following example changes a value of the MLD robustness variable to 3:

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ipv6 mld robustness 3
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

889

ipv6 mld version

ipv6 mld version

MLD Commands

To configure which version of Multicast Listener Discovery Protocol (MLD) the router uses, use the ipv6
mld version command in Interface Configuration mode. To restore the default value, use the no form of this
command.

Syntax

ipv6 mld version {1 | 2}

no ipv6 mld version

Parameters

• 1—MLD Version 1.

• 2—MLD Version 2.

Default Configuration

1

Command Mode

Interface Configuration mode

User Guidelines

Use the command to change the default version of MLD.

Example

The following example configures the router to use MLD Version 1:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 mld version 1
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

890

MLD Commands

show ipv6 mld counters

show ipv6 mld counters

To display the Multicast Listener Discovery (MLD) traffic counters, use the show ipv6 mld counters command
in User EXEC mode.

Syntax

show ipv6 mld counters [interface-id]

Parameters

• interface-id—(Optional) Interface Identifier.

Command Mode

User EXEC mode

User Guidelines

Use the show ipv6 mld counters command to check if the expected number of MLD protocol messages have
been received and sent.

If you omit the optional interface-id argument, the show ipv6 mld counters command displays counters of
all interfaces.

Example

The following example displays the MLD protocol messages received and sent:

switchxxxxxx# show ipv6 mld counters vlan 100
VLAN 100
Elapsed time since counters cleared:00:00:21

Failed received Joins: 0
Total MLDv1 received messages: 10
Total MLDv2 received messages: 0
Total invalid received messages: 0
General Sent Queries: 0
Specific Sent Queries: 0

Cisco Business Switches 350 Series CLI Guide

891

show ipv6 mld groups

MLD Commands

show ipv6 mld groups

To display the multicast groups that are directly connected to the router and that were learned through Multicast
Listener Discovery (MLD), use the show ipv6 mld groups command in User EXEC mode.

Syntax

show ipv6 mld groups [link-local | group-name | group-address | interface-id] [detail]

Parameters

• link-local—(Optional) Displays the link-local groups.

• group-name | group-address—(Optional) IPv6 address or name of the multicast group.

• interface-id—(Optional) Interface identifier.

• detail—(Optional) Displays detailed information about individual sources.

Command Mode

User EXEC mode

User Guidelines

Use the show ipv6 mld groups [detail] command to display all directly connected groups.

Use the show ipv6 mld groups link-local [detail] command to display all directly connected link-local
groups.

Use the show ipv6 mld groups [group-name | group-address] [detail] command to display one given directly
connected group.

Use the show ipv6 mld groups interface-id [detail] command to display all groups directly connected to the
given interface.

Example 1. The following is sample output from the show ipv6 mld groups command. It shows all
of the groups joined by VLAN 100:

switchxxxxxx# show ipv6 mld groups vlan 100

MLD Connected Group Membership

Expires: never - switch itself has joined the group
Group Address Interface Expires
FF02::2 VLAN 100 never
FF02::1:FF00:1 VLAN 00:10:27
FF02::1:FFAF:2C39 VLAN 100 00:09:11
FF06:7777::1 VLAN 100 00:00:26

Example 2. The following is sample output from the show ipv6 mld groups command using the
detail keyword:

switchxxxxxx# show ipv6 mld groups detail
Expires: zero value - INCLUDE state; non-zero value - EXCLUDE state
Interface: VLAN 100
Group: FF33::1:1:1
Router mode: INCLUDE

Cisco Business Switches 350 Series CLI Guide

892

MLD Commands

show ipv6 mld groups

Last reporter: 2009:5::12:1
Group Timer Expires: 00:20:11
Group source list:
Source Address Expires
2004:4::6 00:00:11
2004:4::16 00:08:11
Group: FF33::1:1:2
Router mode: EXCLUDE
Last reporter: 2008:5::2A:10
Group Timer Expires: 00:20:11
Exclude Mode Expiry (Filter) Timer: 00:10:11
Group source list:
Source Address Expires
2004:5::1 00:04:08
2004:3::1 00:04:08
2004:7::10 00:00:00
2004:50::1 00:00:00

Cisco Business Switches 350 Series CLI Guide

893

show ipv6 mld groups summary

MLD Commands

show ipv6 mld groups summary

To display the number of (*, G) and (S, G) membership reports present in the Multicast Listener Discovery
(MLD) cache, use the show ipv6 mld groups summary command in User EXEC mode.

Syntax

show ipv6 mld groups summary

Parameters

This command has no arguments or keywords.

Command Mode

User EXEC mode

User Guidelines

The show ipv6 mld groups summary command displays the number of directly connected multicast groups
(including link-local groups).

Example

The following is sample output from the show ipv6 mld groups summary command:

switchxxxxxx# show ipv6 mld groups summary
MLD Route Summary

No. of (*,G) routes = 5
No. of (S,G) routes = 0

Field Descriptions:
No. of (*,G) routes = 5—Displays the number of groups present in the MLD cache.
No. of (S,G) routes = 0—Displays the number of include and exclude mode sources present in

the MLD cache.

Cisco Business Switches 350 Series CLI Guide

894

MLD Commands

show ipv6 mld interface

show ipv6 mld interface

To display multicast-related information about an interface, use the show ipv6 mld interface command in
User EXEC mode.

Syntax

show ipv6 mld interface [interface-id]

Parameters

• interface-id—Interface identifier.

Command Mode

User EXEC mode

User Guidelines

If you omit the optional interface-id argument, the show ipv6 mld interface command displays information
about all interfaces.

Example

The following is sample output from the show ipv6 mld interface command for Ethernet interface 2/1/1:

switchxxxxxx# show ipv6 mld interface vlan 100
VLAN 100 is up

Administrative MLD Querier IPv6 address is FE80::260:3EFF:FE86:5649
Operational MLD Querier IPv6 address is FE80::260:3EFF:FE86:5649
Current MLD version is 3
Administrative MLD robustness variable is 2 seconds
Operational MLD robustness variable is 2 seconds
Administrative MLD query interval is 125 seconds
Operational MLD query interval is 125 seconds
Administrative MLD max query response time is 10 seconds
Operational MLD max query response time is 10 seconds
Administrative Last member query response interval is 1000 milliseconds
Operational Last member query response interval is 1000 milliseconds

Cisco Business Switches 350 Series CLI Guide

895

show ipv6 mld interface

MLD Commands

Cisco Business Switches 350 Series CLI Guide

896

MLD Proxy

This chapter contains the following sections:

• ipv6 mld-proxy ssm, on page 898
• ipv6 mld-proxy, on page 899
• ipv6 mld-proxy downstream protected, on page 900
• ipv6 mld-proxy downstream protected interface, on page 901
• show ipv6 mld-proxy interface, on page 902

Cisco Business Switches 350 Series CLI Guide

897

ipv6 mld-proxy ssm

MLD Proxy

ipv6 mld-proxy ssm

To define the Source Specific Multicast (SSM) range of IP Multicast addresses, use the ipv6 mld-proxy ssm
command in Global Configuration mode. To disable the SSM range, use the no form of this command.

Syntax

ipv6 mld-proxy ssm {default | range access-list}

no ipv6 mld-proxy ssm

Parameters

default—Defines the SSM range access list to FF3x::/32 (see rfc4607).

range access-list—Specifies the standard IPv6 access list name defining the SSM range.

Default Configuration

The command is disabled.

Command Mode

Global Configuration mode

User Guidelines

A new ipv6 mld-proxyssm command overrides the previous ipv6 mld-proxy ssm command.

Use the no ipv6 mld-proxy ssm command to remove all defined ranges.

Example

The following example shows how to configure SSM service for the default IPv6 address range and the IPv6
address ranges defined by access lists list1:

switchxxxxxx(config)# ipv6 access-list list1 permit FF7E:1220:2001:DB8::/64
switchxxxxxx(config)# ipv6 access-list list1 deny FF7E:1220:2001:DB1::1
switchxxxxxx(config)# ipv6 access-list list1 permit FF7E:1220:2001:DB1::/64
switchxxxxxx(config)# ipv6 pim mld-proxy range list1

Cisco Business Switches 350 Series CLI Guide

898

MLD Proxy

ipv6 mld-proxy

ipv6 mld-proxy

To add downstream interfaces to a MLD proxy tree, use the ip mld-proxy command in Interface Configuration
mode. To remove downstream from interfaces to a MLD proxy tree, use the no form of this command.

Syntax

ipv6 mld-proxy upstream-interface-id

no ipv6 mld-proxy

Parameters

• upstream-interface-id—Upstream Interface identifier.

Default Configuration

The protocol is disabled on the interface.

Command Mode

Interface Configuration mode

User Guidelines

Use the ipv6 mld-proxy command to add a downstream interface to a MLD proxy tree. If the proxy tree does
not exist it is created.

Use the no format of the command to remove the downstream interface. When the last downstream interface
is removed from the proxy tree it is deleted too.

Example 1. The following example adds a downstream interface to a MLD Proxy process with vlan
200 as its Upstream interface:

switchxxxxxx(config)# interface vlan 100
switchxxxxxx(config-if)# ipv6 mld-proxy vlan 200
switchxxxxxx(config-if)# exit

Example 2. The following example adds a range of downstream interfaces to an IGMP Proxy process
with vlan 200 as its Upstream interface:

switchxxxxxx(config)# interface range vlan 100-105
switchxxxxxx(config-if)# ipv6 mld-proxy vlan 200
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

899

ipv6 mld-proxy downstream protected

MLD Proxy

ipv6 mld-proxy downstream protected

To disable forwarding of IPv6 Multicast traffic from downstream interfaces, use the ipv6 mld-proxy
downstream protected command in Global Configuration mode. To allow forwarding from downstream
interfaces, use the no form of this command.

Syntax

ipv6 mld-proxy downstream protected

no ipv6 mld-proxy downstream protected

Parameters

This command has no arguments or keywords.

Default Configuration

Forwarding from downstream interfaces is allowed.

Command Mode

Global Configuration mode

User Guidelines

Use the pv6 mld-proxy downstream protected command to block forwarding from downstream interfaces.

Example

The following example prohibits forwarding from downstream interfaces:

switchxxxxxx(config)# ipv6 mld-proxy downstream protected

Cisco Business Switches 350 Series CLI Guide

900

MLD Proxy

ipv6 mld-proxy downstream protected interface

ipv6 mld-proxy downstream protected interface

To disable or enable forwarding of IPv6 Multicast traffic from a given downstream interface, use the ipv6
mld-proxy downstream protected interface command in Interface Configuration mode. To return to default,
use the no form of this command.

Syntax

ipv6 mld-proxy downstream protected interface {enabled | disabled}

no ipv6 mld-proxy downstream protected interface

Parameters

• enabled—Downstream interface protection on the interface is enabled. IPv6 Multicast traffic arriving

on the interface will not be forwarded.

• disabled—Downstream interface protection on the interface is disabled. IPv6 Multicast traffic arriving

on the interface will be forwarded.

Default Configuration

Global downstream protection configuration (see the ipv6 mld-proxy downstream protected command)

Command Mode

Interface Configuration mode

User Guidelines

Use the ipv6 mld-proxy downstream protected interface disabled command to block forwarding from the
given downstream interface.

Use the ipv6 mld-proxy downstream protected interface enabled command to allow forwarding from the
given downstream interface.

The command can be configured only for a downstream interface. When a downstream interface is removed
from the MLD Proxy tree the configuration is removed too.

Example

The following example prohibits forwarding from downstream interface vlan 100:

switchxxxxxx(config)# interface vlan100
switchxxxxxx(config-if)# ipv6 mld-proxy downstream protected interface enabled
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

901

show ipv6 mld-proxy interface

MLD Proxy

show ipv6 mld-proxy interface

To display information about interfaces configured for MLD Proxy, use the show ipv6 mld-proxy interface
command in User EXEC mode or Privileged EXEC mode.

Syntax

show ipv6 mld-proxy interface [interface-id]

Parameters

• interface-id—(Optional) Display MLD Proxy information about the interface.

Command Mode

User EXEC mode

Privileged EXEC mode

User Guidelines

The show ipv6 mld-proxy interface command is used to display all interfaces where the MLD Proxy is
enabled or to display the MLD Proxy configuration for a given interface.

Example 1. The following example displays MLD Proxy status on all interfaces where the MLD
Proxy is enabled:

switchxxxxxx# show ip mld-proxy interface

* - the switch is the Querier on the interface

IPv6 Forwarding is enabled
IPv6 Multicast Routing is enabled
MLD Proxy is enabled
Global Downdtream interfaces protection is disabled
SSM Access List Name: list1
Interface Type

Dicarding IPv6 Multicast

vlan 100 upstream
*vlan 102 downstream
*vlan 110 downstream
vlan 113 downstream

enabled
default
disabled

Example 2. The following is sample output from the show ipv6 mld-proxy interface command for
given upstream interface:

switchxxxxxx# show ipv6 mld-proxy interface vlan 100

* - the switch is the Querier on the interface

IPv6 Forwarding is enabled
IPv6 Multicast Routing is enabled
MLD Proxy is enabled
Global Downdtream interfaces protection is disabled
SSM Access List Name:
vlan 100 is a Upstream interface
Downstream interfaces:

*vlan 102, *vlan 110, vlan 113

Cisco Business Switches 350 Series CLI Guide

902

MLD Proxy

show ipv6 mld-proxy interface

Example 3. The following is sample output from the show ipv6 mld-proxy interface command for
given downstream interface:

switchxxxxxx# show ipv6 mld-proxy interface vlan 102
IPv6 Forwarding is enabled
IPv6 Multicast Routing is enabled
MLD Proxy is enabled
Global Downdtream interfaces protection is disabled
SSM Access List Name: default
vlan 102 is a Downstream interface
The switch is the Querier on vlan 102
Upstream interface: vlan 100

Example 4. The following is sample output from the show ipv6 mld-proxy interface command for
an interface on which IGMP Proxy is disabled:

switchxxxxxx# show ipv6 mld-proxy interface vlan 1
IPv6 Forwarding is enabled
IPv6 Multicast Routing is enabled
MLD Proxy is disabled

Cisco Business Switches 350 Series CLI Guide

903

show ipv6 mld-proxy interface

MLD Proxy

Cisco Business Switches 350 Series CLI Guide

904

MLD Snooping Commands

This chapter contains the following sections:

• ipv6 mld snooping (Global), on page 906
• ipv6 mld snooping vlan, on page 907
• ipv6 mld snooping querier, on page 908
• ipv6 mld snooping vlan querier, on page 909
• ipv6 mld snooping vlan querier election, on page 910
• ipv6 mld snooping vlan querier version, on page 911
• ipv6 mld snooping vlan mrouter , on page 912
• ipv6 mld snooping vlan mrouter interface, on page 913
• ipv6 mld snooping vlan forbidden mrouter, on page 914
• ipv6 mld snooping vlan static, on page 915
• ipv6 mld snooping vlan immediate-leave, on page 916
• show ipv6 mld snooping groups, on page 917
• show ipv6 mld snooping interface, on page 919
• show ipv6 mld snooping mrouter, on page 920

Cisco Business Switches 350 Series CLI Guide

905

ipv6 mld snooping (Global)

MLD Snooping Commands

ipv6 mld snooping (Global)

To enable IPv6 Multicast Listener Discovery (MLD) snooping, use the ipv6 mld snooping command in
Global Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 mld snooping

no ipv6 mld snooping

Default Configuration

IPv6 MLD snooping is disabled.

Command Mode

Global Configuration mode

Example

The following example enables IPv6 MLD snooping.

switchxxxxxx(config)# ipv6 mld snooping

Cisco Business Switches 350 Series CLI Guide

906

MLD Snooping Commands

ipv6 mld snooping vlan

ipv6 mld snooping vlan

To enable MLD snooping on a specific VLAN, use the ipv6 mld snooping vlan command in Global
Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 mld snooping vlan vlan-id

no ipv6 mld snooping vlan vlan-id

Parameters

• vlan-id—Specifies the VLAN.

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

MLD snooping can only be enabled on static VLANs.

MLDv1 and MLDv2 are supported.

Example

switchxxxxxx(config)# ipv6 mld snooping vlan 2

Cisco Business Switches 350 Series CLI Guide

907

ipv6 mld snooping querier

MLD Snooping Commands

ipv6 mld snooping querier

To enable globally the MLD Snooping querier, use the ipv6 mld snooping querier command in Global
Configuration mode. To disable the MLD Snooping querier globally, use the no form of this command.

Syntax

ipv6 mld snooping querier

no ipv6 mld snooping querier

Default Configuration

Enabled

Command Mode

Global Configuration mode

User Guidelines

To run the MLD Snooping querier on a VLAN, you have enable it globally and on the VLAN.

Example

The following example disables the MLD Snooping querier globally:

switchxxxxxx(config)# no ipv6 mld snooping querier

Cisco Business Switches 350 Series CLI Guide

908

MLD Snooping Commands

ipv6 mld snooping vlan querier

ipv6 mld snooping vlan querier

To enable the Internet MLD Snooping querier on a specific VLAN, use the ipv6 mld snooping vlan querier
command in Global Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 mld snooping vlan vlan-id querier

no ipv6 mld snooping vlan vlan-id querier

Parameters

• vlan-id—Specifies the VLAN.

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

The MLD Snooping querier can be enabled on a VLAN only if MLD Snooping is enabled for that VLAN.

Example

The following example enables the MLD Snooping querier on VLAN 1:

switchxxxxxx(config)# ipv6 mld snooping vlan 1 querier

Cisco Business Switches 350 Series CLI Guide

909

ipv6 mld snooping vlan querier election

MLD Snooping Commands

ipv6 mld snooping vlan querier election

To enable MLD Querier election mechanism of an MLD Snooping querier on a specific VLAN, use the ipv6
mld snooping vlan querier election command in Global Configuration mode. To disable Querier election
mechanism, use the no form of this command.

Syntax

ipv6 mld snooping vlan vlan-id querier election

no ipv6 mld snooping vlan vlan-id querier election

Parameters

• vlan-id—Specifies the VLAN.

Default Configuration

Enabled

Command Mode

Global Configuration mode

User Guidelines

Use the no form of the ipv6 mld snooping vlan querier election command to disable MLD Querier election
mechanism on a VLAN.

If the MLD Querier election mechanism is enabled, the MLD Snooping querier supports the standard MLD
Querier election mechanism specified in RFC2710 and RFC3810.

If MLD Querier election mechanism is disabled, MLD Snooping Querier delays sending General Query
messages for 60 seconds from the time it was enabled. During this time, if the switch did not receive an IGMP
query from another Querier - it starts sending General Query messages. Once the switch acts as a Querier, it
will stop sending General Query messages if it detects another Querier on the VLAN. In this case, the switch
will resume sending General Query messages if it does hear another Querier for Query Passive interval that
equals to

<Robustness>*<Query Interval> + 0.5*<Query Response Interval).

It is recommended to disable MLD Querier election mechanism if there is an IPMv6 Multicast router on the
VLAN.

Example

The following example disables MLD Snooping Querier election on VLAN 1:

switchxxxxxx(config)# no ipv6 mld snooping vlan 1 querier election

Cisco Business Switches 350 Series CLI Guide

910

MLD Snooping Commands

ipv6 mld snooping vlan querier version

ipv6 mld snooping vlan querier version

To configure the IGMP version of an IGMP querier on a specific VLAN, use the ipv6 mld snooping vlan
querier version command in Global Configuration mode. To return to the default, use the no form of this
command.

Syntax

ipv6 mld snooping vlan vlan-id querier version {1 | 2}

no ipv6 mld snooping vlan vlan-id querier version

Parameters

• vlan-id—Specifies the VLAN.

• querier version {1 | 2}—Specifies the MLD version.

Default Configuration

MLDv1.

Command Mode

Global Configuration mode

Example

he following example sets the version of the MLD Snooping Querier VLAN 1 to 2:

switchxxxxxx(config)# ipv6 mld snooping vlan 1 querier version 2

Cisco Business Switches 350 Series CLI Guide

911

ipv6 mld snooping vlan mrouter

MLD Snooping Commands

ipv6 mld snooping vlan mrouter

To enable automatic learning of Multicast router ports, use the ipv6 mld snooping vlan mrouter command
in Global Configuration mode. To remove the configuration, use the no form of this command.

Syntax

ipv6 mld snooping vlan vlan-id mrouter learn pim-dvmrp

no ipv6 mld snooping vlan vlan-id mrouter learn pim-dvmrp

Parameters

• vlan-id—Specifies the VLAN.

• pim-dvmrp—Learn Multicast router port by PIM, DVMRP and MLD messages.

Default Configuration

Learning pim-dvmrp is enabled.

Command Mode

Global Configuration mode

User Guidelines

You can execute the command before the VLAN is created.

Example

switchxxxxxx(config)# ipv6 mld snooping vlan 1 mrouter learn pim-dvmrp

Cisco Business Switches 350 Series CLI Guide

912

MLD Snooping Commands

ipv6 mld snooping vlan mrouter interface

ipv6 mld snooping vlan mrouter interface

To define a port that is connected to a Multicast router port, use the ipv6 mld snooping mrouter interface
command in Global Configuration mode. To return to the default, use the no form of this command.

Syntax

ipv6 mld snooping vlan vlan-id mrouter interface interface-list

no ipv6 mld snooping vlan vlan-id mrouter interface interface-list

Parameters

• vlan-id—Specifies the VLAN.

• interface-list—Specifies a list of interfaces. The interfaces can be from one of the following types: port

or port-channel.

Default Configuration

No ports defined

Command Mode

Global Configuration mode

User Guidelines

A port that is defined as a Multicast router port receives all MLD packets (reports and queries) as well as all
Multicast data.

You can execute the command before the VLAN is created and for a range of ports as shown in the example.

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# ipv6 mld snooping vlan 1 mrouter interface gi1/0/1-4

Cisco Business Switches 350 Series CLI Guide

913

ipv6 mld snooping vlan forbidden mrouter

MLD Snooping Commands

ipv6 mld snooping vlan forbidden mrouter

To forbid a port from being defined as a Multicast router port by static configuration or by automatic learning,
use the ipv6 mld snooping vlan forbidden mrouter command in Global Configuration mode. To return to
the default, use the no form of this command.

Syntax

ipv6 mld snooping vlan vlan-id forbidden mrouter interface interface-list

no ipv6 mld snooping vlan vlan-id forbidden mrouter interface interface-list

Parameters

• vlan-id—Specifies the VLAN.

• interface-list—Specifies list of interfaces. The interfaces can be of one of the following types: Ethernet

port or Port-channel.

Default Configuration

No forbidden ports by default

Command Mode

Global Configuration mode

User Guidelines

A port that is forbidden to be defined as a Multicast router port (mrouter port) cannot be learned dynamically
or assigned statically.

You can execute the command before the VLAN is created.

Example

switchxxxxxx(config)# ipv6 mld snooping vlan 1 forbidden mrouter interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

914

MLD Snooping Commands

ipv6 mld snooping vlan static

ipv6 mld snooping vlan static

To register a IPv6-layer Multicast address to the bridge table, and to add statically ports to the group, use the
ipv6 mld snooping vlan static command in Global Configuration mode. To return to the default, use the no
form of this command.

Syntax

ipv6 mld snooping vlan vlan-id static ipv6-address [interface interface-list]

no ipv6 mld snooping vlan vlan-id static ipv6-address [interface interface-list]

Parameters

• vlan-id—Specifies the VLAN.

• ipv6-address—Specifies the IP multicast address

• interface interface-list—(Optional) Specifies list of interfaces. The interfaces can be from one of the

following types: Ethernet port or Port-channel.

Default Configuration

No Multicast addresses are defined.

Command Mode

Global Configuration mode

User Guidelines

Static multicast addresses can only be defined on static VLANs.

You can execute the command before the VLAN is created.

You can register an entry without specifying an interface.

Using the no command without a port-list removes the entry.

Example

switchxxxxxx(config)# ipv6 mld snooping vlan 1 static FF12::3 gi1/0/1

Cisco Business Switches 350 Series CLI Guide

915

ipv6 mld snooping vlan immediate-leave

MLD Snooping Commands

ipv6 mld snooping vlan immediate-leave

To enable MLD Snooping Immediate-Leave processing on a VLAN, use the ipv6 mld snooping vlan
immediate-leave command in Global Configuration mode. To return to the default, use the no form of this
command.

Syntax

ipv6 mld snooping vlan vlan-id immediate-leave

no ipv6 mld snooping vlan vlan-id immediate-leave

Parameters

vlan-id—Specifies the VLAN ID value. (Range: 1–4094)

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

When an MLD Leave Group message is received from a host, the system removes the host port from the table
entry. After it relays the MLD queries from the Multicast router, it deletes entries periodically if it does not
receive any MLD membership reports from the Multicast clients.

MLD snooping Immediate-Leave processing allows the switch to remove an interface that sends a leave
message from the forwarding table without first sending out MAC-based general queries to the interface.

You can execute the command before the VLAN is created.

Example

switchxxxxxx(config)# ipv6 mld snooping vlan 1 immediate-leave

Cisco Business Switches 350 Series CLI Guide

916

MLD Snooping Commands

show ipv6 mld snooping groups

show ipv6 mld snooping groups

To display the multicast groups learned by the MLD snooping, use the show ipv6 mld snooping groups
EXEC mode command in User EXEC mode.

Syntax

show ipv6 mld snooping groups [vlan vlan-id] [address ipv6-multicast-address] [source ipv6-address]

Parameters

• vlan vlan-id—(Optional) Specifies the VLAN ID.

• address ipv6-multicast-address—(Optional) Specifies the IPv6 multicast address.

• source ipv6-address—(Optional) Specifies the IPv6 source address.

Command Mode

User EXEC mode

Default Configuration

Display information for all VLANs and addresses defined on them.

User Guidelines

The Include list contains the ports which are in a forwarding state for this group according to the snooping
database. In general, the Exclude list contains the ports which have issued an explicit Exclude for that specific
source in a multicast group.

The Reporters That Are Forbidden Statically list contains the list of ports which have asked to receive a
multicast flow but were defined as forbidden for that multicast group in a multicast bridge.

Note: Under certain circumstances, the Exclude list may not contain accurate information; for example, in
the case when two Exclude reports were received on the same port for the same group but for different sources,
the port will not be in the Exclude list but rather in the Include list

Example

The following example shows the output for show ipv6 mld snooping groups.

switchxxxxxx# show ipv6 mld snooping groups

VLAN
----
1
1
19
19
19

Group Address
--------
FF12::3
FF12::3
FF12::8
FF12::8
FF12::8

Source Address
---------------------
FE80::201:C9FF:FE40:8001
FE80::201:C9FF:FE40:8002
FE80::201:C9FF:FE40:8003
FE80::201:C9FF:FE40:8004
FE80::201:C9FF:FE40:8005

Include Ports
-----------
gi1/0/1
gi1/0/2
gi1/0/4
gi1/0/1
gi1/0/10-11

Exclude Ports
----------
gi1/0/2
gi1/0/3

Compatibility
Mode
-------------
1
1
2
2
2

MLD Reporters that are forbidden statically:

Cisco Business Switches 350 Series CLI Guide

917

show ipv6 mld snooping groups

MLD Snooping Commands

VLAN
----
1
19

Group Address
-----------
FF12::3
FF12::8

Source Address
---------------------
FE80::201:C9FF:FE40:8001
FE80::201:C9FF:FE40:8001

Ports
--------
gi1/0/3
gi1/0/4

Cisco Business Switches 350 Series CLI Guide

918

MLD Snooping Commands

show ipv6 mld snooping interface

show ipv6 mld snooping interface

To display the IPv6 MLD snooping configuration for a specific VLAN, use the show ipv6 mld snooping
interface EXEC mode command in User EXEC mode.

Syntax

show ipv6 mld snooping interface vlan-id

Parameters

• vlan-id—Specifies the VLAN ID.

Default Configuration

Display information for all VLANs.

Command Mode

User EXEC mode

Example

The following example displays the MLD snooping configuration for VLAN 1000.

switchxxxxxx# show ipv6 mld snooping interface 1000
MLD Snooping is globally enabled
MLD Snooping Querier is globally enabled
VLAN 1000

MLD Snooping is enabled
MLD snooping last immediate leave: enable
Automatic learning of multicast router ports is enabled
MLD Snooping Querier is enabled
MLD Snooping Querier operation state: is running
MLD Snooping Querier version: 2
MLD Snooping Querier election is enabled
MLD snooping robustness: admin 2 oper 2
MLD snooping query interval: admin 125 sec oper 125 sec
MLD snooping query maximum response: admin 10 sec oper 10 sec
MLD snooping last member query counter: admin 2 oper 2
MLD snooping last member query interval: admin 1000 msec oper 500 msec
Groups that are in MLD version 1 compatibility mode:

FF12::3, FF12::8

Cisco Business Switches 350 Series CLI Guide

919

show ipv6 mld snooping mrouter

MLD Snooping Commands

show ipv6 mld snooping mrouter

To display information on dynamically learned Multicast router interfaces for all VLANs or for a specific
VLAN, use the show ipv6 mld snooping mrouter EXEC mode command in User EXEC mode.

Syntax

show ipv6 mld snooping mrouter [interface vlan-id]

Parameters

• interface vlan-id—(Optional) Specifies the VLAN ID.

Default Configuration

Display information for all VLANs.

Command Mode

User EXEC mode

Example

The following example displays information on dynamically learned Multicast router interfaces for VLAN
1000:

switchxxxxxx# show ipv6 mld snooping mrouter interface 1000

VLAN

----

1000

Dynamic

---------

gi1/0/1

Static

---------

gi1/0/2

Forbidden

----------

gi1/0/3-4

Cisco Business Switches 350 Series CLI Guide

920

SNMP Commands

This chapter contains the following sections:

• snmp-server community , on page 922
• snmp-server community-group, on page 924
• snmp-server server , on page 926
• snmp-server source-interface, on page 927
• snmp-server source-interface-ipv6, on page 928
• snmp-server view, on page 929
• snmp-server group, on page 931
• show snmp views, on page 933
• show snmp groups, on page 934
• snmp-server user , on page 936
• show snmp users, on page 938
• snmp-server filter, on page 940
• show snmp filters, on page 941
• snmp-server host , on page 942
• snmp-server engineID local, on page 944
• snmp-server engineID remote , on page 946
• show snmp engineID, on page 947
• snmp-server enable traps, on page 948
• snmp-server trap authentication, on page 949
• snmp-server contact, on page 950
• snmp-server location, on page 951
• snmp-server set, on page 952
• snmp trap link-status, on page 953
• show snmp, on page 954

Cisco Business Switches 350 Series CLI Guide

921

snmp-server community

SNMP Commands

snmp-server community

To set the community access string (password) that permits access to SNMP commands (v1 and v2), use the
snmp-server community Global Configuration mode command. This is used for SNMP commands, such as
GETs and SETs.

This command configures both SNMP v1 and v2.

To remove the specified community string, use the no form of this command.

Syntax

snmp-server community community-string [ro | rw | su] [ip-address | ipv6-address] [mask mask | prefix
prefix-length] [view view-name] [type {router | oob}]

no snmp-server community community-string [ip-address] [type {router | oob}]

Parameters

• community-string—Define the password that permits access to the SNMP protocol. (Range: 1–20

characters).

• ro—(Optional) Specifies read-only access (default)

• rw—(Optional) Specifies read-write access

• su—(Optional) Specifies SNMP administrator access

• ip-address—(Optional) Management station IP address. The default is all IP addresses. This can be an

IPv4 address, IPv6 or IPv6z address.

• mask—(Optional) Specifies the mask of the IPv4 address. This is not a network mask, but rather a mask

that defines which bits of the packet’s source address are compared to the configured IP address. If
unspecified, it defaults to 255.255.255.255. The command returns an error if the mask is specified without
an IPv4 address.

• prefix-length—(Optional) Specifies the number of bits that comprise the IPv4 address prefix. If

unspecified, it defaults to 32. The command returns an error if the prefix-length is specified without an
IPv4 address.

• view view-name—(Optional) Specifies the name of a view configured using the command snmp-server
view, on page 929 (no specific order of the command configurations is imposed on the user). The view
defines the objects available to the community. It is not relevant for su, which has access to the whole
MIB. If unspecified, all the objects, except the community-table and SNMPv3 user and access tables ,
are available. (Range: 1–30 characters)

• type router—(Optional) Indicates whether the IP address is on the out-of-band or in-band network.

Default Configuration

No community is defined

Command Mode

Global Configuration mode

Cisco Business Switches 350 Series CLI Guide

922

SNMP Commands

snmp-server community

User Guidelines

The logical key of the command is the pair (community, ip-address). If ip-address is omitted, the key is
(community, All-IPs). This means that there cannot be two commands with the same community, ip address
pair.

The view-name is used to restrict the access rights of a community string. When a view-name is specified,
the software:

• Generates an internal security-name.

• Maps the internal security-name for SNMPv1 and SNMPv2 security models to an internal group-name.

• Maps the internal group-name for SNMPv1 and SNMPv2 security models to view-name (read-view and

notify-view always, and for rw for write-view also),

Example

Defines a password for administrator access to the management station at IP address 1.1.1.121 and mask
255.0.0.0.

switchxxxxxx(config)# snmp-server community abcd su 1.1.1.121 mask 255.0.0.0

Cisco Business Switches 350 Series CLI Guide

923

snmp-server community-group

SNMP Commands

snmp-server community-group

To configure access rights to a user group, use snmp-server community-group. The group must exist in
order to be able to specify the access rights. This command configures both SNMP v1 and v2.

Syntax

snmp-server community-group community-string group-name [ip-address | ipv6-address] [mask mask |
prefix prefix-length] [type {router | oob}]

Parameters

• community-string—Define the password that permits access to the SNMP protocol. (Range: 1–20

characters).

• group-name—This is the name of a group configured using snmp-server group, on page 931 with v1 or
v2 (no specific order of the two command configurations is imposed on the user). The group defines the
objects available to the community. (Range: 1–30 characters)

• ip-address—(Optional) Management station IP address. The default is all IP addresses. This can be an

IPv4 address, IPv6 or IPv6z address.

• mask—(Optional) Specifies the mask of the IPv4 address. This is not a network mask, but rather a mask

that defines which bits of the packet’s source address are compared to the configured IP address. If
unspecified, it defaults to 255.255.255.255. The command returns an error if the mask is specified without
an IPv4 address.

• prefix-length—(Optional) Specifies the number of bits that comprise the IPv4 address prefix. If

unspecified, it defaults to 32. The command returns an error if the prefix-length is specified without an
IPv4 address.

• type router—(Optional) Indicates whether the IP address is on the out-of-band or in-band network.

Default Configuration

No community is defined

Command Mode

Global Configuration mode

User Guidelines

The group-name is used to restrict the access rights of a community string. When a group-name is specified,
the software:

• Generates an internal security-name.

• Maps the internal security-name for SNMPv1 and SNMPv2 security models to the group-name.

Cisco Business Switches 350 Series CLI Guide

924

SNMP Commands

snmp-server community-group

Example

Defines a password tom for the group abcd that enables this group to access the management station 1.1.1.121
with prefix 8.

switchxxxxxx(config)# snmp-server community-group tom abcd 1.1.1.122 prefix 8

Cisco Business Switches 350 Series CLI Guide

925

snmp-server server

SNMP Commands

snmp-server server

To enable the device to be configured by the SNMP protocol, use the snmp-server server Global Configuration
mode command. To disable this function, use the no form of this command.

Syntax

snmp-server server

no snmp-server server

Parameters

This command has no arguments or keywords.

Default Configuration

Disabled

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# snmp-server server

Cisco Business Switches 350 Series CLI Guide

926

SNMP Commands

snmp-server source-interface

snmp-server source-interface

To specify the interface from which a Simple Network Management Protocol (SNMP) trap originates the
informs or traps, use the snmp-server source-interface command in Global Configuration mode. To returned
to the default, use the no form of this command.

Syntax

snmp-server source-interface {traps | informs} interface-id

no snmp-server source-interface [traps | informs]

Parameters

• traps—Specifies the SNMP traps interface.

• informs—Specifies the SNMP informs.

• interface-id—Specifies the source interface.

Default Configuration

The source IPv4 address is the IPv4 address defined on the outgoing interface and belonging to next hop IPv4
subnet.

If no parameters are specified in no snmp-server source-interface, the default is both traps and informs.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface, the interface IP address belonging to next hop IPv4 subnet is
applied.

If the source interface is not the outgoing interface, the minimal IPv4 address defined on the source interface
is applied.

If there is no available IPv4 source address, a SYSLOG message is issued when attempting to send an SNMP
trap or inform.

Use the no snmp-server source-interface traps command to remove the source interface for SNMP traps.

Use the no snmp-server source-interface informs command to remove the source interface for SNMP
informs.

Use the no snmp-server source-interface command to remove the source interface for SNMP traps and
informs.

Example

The following example configures the VLAN 10 as the source interface for traps.

switchxxxxxx(config)# snmp-server source-interface traps vlan 100

Cisco Business Switches 350 Series CLI Guide

927

snmp-server source-interface-ipv6

SNMP Commands

snmp-server source-interface-ipv6

To specify the interface from which a Simple Network Management Protocol (SNMP) trap originates the
informs or traps, use the snmp-server source-interface command in Global Configuration mode. To returned
to the default, use the no form of this command.

Syntax

snmp-server source-interface-ipv6 {traps | informs} interface-id

no snmp-server source-interface-ipv6 [traps | informs]

Parameters

• traps—Specifies the SNMP traps interface.

• informs—Specifies the SNMP traps informs.

• interface-id—Specifies the source interface.

Default Configuration

The IPv6 source address is the IPv6 address of the outgoing interface and selected in accordance with RFC6724.

If no parameters are specified in no snmp-server source-interface, the default is both traps and informs.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface, the IPv6 address defined on the interfaces is selected in
accordance with RFC 6724.

If the source interface is not the outgoing interface, the minimal IPv6 address defined on the source interface
with the scope of the destination IPv6 address is applied.

If there is no available IPv6 source address, a SYSLOG message is issued when attempting to send an SNMP
trap or inform.

Use the no snmp-server source-interface-ipv6 traps command to remove the source IPv6 interface for
SNMP traps.

Use the no snmp-server source-interface-ipv6 informs command to remove the source IPv6 interface for
SNMP informs.

Use the no snmp-server source-interface-ipv6 command to remove the source IPv6 interface for SNMP
traps and informs.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# snmp-server source-interface-ipv6 traps vlan 100

Cisco Business Switches 350 Series CLI Guide

928

SNMP Commands

snmp-server view

snmp-server view

To create or update an SNMP view, use the snmp-server view Global Configuration mode command. To
remove an SNMP view, use the no form of this command.

Syntax

snmp-server view view-name oid-tree {included | excluded}

no snmp-server view view-name [oid-tree]

Parameters

• view-name—Specifies the name for the view that is being created or updated. (Length: 1–30 characters)

• included—Specifies that the view type is included.

• excluded—Specifies that the view type is excluded.

• oid-tree—(Optional) Specifies the ASN.1 subtree object identifier to be included or excluded from the
view. To identify the subtree, specify a text string consisting of numbers, such as 1.3.6.2.4, or a word,
such as System and, optionally, a sequence of numbers. Replace a single sub-identifier with the asterisk
(*) wildcard to specify a subtree family; for example 1.3.*.4. This parameter depends on the MIB being
specified.

Default Configuration

The following views are created by default:

• Default—Contains all MIBs except for those that configure the SNMP parameters themselves.

• DefaultSuper—Contains all MIBs.

Command Mode

Global Configuration mode

User Guidelines

This command can be entered multiple times for the same view.

The command’s logical key is the pair (view-name, oid-tree). Therefore there cannot be two commands with
the same view-name and oid-tree.

The number of views is limited to 64.

Default and DefaultSuper views are reserved for internal software use and cannot be deleted or modified.

Example

The following example creates a view that includes all objects in the MIB-II system group except for sysServices
(System 7) and all objects for interface 1 in the MIB-II interface group (this format is specified on the parameters
specified in ifEntry).

Cisco Business Switches 350 Series CLI Guide

929

snmp-server view

SNMP Commands

switchxxxxxx(config)# snmp-server view user-view system included
switchxxxxxx(config)# snmp-server view user-view system.7 excluded
switchxxxxxx(config)# snmp-server view user-view ifEntry.*.1 included

Cisco Business Switches 350 Series CLI Guide

930

SNMP Commands

snmp-server group

snmp-server group

To configure an SNMP group, use the snmp-server group Global Configuration mode command. Groups
are used to map SNMP users to SNMP views. To remove an SNMP group, use the no form of this command.

Syntax

snmp-server group groupname {v1 | v2 | v3 {noauth | auth | priv} [notify notifyview]} [read readview]
[write writeview]

no snmp-server group groupname {v1 | v2 | v3 [noauth | auth | priv]}

Parameters

• group groupname—Specifies the group name. (Length: 1–30 characters)

• v1—Specifies the SNMP Version 1 security model.

• v2—Specifies the SNMP Version 2 security model.

• v3—Specifies the SNMP Version 3 security model.

• noauth—Specifies that no packet authentication will be performed. Applicable only to the SNMP version

3 security model.

• auth—Specifies that packet authentication without encryption will be performed. Applicable only to the

SNMP version 3 security model.

• priv—Specifies that packet authentication with encryption will be performed. Applicable only to the
SNMP version 3 security model. Note that creation of SNMPv3 users with both authentication and
privacy must be done in the GUI. All other users may be created in the CLI.

• notify notifyview—(Optional) Specifies the view name that enables generating informs or a traps. An

inform is a trap that requires acknowledgment. Applicable only to the SNMP version 3 security model.
(Length: 1–32 characters)

• read readview—(Optional) Specifies the view name that enables viewing only. (Length: 1–32 characters)

• write writeview—(Optional) Specifies the view name that enables configuring the agent. (Length: 1–32

characters)

Default Configuration

No group entry exists.

If notifyview is not specified, the notify view is not defined.

If readview is not specified, all objects except for the community-table and SNMPv3 user and access tables
are available for retrieval.

If writeview is not specified, the write view is not defined.

Command Mode

Global Configuration mode

Cisco Business Switches 350 Series CLI Guide

931

snmp-server group

SNMP Commands

User Guidelines

The group defined in this command is used in the snmp-server user , on page 936 command to map users to
the group. These users are then automatically mapped to the views defined in this command.

The command logical key is (groupname, snmp-version, security-level). For snmp-version v1/v2 the
security-level is always noauth.

Example

The following example attaches a group called user-group to SNMPv3, assigns the encrypted security level
to the group, and limits the access rights of a view called user-view to read-only. User tom is then assigned
to user-group. So that user tom has the rights assigned in user-view.

switchxxxxxx(config)# snmp-server group user-group v3 priv read user-view
switchxxxxxx(config)# snmp-server user tom user-group v3

Cisco Business Switches 350 Series CLI Guide

932

SNMP Commands

show snmp views

show snmp views

To display SNMP views, use the show snmp views Privileged EXEC mode command.

Syntax

show snmp views [viewname]

Parameters

viewname—(Optional) Specifies the view name. (Length: 1–30 characters)

Default Configuration

If viewname is not specified, all views are displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays the configured SNMP views.

switchxxxxxx# show snmp views

Name

OID Tree

Type

----------------
Default
Default
DefaultSuper

----------------------
iso
snmpNotificationMIB
iso

----------
Included
Excluded
Included

Cisco Business Switches 350 Series CLI Guide

933

show snmp groups

SNMP Commands

show snmp groups

To display the configured SNMP groups, use the show snmp groups Privileged EXEC mode command.

Syntax

show snmp groups [groupname]

Parameters

groupname—(Optional) Specifies the group name. (Length: 1–30 characters)

Default Configuration

Display all groups.

Command Mode

Privileged EXEC mode

Example

The following example displays the configured SNMP groups.:

switchxxxxxx# show snmp groups

Name

Security

Views

-------------
user-group
managers-group

Model
-----
V2
V2

Level
----
no_auth
no_auth

Read
-------
Default
Default

Write
-------
""
Default

Notify
-------
""
""

The following table describes significant fields shown above.

Field

Name

Security

Security

Description

Group name.

Model

SNMP model in use (v1, v2 or v3).

Level

Packet security. Applicable to SNMP v3 security
only

.

Cisco Business Switches 350 Series CLI Guide

934

SNMP Commands

show snmp groups

Field

Views

Description

Read

Write

Notify

View name enabling viewing the agent contents.
If unspecified, all objects except the
community-table and SNMPv3 user and access
tables are available.

View name enabling data entry and managing the
agent contents.

View name enabling specifying an inform or a
trap.

Cisco Business Switches 350 Series CLI Guide

935

snmp-server user

SNMP Commands

snmp-server user

To configure a new SNMP user, use the snmp-server user Global Configuration mode command. To remove
a user, use the no form of the command. To enter the authentication and privacy passwords in encrypted form
(see SSD), use the encrypted form of this command.

Syntax

snmp-server user username groupname {v1 | v2c | [remote host] v3[auth { sha | sha224| sha256| sha384|
sha512} auth-password [priv priv-password]]}

encrypted snmp-server user username groupname {v1 | v2c | [remote host] v3[auth { sha | sha224| sha256|
sha384| sha512} encrypted-auth-password [priv encrypted-priv-password]]}

no snmp-server user username {v1 | v2c | [remote host] v3}

Parameters

• username—Define the name of the user on the host that connects to the agent. (Range: Up to 20

characters).

• groupname—The name of the group to which the user belongs. The group should be configured using
the command snmp-server group, on page 931 with v1 or v2c parameters (no specific order of the 2
command configurations is imposed on the user). (Range: Up to 30 characters)

• v1—Specifies that the user is a v1 user.

• v2c—Specifies that the user is a v2c user..

• v3—Specifies that the user is a v3 user..

• remote host—(Optional) IP address (IPv4, IPv6 or IPv6z) or host name of the remote SNMP host.

• auth—(Optional) Specifies which authentication level is to be used.

Sha—(Optional) Specifies the HMAC-SHA-96 authentication level.

Sha224—(Optional) Specifies the HMAC-SHA-224-128 authentication level.

Sha256—(Optional) Specifies the HMAC-SHA-256-192 authentication level.

Sha384—(Optional) Specifies the HMAC-SHA-384-256 authentication level.

Sha512—(Optional) Specifies the HMAC-SHA-512-384 authentication level.

• auth-password—(Optional) Specifies the authentication password. Range: Up to 32 characters.

• encrypted-auth-password—(Optional) Specifies the authentication password in encrypted format.

• priv priv-password—(Optional) specifies private (priv) encryption and the privacy password (Range:
Up to 32 characters). The encryption algorithm used is Advanced Encryption Standard (AES) privacy
algorithm in Cipher Feedback Mode (CFB) using 128 bits encryption keys),

• encrypted-priv-password—(Optional) Specifies the privacy password in encrypted format.

Cisco Business Switches 350 Series CLI Guide

936

SNMP Commands

snmp-server user

Default Configuration

No group entry exists.

Command Mode

Global Configuration mode

User Guidelines

For SNMP v1 and v2, this command performs the same actions as snmp-server community-group, except
that snmp-server community-group configures both v1 and v2 at the same time. With this command, you
must perform it once for v1 and once for v2.

A local SNMP EngineID must be defined in order to add SNMPv3 users to the device. For remote hosts users
a remote SNMP EngineID is also required.

Changing or removing the value of snmpEngineID deletes the SNMPv3 users’ database.

The logical key of the command is username.

Configuring a remote host is required in order to send informs to that host, because an inform is a trap that
requires acknowledgment. A configured remote host is also able to manage the device (besides getting the
informs).

To configure a remote user, specify the IP address for the remote SNMP agent of the device where the user
resides. Also, before you configure remote users for a particular agent, configure the SNMP engine ID, using
the snmp-server engineID remote , on page 946 command. The remote agent's SNMP engine ID is needed
when computing the authentication and privacy digests from the password. If the remote engine ID is not
configured first, the configuration command fails.

Since the same group may be defined several times, each time with different version or different access level
(noauth, auth or auth & priv), when defining a user it is not sufficient to specify the group name, rather you
must specify group name, version and access level for complete determination of how to handle packets from
this user.

Example

This example assigns user tom to group abcd using SNMP v1 and v2c. . User jerry is assigned to group efgh
using SNMP v3.

switchxxxxxx(config)# snmp-server user tom acbd v1
switchxxxxxx(config)# snmp-server user tom acbd v2c
switchxxxxxx(config)# snmp-server user jerry efgh v3 auth sha pass1234

Cisco Business Switches 350 Series CLI Guide

937

show snmp users

SNMP Commands

show snmp users

To display the configured SNMP users, use the show snmp users Privileged EXEC mode command.

Syntax

show snmp users [username]

Parameters

username—(Optional) Specifies the user name. (Length: 1–30 characters)

Default Configuration

Display all users.

Command Mode

Privileged EXEC mode

Example

The following examples displays the configured SNMP users:

switchxxxxxx# show snmp users
User name

Group name
Authentication Method
Privacy Method
Remote
Auth Password
Priv Password

User name

Group name
Authentication Method
Privacy Method
Remote
Auth Password
Priv Password

User name

:u1rem
:group1

: None
: None

:11223344556677
:
:
: qqq
: www
: SHA256
: None
:
: helloworld1234567890987665
:
: hello
: world

Group name
Authentication Method
Privacy Method
Remote
Auth Password (encrypted): Z/tC3UF5j0pYfmXm8xeMvcIOQ6LQ4GOACCGYLRdAgOE6XQKTC

: SHA256
: AES-128

:

Priv Password (encrypted) : kN1ZHzSLo6WWxlkuZVzhLOo1gI5waaNf7Vq6yLBpJdS4N68tL

qMlrnpWuHraRlZj

User name

Group name
Authentication Method
Privacy Method
Remote
Auth Password (encrypted)
Priv Password (encrypted)

User name

Group name
Authentication Method

1tbTRSz2H4c4Q4o
: u1noAuth
: group1
: None
: None
:
:
:
: u1OnlyAuth
: group1

: SHA1

Cisco Business Switches 350 Series CLI Guide

938

SNMP Commands

show snmp users

Privacy Method
Remote
Auth Password (encrypted): 8nPzy2hzuba9pG3iiC/q0451RynUn7kq94L9WORFrRM=
Priv Password (encrypted) :

: None
:

Cisco Business Switches 350 Series CLI Guide

939

snmp-server filter

SNMP Commands

snmp-server filter

To create or update an SNMP server notification filter, use the snmp-server filter Global Configuration mode
command. To remove a notification filter, use the no form of this command.

Syntax

snmp-server filter filter-name oid-tree {included | excluded}

no snmp-server filter filter-name [oid-tree]

Parameters

• filter-name—Specifies the label for the filter record that is being updated or created. The name is used

to reference the filter in other commands. (Length: 1–30 characters)

• oid-tree—Specifies the ASN.1 subtree object identifier to be included or excluded from the view. To
identify the subtree, specify a text string consisting of numbers, such as 1.3.6.2.4, or a word, such as
System. Replace a single sub-identifier with the asterisk (*) wildcard to specify a subtree family; for
example, 1.3.*.4.

• included—Specifies that the filter type is included.

• excluded—Specifies that the filter type is excluded.

Default Configuration

No view entry exists.

Command Mode

Global Configuration mode

User Guidelines

This command can be entered multiple times for the same filter. If an object identifier is included in two or
more lines, later lines take precedence. The command's logical key is the pair (filter-name, oid-tree).

Example

The following example creates a filter that includes all objects in the MIB-II system group except for sysServices
(System 7) and all objects for interface 1 in the MIB-II interfaces group (this format depends on the parameters
defined in ifEntry).

switchxxxxxx(config)# snmp-server filter f1 system included
switchxxxxxx(config)# snmp-server filter f2 system.7 excluded
switchxxxxxx(config)# snmp-server filter f3 ifEntry.*.1 included

Cisco Business Switches 350 Series CLI Guide

940

SNMP Commands

show snmp filters

show snmp filters

To display the defined SNMP filters, use the show snmp filters Privileged EXEC mode command.

Syntax

show snmp filters [filtername]

Parameters

filtername—Specifies the filter name. (Length: 1–30 characters)

Default Configuration

If filtername is not defined, all filters are displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays the configured SNMP filters.

switchxxxxxx# show snmp filters user-filter

Name

OID Tree

Type

------------
user-filter
user-filter
user-filter

---------------------
1.3.6.1.2.1.1
1.3.6.1.2.1.1.7
1.3.6.1.2.1.2.2.1.*.1

---------
Included
Excluded
Included

Cisco Business Switches 350 Series CLI Guide

941

snmp-server host

SNMP Commands

snmp-server host

To configure the host for SNMP notifications: (traps/informs), use the snmp-server host Global Configuration
mode command. To remove the specified host, use the no form of this command.

Syntax

snmp-server host {host-ip | hostname} [traps | informs] [version {1 | 2c | 3 [auth | noauth | priv]}]
community-string [udp-port port] [filter filtername] [timeout seconds] [retries retries]

no snmp-server host {ip-address | hostname} [traps | informs] [version {1 | 2c | 3}]

Parameters

• host-ip—IP address of the host (the targeted recipient). The default is all IP addresses. This can be an

IPv4 address, IPv6 or IPv6z address.

• hostname—Hostname of the host (the targeted recipient). (Range: 1–158 characters. Maximum label

size of each part of the host name: 63)

• trap—(Optional) Sends SNMP traps to this host (default).

• informs—(Optional) Sends SNMP informs to this host. An inform is a trap that requires acknowledgement.

Not applicable to SNMPv1.

• version 1—(Optional) SNMPv1 traps are used.

• version 2c—(Optional) SNMPv2 traps or informs are used

• version 3—(Optional) SNMPv2 traps or informs are used

• Authentication options are available for SNMP v3 only. The following options are available:

noauth—(Optional) Specifies no authentication of a packet.

auth—(Optional) Specifies authentication of a packet without encryption.

priv—(Optional) Specifies authentication of a packet with encryption.

• community-string—Password-like community string sent with the notification operation. (Range: 1–20
characters). For v1 and v2, any community string can be entered here. For v3, the community string must
match the user name defined in snmp-server user (ISCLI) command for v3.

• udp-port port—(Optional) UDP port of the host to use. The default is 162. (Range: 1–65535)

• filter filtername—(Optional) Filter for this host. If unspecified, nothing is filtered. The filter is defined
using snmp-server filter (no specific order of commands is imposed on the user). (Range: Up to 30
characters)

• timeout seconds—(Optional) (For informs only) Number of seconds to wait for an acknowledgment

before resending informs. The default is 15 seconds. (Range: 1–300)

• retries retries—(Optional) (For informs only) Maximum number of times to resend an inform request,

when a response is not received for a generated message. The default is 3. (Range: 0–255)

Cisco Business Switches 350 Series CLI Guide

942

SNMP Commands

snmp-server host

Default Configuration

Version: SNMP V1

Type of notification: Traps

udp-port: 162

If informs are specified, the default for retries: 3

Timeout: 15

Command Mode

Global Configuration mode

User Guidelines

The logical key of the command is the list (ip-address/hostname, traps/informs, version).

When configuring SNMP v1 or v2 notifications recipient, the software automatically generates a notification
view for that recipient for all MIBs.

For SNMPv3 the software does not automatically create a user or a notify view.

, use the commands snmp-server user (ISCLI) and snmp-server group to create a user or a group.

Example

The following defines a host at the IP address displayed.

switchxxxxxx(config)# snmp-server host 1.1.1.121 abc

Cisco Business Switches 350 Series CLI Guide

943

snmp-server engineID local

SNMP Commands

snmp-server engineID local

To specify the SNMP engineID on the local device for SNMP v3, use the snmp-server engineID local Global
Configuration mode command. To remove this engine ID, use the no form of this command.

Syntax

snmp-server engineID local {engineid-string | default}

no snmp-server engineID local

Parameters

• engineid-string—Specifies a concatenated hexadecimal character string identifying the engine ID. Each
byte in a hexadecimal character string is two hexadecimal digits. Bytes are separated by a period or colon.
If an odd number of hexadecimal digits are entered, the system automatically prefixes the digit 0 to the
string. (Length: 5–32 characters, 9–64 hexadecimal digits)

• default—Specifies that the engine ID is created automatically based on the device MAC address.

Default Configuration

The default engine ID is defined per standard as:

• First 4 octets: First bit = 1, the rest is the allocated IANA Enterprise number.

• Fifth octet: Set to 3 to indicate the MAC address that follows.

• Last 6 octets: The device MAC address.

Command Mode

Global Configuration mode

User Guidelines

To use SNMPv3, an engine ID must be specified for the device. Any ID can be specified or the default string,
which is generated using the device MAC address, can be used.

As the engineID should be unique within an administrative domain, the following guidelines are recommended:

• Configure a non-default EngineID, and verify that it is unique within the administrative domain.

• Changing or removing the value of snmpEngineID deletes the SNMPv3 users database.

• The SNMP EngineID cannot be all 0x0 or all 0xF or 0x000000001.

Example

The following example enables SNMPv3 on the device and sets the device local engine ID to the default
value.

switchxxxxxx(config)# snmp-server engineid local default
The engine-id must be unique within your administrative domain.

Cisco Business Switches 350 Series CLI Guide

944

SNMP Commands

snmp-server engineID local

Do you wish to continue? [Y/N]Y
The SNMPv3 database will be erased. Do you wish to continue? [Y/N]Y

Cisco Business Switches 350 Series CLI Guide

945

snmp-server engineID remote

SNMP Commands

snmp-server engineID remote

To specify the SNMP engine ID of a remote SNMP device, use the snmp-server engineID remote Global
Configuration mode command. To remove the configured engine ID, use the no form of this command.

Syntax

snmp-server engineID remote ip-address engineid-string

no snmp-server engineID remote ip-address

Parameters

• ip-address —IPv4, IPv6 or IPv6z address of the remote device.

• engineid-string—The character string that identifies the engine ID. The engine ID is a concatenated

hexadecimal string. Each byte in hexadecimal character strings is two hexadecimal digits. Each byte can
be separated by a period or colon. If the user enters an odd number of hexadecimal digits, the system
automatically prefixes the hexadecimal string with a zero. (Range: engineid-string5–32 characters. 9–64
hexadecimal digits)

Default Configuration

The remote engineID is not configured by default.

Command Mode

Global Configuration mode

User Guidelines

A remote engine ID is required when an SNMP version 3 inform is configured. The remote engine ID is used
to compute the security digest for authenticating and encrypting packets sent to a user on the remote host.

Example

switchxxxxxx(config)# snmp-server engineID remote 1.1.1.1 11:AB:01:CD:23:44

Cisco Business Switches 350 Series CLI Guide

946

SNMP Commands

show snmp engineID

show snmp engineID

To display the local SNMP engine ID, use the show snmp engineID Privileged EXEC mode command.

Syntax

show snmp engineID

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

Example

The following example displays the SNMP engine ID.

switchxxxxxx# show snmp engineID

Local SNMP engineID: 08009009020C0B099C075878

IP address Remote SNMP engineID

----------- -------------------------------

172.16.1.1 08009009020C0B099C075879

Cisco Business Switches 350 Series CLI Guide

947

snmp-server enable traps

SNMP Commands

snmp-server enable traps

To enable the device to send SNMP traps, use the snmp-server enable traps Global Configuration mode
command. To disable all SNMP traps, use the no form of the command.

Syntax

snmp-server enable traps

no snmp-server enable traps

Default Configuration

SNMP traps are enabled.

Command Mode

Global Configuration mode

User Guidelines

If no snmp-server enable traps has been entered, you can enable failure traps by using snmp-server trap
authentication, on page 949 as shown in the example.

Example

The following example enables SNMP traps except for SNMP failure traps.

switchxxxxxx(config)# snmp-server enable traps
switchxxxxxx(config)# no snmp-server trap authentication

Cisco Business Switches 350 Series CLI Guide

948

SNMP Commands

snmp-server trap authentication

snmp-server trap authentication

To enable the device to send SNMP traps when authentication fails, use the snmp-server trap authentication
Global Configuration mode command. To disable SNMP failed authentication traps, use the no form of this
command.

Syntax

snmp-server trap authentication

no snmp-server trap authentication

Parameters

This command has no arguments or keywords.

Default Configuration

SNMP failed authentication traps are enabled.

Command Mode

Global Configuration mode

Example

The following example disables all SNMP traps and enables only failed authentication traps.

switchxxxxxx(config)# no snmp-server enable traps
switchxxxxxx(config)# snmp-server trap authentication

Cisco Business Switches 350 Series CLI Guide

949

snmp-server contact

SNMP Commands

snmp-server contact

To set the value of the system contact (sysContact) string, use the snmp-server contact Global Configuration
mode command. To remove the system contact information, use the no form of the command.

Syntax

snmp-server contact text

no snmp-server contact

Parameters

text—Specifies system contact information. (Length: 1–160 characters)

Default Configuration

None

Command Mode

Global Configuration mode

Example

The following example sets the system contact information to Technical_Support.

switchxxxxxx(config)# snmp-server contact Technical_Support

Cisco Business Switches 350 Series CLI Guide

950

SNMP Commands

snmp-server location

snmp-server location

To set the value of the system location string, use the snmp-server location Global Configuration mode
command. To remove the location string, use the no form of this command.

Syntax

snmp-server location text

no snmp-server location

Parameters

text—Specifies the system location information. (Length: 1–160 characters)

Default Configuration

None

Command Mode

Global Configuration mode

Example

The following example sets the device location to New_York.

switchxxxxxx(config)# snmp-server location New_York

Cisco Business Switches 350 Series CLI Guide

951

snmp-server set

snmp-server set

SNMP Commands

To define SNMP MIB commands in the configuration file if a MIB performs an action for which there is no
corresponding CLI command, use the snmp-server set Global Configuration mode command.

Syntax

snmp-server set variable-name name value [name2 value2...]

Parameters

• variable-name—Specifies an SNMP MIB variable name, which must be a valid string.

• name value—Specifies a list of names and value pairs. Each name and value must be a valid string. In
the case of scalar MIBs, there is only a single name-value pair. In the case of an entry in a table, there is
at least one name-value pair, followed by one or more fields.

Command Mode

Global Configuration mode

User Guidelines

Although the CLI can set any required configuration, there might be a situation where an SNMP user sets a
MIB variable that does not have an equivalent CLI command.

Example

The following example configures the scalar MIB sysName with the value TechSupp.

switchxxxxxx(config)# snmp-server set sysName sysname TechSupp

Cisco Business Switches 350 Series CLI Guide

952

SNMP Commands

snmp trap link-status

snmp trap link-status

To enable link-status generation of SNMP traps, use the snmp trap link-status Interface Configuration mode
command. To disable generation of link-status SNMP traps, use the no form of this command.

Syntax

snmp trap link-status

no snmp trap link-status

Parameters

This command has no arguments or keywords.

Default Configuration

Generation of SNMP link-status traps is enabled

Command Mode

Interface Configuration mode

Example

The following example disables generation of SNMP link-status traps.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# # no snmp trap link-status

Cisco Business Switches 350 Series CLI Guide

953

show snmp

show snmp

SNMP Commands

To display the SNMP status, use the show snmp Privileged EXEC mode command.

Syntax

show snmp

Parameters

This command has no arguments or keywords

Default Configuration

None

Command Mode

Privileged EXEC mode

Example

The following example displays the SNMP communications status.

switchxxxxxx# show snmp
SNMP is enabled
SNMP traps Source IPv4 interface: vlan 1
SNMP informs Source IPv4 interface: vlan 11
SNMP traps Source IPv6 interface: vlan 10
SNMP informs Source IPv6 interface:

Community-String
----------------
public
private
private

Community-Access
----------------
read only
read write
su

View name
------------
user-view
Default
DefaultSuper

IP Address
----------
All
172.16.1.1/10
172.16.1.1

Mask
----

Community-string
----------------
public

Group name
----------
user-group

IP Address
----------
All

Mask

Type
------
Router

Traps are enabled.
Authentication trap is enabled.
Version 1,2 notifications

Target Address
-----------
192.122.173.42
192.122.173.42

Type
----
Trap
Inform

Community
--------
public
public

Version
-------
2
2

UDP
Port
----
162
162

Filter
Name
------

TO
Sec
---
15
15

Retries
-------
3
3

Version 3 notifications

Cisco Business Switches 350 Series CLI Guide

954

SNMP Commands

show snmp

Target Address
-----------
192.122.173.42

Type
----
Inform

Username
--------
Bob

Security
Level
-------
Priv

UDP
Port
----
162

Filter
name
-----

TO
Sec
---
15

Retries
-------
3

System Contact: Robert
System Location: Marketing

The following table describes the significant fields shown in the display.

Field

Description

Community-string

The community access string permitting access to SNMP.

Community-access

The permitted access type—read-only, read-write, super access.

IP Address

The management station IP Address.

Target Address

The IP address of the targeted recipient.

Version

The SNMP version for the sent trap.

Cisco Business Switches 350 Series CLI Guide

955

show snmp

SNMP Commands

Cisco Business Switches 350 Series CLI Guide

956

PHY Commands

This chapter contains the following sections:

• test cable-diagnostics tdr, on page 958
• show cable-diagnostics tdr, on page 959
• show cable-diagnostics cable-length, on page 960
• show fiber-ports optical-transceiver, on page 961

Cisco Business Switches 350 Series CLI Guide

957

test cable-diagnostics tdr

PHY Commands

test cable-diagnostics tdr

To use Time Domain Reflectometry (TDR) technology to diagnose the quality and characteristics of a copper
cable attached to a port, use the test cable-diagnostics tdr Privileged EXEC mode command.

Syntax

test cable-diagnostics tdr interface interface-id

Parameters

interface-id—(Optional) Specifies an Ethernet port ID.

Command Mode

Privileged EXEC mode

User Guidelines

This command does not work on fiber ports (if they exist on the device). The port to be tested should be shut
down during the test, unless it is a combination port with fiber port active. In this case, it does not need to be
shut down, because the test does not work on fiber ports.

The maximum length of cable for the TDR test is 120 meters.

Example 1 - Test the copper cables attached to port gi1/0/1 (a copper port).

switchxxxxxx# test cable-diagnostics tdr interface gi1/0/1
Cable is open at 64 meters

Example 2 - Test the copper cables attached to port 2 (a combo port with fiber active).

switchxxxxxx# test cable-diagnostics tdr interface gi1/0/2
Fiber ports are not supported

Cisco Business Switches 350 Series CLI Guide

958

PHY Commands

show cable-diagnostics tdr

show cable-diagnostics tdr

To display information on the last Time Domain Reflectometry (TDR) test performed on all copper ports or
on a specific copper port, use the show cable-diagnostics tdr Privileged EXEC mode command.

Syntax

show cable-diagnostics tdr [interface interface-id]

Parameters

• interface-id—(Optional) Specify an Ethernet port ID.

Command Mode

Privileged EXEC mode

User Guidelines

The maximum length of cable for the TDR test is 120 meters.

Example

The following example displays information on the last TDR test performed on all copper ports.

switchxxxxxx# show cable-diagnostics tdr

Port
----

Result
--------

Length [meters]
------------

Date
------------------

gi1/0/1

OK

gi1/0/2

Short

50

13:32:00 23 July 2010

gi1/0/3

Test has not been performed

gi1/0/4

Open

64

13:32:00 23 July 2010

Cisco Business Switches 350 Series CLI Guide

959

show cable-diagnostics cable-length

PHY Commands

show cable-diagnostics cable-length

To display the estimated copper cable length attached to all ports or to a specific port, use the show
cable-diagnostics cable-length Privileged EXEC mode command.

Syntax

show cable-diagnostics cable-length [interface interface-id]

Parameters

• interface-id—(Optional) Specify an Ethernet port ID.

Command Mode

Privileged EXEC mode

User Guidelines

The port must be active. The cable length results are not available if link is running at 100Mbps.. The cable
length results provided with this command may be effected if Green Ethernet Short Reach feature is enabled
on the interface

Example

The following example displays the estimated copper cable length attached to all ports.

switchxxxxxx# show cable-diagnostics cable-length

Port
----
gi1/0/1
gi1/0/2
gi1/0/3

Length [meters]
-----------------
< 50
Copper not active
110-140

Cisco Business Switches 350 Series CLI Guide

960

PHY Commands

show fiber-ports optical-transceiver

show fiber-ports optical-transceiver

To display the optical transceiver diagnostics, use the show fiber-ports optical-transceiver Privileged EXEC
mode command.

Syntax

show fiber-ports optical-transceiver [interface interface-id]

Parameters

• interface-id—(Optional) Specify an Ethernet port ID.

Default Configuration

All ports are displayed. If detailed is not used, only present ports are displayed.

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# show fiber-ports optical-transceiver

Port

Temp Voltage Current Output Input
Power
[C]

[Volt] [mA]

Power
[mWatt] [mWatt]

LOS

----------- ------ ------- ------- ------- ------- ---

gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4

Copper
Copper

28
29

3.32
3.33

7.26
6.50

3.53
3.53

3.68
3.71

No
No

- Internally measured transceiver temperature
Temp
- Internally measured supply voltage
Voltage
- Measured TX bias current
Current
Output Power - Measured TX output power in milliWatts
Input Power - Measured RX received power in milliWatts
LOS
N/A - Not Available, N/S - Not Supported, W - Warning, E - Error

- Loss of signal

Cisco Business Switches 350 Series CLI Guide

961

show fiber-ports optical-transceiver

PHY Commands

Cisco Business Switches 350 Series CLI Guide

962

PnP Commands

This chapter contains the following sections:

• pnp device, on page 964
• pnp discovery timeout, on page 965
• pnp enable, on page 966
• pnp reconnect interval, on page 967
• pnp resume, on page 968
• pnp transport, on page 969
• pnp watchdog timeout, on page 971
• show pnp, on page 972

Cisco Business Switches 350 Series CLI Guide

963

pnp device

pnp device

PnP Commands

To define the device username and the password, use the pnp device command in Global Configuration mode.
To restore the default configuration, use the no form of this command.

Syntax

pnp device username username password password

encrypted pnp device username username password encrypted-password

no pnp device

Parameters

• username—Specifies device user name (range: 1-64 characters).

• password—Specifies device password (range: 1-64 characters).

• encrypted-password—Specifies encrypted device password.

Default Configuration

N/A

Command Mode

Global Configuration mode

User Guidelines

Use the pnp device command to configure a username and a password used in each PnP message sent by the
PnP agent to a PnP server.

Example

The following example configures device name and password:

switchxxxxxx(config)# pnp device username sjohn password Tan123

Cisco Business Switches 350 Series CLI Guide

964

PnP Commands

pnp discovery timeout

pnp discovery timeout

To define the PnP agent discovery timeout in seconds and the exponential factor, use the pnp discovery
timeout command in Global Configuration mode. To restore the default configuration, use the no form of
this command.

Syntax

pnp discovery timeout timeout exponential-factor max-timeout

no pnp discovery timeout

Parameters

• timeout—Specifies the time to wait, in seconds, before attempting to discovery after a discovery is failed.

The range is from 1 to 2000000.

• exponential-factor—Exponential factor value is the value that triggers the discovery attempt exponentially.

The range is from 1 to 9.

• max-timeout—Specifies the maximum value of the timeout. The range is from 1 to 2000000.

Default Configuration

timeout—60 seconds

exponential-factor—3

max-timeout—540 seconds

Command Mode

Global Configuration mode

User Guidelines

Use the pnp discovery timeout command to configure a discovery timeout in seconds and an exponential
factor. The following formula is used to calculate the next timeout using the previous one:

next-timeout = (previous-timeout*exponential-factor < max-timeout) ?

previous-timeout*exponential-factor : max-timeout;

Example

The following example configures the discovery timeout and factor:

switchxxxxxx(config)# pnp discovery timeout 100 2 800

Cisco Business Switches 350 Series CLI Guide

965

pnp enable

pnp enable

PnP Commands

To enable the PnP agent, use the pnp enable command in Global Configuration mode. To disable the PnP
agent, use the no form of this command.

Syntax

pnp enable

no pnp enable

Default Configuration

PnP agent is enabled.

Command Mode

Global Configuration mode

User Guidelines

Use the command to enable the PnP agent.

Example

The following example disables the PnP agent:

switchxxxxxx(config)# no pnp enable

Cisco Business Switches 350 Series CLI Guide

966

PnP Commands

pnp reconnect interval

pnp reconnect interval

To define the PnP agent interval between sequential PnP sessions, use the pnp reconnect interval command
in Global Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

pnp reconnect interval timeout

no pnp reconnect interval

Parameters

• timeout—Specifies the interval in seconds time before attempting to reconnect the session after a

connection is lost. The range is from 1 to 2000000.The default is 30

Default Configuration

30 seconds

Command Mode

Global Configuration mode

User Guidelines

Use the pnp reconnect interval command to configure an interval between PnP sessions.

Example

The following example configures PnP session interval:

switchxxxxxx(config)# pnp interval reconnect interval 100

Cisco Business Switches 350 Series CLI Guide

967

pnp resume

pnp resume

To resume the PnP agent, use the pnp resume command in Global Configuration mode.

PnP Commands

Syntax

pnp resume

Default Configuration

PnP agent is enabled

Command Mode

Global Configuration mode

User Guidelines

Use the pnp resume command, to take out immediately the PnP agent from a waiting state:

• From the Discovery Waiting state to the Discovery state OR

• From the PnP Session Waiting state to the PnP Session state

Example

The following example resumes the PnP Server discovery:

switchxxxxxx(config)# pnp resume

Cisco Business Switches 350 Series CLI Guide

968

PnP Commands

pnp transport

pnp transport

To define the PnP transport, use the pnp transport command in Global Configuration mode. To restore the
default configuration, use the no form of this command.

Syntax

pnp transport {http | https} ip-address [port port-number]

no pnp transport

Parameters

• http | https—Specifies the transport protocol.

• ip-address—Specifies the IPv4 address or IPv6 address, or DNS name of the PnP server.

• port-number—Specifies the TCP port of the PnP server. If the parameter is not defined then the following

default value is applied:

• HTTP—80

• HTTPS—443

Default Configuration

• DHCP Option 43

• DNS:

PnP Server IP Address—pnpserver

Protocol—HTTP

Port—80

• Cisco Cloud (Default):

PnP Server IP Address—devicehelper.cisco.com

Protocol—HTTPS

Port—443

Command Mode

Global Configuration mode

User Guidelines

Use the pnp transport command to configure a transport protocol on whoich the PnP protocol is running.

Example

The following example configures the PnP transport:

Cisco Business Switches 350 Series CLI Guide

969

pnp transport

PnP Commands

switchxxxxxx(config)# pnp transport http 145.1.3.4

Cisco Business Switches 350 Series CLI Guide

970

PnP Commands

pnp watchdog timeout

pnp watchdog timeout

To define the PnP agent watchdog timeout, use the pnp watchdog timeout command in Global Configuration
mode. To restore the default configuration, use the no form of this command.

Syntax

pnp watchdog timeout timeout

no pnp watchdog timeout

Parameters

• timeout—Specifies the time to wait a reply from a PnP or File server. The range is from 1 to 180.

Default Configuration

60 seconds

Command Mode

Global Configuration mode

User Guidelines

Use the pnp watchdog timeout command to configure a watchdog timeout in seconds.

Example

The following example configures the watchdog timeout:

switchxxxxxx(config)# pnp watchdog timeout 120

Cisco Business Switches 350 Series CLI Guide

971

show pnp

show pnp

PnP Commands

To display the PnP agent information, use the show pnp command in Privileged EXEC mode.

Syntax

show pnp

Command Mode

Privileged EXEC mode

User Guidelines

Use the command to display information of the PnP agent.

Example 1. The following example displays PnP agent information when the PnP agent is disabled:

switchxxxxxx# show pnp
Administrative status: disabled
Operational status:
PnP Agent state:
Transport protocol: HTTP
Source Ip address:
TCP port: 80 (default)
Username:
Password’s MD5 digest:
Discovery

Timeout: 60 seconds (default)
Exponential Factor: 3 (default)
Maximum Timeout: 540 seconds

PnP Session Reconnection Interval:

Current:

>Default: 60 sec

Manual Configuration:
PnP:

PnP Watchdog Timeout: 60 seconds

Example 2. The following example displays PnP agent information when the PnP agent is not ready:

switchxxxxxx# show pnp
Administrative status: enabled
Operational status: notReady (No PnP Server IP Address)
PnP Agent state:
Transport protocol: HTTP (from DHCP Option 43)
Server IP address:
Source Ip address:
TCP port: 80 (default)
Username:atre1234c (from DHCP Option 43)
Password’s MD5 digest: 1238af77aaca17568f1298cced165fec (from DHCP Option 43)
Discovery

Timeout: 60 seconds (default)
Exponential Factor: 3 (default)
Maximum Timeout: 540 seconds

PnP Session Reconnection Interval:

Current:

>Default: 60 sec

Manual Configuration:
PnP:

PnP Watchdog Timeout: 60 seconds

Cisco Business Switches 350 Series CLI Guide

972

PnP Commands

show pnp

Example 3. The following example displays PnP agent information when the PnP agent is enabled
in the PnP Session state:

switchxxxxxx# show pnp
Administrative status: enabled
Operational status: ready
PnP Agent state: PnP Session
Transport protocol: HTTP (from DHCP Option 43)
Server IP address: 176.1.1.1 (from DHCP Option 43)
Source Ip address:
TCP port: 80 (default)
Username:atre1234c (from DHCP Option 43)
Password’s MD5 digest: 1238af77aaca17568f1298cced165fec (from DHCP Option 43)
Discovery Timeout: 60 seconds (default)
Discovery Exponential Factor: 3 (default)
Discovery Maximum Timeout: 540 seconds
PnP Session Interval Timeout: 60 (default)
PnP Watchdog Timeout: 60 seconds

Example 4. The following example displays PnP agent information when the PnP agent is enabled
in the PnP Session state and the PnP server was changed:

switchxxxxxx# show pnp
Administrative status: enabled
Operational status: ready
PnP Agent state: PnP Session
Transport protocol: HTTP (from DHCP Option 43
Server IP address: 176.1.1.1 (from DHCP Option 43);
Next session: 167.21.3.4 (from DHCP Option 43)

Source Ip address:
TCP port: 80 (default)
Username:atre1234c (from DHCP Option 43)
Password’s MD5 digest: 1238af77aaca17568f1298cced165fec (from DHCP Option 43)
Discovery Timeout: 60 seconds (default)
Discovery Exponential Factor: 3 (default)
Discovery Maximum Timeout: 540 seconds
PnP Session Interval Timeout: 60 (default)
PnP Watchdog Timeout: 60 seconds

Example 5. The following example displays PnP agent information when the PnP agent is enabled
in the PnP Session Waiting state:

switchxxxxxx# show pnp
Administrative status: enabled
Operational status: ready
PnP Agent state: PnP Session Waiting
Transport protocol: HTTPS
Server IP address: 176.1.1.1
Source Ip address: 120.10.10.10
TCP port: 180
Username:atre1234c (from DHCP Option 43)
Password’s MD5 digest: 1238af77aaca17568f1298cced165fec (from DHCP Option 43)
Discovery Timeout: 60 seconds (default)
Discovery Exponential Factor: 3 (default)
Discovery Maximum Timeout: 540 seconds
PnP Session Interval Timeout: 180 seconds (from PnP Backoff message)
Timer Remainder: 150 seconds
PnP Watchdog Timeout: 60 seconds

Example 6. The following example displays PnP agent information when the PnP agent is in state
Discovery:

switchxxxxxx# show pnp
Administrative status: enabled
Operational status: ready

Cisco Business Switches 350 Series CLI Guide

973

show pnp

PnP Commands

PnP Agent state: PnP Session
Transport protocol: HTTP (from DHCP Option 43
Server IP address: 176.1.1.1 (from DHCP Option 43);
Next session: 167.21.3.4 (from DHCP Option 43)

Source Ip address:
TCP port: 80 (default)
Username:atre1234c (from DHCP Option 43)
Password’s MD5 digest: 1238af77aaca17568f1298cced165fec (from DHCP Option 43)
Discovery Timeout: 60 seconds (default)
Discovery Exponential Factor: 3 (default)
Discovery Maximum Timeout: 540 seconds
PnP Session Interval Timeout: 60 (default)
PnP Watchdog Timeout: 60 seconds

Example 7. The following example displays PnP agent information when the PnP agent is in state
Discovery Waiting:

switchxxxxxx# show pnp
Administrative status: enabled
Operational status: ready
PnP Agent state: PnP Session
Transport protocol: HTTP (from DHCP Option 43
Server IP address: 176.1.1.1 (from DHCP Option 43);
Next session: 167.21.3.4 (from DHCP Option 43)

Source Ip address:
TCP port: 80 (default)
Username:atre1234c (from DHCP Option 43)
Password’s MD5 digest: 1238af77aaca17568f1298cced165fec (from DHCP Option 43)
Discovery Timeout: 60 seconds (default)
Discovery Exponential Factor: 3 (default)
Discovery Maximum Timeout: 540 seconds
PnP Session Interval Timeout: 60 (default)
PnP Watchdog Timeout: 60 seconds

Cisco Business Switches 350 Series CLI Guide

974

PoE Commands

This chapter contains the following sections:

• power inline, on page 976
• power inline inrush test disable, on page 977
• power inline legacy support disable, on page 978
• power inline powered-device, on page 979
• power inline priority, on page 980
• power inline usage-threshold, on page 981
• power inline traps enable, on page 982
• power inline limit, on page 983
• power inline limit-mode, on page 984
• power inline four-pair forced, on page 985
• power inline negotiation, on page 986
• show power inline, on page 987
• show power inline savings, on page 992
• clear power inline counters, on page 993
• clear power inline monitor consumption, on page 994
• show power inline monitor consumption, on page 995

Cisco Business Switches 350 Series CLI Guide

975

power inline

power inline

PoE Commands

To configure the inline power administrative mode on an interface, use the power inline Interface Configuration
mode command.

Syntax

power inline auto [time-range time-range-name]

power inline never

Parameters

• auto—Turns on the device discovery protocol and applies power to the device.

• never—Turns off the device discovery protocol and stops supplying power to the device.

• time-range-name—Specifies a time range. When the time range is not in effect the power is not supplied
the attached device. If a time range is not specified, there is no time range bounded to the port. (Range:
1–32 characters)

Default Configuration

The default configuration is set to auto.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

The never parameter cannot be used with a time range.

Example

The following example turns on the device discovery protocol on port 4.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# power inline auto

Cisco Business Switches 350 Series CLI Guide

976

PoE Commands

power inline inrush test disable

power inline inrush test disable

To disable the inrush test (a hardware test that checks input surge current for PoE devices), use the power
inline inrush test disable Global Configuration mode command. To enable the inrush test, use the no form
of this command.

Syntax

power inline inrush test disable

no power inline inrush test disable

Default Configuration

Inrush test is enabled.

Command Mode

Global Configuration mode

Example

The following example disable inrush test.

switchxxxxxx(config)# power inline inrush test disable

Cisco Business Switches 350 Series CLI Guide

977

power inline legacy support disable

PoE Commands

power inline legacy support disable

To disable the legacy PDs support, use the power inline legacy support disableGlobal
Configuration mode command. To enable the legacy support, use the no form of this command.

Syntax

power inline legacy support disable

no power inline legacy support disable

Default Configuration

Legacy support is enabled.

Command Mode

Global Configuration mode

Example

The following example disables legacy PDs support.

switchxxxxxx(config)# power legacy support disable

Cisco Business Switches 350 Series CLI Guide

978

PoE Commands

power inline powered-device

power inline powered-device

To add a description of the device type, use the power inline powered-device Interface Configuration mode
command. To remove the description, use the no form of this command.

Syntax

power inline powered-device pd-type

no power inline powered-device

Parameters

pd-type—Enters a comment or a description to assist in recognizing the type of the device attached to this
interface. (Length: 1–24 characters)

Default Configuration

There is no description.

Command Mode

Interface (Ethernet) Configuration mode

Example

The following example adds the description ‘ip phone’ to the device connected to port 4.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# power inline powered-device ip_phone

Cisco Business Switches 350 Series CLI Guide

979

power inline priority

PoE Commands

power inline priority

To configure the interface inline power management priority, use the power inline priority Interface
Configuration (Ethernet) mode command. To restore the default configuration, use the no form of this command.

Syntax

power inline priority {critical | high | low}

no power inline priority

Parameters

• critical—Specifies that the device operation is critical.

• high—Specifies that the device operation is high priority.

• low—Specifies that the device operation is low priority.

Default Configuration

The default configuration is set to low priority.

Command Mode

Interface (Ethernet) Configuration mode

Example

The following example sets the inline power management priority of port gi1/0/4 to High.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# power inline priority high

Cisco Business Switches 350 Series CLI Guide

980

PoE Commands

power inline usage-threshold

power inline usage-threshold

To configure the threshold for initiating inline power usage alarms, use the power inline usage-threshold
Global Configuration mode command. To restore the default configuration, use the no form of this command.

Syntax

power inline usage-threshold percent

no power inline usage-threshold

Parameters

percent—Specifies the threshold in percent to compare to the measured power. (Range: 1–99)

Default Configuration

The default threshold is 95 percent.

Command Mode

Global Configuration mode

Example

The following example configures the threshold for initiating inline power usage alarms to 90 percent.

switchxxxxxx(config)# power inline usage-threshold 90

Cisco Business Switches 350 Series CLI Guide

981

power inline traps enable

PoE Commands

power inline traps enable

To enable inline power traps, use the power inline traps enable Global Configuration mode command. To
disable traps, use the no form of this command.

Syntax

power inline traps enable

no power inline traps enable

Default Configuration

Inline power traps are disabled.

Command Mode

Global Configuration mode

Example

The following example enables inline power traps.

switchxxxxxx(config)# power inline traps enable

Cisco Business Switches 350 Series CLI Guide

982

PoE Commands

power inline limit

power inline limit

To configure the power limit per port on an interface, use the power inline limit Interface Configuration
mode command. To return to default, use the no form of the command.

Syntax

power inline limit power

no power inline limit

Parameters

power—States the port power consumption limit in Milliwatts, Range is 0-60000.

Default Configuration

The default value is 30W

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

The operational power limit is the minimum of the configured power limit value and the maximum power
capability on port. For example, if the configured value is higher than 15.4W on a PoE port, the operational
power limit is 15.4W.

Example

The following example sets inline power on a port.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# power inline limit 2222

Cisco Business Switches 350 Series CLI Guide

983

power inline limit-mode

PoE Commands

power inline limit-mode

To set the power limit mode of the system, use the power inline limit-mode Global Configuration mode
command. To return to default, use the no form of this command.

Syntax

power inline limit-mode {class | port}

no power inline limit-mode

Parameters

• class—The power limit of a port is based on the class of the PD (Power Device) as detected during the

classification process

• port—The power limit of a port is fixed regardless of the class of the discovered PD.

Default Configuration

The default value is class

Command Mode

Global Configuration mode

User Guidelines

Changing the PoE limit mode of the system will turn the power OFF and ON for all PoE ports.

Example

The following example sets the power limit to class.

switchxxxxxx(config)# power inline limit-mode class
"Changing the PoE limit mode of the system will turn the power OFF and ON for all PoE ports.

Are you sure? [y/n]"

Cisco Business Switches 350 Series CLI Guide

984

PoE Commands

power inline four-pair forced

power inline four-pair forced

To configure the inline power to enabled the spare pair, use the power inline four-wire forced Interface
Configuration mode command.

Syntax

power inline four-pair forced

no power inline four-pair forced

Parameters

Default Configuration

The default configuration is set to no four-pair forced.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

This command should only be used for ports that are connected to devices that do not support the CDP/LLDP
protocol or the new 4-wire power via MDI TLV (like UPOE splitter).

The command is used to force the spare pair to supply power, this allows the usage of 60 Watts PoE.

CDP/LLDP will reflect power allocated of 60W regardless of power requested.

This force command overrides any port mode or port limit configuration.

Example

The following example force the spare pair in port 4.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# power inline four-pair forced

Cisco Business Switches 350 Series CLI Guide

985

power inline negotiation

PoE Commands

power inline negotiation

The power inline negotiation Interface Configuration mode command is used to select which negotiation types
are allowed on an interface. To return an interface to the default supported negotiation types, use the no form
of this command.

Syntax

power inline negotiation {none | all}

no power inline negotiation

Parameters

none—indicates that no negotiation is allowed on the port.

all—indicates that all supported negotiation methods are allowed on the port.

Default Configuration

All supported negotiation methods are allowed on the port.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

If the none option is selected, all negotiation packets will be ignored.

The following example disabled negotiation on a port.

switchxxxxxx(config)# interface gi1/0/4

switchxxxxxx(config-if)# power inline negotiation none

Cisco Business Switches 350 Series CLI Guide

986

PoE Commands

show power inline

show power inline

To display information about the inline power for all interfaces or for a specific interface, use the show power
inline privileged EXEC mode command.

Syntax

show power inline [interface-id | module unit-id]

Parameters

• interface-id—Specifies an interface ID. The interface ID must be an Ethernet port.

• module unit-id—Specifies the unit ID of the stack member.

Note

Relevant for stackable systems only

Default Configuration

Show information for all ports.

Command Mode

Privileged EXEC mode

User Guidelines

In a stack, only devices which support PoE are displayed.

Example 1—The following example displays information about the inline power for all ports (port
power based).

switchxxxxxx(config)# show power inline
Port limit mode: Enabled
Usage threshold: 95%
Trap: Enabled
Legacy Mode: Disabled
Inrush test: Enabled
Class Error Detection: Enabled
'

Unit

Module

Nominal Power
(w)

Allocated Power
(w)

Temp (c)

SW Version

PSE chipset HW Revision

------

-----------

-------------

---------------

-----------

-------------

---------------------

1

2

3

48P

320

120 (37.5%)

30

1.222.3

PD69208 - 0x4BC2
PD69204 - 0x4AC2

24P

24P

240

120

0 (0%)

0 (0%)

50

50

1.222.3

PD69208* - 0x4AC2

4.0.10.0

TPS3288 - 0x40c4

Cisco Business Switches 350 Series CLI Guide

987

show power inline

PoE Commands

Interface

Admin

Oper

Power

Class

Device

Priority

--------

----------

-------------

---------

-------

-------------------

-----------

gi1/0/1

gi1/0/2

Auto

Auto

gi1/0/3

Never

Off

On

15.4(30)

Searching

0

0

3

0

0

IP Phone Model A

Critical

High

Low

Example 2—The following example displays information about the inline power for a specific port.

switchxxxxxx(config)# show power inline gi1/0/1

Interface

Admin

Oper

Power

Class

Device

Priority

--------

----------

-------------

---------

-------

-------------------

-----------

gi1/0/1

Auto

On

3

IP Phone Model A

Critical

Port status: Port is on - Valid PD resistor signature detected
Port standard: 802.3AT
Admin power limit: 30.0 watts
Time range:
Link partner standard: 802.3AF
Operational power limit: 30 watts
Negiotiated power: 18 watts (LLDP)

Spare pair: Enabled (forced)
Current (mA): 81
Voltage(V): 50.8
verload Counter: 5
Short Counter: 0
Denied Counter: 2
Absent Counter: 0
Invalid Signature Counter: 0

The following table describes the fields shown in the display:

Field

Power

Description

Inline power sourcing equipment operational status.

Nominal Power

Inline power sourcing equipment nominal power in Watts.

Allocated Power

Measured usage power in Watts.

Usage Threshold

Usage threshold expressed in percent for comparing the
measured power and initiating an alarm if threshold is exceeded.

Traps

Port

Device

State

Indicates if inline power traps are enabled.

Ethernet port number.

Description of the device type.

Indicates if the port is enabled to provide power. The possible
values are Auto or Never.

Cisco Business Switches 350 Series CLI Guide

988

PoE Commands

show power inline

Field

Priority

Status

Class

Description

Port inline power management priority. The possible values
are Critical, High or Low.

Power operational state. The possible values are On, Off,
Test-Fail, Testing, Searching or Fault.

Power consumption classification of the device.

Overload Counter

Counts the number of overload conditions detected.

Short Counter

Counts the number of short conditions detected.

Denied Counter

Counts the number of times power was denied.

Absent Counter

Counts the number of times power was removed because device
dropout was detected.

Invalid Signature
Counter

Counts the number of times an invalid signature of a device
was detected.

Inrush Test

Displays whether the inrush test is enabled or disabled.

Field

Description

Port limit mode

Enabled for port limit and Disable for class limit.

Legacy Mode

Enabled of Disabled legacy device support.

Inrush Test

SW version

Displays whether the inrush test is enabled or disabled.

The POE firmware version.

HW Version

The POE hardware version

Usage Threshold

Usage threshold expressed in percent for comparing the
measured power and initiating an alarm if threshold is exceeded.

Traps

Module

Indicates if inline power traps are enabled.

The module name.

Available Power

Inline power sourcing equipment nominal power in Watts.

Allocated Power

Measured allocated power in Watts.

Temp

Interface

Admin

Show the POE device temperature.

Ethernet port number.

Indicates if the port is enabled to provide power. The possible
values are Auto or Never.

Cisco Business Switches 350 Series CLI Guide

989

show power inline

PoE Commands

Field

Oper

Power

Class

Device

Priority

Description

Power operational state. The possible values are On, Off,
Test-Fail, Testing, Searching or Fault.

Power consumed in watts, any allocated Power will appear in
parens ().

Power consumption classification of the device (0-4).

Description of the device type set by the user.

Port inline power management priority. The possible values
are Critical, High or Low.

Port status

The port status on/off with detailed reason (see bellow for
details).

Port standard

802.3AF /802.3AT /60W POE.

Admin power limit

Port limit in watts used when the Port limit mode is Enabled.

Time Range

The name of the time range associated with the interface.

Link partner standard

802.3AF/802.3AT.

Operational Power
Limit

Port actual power limit in watts.

Current (mA)

Port current in Milli-Ampere.

Voltage (V)

Port voltage in volts.

Overload Counter

Counts the number of overload conditions detected.

Short Counter

Counts the number of short conditions detected.

Denied Counter

Counts the number of times power was denied.

Absent Counter

Counts the number of times power was removed because device
dropout was detected.

Invalid Signature
Counter

Counts the number of times an invalid signature of a device
was detected.

Following is a list of port status values:
Port is on - Valid capacitor/resistor detected.
Port is on - Valid resistor/capacitor detected.
Port is on - 4 pairs.
Port is on - Forced 4 pairs.
Port is off - Main supply voltage is high.
Port is off - Main supply voltage is low.
Port is off - Hardware pin disables all ports.
Port is off - Non-existing port number.
Port is yet undefined.
Port is off - Internal hardware fault.
Port is off - User setting.

Cisco Business Switches 350 Series CLI Guide

990

PoE Commands

show power inline

Port is off - Detection is in process.
Port is off - Non-802 - 3af powered device.
Port is off - Overload & Underload states.
Port is off - Underload state.
Port is off - Overload state.
Port is off - Power budget exceeded.
Port is off - Internal hardware fault.
Port is off - Voltage injection into the port.
Port is off - Improper Capacitor Detection results.
Port is off - Discharged load.
Port is on - Detection regardless (Force On).
Undefined error during Force On.
Supply voltage higher than settings.
Supply voltage lower than settings.
Disable_PDU flag raised during Force On.
Port is forced on, then disabled.
Port is off - Forced power error due to Overload.
Port is off - Out of power budget while in Force On.
Communication error with PoE devices after Force On.
Port is off - Short condition.
Port is off - Over temperature at the port.
Port is off - Device is too hot.
Unknown device port status.
ForcePowerErrorShortCircuit.
ForcePowerErrorChannelOverTemperature.
ForcePowerErrorChipOverTemperature .
PowerManagment - Static Calculated power is bigger than power limit.
PowerManagment - Static OVL PD class report (user predefined power value).
Static Calculated power (power limit during Force On).
Static OVL PD class report (user predefined power value during Force On).
High power port is ON - High power device was detected.
Chip Over Power - Sum of square currents exceeded SumPowerLimit.
Force Power Error Chip Over Power, during Force On.
Port is off - Class Error - Illegal class.

Cisco Business Switches 350 Series CLI Guide

991

show power inline savings

PoE Commands

show power inline savings

To display information about the device inline power saving, use the show power inline savings privileged
EXEC mode command.

Syntax

show power inline savings

Command Mode

Privileged EXEC mode

User Guidelines

Use the show power inline savings command to display the total power saved by using the PoE time range
feature which shuts down PoE to ports in specific times.

Example 1—The following example displays PoE power saving on device.

switchxxxxxx(config)# show power inline savings
Current Power Savings: 45W
Cumulative Energy Saved: 180 [Watt*Hour]
* Estimated Annual Power saving: 1800 [Watt*Hour]
* Annual estimate is based on the saving during the previous week
NA – information for previous week is not available

Cisco Business Switches 350 Series CLI Guide

992

PoE Commands

clear power inline counters

clear power inline counters

To clear power inline interface counters, use the clear power inline counters Privileged EXEC mode command.

Syntax

clear power inline counters [interface-id]

Parameters

interface-id—(Optional) Specifies an interface ID. The interface ID must be an Ethernet port type. If interface
ID is not specified - counters for all interfaces are cleared.

Default Configuration

All interface counters are cleared.

Command Mode

Privileged EXEC mode

User Guidelines

The clear power inline counters command is used to reset power inline interface counters: Overload, Short,
Denied, Absent and Invalid Signature .

The following example clears the power inline counters for gi1/0/2.

switchxxxxxx# clear power inline counters gi1/0/2

Cisco Business Switches 350 Series CLI Guide

993

clear power inline monitor consumption

PoE Commands

clear power inline monitor consumption

To clear power inline consumption monitor info on all or on a specific interface or interface list, use the clear
power inline monitor consumption Privileged EXEC mode command.

Syntax

clear power inline monitor consumption [interface-id-list]

Parameters

interface-id-list—(Optional) Specifies a list of interface ID. The interface ID must be an Ethernet port type.
If interface ID is not specified - consumption information for all interfaces is cleared.

Default Configuration

All monitored interface info are cleared.

Command Mode

Privileged EXEC mode

Example

The following example clears the monitored statistics for gi1.

switchxxxxxx# clear power inline monitor consumption gi11

Cisco Business Switches 350 Series CLI Guide

994

PoE Commands

show power inline monitor consumption

show power inline monitor consumption

To display the average monitored power consumption info, use the show power inline monitor consumption
Privileged EXEC mode command

Syntax

show power inline monitor consumption [interface-id ] {minutes|hours | days |weeks}

Parameters

• interface-id (Optional) Specifies an interface ID. The interface ID must be an Ethernet port. If interface

ID is not specified total device PoE consumption info will be displayed.

• Unit unit-id - Total PoE consumption info for specified unit ID will be displayed

• minutes —Average minute consumption. Displays the last 60 samples, sampled every 60 seconds (every

round minute according to system time)

• hours —Average hour consumption. Displays the last 24 samples, sampled every 60 minutes (every

round hour according to system time).

• days —Average daily consumption. Displays the last 7 samples, sampled every 24 hours (midnight to

midnight according to system time).

• weeks —Average Weekly Consumption. Displays the last 52 samples, sampled every 7 days (midnight

Saturday to midnight Saturday according to system time).

Default Configuration

This command has no default settings.

Command Mode

Privileged EXEC mode

User Guidelines

The show power inline monitor is used to show average power consumption for specified time frame.

Note: only days and weeks samples are persisted after reload.

Example 1:

The following example displays the average hourly power consumption for the past day gathered
for interface gi1.

switchxxxxxx# show power inline monitor consumption gi1 hours

Sample
Time

Consumption
(W)

Cisco Business Switches 350 Series CLI Guide

995

show power inline monitor consumption

PoE Commands

----------

-------------
7.1
7.1
8.5
9.0

03:00:00

02:00:00

01:00:00

00:00:00

7.1

7.1

8.5

9.0

(~) Not all samples are available.

* time stamp represents end of sampling period

Example 2:

The following example displays the average weekly power consumption for the past 52 weeks
gathered for unit 1 .

switchxxxxxx# show power inline monitor consumption unit 1 weeks

Sample
Time

Consumption
(W)

----------

-------------

Sun 15/11/2015
00:00:00

55.1

Sun 22/11/2015
00:00:00

75.2

Sun 29/11/2015
00:00:00(~)

45.3

00:00:00

9.0

unit 1

(~) Not all samples are available.

* time stamp represents end of sampling period

Cisco Business Switches 350 Series CLI Guide

996

Port Channel Commands

This chapter contains the following sections:

• channel-group, on page 998
• port-channel load-balance , on page 999
• show interfaces port-channel, on page 1000

Cisco Business Switches 350 Series CLI Guide

997

channel-group

channel-group

Port Channel Commands

To associate a port with a port-channel, use the channel-group Interface (Ethernet) Configuration mode
command. To remove a port from a port-channel, use the no form of this command.

Syntax

channel-group port-channel mode {on | auto}

no channel-group

Parameters

• port-channel—Specifies the port channel number for the current port to join.

• mode—Specifies the mode of joining the port channel. The possible values are:

on—Forces the port to join a channel without an LACP operation.

auto—Forces the port to join a channel as a result of an LACP operation.

Default Configuration

The port is not assigned to a port-channel.

Command Mode

Interface (Ethernet) Configuration mode

Default mode is on.

User Guidelines

LACP starts to manage port joining.

When the auto mode is configured and there are not received LACP messages on all port-candidates then
one of candidates is joined. When the first LACP message is received the port is disjoined and LACP starts
to manage port joining.

Example

The following example forces port gi1/0/1 to join port-channel 1 without an LACP operation.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# channel-group 1 mode on

Cisco Business Switches 350 Series CLI Guide

998

Port Channel Commands

port-channel load-balance

port-channel load-balance

To configure the load balancing policy of the port channeling, use the port-channel load-balance Global
Configuration mode command. To reset to default, use the no form of this command.

Syntax

port-channel load-balance {src-dst-mac | src-dst-mac-ip}

no port-channel load-balance

Parameters

• src-dst-mac—Port channel load balancing is based on the source and destination MAC addresses.

• src-dst-mac-ip—Port channel load balancing is based on the source and destination of MAC and IP

addresses.

Default Configuration

src-dst-mac

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# port-channel load-balance src-dst-mac

Cisco Business Switches 350 Series CLI Guide

999

show interfaces port-channel

Port Channel Commands

show interfaces port-channel

To display port-channel information for all port channels or for a specific port channel, use the show interfaces
port-channel Privileged EXEC mode command.

Syntax

show interfaces port-channel [interface-id]

Parameters

interface-id—(Optional) Specify an interface ID. The interface ID must be a port channel.

Command Mode

Privileged EXEC mode

Examples

The following example displays information on all port-channels.

switchxxxxxx# show interfaces port-channel
Load balancing: src-dst-mac.
Gathering information...
Channel Ports
------- -----
Po1
Po2

Active: 1,Inactive: gi1/0/2-3
Active: 5 Inactive: gi1/0/4

Cisco Business Switches 350 Series CLI Guide

1000

QoS Commands

This chapter contains the following sections:

• qos, on page 1003
• qos advanced-mode trust, on page 1004
• show qos, on page 1005
• class-map, on page 1006
• show class-map, on page 1008
• match, on page 1009
• policy-map, on page 1010
• class, on page 1011
• show policy-map, on page 1012
• trust, on page 1013
• set, on page 1014
• redirect, on page 1015
• mirror, on page 1016
• police, on page 1017
• service-policy, on page 1019
• qos aggregate-policer, on page 1021
• show qos aggregate-policer, on page 1023
• police aggregate, on page 1024
• wrr-queue cos-map, on page 1025
• wrr-queue bandwidth, on page 1026
• priority-queue out num-of-queues, on page 1027
• traffic-shape, on page 1028
• traffic-shape queue, on page 1029
• qos wrr-queue wrtd, on page 1030
• show qos wrr-queue wrtd, on page 1031
• show qos interface, on page 1032
• qos map policed-dscp, on page 1035
• qos map dscp-queue, on page 1036
• qos trust (Global), on page 1037
• qos trust (Interface), on page 1038
• qos cos, on page 1039
• qos dscp-mutation, on page 1040

Cisco Business Switches 350 Series CLI Guide

1001

QoS Commands

• show qos map, on page 1041
• clear qos statistics, on page 1043
• qos statistics policer, on page 1044
• qos statistics aggregate-policer, on page 1045
• clear queue statistics, on page 1046
• show queue statistics, on page 1047
• show qos statistics, on page 1048

Cisco Business Switches 350 Series CLI Guide

1002

QoS Commands

qos

qos

Use the qos Global Configuration mode command to enable QoS on the device and set its mode. Use the no
form of this command to disable QoS on the device.

Syntax

qos [basic | {advanced [ports-not-trusted | ports-trusted]}]

no qos

Parameters

• basic—QoS basic mode. If no option is specified, the QoS mode defaults to the basic mode.

• advanced—Specifies the QoS advanced mode, which enables the full range of QoS configuration.

• ports-not-trusted—Relevant for advanced mode only. Indicates that packets, which are not classified
by policy map rules to a QoS action, are mapped to egress queue 0. This is the default setting in advanced
mode.

• ports-trusted—Relevant for advanced mode only. Indicates that packets, which are not classified by
policy map rules to a QoS action, are mapped to an egress queue based on the packet's fields. Use the
qos advanced-mode trust, on page 1004 command to specify the trust mode.

Default Configuration

QoS basic mode

Command Mode

Global Configuration mode

Example 1—The following example disables QoS on the device.

switchxxxxxx(config)# no qos

Example 2—The following example enables QoS advanced mode on the device with the
ports-not-trusted option.

switchxxxxxx(config)# qos advanced

Cisco Business Switches 350 Series CLI Guide

1003

qos advanced-mode trust

QoS Commands

qos advanced-mode trust

Use the qos advanced-mode trust Global Configuration mode command to configure the trust mode in
advanced mode. Use the no form of this command to return to default.

Syntax

qos advanced-mode trust {cos | dscp | cos-dscp}

no qos advanced-mode trust

Parameters

• cos—Classifies ingress packets with the packet CoS values. For untagged packets, the port default CoS

is used.

• dscp—Classifies ingress packets with the packet DSCP values.

• cos-dscp—Classifies ingress packets with the packet DSCP values for IP packets. For other packet types,

use the packet CoS values.

Default Configuration

cos-dscp

Command Mode

Global Configuration mode

User Guidelines

The configuration is relevant for advanced mode in the following cases:

• ports-not-trusted mode: For packets that are classified to the QoS action trust.

• ports-trusted mode: For packets that are not classified to any QoS action or classified to the QoS action

trust.

Example

The following example sets cos as the trust mode for QoS on the device.

switchxxxxxx(config)# qos advanced-mode trust cos

Cisco Business Switches 350 Series CLI Guide

1004

QoS Commands

show qos

show qos

Use the show qos Privileged EXEC mode command to display the QoS information for the device. The trust
mode is displayed for the QoS basic mode.

Syntax

show qos

Default Configuration

Disabled Command Mode

Command Mode

Privileged EXEC mode

User Guidelines

Trust mode is displayed if QoS is enabled in basic mode.

Examples

switchxxxxxx(config)# show qos
Qos: Disabled
switchxxxxxx(config)# show qos
Qos: Basic mode
Basic trust: dscp
switchxxxxxx(config)# show qos
Qos: Advanced mode
Advanced mode trust type: cos
Advanced mode ports state: Trusted

Cisco Business Switches 350 Series CLI Guide

1005

class-map

class-map

QoS Commands

Use the class-map Global Configuration mode command to create or modify a class map and enter the
Class-map Configuration mode (only possible when QoS is in the advanced mode). Use the no form of this
command to delete a class map.

Syntax

class-map class-map-name [match-all | match-any]

no class-map class-map-name

Parameters

• class-map-name—Specifies the class map name. (Length: 1–32 characters)

• match-all—Performs a logical AND of all the criteria of the ACLs belonging to this class map. All

match criteria in this class map must be matched. If neither match-all nor match-any is specified, the
match-all parameter is selected by default.

• match-any—Performs a logical OR of the criteria of the ACLs belonging to this class map. Only a single

match criteria in this class map must be matched.

Default Configuration

No class map.

Command Mode

Global Configuration mode

User Guidelines

The class-map command and its subcommands are used to define packet classification, marking, and aggregate
policing as part of a globally-named service policy applied on a per-interface basis.

A class map consists of one or more ACLs. It defines a traffic flow by determining which packets match some
or all of the criteria specified in the ACLs.

All class map commands are only available when QoS is in advanced mode.

The class-map enters Class-map Configuration mode. In this mode, up to two match commands can be
entered to configure the criteria for this class. Each match specifies an ACL.

When using a few match commands, each must point to a different type of ACL, such as: one IP ACL, one
IPv6 ACL, and one MAC ACL. The classification is by first match, therefore, the order of the ACLs is
important.

Error messages are generated in the following cases:

• There is more than one match, on page 1009 command in a match-all class map

There is a repetitive classification field in the participating ACLs.

After entering the Class-map Configuration mode, the following configuration commands are available:

Cisco Business Switches 350 Series CLI Guide

1006

QoS Commands

class-map

• exit: Exits the Class-map Configuration mode.

• match, on page 1009: Configures classification criteria.

• no: Removes a match statement from a class map.

Example

The following example creates a class map called Class1 and configures it to check that packets match all
classification criteria in the ACL specified.

switchxxxxxx(config)# class-map class1 match-all
switchxxxxxx(config-cmap)# match access-group acl-name

Cisco Business Switches 350 Series CLI Guide

1007

show class-map

show class-map

QoS Commands

The show class-map Privileged EXEC mode mode command displays all class maps when QoS is in advanced
mode.

Syntax

show class-map [class-map-name]

Parameters

class-map-name—Specifies the name of the class map to be displayed. (Length: 1–32 characters)

Command Mode

Privileged EXEC mode

Example

The following example displays the class map for Class1.

switchxxxxxx(config)# show class-map
Class Map matchAny class1
Match access-group mac

Cisco Business Switches 350 Series CLI Guide

1008

QoS Commands

match

match

Use the match Class-map Configuration mode. command to bind the ACLs that belong to the class-map being
configured. Use the no form of this command to delete the ACLs.

Syntax

match access-group acl-name

no match access-group acl-name

Parameters

acl-name—Specifies the MAC, IP ACL name, or IPv6 ACL name. (Length: 1–32 characters)

Default Configuration

No match criterion is supported.

User Guidelines

This command is available only when the device is in QoS advanced mode.

Command Mode

Class-map Configuration mode.

Example

The following example defines a class map called Class1. Class1 contains an ACL called enterprise. Only
traffic matching all criteria in enterprise belong to the class map.

switchxxxxxx(config)# class-map class1
switchxxxxxx(config-cmap)# match access-group enterprise

Cisco Business Switches 350 Series CLI Guide

1009

policy-map

policy-map

QoS Commands

Use the policy-map Global Configuration mode command to creates a policy map and enter the Policy-map
Configuration mode. Use the no form of this command to delete a policy map.

Syntax

policy-map policy-map-name

no policy-map policy-map-name

Parameters

policy-map-name—Specifies the policy map name. (Length: 1–32 characters)

Command Mode

Global Configuration mode

User Guidelines

This command is only available when QoS is in advanced mode.

Use the policy-map Global Configuration mode command to specify the name of the policy map to be created,
added to, or modified before configuring policies for classes whose match criteria are defined in a class map.
A policy map contains one or more class maps and an action that is taken if the packet matches the class map.
Policy maps may be bound to ports/port-channels. Policy map is applied on the ingress path.

The match criteria is for a class map. Only one policy map per interface is supported. The same policy map
can be applied to multiple interfaces and directions.

Example

The following example creates a policy map called Policy1 and enters the Policy-map Configuration mode.

switchxxxxxx(config)# policy-map policy1
switchxxxxxx(config-pmap)#

Cisco Business Switches 350 Series CLI Guide

1010

QoS Commands

class

class

Use the class Policy-map Configuration mode. command after the policy-map, on page 1010 command to attach
ACLs to a policy-map. Use the no form of this command to detach a class map from a policy map.

Syntax

class class-map-name [access-group acl-name]

no class class-map-name

Parameters

• class-map-name—Specifies the name of an existing class map. If the class map does not exist, a new

class map is created under the specified name. (Length: 1–32 characters)

• access-group acl-name—Specifies the name of an IP, IPv6, or MAC Access Control List (ACL). (Length:

1–32 characters)

Default Configuration

No class map is defined for the policy map.

Command Mode

Policy-map Configuration mode.

User Guidelines

This command is only available when QoS is in advanced mode.

This is the same as creating a class map and then binding it to the policy map.

You can specify an existing class map in this command, or you can use the access-group parameter to create
a new class map.

After the policy-map is defined, use the service-policy, on page 1019 command to attach it to a port/port-channel.

Example

The following example defines a traffic classification (class map) called class1 containing an ACL called
enterprise. The class is in a policy map called policy1. The policy-map policy1 now contains the ACL
enterprise.

switchxxxxxx(config)# policy-map policy1
switchxxxxxx(config-pmap)# class class1 access-group enterprise

Cisco Business Switches 350 Series CLI Guide

1011

show policy-map

QoS Commands

show policy-map

Use the show policy-map Privileged EXEC mode command to display all policy maps or a specific policy
map.

This command is only available when QoS is in advanced mode.

Syntax

show policy-map [policy-map-name]

Parameters

policy-map-name—Specifies the policy map name. (Length: 1–32 characters)

Default Configuration

All policy-maps are displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays all policy maps.

show policy-map

switchxxxxxx(config)#
Policy Map policy1
class class1
set dscp 7
Policy Map policy2
class class 2
police 96000 4800 exceed-action drop
class class2
redirect gi1/0/2
class class 3
police 96000 4800 exceed-action policed-dscp-transmit peak 128000 9600 violate-action
policed-dscp-transmit

Cisco Business Switches 350 Series CLI Guide

1012

QoS Commands

trust

trust

Use the trust Policy-map Class Configuration mode. command to configure the trust state. Use the no form
of this command to return to the default trust state.

Syntax

trust

no trust

Default Configuration

The default state is according to the mode selected in the qos command (advanced mode). The type of trust
is determined in qos advanced-mode trust.

Command Mode

Policy-map Class Configuration mode.

User Guidelines

This command is relevant only when QoS is in advanced, ports-not-trusted mode. Trust indicates that traffic
is sent to the queue according to the packet’s QoS parameters (UP or DSCP).

Use this command to distinguish the QoS trust behavior for certain traffic from others. For example, incoming
traffic with certain DSCP values can be trusted. A class map can be configured to match and trust the DSCP
values in the incoming traffic.

Example

The following example creates an ACL, places it into a class map, places the class map into a policy map and
configures the trust state.

switchxxxxxx(config)# ip access-list extended ip1
switchxxxxxx(config-ip-al)# permit ip any any
switchxxxxxx(config-ip-al)# exit
switchxxxxxx(config)# class-map c1
switchxxxxxx(config-cmap)# match access-group ip1
switchxxxxxx(config-cmap)# exit
switchxxxxxx(config)# policy-map p1
switchxxxxxx(config-pmap)# class c1
switchxxxxxx(config-pmap-c)# trust

Cisco Business Switches 350 Series CLI Guide

1013

set

set

QoS Commands

Use the set Policy-map Class Configuration mode. command to select the value that QoS uses as the DSCP
value, the egress queue or to set user priority values.

Syntax

set {dscp new-dscp | queue queue-id | cos new-cos}

no set

Parameters

• dscp new-dscp—Specifies the new DSCP value for the classified traffic. (Range: 0–63)

• queue queue-id—Specifies the egress queue. (Range: 1-8 )

• cos new-cos—Specifies the new user priority to be marked in the packet. (Range: 0–7)

Command Mode

Policy-map Class Configuration mode.

User Guidelines

This command is only available when QoS is in advanced mode.

The set, on page 1014 and trust, on page 1013 commands are mutually exclusive within the same policy map.

To return to the Configuration mode, use the exit command. To return to the Privileged EXEC mode, use the
end command.

The queue keyword is not supported into egress policies.

Example

The following example creates an ACL, places it into a class map, places the class map into a policy map and
sets the DSCP value in the packet to 56 for classes in the policy map called p1.

switchxxxxxx(config)# ip access-list extended ip1
switchxxxxxx(config-ip-al)# permit ip any any
switchxxxxxx(config-ip-al)# exit
switchxxxxxx(config)# class-map c1
switchxxxxxx(config-cmap)# match access-group ip1
switchxxxxxx(config-cmap)# exit
switchxxxxxx(config)# policy-map p1
switchxxxxxx(config-pmap)# class c1
switchxxxxxx(config-pmap-c)# set dscp 56

Cisco Business Switches 350 Series CLI Guide

1014

QoS Commands

redirect

redirect

Use the redirect Policy-map Class Configuration mode. command to redirect a traffic flow to a given Ethernet
port or port channel.

Syntax

redirect interface-id

no redirect

Parameters

• interface-id—Specifies an Ethernet port or port channel to which the flow is redirected.

Command Mode

Policy-map Class Configuration mode.

User Guidelines

Use the redirect command to redirect a frame into the VLAN the frame was assigned to.

This command is only available when QoS is in advanced mode.

Example

The following example creates an ACL, places it into a class map, places the class map into a policy map and
redirects the flow to Ethernet port gi1/0/2:

switchxxxxxx(config)# ip access-list extended ip1
switchxxxxxx(config-ip-al)# permit ip any any
switchxxxxxx(config-ip-al)# exit
switchxxxxxx(config)# class-map c1
switchxxxxxx(config-cmap)# match access-group ip1
switchxxxxxx(config-cmap)# exit
switchxxxxxx(config)# policy-map p1
switchxxxxxx(config-pmap)# class c1
switchxxxxxx(config-pmap-c)# redirect gi1/0/2
switchxxxxxx(config-pmap-c)# exit
switchxxxxxx(config-pmap)# exit
switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

1015

mirror

mirror

QoS Commands

Use the mirror Policy-map Class Configuration mode. command to mirror a traffic flow to an analyzer
Ethernet port.

Syntax

mirror session_number

no mirror

Parameters

• session_number—Specify the session number identified with the SPAN or RSPAN session. Only a value

of 1 is allowed.

Command Mode

Policy-map Class Configuration mode.

User Guidelines

This command is only available when QoS is in advanced mode.

A frame is mirrored in the same format if it matches to one of the class ACLs regardless the command of this
ACL: permit or deny.

Only one source session from VLAN and flow mirroring is supported.

Example

The following example creates an ACL, places it into a class map, places the class map into a policy map and
mirrors the flow to an analyzer Ethernet port defined by session 2:

switchxxxxxx(config)# ip access-list extended ip1
switchxxxxxx(config-ip-al)# permit ip any any
switchxxxxxx(config-ip-al)# exit
switchxxxxxx(config)# class-map c1
switchxxxxxx(config-cmap)# match access-group ip1
switchxxxxxx(config-cmap)# exit
switchxxxxxx(config)# policy-map p1
switchxxxxxx(config-pmap)# class c1
switchxxxxxx(config-pmap-c)# mirror 2
switchxxxxxx(config-pmap-c)# exit
switchxxxxxx(config-pmap)# exit
switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

1016

QoS Commands

police

police

Use the police Policy-map Class Configuration mode. command to define the policer for classified traffic.
This defines another group of actions for the policy map (per class map). Use the no form of this command
to remove a policer.

Syntax

police committed-rate-kbps committed-burst-byte [exceed-action action] [peak peak-rate-kbps peak-burst-byte
[violate-action action]]

no police

Parameters

• committed-rate-kbps—Specifies the average traffic rate (CIR) in kbits per second (bps).(Range: 3–maximal

port speed)

• committed-burst-byte—Specifies the normal burst size (CBS) in bytes. (Range: 3000–19173960)

• exceed-action—Specifies the action taken when the committed rate is exceeded and the peak rate is not

exceeded. If the keyword is not configured then the following action is applied:

• drop, if peak the keyword is not configured.

• policed-dscp-transmit, if peak the keyword is configured.

• peak—Specifies the Two-rate Three-color policer. If the peak rate is exceeded the packet is dropped.

• peak-rate-kbps—Specifies the average traffic rate (CIR) in kbits per second (bps).(Range: 3–maximal

port speed)

• peak-burst-byte—Specifies the peak burst size (PBS) in bytes. (Range: 3000–19173960)

• violate-action—Specifies the action taken when the peak rate is exceeded. If the keyword is not configured

then the drop action is applied.

• action—Specifies the taken action. The possible values are:

• drop—Drops the packet.

• policed-dscp-transmit—Remarks the packet DSCP of IP traffic. The DSCP remarking is configured
by the qos map policed-dscp command with the violation keyword for the violation action and
without this keyword for the exceed action. DSCP remarking will have effect only if the mode is
trust dscp.

Default Usage

No policer

Command Mode

Policy-map Class Configuration mode.

Cisco Business Switches 350 Series CLI Guide

1017

police

QoS Commands

User Guidelines

This command is used after the policy-map, on page 1010 and class, on page 1011 commands.

This command is only available when QoS is in advanced mode.

Policing uses a token bucket algorithm.

Example 1. The following example defines a policer for classified traffic. When the traffic rate
exceeds 124,000 kbps and the normal burst size exceeds 9600 bytes, the packet is dropped. The class
is called class1 and is in a policy map called policy1.

switchxxxxxx(config)# policy-map policy1
switchxxxxxx(config-pmap)# class cls1
switchxxxxxx(config-pmap-c)# police 124000 9600 exceed-action drop

Cisco Business Switches 350 Series CLI Guide

1018

QoS Commands

service-policy

service-policy

Use the service-policy Interface (Ethernet, Port Channel) Configuration mode mode command to bind a policy
map to an interface. Use the no form of this command to detach a policy map from an interface.

Syntax

service-policy {input | output} policy-map-name [default-action {permit-any | deny-any}]

no service-policy input | output

service-policy {input | output} policy-map-name

Parameters

• input—Specifies an ingress policy.

• output—Specifies an egress policy.

• policy-map-name—Specifies the policy map name to apply to the input interface. (Length: 1–32

characters)

• default-action—Specifies the default action. If the keyword is not configured then the deny-any default

action is applied.

• deny-any—Deny all the packets (which were ingress of the port) that do not meet the rules in a policy.

• permit-any—Forward all the packets (which were ingress of the port) that do not meet the rules in a

policy.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Default

Policy map is not bound.

User Guidelines

This command is only available in QoS advanced mode.

Only one policy map per interface per direction is supported.

The service-policy output command fails if the bound policy contains actions not supported by egress policies.

A policy map cannot be bound as input and output at the same time.

Example

The following example attaches a policy map called Policy1 to the input interface.

switchxxxxxx(config-if)# service-policy input policy1

The following example attaches a policy map called Policy1 to the input interface and forwards all packets
that do not meet the rules of the policy.

Cisco Business Switches 350 Series CLI Guide

1019

service-policy

QoS Commands

switchxxxxxx(config-if)# service-policy input policy1 permit-any

The following example attaches a policy map called Policy2 to the output interface.

switchxxxxxx(config-if)# service-policy output policy2

Cisco Business Switches 350 Series CLI Guide

1020

QoS Commands

qos aggregate-policer

qos aggregate-policer

Use the qos aggregate-policer Global Configuration mode command to define the policer parameters that
can be applied to multiple traffic classes. Use the no form of this command to remove an existing aggregate
policer.

Syntax

qos aggregate-policer aggregate-policer-name committed-rate-kbps committed-burst-byte [exceed-action
action] [peak peak-rate-kbps peak-burst-byte [violate-action action]]

no qos aggregate-policer aggregate-policer-name

Parameters

• aggregate-policer-name—Specifies the aggregate policer name. (Length: 1–32 characters)

• committed-rate-kbps—Specifies the average traffic rate (CIR) in kbits per second (bps).(Range:

3–57982058)

• committed-burst-byte—Specifies the normal burst size (CBS) in bytes. (Range: 3000–19173960)

• exceed-action—Specifies the action taken when the committed rate is exceeded and the peak rate is not

exceeded. If the keyword is not configured then the following action is applied:

• drop, if peak the keyword is not configured.

• policed-dscp-transmit, if peak the keyword is configured.

• peak—Specifies the Two-rate Three-color policer. If the peak rate is exceeded the packet is dropped.

• peak-rate-kbps—Specifies the average traffic rate (CIR) in kbits per second (bps).(Range: 3–57982058)

• peak-burst-byte—Specifies the peak burst size (PBS) in bytes. (Range: 3000–19173960)

• violate-action—Specifies the action taken when the peak rate is exceeded. If the keyword is not configured

then the drop action is applied.

• action—Specifies the taken action. The possible values are:

• drop—Drops the packet.

• policed-dscp-transmit—Remarks the packet DSCP of IP traffic. The DSCP remarking is configured
by the qos map policed-dscp command with the violation keyword for the violation action and
without this keyword for the exceed action. DSCP remarking will have effect only if the mode is
trust dscp.

Default Configuration

No aggregate policer is defined.

Command Mode

Global Configuration mode

Cisco Business Switches 350 Series CLI Guide

1021

qos aggregate-policer

QoS Commands

User Guidelines

This command is only available when QoS is in advanced mode.

Use the qos aggregate-policer command to define a policer that aggregates traffic from multiple class maps.

Aggregate policers cannot aggregate traffic from multiple devices. If the aggregate policer is applied to more
than one device, the traffic on each device is counted separately and is limited per device.

Traffic from two different ports on the same device can be aggregated for policing purposes.

An aggregate policer can be applied to multiple classes in the same policy map.

An aggregate policer cannot be deleted if it is being used in a policy map. The no police aggregate Policy-map
Class Configuration mode command must first be used to delete the aggregate policer from all policy maps
before using the no qos aggregate-policer command.

Policing uses a token bucket algorithm. CIR represents the speed with which the token is added to the bucket.
CBS represents the depth of the bucket.

Example 1. The following example defines the parameters of a policer called policer1 that can be
applied to multiple classes in the same policy map. When the average traffic rate exceeds 124,000
kbps or the normal burst size exceeds 9600 bytes, the packet is dropped.

switchxxxxxx(config)# qos aggregate-policer policer1 124000 9600 exceed-action drop

Example 2. The following example defines the parameters of a Two-rate Three-color policer called
policer2 that can be applied to multiple classes in the same policy map. When the average traffic rate
exceeds 124,000 kbps or the normal burst size exceeds 9600 bytes, the packet is remarked. When
the average traffic rate exceeds 200,000 kbps or the normal burst size exceeds 9600 bytes, the packet
is dropped.

switchxxxxxx(config)# qos aggregate-policer policer2 124000 9600 exceed-action
policed-dscp-transmit peak 200000 19200 violate-action policed-dscp-transmit

Cisco Business Switches 350 Series CLI Guide

1022

QoS Commands

show qos aggregate-policer

show qos aggregate-policer

Use the show qos aggregate-policer Privileged EXEC mode mode command to display aggregate policers

This command is only available in QoS advanced mode.

Syntax

show qos aggregate-policer [aggregate-policer-name]

Parameters

aggregate-policer-name—Specifies the aggregate policer name. (Length: 1–32 characters)

Default Configuration

All policers are displayed.

Command Mode

Privileged EXEC mode

Example 1. The following example displays the parameters of the aggregate policer called Policer1.

switchxxxxxx# show qos aggregate-policer policer1
aggregate-policer policer1 96000 4800 exceed-action drop

not used by any policy map.

Cisco Business Switches 350 Series CLI Guide

1023

police aggregate

QoS Commands

police aggregate

Use the police aggregate Policy-map Class Configuration mode. command to apply an aggregate policer to
multiple class maps within the same policy map. Use the no form of this command to remove an existing
aggregate policer from a policy map.

This command is only available in QoS advanced mode.

Syntax

police aggregate aggregate-policer-name

no police aggregate aggregate-policer-name

Parameters

aggregate-policer-name—Specifies the aggregate policer name. (Length: 1–32 characters)

Command Mode

Policy-map Class Configuration mode.

User Guidelines

An aggregate policer can be applied to multiple classes in the same policy map. An aggregate policer cannot
be applied across multiple policy maps or interfaces.

Use the exit command to return to the Configuration mode. Use the end command to return to the Privileged
EXEC mode.

Example

The following example applies the aggregate policer called Policer1 to a class called class1 in a policy map
called policy1 and class2 in policy map policy2.

switchxxxxxx(config)# qos aggregate-policer policer1 124000 9600 exceed-action drop
switchxxxxxx(config)# policy-map policy1
switchxxxxxx(config-pmap)# class class1
switchxxxxxx(config-pmap-c)# police aggregate policer1
switchxxxxxx(config-pmap-c)# exit
switchxxxxxx(config-pmap)# exit
switchxxxxxx(config)# policy-map policy2
switchxxxxxx(config-pmap)# class class2
switchxxxxxx(config-pmap-c)# police aggregate policer1

Cisco Business Switches 350 Series CLI Guide

1024

QoS Commands

wrr-queue cos-map

wrr-queue cos-map

Use the wrr-queue cos-map Global Configuration mode command to map Class of Service (CoS) values to
a specific egress queue. Use the no form of this command to restore the default configuration.

Syntax

wrr-queue cos-map queue-id cos0... cos7

no wrr-queue cos-map [queue-id]

Parameters

• queue-id—Specifies the queue number to which the CoS values are mapped.

• cos0... cos7—Specifies up to 8 CoS values to map to the specified queue number. (Range: 0–7)

Default Configuration

The default CoS value mapping to 8 queues is as follows:

CoS value 0 is mapped to queue 1.

CoS value 1 is mapped to queue 2.

CoS value 2 is mapped to queue 3.

CoS value 3 is mapped to queue 6.

CoS value 4 is mapped to queue 5.

CoS value 5 is mapped to queue 8.

CoS value 6 is mapped to queue 8

CoS value 7 is mapped to queue 7

Command Mode

Global Configuration mode

User Guidelines

Use this command to distribute traffic to different queues.

Example

The following example maps CoS value 4 and 6 to queue 2.

switchxxxxxx(config)# wrr-queue cos-map 2 4 6

Cisco Business Switches 350 Series CLI Guide

1025

wrr-queue bandwidth

QoS Commands

wrr-queue bandwidth

Use the wrr-queue bandwidth Global Configuration mode command to assign Weighted Round Robin
(WRR) weights to egress queues. The weight ratio determines the frequency at which the packet scheduler
removes packets from each queue. Use the no form of this command to restore the default configuration.

Syntax

wrr-queue bandwidth weight1 weight2... weighting

no wrr-queue bandwidth

Parameters

weight1 weight1... weighting the ratio of bandwidth assigned by the WRR packet scheduler to the packet
queues. See explanation in the User Guidelines. Separate each value by a space. (Range for each weight:
0–255)

Default Configuration

wrr is disabled by default.

Command Mode

Global Configuration mode

User Guidelines

The ratio for each queue is defined as the queue weight divided by the sum of all queue weights (the normalized
weight). This sets the bandwidth allocation of each queue.

A weight of 0 indicates that no bandwidth is allocated for the same queue, and the shared bandwidth is divided
among the remaining queues. It is not recommended to set the weight of a queue to a 0 as it might stop
transmission of control-protocols packets generated by the device.

All queues participate in the WRR, excluding the expedite queues, whose corresponding weight is not used
in the ratio calculation.

Example

The following assigns WRR values to the queues.

switchxxxxxx(config)# priority-queue out num-of-queues 0
switchxxxxxx(config)# wrr-queue bandwidth 6 6 6 6 6 6 6 6

Cisco Business Switches 350 Series CLI Guide

1026

QoS Commands

priority-queue out num-of-queues

priority-queue out num-of-queues

Use the priority-queue out num-of-queues Global Configuration mode command to configure the number
of expedite queues. Use the no form of this command to restore the default configuration.

Syntax

priority-queue out num-of-queues number-of-queues

no priority-queue out num-of-queues

Parameters

• number-of-queues—Specifies the number of expedite (strict priority) queues. Expedite queues are

assigned to the queues with the higher indexes. (Range: 0–8 .There must be either 0 wrr queues or more
than one.

If number-of-queues = 0, all queues are assured forwarding (according to wrr weights) If the
number-of-queues = 8 , all the queues are expedited (strict priority queues).

Default Configuration

All queues are expedite queues.

Command Mode

Global Configuration mode

User Guidelines

An expedite queue is a strict priority queue, which is serviced until empty before the other lower priority
queues are serviced.

the weighted round robin (WRR) weight ratios are affected by the number of expedited queues, because there
are fewer queues participating in WRR. This indicates that the corresponding weight in the wrr-queue
bandwidth Interface Configuration mode command is ignored (not used in the ratio calculation).

Example

The following example configures the number of expedite queues as 2.

switchxxxxxx(config)# priority-queue out num-of-queues 2

Cisco Business Switches 350 Series CLI Guide

1027

traffic-shape

traffic-shape

QoS Commands

Use the traffic-shape Interface (Ethernet, Port Channel) Configuration mode command to configure the egress
port shaper. Use the no form of this command to disable the shaper.

Syntax

traffic-shape committed-rate [committed-burst]

no traffic-shape

Parameters

• committed-rate—Specifies the maximum average traffic rate (CIR) in kbits per second (kbps). (Range:

GE: 64kbps–maximum port speed ,10GE: 64Kbps–maximum port speed))

• committed-burst—Specifies the maximum permitted excess burst size (CBS) in bytes. (Range: 4096 -

16670940 bytes)

Default Configuration

The shaper is disabled.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The egress port shaper controls the traffic transmit rate (Tx rate) on a port.

Example

The following example sets a traffic shaper on gi1/0/1 when the average traffic rate exceeds 64 kbps or the
normal burst size exceeds 4096 bytes.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# traffic-shape 64 4096

Cisco Business Switches 350 Series CLI Guide

1028

QoS Commands

traffic-shape queue

traffic-shape queue

Use the traffic-shape queue Interface (Ethernet, Port Channel) Configuration mode command to configure
the egress queue shaper. Use the no form of this command to disable the shaper.

Syntax

traffic-shape queue queue-id committed-rate [committed-burst]

no traffic-shape queue queue-id

Parameters

queue-id—Specifies the queue number to which the shaper is assigned. (Range: 1-8 ).

• committed-rate—Specifies the average traffic rate (CIR) in kbits per second (kbps). (Range: 64

kbps–maximum port speed)

• committed-burst—Specifies the excess burst size (CBS) in bytes. (Range: 4096 - 16670940 bytes)

Default Configuration

The shaper is disabled.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The egress port shaper controls the traffic transmit rate (Tx rate) on a queue on a port.

Example

The following example sets a shaper on queue 1 on gi1/0/1 when the average traffic rate exceeds 124000 kbps
or the normal burst size exceeds 9600 bytes.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# traffic-shape queue 1 64 4096

Cisco Business Switches 350 Series CLI Guide

1029

qos wrr-queue wrtd

QoS Commands

qos wrr-queue wrtd

Use the qos wrr-queue wrtd Global Configuration mode command to enable Weighted Random Tail Drop
(WRTD). Use the no form of this command to disable WRTD.

Syntax

qos wrr-queue wrtd

no qos wrr-queue wrtd

Default

Disabled

Command Mode

Global Configuration mode

User Guidelines

The command is effective after reset.

Example

switchxxxxxx(config)# qos wrr-queue wrtd
This setting will take effect only after copying running configuration to startu
p configuration and resetting the device
switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

1030

QoS Commands

show qos wrr-queue wrtd

show qos wrr-queue wrtd

Use the show qos wrr-queue wrtd Privileged EXEC mode command to display the Weighted Random Tail
Drop (WRTD) configuration.

Syntax

show qos wrr-queue wrtd

Command Mode

Privileged EXEC mode

Example

switchxxxxxx(config)# show qos wrr-queue wrtd

Weighted Random Tail Drop is disabled
Weighted Random Tail Drop will be enabled after reset

Cisco Business Switches 350 Series CLI Guide

1031

show qos interface

QoS Commands

show qos interface

Use the show qos interface Privileged EXEC mode command to display Quality of Service (QoS) information
on the interface.

Syntax

show qos interface [buffers | queueing | policers | shapers] [interface-id]

Parameters

• buffers—Displays the buffer settings for the interface's queues. For GE ports, displays the queue depth

for each of the queues.

• queueing—Displays the queue's strategy (WRR or EF), the weight for WRR queues, the CoS to queue

map and the EF priority.

• policers—Displays all the policers configured for this interface, their settings, and the number of policers

currently unused (on a VLAN).

• shapers—Displays the shaper of the specified interface and the shaper for the queue on the specified

interface.

• interface-id—Specifies an interface ID. The interface ID can be one of the following types: Ethernet

port, or Port-channel.

Command Mode

Privileged EXEC mode

User Guidelines

If no parameter is specified with the show qos interface command, the port QoS mode (DSCP trusted, CoS
trusted, untrusted, and so on), default CoS value, DSCP-to-DSCP- map (if any) attached to the port, and policy
map (if any) attached to the interface are displayed. If a specific interface is not specified, the information for
all interfaces is displayed.

In case of Policers, Shapers and Rate Limit - only the ports which are not in the default configuration will be
showed.

Example 1—The following is an example of the output from the show qos interface command.

switchxxxxxx(config)# show qos interface gi1/0/1
Ethernet gi1/0/0/1
Default CoS: 0
Trust mode: disabled
Ingress Policy applied: AV1
Egress Policy applied: AV2
Default ACE ingress action: deny-all
Default ACE egress action: deny-all

Example 2—The following is an example of the output from the show qos interface queueing
command for 4 queues.

switchxxxxxx(config)# show qos interface queueing gi1/0/1
Ethernet gi1/0/0/1

Cisco Business Switches 350 Series CLI Guide

1032

QoS Commands

show qos interface

Ef - Priority
ena- 1
ena- 2
ena- 3
ena- 4

wrr bandwidth weights and EF priority:
qid-weights
1 - N/A
2 - N/A
3 - N/A
4 - N/A
Cos-queue map:
cos-qid
0 - 1
1 - 1
2 - 2
3 - 3
4 - 3
5 - 4
6 - 4
7 - 4

Example 3 —The following an example of the output from the show qos interface buffers command
for 8 queues.

switchxxxxxx(config)# show qos interface buffers gi1/0/1
gi1/0/1
Notify Q depth:
buffers gi1/0/1
Ethernet gi1/0/1
qid thresh0 thresh1 thresh2
100
1
100
2
100
3
100
4
100
5
100
6
100
7
100
8

100
100
100
100
100
100
100
100

80
80
80
80
80
80
80
80

Example 4—This is an example of the output from the show qos interface shapers command.f

switchxxxxxx(config)# show qos interface shapers gi1/0/1
gi1/0/1
Port shaper: enable
Committed rate: 64 kbps
Committed burst: 9600 bytes

QID
1
2
3
4
5
6
7
8

Status
Enable
Disable
Enable
Disable
Disable
Disable
Enable
Enable

Target
Committed
Rate [kbps]
64
N/A
N/A
N/A
N/A
N/A
N/A
N/A

Target
Committed
Burst [bytes]
17000
N/A
N/A
N/A
N/A
N/A
N/A
N/A

Example 5—This is an example of the output from show qos interface policer

show qos interface policer gi1/0/1

switchxxxxxx(config)#
Ethernet gi1/0/1
Ingress Policers:
Class map: A
Policer type: aggregate
Commited rate: 19 kbps

Cisco Business Switches 350 Series CLI Guide

1033

show qos interface

QoS Commands

Commited burst: 9600 bytes
Exceed-action: policed-dscp-transmit
Class map: B
Policer type: single
Commited rate: 19 kbps
Commited burst: 9600 bytes
Peak rate: 26 kbps
Peak burst: 9600 bytes
Exceed-action: policed-dscp-transmit
Violate-action: drop
Class map: C
Policer type: none
Egress Policers:
Class map: D

Cisco Business Switches 350 Series CLI Guide

1034

QoS Commands

qos map policed-dscp

qos map policed-dscp

Use the qos map policed-dscp Global Configuration mode command to configure the policed-DSCP map
for remarking purposes. Use the no form of this command to restore the default configuration.

Syntax

qos map policed-dscp [violation] dscp-list to dscp-mark-down

no qos map policed-dscp [violation] [dscp-list]

Parameters

• violation—Specifies the DSCP remapping in the violate action. If the keyword is not configured the the

command specifies the DSCP remapping in the exceed action.

• dscp-list—Specifies up to 8 DSCP values, separated by spaces. (Range: 0–63)

• dscp-mark-down—Specifies the DSCP value to mark down. (Range: 0–63)

Default Configuration

The default map is the Null map, which means that each incoming DSCP value is mapped to the same DSCP
value.

Command Mode

Global Configuration mode

User Guidelines

The original DSCP value and policed-DSCP value must be mapped to the same queue in order to prevent
reordering.

Example

The following example marks incoming DSCP value 3 as DSCP value 5 on the policed-DSCP map.

switchxxxxxx(config)# qos map policed-dscp 3 to 5

Cisco Business Switches 350 Series CLI Guide

1035

qos map dscp-queue

QoS Commands

qos map dscp-queue

Use the qos map dscp-queue Global Configuration mode command to configure the DSCP to queue map.
Use the no form of this command to restore the default configuration.

Syntax

qos map dscp-queue dscp-list to queue-id

no qos map dscp-queue [dscp-list]

Parameters

• dscp-list—Specifies up to 8 DSCP values, separated by spaces. (Range: 0– 63)

• queue-id—Specifies the queue number to which the DSCP values are mapped.

Default Configuration

The default map for 8 queues is as follows.

DSCP
value

9-15

0-8

17-23

32,
41-47

25-31

33-39

16,24,40,48-63

None

Queue-ID

2

1

3

7

4

5

6

8

Command Mode

Global Configuration mode

Example

The following example maps DSCP values 33, 40 and 41 to queue 1.

switchxxxxxx(config)# qos map dscp-queue 33 40 41 to 1

Cisco Business Switches 350 Series CLI Guide

1036

QoS Commands

qos trust (Global)

qos trust (Global)

Use the qos trust Global Configuration mode command to configure the system to the basic mode and trust
state. Use the no form of this command to return to the default configuration.

Syntax

qos trust {cos | dscp| cos-dscp}

no qos trust

Parameters

• cos— Specifies that ingress packets are classified with packet CoS values. Untagged packets are classified

with the default port CoS value.

• dscp—Specifies that ingress packets are classified with packet DSCP values.

• cos-dscp—Specifies that ingress packets are classified with packet DSCP values, if they are IP packets

and by CoS value if non IP.

Default Configuration

dscp

Command Mode

Global Configuration mode

User Guidelines

This command can be used only in QoS basic mode.

Packets entering a QoS domain are classified at its edge. When the packets are classified at the edge, the
switch port within the QoS domain can be configured to one of the trusted states because there is no need to
classify the packets at every switch within the domain.

Use this command to specify whether the port is trusted and which fields of the packet to use to classify traffic.

When the system is configured with trust DSCP, the traffic is mapped to the queue by the DSCP-queue map.

When the system is configured with trust CoS, the traffic is mapped to the queue by the CoS-queue map.

For an inter-QoS domain boundary, configure the port to the DSCP-trusted state and apply the
DSCP-to-DSCP-mutation map if the DSCP values are different in the QoS domains.

Example

The following example configures the system to the DSCP trust state.

switchxxxxxx(config)# qos trust dscp

Cisco Business Switches 350 Series CLI Guide

1037

qos trust (Interface)

QoS Commands

qos trust (Interface)

Use the qos trust Interface (Ethernet, Port Channel) Configuration mode command to enable port trust state
while the system is in the basic QoS mode. Use the no form of this command to disable the trust state on each
port.

Syntax

qos trust

no qos trust

Default Configuration

Each port is enabled while the system is in basic mode.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example

The following example configures gi1/0/1 to the default trust state.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# qos trust

Cisco Business Switches 350 Series CLI Guide

1038

QoS Commands

qos cos

qos cos

Use the qos cos Interface (Ethernet, Port Channel) Configuration mode command to define the default CoS
value of a port. Use the no form of this command to restore the default configuration.

Syntax

qos cos default-cos

no qos cos

Parameters

default-cos—Specifies the default CoS value (VPT value) of the port. If the port is trusted and the packet is
untagged, then the default CoS value become the CoS value. (Range: 0–7)

Default Configuration

The default CoS value of a port is 0.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use the default CoS value to assign a CoS value to all untagged packets entering the interface.

Example

The following example defines the port gi1/0/1 default CoS value as 3.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# qos cos 3

Cisco Business Switches 350 Series CLI Guide

1039

qos dscp-mutation

QoS Commands

qos dscp-mutation

Use the qos dscp-mutation Global Configuration mode command to apply the DSCP Mutation map to system
DSCP trusted ports. Use the no form of this command to restore the trusted port with no DSCP mutation.

Syntax

qos dscp-mutation

no qos dscp-mutation

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

Apply the DSCP-to-DSCP-mutation map to a port at the boundary of a Quality of Service (QoS) administrative
domain. If two QoS domains have different DSCP definitions, use the DSCP-to-DSCP-mutation map to
translate a set of DSCP values to match the definition of another domain. Apply the map to ingress and to
DSCP-trusted ports only. Applying this map to a port causes IP packets to be rewritten with newly mapped
DSCP values at the ingress ports. If applying the DSCP mutation map to an untrusted port, to class of service
(CoS), or to an IP-precedence trusted port.

Global trust mode must be DSCP or CoS-DSCP. In advanced CoS mode, ports must be trusted.

Example

The following example applies the DSCP Mutation map to system DSCP trusted ports.

switchxxxxxx(config)# qos dscp-mutation

Cisco Business Switches 350 Series CLI Guide

1040

QoS Commands

show qos map

show qos map

Use the show qos map Privileged EXEC mode command to display the various types of QoS mapping.

Syntax

show qos map [dscp-queue | dscp-dp| dscp-mutation | policed-dscp | policed-cos]

Parameters

• dscp-queue—Displays the DSCP to queue map.

• dscp-dp—Displays the DSCP to Drop Precedence map.

• policed-dscp—Displays the DSCP to DSCP remark table.

• dscp-mutation—Displays the DSCP-DSCP mutation table.

Default Configuration

Display all maps.

Command Mode

Privileged EXEC mode

Example 1. The following example displays the QoS mapping information:

switchxxxxxx(config)# show qos map dscp-queue
Dscp-queue map:

d1 : d2 0 1 2 3 4 5 6 7 8 9
------------------------------------
01 01 01 01 01 01 01 01 01 01
01 01 01 01 01 01 02 02 02 02
02 02 02 02 02 02 02 02 02 02
02 02 03 03 03 03 03 03 03 03
03 03 03 03 03 03 03 03 04 04
04 04 04 04 04 04 04 04 04 04
04 04 04 04

0 :
1 :
2 :
3 :
4 :
5 :
6 :

Example 2. The following example displays the dscp remapping information:

switchxxxxxx(config)# show qos map policed-dscp
Policed-dscp map (exceed):

d1 : d2 0 1 2 3 4 5 6 7 8 9
------------------------------------
00 01 02 03 04 05 06 07 08 09
10 11 12 13 14 15 16 17 18 19
20 21 22 23 24 25 26 27 28 29
30 31 32 33 34 35 36 37 38 39
40 41 42 43 44 45 46 47 48 49
50 51 52 53 54 55 56 57 58 59
21 21 21

0 :
1 :
2 :
3 :
4 :
5 :
6 :

Policed-dscp map (violate):

d1 : d2 0 1 2 3 4 5 6 7 8 9
------------------------------------
00 01 02 03 04 05 06 07 08 09
10 11 12 13 14 15 16 17 18 19

0 :
1 :

Cisco Business Switches 350 Series CLI Guide

1041

show qos map

QoS Commands

2 :
3 :
4 :
5 :
6 :

20 21 22 23 24 25 26 27 28 29
30 31 32 33 34 35 36 37 38 39
40 41 42 43 44 45 46 47 48 49
50 51 52 53 54 55 56 57 58 59
11 11 11

Cisco Business Switches 350 Series CLI Guide

1042

QoS Commands

clear qos statistics

clear qos statistics

Use the clear qos statistics Privileged EXEC mode command to clear the QoS statistics counters.

Syntax

clear qos statistics

Command Mode

Privileged EXEC mode

Example

The following example clears the QoS statistics counters.

switchxxxxxx(config)# clear qos statistics

Cisco Business Switches 350 Series CLI Guide

1043

qos statistics policer

QoS Commands

qos statistics policer

Use the qos statistics policer Interface (Ethernet, Port Channel) Configuration mode mode command to
enable counting in-profile and out-of-profile. Use the no form of this command to disable counting.

This command is relevant only when policers are defined.

Syntax

qos statistics policer policy-map-name class-map-name

no qos statistics policer policy-map-name class-map-name

Parameters

• policy-map-name—Specifies the policy map name. (Length: 1–32 characters)

• class-map-name—Specifies the class map name. (Length: 1–32 characters)

Default Configuration

Counting in-profile and out-of-profile is disabled.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example

The following example enables counting in-profile and out-of-profile on the interface.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# qos statistics policer policy1 class1

Cisco Business Switches 350 Series CLI Guide

1044

QoS Commands

qos statistics aggregate-policer

qos statistics aggregate-policer

Use the qos statistics aggregate-policer Global Configuration mode command to enable counting in-profile
and out-of-profile. Use the no form of this command to disable counting.

Syntax

qos statistics aggregate-policer aggregate-policer-name

no qos statistics aggregate-policer aggregate-policer-name

Parameters

aggregate-policer-name—Specifies the aggregate policer name. (Length: 1–32 characters)

Default Configuration

Counting in-profile and out-of-profile is disabled.

Command Mode

Global Configuration mode

Example

The following example enables counting in-profile and out-of-profile on the interface.

switchxxxxxx(config)# qos statistics aggregate-policer policer1

Cisco Business Switches 350 Series CLI Guide

1045

clear queue statistics

QoS Commands

clear queue statistics

Use the clear queue statistics Privileged EXEC mode command to clear the queue statistics.

Syntax

clear queue statistics [interface-id]

Parameters

• interface-id—Specifies an Ethernet port which queue statistics are cleared.

Command Mode

Privileged EXEC mode

User Guidelines

Use the clear queue statistics interface-id command to clear the queue statistics of the given port.

Use the clear queue statistics command to clear the queue statistics of all ports.

Example

The following example clears queue statistics of Ethernet port gi1/0/2:

switchxxxxxx# clear queue statistics gi1/0/2

Cisco Business Switches 350 Series CLI Guide

1046

QoS Commands

show queue statistics

show queue statistics

Use the show queue statistics Privileged EXEC mode command to display the queue statistics.

Syntax

show queue statistics [interface-id]

Parameters

• interface-id—Specifies an Ethernet port which queue statistics are displayed.

Default Configuration

N/A

Command Mode

Privileged EXEC mode

User Guidelines

Use the show queue statistics interface-id command to display the queue statistics of the given port.

Use the show queue statistics command to display the queue statistics of all ports.

Example

The following example displays queue statistics of Ethernet port gi1/0/2:

switchxxxxxx# show queue statistics gi1/0/2

Interface

Queue

Tx Pkts

Tx Bytes

Tail

Tail

---------------

-----

--------

--------

Dropped

Dropped

gi1/0/2

gi1/0/2

gi1/0/2

gi1/0/2

gi1/0/2

gi1/0/2

gi1/0/2

gi1/0/2

1

2

3

4

5

6

7

8

2700221

0

0

0

0

0

Pkts

--------

44543278

1850

257369

233017

50313150

0

0

0

0

0

0

0

0

0

12

0

0

0

Bytes

--------

0

0

0

0

10234

0

0

0

Cisco Business Switches 350 Series CLI Guide

1047

show qos statistics

QoS Commands

show qos statistics

Use the show qos statistics Privileged EXEC mode command to display Quality of Service statistical
information.

Syntax

show qos statistics

Command Mode

Privileged EXEC mode

User Guidelines

Use the show qos statistics command to display QoS statistics.

Up to 16 sets of counters can be enabled for policers. The counters can be enabled in the creation of the
policers.

Example

The following example displays Quality of Service statistical information.

switchxxxxxx# show qos statistics
Policers
---------

Policy

Map

Class

Map

----------

----------

Policy1

Policy1

Policy1

Policy1

Class1

Class2

Class1

Class2

In-Profile

Bytes

---------

756457

8759

75457

5326

Peak

Bytes

--------

5427

14

5

Violate

Bytes

---------

12

12

2

12

Interface

----------------

gi1/0/1

gi1/0/1

gi1/0/2

gi1/0/2

Aggregate Policers

-------------------

Name

In-Profile

----------

Bytes

Policer

---------

756457

Peak

Bytes

--------

5427

Violate

Bytes

---------

12

Cisco Business Switches 350 Series CLI Guide

1048

RADIUS Commands

This chapter contains the following sections:

• radius-server force-message-authenticator, on page 1050
• radius-server host, on page 1051
• radius-server key, on page 1053
• radius-server retransmit, on page 1054
• radius-server host source-interface, on page 1055
• radius-server host source-interface-ipv6, on page 1056
• radius-server timeout, on page 1057
• radius-server deadtime, on page 1058
• show radius-servers, on page 1059
• show radius-servers key, on page 1060

Cisco Business Switches 350 Series CLI Guide

1049

radius-server force-message-authenticator

RADIUS Commands

radius-server force-message-authenticator

Use the radius-server force-message-authenticator Global Configuration mode command to enable
Message-Authenticator attribute verification for all types of RADIUS responses received from the specified
RADIUS server. Use the no form of the command to restore the default setting.

Syntax

radius-server force-message-authenticator host {ip-address | hostname}

no radius-server force-message-authenticator host {ip-address | hostname}

Parameters

• ip-address—Specifies the RADIUS server host IP address. The IP address can be an IPv4, IPv6 or IPv6z

address.

• hostname—Specifies the RADIUS server host name. Translation to IPv4 addresses only is supported.

(Length: 1–158 characters. Maximum label length of each part of the hostname: 63 characters)

Default Configuration

Message-Authenticator attribute verification is enabled only for RADIUS responses that are part of a RADIUS
exchanges using EAP authentication.

Command Mode

Global Configuration mode

User Guidelines

Use the radius-server force-message-authenticator command to to ensure that all RADIUS responses from
the specified server include the Message-Authenticator attribute (RADIUS attribute 80. If this setting is
enabled, any type of RADIUS response that does not include the Message-Authenticator attribute will be
silently discarded and the event will be logged. If this setting is disabled, then RADIUS responses that do not
include this attribute will be discarded only if they are part of an RADIUS exchange using EAP authentication.

The command will fail if the RADIUS server specified in the host parameter was not previously configured
on the device using the radius-server host command.

Example

Example 1 - The following example enables Message-Authentication attribute verification for all types of
RADIUS responses received from RADIUS server 1.2.3.4.

switchxxxxxx(config)# radius-server force-message-authenticator host 1.2.3.4

Example 2 - In the following example the attempt to enable Message-Authentication attribute verification for
all types of RADIUS responses received from RADIUS server 5.6.7.8 fails because RADIUS server 5.6.7.8
is not configured on the device.

switchxxxxxx(config)# radius-server force-message-authenticator host 5.6.7.8
Command failed since RADIUS server 5.6.7.8 was not configured on the device.

Cisco Business Switches 350 Series CLI Guide

1050

RADIUS Commands

radius-server host

radius-server host

Use the radius-server host Global Configuration mode command to configure a RADIUS server host. Use
the no form of the command to delete the specified RADIUS server host.

Syntax

radius-server host {ip-address | hostname} [auth-port auth-port-number] [acct-port acct-port-number]
[timeout timeout] [retransmit retries] [deadtime deadtime] [key key-string] [priority priority] [usage {login
| dot1.x | all}]

encrypted radius-server host {ip-address | hostname} [auth-port auth-port-number] [acct-port
acct-port-number] [timeout timeout] [retransmit retries] [deadtime deadtime] [key encrypted-key-string]
[priority priority] [usage {login | dot1.x | all}]

no radius-server host {ip-address | hostname}

Parameters

• ip-address—Specifies the RADIUS server host IP address. The IP address can be an IPv4, IPv6 or IPv6z

address.

• hostname—Specifies the RADIUS server host name. Translation to IPv4 addresses only is supported.

(Length: 1–158 characters. Maximum label length of each part of the hostname: 63 characters)

• auth-port auth-port-number—Specifies the port number for authentication requests. If the port number

is set to 0, the host is not used for authentication. (Range: 0–65535)

• acct-port acct-port-number—Port number for accounting requests. The host is not used for accountings

if set to 0. If unspecified, the port number defaults to 1813.

• timeout timeout—Specifies the timeout value in seconds. (Range: 1–30)

• retransmit retries—Specifies the number of retry retransmissions (Range: 1–15)

• deadtime deadtime—Specifies the length of time in minutes during which a RADIUS server is skipped

over by transaction requests. (Range: 0–2000)

• key key-string—Specifies the authentication and encryption key for all RADIUS communications between
the device and the RADIUS server. This key must match the encryption used on the RADIUS daemon.
To specify an empty string, enter "". (Length: 0–128 characters). If this parameter is omitted, the
globally-configured radius key will be used.

• key encrypted-key-string—Same as key-string, but the key is in encrypted format.

• priority priority—Specifies the order in which servers are used, where 0 has the highest priority. (Range:

0–65535)

• usage {login | dot1.x | all}—Specifies the RADIUS server usage type. The possible values are:

login—Specifies that the RADIUS server is used for user login parameters authentication.

dot1.x—Specifies that the RADIUS server is used for 802.1x port authentication.

all—Specifies that the RADIUS server is used for user login authentication and 802.1x port authentication.

Cisco Business Switches 350 Series CLI Guide

1051

radius-server host

RADIUS Commands

Default Configuration

The default authentication port number is 1812.

If timeout is not specified, the global value (set in the radius-server timeout command) is used.

If retransmit is not specified, the global value (set in the radius-server retransmit command) is used.

If key-string is not specified, the global value (set in the radius-server key command) is used.

If the usage keyword is not specified, the all argument is applied.

Command Mode

Global Configuration mode

User Guidelines

To specify multiple hosts, this command is used for each host.

Example

The following example specifies a RADIUS server host with IP address 192.168.10.1, authentication request
port number 20, and a 20-second timeout period.

switchxxxxxx(config)# radius-server host 192.168.10.1 auth-port 20 timeout 20

Cisco Business Switches 350 Series CLI Guide

1052

RADIUS Commands

radius-server key

radius-server key

Use the radius-server key Global Configuration mode command to set the authentication key for RADIUS
communications between the device and the RADIUS daemon. Use the no form of this command to restore
the default configuration.

Syntax

radius-server key [key-string]

encrypted radius-server key [encrypted-key-string]

no radius-server key

Parameters

• key-string—Specifies the authentication and encryption key for all RADIUS communications between
the device and the RADIUS server. This key must match the encryption used on the RADIUS daemon.
(Range: 0–128 characters)

• encrypted-key-string—Same as the key-string parameter, but the key is in encrypted form.

Default Configuration

The key-string is an empty string.

Command Mode

Global Configuration mode

Example

The following example defines the authentication key for all RADIUS communications between the device
and the RADIUS daemon.

switchxxxxxx(config)# radius-server key enterprise-server

Cisco Business Switches 350 Series CLI Guide

1053

radius-server retransmit

RADIUS Commands

radius-server retransmit

Use the radius-server retransmit Global Configuration mode command to specify the number of times the
software searches the list of RADIUS server hosts. Use the no form of this command to restore the default
configuration.

Syntax

radius-server retransmit retries

no radius-server retransmit

Parameters

• retransmit retries—Specifies the number of retry retransmissions (Range: 1–15).

Default Configuration

The software searches the list of RADIUS server hosts 3 times.

Command Mode

Global Configuration mode

Example

The following example configures the number of times the software searches all RADIUS server hosts as 5.

switchxxxxxx(config)# radius-server retransmit 5

Cisco Business Switches 350 Series CLI Guide

1054

RADIUS Commands

radius-server host source-interface

radius-server host source-interface

Use the radius-server host source-interface Global Configuration mode command to specify the source
interface whose IPv4 address will be used as the Source IPv4 address for communication with IPv4 RADIUS
servers. Use the no form of this command to restore the default configuration.

Syntax

radius-server host source-interface interface-id

no radius-server host source-interface

Parameters

• interface-id—Specifies the source interface.

Default Configuration

The source IPv4 address is the IPv4 address defined on the outgoing interface and belonging to next hop IPv4
subnet.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface, the interface IP address belonging to next hop IPv4 subnet is
applied.

If the source interface is not the outgoing interface, the minimal IPv4 address defined on the source interface
is applied.

If there is no available IPv4 source address, a SYSLOG message is issued when attempting to communicate
with an IPv4 RADIUS server.

OOB cannot be defined as a source interface.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# radius-server host source-interface vlan 100

Cisco Business Switches 350 Series CLI Guide

1055

radius-server host source-interface-ipv6

RADIUS Commands

radius-server host source-interface-ipv6

Use the radius-server host source-interface-ipv6 Global Configuration mode command to specify the source
interface whose IPv6 address will be used as the source IPv6 address for communication with IPv6 RADIUS
servers. Use the no form of this command to restore the default configuration.

Syntax

radius-server host source-interface-ipv6 interface-id

no radius-server host source-interface-ipv6

Parameters

• interface-id—Specifies the source interface.

Default Configuration

The IPv6 source address is the IPv6 address defined on the outgoing interface and selected in accordance with
RFC6724.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface, the source IPv6 address is an IPv6 address defined on the
interfaces and selected in accordance with RFC 6724.

If the source interface is not the outgoing interface, the source IPv6 address is the minimal IPv6 address
defined on the source interface and matched to the scope of the destination IPv6 address is applied.

If there is no available source IPv6 address, a SYSLOG message is issued when attempting to communicate
with an IPv6 RADIUS server.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# radius-server host source-interface-ipv6 vlan 100

Cisco Business Switches 350 Series CLI Guide

1056

RADIUS Commands

radius-server timeout

radius-server timeout

Use the radius-server timeout Global Configuration mode command to set how long the device waits for a
server host to reply. Use the no form of this command to restore the default configuration.

Syntax

radius-server timeout timeout-seconds

no radius-server timeout

Parameters

• timeout timeout-seconds—Specifies the timeout value in seconds. (Range: 1–30).

Default Configuration

The default timeout value is 3 seconds.

Command Mode

Global Configuration mode

Example

The following example sets the timeout interval on all RADIUS servers to 5 seconds.

switchxxxxxx(config)# radius-server timeout 5

Cisco Business Switches 350 Series CLI Guide

1057

radius-server deadtime

RADIUS Commands

radius-server deadtime

Use the radius-server deadtime Global Configuration mode command to configure how long unavailable
RADIUS servers are skipped over by transaction requests. This improves RADIUS response time when servers
are unavailable. Use the no form of this command to restore the default configuration.

Syntax

radius-server deadtime deadtime

no radius-server deadtime

Parameters

• deadtime—Specifies the time interval in minutes during which a RADIUS server is skipped over by

transaction requests. (Range: 0–2000).

Default Configuration

The default deadtime interval is 0.

Command Mode

Global Configuration mode

Example

The following example sets all RADIUS server deadtimes to 10 minutes.

switchxxxxxx(config)# radius-server deadtime 10

Cisco Business Switches 350 Series CLI Guide

1058

RADIUS Commands

show radius-servers

show radius-servers

Use the show radius-servers Privileged EXEC mode command to display the RADIUS server settings.

Syntax

show radius-servers

Command Mode

Privileged EXEC mode

Example

The following example displays RADIUS server settings:

switchxxxxxx# show radius-servers
IP address Port Port Time

Dead

Auth Acc Out

Retransmission time

Attribute
---------- ---- ---- ---- ------------- ------
Global
172.16.1.1 1812 1813 125 Global
172.16.1.2 1812 1813 102 8
Global
Global values
--------------
TimeOut: 3
Retransmit: 3
Deadtime: 0
Source IPv4 interface: vlan 120
Source IPv6 interface: vlan 10

Deadtime
status

Priority Usage Force MA

------
Dead
Up

-------- -----

1

2

All

All

enable
disabled

Cisco Business Switches 350 Series CLI Guide

1059

show radius-servers key

RADIUS Commands

show radius-servers key

Use the show radius-servers key Privileged EXEC mode command to display the RADIUS server key
settings.

Syntax

show radius-servers key

Command Mode

Privileged EXEC mode

Example

The following example displays RADIUS server key settings.

switchxxxxxx# show radius-servers key

IP address
----------
172.16.1.1
172.16.1.2

Key (Encrypted)
---------------
1238af77aaca17568f1298cced165fec
1238af77aaca17568f12988601fcabed

Global key (Encrypted)
----------------------
1238af77aaca17568f1298bc5476ddad

Cisco Business Switches 350 Series CLI Guide

1060

Radius Server Commands

This chapter contains the following sections:

• allowed-time-range, on page 1062
• clear radius server accounting, on page 1063
• clear radius server rejected users, on page 1064
• clear radius server statistics, on page 1065
• clear radius server unknown nas, on page 1066
• privilege-level, on page 1067
• radius server accounting-port, on page 1068
• radius server authentication-port, on page 1069
• radius server enable, on page 1070
• radius server group, on page 1071
• radius server nas secret, on page 1072
• radius server traps accounting, on page 1074
• radius server traps authentication success, on page 1075
• radius server user, on page 1076
• show radius server accounting, on page 1077
• show radius server configuration, on page 1079
• show radius server group, on page 1080
• show radius server rejected users, on page 1081
• show radius server statistics, on page 1083
• show radius server nas secret, on page 1085
• show radius server user, on page 1086
• show radius server unknown nas, on page 1087
• vlan, on page 1088

Cisco Business Switches 350 Series CLI Guide

1061

allowed-time-range

Radius Server Commands

allowed-time-range

To define the time user can connect, use the allowed-time-range command in Radius Server Group
Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

allowed-time-range time-range-name

no allowed-time-range

Parameters

• time-range-name—Specifies the time range name configured by the time range command.

Command Mode

Radius Server Group Configuration mode

User Guidelines

Use the allowed-time-range command, to define the time users can connect.

Use the no form of the command, to return to the default.

Example

The following example assigns an periodical time interval:

switchxxxxxx(config)# time-range connection-time
switchxxxxxx(config-time-range)# periodic mon 12:00 to wed 12:00
switchxxxxxx(config-time-range)# exit
switchxxxxxx(config)# radius server group developers
switchxxxxxx(config-radser-group)# allowed-time-range connection-time
switchxxxxxx(config-radser-group)# exit
switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

1062

Radius Server Commands

clear radius server accounting

clear radius server accounting

To clear the Radius Accounting cache, use the clear radius server accounting command in Privileged EXEC
mode.

Syntax

clear radius server accounting

Command Mode

Privileged EXEC mode

User Guidelines

Use the clear radius server accounting command, to clear the Radius Accounting cache.

Example

The following example clears the Radius Accounting cache:

switchxxxxxx(config)# clear radius server accounting

Cisco Business Switches 350 Series CLI Guide

1063

clear radius server rejected users

Radius Server Commands

clear radius server rejected users

To clear the Radius Rejected Users cache, use the clear radius server rejected users command in Privileged
EXEC mode.

Syntax

clear radius server rejected users

Command Mode

Privileged EXEC mode

User Guidelines

Use the clear radius server rejected users command, to clear the Radius Rejected Users cache.

Example

The following example clears the Radius Rejected Users cache:

switchxxxxxx(config)# clear radius server rejected users

Cisco Business Switches 350 Series CLI Guide

1064

Radius Server Commands

clear radius server statistics

clear radius server statistics

To clear the Radius server counters, use the clear radius server statistics command in Privileged EXEC
mode.

Syntax

clear radius server statistics [ip-address]

Parameters

• ip-address—Specifies the RADIUS client host IP address. The IP address can be an IPv4, IPv6 or IPv6z

address.

Command Mode

Privileged EXEC mode

User Guidelines

Use the clear radius server statistics command without parameter to clear the all counters.

Use the clear radius server statistics command with parameter to clear the counters of a given NAS.

Example

The following example clears the Radius server counters:

switchxxxxxx(config)# clear radius server statistics

Cisco Business Switches 350 Series CLI Guide

1065

clear radius server unknown nas

Radius Server Commands

clear radius server unknown nas

To clear the Radius Unknown NAS cache, use the clear radius server unknown nas command in Privileged
EXEC mode.

Syntax

clear radius server unknown nas

Command Mode

Privileged EXEC mode

User Guidelines

Use the clear radius server unknown nas command, to clear the Radius Unknown NAS cache.

Example

The following example clears the Radius Unknown NAS cache:

switchxxxxxx(config)# clear radius server unknown nas

Cisco Business Switches 350 Series CLI Guide

1066

Radius Server Commands

privilege-level

privilege-level

To define the user privilege level, use the privilege-level command in Radius Server Group Configuration
mode. To restore the default configuration, use the no form of this command.

Syntax

privilege-level level

no privilege-level

Parameters

• level—Specifies the user privilege level. (Range: 1-15)

Default Configuration

1

Command Mode

Radius Server Group Configuration mode

User Guidelines

Use the privilege-level command, to define the privilege level of users of the given group.

Use the no form of the command, to return to the default.

A value of privilege level is passed to a Radius client in the Access-Accept message in the Vendor-Specific(26)
attribute. The attribute is only passed to login users.

Example

The following example specified privilege level 15 for users of the developers group:

switchxxxxxx(config)# radius server group developers
switchxxxxxx(config-radser-group)# privilege-level 15
switchxxxxxx(config-radser-group)# exit
switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

1067

radius server accounting-port

Radius Server Commands

radius server accounting-port

To define the accounting UDP port used for accounting requests, use the radius server accounting-port
command in Global Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

radius server accounting-port udp-port

no radius server accounting-port

Parameters

• udp-port—Specifies the UDP port number for accounting requests. (Range: 1–59999)

Default Configuration

1813

Command Mode

Global Configuration mode

User Guidelines

Use the radius server accounting-port command, to define an UDP port for accounting requests.

Use the no radius server accounting-port command, to restore the default UDP accounting port.

Example

The following example defines port 2083 as an accounting UDP port:

switchxxxxxx(config)# accounting-port 2083

Cisco Business Switches 350 Series CLI Guide

1068

Radius Server Commands

radius server authentication-port

radius server authentication-port

To define the authentication UDP port used for authentication requests, use the radius server
authentication-port command in Global Configuration mode. To restore the default configuration, use the
no form of this command.

Syntax

radius server authentication-port udp-port

no radius server authentication-port

Parameters

• udp-port—Specifies the UDP port number for authentication requests. (Range: 1–59999)

Default Configuration

1812

Command Mode

Global Configuration mode

User Guidelines

Use the radius server authentication-port command, to define an UDP port for authentication requests.

Use the no radius server authentication-port command, to restore the default UDP authentication port.

Example

The following example defines port 2083 as an authentication UDP port:

switchxxxxxx(config)# authentication-port 2083

Cisco Business Switches 350 Series CLI Guide

1069

radius server enable

Radius Server Commands

radius server enable

To enable Embedded Radius server, use the radius server enable command in Global Configuration mode.
To restore the default configuration, use the no form of this command.

Syntax

radius server enable

no radius server enable

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

Use the radius server enable command, to enable Embedded Radius server.

Use the no radius server enable command, to disable Embedded Radius server.

Example

The following example enables Embedded Radius server:

switchxxxxxx(config)# radius server enable

Cisco Business Switches 350 Series CLI Guide

1070

Radius Server Commands

radius server group

radius server group

To enter into Radius Server Group Configuration mode and create this group if it does not exist, use the radius
server group command in Global Configuration mode. To restore the default configuration, use the no form
of this command.

Syntax

radius server group group-name

no radius server group [group-name]

Parameters

• group-name—Specifies a name of the group. (Length: 1–32 characters)

Default Configuration

The group does not exist.

Command Mode

Global Configuration mode

User Guidelines

Use the radius server group command, to enter into the Radius Server Group Configuration mode. If this
group does not exist it is created automatically.

Use the no radius server group group-name command, to delete one group.

Use the no radius server group command, to delete all groups.

A group cannot be deleted, if there is a user referencing to this group.

The Radius server supports up to 50 groups.

Example

The following example creates group developers, if it does not exist, and enters into its context:

switchxxxxxx(config)# radius server group developers
switchxxxxxx(config-radser-group)#

Cisco Business Switches 350 Series CLI Guide

1071

radius server nas secret

Radius Server Commands

radius server nas secret

To create a secret key, use the radius server nas secret key command in Global Configuration mode. To
delete the key, use the no form of this command.

Syntax

radius server nas secret key key {default | ip-address}

radius server nas secret ip-address

encrypted radius server nas secret key encrypted-key {default | ip-address}

no radius server nas secret [default | ip-address]

Parameters

• key—Specifies the authentication and encryption key for communications between the device and users

of the given group. (Range: 0–128 characters)

• encrypted-key—Same as the key-string parameter, but the key is in encrypted form.

• default—Specifies the default secret key that will be applied to communicate with NASs that do not

have a private key.

• ip-address—Specifies the RADIUS client host IP address. The IP address can be an IPv4, IPv6 or IPv6z

address.

Default Configuration

The secret key does not exist.

Command Mode

Global Configuration mode

User Guidelines

Use the radius server nas secret key key default command, to defines a key that will be applied to
communicate with NASs that do not have a private key.

Use the radius server nas secret key key ip-address command, to defines a key that will be applied to
communicate with the specified NAS.

Use the radius server nas secret ip-address command, to defines that the default secret key will be applied
to communicate with the specified NAS.

If a NAS is not defined by this command all messages received from this NAS will be dropped.

The Radius server supports up to 50 NASs.

Use the no radius server nas secret default command, to delete the default key.

Use the no radius server nas secret ip-address command, to remove the given NAS and its secret key.

Use the no radius server nas secret command, to delete all NASs and all secret keys.

Cisco Business Switches 350 Series CLI Guide

1072

Radius Server Commands

radius server nas secret

Example 1. The following example defines a default secret key:

switchxxxxxx(config)# radius server nas secret key qrBut56$#qw default

Example 2. The following example defines a default secret key:

switchxxxxxx(config)# radius server nas secret key qrBut56$#qw default

Example 3. The following example defines a NAS using the default secret key:

switchxxxxxx(config)# radius server nas secret 10.05.10.1

Cisco Business Switches 350 Series CLI Guide

1073

radius server traps accounting

Radius Server Commands

radius server traps accounting

To enable sending accounting traps, use the radius server traps accounting command in Global Configuration
mode. To disable the traps, use the no form of this command.

Syntax

radius server traps accounting

no radius server traps accounting

Default Configuration

Accounting traps are disabled.

Command Mode

Global Configuration mode

User Guidelines

A rate limit is applied to the traps: not more than one trap of this type can be sent in 10 seconds.

Example

The following example enables sending accounting traps:

switchxxxxxx(config)# radius server traps accounting

Cisco Business Switches 350 Series CLI Guide

1074

Radius Server Commands

radius server traps authentication success

radius server traps authentication success

To enable sending traps when a user is successfully authorized, use the radius server traps authentication
success command in Global Configuration mode. To disable the traps, use the no form of this command.

Syntax

radius server traps authentication success

no radius server traps authentication success

Default Configuration

Success traps are disabled.

Command Mode

Global Configuration mode

User Guidelines

A rate limit is applied to the traps: not more than one trap of this type can be sent in 10 seconds.

Example

The following example enables sending traps when a user is successfully authorized:

switchxxxxxx(config)# radius server traps authentication success

Cisco Business Switches 350 Series CLI Guide

1075

radius server user

Radius Server Commands

radius server user

To create a user, use the radius server user command in Global Configuration mode. To restore the default
configuration, use the no form of this command.

Syntax

radius server user username user-name group group-name password unencrypted-password

no radius server user [username user-name | group group-name]

Parameters

• user-name—Specifies the user name. (Length: 1–32 characters)

• group-name—Specifies the user group name. (Length: 1–32 characters)

• unencrypted-password—Specifies the user password. (Length: 1–64 characters)

Default Configuration

The user does not exist.

The Radius server supports up to 1024 users.

Command Mode

Global Configuration mode

User Guidelines

Use the radius server user command, to create a new user.

Use the no radius server user username user-name command to delete one user.

Use the no radius server user group group-name command to delete users of the given group.

Use the no radius server user command to delete all users.

Example

The following example creates a new user with name bob of group developer with password Aerv#136dSsT:

switchxxxxxx(config)# radius server user username bob group developers password Aerv#136dSsT

Cisco Business Switches 350 Series CLI Guide

1076

Radius Server Commands

show radius server accounting

show radius server accounting

To display user accounting information, use the show radius server accounting command in Privileged
EXEC mode.

Syntax

show radius server accounting [username user-name]

Parameters

• user-name—Specifies the user name. (Length: 1–32 characters)

Command Mode

Privileged EXEC mode

User Guidelines

The Radius server saves the last 1024 accounting logs in a cycle file on FLASH.

Use the show radius server accounting username user-name command, to display accounting information
of one user.

Use the show radius server accounting command, to display accounting information of all users.

Example 1. The following example displays accounting information of all users:

switchxxxxxx# show radius server accounting
29-Jun-14, 16:00, Stop

User: Bob
Accounting Session Time: 6 hours,15 minutes
Authenticated by: local
NAS Address: 10.23.1.3
User Address: 160.134.7.8
Termination Reason: User Request

29-Jun-14, 12:04, Start

User: Alisa
Authenticated by: Radius
NAS Address: 10.23.1.3
User Address: 00:12:cf:00:1c:25
NAS Port: 10

29-Jun-14, 12:04, Stop

User: Alisa
Accounting Session Time: 2 days,2 hours,10 minutes
Authenticated by: Radius
NAS Address: 10.23.1.3
User Address: 00:12:cf:00:1c:25
Termination Reason: User Request

*20-Feb-2008, 9:20, Date and Time were updated to 29-Jun-14, 11:00
20-Feb-2014, 9:05, Start

User: Bob
Authenticated by: local
NAS Address: 10.23.1.3
User Address: 160.134.7.8

*20-Feb-2008, 9:00, Reboot

Example 2. The following example displays accounting information of one user Bob:

Cisco Business Switches 350 Series CLI Guide

1077

show radius server accounting

Radius Server Commands

switchxxxxxx# show radius server accounting username Bob:
29-Jun-14, 16:00, Stop

User: Bob
Accounting Session Time: 6 hours,15 minutes
Authenticated by: Radius
NAS Address: 10.23.1.3
User Address: 160.134.7.8
Termination Reason: User Request

*20-Feb-2008, 9:20, Date and Time were updated to 29-Jun-14, 11:00
20-Feb-2014, 9:05, Start

User: Bob
Authenticated by: Radius
NAS Address: 10.23.1.3
User Address: 160.134.7.8

*20-Feb-2008, 9:00, Reboot

Cisco Business Switches 350 Series CLI Guide

1078

Radius Server Commands

show radius server configuration

show radius server configuration

To display Radius Server global configuration, use the show radius server configuration command in
Privileged EXEC mode.

Syntax

show radius server configuration

Command Mode

Privileged EXEC mode

User Guidelines

Use the show radius server configuration command, to display Radius server global configuration.

Example

The following example displays radius server global configuration:

switchxxxxxx# show radius server configuration
Radius Server Status: Enabled
Authentication UDP port: 1812 (default)
Accounting UDP port: 1813 (default)
Authentication failure traps are enabled
Authentication success traps are enabled
Accounting traps are enabled

Cisco Business Switches 350 Series CLI Guide

1079

show radius server group

Radius Server Commands

show radius server group

To display a Radius Server group configuration, use the show radius server group command in Privileged
EXEC mode.

Syntax

show radius server group [group-name]

Parameters

• group-name—Specifies a name of the group. (Length: 1–32 characters)

Command Mode

Privileged EXEC mode

User Guidelines

Use the show radius server group group-name command, to display one group.

Use the show radius server group command, to display all groups.

Example

The following example displays radius server groups.

switchxxxxxx# show radius server group
Group gr1

VLAN: 124
Privilege Level: 15
Time Range: ConnectionTime
Group Users: develop, designers

Group gr2

Privilege Level: 1 (default)
Group Users: bob

Cisco Business Switches 350 Series CLI Guide

1080

Radius Server Commands

show radius server rejected users

show radius server rejected users

To display rejected users, use the show radius server rejected users command in Privileged EXEC mode.

Syntax

show radius server rejected users [username user-name]

Parameters

• user-name—Specifies the user name. (Length: 1–32 characters)

Command Mode

Privileged EXEC mode

User Guidelines

The Radius server saves the last 1024 rejected authentication requests in a cycle file on FLASH.

The Radius server saves the last 1024 accounting logs in a cycle file on FLASH.

Use the show radius server rejected users user-name command, to display one rejected user.

Use the show radius server rejected users command, to display all rejected users.

Example 1. The following example displays all rejected users:

switchxxxxxx# show radius server rejected users
30-Jun-14 16:44

User Name: Jack
User Type: Login
NAS Address: 10.1.1.1
User Address: 10.23.4.3
Reason: Unknown user

30-Jun-14 16:04

User Name: Bob
User Type: Login
NAS Address: 10.1.1.1
User Address: 10.23.4.3
Reason: Illegal password

*20-Feb-2008, 9:20, Date and Time were updated to 29-Jun-14, 11:00
20-Feb-08 16:24

User Name: Robert
User Type: 802.1x
NAS Address: 10.1.1.1
NAS Port: 2
User Address: 00:67:67:96:ac:21
Reason: Not Supported EAP method

20-Feb-08 14:14

User Name: Alisa
User Type: 802.1x
NAS Address: 10.1.1.1
NAS Port: 2
User Address: 00:67:67:96:ac:21
Reason: Not allowed at this time

*20-Feb-2008, 9:00, Reboot

Cisco Business Switches 350 Series CLI Guide

1081

show radius server rejected users

Radius Server Commands

Example 2. The following example displays one rejected user Bob:

switchxxxxxx# show radius server rejected users 30-Jun-14 16:04

User Name: Bob
User Type: Login
NAS Address: 10.1.1.1
User Address: 10.23.4.3
Reason: Illegal password

*20-Feb-2008, 9:20, Date and Time were updated to 29-Jun-14, 11:00
*20-Feb-2008, 9:00, Reboot

Cisco Business Switches 350 Series CLI Guide

1082

Radius Server Commands

show radius server statistics

show radius server statistics

To display the Radius server counters, use the show radius server statistics command in User EXEC mode.

Syntax

show radius server statistics [ip-address]

Parameters

• ip-address—Specifies the RADIUS client host IP address. The IP address can be an IPv4, IPv6 or IPv6z

address.

Command Mode

User EXEC mode

User Guidelines

Use the show radius server statistics command to display the Radius server counters defined in RFC4669
and RFC4671.

Use the show radius server statistics command without parameter to display the global counters.

Use the show radius server statistics command with parameter to display the counters of the given NAS.

Example 1. The following example displays the Radius server global counters:

switchxxxxxx# show radius server statistics
Number of incoming packets on the authentication port: 120
Number of incoming Access-Requests from unknown addresses: 0
Number of duplicate incoming Access-Requests: 3
Number of sent Access-Accepts: 100
Number of sent Access-Rejects: 17
Number of sent Access-Challenges: 0
Number of incoming malformed Access-Requests: 0
Number of incoming Authentication-Requests with Bad Authenticator: 0
Number of incoming Authentication packets with other mistakes: 0
Number of incoming Authentication packets of unknown type: 0
Number of incoming packets on the accounting port: 80
Number of incoming Accounting-Requests from unknown addresses: 12
Number of incoming Accounting-Requests from unknown addresses: 0
Number of incoming duplicate Accounting-Requests: 0
Number of sent Accounting-Responses: 0
Number of incoming malformed Accounting-Requests: 0
Number of incoming Accounting-Requests with Bad Authenticator: 0
Number of incoming Accounting packets with other mistakes: 0
Number of incoming not recorded Accounting-Requests: 0
Number of incoming Accounting packets of unknown type: 0

Example 2. The following example displays the Radius server counters of the given SNA: secret
keys:

switchxxxxxx# show radius server statistics 1.1.1.1
NAS: 1.1.1.1
Number of incoming packets on the authentication port: 120
Number of duplicate incoming Access-Requests: 3
Number of sent Access-Accepts: 100

Cisco Business Switches 350 Series CLI Guide

1083

show radius server statistics

Radius Server Commands

Number of sent Access-Rejects: 17
Number of sent Access-Challenges: 0
Number of incoming malformed Access-Requests: 0
Number of incoming Authentication-Requests with Bad Authenticator: 0
Number of incoming Authentication packets with other mistakes: 0
Number of incoming Authentication packets of unknown type: 0
Number of incoming packets on the accounting port: 80
Number of incoming Accounting-Requests from unknown addresses: 0
Number of incoming duplicate Accounting-Requests: 0
Number of sent Accounting-Responses: 0
Number of incoming malformed Accounting-Requests: 0
Number of incoming Accounting-Requests with Bad Authenticator: 0
Number of incoming Accounting packets with other mistakes: 0
Number of incoming not recorded Accounting-Requests: 0
Number of incoming Accounting packets of unknown type: 0

Cisco Business Switches 350 Series CLI Guide

1084

Radius Server Commands

show radius server nas secret

show radius server nas secret

To display secret keys, use the show radius server nas secret command in Privileged EXEC mode.

Syntax

show radius server nas secret [default | ip-address]

Parameters

• default—Specifies the default secret key hat will be applied to communicate with NASs that do not have

a private key.

• ip-address—Specifies the RADIUS client host IP address. The IP address can be an IPv4, IPv6 or IPv6z

address.

Command Mode

Privileged EXEC mode

User Guidelines

Use the show radius server nas secret default command, to display the default secret key.

Use the show radius server nas secret ip-address command, to display the given NAS secret key.

Use the show radius server nas secret command, to display all secret keys.

Example 1. The following example displays all secret keys:

switchxxxxxx# show radius server nas secret
Default Secret Key's MD5:1238af77aaca17568f1298cced1255cc

NAS Address

Secret Key’s MD5

------------------------- --------------------------------
1238af77aaca17568f1298cced165fec
10.1.35.3
default
10.2.37.6
1238af77aaca17568f12988601fcabed
3000:1231:1230:9cab:1384
1238af77aaca17568f1298bc5476ddad
3001:ab11::9cda:0981

Example 2. The following example displays the default secret key:

switchxxxxxx# show radius server nas secret default
Default Secret Key's MD5:1238af77aaca17568f1298cced1255cc

Example 3. The following example displays the secret key of one given NAS:

switchxxxxxx# show radius server nas secret 10.1.35.3

NAS ID

Secret Key’s MD5

------------------------- --------------------------------
1238af77aaca17568f1298cced165fec
10.1.35.3

Cisco Business Switches 350 Series CLI Guide

1085

show radius server user

Radius Server Commands

show radius server user

To display a Radius Server user configuration, use the show radius server user command in Privileged EXEC
mode.

Syntax

show radius server user [username user-name] | [group group-name]

Parameters

• user-name—Specifies the user name. (Length: 1–32 characters)

• group-name—Specifies a name of the group. (Length: 1–32 characters)

Command Mode

Privileged EXEC mode

User Guidelines

Use the show radius server user username user-name command, to display one user.

Use the show radius server user group group-name command, to display all users of the given group.

Use the show radius server user command, to display all users.

Examples

The following example displays one user bob:

switchxxxxxx# show radius server user username bob
User bob

Group: developers
Password’s MD5: 1238af77aaca17568f1298cced1255cc

Cisco Business Switches 350 Series CLI Guide

1086

Radius Server Commands

show radius server unknown nas

show radius server unknown nas

To display unknown NASes, use the show radius server unknown nas command in Privileged EXEC mode.

Syntax

show radius server unknown nas

Command Mode

Privileged EXEC mode

User Guidelines

The Radius server saves the last 100 unknown NASes in a cycle cache.

Example

The following example displays Radius requests received from unknown NASes:

switchxxxxxx# show radius server unknown nas
30-Jun-14 16:44 NAS Address: 10.1.1.1
30-Jun-14 16:04 NAS Address: 10.1.1.1
*20-Feb-08, 9:20, Date and Time were updated to 29-Jun-14, 11:00
20-Feb-08 16:24 NAS Address: 10.1.1.1
20-Feb-08 14:14 NAS Address: 10.1.1.1
*20-Feb-08, 9:00, Reboot

Cisco Business Switches 350 Series CLI Guide

1087

vlan

vlan

Radius Server Commands

To define Radius Assigned VLAN, use the vlan command in Radius Server Group Configuration mode. To
restore the default configuration, use the no form of this command.

Syntax

vlan {id vlan-id | name vlan-name}

no vlan

Parameters

• vlan-id—Specifies a VLAN ID. (Range: 1-4094)

• vlan-name—Specifies a name of the VLAN. (Length: 1–32characters)

Default Configuration

No Radius Assigned VLAN.

Command Mode

Radius Server Group Configuration mode

User Guidelines

Use the vlan command, to assign the VLAN to a radius client. This Radius Assigned VLAN is passed to a
Radius client in the Access-Accept message in the following attributes:

• Tunnel-Type(64)

• Tunnel-Medium-Type(65)

• Tunnel-Private-Group-ID(81)

If a VLAN is not assigned these attributes are not included in the Access-Accept message.

Use the no form of the command, to delete VLAN assignment.

Example

The following example assigns VLAN 100 to users of the developers group and VLAN with name management
of users of the managers group:

switchxxxxxx(config)# radius server group developers
switchxxxxxx(config-radser-group)# vlan id 100
switchxxxxxx(config-radser-group)# exit
switchxxxxxx(config)# radius server group managers
switchxxxxxx(config-radser-group)# vlan name management
switchxxxxxx(config-radser-group)# exit
switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

1088

Rate Limit and Storm Commands

This chapter contains the following sections:

• clear storm-control counters, on page 1090
• rate-limit (Ethernet), on page 1091
• rate-limit vlan, on page 1092
• storm-control, on page 1093
• show rate-limit interface, on page 1095
• show rate-limit vlan, on page 1096
• show storm-control interface, on page 1097

Cisco Business Switches 350 Series CLI Guide

1089

clear storm-control counters

Rate Limit and Storm Commands

clear storm-control counters

To clear storm control counters, use the clear storm-control counters command in Privileged EXEC mode.

Syntax

clear storm-control counters [broadcast | multicast | unicast] [interface interface-id]

Parameters

• broadcast—(Optional) Clear Broadcast storm control counters.

• multicast—(Optional) Clear Multicast storm control counters.

• unicast—(Optional) Clear Unicast Unknown storm control counters.

• interface interface-id—(Optional) Clear storm control counters for the specified Ethernet port.

Command Mode

Privileged EXEC mode

User Guidelines

The switch clears the port counter of a given traffic type when storm control for this traffic type on this port
is enabled.

Use this command to clear the storm control counters when storm control is running.

Use the clear storm-control counters command to clear all the storm control counters of all Ethernet ports.

Use the clear storm-control counters interface interface-id command to clear all the storm control counters
of a given port.

Use the clear storm-control counters broadcast | multicast | unicast command to clear all storm control
counters of a given traffic type of all Ethernet ports.

Use the clear storm-control counters broadcast | multicast | unicast interface interface-id command to
clear one storm control counter of a given traffic type and of a given port.

Example 1. The following example clears all storm control counters of all ports:

switchxxxxxx# clear storm-control counters

Example 2. The following example clears all storm control counters of port gi1/0/1:

switchxxxxxx# clear storm-control counters interface gi1/0/1

Example 3. The following example clears broadcast storm control counter of all ports:

switchxxxxxx# clear storm-control counters broascat

Example 4. The following example clears multicast storm control counter of port gi1/0/1:

switchxxxxxx# clear storm-control counters multicast interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

1090

Rate Limit and Storm Commands

rate-limit (Ethernet)

rate-limit (Ethernet)

To limit the incoming traffic rate on a port, use the rate-limit command in Interface (Ethernet) Configuration
mode. To disable the rate limit, use the no form of this command.

Syntax

rate-limit committed-rate-kbps [burst committed-burst-bytes]

no rate-limit

Parameters

• committed-rate-kbps—Specifies the maximum number of kilobits per second of ingress traffic on a port.

The range is 3–maximal port speed.

• burst committed-burst-bytes—(Optional) The burst size in bytes. (Range: 3000–19173960). If unspecified,

defaults to 128K.

Default Configuration

Rate limiting is disabled.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

The calculated rate includes the 20 bytes of Ethernet framing overhead (preamble+SFD+IPG).

The Rate Limit does not calculate traffic controlled by Storm control. The real allowed rate will be sum of
the rate specified by the command and the rates specified by the Storm control commands for particular traffic
types.

Example

The following example limits the incoming traffic rate on gi1/0/1 to 150,000 kbps.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# rate-limit 150000

Cisco Business Switches 350 Series CLI Guide

1091

rate-limit vlan

rate-limit vlan

Rate Limit and Storm Commands

To limit the incoming traffic rate for a VLAN in, use the rate-limit vlan command in Global Configuration
mode. To disable the rate limit, use the no form of this command.

Syntax

rate-limit vlan vlan-id committed-rate committed-burst-bytes

no rate-limit vlan vlan-id

Parameters

• vlan-id—Specifies the VLAN ID.

• committed-rate—Specifies the average traffic rate (CIR) in kbits per second (kbps). (Range: 3-57982058)

• committed-burst—Specifies the maximum burst size (CBS) in bytes. (Range: 3000–19173960).

Default Configuration

Rate limiting is disabled.

Command Mode

Global Configuration mode

User Guidelines

The calculated rate includes the 20 bytes of Ethernet framing overhead (preamble+SFD+IPG).

Traffic policing in a policy map takes precedence over VLAN rate limiting. If a packet is subject to traffic
policing in a policy map and is associated with a VLAN that is rate limited, the packet is counted only in the
traffic policing of the policy map.

VLAN Rate limiting is calculated separately for each unit in a stack.

It does not work in conjunction with IP Source Guard.

Example

The following example limits the rate on VLAN 11 to 150000 kbps and the committed burst size to 9600
bytes.

switchxxxxxx(config)# rate-limit vlan 11 150000 9600

Cisco Business Switches 350 Series CLI Guide

1092

Rate Limit and Storm Commands

storm-control

storm-control

To enable broadcast, multicast, or unicast storm control on a port, use the storm-control command in Interface
(Ethernet) Configuration mode. To return to default, use the no form of this command.

Syntax

storm-control broadcast {level level | kbps kbps} [trap] [shutdown]

no storm-control broadcast

storm-control multicast [registered | unregistered] {level level | kbps kbps} [trap] [shutdown]

no storm-control multicast

storm-control unicast {level level | kbps kbps} [trap] [shutdown]

no storm-control unicast

no storm-control

Parameters

• broadcast—Enables broadcast storm control on the port.

• multicast [registered | unregistered]—Enables either all multicast, only registered multicast, or only

unregistered multicast storm control on the port.

• unicast—Enables unicast unknown storm control on the port.

• level level—Suppression level in percentage. Block the flooding of storm packets when the value specified

for level is reached. (Range 1-100)

• kbps kbps—Maximum of kilobits per second of Broadcast traffic on a port. (Range 1 –10000000)

• trap—(Optional) Sends a trap when a storm occurs on a port. If the keyword is not specified the trap is

not sent.

• shutdown—(Optional) Shut down a port when a storm occurs on the port. If the keyword is not specified

extra traffic is discarded.

Default Configuration

Storm control is disabled.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

The calculated rate includes the 20 bytes of Ethernet framing overhead (preamble+SFD+IPG).

The rate limit on a port does not calculate traffic controlled by storm control on this port.

Use the no storm-control command to disable storm control of all traffic type on the port.

Cisco Business Switches 350 Series CLI Guide

1093

storm-control

Example

Rate Limit and Storm Commands

The following example enables broadcast, multicast, and unicast unknown storm control on port gi1/0/1 and
multicast unregistered and unicast unknown on port gi1/0/2:

Enable group 1 for registered and unregistered multicast traffic on interface gi1/0/1. Extra traffic is discarded.

switchxxxxxx(config)# interface gi1/0/1 switchxxxxxx(config-if)# storm-control broadcast kbps 10000
shutdown switchxxxxxx(config-if)# storm-control multicast level 20 trap switchxxxxxx(config-if)#
storm-control unicast level 5 trap shutdown switchxxxxxx(config-if)# exit switchxxxxxx(config)# interface
gi1/0/2 switchxxxxxx(config-if)# storm-control multicast unregistered level 5 trap shutdown
switchxxxxxx(config-if)# storm-control unicast level 5 trap switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1094

Rate Limit and Storm Commands

show rate-limit interface

show rate-limit interface

To display rate limit configuration on an interface, use the show rate-limit interface command in Privileged
EXEC mode.

Syntax

show rate-limit interface [interface-id]

Parameters

• interface-id—(Optional) Specifies an Ethernet port. If the argument is not configured rate limit

configuration of all Ethernet ports is displayed.

Command Mode

Privileged EXEC mode

Examples

The following is an example of the output from the show rate-limit interface:

switchxxxxxx> show rate-limit interface

Interface

------------

gi1/0/1gi1/0/2

Rate Limit (kbps)

Burst (Bytes)

-----------------------

-----------------

80000

100000

512

1024

Cisco Business Switches 350 Series CLI Guide

1095

show rate-limit vlan

Rate Limit and Storm Commands

show rate-limit vlan

To display rate limit configuration on a VLAN, use the show rate-limit vlan command in Privileged EXEC
mode.

Syntax

show rate-limit vlan [vlan-id]

Parameters

• vlan-id—(Optional) Specifies a VLAN ID If the argument is not configured rate limit configuration of

all VLANs is displayed.

Default Configuration

N/A

Command Mode

Privileged EXEC mode

Examples

The following is an example of the output from the show rate-limit vlan:

switchxxxxxx> show rate-limit vlan 1075

VLAN

--------

1075

Rate Limit (kbps)

Burst (Bytes)

-----------------------

-----------------

100000

1024

Cisco Business Switches 350 Series CLI Guide

1096

Rate Limit and Storm Commands

show storm-control interface

show storm-control interface

To display storm control information of an interface, use the show storm-control interface command in
Privileged EXEC mode.

Syntax

show storm-control interface [interface-id]

Parameters

• interface-id—(Optional) Specifies an Ethernet port. If the argument is not configured storm control

information of all Ethernet ports is displayed.

Command Mode

Privileged EXEC mode

Examples

The following is an example of the output from the show storm-control interface:

switchxxxxxx> show storm-control interface
gi1/0/1

Broadacst
Rate: 5%
Action: Shutdown
Passed Counter (Bytes): 124997
Dropped Counter (Bytes): 10
Last drop time: 27-Jan-2014, 09:00:01
Multicast
Rate: 1000 kbps
Action: Drop, Trap
Passed Counter (Bytes):112876
Dropped Counter (Bytes):1272
Last drop time: 20-Jan-2014, 11:00:01
Unicast
Rate: 10%
Action: drop
Passed Counter (Bytes): 27653
Dropped Counter (Bytes):1
Last drop time: 27-Feb-2014, 09:00:01

gi1/0/2

Broadacst
Rate: 5%
Action: Shutdown
Passed Counter (Bytes): 124997
Dropped Counter (Bytes): 0
Last drop time:
Multicast Unregistred
Rate: 5%
Action: Shutdown
Traffic Type:Broadcast
Passed Counter (Bytes): 124997
Dropped Counter (Bytes): 3
Last drop time: 26-Jan-2014, 10:00:01

Cisco Business Switches 350 Series CLI Guide

1097

show storm-control interface

Rate Limit and Storm Commands

Cisco Business Switches 350 Series CLI Guide

1098

RIP Commands

This chapter contains the following sections:

• clear rip statistics, on page 1100
• default-information originate, on page 1101
• default-metric, on page 1102
• ip rip authentication key-chain, on page 1103
• ip rip authentication mode, on page 1104
• ip rip authentication-key, on page 1105
• ip rip default-information originate, on page 1106
• ip rip distribute-list in, on page 1107
• ip rip distribute-list out, on page 1108
• ip rip offset, on page 1109
• ip rip passive-interface, on page 1110
• ip rip distribute-list in, on page 1111
• ip rip distribute-list out, on page 1112
• ip rip offset, on page 1113
• ip rip passive-interface, on page 1114
• ip rip shutdown, on page 1115
• network, on page 1116
• passive-interface (RIP), on page 1117
• redistribute (RIP), on page 1118
• router rip, on page 1120
• show ip rip database, on page 1121
• show ip rip peers, on page 1123
• shutdown , on page 1124

Cisco Business Switches 350 Series CLI Guide

1099

clear rip statistics

RIP Commands

clear rip statistics

The clear rip statistics Privileged EXEC mode command clears statistics counters of all interfaces and all
peers.

Syntax

clear rip statistics

Parameters

N/A

Command Mode

Privileged EXEC mode

Example

The following example shows how to clear all counters:

switchxxxxxx# clear rip statistics

Cisco Business Switches 350 Series CLI Guide

1100

RIP Commands

default-information originate

default-information originate

To generate a default route into Routing Information Protocol (RIP), use the default-information originate
command in Router Configuration mode. To disable this feature, use the no form of this command.

Syntax

default-information originate

no default-information originate

Default Configuration

Default route is not generated by RIP.

Command Mode

Router RIP Configuration mode

User Guidelines

Use the command to enable generation of a default route.

Example 1 - The following example shows how to originate a default route:

switchxxxxxx(config)# router rip switchxxxxxx(config-rip)# default-information originate
switchxxxxxx(config-rip)# exit

Cisco Business Switches 350 Series CLI Guide

1101

default-metric

default-metric

RIP Commands

The default-metric Router RIP configuration mode command sets the default metric value when RIP advertises
routes derived by other protocols (for example, by static configuration). The no format of the command sets
the default value.

Syntax

default-metric [metric-value]

no default-metric

Parameters

• metric-value—Default metric value. Range 1-15.

Default Configuration

metric-value—1.

Command Mode

Router RIP Configuration mode

Example

The following example shows how to set the default metric to 2:

switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# default-metric 2
switchxxxxxx(config-rip)# exit

Cisco Business Switches 350 Series CLI Guide

1102

RIP Commands

ip rip authentication key-chain

ip rip authentication key-chain

The ip rip authentication key-chain IP Interface Configuration mode command specifies the set of keys that
can be used for and specifies the type of authentication. The no format of the command returns to default.

Syntax

ip rip authentication key-chain name-of-chain

no ip rip authentication key-chain

Parameters

• name-of-chain—Specifies the name of key set. The name-change parameter points to list of keys specified

by the key chain CLI command.

Default Configuration

No defined key chain.

Command Mode

IP Configuration mode

User Guidelines

Use the ip rip authentication key-chain IP Interface Configuration mode command to define a key chain
name. Only one key chain may be defined per an IP interface. Each the ip rip authentication key-chain
command overrides the previous definition.

In order to have a smooth rollover of keys in a key chain, a key should be configured with a lifetime that starts
several minutes before the lifetime of the previous key expires.

Example

The following example shows how to define a chain name:

switchxxxxxx(config)# interface ip 1.1.1.1
switchxxxxxx(config-route-map)# ip rip authentication key-chain alpha
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1103

ip rip authentication mode

RIP Commands

ip rip authentication mode

The ip rip authentication mode IP Interface Configuration mode command enables authentication. The no
format of the command returns to default.

Syntax

ip rip authentication mode {text | md5}

no ip rip authentication mode

Parameters

• text—Specifies the clear text authentication.

• md5—Specifies the MD5 authentication.

Default Configuration

No authentication.

Command Mode

IP Configuration mode

User Guidelines

If you enable the MD5 authentication, you must configure a key chain name with the ip rip authentication
key-chain interface command. If a key chain is not defined for the IP interface or there is not a valid key then
RIP packets are not sent on the IP interface and received IP interface packets are dropped.

If you enable the clear text authentication, you must configure a password with the ip rip authentication-key
interface command. If a password is not defined for the IP interface then RIP packets are not sent on the IP
interface and received IP interface packets are dropped.

Example

The following example shows how to set the md5 mode:

switchxxxxxx(config)# interface ip 1.1.1.1

switchxxxxxx(config-route-map)# ip rip authentication mode md5
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1104

RIP Commands

ip rip authentication-key

ip rip authentication-key

To assign a password to be used by neighboring routers that are using the RIP clear text authentication, use
the ip rip authentication-key command in interface configuration mode. To remove the RIP password, use
the no form of this command.

Syntax

ip rip authentication-key password

no ip rip authentication-key

Parameters

• password—Any continuous string of characters that can be entered from the keyboard up to 16 characters

in length.

Default Configuration

No password is specified.

Command Mode

IP Configuration mode

User Guidelines

The password created by this command is used as a "key" that is inserted directly into the RIP header when
the switch software originates routing protocol packets. A separate password can be assigned to each
subnetwork. All neighboring routers on the same subnetwork must have the same password to be able to
exchange RIP information.

Only one password may be defined per IP interface. Each ip rip authentication-key command overrides the
previous definition.

Example

The following example shows how to define a password:

switchxxxxxx(config)# interface ip 1.1.1.1

switchxxxxxx(config-route-map)# ip rip authentication mode text
switchxxxxxx(config-route-map)# ip rip authentication-key alph$$12
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1105

ip rip default-information originate

RIP Commands

ip rip default-information originate

The ip rip default-information originate IP Interface generates a metric for a default route in RIP. The no
format of the command disables the feature.

Syntax

ip rip default-information originate {disable | metric}

no ip rip default-information originate

Parameters ranges

• disable—Do not send the default route.

• metric—Default route metric value. Range: 1-15.

Default Configuration

The RIP behavior is specified by the default-information originate command.

Command Mode

IP Configuration mode

User Guidelines

Use the command to override the RIP behavior specified by the default-information originate command on
a given IP interface.

Example

The following example shows how to enable sending of default route with metric 3:

switchxxxxxx(config)# interface ip 1.1.1.1

switchxxxxxx(config-route-map)# ip rip default-information originate 3
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1106

RIP Commands

ip rip distribute-list in

ip rip distribute-list in

The ip rip distribute-list in IP configuration mode command enables filtering of routes in incoming RIP
update messages. The no format of the command disables the filtering.

Syntax

ip rip distribute-list access access-list-name in

no ip rip distribute-list in

Parameters

• access-list-name—Standard IP access list name, up to 32 characters. The list defines which routes in

incoming RIP update messages are to be accepted and which are to be suppressed.

Default Configuration

No filtering

Command Mode

IP Configuration mode

User Guidelines

Each network from a received RIP update message is evaluated by the access list and it is accepted only if it
is permitted by the list. See the ip access-list (IP standard) and ip prefix-list commands for details.

Example

The following example shows how to define input filtering:

witchxxxxxx(config)# interface ip 1.1.1.1
switchxxxxxx(config-route-map)# ip rip distribute-list access 5 in
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1107

ip rip distribute-list out

RIP Commands

ip rip distribute-list out

The ip rip distribute-list out IP configuration mode command enables filtering of routes in outgoing RIP
update messages. The no format of the command disables the filtering.

Syntax

ip rip distribute-list access access-list-name out

no ip rip distribute-list out

Parameters

• access-list-name—Standard IP access list name, up to 32 characters. The list defines which routes in

outgoing RIP update messages are to be sent and which are to be suppressed.

Default Configuration

No filtering

Command Mode

IP Configuration mode

User Guidelines

Each network from the IP Forwarding table is evaluated by the list and it is included in the RIP update message
only if it is permitted by the list. See the ip access-list (IP standard) and ip prefix-list commands.

Example

The following example shows how to define outgoing filtering:

switchxxxxxx(config)# interface ip 1.1.1.1
switchxxxxxx(config-route-map)# ip rip distribute-list access 5 out
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1108

RIP Commands

ip rip offset

ip rip offset

The ip rip offset IP configuration mode command defines a metric added to incoming routes. The no format
of the command returns to default.

Syntax

ip rip offset offset

no ip rip offset

Parameters

• offset—Specifies the offset to be applied to received routes. Range: 1-15.

Default Configuration

offset—1.

Command Mode

IP Configuration mode

User Guidelines

Example

The following example shows how to set offset to 2:

switchxxxxxx(config)# interface ip 1.1.1.1

switchxxxxxx(config-route-map)# ip rip offset 2
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1109

ip rip passive-interface

RIP Commands

ip rip passive-interface

The ip rip passive-interface IP Interface Configuration mode command disables sending RIP packets on an
IP interface. The no format of the command re-enables the sending RIP packets.

Syntax

ip rip passive-interface

no ip rip passive-interface

Default Configuration

RIP messages are sent.

Command Mode

IP Configuration mode

User Guidelines

Use the ip rip passive-interface command to stop sending RIP messages on the giving IP interface. To stop
RIP messages being sent on all interfaces, use the passive-interface command.

Note. The no ip rip passive-interface command does not override the passive-interface command.

Example

The following example shows how to stop the sending of RIP messages:

switchxxxxxx(config)# interface ip 1.1.1.1
switchxxxxxx(config-route-map)# ip rip passive-interface
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1110

RIP Commands

ip rip distribute-list in

ip rip distribute-list in

The ip rip distribute-list in IP configuration mode command enables filtering of routes in incoming RIP
update messages. The no format of the command disables the filtering.

Syntax

ip rip distribute-list access access-list-name in

no ip rip distribute-list in

Parameters

• access-list-name—Standard IP access list name, up to 32 characters. The list defines which routes in

incoming RIP update messages are to be accepted and which are to be suppressed.

Default Configuration

No filtering

Command Mode

IP Configuration mode

User Guidelines

Each network from a received RIP update message is evaluated by the access list and it is accepted only if it
is permitted by the list. See the ip access-list (IP standard) and ip prefix-list commands for details.

Example

The following example shows how to define input filtering:

witchxxxxxx(config)# interface ip 1.1.1.1
switchxxxxxx(config-route-map)# ip rip distribute-list access 5 in
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1111

ip rip distribute-list out

RIP Commands

ip rip distribute-list out

The ip rip distribute-list out IP configuration mode command enables filtering of routes in outgoing RIP
update messages. The no format of the command disables the filtering.

Syntax

ip rip distribute-list access access-list-name out

no ip rip distribute-list out

Parameters

• access-list-name—Standard IP access list name, up to 32 characters. The list defines which routes in

outgoing RIP update messages are to be sent and which are to be suppressed.

Default Configuration

No filtering

Command Mode

IP Configuration mode

User Guidelines

Each network from the IP Forwarding table is evaluated by the list and it is included in the RIP update message
only if it is permitted by the list. See the ip access-list (IP standard) and ip prefix-list commands.

Example

The following example shows how to define outgoing filtering:

switchxxxxxx(config)# interface ip 1.1.1.1
switchxxxxxx(config-route-map)# ip rip distribute-list access 5 out
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1112

RIP Commands

ip rip offset

ip rip offset

The ip rip offset IP configuration mode command defines a metric added to incoming routes. The no format
of the command returns to default.

Syntax

ip rip offset offset

no ip rip offset

Parameters

• offset—Specifies the offset to be applied to received routes. Range: 1-15.

Default Configuration

offset—1.

Command Mode

IP Configuration mode

User Guidelines

Example

The following example shows how to set offset to 2:

switchxxxxxx(config)# interface ip 1.1.1.1

switchxxxxxx(config-route-map)# ip rip offset 2
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1113

ip rip passive-interface

RIP Commands

ip rip passive-interface

The ip rip passive-interface IP Interface Configuration mode command disables sending RIP packets on an
IP interface. The no format of the command re-enables the sending RIP packets.

Syntax

ip rip passive-interface

no ip rip passive-interface

Default Configuration

RIP messages are sent.

Command Mode

IP Configuration mode

User Guidelines

Use the ip rip passive-interface command to stop sending RIP messages on the giving IP interface. To stop
RIP messages being sent on all interfaces, use the passive-interface command.

Note. The no ip rip passive-interface command does not override the passive-interface command.

Example

The following example shows how to stop the sending of RIP messages:

switchxxxxxx(config)# interface ip 1.1.1.1
switchxxxxxx(config-route-map)# ip rip passive-interface
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1114

RIP Commands

ip rip shutdown

ip rip shutdown

The ip rip shutdown IP Interface configuration mode command changes the RIP interface state from enabled
to disabled. The no format of the command returns the state to a value of enabled.

Syntax

ip rip shutdown

no ip rip shutdown

Default Configuration

Enabled

Command Mode

IP Configuration mode

User Guidelines

Use the ip rip shutdown CLI command to disable RIP on an IP interface without removing its configuration.The
ip rip shutdown CLI command may be applied only to RIP interfaces created by the network CLI command.
The ip rip shutdown CLI command does not remove the RIP interface configuration.

Example

The following example shows how to disable RIP on the 1.1.1.1 IP interface:

switchxxxxxx(config)# interface ip 1.1.1.1
switchxxxxxx(config-route-map)# ip rip shutdown
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1115

network

network

RIP Commands

The network Router RIP configuration mode command enables RIP on the given IP interfaces. The no format
of the command disables RIP on the given IP interfaces and removes its interface configuration.

Syntax

network ip-address [shutdown]

no network ip-address

Parameters

• ip-address—An IP address of a switch IP interface.

• shutdown—RIP is enabled on the interface in the shutdown state.

Command Mode

Router RIP Configuration mode

User Guidelines

RIP can be defined only on manually-configured IP interfaces, meaning that RIP cannot be defined on an IP
address defined by DHCP or on a default IP address.

Use the network CLI command with the shutdown keyword to create RIP on an interface if you are going
to change the default values of RIP configuration and the use the no ip rip shutdown CLI command.

Use the no network CLI command to remove RIP on an IP interface and remove its interface configuration.

Example 1.The following example shows how to enable RIP on IP interface 1.1.1.1 with the default
interface configuration:

switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# network 1.1.1.1
switchxxxxxx(config-rip)# exit

Example 2. The following example enables RIP on 1.1.1.1 in the shutdown state, configures metric
and starts RIP:

switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# network 1.1.1.1 shutdown
switchxxxxxx(config-rip)# exit
switchxxxxxx(config)# interface ip 1.1.1.1
switchxxxxxx(config-route-map)# ip rip offset 2
switchxxxxxx(config-route-map)# no ip rip shutdown
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1116

RIP Commands

passive-interface (RIP)

passive-interface (RIP)

To disable sending routing updates on all RIP IP interfaces, use the passive-interface command in Router
RIP Configuration mode. To re-enable the sending of RIP routing updates, use the no form of this command.

Syntax

passive-interface

no passive-interface

Default Configuration

Routing updates are sent on all IP RIP interfaces.

Command Mode

Router RIP Configuration mode

User Guidelines

After using the passive-interface command, you can then configure individual interfaces where adjacencies
are desired using the no ip rip passive-interface command.

Example

The following example sets all IP interfaces as passive and then excludes the IP interface 1.1.1.1:

switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# passive-interface
switchxxxxxx(config-rip)# network 1.1.1.1
switchxxxxxx(config-rip)# network 2.2.2.2
switchxxxxxx(config-rip)# network 3.3.3.3
switchxxxxxx(config-rip)# exit
switchxxxxxx(config)# interface ip 1.1.1.1
switchxxxxxx(config-route-map)# no ip rip passive-interface
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1117

redistribute (RIP)

RIP Commands

redistribute (RIP)

To redistribute routes from one routing domain into a RIP routing domain, use the redistribute command in
the Router RIP configuration mode. To disable redistribution, use the no form of this command.

Syntax

redistribute protocol [metric {metric-value | transparent}]

no redistribute protocol

Parameters

• protocol—Source protocol from which routes are being redistributed. It can be one of the following

keywords: connected or static.

• metric transparent—Causes RIP to use the source protocol metric for redistributed routes as the RIP

metric. Only routes with metric less than 16 are redistributed.

• metric metric-value—Specifies the metric assigned to the redistributed routes. The value supersedes the

metric value specified using the default-metric command.

Default Configuration

Route redistribution is disabled

Command Mode

Router RIP Configuration mode

User Guidelines

Routes distributed to the source protocol are never redistributed by it

The connected keyword is used to redistribute to RIP routes that correspond to defined IP interfaces on which
RIP is not enabled. By default, the RIP Routing Table includes only routes that correspond only to IP interfaces
on which it is enabled.

The static keyword is used to redistribute to RIP static routes. By default, static routes are not redistributed
to RIP.

If the metric value is set by the route map (by the set metric command) then the value will supersede the
metric value specified by the metric-value argument.

If the metric keyword is not defined, then the metric is specified by the default-metric CLI command is
assigned to the redistributed routes. If metric value set by the route map is equal or bigger than 16 the route
is not redistributed.

Changing or disabling any keyword will not affect the state of other keywords.

Removing options that you have configured for the redistribute command requires careful use of the no form
of the redistribute command to ensure that you obtain the result that you are expecting.

Example 1.The following example enables redistribution of static routes by RIP with transparent
metric:

Cisco Business Switches 350 Series CLI Guide

1118

RIP Commands

redistribute (RIP)

switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# redistribute static metric transparent
switchxxxxxx(config-rip)# exit

Example 2. The following example enables redistribution of static routes by RIP with transparent
metric and then changes the metric to default:

switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# redistribute static metric transparent
switchxxxxxx(config-rip)# no redistribute static metric transparent
switchxxxxxx(config-rip)# exit

Example 3. The following example enables redistribution of static routes by RIP with default metric
and then changes the metric to transparent:

switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# redistribute static
switchxxxxxx(config-rip)# redistribute static metric transparent
switchxxxxxx(config-rip)# exit

Example 4. The following example enables redistribution of static routes by RIP with transparent
metric. The second redistribute command does not affect:

switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# redistribute static metric transparent
switchxxxxxx(config-rip)# redistribute static
switchxxxxxx(config-rip)# exit

Example 5. The following example disables redistribution of static routes by RIP:

switchxxxxxx(config)# router rip
switchxxxxxx(config-rip)# no redistribute static
switchxxxxxx(config-rip)# exit

Cisco Business Switches 350 Series CLI Guide

1119

router rip

router rip

RIP Commands

The router rip Global Configuration mode command specifies the Router RIP mode and enables it if it was
disabled. The no format of the command disables RIP globally and removes its configuration.

Syntax

router rip

no router rip

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

RIP supports the following global states:

• disabled

• enabled

• shutdown

If a value of the RIP global state is disabled (default value), RIP is not operational and cannot be configured.
When this state is set, the RIP configuration is removed. The state may be set by the no router rip CLI
command from any RIP global state.

If a value of the RIP global state is shutdown, RIP is not operational, but can be configured. When the state
is set the RIP configuration is not changed. The state may be set by the shutdown CLI command from the
enabled RIP global state.

If the value of the RIP global state is enabled, RIP is operational, and can be configured. The state can be set
by the router rip CLI command from the disabled RIP global state and by the no shutdown CLI command
from the shutdown RIP global state.

Example

The following example shows how to enable RIP globally:

router rip

Cisco Business Switches 350 Series CLI Guide

1120

RIP Commands

show ip rip database

show ip rip database

The show ip rip database Privileged EXEC mode command displays information about the RIP Database.

Syntax

show ip rip database [all | brief | ip-address]

Parameters

• all—Provides the full RIP database information about all RIP interfaces. The option is assumed if the

parameter is omitted.

• brief—Provides a summary view of the RIP database information.

• ip-address—Provides the full RIP database information about the given IP Address.

Command Mode

Privileged EXEC mode

Example 1—The following example shows the full RIP database information about all RIP interfaces
is displayed:

switchxxxxxx# show ip rip database
RIP is enabled
RIP Administrative state is UP
Default metric value is 1
Redistributing is enabled from
Connected:
Metric is default-metric
Static:

Metric is transparent
IP Interface: 1.1.1.1
Administrative State is enabled
IP Interface Offset is 10
Default Originate Metric is 12
Authentication Type is text
Password is afGRwitew%3
IN Filtering Type is Access List
Access List Name is 10
OUT Filtering Type is Access List
Access List Name is List12
IP Interface: 2.2.2.2
Administrative State is enabled
IP Interface Offset is 2
No Default Originate Metric
Authentication Type is MD5
Key Chain Name is chain1
IN Filtering Type is Access List
Access List Name is 10
OUT Filtering Type is Access List
Access List Name is 12
IP Interface: 3.3.3.3
Administrative State is enabled
IP Interface Offset is 1
IP Interface is passive

Cisco Business Switches 350 Series CLI Guide

1121

show ip rip database

RIP Commands

Default Originate Metric 3, on passive too
No Authentication
No IN Filtering
No OUT Filtering
IP Interface: 4.4.4.4
Administrative State is shutdown
IP Interface Offset is 1
No Authentication
No IN Filtering
No OUT Filtering

Example 2—The following example shows the full RIP database information about a given IP
address is displayed:

switchxxxxxx# show ip rip database 1.1.1.1
RIP is enabled
RIP Administrative state is UP
Default Originate Metric: on passive only
Default metric value is 1
Redistributing is enabled from
Connected
Metric is default-metric
Static
Metric is transparent

IP Interface: 1.1.1.1
Administrative State is enabled
IP Interface Offset is 10
Default Originate Metric is 12
Authentication Type is text
Password is afGRwitew%3
IN Filtering Type is Access List
Access List Name is 10
OUT Filtering Type is Access List
Access List Name is List12

Example 3—The following example shows the brief RIP database information about all RIP interfaces
is displayed:

switchxxxxxx# show ip rip database brief
RIP is enabled
RIP Administrative state is UP
Default Originate Metric: route-map is condition
Default metric value is 1
Redistributing is enabled from
Connected
Metric is default-metric
Static
Metric is transparent

IP Interface

Admin
State

Offset Passive

Interface Metric Type

Default Auth. IN Filt. OUT Filt.
Type

Type

--------------- -------- ------- -------- ------- ----- ------- ---------
100.100.100.100 enabled
enabled
2.2.2.2
enabled
3.3.3.3
shutdown
4.4.4.4

No
No
Yes
No

Access
Access

Access
Access

10
2
1
1

Text
MD5

12

Example 4—The following example shows the output when RIP is disabled:

switchxxxxxx# show ip rip database
RIP is disabled

Cisco Business Switches 350 Series CLI Guide

1122

RIP Commands

show ip rip peers

show ip rip peers

The show ip rip peers Privileged EXEC mode command displays information about RIP Peers.

Syntax

show ip rip peers

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# show ip rip peers
RIP is enabled
Static redistributing is enabled with Default metric
Default redistributing metric is 1
Address

Last
Update

------------ ---------
1.1.12
2.2.2.3

00:10:17
00:10:01

Received
Bad Packets
----------
-
-

Received
Bad Route
---------
1

-

Cisco Business Switches 350 Series CLI Guide

1123

shutdown

shutdown

RIP Commands

The shutdown Router RIP configuration mode command sets the RIP global state to shutdown. The no
format of the command sets the RIP global state to enabled.

Syntax

shutdown

no shutdown

Default Configuration

Enabled

Command Mode

Router RIP Configuration mode

User Guidelines

Use the shutdown CLI command to stop RIP globally without removing its configuration

Example

The following example shows how to shutdown RIP globally:

router rip
shutdown

exit

Cisco Business Switches 350 Series CLI Guide

1124

RMON commands

This chapter contains the following sections:

• rmon alarm, on page 1126
• show rmon alarm-table, on page 1128
• show rmon alarm, on page 1129
• rmon event, on page 1131
• show rmon events, on page 1132
• show rmon log, on page 1133
• rmon table-size, on page 1134
• show rmon statistics, on page 1135
• rmon collection stats , on page 1137
• show rmon collection stats, on page 1138
• show rmon history, on page 1139

Cisco Business Switches 350 Series CLI Guide

1125

rmon alarm

rmon alarm

RMON commands

To configure alarm conditions, use the rmon alarm Global Configuration modecommand. To remove an
alarm, use the no form of this command.

Syntax

rmon alarm index mib-object-id interval rising-threshold falling-threshold rising-event falling-event [type
{absolute | delta}] [startup {rising | rising-falling | falling}] [owner name]

no rmon alarm index

Parameters

• index—Specifies the alarm index. (Range: 1–65535)

• mib-object-id—Specifies the object identifier of the variable to be sampled. (Valid OID)

• interval—Specifies the interval in seconds during which the data is sampled and compared with rising

and falling thresholds. (Range: 1–2147483647)

• rising-threshold—Specifies the rising threshold value. (Range: 0–2147483647)

• falling-threshold—Specifies the falling threshold value. (Range: 0–2147483647)

• rising-event—Specifies the index of the event triggered when a rising threshold is crossed. (Range:

0–65535)

• falling-event—Specifies the index of the event triggered when a falling threshold is crossed. (Range:

0–65535)

• type {absolute | delta}—(Optional) Specifies the method used for sampling the selected variable and

calculating the value to be compared against the thresholds. The possible values are:

absolute—Specifies that the selected variable value is compared directly with the thresholds at the end
of the sampling interval.

delta—Specifies that the selected variable value of the last sample is subtracted from the current value,
and the difference is compared with the thresholds.

• startup {rising | rising-falling | falling}—(Optional) Specifies the alarm that may be sent when this

entry becomes valid. The possible values are:

rising—Specifies that if the first sample (after this entry becomes valid) is greater than or equal to
rising-threshold, a single rising alarm is generated.

rising-falling—Specifies that if the first sample (after this entry becomes valid) is greater than or equal
to rising-threshold, a single rising alarm is generated. If the first sample (after this entry becomes valid)
is less than or equal to falling-threshold, a single falling alarm is generated.

falling —Specifies that if the first sample (after this entry becomes valid) is less than or equal to
falling-threshold, a single falling alarm is generated.

• owner name—(Optional) Specifies the name of the person who configured this alarm. (Valid string)

Cisco Business Switches 350 Series CLI Guide

1126

RMON commands

rmon alarm

Default Configuration

The default method type is absolute.

The default startup direction is rising-falling.

If the owner name is not specified, it defaults to an empty string.

Command Mode

Global Configuration mode

Example

The following example configures an alarm with index 1000, MIB object ID D-Link, sampling interval 360000
seconds (100 hours), rising threshold value 1000000, falling threshold value 1000000, rising threshold event
index 10, falling threshold event index 10, absolute method type and rising-falling alarm.

switchxxxxxx(config)# rmon alarm 1000 1.3.6.1.2.1.2.2.1.10.1 360000 1000000 1000000 10 20

Cisco Business Switches 350 Series CLI Guide

1127

show rmon alarm-table

RMON commands

show rmon alarm-table

To display a summary of the alarms table, use the show rmon alarm-table Privileged EXEC mode command.

Syntax

show rmon alarm-table

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

Example

The following example displays the alarms table.

switchxxxxxx# show rmon alarm-table

Index
-----
1
2
3

OID
----------------------
1.3.6.1.2.1.2.2.1.10.1
1.3.6.1.2.1.2.2.1.10.1
1.3.6.1.2.1.2.2.1.10.9

Owner
-------
CLI
Manager
CLI

The following table describes the significant fields shown in the display:

Field

Index

OID

Description

An index that uniquely identifies the entry.

Monitored variable OID.

Owner

The entity that configured this entry.

Cisco Business Switches 350 Series CLI Guide

1128

RMON commands

show rmon alarm

show rmon alarm

To display alarm configuration, use the show rmon alarm Privileged EXEC mode command.

Syntax

show rmon alarm number

Parameters

alarm number—Specifies the alarm index. (Range: 1–65535)

Command Mode

Privileged EXEC mode

Example

The following example displays RMON 1 alarms.

switchxxxxxx# show rmon alarm 1
Alarm 1
-------
OID: 1.3.6.1.2.1.2.2.1.10.1
Last sample Value: 878128
Interval: 30
Sample Type: delta
Startup Alarm: rising
Rising Threshold: 8700000
Falling Threshold: 78
Rising Event: 1
Falling Event: 1
Owner: CLI

The following table describes the significant fields shown in the display:

Field

Alarm

OID

Last Sample Value

Interval

Sample Type

Description

Alarm index.

Monitored variable OID.

Value of the statistic during the last sampling period. For example, if the sample
type is delta, this value is the difference between the samples at the beginning
and end of the period. If the sample type is absolute, this value is the sampled
value at the end of the period.

Interval in seconds over which the data is sampled and compared with the rising
and falling thresholds.

Method of sampling the variable and calculating the value compared against the
thresholds. If the value is absolute, the variable value is compared directly with
the thresholds at the end of the sampling interval. If the value is delta, the variable
value at the last sample is subtracted from the current value, and the difference
is compared with the thresholds.

Cisco Business Switches 350 Series CLI Guide

1129

show rmon alarm

RMON commands

Field

Description

Startup Alarm

Rising Threshold

Falling Threshold

Alarm that is sent when this entry is first set. If the first sample is greater than or
equal to the rising threshold, and startup alarm is equal to rising or rising-falling,
then a single rising alarm is generated. If the first sample is less than or equal to
the falling threshold, and startup alarm is equal falling or rising-falling, then a
single falling alarm is generated.

Sampled statistic rising threshold. When the current sampled value is greater than
or equal to this threshold, and the value at the last sampling interval is less than
this threshold, a single event is generated.

Sampled statistic falling threshold. When the current sampled value is less than
or equal to this threshold, and the value at the last sampling interval is greater
than this threshold, a single event is generated.

Rising Event

Event index used when a rising threshold is crossed.

Falling Event

Event index used when a falling threshold is crossed.

Owner

Entity that configured this entry.

Cisco Business Switches 350 Series CLI Guide

1130

RMON commands

rmon event

rmon event

To configure an event, use the rmon event Global Configuration modecommand. To remove an event, use
the no form of this command.

Syntax

rmon event index {none | log | trap | log-trap} [community text] [description text] [owner name]

no rmon event index

Parameters

• index—Specifies the event index. (Range: 1–65535)

• none— Specifies that no notification is generated by the device for this event.

• log—Specifies that a notification entry is generated in the log table by the device for this event.

• trap—Specifies that an SNMP trap is sent to one or more management stations by the device for this

event.

• log-trap—Specifies that an entry is generated in the log table and an SNMP trap is sent to one or more

management stations by the device for this event.

• community text—(Optional) Specifies the SNMP community (password) used when an SNMP trap is
sent. (Octet string; length: 0–127 characters). Note this must be a community used in the definition of
an SNMP host using the “snmp-server host” command.

• description text—(Optional) Specifies a comment describing this event. (Length: 0–127 characters)

• owner name—(Optional) Specifies the name of the person who configured this event. (Valid string)

Default Configuration

If the owner name is not specified, it defaults to an empty string.

Command Mode

Global Configuration mode

Example

The following example configures an event identified as index 10, for which the device generates a notification
in the log table.

switchxxxxxx(config)# rmon event 10 log

Cisco Business Switches 350 Series CLI Guide

1131

show rmon events

RMON commands

show rmon events

To display the RMON event table, use the show rmon events Privileged EXEC mode command.

Syntax

show rmon events

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

Example

The following example displays the RMON event table.

switchxxxxxx# show rmon events

Index
-----1
2

Description
-----------Errors
High Broadcast

Type
------Log
Log
Trap

Community
---------
router

Owner
------
CLI
Manager

Last time sent
------------------
Jan 18 2006 23:58:17
Jan 18 2006 23:59:48

The following table describes significant fields shown in the display:

Field

Index

Description

Unique index that identifies this event.

Description

Comment describing this event.

Type

Type of notification that the device generates about this event. Can have the
following values: none, log, trap, log-trap. In the case of log, an entry is made
in the log table for each event. In the case of trap, an SNMP trap is sent to one or
more management stations.

Community

If an SNMP trap is to be sent, it is sent with the SNMP community string specified
by this octet string.

Owner

The entity that configured this event.

Last time sent

The time this entry last generated an event. If this entry has not generated any
events, this value is zero.

Cisco Business Switches 350 Series CLI Guide

1132

RMON commands

show rmon log

show rmon log

To display the RMON log table, use the show rmon log Privileged EXEC mode command.

Syntax

show rmon log [event]

Parameters

event—(Optional) Specifies the event index. (Range: 0–65535)

Command Mode

Privileged EXEC mode

Example

The following example displays event 1 in the RMON log table.

switchxxxxxx# show rmon log 1
Maximum table size: 500 (800 after reset)

Event
-----
1

Description
--------------
MIB Var.:
1.3.6.1.2.1.2.2.1.10.53,
Delta, Rising, Actual Val:

800, Thres.Set: 100,

Interval (sec):1

Time

-------------------
Jan 18 2006 23:48:19

Cisco Business Switches 350 Series CLI Guide

1133

rmon table-size

rmon table-size

RMON commands

To configure the maximum size of RMON tables, use the rmon table-size Global Configuration modecommand.
To return to the default size, use the no form of this command.

Syntax

rmon table-size {history entries | log entries}

no rmon table-size {history | log}

Parameters

• history entries—Specifies the maximum number of history table entries. (Range: 20–32767)

• log entries—Specifies the maximum number of log table entries. (Range: 20–32767)

Default Configuration

The default history table size is 270 entries.

The default log table size is 200 entries.

Command Mode

Global Configuration mode

User Guidelines

The configured table size takes effect after the device is rebooted.

Example

The following example configures the maximum size of RMON history tables to 100 entries.

switchxxxxxx(config)# rmon table-size history 100

Cisco Business Switches 350 Series CLI Guide

1134

RMON commands

show rmon statistics

show rmon statistics

To display RMON Ethernet statistics, use the show rmon statistics Privileged EXEC mode command.

Syntax

show rmon statistics {interface-id}

Parameters

interface-id—Specifies an interface ID. The interface ID can be one of the following types: Ethernet port or
Port-channel.

Command Mode

Privileged EXEC mode

Example

The following example displays RMON Ethernet statistics for port gi1/0/1.

switchxxxxxx# show rmon statistics gi1/0/1
Port gi1/0/1
Dropped: 0
Octets: 0
Broadcast: 0
CRC Align Errors: 0
Undersize Pkts: 0
Fragments: 0
64 Octets: 0
128 to 255 Octets: 1
512 to 1023 Octets: 0

Packets: 0
Multicast: 0
Collisions: 0
Oversize Pkts: 0
Jabbers: 0
65 to 127 Octets: 1
256 to 511 Octets: 1
1024 to max Octets: 0

The following table describes the significant fields displayed.

Field

Dropped

Octets

Packets

Broadcast

Multicast

Description

Total number of events in which packets were dropped by the probe due to lack
of resources. Note that this number is not necessarily the number of packets
dropped. It is the number of times this condition was detected.

Total number of octets of data (including those in bad packets) received on the
network (excluding framing bits but including FCS octets).

Total number of packets (including bad packets, broadcast packets, and multicast
packets) received.

Total number of good packets received and directed to the broadcast address.
This does not include multicast packets.

Total number of good packets received and directed to a multicast address. This
number does not include packets directed to the broadcast address.

Cisco Business Switches 350 Series CLI Guide

1135

show rmon statistics

RMON commands

Field

Description

CRC Align Errors

Total number of packets received with a length (excluding framing bits, but
including FCS octets) of between 64 and 1518 octets, inclusive, but with either
a bad Frame Check Sequence (FCS) with an integral number of octets (FCS
Error) or a bad FCS with a non-integral number of octets (Alignment Error).

Collisions

Best estimate of the total number of collisions on this Ethernet segment.

Undersize Pkts

Total number of packets received, less than 64 octets long (excluding framing
bits, but including FCS octets) and otherwise well formed.

Oversize Pkts

Fragments

Jabbers

64 Octets

65 to 127 Octets

128 to 255 Octets

256 to 511 Octets

Total number of packets received, longer than 1518 octets (excluding framing
bits, but including FCS octets) and otherwise well formed.

Total number of packets received, less than 64 octets in length (excluding framing
bits but including FCS octets) and either a bad Frame Check Sequence (FCS)
with an integral number of octets (FCS Error) or a bad FCS with a non-integral
number of octets (Alignment Error).

Total number of packets received, longer than 1518 octets (excluding framing
bits, but including FCS octets), and either a bad Frame Check Sequence (FCS)
with an integral number of octets (FCS Error) or a bad FCS with a non-integral
number of octets (Alignment Error).

Total number of packets (including bad packets) received that are 64 octets in
length (excluding framing bits but including FCS octets).

Total number of packets (including bad packets) received that are between 65
and 127 octets in length inclusive (excluding framing bits but including FCS
octets).

Total number of packets (including bad packets) received that are between 128
and 255 octets in length inclusive (excluding framing bits but including FCS
octets).

Total number of packets (including bad packets) received that are between 256
and 511 octets in length inclusive (excluding framing bits but including FCS
octets).

512 to 1023 Octets

Total number of packets (including bad packets) received that were between 512
and 1023 octets in length inclusive (excluding framing bits but including FCS
octets).

1024 to max

Total number of packets (including bad packets) received that were between 1024
octets and the maximum frame size in length inclusive (excluding framing bits
but including FCS octets).

Cisco Business Switches 350 Series CLI Guide

1136

RMON commands

rmon collection stats

rmon collection stats

To enable RMON MIB collecting history statistics (in groups) on an interface, use the rmon collection stats
Interface Configuration mode command. To remove a specified RMON history group of statistics, use the no
form of this command.

Syntax

rmon collection stats index [owner ownername] [buckets bucket-number] [interval seconds]

no rmon collection stats index

Parameters

• index—The requested group of statistics index.(Range: 1–65535)

• owner ownername—(Optional) Records the name of the owner of the RMON group of statistics. If

unspecified, the name is an empty string. (Range: Valid string)

• buckets bucket-number—(Optional) A value associated with the number of buckets specified for the

RMON collection history group of statistics. If unspecified, defaults to 50.(Range: 1–50)

• interval seconds—(Optional) The number of seconds in each polling cycle. If unspecified, defaults to

1800 (Range: 1–3600).

Command Mode

Interface Configuration mode.

Cisco Business Switches 350 Series CLI Guide

1137

show rmon collection stats

RMON commands

show rmon collection stats

To display the requested RMON history group statistics, use the show rmon collection stats Privileged EXEC
mode command.

Syntax

show rmon collection stats [interface-id]

Parameters

interface-id—(Optional) Specifies an interface ID. The interface ID can be one of the following types: Ethernet
port or Port-channel.

Command Mode

Privileged EXEC mode

Example

The following example displays all RMON history group statistics.

switchxxxxxx# show rmon collection stats

Index
-----
1
2

Interface
---------
gi1/0/1
gi1/0/1

Interval
--------
30
1800

Requested
Samples
---------
50
50

Granted
Samples
-------
50
50

Owner
-------
CLI
Manager

The following table describes the significant fields shown in the display.

Field

Index

Interface

Interval

Description

An index that uniquely identifies the entry.

The sampled Ethernet interface.

The interval in seconds between samples.

Requested Samples

The requested number of samples to be saved.

Granted Samples

The granted number of samples to be saved.

Owner

The entity that configured this entry.

Cisco Business Switches 350 Series CLI Guide

1138

RMON commands

show rmon history

show rmon history

To display RMON Ethernet history statistics, use the show rmon history Privileged EXEC mode command.

Syntax

show rmon history index {throughput | errors | other} [period seconds]

Parameters

• index—Specifies the set of samples to display. (Range: 1–65535)

• throughput—Displays throughput counters.

• errors—Displays error counters.

• other—Displays drop and collision counters.

• period seconds—(Optional) Specifies the period of time in seconds to display. (Range: 1–2147483647)

Command Mode

Privileged EXEC mode

Example

The following examples display RMON Ethernet history statistics for index 1:

switchxxxxxx# show rmon history 1 throughput

Sample Set: 1
Interface: gi1/0/1
Requested samples: 50

Maximum table size: 500

Owner: CLI
Interval: 1800
Granted samples: 50

Time
--------------------
Jan 18 2005 21:57:00
Jan 18 2005 21:57:30

Octets
--------
303595962
287696304

Packets
-------
357568
275686

Broadcast
--------
3289
2789

Multicast
---------
7287
5878

Util
----
19%
20%

switchxxxxxx# show rmon history 1 errors

Sample Set: 1
Interface:gi1/0/1
Requested samples: 50

Owner: Me
Interval: 1800
Granted samples: 50

Maximum table size: 500 (800 after reset)

Time
------------
Jan 18 2005 21:57:00
Jan 18 2005 21:57:30

CRC Align
-------
1
1

Under
size
-----
1
1

Oversize
--------
0
0

Fragments
---------
49
27

Jabbers
----
0
0

Cisco Business Switches 350 Series CLI Guide

1139

show rmon history

RMON commands

switchxxxxxx# show rmon history 1 other

Sample Set: 1
Interface: gi1/0/1
Requested samples: 50

Maximum table size: 500

Owner: Me
Interval: 1800
Granted samples: 50

Time
--------------------
Jan 18 2005 21:57:00
Jan 18 2005 21:57:30

Dropped
------
3
3

Collisions
----------
0
0

The following table describes significant fields shown in the display:

Field

Time

Octets

Description

Date and Time the entry is recorded.

Total number of octets of data (including those in bad packets and excluding
framing bits but including FCS octets) received on the network.

Packets

Number of packets (including bad packets) received during this sampling interval.

Broadcast

Multicast

Number of good packets received during this sampling interval that were directed
to the broadcast address.

Number of good packets received during this sampling interval that were directed
to a multicast address. This number does not include packets addressed to the
broadcast address.

Utilization

Best estimate of the mean physical layer network utilization on this interface
during this sampling interval, in hundredths of a percent.

CRC Align

Undersize

Oversize

Fragments

Number of packets received during this sampling interval that had a length
(excluding framing bits but including FCS octets) between 64 and 1518 octets,
inclusive, but had either a bad Frame Check Sequence (FCS) with an integral
number of octets (FCS Error) or a bad FCS with a non-integral number of octets
(Alignment Error).

Number of packets received during this sampling interval that were less than 64
octets long (excluding framing bits but including FCS octets) and were otherwise
well formed.

Number of packets received during this sampling interval that were longer than
1518 octets (excluding framing bits but including FCS octets) but were otherwise
well formed.

Total number of packets received during this sampling interval that were less
than 64 octets in length (excluding framing bits but including FCS octets) and
had either a bad Frame Check Sequence (FCS) with an integral number of octets
(FCS Error), or a bad FCS with a non-integral number of octets (Alignment
Error). It is normal for etherHistoryFragments to increment because it counts
both runts (which are normal occurrences due to collisions) and noise hits.

Cisco Business Switches 350 Series CLI Guide

1140

RMON commands

show rmon history

Field

Jabbers

Dropped

Description

Number of packets received during this sampling interval that were longer than
1518 octets (excluding framing bits but including FCS octets), and had either a
bad Frame Check Sequence (FCS) with an integral number of octets (FCS Error)
or a bad FCS with a non-integral number of octets (Alignment Error).

Total number of events in which packets were dropped by the probe due to lack
of resources during this sampling interval. This number is not necessarily the
number of packets dropped, it is the number of times this condition has been
detected.

Collisions

Best estimate of the total number of collisions on this Ethernet segment during
this sampling interval.

Cisco Business Switches 350 Series CLI Guide

1141

show rmon history

RMON commands

Cisco Business Switches 350 Series CLI Guide

1142

Router Resources Commands

This chapter contains the following sections:

• show system resources, on page 1144
• set router hardware-routing active, on page 1146
• show router hardware-routing status, on page 1147
• system resources, on page 1148

Cisco Business Switches 350 Series CLI Guide

1143

show system resources

Router Resources Commands

show system resources

To display the currently used and max allowed entries for IP Entries, policy based routes and VLAN mapping
, use the show system resources command in User EXEC mode.

Syntax

show system resources

Parameters

This command has no arguments or keywords.

Command Mode

User EXEC mode

User Guidelines

Use the show system resources command to display the currently used and the maximum allowed IP Entries,
policy based routes and VLAN mapping entries.

The count of the "in use" entries in command output is calculated as follows:

"policy routes" entries - a single entry is consume per each created policy map

• "vlan mapping" entries - 8 entries are reserved for system use, and in addition:

• A single entry is consumed for each VLAN mapping entry applied to an interface

• "IP entries" entries - the ip entry count can include different type of entries. The following table details

the number of ip entries consume per each entry type::

Logical Entity

Number of IP entries consumed

IP host/Neighbor

1 entry per neighbor

IPv4 interface

2 entries per interface

IPv4 (Remote) Route

1 entries per route

IPv4 Multicast Group

2 entries per group

IPv6 host/Neighbor

4 entries per neighbor

IPv6 interface

8 entries per interface

IPv6 On Link Prefix

4 entries per Prefix

IPv6 (Remote) Route

4 entries per route

IPv6 Multicast Group

8 entries per group

Cisco Business Switches 350 Series CLI Guide

1144

Router Resources Commands

show system resources

Example

In the following example, per each type, the in use and max entries are displayed:

switchxxxxxx# show system resources

IP Entries
IPv4 policy Routes
IPv6 policy Routes
VLAN Mapping Entries

In-Use
------

10
0
16
48

Max
--------
500
16
32
64

Cisco Business Switches 350 Series CLI Guide

1145

set router hardware-routing active

Router Resources Commands

set router hardware-routing active

To start the process of re-activating hardware based routing on the device, use the set router hardware-routing
active Privileged EXEC mode command.

Syntax

set router hardware-routing active

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

User Guidelines

Hardware based routing is supported automatically on device once IPv4 or IPv6 route is enabled. However,
hardware based routing is de-activated automatically by the software in cases where device hardware resources
cannot support the amount of IPv4 and/or IPv6 entries.

IPv4 entries - IPv4 interfaces/addresses and routes and as well as IPv4 Multicast entries;

IPv6 entries - IPv6 interfaces/addresses and routes as well as IPv6 Multicast entries;

Once Hardware based routing is de-activated by the system the user needs to apply the set router
hardware-routing active command to re-activate hardware based routing on device. It is recommended to
adjust the number of IPv4 and/or IPv6 entries on device to match the device hardware capabilities

Once command is applied, the device begins to update all existing IP entries to device hardware tables. If
process succeeds - hardware based routing will be re-activated. If process fails (for example device hardware
resource are still not sufficient to support current device IP entries), hardware routing status will remain
in-active.

Syslog messages will indicate to user the start of the hardware table update process and the success or failure
of such update.

Example 1. The following example the process of reactivating hardware based routing is applied.

switchxxxxxx# set router hardware-routing active
This operation may take a few moments...

Example 2. In the following example, command is applied, but hardware based routing is already
active on the device.

switchxxxxxx# set router hardware-routing active
Hardware based routing aleady active

Cisco Business Switches 350 Series CLI Guide

1146

Router Resources Commands

show router hardware-routing status

show router hardware-routing status

To display the status of hardware based routing, use the show router hardware-routing status command in
User EXEC mode.

Syntax

show router hardware-routing status

Parameters

This command has no arguments or keywords.

Command Mode

User EXEC mode

Example 1. In the following example, the hardware routing status is displayed as inactive:

switchxxxxxx# show system router resources
Hardware routing status: inactive

Example 2. In the following example, the hardware routing status is displayed as "in activation"
(this will usually indicate that hardware table updated is in process following the activation of
command set router hardware-routing active, on page 1146):

switchxxxxxx# show system router resources
Hardware routing status: in activation

Cisco Business Switches 350 Series CLI Guide

1147

system resources

Router Resources Commands

system resources

To configure hardware resource allocation for policy based routing and/or VLAN mapping , use the system
resources command in Global Configuration mode. To return to the default, use the no form of this command.

Syntax

system resources [policy-ip-routes max-number] [policy-ipv6-routes max-number] [vlan-mapping-entries
max-number]

no system resources

Parameters

• policy-ip-routes max-number —(Optional) The maximum number of IPv4 policy routes that can be

configured. (range: 0- 32)

• policy-ipv6-routes max-number —(Optional) The maximum number of IPv6 policy routes that can be

configured. (range: 12- 32)

• vlan-mapping-entries max-number —(Optional) The maximum number of VLAN Mappings entries

that can be configure. (range: 0- 228)

Default Configuration

• policy-ip-routes— 12.

• policy-ipv6-routes— 12.

• vlan-mapping-entries — 0.

Command Mode

Global Configuration mode

User Guidelines

Use the system resources command to enter new settings for the maximum supported number of policy based
routes and/or VLAN mapping entries. After entering the command, the current setting will be displayed, and
the user will be required to confirm saving the new setting to the startup-configuration, following which
system needs to be rebooted to apply changes.

When this command is included in a configuration file that is downloaded to the device, if it is downloaded
to the running configuration file, the command will be rejected. If it is downloaded to the startup configuration
file, the device will not reboot automatically. The new settings will be used after the device is rebooted
manually.

Allocating additional resources for policy based routes and/or VLAN mapping entries, means that there are
less resources to be used by IP type entries.

Out of the entries allocated for VLAN Mapping - 8 entries are reserved for system use, and cannot be used
for user based VLAN Mapping configuration.

Data Validation:

Cisco Business Switches 350 Series CLI Guide

1148

Router Resources Commands

system resources

If the new policy based route and/or VLAN mapping values cannot be supported by device (due to relevant
resource being used by other applications), the command is rejected and a message is displayed to the user.

If the new max-number parameter is lower than the actual number of entries currently in-use settings, a
confirmation message is displayed to the user (before the save confirmation message).

Use the no system resources command to restore the default settings.

Examples

Example 1 - The following example defines the supported number of entries for IPv4 policy based routes,IPv6
policy based routes and/or VLAN mapping.

switchxxxxxx(config)# system resources policy-ip-routes 20 policy-ipv6-routes 32
vlan-mapping-entries 100

In-Use Reserved (Current) Reserved (New)
------ ------------------ --------------

IPv4 policy Routes
IPv6 policy Routes
VLAN Mapping Entries
Setting the new configuration of entries requires saving the running-configuration file to
startup-configuration file and rebooting the system, do you want to continue? (Y/N) [N] Y

16
16

20
32

100

8
8

32

32

Example 2 - In the following example, the configured entries are less than the entries which are currently in
use by the device. Using this configurations means that the system may not have enough resources for the
running again in the existing network:

switchxxxxxx(config)# system resources policy-ip-routes 8 policy-ipv6-routes 8
vlan-mapping-routes 16

IPv4 policy Routes
IPv6 policy Routes
VLAN Mapping Entries
1) In one or more of the parameters, the new max entry configuration is less than the entries

32
100

50

16

In-Use
------
10
10

Reserved (Current) Reserved (New)
------------------ --------------
8
8

20

which are currently in use by the system, do you want to continue?

2) Setting the new configuration of entries requires saving the running-configuration file

to startup-configuration file and rebooting the system.

Do you want to continue?
Do you want to continue? (Y/N) [N] Y

Cisco Business Switches 350 Series CLI Guide

1149

system resources

Router Resources Commands

Cisco Business Switches 350 Series CLI Guide

1150

Route Map Commands

This chapter contains the following sections:

• match ip address (Policy Routing), on page 1152
• match ipv6 address (Policy Routing), on page 1153
• route-map (Policy Routing), on page 1154
• set ip next-hop, on page 1156
• set ipv6 next-hop, on page 1157
• show route-map, on page 1158

Cisco Business Switches 350 Series CLI Guide

1151

match ip address (Policy Routing)

Route Map Commands

match ip address (Policy Routing)

To match IP packets to perform IP policy routing, use the match ip address command in Route Map
Configuration Mode. To move the match ip address entry, use the no form of this command.

Syntax

match ip address access-list extended-access-list-name

no match ip address access-list

Parameters

• access-list extended-access-list-name—Specifies an extended IP ACL.

Default Configuration

No the command is configured.

Command Mode

Route Map Configuration Mode

User Guidelines

The match ip address command allows you to policy route IP packets based on criteria that can be matched
with an extended IP access list; for example, a protocol, protocol service, and source or destination IP address.

The ACL list specified by the extended-access-list-name argument cannot contain the following keywords:

• time-range

• disable-port

• log-input

Example

The example below gives how IPv4 Policy Base Routing is configured:

switchxxxxxx(config)# ip access-list extended acl1
switchxxxxxx(config-ip-al)# permit ip 176.212.0.0 00.255.255 any
switchxxxxxx(config-ip-al)# exit
switchxxxxxx(config)# route-map pbr
switchxxxxxx(config-route-map)# match ip address access-list acl1
switchxxxxxx(config-route-map)# set ip next-hop 173.23.13.20
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1152

Route Map Commands

match ipv6 address (Policy Routing)

match ipv6 address (Policy Routing)

To match IPv6 packets to perform IPv6 policy routing, use the match ipv6 address command in Route Map
Configuration Mode. To move the match ipv6 address entry, use the no form of this command.

Syntax

match ipv6 address access-list extended-access-list-name

no match ipv6 address access-list

Parameters

• access-list extended-access-list-name—Specifies an extended IPv6 access list.

Default Configuration

No the command is configured.

Command Mode

Route Map Configuration Mode

User Guidelines

The match ipv6 address command allows you to policy route IPv6 packets based on criteria that can be
matched with an extended access list; for example, a protocol, protocol service, and source or destination IPv6
address.

The ACL list specified by the extended-access-list-name argument cannot contain the following keywords:

• time-range

• disable-port

• log-input

Example

The example below gives how IPv4 Policy Base Routing is configured:

switchxxxxxx(config)# ipv6 access-list acl1
switchxxxxxx(config-ip-al)# permit ipv6 3211:1297:: ::/32 any
switchxxxxxx(config-ip-al)# exit
switchxxxxxx(config)# route-map pbr
switchxxxxxx(config-route-map)# match ipv6 address access-list acl1
switchxxxxxx(config-route-map)# set ipv6 next-hop 3003:17ac::20
switchxxxxxx(config-route-map)# exit
switchxxxxxx(config-ip-al)# exit

Cisco Business Switches 350 Series CLI Guide

1153

route-map (Policy Routing)

Route Map Commands

route-map (Policy Routing)

To define the conditions for policy routing, use the route-map command in Global Configuration mode and
the match and set commands in Route Map Configuration Mode. To delete an entry, use the no form of this
command.

Syntax

route-map map-tag [sequence-number]

no route-map map-tag [sequence-number]

Parameters

• map-tag—A meaningful name for the route map. The redistribute router configuration command uses

this name to reference this route map. Multiple route maps may share the same map tag name.

• sequence-number—Positive integer number that indicates the position a new route map will have in the
list of route maps already configured with the same name. If the parameter is used with the no form of
this command, the position of the route map should be deleted. If the parameter is omitted in the route-map
command then a value of 10 is applied. If the parameter is omitted in the no format then all route maps
sharing same map tag name are deleted.

Default Configuration

Conditions for policy routing is not configured.

Command Mode

Global Configuration mode

User Guidelines

Use the route-map command to enter route-map configuration mode. The purpose of the route map command
is to define policy routing.

The match commands specify the conditions under which policy routing occurs and the set commands specify
the routing actions to perform if the criteria enforced by the match commands are met:

• If a outed packet matches to an ACL with the permit action the packet is forwarded by the set command

(policy based routing).

• If a outed packet matches to an ACL with the deny action the frame is forwarded by the Forwarding

table (regular routing).

A route map can have several sections configured by separate route-map commands with the same map tag.
When a routed packet is checked by a route map the first section which criteria is forced is applied. If there
is no matched section the obvious shortest path using the Forwarding Table is applied.

Example 1. The following example gives an example of a route map with one section. TCP packet
sent to subnet 156.12.5.0/24 are passed to the next hop 56.1.1.1.

Cisco Business Switches 350 Series CLI Guide

1154

Route Map Commands

route-map (Policy Routing)

switchxxxxxx(config)# ip access-list extended pr-acl1
switchxxxxxx(config-ip-al)# permit tcp any any 156.12.5.0 0.0.0.255 any
switchxxxxxx(config-ip-al)# exit
switchxxxxxx(config)# route-map pbr
switchxxxxxx(config-route-map)# match ip address access-list pr-acl1
switchxxxxxx(config-route-map)# set ip next-hop 56.1.1.1
switchxxxxxx(config-route-map)# exit
switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ip policy route-map pbr
switchxxxxxx(config-if)# exit

Example 2. The following example gives an example of a route map with two sections. TCP packet
sent to subnet 156.12.5.0/24 are passed to the next hop 56.1.1.1 and CP packet sent to subnet
156.122.5.0/24 are passed to the next hop 50.1.1.1.

switchxxxxxx(config)# ip access-list extended pr-acl1
switchxxxxxx(config-ip-al)# permit tcp any any 156.12.5.0 0.0.0.255 any
switchxxxxxx(config-ip-al)# exit
switchxxxxxx(config)# ip access-list extended pr-acl2
switchxxxxxx(config-ip-al)# permit tcp any any 156.122.5.0 0.0.0.255 any
switchxxxxxx(config-ip-al)# exit
switchxxxxxx(config)# route-map pbr 10
switchxxxxxx(config-route-map)# match ip address access-list pr-acl1
switchxxxxxx(config-route-map)# set ip next-hop 56.1.1.1
switchxxxxxx(config-route-map)# exit
switchxxxxxx(config)# route-map pbr 20
switchxxxxxx(config-route-map)# match ip address access-list pr-acl2
switchxxxxxx(config-route-map)# set ip next-hop 50.1.1.1
switchxxxxxx(config-route-map)# exit
switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ip policy route-map pbr
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1155

set ip next-hop

set ip next-hop

Route Map Commands

To specify the IP address of the next hop policy routing, use the set ip next-hop command in Route Map
Configuration Mode. To delete an entry, use the no form of this command.

Syntax

set ip next-hop next-hop

no set ip next-hop

Parameters

• next-hop—IPv4 address of the next hop router.

Default Configuration

This command is disabled by default.

Command Mode

Route Map Configuration Mode

User Guidelines

Use the set ip next-hop command to set the IP address of the next hop policy routing.

Example

In the following example sets IP address 192.168.30.1 as the next hop IP address:

switchxxxxxx(config)# route-map bpr
switchxxxxxx(config-route-map)# match ip address access-list acl
switchxxxxxx(config-route-map)# set ip next-hop 192.168.30.1
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1156

Route Map Commands

set ipv6 next-hop

set ipv6 next-hop

To specify the IPv6 address of the next hop policy routing, use the set ipv6 next-hop command in Route Map
Configuration Mode. To delete an entry, use the no form of this command.

Syntax

set ipv6 next-hop next-hop

no set ipv6 next-hop

Parameters

• next-hop—IPv6 address of the next hop router or outgoing interface ID for a point-to-point outgping

interfaces.

Default Configuration

This command is disabled by default.

Command Mode

Route Map Configuration Mode

User Guidelines

Use the set ip next-hop command to set the IPv6 address of the next hop policy routing.

Examples

Example 1. In the following example sets IPv76 address 3003:17ac::20 as the next hop IPv6 address:

switchxxxxxx(config)# route-map pbr
switchxxxxxx(config-route-map)# match ipv6 address access-list acl1
switchxxxxxx(config-route-map)# set ipv6 next-hop 3003:17ac::20
switchxxxxxx(config-route-map)# exit
switchxxxxxx(config-ip-al)# exit

Example 2. In the following example sets interface tunnel1 as the next hop:

switchxxxxxx(config)# interface tunnel 1
switchxxxxxx(config-if)# tunnel source 132.1.1.1
switchxxxxxx(config-if)# tunnel destination 192.168.30.1
switchxxxxxx(config-if)# tunnel mode ipv6ip
switchxxxxxx(config-if)# exit
switchxxxxxx(config)# route-map bpr
switchxxxxxx(config-route-map)# match ipv6 address access-list acl
switchxxxxxx(config-route-map)# set ipv6 next-hop tunnel 1
switchxxxxxx(config-route-map)# exit

Cisco Business Switches 350 Series CLI Guide

1157

show route-map

Route Map Commands

show route-map

To display route maps, use the show route-map command in Privileged EXEC mode.

Syntax

show route-map [map-name]

Parameters

• map-name—Name of a specific route map.

Default Configuration

Command Mode

Privileged EXEC mode

User Guidelines

Use the show route-map map-name command, to display one given route map.

Use the show route-map command, to display all configured route maps.

Example

The following is sample output from the show route-map command:

switchxxxxxx# show route-map
route-map POLICY-ROUTING, permit, sequence 10

Match clauses:

ip address access-lists: acl1

Set clauses:

ip next-hop: 192.12.34.5

route-map POLICY-ROUTING, permit, sequence 20

Match clauses:

ip address access-lists: acl2

Set clauses:

ip next-hop: 192.122.23.15

route-map POLICY-ROUTING-IPv6, permit, sequence 10

Match clauses:

ipv6 address access-lists: acl3

Set clauses:

ipv6 next-hop: 3003:17ac::20

route-map POLICY-ROUTING-IPv6, permit, sequence 20

Match clauses:

ipv6 address access-lists: acl4

Set clauses:

interface next-hop: tunnel 1

Cisco Business Switches 350 Series CLI Guide

1158

RSA and Certificate Commands

This chapter contains the following sections:

• crypto key generate dsa, on page 1160
• crypto key generate rsa, on page 1161
• crypto key import, on page 1162
• show crypto key, on page 1164
• crypto certificate generate, on page 1165
• crypto certificate request, on page 1167
• crypto certificate import, on page 1169
• show crypto certificate, on page 1173

Cisco Business Switches 350 Series CLI Guide

1159

crypto key generate dsa

RSA and Certificate Commands

crypto key generate dsa

The crypto key generate dsa Global Configuration mode command generates a DSA key pair for SSH
Public-Key authentication.

Syntax

crypto key generate dsa

Default Configuration

The application creates a default key automatically.

Command Mode

Global Configuration mode

User Guidelines

The size of the created DSA key is 1024 bits

DSA keys are generated in pairs - one public DSA key and one private DSA key.

If the device already has DSA keys default or user defined, a warning is displayed with a prompt to replace
the existing keys with new keys.

Erasing the startup configuration or returning to factory defaults automatically deletes the default keys and
they are recreated during device initialization.

This command is not saved in the Running configuration file. However, the keys generated by this command
are saved to the Running Configuration file.

Example

The following example generates a DSA key pair.

switchxxxxxx(config)# crypto key generate dsa
The SSH service is generating a private DSA key.
This may take a few minutes, depending on the key size.
..........

Cisco Business Switches 350 Series CLI Guide

1160

RSA and Certificate Commands

crypto key generate rsa

crypto key generate rsa

The crypto key generate rsa Global Configuration mode command generates RSA key pairs for SSH
Public-Key Authentication.

Syntax

crypto key generate rsa

Default Configuration

The application creates a default key automatically.

Command Mode

Global Configuration mode

User Guidelines

The size of the created RSA key is 2048 bits

RSA keys are generated in pairs - one public RSA key and one private RSA key.

If the device already has RSA keys default or user defined, a warning is displayed with a prompt to replace
the existing keys with new keys.

Erasing the startup configuration or returning to factory defaults automatically deletes the default keys and
they are recreated during device initialization.

This command is not saved in the Running configuration file. However, the keys generated by this command
are saved to the Running Configuration file.

Example

The following example generates RSA key pairs where a RSA key already exists.

switchxxxxxx(config)# crypto key generate rsa
Replace Existing RSA Key [y/n]? N
switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

1161

crypto key import

RSA and Certificate Commands

crypto key import

The crypto key import Global Configuration mode command imports the DSA/RSA key pair.

Use the no form of the command to remove the user key and generate a new default in its place.

Syntax

crypto key import {dsa| rsa}

encrypted crypto key import {dsa| rsa}

no crypto key {dsa| rsa}

Default Configuration

DSA and RSA key pairs do not exist.

Command Mode

Global Configuration mode

User Guidelines

The imported key must follow the format defined in RFC 4716

DSA key size for import is between 512 bits and 1024 bits

RSA key size for import is between 1024 bits and 2048 bits

DSA/RSA keys are imported in pairs - one public DSA/RSA key and one private DSA/RSA key.

If the device already has DSA/RSA key keys, a warning is displayed with a prompt to replace the existing
keys with new keys.

This command is saved in the Running Configuration file.

When using the encrypted key-word, the private key is imported in its encrypted form.

Example

switchxxxxxx(config)# encrypted crypto key import rsa
---- BEGIN SSH2 ENCRYPTED PRIVATE KEY ----
switchxxxxxx(config)# encrypted crypto key import rsa
---- BEGIN SSH2 ENCRYPTED PRIVATE KEY ----
Comment: RSA Private Key
84et9C2XUfcRlpemuGINAygnLwfkKJcDM6m2OReALHScqqLhi0wMSSYNlT1IWFZP1kEVHH
Fpt1aECZi7HfGLcp1pMZwjn1+HaXBtQjPDiEtbpScXqrg6ml1/OEnwpFK2TrmUy0Iifwk8
E/mMfX3i/2rRZLkEBea5jrA6Q62gl5naRw1ZkOges+GNeibtvZYSk1jzr56LUr6fT7Xu5i
KMcU2b2NsuSD5yW8R/x0CW2elqDDz/biA2gSgd6FfnW2HV48bTC55eCKrsId2MmjbExUdz
+RQRhzjcGMBYp6HzkD66z8HmShOU+hKd7M1K9U4Sr+Pr1vyWUJlEkOgz9O6aZoIGp4tgm4
VDy/K/G/sI5nVL0+bR8LFUXUO/U5hohBcyRUFO2fHYKZrhTiPT5Rw+PHt6/+EXKG9E+TRs
lUADMltCRvs+lsB33IBdvoRDdl98YaA2htZay1TkbMqCUBdfl0+74UOqa/b+bp67wCYKe9
yen418MaYKtcHJBQmF7sUQZQGP34VPmOMyZzon68S/ZoT77cy0ihRZx9wcI1yYhJnDiYxP
dgXHYhW6kCTcTj6LrUSQuxCJ9su89ZIWNn5OwdgonLSpvfnabv2GHmmelaveL7JJ/7UcfO
61q5D4PJ67Vk2xL7PqyHXN931rseTzPuJplkSLCFZ5uqTMbWWyQEKmHDlOx35vlGou5tky
9LgIwG4d+9edctZZaggeq5cgjnsZWJgUoB4Bn4hIreyOdHDiFUPPRxkoyhGOGnJuvxC9T9
K6BF1wBTdDQS+Gu47/0/gRoD/50q4sGkzqHsRJJ53WOT0Q1bHMTMLPpwn2nXzvfGxWL/bu
QhZZSqRonG6MX1cP7KT7i4TPq2w2k3TGtNBnVYHx6OoNcaTHmg1N2s5OgRsyXD9tF++6nY

Cisco Business Switches 350 Series CLI Guide

1162

RSA and Certificate Commands

crypto key import

RfMN8CsV+9jQKQP7ZaGc8Ju+d72jvSwppSr032HY+IpzZ4ujkK+/X5oawZL5NnkaEQTQKX
RSL55S4O5NPOjS/pC9hg7GaVjoY2mQ7HDpSUBeTIDTlvOwC2kskA9C6aF/Axj2dXLweQd5
lxk7m0/mMNaiJsNk6y33LcuKjIxpNNjK9n9KzRPkGNMFObprfenWKteDftjQ==
---- END SSH2 PRIVATE KEY ----
---- BEGIN SSH2 PUBLIC KEY ----
Comment: RSA Public Key
AAAAB3NzaC1yc2EAAAABIwAAAIEAvRHsKry6NKMKymb+yWEp9042vupLvYVq3ngt1sB9JH
OcdK/2nw7lCQguy1mLsX8/bKMXYSk/3aBEvaoJQ82+r/nRf0y3HTy4Wp9zV0SiVC8jLD+7
7t0aHejzfUhr0FRhWWcLnvYwr+nmrYDpS6FADMC2hVA85KZRye9ifxT7otE=
---- END SSH2 PUBLIC KEY ----

Cisco Business Switches 350 Series CLI Guide

1163

show crypto key

RSA and Certificate Commands

show crypto key

The show crypto key Privileged EXEC mode command displays the device’s SSH private and public keys
for both default and user-defined keys.

Syntax

show crypto key [mypubkey] [dsa| rsa]

Parameters

• mypubkey—Displays only the public key.

• rsa—Displays the RSA key.

• dsa—Displays the DSA key.

Command Mode

Privileged EXEC mode

User Guidelines

See Keys and Certificates for information on how to display and copy this key pair.

Example

The following example displays the SSH public DSA keys on the device.

switchxxxxxx# show crypto key mypubkey dsa
---- BEGIN SSH2 PUBLIC KEY ----
Comment: RSA Public Key
AAAAB3NzaC1yc2EAAAABIwAAAIEAzN31fu56KSEOZdrGVPIJHpAs8G8NDIkB
dqZ2q0QPiKCnLPw0Xsk9tTVKaHZQ5jJbXn81QZpolaPLJIIH3B1cc96D7IFf
VkbPbMRbz24dpuWmPVVLUlQy5nCKdDCui5KKVD6zj3gpuhLhMJor7AjAAu5e
BrIi2IuwMVJuak5M098=
---- END SSH2 PUBLIC KEY ----
Public Key Fingerprint: 6f:93:ca:01:89:6a:de:6e:ee:c5:18:82:b2:10:bc:1e

Cisco Business Switches 350 Series CLI Guide

1164

RSA and Certificate Commands

crypto certificate generate

crypto certificate generate

The crypto certificate generate Global Configuration mode command generates a self-signed certificate for
HTTPS.

Syntax

crypto certificate number generate [key-generate [length]] [cn common- name] [ou organization-unit] [or
organization] [loc location] [st state] [cu country] [duration days]

Parameters

• number—Specifies the certificate number. (Range: 1–2)

• key-generate rsa length—Regenerates SSL RSA key and specifies the key length.(Supported lengths:

2048 (bits) or 3092 (bits))

The following elements can be associated with the key. When the key is displayed, they are also displayed.

cn common- name—Specifies the fully qualified device URL or IP address. (Length: 1–64 characters).
If unspecified, defaults to the lowest IP address of the device (when the certificate is generated).

ou organization-unit—Specifies the organization-unit or department name. (Length: 1–64 characters)

or organization—Specifies the organization name. (Length: 1–64 characters)

loc location—Specifies the location or city name. (Length: 1–64 characters)

st state—Specifies the state or province name. (Length: 1–64 characters)

cu country—Specifies the country name. (Length: 2 characters)

duration days—Specifies the number of days a certification is valid. (Range: 30–1095)

Default Configuration

If the key-generate parameter is not used the certificate is generated using the existing key.

The default SSL’s RSA key length is 2048.

The default SSL’s EC key length is 256.

If cn common- name is not specified, it defaults to the device’s lowest static IPv6 address (when the certificate
is generated), or to the device’s lowest static IPv4 address if there is no static IPv6 address, or to 0.0.0.0 if
there is no static IP address.

If duration days is not specified, it defaults to 730 days.

Command Mode

Global Configuration mode

User Guidelines

If the specific certificate key does not exist, you must use the parameter key-generate.

If both certificates 1 and 2 have been generated, use the ip https certificate command to activate one of them.

Cisco Business Switches 350 Series CLI Guide

1165

crypto certificate generate

RSA and Certificate Commands

See Keys and Certificates for information on how to display and copy this key pair.

Erasing the startup configuration or returning to factory defaults automatically deletes the default keys and
they are recreated during device initialization.

Example

The following example generates a self-signed certificate for HTTPS whose key length is 2048 bytes.

switchxxxxxx(config)# crypto certificate 1 generate key-generate 2048

Cisco Business Switches 350 Series CLI Guide

1166

RSA and Certificate Commands

crypto certificate request

crypto certificate request

The crypto certificate request Privileged EXEC mode command generates and displays a certificate request
for HTTPS.

Syntax

crypto certificate number request [cn common- name] [ou organization-unit] [or organization] [loc location]
[st state] [cu country]

Parameters

• number—Specifies the certificate number. (Range: 1–2)

• The following elements can be associated with the key. When the key is displayed, they are also displayed.

cn common- name—Specifies the fully qualified device URL or IP address. (Length: 1–64 characters).
If unspecified, defaults to the lowest IP address of the device (when the certificate is generated).

ou organization-unit—Specifies the organization-unit or department name. (Length: 1–64 characters)

or organization—Specifies the organization name. (Length: 1–64 characters)

loc location—Specifies the location or city name. (Length: 1–64 characters)

st state—Specifies the state or province name. (Length: 1–64 characters)

cu country—Specifies the country name. (Length: 2 characters)

Default Configuration

If cn common-name is not specified, it defaults to the device’s lowest static IPv6 address (when the certificate
is generated), or to the device’s lowest static IPv4 address if there is no static IPv6 address, or to 0.0.0.0 if
there is no static IP address.

Command Mode

Privileged EXEC mode

User Guidelines

Use this command to export a certificate request to a Certification Authority. The certificate request is generated
in Base64-encoded X.509 format.

Before generating a certificate request, first generate a self-signed certificate using the crypto cerificate
generate command to generate the keys. The certificate fields must be re-entered.

After receiving the certificate from the Certification Authority, use the crypto cerificate import command
to import the certificate into the device. This certificate replaces the self-signed certificate.

Example

The following example displays the certificate request for HTTPS.

switchxxxxxx# crypto certificate 1 request
-----BEGIN CERTIFICATE REQUEST-----

Cisco Business Switches 350 Series CLI Guide

1167

crypto certificate request

RSA and Certificate Commands

MIwTCCASoCAQAwYjELMAkGA1UEBhMCUFAxCzAJBgNVBAgTAkNDMQswCQYDVQQH
EwRDEMMAoGA1UEChMDZGxkMQwwCgYDVQQLEwNkbGQxCzAJBgNVBAMTAmxkMRAw
DgKoZIhvcNAQkBFgFsMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC8ecwQ
HdML0831i0fh/F0MV/Kib6Sz5p+3nUUenbfHp/igVPmFM+1nbqTDekb2ymCu6K
aKvEbVLF9F2LmM7VPjDBb9bb4jnxkvwW/wzDLvW2rsy5NPmH1QVl+8Ubx3GyCm
/oW93BSOFwxwEsP58kf+sPYPy+/8wwmoNtDwIDAQABoB8wHQYJKoZIhvcNAQkH
MRDjEyMwgICCAgICAICAgIMA0GCSqGSIb3DQEBBAUAA4GBAGb8UgIx7rB05m+2
m5ZZPhIwl8ARSPXwhVdJexFjbnmvcacqjPG8pIiRV6LkxryGF2bVU3jKEipcZa
g+uNpyTkDt3ZVU72pjz/fa8TF0n3
-----END CERTIFICATE REQUEST-----

Cisco Business Switches 350 Series CLI Guide

1168

RSA and Certificate Commands

crypto certificate import

crypto certificate import

The crypto certificate import Global Configuration mode command imports a certificate signed by a
Certification Authority for HTTPS. In addition, the relevant key-pair can also be imported.

Use the no form of the command to delete the user-defined keys and certificate.

Syntax

crypto certificate number import

encrypted crypto certificate number import

no crypto certificate number

Parameters

• number—Specifies the certificate number. (Range: 1–2).

Command Mode

Global Configuration mode

User Guidelines

Certificate needs to be imported from PEM encoding/file extension

To end the session (return to the command line to enter the next command), enter a blank line.

The imported certificate must be based on a certificate request created by the crypto cerificate request
command.

If only the certificate is imported, and the public key found in the certificate does not match the device's SSL
key, the command fails. If both the public key and the certificate are imported, and the public key found in
the certificate does not match the imported key, the command fails.

This command is saved in the Running configuration file.

When using the encrypted form of the command, only the private key must be in encrypted format.

Example 1 - The following example imports a certificate signed by the Certification Authority for
HTTPS.

switchxxxxxx(config)# crypto certificate 1 import
Please paste the input now, add a period (.) on a separate line after the input,and press
Enter.
-----BEGIN CERTIFICATE-----
MIIBkzCB/QIBADBUMQswCQYDVQQGEwIgIDEKMAgGA1UECBMBIDEKMAgGA1UEBxMB
IDEVMBMGA1UEAxMMMTAuNS4yMzQuMjA5MQowCAYDVQQKEwEgMQowCAYDVQQLEwEg
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDK+beogIcke73sBSL7tC2DMZrY
OOg9XM1AxfOiqLlQJHd4xP+BHGZWwfkjKjUDBpZn52LxdDu1KrpB/h0+TZP0Fv38
7mIDqtnoF1NLsWxkVKRM5LPka0L/ha1pYxp7EWAt5iDBzSw5sO4lv0bSN7oaGjFA
6t4SW2rrnDy8JbwjWQIDAQABoAAwDQYJKoZIhvcNAQEEBQADgYEAuqYQiNJst6hI
XFDxe7I8Od3Uyt3Dmf7KE/AmUV0Pif2yUluy/RuxRwKhDp/lGrK12tzLQz+s5Ox7
Klft/IcjzbBYXLvih45ASWG3TRv2WVKyWs89rPPXu5hKxggEeTvWqpuS+gXrIqjW
WVZd0n1fXhMacoflgnnEmweIzmrqXBs=
.
-----END CERTIFICATE-----

Cisco Business Switches 350 Series CLI Guide

1169

crypto certificate import

RSA and Certificate Commands

Certificate imported successfully.
Issued by : C= , ST= , L= , CN=0.0.0.0, O= , OU=

Valid From: Jan 24 18:41:24 2011 GMT

Valid to: Jan 24 18:41:24 2012 GMT
Subject: C=US , ST= , L= , CN=router.gm.com, O= General Motors, OU=

SHA1 Finger print: DC789788 DC88A988 127897BC BB789788

Example 2:The following example imports a certificate signed by the Certification Authority for
HTTPS, and the RSA key-pair.

switchxxxxxx(config)# crypto certificate 1 import
Please paste the input now, add a period (.) on a separate line after the input,and press
Enter.

-----BEGIN RSA PRIVATE KEY-----
ACnrqImEGlXkwxBuZUlAO9nHq9IGJsnkf7/MauGPVqxt5vfDf77uQ5CPf49JWQhu07cVXh
2OwrBhJgB69vLUlJujM9p1IXFpMk8qR3NS7JzlInYAWjHKKbEZBMsKSA6+t/UzVxevKK6H
TGB7vMxi+hv1bL9zygvmQ6+/6QfqA51c4nP/8a6NjO/ZOAgvNAMKNr2Wa+tGUOoAgL0b/C
11EoqzpCq5mT7+VOFhPSO4dUU+NwLv1YCb1Fb7MFoAa0N+y+2NwoGp0pxOvDA9ENYl7qsZ
MWmCfXu52/IxC7fD8FWxEBtks4V81Xqa7K6ET657xS7m8yTJFLZJyVawGXKnIUs6uTzhhW
dKWWc0e/vwMgPtLlWyxWynnaP0fAJ+PawOAdsK75bo79NBim3HcNVXhWNzqfg2s3AYCRBx
WuGoazpxHZ0s4+7swmNZtS0xI4ek43d7RaoedGKljhPqLHuzXHUon7Zx15CUtP3sbHl+XI
B3u4EEcEngYMewy5obn1vnFSot+d5JHuRwzEaRAIKfbHa34alVJaN+2AMCb0hpI3IkreYo
A8Lk6UMOuIQaMnhYf+RyPXhPOQs01PpIPHKBGTi6pj39XMviyRXvSpn5+eIYPhve5jYaEn
UeOnVZRhNCVnruJAYXSLhjApf5iIQr1JiJb/mVt8+zpqcCU9HCWQqsMrNFOFrSpcbHu5V4
ZX4jmd9tTJ2mhekoQf1dwUZbfYkRYsK70ps8u7BtgpRfSRUr7g0LfzhzMuswoDSnB65pkC
ql7yZnBeRS0zrUDgHLLRfzwjwmxjmwObxYfRGMLp4=
-----END RSA PRIVATE KEY-----
-----BEGIN RSA PUBLIC KEY-----
MIGHAoGBAMVuFgfJYLbUzmbm6UoLD3ewHYd1ZMXY4A3KLF2SXUd1TIXq84aME8DIitSfB2
Cqy4QB5InhgAobBKC96VRsUe2rzoNG4QDkj2L9ukQOvoFBYNmbzHc7a+7043wfVmH+QOXf
TbnRDhIMVrZJGbzl1c9IzGky1l21Xmicy0/nwsXDAgEj

-----END RSA PUBLIC KEY-----
-----BEGIN CERTIFICATE-----
MIIBkzCB/QIBADBUMQswCQYDVQQGEwIgIDEKMAgGA1UECBMBIDEKMAgGA1UEBxMB
IDEVMBMGA1UEAxMMMTAuNS4yMzQuMjA5MQowCAYDVQQKEwEgMQowCAYDVQQLEwEg
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDK+beogIcke73sBSL7tC2DMZrY
OOg9XM1AxfOiqLlQJHd4xP+BHGZWwfkjKjUDBpZn52LxdDu1KrpB/h0+TZP0Fv38
7mIDqtnoF1NLsWxkVKRM5LPka0L/ha1pYxp7EWAt5iDBzSw5sO4lv0bSN7oaGjFA
6t4SW2rrnDy8JbwjWQIDAQABoAAwDQYJKoZIhvcNAQEEBQADgYEAuqYQiNJst6hI
XFDxe7I8Od3Uyt3Dmf7KE/AmUV0Pif2yUluy/RuxRwKhDp/lGrK12tzLQz+s5Ox7
Klft/IcjzbBYXLvih45ASWG3TRv2WVKyWs89rPPXu5hKxggEeTvWqpuS+gXrIqjW
WVZd0n1fXhMacoflgnnEmweIzmrqXBs=
-----END CERTIFICATE-----
.
Certificate imported successfully.
Issued by : C= , ST= , L= , CN=0.0.0.0, O= , OU=

Valid From: Jan 24 18:41:24 2011 GMT

Valid to: Jan 24 18:41:24 2012 GMT
Subject: C=US , ST= , L= , CN=router.gm.com, O= General Motors, OU=

SHA1 Finger print: DC789788 DC88A988 127897BC BB789788

Example 3 - Import certificate with encrypted key

switchxxxxxx(config)# encrypted crypto certificate 1 import
-----BEGIN RSA ENCRYPTED PRIVATE KEY-----
wJIjj/tFEI/Z3GFkTl5C+SFOeSyTxnSsfssNo9CoHJ6X9Jg1SukjtXU49kaUbTjoQVQatZ
AdQwgWM5mnjUhUaJ1MM3WfrApY7HaBL3iSXS9jDVrf++Q/KKhVH6Pxlv6cKvYYzHg43Unm
CNI2n5zf9oisMH0U6gsIDs4ysWVD1zNgoVQwD7RqKpL9wo3+YVFVS6XCB7pDb7iPePefa6
GD/crN28vTLGf/NpyKoOhdAMRuwEQoapMo0Py2Cvy+sqLiv4ZKck1FPlsVFV7X7sh+zVa3
We84pmzyjGiY9S0tPdBSGhJ2xDNcqTyvUpffFEJJYrdGKGybqD0o3tD/ioUQ3UJgxDbGYw
aLlLoavSjMYiWkdPjfcbn5MVRdU5iApCQJXWv3MYC8GQ4HDa6UDN6aoUBalUhqjT+REwWO
DXpJmvmX4T/u5W4DPvELqTHyETxgQKNErlO7gRi2yyLcybUokh+SP+XuRkG4IKnn8KyHtz
XeoDojSe6OYOQww2R0nAqnZsZPgrDzj0zTDL8qvykurfW4jWa4cv1Sc1hDEFtHH7NdDLjQ
FkPFNAKvFMcYimidapG+Rwc0m3lKBLcEpNXpFEE3v1mCeyN1pPe6eSqMcBXa2VmbInutuP

Cisco Business Switches 350 Series CLI Guide

1170

RSA and Certificate Commands

crypto certificate import

CZM927oxkb41g+U5oYQxGhMK7OEzTmfS1FdLOmfqv0DHZNR4lt4KgqcSjSWPQeYSzB+4PW
Qmy4fTF4wQdvCLy+WlvEP1jWPbrdCNxIS13RWucNekrm9uf5Zuhd1FA9wf8XwSRJWuAq8q
zZFRmDMHPtey9ALO2alpwjpHOPbJKiCMdjHT94ugkF30eyeni9sGN6Y063IvuKBy0nbWsA
J0sxrvt3q6cbKJYozMQE5LsgxLNvQIH4BhPtUz+LNgYWb3V5SI8D8kRejqBM9eaCyJsvLF
+yAI5xABZdTPqz0l7FNMzhIrXvCqcCCCx+JbgP1PwYTDyD+m2H5v8Yv6sT3y7fZC9+5/Sn
Vf8jpTLMWFgVF9U1Qw9bA8HA7K42XE3R5Zr1doOeUrXQUkuRxLAHkifD7ZHrE7udOmTiP9
W3PqtJzbtjjvMjm5/C+hoC6oLNP6qp0TEn78EdfaHpMMutMF0leKuzizenZQ==
-----END RSA PRIVATE KEY-----
-----BEGIN RSA PUBLIC KEY-----
MIGJAoGBAMoCaK+b9hTgrzEeWjdz55FoWwV8s54k5VpuRtv1e5r1zp7kzIL6mvCCXk6J9c
kkr+TMfX63b9t5RgwGPgWeDHw3q5QkaqInzz1h7j2+A++mwCsHui1BhpFNFY/gmENiGq9f
puukcnoTvBNvz7z3VOxv6hw1UHMTOeO+QSbe7WwVAgMBAAE=
-----END RSA PUBLIC KEY-----
-----BEGIN CERTIFICATE-----
MIICHDCCAYUCEFCcI4/dhLsUhTWxOwbzngMwDQYJKoZIhvcNAQEEBQAwTzELMAkG
A1UEBhMCICAxCjAIBgNVBAgTASAxCjAIBgNVBAcTASAxEDAOBgNVBAMTBzAuMC4w
LjAxCjAIBgNVBAoTASAxCjAIBgNVBAsTASAwHhcNMTIwNTIxMTI1NzE2WhcNMTMw
NTIxMTI1NzE2WjBPMQswCQYDVQQGEwIgIDEKMAgGA1UECBMBIDEKMAgGA1UEBxMB
IDEQMA4GA1UEAxMHMC4wLjAuMDEKMAgGA1UEChMBIDEKMAgGA1UECxMBIDCBnzAN
BgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAygJor5v2FOCvMR5aN3PnkWhbBXyzniTl
Wm5G2/V7mvXOnuTMgvqa8IJeTon1ySSv5Mx9frdv23lGDAY+BZ4MfDerlCRqoifP
PWHuPb4D76bAKwe6LUGGkU0Vj+CYQ2Iar1+m66RyehO8E2/PvPdU7G/qHDVQcxM5
475BJt7tbBUCAwEAATANBgkqhkiG9w0BAQQFAAOBgQBOknTzas7HniIHMPeC5yC0
2rd7c+zqQOe1e4CpEvV1OC0QGvPa72pz+m/zvoFmAC5WjQngQMMwH8rNdvrfaSyE
dkB/761PpeKkUtgyPHfTzfSMcJdBOPPnpQcqbxCFh9QSNa4ENSXqC5pND02RHXFx
wS1XJGrhMUoNGz1BY5DJWw==
-----END CERTIFICATE-----
.
Certificate imported successfully.
Issued by : C= , ST= , L= , CN=0.0.0.0, O= , OU=

Valid From: Jan 24 18:41:24 2011 GMT

Valid to: Jan 24 18:41:24 2012 GMT
Subject: C=US , ST= , L= , CN=router.gm.com, O= General Motors, OU=

SHA1 Finger print: DC789788 DC88A988 127897BC BB789788

Example 3 - Import certificate with encrypted key
encrypted crypto certificate 1 import
-----BEGIN RSA ENCRYPTED PRIVATE KEY-----
wJIjj/tFEI/Z3GFkTl5C+SFOeSyTxnSsfssNo9CoHJ6X9Jg1SukjtXU49kaUbTjoQVQatZ
AdQwgWM5mnjUhUaJ1MM3WfrApY7HaBL3iSXS9jDVrf++Q/KKhVH6Pxlv6cKvYYzHg43Unm
CNI2n5zf9oisMH0U6gsIDs4ysWVD1zNgoVQwD7RqKpL9wo3+YVFVS6XCB7pDb7iPePefa6
GD/crN28vTLGf/NpyKoOhdAMRuwEQoapMo0Py2Cvy+sqLiv4ZKck1FPlsVFV7X7sh+zVa3
We84pmzyjGiY9S0tPdBSGhJ2xDNcqTyvUpffFEJJYrdGKGybqD0o3tD/ioUQ3UJgxDbGYw
aLlLoavSjMYiWkdPjfcbn5MVRdU5iApCQJXWv3MYC8GQ4HDa6UDN6aoUBalUhqjT+REwWO
DXpJmvmX4T/u5W4DPvELqTHyETxgQKNErlO7gRi2yyLcybUokh+SP+XuRkG4IKnn8KyHtz
XeoDojSe6OYOQww2R0nAqnZsZPgrDzj0zTDL8qvykurfW4jWa4cv1Sc1hDEFtHH7NdDLjQ
FkPFNAKvFMcYimidapG+Rwc0m3lKBLcEpNXpFEE3v1mCeyN1pPe6eSqMcBXa2VmbInutuP
CZM927oxkb41g+U5oYQxGhMK7OEzTmfS1FdLOmfqv0DHZNR4lt4KgqcSjSWPQeYSzB+4PW
Qmy4fTF4wQdvCLy+WlvEP1jWPbrdCNxIS13RWucNekrm9uf5Zuhd1FA9wf8XwSRJWuAq8q
zZFRmDMHPtey9ALO2alpwjpHOPbJKiCMdjHT94ugkF30eyeni9sGN6Y063IvuKBy0nbWsA
J0sxrvt3q6cbKJYozMQE5LsgxLNvQIH4BhPtUz+LNgYWb3V5SI8D8kRejqBM9eaCyJsvLF
+yAI5xABZdTPqz0l7FNMzhIrXvCqcCCCx+JbgP1PwYTDyD+m2H5v8Yv6sT3y7fZC9+5/Sn
Vf8jpTLMWFgVF9U1Qw9bA8HA7K42XE3R5Zr1doOeUrXQUkuRxLAHkifD7ZHrE7udOmTiP9
W3PqtJzbtjjvMjm5/C+hoC6oLNP6qp0TEn78EdfaHpMMutMF0leKuzizenZQ==
-----END RSA PRIVATE KEY-----
-----BEGIN RSA PUBLIC KEY-----
MIGJAoGBAMoCaK+b9hTgrzEeWjdz55FoWwV8s54k5VpuRtv1e5r1zp7kzIL6mvCCXk6J9c
kkr+TMfX63b9t5RgwGPgWeDHw3q5QkaqInzz1h7j2+A++mwCsHui1BhpFNFY/gmENiGq9f
puukcnoTvBNvz7z3VOxv6hw1UHMTOeO+QSbe7WwVAgMBAAE=
-----END RSA PUBLIC KEY-----
-----BEGIN CERTIFICATE-----
MIICHDCCAYUCEFCcI4/dhLsUhTWxOwbzngMwDQYJKoZIhvcNAQEEBQAwTzELMAkG
A1UEBhMCICAxCjAIBgNVBAgTASAxCjAIBgNVBAcTASAxEDAOBgNVBAMTBzAuMC4w
LjAxCjAIBgNVBAoTASAxCjAIBgNVBAsTASAwHhcNMTIwNTIxMTI1NzE2WhcNMTMw
NTIxMTI1NzE2WjBPMQswCQYDVQQGEwIgIDEKMAgGA1UECBMBIDEKMAgGA1UEBxMB

Cisco Business Switches 350 Series CLI Guide

1171

crypto certificate import

RSA and Certificate Commands

IDEQMA4GA1UEAxMHMC4wLjAuMDEKMAgGA1UEChMBIDEKMAgGA1UECxMBIDCBnzAN
BgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAygJor5v2FOCvMR5aN3PnkWhbBXyzniTl
Wm5G2/V7mvXOnuTMgvqa8IJeTon1ySSv5Mx9frdv23lGDAY+BZ4MfDerlCRqoifP
PWHuPb4D76bAKwe6LUGGkU0Vj+CYQ2Iar1+m66RyehO8E2/PvPdU7G/qHDVQcxM5
475BJt7tbBUCAwEAATANBgkqhkiG9w0BAQQFAAOBgQBOknTzas7HniIHMPeC5yC0
2rd7c+zqQOe1e4CpEvV1OC0QGvPa72pz+m/zvoFmAC5WjQngQMMwH8rNdvrfaSyE
dkB/761PpeKkUtgyPHfTzfSMcJdBOPPnpQcqbxCFh9QSNa4ENSXqC5pND02RHXFx
wS1XJGrhMUoNGz1BY5DJWw==
-----END CERTIFICATE-----
.
Certificate imported successfully.
Issued by : C= , ST= , L= , CN=0.0.0.0, O= , OU=

Valid From: Jan 24 18:41:24 2011 GMT

Valid to: Jan 24 18:41:24 2012 GMT
Subject: C=US , ST= , L= , CN=router.gm.com, O= General Motors, OU=

SHA1 Finger print: DC789788 DC88A988 127897BC BB789788

Cisco Business Switches 350 Series CLI Guide

1172

RSA and Certificate Commands

show crypto certificate

show crypto certificate

The show crypto certificate Privileged EXEC mode command displays the device SSL certificates and
key-pair for both default and user defined keys.

Syntax

show crypto certificate [mycertificate] [number]

Parameters

• number—Specifies the certificate number. (Range: 1,2)

• mycertificate—Specifies that only the certificate will be displayed

Default Configuration

displays both keys.

Command Mode

Privileged EXEC mode

Examples

The following example displays SSL certificate # 1 present on the device and the key-pair.

switchxxxxxx# show crypto certificate 1
Certificate 1:
Certificate Source: Default
-----BEGIN CERTIFICATE-----
dHmUgUm9vdCBDZXJ0aWZpZXIwXDANBgkqhkiG9w0BAQEFAANLADBIAkEAp4HS
nnH/xQSGA2ffkRBwU2XIxb7n8VPsTm1xyJ1t11a1GaqchfMqqe0kmfhcoHSWr
yf1FpD0MWOTgDAwIDAQABo4IBojCCAZ4wEwYJKwYBBAGCNxQCBAYeBABDAEEw
CwR0PBAQDAgFGMA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFAf4MT9BRD47
ZvKBAEL9Ggp+6MIIBNgYDVR0fBIIBLTCCASkwgdKggc+ggcyGgclsZGFwOi8v
L0VByb3h5JTIwU29mdHdhcmUlMjBSb290JTIwQ2VydGlmaWVyLENOPXNlcnZl
-----END CERTIFICATE-----

----BEGIN RSA PRIVATE KEY-----
ACnrqImEGlXkwxBuZUlAO9nHq9IGJsnkf7/MauGPVqxt5vfDf77uQ5CPf49JWQhu07cVXh
2OwrBhJgB69vLUlJujM9p1IXFpMk8qR3NS7JzlInYAWjHKKbEZBMsKSA6+t/UzVxevKK6H
TGB7vMxi+hv1bL9zygvmQ6+/6QfqA51c4nP/8a6NjO/ZOAgvNAMKNr2Wa+tGUOoAgL0b/C
11EoqzpCq5mT7+VOFhPSO4dUU+NwLv1YCb1Fb7MFoAa0N+y+2NwoGp0pxOvDA9ENYl7qsZ
MWmCfXu52/IxC7fD8FWxEBtks4V81Xqa7K6ET657xS7m8yTJFLZJyVawGXKnIUs6uTzhhW
dKWWc0e/vwMgPtLlWyxWynnaP0fAJ+PawOAdsK75bo79NBim3HcNVXhWNzqfg2s3AYCRBx
WuGoazpxHZ0s4+7swmNZtS0xI4ek43d7RaoedGKljhPqLHuzXHUon7Zx15CUtP3sbHl+XI
B3u4EEcEngYMewy5obn1vnFSot+d5JHuRwzEaRAIKfbHa34alVJaN+2AMCb0hpI3IkreYo
A8Lk6UMOuIQaMnhYf+RyPXhPOQs01PpIPHKBGTi6pj39XMviyRXvSpn5+eIYPhve5jYaEn
UeOnVZRhNCVnruJAYXSLhjApf5iIQr1JiJb/mVt8+zpqcCU9HCWQqsMrNFOFrSpcbHu5V4
ZX4jmd9tTJ2mhekoQf1dwUZbfYkRYsK70ps8u7BtgpRfSRUr7g0LfzhzMuswoDSnB65pkC
ql7yZnBeRS0zrUDgHLLRfzwjwmxjmwObxYfRGMLp4=
-----END RSA PRIVATE KEY-----
-----BEGIN RSA PUBLIC KEY-----
MIGHAoGBAMVuFgfJYLbUzmbm6UoLD3ewHYd1ZMXY4A3KLF2SXUd1TIXq84aME8DIitSfB2
Cqy4QB5InhgAobBKC96VRsUe2rzoNG4QDkj2L9ukQOvoFBYNmbzHc7a+7043wfVmH+QOXf
TbnRDhIMVrZJGbzl1c9IzGky1l21Xmicy0/nwsXDAgEj

Cisco Business Switches 350 Series CLI Guide

1173

show crypto certificate

RSA and Certificate Commands

-----END RSA PUBLIC KEY-----
Issued by: www.verisign.com
Valid from: 8/9/2003 to 8/9/2004
Subject: CN= router.gm.com, 0= General Motors, C= US
Finger print: DC789788 DC88A988 127897BC BB789788

Cisco Business Switches 350 Series CLI Guide

1174

Smartport Commands

This chapter contains the following sections:

• macro auto (Global), on page 1176
• macro auto built-in parameters, on page 1178
• macro auto persistent, on page 1179
• macro auto processing cdp, on page 1180
• macro auto processing lldp, on page 1181
• macro auto processing type, on page 1182
• macro auto resume, on page 1183
• macro auto smartport (Interface), on page 1184
• macro auto smartport type, on page 1185
• macro auto trunk refresh, on page 1187
• macro auto user smartport macro, on page 1188
• show macro auto ports, on page 1190
• show macro auto processing, on page 1192
• show macro auto smart-macros, on page 1193
• smartport storm-control, on page 1195

Cisco Business Switches 350 Series CLI Guide

1175

macro auto (Global)

Smartport Commands

macro auto (Global)

The macro auto Global Configuration mode command sets the Auto Smartports administrative global state.
The no format of the command returns to the default.

Syntax

macro auto {enabled | disabled | controlled}

no macro auto

Parameters

• enabled—Auto Smartport administrative global and operational states are enabled.

• disabled—Auto Smartport administrative global and operational states are disabled.

• controlled—Auto Smartport administrative global and operational states are enabled when Auto Voice

VLAN is in operation.

Default Configuration

Administrative state is Disabled

Command Mode

Global Configuration mode

User Guidelines

Regardless of the status of Auto Smartport, you can always manually apply a Smartport macro to its associated
Smartport type. A Smartport macro is either a built-in macro or a user-defined macro. You can define and
apply a macro using the CLI commands presented in the Macro Commands section.

If the Auto Smartport Administrative state is controlled, the Auto Smartport Operational state is managed by
the Voice VLAN manager and is set as follows:

• Auto Smartport Operational state is disabled when the OUI Voice VLAN is enabled.

Auto Smartport Operational state is enabled when the Auto Voice VLAN is enabled.

A user cannot enable Auto Smartport globally if the OUI Voice VLAN is enabled.

Example

This example shows an attempt to enable the Auto Smartport feature globally in the controlled mode. This is
not possible because the OUI voice feature is enabled. The voice VLAN state is then disabled, after which
Auto Smartports can be enabled. The appropriate VLANs are automatically enabled because the ports are
configured for Auto Smartports on these VLANs.

switchxxxxxx(config)# macro auto controlled
switchxxxxxx(config)# macro auto enabled
Auto smartports cannot be enabled because OUI voice is enabled.
switchxxxxxx(config)# voice vlan state disabled
switchxxxxxx(config)# macro auto enabled

Cisco Business Switches 350 Series CLI Guide

1176

Smartport Commands

macro auto (Global)

switchxxxxxx(config)#
10-Apr-2011 16:11:31 %LINK-I-Up: Vlan 20
10-Apr-2011 16:11:33 %LINK-I-Up: Vlan 5
10-Apr-2011 16:11:33 %LINK-I-Up: Vlan 6
10-Apr-2011 16:11:33 %LINK-I-Up: Vlan 7
10-Apr-2011 16:11:33 %LINK-I-Up: Vlan 8
10-Apr-2011 16:11:33 %LINK-I-Up: Vlan 9
10-Apr-2011 16:11:33 %LINK-I-Up: Vlan 10

Cisco Business Switches 350 Series CLI Guide

1177

macro auto built-in parameters

Smartport Commands

macro auto built-in parameters

The macro auto built-in parameters Global Configuration mode command replaces the default Auto
Smartport values of built-in Smartport macros. The no format of the command returns to the default values.

Syntax

macro auto built-in parameters smartport-type [parameter-name value [parameter-name value
[parameter-name value]]]

no macro auto built-in parameters smartport-type

Parameters

• smartport-type—Smartport type (range: printer, desktop, guest, server, host, ip_camera, ip_phone,

ip_phone_desktop, switch, router or wireless access point (ap)).

• parameter-name value—Specifies the parameter name and its value. These are the parameters of the

built-in or user-defined macro defined in the macro auto user smartport macro command

Default Configuration

The default value of parameter $native_vlan of the built-in Smartport macros is 1.

For other parameters, the default value is the parameter’s default value. For instance, if the parameter is the
native VLAN, the default value is the default native VLAN.

Command Mode

Global Configuration mode

User Guidelines

By default, each Smartport type is associated with a pair of built-in macros: a macro that applies the
configuration and the anti macro (no macro) to remove the configuration. The Smartport types are the same
as the name of the corresponding built-in Smartport macros, with the anti macro prefixed with no_.

The value of the parameter $voice_vlan cannot be changed by this command.

Example

To change the parameters of a built-in macro:

switchxxxxxx(config)# macro auto built-in parameters switch $native_vlan 2

Cisco Business Switches 350 Series CLI Guide

1178

Smartport Commands

macro auto persistent

macro auto persistent

The macro auto persistent Interface Configuration mode command sets the interface as a Smartport persistent
interface. The no format of the command returns it to default.

Syntax

macro auto persistent

no macro auto persistent

Parameters

This command has no parameters or keywords.

Default Configuration

Persistent is set.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

A Smartport’s persistent interface retains its dynamic configuration in the following cases: link down/up, the
attaching device ages out, and reboot. Note that for persistence and the Smartport configuration to be effective
across reboot, the Running Configuration file must be saved to the Startup Configuration file.

Example

The example establishes two port ranges and makes one persistent and the other not.

switchxxxxxx(config)# interface range gi1/0/1-2
switchxxxxxx(config-if-range)# macro auto persistent
switchxxxxxx(config-if-range)# exit
switchxxxxxx(config)# interface range gi1/0/3-4
switchxxxxxx(config-if-range)# no macro auto persistent

Cisco Business Switches 350 Series CLI Guide

1179

macro auto processing cdp

Smartport Commands

macro auto processing cdp

The macro auto processing cdp Global Configuration mode command enables using CDP capability
information to identify the type of an attached device.

When Auto Smartport is enabled on an interface and this command is run, the switch automatically applies
the corresponding Smartport type to the interface based on the CDP capabilities advertised by the attaching
device(s).

The no format of the command disables the feature.

Syntax

macro auto processing cdp

no macro auto processing cdp

Parameters

This command has no parameters or keywords.

Default Configuration

Enabled

Command Mode

Global Configuration mode

Example

To enable CDP globally:

switchxxxxxx(config)# macro auto processing cdp

Cisco Business Switches 350 Series CLI Guide

1180

Smartport Commands

macro auto processing lldp

macro auto processing lldp

The macro auto processing lldp Global Configuration mode command enables using the LLDP capability
information to identify the type of an attached device.

When Auto Smartport is enabled on an interface and this command is run, the switch automatically applies
the corresponding Smartport type to the interface based on the LLDP capabilities advertised by the attaching
device(s).

The no format of the command disables the feature.

Syntax

macro auto processing lldp

no macro auto processing lldp

Parameters

This command has no parameters or keywords.

Default Configuration

Enabled

Command Mode

Global Configuration mode

Example

To enable LLDP globally:

switchxxxxxx(config)# macro auto processing lldp

Cisco Business Switches 350 Series CLI Guide

1181

macro auto processing type

Smartport Commands

macro auto processing type

The macro auto processing type Global Configuration mode command enables or disables automatic detection
of devices of given type. The no format of the command returns to the default.

Syntax

macro auto processing type smartport-type {enabled | disabled}

no macro auto processing type smartport-type

Parameters

• smartport-type—Smartport type (range: host, ip_phone, ip_phone_desktop, switch, router or wireless

access point (ap)).

Default Configuration

By default, auto detection of ip_phone, ip_phone_desktop, switch, and wireless access point (ap) is enabled.

Command Mode

Global Configuration mode

Example

In this example, automatic detection of wireless access points (ap) is enabled.

switchxxxxxx(config)# macro auto processing type ?

host
ip_phone
ip_phone_desktop
switch
router
ap

set type to host
set type to ip_phone
set type to ip_phone_desktop
set type to switch
set type to router
set type to access point

switchxxxxxx(config)# macro auto processing type ap enabled

Cisco Business Switches 350 Series CLI Guide

1182

Smartport Commands

macro auto resume

macro auto resume

The macro auto resume Interface Configuration mode command changes the Smartport type from unknown
to default and resumes the Smartport feature on a given interface (but does not reapply the Smartport macro;
this is done by the macro auto trunk refresh command).

Syntax

macro auto resume

Parameters

This command has no parameters or keywords.

Default Configuration

None

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

When a Smartport macro fails at an interface, the Smartport type of the interface becomes Unknown. You
must diagnose the reason for the failure on the interface and/or Smartport macro, and correct the error.

Example

Changes the Smartport type from unknown to default and resumes the Smartport feature on port 1.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# macro auto resume

Cisco Business Switches 350 Series CLI Guide

1183

macro auto smartport (Interface)

Smartport Commands

macro auto smartport (Interface)

The macro auto smartport Interface Configuration mode command enables the Auto Smartport feature on
a given interface. The no format of the command disables the feature on the interface.

Syntax

macro auto smartport

no macro auto smartport

Parameters

This command has no parameters or keywords.

Default Configuration

Enabled.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

This command is effective only when Auto Smartport is globally enabled.

Example

Enables the Auto Smartport feature on port 1:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# macro auto smartport

Cisco Business Switches 350 Series CLI Guide

1184

Smartport Commands

macro auto smartport type

macro auto smartport type

The macro auto smartport type Interface Configuration mode command manually (statically) assigns a
Smartport type to an interface. The no format of the command removes the manually-configured type and
returns it to default.

Syntax

macro auto smartport type smartport-type [parameter-name value [parameter-name value [parameter-name
value]]]

no macro auto smartport type

Parameters

• smartport-type—Smartport type.

• parameter-name value —Specifies the parameter name and its value (Range: printer, desktop, guest,
server, host, ip_camera, ip_phone, ip_phone_desktop, switch, router or wireless access point (ap)).

Default Configuration

parameter-name value—Parameter default value. For instance, if the parameter is the voice VLAN, the
default value is the default voice VLAN.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

A static type set by the command cannot be changed by a dynamic type.

Example

This example shows an attempt to set the Smartport type of port 1 to printer (statically). The macro fails at
line 10.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# macro auto smartport type printer
30-May-2011 15:02:45 %AUTOSMARTPORT-E-FAILEDMACRO: Macro printer for auto smar
port type Printer on interface gi1/0/1 failed at command number 10
switchxxxxxx(config-if)# exit
switchxxxxxx(config)# do show parser macro name printer
Macro name : printer
Macro type : default interface

1. #macro description printer
2. #macro keywords $native_vlan
3. #
4. #macro key description: $native_vlan: The untag VLAN which will be configu

red on the port

5. #Default Values are
6. #$native_vlan = Default VLAN
7. #
8. #the port type cannot be detected automatically
9. #

Cisco Business Switches 350 Series CLI Guide

1185

macro auto smartport type

Smartport Commands

10. switchport mode access
11. switchport access vlan $native_vlan
12. #
13. #single host
14. port security max 1
15. port security mode max-addresses
16. port security discard trap 60
17. #
18. smartport storm-control broadcast level 10
19. smartport storm-control include-multicast
20. smartport storm-control broadcast enable

switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

1186

Smartport Commands

macro auto trunk refresh

macro auto trunk refresh

The macro auto trunk refresh Global Configuration command reapplies the Smartport macro on a specific
interface, or to all the interfaces with the specified Smartport type.

Syntax

macro auto trunk refresh [smartport-type] [interface-id]

Parameters

• smartport-type—Smartport type (switch, router, wireless access point (ap))

• interface-id—Interface Identifier (port or port channel).

Default Configuration

See User Guidelines.

Command Mode

Global Configuration mode

User Guidelines

The macro auto smartport command becomes effective only when the Auto Smartport is globally enabled.

If both smartport-type and interface-id are defined, the attached Smartport macro is executed on the interface
if it has the given Smartport type.

If only smartport-type is defined, the attached Smartport macro is executed on all interfaces having the given
Smartport type.

If only interface-id is defined then the corresponding attached Smartport macro is executed if the interface
has one of the following Smartport types: switch, router or wireless access point (ap).

If a Smartport macro contains configuration commands that are no longer current on one or more interfaces,
you can update their configuration by reapplying the Smartport macro on the interfaces.

Example

Adds the ports of Smartport type switch to all existing VLANs by running the associated Smartport macros.

switchxxxxxx(config)# macro auto trunk refresh switch

Cisco Business Switches 350 Series CLI Guide

1187

macro auto user smartport macro

Smartport Commands

macro auto user smartport macro

The macro auto user smartport macro Global Configuration mode command links user-defined Smartport
macros to a Smartport type. This is done by replacing the link to the built-in macro with the link to the
user-defined macro. The no format of the command returns the link to the default built-in Smartport macro.

Syntax

macro auto user smartport macro smartport-type user-defined-macro-name [parameter-name value
[parameter-name value [parameter-name value]]]

no macro auto user smartport macro smartport-type

Parameters

• smartport-type—Smartport type (range: printer, desktop, guest, server, host, ip_camera, ip_phone,

ip_phone_desktop, switch, router or wireless access point (ap)).

• user-defined-macro-name—Specifies the user-defined macro name that replaces the built-in Smartport

macro.

• parameter-name value—Specifies the parameter name and its value in the user-defined macro.

Default Configuration

parameter-name value—Parameter’s default value. For instance, if the parameter is the native VLAN, the
default value is the default native VLAN.

Command Mode

Global Configuration mode

User Guidelines

The scope of each parameter is the macro in which it is defined, with the exception of the parameter
$voice_vlan, which is a global parameter and its value is specified by the switch and cannot be defined in a
macro.

The macros must be defined before linking them in this command.

Smartport macros must be disconnected from the Smartport type before removing them (using the no version
of this command).

To associate a Smartport type with a user-defined macros, you must have defined a pair of macros: one to
apply the configuration, and the other (anti macro) to remove the configuration. The macros are paired by
their name. The name of the anti macro is the concatenation of no_ with the name of the corresponding macro.
Please refer to the Macro Command section for details about defining macro.

Example

To link the user-defined macro: my_ip_phone_desktop to the Smartport type: ip_phone_desktop and provide
values for its two parameters:

Cisco Business Switches 350 Series CLI Guide

1188

Smartport Commands

macro auto user smartport macro

switchxxxxxx(config)# macro auto user smartport macro ip_phone_desktop my_ip_phone_desktop

$p1 1 $p2 2

Cisco Business Switches 350 Series CLI Guide

1189

show macro auto ports

Smartport Commands

show macro auto ports

The show macro auto ports EXEC mode command displays information about all Smartport ports or a
specific one. If a macro was run on the port and it failed, the type of the port is displayed as Unknown.

Syntax

show macro auto ports [interface-id | detailed]

Parameters

• interface-id—Interface Identifier (Ethernet interface, port channel)

• detailed—Displays information for non-present ports in addition to present ports.

Default Configuration

Information about all ports is displayed.

Command Mode

User EXEC mode

Examples

Example 1—Note that Smartport on switch and phone types was configured automatically. Smartport on
routers was configured statically. Auto smartports are enabled globally.

switchxxxxxx# show macro auto ports
Smartport is enabled
Administrative Globally Auto Smartport is enabled
Operational Globally Auto Smartport is enabled

Interface
-----------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4

Auto Smartport
Admin State
--------------
disabled
disabled
enabled
enabled

Persistent
State
----------
enabled

enabled
disabled

enabled

Smartport Type
--------------
router(static)

switch
default

phone

Example 2—Note that Smartport on switch and phone types was configured automatically. Smartport on
routers was configured statically. Auto smartports are enabled globally.

switchxxxxxx# show macro auto ports
Smartport is enabled
Administrative Globally Auto Smartport is disabled
Operational Globally Auto Smartport is disabled

Cisco Business Switches 350 Series CLI Guide

1190

Smartport Commands

show macro auto ports

Interface
-----------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4

Auto Smartport
Admin State
--------------
disabled
disabled
enabled
enabled

Persistent
State
----------
enabled
enabled
disabled

enabled

Smartport Type
--------------
router(static)

switch
default

phone

Example 3—Disabling auto SmartPort on gi1/0/2:

switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# no macro auto smartport
switchxxxxxx(config-if)# end
switchxxxxxx# show macro auto ports gi1/0/2
SmartPort is Enabled
Administrative Globally Auto SmartPort is controlled
Operational Globally Auto SmartPort is enabled
Auto SmartPort is disabled on gi1/0/2
Persistent state is not-persistent
Interface type is default
No macro has been activated

Example 4—Enabling auto Smartport on gi1/0/1:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# macro auto smartport
switchxxxxxx(config-if)# end
switchxxxxxx# show macro auto ports gi1/0/1
SmartPort is Enabled
Administrative Globally Auto SmartPort is enabled
Operational Globally Auto SmartPort is enabled
Auto SmartPort is enabled on gi1/0/1
Persistent state is persistent
Interface type is switch
Last activated macro is switch

Cisco Business Switches 350 Series CLI Guide

1191

show macro auto processing

Smartport Commands

show macro auto processing

The show macro auto processing EXEC mode command displays information about which protocols
(CDP/LLDP) are enabled and which device types can be detected automatically.

Syntax

show macro auto processing

Parameters

This command has no parameters or keywords.

Default Configuration

None

Command Mode

User EXEC mode

Example

switchxxxxxx# show macro auto processing
CDB: enabled
LLDP: enabled
:disabled
host
ip_phone
:enabled
ip_phone_desktop:enabled
:enabled
switch
:disabled
router
:enabled
ap

Cisco Business Switches 350 Series CLI Guide

1192

Smartport Commands

show macro auto smart-macros

show macro auto smart-macros

The show macro auto smart-macros EXEC mode command displays the name of Smartport macros, their
type (built-in or user-defined) and their parameters. This information is displayed for all Smartport types or
for the specified one.

Syntax

show macro auto smart-macros [smartport-type]

Parameters

• smartport-type—Smartport type (range: printer, desktop, guest, server, host, ip_camera, ip_phone,

ip_phone_desktop, switch, router or wireless access point (ap)).

Default Configuration

None

Command Mode

User EXEC mode

Example

: $max_hosts=10 $native_vlan=1

: $max_hosts=10 $native_vlan=1

: $native_vlan=1

: $native_vlan=1

switchxxxxxx# show macro auto smart-macros
SG300-52-R#show macro auto smart-macros
SmartPort type : printer
Parameters
SmartPort Macro: printer (Built-In)
SmartPort type : desktop
Parameters
SmartPort Macro: desktop (Built-In)
SmartPort type : guest
Parameters
SmartPort Macro: guest (Built-In)
SmartPort type : server
Parameters
SmartPort Macro: server (Built-In)
SmartPort type : host
Parameters
SmartPort Macro: host (Built-In)
SmartPort type : ip-camera
Parameters
SmartPort Macro: ip_camera (Built-In)
SmartPort type : ip-phone
Parameters
SmartPort Macro: ip_phone (Built-In)
SmartPort type : ip-phone-desktop
Parameters
SmartPort Macro: ip_phone_desktop (Built-In)
SmartPort type : switch
Parameters
SmartPort Macro: switch (Built-In)
SmartPort type : router
Parameters
SmartPort Macro: router (Built-In)

: $native_vlan=1

: $native_vlan=1 $voice_vlan=1

: $native_vlan=1 $voice_vlan=1

: $max_hosts=10 $native_vlan=1

: $max_hosts=10 $native_vlan=1 $voice_vlan=1

: $max_hosts=10 $native_vlan=1 $voice_vlan=1

Cisco Business Switches 350 Series CLI Guide

1193

show macro auto smart-macros

Smartport Commands

SmartPort type : ap
Parameters
SmartPort Macro: ap (Built-In)
SG300-52-R#

: $native_vlan=1 $voice_vlan=1

Cisco Business Switches 350 Series CLI Guide

1194

Smartport Commands

smartport storm-control

smartport storm-control

To enable broadcast, multicast, or unicast storm control on an interface, use the storm-control command in
Interface (Ethernet, Port Channel) Configuration mode. To return to default, use the no form of this command.

Syntax

smartport storm-control broadcast {level level | kbps kbps} [trap] [shutdown]

no smartport storm-control broadcast

smartport storm-control multicast [registred | unregistred] {level level | kbps kbps} [trap] [shutdown]

no smartport storm-control multicast

smartport storm-control unicast {level level | kbps kbps} [trap] [shutdown]

no smartport storm-control unicast

no smartport storm-control

Parameters

• broadcast—Enables broadcast storm control on the port.

• multicast [registred | unregistred]—Enables ether all multicast, only registered multicast, or only

unregistered multicast storm control on the port.

• unicast—Enables unicast unknown storm control on the port.

• level level—Suppression level in percentage. Block the flooding of storm packets when the value specified

for level is reached. (Range 1-100)

• kbps kbps—Maximum of kilobits per second of Broadcast traffic on a port. (Range 1 –10000000)

• trap—(Optional) Sends a trap when a storm occurs on a port. If the keyword is not specified the trap is

not sent.

• shutdown—(Optional) Shut down a port when a storm occurs on the port. If the keyword is not specified

extra traffic is discarded.

Default Configuration

Storm control is disabled.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example 1 - Set the maximum number of kilobits per second of Broadcast traffic on port 1 to 10000.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# smartport storm-control broadcast kpbs 10000

Example 2 - Set the maximum percentage of kilobits per second of Broadcast traffic on port 1 to
30%.

Cisco Business Switches 350 Series CLI Guide

1195

smartport storm-control

Smartport Commands

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# smartport storm-control broadcast level 30

Cisco Business Switches 350 Series CLI Guide

1196

sFlow Commands

This chapter contains the following sections:

• sflow receiver, on page 1198
• sflow flow-sampling, on page 1199
• sflow counters-sampling, on page 1200
• clear sflow statistics, on page 1201
• show sflow configuration, on page 1202
• sflow receiver source-interface, on page 1203
• sflow receiver source-interface-ipv6, on page 1204

Cisco Business Switches 350 Series CLI Guide

1197

sflow receiver

sflow receiver

sFlow Commands

To define the sFlow collector, use the sflow receiver Global Configuration mode command. To remove the
definition of the collector, use the no form of this command.

Syntax

sflow receiver index {ipv4-address | ipv6-address | hostname} [port port] [max-datagram-size bytes]

no sflow receiver index

Parameters

• index—The index of the receiver. (Range: 1–8)

• ipv4-address—IPv4 address of the host to be used as an sFlow Collector.

• ipv6-address—IPv6 address of the host to be used as an sFlow Collector. When the IPv6 address is a
Link Local address (IPv6Z address), the outgoing interface name must be specified. Refer to the User
Guidelines for the interface name syntax.

• hostname—Hostname of the host to be used as an sFlow Collector.

• port—(Optional) Port number for sflow messages. If unspecified, the port number defaults to 6343. The

range is 1-65535.

• bytes—(Optional) Specifies the maximum datagramsize that can be sent. If unspecified, it defaults to

1400.

Default

No receiver is defined.

Command Mode

Global Configuration mode

User Guidelines

If the IP address of the sFlow receiver is set to 0.0.0.0, no sFlow datagrams are sent.

Cisco Business Switches 350 Series CLI Guide

1198

sFlow Commands

sflow flow-sampling

sflow flow-sampling

To enable sFlow Flow sampling and configure the average sampling rate of a specific port, use the sflow
flow-sampling Interface Configuration mode command. To disable Flow sampling, use the no form of this
command.

Syntax

sflow flow-sampling rate receiver-index [max-header-size bytes]

no sflow flow-sampling

Parameters

rate—Specifies the average sampling rate. The sampling rate is calculated as 1/rate (Range:
1024–1073741823.)

receiver-index—Index of the receiver/collector (Range: 1–8.)

bytes—(Optional) Specifies the maximum number of bytes that would be copied from the sampled packet.
If unspecified, defaults to 128. (Range: 20–256.)

Default

Disabled

Command Mode

Interface Configuration mode

User Guidelines

A new sampling rate configuration is not immediately loaded to the hardware. It will be loaded to the hardware
only after the next packet is sampled (based on the current sampling rate).

Cisco Business Switches 350 Series CLI Guide

1199

sflow counters-sampling

sFlow Commands

sflow counters-sampling

To enable sFlow Counters sampling and to configure the maximum interval of a specific port, use the sflow
counters-sampling Interface Configuration mode command . To disable sFlow Counters sampling, use the
no form of this command.

Syntax

sflow counters-sampling interval receiver-index

no sflow counters-sampling

Parameters

interval—Specifies the maximum number of seconds between successive samples of the interface counters.
(Range: 15–86400.)

receiver-index—Index of the receiver/collector. (Range: 1–8.)

Default

Disabled

Command Mode

Interface Configuration mode

Cisco Business Switches 350 Series CLI Guide

1200

sFlow Commands

clear sflow statistics

clear sflow statistics

To clear sFlow statistics, use the clear sFlow statistics Privileged EXEC mode command.

Syntax

clear sflow statistics [interface-id]

Parameters

interface-id—(Optional) Specifies an interface ID. The interface ID must be an Ethernet port.

Command Mode

Privileged EXEC mode

User Guidelines

If no interface is specified by the user, the command clears all the sFlow statistics counters (including datagrams
sent). If an interface is specified by the user, the command clears only the counter of the specific interface.

Cisco Business Switches 350 Series CLI Guide

1201

show sflow configuration

sFlow Commands

show sflow configuration

To display the sFlow configuration for ports that are enabled for Flow sampling or Counters sampling, use
the show sflow configuration Privileged EXEC mode command.

Syntax

show sflow configuration [interface-id]

Parameters

interface-id—(Optional) Specifies an interface ID. The interface ID must be an Ethernet port.

Command Mode

Privileged EXEC mode

Example

switchxxxxxx# show sflow configuration
sFlow Agent Address 172.16.1.1
Receivers
Index
----- -------------------- -------- ----------------

Max Datagram Size

IP Address

Port

1
2
3
4
5
6
7
8

0.0.0.0
172.16.1.2
0.0.0.0
0.0.0.0
0.0.0.0
0.0.0.0
0.0.0.0
0.0.0.0

6343
6343
6343
6343
6343
6343
6343
6343

1400
1400
1400
1400
1400
1400
1400
1400

Sampling

Interfaces
Inter- Flow
face
----- -----------
gi1/0/1
gi1/0/2
Global values
--------------
Source IPv4 interface: vlan 120
Source IPv6 interface: vlan 10

1/2048
1/4096

60 sec
128
Disabled 128

Counters Max Header Flow
Sampling Size
--------- ---------

Collector Index
---------- -----

Counters Collector

Index
------------

1
2

1
0

Cisco Business Switches 350 Series CLI Guide

1202

sFlow Commands

sflow receiver source-interface

sflow receiver source-interface

Use the sflow receiver source-interface Global Configuration mode command to specify the source interface
whose IPv4 address will be used as the Source IPv4 address for communication with sFlow receivers. Use
the no form of this command to restore the default configuration.

Syntax

sflow receiver source-interface interface-id

no sflow receiver source-interface

Parameters

• interface-id—Specifies the source interface.

Default Configuration

The source IPv4 address is the IPv4 address defined on the outgoing interface and belonging to next hop IPv4
subnet.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface, the interface IP address belonging to next hop IPv4 subnet is
applied.

If the source interface is not the outgoing interface, the minimal IPv4 address defined on the source interface
is applied.

If there is no available IPv4 source address, a SYSLOG message is issued when attempting to communicate
with an IPv4 sFlow server.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# sflow receiver source-interface vlan 100

Cisco Business Switches 350 Series CLI Guide

1203

sflow receiver source-interface-ipv6

sFlow Commands

sflow receiver source-interface-ipv6

Use the sflow receiver source-interface-ipv6 Global Configuration mode command to specify the source
interface whose IPv6 address will be used as the source IPv6 address for communication with IPv6 sFlow
receivers. Use the no form of this command to restore the default configuration.

Syntax

sflow receiver source-interface-ipv6 interface-id

no sflow receiver source-interface-ipv6

Parameters

• interface-id—Specifies the source interface.

Default Configuration

The IPv6 source address is the IPv6 address defined on the outgoing interface and selected in accordance with
RFC6724.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface, the source IPv6 address is an IPv6 address defined on the
interfaces and selected in accordance with RFC 6724.

If the source interface is not the outgoing interface, the source IPv6 address is the minimal IPv6 address
defined on the source interface and matched to the scope of the destination IPv6 address is applied.

If there is no available source IPv6 address, a SYSLOG message is issued when attempting to communicate
with an IPv6 sFlow receiver.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# sflow receiver source-interface-ipv6 vlan 100

Cisco Business Switches 350 Series CLI Guide

1204

SPAN and RSPAN Commands

This chapter contains the following sections:

• monitor session destination, on page 1206
• monitor session source, on page 1208
• remote-span, on page 1210
• show monitor session, on page 1212
• show vlan remote-span, on page 1214

Cisco Business Switches 350 Series CLI Guide

1205

monitor session destination

SPAN and RSPAN Commands

monitor session destination

To create a new Switched Port Analyzer (SPAN) or Remote SPAN (RSPAN) destination session, use the
monitor session destination command in Global Configuration mode. To remove a destination session, use
the no form of the command.

Syntax

monitor session session_number destination {{interface interface-id [network]} | {remote vlan vlan-id
reflector-port interface-id} network}

no monitor session session_number destination

Parameters

• session_number—Specify the session number identified with the SPAN, RSPAN or flow mirror session.

The range is 1 to 4.

• interface interface-id—Specify the destination interface for the SPAN, RSPAN or flow mirror session
(Ethernet port). When the source interface is a RSPAN VLAN the RSPAN VLAN_ID is removed from
all frames copied to the interface.

• network—Specify that the destination port acts also as a network port.

Default Configuration

No SPAN and RSPAN sessions are configured.

Command Mode

Global Configuration mode

User Guidelines

Use the monitor session session_number destination interface interface-id, to create a SPAN, local flow
mirror.

If the network keyword is not defined only mirrored traffic sent on a destination port and all input traffic is
discard and a value of DOWN is advertised as its operational status to all applications running on it.

A destination port configured without the network keyword has the following limitations:

• UDLD cannot be enabled on the port.

• 802.1x cannot be enabled on the port.

A port cannot be configured as destination port with the network keyword if one the following conditions is
true:

• It belongs to the source VLAN

• It belongs to the remote VLAN

Please, do not add the destination port to the source.

Cisco Business Switches 350 Series CLI Guide

1206

SPAN and RSPAN Commands

monitor session destination

A destination port with the network keyword cannot be configured on an edge port (a port having one of the
vlan-mapping modes.

Mirrored traffic is sent to queue number 1 of the destination port.

Use the no monitor session session_number destination command to remove one destination session.

Example 1. The following example configures a SPAN session consisting from 3 source and one
destination session. The first source session copies traffic for both directions from the source port
gi1/0/2, the second source session copies bridges traffic from VLAN 100, and the third source session
copies traffic for received on the source port gi1/0/3. The destination session defines port gi1/0/1 as
the destination port.

switchxxxxxx(config)# monitor session 1 source interface gi1/0/2 both
switchxxxxxx(config)# monitor session 1 source vlan 100
switchxxxxxx(config)# monitor session 1 source interface gi1/0/3 rx
witchxxxxxx(config)# monitor session 1 destination interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

1207

monitor session source

SPAN and RSPAN Commands

monitor session source

To create a new Switched Port Analyzer (SPAN) or Remote SPAN (RSPAN) source session, use the monitor
session source command in Global Configuration mode. To remove a source session, use the no form of the
command.

Syntax

monitor session session_number source {interface interface-id [both | rx | tx]} | {vlan vlan-id} | {remote
vlan vlan-id}

no monitor session [session_number] source [{interface interface-id} | {vlan vlan-id} | {remote vlan
vlan-id}]

Parameters

• session_number—Specify the session number identified with the SPAN or RSPAN session. The range

is 1 to 4.

• interface interface-id—Specify the source interface for a SPAN or RSPAN session (Ethernet port).

• both, rx, tx—Specify the traffic direction to monitor. If you do not specify a traffic direction, the source

interface sends both transmitted and received traffic.

• vlan vlan-id—Specify the SPAN source interface as a VLAN ID. In this case only a value of 1 is allowed

for the session_number argument.

• remote vlan vlan-id—Specify the source RSPAN source VLAN ID.

Default Configuration

No SPAN and RSPAN sessions are configured.

Command Mode

Global Configuration mode

User Guidelines

Use the monitor session session_number source interface interface-id [both | rx | tx] command, to create a
SPAN or RSPAN start source session to monitor traffic that enters or leaves a source port.

Use the monitor session session_number source vlan vlan-id command, to create a SPAN or start RSPAN
source session to monitor traffic that bridged into a source VLAN.

Use the monitor session session_number source remote vlan vlan-id command, to create a final RSPAN
source session to monitor traffic that passed via a RSPAN VLAN.

A SPAN or RSPAN session consists from up to 8 sources and one destination with the same session number.

Each monitor session source command defines one source port or VLAN. Different monitor session source
commands must define different sources. A new command with the same session number and the same source
overrides the previous defined one.

Up to 8 sources can be defined in one session.

Cisco Business Switches 350 Series CLI Guide

1208

SPAN and RSPAN Commands

monitor session source

If a packet is mirrored by both the port-based ingress mirroring mechanism, and one of the other ingress
mirroring mechanisms, the selected session is the one with the higher session number.

All definitions of different source ports for the same source session must be of the same type: SPAN, start
RSPAN start, or RSPAN final.

A source port cannot be a destination port.

A source port cannot be the a OOB port.

The source interface in a RSPAN source switch can not be a membership of the remote VLAN.

Use the no monitor session session_number source {interface interface-id} | {vlan vlan-id} | {remote vlan
vlan-id} command to remove one source.

Use the no monitor session session_number source command to remove all sources ports of the given source
session.

Example 1. The following example configures a SPAN session consisting from 3 source and one
destination session. The first source session copies traffic for both directions from the source port
gi1/0/2, the second source session copies bridges traffic from VLAN 100, and the third source session
copies traffic for received on the source port gi1/0/3. The destination session defines port gi1/0/1 as
the destination port.

switchxxxxxx(config)# monitor session 1 source interface gi1/0/2 both
switchxxxxxx(config)# monitor session 1 source vlan 100
switchxxxxxx(config)# monitor session 1 source interface gi1/0/3 rx
switchxxxxxx(config)# monitor session 1 destination interface gi1/0/1

Cisco Business Switches 350 Series CLI Guide

1209

remote-span

remote-span

SPAN and RSPAN Commands

To configure a virtual local area network (VLAN) as a RSPAN remote VLAN, use the remote-span command
in VLAN Configuration mode. To return to default, use the no form of this command.

Syntax

remote-span

no remote-span

Parameters

This command has no arguments or keywords.

Default Configuration

A VLAN is not a RSPAN remote VLAN.

Command Mode

VLAN Configuration mode

User Guidelines

Use the remote-span command to define a VLAN as a RSPAN remote VLAN.

Only one Remote VLAN can be defined per switch.

The Remote VLAN must be created manually before configuring of the remote-span command.

Guest VLAN cannot be configured as a Remote VLAN.

All traffic into a RSPLAN VLAN is tagged and MAC learning is disabled in a RSPAN VLAN.

The remote-span command verifies that all ports of the configured VLAN are egress tagged ports and disables
MAC learning. The no remote-span command resets MAC learning.

Note. The membership of a RSPAN remote VLAN depended where it is defined:

• Source or Start switch—It is recommended that the RSPAN remote VLAN does not have any

memberships.

• Intermediate switch—It is recommended to remove the RSPAN remote VLAN from trunk ports not used
for passing mirrored traffic to avoid superfluous flooding. Usually, a RSPAN remote VLAN contains
two ports.

• Destination or Final switch—The RSPAN remote VLAN should contain memberships on which the
mirrored traffic via this VLAN is arrived. The destination interface cannot be a membership of this
VLAN.

Example 1. The following example shows how to configure a RSPAN remote VLAN in a source
switch:

switchxxxxxx(config)# vlan 2
switchxxxxxx(config-vlan)# remote-span

Cisco Business Switches 350 Series CLI Guide

1210

SPAN and RSPAN Commands

remote-span

switchxxxxxx(config-vlan)# exit
switchxxxxxx(config)# monitor session 1 source interface gi1/0/2 both
switchxxxxxx(config)# monitor session 1 destination remote vlan 2 reflector-port gi1/0/1

Example 2. The following example shows how to configure a RSPAN remote VLAN in a final
switch:

switchxxxxxx(config)# interface gi1/0/3
switchxxxxxx(config-if)# switchport mode trunk
switchxxxxxx(config-if)# switchport trunk allowed none
switchxxxxxx(config-if)# switchport trunk allowed add 2
switchxxxxxx(config-if)# exit
switchxxxxxx(config)# vlan 2
switchxxxxxx(config-vlan)# remote-span
switchxxxxxx(config-vlan)# exit
switchxxxxxx(config)# monitor session 1 source remote vlan 2
switchxxxxxx(config)# monitor session 1 destination interface gi1/0/1

Example 3. The following example shows how to configure a RSPAN remote VLAN in an
intermediate switch:

switchxxxxxx(config)# interface range gi1/0/3,4
switchxxxxxx(config-if)# switchport mode trunk
switchxxxxxx(config-if)# switchport trunk allowed none
switchxxxxxx(config-if)# switchport trunk allowed add 2
switchxxxxxx(config-if)# exit
switchxxxxxx(config)# vlan 2
switchxxxxxx(config-vlan)# remote-span
switchxxxxxx(config-vlan)# exit

Cisco Business Switches 350 Series CLI Guide

1211

show monitor session

SPAN and RSPAN Commands

show monitor session

To display information about Switched Port Analyzer (SPAN) and Remote SPAN (RSPAN) sessions on the
switch, use the show monitor command in User EXEC mode.

Syntax

show monitor session [session_number]

Parameters

• session_number—Specify the session number identified with the SPAN or RSPAN session. The range

is 1 to 7. If the argument is not defined information about all sessions are displayed.

Default Configuration

This command has no default settings.

Command Mode

User EXEC mode

User Guidelines

Use the show monitor session session_number command to display information about one session.

Use the show monitor session command to display information about all sessions

Example 1. The following example displays information about all SPAN sessions defined into the
switch:

switchxxxxxx> show monitor session
Session 1

Type: SPAN
Source: gi1/0/2, rx only
Source: VLAN 100
Source: flow mirrow, policy-map: alpha class-maps: ip-http, ipv6-http
Destination: gi1/0/1, network port

Field Definitions:

• Type—The type of the session.

• Source—A source of the session. The following options are supported:

Source: interface-id, traffic-direction(rx only,tx only, or both)

The Source is an interface.

Source: vlan vlan-id

The Source is a VLAN.

Source: remote vlan vlan-id

The Source is a RSPAN VLAN (in the RSPAN session final switch).

Cisco Business Switches 350 Series CLI Guide

1212

SPAN and RSPAN Commands

show monitor session

Source: flow mirrow, policy-map: policy-map-name, class-maps: class-map-name1,
class-map-name2

The Source is a flow mirror, only attached policy-names are displayed.

• Destination—A destination of the session. The following options are supported:

Destination: interface-id

The Destination is an interface, regular forwarding on the interface is not supported.

Destination: interface-id, network

The Destination is an interface, regular forwarding on the interface is supported.

Destination: RSPAN VLAN vlan-id, reflector-port interface-id

The switch is the first switch in the RSPAN session, regular forwarding on the interface

is not supported.

Destination: RSPAN VLAN vlan-id, reflector-port interface-id, network

The switch is the first switch in the RSPAN session, regular forwarding on the interface

is supported.

Cisco Business Switches 350 Series CLI Guide

1213

show vlan remote-span

SPAN and RSPAN Commands

show vlan remote-span

To display a list of remote Switched Port Analyzer (RSPAN) VLANs, use the show vlan remote-span
command in User EXEC mode.

Syntax

show vlan remote-span

Parameters

This command has no arguments or keywords

Default Configuration

This command has no default settings.

Command Mode

User EXEC mode

Example. This example shows how to display a list of remote SPAN VLANs:

switchxxxxxx> show vlan remote-span
Remote SPAN VLAN: 20

Cisco Business Switches 350 Series CLI Guide

1214

Spanning Tree Commands

This chapter contains the following sections:

• spanning-tree, on page 1217
• spanning-tree mode, on page 1218
• spanning-tree forward-time, on page 1219
• spanning-tree hello-time, on page 1220
• spanning-tree max-age, on page 1221
• spanning-tree priority, on page 1222
• spanning-tree disable, on page 1223
• spanning-tree cost, on page 1224
• spanning-tree port-priority, on page 1225
• spanning-tree portfast, on page 1226
• spanning-tree link-type, on page 1227
• spanning-tree pathcost method, on page 1228
• spanning-tree bpdu (Global), on page 1229
• spanning-tree bpdu (Interface), on page 1230
• spanning-tree guard root, on page 1231
• spanning-tree bpduguard, on page 1232
• clear spanning-tree counters, on page 1233
• clear spanning-tree detected-protocols, on page 1234
• spanning-tree mst priority, on page 1235
• spanning-tree mst max-hops, on page 1236
• spanning-tree mst port-priority, on page 1237
• spanning-tree mst cost, on page 1238
• spanning-tree mst configuration, on page 1239
• instance (MST), on page 1240
• name (MST), on page 1241
• revision (MST), on page 1242
• show (MST), on page 1243
• exit (MST), on page 1244
• abort (MST), on page 1245
• show spanning-tree, on page 1246
• show spanning-tree bpdu, on page 1258
• spanning-tree loopback-guard, on page 1259

Cisco Business Switches 350 Series CLI Guide

1215

Spanning Tree Commands

• spanning-tree vlan forward-time, on page 1260
• spanning-tree vlan hello-time, on page 1261
• spanning-tree vlan max-age, on page 1262
• spanning-tree vlan priority, on page 1263
• spanning-tree vlan cost, on page 1264
• spanning-tree vlan port-priority, on page 1265

Cisco Business Switches 350 Series CLI Guide

1216

Spanning Tree Commands

spanning-tree

spanning-tree

Use the spanning-tree Global Configuration mode command to enable spanning-tree functionality. Use the
no form of this command to disable the spanning-tree functionality.

Syntax

spanning-tree

no spanning-tree

Default Configuration

Spanning-tree is enabled.

Command Mode

Global Configuration mode

Example

The following example enables spanning-tree functionality.

switchxxxxxx(config)# spanning-tree

Cisco Business Switches 350 Series CLI Guide

1217

spanning-tree mode

Spanning Tree Commands

spanning-tree mode

Use the spanning-tree mode Global Configuration mode command to select which Spanning Tree Protocol
(STP) protocol to run. Use the no form of this command to restore the default configuration.

Syntax

spanning-tree mode {stp| rstp | mst | pvst | rapid-pvst}

no spanning-tree mode

Parameters

• stp—Specifies that STP is enabled.

• rstp—Specifies that the Rapid STP is enabled.

• mst—Specifies that the Multiple STP is enabled.

• pvst—Specifies that the PVST+ is enabled.

• rapid-pvst—Specifies that the Rapid PVST+ is enabled.

Default Configuration

The default is RSTP.

Command Mode

Global Configuration mode

User Guidelines

In the RSTP mode, the device uses STP on a port, when the neighbor device uses STP.

In the MSTP mode, the device uses RSTP when the neighbor device uses RSTP, and uses STP when the
neighbor device uses STP.

If the PVST mode or the Rapid PVST mode is enabled the switch can support maximum 126 VLANs.

In the Rapid PVST mode, the device uses PVST into a VLAN on a port, when the neighbor device uses PVST.

Examples

The following example enables MSTP.

switchxxxxxx(config)# spanning-tree mode mst

Cisco Business Switches 350 Series CLI Guide

1218

Spanning Tree Commands

spanning-tree forward-time

spanning-tree forward-time

Use the spanning-tree forward-time Global Configuration mode command to configure the spanning-tree
bridge forward time, which is the amount of time a port remains in the listening and learning states before
entering the forwarding state. Use the no form of this command to restore the default configuration.

Syntax

spanning-tree forward-time seconds

no spanning-tree forward-time

Parameters

• seconds—Specifies the spanning-tree forward time in seconds. (Range: 4–30)

Default Configuration

15 seconds.

Command Mode

Global Configuration mode

User Guidelines

When configuring the forwarding time, the following relationship should be maintained:

2*(Forward-Time - 1) >= Max-Age

Example

The following example configures the spanning tree bridge forwarding time to 25 seconds.

switchxxxxxx(config)# spanning-tree forward-time 25

Cisco Business Switches 350 Series CLI Guide

1219

spanning-tree hello-time

Spanning Tree Commands

spanning-tree hello-time

Use the spanning-tree hello-time Global Configuration mode command to configure how often the device
broadcasts Hello messages to other devices. Use the no form of this command to restore the default
configuration.

Syntax

spanning-tree hello-time seconds

no spanning-tree hello-time

Parameters

• seconds—Specifies the spanning-tree Hello time in seconds. (Range: 1–10)

Default Configuration

2 seconds.

Command Mode

Global Configuration mode

User Guidelines

When configuring the Hello time, the following relationship should be maintained:

• Max-Age >= 2*(Hello-Time + 1)

Example

The following example configures the spanning-tree bridge hello time to 5 seconds.

switchxxxxxx(config)# spanning-tree hello-time 5

Cisco Business Switches 350 Series CLI Guide

1220

Spanning Tree Commands

spanning-tree max-age

spanning-tree max-age

Use the spanning-tree max-age Global Configuration mode command to configure the STP maximum age.
Use the no form of this command to restore the default configuration.

Syntax

spanning-tree max-age seconds

no spanning-tree max-age

Parameters

• seconds—Specifies the spanning-tree bridge maximum age in seconds. (Range: 6–40)

Default Configuration

The default maximum age is 20 seconds.

Command Mode

Global Configuration mode

User Guidelines

When configuring the maximum age, the following relationships should be maintained:

• 2*(Forward-Time - 1) >= Max-Age

• Max-Age >= 2*(Hello-Time + 1)

Example

The following example configures the spanning-tree bridge maximum age to 10 seconds.

switchxxxxxx(config)# spanning-tree max-age 10

Cisco Business Switches 350 Series CLI Guide

1221

spanning-tree priority

Spanning Tree Commands

spanning-tree priority

Use the spanning-tree priority Global Configuration mode command to configure the device STP priority,
which is used to determine which bridge is selected as the root bridge. Use the no form of this command to
restore the default device spanning-tree priority.

Syntax

spanning-tree priority priority

no spanning-tree priority

Parameters

• priority—Specifies the bridge priority. (Range: 0–61440)

Default Configuration

Default priority = 32768.

Command Mode

Global Configuration mode

User Guidelines

The priority value must be a multiple of 4096.

The switch with the lowest priority is the root of the spanning tree. When more than one switch has the lowest
priority, the switch with the lowest MAC address is selected as the root.

Example

The following example configures the spanning-tree priority to 12288.

switchxxxxxx(config)# spanning-tree priority 12288

Cisco Business Switches 350 Series CLI Guide

1222

Spanning Tree Commands

spanning-tree disable

spanning-tree disable

Use the spanning-tree disable Interface (Ethernet, Port Channel) Configuration mode command to disable
the spanning tree on a specific port. Use the no form of this command to enable the spanning tree on a port.

Syntax

spanning-tree disable

no spanning-tree disable

Default Configuration

Spanning tree is enabled on all ports.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example

The following example disables the spanning tree on gi1/0/5

switchxxxxxx(config)# interface gi1/0/5
switchxxxxxx(config-if)# spanning-tree disable

Cisco Business Switches 350 Series CLI Guide

1223

spanning-tree cost

Spanning Tree Commands

spanning-tree cost

Use the spanning-tree cost Interface (Ethernet, Port Channel) Configuration mode command to configure
the spanning-tree path cost for a port. Use the no form of this command to restore the default configuration.

Syntax

spanning-tree cost cost

no spanning-tree cost

Parameters

• cost—Specifies the port path cost. (Range: 1–200000000)

Default Configuration

Default path cost is determined by port speed and path cost method (long or short) as shown below.

Interface

Port-channel

Long

Short

Half the default cost based
on Port-channel interface
speed

Half the default cost based
on Port-channel interface
speed

TenGigabit Ethernet (10000 Mbps)

2000

5 Gigabit Ethernet (5000 Mbps)

2.5 Gigabit Ethernet (2500 Mbps)

Gigabit Ethernet (1000 Mbps)

Fast Ethernet (100 Mbps)

Ethernet (10 Mbps)

12,000

17,000

20,000

200,000

2,000,000

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

2

3

4

4

19

100

Example

The following example configures the spanning-tree cost on gi1/0/15 to 35000.

switchxxxxxx(config)# interface gi1/0/15
switchxxxxxx(config-if)# spanning-tree cost 35000

Cisco Business Switches 350 Series CLI Guide

1224

Spanning Tree Commands

spanning-tree port-priority

spanning-tree port-priority

Use the spanning-tree port-priority Interface (Ethernet, Port Channel) Configuration mode command to
configure the port priority. Use the no form of this command to restore the default configuration.

Syntax

spanning-tree port-priority priority

no spanning-tree port-priority

Parameters

• priority—Specifies the port priority. (Range: 0–240)

Default Configuration

The default port priority is 128.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The priority value must be a multiple of 16.

Example

The following example configures the spanning priority on gi1/0/15 to 96

switchxxxxxx(config)# interface gi1/0/15
switchxxxxxx(config-if)# spanning-tree port-priority 96

Cisco Business Switches 350 Series CLI Guide

1225

spanning-tree portfast

Spanning Tree Commands

spanning-tree portfast

Use the spanning-tree portfast Interface (Ethernet, Port Channel) Configuration mode command to enable
the PortFast mode. Use the no form of this command to disable the PortFast mode.

Syntax

spanning-tree portfast [auto]

no spanning-tree portfast

Parameters

• auto—Specifies delay before putting the interface into the PortFast mode.

Default Configuration

PortFast mode is set to auto.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

In the PortFast mode, the interface is immediately put into the forwarding state upon linkup, without waiting
for the standard forward time delay.

Use the spanning-tree portfast command to enable immediately the PortFast mode.

Use the spanning-tree portfast auto to delay the PortFast mode for 3 seconds. The interface will turn into
the PortFast mode if for this interval it does not receive a Spanning Tree protocol message.

Example

The following example enables the PortFast mode on gi1/0/15.

switchxxxxxx(config)# interface gi1/0/15
switchxxxxxx(config-if)# spanning-tree portfast

Cisco Business Switches 350 Series CLI Guide

1226

Spanning Tree Commands

spanning-tree link-type

spanning-tree link-type

Use the spanning-tree link-type Interface (Ethernet, Port Channel) Configuration mode command to override
the default link-type setting determined by the port duplex mode, and enable RSTP transitions to the Forwarding
state. Use the no form of this command to restore the default configuration.

Syntax

spanning-tree link-type {point-to-point | shared}

no spanning-tree spanning-tree link-type

Parameters

• point-to-point—Specifies that the port link type is point-to-point.

• shared—Specifies that the port link type is shared.

Default Configuration

The device derives the port link type from the duplex mode. A full-duplex port is considered a point-to-point
link and a half-duplex port is considered a shared link.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example

The following example enables shared spanning-tree on gi1/0/15.

switchxxxxxx(config)# interface gi1/0/15
switchxxxxxx(config-if)# spanning-tree link-type shared

Cisco Business Switches 350 Series CLI Guide

1227

spanning-tree pathcost method

Spanning Tree Commands

spanning-tree pathcost method

Use the spanning-tree pathcost method Global Configuration mode command to set the default path cost
method. Use the no form of this command to return to the default configuration.

Syntax

spanning-tree pathcost method {long | short}

no spanning-tree pathcost method

Parameters

• long—Specifies that the default port path costs are within the range: 1–200,000,000.

• short—Specifies that the default port path costs are within the range: 1–65,535.

Default Configuration

Long path cost method.

Command Mode

Global Configuration mode

User Guidelines

This command applies to all the spanning tree instances on the switch.

• If the short method is selected, the switch calculates the default cost as 100.

• If the long method is selected, the switch calculates the default cost as 20000.

Example

The following example sets the default path cost method to Long.

switchxxxxxx(config)# spanning-tree pathcost method long

Cisco Business Switches 350 Series CLI Guide

1228

Spanning Tree Commands

spanning-tree bpdu (Global)

spanning-tree bpdu (Global)

Use the spanning-tree bpdu Global Configuration mode command to define Bridge Protocol Data Unit
(BPDU) handling when the spanning tree is disabled globally or on a single interface. Use the no form of this
command to restore the default configuration.

Syntax

spanning-tree bpdu {filtering | flooding}

no spanning-tree bpdu

Parameters

• filtering—Specifies that BPDU packets are filtered when the spanning tree is disabled on an interface.

• flooding—Specifies that untagged BPDU packets are flooded unconditionally (without applying VLAN
rules) to all ports with the spanning tree disabled and BPDU handling mode of flooding. Tagged BPDU
packets are filtered.

Default Configuration

The default setting is flooding.

Command Mode

Global Configuration mode

User Guidelines

The filtering and flooding modes are relevant when the spanning tree is disabled globally or on a single
interface.

Example

The following example defines the BPDU packet handling mode as flooding when the spanning tree is disabled
on an interface.

switchxxxxxx(config)# spanning-tree bpdu flooding

Cisco Business Switches 350 Series CLI Guide

1229

spanning-tree bpdu (Interface)

Spanning Tree Commands

spanning-tree bpdu (Interface)

Use the spanning-tree bpdu Interface (Ethernet, Port Channel) Configuration mode command to define
BPDU handling when the spanning tree is disabled on a single interface. Use the no form of this command
to restore the default configuration.

Syntax

spanning-tree bpdu {filtering | flooding}

no spanning-tree bpdu

Parameters

• filtering—Specifies that BPDU packets are filtered when the spanning tree is disabled on an interface.

• flooding—Specifies that untagged BPDU packets are flooded unconditionally (without applying VLAN
rules) to ports with the spanning tree disabled and BPDU handling mode of flooding. Tagged BPDU
packets are filtered.

Default Configuration

The spanning-tree bpdu (Global), on page 1229 command determines the default configuration.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example

The following example defines the BPDU packet as flooding when the spanning tree is disabled on gi1/0/3.

switchxxxxxx(config)# interface gi1/0/3
switchxxxxxx(config-if)# spanning-tree bpdu flooding

Cisco Business Switches 350 Series CLI Guide

1230

Spanning Tree Commands

spanning-tree guard root

spanning-tree guard root

Use the spanning-tree guard root Interface (Ethernet, Port Channel) Configuration mode command to enable
Root Guard on all spanning-tree instances on the interface. Root guard prevents the interface from becoming
the root port of the device. Use the no form of this command to disable the root guard on the interface.

Syntax

spanning-tree guard root

no spanning-tree guard root

Default Configuration

Root guard is disabled.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Root Guard can be enabled when the device operates in any spanning tree mode.

When Root Guard is enabled, the port changes to the alternate state if the spanning-tree calculations select
the port as the root port.

Example

The following example prevents gi1/0/1 from being the root port of the device.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# spanning-tree guard root

Cisco Business Switches 350 Series CLI Guide

1231

spanning-tree bpduguard

Spanning Tree Commands

spanning-tree bpduguard

Use the spanning-tree bpduguard Interface (Ethernet, Port Channel) Configuration mode command to shut
down an interface when it receives a Spanning Tree message. Use the no form of this command to restore the
default configuration.

Syntax

spanning-tree bpduguard {enable | disable}

no spanning-tree bpduguard

Parameters

• enable—Enables BPDU Guard.

• disable—Disables BPDU Guard.

Default Configuration

BPDU Guard is disabled.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The command can be enabled when the spanning tree is enabled (useful when the port is in the PortFast mode)
or disabled.

Example

The following example shuts down gi1/0/5 when it receives a BPDU.

switchxxxxxx(config)# interface gi1/0/5
switchxxxxxx(config-if)# spanning-tree bpduguard enable

Cisco Business Switches 350 Series CLI Guide

1232

Spanning Tree Commands

clear spanning-tree counters

clear spanning-tree counters

Use the clear spanning-tree counters Privileged EXEC mode command to clear STP counters on all interfaces
or on the specified interface

Syntax

clear spanning-tree counters [interface interface-id]

Parameters

• interface-id— (O'ptional) Specifies an interface ID. The interface ID can be one of the following types:

Ethernet port or Port-channel.

Default Configuration

All interfaces.

Command Mode

Privileged EXEC mode

User Guidelines

The clear spanning-tree counters command clears sent and received STP BPDU counters from the entire
switch or from the specified interface

Example

This example shows how to clear STP counter on all interfaces.

switchxxxxxx# clear spanning-tree counters

Cisco Business Switches 350 Series CLI Guide

1233

clear spanning-tree detected-protocols

Spanning Tree Commands

clear spanning-tree detected-protocols

Use the clear spanning-tree detected-protocols Privileged EXEC mode command to restart the STP migration
process (force renegotiation with neighboring switches) on all interfaces or on the specified interface

Syntax

clear spanning-tree detected-protocols [interface interface-id]

Parameters

• interface-id—Specifies an interface ID. The interface ID can be one of the following types: Ethernet

port or Port-channel.

Default Configuration

All interfaces.

Command Mode

Privileged EXEC mode

User Guidelines

This feature can only be used when working in the RSTP, MSTP, or Rapid PVST mode.

Example

This restarts the STP migration process on all interfaces.

switchxxxxxx# clear spanning-tree detected-protocols

Cisco Business Switches 350 Series CLI Guide

1234

Spanning Tree Commands

spanning-tree mst priority

spanning-tree mst priority

Use the spanning-tree mst priority Global Configuration mode command to configure the device priority
for the specified spanning-tree instance. Use the no form of this command to restore the default configuration.

Syntax

spanning-tree mst instance-id priority priority

no spanning-tree mst instance-id priority

Parameters

• instance-id—Specifies the spanning-tree instance ID. (Range:1– 7 )

• priority—Specifies the device priority for the specified spanning-tree instance. This setting determines
the likelihood that the switch is selected as the root switch. A lower value increases the probability that
the switch is selected as the root switch. (Range: 0–61440)

Default Configuration

The default priority is 32768.

Command Mode

Global Configuration mode

User Guidelines

The priority value must be a multiple of 4096.

The switch with the lowest priority is the root of the spanning tree.

Example

The following example configures the spanning tree priority of instance 1 to 4096.

switchxxxxxx(config)# spanning-tree mst 1 priority 4096

Cisco Business Switches 350 Series CLI Guide

1235

spanning-tree mst max-hops

Spanning Tree Commands

spanning-tree mst max-hops

Use the spanning-tree mst max-hops Global Configuration mode command to configure the number of hops
in an MST region before the BDPU is discarded and the port information is aged out. Use the no form of this
command to restore the default configuration.

Syntax

spanning-tree mst max-hops hop-count

no spanning-tree mst max-hops

Parameters

• hop-count—Specifies the number of hops in an MST region before the BDPU is discarded. (Range:

1–40)

Default Configuration

The default number of hops is 20.

Command Mode

Global Configuration mode

Example

The following example configures the maximum number of hops that a packet travels in an MST region before
it is discarded to 10.

switchxxxxxx(config)# spanning-tree mst max-hops 10

Cisco Business Switches 350 Series CLI Guide

1236

Spanning Tree Commands

spanning-tree mst port-priority

spanning-tree mst port-priority

Use the spanning-tree mst port-priority Interface (Ethernet, Port Channel) Configuration mode command
to configure the priority of a port. Use the no form of this command to restore the default configuration.

Syntax

spanning-tree mst instance-id port-priority priority

no spanning-tree mst instance-id port-priority

Parameters

• instance-id—Specifies the spanning tree instance ID. (Range:1– 7 )

• priority—Specifies the port priority. (Range: 0–240 in multiples of 16)

Default Configuration

The default port priority is 128.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The priority value must be a multiple of 16.

Example

The following example configures the port priority of gi1/0/1 to 144.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# spanning-tree mst 1 port-priority 144

Cisco Business Switches 350 Series CLI Guide

1237

spanning-tree mst cost

Spanning Tree Commands

spanning-tree mst cost

Use the spanning-tree mst cost Interface (Ethernet, Port Channel) Configuration mode command to configure
the path cost for MST calculations. If a loop occurs, the spanning tree considers path cost when selecting an
interface to put in the Forwarding state. Use the no form of this command to restore the default configuration.

Syntax

spanning-tree mst instance-id cost cost

no spanning-tree mst instance-id cost

Parameters

• instance-id—Specifies the spanning-tree instance ID. (Range:1– 7 )

• cost—Specifies the port path cost. (Range: 1–200000000)

Default Configuration

Default path cost is determined by the port speed and path cost method (long or short) as shown below:

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example

The following example configures the MSTP instance 1 path cost for port gi1/0/9 to 4.

switchxxxxxx(config)# interface gi1/0/9
switchxxxxxx(config-if)# spanning-tree mst 1 cost 4

Cisco Business Switches 350 Series CLI Guide

1238

Spanning Tree Commands

spanning-tree mst configuration

spanning-tree mst configuration

Use the spanning-tree mst configuration Global Configuration mode command to enable configuring an
MST region by entering the MST mode.

Syntax

spanning-tree mst configuration

Command Mode

Global Configuration mode

User Guidelines

For two or more switches to be in the same MST region, they must contain the same VLAN mapping, the
same configuration revision number, and the same name.

Example

The following example configures an MST region.

switchxxxxxx(config)# spanning-tree mst configuration
switchxxxxxx(config-mst)# instance 1 vlan 10-20
switchxxxxxx(config-mst)# name region1
switchxxxxxx(config-mst)# revision 1

Cisco Business Switches 350 Series CLI Guide

1239

instance (MST)

instance (MST)

Spanning Tree Commands

Use instance MST Configuration mode command to map VLANs to an MST instance. Use the no form of
this command to restore the default mapping.

Syntax

instance instance-id vlan vlan-range

no instance instance-id vlan vlan-range

Parameters

• instance-id—MST instance (Range:1– 7)

• vlan-range—The specified range of VLANs is added to the existing ones. To specify a range, use a

hyphen. To specify a series, use a comma. (Range: 1–4094)

Default Configuration

All VLANs are mapped to the common and internal spanning tree (CIST) instance (instance 0).

Command Mode

MST Configuration mode

User Guidelines

All VLANs that are not explicitly mapped to an MST instance are mapped to the common and internal spanning
tree (CIST) instance (instance 0) and cannot be unmapped from the CIST.

For two or more devices to be in the same MST region, they must have the same VLAN mapping, the same
configuration revision number, and the same name.

Examples

The following example maps VLANs 10-20 to MST instance 1.

switchxxxxxx(config)# spanning-tree mst configuration
switchxxxxxx(config-mst)# instance 1 vlan 10-20

Cisco Business Switches 350 Series CLI Guide

1240

Spanning Tree Commands

name (MST)

name (MST)

Use the name MST Configuration mode command to define the MST region name. Use the no form of this
command to restore the default setting.

Syntax

name string

no name

Parameters

• string—Specifies the MST region name. (Length: 1–32 characters)

Default Configuration

The default name is the bridge MAC address.

Command Mode

MST Configuration mode

Example

The following example defines the region name as Region1.

switchxxxxxx(config)# spanning-tree mst configuration
switchxxxxxx(config-mst)# name region1

Cisco Business Switches 350 Series CLI Guide

1241

revision (MST)

revision (MST)

Spanning Tree Commands

Use the revision MST Configuration mode command to define the MST configuration revision number. Use
the no form of this command to restore the default configuration.

Syntax

revision value

no revision

Parameters

• value—Specifies the MST configuration revision number. (Range: 0–65535)

Default Configuration

The default configuration revision number is 0.

Command Mode

MST Configuration mode

Example

The following example sets the configuration revision to 1.

switchxxxxxx(config)# spanning-tree mst configuration
switchxxxxxx(config-mst) # revision 1

Cisco Business Switches 350 Series CLI Guide

1242

Spanning Tree Commands

show (MST)

show (MST)

Use the show MST Configuration mode command to display the current or pending MST region configuration.

Syntax

show {current | pending}

Parameters

• current—Displays the current MST region configuration.

• pending—Displays the pending MST region configuration.

Command Mode

MST Configuration mode

Example

The following example displays a pending MST region configuration

switchxxxxxx(config-mst)# show pending
Gathering information ..........
Current MST configuration
Name: Region1
Revision: 1
Digest: 0xB41829F9030A054FB74EF7A8587FF58D
State
Instance VLANs Mapped
-----
-------- ------------------------
Disabled
1-4094
0
switchxxxxxx(config-mst)#

Cisco Business Switches 350 Series CLI Guide

1243

exit (MST)

exit (MST)

Spanning Tree Commands

Use the exit MST Configuration mode command to exit the MST region Configuration mode and apply all
configuration changes.

Syntax

exit

Command Mode

MST Configuration mode

Example

The following example exits the MST Configuration mode and saves changes.

switchxxxxxx(config)# spanning-tree mst configuration
switchxxxxxx(config-mst)# exit
switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

1244

Spanning Tree Commands

abort (MST)

abort (MST)

Use the abort MST Configuration mode command to exit the MST Configuration mode without applying
the configuration changes.

Syntax

abort

Command Mode

MST Configuration mode

Example

The following example exits the MST Configuration mode without saving changes.

switchxxxxxx(config)# spanning-tree mst configuration
switchxxxxxx(config-mst)# abort

Cisco Business Switches 350 Series CLI Guide

1245

show spanning-tree

Spanning Tree Commands

show spanning-tree

Use the show spanning-tree Privileged EXEC mode command to display the spanning-tree configuration.

Syntax

show spanning-tree [interface-id] [{instance instance-id} | {vlan vlan-id}]

show spanning-tree [detail] [active | blockedports] [{instance instance-id} | {vlan vlan-id}]

show spanning-tree inconsistentports

show spanning-tree mst-configuration

show spanning-tree mst-configuration digest

Parameters

• interface-id—Specifies an interface ID (optional). The interface ID can be one of the following types:

Ethernet port or Port-channel.

• detail—Displays detailed information.

• active—Displays active ports only. Active ports are ports that are STP enabled and in the operational

status of up. If device mode is PVST+ or Rapid PVST+ - ports also need to be members of the displayed
VLAN.

• blockedports—Displays blocked ports only.

• instance-id—MST instance (Range:1– 7). The parameter could be defined only when mode MSTP is

enabled.

• vlan vlan-id—Specifies the VLAN ID. (Range: 1–4094). The parameter could be defined only when

mode PVST or RPVST is enabled.

• inconsistentports - Displays the ports that are in an inconsistent STP state. Command is relevant only

when in PVST+ or Rapid PVST mode.

• mst-configuration—Displays the MST configuration information.

• mst-configuration digest—Displays the MST configuration digest information.

Default Configuration

If no interface is specified, the default is all interfaces.

Command Mode

Privileged EXEC mode

User Guidelines

This command only works when MST is enabled.

Cisco Business Switches 350 Series CLI Guide

1246

Spanning Tree Commands

show spanning-tree

Example

The following examples display spanning-tree information in various configurations:

• Display examples for a device that is in STP or RSTP mode -

switchxxxxxx# show spanning-tree
Spanning tree enabled mode RSTP
Default port cost method: long
Loopback guard: Disabled

Root ID

Priority
Address
Cost
Port

32768
00:01:42:97:e0:00
20000
gi1/0/1

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Bridge ID

Priority
Address

36864
00:02:4b:29:7a:00

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Interfaces

Name
------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4
gi1/0/5

State
------
Enabled
Enabled
Disabled
Enabled
Enabled

Prio. No
------
128.1
128.2
128.3
128.4
128.5

Cost
-----
20000
20000
20000
20000
20000

Sts
---
FRW
FRW
-
BLK
DIS

Role
----
Root
Desg
-
Altn
-

PortFast
-------

No
No
-
No
-

Type
----------
P2p (RSTP)
Shared (STP)
-
Shared (STP)
-

switchxxxxxx# show spanning-tree
Spanning tree disabled (BPDU filtering) mode RSTP
Default port cost method: long
Loopback guard: Disabled
Interfaces

Name
--------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4
gi1/0/5

State
--------
Enabled
Enabled
Disabled
Enabled
Enabled

Prio.Nbr
---------
128.1
128.2
128.3
128.4
128.5

Cost
-----
20000
20000
20000
20000
20000

Sts
---
FRW
FRW
-
FRW
DIS

Role
----
Desg
Desg
-
Desg
-

PortFast
---------
No
No
-
No
-

Type
----------
P2p (RSTP)
Shared (STP)
-
Shared (STP)
-

switchxxxxxx# show spanning-tree
Spanning tree disabled (BPDU filtering) mode RSTP
Default port cost method: long
Loopback guard: Disabled

Cisco Business Switches 350 Series CLI Guide

1247

show spanning-tree

Spanning Tree Commands

Root ID

Priority
Address
Path Cost
Root Port
Hello Time

N/A
N/A
N/A
N/A
N/A

Max Age N/A

Forward Delay N/A

Bridge ID

Priority
Address

36864
00:02:4b:29:7a:00

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Interfaces

Name
---------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4
gi1/0/5

State
--------
Enabled
Enabled
Disabled
Enabled
Enabled

Prio.Nb
-------
128.1
128.2
128.3
128.4
128.5

Cost
-----
20000
20000
20000
20000
20000

Sts
---
-
-
-
-
-

Role
----
-
-
-
-
-

PortFast
---------
-
-
-
-
-

Type
----------
-
-
-
-
-

switchxxxxxx# show spanning-tree active
Spanning tree enabled mode RSTP
Default port cost method: long
Loopback guard: Disabled

Root ID

Priority
Address
Path Cost
Root Port

32768
00:01:42:97:e0:00
20000
gi1/0/1

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Bridge ID

Priority
Address

36864
00:02:4b:29:7a:00

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Interfaces

Name
---------
gi1/0/1
gi1/0/2
gi1/0/4

State
--------
Enabled
Enabled
Enabled

Prio.Nbr
------
128.1
128.2
128.4

Cost
-----
20000
20000
20000

Sts
---
FRW
FRW
BLK

Role
----
Root
Desg
Altn

PortFast
---------
No
No
No

Type
----------
P2P (RSTP)
Shared (STP)
Shared (STP)

switchxxxxxx# show spanning-tree blockedports
Spanning tree enabled mode RSTP
Default port cost method: long
Loopback guard: Disabled

Cisco Business Switches 350 Series CLI Guide

1248

Spanning Tree Commands

show spanning-tree

Root ID

Priority
Address
Path Cost
Root Port

32768
00:01:42:97:e0:00
20000
gi1/0/1

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Bridge ID

Priority

36864

Address

00:02:4b:29:7a:00

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Interfaces

Name
---------
gi1/0/4

State
-------
Enabled

Prio.Nbr
------
128.4

Cost
-----
19

Sts
---
BLK

Role
----
Altn

PortFast
--------
No

Type
----------
Shared (STP)

switchxxxxxx# show spanning-tree detail
Spanning tree enabled mode RSTP
Default port cost method: long
Loopback guard: Disabled

Root ID

Priority
Address
Path Cost
Root Port

32768
00:01:42:97:e0:00
20000
gi1/0/1

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Bridge ID

Priority
Address

36864
00:02:4b:29:7a:00

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Number of topology changes 2 last change occurred 2d18h ago

Times:

hold 1, topology change 35, notification 2
hello 2, max age 20, forward delay 15

Port 1 (gi1/0/1) enabled
State: Forwarding
Port id: 128.1
Type: P2p (configured: auto) RSTP
Designated bridge Priority: 32768
Designated port id: 128.25
Guard root: Disabled

Role: Root
Port cost: 20000
Port Fast: No (configured:no)
Address: 00:01:42:97:e0:00
Designated path cost: 0
BPDU guard: Disabled

Number of transitions to forwarding state: 1
BPDU: sent 2, received 120638

Cisco Business Switches 350 Series CLI Guide

1249

show spanning-tree

Spanning Tree Commands

Port 2 (gi1/0/2) enabled
State: Forwarding
Port id: 128.2
Type: Shared (configured: auto) STP
Designated bridge Priority: 32768
Designated port id: 128.2
Guard root: Disabled

Role: Designated
Port cost: 20000
Port Fast: No (configured:no)
Address: 00:02:4b:29:7a:00
Designated path cost: 20000
BPDU guard: Disabled

Number of transitions to forwarding state: 1
BPDU: sent 2, received 170638

Port 3 (gi1/0/3) disabled
State: N/A
Port id: 128.3
Type: N/A (configured: auto)
Designated bridge Priority: N/A
Designated port id: N/A
Guard root: Disabled

Role: N/A
Port cost: 20000
Port Fast: N/A (configured:no)
Address: N/A
Designated path cost: N/A
BPDU guard: Disabled

Number of transitions to forwarding state: N/A
BPDU: sent N/A, received N/A

Port 4 (gi1/0/4) enabled
State: Blocking
Port id: 128.4
Type: Shared (configured:auto) STP
Designated bridge Priority: 28672
Designated port id:
128.25
Guard root: Disabled

Role: Alternate
Port cost: 20000
Port Fast: No (configured:no)
Address: 00:30:94:41:62:c8
Designated path cost: 20000
BPDU guard: Disabled

Number of transitions to forwarding state: 1
BPDU: sent 2, received 120638

Port 5 (gi1/0/5) enabled
State: Disabled
Port id: 128.5
Type: N/A (configured: auto)
Designated bridge Priority: N/A
Designated port id: N/A
Guard root: Disabled

Role: N/A
Port cost: 20000
Port Fast: N/A (configured:no)
Address: N/A
Designated path cost: N/A
BPDU guard: Disabled

Number of transitions to forwarding state: N/A
BPDU: sent N/A, received N/A
switchxxxxxx# show spanning-tree ethernet gi1/0/1

Port 1 (gi1/0/1) enabled
State: Forwarding
Port id: 128.1
Type: P2p (configured: auto) RSTP
Designated bridge Priority: 32768
Designated port id: 128.25
Guard root: Disabled

Role: Root
Port cost: 20000
Port Fast: No (configured:no)
Address: 00:01:42:97:e0:00
Designated path cost: 0
BPDU guard: Disabled

Number of transitions to forwarding state: 1
BPDU: sent 2, received 120638

• Display examples for a device that is in PVST or Rapid PVST mode-

switchxxxxxx# show spanning-tree
Spanning tree enabled mode Rapid-PVST
Default port cost method: long
Loopback guard: Disabled
VLAN 1

Cisco Business Switches 350 Series CLI Guide

1250

Spanning Tree Commands

show spanning-tree

Root ID

Priority
Address
Path Cost
Root Port

4096
00:01:42:97:e0:00
20000
gi1/0/1

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Bridge ID

Priority
Address

36864
00:02:4b:29:7a:00

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Interfaces

Name
--------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4
gi1/0/5
gi1/0/6

State
--------
Enabled
Enabled
Disabled
Enabled
Enabled
Enabled

Prio.Nbr
---------
128.1
128.2
128.3
128.4
128.5
128.6

Cost
-----
20000
20000
20000
20000
20000
20000

Sts
---
Frw
DSCR
-
Dsbl
DSCR
Frw

Role
----
Root
Bkup
-
Dsbl
Altn
Desg

PortFast
--------No
No
No
No
No
Yes

Type
----------
P2P (RPVST)
P2P (RVPST)
-
-
P2P (RPVST)
Shared(PVST)

* Port Type or PVID Inconsistency
VLAN 20

Root ID

Priority
Address

4096
00:02:4b:29:7a:00

This switch is the root

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Interfaces

Name
--------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4
gi1/0/5
gi1/0/6

State
--------
Enabled
Enabled
Disabled
Enabled
Enabled
Enabled

Prio.Nbr
---------
128.1
128.2
128.3
128.4
128.5
128.6

Cost
-----
20000
20000
20000
20000
20000
20000

Sts
---
FRW
Dscr*
Dsbl
Dsbl
Dsbl
Frw

Role
----
Desg
Desg
Dsbl
Dsbl
Dsbl
Desg

PortFast
--------No
No
No
No
no
Yes

Type
----------
P2p (RPVST)
P2p (RPVST)
-
-
P2P (RPVST)
Shared(PVST)

* Port Type or PVID Inconsistency
switchxxxxxx# show spanning-tree active
Spanning tree enabled mode Rapid-PVST
Default port cost method: long
Loopback guard: Disabled
VLAN 1

Root ID

Priority
Address
Path Cost
Root Port

4096
00:01:42:97:e0:00
20000
gi1/0/1

Cisco Business Switches 350 Series CLI Guide

1251

show spanning-tree

Spanning Tree Commands

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Bridge ID

Priority
Address

36864
00:02:4b:29:7a:00

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Interfaces

Name
--------
gi1/0/1
gi1/0/2
gi1/0/5
gi1/0/6

State
--------
Enabled
Enabled
Enabled
Enabled

Prio.Nbr
---------
128.1
128.2
128.5
128.6

Cost
-----
20000
20000
20000
20000

Sts
---
Frw
DSCR
DSCR
Frw

Role
----
Root
Bkup
Altn
Desg

PortFast
--------No
No
No
Yes

Type
----------
P2p (RPVST)
P2p (RPVST)
P2p (RPVST)
Shared(PVST)

* Port Type or PVID Inconsistency
VLAN 20

Root ID

Priority
Address

4096
00:02:4b:29:7a:00

This switch is the root

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Interfaces

Name
--------
gi1/0/1
gi1/0/2
gi1/0/6

State
--------
Enabled
Enabled
Enabled

Prio.Nbr
---------
128.1
128.2
128.6

Cost
-----
20000
20000
20000

Sts
---
FRW
Dscr*
Frw

Role
----
Desg
Desg
Desg

PortFast
--------No
No
Yes

Type
----------
P2p (RPVST)
P2p (RPVST)
Shared(PVST)

* Port Type or PVID Inconsistency
switchxxxxxx# show spanning-tree VLAN 20
Spanning tree enabled mode PVST
Default port cost method: long
Loopback guard: Disabled
VLAN 20

Root ID

Priority
Address

4096
00:02:4b:29:7a:00

This switch is the root

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Interfaces

Cisco Business Switches 350 Series CLI Guide

1252

Spanning Tree Commands

show spanning-tree

Name
--------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4
gi1/0/5
gi1/0/6

State
--------
Enabled
Enabled
Disabled
Enabled
Enabled
Enabled

Prio.Nbr
---------
128.1
128.2
128.3
128.4
128.5
128.6

Cost
-----
20000
20000
20000
20000
20000
20000

Sts
---
FRW
Dscr*
Dsbl
Dsbl
Dsbl
Frw

Role
----
Desg
Desg
Dsbl
Dsbl
Dsbl
Desg

PortFast
--------No
No
No
No
no
Yes

Type
----------
P2p (RPVST)
P2p (RPVST)
-
-
P2P (RPVST)
Shared(PVST)

* Port Type or PVID Inconsistency
switchxxxxxx# show spanning-tree gi1/0/2

VLAN
--------
1
2
3
6

State
--------
Enabled
Enabled
Enabled
Enabled

Prio.Nbr
---------
128.1
128.2
128.3
128.6

Cost
-----
2000
2000
2000
2000

Sts
---
FRW
Dscr*
Dscr
Frw

Role
----
Root
Desg
Altr
Desg

PortFast
--------No
No
No
Yes

Type
----------
P2p (RPVST)
P2p (RPVST)
P2p (RPVST)
Shared(PVST)

* Port Type or PVID Inconsistency
switchxxxxxx# show spanning-tree gi1/0/2 vlan 3

(gi1/0/2) enabled
State: Discarding
Port id: 128.3
Type: P2p (configured: auto) RPVST
Designated bridge Priority: 32768
Designated port id: 128.22
Guard root: Disabled

Role: Alternate
Port cost: 2000
Port Fast: No (configured:Auto)
Address: 00:01:42:97:e0:00
Designated path cost: 0
BPDU guard: Disabled

switchxxxxxx# show spanning-tree inconsistentports

name
----

interface
---------

inconsistency
-------------

VLAN 10

gi1/0/2

Port Type Inconsistency

VLAN 10

gi1/0/7

PVID Inconsistency

VLAN 20

gi1/0/7

PVID Inconsistency

VLAN 20

gi1/0/8

Port Type Inconsistency

Number of inconsistent ports (segments) in the system : 4

• Display examples for a device that is in MSTP mode -

switchxxxxxx# show spanning-tree mst-configuration
Name: Region1
Revision: 1

Cisco Business Switches 350 Series CLI Guide

1253

show spanning-tree

Spanning Tree Commands

Instance
--------
1
2

Vlans mapped
------------
1-9, 21-4094
10-20

State
---------
Enabled
Enabled

switchxxxxxx# show spanning-tree mst-configuration digest
Name: Region1
Revision: 1
Format selector: 0
Digest: 0xB41829F9030A054FB74EF7A8587FF58D
Number of instances configured: 3
switchxxxxxx# show spanning-tree
Spanning tree enabled mode MSTP
Default port cost method: long
Loopback guard: Disabled
###### MST 0 Vlans Mapped: 1-9

CST Root ID

Priority
Address
Path Cost
Root Port

32768
00:01:42:97:e0:00
20000

gi1/0/1

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

IST Master ID

Priority
Address

32768
00:02:4b:29:7a:00

This switch is the IST master.

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Max hops 20

Interfaces

Name
----
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4

State
-------
Enabled
Enabled
Enabled
Enabled

Prio.Nbr
--------
128.1
128.2
128.3
128.4

Cost
-----
20000
20000
20000
20000

Sts
---
FRW
FRW
FRW
FRW

Role
----
Root
Desg
Desg
Desg

PortFast
--------
No
No
No
No

Type
-------------
P2p Bound
(RSTP)
Shared Bound
(STP)
P2p
P2p

###### MST 1 Vlans Mapped: 10-20

Root ID

Priority
Address
Path Cost
Root Port
Rem hops

24576
00:02:4b:29:89:76
20000

gi1/0/4

19

Bridge ID

Priority
Address

32768
00:02:4b:29:7a:00

Cisco Business Switches 350 Series CLI Guide

1254

Spanning Tree Commands

Interfaces

show spanning-tree

Name
----
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4

State
-------
Enabled
Enabled
Enabled
Enabled

Prio.Nbr
--------
128.1
128.2
128.3
128.4

Cost
-----
20000
20000
20000
20000

Sts
---
FRW
FRW
BLK
FRW

Role
----
Boun
Boun
Altn
Root

PortFast
--------
No
No
No
No

Type
-------------
P2p Bound
(RSTP)
Shared Bound
(STP)
P2p
P2p

switchxxxxxx# show spanning-tree detail
Spanning tree enabled mode MSTP
Default port cost method: long
Loopback guard: Disabled
###### MST 0 Vlans Mapped: 1-9

CST Root ID

Priority
Address
Path Cost
Root Port

32768
00:01:42:97:e0:00
20000

gi1/0/1

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

IST Master ID

Priority
Address

32768
00:02:4b:29:7a:00

This switch is the IST master.

Hello Time 2 sec

Max Age 20 sec

Forward Delay 15 sec

Max hops 20
Number of topology changes 2 last change occurred 2d18h
ago
Times: hold 1, topology change 35, notification 2
hello 2, max age 20, forward delay 15

Port 1 (gi1/0/1) enabled
State: Forwarding
Port id: 128.1
Type: P2p (configured: auto) Boundary RSTP
Designated bridge Priority: 32768
Designated port id: 128.25
Number of transitions to forwarding state: 1
BPDU: sent 2, received 120638

Port 2 (gi1/0/2) enabled
State: Forwarding
Port id: 128.2
Type: Shared (configured: auto) Boundary STP
Designated bridge Priority: 32768
Designated port id: 128.2
Number of transitions to forwarding state: 1
BPDU: sent 2, received 170638

Role: Root
Port cost: 20000
Port Fast: No (configured:no)
Address: 00:01:42:97:e0:00
Designated path cost: 0

Role: Designated
Port cost: 20000
Port Fast: No (configured:no)
Address: 00:02:4b:29:7a:00
Designated path cost: 20000

Cisco Business Switches 350 Series CLI Guide

1255

show spanning-tree

Spanning Tree Commands

Port 3 (gi1/0/3) enabled
State: Forwarding
Port id: 128.3
Type: Shared (configured: auto) Internal
Designated bridge Priority: 32768
Designated port id: 128.3
Number of transitions to forwarding state: 1
BPDU: sent 2, received 170638

Port 4 (gi1/0/4) enabled
State: Forwarding
Port id: 128.4
Type: Shared (configured: auto) Internal
Designated bridge Priority: 32768
Designated port id: 128.2
Number of transitions to forwarding state: 1
BPDU: sent 2, received 170638

###### MST 1 Vlans Mapped: 10-20

Role: Designated
Port cost: 20000
Port Fast: No (configured:no)
Address: 00:02:4b:29:7a:00
Designated path cost: 20000

Role: Designated
Port cost: 20000
Port Fast: No (configured:no)
Address: 00:02:4b:29:7a:00
Designated path cost: 20000

Root ID

Priority
Address
Path Cost
Root Port

24576
00:02:4b:29:89:76
20000

gi1/0/4

Rem hops 19

Bridge ID

Priority
Address

32768
00:02:4b:29:7a:00

Number of topology changes 2 last change occurred 1d9h
ago

Times: hold 1, topology change 2, notification 2
hello 2, max age 20, forward delay 15

Port 1 (gi1/0/1) enabled
State: Forwarding
Port id: 128.1
Type: P2p (configured: auto) Boundary RSTP
Designated bridge Priority: 32768
Designated port id: 128.1
Number of transitions to forwarding state: 1
BPDU: sent 2, received 120638

Port 2 (gi1/0/2) enabled
State: Forwarding
Port id: 128.2
Type: Shared (configured: auto) Boundary STP
Designated bridge Priority: 32768
Designated port id: 128.2
Number of transitions to forwarding state: 1
BPDU: sent 2, received 170638

Role: Boundary
Port cost: 20000
Port Fast: No (configured:no)
Address: 00:02:4b:29:7a:00
Designated path cost: 20000

Role: Designated
Port cost: 20000
Port Fast: No (configured:no)
Address: 00:02:4b:29:7a:00
Designated path cost: 20000

Cisco Business Switches 350 Series CLI Guide

1256

Spanning Tree Commands

show spanning-tree

Port 3 (gi1/0/3) disabled
State: Blocking
Port id: 128.3
Type: Shared (configured: auto) Internal
Designated bridge Priority: 32768
Designated port id: 128.78
Number of transitions to forwarding state: 1
BPDU: sent 2, received 170638

Port 4 (gi1/0/4) enabled
State: Forwarding
Port id: 128.4
Type: Shared (configured: auto) Internal
Designated bridge Priority: 32768
Designated port id: 128.2
Number of transitions to forwarding state: 1
BPDU: sent 2, received 170638

Role: Alternate
Port cost: 20000
Port Fast: No (configured:no)
Address: 00:02:4b:29:1a:19
Designated path cost: 20000

Role: Designated
Port cost: 20000
Port Fast: No (configured:no)
Address: 00:02:4b:29:7a:00
Designated path cost: 20000

Cisco Business Switches 350 Series CLI Guide

1257

show spanning-tree bpdu

Spanning Tree Commands

show spanning-tree bpdu

Use the show spanning-tree bpdu User EXEC mode command to display the BPDU handling when
spanning-tree is disabled.

Syntax

show spanning-tree bpdu [interface-id | detailed]

Parameters

• interface-id—Specifies an interface ID. The interface ID can be one of the following types: Ethernet

port or Port-channel.

• detailed—Displays information for non-present ports in addition to present ports.

Default Configuration

Show information for all interfaces. If detailed is not used, only present ports are displayed.

Command Mode

User EXEC mode

Example

The following examples display spanning-tree BPDU information:

switchxxxxxx# show spanning-tree bpdu

The following is the output if the global BPDU handling command is
not supported.

Interface
---------
gi1/0/1
gi1/0/2
gi1/0/3

Admin Mode
----------
Filtering
Filtering
Filtering

Oper Mode
---------
Filtering
Filtering
Guard

The following is the output if both the global BPDU handling command

and the per-interface BPDU handling command are supported.

Global: Flooding

Interface
---------
gi1/0/1
gi1/0/2
gi1/0/3

Admin Mode
----------
Global
Global
Flooding

Oper Mode
---------
Flooding
STP
STP

Cisco Business Switches 350 Series CLI Guide

1258

Spanning Tree Commands

spanning-tree loopback-guard

spanning-tree loopback-guard

Use the spanning-tree loopback-guard global configuration command to shut down an interface if it receives
a loopback BPDU. Use the no form of this command to return the default setting.

Syntax

spanning-tree loopback-guard

no spanning-tree loopback-guard

Command Mode

Global

User Guidelines

This enables shutting down all interfaces if a loopback BPDU is received on it.

Example

switchxxxxxx(config)# spanning-tree loopback-guard

Cisco Business Switches 350 Series CLI Guide

1259

spanning-tree vlan forward-time

Spanning Tree Commands

spanning-tree vlan forward-time

To configure the spanning-tree bridge forward time for a VLAN, use the spanning-tree vlan forward-time
command in Global Configuration mode. To return to the default settings, use the no form of this command.

Syntax

spanning-tree vlan vlan-range forward-time seconds

no spanning-tree vlan vlan-range forward-time

Parameters

• vlan-range—Specifies a range of VLANs to configure. To specify a range, use a hyphen. To specify a

series, use a comma. (Range: 2–4094)

• seconds—Specifies the spanning-tree forward time in seconds. (Range: 4–30)

Default Configuration

The default forward time is 15 seconds.

Command Mode

Global Configuration mode

User Guidelines

The spanning-tree bridge forward time is the amount of time a port remains in the listening and learning states
before entering the forwarding state.

When configuring the forwarding time, the following relationship should be maintained:

• 2*(Forward-Time - 1) >= Max-Age

Use this command to configure the forward time for the specified VLAN instance. Setting will take effect if
Spanning-tree mode is set to PVST or Rapid PVST .

Example

The following example configures the spanning tree bridge forwarding time to 25 seconds for VLAN 100:

switchxxxxxx(config)# spanning-tree vlan 100 forward-time 25

Cisco Business Switches 350 Series CLI Guide

1260

Spanning Tree Commands

spanning-tree vlan hello-time

spanning-tree vlan hello-time

To configure the spanning-tree bridge hello time for a VLAN, use the spanning-tree vlan hello-time command
in Global Configuration mode. To return to the default settings, use the no form of this command.

Syntax

spanning-tree vlan vlan-range hello-time seconds

no spanning-tree vlan vlan-range hello-time

Parameters

• vlan-range—Specifies a range of VLANs to configure. To specify a range, use a hyphen. To specify a

series, use a comma. (Range: 2–4094)

• seconds—Specifies the spanning-tree Hello time in seconds. (Range: 1–10)

Default Configuration

The default hello time is 2 seconds.

Command Mode

Global Configuration mode

User Guidelines

The spanning-tree bridge hello time is the time between two sequential sent Hello messages.

When configuring the Hello time, the following relationship should be maintained:

Max-Age >= 2*(Hello-Time + 1)

Use this command to configure the hello time for the specified VLAN instance. Setting will take effect if
Spanning-tree mode is set to PVST or Rapid PVST .

Example

The following example configures the spanning-tree bridge hello time to 5 seconds for VLANs 100-101:

switchxxxxxx(config)# spanning-tree vlan 100-101 hello-time 5

Cisco Business Switches 350 Series CLI Guide

1261

spanning-tree vlan max-age

Spanning Tree Commands

spanning-tree vlan max-age

To configure the spanning-tree bridge maximum age time for a VLAN, use the spanning-tree vlan max-age
command in Global Configuration mode. To return to the default settings, use the no form of this command.

Syntax

spanning-tree vlan vlan-range max-age seconds

no spanning-tree vlan vlan-range max-age

Parameters

• vlan-range—Specifies a range of VLANs to configure. To specify a range, use a hyphen. To specify a

series, use a comma. (Range: 2–4094)

• seconds—Specifies the spanning-tree bridge maximum age in seconds. (Range: 6–40)

Default Configuration

The default max-age value is 15 seconds.

Command Mode

Global Configuration mode

User Guidelines

When configuring the maximum age, the following relationships should be maintained:

2*(Forward-Time - 1) >= Max-Age

Max-Age >= 2*(Hello-Time + 1)

Use this command to configure the maximum age for the specified VLAN instance. Setting will take effect
if Spanning-tree mode is set to PVST or Rapid PVST .

Example

The following example configures the spanning-tree bridge maximum age to 10 seconds for VLAN 100:

switchxxxxxx(config)# spanning-tree vlan 100 max-age 10

Cisco Business Switches 350 Series CLI Guide

1262

Spanning Tree Commands

spanning-tree vlan priority

spanning-tree vlan priority

To configure the spanning-tree bridge priority for a VLAN, use the spanning-tree vlan priority command
in Global Configuration mode. To return to the default settings, use the no form of this command.

Syntax

spanning-tree vlan vlan-range priority priority

no spanning-tree vlan vlan-range priority

Parameters

• vlan-range—Specifies a range of VLANs to configure. To specify a range, use a hyphen. To specify a

series, use a comma. (Range: 2–4094)

• priority—Specifies the bridge priority. (Range: 0–61440)

Default Configuration

The default priority equal to 32768.

Command Mode

Global Configuration mode

User Guidelines

The priority value must be a multiple of 4096.

The switch with the lowest priority is the root of the spanning tree. When more than one switch has the lowest
priority, the switch with the lowest MAC address is selected as the root.

Use this command to configure the bridge priority for the specified VLAN instance. Setting will take effect
if Spanning-tree mode is set to PVST or Rapid PVST .

Example

The following example configures the spanning-tree priority to 12288 for VLAN 100-105:

switchxxxxxx(config)# spanning-tree vlan 100-105 priority 12288

Cisco Business Switches 350 Series CLI Guide

1263

spanning-tree vlan cost

Spanning Tree Commands

spanning-tree vlan cost

To configure the spanning-tree bridge path cost for a port and a VLAN, use the spanning-tree vlan cost
command in Interface (Ethernet, Port Channel) Configuration mode. To return to the default settings, use the
no form of this command.

Syntax

spanning-tree vlan vlan-range cost cost

no spanning-tree vlan vlan-range cost

Parameters

• vlan-range—Specifies a range of VLANs to configure. To specify a range, use a hyphen. To specify a

series, use a comma. (Range: 2–4094)

• cost—Specifies the port path cost. (Range: 1–200000000)

Default Configuration

Default path cost is determined by port speed and path cost method (long or short).

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use this command to configure the port cost for the specified VLAN instance. Setting will take effect if
Spanning-tree mode is set to PVST or Rapid PVST .

The VLAN instances that can be specified are VLAN ID 2-4094.

Example

The following example configures the spanning-tree cost to 35000 for port gi1/0/15 and VLAN 100:

switchxxxxxx(config)# interface gi1/0/15
switchxxxxxx(config-if)# spanning-tree vlan 100 cost 35000

Cisco Business Switches 350 Series CLI Guide

1264

Spanning Tree Commands

spanning-tree vlan port-priority

spanning-tree vlan port-priority

To configure the spanning-tree port priority for a VLAN, use the spanning-tree vlan port-priority command
in Interface (Ethernet, Port Channel) Configuration mode. To return to the default settings, use the no form
of this command.

Syntax

spanning-tree vlan vlan-range port-priority priority

no spanning-tree vlan vlan-range port-priority

Parameters

• vlan-range—Specifies a range of VLANs to configure. To specify a range, use a hyphen. To specify a

series, use a comma. (Range: 2–4094)

• priority—Specifies the port priority. (Range: 0–240)

Default Configuration

The default port priority is 128.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The priority value must be a multiple of 16.

Use this command to configure the port priority for the specified VLAN instance. Setting will take effect if
Spanning-tree mode is set to PVST or Rapid PVST .

Example

The following example configures the spanning priority on gi1/0/15 to 16 for VLANs 100-102:

switchxxxxxx(config)# interface gi1/0/15-16
switchxxxxxx(config-if)# spanning-tree vlan 100-102 port-priority 96

Cisco Business Switches 350 Series CLI Guide

1265

spanning-tree vlan port-priority

Spanning Tree Commands

Cisco Business Switches 350 Series CLI Guide

1266

SSH Client Commands

This chapter contains the following sections:

• ip ssh-client authentication, on page 1268
• ip ssh-client change server password, on page 1269
• ip ssh-client key, on page 1270
• ip ssh-client password, on page 1273
• ip ssh-client server authentication, on page 1274
• ip ssh-client server fingerprint, on page 1275
• ip ssh-client source-interface, on page 1276
• ipv6 ssh-client source-interface, on page 1277
• ip ssh-client username, on page 1278
• show ip ssh-client, on page 1279
• show ip ssh-client server, on page 1281

Cisco Business Switches 350 Series CLI Guide

1267

ip ssh-client authentication

SSH Client Commands

ip ssh-client authentication

To define the SSH client authentication method used by the local SSH clients to be authenticated by remote
SSH servers, use the ip ssh-client authentication command in Global Configuration mode.

To return to default, use the no format of the command.

Syntax

ip ssh-client authentication {password | public-key {rsa | dsa}}

no ip ssh-client authentication

Parameters

• password—Username and password are used for authentication.

• public-key rsa—Username and RSA public key are used for authentication.

• public-key dsa—Username and DSA public key are used for authentication.

Default Configuration

Username and password are used for authentication by the local SSH clients.

Command Mode

Global Configuration mode

User Guidelines

A user can use the ip ssh-client key command to generate/configure RSA/DSA keys if SSH authentication
is by public key. Otherwise, the default keys generated by the switch are used.

Example

The following example specifies that, username and public key are used for authentication:

switchxxxxxx(config)# ip ssh-client authentication public-key rsa

Cisco Business Switches 350 Series CLI Guide

1268

SSH Client Commands

ip ssh-client change server password

ip ssh-client change server password

To change a password of an SSH client on a remote SSH server, use the ip ssh-client change server password
command in Global Configuration mode.

Syntax

ip ssh-client change server password server {host | ip-address | ipv6-address} username username
old-password old-password new-password new-password

Parameters

• host—DNS name of a remote SSH server.

• ip-address—Specifies the IP address of a remote SSH server. The IP address can be an IPv4, IPv6 or

IPv6z address. See IPv6z Address Conventions.

• username —Username of the local SSH clients (1 - 70 characters).

• old-password —Old password of the local SSH client (1 - 70 characters).

• new-password—New password for the local SSH client (1 - 70 characters). The password cannot include

the characters "@" and ":".

Command Mode

Global Configuration mode

User Guidelines

Use the command to change a password on a remote SSH server. Use the ip ssh-client password command
to change the SSH client password of the switch’s SSH client so that it matches the new password set on the
remote SSH server.

Example

The following example changes a password of the local SSH clients:

switchxxxxxx(config)# ip ssh-client change server password server 10.7.50.155 username john

old-password &&&@@@aaff new-password &&&@@@aaee

Cisco Business Switches 350 Series CLI Guide

1269

ip ssh-client key

SSH Client Commands

ip ssh-client key

To create a key pair for SSH client authentication by public key (either by generating a key or by importing
a key), use the ip ssh-client key command in Global Configuration mode. To remove a key, use the no form
of the command.

Syntax

ip ssh-client key {dsa | rsa} {generate | key-pair privkey pubkey}

encrypted ip ssh-client key {dsa | rsa} key-pair encrypted-privkey pubkey

no ip ssh-client key [dsa | rsa]

Parameters

• dsa—DSA key type.

• rsa—RSA key type.

• key-pair—Key that is imported to the device.

privkey—Plaintext private key.

encrypted-privkey—private key is in encrypted format.

pubkey—The plaintext pubic key.

Default Configuration

The application creates a key automatically; this is the default key.

Command Mode

Global Configuration mode

User Guidelines

When using the keyword generate, a private key and a public key of the given type (RSA/DSA) are generated
for the SSH client. Downloading a configuration file with a Key Generating command is not allowed, and
such download will fail.

When using the keyword key-pair, the user can import a key-pair created by another device. In this case, the
keys must follow the format specified by RFC 4716.

If the specified key already exists, a warning will be issued before replacing the existing key with a new key.

Use the no ip ssh-client key command to remove a key pair. Use this command without specifying a key-type
to remove both key pairs.

Cisco Business Switches 350 Series CLI Guide

1270

SSH Client Commands

ip ssh-client key

Table3:Keys,DefaultsandUsers

From/To

Show

Show (detailed)

Startup Config

Only user-defined

N/A

Copy/Upload of
Running Config

Copy/Upload of
Startup Config

Download text-based CLI
(TFTP/Backup)

All keys (default and
user)

N/A

All keys (default and user)

Running Config

Keys are not
displayed.

All keys (default and
user)

N/A

Only user defined.

Same as user configuration

Text-based CLI
(TFTP/Backup)

As it was copied.

N/A

All keys (default and
user)

Only user defined.

As a text file.

If no keys are included in text-based configuration file, the device generates it’s own keys during initialization.
If the Running Configuration contains default keys (not user-defined), the same default keys remain.

Example 1 - In the following example, a key pair of the RSA type is created:

switchxxxxxx(config)# ip ssh-client key rsa generate
The SSH service is generating a private RSA key.
This may take a few minutes, depending on the key size.

Example 2 - In the following example, both public and private keys of the RSA type are imported
(private key as plaintext):

switchxxxxxx(config)# ip ssh-client key rsa key-pair
Please paste the input now, add a period (.) on a separate line after the input
-----BEGIN RSA PRIVATE KEY-----
MIICXAIBAAKBgQDH6CU/2KYRl8rYrK5+TIvwS4zvhBmiC4I31m9cR/1iRTFViMRuJ++TEr
p9ssqWyI1Ti9d0jzmG0N3jHzp2je5/DUTHZXvYaUzchBDnsPTJo8dyiBl4YBqYHQgCjUhk
tXqvloy+1uxRJTAaLVXCBAmuIU/kMLoEox8/zwjB/jsF9wIBIwKBgC2xZ5mQmvy0+yo2GU
FwlQO5f0yweuM11J8McTmqDgfVTRrdbroXwbs3exVqsfaUPY9wa8Le6JPX+DPp4XovEfC/
iglZBSC8SeDmI2U7D6HrkAyD9HHf/r32jukB+5Z7BlHPz2Xczs2clOOwrnToy+YTzjLUxy
WS7V/IxbBllipLAkEA/QluVSCfFmdMlZxaEfJVzqPO1cF8guovsWLteBf/gqHuvbHuNy0t
OWEpObKZs1m/mtCWppkgcqgrB0oJaYbUFQJBAMo/cCrkyhsiV/+ZsryeD26NbPEKiak16V
Tz2ayDstidGuuvcvm2YF7DjM6n6NYz3+/ZLyc5n82okbld1NhDONsCQQCmSAas+C4HaHQn
zSU+/lWlDI88As4qJN2DMmGJbtsbVHhQxWIHAG4tBVWa8bV12+RPyuan/jnk8irniGyVza
FPAkEAiq8oV+1XYxA8V39V/a42d7FvRjMckUmKDl4Rmt32+u9i6sFzaWcdgs87+2vS3AZQ
afQDE5U6YSMiGLVewC4YWwJBAOFZmhO+dIlxT8Irzf2cUZGggopfnX6Y+L+Yl09MuZHbwH
tXaBGj6ayMYvXnloONecnApBjGEm37YVwKjO2DV2w=
-----END RSA PRIVATE KEY-----
-----BEGIN RSA PUBLIC KEY-----
MIGHAoGBAMfoJT/YphGXytisrn5Mi/BLjO+EGaILgjfWb1xH/WJFMVWIxG4n75MSun2yyp
bIjVOL13SPOYbQ3eMfOnaN7n8NRMdle9hpTNyEEOew9Mmjx3KIGXhgGpgdCAKNSGS1eq+W
jL7W7FElMBotVcIECa4hT+QwugSjHz/PCMH+OwX3AgEj
-----END RSA PUBLIC KEY-----

Example 3 - In the following example, both public and private keys of the DSA type are imported
(private key as encrypted):

switchxxxxxx(config)# encrypted ip ssh-client key rsa key-pair
(Need to encrypted SSH client RSA key pair, for example:)
-----BEGIN RSA ENCRYPTED PRIVATE KEY-----
gxeOjs6OzGRtL4qstmQg1B/4gexQblfa56RdjgHAMejvUT02elYmNi+m4aTu6mlyXPHmYP
lXlXny7jZkHRvgg8EzcppEB0O3yQzq3kNi756cMg4Oqbkm7TUOtdqYFEz/h8rJJ0QvUFfh
BsEQ3e16E/OPitWgK43WTzedsuyFeOoMXR9BCuxPUJc2UeqQVM2IJt5OM0FbVt0S6oqXhG
sEEdoTlhlDwHWg97FcV7x+bEnPfzFGrmbrUxcxOxlkFsuCNo3/94PHK8zEXyWtrx2KoCDQ
qFRuM8uecpjmDh6MO2GURUVstctohEWEIVCIOr5SBCbciaxv5oS0jIzXMrJA==
-----END RSA PRIVATE KEY-----

Cisco Business Switches 350 Series CLI Guide

1271

ip ssh-client key

SSH Client Commands

-----BEGIN RSA PUBLIC KEY-----
MIGHAoGBALLOeh3css8tBL8ujFt3trcX0XJyJLlxxt4sGp8Q3ExlSRN25+Mcac6togpIEg
tIzk6t1IEJscuAih9Brwh1ovgMLRaMe25j5YjO4xG6Fp42nhHiRcie+YTS1o309EdZkiXa
QeJtLdnYL/r3uTIRVGbXI5nxwtfWpwEgxxDwfqzHAgEj
-----END RSA PUBLIC KEY-----

Example 4 - In the following example, a DSA key pair is removed:

switchxxxxxx(config)# no ip ssh-client key dsa

Example 5 - In the following example, all key pairs (RSA and DSA types) are removed.

switchxxxxxx(config)# no ip ssh-client key

Cisco Business Switches 350 Series CLI Guide

1272

SSH Client Commands

ip ssh-client password

ip ssh-client password

To configure the password for SSH client authentication by password, use the ip ssh-client password command
in Global Configuration mode. To return to default, use the no form of the command.

Syntax

ip ssh-client password string

encrypted ip ssh-client password encrypted-string

no ip ssh-client password

Parameters

• string—Password for the SSH clients (1 - 70 characters). The password cannot include the characters

"@" and ":".

• encrypted-string—Password for the SSH client in encrypted form.

Default Configuration

The default password is anonymous.

Command Mode

Global Configuration mode

User Guidelines

If authentication is configured to use a password (using the command ip ssh-client authentication), use the
ip ssh-client password command to define the password.

If the encrypted keyword is used, the password must be in the encrypted form.

Use the command ip ssh-client change server password to change the password on the remote SSH server
so that it will match the new password of the SSH client.

Example

The following example specifies a plaintext password for the local SSH clients:

switchxxxxxx(config)# ip ssh-client password &&&111aaff

Cisco Business Switches 350 Series CLI Guide

1273

ip ssh-client server authentication

SSH Client Commands

ip ssh-client server authentication

To enable remote SSH server authentication by the SSH client, use the ip ssh-client server authentication
command in Global Configuration mode.

To disable remote SSH server authentication, use the no form of the command.

Syntax

ip ssh-client server authentication

no ip ssh-client server authentication

Parameters

This command has no arguments or keywords.

Default Configuration

SSH server authentication is disabled

Command Mode

Global Configuration mode

User Guidelines

When remote SSH server authentication is disabled, any remote SSH server is accepted (even if there is no
entry for the remote SSH server in the SSH Trusted Remote Server table).

When remote SSH server authentication is enabled, only trusted SSH servers are accepted. Use the ip ssh-client
server fingerprint command to configure trusted SSH servers.

Example

The following example enables SSH server authentication:

switchxxxxxx(config)# ip ssh-client server authentication

Cisco Business Switches 350 Series CLI Guide

1274

SSH Client Commands

ip ssh-client server fingerprint

ip ssh-client server fingerprint

To add a trusted server to the Trusted Remote SSH Server Table, use the ip ssh-client server fingerprint
command in Global configuration mode. To remove an entry or all entries from the Trusted Remote SSH
Server Table, use the no form of the command.

Syntax

ip ssh-client server fingerprint {host | ip-address} fingerprint

no ip ssh-client server fingerprint [host | ip-address]

Parameters

• host—DNS name of an SSH server.

• ip-address—Specifies the address of an SSH server. The IP address can be an IPv4, IPv6 or IPv6z address.

See IPv6z Address Conventions.

• fingerprint—FIngerprint of the SSH server public key (32 Hex characters).

Default Configuration

The Trusted Remote SSH Server table is empty.

Command Mode

Global Configuration mode

User Guidelines

Fingerprints are created by applying a cryptographic hash function to a public key. Fingerprints are shorter
than the keys they refer to, making it simpler to use (easier to manually input than the original key). Whenever
the switch is required to authenticate an SSH server’s public key, it calculates the received key’s fingerprint
and compares it to the previously-configured fingerprint.

The fingerprint can be obtained from the SSH server (the fingerprint is calculated when the public key is
generated on the SSH server).

The no ip ssh-client server fingerprint command removes all entries from the Trusted Remote SSH Server
table.

Example

In the following example, a trusted server is added to the Trusted Servers table (with and without a separator
":"):

switchxxxxxx(config)# ip ssh-client server fingerprint 1.1.1.1
DC789788DC88A988127897BCBB789788
switchxxxxxx(config)# ip ssh-client server fingerprint 1.1.1.1
DC:78:97:88:DC:88:A9:88:12:78:97:BC:BB:78:97:88

Cisco Business Switches 350 Series CLI Guide

1275

ip ssh-client source-interface

SSH Client Commands

ip ssh-client source-interface

To specify the source interface which IPv4 address will be used as the Source IPv4 address for communication
with IPv4 SSH servers, use the ip ssh-client source-interface Global Configuration mode command. To
restore the default configuration, use the no form of this command.

Syntax

ip ssh-client source-interface interface-id

no ip ssh-client source-interface

Parameters

• interface-id—Specifies the source interface.

Default Configuration

The source IPv4 address is the IPv4 address defined on the outgoing interface and belonging to next hop IPv4
subnet.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface then the interface IP address belonging to next hop IPv4 subnet
is applied.

If the source interface is not the outgoing interface then the minimal IPv4 address defined on the source
interface is applied.

If there is no available IPv4 source address, a SYSLOG message is issued when attempting to communicate
with an IPv4 SSH servers.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# ip ssh-client source-interface vlan 100

Cisco Business Switches 350 Series CLI Guide

1276

SSH Client Commands

ipv6 ssh-client source-interface

ipv6 ssh-client source-interface

To specify the source interface whose IPv6 address will be used as the Source IPv6 address for communication
with IPv6 SSH servers, use the ipv6 ssh-client source-interface Global Configuration mode command. To
restore the default configuration, use the no form of this command.

Syntax

ipv6 ssh-client source-interface interface-id

no ipv6 ssh-client source-interface

Parameters

• interface-id—(Optional) Specifies the source interface.

Default Configuration

The IPv6 source address is the IPv6 address defined of the outgoing interface and selected in accordance with
RFC6724.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface then the IPv6 address defined on the interfaces and selected
in accordance with RFC 6724.

If the source interface is not the outgoing interface then the minimal IPv4 address defined on the source
interface and with the scope of the destination IPv6 address is applied.

If there is no available IPv6 source address, a SYSLOG message is issued when attempting to communicate
with an IPv6 SSH servers.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# ipv6 ssh-client source-interface vlan 100

Cisco Business Switches 350 Series CLI Guide

1277

ip ssh-client username

SSH Client Commands

ip ssh-client username

To configure the SSH client username of the switch, use the ip ssh-client username command in Global
Configuration mode.

To return to default, use the no form of the command.

Syntax

ip ssh-client username string

no ip ssh-client username

Parameters

• string—Username of the SSH client.The length is 1 - 70 characters. The username cannot include the

characters "@" and ":".

Default Configuration

The default username is anonymous

Command Mode

Global Configuration mode

User Guidelines

The configured username is used when SSH client authentication is done both by password or by key.

Example

The following example specifies a username of the SSH client:

switchxxxxxx(config)# ip ssh-client username jeff

Cisco Business Switches 350 Series CLI Guide

1278

SSH Client Commands

show ip ssh-client

show ip ssh-client

To display the SSH client credentials, both default and user-defined keys, use the show ip ssh-client command
in Privilege EXEC mode.

Syntax

show ip ssh-client

show ip ssh-client {mypubkey | key} {dsa | rsa}

Parameters

• dsa—Specifies displaying the DSA key type.

• rsa—Specifies displaying the RSA key type.

• mypubkey—Specifies that only the public key is selected to be displayed.

Command Mode

Privileged EXEC mode

User Guidelines

Use the command with a specific key-type to display the SSH client key; You can either specify display of
public key or private key, or with no parameter to display both private and public keys. The keys are displayed
in the format specified by RFC 4716.

Example 1. The following example displays the authentication method and the RSA public key:

DSA key
john
User Defined

switchxxxxxx# show ip ssh-client mypubkey rsa
Source IPv4 interface: vlan 1
Source IPv6 interface: vlan 10
Authentication method:
Username:
Key Source:
---- BEGIN SSH2 PUBLIC KEY ----
Comment: RSA Public Key
AAAAB3NzaC1yc2EAAAABIwAAAIEAudGEIaPARsKoVJVjs8XALAKqBN1WmXnY
kUf5oZjGY3QoMGDvNipQvdN3YmwLUBiKk31WvVwFB3N2K5a7fUBjoblkdjns
QKTKZiu4V+IL5rds/bD6LOEkJbjUzOjmp9hlIkh9uc0ceZ3ZxMtKhnORLrXL
aRyxYszO5FuirTo6xW8=
---- END SSH2 PUBLIC KEY ----
Public Key Fingerprint: 84:f8:24:db:74:9c:2d:51:06:0a:61:ef:82:13:88:88

Example 2. The following example displays the authentication method and DSA private key in
encrypted format:

switchxxxxxx# show ip ssh-client key DSA
Source IPv4 interface: vlan 1
Source IPv6 interface: vlan 10
Authentication method:
Username:
Key Source:
Public Key Fingerprint: 77:C7:19:85:98:19:27:96:C9:CC:83:C5:78:89:F8:86
---- BEGIN SSH2 PUBLIC KEY ----

DSA key
john
User Defined

Cisco Business Switches 350 Series CLI Guide

1279

show ip ssh-client

SSH Client Commands

Comment: RSA Public Key
AAAAB3NzaC1kc3MAAACBAPY8ZOHY2yFSJA6XYC9HRwNHxaehvx5wOJ0rzZdzoSOXxbET
W6ToHv8D1UJ/z+zHo9Fiko5XybZnDIaBDHtblQ+Yp7StxyltHnXF1YLfKD1G4T6JYrdH
YI14Om1eg9e4NnCRleaqoZPF3UGfZia6bXrGTQf3gJq2e7Yisk/gF+1VAAAAFQDb8D5c
vwHWTZDPfX0D2s9Rd7NBvQAAAIEAlN92+Bb7D4KLYk3IwRbXblwXdkPggA4pfdtW9vGf
J0/RHd+NjB4eo1D+0dix6tXwYGN7PKS5R/FXPNwxHPapcj9uL1Jn2AWQ2dsknf+i/FAA
vioUPkmdMc0zuWoSOEsSNhVDtX3WdvVcGcBq9cetzrtOKWOocJmJ80qadxTRHtUAAACB
AN7CY+KKv1gHpRzFwdQm7HK9bb1LAo2KwaoXnadFgeptNBQeSXG1vO+JsvphVMBJc9HS
n24VYtYtsMu74qXviYjziVucWKjjKEb11juqnF0GDlB3VVmxHLmxnAz643WK42Z7dLM5
sY29ouezv4Xz2PuMch5VGPP+CDqzCM4loWgV
---- END SSH2 PUBLIC KEY ----
---- BEGIN SSH2 PRIVATE KEY ----
Comment: DSA Private Key
AAAAB3NzaC1kc3MAAACBAPY8ZOHY2yFSJA6XYC9HRwNHxaehvx5wOJ0rzZdzoSOXxbET
W6ToHv8D1UJ/z+zHo9Fiko5XybZnDIaBDHtblQ+Yp7StxyltHnXF1YLfKD1G4T6JYrdH
YI14Om1eg9e4NnCRleaqoZPF3UGfZia6bXrGTQf3gJq2e7Yisk/gF+1VAAAAFQDb8D5c
vwHWTZDPfX0D2s9Rd7NBvQAAAIEAlN92+Bb7D4KLYk3IwRbXblwXdkPggA4pfdtW9vGf
J0/RHd+NjB4eo1D+0dix6tXwYGN7PKS5R/FXPNwxHPapcj9uL1Jn2AWQ2dsknf+i/FAA
vioUPkmdMc0zuWoSOEsSNhVDtX3WdvVcGcBq9cetzrtOKWOocJmJ80qadxTRHtUAAACB
AN7CY+KKv1gHpRzFwdQm7HK9bb1LAo2KwaoXnadFgeptNBQeSXG1vO+JsvphVMBJc9HS
n24VYtYtsMu74qXviYjziVucWKjjKEb11juqnF0GDlB3VVmxHLmxnAz643WK42Z7dLM5
sY29ouezv4Xz2PuMch5VGPP+CDqzCM4loWgV
---- END SSH2 PRIVATE KEY ----

Example 3. The following example displays the SSH client authentication method, the username
and the password:

switchxxxxxx# show ip ssh-client
Source IPv4 interface: vlan 1
Source IPv6 interface: vlan 10
Authentication method:
Username:
Password:
password(Encrypted):

DSA key
anonymous (default)
anonymous (default)
KzGgzpYa7GzCHhaveSJDehGJ6L3Yf9ZBAU5nsxSxwic=

Cisco Business Switches 350 Series CLI Guide

1280

SSH Client Commands

show ip ssh-client server

show ip ssh-client server

To display the SSH remote server authentication method and the Trusted Remote SSH Server table, use the
show ip ssh-client server command in Privilege EXEC Configuration mode.

Syntax

show ip ssh-client server [host | ip-address]

Parameters

• host—(Optional) DNS name of an SSH server.

• ip-address—(Optional) IP Address of an SSH server. The IP address can be an IPv4, IPv6 or IPv6z

address. See IPv6z Address Conventions.

Default Configuration

None

Command Mode

Privileged EXEC mode

User Guidelines

If a specific SSH server is specified, only the fingerprint of this SSH server is displayed. Otherwise, all known
servers are displayed.

Example 1 - In the following example, the SSH remote server authentication method and all trusted
remote SSH servers are displayed:

switchxxxxxx# show ip ssh-client server
SSH Server Authentication is enabled
server address: 11.1.0.1

Server Key Fingerprint: 5a:8d:1d:b5:37:a4:16:46:23:59:eb:44:13:b9:33:e9

server address: 192.165.204.111

Server Key Fingerprint: a4:16:46:23:5a:8d:1d:b5:37:59:eb:44:13:b9:33:e9

server address: 4002:0011::12

Server Key Fingerprint: a5:34:44:44:27:8d:1d:b5:37:59:eb:44:13:b9:33:e9

Example 2 - The following example displays the authentication method and DSA private key in
encrypted format:

DSA key
john
Default

switchxxxxxx# show ip ssh-client key DSA
Authentication method:
Username:
Key Source:
Public Key Fingerprint: 77:C7:19:85:98:19:27:96:C9:CC:83:C5:78:89:F8:86
---- BEGIN SSH2 PUBLIC KEY ----
Comment: RSA Public Key
AAAAB3NzaC1kc3MAAACBAPY8ZOHY2yFSJA6XYC9HRwNHxaehvx5wOJ0rzZdzoSOXxbET
W6ToHv8D1UJ/z+zHo9Fiko5XybZnDIaBDHtblQ+Yp7StxyltHnXF1YLfKD1G4T6JYrdH
YI14Om1eg9e4NnCRleaqoZPF3UGfZia6bXrGTQf3gJq2e7Yisk/gF+1VAAAAFQDb8D5c
vwHWTZDPfX0D2s9Rd7NBvQAAAIEAlN92+Bb7D4KLYk3IwRbXblwXdkPggA4pfdtW9vGf
J0/RHd+NjB4eo1D+0dix6tXwYGN7PKS5R/FXPNwxHPapcj9uL1Jn2AWQ2dsknf+i/FAA

Cisco Business Switches 350 Series CLI Guide

1281

show ip ssh-client server

SSH Client Commands

vioUPkmdMc0zuWoSOEsSNhVDtX3WdvVcGcBq9cetzrtOKWOocJmJ80qadxTRHtUAAACB
AN7CY+KKv1gHpRzFwdQm7HK9bb1LAo2KwaoXnadFgeptNBQeSXG1vO+JsvphVMBJc9HS
n24VYtYtsMu74qXviYjziVucWKjjKEb11juqnF0GDlB3VVmxHLmxnAz643WK42Z7dLM5
sY29ouezv4Xz2PuMch5VGPP+CDqzCM4loWgV
---- END SSH2 PUBLIC KEY ----
---- BEGIN SSH2 PRIVATE KEY ----
Comment: DSA Private Key
AAAAB3NzaC1kc3MAAACBAPY8ZOHY2yFSJA6XYC9HRwNHxaehvx5wOJ0rzZdzoSOXxbET
W6ToHv8D1UJ/z+zHo9Fiko5XybZnDIaBDHtblQ+Yp7StxyltHnXF1YLfKD1G4T6JYrdH
YI14Om1eg9e4NnCRleaqoZPF3UGfZia6bXrGTQf3gJq2e7Yisk/gF+1VAAAAFQDb8D5c
vwHWTZDPfX0D2s9Rd7NBvQAAAIEAlN92+Bb7D4KLYk3IwRbXblwXdkPggA4pfdtW9vGf
J0/RHd+NjB4eo1D+0dix6tXwYGN7PKS5R/FXPNwxHPapcj9uL1Jn2AWQ2dsknf+i/FAA
vioUPkmdMc0zuWoSOEsSNhVDtX3WdvVcGcBq9cetzrtOKWOocJmJ80qadxTRHtUAAACB
AN7CY+KKv1gHpRzFwdQm7HK9bb1LAo2KwaoXnadFgeptNBQeSXG1vO+JsvphVMBJc9HS
n24VYtYtsMu74qXviYjziVucWKjjKEb11juqnF0GDlB3VVmxHLmxnAz643WK42Z7dLM5
sY29ouezv4Xz2PuMch5VGPP+CDqzCM4loWgV
---- END SSH2 PRIVATE KEY ----

Example 3 - The following example displays the SSH client authentication method, the username
and the password:

switchxxxxxx# show ip ssh-client
Authentication method: password (default)
Username: anonymous (default)
password(Encrypted): KzGgzpYa7GzCHhaveSJDehGJ6L3Yf9ZBAU5

Cisco Business Switches 350 Series CLI Guide

1282

SSD Commands

This chapter contains the following sections:

• ssd config, on page 1284
• passphrase, on page 1285
• ssd rule, on page 1286
• show SSD, on page 1288
• ssd session read, on page 1290
• show ssd session, on page 1291
• ssd file passphrase control, on page 1292
• ssd file integrity control, on page 1293

Cisco Business Switches 350 Series CLI Guide

1283

ssd config

ssd config

SSD Commands

To enter the Secure Sensitive Data (SSD) command mode, use ssd config in Global Configuration mode. In
this command mode, an administrator can configure how the sensitive data on the device, such as keys and
passwords, is to be protected.

Syntax

ssd config

Parameters

This command has no arguments or keywords.

Command Mode

Global Configuration mode

User Guidelines

Only users with sufficient permission can use this command, which edits and displays the SSD configuration.
See ssd rule, on page 1286 for a description of these permissions.

Example

switchxxxxxx(config)# ssd config
switchxxxxxx(config-ssd)#

Cisco Business Switches 350 Series CLI Guide

1284

SSD Commands

passphrase

passphrase

To change the passphrase in the system, use passphrase in SSD Configuration mode. A device protects its
sensitive data by encrypting them using the key generated from the passphrase.

To reset the passphrase to the default passphrase, use the no passphrase.

Syntax

passphrase {passphrase}

encrypted passphrase {encrypted-passphrase}

no passphrase

Parameters

• passphrase—New system passphrase.

• encrypted-passphrase—The passphrase in its encrypted form.

Default Usage

If this command is not entered, the default passphrase is used.

Command Mode

SSD Configuration mode

User Guidelines

To use this command, enter passphrase and Enter, a confirmation message is displayed and the user must
confirm the intention to change the passphrase. Then the passphrase can be entered (see example).

Encrypted passphrase is allowed only in the SSD Control Block of a source file that is being copied to the
startup configuration file (user cannot manually enter this command).

When generating a passphrase, the user must use 4 different character classes (similar to strong
password/passwords complexity). These can be: uppercase letters, lowercase letters, numbers, and special
characters available on a standard keyboard.

Example

The following example defines a decrypted passphrase.

switchxxxxxx(config-ssd)# passphrase
This operation will change the system SSD passphrase. Are you sure? (Y/N)[N] Y
Please enter SSD passphrase:**********
Please reenter SSD passphrase:**********

Cisco Business Switches 350 Series CLI Guide

1285

ssd rule

ssd rule

SSD Commands

To configure an SSD rule, use ssd rule in SSD Configuration mode. A device grants read permission of
sensitive data to users based on the SSD rules. A user that is granted Both or Plaintext read permission is
also granted permission to enter SSD Configuration mode.

To delete user-defined rules and restore default rules, use no ssd rule.

Syntax

[encrypted] SSD rule {all | level-15 | default-user | user user-name}

{secure | insecure | secure-xml-snmp | insecure-xml-snmp}

permission {encrypted-only | plaintext-only | both | exclude}

default-read {encrypted | plaintext | exclude}

no ssd rule [ {all | level-15 | default-user | user user-name}

{secure | insecure | secure-xml-snmp | insecure-xml-snmp}]

Command Mode

SSD Configuration mode.

Default Rules

The device has the following factory default rules:

Table4:DefaultSSDRules

Rule Key

Rule Action

User

Channel

Read Permission

Default Read Mode

level-15

secure-xml-snmp

Plaintext Only

Plaintext

level-15

secure

level-15

insecure

Both

Both

insecure-xml-snmp

Exclude

Encrypted

Encrypted

Exclude

secure

insecure

Encrypted Only

Encrypted

Encrypted Only

Encrypted

all

all

all

User Guidelines

Use no ssd rule to delete a user-defined rule or to restore the default of a modified default rule.

Use no ssd rule (without parameters) to remove all SSD rules and restore the default SSD rules. A confirmation
message will be displayed asking permission to do this. To delete specific rules (applicable for the user
defined), provide parameters specifying the user and security of the channel.

Cisco Business Switches 350 Series CLI Guide

1286

SSD Commands

ssd rule

encrypted SSD rule is used to copy an SSD rule from one device to another in a secure manner.

You can modify but cannot delete the default SSD rules. The following is the order in which SSD rules are
applied:

• The SSD rules for specified users.

• The SSD rule for the default-user (cisco).

• The SSD rules for level-15 users.

• The remaining SSD rules for all.

The user can enter the commands in any order.The ordering is done implicitly by the device.

Example 1 - The following example modifies a rule.

switchxxxxxx(config-ssd)# ssd rule level-15 secure permission encrypted-only default-read
encrypted

Example 2 - The following example adds a rule.

switchxxxxxx(config-ssd)# ssd rule user james secure permission both default-read encrypted

Example 3 - The following example adds a rule as encrypted format.

switchxxxxxx(config-ssd)# encrypted ssd rule iurwe874jho32iu9ufjo32i83232fdefsd

Example 4 - The following example deletes a default rule.

switchxxxxxx(config-ssd)# no ssd rule all secure

Example 5 - The following example deletes a user-defined rule.

switchxxxxxx(config-ssd)# no ssd rule user james secure

Example 6 - The following example deletes all rules.

switchxxxxxx(config-ssd)# no ssd rule
This operation will delete all user-defined rules and retrieve the default rules instead.
Are you sure (Y/N): N

Cisco Business Switches 350 Series CLI Guide

1287

show SSD

show SSD

SSD Commands

To present the current SSD rules; the rules will be displayed as plaintext, use show ssd rules in SSD
Configuration mode.

Syntax

show SSD [rules | brief]

Parameters

• rules—(Optional) Display only the SSD rules.

• brief—(Optional) Display the encrypted passphrase, File Passphrase Control and File Integrity attributes.

Command Mode

SSD Configuration mode

Default Configuration

Display all SSD information.

Example 1 - The following example displays all SSD information.

switchxxxxxx(config-ssd)# show ssd
SSD current parameters:
Local Passphrase:
File Passphrase Control: Unrestricted
File Integrity Control: Disabled
SSD parameters after reset:
Local Passphrase:
File Passphrase Control: Unrestricted
File Integrity Control: Disabled

Default

Default

User Type

User Name

Channel

Read Permission Default Read

Type

secure
secure

admin11
admin2

Both
Encrypted-Only
secure-xml-snmp Plaintext-Only

------------ --------- ----------------- --------------- ------------ -----------
User-Define
User-Define
Default
Default
Default
Default
Default
*Default

Both
Both
Encrypted-Only
Encrypted-Only
insecure-xml-snmp Plaintext-Only

Encrypted
Encrypted
Plaintext
Encrypted
Encrypted
Encrypted
Encrypted
Plaintext

Specific
Specific
Level-15
Level-15
Level-15
All
All
All

secure
insecure
secure
insecure

* Modified default entry

Example 2 - The following example displays the SSD rules.

switchxxxxxx(config-ssd)# show ssd rules

User Type

User Name

Channel

Read Permission Default Read

Type

admin11
admin2

------------ --------- ----------------- --------------- ------------ -----------
User-Define
User-Define
Default
Default
Default
Default

Both
Encrypted-Only
secure-xml-snmp Plaintext-Only

Encrypted
Encrypted
Plaintext
Encrypted
Encrypted
Encrypted

Specific
Specific
Level-15
Level-15
Level-15
All

Both
Both
Encrypted-Only

secure
insecure
secure

secure
secure

Cisco Business Switches 350 Series CLI Guide

1288

SSD Commands

show SSD

All
All

insecure

Encrypted-Only
insecure-xml-snmp Plaintext-Only

Encrypted
Plaintext

Default
*Default

* Modified default entry

Example 3 - The following example displays the SSD attributes.

switchxxxxxx(config-ssd)# show ssd brief
SSD current parameters:
Local Passphrase:
File Passphrase Control: Unrestricted
File Integrity Control: Disabled
SSD parameters after reset:
Local Passphrase:
File Passphrase Control: Unrestricted
File Integrity Control: Disabled

Default

Default

Cisco Business Switches 350 Series CLI Guide

1289

ssd session read

SSD Commands

ssd session read

To override the current SSD default read of the current session, use ssd session read in Global Configuration
mode.

Syntax

ssd session read {encrypted | plaintext | exclude}

no ssd session read

Parameters

• encrypted—Override the SSD default option to encrypted

• plaintext—Override the SSD default option to plaintext

• exclude—Override the SSD default option to exclude

Command Mode

Global Configuration mode.

Default

The command itself does not have a default. However, note that the read mode of the session itself, defaults
to the default read mode of the SSD rule that the device uses to grant SSD permission to the user of the session.

User Guidelines

Use no ssd session read to restore the default read option of the SSD rules. This configuration will be allowed
only if the user of the current session has sufficient read permissions; otherwise, the command will fail and
an error will be displayed. The setting will take effect immediately and will terminate when the user restores
the settings or exits the session.

Example

switchxxxxxx(config)# ssd session read plaintext

Cisco Business Switches 350 Series CLI Guide

1290

SSD Commands

show ssd session

show ssd session

To view the SSD read permission and default read mode of the user of the current session, use show ssd
session in Privileged EXEC mode.

Syntax

show ssd session

Command Mode

Privileged EXEC mode

Default

None

Examples

switchxxxxxx# show ssd session
User Name/Level: James / Level 15
User Read Permission: Both
Current Session Read mode: Plaintext

Cisco Business Switches 350 Series CLI Guide

1291

ssd file passphrase control

SSD Commands

ssd file passphrase control

To provide an additional level of protection when copying configuration files to the startup configuration file,
use ssd file passphrase control in SSD Configuration mode. The passphrase in a configuration file is always
encrypted with the default passphrase key

Syntax

ssd file passphrase control {restricted | unrestricted}

no ssd file passphrase control

Parameters

• Restricted—In this mode, a device restricts its passphrase from being exported into a configuration file.
Restricted mode protects the encrypted sensitive data in a configuration file from devices that do not
have the passphrase. The mode should be used when a user does not want to expose the passphrase in a
configuration file.

• Unrestricted—In this mode, a device will include its passphrase when creating a configuration file. This

allows any devices accepting the configuration file to learn the passphrase from the file.

Default

The default is unrestricted.

Command Mode

SSD Configuration mode.

User Guidelines

To revert to the default state, use the no ssd file passphrase control command.

Note that after a device is reset to the factory default, its local passphrase is set to the default passphrase. As
a result, the device will not be able to decrypted sensitive data encrypted with a user-defined passphrase key
in its own configuration files until the device is manually configured with the user-passphrase again or the
files are created in unrestricted mode.

If a user-defined passphrase in Unrestricted mode are configured, it is highly recommended to enable SSD
File Integrity Control. Enabling SSD File Integrity Control protects configuration files from tampering.

Examples

console(ssd-config)# ssd file passphrase control restricted
console(ssd-config)# no ssd file passphrase control

Cisco Business Switches 350 Series CLI Guide

1292

SSD Commands

ssd file integrity control

ssd file integrity control

To instruct the device to protect newly-generated configuration files that contain encrypted sensitive data
from tampering, use ssd file integrity control command in SSD Configuration mode.

To disable Integrity Control, use no ssd file integrity control.

Syntax

ssd file integrity control enabled

no ssd file integrity control

Parameters

• enabled—Enable file integrity control to protect newly-generated configuration files from tampering.

Default

The default file input control is disable.

Command Mode

SSD Configuration mode.

User Guidelines

TA user can protect a configuration file from being tampered by creating the file with File Integrity Control
enabled. It is recommended that File Integrity Control be enabled when a devices users a user-defined passphrase
with Unrestricted Configuration File Passphrase Control.

A device determines whether the integrity of a configuration file is protected by examining the File Integrity
Control command in the file. If a file in integrity-protected, but a device finds the integrity of the file is not
intact, the device rejects the file. Otherwise, the file is accepted for further processing.

Examples

switchxxxxxx(config-ssd)# ssd file integrity control enabled

When File Integrity is enabled, an internal digest command is added to the end of the entire configuration
file. This is used in downloading the configuration file to the startup configuration.

config-file-digest 0AC78001122334400AC780011223344

Cisco Business Switches 350 Series CLI Guide

1293

ssd file integrity control

SSD Commands

Cisco Business Switches 350 Series CLI Guide

1294

Stack Commands

This chapter contains the following sections:

• set stack mode, on page 1296
• set stack unit-type, on page 1297
• stack unit, on page 1299
• stack configuration, on page 1300
• show stack configuration, on page 1301
• show stack, on page 1302
• show stack links, on page 1303

Cisco Business Switches 350 Series CLI Guide

1295

set stack mode

set stack mode

Stack Commands

To configure the stack mode of all units in stack after reboot, use the set stack mode Privileged EXEC mode
command.

Syntax

set stack mode {native| hybrid}

Parameters

• native - all units in stack are of the same type (network interfaces type is the same on all units).

• hybrid - units in stack contain units of different types (network interfaces type of different units may be

different).

Default Configuration

native mode

Command Mode

Privileged EXEC mode

User Guidelines

• command is applied to all units in stack

• After prompting user, command will reload all devices in stack.

• Reseting stack/unit to factory default will return all units to native mode (the default)

• In case of changing mode from native to hybrid mode, the command will delete stack startup configuration
as well, and may upgrade inactive image version on all units to active image version (if current inactive
image does not support hybrid mode) . It is advisable to save device configuration to external server
before changing modes.

Example 1—The following example sets all units in stack to hybrid mode.

switchxxxxxx# set stack mode hybrid
Following confirmation, changing the stacking mode to hybrid will:
* Delete the startup configuration file;
* Upgrade the in-active image to the active image version (in case in-active image version

does not support hygrid mode);
* Automatically reload the stack;
It is highly recommended that you will backup the configuration before changing the mode,
continue ? (Y/N)[N] Y

Example 2—The following example sets all units in stack to native mode.

switchxxxxxx# set stack mode native
Changing the stacking mode to native will reload the stack, continue ? (Y/N)[N] Y

Cisco Business Switches 350 Series CLI Guide

1296

Stack Commands

set stack unit-type

set stack unit-type

To configure the unit type of a stack member , use the set stack unit-type Privileged EXEC mode command.

set stack unit-type unit unit-id network network-type uplink uplink-type

Parameters

• unit unit-id - Define the unit ID to apply setting. (Range: 1–4)

• network network-type - The type of network ports of the unit. Supported values are:

• gi (for device for which all network ports types are Gigabitethernet)

• tw (for device for which all network ports types are TwoPointFiveGigabitEthernet).

• te (for device for which all network ports typs are Tengigabitethernet).

• uplink uplink-type - The type of uplink ports of the unit. Supported values are:

• te (for device with Tengigabitethernet uplink ports)

• none (for devices with no uplink ports)

Default Configuration

User defined type is not configured

Command Mode

Privileged EXEC mode

User Guidelines

Use the set stack unit-type command to define the type of "not-present" stack units (see below). The type of
unit in stack defines the type of interface naming for this unit and determines which interface level commands
can be applied.

If a unit is present or inserted in a stack, the unit type is automatically set by the software to the type of unit
identified. If unit that was present is subsequently removed from stack the unit will become "not-present" but
retain the existing unit type. If a unit is "not-present", and there is no previous type identified (unit did not
exist previously in stack), its unit type is automatically set to the same unit type as the Active unit.

• if network port type is set to te, uplink port type must be set to none.

• if network port type is set to gi or tw , uplink port type must be set to te.

• If the command is applied to a unit which is present in stack, command will fail with the following error

message: "Unit ID X is present in stack - cannot manually set unit type"

• The unit-type of each unit is saved across reboots and displayed as part of configuration file header in

the following format: "unit-type unit X network network-type uplink uplink-type"

Example 1—The following example sets the unit type of unit 3.

Cisco Business Switches 350 Series CLI Guide

1297

set stack unit-type

Stack Commands

switchxxxxxx# set stack unit-type unit 3 network gi uplink te

Cisco Business Switches 350 Series CLI Guide

1298

Stack Commands

stack unit

stack unit

To place the user in the context of the specified stack unit or all stack units, use the stack unit Global
Configuration command.

Syntax

stack unit {unit-id | all}

Parameters

• unit-id— Select a specific unit. All commands after this command refer to this unit. Unit must be member

in the stack. (Range: 1–4).

• all—Select all the units in the stack.

Default Configuration

None

Command Mode

Global Configuration mode

Example 1—The following example sets the unit context to 2, all following stack command will
apply to unit 2.

switchxxxxxx(config)# stack unit 2

Example 2—The following example sets the unit context to all units in the stack, all following stack
command will apply to all the units.

switchxxxxxx(config)# stack unit all

Cisco Business Switches 350 Series CLI Guide

1299

stack configuration

Stack Commands

stack configuration

To configure the ports and unit id after reboot, use the stack configuration command.

Syntax

stack configuration {[links ports-list] [unit-id {unit-id | auto}] }

no stack configuration

Parameters

• links— Select port list to be used as stack links after reload.

• ports-list - a list of one or more stack ports separated by comma, or a range of sequential ports marked

by dash.

no-links— set stack unit without stack links after reboot.

• unit-id— Select the unit id to be used after reload. (Range: 1–4). Use auto to enable stack auto numbering

feature.

Command Mode

Global Configuration mode

Stack Unit mode.

User Guidelines

• Running the command in Global Configuration mode will configure the current stack Active unit.

• The no stack configuration is used to return the stack configuration to factory default after reload (use

the reload command to reboot unit).

• Running the command in stack unit all context and configuration of the unit-id parameter not to auto

generate an error (to avoid setting several units to the same Id).

• Optional parameters not provided in the command will not be changed.

Example 1—The following example sets the Active unit to stack factory default.

switchxxxxxx(config)# no stack configuration

Example 2—The following example sets the unit 3 to have stack links (ports) te3-4 with unit ID
auto.

switchxxxxxx(config)# stack unit 3
switchxxxxxxunit# stack configuration links te3-4 unit-id auto

Cisco Business Switches 350 Series CLI Guide

1300

Stack Commands

show stack configuration

show stack configuration

To display the stack configuration (including configuration that is configured after reboot) parameters, use
the show stack configuration EXEC mode command.

Syntax

show stack configuration

Command Mode

User EXEC mode

Examples

Display the stack configuration information for an entire stack.

switchxxxxxx# show stack configuration

Unit Id

After Reboot Configuration

Unit Id

Stack Links

------------

------------

------------------------

1

2

3

1

auto

4

te1-2

te3-4

te1-2

Cisco Business Switches 350 Series CLI Guide

1301

show stack

show stack

Stack Commands

To display the stack operational status, use the show stack EXEC mode command.

Syntax

show stack

Command Mode

User EXEC mode

Examples

Display the stack information for an entire stack.

switchxxxxxx# show stack
Topology is Ring
Units stack mode: Hybrid

Unit Id

MAC Address

Role

Network Port
Type

Uplink Port Type

-------

------------------

---------

--------

1

2

3

4

00:00:b0:00:10:00

Active

00:00:b0:00:20:00

Standby

00:00:b0:00:30:00

Member

00:00:b0:00:40:00

Member

te

gi

gi

tw

---------

none

te

te

te

Cisco Business Switches 350 Series CLI Guide

1302

Stack Commands

show stack links

show stack links

To display the stack links operational status, use the show stack links EXEC mode command.

Syntax

show stack links [details]

Command Mode

User EXEC mode

Example 1—Display the stack links information for an entire stack.

switchxxxxxx# show stack links

Topology is Ring

Unit Id

Active Links

Neighbor Links

Operational Link
Speed

Down/Standby
Links

-----------

----------------------

-------------------------------

-----------------------

-------------------------

1

2

3

te1/1-2

te2/1-2

te3/3-4

te3/4,te2/1

te1/2,te3/3

te2/2,te1/1

10G

10G

10G

te1/3,te1/4

Example 2—Display the stack links information for an entire stack with details.

.

switchxxxxxx# show stack links details

Unit Id

Link

Status

Speed

Neighbor
Unit Id

Neighbor Link

Neighbor

Mac Address

-------------

-----------

------------

------------

----------------

-----------------

-------------------------

1

1

2

2

te1

te2

te1

te2

Active

10G

Down

Down

NA

NA

Active

10G

2

NA

NA

1

te2

NA

NA

te1

00:00:b0:00:20:00

NA

NA

00:00:b0:00:10:00

Topology is Ring

Cisco Business Switches 350 Series CLI Guide

1303

show stack links

Stack Commands

Cisco Business Switches 350 Series CLI Guide

1304

SYSLOG Commands

This chapter contains the following sections:

• aaa logging, on page 1306
• clear logging, on page 1307
• clear logging file, on page 1308
• file-system logging, on page 1309
• logging buffered, on page 1310
• logging console, on page 1311
• logging file, on page 1312
• logging host , on page 1313
• logging on, on page 1314
• logging source-interface, on page 1315
• logging source-interface-ipv6, on page 1316
• logging aggregation on, on page 1317
• logging aggregation aging-time, on page 1318
• logging origin-id, on page 1319
• logging cbd module, on page 1320
• logging cbd level, on page 1321
• show logging, on page 1322
• show logging file, on page 1323
• show syslog-servers, on page 1324

Cisco Business Switches 350 Series CLI Guide

1305

aaa logging

aaa logging

SYSLOG Commands

To enable logging AAA logins, use the aaa logging Global Configuration mode command. To disable logging
AAA logins, use the no form of this command.

Syntax

aaa logging {login}

no aaa logging {login}

Parameters

login—Enables logging messages related to successful AAA login events, unsuccessful AAA login events
and other AAA login-related events.

Default Configuration

Enabled.

Command Mode

Global Configuration mode

User Guidelines

This command enables logging messages related to successful login events, unsuccessful login events and
other login-related events. Other types of AAA events are not subject to this command.

Example

The following example enables logging AAA login events.

switchxxxxxx(config)# aaa logging login

Cisco Business Switches 350 Series CLI Guide

1306

SYSLOG Commands

clear logging

clear logging

To clear messages from the internal logging buffer, use the clear logging Privileged EXEC mode command.

Syntax

clear logging

Parameters

This command has no arguments or keywords.

Default Configuration

None

Command Mode

Privileged EXEC mode

Example

The following example clears messages from the internal logging buffer.

switchxxxxxx# clear logging
Clear Logging Buffer ? (Y/N)[N]

Cisco Business Switches 350 Series CLI Guide

1307

clear logging file

SYSLOG Commands

clear logging file

To clear messages from the logging file, use the clear logging file Privileged EXEC mode command.

Syntax

clear logging file

Parameters

This command has no arguments or keywords.

Default Configuration

None

Command Mode

Privileged EXEC mode

Example

The following example clears messages from the logging file.

switchxxxxxx# clear logging file
Clear Logging File [y/n]

Cisco Business Switches 350 Series CLI Guide

1308

SYSLOG Commands

file-system logging

file-system logging

To enable logging file system events, use the file-system logging Global Configuration mode command. To
disable logging file system events, use the no form of this command.

Syntax

file-system logging {copy | delete-rename}

no file-system logging {copy | delete-rename}

Parameters

• copy—Specifies logging messages related to file copy operations.

• delete-rename—Specifies logging messages related to file deletion and renaming operations.

Default Configuration

Enabled.

Command Mode

Global Configuration mode

Example

The following example enables logging messages related to file copy operations.

switchxxxxxx(config)# file-system logging copy

Cisco Business Switches 350 Series CLI Guide

1309

logging buffered

SYSLOG Commands

logging buffered

To limit the SYSLOG message display to messages with a specific severity level, and to define the buffer
size (number of messages that can be stored), use the logging buffered Global Configuration mode command.
To cancel displaying the SYSLOG messages, and to return the buffer size to default, use the no form of this
command.

Syntax

logging buffered [buffer-size] [severity-level | severity-level-name]

no logging buffered

Parameters

• buffer-size—(Optional) Specifies the maximum number of messages stored in buffer. (Range: 20–1000)

• severity-level—(Optional) Specifies the severity level of messages logged in the buffer. The possible

values are: 1-7.

• severity-level-name—(Optional) Specifies the severity level of messages logged in the buffer. The
possible values are: emergencies, alerts, critical, errors, warnings, notifications, informational and
debugging.

Default Configuration

The default severity level is informational.

The default buffer size is 1000.

Command Mode

Global Configuration mode

User Guidelines

All the SYSLOG messages are logged to the internal buffer. This command limits the messages displayed to
the user.

Example

The following example shows two ways of limiting the SYSLOG message display from an internal buffer to
messages with severity level debugging. In the second example, the buffer size is set to 100 and severity level
informational.

switchxxxxxx(config)# logging buffered debugging
switchxxxxxx(config)# logging buffered 100 informational

Cisco Business Switches 350 Series CLI Guide

1310

SYSLOG Commands

logging console

logging console

To limit messages logged to the console to messages to a specific severity level, use the logging console
Global Configuration mode command. To restore the default, use the no form of this command.

Syntax

logging console level

no logging console

Parameters

level—Specifies the severity level of logged messages displayed on the console. The possible values are:
emergencies, alerts, critical, errors, warnings, notifications, informational and debugging.

Default Configuration

Informational.

Command Mode

Global Configuration mode

Example

The following example limits logging messages displayed on the console to messages with severity level
errors.

switchxxxxxx(config)# logging console errors

Cisco Business Switches 350 Series CLI Guide

1311

logging file

logging file

SYSLOG Commands

To limit SYSLOG messages sent to the logging file to messages with a specific severity level, use the logging
file Global Configuration mode command. To cancel sending messages to the file, use the no form of this
command.

Syntax

logging file level

no logging file

Parameters

level—Specifies the severity level of SYSLOG messages sent to the logging file. The possible values are:
emergencies, alerts, critical, errors, warnings, notifications, informational and debugging.

Default Configuration

The default severity level is errors.

Command Mode

Global Configuration mode

Example

The following example limits SYSLOG messages sent to the logging file to messages with severity level
alerts.

switchxxxxxx(config)# logging file alerts

Cisco Business Switches 350 Series CLI Guide

1312

SYSLOG Commands

logging host

logging host

To log messages to the specified SYSLOG server, use the logging host Global Configuration command. To
delete the SYSLOG server with the specified address from the list of SYSLOG servers, use the no form of
this command.

Syntax

logging host {ip-address | ipv6-address | hostname} [port port] [severity level] [facility facility] [description
text]

no logging host {ipv4-address | ipv6-address | hostname}

Parameters

• ip-address—IP address of the host to be used as a SYSLOG server. The IP address can be an IPv4, IPv6

or Ipv6z address.

• hostname—Hostname of the host to be used as a SYSLOG server. Only translation to IPv4 addresses

is supported. (Range: 1–158 characters. Maximum label size for each part of the host name: 63)

• port port—(Optional) Port number for SYSLOG messages. If unspecified, the port number defaults to

514. (Range: 1–65535)

• severity level—(Optional) Limits the logging of messages to the SYSLOG servers to a specified level:

Emergencies, Alerts, Critical, Errors, Warnings, Notifications, Informational, Debugging.

• facility facility—(Optional) The facility that is indicated in the message. It can be one of the following
values: local0, local1, local2, local3, local4, local5, local 6, local7. If unspecified, the port number defaults
to local7.

• description text—(Optional) Description of the SYSLOG server. (Range: Up to 64 characters)

Default Configuration

No messages are logged to a SYSLOG server.

If unspecified, the severity level defaults to Informational.

Command Mode

Global Configuration mode

User Guidelines

You can use multiple SYSLOG servers.

Examples

switchxxxxxx(config)# logging host 1.1.1.121
switchxxxxxx(config)# logging host 3000::100/SYSLOG1

Cisco Business Switches 350 Series CLI Guide

1313

logging on

logging on

SYSLOG Commands

To enable message logging, use the logging on Global Configuration mode command. This command sends
debug or error messages asynchronously to designated locations. To disable the logging, use the no form of
this command.

Syntax

logging on

no logging on

Parameters

This command has no arguments or keywords.

Default Configuration

Message logging is enabled.

Command Mode

Global Configuration mode

Example

The following example enables logging error messages.

switchxxxxxx(config)# logging on

Cisco Business Switches 350 Series CLI Guide

1314

SYSLOG Commands

logging source-interface

logging source-interface

To specify the source interface whose IPv4 address will be used as the source IPv4 address for communication
with IPv4 SYSLOG servers, use the logging source-interface Global Configuration mode command. To
restore the default configuration, use the no form of this command.

Syntax

logging source-interface interface-id

no logging source-interface

Parameters

interface-id—Specifies the source interface.

Default Configuration

The source IPv4 address is the IPv4 address defined on the outgoing interface and belonging to next hop IPv4
subnet.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface, the interface IP address belonging to the next hop IPv4 subnet
is applied.

If the source interface is not the outgoing interface, the lowest IPv4 address defined on the source interface
is applied.

If there is no available IPv4 source address, a SYSLOG message is issued when attempting to communicate
with an IPv4 SYSLOG server.

OOB cannot be defined as a source interface.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# logging source-interface vlan 100

Cisco Business Switches 350 Series CLI Guide

1315

logging source-interface-ipv6

SYSLOG Commands

logging source-interface-ipv6

To specify the source interface whose IPv6 address will be used as the source IPv6 address for communication
with IPv6 SYSLOG servers, use the logging source-interface-ipv6 Global Configuration mode command.
To restore the default configuration, use the no form of this command.

Syntax

logging source-interface-ipv6 interface-id

no logging source-interface-ipv6

Parameters

interface-id—Specifies the source interface.

Default Configuration

The IPv6 source address is the defined IPv6 address of the outgoing interface and selected in accordance with
RFC6724.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface, the IPv6 address defined on the interfaces and selected in
accordance with RFC 6724.

If the source interface is not the outgoing interface, the minimal IPv6 address defined on the source interface
with the scope of the destination IPv6 address is applied.

If there is no available IPv6 source address, a SYSLOG message is issued when attempting to communicate
with an IPv6 SYSLOG server.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# logging source-interface-ipv6 vlan 100

Cisco Business Switches 350 Series CLI Guide

1316

SYSLOG Commands

logging aggregation on

logging aggregation on

To control aggregation of SYSLOG messages, use the logging aggregation on Global Configuration mode
command. If aggregation is enabled, logging messages are displayed every time interval (according to the
aging time specified by logging aggregation aging-time, on page 1318). To disable aggregation of SYSLOG
messages, use the no form of this command.

Syntax

logging aggregation on

no logging aggregation on

Parameters

This command has no arguments or keywords.

Default Configuration

Disabled

Command Mode

Global Configuration mode

Example

To turn off aggregation of SYSLOG messages:

switchxxxxxx(config)# no logging aggregation on

Cisco Business Switches 350 Series CLI Guide

1317

logging aggregation aging-time

SYSLOG Commands

logging aggregation aging-time

To configure the aging time of the aggregated SYSLOG messages, use the logging aggregation aging-time
Global Configuration mode command. The SYSLOG messages are aggregated during the time interval set
by the aging-time parameter. To return to the default, use the no form of this command.

Syntax

logging aggregation aging-time sec

no logging aggregation aging-time

Parameters

aging-time sec—Aging time in seconds (Range: 15–3600)

Default Configuration

300 seconds.

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# logging aggregation aging-time 300

Cisco Business Switches 350 Series CLI Guide

1318

SYSLOG Commands

logging origin-id

logging origin-id

To configure the origin field of the SYSLOG message packet headers sent to the SYSLOG server, use the
logging origin-id Global Configuration mode command. To return to the default, use the no form of this
command.

Syntax

logging origin-id {hostname | IP | IPv6 | string user-defined-id}

no logging origin-id

Parameters

• hostname—The system hostname will be used as the message origin identifier.

• IP—IP address of the sending interface that is used as the message origin identifier.

• IPv6—IPv6 address of the sending interface that is used as the message origin identifier. If the sending

interface is IPv4, the IPv4 address will be used instead.

• string user-defined-id—Specifies an identifying description chosen by the user. The user-defined-id

argument is the identifying description string.

Default Configuration

No header is sent apart from the PRI field.

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# logging origin-id string “Domain 1, router B”

Cisco Business Switches 350 Series CLI Guide

1319

logging cbd module

SYSLOG Commands

logging cbd module

To define supported modules for Cisco Business Dashboard (CBD) logging, use the logging cbd module
Global Configuration mode command. To restore the default, use the no form of this command.

Syntax

logging cbd module {module [module2 … module6 ] | none | all}

no logging cbd module

Parameters

• module - list includes: call-home, discovery, northbound, services, southbound, system. The list replaces

the previously configured list.

• none — disable logging for all modules.

• all — enable logging for all modules.

Default Configuration

Logging CBD is enabled on all modules.

Command Mode

Global Configuration mode

User Guidelines

This setting affect the CBD agent logging.

Example

The following example enables logging messages of all CBD modules.

switchxxxxxx(config)# logging cbd module all

Cisco Business Switches 350 Series CLI Guide

1320

SYSLOG Commands

logging cbd level

logging cbd level

To limit messages logged of the Cisco Business Dashboard (CBD) to messages to a specific severity level,
use the logging cbd level Global Configuration mode command. To restore the default, use the no form of
this command.

Syntax

logging cbd level level

no logging cbd level

Parameters

level—Specifies the severity level of logged messages displayed on the console. The possible values are:
errors, warnings, informational and debugging. This enable logging of messages with this level or higher.

Default Configuration

Informational.

Command Mode

Global Configuration mode

Example

The following example limits logging messages of the CBD to messages with severity level errors.

switchxxxxxx(config)# logging cbd errors

Cisco Business Switches 350 Series CLI Guide

1321

show logging

show logging

SYSLOG Commands

To display the logging status and SYSLOG messages stored in the internal buffer, use the show logging
Privileged EXEC mode command.

Syntax

show logging

Parameters

This command has no arguments or keywords.

Default Configuration

None

Command Mode

Privileged EXEC mode

Example

The following example displays the logging status and the SYSLOG messages stored in the internal buffer.

switchxxxxxx# show logging
Logging is enabled.

Origin id: hostname

Event
----------------
Login
Copy
Delete-Rename
Deny

Console Logging: Level info. Console Messages: 0 Dropped.
Buffer Logging: Level info. Buffer Messages: 61 Logged, 61 Displayed, 200 Max.
File Logging: Level error. File Messages: 898 Logged, 64 Dropped.
4 messages were not logged
Application filtering control
Application
--------------------
AAA
File system
File system
Management ACL
Aggregation: Disabled.
Aggregation aging time: 300 Sec
Logging cbd level: Informational
Logging cbd modules Enabled: call-home
01-Jan-2010 05:29:46 :%INIT-I-Startup: Warm Startup
01-Jan-2010 05:29:02 :%LINK-I-Up: Vlan 1
01-Jan-2010 05:29:02 :%LINK-I-Up: SYSLOG6
01-Jan-2010 05:29:02 :%LINK-I-Up: SYSLOG7
01-Jan-2010 05:29:00 :%LINK-W-Down: SYSLOG8

Status
---------
Enabled
Enabled
Enabled
Enabled

Cisco Business Switches 350 Series CLI Guide

1322

SYSLOG Commands

show logging file

show logging file

To display the logging status and the SYSLOG messages stored in the logging file, use the show logging file
Privileged EXEC mode command.

Syntax

show logging file

Parameters

This command has no arguments or keywords.

Default Configuration

None

Command Mode

Privileged EXEC mode

Example

The following example displays the logging status and the SYSLOG messages stored in the logging file.

switchxxxxxx# show logging file
Logging is enabled.

Origin id: hostname

Event
----------------
Login
Copy
Delete-Rename
Deny

Console Logging: Level info. Console Messages: 0 Dropped.
Buffer Logging: Level info. Buffer Messages: 61 Logged, 61 Displayed, 200 Max.
File Logging: Level error. File Messages: 898 Logged, 64 Dropped.
4 messages were not logged
Application filtering control
Application
--------------------
AAA
File system
File system
Management ACL
Aggregation: Disabled.
Aggregation aging time: 300 Sec
1-Jan-2010 05:57:00 :%SSHD-E-ERROR: SSH error: key_read: type mismatch: encoding error
01-Jan-2010 05:56:36 :%SSHD-E-ERROR: SSH error: key_read: type mismatch: encoding error
01-Jan-2010 05:55:37 :%SSHD-E-ERROR: SSH error: key_read: type mismatch: encoding error
01-Jan-2010 05:55:03 :%SSHD-E-ERROR: SSH error: key_read: key_from_blob bgEgGnt9
z6NHgZwKI5xKqF7cBtdl1xmFgSEWuDhho5UedydAjVkKS5XR2... failed
01-Jan-2010 05:55:03 :%SSHD-E-ERROR: SSH error: key_from_blob: invalid key type.
01-Jan-2010 05:56:34 :%SSHD-E-ERROR: SSH error: bad sigbloblen 58 != SIGBLOB_LEN
console#

Status
---------
Enabled
Enabled
Enabled
Enabled

Cisco Business Switches 350 Series CLI Guide

1323

show syslog-servers

SYSLOG Commands

show syslog-servers

To display the SYSLOG server settings, use the show syslog-servers Privileged EXEC mode command.

Syntax

show syslog-servers

Parameters

This command has no arguments or keywords.

Default Configuration

None

Command Mode

Privileged EXEC mode

Example

The following example provides information about the SYSLOG servers.

switchxxxxxx# show syslog-servers
Source IPv4 interface: vlan 1
Source IPv6 interface: vlan 10
Device Configuration
--------------------
IP address
Port
------------- ----
1.1.1.121
3000::100
OOB host Configuration
----------------------
Port
IP address
------------- ----
2.1.1.200

514
514

514

Facility Severity Description
--------- -------- --------------
local7
local7

info
info

Facility Severity Description
--------- -------- --------------
local7

warning

Cisco Business Switches 350 Series CLI Guide

1324

System Management Commands

This chapter contains the following sections:

• disable ports leds, on page 1326
• hostname, on page 1327
• reload, on page 1328
• resume, on page 1330
• service cpu-utilization, on page 1331
• show cpld version, on page 1332
• show cpu input rate, on page 1333
• show cpu utilization, on page 1334
• show environment, on page 1335
• show inventory, on page 1337
• show platform certificate, on page 1339
• show reload, on page 1343
• show sessions, on page 1344
• show software versions, on page 1345
• show system, on page 1347
• show system languages, on page 1349
• show system tcam utilization, on page 1350
• show services tcp-udp, on page 1351
• show tech-support, on page 1352
• show system fans, on page 1354
• show system sensors, on page 1356
• show system id, on page 1357
• show ports leds configuration, on page 1358
• show users, on page 1359
• show hardware version, on page 1360
• show hardware components, on page 1361
• system light, on page 1363
• system recovery, on page 1364
• system reset-button disable, on page 1365

Cisco Business Switches 350 Series CLI Guide

1325

disable ports leds

System Management Commands

disable ports leds

To turn off the LEDs on all ports on a device, use the disable ports leds Global Configuration mode command.

To set the LEDs of all the ports on the device to their current operational status of the port, use the no disable
ports leds command.

Syntax

disable ports leds

no disable ports leds

Parameters

This command has no arguments or keywords.

Default Configuration

The default is no disable port leds; that is the LEDs of all the ports reflect their current status.

Command Mode

Global Configuration mode

Examples

The following example turns off the port LEDs.

switchxxxxxx(config)# disable ports leds

Cisco Business Switches 350 Series CLI Guide

1326

System Management Commands

hostname

hostname

To specify or modify the device host name, use the hostname Global Configuration mode command. To
remove the existing host name, use the no form of the command.

Syntax

hostname name

no hostname

Parameters

Name—Specifies the device host name. (Length: 1-58 characters). The hostname must start with a letter, end
with a letter or digit, and have as interior characters only letters, digits, and hyphens.

Default Configuration

No host name is defined.

Command Mode

Global Configuration mode

Example

The following example specifies the device host name as ‘enterprise’.

switchxxxxxx(config)# hostname enterprise
enterprise(config)#

Cisco Business Switches 350 Series CLI Guide

1327

reload

reload

System Management Commands

To reload the operating system at a user-specified time, use the reload Privileged EXEC mode command.

Syntax

reload [in [hhh:mm | mmm] | at hh:mm [day month]] | cancel]

Parameters

• in hhh:mm | mmm—(Optional) Schedules a reload of the software to take effect in the specified minutes

or hours and minutes. The reload must take place within approximately 24 days.

• at hh:mm—(Optional) Schedules a reload of the software to take place at the specified time (using a

24-hour clock). If you specify the month and day, the reload is scheduled to take place at the specified
time and date. If you do not specify the month and day, the reload takes place at the specified time on
the current day (if the specified time is later than the current time) or on the next day (if the specified
time is earlier than the current time). Specifying 00:00 schedules the reload for midnight. The reload
must take place within 24 days.

• day—(Optional) Number of the day in the range from 1 to 31.

• month—(Optional) Month of the year.

• cancel—(Optional) Cancels a scheduled reload.

Default Usage

None

Command Mode

Privileged EXEC mode

User Guidelines

The at keyword can be used only if the system clock has been set on the device. To schedule reloads across
several devices to occur simultaneously, synchronize the time on each device with SNTP.

When you specify the reload time using the at keyword, if you specify the month and day, the reload takes
place at the specified time and date. If you do not specify the month and day, the reload takes place at the
specified time on the current day (if the specified time is later than the current time), or on the next day (if
the specified time is earlier than the current time). Specifying 00:00 schedules the reload for midnight. The
reload must take place within 24 days.

To display information about a scheduled reload, use the show reload command.

Example 1: The following example reloads the operating system on all units of a stack system or
on the single unit of a standalone system.

switchxxxxxx> reload
This command will reset the whole system and disconnect your current session. Do you want
to continue? (y/n) [Y]

Cisco Business Switches 350 Series CLI Guide

1328

System Management Commands

reload

Example 2: The following example reloads the operating system in 10 minutes on all on all units
of a stack system or on the single unit of a standalone system.

switchxxxxxx> reload in 10
This command will reset the whole system and disconnect your current session. Reload is
scheduled for 11:57:08 UTC Fri Apr 21 2012 (in 10 minutes). Do you want to continue? (y/n)

[Y]

Example 3: The following example reloads the operating system at 13:00 on all units of a stack
system or on the single unit of a standalone system.

switchxxxxxx> reload at 13:00
This command will reset the whole system and disconnect your current session. Reload is
scheduled for 13:00:00 UTC Fri Apr 21 2012 (in 1 hour and 3 minutes). Do you want to continue?

(y/n) [Y]

Example 4: The following example cancels a reload.

switchxxxxxx> reload cancel
Reload cancelled.

Cisco Business Switches 350 Series CLI Guide

1329

resume

resume

System Management Commands

To enable switching to another open Telnet session, use the resume EXEC mode command.

Syntax

resume [connection]

Parameters

connection—(Optional) Specifies the connection number. (Range: 1-4 connections.)

Default Configuration

The default connection number is that of the most recent connection.

Command Mode

Privileged EXEC mode

Example

The following command switches to open Telnet session number 1.

switchxxxxxx> resume 1

Cisco Business Switches 350 Series CLI Guide

1330

System Management Commands

service cpu-utilization

service cpu-utilization

To enable measuring CPU utilization, use the service cpu-utilization Global Configuration mode command.
To restore the default configuration, use the no form of this command.

Syntax

service cpu-utilization

no service cpu-utilization

Parameters

This command has no arguments or keywords.

Default Configuration

Measuring CPU utilization is enabled.

Command Mode

Global Configuration mode

User Guidelines

Use the service cpu utilization command to measure information on CPU utilization.

Example

The following example enables measuring CPU utilization.

switchxxxxxx(config)# service cpu-utilization

Cisco Business Switches 350 Series CLI Guide

1331

show cpld version

System Management Commands

show cpld version

To display the device CPLD code version, use the show cpld version User EXEC mode command.

Syntax

show cpld version [unit unit-id]

Parameters

unit [unit-id]—Specifies the unit number (Range: 1 – 4). If not specified, the command will display CPLD
code version for all units in stack.

Command Mode

User EXEC mode

Example 1 - The following example displays the CPLD version of all units in stack.

switchxxxxxx> show cpld version
Unit ID
----
1
2

Unit Type
-----------
CBS350-48P-4X

CBS350-48P-4X

1.0.1

CPLD code Version
-------------

1.0.2

Example 2 - The following example displays the CPLD version where a unit in stack does not have
a CPLD.

switchxxxxxx> show cpld version
Unit ID
----
1
2

Unit Type
-----------
CBS350-48P-4X

CBS350-48P-4X

CPLD code Version
-------------

Not Supported
1.0.2

Cisco Business Switches 350 Series CLI Guide

1332

System Management Commands

show cpu input rate

show cpu input rate

To display the rate of input frames to the CPU in packets per seconds (pps), use the show cpu input rate
User EXEC mode command.

Syntax

show cpu input rate

Parameters

This command has no arguments or keywords.

Command Mode

User EXEC mode

Example

The following example displays CPU input rate information.

switchxxxxxx> show cpu input rate
Input Rate to CPU is 1030 pps.

Cisco Business Switches 350 Series CLI Guide

1333

show cpu utilization

System Management Commands

show cpu utilization

To display information about CPU utilization, use the show cpu utilization Privileged EXEC mode command.

Syntax

show cpu utilization

Parameters

This command has no arguments or keywords.

Default Usage

None

Command Mode

Privileged EXEC mode

User Guidelines

Use the show cpu-utilization command to enable measuring CPU utilization.

Example

The following example displays CPU utilization information.

switchxxxxxx> show cpu utilization
CPU utilization service is on.
CPU utilization
--------------------------------------------------
five seconds: 5%; one minute: 3%; five minutes: 3%

Cisco Business Switches 350 Series CLI Guide

1334

System Management Commands

show environment

show environment

To display environment information, use the show environment User EXEC mode command.

Syntax

show environment {all | fan | temperature {status} | stack [switch-number]}

Parameters

• all—Displays the fan and temperature general status. If this parameter is used - a fault situation

will be reported if it exists on any one of the stack units

• fan—Displays the fan(s) status

• temperature {status}—Displays the temperature status

• stack [switch-number]—(Optional) Displays detailed environment status of a stack, per each stack unit.
If the switch-number is specified, the environment status of the selected device number is displayed.
(Range: 1 – 4)

Command Mode

User EXEC mode

User Guidelines

The fan and temperature status parameters are available only on devices on which fan and/or temperature
sensor are installed.

Fan status can be one of:

• OK - The fan/s functions correctly.

• Failure - One or more of the fans failed.

• Fan read fail - Reading information from one or more fans failed.

• NA - No fan is installed.

Temperature can be one of:

• OK - The temperature is below the warning threshold.

• Warning- The temperature is between the warning threshold and the critical threshold.

• Critical - the temperature is above the critical threshold.

Sensor status can be one of:

• OK - All Sensors on device are functioning properly.

• Failure - One or more of the sensors failed.

• NA - No sensor installed.

Cisco Business Switches 350 Series CLI Guide

1335

show environment

System Management Commands

Example 1 - The following example displays the general environment status of a device or a stack.

switchxxxxxx> show environment all

Internal power supply Active.

fans OK
Sensor is OK
Temperature is OK
#EDITOR: The temperature status is OK if ALL the temperature sensors status in all the stack
members is OK, and if the temperature of all the stack members is below the lowest threshold
(this is calculated per stack member, if one or more of the stack members temperature is

above its specific threshold, the temperature status is FAILURE)
#EDITOR: Likewise the fan status will be OK - only if status of fans on ALL stack members
is OK (meaning no fan fail - or with redundant fan support - only 1 fan fail and redundant

fan active

Example 2 - The following example displays the power status of a device or a stack.

switchxxxxxx> show environment power

Internal power supply Active.

Example 3 - The following example displays the general fan status of a device or a stack.

switchxxxxxx> show environment fan
fans OK
#EDITOR: The fan status is OK if the fan sensors status in ALL the stack members is OK

Example 4 - The following example displays the temperature status of a device or a stack.

switchxxxxxx> show environment temperature status
TEMPERATURE level is Warning

Example 5 - The following example displays the detailed environment status of a stack.

switchxxxxxx> show environment stack
Unit
---
1
2
3
4
#EDITOR: * fan Direction column will be printed only in SKUs which support this feature,
or in a stack when one of the units might support this feature.
Unit

fan Status
---------
OK
Failure
Read fan fail
NA

Temperature

---
1
2
3
4

Sensor
Status
---------
OK
Failure
NA
OK

Level

--------------

warning
NA
NA
OK

Cisco Business Switches 350 Series CLI Guide

1336

System Management Commands

show inventory

show inventory

To display product inventory list, use the show inventory User EXEC mode command.

Syntax

show inventory [entity]

Parameters

entity—Specifies the entity to be displayed. It can be a number (1 - 4) for a specific unit number in a stack,
or an interface (Ethernet) name.

Command Mode

User EXEC mode

User Guidelines

Use the show inventory command to retrieve and display inventory information about the device, unit in
stack, and connected entities such as SFPs.

In case no entity is specified the command will display information for all units in stack and all connected
entities.

If the specified entity is an interface (Ethernet) name, and an SFP is not inserted into the port - Only the NAME
& DESCR fields will be displayed, and DESCR will be “No SFP Inserted”.

Examples

Example 1 - The following example displays all the entities in a standalone system.

switchxxxxxx> show inventory
NAME: "1", DESCR: "48-Port Gigabit with 4-Port 10-Gigabit Managed Switch"
PID: xx350-4x-K9, VID: V01, SN: 123456789

Example 2 - The following example displays a specific entity in a standalone system.

switchxxxxxx> show inventory gigabitethernet1/0/49
NAME: "GigabitEthernet1/0/49", DESCR: "1000M base-LX Mini-GBIC SFP Transceiver"
PID: MGBLX1,VID: V01, SN: AGC1525UR7G

Example 3 - The following example displays information for specific entity - where VID information cannot
be read from SFP.

switchxxxxxx> show inventory gi1/0/1
NAME: "gi1/0/1", DESCR: "SFP-1000Base-LX"
PID: SFP-1000-LX ,VID: Information Unavailable , SN: 613bbgr8

Example 4 - The following example displays information for specific interface - where SFP is not inserted
into the interface.

switchxxxxxx> show inventory gi1/0/2
NAME: "gi1/0/2", DESCR: "SFP not inserted"

Example 5 - The following example displays all the entities in a stacking system with two units.

switchxxxxxx> show inventory
NAME: "2", DESCR: "48-Port Gigabit with 4-Port 10-Gigabit Managed Switch"

Cisco Business Switches 350 Series CLI Guide

1337

show inventory

System Management Commands

PID: xx350-4x-K9 , VID: V01, SN: 123456789
NAME: "GigabitEthernet2/0/49", DESCR: "1000M base-LX Mini-GBIC SFP Transceiver"
PID: MGBLX1, VID: V01, SN: AGC1525UR7G
NAME: "4", DESCR: "48-Port Gigabit with 4-Port 10-Gigabit Managed Switch"
PID: xx350-4x-K9 , VID: V01, SN: 123456789

Example 6- The following example displays information for unit 1 of the stack.

switchxxxxxx> show inventory 1
NAME: "1" DESCR: "48-Port Gigabit with 4-Port 10-Gigabit Managed Switch"
PID: xx350-4x-K9 VID: V02 SN: 402

Cisco Business Switches 350 Series CLI Guide

1338

System Management Commands

show platform certificate

show platform certificate

Use the show platform certificate Privileged EXEC mode command to display the device SUDI certificate
and optionally a signature over the certificate.

Syntax

show platform sudi certificate [sign [nonce <nonce value>]]

Parameters

• sign—(Optional) display a signature over the certificate

• [nonce <nonce value>]—(Optional) provide a nonce to use with the signature to protect from replay

attacks. (range 0-4,294,967,295)

Default Usage

The certificate is displayed without a signature. If the sign parameter is specified without a nonce value then
the signature will be generated without using a nonce.

Command Mode

Privileged EXEC mode

User Guidelines

show platform sudi certificate command displays the SUDI certificate. The command output includes the
certificate chain in PEM format, where the first certificate that is displayed is the Cisco Root CA, and the
second certificate that is displayed is the Cisco Subordinate/Intermediary Certificate. Both certificates can be
verified to match the certificates published on https://www.cisco.com/security/pki/. The third certificate is
the SUDI leaf certificate.

If the optional sign parameter is used, then the command output will display a signature over the certificates
using the SUDI private key.

The command also supports an optional [nonce <nonce value>] parameter used as part of the signature inputs
to prevent replay attacks. If the [nonce <nonce value>] parameter is not provided the signed data will not
include the nonce.

The command output includes a signature version. The Signature value is set to 1 to indicate that the SUDI
private key was used for signing.

Examples

Example 1: The following example displays the SUDI certificate chain without a signature:

switchxxxxxx# show platform sudi certificate
-----BEGIN CERTIFICATE-----
MIIDITCCAgmgAwIBAgIJAZozWHjOFsHBMA0GCSqGSIb3DQEBCwUAMC0xDjAMBgNV
BAoTBUNpc2NvMRswGQYDVQQDExJDaXNjbyBSb290IENBIDIwOTkwIBcNMTYwODA5
MjA1ODI4WhgPMjA5OTA4MDkyMDU4MjhaMC0xDjAMBgNVBAoTBUNpc2NvMRswGQYD
VQQDExJDaXNjbyBSb290IENBIDIwOTkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw
ggEKAoIBAQDTtuM1fg0+9Gflik4axlCK1I2fb3ESCL8+tk8kOXlhfrJ/zlfRbe60
xRP0iUGMKWKBj0IvvWFf4AW/nyzCR8ujTt4a11Eb55SAKXbXYQ7L4YMg+lmZmg/I

Cisco Business Switches 350 Series CLI Guide

1339

show platform certificate

System Management Commands

v3GJEc3HCYU0BsY8g9LuLMvqwiNmAwM2jWzNq0EPArt/F6RiQKq6Ta3e7VIfDZ7J
65OA2xASA2FrSe9Vj97KpQReDcm6G7cqFH5f+CrdQ4qwAa4zWNyM3kOpUb637DNd
9m+n6WECyc/IUD+2e+yp21kBZIKH7JvDpu2U7NBPfr52mFX8AfCZgkXV69bp+iYf
saH1DvXIfPpNp93zGKUSXxEj4w881t2zAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIB
BjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBQ4lVcPNCNO86EmILoUkcdBiB2j
WzANBgkqhkiG9w0BAQsFAAOCAQEAjeKZo+4xd05TFtq99nKnWA0J+DmydBOnPMwY
lDrKfBKe2wVu5AJMvRjgJIoY/CHVPaCOWH58UTqfji95eUaryQ/s36RKrBgMMlwr
WNItxE625PHuaN6EjD1WdWiRMZ2hy8F4FCKz5hgUEvN+PUNZwsPnpU6q3Ay0+11T
4TriwCV8kJx3cWu0NvTypYCCXMscSfLFQR13bo+1z6XNm30SecmrxkmQBVMqjCZM
VvAxhxW1iGnYdPRQuNqt0xITzCSERqg3QVVqYnFJUkNVN6j0dmmMVKZh17HgqLnF
PKkmBlNQ9hQcNM3CSzVvEAK0CCEo/NJ/xzZ6WX1/f8Df1eXbFg==
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIEZzCCA0+gAwIBAgIJCmR1UkzYYXxiMA0GCSqGSIb3DQEBCwUAMC0xDjAMBgNV
BAoTBUNpc2NvMRswGQYDVQQDExJDaXNjbyBSb290IENBIDIwOTkwIBcNMTYwODEx
MjAyODA4WhgPMjA5OTA4MDkyMDU4MjdaMDExHzAdBgNVBAMTFkhpZ2ggQXNzdXJh
bmNlIFNVREkgQ0ExDjAMBgNVBAoTBUNpc2NvMIIBIjANBgkqhkiG9w0BAQEFAAOC
AQ8AMIIBCgKCAQEAvdzeSWdDI6lRZDYRvA6JqaRvQyy6Dx1WaqI82UeKR4ZRn0ef
xMGvp4c88/VMS8WSjQO1qolMfMxqHkcSiFBOULx6Trquw4TrEf9sIuzvgJvDaEa8
IllXPwtPtNqZEIWi8jlinz2uGam93KuGPcioHfruzbDKWHL/HWFGYMgz+OKwhD3J
4NRySknQvUovfV8eWLeVOqW8rbnG3TZxv5VexOiK4jL3ObvsQPuAWUwUoo7nuFlE
GTG/VCeyCe/H8+afIScbZOkI9xejtckflnBYFVCyFxzm2H3YZatb6ohbyRXLtOPj
T3SJ+OOoYMlSLd28z727LpRbFFLGYhyWxEXDuQIDAQABo4IBgjCCAX4wDgYDVR0P
AQH/BAQDAgEGMBIGA1UdEwEB/wQIMAYBAf8CAQAwfwYIKwYBBQUHAQEEczBxMEEG
CCsGAQUFBzAChjVodHRwczovL3d3dy5jaXNjby5jb20vc2VjdXJpdHkvcGtpL2Nl
cnRzL2NyY2EyMDk5LmNlcjAsBggrBgEFBQcwAYYgaHR0cDovL3BraWN2cy5jaXNj
by5jb20vcGtpL29jc3AwHwYDVR0jBBgwFoAUOJVXDzQjTvOhJiC6FJHHQYgdo1sw
UgYDVR0gBEswSTBHBgorBgEEAQkVAR4AMDkwNwYIKwYBBQUHAgEWK2h0dHA6Ly93
d3cuY2lzY28uY29tL3NlY3VyaXR5L3BraS9wb2xpY2llcy8wQwYDVR0fBDwwOjA4
oDagNIYyaHR0cDovL3d3dy5jaXNjby5jb20vc2VjdXJpdHkvcGtpL2NybC9jcmNh
MjA5OS5jcmwwHQYDVR0OBBYEFOpro7nBE5d+G/s6jWhgBzlfh0j6MA0GCSqGSIb3
DQEBCwUAA4IBAQBcqYEOgAHhGWKndwM901XX2Enh4hjXR5avDg7G/f6Tb9H509dt
QW+AeZGEghhwUrw1EeG79tHkncAe+m+64xMC1ttyI1RSyn8rBqQYkXnnCRbtF/Nw
pQe5fjvdeIFWJhUI16TOt/ZlkNnWnLsUU1alZmN+J/FhSr8VTJWGRM9gY8hefH8f
5U7LMiDXxsFVHB7R6KGNjvtawrl6W6RKp2dceGxEIIvMahgMWWHHiWOQAOtVrHuE
NEjYR/7klLLwdgQF/NNCA2z47pSfMFnBcr8779GqVIbBTpOP2E6+1pBrE2jBNNoc
uBG1fgvh1qtJUdBbTziAKNoCo4sted6PW2/U
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIEITCCAwmgAwIBAgIKBgEgAwc2RDFGxTANBgkqhkiG9w0BAQsFADAxMR8wHQYD
VQQDExZIaWdoIEFzc3VyYW5jZSBTVURJIENBMQ4wDAYDVQQKEwVDaXNjbzAgFw0y
MjA4MDExMDEwMDhaGA8yMDk5MDgwOTIwNTgyNlowYjEoMCYGA1UEBRMfUElEOkMx
MjAwLTE2UC0yRyBTTjpEVFkyNjMxMDAxNTEOMAwGA1UEChMFQ2lzY28xETAPBgNV
BAsTCFRQTSBTVURJMRMwEQYDVQQDEwpMSUdIVFNBQkVSMIIBIjANBgkqhkiG9w0B
AQEFAAOCAQ8AMIIBCgKCAQEAxHlUxYHK+BoQ3N7sL2u0Tgc3aJuJGnfJbrMHtow3
S8EmyyebeZpdWbfpn/zFH8TC3J9cr1NA4EvYi1Qli9ioSuBlLTjDujhAIPVqZnmy
cEDjDG0QI2xPYz+nL83ULkYWWTejarfz4jIPYb9po1veMavEqcEtBQHmPAlbzZyL
adRSrj32ph+XlnZ8BKU1BzXq52zcXsz2fICd0evw4O9f2LOMTvzMkn/i8dLx4gy1
oP95/EgJLgTydtpZyuA8TG9fy23qrWdJJzM+ZS+6cYrl20Eu7j5t5oN3IfAYxMwk
1MRaR+Ft5QWgK/ZBvAd3emelLB7K48h/nxKBLrtD6aobiQIDAQABo4IBBjCCAQIw
DgYDVR0PAQH/BAQDAgXgMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgwFoAU6mujucET
l34b+zqNaGAHOV+HSPowgaEGA1UdEQSBmTCBlqBQBgorBgEEAQkVAwQCoEITQDFG
OTlBMDQ5Qzk1MjgxRjU1RjhBNjhBNzJFMjA0OURCQzgyOTAwNjREMjUzMjdEMUI3
RDkzQ0IxNDc3MzdBMTmgQgYJKwYBBAEJFQIDoDUTM0NoaXBJRD1Vd0lDQUFBQUFB
QUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQkh3PTAdBgNVHQ4EFgQUDyWO
Gy2I7j1nREZxpDmwbA5+hcQwDQYJKoZIhvcNAQELBQADggEBAA2KBFfaQf5kFaMJ
DJtGTyMNfu0hYjELDCwMK04iepo1w8bg9Rlb25LXYX+Rkk1/ZlIo3wLmRYNIddow
NQbJwt8Ch27kYyjnHcBWgz/M/DWOfKgEpNlS/Lw3ssLiAN67Y4dqUycUq7QVwG/I
zHO8oMu4sWjarkpiMTibJbw6w5PbJhd8meHoaJA1AV0pNKASvsIKoCZI1cRP/RFZ
dnRMM9LQUqeVob9hn5WRQ5PrweuALXMkUpmqeHsxSxa0M9w2u7dDYq/oeGZuUk93
9JaBqW4nwZ50MkwK9qLzYFzR5HD+YfJup22DoSdXZhO+gz4MzVCqDp5zsEyDPZl6
XLN5ZZ4=
-----END CERTIFICATE-----

Cisco Business Switches 350 Series CLI Guide

1340

System Management Commands

show platform certificate

Example 2: The following example displays the SUDI certificate chain with a signature over the certificates
using a nonce of 12345:

switchxxxxxx# show platform sudi certificate sign nonce 12345
-----BEGIN CERTIFICATE-----MIIDITCCAgmgAwIBAgIJAZozWHjOFsHBMA0GCSqGSIb3DQEBCwUAMC0xDjAMBgNV
BAoTBUNpc2NvMRswGQYDVQQDExJDaXNjbyBSb290IENBIDIwOTkwIBcNMTYwODA5
MjA1ODI4WhgPMjA5OTA4MDkyMDU4MjhaMC0xDjAMBgNVBAoTBUNpc2NvMRswGQYD
VQQDExJDaXNjbyBSb290IENBIDIwOTkwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw
ggEKAoIBAQDTtuM1fg0+9Gflik4axlCK1I2fb3ESCL8+tk8kOXlhfrJ/zlfRbe60
xRP0iUGMKWKBj0IvvWFf4AW/nyzCR8ujTt4a11Eb55SAKXbXYQ7L4YMg+lmZmg/I
v3GJEc3HCYU0BsY8g9LuLMvqwiNmAwM2jWzNq0EPArt/F6RiQKq6Ta3e7VIfDZ7J
65OA2xASA2FrSe9Vj97KpQReDcm6G7cqFH5f+CrdQ4qwAa4zWNyM3kOpUb637DNd
9m+n6WECyc/IUD+2e+yp21kBZIKH7JvDpu2U7NBPfr52mFX8AfCZgkXV69bp+iYf
saH1DvXIfPpNp93zGKUSXxEj4w881t2zAgMBAAGjQjBAMA4GA1UdDwEB/wQEAwIB
BjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBQ4lVcPNCNO86EmILoUkcdBiB2j
WzANBgkqhkiG9w0BAQsFAAOCAQEAjeKZo+4xd05TFtq99nKnWA0J+DmydBOnPMwY
lDrKfBKe2wVu5AJMvRjgJIoY/CHVPaCOWH58UTqfji95eUaryQ/s36RKrBgMMlwr
WNItxE625PHuaN6EjD1WdWiRMZ2hy8F4FCKz5hgUEvN+PUNZwsPnpU6q3Ay0+11T
4TriwCV8kJx3cWu0NvTypYCCXMscSfLFQR13bo+1z6XNm30SecmrxkmQBVMqjCZM
VvAxhxW1iGnYdPRQuNqt0xITzCSERqg3QVVqYnFJUkNVN6j0dmmMVKZh17HgqLnF
PKkmBlNQ9hQcNM3CSzVvEAK0CCEo/NJ/xzZ6WX1/f8Df1eXbFg==
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIEZzCCA0+gAwIBAgIJCmR1UkzYYXxiMA0GCSqGSIb3DQEBCwUAMC0xDjAMBgNV
BAoTBUNpc2NvMRswGQYDVQQDExJDaXNjbyBSb290IENBIDIwOTkwIBcNMTYwODEx
MjAyODA4WhgPMjA5OTA4MDkyMDU4MjdaMDExHzAdBgNVBAMTFkhpZ2ggQXNzdXJh
bmNlIFNVREkgQ0ExDjAMBgNVBAoTBUNpc2NvMIIBIjANBgkqhkiG9w0BAQEFAAOC
AQ8AMIIBCgKCAQEAvdzeSWdDI6lRZDYRvA6JqaRvQyy6Dx1WaqI82UeKR4ZRn0ef
xMGvp4c88/VMS8WSjQO1qolMfMxqHkcSiFBOULx6Trquw4TrEf9sIuzvgJvDaEa8
IllXPwtPtNqZEIWi8jlinz2uGam93KuGPcioHfruzbDKWHL/HWFGYMgz+OKwhD3J
4NRySknQvUovfV8eWLeVOqW8rbnG3TZxv5VexOiK4jL3ObvsQPuAWUwUoo7nuFlE
GTG/VCeyCe/H8+afIScbZOkI9xejtckflnBYFVCyFxzm2H3YZatb6ohbyRXLtOPj
T3SJ+OOoYMlSLd28z727LpRbFFLGYhyWxEXDuQIDAQABo4IBgjCCAX4wDgYDVR0P
AQH/BAQDAgEGMBIGA1UdEwEB/wQIMAYBAf8CAQAwfwYIKwYBBQUHAQEEczBxMEEG
CCsGAQUFBzAChjVodHRwczovL3d3dy5jaXNjby5jb20vc2VjdXJpdHkvcGtpL2Nl
cnRzL2NyY2EyMDk5LmNlcjAsBggrBgEFBQcwAYYgaHR0cDovL3BraWN2cy5jaXNj
by5jb20vcGtpL29jc3AwHwYDVR0jBBgwFoAUOJVXDzQjTvOhJiC6FJHHQYgdo1sw
UgYDVR0gBEswSTBHBgorBgEEAQkVAR4AMDkwNwYIKwYBBQUHAgEWK2h0dHA6Ly93
d3cuY2lzY28uY29tL3NlY3VyaXR5L3BraS9wb2xpY2llcy8wQwYDVR0fBDwwOjA4
oDagNIYyaHR0cDovL3d3dy5jaXNjby5jb20vc2VjdXJpdHkvcGtpL2NybC9jcmNh
MjA5OS5jcmwwHQYDVR0OBBYEFOpro7nBE5d+G/s6jWhgBzlfh0j6MA0GCSqGSIb3
DQEBCwUAA4IBAQBcqYEOgAHhGWKndwM901XX2Enh4hjXR5avDg7G/f6Tb9H509dt
QW+AeZGEghhwUrw1EeG79tHkncAe+m+64xMC1ttyI1RSyn8rBqQYkXnnCRbtF/Nw
pQe5fjvdeIFWJhUI16TOt/ZlkNnWnLsUU1alZmN+J/FhSr8VTJWGRM9gY8hefH8f
5U7LMiDXxsFVHB7R6KGNjvtawrl6W6RKp2dceGxEIIvMahgMWWHHiWOQAOtVrHuE
NEjYR/7klLLwdgQF/NNCA2z47pSfMFnBcr8779GqVIbBTpOP2E6+1pBrE2jBNNoc
uBG1fgvh1qtJUdBbTziAKNoCo4sted6PW2/U
-----END CERTIFICATE-----
-----BEGIN CERTIFICATE-----
MIIEITCCAwmgAwIBAgIKBgEgAwc2RDFGxTANBgkqhkiG9w0BAQsFADAxMR8wHQYD
VQQDExZIaWdoIEFzc3VyYW5jZSBTVURJIENBMQ4wDAYDVQQKEwVDaXNjbzAgFw0y
MjA4MDExMDEwMDhaGA8yMDk5MDgwOTIwNTgyNlowYjEoMCYGA1UEBRMfUElEOkMx
MjAwLTE2UC0yRyBTTjpEVFkyNjMxMDAxNTEOMAwGA1UEChMFQ2lzY28xETAPBgNV
BAsTCFRQTSBTVURJMRMwEQYDVQQDEwpMSUdIVFNBQkVSMIIBIjANBgkqhkiG9w0B
AQEFAAOCAQ8AMIIBCgKCAQEAxHlUxYHK+BoQ3N7sL2u0Tgc3aJuJGnfJbrMHtow3
S8EmyyebeZpdWbfpn/zFH8TC3J9cr1NA4EvYi1Qli9ioSuBlLTjDujhAIPVqZnmy
cEDjDG0QI2xPYz+nL83ULkYWWTejarfz4jIPYb9po1veMavEqcEtBQHmPAlbzZyL
adRSrj32ph+XlnZ8BKU1BzXq52zcXsz2fICd0evw4O9f2LOMTvzMkn/i8dLx4gy1
oP95/EgJLgTydtpZyuA8TG9fy23qrWdJJzM+ZS+6cYrl20Eu7j5t5oN3IfAYxMwk
1MRaR+Ft5QWgK/ZBvAd3emelLB7K48h/nxKBLrtD6aobiQIDAQABo4IBBjCCAQIw
DgYDVR0PAQH/BAQDAgXgMAwGA1UdEwEB/wQCMAAwHwYDVR0jBBgwFoAU6mujucET
l34b+zqNaGAHOV+HSPowgaEGA1UdEQSBmTCBlqBQBgorBgEEAQkVAwQCoEITQDFG
OTlBMDQ5Qzk1MjgxRjU1RjhBNjhBNzJFMjA0OURCQzgyOTAwNjREMjUzMjdEMUI3
RDkzQ0IxNDc3MzdBMTmgQgYJKwYBBAEJFQIDoDUTM0NoaXBJRD1Vd0lDQUFBQUFB

Cisco Business Switches 350 Series CLI Guide

1341

show platform certificate

System Management Commands

QUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQkh3PTAdBgNVHQ4EFgQUDyWO
Gy2I7j1nREZxpDmwbA5+hcQwDQYJKoZIhvcNAQELBQADggEBAA2KBFfaQf5kFaMJ
DJtGTyMNfu0hYjELDCwMK04iepo1w8bg9Rlb25LXYX+Rkk1/ZlIo3wLmRYNIddow
NQbJwt8Ch27kYyjnHcBWgz/M/DWOfKgEpNlS/Lw3ssLiAN67Y4dqUycUq7QVwG/I
zHO8oMu4sWjarkpiMTibJbw6w5PbJhd8meHoaJA1AV0pNKASvsIKoCZI1cRP/RFZ
dnRMM9LQUqeVob9hn5WRQ5PrweuALXMkUpmqeHsxSxa0M9w2u7dDYq/oeGZuUk93
9JaBqW4nwZ50MkwK9qLzYFzR5HD+YfJup22DoSdXZhO+gz4MzVCqDp5zsEyDPZl6XLN5ZZ4=
-----END CERTIFICATE-----
Signature version: 1
Signature:
6ca45d415eace3b6cc09d84026dfcb4d1fbf614c319d3d28a3b924f6f432b26254aeca9c22aa150c
cfadd78bf2c4326d89f863eb52893e2cf3b9ddcd6d1f8ff00ea5830eec1281446c5ab5c92eee0030
6d25a1c75a6b0deaf9fee88b2b62d5e341bbe2fdbfb4cf4b5720d74f4e63f16c2012baadb5251a9d
bc871c4977335b8152715a95b48003d139e9e7e19fb7aa84f62e1a8c0e007a15f2a312c839b96170
e05e58a0e0f9ee78a28ffc9ddeb73fc7fdde0cbb556fa17aeb0d984bb4afa435fe40599de1c222bd
d132112ecb23ea1ca7ea78b40b2fb39d04867c05b0a7965e2180ba79688da06864be541f4956db96
3e48ad26f817bb56465f11e5ff89e128

Cisco Business Switches 350 Series CLI Guide

1342

System Management Commands

show reload

show reload

To display whether there is a pending reload for status of the device, use the show reload Privileged EXEC
mode command.

Syntax

show reload

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

User Guidelines

You can use this command to display a pending software reload. To cancel a pending reload, use this command
with the cancel parameter.

Example

The following example displays that reboot is scheduled for 00:00 on Saturday, April-20.

switchxxxxxx> show reload
Reload scheduled for 00:00:00 UTC Sat April 20 (in 3 hours and 12 minutes)

Cisco Business Switches 350 Series CLI Guide

1343

show sessions

show sessions

To display open Telnet sessions, use the show sessions User EXEC mode command.

System Management Commands

Syntax

show sessions

Parameters

This command has no arguments or keywords.

Default Usage

None

Command Mode

User EXEC mode

User Guidelines

The show sessions command displays Telnet sessions to remote hosts opened by the current Telnet session
to the local device. It does not display Telnet sessions to remote hosts opened by other Telnet sessions to the
local device.

Example

The following example displays open Telnet sessions.

switchxxxxxx> show sessions

Connection
----------
1
2

Host
-------------
Remote router
172.16.1.2

Address
----------
172.16.1.1
172.16.1.2

Port
-----
23
23

Byte
----
89
8

The following table describes significant fields shown above.

Field

Description

Connection

The connection number.

Host

The remote host to which the device is connected through a
Telnet session.

Address

The remote host IP address.

Port

Byte

The Telnet TCP port number.

The number of unread bytes for the user to see on the
connection.

Cisco Business Switches 350 Series CLI Guide

1344

System Management Commands

show software versions

show software versions

To display system software version information use the following, show software versions Privileged EXEC
mode command.

Syntax

show software versions [unit unit-id] [detailed]

Parameters

• Detailed - (optional) Display additional software version also related to BootRom booton, CPLD, PoE

controller, OpenSSH and OpenSSL.

Defaults

Displays the following software version info - image, bootloader and kernel.

Command Mode

Privileged EXEC mode

User Guidelines

The show software versions command displays the version information of device image, BootRom, booton,
bootloader and kernel as well as relevant software modules.

Examples

Example 1: The following example displays basic device software version information:

switchxxxxxx# show software versions

Active-image version:

1.2.3.4

In-active-image version:

5.6.7.8 (active after reboot)

Kernel version:

Linux 3.10.70

Unit 1 Bootloader version:

U-Boot 2013.01 (Sep 02 2018 - 00:32:52)

Example 2: The following example displays detailed device software version information

switchxxxxxx# show software versions detailed

Active-image version:

1.2.3.4

In-active-image version:

5.6.7.8 (active after reboot)

Kernel version:

OpenSSL version:

OpenSSH version:

Linux 3.10.70

1.1.0b

7.3p1

Cisco Business Switches 350 Series CLI Guide

1345

show software versions

System Management Commands

BootRom version:

Booton version:

1.20

6.13

Bootloader version:

U-Boot 2013.01 (Sep 02 2018 - 00:32:52)

CPLD version:

9.29

PoE controller version:

21.190.18.3

Cisco Business Switches 350 Series CLI Guide

1346

System Management Commands

show system

show system

Use the show system User EXEC mode command to display system information.

Syntax

show system [unit unit-id]

Parameters

unit-id—Specifies the unit number. (Range: 1 – 4)

Command Mode

User EXEC mode

User Guidelines

Use the show system command to display system information.

The System MAC address output displays device base MAC address (not configurable by user).

The System Object ID output displays the unique System Object ID (not configurable by user).

The fan output displays, per each unit, the device fan(s) status summary. The value of fail

indicates that one or more of the fans is not functioning properly. To view specific

status per each fan in device use the command show system fans, on page 1354.
The sensor and temperature output displays, per each unit, the temperature level and general
status of all sensors. The value of fail for sensors indicates one ore more sensors are
not functioning propery. To view per sensor status, temperature read and threshold levels,

use command show system sensors, on page 1356.

Example 1: The following example displays system information of a stack .

Type

switch151400

CBS350-48P-4X
03,02:27:46

switchxxxxxx# show system
System Description:
System Up Time (days,hour:min:sec):
System Contact:
System Name:
System Location:
System MAC Address:
System Object ID:
Unit
---- -----------------
1
2
Unit Fans Status
---- -----------
1
2
Unit
Temperature Level
---- --------------------- -------------------------
1
2

OK
fail
Sensor Status

CBS350-48P-4X
CBS350-48P-4X

Warning
Warning

OK
Fail

00:24:ab:15:14:00

1.3.6.1.4.1.9.6.1.1006.48.5

Example 2: The following examples displays system information for unit 2 in a stack.

switchxxxxxx# show system unit 2
System Description:
xxxx
System Up Time (days,hour:min:sec): 08,23:03:46

Cisco Business Switches 350 Series CLI Guide

1347

show system

System Management Commands

System Contact:
System Name:
System Location:
System MAC Address:
System Object ID:
Fans Status:
#Editor: For systems with no temperature sensors, the temperature in the following line
will be blank and the Status will be N/A
Unit
----
2

00:99:88:66:33:33
1.3.6.1.4.1.674.10895.3031

Temperature Level
-------------------------

---------------------

Sensor Status

Critical

Fail

OK

Cisco Business Switches 350 Series CLI Guide

1348

System Management Commands

show system languages

show system languages

To display the list of supported languages, use the show system languages User EXEC mode command.

Syntax

show system languages

Parameters

This command has no arguments or keywords.

Default Usage

None

Command Mode

User EXEC mode

Example

The following example displays the languages configured on the device. Number of Sections indicates the
number of languages permitted on the device.

switchxxxxxx> show system languages

Language Name

Unicode Name

Code

--------------- -------------- ------

English
Japanese

English
µùÑµ£¼F¬P

en-US
ja-JP

Cisco Business Switches 350 Series CLI Guide

1349

show system tcam utilization

System Management Commands

show system tcam utilization

To display the Ternary Content Addressable Memory (TCAM) utilization, use the show system tcam utilization
EXEC mode command.

Syntax

show system tcam utilization[unit unit-id]

Parameters

unit-id—(Optional) Specifies the unit number. (Range: 1–4)

Default Usage

None

Command Mode

User EXEC mode

Example

The following example displays TCAM utilization information.

switchxxxxxx> show system tcam utilization

System: 75%

Unit
----
1
2

TCAM utilization [%]
--------------------
58
57

Cisco Business Switches 350 Series CLI Guide

1350

System Management Commands

show services tcp-udp

show services tcp-udp

To display information about the active TCP and UDP services, use the show services tcp-udp Privileged
EXEC mode command.

Syntax

show services tcp-udp

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

User Guidelines

The output does not show sessions where the device is a TCP/UDP client.

Examples

switchxxxxxx> show services tcp-udp
Remote IP address
Type Local IP Address
----- ----------------- ------------------- ------------ - -----------
TCP All:22
TCP All:23
TCP All:80
TCP All:443
TCP 172.16.1.1:23
TCP6 All-23
TCP6 fe80::200:b0ff:fe00:0-23
fe80::200:b0ff:fe00:0-8999

SSH
Telnet
HTTP

172.16.1.18:8789

Service Name

ESTABLISHED

LISTEN

Telnet

Telnet

Telnet

LISTEN

LISTEN

LISTEN

LISTEN

HTTPS

ESTABLISHED

State

UDP All:161
UDP6 A ll-161

SNMP

SNMP

Cisco Business Switches 350 Series CLI Guide

1351

show tech-support

System Management Commands

show tech-support

To display system and configuration information that can be provided to the Technical Assistance Center
when reporting a problem, use the show tech-support User EXEC mode command.

Syntax

show tech-support [config | memory ]

Parameters

• memory—(Optional) Displays memory and processor state data.

• config—(Optional) Displays switch configuration within the CLI commands supported on the device.

Default Configuration

By default, this command displays the output of technical-support-related show commands. Use keywords
to specify the type of information to be displayed. If you do not specify any parameters, the system displays
all configuration and memory data.

Command Types

Switch command.

Command Mode

User EXEC mode

User Guidelines

Caution: Avoid running multiple show tech-support commands on a switch or multiple switches on the
network segment. Doing so may cause starvation of some time sensitive protocols, like STP.

The show tech-support command may time out if the configuration file output takes longer to display than
the configured session time out time. If this happens, enter a set logout timeout value of 0 to disable automatic
disconnection of idle sessions or enter a longer timeout value.

The show tech-support command output is continuous, meaning that it does not display one screen at a time.
To interrupt the output, press Esc.

If the user specifies the memory keyword, the show tech-support command displays the following output:

• Flash info (dir if exists, or flash mapping)

• Output of command show bootvar

• Buffers info (like print os buff)

• Memory info (like print os mem)

• Proc info (like print OS tasks)

• Versions of software components

Cisco Business Switches 350 Series CLI Guide

1352

System Management Commands

show tech-support

• Output of command show cpu utilization

Cisco Business Switches 350 Series CLI Guide

1353

show system fans

System Management Commands

show system fans

To view the status of the fans on the device, use the show system fans User EXEC mode command.

Syntax

show system fans [unit-id]

Parameters

unit-id—(Optional) Specifies the unit number to be reloaded. (Range: 1 – 4). If unspecified, displays information
for all the units.

Command Mode

User EXEC mode

User Guidelines

Use the show system fans command to display detailed information per fan. The following information will
be displayed:

• Per fan actual RPM.

• Per fan status - Possible values are: OK, fail; read fail; .

Examples

Display for units whose hardware supports variable fan speed.

switchxxxxxx> show system fans

Unit ID: 1

Unit/fan ID

=========

1/1

1/2

1/3

1/4

Unit ID: 2

Unit/fan ID

=========

2/1

Fan Actual Speed (RPM)
=====

Fan Status =======

6000

NA

NA

4000

OK

Fail

Read fail

OK

Fan Actual Speed (RPM)
=====

Fan Status =======

8000

OK

Cisco Business Switches 350 Series CLI Guide

1354

System Management Commands

show system fans

2/2

2/3

Unit ID: 3

Unit/fan ID

=========

3/1

3/2

3/3

8000

8000

OK

OK

Fan Actual Speed (RPM)
=====

Fan Status =======

5000

4500

5000

OK

OK

OK

Display for devices that do not support display of fan speed:

switchxxxxxx> show system fans

Unit ID: 1

Unit/fan ID

=========

1/1

1/2

1/3

1/4

Unit ID: 2

Unit/fan ID

=========

2/1

2/2

2/3

Unit ID: 3

Unit/fan ID

=========

3/1

3/2

3/3

Fan Status =======

OK

Fail

Read fail

OK

Fan Status =======

OK

OK

OK

Fan Status =======

OK

OK

OK

Cisco Business Switches 350 Series CLI Guide

1355

show system sensors

System Management Commands

show system sensors

To view the temperature sensor status, use the show system sensors User EXEC mode command.

Syntax

show system sensors

Parameters

This command has no arguments or keywords.

Default Usage

None

Command Mode

User EXEC mode

User Guidelines

Use the show system sensors command to display detailed sensor information , per each device sensor.
Information is displayed per each unit in the stack.

The following information will be displayed:

• Sensor status.

• Sensor temperature reading

• Warning and Critical Alarm thresholds (temperature in Celsius)

• Location of specific sensor. Possible locations are: PP (Packet processor sensor); PCB (Sensor located

on the Printed board circuit); PHY (PHY sensor); POE (Poe chip sensor).

Examples

Display for Stack systems with multiple sensor statuses

switchxxxxxx> show system sensors

Unit/ Sensor

Sensor status

Temperature (C)

======

======

===========

Warning Alarm
Temp (C)
==========

Critical Alarm
Temp (C)
==========

Sensor Location

======

1/1

1/2

2/1

OK

Failure

OK

44

NA

65

50

65

60

65

75

70

PCB

PP

PHY

Cisco Business Switches 350 Series CLI Guide

1356

System Management Commands

show system id

show system id

To display the system identity information, use the show system id User EXEC mode command.

Syntax

show system id [unit unit-id]

Parameters

unit unit-id—(Optional) Unit number or all. If unspecified, defaults to all. (Range: 1 – 4 )

Command Mode

User EXEC mode

Example

The following example displays the system identity information.

switchxxxxxx> show system id
serial number 114

Cisco Business Switches 350 Series CLI Guide

1357

show ports leds configuration

System Management Commands

show ports leds configuration

To display whether the LEDs of the ports are enabled or disabled, use the show port leds configuration User
EXEC mode

command.

Syntax

show ports leds configuration

Parameters

This command has no arguments or keywords.

Command Mode

User EXEC mode

Example 1: The following example displays the status of the port’s LEDs when they are turned on.

switchxxxxxx> show ports leds configuration
Port leds are not disabled
x

Example 2: The following example displays the status of the port LEDs when they are turned off.

switchxxxxxx> show port leds configuration
Port leds are disabled

Cisco Business Switches 350 Series CLI Guide

1358

System Management Commands

show users

show users

To display information about the active users, use the show users User EXEC mode command.

Syntax

show users

Parameters

This command has no arguments or keywords.

Default Usage

None

Command Mode

User EXEC mode

Example

The following example displays information about the active users.

switchxxxxxx> show users

Username
----------
Bob
John
Robert
Betty
Sam

Protocol
-----------
Serial
SSH
HTTP
Telnet

Location
------------
172.16.0.1
172.16.0.8
172.16.1.7
172.16.1.6

Cisco Business Switches 350 Series CLI Guide

1359

show hardware version

System Management Commands

show hardware version

To display hardware version information, use the show hardware version User EXEC mode command.

Syntax

show hardware version [unit unit-id]

Parameters

• unit—(Optional) Specifies the unit number. (Range: 1 – 4 )

Default Usage

Show hardware version on all units if no unit is specified.

Command Mode

User EXEC mode

Example

The following example displays hardware version information.

switchxxxxxx> show hardware version
Unit
----
1
2

HW Version
------------

1.0.0
1.0.0.

Cisco Business Switches 350 Series CLI Guide

1360

System Management Commands

show hardware components

show hardware components

To display device hardware component information, use the show hardware components Privileged EXEC
mode command.

Syntax

show hardware components

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

User Guidelines

The show hardware components command displays information for device components such as packet
processor(s), CPU, flash, PHYs and other hardware components.

The information displayed per each component depends on the information available for that component.
Example for information that is displayed: vendor name, manufacturing part number (MPN), and HW reversion.

Examples

Example 1: The following example displays information on device hardware components:

switchxxxxxx# show hardware components

MAC info:

Unit ID/ MAC
ID -----------

1

2

CPU info:

Vendor -------

MPN ----

Revision ---------

Marvell

98DX3236

Marvell

98DX3336

A0

A0

Unit ID --------

Vendor --------

MPN ----

1

2

PHY info:

Unit ID/PHY ID
-----------

Marvell

Marvell

88F6820 (Armada ARMv7)

MV78230

Vendor -------

MPN ----

Revision ---------

1

Marvell

88E1680

A0

Cisco Business Switches 350 Series CLI Guide

1361

show hardware components

System Management Commands

2

2/1

Flash info:

Marvell

88E3222

Marvell

88E3680

NS

A0

Unit ID -------

Vendor ------

MPN ----

1

2

Micron

JS28F640J3D-75 (65536 Kbytes)

MXIC Macronix

MX30LF2G18AC-TI (65536 Kbytes)

Cisco Business Switches 350 Series CLI Guide

1362

System Management Commands

system light

system light

To light the networks port LEDs of a device, or of a specific unit in stack, use the system light EXEC mode
command.

Syntax

system light [unit unit-id] [duration seconds]

system light stop

Parameters

• unit-id—Specify unit number or if left blank, all will light up.

Note

Relevant for stackable models only.

• duration seconds—The number of seconds to light the LEDs. If unspecified, defaults to 60 seconds.

(Range: 5–3600)

• stop—Stop lighting the LEDs.

Command Mode

User EXEC mode

Example

The following example lights the system LED for 6 seconds.

switchxxxxxx> system light duration 65

Cisco Business Switches 350 Series CLI Guide

1363

system recovery

System Management Commands

system recovery

To set the system to automatically recover from temperature that reached the critical threshold, use the system
recovery Global Configuration mode command.

To return to disable automatic recovery, use the no form of the command.

Syntax

system recovery

no system recovery

Parameters

This command has no arguments or keywords.

Default Configuration

System recovery is enabled by default.

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# no system recovery

Cisco Business Switches 350 Series CLI Guide

1364

System Management Commands

system reset-button disable

system reset-button disable

Use the system reset-button disable Global Configuration mode command to disable the reset functionality
of the device reset button. To re-enable the reset button functionality use the no form of the command.

Syntax

system reset-button disable

no system reset-button disable

Parameters

This command has no arguments or keywords.

Default Configuration

By default the device reset button functionality is enabled.

Command Mode

Global Configuration mode

User Guidelines

Use the system reset-button disable command to disable the reset functionality of the device reset button.
When this command is applied the device will not reload or reset to factory default even if the reset button is
pressed. This is useful to prevent unwanted device reload or setting to factory defaults due to accidental
pressing of the button.

If the reset button has other functionalities, besides reload and reset to factory default, they will not be effected
by this setting.

Use the no form of command to re-activate the reset button and allow device reload and reset to factory default
by pressing the button.

Examples

switchxxxxxx(config)# system reset-button disable

Cisco Business Switches 350 Series CLI Guide

1365

system reset-button disable

System Management Commands

Cisco Business Switches 350 Series CLI Guide

1366

TACACS+ Commands

This chapter contains the following sections:

• tacacs-server host, on page 1368
• tacacs-server host source-interface, on page 1370
• tacacs-server host source-interface-ipv6, on page 1371
• tacacs-server key, on page 1372
• tacacs-server timeout, on page 1373
• show tacacs, on page 1374
• show tacacs key, on page 1375

Cisco Business Switches 350 Series CLI Guide

1367

tacacs-server host

TACACS+ Commands

tacacs-server host

To specify a TACACS+ host, use the tacacs-server host Global Configuration mode command. To delete
the specified TACACS+ host, use the no form of this command.

Syntax

tacacs-server host {ip-address | hostname} [single-connection] [port port-number] [timeout timeout] [key
key-string] [priority priority]

encrypted tacacs-server host {ip-address | hostname} [single-connection] [port port-number] [timeout
timeout] [key encrypted-key-string] [priority priority]

no tacacs-server host {ip-address | hostname}

Parameters

• host ip-address—Specifies the TACACS+ server host IP address. The IP address can be an IPv4, IPv6

or IPv6z address.

• host hostname—Specifies the TACACS+ server host name. (Length: 1-158 characters. Maximum label

length of each part of the host name: 63 characters)

• single-connection—(Optional) Specifies that a single open connection is maintained between the device
and the daemon, instead of the device opening and closing a TCP connection to the daemon each time
it communicates.

• port port-number—(Optional) Specifies the TACACS server TCP port number. If the port number is 0,

the host is not used for authentication. (Range : 0-65535)

• timeout timeout—(Optional) Specifies the timeout value in seconds. (Range: 1-30)

• key key-string—(Optional) Specifies the authentication and encryption key for all TACACS+

communications between the device and the TACACS+ server. This key must match the encryption used
on the TACACS+ daemon. To specify an empty string, enter "". (Length: 0-128 characters). If this
parameter is omitted, the globally-defined key will be used.

• key encrypted-key-string—(Optional) Same as key-string, but the key is in encrypted format.

• priority priority—(Optional) Specifies the order in which the TACACS+ servers are used, where 0 is

the highest priority. (Range: 0-65535)

Default Configuration

No TACACS+ host is specified.

The default port-number is 1812.

If timeout is not specified, the global value (set in the tacacs-server timeout command) is used.

If key-string is not specified, the global value (set in the tacacs-server key command) is used.

Command Mode

Global Configuration mode

Cisco Business Switches 350 Series CLI Guide

1368

TACACS+ Commands

tacacs-server host

User Guidelines

Multiple tacacs-server host commands can be used to specify multiple hosts.

Example

The following example specifies a TACACS+ host.

switchxxxxxx(config)# tacacs-server host 172.16.1.1

Cisco Business Switches 350 Series CLI Guide

1369

tacacs-server host source-interface

TACACS+ Commands

tacacs-server host source-interface

To specify the source interface which IPv4 address will be used as the Source IPv4 address for communication
with IPv4 TACACS+ servers, use the tacacs-server host source-interface Global Configuration mode
command. To restore the default configuration, use the no form of this command.

Syntax

tacacs-server host source-interface interface-id

no tacacs-server host source-interface

Parameters

• interface-id—Specifies the source interface.

Default Configuration

The source IPv4 address is the IPv4 address defined on the outgoing interface and belonging to next hop IPv4
subnet.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface, the interface IP address belonging to next hop IPv4 subnet is
applied.

If the source interface is not the outgoing interface, the minimal IPv4 address defined on the source interface
is applied.

If there is no available IPv4 source address, a SYSLOG message is issued when attempting to communicate
with an IPv4 TACACS+ server.

OOB cannot be defined as a source interface.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# tacacs-server host source-interface vlan 100

Cisco Business Switches 350 Series CLI Guide

1370

TACACS+ Commands

tacacs-server host source-interface-ipv6

tacacs-server host source-interface-ipv6

To specify the source interface whose IPv6 address will be used as the Source IPv6 address for communication
with IPv6 TACACS+ servers, use the tacacs-server host source-interface-ipv6 Global Configuration mode
command. To restore the default configuration, use the no form of this command.

Syntax

tacacs-server host source-interface-ipv6 interface-id

no tacacs-server host source-interface-ipv6

Parameters

• interface-id—Specifies the source interface.

Default Configuration

The IPv6 source address is the IPv6 address defined on the outgoing interface and selected in accordance with
RFC6724.

Command Mode

Global Configuration mode

User Guidelines

If the source interface is the outgoing interface, the source IPv6 address is an IPv6 address defined on the
interfaces and selected in accordance with RFC 6724.

If the source interface is not the outgoing interface, the source IPv6 address is the minimal IPv6 address
defined on the source interface and matched to the scope of the destination IPv6 address is applied.

If there is no available source IPv6 address, a SYSLOG message is issued when attempting to communicate
with an IPv6 TACACS+ server.

Example

The following example configures the VLAN 10 as the source interface.

switchxxxxxx(config)# tacacs-server host source-interface-ipv6 vlan 100

Cisco Business Switches 350 Series CLI Guide

1371

tacacs-server key

TACACS+ Commands

tacacs-server key

To set the authentication encryption key used for all TACACS+ communications between the device and the
TACACS+ daemon, use the tacacs-server key Global Configuration mode command. To disable the key,
use the no form of this command.

Syntax

tacacs-server key key-string

encrypted tacacs-server key encrypted-key-string

no tacacs-server key

Parameters

• key-string—Specifies the authentication and encryption key for all TACACS+ communications between
the device and the TACACS+ server. This key must match the encryption used on the TACACS+ daemon.
(Length: 0–128 characters)

• encrypted-key-string—Same as key-string, but the key is in encrypted format.

Default Configuration

The default key is an empty string.

Command Mode

Global Configuration mode

Example

The following example sets Enterprise as the authentication key for all TACACS+ servers.

switchxxxxxx(config)# tacacs-server key enterprise

Cisco Business Switches 350 Series CLI Guide

1372

TACACS+ Commands

tacacs-server timeout

tacacs-server timeout

To set the interval during which the device waits for a TACACS+ server to reply, use the tacacs-server
timeout Global Configuration mode command. To restore the default configuration, use the no form of this
command.

Syntax

tacacs-server timeout timeout

no tacacs-server timeout

Parameters

• timeout—Specifies the timeout value in seconds. (Range: 1-30).

Default Configuration

The default timeout value is 5 seconds.

Command Mode

Global Configuration mode

Example

The following example sets the timeout value to 30 for all TACACS+ servers.

switchxxxxxx(config)# tacacs-server timeout 30

Cisco Business Switches 350 Series CLI Guide

1373

show tacacs

show tacacs

TACACS+ Commands

To display configuration and statistical information for a TACACS+ server, use the show tacacs Privileged
EXEC mode command.

Syntax

show tacacs [ip-address]

Parameters

• ip-address—Specifies the TACACS+ server name, IPv4 or IPv6 address.

Default Configuration

If ip-address is not specified, information for all TACACS+ servers is displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays configuration and statistical information for all TACACS+ servers

switchxxxxxx# show tacacs

IP address Status Port Single Time Priority

Connection Out

--------- --------- ---- --------- ------ --------

172.16.1.1 Connected 49 No Global 1

Global values
-------------
Time Out: 3
Source IPv4 interface: vlan 120
Source IPv6 interface: vlan 10

Cisco Business Switches 350 Series CLI Guide

1374

TACACS+ Commands

show tacacs key

show tacacs key

To display the configured key of the TACACS+ server, use the show tacacs key Privileged EXEC mode
command.

Syntax

show tacacs key [ip-address]

Parameters

• ip-address—Specifies the TACACS+ server name or IP address.

Default Configuration

If ip-address is not specified, information for all TACACS+ servers is displayed.

Command Mode

Privileged EXEC mode

Example

The following example displays configuration and statistical information for all TACACS+ servers.

switchxxxxxx# show tacacs key

IP address
----------
172.16.1.1
172.16.1.2

Key (Encrypted)
---------------
1238af77aaca17568f1298cced165fec
1238af77aaca17568f12988601fcabed

Global key (Encrypted)
----------------------
1238af77aaca17568f1298bc5476ddad

Cisco Business Switches 350 Series CLI Guide

1375

show tacacs key

TACACS+ Commands

Cisco Business Switches 350 Series CLI Guide

1376

Telnet, SSH and Slogin Commands

This chapter contains the following sections:

• ip telnet server, on page 1378
• ip SSH logging, on page 1379
• ip ssh server, on page 1380
• ip ssh port, on page 1381
• ip ssh password-auth, on page 1382
• ip ssh pubkey-auth, on page 1383
• crypto key pubkey-chain ssh, on page 1385
• user-key, on page 1386
• key-string, on page 1387
• show ip ssh, on page 1389
• show crypto key pubkey-chain ssh, on page 1390

Cisco Business Switches 350 Series CLI Guide

1377

ip telnet server

ip telnet server

Telnet, SSH and Slogin Commands

Use the ip telnet server Global Configuration mode command to enable the device as a Telnet server that
accepts connection requests from remote Telnet clients. Remote Telnet clients can configure the device through
the Telnet connections.

Use the no form of this command to disable the Telnet server functionality on the device.

Syntax

ip telnet server

no ip telnet server

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

The device can be enabled to accept connection requests from both remote SSH and Telnet clients. It is
recommended that the remote client connects to the device using SSH (as opposed to Telnet), since SSH is a
secure protocol and Telnet is not. To enable the device to be an SSH server, use the ip ssh server command.

Example

The following example enables the device to be configured from a Telnet server.

switchxxxxxx(config)# ip telnet server

Cisco Business Switches 350 Series CLI Guide

1378

Telnet, SSH and Slogin Commands

ip SSH logging

ip SSH logging

To enable or disable sending traps related to SSH session setup and shutdown use the ip ssh logging in Global
Configuration mode. To restore default setting, use the no form of this command.

Syntax

ip ssh logging [enable | disable]

no ip ssh logging

Parameters

• enable - Enables SSH logging on device

• disable - Disables SSH logging on device

Default Configuration

SSH session logging is disabled by default.

Command Mode

Global configuration mode.

User Guidelines

This command enables SSH logging on the device. SSH logging is a mean to track the progress of SSH session
setup and tear-down. SSH session setup and tear-down progress is tracked using SYSLOG message which
are generated as part of the process. If SSH logging is disabled then SYSLOG messages will not be generated
as part of the SSH setup or tear-down process.

Example

The following example enables SSH logging on the device.

switchxxxxxx(config)# ip ssh logging enable

Cisco Business Switches 350 Series CLI Guide

1379

ip ssh server

ip ssh server

Telnet, SSH and Slogin Commands

The ip ssh server Global Configuration mode command enables the device to be an SSH server and so to
accept connection requests from remote SSH clients. Remote SSH clients can manage the device through the
SSH connection.

Use the no form of this command to disable the SSH server functionality from the device.

Syntax

ip ssh server

no ip ssh server

Default Configuration

The SSH server functionality is disabled by default.

Command Mode

Global Configuration mode

User Guidelines

The device, as an SSH server, generates the encryption keys automatically.

To generate new SSH server keys, use the crypto key generate dsa and crypto key generate rsa commands.

Example

The following example enables configuring the device to be an SSH server.

switchxxxxxx(config)# ip ssh server

Cisco Business Switches 350 Series CLI Guide

1380

Telnet, SSH and Slogin Commands

ip ssh port

ip ssh port

The ip ssh port Global Configuration mode command specifies the TCP port used by the SSH server. Use
the no form of this command to restore the default configuration.

Syntax

ip ssh port port-number

no ip ssh port

Parameters

• port-number—Specifies the TCP port number to be used by the SSH server. (Range: 1–59999).

Default Configuration

The default TCP port number is 22.

Command Mode

Global Configuration mode

Example

The following example specifies that TCP port number 808 is used by the SSH server.

switchxxxxxx(config)# ip ssh port 808

Cisco Business Switches 350 Series CLI Guide

1381

ip ssh password-auth

Telnet, SSH and Slogin Commands

ip ssh password-auth

Use the ip ssh password-auth Global Configuration mode command to enable password authentication of
incoming SSH sessions.

Use the no form of this command to disable this function.

Syntax

ip ssh password-auth

no ip ssh password-auth

Default Configuration

Password authentication of incoming SSH sessions is disabled.

Command Mode

Global Configuration mode

User Guidelines

This command enables password key authentication by a local SSH server of remote SSH clients.

The local SSH server advertises all enabled SSH authentication methods and remote SSH clients are responsible
for choosing one of them.

After a remote SSH client is successfully authenticated by public key, the client must still be AAA-authenticated
to gain management access to the device.

If no SSH authentication method is enabled, remote SSH clients must still be AAA-authenticated before being
granted management access to the device.

Example

The following example enables password authentication of the SSH client.

switchxxxxxx(config)# ip ssh password-auth

Cisco Business Switches 350 Series CLI Guide

1382

Telnet, SSH and Slogin Commands

ip ssh pubkey-auth

ip ssh pubkey-auth

Use the ip ssh pubkey-auth Global Configuration mode command to enable public key authentication of
incoming SSH sessions.

Use the no form of this command to disable this function.

Syntax

ip ssh pubkey-auth [auto-login]

no ip ssh pubkey-auth

Parameters

• auto-login—Specifies that the device management AAA authentication (CLI login) is not needed. By

default, the login is required after the SSH authentication.

Default Configuration

Public key authentication of incoming SSH sessions is disabled.

Command Mode

Global Configuration mode

User Guidelines

This command enables public key authentication by a local SSH server of remote SSH clients.

The local SSH server advertises all enabled SSH authentication methods and remote SSH clients are responsible
for choosing one of them.

After a remote SSH client is successfully authenticated by public key, the client must still be AAA-authenticated
to gain management access to the device, except if the auto-login parameter was specified.

If no SSH authentication method is enabled, remote SSH clients must still be AAA-authenticated before being
granted management access to the device.

If the auto-login keyword is specified for SSH authentication by public key management access is granted
if SSH authentication succeeds and the name of SSH used is found in the local user database. The device
management AAA authentication is transparent to the user. If the user name is not in the local user database,
then the user receives a warning message, and the user will need to pass the device management AAA
authentication independently of the SSH authentication.

If the auto-login keyword is not specified, management access is granted only if the user engages and passes
both SSH authentication and device management AAA authentication independently.If no SSH authentication
method is enabled management access is granted only if the user is AAA authenticated by the device
management. No SSH authentication method means SSH is enabled and neither SSH authentication by public
key nor password is enabled.

Example

The following example enables authentication of the SSH client.

Cisco Business Switches 350 Series CLI Guide

1383

ip ssh pubkey-auth

Telnet, SSH and Slogin Commands

switchxxxxxx(config)# ip ssh pubkey-auth

Cisco Business Switches 350 Series CLI Guide

1384

Telnet, SSH and Slogin Commands

crypto key pubkey-chain ssh

crypto key pubkey-chain ssh

The crypto key pubkey-chain ssh Global Configuration mode command enters the SSH Public Key-chain
Configuration mode. This mode is used to manually specify device public keys, such as SSH client public
keys.

Syntax

crypto key pubkey-chain ssh

Default Configuration

Keys do not exist.

Command Mode

Global Configuration mode

User Guidelines

Use this command when you want to manually specify SSH client’s public keys.

Example

The following example enters the SSH Public Key-chain Configuration mode and manually configures the
RSA key pair for SSH public key-chain to the user ‘bob’.

switchxxxxxx(config)# crypto key pubkey-chain ssh
switchxxxxxx(config-keychain)# user-key bob rsa
switchxxxxxx(config-keychain-key)# key-string
AAAAB3NzaC1yc2EAAAADAQABAAABAQCvTnRwPWl
Al4kpqIw9GBRonZQZxjHKcqKL6rMlQ+
ZNXfZSkvHG+QusIZ/76ILmFT34v7u7ChFAE+
Vu4GRfpSwoQUvV35LqJJk67IOU/zfwOl1g
kTwml75QR9gHujS6KwGN2QWXgh3ub8gDjTSq
muSn/Wd05iDX2IExQWu08licglk02LYciz
+Z4TrEU/9FJxwPiVQOjc+KBXuR0juNg5nFYsY
0ZCk0N/W9a/tnkm1shRE7Di71+w3fNiOA
6w9o44t6+AINEICBCCA4YcF6zMzaT1wefWwX6f+
Rmt5nhhqdAtN/4oJfce166DqVX1gWmN
zNR4DYDvSzg0lDnwCAC8Qh
Fingerprint: a4:16:46:23:5a:8d:1d:b5:37:59:eb:44:13:b9:33:e9

Cisco Business Switches 350 Series CLI Guide

1385

user-key

user-key

Telnet, SSH and Slogin Commands

The user-key SSH Public Key-string Configuration mode command associates a username with a
manually-configured SSH public key.

Use the no user-key command to remove an SSH user and the associated public key.

Syntax

user-key username {rsa | dsa}

no user-key username

Parameters

• username—Specifies the remote SSH client username. (Length: 1–48 characters)

• rsa—Specifies that the RSA key pair is manually configured.

• dsa—Specifies that the DSA key pair is manually configured.

Default Configuration

No SSH public keys exist.

Command Mode

SSH Public Key-string Configuration mode

User Guidelines

After entering this command, the existing key, if any, associated with the user will be deleted. You must
follow this command with the key-string command to configure the key to the user.

Example

The following example enables manually configuring an SSH public key for SSH public key-chain bob.

switchxxxxxx(config)# crypto key pubkey-chain ssh
switchxxxxxx(config-keychain)# user-key bob rsa
switchxxxxxx(config-keychain-key)# key-string row
AAAAB3NzaC1yc2EAAAADAQABAAABAQCvTnRwPWl

Cisco Business Switches 350 Series CLI Guide

1386

Telnet, SSH and Slogin Commands

key-string

key-string

The key-string SSH Public Key-string Configuration mode command manually specifies an SSH public key.

Syntax

key-string [row key-string]

Parameters

• row—Specifies the SSH public key row by row. The maximum length of a row is 160 characters.

• key-string—Specifies the key in UU-encoded DER format. UU-encoded DER format is the same format

as in the authorized_keys file used by OpenSSH.

Default Configuration

Keys do not exist.

Command Mode

SSH Public Key-string Configuration mode

User Guidelines

Use the key-string SSH Public Key-string Configuration mode command without the row parameter to specify
which SSH public key is to be interactively configured next. Enter a row with no characters to complete the
command.

Use the key-string row SSH Public Key-string Configuration mode command to specify the SSH public key,
row by row. Each row must begin with a key-string row command.

The UU-encoded DER format is the same format as in the authorized_keys file used by OpenSSH.

Example

The following example enters public key strings for SSH public key client ‘bob’.

switchxxxxxx(config)# crypto key pubkey-chain ssh
switchxxxxxx(config-keychain)# user-key bob rsa
switchxxxxxx(config-keychain-key)# key-string
AAAAB3NzaC1yc2EAAAADAQABAAABAQCvTnRwPWl
Al4kpqIw9GBRonZQZxjHKcqKL6rMlQ+
ZNXfZSkvHG+QusIZ/76ILmFT34v7u7ChFAE+
Vu4GRfpSwoQUvV35LqJJk67IOU/zfwOl1g
kTwml75QR9gHujS6KwGN2QWXgh3ub8gDjTSq
muSn/Wd05iDX2IExQWu08licglk02LYciz
+Z4TrEU/9FJxwPiVQOjc+KBXuR0juNg5nFYsY
0ZCk0N/W9a/tnkm1shRE7Di71+w3fNiOA
6w9o44t6+AINEICBCCA4YcF6zMzaT1wefWwX6f+
Rmt5nhhqdAtN/4oJfce166DqVX1gWmN
zNR4DYDvSzg0lDnwCAC8Qh
Fingerprint: a4:16:46:23:5a:8d:1d:b5:37:59:eb:44:13:b9:33:e9
switchxxxxxx(config)# crypto key pubkey-chain ssh
switchxxxxxx(config-keychain)# user-key bob rsa

Cisco Business Switches 350 Series CLI Guide

1387

key-string

Telnet, SSH and Slogin Commands

switchxxxxxx(config-keychain-key)# key-string row AAAAB3Nza
switchxxxxxx(config-keychain-key)# key-string row C1yc2

Cisco Business Switches 350 Series CLI Guide

1388

Telnet, SSH and Slogin Commands

show ip ssh

show ip ssh

The show ip ssh Privileged EXEC mode command displays the SSH server configuration.

Syntax

show ip ssh

Command Mode

Privileged EXEC mode

Example

The following example displays the SSH server configuration.

switchxxxxxx# show ip ssh
SSH server enabled. Port: 22
SSH session logging is disabled
RSA key was generated.
DSA (DSS) key was generated.
SSH Public Key Authentication is enabled with auto-login.
SSH Password Authentication is enabled.
Active incoming sessions:

IP Address
---------
172.16.0.1

SSH Username
-----------
John Brown

Version
-------
1.5

Cipher
------
3DES

Auth Code
----------
HMAC-SHA1

182.20.2.1

Bob Smith

1.5

3DES

Password

The following table describes the significant fields shown in the display.

Field

Description

IP Address

The client address

SSH Username

The user name

Version

Cipher

Auth Code

The SSH version number

The encryption type (3DES, Blowfish, RC4)

The authentication Code (HMAC-MD5, HMAC-SHA1)
or Password

Cisco Business Switches 350 Series CLI Guide

1389

show crypto key pubkey-chain ssh

Telnet, SSH and Slogin Commands

show crypto key pubkey-chain ssh

The show crypto key pubkey-chain ssh Privileged EXEC mode command displays SSH public keys stored
on the device.

Syntax

show crypto key pubkey-chain ssh [username username] [fingerprint {bubble-babble | hex}]

Parameters

• username username—Specifies the remote SSH client username. (Length: 1–48 characters)

• fingerprint {bubble-babble | hex}—Specifies the fingerprint display format. The possible values are:

bubble-babble—Specifies that the fingerprint is displayed in Bubble Babble format.

hex—Specifies that the fingerprint is displayed in hexadecimal format.

Default Configuration

The default fingerprint format is hexadecimal.

Command Mode

Privileged EXEC mode

Example

The following examples display SSH public keys stored on the device.

Fingerprint

switchxxxxxx# show crypto key pubkey-chain ssh
Username
-----------
bob
john
switchxxxxxx# show crypto key pubkey-chain ssh username bob
Username
-----------
bob

----------------------------------------------------------
9A:CC:01:C5:78:39:27:86:79:CC:23:C5:98:59:F1:86
98:F7:6E:28:F2:79:87:C8:18:F8:88:CC:F8:89:87:C8

----------------------------------------------------------
9A:CC:01:C5:78:39:27:86:79:CC:23:C5:98:59:F1:86

Fingerprint

Cisco Business Switches 350 Series CLI Guide

1390

UDLD Commands

This chapter contains the following sections:

• show udld, on page 1392
• udld, on page 1395
• udld message time, on page 1397
• udld port, on page 1398

Cisco Business Switches 350 Series CLI Guide

1391

show udld

show udld

UDLD Commands

To display the administrative and operational Unidirectional Link Detection Protocol (UDLD) status, use the
show udld command in Privileged EXEC mode.

Syntax

show udld [interface-id] [neighbors]

Parameters

• interface-id—Interface identifier of an Ethernet port.

• neighbors—Displays neighbor information only.

Command Mode

Privileged EXEC mode

User Guidelines

If you do not enter an interface ID value, the administrative and operational UDLD status for all interfaces
on which UDLD is enabled are displayed.

Example 1—This example shows how to display the UDLD state for all interfaces. Most of the
fields shown in the display are self-explanatory. Those that are not self-explanatory are defined
below.

switchxxxxxx# show udld
Global UDLD mode: normal
Message Time: 15 sec(default)
Interface gi1/0/1

Port UDLD mode: aggressive
Port Current state: Bidirectional
Number of detected neighbors: 1
Port Neighbor Table

Neighbor Device ID: 1234567893

Neighbor MAC: 00:00:01:22:33:dd
Neighbor Device name: switch A
Neighbor Port ID: gi1/2/1
Neighbor Message Time: 20 sec
Neighbor Current State: Bidirectional
Neighbor Expiration Time: 7 sec

Neighbor Device ID: 1234544893

Neighbor MAC: 00:00:01:22:33:ff
Neighbor Device name: switch A
Neighbor Port ID: gi1/2/1
Neighbor Message Time: 15 sec
Neighbor Current State: Undetermined
Neighbor Expiration Time: 17 sec

Interface gi1/0/2

Port UDLD mode: normal (default)
Port Current state: Undetermined
Number of detected neighbors: 1

Neighbor Device ID: 1234567753

Neighbor MAC: 00:00:01:22:33:fe
Neighbor Device name: switch A

Cisco Business Switches 350 Series CLI Guide

1392

UDLD Commands

show udld

Neighbor Port ID: gi1/2/1
Neighbor Message Time: 15 sec
Neighbor Current State: Undetermined
Neighbor Expiration Time: 11 sec

Interface gi1/0/3

Port UDLD mode: disabled

Interface gi1/0/4

Port UDLD mode: normal (default)
Port Current state: shutdown

Field Descriptions:

• Global UDLD mode—The global UDLD mode (normal or aggressive) configured by the udld

command.

• Message Time—The message time configured by the udld message time command.

• Port UDLD mode—The interface UDLD mode (normal or aggressive).

• Port Current state—The UDLD operational state: interface UDLD mode (normal or aggressive).

• Disabled—UDLD is disabled on the port by the udld port disable command.

• Shutdown—UDLD is enabled on the port and the port operational state is DOWN.

• Detection—UDLD is detecting the link state.

• Bidirectional—The link is bidirectional.

• Undetermined—The link state is undetermined - no UDLD message has been received

on the port.

• Neighbor Device ID—The device ID of the neighbor.

• Neighbor MAC—The MAC address of the neighbor.

• Neighbor Device Name—The Device name of the neighbor.

• Neighbor Port ID—The device port ID of the neighbor on which the recent UDLD message

was sent.

• Neighbor Message Time—The message time of the neighbor.

• Neighbor Current State—The current state of the neighbor:

Bidirectional—The UDLD messages received from the neighbor contain the Device ID and
Port ID of the switch in the Echo TLV.

Undetermined—The UDLD messages received from the neighbor do not contain the Device
ID and Port ID of the switch in the Echo TLV.

• Neighbor Expiration Time—Left time in seconds until the current neighbor state expires.

Example 2—This example shows how to display the UDLD state for one given interface:

switchxxxxxx# show udld gi1/0/1
Global UDLD mode: normal
Message Time: 15 sec(default)
Interface gi1/0/1

Port UDLD mode: aggressive
Port Current state: Bidirectional
Number of detected neighbors: 1
Port Neighbor Table

Cisco Business Switches 350 Series CLI Guide

1393

show udld

UDLD Commands

Neighbor Device ID: 1234567893

Neighbor MAC: 00:00:01:22:33:dd
Neighbor Device name: switch A
Neighbor Port ID: gi1/2/1
Neighbor Message Time: 20 sec
Neighbor Current State: Bidirectional
Neighbor Expiration Time: 7 sec

Neighbor Device ID: 1234544893

Neighbor MAC: 00:00:01:22:33:ff
Neighbor Device name: switch A
Neighbor Port ID: gi1/2/1
Neighbor Message Time: 15 sec
Neighbor Current State: Undetermined
Neighbor Expiration Time: 17 sec

Example 3—This example shows how to display neighbor information only:

switchxxxxxx# show udld neighbors
Port

Device ID

Port-ID

Device Name

Message

Neighbor

Expiration

Time(sec) State

Time (sec)

-------- -------------- --------- --------------- --------- ----------
gi1/0/1 1234567893
gi1/0/2 3456750193

SAL0734K5R2
SAL0734K5R3

Bidirect
Undetermined

gi1/0/1
gi1/0/2

15
20

---------

11
5

Example 4—This example shows how to display neighbor information only for a single interface:

switchxxxxxx# show udld gi1/0/1 neighbors
Port

Device ID

Port-ID

Device Name

Message

Neighbor

Expiration

Time(sec) State

Time (sec)

-------- -------------- --------- --------------- --------- ----------
gi1/0/1 1234567893

SAL0734K5R2

Bidirect

gi1/0/1

15

---------
11

Cisco Business Switches 350 Series CLI Guide

1394

UDLD Commands

udld

udld

Use the udld command in Global Configuration mode to globally enable the UniDirectional Link Detection
(UDLD) protocol. To disable UDLD, use the no form of this command.

Syntax

udld aggressive | normal

no udld

Parameters

• aggressive—Enables UDLD in aggressive mode by default on all fiber interfaces.

• normal—Enables UDLD in normal mode by default on all fiber interfaces.

Default Configuration

UDLD is disabled on all fiber interfaces.

Command Mode

Global Configuration mode

User Guidelines

This command affects fiber interfaces only. Use the udld port command in Interface Configuration mode to
enable UDLD on other interface types.

Use the no form of this command to disable UDLD on all fiber ports.

The device supports the UDLD protocol specified by RFC 5171.

UDLD supports two modes of operation: normal and aggressive. In the aggressive mode the device shuts
down a port if it cannot explicitly detect that the link is bidirectional. In the normal mode the device shuts
down an interface if it explicitly detect that the link is unidirectional. A unidirectional link occurs whenever
traffic sent by a local device is received by its neighbor but traffic from the neighbor is not received by the
local device.

You can use the following commands to reset an interface shut down by UDLD:

• The errdisable recover reset command with the interface interface-id parameter to reset a given

interface.

• The errdisable recover reset command with the udld parameter to reset all interfaces shut down by

UDLD.

• The errdisable recover cause with the udld parameter to automatically recover from the UDLD

error-disabled state.

Example

This example shows how to enable UDLD on all fiber interfaces:

Cisco Business Switches 350 Series CLI Guide

1395

udld

UDLD Commands

switchxxxxxx(config)# udld normal

Cisco Business Switches 350 Series CLI Guide

1396

UDLD Commands

udld message time

udld message time

Use the udld message time command in Global Configuration mode to configure a global value of the interval
between two sent probe messages. To return to the default value, use the no form of this command.

Syntax

udld message time seconds

no udld message time

Parameters

seconds—Interval between two sent probe messages. The valid values are from 1 to 90 seconds.

Default Configuration

15 seconds.

Command Mode

Global Configuration mode

User Guidelines

Use this command to change the default value of the message interval - the interval between two sequential
sent probe messages.

Example

This example shows how to globally set the interval to 40sec:

switchxxxxxx(config)# udld message time 40

Cisco Business Switches 350 Series CLI Guide

1397

udld port

udld port

UDLD Commands

To enable the UDLD protocol on an Ethernet port, use the udld port command in Interface Configuration
mode. To return to the default, use the no form of this command.

Syntax

udld port [aggressive | normal | disable]

no udld port

Parameters

• aggressive—Enables UDLD in aggressive mode on this interface.

• normal—Enables UDLD in normal mode on this interface. The normal keyword is applied if no keyword

is specified.

• disable—Disables UDLD on this interface.

Default Configuration

The defaults are as follows:

• Fiber interfaces are in the state configured by the udld command.

• Non-fiber interfaces are in the Disable state.

Command Mode

Interface (Ethernet) Configuration mode

User Guidelines

Use this command on fiber ports to override the setting of the global udld command.

If the port changes from fiber to non-fiber or vice versa, all configurations are maintained because the platform
software detects a change of module or a Gigabit Interface Converter (GBIC) change.

Example 1—This example shows how to enable UDLD in normal mode on an Ethernet port regardless
of the current global udld setting:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# udld port normal
switchxxxxxx(config-if)# exit

Example 2—This example shows how to return to the default configuration:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# no udld port
switchxxxxxx(config-if)# exit

Example 3—This example shows how to disable UDLD on an Ethernet port regardless of the current
global udld setting:

Cisco Business Switches 350 Series CLI Guide

1398

UDLD Commands

udld port

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# udld port disable
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1399

udld port

UDLD Commands

Cisco Business Switches 350 Series CLI Guide

1400

User Interface Commands

This chapter contains the following sections:

• banner exec, on page 1402
• banner login, on page 1404
• configure, on page 1406
• disable, on page 1407
• do, on page 1408
• enable, on page 1409
• end, on page 1410
• exit (Configuration), on page 1411
• exit (EXEC), on page 1412
• exec-banner, on page 1413
• help, on page 1414
• history, on page 1415
• history size, on page 1416
• login, on page 1417
• login-banner, on page 1418
• terminal datadump, on page 1419
• terminal history, on page 1420
• terminal history size, on page 1421
• terminal prompt, on page 1422
• terminal width, on page 1423
• show banner, on page 1424
• show history, on page 1425
• show privilege, on page 1426

Cisco Business Switches 350 Series CLI Guide

1401

banner exec

banner exec

User Interface Commands

To specify and enable a message to be displayed after a successful logon, use the banner exec Global
Configuration mode command. This banner is applied automatically on all the user interfaces: console, Telnet
and SSH and also on the WEB GUI. To delete the existing EXEC banner, use the no form of this command.

Syntax

banner exec d message-text d

no banner exec

Parameters

• d—Delimiting character of user’s choice—a pound sign (#), for example. You cannot use the delimiting

character in the banner message.

• message-text—The message must start in a new line. You can enter multi-line messages. You can include

tokens in the form of $(token) in the message text. Tokens are replaced with the corresponding
configuration variable (see User Guidelines). The message can contain up to 1000 characters (after every
510 characters, press <Enter> to continue).

Default Configuration

Disabled (no EXEC banner is displayed).

Command Mode

Global Configuration mode

User Guidelines

Follow this command with one or more blank spaces and a delimiting character of your choice. Then enter
one or more lines of text, terminating the message with the second occurrence of the delimiting character.

Use tokens in the form of $(token) in the message text to customize the banner. The tokens are described in
the table below:

Token

Information Displayed in the Banner

$(hostname)

Displays the host name for the device.

$(domain)

Displays the domain name for the device.

$(bold)

$(inverse)

Indicates that the next text is a bold text. Using this token again
indicates the end of the bold text.

Indicates that the next text is an inverse text. Using this token
again indicates the end of the inverse text.

$(contact)

Displays the system contact string.

$(location)

Displays the system location string.

Cisco Business Switches 350 Series CLI Guide

1402

User Interface Commands

banner exec

Token

Information Displayed in the Banner

$(mac-address)

Displays the base MAC address of the device.

Use the no banner exec Line Configuration command to disable the Exec banner on a particular line or lines.

Example

The following example sets an EXEC banner that uses tokens. The percent sign (%) is used as a delimiting
character. Note that the $(token) syntax is replaced by the corresponding configuration variable.

switchxxxxxx(config)# banner exec %
Enter TEXT message. End with the character '%'.
$(bold)Session activated.$(bold) Enter commands at the prompt.
%
When a user logs on to the system, the following output is displayed:
Session activated. Enter commands at the prompt.

Cisco Business Switches 350 Series CLI Guide

1403

banner login

banner login

User Interface Commands

To specify a message to be displayed before the username and password login prompts, use the banner login
command in Global Configuration mode. This banner is applied automatically on all the user interfaces:
Console, Telnet and SSH and also on the WEB GUI. To delete the existing login banner, use the no form of
this command

Syntax

banner login d message-text d

no banner login

Parameters

• d—Delimiting character of user’s choice—a pound sign (#), for example. You cannot use the delimiting

character in the banner message.

• message-text—Message text. The message must start on a new line. You can enter multi-line messages.

You can include tokens in the form of $(token) in the message text. Tokens are replaced with the
corresponding configuration variable (see User Guidelines). The message can contain up to 1000 characters
(after every 510 characters, you must press <Enter> to continue).

Default Configuration

Disabled (no Login banner is displayed).

Command Mode

Global Configuration mode

User Guidelines

Follow this command with one or more blank spaces and a delimiting character of your choice. Then enter
one or more lines of text, terminating the message with the second occurrence of the delimiting character.

Use tokens in the form of $(token) in the message text to customize the banner. The tokens are described in
the table below:

Token

Information displayed in the banner

$(hostname)

Displays the host name for the device.

$(domain)

Displays the domain name for the device.

$(bold)

$(inverse)

Indicates that the next text is a bold text. Using this token again
indicates the end of the bold text.

Indicates that the next text is an inverse text. Using this token
again indicates the end of the inverse text.

$(contact)

Displays the system contact string.

Cisco Business Switches 350 Series CLI Guide

1404

User Interface Commands

banner login

Token

Information displayed in the banner

$(location)

Displays the system location string.

$(mac-address)

Displays the base MAC address of the device.

Use the no banner login Line Configuration command to disable the Login banner on a particular line or
lines.

Example

The following example sets a Login banner that uses tokens. The percent sign (%) is used as a delimiting
character. Note that the $(token) syntax is replaced by the corresponding configuration variable.

switchxxxxxx(config)# banner login %
Enter TEXT message. End with the character '%'.
You have entered $(hostname).$(domain)
%
When the login banner is executed, the user will see the following banner:
You have entered host123.ourdomain.com

Cisco Business Switches 350 Series CLI Guide

1405

configure

configure

User Interface Commands

To enter the Global Configuration mode, use the configure Privileged EXEC mode command.

Syntax

configure [terminal]

Parameters

terminal—(Optional) Enter the Global Configuration mode with or without the keyword terminal.

Command Mode

Privileged EXEC mode

Example

The following example enters Global Configuration mode.

switchxxxxxx# configure
switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

1406

User Interface Commands

disable

disable

To leave the Privileged EXEC mode and return to the User EXEC mode, use the disable Privileged EXEC
mode command.

Syntax

disable [privilege-level]

Parameters

privilege-level—(Optional) Reduces the privilege level to the specified privileged level. If privilege level is
left blank, the level is reduce to the minimal privilege level.

Default Configuration

The default privilege level is 15.

Command Mode

Privileged EXEC mode

Example

The following example returns the user to user level 1.

switchxxxxxx# disable 1
switchxxxxxx#

Cisco Business Switches 350 Series CLI Guide

1407

do

do

User Interface Commands

To execute an EXEC-level command from Global Configuration mode or any configuration submode, use
the do command.

Syntax

do command

Parameters

command—Specifies the EXEC-level command to execute.

Command Mode

All configuration modes

Example

The following example executes the show vlan Privileged EXEC mode command from Global Configuration
mode.

switchxxxxxx(config)# do show vlan

Vlan

Name

----

----

Ports

-----

Type

----

other

Authorization

-------------

Required

dynamicGvrp

Required

permanent

Not Required

gi1/0/1-4,Po1,Po2

gi1/0/1

gi1/0/1

gi1/0/1,gi1/0/3

permanent

Required

gi1/0/1

permanent

Required

gi1/0/1,gi1/0/3

permanent

Required

gi1/0/1

permanent

Required

gi1/0/1,gi1/0/4

permanent

Required

1

2

10

11

20

30

31

91

1

2

v0010

V0011

20

30

31

91

4093

guest-vlan

gi1/0/1,gi1/0/3

permanent

Guest

switchxxxxxx(config)#

Cisco Business Switches 350 Series CLI Guide

1408

User Interface Commands

enable

enable

To enter the Privileged EXEC mode, use the enable User EXEC mode command.

Syntax

enable [privilege-level]

Parameters

privilege-level—(Optional) Specifies the privilege level at which to enter the system.(Range: 1,7,15)

Default Configuration

The default privilege level is 15.

Command Mode

User EXEC mode

Example

The following example enters privilege level 7.

switchxxxxxx# enable 7
enter password:**********
switchxxxxxx# Accepted

The following example enters privilege level 15.

switchxxxxxx# enable
enter password:**********
switchxxxxxx# Accepted

Cisco Business Switches 350 Series CLI Guide

1409

end

end

User Interface Commands

To end the current configuration session and return to the Privileged EXEC mode, use the end command.

Syntax

end

Parameters

This command has no arguments or keywords

Default Configuration

None

Command Mode

All configuration modes

Example

The following example ends the Global Configuration mode session and returns to the Privileged EXEC
mode.

switchxxxxxx(config)# end
switchxxxxxx#

Cisco Business Switches 350 Series CLI Guide

1410

User Interface Commands

exit (Configuration)

exit (Configuration)

To exit any mode and bring the user to the next higher mode in the CLI mode hierarchy, use the exit command.

Syntax

exit

Parameters

This command has no arguments or keywords

Default Configuration

None

Command Mode

All configuration modes

Examples

The following examples change the configuration mode from Interface Configuration mode to Privileged
EXEC mode.

switchxxxxxx(config-if)# exit
switchxxxxxx(config)# exit

Cisco Business Switches 350 Series CLI Guide

1411

exit (EXEC)

exit (EXEC)

User Interface Commands

To close an active terminal session by logging off the device, use the exit User EXEC mode command.

Syntax

exit

Parameters

This command has no arguments or keywords

Command Mode

User EXEC mode

Example

The following example closes an active terminal session.

switchxxxxxx# exit

Cisco Business Switches 350 Series CLI Guide

1412

User Interface Commands

exec-banner

exec-banner

To enable the display of exec banners, use the exec-banner command in Line Configuration Mode. To disable
the display of exec banners, use the no form of this command.

Syntax

exec-banner

no exec-banner

Parameters

This command has no arguments or keywords.

Default Configuration

Disabled

Command Mode

Line Configuration Mode

Example

switchxxxxxx# configure
switchxxxxxx(config)# line console
switchxxxxxx(config-line)# exec-banner
switchxxxxxx(config-line)# exit
switchxxxxxx(config)# line telnet
switchxxxxxx(config-line)# exec-banner
switchxxxxxx(config-line)# exit
switchxxxxxx(config)# line ssh
switchxxxxxx(config-line)# exec-banner

Cisco Business Switches 350 Series CLI Guide

1413

help

help

User Interface Commands

To display a brief description of the Help system, use the help command.

Syntax

help

Parameters

This command has no arguments or keywords

Default Configuration

None

Command Mode

All configuration modes

Example

The following example describes the Help system.

switchxxxxxx# help
Help may be requested at any point in a command by entering a question mark '?'. If nothing
matches the currently entered incomplete command, the help list is empty. This indicates

that there is no command matching the input as it currently appears. If the request is
within a command, press the Backspace key and erase the entered characters to a point where

the request results in a match.

Help is provided when:
1. There is a valid command and a help request is made for entering a parameter or argument

(e.g. 'show ?'). All possible parameters or arguments for the entered command are then

displayed.
2. An abbreviated argument is entered and a help request is made for arguments matching the

input (e.g. 'show pr?').

Cisco Business Switches 350 Series CLI Guide

1414

User Interface Commands

history

history

To enable saving commands that have been entered, use the history Line Configuration Mode command. To
disable the command, use the no form of this command.

Syntax

history

no history

Parameters

This command has no arguments or keywords

Default Configuration

Enabled.

Command Mode

Line Configuration Mode

User Guidelines

This command enables saving user-entered commands for a specified line. You can return to previous lines
by using the up or down arrows.

It is effective from the next time that the user logs in via console/telnet/ssh.

The following are related commands:

• Use the terminal history size, on page 1421 User EXEC mode command to enable or disable this command

for the current terminal session.

Use the history size, on page 1416 Line Configuration Mode command to set the size of the command
history buffer.

Example

The following example enables the command for Telnet.

switchxxxxxx(config)# line telnet
switchxxxxxx(config-line)# history

Cisco Business Switches 350 Series CLI Guide

1415

history size

history size

User Interface Commands

To change the maximum number of user commands that are saved in the history buffer for a particular line,
use the history size Line Configuration Mode command. To reset the command history buffer size to the
default value, use the no form of this command.

Syntax

history size number-of-commands

no history size

Parameters

number-of-commands—Specifies the number of commands the system records in its history buffer.

Default Configuration

The default command history buffer size is 10 commands.

Command Mode

Line Configuration Mode

User Guidelines

This command configures the command history buffer size for a particular line. It is effective from the next
time that the user logs in via console/telnet/ssh.

Use the terminal history size User EXEC mode command to configure the command history buffer size for
the current terminal session.

The allocated command history buffer is per terminal user, and is taken from a shared buffer. If there is not
enough space available in the shared buffer, the command history buffer size cannot be increased above the
default size.

Example

The following example changes the command history buffer size to 100 entries for Telnet.

switchxxxxxx(config)# line telnet
switchxxxxxx(config-line)# history size 100

Cisco Business Switches 350 Series CLI Guide

1416

User Interface Commands

login

login

To enable changing the user that is logged in, use the login User EXEC mode command. When this command
is logged in, the user is prompted for a username/password.

Syntax

login

Parameters

This command has no arguments or keywords

Command Mode

User EXEC mode

Example

The following example enters Privileged EXEC mode and logs in with the required username ‘bob’.

switchxxxxxx# login
User Name:bob
Password:*****
switchxxxxxx#

Cisco Business Switches 350 Series CLI Guide

1417

login-banner

login-banner

User Interface Commands

To enable the display of login banners, use the login-banner command in Line Configuration Mode. To
disable the display of login banners, use the no form of this command.

Syntax

login-banner

no login-banner

Parameters

This command has no arguments or keywords

Default Configuration

Enabled

Command Mode

Line Configuration Mode

Example

switchxxxxxx# configure
switchxxxxxx(config)# line console
switchxxxxxx(config-line)# login-banner
switchxxxxxx(config-line)# exit
switchxxxxxx(config)# line telnet
switchxxxxxx(config-line)# login-banner
switchxxxxxx(config-line)# exit
switchxxxxxx(config)# line ssh
switchxxxxxx(config-line)# login-banner

Cisco Business Switches 350 Series CLI Guide

1418

User Interface Commands

terminal datadump

terminal datadump

To enable dumping all the output of a show command without prompting, use the terminal datadump User
EXEC mode command. To disable dumping, use the no form of this command.

Syntax

terminal datadump

terminal no datadump

Parameters

This command has no arguments or keywords

Default Configuration

When printing, dumping is disabled and printing is paused every 24 lines.

Command Mode

User EXEC mode

User Guidelines

By default, a More prompt is displayed when the output contains more than 24 lines. Pressing the Enter key
displays the next line; pressing the Spacebar displays the next screen of output.

The terminal datadump command enables dumping all output immediately after entering the show command
by removing the pause.

The width is not limited, and the width of the line being printed on the terminal is based on the terminal itself.

This command is relevant only for the current session.

Example

The following example dumps all output immediately after entering a show command.

switchxxxxxx# terminal datadump

Cisco Business Switches 350 Series CLI Guide

1419

terminal history

terminal history

User Interface Commands

To enable the command history function for the current terminal session, meaning that it will not be stored
in the Running Configuration file, use the terminal history User EXEC mode command. To disable the
command, use the no form of this command.

Syntax

terminal history

terminal no history

Parameters

This command has no arguments or keywords

Default Configuration

The default configuration for all terminal sessions is defined by the history, on page 1415 Line Configuration
Mode command.

Command Mode

User EXEC mode

User Guidelines

The command enables the command history for the current session. The default is determined by the history,
on page 1415 Line Configuration Mode command.

This command is effective immediately.

Example

The following example disables the command history function for the current terminal session.

switchxxxxxx# terminal no history

Cisco Business Switches 350 Series CLI Guide

1420

User Interface Commands

terminal history size

terminal history size

To change the command history buffer size for the current terminal session, meaning it will not be stored in
the Running Configuration file, use the terminal history size User EXEC mode command. , use the no form
of this command to reset the command history buffer size to the default value.

Syntax

terminal history size number-of-commands

terminal no history size

Parameters

number-of-commands—Specifies the number of commands the system maintains in its history buffer.
(Range: 10–206)

Default Configuration

The default configuration for all terminal sessions is defined by the history size, on page 1416 Line Configuration
Mode command.

Command Mode

User EXEC mode

User Guidelines

The terminal history size EXEC command changes the command history buffer size for the current terminal
session. Use the history, on page 1415 Line Configuration Mode command to change the default history buffer
size.

The maximum number of commands in all buffers is 207.

Example

The following example sets the command history buffer size to 20 commands for the current terminal session.

switchxxxxxx# terminal history size 20

Cisco Business Switches 350 Series CLI Guide

1421

terminal prompt

terminal prompt

User Interface Commands

To enable the terminal prompts, use the terminal prompt User EXEC mode command. To disable the terminal
prompts, use terminal no prompt command.

The command is per session and will not be saved in the configuration database.

Syntax

terminal prompt

terminal no prompt

Parameters

This command has no arguments or keywords

Default Configuration

The default configuration is prompts enabled.

Command Mode

Privileged EXEC mode

Example

The following example disables the terminal prompts

switchxxxxxx# terminal no prompt

Cisco Business Switches 350 Series CLI Guide

1422

User Interface Commands

terminal width

terminal width

To determine the width of the display for the echo input to CLI sessions, use the terminal width User EXEC
mode command. To return to the default, use terminal no width.

The command is per session and will not be saved in the configuration database.

Syntax

terminal width number-of-characters

terminal no width

Parameters

number-of-characters - Specifies the number of characters to be displayed for the echo output of the CLI
commands and the configuration file,'0' means endless number of characters on a screen line. (Range: 0,
70-512)

Default Configuration

The default number of characters is 77.

Command Mode

Privileged EXEC mode

Example

The following example sets the terminal width to 100 characters

switchxxxxxx# terminal width 100

Cisco Business Switches 350 Series CLI Guide

1423

show banner

show banner

To display the banners that have been defined, use the show banner commands in User EXEC mode.

User Interface Commands

Syntax

show banner login

show banner exec

Parameters

This command has no arguments or keywords

Command Mode

User EXEC mode

Examples

switchxxxxxx# show banner login
-------------------------------------------------------------

Banner: Login
Line SSH: Enabled
Line Telnet: Enabled
Line Console: Enabled
switchxxxxxx# show banner exec
Banner: EXEC
Line SSH: Enabled
Line Telnet: Enabled
Line Console: Enabled
You have logged on

Cisco Business Switches 350 Series CLI Guide

1424

User Interface Commands

show history

show history

To list the commands entered in the current session, use the show history User EXEC mode command.

Syntax

show history

Parameters

This command has no arguments or keywords

Command Mode

User EXEC mode

User Guidelines

The buffer includes executed and unexecuted commands.

Commands are listed from the first to the most recent command.

The buffer remains unchanged when entering into and returning from configuration modes.

Example

The following example displays all the commands entered while in the current Privileged EXEC mode.

switchxxxxxx# show version
SW version 3.131 (date 23-Jul-2005 time 17:34:19)
HW version 1.0.0
switchxxxxxx# show clock
15:29:03 Jun 17 2005
switchxxxxxx# show history
show version
show clock
show history
3 commands were logged (buffer size is 10)

Cisco Business Switches 350 Series CLI Guide

1425

show privilege

show privilege

User Interface Commands

To display the current privilege level, use the show privilege User EXEC mode command.

Syntax

show privilege

Parameters

This command has no arguments or keywords

Command Mode

User EXEC mode

Example

The following example displays the privilege level for the user logged on.

switchxxxxxx# show privilege
Current privilege level is 15

Cisco Business Switches 350 Series CLI Guide

1426

VLAN Commands

This chapter contains the following sections:

• vlan database, on page 1429
• vlan , on page 1430
• show vlan, on page 1431
• interface vlan, on page 1432
• interface range vlan, on page 1433
• name, on page 1434
• switchport protected-port, on page 1435
• show interfaces protected-ports, on page 1436
• switchport, on page 1437
• switchport mode, on page 1438
• switchport access vlan , on page 1441
• switchport trunk allowed vlan , on page 1442
• switchport trunk native vlan , on page 1444
• switchport general allowed vlan , on page 1445
• switchport general pvid, on page 1446
• switchport general ingress-filtering disable, on page 1447
• switchport general acceptable-frame-type, on page 1448
• switchport general forbidden vlan , on page 1449
• switchport customer vlan, on page 1450
• ethtype, on page 1451
• switchport nni ethtype, on page 1452
• switchport vlan-mapping tunnel, on page 1453
• switchport vlan-mapping tunnel l2protocol vlan, on page 1455
• switchport vlan-mapping tunnel l2protocol cos, on page 1456
• switchport vlan-mapping tunnel l2protocol cos interface, on page 1457
• switchport vlan-mapping tunnel l2protocol drop-threshold, on page 1458
• switchport vlan-mapping tunnel l2protocol forward, on page 1459
• switchport vlan-mapping one-to-one, on page 1461
• map protocol protocols-group, on page 1463
• switchport general map protocols-group vlan, on page 1464
• show vlan protocols-groups, on page 1465
• map mac macs-group, on page 1466

Cisco Business Switches 350 Series CLI Guide

1427

VLAN Commands

• switchport general map macs-group vlan, on page 1467
• show vlan macs-groups, on page 1468
• map subnet subnets-group, on page 1469
• switchport general map subnets-group vlan, on page 1470
• show vlan subnets-groups, on page 1471
• show interfaces switchport, on page 1472
• private-vlan, on page 1474
• private-vlan association, on page 1475
• switchport private-vlan mapping, on page 1476
• switchport private-vlan host-association, on page 1477
• show vlan private-vlan, on page 1478
• switchport access multicast-tv vlan, on page 1479
• switchport customer multicast-tv vlan, on page 1480
• show vlan multicast-tv, on page 1481
• vlan prohibit-internal-usage, on page 1482
• show vlan internal usage , on page 1484

Cisco Business Switches 350 Series CLI Guide

1428

VLAN Commands

vlan database

vlan database

Use the vlan database Global Configuration mode command to enter the VLAN Configuration mode. This
mode is used to create VLAN(s) and define the default VLAN.

Use the exit command to return to Global Configuration mode.

Syntax

vlan database

Default Configuration

VLAN 1 exists by default.

Command Mode

Global Configuration mode

Example

The following example enters the VLAN Configuration mode, creates VLAN 1972 and exits VLAN
Configuration mode.

switchxxxxxx(config)# vlan database
switchxxxxxx(config-vlan)# vlan 1972
switchxxxxxx(config-vlan)# exit

Cisco Business Switches 350 Series CLI Guide

1429

vlan

vlan

VLAN Commands

Use the vlan VLAN Configuration mode or Global Configuration mode command to create a VLAN and
assign it a name (if only a single VLAN is being created). Use the no form of this command to delete the
VLAN(s).

Syntax

vlan vlan-range | {vlan-id [name vlan-name]} [media ethernet] [state active]

no vlan vlan-range

Parameters

• vlan-range—Specifies a list of VLAN IDs. Separate nonconsecutive VLAN IDs with a comma and no

spaces. Use a hyphen to designate a range of IDs (range: 2-4094).

• vlan-id—Specifies a VLAN ID. (range: 2-4094).

• vlan-name—Specifies the VLAN name. (range: 1–32 characters).

• media—Specifies the media type of the VLAN. Valid values are ethernet.

• state—Specifies whether the state of the VLAN. Valid values are active.

Default Configuration

VLAN 1 exists by default.

Command Mode

Global Configuration mode

VLAN Database Configuration mode

User Guidelines

If the VLAN does not exist, it is created. If the VLAN cannot be created then the command is finished with
error and the current context is not changed.

Example

The following example creates a few VLANs. VLAN 1972 is assigned the name Marketing.

switchxxxxxx(config)# vlan database
switchxxxxxx(config-vlan)# vlan 19-23
switchxxxxxx(config-vlan)# vlan 100
switchxxxxxx(config-vlan)# vlan 1972 name Marketing
switchxxxxxx(config-vlan)# exit

Cisco Business Switches 350 Series CLI Guide

1430

VLAN Commands

show vlan

show vlan

Use the show vlan Privileged EXEC mode command to display the following VLAN information.

Syntax

show vlan [tag vlan-id | name vlan-name]

Parameters

• tag vlan-id—Specifies a VLAN ID.

• name vlan-name—Specifies a VLAN name string (length: 1–32 characters)

Default Configuration

All VLANs are displayed.

Command Mode

Privileged EXEC mode

Example 1—The following example displays information for all VLANs:

switchxxxxxx# show vlanCreated by: S-Static, G-GVRP, R-Radius Assigned VLAN, V-Voice VLAN

VLAN

-----

1

10

91

92

93

Name

Tagged Ports

UnTagged Ports

Created by

-----------

--------------

--------------

----------

Default

Marketing

gi1/0/2

11

11

11

gi1/0/2-4

gi1/0/3-4

gi1/0/3-4

gi1/0/1

gi1/0/2

gi1/0/2

S

S

SGR

G

GR

Cisco Business Switches 350 Series CLI Guide

1431

interface vlan

interface vlan

VLAN Commands

Use the interface vlan Global Configuration mode command to enter the Interface Configuration (VLAN)
mode for a specific VLAN. After this command is entered, all commands configure this VLAN.

Syntax

interface vlan vlan-id

Parameters

• vlan-id—Specifies the VLAN to be configured.

Command Mode

Global Configuration mode

User Guidelines

If the VLAN does not exist, the VLAN is created. If the VLAN cannot be created, this command is finished
with an error and the current context is not changed.

Example

The following example configures VLAN 1 with IP address 131.108.1.27 and subnet mask 255.255.255.0.

switchxxxxxx(config)# interface vlan 1
switchxxxxxx(config-if)# ip address 131.108.1.27 255.255.255.0

Cisco Business Switches 350 Series CLI Guide

1432

VLAN Commands

interface range vlan

interface range vlan

Use the interface range vlan Global Configuration mode command to configure multiple VLANs
simultaneously.

Syntax

interface range vlan vlan-range

Parameters

• vlan-range—Specifies a list of VLANs. Separate nonconsecutive VLANs with a comma and no spaces.

Use a hyphen to designate a range of VLANs.

Command Mode

Global Configuration mode

User Guidelines

Commands under the interface VLAN range context are executed independently on each VLAN in the range.
If the command returns an error on one of the VLANs, an error message is displayed, and the system attempts
to configure the remaining VLANs.

Example

The following example groups VLANs 221 through 228 and 889 to receive the same command(s).

switchxxxxxx(config)# interface range vlan 221-228, vlan 889

Cisco Business Switches 350 Series CLI Guide

1433

name

name

VLAN Commands

Use the name Interface Configuration (VLAN) mode command to name a VLAN. Use the no form of this
command to remove the VLAN name.

Syntax

name string

no name

Parameters

• string—Specifies a unique name associated with this VLAN. (Length: 1–32 characters).

Default Configuration

No name is defined.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

The VLAN name must be unique.

Example

The following example assigns VLAN 19 the name Marketing.

switchxxxxxx(config)# interface vlan 19
switchxxxxxx(config-if)# name Marketing

Cisco Business Switches 350 Series CLI Guide

1434

VLAN Commands

switchport protected-port

switchport protected-port

Use the switchport protected-port Interface Configuration mode command to isolate Unicast, Multicast,
and Broadcast traffic at Layer 2 from other protected ports on the same switch. Use the no form of this
command to disable protection on the port.

Syntax

switchport protected-port

no switchport protected-port

Default Configuration

Unprotected

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Note that packets are subject to all filtering rules and Filtering Database (FDB) decisions.

Use this command to isolate Unicast, Multicast, and Broadcast traffic at Layer 2 from other protected ports
(that are not associated with the same community as the ingress interface) on the same switch. Please note
that the packet is still subject to FDB decision and to all filtering rules.

Example

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport protected-port

Cisco Business Switches 350 Series CLI Guide

1435

show interfaces protected-ports

VLAN Commands

show interfaces protected-ports

Use the show interfaces protected-ports EXEC mode command to display protected ports configuration.

Syntax

show interfaces protected-ports [interface-id | detailed]

Parameters

• interface-id—Specifies an interface ID. The interface ID can be one of the following types: Ethernet

port or port-channel.

• detailed—Displays information for non-present ports in addition to present ports.

Default Configuration

Show all protected interfaces. If detailed is not used, only present ports are displayed.

Command Mode

User EXEC mode

Example

switchxxxxxx# show interfaces protected-ports

Interface
---------
gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4

State
-------------
Protected
Protected
Unprotected
Unprotected

Cisco Business Switches 350 Series CLI Guide

1436

VLAN Commands

switchport

switchport

Use the switchport Interface Configuration mode command to put an interface that is in Layer 3 mode into
Layer 2 mode. Use the no form of this command to put an interface in Layer 3 mode.

Syntax

switchport

no switchport

Default Configuration

Layer 2 mode

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use the no switchport command to set the interface as a Layer 3 interface.

An interface cannot be set as a Layer 3 interface if 802x.1 is enabled on the interface and one of the following
conditions is true:

• The host mode differs from multi-host.

• MAC-Based or WEB-Based authentication is enabled.

• Radius VLAN assignment is enabled.

Examples

Example 1 - The following example puts the port gi1/0/1 into Layer 2 mode.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport

Example 2 - The following example puts the port gi1/0/1 into Layer 3 mode.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# no switchport

Cisco Business Switches 350 Series CLI Guide

1437

switchport mode

VLAN Commands

switchport mode

Use the switchport mode Interface Configuration mode command to configure the VLAN membership mode.
Use the no form of this command to restore the default configuration.

Syntax

switchport mode access | trunk | general

no switchport mode

Parameters

• access—Specifies an untagged layer 2 VLAN port.

• trunk—Specifies a trunking layer 2 VLAN port.

• general—Specifies a full 802-1q-supported VLAN port.

• customer—Specifies that an edge port connected to customer equipment. Traffic received from this port

will be tunneled with the additional 802.1q VLAN tag (Q-in-Q VLAN tunneling).

Default Configuration

Access mode.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

When the port’s mode is changed, it receives the configuration corresponding to the mode.

If the port mode is changed to access and the access VLAN does not exist, then the port does not belong to
any VLAN.

Use the switchport mode vlan-mapping {tunnel | one-to-one} command to configure a VLAN mapping
mode of an edge interface of a Provider Edge switch. The edge interface is an interface where a Customer
network is connected to the Provider Edge switch. The network which the switch belongs to is a Provider
network. These networks (Customer ones and Provider one) can use the same VLAN-IDs and the edge interface
must perform vlan mapping between Customer VLANs (C-VLANs) and Provider VLANs (S-VLANs).On
an edge interface C-VLANs are mapped to S-VLANs and the original C-VLAN tags are kept as part of
payload. When a frame is sent on non-edge tagged interface, it is encapsulated with another layer of S-VLAN
tag to which the original C-VLAN-ID is mapped. Therefore, transmitted on non-edge interfaces frames are
double-tagged, with the outer S-VLAN tag and inner C-VLAN tag. When a frame is sent on an edge interface
the S-VLAN tag is stripped.On an edge interface C-VLANs are mapped to the S-VLANs and the original
C-VLAN-ID in input frame is replaced by the S-VLAN ID to which it is mapped. Untagged frames are
dropped. Symmetrical translating back to the edge interface.

The following features cannot be enabled if vlan-mapping is allowed:

• IPv4 routing

Cisco Business Switches 350 Series CLI Guide

1438

VLAN Commands

switchport mode

• IPv6 routing

• Auto Smart Port

• Voice VLAN

The switchport vlan-mapping commands cannot add a port to a S-VLAN.

IPv4 and IPv6 interfaces cannot be defined on VLANs containing edge interfaces.

The following Layer 2 features are not supported into VLANs containing edge interfaces:

• IGMP Snooping

• MLD Snooping

• DHCP Snooping

• IPv6 First Hop Security

The following protocols cannot be enabled on edge interfaces:

• STP

• GVRP

The following features are not supported on edge interfaces:

• Radius VLAN assignment

• 802.1x Guest VLAN

Egress ACLs are not supported on one-to-one VLAN mapping edge ports. A destination port with the network
keyword or reflector port cannot be configured on an edge port. Note. All the limitations for edge ports
specified above are checked by the switchport vlan-mapping commands and by the commands configuring
these features. By default the switch does not forward frames received on edge ports with the following
destination MAC addresses:

• 01:80:C2:00:00:00-01:80:C2:00:00:FF

• 01:00:0C:00:00:00-01:00:0C:FF:FF:FF

• 01:00:0C:CD:CD:D0

Note. The following protocols using these MAC addresses can be enabled on edge ports:

• LACP - 01:80:C2:00:00:02

• LLDP - 01:80:C2:00:00:0E

• UDLD - 01:00:0C:CC:CC:CC

• CDP - 01:00:0C:CC:CC:CC

Example

Example 1 - The following example configures gi1/0/1 as an access port (untagged layer 2) VLAN port.

Cisco Business Switches 350 Series CLI Guide

1439

switchport mode

VLAN Commands

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport mode access
switchxxxxxx(config-if)# switchport access vlan 2

Cisco Business Switches 350 Series CLI Guide

1440

VLAN Commands

switchport access vlan

switchport access vlan

A port in access mode can be an untagged member of at most a single VLAN. The switchport access vlan
Interface Configuration command reassigns an interface to a different VLAN than it currently belongs or
assigns it to none, in which case it is not a member of any VLAN.

The no form of this command to restore the default configuration.

Syntax

switchport access vlan {vlan-id | none}

no switchport access vlan

Parameters

• vlan-id—Specifies the VLAN to which the port is configured.

• none—Specifies that the access port cannot belong to any VLAN.

Default Configuration

The interface belongs to the Default VLAN.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

When the port is assigned to a different VLAN, it is automatically removed from its previous VLAN and
added it to the new VLAN. If the port is assigned to none, it is removed from the previous VLAN and not
assigned to any other VLAN.

Example

The following example assigns access port gi1/0/1 to VLAN 2 (and removes it from its previous VLAN).

switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# switchport mode access
switchxxxxxx(config-if)# switchport access vlan 2

Cisco Business Switches 350 Series CLI Guide

1441

switchport trunk allowed vlan

VLAN Commands

switchport trunk allowed vlan

A trunk interface is an untagged member of a single VLAN, and, in addition, it may be an tagged member of
one or more VLANs. Use the switchport trunk allowed vlan Interface Configuration mode command to
add/remove VLAN(s) to/from a trunk port. Use the no form of the command to return to the default.

Syntax

switchport trunk allowed vlan {all | none | vlan-list | add vlan-list | remove vlan-list | except vlan-list}

no switchport trunk allowed vlan

Parameters

• all—Specifies all VLANs from 1 to 4094. At any time, the port belongs to all VLANs existing at the

time. (range: 1–4094).

• none—Specifies an empty VLAN list The port does not belong to any VLAN.

• vlan-list— Specifies the list of VLAN IDs the interface is member of. The VLAN(s) specified in this

command are the only VLAN(s) the port will be member of (all previous settings related to trunk VLAN
membership are discarded). Use a hyphen to designate a range of IDs. Separate nonconsecutive VLAN
IDs with a comma and no spaces (range: 1-4094).

• add vlan-list—List of VLAN IDs to add to the port. Separate nonconsecutive VLAN IDs with a comma

and no spaces. Use a hyphen to designate a range of IDs.

• remove vlan-list—List of VLAN IDs to remove from a port. Separate nonconsecutive VLAN IDs with

a comma and no spaces. Use a hyphen to designate a range of IDs.

• except vlan-list—List of VLAN IDs including all VLANs from range 1-4094 except VLANs belonging

to vlan-list.

Default Configuration

By default, trunk ports belongs to all created VLANs.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use the switchport trunk allowed vlan command to specify which VLANs the port belongs to when its
mode is configured as trunk.

Non-existed VLANs can be configured. When a non-existed VLAN is created the port will add to it
automatically.

Forbidden VLANs can be configured.

Example

To add VLANs 2,3 and 100 to trunk ports 1 to 13

Cisco Business Switches 350 Series CLI Guide

1442

VLAN Commands

switchport trunk allowed vlan

switchxxxxxx(config)# interface range gi1/0/1-3
switchxxxxxx(config-if)# switchport mode trunk
switchxxxxxx(config-if)# switchport trunk allowed vlan add 2-3,100
switchxxxxxx(config-if)

Cisco Business Switches 350 Series CLI Guide

1443

switchport trunk native vlan

VLAN Commands

switchport trunk native vlan

If an untagged packet arrives on a trunk port, it is directed to the port’s native VLAN. Use the switchport
trunk native vlan Interface Configuration mode command to define the native VLAN for a trunk interface.
Use the no form of this command to restore the default native VLAN.

Syntax

switchport trunk native vlan {vlan-id | none}

no switchport trunk native vlan

Parameters

• vlan-id—Specifies the native VLAN ID.

• none—Specifies the access port cannot belong to any VLAN.

Default Configuration

The default native VLAN is the Default VLAN.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

A value of the interface PVID is set to this VLAN ID.When the interface belongs to the Native VLAN it is
set as VLAN untagged egress interface.

The configuration is applied only when the port mode is trunk.

Examples

The following example defines VLAN 2 as native VLAN for port gi1/0/1:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport trunk native vlan 2
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1444

VLAN Commands

switchport general allowed vlan

switchport general allowed vlan

General ports can receive tagged or untagged packets. Use the switchport general allowed vlan Interface
Configuration mode command to add/remove VLANs to/from a general port and configure whether packets
on the egress are tagged or untagged. Use the no form of this command to reset to the default.

Syntax

switchport general allowed vlan add vlan-list [tagged | untagged]

switchport general allowed vlan remove vlan-list

no switchport general allowed vlan

Parameters

• add vlan-list—List of VLAN IDs to add. Separate nonconsecutive VLAN IDs with a comma and no

spaces. Use a hyphen to designate a range of IDs. (range: 1–4094)

• remove vlan-list—List of VLAN IDs to remove. Separate nonconsecutive VLAN IDs with a comma

and no spaces. Use a hyphen to designate a range of IDs.

• tagged—Specify that packets are transmitted tagged for the configured VLANs

• untagged—Specify that packets are transmitted untagged for the configured VLANs (this is the default)

Default Configuration

The port is not a member of any VLAN.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

If the interface is a forbidden member of an added VLAN, the interface does not become a member of this
specific VLAN. There will be an error message in this case ("An interface cannot become a a member of a
forbidden VLAN. This message will only be displayed once.") and the command continues to execute in case
if there are more VLANs in the vlan-list.

A non-existed VLAN cannot be configured. When a VLAN is removed it is deleted from the vlan-list.

The configuration is applied only when the port mode is general.

Example

The example adds gi1/0/1 and to VLAN 2 and 3. Packets are tagged on the egress:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport general allowed vlan add 2-3 tagged

Cisco Business Switches 350 Series CLI Guide

1445

switchport general pvid

VLAN Commands

switchport general pvid

Use the switchport general pvid Interface Configuration mode command to configure the Port VLAN ID
(PVID) of an interface when it is in general mode. Use the no form of this command to restore the default
configuration.

Syntax

switchport general pvid vlan-id

no switchport general pvid

Parameters

• vlan-id—Specifies the Port VLAN ID (PVID).

Default Configuration

The PVID is the Default VLAN PVID.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Examples

Example 1 - The following example sets the gi1/0/2 PVID to 234.

switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# switchport general pvid 234

Example 2 - The following example performs the following:

• Adds VLANs 2&3 as tagged, and VLAN 100 as untagged to gi1/0/4

• Defines VID 100 as the PVID

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# switchport mode general
switchxxxxxx(config-if)# switchport general allowed vlan add 2-3 tagged
switchxxxxxx(config-if)# switchport general allowed vlan add 100 untagged
switchxxxxxx(config-if)# switchport general pvid 100
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1446

VLAN Commands

switchport general ingress-filtering disable

switchport general ingress-filtering disable

Use the switchport general ingress-filtering disable Interface Configuration mode command to disable port
ingress filtering (no packets are discarded at the ingress) on a general port. Use the no form of this command
to restore the default configuration.

Syntax

switchport general ingress-filtering disable

no switchport general ingress-filtering disable

Default Configuration

Ingress filtering is enabled.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example

The following example disables port ingress filtering on gi1/0/1.

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport mode general
switchxxxxxx(config-if)# switchport general ingress-filtering disable

Cisco Business Switches 350 Series CLI Guide

1447

switchport general acceptable-frame-type

VLAN Commands

switchport general acceptable-frame-type

The switchport general acceptable-frame-type Interface Configuration mode command configures the types
of packets (tagged/untagged) that are filtered (discarded) on the interface. Use the no form of this command
to return ingress filtering to the default.

Syntax

switchport general acceptable-frame-type {tagged-only | untagged-only | all}

no switchport general acceptable-frame-type

Parameters

• tagged-only—Ignore (discard) untagged packets and priority-tagged packets.

• untagged-only—Ignore (discard) VLAN-tagged packets (not including priority-tagged packets)

• all—Do not discard packets untagged or priority-tagged packets.

Default Configuration

All frame types are accepted at ingress (all).

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

Example

The following example configures port gi1/0/3 to be in general mode and to discard untagged frames at ingress.

switchxxxxxx(config)# interface gi1/0/3
switchxxxxxx(config-if)# switchport mode general
switchxxxxxx(config-if)# switchport general acceptable-frame-type tagged-only

Cisco Business Switches 350 Series CLI Guide

1448

VLAN Commands

switchport general forbidden vlan

switchport general forbidden vlan

Use the switchport general forbidden vlan Interface Configuration mode command to forbid adding/removing
specific VLANs to/from a port. Use the no form of this command to restore the default configuration.

Syntax

switchport general forbidden vlan {add vlan-list | remove vlan-list}

no switchport general forbidden vlan

Parameters

• add vlan-list—Specifies a list of VLAN IDs to add to interface. Separate nonconsecutive VLAN IDs

with a comma and no spaces. Use a hyphen to designate a range of IDs.

• remove vlan-list—Specifies a list of VLAN IDs to remove from interface. Separate nonconsecutive

VLAN IDs with a comma and no spaces. Use a hyphen designate a range of IDs.

Default Configuration

All VLANs are allowed.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The forbidden VLAN cannot be one that does not exist on the system, or one that is already defined on the
port.

Example

The following example define s gi1/0/4 as a forbidden membership in VLANs 5-7:

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# switchport general forbidden vlan add 5-7
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1449

switchport customer vlan

VLAN Commands

switchport customer vlan

Use the switchport customer vlan Interface Configuration mode command to set the port's VLAN when the
interface is in customer mode (set by the switchport mode command). Use the no form of this command to
restore the default configuration.

Syntax

switchport customer vlan vlan-id

no switchport customer vlan

Parameters

• vlan-id—Specifies the customer VLAN.

Default Configuration

No VLAN is configured as customer.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

When a port is in customer mode it is in QinQ mode. This enables the user to use their own VLAN arrangements
(PVID) across a provider network. The switch is in QinQ mode when it has one or more customer ports.

Example

The following example defines gi1/0/4 as a member of customer VLAN 5.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# switchport mode customer
switchxxxxxx(config-if)# switchport customer vlan 5

Cisco Business Switches 350 Series CLI Guide

1450

VLAN Commands

ethtype

ethtype

To define globally the Ethernet type used into S-VLAN tag, use the ethtype command in Global Configuration
mode. To restore the default configuration, use the no form of this command.

Syntax

ethtype dot1q | dot1ad | 9100 | 9200

no ethtype

Parameters

• dot1q—A value of 0x8100 (802.1q VLAN tag) is used as Ethernet tag in VLAN tag.

• dot1ad—A value of 0x88a8 (802.1ad VLAN tag) is used as Ethernet tag in VLAN tag.

• 9100—A value of 0x9100 is used as Ethernet tag in VLAN tag.

• 9200—A value of 0x9200 is used as Ethernet tag in VLAN tag.

Default Configuration

dot1q

Command Mode

Global Configuration mode

User Guidelines

Use the ethtype command, to define globally the Ethernet type used into S-VLAN tag. The configuration is
applied to all NNI interfaces. All non-edge interfaces are considered as NNI interfaces. The edge interface is
an interface having one of the following modes:

• customer

• vlan-mapping tunnel

• vlan-mapping one-to-one

Use the no ethtype command to restore the default configuration.

Example

This example sets the Ethernet type into the VLAN tag to dot1ad (0x88a8):

switchxxxxxx(config)# ethtype dot1ad

Cisco Business Switches 350 Series CLI Guide

1451

switchport nni ethtype

VLAN Commands

switchport nni ethtype

To define the Ethernet type used into S-VLAN tag on a NNI interface, use the switchport nni ethtype
command in Interface (Ethernet, Port Channel) Configuration mode. To restore the default configuration, use
the no form of this command.

Syntax

switchport nni ethtype dot1q | dot1ad | 9100 | 9200

no switchport nni ethtype

Parameters

• dot1q—A value of 0x8100 (802.1q VLAN tag) is used as Ethernet tag in VLAN tag.

• dot1ad—A value of 0x88a8 (802.1ad VLAN tag) is used as Ethernet tag in VLAN tag.

• 9100—A value of 0x9100 is used as Ethernet tag in VLAN tag.

• 9200—A value of 0x9200 is used as Ethernet tag in VLAN tag.

Default Configuration

Configured by the ethtype command.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use the switchport nni ethtype command, to define the Ethernet type used into S-VLAN tag on a NNI
interface. All non-edge interfaces are considered as NNI interfaces. The edge interface is an interface having
one of the following modes:

• customer

• vlan-mapping tunnel

• vlan-mapping one-to-one

Use the no switchport nni ethtype command to restore the default configuration.

Example

This example sets the Ethernet type into the VLAN tag to dot1ad (0x88a8):

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport nni ethtype dot1ad
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1452

VLAN Commands

switchport vlan-mapping tunnel

switchport vlan-mapping tunnel

To configure selective tunneling on an edge interface, use the switchport vlan-mapping tunnel command
in Interface (Ethernet, Port Channel) Configuration mode. To delete the configuration, use the no form of this
command.

Syntax

switchport vlan-mapping tunnel {vlan-list | default} {outer-vlan-id | drop}

no switchport vlan-mapping tunnel [vlan-list | default]

Parameters

• vlan-list—Specifies the Customer VLANs (C-VLANs) for selective tunneling. The VLAN IDs in the

list are separated by a comma or a series of VLAN IDs separated by a hyphen (for example 1,2,3-5). The
range is from 1 to 4094.

• default—Specifies the list of the C-VLANs other than those not specified. If a default action is not

configured the input frames with unspecified C-VLANs are dropped.

• outer-vlan-id —Specifies the added an outer S-VLAN tag. The range of the S-VLAN tag is 1 to 4094.

• drop—Specify that frames with the specified C-VLANs are dropped.

Default Configuration

No VLAN mapping is configured.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use the switchport vlan-mapping tunnel vlan-list outer-vlan-id command to configure selective tunneling
for the given C-VLANs.

The S-VLAN specified by the outer-vlan-id argument must be created before configuring of this command.
If this VLAN does not exist the command fails.

Use the switchport vlan-mapping tunnel vlan-list drop command to configure selective drop for the given
C-VLANs.

Use the switchport vlan-mapping tunnel default outer-vlan-id command to configure tunneling for C-VLANs
other than those not specified.

Use the switchport vlan-mapping tunnel default drop command to configure drop C-VLANs other than
those not specified.

The switchport vlan-mapping tunnel command performs the following actions:

• Creates an ACL for mapping VLANs from vlan-list to outer-vlan-id, it has not been created.

• Adds to the ACL one rule for each VLAN from vlan-list.

Cisco Business Switches 350 Series CLI Guide

1453

switchport vlan-mapping tunnel

VLAN Commands

• Reserves the place into TTI for this ACL. If there is not enough free place into TTI the command fails.

Note. The ACL can be bound on the interface later by the switchport mode vlan-mapping tunnel command.

• Adds the edge interface to the VLAN specified by the outer-vlan-id argument.

The ACL contains V+1 rules, where:

• V—The number of specified C-VLANs.

A few switchport vlan-mapping tunnel commands can be defined on the same interface, only if their vlan-list
arguments do not contain common VLAN-IDs.

Use the no switchport vlan-mapping tunnel vlan-list command to delete tunneling for the specified C-VLANs
and remove the interface from the corresponding S-VLANs.

Use the no switchport vlan-mapping tunnel default command to delete the default tunneling and remove
the interface from the corresponding S-VLANs.

Use the no switchport vlan-mapping tunnel command to delete tunneling for all C-VLANs and remove the
interface from the corresponding S-VLANs.

Examples

Example 1 This example shows how to configure traditional tunnelling of all traffic on the port to a S-VLAN
ID of 10:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport vlan-mapping tunnel default 10
switchxxxxxx(config-if)# exit

Example 2 This example shows how to configure selective tunneling on the port so that traffic with a C-VLAN
ID of 5, 7, or 8 would be tunneled with a S-VLAN ID of 100. The traffic of any other C-VLAN IDs is dropped:

switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# switchport vlan-mapping tunnel 5,7-8 100
switchxxxxxx(config-if)# switchport vlan-mapping tunnel 12,27 5
switchxxxxxx(config-if)# switchport vlan-mapping tunnel default drop
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1454

VLAN Commands

switchport vlan-mapping tunnel l2protocol vlan

switchport vlan-mapping tunnel l2protocol vlan

To specify S-VLAN-ID used for encapsulation of forwarded untagged Layer 2 frames received on a
vlan-mapping tunnel interface, use the switchport vlan-mapping tunnel l2protocol vlan command in
Interface (Ethernet, Port Channel) Configuration mode. To restore the default configuration, use the no form
of this command.

Syntax

switchport vlan-mapping tunnel l2protocol vlan vlan-id

no switchport vlan-mapping tunnel l2protocol vlan

Parameters

• vlan-id —Specifies S-VLAN-ID used to encapsulate of forwarded untagged Layer 2 frames.

Default Configuration

The VLAN_ID is not defined.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use the switchport vlan-mapping tunnel l2protocol vlan command, to specify S-VLAN-ID used for
encapsulation of forwarded untagged Layer 2 frames received on a vlan-mapping tunnel interface. The
S-VLAN ID can be that of an S-VLAN already defined on port or a new one

If the command is not configured the allowed untagged Layer 2 frames are not forwarded.

Example

The following example specifies the S-VLAN used for forwarding L2 frames:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport vlan-mapping tunnel l2protocol vlan 100
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1455

switchport vlan-mapping tunnel l2protocol cos

VLAN Commands

switchport vlan-mapping tunnel l2protocol cos

To specify a class of service (CoS) value globally into S-VLAN tag of forwarded Layer 2 frames to the Provide
network, use the switchport vlan-mapping tunnel l2protocol cos command in Global Configuration mode.
To restore the default configuration, use the no form of this command.

Syntax

switchport vlan-mapping tunnel l2protocol cos cos-value

no switchport vlan-mapping tunnel l2protocol cos

Parameters

• cos-value —Specifies the CoS value in range 0..7.

Default Configuration

The cos-value is 5.

Command Mode

Global Configuration mode

User Guidelines

Use the switchport vlan-mapping tunnel l2protocol cos command, to specify a class of service (CoS) value
globally into S-VLAN tag of forwarded Layer 2 frames to the Provide network.

Use the no switchport vlan-mapping tunnel l2protocol cos command, to return to the default CoS.

Example

The following example specifies the cos of forwarded L2 frames:

switchxxxxxx(config)# switchport vlan-mapping tunnel l2protocol cos 6

Cisco Business Switches 350 Series CLI Guide

1456

VLAN Commands

switchport vlan-mapping tunnel l2protocol cos interface

switchport vlan-mapping tunnel l2protocol cos interface

To specify a class of service (CoS) value per interface into S-VLAN tag of forwarded Layer 2 frames to the
Provide network, use the switchport vlan-mapping tunnel l2protocol cos interface command in Interface
(Ethernet, Port Channel) Configuration mode. To restore the default configuration, use the no form of this
command.

Syntax

switchport vlan-mapping tunnel l2protocol cos interface cos-value

vlan-mapping tunnel l2protocol cos interface

Parameters

• cos-value —Specifies the CoS value in range 0..7.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use the switchport vlan-mapping tunnel l2protocol cos interface command, to specify a class of service
(CoS) value globally into S-VLAN tag of forwarded Layer 2 frames received on the given vlan-mapping
tunnel edge interface and sent to the Provide network.

Use the no switchport vlan-mapping tunnel l2protocol cos interface command, to return to the default
CoS on the given vlan-mapping tunnel edge interface.

Example

The following example specifies the cos of forwarded L2 tunneled frames:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport vlan-mapping tunnel l2protocol cos interface 6
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1457

switchport vlan-mapping tunnel l2protocol drop-threshold

VLAN Commands

switchport vlan-mapping tunnel l2protocol drop-threshold

To specify the drop threshold for forwarded L2 packets that can be received on the given vlan-mapping tunnel
edge interface (in kilobits per second), use the switchport vlan-mapping tunnel l2protocol drop-threshold
command in Interface (Ethernet, Port Channel) Configuration mode. To restore the default configuration, use
the no form of this command.

Syntax

switchport vlan-mapping tunnel l2protocol drop-threshold [disable | enable committed-rate-kbps]

no switchport vlan-mapping tunnel l2protocol drop-threshold

Parameters

• disable - disable drop-threshold on interface

• enable - enable drop-threshold on interface

• committed-rate-kbps—Specifies the threshold in kilobits per second (range 8-256)

Default Configuration

Drop-threshold is enabled and rate set to 32 kilobits per second.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use the switchport vlan-mapping tunnel l2protocol drop-threshold command, to enable or disable drop
threshold, and set the drop rate, for received forwarded L2 protocol frames on a given vlan-mapping tunnel
edge interface. The frames exceeding this threshold are dropped.

The L2 protocol frames are protocol frames which are tunneled using command switchport vlan-mapping
tunnel l2protocol forward, on page 1459.

Use the no switchport vlan-mapping tunnel l2protocol drop-threshold command, to return configuration
to default - drop threshold enabled with rate of 32 kilobits per second.

Example

The following example sets the drop threshold to 16 kilobits per second:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport vlan-mapping tunnel l2protocol drop-threshold 16
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1458

VLAN Commands

switchport vlan-mapping tunnel l2protocol forward

switchport vlan-mapping tunnel l2protocol forward

To enable forward over the Provider network untagged Layer 2 frames received on a vlan-mapping tunnel
interface, use the switchport vlan-mapping tunnel l2protocol forward command in Interface (Ethernet,
Port Channel) Configuration mode. To restore the default configuration, use the no form of this command.

Syntax

switchport vlan-mapping tunnel l2protocol forward [protocol]

no switchport vlan-mapping tunnel l2protocol forward [protocol]

Parameters

• protocol —Configures a protocol the command is applied. The argument may have one of the following

values:

• cdp

• lldp

• stp

• vtp

If the protocol argument is not configured then the command is applied to all these protocols.

Default Configuration

The Layer 2 frames are not forwarded.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

By default, the switch drops on edge ports input L2 PDUs with the following destination MAC addresses:

• 01:80:C2:00:00:00-01:80:C2:00:00:FF - with the exception of LACP frame (destination MAC

01:80:C2:00:00:02) which is processed by the edge port

• 01:00:0C:00:00:00-01:00:0C:FF:FF:FF

• 01:00:0C:CD:CD:D0

Use the switchport vlan-mapping tunnel l2protocol forward command to enable forward over the Provider
network untagged frames of a given Layer 2 protocol received on a vlan-mapping tunnel interface. The received
tagged Layer 2 frames are discarded.

When a L2 protocol is forwarded the switch overwrites the customer destination MAC address with a
’well-known’ Multicast address 01:00:0C:CD:CD:D0 before transmission the frame on non-edge port.

Cisco Business Switches 350 Series CLI Guide

1459

switchport vlan-mapping tunnel l2protocol forward

VLAN Commands

When a frame with the destination address equals to this well-known Multicast address is received on non-edge
port the switch forwards it to all non-edge ports belonging to the S_VLAN and to all edge ports belonging to
the S-VLAN and configured with the forward option for the given protocol.

The switch replaces the 'well-known’ destination MAC address with the respective Layer 2 protocol MAC
address he respective Layer 2 protocol MAC address.

CDP cannot be both enabled and also tunneled on the same interfaces. To enable CDP tunneling on a Port
Channel interface, CDP first needs to be disabled on all the members of the Port Channel (active and in-active).
Likewise, an Ethernet Interface with CDP enabled cannot be added to a Port Channel on which CDP tunneling
is enabled.

LLDP cannot be both enabled and also tunneled on the same interfaces. To enable LLDP tunneling on a Port
Channel interface, LLDP first needs to be disabled on all the members of the Port Channel (active and
in-active). Likewise, an Ethernet Interface with CDP enabled cannot be added to a Port Channel on which
CDP tunneling is enabled.

If tunnel is defined, use the no switchport vlan-mapping tunnel l2protocol forward command without the
protocol argument to return to the default treatment of all Layer 2 BPDUs.

Use the no switchport vlan-mapping tunnel l2protocol forward command with the protocol argument to
return to the default treatment of the specified protocol BPDUs.

Example 1—The following example specifies that all the 4 protocols (CDP, LLDP, VTP and STP)
frames will be forwarded:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport vlan-mapping tunnel l2protocol forward
switchxxxxxx(config-if)# exit

Example 2—The following example specifies that only CDP and LLDP protocols frames will be
forwarded (Other 2 protocols frames of STP and VTP will be dropped):

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport vlan-mapping tunnel l2protocol forward cdp
switchxxxxxx(config-if)# switchport vlan-mapping tunnel l2protocol forward lldp
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1460

VLAN Commands

switchport vlan-mapping one-to-one

switchport vlan-mapping one-to-one

To configure one-to-one VLAN translation on an edge interface, use the switchport vlan-mapping one-to-one
command in Interface (Ethernet, Port Channel) Configuration mode. To delete the configuration, use the no
form of this command.

Syntax

switchport vlan-mapping one-to-one vlan-id translated-vlan-id

no switchport vlan-mapping one-to-one [vlan-id]

Parameters

• vlan-id—Specifies the external VLAN (E-VLAN) for one-to-one VLAN translation. The range is from

1 to 4094.

• translated-vlan-id —Specifies B-VLAN replacing the E-VLAN. The range is from 1 to 4094.

Default Configuration

No VLAN mapping is configured.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

Use the switchport vlan-mapping one-to-one command to configure selective one-to-one VLAN translation.

The S-VLAN specified by the translated-vlan-id argument must be created before configuring of this command.
If this VLAN does not exist the command fails.

A few switchport vlan-mapping one-to-one commands with different arguments can be defined on the same
interface.

In the vlan-mapping one-to-one mode an interface belongs to all S-VLANs for which mapping on this interface
is defined as egress tagged interface. The interface PVID is set to 4095.

In the vlan-mapping one-to-one mode an interface uses one ingress ACL and one egress ACL. The switchport
vlan-mapping one-to-one command adds rules to this ACLs. These

ACLs are applied in order to:

• Ingress ACL (in TTI):

• Replace specified C-VLAN-ID by S-VLAN-ID.

• Drop frames with unspecified C-VLAN-IDs.

• Drop untagged input frames.

• Egress ACL (in TCAM):

• Replace S-VLAN-ID by C-VLAN-ID.

Cisco Business Switches 350 Series CLI Guide

1461

switchport vlan-mapping one-to-one

VLAN Commands

The switchport vlan-mapping one-to-one command adds rules to these ACLs and they are bound on the
interface only if its mode is vlan-mapping one-to-one.

The ingress ACL contains V+1 rules and the egress ACL contains V rules, where

• V—The number of specified C-VLANs.

Use the no switchport vlan-mapping one-to-one vlan-id command to delete the one-to-one VLAN translation
configuration for the given E-VLAN.

Use the no switchport vlan-mapping one-to-one command to delete all VLAN one-to-one translations.

Example

This example shows how to configure one-to-one VLAN translation on a port:

switchxxxxxx(config)# interface gi1/0/1
switchxxxxxx(config-if)# switchport vlan mapping one-to-one 5 105
switchxxxxxx(config-if)# switchport vlan mapping one-to-one 15 5
switchxxxxxx(config-if)# switchport vlan mapping one-to-one 105 225
switchxxxxxx(config-if)# exit

Cisco Business Switches 350 Series CLI Guide

1462

VLAN Commands

map protocol protocols-group

map protocol protocols-group

Use the map protocol protocols-group VLAN Configuration mode command to map a protocol to a group
of protocols. This protocol group can then be used in switchport general map protocols-group vlan. Use the
no form of this command to delete a protocol from a group.

Syntax

map protocol protocol [encapsulation-value] protocols-group group

no map protocol protocol [encapsulation]

Parameters

• protocol—Specifies a 16-bit protocol number or one of the reserved names listed in the User Guidelines.

(range: 0x0600–0xFFFF)

• encapsulation-value—Specifies one of the following values: Ethernet, rfc1042, llcOther.

• protocols-group group—Specifies the group number of the group of protocols (range: 1–2147483647).

Default Configuration

The default encapsulation value is Ethernet.

Command Mode

VLAN Database Configuration mode

User Guidelines

Forwarding of packets based on their protocol requires setting up groups of protocols and then mapping these
groups to VLANs.

The value 0x8100 is not valid as the protocol number for Ethernet encapsulation.

The following protocol names are reserved for Ethernet Encapsulation:

• ip

• arp

• ipv6

• ipx

Example

The following example maps the IP protocol to protocol group number 213.

switchxxxxxx(config)# vlan database
switchxxxxxx(config-vlan)# map protocol ip protocols-group 213

Cisco Business Switches 350 Series CLI Guide

1463

switchport general map protocols-group vlan

VLAN Commands

switchport general map protocols-group vlan

Use the switchport general map protocols-group vlan Interface Configuration mode command to forward
packets based on their protocol, otherwise known as setting up a classifying rule. This command forwards
packets arriving on an interface containing a specific protocol to a specific VLAN. Use the no form of this
command to stop forwarding packets based on their protocol.

Syntax

switchport general map protocols-group group vlan vlan-id

no switchport general map protocols-group group

Parameters

• group—Specifies the group number as defined in map protocol protocols-group command (range:

1–65535).

• vlan-id—Defines the VLAN ID in the classifying rule.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The VLAN classification rule priorities are:

• MAC-based VLAN (best match among the rules)

• Subnet-based VLAN (best match among the rules)

• Protocol-based VLAN

• PVID

Example

The following example forwards packets with protocols belong to protocol-group 1 to VLAN 8.

switchxxxxxx(config-if)# switchport general map protocols-group 1 vlan 8

Cisco Business Switches 350 Series CLI Guide

1464

VLAN Commands

show vlan protocols-groups

show vlan protocols-groups

Use the show vlan protocols-groups EXEC mode command to display the protocols that belong to the defined
protocols-groups.

Syntax

show vlan protocols-groups

Command Mode

User EXEC mode

Example

The following example displays protocols-groups information.

switchxxxxxx# show vlan protocols-groups

Encapsulation
-------------
Ethernet
Ethernet
Ethernet
Ethernet

Protocol
--------------
0x800 (IP)
0x806 (ARP)
0x86dd (IPv6)
0x8898

Group ID
--------
1
1
2
3

Cisco Business Switches 350 Series CLI Guide

1465

map mac macs-group

VLAN Commands

map mac macs-group

Use the map mac macs-group VLAN Configuration mode command to map a MAC address or range of
MAC addresses to a group of MAC addresses. Use the no form of this command to delete the mapping.

Syntax

map mac mac-address {prefix-mask | host} macs-group group

no map mac mac-address {prefix-mask | host}

Parameters

• mac-address—Specifies the MAC address to be mapped to the group of MAC addresses.

• prefix-mask—Specifies the number of ones in the mask.

• host—Specifies that the mask is comprised of all 1s.

• group—Specifies the group number (range: 1–2147483647)

Command Mode

VLAN Database Configuration mode

User Guidelines

Forwarding of packets based on their MAC address requires setting up groups of MAC addresses and then
mapping these groups to VLANs.

Up to 256 MAC addresses (host or range) can be mapped to one or many MAC-based VLAN groups.

Example

The following example creates two groups of MAC addresses, sets a port to general mode and maps the groups
of MAC addresses to specific VLANs.

switchxxxxxx(config)# vlan database
switchxxxxxx(config-vlan)# map mac 0000.1111.0000 32 macs-group 1
switchxxxxxx(config-vlan)# map mac 0000.0000.2222 host macs-group 2
switchxxxxxx(config-vlan)# exit
switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# switchport mode general
switchxxxxxx(config-if)# switchport general map macs-group 1 vlan 2
switchxxxxxx(config-if)# switchport general map macs-group 2 vlan 3

Cisco Business Switches 350 Series CLI Guide

1466

VLAN Commands

switchport general map macs-group vlan

switchport general map macs-group vlan

Use the switchport general map macs-group vlan Interface Configuration mode command to set a MAC-based
classification rule. Use the no form of this command to delete a classification rule.

Syntax

switchport general map macs-group group vlan vlan-id

no switchport general map macs-group group

Parameters

• group—Specifies the group number (range: 1–2147483647)

• vlan-id—Defines the VLAN ID associated with the rule.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

MAC-based VLAN rules cannot contain overlapping ranges on the same interface.

The VLAN classification rule priorities are:

• MAC-based VLAN (best match among the rules)

• Subnet-based VLAN (best match among the rules)

• Protocol-based VLAN

• PVID

User Guidelines

Each MAC address (host or range) in the MAC-based group assigned to an interface consumes a single TCAM
entry.

Example

The following example creates two groups of MAC addresses, sets a port to general mode and maps the groups
of MAC addresses to specific VLANs.

switchxxxxxx(config)# vlan database
switchxxxxxx(config-vlan)# map mac 0000.1111.0000 32 macs-group 1
switchxxxxxx(config-vlan)# map mac 0000.0000.2222 host macs-group 2
switchxxxxxx(config-vlan)# exit
switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# switchport mode general
switchxxxxxx(config-if)# switchport general map macs-group 1 vlan 2
switchxxxxxx(config-if)# switchport general map macs-group 2 vlan 3

Cisco Business Switches 350 Series CLI Guide

1467

show vlan macs-groups

VLAN Commands

show vlan macs-groups

Use the show vlan macs-groups EXEC mode command to display the MAC addresses that belong to the
defined MAC-based classification rules.

Syntax

show vlan macs-groups

Default Configuration

Command Mode

User EXEC mode

Example

The following example displays defined MAC-based classification rules.

switchxxxxxx# show vlan macs-groups

MAC Address

Mask
--------------------- --------------------- ---------------------
20
40

00:12:34:56:78:90
00:60:70:4c:73:ff

Group ID

22
1

Cisco Business Switches 350 Series CLI Guide

1468

VLAN Commands

map subnet subnets-group

map subnet subnets-group

Use the map subnet subnets-group VLAN Configuration mode command to map an IP subnet to a group
of IP subnets. Use the no form of this command to delete the map.

Syntax

map subnet ip-address prefix-mask subnets-group group

no map subnet ip-address prefix-mask

Parameters

• ip-address—Specifies the IP address prefix of the subnet to be mapped to the group.

• prefix-mask—Specifies the number of 1s in the mask.

• group—Specifies the group number. (range: 1–2147483647)

Command Mode

VLAN Database Configuration mode

User Guidelines

Forwarding of packets based on their IP subnet requires setting up groups of IP subnets and then mapping
these groups to VLANs.

Example

The following example maps an IP subnet to the group of IP subnets 4. It then maps this group of IP subnets
to VLAN 8

switchxxxxxx(config)# vlan database
switchxxxxxx(config-vlan)# map subnet 172.16.1.1 24 subnets-group 4
switchxxxxxx(config-vlan)# switchport general map subnets-group 4 vlan 8

Cisco Business Switches 350 Series CLI Guide

1469

switchport general map subnets-group vlan

VLAN Commands

switchport general map subnets-group vlan

Use the switchport general map subnets-group vlan Interface Configuration mode command to set a
subnet-based classification rule. Use the no form of this command to delete a subnet-based classification rule.

Syntax

switchport general map subnets-group group vlan vlan-id

no switchport general map subnets-group group

Parameters

• group—Specifies the group number. (range: 1–2147483647)

• vlan-id—Defines the VLAN ID associated with the rule.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The VLAN classification rule priorities are:

• MAC-based VLAN (Best match among the rules)

• Subnet-based VLAN (Best match among the rules)

• Protocol-based VLAN

• PVID

Example

The following example maps an IP subnet to the group of IP subnets 4. It then maps this group of IP subnets
to VLAN 8

switchxxxxxx(config)# vlan database
switchxxxxxx(config-vlan)# map subnet 172.16.1.1 24 subnets-group 4
switchxxxxxx(config-vlan)# switchport general map subnets-group 4 vlan 8

Cisco Business Switches 350 Series CLI Guide

1470

VLAN Commands

show vlan subnets-groups

show vlan subnets-groups

Use the show vlan subnets-groups EXEC mode command to display subnets-groups information.

Syntax

show vlan subnets-groups

Command Mode

User EXEC mode

Example

The following example displays subnets-groups information.

switchxxxxxx# show vlan subnets-groups
IP Subnet Address
----------------- ----------- --------------

Group ID

Mask

1.1.1.1
172.16.2.0

32
24

1
2

Cisco Business Switches 350 Series CLI Guide

1471

show interfaces switchport

VLAN Commands

show interfaces switchport

Use the show interfaces switchport Privileged EXEC command to display the administrative and operational
status of all interfaces or a specific interface.

Syntax

show interfaces switchport [interface-id]

Parameters

• Interface-id—Specifies an interface ID. The interface ID can be one of the following types: Ethernet

port or port-channel.

Command Mode

Privileged EXEC mode

Default

Displays the status of all interfaces.

User Guidelines

Each port mode has its own private configuration. The show interfaces switchport command displays all
these configurations, but only the port mode configuration that corresponds to the current port mode displayed
in "Administrative Mode" is active.

Example

switchxxxxxx# show interfaces switchport gi1/0/1
Gathering information...
S-VLAN Ethernet Type: 0x88a8 (802.1ad)
VLAN Mapping Tunnel L2 protocols Global CoS: 6
Name: gi1/0/1
Switchport: enable
Administrative Mode: access
Operational Mode: down
Access Mode VLAN: 1
Access Multicast TV VLAN: none
Trunking Native Mode VLAN: 1
Trunking VLANs: 1

2-4094 (Inactive)

General PVID: 1
General VLANs: none
General Egress Tagged VLANs: none
General Forbidden VLANs: none
General Ingress Filtering: enabled
General Acceptable Frame Type: all
General GVRP status: Enabled
General GVRP VLANs: none
Customer Mode VLAN: none
VLAN Mapping Tunnel:
S-VLAN Ethernet Type: 0x8100 (802.1q)
C-VLANs
--------------------

Outer S-VLAN
------------

Cisco Business Switches 350 Series CLI Guide

1472

VLAN Commands

show interfaces switchport

12
100
1100

Translated S-VLAN
----------------------
102
112
10

2
12,16-18
default
VLAN Mapping Tunnel L2 protocols S-VLAN: 100
VLAN Mapping Tunnel L2 protocols Interface CoS: 6 (global)
VLAN Mapping Tunnel L2 protocols forward enabled: cdp,stp
Drop Threshold: 4 kbps (default)
VLAN Mapping One-to-one:
C-VLANs
--------------------
2
12
100
Private-vlan promiscuous-association primary VLAN: none
Private-vlan promiscuous-association Secondary VLANs: none
Private-vlan host-association primary VLAN: none
Private-vlan host-association Secondary VLAN: none
Protected: Enabled, Uplink is gi1/0/1
Classification rules:
Classification Type
-------------------
Protocol
Protocol
Protocol
Subnet
MAC

VLAN ID
-------
19
20
72
15
77

Group ID
--------

1
1
2
1
1

Cisco Business Switches 350 Series CLI Guide

1473

private-vlan

private-vlan

VLAN Commands

Use the private-vlan Interface VLAN Configuration mode command to configure a private VLAN. Use the
no form of this command to return the VLAN to normal VLAN configuration.

Syntax

private-vlan {primary | community | isolated}

no private-vlan

Parameters

• primary—Designate the VLAN as a primary VLAN.

• community—Designate the VLAN as a community VLAN.

• isolated—Designate the VLAN as an isolated VLAN.

Default Configuration

No private VLANs are configured.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

• The VLAN type cannot be changed if there is a private VLAN port that is a member in the VLAN.

• The VLAN type cannot be changed if it is associated with other private VLANs.

• The VLAN type is not kept as a property of the VLAN when the VLAN is deleted.

Example

The following example set vlan 2 to be primary vlan:

switchxxxxxx(config)# interface vlan 2
switchxxxxxx(config-if)# private-vlan primary

Cisco Business Switches 350 Series CLI Guide

1474

VLAN Commands

private-vlan association

private-vlan association

Use the private-vlan association Interface VLAN Configuration mode command to configure the association
between the primary VLAN and secondary VLANs. Use the no form of this command to remove the association.

Syntax

private-vlan association [add | remove] secondary-vlan-list

no private-vlan association

Parameters

• add secondary-vlan-list—List of VLAN IDs of type secondary to add to a primary VLAN. Separate

nonconsecutive VLAN IDs with a comma and no spaces. Use a hyphen to designate a range of IDs.This
is the default action.

• remove secondary-vlan-list—List of VLAN IDs of type secondary to remove association from a primary
VLAN. Separate nonconsecutive VLAN IDs with a comma and no spaces. Use a hyphen to designate a
range of IDs.

Default Configuration

No private VLANs are configured.

Command Mode

Interface (VLAN) Configuration mode

User Guidelines

• The command can only be executed in the context of the primary VLAN.

• A private VLAN cannot be removed or have its type changed, if it is associated with other private VLANs.

• A primary VLAN can be associated with only a single, isolated VLAN.

• A secondary VLAN can be associated with only one primary VLAN.

• The association of secondary VLANs with a primary VLAN cannot be removed if there are private

VLAN ports that are members in the secondary VLAN.

• In MSTP mode, all the VLANs that are associated with a private VLAN must be mapped to the same

instance.

Example

The following example associate secondary VLAN 20,21,22 and 24 to primary VLAN 2.

switchxxxxxx(config)# interface vlan 2
switchxxxxxx(config-if)# private-vlan association add 20-22,24

Cisco Business Switches 350 Series CLI Guide

1475

switchport private-vlan mapping

VLAN Commands

switchport private-vlan mapping

Use the switchport private-vlan mapping Interface Configuration mode command to configure the VLANs
of the private VLAN promiscuous port. Use the no form of this command to reset to default.

Syntax

switchport private-vlan mapping primary-vlan-id [add | remove] secondary-vlan-list

no switchport private-vlan mapping

Parameters

• primary-vlan-id —The VLAN ID of the primary VLAN.

• add secondary-vlan-list—Specifies one or more secondary VLANs to be added to the port.

• remove secondary-vlan-list—Specifies one or more secondary VLANs to be removed from the port.

Default Configuration

No VLAN is configured.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The secondary VLANs should be associated with the primary VLANs, otherwise the configuration is not
accepted.

Example

The following example add promiscuous port gi1/0/4 to primary VLAN 10 and to secondary VLAN 20.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# switchport private-vlan mapping 10 add 20

Cisco Business Switches 350 Series CLI Guide

1476

VLAN Commands

switchport private-vlan host-association

switchport private-vlan host-association

Use the switchport private-vlan host-association Interface Configuration mode command to configure the
association of a host port with primary and secondary VLANs of the private VLAN. Use the no form of this
command to reset to default.

Syntax

switchport private-vlan host-association primary-vlan-id secondary-vlan-id

no switchport private-vlan host-association

Parameters

• primary-vlan-id—The VLAN ID of the primary VLAN.

• secondary-vlan-id—Specifies the secondary VLAN.

Default Configuration

No association.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

The secondary VLAN must be associated with the primary VLAN, otherwise the configuration is not accepted.
See the private-vlan association command.

The port association configuration depends on the type of the secondary VLAN.

The port association configuration for a community secondary VLAN includes:

• The port is added as untagged to the primary VLAN and to the secondary VLAN.

• The PVID is set to the VLAN-ID of the secondary VLAN.

• The port ingress filtering is enabled.

The port association configuration for an isolated secondary VLAN includes:

• The port is added as untagged only to the primary VLAN and is not added to the secondary VLAN.

• The PVID is set to the VLAN-ID of the secondary VLAN.

• The port ingress filtering is disabled.

Example

The following example set port gi1/0/4 to secondary VLAN 20 in primary VLAN 10.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# switchport private-vlan host-association 10 20

Cisco Business Switches 350 Series CLI Guide

1477

show vlan private-vlan

VLAN Commands

show vlan private-vlan

Use the show vlan private-vlan EXEC mode command to display private VLAN information.

Syntax

show vlan private-vlan [tag vlan-id]

Parameters

• tag vlan-id—Primary VLAN that represent the private VLAN to be displayed.

Default Configuration

All private VLANs are displayed.

Command Mode

User EXEC mode

User Guidelines

The show vlan private-vlan command does not include non-private VLAN ports that are members in private
VLANs. Tag parameters of non-primary VLAN will result in an empty show output.

Example

Primary

switchxxxxxx# show vlan private-vlan
Secondary

Type
----------- ----------- ----------- ----------------------
primary
isolated
primary
community

gi1/0/1
gi1/0/2
gi1/0/3
gi1/0/4

150
150
160
160

Ports

161

151

switchxxxxxx# show vlan private-vlan 150

Primary

Secondary

Type
----------- ----------- ----------- ----------------------
primary
isolated

gi1/0/1
gi1/0/4

150
150

Ports

151

Cisco Business Switches 350 Series CLI Guide

1478

VLAN Commands

switchport access multicast-tv vlan

switchport access multicast-tv vlan

To assign a Multicast-TV VLAN to an access port, use the switchport access multicast-tv vlan command
in Interface (Ethernet, Port Channel) Configuration mode. To return to the default, use the no format of the
command.

Syntax

switchport access multicast-tv vlan vlan-id

no switchport access multicast-tv vlan

Parameters

• vlan-id—Specifies the Multicast TV VLAN ID.

Default Configuration

Receiving Multicast transmissions is disabled.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

When the port is assigned to a different Multicast-TV VLAN, it is automatically removed from its previous
VLAN and added it to the new Multicast-TV VLAN.

When an existed Multicast-TV VLAN is assigned to an access port, the multicast messages received on a
membership of the Multicast-TV VLAN are forwarded to the access port. All messages received on the access
port are bridged only into its Access VLAN.

Example

The following example enables gi1/0/4 to receive Multicast transmissions from VLAN 11.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# switchport access multicast-tv vlan 11

Cisco Business Switches 350 Series CLI Guide

1479

switchport customer multicast-tv vlan

VLAN Commands

switchport customer multicast-tv vlan

To assign Multicast-TV VLANs to a customer port, use the switchport customer multicast-tv vlan command
in Interface (Ethernet, Port Channel) Configuration mode. To return to the default, use the no format of the
command.

Syntax

switchport customer multicast-tv vlan {add vlan-list | remove vlan-list}

Parameters

• add vlan-list—Specifies a list of Multicast TV VLANs to add to interface.

• remove vlan-list—Specifies a list of Multicast TV VLANs to remove from interface.

Default Configuration

The port is not a member in any Multicast TV VLAN.

Command Mode

Interface (Ethernet, Port Channel) Configuration mode

User Guidelines

When an existed Multicast-TV VLAN is assigned to a customer port, the multicast messages received on a
membership of the Multicast-TV VLAN are forwarded to the customer port. All messages received on the
customer port are not bridged only into the Multicast-TV VLAN.

Example

The following example enables gi1/0/4 to receive Multicast transmissions from VLANs 5, 6, 7.

switchxxxxxx(config)# interface gi1/0/4
switchxxxxxx(config-if)# switchport customer multicast-tv vlan add 5-7

Cisco Business Switches 350 Series CLI Guide

1480

VLAN Commands

show vlan multicast-tv

show vlan multicast-tv

Use the show vlan Multicast-tv EXEC mode command to display the source and receiver ports of Multicast-TV
VLAN. Source ports can transmit and receive traffic to/from the VLAN, while receiver ports can only receive
traffic from the VLAN.

Syntax

show vlan Multicast-tv vlan vlan-id

Parameters

• vlan-id—Specifies the VLAN ID.

Command Mode

User EXEC mode

Example

The following example displays information on the source and receiver ports of Multicast-TV VLAN 1000.

switchxxxxxx# show vlan multicast-tv vlan 1000

Source Ports
------------
gi1/0/3, gi1/0/4

Receiver Ports
----------------------
gi1/0/1-2

Cisco Business Switches 350 Series CLI Guide

1481

vlan prohibit-internal-usage

VLAN Commands

vlan prohibit-internal-usage

Use the vlan prohibit-internal-usage command in Global configuration mode to specify VLANs that cannot
be used by the switch as internal VLANs.

Syntax

vlan prohibit-internal-usage none | {add | except | remove} vlan-list

Parameters

• none—The Prohibit Internal Usage VLAN list is empty: any VLAN can be used by the switch as internal.

• except—The Prohibit Internal Usage VLAN list includes all VLANs except the VLANs specified by
the vlan-list argument: only the VLANs specified by the vlan-list argument can be used by the switch
as internal.

• add—Add the given VLANs to the Prohibit Internal Usage VLAN list.

• remove—Remove the given VLANs from the Prohibit Internal Usage VLAN list.

• vlan-list—List of VLAN. Separate nonconsecutive VLAN IDs with a comma and no spaces. Use a

hyphen to designate a range of IDs. The VLAN ID that can be used is from 1 through 4094.

Default Configuration

The Prohibit Internal usage VLAN list is empty.

Command Mode

Global Configuration mode

User Guidelines

The switch requires an internal VLAN in the following cases:

• One VLAN for each IP interface is defined directly on an Ethernet port or on a Port channel.

• One VLAN for each IPv6 tunnel.

• One VLAN for 802.1x.

When a switch needs an internal VLAN it takes a free VLAN with the highest VLAN ID.

Use the vlan prohibit-internal-usage command to define a list of VLANs that cannot be used as internal
VLANs after reload.

If a VLAN was chosen by the software for internal usage, but you want to use that VLAN for a static or
dynamic VLAN, do one of the following

• Add the VLAN to the Prohibited User Reserved VLAN list.

• Copy the Running Configuration file to the Startup Configuration file

• Reload the switch

Cisco Business Switches 350 Series CLI Guide

1482

VLAN Commands

vlan prohibit-internal-usage

• Create the VLAN

Example 1—The following example specifies that VLANs 4010, 4012, and 4090-4094 cannot be
used as internal VLANs:

vlan prohibit-internal-usage add 4010,4012,4090-4094

Example 2—The following specifies that all VLANs except 4000-4107 cannot be used as internal
VLANs:

vlan prohibit-internal-usage all
vlan prohibit-internal-usage remove 4000-4107

Example 3—The following specifies that all VLANs except 4000-4107 cannot be used as internal
VLANs:

vlan prohibit-internal-usage 4000-4107

Cisco Business Switches 350 Series CLI Guide

1483

show vlan internal usage

VLAN Commands

show vlan internal usage

Use the show vlan internal usage Privileged EXEC mode command to display a list of VLANs used internally
by the device (defined by the user).

Syntax

show vlan internal usage

Command Mode

Privileged EXEC mode

Example

The following example displays VLANs used internally by the switch:

show vlan internal usage

User Reserved VLAN list after reset: 4010,4012,4080-4094
Current User Reserved VLAN list: 4010,4012,4090-4094
VLAN
----
4089
4088
4087
4086

Usage
--------
gi1/0/2
gi1/0/3
tunnel 1
802.1x

Cisco Business Switches 350 Series CLI Guide

1484

Voice VLAN Commands

This chapter contains the following sections:

• show voice vlan, on page 1486
• show voice vlan local, on page 1489
• voice vlan state, on page 1490
• voice vlan refresh, on page 1492
• voice vlan id, on page 1493
• voice vlan vpt, on page 1494
• voice vlan dscp, on page 1495
• voice vlan oui-table, on page 1496
• voice vlan cos mode, on page 1498
• voice vlan cos, on page 1499
• voice vlan aging-timeout, on page 1500
• voice vlan enable, on page 1501

Cisco Business Switches 350 Series CLI Guide

1485

show voice vlan

Voice VLAN Commands

show voice vlan

To display the voice VLAN status for all interfaces or for a specific interface if the voice VLAN type is OUI,
use the show voice vlan Privileged EXEC mode command.

Syntax

show voice vlan [type {oui [{interface-id | detailed}] | auto}]

Parameters

• type oui—(Optional) Common and OUI-voice-VLAN specific parameters are displayed.

• type auto—(Optional) Common and Auto Voice VLAN-specific parameters are displayed.

• interface-id—(Optional) Specifies an Ethernet port ID.

• detailed—(Optional) Displays information for non-present ports in addition to present ports.

Default Configuration

If the type parameter is omitted the current Voice VLAN type is used.

If the interface-id parameter is omitted then information about all present interfaces is displayed. If detailed
is used, non-present ports are also displayed.

Command Mode

Privileged EXEC mode

User Guidelines

Using this command without parameters displays the current voice VLAN type parameters and local and
agreed voice VLAN settings.

Using this command with the type parameter displays the voice VLAN parameters relevant to the type selected.
The the local and agreed voice VLAN settings are displayed only if this is the current voice VLAN state.

The interface-id parameter is relevant only for the OUI VLAN type.

Examples

The following examples display the output of this command in various configurations.

Example 1—Displays the auto voice VLAN parameters (this is independent of the voice VLAN state actually
enabled).

switch>show voice vlan type auto
switchxxxxxx# show voice vlan type auto
Best Local Voice VLAN-ID is 5
Best Local VPT is 5 (default)
Best Local DSCP is 46 (default)
Agreed Voice VLAN is received from switch 00:24:01:30:10:00
Agreed Voice VLAN priority is 0 (active static source)
Agreed Voice VLAN-ID is 5
Agreed VPT is 5

Cisco Business Switches 350 Series CLI Guide

1486

Voice VLAN Commands

show voice vlan

Agreed DSCP is 46
Agreed Voice VLAN Last Change is 11-Jul-11 15:52:51
switchxxxxxx#

Example 2—Displays the current voice VLAN parameters when the voice VLAN state is auto-enabled.

switch>show voice vlan
Administrate Voice VLAN state is auto-enabled on IPv4
Operational Voice VLAN state is auto-enabled
Best Local Voice VLAN-ID is 5
Best Local VPT is 5 (default)
Best Local DSCP is 46 (default)
Agreed Voice VLAN is received from switch 00:24:01:30:10:00
Agreed Voice VLAN priority is 0 (active static source)
Agreed Voice VLAN-ID is 5
Agreed VPT is 5
Agreed DSCP is 46
Agreed Voice VLAN Last Change is 11-Jul-11 16:48:13
switchxxxxxx#

Example 3—Displays the current voice VLAN parameters when the administrative voice VLAN state is
auto-triggered but voice VLAN has not been triggered.

switch>show voice vlan
Administrate Voice VLAN state is auto-triggered on ipv6
Operational Voice VLAN state is disabled
VSDP Authentication is disabled

Example 4—Displays the current voice VLAN parameters when the administrative voice VLAN state is
auto-triggered and it has been triggered.

switchxxxxxx(config)# voice vlan state auto-triggered
switchxxxxxx(config)# voice vlan state auto-triggered
operational voice vlan state is auto
admin state is auto triggered
switchxxxxxx# show voice vlan
Administrate Voice VLAN state is auto-triggered on ipv6
Operational Voice VLAN state is auto-enabled
Best Local Voice VLAN-ID is 5
Best Local VPT is 5 (default)
Best Local DSCP is 46 (default)
Agreed Voice VLAN is received from switch 00:24:01:30:10:00
Agreed Voice VLAN priority is 0 (active static source)
Agreed Voice VLAN-ID is 5
Agreed VPT is 5
Agreed DSCP is 46
Agreed Voice VLAN Last Change is 11-Jul-11 15:52:51

Example 5—Displays the current voice VLAN parameters when both auto voice VLAN and OUI are disabled.

switch>show voice vlan
switchxxxxxx# show voice vlan
Administrate Voice VLAN state is disabled
Operational Voice VLAN state is disabled
Best Local Voice VLAN-ID is 5
Best Local VPT is 5 (default)
Best Local DSCP is 46 (default)
Aging timeout: 1440 minutes

Example 6—Displays the voice VLAN parameters when the voice VLAN operational state is OUI.

switch>show voice vlan
Administrate Voice VLAN state is oui-enabled
Operational Voice VLAN state is oui-enabled
Best Local Voice VLAN-ID is 1 (default)
Best Local VPT is 4

Cisco Business Switches 350 Series CLI Guide

1487

show voice vlan

Voice VLAN Commands

Best Local DSCP is 1
Aging timeout: 1440 minutes
CoS: 6
Remark: Yes
OUI table
MAC Address - Prefix
--------------------
00:E0:BB
00:03:6B
00:E0:75
00:D0:1E
00:01:E3
00:60:B9
00:0F:E2
00:09:6E
Interface
-------------
gi1/0/1
gi1/0/2
gi1/0/3
...

Enabled
-------
Yes
Yes
No

Description
------------------
3COM
Cisco
Veritel
Pingtel
Simens
NEC/Philips
Huawei-3COM
Avaya

Secure
-------
Yes
Yes
No

Activated CoS Mode
--------- --------

Yes
No

all
src

Cisco Business Switches 350 Series CLI Guide

1488

Voice VLAN Commands

show voice vlan local

show voice vlan local

The show voice vlan local Privileged EXEC mode command displays information about the auto voice VLAN
local configuration, including the best local voice VLAN.

Syntax

show voice vlan local

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

Examples

Example 1—A CDP device is connected to an interface and a conflict is detected:

30-Apr-2011 00:39:24 %VLAN-W-ConflictingCDPDetected: conflict detected between operational
VLAN and new CDP device 00:1e:13:73:3d:62 on interface gi7. Platform TLV is -4FXO-K9, Voice
VLAN-ID is 100...

switchxxxxxx# show voice vlan local
Administrate Voice VLAN state is auto-triggered on IPv6
Operational Voice VLAN state is auto-enabled
VSDP Authentication is enabled, key string name is alpha
The character '*; marks the best local Voice VLAN
VLAN-ID VPT
-------- ----- ----- ---------

Source

DSCP

1
*104
100

5
7

46
63

default
static
CDP

MAC Address
-----------
---
---
00:1e:13:73:3d:62

Interface
------------
---
---
gi1/0/4

Example 2—Displays the local voice VLAN configuration when the voice VLAN state is auto-triggered.

switchxxxxxx# show voice vlan local
Administrate Voice VLAN state is auto-triggered on IPv4
Operational Voice VLAN state is auto-enabled

VLAN-ID

VPT

DSCP

Source

MAC Address

Interface

--------- ----- ------ ---------- --------------------- -----------

1
*100

CDP

5

46

default
CDP

---
00:23:56:1a:dc:68

---
gi1/0/4

100

00:44:55:44:55:4d

gi1/0/4

The character "*" marks the best local voice VLAN.

Example 3—Displays the local voice VLAN configuration when the voice VLAN state is OUI.

switchxxxxxx# show voice vlan local
Administrate Voice VLAN state is auto-OUI
Operational Voice VLAN state is OUI
The character '*; marks the best local Voice VLAN
VLAN-ID
--------- ---- ----- ---------

MAC Address
------------

Source

DSCP

VPT

Interface
-------------------

0
1

0
27

1
*10
10
10

default
static
CDP
CDP

---
---

---
---

00:00:12:ea:87:dc
00:00:aa:aa:89:dc

gi1/0/1
po1

Cisco Business Switches 350 Series CLI Guide

1489

voice vlan state

voice vlan state

Voice VLAN Commands

To set the type of voice VLAN that is functional on the device or disable voice VLAN entirely, use the voice
vlan state Global Configuration mode command.

The no format of the command returns to the default.

Syntax

voice vlan state {auto-enabled | auto-triggeredoui-enabled | disabled}

no voice vlan state

Parameters

• auto-enabled—Auto Voice VLAN is enabled.

• auto-triggered—Auto Voice VLAN on the switch is in standby and is put into operation when the switch
detects a CDP device advertising a voice VLAN or if a voice VLAN ID is configured manually on the
switch.

• oui-enabled—Voice VLAN is of type OUI.

• disabled—Voice VLAN is disabled.

Default Configuration

Disabled

Command Mode

Global Configuration mode

User Guidelines

By factory default, CDP, LLDP, and LLDP-MED are enabled on the switch. In addition, manual Smartport
mode and Basic QoS with trusted DSCP is enabled.

All ports are members of default VLAN 1, which is also the default Voice VLAN.

If the state is set to dynamic voice VLAN (auto-triggered) mode then voice VLAN is enabled by a trigger
(advertisement received by voice device attached to port).

If the administrative state is:

• disabled — The operational state is disabled.

• oui-enabled —The operational state is oui-enabled.

• auto-enabled — The operational state is auto-enabled.

• auto-triggered — The operational state is auto-enabled only if one of the following occurs:

• A static local configured voice VLAN ID, CoS/802.1p, and/or DSCP that is not factory default is

configured.

Cisco Business Switches 350 Series CLI Guide

1490

Voice VLAN Commands

voice vlan state

• A CDP voice VLAN advertisement is received from a neighboring CDP device that is not a a device

of the same family as the current device.

• A Voice Service Discovery Protocol (VSDP) message was received from a neighbor switch. VSDP

is a Cisco Small Business proprietary protocol for SF and SG series managed switches.

• In all other cases the operational state is disabled.

Notes:

• To change the administrative state from oui-enabled to auto-enabled (or auto-triggered), or vice versa,

you must first set the administrative state to disabled.

• The administrative state cannot be set to oui-enabled if the Auto SmartPort administrative state is

enabled.

• The administrative state cannot be set to oui-enabled if the voice VLAN is the default VLAN (VLAN

1). For oui-enabled mode, the voice VLAN cannot be 1.

Examples

Example 1 —The following example enables the OUI mode of Voice VLAN. The first try did not work - it
was necessary to first disable voice VLAN.

switchxxxxxx(config)# voice vlan state oui-enabled
Disable the voice VLAN before changing the voice VLAN trigger.
switchxxxxxx(config)# voice vlan state disabled
switchxxxxxx(config)# voice vlan state oui-enabled
<CR>

Example 2 — The following example disables the Voice VLAN state. All auto Smartport configuration on
ports are removed.

switchxxxxxx(config)# voice vlan state disabled
All interfaces with Auto Smartport dynamic type will be set to default.
Are you sure you want to continue? (Y/N)[Y] Y
switchxxxxxx(config)# 30-Apr-2011 00:04:41 %LINK-W-Down: Vlan 5
30-Apr-2011 00:04:41 %LINK-W-Down: Vlan 8
30-Apr-2011 00:04:41 %LINK-W-Down: Vlan 9
30-Apr-2011 00:04:41 %LINK-W-Down: Vlan 100

Example 3 —The following example sets the Voice VLAN state to auto-triggered. The VLANs are re-activated
after auto SmartPort state is applied.

switchxxxxxx(config)# voice vlan state auto-triggered
switchxxxxxx(config)# 30-Apr-2011 00:13:52 %LINK-I-Up: Vlan 5
30-Apr-2011 00:13:52 %LINK-I-Up: Vlan 8
30-Apr-2011 00:13:52 %LINK-I-Up: Vlan 9
30-Apr-2011 00:13:52 %LINK-I-Up: Vlan 100

Cisco Business Switches 350 Series CLI Guide

1491

voice vlan refresh

Voice VLAN Commands

voice vlan refresh

To restart the Voice VLAN discovery process on all the Auto Voice VLAN-enabled switches in the VLAN
by removing all externally learned voice VLAN attributes and resetting the voice VLAN to the default voice
VLAN, use the voice vlan refresh Global Configuration mode command.

Syntax

voice vlan refresh

Parameters

This command has no arguments or keywords

Default Configuration

None

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# voice vlan refresh
switchxxxxxx(config)#
30-Apr-2011 02:01:02 %VLAN-I-ReceivedFromVSDP: Voice VLAN updated by VSDP. Voice VLAN-ID
100, VPT 5, DSCP 46 (Notification that Agreed Voice VLAN is updated)
(Auto Smartport configuration is changed)
30-Apr-2011 02:01:05 %LINK-W-Down: Vlan 50
30-Apr-2011 02:01:05 %LINK-W-Down: Vlan 100
30-Apr-2011 02:01:06 %LINK-I-Up: Vlan 50
30-Apr-2011 02:01:06 %LINK-I-Up: Vlan 100
switchxxxxxx# show voice vlan
Administrate Voice VLAN state is auto-triggered
Operational Voice VLAN state is auto-enabled
Best Local Voice VLAN-ID is 100
Best Local VPT is 5 (default)
Best Local DSCP is 46 (default)
(Following is the new active source)
Agreed Voice VLAN is received from switch b0:c6:9a:c1:da:00
Agreed Voice VLAN priority is 2 (active CDP device)
Agreed Voice VLAN-ID is 100
Agreed VPT is 5
Agreed DSCP is 46
Agreed Voice VLAN Last Change is 11-Apr-30 02:01:02

Cisco Business Switches 350 Series CLI Guide

1492

Voice VLAN Commands

voice vlan id

voice vlan id

To statically configure the VLAN identifier of the voice VLAN, use the voice vlan id Global Configuration
mode command. To return the voice VLAN to the default VLAN (1), use the no format of the command.

Syntax

voice vlan id vlan-id

no voice vlan id

Parameters

vlan id vlan-id—Specifies the voice VLAN (range 1-4094).

Default Configuration

VLAN ID 1.

Command Mode

Global Configuration mode

User Guidelines

If the Voice VLAN does not exist, it is created automatically. It will not be removed automatically by the no
version of this command.

Example

The following example enables VLAN 35 as the voice VLAN on the device.

switchxxxxxx(config)# voice vlan id 35
For Auto Voice VLAN, changes in the voice VLAN ID, CoS/802.1p, and/or DSCP will cause the
switch to advertise the administrative voice VLAN as static voice VLAN which has higher
priority than voice VLAN learnt from external sources.
Are you sure you want to continue? (Y/N)[Y] Y
30-Apr-2011 00:19:36 %VLAN-I-VoiceVlanCreated: Voice Vlan ID 35 was created.
switchxxxxxx(config)# 30-Apr-2011 00:19:51 %VLAN-I-ReceivedFromVSDP: Voice VLAN updated by

VSDP. Voice VLAN-ID 35, VPT 5, DSCP 46

Cisco Business Switches 350 Series CLI Guide

1493

voice vlan vpt

voice vlan vpt

Voice VLAN Commands

To specify a value of VPT (802.1p VLAN priority tag) that will be advertised by LLDP in the Network Policy
TLV, use the voice vlan vpt Global Configuration mode command. To return the value to the default, use
the no format of the command.

Syntax

voice vlan vpt vpt-value

no voice vlan vpt

Parameters

vpt vpt-value—The VPT value to be advertised (range 0-7).

Default Configuration

5

Command Mode

Global Configuration mode

Example

The following example sets 7 as the voice VLAN VPT. A notification that the new settings are different than
the old ones is displayed.

switchxxxxxx(config)# voice vlan vpt 7
For Auto Voice VLAN, changes in the voice VLAN ID, CoS/802.1p, and/or DSCPwill cause the
switch to advertise the administrative voice VLAN as static voice VLANwhich has higher
priority than voice VLAN learnt from external sources.
Are you sure you want to continue? (Y/N)[Y] Y
30-Apr-2011 00:24:52 %VLAN-W-BestLocal!=Oper: inconsistency detected, VSDP voice VLAN
configuration differs from best local. Best local is Voice VLAN-ID 104, VPT 5, DSCP 46
switchxxxxxx(config)# 30-Apr-2011 00:25:07 %VLAN-I-ReceivedFromVSDP: Voice VLAN updated by

VSDP. Voice VLAN-ID 104, VPT 7, DSCP 46

Cisco Business Switches 350 Series CLI Guide

1494

Voice VLAN Commands

voice vlan dscp

voice vlan dscp

To specify a value of DSCP that will be advertised by LLDP in the Network Policy TLV, use the voice vlan
dscp Global Configuration mode command. To return the value to the default, use the no format of the
command.

Syntax

voice vlan dscp dscp-value

no voice vlan dscp

Parameters

dscp dscp-value—The DSCP value (range 0-63).

Default Configuration

46

Command Mode

Global Configuration mode

Example

The following example sets 63 as the voice VLAN DSCP.

switchxxxxxx(config)# voice vlan dscp 63
For Auto Voice VLAN, changes in the voice VLAN ID, CoS/802.1p, and/or DSCPwill cause the
switch to advertise the administrative voice VLAN as static voice VLANwhich has higher
priority than voice VLAN learnt from external sources.
Are you sure you want to continue? (Y/N)[Y] Y
30-Apr-2011 00:31:07 %VLAN-W-BestLocal!=Oper: inconsistency detected, VSDP voice VLAN
configuration differs from best local. Best local is Voice VLAN-ID 104, VPT 7, DSCP 46
switchxxxxxx(config)# 30-Apr-2011 00:31:22 %VLAN-I-ReceivedFromVSDP: Voice VLAN updated by

VSDP. Voice VLAN-ID 104, VPT 7, DSCP 63

Cisco Business Switches 350 Series CLI Guide

1495

voice vlan oui-table

Voice VLAN Commands

voice vlan oui-table

To configure the voice OUI table, use the voice vlan oui-table Global Configuration mode command. To
restore the default configuration, use the no form of this command.

Syntax

voice vlan oui-table {add mac-address-prefix | remove mac-address-prefix} [text]

no voice vlan oui-table

Parameters

• add mac-address-prefix—Adds the specified MAC address prefix to the voice VLAN OUI table (length:

3 bytes).

• remove mac-address-prefix—Removes the specified MAC prefix address from the voice VLAN OUI

table (length: 3 bytes).

• text—(Optional) Adds the specified text as a description of the specified MAC address to the voice

VLAN OUI table (length: 1–32 characters).

Default Configuration

The default voice VLAN OUI table is:

Description

Siemens AG Phone

Cisco Phone

Avaya Phone

Huawei-3COM Phone

NEC/Philips Phone

Pingtel Phone

Veritel Polycom Phone

3COM Phone

OUI

00:01:e3

00:03:6b

00:09:6e

00:0f:e2

00:60:b9

00:d0:1e

00:e0:75

00:e0:bb

Command Mode

Global Configuration mode

User Guidelines

The classification of a packet from VoIP equipment/phones is based on the packet’s OUI in the source MAC
address. OUIs are globally assigned (administered) by the IEEE.

Cisco Business Switches 350 Series CLI Guide

1496

Voice VLAN Commands

voice vlan oui-table

In MAC addresses, the first three bytes contain a manufacturer ID (Organizationally Unique Identifiers (OUI))
and the last three bytes contain a unique station ID.

Since the number of IP phone manufacturers that dominates the market is limited and well known, the known
OUI values are configured by default and OUIs can be added/removed by the user when required.

Example

The following example adds an entry to the voice VLAN OUI table.

switchxxxxxx(config)# voice vlan oui-table add 00:AA:BB experimental

Cisco Business Switches 350 Series CLI Guide

1497

voice vlan cos mode

Voice VLAN Commands

voice vlan cos mode

To select the OUI voice VLAN Class of Service (CoS) mode, use the voice vlan cos mode Interface
Configuration mode command. To return to the default, use the no form of this command.

Syntax

voice vlan cos mode {src | all }

no voice vlan cos mode

Parameters

• src—QoS attributes are applied to packets with OUIs in the source MAC address.

• all—QoS attributes are applied to packets that are classified to the Voice VLAN.

Default Configuration

The default mode is src.

Command Mode

Interface Configuration mode

Example

The following example applies QoS attributes to voice packets.

switchxxxxxx(config-if)# voice vlan cos mode all

Cisco Business Switches 350 Series CLI Guide

1498

Voice VLAN Commands

voice vlan cos

voice vlan cos

To set the OUI Voice VLAN Class of Service (CoS), use the voice vlan cos Global Configuration mode
command. To restore the default configuration, use the no form of this command.

Syntax

voice vlan cos cos [remark ]

no voice vlan cos

Parameters

• cos cos—Specifies the voice VLAN Class of Service value. (Range: 0–7)

• remark—(Optional) Specifies that the L2 user priority is remarked with the CoS value.

Default Configuration

The default CoS value is 6.

The L2 user priority is not remarked by default.

Command Mode

Global Configuration mode

Example

The following example sets the OUI voice VLAN CoS to 7 and does not do remarking.

switchxxxxxx(config)# voice vlan cos 7

Cisco Business Switches 350 Series CLI Guide

1499

voice vlan aging-timeout

Voice VLAN Commands

voice vlan aging-timeout

To set the OUI Voice VLAN aging timeout interval, use the voice vlan aging-timeout Global Configuration
mode command. To restore the default configuration, use the no form of this command.

Syntax

voice vlan aging-timeout minutes

no voice vlan aging-timeout

Parameters

aging-timeout minutes—Specifies the voice VLAN aging timeout interval in minutes. (Range: 1–43200).

Default Configuration

1440 minutes

Command Mode

Global Configuration mode

Example

The following example sets the OUI Voice VLAN aging timeout interval to 12 hours.

switchxxxxxx(config)# voice vlan aging-timeout 720

Cisco Business Switches 350 Series CLI Guide

1500

Voice VLAN Commands

voice vlan enable

voice vlan enable

To enable OUI voice VLAN configuration on an interface, use the voice vlan enable Interface Configuration
mode mode command. To disable OUI voice VLAN configuration on an interface, use the no form of this
command.

Syntax

voice vlan enable

no voice vlan enable

Parameters

This command has no arguments or keywords.

Default Configuration

Disabled

Command Mode

Interface Configuration mode

User Guidelines

This command is applicable only if the voice VLAN state is globally configured as OUI voice VLAN (using
show voice vlan, on page 1486).

The port can join the voice VLAN only if it is member of in the PVID/native VLAN ID.

The port is added to the voice VLAN if a packet with a source MAC address OUI address (defined by voice
vlan oui-table, on page 1496) is trapped on the port. Note: The packet VLAN ID does not have to be the voice
VLAN, it can be any VLAN.

The port joins the voice VLAN as a tagged port.

If the time since the last MAC address with a source MAC address OUI address was received on the interface
exceeds the timeout limit (configured by voice vlan aging-timeout, on page 1500), the interface is removed
from the voice VLAN.

Example

The following example enables OUI voice VLAN configuration on gi1/0/2.

switchxxxxxx(config)# interface gi1/0/2
switchxxxxxx(config-if)# voice vlan enable

Cisco Business Switches 350 Series CLI Guide

1501

voice vlan enable

Voice VLAN Commands

Cisco Business Switches 350 Series CLI Guide

1502

Web Server Commands

This chapter contains the following sections:

• ip https certificate, on page 1504
• ip https logging, on page 1505
• ip http port, on page 1506
• ip http server, on page 1507
• ip http secure-server , on page 1508
• ip http timeout-policy , on page 1509
• show ip http, on page 1510
• show ip https, on page 1511

Cisco Business Switches 350 Series CLI Guide

1503

ip https certificate

Web Server Commands

ip https certificate

To configure the active certificate for HTTPS, use the ip https certificate Global Configuration mode
command. To restore the default configuration, use the no form of this command.

Syntax

ip https certificate number

no ip https certificate

Parameters

number—Specifies the certificate number. (Range: 1–2)

Default Configuration

The default certificate number is 1.

Command Mode

Global Configuration mode

Example

The following example configures the active certificate for HTTPS.

switchxxxxxx(config)# ip https certificate 2

Cisco Business Switches 350 Series CLI Guide

1504

Web Server Commands

ip https logging

ip https logging

To enable or disable the logging of HTTPS session setup and tear down, use the ip https logging command
in Global Configuration mode. To restore the default setting, use the no form of this command.

Syntax

ip https logging {enable| disable}

no ip https logging

Parameters

• enable — Enables HTTPS logging on device

• disable — disables HTTPS logging on device

Default Configuration

HTTPS session logging is disabled by default.

Command Mode

Global Configuration mode.

User Guidelines

This command enables HTTPS logging on the device. HTTPS logging is a mean to track the progress of
HTTPS session setup and tear-down. HTTPS session setup and tear-down progress is tracked using SYSLOG
message which are generated as part of the process. If HTTPS logging is disabled then SYSLOG messages
will not be generated as part of the SSH setup or tear-down process.

Example

The following example enables HTTPS logging on the device.

switchxxxxxx(config)# ip https logging enable

Cisco Business Switches 350 Series CLI Guide

1505

ip http port

ip http port

Web Server Commands

To specify the TCP port used by the web browser interface, use the ip http port Global Configuration mode
command. To restore the default configuration, use the no form of this command.

Syntax

ip http port port-number

no ip http port

Parameters

port port-number—For use by the HTTP server. (Range: 1–59999)

Default Configuration

The default port number is 80.

Command Mode

Global Configuration mode

Example

The following example configures the http port number as 100.

switchxxxxxx(config)# ip http port 100

Cisco Business Switches 350 Series CLI Guide

1506

Web Server Commands

ip http server

ip http server

To enable configuring and monitoring the device from a web browser, use the ip http server Global
Configuration mode command. To disable this function, use the no form of this command.

Syntax

ip http server

no ip http server

Parameters

This command has no arguments or keywords.

Default Configuration

HTTP server is enabled.

Command Mode

Global Configuration mode

Example

The following example enables configuring the device from a web browser.

switchxxxxxx(config)# ip http server

Cisco Business Switches 350 Series CLI Guide

1507

ip http secure-server

Web Server Commands

ip http secure-server

To enable the device to be configured or monitored securely from a browser, use the ip http secure-server
Global Configuration mode command. To disable this function, use the no form of this command.

Syntax

ip http secure-server

no ip http secure-server

Parameters

This command has no arguments or keywords.

Default Configuration

Enabled

Command Mode

Global Configuration mode

Example

switchxxxxxx(config)# ip http secure-server

Cisco Business Switches 350 Series CLI Guide

1508

Web Server Commands

ip http timeout-policy

ip http timeout-policy

To set the interval for the system to wait for user input in http/https sessions before automatic logoff, use the
ip http timeout-policy Global Configuration mode command. To return to the default value, use the no form
of this command.

Syntax

ip http timeout-policy idle-seconds [{http-only | https-only}]

no ip http timeout-policy

Parameters

• idle-seconds—Specifies the maximum number of seconds that a connection is kept open if no data is

received or response data cannot be sent out. (Range: 0–86400)

• http-only—(Optional) The timeout is specified only for http

• https-only—(Optional) The timeout is specified only for https

Default Configuration

600 seconds. setting is applied for both HTTP and HTTPS

Command Mode

Global Configuration mode

User Guidelines

To specify no timeout, enter the ip http timeout-policy 0 command.

Example

The following example configures the http timeout to be 1000 seconds.

switchxxxxxx(config)# ip http timeout-policy 1000

Cisco Business Switches 350 Series CLI Guide

1509

show ip http

show ip http

Web Server Commands

To display the HTTP server configuration, use the show ip http Privileged EXEC mode command.

Syntax

show ip http

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

Example

The following example displays the HTTP server configuration.

switchxxxxxx# show ip http
HTTP server enabled
Port: 80
Interactive timeout: 10 minutes, 0 seconds

Cisco Business Switches 350 Series CLI Guide

1510

Web Server Commands

show ip https

show ip https

To display the HTTPS server configuration, use the show ip https Privileged EXEC mode command.

Syntax

show ip https

Parameters

This command has no arguments or keywords.

Command Mode

Privileged EXEC mode

Example

The following example displays the HTTPS server configuration.

switchxxxxxx# show ip https
HTTPS server enabled
Port: 443
Interactive timeout: Follows the HTTP interactive timeout (10 minutes, 0 seconds)
https session logging is disabled
Certificate 1 is active
Issued by: www.verisign.com
Valid from: 8/9/2003 to 8/9/2004
Subject: CN= router.gm.com, 0= General Motors, C= US
Finger print: DC789788 DC88A988 127897BC BB789788
Certificate 2 is inactive
Issued by: self-signed
Valid from: 8/9/2003 to 8/9/2004
Subject: CN= router.gm.com, 0= General Motors, C= US
Finger print: 1873B936 88DC3411 BC8932EF 782134BA

Cisco Business Switches 350 Series CLI Guide

1511

show ip https

Web Server Commands

Cisco Business Switches 350 Series CLI Guide

1512



=== Content from www.cisco.com_cf985588_20250115_132945.html ===


[Home](https://www.cisco.com)  / [Cisco Security](/security/center/home.x) / [Security Advisories](https://sec.cloudapps.cisco.com/security/center/publicationListing.x)

#### Cisco Security

# Cisco Security Advisories

 ![](https://sec.cloudapps.cisco.com/security/center/Resources/images/loader.gif)
 ![](https://sec.cloudapps.cisco.com/security/center/Resources/images/loader.gif)
 ![](https://sec.cloudapps.cisco.com/security/center/Resources/images/loader.gif)
- Vulnerabilities
- Filter By Product

 Quick Search

 [*Advanced Search*](/security/center/Search.x)

| Advisory | Impact | CVE | Last Updated | Version |
| --- | --- | --- | --- | --- |
|  | {{SeverityDrpDwnValue}}   All   Critical   High   Medium   Low   Informational  Done |  | Most Recent 2025 Jan 2024 Dec 2024 Nov 2024 Oct 2024 Sep 2024 Aug 2024 Jul 2024 Jun 2024 May 2024 Apr 2024 Mar 2024 Feb |  |
|
 | [{{list.title}}](%7B%7Blist.url%7D%7D) | {{list.severity}}-- | ...  {{list.cve}} | {{list.lastPublished | date :'yyyy MMM dd' : 'UTC'}} | {{list.version}} {{list.version+'.0'}} | | --- | --- | --- | --- | --- | | CVE:      ...  {{list.cve}}       Publication ID:{{ list.identifier }}  Version: {{list.version}} {{list.version+'.0'}}  First Published:{{ list.firstPublished | date :'yyyy MMM dd HH:mm' : 'UTC'}} GMT   Workaround:{{ list.workarounds }}  Affects Cisco Products:{{ list.affectedCiscoProducts }}No   Summary: | | | | | | | | | |
| {{message}} | | | | |
| Showing {{parseInt(offset) + 1}} - {{ ( parseInt(limit) + parseInt(offset) ) < total ? ( parseInt(limit) + parseInt(offset) ) : total }} of {{ parseInt(total) }} | | | | |
| --- | --- | --- | --- | --- |
| Items per page:   Showing {{parseInt(offset) + 1}} - {{ ( parseInt(limit) + parseInt(offset) ) < total ? ( parseInt(limit) + parseInt(offset) ) : total }} of {{ parseInt(total) }}   |  < Prev  {{opt}}   Next > | | | | |

### Select at least one checkbox to view vulnerabilities that affect Cisco products

 Remove All

 [*Advanced Search*](/security/center/Search.x)
Add a Product

 [*Advanced Search*](/security/center/Search.x)

| Advisory | Impact | CVE | Last Updated | Version |
| --- | --- | --- | --- | --- |
|  | {{prdFltrSvrDrpDwnValue}}   All   Critical   High   Medium   Low   Informational  Done |  | Most Recent 2025 Jan 2024 Dec 2024 Nov 2024 Oct 2024 Sep 2024 Aug 2024 Jul 2024 Jun 2024 May 2024 Apr 2024 Mar 2024 Feb |  |
| | [{{list.title}}](%7B%7Blist.url%7D%7D) | {{list.severity}}-- | ...  {{list.cve}} | {{list.lastPublished | date :'yyyy MMM dd' : 'UTC' }} | {{list.version}} {{list.version+'.0'}} | | --- | --- | --- | --- | --- | | CVE:      ...  {{list.cve}}       Publication ID:{{ list.identifier }}  Version: {{list.version}} {{list.version+'.0'}}  First Published:{{ list.firstPublished | date :'yyyy MMM dd HH:mm' : 'UTC' }} GMT   Workaround:{{ list.workarounds }}  Affects Cisco Products:{{ list.affectedCiscoProducts }}No   Summary: | | | | | | | | | |
| {{message}} | | | | |
| Showing {{parseInt(offset) + 1}} - {{ ( parseInt(limit) + parseInt(offset) ) < total ? ( parseInt(limit) + parseInt(offset) ) : total }} of {{ parseInt(total) }} | | | | |
| --- | --- | --- | --- | --- |
| Items per page:   Showing {{parseInt(offset) + 1}} - {{ ( parseInt(limit) + parseInt(offset) ) < total ? ( parseInt(limit) + parseInt(offset) ) : total }} of {{ parseInt(total) }}   |  < Prev  {{opt}}   Next > | | | | |

### Add a product to see all related advisories

##### Do you really want to delete all products?

 OK
 Cancel

To learn about Cisco security vulnerability disclosure policies and publications, see the [Security Vulnerability Policy.](https://sec.cloudapps.cisco.com/security/center/resources/security_vulnerability_policy.html) This document also contains instructions for obtaining fixed software and receiving security vulnerability information from Cisco.

Cisco Security Advisories and other Cisco security content are provided on an "as is" basis and do not imply any kind of guarantee or warranty. Your use of the information in these publications or linked material is at your own risk. Cisco reserves the right to change or update this content without notice at any time.

![](https://sec.cloudapps.cisco.com/security/center/Resources/images/on.png)
![](https://sec.cloudapps.cisco.com/security/center/Resources/images/off.png)
![](https://sec.cloudapps.cisco.com/security/center/Resources/images/trash-can.png)
![](https://sec.cloudapps.cisco.com/security/center/Resources/images/trash-can-hover.png)
![](https://sec.cloudapps.cisco.com/security/center/Resources/images/searchtag-icon-hover.png)
![](https://sec.cloudapps.cisco.com/security/center/Resources/images/searchtag-clear-icon-hover.png)
![](https://sec.cloudapps.cisco.com/security/center/Resources/images/caret-dark-down.png)
![](https://sec.cloudapps.cisco.com/security/center/Resources/images/caret-dark-up.png)
![](https://sec.cloudapps.cisco.com/security/center/Resources/images/caret-hover.png)
![](https://sec.cloudapps.cisco.com/security/center/Resources/images/delete-icon.png)

### Tools

* [Cisco Software Checker](/security/center/softwarechecker.x)
* [Cisco Vulnerability Repository](/security/center/cvr)
* [Bug Search](https://bst.cloudapps.cisco.com/bugsearch/)
* [Cisco PSIRT openVuln API](https://developer.cisco.com/psirt/)
* [CVRF Repository](/security/center/cvrfListing.x)
* [OVAL Repository](https://community.cisco.com/t5/services-blogs/update-regarding-oval-definitions-by-cisco/ba-p/3661030)

### Actions

* [Download Cisco Software](https://software.cisco.com/download/home)
* [Download Snort Rules](https://snort.org)
* [Open or Query a TAC Case](https://mycase.cloudapps.cisco.com/case)

### Related Links

* [Cisco Event Responses](/security/center/erp.x?i=52)
* [Cisco Policies and Processes](/security/center/securityResources.x)
* [Cisco Security Blog](https://blogs.cisco.com/security)
* [Security Solutions](https://www.cisco.com/site/us/en/products/security/index.html)


