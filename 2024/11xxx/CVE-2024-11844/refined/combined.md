=== Content from plugins.trac.wordpress.org_43c333f1_20250115_080414.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3198488%2Fideapush%2Ftrunk%2Fideapush.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3156000/ideapush/trunk/ideapush.php "Changeset 3156000 for ideapush/trunk/ideapush.php")
* [Next Change](/changeset/3200425/ideapush/trunk/ideapush.php "Changeset 3200425 for ideapush/trunk/ideapush.php") →

---

# Changeset [3198488](/changeset/3198488 "Show full changeset") for [ideapush/trunk/ideapush.php](/browser/ideapush/trunk/ideapush.php?rev=3198488 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
11/27/2024 09:57:58 PM
([7 weeks](/timeline?from=2024-11-27T21%3A57%3A58Z&precision=second "See timeline at 11/27/2024 09:57:58 PM") ago)

Author:
northernbeacheswebsites
Message:

Version 8.72

File:

1 edited

* [ideapush/trunk/ideapush.php](/browser/ideapush/trunk/ideapush.php?rev=3198488 "Show entry in browser")
  (modified)
  ([3 diffs](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [ideapush/trunk/ideapush.php](/changeset/3198488/ideapush/trunk/ideapush.php "Show the changeset 3198488 restricted to ideapush/trunk/ideapush.php")

  | [r3156000](/browser/ideapush/trunk/ideapush.php?rev=3156000#L4 "Show revision 3156000 of this file in browser") | [r3198488](/browser/ideapush/trunk/ideapush.php?rev=3198488#L4 "Show revision 3198488 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \*       Plugin URI: https://www.northernbeacheswebsites.com.au |
  | 5 | 5 | \*       Description: IdeaPush is a feature request management system for WordPress |
  | 6 |  | \*       Version: 8.7~~1~~ |
  |  | 6 | \*       Version: 8.72 |
  | 7 | 7 | \*       Author: Martin Gibson |
  | 8 | 8 | \*       Text Domain: ideapush |
  | […](/browser/ideapush/trunk/ideapush.php?rev=3156000#L764) | […](/browser/ideapush/trunk/ideapush.php?rev=3198488#L764) |  |
  | 764 | 764 |  |
  | 765 | 765 | //lets delete existing taxonomies and rename others where necessary |
  |  | 766 | add\_action( 'wp\_ajax\_taxonomy\_save\_routine', 'idea\_push\_taxonomy\_save\_routine' ); |
  | 766 | 767 | function idea\_push\_taxonomy\_save\_routine() { |
  | 767 | 768 |  |
  | 768 |  |  |
  | 769 |  | //get board name from ajax call |
  | 770 |  | $comparisonData = $\_POST['comparisonData']; |
  | 771 |  | $explodeTheData = explode("^^^", $comparisonData); |
  | 772 |  |  |
  | 773 |  | $boardIdArray = array(); |
  | 774 |  |  |
  | 775 |  | foreach($explodeTheData as $board){ |
  | 776 |  |  |
  | 777 |  | $anotherExplosion = explode("|", $board); |
  | 778 |  | $boardId = $anotherExplosion[0]; |
  | 779 |  | $boardName = $anotherExplosion[1]; |
  | 780 |  |  |
  | 781 |  | array\_push($boardIdArray,$boardId); |
  | 782 |  |  |
  | 783 |  | //now lets change the name of existing taxonomies |
  | 784 |  | $termObject = get\_term($boardId,'boards'); |
  | 785 |  |  |
  | 786 |  | //if the there's a match lets update the name if it has changed |
  | 787 |  | if(!is\_wp\_error($termObject)){ |
  | 788 |  |  |
  | 789 |  | $termName = $termObject->name; |
  | 790 |  |  |
  | 791 |  | if($boardName !== $termName){ |
  | 792 |  | //they don't match so lets update this term name with the new board name |
  | 793 |  | wp\_update\_term($boardId,'boards',array('name' => $boardName)); |
  | 794 |  | } |
  | 795 |  | } |
  | 796 |  |  |
  | 797 |  | } |
  | 798 |  |  |
  | 799 |  |  |
  | 800 |  | //lets cycle through the existing terms in the taxonomy |
  | 801 |  | $existingTerms = get\_terms('boards',array( "hide\_empty" => 0 )); |
  | 802 |  |  |
  | 803 |  | foreach($existingTerms as $term){ |
  | 804 |  |  |
  | 805 |  | $termId = $term->term\_id; |
  | 806 |  |  |
  | 807 |  | if(!in\_array($termId,$boardIdArray)){ |
  | 808 |  | //if the term is not in our array delete it because it's not authorised to exist and it will cause confusion |
  | 809 |  | wp\_delete\_term($termId,'boards'); |
  | 810 |  |  |
  | 811 |  | } |
  |  | 769 |  |
  |  | 770 | if(isset($\_POST['nonce']) && wp\_verify\_nonce($\_POST['nonce'], 'taxonomy\_save\_routine')){ |
  |  | 771 | if (current\_user\_can('administrator') || current\_user\_can('manage\_idea\_push\_settings')) { |
  |  | 772 |  |
  |  | 773 | //get board name from ajax call |
  |  | 774 | $comparisonData = $\_POST['comparisonData']; |
  |  | 775 | $explodeTheData = explode("^^^", $comparisonData); |
  |  | 776 |  |
  |  | 777 | $boardIdArray = array(); |
  |  | 778 |  |
  |  | 779 | foreach($explodeTheData as $board){ |
  |  | 780 |  |
  |  | 781 | $anotherExplosion = explode("|", $board); |
  |  | 782 | $boardId = $anotherExplosion[0]; |
  |  | 783 | $boardName = $anotherExplosion[1]; |
  |  | 784 |  |
  |  | 785 | array\_push($boardIdArray,$boardId); |
  |  | 786 |  |
  |  | 787 | //now lets change the name of existing taxonomies |
  |  | 788 | $termObject = get\_term($boardId,'boards'); |
  |  | 789 |  |
  |  | 790 | //if the there's a match lets update the name if it has changed |
  |  | 791 | if(!is\_wp\_error($termObject)){ |
  |  | 792 |  |
  |  | 793 | $termName = $termObject->name; |
  |  | 794 |  |
  |  | 795 | if($boardName !== $termName){ |
  |  | 796 | //they don't match so lets update this term name with the new board name |
  |  | 797 | wp\_update\_term($boardId,'boards',array('name' => $boardName)); |
  |  | 798 | } |
  |  | 799 | } |
  |  | 800 |  |
  |  | 801 | } |
  |  | 802 |  |
  |  | 803 |  |
  |  | 804 | //lets cycle through the existing terms in the taxonomy |
  |  | 805 | $existingTerms = get\_terms('boards',array( "hide\_empty" => 0 )); |
  |  | 806 |  |
  |  | 807 | foreach($existingTerms as $term){ |
  |  | 808 |  |
  |  | 809 | $termId = $term->term\_id; |
  |  | 810 |  |
  |  | 811 | if(!in\_array($termId,$boardIdArray)){ |
  |  | 812 | //if the term is not in our array delete it because it's not authorised to exist and it will cause confusion |
  |  | 813 | wp\_delete\_term($termId,'boards'); |
  |  | 814 |  |
  |  | 815 | } |
  |  | 816 | } |
  |  | 817 | } |
  | 812 | 818 | } |
  | 813 | 819 |  |
  | […](/browser/ideapush/trunk/ideapush.php?rev=3156000#L818) | […](/browser/ideapush/trunk/ideapush.php?rev=3198488#L824) |  |
  | 818 | 824 |  |
  | 819 | 825 | } |
  | 820 |  | add\_action( 'wp\_ajax\_taxonomy\_save\_routine', 'idea\_push\_taxonomy\_save\_routine' ); |
  |  | 826 |  |
  | 821 | 827 |  |
  | 822 | 828 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3198488)
* [Zip Archive](?format=zip&new=3198488)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_c131e206_20250115_080413.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fideapush%2Ftrunk%2Fideapush.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/ideapush/trunk/ideapush.php?rev=3198488 "Revision 3198488")
* Next Revision →
* [Blame](/browser/ideapush/trunk/ideapush.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/ideapush/trunk/ideapush.php)

---

# [source:](/browser?order=name "Go to repository root") [ideapush](/browser/ideapush?order=name "View ideapush")/[trunk](/browser/ideapush/trunk?order=name "View trunk")/[ideapush.php](/browser/ideapush/trunk/ideapush.php?order=name "View ideapush.php")

View diff against:

View revision:

| [Last change](/changeset/3200425/ideapush/trunk/ideapush.php "View differences") on this file was [3200425](/changeset/3200425/ "View changeset 3200425"), checked in by northernbeacheswebsites, [6 weeks ago](/timeline?from=2024-12-01T21%3A59%3A22Z&precision=second "See timeline at 12/01/2024 09:59:22 PM") |
| --- |
| Version 8.73 |
| **File size:** 43.5 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\* |
| [3](#L3) | \*               Plugin Name: IdeaPush - Feature Request Manager |
| [4](#L4) | \*               Plugin URI: https://www.northernbeacheswebsites.com.au |
| [5](#L5) | \*               Description: IdeaPush is a feature request management system for WordPress |
| [6](#L6) | \*               Version: 8.73 |
| [7](#L7) | \*               Author: Martin Gibson |
| [8](#L8) | \*               Text Domain: ideapush |
| [9](#L9) | \*               Support: https://www.northernbeacheswebsites.com.au/contact |
| [10](#L10) | \*               Licence: GPL2 |
| [11](#L11) | \*/ |
| [12](#L12) |  |
| [13](#L13) | // Assign global variables |
| [14](#L14) | global $ideapush\_is\_pro; |
| [15](#L15) |  |
| [16](#L16) | if(file\_exists(dirname( \_\_FILE\_\_ ).'/inc/pro-ip')){ |
| [17](#L17) | $ideapush\_is\_pro = "YES"; |
| [18](#L18) | } else { |
| [19](#L19) | $ideapush\_is\_pro = "NO"; |
| [20](#L20) | } |
| [21](#L21) |  |
| [22](#L22) | //the first YES/NO in the array is if the feature is pro, the second YES/NO in the array is if a save settings button is necessary |
| [23](#L23) | global $ideapush\_pro\_features; |
| [24](#L24) | $ideapush\_pro\_features = array('Boards' => array('NO','YES'),'Notifications' => array('NO','YES'), 'Statuses' => array('NO','YES'), 'Design' => array('NO','YES'), 'Idea Form' => array('NO','YES'), 'Tag Page' => array('NO','YES'), 'IdeaPush Support' => array('NO','NO'),'IdeaPush Pro' => array('YES','YES'),'Integrations' => array('YES','YES')); |
| [25](#L25) |  |
| [26](#L26) | //get plugin version number |
| [27](#L27) | function idea\_push\_plugin\_get\_version() { |
| [28](#L28) | if ( ! function\_exists( 'get\_plugins' ) ) |
| [29](#L29) | require\_once( ABSPATH . 'wp-admin/includes/plugin.php' ); |
| [30](#L30) | $plugin\_folder = get\_plugins( '/' . plugin\_basename( dirname( \_\_FILE\_\_ ) ) ); |
| [31](#L31) | $plugin\_file = basename( ( \_\_FILE\_\_ ) ); |
| [32](#L32) | return $plugin\_folder[$plugin\_file]['Version']; |
| [33](#L33) | } |
| [34](#L34) |  |
| [35](#L35) |  |
| [36](#L36) | function idea\_push\_create\_custom\_post\_type() { |
| [37](#L37) |  |
| [38](#L38) | //SVG of the icon |
| [39](#L39) | $menu\_icon\_svg = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIyLjAuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMiIgYmFzZVByb2ZpbGU9InRpbnkiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIgoJIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjNzhDMTQ4IiBkPSJNMTAsMEM0LjUsMCwwLDQuNSwwLDEwczQuNSwxMCwxMCwxMHMxMC00LjUsMTAtMTBTMTUuNSwwLDEwLDB6IE04LjEsMTIuMWwtMS42LDEuNQoJYy0wLjIsMC4yLTAuNCwwLjMtMC43LDAuM2MtMC4zLDAtMC41LTAuMS0wLjctMC4zbC0xLjYtMS41Yy0wLjItMC4yLTAuMi0wLjYsMC0wLjljMC4yLTAuMiwwLjYtMC4yLDAuOSwwbDEuNCwxLjRsMS40LTEuNAoJQzcuMywxMS4xLDcuNSwxMSw3LjYsMTFzMC4zLDAuMSwwLjQsMC4yQzguMywxMS40LDguMywxMS44LDguMSwxMi4xeiBNOC4xLDlDNy45LDkuMSw3LjgsOS4yLDcuNiw5LjJTNy4zLDkuMSw3LjIsOUw1LjgsNy42TDQuNCw5CglDNC4yLDkuMiwzLjgsOS4yLDMuNiw5Yy0wLjItMC4yLTAuMi0wLjYsMC0wLjlsMS42LTEuNWMwLjItMC4yLDAuNC0wLjMsMC43LTAuM2MwLjMsMCwwLjUsMC4xLDAuNywwLjNsMS42LDEuNQoJQzguMyw4LjQsOC4zLDguOCw4LjEsOXogTTE1LjIsMTRoLTQuNmMtMC44LDAtMS40LTAuNi0xLjQtMS40YzAtMC44LDAuNi0xLjQsMS40LTEuNGg0LjZjMC44LDAsMS40LDAuNiwxLjQsMS40CglDMTYuNiwxMy4zLDE2LDE0LDE1LjIsMTR6IE0xNS4yLDkuMmgtNC42Yy0wLjgsMC0xLjQtMC42LTEuNC0xLjRjMC0wLjgsMC42LTEuNCwxLjQtMS40aDQuNmMwLjgsMCwxLjQsMC42LDEuNCwxLjQKCUMxNi42LDguNSwxNiw5LjIsMTUuMiw5LjJ6Ii8+Cjwvc3ZnPgo='; |
| [40](#L40) |  |
| [41](#L41) | // Set UI labels for Custom Post Type |
| [42](#L42) | $labels = array( |
| [43](#L43) | 'name'                => \_x( 'Ideas', 'Post Type General Name', 'ideapush' ), |
| [44](#L44) | 'singular\_name'       => \_x( 'Idea', 'Post Type Singular Name', 'ideapush' ), |
| [45](#L45) | 'menu\_name'           => \_\_( 'IdeaPush', 'ideapush' ), |
| [46](#L46) | 'parent\_item\_colon'   => \_\_( 'Parent Idea', 'ideapush' ), |
| [47](#L47) | 'all\_items'           => \_\_( 'All Ideas', 'ideapush' ), |
| [48](#L48) | 'view\_item'           => \_\_( 'View Idea', 'ideapush' ), |
| [49](#L49) | 'add\_new\_item'        => \_\_( 'Add New Idea', 'ideapush' ), |
| [50](#L50) | 'add\_new'             => \_\_( 'Add New', 'ideapush' ), |
| [51](#L51) | 'edit\_item'           => \_\_( 'Edit Idea', 'ideapush' ), |
| [52](#L52) | 'update\_item'         => \_\_( 'Update Idea', 'ideapush' ), |
| [53](#L53) | 'search\_items'        => \_\_( 'Search Idea', 'ideapush' ), |
| [54](#L54) | 'not\_found'           => \_\_( 'Not Found', 'ideapush' ), |
| [55](#L55) | 'not\_found\_in\_trash'  => \_\_( 'Not found in Trash', 'ideapush' ), |
| [56](#L56) | ); |
| [57](#L57) |  |
| [58](#L58) | // Set other options for Custom Post Type |
| [59](#L59) | $args = array( |
| [60](#L60) | 'label'               => \_\_( 'ideas', 'ideapush' ), |
| [61](#L61) | 'description'         => \_\_( 'IdeaPush ideas', 'ideapush' ), |
| [62](#L62) | 'labels'              => $labels, |
| [63](#L63) | // Features this CPT supports in Post Editor |
| [64](#L64) | //    'supports'            => array( 'title', 'editor', 'author', 'thumbnail', 'comments', 'revisions', 'custom-fields',), |
| [65](#L65) | 'supports'            => array( 'title', 'editor', 'author', 'thumbnail', 'comments', 'revisions','excerpt'), |
| [66](#L66) |  |
| [67](#L67) | // You can associate this CPT with a taxonomy or custom taxonomy. |
| [68](#L68) | 'taxonomies'          => array( 'idea-boards' ), |
| [69](#L69) | /\* A hierarchical CPT is like Pages and can have |
| [70](#L70) | \* Parent and child items. A non-hierarchical CPT |
| [71](#L71) | \* is like Posts. |
| [72](#L72) | \*/ |
| [73](#L73) | 'hierarchical'        => false, |
| [74](#L74) | 'public'              => true, |
| [75](#L75) | 'show\_ui'             => true, |
| [76](#L76) | 'show\_in\_menu'        => true, |
| [77](#L77) | 'show\_in\_nav\_menus'   => true, |
| [78](#L78) | 'show\_in\_admin\_bar'   => true, |
| [79](#L79) | 'menu\_position'       => 5, |
| [80](#L80) | 'menu\_icon'           => $menu\_icon\_svg, |
| [81](#L81) | 'can\_export'          => true, |
| [82](#L82) | 'has\_archive'         => false, |
| [83](#L83) | 'exclude\_from\_search' => false, |
| [84](#L84) | 'publicly\_queryable'  => apply\_filters( 'ideapush\_display\_single\_ideas', true ), |
| [85](#L85) | 'capability\_type'     => array('ip\_idea','ip\_ideas'), |
| [86](#L86) | 'map\_meta\_cap'        => true, |
| [87](#L87) | 'show\_in\_rest' => true, |
| [88](#L88) | ); |
| [89](#L89) |  |
| [90](#L90) | // Registering your Custom Post Type |
| [91](#L91) | register\_post\_type( 'idea', $args ); |
| [92](#L92) |  |
| [93](#L93) | } |
| [94](#L94) |  |
| [95](#L95) | /\* Hook into the 'init' action so that the function |
| [96](#L96) | \* Containing our post type registration is not |
| [97](#L97) | \* unnecessarily executed. |
| [98](#L98) | \*/ |
| [99](#L99) |  |
| [100](#L100) | add\_action( 'init', 'idea\_push\_create\_custom\_post\_type', 0 ); |
| [101](#L101) |  |
| [102](#L102) |  |
| [103](#L103) | //when activating or deactivating the plugin lets fluch the rewrite rules because otherwise the single post pages may produce an error |
| [104](#L104) |  |
| [105](#L105) | register\_activation\_hook( \_\_FILE\_\_, 'idea\_push\_flush\_rewrites' ); |
| [106](#L106) | function idea\_push\_flush\_rewrites() { |
| [107](#L107) | // call your CPT registration function here (it should also be hooked into 'init') |
| [108](#L108) | idea\_push\_create\_custom\_post\_type(); |
| [109](#L109) | } |
| [110](#L110) |  |
| [111](#L111) |  |
| [112](#L112) |  |
| [113](#L113) |  |
| [114](#L114) |  |
| [115](#L115) |  |
| [116](#L116) |  |
| [117](#L117) |  |
| [118](#L118) |  |
| [119](#L119) | //run on activating the plugin |
| [120](#L120) | function idea\_push\_plugin\_activate() { |
| [121](#L121) |  |
| [122](#L122) | // remove\_role( 'idea\_push\_guest' ); |
| [123](#L123) | add\_role( 'idea\_push\_guest', 'IdeaPush Guest', array('read' => true, 'level\_1' => true )); |
| [124](#L124) | add\_role( 'idea\_push\_manager', 'IdeaPush Manager', array('read' => true, 'level\_1' => true,'manage\_idea\_push\_settings' => true )); |
| [125](#L125) | } |
| [126](#L126) | register\_activation\_hook( \_\_FILE\_\_, 'idea\_push\_plugin\_activate' ); |
| [127](#L127) |  |
| [128](#L128) |  |
| [129](#L129) | //adds new role to wordpress |
| [130](#L130) | //this is poorly implemented but I don't know a nicer way to do it because adding the role upon updating was not working |
| [131](#L131) | function idea\_push\_check\_if\_manager\_role\_exists(){ |
| [132](#L132) | if(get\_role("idea\_push\_manager") == null){ |
| [133](#L133) | add\_role( 'idea\_push\_manager', 'IdeaPush Manager', array('read' => true, 'level\_1' => true,'manage\_idea\_push\_settings' => true )); |
| [134](#L134) | } |
| [135](#L135) | } |
| [136](#L136) | add\_action( 'admin\_init', 'idea\_push\_check\_if\_manager\_role\_exists' ); |
| [137](#L137) |  |
| [138](#L138) |  |
| [139](#L139) |  |
| [140](#L140) |  |
| [141](#L141) | //add role capabilities for custom post type |
| [142](#L142) | add\_action('admin\_init','idea\_push\_role\_capabilities',999); |
| [143](#L143) | function idea\_push\_role\_capabilities() { |
| [144](#L144) |  |
| [145](#L145) | // Add the roles you'd like to administer the custom post types |
| [146](#L146) | $roles = array('idea\_push\_manager','editor','administrator'); |
| [147](#L147) | $capability\_normal = 'ip\_idea'; |
| [148](#L148) | $capability\_plural = 'ip\_ideas'; |
| [149](#L149) |  |
| [150](#L150) | // Loop through each role and assign capabilities |
| [151](#L151) | foreach($roles as $the\_role) { |
| [152](#L152) |  |
| [153](#L153) | $role = get\_role($the\_role); |
| [154](#L154) |  |
| [155](#L155) | if($role){ |
| [156](#L156) | $role->add\_cap( 'read' ); |
| [157](#L157) | $role->add\_cap( 'manage\_tags' ); |
| [158](#L158) | $role->add\_cap( 'edit\_tags' ); |
| [159](#L159) | $role->add\_cap( 'read\_'.$capability\_normal); |
| [160](#L160) | $role->add\_cap( 'delete\_'.$capability\_normal ); |
| [161](#L161) | $role->add\_cap( 'read\_private\_'.$capability\_plural ); |
| [162](#L162) | $role->add\_cap( 'edit\_'.$capability\_normal ); |
| [163](#L163) | $role->add\_cap( 'edit\_'.$capability\_plural ); |
| [164](#L164) | $role->add\_cap( 'edit\_others\_'.$capability\_plural ); |
| [165](#L165) | $role->add\_cap( 'edit\_published\_'.$capability\_plural ); |
| [166](#L166) | $role->add\_cap( 'edit\_private\_'.$capability\_plural ); |
| [167](#L167) | $role->add\_cap( 'publish\_'.$capability\_plural ); |
| [168](#L168) | $role->add\_cap( 'delete\_others\_'.$capability\_plural ); |
| [169](#L169) | $role->add\_cap( 'delete\_private\_'.$capability\_plural ); |
| [170](#L170) | $role->add\_cap( 'delete\_published\_'.$capability\_plural ); |
| [171](#L171) | $role->add\_cap( 'delete\_'.$capability\_plural ); |
| [172](#L172) | $role->add\_cap( 'manage\_idea\_push\_settings'); |
| [173](#L173) | } |
| [174](#L174) |  |
| [175](#L175) |  |
| [176](#L176) | } |
| [177](#L177) | } |
| [178](#L178) |  |
| [179](#L179) |  |
| [180](#L180) |  |
| [181](#L181) |  |
| [182](#L182) |  |
| [183](#L183) | //run on deactivating the plugin |
| [184](#L184) | function idea\_push\_plugin\_deactivate(){ |
| [185](#L185) | remove\_role( 'idea\_push\_guest' ); |
| [186](#L186) | remove\_role( 'idea\_push\_manager' ); |
| [187](#L187) | } |
| [188](#L188) | register\_deactivation\_hook( \_\_FILE\_\_, 'idea\_push\_plugin\_deactivate' ); |
| [189](#L189) |  |
| [190](#L190) |  |
| [191](#L191) | //enable idea push managers to save the settings |
| [192](#L192) | function idea\_push\_manager\_save\_settings(){ |
| [193](#L193) | return 'manage\_idea\_push\_settings'; |
| [194](#L194) | } |
| [195](#L195) | add\_filter( 'option\_page\_capability\_ip\_notifications', 'idea\_push\_manager\_save\_settings'); |
| [196](#L196) | add\_filter( 'option\_page\_capability\_ip\_statuses', 'idea\_push\_manager\_save\_settings'); |
| [197](#L197) | add\_filter( 'option\_page\_capability\_ip\_design', 'idea\_push\_manager\_save\_settings'); |
| [198](#L198) | add\_filter( 'option\_page\_capability\_ip\_idea\_form', 'idea\_push\_manager\_save\_settings'); |
| [199](#L199) | add\_filter( 'option\_page\_capability\_ip\_boards', 'idea\_push\_manager\_save\_settings'); |
| [200](#L200) | add\_filter( 'option\_page\_capability\_ip\_licence', 'idea\_push\_manager\_save\_settings'); |
| [201](#L201) | add\_filter( 'option\_page\_capability\_ip\_ideapush\_support', 'idea\_push\_manager\_save\_settings'); |
| [202](#L202) | add\_filter( 'option\_page\_capability\_ip\_ideapush\_pro', 'idea\_push\_manager\_save\_settings'); |
| [203](#L203) | add\_filter( 'option\_page\_capability\_ip\_integrations', 'idea\_push\_manager\_save\_settings'); |
| [204](#L204) |  |
| [205](#L205) |  |
| [206](#L206) |  |
| [207](#L207) | //add a settings link on the plugin page |
| [208](#L208) | function idea\_push\_add\_settings\_link( $links ) { |
| [209](#L209) | $settings\_link = '<a href="edit.php?post\_type=idea&page=idea\_push\_settings">' . \_\_( 'Settings','ideapush' ) . '</a>'; |
| [210](#L210) | $ideas\_link = '<a href="edit.php?post\_type=idea">' . \_\_( 'All Ideas','ideapush' ) . '</a>'; |
| [211](#L211) | array\_unshift( $links, $settings\_link ); |
| [212](#L212) | array\_unshift( $links, $ideas\_link ); |
| [213](#L213) |  |
| [214](#L214) |  |
| [215](#L215) | return $links; |
| [216](#L216) | } |
| [217](#L217) | $plugin = plugin\_basename( \_\_FILE\_\_ ); |
| [218](#L218) | add\_filter( "plugin\_action\_links\_$plugin", 'idea\_push\_add\_settings\_link' ); |
| [219](#L219) |  |
| [220](#L220) |  |
| [221](#L221) |  |
| [222](#L222) | //create boards taxonomy |
| [223](#L223) | add\_action( 'init', 'idea\_push\_create\_taxonomy\_boards', 0 ); |
| [224](#L224) |  |
| [225](#L225) | function idea\_push\_create\_taxonomy\_boards() { |
| [226](#L226) |  |
| [227](#L227) | // Labels part for the GUI |
| [228](#L228) |  |
| [229](#L229) | $labels = array( |
| [230](#L230) | 'name' => \_x( 'Boards', 'taxonomy general name' ), |
| [231](#L231) | 'singular\_name' => \_x( 'Board', 'taxonomy singular name' ), |
| [232](#L232) | 'search\_items' =>  \_\_( 'Search Boards' ), |
| [233](#L233) | 'popular\_items' => \_\_( 'Popular Boards' ), |
| [234](#L234) | 'all\_items' => \_\_( 'All Boards' ), |
| [235](#L235) | 'parent\_item' => null, |
| [236](#L236) | 'parent\_item\_colon' => null, |
| [237](#L237) | 'edit\_item' => \_\_( 'Edit Board' ), |
| [238](#L238) | 'update\_item' => \_\_( 'Update Board' ), |
| [239](#L239) | 'add\_new\_item' => \_\_( 'Add New Board' ), |
| [240](#L240) | 'new\_item\_name' => \_\_( 'New Board Name' ), |
| [241](#L241) | 'separate\_items\_with\_commas' => \_\_( 'Separate boards with commas' ), |
| [242](#L242) | 'add\_or\_remove\_items' => \_\_( 'Add or remove boards' ), |
| [243](#L243) | 'choose\_from\_most\_used' => \_\_( 'Choose from the most used boards' ), |
| [244](#L244) | 'menu\_name' => \_\_( 'Boards' ), |
| [245](#L245) | ); |
| [246](#L246) |  |
| [247](#L247) | // Now register the non-hierarchical taxonomy like tag |
| [248](#L248) |  |
| [249](#L249) | register\_taxonomy('boards','idea',array( |
| [250](#L250) | 'hierarchical' => true, |
| [251](#L251) | 'labels' => $labels, |
| [252](#L252) | 'show\_ui' => true, |
| [253](#L253) | 'show\_in\_menu' => false, |
| [254](#L254) | 'show\_in\_nav\_menus' => false, |
| [255](#L255) | 'show\_admin\_column' => true, |
| [256](#L256) | 'update\_count\_callback' => '\_update\_post\_term\_count', |
| [257](#L257) | 'query\_var' => true, |
| [258](#L258) | 'rewrite' => array( 'slug' => 'ip-board' ), |
| [259](#L259) | 'meta\_box\_cb' => 'idea\_push\_taxonomy\_radio\_meta\_box', |
| [260](#L260) | 'capabilities' => array ( |
| [261](#L261) | 'manage\_terms' => 'read', //by default only admin |
| [262](#L262) | 'edit\_terms' => 'manage\_tags', |
| [263](#L263) | 'delete\_terms' => 'manage\_tags', |
| [264](#L264) | 'assign\_terms' => 'edit\_tags' |
| [265](#L265) | ), |
| [266](#L266) | )); |
| [267](#L267) |  |
| [268](#L268) | } |
| [269](#L269) |  |
| [270](#L270) |  |
| [271](#L271) | //create tags taxonomy |
| [272](#L272) | add\_action( 'init', 'idea\_push\_create\_taxonomy\_tags', 0 ); |
| [273](#L273) |  |
| [274](#L274) | function idea\_push\_create\_taxonomy\_tags() { |
| [275](#L275) |  |
| [276](#L276) | // Labels part for the GUI |
| [277](#L277) |  |
| [278](#L278) | $labels = array( |
| [279](#L279) | 'name' => \_x( 'Tags', 'taxonomy general name' ), |
| [280](#L280) | 'singular\_name' => \_x( 'Tag', 'taxonomy singular name' ), |
| [281](#L281) | 'search\_items' =>  \_\_( 'Search tags' ), |
| [282](#L282) | 'popular\_items' => \_\_( 'Popular Tags' ), |
| [283](#L283) | 'all\_items' => \_\_( 'All Tags' ), |
| [284](#L284) | 'parent\_item' => null, |
| [285](#L285) | 'parent\_item\_colon' => null, |
| [286](#L286) | 'edit\_item' => \_\_( 'Edit Tag' ), |
| [287](#L287) | 'update\_item' => \_\_( 'Update Tag' ), |
| [288](#L288) | 'add\_new\_item' => \_\_( 'Add New Tag' ), |
| [289](#L289) | 'new\_item\_name' => \_\_( 'New Tag Name' ), |
| [290](#L290) | 'separate\_items\_with\_commas' => \_\_( 'Separate tags with commas' ), |
| [291](#L291) | 'add\_or\_remove\_items' => \_\_( 'Add or remove tags' ), |
| [292](#L292) | 'choose\_from\_most\_used' => \_\_( 'Choose from the most used tags' ), |
| [293](#L293) | 'menu\_name' => \_\_( 'Tags' ), |
| [294](#L294) | ); |
| [295](#L295) |  |
| [296](#L296) | // Now register the non-hierarchical taxonomy like tag |
| [297](#L297) |  |
| [298](#L298) | register\_taxonomy('tags','idea',array( |
| [299](#L299) | 'hierarchical' => false, |
| [300](#L300) | 'labels' => $labels, |
| [301](#L301) | 'show\_ui' => true, |
| [302](#L302) | 'show\_in\_menu' => true, |
| [303](#L303) | 'show\_in\_nav\_menus' => false, |
| [304](#L304) | 'show\_admin\_column' => true, |
| [305](#L305) | 'update\_count\_callback' => '\_update\_post\_term\_count', |
| [306](#L306) | 'query\_var' => true, |
| [307](#L307) | 'rewrite' => array( 'slug' => 'ip-tag' ), |
| [308](#L308) | 'capabilities' => array ( |
| [309](#L309) | 'manage\_terms' => 'read', //by default only admin |
| [310](#L310) | 'edit\_terms' => 'manage\_tags', |
| [311](#L311) | 'delete\_terms' => 'manage\_tags', |
| [312](#L312) | 'assign\_terms' => 'edit\_tags' |
| [313](#L313) | ), |
| [314](#L314) | )); |
| [315](#L315) |  |
| [316](#L316) | } |
| [317](#L317) |  |
| [318](#L318) |  |
| [319](#L319) |  |
| [320](#L320) | //create  status taxonomy |
| [321](#L321) | add\_action( 'init', 'idea\_push\_create\_taxonomy\_status', 0 ); |
| [322](#L322) |  |
| [323](#L323) | function idea\_push\_create\_taxonomy\_status() { |
| [324](#L324) |  |
| [325](#L325) | // Labels part for the GUI |
| [326](#L326) |  |
| [327](#L327) | $labels = array( |
| [328](#L328) | 'name' => \_x( 'Status', 'taxonomy general name' ), |
| [329](#L329) | 'singular\_name' => \_x( 'Status', 'taxonomy singular name' ), |
| [330](#L330) | 'search\_items' =>  \_\_( 'Search Statuses' ), |
| [331](#L331) | 'popular\_items' => \_\_( 'Popular Statuses' ), |
| [332](#L332) | 'all\_items' => \_\_( 'All Statuses' ), |
| [333](#L333) | 'parent\_item' => null, |
| [334](#L334) | 'parent\_item\_colon' => null, |
| [335](#L335) | 'edit\_item' => \_\_( 'Edit Status' ), |
| [336](#L336) | 'update\_item' => \_\_( 'Update Status' ), |
| [337](#L337) | 'add\_new\_item' => \_\_( 'Add New Status' ), |
| [338](#L338) | 'new\_item\_name' => \_\_( 'New Status Name' ), |
| [339](#L339) | 'separate\_items\_with\_commas' => \_\_( 'Separate statuses with commas' ), |
| [340](#L340) | 'add\_or\_remove\_items' => \_\_( 'Add or remove statuses' ), |
| [341](#L341) | 'choose\_from\_most\_used' => \_\_( 'Choose from the most used statuses' ), |
| [342](#L342) | 'menu\_name' => \_\_( 'Statuses' ), |
| [343](#L343) | ); |
| [344](#L344) |  |
| [345](#L345) | // Now register the non-hierarchical taxonomy like tag |
| [346](#L346) |  |
| [347](#L347) | register\_taxonomy('status','idea',array( |
| [348](#L348) | 'hierarchical' => true, |
| [349](#L349) | 'labels' => $labels, |
| [350](#L350) | 'show\_ui' => true, |
| [351](#L351) | 'show\_in\_quick\_edit' => true, |
| [352](#L352) | 'show\_in\_menu' => true, |
| [353](#L353) | 'show\_in\_nav\_menus' => false, |
| [354](#L354) | 'show\_admin\_column' => true, |
| [355](#L355) | 'update\_count\_callback' => '\_update\_post\_term\_count', |
| [356](#L356) | 'query\_var' => true, |
| [357](#L357) | 'rewrite' => array( 'slug' => 'ip-status' ), |
| [358](#L358) | 'meta\_box\_cb' => 'idea\_push\_taxonomy\_radio\_meta\_box\_status', |
| [359](#L359) | 'capabilities' => array ( |
| [360](#L360) | 'manage\_terms' => 'read', //by default only admin |
| [361](#L361) | 'edit\_terms' => 'manage\_tags', |
| [362](#L362) | 'delete\_terms' => 'manage\_tags', |
| [363](#L363) | 'assign\_terms' => 'edit\_tags' |
| [364](#L364) | ), |
| [365](#L365) | )); |
| [366](#L366) |  |
| [367](#L367) | } |
| [368](#L368) |  |
| [369](#L369) |  |
| [370](#L370) |  |
| [371](#L371) |  |
| [372](#L372) |  |
| [373](#L373) |  |
| [374](#L374) |  |
| [375](#L375) |  |
| [376](#L376) |  |
| [377](#L377) |  |
| [378](#L378) |  |
| [379](#L379) |  |
| [380](#L380) |  |
| [381](#L381) |  |
| [382](#L382) |  |
| [383](#L383) | //create predefined statuses |
| [384](#L384) | add\_action( 'init', 'idea\_push\_create\_predefined\_statuses', 0 ); |
| [385](#L385) |  |
| [386](#L386) | function idea\_push\_create\_predefined\_statuses() { |
| [387](#L387) |  |
| [388](#L388) | if(get\_term\_by('name', 'Open', 'status') == false){ |
| [389](#L389) | wp\_insert\_term( |
| [390](#L390) | 'Open', // the term |
| [391](#L391) | 'status', // the taxonomy |
| [392](#L392) | array( |
| [393](#L393) | 'description'=> '', |
| [394](#L394) | 'slug' => 'open' |
| [395](#L395) | ) |
| [396](#L396) | ); |
| [397](#L397) | } |
| [398](#L398) |  |
| [399](#L399) | if(get\_term\_by('name', 'Reviewed', 'status') == false){ |
| [400](#L400) | wp\_insert\_term( |
| [401](#L401) | 'Reviewed', // the term |
| [402](#L402) | 'status', // the taxonomy |
| [403](#L403) | array( |
| [404](#L404) | 'description'=> '', |
| [405](#L405) | 'slug' => 'reviewed' |
| [406](#L406) | ) |
| [407](#L407) | ); |
| [408](#L408) | } |
| [409](#L409) |  |
| [410](#L410) | if(get\_term\_by('name', 'Approved', 'status') == false){ |
| [411](#L411) | wp\_insert\_term( |
| [412](#L412) | 'Approved', // the term |
| [413](#L413) | 'status', // the taxonomy |
| [414](#L414) | array( |
| [415](#L415) | 'description'=> '', |
| [416](#L416) | 'slug' => 'approved' |
| [417](#L417) | ) |
| [418](#L418) | ); |
| [419](#L419) | } |
| [420](#L420) |  |
| [421](#L421) | if(get\_term\_by('name', 'Declined', 'status') == false){ |
| [422](#L422) | wp\_insert\_term( |
| [423](#L423) | 'Declined', // the term |
| [424](#L424) | 'status', // the taxonomy |
| [425](#L425) | array( |
| [426](#L426) | 'description'=> '', |
| [427](#L427) | 'slug' => 'declined' |
| [428](#L428) | ) |
| [429](#L429) | ); |
| [430](#L430) | } |
| [431](#L431) |  |
| [432](#L432) | if(get\_term\_by('name', 'In Progress', 'status') == false){ |
| [433](#L433) | wp\_insert\_term( |
| [434](#L434) | 'In Progress', // the term |
| [435](#L435) | 'status', // the taxonomy |
| [436](#L436) | array( |
| [437](#L437) | 'description'=> '', |
| [438](#L438) | 'slug' => 'in-progress' |
| [439](#L439) | ) |
| [440](#L440) | ); |
| [441](#L441) | } |
| [442](#L442) |  |
| [443](#L443) | if(get\_term\_by('name', 'Completed', 'status') == false){ |
| [444](#L444) | wp\_insert\_term( |
| [445](#L445) | 'Completed', // the term |
| [446](#L446) | 'status', // the taxonomy |
| [447](#L447) | array( |
| [448](#L448) | 'description'=> '', |
| [449](#L449) | 'slug' => 'completed' |
| [450](#L450) | ) |
| [451](#L451) | ); |
| [452](#L452) | } |
| [453](#L453) |  |
| [454](#L454) | if(get\_term\_by('name', 'Duplicate', 'status') == false){ |
| [455](#L455) | wp\_insert\_term( |
| [456](#L456) | 'Duplicate', // the term |
| [457](#L457) | 'status', // the taxonomy |
| [458](#L458) | array( |
| [459](#L459) | 'description'=> '', |
| [460](#L460) | 'slug' => 'duplicate' |
| [461](#L461) | ) |
| [462](#L462) | ); |
| [463](#L463) | } |
| [464](#L464) |  |
| [465](#L465) |  |
| [466](#L466) |  |
| [467](#L467) |  |
| [468](#L468) | } |
| [469](#L469) |  |
| [470](#L470) |  |
| [471](#L471) |  |
| [472](#L472) |  |
| [473](#L473) |  |
| [474](#L474) |  |
| [475](#L475) |  |
| [476](#L476) |  |
| [477](#L477) |  |
| [478](#L478) |  |
| [479](#L479) | //lets add our settings page |
| [480](#L480) | add\_action( 'admin\_menu', 'idea\_push\_add\_settings\_page' ); |
| [481](#L481) | add\_action( 'admin\_init', 'idea\_push\_settings\_init' ); |
| [482](#L482) |  |
| [483](#L483) | function idea\_push\_add\_settings\_page() { |
| [484](#L484) |  |
| [485](#L485) | global $idea\_push\_wp\_settings\_page; |
| [486](#L486) |  |
| [487](#L487) | $idea\_push\_wp\_settings\_page = add\_submenu\_page('edit.php?post\_type=idea', \_\_('Settings','ideapush'), \_\_('Settings','ideapush'),'manage\_idea\_push\_settings', 'idea\_push\_settings', 'idea\_push\_settings\_page\_content'); |
| [488](#L488) |  |
| [489](#L489) | } |
| [490](#L490) |  |
| [491](#L491) | //callback function of setting page |
| [492](#L492) | function idea\_push\_settings\_page\_content(){ |
| [493](#L493) | require('inc/options/options-page-wrapper.php'); |
| [494](#L494) | } |
| [495](#L495) |  |
| [496](#L496) | //Gets, sets and renders options |
| [497](#L497) | require('inc/options/options-output.php'); |
| [498](#L498) |  |
| [499](#L499) | //Renders the board |
| [500](#L500) | require('inc/options/options-board-render.php'); |
| [501](#L501) |  |
| [502](#L502) | //produces the shortcode |
| [503](#L503) | require('inc/shortcode/ideaboard-shortcode.php'); |
| [504](#L504) |  |
| [505](#L505) | //function that generates list items |
| [506](#L506) | require('inc/shortcode/idea-list-items.php'); |
| [507](#L507) |  |
| [508](#L508) | //function that creates the idea form |
| [509](#L509) | require('inc/shortcode/create-idea-form.php'); |
| [510](#L510) |  |
| [511](#L511) | //function that creates the idea table header |
| [512](#L512) | require('inc/shortcode/idea-table-header.php'); |
| [513](#L513) |  |
| [514](#L514) | //function that creates ideas |
| [515](#L515) | require('inc/functions/create-idea.php'); |
| [516](#L516) |  |
| [517](#L517) | //function that creates votes |
| [518](#L518) | require('inc/functions/create-vote.php'); |
| [519](#L519) |  |
| [520](#L520) | //function that changes the status |
| [521](#L521) | require('inc/functions/status-change.php'); |
| [522](#L522) |  |
| [523](#L523) | //common functions that assist other functions run |
| [524](#L524) | require('inc/functions/helper-functions.php'); |
| [525](#L525) |  |
| [526](#L526) | //function that creates a user |
| [527](#L527) | require('inc/functions/create-user.php'); |
| [528](#L528) |  |
| [529](#L529) | //function that updates a user |
| [530](#L530) | require('inc/functions/update-user.php'); |
| [531](#L531) |  |
| [532](#L532) | //function puts idea stuff on the single idea page |
| [533](#L533) | require('inc/functions/single-idea.php'); |
| [534](#L534) |  |
| [535](#L535) | //function that adds our metabox |
| [536](#L536) | require('inc/functions/create-metaboxes.php'); |
| [537](#L537) |  |
| [538](#L538) | //function that creates user profile image and votes remaining |
| [539](#L539) | require('inc/functions/user-profile-meta.php'); |
| [540](#L540) |  |
| [541](#L541) |  |
| [542](#L542) |  |
| [543](#L543) | //get pro options |
| [544](#L544) | if($ideapush\_is\_pro=="YES"){ |
| [545](#L545) | require('inc/pro-ip/idea-push-pro.php'); |
| [546](#L546) | } |
| [547](#L547) |  |
| [548](#L548) |  |
| [549](#L549) |  |
| [550](#L550) |  |
| [551](#L551) | // Load admin style and scripts |
| [552](#L552) | function idea\_push\_register\_admin\_styles($hook) |
| [553](#L553) | { |
| [554](#L554) |  |
| [555](#L555) | global $pagenow; |
| [556](#L556) |  |
| [557](#L557) | global $idea\_push\_wp\_settings\_page; |
| [558](#L558) | global $idea\_push\_wp\_reports\_page; |
| [559](#L559) |  |
| [560](#L560) | if('profile.php' == $pagenow || 'user-edit.php' == $pagenow){ |
| [561](#L561) | //display on user profile page |
| [562](#L562) | wp\_enqueue\_media(); |
| [563](#L563) | wp\_enqueue\_script( 'user-profile-script-ideapush', plugins\_url( '/inc/js/userprofile.js', \_\_FILE\_\_ ), array( 'jquery' ),idea\_push\_plugin\_get\_version()); |
| [564](#L564) | } |
| [565](#L565) |  |
| [566](#L566) |  |
| [567](#L567) | if($hook != $idea\_push\_wp\_reports\_page && $hook != $idea\_push\_wp\_settings\_page ){ |
| [568](#L568) | return; |
| [569](#L569) |  |
| [570](#L570) | } else { |
| [571](#L571) | //css |
| [572](#L572) | wp\_enqueue\_style( 'wp-color-picker' ); |
| [573](#L573) | wp\_enqueue\_style( 'custom-admin-style-ideapush', plugins\_url( '/inc/css/adminstyle.css', \_\_FILE\_\_ ),array(),idea\_push\_plugin\_get\_version()); |
| [574](#L574) | wp\_enqueue\_style( 'font-awesome', plugins\_url( '/inc/css/font-awesome.min.css', \_\_FILE\_\_ )); |
| [575](#L575) | wp\_enqueue\_style('tippy', plugins\_url('/inc/css/tippy.css', \_\_FILE\_\_ )); |
| [576](#L576) |  |
| [577](#L577) | //js |
| [578](#L578) | wp\_enqueue\_script( 'custom-admin-script-ideapush', plugins\_url( '/inc/js/adminscript.js', \_\_FILE\_\_ ), array( 'jquery','wp-color-picker' ),idea\_push\_plugin\_get\_version()); |
| [579](#L579) | wp\_enqueue\_script('jquery-ui-dialog'); |
| [580](#L580) | wp\_enqueue\_script('jquery-ui-accordion'); |
| [581](#L581) | wp\_enqueue\_script('jquery-ui-tabs'); |
| [582](#L582) | wp\_enqueue\_script('jquery-ui-datepicker'); |
| [583](#L583) | wp\_enqueue\_script('jquery-ui-sortable'); |
| [584](#L584) | wp\_enqueue\_script('jquery-form'); |
| [585](#L585) |  |
| [586](#L586) | wp\_enqueue\_script('alertify', plugins\_url('/inc/js/alertify.js', \_\_FILE\_\_ ), array( 'jquery'),null,true); |
| [587](#L587) | wp\_enqueue\_script('clipboard', plugins\_url('/inc/js/clipboard.min.js', \_\_FILE\_\_ ), array( 'jquery'),'2.0.4'); |
| [588](#L588) | wp\_enqueue\_script('tippy', plugins\_url('/inc/js/tippy.min.js', \_\_FILE\_\_ ), array( 'jquery'),'1.0'); |
| [589](#L589) |  |
| [590](#L590) | } |
| [591](#L591) |  |
| [592](#L592) |  |
| [593](#L593) |  |
| [594](#L594) |  |
| [595](#L595) |  |
| [596](#L596) |  |
| [597](#L597) |  |
| [598](#L598) |  |
| [599](#L599) | } |
| [600](#L600) | add\_action( 'admin\_enqueue\_scripts', 'idea\_push\_register\_admin\_styles' ); |
| [601](#L601) |  |
| [602](#L602) |  |
| [603](#L603) |  |
| [604](#L604) | // Load styles and scripts for the single idea page |
| [605](#L605) | function idea\_push\_register\_admin\_styles\_single(){ |
| [606](#L606) |  |
| [607](#L607) | global $post\_type; |
| [608](#L608) |  |
| [609](#L609) | if('idea' != $post\_type) |
| [610](#L610) | return; |
| [611](#L611) |  |
| [612](#L612) | //css |
| [613](#L613) |  |
| [614](#L614) | //js |
| [615](#L615) | wp\_enqueue\_script( 'custom-frontend-script-single-idea', plugins\_url( '/inc/js/singleideascript.js', \_\_FILE\_\_ ), array( 'jquery'), idea\_push\_plugin\_get\_version()); |
| [616](#L616) |  |
| [617](#L617) | } |
| [618](#L618) | add\_action( 'admin\_enqueue\_scripts', 'idea\_push\_register\_admin\_styles\_single' ); |
| [619](#L619) |  |
| [620](#L620) |  |
| [621](#L621) |  |
| [622](#L622) |  |
| [623](#L623) |  |
| [624](#L624) |  |
| [625](#L625) |  |
| [626](#L626) |  |
| [627](#L627) |  |
| [628](#L628) |  |
| [629](#L629) |  |
| [630](#L630) |  |
| [631](#L631) |  |
| [632](#L632) | // Load frontend  style and scripts |
| [633](#L633) | function idea\_push\_register\_frontend\_styles() |
| [634](#L634) | { |
| [635](#L635) | //get settings |
| [636](#L636) | $options = get\_option('idea\_push\_settings'); |
| [637](#L637) |  |
| [638](#L638) | //css |
| [639](#L639) | wp\_register\_style( 'custom-frontend-style-ideapush', plugins\_url( '/inc/css/frontendstyle.css', \_\_FILE\_\_ ),array(),idea\_push\_plugin\_get\_version()); |
| [640](#L640) | wp\_register\_style( 'ideapush-font', plugins\_url( '/inc/css/ideapush-font.css', \_\_FILE\_\_ )); |
| [641](#L641) |  |
| [642](#L642) |  |
| [643](#L643) | //js |
| [644](#L644) | wp\_register\_script( 'custom-frontend-script-ideapush', plugins\_url( '/inc/js/frontendscript.js', \_\_FILE\_\_ ), array( 'jquery'), idea\_push\_plugin\_get\_version()); |
| [645](#L645) |  |
| [646](#L646) | wp\_localize\_script('custom-frontend-script-ideapush','get\_new\_ideas', array( 'ajaxurl' => admin\_url( 'admin-ajax.php' ) ) ); |
| [647](#L647) | wp\_localize\_script('custom-frontend-script-ideapush','submit\_vote', array( 'ajaxurl' => admin\_url( 'admin-ajax.php' ) ) ); |
| [648](#L648) | wp\_localize\_script('custom-frontend-script-ideapush','create\_user', array( 'ajaxurl' => admin\_url( 'admin-ajax.php' ) ) ); |
| [649](#L649) | wp\_localize\_script('custom-frontend-script-ideapush','header\_render', array( 'ajaxurl' => admin\_url( 'admin-ajax.php' ) ) ); |
| [650](#L650) | wp\_localize\_script('custom-frontend-script-ideapush','form\_render', array( 'ajaxurl' => admin\_url( 'admin-ajax.php' ) ) ); |
| [651](#L651) | wp\_localize\_script('custom-frontend-script-ideapush','create\_idea', array( 'ajaxurl' => admin\_url( 'admin-ajax.php' ) ) ); |
| [652](#L652) | wp\_localize\_script('custom-frontend-script-ideapush','delete\_idea', array( 'ajaxurl' => admin\_url( 'admin-ajax.php' ) ) ); |
| [653](#L653) | wp\_localize\_script('custom-frontend-script-ideapush','change\_status', array( 'ajaxurl' => admin\_url( 'admin-ajax.php' ) ) ); |
| [654](#L654) | wp\_localize\_script('custom-frontend-script-ideapush','update\_vote\_counter', array( 'ajaxurl' => admin\_url( 'admin-ajax.php' ) ) ); |
| [655](#L655) | wp\_localize\_script('custom-frontend-script-ideapush','below\_title\_header', array( 'ajaxurl' => admin\_url( 'admin-ajax.php' ) ) ); |
| [656](#L656) | wp\_localize\_script('custom-frontend-script-ideapush','is\_person\_able\_to\_add\_tag', array( 'ajaxurl' => admin\_url( 'admin-ajax.php' ) ) ); |
| [657](#L657) | wp\_localize\_script('custom-frontend-script-ideapush','update\_user\_profile', array( 'ajaxurl' => admin\_url( 'admin-ajax.php' ) ) ); |
| [658](#L658) |  |
| [659](#L659) |  |
| [660](#L660) | wp\_register\_script('alertify', plugins\_url('/inc/js/alertify.js', \_\_FILE\_\_ ), array( 'jquery'),null,true); |
| [661](#L661) | wp\_register\_script('scroll-reveal', plugins\_url('/inc/js/scrollreveal.min.js', \_\_FILE\_\_ ), array( 'jquery')); |
| [662](#L662) | wp\_register\_script('read-more', plugins\_url('/inc/js/readmore.min.js', \_\_FILE\_\_ ), array( 'jquery')); |
| [663](#L663) | // wp\_register\_script('jquery-ui-dialog'); |
| [664](#L664) |  |
| [665](#L665) |  |
| [666](#L666) |  |
| [667](#L667) | } |
| [668](#L668) | add\_action( 'wp\_enqueue\_scripts', 'idea\_push\_register\_frontend\_styles' ); |
| [669](#L669) |  |
| [670](#L670) |  |
| [671](#L671) |  |
| [672](#L672) |  |
| [673](#L673) |  |
| [674](#L674) |  |
| [675](#L675) |  |
| [676](#L676) | //create taxonomy item |
| [677](#L677) | //this is used to create a taxonomy for the board when the user creates a board from the plugin settings |
| [678](#L678) | function idea\_push\_add\_taxonomy\_item() { |
| [679](#L679) |  |
| [680](#L680) | //add better protection of this function |
| [681](#L681) | //check if user is admin or manager |
| [682](#L682) | $nonce = $\_POST['nonce']; |
| [683](#L683) |  |
| [684](#L684) | if( wp\_verify\_nonce( $nonce, 'ideapush\_create\_board' ) ){ |
| [685](#L685) |  |
| [686](#L686) | if(current\_user\_can('administrator') || current\_user\_can('idea\_push\_manager')){ |
| [687](#L687) |  |
| [688](#L688) |  |
| [689](#L689) | //get options |
| [690](#L690) | $options = get\_option('idea\_push\_settings'); |
| [691](#L691) |  |
| [692](#L692) | //get is pro |
| [693](#L693) | global $ideapush\_is\_pro; |
| [694](#L694) |  |
| [695](#L695) | //get board name from ajax call |
| [696](#L696) | $boardName = idea\_push\_sanitization\_validation($\_POST['boardName'],'boardname'); |
| [697](#L697) |  |
| [698](#L698) | if($boardName == false){ |
| [699](#L699) | wp\_die(); |
| [700](#L700) | } |
| [701](#L701) |  |
| [702](#L702) |  |
| [703](#L703) |  |
| [704](#L704) |  |
| [705](#L705) | //lets first check if the board already exists |
| [706](#L706) | if(get\_term\_by('name', $boardName, 'boards') == false){ |
| [707](#L707) |  |
| [708](#L708) | //lets check if licenced |
| [709](#L709) | if(($ideapush\_is\_pro == 'YES' && strlen($options['idea\_push\_purchase\_email'])>0 && strlen($options['idea\_push\_order\_id'])>0) || wp\_count\_terms('boards',array( "hide\_empty" => 0 )) == 0){ |
| [710](#L710) |  |
| [711](#L711) | idea\_push\_create\_taxonomy\_boards(); |
| [712](#L712) |  |
| [713](#L713) | $boardNameSlug = strtolower($boardName); |
| [714](#L714) | $boardNameSlug = preg\_replace('/\s+/', '-', $boardNameSlug); |
| [715](#L715) |  |
| [716](#L716) | wp\_insert\_term( |
| [717](#L717) | $boardName, // the term |
| [718](#L718) | 'boards', // the taxonomy |
| [719](#L719) | array( |
| [720](#L720) | 'description'=> '', |
| [721](#L721) | 'slug' => $boardNameSlug |
| [722](#L722) | ) |
| [723](#L723) | ); |
| [724](#L724) |  |
| [725](#L725) | //lets return the item id |
| [726](#L726) |  |
| [727](#L727) | $getTermId = get\_term\_by('name', $boardName, 'boards'); |
| [728](#L728) | $termId = $getTermId->term\_id; |
| [729](#L729) |  |
| [730](#L730) | //return board html |
| [731](#L731) | echo idea\_push\_render\_board('',$termId,$boardName); |
| [732](#L732) |  |
| [733](#L733) |  |
| [734](#L734) | } else { |
| [735](#L735) | echo 'NOT-PRO'; |
| [736](#L736) | } |
| [737](#L737) |  |
| [738](#L738) |  |
| [739](#L739) |  |
| [740](#L740) |  |
| [741](#L741) | } else { |
| [742](#L742) |  |
| [743](#L743) | echo 'TERM-EXISTS'; |
| [744](#L744) |  |
| [745](#L745) | } |
| [746](#L746) |  |
| [747](#L747) | } //end manager/admin check |
| [748](#L748) | } //end nonce check |
| [749](#L749) |  |
| [750](#L750) | //die |
| [751](#L751) | wp\_die(); |
| [752](#L752) |  |
| [753](#L753) |  |
| [754](#L754) | } |
| [755](#L755) | add\_action( 'wp\_ajax\_add\_taxonomy\_item', 'idea\_push\_add\_taxonomy\_item' ); |
| [756](#L756) |  |
| [757](#L757) |  |
| [758](#L758) |  |
| [759](#L759) |  |
| [760](#L760) |  |
| [761](#L761) |  |
| [762](#L762) |  |
| [763](#L763) |  |
| [764](#L764) |  |
| [765](#L765) | //lets delete existing taxonomies and rename others where necessary |
| [766](#L766) | add\_action( 'wp\_ajax\_taxonomy\_save\_routine', 'idea\_push\_taxonomy\_save\_routine' ); |
| [767](#L767) | function idea\_push\_taxonomy\_save\_routine() { |
| [768](#L768) |  |
| [769](#L769) |  |
| [770](#L770) | if(isset($\_POST['nonce']) && wp\_verify\_nonce($\_POST['nonce'], 'taxonomy\_save\_routine')){ |
| [771](#L771) | if (current\_user\_can('administrator') || current\_user\_can('manage\_idea\_push\_settings')) { |
| [772](#L772) |  |
| [773](#L773) | //get board name from ajax call |
| [774](#L774) | $comparisonData = $\_POST['comparisonData']; |
| [775](#L775) | $explodeTheData = explode("^^^", $comparisonData); |
| [776](#L776) |  |
| [777](#L777) | $boardIdArray = array(); |
| [778](#L778) |  |
| [779](#L779) | foreach($explodeTheData as $board){ |
| [780](#L780) |  |
| [781](#L781) | $anotherExplosion = explode("|", $board); |
| [782](#L782) | $boardId = $anotherExplosion[0]; |
| [783](#L783) | $boardName = $anotherExplosion[1]; |
| [784](#L784) |  |
| [785](#L785) | array\_push($boardIdArray,$boardId); |
| [786](#L786) |  |
| [787](#L787) | //now lets change the name of existing taxonomies |
| [788](#L788) | $termObject = get\_term($boardId,'boards'); |
| [789](#L789) |  |
| [790](#L790) | //if the there's a match lets update the name if it has changed |
| [791](#L791) | if(!is\_wp\_error($termObject)){ |
| [792](#L792) |  |
| [793](#L793) | $termName = $termObject->name; |
| [794](#L794) |  |
| [795](#L795) | if($boardName !== $termName){ |
| [796](#L796) | //they don't match so lets update this term name with the new board name |
| [797](#L797) | wp\_update\_term($boardId,'boards',array('name' => $boardName)); |
| [798](#L798) | } |
| [799](#L799) | } |
| [800](#L800) |  |
| [801](#L801) | } |
| [802](#L802) |  |
| [803](#L803) |  |
| [804](#L804) | //lets cycle through the existing terms in the taxonomy |
| [805](#L805) | $existingTerms = get\_terms('boards',array( "hide\_empty" => 0 )); |
| [806](#L806) |  |
| [807](#L807) | foreach($existingTerms as $term){ |
| [808](#L808) |  |
| [809](#L809) | $termId = $term->term\_id; |
| [810](#L810) |  |
| [811](#L811) | if(!in\_array($termId,$boardIdArray)){ |
| [812](#L812) | //if the term is not in our array delete it because it's not authorised to exist and it will cause confusion |
| [813](#L813) | wp\_delete\_term($termId,'boards'); |
| [814](#L814) |  |
| [815](#L815) | } |
| [816](#L816) | } |
| [817](#L817) | } |
| [818](#L818) | } |
| [819](#L819) |  |
| [820](#L820) |  |
| [821](#L821) | //die |
| [822](#L822) | wp\_die(); |
| [823](#L823) |  |
| [824](#L824) |  |
| [825](#L825) | } |
| [826](#L826) |  |
| [827](#L827) |  |
| [828](#L828) |  |
| [829](#L829) |  |
| [830](#L830) |  |
| [831](#L831) |  |
| [832](#L832) |  |
| [833](#L833) |  |
| [834](#L834) |  |
| [835](#L835) | //add additional body class to the shortcode page for good measure |
| [836](#L836) | function idea\_push\_add\_body\_class($class) { |
| [837](#L837) |  |
| [838](#L838) | global $post; |
| [839](#L839) |  |
| [840](#L840) | if( isset($post->post\_content) && has\_shortcode( $post->post\_content, 'ideapush' ) ) { |
| [841](#L841) | $class[] = 'idea-push'; |
| [842](#L842) | } |
| [843](#L843) | return $class; |
| [844](#L844) | } |
| [845](#L845) | add\_filter( 'body\_class', 'idea\_push\_add\_body\_class' ); |
| [846](#L846) |  |
| [847](#L847) |  |
| [848](#L848) |  |
| [849](#L849) | //add notification icon to menu item |
| [850](#L850) |  |
| [851](#L851) | add\_action( 'admin\_menu', 'idea\_push\_menu\_bubble' ); |
| [852](#L852) |  |
| [853](#L853) | function idea\_push\_menu\_bubble() { |
| [854](#L854) | global $menu; |
| [855](#L855) |  |
| [856](#L856) | $count = idea\_push\_count\_pending\_ideas() + idea\_push\_count\_ideas\_review\_status(); |
| [857](#L857) |  |
| [858](#L858) |  |
| [859](#L859) | if ($count > 0) { |
| [860](#L860) |  |
| [861](#L861) | foreach ( $menu as $key => $value ) { |
| [862](#L862) |  |
| [863](#L863) | if ( $menu[$key][2] == 'edit.php?post\_type=idea' ) { |
| [864](#L864) |  |
| [865](#L865) | $menu[$key][0] .= ' <span class="update-plugins"><span class="plugin-count">' . $count . '</span></span>'; |
| [866](#L866) |  |
| [867](#L867) | return; |
| [868](#L868) | } |
| [869](#L869) | } |
| [870](#L870) | } |
| [871](#L871) | } |
| [872](#L872) |  |
| [873](#L873) |  |
| [874](#L874) | function idea\_push\_above\_all\_ideas\_table() { |
| [875](#L875) |  |
| [876](#L876) | $screen = get\_current\_screen(); |
| [877](#L877) |  |
| [878](#L878) | if ( $screen->id == 'edit-idea' ) { |
| [879](#L879) |  |
| [880](#L880) | echo '<style> |
| [881](#L881) |  |
| [882](#L882) | .idea-tasks div { |
| [883](#L883) | display: inline-block; |
| [884](#L884) | background: #fff; |
| [885](#L885) | padding: 10px; |
| [886](#L886) | border: 1px solid #e5e5e5; |
| [887](#L887) | border-radius: 6px; |
| [888](#L888) | margin-right: 10px; |
| [889](#L889) | margin-top: 10px; |
| [890](#L890) | margin-bottom: -10px; |
| [891](#L891) |  |
| [892](#L892) | } |
| [893](#L893) |  |
| [894](#L894) | .idea-tasks a { |
| [895](#L895) | text-decoration: none; |
| [896](#L896) |  |
| [897](#L897) | } |
| [898](#L898) |  |
| [899](#L899) | .pending-count, .reviewed-count { |
| [900](#L900) | display: inline-block; |
| [901](#L901) | vertical-align: top; |
| [902](#L902) | margin: 1px 0 0 5px; |
| [903](#L903) | padding: 0 5px; |
| [904](#L904) | min-width: 7px; |
| [905](#L905) | height: 17px; |
| [906](#L906) | border-radius: 11px; |
| [907](#L907) | background-color: #ca4a1f; |
| [908](#L908) | color: #fff; |
| [909](#L909) | font-size: 9px; |
| [910](#L910) | line-height: 17px; |
| [911](#L911) | text-align: center; |
| [912](#L912) | z-index: 26; |
| [913](#L913) |  |
| [914](#L914) | } |
| [915](#L915) |  |
| [916](#L916) | .column-status .open { |
| [917](#L917) | background-color: #4eb5e1; |
| [918](#L918) | color: #fff !important; |
| [919](#L919) | } |
| [920](#L920) |  |
| [921](#L921) | .column-status .in-progress { |
| [922](#L922) | background-color: #a7a9ac; |
| [923](#L923) | color: #fff !important; |
| [924](#L924) | } |
| [925](#L925) |  |
| [926](#L926) |  |
| [927](#L927) | .column-status .completed { |
| [928](#L928) | background-color: #414042; |
| [929](#L929) | color: #fff !important; |
| [930](#L930) | } |
| [931](#L931) |  |
| [932](#L932) | .column-status .reviewed { |
| [933](#L933) | background-color: #fbbf67; |
| [934](#L934) | color: #fff !important; |
| [935](#L935) | } |
| [936](#L936) |  |
| [937](#L937) | .column-status .approved { |
| [938](#L938) | background-color: #5eb46a; |
| [939](#L939) | color: #fff !important; |
| [940](#L940) | } |
| [941](#L941) |  |
| [942](#L942) | .column-status .declined { |
| [943](#L943) | background-color: #f05d55; |
| [944](#L944) | color: #fff !important; |
| [945](#L945) | } |
| [946](#L946) |  |
| [947](#L947) | .column-status .duplicate { |
| [948](#L948) | background-color: #e2e0e0; |
| [949](#L949) | color: #fff !important; |
| [950](#L950) | } |
| [951](#L951) |  |
| [952](#L952) |  |
| [953](#L953) | .column-status a { |
| [954](#L954) |  |
| [955](#L955) | text-transform: uppercase; |
| [956](#L956) | padding: 3px 6px; |
| [957](#L957) | border-radius: 3px; |
| [958](#L958) | font-weight: 600; |
| [959](#L959) | font-size: smaller; |
| [960](#L960) | } |
| [961](#L961) |  |
| [962](#L962) | </style>'; |
| [963](#L963) |  |
| [964](#L964) | $pendingEditPage = get\_admin\_url().'edit.php?post\_status=pending&post\_type=idea'; |
| [965](#L965) | $reviewEditPage = get\_admin\_url().'edit.php?post\_type=idea&status=reviewed'; |
| [966](#L966) |  |
| [967](#L967) | $countPendingIdeas = idea\_push\_count\_pending\_ideas(); |
| [968](#L968) | $countReviewStatus = idea\_push\_count\_ideas\_review\_status(); |
| [969](#L969) |  |
| [970](#L970) |  |
| [971](#L971) | echo '<div class="idea-tasks">'; |
| [972](#L972) |  |
| [973](#L973) | if($countPendingIdeas > 0){ |
| [974](#L974) | echo '<div class="pending-approval">'; |
| [975](#L975) | echo '<a href="'.$pendingEditPage.'" class="pending-count-description">'.\_\_( 'Ideas Pending Release', 'ideapush' ).'</a>'; |
| [976](#L976) | echo '<span class="pending-count">'.$countPendingIdeas.'</span>'; |
| [977](#L977) | echo '</div>'; |
| [978](#L978) | } |
| [979](#L979) |  |
| [980](#L980) | if($countReviewStatus > 0){ |
| [981](#L981) | echo '<div class="reviewed-status">'; |
| [982](#L982) | echo '<a href="'.$reviewEditPage.'" class="reviewed-count-description">'.\_\_( 'Ideas Needing Review', 'ideapush' ).'</a>'; |
| [983](#L983) | echo '<span class="reviewed-count">'.$countReviewStatus.'</span>'; |
| [984](#L984) | echo '</div>'; |
| [985](#L985) | } |
| [986](#L986) |  |
| [987](#L987) | echo '</div>'; |
| [988](#L988) |  |
| [989](#L989) |  |
| [990](#L990) | } |
| [991](#L991) |  |
| [992](#L992) |  |
| [993](#L993) | } |
| [994](#L994) | add\_action( 'admin\_notices', 'idea\_push\_above\_all\_ideas\_table' ); |
| [995](#L995) |  |
| [996](#L996) |  |
| [997](#L997) |  |
| [998](#L998) |  |
| [999](#L999) |  |
| [1000](#L1000) | add\_filter( 'manage\_edit-idea\_columns', 'mycustomposttype\_columns\_definition' ) ; |
| [1001](#L1001) |  |
| [1002](#L1002) |  |
| [1003](#L1003) | function mycustomposttype\_columns\_definition( $columns ) { |
| [1004](#L1004) |  |
| [1005](#L1005) | $new = array(); |
| [1006](#L1006) |  |
| [1007](#L1007) | $columns['votes'] = \_\_( 'Votes','ideapush'); |
| [1008](#L1008) | unset( $new['taxonomy-status'] ); |
| [1009](#L1009) | $columns['status'] = \_\_( 'Status','ideapush'); |
| [1010](#L1010) |  |
| [1011](#L1011) | $customOrder = array('cb','title', 'author','taxonomy-boards' ,'status','taxonomy-tags','votes', 'comments','date'); |
| [1012](#L1012) |  |
| [1013](#L1013) |  |
| [1014](#L1014) | foreach ($customOrder as $colname) |
| [1015](#L1015) | $new[$colname] = $columns[$colname]; |
| [1016](#L1016) | return $new; |
| [1017](#L1017) | } |
| [1018](#L1018) |  |
| [1019](#L1019) |  |
| [1020](#L1020) |  |
| [1021](#L1021) |  |
| [1022](#L1022) | add\_action( 'manage\_idea\_posts\_custom\_column' , 'idea\_push\_vote\_column\_content', 10, 2 ); |
| [1023](#L1023) |  |
| [1024](#L1024) | function idea\_push\_vote\_column\_content( $column, $post\_id ) { |
| [1025](#L1025) | switch ( $column ) { |
| [1026](#L1026) |  |
| [1027](#L1027) | // display a thumbnail photo |
| [1028](#L1028) | case 'votes' : |
| [1029](#L1029) |  |
| [1030](#L1030) | echo get\_post\_meta( $post\_id , 'votes' , true ); |
| [1031](#L1031) | break; |
| [1032](#L1032) |  |
| [1033](#L1033) | case 'status' : |
| [1034](#L1034) |  |
| [1035](#L1035) | $getTerms = get\_the\_terms( $post\_id, 'status' ); |
| [1036](#L1036) |  |
| [1037](#L1037) | if($getTerms !== false){ |
| [1038](#L1038) | foreach($getTerms as $term) { |
| [1039](#L1039) | $status = $term->name; |
| [1040](#L1040) | } |
| [1041](#L1041) |  |
| [1042](#L1042) | $className = strtolower($status); |
| [1043](#L1043) | $className = str\_replace(" ","-",$className); |
| [1044](#L1044) |  |
| [1045](#L1045) | echo '<a class="'.$className.'" href="'.get\_admin\_url().'edit.php?post\_type=idea&status='.$className.'">'.idea\_push\_translate\_status($status).'</a>'; |
| [1046](#L1046) |  |
| [1047](#L1047) | } |
| [1048](#L1048) |  |
| [1049](#L1049) | break; |
| [1050](#L1050) |  |
| [1051](#L1051) | } |
| [1052](#L1052) | } |
| [1053](#L1053) |  |
| [1054](#L1054) |  |
| [1055](#L1055) | add\_filter( 'manage\_edit-idea\_sortable\_columns', 'idea\_push\_sortable\_vote\_column' ); |
| [1056](#L1056) |  |
| [1057](#L1057) | function idea\_push\_sortable\_vote\_column( $columns ) { |
| [1058](#L1058) | $columns['votes'] = 'votes'; |
| [1059](#L1059) | return $columns; |
| [1060](#L1060) | } |
| [1061](#L1061) |  |
| [1062](#L1062) |  |
| [1063](#L1063) | add\_action( 'pre\_get\_posts', 'idea\_push\_custom\_orderby' ); |
| [1064](#L1064) |  |
| [1065](#L1065) | function idea\_push\_custom\_orderby( $query ) { |
| [1066](#L1066) | if ( ! is\_admin() ) |
| [1067](#L1067) | return; |
| [1068](#L1068) |  |
| [1069](#L1069) | $orderby = $query->get( 'orderby'); |
| [1070](#L1070) |  |
| [1071](#L1071) | if ( 'votes' == $orderby ) { |
| [1072](#L1072) | $query->set( 'meta\_key', 'votes' ); |
| [1073](#L1073) | $query->set( 'orderby', 'meta\_value\_num' ); |
| [1074](#L1074) | } |
| [1075](#L1075) |  |
| [1076](#L1076) | } |
| [1077](#L1077) |  |
| [1078](#L1078) |  |
| [1079](#L1079) |  |
| [1080](#L1080) |  |
| [1081](#L1081) | add\_filter( 'template\_include', 'idea\_push\_ip\_tag\_template', 99 ); |
| [1082](#L1082) |  |
| [1083](#L1083) | function idea\_push\_ip\_tag\_template( $template ) { |
| [1084](#L1084) |  |
| [1085](#L1085) |  |
| [1086](#L1086) |  |
| [1087](#L1087) | if ( is\_tax( 'tags' )) { |
| [1088](#L1088) | $template = dirname( \_\_FILE\_\_ ) . '/inc/templates/ip-tag.php'; |
| [1089](#L1089) | return $template; |
| [1090](#L1090) | } elseif( is\_author() && is\_post\_type\_archive( array( 'idea' ) ) ){ |
| [1091](#L1091) | $template = dirname( \_\_FILE\_\_ ) . '/inc/templates/ip-tag.php'; |
| [1092](#L1092) | return $template; |
| [1093](#L1093) |  |
| [1094](#L1094) | } else { |
| [1095](#L1095) | return $template; |
| [1096](#L1096) | } |
| [1097](#L1097) |  |
| [1098](#L1098) |  |
| [1099](#L1099) | } |
| [1100](#L1100) |  |
| [1101](#L1101) |  |
| [1102](#L1102) | function idea\_push\_languages() { |
| [1103](#L1103) | load\_plugin\_textdomain( 'ideapush', false, 'ideapush/inc/languages' ); |
| [1104](#L1104) | } |
| [1105](#L1105) | add\_action('init', 'idea\_push\_languages'); |
| [1106](#L1106) |  |
| [1107](#L1107) |  |
| [1108](#L1108) |  |
| [1109](#L1109) |  |
| [1110](#L1110) |  |
| [1111](#L1111) | //hides boards from WordPress search |
| [1112](#L1112) | add\_action( 'pre\_get\_posts', function ( $query ) { |
| [1113](#L1113) |  |
| [1114](#L1114) | if(get\_option('idea\_push\_settings') && array\_key\_exists('idea\_push\_board\_configuration',get\_option('idea\_push\_settings'))){ |
| [1115](#L1115) |  |
| [1116](#L1116) | //get options |
| [1117](#L1117) | $options = get\_option('idea\_push\_settings'); |
| [1118](#L1118) |  |
| [1119](#L1119) | //get board configuration |
| [1120](#L1120) | $boardConfiguration = $options['idea\_push\_board\_configuration']; |
| [1121](#L1121) |  |
| [1122](#L1122) | if(isset($boardConfiguration) && strlen($boardConfiguration)>0){ |
| [1123](#L1123) |  |
| [1124](#L1124) |  |
| [1125](#L1125) | //split board configuration |
| [1126](#L1126) | $splitBoardConfiguration = explode('^^^',$boardConfiguration); |
| [1127](#L1127) |  |
| [1128](#L1128) | $boardsToHide = array(); |
| [1129](#L1129) |  |
| [1130](#L1130) | //cycle through boards |
| [1131](#L1131) | foreach($splitBoardConfiguration as $boardConfig){ |
| [1132](#L1132) |  |
| [1133](#L1133) | if( !empty($boardConfig) && strlen($boardConfig)>0){ |
| [1134](#L1134) |  |
| [1135](#L1135) | $furtherSplitBoardConfiguration = explode('|',$boardConfig); |
| [1136](#L1136) |  |
| [1137](#L1137) | if(isset($furtherSplitBoardConfiguration[13]) && $furtherSplitBoardConfiguration[13] == 'Yes'){ |
| [1138](#L1138) |  |
| [1139](#L1139) | $term = get\_term($furtherSplitBoardConfiguration[0], 'boards' ); |
| [1140](#L1140) |  |
| [1141](#L1141) | if( ! is\_null($term) && ! is\_wp\_error($term) ){ |
| [1142](#L1142) | $slug = $term->slug; |
| [1143](#L1143) | array\_push($boardsToHide,$slug); |
| [1144](#L1144) | } |
| [1145](#L1145) | } |
| [1146](#L1146) | } |
| [1147](#L1147) |  |
| [1148](#L1148) | } |
| [1149](#L1149) |  |
| [1150](#L1150) |  |
| [1151](#L1151) | global $wp\_the\_query; |
| [1152](#L1152) | if($query === $wp\_the\_query && $query->is\_search() && !is\_admin()) { |
| [1153](#L1153) | $tax\_query = array( |
| [1154](#L1154) | array( |
| [1155](#L1155) | 'taxonomy' => 'boards', |
| [1156](#L1156) | 'field' => 'slug', |
| [1157](#L1157) | 'terms' => $boardsToHide, |
| [1158](#L1158) | 'operator' => 'NOT IN', |
| [1159](#L1159) | ) |
| [1160](#L1160) | ); |
| [1161](#L1161) | $query->set( 'tax\_query', $tax\_query ); |
| [1162](#L1162) | } |
| [1163](#L1163) |  |
| [1164](#L1164) | } |
| [1165](#L1165) | } |
| [1166](#L1166) |  |
| [1167](#L1167) | }); |
| [1168](#L1168) |  |
| [1169](#L1169) |  |
| [1170](#L1170) |  |
| [1171](#L1171) |  |
| [1172](#L1172) |  |
| [1173](#L1173) |  |
| [1174](#L1174) |  |
| [1175](#L1175) |  |
| [1176](#L1176) |  |
| [1177](#L1177) |  |
| [1178](#L1178) |  |
| [1179](#L1179) |  |
| [1180](#L1180) |  |
| [1181](#L1181) | //add custom css to the frontend |
| [1182](#L1182) | function idea\_push\_custom\_css() { |
| [1183](#L1183) |  |
| [1184](#L1184) | //get options |
| [1185](#L1185) | $options = get\_option('idea\_push\_settings'); |
| [1186](#L1186) |  |
| [1187](#L1187) |  |
| [1188](#L1188) | if(isset($options['idea\_push\_custom\_css']) && strlen($options['idea\_push\_custom\_css'])>0){ |
| [1189](#L1189) | wp\_register\_style( 'custom-frontend-style-ideapush', plugins\_url( '/inc/css/frontendstyle.css', \_\_FILE\_\_ ),array(),idea\_push\_plugin\_get\_version()); |
| [1190](#L1190) | wp\_add\_inline\_style( 'custom-frontend-style-ideapush', $options['idea\_push\_custom\_css'] ); |
| [1191](#L1191) |  |
| [1192](#L1192) | } |
| [1193](#L1193) |  |
| [1194](#L1194) | } |
| [1195](#L1195) | add\_action( 'wp\_enqueue\_scripts', 'idea\_push\_custom\_css', 999 ); |
| [1196](#L1196) |  |
| [1197](#L1197) |  |
| [1198](#L1198) |  |
| [1199](#L1199) |  |
| [1200](#L1200) |  |
| [1201](#L1201) |  |
| [1202](#L1202) |  |
| [1203](#L1203) |  |
| [1204](#L1204) |  |
| [1205](#L1205) |  |
| [1206](#L1206) |  |
| [1207](#L1207) |  |
| [1208](#L1208) |  |
| [1209](#L1209) |  |
| [1210](#L1210) |  |
| [1211](#L1211) |  |
| [1212](#L1212) |  |
| [1213](#L1213) | //do pro updates |
| [1214](#L1214) | //initialise the update check |
| [1215](#L1215) | if($ideapush\_is\_pro == 'YES'){ |
| [1216](#L1216) |  |
| [1217](#L1217) | require 'inc/pro-ip/plugin-update-checker/plugin-update-checker.php'; |
| [1218](#L1218) |  |
| [1219](#L1219) | global $plugin\_update\_checker\_ideapush; |
| [1220](#L1220) | $plugin\_update\_checker\_ideapush = Puc\_v4\_Factory::buildUpdateChecker( |
| [1221](#L1221) | 'https://northernbeacheswebsites.com.au/?update\_action=get\_metadata&update\_slug=ideapush', //Metadata URL. |
| [1222](#L1222) | \_\_FILE\_\_, //Full path to the main plugin file. |
| [1223](#L1223) | 'ideapush' //Plugin slug. Usually it's the same as the name of the directory. |
| [1224](#L1224) | ); |
| [1225](#L1225) |  |
| [1226](#L1226) |  |
| [1227](#L1227) | //add queries to the update call |
| [1228](#L1228) | $plugin\_update\_checker\_ideapush->addQueryArgFilter('filter\_update\_checks\_ideapush'); |
| [1229](#L1229) | function filter\_update\_checks\_ideapush($queryArgs) { |
| [1230](#L1230) |  |
| [1231](#L1231) |  |
| [1232](#L1232) | $pluginSettings = get\_option('idea\_push\_settings'); |
| [1233](#L1233) |  |
| [1234](#L1234) | if(isset($pluginSettings['idea\_push\_purchase\_email']) && isset($pluginSettings['idea\_push\_order\_id'])){ |
| [1235](#L1235) |  |
| [1236](#L1236) | $purchaseEmailAddress = $pluginSettings['idea\_push\_purchase\_email']; |
| [1237](#L1237) | $orderId = $pluginSettings['idea\_push\_order\_id']; |
| [1238](#L1238) | $siteUrl = get\_site\_url(); |
| [1239](#L1239) | $siteUrl = parse\_url($siteUrl); |
| [1240](#L1240) | $siteUrl = $siteUrl['host']; |
| [1241](#L1241) |  |
| [1242](#L1242) | if (!empty($purchaseEmailAddress) &&  !empty($orderId)) { |
| [1243](#L1243) | $queryArgs['purchaseEmailAddress'] = $purchaseEmailAddress; |
| [1244](#L1244) | $queryArgs['orderId'] = $orderId; |
| [1245](#L1245) | $queryArgs['siteUrl'] = $siteUrl; |
| [1246](#L1246) | $queryArgs['productId'] = '9719'; |
| [1247](#L1247) | } |
| [1248](#L1248) |  |
| [1249](#L1249) | } |
| [1250](#L1250) |  |
| [1251](#L1251) | return $queryArgs; |
| [1252](#L1252) | } |
| [1253](#L1253) |  |
| [1254](#L1254) |  |
| [1255](#L1255) |  |
| [1256](#L1256) | // define the puc\_request\_info\_result-<slug> callback |
| [1257](#L1257) | $plugin\_update\_checker\_ideapush->addFilter( |
| [1258](#L1258) | 'request\_info\_result', 'filter\_puc\_request\_info\_result\_slug\_ideapush', 10, 2 |
| [1259](#L1259) | ); |
| [1260](#L1260) | function filter\_puc\_request\_info\_result\_slug\_ideapush( $plugininfo, $result ) { |
| [1261](#L1261) | //get the message from the server and set as transient |
| [1262](#L1262) | set\_transient('ideapush-update',$plugininfo->{'message'},YEAR\_IN\_SECONDS \* 1); |
| [1263](#L1263) |  |
| [1264](#L1264) | return $plugininfo; |
| [1265](#L1265) | }; |
| [1266](#L1266) |  |
| [1267](#L1267) |  |
| [1268](#L1268) |  |
| [1269](#L1269) |  |
| [1270](#L1270) |  |
| [1271](#L1271) |  |
| [1272](#L1272) | $path = plugin\_basename( \_\_FILE\_\_ ); |
| [1273](#L1273) |  |
| [1274](#L1274) | add\_action("after\_plugin\_row\_{$path}", function( $plugin\_file, $plugin\_data, $status ) { |
| [1275](#L1275) |  |
| [1276](#L1276) | //get plugin settings |
| [1277](#L1277) | $pluginSettings = get\_option('idea\_push\_settings'); |
| [1278](#L1278) |  |
| [1279](#L1279) |  |
| [1280](#L1280) | if (!empty($pluginSettings['idea\_push\_purchase\_email']) &&  !empty($pluginSettings['idea\_push\_order\_id'])) { |
| [1281](#L1281) |  |
| [1282](#L1282) | $order\_id = $pluginSettings['idea\_push\_order\_id']; |
| [1283](#L1283) |  |
| [1284](#L1284) | //get transient |
| [1285](#L1285) | $message = get\_transient('ideapush-update'); |
| [1286](#L1286) |  |
| [1287](#L1287) | if($message !== 'Yes' && $message !== false){ |
| [1288](#L1288) |  |
| [1289](#L1289) | $purchaseLink = 'https://northernbeacheswebsites.com.au/ideapush-pro/'; |
| [1290](#L1290) |  |
| [1291](#L1291) | if($message == 'Incorrect Details'){ |
| [1292](#L1292) | $displayMessage = 'The Order ID and Purchase ID you entered is not correct. Please double check the details you entered to receive product updates.'; |
| [1293](#L1293) | } elseif ($message == 'Licence Expired'){ |
| [1294](#L1294) | $displayMessage = 'Your licence has expired. Please <a href="'.$purchaseLink.'" target="\_blank">purchase a new licence</a> to receive further updates for this plugin.'; |
| [1295](#L1295) | } elseif ($message == 'Website Mismatch') { |
| [1296](#L1296) | $displayMessage = 'This plugin has already been registered on another website using your details. Under the licence terms this plugin can only be used on one website. Please <a href="'.$purchaseLink.'" target="\_blank">click here</a> to purchase an additional licence. To change the website assigned to your licence, please click <a href="https://northernbeacheswebsites.com.au/my-account/view-order/'.$order\_id.'/" target="\_blank">here</a>.'; |
| [1297](#L1297) | } else { |
| [1298](#L1298) | $displayMessage = ''; |
| [1299](#L1299) | } |
| [1300](#L1300) |  |
| [1301](#L1301) | echo '<tr class="plugin-update-tr active"><td colspan="3" class="plugin-update colspanchange"><div class="update-message notice inline notice-error notice-alt"><p class="installer-q-icon">'.$displayMessage.'</p></div></td></tr>'; |
| [1302](#L1302) |  |
| [1303](#L1303) | } |
| [1304](#L1304) |  |
| [1305](#L1305) | } else { |
| [1306](#L1306) |  |
| [1307](#L1307) | echo '<tr class="plugin-update-tr active"><td colspan="3" class="plugin-update colspanchange"><div class="update-message notice inline notice-error notice-alt"><p class="installer-q-icon">Please enter your Order ID and Purchase ID in the plugin settings to receive automatics updates.</p></div></td></tr>'; |
| [1308](#L1308) |  |
| [1309](#L1309) | } |
| [1310](#L1310) |  |
| [1311](#L1311) |  |
| [1312](#L1312) | }, 10, 3 ); |
| [1313](#L1313) |  |
| [1314](#L1314) | /\*\* |
| [1315](#L1315) | \* |
| [1316](#L1316) | \* |
| [1317](#L1317) | \* |
| [1318](#L1318) | \* Force check for updates |
| [1319](#L1319) | \*/ |
| [1320](#L1320) | function idea\_push\_force\_check\_for\_updates(){ |
| [1321](#L1321) | global $plugin\_update\_checker\_ideapush; |
| [1322](#L1322) |  |
| [1323](#L1323) | $plugin\_update\_checker\_ideapush->checkForUpdates(); |
| [1324](#L1324) | } |
| [1325](#L1325) |  |
| [1326](#L1326) |  |
| [1327](#L1327) | } |
| [1328](#L1328) | /\*\* |
| [1329](#L1329) | \* |
| [1330](#L1330) | \* |
| [1331](#L1331) | \* |
| [1332](#L1332) | \* Add custom links to plugin on plugins page |
| [1333](#L1333) | \*/ |
| [1334](#L1334) | function idea\_push\_plugin\_links( $links, $file ) { |
| [1335](#L1335) | if ( strpos( $file, 'ideapush.php' ) !== false ) { |
| [1336](#L1336) | $new\_links = array( |
| [1337](#L1337) | '<a href="https://northernbeacheswebsites.com.au/product/donate-to-northern-beaches-websites/" target="\_blank">' . \_\_('Donate') . '</a>', |
| [1338](#L1338) | '<a href="https://wordpress.org/support/plugin/ideapush" target="\_blank">' . \_\_('Support Forum') . '</a>', |
| [1339](#L1339) | ); |
| [1340](#L1340) | $links = array\_merge( $links, $new\_links ); |
| [1341](#L1341) | } |
| [1342](#L1342) | return $links; |
| [1343](#L1343) | } |
| [1344](#L1344) | add\_filter( 'plugin\_row\_meta', 'idea\_push\_plugin\_links', 10, 2 ); |
| [1345](#L1345) | /\*\* |
| [1346](#L1346) | \* |
| [1347](#L1347) | \* |
| [1348](#L1348) | \* |
| [1349](#L1349) | \* save tab memory |
| [1350](#L1350) | \*/ |
| [1351](#L1351) | function idea\_push\_save\_tab\_memory() { |
| [1352](#L1352) |  |
| [1353](#L1353) | //get board name from ajax call |
| [1354](#L1354) | $tabName = sanitize\_text\_field($\_POST['tab']); |
| [1355](#L1355) |  |
| [1356](#L1356) | //set a transient for the tab memory |
| [1357](#L1357) | set\_transient('ideapush-tab-memory',$tabName,WEEK\_IN\_SECONDS\*1); |
| [1358](#L1358) |  |
| [1359](#L1359) | echo 'SUCCESS'; |
| [1360](#L1360) |  |
| [1361](#L1361) | //die |
| [1362](#L1362) | wp\_die(); |
| [1363](#L1363) |  |
| [1364](#L1364) |  |
| [1365](#L1365) | } |
| [1366](#L1366) | add\_action( 'wp\_ajax\_save\_tab\_memory', 'idea\_push\_save\_tab\_memory' ); |
| [1367](#L1367) | /\*\* |
| [1368](#L1368) | \* |
| [1369](#L1369) | \* |
| [1370](#L1370) | \* |
| [1371](#L1371) | \* Change archive title for tag archives which have board text |
| [1372](#L1372) | \*/ |
| [1373](#L1373) | add\_filter( 'get\_the\_archive\_title', 'idea\_push\_change\_the\_tag\_title'); |
| [1374](#L1374) |  |
| [1375](#L1375) | function idea\_push\_change\_the\_tag\_title( $title ) { |
| [1376](#L1376) |  |
| [1377](#L1377) | if (strpos($title, 'BoardTag') !== false) { |
| [1378](#L1378) | $title\_exploded = explode('-',$title); |
| [1379](#L1379) | $title = $title\_exploded[2]; |
| [1380](#L1380) | } |
| [1381](#L1381) |  |
| [1382](#L1382) | return $title; |
| [1383](#L1383) |  |
| [1384](#L1384) | } |
| [1385](#L1385) |  |
| [1386](#L1386) | ?> |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/ideapush/trunk/ideapush.php?format=txt)
* [Original Format](/export/3222666/ideapush/trunk/ideapush.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_5b6180e6_20250115_080415.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# IdeaPush <= 8.71 - Missing Authorization to Board Term Deletion

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   IdeaPush <= 8.71 - Missing Authorization to Board Term Deletion

4.3

**Missing Authorization**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:L/A:N)

| CVE | [CVE-2024-11844](https://www.cve.org/CVERecord?id=CVE-2024-11844) |
| --- | --- |
| CVSS | 4.3 (Medium) |
| Publicly Published | December 2, 2024 |
| Last Updated | December 3, 2024 |
| Researcher | [Lucio Sá](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/lucio-sa) |

### Description

The IdeaPush plugin for WordPress is vulnerable to unauthorized modification of data due to a missing capability check on the idea\_push\_taxonomy\_save\_routine function in all versions up to, and including, 8.71. This makes it possible for authenticated attackers, with Subscriber-level access and above, to delete terms for the "boards" taxonomy.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/ideapush/trunk/ideapush.php#L766)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3198488/ideapush/trunk/ideapush.php)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fideapush%2Fideapush-871-missing-authorization-to-board-term-deletion&t=IdeaPush%20%3C%3D%208.71%20-%20Missing%20Authorization%20to%20Board%20Term%20Deletion "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fideapush%2Fideapush-871-missing-authorization-to-board-term-deletion&text=IdeaPush%20%3C%3D%208.71%20-%20Missing%20Authorization%20to%20Board%20Term%20Deletion "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fideapush%2Fideapush-871-missing-authorization-to-board-term-deletion "LinkedIn")
Email

## Vulnerability Details for IdeaPush

#### [IdeaPush](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/ideapush)

| Software Type | Plugin |
| --- | --- |
| Software Slug | ideapush [(view on wordpress.org)](https://wordpress.org/plugins/ideapush) |
| Patched? | Yes |
| Remediation | Update to version 8.72, or a newer patched version |
| Affected Version | * <= 8.71 |
| Patched Version | * 8.72 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation


