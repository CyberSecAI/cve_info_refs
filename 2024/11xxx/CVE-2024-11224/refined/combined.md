=== Content from wordpress.org_c82816ae_20250114_232315.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Parallax Image

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fparallax-image&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fparallax-image&locale=en_US)

Search plugins

![](https://ps.w.org/parallax-image/assets/banner-772x250.png?rev=1627242)
![](https://ps.w.org/parallax-image/assets/icon-128x128.png?rev=1627242)
# Parallax Image

By [Howard Ehrenberg](https://www.howardehrenberg.com)

[Download](https://downloads.wordpress.org/plugin/parallax-image.1.9.1.zip)

* [Details](https://wordpress.org/plugins/parallax-image/#description)
* [Reviews](https://wordpress.org/plugins/parallax-image/#reviews)
* [Installation](https://wordpress.org/plugins/parallax-image/#installation)
* [Development](https://wordpress.org/plugins/parallax-image/#developers)

[Support](https://wordpress.org/support/plugin/parallax-image/)

## Description

This is a simple parallax image plugin that uses the parallax.js script by pixelcog – http://pixelcog.github.io/parallax.js/

To insert your full width parallax image, simply use the [dd-parallax] shortcode. Include text to be overlaid on the parallax between the open and close [/dd-parallax] code. This plugin has been tested with WordPress 2014, 2015, 2016, and 2017 themes as well as a few themes that use Bootstrap. I can’t guarantee that it will work with all themes, but it’s worth a shot.

\*\* Please note for WP 5.0 \*\*

Currently this plugin works, but the TinyMCE button only works with the classic editor. A Gutenberg widget is in the works.

For example:

```
[dd-parallax img="imagename.jpg" height="600" speed="3" z-index="-100" mobile="mobile-image.jpg" offset="true"]

Text to be overlaid on the paralllax window

[/dd-parallax]

```

Available parameters for use:

* img – use the filename from the media library for this, not the full path. Just use imagename.jpg or image.png. (You can also use a fully qualified URL)
* height – This is the height of the parallax window. The unit is in pixels. Just enter a number
* speed [optional] (default = 2) An integer between 0 and 10. The speed at which the parallax effect runs. 0 means the image will appear fixed in place, and 10 the image will flow at the same speed as the page content.
* z-index [optional] (default = 0) – The z-index value of the fixed-position elements. By default these will be behind everything else on the page.
* mobile [optional] – If you want a mobile fixed image for mobile display, choose a different image, otherwise it will select the full sized image from the parallax and make it a responsive image.
* offset [default = false] (options: “true” or “false”) – This will pull the parallax content all the way to the left of your screen. You can put the contents into a “container” class if you’re using bootstrap or just center the contents for horizontal centering. On testing with the WordPress 2016 Theme, keep offset at False. With Bootstrap Themes, I recommend using the “offset=’true’” parameter.
* position [optional] – (defaults to ‘Left’) This is analogous to the background-position-x css property. Specify coordinates as right, left, center, or pixel values (e.g. -10px 0px). The parallax image will be positioned as close to these values as possible while still covering the target element.
* text-pos [optional] – Default is ‘top’ (to maintain compatibility with ver 1.6). Available options are “top”, “center”, “bottom”.

Admin-Settings page enables or disables the TinyMCE icon (if you don’t want it in your WP-Editor)

### Demo

View a demo of this plugin [here](https://www.duckdiverllc.com/parallax-image-plugin-demo/)

## Screenshots

* [![](https://ps.w.org/parallax-image/assets/screenshot-1.PNG?rev=1627242)](https://ps.w.org/parallax-image/assets/screenshot-1.PNG?rev=1627242)

  The shortcode implemented with the WordPress Twenty-Sixteen Theme
* [![](https://ps.w.org/parallax-image/assets/screenshot-2.PNG?rev=1627242)](https://ps.w.org/parallax-image/assets/screenshot-2.PNG?rev=1627242)

  Editor view of shortcode usage.
* [![](https://ps.w.org/parallax-image/assets/screenshot-3.PNG?rev=1627242)](https://ps.w.org/parallax-image/assets/screenshot-3.PNG?rev=1627242)

  A Parallax Window on a bootstrap theme with fullwidth template.
* [![](https://ps.w.org/parallax-image/assets/screenshot-4.png?rev=1733125)](https://ps.w.org/parallax-image/assets/screenshot-4.png?rev=1733125)

## Installation

1. Upload the plugin files to the `/wp-content/plugins/parallax-image` directory, or install the plugin through the WordPress plugins screen directly.
2. Activate the plugin through the ‘Plugins’ screen in WordPress.

## FAQ

### I’m not seeing the image on the screen, what did I do wrong?

For this – there are 2 probable reasons that you’re not seeing the parallax.

\* First – Check to make sure that your img is only the file name, and not the full path. If you view the media library in “list” mode yourdomain.com/wp-admin/upload.php?mode=list – there you’ll see the filename with the .jpg or .png extension.

\* Second – If not the first answer. Check your z-index. Changing the z-index will adjust the layering of your screen with CSS, and may need to be changed depending on how your theme displays the backgrounds and colors. For more about z-index – [w3schools](https://www.w3schools.com/cssref/pr_pos_z-index.asp)

### Can I have multiple parallax images on each page.

Yes

### Will this work on mobile devices

For mobile devices, you can either have a totally separate mobile image by using the ‘mobile’ parameter in the shortcode, or you can just have the main parallax image resize itself and be responsive.

### While I’m debugging, the mobile test doesn’t look right

If you’re resizing your browser window to check for responsiveness, the plugin uses mobile\_detect, so you must either spoof your user agent, or test on a real mobile device. You might have to refresh for it to work right.

## Reviews

![](https://secure.gravatar.com/avatar/c8c9415e38988b175551c1135e0e850387ee516b06a1adc87870da804f4c1a68?s=60&d=retro&r=g)
### [Perfect](https://wordpress.org/support/topic/perfect-6122/)

[Alessio Pellegrini](https://profiles.wordpress.org/pointnet/ "Posts by Alessio Pellegrini")
May 31, 2019

it is simple and does its job, so it is perfect.
Thanks for this plugin.

![](https://secure.gravatar.com/avatar/c05cd781678ff2573cfe4e02207c371a7c71ebc0ea5f917ee46e8fe0de601b35?s=60&d=retro&r=g)
### [Great plugin](https://wordpress.org/support/topic/great-plugin-20513/)

[sampibiz](https://profiles.wordpress.org/sampibiz/ "Posts by sampibiz")
January 20, 2019

Simple and easy to use. Thank you!

![](https://secure.gravatar.com/avatar/d149523a29c10fcc74c2d426a322c0b9ef971c6fe2b0250f80bde22cdaae79f7?s=60&d=retro&r=g)
### [Excellent!](https://wordpress.org/support/topic/excellent-6853/)

[SoldierOfFortune](https://profiles.wordpress.org/soldieroffortune/ "Posts by SoldierOfFortune")
October 20, 2018

I set only z-index value and it works fine.
Many thanks for this great plugin!

![](https://secure.gravatar.com/avatar/991ecee3371edb604c5b1cc1b71c50cdbd86b068f1a16db61bd62afa917cadfd?s=60&d=retro&r=g)
### [Works fine- Thanks!](https://wordpress.org/support/topic/works-fine-thanks-5/)

[wppatron](https://profiles.wordpress.org/wppatron/ "Posts by wppatron")
February 22, 2018

Hard to find a full image scroll shortcode that works in a <div>, and this one does. Simple shortcode, good variables, just works.
Thank you for this. Please keep it updated!

![](https://secure.gravatar.com/avatar/fd25844016932a31ace1d0e4e16eb7f0675f0392001cf1fabef14f63d92725f4?s=60&d=retro&r=g)
### [Great plugin](https://wordpress.org/support/topic/great-plugin-15715/)

[croonhb](https://profiles.wordpress.org/croonhb/ "Posts by croonhb")
November 4, 2017

Great plugin works perfect.
Great support.

![](https://secure.gravatar.com/avatar/b2e7eb95efc524e1ca3ce7bd7efaa0e5535ae1f9e6019bf16f889db9ca57679b?s=60&d=retro&r=g)
### [Perfect!!](https://wordpress.org/support/topic/perfect-4389/)

[meloncookie](https://profiles.wordpress.org/meloncookie/ "Posts by meloncookie")
September 24, 2017

Just what I was looking for, thanks!

[Read all 10 reviews](https://wordpress.org/support/plugin/parallax-image/reviews/)
## Contributors & Developers

“Parallax Image” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/b610527c032a51f3b0732c3a5cfc7e4898a5a8fa84bf3b67067e74a0524eafb6?s=32&d=mm&r=g) [thehowarde](https://profiles.wordpress.org/thehowarde/)

[Translate “Parallax Image” into your language.](https://translate.wordpress.org/projects/wp-plugins/parallax-image)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/parallax-image/), check out the [SVN repository](https://plugins.svn.wordpress.org/parallax-image/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/parallax-image/) by [RSS](https://plugins.trac.wordpress.org/log/parallax-image/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### 1.9.1

Update to address CVE ID: CVE-2024-11224

#### 1.9

Update to address CVE ID: CVE-2024-9898

#### 1.7.1

Add check of existence for offset js

#### 1.7

Updated to work with Twenty Nineteen. Added ability to position overlay text top, center, or bottom.

#### 1.6

Updated Parallax.js source script to version 1.5 fixes some flickering when placed close to other objects.

#### 1.5

Add TinyMCE button and options under settings menu

#### 1.4

Fix for mobile image from external URL.

#### 1.3

Added shortcode attribute “offset” to pull contents of Parallax Contents (text overlays) to the left.

#### 1.2.1

Add ability to specify img source outside of media library or use full URL.

#### 1.2

Added mobile\_detect and mobile options to make the image responsive for mobile display and render better on mobile. Added ‘mobile’ parameter to the shortcode as an option.

#### 1.1.1

Added a Space to the style block to correct

#### 1.1

Fixed Error

#### 1.0.2

Removed extra js to keep lightweight

#### 1.0.1

* Update Plugin URI

#### 1.0

* Initial Release Version

## Meta

* Version **1.9.1**
* Last updated **2 months ago**
* Active installations **2,000+**
* WordPress version **4.5 or higher**
* Tested up to **6.7.1**
* PHP version **7.0 or higher**
* Tags [parallax](https://wordpress.org/plugins/tags/parallax/)[Parallax Image](https://wordpress.org/plugins/tags/parallax-image/)
* [Advanced View](https://wordpress.org/plugins/parallax-image/advanced/)

## Ratings

5 out of 5 stars.

* [10 5-star reviews
  5 stars

  10](https://wordpress.org/support/plugin/parallax-image/reviews/?filter=5)
* [0 4-star reviews
  4 stars

  0](https://wordpress.org/support/plugin/parallax-image/reviews/?filter=4)
* [0 3-star reviews
  3 stars

  0](https://wordpress.org/support/plugin/parallax-image/reviews/?filter=3)
* [0 2-star reviews
  2 stars

  0](https://wordpress.org/support/plugin/parallax-image/reviews/?filter=2)
* [0 1-star reviews
  1 star

  0](https://wordpress.org/support/plugin/parallax-image/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/parallax-image/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/parallax-image/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/b610527c032a51f3b0732c3a5cfc7e4898a5a8fa84bf3b67067e74a0524eafb6?s=32&d=mm&r=g) [thehowarde](https://profiles.wordpress.org/thehowarde/)
## Support

Got something to say? Need help?

[View support forum](https://wordpress.org/support/plugin/parallax-image/)

## Donate

Would you like to support the advancement of this plugin?

[Donate to this plugin](https://www.duckdiverllc.com/parallax-image-plugin/)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_26cced49_20250114_232317.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Parallax Image <= 1.9 - Authenticated (Contributor+) Stored Cross-Site Scripting via position Parameter

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Parallax Image <= 1.9 - Authenticated (Contributor+) Stored Cross-Site Scripting via position Parameter

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-11224](https://www.cve.org/CVERecord?id=CVE-2024-11224) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | November 18, 2024 |
| Last Updated | November 19, 2024 |
| Researcher | [Peter Thaleikis](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/spek) |

### Description

The Parallax Image plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the ‘position’ parameter in all versions up to, and including, 1.9 due to insufficient input sanitization and output escaping. This makes it possible for authenticated attackers, with Contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/parallax-image/tags/1.9/assets/shortcode.php#L156)
* [wordpress.org](https://wordpress.org/plugins/parallax-image/#developers)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3189649/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fparallax-image%2Fparallax-image-19-authenticated-contributor-stored-cross-site-scripting-via-position-parameter&t=Parallax%20Image%20%3C%3D%201.9%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20position%20Parameter "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fparallax-image%2Fparallax-image-19-authenticated-contributor-stored-cross-site-scripting-via-position-parameter&text=Parallax%20Image%20%3C%3D%201.9%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting%20via%20position%20Parameter "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fparallax-image%2Fparallax-image-19-authenticated-contributor-stored-cross-site-scripting-via-position-parameter "LinkedIn")
Email

## Vulnerability Details for Parallax Image

#### [Parallax Image](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/parallax-image)

| Software Type | Plugin |
| --- | --- |
| Software Slug | parallax-image [(view on wordpress.org)](https://wordpress.org/plugins/parallax-image) |
| Patched? | Yes |
| Remediation | Update to version 1.9.1, or a newer patched version |
| Affected Version | * <= 1.9 |
| Patched Version | * 1.9.1 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_bbd8f788_20250114_232313.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fparallax-image%2Ftags%2F1.9%2Fassets%2Fshortcode.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/parallax-image/tags/1.9/assets/shortcode.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/parallax-image/tags/1.9/assets/shortcode.php)

---

# [source:](/browser?order=name "Go to repository root") [parallax-image](/browser/parallax-image?order=name "View parallax-image")/[tags](/browser/parallax-image/tags?order=name "View tags")/[1.9](/browser/parallax-image/tags/1.9?order=name "View 1.9")/[assets](/browser/parallax-image/tags/1.9/assets?order=name "View assets")/[shortcode.php](/browser/parallax-image/tags/1.9/assets/shortcode.php?order=name "View shortcode.php")

View diff against:

View revision:

| [Last change](/changeset/3170176/parallax-image/tags/1.9/assets/shortcode.php "View differences") on this file was [3170176](/changeset/3170176/ "View changeset 3170176"), checked in by thehowarde, [3 months ago](/timeline?from=2024-10-16T14%3A09%3A57Z&precision=second "See timeline at 10/16/2024 02:09:57 PM") |
| --- |
| Update to fix vulnerability |
| **File size:** 5.3 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* The Parallax Shortcode. |
| [4](#L4) | \* |
| [5](#L5) | \* @package Parallax Image Plugin |
| [6](#L6) | \*/ |
| [7](#L7) |  |
| [8](#L8) | // Check if Mobile\_Detect is already included. |
| [9](#L9) |  |
| [10](#L10) | if ( ! class\_exists( 'Mobile\_Detect' ) ) { |
| [11](#L11) | require\_once 'mobile\_detect.php'; |
| [12](#L12) | } |
| [13](#L13) |  |
| [14](#L14) | add\_action( 'wp\_enqueue\_scripts', 'duck\_parallax\_scripts' ); |
| [15](#L15) |  |
| [16](#L16) | /\*\* |
| [17](#L17) | \* Register style sheet and scripts. |
| [18](#L18) | \*/ |
| [19](#L19) | function duck\_parallax\_scripts() { |
| [20](#L20) | wp\_register\_script( 'duck-parallax', plugins\_url( '/js/parallax.min.js', \_\_FILE\_\_ ), array( 'jquery' ), '1.4.2', true ); |
| [21](#L21) | wp\_register\_script( 'duck-px-offset', plugins\_url( '/js/dd-parallax-offset.js', \_\_FILE\_\_ ), array( 'jquery' ), '1.0', true ); |
| [22](#L22) | wp\_register\_style( 'duck-parallax', plugins\_url( '/css/duck-parallax.css', \_\_FILE\_\_ ), false, '1.9', 'all' ); |
| [23](#L23) | } |
| [24](#L24) |  |
| [25](#L25) | /\*\* |
| [26](#L26) | \* Shortcode to create a parallax scrolling effect with image background. |
| [27](#L27) | \* |
| [28](#L28) | \* @param array  $atts     { |
| [29](#L29) | \*                         Attributes to configure the parallax effect. |
| [30](#L30) | \* |
| [31](#L31) | \* @type string  $img      The image URL or filename for the parallax background. |
| [32](#L32) | \* @type string  $speed    The speed of the parallax scrolling (default '2'). |
| [33](#L33) | \* @type string  $height   The height of the parallax container. |
| [34](#L34) | \* @type string  $z        -index  The z-index for layering elements (default '0'). |
| [35](#L35) | \* @type string  $mobile   The image URL or filename for the mobile version. |
| [36](#L36) | \* @type string  $position The background position (default 'left'). |
| [37](#L37) | \* @type bool    $offset   Whether to include offset script (default false). |
| [38](#L38) | \* @type string  $text     -pos The vertical text alignment (default 'top'). |
| [39](#L39) | \* |
| [40](#L40) | \* @param string $content  Optional content to display within the parallax container. |
| [41](#L41) | \* |
| [42](#L42) | \* @return string|false HTML output for the parallax effect or false on failure. |
| [43](#L43) | \*/ |
| [44](#L44) | function duck\_parallax\_shortcode( $atts, $content = null ) { |
| [45](#L45) |  |
| [46](#L46) | $atts = shortcode\_atts( |
| [47](#L47) | array( |
| [48](#L48) | 'img'      => '', |
| [49](#L49) | 'speed'    => '2', |
| [50](#L50) | 'height'   => '', |
| [51](#L51) | 'z-index'  => '0', |
| [52](#L52) | 'mobile'   => '', |
| [53](#L53) | 'position' => 'left', |
| [54](#L54) | 'offset'   => false, |
| [55](#L55) | 'text-pos' => 'top', |
| [56](#L56) | ), |
| [57](#L57) | $atts, |
| [58](#L58) | 'duck-parallax' |
| [59](#L59) | ); |
| [60](#L60) | /\* Enqueue only for shortcode \*/ |
| [61](#L61) | wp\_enqueue\_script( 'duck-parallax' ); |
| [62](#L62) | wp\_enqueue\_style( 'duck-parallax' ); |
| [63](#L63) |  |
| [64](#L64) | if ( ( 'true' === $atts['offset'] ) ) { |
| [65](#L65) | wp\_enqueue\_script( 'duck-px-offset' ); |
| [66](#L66) | } |
| [67](#L67) |  |
| [68](#L68) | if ( ! $atts['img'] ) { |
| [69](#L69) | return false; |
| [70](#L70) | } |
| [71](#L71) | // Detect Mobile. |
| [72](#L72) | $detect = new Mobile\_Detect(); |
| [73](#L73) |  |
| [74](#L74) | // If Mobile Image isn't set. |
| [75](#L75) | if ( '' !== $atts['mobile'] ) { |
| [76](#L76) | $mobile\_img = $atts['mobile']; |
| [77](#L77) | } else { |
| [78](#L78) | $mobile\_img = $atts['img']; |
| [79](#L79) | } |
| [80](#L80) | $args = array( |
| [81](#L81) | 'post\_type'      => 'attachment', |
| [82](#L82) | 'post\_mime\_type' => 'image', |
| [83](#L83) | 'post\_status'    => 'inherit', |
| [84](#L84) | 'posts\_per\_page' => -1, |
| [85](#L85) | ); |
| [86](#L86) |  |
| [87](#L87) | $query\_images = new WP\_Query( $args ); |
| [88](#L88) |  |
| [89](#L89) | if ( strpos( $atts['img'], 'http' ) === 0 ) { |
| [90](#L90) | $image\_url = esc\_url( $atts['img'] ); |
| [91](#L91) | } elseif ( $query\_images->have\_posts() ) { |
| [92](#L92) | foreach ( $query\_images->posts as $item ) { |
| [93](#L93) | $filename = wp\_basename( $item->guid ); |
| [94](#L94) | if ( $atts['img'] === $filename ) { |
| [95](#L95) | $image\_url = $item->guid;} |
| [96](#L96) | } |
| [97](#L97) | } |
| [98](#L98) | if ( $atts['speed'] < 10 ) { |
| [99](#L99) | $speed = '.' . $atts['speed']; |
| [100](#L100) | } else { |
| [101](#L101) | $speed = 1; |
| [102](#L102) | } |
| [103](#L103) | $zindex = absint( $atts['z-index'] ); |
| [104](#L104) | wp\_reset\_postdata(); |
| [105](#L105) | if ( $detect->isMobile() ) { |
| [106](#L106) |  |
| [107](#L107) | if ( strpos( $mobile\_img, 'http' ) === 0 ) { |
| [108](#L108) | $image\_path = esc\_url( $mobile\_img ); |
| [109](#L109) | } elseif ( $query\_images->have\_posts() ) { |
| [110](#L110) | foreach ( $query\_images->posts as $item ) { |
| [111](#L111) | $filename = wp\_basename( $item->guid ); |
| [112](#L112) | if ( $mobile\_img === $filename ) { |
| [113](#L113) | $mobile\_img = $item->guid; |
| [114](#L114) | $image\_path = get\_attached\_file( $item->ID ); |
| [115](#L115) | } |
| [116](#L116) | } |
| [117](#L117) | } |
| [118](#L118) | list($width, $height) = getimagesize( $image\_path ); |
| [119](#L119) | $factor               = floatval( $height ) / floatval( $width ); |
| [120](#L120) | $div\_id               = preg\_replace( '/\\.[^.\\s]{3,4}$/', '', $atts['img'] ); |
| [121](#L121) |  |
| [122](#L122) | $text\_pos = strtolower( sanitize\_text\_field( $atts['text-pos'] ) ); |
| [123](#L123) | switch ( $text\_pos ) { |
| [124](#L124) | case 'top': |
| [125](#L125) | $align = 'top: 0;'; |
| [126](#L126) | break; |
| [127](#L127) | case 'bottom': |
| [128](#L128) | $align = 'bottom: 0;'; |
| [129](#L129) | break; |
| [130](#L130) | default: |
| [131](#L131) | $align = 'top: 50%;transform:translate(0,-50%)'; |
| [132](#L132) | break; |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | $output      = '<div class="px-mobile-container" id="#' . esc\_attr( $div\_id ) . '" data-factor="' . esc\_attr( $factor ) . '" data-height="' . esc\_attr( $height ) . '"><div class="parallax-mobile">'; |
| [136](#L136) | $output     .= '<img src="' . esc\_url( $mobile\_img ) . '" class="px-mobile-img" />'; |
| [137](#L137) | $output .= '<div class="parallax-content" style="' . esc\_attr( $align ) . '">'; |
| [138](#L138) | $output .= do\_shortcode( $content ); |
| [139](#L139) | $output .= '</div>'; |
| [140](#L140) | $output     .= '</div></div>'; |
| [141](#L141) | } else { |
| [142](#L142) |  |
| [143](#L143) | $text\_pos = strtolower( sanitize\_text\_field( $atts['text-pos'] ) ); |
| [144](#L144) | switch ( $text\_pos ) { |
| [145](#L145) | case 'top': |
| [146](#L146) | $align = 'flex-start;'; |
| [147](#L147) | break; |
| [148](#L148) | case 'bottom': |
| [149](#L149) | $align = 'flex-end;'; |
| [150](#L150) | break; |
| [151](#L151) | default: |
| [152](#L152) | $align = 'center'; |
| [153](#L153) | break; |
| [154](#L154) | } |
| [155](#L155) | $output  = '<section class="parallax-section">'; |
| [156](#L156) | $output .= '<div class="parallax-window" data-z-index="' . esc\_attr( $zindex ) . '" data-position-x="' . $atts['position'] . '" data-parallax="scroll" data-speed="' . esc\_attr( $speed ) . '" data-image-src="' . esc\_url( $image\_url ) . '"'; |
| [157](#L157) | $output .= ' style="align-items: ' . esc\_attr( $align ); |
| [158](#L158) | if ( '' !== $atts['height'] ) { |
| [159](#L159) | $output .= 'min-height: ' . absint( $atts['height'] ) . 'px;'; |
| [160](#L160) | } |
| [161](#L161) | $output .= '">'; |
| [162](#L162) |  |
| [163](#L163) | $output .= '<div class="parallax-container parallax-content">'; |
| [164](#L164) | $output .= do\_shortcode( $content ); |
| [165](#L165) | $output .= '</div></div></section>'; |
| [166](#L166) |  |
| [167](#L167) | } |
| [168](#L168) |  |
| [169](#L169) | return $output; |
| [170](#L170) | } |
| [171](#L171) | add\_shortcode( 'dd-parallax', 'duck\_parallax\_shortcode' ); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/parallax-image/tags/1.9/assets/shortcode.php?format=txt)
* [Original Format](/export/3222517/parallax-image/tags/1.9/assets/shortcode.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_4614fd30_20250114_232314.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3189649)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3189648 "Changeset 3189648")
* [Next Changeset](/changeset/3189650 "Changeset 3189650") →

---

# Changeset 3189649

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
11/15/2024 02:59:09 PM
([2 months](/timeline?from=2024-11-15T14%3A59%3A09Z&precision=second "See timeline at 11/15/2024 02:59:09 PM") ago)

Author:
thehowarde
Message:

Address CVE-2024-11224

Location:
[parallax-image](/browser/parallax-image?rev=3189649)
Files:

15 added
3 edited

* [tags/1.9.1](/browser/parallax-image/tags/1.9.1?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/assets](/browser/parallax-image/tags/1.9.1/assets?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/assets/admin-scripts.php](/browser/parallax-image/tags/1.9.1/assets/admin-scripts.php?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/assets/css](/browser/parallax-image/tags/1.9.1/assets/css?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/assets/css/admin.css](/browser/parallax-image/tags/1.9.1/assets/css/admin.css?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/assets/css/duck-parallax.css](/browser/parallax-image/tags/1.9.1/assets/css/duck-parallax.css?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/assets/js](/browser/parallax-image/tags/1.9.1/assets/js?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/assets/js/dd-parallax-offset.js](/browser/parallax-image/tags/1.9.1/assets/js/dd-parallax-offset.js?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/assets/js/parallax.min.js](/browser/parallax-image/tags/1.9.1/assets/js/parallax.min.js?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/assets/js/tiny-mce-button.js](/browser/parallax-image/tags/1.9.1/assets/js/tiny-mce-button.js?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/assets/mobile\_detect.php](/browser/parallax-image/tags/1.9.1/assets/mobile_detect.php?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/assets/shortcode.php](/browser/parallax-image/tags/1.9.1/assets/shortcode.php?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/index.php](/browser/parallax-image/tags/1.9.1/index.php?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/parallax-image.php](/browser/parallax-image/tags/1.9.1/parallax-image.php?rev=3189649 "Show entry in browser")
  (added)
* [tags/1.9.1/readme.txt](/browser/parallax-image/tags/1.9.1/readme.txt?rev=3189649 "Show entry in browser")
  (added)
* [trunk/assets/shortcode.php](/browser/parallax-image/trunk/assets/shortcode.php?rev=3189649 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [trunk/parallax-image.php](/browser/parallax-image/trunk/parallax-image.php?rev=3189649 "Show entry in browser")
  (modified)
  ([1 diff](#file16 "Show differences"))
* [trunk/readme.txt](/browser/parallax-image/trunk/readme.txt?rev=3189649 "Show entry in browser")
  (modified)
  ([2 diffs](#file17 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [parallax-image/trunk/assets/shortcode.php](/changeset/3189649/parallax-image/trunk/assets/shortcode.php "Show the changeset 3189649 restricted to parallax-image/trunk/assets/shortcode.php")

  | [r3170176](/browser/parallax-image/trunk/assets/shortcode.php?rev=3170176#L153 "Show revision 3170176 of this file in browser") | [r3189649](/browser/parallax-image/trunk/assets/shortcode.php?rev=3189649#L153 "Show revision 3189649 of this file in browser") |  |
  | --- | --- | --- |
  | 153 | 153 | break; |
  | 154 | 154 | } |
  |  | 155 | $position = strtolower( sanitize\_text\_field( wp\_unslash( $atts['position'] ) ) ); |
  | 155 | 156 | $output  = '<section class="parallax-section">'; |
  | 156 |  | $output .= '<div class="parallax-window" data-z-index="' . esc\_attr( $zindex ) . '" data-position-x="' . ~~$atts['position']~~ . '" data-parallax="scroll" data-speed="' . esc\_attr( $speed ) . '" data-image-src="' . esc\_url( $image\_url ) . '"'; |
  |  | 157 | $output .= '<div class="parallax-window" data-z-index="' . esc\_attr( $zindex ) . '" data-position-x="' . esc\_attr( $position ) . '" data-parallax="scroll" data-speed="' . esc\_attr( $speed ) . '" data-image-src="' . esc\_url( $image\_url ) . '"'; |
  | 157 | 158 | $output .= ' style="align-items: ' . esc\_attr( $align ); |
  | 158 | 159 | if ( '' !== $atts['height'] ) { |
* ## [parallax-image/trunk/parallax-image.php](/changeset/3189649/parallax-image/trunk/parallax-image.php "Show the changeset 3189649 restricted to parallax-image/trunk/parallax-image.php")

  | [r3170176](/browser/parallax-image/trunk/parallax-image.php?rev=3170176#L3 "Show revision 3170176 of this file in browser") | [r3189649](/browser/parallax-image/trunk/parallax-image.php?rev=3189649#L3 "Show revision 3189649 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Plugin Name: Parallax Image |
  | 4 | 4 | Plugin URI: https://www.duckdiverllc.com/parallax-image-plugin/ |
  | 5 |  | Version: 1.9 |
  |  | 5 | Version: 1.9.1 |
  | 6 | 6 | Contributors: thehowarde |
  | 7 | 7 | Author: Howard Ehrenberg |
* ## [parallax-image/trunk/readme.txt](/changeset/3189649/parallax-image/trunk/readme.txt "Show the changeset 3189649 restricted to parallax-image/trunk/readme.txt")

  | [r3170176](/browser/parallax-image/trunk/readme.txt?rev=3170176#L7 "Show revision 3170176 of this file in browser") | [r3189649](/browser/parallax-image/trunk/readme.txt?rev=3189649#L7 "Show revision 3189649 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | Requires at least: 4.5 |
  | 8 | 8 | Tested up to: 6.7 |
  | 9 |  | Stable tag: 1.9 |
  |  | 9 | Stable tag: 1.9.1 |
  | 10 | 10 | Requires PHP: 7.0 |
  | 11 | 11 | License: GPLv3 |
  | […](/browser/parallax-image/trunk/readme.txt?rev=3170176#L81) | […](/browser/parallax-image/trunk/readme.txt?rev=3189649#L81) |  |
  | 81 | 81 | == Changelog == |
  | 82 | 82 |  |
  |  | 83 | = 1.9.1 = |
  |  | 84 | Update to address CVE ID: CVE-2024-11224 |
  |  | 85 |  |
  | 83 | 86 | = 1.9 = |
  | 84 | 87 | Update to address CVE ID: CVE-2024-9898 |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3189649)
* [Zip Archive](?format=zip&new=3189649)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


