=== Content from plugins.trac.wordpress.org_c62d0ed9_20250114_205641.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3194393)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3194392 "Changeset 3194392")
* [Next Changeset](/changeset/3194394 "Changeset 3194394") →

---

# Changeset 3194393

Timestamp:
11/21/2024 05:46:19 PM
([8 weeks](/timeline?from=2024-11-21T17%3A46%3A19Z&precision=second "See timeline at 11/21/2024 05:46:19 PM") ago)

Author:
CreativeMindsSolutions
Message:

replace with a new version containing a wizard

Location:
[enhanced-tooltipglossary/trunk](/browser/enhanced-tooltipglossary/trunk?rev=3194393)
Files:

171 added

* [amp.php](/browser/enhanced-tooltipglossary/trunk/amp.php?rev=3194393 "Show entry in browser")
  (added)
* [assets](/browser/enhanced-tooltipglossary/trunk/assets?rev=3194393 "Show entry in browser")
  (added)
* [assets/cm\_tooltip\_glossary\_import.csv](/browser/enhanced-tooltipglossary/trunk/assets/cm_tooltip_glossary_import.csv?rev=3194393 "Show entry in browser")
  (added)
* [assets/css](/browser/enhanced-tooltipglossary/trunk/assets/css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images](/browser/enhanced-tooltipglossary/trunk/assets/css/images?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ajax-loader.gif](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ajax-loader.gif?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/animated-overlay.gif](/browser/enhanced-tooltipglossary/trunk/assets/css/images/animated-overlay.gif?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/cm-glossary-tooltip-icon.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/cm-glossary-tooltip-icon.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/icon.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/icon.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/tooltip-image-overlay-icon.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/tooltip-image-overlay-icon.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_flat\_0\_aaaaaa\_40x100.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-bg_flat_0_aaaaaa_40x100.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_flat\_75\_ffffff\_40x100.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-bg_flat_75_ffffff_40x100.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_glass\_55\_fbf9ee\_1x400.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-bg_glass_55_fbf9ee_1x400.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_glass\_65\_ffffff\_1x400.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-bg_glass_65_ffffff_1x400.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_glass\_75\_dadada\_1x400.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-bg_glass_75_dadada_1x400.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_glass\_75\_e6e6e6\_1x400.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-bg_glass_75_e6e6e6_1x400.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_glass\_95\_fef1ec\_1x400.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-bg_glass_95_fef1ec_1x400.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_highlight-soft\_75\_cccccc\_1x100.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-icons\_222222\_256x240.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-icons_222222_256x240.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-icons\_2e83ff\_256x240.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-icons_2e83ff_256x240.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-icons\_454545\_256x240.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-icons_454545_256x240.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-icons\_888888\_256x240.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-icons_888888_256x240.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/images/ui-icons\_cd0a0a\_256x240.png](/browser/enhanced-tooltipglossary/trunk/assets/css/images/ui-icons_cd0a0a_256x240.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/jquery-ui-1.10.3.custom.css](/browser/enhanced-tooltipglossary/trunk/assets/css/jquery-ui-1.10.3.custom.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/jquery-ui-1.10.3.custom.min.css](/browser/enhanced-tooltipglossary/trunk/assets/css/jquery-ui-1.10.3.custom.min.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/jquery-ui-1.10.3.custom.min.min.css](/browser/enhanced-tooltipglossary/trunk/assets/css/jquery-ui-1.10.3.custom.min.min.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/jquery-ui-1.10.3.custom.min.min.min.css](/browser/enhanced-tooltipglossary/trunk/assets/css/jquery-ui-1.10.3.custom.min.min.min.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/jquery.listnav.css](/browser/enhanced-tooltipglossary/trunk/assets/css/jquery.listnav.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/jquery.listnav.min.css](/browser/enhanced-tooltipglossary/trunk/assets/css/jquery.listnav.min.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/tabs.css](/browser/enhanced-tooltipglossary/trunk/assets/css/tabs.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/tabs.min.css](/browser/enhanced-tooltipglossary/trunk/assets/css/tabs.min.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/tabs.min.min.css](/browser/enhanced-tooltipglossary/trunk/assets/css/tabs.min.min.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/tooltip-admin.css](/browser/enhanced-tooltipglossary/trunk/assets/css/tooltip-admin.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/tooltip-admin.min.css](/browser/enhanced-tooltipglossary/trunk/assets/css/tooltip-admin.min.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/tooltip.css](/browser/enhanced-tooltipglossary/trunk/assets/css/tooltip.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/tooltip.min.css](/browser/enhanced-tooltipglossary/trunk/assets/css/tooltip.min.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/tooltip.min.min.css](/browser/enhanced-tooltipglossary/trunk/assets/css/tooltip.min.min.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/css/wizard.css](/browser/enhanced-tooltipglossary/trunk/assets/css/wizard.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/img](/browser/enhanced-tooltipglossary/trunk/assets/img?rev=3194393 "Show entry in browser")
  (added)
* [assets/img/cm-tooltip-glossary-categories.png](/browser/enhanced-tooltipglossary/trunk/assets/img/cm-tooltip-glossary-categories.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/img/cm-tooltip-glossary-import-and-export.png](/browser/enhanced-tooltipglossary/trunk/assets/img/cm-tooltip-glossary-import-and-export.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/img/cm-tooltip-glossary-tags.png](/browser/enhanced-tooltipglossary/trunk/assets/img/cm-tooltip-glossary-tags.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/img/cminds\_logo.png](/browser/enhanced-tooltipglossary/trunk/assets/img/cminds_logo.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/img/wizard\_logo.png](/browser/enhanced-tooltipglossary/trunk/assets/img/wizard_logo.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/img/wizard\_step\_4.png](/browser/enhanced-tooltipglossary/trunk/assets/img/wizard_step_4.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/img/wizard\_step\_5.png](/browser/enhanced-tooltipglossary/trunk/assets/img/wizard_step_5.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/img/wizard\_step\_6.png](/browser/enhanced-tooltipglossary/trunk/assets/img/wizard_step_6.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/js](/browser/enhanced-tooltipglossary/trunk/assets/js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/cm-glossary-listnav.js](/browser/enhanced-tooltipglossary/trunk/assets/js/cm-glossary-listnav.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/cm-glossary-listnav.min.js](/browser/enhanced-tooltipglossary/trunk/assets/js/cm-glossary-listnav.min.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/cm-tooltip.js](/browser/enhanced-tooltipglossary/trunk/assets/js/cm-tooltip.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/editor](/browser/enhanced-tooltipglossary/trunk/assets/js/editor?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/editor/ckeditor](/browser/enhanced-tooltipglossary/trunk/assets/js/editor/ckeditor?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/editor/ckeditor/plugin.js](/browser/enhanced-tooltipglossary/trunk/assets/js/editor/ckeditor/plugin.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/editor/glossary-mce.js](/browser/enhanced-tooltipglossary/trunk/assets/js/editor/glossary-mce.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/editor/icon.png](/browser/enhanced-tooltipglossary/trunk/assets/js/editor/icon.png?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/jquery.fastLiveFilter.js](/browser/enhanced-tooltipglossary/trunk/assets/js/jquery.fastLiveFilter.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/modernizr.min.js](/browser/enhanced-tooltipglossary/trunk/assets/js/modernizr.min.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/purify.min.js](/browser/enhanced-tooltipglossary/trunk/assets/js/purify.min.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/select2](/browser/enhanced-tooltipglossary/trunk/assets/js/select2?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/select2/css](/browser/enhanced-tooltipglossary/trunk/assets/js/select2/css?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/select2/css/select2.css](/browser/enhanced-tooltipglossary/trunk/assets/js/select2/css/select2.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/select2/css/select2.min.css](/browser/enhanced-tooltipglossary/trunk/assets/js/select2/css/select2.min.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/select2/css/select2.min.min.css](/browser/enhanced-tooltipglossary/trunk/assets/js/select2/css/select2.min.min.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/select2/css/select2.min.min.min.css](/browser/enhanced-tooltipglossary/trunk/assets/js/select2/css/select2.min.min.min.css?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/select2/js](/browser/enhanced-tooltipglossary/trunk/assets/js/select2/js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/select2/js/select2.full.min.js](/browser/enhanced-tooltipglossary/trunk/assets/js/select2/js/select2.full.min.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/select2/js/select2.js](/browser/enhanced-tooltipglossary/trunk/assets/js/select2/js/select2.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/select2/js/select2.min.js](/browser/enhanced-tooltipglossary/trunk/assets/js/select2/js/select2.min.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/tooltip.js](/browser/enhanced-tooltipglossary/trunk/assets/js/tooltip.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/tooltip.min.js](/browser/enhanced-tooltipglossary/trunk/assets/js/tooltip.min.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/js/wizard.js](/browser/enhanced-tooltipglossary/trunk/assets/js/wizard.js?rev=3194393 "Show entry in browser")
  (added)
* [assets/no\_image.jpg](/browser/enhanced-tooltipglossary/trunk/assets/no_image.jpg?rev=3194393 "Show entry in browser")
  (added)
* [enhanced-tooltipglossary.php](/browser/enhanced-tooltipglossary/trunk/enhanced-tooltipglossary.php?rev=3194393 "Show entry in browser")
  (added)
* [functions.php](/browser/enhanced-tooltipglossary/trunk/functions.php?rev=3194393 "Show entry in browser")
  (added)
* [glossaryFree.php](/browser/enhanced-tooltipglossary/trunk/glossaryFree.php?rev=3194393 "Show entry in browser")
  (added)
* [glossaryIndex.php](/browser/enhanced-tooltipglossary/trunk/glossaryIndex.php?rev=3194393 "Show entry in browser")
  (added)
* [package](/browser/enhanced-tooltipglossary/trunk/package?rev=3194393 "Show entry in browser")
  (added)
* [package/CMWPPluginssuite.png](/browser/enhanced-tooltipglossary/trunk/package/CMWPPluginssuite.png?rev=3194393 "Show entry in browser")
  (added)
* [package/cminds-free.php](/browser/enhanced-tooltipglossary/trunk/package/cminds-free.php?rev=3194393 "Show entry in browser")
  (added)
* [package/cminds-plugin-config.php](/browser/enhanced-tooltipglossary/trunk/package/cminds-plugin-config.php?rev=3194393 "Show entry in browser")
  (added)
* [package/css](/browser/enhanced-tooltipglossary/trunk/package/css?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images](/browser/enhanced-tooltipglossary/trunk/package/css/images?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/animated-overlay.gif](/browser/enhanced-tooltipglossary/trunk/package/css/images/animated-overlay.gif?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_0\_aaaaaa\_40x100.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-bg_flat_0_aaaaaa_40x100.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_75\_ffffff\_40x100.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-bg_flat_75_ffffff_40x100.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_55\_fbf9ee\_1x400.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-bg_glass_55_fbf9ee_1x400.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_65\_ffffff\_1x400.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-bg_glass_65_ffffff_1x400.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_dadada\_1x400.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-bg_glass_75_dadada_1x400.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_e6e6e6\_1x400.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-bg_glass_75_e6e6e6_1x400.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_95\_fef1ec\_1x400.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-bg_glass_95_fef1ec_1x400.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_highlight-soft\_75\_cccccc\_1x100.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_222222\_256x240.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-icons_222222_256x240.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_2e83ff\_256x240.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-icons_2e83ff_256x240.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_454545\_256x240.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-icons_454545_256x240.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_888888\_256x240.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-icons_888888_256x240.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_cd0a0a\_256x240.png](/browser/enhanced-tooltipglossary/trunk/package/css/images/ui-icons_cd0a0a_256x240.png?rev=3194393 "Show entry in browser")
  (added)
* [package/css/jquery-ui.min.css](/browser/enhanced-tooltipglossary/trunk/package/css/jquery-ui.min.css?rev=3194393 "Show entry in browser")
  (added)
* [package/css/jquery-ui.min.min.css](/browser/enhanced-tooltipglossary/trunk/package/css/jquery-ui.min.min.css?rev=3194393 "Show entry in browser")
  (added)
* [package/css/jquery-ui.min.min.min.css](/browser/enhanced-tooltipglossary/trunk/package/css/jquery-ui.min.min.min.css?rev=3194393 "Show entry in browser")
  (added)
* [package/css/main.css](/browser/enhanced-tooltipglossary/trunk/package/css/main.css?rev=3194393 "Show entry in browser")
  (added)
* [package/css/main.min.css](/browser/enhanced-tooltipglossary/trunk/package/css/main.min.css?rev=3194393 "Show entry in browser")
  (added)
* [package/css/main.min.min.css](/browser/enhanced-tooltipglossary/trunk/package/css/main.min.min.css?rev=3194393 "Show entry in browser")
  (added)
* [package/css/rolling@2x.gif](/browser/enhanced-tooltipglossary/trunk/package/css/rolling%402x.gif?rev=3194393 "Show entry in browser")
  (added)
* [package/js](/browser/enhanced-tooltipglossary/trunk/package/js?rev=3194393 "Show entry in browser")
  (added)
* [package/js/froogaloop.js](/browser/enhanced-tooltipglossary/trunk/package/js/froogaloop.js?rev=3194393 "Show entry in browser")
  (added)
* [package/js/mailerlite.js](/browser/enhanced-tooltipglossary/trunk/package/js/mailerlite.js?rev=3194393 "Show entry in browser")
  (added)
* [package/views](/browser/enhanced-tooltipglossary/trunk/package/views?rev=3194393 "Show entry in browser")
  (added)
* [package/views/99suite.png](/browser/enhanced-tooltipglossary/trunk/package/views/99suite.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/Hound2.png](/browser/enhanced-tooltipglossary/trunk/package/views/Hound2.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/SEOHoundIcon.png](/browser/enhanced-tooltipglossary/trunk/package/views/SEOHoundIcon.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/WPmembership.png](/browser/enhanced-tooltipglossary/trunk/package/views/WPmembership.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/answers.png](/browser/enhanced-tooltipglossary/trunk/package/views/answers.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/appointments\_icon.png](/browser/enhanced-tooltipglossary/trunk/package/views/appointments_icon.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/banner\_yearly-membership\_220px.png](/browser/enhanced-tooltipglossary/trunk/package/views/banner_yearly-membership_220px.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/businessdir.png](/browser/enhanced-tooltipglossary/trunk/package/views/businessdir.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/deactivation\_feedback\_modal.php](/browser/enhanced-tooltipglossary/trunk/package/views/deactivation_feedback_modal.php?rev=3194393 "Show entry in browser")
  (added)
* [package/views/downloads.png](/browser/enhanced-tooltipglossary/trunk/package/views/downloads.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/faq.png](/browser/enhanced-tooltipglossary/trunk/package/views/faq.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/img](/browser/enhanced-tooltipglossary/trunk/package/views/img?rev=3194393 "Show entry in browser")
  (added)
* [package/views/img/Vector.png](/browser/enhanced-tooltipglossary/trunk/package/views/img/Vector.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/img/assets.png](/browser/enhanced-tooltipglossary/trunk/package/views/img/assets.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/img/circle.png](/browser/enhanced-tooltipglossary/trunk/package/views/img/circle.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/img/confetti.png](/browser/enhanced-tooltipglossary/trunk/package/views/img/confetti.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/img/v1.png](/browser/enhanced-tooltipglossary/trunk/package/views/img/v1.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/img/v2.png](/browser/enhanced-tooltipglossary/trunk/package/views/img/v2.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner.jpg](/browser/enhanced-tooltipglossary/trunk/package/views/keywordhoundbanner.jpg?rev=3194393 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner1.png](/browser/enhanced-tooltipglossary/trunk/package/views/keywordhoundbanner1.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/no.png](/browser/enhanced-tooltipglossary/trunk/package/views/no.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/plugin\_compare\_table.php](/browser/enhanced-tooltipglossary/trunk/package/views/plugin_compare_table.php?rev=3194393 "Show entry in browser")
  (added)
* [package/views/popup.png](/browser/enhanced-tooltipglossary/trunk/package/views/popup.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/registration.php](/browser/enhanced-tooltipglossary/trunk/package/views/registration.php?rev=3194393 "Show entry in browser")
  (added)
* [package/views/routes.png](/browser/enhanced-tooltipglossary/trunk/package/views/routes.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/searchreplace.png](/browser/enhanced-tooltipglossary/trunk/package/views/searchreplace.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/tooltip.png](/browser/enhanced-tooltipglossary/trunk/package/views/tooltip.png?rev=3194393 "Show entry in browser")
  (added)
* [package/views/userguide\_free.php](/browser/enhanced-tooltipglossary/trunk/package/views/userguide_free.php?rev=3194393 "Show entry in browser")
  (added)
* [package/views/videolessons.png](/browser/enhanced-tooltipglossary/trunk/package/views/videolessons.png?rev=3194393 "Show entry in browser")
  (added)
* [readme.txt](/browser/enhanced-tooltipglossary/trunk/readme.txt?rev=3194393 "Show entry in browser")
  (added)
* [settings](/browser/enhanced-tooltipglossary/trunk/settings?rev=3194393 "Show entry in browser")
  (added)
* [settings/CMTT\_Settings.php](/browser/enhanced-tooltipglossary/trunk/settings/CMTT_Settings.php?rev=3194393 "Show entry in browser")
  (added)
* [settings/Settings.php](/browser/enhanced-tooltipglossary/trunk/settings/Settings.php?rev=3194393 "Show entry in browser")
  (added)
* [settings/SettingsView.php](/browser/enhanced-tooltipglossary/trunk/settings/SettingsView.php?rev=3194393 "Show entry in browser")
  (added)
* [settings/assets](/browser/enhanced-tooltipglossary/trunk/settings/assets?rev=3194393 "Show entry in browser")
  (added)
* [settings/assets/css](/browser/enhanced-tooltipglossary/trunk/settings/assets/css?rev=3194393 "Show entry in browser")
  (added)
* [settings/assets/css/select2.min.css](/browser/enhanced-tooltipglossary/trunk/settings/assets/css/select2.min.css?rev=3194393 "Show entry in browser")
  (added)
* [settings/assets/css/select2.min.min.css](/browser/enhanced-tooltipglossary/trunk/settings/assets/css/select2.min.min.css?rev=3194393 "Show entry in browser")
  (added)
* [settings/assets/css/select2.min.min.min.css](/browser/enhanced-tooltipglossary/trunk/settings/assets/css/select2.min.min.min.css?rev=3194393 "Show entry in browser")
  (added)
* [settings/assets/css/settings.css](/browser/enhanced-tooltipglossary/trunk/settings/assets/css/settings.css?rev=3194393 "Show entry in browser")
  (added)
* [settings/assets/css/settings.min.css](/browser/enhanced-tooltipglossary/trunk/settings/assets/css/settings.min.css?rev=3194393 "Show entry in browser")
  (added)
* [settings/assets/css/settings.min.min.css](/browser/enhanced-tooltipglossary/trunk/settings/assets/css/settings.min.min.css?rev=3194393 "Show entry in browser")
  (added)
* [settings/assets/js](/browser/enhanced-tooltipglossary/trunk/settings/assets/js?rev=3194393 "Show entry in browser")
  (added)
* [settings/assets/js/select2.full.min.js](/browser/enhanced-tooltipglossary/trunk/settings/assets/js/select2.full.min.js?rev=3194393 "Show entry in browser")
  (added)
* [settings/assets/js/select2.min.js](/browser/enhanced-tooltipglossary/trunk/settings/assets/js/select2.min.js?rev=3194393 "Show entry in browser")
  (added)
* [settings/assets/js/settings.js](/browser/enhanced-tooltipglossary/trunk/settings/assets/js/settings.js?rev=3194393 "Show entry in browser")
  (added)
* [settings/config.php](/browser/enhanced-tooltipglossary/trunk/settings/config.php?rev=3194393 "Show entry in browser")
  (added)
* [settings/fields](/browser/enhanced-tooltipglossary/trunk/settings/fields?rev=3194393 "Show entry in browser")
  (added)
* [settings/fields/CMTT\_Glossary\_Index\_Page\_ID.php](/browser/enhanced-tooltipglossary/trunk/settings/fields/CMTT_Glossary_Index_Page_ID.php?rev=3194393 "Show entry in browser")
  (added)
* [settings/view.php](/browser/enhanced-tooltipglossary/trunk/settings/view.php?rev=3194393 "Show entry in browser")
  (added)
* [views](/browser/enhanced-tooltipglossary/trunk/views?rev=3194393 "Show entry in browser")
  (added)
* [views/backend](/browser/enhanced-tooltipglossary/trunk/views/backend?rev=3194393 "Show entry in browser")
  (added)
* [views/backend/admin\_about.php](/browser/enhanced-tooltipglossary/trunk/views/backend/admin_about.php?rev=3194393 "Show entry in browser")
  (added)
* [views/backend/admin\_categories.phtml](/browser/enhanced-tooltipglossary/trunk/views/backend/admin_categories.phtml?rev=3194393 "Show entry in browser")
  (added)
* [views/backend/admin\_extensions.php](/browser/enhanced-tooltipglossary/trunk/views/backend/admin_extensions.php?rev=3194393 "Show entry in browser")
  (added)
* [views/backend/admin\_importexport.phtml](/browser/enhanced-tooltipglossary/trunk/views/backend/admin_importexport.phtml?rev=3194393 "Show entry in browser")
  (added)
* [views/backend/admin\_nav.php](/browser/enhanced-tooltipglossary/trunk/views/backend/admin_nav.php?rev=3194393 "Show entry in browser")
  (added)
* [views/backend/admin\_tags.phtml](/browser/enhanced-tooltipglossary/trunk/views/backend/admin_tags.phtml?rev=3194393 "Show entry in browser")
  (added)
* [views/backend/admin\_template.php](/browser/enhanced-tooltipglossary/trunk/views/backend/admin_template.php?rev=3194393 "Show entry in browser")
  (added)
* [views/backend/settings\_labels.phtml](/browser/enhanced-tooltipglossary/trunk/views/backend/settings_labels.phtml?rev=3194393 "Show entry in browser")
  (added)
* [views/backend/wizard.php](/browser/enhanced-tooltipglossary/trunk/views/backend/wizard.php?rev=3194393 "Show entry in browser")
  (added)
* [wizard.php](/browser/enhanced-tooltipglossary/trunk/wizard.php?rev=3194393 "Show entry in browser")
  (added)
* [wpml-config.xml](/browser/enhanced-tooltipglossary/trunk/wpml-config.xml?rev=3194393 "Show entry in browser")
  (added)

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3194393)
* [Zip Archive](?format=zip&new=3194393)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_3d3c1b8e_20250114_205528.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fcm-email-blacklist%2Ftrunk%2Fpackage%2Fcminds-free.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/cm-email-blacklist/trunk/package/cminds-free.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/cm-email-blacklist/trunk/package/cminds-free.php)

---

# [source:](/browser?order=name "Go to repository root") [cm-email-blacklist](/browser/cm-email-blacklist?order=name "View cm-email-blacklist")/[trunk](/browser/cm-email-blacklist/trunk?order=name "View trunk")/[package](/browser/cm-email-blacklist/trunk/package?order=name "View package")/[cminds-free.php](/browser/cm-email-blacklist/trunk/package/cminds-free.php?order=name "View cminds-free.php")

View diff against:

View revision:

| [Last change](/changeset/3218466/cm-email-blacklist/trunk/package/cminds-free.php "View differences") on this file was [3218466](/changeset/3218466/ "View changeset 3218466"), checked in by CreativeMindsSolutions, [7 days ago](/timeline?from=2025-01-07T16%3A52%3A07Z&precision=second "See timeline at 01/07/2025 04:52:07 PM") |
| --- |
| fix a security issue |
| **File size:** 141.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | namespace com\cminds\package\free\v1\_1\_5; |
| [3](#L3) |  |
| [4](#L4) | if (!defined(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION')) { |
| [5](#L5) | define(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION', '1\_1\_5'); |
| [6](#L6) | } |
| [7](#L7) | if (!class\_exists(\_\_NAMESPACE\_\_ . '\CmindsFreePackage')) { |
| [8](#L8) |  |
| [9](#L9) | class CmindsFreePackage { |
| [10](#L10) |  |
| [11](#L11) | private $config = array(); |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* LicensingAPI object |
| [15](#L15) | \* @var CmindsLicensingAPI |
| [16](#L16) | \*/ |
| [17](#L17) | public $licensingApi = null; |
| [18](#L18) | private $pluginMenu = null; |
| [19](#L19) | private $pluginMenuPage = null; |
| [20](#L20) |  |
| [21](#L21) | const SHAREBOX\_FLAT = 0; |
| [22](#L22) | const SHAREBOX\_SQUARE = 1; |
| [23](#L23) | const ADS\_REFRESH\_INTERVAL = 7776000; // 3600 \* 24 \* 90 = 3 months |
| [24](#L24) |  |
| [25](#L25) | public function \_\_construct($config) { |
| [26](#L26) | $this->config = $config; |
| [27](#L27) |  |
| [28](#L28) | $this->pluginMenu = $this->getOption('plugin-menu-item'); |
| [29](#L29) | $this->pluginMenuPage = $this->getPageUrl('licensing'); |
| [30](#L30) |  |
| [31](#L31) | add\_action('activated\_plugin', array($this, 'redirectAfterInstall'), 10, 2); |
| [32](#L32) | add\_action('admin\_init', array($this, 'updatePoweredByOption')); |
| [33](#L33) | add\_action('admin\_init', array($this, 'registerAdminActions')); |
| [34](#L34) | add\_action('admin\_menu', array($this, 'updateMenu'), 21); |
| [35](#L35) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminStyles')); |
| [36](#L36) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminScripts')); |
| [37](#L37) |  |
| [38](#L38) | $aboutPageKey = $this->getPageSlug(); |
| [39](#L39) | add\_action('cminds-' . $aboutPageKey . '-content-1', array($this, 'displayUserGuideTab')); |
| [40](#L40) | add\_action('cminds-' . $aboutPageKey . '-content-10', array($this, 'displayCreativeMindsTab')); |
| [41](#L41) | add\_action('cminds-' . $aboutPageKey . '-content-30', array($this, 'displayMembershipTab')); |
| [42](#L42) | add\_action('cminds-' . $aboutPageKey . '-content-40', array($this, 'displayCMProductTab')); |
| [43](#L43) | add\_action('cminds-' . $aboutPageKey . '-content-50', array($this, 'displayCMAddOnsTab')); |
| [44](#L44) | add\_action('cminds-' . $aboutPageKey . '-content-60', array($this, 'displayVideoGuidesTab')); |
| [45](#L45) | add\_action('cminds-' . $aboutPageKey . '-content-99', array($this, 'displaySupportTab')); |
| [46](#L46) | add\_action('cminds-' . $aboutPageKey . '-content-199', array($this, 'displayServerInformationTab')); |
| [47](#L47) |  |
| [48](#L48) | add\_action('cminds\_download\_sysinfo', array($this, 'cminds\_generate\_sysinfo\_download')); |
| [49](#L49) |  |
| [50](#L50) | add\_action('init', array($this, 'cminds\_get\_actions')); |
| [51](#L51) | add\_action('init', array($this, 'cminds\_post\_actions')); |
| [52](#L52) |  |
| [53](#L53) | add\_shortcode('cminds\_free\_author', array($this, 'showAuthor')); |
| [54](#L54) | add\_shortcode('cminds\_free\_registration', array($this, 'showRegistration')); |
| [55](#L55) | add\_shortcode('cminds\_free\_guide', array($this, 'showGuide')); |
| [56](#L56) | add\_shortcode('cminds\_upgrade\_box', array($this, 'showUpgrade')); |
| [57](#L57) | add\_shortcode('cminds\_free\_activation', array($this, 'showActivation')); |
| [58](#L58) |  |
| [59](#L59) | add\_filter('plugin\_row\_meta', array($this, 'add\_plugin\_meta\_links'), 10, 2); |
| [60](#L60) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'add\_plugin\_action\_links')); |
| [61](#L61) |  |
| [62](#L62) | add\_action('wp\_dashboard\_setup', array($this, 'addDashboardWidget')); |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | public function addDashboardWidget() { |
| [66](#L66) | if ($this->isRegistered()) { |
| [67](#L67) | wp\_add\_dashboard\_widget('cminds\_package\_dashboard\_widget', \_\_('CreativeMinds WordPress News', 'cminds-package'), array($this, 'showCMDashboardWidget')); |
| [68](#L68) | } |
| [69](#L69) | } |
| [70](#L70) |  |
| [71](#L71) | public function showCMDashboardWidget() { |
| [72](#L72) | $feeds = array( |
| [73](#L73) | array( |
| [74](#L74) | 'url'          => 'https://www.cminds.com/category/wordpress/feed/', |
| [75](#L75) | 'items'        => 6, |
| [76](#L76) | 'show\_summary' => 0, |
| [77](#L77) | 'show\_author'  => 0, |
| [78](#L78) | 'show\_date'    => 1, |
| [79](#L79) | ), |
| [80](#L80) | ); |
| [81](#L81) |  |
| [82](#L82) | wp\_dashboard\_primary\_output('cminds\_package\_dashboard\_widget', $feeds); |
| [83](#L83) | ?> |
| [84](#L84) | <br><hr> |
| [85](#L85) | <p> |
| [86](#L86) | <?php |
| [87](#L87) | printf( |
| [88](#L88) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/', \_\_('cminds.com'), \_\_('(opens in a new window)') |
| [89](#L89) | ); |
| [90](#L90) | ?> |
| [91](#L91) |  |
| [92](#L92) | | |
| [93](#L93) |  |
| [94](#L94) | <?php |
| [95](#L95) | printf( |
| [96](#L96) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/wordpress-plugins/', \_\_('CM WordPress Plugins'), \_\_('(opens in a new window)') |
| [97](#L97) | ); |
| [98](#L98) | ?> |
| [99](#L99) |  |
| [100](#L100) | | |
| [101](#L101) |  |
| [102](#L102) | <?php |
| [103](#L103) | printf( |
| [104](#L104) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', esc\_url(\_x('https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/', '99+ WordPress Plugins Bundle')), \_\_('99+ WordPress Plugins Bundle'), \_\_('(opens in a new window)') |
| [105](#L105) | ); |
| [106](#L106) | ?> |
| [107](#L107) | </p> |
| [108](#L108) | <?php |
| [109](#L109) | } |
| [110](#L110) |  |
| [111](#L111) | public function redirectAfterInstall($plugin, $network\_activation = false) { |
| [112](#L112) | global $cmindsPluginPackage; |
| [113](#L113) | $the\_package = null; |
| [114](#L114) |  |
| [115](#L115) | foreach ($cmindsPluginPackage as $package) { |
| [116](#L116) | $basename = $package->getOption('plugin-basename'); |
| [117](#L117) | if ($basename == $plugin) { |
| [118](#L118) | $the\_package = $package; |
| [119](#L119) | break; |
| [120](#L120) | } |
| [121](#L121) | } |
| [122](#L122) |  |
| [123](#L123) | if ($the\_package && $the\_package->getOption('plugin-redirect-after-install')) { |
| [124](#L124) | $url = $the\_package->getOption('plugin-redirect-after-install'); |
| [125](#L125) | $isBulkActivate = array(); |
| [126](#L126) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action2'); |
| [127](#L127) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action'); |
| [128](#L128) | if (!empty($url) && !in\_array('activate-selected', $isBulkActivate)) { |
| [129](#L129) | wp\_redirect($url); |
| [130](#L130) | exit(); |
| [131](#L131) | } |
| [132](#L132) | } |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | /\*\* |
| [136](#L136) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [137](#L137) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [138](#L138) | \* functions are called on init. |
| [139](#L139) | \* |
| [140](#L140) | \* @since 1.0 |
| [141](#L141) | \* @return void |
| [142](#L142) | \*/ |
| [143](#L143) | public function registerAdminActions() { |
| [144](#L144) | if (is\_admin()) { |
| [145](#L145) | // If user is paying or in trial and have the free version installed, |
| [146](#L146) | // assume that the deactivation is for the upgrade process. |
| [147](#L147) | add\_action('wp\_ajax\_cm-submit-uninstall-reason', array($this, 'submitUninstallReason')); |
| [148](#L148) | add\_action('wp\_ajax\_cm-submit-registration-email', array($this, 'submitRegistrationEmail')); |
| [149](#L149) | add\_action('wp\_ajax\_cm-submit-deregistration', array($this, 'submitDeregistration')); |
| [150](#L150) | add\_action('wp\_ajax\_cm-submit-registration-skip', array($this, 'submitRegistrationSkip')); |
| [151](#L151) |  |
| [152](#L152) | global $pagenow; |
| [153](#L153) | if ('plugins.php' === $pagenow) { |
| [154](#L154) | // Add action link to settings page. |
| [155](#L155) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [156](#L156) | add\_filter('network\_admin\_plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [157](#L157) | add\_action('admin\_footer', array($this, 'showDeactivationFeedbackDialog'), 11); |
| [158](#L158) | } |
| [159](#L159) | } |
| [160](#L160) | } |
| [161](#L161) |  |
| [162](#L162) | /\*\* |
| [163](#L163) | \* Modify plugin's page action links collection. |
| [164](#L164) | \* |
| [165](#L165) | \* @author Vova Feldman (@svovaf) |
| [166](#L166) | \* @since  1.0.0 |
| [167](#L167) | \* |
| [168](#L168) | \* @param array $links |
| [169](#L169) | \* @param       $file |
| [170](#L170) | \* |
| [171](#L171) | \* @return array |
| [172](#L172) | \*/ |
| [173](#L173) | function modifyPluginActionLinks($links, $file) { |
| [174](#L174) | /\* |
| [175](#L175) | \* This HTML element is used to identify the correct plugin when attaching an event to its Deactivate link. |
| [176](#L176) | \*/ |
| [177](#L177) | if (isset($links['deactivate'])) { |
| [178](#L178) | $links['deactivate'] .= '<i class="cm-slug" data-slug="' . $this->getOption('plugin-abbrev') . '"></i>'; |
| [179](#L179) | } |
| [180](#L180) |  |
| [181](#L181) | return $links; |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | /\*\* |
| [185](#L185) | \* Displays a confirmation and feedback dialog box when the user clicks on the "Deactivate" link on the plugins |
| [186](#L186) | \* page. |
| [187](#L187) | \* |
| [188](#L188) | \*/ |
| [189](#L189) | function showDeactivationFeedbackDialog() { |
| [190](#L190) | $content = ''; |
| [191](#L191) | ob\_start(); |
| [192](#L192) | include\_once 'views/deactivation\_feedback\_modal.php'; |
| [193](#L193) | $content .= ob\_get\_clean(); |
| [194](#L194) | echo $content; |
| [195](#L195) | } |
| [196](#L196) |  |
| [197](#L197) | function filterDeactivationReason($reason) { |
| [198](#L198) |  |
| [199](#L199) | if (strlen($reason) < 20) { |
| [200](#L200) | return ''; |
| [201](#L201) | } |
| [202](#L202) | if (str\_word\_count($reason) < 4) { |
| [203](#L203) | return ''; |
| [204](#L204) | } |
| [205](#L205) |  |
| [206](#L206) | $dirty\_words = array('shit', 'fuck', 'wtf'); |
| [207](#L207) | foreach ($dirty\_words as $a) { |
| [208](#L208) | if (stripos($reason, $a) !== false) { |
| [209](#L209) | return ''; |
| [210](#L210) | } |
| [211](#L211) | } |
| [212](#L212) |  |
| [213](#L213) | return $reason; |
| [214](#L214) | } |
| [215](#L215) |  |
| [216](#L216) | /\*\* |
| [217](#L217) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [218](#L218) | \* @since  1.1.2 |
| [219](#L219) | \*/ |
| [220](#L220) | function submitRegistrationEmail() { |
| [221](#L221) | $atts = array(); |
| [222](#L222) |  |
| [223](#L223) | if (empty($\_POST['email'])) { |
| [224](#L224) | exit; |
| [225](#L225) | } |
| [226](#L226) |  |
| [227](#L227) | $this->registerUser($atts); |
| [228](#L228) | } |
| [229](#L229) |  |
| [230](#L230) | /\*\* |
| [231](#L231) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [232](#L232) | \* @since  1.1.2 |
| [233](#L233) | \*/ |
| [234](#L234) | function submitDeregistration() { |
| [235](#L235) | $atts = array(); |
| [236](#L236) |  |
| [237](#L237) | $this->deregisterUser($atts); |
| [238](#L238) | } |
| [239](#L239) |  |
| [240](#L240) | /\*\* |
| [241](#L241) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [242](#L242) | \* @since  1.1.2 |
| [243](#L243) | \*/ |
| [244](#L244) | function submitRegistrationSkip() { |
| [245](#L245) | if (empty($\_POST)) { |
| [246](#L246) | exit; |
| [247](#L247) | } |
| [248](#L248) | $atts = array(); |
| [249](#L249) | if (!empty($\_POST['id'])) { |
| [250](#L250) | $atts['id'] = sanitize\_text\_field($\_POST['id']); |
| [251](#L251) | } |
| [252](#L252) | $this->skipRegistration($atts); |
| [253](#L253) | } |
| [254](#L254) |  |
| [255](#L255) | /\*\* |
| [256](#L256) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [257](#L257) | \* @since  1.1.2 |
| [258](#L258) | \*/ |
| [259](#L259) | function submitUninstallReason() { |
| [260](#L260) | if (empty($\_POST['plugin\_slug']) || empty($\_POST['deactivation\_reason'])) { |
| [261](#L261) | exit; |
| [262](#L262) | } |
| [263](#L263) |  |
| [264](#L264) | $reason = isset($\_REQUEST['deactivation\_reason']) ? trim(esc\_html(stripslashes(strip\_tags($\_REQUEST['deactivation\_reason'])))) : ''; |
| [265](#L265) | $filteredReason = $this->filterDeactivationReason($reason); |
| [266](#L266) | $postedEmail = isset($\_POST['contact\_email']) && is\_email(trim($\_POST['contact\_email'])) ? sanitize\_text\_field($\_POST['contact\_email']) : null; |
| [267](#L267) |  |
| [268](#L268) | /\* |
| [269](#L269) | \* Only send the e-mail if the filtered reason is not empty |
| [270](#L270) | \*/ |
| [271](#L271) | if (!empty($filteredReason)) { |
| [272](#L272) | global $cmindsPluginPackage; |
| [273](#L273) | $package = $cmindsPluginPackage[$\_POST['plugin\_slug']]; |
| [274](#L274) |  |
| [275](#L275) | $fields = array( |
| [276](#L276) | 'product\_name' => $package->getOption('plugin-name'), |
| [277](#L277) | 'remote\_url'   => get\_bloginfo('wpurl'), |
| [278](#L278) | 'email'        => null !== $postedEmail ? $postedEmail : get\_bloginfo('admin\_email'), |
| [279](#L279) | 'want\_contact' => isset($\_POST['want\_contact']) ? 'true' === $\_POST['want\_contact'] : false, |
| [280](#L280) | 'data\_agree'   => isset($\_POST['data\_agree']) ? 'true' === $\_POST['data\_agree'] : true, |
| [281](#L281) | ); |
| [282](#L282) |  |
| [283](#L283) | $registered = $this->isRegistered($\_POST['plugin\_slug']) ? ' (registered)' : ''; |
| [284](#L284) | $message = '<p>The ' . $fields['product\_name'] . ' has been deactivated on ' . $fields['remote\_url'] . ' by ' . $fields['email'] . $registered . '.</p> <p>The reason was:</p> <p><strong>' . $filteredReason . '</strong></p>'; |
| [285](#L285) | $message .= '<br/><hr/>'; |
| [286](#L286) |  |
| [287](#L287) | $mail = 'support@cminds.com'; |
| [288](#L288) |  |
| [289](#L289) | if ($fields['want\_contact']) { |
| [290](#L290) | $message .= '<p>This user is interested in contact from our side.</p>'; |
| [291](#L291) | $message .= '<br/><hr/>'; |
| [292](#L292) | $mail = 'support@cminds.com'; |
| [293](#L293) | } |
| [294](#L294) |  |
| [295](#L295) | if ($fields['data\_agree']) { |
| [296](#L296) | $message .= '<p>SYSTEM INFORMATION BELOW:</p>'; |
| [297](#L297) | ob\_start(); |
| [298](#L298) | echo '<pre>'; |
| [299](#L299) | echo $this->cminds\_system\_info\_content(); |
| [300](#L300) | echo '</pre>'; |
| [301](#L301) | $message .= ob\_get\_clean(); |
| [302](#L302) | } |
| [303](#L303) |  |
| [304](#L304) | $message .= '<p>END OF SYSTEM INFORMATION</p>'; |
| [305](#L305) |  |
| [306](#L306) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [307](#L307) | $result = wp\_mail($mail, 'CM Free Plugin Deactivation Feedback', $message); |
| [308](#L308) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [309](#L309) | } |
| [310](#L310) |  |
| [311](#L311) |  |
| [312](#L312) | // Print '1' for successful operation. |
| [313](#L313) | echo 1; |
| [314](#L314) | exit; |
| [315](#L315) | } |
| [316](#L316) |  |
| [317](#L317) | /\*\* |
| [318](#L318) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [319](#L319) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [320](#L320) | \* functions are called on init. |
| [321](#L321) | \* |
| [322](#L322) | \* @since 1.0 |
| [323](#L323) | \* @return void |
| [324](#L324) | \*/ |
| [325](#L325) | public function cminds\_get\_actions() { |
| [326](#L326) | if (isset($\_GET['cminds\_action'])) { |
| [327](#L327) | do\_action('cminds\_' . $\_GET['cminds\_action'], $\_GET); |
| [328](#L328) | } |
| [329](#L329) | } |
| [330](#L330) |  |
| [331](#L331) | /\*\* |
| [332](#L332) | \* Hooks Cminds actions, when present in the $\_POST superglobal. Every Cminds\_action |
| [333](#L333) | \* present in $\_POST is called using WordPress's do\_action function. These |
| [334](#L334) | \* functions are called on init. |
| [335](#L335) | \* |
| [336](#L336) | \* @since 1.0 |
| [337](#L337) | \* @return void |
| [338](#L338) | \*/ |
| [339](#L339) | public function cminds\_post\_actions() { |
| [340](#L340) | if (isset($\_POST['cminds\_action'])) { |
| [341](#L341) | do\_action('cminds\_' . $\_POST['cminds\_action'], $\_POST); |
| [342](#L342) | } |
| [343](#L343) | } |
| [344](#L344) |  |
| [345](#L345) | public function updatePoweredByOption() { |
| [346](#L346) | $optionValue = filter\_input(INPUT\_POST, $this->getPoweredByOption()); |
| [347](#L347) | $submitValue = filter\_input(INPUT\_POST, 'cminds\_poweredby\_change'); |
| [348](#L348) |  |
| [349](#L349) | if (null !== $optionValue || null !== $submitValue) { |
| [350](#L350) | if(is\_admin() && is\_user\_logged\_in() && current\_user\_can('manage\_options')) { |
| [351](#L351) | update\_option($this->getPoweredByOption(), $optionValue); |
| [352](#L352) | } |
| [353](#L353) | } |
| [354](#L354) | } |
| [355](#L355) |  |
| [356](#L356) | public function getPoweredByOption() { |
| [357](#L357) | $optionName = $this->getOption('plugin-abbrev') . '-powered-by-enabled'; |
| [358](#L358) | return $optionName; |
| [359](#L359) | } |
| [360](#L360) |  |
| [361](#L361) | /\*\* |
| [362](#L362) | \* Default is 0 (disabled) |
| [363](#L363) | \* @return type |
| [364](#L364) | \*/ |
| [365](#L365) | public function isPoweredByEnabled() { |
| [366](#L366) | $result = get\_option($this->getPoweredByOption(), 0); |
| [367](#L367) | return $result; |
| [368](#L368) | } |
| [369](#L369) |  |
| [370](#L370) | /\*\* |
| [371](#L371) | \* Returns the author Url (for free version only) |
| [372](#L372) | \*/ |
| [373](#L373) | public function showAuthor($atts = array()) { |
| [374](#L374) | $authorUrl = ''; |
| [375](#L375) | global $cmindsPluginPackage; |
| [376](#L376) |  |
| [377](#L377) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [378](#L378) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [379](#L379) |  |
| [380](#L380) | if (!$currentPlugin->isPoweredByEnabled()) { |
| [381](#L381) | return; |
| [382](#L382) | } |
| [383](#L383) | ob\_start(); |
| [384](#L384) | ?> |
| [385](#L385) | <style> |
| [386](#L386) | .cminds\_poweredby {clear:both;float:none;font-size:11px;line-height:1.5;display: inline-block;padding: 3px;margin-top:20px;color:#bbb;text-decoration:none;font-weight:bold} |
| [387](#L387) | .cminds\_poweredby:before {content:'Powered by ';} |
| [388](#L388) | .cminds\_poweredbylink:link{color:#bbb;text-decoration:none;} |
| [389](#L389) | .cminds\_poweredbylink:visited{color:#bbb;text-decoration:none;} |
| [390](#L390) | .cminds\_poweredbylink:hover{color:#bbb;text-decoration:none;} |
| [391](#L391) | </style> |
| [392](#L392) |  |
| [393](#L393) | <?php |
| [394](#L394) | $authorUrl .= ob\_get\_clean(); |
| [395](#L395) | /\* |
| [396](#L396) | \* By leaving following snippet in the code, you're expressing your gratitude to creators of this plugin. Thank You! |
| [397](#L397) | \*/ |
| [398](#L398) | $authorUrl .= '<div style="display:block;clear:both;"></div><span class="cminds\_poweredby">'; |
| [399](#L399) | $authorUrl .= '<a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/') . '" target="\_blank" class="cminds\_poweredbylink">CreativeMinds</a> '; |
| [400](#L400) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/wordpress-plugins/') . '" target="\_blank" class="cminds\_poweredbylink">WordPress Plugin</a>'; |
| [401](#L401) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode($currentPlugin->getOption('plugin-store-url')) . '" target="\_blank" class="cminds\_poweredbylink">' . $currentPlugin->getOption('plugin-name') . '</a>'; |
| [402](#L402) | $authorUrl .= '</span><div style="display:block;clear:both;"></div>'; |
| [403](#L403) |  |
| [404](#L404) | return $authorUrl; |
| [405](#L405) | } |
| [406](#L406) |  |
| [407](#L407) | /\* |
| [408](#L408) | \* Licensing Page Tabs |
| [409](#L409) | \*/ |
| [410](#L410) |  |
| [411](#L411) | public function displayUpgradeTutorialTab() { |
| [412](#L412) | $content = ''; |
| [413](#L413) | ob\_start(); |
| [414](#L414) | ?> |
| [415](#L415) | <div> |
| [416](#L416) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Customer Dashboard</a> |
| [417](#L417) | </div> |
| [418](#L418) | <br/> |
| [419](#L419) | <div> |
| [420](#L420) | <?php |
| [421](#L421) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134692135?title=0&byline=0&portrait=0" width="500" height="280"]'); |
| [422](#L422) | ?> |
| [423](#L423) | </div> |
| [424](#L424) | <?php |
| [425](#L425) | $content .= ob\_get\_clean(); |
| [426](#L426) | return $content; |
| [427](#L427) | } |
| [428](#L428) |  |
| [429](#L429) | public function displayManageProductsTab() { |
| [430](#L430) | $content = ''; |
| [431](#L431) | ob\_start(); |
| [432](#L432) | ?> |
| [433](#L433) | <div> |
| [434](#L434) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Open CreativeMinds Customer Dashboard</a> |
| [435](#L435) | </div> |
| [436](#L436) | <br/> |
| [437](#L437) | <div> |
| [438](#L438) | <?php |
| [439](#L439) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134490629?title=0&byline=0&portrait=0" width="640" height="360"]'); |
| [440](#L440) | ?> |
| [441](#L441) | </div> |
| [442](#L442) | <?php |
| [443](#L443) | $content .= ob\_get\_clean(); |
| [444](#L444) | return $content; |
| [445](#L445) | } |
| [446](#L446) |  |
| [447](#L447) | public function displayServerInformationTab() { |
| [448](#L448) | global $wp\_version; |
| [449](#L449) | $content = ''; |
| [450](#L450) |  |
| [451](#L451) | ob\_start(); |
| [452](#L452) | echo $this->cminds\_compatibility\_check(); |
| [453](#L453) | echo $this->cminds\_system\_info(); |
| [454](#L454) | $content .= ob\_get\_clean(); |
| [455](#L455) | return $content; |
| [456](#L456) | } |
| [457](#L457) |  |
| [458](#L458) | /\* |
| [459](#L459) | \* About/User Guide Page Tabs |
| [460](#L460) | \*/ |
| [461](#L461) |  |
| [462](#L462) | public function displayUserGuideTab() { |
| [463](#L463) | $content = ''; |
| [464](#L464) | ob\_start(); |
| [465](#L465) | ?> |
| [466](#L466) | <div> |
| [467](#L467) | <a href="<?php echo $this->getUserguideUrl(); ?>" class="btn button button-primary" target="\_blank">Open User Guide in a new tab</a> |
| [468](#L468) | </div> |
| [469](#L469) | <?php |
| [470](#L470) | $content .= ob\_get\_clean(); |
| [471](#L471) | return $content; |
| [472](#L472) | } |
| [473](#L473) |  |
| [474](#L474) | public function displayUpgradeToProTab() { |
| [475](#L475) | $content = ''; |
| [476](#L476) | $upgradeToProHtml = $this->getOption('plugin-compare-table'); |
| [477](#L477) | $pluginUrl = $this->getOption('plugin-store-url'); |
| [478](#L478) | wp\_enqueue\_script('jquery-ui-tooltip'); |
| [479](#L479) | ob\_start(); |
| [480](#L480) | ?> |
| [481](#L481) | <script> |
| [482](#L482) | jQuery(document).ready(function () { |
| [483](#L483) | jQuery(".cminds-package-show-tooltip").tooltip(); |
| [484](#L484) | }); |
| [485](#L485) | </script> |
| [486](#L486) | <style type="text/css"> |
| [487](#L487) | .pricing-table ul{ |
| [488](#L488) | border-width: 1px; |
| [489](#L489) | border-style: solid; |
| [490](#L490) | border-color: #CCCCCC; |
| [491](#L491) | border-radius: 3px; |
| [492](#L492) | margin: 4px; |
| [493](#L493) | text-align: center; |
| [494](#L494) | font-family: 'Arial'; |
| [495](#L495) | list-style: none; |
| [496](#L496) | float: left; |
| [497](#L497) | padding: 4px; |
| [498](#L498) | background-color: #FFFFFF; |
| [499](#L499) | max-width: 24%; |
| [500](#L500) | } |
| [501](#L501) | .pricing-table ul li{ |
| [502](#L502) | padding: 7px; |
| [503](#L503) | background-color: #EFEFEF; |
| [504](#L504) | border-width: 2px; |
| [505](#L505) | border-color: #B83737; |
| [506](#L506) | border-radius: 0px; |
| [507](#L507) | border-bottom-width: 2px; |
| [508](#L508) | font-size: 13px; |
| [509](#L509) | } |
| [510](#L510) | .pricing-table li:nth-child(odd){ |
| [511](#L511) | background-color: transparent; |
| [512](#L512) | } |
| [513](#L513) | .pricing-table ul .heading{ |
| [514](#L514) | color: #FFFFFF; |
| [515](#L515) | background-color: #659b2e; |
| [516](#L516) | font-size: 19px; |
| [517](#L517) | text-align: center; |
| [518](#L518) | } |
| [519](#L519) | .pricing-table ul .price{ |
| [520](#L520) | font-size: 25px; |
| [521](#L521) | } |
| [522](#L522) | .pricing-table ul .action{ |
| [523](#L523) | font-size: 13px; |
| [524](#L524) | color: #FFFFFF; |
| [525](#L525) | } |
| [526](#L526) | .pricing-table .action a{ |
| [527](#L527) | border-color: #B83737; |
| [528](#L528) | border-width: 0px; |
| [529](#L529) | background-color: #659b2e; |
| [530](#L530) | padding-top: 7px; |
| [531](#L531) | padding-bottom: 7px; |
| [532](#L532) | padding-left: 15px; |
| [533](#L533) | padding-right: 15px; |
| [534](#L534) | border-style: solid; |
| [535](#L535) | color: #FFFFFF; |
| [536](#L536) | } |
| [537](#L537) | .pricing-table ul .noaction{ |
| [538](#L538) | font-size: 13px; |
| [539](#L539) | color: #FFFFFF; |
| [540](#L540) | } |
| [541](#L541) | .pricing-table .noaction span{ |
| [542](#L542) | border-color: #B83737; |
| [543](#L543) | border-width: 0px; |
| [544](#L544) | background-color: #b2b2b2; |
| [545](#L545) | padding-top: 7px; |
| [546](#L546) | padding-bottom: 7px; |
| [547](#L547) | padding-left: 15px; |
| [548](#L548) | padding-right: 15px; |
| [549](#L549) | border-style: solid; |
| [550](#L550) | color: #FFFFFF; |
| [551](#L551) | } |
| [552](#L552) |  |
| [553](#L553) | </style> |
| [554](#L554) | <br> |
| [555](#L555) | <div> |
| [556](#L556) | <?php echo $upgradeToProHtml; ?> |
| [557](#L557) | </div> |
| [558](#L558) | <?php |
| [559](#L559) | $content .= ob\_get\_clean(); |
| [560](#L560) | return $content; |
| [561](#L561) | } |
| [562](#L562) |  |
| [563](#L563) | public function displayCreativeMindsTab() { |
| [564](#L564) | $content = ''; |
| [565](#L565) | ob\_start(); |
| [566](#L566) | ?> |
| [567](#L567) | <div> |
| [568](#L568) | <a href="https://www.cminds.com/about/" class="btn button button-primary" target="\_blank">Open About Us page in a new tab</a> |
| [569](#L569) | </div> |
| [570](#L570) | <?php |
| [571](#L571) | $content .= ob\_get\_clean(); |
| [572](#L572) | return $content; |
| [573](#L573) | } |
| [574](#L574) |  |
| [575](#L575) | public function displayMembershipTab() { |
| [576](#L576) | $content = ''; |
| [577](#L577) | ob\_start(); |
| [578](#L578) | ?> |
| [579](#L579) | <div> |
| [580](#L580) | <a href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" class="btn button button-primary" target="\_blank">Open Membership Package page in a new tab</a> |
| [581](#L581) | </div> |
| [582](#L582) | <?php |
| [583](#L583) | $content .= ob\_get\_clean(); |
| [584](#L584) | return $content; |
| [585](#L585) | } |
| [586](#L586) |  |
| [587](#L587) | public function displayCMProductTab() { |
| [588](#L588) | $content = ''; |
| [589](#L589) | ob\_start(); |
| [590](#L590) |  |
| [591](#L591) | $currentIframeFilter = filter\_input(INPUT\_POST, 'cminds\_iframe\_filter'); |
| [592](#L592) | if (empty($currentIframeFilter)) { |
| [593](#L593) | $currentIframeFilter = 'Plugin'; |
| [594](#L594) | } |
| [595](#L595) | $url = remove\_query\_arg('cminds\_iframe\_filter', $\_SERVER['REQUEST\_URI']); |
| [596](#L596) | ?> |
| [597](#L597) | <div> |
| [598](#L598) | <a href="https://www.cminds.com/wordpress-plugins-library/?cat=Plugin" class="btn button button-primary" target="\_blank">Open Product Catalog in a new tab</a> |
| [599](#L599) | <form method="post" class="cminds\_iframe\_filter\_form"> |
| [600](#L600) | <span> | Filter: </span> |
| [601](#L601) | <button type="submit" name="cminds\_iframe\_filter" value="Plugin" class="btn button button-primary">Plugins</button> |
| [602](#L602) | <button type="submit" name="cminds\_iframe\_filter" value="Add-On" class="btn button button-primary">AddOns</button> |
| [603](#L603) | <button type="submit" name="cminds\_iframe\_filter" value="Bundle" class="btn button button-primary">Bundles</button> |
| [604](#L604) | <button type="submit" name="cminds\_iframe\_filter" value="Service" class="btn button button-primary">Services</button> |
| [605](#L605) | </form> |
| [606](#L606) | </div> |
| [607](#L607) | <?php |
| [608](#L608) | $content .= ob\_get\_clean(); |
| [609](#L609) | return $content; |
| [610](#L610) | } |
| [611](#L611) |  |
| [612](#L612) | public function displayCMAddOnsTab() { |
| [613](#L613) | $content = ''; |
| [614](#L614) | ob\_start(); |
| [615](#L615) | ?> |
| [616](#L616) | <div> |
| [617](#L617) | <a href="https://www.cminds.com/wordpress-plugins-library/?showfilter=No&tags=Tooltip" class="btn button button-primary" target="\_blank">Open Add-Ons page in a new tab</a> |
| [618](#L618) | </div> |
| [619](#L619) | <?php |
| [620](#L620) | $content .= ob\_get\_clean(); |
| [621](#L621) | return $content; |
| [622](#L622) | } |
| [623](#L623) |  |
| [624](#L624) | public function displayVideoGuidesTab() { |
| [625](#L625) | $content = ''; |
| [626](#L626) | ob\_start(); |
| [627](#L627) | ?> |
| [628](#L628) | <div> |
| [629](#L629) | <a href="https://www.cminds.com/cm-plugins-video-library/" class="btn button button-primary" target="\_blank">Open Video Guides page in a new tab</a> |
| [630](#L630) | </div> |
| [631](#L631) | <?php |
| [632](#L632) | $content .= ob\_get\_clean(); |
| [633](#L633) | return $content; |
| [634](#L634) | } |
| [635](#L635) |  |
| [636](#L636) | public function displaySupportTab() { |
| [637](#L637) | $content = ''; |
| [638](#L638) | $supportForumLink = $this->getOption('plugin-support-url'); |
| [639](#L639) | ob\_start(); |
| [640](#L640) | ?> |
| [641](#L641) | <div> |
| [642](#L642) | <p>WordPress supprot forum can only be viewed on WordPress.org site. Please click on the buttom to visit the forum and to submit your support questions</p> |
| [643](#L643) | <a href="<?php echo $supportForumLink; ?>" class="btn button button-primary" target="\_blank">Open WordPress Support Formum</a> |
| [644](#L644) | </div> |
| [645](#L645) | <?php |
| [646](#L646) | $content .= ob\_get\_clean(); |
| [647](#L647) | return $content; |
| [648](#L648) | } |
| [649](#L649) |  |
| [650](#L650) | public function add\_plugin\_meta\_links($meta, $file) { |
| [651](#L651) | if ($file == $this->getOption('plugin-basename')) { |
| [652](#L652) |  |
| [653](#L653) | foreach ($meta as $key => $value) { |
| [654](#L654) | if (strpos($value, 'Visit plugin site') !== FALSE) { |
| [655](#L655) | unset($meta[$key]); |
| [656](#L656) | $meta[] = sprintf('<a href="%s">%s</a>', esc\_url($this->getOption('plugin-store-url')), \_\_('Visit plugin site', 'cminds-package') |
| [657](#L657) | ); |
| [658](#L658) | break; |
| [659](#L659) | } |
| [660](#L660) | } |
| [661](#L661) |  |
| [662](#L662) | foreach ($meta as $key => $value) { |
| [663](#L663) | if (strpos($value, '<a href="') !== FALSE) { |
| [664](#L664) | $meta[$key] = str\_replace('<a href="', '<a target="\_blank" href="', $value); |
| [665](#L665) | } |
| [666](#L666) | } |
| [667](#L667) | } |
| [668](#L668) | return $meta; |
| [669](#L669) | } |
| [670](#L670) |  |
| [671](#L671) | public function add\_plugin\_action\_links($links) { |
| [672](#L672) | $settingsUrl = $this->getOption('plugin-redirect-after-install'); |
| [673](#L673) | if (!empty($settingsUrl)) { |
| [674](#L674) | $links[] = '<a href="' . esc\_url($settingsUrl) . '">Settings</a>'; |
| [675](#L675) | } |
| [676](#L676) | if (!$this->getOption('plugin-free-only')) { |
| [677](#L677) | $links[] = '<a href="' . esc\_url(admin\_url('admin.php?page=' . $this->getProSlug())) . '">Upgrade to Pro</a>'; |
| [678](#L678) | } |
| [679](#L679) | return $links; |
| [680](#L680) | } |
| [681](#L681) |  |
| [682](#L682) | public function updateMenu() { |
| [683](#L683) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('User Guide', 'cminds-package'), \_\_('User Guide', 'cminds-package'), 'manage\_options', $this->getPageSlug(), array($this, 'displayPage')); |
| [684](#L684) | if (!$this->getOption('plugin-free-only')) { |
| [685](#L685) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), 'manage\_options', $this->getProSlug(), array($this, 'displayPage')); |
| [686](#L686) | } |
| [687](#L687) |  |
| [688](#L688) | $tag = 'cminds-' . $this->getOption('plugin-short-slug') . '-license-page'; |
| [689](#L689) | $condition = has\_action($tag); |
| [690](#L690) | } |
| [691](#L691) |  |
| [692](#L692) | public function getProSlug() { |
| [693](#L693) | $slug = $this->getOption('plugin-abbrev') . '\_pro'; |
| [694](#L694) | return $slug; |
| [695](#L695) | } |
| [696](#L696) |  |
| [697](#L697) | public function getPageSlug() { |
| [698](#L698) | $slug = $this->getOption('plugin-abbrev') . '\_about'; |
| [699](#L699) | return $slug; |
| [700](#L700) | } |
| [701](#L701) |  |
| [702](#L702) | public function getLicensingSlug() { |
| [703](#L703) | $slug = $this->getOption('plugin-abbrev') . '\_licensing'; |
| [704](#L704) | return $slug; |
| [705](#L705) | } |
| [706](#L706) |  |
| [707](#L707) | public function isOwnScreen() { |
| [708](#L708) | $screen = get\_current\_screen(); |
| [709](#L709) | return (strpos($screen->base, $this->getPageSlug()) !== false || strpos($screen->base, $this->getLicensingSlug()) !== false || strpos($screen->base, $this->getProSlug()) !== false); |
| [710](#L710) | } |
| [711](#L711) |  |
| [712](#L712) | /\*\* |
| [713](#L713) | \* Load plugin styles for admin area |
| [714](#L714) | \* |
| [715](#L715) | \* @access public |
| [716](#L716) | \* @since 1.0 |
| [717](#L717) | \*/ |
| [718](#L718) | public function enqueueAdminStyles() { |
| [719](#L719) |  |
| [720](#L720) | $screen = get\_current\_screen(); |
| [721](#L721) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [722](#L722) | return; |
| [723](#L723) | } |
| [724](#L724) | wp\_enqueue\_style('jquery-ui-tabs-css', plugin\_dir\_url(\_\_FILE\_\_) . 'css/jquery-ui.min.css', array()); |
| [725](#L725) | } |
| [726](#L726) |  |
| [727](#L727) | /\*\* |
| [728](#L728) | \* Load plugin scripts for admin area |
| [729](#L729) | \* |
| [730](#L730) | \* @access public |
| [731](#L731) | \* @since 1.0 |
| [732](#L732) | \*/ |
| [733](#L733) | public function enqueueAdminScripts() { |
| [734](#L734) |  |
| [735](#L735) | $screen = get\_current\_screen(); |
| [736](#L736) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [737](#L737) | return; |
| [738](#L738) | } |
| [739](#L739) | wp\_enqueue\_script('jquery-ui-tabs'); |
| [740](#L740) | } |
| [741](#L741) |  |
| [742](#L742) | public function getUserguideUrl() { |
| [743](#L743) | $url = ''; |
| [744](#L744) | if ($this->getOption('plugin-userguide-key')) { |
| [745](#L745) | $url .= 'https://creativeminds.helpscoutdocs.com/article/' . $this->getOption('plugin-userguide-key'); |
| [746](#L746) | } else { |
| [747](#L747) | $url .= 'https://creativeminds.helpscoutdocs.com/collection/3-wordpress-plugins'; |
| [748](#L748) | } |
| [749](#L749) | return $url; |
| [750](#L750) | } |
| [751](#L751) |  |
| [752](#L752) | public function displayPage() { |
| [753](#L753) | global $plugin\_page; |
| [754](#L754) | $content = ''; |
| [755](#L755) |  |
| [756](#L756) | global $cmindsPluginPackage; |
| [757](#L757) |  |
| [758](#L758) | if (!empty($cmindsPluginPackage)) { |
| [759](#L759) | foreach ($cmindsPluginPackage as $key => $package) { |
| [760](#L760) | $isown = $package->isOwnScreen(); |
| [761](#L761) | if ($isown) { |
| [762](#L762) | $currentPlugin = $package; |
| [763](#L763) | } |
| [764](#L764) | } |
| [765](#L765) | } |
| [766](#L766) | ?> |
| [767](#L767) | <div class="wrap"> |
| [768](#L768) | <style type="text/css"> |
| [769](#L769) | .subsubsub li+li:before {content:'| ';} |
| [770](#L770) | .cminds\_system\_info\_area{ |
| [771](#L771) | width: 99.5%; |
| [772](#L772) | height: 290px; |
| [773](#L773) | } |
| [774](#L774) | .cminds\_update\_table td, |
| [775](#L775) | .cminds\_update\_table tr { |
| [776](#L776) | width: 140px; |
| [777](#L777) | text-align: left; |
| [778](#L778) | } |
| [779](#L779) | .cminds\_iframe\_filter\_form{ |
| [780](#L780) | display: inline-block; |
| [781](#L781) | } |
| [782](#L782) | .cminds\_iframe\_filter\_form > span{ |
| [783](#L783) | line-height: 28px; |
| [784](#L784) | } |
| [785](#L785) | </style> |
| [786](#L786) | <h2> |
| [787](#L787) | <div id="icon-<?php echo $currentPlugin->getOption('plugin-icon') ?>" class="icon32"> |
| [788](#L788) | <br /> |
| [789](#L789) | </div> |
| [790](#L790) | <?php echo $currentPlugin->getOption('plugin-name') ?>&nbsp; |
| [791](#L791) | <?php |
| [792](#L792) | $pluginAbbrev = $currentPlugin->getOption('plugin-abbrev'); |
| [793](#L793) | if (empty($\_GET['page']) || $\_GET['page'] != $pluginAbbrev . '\_pro') : |
| [794](#L794) | ?> |
| [795](#L795) | <a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $pluginAbbrev . '\_pro')); ?>" class="button button-primary" title="Click to Buy PRO">Upgrade to Pro</a> |
| [796](#L796) | <?php |
| [797](#L797) | endif; |
| [798](#L798) | ?> |
| [799](#L799) | </h2> |
| [800](#L800) | <?php |
| [801](#L801) | echo $currentPlugin->showNav(); |
| [802](#L802) |  |
| [803](#L803) | wp\_enqueue\_style('cminds\_package\_userguide', plugin\_dir\_url(\_\_FILE\_\_) . 'css/main.css'); |
| [804](#L804) | wp\_enqueue\_style('cminds\_package\_userguide\_font', 'https://fonts.googleapis.com/css?family=Open+Sans:400,700,300,600'); |
| [805](#L805) |  |
| [806](#L806) | switch ($plugin\_page) { |
| [807](#L807) | default: |
| [808](#L808) | case $currentPlugin->getPageSlug(): { |
| [809](#L809) | $title = \_\_('About', 'cminds-package'); |
| [810](#L810) | wp\_enqueue\_script('cmdm-mailerlite', plugin\_dir\_url(\_\_FILE\_\_) . 'js/mailerlite.js', array(), $this->getOption('plugin-version'), true); |
| [811](#L811) | ob\_start(); |
| [812](#L812) | $base\_path = $currentPlugin->getOption('plugin-dir-path'); |
| [813](#L813) | include $base\_path . 'package/views/userguide\_free.php'; |
| [814](#L814) | $content .= ob\_get\_clean(); |
| [815](#L815) | break; |
| [816](#L816) | } |
| [817](#L817) | case $currentPlugin->getProSlug(): { |
| [818](#L818) | $title = \_\_('Upgrade to Pro', 'cminds-package'); |
| [819](#L819) |  |
| [820](#L820) | ob\_start(); |
| [821](#L821) | echo $currentPlugin->displayUpgradeToProTab(); |
| [822](#L822) | $content .= ob\_get\_clean(); |
| [823](#L823) | break; |
| [824](#L824) | } |
| [825](#L825) | case $currentPlugin->getLicensingSlug(): { |
| [826](#L826) | $title = \_\_('User Guide', 'cminds-package'); |
| [827](#L827) |  |
| [828](#L828) | ob\_start(); |
| [829](#L829) | $content .= $this->showTabs($plugin\_page); |
| [830](#L830) | $content .= ob\_get\_clean(); |
| [831](#L831) | break; |
| [832](#L832) | } |
| [833](#L833) | } |
| [834](#L834) |  |
| [835](#L835) | echo apply\_filters('cminds-about-page-content', $content, $currentPlugin); |
| [836](#L836) | ?> |
| [837](#L837) | </div> |
| [838](#L838) | <?php |
| [839](#L839) | } |
| [840](#L840) |  |
| [841](#L841) | protected function showTabs($key) { |
| [842](#L842) | $class = $id = 'cminds\_' . $key . '\_tabs'; |
| [843](#L843) | ?> |
| [844](#L844) | <div id="<?php echo $id; ?>" class="<?php echo $class; ?>"> |
| [845](#L845) | <script> |
| [846](#L846) | jQuery(document).ready(function ($) { |
| [847](#L847) | $('#<?php echo $id; ?>').tabs({ |
| [848](#L848) | activate: function (event, ui) { |
| [849](#L849) | window.location.hash = ui.newPanel.attr('id').replace(/-/g, '\_'); |
| [850](#L850) | }, |
| [851](#L851) | create: function (event, ui) { |
| [852](#L852) | var tab = location.hash.replace(/\\_/g, '-'); |
| [853](#L853) | if (tab.length) |
| [854](#L854) | { |
| [855](#L855) | var tabContainer = $(ui.panel.context).find('a[href="' + tab + '"]'); |
| [856](#L856) | if (typeof tabContainer !== 'undefined' && tabContainer.length) |
| [857](#L857) | { |
| [858](#L858) | var index = tabContainer.parent().index(); |
| [859](#L859) | $(ui.panel.context).tabs('option', 'active', index); |
| [860](#L860) | } |
| [861](#L861) | } |
| [862](#L862) | } |
| [863](#L863) | }); |
| [864](#L864) | }); |
| [865](#L865) | </script> |
| [866](#L866) | <?php |
| [867](#L867) | $this->renderSettingsTabsControls($key); |
| [868](#L868) | $this->renderSettingsTabs($key); |
| [869](#L869) | ?> |
| [870](#L870) | </div> |
| [871](#L871) | <?php |
| [872](#L872) | } |
| [873](#L873) |  |
| [874](#L874) | protected function getTabsArray($key) { |
| [875](#L875) |  |
| [876](#L876) | switch ($key) { |
| [877](#L877) | default: |
| [878](#L878) | case $this->getPageSlug(): |
| [879](#L879) | $settingsTabsArrayBase = array( |
| [880](#L880) | '1'   => 'User Guide', |
| [881](#L881) | //                                              '5'              => 'Upgrade To Pro', |
| [882](#L882) | '10'  => 'About', |
| [883](#L883) | '30'  => 'Membership', |
| [884](#L884) | '40'  => 'CM Catalog', |
| [885](#L885) | '60'  => 'Video Guides', |
| [886](#L886) | '99'  => 'WordPress Support Forum', |
| [887](#L887) | '199' => 'System Information', |
| [888](#L888) | ); |
| [889](#L889) | if ($this->getOption('plugin-has-addons')) { |
| [890](#L890) | $settingsTabsArrayBase['50'] = 'Plugin Add-ons'; |
| [891](#L891) | } |
| [892](#L892) | break; |
| [893](#L893) | case $this->getLicensingSlug(): |
| [894](#L894) | $settingsTabsArrayBase = array( |
| [895](#L895) | '10' => 'License Activation', |
| [896](#L896) | '20' => 'Check Version', |
| [897](#L897) | //                                              '30' => 'Upgrade Tutorial', |
| [898](#L898) | '40' => 'Manage Your CM Products', |
| [899](#L899) | ); |
| [900](#L900) | break; |
| [901](#L901) | } |
| [902](#L902) |  |
| [903](#L903) | $settingsTabsArray = apply\_filters('cminds-' . $key . '-tabs-array', $settingsTabsArrayBase); |
| [904](#L904) |  |
| [905](#L905) | ksort($settingsTabsArray); |
| [906](#L906) | return $settingsTabsArray; |
| [907](#L907) | } |
| [908](#L908) |  |
| [909](#L909) | /\*\* |
| [910](#L910) | \* Function renders (default) or returns the setttings tabs |
| [911](#L911) | \* |
| [912](#L912) | \* @param type $return |
| [913](#L913) | \* @return string |
| [914](#L914) | \*/ |
| [915](#L915) | protected function renderSettingsTabs($key, $return = false) { |
| [916](#L916) | $content = ''; |
| [917](#L917) | $settingsTabsArray = $this->getTabsArray($key); |
| [918](#L918) |  |
| [919](#L919) | if ($settingsTabsArray) { |
| [920](#L920) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [921](#L921) | $filterName = 'cminds-' . $key . '-content-' . $tabKey; |
| [922](#L922) |  |
| [923](#L923) | $content .= '<div id="tabs-' . $tabKey . '">'; |
| [924](#L924) | $tabContent = apply\_filters($filterName, ''); |
| [925](#L925) | $content .= $tabContent; |
| [926](#L926) | $content .= '</div>'; |
| [927](#L927) | } |
| [928](#L928) | } |
| [929](#L929) |  |
| [930](#L930) | if ($return) { |
| [931](#L931) | return $content; |
| [932](#L932) | } |
| [933](#L933) | echo $content; |
| [934](#L934) | } |
| [935](#L935) |  |
| [936](#L936) | /\*\* |
| [937](#L937) | \* Function renders (default) or returns the setttings tabs |
| [938](#L938) | \* |
| [939](#L939) | \* @param type $return |
| [940](#L940) | \* @return string |
| [941](#L941) | \*/ |
| [942](#L942) | protected function renderSettingsTabsControls($key, $return = false) { |
| [943](#L943) | $content = ''; |
| [944](#L944) | $settingsTabsArray = $this->getTabsArray($key); |
| [945](#L945) |  |
| [946](#L946) | if ($settingsTabsArray) { |
| [947](#L947) | $content .= '<ul>'; |
| [948](#L948) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [949](#L949) | $content .= '<li><a href="#tabs-' . $tabKey . '">' . $tabLabel . '</a></li>'; |
| [950](#L950) | } |
| [951](#L951) | $content .= '</ul>'; |
| [952](#L952) | } |
| [953](#L953) |  |
| [954](#L954) | if ($return) { |
| [955](#L955) | return $content; |
| [956](#L956) | } |
| [957](#L957) | echo $content; |
| [958](#L958) | } |
| [959](#L959) |  |
| [960](#L960) | protected function showSharebox($mode = self::SHAREBOX\_FLAT) { |
| [961](#L961) |  |
| [962](#L962) | $class = (self::SHAREBOX\_SQUARE === $mode) ? 'square' : 'flat'; |
| [963](#L963) |  |
| [964](#L964) | $pluginReviewLink = (string) $this->getOption('plugin-review-url'); |
| [965](#L965) | $pluginFullName = (string) $this->getOption('plugin-name'); |
| [966](#L966) | $pluginUrl = (string) $this->getOption('plugin-store-url'); |
| [967](#L967) |  |
| [968](#L968) | $twitterTweet = rawurlencode('Checkout the ' . $pluginFullName . ' ( ' . $pluginUrl . ' ) #WordPress #Plugin by @CMPLUGINS'); |
| [969](#L969) |  |
| [970](#L970) | ob\_start(); |
| [971](#L971) | ?> |
| [972](#L972) |  |
| [973](#L973) | <style type="text/css"> |
| [974](#L974) |  |
| [975](#L975) | div.cminds\_call\_to\_action\_wrapper:after{ |
| [976](#L976) | content: ''; |
| [977](#L977) | display: table; |
| [978](#L978) | clear: both; |
| [979](#L979) | } |
| [980](#L980) |  |
| [981](#L981) | #mc\_embed\_signup{clear:left; width:400px;} |
| [982](#L982) | .fb\_iframe\_widget{vertical-align: top;line-height: 2em;} |
| [983](#L983) |  |
| [984](#L984) | div.cminds\_call\_to\_action.flat{ |
| [985](#L985) | display: flex; |
| [986](#L986) | text-align: left; |
| [987](#L987) | float: left; |
| [988](#L988) | margin-bottom: 10px; |
| [989](#L989) | } |
| [990](#L990) |  |
| [991](#L991) | div.cminds\_call\_to\_action.flat .inner\_box{ |
| [992](#L992) | border: 1px solid #999; |
| [993](#L993) | padding: 0 0.5em 0.5em; |
| [994](#L994) | min-width: 80px; |
| [995](#L995) | border-radius : 4px; |
| [996](#L996) | margin: 5px 0 5px 0 ; |
| [997](#L997) | } |
| [998](#L998) |  |
| [999](#L999) | div.cminds\_call\_to\_action.square{ |
| [1000](#L1000) | display: flex; |
| [1001](#L1001) | text-align: center; |
| [1002](#L1002) | } |
| [1003](#L1003) |  |
| [1004](#L1004) | div.cminds\_call\_to\_action.square .inner\_box{ |
| [1005](#L1005) | border: 1px solid #999; |
| [1006](#L1006) | padding: 0 0.5em 0.5em; |
| [1007](#L1007) | margin: 0 auto; |
| [1008](#L1008) | min-width: 290px; |
| [1009](#L1009) | } |
| [1010](#L1010) |  |
| [1011](#L1011) | div.cminds\_call\_to\_action.square .inner\_box td{ |
| [1012](#L1012) | display: block; |
| [1013](#L1013) | padding: 0; |
| [1014](#L1014) | } |
| [1015](#L1015) |  |
| [1016](#L1016) | div.cminds\_call\_to\_action a{ |
| [1017](#L1017) | text-decoration: none; |
| [1018](#L1018) | } |
| [1019](#L1019) | </style> |
| [1020](#L1020) |  |
| [1021](#L1021) | <div class="cminds\_call\_to\_action\_wrapper"> |
| [1022](#L1022) | <div class="cminds\_call\_to\_action <?php echo $class; ?>"> |
| [1023](#L1023) | <div id="fb-root"></div> |
| [1024](#L1024) | <div class="inner\_box"> |
| [1025](#L1025) | <table cellpadding="10"><tr> |
| [1026](#L1026) | <td valign="top"> |
| [1027](#L1027) | <h3><?php $this->\_e('Share your Appreciation'); ?></h3> |
| [1028](#L1028) | <a target="\_blank" href="<?php echo esc\_attr($pluginReviewLink); ?>"> |
| [1029](#L1029) | <div class="btn button"> |
| [1030](#L1030) | <div class="dashicons dashicons-share-alt2"></div><span><?php $this->\_e('Submit a review'); ?></span> |
| [1031](#L1031) | </div> |
| [1032](#L1032) | </a> |
| [1033](#L1033) | <a target="\_blank"  href="http://twitter.com/home/?status=<?php echo esc\_attr(urlencode($twitterTweet)) ?>"> |
| [1034](#L1034) | <div class="btn button"> |
| [1035](#L1035) | <div class="dashicons dashicons-twitter"></div><span><?php $this->\_e('Tweet'); ?></span> |
| [1036](#L1036) | </div> |
| [1037](#L1037) | </a> |
| [1038](#L1038) | </td><td valign="top"> |
| [1039](#L1039) | <h3><?php $this->\_e('Stay Up-to-Date'); ?></h3> |
| [1040](#L1040) | <a href="https://twitter.com/CMPLUGINS" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true"><?php $this->\_e('Follow @CMPLUGINS'); ?></a> |
| [1041](#L1041) | <script>!function (d, s, id) { |
| [1042](#L1042) | var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; |
| [1043](#L1043) | if (!d.getElementById(id)) { |
| [1044](#L1044) | js = d.createElement(s); |
| [1045](#L1045) | js.id = id; |
| [1046](#L1046) | js.src = p + '://platform.twitter.com/widgets.js'; |
| [1047](#L1047) | fjs.parentNode.insertBefore(js, fjs); |
| [1048](#L1048) | } |
| [1049](#L1049) | }(document, 'script', 'twitter-wjs'); |
| [1050](#L1050) | </script> |
| [1051](#L1051) |  |
| [1052](#L1052) | <div class="g-follow" data-annotation="none" data-height="24" data-href="https://plus.google.com/108513627228464018583" data-rel="publisher"></div> |
| [1053](#L1053) |  |
| [1054](#L1054) | <script type="text/javascript"> |
| [1055](#L1055) | (function () { |
| [1056](#L1056) | var po = document.createElement('script'); |
| [1057](#L1057) | po.type = 'text/javascript'; |
| [1058](#L1058) | po.async = true; |
| [1059](#L1059) | po.src = 'https://apis.google.com/js/platform.js'; |
| [1060](#L1060) | var s = document.getElementsByTagName('script')[0]; |
| [1061](#L1061) | s.parentNode.insertBefore(po, s); |
| [1062](#L1062) | })(); |
| [1063](#L1063) | </script> |
| [1064](#L1064) |  |
| [1065](#L1065) | <script>(function (d, s, id) { |
| [1066](#L1066) | var js, fjs = d.getElementsByTagName(s)[0]; |
| [1067](#L1067) | if (d.getElementById(id)) |
| [1068](#L1068) | return; |
| [1069](#L1069) | js = d.createElement(s); |
| [1070](#L1070) | js.id = id; |
| [1071](#L1071) | js.src = "//connect.facebook.net/en\_US/sdk.js#xfbml=1&version=v2.0"; |
| [1072](#L1072) | fjs.parentNode.insertBefore(js, fjs); |
| [1073](#L1073) | }(document, 'script', 'facebook-jssdk')); |
| [1074](#L1074) | </script> |
| [1075](#L1075) |  |
| [1076](#L1076) | <div class="fb-like" data-href="https://www.facebook.com/cmplugins" data-width="100" data-layout="button" data-action="like" data-show-faces="true" data-share="true"></div> |
| [1077](#L1077) |  |
| [1078](#L1078) | <br/> |
| [1079](#L1079) | </td> |
| [1080](#L1080) | <td valign="top"> |
| [1081](#L1081) | <!-- Begin MailChimp Signup Form --> |
| [1082](#L1082) | <div id="mc\_embed\_signup"> |
| [1083](#L1083) | <form action="//cminds.us3.list-manage.com/subscribe/post?u=f48254f757fafba2669ae5918&amp;id=142732cbf9" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="\_blank" novalidate> |
| [1084](#L1084) | <div id="mc\_embed\_signup\_scroll"> |
| [1085](#L1085) | <h3 for="mce-EMAIL"><?php $this->\_e('CM Newsletter - coupons, deals, news'); ?></h3> |
| [1086](#L1086) | <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required> |
| [1087](#L1087) | <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn button"> |
| [1088](#L1088) | <span style="display:inline-block; position: relative"><div class="cmtt\_field\_message" title="We only send newsletters a couple of times a year. They include great deals, promo codes and information about our new plugins!"></div></span> |
| [1089](#L1089) | <!-- real people should not fill this in and expect good things - do not remove this or risk fsorm bot signups--> |
| [1090](#L1090) | <div style="position: absolute; left: -5000px;"><input type="text" name="b\_f48254f757fafba2669ae5918\_142732cbf9" tabindex="-1" value=""></div> |
| [1091](#L1091) | <div class="clear"></div> |
| [1092](#L1092) | </div> |
| [1093](#L1093) | </form> |
| [1094](#L1094) | </div> |
| [1095](#L1095) | <!--End mc\_embed\_signup--> |
| [1096](#L1096) | </td> |
| [1097](#L1097) | </tr> |
| [1098](#L1098) | </table> |
| [1099](#L1099) | </div> |
| [1100](#L1100) | </div> |
| [1101](#L1101) | </div> |
| [1102](#L1102) | <?php |
| [1103](#L1103) | ob\_end\_flush(); |
| [1104](#L1104) | } |
| [1105](#L1105) |  |
| [1106](#L1106) | /\*\* |
| [1107](#L1107) | \* Function returns the ads for the users who volunteered to register (optional step) |
| [1108](#L1108) | \* It communicates with our own server to download the current promotions |
| [1109](#L1109) | \* |
| [1110](#L1110) | \* @return boolean |
| [1111](#L1111) | \*/ |
| [1112](#L1112) | protected function getAds() { |
| [1113](#L1113) | $connectionProblem = false; |
| [1114](#L1114) | $ads\_arr = get\_transient('cminds\_free\_ads'); |
| [1115](#L1115) | if (empty($ads\_arr) && !is\_array($ads\_arr)) { |
| [1116](#L1116) | $args = array( |
| [1117](#L1117) | 'body' => array() |
| [1118](#L1118) | ); |
| [1119](#L1119) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1120](#L1120) | $response = wp\_remote\_post($href, $args); |
| [1121](#L1121) | if (!is\_wp\_error($response)) { |
| [1122](#L1122) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1123](#L1123) | } else { |
| [1124](#L1124) | $args['sslverify'] = false; |
| [1125](#L1125) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1126](#L1126) | $response = wp\_remote\_post($href, $args); |
| [1127](#L1127) | if (!is\_wp\_error($response)) { |
| [1128](#L1128) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1129](#L1129) | } else { |
| [1130](#L1130) | $ads = array(); |
| [1131](#L1131) | $connectionProblem = true; |
| [1132](#L1132) | } |
| [1133](#L1133) | } |
| [1134](#L1134) | $ads\_arr = array( |
| [1135](#L1135) | 'ads'          => $ads, |
| [1136](#L1136) | 'refresh\_time' => time(), |
| [1137](#L1137) | 'connection'   => !$connectionProblem, |
| [1138](#L1138) | ); |
| [1139](#L1139) | set\_transient('cminds\_free\_ads', $ads\_arr, self::ADS\_REFRESH\_INTERVAL); |
| [1140](#L1140) | } |
| [1141](#L1141) | /\* |
| [1142](#L1142) | \* Update from old version |
| [1143](#L1143) | \*/ |
| [1144](#L1144) | if (!isset($ads\_arr['ads']) && !isset($ads\_arr['refresh\_time'])) { |
| [1145](#L1145) | $temp\_ads\_arr = $ads\_arr; |
| [1146](#L1146) | $ads\_arr = array( |
| [1147](#L1147) | 'ads'          => $temp\_ads\_arr, |
| [1148](#L1148) | 'refresh\_time' => strtotime('-10 DAYS'), |
| [1149](#L1149) | 'connection'   => TRUE, |
| [1150](#L1150) | ); |
| [1151](#L1151) | } |
| [1152](#L1152) | /\* |
| [1153](#L1153) | \* Update from old version |
| [1154](#L1154) | \*/ |
| [1155](#L1155) | if (!isset($ads\_arr['connection'])) { |
| [1156](#L1156) | $ads\_arr['connection'] = TRUE; |
| [1157](#L1157) | } |
| [1158](#L1158) | return $ads\_arr; |
| [1159](#L1159) | } |
| [1160](#L1160) |  |
| [1161](#L1161) | public function getStoreUrl($args = array()) { |
| [1162](#L1162) | $category = isset($args['category']) ? $args['category'] : 'All'; |
| [1163](#L1163) | $storeUrl = $this->addAffiliateCode($this->getCategoryLink('Wordpress', 'category', $category)); |
| [1164](#L1164) | return esc\_url($storeUrl); |
| [1165](#L1165) | } |
| [1166](#L1166) |  |
| [1167](#L1167) | public function getCategoryLink($group, $type, $name) { |
| [1168](#L1168) | $categoryLinks = array( |
| [1169](#L1169) | 'Wordpress' => array( |
| [1170](#L1170) | 'category' => array( |
| [1171](#L1171) | 'All'     => '/wordpress-plugins-library/', |
| [1172](#L1172) | 'Plugin'  => '/wordpress-plugins/', |
| [1173](#L1173) | 'Service' => '/wordpress-maintenance-services/', |
| [1174](#L1174) | 'Add-On'  => '/wordpress-add-ons/', |
| [1175](#L1175) | 'Bundle'  => '/wordpress-plugins-bundles/'), |
| [1176](#L1176) | 'tags'     => array( |
| [1177](#L1177) | 'SEO'        => '/wordpress-seo-content-plugins/', |
| [1178](#L1178) | 'Business'   => '/plugins-for-wordpress-business-websites/', |
| [1179](#L1179) | 'Publishing' => '/wordpress-plugins-for-content-publishing/', |
| [1180](#L1180) | 'Free'       => '/free-wordpress-plugins/', |
| [1181](#L1181) | 'eCommerce'  => '/wordpress-e-commerce-plugins/', |
| [1182](#L1182) | 'Marketing'  => '/wordpress-plugins-for-marketers/', |
| [1183](#L1183) | 'Admin'      => '/admin-wordpress-plugins/', |
| [1184](#L1184) | 'Community'  => '/wordpress-community-plugins/', |
| [1185](#L1185) | 'eLearning'  => '/wordpress-e-learning-and-lms-plugins/', |
| [1186](#L1186) | ) |
| [1187](#L1187) | ), |
| [1188](#L1188) | 'Magento'   => array( |
| [1189](#L1189) | 'category' => array( |
| [1190](#L1190) | 'All'       => '/magento-extensions-and-modules/', |
| [1191](#L1191) | 'Extension' => '/ecommerce-extensions-store/', |
| [1192](#L1192) | 'Service'   => '/support-and-maintenance-services-for-magento/', |
| [1193](#L1193) | 'Bundle'    => '/extensions-bundles-magento/'), |
| [1194](#L1194) | 'tags'     => array( |
| [1195](#L1195) | 'Customer'     => '/magento-customer-care-support/', |
| [1196](#L1196) | 'Integrations' => '/magento-third-party-integration-extensions/', |
| [1197](#L1197) | 'Marketing'    => '/magento-marketing-extensions/', |
| [1198](#L1198) | 'Marketplace'  => '/magento-marketplace-extensions/', |
| [1199](#L1199) | 'Marketplaces' => '/magento-marketplace-extensions/', |
| [1200](#L1200) | 'Utilities'    => '/magento-utilities-extensions/', |
| [1201](#L1201) | 'Magento-2'    => '/magento-2-extensions/', |
| [1202](#L1202) | '2.0'          => '/magento-2-extensions/' |
| [1203](#L1203) | ) |
| [1204](#L1204) | ) |
| [1205](#L1205) | ); |
| [1206](#L1206) |  |
| [1207](#L1207) | $link = null; |
| [1208](#L1208) | $types = array('category', 'tags'); |
| [1209](#L1209) | if (in\_array($type, $types)) { |
| [1210](#L1210) | $link = isset($categoryLinks[$group][$type][$name]) ? $categoryLinks[$group][$type][$name] : null; |
| [1211](#L1211) | } |
| [1212](#L1212) |  |
| [1213](#L1213) | if (!is\_string($link)) { |
| [1214](#L1214) | $link = ('Wordpress' === $group) ? '/wordpress-plugins-library/?' . $type . '=' . $name : '/magento-extensions-and-modules/?' . $type . '=' . $name; |
| [1215](#L1215) | } |
| [1216](#L1216) |  |
| [1217](#L1217) | $link = 'https://www.cminds.com' . $link; |
| [1218](#L1218) | return $link; |
| [1219](#L1219) | } |
| [1220](#L1220) |  |
| [1221](#L1221) | public function addAffiliateCode($link) { |
| [1222](#L1222) | if ($this->getOption('plugin-affiliate')) { |
| [1223](#L1223) | $link = add\_query\_arg(array('af' => $this->getOption('plugin-affiliate')), $link); |
| [1224](#L1224) | } |
| [1225](#L1225) | return esc\_url($link); |
| [1226](#L1226) | } |
| [1227](#L1227) |  |
| [1228](#L1228) | public function showGuide($atts = array()) { |
| [1229](#L1229) | global $cmindsPluginPackage; |
| [1230](#L1230) |  |
| [1231](#L1231) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1232](#L1232) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1233](#L1233) |  |
| [1234](#L1234) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-guide-hidden'; |
| [1235](#L1235) | $guideHide = filter\_input(INPUT\_GET, 'cminds\_guide\_hide'); |
| [1236](#L1236) | if ($guideHide) { |
| [1237](#L1237) | update\_option($optionName, 1); |
| [1238](#L1238) | } |
| [1239](#L1239) | $guideShow = filter\_input(INPUT\_GET, 'cminds\_guide\_show'); |
| [1240](#L1240) | if ($guideShow) { |
| [1241](#L1241) | update\_option($optionName, 0); |
| [1242](#L1242) | } |
| [1243](#L1243) | $guideHidden = get\_option($optionName, 0); |
| [1244](#L1244) |  |
| [1245](#L1245) | $showGuide = $currentPlugin->getOption('plugin-show-guide'); |
| [1246](#L1246) | if ($showGuide) : |
| [1247](#L1247) | ob\_start(); |
| [1248](#L1248) | ?><style type="text/css"> |
| [1249](#L1249) |  |
| [1250](#L1250) | div.cminds\_guide\_wrapper { |
| [1251](#L1251) | display: inline-block; |
| [1252](#L1252) | padding: 0em 0em 1em 0em; |
| [1253](#L1253) | background: #FFF; |
| [1254](#L1254) | margin: 0em 0em 0 0; |
| [1255](#L1255) | vertical-align: top; |
| [1256](#L1256) | } |
| [1257](#L1257) |  |
| [1258](#L1258) | div.cminds\_guide\_wrapper \* { |
| [1259](#L1259) | vertical-align: top; |
| [1260](#L1260) | } |
| [1261](#L1261) |  |
| [1262](#L1262) | .cminds\_guide{ |
| [1263](#L1263) | display: inline-block; |
| [1264](#L1264) | margin: 0em; |
| [1265](#L1265) | padding: 0em; |
| [1266](#L1266) | } |
| [1267](#L1267) |  |
| [1268](#L1268) | .cminds\_guide\_text{ |
| [1269](#L1269) | display: inline-block; |
| [1270](#L1270) | margin: 1em; |
| [1271](#L1271) | } |
| [1272](#L1272) |  |
| [1273](#L1273) | .cminds\_guide\_text > span{ |
| [1274](#L1274) | text-align: left; |
| [1275](#L1275) | display: block; |
| [1276](#L1276) | } |
| [1277](#L1277) |  |
| [1278](#L1278) | .clear, .clearfix{ |
| [1279](#L1279) | clear: both; |
| [1280](#L1280) | } |
| [1281](#L1281) |  |
| [1282](#L1282) | .cmclearfix{ |
| [1283](#L1283) | clear: both !important; |
| [1284](#L1284) | } |
| [1285](#L1285) |  |
| [1286](#L1286) | .cminds\_guide .guide\_header{ |
| [1287](#L1287) | font-size: 14pt; |
| [1288](#L1288) | font-weight: bold; |
| [1289](#L1289) | } |
| [1290](#L1290) |  |
| [1291](#L1291) | .cminds\_guide .guide\_text{ |
| [1292](#L1292) | display: inline-block; |
| [1293](#L1293) | width: 509px; |
| [1294](#L1294) | max-width: 100%; |
| [1295](#L1295) | margin-right: 40px; |
| [1296](#L1296) | } |
| [1297](#L1297) |  |
| [1298](#L1298) | .cminds\_guide .guide\_videos{ |
| [1299](#L1299) | display: inline-block; |
| [1300](#L1300) | max-width: 100%; |
| [1301](#L1301) | overflow: hidden; |
| [1302](#L1302) | } |
| [1303](#L1303) |  |
| [1304](#L1304) | .cminds\_guide .guide\_videos .guide\_videos\_inner{ |
| [1305](#L1305) | } |
| [1306](#L1306) |  |
| [1307](#L1307) | .cminds\_guide .guide\_videos > div{ |
| [1308](#L1308) | display: inline-block; |
| [1309](#L1309) | } |
| [1310](#L1310) | .cminds\_guide .guide\_videos > div.guide\_videos\_after{ |
| [1311](#L1311) | display: block; |
| [1312](#L1312) | margin: 10px 0 0 52px; |
| [1313](#L1313) | } |
| [1314](#L1314) | .prev\_video, |
| [1315](#L1315) | .next\_video { |
| [1316](#L1316) | margin-top: 85px; |
| [1317](#L1317) | } |
| [1318](#L1318) |  |
| [1319](#L1319) | .guide\_video\_title { |
| [1320](#L1320) | font-size: 13pt; |
| [1321](#L1321) | font-weight: bold; |
| [1322](#L1322) | margin: 0 0 10px 0px; |
| [1323](#L1323) | } |
| [1324](#L1324) |  |
| [1325](#L1325) | .cminds\_link.blue { |
| [1326](#L1326) | color: #fff; |
| [1327](#L1327) | border-color: #33ace7; |
| [1328](#L1328) | background: #66c1ed; |
| [1329](#L1329) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1330](#L1330) | box-shadow: 0 1px 0 #ccc; |
| [1331](#L1331) | display: inline-block; |
| [1332](#L1332) | text-decoration: none; |
| [1333](#L1333) | line-height: 26px; |
| [1334](#L1334) | height: 28px; |
| [1335](#L1335) | padding: 0 10px 1px; |
| [1336](#L1336) | cursor: pointer; |
| [1337](#L1337) | border-width: 1px; |
| [1338](#L1338) | border-style: solid; |
| [1339](#L1339) | -webkit-border-radius: 3px; |
| [1340](#L1340) | border-radius: 3px; |
| [1341](#L1341) | -webkit-box-sizing: border-box; |
| [1342](#L1342) | -moz-box-sizing: border-box; |
| [1343](#L1343) | box-sizing: border-box; |
| [1344](#L1344) | } |
| [1345](#L1345) |  |
| [1346](#L1346) | .cminds\_guide .guide\_videos .guide\_video{ |
| [1347](#L1347) | display: none; |
| [1348](#L1348) | } |
| [1349](#L1349) | .cminds\_guide .guide\_videos .guide\_video.active{ |
| [1350](#L1350) | display: inline-block; |
| [1351](#L1351) | } |
| [1352](#L1352) |  |
| [1353](#L1353) | .cminds\_guide .guide\_video\_content > a{ |
| [1354](#L1354) | display: block; |
| [1355](#L1355) | } |
| [1356](#L1356) | .install-guide-video {max-height: 160px;} |
| [1357](#L1357) | .upgrage-guide-video {max-height: 255px;} |
| [1358](#L1358) | </style> |
| [1359](#L1359) | <?php |
| [1360](#L1360) | if (!$guideHidden) : |
| [1361](#L1361) | ?> |
| [1362](#L1362) | <script> |
| [1363](#L1363) | jQuery(document).ready(function () { |
| [1364](#L1364) |  |
| [1365](#L1365) | jQuery.fn.visible = function () { |
| [1366](#L1366) | return this.css('visibility', 'visible'); |
| [1367](#L1367) | }; |
| [1368](#L1368) |  |
| [1369](#L1369) | jQuery.fn.invisible = function () { |
| [1370](#L1370) | return this.css('visibility', 'hidden'); |
| [1371](#L1371) | }; |
| [1372](#L1372) |  |
| [1373](#L1373) | jQuery.fn.visibilityToggle = function () { |
| [1374](#L1374) | return this.css('visibility', function (i, visibility) { |
| [1375](#L1375) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1376](#L1376) | }); |
| [1377](#L1377) | }; |
| [1378](#L1378) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1379](#L1379) | var prevVisible = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video').length; |
| [1380](#L1380) | var nextVisible = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video').length; |
| [1381](#L1381) |  |
| [1382](#L1382) | if (prevVisible) { |
| [1383](#L1383) | jQuery('.guide\_videos .prev\_video').visible(); |
| [1384](#L1384) | } else { |
| [1385](#L1385) | jQuery('.guide\_videos .prev\_video').invisible(); |
| [1386](#L1386) | } |
| [1387](#L1387) |  |
| [1388](#L1388) | if (nextVisible) { |
| [1389](#L1389) | jQuery('.guide\_videos .next\_video').visible(); |
| [1390](#L1390) | } else { |
| [1391](#L1391) | jQuery('.guide\_videos .next\_video').invisible(); |
| [1392](#L1392) | } |
| [1393](#L1393) | }; |
| [1394](#L1394) |  |
| [1395](#L1395) | cminds\_video\_prev\_next\_toggle(); |
| [1396](#L1396) |  |
| [1397](#L1397) | jQuery('.guide\_videos .prev\_video').on('click', function () { |
| [1398](#L1398) | var prevVideo = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video'); |
| [1399](#L1399) | if (prevVideo.length) |
| [1400](#L1400) | { |
| [1401](#L1401) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1402](#L1402) | prevVideo.addClass('active'); |
| [1403](#L1403) | } |
| [1404](#L1404) | cminds\_video\_prev\_next\_toggle(); |
| [1405](#L1405) | }); |
| [1406](#L1406) |  |
| [1407](#L1407) | jQuery('.guide\_videos .next\_video').on('click', function () { |
| [1408](#L1408) | var nextVideo = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video'); |
| [1409](#L1409) | if (nextVideo.length) |
| [1410](#L1410) | { |
| [1411](#L1411) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1412](#L1412) | nextVideo.addClass('active'); |
| [1413](#L1413) | } |
| [1414](#L1414) | cminds\_video\_prev\_next\_toggle(); |
| [1415](#L1415) | }); |
| [1416](#L1416) | }); |
| [1417](#L1417) | </script> |
| [1418](#L1418) | <div class="clear clearfix cmclearfix"></div> |
| [1419](#L1419) | <div class="cminds\_guide\_wrapper"> |
| [1420](#L1420) | <div class="cminds\_guide"> |
| [1421](#L1421) |  |
| [1422](#L1422) | <?php |
| [1423](#L1423) | $guideText = $currentPlugin->getOption('plugin-guide-text'); |
| [1424](#L1424) | if (!empty($guideText)) : |
| [1425](#L1425) | ?> |
| [1426](#L1426) | <div class="guide\_text"> |
| [1427](#L1427) | <div class="guide\_header"> |
| [1428](#L1428) | Initial Installation Guide |
| [1429](#L1429) | </div> |
| [1430](#L1430) | <?php echo $guideText; ?> |
| [1431](#L1431) | </div> |
| [1432](#L1432) | <?php endif; ?> |
| [1433](#L1433) |  |
| [1434](#L1434) | <?php |
| [1435](#L1435) | $videos = $currentPlugin->getOption('plugin-guide-videos'); |
| [1436](#L1436) | if (!empty($videos) && is\_array($videos)) : |
| [1437](#L1437) | ?> |
| [1438](#L1438) | <div class="guide\_videos"> |
| [1439](#L1439) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1440](#L1440) | <div class="guide\_videos\_inner"> |
| [1441](#L1441) | <?php foreach ($videos as $key => $video) : ?> |
| [1442](#L1442) | <div class="guide\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1443](#L1443) | <div class="guide\_video\_title"><?php echo $video['title']; ?></div> |
| [1444](#L1444) | <?php |
| [1445](#L1445) | // echo do\_shortcode('[video src="https://player.vimeo.com/video/' . $video['video\_id'] . '?portrait=0&responsive=0&maxwidth=290&maxheight=160&player\_id=player\_2" width="290" height="160" id="palyer\_2"][/video]'); |
| [1446](#L1446) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="290" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1447](#L1447) | //                                                                                                              echo wp\_video\_shortcode(array('src' =>"https://player.vimeo.com/video/" . $video['video\_id'] . "?portrait=0&responsive=1&maxheight=160&player\_id=player\_2", 'width' => 463, 'height' => 255, 'class' => "install-guide-video wp-video-shortcode", 'id' => "palyer\_2")); |
| [1448](#L1448) | ?> |
| [1449](#L1449) | </div> |
| [1450](#L1450) | <?php endforeach; ?> |
| [1451](#L1451) | </div> |
| [1452](#L1452) | <div class="next\_video cminds\_link blue" style="visibility: hidden">Next</div> |
| [1453](#L1453) | <div class="guide\_videos\_after"> |
| [1454](#L1454) | <a href="<?php echo $currentPlugin->getPageUrl('about'); ?>" class="cminds\_link blue" target="\_blank">Open Plugin User Guide</a> |
| [1455](#L1455) | </div> |
| [1456](#L1456) | </div> |
| [1457](#L1457) | <?php endif; ?> |
| [1458](#L1458) | </div> |
| [1459](#L1459) | </div> |
| [1460](#L1460) | <div class="clear clearfix cmclearfix"></div> |
| [1461](#L1461) | <?php else : ?> |
| [1462](#L1462) | <div class="cminds\_guide\_wrapper"> |
| [1463](#L1463) | <div> |
| [1464](#L1464) | <a class="cminds-guide-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_guide\_show' => 1), remove\_query\_arg('cminds\_guide\_hide'))); ?>">Show Installation Guide Box</a> |
| [1465](#L1465) | </div> |
| [1466](#L1466) | </div> |
| [1467](#L1467) | <div class="clear clearfix cmclearfix"></div> |
| [1468](#L1468) | <?php |
| [1469](#L1469) | endif; |
| [1470](#L1470) | ?> |
| [1471](#L1471) |  |
| [1472](#L1472) | <?php |
| [1473](#L1473) | $content = ob\_get\_clean(); |
| [1474](#L1474) | return $content; |
| [1475](#L1475) | endif; |
| [1476](#L1476) | } |
| [1477](#L1477) |  |
| [1478](#L1478) | public function showActivation($atts = array()) { |
| [1479](#L1479) | global $cmindsPluginPackage; |
| [1480](#L1480) |  |
| [1481](#L1481) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1482](#L1482) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1483](#L1483) |  |
| [1484](#L1484) | ob\_start(); |
| [1485](#L1485) | $isRegistered = $currentPlugin->isRegistered(); |
| [1486](#L1486) | $isSkipped = $currentPlugin->isSkipped(); |
| [1487](#L1487) | $isRegistered = false; |
| [1488](#L1488) | if (!$isRegistered) : |
| [1489](#L1489) | include\_once 'views/registration.php'; |
| [1490](#L1490) | else: |
| [1491](#L1491) | ?> |
| [1492](#L1492) | <br/> |
| [1493](#L1493) | <br/> |
| [1494](#L1494) | <?php |
| [1495](#L1495) | endif; |
| [1496](#L1496) | $content = ob\_get\_clean(); |
| [1497](#L1497) | return $content; |
| [1498](#L1498) | } |
| [1499](#L1499) |  |
| [1500](#L1500) | public function time\_to\_decimal($time) { |
| [1501](#L1501) | $timeArr = explode(':', $time); |
| [1502](#L1502) | $decTime = ($timeArr[0] \* 60) + ($timeArr[1]); |
| [1503](#L1503) | if (isset($timeArr[2])) { |
| [1504](#L1504) | $decTime += $timeArr[2] / 60; |
| [1505](#L1505) | } |
| [1506](#L1506) | return $decTime; |
| [1507](#L1507) | } |
| [1508](#L1508) |  |
| [1509](#L1509) | public function showUpgrade($atts = array()) { |
| [1510](#L1510) | global $cmindsPluginPackage; |
| [1511](#L1511) |  |
| [1512](#L1512) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1513](#L1513) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1514](#L1514) |  |
| [1515](#L1515) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-upgrade-hidden'; |
| [1516](#L1516) | $upgradeHide = filter\_input(INPUT\_GET, 'cminds\_upgrade\_hide'); |
| [1517](#L1517) | if ($upgradeHide) { |
| [1518](#L1518) | update\_option($optionName, 1); |
| [1519](#L1519) | } |
| [1520](#L1520) | $upgradeShow = filter\_input(INPUT\_GET, 'cminds\_upgrade\_show'); |
| [1521](#L1521) | if ($upgradeShow) { |
| [1522](#L1522) | update\_option($optionName, 0); |
| [1523](#L1523) | } |
| [1524](#L1524) | $upgradeHidden = get\_option($optionName, 0); |
| [1525](#L1525) | $isRegistered = $currentPlugin->isRegistered(); |
| [1526](#L1526) |  |
| [1527](#L1527) | $showUpgrade = $currentPlugin->getOption('plugin-show-upgrade', TRUE); |
| [1528](#L1528) | if ($showUpgrade) : |
| [1529](#L1529) | ob\_start(); |
| [1530](#L1530) | ?><style type="text/css"> |
| [1531](#L1531) |  |
| [1532](#L1532) | div.cminds\_upgrade\_wrapper { |
| [1533](#L1533) | display: block; |
| [1534](#L1534) | padding: 0em 0em 1em 0em; |
| [1535](#L1535) | background: #FFF; |
| [1536](#L1536) | margin: 0em 1em 0 0; |
| [1537](#L1537) | vertical-align: top; |
| [1538](#L1538) | } |
| [1539](#L1539) |  |
| [1540](#L1540) | div.cminds\_upgrade\_wrapper \* { |
| [1541](#L1541) | vertical-align: top; |
| [1542](#L1542) | } |
| [1543](#L1543) |  |
| [1544](#L1544) | .cminds\_upgrade{ |
| [1545](#L1545) | display: inline-block; |
| [1546](#L1546) | margin: 0em; |
| [1547](#L1547) | padding: 0em; |
| [1548](#L1548) | width: 100%; |
| [1549](#L1549) | } |
| [1550](#L1550) |  |
| [1551](#L1551) | .cminds\_upgrade\_text{ |
| [1552](#L1552) | display: inline-block; |
| [1553](#L1553) | margin: 1em; |
| [1554](#L1554) | } |
| [1555](#L1555) |  |
| [1556](#L1556) | .cminds\_upgrade\_text > span{ |
| [1557](#L1557) | text-align: left; |
| [1558](#L1558) | display: block; |
| [1559](#L1559) | } |
| [1560](#L1560) |  |
| [1561](#L1561) | .clear, .clearfix{ |
| [1562](#L1562) | clear: both; |
| [1563](#L1563) | } |
| [1564](#L1564) |  |
| [1565](#L1565) | .cmclearfix{ |
| [1566](#L1566) | clear: both !important; |
| [1567](#L1567) | } |
| [1568](#L1568) |  |
| [1569](#L1569) | .cminds\_upgrade .upgrade\_header{ |
| [1570](#L1570) | font-size: 14pt; |
| [1571](#L1571) | font-weight: bold; |
| [1572](#L1572) | } |
| [1573](#L1573) |  |
| [1574](#L1574) | .cminds\_upgrade .upgrade\_text{ |
| [1575](#L1575) | display: inline-block; |
| [1576](#L1576) | max-width: 45%; |
| [1577](#L1577) | margin-right: 40px; |
| [1578](#L1578) | } |
| [1579](#L1579) |  |
| [1580](#L1580) | .cminds\_upgrade .upgrade\_videos{ |
| [1581](#L1581) | display: inline-flex; |
| [1582](#L1582) | max-width: 50%; |
| [1583](#L1583) | min-width: 520px; |
| [1584](#L1584) | overflow: hidden; |
| [1585](#L1585) | } |
| [1586](#L1586) |  |
| [1587](#L1587) | .cminds\_upgrade .upgrade\_videos .upgrade\_videos\_inner{ |
| [1588](#L1588) | } |
| [1589](#L1589) |  |
| [1590](#L1590) | .cminds\_upgrade .upgrade\_videos > div{ |
| [1591](#L1591) | display: inline-block; |
| [1592](#L1592) | } |
| [1593](#L1593) | .cminds\_upgrade .upgrade\_videos > div.upgrade\_videos\_after{ |
| [1594](#L1594) | display: block; |
| [1595](#L1595) | margin: 10px 0 0 0px; |
| [1596](#L1596) | } |
| [1597](#L1597) | .prev\_video, |
| [1598](#L1598) | .next\_video { |
| [1599](#L1599) | margin-top: 15px; |
| [1600](#L1600) | } |
| [1601](#L1601) |  |
| [1602](#L1602) | .upgrade\_video\_title { |
| [1603](#L1603) | font-size: 13pt; |
| [1604](#L1604) | font-weight: bold; |
| [1605](#L1605) | margin: 0 0 10px 0px; |
| [1606](#L1606) | } |
| [1607](#L1607) |  |
| [1608](#L1608) | .cminds\_link.blue { |
| [1609](#L1609) | color: #fff; |
| [1610](#L1610) | border-color: #33ace7; |
| [1611](#L1611) | background: #66c1ed; |
| [1612](#L1612) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1613](#L1613) | box-shadow: 0 1px 0 #ccc; |
| [1614](#L1614) | display: inline-block; |
| [1615](#L1615) | text-decoration: none; |
| [1616](#L1616) | line-height: 26px; |
| [1617](#L1617) | height: 28px; |
| [1618](#L1618) | padding: 0 10px 1px; |
| [1619](#L1619) | cursor: pointer; |
| [1620](#L1620) | border-width: 1px; |
| [1621](#L1621) | border-style: solid; |
| [1622](#L1622) | -webkit-border-radius: 3px; |
| [1623](#L1623) | border-radius: 3px; |
| [1624](#L1624) | -webkit-box-sizing: border-box; |
| [1625](#L1625) | -moz-box-sizing: border-box; |
| [1626](#L1626) | box-sizing: border-box; |
| [1627](#L1627) | } |
| [1628](#L1628) |  |
| [1629](#L1629) | .cminds\_upgrade .upgrade\_videos .upgrade\_video{ |
| [1630](#L1630) | display: none; |
| [1631](#L1631) | } |
| [1632](#L1632) | .cminds\_upgrade .upgrade\_videos .upgrade\_video.active{ |
| [1633](#L1633) | display: inline-block; |
| [1634](#L1634) | } |
| [1635](#L1635) |  |
| [1636](#L1636) | .cminds\_upgrade .upgrade\_video\_content > a{ |
| [1637](#L1637) | display: block; |
| [1638](#L1638) | } |
| [1639](#L1639) | </style> |
| [1640](#L1640) | <?php |
| [1641](#L1641) | if (!$upgradeHidden) : |
| [1642](#L1642) | ?> |
| [1643](#L1643) | <script> |
| [1644](#L1644) | jQuery(document).ready(function () { |
| [1645](#L1645) |  |
| [1646](#L1646) | jQuery.fn.visible = function () { |
| [1647](#L1647) | return this.css('visibility', 'visible'); |
| [1648](#L1648) | }; |
| [1649](#L1649) |  |
| [1650](#L1650) | jQuery.fn.invisible = function () { |
| [1651](#L1651) | return this.css('visibility', 'hidden'); |
| [1652](#L1652) | }; |
| [1653](#L1653) |  |
| [1654](#L1654) | jQuery.fn.visibilityToggle = function () { |
| [1655](#L1655) | return this.css('visibility', function (i, visibility) { |
| [1656](#L1656) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1657](#L1657) | }); |
| [1658](#L1658) | }; |
| [1659](#L1659) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1660](#L1660) | var prevVisible = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video').length; |
| [1661](#L1661) | var nextVisible = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video').length; |
| [1662](#L1662) |  |
| [1663](#L1663) | if (prevVisible) { |
| [1664](#L1664) | jQuery('.upgrade\_videos .prev\_video').visible(); |
| [1665](#L1665) | } else { |
| [1666](#L1666) | jQuery('.upgrade\_videos .prev\_video').invisible(); |
| [1667](#L1667) | } |
| [1668](#L1668) |  |
| [1669](#L1669) | if (nextVisible) { |
| [1670](#L1670) | jQuery('.upgrade\_videos .next\_video').visible(); |
| [1671](#L1671) | } else { |
| [1672](#L1672) | jQuery('.upgrade\_videos .next\_video').invisible(); |
| [1673](#L1673) | } |
| [1674](#L1674) | }; |
| [1675](#L1675) |  |
| [1676](#L1676) | cminds\_video\_prev\_next\_toggle(); |
| [1677](#L1677) |  |
| [1678](#L1678) | jQuery('.upgrade\_videos .prev\_video').on('click', function () { |
| [1679](#L1679) | var prevVideo = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video'); |
| [1680](#L1680) | if (prevVideo.length) |
| [1681](#L1681) | { |
| [1682](#L1682) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1683](#L1683) | prevVideo.addClass('active'); |
| [1684](#L1684) | } |
| [1685](#L1685) | cminds\_video\_prev\_next\_toggle(); |
| [1686](#L1686) | }); |
| [1687](#L1687) |  |
| [1688](#L1688) | jQuery('.upgrade\_videos .next\_video').on('click', function () { |
| [1689](#L1689) | var nextVideo = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video'); |
| [1690](#L1690) | if (nextVideo.length) |
| [1691](#L1691) | { |
| [1692](#L1692) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1693](#L1693) | nextVideo.addClass('active'); |
| [1694](#L1694) | } |
| [1695](#L1695) | cminds\_video\_prev\_next\_toggle(); |
| [1696](#L1696) | }); |
| [1697](#L1697) | });</script> |
| [1698](#L1698) | <script type="text/javascript" src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>js/froogaloop.js"></script> |
| [1699](#L1699) | <script> |
| [1700](#L1700) | jQuery(document).ready(function ( ) { |
| [1701](#L1701) | // Message displayed when link is playing |
| [1702](#L1702) | var links = jQuery('.cm-video-bookmark-link'); |
| [1703](#L1703) | var playNotice = ' - <strong><i><spam style="color:darkgreen;">Now playing</span></i></strong>'; |
| [1704](#L1704) | // Function to hide all status messages |
| [1705](#L1705) | hidePlayNoticeAll = function ( ) { |
| [1706](#L1706) | jQuery('.cm-video-bookmark-link .link\_status').html(""); |
| [1707](#L1707) | } |
| [1708](#L1708) |  |
| [1709](#L1709) | //                             Load Vimeo API for the embedded video |
| [1710](#L1710) | var iframe\_player = jQuery('.upgrade\_video\_content iframe')[0]; |
| [1711](#L1711) | var frogaloopPlayer = $f(iframe\_player); |
| [1712](#L1712) | // Option listeners for pause, finish, and playProgress |
| [1713](#L1713) | // |
| [1714](#L1714) | // Note: If you want to use this, you must define the functions or links wont work |
| [1715](#L1715) | frogaloopPlayer.addEvent('ready', function ( ) { |
| [1716](#L1716) | frogaloopPlayer.addEvent('pause', onPause); |
| [1717](#L1717) | frogaloopPlayer.addEvent('finish', onFinish); |
| [1718](#L1718) | frogaloopPlayer.addEvent('playProgress', onPlayProgress); |
| [1719](#L1719) | }); |
| [1720](#L1720) |  |
| [1721](#L1721) | // Functions for each listener event |
| [1722](#L1722) | function onPause(id) { // When the video is paused, do this. |
| [1723](#L1723) | jQuery(".main\_status").html('Paused'); |
| [1724](#L1724) | } |
| [1725](#L1725) |  |
| [1726](#L1726) | function onFinish(id) { // When the video is finished, do this. |
| [1727](#L1727) | jQuery(".main\_status").html('Finished'); |
| [1728](#L1728) | } |
| [1729](#L1729) |  |
| [1730](#L1730) | function onPlayProgress(data, id) { // While the video is playing, do this. |
| [1731](#L1731) | jQuery(".main\_status").html('Playing - ' + data.seconds + 's played'); // data.percent can also be used. |
| [1732](#L1732) | } |
| [1733](#L1733) |  |
| [1734](#L1734) | // Function to control what happens when each lesson link is clicked |
| [1735](#L1735) | function setupLinks( ) { |
| [1736](#L1736) |  |
| [1737](#L1737) | links.on('click', function ( ) { |
| [1738](#L1738) | var track = jQuery(this).data('timestamp'); //Timestamp stored as a data attribute |
| [1739](#L1739) |  |
| [1740](#L1740) | hidePlayNoticeAll( ); // Hide all status messages before displaying (to prevent them from sticking) |
| [1741](#L1741) | if (true === jQuery(this).data('active')) { |
| [1742](#L1742) | frogaloopPlayer.api('pause'); //Play the video |
| [1743](#L1743) | jQuery(this).data('active', false); |
| [1744](#L1744) | } else { |
| [1745](#L1745) | frogaloopPlayer.api('play'); //Play the video |
| [1746](#L1746) | frogaloopPlayer.api('seekTo', track); //Seek to the number of seconds in the variable link\_1\_track |
| [1747](#L1747) | jQuery(this).find('.link\_status').html(playNotice); //Display status message (playNotice) within span with class link\_1\_status |
| [1748](#L1748) | jQuery(this).data('active', true); |
| [1749](#L1749) | } |
| [1750](#L1750) | }); |
| [1751](#L1751) | } |
| [1752](#L1752) | setupLinks( ); |
| [1753](#L1753) | });</script> |
| [1754](#L1754) | <div class="clear clearfix cmclearfix"></div> |
| [1755](#L1755) | <div class="cminds\_upgrade\_wrapper"> |
| [1756](#L1756) | <div class="cminds\_upgrade"> |
| [1757](#L1757) |  |
| [1758](#L1758) | <?php |
| [1759](#L1759) | $upgradeText = $currentPlugin->getOption('plugin-upgrade-text'); |
| [1760](#L1760) | if (!empty($upgradeText)) : |
| [1761](#L1761) | ?> |
| [1762](#L1762) | <div class="upgrade\_text"> |
| [1763](#L1763) | <div class="upgrade\_header"> |
| [1764](#L1764) | Why you Should Upgrade |
| [1765](#L1765) | </div> |
| [1766](#L1766) | <div style="display:block"> |
| [1767](#L1767) | <p><?php echo $upgradeText; ?></p> |
| [1768](#L1768) | <div class="links"> |
| [1769](#L1769) |  |
| [1770](#L1770) | <?php |
| [1771](#L1771) | $upgradel = $currentPlugin->getOption('plugin-upgrade-text-list'); |
| [1772](#L1772) | if (!empty($upgradel) && is\_array($upgradel)) : |
| [1773](#L1773) | foreach ($upgradel as $key => $listitem) : |
| [1774](#L1774) | $linknum = $key + 1; |
| [1775](#L1775) | echo $listitem['video\_time']; |
| [1776](#L1776) | if ('More' !== $listitem['video\_time']) : |
| [1777](#L1777) | ?> |
| [1778](#L1778) | - <a class="cm-video-bookmark-link link\_<?php echo $linknum; ?>" data-timestamp="<?php echo $this->time\_to\_decimal($listitem['video\_time']); ?>" href="javascript:void(0);" target="\_self"><?php echo $listitem['title']; ?><span class="link\_status"></span></a> |
| [1779](#L1779) | <?php else: ?> |
| [1780](#L1780) | - <span class="cm-video-bookmark bookmark\_<?php echo $linknum; ?>" style="color:green;"><?php echo $listitem['title']; ?></span> |
| [1781](#L1781) | <?php endif; ?> |
| [1782](#L1782) | <br/> |
| [1783](#L1783) | <?php endforeach; ?> |
| [1784](#L1784) | <?php endif ?> |
| [1785](#L1785) | </div> |
| [1786](#L1786) | </div> |
| [1787](#L1787) | </div> |
| [1788](#L1788) | <?php endif; ?> |
| [1789](#L1789) |  |
| [1790](#L1790) | <?php |
| [1791](#L1791) | $videos = $currentPlugin->getOption('plugin-upgrade-videos'); |
| [1792](#L1792) | if (!empty($videos) && is\_array($videos)) : |
| [1793](#L1793) | ?> |
| [1794](#L1794) | <div class="upgrade\_videos"> |
| [1795](#L1795) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1796](#L1796) | <div class="upgrade\_videos\_inner"> |
| [1797](#L1797) | <?php |
| [1798](#L1798) | foreach ($videos as $key => $video) : |
| [1799](#L1799) | if (!empty($video)) : |
| [1800](#L1800) | ?> |
| [1801](#L1801) |  |
| [1802](#L1802) | <div class="upgrade\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1803](#L1803) | <div class="upgrade\_video\_title"><?php echo $video['title']; ?></div> |
| [1804](#L1804) | <div class="upgrade\_video\_content"> |
| [1805](#L1805) | <?php |
| [1806](#L1806) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="390" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1807](#L1807) | ?> |
| [1808](#L1808) | <br /><br /><a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $currentPlugin->getOption('plugin-abbrev') . '\_pro')); ?>" class="button button-primary" style="background-color:green; width:220px;" title="Click to Buy PRO">Show me Upgrade Options >></a> |
| [1809](#L1809) |  |
| [1810](#L1810) | </div> |
| [1811](#L1811) | </div> |
| [1812](#L1812) | <?php |
| [1813](#L1813) | endif; |
| [1814](#L1814) | endforeach; |
| [1815](#L1815) | ?> |
| [1816](#L1816) | </div> |
| [1817](#L1817) | </div> |
| [1818](#L1818) | <?php endif; ?> |
| [1819](#L1819) | </div>                    </div> |
| [1820](#L1820) | <?php |
| [1821](#L1821) | echo $this->showAds($atts); |
| [1822](#L1822) | ?> |
| [1823](#L1823) | <div class="clear clearfix cmclearfix"></div> |
| [1824](#L1824) | <?php else : ?> |
| [1825](#L1825) | <div class="cminds\_upgrade\_wrapper"> |
| [1826](#L1826) | <div> |
| [1827](#L1827) | <a class="cminds-upgrade-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_upgrade\_show' => 1), remove\_query\_arg('cminds\_upgrade\_hide'))); ?>">Why you shoud have the Premium Edition>></a> |
| [1828](#L1828) | </div> |
| [1829](#L1829) | </div> |
| [1830](#L1830) | <div class="clear clearfix cmclearfix"></div> |
| [1831](#L1831) | <?php |
| [1832](#L1832) | endif; |
| [1833](#L1833) | ?> |
| [1834](#L1834) |  |
| [1835](#L1835) | <?php |
| [1836](#L1836) | $content = ob\_get\_clean(); |
| [1837](#L1837) | return $content; |
| [1838](#L1838) | endif; |
| [1839](#L1839) | } |
| [1840](#L1840) |  |
| [1841](#L1841) | protected function getDaysSinceLastRefresh($ads\_arr) { |
| [1842](#L1842) | if (!is\_array($ads\_arr) && empty($ads\_arr['refresh\_time'])) { |
| [1843](#L1843) | return null; |
| [1844](#L1844) | } |
| [1845](#L1845) |  |
| [1846](#L1846) | $now = time(); |
| [1847](#L1847) | $your\_date = intval($ads\_arr['refresh\_time']); |
| [1848](#L1848) | $datediff = $now - $your\_date; |
| [1849](#L1849) | $days = abs(floor($datediff / (60 \* 60 \* 24))); |
| [1850](#L1850) | return $days; |
| [1851](#L1851) | } |
| [1852](#L1852) |  |
| [1853](#L1853) | public function showAds($atts = array()) { |
| [1854](#L1854) | global $cmindsPluginPackage; |
| [1855](#L1855) |  |
| [1856](#L1856) | $atts = shortcode\_atts(array( |
| [1857](#L1857) | 'flat' => false, |
| [1858](#L1858) | 'id'   => null |
| [1859](#L1859) | ), $atts); |
| [1860](#L1860) |  |
| [1861](#L1861) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1862](#L1862) |  |
| [1863](#L1863) | $optionName = 'cminds-' . $this->getOption('plugin-short-slug') . '-ads-hidden'; |
| [1864](#L1864) | $adsHide = filter\_input(INPUT\_GET, 'cminds\_ad\_hide'); |
| [1865](#L1865) | if ($adsHide) { |
| [1866](#L1866) | update\_option($optionName, 1); |
| [1867](#L1867) | } |
| [1868](#L1868) | $adsShow = filter\_input(INPUT\_GET, 'cminds\_ad\_show'); |
| [1869](#L1869) | if ($adsShow) { |
| [1870](#L1870) | update\_option($optionName, 0); |
| [1871](#L1871) | } |
| [1872](#L1872) | $adsHidden = get\_option($optionName, 1); |
| [1873](#L1873) | $adsRefreshed = filter\_input(INPUT\_GET, 'cminds\_ad\_refresh'); |
| [1874](#L1874) | if ($adsRefreshed) { |
| [1875](#L1875) | delete\_transient('cminds\_free\_ads'); |
| [1876](#L1876) | } |
| [1877](#L1877) | $ads\_arr = $this->getAds(); |
| [1878](#L1878) | $ads = isset($ads\_arr['ads']) ? $ads\_arr['ads'] : array(); |
| [1879](#L1879) | $days\_since\_last\_refresh = $this->getDaysSinceLastRefresh($ads\_arr); |
| [1880](#L1880) |  |
| [1881](#L1881) | $isRegistered = $currentPlugin->isRegistered(); |
| [1882](#L1882) | /\* |
| [1883](#L1883) | \* Don't display if there's no server connection |
| [1884](#L1884) | \*/ |
| [1885](#L1885) | if (!$ads\_arr['connection']) { |
| [1886](#L1886) | return; |
| [1887](#L1887) | } |
| [1888](#L1888) | ob\_start(); |
| [1889](#L1889) | ?> |
| [1890](#L1890) |  |
| [1891](#L1891) | <style type="text/css"> |
| [1892](#L1892) |  |
| [1893](#L1893) | div.cminds\_ads\_wrapper { |
| [1894](#L1894) | display: inline-block; |
| [1895](#L1895) | padding: 1em; |
| [1896](#L1896) | background: #FFF; |
| [1897](#L1897) | border: solid 1px #E0E0E0; |
| [1898](#L1898) | margin: 1em 1em 0 0; |
| [1899](#L1899) | vertical-align: top; |
| [1900](#L1900) | } |
| [1901](#L1901) |  |
| [1902](#L1902) | .cminds\_ads\_internal\_wrapper { |
| [1903](#L1903) | display: inline-block; |
| [1904](#L1904) | overflow: auto; |
| [1905](#L1905) | max-height: 175px; |
| [1906](#L1906) | } |
| [1907](#L1907) |  |
| [1908](#L1908) | .cminds\_ad{ |
| [1909](#L1909) | display: block; |
| [1910](#L1910) | margin: 0.5em; |
| [1911](#L1911) | vertical-align: top; |
| [1912](#L1912) | } |
| [1913](#L1913) |  |
| [1914](#L1914) | span.ad\_code { |
| [1915](#L1915) | font-weight: bold; |
| [1916](#L1916) | } |
| [1917](#L1917) |  |
| [1918](#L1918) | .cminds\_ad.hidden{ |
| [1919](#L1919) | display: none; |
| [1920](#L1920) | } |
| [1921](#L1921) | .cminds\_ads\_wrapper.hidden{ |
| [1922](#L1922) | display: none; |
| [1923](#L1923) | } |
| [1924](#L1924) |  |
| [1925](#L1925) | .cminds\_ad\_text{ |
| [1926](#L1926) | display: block; |
| [1927](#L1927) | margin-bottom: 1em; |
| [1928](#L1928) | } |
| [1929](#L1929) | .cminds\_ad\_link{ |
| [1930](#L1930) | text-align: center; |
| [1931](#L1931) | } |
| [1932](#L1932) |  |
| [1933](#L1933) | span.ads\_refreshed{ |
| [1934](#L1934) | color: #259602; |
| [1935](#L1935) | font-weight: bold; |
| [1936](#L1936) | } |
| [1937](#L1937) |  |
| [1938](#L1938) | .cminds\_ad\_text > a:before { |
| [1939](#L1939) | content:"\A"; white-space:pre; |
| [1940](#L1940) | } |
| [1941](#L1941) |  |
| [1942](#L1942) | .cminds\_ad\_text > \*:after { |
| [1943](#L1943) | content:"\A"; white-space:pre; |
| [1944](#L1944) | } |
| [1945](#L1945) |  |
| [1946](#L1946) | .cminds\_no\_ads{ |
| [1947](#L1947) | margin: 1em 0; |
| [1948](#L1948) | font-size: 12pt; |
| [1949](#L1949) | font-weight: bold; |
| [1950](#L1950) | } |
| [1951](#L1951) |  |
| [1952](#L1952) | .cminds\_links{ |
| [1953](#L1953) | display: inline-block; |
| [1954](#L1954) | margin: 1em; |
| [1955](#L1955) | padding: 0; |
| [1956](#L1956) | max-width: 150px; |
| [1957](#L1957) | min-height: 90px; |
| [1958](#L1958) | vertical-align: top; |
| [1959](#L1959) | text-align: left; |
| [1960](#L1960) | } |
| [1961](#L1961) |  |
| [1962](#L1962) | .cminds\_links .cminds\_link{ |
| [1963](#L1963) | margin: 5px 0; |
| [1964](#L1964) | } |
| [1965](#L1965) |  |
| [1966](#L1966) | .cminds\_links .cminds\_link:first-child{ |
| [1967](#L1967) | margin-top: 0; |
| [1968](#L1968) | } |
| [1969](#L1969) |  |
| [1970](#L1970) | .cminds\_link{ |
| [1971](#L1971) | color: #555; |
| [1972](#L1972) | border-color: rgba(204,204,204,0.8); |
| [1973](#L1973) | background: #f7f7f7; |
| [1974](#L1974) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1975](#L1975) | box-shadow: 0 1px 0 #ccc; |
| [1976](#L1976) | display: inline-block; |
| [1977](#L1977) | text-decoration: none; |
| [1978](#L1978) | line-height: 26px; |
| [1979](#L1979) | height: 28px; |
| [1980](#L1980) | padding: 0 10px 1px; |
| [1981](#L1981) | cursor: pointer; |
| [1982](#L1982) | border-width: 1px; |
| [1983](#L1983) | border-style: solid; |
| [1984](#L1984) | -webkit-border-radius: 3px; |
| [1985](#L1985) | border-radius: 3px; |
| [1986](#L1986) | -webkit-box-sizing: border-box; |
| [1987](#L1987) | -moz-box-sizing: border-box; |
| [1988](#L1988) | box-sizing: border-box; |
| [1989](#L1989) | } |
| [1990](#L1990) |  |
| [1991](#L1991) | .cminds\_link:active { |
| [1992](#L1992) | background: #eee; |
| [1993](#L1993) | border-color: #999; |
| [1994](#L1994) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [1995](#L1995) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [1996](#L1996) | -webkit-transform: translateY(1px); |
| [1997](#L1997) | -ms-transform: translateY(1px); |
| [1998](#L1998) | transform: translateY(1px); |
| [1999](#L1999) | } |
| [2000](#L2000) |  |
| [2001](#L2001) | .cminds\_link:hover { |
| [2002](#L2002) | background: #eee; |
| [2003](#L2003) | border-color: #999; |
| [2004](#L2004) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2005](#L2005) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2006](#L2006) | -webkit-transform: translateY(1px); |
| [2007](#L2007) | -ms-transform: translateY(1px); |
| [2008](#L2008) | transform: translateY(1px); |
| [2009](#L2009) | } |
| [2010](#L2010) |  |
| [2011](#L2011) | .cminds\_link.blue{ |
| [2012](#L2012) | color: #fff; |
| [2013](#L2013) | border-color: #33ace7; |
| [2014](#L2014) | background: #66c1ed; |
| [2015](#L2015) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2016](#L2016) | box-shadow: 0 1px 0 #ccc; |
| [2017](#L2017) | display: inline-block; |
| [2018](#L2018) | text-decoration: none; |
| [2019](#L2019) | line-height: 26px; |
| [2020](#L2020) | height: 28px; |
| [2021](#L2021) | padding: 0 10px 1px; |
| [2022](#L2022) | cursor: pointer; |
| [2023](#L2023) | border-width: 1px; |
| [2024](#L2024) | border-style: solid; |
| [2025](#L2025) | -webkit-border-radius: 3px; |
| [2026](#L2026) | border-radius: 3px; |
| [2027](#L2027) | -webkit-box-sizing: border-box; |
| [2028](#L2028) | -moz-box-sizing: border-box; |
| [2029](#L2029) | box-sizing: border-box; |
| [2030](#L2030) |  |
| [2031](#L2031) | } |
| [2032](#L2032) |  |
| [2033](#L2033) | .cminds\_link.blue:active { |
| [2034](#L2034) | background: #0198e1; |
| [2035](#L2035) | border-color: #66c1ed; |
| [2036](#L2036) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2037](#L2037) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2038](#L2038) | -webkit-transform: translateY(1px); |
| [2039](#L2039) | -ms-transform: translateY(1px); |
| [2040](#L2040) | transform: translateY(1px); |
| [2041](#L2041) | } |
| [2042](#L2042) |  |
| [2043](#L2043) | .cminds\_link.blue:hover { |
| [2044](#L2044) | background: #005b87; |
| [2045](#L2045) | border-color: #0198e1; |
| [2046](#L2046) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2047](#L2047) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2048](#L2048) | -webkit-transform: translateY(1px); |
| [2049](#L2049) | -ms-transform: translateY(1px); |
| [2050](#L2050) | transform: translateY(1px); |
| [2051](#L2051) | } |
| [2052](#L2052) |  |
| [2053](#L2053) | .cminds\_link.orange{ |
| [2054](#L2054) | color: #fff; |
| [2055](#L2055) | border-color: #ffb752; |
| [2056](#L2056) | background: #ffb752; |
| [2057](#L2057) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2058](#L2058) | box-shadow: 0 1px 0 #ccc; |
| [2059](#L2059) | display: inline-block; |
| [2060](#L2060) | text-decoration: none; |
| [2061](#L2061) | line-height: 26px; |
| [2062](#L2062) | height: 28px; |
| [2063](#L2063) | padding: 0 10px 1px; |
| [2064](#L2064) | cursor: pointer; |
| [2065](#L2065) | border-width: 1px; |
| [2066](#L2066) | border-style: solid; |
| [2067](#L2067) | -webkit-border-radius: 3px; |
| [2068](#L2068) | border-radius: 3px; |
| [2069](#L2069) | -webkit-box-sizing: border-box; |
| [2070](#L2070) | -moz-box-sizing: border-box; |
| [2071](#L2071) | box-sizing: border-box; |
| [2072](#L2072) |  |
| [2073](#L2073) | } |
| [2074](#L2074) |  |
| [2075](#L2075) | .cminds\_link.orange:active { |
| [2076](#L2076) | background: #e5a449; |
| [2077](#L2077) | border-color: #ffc574; |
| [2078](#L2078) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2079](#L2079) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2080](#L2080) | -webkit-transform: translateY(1px); |
| [2081](#L2081) | -ms-transform: translateY(1px); |
| [2082](#L2082) | transform: translateY(1px); |
| [2083](#L2083) | } |
| [2084](#L2084) |  |
| [2085](#L2085) | .cminds\_link.orange:hover { |
| [2086](#L2086) | background: #e5a449; |
| [2087](#L2087) | border-color: #ffc574; |
| [2088](#L2088) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2089](#L2089) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2090](#L2090) | -webkit-transform: translateY(1px); |
| [2091](#L2091) | -ms-transform: translateY(1px); |
| [2092](#L2092) | transform: translateY(1px); |
| [2093](#L2093) | } |
| [2094](#L2094) |  |
| [2095](#L2095) | .cminds\_more{ |
| [2096](#L2096) | display: inline-block; |
| [2097](#L2097) | margin: 1em; |
| [2098](#L2098) | vertical-align: top; |
| [2099](#L2099) | font-size: 12pt; |
| [2100](#L2100) | line-height: 123px; |
| [2101](#L2101) | } |
| [2102](#L2102) |  |
| [2103](#L2103) | .cminds\_more > \*{ |
| [2104](#L2104) | cursor: pointer; |
| [2105](#L2105) | } |
| [2106](#L2106) |  |
| [2107](#L2107) | .cminds\_link.cminds\_more\_ads { |
| [2108](#L2108) | -moz-border-radius: 11px; |
| [2109](#L2109) | -webkit-border-radius: 11px; |
| [2110](#L2110) | border-radius: 11px; |
| [2111](#L2111) | border: 1px solid #66c1ed; |
| [2112](#L2112) | font-size: 23px; |
| [2113](#L2113) | padding: 8px 14px; |
| [2114](#L2114) | text-decoration: none; |
| [2115](#L2115) | line-height: 23px; |
| [2116](#L2116) | height: auto; |
| [2117](#L2117) | } |
| [2118](#L2118) |  |
| [2119](#L2119) | .clear, .clearfix{ |
| [2120](#L2120) | clear:both; |
| [2121](#L2121) | } |
| [2122](#L2122) |  |
| [2123](#L2123) | .cmclearfix{ |
| [2124](#L2124) | clear: both !important; |
| [2125](#L2125) | } |
| [2126](#L2126) | </style> |
| [2127](#L2127) |  |
| [2128](#L2128) | <?php if ($isRegistered) : ?> |
| [2129](#L2129) |  |
| [2130](#L2130) | <?php if (!$atts['flat']) : ?> |
| [2131](#L2131) |  |
| [2132](#L2132) | <script> |
| [2133](#L2133) | jQuery(document).ready(function ( ) { |
| [2134](#L2134) | jQuery('.cminds-ads-show-button').on('click', function (e) { |
| [2135](#L2135) | e.preventDefault( ); |
| [2136](#L2136) | jQuery('#cminds\_offers\_wrapper').toggleClass('hidden'); |
| [2137](#L2137) | jQuery('#cminds\_links\_wrapper').toggleClass('hidden'); |
| [2138](#L2138) | }); |
| [2139](#L2139) | });</script> |
| [2140](#L2140) |  |
| [2141](#L2141) | <h3>Special offers from CreativeMinds</h3> |
| [2142](#L2142) |  |
| [2143](#L2143) | <div class="cminds\_ads\_wrapper\_white"> |
| [2144](#L2144) | <a href="https://www.cminds.com/wordpress-plugins-library/seo-keyword-hound-wordpress/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/keywordhoundbanner.jpg"></a> |
| [2145](#L2145) | <span style="margin-left:20px;"> |
| [2146](#L2146) | <a class="" href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/99suite.png"></a> |
| [2147](#L2147) | </span> |
| [2148](#L2148) | </div> |
| [2149](#L2149) |  |
| [2150](#L2150) |  |
| [2151](#L2151) | <?php if (!empty($ads)) : ?> |
| [2152](#L2152) | <div class="cminds\_ads\_internal\_wrapper"> |
| [2153](#L2153) | <?php foreach ($ads as $index => $ad) : ?> |
| [2154](#L2154) | <div class="cminds\_ad"> |
| [2155](#L2155) | <?php |
| [2156](#L2156) | $dateUntil = date('jS F, Y', strtotime($ad['ad\_valid\_date'])); |
| [2157](#L2157) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code <span class="ad\_code">"%s"</span> valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2158](#L2158) | ?> |
| [2159](#L2159) | <span class="cminds\_ad\_link"> |
| [2160](#L2160) | <a class="cminds\_link blue" target="\_blank" href="<?php echo $this->addAffiliateCode($ad['ad\_url']); ?>">Redeem Offer</a> |
| [2161](#L2161) | </span> |
| [2162](#L2162) | </div> |
| [2163](#L2163) | <?php endforeach; ?> |
| [2164](#L2164) | </div> |
| [2165](#L2165) | <?php else: ?> |
| [2166](#L2166) | <div class="cminds\_no\_ads"> |
| [2167](#L2167) | <span class="cminds\_no\_ads\_text"> |
| [2168](#L2168) | Currently we have no special discounts. |
| [2169](#L2169) | </span> |
| [2170](#L2170) | </div> |
| [2171](#L2171) | <?php endif; ?> |
| [2172](#L2172) |  |
| [2173](#L2173) | <div> |
| [2174](#L2174) | <?php if ($adsRefreshed) : |
| [2175](#L2175) | ?> |
| [2176](#L2176) | <span class="ads\_refreshed"> |
| [2177](#L2177) | Discounts have been refreshed. |
| [2178](#L2178) | </span> |
| [2179](#L2179) | <?php else : ?> |
| [2180](#L2180) | You haven't refreshed the discounts for <?php echo $days\_since\_last\_refresh . ' ' . \_n('day', 'days', $days\_since\_last\_refresh); ?>. <a class="cminds-ads-refresh-button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_ad\_refresh' => 1))); ?>"><strong>Refresh now!</strong></a> |
| [2181](#L2181) | <?php endif; ?> |
| [2182](#L2182) | </div> |
| [2183](#L2183) | <?php else: ?> |
| [2184](#L2184) | <ul class="cminds\_ads\_list\_wrapper"> |
| [2185](#L2185) | <?php foreach ($ads as $index => $ad) : ?> |
| [2186](#L2186) | <li class="cminds\_ads\_list\_item">                                                           <?php |
| [2187](#L2187) | $dateUntil = date('Y-m-d', strtotime($ad['ad\_valid\_date'])); |
| [2188](#L2188) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code "%s" valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2189](#L2189) | ?> |
| [2190](#L2190) | </li> |
| [2191](#L2191) | <?php endforeach; ?> |
| [2192](#L2192) | </ul> |
| [2193](#L2193) | <?php endif; ?> |
| [2194](#L2194) | <?php else: ?> |
| [2195](#L2195) | <h3>Special Offers from CreativeMinds</h3> |
| [2196](#L2196) |  |
| [2197](#L2197) | <p> |
| [2198](#L2198) | <a href="javascript:void(0)" id="cminds-unskip">Complete <?php echo esc\_attr($currentPlugin->getOption('plugin-name')); ?> registration</a> and receive special offers |
| [2199](#L2199) | </p> |
| [2200](#L2200) | <?php endif; ?> |
| [2201](#L2201) | <div class="clear clearfix cmclearfix"></div> |
| [2202](#L2202) | <?php |
| [2203](#L2203) | $content = ob\_get\_clean(); |
| [2204](#L2204) | return $content; |
| [2205](#L2205) | } |
| [2206](#L2206) |  |
| [2207](#L2207) | public function getRegistrationFields() { |
| [2208](#L2208) | $fields = array( |
| [2209](#L2209) | 'product\_name'   => $this->getOption('plugin-name'), |
| [2210](#L2210) | 'remote\_url'     => get\_bloginfo('wpurl'), |
| [2211](#L2211) | 'remote\_ip'      => $\_SERVER['SERVER\_ADDR'], |
| [2212](#L2212) | 'remote\_country' => '', |
| [2213](#L2213) | 'remote\_city'    => '', |
| [2214](#L2214) | 'email'          => get\_bloginfo('admin\_email'), |
| [2215](#L2215) | 'hostname'       => get\_bloginfo('wpurl'), |
| [2216](#L2216) | 'username'       => '', |
| [2217](#L2217) | ); |
| [2218](#L2218) |  |
| [2219](#L2219) | $output = ''; |
| [2220](#L2220) |  |
| [2221](#L2221) | foreach ($fields as $key => $value) { |
| [2222](#L2222) | $output .= sprintf('<input type="hidden" name="%s" value="%s" />', $key, $value); |
| [2223](#L2223) | } |
| [2224](#L2224) |  |
| [2225](#L2225) | return $output; |
| [2226](#L2226) | } |
| [2227](#L2227) |  |
| [2228](#L2228) | public function isSkipped($id = null) { |
| [2229](#L2229) | global $cmindsPluginPackage; |
| [2230](#L2230) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2231](#L2231) | $isSkipped = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'); |
| [2232](#L2232) | return $isSkipped; |
| [2233](#L2233) | } |
| [2234](#L2234) |  |
| [2235](#L2235) | public function isRegistered($id = null) { |
| [2236](#L2236) | global $cmindsPluginPackage; |
| [2237](#L2237) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2238](#L2238) | $isRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'); |
| [2239](#L2239) | return $isRegistered; |
| [2240](#L2240) | } |
| [2241](#L2241) |  |
| [2242](#L2242) | public function wasRegistered($id = null) { |
| [2243](#L2243) | global $cmindsPluginPackage; |
| [2244](#L2244) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2245](#L2245) | $wasRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'); |
| [2246](#L2246) | return $wasRegistered; |
| [2247](#L2247) | } |
| [2248](#L2248) |  |
| [2249](#L2249) | public function setWasRegistered($id = null) { |
| [2250](#L2250) | global $cmindsPluginPackage; |
| [2251](#L2251) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2252](#L2252) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'; |
| [2253](#L2253) | $result = update\_option($optionName, 1); |
| [2254](#L2254) | return $result; |
| [2255](#L2255) | } |
| [2256](#L2256) |  |
| [2257](#L2257) | /\*\* |
| [2258](#L2258) | \* Function comminicates with our server to remove the user from our database (right to be forgotten) |
| [2259](#L2259) | \* @global array $cmindsPluginPackage |
| [2260](#L2260) | \* @param type $atts |
| [2261](#L2261) | \* @return type |
| [2262](#L2262) | \*/ |
| [2263](#L2263) | public function deregisterUser($atts = array()) { |
| [2264](#L2264) | global $cmindsPluginPackage; |
| [2265](#L2265) |  |
| [2266](#L2266) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2267](#L2267) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2268](#L2268) |  |
| [2269](#L2269) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2270](#L2270) | $post = filter\_input\_array(INPUT\_POST); |
| [2271](#L2271) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2272](#L2272) |  |
| [2273](#L2273) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2274](#L2274) | if ($nonceCheck) { |
| [2275](#L2275) |  |
| [2276](#L2276) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2277](#L2277) | return; |
| [2278](#L2278) | } |
| [2279](#L2279) |  |
| [2280](#L2280) | unset($post['cminds\_nonce']); |
| [2281](#L2281) | $jsonData = wp\_json\_encode(array($post)); |
| [2282](#L2282) |  |
| [2283](#L2283) | $args = array( |
| [2284](#L2284) | 'body' => array( |
| [2285](#L2285) | 'jsonData' => $jsonData |
| [2286](#L2286) | ) |
| [2287](#L2287) | ); |
| [2288](#L2288) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2289](#L2289) | $response = wp\_remote\_post($href, $args); |
| [2290](#L2290) | if (!is\_wp\_error($response)) { |
| [2291](#L2291) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2292](#L2292) | if ($result && 1 === $result['result']) { |
| [2293](#L2293) | update\_option($optionName, 0); |
| [2294](#L2294) | } |
| [2295](#L2295) | } else { |
| [2296](#L2296) | $args['sslverify'] = false; |
| [2297](#L2297) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2298](#L2298) | $response = wp\_remote\_post($href, $args); |
| [2299](#L2299) | if (!is\_wp\_error($response)) { |
| [2300](#L2300) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2301](#L2301) | if ($result && 1 === $result['result']) { |
| [2302](#L2302) | update\_option($optionName, 0); |
| [2303](#L2303) | } |
| [2304](#L2304) | } else { |
| [2305](#L2305) | $message = 'User has requested the deregistration: <br/><table>'; |
| [2306](#L2306) | foreach ($post as $key => $value) { |
| [2307](#L2307) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2308](#L2308) | continue; |
| [2309](#L2309) | } |
| [2310](#L2310) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2311](#L2311) | } |
| [2312](#L2312) | $message .= '</table>'; |
| [2313](#L2313) |  |
| [2314](#L2314) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2315](#L2315) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration Canceled', $message); |
| [2316](#L2316) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2317](#L2317) | } |
| [2318](#L2318) | } |
| [2319](#L2319) | update\_option($optionName, 0); |
| [2320](#L2320) | } |
| [2321](#L2321) | } |
| [2322](#L2322) | } |
| [2323](#L2323) |  |
| [2324](#L2324) | public function skipRegistration($atts = array()) { |
| [2325](#L2325) | global $cmindsPluginPackage; |
| [2326](#L2326) |  |
| [2327](#L2327) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2328](#L2328) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2329](#L2329) |  |
| [2330](#L2330) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2331](#L2331) | update\_option($optionName, 1); |
| [2332](#L2332) | } |
| [2333](#L2333) |  |
| [2334](#L2334) | public function unskipRegistration($atts = array()) { |
| [2335](#L2335) | global $cmindsPluginPackage; |
| [2336](#L2336) |  |
| [2337](#L2337) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2338](#L2338) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2339](#L2339) |  |
| [2340](#L2340) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2341](#L2341) | update\_option($optionName, 0); |
| [2342](#L2342) | } |
| [2343](#L2343) |  |
| [2344](#L2344) | /\*\* |
| [2345](#L2345) | \* Function communicates with our server to register user's e-mail in our database. |
| [2346](#L2346) | \* It's an optional step, user can easily skip it. We only collect e-mail and the url of the site. |
| [2347](#L2347) | \* User is being informed about the data being collected and the reason why it's collected. |
| [2348](#L2348) | \* @global array $cmindsPluginPackage |
| [2349](#L2349) | \* @param type $atts |
| [2350](#L2350) | \* @return type |
| [2351](#L2351) | \*/ |
| [2352](#L2352) | public function registerUser($atts = array()) { |
| [2353](#L2353) | global $cmindsPluginPackage; |
| [2354](#L2354) |  |
| [2355](#L2355) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2356](#L2356) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2357](#L2357) |  |
| [2358](#L2358) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2359](#L2359) | $post = filter\_input\_array(INPUT\_POST); |
| [2360](#L2360) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2361](#L2361) |  |
| [2362](#L2362) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2363](#L2363) | if ($nonceCheck) { |
| [2364](#L2364) |  |
| [2365](#L2365) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2366](#L2366) | return; |
| [2367](#L2367) | } |
| [2368](#L2368) |  |
| [2369](#L2369) | unset($post['cminds\_nonce']); |
| [2370](#L2370) | $jsonData = wp\_json\_encode(array($post)); |
| [2371](#L2371) |  |
| [2372](#L2372) | $args = array( |
| [2373](#L2373) | 'body' => array( |
| [2374](#L2374) | 'jsonData' => $jsonData |
| [2375](#L2375) | ) |
| [2376](#L2376) | ); |
| [2377](#L2377) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2378](#L2378) | $response = wp\_remote\_post($href, $args); |
| [2379](#L2379) | if (!is\_wp\_error($response)) { |
| [2380](#L2380) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2381](#L2381) | if ($result && 1 === $result['result']) { |
| [2382](#L2382) | update\_option($optionName, 1); |
| [2383](#L2383) | $currentPlugin->setWasRegistered(); |
| [2384](#L2384) | } |
| [2385](#L2385) | } else { |
| [2386](#L2386) | $args['sslverify'] = false; |
| [2387](#L2387) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2388](#L2388) | $response = wp\_remote\_post($href, $args); |
| [2389](#L2389) | if (!is\_wp\_error($response)) { |
| [2390](#L2390) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2391](#L2391) | if ($result && 1 === $result['result']) { |
| [2392](#L2392) | update\_option($optionName, 1); |
| [2393](#L2393) | $currentPlugin->setWasRegistered(); |
| [2394](#L2394) | } |
| [2395](#L2395) | } else { |
| [2396](#L2396) | $message = 'Registered fields: <br/><table>'; |
| [2397](#L2397) | foreach ($post as $key => $value) { |
| [2398](#L2398) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2399](#L2399) | continue; |
| [2400](#L2400) | } |
| [2401](#L2401) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2402](#L2402) | } |
| [2403](#L2403) | $message .= '</table>'; |
| [2404](#L2404) |  |
| [2405](#L2405) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2406](#L2406) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration', $message); |
| [2407](#L2407) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2408](#L2408) | } |
| [2409](#L2409) | } |
| [2410](#L2410) | } |
| [2411](#L2411) | } |
| [2412](#L2412) | } |
| [2413](#L2413) |  |
| [2414](#L2414) | public function showRegistration($atts = array()) { |
| [2415](#L2415) | global $cmindsPluginPackage; |
| [2416](#L2416) |  |
| [2417](#L2417) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2418](#L2418) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2419](#L2419) |  |
| [2420](#L2420) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-hidden'; |
| [2421](#L2421) | $registrationHide = filter\_input(INPUT\_GET, 'cminds\_registration\_hide'); |
| [2422](#L2422) | if ($registrationHide) { |
| [2423](#L2423) | update\_option($optionName, 1); |
| [2424](#L2424) | } |
| [2425](#L2425) | $registrationShow = filter\_input(INPUT\_GET, 'cminds\_registration\_show'); |
| [2426](#L2426) | if ($registrationShow) { |
| [2427](#L2427) | delete\_option($optionName); |
| [2428](#L2428) | } |
| [2429](#L2429) | $registrationHidden = get\_option($optionName); |
| [2430](#L2430) |  |
| [2431](#L2431) | $this->registerUser($atts); |
| [2432](#L2432) |  |
| [2433](#L2433) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2434](#L2434) | $isRegistered = $this->isRegistered(); |
| [2435](#L2435) |  |
| [2436](#L2436) | if ($isRegistered) : |
| [2437](#L2437) | return $this->showAds($atts); |
| [2438](#L2438) | else : |
| [2439](#L2439) | ob\_start(); |
| [2440](#L2440) | ?> |
| [2441](#L2441) | <style type="text/css"> |
| [2442](#L2442) |  |
| [2443](#L2443) | div.cminds\_registration\_wrapper { |
| [2444](#L2444) | display: inline-block; |
| [2445](#L2445) | padding: 1em; |
| [2446](#L2446) | background: #FFF; |
| [2447](#L2447) | margin: 1em 1em 0 0; |
| [2448](#L2448) | width: 1004px; |
| [2449](#L2449) | } |
| [2450](#L2450) |  |
| [2451](#L2451) | div.cminds\_registration\_wrapper \* { |
| [2452](#L2452) | vertical-align: top; |
| [2453](#L2453) | } |
| [2454](#L2454) |  |
| [2455](#L2455) | .cminds\_registration{ |
| [2456](#L2456) | display: inline-block; |
| [2457](#L2457) | margin: 1em; |
| [2458](#L2458) | padding: 1em 58px; |
| [2459](#L2459) | } |
| [2460](#L2460) |  |
| [2461](#L2461) | .cminds\_registration form{ |
| [2462](#L2462) | display: inline-block; |
| [2463](#L2463) | margin: 1em; |
| [2464](#L2464) | } |
| [2465](#L2465) | .cminds\_registration form .no-registration{ |
| [2466](#L2466) | margin: 5px 0 0; |
| [2467](#L2467) | text-align: center; |
| [2468](#L2468) | } |
| [2469](#L2469) |  |
| [2470](#L2470) | .cminds\_registration form input[type="submit"]{ |
| [2471](#L2471) | font-size: 16pt; |
| [2472](#L2472) | padding: 7px; |
| [2473](#L2473) | height: auto; |
| [2474](#L2474) | } |
| [2475](#L2475) |  |
| [2476](#L2476) | .cminds\_registration\_text{ |
| [2477](#L2477) | display: inline-block; |
| [2478](#L2478) | margin: 1em; |
| [2479](#L2479) | } |
| [2480](#L2480) |  |
| [2481](#L2481) | .cminds\_registration\_text > span{ |
| [2482](#L2482) | text-align: left; |
| [2483](#L2483) | display: block; |
| [2484](#L2484) | } |
| [2485](#L2485) |  |
| [2486](#L2486) | .cminds\_registration\_text .row\_1{ |
| [2487](#L2487) | font-size: 12pt; |
| [2488](#L2488) | padding-bottom: 5px; |
| [2489](#L2489) | } |
| [2490](#L2490) | .cminds\_registration\_text .row\_2{ |
| [2491](#L2491) | font-size: 10pt; |
| [2492](#L2492) | } |
| [2493](#L2493) |  |
| [2494](#L2494) | .cminds\_link{ |
| [2495](#L2495) | color: #555; |
| [2496](#L2496) | border-color: rgba(204,204,204,0.8); |
| [2497](#L2497) | background: #f7f7f7; |
| [2498](#L2498) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2499](#L2499) | box-shadow: 0 1px 0 #ccc; |
| [2500](#L2500) | display: inline-block; |
| [2501](#L2501) | text-decoration: none; |
| [2502](#L2502) | line-height: 26px; |
| [2503](#L2503) | height: 28px; |
| [2504](#L2504) | padding: 0 10px 1px; |
| [2505](#L2505) | cursor: pointer; |
| [2506](#L2506) | border-width: 1px; |
| [2507](#L2507) | border-style: solid; |
| [2508](#L2508) | -webkit-border-radius: 3px; |
| [2509](#L2509) | border-radius: 3px; |
| [2510](#L2510) | -webkit-box-sizing: border-box; |
| [2511](#L2511) | -moz-box-sizing: border-box; |
| [2512](#L2512) | box-sizing: border-box; |
| [2513](#L2513) | } |
| [2514](#L2514) |  |
| [2515](#L2515) | .cminds\_link:active { |
| [2516](#L2516) | background: #eee; |
| [2517](#L2517) | border-color: #999; |
| [2518](#L2518) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2519](#L2519) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2520](#L2520) | -webkit-transform: translateY(1px); |
| [2521](#L2521) | -ms-transform: translateY(1px); |
| [2522](#L2522) | transform: translateY(1px); |
| [2523](#L2523) | } |
| [2524](#L2524) |  |
| [2525](#L2525) | .cminds\_link:hover { |
| [2526](#L2526) | background: #eee; |
| [2527](#L2527) | border-color: #999; |
| [2528](#L2528) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2529](#L2529) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2530](#L2530) | -webkit-transform: translateY(1px); |
| [2531](#L2531) | -ms-transform: translateY(1px); |
| [2532](#L2532) | transform: translateY(1px); |
| [2533](#L2533) | } |
| [2534](#L2534) |  |
| [2535](#L2535) | .cminds\_link.blue{ |
| [2536](#L2536) | color: #fff; |
| [2537](#L2537) | border-color: #33ace7; |
| [2538](#L2538) | background: #66c1ed; |
| [2539](#L2539) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2540](#L2540) | box-shadow: 0 1px 0 #ccc; |
| [2541](#L2541) | display: inline-block; |
| [2542](#L2542) | text-decoration: none; |
| [2543](#L2543) | line-height: 26px; |
| [2544](#L2544) | height: 28px; |
| [2545](#L2545) | padding: 0 10px 1px; |
| [2546](#L2546) | cursor: pointer; |
| [2547](#L2547) | border-width: 1px; |
| [2548](#L2548) | border-style: solid; |
| [2549](#L2549) | -webkit-border-radius: 3px; |
| [2550](#L2550) | border-radius: 3px; |
| [2551](#L2551) | -webkit-box-sizing: border-box; |
| [2552](#L2552) | -moz-box-sizing: border-box; |
| [2553](#L2553) | box-sizing: border-box; |
| [2554](#L2554) |  |
| [2555](#L2555) | } |
| [2556](#L2556) |  |
| [2557](#L2557) | .cminds\_link.blue:active { |
| [2558](#L2558) | background: #0198e1; |
| [2559](#L2559) | border-color: #66c1ed; |
| [2560](#L2560) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2561](#L2561) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2562](#L2562) | -webkit-transform: translateY(1px); |
| [2563](#L2563) | -ms-transform: translateY(1px); |
| [2564](#L2564) | transform: translateY(1px); |
| [2565](#L2565) | } |
| [2566](#L2566) |  |
| [2567](#L2567) | .cminds\_link.blue:hover { |
| [2568](#L2568) | background: #005b87; |
| [2569](#L2569) | border-color: #0198e1; |
| [2570](#L2570) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2571](#L2571) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2572](#L2572) | -webkit-transform: translateY(1px); |
| [2573](#L2573) | -ms-transform: translateY(1px); |
| [2574](#L2574) | transform: translateY(1px); |
| [2575](#L2575) | } |
| [2576](#L2576) |  |
| [2577](#L2577) | .cminds\_link.orange{ |
| [2578](#L2578) | color: #fff; |
| [2579](#L2579) | border-color: #ffb752; |
| [2580](#L2580) | background: #ffb752; |
| [2581](#L2581) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2582](#L2582) | box-shadow: 0 1px 0 #ccc; |
| [2583](#L2583) | display: inline-block; |
| [2584](#L2584) | text-decoration: none; |
| [2585](#L2585) | line-height: 26px; |
| [2586](#L2586) | height: 28px; |
| [2587](#L2587) | padding: 0 10px 1px; |
| [2588](#L2588) | cursor: pointer; |
| [2589](#L2589) | border-width: 1px; |
| [2590](#L2590) | border-style: solid; |
| [2591](#L2591) | -webkit-border-radius: 3px; |
| [2592](#L2592) | border-radius: 3px; |
| [2593](#L2593) | -webkit-box-sizing: border-box; |
| [2594](#L2594) | -moz-box-sizing: border-box; |
| [2595](#L2595) | box-sizing: border-box; |
| [2596](#L2596) |  |
| [2597](#L2597) | } |
| [2598](#L2598) |  |
| [2599](#L2599) | .cminds\_link.orange:active { |
| [2600](#L2600) | background: #e5a449; |
| [2601](#L2601) | border-color: #ffc574; |
| [2602](#L2602) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2603](#L2603) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2604](#L2604) | -webkit-transform: translateY(1px); |
| [2605](#L2605) | -ms-transform: translateY(1px); |
| [2606](#L2606) | transform: translateY(1px); |
| [2607](#L2607) | } |
| [2608](#L2608) |  |
| [2609](#L2609) | .cminds\_link.orange:hover { |
| [2610](#L2610) | background: #e5a449; |
| [2611](#L2611) | border-color: #ffc574; |
| [2612](#L2612) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2613](#L2613) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2614](#L2614) | -webkit-transform: translateY(1px); |
| [2615](#L2615) | -ms-transform: translateY(1px); |
| [2616](#L2616) | transform: translateY(1px); |
| [2617](#L2617) | } |
| [2618](#L2618) |  |
| [2619](#L2619) | .clear, .clearfix{ |
| [2620](#L2620) | clear:both; |
| [2621](#L2621) | } |
| [2622](#L2622) | .cmclearfix{ |
| [2623](#L2623) | clear:both !important; |
| [2624](#L2624) | } |
| [2625](#L2625) |  |
| [2626](#L2626) | </style> |
| [2627](#L2627) |  |
| [2628](#L2628) | <?php if (!$registrationHidden) : ?> |
| [2629](#L2629) |  |
| [2630](#L2630) | <div class="cminds\_registration\_wrapper"> |
| [2631](#L2631) | <div class="cminds\_registration"> |
| [2632](#L2632) | <table><tr> |
| [2633](#L2633) | <td> |
| [2634](#L2634) | <form method="post" action=""> |
| [2635](#L2635) | <?php |
| [2636](#L2636) | wp\_nonce\_field('cminds\_register\_free', 'cminds\_nonce'); |
| [2637](#L2637) | echo $currentPlugin->getRegistrationFields(); |
| [2638](#L2638) | ?> |
| [2639](#L2639) | <input class="button button-primary" style="background-color:green;" type="submit" value="Register Your Copy" /> |
| [2640](#L2640) | <div class="no-registration"> |
| [2641](#L2641) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_hide' => 1), remove\_query\_arg('cminds\_registration\_show'))); ?>">I don't want to register now</a> |
| [2642](#L2642) | </div> |
| [2643](#L2643) | </form> |
| [2644](#L2644) | </td> |
| [2645](#L2645) | <td> |
| [2646](#L2646) | <div class="cminds\_registration\_text"> |
| [2647](#L2647) | <span class="row\_1"> |
| [2648](#L2648) | Once registered, you will receive updates and special offers. |
| [2649](#L2649) | </span> |
| [2650](#L2650) | <span class="row\_2"> |
| [2651](#L2651) | <p>We will only send once, your administrator's e-mail and site URL to CreativeMinds server.<br /> No additional information will be ever collected or sent.</p> |
| [2652](#L2652) | </span> |
| [2653](#L2653) | </td> |
| [2654](#L2654) | </tr> |
| [2655](#L2655) | </table> |
| [2656](#L2656) | </div> |
| [2657](#L2657) | </div> |
| [2658](#L2658) | </div> |
| [2659](#L2659) | <?php else : ?> |
| [2660](#L2660) | <div class="cminds\_registration\_wrapper"> |
| [2661](#L2661) | <div> |
| [2662](#L2662) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_show' => 1), remove\_query\_arg('cminds\_registration\_hide'))); ?>">Show registration box</a> |
| [2663](#L2663) | <a href="<?php echo $this->getStoreUrl(); ?>" class="cminds\_link orange" target="\_blank">View all CreativeMidns Plugins</a> |
| [2664](#L2664) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Bundle')); ?>" class="cminds\_link blue" target="\_blank">View Bundles</a> |
| [2665](#L2665) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Add-On')); ?>" class="cminds\_link blue" target="\_blank">View Add-Ons</a> |
| [2666](#L2666) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Service')); ?>" class="cminds\_link blue" target="\_blank">View Services</a> |
| [2667](#L2667) | </div> |
| [2668](#L2668) | </div> |
| [2669](#L2669) | <?php |
| [2670](#L2670) | endif; |
| [2671](#L2671) | echo $this->showUpgrade($atts); |
| [2672](#L2672) | ?> |
| [2673](#L2673) | <div class="clear clearfix cmclearfix"></div> |
| [2674](#L2674) | <?php |
| [2675](#L2675) | $content = ob\_get\_clean(); |
| [2676](#L2676) | return $content; |
| [2677](#L2677) | endif; |
| [2678](#L2678) | } |
| [2679](#L2679) |  |
| [2680](#L2680) | /\*\* |
| [2681](#L2681) | \* Displays the horizontal navigation bar |
| [2682](#L2682) | \* @global string $submenu |
| [2683](#L2683) | \* @global type $plugin\_page |
| [2684](#L2684) | \*/ |
| [2685](#L2685) | protected function showNav() { |
| [2686](#L2686) |  |
| [2687](#L2687) | global $self, $plugin\_page, $typenow, $submenu; |
| [2688](#L2688) |  |
| [2689](#L2689) | $submenus = array(); |
| [2690](#L2690) | $menuItem = $this->getOption('plugin-menu-item'); |
| [2691](#L2691) | $pluginAbbrev = $this->getOption('plugin-abbrev'); |
| [2692](#L2692) |  |
| [2693](#L2693) | ob\_start(); |
| [2694](#L2694) |  |
| [2695](#L2695) | if (isset($submenu[$menuItem])) { |
| [2696](#L2696) |  |
| [2697](#L2697) | $thisMenu = $submenu[$menuItem]; |
| [2698](#L2698) |  |
| [2699](#L2699) | foreach ($thisMenu as $sub\_item) { |
| [2700](#L2700) |  |
| [2701](#L2701) | $slug = $sub\_item[2]; |
| [2702](#L2702) |  |
| [2703](#L2703) | // Handle current for post\_type=post|page|foo pages, which won't match $self. |
| [2704](#L2704) | $self\_type = !empty($typenow) ? $self . '?post\_type=' . $typenow : 'nothing'; |
| [2705](#L2705) |  |
| [2706](#L2706) | $isCurrent = FALSE; |
| [2707](#L2707) |  |
| [2708](#L2708) | $subpageUrl = get\_admin\_url('', 'admin.php?page=' . $slug); |
| [2709](#L2709) |  |
| [2710](#L2710) | if ((!isset($plugin\_page) && $self == $slug) || ( isset($plugin\_page) && $plugin\_page == $slug && ( $menuItem == $self\_type || $menuItem == $self || file\_exists($menuItem) === false ))) { |
| [2711](#L2711) | $isCurrent = TRUE; |
| [2712](#L2712) | } |
| [2713](#L2713) |  |
| [2714](#L2714) | $url = ( strpos($slug, '.php') !== false || strpos($slug, 'http://') !== false || strpos($slug, 'https://') !== false ) ? $slug : $subpageUrl; |
| [2715](#L2715) |  |
| [2716](#L2716) | $isExternal = ( $slug === $url ) ? TRUE : FALSE; |
| [2717](#L2717) |  |
| [2718](#L2718) | /\* |
| [2719](#L2719) | \* Don't show on the Upgrade page itself |
| [2720](#L2720) | \*/ |
| [2721](#L2721) | if (!empty($\_GET['page']) && $\_GET['page'] == $pluginAbbrev . '\_pro' && $slug == $pluginAbbrev . '\_pro') { |
| [2722](#L2722) | continue; |
| [2723](#L2723) | } |
| [2724](#L2724) |  |
| [2725](#L2725) | $submenus[] = array( |
| [2726](#L2726) | 'link'     => $url, |
| [2727](#L2727) | 'title'    => $sub\_item[0], |
| [2728](#L2728) | 'current'  => $isCurrent, |
| [2729](#L2729) | 'external' => $isExternal |
| [2730](#L2730) | ); |
| [2731](#L2731) | } |
| [2732](#L2732) | ?> |
| [2733](#L2733) | <div id="cmhandfsl\_admin\_nav"> |
| [2734](#L2734) | <ul class="subsubsub"> |
| [2735](#L2735) | <?php foreach ($submenus as $menu): ?> |
| [2736](#L2736) |  |
| [2737](#L2737) | <li><a href="<?php echo esc\_attr($menu['link']); ?>" <?php echo ( $menu['current'] ) ? 'class="current"' : ''; ?> <?php |
| [2738](#L2738) | if ($menu['external']) { |
| [2739](#L2739) | echo 'target="\_blank"'; |
| [2740](#L2740) | } |
| [2741](#L2741) | ?>><?php echo esc\_html($menu['title']); ?> |
| [2742](#L2742) | </a></li> |
| [2743](#L2743) | <?php endforeach; ?> |
| [2744](#L2744) | </ul> |
| [2745](#L2745) | <br class="clear" /> |
| [2746](#L2746) | </div> |
| [2747](#L2747) | <?php |
| [2748](#L2748) | } |
| [2749](#L2749) |  |
| [2750](#L2750) | $nav = ob\_get\_contents(); |
| [2751](#L2751) | ob\_end\_clean(); |
| [2752](#L2752) | return $nav; |
| [2753](#L2753) | } |
| [2754](#L2754) |  |
| [2755](#L2755) | public function cminds\_compatibility\_check($plaintext = false) { |
| [2756](#L2756) | global $wp\_version; |
| [2757](#L2757) | $upload\_max = ini\_get('upload\_max\_filesize') ? ini\_get('upload\_max\_filesize') : 'N/A'; |
| [2758](#L2758) | $post\_max = ini\_get('post\_max\_size') ? ini\_get('post\_max\_size') : 'N/A'; |
| [2759](#L2759) | $memory\_limit = ini\_get('memory\_limit') ? ini\_get('memory\_limit') : 'N/A'; |
| [2760](#L2760) | $allow\_url\_fopen = ini\_get('allow\_url\_fopen') ? ini\_get('allow\_url\_fopen') : 'N/A'; |
| [2761](#L2761) | $max\_execution\_time = ini\_get('max\_execution\_time') !== FALSE ? ini\_get('max\_execution\_time') : 'N/A'; |
| [2762](#L2762) | $cURL = function\_exists('curl\_version') ? 'On' : 'Off'; |
| [2763](#L2763) | $mb\_support = function\_exists('mb\_strtolower') ? 'On' : 'Off'; |
| [2764](#L2764) | $intl\_support = extension\_loaded('intl') ? 'On' : 'Off'; |
| [2765](#L2765) | $iconv\_support = extension\_loaded('iconv') ? 'On' : 'Off'; |
| [2766](#L2766) |  |
| [2767](#L2767) | $permalink\_structure = get\_option('permalink\_structure'); |
| [2768](#L2768) | $permalinksurl = self\_admin\_url('options-permalink.php'); |
| [2769](#L2769) |  |
| [2770](#L2770) | $content = ''; |
| [2771](#L2771) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2772](#L2772) | ob\_start(); |
| [2773](#L2773) | if (!$plaintext): |
| [2774](#L2774) | ?> |
| [2775](#L2775) | <span class="description" style=""> |
| [2776](#L2776) | The information in this table is useful to check if the plugin might have some incompabilities with you server. |
| [2777](#L2777) | </span> |
| [2778](#L2778) | <table class="form-table server-info-table"> |
| [2779](#L2779) | <tr> |
| [2780](#L2780) | <td>Package Version</td> |
| [2781](#L2781) | <td><?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?></td> |
| [2782](#L2782) | <td><span>OK</span></td> |
| [2783](#L2783) | </tr> |
| [2784](#L2784) | <tr> |
| [2785](#L2785) | <td>WordPress Version</td> |
| [2786](#L2786) | <td><?php echo $wp\_version; ?></td> |
| [2787](#L2787) | <td><?php if (version\_compare($wp\_version, '3.3.0', '<')): ?><strong>The minimum supported version of WordPress is 3.3</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2788](#L2788) | </tr> |
| [2789](#L2789) | <tr> |
| [2790](#L2790) | <td>Permalinks enabled</td> |
| [2791](#L2791) | <td><?php echo ($permalink\_structure) ? 'Yes' : 'No' ?></td> |
| [2792](#L2792) | <td><?php if (empty($permalink\_structure)): ?><strong>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a></strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2793](#L2793) | </tr> |
| [2794](#L2794) | <tr> |
| [2795](#L2795) | <td>PHP Version</td> |
| [2796](#L2796) | <td><?php echo phpversion(); ?></td> |
| [2797](#L2797) | <td><?php if (version\_compare(phpversion(), '5.3.0', '<')): ?><strong>Recommended 5.3 or higher</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2798](#L2798) | </tr> |
| [2799](#L2799) | <tr> |
| [2800](#L2800) | <td>mbstring support</td> |
| [2801](#L2801) | <td><?php echo $mb\_support; ?></td> |
| [2802](#L2802) | <td><?php if ($mb\_support == 'Off'): ?> |
| [2803](#L2803) | <strong>"mbstring" library is required for plugin to work.</strong> |
| [2804](#L2804) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2805](#L2805) | </tr> |
| [2806](#L2806) | <tr> |
| [2807](#L2807) | <td>intl support</td> |
| [2808](#L2808) | <td><?php echo $intl\_support; ?></td> |
| [2809](#L2809) | <td><?php if ($intl\_support == 'Off'): ?> |
| [2810](#L2810) | <strong>"intl" library is required for proper sorting of accented (non-ASCII) characters.</strong> |
| [2811](#L2811) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2812](#L2812) | </tr> |
| [2813](#L2813) | <tr> |
| [2814](#L2814) | <td>iconv support</td> |
| [2815](#L2815) | <td><?php echo $iconv\_support; ?></td> |
| [2816](#L2816) | <td><?php if ($iconv\_support == 'Off'): ?> |
| [2817](#L2817) | <strong>"iconv" library is required for converting non-UTF-8 characters.</strong> |
| [2818](#L2818) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2819](#L2819) | </tr> |
| [2820](#L2820) | <tr> |
| [2821](#L2821) | <td>PHP Memory Limit</td> |
| [2822](#L2822) | <td><?php echo $memory\_limit; ?></td> |
| [2823](#L2823) | <td><?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2824](#L2824) | <strong>This value can be too low for a site with big glossary.</strong> |
| [2825](#L2825) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2826](#L2826) | </tr> |
| [2827](#L2827) | <tr> |
| [2828](#L2828) | <td>PHP Max Upload Size</td> |
| [2829](#L2829) | <td><?php echo $upload\_max; ?></td> |
| [2830](#L2830) | <td><?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2831](#L2831) | <strong>This value can be too low to import large files.</strong> |
| [2832](#L2832) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2833](#L2833) | </tr> |
| [2834](#L2834) | <tr> |
| [2835](#L2835) | <td>PHP Max Post Size</td> |
| [2836](#L2836) | <td><?php echo $post\_max; ?></td> |
| [2837](#L2837) | <td><?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2838](#L2838) | <strong>This value can be too low to import large files.</strong> |
| [2839](#L2839) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2840](#L2840) | </tr> |
| [2841](#L2841) | <tr> |
| [2842](#L2842) | <td>PHP Max Execution Time </td> |
| [2843](#L2843) | <td><?php echo $max\_execution\_time; ?></td> |
| [2844](#L2844) | <td><?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2845](#L2845) | <strong>This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit.</strong> |
| [2846](#L2846) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2847](#L2847) | </tr> |
| [2848](#L2848) | <tr> |
| [2849](#L2849) | <td>PHP cURL</td> |
| [2850](#L2850) | <td><?php echo $cURL; ?></td> |
| [2851](#L2851) | <td><?php if ($cURL == 'Off'): ?> |
| [2852](#L2852) | <strong>cURL library is required to check if remote audio file exists.</strong> |
| [2853](#L2853) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2854](#L2854) | </tr> |
| [2855](#L2855) | <tr> |
| [2856](#L2856) | <td>PHP allow\_url\_fopen</td> |
| [2857](#L2857) | <td><?php echo $allow\_url\_fopen; ?></td> |
| [2858](#L2858) | <td><?php if ($allow\_url\_fopen == '0'): ?> |
| [2859](#L2859) | <strong>allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API.</strong> |
| [2860](#L2860) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2861](#L2861) | </tr> |
| [2862](#L2862) | </table> |
| [2863](#L2863) | <?php |
| [2864](#L2864) | else: |
| [2865](#L2865) | ?> |
| [2866](#L2866) | Package Version         <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?>    OK |
| [2867](#L2867) |  |
| [2868](#L2868) | WordPress Version               <?php echo $wp\_version; ?> |
| [2869](#L2869) | <?php if (version\_compare($wp\_version, '3.3.0', '<')): ?>The minimum supported version of WordPress is 3.3<?php else: ?>OK<?php endif; ?> |
| [2870](#L2870) |  |
| [2871](#L2871) | Permalinks enabled              <?php echo ($permalink\_structure) ? 'Yes' : 'No' ?> |
| [2872](#L2872) | <?php if (empty($permalink\_structure)): ?>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a><?php else: ?>OK<?php endif; ?> |
| [2873](#L2873) |  |
| [2874](#L2874) | PHP Version             <?php echo phpversion(); ?> |
| [2875](#L2875) | <?php if (version\_compare(phpversion(), '5.3.0', '<')): ?>Recommended 5.3 or higher<?php else: ?>OK<?php endif; ?> |
| [2876](#L2876) |  |
| [2877](#L2877) | mbstring support                <?php echo $mb\_support; ?> |
| [2878](#L2878) | <?php if ($mb\_support == 'Off'): ?> |
| [2879](#L2879) | "mbstring" library is required for plugin to work. |
| [2880](#L2880) | <?php else: ?>OK<?php endif; ?> |
| [2881](#L2881) |  |
| [2882](#L2882) | intl support            <?php echo $intl\_support; ?> |
| [2883](#L2883) | <?php if ($intl\_support == 'Off'): ?> |
| [2884](#L2884) | "intl" library is required for proper sorting of accented characters on Glossary Index page. |
| [2885](#L2885) | <?php else: ?>OK<?php endif; ?> |
| [2886](#L2886) |  |
| [2887](#L2887) | PHP Memory Limit                <?php echo $memory\_limit; ?> |
| [2888](#L2888) | <?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2889](#L2889) | This value can be too low for a site with big glossary. |
| [2890](#L2890) | <?php else: ?>OK<?php endif; ?> |
| [2891](#L2891) |  |
| [2892](#L2892) | PHP Max Upload Size             <?php echo $upload\_max; ?> |
| [2893](#L2893) | <?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2894](#L2894) | This value can be too low to import large files. |
| [2895](#L2895) | <?php else: ?>OK<?php endif; ?> |
| [2896](#L2896) |  |
| [2897](#L2897) | PHP Max Post Size               <?php echo $post\_max; ?> |
| [2898](#L2898) | <?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2899](#L2899) | This value can be too low to import large files. |
| [2900](#L2900) | <?php else: ?>OK<?php endif; ?> |
| [2901](#L2901) |  |
| [2902](#L2902) | PHP Max Execution Time          <?php echo $max\_execution\_time; ?> |
| [2903](#L2903) | <?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2904](#L2904) | This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit. |
| [2905](#L2905) | <?php else: ?>OK<?php endif; ?> |
| [2906](#L2906) |  |
| [2907](#L2907) | PHP cURL                <?php echo $cURL; ?> |
| [2908](#L2908) | <?php if ($cURL == 'Off'): ?> |
| [2909](#L2909) | cURL library is required to check if remote audio file exists. |
| [2910](#L2910) | <?php else: ?>OK<?php endif; ?> |
| [2911](#L2911) |  |
| [2912](#L2912) | PHP allow\_url\_fopen             <?php echo $allow\_url\_fopen; ?> |
| [2913](#L2913) | <?php if ($allow\_url\_fopen == '0'): ?> |
| [2914](#L2914) | allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API. |
| [2915](#L2915) | <?php else: ?>OK<?php endif; ?> |
| [2916](#L2916) |  |
| [2917](#L2917) | <?php |
| [2918](#L2918) | endif; |
| [2919](#L2919) | $content .= ob\_get\_clean(); |
| [2920](#L2920) | return $content; |
| [2921](#L2921) | } |
| [2922](#L2922) |  |
| [2923](#L2923) | /\*\* |
| [2924](#L2924) | \* System info |
| [2925](#L2925) | \* |
| [2926](#L2926) | \* Shows the system info panel which contains version data and debug info. |
| [2927](#L2927) | \* The data for the system info is generated by the Browser class. |
| [2928](#L2928) | \* |
| [2929](#L2929) | \* @since 1.4 |
| [2930](#L2930) | \* @global $wpdb |
| [2931](#L2931) | \* @global object $wpdb Used to query the database using the WordPress |
| [2932](#L2932) | \*   Database API |
| [2933](#L2933) | \* @return void |
| [2934](#L2934) | \*/ |
| [2935](#L2935) | public function cminds\_system\_info() { |
| [2936](#L2936) | ?> |
| [2937](#L2937) | <div class=""> |
| [2938](#L2938) | <h2><?php \_\_('System Information', 'cminds-package'); ?></h2><br/> |
| [2939](#L2939) | <form action="<?php echo esc\_url(admin\_url('admin.php?page=cmtt\_licensing')); ?>" method="post" dir="ltr"> |
| [2940](#L2940) | <p class="submit"> |
| [2941](#L2941) | <?php wp\_nonce\_field( 'system\_information\_download\_form\_nonce', 'system\_information\_download\_form\_nonce' ); ?> |
| [2942](#L2942) | <input type="hidden" name="cminds\_action" value="download\_sysinfo" /> |
| [2943](#L2943) | <?php submit\_button('Download system information file', 'primary', 'cminds-download-sysinfo', false); ?> |
| [2944](#L2944) | </p> |
| [2945](#L2945) | <textarea class="cminds\_system\_info\_area" readonly="readonly" onclick="this.focus( ); |
| [2946](#L2946) | this.select( )" id="system-info-textarea" name="cminds-sysinfo" title="<?php \_e('To copy the system info, click below then press Ctrl + C (PC) or Cmd + C (Mac).', 'edd'); ?>"> |
| [2947](#L2947) | <?php $this->cminds\_system\_info\_content(); ?> |
| [2948](#L2948) | </textarea> |
| [2949](#L2949) | </form> |
| [2950](#L2950) | </div> |
| [2951](#L2951) | <?php |
| [2952](#L2952) | } |
| [2953](#L2953) |  |
| [2954](#L2954) | /\*\* |
| [2955](#L2955) | \* Generates the System Info Download File |
| [2956](#L2956) | \* |
| [2957](#L2957) | \* @since 1.4 |
| [2958](#L2958) | \* @return void |
| [2959](#L2959) | \*/ |
| [2960](#L2960) | public function cminds\_system\_info\_content() { |
| [2961](#L2961) | global $wpdb; |
| [2962](#L2962) |  |
| [2963](#L2963) | if (get\_bloginfo('version') < '3.4') { |
| [2964](#L2964) | $theme\_data = get\_theme\_data(get\_stylesheet\_directory() . '/style.css'); |
| [2965](#L2965) | $theme = $theme\_data['Name'] . ' ' . $theme\_data['Version']; |
| [2966](#L2966) | } else { |
| [2967](#L2967) | $theme\_data = wp\_get\_theme(); |
| [2968](#L2968) | $theme = $theme\_data->Name . ' ' . $theme\_data->Version; |
| [2969](#L2969) | } |
| [2970](#L2970) |  |
| [2971](#L2971) | // Try to identifty the hosting provider |
| [2972](#L2972) | $host = false; |
| [2973](#L2973) | if (defined('WPE\_APIKEY')) { |
| [2974](#L2974) | $host = 'WP Engine'; |
| [2975](#L2975) | } elseif (defined('PAGELYBIN')) { |
| [2976](#L2976) | $host = 'Pagely'; |
| [2977](#L2977) | } |
| [2978](#L2978) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2979](#L2979) | ?> |
| [2980](#L2980) | ### Begin System Info ### |
| [2981](#L2981) |  |
| [2982](#L2982) | ## Please include this information when posting support requests ## |
| [2983](#L2983) |  |
| [2984](#L2984) | <?php do\_action('cminds\_system\_info\_before'); ?> |
| [2985](#L2985) |  |
| [2986](#L2986) | Package Version:                <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?> |
| [2987](#L2987) |  |
| [2988](#L2988) | Multisite:                <?php echo is\_multisite() ? 'Yes' . "\n" : 'No' . "\n" ?> |
| [2989](#L2989) |  |
| [2990](#L2990) | SITE\_URL:                 <?php echo site\_url() . "\n"; ?> |
| [2991](#L2991) | HOME\_URL:                 <?php echo home\_url() . "\n"; ?> |
| [2992](#L2992) |  |
| [2993](#L2993) | WordPress Version:        <?php echo get\_bloginfo('version') . "\n"; ?> |
| [2994](#L2994) | Permalink Structure:      <?php echo get\_option('permalink\_structure') . "\n"; ?> |
| [2995](#L2995) | Active Theme:             <?php echo $theme . "\n"; ?> |
| [2996](#L2996) | <?php if ($host) : ?> |
| [2997](#L2997) | Host:                     <?php echo $host . "\n"; ?> |
| [2998](#L2998) | <?php endif; ?> |
| [2999](#L2999) |  |
| [3000](#L3000) | Registered Post Stati:    <?php echo implode(', ', get\_post\_stati()) . "\n\n"; ?> |
| [3001](#L3001) |  |
| [3002](#L3002) | PHP Version:              <?php echo PHP\_VERSION . "\n"; ?> |
| [3003](#L3003) | MySQL Version:            <?php echo (function\_exists('mysqli\_get\_server\_info')) ? mysqli\_get\_server\_info($wpdb->dbh) . "\n" : 'N/A' . "\n"; ?> |
| [3004](#L3004) | Web Server Info:          <?php echo $\_SERVER['SERVER\_SOFTWARE'] . "\n"; ?> |
| [3005](#L3005) |  |
| [3006](#L3006) | WordPress Memory Limit:   <?php echo WP\_MEMORY\_LIMIT ?><?php echo "\n"; ?> |
| [3007](#L3007) | PHP Memory Limit:         <?php echo ini\_get('memory\_limit') . "\n"; ?> |
| [3008](#L3008) | PHP Upload Max Size:      <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3009](#L3009) | PHP Post Max Size:        <?php echo ini\_get('post\_max\_size') . "\n"; ?> |
| [3010](#L3010) | PHP Upload Max Filesize:  <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3011](#L3011) | PHP Time Limit:           <?php echo ini\_get('max\_execution\_time') . "\n"; ?> |
| [3012](#L3012) | PHP Max Input Vars:       <?php echo ini\_get('max\_input\_vars') . "\n"; ?> |
| [3013](#L3013) | PHP Arg Separator:        <?php echo ini\_get('arg\_separator.output') . "\n"; ?> |
| [3014](#L3014) | PHP Allow URL File Open:  <?php echo ini\_get('allow\_url\_fopen') ? "Yes" : "No\n"; ?> |
| [3015](#L3015) |  |
| [3016](#L3016) | WP\_DEBUG:                 <?php echo defined('WP\_DEBUG') ? WP\_DEBUG ? 'Enabled' . "\n" : 'Disabled' . "\n" : 'Not set' . "\n" ?> |
| [3017](#L3017) |  |
| [3018](#L3018) | WP Table Prefix:          <?php |
| [3019](#L3019) | echo "Length: " . strlen($wpdb->prefix); |
| [3020](#L3020) | echo " Status:"; |
| [3021](#L3021) | if (strlen($wpdb->prefix) > 16) { |
| [3022](#L3022) | echo " ERROR: Too Long"; |
| [3023](#L3023) | } else { |
| [3024](#L3024) | echo " Acceptable"; |
| [3025](#L3025) | } echo "\n"; |
| [3026](#L3026) | ?> |
| [3027](#L3027) |  |
| [3028](#L3028) | Show On Front:            <?php echo get\_option('show\_on\_front') . "\n" ?> |
| [3029](#L3029) | Page On Front:            <?php |
| [3030](#L3030) | $id = get\_option('page\_on\_front'); |
| [3031](#L3031) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3032](#L3032) | ?> |
| [3033](#L3033) | Page For Posts:           <?php |
| [3034](#L3034) | $id = get\_option('page\_for\_posts'); |
| [3035](#L3035) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3036](#L3036) | ?> |
| [3037](#L3037) |  |
| [3038](#L3038) | <?php |
| [3039](#L3039) | $request['cmd'] = '\_notify-validate'; |
| [3040](#L3040) |  |
| [3041](#L3041) | $params = array( |
| [3042](#L3042) | 'sslverify'  => false, |
| [3043](#L3043) | 'timeout'    => 60, |
| [3044](#L3044) | 'user-agent' => 'Cminds/' . $this->getOption('plugin-version'), |
| [3045](#L3045) | 'body'       => $request |
| [3046](#L3046) | ); |
| [3047](#L3047) |  |
| [3048](#L3048) | $response = wp\_remote\_post('https://www.paypal.com/cgi-bin/webscr', $params); |
| [3049](#L3049) |  |
| [3050](#L3050) | if (!is\_wp\_error($response) && $response['response']['code'] >= 200 && $response['response']['code'] < 300) { |
| [3051](#L3051) | $WP\_REMOTE\_POST = 'wp\_remote\_post() works' . "\n"; |
| [3052](#L3052) | } else { |
| [3053](#L3053) | $WP\_REMOTE\_POST = 'wp\_remote\_post() does not work' . "\n"; |
| [3054](#L3054) | } |
| [3055](#L3055) | ?> |
| [3056](#L3056) | WP Remote Post:           <?php echo $WP\_REMOTE\_POST; ?> |
| [3057](#L3057) |  |
| [3058](#L3058) | Session:                  <?php echo isset($\_SESSION) ? 'Enabled' : 'Disabled'; ?><?php echo "\n"; ?> |
| [3059](#L3059) | Session Name:             <?php echo esc\_html(ini\_get('session.name')); ?><?php echo "\n"; ?> |
| [3060](#L3060) | Cookie Path:              <?php echo esc\_html(ini\_get('session.cookie\_path')); ?><?php echo "\n"; ?> |
| [3061](#L3061) | Save Path:                <?php echo esc\_html(ini\_get('session.save\_path')); ?><?php echo "\n"; ?> |
| [3062](#L3062) | Use Cookies:              <?php echo ini\_get('session.use\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3063](#L3063) | Use Only Cookies:         <?php echo ini\_get('session.use\_only\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3064](#L3064) |  |
| [3065](#L3065) | DISPLAY ERRORS:           <?php echo ( ini\_get('display\_errors') ) ? 'On (' . ini\_get('display\_errors') . ')' : 'N/A'; ?><?php echo "\n"; ?> |
| [3066](#L3066) | FSOCKOPEN:                <?php echo ( function\_exists('fsockopen') ) ? 'Your server supports fsockopen.' : 'Your server does not support fsockopen.'; ?><?php echo "\n"; ?> |
| [3067](#L3067) | cURL:                     <?php echo ( function\_exists('curl\_init') ) ? 'Your server supports cURL.' : 'Your server does not support cURL.'; ?><?php echo "\n"; ?> |
| [3068](#L3068) | SOAP Client:              <?php echo ( class\_exists('SoapClient') ) ? 'Your server has the SOAP Client enabled.' : 'Your server does not have the SOAP Client enabled.'; ?><?php echo "\n"; ?> |
| [3069](#L3069) | SUHOSIN:                  <?php echo ( extension\_loaded('suhosin') ) ? 'Your server has SUHOSIN installed.' : 'Your server does not have SUHOSIN installed.'; ?><?php echo "\n"; ?> |
| [3070](#L3070) |  |
| [3071](#L3071) | ##COMPATIBILITY |
| [3072](#L3072) |  |
| [3073](#L3073) | <?php echo $this->cminds\_compatibility\_check(true); ?> |
| [3074](#L3074) |  |
| [3075](#L3075) | ##ACTIVE PLUGINS: |
| [3076](#L3076) |  |
| [3077](#L3077) | <?php |
| [3078](#L3078) | $plugins = get\_plugins(); |
| [3079](#L3079) | $active\_plugins = get\_option('active\_plugins', array()); |
| [3080](#L3080) |  |
| [3081](#L3081) | foreach ($plugins as $plugin\_path => $plugin) { |
| [3082](#L3082) | // If the plugin isn't active, don't show it. |
| [3083](#L3083) | if (!in\_array($plugin\_path, $active\_plugins)) |
| [3084](#L3084) | continue; |
| [3085](#L3085) |  |
| [3086](#L3086) | echo $plugin['Name'] . ': ' . $plugin['Version'] . "\n"; |
| [3087](#L3087) | } |
| [3088](#L3088) |  |
| [3089](#L3089) | if (is\_multisite()) : |
| [3090](#L3090) | ?> |
| [3091](#L3091) |  |
| [3092](#L3092) | NETWORK ACTIVE PLUGINS: |
| [3093](#L3093) |  |
| [3094](#L3094) | <?php |
| [3095](#L3095) | $plugins = wp\_get\_active\_network\_plugins(); |
| [3096](#L3096) | $active\_plugins = get\_site\_option('active\_sitewide\_plugins', array()); |
| [3097](#L3097) |  |
| [3098](#L3098) | foreach ($plugins as $plugin\_path) { |
| [3099](#L3099) | $plugin\_base = plugin\_basename($plugin\_path); |
| [3100](#L3100) |  |
| [3101](#L3101) | // If the plugin isn't active, don't show it. |
| [3102](#L3102) | if (!array\_key\_exists($plugin\_base, $active\_plugins)) |
| [3103](#L3103) | continue; |
| [3104](#L3104) |  |
| [3105](#L3105) | $plugin = get\_plugin\_data($plugin\_path); |
| [3106](#L3106) |  |
| [3107](#L3107) | echo $plugin['Name'] . ' :' . $plugin['Version'] . "\n"; |
| [3108](#L3108) | } |
| [3109](#L3109) |  |
| [3110](#L3110) | endif; |
| [3111](#L3111) | do\_action('cminds\_system\_info\_after'); |
| [3112](#L3112) | ?> |
| [3113](#L3113) | ### End System Info ### |
| [3114](#L3114) | <?php |
| [3115](#L3115) | } |
| [3116](#L3116) |  |
| [3117](#L3117) | /\*\* |
| [3118](#L3118) | \* Generates the System Info Download File |
| [3119](#L3119) | \* |
| [3120](#L3120) | \* @since 1.4 |
| [3121](#L3121) | \* @return void |
| [3122](#L3122) | \*/ |
| [3123](#L3123) | public function cminds\_generate\_sysinfo\_download() { |
| [3124](#L3124) | if ( wp\_verify\_nonce( $\_POST['system\_information\_download\_form\_nonce'], 'system\_information\_download\_form\_nonce' ) ) { |
| [3125](#L3125) | nocache\_headers(); |
| [3126](#L3126) |  |
| [3127](#L3127) | header("Content-type: text/plain"); |
| [3128](#L3128) | header('Content-Disposition: attachment; filename="cminds-system-info.txt"'); |
| [3129](#L3129) |  |
| [3130](#L3130) | echo wp\_strip\_all\_tags($\_POST['cminds-sysinfo']); |
| [3131](#L3131) | die(); |
| [3132](#L3132) | } |
| [3133](#L3133) | } |
| [3134](#L3134) |  |
| [3135](#L3135) | public function getOption($key, $default = NULL) { |
| [3136](#L3136) | $value = isset($this->config[$key]) ? $this->config[$key] : $default; |
| [3137](#L3137) | return $value; |
| [3138](#L3138) | } |
| [3139](#L3139) |  |
| [3140](#L3140) | public function getPageUrl($pageBase = 'licensing') { |
| [3141](#L3141) | $pluginMenuPageBase = $this->pluginMenu; |
| [3142](#L3142) | $abbrev = $this->getOption('plugin-is-addon') ? $this->getOption('plugin-parent-abbrev') : $this->getOption('plugin-abbrev'); |
| [3143](#L3143) | if (empty($abbrev)) { |
| [3144](#L3144) | /\* |
| [3145](#L3145) | \* Abbrev not set for the plugin try to guess |
| [3146](#L3146) | \*/ |
| [3147](#L3147) | $abbrev = substr($this->getOption('plugin-abbrev'), 0, -1); |
| [3148](#L3148) | } |
| [3149](#L3149) | $page = $abbrev . '\_' . $pageBase; |
| [3150](#L3150) | if (FALSE === strpos($pluginMenuPageBase, '.php')) { |
| [3151](#L3151) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url('admin.php'))); |
| [3152](#L3152) | } else { |
| [3153](#L3153) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url($pluginMenuPageBase))); |
| [3154](#L3154) | } |
| [3155](#L3155) | return $pageUrl; |
| [3156](#L3156) | } |
| [3157](#L3157) |  |
| [3158](#L3158) | /\*\* |
| [3159](#L3159) | \* Converts the Apache memory values to number of bytes ini\_get('upload\_max\_filesize') or ini\_get('post\_max\_size') |
| [3160](#L3160) | \* @param type $str |
| [3161](#L3161) | \* @return type |
| [3162](#L3162) | \*/ |
| [3163](#L3163) | public static function cminds\_units2bytes($str) { |
| [3164](#L3164) | $units = array('B', 'K', 'M', 'G', 'T'); |
| [3165](#L3165) | $unit = preg\_replace('/[0-9]/', '', $str); |
| [3166](#L3166) | $unitFactor = array\_search(strtoupper($unit), $units); |
| [3167](#L3167) | if ($unitFactor !== false) { |
| [3168](#L3168) | return preg\_replace('/[a-z]/i', '', $str) \* pow(2, 10 \* $unitFactor); |
| [3169](#L3169) | } |
| [3170](#L3170) | } |
| [3171](#L3171) |  |
| [3172](#L3172) | public static function cminds\_set\_content\_type() { |
| [3173](#L3173) | return "text/html"; |
| [3174](#L3174) | } |
| [3175](#L3175) |  |
| [3176](#L3176) | } |
| [3177](#L3177) |  |
| [3178](#L3178) | } |
| [3179](#L3179) |  |
| [3180](#L3180) | /\* |
| [3181](#L3181) | \* Load the config |
| [3182](#L3182) | \*/ |
| [3183](#L3183) | global $cmindsPluginPackage; |
| [3184](#L3184) | include('cminds-plugin-config.php'); |
| [3185](#L3185) | $cmindsPluginPackage[$cminds\_plugin\_config['plugin-abbrev']] = new CmindsFreePackage($cminds\_plugin\_config); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/cm-email-blacklist/trunk/package/cminds-free.php?format=txt)
* [Original Format](/export/3222474/cm-email-blacklist/trunk/package/cminds-free.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_f1271834_20250114_205606.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fcm-pop-up-banners%2Ftrunk%2Fpackage%2Fcminds-free.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/cm-pop-up-banners/trunk/package/cminds-free.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/cm-pop-up-banners/trunk/package/cminds-free.php)

---

# [source:](/browser?order=name "Go to repository root") [cm-pop-up-banners](/browser/cm-pop-up-banners?order=name "View cm-pop-up-banners")/[trunk](/browser/cm-pop-up-banners/trunk?order=name "View trunk")/[package](/browser/cm-pop-up-banners/trunk/package?order=name "View package")/[cminds-free.php](/browser/cm-pop-up-banners/trunk/package/cminds-free.php?order=name "View cminds-free.php")

View diff against:

View revision:

| [Last change](/changeset/3218461/cm-pop-up-banners/trunk/package/cminds-free.php "View differences") on this file was [3218461](/changeset/3218461/ "View changeset 3218461"), checked in by CreativeMindsSolutions, [7 days ago](/timeline?from=2025-01-07T16%3A48%3A58Z&precision=second "See timeline at 01/07/2025 04:48:58 PM") |
| --- |
| release a new version with a security fix |
| **File size:** 140.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | namespace com\cminds\package\free\v1\_1\_5; |
| [3](#L3) |  |
| [4](#L4) | if (!defined(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION')) { |
| [5](#L5) | define(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION', '1\_1\_5'); |
| [6](#L6) | } |
| [7](#L7) | if (!class\_exists(\_\_NAMESPACE\_\_ . '\CmindsFreePackage')) { |
| [8](#L8) |  |
| [9](#L9) | class CmindsFreePackage { |
| [10](#L10) |  |
| [11](#L11) | private $config = array(); |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* LicensingAPI object |
| [15](#L15) | \* @var CmindsLicensingAPI |
| [16](#L16) | \*/ |
| [17](#L17) | public $licensingApi = null; |
| [18](#L18) | private $pluginMenu = null; |
| [19](#L19) | private $pluginMenuPage = null; |
| [20](#L20) |  |
| [21](#L21) | const SHAREBOX\_FLAT = 0; |
| [22](#L22) | const SHAREBOX\_SQUARE = 1; |
| [23](#L23) | const ADS\_REFRESH\_INTERVAL = 7776000; // 3600 \* 24 \* 90 = 3 months |
| [24](#L24) |  |
| [25](#L25) | public function \_\_construct($config) { |
| [26](#L26) | $this->config = $config; |
| [27](#L27) |  |
| [28](#L28) | $this->pluginMenu = $this->getOption('plugin-menu-item'); |
| [29](#L29) | $this->pluginMenuPage = $this->getPageUrl('licensing'); |
| [30](#L30) |  |
| [31](#L31) | add\_action('activated\_plugin', array($this, 'redirectAfterInstall'), 10, 2); |
| [32](#L32) | add\_action('admin\_init', array($this, 'updatePoweredByOption')); |
| [33](#L33) | add\_action('admin\_init', array($this, 'registerAdminActions')); |
| [34](#L34) | add\_action('admin\_menu', array($this, 'updateMenu'), 21); |
| [35](#L35) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminStyles')); |
| [36](#L36) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminScripts')); |
| [37](#L37) |  |
| [38](#L38) | $aboutPageKey = $this->getPageSlug(); |
| [39](#L39) | add\_action('cminds-' . $aboutPageKey . '-content-1', array($this, 'displayUserGuideTab')); |
| [40](#L40) | add\_action('cminds-' . $aboutPageKey . '-content-10', array($this, 'displayCreativeMindsTab')); |
| [41](#L41) | add\_action('cminds-' . $aboutPageKey . '-content-30', array($this, 'displayMembershipTab')); |
| [42](#L42) | add\_action('cminds-' . $aboutPageKey . '-content-40', array($this, 'displayCMProductTab')); |
| [43](#L43) | add\_action('cminds-' . $aboutPageKey . '-content-50', array($this, 'displayCMAddOnsTab')); |
| [44](#L44) | add\_action('cminds-' . $aboutPageKey . '-content-60', array($this, 'displayVideoGuidesTab')); |
| [45](#L45) | add\_action('cminds-' . $aboutPageKey . '-content-99', array($this, 'displaySupportTab')); |
| [46](#L46) | add\_action('cminds-' . $aboutPageKey . '-content-199', array($this, 'displayServerInformationTab')); |
| [47](#L47) |  |
| [48](#L48) | add\_action('cminds\_download\_sysinfo', array($this, 'cminds\_generate\_sysinfo\_download')); |
| [49](#L49) |  |
| [50](#L50) | add\_action('init', array($this, 'cminds\_get\_actions')); |
| [51](#L51) | add\_action('init', array($this, 'cminds\_post\_actions')); |
| [52](#L52) |  |
| [53](#L53) | add\_shortcode('cminds\_free\_author', array($this, 'showAuthor')); |
| [54](#L54) | add\_shortcode('cminds\_free\_registration', array($this, 'showRegistration')); |
| [55](#L55) | add\_shortcode('cminds\_free\_guide', array($this, 'showGuide')); |
| [56](#L56) | add\_shortcode('cminds\_upgrade\_box', array($this, 'showUpgrade')); |
| [57](#L57) | add\_shortcode('cminds\_free\_activation', array($this, 'showActivation')); |
| [58](#L58) |  |
| [59](#L59) | add\_filter('plugin\_row\_meta', array($this, 'add\_plugin\_meta\_links'), 10, 2); |
| [60](#L60) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'add\_plugin\_action\_links')); |
| [61](#L61) |  |
| [62](#L62) | add\_action('wp\_dashboard\_setup', array($this, 'addDashboardWidget')); |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | public function addDashboardWidget() { |
| [66](#L66) | if ($this->isRegistered()) { |
| [67](#L67) | wp\_add\_dashboard\_widget('cminds\_package\_dashboard\_widget', \_\_('CreativeMinds WordPress News', 'cminds-package'), array($this, 'showCMDashboardWidget')); |
| [68](#L68) | } |
| [69](#L69) | } |
| [70](#L70) |  |
| [71](#L71) | public function showCMDashboardWidget() { |
| [72](#L72) | $feeds = array( |
| [73](#L73) | array( |
| [74](#L74) | 'url'          => 'https://www.cminds.com/category/wordpress/feed/', |
| [75](#L75) | 'items'        => 6, |
| [76](#L76) | 'show\_summary' => 0, |
| [77](#L77) | 'show\_author'  => 0, |
| [78](#L78) | 'show\_date'    => 1, |
| [79](#L79) | ), |
| [80](#L80) | ); |
| [81](#L81) |  |
| [82](#L82) | wp\_dashboard\_primary\_output('cminds\_package\_dashboard\_widget', $feeds); |
| [83](#L83) | ?> |
| [84](#L84) | <br><hr> |
| [85](#L85) | <p> |
| [86](#L86) | <?php |
| [87](#L87) | printf( |
| [88](#L88) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/', \_\_('cminds.com'), \_\_('(opens in a new window)') |
| [89](#L89) | ); |
| [90](#L90) | ?> |
| [91](#L91) |  |
| [92](#L92) | | |
| [93](#L93) |  |
| [94](#L94) | <?php |
| [95](#L95) | printf( |
| [96](#L96) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/wordpress-plugins/', \_\_('CM WordPress Plugins'), \_\_('(opens in a new window)') |
| [97](#L97) | ); |
| [98](#L98) | ?> |
| [99](#L99) |  |
| [100](#L100) | | |
| [101](#L101) |  |
| [102](#L102) | <?php |
| [103](#L103) | printf( |
| [104](#L104) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', esc\_url(\_x('https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/', '99+ WordPress Plugins Bundle')), \_\_('99+ WordPress Plugins Bundle'), \_\_('(opens in a new window)') |
| [105](#L105) | ); |
| [106](#L106) | ?> |
| [107](#L107) | </p> |
| [108](#L108) | <?php |
| [109](#L109) | } |
| [110](#L110) |  |
| [111](#L111) | public function redirectAfterInstall($plugin, $network\_activation = false) { |
| [112](#L112) | global $cmindsPluginPackage; |
| [113](#L113) | $the\_package = null; |
| [114](#L114) |  |
| [115](#L115) | foreach ($cmindsPluginPackage as $package) { |
| [116](#L116) | $basename = $package->getOption('plugin-basename'); |
| [117](#L117) | if ($basename == $plugin) { |
| [118](#L118) | $the\_package = $package; |
| [119](#L119) | break; |
| [120](#L120) | } |
| [121](#L121) | } |
| [122](#L122) |  |
| [123](#L123) | if ($the\_package && $the\_package->getOption('plugin-redirect-after-install')) { |
| [124](#L124) | $url = $the\_package->getOption('plugin-redirect-after-install'); |
| [125](#L125) | $isBulkActivate = array(); |
| [126](#L126) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action2'); |
| [127](#L127) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action'); |
| [128](#L128) | if (!empty($url) && !in\_array('activate-selected', $isBulkActivate)) { |
| [129](#L129) | wp\_redirect($url); |
| [130](#L130) | exit(); |
| [131](#L131) | } |
| [132](#L132) | } |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | /\*\* |
| [136](#L136) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [137](#L137) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [138](#L138) | \* functions are called on init. |
| [139](#L139) | \* |
| [140](#L140) | \* @since 1.0 |
| [141](#L141) | \* @return void |
| [142](#L142) | \*/ |
| [143](#L143) | public function registerAdminActions() { |
| [144](#L144) | if (is\_admin()) { |
| [145](#L145) | // If user is paying or in trial and have the free version installed, |
| [146](#L146) | // assume that the deactivation is for the upgrade process. |
| [147](#L147) | add\_action('wp\_ajax\_cm-submit-uninstall-reason', array($this, 'submitUninstallReason')); |
| [148](#L148) | add\_action('wp\_ajax\_cm-submit-registration-email', array($this, 'submitRegistrationEmail')); |
| [149](#L149) | add\_action('wp\_ajax\_cm-submit-deregistration', array($this, 'submitDeregistration')); |
| [150](#L150) | add\_action('wp\_ajax\_cm-submit-registration-skip', array($this, 'submitRegistrationSkip')); |
| [151](#L151) |  |
| [152](#L152) | global $pagenow; |
| [153](#L153) | if ('plugins.php' === $pagenow) { |
| [154](#L154) | // Add action link to settings page. |
| [155](#L155) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [156](#L156) | add\_filter('network\_admin\_plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [157](#L157) | add\_action('admin\_footer', array($this, 'showDeactivationFeedbackDialog'), 11); |
| [158](#L158) | } |
| [159](#L159) | } |
| [160](#L160) | } |
| [161](#L161) |  |
| [162](#L162) | /\*\* |
| [163](#L163) | \* Modify plugin's page action links collection. |
| [164](#L164) | \* |
| [165](#L165) | \* @author Vova Feldman (@svovaf) |
| [166](#L166) | \* @since  1.0.0 |
| [167](#L167) | \* |
| [168](#L168) | \* @param array $links |
| [169](#L169) | \* @param       $file |
| [170](#L170) | \* |
| [171](#L171) | \* @return array |
| [172](#L172) | \*/ |
| [173](#L173) | function modifyPluginActionLinks($links, $file) { |
| [174](#L174) | /\* |
| [175](#L175) | \* This HTML element is used to identify the correct plugin when attaching an event to its Deactivate link. |
| [176](#L176) | \*/ |
| [177](#L177) | if (isset($links['deactivate'])) { |
| [178](#L178) | $links['deactivate'] .= '<i class="cm-slug" data-slug="' . $this->getOption('plugin-abbrev') . '"></i>'; |
| [179](#L179) | } |
| [180](#L180) |  |
| [181](#L181) | return $links; |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | /\*\* |
| [185](#L185) | \* Displays a confirmation and feedback dialog box when the user clicks on the "Deactivate" link on the plugins |
| [186](#L186) | \* page. |
| [187](#L187) | \* |
| [188](#L188) | \*/ |
| [189](#L189) | function showDeactivationFeedbackDialog() { |
| [190](#L190) | $content = ''; |
| [191](#L191) | ob\_start(); |
| [192](#L192) | include\_once 'views/deactivation\_feedback\_modal.php'; |
| [193](#L193) | $content .= ob\_get\_clean(); |
| [194](#L194) | echo $content; |
| [195](#L195) | } |
| [196](#L196) |  |
| [197](#L197) | function filterDeactivationReason($reason) { |
| [198](#L198) |  |
| [199](#L199) | if (strlen($reason) < 20) { |
| [200](#L200) | return ''; |
| [201](#L201) | } |
| [202](#L202) | if (str\_word\_count($reason) < 4) { |
| [203](#L203) | return ''; |
| [204](#L204) | } |
| [205](#L205) |  |
| [206](#L206) | $dirty\_words = array('shit', 'fuck', 'wtf'); |
| [207](#L207) | foreach ($dirty\_words as $a) { |
| [208](#L208) | if (stripos($reason, $a) !== false) { |
| [209](#L209) | return ''; |
| [210](#L210) | } |
| [211](#L211) | } |
| [212](#L212) |  |
| [213](#L213) | return $reason; |
| [214](#L214) | } |
| [215](#L215) |  |
| [216](#L216) | /\*\* |
| [217](#L217) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [218](#L218) | \* @since  1.1.2 |
| [219](#L219) | \*/ |
| [220](#L220) | function submitRegistrationEmail() { |
| [221](#L221) | $atts = array(); |
| [222](#L222) |  |
| [223](#L223) | if (empty($\_POST['email'])) { |
| [224](#L224) | exit; |
| [225](#L225) | } |
| [226](#L226) |  |
| [227](#L227) | $this->registerUser($atts); |
| [228](#L228) | } |
| [229](#L229) |  |
| [230](#L230) | /\*\* |
| [231](#L231) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [232](#L232) | \* @since  1.1.2 |
| [233](#L233) | \*/ |
| [234](#L234) | function submitDeregistration() { |
| [235](#L235) | $atts = array(); |
| [236](#L236) |  |
| [237](#L237) | $this->deregisterUser($atts); |
| [238](#L238) | } |
| [239](#L239) |  |
| [240](#L240) | /\*\* |
| [241](#L241) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [242](#L242) | \* @since  1.1.2 |
| [243](#L243) | \*/ |
| [244](#L244) | function submitRegistrationSkip() { |
| [245](#L245) | if (empty($\_POST)) { |
| [246](#L246) | exit; |
| [247](#L247) | } |
| [248](#L248) | $atts = array(); |
| [249](#L249) | if (!empty($\_POST['id'])) { |
| [250](#L250) | $atts['id'] = sanitize\_text\_field($\_POST['id']); |
| [251](#L251) | } |
| [252](#L252) | $this->skipRegistration($atts); |
| [253](#L253) | } |
| [254](#L254) |  |
| [255](#L255) | /\*\* |
| [256](#L256) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [257](#L257) | \* @since  1.1.2 |
| [258](#L258) | \*/ |
| [259](#L259) | function submitUninstallReason() { |
| [260](#L260) | if (empty($\_POST['plugin\_slug']) || empty($\_POST['deactivation\_reason'])) { |
| [261](#L261) | exit; |
| [262](#L262) | } |
| [263](#L263) |  |
| [264](#L264) | $reason = isset($\_REQUEST['deactivation\_reason']) ? trim(esc\_html(stripslashes(strip\_tags($\_REQUEST['deactivation\_reason'])))) : ''; |
| [265](#L265) | $filteredReason = $this->filterDeactivationReason($reason); |
| [266](#L266) | $postedEmail = isset($\_POST['contact\_email']) && is\_email(trim($\_POST['contact\_email'])) ? sanitize\_text\_field($\_POST['contact\_email']) : null; |
| [267](#L267) |  |
| [268](#L268) | /\* |
| [269](#L269) | \* Only send the e-mail if the filtered reason is not empty |
| [270](#L270) | \*/ |
| [271](#L271) | if (!empty($filteredReason)) { |
| [272](#L272) | global $cmindsPluginPackage; |
| [273](#L273) | $package = $cmindsPluginPackage[$\_POST['plugin\_slug']]; |
| [274](#L274) |  |
| [275](#L275) | $fields = array( |
| [276](#L276) | 'product\_name' => $package->getOption('plugin-name'), |
| [277](#L277) | 'remote\_url'   => get\_bloginfo('wpurl'), |
| [278](#L278) | 'email'        => null !== $postedEmail ? $postedEmail : get\_bloginfo('admin\_email'), |
| [279](#L279) | 'want\_contact' => isset($\_POST['want\_contact']) ? 'true' === $\_POST['want\_contact'] : false, |
| [280](#L280) | 'data\_agree'   => isset($\_POST['data\_agree']) ? 'true' === $\_POST['data\_agree'] : true, |
| [281](#L281) | ); |
| [282](#L282) |  |
| [283](#L283) | $registered = $this->isRegistered($\_POST['plugin\_slug']) ? ' (registered)' : ''; |
| [284](#L284) | $message = '<p>The ' . $fields['product\_name'] . ' has been deactivated on ' . $fields['remote\_url'] . ' by ' . $fields['email'] . $registered . '.</p> <p>The reason was:</p> <p><strong>' . $filteredReason . '</strong></p>'; |
| [285](#L285) | $message .= '<br/><hr/>'; |
| [286](#L286) |  |
| [287](#L287) | $mail = 'support@cminds.com'; |
| [288](#L288) |  |
| [289](#L289) | if ($fields['want\_contact']) { |
| [290](#L290) | $message .= '<p>This user is interested in contact from our side.</p>'; |
| [291](#L291) | $message .= '<br/><hr/>'; |
| [292](#L292) | $mail = 'support@cminds.com'; |
| [293](#L293) | } |
| [294](#L294) |  |
| [295](#L295) | if ($fields['data\_agree']) { |
| [296](#L296) | $message .= '<p>SYSTEM INFORMATION BELOW:</p>'; |
| [297](#L297) | ob\_start(); |
| [298](#L298) | echo '<pre>'; |
| [299](#L299) | echo $this->cminds\_system\_info\_content(); |
| [300](#L300) | echo '</pre>'; |
| [301](#L301) | $message .= ob\_get\_clean(); |
| [302](#L302) | } |
| [303](#L303) |  |
| [304](#L304) | $message .= '<p>END OF SYSTEM INFORMATION</p>'; |
| [305](#L305) |  |
| [306](#L306) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [307](#L307) | $result = wp\_mail($mail, 'CM Free Plugin Deactivation Feedback', $message); |
| [308](#L308) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [309](#L309) | } |
| [310](#L310) |  |
| [311](#L311) |  |
| [312](#L312) | // Print '1' for successful operation. |
| [313](#L313) | echo 1; |
| [314](#L314) | exit; |
| [315](#L315) | } |
| [316](#L316) |  |
| [317](#L317) | /\*\* |
| [318](#L318) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [319](#L319) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [320](#L320) | \* functions are called on init. |
| [321](#L321) | \* |
| [322](#L322) | \* @since 1.0 |
| [323](#L323) | \* @return void |
| [324](#L324) | \*/ |
| [325](#L325) | public function cminds\_get\_actions() { |
| [326](#L326) | if (isset($\_GET['cminds\_action'])) { |
| [327](#L327) | do\_action('cminds\_' . $\_GET['cminds\_action'], $\_GET); |
| [328](#L328) | } |
| [329](#L329) | } |
| [330](#L330) |  |
| [331](#L331) | /\*\* |
| [332](#L332) | \* Hooks Cminds actions, when present in the $\_POST superglobal. Every Cminds\_action |
| [333](#L333) | \* present in $\_POST is called using WordPress's do\_action function. These |
| [334](#L334) | \* functions are called on init. |
| [335](#L335) | \* |
| [336](#L336) | \* @since 1.0 |
| [337](#L337) | \* @return void |
| [338](#L338) | \*/ |
| [339](#L339) | public function cminds\_post\_actions() { |
| [340](#L340) | if (isset($\_POST['cminds\_action'])) { |
| [341](#L341) | do\_action('cminds\_' . $\_POST['cminds\_action'], $\_POST); |
| [342](#L342) | } |
| [343](#L343) | } |
| [344](#L344) |  |
| [345](#L345) | public function updatePoweredByOption() { |
| [346](#L346) | $optionValue = filter\_input(INPUT\_POST, $this->getPoweredByOption()); |
| [347](#L347) | $submitValue = filter\_input(INPUT\_POST, 'cminds\_poweredby\_change'); |
| [348](#L348) |  |
| [349](#L349) | if (null !== $optionValue || null !== $submitValue) { |
| [350](#L350) | if(is\_admin() && is\_user\_logged\_in() && current\_user\_can('manage\_options')) { |
| [351](#L351) | update\_option($this->getPoweredByOption(), $optionValue); |
| [352](#L352) | } |
| [353](#L353) | } |
| [354](#L354) | } |
| [355](#L355) |  |
| [356](#L356) | public function getPoweredByOption() { |
| [357](#L357) | $optionName = $this->getOption('plugin-abbrev') . '-powered-by-enabled'; |
| [358](#L358) | return $optionName; |
| [359](#L359) | } |
| [360](#L360) |  |
| [361](#L361) | /\*\* |
| [362](#L362) | \* Default is 0 (disabled) |
| [363](#L363) | \* @return type |
| [364](#L364) | \*/ |
| [365](#L365) | public function isPoweredByEnabled() { |
| [366](#L366) | $result = get\_option($this->getPoweredByOption(), 0); |
| [367](#L367) | return $result; |
| [368](#L368) | } |
| [369](#L369) |  |
| [370](#L370) | /\*\* |
| [371](#L371) | \* Returns the author Url (for free version only) |
| [372](#L372) | \*/ |
| [373](#L373) | public function showAuthor($atts = array()) { |
| [374](#L374) | $authorUrl = ''; |
| [375](#L375) | global $cmindsPluginPackage; |
| [376](#L376) |  |
| [377](#L377) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [378](#L378) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [379](#L379) |  |
| [380](#L380) | if (!$currentPlugin->isPoweredByEnabled()) { |
| [381](#L381) | return; |
| [382](#L382) | } |
| [383](#L383) | ob\_start(); |
| [384](#L384) | ?> |
| [385](#L385) | <style> |
| [386](#L386) | .cminds\_poweredby {clear:both;float:none;font-size:11px;line-height:1.5;display: inline-block;padding: 3px;margin-top:20px;color:#bbb;text-decoration:none;font-weight:bold} |
| [387](#L387) | .cminds\_poweredby:before {content:'Powered by ';} |
| [388](#L388) | .cminds\_poweredbylink:link{color:#bbb;text-decoration:none;} |
| [389](#L389) | .cminds\_poweredbylink:visited{color:#bbb;text-decoration:none;} |
| [390](#L390) | .cminds\_poweredbylink:hover{color:#bbb;text-decoration:none;} |
| [391](#L391) | </style> |
| [392](#L392) |  |
| [393](#L393) | <?php |
| [394](#L394) | $authorUrl .= ob\_get\_clean(); |
| [395](#L395) | /\* |
| [396](#L396) | \* By leaving following snippet in the code, you're expressing your gratitude to creators of this plugin. Thank You! |
| [397](#L397) | \*/ |
| [398](#L398) | $authorUrl .= '<div style="display:block;clear:both;"></div><span class="cminds\_poweredby">'; |
| [399](#L399) | $authorUrl .= '<a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/') . '" target="\_blank" class="cminds\_poweredbylink">CreativeMinds</a> '; |
| [400](#L400) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/wordpress-plugins/') . '" target="\_blank" class="cminds\_poweredbylink">WordPress Plugin</a>'; |
| [401](#L401) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode($currentPlugin->getOption('plugin-store-url')) . '" target="\_blank" class="cminds\_poweredbylink">' . $currentPlugin->getOption('plugin-name') . '</a>'; |
| [402](#L402) | $authorUrl .= '</span><div style="display:block;clear:both;"></div>'; |
| [403](#L403) |  |
| [404](#L404) | return $authorUrl; |
| [405](#L405) | } |
| [406](#L406) |  |
| [407](#L407) | /\* |
| [408](#L408) | \* Licensing Page Tabs |
| [409](#L409) | \*/ |
| [410](#L410) |  |
| [411](#L411) | public function displayUpgradeTutorialTab() { |
| [412](#L412) | $content = ''; |
| [413](#L413) | ob\_start(); |
| [414](#L414) | ?> |
| [415](#L415) | <div> |
| [416](#L416) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Customer Dashboard</a> |
| [417](#L417) | </div> |
| [418](#L418) | <br/> |
| [419](#L419) | <div> |
| [420](#L420) | <?php |
| [421](#L421) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134692135?title=0&byline=0&portrait=0" width="500" height="280"]'); |
| [422](#L422) | ?> |
| [423](#L423) | </div> |
| [424](#L424) | <?php |
| [425](#L425) | $content .= ob\_get\_clean(); |
| [426](#L426) | return $content; |
| [427](#L427) | } |
| [428](#L428) |  |
| [429](#L429) | public function displayManageProductsTab() { |
| [430](#L430) | $content = ''; |
| [431](#L431) | ob\_start(); |
| [432](#L432) | ?> |
| [433](#L433) | <div> |
| [434](#L434) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Open CreativeMinds Customer Dashboard</a> |
| [435](#L435) | </div> |
| [436](#L436) | <br/> |
| [437](#L437) | <div> |
| [438](#L438) | <?php |
| [439](#L439) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134490629?title=0&byline=0&portrait=0" width="640" height="360"]'); |
| [440](#L440) | ?> |
| [441](#L441) | </div> |
| [442](#L442) | <?php |
| [443](#L443) | $content .= ob\_get\_clean(); |
| [444](#L444) | return $content; |
| [445](#L445) | } |
| [446](#L446) |  |
| [447](#L447) | public function displayServerInformationTab() { |
| [448](#L448) | global $wp\_version; |
| [449](#L449) | $content = ''; |
| [450](#L450) |  |
| [451](#L451) | ob\_start(); |
| [452](#L452) | echo $this->cminds\_compatibility\_check(); |
| [453](#L453) | echo $this->cminds\_system\_info(); |
| [454](#L454) | $content .= ob\_get\_clean(); |
| [455](#L455) | return $content; |
| [456](#L456) | } |
| [457](#L457) |  |
| [458](#L458) | /\* |
| [459](#L459) | \* About/User Guide Page Tabs |
| [460](#L460) | \*/ |
| [461](#L461) |  |
| [462](#L462) | public function displayUserGuideTab() { |
| [463](#L463) | $content = ''; |
| [464](#L464) | ob\_start(); |
| [465](#L465) | ?> |
| [466](#L466) | <div> |
| [467](#L467) | <a href="<?php echo $this->getUserguideUrl(); ?>" class="btn button button-primary" target="\_blank">Open User Guide in a new tab</a> |
| [468](#L468) | </div> |
| [469](#L469) | <?php |
| [470](#L470) | $content .= ob\_get\_clean(); |
| [471](#L471) | return $content; |
| [472](#L472) | } |
| [473](#L473) |  |
| [474](#L474) | public function displayUpgradeToProTab() { |
| [475](#L475) | $content = ''; |
| [476](#L476) | $upgradeToProHtml = $this->getOption('plugin-compare-table'); |
| [477](#L477) | $pluginUrl = $this->getOption('plugin-store-url'); |
| [478](#L478) | wp\_enqueue\_script('jquery-ui-tooltip'); |
| [479](#L479) | ob\_start(); |
| [480](#L480) | ?> |
| [481](#L481) | <script> |
| [482](#L482) | jQuery(document).ready(function () { |
| [483](#L483) | jQuery(".cminds-package-show-tooltip").tooltip(); |
| [484](#L484) | }); |
| [485](#L485) | </script> |
| [486](#L486) | <style type="text/css"> |
| [487](#L487) | .pricing-table ul{ |
| [488](#L488) | border-width: 1px; |
| [489](#L489) | border-style: solid; |
| [490](#L490) | border-color: #CCCCCC; |
| [491](#L491) | border-radius: 3px; |
| [492](#L492) | margin: 4px; |
| [493](#L493) | text-align: center; |
| [494](#L494) | font-family: 'Arial'; |
| [495](#L495) | list-style: none; |
| [496](#L496) | float: left; |
| [497](#L497) | padding: 4px; |
| [498](#L498) | background-color: #FFFFFF; |
| [499](#L499) | max-width: 24%; |
| [500](#L500) | } |
| [501](#L501) | .pricing-table ul li{ |
| [502](#L502) | padding: 7px; |
| [503](#L503) | background-color: #EFEFEF; |
| [504](#L504) | border-width: 2px; |
| [505](#L505) | border-color: #B83737; |
| [506](#L506) | border-radius: 0px; |
| [507](#L507) | border-bottom-width: 2px; |
| [508](#L508) | font-size: 13px; |
| [509](#L509) | } |
| [510](#L510) | .pricing-table li:nth-child(odd){ |
| [511](#L511) | background-color: transparent; |
| [512](#L512) | } |
| [513](#L513) | .pricing-table ul .heading{ |
| [514](#L514) | color: #FFFFFF; |
| [515](#L515) | background-color: #659b2e; |
| [516](#L516) | font-size: 19px; |
| [517](#L517) | text-align: center; |
| [518](#L518) | } |
| [519](#L519) | .pricing-table ul .price{ |
| [520](#L520) | font-size: 25px; |
| [521](#L521) | } |
| [522](#L522) | .pricing-table ul .action{ |
| [523](#L523) | font-size: 13px; |
| [524](#L524) | color: #FFFFFF; |
| [525](#L525) | } |
| [526](#L526) | .pricing-table .action a{ |
| [527](#L527) | border-color: #B83737; |
| [528](#L528) | border-width: 0px; |
| [529](#L529) | background-color: #659b2e; |
| [530](#L530) | padding-top: 7px; |
| [531](#L531) | padding-bottom: 7px; |
| [532](#L532) | padding-left: 15px; |
| [533](#L533) | padding-right: 15px; |
| [534](#L534) | border-style: solid; |
| [535](#L535) | color: #FFFFFF; |
| [536](#L536) | } |
| [537](#L537) | .pricing-table ul .noaction{ |
| [538](#L538) | font-size: 13px; |
| [539](#L539) | color: #FFFFFF; |
| [540](#L540) | } |
| [541](#L541) | .pricing-table .noaction span{ |
| [542](#L542) | border-color: #B83737; |
| [543](#L543) | border-width: 0px; |
| [544](#L544) | background-color: #b2b2b2; |
| [545](#L545) | padding-top: 7px; |
| [546](#L546) | padding-bottom: 7px; |
| [547](#L547) | padding-left: 15px; |
| [548](#L548) | padding-right: 15px; |
| [549](#L549) | border-style: solid; |
| [550](#L550) | color: #FFFFFF; |
| [551](#L551) | } |
| [552](#L552) |  |
| [553](#L553) | </style> |
| [554](#L554) | <br> |
| [555](#L555) | <div> |
| [556](#L556) | <?php echo $upgradeToProHtml; ?> |
| [557](#L557) | </div> |
| [558](#L558) | <?php |
| [559](#L559) | $content .= ob\_get\_clean(); |
| [560](#L560) | return $content; |
| [561](#L561) | } |
| [562](#L562) |  |
| [563](#L563) | public function displayCreativeMindsTab() { |
| [564](#L564) | $content = ''; |
| [565](#L565) | ob\_start(); |
| [566](#L566) | ?> |
| [567](#L567) | <div> |
| [568](#L568) | <a href="https://www.cminds.com/about/" class="btn button button-primary" target="\_blank">Open About Us page in a new tab</a> |
| [569](#L569) | </div> |
| [570](#L570) | <?php |
| [571](#L571) | $content .= ob\_get\_clean(); |
| [572](#L572) | return $content; |
| [573](#L573) | } |
| [574](#L574) |  |
| [575](#L575) | public function displayMembershipTab() { |
| [576](#L576) | $content = ''; |
| [577](#L577) | ob\_start(); |
| [578](#L578) | ?> |
| [579](#L579) | <div> |
| [580](#L580) | <a href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" class="btn button button-primary" target="\_blank">Open Membership Package page in a new tab</a> |
| [581](#L581) | </div> |
| [582](#L582) | <?php |
| [583](#L583) | $content .= ob\_get\_clean(); |
| [584](#L584) | return $content; |
| [585](#L585) | } |
| [586](#L586) |  |
| [587](#L587) | public function displayCMProductTab() { |
| [588](#L588) | $content = ''; |
| [589](#L589) | ob\_start(); |
| [590](#L590) |  |
| [591](#L591) | $currentIframeFilter = filter\_input(INPUT\_POST, 'cminds\_iframe\_filter'); |
| [592](#L592) | if (empty($currentIframeFilter)) { |
| [593](#L593) | $currentIframeFilter = 'Plugin'; |
| [594](#L594) | } |
| [595](#L595) | $url = remove\_query\_arg('cminds\_iframe\_filter', $\_SERVER['REQUEST\_URI']); |
| [596](#L596) | ?> |
| [597](#L597) | <div> |
| [598](#L598) | <a href="https://www.cminds.com/wordpress-plugins-library/?cat=Plugin" class="btn button button-primary" target="\_blank">Open Product Catalog in a new tab</a> |
| [599](#L599) | <form method="post" class="cminds\_iframe\_filter\_form"> |
| [600](#L600) | <span> | Filter: </span> |
| [601](#L601) | <button type="submit" name="cminds\_iframe\_filter" value="Plugin" class="btn button button-primary">Plugins</button> |
| [602](#L602) | <button type="submit" name="cminds\_iframe\_filter" value="Add-On" class="btn button button-primary">AddOns</button> |
| [603](#L603) | <button type="submit" name="cminds\_iframe\_filter" value="Bundle" class="btn button button-primary">Bundles</button> |
| [604](#L604) | <button type="submit" name="cminds\_iframe\_filter" value="Service" class="btn button button-primary">Services</button> |
| [605](#L605) | </form> |
| [606](#L606) | </div> |
| [607](#L607) | <?php |
| [608](#L608) | $content .= ob\_get\_clean(); |
| [609](#L609) | return $content; |
| [610](#L610) | } |
| [611](#L611) |  |
| [612](#L612) | public function displayCMAddOnsTab() { |
| [613](#L613) | $content = ''; |
| [614](#L614) | ob\_start(); |
| [615](#L615) | ?> |
| [616](#L616) | <div> |
| [617](#L617) | <a href="https://www.cminds.com/wordpress-plugins-library/?showfilter=No&tags=Tooltip" class="btn button button-primary" target="\_blank">Open Add-Ons page in a new tab</a> |
| [618](#L618) | </div> |
| [619](#L619) | <?php |
| [620](#L620) | $content .= ob\_get\_clean(); |
| [621](#L621) | return $content; |
| [622](#L622) | } |
| [623](#L623) |  |
| [624](#L624) | public function displayVideoGuidesTab() { |
| [625](#L625) | $content = ''; |
| [626](#L626) | ob\_start(); |
| [627](#L627) | ?> |
| [628](#L628) | <div> |
| [629](#L629) | <a href="https://www.cminds.com/cm-plugins-video-library/" class="btn button button-primary" target="\_blank">Open Video Guides page in a new tab</a> |
| [630](#L630) | </div> |
| [631](#L631) | <?php |
| [632](#L632) | $content .= ob\_get\_clean(); |
| [633](#L633) | return $content; |
| [634](#L634) | } |
| [635](#L635) |  |
| [636](#L636) | public function displaySupportTab() { |
| [637](#L637) | $content = ''; |
| [638](#L638) | $supportForumLink = $this->getOption('plugin-support-url'); |
| [639](#L639) | ob\_start(); |
| [640](#L640) | ?> |
| [641](#L641) | <div> |
| [642](#L642) | <p>WordPress supprot forum can only be viewed on WordPress.org site. Please click on the buttom to visit the forum and to submit your support questions</p> |
| [643](#L643) | <a href="<?php echo $supportForumLink; ?>" class="btn button button-primary" target="\_blank">Open WordPress Support Formum</a> |
| [644](#L644) | </div> |
| [645](#L645) | <?php |
| [646](#L646) | $content .= ob\_get\_clean(); |
| [647](#L647) | return $content; |
| [648](#L648) | } |
| [649](#L649) |  |
| [650](#L650) | public function add\_plugin\_meta\_links($meta, $file) { |
| [651](#L651) | if ($file == $this->getOption('plugin-basename')) { |
| [652](#L652) |  |
| [653](#L653) | foreach ($meta as $key => $value) { |
| [654](#L654) | if (strpos($value, 'Visit plugin site') !== FALSE) { |
| [655](#L655) | unset($meta[$key]); |
| [656](#L656) | $meta[] = sprintf('<a href="%s">%s</a>', esc\_url($this->getOption('plugin-store-url')), \_\_('Visit plugin site', 'cminds-package') |
| [657](#L657) | ); |
| [658](#L658) | break; |
| [659](#L659) | } |
| [660](#L660) | } |
| [661](#L661) |  |
| [662](#L662) | foreach ($meta as $key => $value) { |
| [663](#L663) | if (strpos($value, '<a href="') !== FALSE) { |
| [664](#L664) | $meta[$key] = str\_replace('<a href="', '<a target="\_blank" href="', $value); |
| [665](#L665) | } |
| [666](#L666) | } |
| [667](#L667) | } |
| [668](#L668) | return $meta; |
| [669](#L669) | } |
| [670](#L670) |  |
| [671](#L671) | public function add\_plugin\_action\_links($links) { |
| [672](#L672) | $settingsUrl = $this->getOption('plugin-redirect-after-install'); |
| [673](#L673) | if (!empty($settingsUrl)) { |
| [674](#L674) | $links[] = '<a href="' . esc\_url($settingsUrl) . '">Settings</a>'; |
| [675](#L675) | } |
| [676](#L676) | if (!$this->getOption('plugin-free-only')) { |
| [677](#L677) | $links[] = '<a href="' . esc\_url(admin\_url('admin.php?page=' . $this->getProSlug())) . '">Upgrade to Pro</a>'; |
| [678](#L678) | } |
| [679](#L679) | return $links; |
| [680](#L680) | } |
| [681](#L681) |  |
| [682](#L682) | public function updateMenu() { |
| [683](#L683) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('User Guide', 'cminds-package'), \_\_('User Guide', 'cminds-package'), 'manage\_options', $this->getPageSlug(), array($this, 'displayPage')); |
| [684](#L684) | if (!$this->getOption('plugin-free-only')) { |
| [685](#L685) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), 'manage\_options', $this->getProSlug(), array($this, 'displayPage')); |
| [686](#L686) | } |
| [687](#L687) |  |
| [688](#L688) | $tag = 'cminds-' . $this->getOption('plugin-short-slug') . '-license-page'; |
| [689](#L689) | $condition = has\_action($tag); |
| [690](#L690) | } |
| [691](#L691) |  |
| [692](#L692) | public function getProSlug() { |
| [693](#L693) | $slug = $this->getOption('plugin-abbrev') . '\_pro'; |
| [694](#L694) | return $slug; |
| [695](#L695) | } |
| [696](#L696) |  |
| [697](#L697) | public function getPageSlug() { |
| [698](#L698) | $slug = $this->getOption('plugin-abbrev') . '\_about'; |
| [699](#L699) | return $slug; |
| [700](#L700) | } |
| [701](#L701) |  |
| [702](#L702) | public function getLicensingSlug() { |
| [703](#L703) | $slug = $this->getOption('plugin-abbrev') . '\_licensing'; |
| [704](#L704) | return $slug; |
| [705](#L705) | } |
| [706](#L706) |  |
| [707](#L707) | public function isOwnScreen() { |
| [708](#L708) | $screen = get\_current\_screen(); |
| [709](#L709) | return (strpos($screen->base, $this->getPageSlug()) !== false || strpos($screen->base, $this->getLicensingSlug()) !== false || strpos($screen->base, $this->getProSlug()) !== false); |
| [710](#L710) | } |
| [711](#L711) |  |
| [712](#L712) | /\*\* |
| [713](#L713) | \* Load plugin styles for admin area |
| [714](#L714) | \* |
| [715](#L715) | \* @access public |
| [716](#L716) | \* @since 1.0 |
| [717](#L717) | \*/ |
| [718](#L718) | public function enqueueAdminStyles() { |
| [719](#L719) |  |
| [720](#L720) | $screen = get\_current\_screen(); |
| [721](#L721) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [722](#L722) | return; |
| [723](#L723) | } |
| [724](#L724) | wp\_enqueue\_style('jquery-ui-tabs-css', plugin\_dir\_url(\_\_FILE\_\_) . 'css/jquery-ui.min.css', array()); |
| [725](#L725) | } |
| [726](#L726) |  |
| [727](#L727) | /\*\* |
| [728](#L728) | \* Load plugin scripts for admin area |
| [729](#L729) | \* |
| [730](#L730) | \* @access public |
| [731](#L731) | \* @since 1.0 |
| [732](#L732) | \*/ |
| [733](#L733) | public function enqueueAdminScripts() { |
| [734](#L734) |  |
| [735](#L735) | $screen = get\_current\_screen(); |
| [736](#L736) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [737](#L737) | return; |
| [738](#L738) | } |
| [739](#L739) | wp\_enqueue\_script('jquery-ui-tabs'); |
| [740](#L740) | } |
| [741](#L741) |  |
| [742](#L742) | public function getUserguideUrl() { |
| [743](#L743) | $url = ''; |
| [744](#L744) | if ($this->getOption('plugin-userguide-key')) { |
| [745](#L745) | $url .= 'https://creativeminds.helpscoutdocs.com/article/' . $this->getOption('plugin-userguide-key'); |
| [746](#L746) | } else { |
| [747](#L747) | $url .= 'https://creativeminds.helpscoutdocs.com/collection/3-wordpress-plugins'; |
| [748](#L748) | } |
| [749](#L749) | return $url; |
| [750](#L750) | } |
| [751](#L751) |  |
| [752](#L752) | public function displayPage() { |
| [753](#L753) | global $plugin\_page; |
| [754](#L754) | $content = ''; |
| [755](#L755) |  |
| [756](#L756) | global $cmindsPluginPackage; |
| [757](#L757) |  |
| [758](#L758) | if (!empty($cmindsPluginPackage)) { |
| [759](#L759) | foreach ($cmindsPluginPackage as $key => $package) { |
| [760](#L760) | $isown = $package->isOwnScreen(); |
| [761](#L761) | if ($isown) { |
| [762](#L762) | $currentPlugin = $package; |
| [763](#L763) | } |
| [764](#L764) | } |
| [765](#L765) | } |
| [766](#L766) | ?> |
| [767](#L767) | <div class="wrap"> |
| [768](#L768) | <style type="text/css"> |
| [769](#L769) | .subsubsub li+li:before {content:'| ';} |
| [770](#L770) | .cminds\_system\_info\_area{ |
| [771](#L771) | width: 99.5%; |
| [772](#L772) | height: 290px; |
| [773](#L773) | } |
| [774](#L774) | .cminds\_update\_table td, |
| [775](#L775) | .cminds\_update\_table tr { |
| [776](#L776) | width: 140px; |
| [777](#L777) | text-align: left; |
| [778](#L778) | } |
| [779](#L779) | .cminds\_iframe\_filter\_form{ |
| [780](#L780) | display: inline-block; |
| [781](#L781) | } |
| [782](#L782) | .cminds\_iframe\_filter\_form > span{ |
| [783](#L783) | line-height: 28px; |
| [784](#L784) | } |
| [785](#L785) | </style> |
| [786](#L786) | <h2> |
| [787](#L787) | <div id="icon-<?php echo $currentPlugin->getOption('plugin-icon') ?>" class="icon32"> |
| [788](#L788) | <br /> |
| [789](#L789) | </div> |
| [790](#L790) | <?php echo $currentPlugin->getOption('plugin-name') ?>&nbsp; |
| [791](#L791) | <?php |
| [792](#L792) | $pluginAbbrev = $currentPlugin->getOption('plugin-abbrev'); |
| [793](#L793) | if (empty($\_GET['page']) || $\_GET['page'] != $pluginAbbrev . '\_pro') : |
| [794](#L794) | ?> |
| [795](#L795) | <a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $pluginAbbrev . '\_pro')); ?>" class="button button-primary" title="Click to Buy PRO">Upgrade to Pro</a> |
| [796](#L796) | <?php |
| [797](#L797) | endif; |
| [798](#L798) | ?> |
| [799](#L799) | </h2> |
| [800](#L800) | <?php |
| [801](#L801) | echo $currentPlugin->showNav(); |
| [802](#L802) |  |
| [803](#L803) | wp\_enqueue\_style('cminds\_package\_userguide', plugin\_dir\_url(\_\_FILE\_\_) . 'css/main.css'); |
| [804](#L804) | wp\_enqueue\_style('cminds\_package\_userguide\_font', 'https://fonts.googleapis.com/css?family=Open+Sans:400,700,300,600'); |
| [805](#L805) |  |
| [806](#L806) | switch ($plugin\_page) { |
| [807](#L807) | default: |
| [808](#L808) | case $currentPlugin->getPageSlug(): { |
| [809](#L809) | $title = \_\_('About', 'cminds-package'); |
| [810](#L810) | wp\_enqueue\_script('cmdm-mailerlite', plugin\_dir\_url(\_\_FILE\_\_) . 'js/mailerlite.js', array(), $this->getOption('plugin-version'), true); |
| [811](#L811) | ob\_start(); |
| [812](#L812) | $base\_path = $currentPlugin->getOption('plugin-dir-path'); |
| [813](#L813) | include $base\_path . 'package/views/userguide\_free.php'; |
| [814](#L814) | $content .= ob\_get\_clean(); |
| [815](#L815) | break; |
| [816](#L816) | } |
| [817](#L817) | case $currentPlugin->getProSlug(): { |
| [818](#L818) | $title = \_\_('Upgrade to Pro', 'cminds-package'); |
| [819](#L819) |  |
| [820](#L820) | ob\_start(); |
| [821](#L821) | echo $currentPlugin->displayUpgradeToProTab(); |
| [822](#L822) | $content .= ob\_get\_clean(); |
| [823](#L823) | break; |
| [824](#L824) | } |
| [825](#L825) | case $currentPlugin->getLicensingSlug(): { |
| [826](#L826) | $title = \_\_('User Guide', 'cminds-package'); |
| [827](#L827) |  |
| [828](#L828) | ob\_start(); |
| [829](#L829) | $content .= $this->showTabs($plugin\_page); |
| [830](#L830) | $content .= ob\_get\_clean(); |
| [831](#L831) | break; |
| [832](#L832) | } |
| [833](#L833) | } |
| [834](#L834) |  |
| [835](#L835) | echo apply\_filters('cminds-about-page-content', $content, $currentPlugin); |
| [836](#L836) | ?> |
| [837](#L837) | </div> |
| [838](#L838) | <?php |
| [839](#L839) | } |
| [840](#L840) |  |
| [841](#L841) | protected function showTabs($key) { |
| [842](#L842) | $class = $id = 'cminds\_' . $key . '\_tabs'; |
| [843](#L843) | ?> |
| [844](#L844) | <div id="<?php echo $id; ?>" class="<?php echo $class; ?>"> |
| [845](#L845) | <script> |
| [846](#L846) | jQuery(document).ready(function ($) { |
| [847](#L847) | $('#<?php echo $id; ?>').tabs({ |
| [848](#L848) | activate: function (event, ui) { |
| [849](#L849) | window.location.hash = ui.newPanel.attr('id').replace(/-/g, '\_'); |
| [850](#L850) | }, |
| [851](#L851) | create: function (event, ui) { |
| [852](#L852) | var tab = location.hash.replace(/\\_/g, '-'); |
| [853](#L853) | if (tab.length) |
| [854](#L854) | { |
| [855](#L855) | var tabContainer = $(ui.panel.context).find('a[href="' + tab + '"]'); |
| [856](#L856) | if (typeof tabContainer !== 'undefined' && tabContainer.length) |
| [857](#L857) | { |
| [858](#L858) | var index = tabContainer.parent().index(); |
| [859](#L859) | $(ui.panel.context).tabs('option', 'active', index); |
| [860](#L860) | } |
| [861](#L861) | } |
| [862](#L862) | } |
| [863](#L863) | }); |
| [864](#L864) | }); |
| [865](#L865) | </script> |
| [866](#L866) | <?php |
| [867](#L867) | $this->renderSettingsTabsControls($key); |
| [868](#L868) | $this->renderSettingsTabs($key); |
| [869](#L869) | ?> |
| [870](#L870) | </div> |
| [871](#L871) | <?php |
| [872](#L872) | } |
| [873](#L873) |  |
| [874](#L874) | protected function getTabsArray($key) { |
| [875](#L875) |  |
| [876](#L876) | switch ($key) { |
| [877](#L877) | default: |
| [878](#L878) | case $this->getPageSlug(): |
| [879](#L879) | $settingsTabsArrayBase = array( |
| [880](#L880) | '1'   => 'User Guide', |
| [881](#L881) | //                                              '5'              => 'Upgrade To Pro', |
| [882](#L882) | '10'  => 'About', |
| [883](#L883) | '30'  => 'Membership', |
| [884](#L884) | '40'  => 'CM Catalog', |
| [885](#L885) | '60'  => 'Video Guides', |
| [886](#L886) | '99'  => 'WordPress Support Forum', |
| [887](#L887) | '199' => 'System Information', |
| [888](#L888) | ); |
| [889](#L889) | if ($this->getOption('plugin-has-addons')) { |
| [890](#L890) | $settingsTabsArrayBase['50'] = 'Plugin Add-ons'; |
| [891](#L891) | } |
| [892](#L892) | break; |
| [893](#L893) | case $this->getLicensingSlug(): |
| [894](#L894) | $settingsTabsArrayBase = array( |
| [895](#L895) | '10' => 'License Activation', |
| [896](#L896) | '20' => 'Check Version', |
| [897](#L897) | //                                              '30' => 'Upgrade Tutorial', |
| [898](#L898) | '40' => 'Manage Your CM Products', |
| [899](#L899) | ); |
| [900](#L900) | break; |
| [901](#L901) | } |
| [902](#L902) |  |
| [903](#L903) | $settingsTabsArray = apply\_filters('cminds-' . $key . '-tabs-array', $settingsTabsArrayBase); |
| [904](#L904) |  |
| [905](#L905) | ksort($settingsTabsArray); |
| [906](#L906) | return $settingsTabsArray; |
| [907](#L907) | } |
| [908](#L908) |  |
| [909](#L909) | /\*\* |
| [910](#L910) | \* Function renders (default) or returns the setttings tabs |
| [911](#L911) | \* |
| [912](#L912) | \* @param type $return |
| [913](#L913) | \* @return string |
| [914](#L914) | \*/ |
| [915](#L915) | protected function renderSettingsTabs($key, $return = false) { |
| [916](#L916) | $content = ''; |
| [917](#L917) | $settingsTabsArray = $this->getTabsArray($key); |
| [918](#L918) |  |
| [919](#L919) | if ($settingsTabsArray) { |
| [920](#L920) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [921](#L921) | $filterName = 'cminds-' . $key . '-content-' . $tabKey; |
| [922](#L922) |  |
| [923](#L923) | $content .= '<div id="tabs-' . $tabKey . '">'; |
| [924](#L924) | $tabContent = apply\_filters($filterName, ''); |
| [925](#L925) | $content .= $tabContent; |
| [926](#L926) | $content .= '</div>'; |
| [927](#L927) | } |
| [928](#L928) | } |
| [929](#L929) |  |
| [930](#L930) | if ($return) { |
| [931](#L931) | return $content; |
| [932](#L932) | } |
| [933](#L933) | echo $content; |
| [934](#L934) | } |
| [935](#L935) |  |
| [936](#L936) | /\*\* |
| [937](#L937) | \* Function renders (default) or returns the setttings tabs |
| [938](#L938) | \* |
| [939](#L939) | \* @param type $return |
| [940](#L940) | \* @return string |
| [941](#L941) | \*/ |
| [942](#L942) | protected function renderSettingsTabsControls($key, $return = false) { |
| [943](#L943) | $content = ''; |
| [944](#L944) | $settingsTabsArray = $this->getTabsArray($key); |
| [945](#L945) |  |
| [946](#L946) | if ($settingsTabsArray) { |
| [947](#L947) | $content .= '<ul>'; |
| [948](#L948) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [949](#L949) | $content .= '<li><a href="#tabs-' . $tabKey . '">' . $tabLabel . '</a></li>'; |
| [950](#L950) | } |
| [951](#L951) | $content .= '</ul>'; |
| [952](#L952) | } |
| [953](#L953) |  |
| [954](#L954) | if ($return) { |
| [955](#L955) | return $content; |
| [956](#L956) | } |
| [957](#L957) | echo $content; |
| [958](#L958) | } |
| [959](#L959) |  |
| [960](#L960) | protected function showSharebox($mode = self::SHAREBOX\_FLAT) { |
| [961](#L961) |  |
| [962](#L962) | $class = (self::SHAREBOX\_SQUARE === $mode) ? 'square' : 'flat'; |
| [963](#L963) |  |
| [964](#L964) | $pluginReviewLink = (string) $this->getOption('plugin-review-url'); |
| [965](#L965) | $pluginFullName = (string) $this->getOption('plugin-name'); |
| [966](#L966) | $pluginUrl = (string) $this->getOption('plugin-store-url'); |
| [967](#L967) |  |
| [968](#L968) | $twitterTweet = rawurlencode('Checkout the ' . $pluginFullName . ' ( ' . $pluginUrl . ' ) #WordPress #Plugin by @CMPLUGINS'); |
| [969](#L969) |  |
| [970](#L970) | ob\_start(); |
| [971](#L971) | ?> |
| [972](#L972) |  |
| [973](#L973) | <style type="text/css"> |
| [974](#L974) |  |
| [975](#L975) | div.cminds\_call\_to\_action\_wrapper:after{ |
| [976](#L976) | content: ''; |
| [977](#L977) | display: table; |
| [978](#L978) | clear: both; |
| [979](#L979) | } |
| [980](#L980) |  |
| [981](#L981) | #mc\_embed\_signup{clear:left; width:400px;} |
| [982](#L982) | .fb\_iframe\_widget{vertical-align: top;line-height: 2em;} |
| [983](#L983) |  |
| [984](#L984) | div.cminds\_call\_to\_action.flat{ |
| [985](#L985) | display: flex; |
| [986](#L986) | text-align: left; |
| [987](#L987) | float: left; |
| [988](#L988) | margin-bottom: 10px; |
| [989](#L989) | } |
| [990](#L990) |  |
| [991](#L991) | div.cminds\_call\_to\_action.flat .inner\_box{ |
| [992](#L992) | border: 1px solid #999; |
| [993](#L993) | padding: 0 0.5em 0.5em; |
| [994](#L994) | min-width: 80px; |
| [995](#L995) | border-radius : 4px; |
| [996](#L996) | margin: 5px 0 5px 0 ; |
| [997](#L997) | } |
| [998](#L998) |  |
| [999](#L999) | div.cminds\_call\_to\_action.square{ |
| [1000](#L1000) | display: flex; |
| [1001](#L1001) | text-align: center; |
| [1002](#L1002) | } |
| [1003](#L1003) |  |
| [1004](#L1004) | div.cminds\_call\_to\_action.square .inner\_box{ |
| [1005](#L1005) | border: 1px solid #999; |
| [1006](#L1006) | padding: 0 0.5em 0.5em; |
| [1007](#L1007) | margin: 0 auto; |
| [1008](#L1008) | min-width: 290px; |
| [1009](#L1009) | } |
| [1010](#L1010) |  |
| [1011](#L1011) | div.cminds\_call\_to\_action.square .inner\_box td{ |
| [1012](#L1012) | display: block; |
| [1013](#L1013) | padding: 0; |
| [1014](#L1014) | } |
| [1015](#L1015) |  |
| [1016](#L1016) | div.cminds\_call\_to\_action a{ |
| [1017](#L1017) | text-decoration: none; |
| [1018](#L1018) | } |
| [1019](#L1019) | </style> |
| [1020](#L1020) |  |
| [1021](#L1021) | <div class="cminds\_call\_to\_action\_wrapper"> |
| [1022](#L1022) | <div class="cminds\_call\_to\_action <?php echo $class; ?>"> |
| [1023](#L1023) | <div id="fb-root"></div> |
| [1024](#L1024) | <div class="inner\_box"> |
| [1025](#L1025) | <table cellpadding="10"><tr> |
| [1026](#L1026) | <td valign="top"> |
| [1027](#L1027) | <h3><?php $this->\_e('Share your Appreciation'); ?></h3> |
| [1028](#L1028) | <a target="\_blank" href="<?php echo esc\_attr($pluginReviewLink); ?>"> |
| [1029](#L1029) | <div class="btn button"> |
| [1030](#L1030) | <div class="dashicons dashicons-share-alt2"></div><span><?php $this->\_e('Submit a review'); ?></span> |
| [1031](#L1031) | </div> |
| [1032](#L1032) | </a> |
| [1033](#L1033) | <a target="\_blank"  href="http://twitter.com/home/?status=<?php echo esc\_attr(urlencode($twitterTweet)) ?>"> |
| [1034](#L1034) | <div class="btn button"> |
| [1035](#L1035) | <div class="dashicons dashicons-twitter"></div><span><?php $this->\_e('Tweet'); ?></span> |
| [1036](#L1036) | </div> |
| [1037](#L1037) | </a> |
| [1038](#L1038) | </td><td valign="top"> |
| [1039](#L1039) | <h3><?php $this->\_e('Stay Up-to-Date'); ?></h3> |
| [1040](#L1040) | <a href="https://twitter.com/CMPLUGINS" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true"><?php $this->\_e('Follow @CMPLUGINS'); ?></a> |
| [1041](#L1041) | <script>!function (d, s, id) { |
| [1042](#L1042) | var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; |
| [1043](#L1043) | if (!d.getElementById(id)) { |
| [1044](#L1044) | js = d.createElement(s); |
| [1045](#L1045) | js.id = id; |
| [1046](#L1046) | js.src = p + '://platform.twitter.com/widgets.js'; |
| [1047](#L1047) | fjs.parentNode.insertBefore(js, fjs); |
| [1048](#L1048) | } |
| [1049](#L1049) | }(document, 'script', 'twitter-wjs'); |
| [1050](#L1050) | </script> |
| [1051](#L1051) |  |
| [1052](#L1052) | <div class="g-follow" data-annotation="none" data-height="24" data-href="https://plus.google.com/108513627228464018583" data-rel="publisher"></div> |
| [1053](#L1053) |  |
| [1054](#L1054) | <script type="text/javascript"> |
| [1055](#L1055) | (function () { |
| [1056](#L1056) | var po = document.createElement('script'); |
| [1057](#L1057) | po.type = 'text/javascript'; |
| [1058](#L1058) | po.async = true; |
| [1059](#L1059) | po.src = 'https://apis.google.com/js/platform.js'; |
| [1060](#L1060) | var s = document.getElementsByTagName('script')[0]; |
| [1061](#L1061) | s.parentNode.insertBefore(po, s); |
| [1062](#L1062) | })(); |
| [1063](#L1063) | </script> |
| [1064](#L1064) |  |
| [1065](#L1065) | <script>(function (d, s, id) { |
| [1066](#L1066) | var js, fjs = d.getElementsByTagName(s)[0]; |
| [1067](#L1067) | if (d.getElementById(id)) |
| [1068](#L1068) | return; |
| [1069](#L1069) | js = d.createElement(s); |
| [1070](#L1070) | js.id = id; |
| [1071](#L1071) | js.src = "//connect.facebook.net/en\_US/sdk.js#xfbml=1&version=v2.0"; |
| [1072](#L1072) | fjs.parentNode.insertBefore(js, fjs); |
| [1073](#L1073) | }(document, 'script', 'facebook-jssdk')); |
| [1074](#L1074) | </script> |
| [1075](#L1075) |  |
| [1076](#L1076) | <div class="fb-like" data-href="https://www.facebook.com/cmplugins" data-width="100" data-layout="button" data-action="like" data-show-faces="true" data-share="true"></div> |
| [1077](#L1077) |  |
| [1078](#L1078) | <br/> |
| [1079](#L1079) | </td> |
| [1080](#L1080) | <td valign="top"> |
| [1081](#L1081) | <!-- Begin MailChimp Signup Form --> |
| [1082](#L1082) | <div id="mc\_embed\_signup"> |
| [1083](#L1083) | <form action="//cminds.us3.list-manage.com/subscribe/post?u=f48254f757fafba2669ae5918&amp;id=142732cbf9" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="\_blank" novalidate> |
| [1084](#L1084) | <div id="mc\_embed\_signup\_scroll"> |
| [1085](#L1085) | <h3 for="mce-EMAIL"><?php $this->\_e('CM Newsletter - coupons, deals, news'); ?></h3> |
| [1086](#L1086) | <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required> |
| [1087](#L1087) | <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn button"> |
| [1088](#L1088) | <span style="display:inline-block; position: relative"><div class="cmtt\_field\_message" title="We only send newsletters a couple of times a year. They include great deals, promo codes and information about our new plugins!"></div></span> |
| [1089](#L1089) | <!-- real people should not fill this in and expect good things - do not remove this or risk fsorm bot signups--> |
| [1090](#L1090) | <div style="position: absolute; left: -5000px;"><input type="text" name="b\_f48254f757fafba2669ae5918\_142732cbf9" tabindex="-1" value=""></div> |
| [1091](#L1091) | <div class="clear"></div> |
| [1092](#L1092) | </div> |
| [1093](#L1093) | </form> |
| [1094](#L1094) | </div> |
| [1095](#L1095) | <!--End mc\_embed\_signup--> |
| [1096](#L1096) | </td> |
| [1097](#L1097) | </tr> |
| [1098](#L1098) | </table> |
| [1099](#L1099) | </div> |
| [1100](#L1100) | </div> |
| [1101](#L1101) | </div> |
| [1102](#L1102) | <?php |
| [1103](#L1103) | ob\_end\_flush(); |
| [1104](#L1104) | } |
| [1105](#L1105) |  |
| [1106](#L1106) | /\*\* |
| [1107](#L1107) | \* Function returns the ads for the users who volunteered to register (optional step) |
| [1108](#L1108) | \* It communicates with our own server to download the current promotions |
| [1109](#L1109) | \* |
| [1110](#L1110) | \* @return boolean |
| [1111](#L1111) | \*/ |
| [1112](#L1112) | protected function getAds() { |
| [1113](#L1113) | $connectionProblem = false; |
| [1114](#L1114) | $ads\_arr = get\_transient('cminds\_free\_ads'); |
| [1115](#L1115) | if (empty($ads\_arr) && !is\_array($ads\_arr)) { |
| [1116](#L1116) | $args = array( |
| [1117](#L1117) | 'body' => array() |
| [1118](#L1118) | ); |
| [1119](#L1119) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1120](#L1120) | $response = wp\_remote\_post($href, $args); |
| [1121](#L1121) | if (!is\_wp\_error($response)) { |
| [1122](#L1122) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1123](#L1123) | } else { |
| [1124](#L1124) | $args['sslverify'] = false; |
| [1125](#L1125) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1126](#L1126) | $response = wp\_remote\_post($href, $args); |
| [1127](#L1127) | if (!is\_wp\_error($response)) { |
| [1128](#L1128) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1129](#L1129) | } else { |
| [1130](#L1130) | $ads = array(); |
| [1131](#L1131) | $connectionProblem = true; |
| [1132](#L1132) | } |
| [1133](#L1133) | } |
| [1134](#L1134) | $ads\_arr = array( |
| [1135](#L1135) | 'ads'          => $ads, |
| [1136](#L1136) | 'refresh\_time' => time(), |
| [1137](#L1137) | 'connection'   => !$connectionProblem, |
| [1138](#L1138) | ); |
| [1139](#L1139) | set\_transient('cminds\_free\_ads', $ads\_arr, self::ADS\_REFRESH\_INTERVAL); |
| [1140](#L1140) | } |
| [1141](#L1141) | /\* |
| [1142](#L1142) | \* Update from old version |
| [1143](#L1143) | \*/ |
| [1144](#L1144) | if (!isset($ads\_arr['ads']) && !isset($ads\_arr['refresh\_time'])) { |
| [1145](#L1145) | $temp\_ads\_arr = $ads\_arr; |
| [1146](#L1146) | $ads\_arr = array( |
| [1147](#L1147) | 'ads'          => $temp\_ads\_arr, |
| [1148](#L1148) | 'refresh\_time' => strtotime('-10 DAYS'), |
| [1149](#L1149) | 'connection'   => TRUE, |
| [1150](#L1150) | ); |
| [1151](#L1151) | } |
| [1152](#L1152) | /\* |
| [1153](#L1153) | \* Update from old version |
| [1154](#L1154) | \*/ |
| [1155](#L1155) | if (!isset($ads\_arr['connection'])) { |
| [1156](#L1156) | $ads\_arr['connection'] = TRUE; |
| [1157](#L1157) | } |
| [1158](#L1158) | return $ads\_arr; |
| [1159](#L1159) | } |
| [1160](#L1160) |  |
| [1161](#L1161) | public function getStoreUrl($args = array()) { |
| [1162](#L1162) | $category = isset($args['category']) ? $args['category'] : 'All'; |
| [1163](#L1163) | $storeUrl = $this->addAffiliateCode($this->getCategoryLink('Wordpress', 'category', $category)); |
| [1164](#L1164) | return esc\_url($storeUrl); |
| [1165](#L1165) | } |
| [1166](#L1166) |  |
| [1167](#L1167) | public function getCategoryLink($group, $type, $name) { |
| [1168](#L1168) | $categoryLinks = array( |
| [1169](#L1169) | 'Wordpress' => array( |
| [1170](#L1170) | 'category' => array( |
| [1171](#L1171) | 'All'     => '/wordpress-plugins-library/', |
| [1172](#L1172) | 'Plugin'  => '/wordpress-plugins/', |
| [1173](#L1173) | 'Service' => '/wordpress-maintenance-services/', |
| [1174](#L1174) | 'Add-On'  => '/wordpress-add-ons/', |
| [1175](#L1175) | 'Bundle'  => '/wordpress-plugins-bundles/'), |
| [1176](#L1176) | 'tags'     => array( |
| [1177](#L1177) | 'SEO'        => '/wordpress-seo-content-plugins/', |
| [1178](#L1178) | 'Business'   => '/plugins-for-wordpress-business-websites/', |
| [1179](#L1179) | 'Publishing' => '/wordpress-plugins-for-content-publishing/', |
| [1180](#L1180) | 'Free'       => '/free-wordpress-plugins/', |
| [1181](#L1181) | 'eCommerce'  => '/wordpress-e-commerce-plugins/', |
| [1182](#L1182) | 'Marketing'  => '/wordpress-plugins-for-marketers/', |
| [1183](#L1183) | 'Admin'      => '/admin-wordpress-plugins/', |
| [1184](#L1184) | 'Community'  => '/wordpress-community-plugins/', |
| [1185](#L1185) | 'eLearning'  => '/wordpress-e-learning-and-lms-plugins/', |
| [1186](#L1186) | ) |
| [1187](#L1187) | ), |
| [1188](#L1188) | 'Magento'   => array( |
| [1189](#L1189) | 'category' => array( |
| [1190](#L1190) | 'All'       => '/magento-extensions-and-modules/', |
| [1191](#L1191) | 'Extension' => '/ecommerce-extensions-store/', |
| [1192](#L1192) | 'Service'   => '/support-and-maintenance-services-for-magento/', |
| [1193](#L1193) | 'Bundle'    => '/extensions-bundles-magento/'), |
| [1194](#L1194) | 'tags'     => array( |
| [1195](#L1195) | 'Customer'     => '/magento-customer-care-support/', |
| [1196](#L1196) | 'Integrations' => '/magento-third-party-integration-extensions/', |
| [1197](#L1197) | 'Marketing'    => '/magento-marketing-extensions/', |
| [1198](#L1198) | 'Marketplace'  => '/magento-marketplace-extensions/', |
| [1199](#L1199) | 'Marketplaces' => '/magento-marketplace-extensions/', |
| [1200](#L1200) | 'Utilities'    => '/magento-utilities-extensions/', |
| [1201](#L1201) | 'Magento-2'    => '/magento-2-extensions/', |
| [1202](#L1202) | '2.0'          => '/magento-2-extensions/' |
| [1203](#L1203) | ) |
| [1204](#L1204) | ) |
| [1205](#L1205) | ); |
| [1206](#L1206) |  |
| [1207](#L1207) | $link = null; |
| [1208](#L1208) | $types = array('category', 'tags'); |
| [1209](#L1209) | if (in\_array($type, $types)) { |
| [1210](#L1210) | $link = isset($categoryLinks[$group][$type][$name]) ? $categoryLinks[$group][$type][$name] : null; |
| [1211](#L1211) | } |
| [1212](#L1212) |  |
| [1213](#L1213) | if (!is\_string($link)) { |
| [1214](#L1214) | $link = ('Wordpress' === $group) ? '/wordpress-plugins-library/?' . $type . '=' . $name : '/magento-extensions-and-modules/?' . $type . '=' . $name; |
| [1215](#L1215) | } |
| [1216](#L1216) |  |
| [1217](#L1217) | $link = 'https://www.cminds.com' . $link; |
| [1218](#L1218) | return $link; |
| [1219](#L1219) | } |
| [1220](#L1220) |  |
| [1221](#L1221) | public function addAffiliateCode($link) { |
| [1222](#L1222) | if ($this->getOption('plugin-affiliate')) { |
| [1223](#L1223) | $link = add\_query\_arg(array('af' => $this->getOption('plugin-affiliate')), $link); |
| [1224](#L1224) | } |
| [1225](#L1225) | return esc\_url($link); |
| [1226](#L1226) | } |
| [1227](#L1227) |  |
| [1228](#L1228) | public function showGuide($atts = array()) { |
| [1229](#L1229) | global $cmindsPluginPackage; |
| [1230](#L1230) |  |
| [1231](#L1231) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1232](#L1232) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1233](#L1233) |  |
| [1234](#L1234) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-guide-hidden'; |
| [1235](#L1235) | $guideHide = filter\_input(INPUT\_GET, 'cminds\_guide\_hide'); |
| [1236](#L1236) | if ($guideHide) { |
| [1237](#L1237) | update\_option($optionName, 1); |
| [1238](#L1238) | } |
| [1239](#L1239) | $guideShow = filter\_input(INPUT\_GET, 'cminds\_guide\_show'); |
| [1240](#L1240) | if ($guideShow) { |
| [1241](#L1241) | update\_option($optionName, 0); |
| [1242](#L1242) | } |
| [1243](#L1243) | $guideHidden = get\_option($optionName, 0); |
| [1244](#L1244) |  |
| [1245](#L1245) | $showGuide = $currentPlugin->getOption('plugin-show-guide'); |
| [1246](#L1246) | if ($showGuide) : |
| [1247](#L1247) | ob\_start(); |
| [1248](#L1248) | ?><style type="text/css"> |
| [1249](#L1249) |  |
| [1250](#L1250) | div.cminds\_guide\_wrapper { |
| [1251](#L1251) | display: inline-block; |
| [1252](#L1252) | background: #FFF; |
| [1253](#L1253) | margin: 0em 0em 0 0; |
| [1254](#L1254) | vertical-align: top; |
| [1255](#L1255) | width:100%; |
| [1256](#L1256) | } |
| [1257](#L1257) |  |
| [1258](#L1258) | div.cminds\_guide\_wrapper \* { |
| [1259](#L1259) | vertical-align: top; |
| [1260](#L1260) | } |
| [1261](#L1261) |  |
| [1262](#L1262) | .cminds\_guide{ |
| [1263](#L1263) | display: inline-block; |
| [1264](#L1264) | width:95%; |
| [1265](#L1265) | } |
| [1266](#L1266) |  |
| [1267](#L1267) | .cminds\_guide\_text{ |
| [1268](#L1268) | display: inline-block; |
| [1269](#L1269) | margin: 1em; |
| [1270](#L1270) | } |
| [1271](#L1271) |  |
| [1272](#L1272) | .cminds\_guide\_text > span{ |
| [1273](#L1273) | text-align: left; |
| [1274](#L1274) | display: block; |
| [1275](#L1275) | } |
| [1276](#L1276) |  |
| [1277](#L1277) | .clear, .clearfix{ |
| [1278](#L1278) | clear: both; |
| [1279](#L1279) | } |
| [1280](#L1280) |  |
| [1281](#L1281) | .cmclearfix{ |
| [1282](#L1282) | clear: both !important; |
| [1283](#L1283) | } |
| [1284](#L1284) |  |
| [1285](#L1285) | .cminds\_guide .guide\_header{ |
| [1286](#L1286) | font-size: 14pt; |
| [1287](#L1287) | font-weight: bold; |
| [1288](#L1288) | } |
| [1289](#L1289) |  |
| [1290](#L1290) | .cminds\_guide .guide\_text{ |
| [1291](#L1291) | float: left; |
| [1292](#L1292) | width: 60%; |
| [1293](#L1293) | max-width: 100%; |
| [1294](#L1294) | } |
| [1295](#L1295) |  |
| [1296](#L1296) | .cminds\_guide .guide\_text ol{ |
| [1297](#L1297) | margin-left: 1.2em; |
| [1298](#L1298) | } |
| [1299](#L1299) |  |
| [1300](#L1300) | .cminds\_guide .guide\_videos{ |
| [1301](#L1301) | float: left; |
| [1302](#L1302) | max-width: 100%; |
| [1303](#L1303) | overflow: hidden; |
| [1304](#L1304) | width: 40%; |
| [1305](#L1305) | } |
| [1306](#L1306) |  |
| [1307](#L1307) | .cminds\_guide .guide\_videos .guide\_videos\_inner{ |
| [1308](#L1308) | } |
| [1309](#L1309) |  |
| [1310](#L1310) | .cminds\_guide .guide\_videos > div{ |
| [1311](#L1311) | display: inline-block; |
| [1312](#L1312) | } |
| [1313](#L1313) | .cminds\_guide .guide\_videos > div.guide\_videos\_after{ |
| [1314](#L1314) | display: block; |
| [1315](#L1315) | margin: 10px 0 0 52px; |
| [1316](#L1316) | } |
| [1317](#L1317) | .prev\_video, |
| [1318](#L1318) | .next\_video { |
| [1319](#L1319) | margin-top: 85px; |
| [1320](#L1320) | } |
| [1321](#L1321) |  |
| [1322](#L1322) | .guide\_video\_title { |
| [1323](#L1323) | font-size: 13pt; |
| [1324](#L1324) | font-weight: bold; |
| [1325](#L1325) | margin: 0 0 10px 0px; |
| [1326](#L1326) | } |
| [1327](#L1327) |  |
| [1328](#L1328) | .cminds\_link.blue { |
| [1329](#L1329) | color: #fff; |
| [1330](#L1330) | border-color: #33ace7; |
| [1331](#L1331) | background: #66c1ed; |
| [1332](#L1332) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1333](#L1333) | box-shadow: 0 1px 0 #ccc; |
| [1334](#L1334) | display: inline-block; |
| [1335](#L1335) | text-decoration: none; |
| [1336](#L1336) | line-height: 26px; |
| [1337](#L1337) | height: 28px; |
| [1338](#L1338) | padding: 0 10px 1px; |
| [1339](#L1339) | cursor: pointer; |
| [1340](#L1340) | border-width: 1px; |
| [1341](#L1341) | border-style: solid; |
| [1342](#L1342) | -webkit-border-radius: 3px; |
| [1343](#L1343) | border-radius: 3px; |
| [1344](#L1344) | -webkit-box-sizing: border-box; |
| [1345](#L1345) | -moz-box-sizing: border-box; |
| [1346](#L1346) | box-sizing: border-box; |
| [1347](#L1347) | } |
| [1348](#L1348) |  |
| [1349](#L1349) | .cminds\_guide .guide\_videos .guide\_video{ |
| [1350](#L1350) | display: none; |
| [1351](#L1351) | } |
| [1352](#L1352) | .cminds\_guide .guide\_videos .guide\_video.active{ |
| [1353](#L1353) | display: inline-block; |
| [1354](#L1354) | } |
| [1355](#L1355) |  |
| [1356](#L1356) | .cminds\_guide .guide\_video\_content > a{ |
| [1357](#L1357) | display: block; |
| [1358](#L1358) | } |
| [1359](#L1359) | .install-guide-video {max-height: 160px;} |
| [1360](#L1360) | .upgrage-guide-video {max-height: 255px;} |
| [1361](#L1361) | @media only screen and (max-width: 768px) { |
| [1362](#L1362) | .cminds\_guide .guide\_text { width:100%; } |
| [1363](#L1363) | .cminds\_guide .guide\_videos { width:100%; } |
| [1364](#L1364) | } |
| [1365](#L1365) | </style> |
| [1366](#L1366) | <?php |
| [1367](#L1367) | if (!$guideHidden) : |
| [1368](#L1368) | ?> |
| [1369](#L1369) | <script> |
| [1370](#L1370) | jQuery(document).ready(function () { |
| [1371](#L1371) |  |
| [1372](#L1372) | jQuery.fn.visible = function () { |
| [1373](#L1373) | return this.css('visibility', 'visible'); |
| [1374](#L1374) | }; |
| [1375](#L1375) |  |
| [1376](#L1376) | jQuery.fn.invisible = function () { |
| [1377](#L1377) | return this.css('visibility', 'hidden'); |
| [1378](#L1378) | }; |
| [1379](#L1379) |  |
| [1380](#L1380) | jQuery.fn.visibilityToggle = function () { |
| [1381](#L1381) | return this.css('visibility', function (i, visibility) { |
| [1382](#L1382) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1383](#L1383) | }); |
| [1384](#L1384) | }; |
| [1385](#L1385) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1386](#L1386) | var prevVisible = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video').length; |
| [1387](#L1387) | var nextVisible = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video').length; |
| [1388](#L1388) |  |
| [1389](#L1389) | if (prevVisible) { |
| [1390](#L1390) | jQuery('.guide\_videos .prev\_video').visible(); |
| [1391](#L1391) | } else { |
| [1392](#L1392) | jQuery('.guide\_videos .prev\_video').invisible(); |
| [1393](#L1393) | } |
| [1394](#L1394) |  |
| [1395](#L1395) | if (nextVisible) { |
| [1396](#L1396) | jQuery('.guide\_videos .next\_video').visible(); |
| [1397](#L1397) | } else { |
| [1398](#L1398) | jQuery('.guide\_videos .next\_video').invisible(); |
| [1399](#L1399) | } |
| [1400](#L1400) | }; |
| [1401](#L1401) |  |
| [1402](#L1402) | cminds\_video\_prev\_next\_toggle(); |
| [1403](#L1403) |  |
| [1404](#L1404) | jQuery('.guide\_videos .prev\_video').on('click', function () { |
| [1405](#L1405) | var prevVideo = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video'); |
| [1406](#L1406) | if (prevVideo.length) |
| [1407](#L1407) | { |
| [1408](#L1408) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1409](#L1409) | prevVideo.addClass('active'); |
| [1410](#L1410) | } |
| [1411](#L1411) | cminds\_video\_prev\_next\_toggle(); |
| [1412](#L1412) | }); |
| [1413](#L1413) |  |
| [1414](#L1414) | jQuery('.guide\_videos .next\_video').on('click', function () { |
| [1415](#L1415) | var nextVideo = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video'); |
| [1416](#L1416) | if (nextVideo.length) |
| [1417](#L1417) | { |
| [1418](#L1418) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1419](#L1419) | nextVideo.addClass('active'); |
| [1420](#L1420) | } |
| [1421](#L1421) | cminds\_video\_prev\_next\_toggle(); |
| [1422](#L1422) | }); |
| [1423](#L1423) | }); |
| [1424](#L1424) | </script> |
| [1425](#L1425) | <div class="clear clearfix cmclearfix"></div> |
| [1426](#L1426) | <div class="cminds\_guide\_wrapper"> |
| [1427](#L1427) | <div class="cminds\_guide"> |
| [1428](#L1428) |  |
| [1429](#L1429) | <?php |
| [1430](#L1430) | $guideText = $currentPlugin->getOption('plugin-guide-text'); |
| [1431](#L1431) | if (!empty($guideText)) : |
| [1432](#L1432) | ?> |
| [1433](#L1433) | <div class="guide\_text"> |
| [1434](#L1434) | <div class="guide\_header"> |
| [1435](#L1435) | Initial Installation Guide |
| [1436](#L1436) | </div> |
| [1437](#L1437) | <?php echo $guideText; ?> |
| [1438](#L1438) | </div> |
| [1439](#L1439) | <?php endif; ?> |
| [1440](#L1440) |  |
| [1441](#L1441) | <?php |
| [1442](#L1442) | $videos = $currentPlugin->getOption('plugin-guide-videos'); |
| [1443](#L1443) | if (!empty($videos) && is\_array($videos)) : |
| [1444](#L1444) | ?> |
| [1445](#L1445) | <div class="guide\_videos"> |
| [1446](#L1446) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1447](#L1447) | <div class="guide\_videos\_inner"> |
| [1448](#L1448) | <?php foreach ($videos as $key => $video) : ?> |
| [1449](#L1449) | <div class="guide\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1450](#L1450) | <div class="guide\_video\_title"><?php echo $video['title']; ?></div> |
| [1451](#L1451) | <?php |
| [1452](#L1452) | // echo do\_shortcode('[video src="https://player.vimeo.com/video/' . $video['video\_id'] . '?portrait=0&responsive=0&maxwidth=290&maxheight=160&player\_id=player\_2" width="290" height="160" id="palyer\_2"][/video]'); |
| [1453](#L1453) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="290" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1454](#L1454) | //                                                                                                              echo wp\_video\_shortcode(array('src' =>"https://player.vimeo.com/video/" . $video['video\_id'] . "?portrait=0&responsive=1&maxheight=160&player\_id=player\_2", 'width' => 463, 'height' => 255, 'class' => "install-guide-video wp-video-shortcode", 'id' => "palyer\_2")); |
| [1455](#L1455) | ?> |
| [1456](#L1456) | </div> |
| [1457](#L1457) | <?php endforeach; ?> |
| [1458](#L1458) | </div> |
| [1459](#L1459) | <div class="next\_video cminds\_link blue" style="visibility: hidden">Next</div> |
| [1460](#L1460) | <div class="guide\_videos\_after"> |
| [1461](#L1461) | <a href="<?php echo $currentPlugin->getPageUrl('about'); ?>" class="cminds\_link blue" target="\_blank">Open Plugin User Guide</a> |
| [1462](#L1462) | </div> |
| [1463](#L1463) | </div> |
| [1464](#L1464) | <?php endif; ?> |
| [1465](#L1465) | </div> |
| [1466](#L1466) | </div> |
| [1467](#L1467) | <div class="clear clearfix cmclearfix"></div> |
| [1468](#L1468) | <?php else : ?> |
| [1469](#L1469) | <div class="cminds\_guide\_wrapper"> |
| [1470](#L1470) | <div> |
| [1471](#L1471) | <a class="cminds-guide-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_guide\_show' => 1), remove\_query\_arg('cminds\_guide\_hide'))); ?>">Show Installation Guide Box</a> |
| [1472](#L1472) | </div> |
| [1473](#L1473) | </div> |
| [1474](#L1474) | <div class="clear clearfix cmclearfix"></div> |
| [1475](#L1475) | <?php |
| [1476](#L1476) | endif; |
| [1477](#L1477) | ?> |
| [1478](#L1478) |  |
| [1479](#L1479) | <?php |
| [1480](#L1480) | $content = ob\_get\_clean(); |
| [1481](#L1481) | return $content; |
| [1482](#L1482) | endif; |
| [1483](#L1483) | } |
| [1484](#L1484) |  |
| [1485](#L1485) | public function showActivation($atts = array()) { |
| [1486](#L1486) | global $cmindsPluginPackage; |
| [1487](#L1487) |  |
| [1488](#L1488) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1489](#L1489) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1490](#L1490) |  |
| [1491](#L1491) | ob\_start(); |
| [1492](#L1492) | $isRegistered = $currentPlugin->isRegistered(); |
| [1493](#L1493) | $isSkipped = $currentPlugin->isSkipped(); |
| [1494](#L1494) | $isRegistered = false; |
| [1495](#L1495) | if (!$isRegistered) : |
| [1496](#L1496) | include\_once 'views/registration.php'; |
| [1497](#L1497) | else: |
| [1498](#L1498) | ?> |
| [1499](#L1499) | <br/> |
| [1500](#L1500) | <br/> |
| [1501](#L1501) | <?php |
| [1502](#L1502) | endif; |
| [1503](#L1503) | $content = ob\_get\_clean(); |
| [1504](#L1504) | return $content; |
| [1505](#L1505) | } |
| [1506](#L1506) |  |
| [1507](#L1507) | public function time\_to\_decimal($time) { |
| [1508](#L1508) | $timeArr = explode(':', $time); |
| [1509](#L1509) | $decTime = ($timeArr[0] \* 60) + ($timeArr[1]); |
| [1510](#L1510) | if (isset($timeArr[2])) { |
| [1511](#L1511) | $decTime += $timeArr[2] / 60; |
| [1512](#L1512) | } |
| [1513](#L1513) | return $decTime; |
| [1514](#L1514) | } |
| [1515](#L1515) |  |
| [1516](#L1516) | public function showUpgrade($atts = array()) { |
| [1517](#L1517) | global $cmindsPluginPackage; |
| [1518](#L1518) |  |
| [1519](#L1519) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1520](#L1520) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1521](#L1521) |  |
| [1522](#L1522) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-upgrade-hidden'; |
| [1523](#L1523) | $upgradeHide = filter\_input(INPUT\_GET, 'cminds\_upgrade\_hide'); |
| [1524](#L1524) | if ($upgradeHide) { |
| [1525](#L1525) | update\_option($optionName, 1); |
| [1526](#L1526) | } |
| [1527](#L1527) | $upgradeShow = filter\_input(INPUT\_GET, 'cminds\_upgrade\_show'); |
| [1528](#L1528) | if ($upgradeShow) { |
| [1529](#L1529) | update\_option($optionName, 0); |
| [1530](#L1530) | } |
| [1531](#L1531) | $upgradeHidden = get\_option($optionName, 0); |
| [1532](#L1532) | $isRegistered = $currentPlugin->isRegistered(); |
| [1533](#L1533) |  |
| [1534](#L1534) | $showUpgrade = $currentPlugin->getOption('plugin-show-upgrade', TRUE); |
| [1535](#L1535) | if ($showUpgrade) : |
| [1536](#L1536) | ob\_start(); |
| [1537](#L1537) | ?><style type="text/css"> |
| [1538](#L1538) |  |
| [1539](#L1539) | div.cminds\_upgrade\_wrapper { |
| [1540](#L1540) | display: block; |
| [1541](#L1541) | background: #FFF; |
| [1542](#L1542) | vertical-align: top; |
| [1543](#L1543) | } |
| [1544](#L1544) |  |
| [1545](#L1545) | div.cminds\_upgrade\_wrapper \* { |
| [1546](#L1546) | vertical-align: top; |
| [1547](#L1547) | } |
| [1548](#L1548) |  |
| [1549](#L1549) | .cminds\_upgrade{ |
| [1550](#L1550) | display: inline-block; |
| [1551](#L1551) | width: 95%; |
| [1552](#L1552) | } |
| [1553](#L1553) |  |
| [1554](#L1554) | .cminds\_upgrade\_text{ |
| [1555](#L1555) | display: inline-block; |
| [1556](#L1556) | margin: 1em; |
| [1557](#L1557) | } |
| [1558](#L1558) |  |
| [1559](#L1559) | .cminds\_upgrade\_text > span{ |
| [1560](#L1560) | text-align: left; |
| [1561](#L1561) | display: block; |
| [1562](#L1562) | } |
| [1563](#L1563) |  |
| [1564](#L1564) | .clear, .clearfix{ |
| [1565](#L1565) | clear: both; |
| [1566](#L1566) | } |
| [1567](#L1567) |  |
| [1568](#L1568) | .cmclearfix{ |
| [1569](#L1569) | clear: both !important; |
| [1570](#L1570) | } |
| [1571](#L1571) |  |
| [1572](#L1572) | .cminds\_upgrade .upgrade\_header{ |
| [1573](#L1573) | font-size: 14pt; |
| [1574](#L1574) | font-weight: bold; |
| [1575](#L1575) | } |
| [1576](#L1576) |  |
| [1577](#L1577) | .cminds\_upgrade .upgrade\_text{ |
| [1578](#L1578) | display: inline-block; |
| [1579](#L1579) | max-width: 45%; |
| [1580](#L1580) | margin-right: 40px; |
| [1581](#L1581) | } |
| [1582](#L1582) |  |
| [1583](#L1583) | .cminds\_upgrade .upgrade\_videos{ |
| [1584](#L1584) | display: inline-flex; |
| [1585](#L1585) | max-width: 50%; |
| [1586](#L1586) | min-width: 520px; |
| [1587](#L1587) | overflow: hidden; |
| [1588](#L1588) | } |
| [1589](#L1589) |  |
| [1590](#L1590) | .cminds\_upgrade .upgrade\_videos .upgrade\_videos\_inner{ |
| [1591](#L1591) | } |
| [1592](#L1592) |  |
| [1593](#L1593) | .cminds\_upgrade .upgrade\_videos > div{ |
| [1594](#L1594) | display: inline-block; |
| [1595](#L1595) | } |
| [1596](#L1596) |  |
| [1597](#L1597) | .cminds\_upgrade .upgrade\_videos > div.upgrade\_videos\_after{ |
| [1598](#L1598) | display: block; |
| [1599](#L1599) | margin: 10px 0 0 0px; |
| [1600](#L1600) | } |
| [1601](#L1601) |  |
| [1602](#L1602) | .prev\_video, |
| [1603](#L1603) | .next\_video { |
| [1604](#L1604) | margin-top: 15px; |
| [1605](#L1605) | } |
| [1606](#L1606) |  |
| [1607](#L1607) | .upgrade\_video\_title { |
| [1608](#L1608) | font-size: 13pt; |
| [1609](#L1609) | font-weight: bold; |
| [1610](#L1610) | margin: 0 0 10px 0px; |
| [1611](#L1611) | } |
| [1612](#L1612) |  |
| [1613](#L1613) | .cminds\_link.blue { |
| [1614](#L1614) | color: #fff; |
| [1615](#L1615) | border-color: #33ace7; |
| [1616](#L1616) | background: #66c1ed; |
| [1617](#L1617) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1618](#L1618) | box-shadow: 0 1px 0 #ccc; |
| [1619](#L1619) | display: inline-block; |
| [1620](#L1620) | text-decoration: none; |
| [1621](#L1621) | line-height: 26px; |
| [1622](#L1622) | height: 28px; |
| [1623](#L1623) | padding: 0 10px 1px; |
| [1624](#L1624) | cursor: pointer; |
| [1625](#L1625) | border-width: 1px; |
| [1626](#L1626) | border-style: solid; |
| [1627](#L1627) | -webkit-border-radius: 3px; |
| [1628](#L1628) | border-radius: 3px; |
| [1629](#L1629) | -webkit-box-sizing: border-box; |
| [1630](#L1630) | -moz-box-sizing: border-box; |
| [1631](#L1631) | box-sizing: border-box; |
| [1632](#L1632) | } |
| [1633](#L1633) |  |
| [1634](#L1634) | .cminds\_upgrade .upgrade\_videos .upgrade\_video{ |
| [1635](#L1635) | display: none; |
| [1636](#L1636) | } |
| [1637](#L1637) |  |
| [1638](#L1638) | .cminds\_upgrade .upgrade\_videos .upgrade\_video.active{ |
| [1639](#L1639) | display: inline-block; |
| [1640](#L1640) | } |
| [1641](#L1641) |  |
| [1642](#L1642) | .cminds\_upgrade .upgrade\_video\_content > a{ |
| [1643](#L1643) | display: block; |
| [1644](#L1644) | } |
| [1645](#L1645) | </style> |
| [1646](#L1646) | <?php |
| [1647](#L1647) | if (!$upgradeHidden) : |
| [1648](#L1648) | ?> |
| [1649](#L1649) | <script> |
| [1650](#L1650) | jQuery(document).ready(function () { |
| [1651](#L1651) |  |
| [1652](#L1652) | jQuery.fn.visible = function () { |
| [1653](#L1653) | return this.css('visibility', 'visible'); |
| [1654](#L1654) | }; |
| [1655](#L1655) |  |
| [1656](#L1656) | jQuery.fn.invisible = function () { |
| [1657](#L1657) | return this.css('visibility', 'hidden'); |
| [1658](#L1658) | }; |
| [1659](#L1659) |  |
| [1660](#L1660) | jQuery.fn.visibilityToggle = function () { |
| [1661](#L1661) | return this.css('visibility', function (i, visibility) { |
| [1662](#L1662) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1663](#L1663) | }); |
| [1664](#L1664) | }; |
| [1665](#L1665) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1666](#L1666) | var prevVisible = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video').length; |
| [1667](#L1667) | var nextVisible = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video').length; |
| [1668](#L1668) |  |
| [1669](#L1669) | if (prevVisible) { |
| [1670](#L1670) | jQuery('.upgrade\_videos .prev\_video').visible(); |
| [1671](#L1671) | } else { |
| [1672](#L1672) | jQuery('.upgrade\_videos .prev\_video').invisible(); |
| [1673](#L1673) | } |
| [1674](#L1674) |  |
| [1675](#L1675) | if (nextVisible) { |
| [1676](#L1676) | jQuery('.upgrade\_videos .next\_video').visible(); |
| [1677](#L1677) | } else { |
| [1678](#L1678) | jQuery('.upgrade\_videos .next\_video').invisible(); |
| [1679](#L1679) | } |
| [1680](#L1680) | }; |
| [1681](#L1681) |  |
| [1682](#L1682) | cminds\_video\_prev\_next\_toggle(); |
| [1683](#L1683) |  |
| [1684](#L1684) | jQuery('.upgrade\_videos .prev\_video').on('click', function () { |
| [1685](#L1685) | var prevVideo = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video'); |
| [1686](#L1686) | if (prevVideo.length) |
| [1687](#L1687) | { |
| [1688](#L1688) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1689](#L1689) | prevVideo.addClass('active'); |
| [1690](#L1690) | } |
| [1691](#L1691) | cminds\_video\_prev\_next\_toggle(); |
| [1692](#L1692) | }); |
| [1693](#L1693) |  |
| [1694](#L1694) | jQuery('.upgrade\_videos .next\_video').on('click', function () { |
| [1695](#L1695) | var nextVideo = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video'); |
| [1696](#L1696) | if (nextVideo.length) |
| [1697](#L1697) | { |
| [1698](#L1698) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1699](#L1699) | nextVideo.addClass('active'); |
| [1700](#L1700) | } |
| [1701](#L1701) | cminds\_video\_prev\_next\_toggle(); |
| [1702](#L1702) | }); |
| [1703](#L1703) | });</script> |
| [1704](#L1704) | <script type="text/javascript" src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>js/froogaloop.js"></script> |
| [1705](#L1705) | <script> |
| [1706](#L1706) | jQuery(document).ready(function ( ) { |
| [1707](#L1707) | // Message displayed when link is playing |
| [1708](#L1708) | var links = jQuery('.cm-video-bookmark-link'); |
| [1709](#L1709) | var playNotice = ' - <strong><i><spam style="color:darkgreen;">Now playing</span></i></strong>'; |
| [1710](#L1710) | // Function to hide all status messages |
| [1711](#L1711) | hidePlayNoticeAll = function ( ) { |
| [1712](#L1712) | jQuery('.cm-video-bookmark-link .link\_status').html(""); |
| [1713](#L1713) | } |
| [1714](#L1714) |  |
| [1715](#L1715) | // Load Vimeo API for the embedded video |
| [1716](#L1716) | var iframe\_player = jQuery('.upgrade\_video\_content iframe')[0]; |
| [1717](#L1717) | var frogaloopPlayer = $f(iframe\_player); |
| [1718](#L1718) | // Option listeners for pause, finish, and playProgress |
| [1719](#L1719) | // |
| [1720](#L1720) | // Note: If you want to use this, you must define the functions or links wont work |
| [1721](#L1721) | frogaloopPlayer.addEvent('ready', function ( ) { |
| [1722](#L1722) | frogaloopPlayer.addEvent('pause', onPause); |
| [1723](#L1723) | frogaloopPlayer.addEvent('finish', onFinish); |
| [1724](#L1724) | frogaloopPlayer.addEvent('playProgress', onPlayProgress); |
| [1725](#L1725) | }); |
| [1726](#L1726) |  |
| [1727](#L1727) | // Functions for each listener event |
| [1728](#L1728) | function onPause(id) { // When the video is paused, do this. |
| [1729](#L1729) | jQuery(".main\_status").html('Paused'); |
| [1730](#L1730) | } |
| [1731](#L1731) |  |
| [1732](#L1732) | function onFinish(id) { // When the video is finished, do this. |
| [1733](#L1733) | jQuery(".main\_status").html('Finished'); |
| [1734](#L1734) | } |
| [1735](#L1735) |  |
| [1736](#L1736) | function onPlayProgress(data, id) { // While the video is playing, do this. |
| [1737](#L1737) | jQuery(".main\_status").html('Playing - ' + data.seconds + 's played'); // data.percent can also be used. |
| [1738](#L1738) | } |
| [1739](#L1739) |  |
| [1740](#L1740) | // Function to control what happens when each lesson link is clicked |
| [1741](#L1741) | function setupLinks( ) { |
| [1742](#L1742) |  |
| [1743](#L1743) | links.on('click', function ( ) { |
| [1744](#L1744) | var track = jQuery(this).data('timestamp'); //Timestamp stored as a data attribute |
| [1745](#L1745) |  |
| [1746](#L1746) | hidePlayNoticeAll( ); // Hide all status messages before displaying (to prevent them from sticking) |
| [1747](#L1747) | if (true === jQuery(this).data('active')) { |
| [1748](#L1748) | frogaloopPlayer.api('pause'); //Play the video |
| [1749](#L1749) | jQuery(this).data('active', false); |
| [1750](#L1750) | } else { |
| [1751](#L1751) | frogaloopPlayer.api('play'); //Play the video |
| [1752](#L1752) | frogaloopPlayer.api('seekTo', track); //Seek to the number of seconds in the variable link\_1\_track |
| [1753](#L1753) | jQuery(this).find('.link\_status').html(playNotice); //Display status message (playNotice) within span with class link\_1\_status |
| [1754](#L1754) | jQuery(this).data('active', true); |
| [1755](#L1755) | } |
| [1756](#L1756) | }); |
| [1757](#L1757) | } |
| [1758](#L1758) | setupLinks( ); |
| [1759](#L1759) | });</script> |
| [1760](#L1760) | <div class="clear clearfix cmclearfix"></div> |
| [1761](#L1761) | <div class="cminds\_upgrade\_wrapper"> |
| [1762](#L1762) | <div class="cminds\_upgrade"> |
| [1763](#L1763) |  |
| [1764](#L1764) | <?php |
| [1765](#L1765) | $upgradeText = $currentPlugin->getOption('plugin-upgrade-text'); |
| [1766](#L1766) | if (!empty($upgradeText)) : |
| [1767](#L1767) | ?> |
| [1768](#L1768) | <div class="upgrade\_text"> |
| [1769](#L1769) | <div class="upgrade\_header"> |
| [1770](#L1770) | Why you Should Upgrade |
| [1771](#L1771) | </div> |
| [1772](#L1772) | <div style="display:block"> |
| [1773](#L1773) | <p><?php echo $upgradeText; ?></p> |
| [1774](#L1774) | <div class="links"> |
| [1775](#L1775) |  |
| [1776](#L1776) | <?php |
| [1777](#L1777) | $upgradel = $currentPlugin->getOption('plugin-upgrade-text-list'); |
| [1778](#L1778) | if (!empty($upgradel) && is\_array($upgradel)) : |
| [1779](#L1779) | foreach ($upgradel as $key => $listitem) : |
| [1780](#L1780) | $linknum = $key + 1; |
| [1781](#L1781) | echo $listitem['video\_time']; |
| [1782](#L1782) | if ('More' !== $listitem['video\_time']) : |
| [1783](#L1783) | ?> |
| [1784](#L1784) | - <a class="cm-video-bookmark-link link\_<?php echo $linknum; ?>" data-timestamp="<?php echo $this->time\_to\_decimal($listitem['video\_time']); ?>" href="javascript:void(0);" target="\_self"><?php echo $listitem['title']; ?><span class="link\_status"></span></a> |
| [1785](#L1785) | <?php else: ?> |
| [1786](#L1786) | - <span class="cm-video-bookmark bookmark\_<?php echo $linknum; ?>" style="color:green;"><?php echo $listitem['title']; ?></span> |
| [1787](#L1787) | <?php endif; ?> |
| [1788](#L1788) | <br/> |
| [1789](#L1789) | <?php endforeach; ?> |
| [1790](#L1790) | <?php endif ?> |
| [1791](#L1791) | </div> |
| [1792](#L1792) | </div> |
| [1793](#L1793) | </div> |
| [1794](#L1794) | <?php endif; ?> |
| [1795](#L1795) |  |
| [1796](#L1796) | <?php |
| [1797](#L1797) | $videos = $currentPlugin->getOption('plugin-upgrade-videos'); |
| [1798](#L1798) | if (!empty($videos) && is\_array($videos)) : |
| [1799](#L1799) | ?> |
| [1800](#L1800) | <div class="upgrade\_videos"> |
| [1801](#L1801) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1802](#L1802) | <div class="upgrade\_videos\_inner"> |
| [1803](#L1803) | <?php |
| [1804](#L1804) | foreach ($videos as $key => $video) : |
| [1805](#L1805) | if (!empty($video)) : |
| [1806](#L1806) | ?> |
| [1807](#L1807) |  |
| [1808](#L1808) | <div class="upgrade\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1809](#L1809) | <div class="upgrade\_video\_title"><?php echo $video['title']; ?></div> |
| [1810](#L1810) | <div class="upgrade\_video\_content"> |
| [1811](#L1811) | <?php |
| [1812](#L1812) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="390" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1813](#L1813) | ?> |
| [1814](#L1814) | <br /><br /><a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $currentPlugin->getOption('plugin-abbrev') . '\_pro')); ?>" class="button button-primary" style="background-color:green; width:220px;" title="Click to Buy PRO">Show me Upgrade Options >></a> |
| [1815](#L1815) |  |
| [1816](#L1816) | </div> |
| [1817](#L1817) | </div> |
| [1818](#L1818) | <?php |
| [1819](#L1819) | endif; |
| [1820](#L1820) | endforeach; |
| [1821](#L1821) | ?> |
| [1822](#L1822) | </div> |
| [1823](#L1823) | </div> |
| [1824](#L1824) | <?php endif; ?> |
| [1825](#L1825) | </div>                    </div> |
| [1826](#L1826) | <?php |
| [1827](#L1827) | echo $this->showAds($atts); |
| [1828](#L1828) | ?> |
| [1829](#L1829) | <div class="clear clearfix cmclearfix"></div> |
| [1830](#L1830) | <?php else : ?> |
| [1831](#L1831) | <div class="cminds\_upgrade\_wrapper"> |
| [1832](#L1832) | <div> |
| [1833](#L1833) | <a class="cminds-upgrade-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_upgrade\_show' => 1), remove\_query\_arg('cminds\_upgrade\_hide'))); ?>">Why you shoud have the Premium Edition>></a> |
| [1834](#L1834) | </div> |
| [1835](#L1835) | </div> |
| [1836](#L1836) | <div class="clear clearfix cmclearfix"></div> |
| [1837](#L1837) | <?php |
| [1838](#L1838) | endif; |
| [1839](#L1839) | ?> |
| [1840](#L1840) |  |
| [1841](#L1841) | <?php |
| [1842](#L1842) | $content = ob\_get\_clean(); |
| [1843](#L1843) | return $content; |
| [1844](#L1844) | endif; |
| [1845](#L1845) | } |
| [1846](#L1846) |  |
| [1847](#L1847) | protected function getDaysSinceLastRefresh($ads\_arr) { |
| [1848](#L1848) | if (!is\_array($ads\_arr) && empty($ads\_arr['refresh\_time'])) { |
| [1849](#L1849) | return null; |
| [1850](#L1850) | } |
| [1851](#L1851) |  |
| [1852](#L1852) | $now = time(); |
| [1853](#L1853) | $your\_date = intval($ads\_arr['refresh\_time']); |
| [1854](#L1854) | $datediff = $now - $your\_date; |
| [1855](#L1855) | $days = abs(floor($datediff / (60 \* 60 \* 24))); |
| [1856](#L1856) | return $days; |
| [1857](#L1857) | } |
| [1858](#L1858) |  |
| [1859](#L1859) | public function showAds($atts = array()) { |
| [1860](#L1860) | global $cmindsPluginPackage; |
| [1861](#L1861) |  |
| [1862](#L1862) | $atts = shortcode\_atts(array( |
| [1863](#L1863) | 'flat' => false, |
| [1864](#L1864) | 'id'   => null |
| [1865](#L1865) | ), $atts); |
| [1866](#L1866) |  |
| [1867](#L1867) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1868](#L1868) |  |
| [1869](#L1869) | $optionName = 'cminds-' . $this->getOption('plugin-short-slug') . '-ads-hidden'; |
| [1870](#L1870) | $adsHide = filter\_input(INPUT\_GET, 'cminds\_ad\_hide'); |
| [1871](#L1871) | if ($adsHide) { |
| [1872](#L1872) | update\_option($optionName, 1); |
| [1873](#L1873) | } |
| [1874](#L1874) | $adsShow = filter\_input(INPUT\_GET, 'cminds\_ad\_show'); |
| [1875](#L1875) | if ($adsShow) { |
| [1876](#L1876) | update\_option($optionName, 0); |
| [1877](#L1877) | } |
| [1878](#L1878) | $adsHidden = get\_option($optionName, 1); |
| [1879](#L1879) | $adsRefreshed = filter\_input(INPUT\_GET, 'cminds\_ad\_refresh'); |
| [1880](#L1880) | if ($adsRefreshed) { |
| [1881](#L1881) | delete\_transient('cminds\_free\_ads'); |
| [1882](#L1882) | } |
| [1883](#L1883) | $ads\_arr = $this->getAds(); |
| [1884](#L1884) | $ads = isset($ads\_arr['ads']) ? $ads\_arr['ads'] : array(); |
| [1885](#L1885) | $days\_since\_last\_refresh = $this->getDaysSinceLastRefresh($ads\_arr); |
| [1886](#L1886) |  |
| [1887](#L1887) | $isRegistered = $currentPlugin->isRegistered(); |
| [1888](#L1888) | /\* |
| [1889](#L1889) | \* Don't display if there's no server connection |
| [1890](#L1890) | \*/ |
| [1891](#L1891) | if (!$ads\_arr['connection']) { |
| [1892](#L1892) | return; |
| [1893](#L1893) | } |
| [1894](#L1894) | ob\_start(); |
| [1895](#L1895) | ?> |
| [1896](#L1896) |  |
| [1897](#L1897) | <style type="text/css"> |
| [1898](#L1898) |  |
| [1899](#L1899) | div.cminds\_ads\_wrapper { |
| [1900](#L1900) | display: inline-block; |
| [1901](#L1901) | padding: 1em; |
| [1902](#L1902) | background: #FFF; |
| [1903](#L1903) | border: solid 1px #E0E0E0; |
| [1904](#L1904) | margin: 1em 1em 0 0; |
| [1905](#L1905) | vertical-align: top; |
| [1906](#L1906) | } |
| [1907](#L1907) |  |
| [1908](#L1908) | .cminds\_ads\_internal\_wrapper { |
| [1909](#L1909) | display: inline-block; |
| [1910](#L1910) | overflow: auto; |
| [1911](#L1911) | max-height: 175px; |
| [1912](#L1912) | } |
| [1913](#L1913) |  |
| [1914](#L1914) | .cminds\_ad{ |
| [1915](#L1915) | display: block; |
| [1916](#L1916) | margin: 0.5em; |
| [1917](#L1917) | vertical-align: top; |
| [1918](#L1918) | } |
| [1919](#L1919) |  |
| [1920](#L1920) | span.ad\_code { |
| [1921](#L1921) | font-weight: bold; |
| [1922](#L1922) | } |
| [1923](#L1923) |  |
| [1924](#L1924) | .cminds\_ad.hidden{ |
| [1925](#L1925) | display: none; |
| [1926](#L1926) | } |
| [1927](#L1927) | .cminds\_ads\_wrapper.hidden{ |
| [1928](#L1928) | display: none; |
| [1929](#L1929) | } |
| [1930](#L1930) |  |
| [1931](#L1931) | .cminds\_ad\_text{ |
| [1932](#L1932) | display: block; |
| [1933](#L1933) | margin-bottom: 1em; |
| [1934](#L1934) | } |
| [1935](#L1935) | .cminds\_ad\_link{ |
| [1936](#L1936) | text-align: center; |
| [1937](#L1937) | } |
| [1938](#L1938) |  |
| [1939](#L1939) | span.ads\_refreshed{ |
| [1940](#L1940) | color: #259602; |
| [1941](#L1941) | font-weight: bold; |
| [1942](#L1942) | } |
| [1943](#L1943) |  |
| [1944](#L1944) | .cminds\_ad\_text > a:before { |
| [1945](#L1945) | content:"\A"; white-space:pre; |
| [1946](#L1946) | } |
| [1947](#L1947) |  |
| [1948](#L1948) | .cminds\_ad\_text > \*:after { |
| [1949](#L1949) | content:"\A"; white-space:pre; |
| [1950](#L1950) | } |
| [1951](#L1951) |  |
| [1952](#L1952) | .cminds\_no\_ads{ |
| [1953](#L1953) | margin: 1em 0; |
| [1954](#L1954) | font-size: 12pt; |
| [1955](#L1955) | font-weight: bold; |
| [1956](#L1956) | } |
| [1957](#L1957) |  |
| [1958](#L1958) | .cminds\_links{ |
| [1959](#L1959) | display: inline-block; |
| [1960](#L1960) | margin: 1em; |
| [1961](#L1961) | padding: 0; |
| [1962](#L1962) | max-width: 150px; |
| [1963](#L1963) | min-height: 90px; |
| [1964](#L1964) | vertical-align: top; |
| [1965](#L1965) | text-align: left; |
| [1966](#L1966) | } |
| [1967](#L1967) |  |
| [1968](#L1968) | .cminds\_links .cminds\_link{ |
| [1969](#L1969) | margin: 5px 0; |
| [1970](#L1970) | } |
| [1971](#L1971) |  |
| [1972](#L1972) | .cminds\_links .cminds\_link:first-child{ |
| [1973](#L1973) | margin-top: 0; |
| [1974](#L1974) | } |
| [1975](#L1975) |  |
| [1976](#L1976) | .cminds\_link{ |
| [1977](#L1977) | color: #555; |
| [1978](#L1978) | border-color: rgba(204,204,204,0.8); |
| [1979](#L1979) | background: #f7f7f7; |
| [1980](#L1980) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1981](#L1981) | box-shadow: 0 1px 0 #ccc; |
| [1982](#L1982) | display: inline-block; |
| [1983](#L1983) | text-decoration: none; |
| [1984](#L1984) | line-height: 26px; |
| [1985](#L1985) | height: 28px; |
| [1986](#L1986) | padding: 0 10px 1px; |
| [1987](#L1987) | cursor: pointer; |
| [1988](#L1988) | border-width: 1px; |
| [1989](#L1989) | border-style: solid; |
| [1990](#L1990) | -webkit-border-radius: 3px; |
| [1991](#L1991) | border-radius: 3px; |
| [1992](#L1992) | -webkit-box-sizing: border-box; |
| [1993](#L1993) | -moz-box-sizing: border-box; |
| [1994](#L1994) | box-sizing: border-box; |
| [1995](#L1995) | } |
| [1996](#L1996) |  |
| [1997](#L1997) | .cminds\_link:active { |
| [1998](#L1998) | background: #eee; |
| [1999](#L1999) | border-color: #999; |
| [2000](#L2000) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2001](#L2001) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2002](#L2002) | -webkit-transform: translateY(1px); |
| [2003](#L2003) | -ms-transform: translateY(1px); |
| [2004](#L2004) | transform: translateY(1px); |
| [2005](#L2005) | } |
| [2006](#L2006) |  |
| [2007](#L2007) | .cminds\_link:hover { |
| [2008](#L2008) | background: #eee; |
| [2009](#L2009) | border-color: #999; |
| [2010](#L2010) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2011](#L2011) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2012](#L2012) | -webkit-transform: translateY(1px); |
| [2013](#L2013) | -ms-transform: translateY(1px); |
| [2014](#L2014) | transform: translateY(1px); |
| [2015](#L2015) | } |
| [2016](#L2016) |  |
| [2017](#L2017) | .cminds\_link.blue{ |
| [2018](#L2018) | color: #fff; |
| [2019](#L2019) | border-color: #33ace7; |
| [2020](#L2020) | background: #66c1ed; |
| [2021](#L2021) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2022](#L2022) | box-shadow: 0 1px 0 #ccc; |
| [2023](#L2023) | display: inline-block; |
| [2024](#L2024) | text-decoration: none; |
| [2025](#L2025) | line-height: 26px; |
| [2026](#L2026) | height: 28px; |
| [2027](#L2027) | padding: 0 10px 1px; |
| [2028](#L2028) | cursor: pointer; |
| [2029](#L2029) | border-width: 1px; |
| [2030](#L2030) | border-style: solid; |
| [2031](#L2031) | -webkit-border-radius: 3px; |
| [2032](#L2032) | border-radius: 3px; |
| [2033](#L2033) | -webkit-box-sizing: border-box; |
| [2034](#L2034) | -moz-box-sizing: border-box; |
| [2035](#L2035) | box-sizing: border-box; |
| [2036](#L2036) |  |
| [2037](#L2037) | } |
| [2038](#L2038) |  |
| [2039](#L2039) | .cminds\_link.blue:active { |
| [2040](#L2040) | background: #0198e1; |
| [2041](#L2041) | border-color: #66c1ed; |
| [2042](#L2042) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2043](#L2043) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2044](#L2044) | -webkit-transform: translateY(1px); |
| [2045](#L2045) | -ms-transform: translateY(1px); |
| [2046](#L2046) | transform: translateY(1px); |
| [2047](#L2047) | } |
| [2048](#L2048) |  |
| [2049](#L2049) | .cminds\_link.blue:hover { |
| [2050](#L2050) | background: #005b87; |
| [2051](#L2051) | border-color: #0198e1; |
| [2052](#L2052) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2053](#L2053) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2054](#L2054) | -webkit-transform: translateY(1px); |
| [2055](#L2055) | -ms-transform: translateY(1px); |
| [2056](#L2056) | transform: translateY(1px); |
| [2057](#L2057) | } |
| [2058](#L2058) |  |
| [2059](#L2059) | .cminds\_link.orange{ |
| [2060](#L2060) | color: #fff; |
| [2061](#L2061) | border-color: #ffb752; |
| [2062](#L2062) | background: #ffb752; |
| [2063](#L2063) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2064](#L2064) | box-shadow: 0 1px 0 #ccc; |
| [2065](#L2065) | display: inline-block; |
| [2066](#L2066) | text-decoration: none; |
| [2067](#L2067) | line-height: 26px; |
| [2068](#L2068) | height: 28px; |
| [2069](#L2069) | padding: 0 10px 1px; |
| [2070](#L2070) | cursor: pointer; |
| [2071](#L2071) | border-width: 1px; |
| [2072](#L2072) | border-style: solid; |
| [2073](#L2073) | -webkit-border-radius: 3px; |
| [2074](#L2074) | border-radius: 3px; |
| [2075](#L2075) | -webkit-box-sizing: border-box; |
| [2076](#L2076) | -moz-box-sizing: border-box; |
| [2077](#L2077) | box-sizing: border-box; |
| [2078](#L2078) |  |
| [2079](#L2079) | } |
| [2080](#L2080) |  |
| [2081](#L2081) | .cminds\_link.orange:active { |
| [2082](#L2082) | background: #e5a449; |
| [2083](#L2083) | border-color: #ffc574; |
| [2084](#L2084) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2085](#L2085) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2086](#L2086) | -webkit-transform: translateY(1px); |
| [2087](#L2087) | -ms-transform: translateY(1px); |
| [2088](#L2088) | transform: translateY(1px); |
| [2089](#L2089) | } |
| [2090](#L2090) |  |
| [2091](#L2091) | .cminds\_link.orange:hover { |
| [2092](#L2092) | background: #e5a449; |
| [2093](#L2093) | border-color: #ffc574; |
| [2094](#L2094) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2095](#L2095) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2096](#L2096) | -webkit-transform: translateY(1px); |
| [2097](#L2097) | -ms-transform: translateY(1px); |
| [2098](#L2098) | transform: translateY(1px); |
| [2099](#L2099) | } |
| [2100](#L2100) |  |
| [2101](#L2101) | .cminds\_more{ |
| [2102](#L2102) | display: inline-block; |
| [2103](#L2103) | margin: 1em; |
| [2104](#L2104) | vertical-align: top; |
| [2105](#L2105) | font-size: 12pt; |
| [2106](#L2106) | line-height: 123px; |
| [2107](#L2107) | } |
| [2108](#L2108) |  |
| [2109](#L2109) | .cminds\_more > \*{ |
| [2110](#L2110) | cursor: pointer; |
| [2111](#L2111) | } |
| [2112](#L2112) |  |
| [2113](#L2113) | .cminds\_link.cminds\_more\_ads { |
| [2114](#L2114) | -moz-border-radius: 11px; |
| [2115](#L2115) | -webkit-border-radius: 11px; |
| [2116](#L2116) | border-radius: 11px; |
| [2117](#L2117) | border: 1px solid #66c1ed; |
| [2118](#L2118) | font-size: 23px; |
| [2119](#L2119) | padding: 8px 14px; |
| [2120](#L2120) | text-decoration: none; |
| [2121](#L2121) | line-height: 23px; |
| [2122](#L2122) | height: auto; |
| [2123](#L2123) | } |
| [2124](#L2124) |  |
| [2125](#L2125) | .clear, .clearfix{ |
| [2126](#L2126) | clear:both; |
| [2127](#L2127) | } |
| [2128](#L2128) |  |
| [2129](#L2129) | .cmclearfix{ |
| [2130](#L2130) | clear: both !important; |
| [2131](#L2131) | } |
| [2132](#L2132) | </style> |
| [2133](#L2133) |  |
| [2134](#L2134) | <?php if ($isRegistered) : ?> |
| [2135](#L2135) |  |
| [2136](#L2136) | <?php if (!$atts['flat']) : ?> |
| [2137](#L2137) |  |
| [2138](#L2138) | <script> |
| [2139](#L2139) | jQuery(document).ready(function ( ) { |
| [2140](#L2140) | jQuery('.cminds-ads-show-button').on('click', function (e) { |
| [2141](#L2141) | e.preventDefault( ); |
| [2142](#L2142) | jQuery('#cminds\_offers\_wrapper').toggleClass('hidden'); |
| [2143](#L2143) | jQuery('#cminds\_links\_wrapper').toggleClass('hidden'); |
| [2144](#L2144) | }); |
| [2145](#L2145) | });</script> |
| [2146](#L2146) |  |
| [2147](#L2147) | <h3>Special offers from CreativeMinds</h3> |
| [2148](#L2148) |  |
| [2149](#L2149) | <div class="cminds\_ads\_wrapper\_white"> |
| [2150](#L2150) | <a href="https://www.cminds.com/wordpress-plugins-library/seo-keyword-hound-wordpress/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/keywordhoundbanner.jpg"></a> |
| [2151](#L2151) | <span style="margin-left:20px;"> |
| [2152](#L2152) | <a class="" href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/99suite.png"></a> |
| [2153](#L2153) | </span> |
| [2154](#L2154) | </div> |
| [2155](#L2155) |  |
| [2156](#L2156) |  |
| [2157](#L2157) | <?php if (!empty($ads)) : ?> |
| [2158](#L2158) | <div class="cminds\_ads\_internal\_wrapper"> |
| [2159](#L2159) | <?php foreach ($ads as $index => $ad) : ?> |
| [2160](#L2160) | <div class="cminds\_ad"> |
| [2161](#L2161) | <?php |
| [2162](#L2162) | $dateUntil = date('jS F, Y', strtotime($ad['ad\_valid\_date'])); |
| [2163](#L2163) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code <span class="ad\_code">"%s"</span> valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2164](#L2164) | ?> |
| [2165](#L2165) | <span class="cminds\_ad\_link"> |
| [2166](#L2166) | <a class="cminds\_link blue" target="\_blank" href="<?php echo $this->addAffiliateCode($ad['ad\_url']); ?>">Redeem Offer</a> |
| [2167](#L2167) | </span> |
| [2168](#L2168) | </div> |
| [2169](#L2169) | <?php endforeach; ?> |
| [2170](#L2170) | </div> |
| [2171](#L2171) | <?php else: ?> |
| [2172](#L2172) | <div class="cminds\_no\_ads"> |
| [2173](#L2173) | <span class="cminds\_no\_ads\_text"> |
| [2174](#L2174) | Currently we have no special discounts. |
| [2175](#L2175) | </span> |
| [2176](#L2176) | </div> |
| [2177](#L2177) | <?php endif; ?> |
| [2178](#L2178) |  |
| [2179](#L2179) | <div> |
| [2180](#L2180) | <?php if ($adsRefreshed) : |
| [2181](#L2181) | ?> |
| [2182](#L2182) | <span class="ads\_refreshed"> |
| [2183](#L2183) | Discounts have been refreshed. |
| [2184](#L2184) | </span> |
| [2185](#L2185) | <?php else : ?> |
| [2186](#L2186) | You haven't refreshed the discounts for <?php echo $days\_since\_last\_refresh . ' ' . \_n('day', 'days', $days\_since\_last\_refresh); ?>. <a class="cminds-ads-refresh-button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_ad\_refresh' => 1))); ?>"><strong>Refresh now!</strong></a> |
| [2187](#L2187) | <?php endif; ?> |
| [2188](#L2188) | </div> |
| [2189](#L2189) | <?php else: ?> |
| [2190](#L2190) | <ul class="cminds\_ads\_list\_wrapper"> |
| [2191](#L2191) | <?php foreach ($ads as $index => $ad) : ?> |
| [2192](#L2192) | <li class="cminds\_ads\_list\_item">                                                           <?php |
| [2193](#L2193) | $dateUntil = date('Y-m-d', strtotime($ad['ad\_valid\_date'])); |
| [2194](#L2194) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code "%s" valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2195](#L2195) | ?> |
| [2196](#L2196) | </li> |
| [2197](#L2197) | <?php endforeach; ?> |
| [2198](#L2198) | </ul> |
| [2199](#L2199) | <?php endif; ?> |
| [2200](#L2200) | <?php else: ?> |
| [2201](#L2201) | <h3>Special Offers from CreativeMinds</h3> |
| [2202](#L2202) |  |
| [2203](#L2203) | <p> |
| [2204](#L2204) | <a href="javascript:void(0)" id="cminds-unskip">Complete <?php echo esc\_attr($currentPlugin->getOption('plugin-name')); ?> registration</a> and receive special offers |
| [2205](#L2205) | </p> |
| [2206](#L2206) | <?php endif; ?> |
| [2207](#L2207) | <div class="clear clearfix cmclearfix"></div> |
| [2208](#L2208) | <?php |
| [2209](#L2209) | $content = ob\_get\_clean(); |
| [2210](#L2210) | return $content; |
| [2211](#L2211) | } |
| [2212](#L2212) |  |
| [2213](#L2213) | public function getRegistrationFields() { |
| [2214](#L2214) | $fields = array( |
| [2215](#L2215) | 'product\_name'   => $this->getOption('plugin-name'), |
| [2216](#L2216) | 'remote\_url'     => get\_bloginfo('wpurl'), |
| [2217](#L2217) | 'remote\_ip'      => $\_SERVER['SERVER\_ADDR'], |
| [2218](#L2218) | 'remote\_country' => '', |
| [2219](#L2219) | 'remote\_city'    => '', |
| [2220](#L2220) | 'email'          => get\_bloginfo('admin\_email'), |
| [2221](#L2221) | 'hostname'       => get\_bloginfo('wpurl'), |
| [2222](#L2222) | 'username'       => '', |
| [2223](#L2223) | ); |
| [2224](#L2224) |  |
| [2225](#L2225) | $output = ''; |
| [2226](#L2226) |  |
| [2227](#L2227) | foreach ($fields as $key => $value) { |
| [2228](#L2228) | $output .= sprintf('<input type="hidden" name="%s" value="%s" />', $key, $value); |
| [2229](#L2229) | } |
| [2230](#L2230) |  |
| [2231](#L2231) | return $output; |
| [2232](#L2232) | } |
| [2233](#L2233) |  |
| [2234](#L2234) | public function isSkipped($id = null) { |
| [2235](#L2235) | global $cmindsPluginPackage; |
| [2236](#L2236) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2237](#L2237) | $isSkipped = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'); |
| [2238](#L2238) | return $isSkipped; |
| [2239](#L2239) | } |
| [2240](#L2240) |  |
| [2241](#L2241) | public function isRegistered($id = null) { |
| [2242](#L2242) | global $cmindsPluginPackage; |
| [2243](#L2243) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2244](#L2244) | $isRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'); |
| [2245](#L2245) | return $isRegistered; |
| [2246](#L2246) | } |
| [2247](#L2247) |  |
| [2248](#L2248) | public function wasRegistered($id = null) { |
| [2249](#L2249) | global $cmindsPluginPackage; |
| [2250](#L2250) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2251](#L2251) | $wasRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'); |
| [2252](#L2252) | return $wasRegistered; |
| [2253](#L2253) | } |
| [2254](#L2254) |  |
| [2255](#L2255) | public function setWasRegistered($id = null) { |
| [2256](#L2256) | global $cmindsPluginPackage; |
| [2257](#L2257) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2258](#L2258) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'; |
| [2259](#L2259) | $result = update\_option($optionName, 1); |
| [2260](#L2260) | return $result; |
| [2261](#L2261) | } |
| [2262](#L2262) |  |
| [2263](#L2263) | /\*\* |
| [2264](#L2264) | \* Function comminicates with our server to remove the user from our database (right to be forgotten) |
| [2265](#L2265) | \* @global array $cmindsPluginPackage |
| [2266](#L2266) | \* @param type $atts |
| [2267](#L2267) | \* @return type |
| [2268](#L2268) | \*/ |
| [2269](#L2269) | public function deregisterUser($atts = array()) { |
| [2270](#L2270) | global $cmindsPluginPackage; |
| [2271](#L2271) |  |
| [2272](#L2272) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2273](#L2273) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2274](#L2274) |  |
| [2275](#L2275) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2276](#L2276) | $post = filter\_input\_array(INPUT\_POST); |
| [2277](#L2277) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2278](#L2278) |  |
| [2279](#L2279) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2280](#L2280) | if ($nonceCheck) { |
| [2281](#L2281) |  |
| [2282](#L2282) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2283](#L2283) | return; |
| [2284](#L2284) | } |
| [2285](#L2285) |  |
| [2286](#L2286) | unset($post['cminds\_nonce']); |
| [2287](#L2287) | $jsonData = wp\_json\_encode(array($post)); |
| [2288](#L2288) |  |
| [2289](#L2289) | $args = array( |
| [2290](#L2290) | 'body' => array( |
| [2291](#L2291) | 'jsonData' => $jsonData |
| [2292](#L2292) | ) |
| [2293](#L2293) | ); |
| [2294](#L2294) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2295](#L2295) | $response = wp\_remote\_post($href, $args); |
| [2296](#L2296) | if (!is\_wp\_error($response)) { |
| [2297](#L2297) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2298](#L2298) | if ($result && 1 === $result['result']) { |
| [2299](#L2299) | update\_option($optionName, 0); |
| [2300](#L2300) | } |
| [2301](#L2301) | } else { |
| [2302](#L2302) | $args['sslverify'] = false; |
| [2303](#L2303) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2304](#L2304) | $response = wp\_remote\_post($href, $args); |
| [2305](#L2305) | if (!is\_wp\_error($response)) { |
| [2306](#L2306) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2307](#L2307) | if ($result && 1 === $result['result']) { |
| [2308](#L2308) | update\_option($optionName, 0); |
| [2309](#L2309) | } |
| [2310](#L2310) | } else { |
| [2311](#L2311) | $message = 'User has requested the deregistration: <br/><table>'; |
| [2312](#L2312) | foreach ($post as $key => $value) { |
| [2313](#L2313) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2314](#L2314) | continue; |
| [2315](#L2315) | } |
| [2316](#L2316) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2317](#L2317) | } |
| [2318](#L2318) | $message .= '</table>'; |
| [2319](#L2319) |  |
| [2320](#L2320) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2321](#L2321) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration Canceled', $message); |
| [2322](#L2322) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2323](#L2323) | } |
| [2324](#L2324) | } |
| [2325](#L2325) | update\_option($optionName, 0); |
| [2326](#L2326) | } |
| [2327](#L2327) | } |
| [2328](#L2328) | } |
| [2329](#L2329) |  |
| [2330](#L2330) | public function skipRegistration($atts = array()) { |
| [2331](#L2331) | global $cmindsPluginPackage; |
| [2332](#L2332) |  |
| [2333](#L2333) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2334](#L2334) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2335](#L2335) |  |
| [2336](#L2336) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2337](#L2337) | update\_option($optionName, 1); |
| [2338](#L2338) | } |
| [2339](#L2339) |  |
| [2340](#L2340) | public function unskipRegistration($atts = array()) { |
| [2341](#L2341) | global $cmindsPluginPackage; |
| [2342](#L2342) |  |
| [2343](#L2343) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2344](#L2344) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2345](#L2345) |  |
| [2346](#L2346) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2347](#L2347) | update\_option($optionName, 0); |
| [2348](#L2348) | } |
| [2349](#L2349) |  |
| [2350](#L2350) | /\*\* |
| [2351](#L2351) | \* Function communicates with our server to register user's e-mail in our database. |
| [2352](#L2352) | \* It's an optional step, user can easily skip it. We only collect e-mail and the url of the site. |
| [2353](#L2353) | \* User is being informed about the data being collected and the reason why it's collected. |
| [2354](#L2354) | \* @global array $cmindsPluginPackage |
| [2355](#L2355) | \* @param type $atts |
| [2356](#L2356) | \* @return type |
| [2357](#L2357) | \*/ |
| [2358](#L2358) | public function registerUser($atts = array()) { |
| [2359](#L2359) | global $cmindsPluginPackage; |
| [2360](#L2360) |  |
| [2361](#L2361) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2362](#L2362) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2363](#L2363) |  |
| [2364](#L2364) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2365](#L2365) | $post = filter\_input\_array(INPUT\_POST); |
| [2366](#L2366) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2367](#L2367) |  |
| [2368](#L2368) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2369](#L2369) | if ($nonceCheck) { |
| [2370](#L2370) |  |
| [2371](#L2371) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2372](#L2372) | return; |
| [2373](#L2373) | } |
| [2374](#L2374) |  |
| [2375](#L2375) | unset($post['cminds\_nonce']); |
| [2376](#L2376) | $jsonData = wp\_json\_encode(array($post)); |
| [2377](#L2377) |  |
| [2378](#L2378) | $args = array( |
| [2379](#L2379) | 'body' => array( |
| [2380](#L2380) | 'jsonData' => $jsonData |
| [2381](#L2381) | ) |
| [2382](#L2382) | ); |
| [2383](#L2383) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2384](#L2384) | $response = wp\_remote\_post($href, $args); |
| [2385](#L2385) | if (!is\_wp\_error($response)) { |
| [2386](#L2386) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2387](#L2387) | if ($result && 1 === $result['result']) { |
| [2388](#L2388) | update\_option($optionName, 1); |
| [2389](#L2389) | $currentPlugin->setWasRegistered(); |
| [2390](#L2390) | } |
| [2391](#L2391) | } else { |
| [2392](#L2392) | $args['sslverify'] = false; |
| [2393](#L2393) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2394](#L2394) | $response = wp\_remote\_post($href, $args); |
| [2395](#L2395) | if (!is\_wp\_error($response)) { |
| [2396](#L2396) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2397](#L2397) | if ($result && 1 === $result['result']) { |
| [2398](#L2398) | update\_option($optionName, 1); |
| [2399](#L2399) | $currentPlugin->setWasRegistered(); |
| [2400](#L2400) | } |
| [2401](#L2401) | } else { |
| [2402](#L2402) | $message = 'Registered fields: <br/><table>'; |
| [2403](#L2403) | foreach ($post as $key => $value) { |
| [2404](#L2404) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2405](#L2405) | continue; |
| [2406](#L2406) | } |
| [2407](#L2407) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2408](#L2408) | } |
| [2409](#L2409) | $message .= '</table>'; |
| [2410](#L2410) |  |
| [2411](#L2411) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2412](#L2412) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration', $message); |
| [2413](#L2413) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2414](#L2414) | } |
| [2415](#L2415) | } |
| [2416](#L2416) | } |
| [2417](#L2417) | } |
| [2418](#L2418) | } |
| [2419](#L2419) |  |
| [2420](#L2420) | public function showRegistration($atts = array()) { |
| [2421](#L2421) | global $cmindsPluginPackage; |
| [2422](#L2422) |  |
| [2423](#L2423) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2424](#L2424) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2425](#L2425) |  |
| [2426](#L2426) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-hidden'; |
| [2427](#L2427) | $registrationHide = filter\_input(INPUT\_GET, 'cminds\_registration\_hide'); |
| [2428](#L2428) | if ($registrationHide) { |
| [2429](#L2429) | update\_option($optionName, 1); |
| [2430](#L2430) | } |
| [2431](#L2431) | $registrationShow = filter\_input(INPUT\_GET, 'cminds\_registration\_show'); |
| [2432](#L2432) | if ($registrationShow) { |
| [2433](#L2433) | delete\_option($optionName); |
| [2434](#L2434) | } |
| [2435](#L2435) | $registrationHidden = get\_option($optionName); |
| [2436](#L2436) |  |
| [2437](#L2437) | $this->registerUser($atts); |
| [2438](#L2438) |  |
| [2439](#L2439) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2440](#L2440) | $isRegistered = $this->isRegistered(); |
| [2441](#L2441) |  |
| [2442](#L2442) | if ($isRegistered) : |
| [2443](#L2443) | return $this->showAds($atts); |
| [2444](#L2444) | else : |
| [2445](#L2445) | ob\_start(); |
| [2446](#L2446) | ?> |
| [2447](#L2447) | <style type="text/css"> |
| [2448](#L2448) |  |
| [2449](#L2449) | div.cminds\_registration\_wrapper { |
| [2450](#L2450) | display: inline-block; |
| [2451](#L2451) | padding: 1em; |
| [2452](#L2452) | background: #FFF; |
| [2453](#L2453) | margin: 1em 1em 0 0; |
| [2454](#L2454) | width: 1004px; |
| [2455](#L2455) | } |
| [2456](#L2456) |  |
| [2457](#L2457) | div.cminds\_registration\_wrapper \* { |
| [2458](#L2458) | vertical-align: top; |
| [2459](#L2459) | } |
| [2460](#L2460) |  |
| [2461](#L2461) | .cminds\_registration{ |
| [2462](#L2462) | display: inline-block; |
| [2463](#L2463) | margin: 1em; |
| [2464](#L2464) | padding: 1em 58px; |
| [2465](#L2465) | } |
| [2466](#L2466) |  |
| [2467](#L2467) | .cminds\_registration form{ |
| [2468](#L2468) | display: inline-block; |
| [2469](#L2469) | margin: 1em; |
| [2470](#L2470) | } |
| [2471](#L2471) | .cminds\_registration form .no-registration{ |
| [2472](#L2472) | margin: 5px 0 0; |
| [2473](#L2473) | text-align: center; |
| [2474](#L2474) | } |
| [2475](#L2475) |  |
| [2476](#L2476) | .cminds\_registration form input[type="submit"]{ |
| [2477](#L2477) | font-size: 16pt; |
| [2478](#L2478) | padding: 7px; |
| [2479](#L2479) | height: auto; |
| [2480](#L2480) | } |
| [2481](#L2481) |  |
| [2482](#L2482) | .cminds\_registration\_text{ |
| [2483](#L2483) | display: inline-block; |
| [2484](#L2484) | margin: 1em; |
| [2485](#L2485) | } |
| [2486](#L2486) |  |
| [2487](#L2487) | .cminds\_registration\_text > span{ |
| [2488](#L2488) | text-align: left; |
| [2489](#L2489) | display: block; |
| [2490](#L2490) | } |
| [2491](#L2491) |  |
| [2492](#L2492) | .cminds\_registration\_text .row\_1{ |
| [2493](#L2493) | font-size: 12pt; |
| [2494](#L2494) | padding-bottom: 5px; |
| [2495](#L2495) | } |
| [2496](#L2496) | .cminds\_registration\_text .row\_2{ |
| [2497](#L2497) | font-size: 10pt; |
| [2498](#L2498) | } |
| [2499](#L2499) |  |
| [2500](#L2500) | .cminds\_link{ |
| [2501](#L2501) | color: #555; |
| [2502](#L2502) | border-color: rgba(204,204,204,0.8); |
| [2503](#L2503) | background: #f7f7f7; |
| [2504](#L2504) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2505](#L2505) | box-shadow: 0 1px 0 #ccc; |
| [2506](#L2506) | display: inline-block; |
| [2507](#L2507) | text-decoration: none; |
| [2508](#L2508) | line-height: 26px; |
| [2509](#L2509) | height: 28px; |
| [2510](#L2510) | padding: 0 10px 1px; |
| [2511](#L2511) | cursor: pointer; |
| [2512](#L2512) | border-width: 1px; |
| [2513](#L2513) | border-style: solid; |
| [2514](#L2514) | -webkit-border-radius: 3px; |
| [2515](#L2515) | border-radius: 3px; |
| [2516](#L2516) | -webkit-box-sizing: border-box; |
| [2517](#L2517) | -moz-box-sizing: border-box; |
| [2518](#L2518) | box-sizing: border-box; |
| [2519](#L2519) | } |
| [2520](#L2520) |  |
| [2521](#L2521) | .cminds\_link:active { |
| [2522](#L2522) | background: #eee; |
| [2523](#L2523) | border-color: #999; |
| [2524](#L2524) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2525](#L2525) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2526](#L2526) | -webkit-transform: translateY(1px); |
| [2527](#L2527) | -ms-transform: translateY(1px); |
| [2528](#L2528) | transform: translateY(1px); |
| [2529](#L2529) | } |
| [2530](#L2530) |  |
| [2531](#L2531) | .cminds\_link:hover { |
| [2532](#L2532) | background: #eee; |
| [2533](#L2533) | border-color: #999; |
| [2534](#L2534) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2535](#L2535) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2536](#L2536) | -webkit-transform: translateY(1px); |
| [2537](#L2537) | -ms-transform: translateY(1px); |
| [2538](#L2538) | transform: translateY(1px); |
| [2539](#L2539) | } |
| [2540](#L2540) |  |
| [2541](#L2541) | .cminds\_link.blue{ |
| [2542](#L2542) | color: #fff; |
| [2543](#L2543) | border-color: #33ace7; |
| [2544](#L2544) | background: #66c1ed; |
| [2545](#L2545) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2546](#L2546) | box-shadow: 0 1px 0 #ccc; |
| [2547](#L2547) | display: inline-block; |
| [2548](#L2548) | text-decoration: none; |
| [2549](#L2549) | line-height: 26px; |
| [2550](#L2550) | height: 28px; |
| [2551](#L2551) | padding: 0 10px 1px; |
| [2552](#L2552) | cursor: pointer; |
| [2553](#L2553) | border-width: 1px; |
| [2554](#L2554) | border-style: solid; |
| [2555](#L2555) | -webkit-border-radius: 3px; |
| [2556](#L2556) | border-radius: 3px; |
| [2557](#L2557) | -webkit-box-sizing: border-box; |
| [2558](#L2558) | -moz-box-sizing: border-box; |
| [2559](#L2559) | box-sizing: border-box; |
| [2560](#L2560) |  |
| [2561](#L2561) | } |
| [2562](#L2562) |  |
| [2563](#L2563) | .cminds\_link.blue:active { |
| [2564](#L2564) | background: #0198e1; |
| [2565](#L2565) | border-color: #66c1ed; |
| [2566](#L2566) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2567](#L2567) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2568](#L2568) | -webkit-transform: translateY(1px); |
| [2569](#L2569) | -ms-transform: translateY(1px); |
| [2570](#L2570) | transform: translateY(1px); |
| [2571](#L2571) | } |
| [2572](#L2572) |  |
| [2573](#L2573) | .cminds\_link.blue:hover { |
| [2574](#L2574) | background: #005b87; |
| [2575](#L2575) | border-color: #0198e1; |
| [2576](#L2576) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2577](#L2577) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2578](#L2578) | -webkit-transform: translateY(1px); |
| [2579](#L2579) | -ms-transform: translateY(1px); |
| [2580](#L2580) | transform: translateY(1px); |
| [2581](#L2581) | } |
| [2582](#L2582) |  |
| [2583](#L2583) | .cminds\_link.orange{ |
| [2584](#L2584) | color: #fff; |
| [2585](#L2585) | border-color: #ffb752; |
| [2586](#L2586) | background: #ffb752; |
| [2587](#L2587) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2588](#L2588) | box-shadow: 0 1px 0 #ccc; |
| [2589](#L2589) | display: inline-block; |
| [2590](#L2590) | text-decoration: none; |
| [2591](#L2591) | line-height: 26px; |
| [2592](#L2592) | height: 28px; |
| [2593](#L2593) | padding: 0 10px 1px; |
| [2594](#L2594) | cursor: pointer; |
| [2595](#L2595) | border-width: 1px; |
| [2596](#L2596) | border-style: solid; |
| [2597](#L2597) | -webkit-border-radius: 3px; |
| [2598](#L2598) | border-radius: 3px; |
| [2599](#L2599) | -webkit-box-sizing: border-box; |
| [2600](#L2600) | -moz-box-sizing: border-box; |
| [2601](#L2601) | box-sizing: border-box; |
| [2602](#L2602) |  |
| [2603](#L2603) | } |
| [2604](#L2604) |  |
| [2605](#L2605) | .cminds\_link.orange:active { |
| [2606](#L2606) | background: #e5a449; |
| [2607](#L2607) | border-color: #ffc574; |
| [2608](#L2608) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2609](#L2609) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2610](#L2610) | -webkit-transform: translateY(1px); |
| [2611](#L2611) | -ms-transform: translateY(1px); |
| [2612](#L2612) | transform: translateY(1px); |
| [2613](#L2613) | } |
| [2614](#L2614) |  |
| [2615](#L2615) | .cminds\_link.orange:hover { |
| [2616](#L2616) | background: #e5a449; |
| [2617](#L2617) | border-color: #ffc574; |
| [2618](#L2618) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2619](#L2619) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2620](#L2620) | -webkit-transform: translateY(1px); |
| [2621](#L2621) | -ms-transform: translateY(1px); |
| [2622](#L2622) | transform: translateY(1px); |
| [2623](#L2623) | } |
| [2624](#L2624) |  |
| [2625](#L2625) | .clear, .clearfix{ |
| [2626](#L2626) | clear:both; |
| [2627](#L2627) | } |
| [2628](#L2628) | .cmclearfix{ |
| [2629](#L2629) | clear:both !important; |
| [2630](#L2630) | } |
| [2631](#L2631) |  |
| [2632](#L2632) | </style> |
| [2633](#L2633) |  |
| [2634](#L2634) | <?php if (!$registrationHidden) : ?> |
| [2635](#L2635) |  |
| [2636](#L2636) | <div class="cminds\_registration\_wrapper"> |
| [2637](#L2637) | <div class="cminds\_registration"> |
| [2638](#L2638) | <table><tr> |
| [2639](#L2639) | <td> |
| [2640](#L2640) | <form method="post" action=""> |
| [2641](#L2641) | <?php |
| [2642](#L2642) | wp\_nonce\_field('cminds\_register\_free', 'cminds\_nonce'); |
| [2643](#L2643) | echo $currentPlugin->getRegistrationFields(); |
| [2644](#L2644) | ?> |
| [2645](#L2645) | <input class="button button-primary" style="background-color:green;" type="submit" value="Register Your Copy" /> |
| [2646](#L2646) | <div class="no-registration"> |
| [2647](#L2647) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_hide' => 1), remove\_query\_arg('cminds\_registration\_show'))); ?>">I don't want to register now</a> |
| [2648](#L2648) | </div> |
| [2649](#L2649) | </form> |
| [2650](#L2650) | </td> |
| [2651](#L2651) | <td> |
| [2652](#L2652) | <div class="cminds\_registration\_text"> |
| [2653](#L2653) | <span class="row\_1"> |
| [2654](#L2654) | Once registered, you will receive updates and special offers. |
| [2655](#L2655) | </span> |
| [2656](#L2656) | <span class="row\_2"> |
| [2657](#L2657) | <p>We will only send once, your administrator's e-mail and site URL to CreativeMinds server.<br /> No additional information will be ever collected or sent.</p> |
| [2658](#L2658) | </span> |
| [2659](#L2659) | </td> |
| [2660](#L2660) | </tr> |
| [2661](#L2661) | </table> |
| [2662](#L2662) | </div> |
| [2663](#L2663) | </div> |
| [2664](#L2664) | </div> |
| [2665](#L2665) | <?php else : ?> |
| [2666](#L2666) | <div class="cminds\_registration\_wrapper"> |
| [2667](#L2667) | <div> |
| [2668](#L2668) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_show' => 1), remove\_query\_arg('cminds\_registration\_hide'))); ?>">Show registration box</a> |
| [2669](#L2669) | <a href="<?php echo $this->getStoreUrl(); ?>" class="cminds\_link orange" target="\_blank">View all CreativeMidns Plugins</a> |
| [2670](#L2670) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Bundle')); ?>" class="cminds\_link blue" target="\_blank">View Bundles</a> |
| [2671](#L2671) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Add-On')); ?>" class="cminds\_link blue" target="\_blank">View Add-Ons</a> |
| [2672](#L2672) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Service')); ?>" class="cminds\_link blue" target="\_blank">View Services</a> |
| [2673](#L2673) | </div> |
| [2674](#L2674) | </div> |
| [2675](#L2675) | <?php |
| [2676](#L2676) | endif; |
| [2677](#L2677) | echo $this->showUpgrade($atts); |
| [2678](#L2678) | ?> |
| [2679](#L2679) | <div class="clear clearfix cmclearfix"></div> |
| [2680](#L2680) | <?php |
| [2681](#L2681) | $content = ob\_get\_clean(); |
| [2682](#L2682) | return $content; |
| [2683](#L2683) | endif; |
| [2684](#L2684) | } |
| [2685](#L2685) |  |
| [2686](#L2686) | /\*\* |
| [2687](#L2687) | \* Displays the horizontal navigation bar |
| [2688](#L2688) | \* @global string $submenu |
| [2689](#L2689) | \* @global type $plugin\_page |
| [2690](#L2690) | \*/ |
| [2691](#L2691) | protected function showNav() { |
| [2692](#L2692) |  |
| [2693](#L2693) | global $self, $plugin\_page, $typenow, $submenu; |
| [2694](#L2694) |  |
| [2695](#L2695) | $submenus = array(); |
| [2696](#L2696) | $menuItem = $this->getOption('plugin-menu-item'); |
| [2697](#L2697) | $pluginAbbrev = $this->getOption('plugin-abbrev'); |
| [2698](#L2698) |  |
| [2699](#L2699) | ob\_start(); |
| [2700](#L2700) |  |
| [2701](#L2701) | if (isset($submenu[$menuItem])) { |
| [2702](#L2702) |  |
| [2703](#L2703) | $thisMenu = $submenu[$menuItem]; |
| [2704](#L2704) |  |
| [2705](#L2705) | foreach ($thisMenu as $sub\_item) { |
| [2706](#L2706) |  |
| [2707](#L2707) | $slug = $sub\_item[2]; |
| [2708](#L2708) |  |
| [2709](#L2709) | // Handle current for post\_type=post|page|foo pages, which won't match $self. |
| [2710](#L2710) | $self\_type = !empty($typenow) ? $self . '?post\_type=' . $typenow : 'nothing'; |
| [2711](#L2711) |  |
| [2712](#L2712) | $isCurrent = FALSE; |
| [2713](#L2713) |  |
| [2714](#L2714) | $subpageUrl = get\_admin\_url('', 'admin.php?page=' . $slug); |
| [2715](#L2715) |  |
| [2716](#L2716) | if ((!isset($plugin\_page) && $self == $slug) || ( isset($plugin\_page) && $plugin\_page == $slug && ( $menuItem == $self\_type || $menuItem == $self || file\_exists($menuItem) === false ))) { |
| [2717](#L2717) | $isCurrent = TRUE; |
| [2718](#L2718) | } |
| [2719](#L2719) |  |
| [2720](#L2720) | $url = ( strpos($slug, '.php') !== false || strpos($slug, 'http://') !== false || strpos($slug, 'https://') !== false ) ? $slug : $subpageUrl; |
| [2721](#L2721) |  |
| [2722](#L2722) | $isExternal = ( $slug === $url ) ? TRUE : FALSE; |
| [2723](#L2723) |  |
| [2724](#L2724) | /\* |
| [2725](#L2725) | \* Don't show on the Upgrade page itself |
| [2726](#L2726) | \*/ |
| [2727](#L2727) | if (!empty($\_GET['page']) && $\_GET['page'] == $pluginAbbrev . '\_pro' && $slug == $pluginAbbrev . '\_pro') { |
| [2728](#L2728) | continue; |
| [2729](#L2729) | } |
| [2730](#L2730) |  |
| [2731](#L2731) | $submenus[] = array( |
| [2732](#L2732) | 'link'     => $url, |
| [2733](#L2733) | 'title'    => $sub\_item[0], |
| [2734](#L2734) | 'current'  => $isCurrent, |
| [2735](#L2735) | 'external' => $isExternal |
| [2736](#L2736) | ); |
| [2737](#L2737) | } |
| [2738](#L2738) | ?> |
| [2739](#L2739) | <div id="cmhandfsl\_admin\_nav"> |
| [2740](#L2740) | <ul class="subsubsub"> |
| [2741](#L2741) | <?php foreach ($submenus as $menu): ?> |
| [2742](#L2742) |  |
| [2743](#L2743) | <li><a href="<?php echo esc\_attr($menu['link']); ?>" <?php echo ( $menu['current'] ) ? 'class="current"' : ''; ?> <?php |
| [2744](#L2744) | if ($menu['external']) { |
| [2745](#L2745) | echo 'target="\_blank"'; |
| [2746](#L2746) | } |
| [2747](#L2747) | ?>><?php echo esc\_html($menu['title']); ?> |
| [2748](#L2748) | </a></li> |
| [2749](#L2749) | <?php endforeach; ?> |
| [2750](#L2750) | </ul> |
| [2751](#L2751) | <br class="clear" /> |
| [2752](#L2752) | </div> |
| [2753](#L2753) | <?php |
| [2754](#L2754) | } |
| [2755](#L2755) |  |
| [2756](#L2756) | $nav = ob\_get\_contents(); |
| [2757](#L2757) | ob\_end\_clean(); |
| [2758](#L2758) | return $nav; |
| [2759](#L2759) | } |
| [2760](#L2760) |  |
| [2761](#L2761) | public function cminds\_compatibility\_check($plaintext = false) { |
| [2762](#L2762) | global $wp\_version; |
| [2763](#L2763) | $upload\_max = ini\_get('upload\_max\_filesize') ? ini\_get('upload\_max\_filesize') : 'N/A'; |
| [2764](#L2764) | $post\_max = ini\_get('post\_max\_size') ? ini\_get('post\_max\_size') : 'N/A'; |
| [2765](#L2765) | $memory\_limit = ini\_get('memory\_limit') ? ini\_get('memory\_limit') : 'N/A'; |
| [2766](#L2766) | $allow\_url\_fopen = ini\_get('allow\_url\_fopen') ? ini\_get('allow\_url\_fopen') : 'N/A'; |
| [2767](#L2767) | $max\_execution\_time = ini\_get('max\_execution\_time') !== FALSE ? ini\_get('max\_execution\_time') : 'N/A'; |
| [2768](#L2768) | $cURL = function\_exists('curl\_version') ? 'On' : 'Off'; |
| [2769](#L2769) | $mb\_support = function\_exists('mb\_strtolower') ? 'On' : 'Off'; |
| [2770](#L2770) | $intl\_support = extension\_loaded('intl') ? 'On' : 'Off'; |
| [2771](#L2771) | $iconv\_support = extension\_loaded('iconv') ? 'On' : 'Off'; |
| [2772](#L2772) |  |
| [2773](#L2773) | $permalink\_structure = get\_option('permalink\_structure'); |
| [2774](#L2774) | $permalinksurl = self\_admin\_url('options-permalink.php'); |
| [2775](#L2775) |  |
| [2776](#L2776) | $content = ''; |
| [2777](#L2777) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2778](#L2778) | ob\_start(); |
| [2779](#L2779) | if (!$plaintext): |
| [2780](#L2780) | ?> |
| [2781](#L2781) | <span class="description" style=""> |
| [2782](#L2782) | The information in this table is useful to check if the plugin might have some incompabilities with you server. |
| [2783](#L2783) | </span> |
| [2784](#L2784) | <table class="form-table server-info-table"> |
| [2785](#L2785) | <tr> |
| [2786](#L2786) | <td>Package Version</td> |
| [2787](#L2787) | <td><?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?></td> |
| [2788](#L2788) | <td><span>OK</span></td> |
| [2789](#L2789) | </tr> |
| [2790](#L2790) | <tr> |
| [2791](#L2791) | <td>WordPress Version</td> |
| [2792](#L2792) | <td><?php echo $wp\_version; ?></td> |
| [2793](#L2793) | <td><?php if (version\_compare($wp\_version, '3.3.0', '<')): ?><strong>The minimum supported version of WordPress is 3.3</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2794](#L2794) | </tr> |
| [2795](#L2795) | <tr> |
| [2796](#L2796) | <td>Permalinks enabled</td> |
| [2797](#L2797) | <td><?php echo ($permalink\_structure) ? 'Yes' : 'No' ?></td> |
| [2798](#L2798) | <td><?php if (empty($permalink\_structure)): ?><strong>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a></strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2799](#L2799) | </tr> |
| [2800](#L2800) | <tr> |
| [2801](#L2801) | <td>PHP Version</td> |
| [2802](#L2802) | <td><?php echo phpversion(); ?></td> |
| [2803](#L2803) | <td><?php if (version\_compare(phpversion(), '5.3.0', '<')): ?><strong>Recommended 5.3 or higher</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2804](#L2804) | </tr> |
| [2805](#L2805) | <tr> |
| [2806](#L2806) | <td>mbstring support</td> |
| [2807](#L2807) | <td><?php echo $mb\_support; ?></td> |
| [2808](#L2808) | <td><?php if ($mb\_support == 'Off'): ?> |
| [2809](#L2809) | <strong>"mbstring" library is required for plugin to work.</strong> |
| [2810](#L2810) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2811](#L2811) | </tr> |
| [2812](#L2812) | <tr> |
| [2813](#L2813) | <td>intl support</td> |
| [2814](#L2814) | <td><?php echo $intl\_support; ?></td> |
| [2815](#L2815) | <td><?php if ($intl\_support == 'Off'): ?> |
| [2816](#L2816) | <strong>"intl" library is required for proper sorting of accented (non-ASCII) characters.</strong> |
| [2817](#L2817) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2818](#L2818) | </tr> |
| [2819](#L2819) | <tr> |
| [2820](#L2820) | <td>iconv support</td> |
| [2821](#L2821) | <td><?php echo $iconv\_support; ?></td> |
| [2822](#L2822) | <td><?php if ($iconv\_support == 'Off'): ?> |
| [2823](#L2823) | <strong>"iconv" library is required for converting non-UTF-8 characters.</strong> |
| [2824](#L2824) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2825](#L2825) | </tr> |
| [2826](#L2826) | <tr> |
| [2827](#L2827) | <td>PHP Memory Limit</td> |
| [2828](#L2828) | <td><?php echo $memory\_limit; ?></td> |
| [2829](#L2829) | <td><?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2830](#L2830) | <strong>This value can be too low for a site with big glossary.</strong> |
| [2831](#L2831) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2832](#L2832) | </tr> |
| [2833](#L2833) | <tr> |
| [2834](#L2834) | <td>PHP Max Upload Size</td> |
| [2835](#L2835) | <td><?php echo $upload\_max; ?></td> |
| [2836](#L2836) | <td><?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2837](#L2837) | <strong>This value can be too low to import large files.</strong> |
| [2838](#L2838) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2839](#L2839) | </tr> |
| [2840](#L2840) | <tr> |
| [2841](#L2841) | <td>PHP Max Post Size</td> |
| [2842](#L2842) | <td><?php echo $post\_max; ?></td> |
| [2843](#L2843) | <td><?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2844](#L2844) | <strong>This value can be too low to import large files.</strong> |
| [2845](#L2845) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2846](#L2846) | </tr> |
| [2847](#L2847) | <tr> |
| [2848](#L2848) | <td>PHP Max Execution Time </td> |
| [2849](#L2849) | <td><?php echo $max\_execution\_time; ?></td> |
| [2850](#L2850) | <td><?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2851](#L2851) | <strong>This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit.</strong> |
| [2852](#L2852) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2853](#L2853) | </tr> |
| [2854](#L2854) | <tr> |
| [2855](#L2855) | <td>PHP cURL</td> |
| [2856](#L2856) | <td><?php echo $cURL; ?></td> |
| [2857](#L2857) | <td><?php if ($cURL == 'Off'): ?> |
| [2858](#L2858) | <strong>cURL library is required to check if remote audio file exists.</strong> |
| [2859](#L2859) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2860](#L2860) | </tr> |
| [2861](#L2861) | <tr> |
| [2862](#L2862) | <td>PHP allow\_url\_fopen</td> |
| [2863](#L2863) | <td><?php echo $allow\_url\_fopen; ?></td> |
| [2864](#L2864) | <td><?php if ($allow\_url\_fopen == '0'): ?> |
| [2865](#L2865) | <strong>allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API.</strong> |
| [2866](#L2866) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2867](#L2867) | </tr> |
| [2868](#L2868) | </table> |
| [2869](#L2869) | <?php |
| [2870](#L2870) | else: |
| [2871](#L2871) | ?> |
| [2872](#L2872) | Package Version         <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?>    OK |
| [2873](#L2873) |  |
| [2874](#L2874) | WordPress Version               <?php echo $wp\_version; ?> |
| [2875](#L2875) | <?php if (version\_compare($wp\_version, '3.3.0', '<')): ?>The minimum supported version of WordPress is 3.3<?php else: ?>OK<?php endif; ?> |
| [2876](#L2876) |  |
| [2877](#L2877) | Permalinks enabled              <?php echo ($permalink\_structure) ? 'Yes' : 'No' ?> |
| [2878](#L2878) | <?php if (empty($permalink\_structure)): ?>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a><?php else: ?>OK<?php endif; ?> |
| [2879](#L2879) |  |
| [2880](#L2880) | PHP Version             <?php echo phpversion(); ?> |
| [2881](#L2881) | <?php if (version\_compare(phpversion(), '5.3.0', '<')): ?>Recommended 5.3 or higher<?php else: ?>OK<?php endif; ?> |
| [2882](#L2882) |  |
| [2883](#L2883) | mbstring support                <?php echo $mb\_support; ?> |
| [2884](#L2884) | <?php if ($mb\_support == 'Off'): ?> |
| [2885](#L2885) | "mbstring" library is required for plugin to work. |
| [2886](#L2886) | <?php else: ?>OK<?php endif; ?> |
| [2887](#L2887) |  |
| [2888](#L2888) | intl support            <?php echo $intl\_support; ?> |
| [2889](#L2889) | <?php if ($intl\_support == 'Off'): ?> |
| [2890](#L2890) | "intl" library is required for proper sorting of accented characters on Glossary Index page. |
| [2891](#L2891) | <?php else: ?>OK<?php endif; ?> |
| [2892](#L2892) |  |
| [2893](#L2893) | PHP Memory Limit                <?php echo $memory\_limit; ?> |
| [2894](#L2894) | <?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2895](#L2895) | This value can be too low for a site with big glossary. |
| [2896](#L2896) | <?php else: ?>OK<?php endif; ?> |
| [2897](#L2897) |  |
| [2898](#L2898) | PHP Max Upload Size             <?php echo $upload\_max; ?> |
| [2899](#L2899) | <?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2900](#L2900) | This value can be too low to import large files. |
| [2901](#L2901) | <?php else: ?>OK<?php endif; ?> |
| [2902](#L2902) |  |
| [2903](#L2903) | PHP Max Post Size               <?php echo $post\_max; ?> |
| [2904](#L2904) | <?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2905](#L2905) | This value can be too low to import large files. |
| [2906](#L2906) | <?php else: ?>OK<?php endif; ?> |
| [2907](#L2907) |  |
| [2908](#L2908) | PHP Max Execution Time          <?php echo $max\_execution\_time; ?> |
| [2909](#L2909) | <?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2910](#L2910) | This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit. |
| [2911](#L2911) | <?php else: ?>OK<?php endif; ?> |
| [2912](#L2912) |  |
| [2913](#L2913) | PHP cURL                <?php echo $cURL; ?> |
| [2914](#L2914) | <?php if ($cURL == 'Off'): ?> |
| [2915](#L2915) | cURL library is required to check if remote audio file exists. |
| [2916](#L2916) | <?php else: ?>OK<?php endif; ?> |
| [2917](#L2917) |  |
| [2918](#L2918) | PHP allow\_url\_fopen             <?php echo $allow\_url\_fopen; ?> |
| [2919](#L2919) | <?php if ($allow\_url\_fopen == '0'): ?> |
| [2920](#L2920) | allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API. |
| [2921](#L2921) | <?php else: ?>OK<?php endif; ?> |
| [2922](#L2922) |  |
| [2923](#L2923) | <?php |
| [2924](#L2924) | endif; |
| [2925](#L2925) | $content .= ob\_get\_clean(); |
| [2926](#L2926) | return $content; |
| [2927](#L2927) | } |
| [2928](#L2928) |  |
| [2929](#L2929) | /\*\* |
| [2930](#L2930) | \* System info |
| [2931](#L2931) | \* |
| [2932](#L2932) | \* Shows the system info panel which contains version data and debug info. |
| [2933](#L2933) | \* The data for the system info is generated by the Browser class. |
| [2934](#L2934) | \* |
| [2935](#L2935) | \* @since 1.4 |
| [2936](#L2936) | \* @global $wpdb |
| [2937](#L2937) | \* @global object $wpdb Used to query the database using the WordPress |
| [2938](#L2938) | \*   Database API |
| [2939](#L2939) | \* @return void |
| [2940](#L2940) | \*/ |
| [2941](#L2941) | public function cminds\_system\_info() { |
| [2942](#L2942) | ?> |
| [2943](#L2943) | <div class=""> |
| [2944](#L2944) | <h2><?php \_\_('System Information', 'cminds-package'); ?></h2><br/> |
| [2945](#L2945) | <form action="<?php echo esc\_url(admin\_url('admin.php?page=cmtt\_licensing')); ?>" method="post" dir="ltr"> |
| [2946](#L2946) | <p class="submit"> |
| [2947](#L2947) | <?php wp\_nonce\_field( 'system\_information\_download\_form\_nonce', 'system\_information\_download\_form\_nonce' ); ?> |
| [2948](#L2948) | <input type="hidden" name="cminds\_action" value="download\_sysinfo" /> |
| [2949](#L2949) | <?php submit\_button('Download system information file', 'primary', 'cminds-download-sysinfo', false); ?> |
| [2950](#L2950) | </p> |
| [2951](#L2951) | <textarea class="cminds\_system\_info\_area" readonly="readonly" onclick="this.focus( ); |
| [2952](#L2952) | this.select( )" id="system-info-textarea" name="cminds-sysinfo" title="<?php \_e('To copy the system info, click below then press Ctrl + C (PC) or Cmd + C (Mac).', 'edd'); ?>"> |
| [2953](#L2953) | <?php $this->cminds\_system\_info\_content(); ?> |
| [2954](#L2954) | </textarea> |
| [2955](#L2955) | </form> |
| [2956](#L2956) | </div> |
| [2957](#L2957) | <?php |
| [2958](#L2958) | } |
| [2959](#L2959) |  |
| [2960](#L2960) | /\*\* |
| [2961](#L2961) | \* Generates the System Info Download File |
| [2962](#L2962) | \* |
| [2963](#L2963) | \* @since 1.4 |
| [2964](#L2964) | \* @return void |
| [2965](#L2965) | \*/ |
| [2966](#L2966) | public function cminds\_system\_info\_content() { |
| [2967](#L2967) | global $wpdb; |
| [2968](#L2968) |  |
| [2969](#L2969) | if (get\_bloginfo('version') < '3.4') { |
| [2970](#L2970) | $theme\_data = get\_theme\_data(get\_stylesheet\_directory() . '/style.css'); |
| [2971](#L2971) | $theme = $theme\_data['Name'] . ' ' . $theme\_data['Version']; |
| [2972](#L2972) | } else { |
| [2973](#L2973) | $theme\_data = wp\_get\_theme(); |
| [2974](#L2974) | $theme = $theme\_data->Name . ' ' . $theme\_data->Version; |
| [2975](#L2975) | } |
| [2976](#L2976) |  |
| [2977](#L2977) | // Try to identifty the hosting provider |
| [2978](#L2978) | $host = false; |
| [2979](#L2979) | if (defined('WPE\_APIKEY')) { |
| [2980](#L2980) | $host = 'WP Engine'; |
| [2981](#L2981) | } elseif (defined('PAGELYBIN')) { |
| [2982](#L2982) | $host = 'Pagely'; |
| [2983](#L2983) | } |
| [2984](#L2984) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2985](#L2985) | ?> |
| [2986](#L2986) | ### Begin System Info ### |
| [2987](#L2987) |  |
| [2988](#L2988) | ## Please include this information when posting support requests ## |
| [2989](#L2989) |  |
| [2990](#L2990) | <?php do\_action('cminds\_system\_info\_before'); ?> |
| [2991](#L2991) |  |
| [2992](#L2992) | Package Version:                <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?> |
| [2993](#L2993) |  |
| [2994](#L2994) | Multisite:                <?php echo is\_multisite() ? 'Yes' . "\n" : 'No' . "\n" ?> |
| [2995](#L2995) |  |
| [2996](#L2996) | SITE\_URL:                 <?php echo site\_url() . "\n"; ?> |
| [2997](#L2997) | HOME\_URL:                 <?php echo home\_url() . "\n"; ?> |
| [2998](#L2998) |  |
| [2999](#L2999) | WordPress Version:        <?php echo get\_bloginfo('version') . "\n"; ?> |
| [3000](#L3000) | Permalink Structure:      <?php echo get\_option('permalink\_structure') . "\n"; ?> |
| [3001](#L3001) | Active Theme:             <?php echo $theme . "\n"; ?> |
| [3002](#L3002) | <?php if ($host) : ?> |
| [3003](#L3003) | Host:                     <?php echo $host . "\n"; ?> |
| [3004](#L3004) | <?php endif; ?> |
| [3005](#L3005) |  |
| [3006](#L3006) | Registered Post Stati:    <?php echo implode(', ', get\_post\_stati()) . "\n\n"; ?> |
| [3007](#L3007) |  |
| [3008](#L3008) | PHP Version:              <?php echo PHP\_VERSION . "\n"; ?> |
| [3009](#L3009) | MySQL Version:            <?php echo (function\_exists('mysqli\_get\_server\_info')) ? mysqli\_get\_server\_info($wpdb->dbh) . "\n" : 'N/A' . "\n"; ?> |
| [3010](#L3010) | Web Server Info:          <?php echo $\_SERVER['SERVER\_SOFTWARE'] . "\n"; ?> |
| [3011](#L3011) |  |
| [3012](#L3012) | WordPress Memory Limit:   <?php echo WP\_MEMORY\_LIMIT ?><?php echo "\n"; ?> |
| [3013](#L3013) | PHP Memory Limit:         <?php echo ini\_get('memory\_limit') . "\n"; ?> |
| [3014](#L3014) | PHP Upload Max Size:      <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3015](#L3015) | PHP Post Max Size:        <?php echo ini\_get('post\_max\_size') . "\n"; ?> |
| [3016](#L3016) | PHP Upload Max Filesize:  <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3017](#L3017) | PHP Time Limit:           <?php echo ini\_get('max\_execution\_time') . "\n"; ?> |
| [3018](#L3018) | PHP Max Input Vars:       <?php echo ini\_get('max\_input\_vars') . "\n"; ?> |
| [3019](#L3019) | PHP Arg Separator:        <?php echo ini\_get('arg\_separator.output') . "\n"; ?> |
| [3020](#L3020) | PHP Allow URL File Open:  <?php echo ini\_get('allow\_url\_fopen') ? "Yes" : "No\n"; ?> |
| [3021](#L3021) |  |
| [3022](#L3022) | WP\_DEBUG:                 <?php echo defined('WP\_DEBUG') ? WP\_DEBUG ? 'Enabled' . "\n" : 'Disabled' . "\n" : 'Not set' . "\n" ?> |
| [3023](#L3023) |  |
| [3024](#L3024) | WP Table Prefix:          <?php |
| [3025](#L3025) | echo "Length: " . strlen($wpdb->prefix); |
| [3026](#L3026) | echo " Status:"; |
| [3027](#L3027) | if (strlen($wpdb->prefix) > 16) { |
| [3028](#L3028) | echo " ERROR: Too Long"; |
| [3029](#L3029) | } else { |
| [3030](#L3030) | echo " Acceptable"; |
| [3031](#L3031) | } echo "\n"; |
| [3032](#L3032) | ?> |
| [3033](#L3033) |  |
| [3034](#L3034) | Show On Front:            <?php echo get\_option('show\_on\_front') . "\n" ?> |
| [3035](#L3035) | Page On Front:            <?php |
| [3036](#L3036) | $id = get\_option('page\_on\_front'); |
| [3037](#L3037) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3038](#L3038) | ?> |
| [3039](#L3039) | Page For Posts:           <?php |
| [3040](#L3040) | $id = get\_option('page\_for\_posts'); |
| [3041](#L3041) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3042](#L3042) | ?> |
| [3043](#L3043) |  |
| [3044](#L3044) | <?php |
| [3045](#L3045) | $request['cmd'] = '\_notify-validate'; |
| [3046](#L3046) |  |
| [3047](#L3047) | $params = array( |
| [3048](#L3048) | 'sslverify'  => false, |
| [3049](#L3049) | 'timeout'    => 60, |
| [3050](#L3050) | 'user-agent' => 'Cminds/' . $this->getOption('plugin-version'), |
| [3051](#L3051) | 'body'       => $request |
| [3052](#L3052) | ); |
| [3053](#L3053) |  |
| [3054](#L3054) | $response = wp\_remote\_post('https://www.paypal.com/cgi-bin/webscr', $params); |
| [3055](#L3055) |  |
| [3056](#L3056) | if (!is\_wp\_error($response) && $response['response']['code'] >= 200 && $response['response']['code'] < 300) { |
| [3057](#L3057) | $WP\_REMOTE\_POST = 'wp\_remote\_post() works' . "\n"; |
| [3058](#L3058) | } else { |
| [3059](#L3059) | $WP\_REMOTE\_POST = 'wp\_remote\_post() does not work' . "\n"; |
| [3060](#L3060) | } |
| [3061](#L3061) | ?> |
| [3062](#L3062) | WP Remote Post:           <?php echo $WP\_REMOTE\_POST; ?> |
| [3063](#L3063) |  |
| [3064](#L3064) | Session:                  <?php echo isset($\_SESSION) ? 'Enabled' : 'Disabled'; ?><?php echo "\n"; ?> |
| [3065](#L3065) | Session Name:             <?php echo esc\_html(ini\_get('session.name')); ?><?php echo "\n"; ?> |
| [3066](#L3066) | Cookie Path:              <?php echo esc\_html(ini\_get('session.cookie\_path')); ?><?php echo "\n"; ?> |
| [3067](#L3067) | Save Path:                <?php echo esc\_html(ini\_get('session.save\_path')); ?><?php echo "\n"; ?> |
| [3068](#L3068) | Use Cookies:              <?php echo ini\_get('session.use\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3069](#L3069) | Use Only Cookies:         <?php echo ini\_get('session.use\_only\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3070](#L3070) |  |
| [3071](#L3071) | DISPLAY ERRORS:           <?php echo ( ini\_get('display\_errors') ) ? 'On (' . ini\_get('display\_errors') . ')' : 'N/A'; ?><?php echo "\n"; ?> |
| [3072](#L3072) | FSOCKOPEN:                <?php echo ( function\_exists('fsockopen') ) ? 'Your server supports fsockopen.' : 'Your server does not support fsockopen.'; ?><?php echo "\n"; ?> |
| [3073](#L3073) | cURL:                     <?php echo ( function\_exists('curl\_init') ) ? 'Your server supports cURL.' : 'Your server does not support cURL.'; ?><?php echo "\n"; ?> |
| [3074](#L3074) | SOAP Client:              <?php echo ( class\_exists('SoapClient') ) ? 'Your server has the SOAP Client enabled.' : 'Your server does not have the SOAP Client enabled.'; ?><?php echo "\n"; ?> |
| [3075](#L3075) | SUHOSIN:                  <?php echo ( extension\_loaded('suhosin') ) ? 'Your server has SUHOSIN installed.' : 'Your server does not have SUHOSIN installed.'; ?><?php echo "\n"; ?> |
| [3076](#L3076) |  |
| [3077](#L3077) | ##COMPATIBILITY |
| [3078](#L3078) |  |
| [3079](#L3079) | <?php echo $this->cminds\_compatibility\_check(true); ?> |
| [3080](#L3080) |  |
| [3081](#L3081) | ##ACTIVE PLUGINS: |
| [3082](#L3082) |  |
| [3083](#L3083) | <?php |
| [3084](#L3084) | $plugins = get\_plugins(); |
| [3085](#L3085) | $active\_plugins = get\_option('active\_plugins', array()); |
| [3086](#L3086) |  |
| [3087](#L3087) | foreach ($plugins as $plugin\_path => $plugin) { |
| [3088](#L3088) | // If the plugin isn't active, don't show it. |
| [3089](#L3089) | if (!in\_array($plugin\_path, $active\_plugins)) |
| [3090](#L3090) | continue; |
| [3091](#L3091) |  |
| [3092](#L3092) | echo $plugin['Name'] . ': ' . $plugin['Version'] . "\n"; |
| [3093](#L3093) | } |
| [3094](#L3094) |  |
| [3095](#L3095) | if (is\_multisite()) : |
| [3096](#L3096) | ?> |
| [3097](#L3097) |  |
| [3098](#L3098) | NETWORK ACTIVE PLUGINS: |
| [3099](#L3099) |  |
| [3100](#L3100) | <?php |
| [3101](#L3101) | $plugins = wp\_get\_active\_network\_plugins(); |
| [3102](#L3102) | $active\_plugins = get\_site\_option('active\_sitewide\_plugins', array()); |
| [3103](#L3103) |  |
| [3104](#L3104) | foreach ($plugins as $plugin\_path) { |
| [3105](#L3105) | $plugin\_base = plugin\_basename($plugin\_path); |
| [3106](#L3106) |  |
| [3107](#L3107) | // If the plugin isn't active, don't show it. |
| [3108](#L3108) | if (!array\_key\_exists($plugin\_base, $active\_plugins)) |
| [3109](#L3109) | continue; |
| [3110](#L3110) |  |
| [3111](#L3111) | $plugin = get\_plugin\_data($plugin\_path); |
| [3112](#L3112) |  |
| [3113](#L3113) | echo $plugin['Name'] . ' :' . $plugin['Version'] . "\n"; |
| [3114](#L3114) | } |
| [3115](#L3115) |  |
| [3116](#L3116) | endif; |
| [3117](#L3117) | do\_action('cminds\_system\_info\_after'); |
| [3118](#L3118) | ?> |
| [3119](#L3119) | ### End System Info ### |
| [3120](#L3120) | <?php |
| [3121](#L3121) | } |
| [3122](#L3122) |  |
| [3123](#L3123) | /\*\* |
| [3124](#L3124) | \* Generates the System Info Download File |
| [3125](#L3125) | \* |
| [3126](#L3126) | \* @since 1.4 |
| [3127](#L3127) | \* @return void |
| [3128](#L3128) | \*/ |
| [3129](#L3129) | public function cminds\_generate\_sysinfo\_download() { |
| [3130](#L3130) | if ( wp\_verify\_nonce( $\_POST['system\_information\_download\_form\_nonce'], 'system\_information\_download\_form\_nonce' ) ) { |
| [3131](#L3131) | nocache\_headers(); |
| [3132](#L3132) | header("Content-type: text/plain"); |
| [3133](#L3133) | header('Content-Disposition: attachment; filename="cminds-system-info.txt"'); |
| [3134](#L3134) | echo wp\_strip\_all\_tags($\_POST['cminds-sysinfo']); |
| [3135](#L3135) | die(); |
| [3136](#L3136) | } |
| [3137](#L3137) | } |
| [3138](#L3138) |  |
| [3139](#L3139) | public function getOption($key, $default = NULL) { |
| [3140](#L3140) | $value = isset($this->config[$key]) ? $this->config[$key] : $default; |
| [3141](#L3141) | return $value; |
| [3142](#L3142) | } |
| [3143](#L3143) |  |
| [3144](#L3144) | public function getPageUrl($pageBase = 'licensing') { |
| [3145](#L3145) | $pluginMenuPageBase = $this->pluginMenu; |
| [3146](#L3146) | $abbrev = $this->getOption('plugin-is-addon') ? $this->getOption('plugin-parent-abbrev') : $this->getOption('plugin-abbrev'); |
| [3147](#L3147) | if (empty($abbrev)) { |
| [3148](#L3148) | /\* |
| [3149](#L3149) | \* Abbrev not set for the plugin try to guess |
| [3150](#L3150) | \*/ |
| [3151](#L3151) | $abbrev = substr($this->getOption('plugin-abbrev'), 0, -1); |
| [3152](#L3152) | } |
| [3153](#L3153) | $page = $abbrev . '\_' . $pageBase; |
| [3154](#L3154) | if (FALSE === strpos($pluginMenuPageBase, '.php')) { |
| [3155](#L3155) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url('admin.php'))); |
| [3156](#L3156) | } else { |
| [3157](#L3157) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url($pluginMenuPageBase))); |
| [3158](#L3158) | } |
| [3159](#L3159) | return $pageUrl; |
| [3160](#L3160) | } |
| [3161](#L3161) |  |
| [3162](#L3162) | /\*\* |
| [3163](#L3163) | \* Converts the Apache memory values to number of bytes ini\_get('upload\_max\_filesize') or ini\_get('post\_max\_size') |
| [3164](#L3164) | \* @param type $str |
| [3165](#L3165) | \* @return type |
| [3166](#L3166) | \*/ |
| [3167](#L3167) | public static function cminds\_units2bytes($str) { |
| [3168](#L3168) | $units = array('B', 'K', 'M', 'G', 'T'); |
| [3169](#L3169) | $unit = preg\_replace('/[0-9]/', '', $str); |
| [3170](#L3170) | $unitFactor = array\_search(strtoupper($unit), $units); |
| [3171](#L3171) | if ($unitFactor !== false) { |
| [3172](#L3172) | return preg\_replace('/[a-z]/i', '', $str) \* pow(2, 10 \* $unitFactor); |
| [3173](#L3173) | } |
| [3174](#L3174) | } |
| [3175](#L3175) |  |
| [3176](#L3176) | public static function cminds\_set\_content\_type() { |
| [3177](#L3177) | return "text/html"; |
| [3178](#L3178) | } |
| [3179](#L3179) |  |
| [3180](#L3180) | } |
| [3181](#L3181) |  |
| [3182](#L3182) | } |
| [3183](#L3183) |  |
| [3184](#L3184) | /\* |
| [3185](#L3185) | \* Load the config |
| [3186](#L3186) | \*/ |
| [3187](#L3187) | global $cmindsPluginPackage; |
| [3188](#L3188) | include('cminds-plugin-config.php'); |
| [3189](#L3189) | $cmindsPluginPackage[$cminds\_plugin\_config['plugin-abbrev']] = new CmindsFreePackage($cminds\_plugin\_config); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/cm-pop-up-banners/trunk/package/cminds-free.php?format=txt)
* [Original Format](/export/3222474/cm-pop-up-banners/trunk/package/cminds-free.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_89d8b401_20250114_205516.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fcm-business-directory%2Ftrunk%2Fpackage%2Fcminds-free.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/cm-business-directory/trunk/package/cminds-free.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/cm-business-directory/trunk/package/cminds-free.php)

---

# [source:](/browser?order=name "Go to repository root") [cm-business-directory](/browser/cm-business-directory?order=name "View cm-business-directory")/[trunk](/browser/cm-business-directory/trunk?order=name "View trunk")/[package](/browser/cm-business-directory/trunk/package?order=name "View package")/[cminds-free.php](/browser/cm-business-directory/trunk/package/cminds-free.php?order=name "View cminds-free.php")

View diff against:

View revision:

| [Last change](/changeset/3220958/cm-business-directory/trunk/package/cminds-free.php "View differences") on this file was [3220958](/changeset/3220958/ "View changeset 3220958"), checked in by CreativeMindsSolutions, [3 days ago](/timeline?from=2025-01-12T08%3A24%3A30Z&precision=second "See timeline at 01/12/2025 08:24:30 AM") |
| --- |
| New version release |
| **File size:** 141.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | namespace com\cminds\package\free\v1\_1\_5; |
| [3](#L3) |  |
| [4](#L4) | if (!defined(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION')) { |
| [5](#L5) | define(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION', '1\_1\_5'); |
| [6](#L6) | } |
| [7](#L7) | if (!class\_exists(\_\_NAMESPACE\_\_ . '\CmindsFreePackage')) { |
| [8](#L8) |  |
| [9](#L9) | class CmindsFreePackage { |
| [10](#L10) |  |
| [11](#L11) | private $config = array(); |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* LicensingAPI object |
| [15](#L15) | \* @var CmindsLicensingAPI |
| [16](#L16) | \*/ |
| [17](#L17) | public $licensingApi = null; |
| [18](#L18) | private $pluginMenu = null; |
| [19](#L19) | private $pluginMenuPage = null; |
| [20](#L20) |  |
| [21](#L21) | const SHAREBOX\_FLAT = 0; |
| [22](#L22) | const SHAREBOX\_SQUARE = 1; |
| [23](#L23) | const ADS\_REFRESH\_INTERVAL = 7776000; // 3600 \* 24 \* 90 = 3 months |
| [24](#L24) |  |
| [25](#L25) | public function \_\_construct($config) { |
| [26](#L26) | $this->config = $config; |
| [27](#L27) |  |
| [28](#L28) | $this->pluginMenu = $this->getOption('plugin-menu-item'); |
| [29](#L29) | $this->pluginMenuPage = $this->getPageUrl('licensing'); |
| [30](#L30) |  |
| [31](#L31) | add\_action('activated\_plugin', array($this, 'redirectAfterInstall'), 10, 2); |
| [32](#L32) | add\_action('admin\_init', array($this, 'updatePoweredByOption')); |
| [33](#L33) | add\_action('admin\_init', array($this, 'registerAdminActions')); |
| [34](#L34) | add\_action('admin\_menu', array($this, 'updateMenu'), 21); |
| [35](#L35) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminStyles')); |
| [36](#L36) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminScripts')); |
| [37](#L37) |  |
| [38](#L38) | $aboutPageKey = $this->getPageSlug(); |
| [39](#L39) | add\_action('cminds-' . $aboutPageKey . '-content-1', array($this, 'displayUserGuideTab')); |
| [40](#L40) | add\_action('cminds-' . $aboutPageKey . '-content-10', array($this, 'displayCreativeMindsTab')); |
| [41](#L41) | add\_action('cminds-' . $aboutPageKey . '-content-30', array($this, 'displayMembershipTab')); |
| [42](#L42) | add\_action('cminds-' . $aboutPageKey . '-content-40', array($this, 'displayCMProductTab')); |
| [43](#L43) | add\_action('cminds-' . $aboutPageKey . '-content-50', array($this, 'displayCMAddOnsTab')); |
| [44](#L44) | add\_action('cminds-' . $aboutPageKey . '-content-60', array($this, 'displayVideoGuidesTab')); |
| [45](#L45) | add\_action('cminds-' . $aboutPageKey . '-content-99', array($this, 'displaySupportTab')); |
| [46](#L46) | add\_action('cminds-' . $aboutPageKey . '-content-199', array($this, 'displayServerInformationTab')); |
| [47](#L47) |  |
| [48](#L48) | add\_action('cminds\_download\_sysinfo', array($this, 'cminds\_generate\_sysinfo\_download')); |
| [49](#L49) |  |
| [50](#L50) | add\_action('init', array($this, 'cminds\_get\_actions')); |
| [51](#L51) | add\_action('init', array($this, 'cminds\_post\_actions')); |
| [52](#L52) |  |
| [53](#L53) | add\_shortcode('cminds\_free\_author', array($this, 'showAuthor')); |
| [54](#L54) | add\_shortcode('cminds\_free\_registration', array($this, 'showRegistration')); |
| [55](#L55) | add\_shortcode('cminds\_free\_guide', array($this, 'showGuide')); |
| [56](#L56) | add\_shortcode('cminds\_upgrade\_box', array($this, 'showUpgrade')); |
| [57](#L57) | add\_shortcode('cminds\_free\_activation', array($this, 'showActivation')); |
| [58](#L58) |  |
| [59](#L59) | add\_filter('plugin\_row\_meta', array($this, 'add\_plugin\_meta\_links'), 10, 2); |
| [60](#L60) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'add\_plugin\_action\_links')); |
| [61](#L61) |  |
| [62](#L62) | add\_action('wp\_dashboard\_setup', array($this, 'addDashboardWidget')); |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | public function addDashboardWidget() { |
| [66](#L66) | if ($this->isRegistered()) { |
| [67](#L67) | wp\_add\_dashboard\_widget('cminds\_package\_dashboard\_widget', \_\_('CreativeMinds WordPress News', 'cminds-package'), array($this, 'showCMDashboardWidget')); |
| [68](#L68) | } |
| [69](#L69) | } |
| [70](#L70) |  |
| [71](#L71) | public function showCMDashboardWidget() { |
| [72](#L72) | $feeds = array( |
| [73](#L73) | array( |
| [74](#L74) | 'url'          => 'https://www.cminds.com/category/wordpress/feed/', |
| [75](#L75) | 'items'        => 6, |
| [76](#L76) | 'show\_summary' => 0, |
| [77](#L77) | 'show\_author'  => 0, |
| [78](#L78) | 'show\_date'    => 1, |
| [79](#L79) | ), |
| [80](#L80) | ); |
| [81](#L81) |  |
| [82](#L82) | wp\_dashboard\_primary\_output('cminds\_package\_dashboard\_widget', $feeds); |
| [83](#L83) | ?> |
| [84](#L84) | <br><hr> |
| [85](#L85) | <p> |
| [86](#L86) | <?php |
| [87](#L87) | printf( |
| [88](#L88) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/', \_\_('cminds.com'), \_\_('(opens in a new window)') |
| [89](#L89) | ); |
| [90](#L90) | ?> |
| [91](#L91) |  |
| [92](#L92) | | |
| [93](#L93) |  |
| [94](#L94) | <?php |
| [95](#L95) | printf( |
| [96](#L96) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/wordpress-plugins/', \_\_('CM WordPress Plugins'), \_\_('(opens in a new window)') |
| [97](#L97) | ); |
| [98](#L98) | ?> |
| [99](#L99) |  |
| [100](#L100) | | |
| [101](#L101) |  |
| [102](#L102) | <?php |
| [103](#L103) | printf( |
| [104](#L104) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', esc\_url(\_x('https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/', '99+ WordPress Plugins Bundle')), \_\_('99+ WordPress Plugins Bundle'), \_\_('(opens in a new window)') |
| [105](#L105) | ); |
| [106](#L106) | ?> |
| [107](#L107) | </p> |
| [108](#L108) | <?php |
| [109](#L109) | } |
| [110](#L110) |  |
| [111](#L111) | public function redirectAfterInstall($plugin, $network\_activation = false) { |
| [112](#L112) | global $cmindsPluginPackage; |
| [113](#L113) | $the\_package = null; |
| [114](#L114) |  |
| [115](#L115) | foreach ($cmindsPluginPackage as $package) { |
| [116](#L116) | $basename = $package->getOption('plugin-basename'); |
| [117](#L117) | if ($basename == $plugin) { |
| [118](#L118) | $the\_package = $package; |
| [119](#L119) | break; |
| [120](#L120) | } |
| [121](#L121) | } |
| [122](#L122) |  |
| [123](#L123) | if ($the\_package && $the\_package->getOption('plugin-redirect-after-install')) { |
| [124](#L124) | $url = $the\_package->getOption('plugin-redirect-after-install'); |
| [125](#L125) | $isBulkActivate = array(); |
| [126](#L126) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action2'); |
| [127](#L127) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action'); |
| [128](#L128) | if (!empty($url) && !in\_array('activate-selected', $isBulkActivate)) { |
| [129](#L129) | wp\_redirect($url); |
| [130](#L130) | exit(); |
| [131](#L131) | } |
| [132](#L132) | } |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | /\*\* |
| [136](#L136) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [137](#L137) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [138](#L138) | \* functions are called on init. |
| [139](#L139) | \* |
| [140](#L140) | \* @since 1.0 |
| [141](#L141) | \* @return void |
| [142](#L142) | \*/ |
| [143](#L143) | public function registerAdminActions() { |
| [144](#L144) | if (is\_admin()) { |
| [145](#L145) | // If user is paying or in trial and have the free version installed, |
| [146](#L146) | // assume that the deactivation is for the upgrade process. |
| [147](#L147) | add\_action('wp\_ajax\_cm-submit-uninstall-reason', array($this, 'submitUninstallReason')); |
| [148](#L148) | add\_action('wp\_ajax\_cm-submit-registration-email', array($this, 'submitRegistrationEmail')); |
| [149](#L149) | add\_action('wp\_ajax\_cm-submit-deregistration', array($this, 'submitDeregistration')); |
| [150](#L150) | add\_action('wp\_ajax\_cm-submit-registration-skip', array($this, 'submitRegistrationSkip')); |
| [151](#L151) |  |
| [152](#L152) | global $pagenow; |
| [153](#L153) | if ('plugins.php' === $pagenow) { |
| [154](#L154) | // Add action link to settings page. |
| [155](#L155) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [156](#L156) | add\_filter('network\_admin\_plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [157](#L157) | add\_action('admin\_footer', array($this, 'showDeactivationFeedbackDialog'), 11); |
| [158](#L158) | } |
| [159](#L159) | } |
| [160](#L160) | } |
| [161](#L161) |  |
| [162](#L162) | /\*\* |
| [163](#L163) | \* Modify plugin's page action links collection. |
| [164](#L164) | \* |
| [165](#L165) | \* @author Vova Feldman (@svovaf) |
| [166](#L166) | \* @since  1.0.0 |
| [167](#L167) | \* |
| [168](#L168) | \* @param array $links |
| [169](#L169) | \* @param       $file |
| [170](#L170) | \* |
| [171](#L171) | \* @return array |
| [172](#L172) | \*/ |
| [173](#L173) | function modifyPluginActionLinks($links, $file) { |
| [174](#L174) | /\* |
| [175](#L175) | \* This HTML element is used to identify the correct plugin when attaching an event to its Deactivate link. |
| [176](#L176) | \*/ |
| [177](#L177) | if (isset($links['deactivate'])) { |
| [178](#L178) | $links['deactivate'] .= '<i class="cm-slug" data-slug="' . $this->getOption('plugin-abbrev') . '"></i>'; |
| [179](#L179) | } |
| [180](#L180) |  |
| [181](#L181) | return $links; |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | /\*\* |
| [185](#L185) | \* Displays a confirmation and feedback dialog box when the user clicks on the "Deactivate" link on the plugins |
| [186](#L186) | \* page. |
| [187](#L187) | \* |
| [188](#L188) | \*/ |
| [189](#L189) | function showDeactivationFeedbackDialog() { |
| [190](#L190) | $content = ''; |
| [191](#L191) | ob\_start(); |
| [192](#L192) | include\_once 'views/deactivation\_feedback\_modal.php'; |
| [193](#L193) | $content .= ob\_get\_clean(); |
| [194](#L194) | echo $content; |
| [195](#L195) | } |
| [196](#L196) |  |
| [197](#L197) | function filterDeactivationReason($reason) { |
| [198](#L198) |  |
| [199](#L199) | if (strlen($reason) < 20) { |
| [200](#L200) | return ''; |
| [201](#L201) | } |
| [202](#L202) | if (str\_word\_count($reason) < 4) { |
| [203](#L203) | return ''; |
| [204](#L204) | } |
| [205](#L205) |  |
| [206](#L206) | $dirty\_words = array('shit', 'fuck', 'wtf'); |
| [207](#L207) | foreach ($dirty\_words as $a) { |
| [208](#L208) | if (stripos($reason, $a) !== false) { |
| [209](#L209) | return ''; |
| [210](#L210) | } |
| [211](#L211) | } |
| [212](#L212) |  |
| [213](#L213) | return $reason; |
| [214](#L214) | } |
| [215](#L215) |  |
| [216](#L216) | /\*\* |
| [217](#L217) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [218](#L218) | \* @since  1.1.2 |
| [219](#L219) | \*/ |
| [220](#L220) | function submitRegistrationEmail() { |
| [221](#L221) | $atts = array(); |
| [222](#L222) |  |
| [223](#L223) | if (empty($\_POST['email'])) { |
| [224](#L224) | exit; |
| [225](#L225) | } |
| [226](#L226) |  |
| [227](#L227) | $this->registerUser($atts); |
| [228](#L228) | } |
| [229](#L229) |  |
| [230](#L230) | /\*\* |
| [231](#L231) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [232](#L232) | \* @since  1.1.2 |
| [233](#L233) | \*/ |
| [234](#L234) | function submitDeregistration() { |
| [235](#L235) | $atts = array(); |
| [236](#L236) |  |
| [237](#L237) | $this->deregisterUser($atts); |
| [238](#L238) | } |
| [239](#L239) |  |
| [240](#L240) | /\*\* |
| [241](#L241) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [242](#L242) | \* @since  1.1.2 |
| [243](#L243) | \*/ |
| [244](#L244) | function submitRegistrationSkip() { |
| [245](#L245) | if (empty($\_POST)) { |
| [246](#L246) | exit; |
| [247](#L247) | } |
| [248](#L248) | $atts = array(); |
| [249](#L249) | if (!empty($\_POST['id'])) { |
| [250](#L250) | $atts['id'] = sanitize\_text\_field($\_POST['id']); |
| [251](#L251) | } |
| [252](#L252) | $this->skipRegistration($atts); |
| [253](#L253) | } |
| [254](#L254) |  |
| [255](#L255) | /\*\* |
| [256](#L256) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [257](#L257) | \* @since  1.1.2 |
| [258](#L258) | \*/ |
| [259](#L259) | function submitUninstallReason() { |
| [260](#L260) | if (empty($\_POST['plugin\_slug']) || empty($\_POST['deactivation\_reason'])) { |
| [261](#L261) | exit; |
| [262](#L262) | } |
| [263](#L263) |  |
| [264](#L264) | $reason = isset($\_REQUEST['deactivation\_reason']) ? trim(esc\_html(stripslashes(strip\_tags($\_REQUEST['deactivation\_reason'])))) : ''; |
| [265](#L265) | $filteredReason = $this->filterDeactivationReason($reason); |
| [266](#L266) | $postedEmail = isset($\_POST['contact\_email']) && is\_email(trim($\_POST['contact\_email'])) ? sanitize\_text\_field($\_POST['contact\_email']) : null; |
| [267](#L267) |  |
| [268](#L268) | /\* |
| [269](#L269) | \* Only send the e-mail if the filtered reason is not empty |
| [270](#L270) | \*/ |
| [271](#L271) | if (!empty($filteredReason)) { |
| [272](#L272) | global $cmindsPluginPackage; |
| [273](#L273) | $package = $cmindsPluginPackage[$\_POST['plugin\_slug']]; |
| [274](#L274) |  |
| [275](#L275) | $fields = array( |
| [276](#L276) | 'product\_name' => $package->getOption('plugin-name'), |
| [277](#L277) | 'remote\_url'   => get\_bloginfo('wpurl'), |
| [278](#L278) | 'email'        => null !== $postedEmail ? $postedEmail : get\_bloginfo('admin\_email'), |
| [279](#L279) | 'want\_contact' => isset($\_POST['want\_contact']) ? 'true' === $\_POST['want\_contact'] : false, |
| [280](#L280) | 'data\_agree'   => isset($\_POST['data\_agree']) ? 'true' === $\_POST['data\_agree'] : true, |
| [281](#L281) | ); |
| [282](#L282) |  |
| [283](#L283) | $registered = $this->isRegistered($\_POST['plugin\_slug']) ? ' (registered)' : ''; |
| [284](#L284) | $message = '<p>The ' . $fields['product\_name'] . ' has been deactivated on ' . $fields['remote\_url'] . ' by ' . $fields['email'] . $registered . '.</p> <p>The reason was:</p> <p><strong>' . $filteredReason . '</strong></p>'; |
| [285](#L285) | $message .= '<br/><hr/>'; |
| [286](#L286) |  |
| [287](#L287) | $mail = 'support@cminds.com'; |
| [288](#L288) |  |
| [289](#L289) | if ($fields['want\_contact']) { |
| [290](#L290) | $message .= '<p>This user is interested in contact from our side.</p>'; |
| [291](#L291) | $message .= '<br/><hr/>'; |
| [292](#L292) | $mail = 'support@cminds.com'; |
| [293](#L293) | } |
| [294](#L294) |  |
| [295](#L295) | if ($fields['data\_agree']) { |
| [296](#L296) | $message .= '<p>SYSTEM INFORMATION BELOW:</p>'; |
| [297](#L297) | ob\_start(); |
| [298](#L298) | echo '<pre>'; |
| [299](#L299) | echo $this->cminds\_system\_info\_content(); |
| [300](#L300) | echo '</pre>'; |
| [301](#L301) | $message .= ob\_get\_clean(); |
| [302](#L302) | } |
| [303](#L303) |  |
| [304](#L304) | $message .= '<p>END OF SYSTEM INFORMATION</p>'; |
| [305](#L305) |  |
| [306](#L306) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [307](#L307) | $result = wp\_mail($mail, 'CM Free Plugin Deactivation Feedback', $message); |
| [308](#L308) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [309](#L309) | } |
| [310](#L310) |  |
| [311](#L311) |  |
| [312](#L312) | // Print '1' for successful operation. |
| [313](#L313) | echo 1; |
| [314](#L314) | exit; |
| [315](#L315) | } |
| [316](#L316) |  |
| [317](#L317) | /\*\* |
| [318](#L318) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [319](#L319) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [320](#L320) | \* functions are called on init. |
| [321](#L321) | \* |
| [322](#L322) | \* @since 1.0 |
| [323](#L323) | \* @return void |
| [324](#L324) | \*/ |
| [325](#L325) | public function cminds\_get\_actions() { |
| [326](#L326) | if (isset($\_GET['cminds\_action'])) { |
| [327](#L327) | do\_action('cminds\_' . $\_GET['cminds\_action'], $\_GET); |
| [328](#L328) | } |
| [329](#L329) | } |
| [330](#L330) |  |
| [331](#L331) | /\*\* |
| [332](#L332) | \* Hooks Cminds actions, when present in the $\_POST superglobal. Every Cminds\_action |
| [333](#L333) | \* present in $\_POST is called using WordPress's do\_action function. These |
| [334](#L334) | \* functions are called on init. |
| [335](#L335) | \* |
| [336](#L336) | \* @since 1.0 |
| [337](#L337) | \* @return void |
| [338](#L338) | \*/ |
| [339](#L339) | public function cminds\_post\_actions() { |
| [340](#L340) | if (isset($\_POST['cminds\_action'])) { |
| [341](#L341) | do\_action('cminds\_' . $\_POST['cminds\_action'], $\_POST); |
| [342](#L342) | } |
| [343](#L343) | } |
| [344](#L344) |  |
| [345](#L345) | public function updatePoweredByOption() { |
| [346](#L346) | $optionValue = filter\_input(INPUT\_POST, $this->getPoweredByOption()); |
| [347](#L347) | $submitValue = filter\_input(INPUT\_POST, 'cminds\_poweredby\_change'); |
| [348](#L348) |  |
| [349](#L349) | if (null !== $optionValue || null !== $submitValue) { |
| [350](#L350) | if(is\_admin() && is\_user\_logged\_in() && current\_user\_can('manage\_options')) { |
| [351](#L351) | update\_option($this->getPoweredByOption(), $optionValue); |
| [352](#L352) | } |
| [353](#L353) | } |
| [354](#L354) | } |
| [355](#L355) |  |
| [356](#L356) | public function getPoweredByOption() { |
| [357](#L357) | $optionName = $this->getOption('plugin-abbrev') . '-powered-by-enabled'; |
| [358](#L358) | return $optionName; |
| [359](#L359) | } |
| [360](#L360) |  |
| [361](#L361) | /\*\* |
| [362](#L362) | \* Default is 0 (disabled) |
| [363](#L363) | \* @return type |
| [364](#L364) | \*/ |
| [365](#L365) | public function isPoweredByEnabled() { |
| [366](#L366) | $result = get\_option($this->getPoweredByOption(), 0); |
| [367](#L367) | return $result; |
| [368](#L368) | } |
| [369](#L369) |  |
| [370](#L370) | /\*\* |
| [371](#L371) | \* Returns the author Url (for free version only) |
| [372](#L372) | \*/ |
| [373](#L373) | public function showAuthor($atts = array()) { |
| [374](#L374) | $authorUrl = ''; |
| [375](#L375) | global $cmindsPluginPackage; |
| [376](#L376) |  |
| [377](#L377) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [378](#L378) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [379](#L379) |  |
| [380](#L380) | if (!$currentPlugin->isPoweredByEnabled()) { |
| [381](#L381) | return; |
| [382](#L382) | } |
| [383](#L383) | ob\_start(); |
| [384](#L384) | ?> |
| [385](#L385) | <style> |
| [386](#L386) | .cminds\_poweredby {clear:both;float:none;font-size:11px;line-height:1.5;display: inline-block;padding: 3px;margin-top:20px;color:#bbb;text-decoration:none;font-weight:bold} |
| [387](#L387) | .cminds\_poweredby:before {content:'Powered by ';} |
| [388](#L388) | .cminds\_poweredbylink:link{color:#bbb;text-decoration:none;} |
| [389](#L389) | .cminds\_poweredbylink:visited{color:#bbb;text-decoration:none;} |
| [390](#L390) | .cminds\_poweredbylink:hover{color:#bbb;text-decoration:none;} |
| [391](#L391) | </style> |
| [392](#L392) |  |
| [393](#L393) | <?php |
| [394](#L394) | $authorUrl .= ob\_get\_clean(); |
| [395](#L395) | /\* |
| [396](#L396) | \* By leaving following snippet in the code, you're expressing your gratitude to creators of this plugin. Thank You! |
| [397](#L397) | \*/ |
| [398](#L398) | $authorUrl .= '<div style="display:block;clear:both;"></div><span class="cminds\_poweredby">'; |
| [399](#L399) | $authorUrl .= '<a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/') . '" target="\_blank" class="cminds\_poweredbylink">CreativeMinds</a> '; |
| [400](#L400) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/wordpress-plugins/') . '" target="\_blank" class="cminds\_poweredbylink">WordPress Plugin</a>'; |
| [401](#L401) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode($currentPlugin->getOption('plugin-store-url')) . '" target="\_blank" class="cminds\_poweredbylink">' . $currentPlugin->getOption('plugin-name') . '</a>'; |
| [402](#L402) | $authorUrl .= '</span><div style="display:block;clear:both;"></div>'; |
| [403](#L403) |  |
| [404](#L404) | return $authorUrl; |
| [405](#L405) | } |
| [406](#L406) |  |
| [407](#L407) | /\* |
| [408](#L408) | \* Licensing Page Tabs |
| [409](#L409) | \*/ |
| [410](#L410) |  |
| [411](#L411) | public function displayUpgradeTutorialTab() { |
| [412](#L412) | $content = ''; |
| [413](#L413) | ob\_start(); |
| [414](#L414) | ?> |
| [415](#L415) | <div> |
| [416](#L416) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Customer Dashboard</a> |
| [417](#L417) | </div> |
| [418](#L418) | <br/> |
| [419](#L419) | <div> |
| [420](#L420) | <?php |
| [421](#L421) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134692135?title=0&byline=0&portrait=0" width="500" height="280"]'); |
| [422](#L422) | ?> |
| [423](#L423) | </div> |
| [424](#L424) | <?php |
| [425](#L425) | $content .= ob\_get\_clean(); |
| [426](#L426) | return $content; |
| [427](#L427) | } |
| [428](#L428) |  |
| [429](#L429) | public function displayManageProductsTab() { |
| [430](#L430) | $content = ''; |
| [431](#L431) | ob\_start(); |
| [432](#L432) | ?> |
| [433](#L433) | <div> |
| [434](#L434) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Open CreativeMinds Customer Dashboard</a> |
| [435](#L435) | </div> |
| [436](#L436) | <br/> |
| [437](#L437) | <div> |
| [438](#L438) | <?php |
| [439](#L439) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134490629?title=0&byline=0&portrait=0" width="640" height="360"]'); |
| [440](#L440) | ?> |
| [441](#L441) | </div> |
| [442](#L442) | <?php |
| [443](#L443) | $content .= ob\_get\_clean(); |
| [444](#L444) | return $content; |
| [445](#L445) | } |
| [446](#L446) |  |
| [447](#L447) | public function displayServerInformationTab() { |
| [448](#L448) | global $wp\_version; |
| [449](#L449) | $content = ''; |
| [450](#L450) |  |
| [451](#L451) | ob\_start(); |
| [452](#L452) | echo $this->cminds\_compatibility\_check(); |
| [453](#L453) | echo $this->cminds\_system\_info(); |
| [454](#L454) | $content .= ob\_get\_clean(); |
| [455](#L455) | return $content; |
| [456](#L456) | } |
| [457](#L457) |  |
| [458](#L458) | /\* |
| [459](#L459) | \* About/User Guide Page Tabs |
| [460](#L460) | \*/ |
| [461](#L461) |  |
| [462](#L462) | public function displayUserGuideTab() { |
| [463](#L463) | $content = ''; |
| [464](#L464) | ob\_start(); |
| [465](#L465) | ?> |
| [466](#L466) | <div> |
| [467](#L467) | <a href="<?php echo $this->getUserguideUrl(); ?>" class="btn button button-primary" target="\_blank">Open User Guide in a new tab</a> |
| [468](#L468) | </div> |
| [469](#L469) | <?php |
| [470](#L470) | $content .= ob\_get\_clean(); |
| [471](#L471) | return $content; |
| [472](#L472) | } |
| [473](#L473) |  |
| [474](#L474) | public function displayUpgradeToProTab() { |
| [475](#L475) | $content = ''; |
| [476](#L476) | $upgradeToProHtml = $this->getOption('plugin-compare-table'); |
| [477](#L477) | $pluginUrl = $this->getOption('plugin-store-url'); |
| [478](#L478) | wp\_enqueue\_script('jquery-ui-tooltip'); |
| [479](#L479) | ob\_start(); |
| [480](#L480) | ?> |
| [481](#L481) | <script> |
| [482](#L482) | jQuery(document).ready(function () { |
| [483](#L483) | jQuery(".cminds-package-show-tooltip").tooltip(); |
| [484](#L484) | }); |
| [485](#L485) | </script> |
| [486](#L486) | <style type="text/css"> |
| [487](#L487) | .pricing-table ul{ |
| [488](#L488) | border-width: 1px; |
| [489](#L489) | border-style: solid; |
| [490](#L490) | border-color: #CCCCCC; |
| [491](#L491) | border-radius: 3px; |
| [492](#L492) | margin: 4px; |
| [493](#L493) | text-align: center; |
| [494](#L494) | font-family: 'Arial'; |
| [495](#L495) | list-style: none; |
| [496](#L496) | float: left; |
| [497](#L497) | padding: 4px; |
| [498](#L498) | background-color: #FFFFFF; |
| [499](#L499) | max-width: 24%; |
| [500](#L500) | } |
| [501](#L501) | .pricing-table ul li{ |
| [502](#L502) | padding: 7px; |
| [503](#L503) | background-color: #EFEFEF; |
| [504](#L504) | border-width: 2px; |
| [505](#L505) | border-color: #B83737; |
| [506](#L506) | border-radius: 0px; |
| [507](#L507) | border-bottom-width: 2px; |
| [508](#L508) | font-size: 13px; |
| [509](#L509) | } |
| [510](#L510) | .pricing-table li:nth-child(odd){ |
| [511](#L511) | background-color: transparent; |
| [512](#L512) | } |
| [513](#L513) | .pricing-table ul .heading{ |
| [514](#L514) | color: #FFFFFF; |
| [515](#L515) | background-color: #659b2e; |
| [516](#L516) | font-size: 19px; |
| [517](#L517) | text-align: center; |
| [518](#L518) | } |
| [519](#L519) | .pricing-table ul .price{ |
| [520](#L520) | font-size: 25px; |
| [521](#L521) | } |
| [522](#L522) | .pricing-table ul .action{ |
| [523](#L523) | font-size: 13px; |
| [524](#L524) | color: #FFFFFF; |
| [525](#L525) | } |
| [526](#L526) | .pricing-table .action a{ |
| [527](#L527) | border-color: #B83737; |
| [528](#L528) | border-width: 0px; |
| [529](#L529) | background-color: #659b2e; |
| [530](#L530) | padding-top: 7px; |
| [531](#L531) | padding-bottom: 7px; |
| [532](#L532) | padding-left: 15px; |
| [533](#L533) | padding-right: 15px; |
| [534](#L534) | border-style: solid; |
| [535](#L535) | color: #FFFFFF; |
| [536](#L536) | } |
| [537](#L537) | .pricing-table ul .noaction{ |
| [538](#L538) | font-size: 13px; |
| [539](#L539) | color: #FFFFFF; |
| [540](#L540) | } |
| [541](#L541) | .pricing-table .noaction span{ |
| [542](#L542) | border-color: #B83737; |
| [543](#L543) | border-width: 0px; |
| [544](#L544) | background-color: #b2b2b2; |
| [545](#L545) | padding-top: 7px; |
| [546](#L546) | padding-bottom: 7px; |
| [547](#L547) | padding-left: 15px; |
| [548](#L548) | padding-right: 15px; |
| [549](#L549) | border-style: solid; |
| [550](#L550) | color: #FFFFFF; |
| [551](#L551) | } |
| [552](#L552) |  |
| [553](#L553) | </style> |
| [554](#L554) | <br> |
| [555](#L555) | <div> |
| [556](#L556) | <?php echo $upgradeToProHtml; ?> |
| [557](#L557) | </div> |
| [558](#L558) | <?php |
| [559](#L559) | $content .= ob\_get\_clean(); |
| [560](#L560) | return $content; |
| [561](#L561) | } |
| [562](#L562) |  |
| [563](#L563) | public function displayCreativeMindsTab() { |
| [564](#L564) | $content = ''; |
| [565](#L565) | ob\_start(); |
| [566](#L566) | ?> |
| [567](#L567) | <div> |
| [568](#L568) | <a href="https://www.cminds.com/about/" class="btn button button-primary" target="\_blank">Open About Us page in a new tab</a> |
| [569](#L569) | </div> |
| [570](#L570) | <?php |
| [571](#L571) | $content .= ob\_get\_clean(); |
| [572](#L572) | return $content; |
| [573](#L573) | } |
| [574](#L574) |  |
| [575](#L575) | public function displayMembershipTab() { |
| [576](#L576) | $content = ''; |
| [577](#L577) | ob\_start(); |
| [578](#L578) | ?> |
| [579](#L579) | <div> |
| [580](#L580) | <a href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" class="btn button button-primary" target="\_blank">Open Membership Package page in a new tab</a> |
| [581](#L581) | </div> |
| [582](#L582) | <?php |
| [583](#L583) | $content .= ob\_get\_clean(); |
| [584](#L584) | return $content; |
| [585](#L585) | } |
| [586](#L586) |  |
| [587](#L587) | public function displayCMProductTab() { |
| [588](#L588) | $content = ''; |
| [589](#L589) | ob\_start(); |
| [590](#L590) |  |
| [591](#L591) | $currentIframeFilter = filter\_input(INPUT\_POST, 'cminds\_iframe\_filter'); |
| [592](#L592) | if (empty($currentIframeFilter)) { |
| [593](#L593) | $currentIframeFilter = 'Plugin'; |
| [594](#L594) | } |
| [595](#L595) | $url = remove\_query\_arg('cminds\_iframe\_filter', $\_SERVER['REQUEST\_URI']); |
| [596](#L596) | ?> |
| [597](#L597) | <div> |
| [598](#L598) | <a href="https://www.cminds.com/wordpress-plugins-library/?cat=Plugin" class="btn button button-primary" target="\_blank">Open Product Catalog in a new tab</a> |
| [599](#L599) | <form method="post" class="cminds\_iframe\_filter\_form"> |
| [600](#L600) | <span> | Filter: </span> |
| [601](#L601) | <button type="submit" name="cminds\_iframe\_filter" value="Plugin" class="btn button button-primary">Plugins</button> |
| [602](#L602) | <button type="submit" name="cminds\_iframe\_filter" value="Add-On" class="btn button button-primary">AddOns</button> |
| [603](#L603) | <button type="submit" name="cminds\_iframe\_filter" value="Bundle" class="btn button button-primary">Bundles</button> |
| [604](#L604) | <button type="submit" name="cminds\_iframe\_filter" value="Service" class="btn button button-primary">Services</button> |
| [605](#L605) | </form> |
| [606](#L606) | </div> |
| [607](#L607) | <?php |
| [608](#L608) | $content .= ob\_get\_clean(); |
| [609](#L609) | return $content; |
| [610](#L610) | } |
| [611](#L611) |  |
| [612](#L612) | public function displayCMAddOnsTab() { |
| [613](#L613) | $content = ''; |
| [614](#L614) | ob\_start(); |
| [615](#L615) | ?> |
| [616](#L616) | <div> |
| [617](#L617) | <a href="https://www.cminds.com/wordpress-plugins-library/?showfilter=No&tags=Tooltip" class="btn button button-primary" target="\_blank">Open Add-Ons page in a new tab</a> |
| [618](#L618) | </div> |
| [619](#L619) | <?php |
| [620](#L620) | $content .= ob\_get\_clean(); |
| [621](#L621) | return $content; |
| [622](#L622) | } |
| [623](#L623) |  |
| [624](#L624) | public function displayVideoGuidesTab() { |
| [625](#L625) | $content = ''; |
| [626](#L626) | ob\_start(); |
| [627](#L627) | ?> |
| [628](#L628) | <div> |
| [629](#L629) | <a href="https://www.cminds.com/cm-plugins-video-library/" class="btn button button-primary" target="\_blank">Open Video Guides page in a new tab</a> |
| [630](#L630) | </div> |
| [631](#L631) | <?php |
| [632](#L632) | $content .= ob\_get\_clean(); |
| [633](#L633) | return $content; |
| [634](#L634) | } |
| [635](#L635) |  |
| [636](#L636) | public function displaySupportTab() { |
| [637](#L637) | $content = ''; |
| [638](#L638) | $supportForumLink = $this->getOption('plugin-support-url'); |
| [639](#L639) | ob\_start(); |
| [640](#L640) | ?> |
| [641](#L641) | <div> |
| [642](#L642) | <p>WordPress supprot forum can only be viewed on WordPress.org site. Please click on the buttom to visit the forum and to submit your support questions</p> |
| [643](#L643) | <a href="<?php echo $supportForumLink; ?>" class="btn button button-primary" target="\_blank">Open WordPress Support Formum</a> |
| [644](#L644) | </div> |
| [645](#L645) | <?php |
| [646](#L646) | $content .= ob\_get\_clean(); |
| [647](#L647) | return $content; |
| [648](#L648) | } |
| [649](#L649) |  |
| [650](#L650) | public function add\_plugin\_meta\_links($meta, $file) { |
| [651](#L651) | if ($file == $this->getOption('plugin-basename')) { |
| [652](#L652) |  |
| [653](#L653) | foreach ($meta as $key => $value) { |
| [654](#L654) | if (strpos($value, 'Visit plugin site') !== FALSE) { |
| [655](#L655) | unset($meta[$key]); |
| [656](#L656) | $meta[] = sprintf('<a href="%s">%s</a>', esc\_url($this->getOption('plugin-store-url')), \_\_('Visit plugin site', 'cminds-package') |
| [657](#L657) | ); |
| [658](#L658) | break; |
| [659](#L659) | } |
| [660](#L660) | } |
| [661](#L661) |  |
| [662](#L662) | foreach ($meta as $key => $value) { |
| [663](#L663) | if (strpos($value, '<a href="') !== FALSE) { |
| [664](#L664) | $meta[$key] = str\_replace('<a href="', '<a target="\_blank" href="', $value); |
| [665](#L665) | } |
| [666](#L666) | } |
| [667](#L667) | } |
| [668](#L668) | return $meta; |
| [669](#L669) | } |
| [670](#L670) |  |
| [671](#L671) | public function add\_plugin\_action\_links($links) { |
| [672](#L672) | $settingsUrl = $this->getOption('plugin-redirect-after-install'); |
| [673](#L673) | if (!empty($settingsUrl)) { |
| [674](#L674) | $links[] = '<a href="' . esc\_url($settingsUrl) . '">Settings</a>'; |
| [675](#L675) | } |
| [676](#L676) | if (!$this->getOption('plugin-free-only')) { |
| [677](#L677) | $links[] = '<a href="' . esc\_url(admin\_url('admin.php?page=' . $this->getProSlug())) . '">Upgrade to Pro</a>'; |
| [678](#L678) | } |
| [679](#L679) | return $links; |
| [680](#L680) | } |
| [681](#L681) |  |
| [682](#L682) | public function updateMenu() { |
| [683](#L683) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('User Guide', 'cminds-package'), \_\_('User Guide', 'cminds-package'), 'manage\_options', $this->getPageSlug(), array($this, 'displayPage')); |
| [684](#L684) | if (!$this->getOption('plugin-free-only')) { |
| [685](#L685) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), 'manage\_options', $this->getProSlug(), array($this, 'displayPage')); |
| [686](#L686) | } |
| [687](#L687) |  |
| [688](#L688) | $tag = 'cminds-' . $this->getOption('plugin-short-slug') . '-license-page'; |
| [689](#L689) | $condition = has\_action($tag); |
| [690](#L690) | } |
| [691](#L691) |  |
| [692](#L692) | public function getProSlug() { |
| [693](#L693) | $slug = $this->getOption('plugin-abbrev') . '\_pro'; |
| [694](#L694) | return $slug; |
| [695](#L695) | } |
| [696](#L696) |  |
| [697](#L697) | public function getPageSlug() { |
| [698](#L698) | $slug = $this->getOption('plugin-abbrev') . '\_about'; |
| [699](#L699) | return $slug; |
| [700](#L700) | } |
| [701](#L701) |  |
| [702](#L702) | public function getLicensingSlug() { |
| [703](#L703) | $slug = $this->getOption('plugin-abbrev') . '\_licensing'; |
| [704](#L704) | return $slug; |
| [705](#L705) | } |
| [706](#L706) |  |
| [707](#L707) | public function isOwnScreen() { |
| [708](#L708) | $screen = get\_current\_screen(); |
| [709](#L709) | return (strpos($screen->base, $this->getPageSlug()) !== false || strpos($screen->base, $this->getLicensingSlug()) !== false || strpos($screen->base, $this->getProSlug()) !== false); |
| [710](#L710) | } |
| [711](#L711) |  |
| [712](#L712) | /\*\* |
| [713](#L713) | \* Load plugin styles for admin area |
| [714](#L714) | \* |
| [715](#L715) | \* @access public |
| [716](#L716) | \* @since 1.0 |
| [717](#L717) | \*/ |
| [718](#L718) | public function enqueueAdminStyles() { |
| [719](#L719) |  |
| [720](#L720) | $screen = get\_current\_screen(); |
| [721](#L721) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [722](#L722) | return; |
| [723](#L723) | } |
| [724](#L724) | wp\_enqueue\_style('jquery-ui-tabs-css', plugin\_dir\_url(\_\_FILE\_\_) . 'css/jquery-ui.min.css', array()); |
| [725](#L725) | } |
| [726](#L726) |  |
| [727](#L727) | /\*\* |
| [728](#L728) | \* Load plugin scripts for admin area |
| [729](#L729) | \* |
| [730](#L730) | \* @access public |
| [731](#L731) | \* @since 1.0 |
| [732](#L732) | \*/ |
| [733](#L733) | public function enqueueAdminScripts() { |
| [734](#L734) |  |
| [735](#L735) | $screen = get\_current\_screen(); |
| [736](#L736) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [737](#L737) | return; |
| [738](#L738) | } |
| [739](#L739) | wp\_enqueue\_script('jquery-ui-tabs'); |
| [740](#L740) | } |
| [741](#L741) |  |
| [742](#L742) | public function getUserguideUrl() { |
| [743](#L743) | $url = ''; |
| [744](#L744) | if ($this->getOption('plugin-userguide-key')) { |
| [745](#L745) | $url .= 'https://creativeminds.helpscoutdocs.com/article/' . $this->getOption('plugin-userguide-key'); |
| [746](#L746) | } else { |
| [747](#L747) | $url .= 'https://creativeminds.helpscoutdocs.com/collection/3-wordpress-plugins'; |
| [748](#L748) | } |
| [749](#L749) | return $url; |
| [750](#L750) | } |
| [751](#L751) |  |
| [752](#L752) | public function displayPage() { |
| [753](#L753) | global $plugin\_page; |
| [754](#L754) | $content = ''; |
| [755](#L755) |  |
| [756](#L756) | global $cmindsPluginPackage; |
| [757](#L757) |  |
| [758](#L758) | if (!empty($cmindsPluginPackage)) { |
| [759](#L759) | foreach ($cmindsPluginPackage as $key => $package) { |
| [760](#L760) | $isown = $package->isOwnScreen(); |
| [761](#L761) | if ($isown) { |
| [762](#L762) | $currentPlugin = $package; |
| [763](#L763) | } |
| [764](#L764) | } |
| [765](#L765) | } |
| [766](#L766) | ?> |
| [767](#L767) | <div class="wrap"> |
| [768](#L768) | <style type="text/css"> |
| [769](#L769) | .subsubsub li+li:before {content:'| ';} |
| [770](#L770) | .cminds\_system\_info\_area{ |
| [771](#L771) | width: 99.5%; |
| [772](#L772) | height: 290px; |
| [773](#L773) | } |
| [774](#L774) | .cminds\_update\_table td, |
| [775](#L775) | .cminds\_update\_table tr { |
| [776](#L776) | width: 140px; |
| [777](#L777) | text-align: left; |
| [778](#L778) | } |
| [779](#L779) | .cminds\_iframe\_filter\_form{ |
| [780](#L780) | display: inline-block; |
| [781](#L781) | } |
| [782](#L782) | .cminds\_iframe\_filter\_form > span{ |
| [783](#L783) | line-height: 28px; |
| [784](#L784) | } |
| [785](#L785) | </style> |
| [786](#L786) | <h2> |
| [787](#L787) | <div id="icon-<?php echo $currentPlugin->getOption('plugin-icon') ?>" class="icon32"> |
| [788](#L788) | <br /> |
| [789](#L789) | </div> |
| [790](#L790) | <?php echo $currentPlugin->getOption('plugin-name') ?>&nbsp; |
| [791](#L791) | <?php |
| [792](#L792) | $pluginAbbrev = $currentPlugin->getOption('plugin-abbrev'); |
| [793](#L793) | if (empty($\_GET['page']) || $\_GET['page'] != $pluginAbbrev . '\_pro') : |
| [794](#L794) | ?> |
| [795](#L795) | <a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $pluginAbbrev . '\_pro')); ?>" class="button button-primary" title="Click to Buy PRO">Upgrade to Pro</a> |
| [796](#L796) | <?php |
| [797](#L797) | endif; |
| [798](#L798) | ?> |
| [799](#L799) | </h2> |
| [800](#L800) | <?php |
| [801](#L801) | echo $currentPlugin->showNav(); |
| [802](#L802) |  |
| [803](#L803) | wp\_enqueue\_style('cminds\_package\_userguide', plugin\_dir\_url(\_\_FILE\_\_) . 'css/main.css'); |
| [804](#L804) | wp\_enqueue\_style('cminds\_package\_userguide\_font', 'https://fonts.googleapis.com/css?family=Open+Sans:400,700,300,600'); |
| [805](#L805) |  |
| [806](#L806) | switch ($plugin\_page) { |
| [807](#L807) | default: |
| [808](#L808) | case $currentPlugin->getPageSlug(): { |
| [809](#L809) | $title = \_\_('About', 'cminds-package'); |
| [810](#L810) | wp\_enqueue\_script('cmdm-mailerlite', plugin\_dir\_url(\_\_FILE\_\_) . 'js/mailerlite.js', array(), $this->getOption('plugin-version'), true); |
| [811](#L811) | ob\_start(); |
| [812](#L812) | $base\_path = $currentPlugin->getOption('plugin-dir-path'); |
| [813](#L813) | include $base\_path . 'package/views/userguide\_free.php'; |
| [814](#L814) | $content .= ob\_get\_clean(); |
| [815](#L815) | break; |
| [816](#L816) | } |
| [817](#L817) | case $currentPlugin->getProSlug(): { |
| [818](#L818) | $title = \_\_('Upgrade to Pro', 'cminds-package'); |
| [819](#L819) |  |
| [820](#L820) | ob\_start(); |
| [821](#L821) | echo $currentPlugin->displayUpgradeToProTab(); |
| [822](#L822) | $content .= ob\_get\_clean(); |
| [823](#L823) | break; |
| [824](#L824) | } |
| [825](#L825) | case $currentPlugin->getLicensingSlug(): { |
| [826](#L826) | $title = \_\_('User Guide', 'cminds-package'); |
| [827](#L827) |  |
| [828](#L828) | ob\_start(); |
| [829](#L829) | $content .= $this->showTabs($plugin\_page); |
| [830](#L830) | $content .= ob\_get\_clean(); |
| [831](#L831) | break; |
| [832](#L832) | } |
| [833](#L833) | } |
| [834](#L834) |  |
| [835](#L835) | echo apply\_filters('cminds-about-page-content', $content, $currentPlugin); |
| [836](#L836) | ?> |
| [837](#L837) | </div> |
| [838](#L838) | <?php |
| [839](#L839) | } |
| [840](#L840) |  |
| [841](#L841) | protected function showTabs($key) { |
| [842](#L842) | $class = $id = 'cminds\_' . $key . '\_tabs'; |
| [843](#L843) | ?> |
| [844](#L844) | <div id="<?php echo $id; ?>" class="<?php echo $class; ?>"> |
| [845](#L845) | <script> |
| [846](#L846) | jQuery(document).ready(function ($) { |
| [847](#L847) | $('#<?php echo $id; ?>').tabs({ |
| [848](#L848) | activate: function (event, ui) { |
| [849](#L849) | window.location.hash = ui.newPanel.attr('id').replace(/-/g, '\_'); |
| [850](#L850) | }, |
| [851](#L851) | create: function (event, ui) { |
| [852](#L852) | var tab = location.hash.replace(/\\_/g, '-'); |
| [853](#L853) | if (tab.length) |
| [854](#L854) | { |
| [855](#L855) | var tabContainer = $(ui.panel.context).find('a[href="' + tab + '"]'); |
| [856](#L856) | if (typeof tabContainer !== 'undefined' && tabContainer.length) |
| [857](#L857) | { |
| [858](#L858) | var index = tabContainer.parent().index(); |
| [859](#L859) | $(ui.panel.context).tabs('option', 'active', index); |
| [860](#L860) | } |
| [861](#L861) | } |
| [862](#L862) | } |
| [863](#L863) | }); |
| [864](#L864) | }); |
| [865](#L865) | </script> |
| [866](#L866) | <?php |
| [867](#L867) | $this->renderSettingsTabsControls($key); |
| [868](#L868) | $this->renderSettingsTabs($key); |
| [869](#L869) | ?> |
| [870](#L870) | </div> |
| [871](#L871) | <?php |
| [872](#L872) | } |
| [873](#L873) |  |
| [874](#L874) | protected function getTabsArray($key) { |
| [875](#L875) |  |
| [876](#L876) | switch ($key) { |
| [877](#L877) | default: |
| [878](#L878) | case $this->getPageSlug(): |
| [879](#L879) | $settingsTabsArrayBase = array( |
| [880](#L880) | '1'   => 'User Guide', |
| [881](#L881) | //                                              '5'              => 'Upgrade To Pro', |
| [882](#L882) | '10'  => 'About', |
| [883](#L883) | '30'  => 'Membership', |
| [884](#L884) | '40'  => 'CM Catalog', |
| [885](#L885) | '60'  => 'Video Guides', |
| [886](#L886) | '99'  => 'WordPress Support Forum', |
| [887](#L887) | '199' => 'System Information', |
| [888](#L888) | ); |
| [889](#L889) | if ($this->getOption('plugin-has-addons')) { |
| [890](#L890) | $settingsTabsArrayBase['50'] = 'Plugin Add-ons'; |
| [891](#L891) | } |
| [892](#L892) | break; |
| [893](#L893) | case $this->getLicensingSlug(): |
| [894](#L894) | $settingsTabsArrayBase = array( |
| [895](#L895) | '10' => 'License Activation', |
| [896](#L896) | '20' => 'Check Version', |
| [897](#L897) | //                                              '30' => 'Upgrade Tutorial', |
| [898](#L898) | '40' => 'Manage Your CM Products', |
| [899](#L899) | ); |
| [900](#L900) | break; |
| [901](#L901) | } |
| [902](#L902) |  |
| [903](#L903) | $settingsTabsArray = apply\_filters('cminds-' . $key . '-tabs-array', $settingsTabsArrayBase); |
| [904](#L904) |  |
| [905](#L905) | ksort($settingsTabsArray); |
| [906](#L906) | return $settingsTabsArray; |
| [907](#L907) | } |
| [908](#L908) |  |
| [909](#L909) | /\*\* |
| [910](#L910) | \* Function renders (default) or returns the setttings tabs |
| [911](#L911) | \* |
| [912](#L912) | \* @param type $return |
| [913](#L913) | \* @return string |
| [914](#L914) | \*/ |
| [915](#L915) | protected function renderSettingsTabs($key, $return = false) { |
| [916](#L916) | $content = ''; |
| [917](#L917) | $settingsTabsArray = $this->getTabsArray($key); |
| [918](#L918) |  |
| [919](#L919) | if ($settingsTabsArray) { |
| [920](#L920) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [921](#L921) | $filterName = 'cminds-' . $key . '-content-' . $tabKey; |
| [922](#L922) |  |
| [923](#L923) | $content .= '<div id="tabs-' . $tabKey . '">'; |
| [924](#L924) | $tabContent = apply\_filters($filterName, ''); |
| [925](#L925) | $content .= $tabContent; |
| [926](#L926) | $content .= '</div>'; |
| [927](#L927) | } |
| [928](#L928) | } |
| [929](#L929) |  |
| [930](#L930) | if ($return) { |
| [931](#L931) | return $content; |
| [932](#L932) | } |
| [933](#L933) | echo $content; |
| [934](#L934) | } |
| [935](#L935) |  |
| [936](#L936) | /\*\* |
| [937](#L937) | \* Function renders (default) or returns the setttings tabs |
| [938](#L938) | \* |
| [939](#L939) | \* @param type $return |
| [940](#L940) | \* @return string |
| [941](#L941) | \*/ |
| [942](#L942) | protected function renderSettingsTabsControls($key, $return = false) { |
| [943](#L943) | $content = ''; |
| [944](#L944) | $settingsTabsArray = $this->getTabsArray($key); |
| [945](#L945) |  |
| [946](#L946) | if ($settingsTabsArray) { |
| [947](#L947) | $content .= '<ul>'; |
| [948](#L948) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [949](#L949) | $content .= '<li><a href="#tabs-' . $tabKey . '">' . $tabLabel . '</a></li>'; |
| [950](#L950) | } |
| [951](#L951) | $content .= '</ul>'; |
| [952](#L952) | } |
| [953](#L953) |  |
| [954](#L954) | if ($return) { |
| [955](#L955) | return $content; |
| [956](#L956) | } |
| [957](#L957) | echo $content; |
| [958](#L958) | } |
| [959](#L959) |  |
| [960](#L960) | protected function showSharebox($mode = self::SHAREBOX\_FLAT) { |
| [961](#L961) |  |
| [962](#L962) | $class = (self::SHAREBOX\_SQUARE === $mode) ? 'square' : 'flat'; |
| [963](#L963) |  |
| [964](#L964) | $pluginReviewLink = (string) $this->getOption('plugin-review-url'); |
| [965](#L965) | $pluginFullName = (string) $this->getOption('plugin-name'); |
| [966](#L966) | $pluginUrl = (string) $this->getOption('plugin-store-url'); |
| [967](#L967) |  |
| [968](#L968) | $twitterTweet = rawurlencode('Checkout the ' . $pluginFullName . ' ( ' . $pluginUrl . ' ) #WordPress #Plugin by @CMPLUGINS'); |
| [969](#L969) |  |
| [970](#L970) | ob\_start(); |
| [971](#L971) | ?> |
| [972](#L972) |  |
| [973](#L973) | <style type="text/css"> |
| [974](#L974) |  |
| [975](#L975) | div.cminds\_call\_to\_action\_wrapper:after{ |
| [976](#L976) | content: ''; |
| [977](#L977) | display: table; |
| [978](#L978) | clear: both; |
| [979](#L979) | } |
| [980](#L980) |  |
| [981](#L981) | #mc\_embed\_signup{clear:left; width:400px;} |
| [982](#L982) | .fb\_iframe\_widget{vertical-align: top;line-height: 2em;} |
| [983](#L983) |  |
| [984](#L984) | div.cminds\_call\_to\_action.flat{ |
| [985](#L985) | display: flex; |
| [986](#L986) | text-align: left; |
| [987](#L987) | float: left; |
| [988](#L988) | margin-bottom: 10px; |
| [989](#L989) | } |
| [990](#L990) |  |
| [991](#L991) | div.cminds\_call\_to\_action.flat .inner\_box{ |
| [992](#L992) | border: 1px solid #999; |
| [993](#L993) | padding: 0 0.5em 0.5em; |
| [994](#L994) | min-width: 80px; |
| [995](#L995) | border-radius : 4px; |
| [996](#L996) | margin: 5px 0 5px 0 ; |
| [997](#L997) | } |
| [998](#L998) |  |
| [999](#L999) | div.cminds\_call\_to\_action.square{ |
| [1000](#L1000) | display: flex; |
| [1001](#L1001) | text-align: center; |
| [1002](#L1002) | } |
| [1003](#L1003) |  |
| [1004](#L1004) | div.cminds\_call\_to\_action.square .inner\_box{ |
| [1005](#L1005) | border: 1px solid #999; |
| [1006](#L1006) | padding: 0 0.5em 0.5em; |
| [1007](#L1007) | margin: 0 auto; |
| [1008](#L1008) | min-width: 290px; |
| [1009](#L1009) | } |
| [1010](#L1010) |  |
| [1011](#L1011) | div.cminds\_call\_to\_action.square .inner\_box td{ |
| [1012](#L1012) | display: block; |
| [1013](#L1013) | padding: 0; |
| [1014](#L1014) | } |
| [1015](#L1015) |  |
| [1016](#L1016) | div.cminds\_call\_to\_action a{ |
| [1017](#L1017) | text-decoration: none; |
| [1018](#L1018) | } |
| [1019](#L1019) | </style> |
| [1020](#L1020) |  |
| [1021](#L1021) | <div class="cminds\_call\_to\_action\_wrapper"> |
| [1022](#L1022) | <div class="cminds\_call\_to\_action <?php echo $class; ?>"> |
| [1023](#L1023) | <div id="fb-root"></div> |
| [1024](#L1024) | <div class="inner\_box"> |
| [1025](#L1025) | <table cellpadding="10"><tr> |
| [1026](#L1026) | <td valign="top"> |
| [1027](#L1027) | <h3><?php $this->\_e('Share your Appreciation'); ?></h3> |
| [1028](#L1028) | <a target="\_blank" href="<?php echo esc\_attr($pluginReviewLink); ?>"> |
| [1029](#L1029) | <div class="btn button"> |
| [1030](#L1030) | <div class="dashicons dashicons-share-alt2"></div><span><?php $this->\_e('Submit a review'); ?></span> |
| [1031](#L1031) | </div> |
| [1032](#L1032) | </a> |
| [1033](#L1033) | <a target="\_blank"  href="http://twitter.com/home/?status=<?php echo esc\_attr(urlencode($twitterTweet)) ?>"> |
| [1034](#L1034) | <div class="btn button"> |
| [1035](#L1035) | <div class="dashicons dashicons-twitter"></div><span><?php $this->\_e('Tweet'); ?></span> |
| [1036](#L1036) | </div> |
| [1037](#L1037) | </a> |
| [1038](#L1038) | </td><td valign="top"> |
| [1039](#L1039) | <h3><?php $this->\_e('Stay Up-to-Date'); ?></h3> |
| [1040](#L1040) | <a href="https://twitter.com/CMPLUGINS" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true"><?php $this->\_e('Follow @CMPLUGINS'); ?></a> |
| [1041](#L1041) | <script>!function (d, s, id) { |
| [1042](#L1042) | var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; |
| [1043](#L1043) | if (!d.getElementById(id)) { |
| [1044](#L1044) | js = d.createElement(s); |
| [1045](#L1045) | js.id = id; |
| [1046](#L1046) | js.src = p + '://platform.twitter.com/widgets.js'; |
| [1047](#L1047) | fjs.parentNode.insertBefore(js, fjs); |
| [1048](#L1048) | } |
| [1049](#L1049) | }(document, 'script', 'twitter-wjs'); |
| [1050](#L1050) | </script> |
| [1051](#L1051) |  |
| [1052](#L1052) | <div class="g-follow" data-annotation="none" data-height="24" data-href="https://plus.google.com/108513627228464018583" data-rel="publisher"></div> |
| [1053](#L1053) |  |
| [1054](#L1054) | <script type="text/javascript"> |
| [1055](#L1055) | (function () { |
| [1056](#L1056) | var po = document.createElement('script'); |
| [1057](#L1057) | po.type = 'text/javascript'; |
| [1058](#L1058) | po.async = true; |
| [1059](#L1059) | po.src = 'https://apis.google.com/js/platform.js'; |
| [1060](#L1060) | var s = document.getElementsByTagName('script')[0]; |
| [1061](#L1061) | s.parentNode.insertBefore(po, s); |
| [1062](#L1062) | })(); |
| [1063](#L1063) | </script> |
| [1064](#L1064) |  |
| [1065](#L1065) | <script>(function (d, s, id) { |
| [1066](#L1066) | var js, fjs = d.getElementsByTagName(s)[0]; |
| [1067](#L1067) | if (d.getElementById(id)) |
| [1068](#L1068) | return; |
| [1069](#L1069) | js = d.createElement(s); |
| [1070](#L1070) | js.id = id; |
| [1071](#L1071) | js.src = "//connect.facebook.net/en\_US/sdk.js#xfbml=1&version=v2.0"; |
| [1072](#L1072) | fjs.parentNode.insertBefore(js, fjs); |
| [1073](#L1073) | }(document, 'script', 'facebook-jssdk')); |
| [1074](#L1074) | </script> |
| [1075](#L1075) |  |
| [1076](#L1076) | <div class="fb-like" data-href="https://www.facebook.com/cmplugins" data-width="100" data-layout="button" data-action="like" data-show-faces="true" data-share="true"></div> |
| [1077](#L1077) |  |
| [1078](#L1078) | <br/> |
| [1079](#L1079) | </td> |
| [1080](#L1080) | <td valign="top"> |
| [1081](#L1081) | <!-- Begin MailChimp Signup Form --> |
| [1082](#L1082) | <div id="mc\_embed\_signup"> |
| [1083](#L1083) | <form action="//cminds.us3.list-manage.com/subscribe/post?u=f48254f757fafba2669ae5918&amp;id=142732cbf9" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="\_blank" novalidate> |
| [1084](#L1084) | <div id="mc\_embed\_signup\_scroll"> |
| [1085](#L1085) | <h3 for="mce-EMAIL"><?php $this->\_e('CM Newsletter - coupons, deals, news'); ?></h3> |
| [1086](#L1086) | <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required> |
| [1087](#L1087) | <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn button"> |
| [1088](#L1088) | <span style="display:inline-block; position: relative"><div class="cmtt\_field\_message" title="We only send newsletters a couple of times a year. They include great deals, promo codes and information about our new plugins!"></div></span> |
| [1089](#L1089) | <!-- real people should not fill this in and expect good things - do not remove this or risk fsorm bot signups--> |
| [1090](#L1090) | <div style="position: absolute; left: -5000px;"><input type="text" name="b\_f48254f757fafba2669ae5918\_142732cbf9" tabindex="-1" value=""></div> |
| [1091](#L1091) | <div class="clear"></div> |
| [1092](#L1092) | </div> |
| [1093](#L1093) | </form> |
| [1094](#L1094) | </div> |
| [1095](#L1095) | <!--End mc\_embed\_signup--> |
| [1096](#L1096) | </td> |
| [1097](#L1097) | </tr> |
| [1098](#L1098) | </table> |
| [1099](#L1099) | </div> |
| [1100](#L1100) | </div> |
| [1101](#L1101) | </div> |
| [1102](#L1102) | <?php |
| [1103](#L1103) | ob\_end\_flush(); |
| [1104](#L1104) | } |
| [1105](#L1105) |  |
| [1106](#L1106) | /\*\* |
| [1107](#L1107) | \* Function returns the ads for the users who volunteered to register (optional step) |
| [1108](#L1108) | \* It communicates with our own server to download the current promotions |
| [1109](#L1109) | \* |
| [1110](#L1110) | \* @return boolean |
| [1111](#L1111) | \*/ |
| [1112](#L1112) | protected function getAds() { |
| [1113](#L1113) | $connectionProblem = false; |
| [1114](#L1114) | $ads\_arr = get\_transient('cminds\_free\_ads'); |
| [1115](#L1115) | if (empty($ads\_arr) && !is\_array($ads\_arr)) { |
| [1116](#L1116) | $args = array( |
| [1117](#L1117) | 'body' => array() |
| [1118](#L1118) | ); |
| [1119](#L1119) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1120](#L1120) | $response = wp\_remote\_post($href, $args); |
| [1121](#L1121) | if (!is\_wp\_error($response)) { |
| [1122](#L1122) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1123](#L1123) | } else { |
| [1124](#L1124) | $args['sslverify'] = false; |
| [1125](#L1125) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1126](#L1126) | $response = wp\_remote\_post($href, $args); |
| [1127](#L1127) | if (!is\_wp\_error($response)) { |
| [1128](#L1128) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1129](#L1129) | } else { |
| [1130](#L1130) | $ads = array(); |
| [1131](#L1131) | $connectionProblem = true; |
| [1132](#L1132) | } |
| [1133](#L1133) | } |
| [1134](#L1134) | $ads\_arr = array( |
| [1135](#L1135) | 'ads'          => $ads, |
| [1136](#L1136) | 'refresh\_time' => time(), |
| [1137](#L1137) | 'connection'   => !$connectionProblem, |
| [1138](#L1138) | ); |
| [1139](#L1139) | set\_transient('cminds\_free\_ads', $ads\_arr, self::ADS\_REFRESH\_INTERVAL); |
| [1140](#L1140) | } |
| [1141](#L1141) | /\* |
| [1142](#L1142) | \* Update from old version |
| [1143](#L1143) | \*/ |
| [1144](#L1144) | if (!isset($ads\_arr['ads']) && !isset($ads\_arr['refresh\_time'])) { |
| [1145](#L1145) | $temp\_ads\_arr = $ads\_arr; |
| [1146](#L1146) | $ads\_arr = array( |
| [1147](#L1147) | 'ads'          => $temp\_ads\_arr, |
| [1148](#L1148) | 'refresh\_time' => strtotime('-10 DAYS'), |
| [1149](#L1149) | 'connection'   => TRUE, |
| [1150](#L1150) | ); |
| [1151](#L1151) | } |
| [1152](#L1152) | /\* |
| [1153](#L1153) | \* Update from old version |
| [1154](#L1154) | \*/ |
| [1155](#L1155) | if (!isset($ads\_arr['connection'])) { |
| [1156](#L1156) | $ads\_arr['connection'] = TRUE; |
| [1157](#L1157) | } |
| [1158](#L1158) | return $ads\_arr; |
| [1159](#L1159) | } |
| [1160](#L1160) |  |
| [1161](#L1161) | public function getStoreUrl($args = array()) { |
| [1162](#L1162) | $category = isset($args['category']) ? $args['category'] : 'All'; |
| [1163](#L1163) | $storeUrl = $this->addAffiliateCode($this->getCategoryLink('Wordpress', 'category', $category)); |
| [1164](#L1164) | return esc\_url($storeUrl); |
| [1165](#L1165) | } |
| [1166](#L1166) |  |
| [1167](#L1167) | public function getCategoryLink($group, $type, $name) { |
| [1168](#L1168) | $categoryLinks = array( |
| [1169](#L1169) | 'Wordpress' => array( |
| [1170](#L1170) | 'category' => array( |
| [1171](#L1171) | 'All'     => '/wordpress-plugins-library/', |
| [1172](#L1172) | 'Plugin'  => '/wordpress-plugins/', |
| [1173](#L1173) | 'Service' => '/wordpress-maintenance-services/', |
| [1174](#L1174) | 'Add-On'  => '/wordpress-add-ons/', |
| [1175](#L1175) | 'Bundle'  => '/wordpress-plugins-bundles/'), |
| [1176](#L1176) | 'tags'     => array( |
| [1177](#L1177) | 'SEO'        => '/wordpress-seo-content-plugins/', |
| [1178](#L1178) | 'Business'   => '/plugins-for-wordpress-business-websites/', |
| [1179](#L1179) | 'Publishing' => '/wordpress-plugins-for-content-publishing/', |
| [1180](#L1180) | 'Free'       => '/free-wordpress-plugins/', |
| [1181](#L1181) | 'eCommerce'  => '/wordpress-e-commerce-plugins/', |
| [1182](#L1182) | 'Marketing'  => '/wordpress-plugins-for-marketers/', |
| [1183](#L1183) | 'Admin'      => '/admin-wordpress-plugins/', |
| [1184](#L1184) | 'Community'  => '/wordpress-community-plugins/', |
| [1185](#L1185) | 'eLearning'  => '/wordpress-e-learning-and-lms-plugins/', |
| [1186](#L1186) | ) |
| [1187](#L1187) | ), |
| [1188](#L1188) | 'Magento'   => array( |
| [1189](#L1189) | 'category' => array( |
| [1190](#L1190) | 'All'       => '/magento-extensions-and-modules/', |
| [1191](#L1191) | 'Extension' => '/ecommerce-extensions-store/', |
| [1192](#L1192) | 'Service'   => '/support-and-maintenance-services-for-magento/', |
| [1193](#L1193) | 'Bundle'    => '/extensions-bundles-magento/'), |
| [1194](#L1194) | 'tags'     => array( |
| [1195](#L1195) | 'Customer'     => '/magento-customer-care-support/', |
| [1196](#L1196) | 'Integrations' => '/magento-third-party-integration-extensions/', |
| [1197](#L1197) | 'Marketing'    => '/magento-marketing-extensions/', |
| [1198](#L1198) | 'Marketplace'  => '/magento-marketplace-extensions/', |
| [1199](#L1199) | 'Marketplaces' => '/magento-marketplace-extensions/', |
| [1200](#L1200) | 'Utilities'    => '/magento-utilities-extensions/', |
| [1201](#L1201) | 'Magento-2'    => '/magento-2-extensions/', |
| [1202](#L1202) | '2.0'          => '/magento-2-extensions/' |
| [1203](#L1203) | ) |
| [1204](#L1204) | ) |
| [1205](#L1205) | ); |
| [1206](#L1206) |  |
| [1207](#L1207) | $link = null; |
| [1208](#L1208) | $types = array('category', 'tags'); |
| [1209](#L1209) | if (in\_array($type, $types)) { |
| [1210](#L1210) | $link = isset($categoryLinks[$group][$type][$name]) ? $categoryLinks[$group][$type][$name] : null; |
| [1211](#L1211) | } |
| [1212](#L1212) |  |
| [1213](#L1213) | if (!is\_string($link)) { |
| [1214](#L1214) | $link = ('Wordpress' === $group) ? '/wordpress-plugins-library/?' . $type . '=' . $name : '/magento-extensions-and-modules/?' . $type . '=' . $name; |
| [1215](#L1215) | } |
| [1216](#L1216) |  |
| [1217](#L1217) | $link = 'https://www.cminds.com' . $link; |
| [1218](#L1218) | return $link; |
| [1219](#L1219) | } |
| [1220](#L1220) |  |
| [1221](#L1221) | public function addAffiliateCode($link) { |
| [1222](#L1222) | if ($this->getOption('plugin-affiliate')) { |
| [1223](#L1223) | $link = add\_query\_arg(array('af' => $this->getOption('plugin-affiliate')), $link); |
| [1224](#L1224) | } |
| [1225](#L1225) | return esc\_url($link); |
| [1226](#L1226) | } |
| [1227](#L1227) |  |
| [1228](#L1228) | public function showGuide($atts = array()) { |
| [1229](#L1229) | global $cmindsPluginPackage; |
| [1230](#L1230) |  |
| [1231](#L1231) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1232](#L1232) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1233](#L1233) |  |
| [1234](#L1234) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-guide-hidden'; |
| [1235](#L1235) | $guideHide = filter\_input(INPUT\_GET, 'cminds\_guide\_hide'); |
| [1236](#L1236) | if ($guideHide) { |
| [1237](#L1237) | update\_option($optionName, 1); |
| [1238](#L1238) | } |
| [1239](#L1239) | $guideShow = filter\_input(INPUT\_GET, 'cminds\_guide\_show'); |
| [1240](#L1240) | if ($guideShow) { |
| [1241](#L1241) | update\_option($optionName, 0); |
| [1242](#L1242) | } |
| [1243](#L1243) | $guideHidden = get\_option($optionName, 0); |
| [1244](#L1244) |  |
| [1245](#L1245) | $showGuide = $currentPlugin->getOption('plugin-show-guide'); |
| [1246](#L1246) | if ($showGuide) : |
| [1247](#L1247) | ob\_start(); |
| [1248](#L1248) | ?><style type="text/css"> |
| [1249](#L1249) |  |
| [1250](#L1250) | div.cminds\_guide\_wrapper { |
| [1251](#L1251) | display: inline-block; |
| [1252](#L1252) | padding: 0em 0em 1em 0em; |
| [1253](#L1253) | background: #FFF; |
| [1254](#L1254) | margin: 0em 0em 0 0; |
| [1255](#L1255) | vertical-align: top; |
| [1256](#L1256) | } |
| [1257](#L1257) |  |
| [1258](#L1258) | div.cminds\_guide\_wrapper \* { |
| [1259](#L1259) | vertical-align: top; |
| [1260](#L1260) | } |
| [1261](#L1261) |  |
| [1262](#L1262) | .cminds\_guide{ |
| [1263](#L1263) | display: inline-block; |
| [1264](#L1264) | margin: 1em 0em 0em 0em; |
| [1265](#L1265) | padding: 0em; |
| [1266](#L1266) | } |
| [1267](#L1267) |  |
| [1268](#L1268) | .cminds\_guide\_text{ |
| [1269](#L1269) | display: inline-block; |
| [1270](#L1270) | margin: 1em; |
| [1271](#L1271) | } |
| [1272](#L1272) |  |
| [1273](#L1273) | .cminds\_guide\_text > span{ |
| [1274](#L1274) | text-align: left; |
| [1275](#L1275) | display: block; |
| [1276](#L1276) | } |
| [1277](#L1277) |  |
| [1278](#L1278) | .clear, .clearfix{ |
| [1279](#L1279) | clear: both; |
| [1280](#L1280) | } |
| [1281](#L1281) |  |
| [1282](#L1282) | .cmclearfix{ |
| [1283](#L1283) | clear: both !important; |
| [1284](#L1284) | } |
| [1285](#L1285) |  |
| [1286](#L1286) | .cminds\_guide .guide\_header{ |
| [1287](#L1287) | font-size: 14pt; |
| [1288](#L1288) | font-weight: bold; |
| [1289](#L1289) | } |
| [1290](#L1290) |  |
| [1291](#L1291) | .cminds\_guide .guide\_text{ |
| [1292](#L1292) | display: inline-block; |
| [1293](#L1293) | width: 509px; |
| [1294](#L1294) | max-width: 100%; |
| [1295](#L1295) | margin-right: 40px; |
| [1296](#L1296) | } |
| [1297](#L1297) |  |
| [1298](#L1298) | .cminds\_guide .guide\_videos{ |
| [1299](#L1299) | display: inline-block; |
| [1300](#L1300) | max-width: 100%; |
| [1301](#L1301) | overflow: hidden; |
| [1302](#L1302) | } |
| [1303](#L1303) |  |
| [1304](#L1304) | .cminds\_guide .guide\_videos .guide\_videos\_inner{ |
| [1305](#L1305) | } |
| [1306](#L1306) |  |
| [1307](#L1307) | .cminds\_guide .guide\_videos > div{ |
| [1308](#L1308) | display: inline-block; |
| [1309](#L1309) | } |
| [1310](#L1310) | .cminds\_guide .guide\_videos > div.guide\_videos\_after{ |
| [1311](#L1311) | display: block; |
| [1312](#L1312) | margin: 10px 0 0 52px; |
| [1313](#L1313) | } |
| [1314](#L1314) | .prev\_video, |
| [1315](#L1315) | .next\_video { |
| [1316](#L1316) | margin-top: 85px; |
| [1317](#L1317) | } |
| [1318](#L1318) |  |
| [1319](#L1319) | .guide\_video\_title { |
| [1320](#L1320) | font-size: 13pt; |
| [1321](#L1321) | font-weight: bold; |
| [1322](#L1322) | margin: 0 0 10px 0px; |
| [1323](#L1323) | } |
| [1324](#L1324) |  |
| [1325](#L1325) | .cminds\_link.blue { |
| [1326](#L1326) | color: #fff; |
| [1327](#L1327) | border-color: #33ace7; |
| [1328](#L1328) | background: #66c1ed; |
| [1329](#L1329) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1330](#L1330) | box-shadow: 0 1px 0 #ccc; |
| [1331](#L1331) | display: inline-block; |
| [1332](#L1332) | text-decoration: none; |
| [1333](#L1333) | line-height: 26px; |
| [1334](#L1334) | height: 28px; |
| [1335](#L1335) | padding: 0 10px 1px; |
| [1336](#L1336) | cursor: pointer; |
| [1337](#L1337) | border-width: 1px; |
| [1338](#L1338) | border-style: solid; |
| [1339](#L1339) | -webkit-border-radius: 3px; |
| [1340](#L1340) | border-radius: 3px; |
| [1341](#L1341) | -webkit-box-sizing: border-box; |
| [1342](#L1342) | -moz-box-sizing: border-box; |
| [1343](#L1343) | box-sizing: border-box; |
| [1344](#L1344) | } |
| [1345](#L1345) |  |
| [1346](#L1346) | .cminds\_guide .guide\_videos .guide\_video{ |
| [1347](#L1347) | display: none; |
| [1348](#L1348) | } |
| [1349](#L1349) | .cminds\_guide .guide\_videos .guide\_video.active{ |
| [1350](#L1350) | display: inline-block; |
| [1351](#L1351) | } |
| [1352](#L1352) |  |
| [1353](#L1353) | .cminds\_guide .guide\_video\_content > a{ |
| [1354](#L1354) | display: block; |
| [1355](#L1355) | } |
| [1356](#L1356) | .install-guide-video {max-height: 160px;} |
| [1357](#L1357) | .upgrage-guide-video {max-height: 255px;} |
| [1358](#L1358) | </style> |
| [1359](#L1359) | <?php |
| [1360](#L1360) | if (!$guideHidden) : |
| [1361](#L1361) | ?> |
| [1362](#L1362) | <script> |
| [1363](#L1363) | jQuery(document).ready(function () { |
| [1364](#L1364) |  |
| [1365](#L1365) | jQuery.fn.visible = function () { |
| [1366](#L1366) | return this.css('visibility', 'visible'); |
| [1367](#L1367) | }; |
| [1368](#L1368) |  |
| [1369](#L1369) | jQuery.fn.invisible = function () { |
| [1370](#L1370) | return this.css('visibility', 'hidden'); |
| [1371](#L1371) | }; |
| [1372](#L1372) |  |
| [1373](#L1373) | jQuery.fn.visibilityToggle = function () { |
| [1374](#L1374) | return this.css('visibility', function (i, visibility) { |
| [1375](#L1375) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1376](#L1376) | }); |
| [1377](#L1377) | }; |
| [1378](#L1378) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1379](#L1379) | var prevVisible = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video').length; |
| [1380](#L1380) | var nextVisible = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video').length; |
| [1381](#L1381) |  |
| [1382](#L1382) | if (prevVisible) { |
| [1383](#L1383) | jQuery('.guide\_videos .prev\_video').visible(); |
| [1384](#L1384) | } else { |
| [1385](#L1385) | jQuery('.guide\_videos .prev\_video').invisible(); |
| [1386](#L1386) | } |
| [1387](#L1387) |  |
| [1388](#L1388) | if (nextVisible) { |
| [1389](#L1389) | jQuery('.guide\_videos .next\_video').visible(); |
| [1390](#L1390) | } else { |
| [1391](#L1391) | jQuery('.guide\_videos .next\_video').invisible(); |
| [1392](#L1392) | } |
| [1393](#L1393) | }; |
| [1394](#L1394) |  |
| [1395](#L1395) | cminds\_video\_prev\_next\_toggle(); |
| [1396](#L1396) |  |
| [1397](#L1397) | jQuery('.guide\_videos .prev\_video').on('click', function () { |
| [1398](#L1398) | var prevVideo = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video'); |
| [1399](#L1399) | if (prevVideo.length) |
| [1400](#L1400) | { |
| [1401](#L1401) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1402](#L1402) | prevVideo.addClass('active'); |
| [1403](#L1403) | } |
| [1404](#L1404) | cminds\_video\_prev\_next\_toggle(); |
| [1405](#L1405) | }); |
| [1406](#L1406) |  |
| [1407](#L1407) | jQuery('.guide\_videos .next\_video').on('click', function () { |
| [1408](#L1408) | var nextVideo = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video'); |
| [1409](#L1409) | if (nextVideo.length) |
| [1410](#L1410) | { |
| [1411](#L1411) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1412](#L1412) | nextVideo.addClass('active'); |
| [1413](#L1413) | } |
| [1414](#L1414) | cminds\_video\_prev\_next\_toggle(); |
| [1415](#L1415) | }); |
| [1416](#L1416) | }); |
| [1417](#L1417) | </script> |
| [1418](#L1418) | <div class="clear clearfix cmclearfix"></div> |
| [1419](#L1419) | <div class="cminds\_guide\_wrapper"> |
| [1420](#L1420) | <div class="cminds\_guide"> |
| [1421](#L1421) |  |
| [1422](#L1422) | <?php |
| [1423](#L1423) | $guideText = $currentPlugin->getOption('plugin-guide-text'); |
| [1424](#L1424) | if (!empty($guideText)) : |
| [1425](#L1425) | ?> |
| [1426](#L1426) | <div class="guide\_text"> |
| [1427](#L1427) | <div class="guide\_header"> |
| [1428](#L1428) | Initial Installation Guide |
| [1429](#L1429) | </div> |
| [1430](#L1430) | <?php echo $guideText; ?> |
| [1431](#L1431) | </div> |
| [1432](#L1432) | <?php endif; ?> |
| [1433](#L1433) |  |
| [1434](#L1434) | <?php |
| [1435](#L1435) | $videos = $currentPlugin->getOption('plugin-guide-videos'); |
| [1436](#L1436) | if (!empty($videos) && is\_array($videos)) : |
| [1437](#L1437) | ?> |
| [1438](#L1438) | <div class="guide\_videos"> |
| [1439](#L1439) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1440](#L1440) | <div class="guide\_videos\_inner"> |
| [1441](#L1441) | <?php foreach ($videos as $key => $video) : ?> |
| [1442](#L1442) | <div class="guide\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1443](#L1443) | <div class="guide\_video\_title"><?php echo $video['title']; ?></div> |
| [1444](#L1444) | <?php |
| [1445](#L1445) | // echo do\_shortcode('[video src="https://player.vimeo.com/video/' . $video['video\_id'] . '?portrait=0&responsive=0&maxwidth=290&maxheight=160&player\_id=player\_2" width="290" height="160" id="palyer\_2"][/video]'); |
| [1446](#L1446) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="290" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1447](#L1447) | //                                                                                                              echo wp\_video\_shortcode(array('src' =>"https://player.vimeo.com/video/" . $video['video\_id'] . "?portrait=0&responsive=1&maxheight=160&player\_id=player\_2", 'width' => 463, 'height' => 255, 'class' => "install-guide-video wp-video-shortcode", 'id' => "palyer\_2")); |
| [1448](#L1448) | ?> |
| [1449](#L1449) | </div> |
| [1450](#L1450) | <?php endforeach; ?> |
| [1451](#L1451) | </div> |
| [1452](#L1452) | <div class="next\_video cminds\_link blue" style="visibility: hidden">Next</div> |
| [1453](#L1453) | <div class="guide\_videos\_after"> |
| [1454](#L1454) | <a href="<?php echo $currentPlugin->getPageUrl('about'); ?>" class="cminds\_link blue" target="\_blank">Open Plugin User Guide</a> |
| [1455](#L1455) | </div> |
| [1456](#L1456) | </div> |
| [1457](#L1457) | <?php endif; ?> |
| [1458](#L1458) | </div> |
| [1459](#L1459) | </div> |
| [1460](#L1460) | <div class="clear clearfix cmclearfix"></div> |
| [1461](#L1461) | <?php else : ?> |
| [1462](#L1462) | <div class="cminds\_guide\_wrapper"> |
| [1463](#L1463) | <div> |
| [1464](#L1464) | <a class="cminds-guide-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_guide\_show' => 1), remove\_query\_arg('cminds\_guide\_hide'))); ?>">Show Installation Guide Box</a> |
| [1465](#L1465) | </div> |
| [1466](#L1466) | </div> |
| [1467](#L1467) | <div class="clear clearfix cmclearfix"></div> |
| [1468](#L1468) | <?php |
| [1469](#L1469) | endif; |
| [1470](#L1470) | ?> |
| [1471](#L1471) |  |
| [1472](#L1472) | <?php |
| [1473](#L1473) | $content = ob\_get\_clean(); |
| [1474](#L1474) | return $content; |
| [1475](#L1475) | endif; |
| [1476](#L1476) | } |
| [1477](#L1477) |  |
| [1478](#L1478) | public function showActivation($atts = array()) { |
| [1479](#L1479) | global $cmindsPluginPackage; |
| [1480](#L1480) |  |
| [1481](#L1481) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1482](#L1482) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1483](#L1483) |  |
| [1484](#L1484) | ob\_start(); |
| [1485](#L1485) | $isRegistered = $currentPlugin->isRegistered(); |
| [1486](#L1486) | $isSkipped = $currentPlugin->isSkipped(); |
| [1487](#L1487) | $isRegistered = false; |
| [1488](#L1488) | if (!$isRegistered) : |
| [1489](#L1489) | include\_once 'views/registration.php'; |
| [1490](#L1490) | else: |
| [1491](#L1491) | ?> |
| [1492](#L1492) | <br/> |
| [1493](#L1493) | <br/> |
| [1494](#L1494) | <?php |
| [1495](#L1495) | endif; |
| [1496](#L1496) | $content = ob\_get\_clean(); |
| [1497](#L1497) | return $content; |
| [1498](#L1498) | } |
| [1499](#L1499) |  |
| [1500](#L1500) | public function time\_to\_decimal($time) { |
| [1501](#L1501) | $timeArr = explode(':', $time); |
| [1502](#L1502) | $decTime = ($timeArr[0] \* 60) + ($timeArr[1]); |
| [1503](#L1503) | if (isset($timeArr[2])) { |
| [1504](#L1504) | $decTime += $timeArr[2] / 60; |
| [1505](#L1505) | } |
| [1506](#L1506) | return $decTime; |
| [1507](#L1507) | } |
| [1508](#L1508) |  |
| [1509](#L1509) | public function showUpgrade($atts = array()) { |
| [1510](#L1510) | global $cmindsPluginPackage; |
| [1511](#L1511) |  |
| [1512](#L1512) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1513](#L1513) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1514](#L1514) |  |
| [1515](#L1515) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-upgrade-hidden'; |
| [1516](#L1516) | $upgradeHide = filter\_input(INPUT\_GET, 'cminds\_upgrade\_hide'); |
| [1517](#L1517) | if ($upgradeHide) { |
| [1518](#L1518) | update\_option($optionName, 1); |
| [1519](#L1519) | } |
| [1520](#L1520) | $upgradeShow = filter\_input(INPUT\_GET, 'cminds\_upgrade\_show'); |
| [1521](#L1521) | if ($upgradeShow) { |
| [1522](#L1522) | update\_option($optionName, 0); |
| [1523](#L1523) | } |
| [1524](#L1524) | $upgradeHidden = get\_option($optionName, 0); |
| [1525](#L1525) | $isRegistered = $currentPlugin->isRegistered(); |
| [1526](#L1526) |  |
| [1527](#L1527) | $showUpgrade = $currentPlugin->getOption('plugin-show-upgrade', TRUE); |
| [1528](#L1528) | if ($showUpgrade) : |
| [1529](#L1529) | ob\_start(); |
| [1530](#L1530) | ?><style type="text/css"> |
| [1531](#L1531) |  |
| [1532](#L1532) | div.cminds\_upgrade\_wrapper { |
| [1533](#L1533) | display: block; |
| [1534](#L1534) | padding: 0em 0em 1em 0em; |
| [1535](#L1535) | background: #FFF; |
| [1536](#L1536) | margin: 0em 1em 0 0; |
| [1537](#L1537) | vertical-align: top; |
| [1538](#L1538) | } |
| [1539](#L1539) |  |
| [1540](#L1540) | div.cminds\_upgrade\_wrapper \* { |
| [1541](#L1541) | vertical-align: top; |
| [1542](#L1542) | } |
| [1543](#L1543) |  |
| [1544](#L1544) | .cminds\_upgrade{ |
| [1545](#L1545) | display: inline-block; |
| [1546](#L1546) | margin: 1em 0em 0em 0em; |
| [1547](#L1547) | padding: 0em; |
| [1548](#L1548) | width: 100%; |
| [1549](#L1549) | } |
| [1550](#L1550) |  |
| [1551](#L1551) | .cminds\_upgrade\_text{ |
| [1552](#L1552) | display: inline-block; |
| [1553](#L1553) | margin: 1em; |
| [1554](#L1554) | } |
| [1555](#L1555) |  |
| [1556](#L1556) | .cminds\_upgrade\_text > span{ |
| [1557](#L1557) | text-align: left; |
| [1558](#L1558) | display: block; |
| [1559](#L1559) | } |
| [1560](#L1560) |  |
| [1561](#L1561) | .clear, .clearfix{ |
| [1562](#L1562) | clear: both; |
| [1563](#L1563) | } |
| [1564](#L1564) |  |
| [1565](#L1565) | .cmclearfix{ |
| [1566](#L1566) | clear: both !important; |
| [1567](#L1567) | } |
| [1568](#L1568) |  |
| [1569](#L1569) | .cminds\_upgrade .upgrade\_header{ |
| [1570](#L1570) | font-size: 14pt; |
| [1571](#L1571) | font-weight: bold; |
| [1572](#L1572) | } |
| [1573](#L1573) |  |
| [1574](#L1574) | .cminds\_upgrade .upgrade\_text{ |
| [1575](#L1575) | display: inline-block; |
| [1576](#L1576) | max-width: 45%; |
| [1577](#L1577) | margin-right: 40px; |
| [1578](#L1578) | } |
| [1579](#L1579) |  |
| [1580](#L1580) | .cminds\_upgrade .upgrade\_videos{ |
| [1581](#L1581) | display: inline-flex; |
| [1582](#L1582) | max-width: 50%; |
| [1583](#L1583) | min-width: 520px; |
| [1584](#L1584) | overflow: hidden; |
| [1585](#L1585) | } |
| [1586](#L1586) |  |
| [1587](#L1587) | .cminds\_upgrade .upgrade\_videos .upgrade\_videos\_inner{ |
| [1588](#L1588) | } |
| [1589](#L1589) |  |
| [1590](#L1590) | .cminds\_upgrade .upgrade\_videos > div{ |
| [1591](#L1591) | display: inline-block; |
| [1592](#L1592) | } |
| [1593](#L1593) | .cminds\_upgrade .upgrade\_videos > div.upgrade\_videos\_after{ |
| [1594](#L1594) | display: block; |
| [1595](#L1595) | margin: 10px 0 0 0px; |
| [1596](#L1596) | } |
| [1597](#L1597) | .prev\_video, |
| [1598](#L1598) | .next\_video { |
| [1599](#L1599) | margin-top: 15px; |
| [1600](#L1600) | } |
| [1601](#L1601) |  |
| [1602](#L1602) | .upgrade\_video\_title { |
| [1603](#L1603) | font-size: 13pt; |
| [1604](#L1604) | font-weight: bold; |
| [1605](#L1605) | margin: 0 0 10px 0px; |
| [1606](#L1606) | } |
| [1607](#L1607) |  |
| [1608](#L1608) | .cminds\_link.blue { |
| [1609](#L1609) | color: #fff; |
| [1610](#L1610) | border-color: #33ace7; |
| [1611](#L1611) | background: #66c1ed; |
| [1612](#L1612) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1613](#L1613) | box-shadow: 0 1px 0 #ccc; |
| [1614](#L1614) | display: inline-block; |
| [1615](#L1615) | text-decoration: none; |
| [1616](#L1616) | line-height: 26px; |
| [1617](#L1617) | height: 28px; |
| [1618](#L1618) | padding: 0 10px 1px; |
| [1619](#L1619) | cursor: pointer; |
| [1620](#L1620) | border-width: 1px; |
| [1621](#L1621) | border-style: solid; |
| [1622](#L1622) | -webkit-border-radius: 3px; |
| [1623](#L1623) | border-radius: 3px; |
| [1624](#L1624) | -webkit-box-sizing: border-box; |
| [1625](#L1625) | -moz-box-sizing: border-box; |
| [1626](#L1626) | box-sizing: border-box; |
| [1627](#L1627) | } |
| [1628](#L1628) |  |
| [1629](#L1629) | .cminds\_upgrade .upgrade\_videos .upgrade\_video{ |
| [1630](#L1630) | display: none; |
| [1631](#L1631) | } |
| [1632](#L1632) | .cminds\_upgrade .upgrade\_videos .upgrade\_video.active{ |
| [1633](#L1633) | display: inline-block; |
| [1634](#L1634) | } |
| [1635](#L1635) |  |
| [1636](#L1636) | .cminds\_upgrade .upgrade\_video\_content > a{ |
| [1637](#L1637) | display: block; |
| [1638](#L1638) | } |
| [1639](#L1639) | </style> |
| [1640](#L1640) | <?php |
| [1641](#L1641) | if (!$upgradeHidden) : |
| [1642](#L1642) | ?> |
| [1643](#L1643) | <script> |
| [1644](#L1644) | jQuery(document).ready(function () { |
| [1645](#L1645) |  |
| [1646](#L1646) | jQuery.fn.visible = function () { |
| [1647](#L1647) | return this.css('visibility', 'visible'); |
| [1648](#L1648) | }; |
| [1649](#L1649) |  |
| [1650](#L1650) | jQuery.fn.invisible = function () { |
| [1651](#L1651) | return this.css('visibility', 'hidden'); |
| [1652](#L1652) | }; |
| [1653](#L1653) |  |
| [1654](#L1654) | jQuery.fn.visibilityToggle = function () { |
| [1655](#L1655) | return this.css('visibility', function (i, visibility) { |
| [1656](#L1656) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1657](#L1657) | }); |
| [1658](#L1658) | }; |
| [1659](#L1659) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1660](#L1660) | var prevVisible = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video').length; |
| [1661](#L1661) | var nextVisible = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video').length; |
| [1662](#L1662) |  |
| [1663](#L1663) | if (prevVisible) { |
| [1664](#L1664) | jQuery('.upgrade\_videos .prev\_video').visible(); |
| [1665](#L1665) | } else { |
| [1666](#L1666) | jQuery('.upgrade\_videos .prev\_video').invisible(); |
| [1667](#L1667) | } |
| [1668](#L1668) |  |
| [1669](#L1669) | if (nextVisible) { |
| [1670](#L1670) | jQuery('.upgrade\_videos .next\_video').visible(); |
| [1671](#L1671) | } else { |
| [1672](#L1672) | jQuery('.upgrade\_videos .next\_video').invisible(); |
| [1673](#L1673) | } |
| [1674](#L1674) | }; |
| [1675](#L1675) |  |
| [1676](#L1676) | cminds\_video\_prev\_next\_toggle(); |
| [1677](#L1677) |  |
| [1678](#L1678) | jQuery('.upgrade\_videos .prev\_video').on('click', function () { |
| [1679](#L1679) | var prevVideo = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video'); |
| [1680](#L1680) | if (prevVideo.length) |
| [1681](#L1681) | { |
| [1682](#L1682) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1683](#L1683) | prevVideo.addClass('active'); |
| [1684](#L1684) | } |
| [1685](#L1685) | cminds\_video\_prev\_next\_toggle(); |
| [1686](#L1686) | }); |
| [1687](#L1687) |  |
| [1688](#L1688) | jQuery('.upgrade\_videos .next\_video').on('click', function () { |
| [1689](#L1689) | var nextVideo = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video'); |
| [1690](#L1690) | if (nextVideo.length) |
| [1691](#L1691) | { |
| [1692](#L1692) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1693](#L1693) | nextVideo.addClass('active'); |
| [1694](#L1694) | } |
| [1695](#L1695) | cminds\_video\_prev\_next\_toggle(); |
| [1696](#L1696) | }); |
| [1697](#L1697) | });</script> |
| [1698](#L1698) | <script type="text/javascript" src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>js/froogaloop.js"></script> |
| [1699](#L1699) | <script> |
| [1700](#L1700) | jQuery(document).ready(function ( ) { |
| [1701](#L1701) | // Message displayed when link is playing |
| [1702](#L1702) | var links = jQuery('.cm-video-bookmark-link'); |
| [1703](#L1703) | var playNotice = ' - <strong><i><spam style="color:darkgreen;">Now playing</span></i></strong>'; |
| [1704](#L1704) | // Function to hide all status messages |
| [1705](#L1705) | hidePlayNoticeAll = function ( ) { |
| [1706](#L1706) | jQuery('.cm-video-bookmark-link .link\_status').html(""); |
| [1707](#L1707) | } |
| [1708](#L1708) |  |
| [1709](#L1709) | //                             Load Vimeo API for the embedded video |
| [1710](#L1710) | var iframe\_player = jQuery('.upgrade\_video\_content iframe')[0]; |
| [1711](#L1711) | var frogaloopPlayer = $f(iframe\_player); |
| [1712](#L1712) | // Option listeners for pause, finish, and playProgress |
| [1713](#L1713) | // |
| [1714](#L1714) | // Note: If you want to use this, you must define the functions or links wont work |
| [1715](#L1715) | frogaloopPlayer.addEvent('ready', function ( ) { |
| [1716](#L1716) | frogaloopPlayer.addEvent('pause', onPause); |
| [1717](#L1717) | frogaloopPlayer.addEvent('finish', onFinish); |
| [1718](#L1718) | frogaloopPlayer.addEvent('playProgress', onPlayProgress); |
| [1719](#L1719) | }); |
| [1720](#L1720) |  |
| [1721](#L1721) | // Functions for each listener event |
| [1722](#L1722) | function onPause(id) { // When the video is paused, do this. |
| [1723](#L1723) | jQuery(".main\_status").html('Paused'); |
| [1724](#L1724) | } |
| [1725](#L1725) |  |
| [1726](#L1726) | function onFinish(id) { // When the video is finished, do this. |
| [1727](#L1727) | jQuery(".main\_status").html('Finished'); |
| [1728](#L1728) | } |
| [1729](#L1729) |  |
| [1730](#L1730) | function onPlayProgress(data, id) { // While the video is playing, do this. |
| [1731](#L1731) | jQuery(".main\_status").html('Playing - ' + data.seconds + 's played'); // data.percent can also be used. |
| [1732](#L1732) | } |
| [1733](#L1733) |  |
| [1734](#L1734) | // Function to control what happens when each lesson link is clicked |
| [1735](#L1735) | function setupLinks( ) { |
| [1736](#L1736) |  |
| [1737](#L1737) | links.on('click', function ( ) { |
| [1738](#L1738) | var track = jQuery(this).data('timestamp'); //Timestamp stored as a data attribute |
| [1739](#L1739) |  |
| [1740](#L1740) | hidePlayNoticeAll( ); // Hide all status messages before displaying (to prevent them from sticking) |
| [1741](#L1741) | if (true === jQuery(this).data('active')) { |
| [1742](#L1742) | frogaloopPlayer.api('pause'); //Play the video |
| [1743](#L1743) | jQuery(this).data('active', false); |
| [1744](#L1744) | } else { |
| [1745](#L1745) | frogaloopPlayer.api('play'); //Play the video |
| [1746](#L1746) | frogaloopPlayer.api('seekTo', track); //Seek to the number of seconds in the variable link\_1\_track |
| [1747](#L1747) | jQuery(this).find('.link\_status').html(playNotice); //Display status message (playNotice) within span with class link\_1\_status |
| [1748](#L1748) | jQuery(this).data('active', true); |
| [1749](#L1749) | } |
| [1750](#L1750) | }); |
| [1751](#L1751) | } |
| [1752](#L1752) | setupLinks( ); |
| [1753](#L1753) | });</script> |
| [1754](#L1754) | <div class="clear clearfix cmclearfix"></div> |
| [1755](#L1755) | <div class="cminds\_upgrade\_wrapper"> |
| [1756](#L1756) | <div class="cminds\_upgrade"> |
| [1757](#L1757) |  |
| [1758](#L1758) | <?php |
| [1759](#L1759) | $upgradeText = $currentPlugin->getOption('plugin-upgrade-text'); |
| [1760](#L1760) | if (!empty($upgradeText)) : |
| [1761](#L1761) | ?> |
| [1762](#L1762) | <div class="upgrade\_text"> |
| [1763](#L1763) | <div class="upgrade\_header"> |
| [1764](#L1764) | Why you Should Upgrade |
| [1765](#L1765) | </div> |
| [1766](#L1766) | <div style="display:block"> |
| [1767](#L1767) | <p><?php echo $upgradeText; ?></p> |
| [1768](#L1768) | <div class="links"> |
| [1769](#L1769) |  |
| [1770](#L1770) | <?php |
| [1771](#L1771) | $upgradel = $currentPlugin->getOption('plugin-upgrade-text-list'); |
| [1772](#L1772) | if (!empty($upgradel) && is\_array($upgradel)) : |
| [1773](#L1773) | foreach ($upgradel as $key => $listitem) : |
| [1774](#L1774) | $linknum = $key + 1; |
| [1775](#L1775) | echo $listitem['video\_time']; |
| [1776](#L1776) | if ('More' !== $listitem['video\_time']) : |
| [1777](#L1777) | ?> |
| [1778](#L1778) | - <a class="cm-video-bookmark-link link\_<?php echo $linknum; ?>" data-timestamp="<?php echo $this->time\_to\_decimal($listitem['video\_time']); ?>" href="javascript:void(0);" target="\_self"><?php echo $listitem['title']; ?><span class="link\_status"></span></a> |
| [1779](#L1779) | <?php else: ?> |
| [1780](#L1780) | - <span class="cm-video-bookmark bookmark\_<?php echo $linknum; ?>" style="color:green;"><?php echo $listitem['title']; ?></span> |
| [1781](#L1781) | <?php endif; ?> |
| [1782](#L1782) | <br/> |
| [1783](#L1783) | <?php endforeach; ?> |
| [1784](#L1784) | <?php endif ?> |
| [1785](#L1785) | </div> |
| [1786](#L1786) | </div> |
| [1787](#L1787) | </div> |
| [1788](#L1788) | <?php endif; ?> |
| [1789](#L1789) |  |
| [1790](#L1790) | <?php |
| [1791](#L1791) | $videos = $currentPlugin->getOption('plugin-upgrade-videos'); |
| [1792](#L1792) | if (!empty($videos) && is\_array($videos)) : |
| [1793](#L1793) | ?> |
| [1794](#L1794) | <div class="upgrade\_videos"> |
| [1795](#L1795) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1796](#L1796) | <div class="upgrade\_videos\_inner"> |
| [1797](#L1797) | <?php |
| [1798](#L1798) | foreach ($videos as $key => $video) : |
| [1799](#L1799) | if (!empty($video)) : |
| [1800](#L1800) | ?> |
| [1801](#L1801) |  |
| [1802](#L1802) | <div class="upgrade\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1803](#L1803) | <div class="upgrade\_video\_title"><?php echo $video['title']; ?></div> |
| [1804](#L1804) | <div class="upgrade\_video\_content"> |
| [1805](#L1805) | <?php |
| [1806](#L1806) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="390" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1807](#L1807) | ?> |
| [1808](#L1808) | <br /><br /><a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $currentPlugin->getOption('plugin-abbrev') . '\_pro')); ?>" class="button button-primary" style="background-color:green; width:220px;" title="Click to Buy PRO">Show me Upgrade Options >></a> |
| [1809](#L1809) |  |
| [1810](#L1810) | </div> |
| [1811](#L1811) | </div> |
| [1812](#L1812) | <?php |
| [1813](#L1813) | endif; |
| [1814](#L1814) | endforeach; |
| [1815](#L1815) | ?> |
| [1816](#L1816) | </div> |
| [1817](#L1817) | </div> |
| [1818](#L1818) | <?php endif; ?> |
| [1819](#L1819) | </div>                    </div> |
| [1820](#L1820) | <?php |
| [1821](#L1821) | echo $this->showAds($atts); |
| [1822](#L1822) | ?> |
| [1823](#L1823) | <div class="clear clearfix cmclearfix"></div> |
| [1824](#L1824) | <?php else : ?> |
| [1825](#L1825) | <div class="cminds\_upgrade\_wrapper"> |
| [1826](#L1826) | <div> |
| [1827](#L1827) | <a class="cminds-upgrade-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_upgrade\_show' => 1), remove\_query\_arg('cminds\_upgrade\_hide'))); ?>">Why you shoud have the Premium Edition>></a> |
| [1828](#L1828) | </div> |
| [1829](#L1829) | </div> |
| [1830](#L1830) | <div class="clear clearfix cmclearfix"></div> |
| [1831](#L1831) | <?php |
| [1832](#L1832) | endif; |
| [1833](#L1833) | ?> |
| [1834](#L1834) |  |
| [1835](#L1835) | <?php |
| [1836](#L1836) | $content = ob\_get\_clean(); |
| [1837](#L1837) | return $content; |
| [1838](#L1838) | endif; |
| [1839](#L1839) | } |
| [1840](#L1840) |  |
| [1841](#L1841) | protected function getDaysSinceLastRefresh($ads\_arr) { |
| [1842](#L1842) | if (!is\_array($ads\_arr) && empty($ads\_arr['refresh\_time'])) { |
| [1843](#L1843) | return null; |
| [1844](#L1844) | } |
| [1845](#L1845) |  |
| [1846](#L1846) | $now = time(); |
| [1847](#L1847) | $your\_date = intval($ads\_arr['refresh\_time']); |
| [1848](#L1848) | $datediff = $now - $your\_date; |
| [1849](#L1849) | $days = abs(floor($datediff / (60 \* 60 \* 24))); |
| [1850](#L1850) | return $days; |
| [1851](#L1851) | } |
| [1852](#L1852) |  |
| [1853](#L1853) | public function showAds($atts = array()) { |
| [1854](#L1854) | global $cmindsPluginPackage; |
| [1855](#L1855) |  |
| [1856](#L1856) | $atts = shortcode\_atts(array( |
| [1857](#L1857) | 'flat' => false, |
| [1858](#L1858) | 'id'   => null |
| [1859](#L1859) | ), $atts); |
| [1860](#L1860) |  |
| [1861](#L1861) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1862](#L1862) |  |
| [1863](#L1863) | $optionName = 'cminds-' . $this->getOption('plugin-short-slug') . '-ads-hidden'; |
| [1864](#L1864) | $adsHide = filter\_input(INPUT\_GET, 'cminds\_ad\_hide'); |
| [1865](#L1865) | if ($adsHide) { |
| [1866](#L1866) | update\_option($optionName, 1); |
| [1867](#L1867) | } |
| [1868](#L1868) | $adsShow = filter\_input(INPUT\_GET, 'cminds\_ad\_show'); |
| [1869](#L1869) | if ($adsShow) { |
| [1870](#L1870) | update\_option($optionName, 0); |
| [1871](#L1871) | } |
| [1872](#L1872) | $adsHidden = get\_option($optionName, 1); |
| [1873](#L1873) | $adsRefreshed = filter\_input(INPUT\_GET, 'cminds\_ad\_refresh'); |
| [1874](#L1874) | if ($adsRefreshed) { |
| [1875](#L1875) | delete\_transient('cminds\_free\_ads'); |
| [1876](#L1876) | } |
| [1877](#L1877) | $ads\_arr = $this->getAds(); |
| [1878](#L1878) | $ads = isset($ads\_arr['ads']) ? $ads\_arr['ads'] : array(); |
| [1879](#L1879) | $days\_since\_last\_refresh = $this->getDaysSinceLastRefresh($ads\_arr); |
| [1880](#L1880) |  |
| [1881](#L1881) | $isRegistered = $currentPlugin->isRegistered(); |
| [1882](#L1882) | /\* |
| [1883](#L1883) | \* Don't display if there's no server connection |
| [1884](#L1884) | \*/ |
| [1885](#L1885) | if (!$ads\_arr['connection']) { |
| [1886](#L1886) | return; |
| [1887](#L1887) | } |
| [1888](#L1888) | ob\_start(); |
| [1889](#L1889) | ?> |
| [1890](#L1890) |  |
| [1891](#L1891) | <style type="text/css"> |
| [1892](#L1892) |  |
| [1893](#L1893) | div.cminds\_ads\_wrapper { |
| [1894](#L1894) | display: inline-block; |
| [1895](#L1895) | padding: 1em; |
| [1896](#L1896) | background: #FFF; |
| [1897](#L1897) | border: solid 1px #E0E0E0; |
| [1898](#L1898) | margin: 1em 1em 0 0; |
| [1899](#L1899) | vertical-align: top; |
| [1900](#L1900) | } |
| [1901](#L1901) |  |
| [1902](#L1902) | .cminds\_ads\_internal\_wrapper { |
| [1903](#L1903) | display: inline-block; |
| [1904](#L1904) | overflow: auto; |
| [1905](#L1905) | max-height: 175px; |
| [1906](#L1906) | } |
| [1907](#L1907) |  |
| [1908](#L1908) | .cminds\_ad{ |
| [1909](#L1909) | display: block; |
| [1910](#L1910) | margin: 0.5em; |
| [1911](#L1911) | vertical-align: top; |
| [1912](#L1912) | } |
| [1913](#L1913) |  |
| [1914](#L1914) | span.ad\_code { |
| [1915](#L1915) | font-weight: bold; |
| [1916](#L1916) | } |
| [1917](#L1917) |  |
| [1918](#L1918) | .cminds\_ad.hidden{ |
| [1919](#L1919) | display: none; |
| [1920](#L1920) | } |
| [1921](#L1921) | .cminds\_ads\_wrapper.hidden{ |
| [1922](#L1922) | display: none; |
| [1923](#L1923) | } |
| [1924](#L1924) |  |
| [1925](#L1925) | .cminds\_ad\_text{ |
| [1926](#L1926) | display: block; |
| [1927](#L1927) | margin-bottom: 1em; |
| [1928](#L1928) | } |
| [1929](#L1929) | .cminds\_ad\_link{ |
| [1930](#L1930) | text-align: center; |
| [1931](#L1931) | } |
| [1932](#L1932) |  |
| [1933](#L1933) | span.ads\_refreshed{ |
| [1934](#L1934) | color: #259602; |
| [1935](#L1935) | font-weight: bold; |
| [1936](#L1936) | } |
| [1937](#L1937) |  |
| [1938](#L1938) | .cminds\_ad\_text > a:before { |
| [1939](#L1939) | content:"\A"; white-space:pre; |
| [1940](#L1940) | } |
| [1941](#L1941) |  |
| [1942](#L1942) | .cminds\_ad\_text > \*:after { |
| [1943](#L1943) | content:"\A"; white-space:pre; |
| [1944](#L1944) | } |
| [1945](#L1945) |  |
| [1946](#L1946) | .cminds\_no\_ads{ |
| [1947](#L1947) | margin: 1em 0; |
| [1948](#L1948) | font-size: 12pt; |
| [1949](#L1949) | font-weight: bold; |
| [1950](#L1950) | } |
| [1951](#L1951) |  |
| [1952](#L1952) | .cminds\_links{ |
| [1953](#L1953) | display: inline-block; |
| [1954](#L1954) | margin: 1em; |
| [1955](#L1955) | padding: 0; |
| [1956](#L1956) | max-width: 150px; |
| [1957](#L1957) | min-height: 90px; |
| [1958](#L1958) | vertical-align: top; |
| [1959](#L1959) | text-align: left; |
| [1960](#L1960) | } |
| [1961](#L1961) |  |
| [1962](#L1962) | .cminds\_links .cminds\_link{ |
| [1963](#L1963) | margin: 5px 0; |
| [1964](#L1964) | } |
| [1965](#L1965) |  |
| [1966](#L1966) | .cminds\_links .cminds\_link:first-child{ |
| [1967](#L1967) | margin-top: 0; |
| [1968](#L1968) | } |
| [1969](#L1969) |  |
| [1970](#L1970) | .cminds\_link{ |
| [1971](#L1971) | color: #555; |
| [1972](#L1972) | border-color: rgba(204,204,204,0.8); |
| [1973](#L1973) | background: #f7f7f7; |
| [1974](#L1974) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1975](#L1975) | box-shadow: 0 1px 0 #ccc; |
| [1976](#L1976) | display: inline-block; |
| [1977](#L1977) | text-decoration: none; |
| [1978](#L1978) | line-height: 26px; |
| [1979](#L1979) | height: 28px; |
| [1980](#L1980) | padding: 0 10px 1px; |
| [1981](#L1981) | cursor: pointer; |
| [1982](#L1982) | border-width: 1px; |
| [1983](#L1983) | border-style: solid; |
| [1984](#L1984) | -webkit-border-radius: 3px; |
| [1985](#L1985) | border-radius: 3px; |
| [1986](#L1986) | -webkit-box-sizing: border-box; |
| [1987](#L1987) | -moz-box-sizing: border-box; |
| [1988](#L1988) | box-sizing: border-box; |
| [1989](#L1989) | } |
| [1990](#L1990) |  |
| [1991](#L1991) | .cminds\_link:active { |
| [1992](#L1992) | background: #eee; |
| [1993](#L1993) | border-color: #999; |
| [1994](#L1994) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [1995](#L1995) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [1996](#L1996) | -webkit-transform: translateY(1px); |
| [1997](#L1997) | -ms-transform: translateY(1px); |
| [1998](#L1998) | transform: translateY(1px); |
| [1999](#L1999) | } |
| [2000](#L2000) |  |
| [2001](#L2001) | .cminds\_link:hover { |
| [2002](#L2002) | background: #eee; |
| [2003](#L2003) | border-color: #999; |
| [2004](#L2004) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2005](#L2005) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2006](#L2006) | -webkit-transform: translateY(1px); |
| [2007](#L2007) | -ms-transform: translateY(1px); |
| [2008](#L2008) | transform: translateY(1px); |
| [2009](#L2009) | } |
| [2010](#L2010) |  |
| [2011](#L2011) | .cminds\_link.blue{ |
| [2012](#L2012) | color: #fff; |
| [2013](#L2013) | border-color: #33ace7; |
| [2014](#L2014) | background: #66c1ed; |
| [2015](#L2015) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2016](#L2016) | box-shadow: 0 1px 0 #ccc; |
| [2017](#L2017) | display: inline-block; |
| [2018](#L2018) | text-decoration: none; |
| [2019](#L2019) | line-height: 26px; |
| [2020](#L2020) | height: 28px; |
| [2021](#L2021) | padding: 0 10px 1px; |
| [2022](#L2022) | cursor: pointer; |
| [2023](#L2023) | border-width: 1px; |
| [2024](#L2024) | border-style: solid; |
| [2025](#L2025) | -webkit-border-radius: 3px; |
| [2026](#L2026) | border-radius: 3px; |
| [2027](#L2027) | -webkit-box-sizing: border-box; |
| [2028](#L2028) | -moz-box-sizing: border-box; |
| [2029](#L2029) | box-sizing: border-box; |
| [2030](#L2030) |  |
| [2031](#L2031) | } |
| [2032](#L2032) |  |
| [2033](#L2033) | .cminds\_link.blue:active { |
| [2034](#L2034) | background: #0198e1; |
| [2035](#L2035) | border-color: #66c1ed; |
| [2036](#L2036) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2037](#L2037) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2038](#L2038) | -webkit-transform: translateY(1px); |
| [2039](#L2039) | -ms-transform: translateY(1px); |
| [2040](#L2040) | transform: translateY(1px); |
| [2041](#L2041) | } |
| [2042](#L2042) |  |
| [2043](#L2043) | .cminds\_link.blue:hover { |
| [2044](#L2044) | background: #005b87; |
| [2045](#L2045) | border-color: #0198e1; |
| [2046](#L2046) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2047](#L2047) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2048](#L2048) | -webkit-transform: translateY(1px); |
| [2049](#L2049) | -ms-transform: translateY(1px); |
| [2050](#L2050) | transform: translateY(1px); |
| [2051](#L2051) | } |
| [2052](#L2052) |  |
| [2053](#L2053) | .cminds\_link.orange{ |
| [2054](#L2054) | color: #fff; |
| [2055](#L2055) | border-color: #ffb752; |
| [2056](#L2056) | background: #ffb752; |
| [2057](#L2057) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2058](#L2058) | box-shadow: 0 1px 0 #ccc; |
| [2059](#L2059) | display: inline-block; |
| [2060](#L2060) | text-decoration: none; |
| [2061](#L2061) | line-height: 26px; |
| [2062](#L2062) | height: 28px; |
| [2063](#L2063) | padding: 0 10px 1px; |
| [2064](#L2064) | cursor: pointer; |
| [2065](#L2065) | border-width: 1px; |
| [2066](#L2066) | border-style: solid; |
| [2067](#L2067) | -webkit-border-radius: 3px; |
| [2068](#L2068) | border-radius: 3px; |
| [2069](#L2069) | -webkit-box-sizing: border-box; |
| [2070](#L2070) | -moz-box-sizing: border-box; |
| [2071](#L2071) | box-sizing: border-box; |
| [2072](#L2072) |  |
| [2073](#L2073) | } |
| [2074](#L2074) |  |
| [2075](#L2075) | .cminds\_link.orange:active { |
| [2076](#L2076) | background: #e5a449; |
| [2077](#L2077) | border-color: #ffc574; |
| [2078](#L2078) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2079](#L2079) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2080](#L2080) | -webkit-transform: translateY(1px); |
| [2081](#L2081) | -ms-transform: translateY(1px); |
| [2082](#L2082) | transform: translateY(1px); |
| [2083](#L2083) | } |
| [2084](#L2084) |  |
| [2085](#L2085) | .cminds\_link.orange:hover { |
| [2086](#L2086) | background: #e5a449; |
| [2087](#L2087) | border-color: #ffc574; |
| [2088](#L2088) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2089](#L2089) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2090](#L2090) | -webkit-transform: translateY(1px); |
| [2091](#L2091) | -ms-transform: translateY(1px); |
| [2092](#L2092) | transform: translateY(1px); |
| [2093](#L2093) | } |
| [2094](#L2094) |  |
| [2095](#L2095) | .cminds\_more{ |
| [2096](#L2096) | display: inline-block; |
| [2097](#L2097) | margin: 1em; |
| [2098](#L2098) | vertical-align: top; |
| [2099](#L2099) | font-size: 12pt; |
| [2100](#L2100) | line-height: 123px; |
| [2101](#L2101) | } |
| [2102](#L2102) |  |
| [2103](#L2103) | .cminds\_more > \*{ |
| [2104](#L2104) | cursor: pointer; |
| [2105](#L2105) | } |
| [2106](#L2106) |  |
| [2107](#L2107) | .cminds\_link.cminds\_more\_ads { |
| [2108](#L2108) | -moz-border-radius: 11px; |
| [2109](#L2109) | -webkit-border-radius: 11px; |
| [2110](#L2110) | border-radius: 11px; |
| [2111](#L2111) | border: 1px solid #66c1ed; |
| [2112](#L2112) | font-size: 23px; |
| [2113](#L2113) | padding: 8px 14px; |
| [2114](#L2114) | text-decoration: none; |
| [2115](#L2115) | line-height: 23px; |
| [2116](#L2116) | height: auto; |
| [2117](#L2117) | } |
| [2118](#L2118) |  |
| [2119](#L2119) | .clear, .clearfix{ |
| [2120](#L2120) | clear:both; |
| [2121](#L2121) | } |
| [2122](#L2122) |  |
| [2123](#L2123) | .cmclearfix{ |
| [2124](#L2124) | clear: both !important; |
| [2125](#L2125) | } |
| [2126](#L2126) | </style> |
| [2127](#L2127) |  |
| [2128](#L2128) | <?php if ($isRegistered) : ?> |
| [2129](#L2129) |  |
| [2130](#L2130) | <?php if (!$atts['flat']) : ?> |
| [2131](#L2131) |  |
| [2132](#L2132) | <script> |
| [2133](#L2133) | jQuery(document).ready(function ( ) { |
| [2134](#L2134) | jQuery('.cminds-ads-show-button').on('click', function (e) { |
| [2135](#L2135) | e.preventDefault( ); |
| [2136](#L2136) | jQuery('#cminds\_offers\_wrapper').toggleClass('hidden'); |
| [2137](#L2137) | jQuery('#cminds\_links\_wrapper').toggleClass('hidden'); |
| [2138](#L2138) | }); |
| [2139](#L2139) | });</script> |
| [2140](#L2140) |  |
| [2141](#L2141) | <h3>Special offers from CreativeMinds</h3> |
| [2142](#L2142) |  |
| [2143](#L2143) | <div class="cminds\_ads\_wrapper\_white"> |
| [2144](#L2144) | <a href="https://www.cminds.com/wordpress-plugins-library/seo-keyword-hound-wordpress/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/keywordhoundbanner.jpg"></a> |
| [2145](#L2145) | <span style="margin-left:20px;"> |
| [2146](#L2146) | <a class="" href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/99suite.png"></a> |
| [2147](#L2147) | </span> |
| [2148](#L2148) | </div> |
| [2149](#L2149) |  |
| [2150](#L2150) |  |
| [2151](#L2151) | <?php if (!empty($ads)) : ?> |
| [2152](#L2152) | <div class="cminds\_ads\_internal\_wrapper"> |
| [2153](#L2153) | <?php foreach ($ads as $index => $ad) : ?> |
| [2154](#L2154) | <div class="cminds\_ad"> |
| [2155](#L2155) | <?php |
| [2156](#L2156) | $dateUntil = date('jS F, Y', strtotime($ad['ad\_valid\_date'])); |
| [2157](#L2157) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code <span class="ad\_code">"%s"</span> valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2158](#L2158) | ?> |
| [2159](#L2159) | <span class="cminds\_ad\_link"> |
| [2160](#L2160) | <a class="cminds\_link blue" target="\_blank" href="<?php echo $this->addAffiliateCode($ad['ad\_url']); ?>">Redeem Offer</a> |
| [2161](#L2161) | </span> |
| [2162](#L2162) | </div> |
| [2163](#L2163) | <?php endforeach; ?> |
| [2164](#L2164) | </div> |
| [2165](#L2165) | <?php else: ?> |
| [2166](#L2166) | <div class="cminds\_no\_ads"> |
| [2167](#L2167) | <span class="cminds\_no\_ads\_text"> |
| [2168](#L2168) | Currently we have no special discounts. |
| [2169](#L2169) | </span> |
| [2170](#L2170) | </div> |
| [2171](#L2171) | <?php endif; ?> |
| [2172](#L2172) |  |
| [2173](#L2173) | <div> |
| [2174](#L2174) | <?php if ($adsRefreshed) : |
| [2175](#L2175) | ?> |
| [2176](#L2176) | <span class="ads\_refreshed"> |
| [2177](#L2177) | Discounts have been refreshed. |
| [2178](#L2178) | </span> |
| [2179](#L2179) | <?php else : ?> |
| [2180](#L2180) | You haven't refreshed the discounts for <?php echo $days\_since\_last\_refresh . ' ' . \_n('day', 'days', $days\_since\_last\_refresh); ?>. <a class="cminds-ads-refresh-button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_ad\_refresh' => 1))); ?>"><strong>Refresh now!</strong></a> |
| [2181](#L2181) | <?php endif; ?> |
| [2182](#L2182) | </div> |
| [2183](#L2183) | <?php else: ?> |
| [2184](#L2184) | <ul class="cminds\_ads\_list\_wrapper"> |
| [2185](#L2185) | <?php foreach ($ads as $index => $ad) : ?> |
| [2186](#L2186) | <li class="cminds\_ads\_list\_item">                                                           <?php |
| [2187](#L2187) | $dateUntil = date('Y-m-d', strtotime($ad['ad\_valid\_date'])); |
| [2188](#L2188) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code "%s" valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2189](#L2189) | ?> |
| [2190](#L2190) | </li> |
| [2191](#L2191) | <?php endforeach; ?> |
| [2192](#L2192) | </ul> |
| [2193](#L2193) | <?php endif; ?> |
| [2194](#L2194) | <?php else: ?> |
| [2195](#L2195) | <h3>Special Offers from CreativeMinds</h3> |
| [2196](#L2196) |  |
| [2197](#L2197) | <p> |
| [2198](#L2198) | <a href="javascript:void(0)" id="cminds-unskip">Complete <?php echo esc\_attr($currentPlugin->getOption('plugin-name')); ?> registration</a> and receive special offers |
| [2199](#L2199) | </p> |
| [2200](#L2200) | <?php endif; ?> |
| [2201](#L2201) | <div class="clear clearfix cmclearfix"></div> |
| [2202](#L2202) | <?php |
| [2203](#L2203) | $content = ob\_get\_clean(); |
| [2204](#L2204) | return $content; |
| [2205](#L2205) | } |
| [2206](#L2206) |  |
| [2207](#L2207) | public function getRegistrationFields() { |
| [2208](#L2208) | $fields = array( |
| [2209](#L2209) | 'product\_name'   => $this->getOption('plugin-name'), |
| [2210](#L2210) | 'remote\_url'     => get\_bloginfo('wpurl'), |
| [2211](#L2211) | 'remote\_ip'      => $\_SERVER['SERVER\_ADDR'], |
| [2212](#L2212) | 'remote\_country' => '', |
| [2213](#L2213) | 'remote\_city'    => '', |
| [2214](#L2214) | 'email'          => get\_bloginfo('admin\_email'), |
| [2215](#L2215) | 'hostname'       => get\_bloginfo('wpurl'), |
| [2216](#L2216) | 'username'       => '', |
| [2217](#L2217) | ); |
| [2218](#L2218) |  |
| [2219](#L2219) | $output = ''; |
| [2220](#L2220) |  |
| [2221](#L2221) | foreach ($fields as $key => $value) { |
| [2222](#L2222) | $output .= sprintf('<input type="hidden" name="%s" value="%s" />', $key, $value); |
| [2223](#L2223) | } |
| [2224](#L2224) |  |
| [2225](#L2225) | return $output; |
| [2226](#L2226) | } |
| [2227](#L2227) |  |
| [2228](#L2228) | public function isSkipped($id = null) { |
| [2229](#L2229) | global $cmindsPluginPackage; |
| [2230](#L2230) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2231](#L2231) | $isSkipped = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'); |
| [2232](#L2232) | return $isSkipped; |
| [2233](#L2233) | } |
| [2234](#L2234) |  |
| [2235](#L2235) | public function isRegistered($id = null) { |
| [2236](#L2236) | global $cmindsPluginPackage; |
| [2237](#L2237) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2238](#L2238) | $isRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'); |
| [2239](#L2239) | return $isRegistered; |
| [2240](#L2240) | } |
| [2241](#L2241) |  |
| [2242](#L2242) | public function wasRegistered($id = null) { |
| [2243](#L2243) | global $cmindsPluginPackage; |
| [2244](#L2244) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2245](#L2245) | $wasRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'); |
| [2246](#L2246) | return $wasRegistered; |
| [2247](#L2247) | } |
| [2248](#L2248) |  |
| [2249](#L2249) | public function setWasRegistered($id = null) { |
| [2250](#L2250) | global $cmindsPluginPackage; |
| [2251](#L2251) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2252](#L2252) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'; |
| [2253](#L2253) | $result = update\_option($optionName, 1); |
| [2254](#L2254) | return $result; |
| [2255](#L2255) | } |
| [2256](#L2256) |  |
| [2257](#L2257) | /\*\* |
| [2258](#L2258) | \* Function comminicates with our server to remove the user from our database (right to be forgotten) |
| [2259](#L2259) | \* @global array $cmindsPluginPackage |
| [2260](#L2260) | \* @param type $atts |
| [2261](#L2261) | \* @return type |
| [2262](#L2262) | \*/ |
| [2263](#L2263) | public function deregisterUser($atts = array()) { |
| [2264](#L2264) | global $cmindsPluginPackage; |
| [2265](#L2265) |  |
| [2266](#L2266) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2267](#L2267) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2268](#L2268) |  |
| [2269](#L2269) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2270](#L2270) | $post = filter\_input\_array(INPUT\_POST); |
| [2271](#L2271) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2272](#L2272) |  |
| [2273](#L2273) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2274](#L2274) | if ($nonceCheck) { |
| [2275](#L2275) |  |
| [2276](#L2276) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2277](#L2277) | return; |
| [2278](#L2278) | } |
| [2279](#L2279) |  |
| [2280](#L2280) | unset($post['cminds\_nonce']); |
| [2281](#L2281) | $jsonData = wp\_json\_encode(array($post)); |
| [2282](#L2282) |  |
| [2283](#L2283) | $args = array( |
| [2284](#L2284) | 'body' => array( |
| [2285](#L2285) | 'jsonData' => $jsonData |
| [2286](#L2286) | ) |
| [2287](#L2287) | ); |
| [2288](#L2288) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2289](#L2289) | $response = wp\_remote\_post($href, $args); |
| [2290](#L2290) | if (!is\_wp\_error($response)) { |
| [2291](#L2291) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2292](#L2292) | if ($result && 1 === $result['result']) { |
| [2293](#L2293) | update\_option($optionName, 0); |
| [2294](#L2294) | } |
| [2295](#L2295) | } else { |
| [2296](#L2296) | $args['sslverify'] = false; |
| [2297](#L2297) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2298](#L2298) | $response = wp\_remote\_post($href, $args); |
| [2299](#L2299) | if (!is\_wp\_error($response)) { |
| [2300](#L2300) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2301](#L2301) | if ($result && 1 === $result['result']) { |
| [2302](#L2302) | update\_option($optionName, 0); |
| [2303](#L2303) | } |
| [2304](#L2304) | } else { |
| [2305](#L2305) | $message = 'User has requested the deregistration: <br/><table>'; |
| [2306](#L2306) | foreach ($post as $key => $value) { |
| [2307](#L2307) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2308](#L2308) | continue; |
| [2309](#L2309) | } |
| [2310](#L2310) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2311](#L2311) | } |
| [2312](#L2312) | $message .= '</table>'; |
| [2313](#L2313) |  |
| [2314](#L2314) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2315](#L2315) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration Canceled', $message); |
| [2316](#L2316) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2317](#L2317) | } |
| [2318](#L2318) | } |
| [2319](#L2319) | update\_option($optionName, 0); |
| [2320](#L2320) | } |
| [2321](#L2321) | } |
| [2322](#L2322) | } |
| [2323](#L2323) |  |
| [2324](#L2324) | public function skipRegistration($atts = array()) { |
| [2325](#L2325) | global $cmindsPluginPackage; |
| [2326](#L2326) |  |
| [2327](#L2327) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2328](#L2328) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2329](#L2329) |  |
| [2330](#L2330) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2331](#L2331) | update\_option($optionName, 1); |
| [2332](#L2332) | } |
| [2333](#L2333) |  |
| [2334](#L2334) | public function unskipRegistration($atts = array()) { |
| [2335](#L2335) | global $cmindsPluginPackage; |
| [2336](#L2336) |  |
| [2337](#L2337) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2338](#L2338) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2339](#L2339) |  |
| [2340](#L2340) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2341](#L2341) | update\_option($optionName, 0); |
| [2342](#L2342) | } |
| [2343](#L2343) |  |
| [2344](#L2344) | /\*\* |
| [2345](#L2345) | \* Function communicates with our server to register user's e-mail in our database. |
| [2346](#L2346) | \* It's an optional step, user can easily skip it. We only collect e-mail and the url of the site. |
| [2347](#L2347) | \* User is being informed about the data being collected and the reason why it's collected. |
| [2348](#L2348) | \* @global array $cmindsPluginPackage |
| [2349](#L2349) | \* @param type $atts |
| [2350](#L2350) | \* @return type |
| [2351](#L2351) | \*/ |
| [2352](#L2352) | public function registerUser($atts = array()) { |
| [2353](#L2353) | global $cmindsPluginPackage; |
| [2354](#L2354) |  |
| [2355](#L2355) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2356](#L2356) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2357](#L2357) |  |
| [2358](#L2358) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2359](#L2359) | $post = filter\_input\_array(INPUT\_POST); |
| [2360](#L2360) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2361](#L2361) |  |
| [2362](#L2362) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2363](#L2363) | if ($nonceCheck) { |
| [2364](#L2364) |  |
| [2365](#L2365) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2366](#L2366) | return; |
| [2367](#L2367) | } |
| [2368](#L2368) |  |
| [2369](#L2369) | unset($post['cminds\_nonce']); |
| [2370](#L2370) | $jsonData = wp\_json\_encode(array($post)); |
| [2371](#L2371) |  |
| [2372](#L2372) | $args = array( |
| [2373](#L2373) | 'body' => array( |
| [2374](#L2374) | 'jsonData' => $jsonData |
| [2375](#L2375) | ) |
| [2376](#L2376) | ); |
| [2377](#L2377) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2378](#L2378) | $response = wp\_remote\_post($href, $args); |
| [2379](#L2379) | if (!is\_wp\_error($response)) { |
| [2380](#L2380) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2381](#L2381) | if ($result && 1 === $result['result']) { |
| [2382](#L2382) | update\_option($optionName, 1); |
| [2383](#L2383) | $currentPlugin->setWasRegistered(); |
| [2384](#L2384) | } |
| [2385](#L2385) | } else { |
| [2386](#L2386) | $args['sslverify'] = false; |
| [2387](#L2387) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2388](#L2388) | $response = wp\_remote\_post($href, $args); |
| [2389](#L2389) | if (!is\_wp\_error($response)) { |
| [2390](#L2390) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2391](#L2391) | if ($result && 1 === $result['result']) { |
| [2392](#L2392) | update\_option($optionName, 1); |
| [2393](#L2393) | $currentPlugin->setWasRegistered(); |
| [2394](#L2394) | } |
| [2395](#L2395) | } else { |
| [2396](#L2396) | $message = 'Registered fields: <br/><table>'; |
| [2397](#L2397) | foreach ($post as $key => $value) { |
| [2398](#L2398) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2399](#L2399) | continue; |
| [2400](#L2400) | } |
| [2401](#L2401) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2402](#L2402) | } |
| [2403](#L2403) | $message .= '</table>'; |
| [2404](#L2404) |  |
| [2405](#L2405) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2406](#L2406) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration', $message); |
| [2407](#L2407) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2408](#L2408) | } |
| [2409](#L2409) | } |
| [2410](#L2410) | } |
| [2411](#L2411) | } |
| [2412](#L2412) | } |
| [2413](#L2413) |  |
| [2414](#L2414) | public function showRegistration($atts = array()) { |
| [2415](#L2415) | global $cmindsPluginPackage; |
| [2416](#L2416) |  |
| [2417](#L2417) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2418](#L2418) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2419](#L2419) |  |
| [2420](#L2420) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-hidden'; |
| [2421](#L2421) | $registrationHide = filter\_input(INPUT\_GET, 'cminds\_registration\_hide'); |
| [2422](#L2422) | if ($registrationHide) { |
| [2423](#L2423) | update\_option($optionName, 1); |
| [2424](#L2424) | } |
| [2425](#L2425) | $registrationShow = filter\_input(INPUT\_GET, 'cminds\_registration\_show'); |
| [2426](#L2426) | if ($registrationShow) { |
| [2427](#L2427) | delete\_option($optionName); |
| [2428](#L2428) | } |
| [2429](#L2429) | $registrationHidden = get\_option($optionName); |
| [2430](#L2430) |  |
| [2431](#L2431) | $this->registerUser($atts); |
| [2432](#L2432) |  |
| [2433](#L2433) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2434](#L2434) | $isRegistered = $this->isRegistered(); |
| [2435](#L2435) |  |
| [2436](#L2436) | if ($isRegistered) : |
| [2437](#L2437) | return $this->showAds($atts); |
| [2438](#L2438) | else : |
| [2439](#L2439) | ob\_start(); |
| [2440](#L2440) | ?> |
| [2441](#L2441) | <style type="text/css"> |
| [2442](#L2442) |  |
| [2443](#L2443) | div.cminds\_registration\_wrapper { |
| [2444](#L2444) | display: inline-block; |
| [2445](#L2445) | padding: 1em; |
| [2446](#L2446) | background: #FFF; |
| [2447](#L2447) | margin: 1em 1em 0 0; |
| [2448](#L2448) | width: 1004px; |
| [2449](#L2449) | } |
| [2450](#L2450) |  |
| [2451](#L2451) | div.cminds\_registration\_wrapper \* { |
| [2452](#L2452) | vertical-align: top; |
| [2453](#L2453) | } |
| [2454](#L2454) |  |
| [2455](#L2455) | .cminds\_registration{ |
| [2456](#L2456) | display: inline-block; |
| [2457](#L2457) | margin: 1em; |
| [2458](#L2458) | padding: 1em 58px; |
| [2459](#L2459) | } |
| [2460](#L2460) |  |
| [2461](#L2461) | .cminds\_registration form{ |
| [2462](#L2462) | display: inline-block; |
| [2463](#L2463) | margin: 1em; |
| [2464](#L2464) | } |
| [2465](#L2465) | .cminds\_registration form .no-registration{ |
| [2466](#L2466) | margin: 5px 0 0; |
| [2467](#L2467) | text-align: center; |
| [2468](#L2468) | } |
| [2469](#L2469) |  |
| [2470](#L2470) | .cminds\_registration form input[type="submit"]{ |
| [2471](#L2471) | font-size: 16pt; |
| [2472](#L2472) | padding: 7px; |
| [2473](#L2473) | height: auto; |
| [2474](#L2474) | } |
| [2475](#L2475) |  |
| [2476](#L2476) | .cminds\_registration\_text{ |
| [2477](#L2477) | display: inline-block; |
| [2478](#L2478) | margin: 1em; |
| [2479](#L2479) | } |
| [2480](#L2480) |  |
| [2481](#L2481) | .cminds\_registration\_text > span{ |
| [2482](#L2482) | text-align: left; |
| [2483](#L2483) | display: block; |
| [2484](#L2484) | } |
| [2485](#L2485) |  |
| [2486](#L2486) | .cminds\_registration\_text .row\_1{ |
| [2487](#L2487) | font-size: 12pt; |
| [2488](#L2488) | padding-bottom: 5px; |
| [2489](#L2489) | } |
| [2490](#L2490) | .cminds\_registration\_text .row\_2{ |
| [2491](#L2491) | font-size: 10pt; |
| [2492](#L2492) | } |
| [2493](#L2493) |  |
| [2494](#L2494) | .cminds\_link{ |
| [2495](#L2495) | color: #555; |
| [2496](#L2496) | border-color: rgba(204,204,204,0.8); |
| [2497](#L2497) | background: #f7f7f7; |
| [2498](#L2498) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2499](#L2499) | box-shadow: 0 1px 0 #ccc; |
| [2500](#L2500) | display: inline-block; |
| [2501](#L2501) | text-decoration: none; |
| [2502](#L2502) | line-height: 26px; |
| [2503](#L2503) | height: 28px; |
| [2504](#L2504) | padding: 0 10px 1px; |
| [2505](#L2505) | cursor: pointer; |
| [2506](#L2506) | border-width: 1px; |
| [2507](#L2507) | border-style: solid; |
| [2508](#L2508) | -webkit-border-radius: 3px; |
| [2509](#L2509) | border-radius: 3px; |
| [2510](#L2510) | -webkit-box-sizing: border-box; |
| [2511](#L2511) | -moz-box-sizing: border-box; |
| [2512](#L2512) | box-sizing: border-box; |
| [2513](#L2513) | } |
| [2514](#L2514) |  |
| [2515](#L2515) | .cminds\_link:active { |
| [2516](#L2516) | background: #eee; |
| [2517](#L2517) | border-color: #999; |
| [2518](#L2518) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2519](#L2519) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2520](#L2520) | -webkit-transform: translateY(1px); |
| [2521](#L2521) | -ms-transform: translateY(1px); |
| [2522](#L2522) | transform: translateY(1px); |
| [2523](#L2523) | } |
| [2524](#L2524) |  |
| [2525](#L2525) | .cminds\_link:hover { |
| [2526](#L2526) | background: #eee; |
| [2527](#L2527) | border-color: #999; |
| [2528](#L2528) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2529](#L2529) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2530](#L2530) | -webkit-transform: translateY(1px); |
| [2531](#L2531) | -ms-transform: translateY(1px); |
| [2532](#L2532) | transform: translateY(1px); |
| [2533](#L2533) | } |
| [2534](#L2534) |  |
| [2535](#L2535) | .cminds\_link.blue{ |
| [2536](#L2536) | color: #fff; |
| [2537](#L2537) | border-color: #33ace7; |
| [2538](#L2538) | background: #66c1ed; |
| [2539](#L2539) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2540](#L2540) | box-shadow: 0 1px 0 #ccc; |
| [2541](#L2541) | display: inline-block; |
| [2542](#L2542) | text-decoration: none; |
| [2543](#L2543) | line-height: 26px; |
| [2544](#L2544) | height: 28px; |
| [2545](#L2545) | padding: 0 10px 1px; |
| [2546](#L2546) | cursor: pointer; |
| [2547](#L2547) | border-width: 1px; |
| [2548](#L2548) | border-style: solid; |
| [2549](#L2549) | -webkit-border-radius: 3px; |
| [2550](#L2550) | border-radius: 3px; |
| [2551](#L2551) | -webkit-box-sizing: border-box; |
| [2552](#L2552) | -moz-box-sizing: border-box; |
| [2553](#L2553) | box-sizing: border-box; |
| [2554](#L2554) |  |
| [2555](#L2555) | } |
| [2556](#L2556) |  |
| [2557](#L2557) | .cminds\_link.blue:active { |
| [2558](#L2558) | background: #0198e1; |
| [2559](#L2559) | border-color: #66c1ed; |
| [2560](#L2560) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2561](#L2561) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2562](#L2562) | -webkit-transform: translateY(1px); |
| [2563](#L2563) | -ms-transform: translateY(1px); |
| [2564](#L2564) | transform: translateY(1px); |
| [2565](#L2565) | } |
| [2566](#L2566) |  |
| [2567](#L2567) | .cminds\_link.blue:hover { |
| [2568](#L2568) | background: #005b87; |
| [2569](#L2569) | border-color: #0198e1; |
| [2570](#L2570) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2571](#L2571) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2572](#L2572) | -webkit-transform: translateY(1px); |
| [2573](#L2573) | -ms-transform: translateY(1px); |
| [2574](#L2574) | transform: translateY(1px); |
| [2575](#L2575) | } |
| [2576](#L2576) |  |
| [2577](#L2577) | .cminds\_link.orange{ |
| [2578](#L2578) | color: #fff; |
| [2579](#L2579) | border-color: #ffb752; |
| [2580](#L2580) | background: #ffb752; |
| [2581](#L2581) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2582](#L2582) | box-shadow: 0 1px 0 #ccc; |
| [2583](#L2583) | display: inline-block; |
| [2584](#L2584) | text-decoration: none; |
| [2585](#L2585) | line-height: 26px; |
| [2586](#L2586) | height: 28px; |
| [2587](#L2587) | padding: 0 10px 1px; |
| [2588](#L2588) | cursor: pointer; |
| [2589](#L2589) | border-width: 1px; |
| [2590](#L2590) | border-style: solid; |
| [2591](#L2591) | -webkit-border-radius: 3px; |
| [2592](#L2592) | border-radius: 3px; |
| [2593](#L2593) | -webkit-box-sizing: border-box; |
| [2594](#L2594) | -moz-box-sizing: border-box; |
| [2595](#L2595) | box-sizing: border-box; |
| [2596](#L2596) |  |
| [2597](#L2597) | } |
| [2598](#L2598) |  |
| [2599](#L2599) | .cminds\_link.orange:active { |
| [2600](#L2600) | background: #e5a449; |
| [2601](#L2601) | border-color: #ffc574; |
| [2602](#L2602) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2603](#L2603) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2604](#L2604) | -webkit-transform: translateY(1px); |
| [2605](#L2605) | -ms-transform: translateY(1px); |
| [2606](#L2606) | transform: translateY(1px); |
| [2607](#L2607) | } |
| [2608](#L2608) |  |
| [2609](#L2609) | .cminds\_link.orange:hover { |
| [2610](#L2610) | background: #e5a449; |
| [2611](#L2611) | border-color: #ffc574; |
| [2612](#L2612) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2613](#L2613) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2614](#L2614) | -webkit-transform: translateY(1px); |
| [2615](#L2615) | -ms-transform: translateY(1px); |
| [2616](#L2616) | transform: translateY(1px); |
| [2617](#L2617) | } |
| [2618](#L2618) |  |
| [2619](#L2619) | .clear, .clearfix{ |
| [2620](#L2620) | clear:both; |
| [2621](#L2621) | } |
| [2622](#L2622) | .cmclearfix{ |
| [2623](#L2623) | clear:both !important; |
| [2624](#L2624) | } |
| [2625](#L2625) |  |
| [2626](#L2626) | </style> |
| [2627](#L2627) |  |
| [2628](#L2628) | <?php if (!$registrationHidden) : ?> |
| [2629](#L2629) |  |
| [2630](#L2630) | <div class="cminds\_registration\_wrapper"> |
| [2631](#L2631) | <div class="cminds\_registration"> |
| [2632](#L2632) | <table><tr> |
| [2633](#L2633) | <td> |
| [2634](#L2634) | <form method="post" action=""> |
| [2635](#L2635) | <?php |
| [2636](#L2636) | wp\_nonce\_field('cminds\_register\_free', 'cminds\_nonce'); |
| [2637](#L2637) | echo $currentPlugin->getRegistrationFields(); |
| [2638](#L2638) | ?> |
| [2639](#L2639) | <input class="button button-primary" style="background-color:green;" type="submit" value="Register Your Copy" /> |
| [2640](#L2640) | <div class="no-registration"> |
| [2641](#L2641) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_hide' => 1), remove\_query\_arg('cminds\_registration\_show'))); ?>">I don't want to register now</a> |
| [2642](#L2642) | </div> |
| [2643](#L2643) | </form> |
| [2644](#L2644) | </td> |
| [2645](#L2645) | <td> |
| [2646](#L2646) | <div class="cminds\_registration\_text"> |
| [2647](#L2647) | <span class="row\_1"> |
| [2648](#L2648) | Once registered, you will receive updates and special offers. |
| [2649](#L2649) | </span> |
| [2650](#L2650) | <span class="row\_2"> |
| [2651](#L2651) | <p>We will only send once, your administrator's e-mail and site URL to CreativeMinds server.<br /> No additional information will be ever collected or sent.</p> |
| [2652](#L2652) | </span> |
| [2653](#L2653) | </td> |
| [2654](#L2654) | </tr> |
| [2655](#L2655) | </table> |
| [2656](#L2656) | </div> |
| [2657](#L2657) | </div> |
| [2658](#L2658) | </div> |
| [2659](#L2659) | <?php else : ?> |
| [2660](#L2660) | <div class="cminds\_registration\_wrapper"> |
| [2661](#L2661) | <div> |
| [2662](#L2662) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_show' => 1), remove\_query\_arg('cminds\_registration\_hide'))); ?>">Show registration box</a> |
| [2663](#L2663) | <a href="<?php echo $this->getStoreUrl(); ?>" class="cminds\_link orange" target="\_blank">View all CreativeMidns Plugins</a> |
| [2664](#L2664) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Bundle')); ?>" class="cminds\_link blue" target="\_blank">View Bundles</a> |
| [2665](#L2665) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Add-On')); ?>" class="cminds\_link blue" target="\_blank">View Add-Ons</a> |
| [2666](#L2666) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Service')); ?>" class="cminds\_link blue" target="\_blank">View Services</a> |
| [2667](#L2667) | </div> |
| [2668](#L2668) | </div> |
| [2669](#L2669) | <?php |
| [2670](#L2670) | endif; |
| [2671](#L2671) | echo $this->showUpgrade($atts); |
| [2672](#L2672) | ?> |
| [2673](#L2673) | <div class="clear clearfix cmclearfix"></div> |
| [2674](#L2674) | <?php |
| [2675](#L2675) | $content = ob\_get\_clean(); |
| [2676](#L2676) | return $content; |
| [2677](#L2677) | endif; |
| [2678](#L2678) | } |
| [2679](#L2679) |  |
| [2680](#L2680) | /\*\* |
| [2681](#L2681) | \* Displays the horizontal navigation bar |
| [2682](#L2682) | \* @global string $submenu |
| [2683](#L2683) | \* @global type $plugin\_page |
| [2684](#L2684) | \*/ |
| [2685](#L2685) | protected function showNav() { |
| [2686](#L2686) |  |
| [2687](#L2687) | global $self, $plugin\_page, $typenow, $submenu; |
| [2688](#L2688) |  |
| [2689](#L2689) | $submenus = array(); |
| [2690](#L2690) | $menuItem = $this->getOption('plugin-menu-item'); |
| [2691](#L2691) | $pluginAbbrev = $this->getOption('plugin-abbrev'); |
| [2692](#L2692) |  |
| [2693](#L2693) | ob\_start(); |
| [2694](#L2694) |  |
| [2695](#L2695) | if (isset($submenu[$menuItem])) { |
| [2696](#L2696) |  |
| [2697](#L2697) | $thisMenu = $submenu[$menuItem]; |
| [2698](#L2698) |  |
| [2699](#L2699) | foreach ($thisMenu as $sub\_item) { |
| [2700](#L2700) |  |
| [2701](#L2701) | $slug = $sub\_item[2]; |
| [2702](#L2702) |  |
| [2703](#L2703) | // Handle current for post\_type=post|page|foo pages, which won't match $self. |
| [2704](#L2704) | $self\_type = !empty($typenow) ? $self . '?post\_type=' . $typenow : 'nothing'; |
| [2705](#L2705) |  |
| [2706](#L2706) | $isCurrent = FALSE; |
| [2707](#L2707) |  |
| [2708](#L2708) | $subpageUrl = get\_admin\_url('', 'admin.php?page=' . $slug); |
| [2709](#L2709) |  |
| [2710](#L2710) | if ((!isset($plugin\_page) && $self == $slug) || ( isset($plugin\_page) && $plugin\_page == $slug && ( $menuItem == $self\_type || $menuItem == $self || file\_exists($menuItem) === false ))) { |
| [2711](#L2711) | $isCurrent = TRUE; |
| [2712](#L2712) | } |
| [2713](#L2713) |  |
| [2714](#L2714) | $url = ( strpos($slug, '.php') !== false || strpos($slug, 'http://') !== false || strpos($slug, 'https://') !== false ) ? $slug : $subpageUrl; |
| [2715](#L2715) |  |
| [2716](#L2716) | $isExternal = ( $slug === $url ) ? TRUE : FALSE; |
| [2717](#L2717) |  |
| [2718](#L2718) | /\* |
| [2719](#L2719) | \* Don't show on the Upgrade page itself |
| [2720](#L2720) | \*/ |
| [2721](#L2721) | if (!empty($\_GET['page']) && $\_GET['page'] == $pluginAbbrev . '\_pro' && $slug == $pluginAbbrev . '\_pro') { |
| [2722](#L2722) | continue; |
| [2723](#L2723) | } |
| [2724](#L2724) |  |
| [2725](#L2725) | $submenus[] = array( |
| [2726](#L2726) | 'link'     => $url, |
| [2727](#L2727) | 'title'    => $sub\_item[0], |
| [2728](#L2728) | 'current'  => $isCurrent, |
| [2729](#L2729) | 'external' => $isExternal |
| [2730](#L2730) | ); |
| [2731](#L2731) | } |
| [2732](#L2732) | ?> |
| [2733](#L2733) | <div id="cmhandfsl\_admin\_nav"> |
| [2734](#L2734) | <ul class="subsubsub"> |
| [2735](#L2735) | <?php foreach ($submenus as $menu): ?> |
| [2736](#L2736) |  |
| [2737](#L2737) | <li><a href="<?php echo esc\_attr($menu['link']); ?>" <?php echo ( $menu['current'] ) ? 'class="current"' : ''; ?> <?php |
| [2738](#L2738) | if ($menu['external']) { |
| [2739](#L2739) | echo 'target="\_blank"'; |
| [2740](#L2740) | } |
| [2741](#L2741) | ?>><?php echo esc\_html($menu['title']); ?> |
| [2742](#L2742) | </a></li> |
| [2743](#L2743) | <?php endforeach; ?> |
| [2744](#L2744) | </ul> |
| [2745](#L2745) | <br class="clear" /> |
| [2746](#L2746) | </div> |
| [2747](#L2747) | <?php |
| [2748](#L2748) | } |
| [2749](#L2749) |  |
| [2750](#L2750) | $nav = ob\_get\_contents(); |
| [2751](#L2751) | ob\_end\_clean(); |
| [2752](#L2752) | return $nav; |
| [2753](#L2753) | } |
| [2754](#L2754) |  |
| [2755](#L2755) | public function cminds\_compatibility\_check($plaintext = false) { |
| [2756](#L2756) | global $wp\_version; |
| [2757](#L2757) | $upload\_max = ini\_get('upload\_max\_filesize') ? ini\_get('upload\_max\_filesize') : 'N/A'; |
| [2758](#L2758) | $post\_max = ini\_get('post\_max\_size') ? ini\_get('post\_max\_size') : 'N/A'; |
| [2759](#L2759) | $memory\_limit = ini\_get('memory\_limit') ? ini\_get('memory\_limit') : 'N/A'; |
| [2760](#L2760) | $allow\_url\_fopen = ini\_get('allow\_url\_fopen') ? ini\_get('allow\_url\_fopen') : 'N/A'; |
| [2761](#L2761) | $max\_execution\_time = ini\_get('max\_execution\_time') !== FALSE ? ini\_get('max\_execution\_time') : 'N/A'; |
| [2762](#L2762) | $cURL = function\_exists('curl\_version') ? 'On' : 'Off'; |
| [2763](#L2763) | $mb\_support = function\_exists('mb\_strtolower') ? 'On' : 'Off'; |
| [2764](#L2764) | $intl\_support = extension\_loaded('intl') ? 'On' : 'Off'; |
| [2765](#L2765) | $iconv\_support = extension\_loaded('iconv') ? 'On' : 'Off'; |
| [2766](#L2766) |  |
| [2767](#L2767) | $permalink\_structure = get\_option('permalink\_structure'); |
| [2768](#L2768) | $permalinksurl = self\_admin\_url('options-permalink.php'); |
| [2769](#L2769) |  |
| [2770](#L2770) | $content = ''; |
| [2771](#L2771) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2772](#L2772) | ob\_start(); |
| [2773](#L2773) | if (!$plaintext): |
| [2774](#L2774) | ?> |
| [2775](#L2775) | <span class="description" style=""> |
| [2776](#L2776) | The information in this table is useful to check if the plugin might have some incompabilities with you server. |
| [2777](#L2777) | </span> |
| [2778](#L2778) | <table class="form-table server-info-table"> |
| [2779](#L2779) | <tr> |
| [2780](#L2780) | <td>Package Version</td> |
| [2781](#L2781) | <td><?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?></td> |
| [2782](#L2782) | <td><span>OK</span></td> |
| [2783](#L2783) | </tr> |
| [2784](#L2784) | <tr> |
| [2785](#L2785) | <td>WordPress Version</td> |
| [2786](#L2786) | <td><?php echo $wp\_version; ?></td> |
| [2787](#L2787) | <td><?php if (version\_compare($wp\_version, '3.3.0', '<')): ?><strong>The minimum supported version of WordPress is 3.3</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2788](#L2788) | </tr> |
| [2789](#L2789) | <tr> |
| [2790](#L2790) | <td>Permalinks enabled</td> |
| [2791](#L2791) | <td><?php echo ($permalink\_structure) ? 'Yes' : 'No' ?></td> |
| [2792](#L2792) | <td><?php if (empty($permalink\_structure)): ?><strong>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a></strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2793](#L2793) | </tr> |
| [2794](#L2794) | <tr> |
| [2795](#L2795) | <td>PHP Version</td> |
| [2796](#L2796) | <td><?php echo phpversion(); ?></td> |
| [2797](#L2797) | <td><?php if (version\_compare(phpversion(), '5.3.0', '<')): ?><strong>Recommended 5.3 or higher</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2798](#L2798) | </tr> |
| [2799](#L2799) | <tr> |
| [2800](#L2800) | <td>mbstring support</td> |
| [2801](#L2801) | <td><?php echo $mb\_support; ?></td> |
| [2802](#L2802) | <td><?php if ($mb\_support == 'Off'): ?> |
| [2803](#L2803) | <strong>"mbstring" library is required for plugin to work.</strong> |
| [2804](#L2804) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2805](#L2805) | </tr> |
| [2806](#L2806) | <tr> |
| [2807](#L2807) | <td>intl support</td> |
| [2808](#L2808) | <td><?php echo $intl\_support; ?></td> |
| [2809](#L2809) | <td><?php if ($intl\_support == 'Off'): ?> |
| [2810](#L2810) | <strong>"intl" library is required for proper sorting of accented (non-ASCII) characters.</strong> |
| [2811](#L2811) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2812](#L2812) | </tr> |
| [2813](#L2813) | <tr> |
| [2814](#L2814) | <td>iconv support</td> |
| [2815](#L2815) | <td><?php echo $iconv\_support; ?></td> |
| [2816](#L2816) | <td><?php if ($iconv\_support == 'Off'): ?> |
| [2817](#L2817) | <strong>"iconv" library is required for converting non-UTF-8 characters.</strong> |
| [2818](#L2818) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2819](#L2819) | </tr> |
| [2820](#L2820) | <tr> |
| [2821](#L2821) | <td>PHP Memory Limit</td> |
| [2822](#L2822) | <td><?php echo $memory\_limit; ?></td> |
| [2823](#L2823) | <td><?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2824](#L2824) | <strong>This value can be too low for a site with big glossary.</strong> |
| [2825](#L2825) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2826](#L2826) | </tr> |
| [2827](#L2827) | <tr> |
| [2828](#L2828) | <td>PHP Max Upload Size</td> |
| [2829](#L2829) | <td><?php echo $upload\_max; ?></td> |
| [2830](#L2830) | <td><?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2831](#L2831) | <strong>This value can be too low to import large files.</strong> |
| [2832](#L2832) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2833](#L2833) | </tr> |
| [2834](#L2834) | <tr> |
| [2835](#L2835) | <td>PHP Max Post Size</td> |
| [2836](#L2836) | <td><?php echo $post\_max; ?></td> |
| [2837](#L2837) | <td><?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2838](#L2838) | <strong>This value can be too low to import large files.</strong> |
| [2839](#L2839) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2840](#L2840) | </tr> |
| [2841](#L2841) | <tr> |
| [2842](#L2842) | <td>PHP Max Execution Time </td> |
| [2843](#L2843) | <td><?php echo $max\_execution\_time; ?></td> |
| [2844](#L2844) | <td><?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2845](#L2845) | <strong>This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit.</strong> |
| [2846](#L2846) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2847](#L2847) | </tr> |
| [2848](#L2848) | <tr> |
| [2849](#L2849) | <td>PHP cURL</td> |
| [2850](#L2850) | <td><?php echo $cURL; ?></td> |
| [2851](#L2851) | <td><?php if ($cURL == 'Off'): ?> |
| [2852](#L2852) | <strong>cURL library is required to check if remote audio file exists.</strong> |
| [2853](#L2853) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2854](#L2854) | </tr> |
| [2855](#L2855) | <tr> |
| [2856](#L2856) | <td>PHP allow\_url\_fopen</td> |
| [2857](#L2857) | <td><?php echo $allow\_url\_fopen; ?></td> |
| [2858](#L2858) | <td><?php if ($allow\_url\_fopen == '0'): ?> |
| [2859](#L2859) | <strong>allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API.</strong> |
| [2860](#L2860) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2861](#L2861) | </tr> |
| [2862](#L2862) | </table> |
| [2863](#L2863) | <?php |
| [2864](#L2864) | else: |
| [2865](#L2865) | ?> |
| [2866](#L2866) | Package Version         <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?>    OK |
| [2867](#L2867) |  |
| [2868](#L2868) | WordPress Version               <?php echo $wp\_version; ?> |
| [2869](#L2869) | <?php if (version\_compare($wp\_version, '3.3.0', '<')): ?>The minimum supported version of WordPress is 3.3<?php else: ?>OK<?php endif; ?> |
| [2870](#L2870) |  |
| [2871](#L2871) | Permalinks enabled              <?php echo ($permalink\_structure) ? 'Yes' : 'No' ?> |
| [2872](#L2872) | <?php if (empty($permalink\_structure)): ?>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a><?php else: ?>OK<?php endif; ?> |
| [2873](#L2873) |  |
| [2874](#L2874) | PHP Version             <?php echo phpversion(); ?> |
| [2875](#L2875) | <?php if (version\_compare(phpversion(), '5.3.0', '<')): ?>Recommended 5.3 or higher<?php else: ?>OK<?php endif; ?> |
| [2876](#L2876) |  |
| [2877](#L2877) | mbstring support                <?php echo $mb\_support; ?> |
| [2878](#L2878) | <?php if ($mb\_support == 'Off'): ?> |
| [2879](#L2879) | "mbstring" library is required for plugin to work. |
| [2880](#L2880) | <?php else: ?>OK<?php endif; ?> |
| [2881](#L2881) |  |
| [2882](#L2882) | intl support            <?php echo $intl\_support; ?> |
| [2883](#L2883) | <?php if ($intl\_support == 'Off'): ?> |
| [2884](#L2884) | "intl" library is required for proper sorting of accented characters on Glossary Index page. |
| [2885](#L2885) | <?php else: ?>OK<?php endif; ?> |
| [2886](#L2886) |  |
| [2887](#L2887) | PHP Memory Limit                <?php echo $memory\_limit; ?> |
| [2888](#L2888) | <?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2889](#L2889) | This value can be too low for a site with big glossary. |
| [2890](#L2890) | <?php else: ?>OK<?php endif; ?> |
| [2891](#L2891) |  |
| [2892](#L2892) | PHP Max Upload Size             <?php echo $upload\_max; ?> |
| [2893](#L2893) | <?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2894](#L2894) | This value can be too low to import large files. |
| [2895](#L2895) | <?php else: ?>OK<?php endif; ?> |
| [2896](#L2896) |  |
| [2897](#L2897) | PHP Max Post Size               <?php echo $post\_max; ?> |
| [2898](#L2898) | <?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2899](#L2899) | This value can be too low to import large files. |
| [2900](#L2900) | <?php else: ?>OK<?php endif; ?> |
| [2901](#L2901) |  |
| [2902](#L2902) | PHP Max Execution Time          <?php echo $max\_execution\_time; ?> |
| [2903](#L2903) | <?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2904](#L2904) | This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit. |
| [2905](#L2905) | <?php else: ?>OK<?php endif; ?> |
| [2906](#L2906) |  |
| [2907](#L2907) | PHP cURL                <?php echo $cURL; ?> |
| [2908](#L2908) | <?php if ($cURL == 'Off'): ?> |
| [2909](#L2909) | cURL library is required to check if remote audio file exists. |
| [2910](#L2910) | <?php else: ?>OK<?php endif; ?> |
| [2911](#L2911) |  |
| [2912](#L2912) | PHP allow\_url\_fopen             <?php echo $allow\_url\_fopen; ?> |
| [2913](#L2913) | <?php if ($allow\_url\_fopen == '0'): ?> |
| [2914](#L2914) | allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API. |
| [2915](#L2915) | <?php else: ?>OK<?php endif; ?> |
| [2916](#L2916) |  |
| [2917](#L2917) | <?php |
| [2918](#L2918) | endif; |
| [2919](#L2919) | $content .= ob\_get\_clean(); |
| [2920](#L2920) | return $content; |
| [2921](#L2921) | } |
| [2922](#L2922) |  |
| [2923](#L2923) | /\*\* |
| [2924](#L2924) | \* System info |
| [2925](#L2925) | \* |
| [2926](#L2926) | \* Shows the system info panel which contains version data and debug info. |
| [2927](#L2927) | \* The data for the system info is generated by the Browser class. |
| [2928](#L2928) | \* |
| [2929](#L2929) | \* @since 1.4 |
| [2930](#L2930) | \* @global $wpdb |
| [2931](#L2931) | \* @global object $wpdb Used to query the database using the WordPress |
| [2932](#L2932) | \*   Database API |
| [2933](#L2933) | \* @return void |
| [2934](#L2934) | \*/ |
| [2935](#L2935) | public function cminds\_system\_info() { |
| [2936](#L2936) | ?> |
| [2937](#L2937) | <div class=""> |
| [2938](#L2938) | <h2><?php \_\_('System Information', 'cminds-package'); ?></h2><br/> |
| [2939](#L2939) | <form action="<?php echo esc\_url(admin\_url('admin.php?page=cmtt\_licensing')); ?>" method="post" dir="ltr"> |
| [2940](#L2940) | <p class="submit"> |
| [2941](#L2941) | <?php wp\_nonce\_field( 'system\_information\_download\_form\_nonce', 'system\_information\_download\_form\_nonce' ); ?> |
| [2942](#L2942) | <input type="hidden" name="cminds\_action" value="download\_sysinfo" /> |
| [2943](#L2943) | <?php submit\_button('Download system information file', 'primary', 'cminds-download-sysinfo', false); ?> |
| [2944](#L2944) | </p> |
| [2945](#L2945) | <textarea class="cminds\_system\_info\_area" readonly="readonly" onclick="this.focus( ); |
| [2946](#L2946) | this.select( )" id="system-info-textarea" name="cminds-sysinfo" title="<?php \_e('To copy the system info, click below then press Ctrl + C (PC) or Cmd + C (Mac).', 'edd'); ?>"> |
| [2947](#L2947) | <?php $this->cminds\_system\_info\_content(); ?> |
| [2948](#L2948) | </textarea> |
| [2949](#L2949) | </form> |
| [2950](#L2950) | </div> |
| [2951](#L2951) | <?php |
| [2952](#L2952) | } |
| [2953](#L2953) |  |
| [2954](#L2954) | /\*\* |
| [2955](#L2955) | \* Generates the System Info Download File |
| [2956](#L2956) | \* |
| [2957](#L2957) | \* @since 1.4 |
| [2958](#L2958) | \* @return void |
| [2959](#L2959) | \*/ |
| [2960](#L2960) | public function cminds\_system\_info\_content() { |
| [2961](#L2961) | global $wpdb; |
| [2962](#L2962) |  |
| [2963](#L2963) | if (get\_bloginfo('version') < '3.4') { |
| [2964](#L2964) | $theme\_data = get\_theme\_data(get\_stylesheet\_directory() . '/style.css'); |
| [2965](#L2965) | $theme = $theme\_data['Name'] . ' ' . $theme\_data['Version']; |
| [2966](#L2966) | } else { |
| [2967](#L2967) | $theme\_data = wp\_get\_theme(); |
| [2968](#L2968) | $theme = $theme\_data->Name . ' ' . $theme\_data->Version; |
| [2969](#L2969) | } |
| [2970](#L2970) |  |
| [2971](#L2971) | // Try to identifty the hosting provider |
| [2972](#L2972) | $host = false; |
| [2973](#L2973) | if (defined('WPE\_APIKEY')) { |
| [2974](#L2974) | $host = 'WP Engine'; |
| [2975](#L2975) | } elseif (defined('PAGELYBIN')) { |
| [2976](#L2976) | $host = 'Pagely'; |
| [2977](#L2977) | } |
| [2978](#L2978) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2979](#L2979) | ?> |
| [2980](#L2980) | ### Begin System Info ### |
| [2981](#L2981) |  |
| [2982](#L2982) | ## Please include this information when posting support requests ## |
| [2983](#L2983) |  |
| [2984](#L2984) | <?php do\_action('cminds\_system\_info\_before'); ?> |
| [2985](#L2985) |  |
| [2986](#L2986) | Package Version:                <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?> |
| [2987](#L2987) |  |
| [2988](#L2988) | Multisite:                <?php echo is\_multisite() ? 'Yes' . "\n" : 'No' . "\n" ?> |
| [2989](#L2989) |  |
| [2990](#L2990) | SITE\_URL:                 <?php echo site\_url() . "\n"; ?> |
| [2991](#L2991) | HOME\_URL:                 <?php echo home\_url() . "\n"; ?> |
| [2992](#L2992) |  |
| [2993](#L2993) | WordPress Version:        <?php echo get\_bloginfo('version') . "\n"; ?> |
| [2994](#L2994) | Permalink Structure:      <?php echo get\_option('permalink\_structure') . "\n"; ?> |
| [2995](#L2995) | Active Theme:             <?php echo $theme . "\n"; ?> |
| [2996](#L2996) | <?php if ($host) : ?> |
| [2997](#L2997) | Host:                     <?php echo $host . "\n"; ?> |
| [2998](#L2998) | <?php endif; ?> |
| [2999](#L2999) |  |
| [3000](#L3000) | Registered Post Stati:    <?php echo implode(', ', get\_post\_stati()) . "\n\n"; ?> |
| [3001](#L3001) |  |
| [3002](#L3002) | PHP Version:              <?php echo PHP\_VERSION . "\n"; ?> |
| [3003](#L3003) | MySQL Version:            <?php echo (function\_exists('mysqli\_get\_server\_info')) ? mysqli\_get\_server\_info($wpdb->dbh) . "\n" : 'N/A' . "\n"; ?> |
| [3004](#L3004) | Web Server Info:          <?php echo $\_SERVER['SERVER\_SOFTWARE'] . "\n"; ?> |
| [3005](#L3005) |  |
| [3006](#L3006) | WordPress Memory Limit:   <?php echo WP\_MEMORY\_LIMIT ?><?php echo "\n"; ?> |
| [3007](#L3007) | PHP Memory Limit:         <?php echo ini\_get('memory\_limit') . "\n"; ?> |
| [3008](#L3008) | PHP Upload Max Size:      <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3009](#L3009) | PHP Post Max Size:        <?php echo ini\_get('post\_max\_size') . "\n"; ?> |
| [3010](#L3010) | PHP Upload Max Filesize:  <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3011](#L3011) | PHP Time Limit:           <?php echo ini\_get('max\_execution\_time') . "\n"; ?> |
| [3012](#L3012) | PHP Max Input Vars:       <?php echo ini\_get('max\_input\_vars') . "\n"; ?> |
| [3013](#L3013) | PHP Arg Separator:        <?php echo ini\_get('arg\_separator.output') . "\n"; ?> |
| [3014](#L3014) | PHP Allow URL File Open:  <?php echo ini\_get('allow\_url\_fopen') ? "Yes" : "No\n"; ?> |
| [3015](#L3015) |  |
| [3016](#L3016) | WP\_DEBUG:                 <?php echo defined('WP\_DEBUG') ? WP\_DEBUG ? 'Enabled' . "\n" : 'Disabled' . "\n" : 'Not set' . "\n" ?> |
| [3017](#L3017) |  |
| [3018](#L3018) | WP Table Prefix:          <?php |
| [3019](#L3019) | echo "Length: " . strlen($wpdb->prefix); |
| [3020](#L3020) | echo " Status:"; |
| [3021](#L3021) | if (strlen($wpdb->prefix) > 16) { |
| [3022](#L3022) | echo " ERROR: Too Long"; |
| [3023](#L3023) | } else { |
| [3024](#L3024) | echo " Acceptable"; |
| [3025](#L3025) | } echo "\n"; |
| [3026](#L3026) | ?> |
| [3027](#L3027) |  |
| [3028](#L3028) | Show On Front:            <?php echo get\_option('show\_on\_front') . "\n" ?> |
| [3029](#L3029) | Page On Front:            <?php |
| [3030](#L3030) | $id = get\_option('page\_on\_front'); |
| [3031](#L3031) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3032](#L3032) | ?> |
| [3033](#L3033) | Page For Posts:           <?php |
| [3034](#L3034) | $id = get\_option('page\_for\_posts'); |
| [3035](#L3035) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3036](#L3036) | ?> |
| [3037](#L3037) |  |
| [3038](#L3038) | <?php |
| [3039](#L3039) | $request['cmd'] = '\_notify-validate'; |
| [3040](#L3040) |  |
| [3041](#L3041) | $params = array( |
| [3042](#L3042) | 'sslverify'  => false, |
| [3043](#L3043) | 'timeout'    => 60, |
| [3044](#L3044) | 'user-agent' => 'Cminds/' . $this->getOption('plugin-version'), |
| [3045](#L3045) | 'body'       => $request |
| [3046](#L3046) | ); |
| [3047](#L3047) |  |
| [3048](#L3048) | $response = wp\_remote\_post('https://www.paypal.com/cgi-bin/webscr', $params); |
| [3049](#L3049) |  |
| [3050](#L3050) | if (!is\_wp\_error($response) && $response['response']['code'] >= 200 && $response['response']['code'] < 300) { |
| [3051](#L3051) | $WP\_REMOTE\_POST = 'wp\_remote\_post() works' . "\n"; |
| [3052](#L3052) | } else { |
| [3053](#L3053) | $WP\_REMOTE\_POST = 'wp\_remote\_post() does not work' . "\n"; |
| [3054](#L3054) | } |
| [3055](#L3055) | ?> |
| [3056](#L3056) | WP Remote Post:           <?php echo $WP\_REMOTE\_POST; ?> |
| [3057](#L3057) |  |
| [3058](#L3058) | Session:                  <?php echo isset($\_SESSION) ? 'Enabled' : 'Disabled'; ?><?php echo "\n"; ?> |
| [3059](#L3059) | Session Name:             <?php echo esc\_html(ini\_get('session.name')); ?><?php echo "\n"; ?> |
| [3060](#L3060) | Cookie Path:              <?php echo esc\_html(ini\_get('session.cookie\_path')); ?><?php echo "\n"; ?> |
| [3061](#L3061) | Save Path:                <?php echo esc\_html(ini\_get('session.save\_path')); ?><?php echo "\n"; ?> |
| [3062](#L3062) | Use Cookies:              <?php echo ini\_get('session.use\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3063](#L3063) | Use Only Cookies:         <?php echo ini\_get('session.use\_only\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3064](#L3064) |  |
| [3065](#L3065) | DISPLAY ERRORS:           <?php echo ( ini\_get('display\_errors') ) ? 'On (' . ini\_get('display\_errors') . ')' : 'N/A'; ?><?php echo "\n"; ?> |
| [3066](#L3066) | FSOCKOPEN:                <?php echo ( function\_exists('fsockopen') ) ? 'Your server supports fsockopen.' : 'Your server does not support fsockopen.'; ?><?php echo "\n"; ?> |
| [3067](#L3067) | cURL:                     <?php echo ( function\_exists('curl\_init') ) ? 'Your server supports cURL.' : 'Your server does not support cURL.'; ?><?php echo "\n"; ?> |
| [3068](#L3068) | SOAP Client:              <?php echo ( class\_exists('SoapClient') ) ? 'Your server has the SOAP Client enabled.' : 'Your server does not have the SOAP Client enabled.'; ?><?php echo "\n"; ?> |
| [3069](#L3069) | SUHOSIN:                  <?php echo ( extension\_loaded('suhosin') ) ? 'Your server has SUHOSIN installed.' : 'Your server does not have SUHOSIN installed.'; ?><?php echo "\n"; ?> |
| [3070](#L3070) |  |
| [3071](#L3071) | ##COMPATIBILITY |
| [3072](#L3072) |  |
| [3073](#L3073) | <?php echo $this->cminds\_compatibility\_check(true); ?> |
| [3074](#L3074) |  |
| [3075](#L3075) | ##ACTIVE PLUGINS: |
| [3076](#L3076) |  |
| [3077](#L3077) | <?php |
| [3078](#L3078) | $plugins = get\_plugins(); |
| [3079](#L3079) | $active\_plugins = get\_option('active\_plugins', array()); |
| [3080](#L3080) |  |
| [3081](#L3081) | foreach ($plugins as $plugin\_path => $plugin) { |
| [3082](#L3082) | // If the plugin isn't active, don't show it. |
| [3083](#L3083) | if (!in\_array($plugin\_path, $active\_plugins)) |
| [3084](#L3084) | continue; |
| [3085](#L3085) |  |
| [3086](#L3086) | echo $plugin['Name'] . ': ' . $plugin['Version'] . "\n"; |
| [3087](#L3087) | } |
| [3088](#L3088) |  |
| [3089](#L3089) | if (is\_multisite()) : |
| [3090](#L3090) | ?> |
| [3091](#L3091) |  |
| [3092](#L3092) | NETWORK ACTIVE PLUGINS: |
| [3093](#L3093) |  |
| [3094](#L3094) | <?php |
| [3095](#L3095) | $plugins = wp\_get\_active\_network\_plugins(); |
| [3096](#L3096) | $active\_plugins = get\_site\_option('active\_sitewide\_plugins', array()); |
| [3097](#L3097) |  |
| [3098](#L3098) | foreach ($plugins as $plugin\_path) { |
| [3099](#L3099) | $plugin\_base = plugin\_basename($plugin\_path); |
| [3100](#L3100) |  |
| [3101](#L3101) | // If the plugin isn't active, don't show it. |
| [3102](#L3102) | if (!array\_key\_exists($plugin\_base, $active\_plugins)) |
| [3103](#L3103) | continue; |
| [3104](#L3104) |  |
| [3105](#L3105) | $plugin = get\_plugin\_data($plugin\_path); |
| [3106](#L3106) |  |
| [3107](#L3107) | echo $plugin['Name'] . ' :' . $plugin['Version'] . "\n"; |
| [3108](#L3108) | } |
| [3109](#L3109) |  |
| [3110](#L3110) | endif; |
| [3111](#L3111) | do\_action('cminds\_system\_info\_after'); |
| [3112](#L3112) | ?> |
| [3113](#L3113) | ### End System Info ### |
| [3114](#L3114) | <?php |
| [3115](#L3115) | } |
| [3116](#L3116) |  |
| [3117](#L3117) | /\*\* |
| [3118](#L3118) | \* Generates the System Info Download File |
| [3119](#L3119) | \* |
| [3120](#L3120) | \* @since 1.4 |
| [3121](#L3121) | \* @return void |
| [3122](#L3122) | \*/ |
| [3123](#L3123) | public function cminds\_generate\_sysinfo\_download() { |
| [3124](#L3124) | if ( wp\_verify\_nonce( $\_POST['system\_information\_download\_form\_nonce'], 'system\_information\_download\_form\_nonce' ) ) { |
| [3125](#L3125) | nocache\_headers(); |
| [3126](#L3126) |  |
| [3127](#L3127) | header("Content-type: text/plain"); |
| [3128](#L3128) | header('Content-Disposition: attachment; filename="cminds-system-info.txt"'); |
| [3129](#L3129) |  |
| [3130](#L3130) | echo wp\_strip\_all\_tags($\_POST['cminds-sysinfo']); |
| [3131](#L3131) | die(); |
| [3132](#L3132) | } |
| [3133](#L3133) | } |
| [3134](#L3134) |  |
| [3135](#L3135) | public function getOption($key, $default = NULL) { |
| [3136](#L3136) | $value = isset($this->config[$key]) ? $this->config[$key] : $default; |
| [3137](#L3137) | return $value; |
| [3138](#L3138) | } |
| [3139](#L3139) |  |
| [3140](#L3140) | public function getPageUrl($pageBase = 'licensing') { |
| [3141](#L3141) | $pluginMenuPageBase = $this->pluginMenu; |
| [3142](#L3142) | $abbrev = $this->getOption('plugin-is-addon') ? $this->getOption('plugin-parent-abbrev') : $this->getOption('plugin-abbrev'); |
| [3143](#L3143) | if (empty($abbrev)) { |
| [3144](#L3144) | /\* |
| [3145](#L3145) | \* Abbrev not set for the plugin try to guess |
| [3146](#L3146) | \*/ |
| [3147](#L3147) | $abbrev = substr($this->getOption('plugin-abbrev'), 0, -1); |
| [3148](#L3148) | } |
| [3149](#L3149) | $page = $abbrev . '\_' . $pageBase; |
| [3150](#L3150) | if (FALSE === strpos($pluginMenuPageBase, '.php')) { |
| [3151](#L3151) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url('admin.php'))); |
| [3152](#L3152) | } else { |
| [3153](#L3153) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url($pluginMenuPageBase))); |
| [3154](#L3154) | } |
| [3155](#L3155) | return $pageUrl; |
| [3156](#L3156) | } |
| [3157](#L3157) |  |
| [3158](#L3158) | /\*\* |
| [3159](#L3159) | \* Converts the Apache memory values to number of bytes ini\_get('upload\_max\_filesize') or ini\_get('post\_max\_size') |
| [3160](#L3160) | \* @param type $str |
| [3161](#L3161) | \* @return type |
| [3162](#L3162) | \*/ |
| [3163](#L3163) | public static function cminds\_units2bytes($str) { |
| [3164](#L3164) | $units = array('B', 'K', 'M', 'G', 'T'); |
| [3165](#L3165) | $unit = preg\_replace('/[0-9]/', '', $str); |
| [3166](#L3166) | $unitFactor = array\_search(strtoupper($unit), $units); |
| [3167](#L3167) | if ($unitFactor !== false) { |
| [3168](#L3168) | return preg\_replace('/[a-z]/i', '', $str) \* pow(2, 10 \* $unitFactor); |
| [3169](#L3169) | } |
| [3170](#L3170) | } |
| [3171](#L3171) |  |
| [3172](#L3172) | public static function cminds\_set\_content\_type() { |
| [3173](#L3173) | return "text/html"; |
| [3174](#L3174) | } |
| [3175](#L3175) |  |
| [3176](#L3176) | } |
| [3177](#L3177) |  |
| [3178](#L3178) | } |
| [3179](#L3179) |  |
| [3180](#L3180) | /\* |
| [3181](#L3181) | \* Load the config |
| [3182](#L3182) | \*/ |
| [3183](#L3183) | global $cmindsPluginPackage; |
| [3184](#L3184) | include('cminds-plugin-config.php'); |
| [3185](#L3185) | $cmindsPluginPackage[$cminds\_plugin\_config['plugin-abbrev']] = new CmindsFreePackage($cminds\_plugin\_config); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/cm-business-directory/trunk/package/cminds-free.php?format=txt)
* [Original Format](/export/3222474/cm-business-directory/trunk/package/cminds-free.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_81f18823_20250114_205638.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3192416)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3192415 "Changeset 3192415")
* [Next Changeset](/changeset/3192417 "Changeset 3192417") →

---

# Changeset 3192416

Timestamp:
11/19/2024 02:45:02 PM
([8 weeks](/timeline?from=2024-11-19T14%3A45%3A02Z&precision=second "See timeline at 11/19/2024 02:45:02 PM") ago)

Author:
CreativeMindsSolutions
Message:

release a security fix

Location:
[cm-business-directory/trunk](/browser/cm-business-directory/trunk?rev=3192416)
Files:

194 added

* [backend](/browser/cm-business-directory/trunk/backend?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets](/browser/cm-business-directory/trunk/backend/assets?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css](/browser/cm-business-directory/trunk/backend/assets/css?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/cmbd\_admin.css](/browser/cm-business-directory/trunk/backend/assets/css/cmbd_admin.css?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images](/browser/cm-business-directory/trunk/backend/assets/css/images?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/help.png](/browser/cm-business-directory/trunk/backend/assets/css/images/help.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/help\_hover.png](/browser/cm-business-directory/trunk/backend/assets/css/images/help_hover.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_flat\_0\_aaaaaa\_40x100.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-bg_flat_0_aaaaaa_40x100.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_flat\_75\_ffffff\_40x100.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-bg_flat_75_ffffff_40x100.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_glass\_55\_fbf9ee\_1x400.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-bg_glass_55_fbf9ee_1x400.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_glass\_65\_ffffff\_1x400.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-bg_glass_65_ffffff_1x400.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_glass\_75\_dadada\_1x400.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-bg_glass_75_dadada_1x400.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_glass\_75\_e6e6e6\_1x400.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-bg_glass_75_e6e6e6_1x400.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_glass\_95\_fef1ec\_1x400.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-bg_glass_95_fef1ec_1x400.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_highlight-soft\_75\_cccccc\_1x100.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-icons\_222222\_256x240.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-icons_222222_256x240.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-icons\_2e83ff\_256x240.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-icons_2e83ff_256x240.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-icons\_454545\_256x240.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-icons_454545_256x240.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-icons\_888888\_256x240.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-icons_888888_256x240.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-icons\_cd0a0a\_256x240.png](/browser/cm-business-directory/trunk/backend/assets/css/images/ui-icons_cd0a0a_256x240.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/css/jquery-ui-tabs.css](/browser/cm-business-directory/trunk/backend/assets/css/jquery-ui-tabs.css?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images](/browser/cm-business-directory/trunk/backend/assets/images?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/Screenshot\_1.png](/browser/cm-business-directory/trunk/backend/assets/images/Screenshot_1.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/Screenshot\_2.png](/browser/cm-business-directory/trunk/backend/assets/images/Screenshot_2.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/Screenshot\_3.png](/browser/cm-business-directory/trunk/backend/assets/images/Screenshot_3.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/Screenshot\_4.png](/browser/cm-business-directory/trunk/backend/assets/images/Screenshot_4.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/Screenshot\_5.png](/browser/cm-business-directory/trunk/backend/assets/images/Screenshot_5.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/Screenshot\_6.png](/browser/cm-business-directory/trunk/backend/assets/images/Screenshot_6.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/Screenshot\_7.png](/browser/cm-business-directory/trunk/backend/assets/images/Screenshot_7.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/Screenshot\_8.png](/browser/cm-business-directory/trunk/backend/assets/images/Screenshot_8.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/Screenshot\_9.png](/browser/cm-business-directory/trunk/backend/assets/images/Screenshot_9.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/cm-business-directory-import-and-export.png](/browser/cm-business-directory/trunk/backend/assets/images/cm-business-directory-import-and-export.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/cm-business-directory-statistics-1.png](/browser/cm-business-directory/trunk/backend/assets/images/cm-business-directory-statistics-1.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/cm-business-directory-statistics-2.png](/browser/cm-business-directory/trunk/backend/assets/images/cm-business-directory-statistics-2.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/images/cm-business-directory-tags.png](/browser/cm-business-directory/trunk/backend/assets/images/cm-business-directory-tags.png?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/js](/browser/cm-business-directory/trunk/backend/assets/js?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/js/cmbd-functions.js](/browser/cm-business-directory/trunk/backend/assets/js/cmbd-functions.js?rev=3192416 "Show entry in browser")
  (added)
* [backend/assets/js/cmbd\_admin\_scripts.js](/browser/cm-business-directory/trunk/backend/assets/js/cmbd_admin_scripts.js?rev=3192416 "Show entry in browser")
  (added)
* [backend/classes](/browser/cm-business-directory/trunk/backend/classes?rev=3192416 "Show entry in browser")
  (added)
* [backend/classes/Settings.php](/browser/cm-business-directory/trunk/backend/classes/Settings.php?rev=3192416 "Show entry in browser")
  (added)
* [backend/classes/SettingsView.php](/browser/cm-business-directory/trunk/backend/classes/SettingsView.php?rev=3192416 "Show entry in browser")
  (added)
* [backend/classes/SettingsViewAbstract.php](/browser/cm-business-directory/trunk/backend/classes/SettingsViewAbstract.php?rev=3192416 "Show entry in browser")
  (added)
* [backend/cm-business-directory-backend.php](/browser/cm-business-directory/trunk/backend/cm-business-directory-backend.php?rev=3192416 "Show entry in browser")
  (added)
* [backend/views](/browser/cm-business-directory/trunk/backend/views?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/about.phtml](/browser/cm-business-directory/trunk/backend/views/about.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/import\_export.phtml](/browser/cm-business-directory/trunk/backend/views/import_export.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/metabox.phtml](/browser/cm-business-directory/trunk/backend/views/metabox.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/nav.phtml](/browser/cm-business-directory/trunk/backend/views/nav.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/pro.phtml](/browser/cm-business-directory/trunk/backend/views/pro.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings](/browser/cm-business-directory/trunk/backend/views/settings?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings.phtml](/browser/cm-business-directory/trunk/backend/views/settings.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/advertisement.phtml](/browser/cm-business-directory/trunk/backend/views/settings/advertisement.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/api.phtml](/browser/cm-business-directory/trunk/backend/views/settings/api.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/appearance.phtml](/browser/cm-business-directory/trunk/backend/views/settings/appearance.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/business.phtml](/browser/cm-business-directory/trunk/backend/views/settings/business.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/categorylist.phtml](/browser/cm-business-directory/trunk/backend/views/settings/categorylist.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/customcss.phtml](/browser/cm-business-directory/trunk/backend/views/settings/customcss.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/general.phtml](/browser/cm-business-directory/trunk/backend/views/settings/general.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/index.phtml](/browser/cm-business-directory/trunk/backend/views/settings/index.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/installation.phtml](/browser/cm-business-directory/trunk/backend/views/settings/installation.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/labels.phtml](/browser/cm-business-directory/trunk/backend/views/settings/labels.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/rating.phtml](/browser/cm-business-directory/trunk/backend/views/settings/rating.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/shortcodes.phtml](/browser/cm-business-directory/trunk/backend/views/settings/shortcodes.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/statistics.phtml](/browser/cm-business-directory/trunk/backend/views/settings/statistics.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/taxonomies.phtml](/browser/cm-business-directory/trunk/backend/views/settings/taxonomies.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/top.phtml](/browser/cm-business-directory/trunk/backend/views/settings/top.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/settings/upgrade.phtml](/browser/cm-business-directory/trunk/backend/views/settings/upgrade.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/statistics.phtml](/browser/cm-business-directory/trunk/backend/views/statistics.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/tags.phtml](/browser/cm-business-directory/trunk/backend/views/tags.phtml?rev=3192416 "Show entry in browser")
  (added)
* [backend/views/template.phtml](/browser/cm-business-directory/trunk/backend/views/template.phtml?rev=3192416 "Show entry in browser")
  (added)
* [cm-business-directory.php](/browser/cm-business-directory/trunk/cm-business-directory.php?rev=3192416 "Show entry in browser")
  (added)
* [frontend](/browser/cm-business-directory/trunk/frontend?rev=3192416 "Show entry in browser")
  (added)
* [frontend/assets](/browser/cm-business-directory/trunk/frontend/assets?rev=3192416 "Show entry in browser")
  (added)
* [frontend/assets/css](/browser/cm-business-directory/trunk/frontend/assets/css?rev=3192416 "Show entry in browser")
  (added)
* [frontend/assets/css/cmbd-style.css](/browser/cm-business-directory/trunk/frontend/assets/css/cmbd-style.css?rev=3192416 "Show entry in browser")
  (added)
* [frontend/assets/img](/browser/cm-business-directory/trunk/frontend/assets/img?rev=3192416 "Show entry in browser")
  (added)
* [frontend/assets/img/black.jpg](/browser/cm-business-directory/trunk/frontend/assets/img/black.jpg?rev=3192416 "Show entry in browser")
  (added)
* [frontend/assets/img/black.png](/browser/cm-business-directory/trunk/frontend/assets/img/black.png?rev=3192416 "Show entry in browser")
  (added)
* [frontend/assets/img/blank\_business.png](/browser/cm-business-directory/trunk/frontend/assets/img/blank_business.png?rev=3192416 "Show entry in browser")
  (added)
* [frontend/assets/img/creative\_minds logo2 500x500.png](/browser/cm-business-directory/trunk/frontend/assets/img/creative_minds%20logo2%20500x500.png?rev=3192416 "Show entry in browser")
  (added)
* [frontend/assets/js](/browser/cm-business-directory/trunk/frontend/assets/js?rev=3192416 "Show entry in browser")
  (added)
* [frontend/assets/js/cmbd-functions.js](/browser/cm-business-directory/trunk/frontend/assets/js/cmbd-functions.js?rev=3192416 "Show entry in browser")
  (added)
* [frontend/classes](/browser/cm-business-directory/trunk/frontend/classes?rev=3192416 "Show entry in browser")
  (added)
* [frontend/classes/CMBDDomElement.php](/browser/cm-business-directory/trunk/frontend/classes/CMBDDomElement.php?rev=3192416 "Show entry in browser")
  (added)
* [frontend/classes/Template.php](/browser/cm-business-directory/trunk/frontend/classes/Template.php?rev=3192416 "Show entry in browser")
  (added)
* [frontend/cm-business-directory-business-page-sc.php](/browser/cm-business-directory/trunk/frontend/cm-business-directory-business-page-sc.php?rev=3192416 "Show entry in browser")
  (added)
* [frontend/cm-business-directory-business-page.php](/browser/cm-business-directory/trunk/frontend/cm-business-directory-business-page.php?rev=3192416 "Show entry in browser")
  (added)
* [frontend/cm-business-directory-frontend.php](/browser/cm-business-directory/trunk/frontend/cm-business-directory-frontend.php?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates](/browser/cm-business-directory/trunk/frontend/templates?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default](/browser/cm-business-directory/trunk/frontend/templates/cm_default?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/css](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/css?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/css/.sass-cache](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/css/.sass-cache?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/css/.sass-cache/d7a965d714401dda73a87e6453e2624989faa483](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/css/.sass-cache/d7a965d714401dda73a87e6453e2624989faa483?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/css/.sass-cache/d7a965d714401dda73a87e6453e2624989faa483/styles.scssc](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/css/.sass-cache/d7a965d714401dda73a87e6453e2624989faa483/styles.scssc?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/css/.sass-cache/d7a965d714401dda73a87e6453e2624989faa483/styles\_1.scssc](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/css/.sass-cache/d7a965d714401dda73a87e6453e2624989faa483/styles_1.scssc?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/css/.sass-cache/d7a965d714401dda73a87e6453e2624989faa483/styles\_2.scssc](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/css/.sass-cache/d7a965d714401dda73a87e6453e2624989faa483/styles_2.scssc?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/css/style.css](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/css/style.css?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/css/styles.css](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/css/styles.css?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/css/styles.scss](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/css/styles.scss?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/images](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/images?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/images/backpack-sm.png](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/images/backpack-sm.png?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/images/backpack.png](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/images/backpack.png?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/images/banner.png](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/images/banner.png?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/images/bx\_loader.gif](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/images/bx_loader.gif?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/images/cards.png](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/images/cards.png?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/images/controls.png](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/images/controls.png?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/images/plugin-logo.png](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/images/plugin-logo.png?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/images/share.png](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/images/share.png?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/images/star-empty.png](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/images/star-empty.png?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/images/star.png](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/images/star.png?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/js](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/js?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/js/cmbd-slider-options.js](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/js/cmbd-slider-options.js?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/assets/js/jquery.bxslider.min.js](/browser/cm-business-directory/trunk/frontend/templates/cm_default/assets/js/jquery.bxslider.min.js?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/business-page-view.php](/browser/cm-business-directory/trunk/frontend/templates/cm_default/business-page-view.php?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/views](/browser/cm-business-directory/trunk/frontend/templates/cm_default/views?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/views/business-page-content.phtml](/browser/cm-business-directory/trunk/frontend/templates/cm_default/views/business-page-content.phtml?rev=3192416 "Show entry in browser")
  (added)
* [frontend/templates/cm\_default/views/business-page.phtml](/browser/cm-business-directory/trunk/frontend/templates/cm_default/views/business-page.phtml?rev=3192416 "Show entry in browser")
  (added)
* [frontend/views](/browser/cm-business-directory/trunk/frontend/views?rev=3192416 "Show entry in browser")
  (added)
* [frontend/views/assets](/browser/cm-business-directory/trunk/frontend/views/assets?rev=3192416 "Show entry in browser")
  (added)
* [frontend/views/assets/css](/browser/cm-business-directory/trunk/frontend/views/assets/css?rev=3192416 "Show entry in browser")
  (added)
* [frontend/views/assets/js](/browser/cm-business-directory/trunk/frontend/views/assets/js?rev=3192416 "Show entry in browser")
  (added)
* [frontend/views/assets/js/cube-view.js](/browser/cm-business-directory/trunk/frontend/views/assets/js/cube-view.js?rev=3192416 "Show entry in browser")
  (added)
* [frontend/views/single-business-directory-view.phtml](/browser/cm-business-directory/trunk/frontend/views/single-business-directory-view.phtml?rev=3192416 "Show entry in browser")
  (added)
* [package](/browser/cm-business-directory/trunk/package?rev=3192416 "Show entry in browser")
  (added)
* [package/CMWPPluginssuite.png](/browser/cm-business-directory/trunk/package/CMWPPluginssuite.png?rev=3192416 "Show entry in browser")
  (added)
* [package/cminds-free.php](/browser/cm-business-directory/trunk/package/cminds-free.php?rev=3192416 "Show entry in browser")
  (added)
* [package/cminds-plugin-config.php](/browser/cm-business-directory/trunk/package/cminds-plugin-config.php?rev=3192416 "Show entry in browser")
  (added)
* [package/css](/browser/cm-business-directory/trunk/package/css?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images](/browser/cm-business-directory/trunk/package/css/images?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/animated-overlay.gif](/browser/cm-business-directory/trunk/package/css/images/animated-overlay.gif?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_0\_aaaaaa\_40x100.png](/browser/cm-business-directory/trunk/package/css/images/ui-bg_flat_0_aaaaaa_40x100.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_75\_ffffff\_40x100.png](/browser/cm-business-directory/trunk/package/css/images/ui-bg_flat_75_ffffff_40x100.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_55\_fbf9ee\_1x400.png](/browser/cm-business-directory/trunk/package/css/images/ui-bg_glass_55_fbf9ee_1x400.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_65\_ffffff\_1x400.png](/browser/cm-business-directory/trunk/package/css/images/ui-bg_glass_65_ffffff_1x400.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_dadada\_1x400.png](/browser/cm-business-directory/trunk/package/css/images/ui-bg_glass_75_dadada_1x400.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_e6e6e6\_1x400.png](/browser/cm-business-directory/trunk/package/css/images/ui-bg_glass_75_e6e6e6_1x400.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_95\_fef1ec\_1x400.png](/browser/cm-business-directory/trunk/package/css/images/ui-bg_glass_95_fef1ec_1x400.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_highlight-soft\_75\_cccccc\_1x100.png](/browser/cm-business-directory/trunk/package/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_222222\_256x240.png](/browser/cm-business-directory/trunk/package/css/images/ui-icons_222222_256x240.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_2e83ff\_256x240.png](/browser/cm-business-directory/trunk/package/css/images/ui-icons_2e83ff_256x240.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_454545\_256x240.png](/browser/cm-business-directory/trunk/package/css/images/ui-icons_454545_256x240.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_888888\_256x240.png](/browser/cm-business-directory/trunk/package/css/images/ui-icons_888888_256x240.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_cd0a0a\_256x240.png](/browser/cm-business-directory/trunk/package/css/images/ui-icons_cd0a0a_256x240.png?rev=3192416 "Show entry in browser")
  (added)
* [package/css/jquery-ui.min.css](/browser/cm-business-directory/trunk/package/css/jquery-ui.min.css?rev=3192416 "Show entry in browser")
  (added)
* [package/css/main.css](/browser/cm-business-directory/trunk/package/css/main.css?rev=3192416 "Show entry in browser")
  (added)
* [package/css/rolling@2x.gif](/browser/cm-business-directory/trunk/package/css/rolling%402x.gif?rev=3192416 "Show entry in browser")
  (added)
* [package/js](/browser/cm-business-directory/trunk/package/js?rev=3192416 "Show entry in browser")
  (added)
* [package/js/froogaloop.js](/browser/cm-business-directory/trunk/package/js/froogaloop.js?rev=3192416 "Show entry in browser")
  (added)
* [package/js/mailerlite.js](/browser/cm-business-directory/trunk/package/js/mailerlite.js?rev=3192416 "Show entry in browser")
  (added)
* [package/views](/browser/cm-business-directory/trunk/package/views?rev=3192416 "Show entry in browser")
  (added)
* [package/views/99suite.png](/browser/cm-business-directory/trunk/package/views/99suite.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/Hound2.png](/browser/cm-business-directory/trunk/package/views/Hound2.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/SEOHoundIcon.png](/browser/cm-business-directory/trunk/package/views/SEOHoundIcon.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/WPmembership.png](/browser/cm-business-directory/trunk/package/views/WPmembership.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/answers.png](/browser/cm-business-directory/trunk/package/views/answers.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/appointments\_icon.png](/browser/cm-business-directory/trunk/package/views/appointments_icon.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/banner\_yearly-membership\_220px.png](/browser/cm-business-directory/trunk/package/views/banner_yearly-membership_220px.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/businessdir.png](/browser/cm-business-directory/trunk/package/views/businessdir.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/deactivation\_feedback\_modal.php](/browser/cm-business-directory/trunk/package/views/deactivation_feedback_modal.php?rev=3192416 "Show entry in browser")
  (added)
* [package/views/downloads.png](/browser/cm-business-directory/trunk/package/views/downloads.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/faq.png](/browser/cm-business-directory/trunk/package/views/faq.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/img](/browser/cm-business-directory/trunk/package/views/img?rev=3192416 "Show entry in browser")
  (added)
* [package/views/img/Vector.png](/browser/cm-business-directory/trunk/package/views/img/Vector.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/img/assets.png](/browser/cm-business-directory/trunk/package/views/img/assets.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/img/circle.png](/browser/cm-business-directory/trunk/package/views/img/circle.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/img/confetti.png](/browser/cm-business-directory/trunk/package/views/img/confetti.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/img/v1.png](/browser/cm-business-directory/trunk/package/views/img/v1.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/img/v2.png](/browser/cm-business-directory/trunk/package/views/img/v2.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner.jpg](/browser/cm-business-directory/trunk/package/views/keywordhoundbanner.jpg?rev=3192416 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner1.png](/browser/cm-business-directory/trunk/package/views/keywordhoundbanner1.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/no.png](/browser/cm-business-directory/trunk/package/views/no.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/plugin\_compare\_table.php](/browser/cm-business-directory/trunk/package/views/plugin_compare_table.php?rev=3192416 "Show entry in browser")
  (added)
* [package/views/popup.png](/browser/cm-business-directory/trunk/package/views/popup.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/registration.php](/browser/cm-business-directory/trunk/package/views/registration.php?rev=3192416 "Show entry in browser")
  (added)
* [package/views/routes.png](/browser/cm-business-directory/trunk/package/views/routes.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/searchreplace.png](/browser/cm-business-directory/trunk/package/views/searchreplace.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/tooltip.png](/browser/cm-business-directory/trunk/package/views/tooltip.png?rev=3192416 "Show entry in browser")
  (added)
* [package/views/userguide\_free.php](/browser/cm-business-directory/trunk/package/views/userguide_free.php?rev=3192416 "Show entry in browser")
  (added)
* [package/views/videolessons.png](/browser/cm-business-directory/trunk/package/views/videolessons.png?rev=3192416 "Show entry in browser")
  (added)
* [readme.txt](/browser/cm-business-directory/trunk/readme.txt?rev=3192416 "Show entry in browser")
  (added)
* [shared](/browser/cm-business-directory/trunk/shared?rev=3192416 "Show entry in browser")
  (added)
* [shared/classes](/browser/cm-business-directory/trunk/shared/classes?rev=3192416 "Show entry in browser")
  (added)
* [shared/classes/Labels.php](/browser/cm-business-directory/trunk/shared/classes/Labels.php?rev=3192416 "Show entry in browser")
  (added)
* [shared/classes/labels.tsv](/browser/cm-business-directory/trunk/shared/classes/labels.tsv?rev=3192416 "Show entry in browser")
  (added)
* [shared/cm-business-directory-shared.php](/browser/cm-business-directory/trunk/shared/cm-business-directory-shared.php?rev=3192416 "Show entry in browser")
  (added)
* [shared/functions.php](/browser/cm-business-directory/trunk/shared/functions.php?rev=3192416 "Show entry in browser")
  (added)
* [views](/browser/cm-business-directory/trunk/views?rev=3192416 "Show entry in browser")
  (added)
* [views/assets](/browser/cm-business-directory/trunk/views/assets?rev=3192416 "Show entry in browser")
  (added)
* [views/assets/css](/browser/cm-business-directory/trunk/views/assets/css?rev=3192416 "Show entry in browser")
  (added)
* [views/assets/css/cube-view.css](/browser/cm-business-directory/trunk/views/assets/css/cube-view.css?rev=3192416 "Show entry in browser")
  (added)
* [views/assets/js](/browser/cm-business-directory/trunk/views/assets/js?rev=3192416 "Show entry in browser")
  (added)
* [views/assets/js/cube-view.js](/browser/cm-business-directory/trunk/views/assets/js/cube-view.js?rev=3192416 "Show entry in browser")
  (added)
* [views/single-business-directory-view.phtml](/browser/cm-business-directory/trunk/views/single-business-directory-view.phtml?rev=3192416 "Show entry in browser")
  (added)

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3192416)
* [Zip Archive](?format=zip&new=3192416)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_93a00222_20250114_205639.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3192808)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3192807 "Changeset 3192807")
* [Next Changeset](/changeset/3192809 "Changeset 3192809") →

---

# Changeset 3192808

Timestamp:
11/20/2024 06:56:21 AM
([8 weeks](/timeline?from=2024-11-20T06%3A56%3A21Z&precision=second "See timeline at 11/20/2024 06:56:21 AM") ago)

Author:
CreativeMindsSolutions
Message:

replaced version due to type mistake

Location:
[cm-video-lesson-manager/trunk](/browser/cm-video-lesson-manager/trunk?rev=3192808)
Files:

186 added

* [App.php](/browser/cm-video-lesson-manager/trunk/App.php?rev=3192808 "Show entry in browser")
  (added)
* [asset](/browser/cm-video-lesson-manager/trunk/asset?rev=3192808 "Show entry in browser")
  (added)
* [asset/css](/browser/cm-video-lesson-manager/trunk/asset/css?rev=3192808 "Show entry in browser")
  (added)
* [asset/css/backend.css](/browser/cm-video-lesson-manager/trunk/asset/css/backend.css?rev=3192808 "Show entry in browser")
  (added)
* [asset/css/frontend.css](/browser/cm-video-lesson-manager/trunk/asset/css/frontend.css?rev=3192808 "Show entry in browser")
  (added)
* [asset/css/settings.css](/browser/cm-video-lesson-manager/trunk/asset/css/settings.css?rev=3192808 "Show entry in browser")
  (added)
* [asset/images](/browser/cm-video-lesson-manager/trunk/asset/images?rev=3192808 "Show entry in browser")
  (added)
* [asset/images/01-cm-video-lessons-manager-importing-videos.png](/browser/cm-video-lesson-manager/trunk/asset/images/01-cm-video-lessons-manager-importing-videos.png?rev=3192808 "Show entry in browser")
  (added)
* [asset/images/01-cm-video-lessons-manager-lesson-notes.png](/browser/cm-video-lesson-manager/trunk/asset/images/01-cm-video-lessons-manager-lesson-notes.png?rev=3192808 "Show entry in browser")
  (added)
* [asset/images/01-cm-video-lessons-manager-managing-badges.png](/browser/cm-video-lesson-manager/trunk/asset/images/01-cm-video-lessons-manager-managing-badges.png?rev=3192808 "Show entry in browser")
  (added)
* [asset/images/01-cm-video-lessons-manager-managing-courses.png](/browser/cm-video-lesson-manager/trunk/asset/images/01-cm-video-lessons-manager-managing-courses.png?rev=3192808 "Show entry in browser")
  (added)
* [asset/images/01-cm-video-lessons-manager-reports-dashboard.png](/browser/cm-video-lesson-manager/trunk/asset/images/01-cm-video-lessons-manager-reports-dashboard.png?rev=3192808 "Show entry in browser")
  (added)
* [asset/images/02-cm-video-lessons-manager-editing-badge.png](/browser/cm-video-lesson-manager/trunk/asset/images/02-cm-video-lessons-manager-editing-badge.png?rev=3192808 "Show entry in browser")
  (added)
* [asset/images/02-cm-video-lessons-manager-editing-course.png](/browser/cm-video-lesson-manager/trunk/asset/images/02-cm-video-lessons-manager-editing-course.png?rev=3192808 "Show entry in browser")
  (added)
* [asset/images/02-cm-video-lessons-manager-managing-videos.png](/browser/cm-video-lesson-manager/trunk/asset/images/02-cm-video-lessons-manager-managing-videos.png?rev=3192808 "Show entry in browser")
  (added)
* [asset/images/02-cm-video-lessons-manager-report-details.png](/browser/cm-video-lesson-manager/trunk/asset/images/02-cm-video-lessons-manager-report-details.png?rev=3192808 "Show entry in browser")
  (added)
* [asset/images/03-cm-video-lessons-manager-user-view.png](/browser/cm-video-lesson-manager/trunk/asset/images/03-cm-video-lessons-manager-user-view.png?rev=3192808 "Show entry in browser")
  (added)
* [asset/images/03-cm-video-lessons-manager-video-details.png](/browser/cm-video-lesson-manager/trunk/asset/images/03-cm-video-lessons-manager-video-details.png?rev=3192808 "Show entry in browser")
  (added)
* [asset/img](/browser/cm-video-lesson-manager/trunk/asset/img?rev=3192808 "Show entry in browser")
  (added)
* [asset/img/ajax-loader-big.gif](/browser/cm-video-lesson-manager/trunk/asset/img/ajax-loader-big.gif?rev=3192808 "Show entry in browser")
  (added)
* [asset/img/ajax-loader.gif](/browser/cm-video-lesson-manager/trunk/asset/img/ajax-loader.gif?rev=3192808 "Show entry in browser")
  (added)
* [asset/js](/browser/cm-video-lesson-manager/trunk/asset/js?rev=3192808 "Show entry in browser")
  (added)
* [asset/js/backend.js](/browser/cm-video-lesson-manager/trunk/asset/js/backend.js?rev=3192808 "Show entry in browser")
  (added)
* [asset/js/logout-heartbeat.js](/browser/cm-video-lesson-manager/trunk/asset/js/logout-heartbeat.js?rev=3192808 "Show entry in browser")
  (added)
* [asset/js/paybox.js](/browser/cm-video-lesson-manager/trunk/asset/js/paybox.js?rev=3192808 "Show entry in browser")
  (added)
* [asset/js/playlist.js](/browser/cm-video-lesson-manager/trunk/asset/js/playlist.js?rev=3192808 "Show entry in browser")
  (added)
* [asset/js/utils.js](/browser/cm-video-lesson-manager/trunk/asset/js/utils.js?rev=3192808 "Show entry in browser")
  (added)
* [asset/labels](/browser/cm-video-lesson-manager/trunk/asset/labels?rev=3192808 "Show entry in browser")
  (added)
* [asset/labels/instantpayments.tsv](/browser/cm-video-lesson-manager/trunk/asset/labels/instantpayments.tsv?rev=3192808 "Show entry in browser")
  (added)
* [asset/labels/labels.tsv](/browser/cm-video-lesson-manager/trunk/asset/labels/labels.tsv?rev=3192808 "Show entry in browser")
  (added)
* [cm-video-lesson-manager.php](/browser/cm-video-lesson-manager/trunk/cm-video-lesson-manager.php?rev=3192808 "Show entry in browser")
  (added)
* [controller](/browser/cm-video-lesson-manager/trunk/controller?rev=3192808 "Show entry in browser")
  (added)
* [controller/AddSettingsTabsController.php](/browser/cm-video-lesson-manager/trunk/controller/AddSettingsTabsController.php?rev=3192808 "Show entry in browser")
  (added)
* [controller/ChannelController.php](/browser/cm-video-lesson-manager/trunk/controller/ChannelController.php?rev=3192808 "Show entry in browser")
  (added)
* [controller/FreeController.php](/browser/cm-video-lesson-manager/trunk/controller/FreeController.php?rev=3192808 "Show entry in browser")
  (added)
* [controller/InstantPaymentsController.php](/browser/cm-video-lesson-manager/trunk/controller/InstantPaymentsController.php?rev=3192808 "Show entry in browser")
  (added)
* [controller/SettingsController.php](/browser/cm-video-lesson-manager/trunk/controller/SettingsController.php?rev=3192808 "Show entry in browser")
  (added)
* [controller/UpdateController.php](/browser/cm-video-lesson-manager/trunk/controller/UpdateController.php?rev=3192808 "Show entry in browser")
  (added)
* [core](/browser/cm-video-lesson-manager/trunk/core?rev=3192808 "Show entry in browser")
  (added)
* [core/controller](/browser/cm-video-lesson-manager/trunk/core/controller?rev=3192808 "Show entry in browser")
  (added)
* [core/controller/Controller.php](/browser/cm-video-lesson-manager/trunk/core/controller/Controller.php?rev=3192808 "Show entry in browser")
  (added)
* [core/helper](/browser/cm-video-lesson-manager/trunk/core/helper?rev=3192808 "Show entry in browser")
  (added)
* [core/helper/AdminNotice.php](/browser/cm-video-lesson-manager/trunk/core/helper/AdminNotice.php?rev=3192808 "Show entry in browser")
  (added)
* [core/model](/browser/cm-video-lesson-manager/trunk/core/model?rev=3192808 "Show entry in browser")
  (added)
* [core/model/Model.php](/browser/cm-video-lesson-manager/trunk/core/model/Model.php?rev=3192808 "Show entry in browser")
  (added)
* [core/model/PostType.php](/browser/cm-video-lesson-manager/trunk/core/model/PostType.php?rev=3192808 "Show entry in browser")
  (added)
* [core/model/SettingsAbstract.php](/browser/cm-video-lesson-manager/trunk/core/model/SettingsAbstract.php?rev=3192808 "Show entry in browser")
  (added)
* [core/model/TaxonomyTerm.php](/browser/cm-video-lesson-manager/trunk/core/model/TaxonomyTerm.php?rev=3192808 "Show entry in browser")
  (added)
* [core/shortcode](/browser/cm-video-lesson-manager/trunk/core/shortcode?rev=3192808 "Show entry in browser")
  (added)
* [core/shortcode/Shortcode.php](/browser/cm-video-lesson-manager/trunk/core/shortcode/Shortcode.php?rev=3192808 "Show entry in browser")
  (added)
* [core/view](/browser/cm-video-lesson-manager/trunk/core/view?rev=3192808 "Show entry in browser")
  (added)
* [core/view/SettingsView.php](/browser/cm-video-lesson-manager/trunk/core/view/SettingsView.php?rev=3192808 "Show entry in browser")
  (added)
* [core/view/SettingsViewAbstract.php](/browser/cm-video-lesson-manager/trunk/core/view/SettingsViewAbstract.php?rev=3192808 "Show entry in browser")
  (added)
* [helper](/browser/cm-video-lesson-manager/trunk/helper?rev=3192808 "Show entry in browser")
  (added)
* [helper/ConfigureVimeoNotice.php](/browser/cm-video-lesson-manager/trunk/helper/ConfigureVimeoNotice.php?rev=3192808 "Show entry in browser")
  (added)
* [helper/SettingsMicropayments.php](/browser/cm-video-lesson-manager/trunk/helper/SettingsMicropayments.php?rev=3192808 "Show entry in browser")
  (added)
* [helper/VideoPrivacyHelper.php](/browser/cm-video-lesson-manager/trunk/helper/VideoPrivacyHelper.php?rev=3192808 "Show entry in browser")
  (added)
* [lib](/browser/cm-video-lesson-manager/trunk/lib?rev=3192808 "Show entry in browser")
  (added)
* [lib/Email.php](/browser/cm-video-lesson-manager/trunk/lib/Email.php?rev=3192808 "Show entry in browser")
  (added)
* [lib/Vimeo](/browser/cm-video-lesson-manager/trunk/lib/Vimeo?rev=3192808 "Show entry in browser")
  (added)
* [lib/Vimeo/Exceptions](/browser/cm-video-lesson-manager/trunk/lib/Vimeo/Exceptions?rev=3192808 "Show entry in browser")
  (added)
* [lib/Vimeo/Exceptions/ExceptionInterface.php](/browser/cm-video-lesson-manager/trunk/lib/Vimeo/Exceptions/ExceptionInterface.php?rev=3192808 "Show entry in browser")
  (added)
* [lib/Vimeo/Exceptions/VimeoUploadException.php](/browser/cm-video-lesson-manager/trunk/lib/Vimeo/Exceptions/VimeoUploadException.php?rev=3192808 "Show entry in browser")
  (added)
* [lib/Vimeo/Vimeo.php](/browser/cm-video-lesson-manager/trunk/lib/Vimeo/Vimeo.php?rev=3192808 "Show entry in browser")
  (added)
* [model](/browser/cm-video-lesson-manager/trunk/model?rev=3192808 "Show entry in browser")
  (added)
* [model/Category.php](/browser/cm-video-lesson-manager/trunk/model/Category.php?rev=3192808 "Show entry in browser")
  (added)
* [model/Channel.php](/browser/cm-video-lesson-manager/trunk/model/Channel.php?rev=3192808 "Show entry in browser")
  (added)
* [model/ChannelInstantPayment.php](/browser/cm-video-lesson-manager/trunk/model/ChannelInstantPayment.php?rev=3192808 "Show entry in browser")
  (added)
* [model/ChannelReport.php](/browser/cm-video-lesson-manager/trunk/model/ChannelReport.php?rev=3192808 "Show entry in browser")
  (added)
* [model/ChannelSubscription.php](/browser/cm-video-lesson-manager/trunk/model/ChannelSubscription.php?rev=3192808 "Show entry in browser")
  (added)
* [model/IPaymentMethod.php](/browser/cm-video-lesson-manager/trunk/model/IPaymentMethod.php?rev=3192808 "Show entry in browser")
  (added)
* [model/Labels.php](/browser/cm-video-lesson-manager/trunk/model/Labels.php?rev=3192808 "Show entry in browser")
  (added)
* [model/Settings.php](/browser/cm-video-lesson-manager/trunk/model/Settings.php?rev=3192808 "Show entry in browser")
  (added)
* [model/Video.php](/browser/cm-video-lesson-manager/trunk/model/Video.php?rev=3192808 "Show entry in browser")
  (added)
* [model/Vimeo.php](/browser/cm-video-lesson-manager/trunk/model/Vimeo.php?rev=3192808 "Show entry in browser")
  (added)
* [package](/browser/cm-video-lesson-manager/trunk/package?rev=3192808 "Show entry in browser")
  (added)
* [package/CMWPPluginssuite.png](/browser/cm-video-lesson-manager/trunk/package/CMWPPluginssuite.png?rev=3192808 "Show entry in browser")
  (added)
* [package/cminds-free.php](/browser/cm-video-lesson-manager/trunk/package/cminds-free.php?rev=3192808 "Show entry in browser")
  (added)
* [package/cminds-plugin-config.php](/browser/cm-video-lesson-manager/trunk/package/cminds-plugin-config.php?rev=3192808 "Show entry in browser")
  (added)
* [package/css](/browser/cm-video-lesson-manager/trunk/package/css?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images](/browser/cm-video-lesson-manager/trunk/package/css/images?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/animated-overlay.gif](/browser/cm-video-lesson-manager/trunk/package/css/images/animated-overlay.gif?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_0\_aaaaaa\_40x100.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-bg_flat_0_aaaaaa_40x100.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_75\_ffffff\_40x100.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-bg_flat_75_ffffff_40x100.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_55\_fbf9ee\_1x400.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-bg_glass_55_fbf9ee_1x400.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_65\_ffffff\_1x400.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-bg_glass_65_ffffff_1x400.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_dadada\_1x400.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-bg_glass_75_dadada_1x400.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_e6e6e6\_1x400.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-bg_glass_75_e6e6e6_1x400.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_95\_fef1ec\_1x400.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-bg_glass_95_fef1ec_1x400.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_highlight-soft\_75\_cccccc\_1x100.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_222222\_256x240.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-icons_222222_256x240.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_2e83ff\_256x240.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-icons_2e83ff_256x240.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_454545\_256x240.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-icons_454545_256x240.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_888888\_256x240.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-icons_888888_256x240.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_cd0a0a\_256x240.png](/browser/cm-video-lesson-manager/trunk/package/css/images/ui-icons_cd0a0a_256x240.png?rev=3192808 "Show entry in browser")
  (added)
* [package/css/jquery-ui.min.css](/browser/cm-video-lesson-manager/trunk/package/css/jquery-ui.min.css?rev=3192808 "Show entry in browser")
  (added)
* [package/css/main.css](/browser/cm-video-lesson-manager/trunk/package/css/main.css?rev=3192808 "Show entry in browser")
  (added)
* [package/css/rolling@2x.gif](/browser/cm-video-lesson-manager/trunk/package/css/rolling%402x.gif?rev=3192808 "Show entry in browser")
  (added)
* [package/js](/browser/cm-video-lesson-manager/trunk/package/js?rev=3192808 "Show entry in browser")
  (added)
* [package/js/froogaloop.js](/browser/cm-video-lesson-manager/trunk/package/js/froogaloop.js?rev=3192808 "Show entry in browser")
  (added)
* [package/js/mailerlite.js](/browser/cm-video-lesson-manager/trunk/package/js/mailerlite.js?rev=3192808 "Show entry in browser")
  (added)
* [package/views](/browser/cm-video-lesson-manager/trunk/package/views?rev=3192808 "Show entry in browser")
  (added)
* [package/views/99suite.png](/browser/cm-video-lesson-manager/trunk/package/views/99suite.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/Hound2.png](/browser/cm-video-lesson-manager/trunk/package/views/Hound2.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/SEOHoundIcon.png](/browser/cm-video-lesson-manager/trunk/package/views/SEOHoundIcon.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/WPmembership.png](/browser/cm-video-lesson-manager/trunk/package/views/WPmembership.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/answers.png](/browser/cm-video-lesson-manager/trunk/package/views/answers.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/appointments\_icon.png](/browser/cm-video-lesson-manager/trunk/package/views/appointments_icon.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/banner\_yearly-membership\_220px.png](/browser/cm-video-lesson-manager/trunk/package/views/banner_yearly-membership_220px.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/businessdir.png](/browser/cm-video-lesson-manager/trunk/package/views/businessdir.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/deactivation\_feedback\_modal.php](/browser/cm-video-lesson-manager/trunk/package/views/deactivation_feedback_modal.php?rev=3192808 "Show entry in browser")
  (added)
* [package/views/downloads.png](/browser/cm-video-lesson-manager/trunk/package/views/downloads.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/faq.png](/browser/cm-video-lesson-manager/trunk/package/views/faq.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/img](/browser/cm-video-lesson-manager/trunk/package/views/img?rev=3192808 "Show entry in browser")
  (added)
* [package/views/img/Vector.png](/browser/cm-video-lesson-manager/trunk/package/views/img/Vector.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/img/assets.png](/browser/cm-video-lesson-manager/trunk/package/views/img/assets.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/img/circle.png](/browser/cm-video-lesson-manager/trunk/package/views/img/circle.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/img/confetti.png](/browser/cm-video-lesson-manager/trunk/package/views/img/confetti.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/img/v1.png](/browser/cm-video-lesson-manager/trunk/package/views/img/v1.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/img/v2.png](/browser/cm-video-lesson-manager/trunk/package/views/img/v2.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner.jpg](/browser/cm-video-lesson-manager/trunk/package/views/keywordhoundbanner.jpg?rev=3192808 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner1.png](/browser/cm-video-lesson-manager/trunk/package/views/keywordhoundbanner1.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/no.png](/browser/cm-video-lesson-manager/trunk/package/views/no.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/plugin\_compare\_table.php](/browser/cm-video-lesson-manager/trunk/package/views/plugin_compare_table.php?rev=3192808 "Show entry in browser")
  (added)
* [package/views/popup.png](/browser/cm-video-lesson-manager/trunk/package/views/popup.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/registration.php](/browser/cm-video-lesson-manager/trunk/package/views/registration.php?rev=3192808 "Show entry in browser")
  (added)
* [package/views/routes.png](/browser/cm-video-lesson-manager/trunk/package/views/routes.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/searchreplace.png](/browser/cm-video-lesson-manager/trunk/package/views/searchreplace.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/tooltip.png](/browser/cm-video-lesson-manager/trunk/package/views/tooltip.png?rev=3192808 "Show entry in browser")
  (added)
* [package/views/userguide\_free.php](/browser/cm-video-lesson-manager/trunk/package/views/userguide_free.php?rev=3192808 "Show entry in browser")
  (added)
* [package/views/videolessons.png](/browser/cm-video-lesson-manager/trunk/package/views/videolessons.png?rev=3192808 "Show entry in browser")
  (added)
* [readme.txt](/browser/cm-video-lesson-manager/trunk/readme.txt?rev=3192808 "Show entry in browser")
  (added)
* [shortcode](/browser/cm-video-lesson-manager/trunk/shortcode?rev=3192808 "Show entry in browser")
  (added)
* [shortcode/ChannelsListShortcode.php](/browser/cm-video-lesson-manager/trunk/shortcode/ChannelsListShortcode.php?rev=3192808 "Show entry in browser")
  (added)
* [shortcode/DashboardShortcode.php](/browser/cm-video-lesson-manager/trunk/shortcode/DashboardShortcode.php?rev=3192808 "Show entry in browser")
  (added)
* [shortcode/PlaylistShortcode.php](/browser/cm-video-lesson-manager/trunk/shortcode/PlaylistShortcode.php?rev=3192808 "Show entry in browser")
  (added)
* [shortcode/SubscriptionsShortcode.php](/browser/cm-video-lesson-manager/trunk/shortcode/SubscriptionsShortcode.php?rev=3192808 "Show entry in browser")
  (added)
* [view](/browser/cm-video-lesson-manager/trunk/view?rev=3192808 "Show entry in browser")
  (added)
* [view/backend](/browser/cm-video-lesson-manager/trunk/view/backend?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/channel](/browser/cm-video-lesson-manager/trunk/view/backend/channel?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/channel/choose-channel-meta-box.php](/browser/cm-video-lesson-manager/trunk/view/backend/channel/choose-channel-meta-box.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/channel/notifications-meta-box.php](/browser/cm-video-lesson-manager/trunk/view/backend/channel/notifications-meta-box.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/channelreports](/browser/cm-video-lesson-manager/trunk/view/backend/channelreports?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/channelreports/report-channel.php](/browser/cm-video-lesson-manager/trunk/view/backend/channelreports/report-channel.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/channelreports/report-index.php](/browser/cm-video-lesson-manager/trunk/view/backend/channelreports/report-index.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/free](/browser/cm-video-lesson-manager/trunk/view/backend/free?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/free/upgrade.php](/browser/cm-video-lesson-manager/trunk/view/backend/free/upgrade.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/instantpayments](/browser/cm-video-lesson-manager/trunk/view/backend/instantpayments?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/instantpayments/channel-costs-meta-box.php](/browser/cm-video-lesson-manager/trunk/view/backend/instantpayments/channel-costs-meta-box.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings](/browser/cm-video-lesson-manager/trunk/view/backend/settings?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/badges.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/badges.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/courses.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/courses.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/experts.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/experts.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/help.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/help.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/labels.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/labels.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/lesson\_notes.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/lesson_notes.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/licensing-box.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/licensing-box.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/progress\_report.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/progress_report.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/settings.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/settings.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/shortcodes.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/shortcodes.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/test-configuration-error.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/test-configuration-error.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/test-configuration.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/test-configuration.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/settings/videos.php](/browser/cm-video-lesson-manager/trunk/view/backend/settings/videos.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/subscriptions](/browser/cm-video-lesson-manager/trunk/view/backend/subscriptions?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/subscriptions/add.php](/browser/cm-video-lesson-manager/trunk/view/backend/subscriptions/add.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/subscriptions/report.php](/browser/cm-video-lesson-manager/trunk/view/backend/subscriptions/report.php?rev=3192808 "Show entry in browser")
  (added)
* [view/backend/template.php](/browser/cm-video-lesson-manager/trunk/view/backend/template.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend](/browser/cm-video-lesson-manager/trunk/view/frontend?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/channel](/browser/cm-video-lesson-manager/trunk/view/frontend/channel?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/channel/access\_denied.php](/browser/cm-video-lesson-manager/trunk/view/frontend/channel/access_denied.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/channel/channels-list.php](/browser/cm-video-lesson-manager/trunk/view/frontend/channel/channels-list.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/channel/not\_found.php](/browser/cm-video-lesson-manager/trunk/view/frontend/channel/not_found.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/channel/single\_content.php](/browser/cm-video-lesson-manager/trunk/view/frontend/channel/single_content.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/dashboard](/browser/cm-video-lesson-manager/trunk/view/frontend/dashboard?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/dashboard/dashboard.php](/browser/cm-video-lesson-manager/trunk/view/frontend/dashboard/dashboard.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/instantpayments](/browser/cm-video-lesson-manager/trunk/view/frontend/instantpayments?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/instantpayments/paybox-form.php](/browser/cm-video-lesson-manager/trunk/view/frontend/instantpayments/paybox-form.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/instantpayments/paybox-guest.php](/browser/cm-video-lesson-manager/trunk/view/frontend/instantpayments/paybox-guest.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/instantpayments/paybox.php](/browser/cm-video-lesson-manager/trunk/view/frontend/instantpayments/paybox.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/playlist](/browser/cm-video-lesson-manager/trunk/view/frontend/playlist?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/playlist/links-bar.php](/browser/cm-video-lesson-manager/trunk/view/frontend/playlist/links-bar.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/playlist/navbar.php](/browser/cm-video-lesson-manager/trunk/view/frontend/playlist/navbar.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/playlist/pagination.php](/browser/cm-video-lesson-manager/trunk/view/frontend/playlist/pagination.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/playlist/tiles.php](/browser/cm-video-lesson-manager/trunk/view/frontend/playlist/tiles.php?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/subscriptions](/browser/cm-video-lesson-manager/trunk/view/frontend/subscriptions?rev=3192808 "Show entry in browser")
  (added)
* [view/frontend/subscriptions/subscriptions-table.php](/browser/cm-video-lesson-manager/trunk/view/frontend/subscriptions/subscriptions-table.php?rev=3192808 "Show entry in browser")
  (added)

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3192808)
* [Zip Archive](?format=zip&new=3192808)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_19c61c20_20250114_205634.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3192354)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3192353 "Changeset 3192353")
* [Next Changeset](/changeset/3192355 "Changeset 3192355") →

---

# Changeset 3192354

Timestamp:
11/19/2024 02:12:00 PM
([8 weeks](/timeline?from=2024-11-19T14%3A12%3A00Z&precision=second "See timeline at 11/19/2024 02:12:00 PM") ago)

Author:
CreativeMindsSolutions
Message:

release a security fix

Location:
[cm-header-footer-script-loader/trunk](/browser/cm-header-footer-script-loader/trunk?rev=3192354)
Files:

76 added

* [classes](/browser/cm-header-footer-script-loader/trunk/classes?rev=3192354 "Show entry in browser")
  (added)
* [classes/class.cm-handfsl-backend.php](/browser/cm-header-footer-script-loader/trunk/classes/class.cm-handfsl-backend.php?rev=3192354 "Show entry in browser")
  (added)
* [classes/class.cm-handfsl-frontend.php](/browser/cm-header-footer-script-loader/trunk/classes/class.cm-handfsl-frontend.php?rev=3192354 "Show entry in browser")
  (added)
* [cm-header-footer-script-loader.php](/browser/cm-header-footer-script-loader/trunk/cm-header-footer-script-loader.php?rev=3192354 "Show entry in browser")
  (added)
* [css](/browser/cm-header-footer-script-loader/trunk/css?rev=3192354 "Show entry in browser")
  (added)
* [css/admin.css](/browser/cm-header-footer-script-loader/trunk/css/admin.css?rev=3192354 "Show entry in browser")
  (added)
* [js](/browser/cm-header-footer-script-loader/trunk/js?rev=3192354 "Show entry in browser")
  (added)
* [js/admin.js](/browser/cm-header-footer-script-loader/trunk/js/admin.js?rev=3192354 "Show entry in browser")
  (added)
* [js/jquery.repeater.min.js](/browser/cm-header-footer-script-loader/trunk/js/jquery.repeater.min.js?rev=3192354 "Show entry in browser")
  (added)
* [languages](/browser/cm-header-footer-script-loader/trunk/languages?rev=3192354 "Show entry in browser")
  (added)
* [languages/en\_EN.po](/browser/cm-header-footer-script-loader/trunk/languages/en_EN.po?rev=3192354 "Show entry in browser")
  (added)
* [package](/browser/cm-header-footer-script-loader/trunk/package?rev=3192354 "Show entry in browser")
  (added)
* [package/CMWPPluginssuite.png](/browser/cm-header-footer-script-loader/trunk/package/CMWPPluginssuite.png?rev=3192354 "Show entry in browser")
  (added)
* [package/cminds-free.php](/browser/cm-header-footer-script-loader/trunk/package/cminds-free.php?rev=3192354 "Show entry in browser")
  (added)
* [package/cminds-plugin-config.php](/browser/cm-header-footer-script-loader/trunk/package/cminds-plugin-config.php?rev=3192354 "Show entry in browser")
  (added)
* [package/css](/browser/cm-header-footer-script-loader/trunk/package/css?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images](/browser/cm-header-footer-script-loader/trunk/package/css/images?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/animated-overlay.gif](/browser/cm-header-footer-script-loader/trunk/package/css/images/animated-overlay.gif?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_0\_aaaaaa\_40x100.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-bg_flat_0_aaaaaa_40x100.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_75\_ffffff\_40x100.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-bg_flat_75_ffffff_40x100.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_55\_fbf9ee\_1x400.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-bg_glass_55_fbf9ee_1x400.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_65\_ffffff\_1x400.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-bg_glass_65_ffffff_1x400.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_dadada\_1x400.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-bg_glass_75_dadada_1x400.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_e6e6e6\_1x400.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-bg_glass_75_e6e6e6_1x400.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_95\_fef1ec\_1x400.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-bg_glass_95_fef1ec_1x400.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_highlight-soft\_75\_cccccc\_1x100.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_222222\_256x240.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-icons_222222_256x240.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_2e83ff\_256x240.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-icons_2e83ff_256x240.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_454545\_256x240.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-icons_454545_256x240.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_888888\_256x240.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-icons_888888_256x240.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_cd0a0a\_256x240.png](/browser/cm-header-footer-script-loader/trunk/package/css/images/ui-icons_cd0a0a_256x240.png?rev=3192354 "Show entry in browser")
  (added)
* [package/css/jquery-ui.min.css](/browser/cm-header-footer-script-loader/trunk/package/css/jquery-ui.min.css?rev=3192354 "Show entry in browser")
  (added)
* [package/css/main.css](/browser/cm-header-footer-script-loader/trunk/package/css/main.css?rev=3192354 "Show entry in browser")
  (added)
* [package/css/rolling@2x.gif](/browser/cm-header-footer-script-loader/trunk/package/css/rolling%402x.gif?rev=3192354 "Show entry in browser")
  (added)
* [package/js](/browser/cm-header-footer-script-loader/trunk/package/js?rev=3192354 "Show entry in browser")
  (added)
* [package/js/froogaloop.js](/browser/cm-header-footer-script-loader/trunk/package/js/froogaloop.js?rev=3192354 "Show entry in browser")
  (added)
* [package/js/mailerlite.js](/browser/cm-header-footer-script-loader/trunk/package/js/mailerlite.js?rev=3192354 "Show entry in browser")
  (added)
* [package/views](/browser/cm-header-footer-script-loader/trunk/package/views?rev=3192354 "Show entry in browser")
  (added)
* [package/views/99suite.png](/browser/cm-header-footer-script-loader/trunk/package/views/99suite.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/Hound2.png](/browser/cm-header-footer-script-loader/trunk/package/views/Hound2.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/SEOHoundIcon.png](/browser/cm-header-footer-script-loader/trunk/package/views/SEOHoundIcon.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/WPmembership.png](/browser/cm-header-footer-script-loader/trunk/package/views/WPmembership.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/answers.png](/browser/cm-header-footer-script-loader/trunk/package/views/answers.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/appointments\_icon.png](/browser/cm-header-footer-script-loader/trunk/package/views/appointments_icon.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/banner\_yearly-membership\_220px.png](/browser/cm-header-footer-script-loader/trunk/package/views/banner_yearly-membership_220px.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/businessdir.png](/browser/cm-header-footer-script-loader/trunk/package/views/businessdir.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/deactivation\_feedback\_modal.php](/browser/cm-header-footer-script-loader/trunk/package/views/deactivation_feedback_modal.php?rev=3192354 "Show entry in browser")
  (added)
* [package/views/downloads.png](/browser/cm-header-footer-script-loader/trunk/package/views/downloads.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/faq.png](/browser/cm-header-footer-script-loader/trunk/package/views/faq.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/img](/browser/cm-header-footer-script-loader/trunk/package/views/img?rev=3192354 "Show entry in browser")
  (added)
* [package/views/img/Vector.png](/browser/cm-header-footer-script-loader/trunk/package/views/img/Vector.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/img/assets.png](/browser/cm-header-footer-script-loader/trunk/package/views/img/assets.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/img/circle.png](/browser/cm-header-footer-script-loader/trunk/package/views/img/circle.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/img/confetti.png](/browser/cm-header-footer-script-loader/trunk/package/views/img/confetti.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/img/v1.png](/browser/cm-header-footer-script-loader/trunk/package/views/img/v1.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/img/v2.png](/browser/cm-header-footer-script-loader/trunk/package/views/img/v2.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner.jpg](/browser/cm-header-footer-script-loader/trunk/package/views/keywordhoundbanner.jpg?rev=3192354 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner1.png](/browser/cm-header-footer-script-loader/trunk/package/views/keywordhoundbanner1.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/no.png](/browser/cm-header-footer-script-loader/trunk/package/views/no.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/plugin\_compare\_table.php](/browser/cm-header-footer-script-loader/trunk/package/views/plugin_compare_table.php?rev=3192354 "Show entry in browser")
  (added)
* [package/views/popup.png](/browser/cm-header-footer-script-loader/trunk/package/views/popup.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/registration.php](/browser/cm-header-footer-script-loader/trunk/package/views/registration.php?rev=3192354 "Show entry in browser")
  (added)
* [package/views/routes.png](/browser/cm-header-footer-script-loader/trunk/package/views/routes.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/searchreplace.png](/browser/cm-header-footer-script-loader/trunk/package/views/searchreplace.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/tooltip.png](/browser/cm-header-footer-script-loader/trunk/package/views/tooltip.png?rev=3192354 "Show entry in browser")
  (added)
* [package/views/userguide\_free.php](/browser/cm-header-footer-script-loader/trunk/package/views/userguide_free.php?rev=3192354 "Show entry in browser")
  (added)
* [package/views/videolessons.png](/browser/cm-header-footer-script-loader/trunk/package/views/videolessons.png?rev=3192354 "Show entry in browser")
  (added)
* [readme.txt](/browser/cm-header-footer-script-loader/trunk/readme.txt?rev=3192354 "Show entry in browser")
  (added)
* [views](/browser/cm-header-footer-script-loader/trunk/views?rev=3192354 "Show entry in browser")
  (added)
* [views/about.phtml](/browser/cm-header-footer-script-loader/trunk/views/about.phtml?rev=3192354 "Show entry in browser")
  (added)
* [views/nav.phtml](/browser/cm-header-footer-script-loader/trunk/views/nav.phtml?rev=3192354 "Show entry in browser")
  (added)
* [views/pro.phtml](/browser/cm-header-footer-script-loader/trunk/views/pro.phtml?rev=3192354 "Show entry in browser")
  (added)
* [views/settings.phtml](/browser/cm-header-footer-script-loader/trunk/views/settings.phtml?rev=3192354 "Show entry in browser")
  (added)
* [views/sharebox.phtml](/browser/cm-header-footer-script-loader/trunk/views/sharebox.phtml?rev=3192354 "Show entry in browser")
  (added)
* [views/template.phtml](/browser/cm-header-footer-script-loader/trunk/views/template.phtml?rev=3192354 "Show entry in browser")
  (added)
* [views/top.phtml](/browser/cm-header-footer-script-loader/trunk/views/top.phtml?rev=3192354 "Show entry in browser")
  (added)

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3192354)
* [Zip Archive](?format=zip&new=3192354)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_774c0c3a_20250114_205632.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3191536)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3191535 "Changeset 3191535")
* [Next Changeset](/changeset/3191537 "Changeset 3191537") →

---

# Changeset 3191536

Timestamp:
11/18/2024 06:27:38 PM
([2 months](/timeline?from=2024-11-18T18%3A27%3A38Z&precision=second "See timeline at 11/18/2024 06:27:38 PM") ago)

Author:
CreativeMindsSolutions
Message:

release new version with a fix

Location:
[cm-pop-up-banners/trunk](/browser/cm-pop-up-banners/trunk?rev=3191536)
Files:

280 added

* [Psr4AutoloaderClass.php](/browser/cm-pop-up-banners/trunk/Psr4AutoloaderClass.php?rev=3191536 "Show entry in browser")
  (added)
* [backend](/browser/cm-pop-up-banners/trunk/backend?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets](/browser/cm-pop-up-banners/trunk/backend/assets?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css](/browser/cm-pop-up-banners/trunk/backend/assets/css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/addesigner.css](/browser/cm-pop-up-banners/trunk/backend/assets/css/addesigner.css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/bootstrap-colorpicker.min.css](/browser/cm-pop-up-banners/trunk/backend/assets/css/bootstrap-colorpicker.min.css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/bootstrap.min.css](/browser/cm-pop-up-banners/trunk/backend/assets/css/bootstrap.min.css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/cm-color-picker.css](/browser/cm-pop-up-banners/trunk/backend/assets/css/cm-color-picker.css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/cm-popupflyin.css](/browser/cm-pop-up-banners/trunk/backend/assets/css/cm-popupflyin.css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/dataTables.css](/browser/cm-pop-up-banners/trunk/backend/assets/css/dataTables.css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images](/browser/cm-pop-up-banners/trunk/backend/assets/css/images?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_flat\_0\_aaaaaa\_40x100.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-bg_flat_0_aaaaaa_40x100.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_flat\_75\_ffffff\_40x100.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-bg_flat_75_ffffff_40x100.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_glass\_55\_fbf9ee\_1x400.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-bg_glass_55_fbf9ee_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_glass\_65\_ffffff\_1x400.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-bg_glass_65_ffffff_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_glass\_75\_dadada\_1x400.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-bg_glass_75_dadada_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_glass\_75\_e6e6e6\_1x400.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-bg_glass_75_e6e6e6_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_glass\_95\_fef1ec\_1x400.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-bg_glass_95_fef1ec_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-bg\_highlight-soft\_75\_cccccc\_1x100.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-icons\_222222\_256x240.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-icons_222222_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-icons\_2e83ff\_256x240.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-icons_2e83ff_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-icons\_454545\_256x240.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-icons_454545_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-icons\_888888\_256x240.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-icons_888888_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/images/ui-icons\_cd0a0a\_256x240.png](/browser/cm-pop-up-banners/trunk/backend/assets/css/images/ui-icons_cd0a0a_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/jquery-ui-tabs.css](/browser/cm-pop-up-banners/trunk/backend/assets/css/jquery-ui-tabs.css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/statistics-custom.css](/browser/cm-pop-up-banners/trunk/backend/assets/css/statistics-custom.css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/css/statistics-preloader.css](/browser/cm-pop-up-banners/trunk/backend/assets/css/statistics-preloader.css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images](/browser/cm-pop-up-banners/trunk/backend/assets/images?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/01\_statistics\_daily\_report.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/01_statistics_daily_report.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/02\_statistics\_report\_by\_period.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/02_statistics_report_by_period.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/03\_statistics\_access\_log.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/03_statistics_access_log.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/04\_import\_and\_export.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/04_import_and_export.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/arrowW\_r.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/arrowW_r.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/bootstrap-colorpicker](/browser/cm-pop-up-banners/trunk/backend/assets/images/bootstrap-colorpicker?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/bootstrap-colorpicker/alpha.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/bootstrap-colorpicker/alpha.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/bootstrap-colorpicker/hue.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/bootstrap-colorpicker/hue.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/bootstrap-colorpicker/saturation.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/bootstrap-colorpicker/saturation.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/fileIcon.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/fileIcon.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/header\_topBg.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/header_topBg.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/helpBg.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/helpBg.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/i\_icon.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/i_icon.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/logo.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/logo.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/menu-icons-separator.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/menu-icons-separator.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/menu-icons.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/menu-icons.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/scroll\_Down2.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/scroll_Down2.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/scroll\_Up2.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/scroll_Up2.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/sort\_asc.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/sort_asc.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/sort\_both.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/sort_both.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/sort\_desc.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/sort_desc.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/images/tabsBg.png](/browser/cm-pop-up-banners/trunk/backend/assets/images/tabsBg.png?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js](/browser/cm-pop-up-banners/trunk/backend/assets/js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/addesigner.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/addesigner.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/bootstrap-colorpicker.min.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/bootstrap-colorpicker.min.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/bootstrap.min.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/bootstrap.min.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/cm-color-picker.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/cm-color-picker.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/cm-popupflyin-backend.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/cm-popupflyin-backend.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/dataTables.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/dataTables.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/flot](/browser/cm-pop-up-banners/trunk/backend/assets/js/flot?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/flot/jquery.flot.axislabels.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/flot/jquery.flot.axislabels.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/flot/jquery.flot.categories.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/flot/jquery.flot.categories.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/flot/jquery.flot.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/flot/jquery.flot.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/flot/jquery.flot.pie.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/flot/jquery.flot.pie.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/flot/jquery.flot.time.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/flot/jquery.flot.time.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/flot/jquery.flot.tooltip.min.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/flot/jquery.flot.tooltip.min.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/jquery.jscrollpane.min.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/jquery.jscrollpane.min.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/jquery.mousewheel.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/jquery.mousewheel.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/js/statistics-custom.js](/browser/cm-pop-up-banners/trunk/backend/assets/js/statistics-custom.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor](/browser/cm-pop-up-banners/trunk/backend/assets/vendor?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2/LICENSE.md](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2/LICENSE.md?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2/css](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2/css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2/css/index.php](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2/css/index.php?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2/css/select2.css](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2/css/select2.css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2/css/select2.min.css](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2/css/select2.min.css?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2/css/select2.min.css\_](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2/css/select2.min.css_?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2/index.php](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2/index.php?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2/js](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2/js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2/js/index.php](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2/js/index.php?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2/js/select2.full.js](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2/js/select2.full.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2/js/select2.full.min.js](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2/js/select2.full.min.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/assets/vendor/select2/js/select2.min.js](/browser/cm-pop-up-banners/trunk/backend/assets/vendor/select2/js/select2.min.js?rev=3191536 "Show entry in browser")
  (added)
* [backend/classes](/browser/cm-pop-up-banners/trunk/backend/classes?rev=3191536 "Show entry in browser")
  (added)
* [backend/classes/CMPOPFLY\_Import\_Export.php](/browser/cm-pop-up-banners/trunk/backend/classes/CMPOPFLY_Import_Export.php?rev=3191536 "Show entry in browser")
  (added)
* [backend/classes/CMPopUpBannersBackend.php](/browser/cm-pop-up-banners/trunk/backend/classes/CMPopUpBannersBackend.php?rev=3191536 "Show entry in browser")
  (added)
* [backend/classes/ViewHelper.php](/browser/cm-pop-up-banners/trunk/backend/classes/ViewHelper.php?rev=3191536 "Show entry in browser")
  (added)
* [backend/views](/browser/cm-pop-up-banners/trunk/backend/views?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/about.phtml](/browser/cm-pop-up-banners/trunk/backend/views/about.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/addesigner.phtml](/browser/cm-pop-up-banners/trunk/backend/views/addesigner.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/export.phtml](/browser/cm-pop-up-banners/trunk/backend/views/export.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/import\_export.phtml](/browser/cm-pop-up-banners/trunk/backend/views/import_export.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/nav.phtml](/browser/cm-pop-up-banners/trunk/backend/views/nav.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/preview.phtml](/browser/cm-pop-up-banners/trunk/backend/views/preview.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/statistics](/browser/cm-pop-up-banners/trunk/backend/views/statistics?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/statistics.phtml](/browser/cm-pop-up-banners/trunk/backend/views/statistics.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/statistics/access\_log.phtml](/browser/cm-pop-up-banners/trunk/backend/views/statistics/access_log.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/statistics/daily\_report.phtml](/browser/cm-pop-up-banners/trunk/backend/views/statistics/daily_report.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/statistics/no\_data.phtml](/browser/cm-pop-up-banners/trunk/backend/views/statistics/no_data.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/statistics/report\_by\_month.phtml](/browser/cm-pop-up-banners/trunk/backend/views/statistics/report_by_month.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/statistics/report\_by\_period.phtml](/browser/cm-pop-up-banners/trunk/backend/views/statistics/report_by_period.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/statistics/top.phtml](/browser/cm-pop-up-banners/trunk/backend/views/statistics/top.phtml?rev=3191536 "Show entry in browser")
  (added)
* [backend/views/template.phtml](/browser/cm-pop-up-banners/trunk/backend/views/template.phtml?rev=3191536 "Show entry in browser")
  (added)
* [cm-pop-up-banners-for-wordpress.php](/browser/cm-pop-up-banners/trunk/cm-pop-up-banners-for-wordpress.php?rev=3191536 "Show entry in browser")
  (added)
* [frontend](/browser/cm-pop-up-banners/trunk/frontend?rev=3191536 "Show entry in browser")
  (added)
* [frontend/assets](/browser/cm-pop-up-banners/trunk/frontend/assets?rev=3191536 "Show entry in browser")
  (added)
* [frontend/assets/css](/browser/cm-pop-up-banners/trunk/frontend/assets/css?rev=3191536 "Show entry in browser")
  (added)
* [frontend/assets/css/cm-popupflyin.css](/browser/cm-pop-up-banners/trunk/frontend/assets/css/cm-popupflyin.css?rev=3191536 "Show entry in browser")
  (added)
* [frontend/classes](/browser/cm-pop-up-banners/trunk/frontend/classes?rev=3191536 "Show entry in browser")
  (added)
* [frontend/classes/CMPopUpBannersFrontend.php](/browser/cm-pop-up-banners/trunk/frontend/classes/CMPopUpBannersFrontend.php?rev=3191536 "Show entry in browser")
  (added)
* [libs](/browser/cm-pop-up-banners/trunk/libs?rev=3191536 "Show entry in browser")
  (added)
* [libs/ip2locationlite.php](/browser/cm-pop-up-banners/trunk/libs/ip2locationlite.php?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy](/browser/cm-pop-up-banners/trunk/libs/wpalchemy?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/CREDITS](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/CREDITS?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/LICENSE](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/LICENSE?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/README.md](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/README.md?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/assets](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/assets?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/assets/kia-metabox.js](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/assets/kia-metabox.js?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/assets/meta.css](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/assets/meta.css?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/class](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/class?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/class/mediaaccess.php](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/class/mediaaccess.php?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/class/metabox.php](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/class/metabox.php?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/metaboxes](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/metaboxes?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/metaboxes/cm-help-items-options.php](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/metaboxes/cm-help-items-options.php?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/metaboxes/cm-help-items.php](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/metaboxes/cm-help-items.php?rev=3191536 "Show entry in browser")
  (added)
* [libs/wpalchemy/wpalchemy.php](/browser/cm-pop-up-banners/trunk/libs/wpalchemy/wpalchemy.php?rev=3191536 "Show entry in browser")
  (added)
* [package](/browser/cm-pop-up-banners/trunk/package?rev=3191536 "Show entry in browser")
  (added)
* [package/CMWPPluginssuite.png](/browser/cm-pop-up-banners/trunk/package/CMWPPluginssuite.png?rev=3191536 "Show entry in browser")
  (added)
* [package/cminds-free.php](/browser/cm-pop-up-banners/trunk/package/cminds-free.php?rev=3191536 "Show entry in browser")
  (added)
* [package/cminds-plugin-config.php](/browser/cm-pop-up-banners/trunk/package/cminds-plugin-config.php?rev=3191536 "Show entry in browser")
  (added)
* [package/css](/browser/cm-pop-up-banners/trunk/package/css?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images](/browser/cm-pop-up-banners/trunk/package/css/images?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/animated-overlay.gif](/browser/cm-pop-up-banners/trunk/package/css/images/animated-overlay.gif?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_0\_aaaaaa\_40x100.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-bg_flat_0_aaaaaa_40x100.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_75\_ffffff\_40x100.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-bg_flat_75_ffffff_40x100.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_55\_fbf9ee\_1x400.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-bg_glass_55_fbf9ee_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_65\_ffffff\_1x400.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-bg_glass_65_ffffff_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_dadada\_1x400.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-bg_glass_75_dadada_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_e6e6e6\_1x400.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-bg_glass_75_e6e6e6_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_95\_fef1ec\_1x400.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-bg_glass_95_fef1ec_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_highlight-soft\_75\_cccccc\_1x100.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_222222\_256x240.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-icons_222222_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_2e83ff\_256x240.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-icons_2e83ff_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_454545\_256x240.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-icons_454545_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_888888\_256x240.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-icons_888888_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_cd0a0a\_256x240.png](/browser/cm-pop-up-banners/trunk/package/css/images/ui-icons_cd0a0a_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [package/css/jquery-ui.min.css](/browser/cm-pop-up-banners/trunk/package/css/jquery-ui.min.css?rev=3191536 "Show entry in browser")
  (added)
* [package/css/jquery-ui.min.min.css](/browser/cm-pop-up-banners/trunk/package/css/jquery-ui.min.min.css?rev=3191536 "Show entry in browser")
  (added)
* [package/css/main.css](/browser/cm-pop-up-banners/trunk/package/css/main.css?rev=3191536 "Show entry in browser")
  (added)
* [package/css/main.min.css](/browser/cm-pop-up-banners/trunk/package/css/main.min.css?rev=3191536 "Show entry in browser")
  (added)
* [package/css/rolling@2x.gif](/browser/cm-pop-up-banners/trunk/package/css/rolling%402x.gif?rev=3191536 "Show entry in browser")
  (added)
* [package/js](/browser/cm-pop-up-banners/trunk/package/js?rev=3191536 "Show entry in browser")
  (added)
* [package/js/froogaloop.js](/browser/cm-pop-up-banners/trunk/package/js/froogaloop.js?rev=3191536 "Show entry in browser")
  (added)
* [package/js/mailerlite.js](/browser/cm-pop-up-banners/trunk/package/js/mailerlite.js?rev=3191536 "Show entry in browser")
  (added)
* [package/views](/browser/cm-pop-up-banners/trunk/package/views?rev=3191536 "Show entry in browser")
  (added)
* [package/views/99suite.png](/browser/cm-pop-up-banners/trunk/package/views/99suite.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/Hound2.png](/browser/cm-pop-up-banners/trunk/package/views/Hound2.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/SEOHoundIcon.png](/browser/cm-pop-up-banners/trunk/package/views/SEOHoundIcon.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/WPmembership.png](/browser/cm-pop-up-banners/trunk/package/views/WPmembership.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/answers.png](/browser/cm-pop-up-banners/trunk/package/views/answers.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/appointments\_icon.png](/browser/cm-pop-up-banners/trunk/package/views/appointments_icon.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/banner\_yearly-membership\_220px.png](/browser/cm-pop-up-banners/trunk/package/views/banner_yearly-membership_220px.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/businessdir.png](/browser/cm-pop-up-banners/trunk/package/views/businessdir.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/deactivation\_feedback\_modal.php](/browser/cm-pop-up-banners/trunk/package/views/deactivation_feedback_modal.php?rev=3191536 "Show entry in browser")
  (added)
* [package/views/downloads.png](/browser/cm-pop-up-banners/trunk/package/views/downloads.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/faq.png](/browser/cm-pop-up-banners/trunk/package/views/faq.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/img](/browser/cm-pop-up-banners/trunk/package/views/img?rev=3191536 "Show entry in browser")
  (added)
* [package/views/img/Vector.png](/browser/cm-pop-up-banners/trunk/package/views/img/Vector.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/img/assets.png](/browser/cm-pop-up-banners/trunk/package/views/img/assets.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/img/circle.png](/browser/cm-pop-up-banners/trunk/package/views/img/circle.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/img/confetti.png](/browser/cm-pop-up-banners/trunk/package/views/img/confetti.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/img/v1.png](/browser/cm-pop-up-banners/trunk/package/views/img/v1.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/img/v2.png](/browser/cm-pop-up-banners/trunk/package/views/img/v2.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner.jpg](/browser/cm-pop-up-banners/trunk/package/views/keywordhoundbanner.jpg?rev=3191536 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner1.png](/browser/cm-pop-up-banners/trunk/package/views/keywordhoundbanner1.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/no.png](/browser/cm-pop-up-banners/trunk/package/views/no.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/plugin\_compare\_table.php](/browser/cm-pop-up-banners/trunk/package/views/plugin_compare_table.php?rev=3191536 "Show entry in browser")
  (added)
* [package/views/popup.png](/browser/cm-pop-up-banners/trunk/package/views/popup.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/registration.php](/browser/cm-pop-up-banners/trunk/package/views/registration.php?rev=3191536 "Show entry in browser")
  (added)
* [package/views/routes.png](/browser/cm-pop-up-banners/trunk/package/views/routes.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/searchreplace.png](/browser/cm-pop-up-banners/trunk/package/views/searchreplace.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/tooltip.png](/browser/cm-pop-up-banners/trunk/package/views/tooltip.png?rev=3191536 "Show entry in browser")
  (added)
* [package/views/userguide\_free.php](/browser/cm-pop-up-banners/trunk/package/views/userguide_free.php?rev=3191536 "Show entry in browser")
  (added)
* [package/views/videolessons.png](/browser/cm-pop-up-banners/trunk/package/views/videolessons.png?rev=3191536 "Show entry in browser")
  (added)
* [readme.txt](/browser/cm-pop-up-banners/trunk/readme.txt?rev=3191536 "Show entry in browser")
  (added)
* [shared](/browser/cm-pop-up-banners/trunk/shared?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets](/browser/cm-pop-up-banners/trunk/shared/assets?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css](/browser/cm-pop-up-banners/trunk/shared/assets/css?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/base.css](/browser/cm-pop-up-banners/trunk/shared/assets/css/base.css?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/animated-overlay.gif](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/animated-overlay.gif?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-bg\_flat\_0\_aaaaaa\_40x100.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-bg_flat_0_aaaaaa_40x100.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-bg\_flat\_75\_ffffff\_40x100.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-bg_flat_75_ffffff_40x100.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-bg\_glass\_55\_fbf9ee\_1x400.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-bg_glass_55_fbf9ee_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-bg\_glass\_65\_ffffff\_1x400.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-bg_glass_65_ffffff_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-bg\_glass\_75\_dadada\_1x400.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-bg_glass_75_dadada_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-bg\_glass\_75\_e6e6e6\_1x400.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-bg_glass_75_e6e6e6_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-bg\_glass\_95\_fef1ec\_1x400.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-bg_glass_95_fef1ec_1x400.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-bg\_highlight-soft\_75\_cccccc\_1x100.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-bg_highlight-soft_75_cccccc_1x100.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-icons\_222222\_256x240.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-icons_222222_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-icons\_2e83ff\_256x240.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-icons_2e83ff_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-icons\_444444\_256x240.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-icons_444444_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-icons\_454545\_256x240.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-icons_454545_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-icons\_555555\_256x240.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-icons_555555_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-icons\_777620\_256x240.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-icons_777620_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-icons\_777777\_256x240.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-icons_777777_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-icons\_888888\_256x240.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-icons_888888_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-icons\_cc0000\_256x240.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-icons_cc0000_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-icons\_cd0a0a\_256x240.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-icons_cd0a0a_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/images/ui-icons\_ffffff\_256x240.png](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/images/ui-icons_ffffff_256x240.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/jquery-ui-1.10.3.custom.css](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/jquery-ui-1.10.3.custom.css?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/jquery-ui-1.10.3.custom.min.css](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/jquery-ui-1.10.3.custom.min.css?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/jquery-ui-1.12.1.css](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/jquery-ui-1.12.1.css?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/jquery-ui/smoothness/jquery-ui-1.12.1.min.css](/browser/cm-pop-up-banners/trunk/shared/assets/css/jquery-ui/smoothness/jquery-ui-1.12.1.min.css?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/css/ouibounce.css](/browser/cm-pop-up-banners/trunk/shared/assets/css/ouibounce.css?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images](/browser/cm-pop-up-banners/trunk/shared/assets/images?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/arrow\_right.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/arrow_right.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/article.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/article.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/btn-close-dark.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/btn-close-dark.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/btn-close-gray.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/btn-close-gray.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/btn-close-lightgray.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/btn-close-lightgray.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/btn-close.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/btn-close.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/bx\_loader.gif](/browser/cm-pop-up-banners/trunk/shared/assets/images/bx_loader.gif?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/close.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/close.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/close\_modal.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/close_modal.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/controls.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/controls.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/external-bak.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/external-bak.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/external.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/external.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/grey\_headphones.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/grey_headphones.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/01\_icon grey 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/01_icon%20grey%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/01\_icon white 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/01_icon%20white%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/02\_icon grey 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/02_icon%20grey%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/02\_icon white 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/02_icon%20white%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/03\_icon grey 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/03_icon%20grey%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/03\_icon white 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/03_icon%20white%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/04\_icon grey 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/04_icon%20grey%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/04\_icon white 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/04_icon%20white%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/05\_icon grey 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/05_icon%20grey%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/05\_icon white 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/05_icon%20white%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/06\_icon grey 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/06_icon%20grey%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/06\_icon white 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/06_icon%20white%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/11\_icon grey 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/11_icon%20grey%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/11\_icon white 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/11_icon%20white%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/12\_icon grey 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/12_icon%20grey%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/icons/12\_icon white 30x30.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/icons/12_icon%20white%2030x30.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/plus.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/plus.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/polygon-dark.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/polygon-dark.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/polygon.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/polygon.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/scroll\_down.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/scroll_down.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/scroll\_up.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/scroll_up.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/images/white\_headphones.png](/browser/cm-pop-up-banners/trunk/shared/assets/images/white_headphones.png?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/js](/browser/cm-pop-up-banners/trunk/shared/assets/js?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/js/flyingBottom.js](/browser/cm-pop-up-banners/trunk/shared/assets/js/flyingBottom.js?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/js/flyingCustom.js](/browser/cm-pop-up-banners/trunk/shared/assets/js/flyingCustom.js?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/js/jquery.fullscreen-popup.js](/browser/cm-pop-up-banners/trunk/shared/assets/js/jquery.fullscreen-popup.js?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/js/ouibounce.js](/browser/cm-pop-up-banners/trunk/shared/assets/js/ouibounce.js?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/js/popupCustom.js](/browser/cm-pop-up-banners/trunk/shared/assets/js/popupCustom.js?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/js/scrollspy.js](/browser/cm-pop-up-banners/trunk/shared/assets/js/scrollspy.js?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/media](/browser/cm-pop-up-banners/trunk/shared/assets/media?rev=3191536 "Show entry in browser")
  (added)
* [shared/assets/media/default\_popup\_sound.mp3](/browser/cm-pop-up-banners/trunk/shared/assets/media/default_popup_sound.mp3?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes](/browser/cm-pop-up-banners/trunk/shared/classes?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/CMPopUpBannersShared.php](/browser/cm-pop-up-banners/trunk/shared/classes/CMPopUpBannersShared.php?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/Labels.php](/browser/cm-pop-up-banners/trunk/shared/classes/Labels.php?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/labels.tsv](/browser/cm-pop-up-banners/trunk/shared/classes/labels.tsv?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings](/browser/cm-pop-up-banners/trunk/shared/classes/settings?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/CMPOPFLY\_Settings.php](/browser/cm-pop-up-banners/trunk/shared/classes/settings/CMPOPFLY_Settings.php?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/Settings.php](/browser/cm-pop-up-banners/trunk/shared/classes/settings/Settings.php?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/SettingsView.php](/browser/cm-pop-up-banners/trunk/shared/classes/settings/SettingsView.php?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/assets](/browser/cm-pop-up-banners/trunk/shared/classes/settings/assets?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/assets/css](/browser/cm-pop-up-banners/trunk/shared/classes/settings/assets/css?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/assets/css/select2.min.css](/browser/cm-pop-up-banners/trunk/shared/classes/settings/assets/css/select2.min.css?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/assets/css/settings.css](/browser/cm-pop-up-banners/trunk/shared/classes/settings/assets/css/settings.css?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/assets/js](/browser/cm-pop-up-banners/trunk/shared/classes/settings/assets/js?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/assets/js/select2.min.js](/browser/cm-pop-up-banners/trunk/shared/classes/settings/assets/js/select2.min.js?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/assets/js/settings.js](/browser/cm-pop-up-banners/trunk/shared/classes/settings/assets/js/settings.js?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/config.php](/browser/cm-pop-up-banners/trunk/shared/classes/settings/config.php?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/fields](/browser/cm-pop-up-banners/trunk/shared/classes/settings/fields?rev=3191536 "Show entry in browser")
  (added)
* [shared/classes/settings/view.php](/browser/cm-pop-up-banners/trunk/shared/classes/settings/view.php?rev=3191536 "Show entry in browser")
  (added)
* [shared/functions.php](/browser/cm-pop-up-banners/trunk/shared/functions.php?rev=3191536 "Show entry in browser")
  (added)

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3191536)
* [Zip Archive](?format=zip&new=3191536)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from wordpress.org_31cef28b_20250114_205643.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

CM Pop-Up Banners for WordPress

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fcm-pop-up-banners&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fcm-pop-up-banners&locale=en_US)

Search plugins

![](https://ps.w.org/cm-pop-up-banners/assets/banner-772x250.png?rev=1203180)
![](https://ps.w.org/cm-pop-up-banners/assets/icon-256x256.png?rev=2072153)
# CM Pop-Up Banners for WordPress

By CreativeMindsSolutions

[Download](https://downloads.wordpress.org/plugin/cm-pop-up-banners.zip)

* [Details](https://wordpress.org/plugins/cm-pop-up-banners/#description)
* [Reviews](https://wordpress.org/plugins/cm-pop-up-banners/#reviews)
* [Installation](https://wordpress.org/plugins/cm-pop-up-banners/#installation)
* [Development](https://wordpress.org/plugins/cm-pop-up-banners/#developers)

[Support](https://wordpress.org/support/plugin/cm-pop-up-banners/)

## Description

[Pro Plugin Page](https://www.cminds.com/wordpress-plugins-library/cm-pop-up-banners-plugin-for-wordpress/) | [Videos](https://www.videolessonsplugin.com/video-lesson/lesson/popup-banners-plugin/) | [User Guide](https://creativeminds.helpscoutdocs.com/category/350-pop-up-banners-cmpb) | [Demo](https://www.knowledgetrail.com/pop-up-banner-2/)

**Improve the user experience of your WordPress website by integrating responsive popup campaigns that are easy to use. Boost the effectiveness of promoting your products or services by incorporating responsive popup alerts.**

The popup plugin offers support for different popup types such as HTML popups, image popups, and video popups. It includes an ad designer that allows users to create and show popup content customized to their preferences.

Furthermore, users have the option to select the post type where the popup will be displayed, and with the pro version, they can even choose a specific post or page for their popup to appear on.

### Popup Maker Plugin Premium Edition

The [Popup Maker Plugin Premium editions](https://www.cminds.com/wordpress-plugins-library/cm-pop-up-banners-plugin-for-wordpress/) includes even more powerful features, such as: forms builder and forms support, more advanced popup trigers, more options to manage popup campaigns, statistics and much more.

### Popup Maker Plugin Introduction Video

### Popup Plugin Use Cases

* **Conversion** – Engage your visitors by providing them discount codes on pages of specific categories, such as beauty products, law practice or healthcare services
* **Lead Generation** – Add a “Subscribe” popup with and embedded form shown only to guest users and boost your newsletter user base
* **Advertising** – Display random AdSense campaigns based on different criteria. For more advanced advertisement use, we recommend the Advanced Ad Campaigns Manager and Server Plugin for WordPress
* **Multimedia Hub** – Include banners with images, galleries, videos and HTML content anywhere on your site

### Basic Popup Plugin Features

* Create Popup Campaigns
* Customize popups with HTML, images and videos
* AdDesigner: Create a custom popup look to match your site’s branding
* Restrict by Page/Post/Custom Post Types: Choose which pages or posts your popup will appear on

### Popup Plugin usage instructions

* 1) Go to “Add New Campaign”
* 2) Fill the “Title” of the campaign and “content” of one or many Advertisement Items
* 3) Click “Add Advertisement Item” to dynamically add more items
* 4) Check “Show on every page”
* 5) Click “Save Changes”
* 6) Go to any page of your website
* 7) Watch the popup with Advertisement Item
* 8) Close the popup by clicking the “X” icon

### Pro Version Features

> [Pro Version Detailed Features List](https://www.cminds.com/wordpress-plugins-library/pop-up-banners-plugin-for-wordpress/#features)
>
> * Extended Set of PopUp Types: Choose between popup, fly-in and full-screen options
> * Campaign Statistics: Track popup clicks and impressions in an easy-to-use popup report tab
> * Restrict by URL: Choose specific URL your pop up campaign will appear on
> * Responsive: Fully responsive with the option to turn display of popups on mobile off
> * Restrict by Period: Choose the start and end times for your popup ad campaign to run
> * Restrict by days of the week: Define specific days of the week that the popup campaign will run on
> * Random popup Campaigns
> * Custom Effects: Define PopUp visual and audio effects
> * Add Delay: Add a delay between the time that the page loads and the popup appears
> * Option to setup display interval: On every page load, one per each page, and more
> * Trigger popup or fly-in on JS hover or click events
> * Page leave intent detection PopUp: Detect when user moves cursor to close the tab and in such event show the popup
> * Inactivity detection: You can show the popup when user is inactive for X seconds (not moving the mouse and not typing)
> * Show X amount of times per customer: You can define that the campaign will show X amount of time per a specific customer until it stops
> * Target Specific Users: Set pop up campaign to target logged-in or non-logged-in users

### Follow Us

[Blog](https://www.cminds.com/category/wordpress/) | [Twitter](http://twitter.com/cmplugins) | [LinkedIn](https://www.linkedin.com/company/creativeminds) | [YouTube](https://www.youtube.com/user/cmindschannel) | [Pinterest](http://www.pinterest.com/cmplugins/) | [FaceBook](https://www.facebook.com/cmplugins/)

### Suggested WordPress Plugins by CreativeMinds

List of all [WordPress Plugins](https://www.cminds.com) by CreativeMinds

* [CM Ad Changer](https://adchanger.cminds.com/) – Manage, Track and Report Advertising Campaigns Across Sites. Can turn your Turn your WP into an Ad Server.
* [CM ToolTip Glossary](https://glossaryplugin.com/) – Easily creates a Glossary, Encyclopaedia or Dictionary of your website’s terms and shows them as a tooltip in posts and pages when hovering. With many more powerful features.
* [CM Restrict Content](http://restrictcontent.com/) – A full-featured, powerful membership solution and content restriction plugin for WordPress. Support access by role to content on your site.
* [CM OnBoarding](https://onboardingplugin.com/) – Superb Guidance tool which improves the online experience and the user satisfaction.

## Screenshots

* [![](https://ps.w.org/cm-pop-up-banners/assets/screenshot-1.png?rev=1173050)](https://ps.w.org/cm-pop-up-banners/assets/screenshot-1.png?rev=1173050)

  Example of a Popup.
* [![](https://ps.w.org/cm-pop-up-banners/assets/screenshot-2.png?rev=1173049)](https://ps.w.org/cm-pop-up-banners/assets/screenshot-2.png?rev=1173049)

  Graph showing PopUp campaign activity (pro only).
* [![](https://ps.w.org/cm-pop-up-banners/assets/screenshot-3.png?rev=1173048)](https://ps.w.org/cm-pop-up-banners/assets/screenshot-3.png?rev=1173048)

  Statistics of campaing and popup activity (pro only).
* [![](https://ps.w.org/cm-pop-up-banners/assets/screenshot-4.png?rev=1173044)](https://ps.w.org/cm-pop-up-banners/assets/screenshot-4.png?rev=1173044)

  Pop up ampaign editing screen.
* [![](https://ps.w.org/cm-pop-up-banners/assets/screenshot-5.png?rev=1173047)](https://ps.w.org/cm-pop-up-banners/assets/screenshot-5.png?rev=1173047)

  List of all popup campaings in admin dashboard.

## Installation

1. Upload `cm-pop-up-banners-for-wordpress` folder to the `/wp-content/plugins/` directory
2. Activate the Popup plugin through the ‘Plugins’ menu in WordPress.

## Reviews

![](https://secure.gravatar.com/avatar/648f9b04d926961267cbe8b8ed1909da945880d167b4d8d16b2f3b7847d0e62e?s=60&d=retro&r=g)
### [Top](https://wordpress.org/support/topic/top-1027/)

[iwcom](https://profiles.wordpress.org/iwcom/ "Posts by iwcom")
February 23, 2021

the best plugin for popup !

![](https://secure.gravatar.com/avatar/a18251584a62cc862a8057428935976a963cee7589bf06dc570c618b49c08383?s=60&d=retro&r=g)
### [Do NOT buy](https://wordpress.org/support/topic/do-not-buy-24/)

[neils09](https://profiles.wordpress.org/neils09/ "Posts by neils09")
January 5, 2021

Do not buy this plugin. The functionality is extremely basic, and their customer support is terrible. It was lacking in such basic functionality that I had to delete it. FYI their “100% guarantee” that they “stand behind their products” is meaningless. I asked for a refund because of the lack of basic functionality and they flat out refused me. This plugin is absolutely not worth buying.

![](https://secure.gravatar.com/avatar/89a1896cba46b35e2cc0b23129c7f07eef764f8e3a4e90526cca27b0bebbf0d6?s=60&d=retro&r=g)
### [Customer service is horrible.](https://wordpress.org/support/topic/customer-service-is-horrible/)

[Tinelle Louis](https://profiles.wordpress.org/cocoabunny/ "Posts by Tinelle Louis")
April 10, 2020
2 replies

There is a reason why all of their plugins are showing “untested” with the current WordPress release. They don’t update any of their plugins after you buy them. DO NOT BUY ANY ADD-ONS from this company. It doesn’t matter if the plugin has a security issue, they will find a reason why they shouldn’t give your money back – even if you asked 1 day later.

![](https://secure.gravatar.com/avatar/36d3fa1fc51c3a61ce32e3d8c407a867cd3de2757992533df90a7e16cabb31ed?s=60&d=retro&r=g)
### [Don’t waste your time](https://wordpress.org/support/topic/dont-waste-your-time-75/)

[montogro](https://profiles.wordpress.org/montogro/ "Posts by montogro")
February 15, 2019

Doesn’t even work, everything shown on the video is unavailable in 90%.

![](https://secure.gravatar.com/avatar/eb14135b13f0d6dce7908294dbe94eb3a2aa42ad91ea6b07752d6b58d2568a9c?s=60&d=retro&r=g)
### [Broken. No settings for frequency.](https://wordpress.org/support/topic/broken-no-settings-for-frequency/)

[thelastequis](https://profiles.wordpress.org/thelastequis/ "Posts by thelastequis")
January 24, 2019

I searched high and low for a pop-up plugin that didn’t force me to use a template. When I came across this one, it seemed like a good fit. Unfortunately, the pop-up doesn’t display the background overlay and hovers half off the top of the screen. Completely unusable.
Just to make it better, it offers no settings options for frequency of appearance, how long to delay, or any other standard settings like these.
Disappointed.

![](https://secure.gravatar.com/avatar/a4a90a615782619c678ca2d4de35bf1e96343af3b0f6695a619620b377d9a227?s=60&d=retro&r=g)
### [pop up](https://wordpress.org/support/topic/pop-up-24/)

[zonebgd](https://profiles.wordpress.org/zonebgd/ "Posts by zonebgd")
July 19, 2017

It is what I want… Work fine, no errors… Thanks

[Read all 12 reviews](https://wordpress.org/support/plugin/cm-pop-up-banners/reviews/)
## Contributors & Developers

“CM Pop-Up Banners for WordPress” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/5c3b7aa278f7c4ae0663785f14a6ee3c07aab51ed06a71be224c19748c46f978?s=32&d=mm&r=g) [CreativeMindsSolutions](https://profiles.wordpress.org/creativemindssolutions/)

“CM Pop-Up Banners for WordPress” has been translated into 2 locales. Thank you to [the translators](https://translate.wordpress.org/projects/wp-plugins/cm-pop-up-banners/contributors) for their contributions.

[Translate “CM Pop-Up Banners for WordPress” into your language.](https://translate.wordpress.org/projects/wp-plugins/cm-pop-up-banners)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/cm-pop-up-banners/), check out the [SVN repository](https://plugins.svn.wordpress.org/cm-pop-up-banners/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/cm-pop-up-banners/) by [RSS](https://plugins.trac.wordpress.org/log/cm-pop-up-banners/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### 1.7.7

Release Date: 07 Jan 2025

\* Fixed vulnerability issue

#### 1.7.6

Release Date: 18 Nov 2024

\* Fixed security (medium) issue

#### 1.7.5

Release Date: 06 Nov 2024

\* Added pro version settings as a showcase

#### 1.7.4

Release Date: 09 Oct 2024

\* Fixed security issues

#### 1.7.3

Release Date: 19 Aug 2024

\* Used wp\_add\_inline\_script() instead of wp\_localize\_script()

#### 1.7.2

Release Date: 05 Aug 2024

\* Resolved calling get\_class() without arguments is deprecated issue

#### 1.7.1

Release Date: 30 Jul 2024

\* Fixed multiple encoded content issue with popup

#### 1.7.0

Release Date: 22 Jul 2024

\* Fixed content issue with popup

#### 1.6.9

Release Date: 10 Jul 2024

\* Fixed encoded content issue with popup content

#### 1.6.8

Release Date: 23 Jun 2024

\* Fixed vulnerability issue with popup content

#### 1.6.7

Release Date: 13 Jun 2024

\* Fixed bug related to strip HTML tags from banner content

#### 1.6.6

Release Date: 31 May 2024

\* Fixed old saved campaign data

#### 1.6.5

Release Date: 25 May 2024

\* Fixed bug

#### 1.6.4

Release Date: 21 May 2024

\* Fixed bug related to activity

#### 1.6.3

Release Date: 18 May 2024

\* Fixed security issues

#### 1.6.2

Release Date: 28 December 2023

\* Fixed error

#### 1.6.1

Release Date: 25 December 2023

\* Update package info

#### 1.6.0

Release Date: 25 Apr 2023

\* Fixed bug related to statistics

#### 1.5.10

Release Date: 22nd Mar 2023

\* Update package info

#### 1.5.9

Release Date: 2nd Nov 2022

\* Update support links

#### 1.5.8

Release Date: 2nd Nov 2022

\* Update shortcode in settings view file

## Meta

* Version **1.7.7**
* Last updated **1 week ago**
* Active installations **10,000+**
* WordPress version **5.4.0 or higher**
* Tested up to **6.7.1**
* PHP version **5.2.4 or higher**
* Languages
  See all 3

  Close

  [English (US)](https://wordpress.org/plugins/cm-pop-up-banners/), [French (France)](https://fr.wordpress.org/plugins/cm-pop-up-banners/), and [Russian](https://ru.wordpress.org/plugins/cm-pop-up-banners/).

  [Translate into your language](https://translate.wordpress.org/projects/wp-plugins/cm-pop-up-banners)
* Tags [popup](https://wordpress.org/plugins/tags/popup/)[popup builder](https://wordpress.org/plugins/tags/popup-builder/)[popup maker](https://wordpress.org/plugins/tags/popup-maker/)[popups](https://wordpress.org/plugins/tags/popups/)[wp popup](https://wordpress.org/plugins/tags/wp-popup/)
* [Advanced View](https://wordpress.org/plugins/cm-pop-up-banners/advanced/)

## Ratings

3.6 out of 5 stars.

* [7 5-star reviews
  5 stars

  7](https://wordpress.org/support/plugin/cm-pop-up-banners/reviews/?filter=5)
* [1 4-star review
  4 stars

  1](https://wordpress.org/support/plugin/cm-pop-up-banners/reviews/?filter=4)
* [0 3-star reviews
  3 stars

  0](https://wordpress.org/support/plugin/cm-pop-up-banners/reviews/?filter=3)
* [0 2-star reviews
  2 stars

  0](https://wordpress.org/support/plugin/cm-pop-up-banners/reviews/?filter=2)
* [4 1-star reviews
  1 star

  4](https://wordpress.org/support/plugin/cm-pop-up-banners/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/cm-pop-up-banners/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/cm-pop-up-banners/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/5c3b7aa278f7c4ae0663785f14a6ee3c07aab51ed06a71be224c19748c46f978?s=32&d=mm&r=g) [CreativeMindsSolutions](https://profiles.wordpress.org/creativemindssolutions/)
## Support

Got something to say? Need help?

[View support forum](https://wordpress.org/support/plugin/cm-pop-up-banners/)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_ebcaf203_20250114_205645.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Multiple Plugins <= (Various Versions) - Reflected Cross-Site Scripting via cminds\_free\_guide Shortcode

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Multiple Plugins <= (Various Versions) - Reflected Cross-Site Scripting via cminds\_free\_guide Shortcode

6.1

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-11202](https://www.cve.org/CVERecord?id=CVE-2024-11202) |
| --- | --- |
| CVSS | 6.1 (Medium) |
| Publicly Published | November 25, 2024 |
| Last Updated | November 26, 2024 |
| Researcher | [Peter Thaleikis](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/spek) |

### Description

Multiple plugins for WordPress are vulnerable to Reflected Cross-Site Scripting via the cminds\_free\_guide shortcode in various versions due to insufficient input sanitization and output escaping. This makes it possible for unauthenticated attackers to inject arbitrary web scripts in pages that execute if they can successfully trick a user into performing an action such as clicking on a link.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/cm-pop-up-banners/trunk/package/cminds-free.php#L1471)
* [wordpress.org](https://wordpress.org/plugins/cm-pop-up-banners/#developers)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/cm-header-footer-script-loader/trunk/package/cminds-free.php#L1465)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/enhanced-tooltipglossary/trunk/package/cminds-free.php#L1465)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/cm-business-directory/trunk/package/cminds-free.php#L1465)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/cm-video-lesson-manager/trunk/package/cminds-free.php#L1465)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/cm-email-blacklist/trunk/package/cminds-free.php#L1465)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/cm-on-demand-search-and-replace/trunk/package/cminds-free.php#L1469)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3191536/)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3192416/)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3193808/)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3192354/)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3194393/)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3192808/)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3192381/)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fdetail%2Fmultiple-plugins-various-versions-reflected-cross-site-scripting-via-cminds-free-guide-shortcode&t=Multiple%20Plugins%20%3C%3D%20%28Various%20Versions%29%20-%20Reflected%20Cross-Site%20Scripting%20via%20cminds_free_guide%20Shortcode "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fdetail%2Fmultiple-plugins-various-versions-reflected-cross-site-scripting-via-cminds-free-guide-shortcode&text=Multiple%20Plugins%20%3C%3D%20%28Various%20Versions%29%20-%20Reflected%20Cross-Site%20Scripting%20via%20cminds_free_guide%20Shortcode "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fdetail%2Fmultiple-plugins-various-versions-reflected-cross-site-scripting-via-cminds-free-guide-shortcode "LinkedIn")
Email

## 7 affected software packages

#### [CM Business Directory Plugin – Business Listing Directory](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/cm-business-directory)

| Software Type | Plugin |
| --- | --- |
| Software Slug | cm-business-directory [(view on wordpress.org)](https://wordpress.org/plugins/cm-business-directory) |
| Patched? | Yes |
| Remediation | Update to version 1.4.2, or a newer patched version |
| Affected Version | * <= 1.4.1 |
| Patched Version | * 1.4.2 |

#### [CM Header & Footer Script Loader – Insert Script Plugin](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/cm-header-footer-script-loader)

| Software Type | Plugin |
| --- | --- |
| Software Slug | cm-header-footer-script-loader [(view on wordpress.org)](https://wordpress.org/plugins/cm-header-footer-script-loader) |
| Patched? | Yes |
| Remediation | Update to version 1.2.2, or a newer patched version |
| Affected Version | * <= 1.2.1 |
| Patched Version | * 1.2.2 |

#### [CM Pop-Up Banners for WordPress](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/cm-pop-up-banners)

| Software Type | Plugin |
| --- | --- |
| Software Slug | cm-pop-up-banners [(view on wordpress.org)](https://wordpress.org/plugins/cm-pop-up-banners) |
| Patched? | Yes |
| Remediation | Update to version 1.7.6, or a newer patched version |
| Affected Version | * <= 1.7.5 |
| Patched Version | * 1.7.6 |

#### [CM Tooltip Glossary](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/enhanced-tooltipglossary)

| Software Type | Plugin |
| --- | --- |
| Software Slug | enhanced-tooltipglossary [(view on wordpress.org)](https://wordpress.org/plugins/enhanced-tooltipglossary) |
| Patched? | Yes |
| Remediation | Update to version 4.3.12, or a newer patched version |
| Affected Version | * <= 4.3.11 |
| Patched Version | * 4.3.12 |

#### [CM WordPress Search And Replace Plugin](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/cm-on-demand-search-and-replace)

| Software Type | Plugin |
| --- | --- |
| Software Slug | cm-on-demand-search-and-replace [(view on wordpress.org)](https://wordpress.org/plugins/cm-on-demand-search-and-replace) |
| Patched? | Yes |
| Remediation | Update to version 1.4.3, or a newer patched version |
| Affected Version | * <= 1.4.2 |
| Patched Version | * 1.4.3 |

#### [Name: CM E-Mail Registration Blacklist](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/cm-email-blacklist)

| Software Type | Plugin |
| --- | --- |
| Software Slug | cm-email-blacklist [(view on wordpress.org)](https://wordpress.org/plugins/cm-email-blacklist) |
| Patched? | Yes |
| Remediation | Update to version 1.5.4, or a newer patched version |
| Affected Version | * <= 1.5.3 |
| Patched Version | * 1.5.4 |

#### [Video Lessons Manager – WordPress LMS Plugin](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/cm-video-lesson-manager)

| Software Type | Plugin |
| --- | --- |
| Software Slug | cm-video-lesson-manager [(view on wordpress.org)](https://wordpress.org/plugins/cm-video-lesson-manager) |
| Patched? | Yes |
| Remediation | Update to version 1.8.3, or a newer patched version |
| Affected Version | * <= 1.8.2 |
| Patched Version | * 1.8.3 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_cbd5df33_20250114_205640.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3193808)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3193807 "Changeset 3193807")
* [Next Changeset](/changeset/3193809 "Changeset 3193809") →

---

# Changeset 3193808

Timestamp:
11/21/2024 06:37:36 AM
([8 weeks](/timeline?from=2024-11-21T06%3A37%3A36Z&precision=second "See timeline at 11/21/2024 06:37:36 AM") ago)

Author:
CreativeMindsSolutions
Message:

release a new version

Location:
[cm-email-blacklist/trunk](/browser/cm-email-blacklist/trunk?rev=3193808)
Files:

108 added

* [backend](/browser/cm-email-blacklist/trunk/backend?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets](/browser/cm-email-blacklist/trunk/backend/assets?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets/css](/browser/cm-email-blacklist/trunk/backend/assets/css?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets/css/cmbl-get-pro.css](/browser/cm-email-blacklist/trunk/backend/assets/css/cmbl-get-pro.css?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets/css/jquery-ui-tabs.css](/browser/cm-email-blacklist/trunk/backend/assets/css/jquery-ui-tabs.css?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets/images](/browser/cm-email-blacklist/trunk/backend/assets/images?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets/images/01-cm-email-registration-blacklist-domain-blacklist.png](/browser/cm-email-blacklist/trunk/backend/assets/images/01-cm-email-registration-blacklist-domain-blacklist.png?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets/images/02-cm-email-registration-blacklist-email-whitelist.png](/browser/cm-email-blacklist/trunk/backend/assets/images/02-cm-email-registration-blacklist-email-whitelist.png?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets/images/03-cm-email-registration-blacklist-ip-blacklist.png](/browser/cm-email-blacklist/trunk/backend/assets/images/03-cm-email-registration-blacklist-ip-blacklist.png?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets/images/04-cm-email-registration-blacklist-failed-log.png](/browser/cm-email-blacklist/trunk/backend/assets/images/04-cm-email-registration-blacklist-failed-log.png?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets/images/05-cm-email-registration-blacklist-comments-allowed-domains.png](/browser/cm-email-blacklist/trunk/backend/assets/images/05-cm-email-registration-blacklist-comments-allowed-domains.png?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets/images/06-cm-email-registration-blacklist-import.png](/browser/cm-email-blacklist/trunk/backend/assets/images/06-cm-email-registration-blacklist-import.png?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets/js](/browser/cm-email-blacklist/trunk/backend/assets/js?rev=3193808 "Show entry in browser")
  (added)
* [backend/assets/js/backend.js](/browser/cm-email-blacklist/trunk/backend/assets/js/backend.js?rev=3193808 "Show entry in browser")
  (added)
* [backend/classes](/browser/cm-email-blacklist/trunk/backend/classes?rev=3193808 "Show entry in browser")
  (added)
* [backend/classes/Settings.php](/browser/cm-email-blacklist/trunk/backend/classes/Settings.php?rev=3193808 "Show entry in browser")
  (added)
* [backend/classes/SettingsView.php](/browser/cm-email-blacklist/trunk/backend/classes/SettingsView.php?rev=3193808 "Show entry in browser")
  (added)
* [backend/classes/SettingsViewAbstract.php](/browser/cm-email-blacklist/trunk/backend/classes/SettingsViewAbstract.php?rev=3193808 "Show entry in browser")
  (added)
* [backend/views](/browser/cm-email-blacklist/trunk/backend/views?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/about.phtml](/browser/cm-email-blacklist/trunk/backend/views/about.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/import.phtml](/browser/cm-email-blacklist/trunk/backend/views/import.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/nav.phtml](/browser/cm-email-blacklist/trunk/backend/views/nav.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings](/browser/cm-email-blacklist/trunk/backend/views/settings?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/blacklist.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/blacklist.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/cmeb\_comments.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/cmeb_comments.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/cmeb\_general.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/cmeb_general.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/cmeb\_upgrade.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/cmeb_upgrade.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/email\_blacklist.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/email_blacklist.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/email\_whitelist.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/email_whitelist.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/free\_domains.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/free_domains.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/installation.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/installation.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/ip\_blacklist.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/ip_blacklist.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/ip\_whitelist.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/ip_whitelist.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/labels.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/labels.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/log.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/log.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/sharebox.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/sharebox.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/tester.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/tester.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/top.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/top.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/settings/whitelist.phtml](/browser/cm-email-blacklist/trunk/backend/views/settings/whitelist.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/template.phtml](/browser/cm-email-blacklist/trunk/backend/views/template.phtml?rev=3193808 "Show entry in browser")
  (added)
* [backend/views/upgrade.phtml](/browser/cm-email-blacklist/trunk/backend/views/upgrade.phtml?rev=3193808 "Show entry in browser")
  (added)
* [cm-email-blacklist.php](/browser/cm-email-blacklist/trunk/cm-email-blacklist.php?rev=3193808 "Show entry in browser")
  (added)
* [lib](/browser/cm-email-blacklist/trunk/lib?rev=3193808 "Show entry in browser")
  (added)
* [lib/CMEB.php](/browser/cm-email-blacklist/trunk/lib/CMEB.php?rev=3193808 "Show entry in browser")
  (added)
* [lib/models](/browser/cm-email-blacklist/trunk/lib/models?rev=3193808 "Show entry in browser")
  (added)
* [lib/models/EmailBlacklist.php](/browser/cm-email-blacklist/trunk/lib/models/EmailBlacklist.php?rev=3193808 "Show entry in browser")
  (added)
* [lib/models/FreeDomains.php](/browser/cm-email-blacklist/trunk/lib/models/FreeDomains.php?rev=3193808 "Show entry in browser")
  (added)
* [lib/models/IpWhitelist.php](/browser/cm-email-blacklist/trunk/lib/models/IpWhitelist.php?rev=3193808 "Show entry in browser")
  (added)
* [lib/models/Validate.php](/browser/cm-email-blacklist/trunk/lib/models/Validate.php?rev=3193808 "Show entry in browser")
  (added)
* [lib/models/WhiteList.php](/browser/cm-email-blacklist/trunk/lib/models/WhiteList.php?rev=3193808 "Show entry in browser")
  (added)
* [package](/browser/cm-email-blacklist/trunk/package?rev=3193808 "Show entry in browser")
  (added)
* [package/CMWPPluginssuite.png](/browser/cm-email-blacklist/trunk/package/CMWPPluginssuite.png?rev=3193808 "Show entry in browser")
  (added)
* [package/cminds-free.php](/browser/cm-email-blacklist/trunk/package/cminds-free.php?rev=3193808 "Show entry in browser")
  (added)
* [package/cminds-plugin-config.php](/browser/cm-email-blacklist/trunk/package/cminds-plugin-config.php?rev=3193808 "Show entry in browser")
  (added)
* [package/css](/browser/cm-email-blacklist/trunk/package/css?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images](/browser/cm-email-blacklist/trunk/package/css/images?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/animated-overlay.gif](/browser/cm-email-blacklist/trunk/package/css/images/animated-overlay.gif?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_0\_aaaaaa\_40x100.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-bg_flat_0_aaaaaa_40x100.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_75\_ffffff\_40x100.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-bg_flat_75_ffffff_40x100.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_55\_fbf9ee\_1x400.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-bg_glass_55_fbf9ee_1x400.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_65\_ffffff\_1x400.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-bg_glass_65_ffffff_1x400.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_dadada\_1x400.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-bg_glass_75_dadada_1x400.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_e6e6e6\_1x400.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-bg_glass_75_e6e6e6_1x400.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_95\_fef1ec\_1x400.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-bg_glass_95_fef1ec_1x400.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_highlight-soft\_75\_cccccc\_1x100.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_222222\_256x240.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-icons_222222_256x240.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_2e83ff\_256x240.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-icons_2e83ff_256x240.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_454545\_256x240.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-icons_454545_256x240.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_888888\_256x240.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-icons_888888_256x240.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_cd0a0a\_256x240.png](/browser/cm-email-blacklist/trunk/package/css/images/ui-icons_cd0a0a_256x240.png?rev=3193808 "Show entry in browser")
  (added)
* [package/css/jquery-ui.min.css](/browser/cm-email-blacklist/trunk/package/css/jquery-ui.min.css?rev=3193808 "Show entry in browser")
  (added)
* [package/css/main.css](/browser/cm-email-blacklist/trunk/package/css/main.css?rev=3193808 "Show entry in browser")
  (added)
* [package/css/rolling@2x.gif](/browser/cm-email-blacklist/trunk/package/css/rolling%402x.gif?rev=3193808 "Show entry in browser")
  (added)
* [package/js](/browser/cm-email-blacklist/trunk/package/js?rev=3193808 "Show entry in browser")
  (added)
* [package/js/froogaloop.js](/browser/cm-email-blacklist/trunk/package/js/froogaloop.js?rev=3193808 "Show entry in browser")
  (added)
* [package/js/mailerlite.js](/browser/cm-email-blacklist/trunk/package/js/mailerlite.js?rev=3193808 "Show entry in browser")
  (added)
* [package/views](/browser/cm-email-blacklist/trunk/package/views?rev=3193808 "Show entry in browser")
  (added)
* [package/views/99suite.png](/browser/cm-email-blacklist/trunk/package/views/99suite.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/Hound2.png](/browser/cm-email-blacklist/trunk/package/views/Hound2.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/SEOHoundIcon.png](/browser/cm-email-blacklist/trunk/package/views/SEOHoundIcon.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/WPmembership.png](/browser/cm-email-blacklist/trunk/package/views/WPmembership.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/answers.png](/browser/cm-email-blacklist/trunk/package/views/answers.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/appointments\_icon.png](/browser/cm-email-blacklist/trunk/package/views/appointments_icon.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/banner\_yearly-membership\_220px.png](/browser/cm-email-blacklist/trunk/package/views/banner_yearly-membership_220px.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/businessdir.png](/browser/cm-email-blacklist/trunk/package/views/businessdir.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/deactivation\_feedback\_modal.php](/browser/cm-email-blacklist/trunk/package/views/deactivation_feedback_modal.php?rev=3193808 "Show entry in browser")
  (added)
* [package/views/downloads.png](/browser/cm-email-blacklist/trunk/package/views/downloads.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/faq.png](/browser/cm-email-blacklist/trunk/package/views/faq.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/img](/browser/cm-email-blacklist/trunk/package/views/img?rev=3193808 "Show entry in browser")
  (added)
* [package/views/img/Vector.png](/browser/cm-email-blacklist/trunk/package/views/img/Vector.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/img/assets.png](/browser/cm-email-blacklist/trunk/package/views/img/assets.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/img/circle.png](/browser/cm-email-blacklist/trunk/package/views/img/circle.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/img/confetti.png](/browser/cm-email-blacklist/trunk/package/views/img/confetti.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/img/v1.png](/browser/cm-email-blacklist/trunk/package/views/img/v1.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/img/v2.png](/browser/cm-email-blacklist/trunk/package/views/img/v2.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner.jpg](/browser/cm-email-blacklist/trunk/package/views/keywordhoundbanner.jpg?rev=3193808 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner1.png](/browser/cm-email-blacklist/trunk/package/views/keywordhoundbanner1.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/no.png](/browser/cm-email-blacklist/trunk/package/views/no.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/plugin\_compare\_table.php](/browser/cm-email-blacklist/trunk/package/views/plugin_compare_table.php?rev=3193808 "Show entry in browser")
  (added)
* [package/views/popup.png](/browser/cm-email-blacklist/trunk/package/views/popup.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/registration.php](/browser/cm-email-blacklist/trunk/package/views/registration.php?rev=3193808 "Show entry in browser")
  (added)
* [package/views/routes.png](/browser/cm-email-blacklist/trunk/package/views/routes.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/searchreplace.png](/browser/cm-email-blacklist/trunk/package/views/searchreplace.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/tooltip.png](/browser/cm-email-blacklist/trunk/package/views/tooltip.png?rev=3193808 "Show entry in browser")
  (added)
* [package/views/userguide\_free.php](/browser/cm-email-blacklist/trunk/package/views/userguide_free.php?rev=3193808 "Show entry in browser")
  (added)
* [package/views/videolessons.png](/browser/cm-email-blacklist/trunk/package/views/videolessons.png?rev=3193808 "Show entry in browser")
  (added)
* [readme.txt](/browser/cm-email-blacklist/trunk/readme.txt?rev=3193808 "Show entry in browser")
  (added)

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3193808)
* [Zip Archive](?format=zip&new=3193808)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_8e0947e7_20250114_205618.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fcm-video-lesson-manager%2Ftrunk%2Fpackage%2Fcminds-free.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/cm-video-lesson-manager/trunk/package/cminds-free.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/cm-video-lesson-manager/trunk/package/cminds-free.php)

---

# [source:](/browser?order=name "Go to repository root") [cm-video-lesson-manager](/browser/cm-video-lesson-manager?order=name "View cm-video-lesson-manager")/[trunk](/browser/cm-video-lesson-manager/trunk?order=name "View trunk")/[package](/browser/cm-video-lesson-manager/trunk/package?order=name "View package")/[cminds-free.php](/browser/cm-video-lesson-manager/trunk/package/cminds-free.php?order=name "View cminds-free.php")

View diff against:

View revision:

| [Last change](/changeset/3218850/cm-video-lesson-manager/trunk/package/cminds-free.php "View differences") on this file was [3218850](/changeset/3218850/ "View changeset 3218850"), checked in by CreativeMindsSolutions, [6 days ago](/timeline?from=2025-01-08T09%3A38%3A37Z&precision=second "See timeline at 01/08/2025 09:38:37 AM") |
| --- |
| release a security fix |
| **File size:** 141.1 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | namespace com\cminds\package\free\v1\_1\_5; |
| [3](#L3) |  |
| [4](#L4) | if (!defined(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION')) { |
| [5](#L5) | define(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION', '1\_1\_5'); |
| [6](#L6) | } |
| [7](#L7) | if (!class\_exists(\_\_NAMESPACE\_\_ . '\CmindsFreePackage')) { |
| [8](#L8) |  |
| [9](#L9) | class CmindsFreePackage { |
| [10](#L10) |  |
| [11](#L11) | private $config = array(); |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* LicensingAPI object |
| [15](#L15) | \* @var CmindsLicensingAPI |
| [16](#L16) | \*/ |
| [17](#L17) | public $licensingApi = null; |
| [18](#L18) | private $pluginMenu = null; |
| [19](#L19) | private $pluginMenuPage = null; |
| [20](#L20) |  |
| [21](#L21) | const SHAREBOX\_FLAT = 0; |
| [22](#L22) | const SHAREBOX\_SQUARE = 1; |
| [23](#L23) | const ADS\_REFRESH\_INTERVAL = 7776000; // 3600 \* 24 \* 90 = 3 months |
| [24](#L24) |  |
| [25](#L25) | public function \_\_construct($config) { |
| [26](#L26) | $this->config = $config; |
| [27](#L27) |  |
| [28](#L28) | $this->pluginMenu = $this->getOption('plugin-menu-item'); |
| [29](#L29) | $this->pluginMenuPage = $this->getPageUrl('licensing'); |
| [30](#L30) |  |
| [31](#L31) | add\_action('activated\_plugin', array($this, 'redirectAfterInstall'), 10, 2); |
| [32](#L32) | add\_action('admin\_init', array($this, 'updatePoweredByOption')); |
| [33](#L33) | add\_action('admin\_init', array($this, 'registerAdminActions')); |
| [34](#L34) | add\_action('admin\_menu', array($this, 'updateMenu'), 21); |
| [35](#L35) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminStyles')); |
| [36](#L36) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminScripts')); |
| [37](#L37) |  |
| [38](#L38) | $aboutPageKey = $this->getPageSlug(); |
| [39](#L39) | add\_action('cminds-' . $aboutPageKey . '-content-1', array($this, 'displayUserGuideTab')); |
| [40](#L40) | add\_action('cminds-' . $aboutPageKey . '-content-10', array($this, 'displayCreativeMindsTab')); |
| [41](#L41) | add\_action('cminds-' . $aboutPageKey . '-content-30', array($this, 'displayMembershipTab')); |
| [42](#L42) | add\_action('cminds-' . $aboutPageKey . '-content-40', array($this, 'displayCMProductTab')); |
| [43](#L43) | add\_action('cminds-' . $aboutPageKey . '-content-50', array($this, 'displayCMAddOnsTab')); |
| [44](#L44) | add\_action('cminds-' . $aboutPageKey . '-content-60', array($this, 'displayVideoGuidesTab')); |
| [45](#L45) | add\_action('cminds-' . $aboutPageKey . '-content-99', array($this, 'displaySupportTab')); |
| [46](#L46) | add\_action('cminds-' . $aboutPageKey . '-content-199', array($this, 'displayServerInformationTab')); |
| [47](#L47) |  |
| [48](#L48) | add\_action('cminds\_download\_sysinfo', array($this, 'cminds\_generate\_sysinfo\_download')); |
| [49](#L49) |  |
| [50](#L50) | add\_action('init', array($this, 'cminds\_get\_actions')); |
| [51](#L51) | add\_action('init', array($this, 'cminds\_post\_actions')); |
| [52](#L52) |  |
| [53](#L53) | add\_shortcode('cminds\_free\_author', array($this, 'showAuthor')); |
| [54](#L54) | add\_shortcode('cminds\_free\_registration', array($this, 'showRegistration')); |
| [55](#L55) | add\_shortcode('cminds\_free\_guide', array($this, 'showGuide')); |
| [56](#L56) | add\_shortcode('cminds\_upgrade\_box', array($this, 'showUpgrade')); |
| [57](#L57) | add\_shortcode('cminds\_free\_activation', array($this, 'showActivation')); |
| [58](#L58) |  |
| [59](#L59) | add\_filter('plugin\_row\_meta', array($this, 'add\_plugin\_meta\_links'), 10, 2); |
| [60](#L60) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'add\_plugin\_action\_links')); |
| [61](#L61) |  |
| [62](#L62) | add\_action('wp\_dashboard\_setup', array($this, 'addDashboardWidget')); |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | public function addDashboardWidget() { |
| [66](#L66) | if ($this->isRegistered()) { |
| [67](#L67) | wp\_add\_dashboard\_widget('cminds\_package\_dashboard\_widget', \_\_('CreativeMinds WordPress News', 'cminds-package'), array($this, 'showCMDashboardWidget')); |
| [68](#L68) | } |
| [69](#L69) | } |
| [70](#L70) |  |
| [71](#L71) | public function showCMDashboardWidget() { |
| [72](#L72) | $feeds = array( |
| [73](#L73) | array( |
| [74](#L74) | 'url'          => 'https://www.cminds.com/category/wordpress/feed/', |
| [75](#L75) | 'items'        => 6, |
| [76](#L76) | 'show\_summary' => 0, |
| [77](#L77) | 'show\_author'  => 0, |
| [78](#L78) | 'show\_date'    => 1, |
| [79](#L79) | ), |
| [80](#L80) | ); |
| [81](#L81) |  |
| [82](#L82) | wp\_dashboard\_primary\_output('cminds\_package\_dashboard\_widget', $feeds); |
| [83](#L83) | ?> |
| [84](#L84) | <br><hr> |
| [85](#L85) | <p> |
| [86](#L86) | <?php |
| [87](#L87) | printf( |
| [88](#L88) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/', \_\_('cminds.com'), \_\_('(opens in a new window)') |
| [89](#L89) | ); |
| [90](#L90) | ?> |
| [91](#L91) |  |
| [92](#L92) | | |
| [93](#L93) |  |
| [94](#L94) | <?php |
| [95](#L95) | printf( |
| [96](#L96) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/wordpress-plugins/', \_\_('CM WordPress Plugins'), \_\_('(opens in a new window)') |
| [97](#L97) | ); |
| [98](#L98) | ?> |
| [99](#L99) |  |
| [100](#L100) | | |
| [101](#L101) |  |
| [102](#L102) | <?php |
| [103](#L103) | printf( |
| [104](#L104) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', esc\_url(\_x('https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/', '99+ WordPress Plugins Bundle')), \_\_('99+ WordPress Plugins Bundle'), \_\_('(opens in a new window)') |
| [105](#L105) | ); |
| [106](#L106) | ?> |
| [107](#L107) | </p> |
| [108](#L108) | <?php |
| [109](#L109) | } |
| [110](#L110) |  |
| [111](#L111) | public function redirectAfterInstall($plugin, $network\_activation = false) { |
| [112](#L112) | global $cmindsPluginPackage; |
| [113](#L113) | $the\_package = null; |
| [114](#L114) |  |
| [115](#L115) | foreach ($cmindsPluginPackage as $package) { |
| [116](#L116) | $basename = $package->getOption('plugin-basename'); |
| [117](#L117) | if ($basename == $plugin) { |
| [118](#L118) | $the\_package = $package; |
| [119](#L119) | break; |
| [120](#L120) | } |
| [121](#L121) | } |
| [122](#L122) |  |
| [123](#L123) | if ($the\_package && $the\_package->getOption('plugin-redirect-after-install')) { |
| [124](#L124) | $url = $the\_package->getOption('plugin-redirect-after-install'); |
| [125](#L125) | $isBulkActivate = array(); |
| [126](#L126) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action2'); |
| [127](#L127) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action'); |
| [128](#L128) | if (!empty($url) && !in\_array('activate-selected', $isBulkActivate)) { |
| [129](#L129) | wp\_redirect($url); |
| [130](#L130) | exit(); |
| [131](#L131) | } |
| [132](#L132) | } |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | /\*\* |
| [136](#L136) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [137](#L137) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [138](#L138) | \* functions are called on init. |
| [139](#L139) | \* |
| [140](#L140) | \* @since 1.0 |
| [141](#L141) | \* @return void |
| [142](#L142) | \*/ |
| [143](#L143) | public function registerAdminActions() { |
| [144](#L144) | if (is\_admin()) { |
| [145](#L145) | // If user is paying or in trial and have the free version installed, |
| [146](#L146) | // assume that the deactivation is for the upgrade process. |
| [147](#L147) | add\_action('wp\_ajax\_cm-submit-uninstall-reason', array($this, 'submitUninstallReason')); |
| [148](#L148) | add\_action('wp\_ajax\_cm-submit-registration-email', array($this, 'submitRegistrationEmail')); |
| [149](#L149) | add\_action('wp\_ajax\_cm-submit-deregistration', array($this, 'submitDeregistration')); |
| [150](#L150) | add\_action('wp\_ajax\_cm-submit-registration-skip', array($this, 'submitRegistrationSkip')); |
| [151](#L151) |  |
| [152](#L152) | global $pagenow; |
| [153](#L153) | if ('plugins.php' === $pagenow) { |
| [154](#L154) | // Add action link to settings page. |
| [155](#L155) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [156](#L156) | add\_filter('network\_admin\_plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [157](#L157) | add\_action('admin\_footer', array($this, 'showDeactivationFeedbackDialog'), 11); |
| [158](#L158) | } |
| [159](#L159) | } |
| [160](#L160) | } |
| [161](#L161) |  |
| [162](#L162) | /\*\* |
| [163](#L163) | \* Modify plugin's page action links collection. |
| [164](#L164) | \* |
| [165](#L165) | \* @author Vova Feldman (@svovaf) |
| [166](#L166) | \* @since  1.0.0 |
| [167](#L167) | \* |
| [168](#L168) | \* @param array $links |
| [169](#L169) | \* @param       $file |
| [170](#L170) | \* |
| [171](#L171) | \* @return array |
| [172](#L172) | \*/ |
| [173](#L173) | function modifyPluginActionLinks($links, $file) { |
| [174](#L174) | /\* |
| [175](#L175) | \* This HTML element is used to identify the correct plugin when attaching an event to its Deactivate link. |
| [176](#L176) | \*/ |
| [177](#L177) | if (isset($links['deactivate'])) { |
| [178](#L178) | $links['deactivate'] .= '<i class="cm-slug" data-slug="' . $this->getOption('plugin-abbrev') . '"></i>'; |
| [179](#L179) | } |
| [180](#L180) |  |
| [181](#L181) | return $links; |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | /\*\* |
| [185](#L185) | \* Displays a confirmation and feedback dialog box when the user clicks on the "Deactivate" link on the plugins |
| [186](#L186) | \* page. |
| [187](#L187) | \* |
| [188](#L188) | \*/ |
| [189](#L189) | function showDeactivationFeedbackDialog() { |
| [190](#L190) | $content = ''; |
| [191](#L191) | ob\_start(); |
| [192](#L192) | include\_once 'views/deactivation\_feedback\_modal.php'; |
| [193](#L193) | $content .= ob\_get\_clean(); |
| [194](#L194) | echo $content; |
| [195](#L195) | } |
| [196](#L196) |  |
| [197](#L197) | function filterDeactivationReason($reason) { |
| [198](#L198) |  |
| [199](#L199) | if (strlen($reason) < 20) { |
| [200](#L200) | return ''; |
| [201](#L201) | } |
| [202](#L202) | if (str\_word\_count($reason) < 4) { |
| [203](#L203) | return ''; |
| [204](#L204) | } |
| [205](#L205) |  |
| [206](#L206) | $dirty\_words = array('shit', 'fuck', 'wtf'); |
| [207](#L207) | foreach ($dirty\_words as $a) { |
| [208](#L208) | if (stripos($reason, $a) !== false) { |
| [209](#L209) | return ''; |
| [210](#L210) | } |
| [211](#L211) | } |
| [212](#L212) |  |
| [213](#L213) | return $reason; |
| [214](#L214) | } |
| [215](#L215) |  |
| [216](#L216) | /\*\* |
| [217](#L217) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [218](#L218) | \* @since  1.1.2 |
| [219](#L219) | \*/ |
| [220](#L220) | function submitRegistrationEmail() { |
| [221](#L221) | $atts = array(); |
| [222](#L222) |  |
| [223](#L223) | if (empty($\_POST['email'])) { |
| [224](#L224) | exit; |
| [225](#L225) | } |
| [226](#L226) |  |
| [227](#L227) | $this->registerUser($atts); |
| [228](#L228) | } |
| [229](#L229) |  |
| [230](#L230) | /\*\* |
| [231](#L231) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [232](#L232) | \* @since  1.1.2 |
| [233](#L233) | \*/ |
| [234](#L234) | function submitDeregistration() { |
| [235](#L235) | $atts = array(); |
| [236](#L236) |  |
| [237](#L237) | $this->deregisterUser($atts); |
| [238](#L238) | } |
| [239](#L239) |  |
| [240](#L240) | /\*\* |
| [241](#L241) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [242](#L242) | \* @since  1.1.2 |
| [243](#L243) | \*/ |
| [244](#L244) | function submitRegistrationSkip() { |
| [245](#L245) | if (empty($\_POST)) { |
| [246](#L246) | exit; |
| [247](#L247) | } |
| [248](#L248) | $atts = array(); |
| [249](#L249) | if (!empty($\_POST['id'])) { |
| [250](#L250) | $atts['id'] = sanitize\_text\_field($\_POST['id']); |
| [251](#L251) | } |
| [252](#L252) | $this->skipRegistration($atts); |
| [253](#L253) | } |
| [254](#L254) |  |
| [255](#L255) | /\*\* |
| [256](#L256) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [257](#L257) | \* @since  1.1.2 |
| [258](#L258) | \*/ |
| [259](#L259) | function submitUninstallReason() { |
| [260](#L260) | if (empty($\_POST['plugin\_slug']) || empty($\_POST['deactivation\_reason'])) { |
| [261](#L261) | exit; |
| [262](#L262) | } |
| [263](#L263) |  |
| [264](#L264) | $reason = isset($\_REQUEST['deactivation\_reason']) ? trim(esc\_html(stripslashes(strip\_tags($\_REQUEST['deactivation\_reason'])))) : ''; |
| [265](#L265) | $filteredReason = $this->filterDeactivationReason($reason); |
| [266](#L266) | $postedEmail = isset($\_POST['contact\_email']) && is\_email(trim($\_POST['contact\_email'])) ? sanitize\_text\_field($\_POST['contact\_email']) : null; |
| [267](#L267) |  |
| [268](#L268) | /\* |
| [269](#L269) | \* Only send the e-mail if the filtered reason is not empty |
| [270](#L270) | \*/ |
| [271](#L271) | if (!empty($filteredReason)) { |
| [272](#L272) | global $cmindsPluginPackage; |
| [273](#L273) | $package = $cmindsPluginPackage[$\_POST['plugin\_slug']]; |
| [274](#L274) |  |
| [275](#L275) | $fields = array( |
| [276](#L276) | 'product\_name' => $package->getOption('plugin-name'), |
| [277](#L277) | 'remote\_url'   => get\_bloginfo('wpurl'), |
| [278](#L278) | 'email'        => null !== $postedEmail ? $postedEmail : get\_bloginfo('admin\_email'), |
| [279](#L279) | 'want\_contact' => isset($\_POST['want\_contact']) ? 'true' === $\_POST['want\_contact'] : false, |
| [280](#L280) | 'data\_agree'   => isset($\_POST['data\_agree']) ? 'true' === $\_POST['data\_agree'] : true, |
| [281](#L281) | ); |
| [282](#L282) |  |
| [283](#L283) | $registered = $this->isRegistered($\_POST['plugin\_slug']) ? ' (registered)' : ''; |
| [284](#L284) | $message = '<p>The ' . $fields['product\_name'] . ' has been deactivated on ' . $fields['remote\_url'] . ' by ' . $fields['email'] . $registered . '.</p> <p>The reason was:</p> <p><strong>' . $filteredReason . '</strong></p>'; |
| [285](#L285) | $message .= '<br/><hr/>'; |
| [286](#L286) |  |
| [287](#L287) | $mail = 'support@cminds.com'; |
| [288](#L288) |  |
| [289](#L289) | if ($fields['want\_contact']) { |
| [290](#L290) | $message .= '<p>This user is interested in contact from our side.</p>'; |
| [291](#L291) | $message .= '<br/><hr/>'; |
| [292](#L292) | $mail = 'support@cminds.com'; |
| [293](#L293) | } |
| [294](#L294) |  |
| [295](#L295) | if ($fields['data\_agree']) { |
| [296](#L296) | $message .= '<p>SYSTEM INFORMATION BELOW:</p>'; |
| [297](#L297) | ob\_start(); |
| [298](#L298) | echo '<pre>'; |
| [299](#L299) | echo $this->cminds\_system\_info\_content(); |
| [300](#L300) | echo '</pre>'; |
| [301](#L301) | $message .= ob\_get\_clean(); |
| [302](#L302) | } |
| [303](#L303) |  |
| [304](#L304) | $message .= '<p>END OF SYSTEM INFORMATION</p>'; |
| [305](#L305) |  |
| [306](#L306) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [307](#L307) | $result = wp\_mail($mail, 'CM Free Plugin Deactivation Feedback', $message); |
| [308](#L308) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [309](#L309) | } |
| [310](#L310) |  |
| [311](#L311) |  |
| [312](#L312) | // Print '1' for successful operation. |
| [313](#L313) | echo 1; |
| [314](#L314) | exit; |
| [315](#L315) | } |
| [316](#L316) |  |
| [317](#L317) | /\*\* |
| [318](#L318) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [319](#L319) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [320](#L320) | \* functions are called on init. |
| [321](#L321) | \* |
| [322](#L322) | \* @since 1.0 |
| [323](#L323) | \* @return void |
| [324](#L324) | \*/ |
| [325](#L325) | public function cminds\_get\_actions() { |
| [326](#L326) | if (isset($\_GET['cminds\_action'])) { |
| [327](#L327) | do\_action('cminds\_' . $\_GET['cminds\_action'], $\_GET); |
| [328](#L328) | } |
| [329](#L329) | } |
| [330](#L330) |  |
| [331](#L331) | /\*\* |
| [332](#L332) | \* Hooks Cminds actions, when present in the $\_POST superglobal. Every Cminds\_action |
| [333](#L333) | \* present in $\_POST is called using WordPress's do\_action function. These |
| [334](#L334) | \* functions are called on init. |
| [335](#L335) | \* |
| [336](#L336) | \* @since 1.0 |
| [337](#L337) | \* @return void |
| [338](#L338) | \*/ |
| [339](#L339) | public function cminds\_post\_actions() { |
| [340](#L340) | if (isset($\_POST['cminds\_action'])) { |
| [341](#L341) | do\_action('cminds\_' . $\_POST['cminds\_action'], $\_POST); |
| [342](#L342) | } |
| [343](#L343) | } |
| [344](#L344) |  |
| [345](#L345) | public function updatePoweredByOption() { |
| [346](#L346) | $optionValue = filter\_input(INPUT\_POST, $this->getPoweredByOption()); |
| [347](#L347) | $submitValue = filter\_input(INPUT\_POST, 'cminds\_poweredby\_change'); |
| [348](#L348) |  |
| [349](#L349) | if (null !== $optionValue || null !== $submitValue) { |
| [350](#L350) | if(is\_admin() && is\_user\_logged\_in() && current\_user\_can('manage\_options')) { |
| [351](#L351) | update\_option($this->getPoweredByOption(), $optionValue); |
| [352](#L352) | } |
| [353](#L353) | } |
| [354](#L354) | } |
| [355](#L355) |  |
| [356](#L356) | public function getPoweredByOption() { |
| [357](#L357) | $optionName = $this->getOption('plugin-abbrev') . '-powered-by-enabled'; |
| [358](#L358) | return $optionName; |
| [359](#L359) | } |
| [360](#L360) |  |
| [361](#L361) | /\*\* |
| [362](#L362) | \* Default is 0 (disabled) |
| [363](#L363) | \* @return type |
| [364](#L364) | \*/ |
| [365](#L365) | public function isPoweredByEnabled() { |
| [366](#L366) | $result = get\_option($this->getPoweredByOption(), 0); |
| [367](#L367) | return $result; |
| [368](#L368) | } |
| [369](#L369) |  |
| [370](#L370) | /\*\* |
| [371](#L371) | \* Returns the author Url (for free version only) |
| [372](#L372) | \*/ |
| [373](#L373) | public function showAuthor($atts = array()) { |
| [374](#L374) | $authorUrl = ''; |
| [375](#L375) | global $cmindsPluginPackage; |
| [376](#L376) |  |
| [377](#L377) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [378](#L378) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [379](#L379) |  |
| [380](#L380) | if (!$currentPlugin->isPoweredByEnabled()) { |
| [381](#L381) | return; |
| [382](#L382) | } |
| [383](#L383) | ob\_start(); |
| [384](#L384) | ?> |
| [385](#L385) | <style> |
| [386](#L386) | .cminds\_poweredby {clear:both;float:none;font-size:11px;line-height:1.5;display: inline-block;padding: 3px;margin-top:20px;color:#bbb;text-decoration:none;font-weight:bold} |
| [387](#L387) | .cminds\_poweredby:before {content:'Powered by ';} |
| [388](#L388) | .cminds\_poweredbylink:link{color:#bbb;text-decoration:none;} |
| [389](#L389) | .cminds\_poweredbylink:visited{color:#bbb;text-decoration:none;} |
| [390](#L390) | .cminds\_poweredbylink:hover{color:#bbb;text-decoration:none;} |
| [391](#L391) | </style> |
| [392](#L392) |  |
| [393](#L393) | <?php |
| [394](#L394) | $authorUrl .= ob\_get\_clean(); |
| [395](#L395) | /\* |
| [396](#L396) | \* By leaving following snippet in the code, you're expressing your gratitude to creators of this plugin. Thank You! |
| [397](#L397) | \*/ |
| [398](#L398) | $authorUrl .= '<div style="display:block;clear:both;"></div><span class="cminds\_poweredby">'; |
| [399](#L399) | $authorUrl .= '<a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/') . '" target="\_blank" class="cminds\_poweredbylink">CreativeMinds</a> '; |
| [400](#L400) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/wordpress-plugins/') . '" target="\_blank" class="cminds\_poweredbylink">WordPress Plugin</a>'; |
| [401](#L401) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode($currentPlugin->getOption('plugin-store-url')) . '" target="\_blank" class="cminds\_poweredbylink">' . $currentPlugin->getOption('plugin-name') . '</a>'; |
| [402](#L402) | $authorUrl .= '</span><div style="display:block;clear:both;"></div>'; |
| [403](#L403) |  |
| [404](#L404) | return $authorUrl; |
| [405](#L405) | } |
| [406](#L406) |  |
| [407](#L407) | /\* |
| [408](#L408) | \* Licensing Page Tabs |
| [409](#L409) | \*/ |
| [410](#L410) |  |
| [411](#L411) | public function displayUpgradeTutorialTab() { |
| [412](#L412) | $content = ''; |
| [413](#L413) | ob\_start(); |
| [414](#L414) | ?> |
| [415](#L415) | <div> |
| [416](#L416) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Customer Dashboard</a> |
| [417](#L417) | </div> |
| [418](#L418) | <br/> |
| [419](#L419) | <div> |
| [420](#L420) | <?php |
| [421](#L421) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134692135?title=0&byline=0&portrait=0" width="500" height="280"]'); |
| [422](#L422) | ?> |
| [423](#L423) | </div> |
| [424](#L424) | <?php |
| [425](#L425) | $content .= ob\_get\_clean(); |
| [426](#L426) | return $content; |
| [427](#L427) | } |
| [428](#L428) |  |
| [429](#L429) | public function displayManageProductsTab() { |
| [430](#L430) | $content = ''; |
| [431](#L431) | ob\_start(); |
| [432](#L432) | ?> |
| [433](#L433) | <div> |
| [434](#L434) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Open CreativeMinds Customer Dashboard</a> |
| [435](#L435) | </div> |
| [436](#L436) | <br/> |
| [437](#L437) | <div> |
| [438](#L438) | <?php |
| [439](#L439) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134490629?title=0&byline=0&portrait=0" width="640" height="360"]'); |
| [440](#L440) | ?> |
| [441](#L441) | </div> |
| [442](#L442) | <?php |
| [443](#L443) | $content .= ob\_get\_clean(); |
| [444](#L444) | return $content; |
| [445](#L445) | } |
| [446](#L446) |  |
| [447](#L447) | public function displayServerInformationTab() { |
| [448](#L448) | global $wp\_version; |
| [449](#L449) | $content = ''; |
| [450](#L450) |  |
| [451](#L451) | ob\_start(); |
| [452](#L452) | echo $this->cminds\_compatibility\_check(); |
| [453](#L453) | echo $this->cminds\_system\_info(); |
| [454](#L454) | $content .= ob\_get\_clean(); |
| [455](#L455) | return $content; |
| [456](#L456) | } |
| [457](#L457) |  |
| [458](#L458) | /\* |
| [459](#L459) | \* About/User Guide Page Tabs |
| [460](#L460) | \*/ |
| [461](#L461) |  |
| [462](#L462) | public function displayUserGuideTab() { |
| [463](#L463) | $content = ''; |
| [464](#L464) | ob\_start(); |
| [465](#L465) | ?> |
| [466](#L466) | <div> |
| [467](#L467) | <a href="<?php echo $this->getUserguideUrl(); ?>" class="btn button button-primary" target="\_blank">Open User Guide in a new tab</a> |
| [468](#L468) | </div> |
| [469](#L469) | <?php |
| [470](#L470) | $content .= ob\_get\_clean(); |
| [471](#L471) | return $content; |
| [472](#L472) | } |
| [473](#L473) |  |
| [474](#L474) | public function displayUpgradeToProTab() { |
| [475](#L475) | $content = ''; |
| [476](#L476) | $upgradeToProHtml = $this->getOption('plugin-compare-table'); |
| [477](#L477) | $pluginUrl = $this->getOption('plugin-store-url'); |
| [478](#L478) | wp\_enqueue\_script('jquery-ui-tooltip'); |
| [479](#L479) | ob\_start(); |
| [480](#L480) | ?> |
| [481](#L481) | <script> |
| [482](#L482) | jQuery(document).ready(function () { |
| [483](#L483) | jQuery(".cminds-package-show-tooltip").tooltip(); |
| [484](#L484) | }); |
| [485](#L485) | </script> |
| [486](#L486) | <style type="text/css"> |
| [487](#L487) | .pricing-table ul{ |
| [488](#L488) | border-width: 1px; |
| [489](#L489) | border-style: solid; |
| [490](#L490) | border-color: #CCCCCC; |
| [491](#L491) | border-radius: 3px; |
| [492](#L492) | margin: 4px; |
| [493](#L493) | text-align: center; |
| [494](#L494) | font-family: 'Arial'; |
| [495](#L495) | list-style: none; |
| [496](#L496) | float: left; |
| [497](#L497) | padding: 4px; |
| [498](#L498) | background-color: #FFFFFF; |
| [499](#L499) | max-width: 24%; |
| [500](#L500) | } |
| [501](#L501) | .pricing-table ul li{ |
| [502](#L502) | padding: 7px; |
| [503](#L503) | background-color: #EFEFEF; |
| [504](#L504) | border-width: 2px; |
| [505](#L505) | border-color: #B83737; |
| [506](#L506) | border-radius: 0px; |
| [507](#L507) | border-bottom-width: 2px; |
| [508](#L508) | font-size: 13px; |
| [509](#L509) | } |
| [510](#L510) | .pricing-table li:nth-child(odd){ |
| [511](#L511) | background-color: transparent; |
| [512](#L512) | } |
| [513](#L513) | .pricing-table ul .heading{ |
| [514](#L514) | color: #FFFFFF; |
| [515](#L515) | background-color: #659b2e; |
| [516](#L516) | font-size: 19px; |
| [517](#L517) | text-align: center; |
| [518](#L518) | } |
| [519](#L519) | .pricing-table ul .price{ |
| [520](#L520) | font-size: 25px; |
| [521](#L521) | } |
| [522](#L522) | .pricing-table ul .action{ |
| [523](#L523) | font-size: 13px; |
| [524](#L524) | color: #FFFFFF; |
| [525](#L525) | } |
| [526](#L526) | .pricing-table .action a{ |
| [527](#L527) | border-color: #B83737; |
| [528](#L528) | border-width: 0px; |
| [529](#L529) | background-color: #659b2e; |
| [530](#L530) | padding-top: 7px; |
| [531](#L531) | padding-bottom: 7px; |
| [532](#L532) | padding-left: 15px; |
| [533](#L533) | padding-right: 15px; |
| [534](#L534) | border-style: solid; |
| [535](#L535) | color: #FFFFFF; |
| [536](#L536) | } |
| [537](#L537) | .pricing-table ul .noaction{ |
| [538](#L538) | font-size: 13px; |
| [539](#L539) | color: #FFFFFF; |
| [540](#L540) | } |
| [541](#L541) | .pricing-table .noaction span{ |
| [542](#L542) | border-color: #B83737; |
| [543](#L543) | border-width: 0px; |
| [544](#L544) | background-color: #b2b2b2; |
| [545](#L545) | padding-top: 7px; |
| [546](#L546) | padding-bottom: 7px; |
| [547](#L547) | padding-left: 15px; |
| [548](#L548) | padding-right: 15px; |
| [549](#L549) | border-style: solid; |
| [550](#L550) | color: #FFFFFF; |
| [551](#L551) | } |
| [552](#L552) |  |
| [553](#L553) | </style> |
| [554](#L554) | <br> |
| [555](#L555) | <div> |
| [556](#L556) | <?php echo $upgradeToProHtml; ?> |
| [557](#L557) | </div> |
| [558](#L558) | <?php |
| [559](#L559) | $content .= ob\_get\_clean(); |
| [560](#L560) | return $content; |
| [561](#L561) | } |
| [562](#L562) |  |
| [563](#L563) | public function displayCreativeMindsTab() { |
| [564](#L564) | $content = ''; |
| [565](#L565) | ob\_start(); |
| [566](#L566) | ?> |
| [567](#L567) | <div> |
| [568](#L568) | <a href="https://www.cminds.com/about/" class="btn button button-primary" target="\_blank">Open About Us page in a new tab</a> |
| [569](#L569) | </div> |
| [570](#L570) | <?php |
| [571](#L571) | $content .= ob\_get\_clean(); |
| [572](#L572) | return $content; |
| [573](#L573) | } |
| [574](#L574) |  |
| [575](#L575) | public function displayMembershipTab() { |
| [576](#L576) | $content = ''; |
| [577](#L577) | ob\_start(); |
| [578](#L578) | ?> |
| [579](#L579) | <div> |
| [580](#L580) | <a href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" class="btn button button-primary" target="\_blank">Open Membership Package page in a new tab</a> |
| [581](#L581) | </div> |
| [582](#L582) | <?php |
| [583](#L583) | $content .= ob\_get\_clean(); |
| [584](#L584) | return $content; |
| [585](#L585) | } |
| [586](#L586) |  |
| [587](#L587) | public function displayCMProductTab() { |
| [588](#L588) | $content = ''; |
| [589](#L589) | ob\_start(); |
| [590](#L590) |  |
| [591](#L591) | $currentIframeFilter = filter\_input(INPUT\_POST, 'cminds\_iframe\_filter'); |
| [592](#L592) | if (empty($currentIframeFilter)) { |
| [593](#L593) | $currentIframeFilter = 'Plugin'; |
| [594](#L594) | } |
| [595](#L595) | $url = remove\_query\_arg('cminds\_iframe\_filter', $\_SERVER['REQUEST\_URI']); |
| [596](#L596) | ?> |
| [597](#L597) | <div> |
| [598](#L598) | <a href="https://www.cminds.com/wordpress-plugins-library/?cat=Plugin" class="btn button button-primary" target="\_blank">Open Product Catalog in a new tab</a> |
| [599](#L599) | <form method="post" class="cminds\_iframe\_filter\_form"> |
| [600](#L600) | <span> | Filter: </span> |
| [601](#L601) | <button type="submit" name="cminds\_iframe\_filter" value="Plugin" class="btn button button-primary">Plugins</button> |
| [602](#L602) | <button type="submit" name="cminds\_iframe\_filter" value="Add-On" class="btn button button-primary">AddOns</button> |
| [603](#L603) | <button type="submit" name="cminds\_iframe\_filter" value="Bundle" class="btn button button-primary">Bundles</button> |
| [604](#L604) | <button type="submit" name="cminds\_iframe\_filter" value="Service" class="btn button button-primary">Services</button> |
| [605](#L605) | </form> |
| [606](#L606) | </div> |
| [607](#L607) | <?php |
| [608](#L608) | $content .= ob\_get\_clean(); |
| [609](#L609) | return $content; |
| [610](#L610) | } |
| [611](#L611) |  |
| [612](#L612) | public function displayCMAddOnsTab() { |
| [613](#L613) | $content = ''; |
| [614](#L614) | ob\_start(); |
| [615](#L615) | ?> |
| [616](#L616) | <div> |
| [617](#L617) | <a href="https://www.cminds.com/wordpress-plugins-library/?showfilter=No&tags=Tooltip" class="btn button button-primary" target="\_blank">Open Add-Ons page in a new tab</a> |
| [618](#L618) | </div> |
| [619](#L619) | <?php |
| [620](#L620) | $content .= ob\_get\_clean(); |
| [621](#L621) | return $content; |
| [622](#L622) | } |
| [623](#L623) |  |
| [624](#L624) | public function displayVideoGuidesTab() { |
| [625](#L625) | $content = ''; |
| [626](#L626) | ob\_start(); |
| [627](#L627) | ?> |
| [628](#L628) | <div> |
| [629](#L629) | <a href="https://www.cminds.com/cm-plugins-video-library/" class="btn button button-primary" target="\_blank">Open Video Guides page in a new tab</a> |
| [630](#L630) | </div> |
| [631](#L631) | <?php |
| [632](#L632) | $content .= ob\_get\_clean(); |
| [633](#L633) | return $content; |
| [634](#L634) | } |
| [635](#L635) |  |
| [636](#L636) | public function displaySupportTab() { |
| [637](#L637) | $content = ''; |
| [638](#L638) | $supportForumLink = $this->getOption('plugin-support-url'); |
| [639](#L639) | ob\_start(); |
| [640](#L640) | ?> |
| [641](#L641) | <div> |
| [642](#L642) | <p>WordPress supprot forum can only be viewed on WordPress.org site. Please click on the buttom to visit the forum and to submit your support questions</p> |
| [643](#L643) | <a href="<?php echo $supportForumLink; ?>" class="btn button button-primary" target="\_blank">Open WordPress Support Formum</a> |
| [644](#L644) | </div> |
| [645](#L645) | <?php |
| [646](#L646) | $content .= ob\_get\_clean(); |
| [647](#L647) | return $content; |
| [648](#L648) | } |
| [649](#L649) |  |
| [650](#L650) | public function add\_plugin\_meta\_links($meta, $file) { |
| [651](#L651) | if ($file == $this->getOption('plugin-basename')) { |
| [652](#L652) |  |
| [653](#L653) | foreach ($meta as $key => $value) { |
| [654](#L654) | if (strpos($value, 'Visit plugin site') !== FALSE) { |
| [655](#L655) | unset($meta[$key]); |
| [656](#L656) | $meta[] = sprintf('<a href="%s">%s</a>', esc\_url($this->getOption('plugin-store-url')), \_\_('Visit plugin site', 'cminds-package') |
| [657](#L657) | ); |
| [658](#L658) | break; |
| [659](#L659) | } |
| [660](#L660) | } |
| [661](#L661) |  |
| [662](#L662) | foreach ($meta as $key => $value) { |
| [663](#L663) | if (strpos($value, '<a href="') !== FALSE) { |
| [664](#L664) | $meta[$key] = str\_replace('<a href="', '<a target="\_blank" href="', $value); |
| [665](#L665) | } |
| [666](#L666) | } |
| [667](#L667) | } |
| [668](#L668) | return $meta; |
| [669](#L669) | } |
| [670](#L670) |  |
| [671](#L671) | public function add\_plugin\_action\_links($links) { |
| [672](#L672) | $settingsUrl = $this->getOption('plugin-redirect-after-install'); |
| [673](#L673) | if (!empty($settingsUrl)) { |
| [674](#L674) | $links[] = '<a href="' . esc\_url($settingsUrl) . '">Settings</a>'; |
| [675](#L675) | } |
| [676](#L676) | if (!$this->getOption('plugin-free-only')) { |
| [677](#L677) | $links[] = '<a href="' . esc\_url(admin\_url('admin.php?page=' . $this->getProSlug())) . '">Upgrade to Pro</a>'; |
| [678](#L678) | } |
| [679](#L679) | return $links; |
| [680](#L680) | } |
| [681](#L681) |  |
| [682](#L682) | public function updateMenu() { |
| [683](#L683) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('User Guide', 'cminds-package'), \_\_('User Guide', 'cminds-package'), 'manage\_options', $this->getPageSlug(), array($this, 'displayPage')); |
| [684](#L684) | if (!$this->getOption('plugin-free-only')) { |
| [685](#L685) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), 'manage\_options', $this->getProSlug(), array($this, 'displayPage')); |
| [686](#L686) | } |
| [687](#L687) |  |
| [688](#L688) | $tag = 'cminds-' . $this->getOption('plugin-short-slug') . '-license-page'; |
| [689](#L689) | $condition = has\_action($tag); |
| [690](#L690) | } |
| [691](#L691) |  |
| [692](#L692) | public function getProSlug() { |
| [693](#L693) | $slug = $this->getOption('plugin-abbrev') . '\_pro'; |
| [694](#L694) | return $slug; |
| [695](#L695) | } |
| [696](#L696) |  |
| [697](#L697) | public function getPageSlug() { |
| [698](#L698) | $slug = $this->getOption('plugin-abbrev') . '\_about'; |
| [699](#L699) | return $slug; |
| [700](#L700) | } |
| [701](#L701) |  |
| [702](#L702) | public function getLicensingSlug() { |
| [703](#L703) | $slug = $this->getOption('plugin-abbrev') . '\_licensing'; |
| [704](#L704) | return $slug; |
| [705](#L705) | } |
| [706](#L706) |  |
| [707](#L707) | public function isOwnScreen() { |
| [708](#L708) | $screen = get\_current\_screen(); |
| [709](#L709) | return (strpos($screen->base, $this->getPageSlug()) !== false || strpos($screen->base, $this->getLicensingSlug()) !== false || strpos($screen->base, $this->getProSlug()) !== false); |
| [710](#L710) | } |
| [711](#L711) |  |
| [712](#L712) | /\*\* |
| [713](#L713) | \* Load plugin styles for admin area |
| [714](#L714) | \* |
| [715](#L715) | \* @access public |
| [716](#L716) | \* @since 1.0 |
| [717](#L717) | \*/ |
| [718](#L718) | public function enqueueAdminStyles() { |
| [719](#L719) |  |
| [720](#L720) | $screen = get\_current\_screen(); |
| [721](#L721) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [722](#L722) | return; |
| [723](#L723) | } |
| [724](#L724) | wp\_enqueue\_style('jquery-ui-tabs-css', plugin\_dir\_url(\_\_FILE\_\_) . 'css/jquery-ui.min.css', array()); |
| [725](#L725) | } |
| [726](#L726) |  |
| [727](#L727) | /\*\* |
| [728](#L728) | \* Load plugin scripts for admin area |
| [729](#L729) | \* |
| [730](#L730) | \* @access public |
| [731](#L731) | \* @since 1.0 |
| [732](#L732) | \*/ |
| [733](#L733) | public function enqueueAdminScripts() { |
| [734](#L734) |  |
| [735](#L735) | $screen = get\_current\_screen(); |
| [736](#L736) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [737](#L737) | return; |
| [738](#L738) | } |
| [739](#L739) | wp\_enqueue\_script('jquery-ui-tabs'); |
| [740](#L740) | } |
| [741](#L741) |  |
| [742](#L742) | public function getUserguideUrl() { |
| [743](#L743) | $url = ''; |
| [744](#L744) | if ($this->getOption('plugin-userguide-key')) { |
| [745](#L745) | $url .= 'https://creativeminds.helpscoutdocs.com/article/' . $this->getOption('plugin-userguide-key'); |
| [746](#L746) | } else { |
| [747](#L747) | $url .= 'https://creativeminds.helpscoutdocs.com/collection/3-wordpress-plugins'; |
| [748](#L748) | } |
| [749](#L749) | return $url; |
| [750](#L750) | } |
| [751](#L751) |  |
| [752](#L752) | public function displayPage() { |
| [753](#L753) | global $plugin\_page; |
| [754](#L754) | $content = ''; |
| [755](#L755) |  |
| [756](#L756) | global $cmindsPluginPackage; |
| [757](#L757) |  |
| [758](#L758) | if (!empty($cmindsPluginPackage)) { |
| [759](#L759) | foreach ($cmindsPluginPackage as $key => $package) { |
| [760](#L760) | $isown = $package->isOwnScreen(); |
| [761](#L761) | if ($isown) { |
| [762](#L762) | $currentPlugin = $package; |
| [763](#L763) | } |
| [764](#L764) | } |
| [765](#L765) | } |
| [766](#L766) | ?> |
| [767](#L767) | <div class="wrap"> |
| [768](#L768) | <style type="text/css"> |
| [769](#L769) | .subsubsub li+li:before {content:'| ';} |
| [770](#L770) | .cminds\_system\_info\_area{ |
| [771](#L771) | width: 99.5%; |
| [772](#L772) | height: 290px; |
| [773](#L773) | } |
| [774](#L774) | .cminds\_update\_table td, |
| [775](#L775) | .cminds\_update\_table tr { |
| [776](#L776) | width: 140px; |
| [777](#L777) | text-align: left; |
| [778](#L778) | } |
| [779](#L779) | .cminds\_iframe\_filter\_form{ |
| [780](#L780) | display: inline-block; |
| [781](#L781) | } |
| [782](#L782) | .cminds\_iframe\_filter\_form > span{ |
| [783](#L783) | line-height: 28px; |
| [784](#L784) | } |
| [785](#L785) | </style> |
| [786](#L786) | <h2> |
| [787](#L787) | <div id="icon-<?php echo $currentPlugin->getOption('plugin-icon') ?>" class="icon32"> |
| [788](#L788) | <br /> |
| [789](#L789) | </div> |
| [790](#L790) | <?php echo $currentPlugin->getOption('plugin-name') ?>&nbsp; |
| [791](#L791) | <?php |
| [792](#L792) | $pluginAbbrev = $currentPlugin->getOption('plugin-abbrev'); |
| [793](#L793) | if (empty($\_GET['page']) || $\_GET['page'] != $pluginAbbrev . '\_pro') : |
| [794](#L794) | ?> |
| [795](#L795) | <a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $pluginAbbrev . '\_pro')); ?>" class="button button-primary" title="Click to Buy PRO">Upgrade to Pro</a> |
| [796](#L796) | <?php |
| [797](#L797) | endif; |
| [798](#L798) | ?> |
| [799](#L799) | </h2> |
| [800](#L800) | <?php |
| [801](#L801) | echo $currentPlugin->showNav(); |
| [802](#L802) |  |
| [803](#L803) | wp\_enqueue\_style('cminds\_package\_userguide', plugin\_dir\_url(\_\_FILE\_\_) . 'css/main.css'); |
| [804](#L804) | wp\_enqueue\_style('cminds\_package\_userguide\_font', 'https://fonts.googleapis.com/css?family=Open+Sans:400,700,300,600'); |
| [805](#L805) |  |
| [806](#L806) | switch ($plugin\_page) { |
| [807](#L807) | default: |
| [808](#L808) | case $currentPlugin->getPageSlug(): { |
| [809](#L809) | $title = \_\_('About', 'cminds-package'); |
| [810](#L810) | wp\_enqueue\_script('cmdm-mailerlite', plugin\_dir\_url(\_\_FILE\_\_) . 'js/mailerlite.js', array(), $this->getOption('plugin-version'), true); |
| [811](#L811) | ob\_start(); |
| [812](#L812) | $base\_path = $currentPlugin->getOption('plugin-dir-path'); |
| [813](#L813) | include $base\_path . 'package/views/userguide\_free.php'; |
| [814](#L814) | $content .= ob\_get\_clean(); |
| [815](#L815) | break; |
| [816](#L816) | } |
| [817](#L817) | case $currentPlugin->getProSlug(): { |
| [818](#L818) | $title = \_\_('Upgrade to Pro', 'cminds-package'); |
| [819](#L819) |  |
| [820](#L820) | ob\_start(); |
| [821](#L821) | echo $currentPlugin->displayUpgradeToProTab(); |
| [822](#L822) | $content .= ob\_get\_clean(); |
| [823](#L823) | break; |
| [824](#L824) | } |
| [825](#L825) | case $currentPlugin->getLicensingSlug(): { |
| [826](#L826) | $title = \_\_('User Guide', 'cminds-package'); |
| [827](#L827) |  |
| [828](#L828) | ob\_start(); |
| [829](#L829) | $content .= $this->showTabs($plugin\_page); |
| [830](#L830) | $content .= ob\_get\_clean(); |
| [831](#L831) | break; |
| [832](#L832) | } |
| [833](#L833) | } |
| [834](#L834) |  |
| [835](#L835) | echo apply\_filters('cminds-about-page-content', $content, $currentPlugin); |
| [836](#L836) | ?> |
| [837](#L837) | </div> |
| [838](#L838) | <?php |
| [839](#L839) | } |
| [840](#L840) |  |
| [841](#L841) | protected function showTabs($key) { |
| [842](#L842) | $class = $id = 'cminds\_' . $key . '\_tabs'; |
| [843](#L843) | ?> |
| [844](#L844) | <div id="<?php echo $id; ?>" class="<?php echo $class; ?>"> |
| [845](#L845) | <script> |
| [846](#L846) | jQuery(document).ready(function ($) { |
| [847](#L847) | $('#<?php echo $id; ?>').tabs({ |
| [848](#L848) | activate: function (event, ui) { |
| [849](#L849) | window.location.hash = ui.newPanel.attr('id').replace(/-/g, '\_'); |
| [850](#L850) | }, |
| [851](#L851) | create: function (event, ui) { |
| [852](#L852) | var tab = location.hash.replace(/\\_/g, '-'); |
| [853](#L853) | if (tab.length) |
| [854](#L854) | { |
| [855](#L855) | var tabContainer = $(ui.panel.context).find('a[href="' + tab + '"]'); |
| [856](#L856) | if (typeof tabContainer !== 'undefined' && tabContainer.length) |
| [857](#L857) | { |
| [858](#L858) | var index = tabContainer.parent().index(); |
| [859](#L859) | $(ui.panel.context).tabs('option', 'active', index); |
| [860](#L860) | } |
| [861](#L861) | } |
| [862](#L862) | } |
| [863](#L863) | }); |
| [864](#L864) | }); |
| [865](#L865) | </script> |
| [866](#L866) | <?php |
| [867](#L867) | $this->renderSettingsTabsControls($key); |
| [868](#L868) | $this->renderSettingsTabs($key); |
| [869](#L869) | ?> |
| [870](#L870) | </div> |
| [871](#L871) | <?php |
| [872](#L872) | } |
| [873](#L873) |  |
| [874](#L874) | protected function getTabsArray($key) { |
| [875](#L875) |  |
| [876](#L876) | switch ($key) { |
| [877](#L877) | default: |
| [878](#L878) | case $this->getPageSlug(): |
| [879](#L879) | $settingsTabsArrayBase = array( |
| [880](#L880) | '1'   => 'User Guide', |
| [881](#L881) | //                                              '5'              => 'Upgrade To Pro', |
| [882](#L882) | '10'  => 'About', |
| [883](#L883) | '30'  => 'Membership', |
| [884](#L884) | '40'  => 'CM Catalog', |
| [885](#L885) | '60'  => 'Video Guides', |
| [886](#L886) | '99'  => 'WordPress Support Forum', |
| [887](#L887) | '199' => 'System Information', |
| [888](#L888) | ); |
| [889](#L889) | if ($this->getOption('plugin-has-addons')) { |
| [890](#L890) | $settingsTabsArrayBase['50'] = 'Plugin Add-ons'; |
| [891](#L891) | } |
| [892](#L892) | break; |
| [893](#L893) | case $this->getLicensingSlug(): |
| [894](#L894) | $settingsTabsArrayBase = array( |
| [895](#L895) | '10' => 'License Activation', |
| [896](#L896) | '20' => 'Check Version', |
| [897](#L897) | //                                              '30' => 'Upgrade Tutorial', |
| [898](#L898) | '40' => 'Manage Your CM Products', |
| [899](#L899) | ); |
| [900](#L900) | break; |
| [901](#L901) | } |
| [902](#L902) |  |
| [903](#L903) | $settingsTabsArray = apply\_filters('cminds-' . $key . '-tabs-array', $settingsTabsArrayBase); |
| [904](#L904) |  |
| [905](#L905) | ksort($settingsTabsArray); |
| [906](#L906) | return $settingsTabsArray; |
| [907](#L907) | } |
| [908](#L908) |  |
| [909](#L909) | /\*\* |
| [910](#L910) | \* Function renders (default) or returns the setttings tabs |
| [911](#L911) | \* |
| [912](#L912) | \* @param type $return |
| [913](#L913) | \* @return string |
| [914](#L914) | \*/ |
| [915](#L915) | protected function renderSettingsTabs($key, $return = false) { |
| [916](#L916) | $content = ''; |
| [917](#L917) | $settingsTabsArray = $this->getTabsArray($key); |
| [918](#L918) |  |
| [919](#L919) | if ($settingsTabsArray) { |
| [920](#L920) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [921](#L921) | $filterName = 'cminds-' . $key . '-content-' . $tabKey; |
| [922](#L922) |  |
| [923](#L923) | $content .= '<div id="tabs-' . $tabKey . '">'; |
| [924](#L924) | $tabContent = apply\_filters($filterName, ''); |
| [925](#L925) | $content .= $tabContent; |
| [926](#L926) | $content .= '</div>'; |
| [927](#L927) | } |
| [928](#L928) | } |
| [929](#L929) |  |
| [930](#L930) | if ($return) { |
| [931](#L931) | return $content; |
| [932](#L932) | } |
| [933](#L933) | echo $content; |
| [934](#L934) | } |
| [935](#L935) |  |
| [936](#L936) | /\*\* |
| [937](#L937) | \* Function renders (default) or returns the setttings tabs |
| [938](#L938) | \* |
| [939](#L939) | \* @param type $return |
| [940](#L940) | \* @return string |
| [941](#L941) | \*/ |
| [942](#L942) | protected function renderSettingsTabsControls($key, $return = false) { |
| [943](#L943) | $content = ''; |
| [944](#L944) | $settingsTabsArray = $this->getTabsArray($key); |
| [945](#L945) |  |
| [946](#L946) | if ($settingsTabsArray) { |
| [947](#L947) | $content .= '<ul>'; |
| [948](#L948) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [949](#L949) | $content .= '<li><a href="#tabs-' . $tabKey . '">' . $tabLabel . '</a></li>'; |
| [950](#L950) | } |
| [951](#L951) | $content .= '</ul>'; |
| [952](#L952) | } |
| [953](#L953) |  |
| [954](#L954) | if ($return) { |
| [955](#L955) | return $content; |
| [956](#L956) | } |
| [957](#L957) | echo $content; |
| [958](#L958) | } |
| [959](#L959) |  |
| [960](#L960) | protected function showSharebox($mode = self::SHAREBOX\_FLAT) { |
| [961](#L961) |  |
| [962](#L962) | $class = (self::SHAREBOX\_SQUARE === $mode) ? 'square' : 'flat'; |
| [963](#L963) |  |
| [964](#L964) | $pluginReviewLink = (string) $this->getOption('plugin-review-url'); |
| [965](#L965) | $pluginFullName = (string) $this->getOption('plugin-name'); |
| [966](#L966) | $pluginUrl = (string) $this->getOption('plugin-store-url'); |
| [967](#L967) |  |
| [968](#L968) | $twitterTweet = rawurlencode('Checkout the ' . $pluginFullName . ' ( ' . $pluginUrl . ' ) #WordPress #Plugin by @CMPLUGINS'); |
| [969](#L969) |  |
| [970](#L970) | ob\_start(); |
| [971](#L971) | ?> |
| [972](#L972) |  |
| [973](#L973) | <style type="text/css"> |
| [974](#L974) |  |
| [975](#L975) | div.cminds\_call\_to\_action\_wrapper:after{ |
| [976](#L976) | content: ''; |
| [977](#L977) | display: table; |
| [978](#L978) | clear: both; |
| [979](#L979) | } |
| [980](#L980) |  |
| [981](#L981) | #mc\_embed\_signup{clear:left; width:400px;} |
| [982](#L982) | .fb\_iframe\_widget{vertical-align: top;line-height: 2em;} |
| [983](#L983) |  |
| [984](#L984) | div.cminds\_call\_to\_action.flat{ |
| [985](#L985) | display: flex; |
| [986](#L986) | text-align: left; |
| [987](#L987) | float: left; |
| [988](#L988) | margin-bottom: 10px; |
| [989](#L989) | } |
| [990](#L990) |  |
| [991](#L991) | div.cminds\_call\_to\_action.flat .inner\_box{ |
| [992](#L992) | border: 1px solid #999; |
| [993](#L993) | padding: 0 0.5em 0.5em; |
| [994](#L994) | min-width: 80px; |
| [995](#L995) | border-radius : 4px; |
| [996](#L996) | margin: 5px 0 5px 0 ; |
| [997](#L997) | } |
| [998](#L998) |  |
| [999](#L999) | div.cminds\_call\_to\_action.square{ |
| [1000](#L1000) | display: flex; |
| [1001](#L1001) | text-align: center; |
| [1002](#L1002) | } |
| [1003](#L1003) |  |
| [1004](#L1004) | div.cminds\_call\_to\_action.square .inner\_box{ |
| [1005](#L1005) | border: 1px solid #999; |
| [1006](#L1006) | padding: 0 0.5em 0.5em; |
| [1007](#L1007) | margin: 0 auto; |
| [1008](#L1008) | min-width: 290px; |
| [1009](#L1009) | } |
| [1010](#L1010) |  |
| [1011](#L1011) | div.cminds\_call\_to\_action.square .inner\_box td{ |
| [1012](#L1012) | display: block; |
| [1013](#L1013) | padding: 0; |
| [1014](#L1014) | } |
| [1015](#L1015) |  |
| [1016](#L1016) | div.cminds\_call\_to\_action a{ |
| [1017](#L1017) | text-decoration: none; |
| [1018](#L1018) | } |
| [1019](#L1019) | </style> |
| [1020](#L1020) |  |
| [1021](#L1021) | <div class="cminds\_call\_to\_action\_wrapper"> |
| [1022](#L1022) | <div class="cminds\_call\_to\_action <?php echo $class; ?>"> |
| [1023](#L1023) | <div id="fb-root"></div> |
| [1024](#L1024) | <div class="inner\_box"> |
| [1025](#L1025) | <table cellpadding="10"><tr> |
| [1026](#L1026) | <td valign="top"> |
| [1027](#L1027) | <h3><?php $this->\_e('Share your Appreciation'); ?></h3> |
| [1028](#L1028) | <a target="\_blank" href="<?php echo esc\_attr($pluginReviewLink); ?>"> |
| [1029](#L1029) | <div class="btn button"> |
| [1030](#L1030) | <div class="dashicons dashicons-share-alt2"></div><span><?php $this->\_e('Submit a review'); ?></span> |
| [1031](#L1031) | </div> |
| [1032](#L1032) | </a> |
| [1033](#L1033) | <a target="\_blank"  href="http://twitter.com/home/?status=<?php echo esc\_attr(urlencode($twitterTweet)) ?>"> |
| [1034](#L1034) | <div class="btn button"> |
| [1035](#L1035) | <div class="dashicons dashicons-twitter"></div><span><?php $this->\_e('Tweet'); ?></span> |
| [1036](#L1036) | </div> |
| [1037](#L1037) | </a> |
| [1038](#L1038) | </td><td valign="top"> |
| [1039](#L1039) | <h3><?php $this->\_e('Stay Up-to-Date'); ?></h3> |
| [1040](#L1040) | <a href="https://twitter.com/CMPLUGINS" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true"><?php $this->\_e('Follow @CMPLUGINS'); ?></a> |
| [1041](#L1041) | <script>!function (d, s, id) { |
| [1042](#L1042) | var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; |
| [1043](#L1043) | if (!d.getElementById(id)) { |
| [1044](#L1044) | js = d.createElement(s); |
| [1045](#L1045) | js.id = id; |
| [1046](#L1046) | js.src = p + '://platform.twitter.com/widgets.js'; |
| [1047](#L1047) | fjs.parentNode.insertBefore(js, fjs); |
| [1048](#L1048) | } |
| [1049](#L1049) | }(document, 'script', 'twitter-wjs'); |
| [1050](#L1050) | </script> |
| [1051](#L1051) |  |
| [1052](#L1052) | <div class="g-follow" data-annotation="none" data-height="24" data-href="https://plus.google.com/108513627228464018583" data-rel="publisher"></div> |
| [1053](#L1053) |  |
| [1054](#L1054) | <script type="text/javascript"> |
| [1055](#L1055) | (function () { |
| [1056](#L1056) | var po = document.createElement('script'); |
| [1057](#L1057) | po.type = 'text/javascript'; |
| [1058](#L1058) | po.async = true; |
| [1059](#L1059) | po.src = 'https://apis.google.com/js/platform.js'; |
| [1060](#L1060) | var s = document.getElementsByTagName('script')[0]; |
| [1061](#L1061) | s.parentNode.insertBefore(po, s); |
| [1062](#L1062) | })(); |
| [1063](#L1063) | </script> |
| [1064](#L1064) |  |
| [1065](#L1065) | <script>(function (d, s, id) { |
| [1066](#L1066) | var js, fjs = d.getElementsByTagName(s)[0]; |
| [1067](#L1067) | if (d.getElementById(id)) |
| [1068](#L1068) | return; |
| [1069](#L1069) | js = d.createElement(s); |
| [1070](#L1070) | js.id = id; |
| [1071](#L1071) | js.src = "//connect.facebook.net/en\_US/sdk.js#xfbml=1&version=v2.0"; |
| [1072](#L1072) | fjs.parentNode.insertBefore(js, fjs); |
| [1073](#L1073) | }(document, 'script', 'facebook-jssdk')); |
| [1074](#L1074) | </script> |
| [1075](#L1075) |  |
| [1076](#L1076) | <div class="fb-like" data-href="https://www.facebook.com/cmplugins" data-width="100" data-layout="button" data-action="like" data-show-faces="true" data-share="true"></div> |
| [1077](#L1077) |  |
| [1078](#L1078) | <br/> |
| [1079](#L1079) | </td> |
| [1080](#L1080) | <td valign="top"> |
| [1081](#L1081) | <!-- Begin MailChimp Signup Form --> |
| [1082](#L1082) | <div id="mc\_embed\_signup"> |
| [1083](#L1083) | <form action="//cminds.us3.list-manage.com/subscribe/post?u=f48254f757fafba2669ae5918&amp;id=142732cbf9" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="\_blank" novalidate> |
| [1084](#L1084) | <div id="mc\_embed\_signup\_scroll"> |
| [1085](#L1085) | <h3 for="mce-EMAIL"><?php $this->\_e('CM Newsletter - coupons, deals, news'); ?></h3> |
| [1086](#L1086) | <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required> |
| [1087](#L1087) | <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn button"> |
| [1088](#L1088) | <span style="display:inline-block; position: relative"><div class="cmtt\_field\_message" title="We only send newsletters a couple of times a year. They include great deals, promo codes and information about our new plugins!"></div></span> |
| [1089](#L1089) | <!-- real people should not fill this in and expect good things - do not remove this or risk fsorm bot signups--> |
| [1090](#L1090) | <div style="position: absolute; left: -5000px;"><input type="text" name="b\_f48254f757fafba2669ae5918\_142732cbf9" tabindex="-1" value=""></div> |
| [1091](#L1091) | <div class="clear"></div> |
| [1092](#L1092) | </div> |
| [1093](#L1093) | </form> |
| [1094](#L1094) | </div> |
| [1095](#L1095) | <!--End mc\_embed\_signup--> |
| [1096](#L1096) | </td> |
| [1097](#L1097) | </tr> |
| [1098](#L1098) | </table> |
| [1099](#L1099) | </div> |
| [1100](#L1100) | </div> |
| [1101](#L1101) | </div> |
| [1102](#L1102) | <?php |
| [1103](#L1103) | ob\_end\_flush(); |
| [1104](#L1104) | } |
| [1105](#L1105) |  |
| [1106](#L1106) | /\*\* |
| [1107](#L1107) | \* Function returns the ads for the users who volunteered to register (optional step) |
| [1108](#L1108) | \* It communicates with our own server to download the current promotions |
| [1109](#L1109) | \* |
| [1110](#L1110) | \* @return boolean |
| [1111](#L1111) | \*/ |
| [1112](#L1112) | protected function getAds() { |
| [1113](#L1113) | $connectionProblem = false; |
| [1114](#L1114) | $ads\_arr = get\_transient('cminds\_free\_ads'); |
| [1115](#L1115) | if (empty($ads\_arr) && !is\_array($ads\_arr)) { |
| [1116](#L1116) | $args = array( |
| [1117](#L1117) | 'body' => array() |
| [1118](#L1118) | ); |
| [1119](#L1119) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1120](#L1120) | $response = wp\_remote\_post($href, $args); |
| [1121](#L1121) | if (!is\_wp\_error($response)) { |
| [1122](#L1122) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1123](#L1123) | } else { |
| [1124](#L1124) | $args['sslverify'] = false; |
| [1125](#L1125) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1126](#L1126) | $response = wp\_remote\_post($href, $args); |
| [1127](#L1127) | if (!is\_wp\_error($response)) { |
| [1128](#L1128) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1129](#L1129) | } else { |
| [1130](#L1130) | $ads = array(); |
| [1131](#L1131) | $connectionProblem = true; |
| [1132](#L1132) | } |
| [1133](#L1133) | } |
| [1134](#L1134) | $ads\_arr = array( |
| [1135](#L1135) | 'ads'          => $ads, |
| [1136](#L1136) | 'refresh\_time' => time(), |
| [1137](#L1137) | 'connection'   => !$connectionProblem, |
| [1138](#L1138) | ); |
| [1139](#L1139) | set\_transient('cminds\_free\_ads', $ads\_arr, self::ADS\_REFRESH\_INTERVAL); |
| [1140](#L1140) | } |
| [1141](#L1141) | /\* |
| [1142](#L1142) | \* Update from old version |
| [1143](#L1143) | \*/ |
| [1144](#L1144) | if (!isset($ads\_arr['ads']) && !isset($ads\_arr['refresh\_time'])) { |
| [1145](#L1145) | $temp\_ads\_arr = $ads\_arr; |
| [1146](#L1146) | $ads\_arr = array( |
| [1147](#L1147) | 'ads'          => $temp\_ads\_arr, |
| [1148](#L1148) | 'refresh\_time' => strtotime('-10 DAYS'), |
| [1149](#L1149) | 'connection'   => TRUE, |
| [1150](#L1150) | ); |
| [1151](#L1151) | } |
| [1152](#L1152) | /\* |
| [1153](#L1153) | \* Update from old version |
| [1154](#L1154) | \*/ |
| [1155](#L1155) | if (!isset($ads\_arr['connection'])) { |
| [1156](#L1156) | $ads\_arr['connection'] = TRUE; |
| [1157](#L1157) | } |
| [1158](#L1158) | return $ads\_arr; |
| [1159](#L1159) | } |
| [1160](#L1160) |  |
| [1161](#L1161) | public function getStoreUrl($args = array()) { |
| [1162](#L1162) | $category = isset($args['category']) ? $args['category'] : 'All'; |
| [1163](#L1163) | $storeUrl = $this->addAffiliateCode($this->getCategoryLink('Wordpress', 'category', $category)); |
| [1164](#L1164) | return esc\_url($storeUrl); |
| [1165](#L1165) | } |
| [1166](#L1166) |  |
| [1167](#L1167) | public function getCategoryLink($group, $type, $name) { |
| [1168](#L1168) | $categoryLinks = array( |
| [1169](#L1169) | 'Wordpress' => array( |
| [1170](#L1170) | 'category' => array( |
| [1171](#L1171) | 'All'     => '/wordpress-plugins-library/', |
| [1172](#L1172) | 'Plugin'  => '/wordpress-plugins/', |
| [1173](#L1173) | 'Service' => '/wordpress-maintenance-services/', |
| [1174](#L1174) | 'Add-On'  => '/wordpress-add-ons/', |
| [1175](#L1175) | 'Bundle'  => '/wordpress-plugins-bundles/'), |
| [1176](#L1176) | 'tags'     => array( |
| [1177](#L1177) | 'SEO'        => '/wordpress-seo-content-plugins/', |
| [1178](#L1178) | 'Business'   => '/plugins-for-wordpress-business-websites/', |
| [1179](#L1179) | 'Publishing' => '/wordpress-plugins-for-content-publishing/', |
| [1180](#L1180) | 'Free'       => '/free-wordpress-plugins/', |
| [1181](#L1181) | 'eCommerce'  => '/wordpress-e-commerce-plugins/', |
| [1182](#L1182) | 'Marketing'  => '/wordpress-plugins-for-marketers/', |
| [1183](#L1183) | 'Admin'      => '/admin-wordpress-plugins/', |
| [1184](#L1184) | 'Community'  => '/wordpress-community-plugins/', |
| [1185](#L1185) | 'eLearning'  => '/wordpress-e-learning-and-lms-plugins/', |
| [1186](#L1186) | ) |
| [1187](#L1187) | ), |
| [1188](#L1188) | 'Magento'   => array( |
| [1189](#L1189) | 'category' => array( |
| [1190](#L1190) | 'All'       => '/magento-extensions-and-modules/', |
| [1191](#L1191) | 'Extension' => '/ecommerce-extensions-store/', |
| [1192](#L1192) | 'Service'   => '/support-and-maintenance-services-for-magento/', |
| [1193](#L1193) | 'Bundle'    => '/extensions-bundles-magento/'), |
| [1194](#L1194) | 'tags'     => array( |
| [1195](#L1195) | 'Customer'     => '/magento-customer-care-support/', |
| [1196](#L1196) | 'Integrations' => '/magento-third-party-integration-extensions/', |
| [1197](#L1197) | 'Marketing'    => '/magento-marketing-extensions/', |
| [1198](#L1198) | 'Marketplace'  => '/magento-marketplace-extensions/', |
| [1199](#L1199) | 'Marketplaces' => '/magento-marketplace-extensions/', |
| [1200](#L1200) | 'Utilities'    => '/magento-utilities-extensions/', |
| [1201](#L1201) | 'Magento-2'    => '/magento-2-extensions/', |
| [1202](#L1202) | '2.0'          => '/magento-2-extensions/' |
| [1203](#L1203) | ) |
| [1204](#L1204) | ) |
| [1205](#L1205) | ); |
| [1206](#L1206) |  |
| [1207](#L1207) | $link = null; |
| [1208](#L1208) | $types = array('category', 'tags'); |
| [1209](#L1209) | if (in\_array($type, $types)) { |
| [1210](#L1210) | $link = isset($categoryLinks[$group][$type][$name]) ? $categoryLinks[$group][$type][$name] : null; |
| [1211](#L1211) | } |
| [1212](#L1212) |  |
| [1213](#L1213) | if (!is\_string($link)) { |
| [1214](#L1214) | $link = ('Wordpress' === $group) ? '/wordpress-plugins-library/?' . $type . '=' . $name : '/magento-extensions-and-modules/?' . $type . '=' . $name; |
| [1215](#L1215) | } |
| [1216](#L1216) |  |
| [1217](#L1217) | $link = 'https://www.cminds.com' . $link; |
| [1218](#L1218) | return $link; |
| [1219](#L1219) | } |
| [1220](#L1220) |  |
| [1221](#L1221) | public function addAffiliateCode($link) { |
| [1222](#L1222) | if ($this->getOption('plugin-affiliate')) { |
| [1223](#L1223) | $link = add\_query\_arg(array('af' => $this->getOption('plugin-affiliate')), $link); |
| [1224](#L1224) | } |
| [1225](#L1225) | return esc\_url($link); |
| [1226](#L1226) | } |
| [1227](#L1227) |  |
| [1228](#L1228) | public function showGuide($atts = array()) { |
| [1229](#L1229) | global $cmindsPluginPackage; |
| [1230](#L1230) |  |
| [1231](#L1231) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1232](#L1232) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1233](#L1233) |  |
| [1234](#L1234) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-guide-hidden'; |
| [1235](#L1235) | $guideHide = filter\_input(INPUT\_GET, 'cminds\_guide\_hide'); |
| [1236](#L1236) | if ($guideHide) { |
| [1237](#L1237) | update\_option($optionName, 1); |
| [1238](#L1238) | } |
| [1239](#L1239) | $guideShow = filter\_input(INPUT\_GET, 'cminds\_guide\_show'); |
| [1240](#L1240) | if ($guideShow) { |
| [1241](#L1241) | update\_option($optionName, 0); |
| [1242](#L1242) | } |
| [1243](#L1243) | $guideHidden = get\_option($optionName, 0); |
| [1244](#L1244) |  |
| [1245](#L1245) | $showGuide = $currentPlugin->getOption('plugin-show-guide'); |
| [1246](#L1246) | if ($showGuide) : |
| [1247](#L1247) | ob\_start(); |
| [1248](#L1248) | ?><style type="text/css"> |
| [1249](#L1249) |  |
| [1250](#L1250) | div.cminds\_guide\_wrapper { |
| [1251](#L1251) | display: inline-block; |
| [1252](#L1252) | padding: 0em 0em 1em 0em; |
| [1253](#L1253) | background: #FFF; |
| [1254](#L1254) | margin: 0em 0em 0 0; |
| [1255](#L1255) | vertical-align: top; |
| [1256](#L1256) | } |
| [1257](#L1257) |  |
| [1258](#L1258) | div.cminds\_guide\_wrapper \* { |
| [1259](#L1259) | vertical-align: top; |
| [1260](#L1260) | } |
| [1261](#L1261) |  |
| [1262](#L1262) | .cminds\_guide{ |
| [1263](#L1263) | display: inline-block; |
| [1264](#L1264) | margin: 1em 1em 1em 0em; |
| [1265](#L1265) | padding: 1em 1em 1em 0em; |
| [1266](#L1266) | } |
| [1267](#L1267) |  |
| [1268](#L1268) | .cminds\_guide\_text{ |
| [1269](#L1269) | display: inline-block; |
| [1270](#L1270) | margin: 1em; |
| [1271](#L1271) | } |
| [1272](#L1272) |  |
| [1273](#L1273) | .cminds\_guide\_text > span{ |
| [1274](#L1274) | text-align: left; |
| [1275](#L1275) | display: block; |
| [1276](#L1276) | } |
| [1277](#L1277) |  |
| [1278](#L1278) | .clear, .clearfix{ |
| [1279](#L1279) | clear: both; |
| [1280](#L1280) | } |
| [1281](#L1281) |  |
| [1282](#L1282) | .cmclearfix{ |
| [1283](#L1283) | clear: both !important; |
| [1284](#L1284) | } |
| [1285](#L1285) |  |
| [1286](#L1286) | .cminds\_guide .guide\_header{ |
| [1287](#L1287) | font-size: 14pt; |
| [1288](#L1288) | font-weight: bold; |
| [1289](#L1289) | } |
| [1290](#L1290) |  |
| [1291](#L1291) | .cminds\_guide .guide\_text{ |
| [1292](#L1292) | display: inline-block; |
| [1293](#L1293) | width: 509px; |
| [1294](#L1294) | max-width: 100%; |
| [1295](#L1295) | margin-right: 40px; |
| [1296](#L1296) | } |
| [1297](#L1297) |  |
| [1298](#L1298) | .cminds\_guide .guide\_videos{ |
| [1299](#L1299) | display: inline-block; |
| [1300](#L1300) | max-width: 100%; |
| [1301](#L1301) | overflow: hidden; |
| [1302](#L1302) | } |
| [1303](#L1303) |  |
| [1304](#L1304) | .cminds\_guide .guide\_videos .guide\_videos\_inner{ |
| [1305](#L1305) | } |
| [1306](#L1306) |  |
| [1307](#L1307) | .cminds\_guide .guide\_videos > div{ |
| [1308](#L1308) | display: inline-block; |
| [1309](#L1309) | } |
| [1310](#L1310) | .cminds\_guide .guide\_videos > div.guide\_videos\_after{ |
| [1311](#L1311) | display: block; |
| [1312](#L1312) | margin: 10px 0 0 52px; |
| [1313](#L1313) | } |
| [1314](#L1314) | .prev\_video, |
| [1315](#L1315) | .next\_video { |
| [1316](#L1316) | margin-top: 85px; |
| [1317](#L1317) | } |
| [1318](#L1318) |  |
| [1319](#L1319) | .guide\_video\_title { |
| [1320](#L1320) | font-size: 13pt; |
| [1321](#L1321) | font-weight: bold; |
| [1322](#L1322) | margin: 0 0 10px 0px; |
| [1323](#L1323) | } |
| [1324](#L1324) |  |
| [1325](#L1325) | .cminds\_link.blue { |
| [1326](#L1326) | color: #fff; |
| [1327](#L1327) | border-color: #33ace7; |
| [1328](#L1328) | background: #66c1ed; |
| [1329](#L1329) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1330](#L1330) | box-shadow: 0 1px 0 #ccc; |
| [1331](#L1331) | display: inline-block; |
| [1332](#L1332) | text-decoration: none; |
| [1333](#L1333) | line-height: 26px; |
| [1334](#L1334) | height: 28px; |
| [1335](#L1335) | padding: 0 10px 1px; |
| [1336](#L1336) | cursor: pointer; |
| [1337](#L1337) | border-width: 1px; |
| [1338](#L1338) | border-style: solid; |
| [1339](#L1339) | -webkit-border-radius: 3px; |
| [1340](#L1340) | border-radius: 3px; |
| [1341](#L1341) | -webkit-box-sizing: border-box; |
| [1342](#L1342) | -moz-box-sizing: border-box; |
| [1343](#L1343) | box-sizing: border-box; |
| [1344](#L1344) | } |
| [1345](#L1345) |  |
| [1346](#L1346) | .cminds\_guide .guide\_videos .guide\_video{ |
| [1347](#L1347) | display: none; |
| [1348](#L1348) | } |
| [1349](#L1349) | .cminds\_guide .guide\_videos .guide\_video.active{ |
| [1350](#L1350) | display: inline-block; |
| [1351](#L1351) | } |
| [1352](#L1352) |  |
| [1353](#L1353) | .cminds\_guide .guide\_video\_content > a{ |
| [1354](#L1354) | display: block; |
| [1355](#L1355) | } |
| [1356](#L1356) | .install-guide-video {max-height: 160px;} |
| [1357](#L1357) | .upgrage-guide-video {max-height: 255px;} |
| [1358](#L1358) | </style> |
| [1359](#L1359) | <?php |
| [1360](#L1360) | if (!$guideHidden) : |
| [1361](#L1361) | ?> |
| [1362](#L1362) | <script> |
| [1363](#L1363) | jQuery(document).ready(function () { |
| [1364](#L1364) |  |
| [1365](#L1365) | jQuery.fn.visible = function () { |
| [1366](#L1366) | return this.css('visibility', 'visible'); |
| [1367](#L1367) | }; |
| [1368](#L1368) |  |
| [1369](#L1369) | jQuery.fn.invisible = function () { |
| [1370](#L1370) | return this.css('visibility', 'hidden'); |
| [1371](#L1371) | }; |
| [1372](#L1372) |  |
| [1373](#L1373) | jQuery.fn.visibilityToggle = function () { |
| [1374](#L1374) | return this.css('visibility', function (i, visibility) { |
| [1375](#L1375) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1376](#L1376) | }); |
| [1377](#L1377) | }; |
| [1378](#L1378) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1379](#L1379) | var prevVisible = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video').length; |
| [1380](#L1380) | var nextVisible = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video').length; |
| [1381](#L1381) |  |
| [1382](#L1382) | if (prevVisible) { |
| [1383](#L1383) | jQuery('.guide\_videos .prev\_video').visible(); |
| [1384](#L1384) | } else { |
| [1385](#L1385) | jQuery('.guide\_videos .prev\_video').invisible(); |
| [1386](#L1386) | } |
| [1387](#L1387) |  |
| [1388](#L1388) | if (nextVisible) { |
| [1389](#L1389) | jQuery('.guide\_videos .next\_video').visible(); |
| [1390](#L1390) | } else { |
| [1391](#L1391) | jQuery('.guide\_videos .next\_video').invisible(); |
| [1392](#L1392) | } |
| [1393](#L1393) | }; |
| [1394](#L1394) |  |
| [1395](#L1395) | cminds\_video\_prev\_next\_toggle(); |
| [1396](#L1396) |  |
| [1397](#L1397) | jQuery('.guide\_videos .prev\_video').on('click', function () { |
| [1398](#L1398) | var prevVideo = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video'); |
| [1399](#L1399) | if (prevVideo.length) |
| [1400](#L1400) | { |
| [1401](#L1401) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1402](#L1402) | prevVideo.addClass('active'); |
| [1403](#L1403) | } |
| [1404](#L1404) | cminds\_video\_prev\_next\_toggle(); |
| [1405](#L1405) | }); |
| [1406](#L1406) |  |
| [1407](#L1407) | jQuery('.guide\_videos .next\_video').on('click', function () { |
| [1408](#L1408) | var nextVideo = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video'); |
| [1409](#L1409) | if (nextVideo.length) |
| [1410](#L1410) | { |
| [1411](#L1411) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1412](#L1412) | nextVideo.addClass('active'); |
| [1413](#L1413) | } |
| [1414](#L1414) | cminds\_video\_prev\_next\_toggle(); |
| [1415](#L1415) | }); |
| [1416](#L1416) | }); |
| [1417](#L1417) | </script> |
| [1418](#L1418) | <div class="clear clearfix cmclearfix"></div> |
| [1419](#L1419) | <div class="cminds\_guide\_wrapper"> |
| [1420](#L1420) | <div class="cminds\_guide"> |
| [1421](#L1421) |  |
| [1422](#L1422) | <?php |
| [1423](#L1423) | $guideText = $currentPlugin->getOption('plugin-guide-text'); |
| [1424](#L1424) | if (!empty($guideText)) : |
| [1425](#L1425) | ?> |
| [1426](#L1426) | <div class="guide\_text"> |
| [1427](#L1427) | <div class="guide\_header"> |
| [1428](#L1428) | Initial Installation Guide |
| [1429](#L1429) | </div> |
| [1430](#L1430) | <?php echo $guideText; ?> |
| [1431](#L1431) | </div> |
| [1432](#L1432) | <?php endif; ?> |
| [1433](#L1433) |  |
| [1434](#L1434) | <?php |
| [1435](#L1435) | $videos = $currentPlugin->getOption('plugin-guide-videos'); |
| [1436](#L1436) | if (!empty($videos) && is\_array($videos)) : |
| [1437](#L1437) | ?> |
| [1438](#L1438) | <div class="guide\_videos"> |
| [1439](#L1439) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1440](#L1440) | <div class="guide\_videos\_inner"> |
| [1441](#L1441) | <?php foreach ($videos as $key => $video) : ?> |
| [1442](#L1442) | <div class="guide\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1443](#L1443) | <div class="guide\_video\_title"><?php echo $video['title']; ?></div> |
| [1444](#L1444) | <?php |
| [1445](#L1445) | // echo do\_shortcode('[video src="https://player.vimeo.com/video/' . $video['video\_id'] . '?portrait=0&responsive=0&maxwidth=290&maxheight=160&player\_id=player\_2" width="290" height="160" id="palyer\_2"][/video]'); |
| [1446](#L1446) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="290" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1447](#L1447) | //                                                                                                              echo wp\_video\_shortcode(array('src' =>"https://player.vimeo.com/video/" . $video['video\_id'] . "?portrait=0&responsive=1&maxheight=160&player\_id=player\_2", 'width' => 463, 'height' => 255, 'class' => "install-guide-video wp-video-shortcode", 'id' => "palyer\_2")); |
| [1448](#L1448) | ?> |
| [1449](#L1449) | </div> |
| [1450](#L1450) | <?php endforeach; ?> |
| [1451](#L1451) | </div> |
| [1452](#L1452) | <div class="next\_video cminds\_link blue" style="visibility: hidden">Next</div> |
| [1453](#L1453) | <div class="guide\_videos\_after"> |
| [1454](#L1454) | <a href="<?php echo $currentPlugin->getPageUrl('about'); ?>" class="cminds\_link blue" target="\_blank">Open Plugin User Guide</a> |
| [1455](#L1455) | </div> |
| [1456](#L1456) | </div> |
| [1457](#L1457) | <?php endif; ?> |
| [1458](#L1458) | </div> |
| [1459](#L1459) | </div> |
| [1460](#L1460) | <div class="clear clearfix cmclearfix"></div> |
| [1461](#L1461) | <?php else : ?> |
| [1462](#L1462) | <div class="cminds\_guide\_wrapper"> |
| [1463](#L1463) | <div> |
| [1464](#L1464) | <a class="cminds-guide-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_guide\_show' => 1), remove\_query\_arg('cminds\_guide\_hide'))); ?>">Show Installation Guide Box</a> |
| [1465](#L1465) | </div> |
| [1466](#L1466) | </div> |
| [1467](#L1467) | <div class="clear clearfix cmclearfix"></div> |
| [1468](#L1468) | <?php |
| [1469](#L1469) | endif; |
| [1470](#L1470) | ?> |
| [1471](#L1471) |  |
| [1472](#L1472) | <?php |
| [1473](#L1473) | $content = ob\_get\_clean(); |
| [1474](#L1474) | return $content; |
| [1475](#L1475) | endif; |
| [1476](#L1476) | } |
| [1477](#L1477) |  |
| [1478](#L1478) | public function showActivation($atts = array()) { |
| [1479](#L1479) | global $cmindsPluginPackage; |
| [1480](#L1480) |  |
| [1481](#L1481) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1482](#L1482) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1483](#L1483) |  |
| [1484](#L1484) | ob\_start(); |
| [1485](#L1485) | $isRegistered = $currentPlugin->isRegistered(); |
| [1486](#L1486) | $isSkipped = $currentPlugin->isSkipped(); |
| [1487](#L1487) | $isRegistered = false; |
| [1488](#L1488) | if (!$isRegistered) : |
| [1489](#L1489) | include\_once 'views/registration.php'; |
| [1490](#L1490) | else: |
| [1491](#L1491) | ?> |
| [1492](#L1492) | <br/> |
| [1493](#L1493) | <br/> |
| [1494](#L1494) | <?php |
| [1495](#L1495) | endif; |
| [1496](#L1496) | $content = ob\_get\_clean(); |
| [1497](#L1497) | return $content; |
| [1498](#L1498) | } |
| [1499](#L1499) |  |
| [1500](#L1500) | public function time\_to\_decimal($time) { |
| [1501](#L1501) | $timeArr = explode(':', $time); |
| [1502](#L1502) | $decTime = ($timeArr[0] \* 60) + ($timeArr[1]); |
| [1503](#L1503) | if (isset($timeArr[2])) { |
| [1504](#L1504) | $decTime += $timeArr[2] / 60; |
| [1505](#L1505) | } |
| [1506](#L1506) | return $decTime; |
| [1507](#L1507) | } |
| [1508](#L1508) |  |
| [1509](#L1509) | public function showUpgrade($atts = array()) { |
| [1510](#L1510) | global $cmindsPluginPackage; |
| [1511](#L1511) |  |
| [1512](#L1512) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1513](#L1513) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1514](#L1514) |  |
| [1515](#L1515) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-upgrade-hidden'; |
| [1516](#L1516) | $upgradeHide = filter\_input(INPUT\_GET, 'cminds\_upgrade\_hide'); |
| [1517](#L1517) | if ($upgradeHide) { |
| [1518](#L1518) | update\_option($optionName, 1); |
| [1519](#L1519) | } |
| [1520](#L1520) | $upgradeShow = filter\_input(INPUT\_GET, 'cminds\_upgrade\_show'); |
| [1521](#L1521) | if ($upgradeShow) { |
| [1522](#L1522) | update\_option($optionName, 0); |
| [1523](#L1523) | } |
| [1524](#L1524) | $upgradeHidden = get\_option($optionName, 0); |
| [1525](#L1525) | $isRegistered = $currentPlugin->isRegistered(); |
| [1526](#L1526) |  |
| [1527](#L1527) | $showUpgrade = $currentPlugin->getOption('plugin-show-upgrade', TRUE); |
| [1528](#L1528) | if ($showUpgrade) : |
| [1529](#L1529) | ob\_start(); |
| [1530](#L1530) | ?><style type="text/css"> |
| [1531](#L1531) |  |
| [1532](#L1532) | div.cminds\_upgrade\_wrapper { |
| [1533](#L1533) | display: block; |
| [1534](#L1534) | padding: 0em 0em 1em 0em; |
| [1535](#L1535) | background: #FFF; |
| [1536](#L1536) | margin: 0em 1em 0 0; |
| [1537](#L1537) | vertical-align: top; |
| [1538](#L1538) | } |
| [1539](#L1539) |  |
| [1540](#L1540) | div.cminds\_upgrade\_wrapper \* { |
| [1541](#L1541) | vertical-align: top; |
| [1542](#L1542) | } |
| [1543](#L1543) |  |
| [1544](#L1544) | .cminds\_upgrade{ |
| [1545](#L1545) | display: inline-block; |
| [1546](#L1546) | margin: 1em 1em 1em 0em; |
| [1547](#L1547) | padding: 1em 1em 1em 0em; |
| [1548](#L1548) | width: 100%; |
| [1549](#L1549) | } |
| [1550](#L1550) |  |
| [1551](#L1551) | .cminds\_upgrade\_text{ |
| [1552](#L1552) | display: inline-block; |
| [1553](#L1553) | margin: 1em; |
| [1554](#L1554) | } |
| [1555](#L1555) |  |
| [1556](#L1556) | .cminds\_upgrade\_text > span{ |
| [1557](#L1557) | text-align: left; |
| [1558](#L1558) | display: block; |
| [1559](#L1559) | } |
| [1560](#L1560) |  |
| [1561](#L1561) | .clear, .clearfix{ |
| [1562](#L1562) | clear: both; |
| [1563](#L1563) | } |
| [1564](#L1564) |  |
| [1565](#L1565) | .cmclearfix{ |
| [1566](#L1566) | clear: both !important; |
| [1567](#L1567) | } |
| [1568](#L1568) |  |
| [1569](#L1569) | .cminds\_upgrade .upgrade\_header{ |
| [1570](#L1570) | font-size: 14pt; |
| [1571](#L1571) | font-weight: bold; |
| [1572](#L1572) | } |
| [1573](#L1573) |  |
| [1574](#L1574) | .cminds\_upgrade .upgrade\_text{ |
| [1575](#L1575) | display: inline-block; |
| [1576](#L1576) | max-width: 45%; |
| [1577](#L1577) | margin-right: 40px; |
| [1578](#L1578) | } |
| [1579](#L1579) |  |
| [1580](#L1580) | .cminds\_upgrade .upgrade\_videos{ |
| [1581](#L1581) | display: inline-flex; |
| [1582](#L1582) | max-width: 50%; |
| [1583](#L1583) | min-width: 520px; |
| [1584](#L1584) | overflow: hidden; |
| [1585](#L1585) | } |
| [1586](#L1586) |  |
| [1587](#L1587) | .cminds\_upgrade .upgrade\_videos .upgrade\_videos\_inner{ |
| [1588](#L1588) | } |
| [1589](#L1589) |  |
| [1590](#L1590) | .cminds\_upgrade .upgrade\_videos > div{ |
| [1591](#L1591) | display: inline-block; |
| [1592](#L1592) | } |
| [1593](#L1593) | .cminds\_upgrade .upgrade\_videos > div.upgrade\_videos\_after{ |
| [1594](#L1594) | display: block; |
| [1595](#L1595) | margin: 10px 0 0 0px; |
| [1596](#L1596) | } |
| [1597](#L1597) | .prev\_video, |
| [1598](#L1598) | .next\_video { |
| [1599](#L1599) | margin-top: 15px; |
| [1600](#L1600) | } |
| [1601](#L1601) |  |
| [1602](#L1602) | .upgrade\_video\_title { |
| [1603](#L1603) | font-size: 13pt; |
| [1604](#L1604) | font-weight: bold; |
| [1605](#L1605) | margin: 0 0 10px 0px; |
| [1606](#L1606) | } |
| [1607](#L1607) |  |
| [1608](#L1608) | .cminds\_link.blue { |
| [1609](#L1609) | color: #fff; |
| [1610](#L1610) | border-color: #33ace7; |
| [1611](#L1611) | background: #66c1ed; |
| [1612](#L1612) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1613](#L1613) | box-shadow: 0 1px 0 #ccc; |
| [1614](#L1614) | display: inline-block; |
| [1615](#L1615) | text-decoration: none; |
| [1616](#L1616) | line-height: 26px; |
| [1617](#L1617) | height: 28px; |
| [1618](#L1618) | padding: 0 10px 1px; |
| [1619](#L1619) | cursor: pointer; |
| [1620](#L1620) | border-width: 1px; |
| [1621](#L1621) | border-style: solid; |
| [1622](#L1622) | -webkit-border-radius: 3px; |
| [1623](#L1623) | border-radius: 3px; |
| [1624](#L1624) | -webkit-box-sizing: border-box; |
| [1625](#L1625) | -moz-box-sizing: border-box; |
| [1626](#L1626) | box-sizing: border-box; |
| [1627](#L1627) | } |
| [1628](#L1628) |  |
| [1629](#L1629) | .cminds\_upgrade .upgrade\_videos .upgrade\_video{ |
| [1630](#L1630) | display: none; |
| [1631](#L1631) | } |
| [1632](#L1632) | .cminds\_upgrade .upgrade\_videos .upgrade\_video.active{ |
| [1633](#L1633) | display: inline-block; |
| [1634](#L1634) | } |
| [1635](#L1635) |  |
| [1636](#L1636) | .cminds\_upgrade .upgrade\_video\_content > a{ |
| [1637](#L1637) | display: block; |
| [1638](#L1638) | } |
| [1639](#L1639) | </style> |
| [1640](#L1640) | <?php |
| [1641](#L1641) | if (!$upgradeHidden) : |
| [1642](#L1642) | ?> |
| [1643](#L1643) | <script> |
| [1644](#L1644) | jQuery(document).ready(function () { |
| [1645](#L1645) |  |
| [1646](#L1646) | jQuery.fn.visible = function () { |
| [1647](#L1647) | return this.css('visibility', 'visible'); |
| [1648](#L1648) | }; |
| [1649](#L1649) |  |
| [1650](#L1650) | jQuery.fn.invisible = function () { |
| [1651](#L1651) | return this.css('visibility', 'hidden'); |
| [1652](#L1652) | }; |
| [1653](#L1653) |  |
| [1654](#L1654) | jQuery.fn.visibilityToggle = function () { |
| [1655](#L1655) | return this.css('visibility', function (i, visibility) { |
| [1656](#L1656) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1657](#L1657) | }); |
| [1658](#L1658) | }; |
| [1659](#L1659) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1660](#L1660) | var prevVisible = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video').length; |
| [1661](#L1661) | var nextVisible = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video').length; |
| [1662](#L1662) |  |
| [1663](#L1663) | if (prevVisible) { |
| [1664](#L1664) | jQuery('.upgrade\_videos .prev\_video').visible(); |
| [1665](#L1665) | } else { |
| [1666](#L1666) | jQuery('.upgrade\_videos .prev\_video').invisible(); |
| [1667](#L1667) | } |
| [1668](#L1668) |  |
| [1669](#L1669) | if (nextVisible) { |
| [1670](#L1670) | jQuery('.upgrade\_videos .next\_video').visible(); |
| [1671](#L1671) | } else { |
| [1672](#L1672) | jQuery('.upgrade\_videos .next\_video').invisible(); |
| [1673](#L1673) | } |
| [1674](#L1674) | }; |
| [1675](#L1675) |  |
| [1676](#L1676) | cminds\_video\_prev\_next\_toggle(); |
| [1677](#L1677) |  |
| [1678](#L1678) | jQuery('.upgrade\_videos .prev\_video').on('click', function () { |
| [1679](#L1679) | var prevVideo = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video'); |
| [1680](#L1680) | if (prevVideo.length) |
| [1681](#L1681) | { |
| [1682](#L1682) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1683](#L1683) | prevVideo.addClass('active'); |
| [1684](#L1684) | } |
| [1685](#L1685) | cminds\_video\_prev\_next\_toggle(); |
| [1686](#L1686) | }); |
| [1687](#L1687) |  |
| [1688](#L1688) | jQuery('.upgrade\_videos .next\_video').on('click', function () { |
| [1689](#L1689) | var nextVideo = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video'); |
| [1690](#L1690) | if (nextVideo.length) |
| [1691](#L1691) | { |
| [1692](#L1692) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1693](#L1693) | nextVideo.addClass('active'); |
| [1694](#L1694) | } |
| [1695](#L1695) | cminds\_video\_prev\_next\_toggle(); |
| [1696](#L1696) | }); |
| [1697](#L1697) | });</script> |
| [1698](#L1698) | <script type="text/javascript" src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>js/froogaloop.js"></script> |
| [1699](#L1699) | <script> |
| [1700](#L1700) | jQuery(document).ready(function ( ) { |
| [1701](#L1701) | // Message displayed when link is playing |
| [1702](#L1702) | var links = jQuery('.cm-video-bookmark-link'); |
| [1703](#L1703) | var playNotice = ' - <strong><i><spam style="color:darkgreen;">Now playing</span></i></strong>'; |
| [1704](#L1704) | // Function to hide all status messages |
| [1705](#L1705) | hidePlayNoticeAll = function ( ) { |
| [1706](#L1706) | jQuery('.cm-video-bookmark-link .link\_status').html(""); |
| [1707](#L1707) | } |
| [1708](#L1708) |  |
| [1709](#L1709) | //                             Load Vimeo API for the embedded video |
| [1710](#L1710) | var iframe\_player = jQuery('.upgrade\_video\_content iframe')[0]; |
| [1711](#L1711) | var frogaloopPlayer = $f(iframe\_player); |
| [1712](#L1712) | // Option listeners for pause, finish, and playProgress |
| [1713](#L1713) | // |
| [1714](#L1714) | // Note: If you want to use this, you must define the functions or links wont work |
| [1715](#L1715) | frogaloopPlayer.addEvent('ready', function ( ) { |
| [1716](#L1716) | frogaloopPlayer.addEvent('pause', onPause); |
| [1717](#L1717) | frogaloopPlayer.addEvent('finish', onFinish); |
| [1718](#L1718) | frogaloopPlayer.addEvent('playProgress', onPlayProgress); |
| [1719](#L1719) | }); |
| [1720](#L1720) |  |
| [1721](#L1721) | // Functions for each listener event |
| [1722](#L1722) | function onPause(id) { // When the video is paused, do this. |
| [1723](#L1723) | jQuery(".main\_status").html('Paused'); |
| [1724](#L1724) | } |
| [1725](#L1725) |  |
| [1726](#L1726) | function onFinish(id) { // When the video is finished, do this. |
| [1727](#L1727) | jQuery(".main\_status").html('Finished'); |
| [1728](#L1728) | } |
| [1729](#L1729) |  |
| [1730](#L1730) | function onPlayProgress(data, id) { // While the video is playing, do this. |
| [1731](#L1731) | jQuery(".main\_status").html('Playing - ' + data.seconds + 's played'); // data.percent can also be used. |
| [1732](#L1732) | } |
| [1733](#L1733) |  |
| [1734](#L1734) | // Function to control what happens when each lesson link is clicked |
| [1735](#L1735) | function setupLinks( ) { |
| [1736](#L1736) |  |
| [1737](#L1737) | links.on('click', function ( ) { |
| [1738](#L1738) | var track = jQuery(this).data('timestamp'); //Timestamp stored as a data attribute |
| [1739](#L1739) |  |
| [1740](#L1740) | hidePlayNoticeAll( ); // Hide all status messages before displaying (to prevent them from sticking) |
| [1741](#L1741) | if (true === jQuery(this).data('active')) { |
| [1742](#L1742) | frogaloopPlayer.api('pause'); //Play the video |
| [1743](#L1743) | jQuery(this).data('active', false); |
| [1744](#L1744) | } else { |
| [1745](#L1745) | frogaloopPlayer.api('play'); //Play the video |
| [1746](#L1746) | frogaloopPlayer.api('seekTo', track); //Seek to the number of seconds in the variable link\_1\_track |
| [1747](#L1747) | jQuery(this).find('.link\_status').html(playNotice); //Display status message (playNotice) within span with class link\_1\_status |
| [1748](#L1748) | jQuery(this).data('active', true); |
| [1749](#L1749) | } |
| [1750](#L1750) | }); |
| [1751](#L1751) | } |
| [1752](#L1752) | setupLinks( ); |
| [1753](#L1753) | });</script> |
| [1754](#L1754) | <div class="clear clearfix cmclearfix"></div> |
| [1755](#L1755) | <div class="cminds\_upgrade\_wrapper"> |
| [1756](#L1756) | <div class="cminds\_upgrade"> |
| [1757](#L1757) |  |
| [1758](#L1758) | <?php |
| [1759](#L1759) | $upgradeText = $currentPlugin->getOption('plugin-upgrade-text'); |
| [1760](#L1760) | if (!empty($upgradeText)) : |
| [1761](#L1761) | ?> |
| [1762](#L1762) | <div class="upgrade\_text"> |
| [1763](#L1763) | <div class="upgrade\_header"> |
| [1764](#L1764) | Why you Should Upgrade |
| [1765](#L1765) | </div> |
| [1766](#L1766) | <div style="display:block"> |
| [1767](#L1767) | <p><?php echo $upgradeText; ?></p> |
| [1768](#L1768) | <div class="links"> |
| [1769](#L1769) |  |
| [1770](#L1770) | <?php |
| [1771](#L1771) | $upgradel = $currentPlugin->getOption('plugin-upgrade-text-list'); |
| [1772](#L1772) | if (!empty($upgradel) && is\_array($upgradel)) : |
| [1773](#L1773) | foreach ($upgradel as $key => $listitem) : |
| [1774](#L1774) | $linknum = $key + 1; |
| [1775](#L1775) | echo $listitem['video\_time']; |
| [1776](#L1776) | if ('More' !== $listitem['video\_time']) : |
| [1777](#L1777) | ?> |
| [1778](#L1778) | - <a class="cm-video-bookmark-link link\_<?php echo $linknum; ?>" data-timestamp="<?php echo $this->time\_to\_decimal($listitem['video\_time']); ?>" href="javascript:void(0);" target="\_self"><?php echo $listitem['title']; ?><span class="link\_status"></span></a> |
| [1779](#L1779) | <?php else: ?> |
| [1780](#L1780) | - <span class="cm-video-bookmark bookmark\_<?php echo $linknum; ?>" style="color:green;"><?php echo $listitem['title']; ?></span> |
| [1781](#L1781) | <?php endif; ?> |
| [1782](#L1782) | <br/> |
| [1783](#L1783) | <?php endforeach; ?> |
| [1784](#L1784) | <?php endif ?> |
| [1785](#L1785) | </div> |
| [1786](#L1786) | </div> |
| [1787](#L1787) | </div> |
| [1788](#L1788) | <?php endif; ?> |
| [1789](#L1789) |  |
| [1790](#L1790) | <?php |
| [1791](#L1791) | $videos = $currentPlugin->getOption('plugin-upgrade-videos'); |
| [1792](#L1792) | if (!empty($videos) && is\_array($videos)) : |
| [1793](#L1793) | ?> |
| [1794](#L1794) | <div class="upgrade\_videos"> |
| [1795](#L1795) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1796](#L1796) | <div class="upgrade\_videos\_inner"> |
| [1797](#L1797) | <?php |
| [1798](#L1798) | foreach ($videos as $key => $video) : |
| [1799](#L1799) | if (!empty($video)) : |
| [1800](#L1800) | ?> |
| [1801](#L1801) |  |
| [1802](#L1802) | <div class="upgrade\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1803](#L1803) | <div class="upgrade\_video\_title"><?php echo $video['title']; ?></div> |
| [1804](#L1804) | <div class="upgrade\_video\_content"> |
| [1805](#L1805) | <?php |
| [1806](#L1806) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="390" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1807](#L1807) | ?> |
| [1808](#L1808) | <br /><br /><a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $currentPlugin->getOption('plugin-abbrev') . '\_pro')); ?>" class="button button-primary" style="background-color:green; width:220px;" title="Click to Buy PRO">Show me Upgrade Options >></a> |
| [1809](#L1809) |  |
| [1810](#L1810) | </div> |
| [1811](#L1811) | </div> |
| [1812](#L1812) | <?php |
| [1813](#L1813) | endif; |
| [1814](#L1814) | endforeach; |
| [1815](#L1815) | ?> |
| [1816](#L1816) | </div> |
| [1817](#L1817) | </div> |
| [1818](#L1818) | <?php endif; ?> |
| [1819](#L1819) | </div>                    </div> |
| [1820](#L1820) | <?php |
| [1821](#L1821) | echo $this->showAds($atts); |
| [1822](#L1822) | ?> |
| [1823](#L1823) | <div class="clear clearfix cmclearfix"></div> |
| [1824](#L1824) | <?php else : ?> |
| [1825](#L1825) | <div class="cminds\_upgrade\_wrapper"> |
| [1826](#L1826) | <div> |
| [1827](#L1827) | <a class="cminds-upgrade-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_upgrade\_show' => 1), remove\_query\_arg('cminds\_upgrade\_hide'))); ?>">Why you shoud have the Premium Edition>></a> |
| [1828](#L1828) | </div> |
| [1829](#L1829) | </div> |
| [1830](#L1830) | <div class="clear clearfix cmclearfix"></div> |
| [1831](#L1831) | <?php |
| [1832](#L1832) | endif; |
| [1833](#L1833) | ?> |
| [1834](#L1834) |  |
| [1835](#L1835) | <?php |
| [1836](#L1836) | $content = ob\_get\_clean(); |
| [1837](#L1837) | return $content; |
| [1838](#L1838) | endif; |
| [1839](#L1839) | } |
| [1840](#L1840) |  |
| [1841](#L1841) | protected function getDaysSinceLastRefresh($ads\_arr) { |
| [1842](#L1842) | if (!is\_array($ads\_arr) && empty($ads\_arr['refresh\_time'])) { |
| [1843](#L1843) | return null; |
| [1844](#L1844) | } |
| [1845](#L1845) |  |
| [1846](#L1846) | $now = time(); |
| [1847](#L1847) | $your\_date = intval($ads\_arr['refresh\_time']); |
| [1848](#L1848) | $datediff = $now - $your\_date; |
| [1849](#L1849) | $days = abs(floor($datediff / (60 \* 60 \* 24))); |
| [1850](#L1850) | return $days; |
| [1851](#L1851) | } |
| [1852](#L1852) |  |
| [1853](#L1853) | public function showAds($atts = array()) { |
| [1854](#L1854) | global $cmindsPluginPackage; |
| [1855](#L1855) |  |
| [1856](#L1856) | $atts = shortcode\_atts(array( |
| [1857](#L1857) | 'flat' => false, |
| [1858](#L1858) | 'id'   => null |
| [1859](#L1859) | ), $atts); |
| [1860](#L1860) |  |
| [1861](#L1861) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1862](#L1862) |  |
| [1863](#L1863) | $optionName = 'cminds-' . $this->getOption('plugin-short-slug') . '-ads-hidden'; |
| [1864](#L1864) | $adsHide = filter\_input(INPUT\_GET, 'cminds\_ad\_hide'); |
| [1865](#L1865) | if ($adsHide) { |
| [1866](#L1866) | update\_option($optionName, 1); |
| [1867](#L1867) | } |
| [1868](#L1868) | $adsShow = filter\_input(INPUT\_GET, 'cminds\_ad\_show'); |
| [1869](#L1869) | if ($adsShow) { |
| [1870](#L1870) | update\_option($optionName, 0); |
| [1871](#L1871) | } |
| [1872](#L1872) | $adsHidden = get\_option($optionName, 1); |
| [1873](#L1873) | $adsRefreshed = filter\_input(INPUT\_GET, 'cminds\_ad\_refresh'); |
| [1874](#L1874) | if ($adsRefreshed) { |
| [1875](#L1875) | delete\_transient('cminds\_free\_ads'); |
| [1876](#L1876) | } |
| [1877](#L1877) | $ads\_arr = $this->getAds(); |
| [1878](#L1878) | $ads = isset($ads\_arr['ads']) ? $ads\_arr['ads'] : array(); |
| [1879](#L1879) | $days\_since\_last\_refresh = $this->getDaysSinceLastRefresh($ads\_arr); |
| [1880](#L1880) |  |
| [1881](#L1881) | $isRegistered = $currentPlugin->isRegistered(); |
| [1882](#L1882) | /\* |
| [1883](#L1883) | \* Don't display if there's no server connection |
| [1884](#L1884) | \*/ |
| [1885](#L1885) | if (!$ads\_arr['connection']) { |
| [1886](#L1886) | return; |
| [1887](#L1887) | } |
| [1888](#L1888) | ob\_start(); |
| [1889](#L1889) | ?> |
| [1890](#L1890) |  |
| [1891](#L1891) | <style type="text/css"> |
| [1892](#L1892) |  |
| [1893](#L1893) | div.cminds\_ads\_wrapper { |
| [1894](#L1894) | display: inline-block; |
| [1895](#L1895) | padding: 1em; |
| [1896](#L1896) | background: #FFF; |
| [1897](#L1897) | border: solid 1px #E0E0E0; |
| [1898](#L1898) | margin: 1em 1em 0 0; |
| [1899](#L1899) | vertical-align: top; |
| [1900](#L1900) | } |
| [1901](#L1901) |  |
| [1902](#L1902) | .cminds\_ads\_internal\_wrapper { |
| [1903](#L1903) | display: inline-block; |
| [1904](#L1904) | overflow: auto; |
| [1905](#L1905) | max-height: 175px; |
| [1906](#L1906) | } |
| [1907](#L1907) |  |
| [1908](#L1908) | .cminds\_ad{ |
| [1909](#L1909) | display: block; |
| [1910](#L1910) | margin: 0.5em; |
| [1911](#L1911) | vertical-align: top; |
| [1912](#L1912) | } |
| [1913](#L1913) |  |
| [1914](#L1914) | span.ad\_code { |
| [1915](#L1915) | font-weight: bold; |
| [1916](#L1916) | } |
| [1917](#L1917) |  |
| [1918](#L1918) | .cminds\_ad.hidden{ |
| [1919](#L1919) | display: none; |
| [1920](#L1920) | } |
| [1921](#L1921) | .cminds\_ads\_wrapper.hidden{ |
| [1922](#L1922) | display: none; |
| [1923](#L1923) | } |
| [1924](#L1924) |  |
| [1925](#L1925) | .cminds\_ad\_text{ |
| [1926](#L1926) | display: block; |
| [1927](#L1927) | margin-bottom: 1em; |
| [1928](#L1928) | } |
| [1929](#L1929) | .cminds\_ad\_link{ |
| [1930](#L1930) | text-align: center; |
| [1931](#L1931) | } |
| [1932](#L1932) |  |
| [1933](#L1933) | span.ads\_refreshed{ |
| [1934](#L1934) | color: #259602; |
| [1935](#L1935) | font-weight: bold; |
| [1936](#L1936) | } |
| [1937](#L1937) |  |
| [1938](#L1938) | .cminds\_ad\_text > a:before { |
| [1939](#L1939) | content:"\A"; white-space:pre; |
| [1940](#L1940) | } |
| [1941](#L1941) |  |
| [1942](#L1942) | .cminds\_ad\_text > \*:after { |
| [1943](#L1943) | content:"\A"; white-space:pre; |
| [1944](#L1944) | } |
| [1945](#L1945) |  |
| [1946](#L1946) | .cminds\_no\_ads{ |
| [1947](#L1947) | margin: 1em 0; |
| [1948](#L1948) | font-size: 12pt; |
| [1949](#L1949) | font-weight: bold; |
| [1950](#L1950) | } |
| [1951](#L1951) |  |
| [1952](#L1952) | .cminds\_links{ |
| [1953](#L1953) | display: inline-block; |
| [1954](#L1954) | margin: 1em; |
| [1955](#L1955) | padding: 0; |
| [1956](#L1956) | max-width: 150px; |
| [1957](#L1957) | min-height: 90px; |
| [1958](#L1958) | vertical-align: top; |
| [1959](#L1959) | text-align: left; |
| [1960](#L1960) | } |
| [1961](#L1961) |  |
| [1962](#L1962) | .cminds\_links .cminds\_link{ |
| [1963](#L1963) | margin: 5px 0; |
| [1964](#L1964) | } |
| [1965](#L1965) |  |
| [1966](#L1966) | .cminds\_links .cminds\_link:first-child{ |
| [1967](#L1967) | margin-top: 0; |
| [1968](#L1968) | } |
| [1969](#L1969) |  |
| [1970](#L1970) | .cminds\_link{ |
| [1971](#L1971) | color: #555; |
| [1972](#L1972) | border-color: rgba(204,204,204,0.8); |
| [1973](#L1973) | background: #f7f7f7; |
| [1974](#L1974) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1975](#L1975) | box-shadow: 0 1px 0 #ccc; |
| [1976](#L1976) | display: inline-block; |
| [1977](#L1977) | text-decoration: none; |
| [1978](#L1978) | line-height: 26px; |
| [1979](#L1979) | height: 28px; |
| [1980](#L1980) | padding: 0 10px 1px; |
| [1981](#L1981) | cursor: pointer; |
| [1982](#L1982) | border-width: 1px; |
| [1983](#L1983) | border-style: solid; |
| [1984](#L1984) | -webkit-border-radius: 3px; |
| [1985](#L1985) | border-radius: 3px; |
| [1986](#L1986) | -webkit-box-sizing: border-box; |
| [1987](#L1987) | -moz-box-sizing: border-box; |
| [1988](#L1988) | box-sizing: border-box; |
| [1989](#L1989) | } |
| [1990](#L1990) |  |
| [1991](#L1991) | .cminds\_link:active { |
| [1992](#L1992) | background: #eee; |
| [1993](#L1993) | border-color: #999; |
| [1994](#L1994) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [1995](#L1995) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [1996](#L1996) | -webkit-transform: translateY(1px); |
| [1997](#L1997) | -ms-transform: translateY(1px); |
| [1998](#L1998) | transform: translateY(1px); |
| [1999](#L1999) | } |
| [2000](#L2000) |  |
| [2001](#L2001) | .cminds\_link:hover { |
| [2002](#L2002) | background: #eee; |
| [2003](#L2003) | border-color: #999; |
| [2004](#L2004) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2005](#L2005) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2006](#L2006) | -webkit-transform: translateY(1px); |
| [2007](#L2007) | -ms-transform: translateY(1px); |
| [2008](#L2008) | transform: translateY(1px); |
| [2009](#L2009) | } |
| [2010](#L2010) |  |
| [2011](#L2011) | .cminds\_link.blue{ |
| [2012](#L2012) | color: #fff; |
| [2013](#L2013) | border-color: #33ace7; |
| [2014](#L2014) | background: #66c1ed; |
| [2015](#L2015) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2016](#L2016) | box-shadow: 0 1px 0 #ccc; |
| [2017](#L2017) | display: inline-block; |
| [2018](#L2018) | text-decoration: none; |
| [2019](#L2019) | line-height: 26px; |
| [2020](#L2020) | height: 28px; |
| [2021](#L2021) | padding: 0 10px 1px; |
| [2022](#L2022) | cursor: pointer; |
| [2023](#L2023) | border-width: 1px; |
| [2024](#L2024) | border-style: solid; |
| [2025](#L2025) | -webkit-border-radius: 3px; |
| [2026](#L2026) | border-radius: 3px; |
| [2027](#L2027) | -webkit-box-sizing: border-box; |
| [2028](#L2028) | -moz-box-sizing: border-box; |
| [2029](#L2029) | box-sizing: border-box; |
| [2030](#L2030) |  |
| [2031](#L2031) | } |
| [2032](#L2032) |  |
| [2033](#L2033) | .cminds\_link.blue:active { |
| [2034](#L2034) | background: #0198e1; |
| [2035](#L2035) | border-color: #66c1ed; |
| [2036](#L2036) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2037](#L2037) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2038](#L2038) | -webkit-transform: translateY(1px); |
| [2039](#L2039) | -ms-transform: translateY(1px); |
| [2040](#L2040) | transform: translateY(1px); |
| [2041](#L2041) | } |
| [2042](#L2042) |  |
| [2043](#L2043) | .cminds\_link.blue:hover { |
| [2044](#L2044) | background: #005b87; |
| [2045](#L2045) | border-color: #0198e1; |
| [2046](#L2046) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2047](#L2047) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2048](#L2048) | -webkit-transform: translateY(1px); |
| [2049](#L2049) | -ms-transform: translateY(1px); |
| [2050](#L2050) | transform: translateY(1px); |
| [2051](#L2051) | } |
| [2052](#L2052) |  |
| [2053](#L2053) | .cminds\_link.orange{ |
| [2054](#L2054) | color: #fff; |
| [2055](#L2055) | border-color: #ffb752; |
| [2056](#L2056) | background: #ffb752; |
| [2057](#L2057) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2058](#L2058) | box-shadow: 0 1px 0 #ccc; |
| [2059](#L2059) | display: inline-block; |
| [2060](#L2060) | text-decoration: none; |
| [2061](#L2061) | line-height: 26px; |
| [2062](#L2062) | height: 28px; |
| [2063](#L2063) | padding: 0 10px 1px; |
| [2064](#L2064) | cursor: pointer; |
| [2065](#L2065) | border-width: 1px; |
| [2066](#L2066) | border-style: solid; |
| [2067](#L2067) | -webkit-border-radius: 3px; |
| [2068](#L2068) | border-radius: 3px; |
| [2069](#L2069) | -webkit-box-sizing: border-box; |
| [2070](#L2070) | -moz-box-sizing: border-box; |
| [2071](#L2071) | box-sizing: border-box; |
| [2072](#L2072) |  |
| [2073](#L2073) | } |
| [2074](#L2074) |  |
| [2075](#L2075) | .cminds\_link.orange:active { |
| [2076](#L2076) | background: #e5a449; |
| [2077](#L2077) | border-color: #ffc574; |
| [2078](#L2078) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2079](#L2079) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2080](#L2080) | -webkit-transform: translateY(1px); |
| [2081](#L2081) | -ms-transform: translateY(1px); |
| [2082](#L2082) | transform: translateY(1px); |
| [2083](#L2083) | } |
| [2084](#L2084) |  |
| [2085](#L2085) | .cminds\_link.orange:hover { |
| [2086](#L2086) | background: #e5a449; |
| [2087](#L2087) | border-color: #ffc574; |
| [2088](#L2088) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2089](#L2089) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2090](#L2090) | -webkit-transform: translateY(1px); |
| [2091](#L2091) | -ms-transform: translateY(1px); |
| [2092](#L2092) | transform: translateY(1px); |
| [2093](#L2093) | } |
| [2094](#L2094) |  |
| [2095](#L2095) | .cminds\_more{ |
| [2096](#L2096) | display: inline-block; |
| [2097](#L2097) | margin: 1em; |
| [2098](#L2098) | vertical-align: top; |
| [2099](#L2099) | font-size: 12pt; |
| [2100](#L2100) | line-height: 123px; |
| [2101](#L2101) | } |
| [2102](#L2102) |  |
| [2103](#L2103) | .cminds\_more > \*{ |
| [2104](#L2104) | cursor: pointer; |
| [2105](#L2105) | } |
| [2106](#L2106) |  |
| [2107](#L2107) | .cminds\_link.cminds\_more\_ads { |
| [2108](#L2108) | -moz-border-radius: 11px; |
| [2109](#L2109) | -webkit-border-radius: 11px; |
| [2110](#L2110) | border-radius: 11px; |
| [2111](#L2111) | border: 1px solid #66c1ed; |
| [2112](#L2112) | font-size: 23px; |
| [2113](#L2113) | padding: 8px 14px; |
| [2114](#L2114) | text-decoration: none; |
| [2115](#L2115) | line-height: 23px; |
| [2116](#L2116) | height: auto; |
| [2117](#L2117) | } |
| [2118](#L2118) |  |
| [2119](#L2119) | .clear, .clearfix{ |
| [2120](#L2120) | clear:both; |
| [2121](#L2121) | } |
| [2122](#L2122) |  |
| [2123](#L2123) | .cmclearfix{ |
| [2124](#L2124) | clear: both !important; |
| [2125](#L2125) | } |
| [2126](#L2126) | </style> |
| [2127](#L2127) |  |
| [2128](#L2128) | <?php if ($isRegistered) : ?> |
| [2129](#L2129) |  |
| [2130](#L2130) | <?php if (!$atts['flat']) : ?> |
| [2131](#L2131) |  |
| [2132](#L2132) | <script> |
| [2133](#L2133) | jQuery(document).ready(function ( ) { |
| [2134](#L2134) | jQuery('.cminds-ads-show-button').on('click', function (e) { |
| [2135](#L2135) | e.preventDefault( ); |
| [2136](#L2136) | jQuery('#cminds\_offers\_wrapper').toggleClass('hidden'); |
| [2137](#L2137) | jQuery('#cminds\_links\_wrapper').toggleClass('hidden'); |
| [2138](#L2138) | }); |
| [2139](#L2139) | });</script> |
| [2140](#L2140) |  |
| [2141](#L2141) | <h3>Special offers from CreativeMinds</h3> |
| [2142](#L2142) |  |
| [2143](#L2143) | <div class="cminds\_ads\_wrapper\_white"> |
| [2144](#L2144) | <a href="https://www.cminds.com/wordpress-plugins-library/seo-keyword-hound-wordpress/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/keywordhoundbanner.jpg"></a> |
| [2145](#L2145) | <span style="margin-left:20px;"> |
| [2146](#L2146) | <a class="" href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/99suite.png"></a> |
| [2147](#L2147) | </span> |
| [2148](#L2148) | </div> |
| [2149](#L2149) |  |
| [2150](#L2150) |  |
| [2151](#L2151) | <?php if (!empty($ads)) : ?> |
| [2152](#L2152) | <div class="cminds\_ads\_internal\_wrapper"> |
| [2153](#L2153) | <?php foreach ($ads as $index => $ad) : ?> |
| [2154](#L2154) | <div class="cminds\_ad"> |
| [2155](#L2155) | <?php |
| [2156](#L2156) | $dateUntil = date('jS F, Y', strtotime($ad['ad\_valid\_date'])); |
| [2157](#L2157) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code <span class="ad\_code">"%s"</span> valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2158](#L2158) | ?> |
| [2159](#L2159) | <span class="cminds\_ad\_link"> |
| [2160](#L2160) | <a class="cminds\_link blue" target="\_blank" href="<?php echo $this->addAffiliateCode($ad['ad\_url']); ?>">Redeem Offer</a> |
| [2161](#L2161) | </span> |
| [2162](#L2162) | </div> |
| [2163](#L2163) | <?php endforeach; ?> |
| [2164](#L2164) | </div> |
| [2165](#L2165) | <?php else: ?> |
| [2166](#L2166) | <div class="cminds\_no\_ads"> |
| [2167](#L2167) | <span class="cminds\_no\_ads\_text"> |
| [2168](#L2168) | Currently we have no special discounts. |
| [2169](#L2169) | </span> |
| [2170](#L2170) | </div> |
| [2171](#L2171) | <?php endif; ?> |
| [2172](#L2172) |  |
| [2173](#L2173) | <div> |
| [2174](#L2174) | <?php if ($adsRefreshed) : |
| [2175](#L2175) | ?> |
| [2176](#L2176) | <span class="ads\_refreshed"> |
| [2177](#L2177) | Discounts have been refreshed. |
| [2178](#L2178) | </span> |
| [2179](#L2179) | <?php else : ?> |
| [2180](#L2180) | You haven't refreshed the discounts for <?php echo $days\_since\_last\_refresh . ' ' . \_n('day', 'days', $days\_since\_last\_refresh); ?>. <a class="cminds-ads-refresh-button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_ad\_refresh' => 1))); ?>"><strong>Refresh now!</strong></a> |
| [2181](#L2181) | <?php endif; ?> |
| [2182](#L2182) | </div> |
| [2183](#L2183) | <?php else: ?> |
| [2184](#L2184) | <ul class="cminds\_ads\_list\_wrapper"> |
| [2185](#L2185) | <?php foreach ($ads as $index => $ad) : ?> |
| [2186](#L2186) | <li class="cminds\_ads\_list\_item">                                                           <?php |
| [2187](#L2187) | $dateUntil = date('Y-m-d', strtotime($ad['ad\_valid\_date'])); |
| [2188](#L2188) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code "%s" valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2189](#L2189) | ?> |
| [2190](#L2190) | </li> |
| [2191](#L2191) | <?php endforeach; ?> |
| [2192](#L2192) | </ul> |
| [2193](#L2193) | <?php endif; ?> |
| [2194](#L2194) | <?php else: ?> |
| [2195](#L2195) | <h3>Special Offers from CreativeMinds</h3> |
| [2196](#L2196) |  |
| [2197](#L2197) | <p> |
| [2198](#L2198) | <a href="javascript:void(0)" id="cminds-unskip">Complete <?php echo esc\_attr($currentPlugin->getOption('plugin-name')); ?> registration</a> and receive special offers |
| [2199](#L2199) | </p> |
| [2200](#L2200) | <?php endif; ?> |
| [2201](#L2201) | <div class="clear clearfix cmclearfix"></div> |
| [2202](#L2202) | <?php |
| [2203](#L2203) | $content = ob\_get\_clean(); |
| [2204](#L2204) | return $content; |
| [2205](#L2205) | } |
| [2206](#L2206) |  |
| [2207](#L2207) | public function getRegistrationFields() { |
| [2208](#L2208) | $fields = array( |
| [2209](#L2209) | 'product\_name'   => $this->getOption('plugin-name'), |
| [2210](#L2210) | 'remote\_url'     => get\_bloginfo('wpurl'), |
| [2211](#L2211) | 'remote\_ip'      => $\_SERVER['SERVER\_ADDR'], |
| [2212](#L2212) | 'remote\_country' => '', |
| [2213](#L2213) | 'remote\_city'    => '', |
| [2214](#L2214) | 'email'          => get\_bloginfo('admin\_email'), |
| [2215](#L2215) | 'hostname'       => get\_bloginfo('wpurl'), |
| [2216](#L2216) | 'username'       => '', |
| [2217](#L2217) | ); |
| [2218](#L2218) |  |
| [2219](#L2219) | $output = ''; |
| [2220](#L2220) |  |
| [2221](#L2221) | foreach ($fields as $key => $value) { |
| [2222](#L2222) | $output .= sprintf('<input type="hidden" name="%s" value="%s" />', $key, $value); |
| [2223](#L2223) | } |
| [2224](#L2224) |  |
| [2225](#L2225) | return $output; |
| [2226](#L2226) | } |
| [2227](#L2227) |  |
| [2228](#L2228) | public function isSkipped($id = null) { |
| [2229](#L2229) | global $cmindsPluginPackage; |
| [2230](#L2230) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2231](#L2231) | $isSkipped = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'); |
| [2232](#L2232) | return $isSkipped; |
| [2233](#L2233) | } |
| [2234](#L2234) |  |
| [2235](#L2235) | public function isRegistered($id = null) { |
| [2236](#L2236) | global $cmindsPluginPackage; |
| [2237](#L2237) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2238](#L2238) | $isRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'); |
| [2239](#L2239) | return $isRegistered; |
| [2240](#L2240) | } |
| [2241](#L2241) |  |
| [2242](#L2242) | public function wasRegistered($id = null) { |
| [2243](#L2243) | global $cmindsPluginPackage; |
| [2244](#L2244) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2245](#L2245) | $wasRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'); |
| [2246](#L2246) | return $wasRegistered; |
| [2247](#L2247) | } |
| [2248](#L2248) |  |
| [2249](#L2249) | public function setWasRegistered($id = null) { |
| [2250](#L2250) | global $cmindsPluginPackage; |
| [2251](#L2251) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2252](#L2252) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'; |
| [2253](#L2253) | $result = update\_option($optionName, 1); |
| [2254](#L2254) | return $result; |
| [2255](#L2255) | } |
| [2256](#L2256) |  |
| [2257](#L2257) | /\*\* |
| [2258](#L2258) | \* Function comminicates with our server to remove the user from our database (right to be forgotten) |
| [2259](#L2259) | \* @global array $cmindsPluginPackage |
| [2260](#L2260) | \* @param type $atts |
| [2261](#L2261) | \* @return type |
| [2262](#L2262) | \*/ |
| [2263](#L2263) | public function deregisterUser($atts = array()) { |
| [2264](#L2264) | global $cmindsPluginPackage; |
| [2265](#L2265) |  |
| [2266](#L2266) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2267](#L2267) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2268](#L2268) |  |
| [2269](#L2269) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2270](#L2270) | $post = filter\_input\_array(INPUT\_POST); |
| [2271](#L2271) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2272](#L2272) |  |
| [2273](#L2273) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2274](#L2274) | if ($nonceCheck) { |
| [2275](#L2275) |  |
| [2276](#L2276) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2277](#L2277) | return; |
| [2278](#L2278) | } |
| [2279](#L2279) |  |
| [2280](#L2280) | unset($post['cminds\_nonce']); |
| [2281](#L2281) | $jsonData = wp\_json\_encode(array($post)); |
| [2282](#L2282) |  |
| [2283](#L2283) | $args = array( |
| [2284](#L2284) | 'body' => array( |
| [2285](#L2285) | 'jsonData' => $jsonData |
| [2286](#L2286) | ) |
| [2287](#L2287) | ); |
| [2288](#L2288) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2289](#L2289) | $response = wp\_remote\_post($href, $args); |
| [2290](#L2290) | if (!is\_wp\_error($response)) { |
| [2291](#L2291) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2292](#L2292) | if ($result && 1 === $result['result']) { |
| [2293](#L2293) | update\_option($optionName, 0); |
| [2294](#L2294) | } |
| [2295](#L2295) | } else { |
| [2296](#L2296) | $args['sslverify'] = false; |
| [2297](#L2297) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2298](#L2298) | $response = wp\_remote\_post($href, $args); |
| [2299](#L2299) | if (!is\_wp\_error($response)) { |
| [2300](#L2300) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2301](#L2301) | if ($result && 1 === $result['result']) { |
| [2302](#L2302) | update\_option($optionName, 0); |
| [2303](#L2303) | } |
| [2304](#L2304) | } else { |
| [2305](#L2305) | $message = 'User has requested the deregistration: <br/><table>'; |
| [2306](#L2306) | foreach ($post as $key => $value) { |
| [2307](#L2307) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2308](#L2308) | continue; |
| [2309](#L2309) | } |
| [2310](#L2310) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2311](#L2311) | } |
| [2312](#L2312) | $message .= '</table>'; |
| [2313](#L2313) |  |
| [2314](#L2314) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2315](#L2315) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration Canceled', $message); |
| [2316](#L2316) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2317](#L2317) | } |
| [2318](#L2318) | } |
| [2319](#L2319) | update\_option($optionName, 0); |
| [2320](#L2320) | } |
| [2321](#L2321) | } |
| [2322](#L2322) | } |
| [2323](#L2323) |  |
| [2324](#L2324) | public function skipRegistration($atts = array()) { |
| [2325](#L2325) | global $cmindsPluginPackage; |
| [2326](#L2326) |  |
| [2327](#L2327) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2328](#L2328) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2329](#L2329) |  |
| [2330](#L2330) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2331](#L2331) | update\_option($optionName, 1); |
| [2332](#L2332) | } |
| [2333](#L2333) |  |
| [2334](#L2334) | public function unskipRegistration($atts = array()) { |
| [2335](#L2335) | global $cmindsPluginPackage; |
| [2336](#L2336) |  |
| [2337](#L2337) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2338](#L2338) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2339](#L2339) |  |
| [2340](#L2340) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2341](#L2341) | update\_option($optionName, 0); |
| [2342](#L2342) | } |
| [2343](#L2343) |  |
| [2344](#L2344) | /\*\* |
| [2345](#L2345) | \* Function communicates with our server to register user's e-mail in our database. |
| [2346](#L2346) | \* It's an optional step, user can easily skip it. We only collect e-mail and the url of the site. |
| [2347](#L2347) | \* User is being informed about the data being collected and the reason why it's collected. |
| [2348](#L2348) | \* @global array $cmindsPluginPackage |
| [2349](#L2349) | \* @param type $atts |
| [2350](#L2350) | \* @return type |
| [2351](#L2351) | \*/ |
| [2352](#L2352) | public function registerUser($atts = array()) { |
| [2353](#L2353) | global $cmindsPluginPackage; |
| [2354](#L2354) |  |
| [2355](#L2355) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2356](#L2356) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2357](#L2357) |  |
| [2358](#L2358) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2359](#L2359) | $post = filter\_input\_array(INPUT\_POST); |
| [2360](#L2360) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2361](#L2361) |  |
| [2362](#L2362) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2363](#L2363) | if ($nonceCheck) { |
| [2364](#L2364) |  |
| [2365](#L2365) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2366](#L2366) | return; |
| [2367](#L2367) | } |
| [2368](#L2368) |  |
| [2369](#L2369) | unset($post['cminds\_nonce']); |
| [2370](#L2370) | $jsonData = wp\_json\_encode(array($post)); |
| [2371](#L2371) |  |
| [2372](#L2372) | $args = array( |
| [2373](#L2373) | 'body' => array( |
| [2374](#L2374) | 'jsonData' => $jsonData |
| [2375](#L2375) | ) |
| [2376](#L2376) | ); |
| [2377](#L2377) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2378](#L2378) | $response = wp\_remote\_post($href, $args); |
| [2379](#L2379) | if (!is\_wp\_error($response)) { |
| [2380](#L2380) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2381](#L2381) | if ($result && 1 === $result['result']) { |
| [2382](#L2382) | update\_option($optionName, 1); |
| [2383](#L2383) | $currentPlugin->setWasRegistered(); |
| [2384](#L2384) | } |
| [2385](#L2385) | } else { |
| [2386](#L2386) | $args['sslverify'] = false; |
| [2387](#L2387) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2388](#L2388) | $response = wp\_remote\_post($href, $args); |
| [2389](#L2389) | if (!is\_wp\_error($response)) { |
| [2390](#L2390) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2391](#L2391) | if ($result && 1 === $result['result']) { |
| [2392](#L2392) | update\_option($optionName, 1); |
| [2393](#L2393) | $currentPlugin->setWasRegistered(); |
| [2394](#L2394) | } |
| [2395](#L2395) | } else { |
| [2396](#L2396) | $message = 'Registered fields: <br/><table>'; |
| [2397](#L2397) | foreach ($post as $key => $value) { |
| [2398](#L2398) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2399](#L2399) | continue; |
| [2400](#L2400) | } |
| [2401](#L2401) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2402](#L2402) | } |
| [2403](#L2403) | $message .= '</table>'; |
| [2404](#L2404) |  |
| [2405](#L2405) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2406](#L2406) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration', $message); |
| [2407](#L2407) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2408](#L2408) | } |
| [2409](#L2409) | } |
| [2410](#L2410) | } |
| [2411](#L2411) | } |
| [2412](#L2412) | } |
| [2413](#L2413) |  |
| [2414](#L2414) | public function showRegistration($atts = array()) { |
| [2415](#L2415) | global $cmindsPluginPackage; |
| [2416](#L2416) |  |
| [2417](#L2417) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2418](#L2418) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2419](#L2419) |  |
| [2420](#L2420) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-hidden'; |
| [2421](#L2421) | $registrationHide = filter\_input(INPUT\_GET, 'cminds\_registration\_hide'); |
| [2422](#L2422) | if ($registrationHide) { |
| [2423](#L2423) | update\_option($optionName, 1); |
| [2424](#L2424) | } |
| [2425](#L2425) | $registrationShow = filter\_input(INPUT\_GET, 'cminds\_registration\_show'); |
| [2426](#L2426) | if ($registrationShow) { |
| [2427](#L2427) | delete\_option($optionName); |
| [2428](#L2428) | } |
| [2429](#L2429) | $registrationHidden = get\_option($optionName); |
| [2430](#L2430) |  |
| [2431](#L2431) | $this->registerUser($atts); |
| [2432](#L2432) |  |
| [2433](#L2433) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2434](#L2434) | $isRegistered = $this->isRegistered(); |
| [2435](#L2435) |  |
| [2436](#L2436) | if ($isRegistered) : |
| [2437](#L2437) | return $this->showAds($atts); |
| [2438](#L2438) | else : |
| [2439](#L2439) | ob\_start(); |
| [2440](#L2440) | ?> |
| [2441](#L2441) | <style type="text/css"> |
| [2442](#L2442) |  |
| [2443](#L2443) | div.cminds\_registration\_wrapper { |
| [2444](#L2444) | display: inline-block; |
| [2445](#L2445) | padding: 1em; |
| [2446](#L2446) | background: #FFF; |
| [2447](#L2447) | margin: 1em 1em 0 0; |
| [2448](#L2448) | width: 1004px; |
| [2449](#L2449) | } |
| [2450](#L2450) |  |
| [2451](#L2451) | div.cminds\_registration\_wrapper \* { |
| [2452](#L2452) | vertical-align: top; |
| [2453](#L2453) | } |
| [2454](#L2454) |  |
| [2455](#L2455) | .cminds\_registration{ |
| [2456](#L2456) | display: inline-block; |
| [2457](#L2457) | margin: 1em; |
| [2458](#L2458) | padding: 1em 58px; |
| [2459](#L2459) | } |
| [2460](#L2460) |  |
| [2461](#L2461) | .cminds\_registration form{ |
| [2462](#L2462) | display: inline-block; |
| [2463](#L2463) | margin: 1em; |
| [2464](#L2464) | } |
| [2465](#L2465) | .cminds\_registration form .no-registration{ |
| [2466](#L2466) | margin: 5px 0 0; |
| [2467](#L2467) | text-align: center; |
| [2468](#L2468) | } |
| [2469](#L2469) |  |
| [2470](#L2470) | .cminds\_registration form input[type="submit"]{ |
| [2471](#L2471) | font-size: 16pt; |
| [2472](#L2472) | padding: 7px; |
| [2473](#L2473) | height: auto; |
| [2474](#L2474) | } |
| [2475](#L2475) |  |
| [2476](#L2476) | .cminds\_registration\_text{ |
| [2477](#L2477) | display: inline-block; |
| [2478](#L2478) | margin: 1em; |
| [2479](#L2479) | } |
| [2480](#L2480) |  |
| [2481](#L2481) | .cminds\_registration\_text > span{ |
| [2482](#L2482) | text-align: left; |
| [2483](#L2483) | display: block; |
| [2484](#L2484) | } |
| [2485](#L2485) |  |
| [2486](#L2486) | .cminds\_registration\_text .row\_1{ |
| [2487](#L2487) | font-size: 12pt; |
| [2488](#L2488) | padding-bottom: 5px; |
| [2489](#L2489) | } |
| [2490](#L2490) | .cminds\_registration\_text .row\_2{ |
| [2491](#L2491) | font-size: 10pt; |
| [2492](#L2492) | } |
| [2493](#L2493) |  |
| [2494](#L2494) | .cminds\_link{ |
| [2495](#L2495) | color: #555; |
| [2496](#L2496) | border-color: rgba(204,204,204,0.8); |
| [2497](#L2497) | background: #f7f7f7; |
| [2498](#L2498) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2499](#L2499) | box-shadow: 0 1px 0 #ccc; |
| [2500](#L2500) | display: inline-block; |
| [2501](#L2501) | text-decoration: none; |
| [2502](#L2502) | line-height: 26px; |
| [2503](#L2503) | height: 28px; |
| [2504](#L2504) | padding: 0 10px 1px; |
| [2505](#L2505) | cursor: pointer; |
| [2506](#L2506) | border-width: 1px; |
| [2507](#L2507) | border-style: solid; |
| [2508](#L2508) | -webkit-border-radius: 3px; |
| [2509](#L2509) | border-radius: 3px; |
| [2510](#L2510) | -webkit-box-sizing: border-box; |
| [2511](#L2511) | -moz-box-sizing: border-box; |
| [2512](#L2512) | box-sizing: border-box; |
| [2513](#L2513) | } |
| [2514](#L2514) |  |
| [2515](#L2515) | .cminds\_link:active { |
| [2516](#L2516) | background: #eee; |
| [2517](#L2517) | border-color: #999; |
| [2518](#L2518) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2519](#L2519) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2520](#L2520) | -webkit-transform: translateY(1px); |
| [2521](#L2521) | -ms-transform: translateY(1px); |
| [2522](#L2522) | transform: translateY(1px); |
| [2523](#L2523) | } |
| [2524](#L2524) |  |
| [2525](#L2525) | .cminds\_link:hover { |
| [2526](#L2526) | background: #eee; |
| [2527](#L2527) | border-color: #999; |
| [2528](#L2528) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2529](#L2529) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2530](#L2530) | -webkit-transform: translateY(1px); |
| [2531](#L2531) | -ms-transform: translateY(1px); |
| [2532](#L2532) | transform: translateY(1px); |
| [2533](#L2533) | } |
| [2534](#L2534) |  |
| [2535](#L2535) | .cminds\_link.blue{ |
| [2536](#L2536) | color: #fff; |
| [2537](#L2537) | border-color: #33ace7; |
| [2538](#L2538) | background: #66c1ed; |
| [2539](#L2539) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2540](#L2540) | box-shadow: 0 1px 0 #ccc; |
| [2541](#L2541) | display: inline-block; |
| [2542](#L2542) | text-decoration: none; |
| [2543](#L2543) | line-height: 26px; |
| [2544](#L2544) | height: 28px; |
| [2545](#L2545) | padding: 0 10px 1px; |
| [2546](#L2546) | cursor: pointer; |
| [2547](#L2547) | border-width: 1px; |
| [2548](#L2548) | border-style: solid; |
| [2549](#L2549) | -webkit-border-radius: 3px; |
| [2550](#L2550) | border-radius: 3px; |
| [2551](#L2551) | -webkit-box-sizing: border-box; |
| [2552](#L2552) | -moz-box-sizing: border-box; |
| [2553](#L2553) | box-sizing: border-box; |
| [2554](#L2554) |  |
| [2555](#L2555) | } |
| [2556](#L2556) |  |
| [2557](#L2557) | .cminds\_link.blue:active { |
| [2558](#L2558) | background: #0198e1; |
| [2559](#L2559) | border-color: #66c1ed; |
| [2560](#L2560) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2561](#L2561) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2562](#L2562) | -webkit-transform: translateY(1px); |
| [2563](#L2563) | -ms-transform: translateY(1px); |
| [2564](#L2564) | transform: translateY(1px); |
| [2565](#L2565) | } |
| [2566](#L2566) |  |
| [2567](#L2567) | .cminds\_link.blue:hover { |
| [2568](#L2568) | background: #005b87; |
| [2569](#L2569) | border-color: #0198e1; |
| [2570](#L2570) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2571](#L2571) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2572](#L2572) | -webkit-transform: translateY(1px); |
| [2573](#L2573) | -ms-transform: translateY(1px); |
| [2574](#L2574) | transform: translateY(1px); |
| [2575](#L2575) | } |
| [2576](#L2576) |  |
| [2577](#L2577) | .cminds\_link.orange{ |
| [2578](#L2578) | color: #fff; |
| [2579](#L2579) | border-color: #ffb752; |
| [2580](#L2580) | background: #ffb752; |
| [2581](#L2581) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2582](#L2582) | box-shadow: 0 1px 0 #ccc; |
| [2583](#L2583) | display: inline-block; |
| [2584](#L2584) | text-decoration: none; |
| [2585](#L2585) | line-height: 26px; |
| [2586](#L2586) | height: 28px; |
| [2587](#L2587) | padding: 0 10px 1px; |
| [2588](#L2588) | cursor: pointer; |
| [2589](#L2589) | border-width: 1px; |
| [2590](#L2590) | border-style: solid; |
| [2591](#L2591) | -webkit-border-radius: 3px; |
| [2592](#L2592) | border-radius: 3px; |
| [2593](#L2593) | -webkit-box-sizing: border-box; |
| [2594](#L2594) | -moz-box-sizing: border-box; |
| [2595](#L2595) | box-sizing: border-box; |
| [2596](#L2596) |  |
| [2597](#L2597) | } |
| [2598](#L2598) |  |
| [2599](#L2599) | .cminds\_link.orange:active { |
| [2600](#L2600) | background: #e5a449; |
| [2601](#L2601) | border-color: #ffc574; |
| [2602](#L2602) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2603](#L2603) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2604](#L2604) | -webkit-transform: translateY(1px); |
| [2605](#L2605) | -ms-transform: translateY(1px); |
| [2606](#L2606) | transform: translateY(1px); |
| [2607](#L2607) | } |
| [2608](#L2608) |  |
| [2609](#L2609) | .cminds\_link.orange:hover { |
| [2610](#L2610) | background: #e5a449; |
| [2611](#L2611) | border-color: #ffc574; |
| [2612](#L2612) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2613](#L2613) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2614](#L2614) | -webkit-transform: translateY(1px); |
| [2615](#L2615) | -ms-transform: translateY(1px); |
| [2616](#L2616) | transform: translateY(1px); |
| [2617](#L2617) | } |
| [2618](#L2618) |  |
| [2619](#L2619) | .clear, .clearfix{ |
| [2620](#L2620) | clear:both; |
| [2621](#L2621) | } |
| [2622](#L2622) | .cmclearfix{ |
| [2623](#L2623) | clear:both !important; |
| [2624](#L2624) | } |
| [2625](#L2625) |  |
| [2626](#L2626) | </style> |
| [2627](#L2627) |  |
| [2628](#L2628) | <?php if (!$registrationHidden) : ?> |
| [2629](#L2629) |  |
| [2630](#L2630) | <div class="cminds\_registration\_wrapper"> |
| [2631](#L2631) | <div class="cminds\_registration"> |
| [2632](#L2632) | <table><tr> |
| [2633](#L2633) | <td> |
| [2634](#L2634) | <form method="post" action=""> |
| [2635](#L2635) | <?php |
| [2636](#L2636) | wp\_nonce\_field('cminds\_register\_free', 'cminds\_nonce'); |
| [2637](#L2637) | echo $currentPlugin->getRegistrationFields(); |
| [2638](#L2638) | ?> |
| [2639](#L2639) | <input class="button button-primary" style="background-color:green;" type="submit" value="Register Your Copy" /> |
| [2640](#L2640) | <div class="no-registration"> |
| [2641](#L2641) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_hide' => 1), remove\_query\_arg('cminds\_registration\_show'))); ?>">I don't want to register now</a> |
| [2642](#L2642) | </div> |
| [2643](#L2643) | </form> |
| [2644](#L2644) | </td> |
| [2645](#L2645) | <td> |
| [2646](#L2646) | <div class="cminds\_registration\_text"> |
| [2647](#L2647) | <span class="row\_1"> |
| [2648](#L2648) | Once registered, you will receive updates and special offers. |
| [2649](#L2649) | </span> |
| [2650](#L2650) | <span class="row\_2"> |
| [2651](#L2651) | <p>We will only send once, your administrator's e-mail and site URL to CreativeMinds server.<br /> No additional information will be ever collected or sent.</p> |
| [2652](#L2652) | </span> |
| [2653](#L2653) | </td> |
| [2654](#L2654) | </tr> |
| [2655](#L2655) | </table> |
| [2656](#L2656) | </div> |
| [2657](#L2657) | </div> |
| [2658](#L2658) | </div> |
| [2659](#L2659) | <?php else : ?> |
| [2660](#L2660) | <div class="cminds\_registration\_wrapper"> |
| [2661](#L2661) | <div> |
| [2662](#L2662) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_show' => 1), remove\_query\_arg('cminds\_registration\_hide'))); ?>">Show registration box</a> |
| [2663](#L2663) | <a href="<?php echo $this->getStoreUrl(); ?>" class="cminds\_link orange" target="\_blank">View all CreativeMidns Plugins</a> |
| [2664](#L2664) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Bundle')); ?>" class="cminds\_link blue" target="\_blank">View Bundles</a> |
| [2665](#L2665) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Add-On')); ?>" class="cminds\_link blue" target="\_blank">View Add-Ons</a> |
| [2666](#L2666) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Service')); ?>" class="cminds\_link blue" target="\_blank">View Services</a> |
| [2667](#L2667) | </div> |
| [2668](#L2668) | </div> |
| [2669](#L2669) | <?php |
| [2670](#L2670) | endif; |
| [2671](#L2671) | echo $this->showUpgrade($atts); |
| [2672](#L2672) | ?> |
| [2673](#L2673) | <div class="clear clearfix cmclearfix"></div> |
| [2674](#L2674) | <?php |
| [2675](#L2675) | $content = ob\_get\_clean(); |
| [2676](#L2676) | return $content; |
| [2677](#L2677) | endif; |
| [2678](#L2678) | } |
| [2679](#L2679) |  |
| [2680](#L2680) | /\*\* |
| [2681](#L2681) | \* Displays the horizontal navigation bar |
| [2682](#L2682) | \* @global string $submenu |
| [2683](#L2683) | \* @global type $plugin\_page |
| [2684](#L2684) | \*/ |
| [2685](#L2685) | protected function showNav() { |
| [2686](#L2686) |  |
| [2687](#L2687) | global $self, $plugin\_page, $typenow, $submenu; |
| [2688](#L2688) |  |
| [2689](#L2689) | $submenus = array(); |
| [2690](#L2690) | $menuItem = $this->getOption('plugin-menu-item'); |
| [2691](#L2691) | $pluginAbbrev = $this->getOption('plugin-abbrev'); |
| [2692](#L2692) |  |
| [2693](#L2693) | ob\_start(); |
| [2694](#L2694) |  |
| [2695](#L2695) | if (isset($submenu[$menuItem])) { |
| [2696](#L2696) |  |
| [2697](#L2697) | $thisMenu = $submenu[$menuItem]; |
| [2698](#L2698) |  |
| [2699](#L2699) | foreach ($thisMenu as $sub\_item) { |
| [2700](#L2700) |  |
| [2701](#L2701) | $slug = $sub\_item[2]; |
| [2702](#L2702) |  |
| [2703](#L2703) | // Handle current for post\_type=post|page|foo pages, which won't match $self. |
| [2704](#L2704) | $self\_type = !empty($typenow) ? $self . '?post\_type=' . $typenow : 'nothing'; |
| [2705](#L2705) |  |
| [2706](#L2706) | $isCurrent = FALSE; |
| [2707](#L2707) |  |
| [2708](#L2708) | $subpageUrl = get\_admin\_url('', 'admin.php?page=' . $slug); |
| [2709](#L2709) |  |
| [2710](#L2710) | if ((!isset($plugin\_page) && $self == $slug) || ( isset($plugin\_page) && $plugin\_page == $slug && ( $menuItem == $self\_type || $menuItem == $self || file\_exists($menuItem) === false ))) { |
| [2711](#L2711) | $isCurrent = TRUE; |
| [2712](#L2712) | } |
| [2713](#L2713) |  |
| [2714](#L2714) | $url = ( strpos($slug, '.php') !== false || strpos($slug, 'http://') !== false || strpos($slug, 'https://') !== false ) ? $slug : $subpageUrl; |
| [2715](#L2715) |  |
| [2716](#L2716) | $isExternal = ( $slug === $url ) ? TRUE : FALSE; |
| [2717](#L2717) |  |
| [2718](#L2718) | /\* |
| [2719](#L2719) | \* Don't show on the Upgrade page itself |
| [2720](#L2720) | \*/ |
| [2721](#L2721) | if (!empty($\_GET['page']) && $\_GET['page'] == $pluginAbbrev . '\_pro' && $slug == $pluginAbbrev . '\_pro') { |
| [2722](#L2722) | continue; |
| [2723](#L2723) | } |
| [2724](#L2724) |  |
| [2725](#L2725) | $submenus[] = array( |
| [2726](#L2726) | 'link'     => $url, |
| [2727](#L2727) | 'title'    => $sub\_item[0], |
| [2728](#L2728) | 'current'  => $isCurrent, |
| [2729](#L2729) | 'external' => $isExternal |
| [2730](#L2730) | ); |
| [2731](#L2731) | } |
| [2732](#L2732) | ?> |
| [2733](#L2733) | <div id="cmhandfsl\_admin\_nav"> |
| [2734](#L2734) | <ul class="subsubsub"> |
| [2735](#L2735) | <?php foreach ($submenus as $menu): ?> |
| [2736](#L2736) |  |
| [2737](#L2737) | <li><a href="<?php echo esc\_attr($menu['link']); ?>" <?php echo ( $menu['current'] ) ? 'class="current"' : ''; ?> <?php |
| [2738](#L2738) | if ($menu['external']) { |
| [2739](#L2739) | echo 'target="\_blank"'; |
| [2740](#L2740) | } |
| [2741](#L2741) | ?>><?php echo esc\_html($menu['title']); ?> |
| [2742](#L2742) | </a></li> |
| [2743](#L2743) | <?php endforeach; ?> |
| [2744](#L2744) | </ul> |
| [2745](#L2745) | <br class="clear" /> |
| [2746](#L2746) | </div> |
| [2747](#L2747) | <?php |
| [2748](#L2748) | } |
| [2749](#L2749) |  |
| [2750](#L2750) | $nav = ob\_get\_contents(); |
| [2751](#L2751) | ob\_end\_clean(); |
| [2752](#L2752) | return $nav; |
| [2753](#L2753) | } |
| [2754](#L2754) |  |
| [2755](#L2755) | public function cminds\_compatibility\_check($plaintext = false) { |
| [2756](#L2756) | global $wp\_version; |
| [2757](#L2757) | $upload\_max = ini\_get('upload\_max\_filesize') ? ini\_get('upload\_max\_filesize') : 'N/A'; |
| [2758](#L2758) | $post\_max = ini\_get('post\_max\_size') ? ini\_get('post\_max\_size') : 'N/A'; |
| [2759](#L2759) | $memory\_limit = ini\_get('memory\_limit') ? ini\_get('memory\_limit') : 'N/A'; |
| [2760](#L2760) | $allow\_url\_fopen = ini\_get('allow\_url\_fopen') ? ini\_get('allow\_url\_fopen') : 'N/A'; |
| [2761](#L2761) | $max\_execution\_time = ini\_get('max\_execution\_time') !== FALSE ? ini\_get('max\_execution\_time') : 'N/A'; |
| [2762](#L2762) | $cURL = function\_exists('curl\_version') ? 'On' : 'Off'; |
| [2763](#L2763) | $mb\_support = function\_exists('mb\_strtolower') ? 'On' : 'Off'; |
| [2764](#L2764) | $intl\_support = extension\_loaded('intl') ? 'On' : 'Off'; |
| [2765](#L2765) | $iconv\_support = extension\_loaded('iconv') ? 'On' : 'Off'; |
| [2766](#L2766) |  |
| [2767](#L2767) | $permalink\_structure = get\_option('permalink\_structure'); |
| [2768](#L2768) | $permalinksurl = self\_admin\_url('options-permalink.php'); |
| [2769](#L2769) |  |
| [2770](#L2770) | $content = ''; |
| [2771](#L2771) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2772](#L2772) | ob\_start(); |
| [2773](#L2773) | if (!$plaintext): |
| [2774](#L2774) | ?> |
| [2775](#L2775) | <span class="description" style=""> |
| [2776](#L2776) | The information in this table is useful to check if the plugin might have some incompabilities with you server. |
| [2777](#L2777) | </span> |
| [2778](#L2778) | <table class="form-table server-info-table"> |
| [2779](#L2779) | <tr> |
| [2780](#L2780) | <td>Package Version</td> |
| [2781](#L2781) | <td><?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?></td> |
| [2782](#L2782) | <td><span>OK</span></td> |
| [2783](#L2783) | </tr> |
| [2784](#L2784) | <tr> |
| [2785](#L2785) | <td>WordPress Version</td> |
| [2786](#L2786) | <td><?php echo $wp\_version; ?></td> |
| [2787](#L2787) | <td><?php if (version\_compare($wp\_version, '3.3.0', '<')): ?><strong>The minimum supported version of WordPress is 3.3</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2788](#L2788) | </tr> |
| [2789](#L2789) | <tr> |
| [2790](#L2790) | <td>Permalinks enabled</td> |
| [2791](#L2791) | <td><?php echo ($permalink\_structure) ? 'Yes' : 'No' ?></td> |
| [2792](#L2792) | <td><?php if (empty($permalink\_structure)): ?><strong>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a></strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2793](#L2793) | </tr> |
| [2794](#L2794) | <tr> |
| [2795](#L2795) | <td>PHP Version</td> |
| [2796](#L2796) | <td><?php echo phpversion(); ?></td> |
| [2797](#L2797) | <td><?php if (version\_compare(phpversion(), '5.3.0', '<')): ?><strong>Recommended 5.3 or higher</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2798](#L2798) | </tr> |
| [2799](#L2799) | <tr> |
| [2800](#L2800) | <td>mbstring support</td> |
| [2801](#L2801) | <td><?php echo $mb\_support; ?></td> |
| [2802](#L2802) | <td><?php if ($mb\_support == 'Off'): ?> |
| [2803](#L2803) | <strong>"mbstring" library is required for plugin to work.</strong> |
| [2804](#L2804) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2805](#L2805) | </tr> |
| [2806](#L2806) | <tr> |
| [2807](#L2807) | <td>intl support</td> |
| [2808](#L2808) | <td><?php echo $intl\_support; ?></td> |
| [2809](#L2809) | <td><?php if ($intl\_support == 'Off'): ?> |
| [2810](#L2810) | <strong>"intl" library is required for proper sorting of accented (non-ASCII) characters.</strong> |
| [2811](#L2811) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2812](#L2812) | </tr> |
| [2813](#L2813) | <tr> |
| [2814](#L2814) | <td>iconv support</td> |
| [2815](#L2815) | <td><?php echo $iconv\_support; ?></td> |
| [2816](#L2816) | <td><?php if ($iconv\_support == 'Off'): ?> |
| [2817](#L2817) | <strong>"iconv" library is required for converting non-UTF-8 characters.</strong> |
| [2818](#L2818) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2819](#L2819) | </tr> |
| [2820](#L2820) | <tr> |
| [2821](#L2821) | <td>PHP Memory Limit</td> |
| [2822](#L2822) | <td><?php echo $memory\_limit; ?></td> |
| [2823](#L2823) | <td><?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2824](#L2824) | <strong>This value can be too low for a site with big glossary.</strong> |
| [2825](#L2825) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2826](#L2826) | </tr> |
| [2827](#L2827) | <tr> |
| [2828](#L2828) | <td>PHP Max Upload Size</td> |
| [2829](#L2829) | <td><?php echo $upload\_max; ?></td> |
| [2830](#L2830) | <td><?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2831](#L2831) | <strong>This value can be too low to import large files.</strong> |
| [2832](#L2832) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2833](#L2833) | </tr> |
| [2834](#L2834) | <tr> |
| [2835](#L2835) | <td>PHP Max Post Size</td> |
| [2836](#L2836) | <td><?php echo $post\_max; ?></td> |
| [2837](#L2837) | <td><?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2838](#L2838) | <strong>This value can be too low to import large files.</strong> |
| [2839](#L2839) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2840](#L2840) | </tr> |
| [2841](#L2841) | <tr> |
| [2842](#L2842) | <td>PHP Max Execution Time </td> |
| [2843](#L2843) | <td><?php echo $max\_execution\_time; ?></td> |
| [2844](#L2844) | <td><?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2845](#L2845) | <strong>This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit.</strong> |
| [2846](#L2846) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2847](#L2847) | </tr> |
| [2848](#L2848) | <tr> |
| [2849](#L2849) | <td>PHP cURL</td> |
| [2850](#L2850) | <td><?php echo $cURL; ?></td> |
| [2851](#L2851) | <td><?php if ($cURL == 'Off'): ?> |
| [2852](#L2852) | <strong>cURL library is required to check if remote audio file exists.</strong> |
| [2853](#L2853) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2854](#L2854) | </tr> |
| [2855](#L2855) | <tr> |
| [2856](#L2856) | <td>PHP allow\_url\_fopen</td> |
| [2857](#L2857) | <td><?php echo $allow\_url\_fopen; ?></td> |
| [2858](#L2858) | <td><?php if ($allow\_url\_fopen == '0'): ?> |
| [2859](#L2859) | <strong>allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API.</strong> |
| [2860](#L2860) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2861](#L2861) | </tr> |
| [2862](#L2862) | </table> |
| [2863](#L2863) | <?php |
| [2864](#L2864) | else: |
| [2865](#L2865) | ?> |
| [2866](#L2866) | Package Version         <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?>    OK |
| [2867](#L2867) |  |
| [2868](#L2868) | WordPress Version               <?php echo $wp\_version; ?> |
| [2869](#L2869) | <?php if (version\_compare($wp\_version, '3.3.0', '<')): ?>The minimum supported version of WordPress is 3.3<?php else: ?>OK<?php endif; ?> |
| [2870](#L2870) |  |
| [2871](#L2871) | Permalinks enabled              <?php echo ($permalink\_structure) ? 'Yes' : 'No' ?> |
| [2872](#L2872) | <?php if (empty($permalink\_structure)): ?>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a><?php else: ?>OK<?php endif; ?> |
| [2873](#L2873) |  |
| [2874](#L2874) | PHP Version             <?php echo phpversion(); ?> |
| [2875](#L2875) | <?php if (version\_compare(phpversion(), '5.3.0', '<')): ?>Recommended 5.3 or higher<?php else: ?>OK<?php endif; ?> |
| [2876](#L2876) |  |
| [2877](#L2877) | mbstring support                <?php echo $mb\_support; ?> |
| [2878](#L2878) | <?php if ($mb\_support == 'Off'): ?> |
| [2879](#L2879) | "mbstring" library is required for plugin to work. |
| [2880](#L2880) | <?php else: ?>OK<?php endif; ?> |
| [2881](#L2881) |  |
| [2882](#L2882) | intl support            <?php echo $intl\_support; ?> |
| [2883](#L2883) | <?php if ($intl\_support == 'Off'): ?> |
| [2884](#L2884) | "intl" library is required for proper sorting of accented characters on Glossary Index page. |
| [2885](#L2885) | <?php else: ?>OK<?php endif; ?> |
| [2886](#L2886) |  |
| [2887](#L2887) | PHP Memory Limit                <?php echo $memory\_limit; ?> |
| [2888](#L2888) | <?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2889](#L2889) | This value can be too low for a site with big glossary. |
| [2890](#L2890) | <?php else: ?>OK<?php endif; ?> |
| [2891](#L2891) |  |
| [2892](#L2892) | PHP Max Upload Size             <?php echo $upload\_max; ?> |
| [2893](#L2893) | <?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2894](#L2894) | This value can be too low to import large files. |
| [2895](#L2895) | <?php else: ?>OK<?php endif; ?> |
| [2896](#L2896) |  |
| [2897](#L2897) | PHP Max Post Size               <?php echo $post\_max; ?> |
| [2898](#L2898) | <?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2899](#L2899) | This value can be too low to import large files. |
| [2900](#L2900) | <?php else: ?>OK<?php endif; ?> |
| [2901](#L2901) |  |
| [2902](#L2902) | PHP Max Execution Time          <?php echo $max\_execution\_time; ?> |
| [2903](#L2903) | <?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2904](#L2904) | This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit. |
| [2905](#L2905) | <?php else: ?>OK<?php endif; ?> |
| [2906](#L2906) |  |
| [2907](#L2907) | PHP cURL                <?php echo $cURL; ?> |
| [2908](#L2908) | <?php if ($cURL == 'Off'): ?> |
| [2909](#L2909) | cURL library is required to check if remote audio file exists. |
| [2910](#L2910) | <?php else: ?>OK<?php endif; ?> |
| [2911](#L2911) |  |
| [2912](#L2912) | PHP allow\_url\_fopen             <?php echo $allow\_url\_fopen; ?> |
| [2913](#L2913) | <?php if ($allow\_url\_fopen == '0'): ?> |
| [2914](#L2914) | allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API. |
| [2915](#L2915) | <?php else: ?>OK<?php endif; ?> |
| [2916](#L2916) |  |
| [2917](#L2917) | <?php |
| [2918](#L2918) | endif; |
| [2919](#L2919) | $content .= ob\_get\_clean(); |
| [2920](#L2920) | return $content; |
| [2921](#L2921) | } |
| [2922](#L2922) |  |
| [2923](#L2923) | /\*\* |
| [2924](#L2924) | \* System info |
| [2925](#L2925) | \* |
| [2926](#L2926) | \* Shows the system info panel which contains version data and debug info. |
| [2927](#L2927) | \* The data for the system info is generated by the Browser class. |
| [2928](#L2928) | \* |
| [2929](#L2929) | \* @since 1.4 |
| [2930](#L2930) | \* @global $wpdb |
| [2931](#L2931) | \* @global object $wpdb Used to query the database using the WordPress |
| [2932](#L2932) | \*   Database API |
| [2933](#L2933) | \* @return void |
| [2934](#L2934) | \*/ |
| [2935](#L2935) | public function cminds\_system\_info() { |
| [2936](#L2936) | ?> |
| [2937](#L2937) | <div class=""> |
| [2938](#L2938) | <h2><?php \_\_('System Information', 'cminds-package'); ?></h2><br/> |
| [2939](#L2939) | <form action="<?php echo esc\_url(admin\_url('admin.php?page=cmtt\_licensing')); ?>" method="post" dir="ltr"> |
| [2940](#L2940) | <p class="submit"> |
| [2941](#L2941) | <?php wp\_nonce\_field( 'system\_information\_download\_form\_nonce', 'system\_information\_download\_form\_nonce' ); ?> |
| [2942](#L2942) | <input type="hidden" name="cminds\_action" value="download\_sysinfo" /> |
| [2943](#L2943) | <?php submit\_button('Download system information file', 'primary', 'cminds-download-sysinfo', false); ?> |
| [2944](#L2944) | </p> |
| [2945](#L2945) | <textarea class="cminds\_system\_info\_area" readonly="readonly" onclick="this.focus( ); |
| [2946](#L2946) | this.select( )" id="system-info-textarea" name="cminds-sysinfo" title="<?php \_e('To copy the system info, click below then press Ctrl + C (PC) or Cmd + C (Mac).', 'edd'); ?>"> |
| [2947](#L2947) | <?php $this->cminds\_system\_info\_content(); ?> |
| [2948](#L2948) | </textarea> |
| [2949](#L2949) | </form> |
| [2950](#L2950) | </div> |
| [2951](#L2951) | <?php |
| [2952](#L2952) | } |
| [2953](#L2953) |  |
| [2954](#L2954) | /\*\* |
| [2955](#L2955) | \* Generates the System Info Download File |
| [2956](#L2956) | \* |
| [2957](#L2957) | \* @since 1.4 |
| [2958](#L2958) | \* @return void |
| [2959](#L2959) | \*/ |
| [2960](#L2960) | public function cminds\_system\_info\_content() { |
| [2961](#L2961) | global $wpdb; |
| [2962](#L2962) |  |
| [2963](#L2963) | if (get\_bloginfo('version') < '3.4') { |
| [2964](#L2964) | $theme\_data = get\_theme\_data(get\_stylesheet\_directory() . '/style.css'); |
| [2965](#L2965) | $theme = $theme\_data['Name'] . ' ' . $theme\_data['Version']; |
| [2966](#L2966) | } else { |
| [2967](#L2967) | $theme\_data = wp\_get\_theme(); |
| [2968](#L2968) | $theme = $theme\_data->Name . ' ' . $theme\_data->Version; |
| [2969](#L2969) | } |
| [2970](#L2970) |  |
| [2971](#L2971) | // Try to identifty the hosting provider |
| [2972](#L2972) | $host = false; |
| [2973](#L2973) | if (defined('WPE\_APIKEY')) { |
| [2974](#L2974) | $host = 'WP Engine'; |
| [2975](#L2975) | } elseif (defined('PAGELYBIN')) { |
| [2976](#L2976) | $host = 'Pagely'; |
| [2977](#L2977) | } |
| [2978](#L2978) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2979](#L2979) | ?> |
| [2980](#L2980) | ### Begin System Info ### |
| [2981](#L2981) |  |
| [2982](#L2982) | ## Please include this information when posting support requests ## |
| [2983](#L2983) |  |
| [2984](#L2984) | <?php do\_action('cminds\_system\_info\_before'); ?> |
| [2985](#L2985) |  |
| [2986](#L2986) | Package Version:                <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?> |
| [2987](#L2987) |  |
| [2988](#L2988) | Multisite:                <?php echo is\_multisite() ? 'Yes' . "\n" : 'No' . "\n" ?> |
| [2989](#L2989) |  |
| [2990](#L2990) | SITE\_URL:                 <?php echo site\_url() . "\n"; ?> |
| [2991](#L2991) | HOME\_URL:                 <?php echo home\_url() . "\n"; ?> |
| [2992](#L2992) |  |
| [2993](#L2993) | WordPress Version:        <?php echo get\_bloginfo('version') . "\n"; ?> |
| [2994](#L2994) | Permalink Structure:      <?php echo get\_option('permalink\_structure') . "\n"; ?> |
| [2995](#L2995) | Active Theme:             <?php echo $theme . "\n"; ?> |
| [2996](#L2996) | <?php if ($host) : ?> |
| [2997](#L2997) | Host:                     <?php echo $host . "\n"; ?> |
| [2998](#L2998) | <?php endif; ?> |
| [2999](#L2999) |  |
| [3000](#L3000) | Registered Post Stati:    <?php echo implode(', ', get\_post\_stati()) . "\n\n"; ?> |
| [3001](#L3001) |  |
| [3002](#L3002) | PHP Version:              <?php echo PHP\_VERSION . "\n"; ?> |
| [3003](#L3003) | MySQL Version:            <?php echo (function\_exists('mysqli\_get\_server\_info')) ? mysqli\_get\_server\_info($wpdb->dbh) . "\n" : 'N/A' . "\n"; ?> |
| [3004](#L3004) | Web Server Info:          <?php echo $\_SERVER['SERVER\_SOFTWARE'] . "\n"; ?> |
| [3005](#L3005) |  |
| [3006](#L3006) | WordPress Memory Limit:   <?php echo WP\_MEMORY\_LIMIT ?><?php echo "\n"; ?> |
| [3007](#L3007) | PHP Memory Limit:         <?php echo ini\_get('memory\_limit') . "\n"; ?> |
| [3008](#L3008) | PHP Upload Max Size:      <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3009](#L3009) | PHP Post Max Size:        <?php echo ini\_get('post\_max\_size') . "\n"; ?> |
| [3010](#L3010) | PHP Upload Max Filesize:  <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3011](#L3011) | PHP Time Limit:           <?php echo ini\_get('max\_execution\_time') . "\n"; ?> |
| [3012](#L3012) | PHP Max Input Vars:       <?php echo ini\_get('max\_input\_vars') . "\n"; ?> |
| [3013](#L3013) | PHP Arg Separator:        <?php echo ini\_get('arg\_separator.output') . "\n"; ?> |
| [3014](#L3014) | PHP Allow URL File Open:  <?php echo ini\_get('allow\_url\_fopen') ? "Yes" : "No\n"; ?> |
| [3015](#L3015) |  |
| [3016](#L3016) | WP\_DEBUG:                 <?php echo defined('WP\_DEBUG') ? WP\_DEBUG ? 'Enabled' . "\n" : 'Disabled' . "\n" : 'Not set' . "\n" ?> |
| [3017](#L3017) |  |
| [3018](#L3018) | WP Table Prefix:          <?php |
| [3019](#L3019) | echo "Length: " . strlen($wpdb->prefix); |
| [3020](#L3020) | echo " Status:"; |
| [3021](#L3021) | if (strlen($wpdb->prefix) > 16) { |
| [3022](#L3022) | echo " ERROR: Too Long"; |
| [3023](#L3023) | } else { |
| [3024](#L3024) | echo " Acceptable"; |
| [3025](#L3025) | } echo "\n"; |
| [3026](#L3026) | ?> |
| [3027](#L3027) |  |
| [3028](#L3028) | Show On Front:            <?php echo get\_option('show\_on\_front') . "\n" ?> |
| [3029](#L3029) | Page On Front:            <?php |
| [3030](#L3030) | $id = get\_option('page\_on\_front'); |
| [3031](#L3031) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3032](#L3032) | ?> |
| [3033](#L3033) | Page For Posts:           <?php |
| [3034](#L3034) | $id = get\_option('page\_for\_posts'); |
| [3035](#L3035) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3036](#L3036) | ?> |
| [3037](#L3037) |  |
| [3038](#L3038) | <?php |
| [3039](#L3039) | $request['cmd'] = '\_notify-validate'; |
| [3040](#L3040) |  |
| [3041](#L3041) | $params = array( |
| [3042](#L3042) | 'sslverify'  => false, |
| [3043](#L3043) | 'timeout'    => 60, |
| [3044](#L3044) | 'user-agent' => 'Cminds/' . $this->getOption('plugin-version'), |
| [3045](#L3045) | 'body'       => $request |
| [3046](#L3046) | ); |
| [3047](#L3047) |  |
| [3048](#L3048) | $response = wp\_remote\_post('https://www.paypal.com/cgi-bin/webscr', $params); |
| [3049](#L3049) |  |
| [3050](#L3050) | if (!is\_wp\_error($response) && $response['response']['code'] >= 200 && $response['response']['code'] < 300) { |
| [3051](#L3051) | $WP\_REMOTE\_POST = 'wp\_remote\_post() works' . "\n"; |
| [3052](#L3052) | } else { |
| [3053](#L3053) | $WP\_REMOTE\_POST = 'wp\_remote\_post() does not work' . "\n"; |
| [3054](#L3054) | } |
| [3055](#L3055) | ?> |
| [3056](#L3056) | WP Remote Post:           <?php echo $WP\_REMOTE\_POST; ?> |
| [3057](#L3057) |  |
| [3058](#L3058) | Session:                  <?php echo isset($\_SESSION) ? 'Enabled' : 'Disabled'; ?><?php echo "\n"; ?> |
| [3059](#L3059) | Session Name:             <?php echo esc\_html(ini\_get('session.name')); ?><?php echo "\n"; ?> |
| [3060](#L3060) | Cookie Path:              <?php echo esc\_html(ini\_get('session.cookie\_path')); ?><?php echo "\n"; ?> |
| [3061](#L3061) | Save Path:                <?php echo esc\_html(ini\_get('session.save\_path')); ?><?php echo "\n"; ?> |
| [3062](#L3062) | Use Cookies:              <?php echo ini\_get('session.use\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3063](#L3063) | Use Only Cookies:         <?php echo ini\_get('session.use\_only\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3064](#L3064) |  |
| [3065](#L3065) | DISPLAY ERRORS:           <?php echo ( ini\_get('display\_errors') ) ? 'On (' . ini\_get('display\_errors') . ')' : 'N/A'; ?><?php echo "\n"; ?> |
| [3066](#L3066) | FSOCKOPEN:                <?php echo ( function\_exists('fsockopen') ) ? 'Your server supports fsockopen.' : 'Your server does not support fsockopen.'; ?><?php echo "\n"; ?> |
| [3067](#L3067) | cURL:                     <?php echo ( function\_exists('curl\_init') ) ? 'Your server supports cURL.' : 'Your server does not support cURL.'; ?><?php echo "\n"; ?> |
| [3068](#L3068) | SOAP Client:              <?php echo ( class\_exists('SoapClient') ) ? 'Your server has the SOAP Client enabled.' : 'Your server does not have the SOAP Client enabled.'; ?><?php echo "\n"; ?> |
| [3069](#L3069) | SUHOSIN:                  <?php echo ( extension\_loaded('suhosin') ) ? 'Your server has SUHOSIN installed.' : 'Your server does not have SUHOSIN installed.'; ?><?php echo "\n"; ?> |
| [3070](#L3070) |  |
| [3071](#L3071) | ##COMPATIBILITY |
| [3072](#L3072) |  |
| [3073](#L3073) | <?php echo $this->cminds\_compatibility\_check(true); ?> |
| [3074](#L3074) |  |
| [3075](#L3075) | ##ACTIVE PLUGINS: |
| [3076](#L3076) |  |
| [3077](#L3077) | <?php |
| [3078](#L3078) | $plugins = get\_plugins(); |
| [3079](#L3079) | $active\_plugins = get\_option('active\_plugins', array()); |
| [3080](#L3080) |  |
| [3081](#L3081) | foreach ($plugins as $plugin\_path => $plugin) { |
| [3082](#L3082) | // If the plugin isn't active, don't show it. |
| [3083](#L3083) | if (!in\_array($plugin\_path, $active\_plugins)) |
| [3084](#L3084) | continue; |
| [3085](#L3085) |  |
| [3086](#L3086) | echo $plugin['Name'] . ': ' . $plugin['Version'] . "\n"; |
| [3087](#L3087) | } |
| [3088](#L3088) |  |
| [3089](#L3089) | if (is\_multisite()) : |
| [3090](#L3090) | ?> |
| [3091](#L3091) |  |
| [3092](#L3092) | NETWORK ACTIVE PLUGINS: |
| [3093](#L3093) |  |
| [3094](#L3094) | <?php |
| [3095](#L3095) | $plugins = wp\_get\_active\_network\_plugins(); |
| [3096](#L3096) | $active\_plugins = get\_site\_option('active\_sitewide\_plugins', array()); |
| [3097](#L3097) |  |
| [3098](#L3098) | foreach ($plugins as $plugin\_path) { |
| [3099](#L3099) | $plugin\_base = plugin\_basename($plugin\_path); |
| [3100](#L3100) |  |
| [3101](#L3101) | // If the plugin isn't active, don't show it. |
| [3102](#L3102) | if (!array\_key\_exists($plugin\_base, $active\_plugins)) |
| [3103](#L3103) | continue; |
| [3104](#L3104) |  |
| [3105](#L3105) | $plugin = get\_plugin\_data($plugin\_path); |
| [3106](#L3106) |  |
| [3107](#L3107) | echo $plugin['Name'] . ' :' . $plugin['Version'] . "\n"; |
| [3108](#L3108) | } |
| [3109](#L3109) |  |
| [3110](#L3110) | endif; |
| [3111](#L3111) | do\_action('cminds\_system\_info\_after'); |
| [3112](#L3112) | ?> |
| [3113](#L3113) | ### End System Info ### |
| [3114](#L3114) | <?php |
| [3115](#L3115) | } |
| [3116](#L3116) |  |
| [3117](#L3117) | /\*\* |
| [3118](#L3118) | \* Generates the System Info Download File |
| [3119](#L3119) | \* |
| [3120](#L3120) | \* @since 1.4 |
| [3121](#L3121) | \* @return void |
| [3122](#L3122) | \*/ |
| [3123](#L3123) | public function cminds\_generate\_sysinfo\_download() { |
| [3124](#L3124) | if ( wp\_verify\_nonce( $\_POST['system\_information\_download\_form\_nonce'], 'system\_information\_download\_form\_nonce' ) ) { |
| [3125](#L3125) | nocache\_headers(); |
| [3126](#L3126) |  |
| [3127](#L3127) | header("Content-type: text/plain"); |
| [3128](#L3128) | header('Content-Disposition: attachment; filename="cminds-system-info.txt"'); |
| [3129](#L3129) |  |
| [3130](#L3130) | echo wp\_strip\_all\_tags($\_POST['cminds-sysinfo']); |
| [3131](#L3131) | die(); |
| [3132](#L3132) | } |
| [3133](#L3133) | } |
| [3134](#L3134) |  |
| [3135](#L3135) | public function getOption($key, $default = NULL) { |
| [3136](#L3136) | $value = isset($this->config[$key]) ? $this->config[$key] : $default; |
| [3137](#L3137) | return $value; |
| [3138](#L3138) | } |
| [3139](#L3139) |  |
| [3140](#L3140) | public function getPageUrl($pageBase = 'licensing') { |
| [3141](#L3141) | $pluginMenuPageBase = $this->pluginMenu; |
| [3142](#L3142) | $abbrev = $this->getOption('plugin-is-addon') ? $this->getOption('plugin-parent-abbrev') : $this->getOption('plugin-abbrev'); |
| [3143](#L3143) | if (empty($abbrev)) { |
| [3144](#L3144) | /\* |
| [3145](#L3145) | \* Abbrev not set for the plugin try to guess |
| [3146](#L3146) | \*/ |
| [3147](#L3147) | $abbrev = substr($this->getOption('plugin-abbrev'), 0, -1); |
| [3148](#L3148) | } |
| [3149](#L3149) | $page = $abbrev . '\_' . $pageBase; |
| [3150](#L3150) | if (FALSE === strpos($pluginMenuPageBase, '.php')) { |
| [3151](#L3151) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url('admin.php'))); |
| [3152](#L3152) | } else { |
| [3153](#L3153) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url($pluginMenuPageBase))); |
| [3154](#L3154) | } |
| [3155](#L3155) | return $pageUrl; |
| [3156](#L3156) | } |
| [3157](#L3157) |  |
| [3158](#L3158) | /\*\* |
| [3159](#L3159) | \* Converts the Apache memory values to number of bytes ini\_get('upload\_max\_filesize') or ini\_get('post\_max\_size') |
| [3160](#L3160) | \* @param type $str |
| [3161](#L3161) | \* @return type |
| [3162](#L3162) | \*/ |
| [3163](#L3163) | public static function cminds\_units2bytes($str) { |
| [3164](#L3164) | $units = array('B', 'K', 'M', 'G', 'T'); |
| [3165](#L3165) | $unit = preg\_replace('/[0-9]/', '', $str); |
| [3166](#L3166) | $unitFactor = array\_search(strtoupper($unit), $units); |
| [3167](#L3167) | if ($unitFactor !== false) { |
| [3168](#L3168) | return preg\_replace('/[a-z]/i', '', $str) \* pow(2, 10 \* $unitFactor); |
| [3169](#L3169) | } |
| [3170](#L3170) | } |
| [3171](#L3171) |  |
| [3172](#L3172) | public static function cminds\_set\_content\_type() { |
| [3173](#L3173) | return "text/html"; |
| [3174](#L3174) | } |
| [3175](#L3175) |  |
| [3176](#L3176) | } |
| [3177](#L3177) |  |
| [3178](#L3178) | } |
| [3179](#L3179) |  |
| [3180](#L3180) | /\* |
| [3181](#L3181) | \* Load the config |
| [3182](#L3182) | \*/ |
| [3183](#L3183) | global $cmindsPluginPackage; |
| [3184](#L3184) | include('cminds-plugin-config.php'); |
| [3185](#L3185) | $cmindsPluginPackage[$cminds\_plugin\_config['plugin-abbrev']] = new CmindsFreePackage($cminds\_plugin\_config); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/cm-video-lesson-manager/trunk/package/cminds-free.php?format=txt)
* [Original Format](/export/3222474/cm-video-lesson-manager/trunk/package/cminds-free.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_24febb26_20250114_205553.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fcm-on-demand-search-and-replace%2Ftrunk%2Fpackage%2Fcminds-free.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/cm-on-demand-search-and-replace/trunk/package/cminds-free.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/cm-on-demand-search-and-replace/trunk/package/cminds-free.php)

---

# [source:](/browser?order=name "Go to repository root") [cm-on-demand-search-and-replace](/browser/cm-on-demand-search-and-replace?order=name "View cm-on-demand-search-and-replace")/[trunk](/browser/cm-on-demand-search-and-replace/trunk?order=name "View trunk")/[package](/browser/cm-on-demand-search-and-replace/trunk/package?order=name "View package")/[cminds-free.php](/browser/cm-on-demand-search-and-replace/trunk/package/cminds-free.php?order=name "View cminds-free.php")

View diff against:

View revision:

| [Last change](/changeset/3222254/cm-on-demand-search-and-replace/trunk/package/cminds-free.php "View differences") on this file was [3222254](/changeset/3222254/ "View changeset 3222254"), checked in by CreativeMindsSolutions, [8 hours ago](/timeline?from=2025-01-14T12%3A32%3A35Z&precision=second "See timeline at 01/14/2025 12:32:35 PM") |
| --- |
| new version with changes to the UI |
| **File size:** 140.8 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | namespace com\cminds\package\free\v1\_1\_5; |
| [3](#L3) |  |
| [4](#L4) | if (!defined(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION')) { |
| [5](#L5) | define(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION', '1\_1\_5'); |
| [6](#L6) | } |
| [7](#L7) | if (!class\_exists(\_\_NAMESPACE\_\_ . '\CmindsFreePackage')) { |
| [8](#L8) |  |
| [9](#L9) | class CmindsFreePackage { |
| [10](#L10) |  |
| [11](#L11) | private $config = array(); |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* LicensingAPI object |
| [15](#L15) | \* @var CmindsLicensingAPI |
| [16](#L16) | \*/ |
| [17](#L17) | public $licensingApi = null; |
| [18](#L18) | private $pluginMenu = null; |
| [19](#L19) | private $pluginMenuPage = null; |
| [20](#L20) |  |
| [21](#L21) | const SHAREBOX\_FLAT = 0; |
| [22](#L22) | const SHAREBOX\_SQUARE = 1; |
| [23](#L23) | const ADS\_REFRESH\_INTERVAL = 7776000; // 3600 \* 24 \* 90 = 3 months |
| [24](#L24) |  |
| [25](#L25) | public function \_\_construct($config) { |
| [26](#L26) | $this->config = $config; |
| [27](#L27) |  |
| [28](#L28) | $this->pluginMenu = $this->getOption('plugin-menu-item'); |
| [29](#L29) | $this->pluginMenuPage = $this->getPageUrl('licensing'); |
| [30](#L30) |  |
| [31](#L31) | add\_action('activated\_plugin', array($this, 'redirectAfterInstall'), 10, 2); |
| [32](#L32) | add\_action('admin\_init', array($this, 'updatePoweredByOption')); |
| [33](#L33) | add\_action('admin\_init', array($this, 'registerAdminActions')); |
| [34](#L34) | add\_action('admin\_menu', array($this, 'updateMenu'), 21); |
| [35](#L35) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminStyles')); |
| [36](#L36) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminScripts')); |
| [37](#L37) |  |
| [38](#L38) | $aboutPageKey = $this->getPageSlug(); |
| [39](#L39) | add\_action('cminds-' . $aboutPageKey . '-content-1', array($this, 'displayUserGuideTab')); |
| [40](#L40) | add\_action('cminds-' . $aboutPageKey . '-content-10', array($this, 'displayCreativeMindsTab')); |
| [41](#L41) | add\_action('cminds-' . $aboutPageKey . '-content-30', array($this, 'displayMembershipTab')); |
| [42](#L42) | add\_action('cminds-' . $aboutPageKey . '-content-40', array($this, 'displayCMProductTab')); |
| [43](#L43) | add\_action('cminds-' . $aboutPageKey . '-content-50', array($this, 'displayCMAddOnsTab')); |
| [44](#L44) | add\_action('cminds-' . $aboutPageKey . '-content-60', array($this, 'displayVideoGuidesTab')); |
| [45](#L45) | add\_action('cminds-' . $aboutPageKey . '-content-99', array($this, 'displaySupportTab')); |
| [46](#L46) | add\_action('cminds-' . $aboutPageKey . '-content-199', array($this, 'displayServerInformationTab')); |
| [47](#L47) |  |
| [48](#L48) | add\_action('cminds\_download\_sysinfo', array($this, 'cminds\_generate\_sysinfo\_download')); |
| [49](#L49) |  |
| [50](#L50) | add\_action('init', array($this, 'cminds\_get\_actions')); |
| [51](#L51) | add\_action('init', array($this, 'cminds\_post\_actions')); |
| [52](#L52) |  |
| [53](#L53) | add\_shortcode('cminds\_free\_author', array($this, 'showAuthor')); |
| [54](#L54) | add\_shortcode('cminds\_free\_registration', array($this, 'showRegistration')); |
| [55](#L55) | add\_shortcode('cminds\_free\_guide', array($this, 'showGuide')); |
| [56](#L56) | add\_shortcode('cminds\_upgrade\_box', array($this, 'showUpgrade')); |
| [57](#L57) | add\_shortcode('cminds\_free\_activation', array($this, 'showActivation')); |
| [58](#L58) |  |
| [59](#L59) | add\_filter('plugin\_row\_meta', array($this, 'add\_plugin\_meta\_links'), 10, 2); |
| [60](#L60) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'add\_plugin\_action\_links')); |
| [61](#L61) |  |
| [62](#L62) | add\_action('wp\_dashboard\_setup', array($this, 'addDashboardWidget')); |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | public function addDashboardWidget() { |
| [66](#L66) | if ($this->isRegistered()) { |
| [67](#L67) | wp\_add\_dashboard\_widget('cminds\_package\_dashboard\_widget', \_\_('CreativeMinds WordPress News', 'cminds-package'), array($this, 'showCMDashboardWidget')); |
| [68](#L68) | } |
| [69](#L69) | } |
| [70](#L70) |  |
| [71](#L71) | public function showCMDashboardWidget() { |
| [72](#L72) | $feeds = array( |
| [73](#L73) | array( |
| [74](#L74) | 'url'          => 'https://www.cminds.com/category/wordpress/feed/', |
| [75](#L75) | 'items'        => 6, |
| [76](#L76) | 'show\_summary' => 0, |
| [77](#L77) | 'show\_author'  => 0, |
| [78](#L78) | 'show\_date'    => 1, |
| [79](#L79) | ), |
| [80](#L80) | ); |
| [81](#L81) |  |
| [82](#L82) | wp\_dashboard\_primary\_output('cminds\_package\_dashboard\_widget', $feeds); |
| [83](#L83) | ?> |
| [84](#L84) | <br><hr> |
| [85](#L85) | <p> |
| [86](#L86) | <?php |
| [87](#L87) | printf( |
| [88](#L88) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/', \_\_('cminds.com'), \_\_('(opens in a new window)') |
| [89](#L89) | ); |
| [90](#L90) | ?> |
| [91](#L91) |  |
| [92](#L92) | | |
| [93](#L93) |  |
| [94](#L94) | <?php |
| [95](#L95) | printf( |
| [96](#L96) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/wordpress-plugins/', \_\_('CM WordPress Plugins'), \_\_('(opens in a new window)') |
| [97](#L97) | ); |
| [98](#L98) | ?> |
| [99](#L99) |  |
| [100](#L100) | | |
| [101](#L101) |  |
| [102](#L102) | <?php |
| [103](#L103) | printf( |
| [104](#L104) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', esc\_url(\_x('https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/', '99+ WordPress Plugins Bundle')), \_\_('99+ WordPress Plugins Bundle'), \_\_('(opens in a new window)') |
| [105](#L105) | ); |
| [106](#L106) | ?> |
| [107](#L107) | </p> |
| [108](#L108) | <?php |
| [109](#L109) | } |
| [110](#L110) |  |
| [111](#L111) | public function redirectAfterInstall($plugin, $network\_activation = false) { |
| [112](#L112) | global $cmindsPluginPackage; |
| [113](#L113) | $the\_package = null; |
| [114](#L114) |  |
| [115](#L115) | foreach ($cmindsPluginPackage as $package) { |
| [116](#L116) | $basename = $package->getOption('plugin-basename'); |
| [117](#L117) | if ($basename == $plugin) { |
| [118](#L118) | $the\_package = $package; |
| [119](#L119) | break; |
| [120](#L120) | } |
| [121](#L121) | } |
| [122](#L122) |  |
| [123](#L123) | if ($the\_package && $the\_package->getOption('plugin-redirect-after-install')) { |
| [124](#L124) | $url = $the\_package->getOption('plugin-redirect-after-install'); |
| [125](#L125) | $isBulkActivate = array(); |
| [126](#L126) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action2'); |
| [127](#L127) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action'); |
| [128](#L128) | if (!empty($url) && !in\_array('activate-selected', $isBulkActivate)) { |
| [129](#L129) | wp\_redirect($url); |
| [130](#L130) | exit(); |
| [131](#L131) | } |
| [132](#L132) | } |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | /\*\* |
| [136](#L136) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [137](#L137) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [138](#L138) | \* functions are called on init. |
| [139](#L139) | \* |
| [140](#L140) | \* @since 1.0 |
| [141](#L141) | \* @return void |
| [142](#L142) | \*/ |
| [143](#L143) | public function registerAdminActions() { |
| [144](#L144) | if (is\_admin()) { |
| [145](#L145) | // If user is paying or in trial and have the free version installed, |
| [146](#L146) | // assume that the deactivation is for the upgrade process. |
| [147](#L147) | add\_action('wp\_ajax\_cm-submit-uninstall-reason', array($this, 'submitUninstallReason')); |
| [148](#L148) | add\_action('wp\_ajax\_cm-submit-registration-email', array($this, 'submitRegistrationEmail')); |
| [149](#L149) | add\_action('wp\_ajax\_cm-submit-deregistration', array($this, 'submitDeregistration')); |
| [150](#L150) | add\_action('wp\_ajax\_cm-submit-registration-skip', array($this, 'submitRegistrationSkip')); |
| [151](#L151) |  |
| [152](#L152) | global $pagenow; |
| [153](#L153) | if ('plugins.php' === $pagenow) { |
| [154](#L154) | // Add action link to settings page. |
| [155](#L155) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [156](#L156) | add\_filter('network\_admin\_plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [157](#L157) | add\_action('admin\_footer', array($this, 'showDeactivationFeedbackDialog'), 11); |
| [158](#L158) | } |
| [159](#L159) | } |
| [160](#L160) | } |
| [161](#L161) |  |
| [162](#L162) | /\*\* |
| [163](#L163) | \* Modify plugin's page action links collection. |
| [164](#L164) | \* |
| [165](#L165) | \* @author Vova Feldman (@svovaf) |
| [166](#L166) | \* @since  1.0.0 |
| [167](#L167) | \* |
| [168](#L168) | \* @param array $links |
| [169](#L169) | \* @param       $file |
| [170](#L170) | \* |
| [171](#L171) | \* @return array |
| [172](#L172) | \*/ |
| [173](#L173) | function modifyPluginActionLinks($links, $file) { |
| [174](#L174) | /\* |
| [175](#L175) | \* This HTML element is used to identify the correct plugin when attaching an event to its Deactivate link. |
| [176](#L176) | \*/ |
| [177](#L177) | if (isset($links['deactivate'])) { |
| [178](#L178) | $links['deactivate'] .= '<i class="cm-slug" data-slug="' . $this->getOption('plugin-abbrev') . '"></i>'; |
| [179](#L179) | } |
| [180](#L180) |  |
| [181](#L181) | return $links; |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | /\*\* |
| [185](#L185) | \* Displays a confirmation and feedback dialog box when the user clicks on the "Deactivate" link on the plugins |
| [186](#L186) | \* page. |
| [187](#L187) | \* |
| [188](#L188) | \*/ |
| [189](#L189) | function showDeactivationFeedbackDialog() { |
| [190](#L190) | $content = ''; |
| [191](#L191) | ob\_start(); |
| [192](#L192) | include\_once 'views/deactivation\_feedback\_modal.php'; |
| [193](#L193) | $content .= ob\_get\_clean(); |
| [194](#L194) | echo $content; |
| [195](#L195) | } |
| [196](#L196) |  |
| [197](#L197) | function filterDeactivationReason($reason) { |
| [198](#L198) |  |
| [199](#L199) | if (strlen($reason) < 20) { |
| [200](#L200) | return ''; |
| [201](#L201) | } |
| [202](#L202) | if (str\_word\_count($reason) < 4) { |
| [203](#L203) | return ''; |
| [204](#L204) | } |
| [205](#L205) |  |
| [206](#L206) | $dirty\_words = array('shit', 'fuck', 'wtf'); |
| [207](#L207) | foreach ($dirty\_words as $a) { |
| [208](#L208) | if (stripos($reason, $a) !== false) { |
| [209](#L209) | return ''; |
| [210](#L210) | } |
| [211](#L211) | } |
| [212](#L212) |  |
| [213](#L213) | return $reason; |
| [214](#L214) | } |
| [215](#L215) |  |
| [216](#L216) | /\*\* |
| [217](#L217) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [218](#L218) | \* @since  1.1.2 |
| [219](#L219) | \*/ |
| [220](#L220) | function submitRegistrationEmail() { |
| [221](#L221) | $atts = array(); |
| [222](#L222) |  |
| [223](#L223) | if (empty($\_POST['email'])) { |
| [224](#L224) | exit; |
| [225](#L225) | } |
| [226](#L226) |  |
| [227](#L227) | $this->registerUser($atts); |
| [228](#L228) | } |
| [229](#L229) |  |
| [230](#L230) | /\*\* |
| [231](#L231) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [232](#L232) | \* @since  1.1.2 |
| [233](#L233) | \*/ |
| [234](#L234) | function submitDeregistration() { |
| [235](#L235) | $atts = array(); |
| [236](#L236) |  |
| [237](#L237) | $this->deregisterUser($atts); |
| [238](#L238) | } |
| [239](#L239) |  |
| [240](#L240) | /\*\* |
| [241](#L241) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [242](#L242) | \* @since  1.1.2 |
| [243](#L243) | \*/ |
| [244](#L244) | function submitRegistrationSkip() { |
| [245](#L245) | if (empty($\_POST)) { |
| [246](#L246) | exit; |
| [247](#L247) | } |
| [248](#L248) | $atts = array(); |
| [249](#L249) | if (!empty($\_POST['id'])) { |
| [250](#L250) | $atts['id'] = sanitize\_text\_field($\_POST['id']); |
| [251](#L251) | } |
| [252](#L252) | $this->skipRegistration($atts); |
| [253](#L253) | } |
| [254](#L254) |  |
| [255](#L255) | /\*\* |
| [256](#L256) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [257](#L257) | \* @since  1.1.2 |
| [258](#L258) | \*/ |
| [259](#L259) | function submitUninstallReason() { |
| [260](#L260) | if (empty($\_POST['plugin\_slug']) || empty($\_POST['deactivation\_reason'])) { |
| [261](#L261) | exit; |
| [262](#L262) | } |
| [263](#L263) |  |
| [264](#L264) | $reason = isset($\_REQUEST['deactivation\_reason']) ? trim(esc\_html(stripslashes(strip\_tags($\_REQUEST['deactivation\_reason'])))) : ''; |
| [265](#L265) | $filteredReason = $this->filterDeactivationReason($reason); |
| [266](#L266) | $postedEmail = isset($\_POST['contact\_email']) && is\_email(trim($\_POST['contact\_email'])) ? sanitize\_text\_field($\_POST['contact\_email']) : null; |
| [267](#L267) |  |
| [268](#L268) | /\* |
| [269](#L269) | \* Only send the e-mail if the filtered reason is not empty |
| [270](#L270) | \*/ |
| [271](#L271) | if (!empty($filteredReason)) { |
| [272](#L272) | global $cmindsPluginPackage; |
| [273](#L273) | $package = $cmindsPluginPackage[$\_POST['plugin\_slug']]; |
| [274](#L274) |  |
| [275](#L275) | $fields = array( |
| [276](#L276) | 'product\_name' => $package->getOption('plugin-name'), |
| [277](#L277) | 'remote\_url'   => get\_bloginfo('wpurl'), |
| [278](#L278) | 'email'        => null !== $postedEmail ? $postedEmail : get\_bloginfo('admin\_email'), |
| [279](#L279) | 'want\_contact' => isset($\_POST['want\_contact']) ? 'true' === $\_POST['want\_contact'] : false, |
| [280](#L280) | 'data\_agree'   => isset($\_POST['data\_agree']) ? 'true' === $\_POST['data\_agree'] : true, |
| [281](#L281) | ); |
| [282](#L282) |  |
| [283](#L283) | $registered = $this->isRegistered($\_POST['plugin\_slug']) ? ' (registered)' : ''; |
| [284](#L284) | $message = '<p>The ' . $fields['product\_name'] . ' has been deactivated on ' . $fields['remote\_url'] . ' by ' . $fields['email'] . $registered . '.</p> <p>The reason was:</p> <p><strong>' . $filteredReason . '</strong></p>'; |
| [285](#L285) | $message .= '<br/><hr/>'; |
| [286](#L286) |  |
| [287](#L287) | $mail = 'support@cminds.com'; |
| [288](#L288) |  |
| [289](#L289) | if ($fields['want\_contact']) { |
| [290](#L290) | $message .= '<p>This user is interested in contact from our side.</p>'; |
| [291](#L291) | $message .= '<br/><hr/>'; |
| [292](#L292) | $mail = 'support@cminds.com'; |
| [293](#L293) | } |
| [294](#L294) |  |
| [295](#L295) | if ($fields['data\_agree']) { |
| [296](#L296) | $message .= '<p>SYSTEM INFORMATION BELOW:</p>'; |
| [297](#L297) | ob\_start(); |
| [298](#L298) | echo '<pre>'; |
| [299](#L299) | echo $this->cminds\_system\_info\_content(); |
| [300](#L300) | echo '</pre>'; |
| [301](#L301) | $message .= ob\_get\_clean(); |
| [302](#L302) | } |
| [303](#L303) |  |
| [304](#L304) | $message .= '<p>END OF SYSTEM INFORMATION</p>'; |
| [305](#L305) |  |
| [306](#L306) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [307](#L307) | $result = wp\_mail($mail, 'CM Free Plugin Deactivation Feedback', $message); |
| [308](#L308) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [309](#L309) | } |
| [310](#L310) |  |
| [311](#L311) |  |
| [312](#L312) | // Print '1' for successful operation. |
| [313](#L313) | echo 1; |
| [314](#L314) | exit; |
| [315](#L315) | } |
| [316](#L316) |  |
| [317](#L317) | /\*\* |
| [318](#L318) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [319](#L319) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [320](#L320) | \* functions are called on init. |
| [321](#L321) | \* |
| [322](#L322) | \* @since 1.0 |
| [323](#L323) | \* @return void |
| [324](#L324) | \*/ |
| [325](#L325) | public function cminds\_get\_actions() { |
| [326](#L326) | if (isset($\_GET['cminds\_action'])) { |
| [327](#L327) | do\_action('cminds\_' . $\_GET['cminds\_action'], $\_GET); |
| [328](#L328) | } |
| [329](#L329) | } |
| [330](#L330) |  |
| [331](#L331) | /\*\* |
| [332](#L332) | \* Hooks Cminds actions, when present in the $\_POST superglobal. Every Cminds\_action |
| [333](#L333) | \* present in $\_POST is called using WordPress's do\_action function. These |
| [334](#L334) | \* functions are called on init. |
| [335](#L335) | \* |
| [336](#L336) | \* @since 1.0 |
| [337](#L337) | \* @return void |
| [338](#L338) | \*/ |
| [339](#L339) | public function cminds\_post\_actions() { |
| [340](#L340) | if (isset($\_POST['cminds\_action'])) { |
| [341](#L341) | do\_action('cminds\_' . $\_POST['cminds\_action'], $\_POST); |
| [342](#L342) | } |
| [343](#L343) | } |
| [344](#L344) |  |
| [345](#L345) | public function updatePoweredByOption() { |
| [346](#L346) | $optionValue = filter\_input(INPUT\_POST, $this->getPoweredByOption()); |
| [347](#L347) | $submitValue = filter\_input(INPUT\_POST, 'cminds\_poweredby\_change'); |
| [348](#L348) |  |
| [349](#L349) | if (null !== $optionValue || null !== $submitValue) { |
| [350](#L350) | if(is\_admin() && is\_user\_logged\_in() && current\_user\_can('manage\_options')) { |
| [351](#L351) | update\_option($this->getPoweredByOption(), $optionValue); |
| [352](#L352) | } |
| [353](#L353) | } |
| [354](#L354) | } |
| [355](#L355) |  |
| [356](#L356) | public function getPoweredByOption() { |
| [357](#L357) | $optionName = $this->getOption('plugin-abbrev') . '-powered-by-enabled'; |
| [358](#L358) | return $optionName; |
| [359](#L359) | } |
| [360](#L360) |  |
| [361](#L361) | /\*\* |
| [362](#L362) | \* Default is 0 (disabled) |
| [363](#L363) | \* @return type |
| [364](#L364) | \*/ |
| [365](#L365) | public function isPoweredByEnabled() { |
| [366](#L366) | $result = get\_option($this->getPoweredByOption(), 0); |
| [367](#L367) | return $result; |
| [368](#L368) | } |
| [369](#L369) |  |
| [370](#L370) | /\*\* |
| [371](#L371) | \* Returns the author Url (for free version only) |
| [372](#L372) | \*/ |
| [373](#L373) | public function showAuthor($atts = array()) { |
| [374](#L374) | $authorUrl = ''; |
| [375](#L375) | global $cmindsPluginPackage; |
| [376](#L376) |  |
| [377](#L377) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [378](#L378) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [379](#L379) |  |
| [380](#L380) | if (!$currentPlugin->isPoweredByEnabled()) { |
| [381](#L381) | return; |
| [382](#L382) | } |
| [383](#L383) | ob\_start(); |
| [384](#L384) | ?> |
| [385](#L385) | <style> |
| [386](#L386) | .cminds\_poweredby {clear:both;float:none;font-size:11px;line-height:1.5;display: inline-block;padding: 3px;margin-top:20px;color:#bbb;text-decoration:none;font-weight:bold} |
| [387](#L387) | .cminds\_poweredby:before {content:'Powered by ';} |
| [388](#L388) | .cminds\_poweredbylink:link{color:#bbb;text-decoration:none;} |
| [389](#L389) | .cminds\_poweredbylink:visited{color:#bbb;text-decoration:none;} |
| [390](#L390) | .cminds\_poweredbylink:hover{color:#bbb;text-decoration:none;} |
| [391](#L391) | </style> |
| [392](#L392) |  |
| [393](#L393) | <?php |
| [394](#L394) | $authorUrl .= ob\_get\_clean(); |
| [395](#L395) | /\* |
| [396](#L396) | \* By leaving following snippet in the code, you're expressing your gratitude to creators of this plugin. Thank You! |
| [397](#L397) | \*/ |
| [398](#L398) | $authorUrl .= '<div style="display:block;clear:both;"></div><span class="cminds\_poweredby">'; |
| [399](#L399) | $authorUrl .= '<a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/') . '" target="\_blank" class="cminds\_poweredbylink">CreativeMinds</a> '; |
| [400](#L400) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/wordpress-plugins/') . '" target="\_blank" class="cminds\_poweredbylink">WordPress Plugin</a>'; |
| [401](#L401) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode($currentPlugin->getOption('plugin-store-url')) . '" target="\_blank" class="cminds\_poweredbylink">' . $currentPlugin->getOption('plugin-name') . '</a>'; |
| [402](#L402) | $authorUrl .= '</span><div style="display:block;clear:both;"></div>'; |
| [403](#L403) |  |
| [404](#L404) | return $authorUrl; |
| [405](#L405) | } |
| [406](#L406) |  |
| [407](#L407) | /\* |
| [408](#L408) | \* Licensing Page Tabs |
| [409](#L409) | \*/ |
| [410](#L410) |  |
| [411](#L411) | public function displayUpgradeTutorialTab() { |
| [412](#L412) | $content = ''; |
| [413](#L413) | ob\_start(); |
| [414](#L414) | ?> |
| [415](#L415) | <div> |
| [416](#L416) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Customer Dashboard</a> |
| [417](#L417) | </div> |
| [418](#L418) | <br/> |
| [419](#L419) | <div> |
| [420](#L420) | <?php |
| [421](#L421) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134692135?title=0&byline=0&portrait=0" width="500" height="280"]'); |
| [422](#L422) | ?> |
| [423](#L423) | </div> |
| [424](#L424) | <?php |
| [425](#L425) | $content .= ob\_get\_clean(); |
| [426](#L426) | return $content; |
| [427](#L427) | } |
| [428](#L428) |  |
| [429](#L429) | public function displayManageProductsTab() { |
| [430](#L430) | $content = ''; |
| [431](#L431) | ob\_start(); |
| [432](#L432) | ?> |
| [433](#L433) | <div> |
| [434](#L434) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Open CreativeMinds Customer Dashboard</a> |
| [435](#L435) | </div> |
| [436](#L436) | <br/> |
| [437](#L437) | <div> |
| [438](#L438) | <?php |
| [439](#L439) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134490629?title=0&byline=0&portrait=0" width="640" height="360"]'); |
| [440](#L440) | ?> |
| [441](#L441) | </div> |
| [442](#L442) | <?php |
| [443](#L443) | $content .= ob\_get\_clean(); |
| [444](#L444) | return $content; |
| [445](#L445) | } |
| [446](#L446) |  |
| [447](#L447) | public function displayServerInformationTab() { |
| [448](#L448) | global $wp\_version; |
| [449](#L449) | $content = ''; |
| [450](#L450) |  |
| [451](#L451) | ob\_start(); |
| [452](#L452) | echo $this->cminds\_compatibility\_check(); |
| [453](#L453) | echo $this->cminds\_system\_info(); |
| [454](#L454) | $content .= ob\_get\_clean(); |
| [455](#L455) | return $content; |
| [456](#L456) | } |
| [457](#L457) |  |
| [458](#L458) | /\* |
| [459](#L459) | \* About/User Guide Page Tabs |
| [460](#L460) | \*/ |
| [461](#L461) |  |
| [462](#L462) | public function displayUserGuideTab() { |
| [463](#L463) | $content = ''; |
| [464](#L464) | ob\_start(); |
| [465](#L465) | ?> |
| [466](#L466) | <div> |
| [467](#L467) | <a href="<?php echo $this->getUserguideUrl(); ?>" class="btn button button-primary" target="\_blank">Open User Guide in a new tab</a> |
| [468](#L468) | </div> |
| [469](#L469) | <?php |
| [470](#L470) | $content .= ob\_get\_clean(); |
| [471](#L471) | return $content; |
| [472](#L472) | } |
| [473](#L473) |  |
| [474](#L474) | public function displayUpgradeToProTab() { |
| [475](#L475) | $content = ''; |
| [476](#L476) | $upgradeToProHtml = $this->getOption('plugin-compare-table'); |
| [477](#L477) | $pluginUrl = $this->getOption('plugin-store-url'); |
| [478](#L478) | wp\_enqueue\_script('jquery-ui-tooltip'); |
| [479](#L479) | ob\_start(); |
| [480](#L480) | ?> |
| [481](#L481) | <script> |
| [482](#L482) | jQuery(document).ready(function () { |
| [483](#L483) | jQuery(".cminds-package-show-tooltip").tooltip(); |
| [484](#L484) | }); |
| [485](#L485) | </script> |
| [486](#L486) | <style type="text/css"> |
| [487](#L487) | .pricing-table ul{ |
| [488](#L488) | border-width: 1px; |
| [489](#L489) | border-style: solid; |
| [490](#L490) | border-color: #CCCCCC; |
| [491](#L491) | border-radius: 3px; |
| [492](#L492) | margin: 4px; |
| [493](#L493) | text-align: center; |
| [494](#L494) | font-family: 'Arial'; |
| [495](#L495) | list-style: none; |
| [496](#L496) | float: left; |
| [497](#L497) | padding: 4px; |
| [498](#L498) | background-color: #FFFFFF; |
| [499](#L499) | max-width: 24%; |
| [500](#L500) | } |
| [501](#L501) | .pricing-table ul li{ |
| [502](#L502) | padding: 7px; |
| [503](#L503) | background-color: #EFEFEF; |
| [504](#L504) | border-width: 2px; |
| [505](#L505) | border-color: #B83737; |
| [506](#L506) | border-radius: 0px; |
| [507](#L507) | border-bottom-width: 2px; |
| [508](#L508) | font-size: 13px; |
| [509](#L509) | } |
| [510](#L510) | .pricing-table li:nth-child(odd){ |
| [511](#L511) | background-color: transparent; |
| [512](#L512) | } |
| [513](#L513) | .pricing-table ul .heading{ |
| [514](#L514) | color: #FFFFFF; |
| [515](#L515) | background-color: #659b2e; |
| [516](#L516) | font-size: 19px; |
| [517](#L517) | text-align: center; |
| [518](#L518) | } |
| [519](#L519) | .pricing-table ul .price{ |
| [520](#L520) | font-size: 25px; |
| [521](#L521) | } |
| [522](#L522) | .pricing-table ul .action{ |
| [523](#L523) | font-size: 13px; |
| [524](#L524) | color: #FFFFFF; |
| [525](#L525) | } |
| [526](#L526) | .pricing-table .action a{ |
| [527](#L527) | border-color: #B83737; |
| [528](#L528) | border-width: 0px; |
| [529](#L529) | background-color: #659b2e; |
| [530](#L530) | padding-top: 7px; |
| [531](#L531) | padding-bottom: 7px; |
| [532](#L532) | padding-left: 15px; |
| [533](#L533) | padding-right: 15px; |
| [534](#L534) | border-style: solid; |
| [535](#L535) | color: #FFFFFF; |
| [536](#L536) | } |
| [537](#L537) | .pricing-table ul .noaction{ |
| [538](#L538) | font-size: 13px; |
| [539](#L539) | color: #FFFFFF; |
| [540](#L540) | } |
| [541](#L541) | .pricing-table .noaction span{ |
| [542](#L542) | border-color: #B83737; |
| [543](#L543) | border-width: 0px; |
| [544](#L544) | background-color: #b2b2b2; |
| [545](#L545) | padding-top: 7px; |
| [546](#L546) | padding-bottom: 7px; |
| [547](#L547) | padding-left: 15px; |
| [548](#L548) | padding-right: 15px; |
| [549](#L549) | border-style: solid; |
| [550](#L550) | color: #FFFFFF; |
| [551](#L551) | } |
| [552](#L552) |  |
| [553](#L553) | </style> |
| [554](#L554) | <br> |
| [555](#L555) | <div> |
| [556](#L556) | <?php echo $upgradeToProHtml; ?> |
| [557](#L557) | </div> |
| [558](#L558) | <?php |
| [559](#L559) | $content .= ob\_get\_clean(); |
| [560](#L560) | return $content; |
| [561](#L561) | } |
| [562](#L562) |  |
| [563](#L563) | public function displayCreativeMindsTab() { |
| [564](#L564) | $content = ''; |
| [565](#L565) | ob\_start(); |
| [566](#L566) | ?> |
| [567](#L567) | <div> |
| [568](#L568) | <a href="https://www.cminds.com/about/" class="btn button button-primary" target="\_blank">Open About Us page in a new tab</a> |
| [569](#L569) | </div> |
| [570](#L570) | <?php |
| [571](#L571) | $content .= ob\_get\_clean(); |
| [572](#L572) | return $content; |
| [573](#L573) | } |
| [574](#L574) |  |
| [575](#L575) | public function displayMembershipTab() { |
| [576](#L576) | $content = ''; |
| [577](#L577) | ob\_start(); |
| [578](#L578) | ?> |
| [579](#L579) | <div> |
| [580](#L580) | <a href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" class="btn button button-primary" target="\_blank">Open Membership Package page in a new tab</a> |
| [581](#L581) | </div> |
| [582](#L582) | <?php |
| [583](#L583) | $content .= ob\_get\_clean(); |
| [584](#L584) | return $content; |
| [585](#L585) | } |
| [586](#L586) |  |
| [587](#L587) | public function displayCMProductTab() { |
| [588](#L588) | $content = ''; |
| [589](#L589) | ob\_start(); |
| [590](#L590) |  |
| [591](#L591) | $currentIframeFilter = filter\_input(INPUT\_POST, 'cminds\_iframe\_filter'); |
| [592](#L592) | if (empty($currentIframeFilter)) { |
| [593](#L593) | $currentIframeFilter = 'Plugin'; |
| [594](#L594) | } |
| [595](#L595) | $url = remove\_query\_arg('cminds\_iframe\_filter', $\_SERVER['REQUEST\_URI']); |
| [596](#L596) | ?> |
| [597](#L597) | <div> |
| [598](#L598) | <a href="https://www.cminds.com/wordpress-plugins-library/?cat=Plugin" class="btn button button-primary" target="\_blank">Open Product Catalog in a new tab</a> |
| [599](#L599) | <form method="post" class="cminds\_iframe\_filter\_form"> |
| [600](#L600) | <span> | Filter: </span> |
| [601](#L601) | <button type="submit" name="cminds\_iframe\_filter" value="Plugin" class="btn button button-primary">Plugins</button> |
| [602](#L602) | <button type="submit" name="cminds\_iframe\_filter" value="Add-On" class="btn button button-primary">AddOns</button> |
| [603](#L603) | <button type="submit" name="cminds\_iframe\_filter" value="Bundle" class="btn button button-primary">Bundles</button> |
| [604](#L604) | <button type="submit" name="cminds\_iframe\_filter" value="Service" class="btn button button-primary">Services</button> |
| [605](#L605) | </form> |
| [606](#L606) | </div> |
| [607](#L607) | <?php |
| [608](#L608) | $content .= ob\_get\_clean(); |
| [609](#L609) | return $content; |
| [610](#L610) | } |
| [611](#L611) |  |
| [612](#L612) | public function displayCMAddOnsTab() { |
| [613](#L613) | $content = ''; |
| [614](#L614) | ob\_start(); |
| [615](#L615) | ?> |
| [616](#L616) | <div> |
| [617](#L617) | <a href="https://www.cminds.com/wordpress-plugins-library/?showfilter=No&tags=Tooltip" class="btn button button-primary" target="\_blank">Open Add-Ons page in a new tab</a> |
| [618](#L618) | </div> |
| [619](#L619) | <?php |
| [620](#L620) | $content .= ob\_get\_clean(); |
| [621](#L621) | return $content; |
| [622](#L622) | } |
| [623](#L623) |  |
| [624](#L624) | public function displayVideoGuidesTab() { |
| [625](#L625) | $content = ''; |
| [626](#L626) | ob\_start(); |
| [627](#L627) | ?> |
| [628](#L628) | <div> |
| [629](#L629) | <a href="https://www.cminds.com/cm-plugins-video-library/" class="btn button button-primary" target="\_blank">Open Video Guides page in a new tab</a> |
| [630](#L630) | </div> |
| [631](#L631) | <?php |
| [632](#L632) | $content .= ob\_get\_clean(); |
| [633](#L633) | return $content; |
| [634](#L634) | } |
| [635](#L635) |  |
| [636](#L636) | public function displaySupportTab() { |
| [637](#L637) | $content = ''; |
| [638](#L638) | $supportForumLink = $this->getOption('plugin-support-url'); |
| [639](#L639) | ob\_start(); |
| [640](#L640) | ?> |
| [641](#L641) | <div> |
| [642](#L642) | <p>WordPress supprot forum can only be viewed on WordPress.org site. Please click on the buttom to visit the forum and to submit your support questions</p> |
| [643](#L643) | <a href="<?php echo $supportForumLink; ?>" class="btn button button-primary" target="\_blank">Open WordPress Support Formum</a> |
| [644](#L644) | </div> |
| [645](#L645) | <?php |
| [646](#L646) | $content .= ob\_get\_clean(); |
| [647](#L647) | return $content; |
| [648](#L648) | } |
| [649](#L649) |  |
| [650](#L650) | public function add\_plugin\_meta\_links($meta, $file) { |
| [651](#L651) | if ($file == $this->getOption('plugin-basename')) { |
| [652](#L652) |  |
| [653](#L653) | foreach ($meta as $key => $value) { |
| [654](#L654) | if (strpos($value, 'Visit plugin site') !== FALSE) { |
| [655](#L655) | unset($meta[$key]); |
| [656](#L656) | $meta[] = sprintf('<a href="%s">%s</a>', esc\_url($this->getOption('plugin-store-url')), \_\_('Visit plugin site', 'cminds-package') |
| [657](#L657) | ); |
| [658](#L658) | break; |
| [659](#L659) | } |
| [660](#L660) | } |
| [661](#L661) |  |
| [662](#L662) | foreach ($meta as $key => $value) { |
| [663](#L663) | if (strpos($value, '<a href="') !== FALSE) { |
| [664](#L664) | $meta[$key] = str\_replace('<a href="', '<a target="\_blank" href="', $value); |
| [665](#L665) | } |
| [666](#L666) | } |
| [667](#L667) | } |
| [668](#L668) | return $meta; |
| [669](#L669) | } |
| [670](#L670) |  |
| [671](#L671) | public function add\_plugin\_action\_links($links) { |
| [672](#L672) | $settingsUrl = $this->getOption('plugin-redirect-after-install'); |
| [673](#L673) | if (!empty($settingsUrl)) { |
| [674](#L674) | $links[] = '<a href="' . esc\_url($settingsUrl) . '">Settings</a>'; |
| [675](#L675) | } |
| [676](#L676) | if (!$this->getOption('plugin-free-only')) { |
| [677](#L677) | $links[] = '<a href="' . esc\_url(admin\_url('admin.php?page=' . $this->getProSlug())) . '">Upgrade to Pro</a>'; |
| [678](#L678) | } |
| [679](#L679) | return $links; |
| [680](#L680) | } |
| [681](#L681) |  |
| [682](#L682) | public function updateMenu() { |
| [683](#L683) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('User Guide', 'cminds-package'), \_\_('User Guide', 'cminds-package'), 'manage\_options', $this->getPageSlug(), array($this, 'displayPage')); |
| [684](#L684) | if (!$this->getOption('plugin-free-only')) { |
| [685](#L685) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), 'manage\_options', $this->getProSlug(), array($this, 'displayPage')); |
| [686](#L686) | } |
| [687](#L687) |  |
| [688](#L688) | $tag = 'cminds-' . $this->getOption('plugin-short-slug') . '-license-page'; |
| [689](#L689) | $condition = has\_action($tag); |
| [690](#L690) | } |
| [691](#L691) |  |
| [692](#L692) | public function getProSlug() { |
| [693](#L693) | $slug = $this->getOption('plugin-abbrev') . '\_pro'; |
| [694](#L694) | return $slug; |
| [695](#L695) | } |
| [696](#L696) |  |
| [697](#L697) | public function getPageSlug() { |
| [698](#L698) | $slug = $this->getOption('plugin-abbrev') . '\_about'; |
| [699](#L699) | return $slug; |
| [700](#L700) | } |
| [701](#L701) |  |
| [702](#L702) | public function getLicensingSlug() { |
| [703](#L703) | $slug = $this->getOption('plugin-abbrev') . '\_licensing'; |
| [704](#L704) | return $slug; |
| [705](#L705) | } |
| [706](#L706) |  |
| [707](#L707) | public function isOwnScreen() { |
| [708](#L708) | $screen = get\_current\_screen(); |
| [709](#L709) | return (strpos($screen->base, $this->getPageSlug()) !== false || strpos($screen->base, $this->getLicensingSlug()) !== false || strpos($screen->base, $this->getProSlug()) !== false); |
| [710](#L710) | } |
| [711](#L711) |  |
| [712](#L712) | /\*\* |
| [713](#L713) | \* Load plugin styles for admin area |
| [714](#L714) | \* |
| [715](#L715) | \* @access public |
| [716](#L716) | \* @since 1.0 |
| [717](#L717) | \*/ |
| [718](#L718) | public function enqueueAdminStyles() { |
| [719](#L719) |  |
| [720](#L720) | $screen = get\_current\_screen(); |
| [721](#L721) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [722](#L722) | return; |
| [723](#L723) | } |
| [724](#L724) | wp\_enqueue\_style('jquery-ui-tabs-css', plugin\_dir\_url(\_\_FILE\_\_) . 'css/jquery-ui.min.css', array()); |
| [725](#L725) | } |
| [726](#L726) |  |
| [727](#L727) | /\*\* |
| [728](#L728) | \* Load plugin scripts for admin area |
| [729](#L729) | \* |
| [730](#L730) | \* @access public |
| [731](#L731) | \* @since 1.0 |
| [732](#L732) | \*/ |
| [733](#L733) | public function enqueueAdminScripts() { |
| [734](#L734) |  |
| [735](#L735) | $screen = get\_current\_screen(); |
| [736](#L736) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [737](#L737) | return; |
| [738](#L738) | } |
| [739](#L739) | wp\_enqueue\_script('jquery-ui-tabs'); |
| [740](#L740) | } |
| [741](#L741) |  |
| [742](#L742) | public function getUserguideUrl() { |
| [743](#L743) | $url = ''; |
| [744](#L744) | if ($this->getOption('plugin-userguide-key')) { |
| [745](#L745) | $url .= 'https://creativeminds.helpscoutdocs.com/article/' . $this->getOption('plugin-userguide-key'); |
| [746](#L746) | } else { |
| [747](#L747) | $url .= 'https://creativeminds.helpscoutdocs.com/collection/3-wordpress-plugins'; |
| [748](#L748) | } |
| [749](#L749) | return $url; |
| [750](#L750) | } |
| [751](#L751) |  |
| [752](#L752) | public function displayPage() { |
| [753](#L753) | global $plugin\_page; |
| [754](#L754) | $content = ''; |
| [755](#L755) |  |
| [756](#L756) | global $cmindsPluginPackage; |
| [757](#L757) |  |
| [758](#L758) | if (!empty($cmindsPluginPackage)) { |
| [759](#L759) | foreach ($cmindsPluginPackage as $key => $package) { |
| [760](#L760) | $isown = $package->isOwnScreen(); |
| [761](#L761) | if ($isown) { |
| [762](#L762) | $currentPlugin = $package; |
| [763](#L763) | } |
| [764](#L764) | } |
| [765](#L765) | } |
| [766](#L766) | ?> |
| [767](#L767) | <div class="wrap"> |
| [768](#L768) | <style type="text/css"> |
| [769](#L769) | .subsubsub li+li:before {content:'| ';} |
| [770](#L770) | .cminds\_system\_info\_area{ |
| [771](#L771) | width: 99.5%; |
| [772](#L772) | height: 290px; |
| [773](#L773) | } |
| [774](#L774) | .cminds\_update\_table td, |
| [775](#L775) | .cminds\_update\_table tr { |
| [776](#L776) | width: 140px; |
| [777](#L777) | text-align: left; |
| [778](#L778) | } |
| [779](#L779) | .cminds\_iframe\_filter\_form{ |
| [780](#L780) | display: inline-block; |
| [781](#L781) | } |
| [782](#L782) | .cminds\_iframe\_filter\_form > span{ |
| [783](#L783) | line-height: 28px; |
| [784](#L784) | } |
| [785](#L785) | </style> |
| [786](#L786) | <h2> |
| [787](#L787) | <div id="icon-<?php echo $currentPlugin->getOption('plugin-icon') ?>" class="icon32"> |
| [788](#L788) | <br /> |
| [789](#L789) | </div> |
| [790](#L790) | <?php echo $currentPlugin->getOption('plugin-name') ?>&nbsp; |
| [791](#L791) | <?php |
| [792](#L792) | $pluginAbbrev = $currentPlugin->getOption('plugin-abbrev'); |
| [793](#L793) | if (empty($\_GET['page']) || $\_GET['page'] != $pluginAbbrev . '\_pro') : |
| [794](#L794) | ?> |
| [795](#L795) | <a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $pluginAbbrev . '\_pro')); ?>" class="button button-primary" title="Click to Buy PRO">Upgrade to Pro</a> |
| [796](#L796) | <?php |
| [797](#L797) | endif; |
| [798](#L798) | ?> |
| [799](#L799) | </h2> |
| [800](#L800) | <?php |
| [801](#L801) | echo $currentPlugin->showNav(); |
| [802](#L802) |  |
| [803](#L803) | wp\_enqueue\_style('cminds\_package\_userguide', plugin\_dir\_url(\_\_FILE\_\_) . 'css/main.css'); |
| [804](#L804) | wp\_enqueue\_style('cminds\_package\_userguide\_font', 'https://fonts.googleapis.com/css?family=Open+Sans:400,700,300,600'); |
| [805](#L805) |  |
| [806](#L806) | switch ($plugin\_page) { |
| [807](#L807) | default: |
| [808](#L808) | case $currentPlugin->getPageSlug(): { |
| [809](#L809) | $title = \_\_('About', 'cminds-package'); |
| [810](#L810) | wp\_enqueue\_script('cmdm-mailerlite', plugin\_dir\_url(\_\_FILE\_\_) . 'js/mailerlite.js', array(), $this->getOption('plugin-version'), true); |
| [811](#L811) | ob\_start(); |
| [812](#L812) | $base\_path = $currentPlugin->getOption('plugin-dir-path'); |
| [813](#L813) | include $base\_path . 'package/views/userguide\_free.php'; |
| [814](#L814) | $content .= ob\_get\_clean(); |
| [815](#L815) | break; |
| [816](#L816) | } |
| [817](#L817) | case $currentPlugin->getProSlug(): { |
| [818](#L818) | $title = \_\_('Upgrade to Pro', 'cminds-package'); |
| [819](#L819) |  |
| [820](#L820) | ob\_start(); |
| [821](#L821) | echo $currentPlugin->displayUpgradeToProTab(); |
| [822](#L822) | $content .= ob\_get\_clean(); |
| [823](#L823) | break; |
| [824](#L824) | } |
| [825](#L825) | case $currentPlugin->getLicensingSlug(): { |
| [826](#L826) | $title = \_\_('User Guide', 'cminds-package'); |
| [827](#L827) |  |
| [828](#L828) | ob\_start(); |
| [829](#L829) | $content .= $this->showTabs($plugin\_page); |
| [830](#L830) | $content .= ob\_get\_clean(); |
| [831](#L831) | break; |
| [832](#L832) | } |
| [833](#L833) | } |
| [834](#L834) |  |
| [835](#L835) | echo apply\_filters('cminds-about-page-content', $content, $currentPlugin); |
| [836](#L836) | ?> |
| [837](#L837) | </div> |
| [838](#L838) | <?php |
| [839](#L839) | } |
| [840](#L840) |  |
| [841](#L841) | protected function showTabs($key) { |
| [842](#L842) | $class = $id = 'cminds\_' . $key . '\_tabs'; |
| [843](#L843) | ?> |
| [844](#L844) | <div id="<?php echo $id; ?>" class="<?php echo $class; ?>"> |
| [845](#L845) | <script> |
| [846](#L846) | jQuery(document).ready(function ($) { |
| [847](#L847) | $('#<?php echo $id; ?>').tabs({ |
| [848](#L848) | activate: function (event, ui) { |
| [849](#L849) | window.location.hash = ui.newPanel.attr('id').replace(/-/g, '\_'); |
| [850](#L850) | }, |
| [851](#L851) | create: function (event, ui) { |
| [852](#L852) | var tab = location.hash.replace(/\\_/g, '-'); |
| [853](#L853) | if (tab.length) |
| [854](#L854) | { |
| [855](#L855) | var tabContainer = $(ui.panel.context).find('a[href="' + tab + '"]'); |
| [856](#L856) | if (typeof tabContainer !== 'undefined' && tabContainer.length) |
| [857](#L857) | { |
| [858](#L858) | var index = tabContainer.parent().index(); |
| [859](#L859) | $(ui.panel.context).tabs('option', 'active', index); |
| [860](#L860) | } |
| [861](#L861) | } |
| [862](#L862) | } |
| [863](#L863) | }); |
| [864](#L864) | }); |
| [865](#L865) | </script> |
| [866](#L866) | <?php |
| [867](#L867) | $this->renderSettingsTabsControls($key); |
| [868](#L868) | $this->renderSettingsTabs($key); |
| [869](#L869) | ?> |
| [870](#L870) | </div> |
| [871](#L871) | <?php |
| [872](#L872) | } |
| [873](#L873) |  |
| [874](#L874) | protected function getTabsArray($key) { |
| [875](#L875) |  |
| [876](#L876) | switch ($key) { |
| [877](#L877) | default: |
| [878](#L878) | case $this->getPageSlug(): |
| [879](#L879) | $settingsTabsArrayBase = array( |
| [880](#L880) | '1'   => 'User Guide', |
| [881](#L881) | //                                              '5'              => 'Upgrade To Pro', |
| [882](#L882) | '10'  => 'About', |
| [883](#L883) | '30'  => 'Membership', |
| [884](#L884) | '40'  => 'CM Catalog', |
| [885](#L885) | '60'  => 'Video Guides', |
| [886](#L886) | '99'  => 'WordPress Support Forum', |
| [887](#L887) | '199' => 'System Information', |
| [888](#L888) | ); |
| [889](#L889) | if ($this->getOption('plugin-has-addons')) { |
| [890](#L890) | $settingsTabsArrayBase['50'] = 'Plugin Add-ons'; |
| [891](#L891) | } |
| [892](#L892) | break; |
| [893](#L893) | case $this->getLicensingSlug(): |
| [894](#L894) | $settingsTabsArrayBase = array( |
| [895](#L895) | '10' => 'License Activation', |
| [896](#L896) | '20' => 'Check Version', |
| [897](#L897) | //                                              '30' => 'Upgrade Tutorial', |
| [898](#L898) | '40' => 'Manage Your CM Products', |
| [899](#L899) | ); |
| [900](#L900) | break; |
| [901](#L901) | } |
| [902](#L902) |  |
| [903](#L903) | $settingsTabsArray = apply\_filters('cminds-' . $key . '-tabs-array', $settingsTabsArrayBase); |
| [904](#L904) |  |
| [905](#L905) | ksort($settingsTabsArray); |
| [906](#L906) | return $settingsTabsArray; |
| [907](#L907) | } |
| [908](#L908) |  |
| [909](#L909) | /\*\* |
| [910](#L910) | \* Function renders (default) or returns the setttings tabs |
| [911](#L911) | \* |
| [912](#L912) | \* @param type $return |
| [913](#L913) | \* @return string |
| [914](#L914) | \*/ |
| [915](#L915) | protected function renderSettingsTabs($key, $return = false) { |
| [916](#L916) | $content = ''; |
| [917](#L917) | $settingsTabsArray = $this->getTabsArray($key); |
| [918](#L918) |  |
| [919](#L919) | if ($settingsTabsArray) { |
| [920](#L920) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [921](#L921) | $filterName = 'cminds-' . $key . '-content-' . $tabKey; |
| [922](#L922) |  |
| [923](#L923) | $content .= '<div id="tabs-' . $tabKey . '">'; |
| [924](#L924) | $tabContent = apply\_filters($filterName, ''); |
| [925](#L925) | $content .= $tabContent; |
| [926](#L926) | $content .= '</div>'; |
| [927](#L927) | } |
| [928](#L928) | } |
| [929](#L929) |  |
| [930](#L930) | if ($return) { |
| [931](#L931) | return $content; |
| [932](#L932) | } |
| [933](#L933) | echo $content; |
| [934](#L934) | } |
| [935](#L935) |  |
| [936](#L936) | /\*\* |
| [937](#L937) | \* Function renders (default) or returns the setttings tabs |
| [938](#L938) | \* |
| [939](#L939) | \* @param type $return |
| [940](#L940) | \* @return string |
| [941](#L941) | \*/ |
| [942](#L942) | protected function renderSettingsTabsControls($key, $return = false) { |
| [943](#L943) | $content = ''; |
| [944](#L944) | $settingsTabsArray = $this->getTabsArray($key); |
| [945](#L945) |  |
| [946](#L946) | if ($settingsTabsArray) { |
| [947](#L947) | $content .= '<ul>'; |
| [948](#L948) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [949](#L949) | $content .= '<li><a href="#tabs-' . $tabKey . '">' . $tabLabel . '</a></li>'; |
| [950](#L950) | } |
| [951](#L951) | $content .= '</ul>'; |
| [952](#L952) | } |
| [953](#L953) |  |
| [954](#L954) | if ($return) { |
| [955](#L955) | return $content; |
| [956](#L956) | } |
| [957](#L957) | echo $content; |
| [958](#L958) | } |
| [959](#L959) |  |
| [960](#L960) | protected function showSharebox($mode = self::SHAREBOX\_FLAT) { |
| [961](#L961) |  |
| [962](#L962) | $class = (self::SHAREBOX\_SQUARE === $mode) ? 'square' : 'flat'; |
| [963](#L963) |  |
| [964](#L964) | $pluginReviewLink = (string) $this->getOption('plugin-review-url'); |
| [965](#L965) | $pluginFullName = (string) $this->getOption('plugin-name'); |
| [966](#L966) | $pluginUrl = (string) $this->getOption('plugin-store-url'); |
| [967](#L967) |  |
| [968](#L968) | $twitterTweet = rawurlencode('Checkout the ' . $pluginFullName . ' ( ' . $pluginUrl . ' ) #WordPress #Plugin by @CMPLUGINS'); |
| [969](#L969) |  |
| [970](#L970) | ob\_start(); |
| [971](#L971) | ?> |
| [972](#L972) |  |
| [973](#L973) | <style type="text/css"> |
| [974](#L974) |  |
| [975](#L975) | div.cminds\_call\_to\_action\_wrapper:after{ |
| [976](#L976) | content: ''; |
| [977](#L977) | display: table; |
| [978](#L978) | clear: both; |
| [979](#L979) | } |
| [980](#L980) |  |
| [981](#L981) | #mc\_embed\_signup{clear:left; width:400px;} |
| [982](#L982) | .fb\_iframe\_widget{vertical-align: top;line-height: 2em;} |
| [983](#L983) |  |
| [984](#L984) | div.cminds\_call\_to\_action.flat{ |
| [985](#L985) | display: flex; |
| [986](#L986) | text-align: left; |
| [987](#L987) | float: left; |
| [988](#L988) | margin-bottom: 10px; |
| [989](#L989) | } |
| [990](#L990) |  |
| [991](#L991) | div.cminds\_call\_to\_action.flat .inner\_box{ |
| [992](#L992) | border: 1px solid #999; |
| [993](#L993) | padding: 0 0.5em 0.5em; |
| [994](#L994) | min-width: 80px; |
| [995](#L995) | border-radius : 4px; |
| [996](#L996) | margin: 5px 0 5px 0 ; |
| [997](#L997) | } |
| [998](#L998) |  |
| [999](#L999) | div.cminds\_call\_to\_action.square{ |
| [1000](#L1000) | display: flex; |
| [1001](#L1001) | text-align: center; |
| [1002](#L1002) | } |
| [1003](#L1003) |  |
| [1004](#L1004) | div.cminds\_call\_to\_action.square .inner\_box{ |
| [1005](#L1005) | border: 1px solid #999; |
| [1006](#L1006) | padding: 0 0.5em 0.5em; |
| [1007](#L1007) | margin: 0 auto; |
| [1008](#L1008) | min-width: 290px; |
| [1009](#L1009) | } |
| [1010](#L1010) |  |
| [1011](#L1011) | div.cminds\_call\_to\_action.square .inner\_box td{ |
| [1012](#L1012) | display: block; |
| [1013](#L1013) | padding: 0; |
| [1014](#L1014) | } |
| [1015](#L1015) |  |
| [1016](#L1016) | div.cminds\_call\_to\_action a{ |
| [1017](#L1017) | text-decoration: none; |
| [1018](#L1018) | } |
| [1019](#L1019) | </style> |
| [1020](#L1020) |  |
| [1021](#L1021) | <div class="cminds\_call\_to\_action\_wrapper"> |
| [1022](#L1022) | <div class="cminds\_call\_to\_action <?php echo $class; ?>"> |
| [1023](#L1023) | <div id="fb-root"></div> |
| [1024](#L1024) | <div class="inner\_box"> |
| [1025](#L1025) | <table cellpadding="10"><tr> |
| [1026](#L1026) | <td valign="top"> |
| [1027](#L1027) | <h3><?php $this->\_e('Share your Appreciation'); ?></h3> |
| [1028](#L1028) | <a target="\_blank" href="<?php echo esc\_attr($pluginReviewLink); ?>"> |
| [1029](#L1029) | <div class="btn button"> |
| [1030](#L1030) | <div class="dashicons dashicons-share-alt2"></div><span><?php $this->\_e('Submit a review'); ?></span> |
| [1031](#L1031) | </div> |
| [1032](#L1032) | </a> |
| [1033](#L1033) | <a target="\_blank"  href="http://twitter.com/home/?status=<?php echo esc\_attr(urlencode($twitterTweet)) ?>"> |
| [1034](#L1034) | <div class="btn button"> |
| [1035](#L1035) | <div class="dashicons dashicons-twitter"></div><span><?php $this->\_e('Tweet'); ?></span> |
| [1036](#L1036) | </div> |
| [1037](#L1037) | </a> |
| [1038](#L1038) | </td><td valign="top"> |
| [1039](#L1039) | <h3><?php $this->\_e('Stay Up-to-Date'); ?></h3> |
| [1040](#L1040) | <a href="https://twitter.com/CMPLUGINS" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true"><?php $this->\_e('Follow @CMPLUGINS'); ?></a> |
| [1041](#L1041) | <script>!function (d, s, id) { |
| [1042](#L1042) | var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; |
| [1043](#L1043) | if (!d.getElementById(id)) { |
| [1044](#L1044) | js = d.createElement(s); |
| [1045](#L1045) | js.id = id; |
| [1046](#L1046) | js.src = p + '://platform.twitter.com/widgets.js'; |
| [1047](#L1047) | fjs.parentNode.insertBefore(js, fjs); |
| [1048](#L1048) | } |
| [1049](#L1049) | }(document, 'script', 'twitter-wjs'); |
| [1050](#L1050) | </script> |
| [1051](#L1051) |  |
| [1052](#L1052) | <div class="g-follow" data-annotation="none" data-height="24" data-href="https://plus.google.com/108513627228464018583" data-rel="publisher"></div> |
| [1053](#L1053) |  |
| [1054](#L1054) | <script type="text/javascript"> |
| [1055](#L1055) | (function () { |
| [1056](#L1056) | var po = document.createElement('script'); |
| [1057](#L1057) | po.type = 'text/javascript'; |
| [1058](#L1058) | po.async = true; |
| [1059](#L1059) | po.src = 'https://apis.google.com/js/platform.js'; |
| [1060](#L1060) | var s = document.getElementsByTagName('script')[0]; |
| [1061](#L1061) | s.parentNode.insertBefore(po, s); |
| [1062](#L1062) | })(); |
| [1063](#L1063) | </script> |
| [1064](#L1064) |  |
| [1065](#L1065) | <script>(function (d, s, id) { |
| [1066](#L1066) | var js, fjs = d.getElementsByTagName(s)[0]; |
| [1067](#L1067) | if (d.getElementById(id)) |
| [1068](#L1068) | return; |
| [1069](#L1069) | js = d.createElement(s); |
| [1070](#L1070) | js.id = id; |
| [1071](#L1071) | js.src = "//connect.facebook.net/en\_US/sdk.js#xfbml=1&version=v2.0"; |
| [1072](#L1072) | fjs.parentNode.insertBefore(js, fjs); |
| [1073](#L1073) | }(document, 'script', 'facebook-jssdk')); |
| [1074](#L1074) | </script> |
| [1075](#L1075) |  |
| [1076](#L1076) | <div class="fb-like" data-href="https://www.facebook.com/cmplugins" data-width="100" data-layout="button" data-action="like" data-show-faces="true" data-share="true"></div> |
| [1077](#L1077) |  |
| [1078](#L1078) | <br/> |
| [1079](#L1079) | </td> |
| [1080](#L1080) | <td valign="top"> |
| [1081](#L1081) | <!-- Begin MailChimp Signup Form --> |
| [1082](#L1082) | <div id="mc\_embed\_signup"> |
| [1083](#L1083) | <form action="//cminds.us3.list-manage.com/subscribe/post?u=f48254f757fafba2669ae5918&amp;id=142732cbf9" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="\_blank" novalidate> |
| [1084](#L1084) | <div id="mc\_embed\_signup\_scroll"> |
| [1085](#L1085) | <h3 for="mce-EMAIL"><?php $this->\_e('CM Newsletter - coupons, deals, news'); ?></h3> |
| [1086](#L1086) | <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required> |
| [1087](#L1087) | <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn button"> |
| [1088](#L1088) | <span style="display:inline-block; position: relative"><div class="cmtt\_field\_message" title="We only send newsletters a couple of times a year. They include great deals, promo codes and information about our new plugins!"></div></span> |
| [1089](#L1089) | <!-- real people should not fill this in and expect good things - do not remove this or risk fsorm bot signups--> |
| [1090](#L1090) | <div style="position: absolute; left: -5000px;"><input type="text" name="b\_f48254f757fafba2669ae5918\_142732cbf9" tabindex="-1" value=""></div> |
| [1091](#L1091) | <div class="clear"></div> |
| [1092](#L1092) | </div> |
| [1093](#L1093) | </form> |
| [1094](#L1094) | </div> |
| [1095](#L1095) | <!--End mc\_embed\_signup--> |
| [1096](#L1096) | </td> |
| [1097](#L1097) | </tr> |
| [1098](#L1098) | </table> |
| [1099](#L1099) | </div> |
| [1100](#L1100) | </div> |
| [1101](#L1101) | </div> |
| [1102](#L1102) | <?php |
| [1103](#L1103) | ob\_end\_flush(); |
| [1104](#L1104) | } |
| [1105](#L1105) |  |
| [1106](#L1106) | /\*\* |
| [1107](#L1107) | \* Function returns the ads for the users who volunteered to register (optional step) |
| [1108](#L1108) | \* It communicates with our own server to download the current promotions |
| [1109](#L1109) | \* |
| [1110](#L1110) | \* @return boolean |
| [1111](#L1111) | \*/ |
| [1112](#L1112) | protected function getAds() { |
| [1113](#L1113) | $connectionProblem = false; |
| [1114](#L1114) | $ads\_arr = get\_transient('cminds\_free\_ads'); |
| [1115](#L1115) | if (empty($ads\_arr) && !is\_array($ads\_arr)) { |
| [1116](#L1116) | $args = array( |
| [1117](#L1117) | 'body' => array() |
| [1118](#L1118) | ); |
| [1119](#L1119) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1120](#L1120) | $response = wp\_remote\_post($href, $args); |
| [1121](#L1121) | if (!is\_wp\_error($response)) { |
| [1122](#L1122) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1123](#L1123) | } else { |
| [1124](#L1124) | $args['sslverify'] = false; |
| [1125](#L1125) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1126](#L1126) | $response = wp\_remote\_post($href, $args); |
| [1127](#L1127) | if (!is\_wp\_error($response)) { |
| [1128](#L1128) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1129](#L1129) | } else { |
| [1130](#L1130) | $ads = array(); |
| [1131](#L1131) | $connectionProblem = true; |
| [1132](#L1132) | } |
| [1133](#L1133) | } |
| [1134](#L1134) | $ads\_arr = array( |
| [1135](#L1135) | 'ads'          => $ads, |
| [1136](#L1136) | 'refresh\_time' => time(), |
| [1137](#L1137) | 'connection'   => !$connectionProblem, |
| [1138](#L1138) | ); |
| [1139](#L1139) | set\_transient('cminds\_free\_ads', $ads\_arr, self::ADS\_REFRESH\_INTERVAL); |
| [1140](#L1140) | } |
| [1141](#L1141) | /\* |
| [1142](#L1142) | \* Update from old version |
| [1143](#L1143) | \*/ |
| [1144](#L1144) | if (!isset($ads\_arr['ads']) && !isset($ads\_arr['refresh\_time'])) { |
| [1145](#L1145) | $temp\_ads\_arr = $ads\_arr; |
| [1146](#L1146) | $ads\_arr = array( |
| [1147](#L1147) | 'ads'          => $temp\_ads\_arr, |
| [1148](#L1148) | 'refresh\_time' => strtotime('-10 DAYS'), |
| [1149](#L1149) | 'connection'   => TRUE, |
| [1150](#L1150) | ); |
| [1151](#L1151) | } |
| [1152](#L1152) | /\* |
| [1153](#L1153) | \* Update from old version |
| [1154](#L1154) | \*/ |
| [1155](#L1155) | if (!isset($ads\_arr['connection'])) { |
| [1156](#L1156) | $ads\_arr['connection'] = TRUE; |
| [1157](#L1157) | } |
| [1158](#L1158) | return $ads\_arr; |
| [1159](#L1159) | } |
| [1160](#L1160) |  |
| [1161](#L1161) | public function getStoreUrl($args = array()) { |
| [1162](#L1162) | $category = isset($args['category']) ? $args['category'] : 'All'; |
| [1163](#L1163) | $storeUrl = $this->addAffiliateCode($this->getCategoryLink('Wordpress', 'category', $category)); |
| [1164](#L1164) | return esc\_url($storeUrl); |
| [1165](#L1165) | } |
| [1166](#L1166) |  |
| [1167](#L1167) | public function getCategoryLink($group, $type, $name) { |
| [1168](#L1168) | $categoryLinks = array( |
| [1169](#L1169) | 'Wordpress' => array( |
| [1170](#L1170) | 'category' => array( |
| [1171](#L1171) | 'All'     => '/wordpress-plugins-library/', |
| [1172](#L1172) | 'Plugin'  => '/wordpress-plugins/', |
| [1173](#L1173) | 'Service' => '/wordpress-maintenance-services/', |
| [1174](#L1174) | 'Add-On'  => '/wordpress-add-ons/', |
| [1175](#L1175) | 'Bundle'  => '/wordpress-plugins-bundles/'), |
| [1176](#L1176) | 'tags'     => array( |
| [1177](#L1177) | 'SEO'        => '/wordpress-seo-content-plugins/', |
| [1178](#L1178) | 'Business'   => '/plugins-for-wordpress-business-websites/', |
| [1179](#L1179) | 'Publishing' => '/wordpress-plugins-for-content-publishing/', |
| [1180](#L1180) | 'Free'       => '/free-wordpress-plugins/', |
| [1181](#L1181) | 'eCommerce'  => '/wordpress-e-commerce-plugins/', |
| [1182](#L1182) | 'Marketing'  => '/wordpress-plugins-for-marketers/', |
| [1183](#L1183) | 'Admin'      => '/admin-wordpress-plugins/', |
| [1184](#L1184) | 'Community'  => '/wordpress-community-plugins/', |
| [1185](#L1185) | 'eLearning'  => '/wordpress-e-learning-and-lms-plugins/', |
| [1186](#L1186) | ) |
| [1187](#L1187) | ), |
| [1188](#L1188) | 'Magento'   => array( |
| [1189](#L1189) | 'category' => array( |
| [1190](#L1190) | 'All'       => '/magento-extensions-and-modules/', |
| [1191](#L1191) | 'Extension' => '/ecommerce-extensions-store/', |
| [1192](#L1192) | 'Service'   => '/support-and-maintenance-services-for-magento/', |
| [1193](#L1193) | 'Bundle'    => '/extensions-bundles-magento/'), |
| [1194](#L1194) | 'tags'     => array( |
| [1195](#L1195) | 'Customer'     => '/magento-customer-care-support/', |
| [1196](#L1196) | 'Integrations' => '/magento-third-party-integration-extensions/', |
| [1197](#L1197) | 'Marketing'    => '/magento-marketing-extensions/', |
| [1198](#L1198) | 'Marketplace'  => '/magento-marketplace-extensions/', |
| [1199](#L1199) | 'Marketplaces' => '/magento-marketplace-extensions/', |
| [1200](#L1200) | 'Utilities'    => '/magento-utilities-extensions/', |
| [1201](#L1201) | 'Magento-2'    => '/magento-2-extensions/', |
| [1202](#L1202) | '2.0'          => '/magento-2-extensions/' |
| [1203](#L1203) | ) |
| [1204](#L1204) | ) |
| [1205](#L1205) | ); |
| [1206](#L1206) |  |
| [1207](#L1207) | $link = null; |
| [1208](#L1208) | $types = array('category', 'tags'); |
| [1209](#L1209) | if (in\_array($type, $types)) { |
| [1210](#L1210) | $link = isset($categoryLinks[$group][$type][$name]) ? $categoryLinks[$group][$type][$name] : null; |
| [1211](#L1211) | } |
| [1212](#L1212) |  |
| [1213](#L1213) | if (!is\_string($link)) { |
| [1214](#L1214) | $link = ('Wordpress' === $group) ? '/wordpress-plugins-library/?' . $type . '=' . $name : '/magento-extensions-and-modules/?' . $type . '=' . $name; |
| [1215](#L1215) | } |
| [1216](#L1216) |  |
| [1217](#L1217) | $link = 'https://www.cminds.com' . $link; |
| [1218](#L1218) | return $link; |
| [1219](#L1219) | } |
| [1220](#L1220) |  |
| [1221](#L1221) | public function addAffiliateCode($link) { |
| [1222](#L1222) | if ($this->getOption('plugin-affiliate')) { |
| [1223](#L1223) | $link = add\_query\_arg(array('af' => $this->getOption('plugin-affiliate')), $link); |
| [1224](#L1224) | } |
| [1225](#L1225) | return esc\_url($link); |
| [1226](#L1226) | } |
| [1227](#L1227) |  |
| [1228](#L1228) | public function showGuide($atts = array()) { |
| [1229](#L1229) | global $cmindsPluginPackage; |
| [1230](#L1230) |  |
| [1231](#L1231) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1232](#L1232) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1233](#L1233) |  |
| [1234](#L1234) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-guide-hidden'; |
| [1235](#L1235) | $guideHide = filter\_input(INPUT\_GET, 'cminds\_guide\_hide'); |
| [1236](#L1236) | if ($guideHide) { |
| [1237](#L1237) | update\_option($optionName, 1); |
| [1238](#L1238) | } |
| [1239](#L1239) | $guideShow = filter\_input(INPUT\_GET, 'cminds\_guide\_show'); |
| [1240](#L1240) | if ($guideShow) { |
| [1241](#L1241) | update\_option($optionName, 0); |
| [1242](#L1242) | } |
| [1243](#L1243) | $guideHidden = get\_option($optionName, 0); |
| [1244](#L1244) |  |
| [1245](#L1245) | $showGuide = $currentPlugin->getOption('plugin-show-guide'); |
| [1246](#L1246) | if ($showGuide) : |
| [1247](#L1247) | ob\_start(); |
| [1248](#L1248) | ?><style type="text/css"> |
| [1249](#L1249) |  |
| [1250](#L1250) | div.cminds\_guide\_wrapper { |
| [1251](#L1251) | display: inline-block; |
| [1252](#L1252) | background: #FFF; |
| [1253](#L1253) | margin: 0em 0em 0 0; |
| [1254](#L1254) | vertical-align: top; |
| [1255](#L1255) | } |
| [1256](#L1256) |  |
| [1257](#L1257) | div.cminds\_guide\_wrapper \* { |
| [1258](#L1258) | vertical-align: top; |
| [1259](#L1259) | } |
| [1260](#L1260) |  |
| [1261](#L1261) | .cminds\_guide{ |
| [1262](#L1262) | display: inline-block; |
| [1263](#L1263) | } |
| [1264](#L1264) |  |
| [1265](#L1265) | .cminds\_guide\_text{ |
| [1266](#L1266) | display: inline-block; |
| [1267](#L1267) | margin: 1em; |
| [1268](#L1268) | } |
| [1269](#L1269) |  |
| [1270](#L1270) | .cminds\_guide\_text > span{ |
| [1271](#L1271) | text-align: left; |
| [1272](#L1272) | display: block; |
| [1273](#L1273) | } |
| [1274](#L1274) |  |
| [1275](#L1275) | .clear, .clearfix{ |
| [1276](#L1276) | clear: both; |
| [1277](#L1277) | } |
| [1278](#L1278) |  |
| [1279](#L1279) | .cmclearfix{ |
| [1280](#L1280) | clear: both !important; |
| [1281](#L1281) | } |
| [1282](#L1282) |  |
| [1283](#L1283) | .cminds\_guide .guide\_header{ |
| [1284](#L1284) | font-size: 14pt; |
| [1285](#L1285) | font-weight: bold; |
| [1286](#L1286) | } |
| [1287](#L1287) |  |
| [1288](#L1288) | .cminds\_guide .guide\_text{ |
| [1289](#L1289) | float: left; |
| [1290](#L1290) | width: 60%; |
| [1291](#L1291) | max-width: 100%; |
| [1292](#L1292) | } |
| [1293](#L1293) |  |
| [1294](#L1294) | .cminds\_guide .guide\_text ol{ |
| [1295](#L1295) | margin-left: 1.2em; |
| [1296](#L1296) | } |
| [1297](#L1297) |  |
| [1298](#L1298) | .cminds\_guide .guide\_videos{ |
| [1299](#L1299) | float: left; |
| [1300](#L1300) | max-width: 100%; |
| [1301](#L1301) | overflow: hidden; |
| [1302](#L1302) | width: 40%; |
| [1303](#L1303) | } |
| [1304](#L1304) |  |
| [1305](#L1305) | .cminds\_guide .guide\_videos .guide\_videos\_inner{ |
| [1306](#L1306) | } |
| [1307](#L1307) |  |
| [1308](#L1308) | .cminds\_guide .guide\_videos > div{ |
| [1309](#L1309) | display: inline-block; |
| [1310](#L1310) | } |
| [1311](#L1311) | .cminds\_guide .guide\_videos > div.guide\_videos\_after{ |
| [1312](#L1312) | display: block; |
| [1313](#L1313) | margin: 10px 0 0 52px; |
| [1314](#L1314) | } |
| [1315](#L1315) | .prev\_video, |
| [1316](#L1316) | .next\_video { |
| [1317](#L1317) | margin-top: 85px; |
| [1318](#L1318) | } |
| [1319](#L1319) |  |
| [1320](#L1320) | .guide\_video\_title { |
| [1321](#L1321) | font-size: 13pt; |
| [1322](#L1322) | font-weight: bold; |
| [1323](#L1323) | margin: 0 0 10px 0px; |
| [1324](#L1324) | } |
| [1325](#L1325) |  |
| [1326](#L1326) | .cminds\_link.blue { |
| [1327](#L1327) | color: #fff; |
| [1328](#L1328) | border-color: #33ace7; |
| [1329](#L1329) | background: #66c1ed; |
| [1330](#L1330) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1331](#L1331) | box-shadow: 0 1px 0 #ccc; |
| [1332](#L1332) | display: inline-block; |
| [1333](#L1333) | text-decoration: none; |
| [1334](#L1334) | line-height: 26px; |
| [1335](#L1335) | height: 28px; |
| [1336](#L1336) | padding: 0 10px 1px; |
| [1337](#L1337) | cursor: pointer; |
| [1338](#L1338) | border-width: 1px; |
| [1339](#L1339) | border-style: solid; |
| [1340](#L1340) | -webkit-border-radius: 3px; |
| [1341](#L1341) | border-radius: 3px; |
| [1342](#L1342) | -webkit-box-sizing: border-box; |
| [1343](#L1343) | -moz-box-sizing: border-box; |
| [1344](#L1344) | box-sizing: border-box; |
| [1345](#L1345) | } |
| [1346](#L1346) |  |
| [1347](#L1347) | .cminds\_guide .guide\_videos .guide\_video{ |
| [1348](#L1348) | display: none; |
| [1349](#L1349) | } |
| [1350](#L1350) | .cminds\_guide .guide\_videos .guide\_video.active{ |
| [1351](#L1351) | display: inline-block; |
| [1352](#L1352) | } |
| [1353](#L1353) |  |
| [1354](#L1354) | .cminds\_guide .guide\_video\_content > a{ |
| [1355](#L1355) | display: block; |
| [1356](#L1356) | } |
| [1357](#L1357) | .install-guide-video {max-height: 160px;} |
| [1358](#L1358) | .upgrage-guide-video {max-height: 255px;} |
| [1359](#L1359) | @media only screen and (max-width: 768px) { |
| [1360](#L1360) | .cminds\_guide .guide\_text { width:100%; } |
| [1361](#L1361) | .cminds\_guide .guide\_videos { width:100%; } |
| [1362](#L1362) | } |
| [1363](#L1363) | </style> |
| [1364](#L1364) | <?php |
| [1365](#L1365) | if (!$guideHidden) : |
| [1366](#L1366) | ?> |
| [1367](#L1367) | <script> |
| [1368](#L1368) | jQuery(document).ready(function () { |
| [1369](#L1369) |  |
| [1370](#L1370) | jQuery.fn.visible = function () { |
| [1371](#L1371) | return this.css('visibility', 'visible'); |
| [1372](#L1372) | }; |
| [1373](#L1373) |  |
| [1374](#L1374) | jQuery.fn.invisible = function () { |
| [1375](#L1375) | return this.css('visibility', 'hidden'); |
| [1376](#L1376) | }; |
| [1377](#L1377) |  |
| [1378](#L1378) | jQuery.fn.visibilityToggle = function () { |
| [1379](#L1379) | return this.css('visibility', function (i, visibility) { |
| [1380](#L1380) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1381](#L1381) | }); |
| [1382](#L1382) | }; |
| [1383](#L1383) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1384](#L1384) | var prevVisible = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video').length; |
| [1385](#L1385) | var nextVisible = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video').length; |
| [1386](#L1386) |  |
| [1387](#L1387) | if (prevVisible) { |
| [1388](#L1388) | jQuery('.guide\_videos .prev\_video').visible(); |
| [1389](#L1389) | } else { |
| [1390](#L1390) | jQuery('.guide\_videos .prev\_video').invisible(); |
| [1391](#L1391) | } |
| [1392](#L1392) |  |
| [1393](#L1393) | if (nextVisible) { |
| [1394](#L1394) | jQuery('.guide\_videos .next\_video').visible(); |
| [1395](#L1395) | } else { |
| [1396](#L1396) | jQuery('.guide\_videos .next\_video').invisible(); |
| [1397](#L1397) | } |
| [1398](#L1398) | }; |
| [1399](#L1399) |  |
| [1400](#L1400) | cminds\_video\_prev\_next\_toggle(); |
| [1401](#L1401) |  |
| [1402](#L1402) | jQuery('.guide\_videos .prev\_video').on('click', function () { |
| [1403](#L1403) | var prevVideo = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video'); |
| [1404](#L1404) | if (prevVideo.length) |
| [1405](#L1405) | { |
| [1406](#L1406) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1407](#L1407) | prevVideo.addClass('active'); |
| [1408](#L1408) | } |
| [1409](#L1409) | cminds\_video\_prev\_next\_toggle(); |
| [1410](#L1410) | }); |
| [1411](#L1411) |  |
| [1412](#L1412) | jQuery('.guide\_videos .next\_video').on('click', function () { |
| [1413](#L1413) | var nextVideo = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video'); |
| [1414](#L1414) | if (nextVideo.length) |
| [1415](#L1415) | { |
| [1416](#L1416) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1417](#L1417) | nextVideo.addClass('active'); |
| [1418](#L1418) | } |
| [1419](#L1419) | cminds\_video\_prev\_next\_toggle(); |
| [1420](#L1420) | }); |
| [1421](#L1421) | }); |
| [1422](#L1422) | </script> |
| [1423](#L1423) | <div class="clear clearfix cmclearfix"></div> |
| [1424](#L1424) | <div class="cminds\_guide\_wrapper"> |
| [1425](#L1425) | <div class="cminds\_guide"> |
| [1426](#L1426) |  |
| [1427](#L1427) | <?php |
| [1428](#L1428) | $guideText = $currentPlugin->getOption('plugin-guide-text'); |
| [1429](#L1429) | if (!empty($guideText)) : |
| [1430](#L1430) | ?> |
| [1431](#L1431) | <div class="guide\_text"> |
| [1432](#L1432) | <div class="guide\_header"> |
| [1433](#L1433) | Initial Installation Guide |
| [1434](#L1434) | </div> |
| [1435](#L1435) | <?php echo $guideText; ?> |
| [1436](#L1436) | </div> |
| [1437](#L1437) | <?php endif; ?> |
| [1438](#L1438) |  |
| [1439](#L1439) | <?php |
| [1440](#L1440) | $videos = $currentPlugin->getOption('plugin-guide-videos'); |
| [1441](#L1441) | if (!empty($videos) && is\_array($videos)) : |
| [1442](#L1442) | ?> |
| [1443](#L1443) | <div class="guide\_videos"> |
| [1444](#L1444) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1445](#L1445) | <div class="guide\_videos\_inner"> |
| [1446](#L1446) | <?php foreach ($videos as $key => $video) : ?> |
| [1447](#L1447) | <div class="guide\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1448](#L1448) | <div class="guide\_video\_title"><?php echo $video['title']; ?></div> |
| [1449](#L1449) | <?php |
| [1450](#L1450) | // echo do\_shortcode('[video src="https://player.vimeo.com/video/' . $video['video\_id'] . '?portrait=0&responsive=0&maxwidth=290&maxheight=160&player\_id=player\_2" width="290" height="160" id="palyer\_2"][/video]'); |
| [1451](#L1451) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="290" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1452](#L1452) | //                                                                                                              echo wp\_video\_shortcode(array('src' =>"https://player.vimeo.com/video/" . $video['video\_id'] . "?portrait=0&responsive=1&maxheight=160&player\_id=player\_2", 'width' => 463, 'height' => 255, 'class' => "install-guide-video wp-video-shortcode", 'id' => "palyer\_2")); |
| [1453](#L1453) | ?> |
| [1454](#L1454) | </div> |
| [1455](#L1455) | <?php endforeach; ?> |
| [1456](#L1456) | </div> |
| [1457](#L1457) | <div class="next\_video cminds\_link blue" style="visibility: hidden">Next</div> |
| [1458](#L1458) | <div class="guide\_videos\_after"> |
| [1459](#L1459) | <a href="<?php echo $currentPlugin->getPageUrl('about'); ?>" class="cminds\_link blue" target="\_blank">Open Plugin User Guide</a> |
| [1460](#L1460) | </div> |
| [1461](#L1461) | </div> |
| [1462](#L1462) | <?php endif; ?> |
| [1463](#L1463) | </div> |
| [1464](#L1464) | </div> |
| [1465](#L1465) | <div class="clear clearfix cmclearfix"></div> |
| [1466](#L1466) | <?php else : ?> |
| [1467](#L1467) | <div class="cminds\_guide\_wrapper"> |
| [1468](#L1468) | <div> |
| [1469](#L1469) | <a class="cminds-guide-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_guide\_show' => 1), remove\_query\_arg('cminds\_guide\_hide'))); ?>">Show Installation Guide Box</a> |
| [1470](#L1470) | </div> |
| [1471](#L1471) | </div> |
| [1472](#L1472) | <div class="clear clearfix cmclearfix"></div> |
| [1473](#L1473) | <?php |
| [1474](#L1474) | endif; |
| [1475](#L1475) | ?> |
| [1476](#L1476) |  |
| [1477](#L1477) | <?php |
| [1478](#L1478) | $content = ob\_get\_clean(); |
| [1479](#L1479) | return $content; |
| [1480](#L1480) | endif; |
| [1481](#L1481) | } |
| [1482](#L1482) |  |
| [1483](#L1483) | public function showActivation($atts = array()) { |
| [1484](#L1484) | global $cmindsPluginPackage; |
| [1485](#L1485) |  |
| [1486](#L1486) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1487](#L1487) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1488](#L1488) |  |
| [1489](#L1489) | ob\_start(); |
| [1490](#L1490) | $isRegistered = $currentPlugin->isRegistered(); |
| [1491](#L1491) | $isSkipped = $currentPlugin->isSkipped(); |
| [1492](#L1492) | $isRegistered = false; |
| [1493](#L1493) | if (!$isRegistered) : |
| [1494](#L1494) | include\_once 'views/registration.php'; |
| [1495](#L1495) | else: |
| [1496](#L1496) | ?> |
| [1497](#L1497) | <br/> |
| [1498](#L1498) | <br/> |
| [1499](#L1499) | <?php |
| [1500](#L1500) | endif; |
| [1501](#L1501) | $content = ob\_get\_clean(); |
| [1502](#L1502) | return $content; |
| [1503](#L1503) | } |
| [1504](#L1504) |  |
| [1505](#L1505) | public function time\_to\_decimal($time) { |
| [1506](#L1506) | $timeArr = explode(':', $time); |
| [1507](#L1507) | $decTime = ($timeArr[0] \* 60) + ($timeArr[1]); |
| [1508](#L1508) | if (isset($timeArr[2])) { |
| [1509](#L1509) | $decTime += $timeArr[2] / 60; |
| [1510](#L1510) | } |
| [1511](#L1511) | return $decTime; |
| [1512](#L1512) | } |
| [1513](#L1513) |  |
| [1514](#L1514) | public function showUpgrade($atts = array()) { |
| [1515](#L1515) | global $cmindsPluginPackage; |
| [1516](#L1516) |  |
| [1517](#L1517) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1518](#L1518) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1519](#L1519) |  |
| [1520](#L1520) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-upgrade-hidden'; |
| [1521](#L1521) | $upgradeHide = filter\_input(INPUT\_GET, 'cminds\_upgrade\_hide'); |
| [1522](#L1522) | if ($upgradeHide) { |
| [1523](#L1523) | update\_option($optionName, 1); |
| [1524](#L1524) | } |
| [1525](#L1525) | $upgradeShow = filter\_input(INPUT\_GET, 'cminds\_upgrade\_show'); |
| [1526](#L1526) | if ($upgradeShow) { |
| [1527](#L1527) | update\_option($optionName, 0); |
| [1528](#L1528) | } |
| [1529](#L1529) | $upgradeHidden = get\_option($optionName, 0); |
| [1530](#L1530) | $isRegistered = $currentPlugin->isRegistered(); |
| [1531](#L1531) |  |
| [1532](#L1532) | $showUpgrade = $currentPlugin->getOption('plugin-show-upgrade', TRUE); |
| [1533](#L1533) | if ($showUpgrade) : |
| [1534](#L1534) | ob\_start(); |
| [1535](#L1535) | ?><style type="text/css"> |
| [1536](#L1536) |  |
| [1537](#L1537) | div.cminds\_upgrade\_wrapper { |
| [1538](#L1538) | display: block; |
| [1539](#L1539) | background: #FFF; |
| [1540](#L1540) | vertical-align: top; |
| [1541](#L1541) | } |
| [1542](#L1542) |  |
| [1543](#L1543) | div.cminds\_upgrade\_wrapper \* { |
| [1544](#L1544) | vertical-align: top; |
| [1545](#L1545) | } |
| [1546](#L1546) |  |
| [1547](#L1547) | .cminds\_upgrade{ |
| [1548](#L1548) | display: inline-block; |
| [1549](#L1549) | width: 100%; |
| [1550](#L1550) | } |
| [1551](#L1551) |  |
| [1552](#L1552) | .cminds\_upgrade\_text{ |
| [1553](#L1553) | display: inline-block; |
| [1554](#L1554) | margin: 1em; |
| [1555](#L1555) | } |
| [1556](#L1556) |  |
| [1557](#L1557) | .cminds\_upgrade\_text > span{ |
| [1558](#L1558) | text-align: left; |
| [1559](#L1559) | display: block; |
| [1560](#L1560) | } |
| [1561](#L1561) |  |
| [1562](#L1562) | .clear, .clearfix{ |
| [1563](#L1563) | clear: both; |
| [1564](#L1564) | } |
| [1565](#L1565) |  |
| [1566](#L1566) | .cmclearfix{ |
| [1567](#L1567) | clear: both !important; |
| [1568](#L1568) | } |
| [1569](#L1569) |  |
| [1570](#L1570) | .cminds\_upgrade .upgrade\_header{ |
| [1571](#L1571) | font-size: 14pt; |
| [1572](#L1572) | font-weight: bold; |
| [1573](#L1573) | } |
| [1574](#L1574) |  |
| [1575](#L1575) | .cminds\_upgrade .upgrade\_text{ |
| [1576](#L1576) | display: inline-block; |
| [1577](#L1577) | max-width: 45%; |
| [1578](#L1578) | } |
| [1579](#L1579) |  |
| [1580](#L1580) | .cminds\_upgrade .upgrade\_videos{ |
| [1581](#L1581) | display: inline-flex; |
| [1582](#L1582) | max-width: 50%; |
| [1583](#L1583) | min-width: 520px; |
| [1584](#L1584) | overflow: hidden; |
| [1585](#L1585) | } |
| [1586](#L1586) |  |
| [1587](#L1587) | .cminds\_upgrade .upgrade\_videos .upgrade\_videos\_inner{ |
| [1588](#L1588) | } |
| [1589](#L1589) |  |
| [1590](#L1590) | .cminds\_upgrade .upgrade\_videos > div{ |
| [1591](#L1591) | display: inline-block; |
| [1592](#L1592) | } |
| [1593](#L1593) | .cminds\_upgrade .upgrade\_videos > div.upgrade\_videos\_after{ |
| [1594](#L1594) | display: block; |
| [1595](#L1595) | margin: 10px 0 0 0px; |
| [1596](#L1596) | } |
| [1597](#L1597) | .prev\_video, |
| [1598](#L1598) | .next\_video { |
| [1599](#L1599) | margin-top: 15px; |
| [1600](#L1600) | } |
| [1601](#L1601) |  |
| [1602](#L1602) | .upgrade\_video\_title { |
| [1603](#L1603) | font-size: 13pt; |
| [1604](#L1604) | font-weight: bold; |
| [1605](#L1605) | margin: 0 0 10px 0px; |
| [1606](#L1606) | } |
| [1607](#L1607) |  |
| [1608](#L1608) | .cminds\_link.blue { |
| [1609](#L1609) | color: #fff; |
| [1610](#L1610) | border-color: #33ace7; |
| [1611](#L1611) | background: #66c1ed; |
| [1612](#L1612) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1613](#L1613) | box-shadow: 0 1px 0 #ccc; |
| [1614](#L1614) | display: inline-block; |
| [1615](#L1615) | text-decoration: none; |
| [1616](#L1616) | line-height: 26px; |
| [1617](#L1617) | height: 28px; |
| [1618](#L1618) | padding: 0 10px 1px; |
| [1619](#L1619) | cursor: pointer; |
| [1620](#L1620) | border-width: 1px; |
| [1621](#L1621) | border-style: solid; |
| [1622](#L1622) | -webkit-border-radius: 3px; |
| [1623](#L1623) | border-radius: 3px; |
| [1624](#L1624) | -webkit-box-sizing: border-box; |
| [1625](#L1625) | -moz-box-sizing: border-box; |
| [1626](#L1626) | box-sizing: border-box; |
| [1627](#L1627) | } |
| [1628](#L1628) |  |
| [1629](#L1629) | .cminds\_upgrade .upgrade\_videos .upgrade\_video{ |
| [1630](#L1630) | display: none; |
| [1631](#L1631) | } |
| [1632](#L1632) | .cminds\_upgrade .upgrade\_videos .upgrade\_video.active{ |
| [1633](#L1633) | display: inline-block; |
| [1634](#L1634) | } |
| [1635](#L1635) |  |
| [1636](#L1636) | .cminds\_upgrade .upgrade\_video\_content > a{ |
| [1637](#L1637) | display: block; |
| [1638](#L1638) | } |
| [1639](#L1639) | </style> |
| [1640](#L1640) | <?php |
| [1641](#L1641) | if (!$upgradeHidden) : |
| [1642](#L1642) | ?> |
| [1643](#L1643) | <script> |
| [1644](#L1644) | jQuery(document).ready(function () { |
| [1645](#L1645) |  |
| [1646](#L1646) | jQuery.fn.visible = function () { |
| [1647](#L1647) | return this.css('visibility', 'visible'); |
| [1648](#L1648) | }; |
| [1649](#L1649) |  |
| [1650](#L1650) | jQuery.fn.invisible = function () { |
| [1651](#L1651) | return this.css('visibility', 'hidden'); |
| [1652](#L1652) | }; |
| [1653](#L1653) |  |
| [1654](#L1654) | jQuery.fn.visibilityToggle = function () { |
| [1655](#L1655) | return this.css('visibility', function (i, visibility) { |
| [1656](#L1656) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1657](#L1657) | }); |
| [1658](#L1658) | }; |
| [1659](#L1659) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1660](#L1660) | var prevVisible = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video').length; |
| [1661](#L1661) | var nextVisible = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video').length; |
| [1662](#L1662) |  |
| [1663](#L1663) | if (prevVisible) { |
| [1664](#L1664) | jQuery('.upgrade\_videos .prev\_video').visible(); |
| [1665](#L1665) | } else { |
| [1666](#L1666) | jQuery('.upgrade\_videos .prev\_video').invisible(); |
| [1667](#L1667) | } |
| [1668](#L1668) |  |
| [1669](#L1669) | if (nextVisible) { |
| [1670](#L1670) | jQuery('.upgrade\_videos .next\_video').visible(); |
| [1671](#L1671) | } else { |
| [1672](#L1672) | jQuery('.upgrade\_videos .next\_video').invisible(); |
| [1673](#L1673) | } |
| [1674](#L1674) | }; |
| [1675](#L1675) |  |
| [1676](#L1676) | cminds\_video\_prev\_next\_toggle(); |
| [1677](#L1677) |  |
| [1678](#L1678) | jQuery('.upgrade\_videos .prev\_video').on('click', function () { |
| [1679](#L1679) | var prevVideo = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video'); |
| [1680](#L1680) | if (prevVideo.length) |
| [1681](#L1681) | { |
| [1682](#L1682) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1683](#L1683) | prevVideo.addClass('active'); |
| [1684](#L1684) | } |
| [1685](#L1685) | cminds\_video\_prev\_next\_toggle(); |
| [1686](#L1686) | }); |
| [1687](#L1687) |  |
| [1688](#L1688) | jQuery('.upgrade\_videos .next\_video').on('click', function () { |
| [1689](#L1689) | var nextVideo = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video'); |
| [1690](#L1690) | if (nextVideo.length) |
| [1691](#L1691) | { |
| [1692](#L1692) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1693](#L1693) | nextVideo.addClass('active'); |
| [1694](#L1694) | } |
| [1695](#L1695) | cminds\_video\_prev\_next\_toggle(); |
| [1696](#L1696) | }); |
| [1697](#L1697) | });</script> |
| [1698](#L1698) | <script type="text/javascript" src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>js/froogaloop.js"></script> |
| [1699](#L1699) | <script> |
| [1700](#L1700) | jQuery(document).ready(function ( ) { |
| [1701](#L1701) | // Message displayed when link is playing |
| [1702](#L1702) | var links = jQuery('.cm-video-bookmark-link'); |
| [1703](#L1703) | var playNotice = ' - <strong><i><spam style="color:darkgreen;">Now playing</span></i></strong>'; |
| [1704](#L1704) | // Function to hide all status messages |
| [1705](#L1705) | hidePlayNoticeAll = function ( ) { |
| [1706](#L1706) | jQuery('.cm-video-bookmark-link .link\_status').html(""); |
| [1707](#L1707) | } |
| [1708](#L1708) |  |
| [1709](#L1709) | //                             Load Vimeo API for the embedded video |
| [1710](#L1710) | var iframe\_player = jQuery('.upgrade\_video\_content iframe')[0]; |
| [1711](#L1711) | var frogaloopPlayer = $f(iframe\_player); |
| [1712](#L1712) | // Option listeners for pause, finish, and playProgress |
| [1713](#L1713) | // |
| [1714](#L1714) | // Note: If you want to use this, you must define the functions or links wont work |
| [1715](#L1715) | frogaloopPlayer.addEvent('ready', function ( ) { |
| [1716](#L1716) | frogaloopPlayer.addEvent('pause', onPause); |
| [1717](#L1717) | frogaloopPlayer.addEvent('finish', onFinish); |
| [1718](#L1718) | frogaloopPlayer.addEvent('playProgress', onPlayProgress); |
| [1719](#L1719) | }); |
| [1720](#L1720) |  |
| [1721](#L1721) | // Functions for each listener event |
| [1722](#L1722) | function onPause(id) { // When the video is paused, do this. |
| [1723](#L1723) | jQuery(".main\_status").html('Paused'); |
| [1724](#L1724) | } |
| [1725](#L1725) |  |
| [1726](#L1726) | function onFinish(id) { // When the video is finished, do this. |
| [1727](#L1727) | jQuery(".main\_status").html('Finished'); |
| [1728](#L1728) | } |
| [1729](#L1729) |  |
| [1730](#L1730) | function onPlayProgress(data, id) { // While the video is playing, do this. |
| [1731](#L1731) | jQuery(".main\_status").html('Playing - ' + data.seconds + 's played'); // data.percent can also be used. |
| [1732](#L1732) | } |
| [1733](#L1733) |  |
| [1734](#L1734) | // Function to control what happens when each lesson link is clicked |
| [1735](#L1735) | function setupLinks( ) { |
| [1736](#L1736) |  |
| [1737](#L1737) | links.on('click', function ( ) { |
| [1738](#L1738) | var track = jQuery(this).data('timestamp'); //Timestamp stored as a data attribute |
| [1739](#L1739) |  |
| [1740](#L1740) | hidePlayNoticeAll( ); // Hide all status messages before displaying (to prevent them from sticking) |
| [1741](#L1741) | if (true === jQuery(this).data('active')) { |
| [1742](#L1742) | frogaloopPlayer.api('pause'); //Play the video |
| [1743](#L1743) | jQuery(this).data('active', false); |
| [1744](#L1744) | } else { |
| [1745](#L1745) | frogaloopPlayer.api('play'); //Play the video |
| [1746](#L1746) | frogaloopPlayer.api('seekTo', track); //Seek to the number of seconds in the variable link\_1\_track |
| [1747](#L1747) | jQuery(this).find('.link\_status').html(playNotice); //Display status message (playNotice) within span with class link\_1\_status |
| [1748](#L1748) | jQuery(this).data('active', true); |
| [1749](#L1749) | } |
| [1750](#L1750) | }); |
| [1751](#L1751) | } |
| [1752](#L1752) | setupLinks( ); |
| [1753](#L1753) | });</script> |
| [1754](#L1754) | <div class="clear clearfix cmclearfix"></div> |
| [1755](#L1755) | <div class="cminds\_upgrade\_wrapper"> |
| [1756](#L1756) | <div class="cminds\_upgrade"> |
| [1757](#L1757) |  |
| [1758](#L1758) | <?php |
| [1759](#L1759) | $upgradeText = $currentPlugin->getOption('plugin-upgrade-text'); |
| [1760](#L1760) | if (!empty($upgradeText)) : |
| [1761](#L1761) | ?> |
| [1762](#L1762) | <div class="upgrade\_text"> |
| [1763](#L1763) | <div class="upgrade\_header"> |
| [1764](#L1764) | Why you Should Upgrade |
| [1765](#L1765) | </div> |
| [1766](#L1766) | <div style="display:block"> |
| [1767](#L1767) | <p><?php echo $upgradeText; ?></p> |
| [1768](#L1768) | <div class="links"> |
| [1769](#L1769) |  |
| [1770](#L1770) | <?php |
| [1771](#L1771) | $upgradel = $currentPlugin->getOption('plugin-upgrade-text-list'); |
| [1772](#L1772) | if (!empty($upgradel) && is\_array($upgradel)) : |
| [1773](#L1773) | foreach ($upgradel as $key => $listitem) : |
| [1774](#L1774) | $linknum = $key + 1; |
| [1775](#L1775) | echo $listitem['video\_time']; |
| [1776](#L1776) | if ('More' !== $listitem['video\_time']) : |
| [1777](#L1777) | ?> |
| [1778](#L1778) | - <a class="cm-video-bookmark-link link\_<?php echo $linknum; ?>" data-timestamp="<?php echo $this->time\_to\_decimal($listitem['video\_time']); ?>" href="javascript:void(0);" target="\_self"><?php echo $listitem['title']; ?><span class="link\_status"></span></a> |
| [1779](#L1779) | <?php else: ?> |
| [1780](#L1780) | - <span class="cm-video-bookmark bookmark\_<?php echo $linknum; ?>" style="color:green;"><?php echo $listitem['title']; ?></span> |
| [1781](#L1781) | <?php endif; ?> |
| [1782](#L1782) | <br/> |
| [1783](#L1783) | <?php endforeach; ?> |
| [1784](#L1784) | <?php endif ?> |
| [1785](#L1785) | </div> |
| [1786](#L1786) | </div> |
| [1787](#L1787) | </div> |
| [1788](#L1788) | <?php endif; ?> |
| [1789](#L1789) |  |
| [1790](#L1790) | <?php |
| [1791](#L1791) | $videos = $currentPlugin->getOption('plugin-upgrade-videos'); |
| [1792](#L1792) | if (!empty($videos) && is\_array($videos)) : |
| [1793](#L1793) | ?> |
| [1794](#L1794) | <div class="upgrade\_videos"> |
| [1795](#L1795) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1796](#L1796) | <div class="upgrade\_videos\_inner"> |
| [1797](#L1797) | <?php |
| [1798](#L1798) | foreach ($videos as $key => $video) : |
| [1799](#L1799) | if (!empty($video)) : |
| [1800](#L1800) | ?> |
| [1801](#L1801) |  |
| [1802](#L1802) | <div class="upgrade\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1803](#L1803) | <div class="upgrade\_video\_title"><?php echo $video['title']; ?></div> |
| [1804](#L1804) | <div class="upgrade\_video\_content"> |
| [1805](#L1805) | <?php |
| [1806](#L1806) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="390" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1807](#L1807) | ?> |
| [1808](#L1808) | <br /><br /><a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $currentPlugin->getOption('plugin-abbrev') . '\_pro')); ?>" class="button button-primary" style="background-color:green; width:220px;" title="Click to Buy PRO">Show me Upgrade Options >></a> |
| [1809](#L1809) |  |
| [1810](#L1810) | </div> |
| [1811](#L1811) | </div> |
| [1812](#L1812) | <?php |
| [1813](#L1813) | endif; |
| [1814](#L1814) | endforeach; |
| [1815](#L1815) | ?> |
| [1816](#L1816) | </div> |
| [1817](#L1817) | </div> |
| [1818](#L1818) | <?php endif; ?> |
| [1819](#L1819) | </div>                    </div> |
| [1820](#L1820) | <?php |
| [1821](#L1821) | echo $this->showAds($atts); |
| [1822](#L1822) | ?> |
| [1823](#L1823) | <div class="clear clearfix cmclearfix"></div> |
| [1824](#L1824) | <?php else : ?> |
| [1825](#L1825) | <div class="cminds\_upgrade\_wrapper"> |
| [1826](#L1826) | <div> |
| [1827](#L1827) | <a class="cminds-upgrade-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_upgrade\_show' => 1), remove\_query\_arg('cminds\_upgrade\_hide'))); ?>">Why you shoud have the Premium Edition>></a> |
| [1828](#L1828) | </div> |
| [1829](#L1829) | </div> |
| [1830](#L1830) | <div class="clear clearfix cmclearfix"></div> |
| [1831](#L1831) | <?php |
| [1832](#L1832) | endif; |
| [1833](#L1833) | ?> |
| [1834](#L1834) |  |
| [1835](#L1835) | <?php |
| [1836](#L1836) | $content = ob\_get\_clean(); |
| [1837](#L1837) | return $content; |
| [1838](#L1838) | endif; |
| [1839](#L1839) | } |
| [1840](#L1840) |  |
| [1841](#L1841) | protected function getDaysSinceLastRefresh($ads\_arr) { |
| [1842](#L1842) | if (!is\_array($ads\_arr) && empty($ads\_arr['refresh\_time'])) { |
| [1843](#L1843) | return null; |
| [1844](#L1844) | } |
| [1845](#L1845) |  |
| [1846](#L1846) | $now = time(); |
| [1847](#L1847) | $your\_date = intval($ads\_arr['refresh\_time']); |
| [1848](#L1848) | $datediff = $now - $your\_date; |
| [1849](#L1849) | $days = abs(floor($datediff / (60 \* 60 \* 24))); |
| [1850](#L1850) | return $days; |
| [1851](#L1851) | } |
| [1852](#L1852) |  |
| [1853](#L1853) | public function showAds($atts = array()) { |
| [1854](#L1854) | global $cmindsPluginPackage; |
| [1855](#L1855) |  |
| [1856](#L1856) | $atts = shortcode\_atts(array( |
| [1857](#L1857) | 'flat' => false, |
| [1858](#L1858) | 'id'   => null |
| [1859](#L1859) | ), $atts); |
| [1860](#L1860) |  |
| [1861](#L1861) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1862](#L1862) |  |
| [1863](#L1863) | $optionName = 'cminds-' . $this->getOption('plugin-short-slug') . '-ads-hidden'; |
| [1864](#L1864) | $adsHide = filter\_input(INPUT\_GET, 'cminds\_ad\_hide'); |
| [1865](#L1865) | if ($adsHide) { |
| [1866](#L1866) | update\_option($optionName, 1); |
| [1867](#L1867) | } |
| [1868](#L1868) | $adsShow = filter\_input(INPUT\_GET, 'cminds\_ad\_show'); |
| [1869](#L1869) | if ($adsShow) { |
| [1870](#L1870) | update\_option($optionName, 0); |
| [1871](#L1871) | } |
| [1872](#L1872) | $adsHidden = get\_option($optionName, 1); |
| [1873](#L1873) | $adsRefreshed = filter\_input(INPUT\_GET, 'cminds\_ad\_refresh'); |
| [1874](#L1874) | if ($adsRefreshed) { |
| [1875](#L1875) | delete\_transient('cminds\_free\_ads'); |
| [1876](#L1876) | } |
| [1877](#L1877) | $ads\_arr = $this->getAds(); |
| [1878](#L1878) | $ads = isset($ads\_arr['ads']) ? $ads\_arr['ads'] : array(); |
| [1879](#L1879) | $days\_since\_last\_refresh = $this->getDaysSinceLastRefresh($ads\_arr); |
| [1880](#L1880) |  |
| [1881](#L1881) | $isRegistered = $currentPlugin->isRegistered(); |
| [1882](#L1882) | /\* |
| [1883](#L1883) | \* Don't display if there's no server connection |
| [1884](#L1884) | \*/ |
| [1885](#L1885) | if (!$ads\_arr['connection']) { |
| [1886](#L1886) | return; |
| [1887](#L1887) | } |
| [1888](#L1888) | ob\_start(); |
| [1889](#L1889) | ?> |
| [1890](#L1890) |  |
| [1891](#L1891) | <style type="text/css"> |
| [1892](#L1892) |  |
| [1893](#L1893) | div.cminds\_ads\_wrapper { |
| [1894](#L1894) | display: inline-block; |
| [1895](#L1895) | padding: 1em; |
| [1896](#L1896) | background: #FFF; |
| [1897](#L1897) | border: solid 1px #E0E0E0; |
| [1898](#L1898) | margin: 1em 1em 0 0; |
| [1899](#L1899) | vertical-align: top; |
| [1900](#L1900) | } |
| [1901](#L1901) |  |
| [1902](#L1902) | .cminds\_ads\_internal\_wrapper { |
| [1903](#L1903) | display: inline-block; |
| [1904](#L1904) | overflow: auto; |
| [1905](#L1905) | max-height: 175px; |
| [1906](#L1906) | } |
| [1907](#L1907) |  |
| [1908](#L1908) | .cminds\_ad{ |
| [1909](#L1909) | display: block; |
| [1910](#L1910) | margin: 0.5em; |
| [1911](#L1911) | vertical-align: top; |
| [1912](#L1912) | } |
| [1913](#L1913) |  |
| [1914](#L1914) | span.ad\_code { |
| [1915](#L1915) | font-weight: bold; |
| [1916](#L1916) | } |
| [1917](#L1917) |  |
| [1918](#L1918) | .cminds\_ad.hidden{ |
| [1919](#L1919) | display: none; |
| [1920](#L1920) | } |
| [1921](#L1921) | .cminds\_ads\_wrapper.hidden{ |
| [1922](#L1922) | display: none; |
| [1923](#L1923) | } |
| [1924](#L1924) |  |
| [1925](#L1925) | .cminds\_ad\_text{ |
| [1926](#L1926) | display: block; |
| [1927](#L1927) | margin-bottom: 1em; |
| [1928](#L1928) | } |
| [1929](#L1929) | .cminds\_ad\_link{ |
| [1930](#L1930) | text-align: center; |
| [1931](#L1931) | } |
| [1932](#L1932) |  |
| [1933](#L1933) | span.ads\_refreshed{ |
| [1934](#L1934) | color: #259602; |
| [1935](#L1935) | font-weight: bold; |
| [1936](#L1936) | } |
| [1937](#L1937) |  |
| [1938](#L1938) | .cminds\_ad\_text > a:before { |
| [1939](#L1939) | content:"\A"; white-space:pre; |
| [1940](#L1940) | } |
| [1941](#L1941) |  |
| [1942](#L1942) | .cminds\_ad\_text > \*:after { |
| [1943](#L1943) | content:"\A"; white-space:pre; |
| [1944](#L1944) | } |
| [1945](#L1945) |  |
| [1946](#L1946) | .cminds\_no\_ads{ |
| [1947](#L1947) | margin: 1em 0; |
| [1948](#L1948) | font-size: 12pt; |
| [1949](#L1949) | font-weight: bold; |
| [1950](#L1950) | } |
| [1951](#L1951) |  |
| [1952](#L1952) | .cminds\_links{ |
| [1953](#L1953) | display: inline-block; |
| [1954](#L1954) | margin: 1em; |
| [1955](#L1955) | padding: 0; |
| [1956](#L1956) | max-width: 150px; |
| [1957](#L1957) | min-height: 90px; |
| [1958](#L1958) | vertical-align: top; |
| [1959](#L1959) | text-align: left; |
| [1960](#L1960) | } |
| [1961](#L1961) |  |
| [1962](#L1962) | .cminds\_links .cminds\_link{ |
| [1963](#L1963) | margin: 5px 0; |
| [1964](#L1964) | } |
| [1965](#L1965) |  |
| [1966](#L1966) | .cminds\_links .cminds\_link:first-child{ |
| [1967](#L1967) | margin-top: 0; |
| [1968](#L1968) | } |
| [1969](#L1969) |  |
| [1970](#L1970) | .cminds\_link{ |
| [1971](#L1971) | color: #555; |
| [1972](#L1972) | border-color: rgba(204,204,204,0.8); |
| [1973](#L1973) | background: #f7f7f7; |
| [1974](#L1974) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1975](#L1975) | box-shadow: 0 1px 0 #ccc; |
| [1976](#L1976) | display: inline-block; |
| [1977](#L1977) | text-decoration: none; |
| [1978](#L1978) | line-height: 26px; |
| [1979](#L1979) | height: 28px; |
| [1980](#L1980) | padding: 0 10px 1px; |
| [1981](#L1981) | cursor: pointer; |
| [1982](#L1982) | border-width: 1px; |
| [1983](#L1983) | border-style: solid; |
| [1984](#L1984) | -webkit-border-radius: 3px; |
| [1985](#L1985) | border-radius: 3px; |
| [1986](#L1986) | -webkit-box-sizing: border-box; |
| [1987](#L1987) | -moz-box-sizing: border-box; |
| [1988](#L1988) | box-sizing: border-box; |
| [1989](#L1989) | } |
| [1990](#L1990) |  |
| [1991](#L1991) | .cminds\_link:active { |
| [1992](#L1992) | background: #eee; |
| [1993](#L1993) | border-color: #999; |
| [1994](#L1994) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [1995](#L1995) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [1996](#L1996) | -webkit-transform: translateY(1px); |
| [1997](#L1997) | -ms-transform: translateY(1px); |
| [1998](#L1998) | transform: translateY(1px); |
| [1999](#L1999) | } |
| [2000](#L2000) |  |
| [2001](#L2001) | .cminds\_link:hover { |
| [2002](#L2002) | background: #eee; |
| [2003](#L2003) | border-color: #999; |
| [2004](#L2004) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2005](#L2005) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2006](#L2006) | -webkit-transform: translateY(1px); |
| [2007](#L2007) | -ms-transform: translateY(1px); |
| [2008](#L2008) | transform: translateY(1px); |
| [2009](#L2009) | } |
| [2010](#L2010) |  |
| [2011](#L2011) | .cminds\_link.blue{ |
| [2012](#L2012) | color: #fff; |
| [2013](#L2013) | border-color: #33ace7; |
| [2014](#L2014) | background: #66c1ed; |
| [2015](#L2015) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2016](#L2016) | box-shadow: 0 1px 0 #ccc; |
| [2017](#L2017) | display: inline-block; |
| [2018](#L2018) | text-decoration: none; |
| [2019](#L2019) | line-height: 26px; |
| [2020](#L2020) | height: 28px; |
| [2021](#L2021) | padding: 0 10px 1px; |
| [2022](#L2022) | cursor: pointer; |
| [2023](#L2023) | border-width: 1px; |
| [2024](#L2024) | border-style: solid; |
| [2025](#L2025) | -webkit-border-radius: 3px; |
| [2026](#L2026) | border-radius: 3px; |
| [2027](#L2027) | -webkit-box-sizing: border-box; |
| [2028](#L2028) | -moz-box-sizing: border-box; |
| [2029](#L2029) | box-sizing: border-box; |
| [2030](#L2030) |  |
| [2031](#L2031) | } |
| [2032](#L2032) |  |
| [2033](#L2033) | .cminds\_link.blue:active { |
| [2034](#L2034) | background: #0198e1; |
| [2035](#L2035) | border-color: #66c1ed; |
| [2036](#L2036) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2037](#L2037) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2038](#L2038) | -webkit-transform: translateY(1px); |
| [2039](#L2039) | -ms-transform: translateY(1px); |
| [2040](#L2040) | transform: translateY(1px); |
| [2041](#L2041) | } |
| [2042](#L2042) |  |
| [2043](#L2043) | .cminds\_link.blue:hover { |
| [2044](#L2044) | background: #005b87; |
| [2045](#L2045) | border-color: #0198e1; |
| [2046](#L2046) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2047](#L2047) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2048](#L2048) | -webkit-transform: translateY(1px); |
| [2049](#L2049) | -ms-transform: translateY(1px); |
| [2050](#L2050) | transform: translateY(1px); |
| [2051](#L2051) | } |
| [2052](#L2052) |  |
| [2053](#L2053) | .cminds\_link.orange{ |
| [2054](#L2054) | color: #fff; |
| [2055](#L2055) | border-color: #ffb752; |
| [2056](#L2056) | background: #ffb752; |
| [2057](#L2057) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2058](#L2058) | box-shadow: 0 1px 0 #ccc; |
| [2059](#L2059) | display: inline-block; |
| [2060](#L2060) | text-decoration: none; |
| [2061](#L2061) | line-height: 26px; |
| [2062](#L2062) | height: 28px; |
| [2063](#L2063) | padding: 0 10px 1px; |
| [2064](#L2064) | cursor: pointer; |
| [2065](#L2065) | border-width: 1px; |
| [2066](#L2066) | border-style: solid; |
| [2067](#L2067) | -webkit-border-radius: 3px; |
| [2068](#L2068) | border-radius: 3px; |
| [2069](#L2069) | -webkit-box-sizing: border-box; |
| [2070](#L2070) | -moz-box-sizing: border-box; |
| [2071](#L2071) | box-sizing: border-box; |
| [2072](#L2072) |  |
| [2073](#L2073) | } |
| [2074](#L2074) |  |
| [2075](#L2075) | .cminds\_link.orange:active { |
| [2076](#L2076) | background: #e5a449; |
| [2077](#L2077) | border-color: #ffc574; |
| [2078](#L2078) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2079](#L2079) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2080](#L2080) | -webkit-transform: translateY(1px); |
| [2081](#L2081) | -ms-transform: translateY(1px); |
| [2082](#L2082) | transform: translateY(1px); |
| [2083](#L2083) | } |
| [2084](#L2084) |  |
| [2085](#L2085) | .cminds\_link.orange:hover { |
| [2086](#L2086) | background: #e5a449; |
| [2087](#L2087) | border-color: #ffc574; |
| [2088](#L2088) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2089](#L2089) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2090](#L2090) | -webkit-transform: translateY(1px); |
| [2091](#L2091) | -ms-transform: translateY(1px); |
| [2092](#L2092) | transform: translateY(1px); |
| [2093](#L2093) | } |
| [2094](#L2094) |  |
| [2095](#L2095) | .cminds\_more{ |
| [2096](#L2096) | display: inline-block; |
| [2097](#L2097) | margin: 1em; |
| [2098](#L2098) | vertical-align: top; |
| [2099](#L2099) | font-size: 12pt; |
| [2100](#L2100) | line-height: 123px; |
| [2101](#L2101) | } |
| [2102](#L2102) |  |
| [2103](#L2103) | .cminds\_more > \*{ |
| [2104](#L2104) | cursor: pointer; |
| [2105](#L2105) | } |
| [2106](#L2106) |  |
| [2107](#L2107) | .cminds\_link.cminds\_more\_ads { |
| [2108](#L2108) | -moz-border-radius: 11px; |
| [2109](#L2109) | -webkit-border-radius: 11px; |
| [2110](#L2110) | border-radius: 11px; |
| [2111](#L2111) | border: 1px solid #66c1ed; |
| [2112](#L2112) | font-size: 23px; |
| [2113](#L2113) | padding: 8px 14px; |
| [2114](#L2114) | text-decoration: none; |
| [2115](#L2115) | line-height: 23px; |
| [2116](#L2116) | height: auto; |
| [2117](#L2117) | } |
| [2118](#L2118) |  |
| [2119](#L2119) | .clear, .clearfix{ |
| [2120](#L2120) | clear:both; |
| [2121](#L2121) | } |
| [2122](#L2122) |  |
| [2123](#L2123) | .cmclearfix{ |
| [2124](#L2124) | clear: both !important; |
| [2125](#L2125) | } |
| [2126](#L2126) | </style> |
| [2127](#L2127) |  |
| [2128](#L2128) | <?php if ($isRegistered) : ?> |
| [2129](#L2129) |  |
| [2130](#L2130) | <?php if (!$atts['flat']) : ?> |
| [2131](#L2131) |  |
| [2132](#L2132) | <script> |
| [2133](#L2133) | jQuery(document).ready(function ( ) { |
| [2134](#L2134) | jQuery('.cminds-ads-show-button').on('click', function (e) { |
| [2135](#L2135) | e.preventDefault( ); |
| [2136](#L2136) | jQuery('#cminds\_offers\_wrapper').toggleClass('hidden'); |
| [2137](#L2137) | jQuery('#cminds\_links\_wrapper').toggleClass('hidden'); |
| [2138](#L2138) | }); |
| [2139](#L2139) | });</script> |
| [2140](#L2140) |  |
| [2141](#L2141) | <h3>Special offers from CreativeMinds</h3> |
| [2142](#L2142) |  |
| [2143](#L2143) | <div class="cminds\_ads\_wrapper\_white"> |
| [2144](#L2144) | <a href="https://www.cminds.com/wordpress-plugins-library/seo-keyword-hound-wordpress/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/keywordhoundbanner.jpg"></a> |
| [2145](#L2145) | <span style="margin-left:20px;"> |
| [2146](#L2146) | <a class="" href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/99suite.png"></a> |
| [2147](#L2147) | </span> |
| [2148](#L2148) | </div> |
| [2149](#L2149) |  |
| [2150](#L2150) |  |
| [2151](#L2151) | <?php if (!empty($ads)) : ?> |
| [2152](#L2152) | <div class="cminds\_ads\_internal\_wrapper"> |
| [2153](#L2153) | <?php foreach ($ads as $index => $ad) : ?> |
| [2154](#L2154) | <div class="cminds\_ad"> |
| [2155](#L2155) | <?php |
| [2156](#L2156) | $dateUntil = date('jS F, Y', strtotime($ad['ad\_valid\_date'])); |
| [2157](#L2157) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code <span class="ad\_code">"%s"</span> valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2158](#L2158) | ?> |
| [2159](#L2159) | <span class="cminds\_ad\_link"> |
| [2160](#L2160) | <a class="cminds\_link blue" target="\_blank" href="<?php echo $this->addAffiliateCode($ad['ad\_url']); ?>">Redeem Offer</a> |
| [2161](#L2161) | </span> |
| [2162](#L2162) | </div> |
| [2163](#L2163) | <?php endforeach; ?> |
| [2164](#L2164) | </div> |
| [2165](#L2165) | <?php else: ?> |
| [2166](#L2166) | <div class="cminds\_no\_ads"> |
| [2167](#L2167) | <span class="cminds\_no\_ads\_text"> |
| [2168](#L2168) | Currently we have no special discounts. |
| [2169](#L2169) | </span> |
| [2170](#L2170) | </div> |
| [2171](#L2171) | <?php endif; ?> |
| [2172](#L2172) |  |
| [2173](#L2173) | <div> |
| [2174](#L2174) | <?php if ($adsRefreshed) : |
| [2175](#L2175) | ?> |
| [2176](#L2176) | <span class="ads\_refreshed"> |
| [2177](#L2177) | Discounts have been refreshed. |
| [2178](#L2178) | </span> |
| [2179](#L2179) | <?php else : ?> |
| [2180](#L2180) | You haven't refreshed the discounts for <?php echo $days\_since\_last\_refresh . ' ' . \_n('day', 'days', $days\_since\_last\_refresh); ?>. <a class="cminds-ads-refresh-button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_ad\_refresh' => 1))); ?>"><strong>Refresh now!</strong></a> |
| [2181](#L2181) | <?php endif; ?> |
| [2182](#L2182) | </div> |
| [2183](#L2183) | <?php else: ?> |
| [2184](#L2184) | <ul class="cminds\_ads\_list\_wrapper"> |
| [2185](#L2185) | <?php foreach ($ads as $index => $ad) : ?> |
| [2186](#L2186) | <li class="cminds\_ads\_list\_item">                                                           <?php |
| [2187](#L2187) | $dateUntil = date('Y-m-d', strtotime($ad['ad\_valid\_date'])); |
| [2188](#L2188) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code "%s" valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2189](#L2189) | ?> |
| [2190](#L2190) | </li> |
| [2191](#L2191) | <?php endforeach; ?> |
| [2192](#L2192) | </ul> |
| [2193](#L2193) | <?php endif; ?> |
| [2194](#L2194) | <?php else: ?> |
| [2195](#L2195) | <h3>Special Offers from CreativeMinds</h3> |
| [2196](#L2196) |  |
| [2197](#L2197) | <p> |
| [2198](#L2198) | <a href="javascript:void(0)" id="cminds-unskip">Complete <?php echo esc\_attr($currentPlugin->getOption('plugin-name')); ?> registration</a> and receive special offers |
| [2199](#L2199) | </p> |
| [2200](#L2200) | <?php endif; ?> |
| [2201](#L2201) | <div class="clear clearfix cmclearfix"></div> |
| [2202](#L2202) | <?php |
| [2203](#L2203) | $content = ob\_get\_clean(); |
| [2204](#L2204) | return $content; |
| [2205](#L2205) | } |
| [2206](#L2206) |  |
| [2207](#L2207) | public function getRegistrationFields() { |
| [2208](#L2208) | $fields = array( |
| [2209](#L2209) | 'product\_name'   => $this->getOption('plugin-name'), |
| [2210](#L2210) | 'remote\_url'     => get\_bloginfo('wpurl'), |
| [2211](#L2211) | 'remote\_ip'      => $\_SERVER['SERVER\_ADDR'], |
| [2212](#L2212) | 'remote\_country' => '', |
| [2213](#L2213) | 'remote\_city'    => '', |
| [2214](#L2214) | 'email'          => get\_bloginfo('admin\_email'), |
| [2215](#L2215) | 'hostname'       => get\_bloginfo('wpurl'), |
| [2216](#L2216) | 'username'       => '', |
| [2217](#L2217) | ); |
| [2218](#L2218) |  |
| [2219](#L2219) | $output = ''; |
| [2220](#L2220) |  |
| [2221](#L2221) | foreach ($fields as $key => $value) { |
| [2222](#L2222) | $output .= sprintf('<input type="hidden" name="%s" value="%s" />', $key, $value); |
| [2223](#L2223) | } |
| [2224](#L2224) |  |
| [2225](#L2225) | return $output; |
| [2226](#L2226) | } |
| [2227](#L2227) |  |
| [2228](#L2228) | public function isSkipped($id = null) { |
| [2229](#L2229) | global $cmindsPluginPackage; |
| [2230](#L2230) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2231](#L2231) | $isSkipped = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'); |
| [2232](#L2232) | return $isSkipped; |
| [2233](#L2233) | } |
| [2234](#L2234) |  |
| [2235](#L2235) | public function isRegistered($id = null) { |
| [2236](#L2236) | global $cmindsPluginPackage; |
| [2237](#L2237) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2238](#L2238) | $isRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'); |
| [2239](#L2239) | return $isRegistered; |
| [2240](#L2240) | } |
| [2241](#L2241) |  |
| [2242](#L2242) | public function wasRegistered($id = null) { |
| [2243](#L2243) | global $cmindsPluginPackage; |
| [2244](#L2244) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2245](#L2245) | $wasRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'); |
| [2246](#L2246) | return $wasRegistered; |
| [2247](#L2247) | } |
| [2248](#L2248) |  |
| [2249](#L2249) | public function setWasRegistered($id = null) { |
| [2250](#L2250) | global $cmindsPluginPackage; |
| [2251](#L2251) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2252](#L2252) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'; |
| [2253](#L2253) | $result = update\_option($optionName, 1); |
| [2254](#L2254) | return $result; |
| [2255](#L2255) | } |
| [2256](#L2256) |  |
| [2257](#L2257) | /\*\* |
| [2258](#L2258) | \* Function comminicates with our server to remove the user from our database (right to be forgotten) |
| [2259](#L2259) | \* @global array $cmindsPluginPackage |
| [2260](#L2260) | \* @param type $atts |
| [2261](#L2261) | \* @return type |
| [2262](#L2262) | \*/ |
| [2263](#L2263) | public function deregisterUser($atts = array()) { |
| [2264](#L2264) | global $cmindsPluginPackage; |
| [2265](#L2265) |  |
| [2266](#L2266) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2267](#L2267) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2268](#L2268) |  |
| [2269](#L2269) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2270](#L2270) | $post = filter\_input\_array(INPUT\_POST); |
| [2271](#L2271) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2272](#L2272) |  |
| [2273](#L2273) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2274](#L2274) | if ($nonceCheck) { |
| [2275](#L2275) |  |
| [2276](#L2276) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2277](#L2277) | return; |
| [2278](#L2278) | } |
| [2279](#L2279) |  |
| [2280](#L2280) | unset($post['cminds\_nonce']); |
| [2281](#L2281) | $jsonData = wp\_json\_encode(array($post)); |
| [2282](#L2282) |  |
| [2283](#L2283) | $args = array( |
| [2284](#L2284) | 'body' => array( |
| [2285](#L2285) | 'jsonData' => $jsonData |
| [2286](#L2286) | ) |
| [2287](#L2287) | ); |
| [2288](#L2288) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2289](#L2289) | $response = wp\_remote\_post($href, $args); |
| [2290](#L2290) | if (!is\_wp\_error($response)) { |
| [2291](#L2291) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2292](#L2292) | if ($result && 1 === $result['result']) { |
| [2293](#L2293) | update\_option($optionName, 0); |
| [2294](#L2294) | } |
| [2295](#L2295) | } else { |
| [2296](#L2296) | $args['sslverify'] = false; |
| [2297](#L2297) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2298](#L2298) | $response = wp\_remote\_post($href, $args); |
| [2299](#L2299) | if (!is\_wp\_error($response)) { |
| [2300](#L2300) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2301](#L2301) | if ($result && 1 === $result['result']) { |
| [2302](#L2302) | update\_option($optionName, 0); |
| [2303](#L2303) | } |
| [2304](#L2304) | } else { |
| [2305](#L2305) | $message = 'User has requested the deregistration: <br/><table>'; |
| [2306](#L2306) | foreach ($post as $key => $value) { |
| [2307](#L2307) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2308](#L2308) | continue; |
| [2309](#L2309) | } |
| [2310](#L2310) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2311](#L2311) | } |
| [2312](#L2312) | $message .= '</table>'; |
| [2313](#L2313) |  |
| [2314](#L2314) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2315](#L2315) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration Canceled', $message); |
| [2316](#L2316) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2317](#L2317) | } |
| [2318](#L2318) | } |
| [2319](#L2319) | update\_option($optionName, 0); |
| [2320](#L2320) | } |
| [2321](#L2321) | } |
| [2322](#L2322) | } |
| [2323](#L2323) |  |
| [2324](#L2324) | public function skipRegistration($atts = array()) { |
| [2325](#L2325) | global $cmindsPluginPackage; |
| [2326](#L2326) |  |
| [2327](#L2327) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2328](#L2328) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2329](#L2329) |  |
| [2330](#L2330) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2331](#L2331) | update\_option($optionName, 1); |
| [2332](#L2332) | } |
| [2333](#L2333) |  |
| [2334](#L2334) | public function unskipRegistration($atts = array()) { |
| [2335](#L2335) | global $cmindsPluginPackage; |
| [2336](#L2336) |  |
| [2337](#L2337) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2338](#L2338) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2339](#L2339) |  |
| [2340](#L2340) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2341](#L2341) | update\_option($optionName, 0); |
| [2342](#L2342) | } |
| [2343](#L2343) |  |
| [2344](#L2344) | /\*\* |
| [2345](#L2345) | \* Function communicates with our server to register user's e-mail in our database. |
| [2346](#L2346) | \* It's an optional step, user can easily skip it. We only collect e-mail and the url of the site. |
| [2347](#L2347) | \* User is being informed about the data being collected and the reason why it's collected. |
| [2348](#L2348) | \* @global array $cmindsPluginPackage |
| [2349](#L2349) | \* @param type $atts |
| [2350](#L2350) | \* @return type |
| [2351](#L2351) | \*/ |
| [2352](#L2352) | public function registerUser($atts = array()) { |
| [2353](#L2353) | global $cmindsPluginPackage; |
| [2354](#L2354) |  |
| [2355](#L2355) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2356](#L2356) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2357](#L2357) |  |
| [2358](#L2358) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2359](#L2359) | $post = filter\_input\_array(INPUT\_POST); |
| [2360](#L2360) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2361](#L2361) |  |
| [2362](#L2362) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2363](#L2363) | if ($nonceCheck) { |
| [2364](#L2364) |  |
| [2365](#L2365) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2366](#L2366) | return; |
| [2367](#L2367) | } |
| [2368](#L2368) |  |
| [2369](#L2369) | unset($post['cminds\_nonce']); |
| [2370](#L2370) | $jsonData = wp\_json\_encode(array($post)); |
| [2371](#L2371) |  |
| [2372](#L2372) | $args = array( |
| [2373](#L2373) | 'body' => array( |
| [2374](#L2374) | 'jsonData' => $jsonData |
| [2375](#L2375) | ) |
| [2376](#L2376) | ); |
| [2377](#L2377) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2378](#L2378) | $response = wp\_remote\_post($href, $args); |
| [2379](#L2379) | if (!is\_wp\_error($response)) { |
| [2380](#L2380) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2381](#L2381) | if ($result && 1 === $result['result']) { |
| [2382](#L2382) | update\_option($optionName, 1); |
| [2383](#L2383) | $currentPlugin->setWasRegistered(); |
| [2384](#L2384) | } |
| [2385](#L2385) | } else { |
| [2386](#L2386) | $args['sslverify'] = false; |
| [2387](#L2387) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2388](#L2388) | $response = wp\_remote\_post($href, $args); |
| [2389](#L2389) | if (!is\_wp\_error($response)) { |
| [2390](#L2390) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2391](#L2391) | if ($result && 1 === $result['result']) { |
| [2392](#L2392) | update\_option($optionName, 1); |
| [2393](#L2393) | $currentPlugin->setWasRegistered(); |
| [2394](#L2394) | } |
| [2395](#L2395) | } else { |
| [2396](#L2396) | $message = 'Registered fields: <br/><table>'; |
| [2397](#L2397) | foreach ($post as $key => $value) { |
| [2398](#L2398) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2399](#L2399) | continue; |
| [2400](#L2400) | } |
| [2401](#L2401) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2402](#L2402) | } |
| [2403](#L2403) | $message .= '</table>'; |
| [2404](#L2404) |  |
| [2405](#L2405) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2406](#L2406) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration', $message); |
| [2407](#L2407) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2408](#L2408) | } |
| [2409](#L2409) | } |
| [2410](#L2410) | } |
| [2411](#L2411) | } |
| [2412](#L2412) | } |
| [2413](#L2413) |  |
| [2414](#L2414) | public function showRegistration($atts = array()) { |
| [2415](#L2415) | global $cmindsPluginPackage; |
| [2416](#L2416) |  |
| [2417](#L2417) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2418](#L2418) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2419](#L2419) |  |
| [2420](#L2420) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-hidden'; |
| [2421](#L2421) | $registrationHide = filter\_input(INPUT\_GET, 'cminds\_registration\_hide'); |
| [2422](#L2422) | if ($registrationHide) { |
| [2423](#L2423) | update\_option($optionName, 1); |
| [2424](#L2424) | } |
| [2425](#L2425) | $registrationShow = filter\_input(INPUT\_GET, 'cminds\_registration\_show'); |
| [2426](#L2426) | if ($registrationShow) { |
| [2427](#L2427) | delete\_option($optionName); |
| [2428](#L2428) | } |
| [2429](#L2429) | $registrationHidden = get\_option($optionName); |
| [2430](#L2430) |  |
| [2431](#L2431) | $this->registerUser($atts); |
| [2432](#L2432) |  |
| [2433](#L2433) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2434](#L2434) | $isRegistered = $this->isRegistered(); |
| [2435](#L2435) |  |
| [2436](#L2436) | if ($isRegistered) : |
| [2437](#L2437) | return $this->showAds($atts); |
| [2438](#L2438) | else : |
| [2439](#L2439) | ob\_start(); |
| [2440](#L2440) | ?> |
| [2441](#L2441) | <style type="text/css"> |
| [2442](#L2442) |  |
| [2443](#L2443) | div.cminds\_registration\_wrapper { |
| [2444](#L2444) | display: inline-block; |
| [2445](#L2445) | padding: 1em; |
| [2446](#L2446) | background: #FFF; |
| [2447](#L2447) | margin: 1em 1em 0 0; |
| [2448](#L2448) | width: 1004px; |
| [2449](#L2449) | } |
| [2450](#L2450) |  |
| [2451](#L2451) | div.cminds\_registration\_wrapper \* { |
| [2452](#L2452) | vertical-align: top; |
| [2453](#L2453) | } |
| [2454](#L2454) |  |
| [2455](#L2455) | .cminds\_registration{ |
| [2456](#L2456) | display: inline-block; |
| [2457](#L2457) | margin: 1em; |
| [2458](#L2458) | padding: 1em 58px; |
| [2459](#L2459) | } |
| [2460](#L2460) |  |
| [2461](#L2461) | .cminds\_registration form{ |
| [2462](#L2462) | display: inline-block; |
| [2463](#L2463) | margin: 1em; |
| [2464](#L2464) | } |
| [2465](#L2465) | .cminds\_registration form .no-registration{ |
| [2466](#L2466) | margin: 5px 0 0; |
| [2467](#L2467) | text-align: center; |
| [2468](#L2468) | } |
| [2469](#L2469) |  |
| [2470](#L2470) | .cminds\_registration form input[type="submit"]{ |
| [2471](#L2471) | font-size: 16pt; |
| [2472](#L2472) | padding: 7px; |
| [2473](#L2473) | height: auto; |
| [2474](#L2474) | } |
| [2475](#L2475) |  |
| [2476](#L2476) | .cminds\_registration\_text{ |
| [2477](#L2477) | display: inline-block; |
| [2478](#L2478) | margin: 1em; |
| [2479](#L2479) | } |
| [2480](#L2480) |  |
| [2481](#L2481) | .cminds\_registration\_text > span{ |
| [2482](#L2482) | text-align: left; |
| [2483](#L2483) | display: block; |
| [2484](#L2484) | } |
| [2485](#L2485) |  |
| [2486](#L2486) | .cminds\_registration\_text .row\_1{ |
| [2487](#L2487) | font-size: 12pt; |
| [2488](#L2488) | padding-bottom: 5px; |
| [2489](#L2489) | } |
| [2490](#L2490) | .cminds\_registration\_text .row\_2{ |
| [2491](#L2491) | font-size: 10pt; |
| [2492](#L2492) | } |
| [2493](#L2493) |  |
| [2494](#L2494) | .cminds\_link{ |
| [2495](#L2495) | color: #555; |
| [2496](#L2496) | border-color: rgba(204,204,204,0.8); |
| [2497](#L2497) | background: #f7f7f7; |
| [2498](#L2498) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2499](#L2499) | box-shadow: 0 1px 0 #ccc; |
| [2500](#L2500) | display: inline-block; |
| [2501](#L2501) | text-decoration: none; |
| [2502](#L2502) | line-height: 26px; |
| [2503](#L2503) | height: 28px; |
| [2504](#L2504) | padding: 0 10px 1px; |
| [2505](#L2505) | cursor: pointer; |
| [2506](#L2506) | border-width: 1px; |
| [2507](#L2507) | border-style: solid; |
| [2508](#L2508) | -webkit-border-radius: 3px; |
| [2509](#L2509) | border-radius: 3px; |
| [2510](#L2510) | -webkit-box-sizing: border-box; |
| [2511](#L2511) | -moz-box-sizing: border-box; |
| [2512](#L2512) | box-sizing: border-box; |
| [2513](#L2513) | } |
| [2514](#L2514) |  |
| [2515](#L2515) | .cminds\_link:active { |
| [2516](#L2516) | background: #eee; |
| [2517](#L2517) | border-color: #999; |
| [2518](#L2518) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2519](#L2519) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2520](#L2520) | -webkit-transform: translateY(1px); |
| [2521](#L2521) | -ms-transform: translateY(1px); |
| [2522](#L2522) | transform: translateY(1px); |
| [2523](#L2523) | } |
| [2524](#L2524) |  |
| [2525](#L2525) | .cminds\_link:hover { |
| [2526](#L2526) | background: #eee; |
| [2527](#L2527) | border-color: #999; |
| [2528](#L2528) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2529](#L2529) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2530](#L2530) | -webkit-transform: translateY(1px); |
| [2531](#L2531) | -ms-transform: translateY(1px); |
| [2532](#L2532) | transform: translateY(1px); |
| [2533](#L2533) | } |
| [2534](#L2534) |  |
| [2535](#L2535) | .cminds\_link.blue{ |
| [2536](#L2536) | color: #fff; |
| [2537](#L2537) | border-color: #33ace7; |
| [2538](#L2538) | background: #66c1ed; |
| [2539](#L2539) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2540](#L2540) | box-shadow: 0 1px 0 #ccc; |
| [2541](#L2541) | display: inline-block; |
| [2542](#L2542) | text-decoration: none; |
| [2543](#L2543) | line-height: 26px; |
| [2544](#L2544) | height: 28px; |
| [2545](#L2545) | padding: 0 10px 1px; |
| [2546](#L2546) | cursor: pointer; |
| [2547](#L2547) | border-width: 1px; |
| [2548](#L2548) | border-style: solid; |
| [2549](#L2549) | -webkit-border-radius: 3px; |
| [2550](#L2550) | border-radius: 3px; |
| [2551](#L2551) | -webkit-box-sizing: border-box; |
| [2552](#L2552) | -moz-box-sizing: border-box; |
| [2553](#L2553) | box-sizing: border-box; |
| [2554](#L2554) |  |
| [2555](#L2555) | } |
| [2556](#L2556) |  |
| [2557](#L2557) | .cminds\_link.blue:active { |
| [2558](#L2558) | background: #0198e1; |
| [2559](#L2559) | border-color: #66c1ed; |
| [2560](#L2560) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2561](#L2561) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2562](#L2562) | -webkit-transform: translateY(1px); |
| [2563](#L2563) | -ms-transform: translateY(1px); |
| [2564](#L2564) | transform: translateY(1px); |
| [2565](#L2565) | } |
| [2566](#L2566) |  |
| [2567](#L2567) | .cminds\_link.blue:hover { |
| [2568](#L2568) | background: #005b87; |
| [2569](#L2569) | border-color: #0198e1; |
| [2570](#L2570) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2571](#L2571) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2572](#L2572) | -webkit-transform: translateY(1px); |
| [2573](#L2573) | -ms-transform: translateY(1px); |
| [2574](#L2574) | transform: translateY(1px); |
| [2575](#L2575) | } |
| [2576](#L2576) |  |
| [2577](#L2577) | .cminds\_link.orange{ |
| [2578](#L2578) | color: #fff; |
| [2579](#L2579) | border-color: #ffb752; |
| [2580](#L2580) | background: #ffb752; |
| [2581](#L2581) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2582](#L2582) | box-shadow: 0 1px 0 #ccc; |
| [2583](#L2583) | display: inline-block; |
| [2584](#L2584) | text-decoration: none; |
| [2585](#L2585) | line-height: 26px; |
| [2586](#L2586) | height: 28px; |
| [2587](#L2587) | padding: 0 10px 1px; |
| [2588](#L2588) | cursor: pointer; |
| [2589](#L2589) | border-width: 1px; |
| [2590](#L2590) | border-style: solid; |
| [2591](#L2591) | -webkit-border-radius: 3px; |
| [2592](#L2592) | border-radius: 3px; |
| [2593](#L2593) | -webkit-box-sizing: border-box; |
| [2594](#L2594) | -moz-box-sizing: border-box; |
| [2595](#L2595) | box-sizing: border-box; |
| [2596](#L2596) |  |
| [2597](#L2597) | } |
| [2598](#L2598) |  |
| [2599](#L2599) | .cminds\_link.orange:active { |
| [2600](#L2600) | background: #e5a449; |
| [2601](#L2601) | border-color: #ffc574; |
| [2602](#L2602) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2603](#L2603) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2604](#L2604) | -webkit-transform: translateY(1px); |
| [2605](#L2605) | -ms-transform: translateY(1px); |
| [2606](#L2606) | transform: translateY(1px); |
| [2607](#L2607) | } |
| [2608](#L2608) |  |
| [2609](#L2609) | .cminds\_link.orange:hover { |
| [2610](#L2610) | background: #e5a449; |
| [2611](#L2611) | border-color: #ffc574; |
| [2612](#L2612) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2613](#L2613) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2614](#L2614) | -webkit-transform: translateY(1px); |
| [2615](#L2615) | -ms-transform: translateY(1px); |
| [2616](#L2616) | transform: translateY(1px); |
| [2617](#L2617) | } |
| [2618](#L2618) |  |
| [2619](#L2619) | .clear, .clearfix{ |
| [2620](#L2620) | clear:both; |
| [2621](#L2621) | } |
| [2622](#L2622) | .cmclearfix{ |
| [2623](#L2623) | clear:both !important; |
| [2624](#L2624) | } |
| [2625](#L2625) |  |
| [2626](#L2626) | </style> |
| [2627](#L2627) |  |
| [2628](#L2628) | <?php if (!$registrationHidden) : ?> |
| [2629](#L2629) |  |
| [2630](#L2630) | <div class="cminds\_registration\_wrapper"> |
| [2631](#L2631) | <div class="cminds\_registration"> |
| [2632](#L2632) | <table><tr> |
| [2633](#L2633) | <td> |
| [2634](#L2634) | <form method="post" action=""> |
| [2635](#L2635) | <?php |
| [2636](#L2636) | wp\_nonce\_field('cminds\_register\_free', 'cminds\_nonce'); |
| [2637](#L2637) | echo $currentPlugin->getRegistrationFields(); |
| [2638](#L2638) | ?> |
| [2639](#L2639) | <input class="button button-primary" style="background-color:green;" type="submit" value="Register Your Copy" /> |
| [2640](#L2640) | <div class="no-registration"> |
| [2641](#L2641) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_hide' => 1), remove\_query\_arg('cminds\_registration\_show'))); ?>">I don't want to register now</a> |
| [2642](#L2642) | </div> |
| [2643](#L2643) | </form> |
| [2644](#L2644) | </td> |
| [2645](#L2645) | <td> |
| [2646](#L2646) | <div class="cminds\_registration\_text"> |
| [2647](#L2647) | <span class="row\_1"> |
| [2648](#L2648) | Once registered, you will receive updates and special offers. |
| [2649](#L2649) | </span> |
| [2650](#L2650) | <span class="row\_2"> |
| [2651](#L2651) | <p>We will only send once, your administrator's e-mail and site URL to CreativeMinds server.<br /> No additional information will be ever collected or sent.</p> |
| [2652](#L2652) | </span> |
| [2653](#L2653) | </td> |
| [2654](#L2654) | </tr> |
| [2655](#L2655) | </table> |
| [2656](#L2656) | </div> |
| [2657](#L2657) | </div> |
| [2658](#L2658) | </div> |
| [2659](#L2659) | <?php else : ?> |
| [2660](#L2660) | <div class="cminds\_registration\_wrapper"> |
| [2661](#L2661) | <div> |
| [2662](#L2662) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_show' => 1), remove\_query\_arg('cminds\_registration\_hide'))); ?>">Show registration box</a> |
| [2663](#L2663) | <a href="<?php echo $this->getStoreUrl(); ?>" class="cminds\_link orange" target="\_blank">View all CreativeMidns Plugins</a> |
| [2664](#L2664) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Bundle')); ?>" class="cminds\_link blue" target="\_blank">View Bundles</a> |
| [2665](#L2665) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Add-On')); ?>" class="cminds\_link blue" target="\_blank">View Add-Ons</a> |
| [2666](#L2666) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Service')); ?>" class="cminds\_link blue" target="\_blank">View Services</a> |
| [2667](#L2667) | </div> |
| [2668](#L2668) | </div> |
| [2669](#L2669) | <?php |
| [2670](#L2670) | endif; |
| [2671](#L2671) | echo $this->showUpgrade($atts); |
| [2672](#L2672) | ?> |
| [2673](#L2673) | <div class="clear clearfix cmclearfix"></div> |
| [2674](#L2674) | <?php |
| [2675](#L2675) | $content = ob\_get\_clean(); |
| [2676](#L2676) | return $content; |
| [2677](#L2677) | endif; |
| [2678](#L2678) | } |
| [2679](#L2679) |  |
| [2680](#L2680) | /\*\* |
| [2681](#L2681) | \* Displays the horizontal navigation bar |
| [2682](#L2682) | \* @global string $submenu |
| [2683](#L2683) | \* @global type $plugin\_page |
| [2684](#L2684) | \*/ |
| [2685](#L2685) | protected function showNav() { |
| [2686](#L2686) |  |
| [2687](#L2687) | global $self, $plugin\_page, $typenow, $submenu; |
| [2688](#L2688) |  |
| [2689](#L2689) | $submenus = array(); |
| [2690](#L2690) | $menuItem = $this->getOption('plugin-menu-item'); |
| [2691](#L2691) | $pluginAbbrev = $this->getOption('plugin-abbrev'); |
| [2692](#L2692) |  |
| [2693](#L2693) | ob\_start(); |
| [2694](#L2694) |  |
| [2695](#L2695) | if (isset($submenu[$menuItem])) { |
| [2696](#L2696) |  |
| [2697](#L2697) | $thisMenu = $submenu[$menuItem]; |
| [2698](#L2698) |  |
| [2699](#L2699) | foreach ($thisMenu as $sub\_item) { |
| [2700](#L2700) |  |
| [2701](#L2701) | $slug = $sub\_item[2]; |
| [2702](#L2702) |  |
| [2703](#L2703) | // Handle current for post\_type=post|page|foo pages, which won't match $self. |
| [2704](#L2704) | $self\_type = !empty($typenow) ? $self . '?post\_type=' . $typenow : 'nothing'; |
| [2705](#L2705) |  |
| [2706](#L2706) | $isCurrent = FALSE; |
| [2707](#L2707) |  |
| [2708](#L2708) | $subpageUrl = get\_admin\_url('', 'admin.php?page=' . $slug); |
| [2709](#L2709) |  |
| [2710](#L2710) | if ((!isset($plugin\_page) && $self == $slug) || ( isset($plugin\_page) && $plugin\_page == $slug && ( $menuItem == $self\_type || $menuItem == $self || file\_exists($menuItem) === false ))) { |
| [2711](#L2711) | $isCurrent = TRUE; |
| [2712](#L2712) | } |
| [2713](#L2713) |  |
| [2714](#L2714) | $url = ( strpos($slug, '.php') !== false || strpos($slug, 'http://') !== false || strpos($slug, 'https://') !== false ) ? $slug : $subpageUrl; |
| [2715](#L2715) |  |
| [2716](#L2716) | $isExternal = ( $slug === $url ) ? TRUE : FALSE; |
| [2717](#L2717) |  |
| [2718](#L2718) | /\* |
| [2719](#L2719) | \* Don't show on the Upgrade page itself |
| [2720](#L2720) | \*/ |
| [2721](#L2721) | if (!empty($\_GET['page']) && $\_GET['page'] == $pluginAbbrev . '\_pro' && $slug == $pluginAbbrev . '\_pro') { |
| [2722](#L2722) | continue; |
| [2723](#L2723) | } |
| [2724](#L2724) |  |
| [2725](#L2725) | $submenus[] = array( |
| [2726](#L2726) | 'link'     => $url, |
| [2727](#L2727) | 'title'    => $sub\_item[0], |
| [2728](#L2728) | 'current'  => $isCurrent, |
| [2729](#L2729) | 'external' => $isExternal |
| [2730](#L2730) | ); |
| [2731](#L2731) | } |
| [2732](#L2732) | ?> |
| [2733](#L2733) | <div id="cmhandfsl\_admin\_nav"> |
| [2734](#L2734) | <ul class="subsubsub"> |
| [2735](#L2735) | <?php foreach ($submenus as $menu): ?> |
| [2736](#L2736) |  |
| [2737](#L2737) | <li><a href="<?php echo esc\_attr($menu['link']); ?>" <?php echo ( $menu['current'] ) ? 'class="current"' : ''; ?> <?php |
| [2738](#L2738) | if ($menu['external']) { |
| [2739](#L2739) | echo 'target="\_blank"'; |
| [2740](#L2740) | } |
| [2741](#L2741) | ?>><?php echo esc\_html($menu['title']); ?> |
| [2742](#L2742) | </a></li> |
| [2743](#L2743) | <?php endforeach; ?> |
| [2744](#L2744) | </ul> |
| [2745](#L2745) | <br class="clear" /> |
| [2746](#L2746) | </div> |
| [2747](#L2747) | <?php |
| [2748](#L2748) | } |
| [2749](#L2749) |  |
| [2750](#L2750) | $nav = ob\_get\_contents(); |
| [2751](#L2751) | ob\_end\_clean(); |
| [2752](#L2752) | return $nav; |
| [2753](#L2753) | } |
| [2754](#L2754) |  |
| [2755](#L2755) | public function cminds\_compatibility\_check($plaintext = false) { |
| [2756](#L2756) | global $wp\_version; |
| [2757](#L2757) | $upload\_max = ini\_get('upload\_max\_filesize') ? ini\_get('upload\_max\_filesize') : 'N/A'; |
| [2758](#L2758) | $post\_max = ini\_get('post\_max\_size') ? ini\_get('post\_max\_size') : 'N/A'; |
| [2759](#L2759) | $memory\_limit = ini\_get('memory\_limit') ? ini\_get('memory\_limit') : 'N/A'; |
| [2760](#L2760) | $allow\_url\_fopen = ini\_get('allow\_url\_fopen') ? ini\_get('allow\_url\_fopen') : 'N/A'; |
| [2761](#L2761) | $max\_execution\_time = ini\_get('max\_execution\_time') !== FALSE ? ini\_get('max\_execution\_time') : 'N/A'; |
| [2762](#L2762) | $cURL = function\_exists('curl\_version') ? 'On' : 'Off'; |
| [2763](#L2763) | $mb\_support = function\_exists('mb\_strtolower') ? 'On' : 'Off'; |
| [2764](#L2764) | $intl\_support = extension\_loaded('intl') ? 'On' : 'Off'; |
| [2765](#L2765) | $iconv\_support = extension\_loaded('iconv') ? 'On' : 'Off'; |
| [2766](#L2766) |  |
| [2767](#L2767) | $permalink\_structure = get\_option('permalink\_structure'); |
| [2768](#L2768) | $permalinksurl = self\_admin\_url('options-permalink.php'); |
| [2769](#L2769) |  |
| [2770](#L2770) | $content = ''; |
| [2771](#L2771) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2772](#L2772) | ob\_start(); |
| [2773](#L2773) | if (!$plaintext): |
| [2774](#L2774) | ?> |
| [2775](#L2775) | <span class="description" style=""> |
| [2776](#L2776) | The information in this table is useful to check if the plugin might have some incompabilities with you server. |
| [2777](#L2777) | </span> |
| [2778](#L2778) | <table class="form-table server-info-table"> |
| [2779](#L2779) | <tr> |
| [2780](#L2780) | <td>Package Version</td> |
| [2781](#L2781) | <td><?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?></td> |
| [2782](#L2782) | <td><span>OK</span></td> |
| [2783](#L2783) | </tr> |
| [2784](#L2784) | <tr> |
| [2785](#L2785) | <td>WordPress Version</td> |
| [2786](#L2786) | <td><?php echo $wp\_version; ?></td> |
| [2787](#L2787) | <td><?php if (version\_compare($wp\_version, '3.3.0', '<')): ?><strong>The minimum supported version of WordPress is 3.3</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2788](#L2788) | </tr> |
| [2789](#L2789) | <tr> |
| [2790](#L2790) | <td>Permalinks enabled</td> |
| [2791](#L2791) | <td><?php echo ($permalink\_structure) ? 'Yes' : 'No' ?></td> |
| [2792](#L2792) | <td><?php if (empty($permalink\_structure)): ?><strong>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a></strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2793](#L2793) | </tr> |
| [2794](#L2794) | <tr> |
| [2795](#L2795) | <td>PHP Version</td> |
| [2796](#L2796) | <td><?php echo phpversion(); ?></td> |
| [2797](#L2797) | <td><?php if (version\_compare(phpversion(), '5.3.0', '<')): ?><strong>Recommended 5.3 or higher</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2798](#L2798) | </tr> |
| [2799](#L2799) | <tr> |
| [2800](#L2800) | <td>mbstring support</td> |
| [2801](#L2801) | <td><?php echo $mb\_support; ?></td> |
| [2802](#L2802) | <td><?php if ($mb\_support == 'Off'): ?> |
| [2803](#L2803) | <strong>"mbstring" library is required for plugin to work.</strong> |
| [2804](#L2804) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2805](#L2805) | </tr> |
| [2806](#L2806) | <tr> |
| [2807](#L2807) | <td>intl support</td> |
| [2808](#L2808) | <td><?php echo $intl\_support; ?></td> |
| [2809](#L2809) | <td><?php if ($intl\_support == 'Off'): ?> |
| [2810](#L2810) | <strong>"intl" library is required for proper sorting of accented (non-ASCII) characters.</strong> |
| [2811](#L2811) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2812](#L2812) | </tr> |
| [2813](#L2813) | <tr> |
| [2814](#L2814) | <td>iconv support</td> |
| [2815](#L2815) | <td><?php echo $iconv\_support; ?></td> |
| [2816](#L2816) | <td><?php if ($iconv\_support == 'Off'): ?> |
| [2817](#L2817) | <strong>"iconv" library is required for converting non-UTF-8 characters.</strong> |
| [2818](#L2818) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2819](#L2819) | </tr> |
| [2820](#L2820) | <tr> |
| [2821](#L2821) | <td>PHP Memory Limit</td> |
| [2822](#L2822) | <td><?php echo $memory\_limit; ?></td> |
| [2823](#L2823) | <td><?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2824](#L2824) | <strong>This value can be too low for a site with big glossary.</strong> |
| [2825](#L2825) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2826](#L2826) | </tr> |
| [2827](#L2827) | <tr> |
| [2828](#L2828) | <td>PHP Max Upload Size</td> |
| [2829](#L2829) | <td><?php echo $upload\_max; ?></td> |
| [2830](#L2830) | <td><?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2831](#L2831) | <strong>This value can be too low to import large files.</strong> |
| [2832](#L2832) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2833](#L2833) | </tr> |
| [2834](#L2834) | <tr> |
| [2835](#L2835) | <td>PHP Max Post Size</td> |
| [2836](#L2836) | <td><?php echo $post\_max; ?></td> |
| [2837](#L2837) | <td><?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2838](#L2838) | <strong>This value can be too low to import large files.</strong> |
| [2839](#L2839) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2840](#L2840) | </tr> |
| [2841](#L2841) | <tr> |
| [2842](#L2842) | <td>PHP Max Execution Time </td> |
| [2843](#L2843) | <td><?php echo $max\_execution\_time; ?></td> |
| [2844](#L2844) | <td><?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2845](#L2845) | <strong>This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit.</strong> |
| [2846](#L2846) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2847](#L2847) | </tr> |
| [2848](#L2848) | <tr> |
| [2849](#L2849) | <td>PHP cURL</td> |
| [2850](#L2850) | <td><?php echo $cURL; ?></td> |
| [2851](#L2851) | <td><?php if ($cURL == 'Off'): ?> |
| [2852](#L2852) | <strong>cURL library is required to check if remote audio file exists.</strong> |
| [2853](#L2853) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2854](#L2854) | </tr> |
| [2855](#L2855) | <tr> |
| [2856](#L2856) | <td>PHP allow\_url\_fopen</td> |
| [2857](#L2857) | <td><?php echo $allow\_url\_fopen; ?></td> |
| [2858](#L2858) | <td><?php if ($allow\_url\_fopen == '0'): ?> |
| [2859](#L2859) | <strong>allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API.</strong> |
| [2860](#L2860) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2861](#L2861) | </tr> |
| [2862](#L2862) | </table> |
| [2863](#L2863) | <?php |
| [2864](#L2864) | else: |
| [2865](#L2865) | ?> |
| [2866](#L2866) | Package Version         <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?>    OK |
| [2867](#L2867) |  |
| [2868](#L2868) | WordPress Version               <?php echo $wp\_version; ?> |
| [2869](#L2869) | <?php if (version\_compare($wp\_version, '3.3.0', '<')): ?>The minimum supported version of WordPress is 3.3<?php else: ?>OK<?php endif; ?> |
| [2870](#L2870) |  |
| [2871](#L2871) | Permalinks enabled              <?php echo ($permalink\_structure) ? 'Yes' : 'No' ?> |
| [2872](#L2872) | <?php if (empty($permalink\_structure)): ?>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a><?php else: ?>OK<?php endif; ?> |
| [2873](#L2873) |  |
| [2874](#L2874) | PHP Version             <?php echo phpversion(); ?> |
| [2875](#L2875) | <?php if (version\_compare(phpversion(), '5.3.0', '<')): ?>Recommended 5.3 or higher<?php else: ?>OK<?php endif; ?> |
| [2876](#L2876) |  |
| [2877](#L2877) | mbstring support                <?php echo $mb\_support; ?> |
| [2878](#L2878) | <?php if ($mb\_support == 'Off'): ?> |
| [2879](#L2879) | "mbstring" library is required for plugin to work. |
| [2880](#L2880) | <?php else: ?>OK<?php endif; ?> |
| [2881](#L2881) |  |
| [2882](#L2882) | intl support            <?php echo $intl\_support; ?> |
| [2883](#L2883) | <?php if ($intl\_support == 'Off'): ?> |
| [2884](#L2884) | "intl" library is required for proper sorting of accented characters on Glossary Index page. |
| [2885](#L2885) | <?php else: ?>OK<?php endif; ?> |
| [2886](#L2886) |  |
| [2887](#L2887) | PHP Memory Limit                <?php echo $memory\_limit; ?> |
| [2888](#L2888) | <?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2889](#L2889) | This value can be too low for a site with big glossary. |
| [2890](#L2890) | <?php else: ?>OK<?php endif; ?> |
| [2891](#L2891) |  |
| [2892](#L2892) | PHP Max Upload Size             <?php echo $upload\_max; ?> |
| [2893](#L2893) | <?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2894](#L2894) | This value can be too low to import large files. |
| [2895](#L2895) | <?php else: ?>OK<?php endif; ?> |
| [2896](#L2896) |  |
| [2897](#L2897) | PHP Max Post Size               <?php echo $post\_max; ?> |
| [2898](#L2898) | <?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2899](#L2899) | This value can be too low to import large files. |
| [2900](#L2900) | <?php else: ?>OK<?php endif; ?> |
| [2901](#L2901) |  |
| [2902](#L2902) | PHP Max Execution Time          <?php echo $max\_execution\_time; ?> |
| [2903](#L2903) | <?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2904](#L2904) | This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit. |
| [2905](#L2905) | <?php else: ?>OK<?php endif; ?> |
| [2906](#L2906) |  |
| [2907](#L2907) | PHP cURL                <?php echo $cURL; ?> |
| [2908](#L2908) | <?php if ($cURL == 'Off'): ?> |
| [2909](#L2909) | cURL library is required to check if remote audio file exists. |
| [2910](#L2910) | <?php else: ?>OK<?php endif; ?> |
| [2911](#L2911) |  |
| [2912](#L2912) | PHP allow\_url\_fopen             <?php echo $allow\_url\_fopen; ?> |
| [2913](#L2913) | <?php if ($allow\_url\_fopen == '0'): ?> |
| [2914](#L2914) | allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API. |
| [2915](#L2915) | <?php else: ?>OK<?php endif; ?> |
| [2916](#L2916) |  |
| [2917](#L2917) | <?php |
| [2918](#L2918) | endif; |
| [2919](#L2919) | $content .= ob\_get\_clean(); |
| [2920](#L2920) | return $content; |
| [2921](#L2921) | } |
| [2922](#L2922) |  |
| [2923](#L2923) | /\*\* |
| [2924](#L2924) | \* System info |
| [2925](#L2925) | \* |
| [2926](#L2926) | \* Shows the system info panel which contains version data and debug info. |
| [2927](#L2927) | \* The data for the system info is generated by the Browser class. |
| [2928](#L2928) | \* |
| [2929](#L2929) | \* @since 1.4 |
| [2930](#L2930) | \* @global $wpdb |
| [2931](#L2931) | \* @global object $wpdb Used to query the database using the WordPress |
| [2932](#L2932) | \*   Database API |
| [2933](#L2933) | \* @return void |
| [2934](#L2934) | \*/ |
| [2935](#L2935) | public function cminds\_system\_info() { |
| [2936](#L2936) | ?> |
| [2937](#L2937) | <div class=""> |
| [2938](#L2938) | <h2><?php \_\_('System Information', 'cminds-package'); ?></h2><br/> |
| [2939](#L2939) | <form action="<?php echo esc\_url(admin\_url('admin.php?page=cmtt\_licensing')); ?>" method="post" dir="ltr"> |
| [2940](#L2940) | <p class="submit"> |
| [2941](#L2941) | <?php wp\_nonce\_field( 'system\_information\_download\_form\_nonce', 'system\_information\_download\_form\_nonce' ); ?> |
| [2942](#L2942) | <input type="hidden" name="cminds\_action" value="download\_sysinfo" /> |
| [2943](#L2943) | <?php submit\_button('Download system information file', 'primary', 'cminds-download-sysinfo', false); ?> |
| [2944](#L2944) | </p> |
| [2945](#L2945) | <textarea class="cminds\_system\_info\_area" readonly="readonly" onclick="this.focus( ); |
| [2946](#L2946) | this.select( )" id="system-info-textarea" name="cminds-sysinfo" title="<?php \_e('To copy the system info, click below then press Ctrl + C (PC) or Cmd + C (Mac).', 'edd'); ?>"> |
| [2947](#L2947) | <?php $this->cminds\_system\_info\_content(); ?> |
| [2948](#L2948) | </textarea> |
| [2949](#L2949) | </form> |
| [2950](#L2950) | </div> |
| [2951](#L2951) | <?php |
| [2952](#L2952) | } |
| [2953](#L2953) |  |
| [2954](#L2954) | /\*\* |
| [2955](#L2955) | \* Generates the System Info Download File |
| [2956](#L2956) | \* |
| [2957](#L2957) | \* @since 1.4 |
| [2958](#L2958) | \* @return void |
| [2959](#L2959) | \*/ |
| [2960](#L2960) | public function cminds\_system\_info\_content() { |
| [2961](#L2961) | global $wpdb; |
| [2962](#L2962) |  |
| [2963](#L2963) | if (get\_bloginfo('version') < '3.4') { |
| [2964](#L2964) | $theme\_data = get\_theme\_data(get\_stylesheet\_directory() . '/style.css'); |
| [2965](#L2965) | $theme = $theme\_data['Name'] . ' ' . $theme\_data['Version']; |
| [2966](#L2966) | } else { |
| [2967](#L2967) | $theme\_data = wp\_get\_theme(); |
| [2968](#L2968) | $theme = $theme\_data->Name . ' ' . $theme\_data->Version; |
| [2969](#L2969) | } |
| [2970](#L2970) |  |
| [2971](#L2971) | // Try to identifty the hosting provider |
| [2972](#L2972) | $host = false; |
| [2973](#L2973) | if (defined('WPE\_APIKEY')) { |
| [2974](#L2974) | $host = 'WP Engine'; |
| [2975](#L2975) | } elseif (defined('PAGELYBIN')) { |
| [2976](#L2976) | $host = 'Pagely'; |
| [2977](#L2977) | } |
| [2978](#L2978) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2979](#L2979) | ?> |
| [2980](#L2980) | ### Begin System Info ### |
| [2981](#L2981) |  |
| [2982](#L2982) | ## Please include this information when posting support requests ## |
| [2983](#L2983) |  |
| [2984](#L2984) | <?php do\_action('cminds\_system\_info\_before'); ?> |
| [2985](#L2985) |  |
| [2986](#L2986) | Package Version:                <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?> |
| [2987](#L2987) |  |
| [2988](#L2988) | Multisite:                <?php echo is\_multisite() ? 'Yes' . "\n" : 'No' . "\n" ?> |
| [2989](#L2989) |  |
| [2990](#L2990) | SITE\_URL:                 <?php echo site\_url() . "\n"; ?> |
| [2991](#L2991) | HOME\_URL:                 <?php echo home\_url() . "\n"; ?> |
| [2992](#L2992) |  |
| [2993](#L2993) | WordPress Version:        <?php echo get\_bloginfo('version') . "\n"; ?> |
| [2994](#L2994) | Permalink Structure:      <?php echo get\_option('permalink\_structure') . "\n"; ?> |
| [2995](#L2995) | Active Theme:             <?php echo $theme . "\n"; ?> |
| [2996](#L2996) | <?php if ($host) : ?> |
| [2997](#L2997) | Host:                     <?php echo $host . "\n"; ?> |
| [2998](#L2998) | <?php endif; ?> |
| [2999](#L2999) |  |
| [3000](#L3000) | Registered Post Stati:    <?php echo implode(', ', get\_post\_stati()) . "\n\n"; ?> |
| [3001](#L3001) |  |
| [3002](#L3002) | PHP Version:              <?php echo PHP\_VERSION . "\n"; ?> |
| [3003](#L3003) | MySQL Version:            <?php echo (function\_exists('mysqli\_get\_server\_info')) ? mysqli\_get\_server\_info($wpdb->dbh) . "\n" : 'N/A' . "\n"; ?> |
| [3004](#L3004) | Web Server Info:          <?php echo $\_SERVER['SERVER\_SOFTWARE'] . "\n"; ?> |
| [3005](#L3005) |  |
| [3006](#L3006) | WordPress Memory Limit:   <?php echo WP\_MEMORY\_LIMIT ?><?php echo "\n"; ?> |
| [3007](#L3007) | PHP Memory Limit:         <?php echo ini\_get('memory\_limit') . "\n"; ?> |
| [3008](#L3008) | PHP Upload Max Size:      <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3009](#L3009) | PHP Post Max Size:        <?php echo ini\_get('post\_max\_size') . "\n"; ?> |
| [3010](#L3010) | PHP Upload Max Filesize:  <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3011](#L3011) | PHP Time Limit:           <?php echo ini\_get('max\_execution\_time') . "\n"; ?> |
| [3012](#L3012) | PHP Max Input Vars:       <?php echo ini\_get('max\_input\_vars') . "\n"; ?> |
| [3013](#L3013) | PHP Arg Separator:        <?php echo ini\_get('arg\_separator.output') . "\n"; ?> |
| [3014](#L3014) | PHP Allow URL File Open:  <?php echo ini\_get('allow\_url\_fopen') ? "Yes" : "No\n"; ?> |
| [3015](#L3015) |  |
| [3016](#L3016) | WP\_DEBUG:                 <?php echo defined('WP\_DEBUG') ? WP\_DEBUG ? 'Enabled' . "\n" : 'Disabled' . "\n" : 'Not set' . "\n" ?> |
| [3017](#L3017) |  |
| [3018](#L3018) | WP Table Prefix:          <?php |
| [3019](#L3019) | echo "Length: " . strlen($wpdb->prefix); |
| [3020](#L3020) | echo " Status:"; |
| [3021](#L3021) | if (strlen($wpdb->prefix) > 16) { |
| [3022](#L3022) | echo " ERROR: Too Long"; |
| [3023](#L3023) | } else { |
| [3024](#L3024) | echo " Acceptable"; |
| [3025](#L3025) | } echo "\n"; |
| [3026](#L3026) | ?> |
| [3027](#L3027) |  |
| [3028](#L3028) | Show On Front:            <?php echo get\_option('show\_on\_front') . "\n" ?> |
| [3029](#L3029) | Page On Front:            <?php |
| [3030](#L3030) | $id = get\_option('page\_on\_front'); |
| [3031](#L3031) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3032](#L3032) | ?> |
| [3033](#L3033) | Page For Posts:           <?php |
| [3034](#L3034) | $id = get\_option('page\_for\_posts'); |
| [3035](#L3035) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3036](#L3036) | ?> |
| [3037](#L3037) |  |
| [3038](#L3038) | <?php |
| [3039](#L3039) | $request['cmd'] = '\_notify-validate'; |
| [3040](#L3040) |  |
| [3041](#L3041) | $params = array( |
| [3042](#L3042) | 'sslverify'  => false, |
| [3043](#L3043) | 'timeout'    => 60, |
| [3044](#L3044) | 'user-agent' => 'Cminds/' . $this->getOption('plugin-version'), |
| [3045](#L3045) | 'body'       => $request |
| [3046](#L3046) | ); |
| [3047](#L3047) |  |
| [3048](#L3048) | $response = wp\_remote\_post('https://www.paypal.com/cgi-bin/webscr', $params); |
| [3049](#L3049) |  |
| [3050](#L3050) | if (!is\_wp\_error($response) && $response['response']['code'] >= 200 && $response['response']['code'] < 300) { |
| [3051](#L3051) | $WP\_REMOTE\_POST = 'wp\_remote\_post() works' . "\n"; |
| [3052](#L3052) | } else { |
| [3053](#L3053) | $WP\_REMOTE\_POST = 'wp\_remote\_post() does not work' . "\n"; |
| [3054](#L3054) | } |
| [3055](#L3055) | ?> |
| [3056](#L3056) | WP Remote Post:           <?php echo $WP\_REMOTE\_POST; ?> |
| [3057](#L3057) |  |
| [3058](#L3058) | Session:                  <?php echo isset($\_SESSION) ? 'Enabled' : 'Disabled'; ?><?php echo "\n"; ?> |
| [3059](#L3059) | Session Name:             <?php echo esc\_html(ini\_get('session.name')); ?><?php echo "\n"; ?> |
| [3060](#L3060) | Cookie Path:              <?php echo esc\_html(ini\_get('session.cookie\_path')); ?><?php echo "\n"; ?> |
| [3061](#L3061) | Save Path:                <?php echo esc\_html(ini\_get('session.save\_path')); ?><?php echo "\n"; ?> |
| [3062](#L3062) | Use Cookies:              <?php echo ini\_get('session.use\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3063](#L3063) | Use Only Cookies:         <?php echo ini\_get('session.use\_only\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3064](#L3064) |  |
| [3065](#L3065) | DISPLAY ERRORS:           <?php echo ( ini\_get('display\_errors') ) ? 'On (' . ini\_get('display\_errors') . ')' : 'N/A'; ?><?php echo "\n"; ?> |
| [3066](#L3066) | FSOCKOPEN:                <?php echo ( function\_exists('fsockopen') ) ? 'Your server supports fsockopen.' : 'Your server does not support fsockopen.'; ?><?php echo "\n"; ?> |
| [3067](#L3067) | cURL:                     <?php echo ( function\_exists('curl\_init') ) ? 'Your server supports cURL.' : 'Your server does not support cURL.'; ?><?php echo "\n"; ?> |
| [3068](#L3068) | SOAP Client:              <?php echo ( class\_exists('SoapClient') ) ? 'Your server has the SOAP Client enabled.' : 'Your server does not have the SOAP Client enabled.'; ?><?php echo "\n"; ?> |
| [3069](#L3069) | SUHOSIN:                  <?php echo ( extension\_loaded('suhosin') ) ? 'Your server has SUHOSIN installed.' : 'Your server does not have SUHOSIN installed.'; ?><?php echo "\n"; ?> |
| [3070](#L3070) |  |
| [3071](#L3071) | ##COMPATIBILITY |
| [3072](#L3072) |  |
| [3073](#L3073) | <?php echo $this->cminds\_compatibility\_check(true); ?> |
| [3074](#L3074) |  |
| [3075](#L3075) | ##ACTIVE PLUGINS: |
| [3076](#L3076) |  |
| [3077](#L3077) | <?php |
| [3078](#L3078) | $plugins = get\_plugins(); |
| [3079](#L3079) | $active\_plugins = get\_option('active\_plugins', array()); |
| [3080](#L3080) |  |
| [3081](#L3081) | foreach ($plugins as $plugin\_path => $plugin) { |
| [3082](#L3082) | // If the plugin isn't active, don't show it. |
| [3083](#L3083) | if (!in\_array($plugin\_path, $active\_plugins)) |
| [3084](#L3084) | continue; |
| [3085](#L3085) |  |
| [3086](#L3086) | echo $plugin['Name'] . ': ' . $plugin['Version'] . "\n"; |
| [3087](#L3087) | } |
| [3088](#L3088) |  |
| [3089](#L3089) | if (is\_multisite()) : |
| [3090](#L3090) | ?> |
| [3091](#L3091) |  |
| [3092](#L3092) | NETWORK ACTIVE PLUGINS: |
| [3093](#L3093) |  |
| [3094](#L3094) | <?php |
| [3095](#L3095) | $plugins = wp\_get\_active\_network\_plugins(); |
| [3096](#L3096) | $active\_plugins = get\_site\_option('active\_sitewide\_plugins', array()); |
| [3097](#L3097) |  |
| [3098](#L3098) | foreach ($plugins as $plugin\_path) { |
| [3099](#L3099) | $plugin\_base = plugin\_basename($plugin\_path); |
| [3100](#L3100) |  |
| [3101](#L3101) | // If the plugin isn't active, don't show it. |
| [3102](#L3102) | if (!array\_key\_exists($plugin\_base, $active\_plugins)) |
| [3103](#L3103) | continue; |
| [3104](#L3104) |  |
| [3105](#L3105) | $plugin = get\_plugin\_data($plugin\_path); |
| [3106](#L3106) |  |
| [3107](#L3107) | echo $plugin['Name'] . ' :' . $plugin['Version'] . "\n"; |
| [3108](#L3108) | } |
| [3109](#L3109) |  |
| [3110](#L3110) | endif; |
| [3111](#L3111) | do\_action('cminds\_system\_info\_after'); |
| [3112](#L3112) | ?> |
| [3113](#L3113) | ### End System Info ### |
| [3114](#L3114) | <?php |
| [3115](#L3115) | } |
| [3116](#L3116) |  |
| [3117](#L3117) | /\*\* |
| [3118](#L3118) | \* Generates the System Info Download File |
| [3119](#L3119) | \* |
| [3120](#L3120) | \* @since 1.4 |
| [3121](#L3121) | \* @return void |
| [3122](#L3122) | \*/ |
| [3123](#L3123) | public function cminds\_generate\_sysinfo\_download() { |
| [3124](#L3124) | if ( wp\_verify\_nonce( $\_POST['system\_information\_download\_form\_nonce'], 'system\_information\_download\_form\_nonce' ) ) { |
| [3125](#L3125) | nocache\_headers(); |
| [3126](#L3126) | header("Content-type: text/plain"); |
| [3127](#L3127) | header('Content-Disposition: attachment; filename="cminds-system-info.txt"'); |
| [3128](#L3128) | echo wp\_strip\_all\_tags($\_POST['cminds-sysinfo']); |
| [3129](#L3129) | die(); |
| [3130](#L3130) | } |
| [3131](#L3131) | } |
| [3132](#L3132) |  |
| [3133](#L3133) | public function getOption($key, $default = NULL) { |
| [3134](#L3134) | $value = isset($this->config[$key]) ? $this->config[$key] : $default; |
| [3135](#L3135) | return $value; |
| [3136](#L3136) | } |
| [3137](#L3137) |  |
| [3138](#L3138) | public function getPageUrl($pageBase = 'licensing') { |
| [3139](#L3139) | $pluginMenuPageBase = $this->pluginMenu; |
| [3140](#L3140) | $abbrev = $this->getOption('plugin-is-addon') ? $this->getOption('plugin-parent-abbrev') : $this->getOption('plugin-abbrev'); |
| [3141](#L3141) | if (empty($abbrev)) { |
| [3142](#L3142) | /\* |
| [3143](#L3143) | \* Abbrev not set for the plugin try to guess |
| [3144](#L3144) | \*/ |
| [3145](#L3145) | $abbrev = substr($this->getOption('plugin-abbrev'), 0, -1); |
| [3146](#L3146) | } |
| [3147](#L3147) | $page = $abbrev . '\_' . $pageBase; |
| [3148](#L3148) | if (FALSE === strpos($pluginMenuPageBase, '.php')) { |
| [3149](#L3149) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url('admin.php'))); |
| [3150](#L3150) | } else { |
| [3151](#L3151) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url($pluginMenuPageBase))); |
| [3152](#L3152) | } |
| [3153](#L3153) | return $pageUrl; |
| [3154](#L3154) | } |
| [3155](#L3155) |  |
| [3156](#L3156) | /\*\* |
| [3157](#L3157) | \* Converts the Apache memory values to number of bytes ini\_get('upload\_max\_filesize') or ini\_get('post\_max\_size') |
| [3158](#L3158) | \* @param type $str |
| [3159](#L3159) | \* @return type |
| [3160](#L3160) | \*/ |
| [3161](#L3161) | public static function cminds\_units2bytes($str) { |
| [3162](#L3162) | $units = array('B', 'K', 'M', 'G', 'T'); |
| [3163](#L3163) | $unit = preg\_replace('/[0-9]/', '', $str); |
| [3164](#L3164) | $unitFactor = array\_search(strtoupper($unit), $units); |
| [3165](#L3165) | if ($unitFactor !== false) { |
| [3166](#L3166) | return preg\_replace('/[a-z]/i', '', $str) \* pow(2, 10 \* $unitFactor); |
| [3167](#L3167) | } |
| [3168](#L3168) | } |
| [3169](#L3169) |  |
| [3170](#L3170) | public static function cminds\_set\_content\_type() { |
| [3171](#L3171) | return "text/html"; |
| [3172](#L3172) | } |
| [3173](#L3173) |  |
| [3174](#L3174) | } |
| [3175](#L3175) |  |
| [3176](#L3176) | } |
| [3177](#L3177) |  |
| [3178](#L3178) | /\* |
| [3179](#L3179) | \* Load the config |
| [3180](#L3180) | \*/ |
| [3181](#L3181) | global $cmindsPluginPackage; |
| [3182](#L3182) | include('cminds-plugin-config.php'); |
| [3183](#L3183) | $cmindsPluginPackage[$cminds\_plugin\_config['plugin-abbrev']] = new CmindsFreePackage($cminds\_plugin\_config); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/cm-on-demand-search-and-replace/trunk/package/cminds-free.php?format=txt)
* [Original Format](/export/3222474/cm-on-demand-search-and-replace/trunk/package/cminds-free.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_a0e85648_20250114_205636.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3192381)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3192380 "Changeset 3192380")
* [Next Changeset](/changeset/3192382 "Changeset 3192382") →

---

# Changeset 3192381

Timestamp:
11/19/2024 02:24:53 PM
([8 weeks](/timeline?from=2024-11-19T14%3A24%3A53Z&precision=second "See timeline at 11/19/2024 02:24:53 PM") ago)

Author:
CreativeMindsSolutions
Message:

release a security fix

Location:
[cm-on-demand-search-and-replace/trunk](/browser/cm-on-demand-search-and-replace/trunk?rev=3192381)
Files:

102 added

* [assets](/browser/cm-on-demand-search-and-replace/trunk/assets?rev=3192381 "Show entry in browser")
  (added)
* [assets/css](/browser/cm-on-demand-search-and-replace/trunk/assets/css?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/cm-search-and-replace.css](/browser/cm-on-demand-search-and-replace/trunk/assets/css/cm-search-and-replace.css?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ajax-loader.gif](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ajax-loader.gif?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/animated-overlay.gif](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/animated-overlay.gif?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/cm-custom-cm-search-and-replace-icon.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/cm-custom-cm-search-and-replace-icon.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/help.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/help.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/help\_hover.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/help_hover.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/icon.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/icon.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_flat\_0\_aaaaaa\_40x100.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-bg_flat_0_aaaaaa_40x100.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_flat\_75\_ffffff\_40x100.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-bg_flat_75_ffffff_40x100.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_glass\_55\_fbf9ee\_1x400.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-bg_glass_55_fbf9ee_1x400.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_glass\_65\_ffffff\_1x400.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-bg_glass_65_ffffff_1x400.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_glass\_75\_dadada\_1x400.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-bg_glass_75_dadada_1x400.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_glass\_75\_e6e6e6\_1x400.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-bg_glass_75_e6e6e6_1x400.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_glass\_95\_fef1ec\_1x400.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-bg_glass_95_fef1ec_1x400.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-bg\_highlight-soft\_75\_cccccc\_1x100.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-icons\_222222\_256x240.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-icons_222222_256x240.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-icons\_2e83ff\_256x240.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-icons_2e83ff_256x240.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-icons\_454545\_256x240.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-icons_454545_256x240.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-icons\_888888\_256x240.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-icons_888888_256x240.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/images/ui-icons\_cd0a0a\_256x240.png](/browser/cm-on-demand-search-and-replace/trunk/assets/css/images/ui-icons_cd0a0a_256x240.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/jquery-ui-1.10.3.custom.css](/browser/cm-on-demand-search-and-replace/trunk/assets/css/jquery-ui-1.10.3.custom.css?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/jquery-ui-timepicker-addon.min.css](/browser/cm-on-demand-search-and-replace/trunk/assets/css/jquery-ui-timepicker-addon.min.css?rev=3192381 "Show entry in browser")
  (added)
* [assets/css/select2.min.css](/browser/cm-on-demand-search-and-replace/trunk/assets/css/select2.min.css?rev=3192381 "Show entry in browser")
  (added)
* [assets/images](/browser/cm-on-demand-search-and-replace/trunk/assets/images?rev=3192381 "Show entry in browser")
  (added)
* [assets/images/export\_import.png](/browser/cm-on-demand-search-and-replace/trunk/assets/images/export_import.png?rev=3192381 "Show entry in browser")
  (added)
* [assets/js](/browser/cm-on-demand-search-and-replace/trunk/assets/js?rev=3192381 "Show entry in browser")
  (added)
* [assets/js/cm-search-and-replace-admin.js](/browser/cm-on-demand-search-and-replace/trunk/assets/js/cm-search-and-replace-admin.js?rev=3192381 "Show entry in browser")
  (added)
* [assets/js/jquery-ui-timepicker-addon.min.js](/browser/cm-on-demand-search-and-replace/trunk/assets/js/jquery-ui-timepicker-addon.min.js?rev=3192381 "Show entry in browser")
  (added)
* [assets/js/select2.min.js](/browser/cm-on-demand-search-and-replace/trunk/assets/js/select2.min.js?rev=3192381 "Show entry in browser")
  (added)
* [classes](/browser/cm-on-demand-search-and-replace/trunk/classes?rev=3192381 "Show entry in browser")
  (added)
* [classes/Base.php](/browser/cm-on-demand-search-and-replace/trunk/classes/Base.php?rev=3192381 "Show entry in browser")
  (added)
* [classes/Replacement.php](/browser/cm-on-demand-search-and-replace/trunk/classes/Replacement.php?rev=3192381 "Show entry in browser")
  (added)
* [cm-on-demand-search-and-replace.php](/browser/cm-on-demand-search-and-replace/trunk/cm-on-demand-search-and-replace.php?rev=3192381 "Show entry in browser")
  (added)
* [functions.php](/browser/cm-on-demand-search-and-replace/trunk/functions.php?rev=3192381 "Show entry in browser")
  (added)
* [package](/browser/cm-on-demand-search-and-replace/trunk/package?rev=3192381 "Show entry in browser")
  (added)
* [package/CMWPPluginssuite.png](/browser/cm-on-demand-search-and-replace/trunk/package/CMWPPluginssuite.png?rev=3192381 "Show entry in browser")
  (added)
* [package/cminds-free.php](/browser/cm-on-demand-search-and-replace/trunk/package/cminds-free.php?rev=3192381 "Show entry in browser")
  (added)
* [package/cminds-plugin-config.php](/browser/cm-on-demand-search-and-replace/trunk/package/cminds-plugin-config.php?rev=3192381 "Show entry in browser")
  (added)
* [package/css](/browser/cm-on-demand-search-and-replace/trunk/package/css?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images](/browser/cm-on-demand-search-and-replace/trunk/package/css/images?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/animated-overlay.gif](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/animated-overlay.gif?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_0\_aaaaaa\_40x100.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-bg_flat_0_aaaaaa_40x100.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_flat\_75\_ffffff\_40x100.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-bg_flat_75_ffffff_40x100.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_55\_fbf9ee\_1x400.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-bg_glass_55_fbf9ee_1x400.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_65\_ffffff\_1x400.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-bg_glass_65_ffffff_1x400.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_dadada\_1x400.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-bg_glass_75_dadada_1x400.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_75\_e6e6e6\_1x400.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-bg_glass_75_e6e6e6_1x400.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_glass\_95\_fef1ec\_1x400.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-bg_glass_95_fef1ec_1x400.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-bg\_highlight-soft\_75\_cccccc\_1x100.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-bg_highlight-soft_75_cccccc_1x100.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_222222\_256x240.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-icons_222222_256x240.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_2e83ff\_256x240.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-icons_2e83ff_256x240.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_454545\_256x240.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-icons_454545_256x240.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_888888\_256x240.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-icons_888888_256x240.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/images/ui-icons\_cd0a0a\_256x240.png](/browser/cm-on-demand-search-and-replace/trunk/package/css/images/ui-icons_cd0a0a_256x240.png?rev=3192381 "Show entry in browser")
  (added)
* [package/css/jquery-ui.min.css](/browser/cm-on-demand-search-and-replace/trunk/package/css/jquery-ui.min.css?rev=3192381 "Show entry in browser")
  (added)
* [package/css/main.css](/browser/cm-on-demand-search-and-replace/trunk/package/css/main.css?rev=3192381 "Show entry in browser")
  (added)
* [package/css/rolling@2x.gif](/browser/cm-on-demand-search-and-replace/trunk/package/css/rolling%402x.gif?rev=3192381 "Show entry in browser")
  (added)
* [package/js](/browser/cm-on-demand-search-and-replace/trunk/package/js?rev=3192381 "Show entry in browser")
  (added)
* [package/js/froogaloop.js](/browser/cm-on-demand-search-and-replace/trunk/package/js/froogaloop.js?rev=3192381 "Show entry in browser")
  (added)
* [package/js/mailerlite.js](/browser/cm-on-demand-search-and-replace/trunk/package/js/mailerlite.js?rev=3192381 "Show entry in browser")
  (added)
* [package/views](/browser/cm-on-demand-search-and-replace/trunk/package/views?rev=3192381 "Show entry in browser")
  (added)
* [package/views/99suite.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/99suite.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/Hound2.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/Hound2.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/SEOHoundIcon.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/SEOHoundIcon.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/WPmembership.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/WPmembership.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/answers.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/answers.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/appointments\_icon.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/appointments_icon.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/banner\_yearly-membership\_220px.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/banner_yearly-membership_220px.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/businessdir.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/businessdir.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/deactivation\_feedback\_modal.php](/browser/cm-on-demand-search-and-replace/trunk/package/views/deactivation_feedback_modal.php?rev=3192381 "Show entry in browser")
  (added)
* [package/views/downloads.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/downloads.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/faq.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/faq.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/img](/browser/cm-on-demand-search-and-replace/trunk/package/views/img?rev=3192381 "Show entry in browser")
  (added)
* [package/views/img/Vector.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/img/Vector.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/img/assets.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/img/assets.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/img/circle.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/img/circle.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/img/confetti.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/img/confetti.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/img/v1.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/img/v1.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/img/v2.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/img/v2.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner.jpg](/browser/cm-on-demand-search-and-replace/trunk/package/views/keywordhoundbanner.jpg?rev=3192381 "Show entry in browser")
  (added)
* [package/views/keywordhoundbanner1.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/keywordhoundbanner1.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/no.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/no.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/plugin\_compare\_table.php](/browser/cm-on-demand-search-and-replace/trunk/package/views/plugin_compare_table.php?rev=3192381 "Show entry in browser")
  (added)
* [package/views/popup.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/popup.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/registration.php](/browser/cm-on-demand-search-and-replace/trunk/package/views/registration.php?rev=3192381 "Show entry in browser")
  (added)
* [package/views/routes.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/routes.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/searchreplace.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/searchreplace.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/tooltip.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/tooltip.png?rev=3192381 "Show entry in browser")
  (added)
* [package/views/userguide\_free.php](/browser/cm-on-demand-search-and-replace/trunk/package/views/userguide_free.php?rev=3192381 "Show entry in browser")
  (added)
* [package/views/videolessons.png](/browser/cm-on-demand-search-and-replace/trunk/package/views/videolessons.png?rev=3192381 "Show entry in browser")
  (added)
* [readme.txt](/browser/cm-on-demand-search-and-replace/trunk/readme.txt?rev=3192381 "Show entry in browser")
  (added)
* [views](/browser/cm-on-demand-search-and-replace/trunk/views?rev=3192381 "Show entry in browser")
  (added)
* [views/backend](/browser/cm-on-demand-search-and-replace/trunk/views/backend?rev=3192381 "Show entry in browser")
  (added)
* [views/backend/admin\_about.php](/browser/cm-on-demand-search-and-replace/trunk/views/backend/admin_about.php?rev=3192381 "Show entry in browser")
  (added)
* [views/backend/admin\_export.php](/browser/cm-on-demand-search-and-replace/trunk/views/backend/admin_export.php?rev=3192381 "Show entry in browser")
  (added)
* [views/backend/admin\_nav.php](/browser/cm-on-demand-search-and-replace/trunk/views/backend/admin_nav.php?rev=3192381 "Show entry in browser")
  (added)
* [views/backend/admin\_settings.php](/browser/cm-on-demand-search-and-replace/trunk/views/backend/admin_settings.php?rev=3192381 "Show entry in browser")
  (added)
* [views/backend/admin\_template.php](/browser/cm-on-demand-search-and-replace/trunk/views/backend/admin_template.php?rev=3192381 "Show entry in browser")
  (added)
* [views/backend/call\_to\_action.phtml](/browser/cm-on-demand-search-and-replace/trunk/views/backend/call_to_action.phtml?rev=3192381 "Show entry in browser")
  (added)

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3192381)
* [Zip Archive](?format=zip&new=3192381)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_1a25b565_20250114_205630.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fenhanced-tooltipglossary%2Ftrunk%2Fpackage%2Fcminds-free.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/enhanced-tooltipglossary/trunk/package/cminds-free.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/enhanced-tooltipglossary/trunk/package/cminds-free.php)

---

# [source:](/browser?order=name "Go to repository root") [enhanced-tooltipglossary](/browser/enhanced-tooltipglossary?order=name "View enhanced-tooltipglossary")/[trunk](/browser/enhanced-tooltipglossary/trunk?order=name "View trunk")/[package](/browser/enhanced-tooltipglossary/trunk/package?order=name "View package")/[cminds-free.php](/browser/enhanced-tooltipglossary/trunk/package/cminds-free.php?order=name "View cminds-free.php")

View diff against:

View revision:

| [Last change](/changeset/3219541/enhanced-tooltipglossary/trunk/package/cminds-free.php "View differences") on this file was [3219541](/changeset/3219541/ "View changeset 3219541"), checked in by CreativeMindsSolutions, [5 days ago](/timeline?from=2025-01-09T10%3A49%3A05Z&precision=second "See timeline at 01/09/2025 10:49:05 AM") |
| --- |
| release a new version with improved wizard |
| **File size:** 141.0 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | namespace com\cminds\package\free\v1\_1\_5; |
| [3](#L3) |  |
| [4](#L4) | if (!defined(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION')) { |
| [5](#L5) | define(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION', '1\_1\_5'); |
| [6](#L6) | } |
| [7](#L7) | if (!class\_exists(\_\_NAMESPACE\_\_ . '\CmindsFreePackage')) { |
| [8](#L8) |  |
| [9](#L9) | class CmindsFreePackage { |
| [10](#L10) |  |
| [11](#L11) | private $config = array(); |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* LicensingAPI object |
| [15](#L15) | \* @var CmindsLicensingAPI |
| [16](#L16) | \*/ |
| [17](#L17) | public $licensingApi = null; |
| [18](#L18) | private $pluginMenu = null; |
| [19](#L19) | private $pluginMenuPage = null; |
| [20](#L20) |  |
| [21](#L21) | const SHAREBOX\_FLAT = 0; |
| [22](#L22) | const SHAREBOX\_SQUARE = 1; |
| [23](#L23) | const ADS\_REFRESH\_INTERVAL = 7776000; // 3600 \* 24 \* 90 = 3 months |
| [24](#L24) |  |
| [25](#L25) | public function \_\_construct($config) { |
| [26](#L26) | $this->config = $config; |
| [27](#L27) |  |
| [28](#L28) | $this->pluginMenu = $this->getOption('plugin-menu-item'); |
| [29](#L29) | $this->pluginMenuPage = $this->getPageUrl('licensing'); |
| [30](#L30) |  |
| [31](#L31) | add\_action('activated\_plugin', array($this, 'redirectAfterInstall'), 10, 2); |
| [32](#L32) | add\_action('admin\_init', array($this, 'updatePoweredByOption')); |
| [33](#L33) | add\_action('admin\_init', array($this, 'registerAdminActions')); |
| [34](#L34) | add\_action('admin\_menu', array($this, 'updateMenu'), 21); |
| [35](#L35) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminStyles')); |
| [36](#L36) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminScripts')); |
| [37](#L37) |  |
| [38](#L38) | $aboutPageKey = $this->getPageSlug(); |
| [39](#L39) | add\_action('cminds-' . $aboutPageKey . '-content-1', array($this, 'displayUserGuideTab')); |
| [40](#L40) | add\_action('cminds-' . $aboutPageKey . '-content-10', array($this, 'displayCreativeMindsTab')); |
| [41](#L41) | add\_action('cminds-' . $aboutPageKey . '-content-30', array($this, 'displayMembershipTab')); |
| [42](#L42) | add\_action('cminds-' . $aboutPageKey . '-content-40', array($this, 'displayCMProductTab')); |
| [43](#L43) | add\_action('cminds-' . $aboutPageKey . '-content-50', array($this, 'displayCMAddOnsTab')); |
| [44](#L44) | add\_action('cminds-' . $aboutPageKey . '-content-60', array($this, 'displayVideoGuidesTab')); |
| [45](#L45) | add\_action('cminds-' . $aboutPageKey . '-content-99', array($this, 'displaySupportTab')); |
| [46](#L46) | add\_action('cminds-' . $aboutPageKey . '-content-199', array($this, 'displayServerInformationTab')); |
| [47](#L47) |  |
| [48](#L48) | add\_action('cminds\_download\_sysinfo', array($this, 'cminds\_generate\_sysinfo\_download')); |
| [49](#L49) |  |
| [50](#L50) | add\_action('init', array($this, 'cminds\_get\_actions')); |
| [51](#L51) | add\_action('init', array($this, 'cminds\_post\_actions')); |
| [52](#L52) |  |
| [53](#L53) | add\_shortcode('cminds\_free\_author', array($this, 'showAuthor')); |
| [54](#L54) | add\_shortcode('cminds\_free\_registration', array($this, 'showRegistration')); |
| [55](#L55) | add\_shortcode('cminds\_free\_guide', array($this, 'showGuide')); |
| [56](#L56) | add\_shortcode('cminds\_upgrade\_box', array($this, 'showUpgrade')); |
| [57](#L57) | add\_shortcode('cminds\_free\_activation', array($this, 'showActivation')); |
| [58](#L58) |  |
| [59](#L59) | add\_filter('plugin\_row\_meta', array($this, 'add\_plugin\_meta\_links'), 10, 2); |
| [60](#L60) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'add\_plugin\_action\_links')); |
| [61](#L61) |  |
| [62](#L62) | add\_action('wp\_dashboard\_setup', array($this, 'addDashboardWidget')); |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | public function addDashboardWidget() { |
| [66](#L66) | if ($this->isRegistered()) { |
| [67](#L67) | wp\_add\_dashboard\_widget('cminds\_package\_dashboard\_widget', \_\_('CreativeMinds WordPress News', 'cminds-package'), array($this, 'showCMDashboardWidget')); |
| [68](#L68) | } |
| [69](#L69) | } |
| [70](#L70) |  |
| [71](#L71) | public function showCMDashboardWidget() { |
| [72](#L72) | $feeds = array( |
| [73](#L73) | array( |
| [74](#L74) | 'url'          => 'https://www.cminds.com/category/wordpress/feed/', |
| [75](#L75) | 'items'        => 6, |
| [76](#L76) | 'show\_summary' => 0, |
| [77](#L77) | 'show\_author'  => 0, |
| [78](#L78) | 'show\_date'    => 1, |
| [79](#L79) | ), |
| [80](#L80) | ); |
| [81](#L81) |  |
| [82](#L82) | wp\_dashboard\_primary\_output('cminds\_package\_dashboard\_widget', $feeds); |
| [83](#L83) | ?> |
| [84](#L84) | <br><hr> |
| [85](#L85) | <p> |
| [86](#L86) | <?php |
| [87](#L87) | printf( |
| [88](#L88) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/', \_\_('cminds.com'), \_\_('(opens in a new window)') |
| [89](#L89) | ); |
| [90](#L90) | ?> |
| [91](#L91) |  |
| [92](#L92) | | |
| [93](#L93) |  |
| [94](#L94) | <?php |
| [95](#L95) | printf( |
| [96](#L96) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/wordpress-plugins/', \_\_('CM WordPress Plugins'), \_\_('(opens in a new window)') |
| [97](#L97) | ); |
| [98](#L98) | ?> |
| [99](#L99) |  |
| [100](#L100) | | |
| [101](#L101) |  |
| [102](#L102) | <?php |
| [103](#L103) | printf( |
| [104](#L104) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', esc\_url(\_x('https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/', '99+ WordPress Plugins Bundle')), \_\_('99+ WordPress Plugins Bundle'), \_\_('(opens in a new window)') |
| [105](#L105) | ); |
| [106](#L106) | ?> |
| [107](#L107) | </p> |
| [108](#L108) | <?php |
| [109](#L109) | } |
| [110](#L110) |  |
| [111](#L111) | public function redirectAfterInstall($plugin, $network\_activation = false) { |
| [112](#L112) | global $cmindsPluginPackage; |
| [113](#L113) | $the\_package = null; |
| [114](#L114) |  |
| [115](#L115) | foreach ($cmindsPluginPackage as $package) { |
| [116](#L116) | $basename = $package->getOption('plugin-basename'); |
| [117](#L117) | if ($basename == $plugin) { |
| [118](#L118) | $the\_package = $package; |
| [119](#L119) | break; |
| [120](#L120) | } |
| [121](#L121) | } |
| [122](#L122) |  |
| [123](#L123) | if ($the\_package && $the\_package->getOption('plugin-redirect-after-install')) { |
| [124](#L124) | $url = $the\_package->getOption('plugin-redirect-after-install'); |
| [125](#L125) | $isBulkActivate = array(); |
| [126](#L126) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action2'); |
| [127](#L127) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action'); |
| [128](#L128) | if (!empty($url) && !in\_array('activate-selected', $isBulkActivate)) { |
| [129](#L129) | wp\_redirect($url); |
| [130](#L130) | exit(); |
| [131](#L131) | } |
| [132](#L132) | } |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | /\*\* |
| [136](#L136) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [137](#L137) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [138](#L138) | \* functions are called on init. |
| [139](#L139) | \* |
| [140](#L140) | \* @since 1.0 |
| [141](#L141) | \* @return void |
| [142](#L142) | \*/ |
| [143](#L143) | public function registerAdminActions() { |
| [144](#L144) | if (is\_admin()) { |
| [145](#L145) | // If user is paying or in trial and have the free version installed, |
| [146](#L146) | // assume that the deactivation is for the upgrade process. |
| [147](#L147) | add\_action('wp\_ajax\_cm-submit-uninstall-reason', array($this, 'submitUninstallReason')); |
| [148](#L148) | add\_action('wp\_ajax\_cm-submit-registration-email', array($this, 'submitRegistrationEmail')); |
| [149](#L149) | add\_action('wp\_ajax\_cm-submit-deregistration', array($this, 'submitDeregistration')); |
| [150](#L150) | add\_action('wp\_ajax\_cm-submit-registration-skip', array($this, 'submitRegistrationSkip')); |
| [151](#L151) |  |
| [152](#L152) | global $pagenow; |
| [153](#L153) | if ('plugins.php' === $pagenow) { |
| [154](#L154) | // Add action link to settings page. |
| [155](#L155) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [156](#L156) | add\_filter('network\_admin\_plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [157](#L157) | add\_action('admin\_footer', array($this, 'showDeactivationFeedbackDialog'), 11); |
| [158](#L158) | } |
| [159](#L159) | } |
| [160](#L160) | } |
| [161](#L161) |  |
| [162](#L162) | /\*\* |
| [163](#L163) | \* Modify plugin's page action links collection. |
| [164](#L164) | \* |
| [165](#L165) | \* @author Vova Feldman (@svovaf) |
| [166](#L166) | \* @since  1.0.0 |
| [167](#L167) | \* |
| [168](#L168) | \* @param array $links |
| [169](#L169) | \* @param       $file |
| [170](#L170) | \* |
| [171](#L171) | \* @return array |
| [172](#L172) | \*/ |
| [173](#L173) | function modifyPluginActionLinks($links, $file) { |
| [174](#L174) | /\* |
| [175](#L175) | \* This HTML element is used to identify the correct plugin when attaching an event to its Deactivate link. |
| [176](#L176) | \*/ |
| [177](#L177) | if (isset($links['deactivate'])) { |
| [178](#L178) | $links['deactivate'] .= '<i class="cm-slug" data-slug="' . $this->getOption('plugin-abbrev') . '"></i>'; |
| [179](#L179) | } |
| [180](#L180) |  |
| [181](#L181) | return $links; |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | /\*\* |
| [185](#L185) | \* Displays a confirmation and feedback dialog box when the user clicks on the "Deactivate" link on the plugins |
| [186](#L186) | \* page. |
| [187](#L187) | \* |
| [188](#L188) | \*/ |
| [189](#L189) | function showDeactivationFeedbackDialog() { |
| [190](#L190) | $content = ''; |
| [191](#L191) | ob\_start(); |
| [192](#L192) | include\_once 'views/deactivation\_feedback\_modal.php'; |
| [193](#L193) | $content .= ob\_get\_clean(); |
| [194](#L194) | echo $content; |
| [195](#L195) | } |
| [196](#L196) |  |
| [197](#L197) | function filterDeactivationReason($reason) { |
| [198](#L198) |  |
| [199](#L199) | if (strlen($reason) < 20) { |
| [200](#L200) | return ''; |
| [201](#L201) | } |
| [202](#L202) | if (str\_word\_count($reason) < 4) { |
| [203](#L203) | return ''; |
| [204](#L204) | } |
| [205](#L205) |  |
| [206](#L206) | $dirty\_words = array('shit', 'fuck', 'wtf'); |
| [207](#L207) | foreach ($dirty\_words as $a) { |
| [208](#L208) | if (stripos($reason, $a) !== false) { |
| [209](#L209) | return ''; |
| [210](#L210) | } |
| [211](#L211) | } |
| [212](#L212) |  |
| [213](#L213) | return $reason; |
| [214](#L214) | } |
| [215](#L215) |  |
| [216](#L216) | /\*\* |
| [217](#L217) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [218](#L218) | \* @since  1.1.2 |
| [219](#L219) | \*/ |
| [220](#L220) | function submitRegistrationEmail() { |
| [221](#L221) | $atts = array(); |
| [222](#L222) |  |
| [223](#L223) | if (empty($\_POST['email'])) { |
| [224](#L224) | exit; |
| [225](#L225) | } |
| [226](#L226) |  |
| [227](#L227) | $this->registerUser($atts); |
| [228](#L228) | } |
| [229](#L229) |  |
| [230](#L230) | /\*\* |
| [231](#L231) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [232](#L232) | \* @since  1.1.2 |
| [233](#L233) | \*/ |
| [234](#L234) | function submitDeregistration() { |
| [235](#L235) | $atts = array(); |
| [236](#L236) |  |
| [237](#L237) | $this->deregisterUser($atts); |
| [238](#L238) | } |
| [239](#L239) |  |
| [240](#L240) | /\*\* |
| [241](#L241) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [242](#L242) | \* @since  1.1.2 |
| [243](#L243) | \*/ |
| [244](#L244) | function submitRegistrationSkip() { |
| [245](#L245) | if (empty($\_POST)) { |
| [246](#L246) | exit; |
| [247](#L247) | } |
| [248](#L248) | $atts = array(); |
| [249](#L249) | if (!empty($\_POST['id'])) { |
| [250](#L250) | $atts['id'] = sanitize\_text\_field($\_POST['id']); |
| [251](#L251) | } |
| [252](#L252) | $this->skipRegistration($atts); |
| [253](#L253) | } |
| [254](#L254) |  |
| [255](#L255) | /\*\* |
| [256](#L256) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [257](#L257) | \* @since  1.1.2 |
| [258](#L258) | \*/ |
| [259](#L259) | function submitUninstallReason() { |
| [260](#L260) | if (empty($\_POST['plugin\_slug']) || empty($\_POST['deactivation\_reason'])) { |
| [261](#L261) | exit; |
| [262](#L262) | } |
| [263](#L263) |  |
| [264](#L264) | $reason = isset($\_REQUEST['deactivation\_reason']) ? trim(esc\_html(stripslashes(strip\_tags($\_REQUEST['deactivation\_reason'])))) : ''; |
| [265](#L265) | $filteredReason = $this->filterDeactivationReason($reason); |
| [266](#L266) | $postedEmail = isset($\_POST['contact\_email']) && is\_email(trim($\_POST['contact\_email'])) ? sanitize\_text\_field($\_POST['contact\_email']) : null; |
| [267](#L267) |  |
| [268](#L268) | /\* |
| [269](#L269) | \* Only send the e-mail if the filtered reason is not empty |
| [270](#L270) | \*/ |
| [271](#L271) | if (!empty($filteredReason)) { |
| [272](#L272) | global $cmindsPluginPackage; |
| [273](#L273) | $package = $cmindsPluginPackage[$\_POST['plugin\_slug']]; |
| [274](#L274) |  |
| [275](#L275) | $fields = array( |
| [276](#L276) | 'product\_name' => $package->getOption('plugin-name'), |
| [277](#L277) | 'remote\_url'   => get\_bloginfo('wpurl'), |
| [278](#L278) | 'email'        => null !== $postedEmail ? $postedEmail : get\_bloginfo('admin\_email'), |
| [279](#L279) | 'want\_contact' => isset($\_POST['want\_contact']) ? 'true' === $\_POST['want\_contact'] : false, |
| [280](#L280) | 'data\_agree'   => isset($\_POST['data\_agree']) ? 'true' === $\_POST['data\_agree'] : true, |
| [281](#L281) | ); |
| [282](#L282) |  |
| [283](#L283) | $registered = $this->isRegistered($\_POST['plugin\_slug']) ? ' (registered)' : ''; |
| [284](#L284) | $message = '<p>The ' . $fields['product\_name'] . ' has been deactivated on ' . $fields['remote\_url'] . ' by ' . $fields['email'] . $registered . '.</p> <p>The reason was:</p> <p><strong>' . $filteredReason . '</strong></p>'; |
| [285](#L285) | $message .= '<br/><hr/>'; |
| [286](#L286) |  |
| [287](#L287) | $mail = 'support@cminds.com'; |
| [288](#L288) |  |
| [289](#L289) | if ($fields['want\_contact']) { |
| [290](#L290) | $message .= '<p>This user is interested in contact from our side.</p>'; |
| [291](#L291) | $message .= '<br/><hr/>'; |
| [292](#L292) | $mail = 'support@cminds.com'; |
| [293](#L293) | } |
| [294](#L294) |  |
| [295](#L295) | if ($fields['data\_agree']) { |
| [296](#L296) | $message .= '<p>SYSTEM INFORMATION BELOW:</p>'; |
| [297](#L297) | ob\_start(); |
| [298](#L298) | echo '<pre>'; |
| [299](#L299) | echo $this->cminds\_system\_info\_content(); |
| [300](#L300) | echo '</pre>'; |
| [301](#L301) | $message .= ob\_get\_clean(); |
| [302](#L302) | } |
| [303](#L303) |  |
| [304](#L304) | $message .= '<p>END OF SYSTEM INFORMATION</p>'; |
| [305](#L305) |  |
| [306](#L306) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [307](#L307) | $result = wp\_mail($mail, 'CM Free Plugin Deactivation Feedback', $message); |
| [308](#L308) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [309](#L309) | } |
| [310](#L310) |  |
| [311](#L311) |  |
| [312](#L312) | // Print '1' for successful operation. |
| [313](#L313) | echo 1; |
| [314](#L314) | exit; |
| [315](#L315) | } |
| [316](#L316) |  |
| [317](#L317) | /\*\* |
| [318](#L318) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [319](#L319) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [320](#L320) | \* functions are called on init. |
| [321](#L321) | \* |
| [322](#L322) | \* @since 1.0 |
| [323](#L323) | \* @return void |
| [324](#L324) | \*/ |
| [325](#L325) | public function cminds\_get\_actions() { |
| [326](#L326) | if (isset($\_GET['cminds\_action'])) { |
| [327](#L327) | do\_action('cminds\_' . $\_GET['cminds\_action'], $\_GET); |
| [328](#L328) | } |
| [329](#L329) | } |
| [330](#L330) |  |
| [331](#L331) | /\*\* |
| [332](#L332) | \* Hooks Cminds actions, when present in the $\_POST superglobal. Every Cminds\_action |
| [333](#L333) | \* present in $\_POST is called using WordPress's do\_action function. These |
| [334](#L334) | \* functions are called on init. |
| [335](#L335) | \* |
| [336](#L336) | \* @since 1.0 |
| [337](#L337) | \* @return void |
| [338](#L338) | \*/ |
| [339](#L339) | public function cminds\_post\_actions() { |
| [340](#L340) | if (isset($\_POST['cminds\_action'])) { |
| [341](#L341) | do\_action('cminds\_' . $\_POST['cminds\_action'], $\_POST); |
| [342](#L342) | } |
| [343](#L343) | } |
| [344](#L344) |  |
| [345](#L345) | public function updatePoweredByOption() { |
| [346](#L346) | $optionValue = filter\_input(INPUT\_POST, $this->getPoweredByOption()); |
| [347](#L347) | $submitValue = filter\_input(INPUT\_POST, 'cminds\_poweredby\_change'); |
| [348](#L348) |  |
| [349](#L349) | if (null !== $optionValue || null !== $submitValue) { |
| [350](#L350) | if(is\_admin() && is\_user\_logged\_in() && current\_user\_can('manage\_options')) { |
| [351](#L351) | update\_option($this->getPoweredByOption(), $optionValue); |
| [352](#L352) | } |
| [353](#L353) | } |
| [354](#L354) | } |
| [355](#L355) |  |
| [356](#L356) | public function getPoweredByOption() { |
| [357](#L357) | $optionName = $this->getOption('plugin-abbrev') . '-powered-by-enabled'; |
| [358](#L358) | return $optionName; |
| [359](#L359) | } |
| [360](#L360) |  |
| [361](#L361) | /\*\* |
| [362](#L362) | \* Default is 0 (disabled) |
| [363](#L363) | \* @return type |
| [364](#L364) | \*/ |
| [365](#L365) | public function isPoweredByEnabled() { |
| [366](#L366) | $result = get\_option($this->getPoweredByOption(), 0); |
| [367](#L367) | return $result; |
| [368](#L368) | } |
| [369](#L369) |  |
| [370](#L370) | /\*\* |
| [371](#L371) | \* Returns the author Url (for free version only) |
| [372](#L372) | \*/ |
| [373](#L373) | public function showAuthor($atts = array()) { |
| [374](#L374) | $authorUrl = ''; |
| [375](#L375) | global $cmindsPluginPackage; |
| [376](#L376) |  |
| [377](#L377) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [378](#L378) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [379](#L379) |  |
| [380](#L380) | if (!$currentPlugin->isPoweredByEnabled()) { |
| [381](#L381) | return; |
| [382](#L382) | } |
| [383](#L383) | ob\_start(); |
| [384](#L384) | ?> |
| [385](#L385) | <style> |
| [386](#L386) | .cminds\_poweredby {clear:both;float:none;font-size:11px;line-height:1.5;display: inline-block;padding: 3px;margin-top:20px;color:#bbb;text-decoration:none;font-weight:bold} |
| [387](#L387) | .cminds\_poweredby:before {content:'Powered by ';} |
| [388](#L388) | .cminds\_poweredbylink:link{color:#bbb;text-decoration:none;} |
| [389](#L389) | .cminds\_poweredbylink:visited{color:#bbb;text-decoration:none;} |
| [390](#L390) | .cminds\_poweredbylink:hover{color:#bbb;text-decoration:none;} |
| [391](#L391) | </style> |
| [392](#L392) |  |
| [393](#L393) | <?php |
| [394](#L394) | $authorUrl .= ob\_get\_clean(); |
| [395](#L395) | /\* |
| [396](#L396) | \* By leaving following snippet in the code, you're expressing your gratitude to creators of this plugin. Thank You! |
| [397](#L397) | \*/ |
| [398](#L398) | $authorUrl .= '<div style="display:block;clear:both;"></div><span class="cminds\_poweredby">'; |
| [399](#L399) | $authorUrl .= '<a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/') . '" target="\_blank" class="cminds\_poweredbylink">CreativeMinds</a> '; |
| [400](#L400) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/wordpress-plugins/') . '" target="\_blank" class="cminds\_poweredbylink">WordPress Plugin</a>'; |
| [401](#L401) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode($currentPlugin->getOption('plugin-store-url')) . '" target="\_blank" class="cminds\_poweredbylink">' . $currentPlugin->getOption('plugin-name') . '</a>'; |
| [402](#L402) | $authorUrl .= '</span><div style="display:block;clear:both;"></div>'; |
| [403](#L403) |  |
| [404](#L404) | return $authorUrl; |
| [405](#L405) | } |
| [406](#L406) |  |
| [407](#L407) | /\* |
| [408](#L408) | \* Licensing Page Tabs |
| [409](#L409) | \*/ |
| [410](#L410) |  |
| [411](#L411) | public function displayUpgradeTutorialTab() { |
| [412](#L412) | $content = ''; |
| [413](#L413) | ob\_start(); |
| [414](#L414) | ?> |
| [415](#L415) | <div> |
| [416](#L416) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Customer Dashboard</a> |
| [417](#L417) | </div> |
| [418](#L418) | <br/> |
| [419](#L419) | <div> |
| [420](#L420) | <?php |
| [421](#L421) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134692135?title=0&byline=0&portrait=0" width="500" height="280"]'); |
| [422](#L422) | ?> |
| [423](#L423) | </div> |
| [424](#L424) | <?php |
| [425](#L425) | $content .= ob\_get\_clean(); |
| [426](#L426) | return $content; |
| [427](#L427) | } |
| [428](#L428) |  |
| [429](#L429) | public function displayManageProductsTab() { |
| [430](#L430) | $content = ''; |
| [431](#L431) | ob\_start(); |
| [432](#L432) | ?> |
| [433](#L433) | <div> |
| [434](#L434) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Open CreativeMinds Customer Dashboard</a> |
| [435](#L435) | </div> |
| [436](#L436) | <br/> |
| [437](#L437) | <div> |
| [438](#L438) | <?php |
| [439](#L439) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134490629?title=0&byline=0&portrait=0" width="640" height="360"]'); |
| [440](#L440) | ?> |
| [441](#L441) | </div> |
| [442](#L442) | <?php |
| [443](#L443) | $content .= ob\_get\_clean(); |
| [444](#L444) | return $content; |
| [445](#L445) | } |
| [446](#L446) |  |
| [447](#L447) | public function displayServerInformationTab() { |
| [448](#L448) | global $wp\_version; |
| [449](#L449) | $content = ''; |
| [450](#L450) |  |
| [451](#L451) | ob\_start(); |
| [452](#L452) | echo $this->cminds\_compatibility\_check(); |
| [453](#L453) | echo $this->cminds\_system\_info(); |
| [454](#L454) | $content .= ob\_get\_clean(); |
| [455](#L455) | return $content; |
| [456](#L456) | } |
| [457](#L457) |  |
| [458](#L458) | /\* |
| [459](#L459) | \* About/User Guide Page Tabs |
| [460](#L460) | \*/ |
| [461](#L461) |  |
| [462](#L462) | public function displayUserGuideTab() { |
| [463](#L463) | $content = ''; |
| [464](#L464) | ob\_start(); |
| [465](#L465) | ?> |
| [466](#L466) | <div> |
| [467](#L467) | <a href="<?php echo $this->getUserguideUrl(); ?>" class="btn button button-primary" target="\_blank">Open User Guide in a new tab</a> |
| [468](#L468) | </div> |
| [469](#L469) | <?php |
| [470](#L470) | $content .= ob\_get\_clean(); |
| [471](#L471) | return $content; |
| [472](#L472) | } |
| [473](#L473) |  |
| [474](#L474) | public function displayUpgradeToProTab() { |
| [475](#L475) | $content = ''; |
| [476](#L476) | $upgradeToProHtml = $this->getOption('plugin-compare-table'); |
| [477](#L477) | $pluginUrl = $this->getOption('plugin-store-url'); |
| [478](#L478) | wp\_enqueue\_script('jquery-ui-tooltip'); |
| [479](#L479) | ob\_start(); |
| [480](#L480) | ?> |
| [481](#L481) | <script> |
| [482](#L482) | jQuery(document).ready(function () { |
| [483](#L483) | jQuery(".cminds-package-show-tooltip").tooltip(); |
| [484](#L484) | }); |
| [485](#L485) | </script> |
| [486](#L486) | <style type="text/css"> |
| [487](#L487) | .pricing-table ul{ |
| [488](#L488) | border-width: 1px; |
| [489](#L489) | border-style: solid; |
| [490](#L490) | border-color: #CCCCCC; |
| [491](#L491) | border-radius: 3px; |
| [492](#L492) | margin: 4px; |
| [493](#L493) | text-align: center; |
| [494](#L494) | font-family: 'Arial'; |
| [495](#L495) | list-style: none; |
| [496](#L496) | float: left; |
| [497](#L497) | padding: 4px; |
| [498](#L498) | background-color: #FFFFFF; |
| [499](#L499) | max-width: 24%; |
| [500](#L500) | } |
| [501](#L501) | .pricing-table ul li{ |
| [502](#L502) | padding: 7px; |
| [503](#L503) | background-color: #EFEFEF; |
| [504](#L504) | border-width: 2px; |
| [505](#L505) | border-color: #B83737; |
| [506](#L506) | border-radius: 0px; |
| [507](#L507) | border-bottom-width: 2px; |
| [508](#L508) | font-size: 13px; |
| [509](#L509) | } |
| [510](#L510) | .pricing-table li:nth-child(odd){ |
| [511](#L511) | background-color: transparent; |
| [512](#L512) | } |
| [513](#L513) | .pricing-table ul .heading{ |
| [514](#L514) | color: #FFFFFF; |
| [515](#L515) | background-color: #659b2e; |
| [516](#L516) | font-size: 19px; |
| [517](#L517) | text-align: center; |
| [518](#L518) | } |
| [519](#L519) | .pricing-table ul .price{ |
| [520](#L520) | font-size: 25px; |
| [521](#L521) | } |
| [522](#L522) | .pricing-table ul .action{ |
| [523](#L523) | font-size: 13px; |
| [524](#L524) | color: #FFFFFF; |
| [525](#L525) | } |
| [526](#L526) | .pricing-table .action a{ |
| [527](#L527) | border-color: #B83737; |
| [528](#L528) | border-width: 0px; |
| [529](#L529) | background-color: #659b2e; |
| [530](#L530) | padding-top: 7px; |
| [531](#L531) | padding-bottom: 7px; |
| [532](#L532) | padding-left: 15px; |
| [533](#L533) | padding-right: 15px; |
| [534](#L534) | border-style: solid; |
| [535](#L535) | color: #FFFFFF; |
| [536](#L536) | } |
| [537](#L537) | .pricing-table ul .noaction{ |
| [538](#L538) | font-size: 13px; |
| [539](#L539) | color: #FFFFFF; |
| [540](#L540) | } |
| [541](#L541) | .pricing-table .noaction span{ |
| [542](#L542) | border-color: #B83737; |
| [543](#L543) | border-width: 0px; |
| [544](#L544) | background-color: #b2b2b2; |
| [545](#L545) | padding-top: 7px; |
| [546](#L546) | padding-bottom: 7px; |
| [547](#L547) | padding-left: 15px; |
| [548](#L548) | padding-right: 15px; |
| [549](#L549) | border-style: solid; |
| [550](#L550) | color: #FFFFFF; |
| [551](#L551) | } |
| [552](#L552) |  |
| [553](#L553) | </style> |
| [554](#L554) | <br> |
| [555](#L555) | <div> |
| [556](#L556) | <?php echo $upgradeToProHtml; ?> |
| [557](#L557) | </div> |
| [558](#L558) | <?php |
| [559](#L559) | $content .= ob\_get\_clean(); |
| [560](#L560) | return $content; |
| [561](#L561) | } |
| [562](#L562) |  |
| [563](#L563) | public function displayCreativeMindsTab() { |
| [564](#L564) | $content = ''; |
| [565](#L565) | ob\_start(); |
| [566](#L566) | ?> |
| [567](#L567) | <div> |
| [568](#L568) | <a href="https://www.cminds.com/about/" class="btn button button-primary" target="\_blank">Open About Us page in a new tab</a> |
| [569](#L569) | </div> |
| [570](#L570) | <?php |
| [571](#L571) | $content .= ob\_get\_clean(); |
| [572](#L572) | return $content; |
| [573](#L573) | } |
| [574](#L574) |  |
| [575](#L575) | public function displayMembershipTab() { |
| [576](#L576) | $content = ''; |
| [577](#L577) | ob\_start(); |
| [578](#L578) | ?> |
| [579](#L579) | <div> |
| [580](#L580) | <a href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" class="btn button button-primary" target="\_blank">Open Membership Package page in a new tab</a> |
| [581](#L581) | </div> |
| [582](#L582) | <?php |
| [583](#L583) | $content .= ob\_get\_clean(); |
| [584](#L584) | return $content; |
| [585](#L585) | } |
| [586](#L586) |  |
| [587](#L587) | public function displayCMProductTab() { |
| [588](#L588) | $content = ''; |
| [589](#L589) | ob\_start(); |
| [590](#L590) |  |
| [591](#L591) | $currentIframeFilter = filter\_input(INPUT\_POST, 'cminds\_iframe\_filter'); |
| [592](#L592) | if (empty($currentIframeFilter)) { |
| [593](#L593) | $currentIframeFilter = 'Plugin'; |
| [594](#L594) | } |
| [595](#L595) | $url = remove\_query\_arg('cminds\_iframe\_filter', $\_SERVER['REQUEST\_URI']); |
| [596](#L596) | ?> |
| [597](#L597) | <div> |
| [598](#L598) | <a href="https://www.cminds.com/wordpress-plugins-library/?cat=Plugin" class="btn button button-primary" target="\_blank">Open Product Catalog in a new tab</a> |
| [599](#L599) | <form method="post" class="cminds\_iframe\_filter\_form"> |
| [600](#L600) | <span> | Filter: </span> |
| [601](#L601) | <button type="submit" name="cminds\_iframe\_filter" value="Plugin" class="btn button button-primary">Plugins</button> |
| [602](#L602) | <button type="submit" name="cminds\_iframe\_filter" value="Add-On" class="btn button button-primary">AddOns</button> |
| [603](#L603) | <button type="submit" name="cminds\_iframe\_filter" value="Bundle" class="btn button button-primary">Bundles</button> |
| [604](#L604) | <button type="submit" name="cminds\_iframe\_filter" value="Service" class="btn button button-primary">Services</button> |
| [605](#L605) | </form> |
| [606](#L606) | </div> |
| [607](#L607) | <?php |
| [608](#L608) | $content .= ob\_get\_clean(); |
| [609](#L609) | return $content; |
| [610](#L610) | } |
| [611](#L611) |  |
| [612](#L612) | public function displayCMAddOnsTab() { |
| [613](#L613) | $content = ''; |
| [614](#L614) | ob\_start(); |
| [615](#L615) | ?> |
| [616](#L616) | <div> |
| [617](#L617) | <a href="https://www.cminds.com/wordpress-plugins-library/?showfilter=No&tags=Tooltip" class="btn button button-primary" target="\_blank">Open Add-Ons page in a new tab</a> |
| [618](#L618) | </div> |
| [619](#L619) | <?php |
| [620](#L620) | $content .= ob\_get\_clean(); |
| [621](#L621) | return $content; |
| [622](#L622) | } |
| [623](#L623) |  |
| [624](#L624) | public function displayVideoGuidesTab() { |
| [625](#L625) | $content = ''; |
| [626](#L626) | ob\_start(); |
| [627](#L627) | ?> |
| [628](#L628) | <div> |
| [629](#L629) | <a href="https://www.cminds.com/cm-plugins-video-library/" class="btn button button-primary" target="\_blank">Open Video Guides page in a new tab</a> |
| [630](#L630) | </div> |
| [631](#L631) | <?php |
| [632](#L632) | $content .= ob\_get\_clean(); |
| [633](#L633) | return $content; |
| [634](#L634) | } |
| [635](#L635) |  |
| [636](#L636) | public function displaySupportTab() { |
| [637](#L637) | $content = ''; |
| [638](#L638) | $supportForumLink = $this->getOption('plugin-support-url'); |
| [639](#L639) | ob\_start(); |
| [640](#L640) | ?> |
| [641](#L641) | <div> |
| [642](#L642) | <p>WordPress supprot forum can only be viewed on WordPress.org site. Please click on the buttom to visit the forum and to submit your support questions</p> |
| [643](#L643) | <a href="<?php echo $supportForumLink; ?>" class="btn button button-primary" target="\_blank">Open WordPress Support Formum</a> |
| [644](#L644) | </div> |
| [645](#L645) | <?php |
| [646](#L646) | $content .= ob\_get\_clean(); |
| [647](#L647) | return $content; |
| [648](#L648) | } |
| [649](#L649) |  |
| [650](#L650) | public function add\_plugin\_meta\_links($meta, $file) { |
| [651](#L651) | if ($file == $this->getOption('plugin-basename')) { |
| [652](#L652) |  |
| [653](#L653) | foreach ($meta as $key => $value) { |
| [654](#L654) | if (strpos($value, 'Visit plugin site') !== FALSE) { |
| [655](#L655) | unset($meta[$key]); |
| [656](#L656) | $meta[] = sprintf('<a href="%s">%s</a>', esc\_url($this->getOption('plugin-store-url')), \_\_('Visit plugin site', 'cminds-package') |
| [657](#L657) | ); |
| [658](#L658) | break; |
| [659](#L659) | } |
| [660](#L660) | } |
| [661](#L661) |  |
| [662](#L662) | foreach ($meta as $key => $value) { |
| [663](#L663) | if (strpos($value, '<a href="') !== FALSE) { |
| [664](#L664) | $meta[$key] = str\_replace('<a href="', '<a target="\_blank" href="', $value); |
| [665](#L665) | } |
| [666](#L666) | } |
| [667](#L667) | } |
| [668](#L668) | return $meta; |
| [669](#L669) | } |
| [670](#L670) |  |
| [671](#L671) | public function add\_plugin\_action\_links($links) { |
| [672](#L672) | $settingsUrl = $this->getOption('plugin-redirect-after-install'); |
| [673](#L673) | if (!empty($settingsUrl)) { |
| [674](#L674) | $links[] = '<a href="' . esc\_url($settingsUrl) . '">Settings</a>'; |
| [675](#L675) | } |
| [676](#L676) | if (!$this->getOption('plugin-free-only')) { |
| [677](#L677) | $links[] = '<a href="' . esc\_url(admin\_url('admin.php?page=' . $this->getProSlug())) . '">Upgrade to Pro</a>'; |
| [678](#L678) | } |
| [679](#L679) | return $links; |
| [680](#L680) | } |
| [681](#L681) |  |
| [682](#L682) | public function updateMenu() { |
| [683](#L683) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('User Guide', 'cminds-package'), \_\_('User Guide', 'cminds-package'), 'manage\_options', $this->getPageSlug(), array($this, 'displayPage')); |
| [684](#L684) | if (!$this->getOption('plugin-free-only')) { |
| [685](#L685) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), 'manage\_options', $this->getProSlug(), array($this, 'displayPage')); |
| [686](#L686) | } |
| [687](#L687) |  |
| [688](#L688) | $tag = 'cminds-' . $this->getOption('plugin-short-slug') . '-license-page'; |
| [689](#L689) | $condition = has\_action($tag); |
| [690](#L690) | } |
| [691](#L691) |  |
| [692](#L692) | public function getProSlug() { |
| [693](#L693) | $slug = $this->getOption('plugin-abbrev') . '\_pro'; |
| [694](#L694) | return $slug; |
| [695](#L695) | } |
| [696](#L696) |  |
| [697](#L697) | public function getPageSlug() { |
| [698](#L698) | $slug = $this->getOption('plugin-abbrev') . '\_about'; |
| [699](#L699) | return $slug; |
| [700](#L700) | } |
| [701](#L701) |  |
| [702](#L702) | public function getLicensingSlug() { |
| [703](#L703) | $slug = $this->getOption('plugin-abbrev') . '\_licensing'; |
| [704](#L704) | return $slug; |
| [705](#L705) | } |
| [706](#L706) |  |
| [707](#L707) | public function isOwnScreen() { |
| [708](#L708) | $screen = get\_current\_screen(); |
| [709](#L709) | return (strpos($screen->base, $this->getPageSlug()) !== false || strpos($screen->base, $this->getLicensingSlug()) !== false || strpos($screen->base, $this->getProSlug()) !== false); |
| [710](#L710) | } |
| [711](#L711) |  |
| [712](#L712) | /\*\* |
| [713](#L713) | \* Load plugin styles for admin area |
| [714](#L714) | \* |
| [715](#L715) | \* @access public |
| [716](#L716) | \* @since 1.0 |
| [717](#L717) | \*/ |
| [718](#L718) | public function enqueueAdminStyles() { |
| [719](#L719) |  |
| [720](#L720) | $screen = get\_current\_screen(); |
| [721](#L721) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [722](#L722) | return; |
| [723](#L723) | } |
| [724](#L724) | wp\_enqueue\_style('jquery-ui-tabs-css', plugin\_dir\_url(\_\_FILE\_\_) . 'css/jquery-ui.min.css', array()); |
| [725](#L725) | } |
| [726](#L726) |  |
| [727](#L727) | /\*\* |
| [728](#L728) | \* Load plugin scripts for admin area |
| [729](#L729) | \* |
| [730](#L730) | \* @access public |
| [731](#L731) | \* @since 1.0 |
| [732](#L732) | \*/ |
| [733](#L733) | public function enqueueAdminScripts() { |
| [734](#L734) |  |
| [735](#L735) | $screen = get\_current\_screen(); |
| [736](#L736) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [737](#L737) | return; |
| [738](#L738) | } |
| [739](#L739) | wp\_enqueue\_script('jquery-ui-tabs'); |
| [740](#L740) | } |
| [741](#L741) |  |
| [742](#L742) | public function getUserguideUrl() { |
| [743](#L743) | $url = ''; |
| [744](#L744) | if ($this->getOption('plugin-userguide-key')) { |
| [745](#L745) | $url .= 'https://creativeminds.helpscoutdocs.com/article/' . $this->getOption('plugin-userguide-key'); |
| [746](#L746) | } else { |
| [747](#L747) | $url .= 'https://creativeminds.helpscoutdocs.com/collection/3-wordpress-plugins'; |
| [748](#L748) | } |
| [749](#L749) | return $url; |
| [750](#L750) | } |
| [751](#L751) |  |
| [752](#L752) | public function displayPage() { |
| [753](#L753) | global $plugin\_page; |
| [754](#L754) | $content = ''; |
| [755](#L755) |  |
| [756](#L756) | global $cmindsPluginPackage; |
| [757](#L757) |  |
| [758](#L758) | if (!empty($cmindsPluginPackage)) { |
| [759](#L759) | foreach ($cmindsPluginPackage as $key => $package) { |
| [760](#L760) | $isown = $package->isOwnScreen(); |
| [761](#L761) | if ($isown) { |
| [762](#L762) | $currentPlugin = $package; |
| [763](#L763) | } |
| [764](#L764) | } |
| [765](#L765) | } |
| [766](#L766) | ?> |
| [767](#L767) | <div class="wrap"> |
| [768](#L768) | <style type="text/css"> |
| [769](#L769) | .subsubsub li+li:before {content:'| ';} |
| [770](#L770) | .cminds\_system\_info\_area{ |
| [771](#L771) | width: 99.5%; |
| [772](#L772) | height: 290px; |
| [773](#L773) | } |
| [774](#L774) | .cminds\_update\_table td, |
| [775](#L775) | .cminds\_update\_table tr { |
| [776](#L776) | width: 140px; |
| [777](#L777) | text-align: left; |
| [778](#L778) | } |
| [779](#L779) | .cminds\_iframe\_filter\_form{ |
| [780](#L780) | display: inline-block; |
| [781](#L781) | } |
| [782](#L782) | .cminds\_iframe\_filter\_form > span{ |
| [783](#L783) | line-height: 28px; |
| [784](#L784) | } |
| [785](#L785) | </style> |
| [786](#L786) | <h2> |
| [787](#L787) | <div id="icon-<?php echo $currentPlugin->getOption('plugin-icon') ?>" class="icon32"> |
| [788](#L788) | <br /> |
| [789](#L789) | </div> |
| [790](#L790) | <?php echo $currentPlugin->getOption('plugin-name') ?>&nbsp; |
| [791](#L791) | <?php |
| [792](#L792) | $pluginAbbrev = $currentPlugin->getOption('plugin-abbrev'); |
| [793](#L793) | if (empty($\_GET['page']) || $\_GET['page'] != $pluginAbbrev . '\_pro') : |
| [794](#L794) | ?> |
| [795](#L795) | <a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $pluginAbbrev . '\_pro')); ?>" class="button button-primary" title="Click to Buy PRO">Upgrade to Pro</a> |
| [796](#L796) | <?php |
| [797](#L797) | endif; |
| [798](#L798) | ?> |
| [799](#L799) | </h2> |
| [800](#L800) | <?php |
| [801](#L801) | echo $currentPlugin->showNav(); |
| [802](#L802) |  |
| [803](#L803) | wp\_enqueue\_style('cminds\_package\_userguide', plugin\_dir\_url(\_\_FILE\_\_) . 'css/main.css'); |
| [804](#L804) | wp\_enqueue\_style('cminds\_package\_userguide\_font', 'https://fonts.googleapis.com/css?family=Open+Sans:400,700,300,600'); |
| [805](#L805) |  |
| [806](#L806) | switch ($plugin\_page) { |
| [807](#L807) | default: |
| [808](#L808) | case $currentPlugin->getPageSlug(): { |
| [809](#L809) | $title = \_\_('About', 'cminds-package'); |
| [810](#L810) | wp\_enqueue\_script('cmdm-mailerlite', plugin\_dir\_url(\_\_FILE\_\_) . 'js/mailerlite.js', array(), $this->getOption('plugin-version'), true); |
| [811](#L811) | ob\_start(); |
| [812](#L812) | $base\_path = $currentPlugin->getOption('plugin-dir-path'); |
| [813](#L813) | include $base\_path . 'package/views/userguide\_free.php'; |
| [814](#L814) | $content .= ob\_get\_clean(); |
| [815](#L815) | break; |
| [816](#L816) | } |
| [817](#L817) | case $currentPlugin->getProSlug(): { |
| [818](#L818) | $title = \_\_('Upgrade to Pro', 'cminds-package'); |
| [819](#L819) |  |
| [820](#L820) | ob\_start(); |
| [821](#L821) | echo $currentPlugin->displayUpgradeToProTab(); |
| [822](#L822) | $content .= ob\_get\_clean(); |
| [823](#L823) | break; |
| [824](#L824) | } |
| [825](#L825) | case $currentPlugin->getLicensingSlug(): { |
| [826](#L826) | $title = \_\_('User Guide', 'cminds-package'); |
| [827](#L827) |  |
| [828](#L828) | ob\_start(); |
| [829](#L829) | $content .= $this->showTabs($plugin\_page); |
| [830](#L830) | $content .= ob\_get\_clean(); |
| [831](#L831) | break; |
| [832](#L832) | } |
| [833](#L833) | } |
| [834](#L834) |  |
| [835](#L835) | echo apply\_filters('cminds-about-page-content', $content, $currentPlugin); |
| [836](#L836) | ?> |
| [837](#L837) | </div> |
| [838](#L838) | <?php |
| [839](#L839) | } |
| [840](#L840) |  |
| [841](#L841) | protected function showTabs($key) { |
| [842](#L842) | $class = $id = 'cminds\_' . $key . '\_tabs'; |
| [843](#L843) | ?> |
| [844](#L844) | <div id="<?php echo $id; ?>" class="<?php echo $class; ?>"> |
| [845](#L845) | <script> |
| [846](#L846) | jQuery(document).ready(function ($) { |
| [847](#L847) | $('#<?php echo $id; ?>').tabs({ |
| [848](#L848) | activate: function (event, ui) { |
| [849](#L849) | window.location.hash = ui.newPanel.attr('id').replace(/-/g, '\_'); |
| [850](#L850) | }, |
| [851](#L851) | create: function (event, ui) { |
| [852](#L852) | var tab = location.hash.replace(/\\_/g, '-'); |
| [853](#L853) | if (tab.length) |
| [854](#L854) | { |
| [855](#L855) | var tabContainer = $(ui.panel.context).find('a[href="' + tab + '"]'); |
| [856](#L856) | if (typeof tabContainer !== 'undefined' && tabContainer.length) |
| [857](#L857) | { |
| [858](#L858) | var index = tabContainer.parent().index(); |
| [859](#L859) | $(ui.panel.context).tabs('option', 'active', index); |
| [860](#L860) | } |
| [861](#L861) | } |
| [862](#L862) | } |
| [863](#L863) | }); |
| [864](#L864) | }); |
| [865](#L865) | </script> |
| [866](#L866) | <?php |
| [867](#L867) | $this->renderSettingsTabsControls($key); |
| [868](#L868) | $this->renderSettingsTabs($key); |
| [869](#L869) | ?> |
| [870](#L870) | </div> |
| [871](#L871) | <?php |
| [872](#L872) | } |
| [873](#L873) |  |
| [874](#L874) | protected function getTabsArray($key) { |
| [875](#L875) |  |
| [876](#L876) | switch ($key) { |
| [877](#L877) | default: |
| [878](#L878) | case $this->getPageSlug(): |
| [879](#L879) | $settingsTabsArrayBase = array( |
| [880](#L880) | '1'   => 'User Guide', |
| [881](#L881) | //                                              '5'              => 'Upgrade To Pro', |
| [882](#L882) | '10'  => 'About', |
| [883](#L883) | '30'  => 'Membership', |
| [884](#L884) | '40'  => 'CM Catalog', |
| [885](#L885) | '60'  => 'Video Guides', |
| [886](#L886) | '99'  => 'WordPress Support Forum', |
| [887](#L887) | '199' => 'System Information', |
| [888](#L888) | ); |
| [889](#L889) | if ($this->getOption('plugin-has-addons')) { |
| [890](#L890) | $settingsTabsArrayBase['50'] = 'Plugin Add-ons'; |
| [891](#L891) | } |
| [892](#L892) | break; |
| [893](#L893) | case $this->getLicensingSlug(): |
| [894](#L894) | $settingsTabsArrayBase = array( |
| [895](#L895) | '10' => 'License Activation', |
| [896](#L896) | '20' => 'Check Version', |
| [897](#L897) | //                                              '30' => 'Upgrade Tutorial', |
| [898](#L898) | '40' => 'Manage Your CM Products', |
| [899](#L899) | ); |
| [900](#L900) | break; |
| [901](#L901) | } |
| [902](#L902) |  |
| [903](#L903) | $settingsTabsArray = apply\_filters('cminds-' . $key . '-tabs-array', $settingsTabsArrayBase); |
| [904](#L904) |  |
| [905](#L905) | ksort($settingsTabsArray); |
| [906](#L906) | return $settingsTabsArray; |
| [907](#L907) | } |
| [908](#L908) |  |
| [909](#L909) | /\*\* |
| [910](#L910) | \* Function renders (default) or returns the setttings tabs |
| [911](#L911) | \* |
| [912](#L912) | \* @param type $return |
| [913](#L913) | \* @return string |
| [914](#L914) | \*/ |
| [915](#L915) | protected function renderSettingsTabs($key, $return = false) { |
| [916](#L916) | $content = ''; |
| [917](#L917) | $settingsTabsArray = $this->getTabsArray($key); |
| [918](#L918) |  |
| [919](#L919) | if ($settingsTabsArray) { |
| [920](#L920) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [921](#L921) | $filterName = 'cminds-' . $key . '-content-' . $tabKey; |
| [922](#L922) |  |
| [923](#L923) | $content .= '<div id="tabs-' . $tabKey . '">'; |
| [924](#L924) | $tabContent = apply\_filters($filterName, ''); |
| [925](#L925) | $content .= $tabContent; |
| [926](#L926) | $content .= '</div>'; |
| [927](#L927) | } |
| [928](#L928) | } |
| [929](#L929) |  |
| [930](#L930) | if ($return) { |
| [931](#L931) | return $content; |
| [932](#L932) | } |
| [933](#L933) | echo $content; |
| [934](#L934) | } |
| [935](#L935) |  |
| [936](#L936) | /\*\* |
| [937](#L937) | \* Function renders (default) or returns the setttings tabs |
| [938](#L938) | \* |
| [939](#L939) | \* @param type $return |
| [940](#L940) | \* @return string |
| [941](#L941) | \*/ |
| [942](#L942) | protected function renderSettingsTabsControls($key, $return = false) { |
| [943](#L943) | $content = ''; |
| [944](#L944) | $settingsTabsArray = $this->getTabsArray($key); |
| [945](#L945) |  |
| [946](#L946) | if ($settingsTabsArray) { |
| [947](#L947) | $content .= '<ul>'; |
| [948](#L948) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [949](#L949) | $content .= '<li><a href="#tabs-' . $tabKey . '">' . $tabLabel . '</a></li>'; |
| [950](#L950) | } |
| [951](#L951) | $content .= '</ul>'; |
| [952](#L952) | } |
| [953](#L953) |  |
| [954](#L954) | if ($return) { |
| [955](#L955) | return $content; |
| [956](#L956) | } |
| [957](#L957) | echo $content; |
| [958](#L958) | } |
| [959](#L959) |  |
| [960](#L960) | protected function showSharebox($mode = self::SHAREBOX\_FLAT) { |
| [961](#L961) |  |
| [962](#L962) | $class = (self::SHAREBOX\_SQUARE === $mode) ? 'square' : 'flat'; |
| [963](#L963) |  |
| [964](#L964) | $pluginReviewLink = (string) $this->getOption('plugin-review-url'); |
| [965](#L965) | $pluginFullName = (string) $this->getOption('plugin-name'); |
| [966](#L966) | $pluginUrl = (string) $this->getOption('plugin-store-url'); |
| [967](#L967) |  |
| [968](#L968) | $twitterTweet = rawurlencode('Checkout the ' . $pluginFullName . ' ( ' . $pluginUrl . ' ) #WordPress #Plugin by @CMPLUGINS'); |
| [969](#L969) |  |
| [970](#L970) | ob\_start(); |
| [971](#L971) | ?> |
| [972](#L972) |  |
| [973](#L973) | <style type="text/css"> |
| [974](#L974) |  |
| [975](#L975) | div.cminds\_call\_to\_action\_wrapper:after{ |
| [976](#L976) | content: ''; |
| [977](#L977) | display: table; |
| [978](#L978) | clear: both; |
| [979](#L979) | } |
| [980](#L980) |  |
| [981](#L981) | #mc\_embed\_signup{clear:left; width:400px;} |
| [982](#L982) | .fb\_iframe\_widget{vertical-align: top;line-height: 2em;} |
| [983](#L983) |  |
| [984](#L984) | div.cminds\_call\_to\_action.flat{ |
| [985](#L985) | display: flex; |
| [986](#L986) | text-align: left; |
| [987](#L987) | float: left; |
| [988](#L988) | margin-bottom: 10px; |
| [989](#L989) | } |
| [990](#L990) |  |
| [991](#L991) | div.cminds\_call\_to\_action.flat .inner\_box{ |
| [992](#L992) | border: 1px solid #999; |
| [993](#L993) | padding: 0 0.5em 0.5em; |
| [994](#L994) | min-width: 80px; |
| [995](#L995) | border-radius : 4px; |
| [996](#L996) | margin: 5px 0 5px 0 ; |
| [997](#L997) | } |
| [998](#L998) |  |
| [999](#L999) | div.cminds\_call\_to\_action.square{ |
| [1000](#L1000) | display: flex; |
| [1001](#L1001) | text-align: center; |
| [1002](#L1002) | } |
| [1003](#L1003) |  |
| [1004](#L1004) | div.cminds\_call\_to\_action.square .inner\_box{ |
| [1005](#L1005) | border: 1px solid #999; |
| [1006](#L1006) | padding: 0 0.5em 0.5em; |
| [1007](#L1007) | margin: 0 auto; |
| [1008](#L1008) | min-width: 290px; |
| [1009](#L1009) | } |
| [1010](#L1010) |  |
| [1011](#L1011) | div.cminds\_call\_to\_action.square .inner\_box td{ |
| [1012](#L1012) | display: block; |
| [1013](#L1013) | padding: 0; |
| [1014](#L1014) | } |
| [1015](#L1015) |  |
| [1016](#L1016) | div.cminds\_call\_to\_action a{ |
| [1017](#L1017) | text-decoration: none; |
| [1018](#L1018) | } |
| [1019](#L1019) | </style> |
| [1020](#L1020) |  |
| [1021](#L1021) | <div class="cminds\_call\_to\_action\_wrapper"> |
| [1022](#L1022) | <div class="cminds\_call\_to\_action <?php echo $class; ?>"> |
| [1023](#L1023) | <div id="fb-root"></div> |
| [1024](#L1024) | <div class="inner\_box"> |
| [1025](#L1025) | <table cellpadding="10"><tr> |
| [1026](#L1026) | <td valign="top"> |
| [1027](#L1027) | <h3><?php $this->\_e('Share your Appreciation'); ?></h3> |
| [1028](#L1028) | <a target="\_blank" href="<?php echo esc\_attr($pluginReviewLink); ?>"> |
| [1029](#L1029) | <div class="btn button"> |
| [1030](#L1030) | <div class="dashicons dashicons-share-alt2"></div><span><?php $this->\_e('Submit a review'); ?></span> |
| [1031](#L1031) | </div> |
| [1032](#L1032) | </a> |
| [1033](#L1033) | <a target="\_blank"  href="http://twitter.com/home/?status=<?php echo esc\_attr(urlencode($twitterTweet)) ?>"> |
| [1034](#L1034) | <div class="btn button"> |
| [1035](#L1035) | <div class="dashicons dashicons-twitter"></div><span><?php $this->\_e('Tweet'); ?></span> |
| [1036](#L1036) | </div> |
| [1037](#L1037) | </a> |
| [1038](#L1038) | </td><td valign="top"> |
| [1039](#L1039) | <h3><?php $this->\_e('Stay Up-to-Date'); ?></h3> |
| [1040](#L1040) | <a href="https://twitter.com/CMPLUGINS" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true"><?php $this->\_e('Follow @CMPLUGINS'); ?></a> |
| [1041](#L1041) | <script>!function (d, s, id) { |
| [1042](#L1042) | var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; |
| [1043](#L1043) | if (!d.getElementById(id)) { |
| [1044](#L1044) | js = d.createElement(s); |
| [1045](#L1045) | js.id = id; |
| [1046](#L1046) | js.src = p + '://platform.twitter.com/widgets.js'; |
| [1047](#L1047) | fjs.parentNode.insertBefore(js, fjs); |
| [1048](#L1048) | } |
| [1049](#L1049) | }(document, 'script', 'twitter-wjs'); |
| [1050](#L1050) | </script> |
| [1051](#L1051) |  |
| [1052](#L1052) | <div class="g-follow" data-annotation="none" data-height="24" data-href="https://plus.google.com/108513627228464018583" data-rel="publisher"></div> |
| [1053](#L1053) |  |
| [1054](#L1054) | <script type="text/javascript"> |
| [1055](#L1055) | (function () { |
| [1056](#L1056) | var po = document.createElement('script'); |
| [1057](#L1057) | po.type = 'text/javascript'; |
| [1058](#L1058) | po.async = true; |
| [1059](#L1059) | po.src = 'https://apis.google.com/js/platform.js'; |
| [1060](#L1060) | var s = document.getElementsByTagName('script')[0]; |
| [1061](#L1061) | s.parentNode.insertBefore(po, s); |
| [1062](#L1062) | })(); |
| [1063](#L1063) | </script> |
| [1064](#L1064) |  |
| [1065](#L1065) | <script>(function (d, s, id) { |
| [1066](#L1066) | var js, fjs = d.getElementsByTagName(s)[0]; |
| [1067](#L1067) | if (d.getElementById(id)) |
| [1068](#L1068) | return; |
| [1069](#L1069) | js = d.createElement(s); |
| [1070](#L1070) | js.id = id; |
| [1071](#L1071) | js.src = "//connect.facebook.net/en\_US/sdk.js#xfbml=1&version=v2.0"; |
| [1072](#L1072) | fjs.parentNode.insertBefore(js, fjs); |
| [1073](#L1073) | }(document, 'script', 'facebook-jssdk')); |
| [1074](#L1074) | </script> |
| [1075](#L1075) |  |
| [1076](#L1076) | <div class="fb-like" data-href="https://www.facebook.com/cmplugins" data-width="100" data-layout="button" data-action="like" data-show-faces="true" data-share="true"></div> |
| [1077](#L1077) |  |
| [1078](#L1078) | <br/> |
| [1079](#L1079) | </td> |
| [1080](#L1080) | <td valign="top"> |
| [1081](#L1081) | <!-- Begin MailChimp Signup Form --> |
| [1082](#L1082) | <div id="mc\_embed\_signup"> |
| [1083](#L1083) | <form action="//cminds.us3.list-manage.com/subscribe/post?u=f48254f757fafba2669ae5918&amp;id=142732cbf9" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="\_blank" novalidate> |
| [1084](#L1084) | <div id="mc\_embed\_signup\_scroll"> |
| [1085](#L1085) | <h3 for="mce-EMAIL"><?php $this->\_e('CM Newsletter - coupons, deals, news'); ?></h3> |
| [1086](#L1086) | <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required> |
| [1087](#L1087) | <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn button"> |
| [1088](#L1088) | <span style="display:inline-block; position: relative"><div class="cmtt\_field\_message" title="We only send newsletters a couple of times a year. They include great deals, promo codes and information about our new plugins!"></div></span> |
| [1089](#L1089) | <!-- real people should not fill this in and expect good things - do not remove this or risk fsorm bot signups--> |
| [1090](#L1090) | <div style="position: absolute; left: -5000px;"><input type="text" name="b\_f48254f757fafba2669ae5918\_142732cbf9" tabindex="-1" value=""></div> |
| [1091](#L1091) | <div class="clear"></div> |
| [1092](#L1092) | </div> |
| [1093](#L1093) | </form> |
| [1094](#L1094) | </div> |
| [1095](#L1095) | <!--End mc\_embed\_signup--> |
| [1096](#L1096) | </td> |
| [1097](#L1097) | </tr> |
| [1098](#L1098) | </table> |
| [1099](#L1099) | </div> |
| [1100](#L1100) | </div> |
| [1101](#L1101) | </div> |
| [1102](#L1102) | <?php |
| [1103](#L1103) | ob\_end\_flush(); |
| [1104](#L1104) | } |
| [1105](#L1105) |  |
| [1106](#L1106) | /\*\* |
| [1107](#L1107) | \* Function returns the ads for the users who volunteered to register (optional step) |
| [1108](#L1108) | \* It communicates with our own server to download the current promotions |
| [1109](#L1109) | \* |
| [1110](#L1110) | \* @return boolean |
| [1111](#L1111) | \*/ |
| [1112](#L1112) | protected function getAds() { |
| [1113](#L1113) | $connectionProblem = false; |
| [1114](#L1114) | $ads\_arr = get\_transient('cminds\_free\_ads'); |
| [1115](#L1115) | if (empty($ads\_arr) && !is\_array($ads\_arr)) { |
| [1116](#L1116) | $args = array( |
| [1117](#L1117) | 'body' => array() |
| [1118](#L1118) | ); |
| [1119](#L1119) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1120](#L1120) | $response = wp\_remote\_post($href, $args); |
| [1121](#L1121) | if (!is\_wp\_error($response)) { |
| [1122](#L1122) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1123](#L1123) | } else { |
| [1124](#L1124) | $args['sslverify'] = false; |
| [1125](#L1125) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1126](#L1126) | $response = wp\_remote\_post($href, $args); |
| [1127](#L1127) | if (!is\_wp\_error($response)) { |
| [1128](#L1128) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1129](#L1129) | } else { |
| [1130](#L1130) | $ads = array(); |
| [1131](#L1131) | $connectionProblem = true; |
| [1132](#L1132) | } |
| [1133](#L1133) | } |
| [1134](#L1134) | $ads\_arr = array( |
| [1135](#L1135) | 'ads'          => $ads, |
| [1136](#L1136) | 'refresh\_time' => time(), |
| [1137](#L1137) | 'connection'   => !$connectionProblem, |
| [1138](#L1138) | ); |
| [1139](#L1139) | set\_transient('cminds\_free\_ads', $ads\_arr, self::ADS\_REFRESH\_INTERVAL); |
| [1140](#L1140) | } |
| [1141](#L1141) | /\* |
| [1142](#L1142) | \* Update from old version |
| [1143](#L1143) | \*/ |
| [1144](#L1144) | if (!isset($ads\_arr['ads']) && !isset($ads\_arr['refresh\_time'])) { |
| [1145](#L1145) | $temp\_ads\_arr = $ads\_arr; |
| [1146](#L1146) | $ads\_arr = array( |
| [1147](#L1147) | 'ads'          => $temp\_ads\_arr, |
| [1148](#L1148) | 'refresh\_time' => strtotime('-10 DAYS'), |
| [1149](#L1149) | 'connection'   => TRUE, |
| [1150](#L1150) | ); |
| [1151](#L1151) | } |
| [1152](#L1152) | /\* |
| [1153](#L1153) | \* Update from old version |
| [1154](#L1154) | \*/ |
| [1155](#L1155) | if (!isset($ads\_arr['connection'])) { |
| [1156](#L1156) | $ads\_arr['connection'] = TRUE; |
| [1157](#L1157) | } |
| [1158](#L1158) | return $ads\_arr; |
| [1159](#L1159) | } |
| [1160](#L1160) |  |
| [1161](#L1161) | public function getStoreUrl($args = array()) { |
| [1162](#L1162) | $category = isset($args['category']) ? $args['category'] : 'All'; |
| [1163](#L1163) | $storeUrl = $this->addAffiliateCode($this->getCategoryLink('Wordpress', 'category', $category)); |
| [1164](#L1164) | return esc\_url($storeUrl); |
| [1165](#L1165) | } |
| [1166](#L1166) |  |
| [1167](#L1167) | public function getCategoryLink($group, $type, $name) { |
| [1168](#L1168) | $categoryLinks = array( |
| [1169](#L1169) | 'Wordpress' => array( |
| [1170](#L1170) | 'category' => array( |
| [1171](#L1171) | 'All'     => '/wordpress-plugins-library/', |
| [1172](#L1172) | 'Plugin'  => '/wordpress-plugins/', |
| [1173](#L1173) | 'Service' => '/wordpress-maintenance-services/', |
| [1174](#L1174) | 'Add-On'  => '/wordpress-add-ons/', |
| [1175](#L1175) | 'Bundle'  => '/wordpress-plugins-bundles/'), |
| [1176](#L1176) | 'tags'     => array( |
| [1177](#L1177) | 'SEO'        => '/wordpress-seo-content-plugins/', |
| [1178](#L1178) | 'Business'   => '/plugins-for-wordpress-business-websites/', |
| [1179](#L1179) | 'Publishing' => '/wordpress-plugins-for-content-publishing/', |
| [1180](#L1180) | 'Free'       => '/free-wordpress-plugins/', |
| [1181](#L1181) | 'eCommerce'  => '/wordpress-e-commerce-plugins/', |
| [1182](#L1182) | 'Marketing'  => '/wordpress-plugins-for-marketers/', |
| [1183](#L1183) | 'Admin'      => '/admin-wordpress-plugins/', |
| [1184](#L1184) | 'Community'  => '/wordpress-community-plugins/', |
| [1185](#L1185) | 'eLearning'  => '/wordpress-e-learning-and-lms-plugins/', |
| [1186](#L1186) | ) |
| [1187](#L1187) | ), |
| [1188](#L1188) | 'Magento'   => array( |
| [1189](#L1189) | 'category' => array( |
| [1190](#L1190) | 'All'       => '/magento-extensions-and-modules/', |
| [1191](#L1191) | 'Extension' => '/ecommerce-extensions-store/', |
| [1192](#L1192) | 'Service'   => '/support-and-maintenance-services-for-magento/', |
| [1193](#L1193) | 'Bundle'    => '/extensions-bundles-magento/'), |
| [1194](#L1194) | 'tags'     => array( |
| [1195](#L1195) | 'Customer'     => '/magento-customer-care-support/', |
| [1196](#L1196) | 'Integrations' => '/magento-third-party-integration-extensions/', |
| [1197](#L1197) | 'Marketing'    => '/magento-marketing-extensions/', |
| [1198](#L1198) | 'Marketplace'  => '/magento-marketplace-extensions/', |
| [1199](#L1199) | 'Marketplaces' => '/magento-marketplace-extensions/', |
| [1200](#L1200) | 'Utilities'    => '/magento-utilities-extensions/', |
| [1201](#L1201) | 'Magento-2'    => '/magento-2-extensions/', |
| [1202](#L1202) | '2.0'          => '/magento-2-extensions/' |
| [1203](#L1203) | ) |
| [1204](#L1204) | ) |
| [1205](#L1205) | ); |
| [1206](#L1206) |  |
| [1207](#L1207) | $link = null; |
| [1208](#L1208) | $types = array('category', 'tags'); |
| [1209](#L1209) | if (in\_array($type, $types)) { |
| [1210](#L1210) | $link = isset($categoryLinks[$group][$type][$name]) ? $categoryLinks[$group][$type][$name] : null; |
| [1211](#L1211) | } |
| [1212](#L1212) |  |
| [1213](#L1213) | if (!is\_string($link)) { |
| [1214](#L1214) | $link = ('Wordpress' === $group) ? '/wordpress-plugins-library/?' . $type . '=' . $name : '/magento-extensions-and-modules/?' . $type . '=' . $name; |
| [1215](#L1215) | } |
| [1216](#L1216) |  |
| [1217](#L1217) | $link = 'https://www.cminds.com' . $link; |
| [1218](#L1218) | return $link; |
| [1219](#L1219) | } |
| [1220](#L1220) |  |
| [1221](#L1221) | public function addAffiliateCode($link) { |
| [1222](#L1222) | if ($this->getOption('plugin-affiliate')) { |
| [1223](#L1223) | $link = add\_query\_arg(array('af' => $this->getOption('plugin-affiliate')), $link); |
| [1224](#L1224) | } |
| [1225](#L1225) | return esc\_url($link); |
| [1226](#L1226) | } |
| [1227](#L1227) |  |
| [1228](#L1228) | public function showGuide($atts = array()) { |
| [1229](#L1229) | global $cmindsPluginPackage; |
| [1230](#L1230) |  |
| [1231](#L1231) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1232](#L1232) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1233](#L1233) |  |
| [1234](#L1234) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-guide-hidden'; |
| [1235](#L1235) | $guideHide = filter\_input(INPUT\_GET, 'cminds\_guide\_hide'); |
| [1236](#L1236) | if ($guideHide) { |
| [1237](#L1237) | update\_option($optionName, 1); |
| [1238](#L1238) | } |
| [1239](#L1239) | $guideShow = filter\_input(INPUT\_GET, 'cminds\_guide\_show'); |
| [1240](#L1240) | if ($guideShow) { |
| [1241](#L1241) | update\_option($optionName, 0); |
| [1242](#L1242) | } |
| [1243](#L1243) | $guideHidden = get\_option($optionName, 0); |
| [1244](#L1244) |  |
| [1245](#L1245) | $showGuide = $currentPlugin->getOption('plugin-show-guide'); |
| [1246](#L1246) | if ($showGuide) : |
| [1247](#L1247) | ob\_start(); |
| [1248](#L1248) | ?><style type="text/css"> |
| [1249](#L1249) |  |
| [1250](#L1250) | div.cminds\_guide\_wrapper { |
| [1251](#L1251) | display: inline-block; |
| [1252](#L1252) | padding: 0em 0em 1em 1em; |
| [1253](#L1253) | background: #FFF; |
| [1254](#L1254) | margin: 0em 0em 0 0; |
| [1255](#L1255) | vertical-align: top; |
| [1256](#L1256) | } |
| [1257](#L1257) |  |
| [1258](#L1258) | div.cminds\_guide\_wrapper \* { |
| [1259](#L1259) | vertical-align: top; |
| [1260](#L1260) | } |
| [1261](#L1261) |  |
| [1262](#L1262) | .cminds\_guide{ |
| [1263](#L1263) | display: inline-block; |
| [1264](#L1264) | margin: 1em; |
| [1265](#L1265) | padding: 1em; |
| [1266](#L1266) | } |
| [1267](#L1267) |  |
| [1268](#L1268) | .cminds\_guide\_text{ |
| [1269](#L1269) | display: inline-block; |
| [1270](#L1270) | margin: 1em; |
| [1271](#L1271) | } |
| [1272](#L1272) |  |
| [1273](#L1273) | .cminds\_guide\_text > span{ |
| [1274](#L1274) | text-align: left; |
| [1275](#L1275) | display: block; |
| [1276](#L1276) | } |
| [1277](#L1277) |  |
| [1278](#L1278) | .clear, .clearfix{ |
| [1279](#L1279) | clear: both; |
| [1280](#L1280) | } |
| [1281](#L1281) |  |
| [1282](#L1282) | .cmclearfix{ |
| [1283](#L1283) | clear: both !important; |
| [1284](#L1284) | } |
| [1285](#L1285) |  |
| [1286](#L1286) | .cminds\_guide .guide\_header{ |
| [1287](#L1287) | font-size: 14pt; |
| [1288](#L1288) | font-weight: bold; |
| [1289](#L1289) | } |
| [1290](#L1290) |  |
| [1291](#L1291) | .cminds\_guide .guide\_text{ |
| [1292](#L1292) | display: inline-block; |
| [1293](#L1293) | width: 509px; |
| [1294](#L1294) | max-width: 100%; |
| [1295](#L1295) | margin-right: 40px; |
| [1296](#L1296) | } |
| [1297](#L1297) |  |
| [1298](#L1298) | .cminds\_guide .guide\_videos{ |
| [1299](#L1299) | display: inline-block; |
| [1300](#L1300) | max-width: 100%; |
| [1301](#L1301) | overflow: hidden; |
| [1302](#L1302) | } |
| [1303](#L1303) |  |
| [1304](#L1304) | .cminds\_guide .guide\_videos .guide\_videos\_inner{ |
| [1305](#L1305) | } |
| [1306](#L1306) |  |
| [1307](#L1307) | .cminds\_guide .guide\_videos > div{ |
| [1308](#L1308) | display: inline-block; |
| [1309](#L1309) | } |
| [1310](#L1310) | .cminds\_guide .guide\_videos > div.guide\_videos\_after{ |
| [1311](#L1311) | display: block; |
| [1312](#L1312) | margin: 10px 0 0 52px; |
| [1313](#L1313) | } |
| [1314](#L1314) | .prev\_video, |
| [1315](#L1315) | .next\_video { |
| [1316](#L1316) | margin-top: 85px; |
| [1317](#L1317) | } |
| [1318](#L1318) |  |
| [1319](#L1319) | .guide\_video\_title { |
| [1320](#L1320) | font-size: 13pt; |
| [1321](#L1321) | font-weight: bold; |
| [1322](#L1322) | margin: 0 0 10px 0px; |
| [1323](#L1323) | } |
| [1324](#L1324) |  |
| [1325](#L1325) | .cminds\_link.blue { |
| [1326](#L1326) | color: #fff; |
| [1327](#L1327) | border-color: #33ace7; |
| [1328](#L1328) | background: #66c1ed; |
| [1329](#L1329) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1330](#L1330) | box-shadow: 0 1px 0 #ccc; |
| [1331](#L1331) | display: inline-block; |
| [1332](#L1332) | text-decoration: none; |
| [1333](#L1333) | line-height: 26px; |
| [1334](#L1334) | height: 28px; |
| [1335](#L1335) | padding: 0 10px 1px; |
| [1336](#L1336) | cursor: pointer; |
| [1337](#L1337) | border-width: 1px; |
| [1338](#L1338) | border-style: solid; |
| [1339](#L1339) | -webkit-border-radius: 3px; |
| [1340](#L1340) | border-radius: 3px; |
| [1341](#L1341) | -webkit-box-sizing: border-box; |
| [1342](#L1342) | -moz-box-sizing: border-box; |
| [1343](#L1343) | box-sizing: border-box; |
| [1344](#L1344) | } |
| [1345](#L1345) |  |
| [1346](#L1346) | .cminds\_guide .guide\_videos .guide\_video{ |
| [1347](#L1347) | display: none; |
| [1348](#L1348) | } |
| [1349](#L1349) | .cminds\_guide .guide\_videos .guide\_video.active{ |
| [1350](#L1350) | display: inline-block; |
| [1351](#L1351) | } |
| [1352](#L1352) |  |
| [1353](#L1353) | .cminds\_guide .guide\_video\_content > a{ |
| [1354](#L1354) | display: block; |
| [1355](#L1355) | } |
| [1356](#L1356) | .install-guide-video {max-height: 160px;} |
| [1357](#L1357) | .upgrage-guide-video {max-height: 255px;} |
| [1358](#L1358) | </style> |
| [1359](#L1359) | <?php |
| [1360](#L1360) | if (!$guideHidden) : |
| [1361](#L1361) | ?> |
| [1362](#L1362) | <script> |
| [1363](#L1363) | jQuery(document).ready(function () { |
| [1364](#L1364) |  |
| [1365](#L1365) | jQuery.fn.visible = function () { |
| [1366](#L1366) | return this.css('visibility', 'visible'); |
| [1367](#L1367) | }; |
| [1368](#L1368) |  |
| [1369](#L1369) | jQuery.fn.invisible = function () { |
| [1370](#L1370) | return this.css('visibility', 'hidden'); |
| [1371](#L1371) | }; |
| [1372](#L1372) |  |
| [1373](#L1373) | jQuery.fn.visibilityToggle = function () { |
| [1374](#L1374) | return this.css('visibility', function (i, visibility) { |
| [1375](#L1375) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1376](#L1376) | }); |
| [1377](#L1377) | }; |
| [1378](#L1378) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1379](#L1379) | var prevVisible = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video').length; |
| [1380](#L1380) | var nextVisible = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video').length; |
| [1381](#L1381) |  |
| [1382](#L1382) | if (prevVisible) { |
| [1383](#L1383) | jQuery('.guide\_videos .prev\_video').visible(); |
| [1384](#L1384) | } else { |
| [1385](#L1385) | jQuery('.guide\_videos .prev\_video').invisible(); |
| [1386](#L1386) | } |
| [1387](#L1387) |  |
| [1388](#L1388) | if (nextVisible) { |
| [1389](#L1389) | jQuery('.guide\_videos .next\_video').visible(); |
| [1390](#L1390) | } else { |
| [1391](#L1391) | jQuery('.guide\_videos .next\_video').invisible(); |
| [1392](#L1392) | } |
| [1393](#L1393) | }; |
| [1394](#L1394) |  |
| [1395](#L1395) | cminds\_video\_prev\_next\_toggle(); |
| [1396](#L1396) |  |
| [1397](#L1397) | jQuery('.guide\_videos .prev\_video').on('click', function () { |
| [1398](#L1398) | var prevVideo = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video'); |
| [1399](#L1399) | if (prevVideo.length) |
| [1400](#L1400) | { |
| [1401](#L1401) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1402](#L1402) | prevVideo.addClass('active'); |
| [1403](#L1403) | } |
| [1404](#L1404) | cminds\_video\_prev\_next\_toggle(); |
| [1405](#L1405) | }); |
| [1406](#L1406) |  |
| [1407](#L1407) | jQuery('.guide\_videos .next\_video').on('click', function () { |
| [1408](#L1408) | var nextVideo = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video'); |
| [1409](#L1409) | if (nextVideo.length) |
| [1410](#L1410) | { |
| [1411](#L1411) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1412](#L1412) | nextVideo.addClass('active'); |
| [1413](#L1413) | } |
| [1414](#L1414) | cminds\_video\_prev\_next\_toggle(); |
| [1415](#L1415) | }); |
| [1416](#L1416) | }); |
| [1417](#L1417) | </script> |
| [1418](#L1418) | <div class="clear clearfix cmclearfix"></div> |
| [1419](#L1419) | <div class="cminds\_guide\_wrapper"> |
| [1420](#L1420) | <div class="cminds\_guide"> |
| [1421](#L1421) |  |
| [1422](#L1422) | <?php |
| [1423](#L1423) | $guideText = $currentPlugin->getOption('plugin-guide-text'); |
| [1424](#L1424) | if (!empty($guideText)) : |
| [1425](#L1425) | ?> |
| [1426](#L1426) | <div class="guide\_text"> |
| [1427](#L1427) | <div class="guide\_header"> |
| [1428](#L1428) | Initial Installation Guide |
| [1429](#L1429) | </div> |
| [1430](#L1430) | <?php echo $guideText; ?> |
| [1431](#L1431) | </div> |
| [1432](#L1432) | <?php endif; ?> |
| [1433](#L1433) |  |
| [1434](#L1434) | <?php |
| [1435](#L1435) | $videos = $currentPlugin->getOption('plugin-guide-videos'); |
| [1436](#L1436) | if (!empty($videos) && is\_array($videos)) : |
| [1437](#L1437) | ?> |
| [1438](#L1438) | <div class="guide\_videos"> |
| [1439](#L1439) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1440](#L1440) | <div class="guide\_videos\_inner"> |
| [1441](#L1441) | <?php foreach ($videos as $key => $video) : ?> |
| [1442](#L1442) | <div class="guide\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1443](#L1443) | <div class="guide\_video\_title"><?php echo $video['title']; ?></div> |
| [1444](#L1444) | <?php |
| [1445](#L1445) | // echo do\_shortcode('[video src="https://player.vimeo.com/video/' . $video['video\_id'] . '?portrait=0&responsive=0&maxwidth=290&maxheight=160&player\_id=player\_2" width="290" height="160" id="palyer\_2"][/video]'); |
| [1446](#L1446) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="290" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1447](#L1447) | //                                                                                                              echo wp\_video\_shortcode(array('src' =>"https://player.vimeo.com/video/" . $video['video\_id'] . "?portrait=0&responsive=1&maxheight=160&player\_id=player\_2", 'width' => 463, 'height' => 255, 'class' => "install-guide-video wp-video-shortcode", 'id' => "palyer\_2")); |
| [1448](#L1448) | ?> |
| [1449](#L1449) | </div> |
| [1450](#L1450) | <?php endforeach; ?> |
| [1451](#L1451) | </div> |
| [1452](#L1452) | <div class="next\_video cminds\_link blue" style="visibility: hidden">Next</div> |
| [1453](#L1453) | <div class="guide\_videos\_after"> |
| [1454](#L1454) | <a href="<?php echo $currentPlugin->getPageUrl('about'); ?>" class="cminds\_link blue" target="\_blank">Open Plugin User Guide</a> |
| [1455](#L1455) | </div> |
| [1456](#L1456) | </div> |
| [1457](#L1457) | <?php endif; ?> |
| [1458](#L1458) | </div> |
| [1459](#L1459) | </div> |
| [1460](#L1460) | <div class="clear clearfix cmclearfix"></div> |
| [1461](#L1461) | <?php else : ?> |
| [1462](#L1462) | <div class="cminds\_guide\_wrapper"> |
| [1463](#L1463) | <div> |
| [1464](#L1464) | <a class="cminds-guide-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_guide\_show' => 1), remove\_query\_arg('cminds\_guide\_hide'))); ?>">Show Installation Guide Box</a> |
| [1465](#L1465) | </div> |
| [1466](#L1466) | </div> |
| [1467](#L1467) | <div class="clear clearfix cmclearfix"></div> |
| [1468](#L1468) | <?php |
| [1469](#L1469) | endif; |
| [1470](#L1470) | ?> |
| [1471](#L1471) |  |
| [1472](#L1472) | <?php |
| [1473](#L1473) | $content = ob\_get\_clean(); |
| [1474](#L1474) | return $content; |
| [1475](#L1475) | endif; |
| [1476](#L1476) | } |
| [1477](#L1477) |  |
| [1478](#L1478) | public function showActivation($atts = array()) { |
| [1479](#L1479) | global $cmindsPluginPackage; |
| [1480](#L1480) |  |
| [1481](#L1481) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1482](#L1482) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1483](#L1483) |  |
| [1484](#L1484) | ob\_start(); |
| [1485](#L1485) | $isRegistered = $currentPlugin->isRegistered(); |
| [1486](#L1486) | $isSkipped = $currentPlugin->isSkipped(); |
| [1487](#L1487) | $isRegistered = false; |
| [1488](#L1488) | if (!$isRegistered) : |
| [1489](#L1489) | include\_once 'views/registration.php'; |
| [1490](#L1490) | else: |
| [1491](#L1491) | ?> |
| [1492](#L1492) | <br/> |
| [1493](#L1493) | <br/> |
| [1494](#L1494) | <?php |
| [1495](#L1495) | endif; |
| [1496](#L1496) | $content = ob\_get\_clean(); |
| [1497](#L1497) | return $content; |
| [1498](#L1498) | } |
| [1499](#L1499) |  |
| [1500](#L1500) | public function time\_to\_decimal($time) { |
| [1501](#L1501) | $timeArr = explode(':', $time); |
| [1502](#L1502) | $decTime = ($timeArr[0] \* 60) + ($timeArr[1]); |
| [1503](#L1503) | if (isset($timeArr[2])) { |
| [1504](#L1504) | $decTime += $timeArr[2] / 60; |
| [1505](#L1505) | } |
| [1506](#L1506) | return $decTime; |
| [1507](#L1507) | } |
| [1508](#L1508) |  |
| [1509](#L1509) | public function showUpgrade($atts = array()) { |
| [1510](#L1510) | global $cmindsPluginPackage; |
| [1511](#L1511) |  |
| [1512](#L1512) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1513](#L1513) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1514](#L1514) |  |
| [1515](#L1515) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-upgrade-hidden'; |
| [1516](#L1516) | $upgradeHide = filter\_input(INPUT\_GET, 'cminds\_upgrade\_hide'); |
| [1517](#L1517) | if ($upgradeHide) { |
| [1518](#L1518) | update\_option($optionName, 1); |
| [1519](#L1519) | } |
| [1520](#L1520) | $upgradeShow = filter\_input(INPUT\_GET, 'cminds\_upgrade\_show'); |
| [1521](#L1521) | if ($upgradeShow) { |
| [1522](#L1522) | update\_option($optionName, 0); |
| [1523](#L1523) | } |
| [1524](#L1524) | $upgradeHidden = get\_option($optionName, 0); |
| [1525](#L1525) | $isRegistered = $currentPlugin->isRegistered(); |
| [1526](#L1526) |  |
| [1527](#L1527) | $showUpgrade = $currentPlugin->getOption('plugin-show-upgrade', TRUE); |
| [1528](#L1528) | if ($showUpgrade) : |
| [1529](#L1529) | ob\_start(); |
| [1530](#L1530) | ?><style type="text/css"> |
| [1531](#L1531) |  |
| [1532](#L1532) | div.cminds\_upgrade\_wrapper { |
| [1533](#L1533) | display: block; |
| [1534](#L1534) | padding: 0em 0em 1em 1em; |
| [1535](#L1535) | background: #FFF; |
| [1536](#L1536) | margin: 0em 1em 0 0; |
| [1537](#L1537) | vertical-align: top; |
| [1538](#L1538) | } |
| [1539](#L1539) |  |
| [1540](#L1540) | div.cminds\_upgrade\_wrapper \* { |
| [1541](#L1541) | vertical-align: top; |
| [1542](#L1542) | } |
| [1543](#L1543) |  |
| [1544](#L1544) | .cminds\_upgrade{ |
| [1545](#L1545) | display: inline-block; |
| [1546](#L1546) | margin: 1em; |
| [1547](#L1547) | padding: 1em; |
| [1548](#L1548) | width: 100%; |
| [1549](#L1549) | } |
| [1550](#L1550) |  |
| [1551](#L1551) | .cminds\_upgrade\_text{ |
| [1552](#L1552) | display: inline-block; |
| [1553](#L1553) | margin: 1em; |
| [1554](#L1554) | } |
| [1555](#L1555) |  |
| [1556](#L1556) | .cminds\_upgrade\_text > span{ |
| [1557](#L1557) | text-align: left; |
| [1558](#L1558) | display: block; |
| [1559](#L1559) | } |
| [1560](#L1560) |  |
| [1561](#L1561) | .clear, .clearfix{ |
| [1562](#L1562) | clear: both; |
| [1563](#L1563) | } |
| [1564](#L1564) |  |
| [1565](#L1565) | .cmclearfix{ |
| [1566](#L1566) | clear: both !important; |
| [1567](#L1567) | } |
| [1568](#L1568) |  |
| [1569](#L1569) | .cminds\_upgrade .upgrade\_header{ |
| [1570](#L1570) | font-size: 14pt; |
| [1571](#L1571) | font-weight: bold; |
| [1572](#L1572) | } |
| [1573](#L1573) |  |
| [1574](#L1574) | .cminds\_upgrade .upgrade\_text{ |
| [1575](#L1575) | display: inline-block; |
| [1576](#L1576) | max-width: 45%; |
| [1577](#L1577) | margin-right: 40px; |
| [1578](#L1578) | } |
| [1579](#L1579) |  |
| [1580](#L1580) | .cminds\_upgrade .upgrade\_videos{ |
| [1581](#L1581) | display: inline-flex; |
| [1582](#L1582) | max-width: 50%; |
| [1583](#L1583) | min-width: 520px; |
| [1584](#L1584) | overflow: hidden; |
| [1585](#L1585) | } |
| [1586](#L1586) |  |
| [1587](#L1587) | .cminds\_upgrade .upgrade\_videos .upgrade\_videos\_inner{ |
| [1588](#L1588) | } |
| [1589](#L1589) |  |
| [1590](#L1590) | .cminds\_upgrade .upgrade\_videos > div{ |
| [1591](#L1591) | display: inline-block; |
| [1592](#L1592) | } |
| [1593](#L1593) | .cminds\_upgrade .upgrade\_videos > div.upgrade\_videos\_after{ |
| [1594](#L1594) | display: block; |
| [1595](#L1595) | margin: 10px 0 0 0px; |
| [1596](#L1596) | } |
| [1597](#L1597) | .prev\_video, |
| [1598](#L1598) | .next\_video { |
| [1599](#L1599) | margin-top: 15px; |
| [1600](#L1600) | } |
| [1601](#L1601) |  |
| [1602](#L1602) | .upgrade\_video\_title { |
| [1603](#L1603) | font-size: 13pt; |
| [1604](#L1604) | font-weight: bold; |
| [1605](#L1605) | margin: 0 0 10px 0px; |
| [1606](#L1606) | } |
| [1607](#L1607) |  |
| [1608](#L1608) | .cminds\_link.blue { |
| [1609](#L1609) | color: #fff; |
| [1610](#L1610) | border-color: #33ace7; |
| [1611](#L1611) | background: #66c1ed; |
| [1612](#L1612) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1613](#L1613) | box-shadow: 0 1px 0 #ccc; |
| [1614](#L1614) | display: inline-block; |
| [1615](#L1615) | text-decoration: none; |
| [1616](#L1616) | line-height: 26px; |
| [1617](#L1617) | height: 28px; |
| [1618](#L1618) | padding: 0 10px 1px; |
| [1619](#L1619) | cursor: pointer; |
| [1620](#L1620) | border-width: 1px; |
| [1621](#L1621) | border-style: solid; |
| [1622](#L1622) | -webkit-border-radius: 3px; |
| [1623](#L1623) | border-radius: 3px; |
| [1624](#L1624) | -webkit-box-sizing: border-box; |
| [1625](#L1625) | -moz-box-sizing: border-box; |
| [1626](#L1626) | box-sizing: border-box; |
| [1627](#L1627) | } |
| [1628](#L1628) |  |
| [1629](#L1629) | .cminds\_upgrade .upgrade\_videos .upgrade\_video{ |
| [1630](#L1630) | display: none; |
| [1631](#L1631) | } |
| [1632](#L1632) | .cminds\_upgrade .upgrade\_videos .upgrade\_video.active{ |
| [1633](#L1633) | display: inline-block; |
| [1634](#L1634) | } |
| [1635](#L1635) |  |
| [1636](#L1636) | .cminds\_upgrade .upgrade\_video\_content > a{ |
| [1637](#L1637) | display: block; |
| [1638](#L1638) | } |
| [1639](#L1639) | </style> |
| [1640](#L1640) | <?php |
| [1641](#L1641) | if (!$upgradeHidden) : |
| [1642](#L1642) | ?> |
| [1643](#L1643) | <script> |
| [1644](#L1644) | jQuery(document).ready(function () { |
| [1645](#L1645) |  |
| [1646](#L1646) | jQuery.fn.visible = function () { |
| [1647](#L1647) | return this.css('visibility', 'visible'); |
| [1648](#L1648) | }; |
| [1649](#L1649) |  |
| [1650](#L1650) | jQuery.fn.invisible = function () { |
| [1651](#L1651) | return this.css('visibility', 'hidden'); |
| [1652](#L1652) | }; |
| [1653](#L1653) |  |
| [1654](#L1654) | jQuery.fn.visibilityToggle = function () { |
| [1655](#L1655) | return this.css('visibility', function (i, visibility) { |
| [1656](#L1656) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1657](#L1657) | }); |
| [1658](#L1658) | }; |
| [1659](#L1659) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1660](#L1660) | var prevVisible = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video').length; |
| [1661](#L1661) | var nextVisible = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video').length; |
| [1662](#L1662) |  |
| [1663](#L1663) | if (prevVisible) { |
| [1664](#L1664) | jQuery('.upgrade\_videos .prev\_video').visible(); |
| [1665](#L1665) | } else { |
| [1666](#L1666) | jQuery('.upgrade\_videos .prev\_video').invisible(); |
| [1667](#L1667) | } |
| [1668](#L1668) |  |
| [1669](#L1669) | if (nextVisible) { |
| [1670](#L1670) | jQuery('.upgrade\_videos .next\_video').visible(); |
| [1671](#L1671) | } else { |
| [1672](#L1672) | jQuery('.upgrade\_videos .next\_video').invisible(); |
| [1673](#L1673) | } |
| [1674](#L1674) | }; |
| [1675](#L1675) |  |
| [1676](#L1676) | cminds\_video\_prev\_next\_toggle(); |
| [1677](#L1677) |  |
| [1678](#L1678) | jQuery('.upgrade\_videos .prev\_video').on('click', function () { |
| [1679](#L1679) | var prevVideo = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video'); |
| [1680](#L1680) | if (prevVideo.length) |
| [1681](#L1681) | { |
| [1682](#L1682) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1683](#L1683) | prevVideo.addClass('active'); |
| [1684](#L1684) | } |
| [1685](#L1685) | cminds\_video\_prev\_next\_toggle(); |
| [1686](#L1686) | }); |
| [1687](#L1687) |  |
| [1688](#L1688) | jQuery('.upgrade\_videos .next\_video').on('click', function () { |
| [1689](#L1689) | var nextVideo = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video'); |
| [1690](#L1690) | if (nextVideo.length) |
| [1691](#L1691) | { |
| [1692](#L1692) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1693](#L1693) | nextVideo.addClass('active'); |
| [1694](#L1694) | } |
| [1695](#L1695) | cminds\_video\_prev\_next\_toggle(); |
| [1696](#L1696) | }); |
| [1697](#L1697) | });</script> |
| [1698](#L1698) | <script type="text/javascript" src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>js/froogaloop.js"></script> |
| [1699](#L1699) | <script> |
| [1700](#L1700) | jQuery(document).ready(function ( ) { |
| [1701](#L1701) | // Message displayed when link is playing |
| [1702](#L1702) | var links = jQuery('.cm-video-bookmark-link'); |
| [1703](#L1703) | var playNotice = ' - <strong><i><spam style="color:darkgreen;">Now playing</span></i></strong>'; |
| [1704](#L1704) | // Function to hide all status messages |
| [1705](#L1705) | hidePlayNoticeAll = function ( ) { |
| [1706](#L1706) | jQuery('.cm-video-bookmark-link .link\_status').html(""); |
| [1707](#L1707) | } |
| [1708](#L1708) |  |
| [1709](#L1709) | //                             Load Vimeo API for the embedded video |
| [1710](#L1710) | var iframe\_player = jQuery('.upgrade\_video\_content iframe')[0]; |
| [1711](#L1711) | var frogaloopPlayer = $f(iframe\_player); |
| [1712](#L1712) | // Option listeners for pause, finish, and playProgress |
| [1713](#L1713) | // |
| [1714](#L1714) | // Note: If you want to use this, you must define the functions or links wont work |
| [1715](#L1715) | frogaloopPlayer.addEvent('ready', function ( ) { |
| [1716](#L1716) | frogaloopPlayer.addEvent('pause', onPause); |
| [1717](#L1717) | frogaloopPlayer.addEvent('finish', onFinish); |
| [1718](#L1718) | frogaloopPlayer.addEvent('playProgress', onPlayProgress); |
| [1719](#L1719) | }); |
| [1720](#L1720) |  |
| [1721](#L1721) | // Functions for each listener event |
| [1722](#L1722) | function onPause(id) { // When the video is paused, do this. |
| [1723](#L1723) | jQuery(".main\_status").html('Paused'); |
| [1724](#L1724) | } |
| [1725](#L1725) |  |
| [1726](#L1726) | function onFinish(id) { // When the video is finished, do this. |
| [1727](#L1727) | jQuery(".main\_status").html('Finished'); |
| [1728](#L1728) | } |
| [1729](#L1729) |  |
| [1730](#L1730) | function onPlayProgress(data, id) { // While the video is playing, do this. |
| [1731](#L1731) | jQuery(".main\_status").html('Playing - ' + data.seconds + 's played'); // data.percent can also be used. |
| [1732](#L1732) | } |
| [1733](#L1733) |  |
| [1734](#L1734) | // Function to control what happens when each lesson link is clicked |
| [1735](#L1735) | function setupLinks( ) { |
| [1736](#L1736) |  |
| [1737](#L1737) | links.on('click', function ( ) { |
| [1738](#L1738) | var track = jQuery(this).data('timestamp'); //Timestamp stored as a data attribute |
| [1739](#L1739) |  |
| [1740](#L1740) | hidePlayNoticeAll( ); // Hide all status messages before displaying (to prevent them from sticking) |
| [1741](#L1741) | if (true === jQuery(this).data('active')) { |
| [1742](#L1742) | frogaloopPlayer.api('pause'); //Play the video |
| [1743](#L1743) | jQuery(this).data('active', false); |
| [1744](#L1744) | } else { |
| [1745](#L1745) | frogaloopPlayer.api('play'); //Play the video |
| [1746](#L1746) | frogaloopPlayer.api('seekTo', track); //Seek to the number of seconds in the variable link\_1\_track |
| [1747](#L1747) | jQuery(this).find('.link\_status').html(playNotice); //Display status message (playNotice) within span with class link\_1\_status |
| [1748](#L1748) | jQuery(this).data('active', true); |
| [1749](#L1749) | } |
| [1750](#L1750) | }); |
| [1751](#L1751) | } |
| [1752](#L1752) | setupLinks( ); |
| [1753](#L1753) | });</script> |
| [1754](#L1754) | <div class="clear clearfix cmclearfix"></div> |
| [1755](#L1755) | <div class="cminds\_upgrade\_wrapper"> |
| [1756](#L1756) | <div class="cminds\_upgrade"> |
| [1757](#L1757) |  |
| [1758](#L1758) | <?php |
| [1759](#L1759) | $upgradeText = $currentPlugin->getOption('plugin-upgrade-text'); |
| [1760](#L1760) | if (!empty($upgradeText)) : |
| [1761](#L1761) | ?> |
| [1762](#L1762) | <div class="upgrade\_text"> |
| [1763](#L1763) | <div class="upgrade\_header"> |
| [1764](#L1764) | Why you Should Upgrade |
| [1765](#L1765) | </div> |
| [1766](#L1766) | <div style="display:block"> |
| [1767](#L1767) | <p><?php echo $upgradeText; ?></p> |
| [1768](#L1768) | <div class="links"> |
| [1769](#L1769) |  |
| [1770](#L1770) | <?php |
| [1771](#L1771) | $upgradel = $currentPlugin->getOption('plugin-upgrade-text-list'); |
| [1772](#L1772) | if (!empty($upgradel) && is\_array($upgradel)) : |
| [1773](#L1773) | foreach ($upgradel as $key => $listitem) : |
| [1774](#L1774) | $linknum = $key + 1; |
| [1775](#L1775) | echo $listitem['video\_time']; |
| [1776](#L1776) | if ('More' !== $listitem['video\_time']) : |
| [1777](#L1777) | ?> |
| [1778](#L1778) | - <a class="cm-video-bookmark-link link\_<?php echo $linknum; ?>" data-timestamp="<?php echo $this->time\_to\_decimal($listitem['video\_time']); ?>" href="javascript:void(0);" target="\_self"><?php echo $listitem['title']; ?><span class="link\_status"></span></a> |
| [1779](#L1779) | <?php else: ?> |
| [1780](#L1780) | - <span class="cm-video-bookmark bookmark\_<?php echo $linknum; ?>" style="color:green;"><?php echo $listitem['title']; ?></span> |
| [1781](#L1781) | <?php endif; ?> |
| [1782](#L1782) | <br/> |
| [1783](#L1783) | <?php endforeach; ?> |
| [1784](#L1784) | <?php endif ?> |
| [1785](#L1785) | </div> |
| [1786](#L1786) | </div> |
| [1787](#L1787) | </div> |
| [1788](#L1788) | <?php endif; ?> |
| [1789](#L1789) |  |
| [1790](#L1790) | <?php |
| [1791](#L1791) | $videos = $currentPlugin->getOption('plugin-upgrade-videos'); |
| [1792](#L1792) | if (!empty($videos) && is\_array($videos)) : |
| [1793](#L1793) | ?> |
| [1794](#L1794) | <div class="upgrade\_videos"> |
| [1795](#L1795) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1796](#L1796) | <div class="upgrade\_videos\_inner"> |
| [1797](#L1797) | <?php |
| [1798](#L1798) | foreach ($videos as $key => $video) : |
| [1799](#L1799) | if (!empty($video)) : |
| [1800](#L1800) | ?> |
| [1801](#L1801) |  |
| [1802](#L1802) | <div class="upgrade\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1803](#L1803) | <div class="upgrade\_video\_title"><?php echo $video['title']; ?></div> |
| [1804](#L1804) | <div class="upgrade\_video\_content"> |
| [1805](#L1805) | <?php |
| [1806](#L1806) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="390" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1807](#L1807) | ?> |
| [1808](#L1808) | <br /><br /><a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $currentPlugin->getOption('plugin-abbrev') . '\_pro')); ?>" class="button button-primary" style="background-color:green; width:220px;" title="Click to Buy PRO">Show me Upgrade Options >></a> |
| [1809](#L1809) |  |
| [1810](#L1810) | </div> |
| [1811](#L1811) | </div> |
| [1812](#L1812) | <?php |
| [1813](#L1813) | endif; |
| [1814](#L1814) | endforeach; |
| [1815](#L1815) | ?> |
| [1816](#L1816) | </div> |
| [1817](#L1817) | </div> |
| [1818](#L1818) | <?php endif; ?> |
| [1819](#L1819) | </div>                    </div> |
| [1820](#L1820) | <?php |
| [1821](#L1821) | echo $this->showAds($atts); |
| [1822](#L1822) | ?> |
| [1823](#L1823) | <div class="clear clearfix cmclearfix"></div> |
| [1824](#L1824) | <?php else : ?> |
| [1825](#L1825) | <div class="cminds\_upgrade\_wrapper"> |
| [1826](#L1826) | <div> |
| [1827](#L1827) | <a class="cminds-upgrade-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_upgrade\_show' => 1), remove\_query\_arg('cminds\_upgrade\_hide'))); ?>">Why you shoud have the Premium Edition>></a> |
| [1828](#L1828) | </div> |
| [1829](#L1829) | </div> |
| [1830](#L1830) | <div class="clear clearfix cmclearfix"></div> |
| [1831](#L1831) | <?php |
| [1832](#L1832) | endif; |
| [1833](#L1833) | ?> |
| [1834](#L1834) |  |
| [1835](#L1835) | <?php |
| [1836](#L1836) | $content = ob\_get\_clean(); |
| [1837](#L1837) | return $content; |
| [1838](#L1838) | endif; |
| [1839](#L1839) | } |
| [1840](#L1840) |  |
| [1841](#L1841) | protected function getDaysSinceLastRefresh($ads\_arr) { |
| [1842](#L1842) | if (!is\_array($ads\_arr) && empty($ads\_arr['refresh\_time'])) { |
| [1843](#L1843) | return null; |
| [1844](#L1844) | } |
| [1845](#L1845) |  |
| [1846](#L1846) | $now = time(); |
| [1847](#L1847) | $your\_date = intval($ads\_arr['refresh\_time']); |
| [1848](#L1848) | $datediff = $now - $your\_date; |
| [1849](#L1849) | $days = abs(floor($datediff / (60 \* 60 \* 24))); |
| [1850](#L1850) | return $days; |
| [1851](#L1851) | } |
| [1852](#L1852) |  |
| [1853](#L1853) | public function showAds($atts = array()) { |
| [1854](#L1854) | global $cmindsPluginPackage; |
| [1855](#L1855) |  |
| [1856](#L1856) | $atts = shortcode\_atts(array( |
| [1857](#L1857) | 'flat' => false, |
| [1858](#L1858) | 'id'   => null |
| [1859](#L1859) | ), $atts); |
| [1860](#L1860) |  |
| [1861](#L1861) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1862](#L1862) |  |
| [1863](#L1863) | $optionName = 'cminds-' . $this->getOption('plugin-short-slug') . '-ads-hidden'; |
| [1864](#L1864) | $adsHide = filter\_input(INPUT\_GET, 'cminds\_ad\_hide'); |
| [1865](#L1865) | if ($adsHide) { |
| [1866](#L1866) | update\_option($optionName, 1); |
| [1867](#L1867) | } |
| [1868](#L1868) | $adsShow = filter\_input(INPUT\_GET, 'cminds\_ad\_show'); |
| [1869](#L1869) | if ($adsShow) { |
| [1870](#L1870) | update\_option($optionName, 0); |
| [1871](#L1871) | } |
| [1872](#L1872) | $adsHidden = get\_option($optionName, 1); |
| [1873](#L1873) | $adsRefreshed = filter\_input(INPUT\_GET, 'cminds\_ad\_refresh'); |
| [1874](#L1874) | if ($adsRefreshed) { |
| [1875](#L1875) | delete\_transient('cminds\_free\_ads'); |
| [1876](#L1876) | } |
| [1877](#L1877) | $ads\_arr = $this->getAds(); |
| [1878](#L1878) | $ads = isset($ads\_arr['ads']) ? $ads\_arr['ads'] : array(); |
| [1879](#L1879) | $days\_since\_last\_refresh = $this->getDaysSinceLastRefresh($ads\_arr); |
| [1880](#L1880) |  |
| [1881](#L1881) | $isRegistered = $currentPlugin->isRegistered(); |
| [1882](#L1882) | /\* |
| [1883](#L1883) | \* Don't display if there's no server connection |
| [1884](#L1884) | \*/ |
| [1885](#L1885) | if (!$ads\_arr['connection']) { |
| [1886](#L1886) | return; |
| [1887](#L1887) | } |
| [1888](#L1888) | ob\_start(); |
| [1889](#L1889) | ?> |
| [1890](#L1890) |  |
| [1891](#L1891) | <style type="text/css"> |
| [1892](#L1892) |  |
| [1893](#L1893) | div.cminds\_ads\_wrapper { |
| [1894](#L1894) | display: inline-block; |
| [1895](#L1895) | padding: 1em; |
| [1896](#L1896) | background: #FFF; |
| [1897](#L1897) | border: solid 1px #E0E0E0; |
| [1898](#L1898) | margin: 1em 1em 0 0; |
| [1899](#L1899) | vertical-align: top; |
| [1900](#L1900) | } |
| [1901](#L1901) |  |
| [1902](#L1902) | .cminds\_ads\_internal\_wrapper { |
| [1903](#L1903) | display: inline-block; |
| [1904](#L1904) | overflow: auto; |
| [1905](#L1905) | max-height: 175px; |
| [1906](#L1906) | } |
| [1907](#L1907) |  |
| [1908](#L1908) | .cminds\_ad{ |
| [1909](#L1909) | display: block; |
| [1910](#L1910) | margin: 0.5em; |
| [1911](#L1911) | vertical-align: top; |
| [1912](#L1912) | } |
| [1913](#L1913) |  |
| [1914](#L1914) | span.ad\_code { |
| [1915](#L1915) | font-weight: bold; |
| [1916](#L1916) | } |
| [1917](#L1917) |  |
| [1918](#L1918) | .cminds\_ad.hidden{ |
| [1919](#L1919) | display: none; |
| [1920](#L1920) | } |
| [1921](#L1921) | .cminds\_ads\_wrapper.hidden{ |
| [1922](#L1922) | display: none; |
| [1923](#L1923) | } |
| [1924](#L1924) |  |
| [1925](#L1925) | .cminds\_ad\_text{ |
| [1926](#L1926) | display: block; |
| [1927](#L1927) | margin-bottom: 1em; |
| [1928](#L1928) | } |
| [1929](#L1929) | .cminds\_ad\_link{ |
| [1930](#L1930) | text-align: center; |
| [1931](#L1931) | } |
| [1932](#L1932) |  |
| [1933](#L1933) | span.ads\_refreshed{ |
| [1934](#L1934) | color: #259602; |
| [1935](#L1935) | font-weight: bold; |
| [1936](#L1936) | } |
| [1937](#L1937) |  |
| [1938](#L1938) | .cminds\_ad\_text > a:before { |
| [1939](#L1939) | content:"\A"; white-space:pre; |
| [1940](#L1940) | } |
| [1941](#L1941) |  |
| [1942](#L1942) | .cminds\_ad\_text > \*:after { |
| [1943](#L1943) | content:"\A"; white-space:pre; |
| [1944](#L1944) | } |
| [1945](#L1945) |  |
| [1946](#L1946) | .cminds\_no\_ads{ |
| [1947](#L1947) | margin: 1em 0; |
| [1948](#L1948) | font-size: 12pt; |
| [1949](#L1949) | font-weight: bold; |
| [1950](#L1950) | } |
| [1951](#L1951) |  |
| [1952](#L1952) | .cminds\_links{ |
| [1953](#L1953) | display: inline-block; |
| [1954](#L1954) | margin: 1em; |
| [1955](#L1955) | padding: 0; |
| [1956](#L1956) | max-width: 150px; |
| [1957](#L1957) | min-height: 90px; |
| [1958](#L1958) | vertical-align: top; |
| [1959](#L1959) | text-align: left; |
| [1960](#L1960) | } |
| [1961](#L1961) |  |
| [1962](#L1962) | .cminds\_links .cminds\_link{ |
| [1963](#L1963) | margin: 5px 0; |
| [1964](#L1964) | } |
| [1965](#L1965) |  |
| [1966](#L1966) | .cminds\_links .cminds\_link:first-child{ |
| [1967](#L1967) | margin-top: 0; |
| [1968](#L1968) | } |
| [1969](#L1969) |  |
| [1970](#L1970) | .cminds\_link{ |
| [1971](#L1971) | color: #555; |
| [1972](#L1972) | border-color: rgba(204,204,204,0.8); |
| [1973](#L1973) | background: #f7f7f7; |
| [1974](#L1974) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1975](#L1975) | box-shadow: 0 1px 0 #ccc; |
| [1976](#L1976) | display: inline-block; |
| [1977](#L1977) | text-decoration: none; |
| [1978](#L1978) | line-height: 26px; |
| [1979](#L1979) | height: 28px; |
| [1980](#L1980) | padding: 0 10px 1px; |
| [1981](#L1981) | cursor: pointer; |
| [1982](#L1982) | border-width: 1px; |
| [1983](#L1983) | border-style: solid; |
| [1984](#L1984) | -webkit-border-radius: 3px; |
| [1985](#L1985) | border-radius: 3px; |
| [1986](#L1986) | -webkit-box-sizing: border-box; |
| [1987](#L1987) | -moz-box-sizing: border-box; |
| [1988](#L1988) | box-sizing: border-box; |
| [1989](#L1989) | } |
| [1990](#L1990) |  |
| [1991](#L1991) | .cminds\_link:active { |
| [1992](#L1992) | background: #eee; |
| [1993](#L1993) | border-color: #999; |
| [1994](#L1994) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [1995](#L1995) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [1996](#L1996) | -webkit-transform: translateY(1px); |
| [1997](#L1997) | -ms-transform: translateY(1px); |
| [1998](#L1998) | transform: translateY(1px); |
| [1999](#L1999) | } |
| [2000](#L2000) |  |
| [2001](#L2001) | .cminds\_link:hover { |
| [2002](#L2002) | background: #eee; |
| [2003](#L2003) | border-color: #999; |
| [2004](#L2004) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2005](#L2005) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2006](#L2006) | -webkit-transform: translateY(1px); |
| [2007](#L2007) | -ms-transform: translateY(1px); |
| [2008](#L2008) | transform: translateY(1px); |
| [2009](#L2009) | } |
| [2010](#L2010) |  |
| [2011](#L2011) | .cminds\_link.blue{ |
| [2012](#L2012) | color: #fff; |
| [2013](#L2013) | border-color: #33ace7; |
| [2014](#L2014) | background: #66c1ed; |
| [2015](#L2015) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2016](#L2016) | box-shadow: 0 1px 0 #ccc; |
| [2017](#L2017) | display: inline-block; |
| [2018](#L2018) | text-decoration: none; |
| [2019](#L2019) | line-height: 26px; |
| [2020](#L2020) | height: 28px; |
| [2021](#L2021) | padding: 0 10px 1px; |
| [2022](#L2022) | cursor: pointer; |
| [2023](#L2023) | border-width: 1px; |
| [2024](#L2024) | border-style: solid; |
| [2025](#L2025) | -webkit-border-radius: 3px; |
| [2026](#L2026) | border-radius: 3px; |
| [2027](#L2027) | -webkit-box-sizing: border-box; |
| [2028](#L2028) | -moz-box-sizing: border-box; |
| [2029](#L2029) | box-sizing: border-box; |
| [2030](#L2030) |  |
| [2031](#L2031) | } |
| [2032](#L2032) |  |
| [2033](#L2033) | .cminds\_link.blue:active { |
| [2034](#L2034) | background: #0198e1; |
| [2035](#L2035) | border-color: #66c1ed; |
| [2036](#L2036) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2037](#L2037) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2038](#L2038) | -webkit-transform: translateY(1px); |
| [2039](#L2039) | -ms-transform: translateY(1px); |
| [2040](#L2040) | transform: translateY(1px); |
| [2041](#L2041) | } |
| [2042](#L2042) |  |
| [2043](#L2043) | .cminds\_link.blue:hover { |
| [2044](#L2044) | background: #005b87; |
| [2045](#L2045) | border-color: #0198e1; |
| [2046](#L2046) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2047](#L2047) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2048](#L2048) | -webkit-transform: translateY(1px); |
| [2049](#L2049) | -ms-transform: translateY(1px); |
| [2050](#L2050) | transform: translateY(1px); |
| [2051](#L2051) | } |
| [2052](#L2052) |  |
| [2053](#L2053) | .cminds\_link.orange{ |
| [2054](#L2054) | color: #fff; |
| [2055](#L2055) | border-color: #ffb752; |
| [2056](#L2056) | background: #ffb752; |
| [2057](#L2057) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2058](#L2058) | box-shadow: 0 1px 0 #ccc; |
| [2059](#L2059) | display: inline-block; |
| [2060](#L2060) | text-decoration: none; |
| [2061](#L2061) | line-height: 26px; |
| [2062](#L2062) | height: 28px; |
| [2063](#L2063) | padding: 0 10px 1px; |
| [2064](#L2064) | cursor: pointer; |
| [2065](#L2065) | border-width: 1px; |
| [2066](#L2066) | border-style: solid; |
| [2067](#L2067) | -webkit-border-radius: 3px; |
| [2068](#L2068) | border-radius: 3px; |
| [2069](#L2069) | -webkit-box-sizing: border-box; |
| [2070](#L2070) | -moz-box-sizing: border-box; |
| [2071](#L2071) | box-sizing: border-box; |
| [2072](#L2072) |  |
| [2073](#L2073) | } |
| [2074](#L2074) |  |
| [2075](#L2075) | .cminds\_link.orange:active { |
| [2076](#L2076) | background: #e5a449; |
| [2077](#L2077) | border-color: #ffc574; |
| [2078](#L2078) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2079](#L2079) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2080](#L2080) | -webkit-transform: translateY(1px); |
| [2081](#L2081) | -ms-transform: translateY(1px); |
| [2082](#L2082) | transform: translateY(1px); |
| [2083](#L2083) | } |
| [2084](#L2084) |  |
| [2085](#L2085) | .cminds\_link.orange:hover { |
| [2086](#L2086) | background: #e5a449; |
| [2087](#L2087) | border-color: #ffc574; |
| [2088](#L2088) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2089](#L2089) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2090](#L2090) | -webkit-transform: translateY(1px); |
| [2091](#L2091) | -ms-transform: translateY(1px); |
| [2092](#L2092) | transform: translateY(1px); |
| [2093](#L2093) | } |
| [2094](#L2094) |  |
| [2095](#L2095) | .cminds\_more{ |
| [2096](#L2096) | display: inline-block; |
| [2097](#L2097) | margin: 1em; |
| [2098](#L2098) | vertical-align: top; |
| [2099](#L2099) | font-size: 12pt; |
| [2100](#L2100) | line-height: 123px; |
| [2101](#L2101) | } |
| [2102](#L2102) |  |
| [2103](#L2103) | .cminds\_more > \*{ |
| [2104](#L2104) | cursor: pointer; |
| [2105](#L2105) | } |
| [2106](#L2106) |  |
| [2107](#L2107) | .cminds\_link.cminds\_more\_ads { |
| [2108](#L2108) | -moz-border-radius: 11px; |
| [2109](#L2109) | -webkit-border-radius: 11px; |
| [2110](#L2110) | border-radius: 11px; |
| [2111](#L2111) | border: 1px solid #66c1ed; |
| [2112](#L2112) | font-size: 23px; |
| [2113](#L2113) | padding: 8px 14px; |
| [2114](#L2114) | text-decoration: none; |
| [2115](#L2115) | line-height: 23px; |
| [2116](#L2116) | height: auto; |
| [2117](#L2117) | } |
| [2118](#L2118) |  |
| [2119](#L2119) | .clear, .clearfix{ |
| [2120](#L2120) | clear:both; |
| [2121](#L2121) | } |
| [2122](#L2122) |  |
| [2123](#L2123) | .cmclearfix{ |
| [2124](#L2124) | clear: both !important; |
| [2125](#L2125) | } |
| [2126](#L2126) | </style> |
| [2127](#L2127) |  |
| [2128](#L2128) | <?php if ($isRegistered) : ?> |
| [2129](#L2129) |  |
| [2130](#L2130) | <?php if (!$atts['flat']) : ?> |
| [2131](#L2131) |  |
| [2132](#L2132) | <script> |
| [2133](#L2133) | jQuery(document).ready(function ( ) { |
| [2134](#L2134) | jQuery('.cminds-ads-show-button').on('click', function (e) { |
| [2135](#L2135) | e.preventDefault( ); |
| [2136](#L2136) | jQuery('#cminds\_offers\_wrapper').toggleClass('hidden'); |
| [2137](#L2137) | jQuery('#cminds\_links\_wrapper').toggleClass('hidden'); |
| [2138](#L2138) | }); |
| [2139](#L2139) | });</script> |
| [2140](#L2140) |  |
| [2141](#L2141) | <h3>Special offers from CreativeMinds</h3> |
| [2142](#L2142) |  |
| [2143](#L2143) | <div class="cminds\_ads\_wrapper\_white"> |
| [2144](#L2144) | <a href="https://www.cminds.com/wordpress-plugins-library/seo-keyword-hound-wordpress/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/keywordhoundbanner.jpg"></a> |
| [2145](#L2145) | <span style="margin-left:20px;"> |
| [2146](#L2146) | <a class="" href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/99suite.png"></a> |
| [2147](#L2147) | </span> |
| [2148](#L2148) | </div> |
| [2149](#L2149) |  |
| [2150](#L2150) |  |
| [2151](#L2151) | <?php if (!empty($ads)) : ?> |
| [2152](#L2152) | <div class="cminds\_ads\_internal\_wrapper"> |
| [2153](#L2153) | <?php foreach ($ads as $index => $ad) : ?> |
| [2154](#L2154) | <div class="cminds\_ad"> |
| [2155](#L2155) | <?php |
| [2156](#L2156) | $dateUntil = date('jS F, Y', strtotime($ad['ad\_valid\_date'])); |
| [2157](#L2157) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code <span class="ad\_code">"%s"</span> valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2158](#L2158) | ?> |
| [2159](#L2159) | <span class="cminds\_ad\_link"> |
| [2160](#L2160) | <a class="cminds\_link blue" target="\_blank" href="<?php echo $this->addAffiliateCode($ad['ad\_url']); ?>">Redeem Offer</a> |
| [2161](#L2161) | </span> |
| [2162](#L2162) | </div> |
| [2163](#L2163) | <?php endforeach; ?> |
| [2164](#L2164) | </div> |
| [2165](#L2165) | <?php else: ?> |
| [2166](#L2166) | <div class="cminds\_no\_ads"> |
| [2167](#L2167) | <span class="cminds\_no\_ads\_text"> |
| [2168](#L2168) | Currently we have no special discounts. |
| [2169](#L2169) | </span> |
| [2170](#L2170) | </div> |
| [2171](#L2171) | <?php endif; ?> |
| [2172](#L2172) |  |
| [2173](#L2173) | <div> |
| [2174](#L2174) | <?php if ($adsRefreshed) : |
| [2175](#L2175) | ?> |
| [2176](#L2176) | <span class="ads\_refreshed"> |
| [2177](#L2177) | Discounts have been refreshed. |
| [2178](#L2178) | </span> |
| [2179](#L2179) | <?php else : ?> |
| [2180](#L2180) | You haven't refreshed the discounts for <?php echo $days\_since\_last\_refresh . ' ' . \_n('day', 'days', $days\_since\_last\_refresh); ?>. <a class="cminds-ads-refresh-button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_ad\_refresh' => 1))); ?>"><strong>Refresh now!</strong></a> |
| [2181](#L2181) | <?php endif; ?> |
| [2182](#L2182) | </div> |
| [2183](#L2183) | <?php else: ?> |
| [2184](#L2184) | <ul class="cminds\_ads\_list\_wrapper"> |
| [2185](#L2185) | <?php foreach ($ads as $index => $ad) : ?> |
| [2186](#L2186) | <li class="cminds\_ads\_list\_item">                                                           <?php |
| [2187](#L2187) | $dateUntil = date('Y-m-d', strtotime($ad['ad\_valid\_date'])); |
| [2188](#L2188) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code "%s" valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2189](#L2189) | ?> |
| [2190](#L2190) | </li> |
| [2191](#L2191) | <?php endforeach; ?> |
| [2192](#L2192) | </ul> |
| [2193](#L2193) | <?php endif; ?> |
| [2194](#L2194) | <?php else: ?> |
| [2195](#L2195) | <h3>Special Offers from CreativeMinds</h3> |
| [2196](#L2196) |  |
| [2197](#L2197) | <p> |
| [2198](#L2198) | <a href="javascript:void(0)" id="cminds-unskip">Complete <?php echo esc\_attr($currentPlugin->getOption('plugin-name')); ?> registration</a> and receive special offers |
| [2199](#L2199) | </p> |
| [2200](#L2200) | <?php endif; ?> |
| [2201](#L2201) | <div class="clear clearfix cmclearfix"></div> |
| [2202](#L2202) | <?php |
| [2203](#L2203) | $content = ob\_get\_clean(); |
| [2204](#L2204) | return $content; |
| [2205](#L2205) | } |
| [2206](#L2206) |  |
| [2207](#L2207) | public function getRegistrationFields() { |
| [2208](#L2208) | $fields = array( |
| [2209](#L2209) | 'product\_name'   => $this->getOption('plugin-name'), |
| [2210](#L2210) | 'remote\_url'     => get\_bloginfo('wpurl'), |
| [2211](#L2211) | 'remote\_ip'      => $\_SERVER['SERVER\_ADDR'], |
| [2212](#L2212) | 'remote\_country' => '', |
| [2213](#L2213) | 'remote\_city'    => '', |
| [2214](#L2214) | 'email'          => get\_bloginfo('admin\_email'), |
| [2215](#L2215) | 'hostname'       => get\_bloginfo('wpurl'), |
| [2216](#L2216) | 'username'       => '', |
| [2217](#L2217) | ); |
| [2218](#L2218) |  |
| [2219](#L2219) | $output = ''; |
| [2220](#L2220) |  |
| [2221](#L2221) | foreach ($fields as $key => $value) { |
| [2222](#L2222) | $output .= sprintf('<input type="hidden" name="%s" value="%s" />', $key, $value); |
| [2223](#L2223) | } |
| [2224](#L2224) |  |
| [2225](#L2225) | return $output; |
| [2226](#L2226) | } |
| [2227](#L2227) |  |
| [2228](#L2228) | public function isSkipped($id = null) { |
| [2229](#L2229) | global $cmindsPluginPackage; |
| [2230](#L2230) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2231](#L2231) | $isSkipped = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'); |
| [2232](#L2232) | return $isSkipped; |
| [2233](#L2233) | } |
| [2234](#L2234) |  |
| [2235](#L2235) | public function isRegistered($id = null) { |
| [2236](#L2236) | global $cmindsPluginPackage; |
| [2237](#L2237) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2238](#L2238) | $isRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'); |
| [2239](#L2239) | return $isRegistered; |
| [2240](#L2240) | } |
| [2241](#L2241) |  |
| [2242](#L2242) | public function wasRegistered($id = null) { |
| [2243](#L2243) | global $cmindsPluginPackage; |
| [2244](#L2244) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2245](#L2245) | $wasRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'); |
| [2246](#L2246) | return $wasRegistered; |
| [2247](#L2247) | } |
| [2248](#L2248) |  |
| [2249](#L2249) | public function setWasRegistered($id = null) { |
| [2250](#L2250) | global $cmindsPluginPackage; |
| [2251](#L2251) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2252](#L2252) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'; |
| [2253](#L2253) | $result = update\_option($optionName, 1); |
| [2254](#L2254) | return $result; |
| [2255](#L2255) | } |
| [2256](#L2256) |  |
| [2257](#L2257) | /\*\* |
| [2258](#L2258) | \* Function comminicates with our server to remove the user from our database (right to be forgotten) |
| [2259](#L2259) | \* @global array $cmindsPluginPackage |
| [2260](#L2260) | \* @param type $atts |
| [2261](#L2261) | \* @return type |
| [2262](#L2262) | \*/ |
| [2263](#L2263) | public function deregisterUser($atts = array()) { |
| [2264](#L2264) | global $cmindsPluginPackage; |
| [2265](#L2265) |  |
| [2266](#L2266) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2267](#L2267) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2268](#L2268) |  |
| [2269](#L2269) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2270](#L2270) | $post = filter\_input\_array(INPUT\_POST); |
| [2271](#L2271) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2272](#L2272) |  |
| [2273](#L2273) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2274](#L2274) | if ($nonceCheck) { |
| [2275](#L2275) |  |
| [2276](#L2276) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2277](#L2277) | return; |
| [2278](#L2278) | } |
| [2279](#L2279) |  |
| [2280](#L2280) | unset($post['cminds\_nonce']); |
| [2281](#L2281) | $jsonData = wp\_json\_encode(array($post)); |
| [2282](#L2282) |  |
| [2283](#L2283) | $args = array( |
| [2284](#L2284) | 'body' => array( |
| [2285](#L2285) | 'jsonData' => $jsonData |
| [2286](#L2286) | ) |
| [2287](#L2287) | ); |
| [2288](#L2288) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2289](#L2289) | $response = wp\_remote\_post($href, $args); |
| [2290](#L2290) | if (!is\_wp\_error($response)) { |
| [2291](#L2291) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2292](#L2292) | if ($result && 1 === $result['result']) { |
| [2293](#L2293) | update\_option($optionName, 0); |
| [2294](#L2294) | } |
| [2295](#L2295) | } else { |
| [2296](#L2296) | $args['sslverify'] = false; |
| [2297](#L2297) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2298](#L2298) | $response = wp\_remote\_post($href, $args); |
| [2299](#L2299) | if (!is\_wp\_error($response)) { |
| [2300](#L2300) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2301](#L2301) | if ($result && 1 === $result['result']) { |
| [2302](#L2302) | update\_option($optionName, 0); |
| [2303](#L2303) | } |
| [2304](#L2304) | } else { |
| [2305](#L2305) | $message = 'User has requested the deregistration: <br/><table>'; |
| [2306](#L2306) | foreach ($post as $key => $value) { |
| [2307](#L2307) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2308](#L2308) | continue; |
| [2309](#L2309) | } |
| [2310](#L2310) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2311](#L2311) | } |
| [2312](#L2312) | $message .= '</table>'; |
| [2313](#L2313) |  |
| [2314](#L2314) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2315](#L2315) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration Canceled', $message); |
| [2316](#L2316) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2317](#L2317) | } |
| [2318](#L2318) | } |
| [2319](#L2319) | update\_option($optionName, 0); |
| [2320](#L2320) | } |
| [2321](#L2321) | } |
| [2322](#L2322) | } |
| [2323](#L2323) |  |
| [2324](#L2324) | public function skipRegistration($atts = array()) { |
| [2325](#L2325) | global $cmindsPluginPackage; |
| [2326](#L2326) |  |
| [2327](#L2327) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2328](#L2328) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2329](#L2329) |  |
| [2330](#L2330) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2331](#L2331) | update\_option($optionName, 1); |
| [2332](#L2332) | } |
| [2333](#L2333) |  |
| [2334](#L2334) | public function unskipRegistration($atts = array()) { |
| [2335](#L2335) | global $cmindsPluginPackage; |
| [2336](#L2336) |  |
| [2337](#L2337) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2338](#L2338) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2339](#L2339) |  |
| [2340](#L2340) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2341](#L2341) | update\_option($optionName, 0); |
| [2342](#L2342) | } |
| [2343](#L2343) |  |
| [2344](#L2344) | /\*\* |
| [2345](#L2345) | \* Function communicates with our server to register user's e-mail in our database. |
| [2346](#L2346) | \* It's an optional step, user can easily skip it. We only collect e-mail and the url of the site. |
| [2347](#L2347) | \* User is being informed about the data being collected and the reason why it's collected. |
| [2348](#L2348) | \* @global array $cmindsPluginPackage |
| [2349](#L2349) | \* @param type $atts |
| [2350](#L2350) | \* @return type |
| [2351](#L2351) | \*/ |
| [2352](#L2352) | public function registerUser($atts = array()) { |
| [2353](#L2353) | global $cmindsPluginPackage; |
| [2354](#L2354) |  |
| [2355](#L2355) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2356](#L2356) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2357](#L2357) |  |
| [2358](#L2358) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2359](#L2359) | $post = filter\_input\_array(INPUT\_POST); |
| [2360](#L2360) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2361](#L2361) |  |
| [2362](#L2362) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2363](#L2363) | if ($nonceCheck) { |
| [2364](#L2364) |  |
| [2365](#L2365) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2366](#L2366) | return; |
| [2367](#L2367) | } |
| [2368](#L2368) |  |
| [2369](#L2369) | unset($post['cminds\_nonce']); |
| [2370](#L2370) | $jsonData = wp\_json\_encode(array($post)); |
| [2371](#L2371) |  |
| [2372](#L2372) | $args = array( |
| [2373](#L2373) | 'body' => array( |
| [2374](#L2374) | 'jsonData' => $jsonData |
| [2375](#L2375) | ) |
| [2376](#L2376) | ); |
| [2377](#L2377) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2378](#L2378) | $response = wp\_remote\_post($href, $args); |
| [2379](#L2379) | if (!is\_wp\_error($response)) { |
| [2380](#L2380) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2381](#L2381) | if ($result && 1 === $result['result']) { |
| [2382](#L2382) | update\_option($optionName, 1); |
| [2383](#L2383) | $currentPlugin->setWasRegistered(); |
| [2384](#L2384) | } |
| [2385](#L2385) | } else { |
| [2386](#L2386) | $args['sslverify'] = false; |
| [2387](#L2387) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2388](#L2388) | $response = wp\_remote\_post($href, $args); |
| [2389](#L2389) | if (!is\_wp\_error($response)) { |
| [2390](#L2390) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2391](#L2391) | if ($result && 1 === $result['result']) { |
| [2392](#L2392) | update\_option($optionName, 1); |
| [2393](#L2393) | $currentPlugin->setWasRegistered(); |
| [2394](#L2394) | } |
| [2395](#L2395) | } else { |
| [2396](#L2396) | $message = 'Registered fields: <br/><table>'; |
| [2397](#L2397) | foreach ($post as $key => $value) { |
| [2398](#L2398) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2399](#L2399) | continue; |
| [2400](#L2400) | } |
| [2401](#L2401) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2402](#L2402) | } |
| [2403](#L2403) | $message .= '</table>'; |
| [2404](#L2404) |  |
| [2405](#L2405) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2406](#L2406) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration', $message); |
| [2407](#L2407) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2408](#L2408) | } |
| [2409](#L2409) | } |
| [2410](#L2410) | } |
| [2411](#L2411) | } |
| [2412](#L2412) | } |
| [2413](#L2413) |  |
| [2414](#L2414) | public function showRegistration($atts = array()) { |
| [2415](#L2415) | global $cmindsPluginPackage; |
| [2416](#L2416) |  |
| [2417](#L2417) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2418](#L2418) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2419](#L2419) |  |
| [2420](#L2420) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-hidden'; |
| [2421](#L2421) | $registrationHide = filter\_input(INPUT\_GET, 'cminds\_registration\_hide'); |
| [2422](#L2422) | if ($registrationHide) { |
| [2423](#L2423) | update\_option($optionName, 1); |
| [2424](#L2424) | } |
| [2425](#L2425) | $registrationShow = filter\_input(INPUT\_GET, 'cminds\_registration\_show'); |
| [2426](#L2426) | if ($registrationShow) { |
| [2427](#L2427) | delete\_option($optionName); |
| [2428](#L2428) | } |
| [2429](#L2429) | $registrationHidden = get\_option($optionName); |
| [2430](#L2430) |  |
| [2431](#L2431) | $this->registerUser($atts); |
| [2432](#L2432) |  |
| [2433](#L2433) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2434](#L2434) | $isRegistered = $this->isRegistered(); |
| [2435](#L2435) |  |
| [2436](#L2436) | if ($isRegistered) : |
| [2437](#L2437) | return $this->showAds($atts); |
| [2438](#L2438) | else : |
| [2439](#L2439) | ob\_start(); |
| [2440](#L2440) | ?> |
| [2441](#L2441) | <style type="text/css"> |
| [2442](#L2442) |  |
| [2443](#L2443) | div.cminds\_registration\_wrapper { |
| [2444](#L2444) | display: inline-block; |
| [2445](#L2445) | padding: 1em; |
| [2446](#L2446) | background: #FFF; |
| [2447](#L2447) | margin: 1em 1em 0 0; |
| [2448](#L2448) | width: 1004px; |
| [2449](#L2449) | } |
| [2450](#L2450) |  |
| [2451](#L2451) | div.cminds\_registration\_wrapper \* { |
| [2452](#L2452) | vertical-align: top; |
| [2453](#L2453) | } |
| [2454](#L2454) |  |
| [2455](#L2455) | .cminds\_registration{ |
| [2456](#L2456) | display: inline-block; |
| [2457](#L2457) | margin: 1em; |
| [2458](#L2458) | padding: 1em 58px; |
| [2459](#L2459) | } |
| [2460](#L2460) |  |
| [2461](#L2461) | .cminds\_registration form{ |
| [2462](#L2462) | display: inline-block; |
| [2463](#L2463) | margin: 1em; |
| [2464](#L2464) | } |
| [2465](#L2465) | .cminds\_registration form .no-registration{ |
| [2466](#L2466) | margin: 5px 0 0; |
| [2467](#L2467) | text-align: center; |
| [2468](#L2468) | } |
| [2469](#L2469) |  |
| [2470](#L2470) | .cminds\_registration form input[type="submit"]{ |
| [2471](#L2471) | font-size: 16pt; |
| [2472](#L2472) | padding: 7px; |
| [2473](#L2473) | height: auto; |
| [2474](#L2474) | } |
| [2475](#L2475) |  |
| [2476](#L2476) | .cminds\_registration\_text{ |
| [2477](#L2477) | display: inline-block; |
| [2478](#L2478) | margin: 1em; |
| [2479](#L2479) | } |
| [2480](#L2480) |  |
| [2481](#L2481) | .cminds\_registration\_text > span{ |
| [2482](#L2482) | text-align: left; |
| [2483](#L2483) | display: block; |
| [2484](#L2484) | } |
| [2485](#L2485) |  |
| [2486](#L2486) | .cminds\_registration\_text .row\_1{ |
| [2487](#L2487) | font-size: 12pt; |
| [2488](#L2488) | padding-bottom: 5px; |
| [2489](#L2489) | } |
| [2490](#L2490) | .cminds\_registration\_text .row\_2{ |
| [2491](#L2491) | font-size: 10pt; |
| [2492](#L2492) | } |
| [2493](#L2493) |  |
| [2494](#L2494) | .cminds\_link{ |
| [2495](#L2495) | color: #555; |
| [2496](#L2496) | border-color: rgba(204,204,204,0.8); |
| [2497](#L2497) | background: #f7f7f7; |
| [2498](#L2498) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2499](#L2499) | box-shadow: 0 1px 0 #ccc; |
| [2500](#L2500) | display: inline-block; |
| [2501](#L2501) | text-decoration: none; |
| [2502](#L2502) | line-height: 26px; |
| [2503](#L2503) | height: 28px; |
| [2504](#L2504) | padding: 0 10px 1px; |
| [2505](#L2505) | cursor: pointer; |
| [2506](#L2506) | border-width: 1px; |
| [2507](#L2507) | border-style: solid; |
| [2508](#L2508) | -webkit-border-radius: 3px; |
| [2509](#L2509) | border-radius: 3px; |
| [2510](#L2510) | -webkit-box-sizing: border-box; |
| [2511](#L2511) | -moz-box-sizing: border-box; |
| [2512](#L2512) | box-sizing: border-box; |
| [2513](#L2513) | } |
| [2514](#L2514) |  |
| [2515](#L2515) | .cminds\_link:active { |
| [2516](#L2516) | background: #eee; |
| [2517](#L2517) | border-color: #999; |
| [2518](#L2518) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2519](#L2519) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2520](#L2520) | -webkit-transform: translateY(1px); |
| [2521](#L2521) | -ms-transform: translateY(1px); |
| [2522](#L2522) | transform: translateY(1px); |
| [2523](#L2523) | } |
| [2524](#L2524) |  |
| [2525](#L2525) | .cminds\_link:hover { |
| [2526](#L2526) | background: #eee; |
| [2527](#L2527) | border-color: #999; |
| [2528](#L2528) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2529](#L2529) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2530](#L2530) | -webkit-transform: translateY(1px); |
| [2531](#L2531) | -ms-transform: translateY(1px); |
| [2532](#L2532) | transform: translateY(1px); |
| [2533](#L2533) | } |
| [2534](#L2534) |  |
| [2535](#L2535) | .cminds\_link.blue{ |
| [2536](#L2536) | color: #fff; |
| [2537](#L2537) | border-color: #33ace7; |
| [2538](#L2538) | background: #66c1ed; |
| [2539](#L2539) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2540](#L2540) | box-shadow: 0 1px 0 #ccc; |
| [2541](#L2541) | display: inline-block; |
| [2542](#L2542) | text-decoration: none; |
| [2543](#L2543) | line-height: 26px; |
| [2544](#L2544) | height: 28px; |
| [2545](#L2545) | padding: 0 10px 1px; |
| [2546](#L2546) | cursor: pointer; |
| [2547](#L2547) | border-width: 1px; |
| [2548](#L2548) | border-style: solid; |
| [2549](#L2549) | -webkit-border-radius: 3px; |
| [2550](#L2550) | border-radius: 3px; |
| [2551](#L2551) | -webkit-box-sizing: border-box; |
| [2552](#L2552) | -moz-box-sizing: border-box; |
| [2553](#L2553) | box-sizing: border-box; |
| [2554](#L2554) |  |
| [2555](#L2555) | } |
| [2556](#L2556) |  |
| [2557](#L2557) | .cminds\_link.blue:active { |
| [2558](#L2558) | background: #0198e1; |
| [2559](#L2559) | border-color: #66c1ed; |
| [2560](#L2560) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2561](#L2561) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2562](#L2562) | -webkit-transform: translateY(1px); |
| [2563](#L2563) | -ms-transform: translateY(1px); |
| [2564](#L2564) | transform: translateY(1px); |
| [2565](#L2565) | } |
| [2566](#L2566) |  |
| [2567](#L2567) | .cminds\_link.blue:hover { |
| [2568](#L2568) | background: #005b87; |
| [2569](#L2569) | border-color: #0198e1; |
| [2570](#L2570) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2571](#L2571) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2572](#L2572) | -webkit-transform: translateY(1px); |
| [2573](#L2573) | -ms-transform: translateY(1px); |
| [2574](#L2574) | transform: translateY(1px); |
| [2575](#L2575) | } |
| [2576](#L2576) |  |
| [2577](#L2577) | .cminds\_link.orange{ |
| [2578](#L2578) | color: #fff; |
| [2579](#L2579) | border-color: #ffb752; |
| [2580](#L2580) | background: #ffb752; |
| [2581](#L2581) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2582](#L2582) | box-shadow: 0 1px 0 #ccc; |
| [2583](#L2583) | display: inline-block; |
| [2584](#L2584) | text-decoration: none; |
| [2585](#L2585) | line-height: 26px; |
| [2586](#L2586) | height: 28px; |
| [2587](#L2587) | padding: 0 10px 1px; |
| [2588](#L2588) | cursor: pointer; |
| [2589](#L2589) | border-width: 1px; |
| [2590](#L2590) | border-style: solid; |
| [2591](#L2591) | -webkit-border-radius: 3px; |
| [2592](#L2592) | border-radius: 3px; |
| [2593](#L2593) | -webkit-box-sizing: border-box; |
| [2594](#L2594) | -moz-box-sizing: border-box; |
| [2595](#L2595) | box-sizing: border-box; |
| [2596](#L2596) |  |
| [2597](#L2597) | } |
| [2598](#L2598) |  |
| [2599](#L2599) | .cminds\_link.orange:active { |
| [2600](#L2600) | background: #e5a449; |
| [2601](#L2601) | border-color: #ffc574; |
| [2602](#L2602) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2603](#L2603) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2604](#L2604) | -webkit-transform: translateY(1px); |
| [2605](#L2605) | -ms-transform: translateY(1px); |
| [2606](#L2606) | transform: translateY(1px); |
| [2607](#L2607) | } |
| [2608](#L2608) |  |
| [2609](#L2609) | .cminds\_link.orange:hover { |
| [2610](#L2610) | background: #e5a449; |
| [2611](#L2611) | border-color: #ffc574; |
| [2612](#L2612) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2613](#L2613) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2614](#L2614) | -webkit-transform: translateY(1px); |
| [2615](#L2615) | -ms-transform: translateY(1px); |
| [2616](#L2616) | transform: translateY(1px); |
| [2617](#L2617) | } |
| [2618](#L2618) |  |
| [2619](#L2619) | .clear, .clearfix{ |
| [2620](#L2620) | clear:both; |
| [2621](#L2621) | } |
| [2622](#L2622) | .cmclearfix{ |
| [2623](#L2623) | clear:both !important; |
| [2624](#L2624) | } |
| [2625](#L2625) |  |
| [2626](#L2626) | </style> |
| [2627](#L2627) |  |
| [2628](#L2628) | <?php if (!$registrationHidden) : ?> |
| [2629](#L2629) |  |
| [2630](#L2630) | <div class="cminds\_registration\_wrapper"> |
| [2631](#L2631) | <div class="cminds\_registration"> |
| [2632](#L2632) | <table><tr> |
| [2633](#L2633) | <td> |
| [2634](#L2634) | <form method="post" action=""> |
| [2635](#L2635) | <?php |
| [2636](#L2636) | wp\_nonce\_field('cminds\_register\_free', 'cminds\_nonce'); |
| [2637](#L2637) | echo $currentPlugin->getRegistrationFields(); |
| [2638](#L2638) | ?> |
| [2639](#L2639) | <input class="button button-primary" style="background-color:green;" type="submit" value="Register Your Copy" /> |
| [2640](#L2640) | <div class="no-registration"> |
| [2641](#L2641) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_hide' => 1), remove\_query\_arg('cminds\_registration\_show'))); ?>">I don't want to register now</a> |
| [2642](#L2642) | </div> |
| [2643](#L2643) | </form> |
| [2644](#L2644) | </td> |
| [2645](#L2645) | <td> |
| [2646](#L2646) | <div class="cminds\_registration\_text"> |
| [2647](#L2647) | <span class="row\_1"> |
| [2648](#L2648) | Once registered, you will receive updates and special offers. |
| [2649](#L2649) | </span> |
| [2650](#L2650) | <span class="row\_2"> |
| [2651](#L2651) | <p>We will only send once, your administrator's e-mail and site URL to CreativeMinds server.<br /> No additional information will be ever collected or sent.</p> |
| [2652](#L2652) | </span> |
| [2653](#L2653) | </td> |
| [2654](#L2654) | </tr> |
| [2655](#L2655) | </table> |
| [2656](#L2656) | </div> |
| [2657](#L2657) | </div> |
| [2658](#L2658) | </div> |
| [2659](#L2659) | <?php else : ?> |
| [2660](#L2660) | <div class="cminds\_registration\_wrapper"> |
| [2661](#L2661) | <div> |
| [2662](#L2662) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_show' => 1), remove\_query\_arg('cminds\_registration\_hide'))); ?>">Show registration box</a> |
| [2663](#L2663) | <a href="<?php echo $this->getStoreUrl(); ?>" class="cminds\_link orange" target="\_blank">View all CreativeMidns Plugins</a> |
| [2664](#L2664) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Bundle')); ?>" class="cminds\_link blue" target="\_blank">View Bundles</a> |
| [2665](#L2665) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Add-On')); ?>" class="cminds\_link blue" target="\_blank">View Add-Ons</a> |
| [2666](#L2666) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Service')); ?>" class="cminds\_link blue" target="\_blank">View Services</a> |
| [2667](#L2667) | </div> |
| [2668](#L2668) | </div> |
| [2669](#L2669) | <?php |
| [2670](#L2670) | endif; |
| [2671](#L2671) | echo $this->showUpgrade($atts); |
| [2672](#L2672) | ?> |
| [2673](#L2673) | <div class="clear clearfix cmclearfix"></div> |
| [2674](#L2674) | <?php |
| [2675](#L2675) | $content = ob\_get\_clean(); |
| [2676](#L2676) | return $content; |
| [2677](#L2677) | endif; |
| [2678](#L2678) | } |
| [2679](#L2679) |  |
| [2680](#L2680) | /\*\* |
| [2681](#L2681) | \* Displays the horizontal navigation bar |
| [2682](#L2682) | \* @global string $submenu |
| [2683](#L2683) | \* @global type $plugin\_page |
| [2684](#L2684) | \*/ |
| [2685](#L2685) | protected function showNav() { |
| [2686](#L2686) |  |
| [2687](#L2687) | global $self, $plugin\_page, $typenow, $submenu; |
| [2688](#L2688) |  |
| [2689](#L2689) | $submenus = array(); |
| [2690](#L2690) | $menuItem = $this->getOption('plugin-menu-item'); |
| [2691](#L2691) | $pluginAbbrev = $this->getOption('plugin-abbrev'); |
| [2692](#L2692) |  |
| [2693](#L2693) | ob\_start(); |
| [2694](#L2694) |  |
| [2695](#L2695) | if (isset($submenu[$menuItem])) { |
| [2696](#L2696) |  |
| [2697](#L2697) | $thisMenu = $submenu[$menuItem]; |
| [2698](#L2698) |  |
| [2699](#L2699) | foreach ($thisMenu as $sub\_item) { |
| [2700](#L2700) |  |
| [2701](#L2701) | $slug = $sub\_item[2]; |
| [2702](#L2702) |  |
| [2703](#L2703) | // Handle current for post\_type=post|page|foo pages, which won't match $self. |
| [2704](#L2704) | $self\_type = !empty($typenow) ? $self . '?post\_type=' . $typenow : 'nothing'; |
| [2705](#L2705) |  |
| [2706](#L2706) | $isCurrent = FALSE; |
| [2707](#L2707) |  |
| [2708](#L2708) | $subpageUrl = get\_admin\_url('', 'admin.php?page=' . $slug); |
| [2709](#L2709) |  |
| [2710](#L2710) | if ((!isset($plugin\_page) && $self == $slug) || ( isset($plugin\_page) && $plugin\_page == $slug && ( $menuItem == $self\_type || $menuItem == $self || file\_exists($menuItem) === false ))) { |
| [2711](#L2711) | $isCurrent = TRUE; |
| [2712](#L2712) | } |
| [2713](#L2713) |  |
| [2714](#L2714) | $url = ( strpos($slug, '.php') !== false || strpos($slug, 'http://') !== false || strpos($slug, 'https://') !== false ) ? $slug : $subpageUrl; |
| [2715](#L2715) |  |
| [2716](#L2716) | $isExternal = ( $slug === $url ) ? TRUE : FALSE; |
| [2717](#L2717) |  |
| [2718](#L2718) | /\* |
| [2719](#L2719) | \* Don't show on the Upgrade page itself |
| [2720](#L2720) | \*/ |
| [2721](#L2721) | if (!empty($\_GET['page']) && $\_GET['page'] == $pluginAbbrev . '\_pro' && $slug == $pluginAbbrev . '\_pro') { |
| [2722](#L2722) | continue; |
| [2723](#L2723) | } |
| [2724](#L2724) |  |
| [2725](#L2725) | $submenus[] = array( |
| [2726](#L2726) | 'link'     => $url, |
| [2727](#L2727) | 'title'    => $sub\_item[0], |
| [2728](#L2728) | 'current'  => $isCurrent, |
| [2729](#L2729) | 'external' => $isExternal |
| [2730](#L2730) | ); |
| [2731](#L2731) | } |
| [2732](#L2732) | ?> |
| [2733](#L2733) | <div id="cmhandfsl\_admin\_nav"> |
| [2734](#L2734) | <ul class="subsubsub"> |
| [2735](#L2735) | <?php foreach ($submenus as $menu): ?> |
| [2736](#L2736) |  |
| [2737](#L2737) | <li><a href="<?php echo esc\_attr($menu['link']); ?>" <?php echo ( $menu['current'] ) ? 'class="current"' : ''; ?> <?php |
| [2738](#L2738) | if ($menu['external']) { |
| [2739](#L2739) | echo 'target="\_blank"'; |
| [2740](#L2740) | } |
| [2741](#L2741) | ?>><?php echo esc\_html($menu['title']); ?> |
| [2742](#L2742) | </a></li> |
| [2743](#L2743) | <?php endforeach; ?> |
| [2744](#L2744) | </ul> |
| [2745](#L2745) | <br class="clear" /> |
| [2746](#L2746) | </div> |
| [2747](#L2747) | <?php |
| [2748](#L2748) | } |
| [2749](#L2749) |  |
| [2750](#L2750) | $nav = ob\_get\_contents(); |
| [2751](#L2751) | ob\_end\_clean(); |
| [2752](#L2752) | return $nav; |
| [2753](#L2753) | } |
| [2754](#L2754) |  |
| [2755](#L2755) | public function cminds\_compatibility\_check($plaintext = false) { |
| [2756](#L2756) | global $wp\_version; |
| [2757](#L2757) | $upload\_max = ini\_get('upload\_max\_filesize') ? ini\_get('upload\_max\_filesize') : 'N/A'; |
| [2758](#L2758) | $post\_max = ini\_get('post\_max\_size') ? ini\_get('post\_max\_size') : 'N/A'; |
| [2759](#L2759) | $memory\_limit = ini\_get('memory\_limit') ? ini\_get('memory\_limit') : 'N/A'; |
| [2760](#L2760) | $allow\_url\_fopen = ini\_get('allow\_url\_fopen') ? ini\_get('allow\_url\_fopen') : 'N/A'; |
| [2761](#L2761) | $max\_execution\_time = ini\_get('max\_execution\_time') !== FALSE ? ini\_get('max\_execution\_time') : 'N/A'; |
| [2762](#L2762) | $cURL = function\_exists('curl\_version') ? 'On' : 'Off'; |
| [2763](#L2763) | $mb\_support = function\_exists('mb\_strtolower') ? 'On' : 'Off'; |
| [2764](#L2764) | $intl\_support = extension\_loaded('intl') ? 'On' : 'Off'; |
| [2765](#L2765) | $iconv\_support = extension\_loaded('iconv') ? 'On' : 'Off'; |
| [2766](#L2766) |  |
| [2767](#L2767) | $permalink\_structure = get\_option('permalink\_structure'); |
| [2768](#L2768) | $permalinksurl = self\_admin\_url('options-permalink.php'); |
| [2769](#L2769) |  |
| [2770](#L2770) | $content = ''; |
| [2771](#L2771) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2772](#L2772) | ob\_start(); |
| [2773](#L2773) | if (!$plaintext): |
| [2774](#L2774) | ?> |
| [2775](#L2775) | <span class="description" style=""> |
| [2776](#L2776) | The information in this table is useful to check if the plugin might have some incompabilities with you server. |
| [2777](#L2777) | </span> |
| [2778](#L2778) | <table class="form-table server-info-table"> |
| [2779](#L2779) | <tr> |
| [2780](#L2780) | <td>Package Version</td> |
| [2781](#L2781) | <td><?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?></td> |
| [2782](#L2782) | <td><span>OK</span></td> |
| [2783](#L2783) | </tr> |
| [2784](#L2784) | <tr> |
| [2785](#L2785) | <td>WordPress Version</td> |
| [2786](#L2786) | <td><?php echo $wp\_version; ?></td> |
| [2787](#L2787) | <td><?php if (version\_compare($wp\_version, '3.3.0', '<')): ?><strong>The minimum supported version of WordPress is 3.3</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2788](#L2788) | </tr> |
| [2789](#L2789) | <tr> |
| [2790](#L2790) | <td>Permalinks enabled</td> |
| [2791](#L2791) | <td><?php echo ($permalink\_structure) ? 'Yes' : 'No' ?></td> |
| [2792](#L2792) | <td><?php if (empty($permalink\_structure)): ?><strong>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a></strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2793](#L2793) | </tr> |
| [2794](#L2794) | <tr> |
| [2795](#L2795) | <td>PHP Version</td> |
| [2796](#L2796) | <td><?php echo phpversion(); ?></td> |
| [2797](#L2797) | <td><?php if (version\_compare(phpversion(), '5.3.0', '<')): ?><strong>Recommended 5.3 or higher</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2798](#L2798) | </tr> |
| [2799](#L2799) | <tr> |
| [2800](#L2800) | <td>mbstring support</td> |
| [2801](#L2801) | <td><?php echo $mb\_support; ?></td> |
| [2802](#L2802) | <td><?php if ($mb\_support == 'Off'): ?> |
| [2803](#L2803) | <strong>"mbstring" library is required for plugin to work.</strong> |
| [2804](#L2804) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2805](#L2805) | </tr> |
| [2806](#L2806) | <tr> |
| [2807](#L2807) | <td>intl support</td> |
| [2808](#L2808) | <td><?php echo $intl\_support; ?></td> |
| [2809](#L2809) | <td><?php if ($intl\_support == 'Off'): ?> |
| [2810](#L2810) | <strong>"intl" library is required for proper sorting of accented (non-ASCII) characters.</strong> |
| [2811](#L2811) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2812](#L2812) | </tr> |
| [2813](#L2813) | <tr> |
| [2814](#L2814) | <td>iconv support</td> |
| [2815](#L2815) | <td><?php echo $iconv\_support; ?></td> |
| [2816](#L2816) | <td><?php if ($iconv\_support == 'Off'): ?> |
| [2817](#L2817) | <strong>"iconv" library is required for converting non-UTF-8 characters.</strong> |
| [2818](#L2818) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2819](#L2819) | </tr> |
| [2820](#L2820) | <tr> |
| [2821](#L2821) | <td>PHP Memory Limit</td> |
| [2822](#L2822) | <td><?php echo $memory\_limit; ?></td> |
| [2823](#L2823) | <td><?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2824](#L2824) | <strong>This value can be too low for a site with big glossary.</strong> |
| [2825](#L2825) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2826](#L2826) | </tr> |
| [2827](#L2827) | <tr> |
| [2828](#L2828) | <td>PHP Max Upload Size</td> |
| [2829](#L2829) | <td><?php echo $upload\_max; ?></td> |
| [2830](#L2830) | <td><?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2831](#L2831) | <strong>This value can be too low to import large files.</strong> |
| [2832](#L2832) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2833](#L2833) | </tr> |
| [2834](#L2834) | <tr> |
| [2835](#L2835) | <td>PHP Max Post Size</td> |
| [2836](#L2836) | <td><?php echo $post\_max; ?></td> |
| [2837](#L2837) | <td><?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2838](#L2838) | <strong>This value can be too low to import large files.</strong> |
| [2839](#L2839) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2840](#L2840) | </tr> |
| [2841](#L2841) | <tr> |
| [2842](#L2842) | <td>PHP Max Execution Time </td> |
| [2843](#L2843) | <td><?php echo $max\_execution\_time; ?></td> |
| [2844](#L2844) | <td><?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2845](#L2845) | <strong>This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit.</strong> |
| [2846](#L2846) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2847](#L2847) | </tr> |
| [2848](#L2848) | <tr> |
| [2849](#L2849) | <td>PHP cURL</td> |
| [2850](#L2850) | <td><?php echo $cURL; ?></td> |
| [2851](#L2851) | <td><?php if ($cURL == 'Off'): ?> |
| [2852](#L2852) | <strong>cURL library is required to check if remote audio file exists.</strong> |
| [2853](#L2853) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2854](#L2854) | </tr> |
| [2855](#L2855) | <tr> |
| [2856](#L2856) | <td>PHP allow\_url\_fopen</td> |
| [2857](#L2857) | <td><?php echo $allow\_url\_fopen; ?></td> |
| [2858](#L2858) | <td><?php if ($allow\_url\_fopen == '0'): ?> |
| [2859](#L2859) | <strong>allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API.</strong> |
| [2860](#L2860) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2861](#L2861) | </tr> |
| [2862](#L2862) | </table> |
| [2863](#L2863) | <?php |
| [2864](#L2864) | else: |
| [2865](#L2865) | ?> |
| [2866](#L2866) | Package Version         <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?>    OK |
| [2867](#L2867) |  |
| [2868](#L2868) | WordPress Version               <?php echo $wp\_version; ?> |
| [2869](#L2869) | <?php if (version\_compare($wp\_version, '3.3.0', '<')): ?>The minimum supported version of WordPress is 3.3<?php else: ?>OK<?php endif; ?> |
| [2870](#L2870) |  |
| [2871](#L2871) | Permalinks enabled              <?php echo ($permalink\_structure) ? 'Yes' : 'No' ?> |
| [2872](#L2872) | <?php if (empty($permalink\_structure)): ?>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a><?php else: ?>OK<?php endif; ?> |
| [2873](#L2873) |  |
| [2874](#L2874) | PHP Version             <?php echo phpversion(); ?> |
| [2875](#L2875) | <?php if (version\_compare(phpversion(), '5.3.0', '<')): ?>Recommended 5.3 or higher<?php else: ?>OK<?php endif; ?> |
| [2876](#L2876) |  |
| [2877](#L2877) | mbstring support                <?php echo $mb\_support; ?> |
| [2878](#L2878) | <?php if ($mb\_support == 'Off'): ?> |
| [2879](#L2879) | "mbstring" library is required for plugin to work. |
| [2880](#L2880) | <?php else: ?>OK<?php endif; ?> |
| [2881](#L2881) |  |
| [2882](#L2882) | intl support            <?php echo $intl\_support; ?> |
| [2883](#L2883) | <?php if ($intl\_support == 'Off'): ?> |
| [2884](#L2884) | "intl" library is required for proper sorting of accented characters on Glossary Index page. |
| [2885](#L2885) | <?php else: ?>OK<?php endif; ?> |
| [2886](#L2886) |  |
| [2887](#L2887) | PHP Memory Limit                <?php echo $memory\_limit; ?> |
| [2888](#L2888) | <?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2889](#L2889) | This value can be too low for a site with big glossary. |
| [2890](#L2890) | <?php else: ?>OK<?php endif; ?> |
| [2891](#L2891) |  |
| [2892](#L2892) | PHP Max Upload Size             <?php echo $upload\_max; ?> |
| [2893](#L2893) | <?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2894](#L2894) | This value can be too low to import large files. |
| [2895](#L2895) | <?php else: ?>OK<?php endif; ?> |
| [2896](#L2896) |  |
| [2897](#L2897) | PHP Max Post Size               <?php echo $post\_max; ?> |
| [2898](#L2898) | <?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2899](#L2899) | This value can be too low to import large files. |
| [2900](#L2900) | <?php else: ?>OK<?php endif; ?> |
| [2901](#L2901) |  |
| [2902](#L2902) | PHP Max Execution Time          <?php echo $max\_execution\_time; ?> |
| [2903](#L2903) | <?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2904](#L2904) | This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit. |
| [2905](#L2905) | <?php else: ?>OK<?php endif; ?> |
| [2906](#L2906) |  |
| [2907](#L2907) | PHP cURL                <?php echo $cURL; ?> |
| [2908](#L2908) | <?php if ($cURL == 'Off'): ?> |
| [2909](#L2909) | cURL library is required to check if remote audio file exists. |
| [2910](#L2910) | <?php else: ?>OK<?php endif; ?> |
| [2911](#L2911) |  |
| [2912](#L2912) | PHP allow\_url\_fopen             <?php echo $allow\_url\_fopen; ?> |
| [2913](#L2913) | <?php if ($allow\_url\_fopen == '0'): ?> |
| [2914](#L2914) | allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API. |
| [2915](#L2915) | <?php else: ?>OK<?php endif; ?> |
| [2916](#L2916) |  |
| [2917](#L2917) | <?php |
| [2918](#L2918) | endif; |
| [2919](#L2919) | $content .= ob\_get\_clean(); |
| [2920](#L2920) | return $content; |
| [2921](#L2921) | } |
| [2922](#L2922) |  |
| [2923](#L2923) | /\*\* |
| [2924](#L2924) | \* System info |
| [2925](#L2925) | \* |
| [2926](#L2926) | \* Shows the system info panel which contains version data and debug info. |
| [2927](#L2927) | \* The data for the system info is generated by the Browser class. |
| [2928](#L2928) | \* |
| [2929](#L2929) | \* @since 1.4 |
| [2930](#L2930) | \* @global $wpdb |
| [2931](#L2931) | \* @global object $wpdb Used to query the database using the WordPress |
| [2932](#L2932) | \*   Database API |
| [2933](#L2933) | \* @return void |
| [2934](#L2934) | \*/ |
| [2935](#L2935) | public function cminds\_system\_info() { |
| [2936](#L2936) | ?> |
| [2937](#L2937) | <div class=""> |
| [2938](#L2938) | <h2><?php \_\_('System Information', 'cminds-package'); ?></h2><br/> |
| [2939](#L2939) | <form action="<?php echo esc\_url(admin\_url('admin.php?page=cmtt\_licensing')); ?>" method="post" dir="ltr"> |
| [2940](#L2940) | <p class="submit"> |
| [2941](#L2941) | <?php wp\_nonce\_field( 'system\_information\_download\_form\_nonce', 'system\_information\_download\_form\_nonce' ); ?> |
| [2942](#L2942) | <input type="hidden" name="cminds\_action" value="download\_sysinfo" /> |
| [2943](#L2943) | <?php submit\_button('Download system information file', 'primary', 'cminds-download-sysinfo', false); ?> |
| [2944](#L2944) | </p> |
| [2945](#L2945) | <textarea class="cminds\_system\_info\_area" readonly="readonly" onclick="this.focus( ); |
| [2946](#L2946) | this.select( )" id="system-info-textarea" name="cminds-sysinfo" title="<?php \_e('To copy the system info, click below then press Ctrl + C (PC) or Cmd + C (Mac).', 'edd'); ?>"> |
| [2947](#L2947) | <?php $this->cminds\_system\_info\_content(); ?> |
| [2948](#L2948) | </textarea> |
| [2949](#L2949) | </form> |
| [2950](#L2950) | </div> |
| [2951](#L2951) | <?php |
| [2952](#L2952) | } |
| [2953](#L2953) |  |
| [2954](#L2954) | /\*\* |
| [2955](#L2955) | \* Generates the System Info Download File |
| [2956](#L2956) | \* |
| [2957](#L2957) | \* @since 1.4 |
| [2958](#L2958) | \* @return void |
| [2959](#L2959) | \*/ |
| [2960](#L2960) | public function cminds\_system\_info\_content() { |
| [2961](#L2961) | global $wpdb; |
| [2962](#L2962) |  |
| [2963](#L2963) | if (get\_bloginfo('version') < '3.4') { |
| [2964](#L2964) | $theme\_data = get\_theme\_data(get\_stylesheet\_directory() . '/style.css'); |
| [2965](#L2965) | $theme = $theme\_data['Name'] . ' ' . $theme\_data['Version']; |
| [2966](#L2966) | } else { |
| [2967](#L2967) | $theme\_data = wp\_get\_theme(); |
| [2968](#L2968) | $theme = $theme\_data->Name . ' ' . $theme\_data->Version; |
| [2969](#L2969) | } |
| [2970](#L2970) |  |
| [2971](#L2971) | // Try to identifty the hosting provider |
| [2972](#L2972) | $host = false; |
| [2973](#L2973) | if (defined('WPE\_APIKEY')) { |
| [2974](#L2974) | $host = 'WP Engine'; |
| [2975](#L2975) | } elseif (defined('PAGELYBIN')) { |
| [2976](#L2976) | $host = 'Pagely'; |
| [2977](#L2977) | } |
| [2978](#L2978) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2979](#L2979) | ?> |
| [2980](#L2980) | ### Begin System Info ### |
| [2981](#L2981) |  |
| [2982](#L2982) | ## Please include this information when posting support requests ## |
| [2983](#L2983) |  |
| [2984](#L2984) | <?php do\_action('cminds\_system\_info\_before'); ?> |
| [2985](#L2985) |  |
| [2986](#L2986) | Package Version:                <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?> |
| [2987](#L2987) |  |
| [2988](#L2988) | Multisite:                <?php echo is\_multisite() ? 'Yes' . "\n" : 'No' . "\n" ?> |
| [2989](#L2989) |  |
| [2990](#L2990) | SITE\_URL:                 <?php echo site\_url() . "\n"; ?> |
| [2991](#L2991) | HOME\_URL:                 <?php echo home\_url() . "\n"; ?> |
| [2992](#L2992) |  |
| [2993](#L2993) | WordPress Version:        <?php echo get\_bloginfo('version') . "\n"; ?> |
| [2994](#L2994) | Permalink Structure:      <?php echo get\_option('permalink\_structure') . "\n"; ?> |
| [2995](#L2995) | Active Theme:             <?php echo $theme . "\n"; ?> |
| [2996](#L2996) | <?php if ($host) : ?> |
| [2997](#L2997) | Host:                     <?php echo $host . "\n"; ?> |
| [2998](#L2998) | <?php endif; ?> |
| [2999](#L2999) |  |
| [3000](#L3000) | Registered Post Stati:    <?php echo implode(', ', get\_post\_stati()) . "\n\n"; ?> |
| [3001](#L3001) |  |
| [3002](#L3002) | PHP Version:              <?php echo PHP\_VERSION . "\n"; ?> |
| [3003](#L3003) | MySQL Version:            <?php echo (function\_exists('mysqli\_get\_server\_info')) ? mysqli\_get\_server\_info($wpdb->dbh) . "\n" : 'N/A' . "\n"; ?> |
| [3004](#L3004) | Web Server Info:          <?php echo $\_SERVER['SERVER\_SOFTWARE'] . "\n"; ?> |
| [3005](#L3005) |  |
| [3006](#L3006) | WordPress Memory Limit:   <?php echo WP\_MEMORY\_LIMIT ?><?php echo "\n"; ?> |
| [3007](#L3007) | PHP Memory Limit:         <?php echo ini\_get('memory\_limit') . "\n"; ?> |
| [3008](#L3008) | PHP Upload Max Size:      <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3009](#L3009) | PHP Post Max Size:        <?php echo ini\_get('post\_max\_size') . "\n"; ?> |
| [3010](#L3010) | PHP Upload Max Filesize:  <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3011](#L3011) | PHP Time Limit:           <?php echo ini\_get('max\_execution\_time') . "\n"; ?> |
| [3012](#L3012) | PHP Max Input Vars:       <?php echo ini\_get('max\_input\_vars') . "\n"; ?> |
| [3013](#L3013) | PHP Arg Separator:        <?php echo ini\_get('arg\_separator.output') . "\n"; ?> |
| [3014](#L3014) | PHP Allow URL File Open:  <?php echo ini\_get('allow\_url\_fopen') ? "Yes" : "No\n"; ?> |
| [3015](#L3015) |  |
| [3016](#L3016) | WP\_DEBUG:                 <?php echo defined('WP\_DEBUG') ? WP\_DEBUG ? 'Enabled' . "\n" : 'Disabled' . "\n" : 'Not set' . "\n" ?> |
| [3017](#L3017) |  |
| [3018](#L3018) | WP Table Prefix:          <?php |
| [3019](#L3019) | echo "Length: " . strlen($wpdb->prefix); |
| [3020](#L3020) | echo " Status:"; |
| [3021](#L3021) | if (strlen($wpdb->prefix) > 16) { |
| [3022](#L3022) | echo " ERROR: Too Long"; |
| [3023](#L3023) | } else { |
| [3024](#L3024) | echo " Acceptable"; |
| [3025](#L3025) | } echo "\n"; |
| [3026](#L3026) | ?> |
| [3027](#L3027) |  |
| [3028](#L3028) | Show On Front:            <?php echo get\_option('show\_on\_front') . "\n" ?> |
| [3029](#L3029) | Page On Front:            <?php |
| [3030](#L3030) | $id = get\_option('page\_on\_front'); |
| [3031](#L3031) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3032](#L3032) | ?> |
| [3033](#L3033) | Page For Posts:           <?php |
| [3034](#L3034) | $id = get\_option('page\_for\_posts'); |
| [3035](#L3035) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3036](#L3036) | ?> |
| [3037](#L3037) |  |
| [3038](#L3038) | <?php |
| [3039](#L3039) | $request['cmd'] = '\_notify-validate'; |
| [3040](#L3040) |  |
| [3041](#L3041) | $params = array( |
| [3042](#L3042) | 'sslverify'  => false, |
| [3043](#L3043) | 'timeout'    => 60, |
| [3044](#L3044) | 'user-agent' => 'Cminds/' . $this->getOption('plugin-version'), |
| [3045](#L3045) | 'body'       => $request |
| [3046](#L3046) | ); |
| [3047](#L3047) |  |
| [3048](#L3048) | $response = wp\_remote\_post('https://www.paypal.com/cgi-bin/webscr', $params); |
| [3049](#L3049) |  |
| [3050](#L3050) | if (!is\_wp\_error($response) && $response['response']['code'] >= 200 && $response['response']['code'] < 300) { |
| [3051](#L3051) | $WP\_REMOTE\_POST = 'wp\_remote\_post() works' . "\n"; |
| [3052](#L3052) | } else { |
| [3053](#L3053) | $WP\_REMOTE\_POST = 'wp\_remote\_post() does not work' . "\n"; |
| [3054](#L3054) | } |
| [3055](#L3055) | ?> |
| [3056](#L3056) | WP Remote Post:           <?php echo $WP\_REMOTE\_POST; ?> |
| [3057](#L3057) |  |
| [3058](#L3058) | Session:                  <?php echo isset($\_SESSION) ? 'Enabled' : 'Disabled'; ?><?php echo "\n"; ?> |
| [3059](#L3059) | Session Name:             <?php echo esc\_html(ini\_get('session.name')); ?><?php echo "\n"; ?> |
| [3060](#L3060) | Cookie Path:              <?php echo esc\_html(ini\_get('session.cookie\_path')); ?><?php echo "\n"; ?> |
| [3061](#L3061) | Save Path:                <?php echo esc\_html(ini\_get('session.save\_path')); ?><?php echo "\n"; ?> |
| [3062](#L3062) | Use Cookies:              <?php echo ini\_get('session.use\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3063](#L3063) | Use Only Cookies:         <?php echo ini\_get('session.use\_only\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3064](#L3064) |  |
| [3065](#L3065) | DISPLAY ERRORS:           <?php echo ( ini\_get('display\_errors') ) ? 'On (' . ini\_get('display\_errors') . ')' : 'N/A'; ?><?php echo "\n"; ?> |
| [3066](#L3066) | FSOCKOPEN:                <?php echo ( function\_exists('fsockopen') ) ? 'Your server supports fsockopen.' : 'Your server does not support fsockopen.'; ?><?php echo "\n"; ?> |
| [3067](#L3067) | cURL:                     <?php echo ( function\_exists('curl\_init') ) ? 'Your server supports cURL.' : 'Your server does not support cURL.'; ?><?php echo "\n"; ?> |
| [3068](#L3068) | SOAP Client:              <?php echo ( class\_exists('SoapClient') ) ? 'Your server has the SOAP Client enabled.' : 'Your server does not have the SOAP Client enabled.'; ?><?php echo "\n"; ?> |
| [3069](#L3069) | SUHOSIN:                  <?php echo ( extension\_loaded('suhosin') ) ? 'Your server has SUHOSIN installed.' : 'Your server does not have SUHOSIN installed.'; ?><?php echo "\n"; ?> |
| [3070](#L3070) |  |
| [3071](#L3071) | ##COMPATIBILITY |
| [3072](#L3072) |  |
| [3073](#L3073) | <?php echo $this->cminds\_compatibility\_check(true); ?> |
| [3074](#L3074) |  |
| [3075](#L3075) | ##ACTIVE PLUGINS: |
| [3076](#L3076) |  |
| [3077](#L3077) | <?php |
| [3078](#L3078) | $plugins = get\_plugins(); |
| [3079](#L3079) | $active\_plugins = get\_option('active\_plugins', array()); |
| [3080](#L3080) |  |
| [3081](#L3081) | foreach ($plugins as $plugin\_path => $plugin) { |
| [3082](#L3082) | // If the plugin isn't active, don't show it. |
| [3083](#L3083) | if (!in\_array($plugin\_path, $active\_plugins)) |
| [3084](#L3084) | continue; |
| [3085](#L3085) |  |
| [3086](#L3086) | echo $plugin['Name'] . ': ' . $plugin['Version'] . "\n"; |
| [3087](#L3087) | } |
| [3088](#L3088) |  |
| [3089](#L3089) | if (is\_multisite()) : |
| [3090](#L3090) | ?> |
| [3091](#L3091) |  |
| [3092](#L3092) | NETWORK ACTIVE PLUGINS: |
| [3093](#L3093) |  |
| [3094](#L3094) | <?php |
| [3095](#L3095) | $plugins = wp\_get\_active\_network\_plugins(); |
| [3096](#L3096) | $active\_plugins = get\_site\_option('active\_sitewide\_plugins', array()); |
| [3097](#L3097) |  |
| [3098](#L3098) | foreach ($plugins as $plugin\_path) { |
| [3099](#L3099) | $plugin\_base = plugin\_basename($plugin\_path); |
| [3100](#L3100) |  |
| [3101](#L3101) | // If the plugin isn't active, don't show it. |
| [3102](#L3102) | if (!array\_key\_exists($plugin\_base, $active\_plugins)) |
| [3103](#L3103) | continue; |
| [3104](#L3104) |  |
| [3105](#L3105) | $plugin = get\_plugin\_data($plugin\_path); |
| [3106](#L3106) |  |
| [3107](#L3107) | echo $plugin['Name'] . ' :' . $plugin['Version'] . "\n"; |
| [3108](#L3108) | } |
| [3109](#L3109) |  |
| [3110](#L3110) | endif; |
| [3111](#L3111) | do\_action('cminds\_system\_info\_after'); |
| [3112](#L3112) | ?> |
| [3113](#L3113) | ### End System Info ### |
| [3114](#L3114) | <?php |
| [3115](#L3115) | } |
| [3116](#L3116) |  |
| [3117](#L3117) | /\*\* |
| [3118](#L3118) | \* Generates the System Info Download File |
| [3119](#L3119) | \* |
| [3120](#L3120) | \* @since 1.4 |
| [3121](#L3121) | \* @return void |
| [3122](#L3122) | \*/ |
| [3123](#L3123) | public function cminds\_generate\_sysinfo\_download() { |
| [3124](#L3124) | if ( wp\_verify\_nonce( $\_POST['system\_information\_download\_form\_nonce'], 'system\_information\_download\_form\_nonce' ) ) { |
| [3125](#L3125) | nocache\_headers(); |
| [3126](#L3126) |  |
| [3127](#L3127) | header("Content-type: text/plain"); |
| [3128](#L3128) | header('Content-Disposition: attachment; filename="cminds-system-info.txt"'); |
| [3129](#L3129) |  |
| [3130](#L3130) | echo wp\_strip\_all\_tags($\_POST['cminds-sysinfo']); |
| [3131](#L3131) | die(); |
| [3132](#L3132) | } |
| [3133](#L3133) | } |
| [3134](#L3134) |  |
| [3135](#L3135) | public function getOption($key, $default = NULL) { |
| [3136](#L3136) | $value = isset($this->config[$key]) ? $this->config[$key] : $default; |
| [3137](#L3137) | return $value; |
| [3138](#L3138) | } |
| [3139](#L3139) |  |
| [3140](#L3140) | public function getPageUrl($pageBase = 'licensing') { |
| [3141](#L3141) | $pluginMenuPageBase = $this->pluginMenu; |
| [3142](#L3142) | $abbrev = $this->getOption('plugin-is-addon') ? $this->getOption('plugin-parent-abbrev') : $this->getOption('plugin-abbrev'); |
| [3143](#L3143) | if (empty($abbrev)) { |
| [3144](#L3144) | /\* |
| [3145](#L3145) | \* Abbrev not set for the plugin try to guess |
| [3146](#L3146) | \*/ |
| [3147](#L3147) | $abbrev = substr($this->getOption('plugin-abbrev'), 0, -1); |
| [3148](#L3148) | } |
| [3149](#L3149) | $page = $abbrev . '\_' . $pageBase; |
| [3150](#L3150) | if (FALSE === strpos($pluginMenuPageBase, '.php')) { |
| [3151](#L3151) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url('admin.php'))); |
| [3152](#L3152) | } else { |
| [3153](#L3153) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url($pluginMenuPageBase))); |
| [3154](#L3154) | } |
| [3155](#L3155) | return $pageUrl; |
| [3156](#L3156) | } |
| [3157](#L3157) |  |
| [3158](#L3158) | /\*\* |
| [3159](#L3159) | \* Converts the Apache memory values to number of bytes ini\_get('upload\_max\_filesize') or ini\_get('post\_max\_size') |
| [3160](#L3160) | \* @param type $str |
| [3161](#L3161) | \* @return type |
| [3162](#L3162) | \*/ |
| [3163](#L3163) | public static function cminds\_units2bytes($str) { |
| [3164](#L3164) | $units = array('B', 'K', 'M', 'G', 'T'); |
| [3165](#L3165) | $unit = preg\_replace('/[0-9]/', '', $str); |
| [3166](#L3166) | $unitFactor = array\_search(strtoupper($unit), $units); |
| [3167](#L3167) | if ($unitFactor !== false) { |
| [3168](#L3168) | return preg\_replace('/[a-z]/i', '', $str) \* pow(2, 10 \* $unitFactor); |
| [3169](#L3169) | } |
| [3170](#L3170) | } |
| [3171](#L3171) |  |
| [3172](#L3172) | public static function cminds\_set\_content\_type() { |
| [3173](#L3173) | return "text/html"; |
| [3174](#L3174) | } |
| [3175](#L3175) |  |
| [3176](#L3176) | } |
| [3177](#L3177) |  |
| [3178](#L3178) | } |
| [3179](#L3179) |  |
| [3180](#L3180) | /\* |
| [3181](#L3181) | \* Load the config |
| [3182](#L3182) | \*/ |
| [3183](#L3183) | global $cmindsPluginPackage; |
| [3184](#L3184) | include('cminds-plugin-config.php'); |
| [3185](#L3185) | $cmindsPluginPackage[$cminds\_plugin\_config['plugin-abbrev']] = new CmindsFreePackage($cminds\_plugin\_config); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/enhanced-tooltipglossary/trunk/package/cminds-free.php?format=txt)
* [Original Format](/export/3222474/enhanced-tooltipglossary/trunk/package/cminds-free.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_f4653fbe_20250114_205540.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fcm-header-footer-script-loader%2Ftrunk%2Fpackage%2Fcminds-free.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/cm-header-footer-script-loader/trunk/package/cminds-free.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/cm-header-footer-script-loader/trunk/package/cminds-free.php)

---

# [source:](/browser?order=name "Go to repository root") [cm-header-footer-script-loader](/browser/cm-header-footer-script-loader?order=name "View cm-header-footer-script-loader")/[trunk](/browser/cm-header-footer-script-loader/trunk?order=name "View trunk")/[package](/browser/cm-header-footer-script-loader/trunk/package?order=name "View package")/[cminds-free.php](/browser/cm-header-footer-script-loader/trunk/package/cminds-free.php?order=name "View cminds-free.php")

View diff against:

View revision:

| [Last change](/changeset/3222165/cm-header-footer-script-loader/trunk/package/cminds-free.php "View differences") on this file was [3222165](/changeset/3222165/ "View changeset 3222165"), checked in by CreativeMindsSolutions, [10 hours ago](/timeline?from=2025-01-14T10%3A52%3A55Z&precision=second "See timeline at 01/14/2025 10:52:55 AM") |
| --- |
| new version with a new interface |
| **File size:** 141.1 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | namespace com\cminds\package\free\v1\_1\_5; |
| [3](#L3) |  |
| [4](#L4) | if (!defined(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION')) { |
| [5](#L5) | define(\_\_NAMESPACE\_\_ . '\PLATFORM\_VERSION', '1\_1\_5'); |
| [6](#L6) | } |
| [7](#L7) | if (!class\_exists(\_\_NAMESPACE\_\_ . '\CmindsFreePackage')) { |
| [8](#L8) |  |
| [9](#L9) | class CmindsFreePackage { |
| [10](#L10) |  |
| [11](#L11) | private $config = array(); |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* LicensingAPI object |
| [15](#L15) | \* @var CmindsLicensingAPI |
| [16](#L16) | \*/ |
| [17](#L17) | public $licensingApi = null; |
| [18](#L18) | private $pluginMenu = null; |
| [19](#L19) | private $pluginMenuPage = null; |
| [20](#L20) |  |
| [21](#L21) | const SHAREBOX\_FLAT = 0; |
| [22](#L22) | const SHAREBOX\_SQUARE = 1; |
| [23](#L23) | const ADS\_REFRESH\_INTERVAL = 7776000; // 3600 \* 24 \* 90 = 3 months |
| [24](#L24) |  |
| [25](#L25) | public function \_\_construct($config) { |
| [26](#L26) | $this->config = $config; |
| [27](#L27) |  |
| [28](#L28) | $this->pluginMenu = $this->getOption('plugin-menu-item'); |
| [29](#L29) | $this->pluginMenuPage = $this->getPageUrl('licensing'); |
| [30](#L30) |  |
| [31](#L31) | add\_action('activated\_plugin', array($this, 'redirectAfterInstall'), 10, 2); |
| [32](#L32) | add\_action('admin\_init', array($this, 'updatePoweredByOption')); |
| [33](#L33) | add\_action('admin\_init', array($this, 'registerAdminActions')); |
| [34](#L34) | add\_action('admin\_menu', array($this, 'updateMenu'), 21); |
| [35](#L35) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminStyles')); |
| [36](#L36) | add\_action('admin\_enqueue\_scripts', array($this, 'enqueueAdminScripts')); |
| [37](#L37) |  |
| [38](#L38) | $aboutPageKey = $this->getPageSlug(); |
| [39](#L39) | add\_action('cminds-' . $aboutPageKey . '-content-1', array($this, 'displayUserGuideTab')); |
| [40](#L40) | add\_action('cminds-' . $aboutPageKey . '-content-10', array($this, 'displayCreativeMindsTab')); |
| [41](#L41) | add\_action('cminds-' . $aboutPageKey . '-content-30', array($this, 'displayMembershipTab')); |
| [42](#L42) | add\_action('cminds-' . $aboutPageKey . '-content-40', array($this, 'displayCMProductTab')); |
| [43](#L43) | add\_action('cminds-' . $aboutPageKey . '-content-50', array($this, 'displayCMAddOnsTab')); |
| [44](#L44) | add\_action('cminds-' . $aboutPageKey . '-content-60', array($this, 'displayVideoGuidesTab')); |
| [45](#L45) | add\_action('cminds-' . $aboutPageKey . '-content-99', array($this, 'displaySupportTab')); |
| [46](#L46) | add\_action('cminds-' . $aboutPageKey . '-content-199', array($this, 'displayServerInformationTab')); |
| [47](#L47) |  |
| [48](#L48) | add\_action('cminds\_download\_sysinfo', array($this, 'cminds\_generate\_sysinfo\_download')); |
| [49](#L49) |  |
| [50](#L50) | add\_action('init', array($this, 'cminds\_get\_actions')); |
| [51](#L51) | add\_action('init', array($this, 'cminds\_post\_actions')); |
| [52](#L52) |  |
| [53](#L53) | add\_shortcode('cminds\_free\_author', array($this, 'showAuthor')); |
| [54](#L54) | add\_shortcode('cminds\_free\_registration', array($this, 'showRegistration')); |
| [55](#L55) | add\_shortcode('cminds\_free\_guide', array($this, 'showGuide')); |
| [56](#L56) | add\_shortcode('cminds\_upgrade\_box', array($this, 'showUpgrade')); |
| [57](#L57) | add\_shortcode('cminds\_free\_activation', array($this, 'showActivation')); |
| [58](#L58) |  |
| [59](#L59) | add\_filter('plugin\_row\_meta', array($this, 'add\_plugin\_meta\_links'), 10, 2); |
| [60](#L60) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'add\_plugin\_action\_links')); |
| [61](#L61) |  |
| [62](#L62) | add\_action('wp\_dashboard\_setup', array($this, 'addDashboardWidget')); |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | public function addDashboardWidget() { |
| [66](#L66) | if ($this->isRegistered()) { |
| [67](#L67) | wp\_add\_dashboard\_widget('cminds\_package\_dashboard\_widget', \_\_('CreativeMinds WordPress News', 'cminds-package'), array($this, 'showCMDashboardWidget')); |
| [68](#L68) | } |
| [69](#L69) | } |
| [70](#L70) |  |
| [71](#L71) | public function showCMDashboardWidget() { |
| [72](#L72) | $feeds = array( |
| [73](#L73) | array( |
| [74](#L74) | 'url'          => 'https://www.cminds.com/category/wordpress/feed/', |
| [75](#L75) | 'items'        => 6, |
| [76](#L76) | 'show\_summary' => 0, |
| [77](#L77) | 'show\_author'  => 0, |
| [78](#L78) | 'show\_date'    => 1, |
| [79](#L79) | ), |
| [80](#L80) | ); |
| [81](#L81) |  |
| [82](#L82) | wp\_dashboard\_primary\_output('cminds\_package\_dashboard\_widget', $feeds); |
| [83](#L83) | ?> |
| [84](#L84) | <br><hr> |
| [85](#L85) | <p> |
| [86](#L86) | <?php |
| [87](#L87) | printf( |
| [88](#L88) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/', \_\_('cminds.com'), \_\_('(opens in a new window)') |
| [89](#L89) | ); |
| [90](#L90) | ?> |
| [91](#L91) |  |
| [92](#L92) | | |
| [93](#L93) |  |
| [94](#L94) | <?php |
| [95](#L95) | printf( |
| [96](#L96) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', 'https://www.cminds.com/wordpress-plugins/', \_\_('CM WordPress Plugins'), \_\_('(opens in a new window)') |
| [97](#L97) | ); |
| [98](#L98) | ?> |
| [99](#L99) |  |
| [100](#L100) | | |
| [101](#L101) |  |
| [102](#L102) | <?php |
| [103](#L103) | printf( |
| [104](#L104) | '<a href="%1$s" target="\_blank">%2$s <span class="screen-reader-text">%3$s</span><span aria-hidden="true" class="dashicons dashicons-external"></span></a>', esc\_url(\_x('https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/', '99+ WordPress Plugins Bundle')), \_\_('99+ WordPress Plugins Bundle'), \_\_('(opens in a new window)') |
| [105](#L105) | ); |
| [106](#L106) | ?> |
| [107](#L107) | </p> |
| [108](#L108) | <?php |
| [109](#L109) | } |
| [110](#L110) |  |
| [111](#L111) | public function redirectAfterInstall($plugin, $network\_activation = false) { |
| [112](#L112) | global $cmindsPluginPackage; |
| [113](#L113) | $the\_package = null; |
| [114](#L114) |  |
| [115](#L115) | foreach ($cmindsPluginPackage as $package) { |
| [116](#L116) | $basename = $package->getOption('plugin-basename'); |
| [117](#L117) | if ($basename == $plugin) { |
| [118](#L118) | $the\_package = $package; |
| [119](#L119) | break; |
| [120](#L120) | } |
| [121](#L121) | } |
| [122](#L122) |  |
| [123](#L123) | if ($the\_package && $the\_package->getOption('plugin-redirect-after-install')) { |
| [124](#L124) | $url = $the\_package->getOption('plugin-redirect-after-install'); |
| [125](#L125) | $isBulkActivate = array(); |
| [126](#L126) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action2'); |
| [127](#L127) | $isBulkActivate[] = filter\_input(INPUT\_POST, 'action'); |
| [128](#L128) | if (!empty($url) && !in\_array('activate-selected', $isBulkActivate)) { |
| [129](#L129) | wp\_redirect($url); |
| [130](#L130) | exit(); |
| [131](#L131) | } |
| [132](#L132) | } |
| [133](#L133) | } |
| [134](#L134) |  |
| [135](#L135) | /\*\* |
| [136](#L136) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [137](#L137) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [138](#L138) | \* functions are called on init. |
| [139](#L139) | \* |
| [140](#L140) | \* @since 1.0 |
| [141](#L141) | \* @return void |
| [142](#L142) | \*/ |
| [143](#L143) | public function registerAdminActions() { |
| [144](#L144) | if (is\_admin()) { |
| [145](#L145) | // If user is paying or in trial and have the free version installed, |
| [146](#L146) | // assume that the deactivation is for the upgrade process. |
| [147](#L147) | add\_action('wp\_ajax\_cm-submit-uninstall-reason', array($this, 'submitUninstallReason')); |
| [148](#L148) | add\_action('wp\_ajax\_cm-submit-registration-email', array($this, 'submitRegistrationEmail')); |
| [149](#L149) | add\_action('wp\_ajax\_cm-submit-deregistration', array($this, 'submitDeregistration')); |
| [150](#L150) | add\_action('wp\_ajax\_cm-submit-registration-skip', array($this, 'submitRegistrationSkip')); |
| [151](#L151) |  |
| [152](#L152) | global $pagenow; |
| [153](#L153) | if ('plugins.php' === $pagenow) { |
| [154](#L154) | // Add action link to settings page. |
| [155](#L155) | add\_filter('plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [156](#L156) | add\_filter('network\_admin\_plugin\_action\_links\_' . $this->getOption('plugin-basename'), array($this, 'modifyPluginActionLinks'), 10, 2); |
| [157](#L157) | add\_action('admin\_footer', array($this, 'showDeactivationFeedbackDialog'), 11); |
| [158](#L158) | } |
| [159](#L159) | } |
| [160](#L160) | } |
| [161](#L161) |  |
| [162](#L162) | /\*\* |
| [163](#L163) | \* Modify plugin's page action links collection. |
| [164](#L164) | \* |
| [165](#L165) | \* @author Vova Feldman (@svovaf) |
| [166](#L166) | \* @since  1.0.0 |
| [167](#L167) | \* |
| [168](#L168) | \* @param array $links |
| [169](#L169) | \* @param       $file |
| [170](#L170) | \* |
| [171](#L171) | \* @return array |
| [172](#L172) | \*/ |
| [173](#L173) | function modifyPluginActionLinks($links, $file) { |
| [174](#L174) | /\* |
| [175](#L175) | \* This HTML element is used to identify the correct plugin when attaching an event to its Deactivate link. |
| [176](#L176) | \*/ |
| [177](#L177) | if (isset($links['deactivate'])) { |
| [178](#L178) | $links['deactivate'] .= '<i class="cm-slug" data-slug="' . $this->getOption('plugin-abbrev') . '"></i>'; |
| [179](#L179) | } |
| [180](#L180) |  |
| [181](#L181) | return $links; |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | /\*\* |
| [185](#L185) | \* Displays a confirmation and feedback dialog box when the user clicks on the "Deactivate" link on the plugins |
| [186](#L186) | \* page. |
| [187](#L187) | \* |
| [188](#L188) | \*/ |
| [189](#L189) | function showDeactivationFeedbackDialog() { |
| [190](#L190) | $content = ''; |
| [191](#L191) | ob\_start(); |
| [192](#L192) | include\_once 'views/deactivation\_feedback\_modal.php'; |
| [193](#L193) | $content .= ob\_get\_clean(); |
| [194](#L194) | echo $content; |
| [195](#L195) | } |
| [196](#L196) |  |
| [197](#L197) | function filterDeactivationReason($reason) { |
| [198](#L198) |  |
| [199](#L199) | if (strlen($reason) < 20) { |
| [200](#L200) | return ''; |
| [201](#L201) | } |
| [202](#L202) | if (str\_word\_count($reason) < 4) { |
| [203](#L203) | return ''; |
| [204](#L204) | } |
| [205](#L205) |  |
| [206](#L206) | $dirty\_words = array('shit', 'fuck', 'wtf'); |
| [207](#L207) | foreach ($dirty\_words as $a) { |
| [208](#L208) | if (stripos($reason, $a) !== false) { |
| [209](#L209) | return ''; |
| [210](#L210) | } |
| [211](#L211) | } |
| [212](#L212) |  |
| [213](#L213) | return $reason; |
| [214](#L214) | } |
| [215](#L215) |  |
| [216](#L216) | /\*\* |
| [217](#L217) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [218](#L218) | \* @since  1.1.2 |
| [219](#L219) | \*/ |
| [220](#L220) | function submitRegistrationEmail() { |
| [221](#L221) | $atts = array(); |
| [222](#L222) |  |
| [223](#L223) | if (empty($\_POST['email'])) { |
| [224](#L224) | exit; |
| [225](#L225) | } |
| [226](#L226) |  |
| [227](#L227) | $this->registerUser($atts); |
| [228](#L228) | } |
| [229](#L229) |  |
| [230](#L230) | /\*\* |
| [231](#L231) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [232](#L232) | \* @since  1.1.2 |
| [233](#L233) | \*/ |
| [234](#L234) | function submitDeregistration() { |
| [235](#L235) | $atts = array(); |
| [236](#L236) |  |
| [237](#L237) | $this->deregisterUser($atts); |
| [238](#L238) | } |
| [239](#L239) |  |
| [240](#L240) | /\*\* |
| [241](#L241) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [242](#L242) | \* @since  1.1.2 |
| [243](#L243) | \*/ |
| [244](#L244) | function submitRegistrationSkip() { |
| [245](#L245) | if (empty($\_POST)) { |
| [246](#L246) | exit; |
| [247](#L247) | } |
| [248](#L248) | $atts = array(); |
| [249](#L249) | if (!empty($\_POST['id'])) { |
| [250](#L250) | $atts['id'] = sanitize\_text\_field($\_POST['id']); |
| [251](#L251) | } |
| [252](#L252) | $this->skipRegistration($atts); |
| [253](#L253) | } |
| [254](#L254) |  |
| [255](#L255) | /\*\* |
| [256](#L256) | \* Called after the user has submitted his reason for deactivating the plugin. |
| [257](#L257) | \* @since  1.1.2 |
| [258](#L258) | \*/ |
| [259](#L259) | function submitUninstallReason() { |
| [260](#L260) | if (empty($\_POST['plugin\_slug']) || empty($\_POST['deactivation\_reason'])) { |
| [261](#L261) | exit; |
| [262](#L262) | } |
| [263](#L263) |  |
| [264](#L264) | $reason = isset($\_REQUEST['deactivation\_reason']) ? trim(esc\_html(stripslashes(strip\_tags($\_REQUEST['deactivation\_reason'])))) : ''; |
| [265](#L265) | $filteredReason = $this->filterDeactivationReason($reason); |
| [266](#L266) | $postedEmail = isset($\_POST['contact\_email']) && is\_email(trim($\_POST['contact\_email'])) ? sanitize\_text\_field($\_POST['contact\_email']) : null; |
| [267](#L267) |  |
| [268](#L268) | /\* |
| [269](#L269) | \* Only send the e-mail if the filtered reason is not empty |
| [270](#L270) | \*/ |
| [271](#L271) | if (!empty($filteredReason)) { |
| [272](#L272) | global $cmindsPluginPackage; |
| [273](#L273) | $package = $cmindsPluginPackage[$\_POST['plugin\_slug']]; |
| [274](#L274) |  |
| [275](#L275) | $fields = array( |
| [276](#L276) | 'product\_name' => $package->getOption('plugin-name'), |
| [277](#L277) | 'remote\_url'   => get\_bloginfo('wpurl'), |
| [278](#L278) | 'email'        => null !== $postedEmail ? $postedEmail : get\_bloginfo('admin\_email'), |
| [279](#L279) | 'want\_contact' => isset($\_POST['want\_contact']) ? 'true' === $\_POST['want\_contact'] : false, |
| [280](#L280) | 'data\_agree'   => isset($\_POST['data\_agree']) ? 'true' === $\_POST['data\_agree'] : true, |
| [281](#L281) | ); |
| [282](#L282) |  |
| [283](#L283) | $registered = $this->isRegistered($\_POST['plugin\_slug']) ? ' (registered)' : ''; |
| [284](#L284) | $message = '<p>The ' . $fields['product\_name'] . ' has been deactivated on ' . $fields['remote\_url'] . ' by ' . $fields['email'] . $registered . '.</p> <p>The reason was:</p> <p><strong>' . $filteredReason . '</strong></p>'; |
| [285](#L285) | $message .= '<br/><hr/>'; |
| [286](#L286) |  |
| [287](#L287) | $mail = 'support@cminds.com'; |
| [288](#L288) |  |
| [289](#L289) | if ($fields['want\_contact']) { |
| [290](#L290) | $message .= '<p>This user is interested in contact from our side.</p>'; |
| [291](#L291) | $message .= '<br/><hr/>'; |
| [292](#L292) | $mail = 'support@cminds.com'; |
| [293](#L293) | } |
| [294](#L294) |  |
| [295](#L295) | if ($fields['data\_agree']) { |
| [296](#L296) | $message .= '<p>SYSTEM INFORMATION BELOW:</p>'; |
| [297](#L297) | ob\_start(); |
| [298](#L298) | echo '<pre>'; |
| [299](#L299) | echo $this->cminds\_system\_info\_content(); |
| [300](#L300) | echo '</pre>'; |
| [301](#L301) | $message .= ob\_get\_clean(); |
| [302](#L302) | } |
| [303](#L303) |  |
| [304](#L304) | $message .= '<p>END OF SYSTEM INFORMATION</p>'; |
| [305](#L305) |  |
| [306](#L306) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [307](#L307) | $result = wp\_mail($mail, 'CM Free Plugin Deactivation Feedback', $message); |
| [308](#L308) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [309](#L309) | } |
| [310](#L310) |  |
| [311](#L311) |  |
| [312](#L312) | // Print '1' for successful operation. |
| [313](#L313) | echo 1; |
| [314](#L314) | exit; |
| [315](#L315) | } |
| [316](#L316) |  |
| [317](#L317) | /\*\* |
| [318](#L318) | \* Hooks Cminds actions, when present in the $\_GET superglobal. Every Cminds\_action |
| [319](#L319) | \* present in $\_GET is called using WordPress's do\_action function. These |
| [320](#L320) | \* functions are called on init. |
| [321](#L321) | \* |
| [322](#L322) | \* @since 1.0 |
| [323](#L323) | \* @return void |
| [324](#L324) | \*/ |
| [325](#L325) | public function cminds\_get\_actions() { |
| [326](#L326) | if (isset($\_GET['cminds\_action'])) { |
| [327](#L327) | do\_action('cminds\_' . $\_GET['cminds\_action'], $\_GET); |
| [328](#L328) | } |
| [329](#L329) | } |
| [330](#L330) |  |
| [331](#L331) | /\*\* |
| [332](#L332) | \* Hooks Cminds actions, when present in the $\_POST superglobal. Every Cminds\_action |
| [333](#L333) | \* present in $\_POST is called using WordPress's do\_action function. These |
| [334](#L334) | \* functions are called on init. |
| [335](#L335) | \* |
| [336](#L336) | \* @since 1.0 |
| [337](#L337) | \* @return void |
| [338](#L338) | \*/ |
| [339](#L339) | public function cminds\_post\_actions() { |
| [340](#L340) | if (isset($\_POST['cminds\_action'])) { |
| [341](#L341) | do\_action('cminds\_' . $\_POST['cminds\_action'], $\_POST); |
| [342](#L342) | } |
| [343](#L343) | } |
| [344](#L344) |  |
| [345](#L345) | public function updatePoweredByOption() { |
| [346](#L346) | $optionValue = filter\_input(INPUT\_POST, $this->getPoweredByOption()); |
| [347](#L347) | $submitValue = filter\_input(INPUT\_POST, 'cminds\_poweredby\_change'); |
| [348](#L348) |  |
| [349](#L349) | if (null !== $optionValue || null !== $submitValue) { |
| [350](#L350) | if(is\_admin() && is\_user\_logged\_in() && current\_user\_can('manage\_options')) { |
| [351](#L351) | update\_option($this->getPoweredByOption(), $optionValue); |
| [352](#L352) | } |
| [353](#L353) | } |
| [354](#L354) | } |
| [355](#L355) |  |
| [356](#L356) | public function getPoweredByOption() { |
| [357](#L357) | $optionName = $this->getOption('plugin-abbrev') . '-powered-by-enabled'; |
| [358](#L358) | return $optionName; |
| [359](#L359) | } |
| [360](#L360) |  |
| [361](#L361) | /\*\* |
| [362](#L362) | \* Default is 0 (disabled) |
| [363](#L363) | \* @return type |
| [364](#L364) | \*/ |
| [365](#L365) | public function isPoweredByEnabled() { |
| [366](#L366) | $result = get\_option($this->getPoweredByOption(), 0); |
| [367](#L367) | return $result; |
| [368](#L368) | } |
| [369](#L369) |  |
| [370](#L370) | /\*\* |
| [371](#L371) | \* Returns the author Url (for free version only) |
| [372](#L372) | \*/ |
| [373](#L373) | public function showAuthor($atts = array()) { |
| [374](#L374) | $authorUrl = ''; |
| [375](#L375) | global $cmindsPluginPackage; |
| [376](#L376) |  |
| [377](#L377) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [378](#L378) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [379](#L379) |  |
| [380](#L380) | if (!$currentPlugin->isPoweredByEnabled()) { |
| [381](#L381) | return; |
| [382](#L382) | } |
| [383](#L383) | ob\_start(); |
| [384](#L384) | ?> |
| [385](#L385) | <style> |
| [386](#L386) | .cminds\_poweredby {clear:both;float:none;font-size:11px;line-height:1.5;display: inline-block;padding: 3px;margin-top:20px;color:#bbb;text-decoration:none;font-weight:bold} |
| [387](#L387) | .cminds\_poweredby:before {content:'Powered by ';} |
| [388](#L388) | .cminds\_poweredbylink:link{color:#bbb;text-decoration:none;} |
| [389](#L389) | .cminds\_poweredbylink:visited{color:#bbb;text-decoration:none;} |
| [390](#L390) | .cminds\_poweredbylink:hover{color:#bbb;text-decoration:none;} |
| [391](#L391) | </style> |
| [392](#L392) |  |
| [393](#L393) | <?php |
| [394](#L394) | $authorUrl .= ob\_get\_clean(); |
| [395](#L395) | /\* |
| [396](#L396) | \* By leaving following snippet in the code, you're expressing your gratitude to creators of this plugin. Thank You! |
| [397](#L397) | \*/ |
| [398](#L398) | $authorUrl .= '<div style="display:block;clear:both;"></div><span class="cminds\_poweredby">'; |
| [399](#L399) | $authorUrl .= '<a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/') . '" target="\_blank" class="cminds\_poweredbylink">CreativeMinds</a> '; |
| [400](#L400) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode('https://www.cminds.com/wordpress-plugins/') . '" target="\_blank" class="cminds\_poweredbylink">WordPress Plugin</a>'; |
| [401](#L401) | $authorUrl .= ' <a href="' . $currentPlugin->addAffiliateCode($currentPlugin->getOption('plugin-store-url')) . '" target="\_blank" class="cminds\_poweredbylink">' . $currentPlugin->getOption('plugin-name') . '</a>'; |
| [402](#L402) | $authorUrl .= '</span><div style="display:block;clear:both;"></div>'; |
| [403](#L403) |  |
| [404](#L404) | return $authorUrl; |
| [405](#L405) | } |
| [406](#L406) |  |
| [407](#L407) | /\* |
| [408](#L408) | \* Licensing Page Tabs |
| [409](#L409) | \*/ |
| [410](#L410) |  |
| [411](#L411) | public function displayUpgradeTutorialTab() { |
| [412](#L412) | $content = ''; |
| [413](#L413) | ob\_start(); |
| [414](#L414) | ?> |
| [415](#L415) | <div> |
| [416](#L416) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Customer Dashboard</a> |
| [417](#L417) | </div> |
| [418](#L418) | <br/> |
| [419](#L419) | <div> |
| [420](#L420) | <?php |
| [421](#L421) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134692135?title=0&byline=0&portrait=0" width="500" height="280"]'); |
| [422](#L422) | ?> |
| [423](#L423) | </div> |
| [424](#L424) | <?php |
| [425](#L425) | $content .= ob\_get\_clean(); |
| [426](#L426) | return $content; |
| [427](#L427) | } |
| [428](#L428) |  |
| [429](#L429) | public function displayManageProductsTab() { |
| [430](#L430) | $content = ''; |
| [431](#L431) | ob\_start(); |
| [432](#L432) | ?> |
| [433](#L433) | <div> |
| [434](#L434) | <a href="https://www.cminds.com/guest-account/" class="btn button button-primary" target="\_blank">Open CreativeMinds Customer Dashboard</a> |
| [435](#L435) | </div> |
| [436](#L436) | <br/> |
| [437](#L437) | <div> |
| [438](#L438) | <?php |
| [439](#L439) | echo do\_shortcode('[video src="https://player.vimeo.com/video/134490629?title=0&byline=0&portrait=0" width="640" height="360"]'); |
| [440](#L440) | ?> |
| [441](#L441) | </div> |
| [442](#L442) | <?php |
| [443](#L443) | $content .= ob\_get\_clean(); |
| [444](#L444) | return $content; |
| [445](#L445) | } |
| [446](#L446) |  |
| [447](#L447) | public function displayServerInformationTab() { |
| [448](#L448) | global $wp\_version; |
| [449](#L449) | $content = ''; |
| [450](#L450) |  |
| [451](#L451) | ob\_start(); |
| [452](#L452) | echo $this->cminds\_compatibility\_check(); |
| [453](#L453) | echo $this->cminds\_system\_info(); |
| [454](#L454) | $content .= ob\_get\_clean(); |
| [455](#L455) | return $content; |
| [456](#L456) | } |
| [457](#L457) |  |
| [458](#L458) | /\* |
| [459](#L459) | \* About/User Guide Page Tabs |
| [460](#L460) | \*/ |
| [461](#L461) |  |
| [462](#L462) | public function displayUserGuideTab() { |
| [463](#L463) | $content = ''; |
| [464](#L464) | ob\_start(); |
| [465](#L465) | ?> |
| [466](#L466) | <div> |
| [467](#L467) | <a href="<?php echo $this->getUserguideUrl(); ?>" class="btn button button-primary" target="\_blank">Open User Guide in a new tab</a> |
| [468](#L468) | </div> |
| [469](#L469) | <?php |
| [470](#L470) | $content .= ob\_get\_clean(); |
| [471](#L471) | return $content; |
| [472](#L472) | } |
| [473](#L473) |  |
| [474](#L474) | public function displayUpgradeToProTab() { |
| [475](#L475) | $content = ''; |
| [476](#L476) | $upgradeToProHtml = $this->getOption('plugin-compare-table'); |
| [477](#L477) | $pluginUrl = $this->getOption('plugin-store-url'); |
| [478](#L478) | wp\_enqueue\_script('jquery-ui-tooltip'); |
| [479](#L479) | ob\_start(); |
| [480](#L480) | ?> |
| [481](#L481) | <script> |
| [482](#L482) | jQuery(document).ready(function () { |
| [483](#L483) | jQuery(".cminds-package-show-tooltip").tooltip(); |
| [484](#L484) | }); |
| [485](#L485) | </script> |
| [486](#L486) | <style type="text/css"> |
| [487](#L487) | .pricing-table ul{ |
| [488](#L488) | border-width: 1px; |
| [489](#L489) | border-style: solid; |
| [490](#L490) | border-color: #CCCCCC; |
| [491](#L491) | border-radius: 3px; |
| [492](#L492) | margin: 4px; |
| [493](#L493) | text-align: center; |
| [494](#L494) | font-family: 'Arial'; |
| [495](#L495) | list-style: none; |
| [496](#L496) | float: left; |
| [497](#L497) | padding: 4px; |
| [498](#L498) | background-color: #FFFFFF; |
| [499](#L499) | max-width: 24%; |
| [500](#L500) | } |
| [501](#L501) | .pricing-table ul li{ |
| [502](#L502) | padding: 7px; |
| [503](#L503) | background-color: #EFEFEF; |
| [504](#L504) | border-width: 2px; |
| [505](#L505) | border-color: #B83737; |
| [506](#L506) | border-radius: 0px; |
| [507](#L507) | border-bottom-width: 2px; |
| [508](#L508) | font-size: 13px; |
| [509](#L509) | } |
| [510](#L510) | .pricing-table li:nth-child(odd){ |
| [511](#L511) | background-color: transparent; |
| [512](#L512) | } |
| [513](#L513) | .pricing-table ul .heading{ |
| [514](#L514) | color: #FFFFFF; |
| [515](#L515) | background-color: #659b2e; |
| [516](#L516) | font-size: 19px; |
| [517](#L517) | text-align: center; |
| [518](#L518) | } |
| [519](#L519) | .pricing-table ul .price{ |
| [520](#L520) | font-size: 25px; |
| [521](#L521) | } |
| [522](#L522) | .pricing-table ul .action{ |
| [523](#L523) | font-size: 13px; |
| [524](#L524) | color: #FFFFFF; |
| [525](#L525) | } |
| [526](#L526) | .pricing-table .action a{ |
| [527](#L527) | border-color: #B83737; |
| [528](#L528) | border-width: 0px; |
| [529](#L529) | background-color: #659b2e; |
| [530](#L530) | padding-top: 7px; |
| [531](#L531) | padding-bottom: 7px; |
| [532](#L532) | padding-left: 15px; |
| [533](#L533) | padding-right: 15px; |
| [534](#L534) | border-style: solid; |
| [535](#L535) | color: #FFFFFF; |
| [536](#L536) | } |
| [537](#L537) | .pricing-table ul .noaction{ |
| [538](#L538) | font-size: 13px; |
| [539](#L539) | color: #FFFFFF; |
| [540](#L540) | } |
| [541](#L541) | .pricing-table .noaction span{ |
| [542](#L542) | border-color: #B83737; |
| [543](#L543) | border-width: 0px; |
| [544](#L544) | background-color: #b2b2b2; |
| [545](#L545) | padding-top: 7px; |
| [546](#L546) | padding-bottom: 7px; |
| [547](#L547) | padding-left: 15px; |
| [548](#L548) | padding-right: 15px; |
| [549](#L549) | border-style: solid; |
| [550](#L550) | color: #FFFFFF; |
| [551](#L551) | } |
| [552](#L552) |  |
| [553](#L553) | </style> |
| [554](#L554) | <br> |
| [555](#L555) | <div> |
| [556](#L556) | <?php echo $upgradeToProHtml; ?> |
| [557](#L557) | </div> |
| [558](#L558) | <?php |
| [559](#L559) | $content .= ob\_get\_clean(); |
| [560](#L560) | return $content; |
| [561](#L561) | } |
| [562](#L562) |  |
| [563](#L563) | public function displayCreativeMindsTab() { |
| [564](#L564) | $content = ''; |
| [565](#L565) | ob\_start(); |
| [566](#L566) | ?> |
| [567](#L567) | <div> |
| [568](#L568) | <a href="https://www.cminds.com/about/" class="btn button button-primary" target="\_blank">Open About Us page in a new tab</a> |
| [569](#L569) | </div> |
| [570](#L570) | <?php |
| [571](#L571) | $content .= ob\_get\_clean(); |
| [572](#L572) | return $content; |
| [573](#L573) | } |
| [574](#L574) |  |
| [575](#L575) | public function displayMembershipTab() { |
| [576](#L576) | $content = ''; |
| [577](#L577) | ob\_start(); |
| [578](#L578) | ?> |
| [579](#L579) | <div> |
| [580](#L580) | <a href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" class="btn button button-primary" target="\_blank">Open Membership Package page in a new tab</a> |
| [581](#L581) | </div> |
| [582](#L582) | <?php |
| [583](#L583) | $content .= ob\_get\_clean(); |
| [584](#L584) | return $content; |
| [585](#L585) | } |
| [586](#L586) |  |
| [587](#L587) | public function displayCMProductTab() { |
| [588](#L588) | $content = ''; |
| [589](#L589) | ob\_start(); |
| [590](#L590) |  |
| [591](#L591) | $currentIframeFilter = filter\_input(INPUT\_POST, 'cminds\_iframe\_filter'); |
| [592](#L592) | if (empty($currentIframeFilter)) { |
| [593](#L593) | $currentIframeFilter = 'Plugin'; |
| [594](#L594) | } |
| [595](#L595) | $url = remove\_query\_arg('cminds\_iframe\_filter', $\_SERVER['REQUEST\_URI']); |
| [596](#L596) | ?> |
| [597](#L597) | <div> |
| [598](#L598) | <a href="https://www.cminds.com/wordpress-plugins-library/?cat=Plugin" class="btn button button-primary" target="\_blank">Open Product Catalog in a new tab</a> |
| [599](#L599) | <form method="post" class="cminds\_iframe\_filter\_form"> |
| [600](#L600) | <span> | Filter: </span> |
| [601](#L601) | <button type="submit" name="cminds\_iframe\_filter" value="Plugin" class="btn button button-primary">Plugins</button> |
| [602](#L602) | <button type="submit" name="cminds\_iframe\_filter" value="Add-On" class="btn button button-primary">AddOns</button> |
| [603](#L603) | <button type="submit" name="cminds\_iframe\_filter" value="Bundle" class="btn button button-primary">Bundles</button> |
| [604](#L604) | <button type="submit" name="cminds\_iframe\_filter" value="Service" class="btn button button-primary">Services</button> |
| [605](#L605) | </form> |
| [606](#L606) | </div> |
| [607](#L607) | <?php |
| [608](#L608) | $content .= ob\_get\_clean(); |
| [609](#L609) | return $content; |
| [610](#L610) | } |
| [611](#L611) |  |
| [612](#L612) | public function displayCMAddOnsTab() { |
| [613](#L613) | $content = ''; |
| [614](#L614) | ob\_start(); |
| [615](#L615) | ?> |
| [616](#L616) | <div> |
| [617](#L617) | <a href="https://www.cminds.com/wordpress-plugins-library/?showfilter=No&tags=Tooltip" class="btn button button-primary" target="\_blank">Open Add-Ons page in a new tab</a> |
| [618](#L618) | </div> |
| [619](#L619) | <?php |
| [620](#L620) | $content .= ob\_get\_clean(); |
| [621](#L621) | return $content; |
| [622](#L622) | } |
| [623](#L623) |  |
| [624](#L624) | public function displayVideoGuidesTab() { |
| [625](#L625) | $content = ''; |
| [626](#L626) | ob\_start(); |
| [627](#L627) | ?> |
| [628](#L628) | <div> |
| [629](#L629) | <a href="https://www.cminds.com/cm-plugins-video-library/" class="btn button button-primary" target="\_blank">Open Video Guides page in a new tab</a> |
| [630](#L630) | </div> |
| [631](#L631) | <?php |
| [632](#L632) | $content .= ob\_get\_clean(); |
| [633](#L633) | return $content; |
| [634](#L634) | } |
| [635](#L635) |  |
| [636](#L636) | public function displaySupportTab() { |
| [637](#L637) | $content = ''; |
| [638](#L638) | $supportForumLink = $this->getOption('plugin-support-url'); |
| [639](#L639) | ob\_start(); |
| [640](#L640) | ?> |
| [641](#L641) | <div> |
| [642](#L642) | <p>WordPress supprot forum can only be viewed on WordPress.org site. Please click on the buttom to visit the forum and to submit your support questions</p> |
| [643](#L643) | <a href="<?php echo $supportForumLink; ?>" class="btn button button-primary" target="\_blank">Open WordPress Support Formum</a> |
| [644](#L644) | </div> |
| [645](#L645) | <?php |
| [646](#L646) | $content .= ob\_get\_clean(); |
| [647](#L647) | return $content; |
| [648](#L648) | } |
| [649](#L649) |  |
| [650](#L650) | public function add\_plugin\_meta\_links($meta, $file) { |
| [651](#L651) | if ($file == $this->getOption('plugin-basename')) { |
| [652](#L652) |  |
| [653](#L653) | foreach ($meta as $key => $value) { |
| [654](#L654) | if (strpos($value, 'Visit plugin site') !== FALSE) { |
| [655](#L655) | unset($meta[$key]); |
| [656](#L656) | $meta[] = sprintf('<a href="%s">%s</a>', esc\_url($this->getOption('plugin-store-url')), \_\_('Visit plugin site', 'cminds-package') |
| [657](#L657) | ); |
| [658](#L658) | break; |
| [659](#L659) | } |
| [660](#L660) | } |
| [661](#L661) |  |
| [662](#L662) | foreach ($meta as $key => $value) { |
| [663](#L663) | if (strpos($value, '<a href="') !== FALSE) { |
| [664](#L664) | $meta[$key] = str\_replace('<a href="', '<a target="\_blank" href="', $value); |
| [665](#L665) | } |
| [666](#L666) | } |
| [667](#L667) | } |
| [668](#L668) | return $meta; |
| [669](#L669) | } |
| [670](#L670) |  |
| [671](#L671) | public function add\_plugin\_action\_links($links) { |
| [672](#L672) | $settingsUrl = $this->getOption('plugin-redirect-after-install'); |
| [673](#L673) | if (!empty($settingsUrl)) { |
| [674](#L674) | $links[] = '<a href="' . esc\_url($settingsUrl) . '">Settings</a>'; |
| [675](#L675) | } |
| [676](#L676) | if (!$this->getOption('plugin-free-only')) { |
| [677](#L677) | $links[] = '<a href="' . esc\_url(admin\_url('admin.php?page=' . $this->getProSlug())) . '">Upgrade to Pro</a>'; |
| [678](#L678) | } |
| [679](#L679) | return $links; |
| [680](#L680) | } |
| [681](#L681) |  |
| [682](#L682) | public function updateMenu() { |
| [683](#L683) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('User Guide', 'cminds-package'), \_\_('User Guide', 'cminds-package'), 'manage\_options', $this->getPageSlug(), array($this, 'displayPage')); |
| [684](#L684) | if (!$this->getOption('plugin-free-only')) { |
| [685](#L685) | add\_submenu\_page($this->getOption('plugin-menu-item'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), \_\_('Upgrade&nbsp;➤', 'cminds-package'), 'manage\_options', $this->getProSlug(), array($this, 'displayPage')); |
| [686](#L686) | } |
| [687](#L687) |  |
| [688](#L688) | $tag = 'cminds-' . $this->getOption('plugin-short-slug') . '-license-page'; |
| [689](#L689) | $condition = has\_action($tag); |
| [690](#L690) | } |
| [691](#L691) |  |
| [692](#L692) | public function getProSlug() { |
| [693](#L693) | $slug = $this->getOption('plugin-abbrev') . '\_pro'; |
| [694](#L694) | return $slug; |
| [695](#L695) | } |
| [696](#L696) |  |
| [697](#L697) | public function getPageSlug() { |
| [698](#L698) | $slug = $this->getOption('plugin-abbrev') . '\_about'; |
| [699](#L699) | return $slug; |
| [700](#L700) | } |
| [701](#L701) |  |
| [702](#L702) | public function getLicensingSlug() { |
| [703](#L703) | $slug = $this->getOption('plugin-abbrev') . '\_licensing'; |
| [704](#L704) | return $slug; |
| [705](#L705) | } |
| [706](#L706) |  |
| [707](#L707) | public function isOwnScreen() { |
| [708](#L708) | $screen = get\_current\_screen(); |
| [709](#L709) | return (strpos($screen->base, $this->getPageSlug()) !== false || strpos($screen->base, $this->getLicensingSlug()) !== false || strpos($screen->base, $this->getProSlug()) !== false); |
| [710](#L710) | } |
| [711](#L711) |  |
| [712](#L712) | /\*\* |
| [713](#L713) | \* Load plugin styles for admin area |
| [714](#L714) | \* |
| [715](#L715) | \* @access public |
| [716](#L716) | \* @since 1.0 |
| [717](#L717) | \*/ |
| [718](#L718) | public function enqueueAdminStyles() { |
| [719](#L719) |  |
| [720](#L720) | $screen = get\_current\_screen(); |
| [721](#L721) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [722](#L722) | return; |
| [723](#L723) | } |
| [724](#L724) | wp\_enqueue\_style('jquery-ui-tabs-css', plugin\_dir\_url(\_\_FILE\_\_) . 'css/jquery-ui.min.css', array()); |
| [725](#L725) | } |
| [726](#L726) |  |
| [727](#L727) | /\*\* |
| [728](#L728) | \* Load plugin scripts for admin area |
| [729](#L729) | \* |
| [730](#L730) | \* @access public |
| [731](#L731) | \* @since 1.0 |
| [732](#L732) | \*/ |
| [733](#L733) | public function enqueueAdminScripts() { |
| [734](#L734) |  |
| [735](#L735) | $screen = get\_current\_screen(); |
| [736](#L736) | if (!isset($screen->id) || !$this->isOwnScreen()) { |
| [737](#L737) | return; |
| [738](#L738) | } |
| [739](#L739) | wp\_enqueue\_script('jquery-ui-tabs'); |
| [740](#L740) | } |
| [741](#L741) |  |
| [742](#L742) | public function getUserguideUrl() { |
| [743](#L743) | $url = ''; |
| [744](#L744) | if ($this->getOption('plugin-userguide-key')) { |
| [745](#L745) | $url .= 'https://creativeminds.helpscoutdocs.com/article/' . $this->getOption('plugin-userguide-key'); |
| [746](#L746) | } else { |
| [747](#L747) | $url .= 'https://creativeminds.helpscoutdocs.com/collection/3-wordpress-plugins'; |
| [748](#L748) | } |
| [749](#L749) | return $url; |
| [750](#L750) | } |
| [751](#L751) |  |
| [752](#L752) | public function displayPage() { |
| [753](#L753) | global $plugin\_page; |
| [754](#L754) | $content = ''; |
| [755](#L755) |  |
| [756](#L756) | global $cmindsPluginPackage; |
| [757](#L757) |  |
| [758](#L758) | if (!empty($cmindsPluginPackage)) { |
| [759](#L759) | foreach ($cmindsPluginPackage as $key => $package) { |
| [760](#L760) | $isown = $package->isOwnScreen(); |
| [761](#L761) | if ($isown) { |
| [762](#L762) | $currentPlugin = $package; |
| [763](#L763) | } |
| [764](#L764) | } |
| [765](#L765) | } |
| [766](#L766) | ?> |
| [767](#L767) | <div class="wrap"> |
| [768](#L768) | <style type="text/css"> |
| [769](#L769) | .subsubsub li+li:before {content:'| ';} |
| [770](#L770) | .cminds\_system\_info\_area{ |
| [771](#L771) | width: 99.5%; |
| [772](#L772) | height: 290px; |
| [773](#L773) | } |
| [774](#L774) | .cminds\_update\_table td, |
| [775](#L775) | .cminds\_update\_table tr { |
| [776](#L776) | width: 140px; |
| [777](#L777) | text-align: left; |
| [778](#L778) | } |
| [779](#L779) | .cminds\_iframe\_filter\_form{ |
| [780](#L780) | display: inline-block; |
| [781](#L781) | } |
| [782](#L782) | .cminds\_iframe\_filter\_form > span{ |
| [783](#L783) | line-height: 28px; |
| [784](#L784) | } |
| [785](#L785) | </style> |
| [786](#L786) | <h2> |
| [787](#L787) | <div id="icon-<?php echo $currentPlugin->getOption('plugin-icon') ?>" class="icon32"> |
| [788](#L788) | <br /> |
| [789](#L789) | </div> |
| [790](#L790) | <?php echo $currentPlugin->getOption('plugin-name') ?>&nbsp; |
| [791](#L791) | <?php |
| [792](#L792) | $pluginAbbrev = $currentPlugin->getOption('plugin-abbrev'); |
| [793](#L793) | if (empty($\_GET['page']) || $\_GET['page'] != $pluginAbbrev . '\_pro') : |
| [794](#L794) | ?> |
| [795](#L795) | <a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $pluginAbbrev . '\_pro')); ?>" class="button button-primary" title="Click to Buy PRO">Upgrade to Pro</a> |
| [796](#L796) | <?php |
| [797](#L797) | endif; |
| [798](#L798) | ?> |
| [799](#L799) | </h2> |
| [800](#L800) | <?php |
| [801](#L801) | echo $currentPlugin->showNav(); |
| [802](#L802) |  |
| [803](#L803) | wp\_enqueue\_style('cminds\_package\_userguide', plugin\_dir\_url(\_\_FILE\_\_) . 'css/main.css'); |
| [804](#L804) | wp\_enqueue\_style('cminds\_package\_userguide\_font', 'https://fonts.googleapis.com/css?family=Open+Sans:400,700,300,600'); |
| [805](#L805) |  |
| [806](#L806) | switch ($plugin\_page) { |
| [807](#L807) | default: |
| [808](#L808) | case $currentPlugin->getPageSlug(): { |
| [809](#L809) | $title = \_\_('About', 'cminds-package'); |
| [810](#L810) | wp\_enqueue\_script('cmdm-mailerlite', plugin\_dir\_url(\_\_FILE\_\_) . 'js/mailerlite.js', array(), $this->getOption('plugin-version'), true); |
| [811](#L811) | ob\_start(); |
| [812](#L812) | $base\_path = $currentPlugin->getOption('plugin-dir-path'); |
| [813](#L813) | include $base\_path . 'package/views/userguide\_free.php'; |
| [814](#L814) | $content .= ob\_get\_clean(); |
| [815](#L815) | break; |
| [816](#L816) | } |
| [817](#L817) | case $currentPlugin->getProSlug(): { |
| [818](#L818) | $title = \_\_('Upgrade to Pro', 'cminds-package'); |
| [819](#L819) |  |
| [820](#L820) | ob\_start(); |
| [821](#L821) | echo $currentPlugin->displayUpgradeToProTab(); |
| [822](#L822) | $content .= ob\_get\_clean(); |
| [823](#L823) | break; |
| [824](#L824) | } |
| [825](#L825) | case $currentPlugin->getLicensingSlug(): { |
| [826](#L826) | $title = \_\_('User Guide', 'cminds-package'); |
| [827](#L827) |  |
| [828](#L828) | ob\_start(); |
| [829](#L829) | $content .= $this->showTabs($plugin\_page); |
| [830](#L830) | $content .= ob\_get\_clean(); |
| [831](#L831) | break; |
| [832](#L832) | } |
| [833](#L833) | } |
| [834](#L834) |  |
| [835](#L835) | echo apply\_filters('cminds-about-page-content', $content, $currentPlugin); |
| [836](#L836) | ?> |
| [837](#L837) | </div> |
| [838](#L838) | <?php |
| [839](#L839) | } |
| [840](#L840) |  |
| [841](#L841) | protected function showTabs($key) { |
| [842](#L842) | $class = $id = 'cminds\_' . $key . '\_tabs'; |
| [843](#L843) | ?> |
| [844](#L844) | <div id="<?php echo $id; ?>" class="<?php echo $class; ?>"> |
| [845](#L845) | <script> |
| [846](#L846) | jQuery(document).ready(function ($) { |
| [847](#L847) | $('#<?php echo $id; ?>').tabs({ |
| [848](#L848) | activate: function (event, ui) { |
| [849](#L849) | window.location.hash = ui.newPanel.attr('id').replace(/-/g, '\_'); |
| [850](#L850) | }, |
| [851](#L851) | create: function (event, ui) { |
| [852](#L852) | var tab = location.hash.replace(/\\_/g, '-'); |
| [853](#L853) | if (tab.length) |
| [854](#L854) | { |
| [855](#L855) | var tabContainer = $(ui.panel.context).find('a[href="' + tab + '"]'); |
| [856](#L856) | if (typeof tabContainer !== 'undefined' && tabContainer.length) |
| [857](#L857) | { |
| [858](#L858) | var index = tabContainer.parent().index(); |
| [859](#L859) | $(ui.panel.context).tabs('option', 'active', index); |
| [860](#L860) | } |
| [861](#L861) | } |
| [862](#L862) | } |
| [863](#L863) | }); |
| [864](#L864) | }); |
| [865](#L865) | </script> |
| [866](#L866) | <?php |
| [867](#L867) | $this->renderSettingsTabsControls($key); |
| [868](#L868) | $this->renderSettingsTabs($key); |
| [869](#L869) | ?> |
| [870](#L870) | </div> |
| [871](#L871) | <?php |
| [872](#L872) | } |
| [873](#L873) |  |
| [874](#L874) | protected function getTabsArray($key) { |
| [875](#L875) |  |
| [876](#L876) | switch ($key) { |
| [877](#L877) | default: |
| [878](#L878) | case $this->getPageSlug(): |
| [879](#L879) | $settingsTabsArrayBase = array( |
| [880](#L880) | '1'   => 'User Guide', |
| [881](#L881) | //                                              '5'              => 'Upgrade To Pro', |
| [882](#L882) | '10'  => 'About', |
| [883](#L883) | '30'  => 'Membership', |
| [884](#L884) | '40'  => 'CM Catalog', |
| [885](#L885) | '60'  => 'Video Guides', |
| [886](#L886) | '99'  => 'WordPress Support Forum', |
| [887](#L887) | '199' => 'System Information', |
| [888](#L888) | ); |
| [889](#L889) | if ($this->getOption('plugin-has-addons')) { |
| [890](#L890) | $settingsTabsArrayBase['50'] = 'Plugin Add-ons'; |
| [891](#L891) | } |
| [892](#L892) | break; |
| [893](#L893) | case $this->getLicensingSlug(): |
| [894](#L894) | $settingsTabsArrayBase = array( |
| [895](#L895) | '10' => 'License Activation', |
| [896](#L896) | '20' => 'Check Version', |
| [897](#L897) | //                                              '30' => 'Upgrade Tutorial', |
| [898](#L898) | '40' => 'Manage Your CM Products', |
| [899](#L899) | ); |
| [900](#L900) | break; |
| [901](#L901) | } |
| [902](#L902) |  |
| [903](#L903) | $settingsTabsArray = apply\_filters('cminds-' . $key . '-tabs-array', $settingsTabsArrayBase); |
| [904](#L904) |  |
| [905](#L905) | ksort($settingsTabsArray); |
| [906](#L906) | return $settingsTabsArray; |
| [907](#L907) | } |
| [908](#L908) |  |
| [909](#L909) | /\*\* |
| [910](#L910) | \* Function renders (default) or returns the setttings tabs |
| [911](#L911) | \* |
| [912](#L912) | \* @param type $return |
| [913](#L913) | \* @return string |
| [914](#L914) | \*/ |
| [915](#L915) | protected function renderSettingsTabs($key, $return = false) { |
| [916](#L916) | $content = ''; |
| [917](#L917) | $settingsTabsArray = $this->getTabsArray($key); |
| [918](#L918) |  |
| [919](#L919) | if ($settingsTabsArray) { |
| [920](#L920) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [921](#L921) | $filterName = 'cminds-' . $key . '-content-' . $tabKey; |
| [922](#L922) |  |
| [923](#L923) | $content .= '<div id="tabs-' . $tabKey . '">'; |
| [924](#L924) | $tabContent = apply\_filters($filterName, ''); |
| [925](#L925) | $content .= $tabContent; |
| [926](#L926) | $content .= '</div>'; |
| [927](#L927) | } |
| [928](#L928) | } |
| [929](#L929) |  |
| [930](#L930) | if ($return) { |
| [931](#L931) | return $content; |
| [932](#L932) | } |
| [933](#L933) | echo $content; |
| [934](#L934) | } |
| [935](#L935) |  |
| [936](#L936) | /\*\* |
| [937](#L937) | \* Function renders (default) or returns the setttings tabs |
| [938](#L938) | \* |
| [939](#L939) | \* @param type $return |
| [940](#L940) | \* @return string |
| [941](#L941) | \*/ |
| [942](#L942) | protected function renderSettingsTabsControls($key, $return = false) { |
| [943](#L943) | $content = ''; |
| [944](#L944) | $settingsTabsArray = $this->getTabsArray($key); |
| [945](#L945) |  |
| [946](#L946) | if ($settingsTabsArray) { |
| [947](#L947) | $content .= '<ul>'; |
| [948](#L948) | foreach ($settingsTabsArray as $tabKey => $tabLabel) { |
| [949](#L949) | $content .= '<li><a href="#tabs-' . $tabKey . '">' . $tabLabel . '</a></li>'; |
| [950](#L950) | } |
| [951](#L951) | $content .= '</ul>'; |
| [952](#L952) | } |
| [953](#L953) |  |
| [954](#L954) | if ($return) { |
| [955](#L955) | return $content; |
| [956](#L956) | } |
| [957](#L957) | echo $content; |
| [958](#L958) | } |
| [959](#L959) |  |
| [960](#L960) | protected function showSharebox($mode = self::SHAREBOX\_FLAT) { |
| [961](#L961) |  |
| [962](#L962) | $class = (self::SHAREBOX\_SQUARE === $mode) ? 'square' : 'flat'; |
| [963](#L963) |  |
| [964](#L964) | $pluginReviewLink = (string) $this->getOption('plugin-review-url'); |
| [965](#L965) | $pluginFullName = (string) $this->getOption('plugin-name'); |
| [966](#L966) | $pluginUrl = (string) $this->getOption('plugin-store-url'); |
| [967](#L967) |  |
| [968](#L968) | $twitterTweet = rawurlencode('Checkout the ' . $pluginFullName . ' ( ' . $pluginUrl . ' ) #WordPress #Plugin by @CMPLUGINS'); |
| [969](#L969) |  |
| [970](#L970) | ob\_start(); |
| [971](#L971) | ?> |
| [972](#L972) |  |
| [973](#L973) | <style type="text/css"> |
| [974](#L974) |  |
| [975](#L975) | div.cminds\_call\_to\_action\_wrapper:after{ |
| [976](#L976) | content: ''; |
| [977](#L977) | display: table; |
| [978](#L978) | clear: both; |
| [979](#L979) | } |
| [980](#L980) |  |
| [981](#L981) | #mc\_embed\_signup{clear:left; width:400px;} |
| [982](#L982) | .fb\_iframe\_widget{vertical-align: top;line-height: 2em;} |
| [983](#L983) |  |
| [984](#L984) | div.cminds\_call\_to\_action.flat{ |
| [985](#L985) | display: flex; |
| [986](#L986) | text-align: left; |
| [987](#L987) | float: left; |
| [988](#L988) | margin-bottom: 10px; |
| [989](#L989) | } |
| [990](#L990) |  |
| [991](#L991) | div.cminds\_call\_to\_action.flat .inner\_box{ |
| [992](#L992) | border: 1px solid #999; |
| [993](#L993) | padding: 0 0.5em 0.5em; |
| [994](#L994) | min-width: 80px; |
| [995](#L995) | border-radius : 4px; |
| [996](#L996) | margin: 5px 0 5px 0 ; |
| [997](#L997) | } |
| [998](#L998) |  |
| [999](#L999) | div.cminds\_call\_to\_action.square{ |
| [1000](#L1000) | display: flex; |
| [1001](#L1001) | text-align: center; |
| [1002](#L1002) | } |
| [1003](#L1003) |  |
| [1004](#L1004) | div.cminds\_call\_to\_action.square .inner\_box{ |
| [1005](#L1005) | border: 1px solid #999; |
| [1006](#L1006) | padding: 0 0.5em 0.5em; |
| [1007](#L1007) | margin: 0 auto; |
| [1008](#L1008) | min-width: 290px; |
| [1009](#L1009) | } |
| [1010](#L1010) |  |
| [1011](#L1011) | div.cminds\_call\_to\_action.square .inner\_box td{ |
| [1012](#L1012) | display: block; |
| [1013](#L1013) | padding: 0; |
| [1014](#L1014) | } |
| [1015](#L1015) |  |
| [1016](#L1016) | div.cminds\_call\_to\_action a{ |
| [1017](#L1017) | text-decoration: none; |
| [1018](#L1018) | } |
| [1019](#L1019) | </style> |
| [1020](#L1020) |  |
| [1021](#L1021) | <div class="cminds\_call\_to\_action\_wrapper"> |
| [1022](#L1022) | <div class="cminds\_call\_to\_action <?php echo $class; ?>"> |
| [1023](#L1023) | <div id="fb-root"></div> |
| [1024](#L1024) | <div class="inner\_box"> |
| [1025](#L1025) | <table cellpadding="10"><tr> |
| [1026](#L1026) | <td valign="top"> |
| [1027](#L1027) | <h3><?php $this->\_e('Share your Appreciation'); ?></h3> |
| [1028](#L1028) | <a target="\_blank" href="<?php echo esc\_attr($pluginReviewLink); ?>"> |
| [1029](#L1029) | <div class="btn button"> |
| [1030](#L1030) | <div class="dashicons dashicons-share-alt2"></div><span><?php $this->\_e('Submit a review'); ?></span> |
| [1031](#L1031) | </div> |
| [1032](#L1032) | </a> |
| [1033](#L1033) | <a target="\_blank"  href="http://twitter.com/home/?status=<?php echo esc\_attr(urlencode($twitterTweet)) ?>"> |
| [1034](#L1034) | <div class="btn button"> |
| [1035](#L1035) | <div class="dashicons dashicons-twitter"></div><span><?php $this->\_e('Tweet'); ?></span> |
| [1036](#L1036) | </div> |
| [1037](#L1037) | </a> |
| [1038](#L1038) | </td><td valign="top"> |
| [1039](#L1039) | <h3><?php $this->\_e('Stay Up-to-Date'); ?></h3> |
| [1040](#L1040) | <a href="https://twitter.com/CMPLUGINS" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true"><?php $this->\_e('Follow @CMPLUGINS'); ?></a> |
| [1041](#L1041) | <script>!function (d, s, id) { |
| [1042](#L1042) | var js, fjs = d.getElementsByTagName(s)[0], p = /^http:/.test(d.location) ? 'http' : 'https'; |
| [1043](#L1043) | if (!d.getElementById(id)) { |
| [1044](#L1044) | js = d.createElement(s); |
| [1045](#L1045) | js.id = id; |
| [1046](#L1046) | js.src = p + '://platform.twitter.com/widgets.js'; |
| [1047](#L1047) | fjs.parentNode.insertBefore(js, fjs); |
| [1048](#L1048) | } |
| [1049](#L1049) | }(document, 'script', 'twitter-wjs'); |
| [1050](#L1050) | </script> |
| [1051](#L1051) |  |
| [1052](#L1052) | <div class="g-follow" data-annotation="none" data-height="24" data-href="https://plus.google.com/108513627228464018583" data-rel="publisher"></div> |
| [1053](#L1053) |  |
| [1054](#L1054) | <script type="text/javascript"> |
| [1055](#L1055) | (function () { |
| [1056](#L1056) | var po = document.createElement('script'); |
| [1057](#L1057) | po.type = 'text/javascript'; |
| [1058](#L1058) | po.async = true; |
| [1059](#L1059) | po.src = 'https://apis.google.com/js/platform.js'; |
| [1060](#L1060) | var s = document.getElementsByTagName('script')[0]; |
| [1061](#L1061) | s.parentNode.insertBefore(po, s); |
| [1062](#L1062) | })(); |
| [1063](#L1063) | </script> |
| [1064](#L1064) |  |
| [1065](#L1065) | <script>(function (d, s, id) { |
| [1066](#L1066) | var js, fjs = d.getElementsByTagName(s)[0]; |
| [1067](#L1067) | if (d.getElementById(id)) |
| [1068](#L1068) | return; |
| [1069](#L1069) | js = d.createElement(s); |
| [1070](#L1070) | js.id = id; |
| [1071](#L1071) | js.src = "//connect.facebook.net/en\_US/sdk.js#xfbml=1&version=v2.0"; |
| [1072](#L1072) | fjs.parentNode.insertBefore(js, fjs); |
| [1073](#L1073) | }(document, 'script', 'facebook-jssdk')); |
| [1074](#L1074) | </script> |
| [1075](#L1075) |  |
| [1076](#L1076) | <div class="fb-like" data-href="https://www.facebook.com/cmplugins" data-width="100" data-layout="button" data-action="like" data-show-faces="true" data-share="true"></div> |
| [1077](#L1077) |  |
| [1078](#L1078) | <br/> |
| [1079](#L1079) | </td> |
| [1080](#L1080) | <td valign="top"> |
| [1081](#L1081) | <!-- Begin MailChimp Signup Form --> |
| [1082](#L1082) | <div id="mc\_embed\_signup"> |
| [1083](#L1083) | <form action="//cminds.us3.list-manage.com/subscribe/post?u=f48254f757fafba2669ae5918&amp;id=142732cbf9" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="\_blank" novalidate> |
| [1084](#L1084) | <div id="mc\_embed\_signup\_scroll"> |
| [1085](#L1085) | <h3 for="mce-EMAIL"><?php $this->\_e('CM Newsletter - coupons, deals, news'); ?></h3> |
| [1086](#L1086) | <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required> |
| [1087](#L1087) | <input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="btn button"> |
| [1088](#L1088) | <span style="display:inline-block; position: relative"><div class="cmtt\_field\_message" title="We only send newsletters a couple of times a year. They include great deals, promo codes and information about our new plugins!"></div></span> |
| [1089](#L1089) | <!-- real people should not fill this in and expect good things - do not remove this or risk fsorm bot signups--> |
| [1090](#L1090) | <div style="position: absolute; left: -5000px;"><input type="text" name="b\_f48254f757fafba2669ae5918\_142732cbf9" tabindex="-1" value=""></div> |
| [1091](#L1091) | <div class="clear"></div> |
| [1092](#L1092) | </div> |
| [1093](#L1093) | </form> |
| [1094](#L1094) | </div> |
| [1095](#L1095) | <!--End mc\_embed\_signup--> |
| [1096](#L1096) | </td> |
| [1097](#L1097) | </tr> |
| [1098](#L1098) | </table> |
| [1099](#L1099) | </div> |
| [1100](#L1100) | </div> |
| [1101](#L1101) | </div> |
| [1102](#L1102) | <?php |
| [1103](#L1103) | ob\_end\_flush(); |
| [1104](#L1104) | } |
| [1105](#L1105) |  |
| [1106](#L1106) | /\*\* |
| [1107](#L1107) | \* Function returns the ads for the users who volunteered to register (optional step) |
| [1108](#L1108) | \* It communicates with our own server to download the current promotions |
| [1109](#L1109) | \* |
| [1110](#L1110) | \* @return boolean |
| [1111](#L1111) | \*/ |
| [1112](#L1112) | protected function getAds() { |
| [1113](#L1113) | $connectionProblem = false; |
| [1114](#L1114) | $ads\_arr = get\_transient('cminds\_free\_ads'); |
| [1115](#L1115) | if (empty($ads\_arr) && !is\_array($ads\_arr)) { |
| [1116](#L1116) | $args = array( |
| [1117](#L1117) | 'body' => array() |
| [1118](#L1118) | ); |
| [1119](#L1119) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1120](#L1120) | $response = wp\_remote\_post($href, $args); |
| [1121](#L1121) | if (!is\_wp\_error($response)) { |
| [1122](#L1122) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1123](#L1123) | } else { |
| [1124](#L1124) | $args['sslverify'] = false; |
| [1125](#L1125) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=get\_ads&cminds\_json\_api=get\_ads'; |
| [1126](#L1126) | $response = wp\_remote\_post($href, $args); |
| [1127](#L1127) | if (!is\_wp\_error($response)) { |
| [1128](#L1128) | $ads = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [1129](#L1129) | } else { |
| [1130](#L1130) | $ads = array(); |
| [1131](#L1131) | $connectionProblem = true; |
| [1132](#L1132) | } |
| [1133](#L1133) | } |
| [1134](#L1134) | $ads\_arr = array( |
| [1135](#L1135) | 'ads'          => $ads, |
| [1136](#L1136) | 'refresh\_time' => time(), |
| [1137](#L1137) | 'connection'   => !$connectionProblem, |
| [1138](#L1138) | ); |
| [1139](#L1139) | set\_transient('cminds\_free\_ads', $ads\_arr, self::ADS\_REFRESH\_INTERVAL); |
| [1140](#L1140) | } |
| [1141](#L1141) | /\* |
| [1142](#L1142) | \* Update from old version |
| [1143](#L1143) | \*/ |
| [1144](#L1144) | if (!isset($ads\_arr['ads']) && !isset($ads\_arr['refresh\_time'])) { |
| [1145](#L1145) | $temp\_ads\_arr = $ads\_arr; |
| [1146](#L1146) | $ads\_arr = array( |
| [1147](#L1147) | 'ads'          => $temp\_ads\_arr, |
| [1148](#L1148) | 'refresh\_time' => strtotime('-10 DAYS'), |
| [1149](#L1149) | 'connection'   => TRUE, |
| [1150](#L1150) | ); |
| [1151](#L1151) | } |
| [1152](#L1152) | /\* |
| [1153](#L1153) | \* Update from old version |
| [1154](#L1154) | \*/ |
| [1155](#L1155) | if (!isset($ads\_arr['connection'])) { |
| [1156](#L1156) | $ads\_arr['connection'] = TRUE; |
| [1157](#L1157) | } |
| [1158](#L1158) | return $ads\_arr; |
| [1159](#L1159) | } |
| [1160](#L1160) |  |
| [1161](#L1161) | public function getStoreUrl($args = array()) { |
| [1162](#L1162) | $category = isset($args['category']) ? $args['category'] : 'All'; |
| [1163](#L1163) | $storeUrl = $this->addAffiliateCode($this->getCategoryLink('Wordpress', 'category', $category)); |
| [1164](#L1164) | return esc\_url($storeUrl); |
| [1165](#L1165) | } |
| [1166](#L1166) |  |
| [1167](#L1167) | public function getCategoryLink($group, $type, $name) { |
| [1168](#L1168) | $categoryLinks = array( |
| [1169](#L1169) | 'Wordpress' => array( |
| [1170](#L1170) | 'category' => array( |
| [1171](#L1171) | 'All'     => '/wordpress-plugins-library/', |
| [1172](#L1172) | 'Plugin'  => '/wordpress-plugins/', |
| [1173](#L1173) | 'Service' => '/wordpress-maintenance-services/', |
| [1174](#L1174) | 'Add-On'  => '/wordpress-add-ons/', |
| [1175](#L1175) | 'Bundle'  => '/wordpress-plugins-bundles/'), |
| [1176](#L1176) | 'tags'     => array( |
| [1177](#L1177) | 'SEO'        => '/wordpress-seo-content-plugins/', |
| [1178](#L1178) | 'Business'   => '/plugins-for-wordpress-business-websites/', |
| [1179](#L1179) | 'Publishing' => '/wordpress-plugins-for-content-publishing/', |
| [1180](#L1180) | 'Free'       => '/free-wordpress-plugins/', |
| [1181](#L1181) | 'eCommerce'  => '/wordpress-e-commerce-plugins/', |
| [1182](#L1182) | 'Marketing'  => '/wordpress-plugins-for-marketers/', |
| [1183](#L1183) | 'Admin'      => '/admin-wordpress-plugins/', |
| [1184](#L1184) | 'Community'  => '/wordpress-community-plugins/', |
| [1185](#L1185) | 'eLearning'  => '/wordpress-e-learning-and-lms-plugins/', |
| [1186](#L1186) | ) |
| [1187](#L1187) | ), |
| [1188](#L1188) | 'Magento'   => array( |
| [1189](#L1189) | 'category' => array( |
| [1190](#L1190) | 'All'       => '/magento-extensions-and-modules/', |
| [1191](#L1191) | 'Extension' => '/ecommerce-extensions-store/', |
| [1192](#L1192) | 'Service'   => '/support-and-maintenance-services-for-magento/', |
| [1193](#L1193) | 'Bundle'    => '/extensions-bundles-magento/'), |
| [1194](#L1194) | 'tags'     => array( |
| [1195](#L1195) | 'Customer'     => '/magento-customer-care-support/', |
| [1196](#L1196) | 'Integrations' => '/magento-third-party-integration-extensions/', |
| [1197](#L1197) | 'Marketing'    => '/magento-marketing-extensions/', |
| [1198](#L1198) | 'Marketplace'  => '/magento-marketplace-extensions/', |
| [1199](#L1199) | 'Marketplaces' => '/magento-marketplace-extensions/', |
| [1200](#L1200) | 'Utilities'    => '/magento-utilities-extensions/', |
| [1201](#L1201) | 'Magento-2'    => '/magento-2-extensions/', |
| [1202](#L1202) | '2.0'          => '/magento-2-extensions/' |
| [1203](#L1203) | ) |
| [1204](#L1204) | ) |
| [1205](#L1205) | ); |
| [1206](#L1206) |  |
| [1207](#L1207) | $link = null; |
| [1208](#L1208) | $types = array('category', 'tags'); |
| [1209](#L1209) | if (in\_array($type, $types)) { |
| [1210](#L1210) | $link = isset($categoryLinks[$group][$type][$name]) ? $categoryLinks[$group][$type][$name] : null; |
| [1211](#L1211) | } |
| [1212](#L1212) |  |
| [1213](#L1213) | if (!is\_string($link)) { |
| [1214](#L1214) | $link = ('Wordpress' === $group) ? '/wordpress-plugins-library/?' . $type . '=' . $name : '/magento-extensions-and-modules/?' . $type . '=' . $name; |
| [1215](#L1215) | } |
| [1216](#L1216) |  |
| [1217](#L1217) | $link = 'https://www.cminds.com' . $link; |
| [1218](#L1218) | return $link; |
| [1219](#L1219) | } |
| [1220](#L1220) |  |
| [1221](#L1221) | public function addAffiliateCode($link) { |
| [1222](#L1222) | if ($this->getOption('plugin-affiliate')) { |
| [1223](#L1223) | $link = add\_query\_arg(array('af' => $this->getOption('plugin-affiliate')), $link); |
| [1224](#L1224) | } |
| [1225](#L1225) | return esc\_url($link); |
| [1226](#L1226) | } |
| [1227](#L1227) |  |
| [1228](#L1228) | public function showGuide($atts = array()) { |
| [1229](#L1229) | global $cmindsPluginPackage; |
| [1230](#L1230) |  |
| [1231](#L1231) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1232](#L1232) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1233](#L1233) |  |
| [1234](#L1234) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-guide-hidden'; |
| [1235](#L1235) | $guideHide = filter\_input(INPUT\_GET, 'cminds\_guide\_hide'); |
| [1236](#L1236) | if ($guideHide) { |
| [1237](#L1237) | update\_option($optionName, 1); |
| [1238](#L1238) | } |
| [1239](#L1239) | $guideShow = filter\_input(INPUT\_GET, 'cminds\_guide\_show'); |
| [1240](#L1240) | if ($guideShow) { |
| [1241](#L1241) | update\_option($optionName, 0); |
| [1242](#L1242) | } |
| [1243](#L1243) | $guideHidden = get\_option($optionName, 0); |
| [1244](#L1244) |  |
| [1245](#L1245) | $showGuide = $currentPlugin->getOption('plugin-show-guide'); |
| [1246](#L1246) | if ($showGuide) : |
| [1247](#L1247) | ob\_start(); |
| [1248](#L1248) | ?><style type="text/css"> |
| [1249](#L1249) |  |
| [1250](#L1250) | div.cminds\_guide\_wrapper { |
| [1251](#L1251) | display: inline-block; |
| [1252](#L1252) | padding: 0em 0em 1em 0em; |
| [1253](#L1253) | background: #FFF; |
| [1254](#L1254) | margin: 0em 1em 0 -2px; |
| [1255](#L1255) | vertical-align: top; |
| [1256](#L1256) | width: 98%; |
| [1257](#L1257) | } |
| [1258](#L1258) |  |
| [1259](#L1259) | div.cminds\_guide\_wrapper \* { |
| [1260](#L1260) | vertical-align: top; |
| [1261](#L1261) | } |
| [1262](#L1262) |  |
| [1263](#L1263) | .cminds\_guide{ |
| [1264](#L1264) | display: inline-block; |
| [1265](#L1265) | margin: 1em; |
| [1266](#L1266) | padding: 1em; |
| [1267](#L1267) | } |
| [1268](#L1268) |  |
| [1269](#L1269) | .cminds\_guide\_text{ |
| [1270](#L1270) | display: inline-block; |
| [1271](#L1271) | margin: 1em; |
| [1272](#L1272) | } |
| [1273](#L1273) |  |
| [1274](#L1274) | .cminds\_guide\_text > span{ |
| [1275](#L1275) | text-align: left; |
| [1276](#L1276) | display: block; |
| [1277](#L1277) | } |
| [1278](#L1278) |  |
| [1279](#L1279) | .clear, .clearfix{ |
| [1280](#L1280) | clear: both; |
| [1281](#L1281) | } |
| [1282](#L1282) |  |
| [1283](#L1283) | .cmclearfix{ |
| [1284](#L1284) | clear: both !important; |
| [1285](#L1285) | } |
| [1286](#L1286) |  |
| [1287](#L1287) | .cminds\_guide .guide\_header{ |
| [1288](#L1288) | font-size: 14pt; |
| [1289](#L1289) | font-weight: bold; |
| [1290](#L1290) | } |
| [1291](#L1291) |  |
| [1292](#L1292) | .cminds\_guide .guide\_text{ |
| [1293](#L1293) | display: inline-block; |
| [1294](#L1294) | width: 509px; |
| [1295](#L1295) | max-width: 100%; |
| [1296](#L1296) | margin-right: 40px; |
| [1297](#L1297) | } |
| [1298](#L1298) |  |
| [1299](#L1299) | .cminds\_guide .guide\_videos{ |
| [1300](#L1300) | display: inline-block; |
| [1301](#L1301) | max-width: 100%; |
| [1302](#L1302) | overflow: hidden; |
| [1303](#L1303) | } |
| [1304](#L1304) |  |
| [1305](#L1305) | .cminds\_guide .guide\_videos .guide\_videos\_inner{ |
| [1306](#L1306) | } |
| [1307](#L1307) |  |
| [1308](#L1308) | .cminds\_guide .guide\_videos > div{ |
| [1309](#L1309) | display: inline-block; |
| [1310](#L1310) | } |
| [1311](#L1311) | .cminds\_guide .guide\_videos > div.guide\_videos\_after{ |
| [1312](#L1312) | display: block; |
| [1313](#L1313) | margin: 10px 0 0 52px; |
| [1314](#L1314) | } |
| [1315](#L1315) | .prev\_video, |
| [1316](#L1316) | .next\_video { |
| [1317](#L1317) | margin-top: 85px; |
| [1318](#L1318) | } |
| [1319](#L1319) |  |
| [1320](#L1320) | .guide\_video\_title { |
| [1321](#L1321) | font-size: 13pt; |
| [1322](#L1322) | font-weight: bold; |
| [1323](#L1323) | margin: 0 0 10px 0px; |
| [1324](#L1324) | } |
| [1325](#L1325) |  |
| [1326](#L1326) | .cminds\_link.blue { |
| [1327](#L1327) | color: #fff; |
| [1328](#L1328) | border-color: #33ace7; |
| [1329](#L1329) | background: #66c1ed; |
| [1330](#L1330) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1331](#L1331) | box-shadow: 0 1px 0 #ccc; |
| [1332](#L1332) | display: inline-block; |
| [1333](#L1333) | text-decoration: none; |
| [1334](#L1334) | line-height: 26px; |
| [1335](#L1335) | height: 28px; |
| [1336](#L1336) | padding: 0 10px 1px; |
| [1337](#L1337) | cursor: pointer; |
| [1338](#L1338) | border-width: 1px; |
| [1339](#L1339) | border-style: solid; |
| [1340](#L1340) | -webkit-border-radius: 3px; |
| [1341](#L1341) | border-radius: 3px; |
| [1342](#L1342) | -webkit-box-sizing: border-box; |
| [1343](#L1343) | -moz-box-sizing: border-box; |
| [1344](#L1344) | box-sizing: border-box; |
| [1345](#L1345) | } |
| [1346](#L1346) |  |
| [1347](#L1347) | .cminds\_guide .guide\_videos .guide\_video{ |
| [1348](#L1348) | display: none; |
| [1349](#L1349) | } |
| [1350](#L1350) | .cminds\_guide .guide\_videos .guide\_video.active{ |
| [1351](#L1351) | display: inline-block; |
| [1352](#L1352) | } |
| [1353](#L1353) |  |
| [1354](#L1354) | .cminds\_guide .guide\_video\_content > a{ |
| [1355](#L1355) | display: block; |
| [1356](#L1356) | } |
| [1357](#L1357) | .install-guide-video {max-height: 160px;} |
| [1358](#L1358) | .upgrage-guide-video {max-height: 255px;} |
| [1359](#L1359) | </style> |
| [1360](#L1360) | <?php |
| [1361](#L1361) | if (!$guideHidden) : |
| [1362](#L1362) | ?> |
| [1363](#L1363) | <script> |
| [1364](#L1364) | jQuery(document).ready(function () { |
| [1365](#L1365) |  |
| [1366](#L1366) | jQuery.fn.visible = function () { |
| [1367](#L1367) | return this.css('visibility', 'visible'); |
| [1368](#L1368) | }; |
| [1369](#L1369) |  |
| [1370](#L1370) | jQuery.fn.invisible = function () { |
| [1371](#L1371) | return this.css('visibility', 'hidden'); |
| [1372](#L1372) | }; |
| [1373](#L1373) |  |
| [1374](#L1374) | jQuery.fn.visibilityToggle = function () { |
| [1375](#L1375) | return this.css('visibility', function (i, visibility) { |
| [1376](#L1376) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1377](#L1377) | }); |
| [1378](#L1378) | }; |
| [1379](#L1379) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1380](#L1380) | var prevVisible = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video').length; |
| [1381](#L1381) | var nextVisible = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video').length; |
| [1382](#L1382) |  |
| [1383](#L1383) | if (prevVisible) { |
| [1384](#L1384) | jQuery('.guide\_videos .prev\_video').visible(); |
| [1385](#L1385) | } else { |
| [1386](#L1386) | jQuery('.guide\_videos .prev\_video').invisible(); |
| [1387](#L1387) | } |
| [1388](#L1388) |  |
| [1389](#L1389) | if (nextVisible) { |
| [1390](#L1390) | jQuery('.guide\_videos .next\_video').visible(); |
| [1391](#L1391) | } else { |
| [1392](#L1392) | jQuery('.guide\_videos .next\_video').invisible(); |
| [1393](#L1393) | } |
| [1394](#L1394) | }; |
| [1395](#L1395) |  |
| [1396](#L1396) | cminds\_video\_prev\_next\_toggle(); |
| [1397](#L1397) |  |
| [1398](#L1398) | jQuery('.guide\_videos .prev\_video').on('click', function () { |
| [1399](#L1399) | var prevVideo = jQuery('.guide\_videos .guide\_video.active').prev('.guide\_video'); |
| [1400](#L1400) | if (prevVideo.length) |
| [1401](#L1401) | { |
| [1402](#L1402) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1403](#L1403) | prevVideo.addClass('active'); |
| [1404](#L1404) | } |
| [1405](#L1405) | cminds\_video\_prev\_next\_toggle(); |
| [1406](#L1406) | }); |
| [1407](#L1407) |  |
| [1408](#L1408) | jQuery('.guide\_videos .next\_video').on('click', function () { |
| [1409](#L1409) | var nextVideo = jQuery('.guide\_videos .guide\_video.active').next('.guide\_video'); |
| [1410](#L1410) | if (nextVideo.length) |
| [1411](#L1411) | { |
| [1412](#L1412) | jQuery('.guide\_videos .guide\_video.active').removeClass('active'); |
| [1413](#L1413) | nextVideo.addClass('active'); |
| [1414](#L1414) | } |
| [1415](#L1415) | cminds\_video\_prev\_next\_toggle(); |
| [1416](#L1416) | }); |
| [1417](#L1417) | }); |
| [1418](#L1418) | </script> |
| [1419](#L1419) | <div class="clear clearfix cmclearfix"></div> |
| [1420](#L1420) | <div class="cminds\_guide\_wrapper"> |
| [1421](#L1421) | <div class="cminds\_guide"> |
| [1422](#L1422) |  |
| [1423](#L1423) | <?php |
| [1424](#L1424) | $guideText = $currentPlugin->getOption('plugin-guide-text'); |
| [1425](#L1425) | if (!empty($guideText)) : |
| [1426](#L1426) | ?> |
| [1427](#L1427) | <div class="guide\_text"> |
| [1428](#L1428) | <div class="guide\_header"> |
| [1429](#L1429) | Initial Installation Guide |
| [1430](#L1430) | </div> |
| [1431](#L1431) | <?php echo $guideText; ?> |
| [1432](#L1432) | </div> |
| [1433](#L1433) | <?php endif; ?> |
| [1434](#L1434) |  |
| [1435](#L1435) | <?php |
| [1436](#L1436) | $videos = $currentPlugin->getOption('plugin-guide-videos'); |
| [1437](#L1437) | if (!empty($videos) && is\_array($videos)) : |
| [1438](#L1438) | ?> |
| [1439](#L1439) | <div class="guide\_videos"> |
| [1440](#L1440) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1441](#L1441) | <div class="guide\_videos\_inner"> |
| [1442](#L1442) | <?php foreach ($videos as $key => $video) : ?> |
| [1443](#L1443) | <div class="guide\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1444](#L1444) | <div class="guide\_video\_title"><?php echo $video['title']; ?></div> |
| [1445](#L1445) | <?php |
| [1446](#L1446) | // echo do\_shortcode('[video src="https://player.vimeo.com/video/' . $video['video\_id'] . '?portrait=0&responsive=0&maxwidth=290&maxheight=160&player\_id=player\_2" width="290" height="160" id="palyer\_2"][/video]'); |
| [1447](#L1447) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="290" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1448](#L1448) | //                                                                                                              echo wp\_video\_shortcode(array('src' =>"https://player.vimeo.com/video/" . $video['video\_id'] . "?portrait=0&responsive=1&maxheight=160&player\_id=player\_2", 'width' => 463, 'height' => 255, 'class' => "install-guide-video wp-video-shortcode", 'id' => "palyer\_2")); |
| [1449](#L1449) | ?> |
| [1450](#L1450) | </div> |
| [1451](#L1451) | <?php endforeach; ?> |
| [1452](#L1452) | </div> |
| [1453](#L1453) | <div class="next\_video cminds\_link blue" style="visibility: hidden">Next</div> |
| [1454](#L1454) | <div class="guide\_videos\_after"> |
| [1455](#L1455) | <a href="<?php echo $currentPlugin->getPageUrl('about'); ?>" class="cminds\_link blue" target="\_blank">Open Plugin User Guide</a> |
| [1456](#L1456) | </div> |
| [1457](#L1457) | </div> |
| [1458](#L1458) | <?php endif; ?> |
| [1459](#L1459) | </div> |
| [1460](#L1460) | </div> |
| [1461](#L1461) | <div class="clear clearfix cmclearfix"></div> |
| [1462](#L1462) | <?php else : ?> |
| [1463](#L1463) | <div class="cminds\_guide\_wrapper"> |
| [1464](#L1464) | <div> |
| [1465](#L1465) | <a class="cminds-guide-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_guide\_show' => 1), remove\_query\_arg('cminds\_guide\_hide'))); ?>">Show Installation Guide Box</a> |
| [1466](#L1466) | </div> |
| [1467](#L1467) | </div> |
| [1468](#L1468) | <div class="clear clearfix cmclearfix"></div> |
| [1469](#L1469) | <?php |
| [1470](#L1470) | endif; |
| [1471](#L1471) | ?> |
| [1472](#L1472) |  |
| [1473](#L1473) | <?php |
| [1474](#L1474) | $content = ob\_get\_clean(); |
| [1475](#L1475) | return $content; |
| [1476](#L1476) | endif; |
| [1477](#L1477) | } |
| [1478](#L1478) |  |
| [1479](#L1479) | public function showActivation($atts = array()) { |
| [1480](#L1480) | global $cmindsPluginPackage; |
| [1481](#L1481) |  |
| [1482](#L1482) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1483](#L1483) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1484](#L1484) |  |
| [1485](#L1485) | ob\_start(); |
| [1486](#L1486) | $isRegistered = $currentPlugin->isRegistered(); |
| [1487](#L1487) | $isSkipped = $currentPlugin->isSkipped(); |
| [1488](#L1488) | $isRegistered = false; |
| [1489](#L1489) | if (!$isRegistered) : |
| [1490](#L1490) | include\_once 'views/registration.php'; |
| [1491](#L1491) | else: |
| [1492](#L1492) | ?> |
| [1493](#L1493) | <br/> |
| [1494](#L1494) | <br/> |
| [1495](#L1495) | <?php |
| [1496](#L1496) | endif; |
| [1497](#L1497) | $content = ob\_get\_clean(); |
| [1498](#L1498) | return $content; |
| [1499](#L1499) | } |
| [1500](#L1500) |  |
| [1501](#L1501) | public function time\_to\_decimal($time) { |
| [1502](#L1502) | $timeArr = explode(':', $time); |
| [1503](#L1503) | $decTime = ($timeArr[0] \* 60) + ($timeArr[1]); |
| [1504](#L1504) | if (isset($timeArr[2])) { |
| [1505](#L1505) | $decTime += $timeArr[2] / 60; |
| [1506](#L1506) | } |
| [1507](#L1507) | return $decTime; |
| [1508](#L1508) | } |
| [1509](#L1509) |  |
| [1510](#L1510) | public function showUpgrade($atts = array()) { |
| [1511](#L1511) | global $cmindsPluginPackage; |
| [1512](#L1512) |  |
| [1513](#L1513) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [1514](#L1514) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1515](#L1515) |  |
| [1516](#L1516) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-upgrade-hidden'; |
| [1517](#L1517) | $upgradeHide = filter\_input(INPUT\_GET, 'cminds\_upgrade\_hide'); |
| [1518](#L1518) | if ($upgradeHide) { |
| [1519](#L1519) | update\_option($optionName, 1); |
| [1520](#L1520) | } |
| [1521](#L1521) | $upgradeShow = filter\_input(INPUT\_GET, 'cminds\_upgrade\_show'); |
| [1522](#L1522) | if ($upgradeShow) { |
| [1523](#L1523) | update\_option($optionName, 0); |
| [1524](#L1524) | } |
| [1525](#L1525) | $upgradeHidden = get\_option($optionName, 0); |
| [1526](#L1526) | $isRegistered = $currentPlugin->isRegistered(); |
| [1527](#L1527) |  |
| [1528](#L1528) | $showUpgrade = $currentPlugin->getOption('plugin-show-upgrade', TRUE); |
| [1529](#L1529) | if ($showUpgrade) : |
| [1530](#L1530) | ob\_start(); |
| [1531](#L1531) | ?><style type="text/css"> |
| [1532](#L1532) |  |
| [1533](#L1533) | div.cminds\_upgrade\_wrapper { |
| [1534](#L1534) | display: block; |
| [1535](#L1535) | padding: 0em 0em 1em 0em; |
| [1536](#L1536) | background: #FFF; |
| [1537](#L1537) | margin: 0em 1em 0 -2px; |
| [1538](#L1538) | vertical-align: top; |
| [1539](#L1539) | width: 98%; |
| [1540](#L1540) | } |
| [1541](#L1541) |  |
| [1542](#L1542) | div.cminds\_upgrade\_wrapper \* { |
| [1543](#L1543) | vertical-align: top; |
| [1544](#L1544) | } |
| [1545](#L1545) |  |
| [1546](#L1546) | .cminds\_upgrade{ |
| [1547](#L1547) | display: inline-block; |
| [1548](#L1548) | margin: 1em; |
| [1549](#L1549) | padding: 1em; |
| [1550](#L1550) | width: 100%; |
| [1551](#L1551) | } |
| [1552](#L1552) |  |
| [1553](#L1553) | .cminds\_upgrade\_text{ |
| [1554](#L1554) | display: inline-block; |
| [1555](#L1555) | margin: 1em; |
| [1556](#L1556) | } |
| [1557](#L1557) |  |
| [1558](#L1558) | .cminds\_upgrade\_text > span{ |
| [1559](#L1559) | text-align: left; |
| [1560](#L1560) | display: block; |
| [1561](#L1561) | } |
| [1562](#L1562) |  |
| [1563](#L1563) | .clear, .clearfix{ |
| [1564](#L1564) | clear: both; |
| [1565](#L1565) | } |
| [1566](#L1566) |  |
| [1567](#L1567) | .cmclearfix{ |
| [1568](#L1568) | clear: both !important; |
| [1569](#L1569) | } |
| [1570](#L1570) |  |
| [1571](#L1571) | .cminds\_upgrade .upgrade\_header{ |
| [1572](#L1572) | font-size: 14pt; |
| [1573](#L1573) | font-weight: bold; |
| [1574](#L1574) | } |
| [1575](#L1575) |  |
| [1576](#L1576) | .cminds\_upgrade .upgrade\_text{ |
| [1577](#L1577) | display: inline-block; |
| [1578](#L1578) | max-width: 45%; |
| [1579](#L1579) | margin-right: 40px; |
| [1580](#L1580) | } |
| [1581](#L1581) |  |
| [1582](#L1582) | .cminds\_upgrade .upgrade\_videos{ |
| [1583](#L1583) | display: inline-flex; |
| [1584](#L1584) | max-width: 50%; |
| [1585](#L1585) | min-width: 520px; |
| [1586](#L1586) | overflow: hidden; |
| [1587](#L1587) | } |
| [1588](#L1588) |  |
| [1589](#L1589) | .cminds\_upgrade .upgrade\_videos .upgrade\_videos\_inner{ |
| [1590](#L1590) | } |
| [1591](#L1591) |  |
| [1592](#L1592) | .cminds\_upgrade .upgrade\_videos > div{ |
| [1593](#L1593) | display: inline-block; |
| [1594](#L1594) | } |
| [1595](#L1595) | .cminds\_upgrade .upgrade\_videos > div.upgrade\_videos\_after{ |
| [1596](#L1596) | display: block; |
| [1597](#L1597) | margin: 10px 0 0 0px; |
| [1598](#L1598) | } |
| [1599](#L1599) | .prev\_video, |
| [1600](#L1600) | .next\_video { |
| [1601](#L1601) | margin-top: 15px; |
| [1602](#L1602) | } |
| [1603](#L1603) |  |
| [1604](#L1604) | .upgrade\_video\_title { |
| [1605](#L1605) | font-size: 13pt; |
| [1606](#L1606) | font-weight: bold; |
| [1607](#L1607) | margin: 0 0 10px 0px; |
| [1608](#L1608) | } |
| [1609](#L1609) |  |
| [1610](#L1610) | .cminds\_link.blue { |
| [1611](#L1611) | color: #fff; |
| [1612](#L1612) | border-color: #33ace7; |
| [1613](#L1613) | background: #66c1ed; |
| [1614](#L1614) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1615](#L1615) | box-shadow: 0 1px 0 #ccc; |
| [1616](#L1616) | display: inline-block; |
| [1617](#L1617) | text-decoration: none; |
| [1618](#L1618) | line-height: 26px; |
| [1619](#L1619) | height: 28px; |
| [1620](#L1620) | padding: 0 10px 1px; |
| [1621](#L1621) | cursor: pointer; |
| [1622](#L1622) | border-width: 1px; |
| [1623](#L1623) | border-style: solid; |
| [1624](#L1624) | -webkit-border-radius: 3px; |
| [1625](#L1625) | border-radius: 3px; |
| [1626](#L1626) | -webkit-box-sizing: border-box; |
| [1627](#L1627) | -moz-box-sizing: border-box; |
| [1628](#L1628) | box-sizing: border-box; |
| [1629](#L1629) | } |
| [1630](#L1630) |  |
| [1631](#L1631) | .cminds\_upgrade .upgrade\_videos .upgrade\_video{ |
| [1632](#L1632) | display: none; |
| [1633](#L1633) | } |
| [1634](#L1634) | .cminds\_upgrade .upgrade\_videos .upgrade\_video.active{ |
| [1635](#L1635) | display: inline-block; |
| [1636](#L1636) | } |
| [1637](#L1637) |  |
| [1638](#L1638) | .cminds\_upgrade .upgrade\_video\_content > a{ |
| [1639](#L1639) | display: block; |
| [1640](#L1640) | } |
| [1641](#L1641) | </style> |
| [1642](#L1642) | <?php |
| [1643](#L1643) | if (!$upgradeHidden) : |
| [1644](#L1644) | ?> |
| [1645](#L1645) | <script> |
| [1646](#L1646) | jQuery(document).ready(function () { |
| [1647](#L1647) |  |
| [1648](#L1648) | jQuery.fn.visible = function () { |
| [1649](#L1649) | return this.css('visibility', 'visible'); |
| [1650](#L1650) | }; |
| [1651](#L1651) |  |
| [1652](#L1652) | jQuery.fn.invisible = function () { |
| [1653](#L1653) | return this.css('visibility', 'hidden'); |
| [1654](#L1654) | }; |
| [1655](#L1655) |  |
| [1656](#L1656) | jQuery.fn.visibilityToggle = function () { |
| [1657](#L1657) | return this.css('visibility', function (i, visibility) { |
| [1658](#L1658) | return (visibility === 'visible') ? 'hidden' : 'visible'; |
| [1659](#L1659) | }); |
| [1660](#L1660) | }; |
| [1661](#L1661) | var cminds\_video\_prev\_next\_toggle = function () { |
| [1662](#L1662) | var prevVisible = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video').length; |
| [1663](#L1663) | var nextVisible = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video').length; |
| [1664](#L1664) |  |
| [1665](#L1665) | if (prevVisible) { |
| [1666](#L1666) | jQuery('.upgrade\_videos .prev\_video').visible(); |
| [1667](#L1667) | } else { |
| [1668](#L1668) | jQuery('.upgrade\_videos .prev\_video').invisible(); |
| [1669](#L1669) | } |
| [1670](#L1670) |  |
| [1671](#L1671) | if (nextVisible) { |
| [1672](#L1672) | jQuery('.upgrade\_videos .next\_video').visible(); |
| [1673](#L1673) | } else { |
| [1674](#L1674) | jQuery('.upgrade\_videos .next\_video').invisible(); |
| [1675](#L1675) | } |
| [1676](#L1676) | }; |
| [1677](#L1677) |  |
| [1678](#L1678) | cminds\_video\_prev\_next\_toggle(); |
| [1679](#L1679) |  |
| [1680](#L1680) | jQuery('.upgrade\_videos .prev\_video').on('click', function () { |
| [1681](#L1681) | var prevVideo = jQuery('.upgrade\_videos .upgrade\_video.active').prev('.upgrade\_video'); |
| [1682](#L1682) | if (prevVideo.length) |
| [1683](#L1683) | { |
| [1684](#L1684) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1685](#L1685) | prevVideo.addClass('active'); |
| [1686](#L1686) | } |
| [1687](#L1687) | cminds\_video\_prev\_next\_toggle(); |
| [1688](#L1688) | }); |
| [1689](#L1689) |  |
| [1690](#L1690) | jQuery('.upgrade\_videos .next\_video').on('click', function () { |
| [1691](#L1691) | var nextVideo = jQuery('.upgrade\_videos .upgrade\_video.active').next('.upgrade\_video'); |
| [1692](#L1692) | if (nextVideo.length) |
| [1693](#L1693) | { |
| [1694](#L1694) | jQuery('.upgrade\_videos .upgrade\_video.active').removeClass('active'); |
| [1695](#L1695) | nextVideo.addClass('active'); |
| [1696](#L1696) | } |
| [1697](#L1697) | cminds\_video\_prev\_next\_toggle(); |
| [1698](#L1698) | }); |
| [1699](#L1699) | });</script> |
| [1700](#L1700) | <script type="text/javascript" src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>js/froogaloop.js"></script> |
| [1701](#L1701) | <script> |
| [1702](#L1702) | jQuery(document).ready(function ( ) { |
| [1703](#L1703) | // Message displayed when link is playing |
| [1704](#L1704) | var links = jQuery('.cm-video-bookmark-link'); |
| [1705](#L1705) | var playNotice = ' - <strong><i><spam style="color:darkgreen;">Now playing</span></i></strong>'; |
| [1706](#L1706) | // Function to hide all status messages |
| [1707](#L1707) | hidePlayNoticeAll = function ( ) { |
| [1708](#L1708) | jQuery('.cm-video-bookmark-link .link\_status').html(""); |
| [1709](#L1709) | } |
| [1710](#L1710) |  |
| [1711](#L1711) | //                             Load Vimeo API for the embedded video |
| [1712](#L1712) | var iframe\_player = jQuery('.upgrade\_video\_content iframe')[0]; |
| [1713](#L1713) | var frogaloopPlayer = $f(iframe\_player); |
| [1714](#L1714) | // Option listeners for pause, finish, and playProgress |
| [1715](#L1715) | // |
| [1716](#L1716) | // Note: If you want to use this, you must define the functions or links wont work |
| [1717](#L1717) | frogaloopPlayer.addEvent('ready', function ( ) { |
| [1718](#L1718) | frogaloopPlayer.addEvent('pause', onPause); |
| [1719](#L1719) | frogaloopPlayer.addEvent('finish', onFinish); |
| [1720](#L1720) | frogaloopPlayer.addEvent('playProgress', onPlayProgress); |
| [1721](#L1721) | }); |
| [1722](#L1722) |  |
| [1723](#L1723) | // Functions for each listener event |
| [1724](#L1724) | function onPause(id) { // When the video is paused, do this. |
| [1725](#L1725) | jQuery(".main\_status").html('Paused'); |
| [1726](#L1726) | } |
| [1727](#L1727) |  |
| [1728](#L1728) | function onFinish(id) { // When the video is finished, do this. |
| [1729](#L1729) | jQuery(".main\_status").html('Finished'); |
| [1730](#L1730) | } |
| [1731](#L1731) |  |
| [1732](#L1732) | function onPlayProgress(data, id) { // While the video is playing, do this. |
| [1733](#L1733) | jQuery(".main\_status").html('Playing - ' + data.seconds + 's played'); // data.percent can also be used. |
| [1734](#L1734) | } |
| [1735](#L1735) |  |
| [1736](#L1736) | // Function to control what happens when each lesson link is clicked |
| [1737](#L1737) | function setupLinks( ) { |
| [1738](#L1738) |  |
| [1739](#L1739) | links.on('click', function ( ) { |
| [1740](#L1740) | var track = jQuery(this).data('timestamp'); //Timestamp stored as a data attribute |
| [1741](#L1741) |  |
| [1742](#L1742) | hidePlayNoticeAll( ); // Hide all status messages before displaying (to prevent them from sticking) |
| [1743](#L1743) | if (true === jQuery(this).data('active')) { |
| [1744](#L1744) | frogaloopPlayer.api('pause'); //Play the video |
| [1745](#L1745) | jQuery(this).data('active', false); |
| [1746](#L1746) | } else { |
| [1747](#L1747) | frogaloopPlayer.api('play'); //Play the video |
| [1748](#L1748) | frogaloopPlayer.api('seekTo', track); //Seek to the number of seconds in the variable link\_1\_track |
| [1749](#L1749) | jQuery(this).find('.link\_status').html(playNotice); //Display status message (playNotice) within span with class link\_1\_status |
| [1750](#L1750) | jQuery(this).data('active', true); |
| [1751](#L1751) | } |
| [1752](#L1752) | }); |
| [1753](#L1753) | } |
| [1754](#L1754) | setupLinks( ); |
| [1755](#L1755) | });</script> |
| [1756](#L1756) | <div class="clear clearfix cmclearfix"></div> |
| [1757](#L1757) | <div class="cminds\_upgrade\_wrapper"> |
| [1758](#L1758) | <div class="cminds\_upgrade"> |
| [1759](#L1759) |  |
| [1760](#L1760) | <?php |
| [1761](#L1761) | $upgradeText = $currentPlugin->getOption('plugin-upgrade-text'); |
| [1762](#L1762) | if (!empty($upgradeText)) : |
| [1763](#L1763) | ?> |
| [1764](#L1764) | <div class="upgrade\_text"> |
| [1765](#L1765) | <div class="upgrade\_header"> |
| [1766](#L1766) | Why you Should Upgrade |
| [1767](#L1767) | </div> |
| [1768](#L1768) | <div style="display:block"> |
| [1769](#L1769) | <p><?php echo $upgradeText; ?></p> |
| [1770](#L1770) | <div class="links"> |
| [1771](#L1771) |  |
| [1772](#L1772) | <?php |
| [1773](#L1773) | $upgradel = $currentPlugin->getOption('plugin-upgrade-text-list'); |
| [1774](#L1774) | if (!empty($upgradel) && is\_array($upgradel)) : |
| [1775](#L1775) | foreach ($upgradel as $key => $listitem) : |
| [1776](#L1776) | $linknum = $key + 1; |
| [1777](#L1777) | echo $listitem['video\_time']; |
| [1778](#L1778) | if ('More' !== $listitem['video\_time']) : |
| [1779](#L1779) | ?> |
| [1780](#L1780) | - <a class="cm-video-bookmark-link link\_<?php echo $linknum; ?>" data-timestamp="<?php echo $this->time\_to\_decimal($listitem['video\_time']); ?>" href="javascript:void(0);" target="\_self"><?php echo $listitem['title']; ?><span class="link\_status"></span></a> |
| [1781](#L1781) | <?php else: ?> |
| [1782](#L1782) | - <span class="cm-video-bookmark bookmark\_<?php echo $linknum; ?>" style="color:green;"><?php echo $listitem['title']; ?></span> |
| [1783](#L1783) | <?php endif; ?> |
| [1784](#L1784) | <br/> |
| [1785](#L1785) | <?php endforeach; ?> |
| [1786](#L1786) | <?php endif ?> |
| [1787](#L1787) | </div> |
| [1788](#L1788) | </div> |
| [1789](#L1789) | </div> |
| [1790](#L1790) | <?php endif; ?> |
| [1791](#L1791) |  |
| [1792](#L1792) | <?php |
| [1793](#L1793) | $videos = $currentPlugin->getOption('plugin-upgrade-videos'); |
| [1794](#L1794) | if (!empty($videos) && is\_array($videos)) : |
| [1795](#L1795) | ?> |
| [1796](#L1796) | <div class="upgrade\_videos"> |
| [1797](#L1797) | <div class="prev\_video cminds\_link blue" style="visibility: hidden">Prev</div> |
| [1798](#L1798) | <div class="upgrade\_videos\_inner"> |
| [1799](#L1799) | <?php |
| [1800](#L1800) | foreach ($videos as $key => $video) : |
| [1801](#L1801) | if (!empty($video)) : |
| [1802](#L1802) | ?> |
| [1803](#L1803) |  |
| [1804](#L1804) | <div class="upgrade\_video <?php echo!$key ? 'active' : ''; ?>"> |
| [1805](#L1805) | <div class="upgrade\_video\_title"><?php echo $video['title']; ?></div> |
| [1806](#L1806) | <div class="upgrade\_video\_content"> |
| [1807](#L1807) | <?php |
| [1808](#L1808) | echo $GLOBALS['wp\_embed']->run\_shortcode('[embed width="390" height="255"]https://player.vimeo.com/video/' . $video['video\_id'] . '[/embed]'); |
| [1809](#L1809) | ?> |
| [1810](#L1810) | <br /><br /><a href="<?php echo esc\_url(get\_admin\_url('', 'admin.php?page=' . $currentPlugin->getOption('plugin-abbrev') . '\_pro')); ?>" class="button button-primary" style="background-color:green; width:220px;" title="Click to Buy PRO">Show me Upgrade Options >></a> |
| [1811](#L1811) |  |
| [1812](#L1812) | </div> |
| [1813](#L1813) | </div> |
| [1814](#L1814) | <?php |
| [1815](#L1815) | endif; |
| [1816](#L1816) | endforeach; |
| [1817](#L1817) | ?> |
| [1818](#L1818) | </div> |
| [1819](#L1819) | </div> |
| [1820](#L1820) | <?php endif; ?> |
| [1821](#L1821) | </div>                    </div> |
| [1822](#L1822) | <?php |
| [1823](#L1823) | echo $this->showAds($atts); |
| [1824](#L1824) | ?> |
| [1825](#L1825) | <div class="clear clearfix cmclearfix"></div> |
| [1826](#L1826) | <?php else : ?> |
| [1827](#L1827) | <div class="cminds\_upgrade\_wrapper"> |
| [1828](#L1828) | <div> |
| [1829](#L1829) | <a class="cminds-upgrade-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_upgrade\_show' => 1), remove\_query\_arg('cminds\_upgrade\_hide'))); ?>">Why you shoud have the Premium Edition>></a> |
| [1830](#L1830) | </div> |
| [1831](#L1831) | </div> |
| [1832](#L1832) | <div class="clear clearfix cmclearfix"></div> |
| [1833](#L1833) | <?php |
| [1834](#L1834) | endif; |
| [1835](#L1835) | ?> |
| [1836](#L1836) |  |
| [1837](#L1837) | <?php |
| [1838](#L1838) | $content = ob\_get\_clean(); |
| [1839](#L1839) | return $content; |
| [1840](#L1840) | endif; |
| [1841](#L1841) | } |
| [1842](#L1842) |  |
| [1843](#L1843) | protected function getDaysSinceLastRefresh($ads\_arr) { |
| [1844](#L1844) | if (!is\_array($ads\_arr) && empty($ads\_arr['refresh\_time'])) { |
| [1845](#L1845) | return null; |
| [1846](#L1846) | } |
| [1847](#L1847) |  |
| [1848](#L1848) | $now = time(); |
| [1849](#L1849) | $your\_date = intval($ads\_arr['refresh\_time']); |
| [1850](#L1850) | $datediff = $now - $your\_date; |
| [1851](#L1851) | $days = abs(floor($datediff / (60 \* 60 \* 24))); |
| [1852](#L1852) | return $days; |
| [1853](#L1853) | } |
| [1854](#L1854) |  |
| [1855](#L1855) | public function showAds($atts = array()) { |
| [1856](#L1856) | global $cmindsPluginPackage; |
| [1857](#L1857) |  |
| [1858](#L1858) | $atts = shortcode\_atts(array( |
| [1859](#L1859) | 'flat' => false, |
| [1860](#L1860) | 'id'   => null |
| [1861](#L1861) | ), $atts); |
| [1862](#L1862) |  |
| [1863](#L1863) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [1864](#L1864) |  |
| [1865](#L1865) | $optionName = 'cminds-' . $this->getOption('plugin-short-slug') . '-ads-hidden'; |
| [1866](#L1866) | $adsHide = filter\_input(INPUT\_GET, 'cminds\_ad\_hide'); |
| [1867](#L1867) | if ($adsHide) { |
| [1868](#L1868) | update\_option($optionName, 1); |
| [1869](#L1869) | } |
| [1870](#L1870) | $adsShow = filter\_input(INPUT\_GET, 'cminds\_ad\_show'); |
| [1871](#L1871) | if ($adsShow) { |
| [1872](#L1872) | update\_option($optionName, 0); |
| [1873](#L1873) | } |
| [1874](#L1874) | $adsHidden = get\_option($optionName, 1); |
| [1875](#L1875) | $adsRefreshed = filter\_input(INPUT\_GET, 'cminds\_ad\_refresh'); |
| [1876](#L1876) | if ($adsRefreshed) { |
| [1877](#L1877) | delete\_transient('cminds\_free\_ads'); |
| [1878](#L1878) | } |
| [1879](#L1879) | $ads\_arr = $this->getAds(); |
| [1880](#L1880) | $ads = isset($ads\_arr['ads']) ? $ads\_arr['ads'] : array(); |
| [1881](#L1881) | $days\_since\_last\_refresh = $this->getDaysSinceLastRefresh($ads\_arr); |
| [1882](#L1882) |  |
| [1883](#L1883) | $isRegistered = $currentPlugin->isRegistered(); |
| [1884](#L1884) | /\* |
| [1885](#L1885) | \* Don't display if there's no server connection |
| [1886](#L1886) | \*/ |
| [1887](#L1887) | if (!$ads\_arr['connection']) { |
| [1888](#L1888) | return; |
| [1889](#L1889) | } |
| [1890](#L1890) | ob\_start(); |
| [1891](#L1891) | ?> |
| [1892](#L1892) |  |
| [1893](#L1893) | <style type="text/css"> |
| [1894](#L1894) |  |
| [1895](#L1895) | div.cminds\_ads\_wrapper { |
| [1896](#L1896) | display: inline-block; |
| [1897](#L1897) | padding: 1em; |
| [1898](#L1898) | background: #FFF; |
| [1899](#L1899) | border: solid 1px #E0E0E0; |
| [1900](#L1900) | margin: 1em 1em 0 0; |
| [1901](#L1901) | vertical-align: top; |
| [1902](#L1902) | } |
| [1903](#L1903) |  |
| [1904](#L1904) | .cminds\_ads\_internal\_wrapper { |
| [1905](#L1905) | display: inline-block; |
| [1906](#L1906) | overflow: auto; |
| [1907](#L1907) | max-height: 175px; |
| [1908](#L1908) | } |
| [1909](#L1909) |  |
| [1910](#L1910) | .cminds\_ad{ |
| [1911](#L1911) | display: block; |
| [1912](#L1912) | margin: 0.5em; |
| [1913](#L1913) | vertical-align: top; |
| [1914](#L1914) | } |
| [1915](#L1915) |  |
| [1916](#L1916) | span.ad\_code { |
| [1917](#L1917) | font-weight: bold; |
| [1918](#L1918) | } |
| [1919](#L1919) |  |
| [1920](#L1920) | .cminds\_ad.hidden{ |
| [1921](#L1921) | display: none; |
| [1922](#L1922) | } |
| [1923](#L1923) | .cminds\_ads\_wrapper.hidden{ |
| [1924](#L1924) | display: none; |
| [1925](#L1925) | } |
| [1926](#L1926) |  |
| [1927](#L1927) | .cminds\_ad\_text{ |
| [1928](#L1928) | display: block; |
| [1929](#L1929) | margin-bottom: 1em; |
| [1930](#L1930) | } |
| [1931](#L1931) | .cminds\_ad\_link{ |
| [1932](#L1932) | text-align: center; |
| [1933](#L1933) | } |
| [1934](#L1934) |  |
| [1935](#L1935) | span.ads\_refreshed{ |
| [1936](#L1936) | color: #259602; |
| [1937](#L1937) | font-weight: bold; |
| [1938](#L1938) | } |
| [1939](#L1939) |  |
| [1940](#L1940) | .cminds\_ad\_text > a:before { |
| [1941](#L1941) | content:"\A"; white-space:pre; |
| [1942](#L1942) | } |
| [1943](#L1943) |  |
| [1944](#L1944) | .cminds\_ad\_text > \*:after { |
| [1945](#L1945) | content:"\A"; white-space:pre; |
| [1946](#L1946) | } |
| [1947](#L1947) |  |
| [1948](#L1948) | .cminds\_no\_ads{ |
| [1949](#L1949) | margin: 1em 0; |
| [1950](#L1950) | font-size: 12pt; |
| [1951](#L1951) | font-weight: bold; |
| [1952](#L1952) | } |
| [1953](#L1953) |  |
| [1954](#L1954) | .cminds\_links{ |
| [1955](#L1955) | display: inline-block; |
| [1956](#L1956) | margin: 1em; |
| [1957](#L1957) | padding: 0; |
| [1958](#L1958) | max-width: 150px; |
| [1959](#L1959) | min-height: 90px; |
| [1960](#L1960) | vertical-align: top; |
| [1961](#L1961) | text-align: left; |
| [1962](#L1962) | } |
| [1963](#L1963) |  |
| [1964](#L1964) | .cminds\_links .cminds\_link{ |
| [1965](#L1965) | margin: 5px 0; |
| [1966](#L1966) | } |
| [1967](#L1967) |  |
| [1968](#L1968) | .cminds\_links .cminds\_link:first-child{ |
| [1969](#L1969) | margin-top: 0; |
| [1970](#L1970) | } |
| [1971](#L1971) |  |
| [1972](#L1972) | .cminds\_link{ |
| [1973](#L1973) | color: #555; |
| [1974](#L1974) | border-color: rgba(204,204,204,0.8); |
| [1975](#L1975) | background: #f7f7f7; |
| [1976](#L1976) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [1977](#L1977) | box-shadow: 0 1px 0 #ccc; |
| [1978](#L1978) | display: inline-block; |
| [1979](#L1979) | text-decoration: none; |
| [1980](#L1980) | line-height: 26px; |
| [1981](#L1981) | height: 28px; |
| [1982](#L1982) | padding: 0 10px 1px; |
| [1983](#L1983) | cursor: pointer; |
| [1984](#L1984) | border-width: 1px; |
| [1985](#L1985) | border-style: solid; |
| [1986](#L1986) | -webkit-border-radius: 3px; |
| [1987](#L1987) | border-radius: 3px; |
| [1988](#L1988) | -webkit-box-sizing: border-box; |
| [1989](#L1989) | -moz-box-sizing: border-box; |
| [1990](#L1990) | box-sizing: border-box; |
| [1991](#L1991) | } |
| [1992](#L1992) |  |
| [1993](#L1993) | .cminds\_link:active { |
| [1994](#L1994) | background: #eee; |
| [1995](#L1995) | border-color: #999; |
| [1996](#L1996) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [1997](#L1997) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [1998](#L1998) | -webkit-transform: translateY(1px); |
| [1999](#L1999) | -ms-transform: translateY(1px); |
| [2000](#L2000) | transform: translateY(1px); |
| [2001](#L2001) | } |
| [2002](#L2002) |  |
| [2003](#L2003) | .cminds\_link:hover { |
| [2004](#L2004) | background: #eee; |
| [2005](#L2005) | border-color: #999; |
| [2006](#L2006) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2007](#L2007) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2008](#L2008) | -webkit-transform: translateY(1px); |
| [2009](#L2009) | -ms-transform: translateY(1px); |
| [2010](#L2010) | transform: translateY(1px); |
| [2011](#L2011) | } |
| [2012](#L2012) |  |
| [2013](#L2013) | .cminds\_link.blue{ |
| [2014](#L2014) | color: #fff; |
| [2015](#L2015) | border-color: #33ace7; |
| [2016](#L2016) | background: #66c1ed; |
| [2017](#L2017) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2018](#L2018) | box-shadow: 0 1px 0 #ccc; |
| [2019](#L2019) | display: inline-block; |
| [2020](#L2020) | text-decoration: none; |
| [2021](#L2021) | line-height: 26px; |
| [2022](#L2022) | height: 28px; |
| [2023](#L2023) | padding: 0 10px 1px; |
| [2024](#L2024) | cursor: pointer; |
| [2025](#L2025) | border-width: 1px; |
| [2026](#L2026) | border-style: solid; |
| [2027](#L2027) | -webkit-border-radius: 3px; |
| [2028](#L2028) | border-radius: 3px; |
| [2029](#L2029) | -webkit-box-sizing: border-box; |
| [2030](#L2030) | -moz-box-sizing: border-box; |
| [2031](#L2031) | box-sizing: border-box; |
| [2032](#L2032) |  |
| [2033](#L2033) | } |
| [2034](#L2034) |  |
| [2035](#L2035) | .cminds\_link.blue:active { |
| [2036](#L2036) | background: #0198e1; |
| [2037](#L2037) | border-color: #66c1ed; |
| [2038](#L2038) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2039](#L2039) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2040](#L2040) | -webkit-transform: translateY(1px); |
| [2041](#L2041) | -ms-transform: translateY(1px); |
| [2042](#L2042) | transform: translateY(1px); |
| [2043](#L2043) | } |
| [2044](#L2044) |  |
| [2045](#L2045) | .cminds\_link.blue:hover { |
| [2046](#L2046) | background: #005b87; |
| [2047](#L2047) | border-color: #0198e1; |
| [2048](#L2048) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2049](#L2049) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2050](#L2050) | -webkit-transform: translateY(1px); |
| [2051](#L2051) | -ms-transform: translateY(1px); |
| [2052](#L2052) | transform: translateY(1px); |
| [2053](#L2053) | } |
| [2054](#L2054) |  |
| [2055](#L2055) | .cminds\_link.orange{ |
| [2056](#L2056) | color: #fff; |
| [2057](#L2057) | border-color: #ffb752; |
| [2058](#L2058) | background: #ffb752; |
| [2059](#L2059) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2060](#L2060) | box-shadow: 0 1px 0 #ccc; |
| [2061](#L2061) | display: inline-block; |
| [2062](#L2062) | text-decoration: none; |
| [2063](#L2063) | line-height: 26px; |
| [2064](#L2064) | height: 28px; |
| [2065](#L2065) | padding: 0 10px 1px; |
| [2066](#L2066) | cursor: pointer; |
| [2067](#L2067) | border-width: 1px; |
| [2068](#L2068) | border-style: solid; |
| [2069](#L2069) | -webkit-border-radius: 3px; |
| [2070](#L2070) | border-radius: 3px; |
| [2071](#L2071) | -webkit-box-sizing: border-box; |
| [2072](#L2072) | -moz-box-sizing: border-box; |
| [2073](#L2073) | box-sizing: border-box; |
| [2074](#L2074) |  |
| [2075](#L2075) | } |
| [2076](#L2076) |  |
| [2077](#L2077) | .cminds\_link.orange:active { |
| [2078](#L2078) | background: #e5a449; |
| [2079](#L2079) | border-color: #ffc574; |
| [2080](#L2080) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2081](#L2081) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2082](#L2082) | -webkit-transform: translateY(1px); |
| [2083](#L2083) | -ms-transform: translateY(1px); |
| [2084](#L2084) | transform: translateY(1px); |
| [2085](#L2085) | } |
| [2086](#L2086) |  |
| [2087](#L2087) | .cminds\_link.orange:hover { |
| [2088](#L2088) | background: #e5a449; |
| [2089](#L2089) | border-color: #ffc574; |
| [2090](#L2090) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2091](#L2091) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2092](#L2092) | -webkit-transform: translateY(1px); |
| [2093](#L2093) | -ms-transform: translateY(1px); |
| [2094](#L2094) | transform: translateY(1px); |
| [2095](#L2095) | } |
| [2096](#L2096) |  |
| [2097](#L2097) | .cminds\_more{ |
| [2098](#L2098) | display: inline-block; |
| [2099](#L2099) | margin: 1em; |
| [2100](#L2100) | vertical-align: top; |
| [2101](#L2101) | font-size: 12pt; |
| [2102](#L2102) | line-height: 123px; |
| [2103](#L2103) | } |
| [2104](#L2104) |  |
| [2105](#L2105) | .cminds\_more > \*{ |
| [2106](#L2106) | cursor: pointer; |
| [2107](#L2107) | } |
| [2108](#L2108) |  |
| [2109](#L2109) | .cminds\_link.cminds\_more\_ads { |
| [2110](#L2110) | -moz-border-radius: 11px; |
| [2111](#L2111) | -webkit-border-radius: 11px; |
| [2112](#L2112) | border-radius: 11px; |
| [2113](#L2113) | border: 1px solid #66c1ed; |
| [2114](#L2114) | font-size: 23px; |
| [2115](#L2115) | padding: 8px 14px; |
| [2116](#L2116) | text-decoration: none; |
| [2117](#L2117) | line-height: 23px; |
| [2118](#L2118) | height: auto; |
| [2119](#L2119) | } |
| [2120](#L2120) |  |
| [2121](#L2121) | .clear, .clearfix{ |
| [2122](#L2122) | clear:both; |
| [2123](#L2123) | } |
| [2124](#L2124) |  |
| [2125](#L2125) | .cmclearfix{ |
| [2126](#L2126) | clear: both !important; |
| [2127](#L2127) | } |
| [2128](#L2128) | </style> |
| [2129](#L2129) |  |
| [2130](#L2130) | <?php if ($isRegistered) : ?> |
| [2131](#L2131) |  |
| [2132](#L2132) | <?php if (!$atts['flat']) : ?> |
| [2133](#L2133) |  |
| [2134](#L2134) | <script> |
| [2135](#L2135) | jQuery(document).ready(function ( ) { |
| [2136](#L2136) | jQuery('.cminds-ads-show-button').on('click', function (e) { |
| [2137](#L2137) | e.preventDefault( ); |
| [2138](#L2138) | jQuery('#cminds\_offers\_wrapper').toggleClass('hidden'); |
| [2139](#L2139) | jQuery('#cminds\_links\_wrapper').toggleClass('hidden'); |
| [2140](#L2140) | }); |
| [2141](#L2141) | });</script> |
| [2142](#L2142) |  |
| [2143](#L2143) | <h3>Special offers from CreativeMinds</h3> |
| [2144](#L2144) |  |
| [2145](#L2145) | <div class="cminds\_ads\_wrapper\_white"> |
| [2146](#L2146) | <a href="https://www.cminds.com/wordpress-plugins-library/seo-keyword-hound-wordpress/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/keywordhoundbanner.jpg"></a> |
| [2147](#L2147) | <span style="margin-left:20px;"> |
| [2148](#L2148) | <a class="" href="https://www.cminds.com/wordpress-plugins-library/cm-wordpress-plugins-yearly-membership/" target="\_blank"><img src="<?php echo plugin\_dir\_url(\_\_FILE\_\_); ?>views/99suite.png"></a> |
| [2149](#L2149) | </span> |
| [2150](#L2150) | </div> |
| [2151](#L2151) |  |
| [2152](#L2152) |  |
| [2153](#L2153) | <?php if (!empty($ads)) : ?> |
| [2154](#L2154) | <div class="cminds\_ads\_internal\_wrapper"> |
| [2155](#L2155) | <?php foreach ($ads as $index => $ad) : ?> |
| [2156](#L2156) | <div class="cminds\_ad"> |
| [2157](#L2157) | <?php |
| [2158](#L2158) | $dateUntil = date('jS F, Y', strtotime($ad['ad\_valid\_date'])); |
| [2159](#L2159) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code <span class="ad\_code">"%s"</span> valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2160](#L2160) | ?> |
| [2161](#L2161) | <span class="cminds\_ad\_link"> |
| [2162](#L2162) | <a class="cminds\_link blue" target="\_blank" href="<?php echo $this->addAffiliateCode($ad['ad\_url']); ?>">Redeem Offer</a> |
| [2163](#L2163) | </span> |
| [2164](#L2164) | </div> |
| [2165](#L2165) | <?php endforeach; ?> |
| [2166](#L2166) | </div> |
| [2167](#L2167) | <?php else: ?> |
| [2168](#L2168) | <div class="cminds\_no\_ads"> |
| [2169](#L2169) | <span class="cminds\_no\_ads\_text"> |
| [2170](#L2170) | Currently we have no special discounts. |
| [2171](#L2171) | </span> |
| [2172](#L2172) | </div> |
| [2173](#L2173) | <?php endif; ?> |
| [2174](#L2174) |  |
| [2175](#L2175) | <div> |
| [2176](#L2176) | <?php if ($adsRefreshed) : |
| [2177](#L2177) | ?> |
| [2178](#L2178) | <span class="ads\_refreshed"> |
| [2179](#L2179) | Discounts have been refreshed. |
| [2180](#L2180) | </span> |
| [2181](#L2181) | <?php else : ?> |
| [2182](#L2182) | You haven't refreshed the discounts for <?php echo $days\_since\_last\_refresh . ' ' . \_n('day', 'days', $days\_since\_last\_refresh); ?>. <a class="cminds-ads-refresh-button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_ad\_refresh' => 1))); ?>"><strong>Refresh now!</strong></a> |
| [2183](#L2183) | <?php endif; ?> |
| [2184](#L2184) | </div> |
| [2185](#L2185) | <?php else: ?> |
| [2186](#L2186) | <ul class="cminds\_ads\_list\_wrapper"> |
| [2187](#L2187) | <?php foreach ($ads as $index => $ad) : ?> |
| [2188](#L2188) | <li class="cminds\_ads\_list\_item">                                                           <?php |
| [2189](#L2189) | $dateUntil = date('Y-m-d', strtotime($ad['ad\_valid\_date'])); |
| [2190](#L2190) | printf('Receive %s discount for <a target="\_blank" href="%s">%s</a> with discount code "%s" valid until %s', $ad['ad\_discount'], $ad['ad\_product\_url'], $ad['ad\_title'], $ad['ad\_code'], $dateUntil); |
| [2191](#L2191) | ?> |
| [2192](#L2192) | </li> |
| [2193](#L2193) | <?php endforeach; ?> |
| [2194](#L2194) | </ul> |
| [2195](#L2195) | <?php endif; ?> |
| [2196](#L2196) | <?php else: ?> |
| [2197](#L2197) | <h3>Special Offers from CreativeMinds</h3> |
| [2198](#L2198) |  |
| [2199](#L2199) | <p> |
| [2200](#L2200) | <a href="javascript:void(0)" id="cminds-unskip">Complete <?php echo esc\_attr($currentPlugin->getOption('plugin-name')); ?> registration</a> and receive special offers |
| [2201](#L2201) | </p> |
| [2202](#L2202) | <?php endif; ?> |
| [2203](#L2203) | <div class="clear clearfix cmclearfix"></div> |
| [2204](#L2204) | <?php |
| [2205](#L2205) | $content = ob\_get\_clean(); |
| [2206](#L2206) | return $content; |
| [2207](#L2207) | } |
| [2208](#L2208) |  |
| [2209](#L2209) | public function getRegistrationFields() { |
| [2210](#L2210) | $fields = array( |
| [2211](#L2211) | 'product\_name'   => $this->getOption('plugin-name'), |
| [2212](#L2212) | 'remote\_url'     => get\_bloginfo('wpurl'), |
| [2213](#L2213) | 'remote\_ip'      => $\_SERVER['SERVER\_ADDR'], |
| [2214](#L2214) | 'remote\_country' => '', |
| [2215](#L2215) | 'remote\_city'    => '', |
| [2216](#L2216) | 'email'          => get\_bloginfo('admin\_email'), |
| [2217](#L2217) | 'hostname'       => get\_bloginfo('wpurl'), |
| [2218](#L2218) | 'username'       => '', |
| [2219](#L2219) | ); |
| [2220](#L2220) |  |
| [2221](#L2221) | $output = ''; |
| [2222](#L2222) |  |
| [2223](#L2223) | foreach ($fields as $key => $value) { |
| [2224](#L2224) | $output .= sprintf('<input type="hidden" name="%s" value="%s" />', $key, $value); |
| [2225](#L2225) | } |
| [2226](#L2226) |  |
| [2227](#L2227) | return $output; |
| [2228](#L2228) | } |
| [2229](#L2229) |  |
| [2230](#L2230) | public function isSkipped($id = null) { |
| [2231](#L2231) | global $cmindsPluginPackage; |
| [2232](#L2232) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2233](#L2233) | $isSkipped = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'); |
| [2234](#L2234) | return $isSkipped; |
| [2235](#L2235) | } |
| [2236](#L2236) |  |
| [2237](#L2237) | public function isRegistered($id = null) { |
| [2238](#L2238) | global $cmindsPluginPackage; |
| [2239](#L2239) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2240](#L2240) | $isRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'); |
| [2241](#L2241) | return $isRegistered; |
| [2242](#L2242) | } |
| [2243](#L2243) |  |
| [2244](#L2244) | public function wasRegistered($id = null) { |
| [2245](#L2245) | global $cmindsPluginPackage; |
| [2246](#L2246) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2247](#L2247) | $wasRegistered = get\_option('cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'); |
| [2248](#L2248) | return $wasRegistered; |
| [2249](#L2249) | } |
| [2250](#L2250) |  |
| [2251](#L2251) | public function setWasRegistered($id = null) { |
| [2252](#L2252) | global $cmindsPluginPackage; |
| [2253](#L2253) | $currentPlugin = !empty($id) ? $cmindsPluginPackage[$id] : $this; |
| [2254](#L2254) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-was-registered'; |
| [2255](#L2255) | $result = update\_option($optionName, 1); |
| [2256](#L2256) | return $result; |
| [2257](#L2257) | } |
| [2258](#L2258) |  |
| [2259](#L2259) | /\*\* |
| [2260](#L2260) | \* Function comminicates with our server to remove the user from our database (right to be forgotten) |
| [2261](#L2261) | \* @global array $cmindsPluginPackage |
| [2262](#L2262) | \* @param type $atts |
| [2263](#L2263) | \* @return type |
| [2264](#L2264) | \*/ |
| [2265](#L2265) | public function deregisterUser($atts = array()) { |
| [2266](#L2266) | global $cmindsPluginPackage; |
| [2267](#L2267) |  |
| [2268](#L2268) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2269](#L2269) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2270](#L2270) |  |
| [2271](#L2271) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2272](#L2272) | $post = filter\_input\_array(INPUT\_POST); |
| [2273](#L2273) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2274](#L2274) |  |
| [2275](#L2275) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2276](#L2276) | if ($nonceCheck) { |
| [2277](#L2277) |  |
| [2278](#L2278) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2279](#L2279) | return; |
| [2280](#L2280) | } |
| [2281](#L2281) |  |
| [2282](#L2282) | unset($post['cminds\_nonce']); |
| [2283](#L2283) | $jsonData = wp\_json\_encode(array($post)); |
| [2284](#L2284) |  |
| [2285](#L2285) | $args = array( |
| [2286](#L2286) | 'body' => array( |
| [2287](#L2287) | 'jsonData' => $jsonData |
| [2288](#L2288) | ) |
| [2289](#L2289) | ); |
| [2290](#L2290) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2291](#L2291) | $response = wp\_remote\_post($href, $args); |
| [2292](#L2292) | if (!is\_wp\_error($response)) { |
| [2293](#L2293) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2294](#L2294) | if ($result && 1 === $result['result']) { |
| [2295](#L2295) | update\_option($optionName, 0); |
| [2296](#L2296) | } |
| [2297](#L2297) | } else { |
| [2298](#L2298) | $args['sslverify'] = false; |
| [2299](#L2299) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=remove\_user&cminds\_json\_api=remove\_user'; |
| [2300](#L2300) | $response = wp\_remote\_post($href, $args); |
| [2301](#L2301) | if (!is\_wp\_error($response)) { |
| [2302](#L2302) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2303](#L2303) | if ($result && 1 === $result['result']) { |
| [2304](#L2304) | update\_option($optionName, 0); |
| [2305](#L2305) | } |
| [2306](#L2306) | } else { |
| [2307](#L2307) | $message = 'User has requested the deregistration: <br/><table>'; |
| [2308](#L2308) | foreach ($post as $key => $value) { |
| [2309](#L2309) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2310](#L2310) | continue; |
| [2311](#L2311) | } |
| [2312](#L2312) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2313](#L2313) | } |
| [2314](#L2314) | $message .= '</table>'; |
| [2315](#L2315) |  |
| [2316](#L2316) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2317](#L2317) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration Canceled', $message); |
| [2318](#L2318) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2319](#L2319) | } |
| [2320](#L2320) | } |
| [2321](#L2321) | update\_option($optionName, 0); |
| [2322](#L2322) | } |
| [2323](#L2323) | } |
| [2324](#L2324) | } |
| [2325](#L2325) |  |
| [2326](#L2326) | public function skipRegistration($atts = array()) { |
| [2327](#L2327) | global $cmindsPluginPackage; |
| [2328](#L2328) |  |
| [2329](#L2329) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2330](#L2330) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2331](#L2331) |  |
| [2332](#L2332) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2333](#L2333) | update\_option($optionName, 1); |
| [2334](#L2334) | } |
| [2335](#L2335) |  |
| [2336](#L2336) | public function unskipRegistration($atts = array()) { |
| [2337](#L2337) | global $cmindsPluginPackage; |
| [2338](#L2338) |  |
| [2339](#L2339) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2340](#L2340) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2341](#L2341) |  |
| [2342](#L2342) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-skipped'; |
| [2343](#L2343) | update\_option($optionName, 0); |
| [2344](#L2344) | } |
| [2345](#L2345) |  |
| [2346](#L2346) | /\*\* |
| [2347](#L2347) | \* Function communicates with our server to register user's e-mail in our database. |
| [2348](#L2348) | \* It's an optional step, user can easily skip it. We only collect e-mail and the url of the site. |
| [2349](#L2349) | \* User is being informed about the data being collected and the reason why it's collected. |
| [2350](#L2350) | \* @global array $cmindsPluginPackage |
| [2351](#L2351) | \* @param type $atts |
| [2352](#L2352) | \* @return type |
| [2353](#L2353) | \*/ |
| [2354](#L2354) | public function registerUser($atts = array()) { |
| [2355](#L2355) | global $cmindsPluginPackage; |
| [2356](#L2356) |  |
| [2357](#L2357) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2358](#L2358) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2359](#L2359) |  |
| [2360](#L2360) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2361](#L2361) | $post = filter\_input\_array(INPUT\_POST); |
| [2362](#L2362) | if (!empty($post) && !empty($post['cminds\_nonce'])) { |
| [2363](#L2363) |  |
| [2364](#L2364) | $nonceCheck = wp\_verify\_nonce($post['cminds\_nonce'], 'cminds\_register\_free'); |
| [2365](#L2365) | if ($nonceCheck) { |
| [2366](#L2366) |  |
| [2367](#L2367) | if ($post['product\_name'] != $currentPlugin->getOption('plugin-name')) { |
| [2368](#L2368) | return; |
| [2369](#L2369) | } |
| [2370](#L2370) |  |
| [2371](#L2371) | unset($post['cminds\_nonce']); |
| [2372](#L2372) | $jsonData = wp\_json\_encode(array($post)); |
| [2373](#L2373) |  |
| [2374](#L2374) | $args = array( |
| [2375](#L2375) | 'body' => array( |
| [2376](#L2376) | 'jsonData' => $jsonData |
| [2377](#L2377) | ) |
| [2378](#L2378) | ); |
| [2379](#L2379) | $href = 'https://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2380](#L2380) | $response = wp\_remote\_post($href, $args); |
| [2381](#L2381) | if (!is\_wp\_error($response)) { |
| [2382](#L2382) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2383](#L2383) | if ($result && 1 === $result['result']) { |
| [2384](#L2384) | update\_option($optionName, 1); |
| [2385](#L2385) | $currentPlugin->setWasRegistered(); |
| [2386](#L2386) | } |
| [2387](#L2387) | } else { |
| [2388](#L2388) | $args['sslverify'] = false; |
| [2389](#L2389) | $href = 'http://www.cminds.com/wp-admin/admin-ajax.php?action=add\_user&cminds\_json\_api=add\_user'; |
| [2390](#L2390) | $response = wp\_remote\_post($href, $args); |
| [2391](#L2391) | if (!is\_wp\_error($response)) { |
| [2392](#L2392) | $result = json\_decode(wp\_remote\_retrieve\_body($response), true); |
| [2393](#L2393) | if ($result && 1 === $result['result']) { |
| [2394](#L2394) | update\_option($optionName, 1); |
| [2395](#L2395) | $currentPlugin->setWasRegistered(); |
| [2396](#L2396) | } |
| [2397](#L2397) | } else { |
| [2398](#L2398) | $message = 'Registered fields: <br/><table>'; |
| [2399](#L2399) | foreach ($post as $key => $value) { |
| [2400](#L2400) | if (!in\_array($key, array('product\_name', 'email', 'hostname'))) { |
| [2401](#L2401) | continue; |
| [2402](#L2402) | } |
| [2403](#L2403) | $message .= '<tr><td>' . $key . '</td><td>' . $value . '</td></tr>'; |
| [2404](#L2404) | } |
| [2405](#L2405) | $message .= '</table>'; |
| [2406](#L2406) |  |
| [2407](#L2407) | add\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2408](#L2408) | wp\_mail('marketing@cminds.com', 'CM Free Product Registration', $message); |
| [2409](#L2409) | remove\_filter('wp\_mail\_content\_type', array(\_\_CLASS\_\_, 'cminds\_set\_content\_type')); |
| [2410](#L2410) | } |
| [2411](#L2411) | } |
| [2412](#L2412) | } |
| [2413](#L2413) | } |
| [2414](#L2414) | } |
| [2415](#L2415) |  |
| [2416](#L2416) | public function showRegistration($atts = array()) { |
| [2417](#L2417) | global $cmindsPluginPackage; |
| [2418](#L2418) |  |
| [2419](#L2419) | $atts = shortcode\_atts(array('id' => null), $atts); |
| [2420](#L2420) | $currentPlugin = !empty($atts['id']) ? $cmindsPluginPackage[$atts['id']] : $this; |
| [2421](#L2421) |  |
| [2422](#L2422) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registration-hidden'; |
| [2423](#L2423) | $registrationHide = filter\_input(INPUT\_GET, 'cminds\_registration\_hide'); |
| [2424](#L2424) | if ($registrationHide) { |
| [2425](#L2425) | update\_option($optionName, 1); |
| [2426](#L2426) | } |
| [2427](#L2427) | $registrationShow = filter\_input(INPUT\_GET, 'cminds\_registration\_show'); |
| [2428](#L2428) | if ($registrationShow) { |
| [2429](#L2429) | delete\_option($optionName); |
| [2430](#L2430) | } |
| [2431](#L2431) | $registrationHidden = get\_option($optionName); |
| [2432](#L2432) |  |
| [2433](#L2433) | $this->registerUser($atts); |
| [2434](#L2434) |  |
| [2435](#L2435) | $optionName = 'cminds-' . $currentPlugin->getOption('plugin-short-slug') . '-registered'; |
| [2436](#L2436) | $isRegistered = $this->isRegistered(); |
| [2437](#L2437) |  |
| [2438](#L2438) | if ($isRegistered) : |
| [2439](#L2439) | return $this->showAds($atts); |
| [2440](#L2440) | else : |
| [2441](#L2441) | ob\_start(); |
| [2442](#L2442) | ?> |
| [2443](#L2443) | <style type="text/css"> |
| [2444](#L2444) |  |
| [2445](#L2445) | div.cminds\_registration\_wrapper { |
| [2446](#L2446) | display: inline-block; |
| [2447](#L2447) | padding: 1em; |
| [2448](#L2448) | background: #FFF; |
| [2449](#L2449) | margin: 1em 1em 0 0; |
| [2450](#L2450) | width: 1004px; |
| [2451](#L2451) | } |
| [2452](#L2452) |  |
| [2453](#L2453) | div.cminds\_registration\_wrapper \* { |
| [2454](#L2454) | vertical-align: top; |
| [2455](#L2455) | } |
| [2456](#L2456) |  |
| [2457](#L2457) | .cminds\_registration{ |
| [2458](#L2458) | display: inline-block; |
| [2459](#L2459) | margin: 1em; |
| [2460](#L2460) | padding: 1em 58px; |
| [2461](#L2461) | } |
| [2462](#L2462) |  |
| [2463](#L2463) | .cminds\_registration form{ |
| [2464](#L2464) | display: inline-block; |
| [2465](#L2465) | margin: 1em; |
| [2466](#L2466) | } |
| [2467](#L2467) | .cminds\_registration form .no-registration{ |
| [2468](#L2468) | margin: 5px 0 0; |
| [2469](#L2469) | text-align: center; |
| [2470](#L2470) | } |
| [2471](#L2471) |  |
| [2472](#L2472) | .cminds\_registration form input[type="submit"]{ |
| [2473](#L2473) | font-size: 16pt; |
| [2474](#L2474) | padding: 7px; |
| [2475](#L2475) | height: auto; |
| [2476](#L2476) | } |
| [2477](#L2477) |  |
| [2478](#L2478) | .cminds\_registration\_text{ |
| [2479](#L2479) | display: inline-block; |
| [2480](#L2480) | margin: 1em; |
| [2481](#L2481) | } |
| [2482](#L2482) |  |
| [2483](#L2483) | .cminds\_registration\_text > span{ |
| [2484](#L2484) | text-align: left; |
| [2485](#L2485) | display: block; |
| [2486](#L2486) | } |
| [2487](#L2487) |  |
| [2488](#L2488) | .cminds\_registration\_text .row\_1{ |
| [2489](#L2489) | font-size: 12pt; |
| [2490](#L2490) | padding-bottom: 5px; |
| [2491](#L2491) | } |
| [2492](#L2492) | .cminds\_registration\_text .row\_2{ |
| [2493](#L2493) | font-size: 10pt; |
| [2494](#L2494) | } |
| [2495](#L2495) |  |
| [2496](#L2496) | .cminds\_link{ |
| [2497](#L2497) | color: #555; |
| [2498](#L2498) | border-color: rgba(204,204,204,0.8); |
| [2499](#L2499) | background: #f7f7f7; |
| [2500](#L2500) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2501](#L2501) | box-shadow: 0 1px 0 #ccc; |
| [2502](#L2502) | display: inline-block; |
| [2503](#L2503) | text-decoration: none; |
| [2504](#L2504) | line-height: 26px; |
| [2505](#L2505) | height: 28px; |
| [2506](#L2506) | padding: 0 10px 1px; |
| [2507](#L2507) | cursor: pointer; |
| [2508](#L2508) | border-width: 1px; |
| [2509](#L2509) | border-style: solid; |
| [2510](#L2510) | -webkit-border-radius: 3px; |
| [2511](#L2511) | border-radius: 3px; |
| [2512](#L2512) | -webkit-box-sizing: border-box; |
| [2513](#L2513) | -moz-box-sizing: border-box; |
| [2514](#L2514) | box-sizing: border-box; |
| [2515](#L2515) | } |
| [2516](#L2516) |  |
| [2517](#L2517) | .cminds\_link:active { |
| [2518](#L2518) | background: #eee; |
| [2519](#L2519) | border-color: #999; |
| [2520](#L2520) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2521](#L2521) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2522](#L2522) | -webkit-transform: translateY(1px); |
| [2523](#L2523) | -ms-transform: translateY(1px); |
| [2524](#L2524) | transform: translateY(1px); |
| [2525](#L2525) | } |
| [2526](#L2526) |  |
| [2527](#L2527) | .cminds\_link:hover { |
| [2528](#L2528) | background: #eee; |
| [2529](#L2529) | border-color: #999; |
| [2530](#L2530) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2531](#L2531) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2532](#L2532) | -webkit-transform: translateY(1px); |
| [2533](#L2533) | -ms-transform: translateY(1px); |
| [2534](#L2534) | transform: translateY(1px); |
| [2535](#L2535) | } |
| [2536](#L2536) |  |
| [2537](#L2537) | .cminds\_link.blue{ |
| [2538](#L2538) | color: #fff; |
| [2539](#L2539) | border-color: #33ace7; |
| [2540](#L2540) | background: #66c1ed; |
| [2541](#L2541) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2542](#L2542) | box-shadow: 0 1px 0 #ccc; |
| [2543](#L2543) | display: inline-block; |
| [2544](#L2544) | text-decoration: none; |
| [2545](#L2545) | line-height: 26px; |
| [2546](#L2546) | height: 28px; |
| [2547](#L2547) | padding: 0 10px 1px; |
| [2548](#L2548) | cursor: pointer; |
| [2549](#L2549) | border-width: 1px; |
| [2550](#L2550) | border-style: solid; |
| [2551](#L2551) | -webkit-border-radius: 3px; |
| [2552](#L2552) | border-radius: 3px; |
| [2553](#L2553) | -webkit-box-sizing: border-box; |
| [2554](#L2554) | -moz-box-sizing: border-box; |
| [2555](#L2555) | box-sizing: border-box; |
| [2556](#L2556) |  |
| [2557](#L2557) | } |
| [2558](#L2558) |  |
| [2559](#L2559) | .cminds\_link.blue:active { |
| [2560](#L2560) | background: #0198e1; |
| [2561](#L2561) | border-color: #66c1ed; |
| [2562](#L2562) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2563](#L2563) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2564](#L2564) | -webkit-transform: translateY(1px); |
| [2565](#L2565) | -ms-transform: translateY(1px); |
| [2566](#L2566) | transform: translateY(1px); |
| [2567](#L2567) | } |
| [2568](#L2568) |  |
| [2569](#L2569) | .cminds\_link.blue:hover { |
| [2570](#L2570) | background: #005b87; |
| [2571](#L2571) | border-color: #0198e1; |
| [2572](#L2572) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2573](#L2573) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2574](#L2574) | -webkit-transform: translateY(1px); |
| [2575](#L2575) | -ms-transform: translateY(1px); |
| [2576](#L2576) | transform: translateY(1px); |
| [2577](#L2577) | } |
| [2578](#L2578) |  |
| [2579](#L2579) | .cminds\_link.orange{ |
| [2580](#L2580) | color: #fff; |
| [2581](#L2581) | border-color: #ffb752; |
| [2582](#L2582) | background: #ffb752; |
| [2583](#L2583) | -webkit-box-shadow: 0 1px 0 #ccc; |
| [2584](#L2584) | box-shadow: 0 1px 0 #ccc; |
| [2585](#L2585) | display: inline-block; |
| [2586](#L2586) | text-decoration: none; |
| [2587](#L2587) | line-height: 26px; |
| [2588](#L2588) | height: 28px; |
| [2589](#L2589) | padding: 0 10px 1px; |
| [2590](#L2590) | cursor: pointer; |
| [2591](#L2591) | border-width: 1px; |
| [2592](#L2592) | border-style: solid; |
| [2593](#L2593) | -webkit-border-radius: 3px; |
| [2594](#L2594) | border-radius: 3px; |
| [2595](#L2595) | -webkit-box-sizing: border-box; |
| [2596](#L2596) | -moz-box-sizing: border-box; |
| [2597](#L2597) | box-sizing: border-box; |
| [2598](#L2598) |  |
| [2599](#L2599) | } |
| [2600](#L2600) |  |
| [2601](#L2601) | .cminds\_link.orange:active { |
| [2602](#L2602) | background: #e5a449; |
| [2603](#L2603) | border-color: #ffc574; |
| [2604](#L2604) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2605](#L2605) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2606](#L2606) | -webkit-transform: translateY(1px); |
| [2607](#L2607) | -ms-transform: translateY(1px); |
| [2608](#L2608) | transform: translateY(1px); |
| [2609](#L2609) | } |
| [2610](#L2610) |  |
| [2611](#L2611) | .cminds\_link.orange:hover { |
| [2612](#L2612) | background: #e5a449; |
| [2613](#L2613) | border-color: #ffc574; |
| [2614](#L2614) | -webkit-box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2615](#L2615) | box-shadow: inset 0 2px 5px -3px rgba(0,0,0,.5); |
| [2616](#L2616) | -webkit-transform: translateY(1px); |
| [2617](#L2617) | -ms-transform: translateY(1px); |
| [2618](#L2618) | transform: translateY(1px); |
| [2619](#L2619) | } |
| [2620](#L2620) |  |
| [2621](#L2621) | .clear, .clearfix{ |
| [2622](#L2622) | clear:both; |
| [2623](#L2623) | } |
| [2624](#L2624) | .cmclearfix{ |
| [2625](#L2625) | clear:both !important; |
| [2626](#L2626) | } |
| [2627](#L2627) |  |
| [2628](#L2628) | </style> |
| [2629](#L2629) |  |
| [2630](#L2630) | <?php if (!$registrationHidden) : ?> |
| [2631](#L2631) |  |
| [2632](#L2632) | <div class="cminds\_registration\_wrapper"> |
| [2633](#L2633) | <div class="cminds\_registration"> |
| [2634](#L2634) | <table><tr> |
| [2635](#L2635) | <td> |
| [2636](#L2636) | <form method="post" action=""> |
| [2637](#L2637) | <?php |
| [2638](#L2638) | wp\_nonce\_field('cminds\_register\_free', 'cminds\_nonce'); |
| [2639](#L2639) | echo $currentPlugin->getRegistrationFields(); |
| [2640](#L2640) | ?> |
| [2641](#L2641) | <input class="button button-primary" style="background-color:green;" type="submit" value="Register Your Copy" /> |
| [2642](#L2642) | <div class="no-registration"> |
| [2643](#L2643) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_hide' => 1), remove\_query\_arg('cminds\_registration\_show'))); ?>">I don't want to register now</a> |
| [2644](#L2644) | </div> |
| [2645](#L2645) | </form> |
| [2646](#L2646) | </td> |
| [2647](#L2647) | <td> |
| [2648](#L2648) | <div class="cminds\_registration\_text"> |
| [2649](#L2649) | <span class="row\_1"> |
| [2650](#L2650) | Once registered, you will receive updates and special offers. |
| [2651](#L2651) | </span> |
| [2652](#L2652) | <span class="row\_2"> |
| [2653](#L2653) | <p>We will only send once, your administrator's e-mail and site URL to CreativeMinds server.<br /> No additional information will be ever collected or sent.</p> |
| [2654](#L2654) | </span> |
| [2655](#L2655) | </td> |
| [2656](#L2656) | </tr> |
| [2657](#L2657) | </table> |
| [2658](#L2658) | </div> |
| [2659](#L2659) | </div> |
| [2660](#L2660) | </div> |
| [2661](#L2661) | <?php else : ?> |
| [2662](#L2662) | <div class="cminds\_registration\_wrapper"> |
| [2663](#L2663) | <div> |
| [2664](#L2664) | <a class="cminds-registration-hide-button button" href="<?php echo esc\_url\_raw(add\_query\_arg(array('cminds\_registration\_show' => 1), remove\_query\_arg('cminds\_registration\_hide'))); ?>">Show registration box</a> |
| [2665](#L2665) | <a href="<?php echo $this->getStoreUrl(); ?>" class="cminds\_link orange" target="\_blank">View all CreativeMidns Plugins</a> |
| [2666](#L2666) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Bundle')); ?>" class="cminds\_link blue" target="\_blank">View Bundles</a> |
| [2667](#L2667) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Add-On')); ?>" class="cminds\_link blue" target="\_blank">View Add-Ons</a> |
| [2668](#L2668) | <a href="<?php echo $this->getStoreUrl(array('category' => 'Service')); ?>" class="cminds\_link blue" target="\_blank">View Services</a> |
| [2669](#L2669) | </div> |
| [2670](#L2670) | </div> |
| [2671](#L2671) | <?php |
| [2672](#L2672) | endif; |
| [2673](#L2673) | echo $this->showUpgrade($atts); |
| [2674](#L2674) | ?> |
| [2675](#L2675) | <div class="clear clearfix cmclearfix"></div> |
| [2676](#L2676) | <?php |
| [2677](#L2677) | $content = ob\_get\_clean(); |
| [2678](#L2678) | return $content; |
| [2679](#L2679) | endif; |
| [2680](#L2680) | } |
| [2681](#L2681) |  |
| [2682](#L2682) | /\*\* |
| [2683](#L2683) | \* Displays the horizontal navigation bar |
| [2684](#L2684) | \* @global string $submenu |
| [2685](#L2685) | \* @global type $plugin\_page |
| [2686](#L2686) | \*/ |
| [2687](#L2687) | protected function showNav() { |
| [2688](#L2688) |  |
| [2689](#L2689) | global $self, $plugin\_page, $typenow, $submenu; |
| [2690](#L2690) |  |
| [2691](#L2691) | $submenus = array(); |
| [2692](#L2692) | $menuItem = $this->getOption('plugin-menu-item'); |
| [2693](#L2693) | $pluginAbbrev = $this->getOption('plugin-abbrev'); |
| [2694](#L2694) |  |
| [2695](#L2695) | ob\_start(); |
| [2696](#L2696) |  |
| [2697](#L2697) | if (isset($submenu[$menuItem])) { |
| [2698](#L2698) |  |
| [2699](#L2699) | $thisMenu = $submenu[$menuItem]; |
| [2700](#L2700) |  |
| [2701](#L2701) | foreach ($thisMenu as $sub\_item) { |
| [2702](#L2702) |  |
| [2703](#L2703) | $slug = $sub\_item[2]; |
| [2704](#L2704) |  |
| [2705](#L2705) | // Handle current for post\_type=post|page|foo pages, which won't match $self. |
| [2706](#L2706) | $self\_type = !empty($typenow) ? $self . '?post\_type=' . $typenow : 'nothing'; |
| [2707](#L2707) |  |
| [2708](#L2708) | $isCurrent = FALSE; |
| [2709](#L2709) |  |
| [2710](#L2710) | $subpageUrl = get\_admin\_url('', 'admin.php?page=' . $slug); |
| [2711](#L2711) |  |
| [2712](#L2712) | if ((!isset($plugin\_page) && $self == $slug) || ( isset($plugin\_page) && $plugin\_page == $slug && ( $menuItem == $self\_type || $menuItem == $self || file\_exists($menuItem) === false ))) { |
| [2713](#L2713) | $isCurrent = TRUE; |
| [2714](#L2714) | } |
| [2715](#L2715) |  |
| [2716](#L2716) | $url = ( strpos($slug, '.php') !== false || strpos($slug, 'http://') !== false || strpos($slug, 'https://') !== false ) ? $slug : $subpageUrl; |
| [2717](#L2717) |  |
| [2718](#L2718) | $isExternal = ( $slug === $url ) ? TRUE : FALSE; |
| [2719](#L2719) |  |
| [2720](#L2720) | /\* |
| [2721](#L2721) | \* Don't show on the Upgrade page itself |
| [2722](#L2722) | \*/ |
| [2723](#L2723) | if (!empty($\_GET['page']) && $\_GET['page'] == $pluginAbbrev . '\_pro' && $slug == $pluginAbbrev . '\_pro') { |
| [2724](#L2724) | continue; |
| [2725](#L2725) | } |
| [2726](#L2726) |  |
| [2727](#L2727) | $submenus[] = array( |
| [2728](#L2728) | 'link'     => $url, |
| [2729](#L2729) | 'title'    => $sub\_item[0], |
| [2730](#L2730) | 'current'  => $isCurrent, |
| [2731](#L2731) | 'external' => $isExternal |
| [2732](#L2732) | ); |
| [2733](#L2733) | } |
| [2734](#L2734) | ?> |
| [2735](#L2735) | <div id="cmhandfsl\_admin\_nav"> |
| [2736](#L2736) | <ul class="subsubsub"> |
| [2737](#L2737) | <?php foreach ($submenus as $menu): ?> |
| [2738](#L2738) |  |
| [2739](#L2739) | <li><a href="<?php echo esc\_attr($menu['link']); ?>" <?php echo ( $menu['current'] ) ? 'class="current"' : ''; ?> <?php |
| [2740](#L2740) | if ($menu['external']) { |
| [2741](#L2741) | echo 'target="\_blank"'; |
| [2742](#L2742) | } |
| [2743](#L2743) | ?>><?php echo esc\_html($menu['title']); ?> |
| [2744](#L2744) | </a></li> |
| [2745](#L2745) | <?php endforeach; ?> |
| [2746](#L2746) | </ul> |
| [2747](#L2747) | <br class="clear" /> |
| [2748](#L2748) | </div> |
| [2749](#L2749) | <?php |
| [2750](#L2750) | } |
| [2751](#L2751) |  |
| [2752](#L2752) | $nav = ob\_get\_contents(); |
| [2753](#L2753) | ob\_end\_clean(); |
| [2754](#L2754) | return $nav; |
| [2755](#L2755) | } |
| [2756](#L2756) |  |
| [2757](#L2757) | public function cminds\_compatibility\_check($plaintext = false) { |
| [2758](#L2758) | global $wp\_version; |
| [2759](#L2759) | $upload\_max = ini\_get('upload\_max\_filesize') ? ini\_get('upload\_max\_filesize') : 'N/A'; |
| [2760](#L2760) | $post\_max = ini\_get('post\_max\_size') ? ini\_get('post\_max\_size') : 'N/A'; |
| [2761](#L2761) | $memory\_limit = ini\_get('memory\_limit') ? ini\_get('memory\_limit') : 'N/A'; |
| [2762](#L2762) | $allow\_url\_fopen = ini\_get('allow\_url\_fopen') ? ini\_get('allow\_url\_fopen') : 'N/A'; |
| [2763](#L2763) | $max\_execution\_time = ini\_get('max\_execution\_time') !== FALSE ? ini\_get('max\_execution\_time') : 'N/A'; |
| [2764](#L2764) | $cURL = function\_exists('curl\_version') ? 'On' : 'Off'; |
| [2765](#L2765) | $mb\_support = function\_exists('mb\_strtolower') ? 'On' : 'Off'; |
| [2766](#L2766) | $intl\_support = extension\_loaded('intl') ? 'On' : 'Off'; |
| [2767](#L2767) | $iconv\_support = extension\_loaded('iconv') ? 'On' : 'Off'; |
| [2768](#L2768) |  |
| [2769](#L2769) | $permalink\_structure = get\_option('permalink\_structure'); |
| [2770](#L2770) | $permalinksurl = self\_admin\_url('options-permalink.php'); |
| [2771](#L2771) |  |
| [2772](#L2772) | $content = ''; |
| [2773](#L2773) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2774](#L2774) | ob\_start(); |
| [2775](#L2775) | if (!$plaintext): |
| [2776](#L2776) | ?> |
| [2777](#L2777) | <span class="description" style=""> |
| [2778](#L2778) | The information in this table is useful to check if the plugin might have some incompabilities with you server. |
| [2779](#L2779) | </span> |
| [2780](#L2780) | <table class="form-table server-info-table"> |
| [2781](#L2781) | <tr> |
| [2782](#L2782) | <td>Package Version</td> |
| [2783](#L2783) | <td><?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?></td> |
| [2784](#L2784) | <td><span>OK</span></td> |
| [2785](#L2785) | </tr> |
| [2786](#L2786) | <tr> |
| [2787](#L2787) | <td>WordPress Version</td> |
| [2788](#L2788) | <td><?php echo $wp\_version; ?></td> |
| [2789](#L2789) | <td><?php if (version\_compare($wp\_version, '3.3.0', '<')): ?><strong>The minimum supported version of WordPress is 3.3</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2790](#L2790) | </tr> |
| [2791](#L2791) | <tr> |
| [2792](#L2792) | <td>Permalinks enabled</td> |
| [2793](#L2793) | <td><?php echo ($permalink\_structure) ? 'Yes' : 'No' ?></td> |
| [2794](#L2794) | <td><?php if (empty($permalink\_structure)): ?><strong>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a></strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2795](#L2795) | </tr> |
| [2796](#L2796) | <tr> |
| [2797](#L2797) | <td>PHP Version</td> |
| [2798](#L2798) | <td><?php echo phpversion(); ?></td> |
| [2799](#L2799) | <td><?php if (version\_compare(phpversion(), '5.3.0', '<')): ?><strong>Recommended 5.3 or higher</strong><?php else: ?><span>OK</span><?php endif; ?></td> |
| [2800](#L2800) | </tr> |
| [2801](#L2801) | <tr> |
| [2802](#L2802) | <td>mbstring support</td> |
| [2803](#L2803) | <td><?php echo $mb\_support; ?></td> |
| [2804](#L2804) | <td><?php if ($mb\_support == 'Off'): ?> |
| [2805](#L2805) | <strong>"mbstring" library is required for plugin to work.</strong> |
| [2806](#L2806) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2807](#L2807) | </tr> |
| [2808](#L2808) | <tr> |
| [2809](#L2809) | <td>intl support</td> |
| [2810](#L2810) | <td><?php echo $intl\_support; ?></td> |
| [2811](#L2811) | <td><?php if ($intl\_support == 'Off'): ?> |
| [2812](#L2812) | <strong>"intl" library is required for proper sorting of accented (non-ASCII) characters.</strong> |
| [2813](#L2813) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2814](#L2814) | </tr> |
| [2815](#L2815) | <tr> |
| [2816](#L2816) | <td>iconv support</td> |
| [2817](#L2817) | <td><?php echo $iconv\_support; ?></td> |
| [2818](#L2818) | <td><?php if ($iconv\_support == 'Off'): ?> |
| [2819](#L2819) | <strong>"iconv" library is required for converting non-UTF-8 characters.</strong> |
| [2820](#L2820) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2821](#L2821) | </tr> |
| [2822](#L2822) | <tr> |
| [2823](#L2823) | <td>PHP Memory Limit</td> |
| [2824](#L2824) | <td><?php echo $memory\_limit; ?></td> |
| [2825](#L2825) | <td><?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2826](#L2826) | <strong>This value can be too low for a site with big glossary.</strong> |
| [2827](#L2827) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2828](#L2828) | </tr> |
| [2829](#L2829) | <tr> |
| [2830](#L2830) | <td>PHP Max Upload Size</td> |
| [2831](#L2831) | <td><?php echo $upload\_max; ?></td> |
| [2832](#L2832) | <td><?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2833](#L2833) | <strong>This value can be too low to import large files.</strong> |
| [2834](#L2834) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2835](#L2835) | </tr> |
| [2836](#L2836) | <tr> |
| [2837](#L2837) | <td>PHP Max Post Size</td> |
| [2838](#L2838) | <td><?php echo $post\_max; ?></td> |
| [2839](#L2839) | <td><?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2840](#L2840) | <strong>This value can be too low to import large files.</strong> |
| [2841](#L2841) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2842](#L2842) | </tr> |
| [2843](#L2843) | <tr> |
| [2844](#L2844) | <td>PHP Max Execution Time </td> |
| [2845](#L2845) | <td><?php echo $max\_execution\_time; ?></td> |
| [2846](#L2846) | <td><?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2847](#L2847) | <strong>This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit.</strong> |
| [2848](#L2848) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2849](#L2849) | </tr> |
| [2850](#L2850) | <tr> |
| [2851](#L2851) | <td>PHP cURL</td> |
| [2852](#L2852) | <td><?php echo $cURL; ?></td> |
| [2853](#L2853) | <td><?php if ($cURL == 'Off'): ?> |
| [2854](#L2854) | <strong>cURL library is required to check if remote audio file exists.</strong> |
| [2855](#L2855) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2856](#L2856) | </tr> |
| [2857](#L2857) | <tr> |
| [2858](#L2858) | <td>PHP allow\_url\_fopen</td> |
| [2859](#L2859) | <td><?php echo $allow\_url\_fopen; ?></td> |
| [2860](#L2860) | <td><?php if ($allow\_url\_fopen == '0'): ?> |
| [2861](#L2861) | <strong>allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API.</strong> |
| [2862](#L2862) | <?php else: ?><span>OK</span><?php endif; ?></td> |
| [2863](#L2863) | </tr> |
| [2864](#L2864) | </table> |
| [2865](#L2865) | <?php |
| [2866](#L2866) | else: |
| [2867](#L2867) | ?> |
| [2868](#L2868) | Package Version         <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?>    OK |
| [2869](#L2869) |  |
| [2870](#L2870) | WordPress Version               <?php echo $wp\_version; ?> |
| [2871](#L2871) | <?php if (version\_compare($wp\_version, '3.3.0', '<')): ?>The minimum supported version of WordPress is 3.3<?php else: ?>OK<?php endif; ?> |
| [2872](#L2872) |  |
| [2873](#L2873) | Permalinks enabled              <?php echo ($permalink\_structure) ? 'Yes' : 'No' ?> |
| [2874](#L2874) | <?php if (empty($permalink\_structure)): ?>Please enable the permalinks. Go to <a href="<?php echo $permalinksurl; ?>">Settings</a><?php else: ?>OK<?php endif; ?> |
| [2875](#L2875) |  |
| [2876](#L2876) | PHP Version             <?php echo phpversion(); ?> |
| [2877](#L2877) | <?php if (version\_compare(phpversion(), '5.3.0', '<')): ?>Recommended 5.3 or higher<?php else: ?>OK<?php endif; ?> |
| [2878](#L2878) |  |
| [2879](#L2879) | mbstring support                <?php echo $mb\_support; ?> |
| [2880](#L2880) | <?php if ($mb\_support == 'Off'): ?> |
| [2881](#L2881) | "mbstring" library is required for plugin to work. |
| [2882](#L2882) | <?php else: ?>OK<?php endif; ?> |
| [2883](#L2883) |  |
| [2884](#L2884) | intl support            <?php echo $intl\_support; ?> |
| [2885](#L2885) | <?php if ($intl\_support == 'Off'): ?> |
| [2886](#L2886) | "intl" library is required for proper sorting of accented characters on Glossary Index page. |
| [2887](#L2887) | <?php else: ?>OK<?php endif; ?> |
| [2888](#L2888) |  |
| [2889](#L2889) | PHP Memory Limit                <?php echo $memory\_limit; ?> |
| [2890](#L2890) | <?php if (self::cminds\_units2bytes($memory\_limit) < 1024 \* 1024 \* 128): ?> |
| [2891](#L2891) | This value can be too low for a site with big glossary. |
| [2892](#L2892) | <?php else: ?>OK<?php endif; ?> |
| [2893](#L2893) |  |
| [2894](#L2894) | PHP Max Upload Size             <?php echo $upload\_max; ?> |
| [2895](#L2895) | <?php if (self::cminds\_units2bytes($upload\_max) < 1024 \* 1024 \* 5): ?> |
| [2896](#L2896) | This value can be too low to import large files. |
| [2897](#L2897) | <?php else: ?>OK<?php endif; ?> |
| [2898](#L2898) |  |
| [2899](#L2899) | PHP Max Post Size               <?php echo $post\_max; ?> |
| [2900](#L2900) | <?php if (self::cminds\_units2bytes($post\_max) < 1024 \* 1024 \* 5): ?> |
| [2901](#L2901) | This value can be too low to import large files. |
| [2902](#L2902) | <?php else: ?>OK<?php endif; ?> |
| [2903](#L2903) |  |
| [2904](#L2904) | PHP Max Execution Time          <?php echo $max\_execution\_time; ?> |
| [2905](#L2905) | <?php if ($max\_execution\_time != 0 && $max\_execution\_time < 300): ?> |
| [2906](#L2906) | This value can be too low for lengthy operations. We strongly suggest setting this value to at least 300 or 0 which is no limit. |
| [2907](#L2907) | <?php else: ?>OK<?php endif; ?> |
| [2908](#L2908) |  |
| [2909](#L2909) | PHP cURL                <?php echo $cURL; ?> |
| [2910](#L2910) | <?php if ($cURL == 'Off'): ?> |
| [2911](#L2911) | cURL library is required to check if remote audio file exists. |
| [2912](#L2912) | <?php else: ?>OK<?php endif; ?> |
| [2913](#L2913) |  |
| [2914](#L2914) | PHP allow\_url\_fopen             <?php echo $allow\_url\_fopen; ?> |
| [2915](#L2915) | <?php if ($allow\_url\_fopen == '0'): ?> |
| [2916](#L2916) | allow\_url\_fopen is required to connect to the Merriam-Webster and Wikipedia API. |
| [2917](#L2917) | <?php else: ?>OK<?php endif; ?> |
| [2918](#L2918) |  |
| [2919](#L2919) | <?php |
| [2920](#L2920) | endif; |
| [2921](#L2921) | $content .= ob\_get\_clean(); |
| [2922](#L2922) | return $content; |
| [2923](#L2923) | } |
| [2924](#L2924) |  |
| [2925](#L2925) | /\*\* |
| [2926](#L2926) | \* System info |
| [2927](#L2927) | \* |
| [2928](#L2928) | \* Shows the system info panel which contains version data and debug info. |
| [2929](#L2929) | \* The data for the system info is generated by the Browser class. |
| [2930](#L2930) | \* |
| [2931](#L2931) | \* @since 1.4 |
| [2932](#L2932) | \* @global $wpdb |
| [2933](#L2933) | \* @global object $wpdb Used to query the database using the WordPress |
| [2934](#L2934) | \*   Database API |
| [2935](#L2935) | \* @return void |
| [2936](#L2936) | \*/ |
| [2937](#L2937) | public function cminds\_system\_info() { |
| [2938](#L2938) | ?> |
| [2939](#L2939) | <div class=""> |
| [2940](#L2940) | <h2><?php \_\_('System Information', 'cminds-package'); ?></h2><br/> |
| [2941](#L2941) | <form action="<?php echo esc\_url(admin\_url('admin.php?page=cmtt\_licensing')); ?>" method="post" dir="ltr"> |
| [2942](#L2942) | <p class="submit"> |
| [2943](#L2943) | <?php wp\_nonce\_field( 'system\_information\_download\_form\_nonce', 'system\_information\_download\_form\_nonce' ); ?> |
| [2944](#L2944) | <input type="hidden" name="cminds\_action" value="download\_sysinfo" /> |
| [2945](#L2945) | <?php submit\_button('Download system information file', 'primary', 'cminds-download-sysinfo', false); ?> |
| [2946](#L2946) | </p> |
| [2947](#L2947) | <textarea class="cminds\_system\_info\_area" readonly="readonly" onclick="this.focus( ); |
| [2948](#L2948) | this.select( )" id="system-info-textarea" name="cminds-sysinfo" title="<?php \_e('To copy the system info, click below then press Ctrl + C (PC) or Cmd + C (Mac).', 'edd'); ?>"> |
| [2949](#L2949) | <?php $this->cminds\_system\_info\_content(); ?> |
| [2950](#L2950) | </textarea> |
| [2951](#L2951) | </form> |
| [2952](#L2952) | </div> |
| [2953](#L2953) | <?php |
| [2954](#L2954) | } |
| [2955](#L2955) |  |
| [2956](#L2956) | /\*\* |
| [2957](#L2957) | \* Generates the System Info Download File |
| [2958](#L2958) | \* |
| [2959](#L2959) | \* @since 1.4 |
| [2960](#L2960) | \* @return void |
| [2961](#L2961) | \*/ |
| [2962](#L2962) | public function cminds\_system\_info\_content() { |
| [2963](#L2963) | global $wpdb; |
| [2964](#L2964) |  |
| [2965](#L2965) | if (get\_bloginfo('version') < '3.4') { |
| [2966](#L2966) | $theme\_data = get\_theme\_data(get\_stylesheet\_directory() . '/style.css'); |
| [2967](#L2967) | $theme = $theme\_data['Name'] . ' ' . $theme\_data['Version']; |
| [2968](#L2968) | } else { |
| [2969](#L2969) | $theme\_data = wp\_get\_theme(); |
| [2970](#L2970) | $theme = $theme\_data->Name . ' ' . $theme\_data->Version; |
| [2971](#L2971) | } |
| [2972](#L2972) |  |
| [2973](#L2973) | // Try to identifty the hosting provider |
| [2974](#L2974) | $host = false; |
| [2975](#L2975) | if (defined('WPE\_APIKEY')) { |
| [2976](#L2976) | $host = 'WP Engine'; |
| [2977](#L2977) | } elseif (defined('PAGELYBIN')) { |
| [2978](#L2978) | $host = 'Pagely'; |
| [2979](#L2979) | } |
| [2980](#L2980) | $namespace = explode('\\', \_\_NAMESPACE\_\_); |
| [2981](#L2981) | ?> |
| [2982](#L2982) | ### Begin System Info ### |
| [2983](#L2983) |  |
| [2984](#L2984) | ## Please include this information when posting support requests ## |
| [2985](#L2985) |  |
| [2986](#L2986) | <?php do\_action('cminds\_system\_info\_before'); ?> |
| [2987](#L2987) |  |
| [2988](#L2988) | Package Version:                <?php echo str\_replace(array('v', '\_'), array('', '.'), end($namespace)); ?> |
| [2989](#L2989) |  |
| [2990](#L2990) | Multisite:                <?php echo is\_multisite() ? 'Yes' . "\n" : 'No' . "\n" ?> |
| [2991](#L2991) |  |
| [2992](#L2992) | SITE\_URL:                 <?php echo site\_url() . "\n"; ?> |
| [2993](#L2993) | HOME\_URL:                 <?php echo home\_url() . "\n"; ?> |
| [2994](#L2994) |  |
| [2995](#L2995) | WordPress Version:        <?php echo get\_bloginfo('version') . "\n"; ?> |
| [2996](#L2996) | Permalink Structure:      <?php echo get\_option('permalink\_structure') . "\n"; ?> |
| [2997](#L2997) | Active Theme:             <?php echo $theme . "\n"; ?> |
| [2998](#L2998) | <?php if ($host) : ?> |
| [2999](#L2999) | Host:                     <?php echo $host . "\n"; ?> |
| [3000](#L3000) | <?php endif; ?> |
| [3001](#L3001) |  |
| [3002](#L3002) | Registered Post Stati:    <?php echo implode(', ', get\_post\_stati()) . "\n\n"; ?> |
| [3003](#L3003) |  |
| [3004](#L3004) | PHP Version:              <?php echo PHP\_VERSION . "\n"; ?> |
| [3005](#L3005) | MySQL Version:            <?php echo (function\_exists('mysqli\_get\_server\_info')) ? mysqli\_get\_server\_info($wpdb->dbh) . "\n" : 'N/A' . "\n"; ?> |
| [3006](#L3006) | Web Server Info:          <?php echo $\_SERVER['SERVER\_SOFTWARE'] . "\n"; ?> |
| [3007](#L3007) |  |
| [3008](#L3008) | WordPress Memory Limit:   <?php echo WP\_MEMORY\_LIMIT ?><?php echo "\n"; ?> |
| [3009](#L3009) | PHP Memory Limit:         <?php echo ini\_get('memory\_limit') . "\n"; ?> |
| [3010](#L3010) | PHP Upload Max Size:      <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3011](#L3011) | PHP Post Max Size:        <?php echo ini\_get('post\_max\_size') . "\n"; ?> |
| [3012](#L3012) | PHP Upload Max Filesize:  <?php echo ini\_get('upload\_max\_filesize') . "\n"; ?> |
| [3013](#L3013) | PHP Time Limit:           <?php echo ini\_get('max\_execution\_time') . "\n"; ?> |
| [3014](#L3014) | PHP Max Input Vars:       <?php echo ini\_get('max\_input\_vars') . "\n"; ?> |
| [3015](#L3015) | PHP Arg Separator:        <?php echo ini\_get('arg\_separator.output') . "\n"; ?> |
| [3016](#L3016) | PHP Allow URL File Open:  <?php echo ini\_get('allow\_url\_fopen') ? "Yes" : "No\n"; ?> |
| [3017](#L3017) |  |
| [3018](#L3018) | WP\_DEBUG:                 <?php echo defined('WP\_DEBUG') ? WP\_DEBUG ? 'Enabled' . "\n" : 'Disabled' . "\n" : 'Not set' . "\n" ?> |
| [3019](#L3019) |  |
| [3020](#L3020) | WP Table Prefix:          <?php |
| [3021](#L3021) | echo "Length: " . strlen($wpdb->prefix); |
| [3022](#L3022) | echo " Status:"; |
| [3023](#L3023) | if (strlen($wpdb->prefix) > 16) { |
| [3024](#L3024) | echo " ERROR: Too Long"; |
| [3025](#L3025) | } else { |
| [3026](#L3026) | echo " Acceptable"; |
| [3027](#L3027) | } echo "\n"; |
| [3028](#L3028) | ?> |
| [3029](#L3029) |  |
| [3030](#L3030) | Show On Front:            <?php echo get\_option('show\_on\_front') . "\n" ?> |
| [3031](#L3031) | Page On Front:            <?php |
| [3032](#L3032) | $id = get\_option('page\_on\_front'); |
| [3033](#L3033) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3034](#L3034) | ?> |
| [3035](#L3035) | Page For Posts:           <?php |
| [3036](#L3036) | $id = get\_option('page\_for\_posts'); |
| [3037](#L3037) | echo get\_the\_title($id) . ' (#' . $id . ')' . "\n" |
| [3038](#L3038) | ?> |
| [3039](#L3039) |  |
| [3040](#L3040) | <?php |
| [3041](#L3041) | $request['cmd'] = '\_notify-validate'; |
| [3042](#L3042) |  |
| [3043](#L3043) | $params = array( |
| [3044](#L3044) | 'sslverify'  => false, |
| [3045](#L3045) | 'timeout'    => 60, |
| [3046](#L3046) | 'user-agent' => 'Cminds/' . $this->getOption('plugin-version'), |
| [3047](#L3047) | 'body'       => $request |
| [3048](#L3048) | ); |
| [3049](#L3049) |  |
| [3050](#L3050) | $response = wp\_remote\_post('https://www.paypal.com/cgi-bin/webscr', $params); |
| [3051](#L3051) |  |
| [3052](#L3052) | if (!is\_wp\_error($response) && $response['response']['code'] >= 200 && $response['response']['code'] < 300) { |
| [3053](#L3053) | $WP\_REMOTE\_POST = 'wp\_remote\_post() works' . "\n"; |
| [3054](#L3054) | } else { |
| [3055](#L3055) | $WP\_REMOTE\_POST = 'wp\_remote\_post() does not work' . "\n"; |
| [3056](#L3056) | } |
| [3057](#L3057) | ?> |
| [3058](#L3058) | WP Remote Post:           <?php echo $WP\_REMOTE\_POST; ?> |
| [3059](#L3059) |  |
| [3060](#L3060) | Session:                  <?php echo isset($\_SESSION) ? 'Enabled' : 'Disabled'; ?><?php echo "\n"; ?> |
| [3061](#L3061) | Session Name:             <?php echo esc\_html(ini\_get('session.name')); ?><?php echo "\n"; ?> |
| [3062](#L3062) | Cookie Path:              <?php echo esc\_html(ini\_get('session.cookie\_path')); ?><?php echo "\n"; ?> |
| [3063](#L3063) | Save Path:                <?php echo esc\_html(ini\_get('session.save\_path')); ?><?php echo "\n"; ?> |
| [3064](#L3064) | Use Cookies:              <?php echo ini\_get('session.use\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3065](#L3065) | Use Only Cookies:         <?php echo ini\_get('session.use\_only\_cookies') ? 'On' : 'Off'; ?><?php echo "\n"; ?> |
| [3066](#L3066) |  |
| [3067](#L3067) | DISPLAY ERRORS:           <?php echo ( ini\_get('display\_errors') ) ? 'On (' . ini\_get('display\_errors') . ')' : 'N/A'; ?><?php echo "\n"; ?> |
| [3068](#L3068) | FSOCKOPEN:                <?php echo ( function\_exists('fsockopen') ) ? 'Your server supports fsockopen.' : 'Your server does not support fsockopen.'; ?><?php echo "\n"; ?> |
| [3069](#L3069) | cURL:                     <?php echo ( function\_exists('curl\_init') ) ? 'Your server supports cURL.' : 'Your server does not support cURL.'; ?><?php echo "\n"; ?> |
| [3070](#L3070) | SOAP Client:              <?php echo ( class\_exists('SoapClient') ) ? 'Your server has the SOAP Client enabled.' : 'Your server does not have the SOAP Client enabled.'; ?><?php echo "\n"; ?> |
| [3071](#L3071) | SUHOSIN:                  <?php echo ( extension\_loaded('suhosin') ) ? 'Your server has SUHOSIN installed.' : 'Your server does not have SUHOSIN installed.'; ?><?php echo "\n"; ?> |
| [3072](#L3072) |  |
| [3073](#L3073) | ##COMPATIBILITY |
| [3074](#L3074) |  |
| [3075](#L3075) | <?php echo $this->cminds\_compatibility\_check(true); ?> |
| [3076](#L3076) |  |
| [3077](#L3077) | ##ACTIVE PLUGINS: |
| [3078](#L3078) |  |
| [3079](#L3079) | <?php |
| [3080](#L3080) | $plugins = get\_plugins(); |
| [3081](#L3081) | $active\_plugins = get\_option('active\_plugins', array()); |
| [3082](#L3082) |  |
| [3083](#L3083) | foreach ($plugins as $plugin\_path => $plugin) { |
| [3084](#L3084) | // If the plugin isn't active, don't show it. |
| [3085](#L3085) | if (!in\_array($plugin\_path, $active\_plugins)) |
| [3086](#L3086) | continue; |
| [3087](#L3087) |  |
| [3088](#L3088) | echo $plugin['Name'] . ': ' . $plugin['Version'] . "\n"; |
| [3089](#L3089) | } |
| [3090](#L3090) |  |
| [3091](#L3091) | if (is\_multisite()) : |
| [3092](#L3092) | ?> |
| [3093](#L3093) |  |
| [3094](#L3094) | NETWORK ACTIVE PLUGINS: |
| [3095](#L3095) |  |
| [3096](#L3096) | <?php |
| [3097](#L3097) | $plugins = wp\_get\_active\_network\_plugins(); |
| [3098](#L3098) | $active\_plugins = get\_site\_option('active\_sitewide\_plugins', array()); |
| [3099](#L3099) |  |
| [3100](#L3100) | foreach ($plugins as $plugin\_path) { |
| [3101](#L3101) | $plugin\_base = plugin\_basename($plugin\_path); |
| [3102](#L3102) |  |
| [3103](#L3103) | // If the plugin isn't active, don't show it. |
| [3104](#L3104) | if (!array\_key\_exists($plugin\_base, $active\_plugins)) |
| [3105](#L3105) | continue; |
| [3106](#L3106) |  |
| [3107](#L3107) | $plugin = get\_plugin\_data($plugin\_path); |
| [3108](#L3108) |  |
| [3109](#L3109) | echo $plugin['Name'] . ' :' . $plugin['Version'] . "\n"; |
| [3110](#L3110) | } |
| [3111](#L3111) |  |
| [3112](#L3112) | endif; |
| [3113](#L3113) | do\_action('cminds\_system\_info\_after'); |
| [3114](#L3114) | ?> |
| [3115](#L3115) | ### End System Info ### |
| [3116](#L3116) | <?php |
| [3117](#L3117) | } |
| [3118](#L3118) |  |
| [3119](#L3119) | /\*\* |
| [3120](#L3120) | \* Generates the System Info Download File |
| [3121](#L3121) | \* |
| [3122](#L3122) | \* @since 1.4 |
| [3123](#L3123) | \* @return void |
| [3124](#L3124) | \*/ |
| [3125](#L3125) | public function cminds\_generate\_sysinfo\_download() { |
| [3126](#L3126) | if ( wp\_verify\_nonce( $\_POST['system\_information\_download\_form\_nonce'], 'system\_information\_download\_form\_nonce' ) ) { |
| [3127](#L3127) | nocache\_headers(); |
| [3128](#L3128) |  |
| [3129](#L3129) | header("Content-type: text/plain"); |
| [3130](#L3130) | header('Content-Disposition: attachment; filename="cminds-system-info.txt"'); |
| [3131](#L3131) |  |
| [3132](#L3132) | echo wp\_strip\_all\_tags($\_POST['cminds-sysinfo']); |
| [3133](#L3133) | die(); |
| [3134](#L3134) | } |
| [3135](#L3135) | } |
| [3136](#L3136) |  |
| [3137](#L3137) | public function getOption($key, $default = NULL) { |
| [3138](#L3138) | $value = isset($this->config[$key]) ? $this->config[$key] : $default; |
| [3139](#L3139) | return $value; |
| [3140](#L3140) | } |
| [3141](#L3141) |  |
| [3142](#L3142) | public function getPageUrl($pageBase = 'licensing') { |
| [3143](#L3143) | $pluginMenuPageBase = $this->pluginMenu; |
| [3144](#L3144) | $abbrev = $this->getOption('plugin-is-addon') ? $this->getOption('plugin-parent-abbrev') : $this->getOption('plugin-abbrev'); |
| [3145](#L3145) | if (empty($abbrev)) { |
| [3146](#L3146) | /\* |
| [3147](#L3147) | \* Abbrev not set for the plugin try to guess |
| [3148](#L3148) | \*/ |
| [3149](#L3149) | $abbrev = substr($this->getOption('plugin-abbrev'), 0, -1); |
| [3150](#L3150) | } |
| [3151](#L3151) | $page = $abbrev . '\_' . $pageBase; |
| [3152](#L3152) | if (FALSE === strpos($pluginMenuPageBase, '.php')) { |
| [3153](#L3153) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url('admin.php'))); |
| [3154](#L3154) | } else { |
| [3155](#L3155) | $pageUrl = esc\_attr(add\_query\_arg(urlencode\_deep(array('page' => $page)), admin\_url($pluginMenuPageBase))); |
| [3156](#L3156) | } |
| [3157](#L3157) | return $pageUrl; |
| [3158](#L3158) | } |
| [3159](#L3159) |  |
| [3160](#L3160) | /\*\* |
| [3161](#L3161) | \* Converts the Apache memory values to number of bytes ini\_get('upload\_max\_filesize') or ini\_get('post\_max\_size') |
| [3162](#L3162) | \* @param type $str |
| [3163](#L3163) | \* @return type |
| [3164](#L3164) | \*/ |
| [3165](#L3165) | public static function cminds\_units2bytes($str) { |
| [3166](#L3166) | $units = array('B', 'K', 'M', 'G', 'T'); |
| [3167](#L3167) | $unit = preg\_replace('/[0-9]/', '', $str); |
| [3168](#L3168) | $unitFactor = array\_search(strtoupper($unit), $units); |
| [3169](#L3169) | if ($unitFactor !== false) { |
| [3170](#L3170) | return preg\_replace('/[a-z]/i', '', $str) \* pow(2, 10 \* $unitFactor); |
| [3171](#L3171) | } |
| [3172](#L3172) | } |
| [3173](#L3173) |  |
| [3174](#L3174) | public static function cminds\_set\_content\_type() { |
| [3175](#L3175) | return "text/html"; |
| [3176](#L3176) | } |
| [3177](#L3177) |  |
| [3178](#L3178) | } |
| [3179](#L3179) |  |
| [3180](#L3180) | } |
| [3181](#L3181) |  |
| [3182](#L3182) | /\* |
| [3183](#L3183) | \* Load the config |
| [3184](#L3184) | \*/ |
| [3185](#L3185) | global $cmindsPluginPackage; |
| [3186](#L3186) | include('cminds-plugin-config.php'); |
| [3187](#L3187) | $cmindsPluginPackage[$cminds\_plugin\_config['plugin-abbrev']] = new CmindsFreePackage($cminds\_plugin\_config); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/cm-header-footer-script-loader/trunk/package/cminds-free.php?format=txt)
* [Original Format](/export/3222474/cm-header-footer-script-loader/trunk/package/cminds-free.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


