=== Content from plugins.trac.wordpress.org_e9438326_20250114_225957.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Ffinance-calculator-with-application-form%2Ftags%2F2.2.1%2Ffinance-calculator-with-aplication-form.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/finance-calculator-with-application-form/tags/2.2.1/finance-calculator-with-aplication-form.php?rev=3063488 "Revision 3063488")
* Next Revision →
* [Blame](/browser/finance-calculator-with-application-form/tags/2.2.1/finance-calculator-with-aplication-form.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/finance-calculator-with-application-form/tags/2.2.1/finance-calculator-with-aplication-form.php)

---

# [source:](/browser?order=name "Go to repository root") [finance-calculator-with-application-form](/browser/finance-calculator-with-application-form?order=name "View finance-calculator-with-application-form")/[tags](/browser/finance-calculator-with-application-form/tags?order=name "View tags")/[2.2.1](/browser/finance-calculator-with-application-form/tags/2.2.1?order=name "View 2.2.1")/[finance-calculator-with-aplication-form.php](/browser/finance-calculator-with-application-form/tags/2.2.1/finance-calculator-with-aplication-form.php?order=name "View finance-calculator-with-aplication-form.php")

View diff against:

View revision:

| [Last change](/changeset/3128815/finance-calculator-with-application-form/tags/2.2.1/finance-calculator-with-aplication-form.php "View differences") on this file was [3128815](/changeset/3128815/ "View changeset 3128815"), checked in by financecalculatorwp, [6 months ago](/timeline?from=2024-07-31T13%3A24%3A56Z&precision=second "See timeline at 07/31/2024 01:24:56 PM") |
| --- |
| Plugin update commit |
| **File size:** 37.3 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\* |
| [3](#L3) | Plugin Name: Financial Calculator |
| [4](#L4) | Plugin URI: https://www.calculator.io/financial-calculator/ |
| [5](#L5) | Description: Financial Calculator is a drop in form for users to calculate indicative repayments. It can be implemented on a page or a post. |
| [6](#L6) | Author: Financial Calculators |
| [7](#L7) | Author URI: https://www.calculator.io/financial-calculator/ |
| [8](#L8) | Version: 2.2.1 |
| [9](#L9) | License: GPL3 |
| [10](#L10) | License URI: https://www.gnu.org/licenses/gpl-3.0.html |
| [11](#L11) |  |
| [12](#L12) | Finance Calculator with Application Form |
| [13](#L13) | Copyright (C) 2010-2023 Ciprian Popescu (getbutterfly@gmail.com) |
| [14](#L14) |  |
| [15](#L15) | This program is free software: you can redistribute it and/or modify |
| [16](#L16) | it under the terms of the GNU General Public License as published by |
| [17](#L17) | the Free Software Foundation, either version 3 of the License, or |
| [18](#L18) | (at your option) any later version. |
| [19](#L19) |  |
| [20](#L20) | This program is distributed in the hope that it will be useful, |
| [21](#L21) | but WITHOUT ANY WARRANTY; without even the implied warranty of |
| [22](#L22) | MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the |
| [23](#L23) | GNU General Public License for more details. |
| [24](#L24) |  |
| [25](#L25) | You should have received a copy of the GNU General Public License |
| [26](#L26) | along with this program.  If not, see <http://www.gnu.org/licenses/>. |
| [27](#L27) | \*/ |
| [28](#L28) |  |
| [29](#L29) | if (!defined('ABSPATH')) exit; // Exit if accessed directly |
| [30](#L30) |  |
| [31](#L31) | add\_action('admin\_menu', 'wpfcs\_plugin\_menu'); |
| [32](#L32) |  |
| [33](#L33) | add\_option('wpfc\_finance\_rate', 11); |
| [34](#L34) | add\_option('wpfc\_application\_email', ''); |
| [35](#L35) | add\_option('wpfc\_currency', 'EUR'); |
| [36](#L36) | add\_option('wpfc\_currency\_symbol', '&euro;'); |
| [37](#L37) | add\_option('wpfcs\_loan\_options', 'Motor Loan|7.9,Standard Loan|9,College Loan|7,Green Loan|7.9,Secured Loan|5.5,Savers Loan|5.5'); |
| [38](#L38) | add\_option('wpfc\_show\_application', 1); |
| [39](#L39) |  |
| [40](#L40) | function wpfcs\_assets() { |
| [41](#L41) | wp\_register\_style('wpfcs', plugins\_url('css/style.css', \_\_FILE\_\_), [], '2.1.9'); |
| [42](#L42) |  |
| [43](#L43) | wp\_register\_script('wpfcs', plugins\_url('includes/js.finance.js', \_\_FILE\_\_), [], '2.1.9', true); |
| [44](#L44) | } |
| [45](#L45) | add\_action('wp\_enqueue\_scripts', 'wpfcs\_assets'); |
| [46](#L46) |  |
| [47](#L47) |  |
| [48](#L48) | /\*\* |
| [49](#L49) | \* Register/enqueue plugin scripts and styles (back-end) |
| [50](#L50) | \*/ |
| [51](#L51) | function wpfcs\_enqueue\_scripts() { |
| [52](#L52) | wp\_enqueue\_style('wpfcs', plugins\_url('css/admin.css', \_\_FILE\_\_)); |
| [53](#L53) | } |
| [54](#L54) | add\_action('admin\_enqueue\_scripts', 'wpfcs\_enqueue\_scripts'); |
| [55](#L55) |  |
| [56](#L56) |  |
| [57](#L57) |  |
| [58](#L58) | function wpfcs\_plugin\_menu() { |
| [59](#L59) | add\_options\_page(\_\_('Finance Calculator', 'wpfc'), \_\_('Finance Calculator', 'wpfc'), 'manage\_options', 'wpfcs', 'wpfc\_plugin\_options'); |
| [60](#L60) | } |
| [61](#L61) |  |
| [62](#L62) | function wpfc\_plugin\_options() { |
| [63](#L63) | global $wpdb; |
| [64](#L64) |  |
| [65](#L65) | // See if the user has posted us some information // if they did, this hidden field will be set to 'Y' |
| [66](#L66) | if(isset($\_POST['wpfcs\_submit'])) { |
| [67](#L67) | update\_option('wpfc\_finance\_rate', floatval($\_POST['wpfc\_finance\_rate'])); |
| [68](#L68) | update\_option('wpfc\_application\_email', sanitize\_email($\_POST['wpfc\_application\_email'])); |
| [69](#L69) | update\_option('wpfc\_currency', sanitize\_text\_field($\_POST['wpfc\_currency'])); |
| [70](#L70) | update\_option('wpfc\_currency\_symbol', sanitize\_text\_field($\_POST['wpfc\_currency\_symbol'])); |
| [71](#L71) | update\_option('wpfcs\_loan\_options', sanitize\_text\_field($\_POST['wpfcs\_loan\_options'])); |
| [72](#L72) | update\_option('wpfc\_show\_application', sanitize\_text\_field($\_POST['wpfc\_show\_application'])); |
| [73](#L73) |  |
| [74](#L74) | echo '<div id="message" class="updated notice is-dismissible"><p>' . \_\_('Settings saved.', 'finance-calculator-with-aplication-form') . '</p></div>'; |
| [75](#L75) | } |
| [76](#L76) |  |
| [77](#L77) | // read in existing option value from database |
| [78](#L78) | $wpfc\_finance\_rate = get\_option('wpfc\_finance\_rate'); |
| [79](#L79) | $wpfc\_application\_email = get\_option('wpfc\_application\_email'); |
| [80](#L80) | $wpfc\_currency = get\_option('wpfc\_currency'); |
| [81](#L81) | $wpfc\_currency\_symbol = get\_option('wpfc\_currency\_symbol'); |
| [82](#L82) | $wpfc\_show\_application = get\_option('wpfc\_show\_application'); |
| [83](#L83) | $wpfcs\_loan\_options = get\_option('wpfcs\_loan\_options'); |
| [84](#L84) | ?> |
| [85](#L85) | <div class="wrap"> |
| [86](#L86) | <h2>Finance Calculator Settings</h2> |
| [87](#L87) |  |
| [88](#L88) | <div class="gb-ad" id="gb-ad"> |
| [89](#L89) | <h3 class="gb-ad--header"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 68"><defs/><rect width="100%" height="100%" fill="none"/><g class="currentLayer"><path fill="#fff" d="M34.76 33C22.85 21.1 20.1 13.33 28.23 5.2 36.37-2.95 46.74.01 50.53 3.8c3.8 3.8 5.14 17.94-5.04 28.12-2.95 2.95-5.97 5.84-5.97 5.84L34.76 33"/><path fill="#fff" d="M43.98 42.21c5.54 5.55 14.59 11.06 20.35 5.3 5.76-5.77 3.67-13.1.98-15.79-2.68-2.68-10.87-5.25-18.07 1.96-2.95 2.95-5.96 5.84-5.96 5.84l2.7 2.7m-1.76 1.75c5.55 5.54 11.06 14.59 5.3 20.35-5.77 5.76-13.1 3.67-15.79.98-2.69-2.68-5.25-10.87 1.95-18.07 2.85-2.84 5.84-5.96 5.84-5.96l2.7 2.7" class="selected"/><path fill="#fff" d="M33 34.75c-11.9-11.9-19.67-14.67-27.8-6.52-8.15 8.14-5.2 18.5-1.4 22.3 3.8 3.79 17.95 5.13 28.13-5.05 3.1-3.11 5.84-5.97 5.84-5.97L33 34.75"/></g></svg> Thank you for using Finance Calculator with Application Form!</h3> |
| [90](#L90) | <div class="gb-ad--content"> |
| [91](#L91) | <p>If you enjoy this plugin, do not forget to <a href="https://wordpress.org/support/plugin/finance-calculator-with-application-form/reviews/?filter=5" rel="external">rate it</a>! We work hard to update it, fix bugs, add new features and make it compatible with the latest web technologies.</p> |
| [92](#L92) | <p>Have you tried our other <a href="https://getbutterfly.com/wordpress-plugins/">WordPress plugins</a>?</p> |
| [93](#L93) | </div> |
| [94](#L94) | <div class="gb-ad--footer"> |
| [95](#L95) | <p>For support, feature requests and bug reporting, please visit the <a href="https://getbutterfly.com/" rel="external">official website</a>.<br>Built by <a href="https://getbutterfly.com/" rel="external"><strong>getButterfly</strong>.com</a> &middot; <a href="https://getbutterfly.com/finance-calculator-with-application-form/">Documentation</a> &middot; <small>Code wrangling since 2005</small></p> |
| [96](#L96) |  |
| [97](#L97) | <p> |
| [98](#L98) | <small>You are using PHP <?php echo PHP\_VERSION; ?> and MySQL <?php echo $wpdb->db\_version(); ?>.</small> |
| [99](#L99) | </p> |
| [100](#L100) | </div> |
| [101](#L101) | </div> |
| [102](#L102) |  |
| [103](#L103) | <form method="post" action=""> |
| [104](#L104) | <h3>Finance Calculator Options</h3> |
| [105](#L105) |  |
| [106](#L106) | <table class="form-table"> |
| [107](#L107) | <tbody> |
| [108](#L108) | <tr> |
| [109](#L109) | <th scope="row"><label for="wpfc\_finance\_rate">Finance Rate</label></th> |
| [110](#L110) | <td> |
| [111](#L111) | <input type="number" class="regular-text" name="wpfc\_finance\_rate" id="wpfc\_finance\_rate" value="<?php echo $wpfc\_finance\_rate; ?>" min="0" max="100" step="0.01"> |
| [112](#L112) | <br><small>Monthly payment will be calculated using this default rate.</small> |
| [113](#L113) | </td> |
| [114](#L114) | </tr> |
| [115](#L115) | <tr> |
| [116](#L116) | <th scope="row"><label for="wpfc\_application\_email">Application Email</label></th> |
| [117](#L117) | <td> |
| [118](#L118) | <input type="email" class="regular-text" name="wpfc\_application\_email" id="wpfc\_application\_email" value="<?php echo $wpfc\_application\_email; ?>" class="regular-text"> |
| [119](#L119) | <br><small>Application emails will be sent to this address.</small> |
| [120](#L120) | </td> |
| [121](#L121) | </tr> |
| [122](#L122) | <tr> |
| [123](#L123) | <th scope="row"><label for="wpfc\_currency">Currency</label></th> |
| [124](#L124) | <td> |
| [125](#L125) | <p> |
| [126](#L126) | <input type="text" class="regular-text" name="wpfc\_currency" id="wpfc\_currency" value="<?php echo $wpfc\_currency; ?>" class="regular-text"> |
| [127](#L127) | <br><small>Currency code used in application emails (e.g. <code>USD</code>, <code>EUR</code>, <code>GBP</code>).</small> |
| [128](#L128) | </p> |
| [129](#L129) | <p> |
| [130](#L130) | <input type="text" class="regular-text" name="wpfc\_currency\_symbol" id="wpfc\_currency\_symbol" value="<?php echo $wpfc\_currency\_symbol; ?>" size="3"> |
| [131](#L131) | <br><small>Currency symbol used in application emails (e.g. <code>$</code>, <code>&euro;</code>, <code>&pound;</code>).</small> |
| [132](#L132) | </p> |
| [133](#L133) | </td> |
| [134](#L134) | </tr> |
| [135](#L135) | <tr> |
| [136](#L136) | <th scope="row"><label for="wpfc\_show\_application">Application Button</label></th> |
| [137](#L137) | <td> |
| [138](#L138) | <select name="wpfc\_show\_application"> |
| [139](#L139) | <option value="1" <?php if ((int) $wpfc\_show\_application === 1) { echo 'selected'; } ?>>Show finance application button</option> |
| [140](#L140) | <option value="0" <?php if ((int) $wpfc\_show\_application === 0) { echo 'selected'; } ?>>Hide finance application button</option> |
| [141](#L141) | </select> |
| [142](#L142) | </td> |
| [143](#L143) | </tr> |
| [144](#L144) | </tbody> |
| [145](#L145) | </table> |
| [146](#L146) |  |
| [147](#L147) | <h3>Loan Calculator Options</h3> |
| [148](#L148) |  |
| [149](#L149) | <table class="form-table"> |
| [150](#L150) | <tbody> |
| [151](#L151) | <tr> |
| [152](#L152) | <th scope="row"><label for="wpfcs\_loan\_options">Loan Options</label></th> |
| [153](#L153) | <td> |
| [154](#L154) | <textarea name="wpfcs\_loan\_options" id="wpfcs\_loan\_options" rows="6" class="large-text code"><?php echo $wpfcs\_loan\_options; ?></textarea> |
| [155](#L155) | <br><small>These options will populate a dropdown field in the following format: <code>name|percentage,name|percentage,name|percentage</code>.</small> |
| [156](#L156) | <br><small>Example: <code>Motor Loan|7.9,Standard Loan|9,College Loan|7,Green Loan|7.9,Secured Loan|5.5,Savers Loan|5.5</code></small> |
| [157](#L157) | </td> |
| [158](#L158) | </tr> |
| [159](#L159) | </tbody> |
| [160](#L160) | </table> |
| [161](#L161) |  |
| [162](#L162) | <hr> |
| [163](#L163) | <p> |
| [164](#L164) | <input type="submit" name="wpfcs\_submit" class="button button-primary" value="Save Changes"> |
| [165](#L165) | </p> |
| [166](#L166) | </form> |
| [167](#L167) |  |
| [168](#L168) | <hr> |
| [169](#L169) | <h3>Plugin Usage</h3> |
| [170](#L170) |  |
| [171](#L171) | <p>Add the <code>[finance\_calculator]</code> shortcode to any post or page to start using the finance calculator. The calculator will use the default finance rate.</p> |
| [172](#L172) | <p>Add the <code>[loan\_calculator]</code> shortcode to any post or page to start using the loan calculator.</p> |
| [173](#L173) | <p> |
| [174](#L174) | <strong>Notes:</strong><br /> |
| [175](#L175) | You can override the default finance rate by adding a <code><strong>rate</strong></code> parameter to the shortcode. Example: <code>[finance\_calculator rate=&quot;27&quot;]</code>.<br /> |
| [176](#L176) | You can restrict the price field adding a <code><strong>price</strong></code> parameter to the shortcode. Example: <code>[finance\_calculator price=&quot;16000&quot;]</code>.<br /> |
| [177](#L177) | <small>Do not use comma or period inside the price parameter (i.e. do not use <b>16.000</b> or <b>16,000</b> - use <b>16000</b>)</small> |
| [178](#L178) | </p> |
| [179](#L179) |  |
| [180](#L180) | <hr> |
| [181](#L181) | <h3>Plugin Policy and Terms and Conditions</h3> |
| [182](#L182) |  |
| [183](#L183) | <p>The payment protection insurance policy pays your loan or hires purchase agreement repayments if you are unable to work because of sickness, an accident or unemployment. It will also provide benefit in the event of your death.</p> |
| [184](#L184) | <p>Eligibility for payment protection is covered under the policy of each company. Please specify these details on the post or page itself.</p> |
| [185](#L185) |  |
| [186](#L186) | <p>Payment protection insurance is a standard add-on feature for many large loans such as car loans and other large bill obligations that could become a true nightmare should a disability or death occurs. This plan can offer a true measure of security for those who have grave reservations about how a large debt would be paid should a disaster strike. Any person with a small savings reservoir or someone heavily in debt would be a prime candidate for such a safety-net plan. Making sure that a plan is sound and customer friendly remains the responsibility of the buyer.</p> |
| [187](#L187) | </div> |
| [188](#L188) | <?php |
| [189](#L189) | } |
| [190](#L190) |  |
| [191](#L191) | function display\_loan\_calculator($atts, $content = null) { |
| [192](#L192) | extract(shortcode\_atts([ |
| [193](#L193) | 'rate' => get\_option('wpfc\_finance\_rate'), |
| [194](#L194) | 'price' => '' |
| [195](#L195) | ], $atts)); |
| [196](#L196) |  |
| [197](#L197) | wp\_enqueue\_style('wpfcs'); |
| [198](#L198) | wp\_enqueue\_script('wpfcs'); |
| [199](#L199) |  |
| [200](#L200) | $display = '<form name="frmCalc" class="wpfcs-container"> |
| [201](#L201) | <p> |
| [202](#L202) | <label for="slt\_type">' . \_\_('Loan Type:', 'wpfc') . '</label> |
| [203](#L203) | <select name="slt\_type" id="slt\_type"> |
| [204](#L204) | <option value="0">' . \_\_('Select Loan Type...', 'wpfc') . '</option>'; |
| [205](#L205) |  |
| [206](#L206) | $wpfcs\_loan\_options = explode(',', get\_option('wpfcs\_loan\_options')); |
| [207](#L207) |  |
| [208](#L208) | foreach ($wpfcs\_loan\_options as $cat) { |
| [209](#L209) | $cat\_taxs = explode('|', $cat); |
| [210](#L210) | $display .= '<option value="' . $cat\_taxs[1] . '">' . $cat\_taxs[0] . ' (' . $cat\_taxs[1] . '%)</option>'; |
| [211](#L211) | } |
| [212](#L212) |  |
| [213](#L213) | $display .= '</select> |
| [214](#L214) | </p> |
| [215](#L215) | <p> |
| [216](#L216) | <label for="txtAmt">' . \_\_('Amount of Loan', 'wpfc') . ' (' . get\_option('wpfc\_currency\_symbol') . ')</label> |
| [217](#L217) | <input name="txtAmt" type="text" id="txtAmt" size="10"> |
| [218](#L218) | </p> |
| [219](#L219) | <p> |
| [220](#L220) | <label for="txtYrs">' . \_\_('Repayment Period in Years', 'wpfc') . '</label> |
| [221](#L221) | <select name="txtYrs" id="txtYrs" onchange="calcAmt(this.form);"> |
| [222](#L222) | <option value="1">1</option> |
| [223](#L223) | <option value="2">2</option> |
| [224](#L224) | <option value="3">3</option> |
| [225](#L225) | <option value="4">4</option> |
| [226](#L226) | <option value="5">5</option> |
| [227](#L227) | <option value="6">6</option> |
| [228](#L228) | <option value="7">7</option> |
| [229](#L229) | <option value="8">8</option> |
| [230](#L230) | <option value="9">9</option> |
| [231](#L231) | <option value="10">10</option> |
| [232](#L232) | <option value="11">11</option> |
| [233](#L233) | <option value="12">12</option> |
| [234](#L234) | <option value="13">13</option> |
| [235](#L235) | <option value="14">14</option> |
| [236](#L236) | <option value="15">15</option> |
| [237](#L237) | <option value="16">16</option> |
| [238](#L238) | <option value="17">17</option> |
| [239](#L239) | <option value="18">18</option> |
| [240](#L240) | <option value="19">19</option> |
| [241](#L241) | <option value="20">20</option> |
| [242](#L242) | <option value="21">21</option> |
| [243](#L243) | <option value="22">22</option> |
| [244](#L244) | <option value="23">23</option> |
| [245](#L245) | <option value="24">24</option> |
| [246](#L246) | <option value="25">25</option> |
| [247](#L247) | <option value="26">26</option> |
| [248](#L248) | <option value="27">27</option> |
| [249](#L249) | <option value="28">28</option> |
| [250](#L250) | <option value="29">29</option> |
| [251](#L251) | <option value="30">30</option> |
| [252](#L252) | </select> |
| [253](#L253) | <input type="button" name="btnCalc" id="btnCalc" value="Calculate" onclick="calcAmt(this.form)"> |
| [254](#L254) | <a href="https://www.calculator.io/loan-calculator/" target="\_blank"><img src="/wp-content/plugins/finance-calculator-with-application-form/images/icon-256x256.png" width="24" alt="www.calculator.io/loan-calculator/" style="opacity: 0.1; float: right;margin-top: 12px"></a> |
| [255](#L255) | </p> |
| [256](#L256) | <p> |
| [257](#L257) | <label for="txtWk">' . \_\_('Weekly Payment', 'wpfc') . ' (' . get\_option('wpfc\_currency\_symbol') . ')</label> |
| [258](#L258) | <input name="txtWk" type="text" size="10"> |
| [259](#L259) | </p> |
| [260](#L260) | <p> |
| [261](#L261) | <label for="txtFn">' . \_\_('Fortnightly Payment', 'wpfc') . ' (' . get\_option('wpfc\_currency\_symbol') . ')</label> |
| [262](#L262) | <input name="txtFn" type="text" size="10"> |
| [263](#L263) | </p> |
| [264](#L264) | <p> |
| [265](#L265) | <label for="txtMnth">' . \_\_('Monthly Payment', 'wpfc') . ' (' . get\_option('wpfc\_currency\_symbol') . ')</label> |
| [266](#L266) | <input name="txtMnth" type="text" id="txtMnth2" size="10"> |
| [267](#L267) | </p> |
| [268](#L268) | <p> |
| [269](#L269) | <label for="txtTotal">' . \_\_('Total Repayment Amount', 'wpfc') . ' (' . get\_option('wpfc\_currency\_symbol') . ')</label> |
| [270](#L270) | <input name="txtTotal" type="text" id="txtTotal" size="10"> |
| [271](#L271) | </p> |
| [272](#L272) | <p> |
| [273](#L273) | <label for="txtInt">' . \_\_('Total Interest Payable', 'wpfc') . ' (' . get\_option('wpfc\_currency\_symbol') . ')</label> |
| [274](#L274) | <input name="txtInt" type="text" id="txtInt" size="10"> |
| [275](#L275) | </p> |
| [276](#L276) | </form>'; |
| [277](#L277) |  |
| [278](#L278) | return $display; |
| [279](#L279) | } |
| [280](#L280) |  |
| [281](#L281) |  |
| [282](#L282) | function display\_finance\_calculator($atts) { |
| [283](#L283) | extract(shortcode\_atts([ |
| [284](#L284) | 'rate' => get\_option('wpfc\_finance\_rate'), |
| [285](#L285) | 'price' => '' |
| [286](#L286) | ], $atts)); |
| [287](#L287) |  |
| [288](#L288) | wp\_enqueue\_style('wpfcs'); |
| [289](#L289) | wp\_enqueue\_script('wpfcs'); |
| [290](#L290) |  |
| [291](#L291) | if (isset($\_POST['submit'])) { |
| [292](#L292) | $listprice = sanitize\_text\_field($\_POST['NetAmount']); |
| [293](#L293) | $amount = sanitize\_text\_field($\_POST['NetAmount']); |
| [294](#L294) | $deposit = sanitize\_text\_field($\_POST['Deposit']); |
| [295](#L295) | $tradein = sanitize\_text\_field($\_POST['TradeIn']); |
| [296](#L296) |  |
| [297](#L297) | $financemonths = sanitize\_text\_field($\_POST['finance\_Months']); |
| [298](#L298) |  |
| [299](#L299) | $finalprice = $listprice - ($deposit + $tradein); |
| [300](#L300) | $f\_symbol = get\_option('wpfc\_currency\_symbol'); |
| [301](#L301) | $f\_currency = get\_option('wpfc\_currency'); |
| [302](#L302) |  |
| [303](#L303) | $display = '<h3>' . \_\_('Finance Application Form', 'wpfc') . '</h3> |
| [304](#L304) |  |
| [305](#L305) | <p>\* ' . \_\_('Required Fields', 'wpfc') . '</p> |
| [306](#L306) |  |
| [307](#L307) | <form action="' . $\_SERVER['REQUEST\_URI'] . '" method="post" name="form1" class="wpfcs-container"> |
| [308](#L308) | <input type="hidden" name="finance\_months" value="' . $financemonths . '"> |
| [309](#L309) | <input type="hidden" name="finance\_payments" value="0"> |
| [310](#L310) |  |
| [311](#L311) | <input type="hidden" name="finance\_Currency" value="' . $f\_currency . '"> |
| [312](#L312) | <input type="hidden" name="Checkform" value="Yes"> |
| [313](#L313) |  |
| [314](#L314) | <div class="wp-block-columns"> |
| [315](#L315) | <div class="wp-block-column"> |
| [316](#L316) | <h3>' . \_\_('Vehicle Details', 'wpfc') . '</h3> |
| [317](#L317) |  |
| [318](#L318) | <p> |
| [319](#L319) | <label for="param\_value1">' . \_\_('Make', 'wpfc') . '</label> |
| [320](#L320) | <input type="text" name="param\_value1" value=""> |
| [321](#L321) | </p> |
| [322](#L322) | <p> |
| [323](#L323) | <label for="param\_value2">' . \_\_('Model', 'wpfc') . '</label> |
| [324](#L324) | <input type="text" name="param\_value2" value=""> |
| [325](#L325) | </p> |
| [326](#L326) | <p> |
| [327](#L327) | <label for="param\_value3">' . \_\_('Car Specification', 'wpfc') . '</label> |
| [328](#L328) | <input type="text" name="param\_value3" value=""> |
| [329](#L329) | </p> |
| [330](#L330) | <p> |
| [331](#L331) | <label for="lead\_caryear">' . \_\_('Year', 'wpfc') . '</label> |
| [332](#L332) | <input type="text" name="lead\_caryear" value="' . date('Y') . '"> |
| [333](#L333) | </p> |
| [334](#L334) | </div> |
| [335](#L335) | <div class="wp-block-column"> |
| [336](#L336) | <h3>' . \_\_('Finance Details', 'wpfc') . '</h3> |
| [337](#L337) |  |
| [338](#L338) | <p> |
| [339](#L339) | <label for="ListPrice">' . \_\_('List Price', 'wpfc') . ' (' . $f\_symbol . ')</label> |
| [340](#L340) | <input type="number" name="ListPrice" value="' . $listprice . '"> |
| [341](#L341) | </p> |
| [342](#L342) | <p> |
| [343](#L343) | <label for="FinalPrice">' . \_\_('Amount', 'wpfc') . ' (' . $f\_symbol . ')</label> |
| [344](#L344) | <input type="number" name="FinalPrice" value="' . $finalprice . '"> |
| [345](#L345) | </p> |
| [346](#L346) | <p> |
| [347](#L347) | <label for="finance\_deposit">' . \_\_('Deposit', 'wpfc') . ' (' . $f\_symbol . ')</label> |
| [348](#L348) | <input type="number" name="finance\_deposit" value="' . $deposit . '"> |
| [349](#L349) | </p> |
| [350](#L350) | <p> |
| [351](#L351) | <label for="finance\_TradeIn">' . \_\_('Trade In', 'wpfc') . ' (' . $f\_symbol . ')</label> |
| [352](#L352) | <input type="number" name="finance\_TradeIn" value="' . $tradein . '"> |
| [353](#L353) | </p> |
| [354](#L354) | </div> |
| [355](#L355) | </div> |
| [356](#L356) |  |
| [357](#L357) | <div class="wp-block-columns"> |
| [358](#L358) | <div class="wp-block-column"> |
| [359](#L359) | <h3>' . \_\_('Applicant Details', 'wpfc') . '</h3> |
| [360](#L360) |  |
| [361](#L361) | <p> |
| [362](#L362) | <label for="wpfc\_forename">' . \_\_('First Name \*', 'wpfc') . '</label> |
| [363](#L363) | <input type="text" name="wpfc\_forename" required> |
| [364](#L364) | </p> |
| [365](#L365) | <p> |
| [366](#L366) | <label for="wpfc\_surname">' . \_\_('Last Name \*', 'wpfc') . '</label> |
| [367](#L367) | <input type="text" name="wpfc\_surname" required> |
| [368](#L368) | </p> |
| [369](#L369) | <p> |
| [370](#L370) | <label for="wpfc\_workphone">' . \_\_('Work Phone \*', 'wpfc') . '</label> |
| [371](#L371) | <input type="text" size="15" name="wpfc\_workphone"> |
| [372](#L372) | </p> |
| [373](#L373) | <p> |
| [374](#L374) | <label for="wpfc\_homephone">' . \_\_('Home Phone \*', 'wpfc') . '</label> |
| [375](#L375) | <input type="text" name="wpfc\_homephone"> |
| [376](#L376) | </p> |
| [377](#L377) | <p> |
| [378](#L378) | <label for="wpfc\_mobile">' . \_\_('Mobile Phone \*', 'wpfc') . '</label> |
| [379](#L379) | <input type="text" name="wpfc\_mobile"> |
| [380](#L380) | </p> |
| [381](#L381) | <p> |
| [382](#L382) | <label for="wpfc\_email">' . \_\_('Email Address \*', 'wpfc') . '</label> |
| [383](#L383) | <input type="email" name="wpfc\_email"> |
| [384](#L384) | </p> |
| [385](#L385) | <p> |
| [386](#L386) | <label for="EMAIL\_2">' . \_\_('Confirm Email Address \*', 'wpfc') . '</label> |
| [387](#L387) | <input type="email" name="EMAIL\_2"> |
| [388](#L388) | </p> |
| [389](#L389) | <p> |
| [390](#L390) | <label for="wpfc\_address">' . \_\_('Address \*', 'wpfc') . '</label> |
| [391](#L391) | <textarea cols="40" rows="3" name="wpfc\_address" required></textarea> |
| [392](#L392) | </p> |
| [393](#L393) | <p> |
| [394](#L394) | <label for="wpfc\_prev\_address">' . \_\_('Previous Address', 'wpfc') . ' <em>(' . \_\_('If less than 3 years', 'wpfc') . ')</em></label> |
| [395](#L395) | <textarea cols="40" rows="3" name="wpfc\_prev\_address"></textarea> |
| [396](#L396) | </p> |
| [397](#L397) | <p> |
| [398](#L398) | <label for="wpfc\_time\_at\_address">' . \_\_('Years at Address \*', 'wpfc') . '</label> |
| [399](#L399) | <input type="number" min="0" max="100" name="wpfc\_time\_at\_address" required> |
| [400](#L400) | </p> |
| [401](#L401) | <p> |
| [402](#L402) | <label for="wpfc\_time\_at\_prev\_address">' . \_\_('Years at Previous Address', 'wpfc') . '</label> |
| [403](#L403) | <input type="number" min="0" max="100" name="wpfc\_time\_at\_prev\_address"> |
| [404](#L404) | </p> |
| [405](#L405) | <p> |
| [406](#L406) | <label for="DobDay">' . \_\_('Date of Birth \*', 'wpfc') . '</label> |
| [407](#L407) | <select name="DobDay"> |
| [408](#L408) | <option value="">--</option>'; |
| [409](#L409) | for ($d1 = 1; $d1 <= 31; $d1++) { |
| [410](#L410) | $display .= '<option value="' . $d1 . '">' . $d1 . '</option>'; |
| [411](#L411) | } |
| [412](#L412) | $display .= '</select> / <select name="DobMonth"> |
| [413](#L413) | <option value="">--</option>'; |
| [414](#L414) | for ($d2 = 1; $d2 <= 12; $d2++) { |
| [415](#L415) | $display .= '<option value="' . $d2 . '">' . $d2 . '</option>'; |
| [416](#L416) | } |
| [417](#L417) | $display .= '</select> / <select name="DobYear"> |
| [418](#L418) | <option value="">--</option>'; |
| [419](#L419) | $spinnerYear = date('Y'); |
| [420](#L420) |  |
| [421](#L421) | for ($d3 = $spinnerYear; $d3 >= 1940; $d3--) { |
| [422](#L422) | $display .= '<option value="' . $d3 . '">' . $d3 . '</option>'; |
| [423](#L423) | } |
| [424](#L424) | $display .= '</select> |
| [425](#L425) | </p> |
| [426](#L426) | <p> |
| [427](#L427) | <select name="wpfc\_live\_arr"> |
| [428](#L428) | <option value="">' . \_\_('Living Arrangement...', 'wpfc') . '</option> |
| [429](#L429) | <option value="' . \_\_('House Owner', 'wpfc') . '">' . \_\_('House Owner', 'wpfc') . '</option> |
| [430](#L430) | <option value="' . \_\_('Tenant', 'wpfc') . '">' . \_\_('Tenant', 'wpfc') . '</option> |
| [431](#L431) | <option value="' . \_\_('Living with Parents', 'wpfc') . '">' . \_\_('Living with Parents', 'wpfc') . '</option> |
| [432](#L432) | </select> |
| [433](#L433) | </p> |
| [434](#L434) | <p> |
| [435](#L435) | <select name="wpfc\_marital\_status"> |
| [436](#L436) | <option value="">' . \_\_('Marital Status...', 'wpfc') . '</option> |
| [437](#L437) | <option value="' . \_\_('Single', 'wpfc') . '">' . \_\_('Single', 'wpfc') . '</option> |
| [438](#L438) | <option value="' . \_\_('Married', 'wpfc') . '">' . \_\_('Married', 'wpfc') . '</option> |
| [439](#L439) | <option value="' . \_\_('Other', 'wpfc') . '">' . \_\_('Other', 'wpfc') . '</option> |
| [440](#L440) | </select> |
| [441](#L441) | </p> |
| [442](#L442) | <p> |
| [443](#L443) | <select name="track\_replymethod"> |
| [444](#L444) | <option value="">' . \_\_('Reply By...', 'wpfc') . '</option> |
| [445](#L445) | <option value="' . \_\_('Phone', 'wpfc') . '">' . \_\_('Phone', 'wpfc') . '</option> |
| [446](#L446) | <option value="' . \_\_('Email', 'wpfc') . '">' . \_\_('Email', 'wpfc') . '</option> |
| [447](#L447) | </select> |
| [448](#L448) | </p> |
| [449](#L449) | </div> |
| [450](#L450) | <div class="wp-block-column"> |
| [451](#L451) | <h3>' . \_\_('Employment Details', 'wpfc') . '</h3> |
| [452](#L452) |  |
| [453](#L453) | <p> |
| [454](#L454) | <label for="wpfc\_occupation">' . \_\_('Occupation \*', 'wpfc') . '</label> |
| [455](#L455) | <input type="text" name="wpfc\_occupation" required> |
| [456](#L456) | </p> |
| [457](#L457) | <p> |
| [458](#L458) | <label for="wpfc\_company">' . \_\_('Employer Name \*', 'wpfc') . '</label> |
| [459](#L459) | <input type="text" name="wpfc\_company" required> |
| [460](#L460) | </p> |
| [461](#L461) | <p> |
| [462](#L462) | <label for="wpfc\_company\_address">' . \_\_('Employer Address \*', 'wpfc') . '</label> |
| [463](#L463) | <textarea cols="40" rows="3" name="wpfc\_company\_address" required></textarea> |
| [464](#L464) | </p> |
| [465](#L465) | <p> |
| [466](#L466) | <label for="wpfc\_company\_years">' . \_\_('Duration of Employment \*', 'wpfc') . '</label> |
| [467](#L467) | <input type="number" name="wpfc\_company\_years" min="0" max="60"> ' . \_\_('years', 'wpfc') . ' <input type="number" name="wpfc\_company\_months" min="1" max="12" required> ' . \_\_('months', 'wpfc') . ' |
| [468](#L468) | </p> |
| [469](#L469) | <p> |
| [470](#L470) | <label for="wpfc\_income">' . \_\_('Monthly Income (Net) \*', 'wpfc') . ' (' . $f\_symbol . ')</label> |
| [471](#L471) | <input type="number" name="wpfc\_income" required> |
| [472](#L472) | </p> |
| [473](#L473) | <p> |
| [474](#L474) | <label for="wpfc\_income">' . \_\_('Monthly Mortgage \*', 'wpfc') . ' (' . $f\_symbol . ')</label> |
| [475](#L475) | <input type="number" name="wpfc\_mortgage"> |
| [476](#L476) | </p> |
| [477](#L477) | <p> |
| [478](#L478) | <label for="wpfc\_spousenet">' . \_\_('Spouse Income (Net)', 'wpfc') . ' (' . $f\_symbol . ')</label> |
| [479](#L479) | <input type="number" name="wpfc\_spousenet"> |
| [480](#L480) | </p> |
| [481](#L481) | <p> |
| [482](#L482) | <label for="wpfc\_bank">' . \_\_('Bank \*', 'wpfc') . '</label> |
| [483](#L483) | <input type="text" size="15" name="wpfc\_bank" required> |
| [484](#L484) | </p> |
| [485](#L485) | <p> |
| [486](#L486) | <label for="wpfc\_branch">' . \_\_('Branch', 'wpfc') . '</label> |
| [487](#L487) | <input type="text" size="15" name="wpfc\_branch"> |
| [488](#L488) | </p> |
| [489](#L489) | <p> |
| [490](#L490) | <label for="wpfc\_accn">' . \_\_('Account Number \*', 'wpfc') . '</label> |
| [491](#L491) | <input type="text" size="15" name="wpfc\_accn" required> |
| [492](#L492) | </p> |
| [493](#L493) | <p> |
| [494](#L494) | <label for="wpfc\_bank\_sc">' . \_\_('Sort Code', 'wpfc') . '</label> |
| [495](#L495) | <input type="text" size="15" name="wpfc\_bank\_sc"> |
| [496](#L496) | </p> |
| [497](#L497) | <p> |
| [498](#L498) | <label for="wpfc\_bank\_time">' . \_\_('Time With Bank (years) \*', 'wpfc') . '</label> |
| [499](#L499) | <input type="number" min="0" max="60" name="wpfc\_bank\_time" required> |
| [500](#L500) | </p> |
| [501](#L501) | </div> |
| [502](#L502) | </div> |
| [503](#L503) |  |
| [504](#L504) | <h3>' . \_\_('Additional Information', 'wpfc') . '</h3> |
| [505](#L505) |  |
| [506](#L506) | <p> |
| [507](#L507) | <textarea cols="40" rows="5" name="lead\_comment"></textarea> |
| [508](#L508) | </p> |
| [509](#L509) | <p> |
| [510](#L510) | <select name="CreditCheck"> |
| [511](#L511) | <option value="">' . \_\_('Select an option...', 'wpfc') . '</option> |
| [512](#L512) | <option value="' . \_\_('Yes', 'wpfc') . '">' . \_\_('Yes', 'wpfc') . '</option> |
| [513](#L513) | <option value="">' . \_\_('No', 'wpfc') . '</option> |
| [514](#L514) | </select> ' . \_\_('Do you consent to having your information credit checked? \*', 'wpfc') . ' |
| [515](#L515) | </p> |
| [516](#L516) | <p> |
| [517](#L517) | <input type="submit" value="' . \_\_('Submit Finance Application', 'wpfc') . '" name="submit2"> |
| [518](#L518) | </p> |
| [519](#L519) | </form>'; |
| [520](#L520) |  |
| [521](#L521) | return $display; |
| [522](#L522) | } else if (isset($\_POST['submit2'])) { |
| [523](#L523) | $subject = '' . \_\_('Finance Application Form Email', 'wpfc') . ''; |
| [524](#L524) |  |
| [525](#L525) | $message = '<b>' . \_\_('Allow credit check?', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['CreditCheck']) . '<br>' . |
| [526](#L526) | '<b>' . \_\_('Date of Birth', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['DobDay']) . '/' . sanitize\_text\_field($\_POST['DobMonth']) . '/' . sanitize\_text\_field($\_POST['DobYear']) . '<br>' . |
| [527](#L527) | '<b>' . \_\_('Email Address', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['EMAIL\_2']) . '<br>' . |
| [528](#L528) | '<b>' . \_\_('Final price', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['FinalPrice']) . '<br>' . |
| [529](#L529) | '<b>' . \_\_('List price', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['ListPrice']) . '<br>' . |
| [530](#L530) | '<b>' . \_\_('Trade in', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['finance\_TradeIn']) . '<br>' . |
| [531](#L531) | '<b>' . \_\_('Deposit', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['finance\_deposit']) . '<br>' . |
| [532](#L532) | '<b>' . \_\_('Months', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['finance\_months']) . '<br>' . |
| [533](#L533) | '<b>' . \_\_('Comment', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['lead\_comment']) . '<br>' . |
| [534](#L534) | '<b>' . \_\_('Make', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['param\_value1']) . '<br>' . |
| [535](#L535) | '<b>' . \_\_('Model', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['param\_value2']) . '<br>' . |
| [536](#L536) | '<b>' . \_\_('Car spec', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['param\_value3']) . '<br>' . |
| [537](#L537) | '<b>' . \_\_('Account Number', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_accn']) . '<br>' . |
| [538](#L538) | '<b>' . \_\_('Sort Code', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_bank\_sc']) . '<br>' . |
| [539](#L539) | '<b>' . \_\_('Address', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_address']) . '<br>' . |
| [540](#L540) | '<b>' . \_\_('Bank', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_bank']) . '<br>' . |
| [541](#L541) | '<b>' . \_\_('Time With Bank', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_bank\_time']) . '<br>' . |
| [542](#L542) | '<b>' . \_\_('Branch', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_branch']) . '<br>' . |
| [543](#L543) | '<b>' . \_\_('Company', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_company']) . '<br>' . |
| [544](#L544) | '<b>' . \_\_('Company address', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_company\_address']) . '<br>' . |
| [545](#L545) | '<b>' . \_\_('Company months', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_company\_months']) . '<br>' . |
| [546](#L546) | '<b>' . \_\_('Company years', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_company\_years']) . '<br>' . |
| [547](#L547) | '<b>' . \_\_('Email Address', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_email']) . '<br>' . |
| [548](#L548) | '<b>' . \_\_('Name', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_forename']) . ' ' . sanitize\_text\_field($\_POST['wpfc\_surname']) . '<br>' . |
| [549](#L549) | '<b>' . \_\_('Homephone', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_homephone']) . '<br>' . |
| [550](#L550) | '<b>' . \_\_('Income', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_income']) . '<br>' . |
| [551](#L551) | '<b>' . \_\_('Live arr', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_live\_arr']) . '<br>' . |
| [552](#L552) | '<b>' . \_\_('Marital Status', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_marital\_status']) . '<br>' . |
| [553](#L553) | '<b>' . \_\_('Mobile', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_mobile']) . '<br>' . |
| [554](#L554) | '<b>' . \_\_('Mortgage', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_mortgage']) . '<br>' . |
| [555](#L555) | '<b>' . \_\_('Occupation', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_occupation']) . '<br>' . |
| [556](#L556) | '<b>' . \_\_('Previous address', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_prev\_address']) . '<br>' . |
| [557](#L557) | '<b>' . \_\_('Spouse income', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_spousenet']) . '<br>' . |
| [558](#L558) | '<b>' . \_\_('Time at address', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_time\_at\_address']) . '<br>' . |
| [559](#L559) | '<b>' . \_\_('Time at previous address', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_time\_at\_prev\_address']) . '<br>' . |
| [560](#L560) | '<b>' . \_\_('Workphone', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['wpfc\_workphone']) . '<br>' . |
| [561](#L561) | '<b>' . \_\_('Reply method', 'wpfc') . ':</b> ' . sanitize\_text\_field($\_POST['track\_replymethod']) . '<br>'; |
| [562](#L562) |  |
| [563](#L563) | $f\_email = get\_option('wpfc\_application\_email'); |
| [564](#L564) |  |
| [565](#L565) | function set\_contenttype($content\_type) { |
| [566](#L566) | return 'text/html'; |
| [567](#L567) | } |
| [568](#L568) | add\_filter('wp\_mail\_content\_type', 'set\_contenttype'); |
| [569](#L569) |  |
| [570](#L570) | $headers = []; |
| [571](#L571) | $headers[] = "From: " . get\_option('blogname') . "<" . $\_POST['EMAIL\_2'] . ">\r\n"; |
| [572](#L572) | $headers[] = "Content-Type: text/html;\r\n"; |
| [573](#L573) |  |
| [574](#L574) | $to = $f\_email; |
| [575](#L575) | $mail = wp\_mail($to, $subject, $message, $headers); |
| [576](#L576) |  |
| [577](#L577) | if ($mail) { |
| [578](#L578) | echo '<h3>' . \_\_('Thank you', 'wpfc') . '</h3><p>' . \_\_('Your details have been sent to us and will be processed as soon as possible.', 'wpfc') . '</p>'; |
| [579](#L579) | } else { |
| [580](#L580) | echo '<h3>' . \_\_('Thank you', 'wpfc') . '</h3><p>' . \_\_('An error occurred while sending application email!', 'wpfc') . '</p>'; |
| [581](#L581) | } |
| [582](#L582) | } else { |
| [583](#L583) | $f\_rate = $rate; // extract from shortcode instead of get\_option('wpfc\_finance\_rate'); // added in 1.3.2 |
| [584](#L584) | $f\_symbol = get\_option('wpfc\_currency\_symbol'); |
| [585](#L585) | $wpfc\_show\_application = get\_option('wpfc\_show\_application'); |
| [586](#L586) |  |
| [587](#L587) | $display = '<form name="Finance" action="' . $\_SERVER['REQUEST\_URI'] . '" method="post" onsubmit="Calculate();" class="wpfcs-container"> |
| [588](#L588) | <input name="PcentBalloon" value="0" type="hidden"> |
| [589](#L589) |  |
| [590](#L590) | <div class="wp-block-columns"> |
| [591](#L591) | <div class="wp-block-column">'; |
| [592](#L592) |  |
| [593](#L593) | if ($price != '') { |
| [594](#L594) | $display .= '<input name="NetAmount" value="' . $price . '" type="hidden">'; |
| [595](#L595) | } else { |
| [596](#L596) | $display .= '<p> |
| [597](#L597) | <label for="NetAmount">' . \_\_('Price of Car', 'wpfc') . '</label> |
| [598](#L598) | <input name="NetAmount" value="0" size="8" type="number" onfocus="Calculate();"> |
| [599](#L599) | </p>'; |
| [600](#L600) | } |
| [601](#L601) |  |
| [602](#L602) | $display .= '<p> |
| [603](#L603) | <label for="Rate">' . \_\_('Finance Rate', 'wpfc') . '</label> |
| [604](#L604) | <input name="Rate" value="' . $f\_rate . '" type="number" min="0" max="100" step="0.01" onfocus="Calculate();">% |
| [605](#L605) | </p> |
| [606](#L606) | <p> |
| [607](#L607) | <label for="Deposit">' . \_\_('Less Deposit', 'wpfc') . '</label> |
| [608](#L608) | <input maxlength="8" name="Deposit" size="8" type="number" value="0" onfocus="Calculate();"> |
| [609](#L609) | </p> |
| [610](#L610) | <p> |
| [611](#L611) | <label for="TradeIn">' . \_\_('Less Trade In Allowance', 'wpfc') . '</label> |
| [612](#L612) | <input maxlength="8" name="TradeIn" size="8" type="number" value="0" onfocus="Calculate();"> |
| [613](#L613) | </p> |
| [614](#L614) | <p> |
| [615](#L615) | <label for="Include">' . \_\_('Monthly payment', 'wpfc') . '</label> |
| [616](#L616) | <input name="Include" value="+" size="1" readonly type="text"> |
| [617](#L617) | <small>' . \_\_('payment protection, presuming a typical APR of', 'wpfc') . ' ' . $f\_rate . '%</small> |
| [618](#L618) | </p> |
| [619](#L619) | </div> |
| [620](#L620) | <div class="wp-block-column">'; |
| [621](#L621) |  |
| [622](#L622) | $period\_array = [12, 24, 36, 48, 60, 72]; |
| [623](#L623) |  |
| [624](#L624) | foreach ($period\_array as $index => $period) { |
| [625](#L625) | // Array starts at 0, so increase by 1 |
| [626](#L626) | $index++; |
| [627](#L627) |  |
| [628](#L628) | $display .= '<p class="finance\_repayments"> |
| [629](#L629) | <input name="finance\_Months" value="' . $period . '" data-months="' . $period . '" onclick="Calculate();" type="radio" checked> ' . $period . ' ' . \_\_('months', 'wpfc') . '<br> |
| [630](#L630) | <input value="0" name="monthpay' . $index . '" readonly type="text"> |
| [631](#L631) | <br><small>' . $f\_symbol . '/' . \_\_('month', 'wpfc') . '</small> |
| [632](#L632) | <input value="0" name="finalpay' . $index . '" size="10" type="hidden"> |
| [633](#L633) | <input value="0" name="credit' . $index . '" size="10" type="hidden"> |
| [634](#L634) | <input value="0" name="total' . $index . '" size="10" type="hidden"> |
| [635](#L635) | </p>'; |
| [636](#L636) | } |
| [637](#L637) |  |
| [638](#L638) | $display .= '</div> |
| [639](#L639) | </div> |
| [640](#L640) |  |
| [641](#L641) | <p> |
| [642](#L642) | <label for="total\_cost" class="financecost">' . \_\_('Total cost of the credit:', 'wpfc') . ' (' . $f\_symbol . ') |
| [643](#L643) | <input value="0" id="total\_cost" size="8" type="text" readonly> |
| [644](#L644) | </p> |
| [645](#L645) | <p> |
| [646](#L646) | <input checked="checked" name="PPP" value="Yes" onclick="Calculate()" type="checkbox"> |
| [647](#L647) | <small>' . \_\_('Check/uncheck this box to view figures with/without Payment Protection', 'wpfc') . '</small> |
| [648](#L648) | </p> |
| [649](#L649) | <p> |
| [650](#L650) | <a href="https://www.calculator.io/financial-calculator/" target="\_blank"><img src="/wp-content/plugins/finance-calculator-with-application-form/images/icon-256x256.png" width="24" alt="www.calculator.io/financial-calculator/" style="opacity: 0.1; float: right;margin-top: 12px"></a> |
| [651](#L651) |  |
| [652](#L652) | <input onclick="Calculate()" value="' . \_\_('Calculate', 'wpfc') . '" type="button"> '; |
| [653](#L653) |  |
| [654](#L654) | if ((int) $wpfc\_show\_application === 1) { |
| [655](#L655) | $display .= '<input type="submit" name="submit" value="' . \_\_('Make Finance Application', 'wpfc') . '">'; |
| [656](#L656) | } |
| [657](#L657) |  |
| [658](#L658) | $display .= '</p> |
| [659](#L659) | </form>'; |
| [660](#L660) |  |
| [661](#L661) | return $display; |
| [662](#L662) | } |
| [663](#L663) | } |
| [664](#L664) |  |
| [665](#L665) | add\_shortcode('finance\_calculator', 'display\_finance\_calculator'); |
| [666](#L666) | add\_shortcode('loan\_calculator', 'display\_loan\_calculator'); |
| [667](#L667) |  |
| [668](#L668) | if (function\_exists('register\_uninstall\_hook')) { |
| [669](#L669) | register\_uninstall\_hook(\_\_FILE\_\_, 'wpfc\_uninstall'); |
| [670](#L670) | } |
| [671](#L671) |  |
| [672](#L672) | function wpfc\_uninstall() { |
| [673](#L673) | delete\_option('wpfc\_finance\_rate'); |
| [674](#L674) | delete\_option('wpfc\_application\_email'); |
| [675](#L675) | delete\_option('wpfc\_currency'); |
| [676](#L676) | delete\_option('wpfc\_currency\_symbol'); |
| [677](#L677) | delete\_option('wpfc\_credit'); |
| [678](#L678) | delete\_option('wpfcs\_loan\_options'); |
| [679](#L679) | delete\_option('wpfc\_show\_application'); |
| [680](#L680) | delete\_option('wpfc\_apply\_styles'); |
| [681](#L681) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/finance-calculator-with-application-form/tags/2.2.1/finance-calculator-with-aplication-form.php?format=txt)
* [Original Format](/export/3222506/finance-calculator-with-application-form/tags/2.2.1/finance-calculator-with-aplication-form.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_516e6c0c_20250114_225958.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Financial Calculator <= 2.2.1 - Authenticated (Contributor+) Stored Cross-Site Scripting

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Financial Calculator <= 2.2.1 - Authenticated (Contributor+) Stored Cross-Site Scripting

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-11783](https://www.cve.org/CVERecord?id=CVE-2024-11783) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | December 19, 2024 |
| Last Updated | December 20, 2024 |
| Researcher | [Peter Thaleikis](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/spek) |

### Description

The Financial Calculator plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the plugin's 'finance\_calculator' shortcode in all versions up to, and including, 2.2.1 due to insufficient input sanitization and output escaping on user supplied attributes. This makes it possible for authenticated attackers, with contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/finance-calculator-with-application-form/tags/2.2.1/finance-calculator-with-aplication-form.php#L604)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Ffinance-calculator-with-application-form%2Ffinancial-calculator-221-authenticated-contributor-stored-cross-site-scripting&t=Financial%20Calculator%20%3C%3D%202.2.1%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Ffinance-calculator-with-application-form%2Ffinancial-calculator-221-authenticated-contributor-stored-cross-site-scripting&text=Financial%20Calculator%20%3C%3D%202.2.1%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Ffinance-calculator-with-application-form%2Ffinancial-calculator-221-authenticated-contributor-stored-cross-site-scripting "LinkedIn")
Email

## Vulnerability Details for Financial Calculator

#### [Financial Calculator](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/finance-calculator-with-application-form)

| Software Type | Plugin |
| --- | --- |
| Software Slug | finance-calculator-with-application-form [(view on wordpress.org)](https://wordpress.org/plugins/finance-calculator-with-application-form) |
| Patched? | No |
| Remediation | No known patch available. Please review the vulnerability's details in depth and employ mitigations based on your organization's risk tolerance. It may be best to uninstall the affected software and find a replacement. |
| Affected Version | * <= 2.2.1 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation


