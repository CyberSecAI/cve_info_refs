=== Content from github.com_caa5100e_20250115_092322.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgohugoio%2Fhugo%2Fsecurity%2Fadvisories%2FGHSA-c2xf-9v2r-r2rx)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgohugoio%2Fhugo%2Fsecurity%2Fadvisories%2FGHSA-c2xf-9v2r-r2rx)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=gohugoio%2Fhugo)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gohugoio](/gohugoio)
/
**[hugo](/gohugoio/hugo)**
Public

* [Notifications](/login?return_to=%2Fgohugoio%2Fhugo) You must be signed in to change notification settings
* [Fork
  7.6k](/login?return_to=%2Fgohugoio%2Fhugo)
* [Star
   77.2k](/login?return_to=%2Fgohugoio%2Fhugo)

* [Code](/gohugoio/hugo)
* [Issues
  449](/gohugoio/hugo/issues)
* [Pull requests
  29](/gohugoio/hugo/pulls)
* [Actions](/gohugoio/hugo/actions)
* [Projects
  0](/gohugoio/hugo/projects)
* [Security](/gohugoio/hugo/security)
* [Insights](/gohugoio/hugo/pulse)

Additional navigation options

* [Code](/gohugoio/hugo)
* [Issues](/gohugoio/hugo/issues)
* [Pull requests](/gohugoio/hugo/pulls)
* [Actions](/gohugoio/hugo/actions)
* [Projects](/gohugoio/hugo/projects)
* [Security](/gohugoio/hugo/security)
* [Insights](/gohugoio/hugo/pulse)

# Some attributes not escaped in internal templates

Low

[bep](/bep)
published
GHSA-c2xf-9v2r-r2rx
Dec 9, 2024

## Package

gomod

github.com/gohugoio/hugo
([Go](/advisories?query=ecosystem%3Ago))

## Affected versions

> v0.123.0

## Patched versions

v0.139.4

## Description

## Impact

Some HTML attributes in Markdown in the internal templates listed below not escaped. Impacted are Hugo users who do not trust their Markdown content files and are using one or more of these templates.

* `_default/_markup/render-link.html` from `v0.123.0`
* `_default/_markup/render-image.html` from `v0.123.0`
* `_default/_markup/render-table.html` from `v0.134.0`
* `shortcodes/youtube.html` from `v0.125.0`

## Patches

Patched in v0.139.4.

## Workarounds

Replace with user defined templates or disable the internal templates: <https://gohugo.io/getting-started/configuration-markup/#renderhooksimageenabledefault>

## References

* <https://github.com/gohugoio/hugo/releases/tag/v0.139.4>
* <https://gohugo.io/about/security/>

### Severity

Low

### CVE ID

CVE-2024-55601

### Weaknesses

No CWEs

### Credits

* [![@jmooring](https://avatars.githubusercontent.com/u/335669?s=40&v=4)](/jmooring)
  [jmooring](/jmooring)
  Finder

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_773e5239_20250115_092320.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgohugoio%2Fhugo%2Fcommit%2F54398f8d572c689f9785d59e907fd910a23401b0)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgohugoio%2Fhugo%2Fcommit%2F54398f8d572c689f9785d59e907fd910a23401b0)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=gohugoio%2Fhugo)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gohugoio](/gohugoio)
/
**[hugo](/gohugoio/hugo)**
Public

* [Notifications](/login?return_to=%2Fgohugoio%2Fhugo) You must be signed in to change notification settings
* [Fork
  7.6k](/login?return_to=%2Fgohugoio%2Fhugo)
* [Star
   77.2k](/login?return_to=%2Fgohugoio%2Fhugo)

* [Code](/gohugoio/hugo)
* [Issues
  449](/gohugoio/hugo/issues)
* [Pull requests
  29](/gohugoio/hugo/pulls)
* [Actions](/gohugoio/hugo/actions)
* [Projects
  0](/gohugoio/hugo/projects)
* [Security](/gohugoio/hugo/security)
* [Insights](/gohugoio/hugo/pulse)

Additional navigation options

* [Code](/gohugoio/hugo)
* [Issues](/gohugoio/hugo/issues)
* [Pull requests](/gohugoio/hugo/pulls)
* [Actions](/gohugoio/hugo/actions)
* [Projects](/gohugoio/hugo/projects)
* [Security](/gohugoio/hugo/security)
* [Insights](/gohugoio/hugo/pulse)

## Commit

[Permalink](/gohugoio/hugo/commit/54398f8d572c689f9785d59e907fd910a23401b0)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

tpl/tplimpl: Escape Markdown attributes in render hooks and shortcodes

[Browse files](/gohugoio/hugo/tree/54398f8d572c689f9785d59e907fd910a23401b0)
Browse the repository at this point in the history

* Loading branch information

[![@jmooring](https://avatars.githubusercontent.com/u/335669?s=40&v=4)](/jmooring) [![@bep](https://avatars.githubusercontent.com/u/394382?s=40&v=4)](/bep)

[jmooring](/gohugoio/hugo/commits?author=jmooring "View all commits by jmooring")
authored and
[bep](/gohugoio/hugo/commits?author=bep "View all commits by bep")
committed
Dec 9, 2024

1 parent
[b8c15f2](/gohugoio/hugo/commit/b8c15f245b6989c10eaad932e19519bd8cc249e9)

commit 54398f8

 Show file tree

 Hide file tree

Showing
**7 changed files**
with
**74 additions**
and
**68 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* hugolib

  + hugolib/content\_render\_hooks\_test.go
    [content\_render\_hooks\_test.go](#diff-abe2007ade9dab2b86b7485ec53bf1a1e0a1ce0c1aec9165a8e6e7fef0cdbffa)
* markup/goldmark/tables

  + markup/goldmark/tables/tables\_integration\_test.go
    [tables\_integration\_test.go](#diff-9c3fcdded02d7dc7ad83edf9267ecce68f0047d59572f405122c9cad0fb9662b)
* tpl/tplimpl

  + embedded/templates

    - \_default/\_markup

      * tpl/tplimpl/embedded/templates/\_default/\_markup/render-image.html
        [render-image.html](#diff-3e5d9b955622aee495b6cfa698779b8c7ab865224ccc298f5f8ee2354649fb71)
      * tpl/tplimpl/embedded/templates/\_default/\_markup/render-link.html
        [render-link.html](#diff-67bc976f58723c3cc981781530721a3c69942ac76ba5d766f88a6d135e450c97)
      * tpl/tplimpl/embedded/templates/\_default/\_markup/render-table.html
        [render-table.html](#diff-241de7b699a99f229eec2f105fd3e1f85a1e76a0d2161aa6a7e8a980282c573e)
    - shortcodes

      * tpl/tplimpl/embedded/templates/shortcodes/youtube.html
        [youtube.html](#diff-ec6f8f4278a55ee3bcd975bc37ff67a5bdac3ca121a11754af3292d1f48ea112)
  + tpl/tplimpl/render\_hook\_integration\_test.go
    [render\_hook\_integration\_test.go](#diff-f079473345e1e54ce15a03bd3fe14523dc4a22b2d3d5c9d042ab2d05c73fac66)

## There are no files selected for viewing

10 changes: 5 additions & 5 deletions

10
[hugolib/content\_render\_hooks\_test.go](#diff-abe2007ade9dab2b86b7485ec53bf1a1e0a1ce0c1aec9165a8e6e7fef0cdbffa "hugolib/content_render_hooks_test.go")

Show comments

[View file](/gohugoio/hugo/blob/54398f8d572c689f9785d59e907fd910a23401b0/hugolib/content_render_hooks_test.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -90,7 +90,7 @@ baseURL="https://example.org" |
|  |  | [markup.goldmark] |
|  |  | [markup.goldmark.renderer] |
|  |  | unsafe = true |
|  |  |  |
|  |  |  |
|  |  | `) |
|  |  |  |
|  |  | b.WithTemplates("index.html", ` |
| Expand Down  Expand Up | | @@ -223,16 +223,16 @@ iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAA |
|  |  | iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg== |
|  |  | -- layouts/\_default/single.html -- |
|  |  | {{ .Title }}|{{ .Content }}|$ |
|  |  |  |
|  |  |  |
|  |  | ` |
|  |  |  |
|  |  | t.Run("Default multilingual", func(t \*testing.T) { |
|  |  | b := Test(t, files) |
|  |  |  |
|  |  | b.AssertFileContent("public/nn/p1/index.html", |
|  |  | "p1|<p><a href=\"/nn/p2/\">P2</a\n></p>", "<img alt=\"Pixel\" src=\"/nn/p1/pixel.nn.png\">") |
|  |  | "p1|<p><a href=\"/nn/p2/\">P2</a\n></p>", "<img src=\"/nn/p1/pixel.nn.png\" alt=\"Pixel\">") |
|  |  | b.AssertFileContent("public/en/p1/index.html", |
|  |  | "p1 en|<p><a href=\"/en/p2/\">P2</a\n></p>", "<img alt=\"Pixel\" src=\"/nn/p1/pixel.nn.png\">") |
|  |  | "p1 en|<p><a href=\"/en/p2/\">P2</a\n></p>", "<img src=\"/nn/p1/pixel.nn.png\" alt=\"Pixel\">") |
|  |  | }) |
|  |  |  |
|  |  | t.Run("Disabled", func(t \*testing.T) { |
| Expand Down  Expand Up | | @@ -279,7 +279,7 @@ Image: ![alt-"<>&](/destination-"<> 'title-"<>&') |
|  |  | if enabled { |
|  |  | b.AssertFileContent("public/index.html", |
|  |  | "Link: <a href=\"/destination-%22%3C%3E\" title=\"title-&#34;&lt;&gt;&amp;\">text-&quot;&lt;&gt;&amp;</a>", |
|  |  | "img alt=\"alt-&quot;&lt;&gt;&amp;\" src=\"/destination-%22%3C%3E\" title=\"title-&#34;&lt;&gt;&amp;\">", |
|  |  | "img src=\"/destination-%22%3C%3E\" alt=\"alt-&quot;&lt;&gt;&amp;\" title=\"title-&#34;&lt;&gt;&amp;\">", |
|  |  | "&gt;&lt;script&gt;", |
|  |  | ) |
|  |  | } else { |
| Expand Down | |  |

15 changes: 8 additions & 7 deletions

15
[markup/goldmark/tables/tables\_integration\_test.go](#diff-9c3fcdded02d7dc7ad83edf9267ecce68f0047d59572f405122c9cad0fb9662b "markup/goldmark/tables/tables_integration_test.go")

Show comments

[View file](/gohugoio/hugo/blob/54398f8d572c689f9785d59e907fd910a23401b0/markup/goldmark/tables/tables_integration_test.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -89,6 +89,12 @@ title = true |
|  |  | | Codecademy Hoodie | False | 42.99 | |
|  |  | {.foo} |
|  |  |  |
|  |  | ## Table 2 |
|  |  |  |
|  |  | a|b |
|  |  | ---|--- |
|  |  | 1|2 |
|  |  | {id="\"><script>alert()</script>"} |
|  |  |  |
|  |  | -- layouts/\_default/single.html -- |
|  |  | Summary: {{ .Summary }} |
| Expand All | | @@ -97,7 +103,8 @@ Content: {{ .Content }} |
|  |  | ` |
|  |  | b := hugolib.Test(t, files) |
|  |  |  |
|  |  | b.AssertFileContent("public/p1/index.html", "<table class=\"foo\">") |
|  |  | b.AssertFileContent("public/p1/index.html", `<table class="foo">`) |
|  |  | b.AssertFileContent("public/p1/index.html", `<table id="&#34;&gt;&lt;script&gt;alert()&lt;/script&gt;">`) |
|  |  | } |
|  |  |  |
|  |  | // Issue 12811. |
| Expand Down  Expand Up | | @@ -166,14 +173,8 @@ title: "Home" |
|  |  | | Codecademy Tee | False | 19.99 | |
|  |  | | Codecademy Hoodie | False | 42.99 | |
|  |  |  |
|  |  |  |
|  |  |  |
|  |  |  |
|  |  |  |
|  |  | -- layouts/index.xml -- |
|  |  | Content: {{ .Content }} |
|  |  |  |
|  |  |  |
|  |  | ` |
|  |  | b := hugolib.Test(t, files) |
|  |  |  |
| Expand Down | |  |

13 changes: 7 additions & 6 deletions

13
[tpl/tplimpl/embedded/templates/\_default/\_markup/render-image.html](#diff-3e5d9b955622aee495b6cfa698779b8c7ab865224ccc298f5f8ee2354649fb71 "tpl/tplimpl/embedded/templates/_default/_markup/render-image.html")

Show comments

[View file](/gohugoio/hugo/blob/54398f8d572c689f9785d59e907fd910a23401b0/tpl/tplimpl/embedded/templates/_default/_markup/render-image.html)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,7 +1,7 @@ |
|  |  | {{- $u := urls.Parse .Destination -}} |
|  |  | {{- $src := $u.String -}} |
|  |  | {{- if not $u.IsAbs -}} |
|  |  | {{- $path := strings.TrimPrefix "./" $u.Path }} |
|  |  | {{- $path := strings.TrimPrefix "./" $u.Path -}} |
|  |  | {{- with or (.PageInner.Resources.Get $path) (resources.Get $path) -}} |
|  |  | {{- $src = .RelPermalink -}} |
|  |  | {{- with $u.RawQuery -}} |
| Expand All | | @@ -12,11 +12,12 @@ |
|  |  | {{- end -}} |
|  |  | {{- end -}} |
|  |  | {{- end -}} |
|  |  | {{- $attributes := merge .Attributes (dict "alt" .Text "src" $src "title" (.Title | transform.HTMLEscape)) -}} |
|  |  | <img |
|  |  | {{- range $k, $v := $attributes -}} |
|  |  | <img src="{{ $src }}" alt="{{ .Text }}" |
|  |  | {{- with .Title }} title="{{ . }}" {{- end -}} |
|  |  | {{- range $k, $v := .Attributes -}} |
|  |  | {{- if $v -}} |
|  |  | {{- printf " %s=%q" $k $v | safeHTMLAttr -}} |
|  |  | {{- printf " %s=%q" $k ($v | transform.HTMLEscape) | safeHTMLAttr -}} |
|  |  | {{- end -}} |
|  |  | {{- end -}}> |
|  |  | {{- end -}} |
|  |  | > |
|  |  | {{- /\*\*/ -}} |

17 changes: 5 additions & 12 deletions

17
[tpl/tplimpl/embedded/templates/\_default/\_markup/render-link.html](#diff-67bc976f58723c3cc981781530721a3c69942ac76ba5d766f88a6d135e450c97 "tpl/tplimpl/embedded/templates/_default/_markup/render-link.html")

Show comments

[View file](/gohugoio/hugo/blob/54398f8d572c689f9785d59e907fd910a23401b0/tpl/tplimpl/embedded/templates/_default/_markup/render-link.html)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,9 +1,9 @@ |
|  |  | {{- $u := urls.Parse .Destination -}} |
|  |  | {{- $href := $u.String -}} |
|  |  | {{- if strings.HasPrefix $u.String "#" }} |
|  |  | {{- $href = printf "%s#%s" .PageInner.RelPermalink $u.Fragment }} |
|  |  | {{- else if not $u.IsAbs -}} |
|  |  | {{- $path := strings.TrimPrefix "./" $u.Path }} |
|  |  | {{- if strings.HasPrefix $u.String "#" -}} |
|  |  | {{- $href = printf "%s#%s" .PageInner.RelPermalink $u.Fragment -}} |
|  |  | {{- else if and $href (not $u.IsAbs) -}} |
|  |  | {{- $path := strings.TrimPrefix "./" $u.Path -}} |
|  |  | {{- with or |
|  |  | ($.PageInner.GetPage $path) |
|  |  | ($.PageInner.Resources.Get $path) |
| Expand All | | @@ -18,12 +18,5 @@ |
|  |  | {{- end -}} |
|  |  | {{- end -}} |
|  |  | {{- end -}} |
|  |  | {{- $attributes := dict "href" $href "title" (.Title | transform.HTMLEscape) -}} |
|  |  | <a |
|  |  | {{- range $k, $v := $attributes -}} |
|  |  | {{- if $v -}} |
|  |  | {{- printf " %s=%q" $k $v | safeHTMLAttr -}} |
|  |  | {{- end -}} |
|  |  | {{- end -}} |
|  |  | >{{ .Text }}</a> |
|  |  | <a href="{{ $href }}" {{- with .Title }} title="{{ . }}" {{- end }}>{{ .Text }}</a> |
|  |  | {{- /\*\*/ -}} |

2 changes: 1 addition & 1 deletion

2
[tpl/tplimpl/embedded/templates/\_default/\_markup/render-table.html](#diff-241de7b699a99f229eec2f105fd3e1f85a1e76a0d2161aa6a7e8a980282c573e "tpl/tplimpl/embedded/templates/_default/_markup/render-table.html")

Show comments

[View file](/gohugoio/hugo/blob/54398f8d572c689f9785d59e907fd910a23401b0/tpl/tplimpl/embedded/templates/_default/_markup/render-table.html)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,7 +1,7 @@ |
|  |  | <table |
|  |  | {{- range $k, $v := .Attributes }} |
|  |  | {{- if $v }} |
|  |  | {{- printf " %s=%q" $k $v | safeHTMLAttr }} |
|  |  | {{- printf " %s=%q" $k ($v | transform.HTMLEscape) | safeHTMLAttr }} |
|  |  | {{- end }} |
|  |  | {{- end }}> |
|  |  | <thead> |
| Expand Down | |  |

57 changes: 25 additions & 32 deletions

57
[tpl/tplimpl/embedded/templates/shortcodes/youtube.html](#diff-ec6f8f4278a55ee3bcd975bc37ff67a5bdac3ca121a11754af3292d1f48ea112 "tpl/tplimpl/embedded/templates/shortcodes/youtube.html")

Show comments

[View file](/gohugoio/hugo/blob/54398f8d572c689f9785d59e907fd910a23401b0/tpl/tplimpl/embedded/templates/shortcodes/youtube.html)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -26,7 +26,7 @@ |
|  |  | {{- if not $pc.Disable }} |
|  |  | {{- with $id := or (.Get "id") (.Get 0) }} |
|  |  |  |
|  |  | {{/\* Set defaults. \*/}} |
|  |  | {{- /\* Set defaults. \*/}} |
|  |  | {{- $allowFullScreen := "allowfullscreen" }} |
|  |  | {{- $autoplay := 0 }} |
|  |  | {{- $class := "" }} |
| Expand Down  Expand Up | | @@ -70,23 +70,8 @@ |
|  |  | {{- $start := or ($.Get "start") $start }} |
|  |  | {{- $title := or ($.Get "title") $title }} |
|  |  |  |
|  |  | {{- /\* Determine host. \*/}} |
|  |  | {{- $host := cond $pc.PrivacyEnhanced "www.youtube-nocookie.com" "www.youtube.com" }} |
|  |  |  |
|  |  | {{- /\* Set styles. \*/}} |
|  |  | {{- $divStyle := "position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;" }} |
|  |  | {{- $iframeStyle := "position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" }} |
|  |  | {{- if $class }} |
|  |  | {{- $iframeStyle = "" }} |
|  |  | {{- end }} |
|  |  |  |
|  |  | {{- /\* Set class or style of wrapping div element. \*/}} |
|  |  | {{- $divClassOrStyle := printf "style=%q" $divStyle }} |
|  |  | {{- with $class }} |
|  |  | {{- $divClassOrStyle = printf "class=%q" $class }} |
|  |  | {{- end }} |
|  |  |  |
|  |  | {{- /\* Define src attribute. \*/}} |
|  |  | {{- $host := cond $pc.PrivacyEnhanced "www.youtube-nocookie.com" "www.youtube.com" }} |
|  |  | {{- $src := printf "https://%s/embed/%s" $host $id }} |
|  |  | {{- $params := dict |
|  |  | "autoplay" $autoplay |
| Expand All | | @@ -108,25 +93,33 @@ |
|  |  | {{- $src = printf "%s?%s" $src . }} |
|  |  | {{- end }} |
|  |  |  |
|  |  | {{- /\* Set div attributes. \*/}} |
|  |  | {{- $divStyle := "position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;" }} |
|  |  | {{- if $class }} |
|  |  | {{- $divStyle = "" }} |
|  |  | {{- end }} |
|  |  |  |
|  |  | {{- /\* Set iframe attributes. \*/}} |
|  |  | {{- $iframeAttributes := dict |
|  |  | "allow" "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" |
|  |  | "allowfullscreen" $allowFullScreen |
|  |  | "loading" $loading |
|  |  | "referrerpolicy" "strict-origin-when-cross-origin" |
|  |  | "src" $src |
|  |  | "style" $iframeStyle |
|  |  | "title" $title |
|  |  | }} |
|  |  | {{- $iframeStyle := "position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" }} |
|  |  | {{- if $class }} |
|  |  | {{- $iframeStyle = "" }} |
|  |  | {{- end }} |
|  |  | {{- $allow := "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" }} |
|  |  | {{- $referrerpolicy := "strict-origin-when-cross-origin" }} |
|  |  |  |
|  |  | {{- /\* Render. \*/}} |
|  |  | <div {{ $divClassOrStyle | safeHTMLAttr }}> |
|  |  | <div |
|  |  | {{- with $class }} class="{{ . }}" {{- end }} |
|  |  | {{- with $divStyle }} style="{{ . | safeCSS }}" {{- end -}} |
|  |  | > |
|  |  | <iframe |
|  |  | {{- range $k, $v := $iframeAttributes }} |
|  |  | {{- if $v }} |
|  |  | {{- printf " %s=%q" $k $v | safeHTMLAttr }} |
|  |  | {{- end }} |
|  |  | {{- end }} |
|  |  | {{- with $allow }} allow="{{ . }}" {{- end }} |
|  |  | {{- with $allowFullScreen }} allowfullscreen="{{ . }}" {{- end }} |
|  |  | {{- with $loading }} loading="{{ . }}" {{- end }} |
|  |  | {{- with $referrerpolicy }} referrerpolicy="{{ . }}" {{- end }} |
|  |  | {{- with $src }} src="{{ . }}" {{- end }} |
|  |  | {{- with $iframeStyle}} style="{{ . | safeCSS }}" {{- end }} |
|  |  | {{- with $title }} title="{{ . }}" {{- end -}} |
|  |  | ></iframe> |
|  |  | </div> |
|  |  | {{- else }} |
| Expand Down | |  |

28 changes: 23 additions & 5 deletions

28
[tpl/tplimpl/render\_hook\_integration\_test.go](#diff-f079473345e1e54ce15a03bd3fe14523dc4a22b2d3d5c9d042ab2d05c73fac66 "tpl/tplimpl/render_hook_integration_test.go")

Show comments

[View file](/gohugoio/hugo/blob/54398f8d572c689f9785d59e907fd910a23401b0/tpl/tplimpl/render_hook_integration_test.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -91,6 +91,9 @@ title: s1/p3 |
|  |  | [430](p2/) |
|  |  | [440](/s1/p2/) |
|  |  | [450](../s1/p2/) |
|  |  |  |
|  |  | // empty |
|  |  | []() |
|  |  | ` |
|  |  |  |
|  |  | b := hugolib.Test(t, files) |
| Expand Down  Expand Up | | @@ -122,6 +125,8 @@ title: s1/p3 |
|  |  | `<a href="/s1/p2/">430</a>`, |
|  |  | `<a href="/s1/p2/">440</a>`, |
|  |  | `<a href="/s1/p2/">450</a>`, |
|  |  |  |
|  |  | `<a href=""></a>`, |
|  |  | ) |
|  |  |  |
|  |  | b.AssertFileContent("public/s1/p2/index.html", |
| Expand All | | @@ -148,10 +153,17 @@ block = false |
|  |  | [markup.goldmark.renderHooks.image] |
|  |  | enableDefault = true |
|  |  | -- content/p1/index.md -- |
|  |  | ![]() |
|  |  |  |
|  |  | ![alt1](./pixel.png) |
|  |  |  |
|  |  | ![alt2](pixel.png?a=b&c=d#fragment) |
|  |  | ![alt2-&<>'](pixel.png "&<>'") |
|  |  |  |
|  |  | ![alt3](pixel.png?a=b&c=d#fragment) |
|  |  | {.foo #bar} |
|  |  |  |
|  |  | ![alt4](pixel.png) |
|  |  | {id="\"><script>alert()</script>"} |
|  |  | -- content/p1/pixel.png -- |
|  |  | iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg== |
|  |  | -- layouts/\_default/single.html -- |
| Expand All | | @@ -160,15 +172,21 @@ iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAA |
|  |  |  |
|  |  | b := hugolib.Test(t, files) |
|  |  | b.AssertFileContent("public/p1/index.html", |
|  |  | `<img alt="alt1" src="/dir/p1/pixel.png">`, |
|  |  | `<img alt="alt2" src="/dir/p1/pixel.png?a=b&c=d#fragment">`, |
|  |  | `<img src="" alt="">`, |
|  |  | `<img src="/dir/p1/pixel.png" alt="alt1">`, |
|  |  | `<img src="/dir/p1/pixel.png" alt="alt2-&amp;&lt;&gt;&rsquo;" title="&amp;&lt;&gt;&#39;">`, |
|  |  | `<img src="/dir/p1/pixel.png?a=b&amp;c=d#fragment" alt="alt3">`, |
|  |  | `<img src="/dir/p1/pixel.png" alt="alt4">`, |
|  |  | ) |
|  |  |  |
|  |  | files = strings.Replace(files, "block = false", "block = true", -1) |
|  |  |  |
|  |  | b = hugolib.Test(t, files) |
|  |  | b.AssertFileContent("public/p1/index.html", |
|  |  | `<img alt="alt1" src="/dir/p1/pixel.png">`, |
|  |  | `<img alt="alt2" class="foo" id="bar" src="/dir/p1/pixel.png?a=b&c=d#fragment">`, |
|  |  | `<img src="" alt="">`, |
|  |  | `<img src="/dir/p1/pixel.png" alt="alt1">`, |
|  |  | `<img src="/dir/p1/pixel.png" alt="alt2-&amp;&lt;&gt;&rsquo;" title="&amp;&lt;&gt;&#39;">`, |
|  |  | `<img src="/dir/p1/pixel.png?a=b&amp;c=d#fragment" alt="alt3" class="foo" id="bar">`, |
|  |  | `<img src="/dir/p1/pixel.png" alt="alt4" id="&#34;&gt;&lt;script&gt;alert()&lt;/script&gt;">`, |
|  |  | ) |
|  |  | } |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `54398f8`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgohugoio%2Fhugo%2Fcommit%2F54398f8d572c689f9785d59e907fd910a23401b0) to comment.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_3c97fd53_20250115_092321.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgohugoio%2Fhugo%2Freleases%2Ftag%2Fv0.139.4)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgohugoio%2Fhugo%2Freleases%2Ftag%2Fv0.139.4)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=gohugoio%2Fhugo)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gohugoio](/gohugoio)
/
**[hugo](/gohugoio/hugo)**
Public

* [Notifications](/login?return_to=%2Fgohugoio%2Fhugo) You must be signed in to change notification settings
* [Fork
  7.6k](/login?return_to=%2Fgohugoio%2Fhugo)
* [Star
   77.2k](/login?return_to=%2Fgohugoio%2Fhugo)

* [Code](/gohugoio/hugo/tree/v0.139.4)
* [Issues
  449](/gohugoio/hugo/issues)
* [Pull requests
  29](/gohugoio/hugo/pulls)
* [Actions](/gohugoio/hugo/actions)
* [Projects
  0](/gohugoio/hugo/projects)
* [Security](/gohugoio/hugo/security)
* [Insights](/gohugoio/hugo/pulse)

Additional navigation options

* [Code](/gohugoio/hugo/tree/v0.139.4)
* [Issues](/gohugoio/hugo/issues)
* [Pull requests](/gohugoio/hugo/pulls)
* [Actions](/gohugoio/hugo/actions)
* [Projects](/gohugoio/hugo/projects)
* [Security](/gohugoio/hugo/security)
* [Insights](/gohugoio/hugo/pulse)

1. [Releases](/gohugoio/hugo/releases)
2. [v0.139.4](/gohugoio/hugo/releases/tag/v0.139.4)

# v0.139.4

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/gohugoio/hugo/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...v0.139.4)

 Loading

[View all tags](/gohugoio/hugo/tags)

![@bep](https://avatars.githubusercontent.com/u/394382?s=40&v=4)
[bep](/bep)
released this
09 Dec 18:00

[v0.139.4](/gohugoio/hugo/tree/v0.139.4)

[`3afe91d`](/gohugoio/hugo/commit/3afe91d4b1b069abbedd6a96ed755b1e12581dfe)

This release contains a security fix. See this [Security Advisory](https://github.com/gohugoio/hugo/security/advisories/GHSA-c2xf-9v2r-r2rx) for details. Note that this is only relevant if you don't trust your content (e.g. Markdown) files.

## What's Changed

* tpl/tplimpl: Escape Markdown attributes in render hooks and shortcodes [54398f8](https://github.com/gohugoio/hugo/commit/54398f8d572c689f9785d59e907fd910a23401b0) [@jmooring](https://github.com/jmooring)
* deps: Upgrade github.com/bep/godartsass/v2 v2.3.1 => v2.3.2 [b8c15f2](https://github.com/gohugoio/hugo/commit/b8c15f245b6989c10eaad932e19519bd8cc249e9) [@bep](https://github.com/bep)
* common/maps: Simplify TestScratchSetInMap/DeleteInMap [d0dc518](https://github.com/gohugoio/hugo/commit/d0dc518844f76045787b5c8bd90498cb0e133ae6) [@alexandear](https://github.com/alexandear)
* markup/tableofcontents: Cast Fragments.ToHTML args to int [b529859](https://github.com/gohugoio/hugo/commit/b529859008fae916a0509645da539072e62dfcb1) [@jmooring](https://github.com/jmooring) [#13107](https://github.com/gohugoio/hugo/issues/13107)

### Contributors

* [![@jmooring](https://avatars.githubusercontent.com/u/335669?s=64&v=4)](https://github.com/jmooring)
* [![@bep](https://avatars.githubusercontent.com/u/394382?s=64&v=4)](https://github.com/bep)
* [![@alexandear](https://avatars.githubusercontent.com/u/3228886?s=64&v=4)](https://github.com/alexandear)

jmooring, bep, and alexandear

 Assets
29

 Loading

 üëç
6
 agriyakhetarpal, docxml, methbkts, JiHoon0422, Beryesa, and idarek reacted with thumbs up emoji
 üéâ
4
 agriyakhetarpal, whiztech, kumarnirpendra25, and JiHoon0422 reacted with hooray emoji
 ‚ù§Ô∏è
3
 agriyakhetarpal, seraphyn, and JiHoon0422 reacted with heart emoji
 üöÄ
2
 agriyakhetarpal and gamerYazilimci45 reacted with rocket emoji

All reactions

* üëç
  6 reactions
* üéâ
  4 reactions
* ‚ù§Ô∏è
  3 reactions
* üöÄ
  2 reactions

 10 people reacted

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from gohugo.io_36c1d8a3_20250115_092323.html ===

# [HUGO](https://gohugo.io/)

* [News](/news/)
* [Docs](/documentation/)
* [Themes](https://themes.gohugo.io/)
* [Community](https://discourse.gohugo.io/)
* [GitHub](https://github.com/gohugoio/hugo)

Search

[gohugoio](https://fosstodon.org/%40gohugoio)
[Star](https://github.com/gohugoio/hugo)

* About
  + [In this section](/about/)
  + [Introduction](/about/introduction/)
  + [Features](/about/features/)
  + [Privacy](/about/privacy/)
  + [Security](/about/security/)
  + [License](/about/license/)
* Installation
  + [In this section](/installation/)
  + [macOS](/installation/macos/)
  + [Linux](/installation/linux/)
  + [Windows](/installation/windows/)
  + [BSD](/installation/bsd/)
* Getting started
  + [In this section](/getting-started/)
  + [Quick start](/getting-started/quick-start/)
  + [Basic usage](/getting-started/usage/)
  + [Directory structure](/getting-started/directory-structure/)
  + [Configuration](/getting-started/configuration/)
  + [Configure markup](/getting-started/configuration-markup/)
  + [Configure build](/getting-started/configuration-build/)
  + [Glossary of terms](/getting-started/glossary/)
  + [External learning resources](/getting-started/external-learning-resources/)
* Quick reference
  + [In this section](/quick-reference/)
  + [Emojis](/quick-reference/emojis/)
  + [Functions](/quick-reference/functions/)
  + [Methods](/quick-reference/methods/)
  + [Page collections](/quick-reference/page-collections/)
* Content management
  + [In this section](/content-management/)
  + [Organization](/content-management/organization/)
  + [Page bundles](/content-management/page-bundles/)
  + [Content formats](/content-management/formats/)
  + [Front matter](/content-management/front-matter/)
  + [Build options](/content-management/build-options/)
  + [Page resources](/content-management/page-resources/)
  + [Image processing](/content-management/image-processing/)
  + [Shortcodes](/content-management/shortcodes/)
  + [Related content](/content-management/related/)
  + [Sections](/content-management/sections/)
  + [Content types](/content-management/types/)
  + [Archetypes](/content-management/archetypes/)
  + [Taxonomies](/content-management/taxonomies/)
  + [Summaries](/content-management/summaries/)
  + [Links and cross references](/content-management/cross-references/)
  + [URL management](/content-management/urls/)
  + [Menus](/content-management/menus/)
  + [Comments](/content-management/comments/)
  + [Multilingual](/content-management/multilingual/)
  + [Markdown attributes](/content-management/markdown-attributes/)
  + [Syntax highlighting](/content-management/syntax-highlighting/)
  + [Diagrams](/content-management/diagrams/)
  + [Mathematics](/content-management/mathematics/)
  + [Data sources](/content-management/data-sources/)
  + [Content adapters](/content-management/content-adapters/)
* Templates
  + [In this section](/templates/)
  + [Introduction](/templates/introduction/)
  + [Template types](/templates/types/)
  + [Lookup order](/templates/lookup-order/)
  + [Base templates](/templates/base/)
  + [Home templates](/templates/home/)
  + [Single templates](/templates/single/)
  + [Section templates](/templates/section/)
  + [Taxonomy templates](/templates/taxonomy/)
  + [Term templates](/templates/term/)
  + [Partial templates](/templates/partial/)
  + [Content view templates](/templates/content-view/)
  + [Shortcode templates](/templates/shortcode/)
  + [Sitemap templates](/templates/sitemap/)
  + [RSS templates](/templates/rss/)
  + [404 templates](/templates/404/)
  + [robots.txt templates](/templates/robots/)
  + [Menus](/templates/menu/)
  + [Pagination](/templates/pagination/)
  + [Embedded templates](/templates/embedded/)
  + [Custom output formats](/templates/output-formats/)
* Functions
  + [In this section](/functions/)
  + [cast](/functions/cast/)
  + [collections](/functions/collections/)
  + [compare](/functions/compare/)
  + [crypto](/functions/crypto/)
  + [css](/functions/css/)
  + [data](/functions/data/)
  + [debug](/functions/debug/)
  + [diagrams](/functions/diagrams/)
  + [encoding](/functions/encoding/)
  + [fmt](/functions/fmt/)
  + [global](/functions/global/)
  + [go template](/functions/go-template/)
  + [hash](/functions/hash/)
  + [hugo](/functions/hugo/)
  + [images](/functions/images/)
  + [inflect](/functions/inflect/)
  + [js](/functions/js/)
  + [lang](/functions/lang/)
  + [math](/functions/math/)
  + [openapi3](/functions/openapi3/)
  + [os](/functions/os/)
  + [partials](/functions/partials/)
  + [path](/functions/path/)
  + [reflect](/functions/reflect/)
  + [resources](/functions/resources/)
  + [safe](/functions/safe/)
  + [strings](/functions/strings/)
  + [templates](/functions/templates/)
  + [time](/functions/time/)
  + [transform](/functions/transform/)
  + [urls](/functions/urls/)
* Methods
  + [In this section](/methods/)
  + [Duration](/methods/duration/)
  + [Menu](/methods/menu/)
  + [Menu entry](/methods/menu-entry/)
  + [Page](/methods/page/)
  + [Pager](/methods/pager/)
  + [Pages](/methods/pages/)
  + [Resource](/methods/resource/)
  + [Shortcode](/methods/shortcode/)
  + [Site](/methods/site/)
  + [Taxonomy](/methods/taxonomy/)
  + [Time](/methods/time/)
* Render hooks
  + [In this section](/render-hooks/)
  + [Introduction](/render-hooks/introduction/)
  + [Blockquotes](/render-hooks/blockquotes/)
  + [Code blocks](/render-hooks/code-blocks/)
  + [Headings](/render-hooks/headings/)
  + [Images](/render-hooks/images/)
  + [Links](/render-hooks/links/)
  + [Passthrough](/render-hooks/passthrough/)
  + [Tables](/render-hooks/tables/)
* Hugo Modules
  + [In this section](/hugo-modules/)
  + [Configure Hugo modules](/hugo-modules/configuration/)
  + [Use Hugo Modules](/hugo-modules/use-modules/)
  + [Theme components](/hugo-modules/theme-components/)
* Hugo Pipes
  + [In this section](/hugo-pipes/)
  + [Introduction](/hugo-pipes/introduction/)
  + [Transpile Sass to CSS](/hugo-pipes/transpile-sass-to-css/)
  + [PostCSS](/hugo-pipes/postcss/)
  + [PostProcess](/hugo-pipes/postprocess/)
  + [JavaScript building](/hugo-pipes/js/)
  + [Asset minification](/hugo-pipes/minification/)
  + [Concatenating assets](/hugo-pipes/bundling/)
  + [Fingerprinting and SRI hashing](/hugo-pipes/fingerprint/)
  + [Resource from string](/hugo-pipes/resource-from-string/)
  + [Resource from template](/hugo-pipes/resource-from-template/)
* [CLI](/commands/)
* Troubleshooting
  + [In this section](/troubleshooting/)
  + [Audit](/troubleshooting/audit/)
  + [Logging](/troubleshooting/logging/)
  + [Inspection](/troubleshooting/inspection/)
  + [Deprecation](/troubleshooting/deprecation/)
  + [Performance](/troubleshooting/performance/)
  + [FAQs](/troubleshooting/faq/)
* Developer tools
  + [In this section](/tools/)
  + [Editor plugins](/tools/editors/)
  + [Front-ends](/tools/front-ends/)
  + [Search](/tools/search/)
  + [Migrations](/tools/migrations/)
  + [Other projects](/tools/other/)
* Hosting and deployment
  + [In this section](/hosting-and-deployment/)
  + [Hugo Deploy](/hosting-and-deployment/hugo-deploy/)
  + [Deploy with Rclone](/hosting-and-deployment/deployment-with-rclone/)
  + [Deploy with Rsync](/hosting-and-deployment/deployment-with-rsync/)
  + [Host on 21YunBox](/hosting-and-deployment/hosting-on-21yunbox/)
  + [Host on AWS Amplify](/hosting-and-deployment/hosting-on-aws-amplify/)
  + [Host on Azure Static Web Apps](/hosting-and-deployment/hosting-on-azure-static-web-apps/)
  + [Host on Cloudflare Pages](/hosting-and-deployment/hosting-on-cloudflare-pages/)
  + [Host on Firebase](/hosting-and-deployment/hosting-on-firebase/)
  + [Host on GitHub Pages](/hosting-and-deployment/hosting-on-github/)
  + [Host on GitLab Pages](/hosting-and-deployment/hosting-on-gitlab/)
  + [Host on KeyCDN](/hosting-and-deployment/hosting-on-keycdn/)
  + [Host on Netlify](/hosting-and-deployment/hosting-on-netlify/)
  + [Host on Render](/hosting-and-deployment/hosting-on-render/)
* Contribute
  + [In this section](/contribute/)
  + [Development](/contribute/development/)
  + [Documentation](/contribute/documentation/)
  + [Themes](/contribute/themes/)
* [Maintenance](/maintenance/)

[GETTING STARTED](/categories/getting-started)
[FUNDAMENTALS](/categories/fundamentals)
# Configure markup

Configure rendering of markup to HTML.

## Default handler

Hugo uses [Goldmark](https://github.com/yuin/goldmark/) to render Markdown to HTML.

hugo.

yaml

toml

json

```
markup:
  defaultMarkdownHandler: goldmark

```

```
[markup]
  defaultMarkdownHandler = 'goldmark'

```

```
{
   "markup": {
      "defaultMarkdownHandler": "goldmark"
   }
}

```

Files with a `.md`, `.mdown`, or `.markdown` extension are processed as Markdown, provided that you have not specified a different [content format](/content-management/formats/#formats) using the `markup` field in front matter.

To use a different renderer for Markdown files, specify one of `asciidocext`, `org`, `pandoc`, or `rst` in your site configuration.

| defaultMarkdownHandler | Description |
| --- | --- |
| `asciidocext` | [AsciiDoc](https://asciidoc.org/) |
| `goldmark` | [Goldmark](https://github.com/yuin/goldmark/) |
| `org` | [Emacs Org Mode](https://orgmode.org/) |
| `pandoc` | [Pandoc](https://pandoc.org/) |
| `rst` | [reStructuredText](https://docutils.sourceforge.io/rst.html) |

To use AsciiDoc, Pandoc, or reStructuredText you must install the relevant renderer and update your [security policy](/about/security/#security-policy).

Unless you need a unique capability provided by one of the alternative Markdown handlers, we strongly recommend that you use the default setting. Goldmark is fast, well maintained, conforms to the [CommonMark](https://spec.commonmark.org/0.30/) specification, and is compatible with [GitHub Flavored Markdown](https://github.github.com/gfm/) (GFM).

## Goldmark

This is the default configuration for the Goldmark Markdown renderer:

hugo.

yaml

toml

json

```
markup:
  goldmark:
    duplicateResourceFiles: false
    extensions:
      cjk:
        eastAsianLineBreaks: false
        eastAsianLineBreaksStyle: simple
        enable: false
        escapedSpace: false
      definitionList: true
      extras:
        delete:
          enable: false
        insert:
          enable: false
        mark:
          enable: false
        subscript:
          enable: false
        superscript:
          enable: false
      footnote: true
      linkify: true
      linkifyProtocol: https
      passthrough:
        delimiters:
          block: []
          inline: []
        enable: false
      strikethrough: true
      table: true
      taskList: true
      typographer:
        apostrophe: '&rsquo;'
        disable: false
        ellipsis: '&hellip;'
        emDash: '&mdash;'
        enDash: '&ndash;'
        leftAngleQuote: '&laquo;'
        leftDoubleQuote: '&ldquo;'
        leftSingleQuote: '&lsquo;'
        rightAngleQuote: '&raquo;'
        rightDoubleQuote: '&rdquo;'
        rightSingleQuote: '&rsquo;'
    parser:
      attribute:
        block: false
        title: true
      autoHeadingID: true
      autoHeadingIDType: github
      wrapStandAloneImageWithinParagraph: true
    renderHooks:
      image:
        enableDefault: false
      link:
        enableDefault: false
    renderer:
      hardWraps: false
      unsafe: false
      xhtml: false

```

```
[markup]
  [markup.goldmark]
    duplicateResourceFiles = false
    [markup.goldmark.extensions]
      definitionList = true
      footnote = true
      linkify = true
      linkifyProtocol = 'https'
      strikethrough = true
      table = true
      taskList = true
      [markup.goldmark.extensions.cjk]
        eastAsianLineBreaks = false
        eastAsianLineBreaksStyle = 'simple'
        enable = false
        escapedSpace = false
      [markup.goldmark.extensions.extras]
        [markup.goldmark.extensions.extras.delete]
          enable = false
        [markup.goldmark.extensions.extras.insert]
          enable = false
        [markup.goldmark.extensions.extras.mark]
          enable = false
        [markup.goldmark.extensions.extras.subscript]
          enable = false
        [markup.goldmark.extensions.extras.superscript]
          enable = false
      [markup.goldmark.extensions.passthrough]
        enable = false
        [markup.goldmark.extensions.passthrough.delimiters]
          block = []
          inline = []
      [markup.goldmark.extensions.typographer]
        apostrophe = '&rsquo;'
        disable = false
        ellipsis = '&hellip;'
        emDash = '&mdash;'
        enDash = '&ndash;'
        leftAngleQuote = '&laquo;'
        leftDoubleQuote = '&ldquo;'
        leftSingleQuote = '&lsquo;'
        rightAngleQuote = '&raquo;'
        rightDoubleQuote = '&rdquo;'
        rightSingleQuote = '&rsquo;'
    [markup.goldmark.parser]
      autoHeadingID = true
      autoHeadingIDType = 'github'
      wrapStandAloneImageWithinParagraph = true
      [markup.goldmark.parser.attribute]
        block = false
        title = true
    [markup.goldmark.renderHooks]
      [markup.goldmark.renderHooks.image]
        enableDefault = false
      [markup.goldmark.renderHooks.link]
        enableDefault = false
    [markup.goldmark.renderer]
      hardWraps = false
      unsafe = false
      xhtml = false

```

```
{
   "markup": {
      "goldmark": {
         "duplicateResourceFiles": false,
         "extensions": {
            "cjk": {
               "eastAsianLineBreaks": false,
               "eastAsianLineBreaksStyle": "simple",
               "enable": false,
               "escapedSpace": false
            },
            "definitionList": true,
            "extras": {
               "delete": {
                  "enable": false
               },
               "insert": {
                  "enable": false
               },
               "mark": {
                  "enable": false
               },
               "subscript": {
                  "enable": false
               },
               "superscript": {
                  "enable": false
               }
            },
            "footnote": true,
            "linkify": true,
            "linkifyProtocol": "https",
            "passthrough": {
               "delimiters": {
                  "block": [],
                  "inline": []
               },
               "enable": false
            },
            "strikethrough": true,
            "table": true,
            "taskList": true,
            "typographer": {
               "apostrophe": "\u0026rsquo;",
               "disable": false,
               "ellipsis": "\u0026hellip;",
               "emDash": "\u0026mdash;",
               "enDash": "\u0026ndash;",
               "leftAngleQuote": "\u0026laquo;",
               "leftDoubleQuote": "\u0026ldquo;",
               "leftSingleQuote": "\u0026lsquo;",
               "rightAngleQuote": "\u0026raquo;",
               "rightDoubleQuote": "\u0026rdquo;",
               "rightSingleQuote": "\u0026rsquo;"
            }
         },
         "parser": {
            "attribute": {
               "block": false,
               "title": true
            },
            "autoHeadingID": true,
            "autoHeadingIDType": "github",
            "wrapStandAloneImageWithinParagraph": true
         },
         "renderHooks": {
            "image": {
               "enableDefault": false
            },
            "link": {
               "enableDefault": false
            }
         },
         "renderer": {
            "hardWraps": false,
            "unsafe": false,
            "xhtml": false
         }
      }
   }
}

```

### Goldmark extensions

The extensions below, excluding Extras and Passthrough, are enabled by default.

| Extension | Documentation | Enabled |
| --- | --- | --- |
| cjk | [Goldmark Extensions: CJK](https://github.com/yuin/goldmark?tab=readme-ov-file#cjk-extension) | ‚úîÔ∏è |
| definitionList | [PHP Markdown Extra: Definition lists](https://michelf.ca/projects/php-markdown/extra/#def-list) | ‚úîÔ∏è |
| extras | [Hugo Goldmark Extensions: Extras](https://github.com/gohugoio/hugo-goldmark-extensions?tab=readme-ov-file#extras-extension) |  |
| footnote | [PHP Markdown Extra: Footnotes](https://michelf.ca/projects/php-markdown/extra/#footnotes) | ‚úîÔ∏è |
| linkify | [GitHub Flavored Markdown: Autolinks](https://github.github.com/gfm/#autolinks-extension-) | ‚úîÔ∏è |
| passthrough | [Hugo Goldmark Extensions: Passthrough](https://github.com/gohugoio/hugo-goldmark-extensions?tab=readme-ov-file#passthrough-extension) |  |
| strikethrough | [GitHub Flavored Markdown: Strikethrough](https://github.github.com/gfm/#strikethrough-extension-) | ‚úîÔ∏è |
| table | [GitHub Flavored Markdown: Tables](https://github.github.com/gfm/#tables-extension-) | ‚úîÔ∏è |
| taskList | [GitHub Flavored Markdown: Task list items](https://github.github.com/gfm/#task-list-items-extension-) | ‚úîÔ∏è |
| typographer | [Goldmark Extensions: Typographer](https://github.com/yuin/goldmark?tab=readme-ov-file#typographer-extension) | ‚úîÔ∏è |

#### Extras

[New in v0.126.0](https://github.com/gohugoio/hugo/releases/tag/v0.126.0)

Enable [deleted text](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/del), [inserted text](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/ins), [mark text](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/mark), [subscript](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/sub), and [superscript](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/sup) elements in Markdown.

| Element | Markdown | Rendered |
| --- | --- | --- |
| Deleted text | `~~foo~~` | `<del>foo</del>` |
| Inserted text | `++bar++` | `<ins>bar</ins>` |
| Mark text | `==baz==` | `<mark>baz</mark>` |
| Subscript | `H~2~O` | `H<sub>2</sub>O` |
| Superscript | `1^st^` | `1<sup>st</sup>` |

To avoid a conflict when enabling the Hugo Goldmark Extras subscript extension, if you want to render subscript and strikethrough text concurrently you must:

1. Disable the Goldmark strikethrough extension
2. Enable the Hugo Goldmark Extras delete extension

For example:

hugo.

yaml

toml

json

```
markup:
  goldmark:
    extensions:
      extras:
        delete:
          enable: true
        subscript:
          enable: true
      strikethrough: false

```

```
[markup]
  [markup.goldmark]
    [markup.goldmark.extensions]
      strikethrough = false
      [markup.goldmark.extensions.extras]
        [markup.goldmark.extensions.extras.delete]
          enable = true
        [markup.goldmark.extensions.extras.subscript]
          enable = true

```

```
{
   "markup": {
      "goldmark": {
         "extensions": {
            "extras": {
               "delete": {
                  "enable": true
               },
               "subscript": {
                  "enable": true
               }
            },
            "strikethrough": false
         }
      }
   }
}

```

#### Passthrough

[New in v0.122.0](https://github.com/gohugoio/hugo/releases/tag/v0.122.0)

Enable the passthrough extension to include mathematical equations and expressions in Markdown using LaTeX or TeX typesetting syntax. See [mathematics in Markdown](/content-management/mathematics/) for details.

#### Typographer

The Typographer extension replaces certain character combinations with HTML entities as specified below:

| Markdown | Replaced by | Description |
| --- | --- | --- |
| `...` | `&hellip;` | horizontal ellipsis |
| `'` | `&rsquo;` | apostrophe |
| `--` | `&ndash;` | en dash |
| `---` | `&mdash;` | em dash |
| `¬´` | `&laquo;` | left angle quote |
| `‚Äú` | `&ldquo;` | left double quote |
| `‚Äò` | `&lsquo;` | left single quote |
| `¬ª` | `&raquo;` | right angle quote |
| `‚Äù` | `&rdquo;` | right double quote |
| `‚Äô` | `&rsquo;` | right single quote |

### Goldmark settings explained

Most of the Goldmark settings above are self-explanatory, but some require explanation.

###### duplicateResourceFiles

[New in v0.123.0](https://github.com/gohugoio/hugo/releases/tag/v0.123.0)

(`bool`) If `true`, shared page resources on multilingual single-host sites will be duplicated for each language. See [multilingual page resources](/content-management/page-resources/#multilingual) for details. Default is `false`.

With multilingual single-host sites, setting this parameter to `false` will enable Hugo‚Äôs [embedded link render hook](/render-hooks/links/#default) and [embedded image render hook](/render-hooks/images/#default). This is the default configuration for multilingual single-host sites.

###### parser.wrapStandAloneImageWithinParagraph

(`bool`) If `true`, image elements without adjacent content will be wrapped within a `p` element when rendered. This is the default Markdown behavior. Set to `false` when using an [image render hook](/render-hooks/images/) to render standalone images as `figure` elements. Default is `true`.

###### parser.autoHeadingIDType

(`string`) The strategy used to automatically generate heading `id` attributes, one of `github`, `github-ascii` or `blackfriday`.

* `github` produces GitHub-compatible `id` attributes
* `github-ascii` drops any non-ASCII characters after accent normalization
* `blackfriday` produces `id` attributes compatible with the Blackfriday Markdown renderer

This is also the strategy used by the [anchorize](/functions/urls/anchorize/) template function. Default is `github`.

###### parser.attribute.block

(`bool`) If `true`, enables [Markdown attributes](/content-management/markdown-attributes/) for block elements. Default is `false`.

###### parser.attribute.title

(`bool`) If `true`, enables [Markdown attributes](/content-management/markdown-attributes/) for headings. Default is `true`.

###### renderHooks.image.enableDefault

[New in v0.123.0](https://github.com/gohugoio/hugo/releases/tag/v0.123.0)

(`bool`) If `true`, enables Hugo‚Äôs [embedded image render hook](/render-hooks/images/#default). Default is `false`.

The embedded image render hook is automatically enabled for multilingual single-host sites if [duplication of shared page resources](/getting-started/configuration-markup/#duplicateresourcefiles) is disabled. This is the default configuration for multilingual single-host sites.

###### renderHooks.link.enableDefault

[New in v0.123.0](https://github.com/gohugoio/hugo/releases/tag/v0.123.0)

(`bool`) If `true`, enables Hugo‚Äôs [embedded link render hook](/render-hooks/links/#default). Default is `false`.

The embedded link render hook is automatically enabled for multilingual single-host sites if [duplication of shared page resources](/getting-started/configuration-markup/#duplicateresourcefiles) is disabled. This is the default configuration for multilingual single-host sites.

###### renderer.hardWraps

(`bool`) If `true`, Goldmark replaces newline characters within a paragraph with `br` elements. Default is `false`.

###### renderer.unsafe

(`bool`) If `true`, Goldmark renders raw HTML mixed within the Markdown. This is unsafe unless the content is under your control. Default is `false`.

## AsciiDoc

This is the default configuration for the AsciiDoc renderer:

hugo.

yaml

toml

json

```
markup:
  asciidocExt:
    attributes: {}
    backend: html5
    extensions: []
    failureLevel: fatal
    noHeaderOrFooter: true
    preserveTOC: false
    safeMode: unsafe
    sectionNumbers: false
    trace: false
    verbose: false
    workingFolderCurrent: false

```

```
[markup]
  [markup.asciidocExt]
    backend = 'html5'
    extensions = []
    failureLevel = 'fatal'
    noHeaderOrFooter = true
    preserveTOC = false
    safeMode = 'unsafe'
    sectionNumbers = false
    trace = false
    verbose = false
    workingFolderCurrent = false
    [markup.asciidocExt.attributes]

```

```
{
   "markup": {
      "asciidocExt": {
         "attributes": {},
         "backend": "html5",
         "extensions": [],
         "failureLevel": "fatal",
         "noHeaderOrFooter": true,
         "preserveTOC": false,
         "safeMode": "unsafe",
         "sectionNumbers": false,
         "trace": false,
         "verbose": false,
         "workingFolderCurrent": false
      }
   }
}

```

### AsciiDoc settings explained

###### attributes

(`map`) A map of key-value pairs, each a document attribute. See Asciidoctor‚Äôs [attributes](https://asciidoctor.org/docs/asciidoc-syntax-quick-reference/#attributes-and-substitutions).

###### backend

(`string`) The backend output file format. Default is `html5`.

###### extensions

(`string array`) An array of enabled extensions, one or more of `asciidoctor-html5s`, `asciidoctor-bibtex`, `asciidoctor-diagram`, `asciidoctor-interdoc-reftext`, `asciidoctor-katex`, `asciidoctor-latex`, `asciidoctor-mathematical`, or `asciidoctor-question`.

To mitigate security risks, entries in the extension array may not contain forward slashes (`/`), backslashes (`\`), or periods. Due to this restriction, extensions must be in Ruby‚Äôs `$LOAD_PATH`.

###### failureLevel

(`string`) The minimum logging level that triggers a non-zero exit code (failure). Default is `fatal`.

###### noHeaderOrFooter

(`bool`) If `true`, outputs an embeddable document, which excludes the header, the footer, and everything outside the body of the document. Default is `true`.

###### preserveTOC

(`bool`) If `true`, preserves the table of contents (TOC) rendered by Asciidoctor. By default, to make the TOC compatible with existing themes, Hugo removes the TOC rendered by Asciidoctor. To render the TOC, use the [`TableOfContents`](/methods/page/tableofcontents/) method on a `Page` object in your templates. Default is `false`.

###### safeMode

(`string`) The safe mode level, one of `unsafe`, `safe`, `server`, or `secure`. Default is `unsafe`.

###### sectionNumbers

(`bool`) If `true`, numbers each section title. Default is `false`.

###### trace

(`bool`) If `true`, include backtrace information on errors. Default is `false`.

###### verbose

(`bool`)If `true`, verbosely prints processing information and configuration file checks to stderr. Default is `false`.

###### workingFolderCurrent

(`bool`) If `true`, sets the working directory to be the same as that of the AsciiDoc file being processed, allowing [includes](https://docs.asciidoctor.org/asciidoc/latest/syntax-quick-reference/#includes) to work with relative paths. Set to `true` to render diagrams with the [asciidoctor-diagram](https://asciidoctor.org/docs/asciidoctor-diagram/) extension. Default is `false`.

### AsciiDoc configuration example

hugo.

yaml

toml

json

```
markup:
  asciidocExt:
    attributes:
      my-attribute-name: my value
      my-base-url: https://example.com/
    extensions:
    - asciidoctor-html5s
    - asciidoctor-diagram
    workingFolderCurrent: true

```

```
[markup]
  [markup.asciidocExt]
    extensions = ['asciidoctor-html5s', 'asciidoctor-diagram']
    workingFolderCurrent = true
    [markup.asciidocExt.attributes]
      my-attribute-name = 'my value'
      my-base-url = 'https://example.com/'

```

```
{
   "markup": {
      "asciidocExt": {
         "attributes": {
            "my-attribute-name": "my value",
            "my-base-url": "https://example.com/"
         },
         "extensions": [
            "asciidoctor-html5s",
            "asciidoctor-diagram"
         ],
         "workingFolderCurrent": true
      }
   }
}

```

### AsciiDoc syntax highlighting

Follow the steps below to enable syntax highlighting.

Step 1
Set the `source-highlighter` attribute in your site configuration. For example:

hugo.

yaml

toml

json

```
markup:
  asciidocExt:
    attributes:
      source-highlighter: rouge

```

```
[markup]
  [markup.asciidocExt]
    [markup.asciidocExt.attributes]
      source-highlighter = 'rouge'

```

```
{
   "markup": {
      "asciidocExt": {
         "attributes": {
            "source-highlighter": "rouge"
         }
      }
   }
}

```

Step 2
Generate the highlighter CSS. For example:

```
rougify style monokai.sublime > assets/css/syntax.css

```
Step 3
In your base template add a link to the CSS file:

layouts/\_default/baseof.html
```
<head>
  ...
  {{ with resources.Get "css/syntax.css" }}
    <link rel="stylesheet" href="{{ .RelPermalink }}" integrity="{{ .Data.Integrity }}" crossorigin="anonymous">
  {{ end }}
  ...
</head>
```

Then add the code to be highlighted to your markup:

```
[#hello,ruby]
----
require 'sinatra'
get '/hi' do
  "Hello World!"
end
----

```
### AsciiDoc troubleshooting

Run `hugo --logLevel debug` to examine Hugo‚Äôs call to the Asciidoctor executable:

```
INFO 2019/12/22 09:08:48 Rendering book-as-pdf.adoc with C:\Ruby26-x64\bin\asciidoctor.bat using asciidoc args [--no-header-footer -r asciidoctor-html5s -b html5s -r asciidoctor-diagram --base-dir D:\prototypes\hugo_asciidoc_ddd\docs -a outdir=D:\prototypes\hugo_asciidoc_ddd\build -] ...

```
## Highlight

This is the default `highlight` configuration. Note that some of these settings can be set per code block, see [Syntax Highlighting](/content-management/syntax-highlighting/).

hugo.

yaml

toml

json

```
markup:
  highlight:
    anchorLineNos: false
    codeFences: true
    guessSyntax: false
    hl_Lines: ""
    hl_inline: false
    lineAnchors: ""
    lineNoStart: 1
    lineNos: false
    lineNumbersInTable: true
    noClasses: true
    noHl: false
    style: monokai
    tabWidth: 4
    wrapperClass: highlight

```

```
[markup]
  [markup.highlight]
    anchorLineNos = false
    codeFences = true
    guessSyntax = false
    hl_Lines = ''
    hl_inline = false
    lineAnchors = ''
    lineNoStart = 1
    lineNos = false
    lineNumbersInTable = true
    noClasses = true
    noHl = false
    style = 'monokai'
    tabWidth = 4
    wrapperClass = 'highlight'

```

```
{
   "markup": {
      "highlight": {
         "anchorLineNos": false,
         "codeFences": true,
         "guessSyntax": false,
         "hl_Lines": "",
         "hl_inline": false,
         "lineAnchors": "",
         "lineNoStart": 1,
         "lineNos": false,
         "lineNumbersInTable": true,
         "noClasses": true,
         "noHl": false,
         "style": "monokai",
         "tabWidth": 4,
         "wrapperClass": "highlight"
      }
   }
}

```

For `style`, see these galleries:

* [Short snippets](https://xyproto.github.io/splash/docs/all.html)
* [Long snippets](https://xyproto.github.io/splash/docs/longer/all.html)

For CSS, see [Generate Syntax Highlighter CSS](/content-management/syntax-highlighting/#generate-syntax-highlighter-css).

## Table of contents

This is the default configuration for the table of contents, applicable to Goldmark and Asciidoctor:

hugo.

yaml

toml

json

```
markup:
  tableOfContents:
    endLevel: 3
    ordered: false
    startLevel: 2

```

```
[markup]
  [markup.tableOfContents]
    endLevel = 3
    ordered = false
    startLevel = 2

```

```
{
   "markup": {
      "tableOfContents": {
         "endLevel": 3,
         "ordered": false,
         "startLevel": 2
      }
   }
}

```

###### startLevel

(`int`) Heading levels less than this value will be excluded from the table of contents. For example, to exclude `h1` elements from the table of contents, set this value to `2`. Default is `2`.

###### endLevel

(`int`) Heading levels greater than this value will be excluded from the table of contents. For example, to exclude `h4`, `h5`, and `h6` elements from the table of contents, set this value to `3`. Default is `3`.

###### ordered

(`bool`) If `true`, generates an ordered list instead of an unordered list. Default is `false`.

## See also

* [Content formats](/content-management/formats/)
* [Markdown attributes](/content-management/markdown-attributes/)
* [Shortcodes](/content-management/shortcodes/)
* [Blockquotes](/render-hooks/blockquotes/)
* [Code blocks](/render-hooks/code-blocks/)

On this page

* [Default handler](#default-handler)
* [Goldmark](#goldmark)
* [AsciiDoc](#asciidoc)
* [Highlight](#highlight)
* [Table of contents](#table-of-contents)

###### Last updated: November 14, 2024: [Update configuration-markup.md (227aab619)](https://github.com/gohugoio/hugoDocs/commit/227aab61905c0f778d173ed9e38621df4d7c429a)

[Improve this page](https://github.com/gohugoio/hugoDocs/edit/master/content/en/getting-started/configuration-markup.md)

By the [Hugo Authors](https://github.com/gohugoio/hugo/graphs/contributors)

![Hugo Logo](/images/hugo-logo-wide.svg)

* [File an Issue](https://github.com/gohugoio/hugo/issues/new)
* [Get Help](https://discourse.gohugo.io/)

* [@GoHugoIO](https://twitter.com/gohugoio)
* [@spf13](https://twitter.com/spf13)
* [@bepsays](https://twitter.com/bepsays)

[![Netlify badge](/images/netlify-dark.svg)](https://www.netlify.com)

### Hugo Sponsors

[Your Company?](https://bep.is/en/hugo-sponsor-2023-01/?utm_campaign=hugosponsor&utm_content=gohugoio&utm_medium=banner&utm_source=hugofooter "Your Company?")

The Hugo logos are copyright ¬© Steve Francia 2013‚Äì2025.

The Hugo Gopher is based on an original work by Ren√©e French.

![](/images/gopher-side_color.svg)

* [News](/news/)
* [Docs](/documentation/)
* [Themes](https://themes.gohugo.io/)
* [Community](https://discourse.gohugo.io/)
* [GitHub](https://github.com/gohugoio/hugo)

* [About](/about/)
* [Installation](/installation/)
* [Getting started](/getting-started/)
* [Quick reference](/quick-reference/)
* [Content management](/content-management/)
* [Templates](/templates/)
* [Functions](/functions/)
* [Methods](/methods/)
* [Render hooks](/render-hooks/)
* [Hugo Modules](/hugo-modules/)
* [Hugo Pipes](/hugo-pipes/)
* [CLI](/commands/)
* [Troubleshooting](/troubleshooting/)
* [Developer tools](/tools/)
* [Hosting and deployment](/hosting-and-deployment/)
* [Contribute](/contribute/)
* [Maintenance](/maintenance/)

Menu
Docs Menu


