=== Content from git.kernel.org_ad3c8d9e_20250114_194035.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8c1e6717f60d31f8af3937c23c4f1498529584e1)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8c1e6717f60d31f8af3937c23c4f1498529584e1)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8c1e6717f60d31f8af3937c23c4f1498529584e1)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8c1e6717f60d31f8af3937c23c4f1498529584e1)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Wang Hai <wanghai38@huawei.com> | 2024-10-11 19:34:44 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:21:57 +0100 |
| commit | [8c1e6717f60d31f8af3937c23c4f1498529584e1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8c1e6717f60d31f8af3937c23c4f1498529584e1) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8c1e6717f60d31f8af3937c23c4f1498529584e1)) | |
| tree | [e2065184e3312491a84ac8281b9a08e69167657b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8c1e6717f60d31f8af3937c23c4f1498529584e1) | |
| parent | [4af714e82379984974a1b61a5629cdb302673dda](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4af714e82379984974a1b61a5629cdb302673dda) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8c1e6717f60d31f8af3937c23c4f1498529584e1&id2=4af714e82379984974a1b61a5629cdb302673dda)) | |
| download | [linux-8c1e6717f60d31f8af3937c23c4f1498529584e1.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8c1e6717f60d31f8af3937c23c4f1498529584e1.tar.gz) | |

scsi: target: core: Fix null-ptr-deref in target\_alloc\_device()[ Upstream commit fca6caeb4a61d240f031914413fcc69534f6dc03 ]
There is a null-ptr-deref issue reported by KASAN:
BUG: KASAN: null-ptr-deref in target\_alloc\_device+0xbc4/0xbe0 [target\_core\_mod]
...
kasan\_report+0xb9/0xf0
target\_alloc\_device+0xbc4/0xbe0 [target\_core\_mod]
core\_dev\_setup\_virtual\_lun0+0xef/0x1f0 [target\_core\_mod]
target\_core\_init\_configfs+0x205/0x420 [target\_core\_mod]
do\_one\_initcall+0xdd/0x4e0
...
entry\_SYSCALL\_64\_after\_hwframe+0x76/0x7e
In target\_alloc\_device(), if allocing memory for dev queues fails, then
dev will be freed by dev->transport->free\_device(), but dev->transport
is not initialized at that time, which will lead to a null pointer
reference problem.
Fixing this bug by freeing dev with hba->backend->ops->free\_device().
Fixes: 1526d9f10c61 ("scsi: target: Make state\_list per CPU")
Signed-off-by: Wang Hai <wanghai38@huawei.com>
Link: [https://lore.kernel.org/r/20241011113444.40749-1-wanghai38@huawei.com](https://lore.kernel.org/r/20241011113444.40749-1-wanghai38%40huawei.com)
Reviewed-by: Mike Christie <michael.christie@oracle.com>
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8c1e6717f60d31f8af3937c23c4f1498529584e1)

| -rw-r--r-- | [drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/target/target_core_device.c?id=8c1e6717f60d31f8af3937c23c4f1498529584e1) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/target/target\_core\_device.c b/drivers/target/target\_core\_device.cindex daa4d06ce2336e..50135f8df1b4a9 100644--- a/[drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/target/target_core_device.c?id=4af714e82379984974a1b61a5629cdb302673dda)+++ b/[drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/target/target_core_device.c?id=8c1e6717f60d31f8af3937c23c4f1498529584e1)@@ -727,7 +727,7 @@ struct se\_device \*target\_alloc\_device(struct se\_hba \*hba, const char \*name)  dev->queues = kcalloc(nr\_cpu\_ids, sizeof(\*dev->queues), GFP\_KERNEL); if (!dev->queues) {- dev->transport->free\_device(dev);+ hba->backend->ops->free\_device(dev); return NULL; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:39:12 +0000



=== Content from git.kernel.org_c56256d7_20250114_194034.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=895ab729425ef9bf3b6d2f8d0853abe64896f314)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=895ab729425ef9bf3b6d2f8d0853abe64896f314)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=895ab729425ef9bf3b6d2f8d0853abe64896f314)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=895ab729425ef9bf3b6d2f8d0853abe64896f314)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Wang Hai <wanghai38@huawei.com> | 2024-10-11 19:34:44 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 01:56:00 +0100 |
| commit | [895ab729425ef9bf3b6d2f8d0853abe64896f314](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=895ab729425ef9bf3b6d2f8d0853abe64896f314) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=895ab729425ef9bf3b6d2f8d0853abe64896f314)) | |
| tree | [ea28dd407b72a3a727d71f14ed04f0c274b1114d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=895ab729425ef9bf3b6d2f8d0853abe64896f314) | |
| parent | [b3262e13e223a7e74dfbdb41be9a6d725ae6579f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b3262e13e223a7e74dfbdb41be9a6d725ae6579f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=895ab729425ef9bf3b6d2f8d0853abe64896f314&id2=b3262e13e223a7e74dfbdb41be9a6d725ae6579f)) | |
| download | [linux-895ab729425ef9bf3b6d2f8d0853abe64896f314.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-895ab729425ef9bf3b6d2f8d0853abe64896f314.tar.gz) | |

scsi: target: core: Fix null-ptr-deref in target\_alloc\_device()[ Upstream commit fca6caeb4a61d240f031914413fcc69534f6dc03 ]
There is a null-ptr-deref issue reported by KASAN:
BUG: KASAN: null-ptr-deref in target\_alloc\_device+0xbc4/0xbe0 [target\_core\_mod]
...
kasan\_report+0xb9/0xf0
target\_alloc\_device+0xbc4/0xbe0 [target\_core\_mod]
core\_dev\_setup\_virtual\_lun0+0xef/0x1f0 [target\_core\_mod]
target\_core\_init\_configfs+0x205/0x420 [target\_core\_mod]
do\_one\_initcall+0xdd/0x4e0
...
entry\_SYSCALL\_64\_after\_hwframe+0x76/0x7e
In target\_alloc\_device(), if allocing memory for dev queues fails, then
dev will be freed by dev->transport->free\_device(), but dev->transport
is not initialized at that time, which will lead to a null pointer
reference problem.
Fixing this bug by freeing dev with hba->backend->ops->free\_device().
Fixes: 1526d9f10c61 ("scsi: target: Make state\_list per CPU")
Signed-off-by: Wang Hai <wanghai38@huawei.com>
Link: [https://lore.kernel.org/r/20241011113444.40749-1-wanghai38@huawei.com](https://lore.kernel.org/r/20241011113444.40749-1-wanghai38%40huawei.com)
Reviewed-by: Mike Christie <michael.christie@oracle.com>
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=895ab729425ef9bf3b6d2f8d0853abe64896f314)

| -rw-r--r-- | [drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/target/target_core_device.c?id=895ab729425ef9bf3b6d2f8d0853abe64896f314) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/target/target\_core\_device.c b/drivers/target/target\_core\_device.cindex 13558cbd9b82e6..7be48bfbd42e45 100644--- a/[drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/target/target_core_device.c?id=b3262e13e223a7e74dfbdb41be9a6d725ae6579f)+++ b/[drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/target/target_core_device.c?id=895ab729425ef9bf3b6d2f8d0853abe64896f314)@@ -733,7 +733,7 @@ struct se\_device \*target\_alloc\_device(struct se\_hba \*hba, const char \*name)  dev->queues = kcalloc(nr\_cpu\_ids, sizeof(\*dev->queues), GFP\_KERNEL); if (!dev->queues) {- dev->transport->free\_device(dev);+ hba->backend->ops->free\_device(dev); return NULL; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:39:11 +0000



=== Content from git.kernel.org_30c5fc63_20250114_194035.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b80e9bc85bd9af378e7eac83e15dd129557bbdb6)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b80e9bc85bd9af378e7eac83e15dd129557bbdb6)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b80e9bc85bd9af378e7eac83e15dd129557bbdb6)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b80e9bc85bd9af378e7eac83e15dd129557bbdb6)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Wang Hai <wanghai38@huawei.com> | 2024-10-11 19:34:44 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 01:58:24 +0100 |
| commit | [b80e9bc85bd9af378e7eac83e15dd129557bbdb6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b80e9bc85bd9af378e7eac83e15dd129557bbdb6) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b80e9bc85bd9af378e7eac83e15dd129557bbdb6)) | |
| tree | [bc57a852019ebf411c5ebfccdccae74b49910ea2](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b80e9bc85bd9af378e7eac83e15dd129557bbdb6) | |
| parent | [2fe1384cbb7c63788444f92721590dfe4c9bcaea](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2fe1384cbb7c63788444f92721590dfe4c9bcaea) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b80e9bc85bd9af378e7eac83e15dd129557bbdb6&id2=2fe1384cbb7c63788444f92721590dfe4c9bcaea)) | |
| download | [linux-b80e9bc85bd9af378e7eac83e15dd129557bbdb6.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b80e9bc85bd9af378e7eac83e15dd129557bbdb6.tar.gz) | |

scsi: target: core: Fix null-ptr-deref in target\_alloc\_device()[ Upstream commit fca6caeb4a61d240f031914413fcc69534f6dc03 ]
There is a null-ptr-deref issue reported by KASAN:
BUG: KASAN: null-ptr-deref in target\_alloc\_device+0xbc4/0xbe0 [target\_core\_mod]
...
kasan\_report+0xb9/0xf0
target\_alloc\_device+0xbc4/0xbe0 [target\_core\_mod]
core\_dev\_setup\_virtual\_lun0+0xef/0x1f0 [target\_core\_mod]
target\_core\_init\_configfs+0x205/0x420 [target\_core\_mod]
do\_one\_initcall+0xdd/0x4e0
...
entry\_SYSCALL\_64\_after\_hwframe+0x76/0x7e
In target\_alloc\_device(), if allocing memory for dev queues fails, then
dev will be freed by dev->transport->free\_device(), but dev->transport
is not initialized at that time, which will lead to a null pointer
reference problem.
Fixing this bug by freeing dev with hba->backend->ops->free\_device().
Fixes: 1526d9f10c61 ("scsi: target: Make state\_list per CPU")
Signed-off-by: Wang Hai <wanghai38@huawei.com>
Link: [https://lore.kernel.org/r/20241011113444.40749-1-wanghai38@huawei.com](https://lore.kernel.org/r/20241011113444.40749-1-wanghai38%40huawei.com)
Reviewed-by: Mike Christie <michael.christie@oracle.com>
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b80e9bc85bd9af378e7eac83e15dd129557bbdb6)

| -rw-r--r-- | [drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/target/target_core_device.c?id=b80e9bc85bd9af378e7eac83e15dd129557bbdb6) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/target/target\_core\_device.c b/drivers/target/target\_core\_device.cindex 86590a7e29f6ae..dd041ee18ac9be 100644--- a/[drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/target/target_core_device.c?id=2fe1384cbb7c63788444f92721590dfe4c9bcaea)+++ b/[drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/target/target_core_device.c?id=b80e9bc85bd9af378e7eac83e15dd129557bbdb6)@@ -692,7 +692,7 @@ struct se\_device \*target\_alloc\_device(struct se\_hba \*hba, const char \*name)  dev->queues = kcalloc(nr\_cpu\_ids, sizeof(\*dev->queues), GFP\_KERNEL); if (!dev->queues) {- dev->transport->free\_device(dev);+ hba->backend->ops->free\_device(dev); return NULL; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:39:12 +0000



=== Content from git.kernel.org_db8d44ca_20250114_194033.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=39e02fa90323243187c91bb3e8f2f5f6a9aacfc7)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=39e02fa90323243187c91bb3e8f2f5f6a9aacfc7)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=39e02fa90323243187c91bb3e8f2f5f6a9aacfc7)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=39e02fa90323243187c91bb3e8f2f5f6a9aacfc7)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Wang Hai <wanghai38@huawei.com> | 2024-10-11 19:34:44 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 01:52:34 +0100 |
| commit | [39e02fa90323243187c91bb3e8f2f5f6a9aacfc7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=39e02fa90323243187c91bb3e8f2f5f6a9aacfc7) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=39e02fa90323243187c91bb3e8f2f5f6a9aacfc7)) | |
| tree | [70553a5097fc9acbe8cab4dc8e5d2f56d3cd3d9c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=39e02fa90323243187c91bb3e8f2f5f6a9aacfc7) | |
| parent | [03ca631c07f3428908e32c2749f3f58d7170dcbf](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=03ca631c07f3428908e32c2749f3f58d7170dcbf) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=39e02fa90323243187c91bb3e8f2f5f6a9aacfc7&id2=03ca631c07f3428908e32c2749f3f58d7170dcbf)) | |
| download | [linux-39e02fa90323243187c91bb3e8f2f5f6a9aacfc7.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-39e02fa90323243187c91bb3e8f2f5f6a9aacfc7.tar.gz) | |

scsi: target: core: Fix null-ptr-deref in target\_alloc\_device()[ Upstream commit fca6caeb4a61d240f031914413fcc69534f6dc03 ]
There is a null-ptr-deref issue reported by KASAN:
BUG: KASAN: null-ptr-deref in target\_alloc\_device+0xbc4/0xbe0 [target\_core\_mod]
...
kasan\_report+0xb9/0xf0
target\_alloc\_device+0xbc4/0xbe0 [target\_core\_mod]
core\_dev\_setup\_virtual\_lun0+0xef/0x1f0 [target\_core\_mod]
target\_core\_init\_configfs+0x205/0x420 [target\_core\_mod]
do\_one\_initcall+0xdd/0x4e0
...
entry\_SYSCALL\_64\_after\_hwframe+0x76/0x7e
In target\_alloc\_device(), if allocing memory for dev queues fails, then
dev will be freed by dev->transport->free\_device(), but dev->transport
is not initialized at that time, which will lead to a null pointer
reference problem.
Fixing this bug by freeing dev with hba->backend->ops->free\_device().
Fixes: 1526d9f10c61 ("scsi: target: Make state\_list per CPU")
Signed-off-by: Wang Hai <wanghai38@huawei.com>
Link: [https://lore.kernel.org/r/20241011113444.40749-1-wanghai38@huawei.com](https://lore.kernel.org/r/20241011113444.40749-1-wanghai38%40huawei.com)
Reviewed-by: Mike Christie <michael.christie@oracle.com>
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=39e02fa90323243187c91bb3e8f2f5f6a9aacfc7)

| -rw-r--r-- | [drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/target/target_core_device.c?id=39e02fa90323243187c91bb3e8f2f5f6a9aacfc7) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/target/target\_core\_device.c b/drivers/target/target\_core\_device.cindex d4185c1bed8a88..1fcac654cfaa47 100644--- a/[drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/target/target_core_device.c?id=03ca631c07f3428908e32c2749f3f58d7170dcbf)+++ b/[drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/target/target_core_device.c?id=39e02fa90323243187c91bb3e8f2f5f6a9aacfc7)@@ -724,7 +724,7 @@ struct se\_device \*target\_alloc\_device(struct se\_hba \*hba, const char \*name)  dev->queues = kcalloc(nr\_cpu\_ids, sizeof(\*dev->queues), GFP\_KERNEL); if (!dev->queues) {- dev->transport->free\_device(dev);+ hba->backend->ops->free\_device(dev); return NULL; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:39:11 +0000



=== Content from git.kernel.org_d7798503_20250114_194036.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=fca6caeb4a61d240f031914413fcc69534f6dc03)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fca6caeb4a61d240f031914413fcc69534f6dc03)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fca6caeb4a61d240f031914413fcc69534f6dc03)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fca6caeb4a61d240f031914413fcc69534f6dc03)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Wang Hai <wanghai38@huawei.com> | 2024-10-11 19:34:44 +0800 |
| --- | --- | --- |
| committer | Martin K. Petersen <martin.petersen@oracle.com> | 2024-10-15 22:25:52 -0400 |
| commit | [fca6caeb4a61d240f031914413fcc69534f6dc03](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fca6caeb4a61d240f031914413fcc69534f6dc03) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=fca6caeb4a61d240f031914413fcc69534f6dc03)) | |
| tree | [951a817b697c8426c1077989a774897fb51741b5](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fca6caeb4a61d240f031914413fcc69534f6dc03) | |
| parent | [b9e63d6c7c0e94a99e1af7c9c0c7fad13a2f2453](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b9e63d6c7c0e94a99e1af7c9c0c7fad13a2f2453) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fca6caeb4a61d240f031914413fcc69534f6dc03&id2=b9e63d6c7c0e94a99e1af7c9c0c7fad13a2f2453)) | |
| download | [linux-fca6caeb4a61d240f031914413fcc69534f6dc03.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-fca6caeb4a61d240f031914413fcc69534f6dc03.tar.gz) | |

scsi: target: core: Fix null-ptr-deref in target\_alloc\_device()There is a null-ptr-deref issue reported by KASAN:
BUG: KASAN: null-ptr-deref in target\_alloc\_device+0xbc4/0xbe0 [target\_core\_mod]
...
kasan\_report+0xb9/0xf0
target\_alloc\_device+0xbc4/0xbe0 [target\_core\_mod]
core\_dev\_setup\_virtual\_lun0+0xef/0x1f0 [target\_core\_mod]
target\_core\_init\_configfs+0x205/0x420 [target\_core\_mod]
do\_one\_initcall+0xdd/0x4e0
...
entry\_SYSCALL\_64\_after\_hwframe+0x76/0x7e
In target\_alloc\_device(), if allocing memory for dev queues fails, then
dev will be freed by dev->transport->free\_device(), but dev->transport
is not initialized at that time, which will lead to a null pointer
reference problem.
Fixing this bug by freeing dev with hba->backend->ops->free\_device().
Fixes: 1526d9f10c61 ("scsi: target: Make state\_list per CPU")
Signed-off-by: Wang Hai <wanghai38@huawei.com>
Link: [https://lore.kernel.org/r/20241011113444.40749-1-wanghai38@huawei.com](https://lore.kernel.org/r/20241011113444.40749-1-wanghai38%40huawei.com)
Reviewed-by: Mike Christie <michael.christie@oracle.com>
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fca6caeb4a61d240f031914413fcc69534f6dc03)

| -rw-r--r-- | [drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/target/target_core_device.c?id=fca6caeb4a61d240f031914413fcc69534f6dc03) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/target/target\_core\_device.c b/drivers/target/target\_core\_device.cindex bf4892544cfdb4..bb84d304b07e57 100644--- a/[drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/target/target_core_device.c?id=b9e63d6c7c0e94a99e1af7c9c0c7fad13a2f2453)+++ b/[drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/target/target_core_device.c?id=fca6caeb4a61d240f031914413fcc69534f6dc03)@@ -691,7 +691,7 @@ struct se\_device \*target\_alloc\_device(struct se\_hba \*hba, const char \*name)  dev->queues = kcalloc(nr\_cpu\_ids, sizeof(\*dev->queues), GFP\_KERNEL); if (!dev->queues) {- dev->transport->free\_device(dev);+ hba->backend->ops->free\_device(dev); return NULL; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:39:13 +0000



=== Content from git.kernel.org_ef21e456_20250114_194033.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=14a6a2adb440e4ae97bee73b2360946bd033dadd)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=14a6a2adb440e4ae97bee73b2360946bd033dadd)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=14a6a2adb440e4ae97bee73b2360946bd033dadd)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=14a6a2adb440e4ae97bee73b2360946bd033dadd)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Wang Hai <wanghai38@huawei.com> | 2024-10-11 19:34:44 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 02:02:30 +0100 |
| commit | [14a6a2adb440e4ae97bee73b2360946bd033dadd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=14a6a2adb440e4ae97bee73b2360946bd033dadd) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=14a6a2adb440e4ae97bee73b2360946bd033dadd)) | |
| tree | [4f7372abf22e821c348364d7ecaa228e35878f3c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=14a6a2adb440e4ae97bee73b2360946bd033dadd) | |
| parent | [76aad69b54fd16855d2fe565cc5f1cdd788fca23](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=76aad69b54fd16855d2fe565cc5f1cdd788fca23) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=14a6a2adb440e4ae97bee73b2360946bd033dadd&id2=76aad69b54fd16855d2fe565cc5f1cdd788fca23)) | |
| download | [linux-14a6a2adb440e4ae97bee73b2360946bd033dadd.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-14a6a2adb440e4ae97bee73b2360946bd033dadd.tar.gz) | |

scsi: target: core: Fix null-ptr-deref in target\_alloc\_device()[ Upstream commit fca6caeb4a61d240f031914413fcc69534f6dc03 ]
There is a null-ptr-deref issue reported by KASAN:
BUG: KASAN: null-ptr-deref in target\_alloc\_device+0xbc4/0xbe0 [target\_core\_mod]
...
kasan\_report+0xb9/0xf0
target\_alloc\_device+0xbc4/0xbe0 [target\_core\_mod]
core\_dev\_setup\_virtual\_lun0+0xef/0x1f0 [target\_core\_mod]
target\_core\_init\_configfs+0x205/0x420 [target\_core\_mod]
do\_one\_initcall+0xdd/0x4e0
...
entry\_SYSCALL\_64\_after\_hwframe+0x76/0x7e
In target\_alloc\_device(), if allocing memory for dev queues fails, then
dev will be freed by dev->transport->free\_device(), but dev->transport
is not initialized at that time, which will lead to a null pointer
reference problem.
Fixing this bug by freeing dev with hba->backend->ops->free\_device().
Fixes: 1526d9f10c61 ("scsi: target: Make state\_list per CPU")
Signed-off-by: Wang Hai <wanghai38@huawei.com>
Link: [https://lore.kernel.org/r/20241011113444.40749-1-wanghai38@huawei.com](https://lore.kernel.org/r/20241011113444.40749-1-wanghai38%40huawei.com)
Reviewed-by: Mike Christie <michael.christie@oracle.com>
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=14a6a2adb440e4ae97bee73b2360946bd033dadd)

| -rw-r--r-- | [drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/target/target_core_device.c?id=14a6a2adb440e4ae97bee73b2360946bd033dadd) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/target/target\_core\_device.c b/drivers/target/target\_core\_device.cindex bf4892544cfdb4..bb84d304b07e57 100644--- a/[drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/target/target_core_device.c?id=76aad69b54fd16855d2fe565cc5f1cdd788fca23)+++ b/[drivers/target/target\_core\_device.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/target/target_core_device.c?id=14a6a2adb440e4ae97bee73b2360946bd033dadd)@@ -691,7 +691,7 @@ struct se\_device \*target\_alloc\_device(struct se\_hba \*hba, const char \*name)  dev->queues = kcalloc(nr\_cpu\_ids, sizeof(\*dev->queues), GFP\_KERNEL); if (!dev->queues) {- dev->transport->free\_device(dev);+ hba->backend->ops->free\_device(dev); return NULL; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:39:10 +0000


