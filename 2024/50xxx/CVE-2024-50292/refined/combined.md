=== Content from git.kernel.org_66643c64_20250114_215340.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4f1d74f74752eab8af6b8b28797dc6490d57374c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4f1d74f74752eab8af6b8b28797dc6490d57374c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4f1d74f74752eab8af6b8b28797dc6490d57374c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4f1d74f74752eab8af6b8b28797dc6490d57374c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Amelie Delaunay <amelie.delaunay@foss.st.com> | 2024-11-05 15:02:42 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:15:13 +0100 |
| commit | [4f1d74f74752eab8af6b8b28797dc6490d57374c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4f1d74f74752eab8af6b8b28797dc6490d57374c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4f1d74f74752eab8af6b8b28797dc6490d57374c)) | |
| tree | [4da52ae679117eca45444ecdd4a3ffd6858918b4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4f1d74f74752eab8af6b8b28797dc6490d57374c) | |
| parent | [2e9a53eef28d1f6ff9d4991825d8cf83e122d9c7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2e9a53eef28d1f6ff9d4991825d8cf83e122d9c7) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4f1d74f74752eab8af6b8b28797dc6490d57374c&id2=2e9a53eef28d1f6ff9d4991825d8cf83e122d9c7)) | |
| download | [linux-4f1d74f74752eab8af6b8b28797dc6490d57374c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4f1d74f74752eab8af6b8b28797dc6490d57374c.tar.gz) | |

ASoC: stm32: spdifrx: fix dma channel release in stm32\_spdifrx\_remove[ Upstream commit 9bb4af400c386374ab1047df44c508512c08c31f ]
In case of error when requesting ctrl\_chan DMA channel, ctrl\_chan is not
null. So the release of the dma channel leads to the following issue:
[ 4.879000] st,stm32-spdifrx 500d0000.audio-controller:
dma\_request\_slave\_channel error -19
[ 4.888975] Unable to handle kernel NULL pointer dereference
at virtual address 000000000000003d
[...]
[ 5.096577] Call trace:
[ 5.099099] dma\_release\_channel+0x24/0x100
[ 5.103235] stm32\_spdifrx\_remove+0x24/0x60 [snd\_soc\_stm32\_spdifrx]
[ 5.109494] stm32\_spdifrx\_probe+0x320/0x4c4 [snd\_soc\_stm32\_spdifrx]
To avoid this issue, release channel only if the pointer is valid.
Fixes: 794df9448edb ("ASoC: stm32: spdifrx: manage rebind issue")
Signed-off-by: Amelie Delaunay <amelie.delaunay@foss.st.com>
Signed-off-by: Olivier Moysan <olivier.moysan@foss.st.com>
Link: [https://patch.msgid.link/20241105140242.527279-1-olivier.moysan@foss.st.com](https://patch.msgid.link/20241105140242.527279-1-olivier.moysan%40foss.st.com)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4f1d74f74752eab8af6b8b28797dc6490d57374c)

| -rw-r--r-- | [sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/stm/stm32_spdifrx.c?id=4f1d74f74752eab8af6b8b28797dc6490d57374c) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/soc/stm/stm32\_spdifrx.c b/sound/soc/stm/stm32\_spdifrx.cindex d399c906bb921a..e66382680e098f 100644--- a/[sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/stm/stm32_spdifrx.c?id=2e9a53eef28d1f6ff9d4991825d8cf83e122d9c7)+++ b/[sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/stm/stm32_spdifrx.c?id=4f1d74f74752eab8af6b8b28797dc6490d57374c)@@ -943,7 +943,7 @@ static int stm32\_spdifrx\_remove(struct platform\_device \*pdev) { struct stm32\_spdifrx\_data \*spdifrx = platform\_get\_drvdata(pdev); - if (spdifrx->ctrl\_chan)+ if (!IS\_ERR(spdifrx->ctrl\_chan)) dma\_release\_channel(spdifrx->ctrl\_chan);  if (spdifrx->dmab) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:52:17 +0000



=== Content from git.kernel.org_119360b8_20250114_215339.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=3a977b554f668382dfba31fd62e4cce4fe5643db)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3a977b554f668382dfba31fd62e4cce4fe5643db)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3a977b554f668382dfba31fd62e4cce4fe5643db)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3a977b554f668382dfba31fd62e4cce4fe5643db)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Amelie Delaunay <amelie.delaunay@foss.st.com> | 2024-11-05 15:02:42 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:59:36 +0100 |
| commit | [3a977b554f668382dfba31fd62e4cce4fe5643db](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3a977b554f668382dfba31fd62e4cce4fe5643db) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=3a977b554f668382dfba31fd62e4cce4fe5643db)) | |
| tree | [8db5e3e71afceb2d4713812b6d534a5e3313b15f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3a977b554f668382dfba31fd62e4cce4fe5643db) | |
| parent | [ac40b9dff2740010ae3fbe298dc10fdcd089b544](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ac40b9dff2740010ae3fbe298dc10fdcd089b544) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3a977b554f668382dfba31fd62e4cce4fe5643db&id2=ac40b9dff2740010ae3fbe298dc10fdcd089b544)) | |
| download | [linux-3a977b554f668382dfba31fd62e4cce4fe5643db.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-3a977b554f668382dfba31fd62e4cce4fe5643db.tar.gz) | |

ASoC: stm32: spdifrx: fix dma channel release in stm32\_spdifrx\_remove[ Upstream commit 9bb4af400c386374ab1047df44c508512c08c31f ]
In case of error when requesting ctrl\_chan DMA channel, ctrl\_chan is not
null. So the release of the dma channel leads to the following issue:
[ 4.879000] st,stm32-spdifrx 500d0000.audio-controller:
dma\_request\_slave\_channel error -19
[ 4.888975] Unable to handle kernel NULL pointer dereference
at virtual address 000000000000003d
[...]
[ 5.096577] Call trace:
[ 5.099099] dma\_release\_channel+0x24/0x100
[ 5.103235] stm32\_spdifrx\_remove+0x24/0x60 [snd\_soc\_stm32\_spdifrx]
[ 5.109494] stm32\_spdifrx\_probe+0x320/0x4c4 [snd\_soc\_stm32\_spdifrx]
To avoid this issue, release channel only if the pointer is valid.
Fixes: 794df9448edb ("ASoC: stm32: spdifrx: manage rebind issue")
Signed-off-by: Amelie Delaunay <amelie.delaunay@foss.st.com>
Signed-off-by: Olivier Moysan <olivier.moysan@foss.st.com>
Link: [https://patch.msgid.link/20241105140242.527279-1-olivier.moysan@foss.st.com](https://patch.msgid.link/20241105140242.527279-1-olivier.moysan%40foss.st.com)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3a977b554f668382dfba31fd62e4cce4fe5643db)

| -rw-r--r-- | [sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/stm/stm32_spdifrx.c?id=3a977b554f668382dfba31fd62e4cce4fe5643db) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/soc/stm/stm32\_spdifrx.c b/sound/soc/stm/stm32\_spdifrx.cindex 1bfa3b2ba9744a..ef518cff84f289 100644--- a/[sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/stm/stm32_spdifrx.c?id=ac40b9dff2740010ae3fbe298dc10fdcd089b544)+++ b/[sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/stm/stm32_spdifrx.c?id=3a977b554f668382dfba31fd62e4cce4fe5643db)@@ -948,7 +948,7 @@ static int stm32\_spdifrx\_remove(struct platform\_device \*pdev) { struct stm32\_spdifrx\_data \*spdifrx = platform\_get\_drvdata(pdev); - if (spdifrx->ctrl\_chan)+ if (!IS\_ERR(spdifrx->ctrl\_chan)) dma\_release\_channel(spdifrx->ctrl\_chan);  if (spdifrx->dmab) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:52:15 +0000



=== Content from git.kernel.org_78e13f5f_20250114_215337.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=23bdbd1ef3e063e03d3c50c15a591b005ebbae39)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=23bdbd1ef3e063e03d3c50c15a591b005ebbae39)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=23bdbd1ef3e063e03d3c50c15a591b005ebbae39)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=23bdbd1ef3e063e03d3c50c15a591b005ebbae39)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Amelie Delaunay <amelie.delaunay@foss.st.com> | 2024-11-05 15:02:42 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:19:34 +0100 |
| commit | [23bdbd1ef3e063e03d3c50c15a591b005ebbae39](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=23bdbd1ef3e063e03d3c50c15a591b005ebbae39) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=23bdbd1ef3e063e03d3c50c15a591b005ebbae39)) | |
| tree | [bc14ef46491522baf2287932efc938f5b7b638af](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=23bdbd1ef3e063e03d3c50c15a591b005ebbae39) | |
| parent | [d3304dbc2d5f8fdcc34915eced7dda1613bc5334](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d3304dbc2d5f8fdcc34915eced7dda1613bc5334) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=23bdbd1ef3e063e03d3c50c15a591b005ebbae39&id2=d3304dbc2d5f8fdcc34915eced7dda1613bc5334)) | |
| download | [linux-23bdbd1ef3e063e03d3c50c15a591b005ebbae39.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-23bdbd1ef3e063e03d3c50c15a591b005ebbae39.tar.gz) | |

ASoC: stm32: spdifrx: fix dma channel release in stm32\_spdifrx\_remove[ Upstream commit 9bb4af400c386374ab1047df44c508512c08c31f ]
In case of error when requesting ctrl\_chan DMA channel, ctrl\_chan is not
null. So the release of the dma channel leads to the following issue:
[ 4.879000] st,stm32-spdifrx 500d0000.audio-controller:
dma\_request\_slave\_channel error -19
[ 4.888975] Unable to handle kernel NULL pointer dereference
at virtual address 000000000000003d
[...]
[ 5.096577] Call trace:
[ 5.099099] dma\_release\_channel+0x24/0x100
[ 5.103235] stm32\_spdifrx\_remove+0x24/0x60 [snd\_soc\_stm32\_spdifrx]
[ 5.109494] stm32\_spdifrx\_probe+0x320/0x4c4 [snd\_soc\_stm32\_spdifrx]
To avoid this issue, release channel only if the pointer is valid.
Fixes: 794df9448edb ("ASoC: stm32: spdifrx: manage rebind issue")
Signed-off-by: Amelie Delaunay <amelie.delaunay@foss.st.com>
Signed-off-by: Olivier Moysan <olivier.moysan@foss.st.com>
Link: [https://patch.msgid.link/20241105140242.527279-1-olivier.moysan@foss.st.com](https://patch.msgid.link/20241105140242.527279-1-olivier.moysan%40foss.st.com)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=23bdbd1ef3e063e03d3c50c15a591b005ebbae39)

| -rw-r--r-- | [sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/stm/stm32_spdifrx.c?id=23bdbd1ef3e063e03d3c50c15a591b005ebbae39) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/soc/stm/stm32\_spdifrx.c b/sound/soc/stm/stm32\_spdifrx.cindex a359b528b26b73..4e17909d21267f 100644--- a/[sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/stm/stm32_spdifrx.c?id=d3304dbc2d5f8fdcc34915eced7dda1613bc5334)+++ b/[sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/stm/stm32_spdifrx.c?id=23bdbd1ef3e063e03d3c50c15a591b005ebbae39)@@ -943,7 +943,7 @@ static void stm32\_spdifrx\_remove(struct platform\_device \*pdev) { struct stm32\_spdifrx\_data \*spdifrx = platform\_get\_drvdata(pdev); - if (spdifrx->ctrl\_chan)+ if (!IS\_ERR(spdifrx->ctrl\_chan)) dma\_release\_channel(spdifrx->ctrl\_chan);  if (spdifrx->dmab) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:52:13 +0000



=== Content from git.kernel.org_7f72baa6_20250114_215341.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=9bb4af400c386374ab1047df44c508512c08c31f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9bb4af400c386374ab1047df44c508512c08c31f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9bb4af400c386374ab1047df44c508512c08c31f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9bb4af400c386374ab1047df44c508512c08c31f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Amelie Delaunay <amelie.delaunay@foss.st.com> | 2024-11-05 15:02:42 +0100 |
| --- | --- | --- |
| committer | Mark Brown <broonie@kernel.org> | 2024-11-05 16:26:03 +0000 |
| commit | [9bb4af400c386374ab1047df44c508512c08c31f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9bb4af400c386374ab1047df44c508512c08c31f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=9bb4af400c386374ab1047df44c508512c08c31f)) | |
| tree | [7b11533c9e1c9872d8f509afbdfbcdb096df95a8](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9bb4af400c386374ab1047df44c508512c08c31f) | |
| parent | [08a3b241adfd90361c16c3e92f5275b816a73f04](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=08a3b241adfd90361c16c3e92f5275b816a73f04) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9bb4af400c386374ab1047df44c508512c08c31f&id2=08a3b241adfd90361c16c3e92f5275b816a73f04)) | |
| download | [linux-9bb4af400c386374ab1047df44c508512c08c31f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-9bb4af400c386374ab1047df44c508512c08c31f.tar.gz) | |

ASoC: stm32: spdifrx: fix dma channel release in stm32\_spdifrx\_removeIn case of error when requesting ctrl\_chan DMA channel, ctrl\_chan is not
null. So the release of the dma channel leads to the following issue:
[ 4.879000] st,stm32-spdifrx 500d0000.audio-controller:
dma\_request\_slave\_channel error -19
[ 4.888975] Unable to handle kernel NULL pointer dereference
at virtual address 000000000000003d
[...]
[ 5.096577] Call trace:
[ 5.099099] dma\_release\_channel+0x24/0x100
[ 5.103235] stm32\_spdifrx\_remove+0x24/0x60 [snd\_soc\_stm32\_spdifrx]
[ 5.109494] stm32\_spdifrx\_probe+0x320/0x4c4 [snd\_soc\_stm32\_spdifrx]
To avoid this issue, release channel only if the pointer is valid.
Fixes: 794df9448edb ("ASoC: stm32: spdifrx: manage rebind issue")
Signed-off-by: Amelie Delaunay <amelie.delaunay@foss.st.com>
Signed-off-by: Olivier Moysan <olivier.moysan@foss.st.com>
Link: [https://patch.msgid.link/20241105140242.527279-1-olivier.moysan@foss.st.com](https://patch.msgid.link/20241105140242.527279-1-olivier.moysan%40foss.st.com)
Signed-off-by: Mark Brown <broonie@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9bb4af400c386374ab1047df44c508512c08c31f)

| -rw-r--r-- | [sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/stm/stm32_spdifrx.c?id=9bb4af400c386374ab1047df44c508512c08c31f) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/soc/stm/stm32\_spdifrx.c b/sound/soc/stm/stm32\_spdifrx.cindex d1b32ba1e1a210..9e30852de93cdf 100644--- a/[sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/stm/stm32_spdifrx.c?id=08a3b241adfd90361c16c3e92f5275b816a73f04)+++ b/[sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/stm/stm32_spdifrx.c?id=9bb4af400c386374ab1047df44c508512c08c31f)@@ -939,7 +939,7 @@ static void stm32\_spdifrx\_remove(struct platform\_device \*pdev) { struct stm32\_spdifrx\_data \*spdifrx = platform\_get\_drvdata(pdev); - if (spdifrx->ctrl\_chan)+ if (!IS\_ERR(spdifrx->ctrl\_chan)) dma\_release\_channel(spdifrx->ctrl\_chan);  if (spdifrx->dmab) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:52:39 +0000



=== Content from git.kernel.org_fb7e6f90_20250114_215335.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=22ae9321054cf7f36c537702af133659f51a0b88)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=22ae9321054cf7f36c537702af133659f51a0b88)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=22ae9321054cf7f36c537702af133659f51a0b88)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=22ae9321054cf7f36c537702af133659f51a0b88)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Amelie Delaunay <amelie.delaunay@foss.st.com> | 2024-11-05 15:02:42 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:21:02 +0100 |
| commit | [22ae9321054cf7f36c537702af133659f51a0b88](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=22ae9321054cf7f36c537702af133659f51a0b88) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=22ae9321054cf7f36c537702af133659f51a0b88)) | |
| tree | [172c2e604e766118de1b2126caceabf3ade60051](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=22ae9321054cf7f36c537702af133659f51a0b88) | |
| parent | [4cf76fe95de4e476adc9c9f6dd2ee3be5ea230e3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4cf76fe95de4e476adc9c9f6dd2ee3be5ea230e3) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=22ae9321054cf7f36c537702af133659f51a0b88&id2=4cf76fe95de4e476adc9c9f6dd2ee3be5ea230e3)) | |
| download | [linux-22ae9321054cf7f36c537702af133659f51a0b88.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-22ae9321054cf7f36c537702af133659f51a0b88.tar.gz) | |

ASoC: stm32: spdifrx: fix dma channel release in stm32\_spdifrx\_remove[ Upstream commit 9bb4af400c386374ab1047df44c508512c08c31f ]
In case of error when requesting ctrl\_chan DMA channel, ctrl\_chan is not
null. So the release of the dma channel leads to the following issue:
[ 4.879000] st,stm32-spdifrx 500d0000.audio-controller:
dma\_request\_slave\_channel error -19
[ 4.888975] Unable to handle kernel NULL pointer dereference
at virtual address 000000000000003d
[...]
[ 5.096577] Call trace:
[ 5.099099] dma\_release\_channel+0x24/0x100
[ 5.103235] stm32\_spdifrx\_remove+0x24/0x60 [snd\_soc\_stm32\_spdifrx]
[ 5.109494] stm32\_spdifrx\_probe+0x320/0x4c4 [snd\_soc\_stm32\_spdifrx]
To avoid this issue, release channel only if the pointer is valid.
Fixes: 794df9448edb ("ASoC: stm32: spdifrx: manage rebind issue")
Signed-off-by: Amelie Delaunay <amelie.delaunay@foss.st.com>
Signed-off-by: Olivier Moysan <olivier.moysan@foss.st.com>
Link: [https://patch.msgid.link/20241105140242.527279-1-olivier.moysan@foss.st.com](https://patch.msgid.link/20241105140242.527279-1-olivier.moysan%40foss.st.com)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=22ae9321054cf7f36c537702af133659f51a0b88)

| -rw-r--r-- | [sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/stm/stm32_spdifrx.c?id=22ae9321054cf7f36c537702af133659f51a0b88) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/soc/stm/stm32\_spdifrx.c b/sound/soc/stm/stm32\_spdifrx.cindex 9eed3c57e3f11c..a438df468571f5 100644--- a/[sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/stm/stm32_spdifrx.c?id=4cf76fe95de4e476adc9c9f6dd2ee3be5ea230e3)+++ b/[sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/stm/stm32_spdifrx.c?id=22ae9321054cf7f36c537702af133659f51a0b88)@@ -939,7 +939,7 @@ static void stm32\_spdifrx\_remove(struct platform\_device \*pdev) { struct stm32\_spdifrx\_data \*spdifrx = platform\_get\_drvdata(pdev); - if (spdifrx->ctrl\_chan)+ if (!IS\_ERR(spdifrx->ctrl\_chan)) dma\_release\_channel(spdifrx->ctrl\_chan);  if (spdifrx->dmab) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:52:12 +0000



=== Content from git.kernel.org_aed5af1e_20250114_215332.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0d75f887aabd80cf37ea48d28f159afa7850ea28)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0d75f887aabd80cf37ea48d28f159afa7850ea28)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0d75f887aabd80cf37ea48d28f159afa7850ea28)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0d75f887aabd80cf37ea48d28f159afa7850ea28)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Amelie Delaunay <amelie.delaunay@foss.st.com> | 2024-11-05 15:02:42 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:13:38 +0100 |
| commit | [0d75f887aabd80cf37ea48d28f159afa7850ea28](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0d75f887aabd80cf37ea48d28f159afa7850ea28) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0d75f887aabd80cf37ea48d28f159afa7850ea28)) | |
| tree | [1aa2446ad04068587e3861a5ba263c8e022a00dd](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0d75f887aabd80cf37ea48d28f159afa7850ea28) | |
| parent | [a511f9bd9871cd89d2806ae6c58baef88e678913](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a511f9bd9871cd89d2806ae6c58baef88e678913) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0d75f887aabd80cf37ea48d28f159afa7850ea28&id2=a511f9bd9871cd89d2806ae6c58baef88e678913)) | |
| download | [linux-0d75f887aabd80cf37ea48d28f159afa7850ea28.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0d75f887aabd80cf37ea48d28f159afa7850ea28.tar.gz) | |

ASoC: stm32: spdifrx: fix dma channel release in stm32\_spdifrx\_remove[ Upstream commit 9bb4af400c386374ab1047df44c508512c08c31f ]
In case of error when requesting ctrl\_chan DMA channel, ctrl\_chan is not
null. So the release of the dma channel leads to the following issue:
[ 4.879000] st,stm32-spdifrx 500d0000.audio-controller:
dma\_request\_slave\_channel error -19
[ 4.888975] Unable to handle kernel NULL pointer dereference
at virtual address 000000000000003d
[...]
[ 5.096577] Call trace:
[ 5.099099] dma\_release\_channel+0x24/0x100
[ 5.103235] stm32\_spdifrx\_remove+0x24/0x60 [snd\_soc\_stm32\_spdifrx]
[ 5.109494] stm32\_spdifrx\_probe+0x320/0x4c4 [snd\_soc\_stm32\_spdifrx]
To avoid this issue, release channel only if the pointer is valid.
Fixes: 794df9448edb ("ASoC: stm32: spdifrx: manage rebind issue")
Signed-off-by: Amelie Delaunay <amelie.delaunay@foss.st.com>
Signed-off-by: Olivier Moysan <olivier.moysan@foss.st.com>
Link: [https://patch.msgid.link/20241105140242.527279-1-olivier.moysan@foss.st.com](https://patch.msgid.link/20241105140242.527279-1-olivier.moysan%40foss.st.com)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0d75f887aabd80cf37ea48d28f159afa7850ea28)

| -rw-r--r-- | [sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/stm/stm32_spdifrx.c?id=0d75f887aabd80cf37ea48d28f159afa7850ea28) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/soc/stm/stm32\_spdifrx.c b/sound/soc/stm/stm32\_spdifrx.cindex 48145f55358802..e3d6258afbac8a 100644--- a/[sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/stm/stm32_spdifrx.c?id=a511f9bd9871cd89d2806ae6c58baef88e678913)+++ b/[sound/soc/stm/stm32\_spdifrx.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/stm/stm32_spdifrx.c?id=0d75f887aabd80cf37ea48d28f159afa7850ea28)@@ -947,7 +947,7 @@ static int stm32\_spdifrx\_remove(struct platform\_device \*pdev) { struct stm32\_spdifrx\_data \*spdifrx = platform\_get\_drvdata(pdev); - if (spdifrx->ctrl\_chan)+ if (!IS\_ERR(spdifrx->ctrl\_chan)) dma\_release\_channel(spdifrx->ctrl\_chan);  if (spdifrx->dmab) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:52:39 +0000


