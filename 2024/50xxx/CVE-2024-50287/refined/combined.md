=== Content from git.kernel.org_901e6e29_20250114_185121.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e6a3ea83fbe15d4818d01804e904cbb0e64e543b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e6a3ea83fbe15d4818d01804e904cbb0e64e543b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e6a3ea83fbe15d4818d01804e904cbb0e64e543b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e6a3ea83fbe15d4818d01804e904cbb0e64e543b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Mauro Carvalho Chehab <mchehab+huawei@kernel.org> | 2024-10-16 11:53:15 +0200 |
| --- | --- | --- |
| committer | Mauro Carvalho Chehab <mchehab+huawei@kernel.org> | 2024-10-18 10:43:03 +0200 |
| commit | [e6a3ea83fbe15d4818d01804e904cbb0e64e543b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e6a3ea83fbe15d4818d01804e904cbb0e64e543b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e6a3ea83fbe15d4818d01804e904cbb0e64e543b)) | |
| tree | [35b6f63a63684df5b7779dcc991d4a2c49ed469d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e6a3ea83fbe15d4818d01804e904cbb0e64e543b) | |
| parent | [4c76f331a9a173ac8fe1297a9231c2a38f88e368](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4c76f331a9a173ac8fe1297a9231c2a38f88e368) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e6a3ea83fbe15d4818d01804e904cbb0e64e543b&id2=4c76f331a9a173ac8fe1297a9231c2a38f88e368)) | |
| download | [linux-e6a3ea83fbe15d4818d01804e904cbb0e64e543b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e6a3ea83fbe15d4818d01804e904cbb0e64e543b.tar.gz) | |

media: v4l2-tpg: prevent the risk of a division by zeroAs reported by Coverity, the logic at tpg\_precalculate\_line()
blindly rescales the buffer even when scaled\_witdh is equal to
zero. If this ever happens, this will cause a division by zero.
Instead, add a WARN\_ON\_ONCE() to trigger such cases and return
without doing any precalculation.
Fixes: 63881df94d3e ("[media] vivid: add the Test Pattern Generator")
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e6a3ea83fbe15d4818d01804e904cbb0e64e543b)

| -rw-r--r-- | [drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=e6a3ea83fbe15d4818d01804e904cbb0e64e543b) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c b/drivers/media/common/v4l2-tpg/v4l2-tpg-core.cindex 642c48e8c1f584..ded11cd8dbf7c6 100644--- a/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=4c76f331a9a173ac8fe1297a9231c2a38f88e368)+++ b/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=e6a3ea83fbe15d4818d01804e904cbb0e64e543b)@@ -1795,6 +1795,9 @@ static void tpg\_precalculate\_line(struct tpg\_data \*tpg) unsigned p; unsigned x; + if (WARN\_ON\_ONCE(!tpg->src\_width || !tpg->scaled\_width))+ return;+ switch (tpg->pattern) { case TPG\_PAT\_GREEN: contrast = TPG\_COLOR\_100\_RED; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:49:58 +0000



=== Content from git.kernel.org_c6b40393_20250114_185118.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0bfc6e38ee2250f0503d96f1a1de441c31d88715)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0bfc6e38ee2250f0503d96f1a1de441c31d88715)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0bfc6e38ee2250f0503d96f1a1de441c31d88715)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0bfc6e38ee2250f0503d96f1a1de441c31d88715)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Mauro Carvalho Chehab <mchehab+huawei@kernel.org> | 2024-10-16 11:53:15 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:58:51 +0100 |
| commit | [0bfc6e38ee2250f0503d96f1a1de441c31d88715](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0bfc6e38ee2250f0503d96f1a1de441c31d88715) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0bfc6e38ee2250f0503d96f1a1de441c31d88715)) | |
| tree | [bd9b2df1e37c8966151a51e70860938fdd2a8151](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0bfc6e38ee2250f0503d96f1a1de441c31d88715) | |
| parent | [cad97ca8cfd43a78a19b59949f33e3563d369247](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cad97ca8cfd43a78a19b59949f33e3563d369247) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0bfc6e38ee2250f0503d96f1a1de441c31d88715&id2=cad97ca8cfd43a78a19b59949f33e3563d369247)) | |
| download | [linux-0bfc6e38ee2250f0503d96f1a1de441c31d88715.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0bfc6e38ee2250f0503d96f1a1de441c31d88715.tar.gz) | |

media: v4l2-tpg: prevent the risk of a division by zerocommit e6a3ea83fbe15d4818d01804e904cbb0e64e543b upstream.
As reported by Coverity, the logic at tpg\_precalculate\_line()
blindly rescales the buffer even when scaled\_witdh is equal to
zero. If this ever happens, this will cause a division by zero.
Instead, add a WARN\_ON\_ONCE() to trigger such cases and return
without doing any precalculation.
Fixes: 63881df94d3e ("[media] vivid: add the Test Pattern Generator")
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0bfc6e38ee2250f0503d96f1a1de441c31d88715)

| -rw-r--r-- | [drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=0bfc6e38ee2250f0503d96f1a1de441c31d88715) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c b/drivers/media/common/v4l2-tpg/v4l2-tpg-core.cindex a4d729a4f33010..1e4e91510396ef 100644--- a/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=cad97ca8cfd43a78a19b59949f33e3563d369247)+++ b/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=0bfc6e38ee2250f0503d96f1a1de441c31d88715)@@ -1789,6 +1789,9 @@ static void tpg\_precalculate\_line(struct tpg\_data \*tpg) unsigned p; unsigned x; + if (WARN\_ON\_ONCE(!tpg->src\_width || !tpg->scaled\_width))+ return;+ switch (tpg->pattern) { case TPG\_PAT\_GREEN: contrast = TPG\_COLOR\_100\_RED; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:49:55 +0000



=== Content from git.kernel.org_984ff6e1_20250114_185117.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=054931ca3cfcb8e8fa036e887d6f379942b02565)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=054931ca3cfcb8e8fa036e887d6f379942b02565)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=054931ca3cfcb8e8fa036e887d6f379942b02565)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=054931ca3cfcb8e8fa036e887d6f379942b02565)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Mauro Carvalho Chehab <mchehab+huawei@kernel.org> | 2024-10-16 11:53:15 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:59:36 +0100 |
| commit | [054931ca3cfcb8e8fa036e887d6f379942b02565](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=054931ca3cfcb8e8fa036e887d6f379942b02565) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=054931ca3cfcb8e8fa036e887d6f379942b02565)) | |
| tree | [f1cfa92e3b88ce6e4766120c6d8ad824b2cbf66e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=054931ca3cfcb8e8fa036e887d6f379942b02565) | |
| parent | [5a9bd375bf884d928d6f954d3ab328d2f84024a9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5a9bd375bf884d928d6f954d3ab328d2f84024a9) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=054931ca3cfcb8e8fa036e887d6f379942b02565&id2=5a9bd375bf884d928d6f954d3ab328d2f84024a9)) | |
| download | [linux-054931ca3cfcb8e8fa036e887d6f379942b02565.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-054931ca3cfcb8e8fa036e887d6f379942b02565.tar.gz) | |

media: v4l2-tpg: prevent the risk of a division by zerocommit e6a3ea83fbe15d4818d01804e904cbb0e64e543b upstream.
As reported by Coverity, the logic at tpg\_precalculate\_line()
blindly rescales the buffer even when scaled\_witdh is equal to
zero. If this ever happens, this will cause a division by zero.
Instead, add a WARN\_ON\_ONCE() to trigger such cases and return
without doing any precalculation.
Fixes: 63881df94d3e ("[media] vivid: add the Test Pattern Generator")
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=054931ca3cfcb8e8fa036e887d6f379942b02565)

| -rw-r--r-- | [drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=054931ca3cfcb8e8fa036e887d6f379942b02565) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c b/drivers/media/common/v4l2-tpg/v4l2-tpg-core.cindex 68968bfa2edc18..533c8bb8fd886d 100644--- a/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=5a9bd375bf884d928d6f954d3ab328d2f84024a9)+++ b/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=054931ca3cfcb8e8fa036e887d6f379942b02565)@@ -1789,6 +1789,9 @@ static void tpg\_precalculate\_line(struct tpg\_data \*tpg) unsigned p; unsigned x; + if (WARN\_ON\_ONCE(!tpg->src\_width || !tpg->scaled\_width))+ return;+ switch (tpg->pattern) { case TPG\_PAT\_GREEN: contrast = TPG\_COLOR\_100\_RED; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:49:54 +0000



=== Content from git.kernel.org_8774487f_20250114_185119.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Mauro Carvalho Chehab <mchehab+huawei@kernel.org> | 2024-10-16 11:53:15 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:13:38 +0100 |
| commit | [a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47)) | |
| tree | [dc235ffb436b003202a48aa759962e92b2dbf8f1](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47) | |
| parent | [190cd772840805127455cbe9bee7b774c228685d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=190cd772840805127455cbe9bee7b774c228685d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47&id2=190cd772840805127455cbe9bee7b774c228685d)) | |
| download | [linux-a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47.tar.gz) | |

media: v4l2-tpg: prevent the risk of a division by zerocommit e6a3ea83fbe15d4818d01804e904cbb0e64e543b upstream.
As reported by Coverity, the logic at tpg\_precalculate\_line()
blindly rescales the buffer even when scaled\_witdh is equal to
zero. If this ever happens, this will cause a division by zero.
Instead, add a WARN\_ON\_ONCE() to trigger such cases and return
without doing any precalculation.
Fixes: 63881df94d3e ("[media] vivid: add the Test Pattern Generator")
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47)

| -rw-r--r-- | [drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c b/drivers/media/common/v4l2-tpg/v4l2-tpg-core.cindex 68968bfa2edc18..533c8bb8fd886d 100644--- a/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=190cd772840805127455cbe9bee7b774c228685d)+++ b/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=a749c15dccc58d9cbad9cd23bd8ab4b5fa96cf47)@@ -1789,6 +1789,9 @@ static void tpg\_precalculate\_line(struct tpg\_data \*tpg) unsigned p; unsigned x; + if (WARN\_ON\_ONCE(!tpg->src\_width || !tpg->scaled\_width))+ return;+ switch (tpg->pattern) { case TPG\_PAT\_GREEN: contrast = TPG\_COLOR\_100\_RED; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:49:56 +0000



=== Content from git.kernel.org_7cde3f79_20250114_185119.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Mauro Carvalho Chehab <mchehab+huawei@kernel.org> | 2024-10-16 11:53:15 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:19:34 +0100 |
| commit | [2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47)) | |
| tree | [93cd7d1aa2c1ab3fe8056d9301a44c95de7935fb](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47) | |
| parent | [4264e26a34e3901a41e00bcd5e77bb3938497ff7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4264e26a34e3901a41e00bcd5e77bb3938497ff7) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47&id2=4264e26a34e3901a41e00bcd5e77bb3938497ff7)) | |
| download | [linux-2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47.tar.gz) | |

media: v4l2-tpg: prevent the risk of a division by zerocommit e6a3ea83fbe15d4818d01804e904cbb0e64e543b upstream.
As reported by Coverity, the logic at tpg\_precalculate\_line()
blindly rescales the buffer even when scaled\_witdh is equal to
zero. If this ever happens, this will cause a division by zero.
Instead, add a WARN\_ON\_ONCE() to trigger such cases and return
without doing any precalculation.
Fixes: 63881df94d3e ("[media] vivid: add the Test Pattern Generator")
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47)

| -rw-r--r-- | [drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c b/drivers/media/common/v4l2-tpg/v4l2-tpg-core.cindex 642c48e8c1f584..ded11cd8dbf7c6 100644--- a/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=4264e26a34e3901a41e00bcd5e77bb3938497ff7)+++ b/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=2d0f01aa602fd15a805771bdf3f4d9a9b4df7f47)@@ -1795,6 +1795,9 @@ static void tpg\_precalculate\_line(struct tpg\_data \*tpg) unsigned p; unsigned x; + if (WARN\_ON\_ONCE(!tpg->src\_width || !tpg->scaled\_width))+ return;+ switch (tpg->pattern) { case TPG\_PAT\_GREEN: contrast = TPG\_COLOR\_100\_RED; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:49:56 +0000



=== Content from git.kernel.org_baf55f6b_20250114_185120.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c63c30c9d9f2c8de34b16cd2b8400240533b914e)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c63c30c9d9f2c8de34b16cd2b8400240533b914e)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c63c30c9d9f2c8de34b16cd2b8400240533b914e)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c63c30c9d9f2c8de34b16cd2b8400240533b914e)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Mauro Carvalho Chehab <mchehab+huawei@kernel.org> | 2024-10-16 11:53:15 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:15:14 +0100 |
| commit | [c63c30c9d9f2c8de34b16cd2b8400240533b914e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c63c30c9d9f2c8de34b16cd2b8400240533b914e) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c63c30c9d9f2c8de34b16cd2b8400240533b914e)) | |
| tree | [63ef78f2b723669178ce7d541130963bea80eec4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c63c30c9d9f2c8de34b16cd2b8400240533b914e) | |
| parent | [4b132a464f9fa23f3c1d28de9679a525bb10c99c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4b132a464f9fa23f3c1d28de9679a525bb10c99c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c63c30c9d9f2c8de34b16cd2b8400240533b914e&id2=4b132a464f9fa23f3c1d28de9679a525bb10c99c)) | |
| download | [linux-c63c30c9d9f2c8de34b16cd2b8400240533b914e.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c63c30c9d9f2c8de34b16cd2b8400240533b914e.tar.gz) | |

media: v4l2-tpg: prevent the risk of a division by zerocommit e6a3ea83fbe15d4818d01804e904cbb0e64e543b upstream.
As reported by Coverity, the logic at tpg\_precalculate\_line()
blindly rescales the buffer even when scaled\_witdh is equal to
zero. If this ever happens, this will cause a division by zero.
Instead, add a WARN\_ON\_ONCE() to trigger such cases and return
without doing any precalculation.
Fixes: 63881df94d3e ("[media] vivid: add the Test Pattern Generator")
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c63c30c9d9f2c8de34b16cd2b8400240533b914e)

| -rw-r--r-- | [drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=c63c30c9d9f2c8de34b16cd2b8400240533b914e) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c b/drivers/media/common/v4l2-tpg/v4l2-tpg-core.cindex fe30f5b0050dd9..a635ce4cd64304 100644--- a/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=4b132a464f9fa23f3c1d28de9679a525bb10c99c)+++ b/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=c63c30c9d9f2c8de34b16cd2b8400240533b914e)@@ -1795,6 +1795,9 @@ static void tpg\_precalculate\_line(struct tpg\_data \*tpg) unsigned p; unsigned x; + if (WARN\_ON\_ONCE(!tpg->src\_width || !tpg->scaled\_width))+ return;+ switch (tpg->pattern) { case TPG\_PAT\_GREEN: contrast = TPG\_COLOR\_100\_RED; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:49:57 +0000



=== Content from git.kernel.org_6509dcbd_20250114_185118.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Mauro Carvalho Chehab <mchehab+huawei@kernel.org> | 2024-10-16 11:53:15 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:21:03 +0100 |
| commit | [0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21)) | |
| tree | [61f5a164a1d9c371488afe6be87e508cebd529eb](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21) | |
| parent | [e6bacd8f2178b22859fe6d9f755f19dfcd9d3862](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e6bacd8f2178b22859fe6d9f755f19dfcd9d3862) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21&id2=e6bacd8f2178b22859fe6d9f755f19dfcd9d3862)) | |
| download | [linux-0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21.tar.gz) | |

media: v4l2-tpg: prevent the risk of a division by zerocommit e6a3ea83fbe15d4818d01804e904cbb0e64e543b upstream.
As reported by Coverity, the logic at tpg\_precalculate\_line()
blindly rescales the buffer even when scaled\_witdh is equal to
zero. If this ever happens, this will cause a division by zero.
Instead, add a WARN\_ON\_ONCE() to trigger such cases and return
without doing any precalculation.
Fixes: 63881df94d3e ("[media] vivid: add the Test Pattern Generator")
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21)

| -rw-r--r-- | [drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c b/drivers/media/common/v4l2-tpg/v4l2-tpg-core.cindex 642c48e8c1f584..ded11cd8dbf7c6 100644--- a/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=e6bacd8f2178b22859fe6d9f755f19dfcd9d3862)+++ b/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=0cdb42ba0b28f548c1a4e86bb8489dba0d78fc21)@@ -1795,6 +1795,9 @@ static void tpg\_precalculate\_line(struct tpg\_data \*tpg) unsigned p; unsigned x; + if (WARN\_ON\_ONCE(!tpg->src\_width || !tpg->scaled\_width))+ return;+ switch (tpg->pattern) { case TPG\_PAT\_GREEN: contrast = TPG\_COLOR\_100\_RED; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:49:55 +0000



=== Content from git.kernel.org_912fd8c3_20250114_185121.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Mauro Carvalho Chehab <mchehab+huawei@kernel.org> | 2024-10-16 11:53:15 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:58:06 +0100 |
| commit | [e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a)) | |
| tree | [c5cb58fe32a888b5081cba46bf1e4e15a9ebe2bb](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a) | |
| parent | [127b9076baeadd734b18ddc8f2cd93b47d5a3ea3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=127b9076baeadd734b18ddc8f2cd93b47d5a3ea3) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a&id2=127b9076baeadd734b18ddc8f2cd93b47d5a3ea3)) | |
| download | [linux-e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a.tar.gz) | |

media: v4l2-tpg: prevent the risk of a division by zerocommit e6a3ea83fbe15d4818d01804e904cbb0e64e543b upstream.
As reported by Coverity, the logic at tpg\_precalculate\_line()
blindly rescales the buffer even when scaled\_witdh is equal to
zero. If this ever happens, this will cause a division by zero.
Instead, add a WARN\_ON\_ONCE() to trigger such cases and return
without doing any precalculation.
Fixes: 63881df94d3e ("[media] vivid: add the Test Pattern Generator")
Cc: stable@vger.kernel.org
Signed-off-by: Mauro Carvalho Chehab <mchehab+huawei@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a)

| -rw-r--r-- | [drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c b/drivers/media/common/v4l2-tpg/v4l2-tpg-core.cindex 182a300e2d445c..84f8ca9bf0282f 100644--- a/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=127b9076baeadd734b18ddc8f2cd93b47d5a3ea3)+++ b/[drivers/media/common/v4l2-tpg/v4l2-tpg-core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/common/v4l2-tpg/v4l2-tpg-core.c?id=e3c36d0bde309f690ed1f9cd5f7e63b3a513f94a)@@ -1639,6 +1639,9 @@ static void tpg\_precalculate\_line(struct tpg\_data \*tpg) unsigned p; unsigned x; + if (WARN\_ON\_ONCE(!tpg->src\_width || !tpg->scaled\_width))+ return;+ switch (tpg->pattern) { case TPG\_PAT\_GREEN: contrast = TPG\_COLOR\_100\_RED; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:49:58 +0000


