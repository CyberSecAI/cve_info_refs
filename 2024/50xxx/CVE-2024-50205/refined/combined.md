=== Content from git.kernel.org_2236d312_20250114_204017.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d2826873db70a6719cdd9212a6739f3e6234cfc4)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d2826873db70a6719cdd9212a6739f3e6234cfc4)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d2826873db70a6719cdd9212a6739f3e6234cfc4)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d2826873db70a6719cdd9212a6739f3e6234cfc4)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Andrey Shumilin <shum.sdl@nppct.ru> | 2024-10-18 09:00:18 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 01:56:05 +0100 |
| commit | [d2826873db70a6719cdd9212a6739f3e6234cfc4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d2826873db70a6719cdd9212a6739f3e6234cfc4) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d2826873db70a6719cdd9212a6739f3e6234cfc4)) | |
| tree | [105b1f1c8b2fd5f4144acb9056cd60f2e947a51d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d2826873db70a6719cdd9212a6739f3e6234cfc4) | |
| parent | [02753a90102cbfa465d09c5aa91350655254ef54](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=02753a90102cbfa465d09c5aa91350655254ef54) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d2826873db70a6719cdd9212a6739f3e6234cfc4&id2=02753a90102cbfa465d09c5aa91350655254ef54)) | |
| download | [linux-d2826873db70a6719cdd9212a6739f3e6234cfc4.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d2826873db70a6719cdd9212a6739f3e6234cfc4.tar.gz) | |

ALSA: firewire-lib: Avoid division by zero in apply\_constraint\_to\_size()[ Upstream commit 72cafe63b35d06b5cfbaf807e90ae657907858da ]
The step variable is initialized to zero. It is changed in the loop,
but if it's not changed it will remain zero. Add a variable check
before the division.
The observed behavior was introduced by commit 826b5de90c0b
("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size"),
and it is difficult to show that any of the interval parameters will
satisfy the snd\_interval\_test() condition with data from the
amdtp\_rate\_table[] table.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: 826b5de90c0b ("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size")
Signed-off-by: Andrey Shumilin <shum.sdl@nppct.ru>
Reviewed-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>
Link: [https://patch.msgid.link/20241018060018.1189537-1-shum.sdl@nppct.ru](https://patch.msgid.link/20241018060018.1189537-1-shum.sdl%40nppct.ru)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d2826873db70a6719cdd9212a6739f3e6234cfc4)

| -rw-r--r-- | [sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/firewire/amdtp-stream.c?id=d2826873db70a6719cdd9212a6739f3e6234cfc4) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/sound/firewire/amdtp-stream.c b/sound/firewire/amdtp-stream.cindex 842fe127c53781..b5b3b4d177aafc 100644--- a/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=02753a90102cbfa465d09c5aa91350655254ef54)+++ b/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=d2826873db70a6719cdd9212a6739f3e6234cfc4)@@ -172,6 +172,9 @@ static int apply\_constraint\_to\_size(struct snd\_pcm\_hw\_params \*params, step = max(step, amdtp\_syt\_intervals[i]); } + if (step == 0)+ return -EINVAL;+ t.min = roundup(s->min, step); t.max = rounddown(s->max, step); t.integer = 1; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:38:54 +0000



=== Content from git.kernel.org_14e0dc5f_20250114_204014.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=3452d39c4704aa12504e4190298c721fb01083c3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3452d39c4704aa12504e4190298c721fb01083c3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3452d39c4704aa12504e4190298c721fb01083c3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3452d39c4704aa12504e4190298c721fb01083c3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Andrey Shumilin <shum.sdl@nppct.ru> | 2024-10-18 09:00:18 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 02:02:39 +0100 |
| commit | [3452d39c4704aa12504e4190298c721fb01083c3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3452d39c4704aa12504e4190298c721fb01083c3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=3452d39c4704aa12504e4190298c721fb01083c3)) | |
| tree | [292f569d4a4752bc181b549f2bd7e476ec272da3](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3452d39c4704aa12504e4190298c721fb01083c3) | |
| parent | [e64298aaf4ea1fc08a4c4b60fa9d3797b8d61d2c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e64298aaf4ea1fc08a4c4b60fa9d3797b8d61d2c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3452d39c4704aa12504e4190298c721fb01083c3&id2=e64298aaf4ea1fc08a4c4b60fa9d3797b8d61d2c)) | |
| download | [linux-3452d39c4704aa12504e4190298c721fb01083c3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-3452d39c4704aa12504e4190298c721fb01083c3.tar.gz) | |

ALSA: firewire-lib: Avoid division by zero in apply\_constraint\_to\_size()[ Upstream commit 72cafe63b35d06b5cfbaf807e90ae657907858da ]
The step variable is initialized to zero. It is changed in the loop,
but if it's not changed it will remain zero. Add a variable check
before the division.
The observed behavior was introduced by commit 826b5de90c0b
("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size"),
and it is difficult to show that any of the interval parameters will
satisfy the snd\_interval\_test() condition with data from the
amdtp\_rate\_table[] table.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: 826b5de90c0b ("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size")
Signed-off-by: Andrey Shumilin <shum.sdl@nppct.ru>
Reviewed-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>
Link: [https://patch.msgid.link/20241018060018.1189537-1-shum.sdl@nppct.ru](https://patch.msgid.link/20241018060018.1189537-1-shum.sdl%40nppct.ru)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3452d39c4704aa12504e4190298c721fb01083c3)

| -rw-r--r-- | [sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/firewire/amdtp-stream.c?id=3452d39c4704aa12504e4190298c721fb01083c3) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/sound/firewire/amdtp-stream.c b/sound/firewire/amdtp-stream.cindex c827d7d8d80035..ea3a7d69f1c461 100644--- a/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=e64298aaf4ea1fc08a4c4b60fa9d3797b8d61d2c)+++ b/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=3452d39c4704aa12504e4190298c721fb01083c3)@@ -172,6 +172,9 @@ static int apply\_constraint\_to\_size(struct snd\_pcm\_hw\_params \*params, step = max(step, amdtp\_syt\_intervals[i]); } + if (step == 0)+ return -EINVAL;+ t.min = roundup(s->min, step); t.max = rounddown(s->max, step); t.integer = 1; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:38:51 +0000



=== Content from git.kernel.org_3a8edb9b_20250114_204016.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=72cafe63b35d06b5cfbaf807e90ae657907858da)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=72cafe63b35d06b5cfbaf807e90ae657907858da)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=72cafe63b35d06b5cfbaf807e90ae657907858da)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=72cafe63b35d06b5cfbaf807e90ae657907858da)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Andrey Shumilin <shum.sdl@nppct.ru> | 2024-10-18 09:00:18 +0300 |
| --- | --- | --- |
| committer | Takashi Iwai <tiwai@suse.de> | 2024-10-21 09:09:21 +0200 |
| commit | [72cafe63b35d06b5cfbaf807e90ae657907858da](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=72cafe63b35d06b5cfbaf807e90ae657907858da) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=72cafe63b35d06b5cfbaf807e90ae657907858da)) | |
| tree | [a572477f0375e0ea8bf20b6ed3932cf7a2dd18f0](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=72cafe63b35d06b5cfbaf807e90ae657907858da) | |
| parent | [164cd0e077a18d6208523c82b102c98c77fdd51f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=164cd0e077a18d6208523c82b102c98c77fdd51f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=72cafe63b35d06b5cfbaf807e90ae657907858da&id2=164cd0e077a18d6208523c82b102c98c77fdd51f)) | |
| download | [linux-72cafe63b35d06b5cfbaf807e90ae657907858da.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-72cafe63b35d06b5cfbaf807e90ae657907858da.tar.gz) | |

ALSA: firewire-lib: Avoid division by zero in apply\_constraint\_to\_size()The step variable is initialized to zero. It is changed in the loop,
but if it's not changed it will remain zero. Add a variable check
before the division.
The observed behavior was introduced by commit 826b5de90c0b
("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size"),
and it is difficult to show that any of the interval parameters will
satisfy the snd\_interval\_test() condition with data from the
amdtp\_rate\_table[] table.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: 826b5de90c0b ("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size")
Signed-off-by: Andrey Shumilin <shum.sdl@nppct.ru>
Reviewed-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>
Link: [https://patch.msgid.link/20241018060018.1189537-1-shum.sdl@nppct.ru](https://patch.msgid.link/20241018060018.1189537-1-shum.sdl%40nppct.ru)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=72cafe63b35d06b5cfbaf807e90ae657907858da)

| -rw-r--r-- | [sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/firewire/amdtp-stream.c?id=72cafe63b35d06b5cfbaf807e90ae657907858da) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/sound/firewire/amdtp-stream.c b/sound/firewire/amdtp-stream.cindex c72b2a75477598..7fc51f829eccac 100644--- a/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=164cd0e077a18d6208523c82b102c98c77fdd51f)+++ b/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=72cafe63b35d06b5cfbaf807e90ae657907858da)@@ -172,6 +172,9 @@ static int apply\_constraint\_to\_size(struct snd\_pcm\_hw\_params \*params, step = max(step, amdtp\_syt\_intervals[i]); } + if (step == 0)+ return -EINVAL;+ t.min = roundup(s->min, step); t.max = rounddown(s->max, step); t.integer = 1; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:38:53 +0000



=== Content from git.kernel.org_d9834bb0_20250114_204015.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4bdc21506f12b2d432b1f2667e5ff4c75eee58e3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4bdc21506f12b2d432b1f2667e5ff4c75eee58e3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4bdc21506f12b2d432b1f2667e5ff4c75eee58e3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4bdc21506f12b2d432b1f2667e5ff4c75eee58e3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Andrey Shumilin <shum.sdl@nppct.ru> | 2024-10-18 09:00:18 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 01:58:31 +0100 |
| commit | [4bdc21506f12b2d432b1f2667e5ff4c75eee58e3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4bdc21506f12b2d432b1f2667e5ff4c75eee58e3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4bdc21506f12b2d432b1f2667e5ff4c75eee58e3)) | |
| tree | [45a0453b641cf3af8770168d168cf6e9228a9222](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4bdc21506f12b2d432b1f2667e5ff4c75eee58e3) | |
| parent | [8b339beb7cfe8e945e45f9384927ed05fb8d180d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8b339beb7cfe8e945e45f9384927ed05fb8d180d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4bdc21506f12b2d432b1f2667e5ff4c75eee58e3&id2=8b339beb7cfe8e945e45f9384927ed05fb8d180d)) | |
| download | [linux-4bdc21506f12b2d432b1f2667e5ff4c75eee58e3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4bdc21506f12b2d432b1f2667e5ff4c75eee58e3.tar.gz) | |

ALSA: firewire-lib: Avoid division by zero in apply\_constraint\_to\_size()[ Upstream commit 72cafe63b35d06b5cfbaf807e90ae657907858da ]
The step variable is initialized to zero. It is changed in the loop,
but if it's not changed it will remain zero. Add a variable check
before the division.
The observed behavior was introduced by commit 826b5de90c0b
("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size"),
and it is difficult to show that any of the interval parameters will
satisfy the snd\_interval\_test() condition with data from the
amdtp\_rate\_table[] table.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: 826b5de90c0b ("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size")
Signed-off-by: Andrey Shumilin <shum.sdl@nppct.ru>
Reviewed-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>
Link: [https://patch.msgid.link/20241018060018.1189537-1-shum.sdl@nppct.ru](https://patch.msgid.link/20241018060018.1189537-1-shum.sdl%40nppct.ru)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4bdc21506f12b2d432b1f2667e5ff4c75eee58e3)

| -rw-r--r-- | [sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/firewire/amdtp-stream.c?id=4bdc21506f12b2d432b1f2667e5ff4c75eee58e3) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/sound/firewire/amdtp-stream.c b/sound/firewire/amdtp-stream.cindex 5f0f8d9c08d1e7..8c6254ff143eb4 100644--- a/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=8b339beb7cfe8e945e45f9384927ed05fb8d180d)+++ b/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=4bdc21506f12b2d432b1f2667e5ff4c75eee58e3)@@ -172,6 +172,9 @@ static int apply\_constraint\_to\_size(struct snd\_pcm\_hw\_params \*params, step = max(step, amdtp\_syt\_intervals[i]); } + if (step == 0)+ return -EINVAL;+ t.min = roundup(s->min, step); t.max = rounddown(s->max, step); t.integer = 1; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:38:52 +0000



=== Content from git.kernel.org_2fea0a94_20250114_204015.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=5e431f85c87bbffd93a9830d5a576586f9855291)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5e431f85c87bbffd93a9830d5a576586f9855291)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5e431f85c87bbffd93a9830d5a576586f9855291)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5e431f85c87bbffd93a9830d5a576586f9855291)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Andrey Shumilin <shum.sdl@nppct.ru> | 2024-10-18 09:00:18 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:21:59 +0100 |
| commit | [5e431f85c87bbffd93a9830d5a576586f9855291](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5e431f85c87bbffd93a9830d5a576586f9855291) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=5e431f85c87bbffd93a9830d5a576586f9855291)) | |
| tree | [847d120ad13bf6e5cc6227a71b9e622764296410](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5e431f85c87bbffd93a9830d5a576586f9855291) | |
| parent | [c7fcfdba35abc9f39b83080c2bce398dad13a943](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c7fcfdba35abc9f39b83080c2bce398dad13a943) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5e431f85c87bbffd93a9830d5a576586f9855291&id2=c7fcfdba35abc9f39b83080c2bce398dad13a943)) | |
| download | [linux-5e431f85c87bbffd93a9830d5a576586f9855291.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-5e431f85c87bbffd93a9830d5a576586f9855291.tar.gz) | |

ALSA: firewire-lib: Avoid division by zero in apply\_constraint\_to\_size()[ Upstream commit 72cafe63b35d06b5cfbaf807e90ae657907858da ]
The step variable is initialized to zero. It is changed in the loop,
but if it's not changed it will remain zero. Add a variable check
before the division.
The observed behavior was introduced by commit 826b5de90c0b
("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size"),
and it is difficult to show that any of the interval parameters will
satisfy the snd\_interval\_test() condition with data from the
amdtp\_rate\_table[] table.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: 826b5de90c0b ("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size")
Signed-off-by: Andrey Shumilin <shum.sdl@nppct.ru>
Reviewed-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>
Link: [https://patch.msgid.link/20241018060018.1189537-1-shum.sdl@nppct.ru](https://patch.msgid.link/20241018060018.1189537-1-shum.sdl%40nppct.ru)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5e431f85c87bbffd93a9830d5a576586f9855291)

| -rw-r--r-- | [sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/firewire/amdtp-stream.c?id=5e431f85c87bbffd93a9830d5a576586f9855291) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/sound/firewire/amdtp-stream.c b/sound/firewire/amdtp-stream.cindex 7a282d8e714854..bd272ab2048e4e 100644--- a/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=c7fcfdba35abc9f39b83080c2bce398dad13a943)+++ b/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=5e431f85c87bbffd93a9830d5a576586f9855291)@@ -163,6 +163,9 @@ static int apply\_constraint\_to\_size(struct snd\_pcm\_hw\_params \*params, step = max(step, amdtp\_syt\_intervals[i]); } + if (step == 0)+ return -EINVAL;+ t.min = roundup(s->min, step); t.max = rounddown(s->max, step); t.integer = 1; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:38:52 +0000



=== Content from git.kernel.org_b64e4401_20250114_204017.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d575414361630b8b0523912532fcd7c79e43468c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d575414361630b8b0523912532fcd7c79e43468c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d575414361630b8b0523912532fcd7c79e43468c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d575414361630b8b0523912532fcd7c79e43468c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Andrey Shumilin <shum.sdl@nppct.ru> | 2024-10-18 09:00:18 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:20:51 +0100 |
| commit | [d575414361630b8b0523912532fcd7c79e43468c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d575414361630b8b0523912532fcd7c79e43468c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d575414361630b8b0523912532fcd7c79e43468c)) | |
| tree | [7e285969c56a01e3fc78a945b9da6668ee5e8b1e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d575414361630b8b0523912532fcd7c79e43468c) | |
| parent | [a8219446b95a859488feaade674d13f9efacfa32](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a8219446b95a859488feaade674d13f9efacfa32) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d575414361630b8b0523912532fcd7c79e43468c&id2=a8219446b95a859488feaade674d13f9efacfa32)) | |
| download | [linux-d575414361630b8b0523912532fcd7c79e43468c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d575414361630b8b0523912532fcd7c79e43468c.tar.gz) | |

ALSA: firewire-lib: Avoid division by zero in apply\_constraint\_to\_size()[ Upstream commit 72cafe63b35d06b5cfbaf807e90ae657907858da ]
The step variable is initialized to zero. It is changed in the loop,
but if it's not changed it will remain zero. Add a variable check
before the division.
The observed behavior was introduced by commit 826b5de90c0b
("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size"),
and it is difficult to show that any of the interval parameters will
satisfy the snd\_interval\_test() condition with data from the
amdtp\_rate\_table[] table.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: 826b5de90c0b ("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size")
Signed-off-by: Andrey Shumilin <shum.sdl@nppct.ru>
Reviewed-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>
Link: [https://patch.msgid.link/20241018060018.1189537-1-shum.sdl@nppct.ru](https://patch.msgid.link/20241018060018.1189537-1-shum.sdl%40nppct.ru)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d575414361630b8b0523912532fcd7c79e43468c)

| -rw-r--r-- | [sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/firewire/amdtp-stream.c?id=d575414361630b8b0523912532fcd7c79e43468c) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/sound/firewire/amdtp-stream.c b/sound/firewire/amdtp-stream.cindex 07e58dcad4afc3..14a4905a777e14 100644--- a/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=a8219446b95a859488feaade674d13f9efacfa32)+++ b/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=d575414361630b8b0523912532fcd7c79e43468c)@@ -164,6 +164,9 @@ static int apply\_constraint\_to\_size(struct snd\_pcm\_hw\_params \*params, step = max(step, amdtp\_syt\_intervals[i]); } + if (step == 0)+ return -EINVAL;+ t.min = roundup(s->min, step); t.max = rounddown(s->max, step); t.integer = 1; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:38:55 +0000



=== Content from git.kernel.org_b169e02f_20250114_204016.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7d4eb9e22131ec154e638cbd56629195c9bcbe9a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7d4eb9e22131ec154e638cbd56629195c9bcbe9a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7d4eb9e22131ec154e638cbd56629195c9bcbe9a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7d4eb9e22131ec154e638cbd56629195c9bcbe9a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Andrey Shumilin <shum.sdl@nppct.ru> | 2024-10-18 09:00:18 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 01:52:37 +0100 |
| commit | [7d4eb9e22131ec154e638cbd56629195c9bcbe9a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7d4eb9e22131ec154e638cbd56629195c9bcbe9a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7d4eb9e22131ec154e638cbd56629195c9bcbe9a)) | |
| tree | [8782e430b73526e44d81bf53cd3f5ce685d1bb27](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7d4eb9e22131ec154e638cbd56629195c9bcbe9a) | |
| parent | [b4007d5fe38625b8a1b8edc0f385d86527651238](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b4007d5fe38625b8a1b8edc0f385d86527651238) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7d4eb9e22131ec154e638cbd56629195c9bcbe9a&id2=b4007d5fe38625b8a1b8edc0f385d86527651238)) | |
| download | [linux-7d4eb9e22131ec154e638cbd56629195c9bcbe9a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7d4eb9e22131ec154e638cbd56629195c9bcbe9a.tar.gz) | |

ALSA: firewire-lib: Avoid division by zero in apply\_constraint\_to\_size()[ Upstream commit 72cafe63b35d06b5cfbaf807e90ae657907858da ]
The step variable is initialized to zero. It is changed in the loop,
but if it's not changed it will remain zero. Add a variable check
before the division.
The observed behavior was introduced by commit 826b5de90c0b
("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size"),
and it is difficult to show that any of the interval parameters will
satisfy the snd\_interval\_test() condition with data from the
amdtp\_rate\_table[] table.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: 826b5de90c0b ("ALSA: firewire-lib: fix insufficient PCM rule for period/buffer size")
Signed-off-by: Andrey Shumilin <shum.sdl@nppct.ru>
Reviewed-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>
Link: [https://patch.msgid.link/20241018060018.1189537-1-shum.sdl@nppct.ru](https://patch.msgid.link/20241018060018.1189537-1-shum.sdl%40nppct.ru)
Signed-off-by: Takashi Iwai <tiwai@suse.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7d4eb9e22131ec154e638cbd56629195c9bcbe9a)

| -rw-r--r-- | [sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/firewire/amdtp-stream.c?id=7d4eb9e22131ec154e638cbd56629195c9bcbe9a) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 0 deletions

| diff --git a/sound/firewire/amdtp-stream.c b/sound/firewire/amdtp-stream.cindex 842fe127c53781..b5b3b4d177aafc 100644--- a/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=b4007d5fe38625b8a1b8edc0f385d86527651238)+++ b/[sound/firewire/amdtp-stream.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/firewire/amdtp-stream.c?id=7d4eb9e22131ec154e638cbd56629195c9bcbe9a)@@ -172,6 +172,9 @@ static int apply\_constraint\_to\_size(struct snd\_pcm\_hw\_params \*params, step = max(step, amdtp\_syt\_intervals[i]); } + if (step == 0)+ return -EINVAL;+ t.min = roundup(s->min, step); t.max = rounddown(s->max, step); t.integer = 1; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:38:53 +0000


