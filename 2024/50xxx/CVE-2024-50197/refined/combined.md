=== Content from git.kernel.org_9bfcb262_20250114_185315.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=be3f7b9f995a6c2ee02767a0319929a2a98adf69)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=be3f7b9f995a6c2ee02767a0319929a2a98adf69)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=be3f7b9f995a6c2ee02767a0319929a2a98adf69)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=be3f7b9f995a6c2ee02767a0319929a2a98adf69)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Javier Carrasco <javier.carrasco.cruz@gmail.com> | 2024-09-26 16:11:02 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-22 15:51:35 +0200 |
| commit | [be3f7b9f995a6c2ee02767a0319929a2a98adf69](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=be3f7b9f995a6c2ee02767a0319929a2a98adf69) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=be3f7b9f995a6c2ee02767a0319929a2a98adf69)) | |
| tree | [eeec7538d16ec03055a4f4f36e1a73986681b799](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=be3f7b9f995a6c2ee02767a0319929a2a98adf69) | |
| parent | [6441d9c3d71b59c8fd27d4e381c7471a32ac1a68](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6441d9c3d71b59c8fd27d4e381c7471a32ac1a68) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=be3f7b9f995a6c2ee02767a0319929a2a98adf69&id2=6441d9c3d71b59c8fd27d4e381c7471a32ac1a68)) | |
| download | [linux-be3f7b9f995a6c2ee02767a0319929a2a98adf69.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-be3f7b9f995a6c2ee02767a0319929a2a98adf69.tar.gz) | |

pinctrl: intel: platform: fix error path in device\_for\_each\_child\_node()commit 16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22 upstream.
The device\_for\_each\_child\_node() loop requires calls to
fwnode\_handle\_put() upon early returns to decrement the refcount of
the child node and avoid leaking memory if that error path is triggered.
There is one early returns within that loop in
intel\_platform\_pinctrl\_prepare\_community(), but fwnode\_handle\_put() is
missing.
Instead of adding the missing call, the scoped version of the loop can
be used to simplify the code and avoid mistakes in the future if new
early returns are added, as the child node is only used for parsing, and
it is never assigned.
Cc: stable@vger.kernel.org
Fixes: c5860e4a2737 ("pinctrl: intel: Add a generic Intel pin control platform driver")
Signed-off-by: Javier Carrasco <javier.carrasco.cruz@gmail.com>
Acked-by: Mika Westerberg <mika.westerberg@linux.intel.com>
Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=be3f7b9f995a6c2ee02767a0319929a2a98adf69)

| -rw-r--r-- | [drivers/pinctrl/intel/pinctrl-intel-platform.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/pinctrl/intel/pinctrl-intel-platform.c?id=be3f7b9f995a6c2ee02767a0319929a2a98adf69) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 2 deletions

| diff --git a/drivers/pinctrl/intel/pinctrl-intel-platform.c b/drivers/pinctrl/intel/pinctrl-intel-platform.cindex 4a19ab3b4ba743..2d5ba8278fb9bc 100644--- a/[drivers/pinctrl/intel/pinctrl-intel-platform.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/pinctrl/intel/pinctrl-intel-platform.c?id=6441d9c3d71b59c8fd27d4e381c7471a32ac1a68)+++ b/[drivers/pinctrl/intel/pinctrl-intel-platform.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/pinctrl/intel/pinctrl-intel-platform.c?id=be3f7b9f995a6c2ee02767a0319929a2a98adf69)@@ -90,7 +90,6 @@ static int intel\_platform\_pinctrl\_prepare\_community(struct device \*dev, struct intel\_community \*community, struct intel\_platform\_pins \*pins) {- struct fwnode\_handle \*child; struct intel\_padgroup \*gpps; unsigned int group; size\_t ngpps;@@ -131,7 +130,7 @@ static int intel\_platform\_pinctrl\_prepare\_community(struct device \*dev, return -ENOMEM;  group = 0;- device\_for\_each\_child\_node(dev, child) {+ device\_for\_each\_child\_node\_scoped(dev, child) { struct intel\_padgroup \*gpp = &gpps[group];  gpp->reg\_num = group; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:51:52 +0000



=== Content from git.kernel.org_353a02e9_20250114_185314.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Javier Carrasco <javier.carrasco.cruz@gmail.com> | 2024-09-26 16:11:02 +0200 |
| --- | --- | --- |
| committer | Andy Shevchenko <andriy.shevchenko@linux.intel.com> | 2024-09-30 14:35:23 +0300 |
| commit | [16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22)) | |
| tree | [b5296bac445e6ec540b78a29042d7e88281b686d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22) | |
| parent | [9852d85ec9d492ebef56dc5f229416c925758edc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9852d85ec9d492ebef56dc5f229416c925758edc) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22&id2=9852d85ec9d492ebef56dc5f229416c925758edc)) | |
| download | [linux-16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22.tar.gz) | |

pinctrl: intel: platform: fix error path in device\_for\_each\_child\_node()The device\_for\_each\_child\_node() loop requires calls to
fwnode\_handle\_put() upon early returns to decrement the refcount of
the child node and avoid leaking memory if that error path is triggered.
There is one early returns within that loop in
intel\_platform\_pinctrl\_prepare\_community(), but fwnode\_handle\_put() is
missing.
Instead of adding the missing call, the scoped version of the loop can
be used to simplify the code and avoid mistakes in the future if new
early returns are added, as the child node is only used for parsing, and
it is never assigned.
Cc: stable@vger.kernel.org
Fixes: c5860e4a2737 ("pinctrl: intel: Add a generic Intel pin control platform driver")
Signed-off-by: Javier Carrasco <javier.carrasco.cruz@gmail.com>
Acked-by: Mika Westerberg <mika.westerberg@linux.intel.com>
Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22)

| -rw-r--r-- | [drivers/pinctrl/intel/pinctrl-intel-platform.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/pinctrl/intel/pinctrl-intel-platform.c?id=16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 2 deletions

| diff --git a/drivers/pinctrl/intel/pinctrl-intel-platform.c b/drivers/pinctrl/intel/pinctrl-intel-platform.cindex 4a19ab3b4ba743..2d5ba8278fb9bc 100644--- a/[drivers/pinctrl/intel/pinctrl-intel-platform.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/pinctrl/intel/pinctrl-intel-platform.c?id=9852d85ec9d492ebef56dc5f229416c925758edc)+++ b/[drivers/pinctrl/intel/pinctrl-intel-platform.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/pinctrl/intel/pinctrl-intel-platform.c?id=16a6d2e685e8f9a2f51dd5a363d3f97fcad35e22)@@ -90,7 +90,6 @@ static int intel\_platform\_pinctrl\_prepare\_community(struct device \*dev, struct intel\_community \*community, struct intel\_platform\_pins \*pins) {- struct fwnode\_handle \*child; struct intel\_padgroup \*gpps; unsigned int group; size\_t ngpps;@@ -131,7 +130,7 @@ static int intel\_platform\_pinctrl\_prepare\_community(struct device \*dev, return -ENOMEM;  group = 0;- device\_for\_each\_child\_node(dev, child) {+ device\_for\_each\_child\_node\_scoped(dev, child) { struct intel\_padgroup \*gpp = &gpps[group];  gpp->reg\_num = group; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 18:51:51 +0000


