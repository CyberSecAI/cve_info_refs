=== Content from git.kernel.org_11b82ea6_20250114_234426.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=efa353ae1b0541981bc96dbf2e586387d0392baa)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=efa353ae1b0541981bc96dbf2e586387d0392baa)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=efa353ae1b0541981bc96dbf2e586387d0392baa)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=efa353ae1b0541981bc96dbf2e586387d0392baa)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zicheng Qu <quzicheng@huawei.com> | 2024-10-22 13:43:30 +0000 |
| --- | --- | --- |
| committer | Jonathan Cameron <Jonathan.Cameron@huawei.com> | 2024-10-24 18:30:47 +0100 |
| commit | [efa353ae1b0541981bc96dbf2e586387d0392baa](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=efa353ae1b0541981bc96dbf2e586387d0392baa) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=efa353ae1b0541981bc96dbf2e586387d0392baa)) | |
| tree | [13ef6f459de94a966d1418624aa271f3bb17e4ce](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=efa353ae1b0541981bc96dbf2e586387d0392baa) | |
| parent | [6bd301819f8f69331a55ae2336c8b111fc933f3d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6bd301819f8f69331a55ae2336c8b111fc933f3d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=efa353ae1b0541981bc96dbf2e586387d0392baa&id2=6bd301819f8f69331a55ae2336c8b111fc933f3d)) | |
| download | [linux-efa353ae1b0541981bc96dbf2e586387d0392baa.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-efa353ae1b0541981bc96dbf2e586387d0392baa.tar.gz) | |

iio: adc: ad7124: fix division by zero in ad7124\_set\_channel\_odr()In the ad7124\_write\_raw() function, parameter val can potentially
be zero. This may lead to a division by zero when DIV\_ROUND\_CLOSEST()
is called within ad7124\_set\_channel\_odr(). The ad7124\_write\_raw()
function is invoked through the sequence: iio\_write\_channel\_raw() ->
iio\_write\_channel\_attribute() -> iio\_channel\_write(), with no checks
in place to ensure val is non-zero.
Cc: stable@vger.kernel.org
Fixes: 7b8d045e497a ("iio: adc: ad7124: allow more than 8 channels")
Signed-off-by: Zicheng Qu <quzicheng@huawei.com>
Reviewed-by: Nuno Sa <nuno.sa@analog.com>
Link: [https://patch.msgid.link/20241022134330.574601-1-quzicheng@huawei.com](https://patch.msgid.link/20241022134330.574601-1-quzicheng%40huawei.com)
Signed-off-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=efa353ae1b0541981bc96dbf2e586387d0392baa)

| -rw-r--r-- | [drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/iio/adc/ad7124.c?id=efa353ae1b0541981bc96dbf2e586387d0392baa) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/iio/adc/ad7124.c b/drivers/iio/adc/ad7124.cindex a5d91933f505b3..b79c48d46cccf8 100644--- a/[drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iio/adc/ad7124.c?id=6bd301819f8f69331a55ae2336c8b111fc933f3d)+++ b/[drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iio/adc/ad7124.c?id=efa353ae1b0541981bc96dbf2e586387d0392baa)@@ -637,7 +637,7 @@ static int ad7124\_write\_raw(struct iio\_dev \*indio\_dev,  switch (info) { case IIO\_CHAN\_INFO\_SAMP\_FREQ:- if (val2 != 0) {+ if (val2 != 0 || val == 0) { ret = -EINVAL; break; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:43:03 +0000



=== Content from git.kernel.org_b9d84457_20250114_234429.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=f51343f346e6abde094548a7fb34472b0d4cae91)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=f51343f346e6abde094548a7fb34472b0d4cae91)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f51343f346e6abde094548a7fb34472b0d4cae91)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f51343f346e6abde094548a7fb34472b0d4cae91)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zicheng Qu <quzicheng@huawei.com> | 2024-10-22 13:43:30 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:26:45 +0100 |
| commit | [f51343f346e6abde094548a7fb34472b0d4cae91](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f51343f346e6abde094548a7fb34472b0d4cae91) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=f51343f346e6abde094548a7fb34472b0d4cae91)) | |
| tree | [a470ada6c8f208f016a3006d8f5d1aeafd0cf564](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=f51343f346e6abde094548a7fb34472b0d4cae91) | |
| parent | [ccbc10647aafe2b7506edb4b10e19c6c2416c162](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ccbc10647aafe2b7506edb4b10e19c6c2416c162) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f51343f346e6abde094548a7fb34472b0d4cae91&id2=ccbc10647aafe2b7506edb4b10e19c6c2416c162)) | |
| download | [linux-f51343f346e6abde094548a7fb34472b0d4cae91.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-f51343f346e6abde094548a7fb34472b0d4cae91.tar.gz) | |

iio: adc: ad7124: fix division by zero in ad7124\_set\_channel\_odr()commit efa353ae1b0541981bc96dbf2e586387d0392baa upstream.
In the ad7124\_write\_raw() function, parameter val can potentially
be zero. This may lead to a division by zero when DIV\_ROUND\_CLOSEST()
is called within ad7124\_set\_channel\_odr(). The ad7124\_write\_raw()
function is invoked through the sequence: iio\_write\_channel\_raw() ->
iio\_write\_channel\_attribute() -> iio\_channel\_write(), with no checks
in place to ensure val is non-zero.
Cc: stable@vger.kernel.org
Fixes: 7b8d045e497a ("iio: adc: ad7124: allow more than 8 channels")
Signed-off-by: Zicheng Qu <quzicheng@huawei.com>
Reviewed-by: Nuno Sa <nuno.sa@analog.com>
Link: [https://patch.msgid.link/20241022134330.574601-1-quzicheng@huawei.com](https://patch.msgid.link/20241022134330.574601-1-quzicheng%40huawei.com)
Signed-off-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f51343f346e6abde094548a7fb34472b0d4cae91)

| -rw-r--r-- | [drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/iio/adc/ad7124.c?id=f51343f346e6abde094548a7fb34472b0d4cae91) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/iio/adc/ad7124.c b/drivers/iio/adc/ad7124.cindex deaf600d96fba3..0d0884d3b24600 100644--- a/[drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iio/adc/ad7124.c?id=ccbc10647aafe2b7506edb4b10e19c6c2416c162)+++ b/[drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iio/adc/ad7124.c?id=f51343f346e6abde094548a7fb34472b0d4cae91)@@ -642,7 +642,7 @@ static int ad7124\_write\_raw(struct iio\_dev \*indio\_dev,  switch (info) { case IIO\_CHAN\_INFO\_SAMP\_FREQ:- if (val2 != 0) {+ if (val2 != 0 || val == 0) { ret = -EINVAL; break; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:43:05 +0000



=== Content from git.kernel.org_32d92135_20250114_234425.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4f588fffc307a4bc2761aee6ff275bb4b433e451)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4f588fffc307a4bc2761aee6ff275bb4b433e451)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4f588fffc307a4bc2761aee6ff275bb4b433e451)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4f588fffc307a4bc2761aee6ff275bb4b433e451)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zicheng Qu <quzicheng@huawei.com> | 2024-10-22 13:43:30 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:25:54 +0100 |
| commit | [4f588fffc307a4bc2761aee6ff275bb4b433e451](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4f588fffc307a4bc2761aee6ff275bb4b433e451) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4f588fffc307a4bc2761aee6ff275bb4b433e451)) | |
| tree | [42e0636117ea85adadced9e7a6615685943623c6](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4f588fffc307a4bc2761aee6ff275bb4b433e451) | |
| parent | [2f39548f45693d86e950647012a214da6917dc9f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2f39548f45693d86e950647012a214da6917dc9f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4f588fffc307a4bc2761aee6ff275bb4b433e451&id2=2f39548f45693d86e950647012a214da6917dc9f)) | |
| download | [linux-4f588fffc307a4bc2761aee6ff275bb4b433e451.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4f588fffc307a4bc2761aee6ff275bb4b433e451.tar.gz) | |

iio: adc: ad7124: fix division by zero in ad7124\_set\_channel\_odr()commit efa353ae1b0541981bc96dbf2e586387d0392baa upstream.
In the ad7124\_write\_raw() function, parameter val can potentially
be zero. This may lead to a division by zero when DIV\_ROUND\_CLOSEST()
is called within ad7124\_set\_channel\_odr(). The ad7124\_write\_raw()
function is invoked through the sequence: iio\_write\_channel\_raw() ->
iio\_write\_channel\_attribute() -> iio\_channel\_write(), with no checks
in place to ensure val is non-zero.
Cc: stable@vger.kernel.org
Fixes: 7b8d045e497a ("iio: adc: ad7124: allow more than 8 channels")
Signed-off-by: Zicheng Qu <quzicheng@huawei.com>
Reviewed-by: Nuno Sa <nuno.sa@analog.com>
Link: [https://patch.msgid.link/20241022134330.574601-1-quzicheng@huawei.com](https://patch.msgid.link/20241022134330.574601-1-quzicheng%40huawei.com)
Signed-off-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4f588fffc307a4bc2761aee6ff275bb4b433e451)

| -rw-r--r-- | [drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/iio/adc/ad7124.c?id=4f588fffc307a4bc2761aee6ff275bb4b433e451) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/iio/adc/ad7124.c b/drivers/iio/adc/ad7124.cindex 471e1311e00773..06a541fa3cfea3 100644--- a/[drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iio/adc/ad7124.c?id=2f39548f45693d86e950647012a214da6917dc9f)+++ b/[drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iio/adc/ad7124.c?id=4f588fffc307a4bc2761aee6ff275bb4b433e451)@@ -596,7 +596,7 @@ static int ad7124\_write\_raw(struct iio\_dev \*indio\_dev,  switch (info) { case IIO\_CHAN\_INFO\_SAMP\_FREQ:- if (val2 != 0) {+ if (val2 != 0 || val == 0) { ret = -EINVAL; break; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:43:02 +0000



=== Content from git.kernel.org_1adf2f94_20250114_234423.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zicheng Qu <quzicheng@huawei.com> | 2024-10-22 13:43:30 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:28:23 +0100 |
| commit | [3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95)) | |
| tree | [cc3449c54f6f78daefc1c0ba62935612bed84b0e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95) | |
| parent | [adfbc08b94e7df08b9ed5fa26b969cc1b54c84ec](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=adfbc08b94e7df08b9ed5fa26b969cc1b54c84ec) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95&id2=adfbc08b94e7df08b9ed5fa26b969cc1b54c84ec)) | |
| download | [linux-3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95.tar.gz) | |

iio: adc: ad7124: fix division by zero in ad7124\_set\_channel\_odr()commit efa353ae1b0541981bc96dbf2e586387d0392baa upstream.
In the ad7124\_write\_raw() function, parameter val can potentially
be zero. This may lead to a division by zero when DIV\_ROUND\_CLOSEST()
is called within ad7124\_set\_channel\_odr(). The ad7124\_write\_raw()
function is invoked through the sequence: iio\_write\_channel\_raw() ->
iio\_write\_channel\_attribute() -> iio\_channel\_write(), with no checks
in place to ensure val is non-zero.
Cc: stable@vger.kernel.org
Fixes: 7b8d045e497a ("iio: adc: ad7124: allow more than 8 channels")
Signed-off-by: Zicheng Qu <quzicheng@huawei.com>
Reviewed-by: Nuno Sa <nuno.sa@analog.com>
Link: [https://patch.msgid.link/20241022134330.574601-1-quzicheng@huawei.com](https://patch.msgid.link/20241022134330.574601-1-quzicheng%40huawei.com)
Signed-off-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95)

| -rw-r--r-- | [drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/iio/adc/ad7124.c?id=3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/iio/adc/ad7124.c b/drivers/iio/adc/ad7124.cindex d2fe0269b6d3af..34e06e2e51d625 100644--- a/[drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iio/adc/ad7124.c?id=adfbc08b94e7df08b9ed5fa26b969cc1b54c84ec)+++ b/[drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iio/adc/ad7124.c?id=3dc0eda2cd5c653b162852ae5f0631bfe4ca5e95)@@ -643,7 +643,7 @@ static int ad7124\_write\_raw(struct iio\_dev \*indio\_dev,  switch (info) { case IIO\_CHAN\_INFO\_SAMP\_FREQ:- if (val2 != 0) {+ if (val2 != 0 || val == 0) { ret = -EINVAL; break; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:42:59 +0000



=== Content from git.kernel.org_310bff96_20250114_234421.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0ac0beb4235a9a474f681280a3bd4e2a5bb66569)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0ac0beb4235a9a474f681280a3bd4e2a5bb66569)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0ac0beb4235a9a474f681280a3bd4e2a5bb66569)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0ac0beb4235a9a474f681280a3bd4e2a5bb66569)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zicheng Qu <quzicheng@huawei.com> | 2024-10-22 13:43:30 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:30:54 +0100 |
| commit | [0ac0beb4235a9a474f681280a3bd4e2a5bb66569](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0ac0beb4235a9a474f681280a3bd4e2a5bb66569) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0ac0beb4235a9a474f681280a3bd4e2a5bb66569)) | |
| tree | [780e8d6153ea74da271fde60aea5462e09d76c17](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0ac0beb4235a9a474f681280a3bd4e2a5bb66569) | |
| parent | [36b992a8e0244bea83b842997054fc7d8fdbf55d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=36b992a8e0244bea83b842997054fc7d8fdbf55d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0ac0beb4235a9a474f681280a3bd4e2a5bb66569&id2=36b992a8e0244bea83b842997054fc7d8fdbf55d)) | |
| download | [linux-0ac0beb4235a9a474f681280a3bd4e2a5bb66569.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0ac0beb4235a9a474f681280a3bd4e2a5bb66569.tar.gz) | |

iio: adc: ad7124: fix division by zero in ad7124\_set\_channel\_odr()commit efa353ae1b0541981bc96dbf2e586387d0392baa upstream.
In the ad7124\_write\_raw() function, parameter val can potentially
be zero. This may lead to a division by zero when DIV\_ROUND\_CLOSEST()
is called within ad7124\_set\_channel\_odr(). The ad7124\_write\_raw()
function is invoked through the sequence: iio\_write\_channel\_raw() ->
iio\_write\_channel\_attribute() -> iio\_channel\_write(), with no checks
in place to ensure val is non-zero.
Cc: stable@vger.kernel.org
Fixes: 7b8d045e497a ("iio: adc: ad7124: allow more than 8 channels")
Signed-off-by: Zicheng Qu <quzicheng@huawei.com>
Reviewed-by: Nuno Sa <nuno.sa@analog.com>
Link: [https://patch.msgid.link/20241022134330.574601-1-quzicheng@huawei.com](https://patch.msgid.link/20241022134330.574601-1-quzicheng%40huawei.com)
Signed-off-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0ac0beb4235a9a474f681280a3bd4e2a5bb66569)

| -rw-r--r-- | [drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/iio/adc/ad7124.c?id=0ac0beb4235a9a474f681280a3bd4e2a5bb66569) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/iio/adc/ad7124.c b/drivers/iio/adc/ad7124.cindex 108e9ccab1ef06..e00074c8852253 100644--- a/[drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iio/adc/ad7124.c?id=36b992a8e0244bea83b842997054fc7d8fdbf55d)+++ b/[drivers/iio/adc/ad7124.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/iio/adc/ad7124.c?id=0ac0beb4235a9a474f681280a3bd4e2a5bb66569)@@ -645,7 +645,7 @@ static int ad7124\_write\_raw(struct iio\_dev \*indio\_dev,  switch (info) { case IIO\_CHAN\_INFO\_SAMP\_FREQ:- if (val2 != 0) {+ if (val2 != 0 || val == 0) { ret = -EINVAL; break; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:42:58 +0000


