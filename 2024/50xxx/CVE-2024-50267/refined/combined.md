=== Content from git.kernel.org_c3dda8c4_20250115_090659.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=13d6ff3ca76056d06a9d88300be2a293442ff595)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=13d6ff3ca76056d06a9d88300be2a293442ff595)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=13d6ff3ca76056d06a9d88300be2a293442ff595)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=13d6ff3ca76056d06a9d88300be2a293442ff595)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-31 12:48:30 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:19:40 +0100 |
| commit | [13d6ff3ca76056d06a9d88300be2a293442ff595](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=13d6ff3ca76056d06a9d88300be2a293442ff595) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=13d6ff3ca76056d06a9d88300be2a293442ff595)) | |
| tree | [720ec00d19166d26dbc84dde1161e015faf50277](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=13d6ff3ca76056d06a9d88300be2a293442ff595) | |
| parent | [69e19774f15e12dda6c6c58001d059e30895009b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=69e19774f15e12dda6c6c58001d059e30895009b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=13d6ff3ca76056d06a9d88300be2a293442ff595&id2=69e19774f15e12dda6c6c58001d059e30895009b)) | |
| download | [linux-13d6ff3ca76056d06a9d88300be2a293442ff595.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-13d6ff3ca76056d06a9d88300be2a293442ff595.tar.gz) | |

USB: serial: io\_edgeport: fix use after free in debug printkcommit 37bb5628379295c1254c113a407cab03a0f4d0b4 upstream.
The "dev\_dbg(&urb->dev->dev, ..." which happens after usb\_free\_urb(urb)
is a use after free of the "urb" pointer. Store the "dev" pointer at the
start of the function to avoid this issue.
Fixes: 984f68683298 ("USB: serial: io\_edgeport.c: remove dbg() usage")
Cc: stable@vger.kernel.org
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Signed-off-by: Johan Hovold <johan@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=13d6ff3ca76056d06a9d88300be2a293442ff595)

| -rw-r--r-- | [drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/serial/io_edgeport.c?id=13d6ff3ca76056d06a9d88300be2a293442ff595) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/usb/serial/io\_edgeport.c b/drivers/usb/serial/io\_edgeport.cindex abe4bbb0ac654f..477c0927dc1b9d 100644--- a/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=69e19774f15e12dda6c6c58001d059e30895009b)+++ b/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=13d6ff3ca76056d06a9d88300be2a293442ff595)@@ -770,11 +770,12 @@ static void edge\_bulk\_out\_data\_callback(struct urb \*urb) static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) { struct edgeport\_port \*edge\_port = urb->context;+ struct device \*dev = &urb->dev->dev; int status = urb->status;  atomic\_dec(&CmdUrbs);- dev\_dbg(&urb->dev->dev, "%s - FREE URB %p (outstanding %d)\n",- \_\_func\_\_, urb, atomic\_read(&CmdUrbs));+ dev\_dbg(dev, "%s - FREE URB %p (outstanding %d)\n", \_\_func\_\_, urb,+ atomic\_read(&CmdUrbs));   /\* clean up the transfer buffer \*/@@ -784,8 +785,7 @@ static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) usb\_free\_urb(urb);  if (status) {- dev\_dbg(&urb->dev->dev,- "%s - nonzero write bulk status received: %d\n",+ dev\_dbg(dev, "%s - nonzero write bulk status received: %d\n", \_\_func\_\_, status); return; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 09:05:36 +0000



=== Content from git.kernel.org_d16fb47f_20250115_090702.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=44fff2c16c5aafbdb70c7183dae0a415ae74705e)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=44fff2c16c5aafbdb70c7183dae0a415ae74705e)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=44fff2c16c5aafbdb70c7183dae0a415ae74705e)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=44fff2c16c5aafbdb70c7183dae0a415ae74705e)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-31 12:48:30 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:13:41 +0100 |
| commit | [44fff2c16c5aafbdb70c7183dae0a415ae74705e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=44fff2c16c5aafbdb70c7183dae0a415ae74705e) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=44fff2c16c5aafbdb70c7183dae0a415ae74705e)) | |
| tree | [df26b3b8b42f3d8a39ca7d20da63645f08b54d90](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=44fff2c16c5aafbdb70c7183dae0a415ae74705e) | |
| parent | [8f47984b35f3be0cfc652c2ca358d5768ea3456b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8f47984b35f3be0cfc652c2ca358d5768ea3456b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=44fff2c16c5aafbdb70c7183dae0a415ae74705e&id2=8f47984b35f3be0cfc652c2ca358d5768ea3456b)) | |
| download | [linux-44fff2c16c5aafbdb70c7183dae0a415ae74705e.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-44fff2c16c5aafbdb70c7183dae0a415ae74705e.tar.gz) | |

USB: serial: io\_edgeport: fix use after free in debug printkcommit 37bb5628379295c1254c113a407cab03a0f4d0b4 upstream.
The "dev\_dbg(&urb->dev->dev, ..." which happens after usb\_free\_urb(urb)
is a use after free of the "urb" pointer. Store the "dev" pointer at the
start of the function to avoid this issue.
Fixes: 984f68683298 ("USB: serial: io\_edgeport.c: remove dbg() usage")
Cc: stable@vger.kernel.org
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Signed-off-by: Johan Hovold <johan@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=44fff2c16c5aafbdb70c7183dae0a415ae74705e)

| -rw-r--r-- | [drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/serial/io_edgeport.c?id=44fff2c16c5aafbdb70c7183dae0a415ae74705e) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/usb/serial/io\_edgeport.c b/drivers/usb/serial/io\_edgeport.cindex bdee78cc4a072a..6e95f0bb00e335 100644--- a/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=8f47984b35f3be0cfc652c2ca358d5768ea3456b)+++ b/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=44fff2c16c5aafbdb70c7183dae0a415ae74705e)@@ -770,11 +770,12 @@ static void edge\_bulk\_out\_data\_callback(struct urb \*urb) static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) { struct edgeport\_port \*edge\_port = urb->context;+ struct device \*dev = &urb->dev->dev; int status = urb->status;  atomic\_dec(&CmdUrbs);- dev\_dbg(&urb->dev->dev, "%s - FREE URB %p (outstanding %d)\n",- \_\_func\_\_, urb, atomic\_read(&CmdUrbs));+ dev\_dbg(dev, "%s - FREE URB %p (outstanding %d)\n", \_\_func\_\_, urb,+ atomic\_read(&CmdUrbs));   /\* clean up the transfer buffer \*/@@ -784,8 +785,7 @@ static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) usb\_free\_urb(urb);  if (status) {- dev\_dbg(&urb->dev->dev,- "%s - nonzero write bulk status received: %d\n",+ dev\_dbg(dev, "%s - nonzero write bulk status received: %d\n", \_\_func\_\_, status); return; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 09:05:39 +0000



=== Content from git.kernel.org_53529628_20250115_090703.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-31 12:48:30 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:59:38 +0100 |
| commit | [e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa)) | |
| tree | [e4adc0e435c803ebe7e491647c17109bd16dbfd7](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa) | |
| parent | [d76923164705821aa1b01b8d9d1741f20c654ab4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d76923164705821aa1b01b8d9d1741f20c654ab4) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa&id2=d76923164705821aa1b01b8d9d1741f20c654ab4)) | |
| download | [linux-e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa.tar.gz) | |

USB: serial: io\_edgeport: fix use after free in debug printkcommit 37bb5628379295c1254c113a407cab03a0f4d0b4 upstream.
The "dev\_dbg(&urb->dev->dev, ..." which happens after usb\_free\_urb(urb)
is a use after free of the "urb" pointer. Store the "dev" pointer at the
start of the function to avoid this issue.
Fixes: 984f68683298 ("USB: serial: io\_edgeport.c: remove dbg() usage")
Cc: stable@vger.kernel.org
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Signed-off-by: Johan Hovold <johan@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa)

| -rw-r--r-- | [drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/serial/io_edgeport.c?id=e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/usb/serial/io\_edgeport.c b/drivers/usb/serial/io\_edgeport.cindex 4b48ef4adbeb6f..618e2b16e20435 100644--- a/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=d76923164705821aa1b01b8d9d1741f20c654ab4)+++ b/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=e567fc8f7a4460e486e52c9261b1e8b9f5dc42aa)@@ -846,11 +846,12 @@ static void edge\_bulk\_out\_data\_callback(struct urb \*urb) static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) { struct edgeport\_port \*edge\_port = urb->context;+ struct device \*dev = &urb->dev->dev; int status = urb->status;  atomic\_dec(&CmdUrbs);- dev\_dbg(&urb->dev->dev, "%s - FREE URB %p (outstanding %d)\n",- \_\_func\_\_, urb, atomic\_read(&CmdUrbs));+ dev\_dbg(dev, "%s - FREE URB %p (outstanding %d)\n", \_\_func\_\_, urb,+ atomic\_read(&CmdUrbs));   /\* clean up the transfer buffer \*/@@ -860,8 +861,7 @@ static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) usb\_free\_urb(urb);  if (status) {- dev\_dbg(&urb->dev->dev,- "%s - nonzero write bulk status received: %d\n",+ dev\_dbg(dev, "%s - nonzero write bulk status received: %d\n", \_\_func\_\_, status); return; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 09:05:40 +0000



=== Content from git.kernel.org_84def3f0_20250115_090704.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e6ceb04eeb6115d872d4c4078d12f1170ed755ce)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e6ceb04eeb6115d872d4c4078d12f1170ed755ce)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e6ceb04eeb6115d872d4c4078d12f1170ed755ce)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e6ceb04eeb6115d872d4c4078d12f1170ed755ce)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-31 12:48:30 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:58:07 +0100 |
| commit | [e6ceb04eeb6115d872d4c4078d12f1170ed755ce](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e6ceb04eeb6115d872d4c4078d12f1170ed755ce) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e6ceb04eeb6115d872d4c4078d12f1170ed755ce)) | |
| tree | [c5dc658e67f004c0e3e3223e79a8d0ff28b5eaac](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e6ceb04eeb6115d872d4c4078d12f1170ed755ce) | |
| parent | [721ddad945596220c123eb6f7126729fe277ee4f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=721ddad945596220c123eb6f7126729fe277ee4f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e6ceb04eeb6115d872d4c4078d12f1170ed755ce&id2=721ddad945596220c123eb6f7126729fe277ee4f)) | |
| download | [linux-e6ceb04eeb6115d872d4c4078d12f1170ed755ce.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e6ceb04eeb6115d872d4c4078d12f1170ed755ce.tar.gz) | |

USB: serial: io\_edgeport: fix use after free in debug printkcommit 37bb5628379295c1254c113a407cab03a0f4d0b4 upstream.
The "dev\_dbg(&urb->dev->dev, ..." which happens after usb\_free\_urb(urb)
is a use after free of the "urb" pointer. Store the "dev" pointer at the
start of the function to avoid this issue.
Fixes: 984f68683298 ("USB: serial: io\_edgeport.c: remove dbg() usage")
Cc: stable@vger.kernel.org
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Signed-off-by: Johan Hovold <johan@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e6ceb04eeb6115d872d4c4078d12f1170ed755ce)

| -rw-r--r-- | [drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/serial/io_edgeport.c?id=e6ceb04eeb6115d872d4c4078d12f1170ed755ce) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/usb/serial/io\_edgeport.c b/drivers/usb/serial/io\_edgeport.cindex 44c902c7d240c3..6e4478c0da14cd 100644--- a/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=721ddad945596220c123eb6f7126729fe277ee4f)+++ b/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=e6ceb04eeb6115d872d4c4078d12f1170ed755ce)@@ -846,11 +846,12 @@ static void edge\_bulk\_out\_data\_callback(struct urb \*urb) static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) { struct edgeport\_port \*edge\_port = urb->context;+ struct device \*dev = &urb->dev->dev; int status = urb->status;  atomic\_dec(&CmdUrbs);- dev\_dbg(&urb->dev->dev, "%s - FREE URB %p (outstanding %d)\n",- \_\_func\_\_, urb, atomic\_read(&CmdUrbs));+ dev\_dbg(dev, "%s - FREE URB %p (outstanding %d)\n", \_\_func\_\_, urb,+ atomic\_read(&CmdUrbs));   /\* clean up the transfer buffer \*/@@ -860,8 +861,7 @@ static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) usb\_free\_urb(urb);  if (status) {- dev\_dbg(&urb->dev->dev,- "%s - nonzero write bulk status received: %d\n",+ dev\_dbg(dev, "%s - nonzero write bulk status received: %d\n", \_\_func\_\_, status); return; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 09:05:40 +0000



=== Content from git.kernel.org_514295f6_20250115_090659.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=275258c30bbda29467216e96fb655b16bcc9992b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=275258c30bbda29467216e96fb655b16bcc9992b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=275258c30bbda29467216e96fb655b16bcc9992b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=275258c30bbda29467216e96fb655b16bcc9992b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-31 12:48:30 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:15:18 +0100 |
| commit | [275258c30bbda29467216e96fb655b16bcc9992b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=275258c30bbda29467216e96fb655b16bcc9992b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=275258c30bbda29467216e96fb655b16bcc9992b)) | |
| tree | [797c346202fd10d42ddda27e512c558bd133b5c1](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=275258c30bbda29467216e96fb655b16bcc9992b) | |
| parent | [604314ecd682913925980dc955caea2d036eab5f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=604314ecd682913925980dc955caea2d036eab5f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=275258c30bbda29467216e96fb655b16bcc9992b&id2=604314ecd682913925980dc955caea2d036eab5f)) | |
| download | [linux-275258c30bbda29467216e96fb655b16bcc9992b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-275258c30bbda29467216e96fb655b16bcc9992b.tar.gz) | |

USB: serial: io\_edgeport: fix use after free in debug printkcommit 37bb5628379295c1254c113a407cab03a0f4d0b4 upstream.
The "dev\_dbg(&urb->dev->dev, ..." which happens after usb\_free\_urb(urb)
is a use after free of the "urb" pointer. Store the "dev" pointer at the
start of the function to avoid this issue.
Fixes: 984f68683298 ("USB: serial: io\_edgeport.c: remove dbg() usage")
Cc: stable@vger.kernel.org
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Signed-off-by: Johan Hovold <johan@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=275258c30bbda29467216e96fb655b16bcc9992b)

| -rw-r--r-- | [drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/serial/io_edgeport.c?id=275258c30bbda29467216e96fb655b16bcc9992b) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/usb/serial/io\_edgeport.c b/drivers/usb/serial/io\_edgeport.cindex 3a4c0febf33589..67c0c51603e59c 100644--- a/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=604314ecd682913925980dc955caea2d036eab5f)+++ b/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=275258c30bbda29467216e96fb655b16bcc9992b)@@ -770,11 +770,12 @@ static void edge\_bulk\_out\_data\_callback(struct urb \*urb) static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) { struct edgeport\_port \*edge\_port = urb->context;+ struct device \*dev = &urb->dev->dev; int status = urb->status;  atomic\_dec(&CmdUrbs);- dev\_dbg(&urb->dev->dev, "%s - FREE URB %p (outstanding %d)\n",- \_\_func\_\_, urb, atomic\_read(&CmdUrbs));+ dev\_dbg(dev, "%s - FREE URB %p (outstanding %d)\n", \_\_func\_\_, urb,+ atomic\_read(&CmdUrbs));   /\* clean up the transfer buffer \*/@@ -784,8 +785,7 @@ static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) usb\_free\_urb(urb);  if (status) {- dev\_dbg(&urb->dev->dev,- "%s - nonzero write bulk status received: %d\n",+ dev\_dbg(dev, "%s - nonzero write bulk status received: %d\n", \_\_func\_\_, status); return; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 09:05:37 +0000



=== Content from git.kernel.org_85e4d399_20250115_090702.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=39709ce93f5c3f9eb535efe2afea088805d1128f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=39709ce93f5c3f9eb535efe2afea088805d1128f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=39709ce93f5c3f9eb535efe2afea088805d1128f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=39709ce93f5c3f9eb535efe2afea088805d1128f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-31 12:48:30 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:58:52 +0100 |
| commit | [39709ce93f5c3f9eb535efe2afea088805d1128f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=39709ce93f5c3f9eb535efe2afea088805d1128f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=39709ce93f5c3f9eb535efe2afea088805d1128f)) | |
| tree | [18b3ae4abac80f33ef4b138814d35c82ac84f3f3](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=39709ce93f5c3f9eb535efe2afea088805d1128f) | |
| parent | [4aa77d5ea9944468e16c3eed15e858fd5de44de1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4aa77d5ea9944468e16c3eed15e858fd5de44de1) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=39709ce93f5c3f9eb535efe2afea088805d1128f&id2=4aa77d5ea9944468e16c3eed15e858fd5de44de1)) | |
| download | [linux-39709ce93f5c3f9eb535efe2afea088805d1128f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-39709ce93f5c3f9eb535efe2afea088805d1128f.tar.gz) | |

USB: serial: io\_edgeport: fix use after free in debug printkcommit 37bb5628379295c1254c113a407cab03a0f4d0b4 upstream.
The "dev\_dbg(&urb->dev->dev, ..." which happens after usb\_free\_urb(urb)
is a use after free of the "urb" pointer. Store the "dev" pointer at the
start of the function to avoid this issue.
Fixes: 984f68683298 ("USB: serial: io\_edgeport.c: remove dbg() usage")
Cc: stable@vger.kernel.org
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Signed-off-by: Johan Hovold <johan@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=39709ce93f5c3f9eb535efe2afea088805d1128f)

| -rw-r--r-- | [drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/serial/io_edgeport.c?id=39709ce93f5c3f9eb535efe2afea088805d1128f) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/usb/serial/io\_edgeport.c b/drivers/usb/serial/io\_edgeport.cindex 3b4d1ff9033dd6..7ae2bc1c3c9bb0 100644--- a/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=4aa77d5ea9944468e16c3eed15e858fd5de44de1)+++ b/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=39709ce93f5c3f9eb535efe2afea088805d1128f)@@ -846,11 +846,12 @@ static void edge\_bulk\_out\_data\_callback(struct urb \*urb) static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) { struct edgeport\_port \*edge\_port = urb->context;+ struct device \*dev = &urb->dev->dev; int status = urb->status;  atomic\_dec(&CmdUrbs);- dev\_dbg(&urb->dev->dev, "%s - FREE URB %p (outstanding %d)\n",- \_\_func\_\_, urb, atomic\_read(&CmdUrbs));+ dev\_dbg(dev, "%s - FREE URB %p (outstanding %d)\n", \_\_func\_\_, urb,+ atomic\_read(&CmdUrbs));   /\* clean up the transfer buffer \*/@@ -860,8 +861,7 @@ static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) usb\_free\_urb(urb);  if (status) {- dev\_dbg(&urb->dev->dev,- "%s - nonzero write bulk status received: %d\n",+ dev\_dbg(dev, "%s - nonzero write bulk status received: %d\n", \_\_func\_\_, status); return; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 09:05:39 +0000



=== Content from git.kernel.org_96727499_20250115_090700.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=314bdf446053e123f37543aa535197ee75f8aa97)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=314bdf446053e123f37543aa535197ee75f8aa97)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=314bdf446053e123f37543aa535197ee75f8aa97)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=314bdf446053e123f37543aa535197ee75f8aa97)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-31 12:48:30 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:21:13 +0100 |
| commit | [314bdf446053e123f37543aa535197ee75f8aa97](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=314bdf446053e123f37543aa535197ee75f8aa97) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=314bdf446053e123f37543aa535197ee75f8aa97)) | |
| tree | [49241368f88af15fb6f4845367f3aa14b35a555b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=314bdf446053e123f37543aa535197ee75f8aa97) | |
| parent | [3a2ba841659a0f15102585120dea75d8d5209616](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3a2ba841659a0f15102585120dea75d8d5209616) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=314bdf446053e123f37543aa535197ee75f8aa97&id2=3a2ba841659a0f15102585120dea75d8d5209616)) | |
| download | [linux-314bdf446053e123f37543aa535197ee75f8aa97.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-314bdf446053e123f37543aa535197ee75f8aa97.tar.gz) | |

USB: serial: io\_edgeport: fix use after free in debug printkcommit 37bb5628379295c1254c113a407cab03a0f4d0b4 upstream.
The "dev\_dbg(&urb->dev->dev, ..." which happens after usb\_free\_urb(urb)
is a use after free of the "urb" pointer. Store the "dev" pointer at the
start of the function to avoid this issue.
Fixes: 984f68683298 ("USB: serial: io\_edgeport.c: remove dbg() usage")
Cc: stable@vger.kernel.org
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Signed-off-by: Johan Hovold <johan@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=314bdf446053e123f37543aa535197ee75f8aa97)

| -rw-r--r-- | [drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/serial/io_edgeport.c?id=314bdf446053e123f37543aa535197ee75f8aa97) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/usb/serial/io\_edgeport.c b/drivers/usb/serial/io\_edgeport.cindex abe4bbb0ac654f..477c0927dc1b9d 100644--- a/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=3a2ba841659a0f15102585120dea75d8d5209616)+++ b/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=314bdf446053e123f37543aa535197ee75f8aa97)@@ -770,11 +770,12 @@ static void edge\_bulk\_out\_data\_callback(struct urb \*urb) static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) { struct edgeport\_port \*edge\_port = urb->context;+ struct device \*dev = &urb->dev->dev; int status = urb->status;  atomic\_dec(&CmdUrbs);- dev\_dbg(&urb->dev->dev, "%s - FREE URB %p (outstanding %d)\n",- \_\_func\_\_, urb, atomic\_read(&CmdUrbs));+ dev\_dbg(dev, "%s - FREE URB %p (outstanding %d)\n", \_\_func\_\_, urb,+ atomic\_read(&CmdUrbs));   /\* clean up the transfer buffer \*/@@ -784,8 +785,7 @@ static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) usb\_free\_urb(urb);  if (status) {- dev\_dbg(&urb->dev->dev,- "%s - nonzero write bulk status received: %d\n",+ dev\_dbg(dev, "%s - nonzero write bulk status received: %d\n", \_\_func\_\_, status); return; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 09:05:37 +0000



=== Content from git.kernel.org_80ed39b0_20250115_090701.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=37bb5628379295c1254c113a407cab03a0f4d0b4)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=37bb5628379295c1254c113a407cab03a0f4d0b4)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=37bb5628379295c1254c113a407cab03a0f4d0b4)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=37bb5628379295c1254c113a407cab03a0f4d0b4)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-31 12:48:30 +0300 |
| --- | --- | --- |
| committer | Johan Hovold <johan@kernel.org> | 2024-10-31 14:18:51 +0100 |
| commit | [37bb5628379295c1254c113a407cab03a0f4d0b4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=37bb5628379295c1254c113a407cab03a0f4d0b4) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=37bb5628379295c1254c113a407cab03a0f4d0b4)) | |
| tree | [ee3e41700e389885f6fce4e699bfd21b3b15bfdb](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=37bb5628379295c1254c113a407cab03a0f4d0b4) | |
| parent | [3b05949ba39f305b585452d0e177470607842165](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3b05949ba39f305b585452d0e177470607842165) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=37bb5628379295c1254c113a407cab03a0f4d0b4&id2=3b05949ba39f305b585452d0e177470607842165)) | |
| download | [linux-37bb5628379295c1254c113a407cab03a0f4d0b4.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-37bb5628379295c1254c113a407cab03a0f4d0b4.tar.gz) | |

USB: serial: io\_edgeport: fix use after free in debug printkThe "dev\_dbg(&urb->dev->dev, ..." which happens after usb\_free\_urb(urb)
is a use after free of the "urb" pointer. Store the "dev" pointer at the
start of the function to avoid this issue.
Fixes: 984f68683298 ("USB: serial: io\_edgeport.c: remove dbg() usage")
Cc: stable@vger.kernel.org
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Signed-off-by: Johan Hovold <johan@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=37bb5628379295c1254c113a407cab03a0f4d0b4)

| -rw-r--r-- | [drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/serial/io_edgeport.c?id=37bb5628379295c1254c113a407cab03a0f4d0b4) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/usb/serial/io\_edgeport.c b/drivers/usb/serial/io\_edgeport.cindex c7d6b5e3f8982b..28c71d99e85726 100644--- a/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=3b05949ba39f305b585452d0e177470607842165)+++ b/[drivers/usb/serial/io\_edgeport.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/serial/io_edgeport.c?id=37bb5628379295c1254c113a407cab03a0f4d0b4)@@ -770,11 +770,12 @@ static void edge\_bulk\_out\_data\_callback(struct urb \*urb) static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) { struct edgeport\_port \*edge\_port = urb->context;+ struct device \*dev = &urb->dev->dev; int status = urb->status;  atomic\_dec(&CmdUrbs);- dev\_dbg(&urb->dev->dev, "%s - FREE URB %p (outstanding %d)\n",- \_\_func\_\_, urb, atomic\_read(&CmdUrbs));+ dev\_dbg(dev, "%s - FREE URB %p (outstanding %d)\n", \_\_func\_\_, urb,+ atomic\_read(&CmdUrbs));   /\* clean up the transfer buffer \*/@@ -784,8 +785,7 @@ static void edge\_bulk\_out\_cmd\_callback(struct urb \*urb) usb\_free\_urb(urb);  if (status) {- dev\_dbg(&urb->dev->dev,- "%s - nonzero write bulk status received: %d\n",+ dev\_dbg(dev, "%s - nonzero write bulk status received: %d\n", \_\_func\_\_, status); return; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 09:05:38 +0000


