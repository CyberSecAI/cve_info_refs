=== Content from gist.github.com_037e84db_20250114_181910.html ===

[Skip to content](#start-of-content)

[All gists](/discover)
[Back to GitHub](https://github.com)
[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2FpengwGit%2F39760ed5ae03171622ca8215dc0d8c60)
[Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2FpengwGit%2F39760ed5ae03171622ca8215dc0d8c60&source=header-gist)

[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2FpengwGit%2F39760ed5ae03171622ca8215dc0d8c60) [Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2FpengwGit%2F39760ed5ae03171622ca8215dc0d8c60&source=header-gist)

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

Instantly share code, notes, and snippets.

[![@pengwGit](https://avatars.githubusercontent.com/u/33596907?s=64&v=4)](/pengwGit)

# [pengwGit](/pengwGit)/**[gist:39760ed5ae03171622ca8215dc0d8c60](/pengwGit/39760ed5ae03171622ca8215dc0d8c60)** Secret

Last active
December 3, 2024 08:57

Show Gist options

* [Download ZIP](/pengwGit/39760ed5ae03171622ca8215dc0d8c60/archive/45df1e1296c050b263d02efb9aec37c8e96be1f6.zip)

* [Star
  (0)
  0](/login?return_to=https%3A%2F%2Fgist.github.com%2FpengwGit%2F39760ed5ae03171622ca8215dc0d8c60)You must be signed in to star a gist
* [Fork
  (0)
  0](/login?return_to=https%3A%2F%2Fgist.github.com%2FpengwGit%2F39760ed5ae03171622ca8215dc0d8c60)You must be signed in to fork a gist

* Embed

  + Embed
     Embed this gist in your website.
  + Share
     Copy sharable link for this gist.
  + Clone via HTTPS
     Clone using the web URL.
  + [Learn more about clone URLs](https://docs.github.com/articles/which-remote-url-should-i-use)

  Clone this repository at &lt;script src=&quot;https://gist.github.com/pengwGit/39760ed5ae03171622ca8215dc0d8c60.js&quot;&gt;&lt;/script&gt;
* Save pengwGit/39760ed5ae03171622ca8215dc0d8c60 to your computer and use it in GitHub Desktop.

[Code](/pengwGit/39760ed5ae03171622ca8215dc0d8c60)
[Revisions
2](/pengwGit/39760ed5ae03171622ca8215dc0d8c60/revisions)

Embed

* Embed
   Embed this gist in your website.
* Share
   Copy sharable link for this gist.
* Clone via HTTPS
   Clone using the web URL.
* [Learn more about clone URLs](https://docs.github.com/articles/which-remote-url-should-i-use)

Clone this repository at &lt;script src=&quot;https://gist.github.com/pengwGit/39760ed5ae03171622ca8215dc0d8c60.js&quot;&gt;&lt;/script&gt;

Save pengwGit/39760ed5ae03171622ca8215dc0d8c60 to your computer and use it in GitHub Desktop.

[Download ZIP](/pengwGit/39760ed5ae03171622ca8215dc0d8c60/archive/45df1e1296c050b263d02efb9aec37c8e96be1f6.zip)

CVE-2024-50948

 [Raw](/pengwGit/39760ed5ae03171622ca8215dc0d8c60/raw/45df1e1296c050b263d02efb9aec37c8e96be1f6/gistfile1.txt)

[**gistfile1.txt**](#file-gistfile1-txt)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

|  | [CVE ID] |
| --- | --- |
|  | CVE-2024-50948 |
|  | [Product] |
|  | mochi MQTT v2.6.3 |
|  | [Problem Type] |
|  | DoS |
|  | [Description] |
|  | An issue in mochi MQTT v2.6.3 allows attackers to cause a Denial of Service. |
|  | [Affected Component] |
|  | Directly causing the entire broker to collapse and unable to provide normal services |
|  | [Attack Vectors] |
|  | My experimental environment is i7-9700, memory 16G.Based on this, I created a ubuntu operating system virtual machine with 4G memory and 2 cores, and then installed mochi mqtt on it. |
|  | Randomly construct MQTT data packets and continuously send a large number of malicious data packets to mochi broker based on the TCP/IP protocol. It can be observed that the physical memory usage of the mochi process continues to increase, even up to 90%, and finally triggers the Out of Memory Killer mechanism of the Linux operating system, forcibly ending the process and causing the MQTT service to be interrupted. |
|  | Especially when multiple test tools are turned on to send data packets, the crash time of mochi mqtt is shorter. |
|  | This may occur because the fuzzer repeatedly generates different client IDs and the session expires for too long. |

[Sign up for free](/join?source=comment-gist)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgist.github.com%2FpengwGit%2F39760ed5ae03171622ca8215dc0d8c60)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_69009282_20250114_181913.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmochi-mqtt%2Fserver)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmochi-mqtt%2Fserver)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=mochi-mqtt%2Fserver)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[mochi-mqtt](/mochi-mqtt)
/
**[server](/mochi-mqtt/server)**
Public

* [Notifications](/login?return_to=%2Fmochi-mqtt%2Fserver) You must be signed in to change notification settings
* [Fork
  230](/login?return_to=%2Fmochi-mqtt%2Fserver)
* [Star
   1.4k](/login?return_to=%2Fmochi-mqtt%2Fserver)

The fully compliant, embeddable high-performance Go MQTT v5 server for IoT, smarthome, and pubsub

### License

[MIT license](/mochi-mqtt/server/blob/main/LICENSE.md)

[1.4k
stars](/mochi-mqtt/server/stargazers) [230
forks](/mochi-mqtt/server/forks) [Branches](/mochi-mqtt/server/branches) [Tags](/mochi-mqtt/server/tags) [Activity](/mochi-mqtt/server/activity)
 [Star](/login?return_to=%2Fmochi-mqtt%2Fserver)

 [Notifications](/login?return_to=%2Fmochi-mqtt%2Fserver) You must be signed in to change notification settings

* [Code](/mochi-mqtt/server)
* [Issues
  18](/mochi-mqtt/server/issues)
* [Pull requests
  6](/mochi-mqtt/server/pulls)
* [Discussions](/mochi-mqtt/server/discussions)
* [Actions](/mochi-mqtt/server/actions)
* [Projects
  1](/mochi-mqtt/server/projects)
* [Security](/mochi-mqtt/server/security)
* [Insights](/mochi-mqtt/server/pulse)

Additional navigation options

* [Code](/mochi-mqtt/server)
* [Issues](/mochi-mqtt/server/issues)
* [Pull requests](/mochi-mqtt/server/pulls)
* [Discussions](/mochi-mqtt/server/discussions)
* [Actions](/mochi-mqtt/server/actions)
* [Projects](/mochi-mqtt/server/projects)
* [Security](/mochi-mqtt/server/security)
* [Insights](/mochi-mqtt/server/pulse)

# mochi-mqtt/server

    main[Branches](/mochi-mqtt/server/branches)[Tags](/mochi-mqtt/server/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[578 Commits](/mochi-mqtt/server/commits/main/) | | |
| [.github/workflows](/mochi-mqtt/server/tree/main/.github/workflows "This path skips through empty directories") | | [.github/workflows](/mochi-mqtt/server/tree/main/.github/workflows "This path skips through empty directories") |  |  |
| [cmd](/mochi-mqtt/server/tree/main/cmd "cmd") | | [cmd](/mochi-mqtt/server/tree/main/cmd "cmd") |  |  |
| [config](/mochi-mqtt/server/tree/main/config "config") | | [config](/mochi-mqtt/server/tree/main/config "config") |  |  |
| [examples](/mochi-mqtt/server/tree/main/examples "examples") | | [examples](/mochi-mqtt/server/tree/main/examples "examples") |  |  |
| [hooks](/mochi-mqtt/server/tree/main/hooks "hooks") | | [hooks](/mochi-mqtt/server/tree/main/hooks "hooks") |  |  |
| [listeners](/mochi-mqtt/server/tree/main/listeners "listeners") | | [listeners](/mochi-mqtt/server/tree/main/listeners "listeners") |  |  |
| [mempool](/mochi-mqtt/server/tree/main/mempool "mempool") | | [mempool](/mochi-mqtt/server/tree/main/mempool "mempool") |  |  |
| [packets](/mochi-mqtt/server/tree/main/packets "packets") | | [packets](/mochi-mqtt/server/tree/main/packets "packets") |  |  |
| [system](/mochi-mqtt/server/tree/main/system "system") | | [system](/mochi-mqtt/server/tree/main/system "system") |  |  |
| [.gitignore](/mochi-mqtt/server/blob/main/.gitignore ".gitignore") | | [.gitignore](/mochi-mqtt/server/blob/main/.gitignore ".gitignore") |  |  |
| [.golangci.yml](/mochi-mqtt/server/blob/main/.golangci.yml ".golangci.yml") | | [.golangci.yml](/mochi-mqtt/server/blob/main/.golangci.yml ".golangci.yml") |  |  |
| [Dockerfile](/mochi-mqtt/server/blob/main/Dockerfile "Dockerfile") | | [Dockerfile](/mochi-mqtt/server/blob/main/Dockerfile "Dockerfile") |  |  |
| [LICENSE.md](/mochi-mqtt/server/blob/main/LICENSE.md "LICENSE.md") | | [LICENSE.md](/mochi-mqtt/server/blob/main/LICENSE.md "LICENSE.md") |  |  |
| [README-CN.md](/mochi-mqtt/server/blob/main/README-CN.md "README-CN.md") | | [README-CN.md](/mochi-mqtt/server/blob/main/README-CN.md "README-CN.md") |  |  |
| [README-JP.md](/mochi-mqtt/server/blob/main/README-JP.md "README-JP.md") | | [README-JP.md](/mochi-mqtt/server/blob/main/README-JP.md "README-JP.md") |  |  |
| [README.md](/mochi-mqtt/server/blob/main/README.md "README.md") | | [README.md](/mochi-mqtt/server/blob/main/README.md "README.md") |  |  |
| [clients.go](/mochi-mqtt/server/blob/main/clients.go "clients.go") | | [clients.go](/mochi-mqtt/server/blob/main/clients.go "clients.go") |  |  |
| [clients\_test.go](/mochi-mqtt/server/blob/main/clients_test.go "clients_test.go") | | [clients\_test.go](/mochi-mqtt/server/blob/main/clients_test.go "clients_test.go") |  |  |
| [config.yaml](/mochi-mqtt/server/blob/main/config.yaml "config.yaml") | | [config.yaml](/mochi-mqtt/server/blob/main/config.yaml "config.yaml") |  |  |
| [go.mod](/mochi-mqtt/server/blob/main/go.mod "go.mod") | | [go.mod](/mochi-mqtt/server/blob/main/go.mod "go.mod") |  |  |
| [go.sum](/mochi-mqtt/server/blob/main/go.sum "go.sum") | | [go.sum](/mochi-mqtt/server/blob/main/go.sum "go.sum") |  |  |
| [hooks.go](/mochi-mqtt/server/blob/main/hooks.go "hooks.go") | | [hooks.go](/mochi-mqtt/server/blob/main/hooks.go "hooks.go") |  |  |
| [hooks\_test.go](/mochi-mqtt/server/blob/main/hooks_test.go "hooks_test.go") | | [hooks\_test.go](/mochi-mqtt/server/blob/main/hooks_test.go "hooks_test.go") |  |  |
| [inflight.go](/mochi-mqtt/server/blob/main/inflight.go "inflight.go") | | [inflight.go](/mochi-mqtt/server/blob/main/inflight.go "inflight.go") |  |  |
| [inflight\_test.go](/mochi-mqtt/server/blob/main/inflight_test.go "inflight_test.go") | | [inflight\_test.go](/mochi-mqtt/server/blob/main/inflight_test.go "inflight_test.go") |  |  |
| [server.go](/mochi-mqtt/server/blob/main/server.go "server.go") | | [server.go](/mochi-mqtt/server/blob/main/server.go "server.go") |  |  |
| [server\_test.go](/mochi-mqtt/server/blob/main/server_test.go "server_test.go") | | [server\_test.go](/mochi-mqtt/server/blob/main/server_test.go "server_test.go") |  |  |
| [topics.go](/mochi-mqtt/server/blob/main/topics.go "topics.go") | | [topics.go](/mochi-mqtt/server/blob/main/topics.go "topics.go") |  |  |
| [topics\_test.go](/mochi-mqtt/server/blob/main/topics_test.go "topics_test.go") | | [topics\_test.go](/mochi-mqtt/server/blob/main/topics_test.go "topics_test.go") |  |  |
| View all files | | |

## Repository files navigation

* README
* MIT license
# Mochi-MQTT Server

[![build status](https://github.com/mochi-mqtt/server/actions/workflows/build.yml/badge.svg)](https://github.com/mochi-mqtt/server/actions/workflows/build.yml/badge.svg)
[![Coverage Status](https://camo.githubusercontent.com/c169daa25c2996174913b7c118e9eb305688675da066960925f8e22878d66270/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f6d6f6368692d6d7174742f7365727665722f62616467652e7376673f6272616e63683d6d6173746572267632)](https://coveralls.io/github/mochi-mqtt/server?branch=master)
[![Go Report Card](https://camo.githubusercontent.com/56e49440374909104c7ba0acd0ec029bb108b734f91cedd911ec9fa3eb59ee06/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f6d6f6368692d6d7174742f736572766572)](https://goreportcard.com/report/github.com/mochi-mqtt/server/v2)
[![Go Reference](https://camo.githubusercontent.com/8d419a550eaa636ce9bff2040d0df5e389981c1ac70f333db2b50eb9e8291dbc/68747470733a2f2f706b672e676f2e6465762f62616467652f6769746875622e636f6d2f6d6f6368692d6d7174742f7365727665722e737667)](https://pkg.go.dev/github.com/mochi-mqtt/server/v2)
[![contributions welcome](https://camo.githubusercontent.com/a93286920599112849c7c2af9d239294be27738b440248e434813b1bd0ffb368/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636f6e747269627574696f6e732d77656c636f6d652d627269676874677265656e2e7376673f7374796c653d666c6174)](https://github.com/mochi-mqtt/server/issues)

[English](/mochi-mqtt/server/blob/main/README.md) | [简体中文](/mochi-mqtt/server/blob/main/README-CN.md) | [日本語](/mochi-mqtt/server/blob/main/README-JP.md) | [Translators Wanted!](https://github.com/orgs/mochi-mqtt/discussions/310)

🎆 **mochi-co/mqtt is now part of the new mochi-mqtt organisation.** [Read about this announcement here.](https://github.com/orgs/mochi-mqtt/discussions/271)

### Mochi-MQTT is a fully compliant, embeddable high-performance Go MQTT v5 (and v3.1.1) broker/server

Mochi MQTT is an embeddable [fully compliant](https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html) MQTT v5 broker server written in Go, designed for the development of telemetry and internet-of-things projects. The server can be used either as a standalone binary or embedded as a library in your own applications, and has been designed to be as lightweight and fast as possible, with great care taken to ensure the quality and maintainability of the project.

#### What is MQTT?

MQTT stands for [MQ Telemetry Transport](https://en.wikipedia.org/wiki/MQTT). It is a publish/subscribe, extremely simple and lightweight messaging protocol, designed for constrained devices and low-bandwidth, high-latency or unreliable networks ([Learn more](https://mqtt.org/faq)). Mochi MQTT fully implements version 5.0.0 of the MQTT protocol.

#### Mochi-MQTT Features

* Full MQTTv5 Feature Compliance, compatibility for MQTT v3.1.1 and v3.0.0:
  + User and MQTTv5 Packet Properties
  + Topic Aliases
  + Shared Subscriptions
  + Subscription Options and Subscription Identifiers
  + Message Expiry
  + Client Session Expiry
  + Send and Receive QoS Flow Control Quotas
  + Server-side Disconnect and Auth Packets
  + Will Delay Intervals
  + Plus all the original MQTT features of Mochi MQTT v1, such as Full QoS(0,1,2), $SYS topics, retained messages, etc.
* Developer-centric:
  + Most core broker code is now exported and accessible, for total developer control.
  + Full-featured and flexible Hook-based interfacing system to provide easy 'plugin' development.
  + Direct Packet Injection using special inline client, or masquerade as existing clients.
* Performant and Stable:
  + Our classic trie-based Topic-Subscription model.
  + Client-specific write buffers to avoid issues with slow-reading or irregular client behaviour.
  + Passes all [Paho Interoperability Tests](https://github.com/eclipse/paho.mqtt.testing/tree/master/interoperability) for MQTT v5 and MQTT v3.
  + Over a thousand carefully considered unit test scenarios.
* TCP, Websocket (including SSL/TLS), and $SYS Dashboard listeners.
* Built-in Redis, Badger, Pebble and Bolt Persistence using Hooks (but you can also make your own).
* Built-in Rule-based Authentication and ACL Ledger using Hooks (also make your own).

### Compatibility Notes

Because of the overlap between the v5 specification and previous versions of mqtt, the server can accept both v5 and v3 clients, but note that in cases where both v5 an v3 clients are connected, properties and features provided for v5 clients will be downgraded for v3 clients (such as user properties).

Support for MQTT v3.0.0 and v3.1.1 is considered hybrid-compatibility. Where not specifically restricted in the v3 specification, more modern and safety-first v5 behaviours are used instead - such as expiry for inflight and retained messages, and clients - and quality-of-service flow control limits.

#### When is this repo updated?

Unless it's a critical issue, new releases typically go out over the weekend.

## Roadmap

* Please [open an issue](https://github.com/mochi-mqtt/server/issues) to request new features or event hooks!
* Cluster support.
* Enhanced Metrics support.

## Quick Start

### Running the Broker with Go

Mochi MQTT can be used as a standalone broker. Simply checkout this repository and run the [cmd/main.go](/mochi-mqtt/server/blob/main/cmd/main.go) entrypoint in the [cmd](/mochi-mqtt/server/blob/main/cmd) folder which will expose tcp (:1883), websocket (:1882), and dashboard (:8080) listeners.

```
cd cmd
go build -o mqtt && ./mqtt

```

### Using Docker

You can now pull and run the [official Mochi MQTT image](https://hub.docker.com/r/mochimqtt/server) from our Docker repo:

```
docker pull mochimqtt/server
or
docker run -v $(pwd)/config.yaml:/config.yaml mochimqtt/server
```

For most use cases, you can use File Based Configuration to configure the server, by specifying a valid `yaml` or `json` config file.

A simple Dockerfile is provided for running the [cmd/main.go](/mochi-mqtt/server/blob/main/cmd/main.go) Websocket, TCP, and Stats server, using the `allow-all` auth hook.

```
docker build -t mochi:latest .
docker run -p 1883:1883 -p 1882:1882 -p 8080:8080 -v $(pwd)/config.yaml:/config.yaml mochi:latest
```

### File Based Configuration

You can use File Based Configuration with either the Docker image (described above), or by running the build binary with the `--config=config.yaml` or `--config=config.json` parameter.

Configuration files provide a convenient mechanism for easily preparing a server with the most common configurations. You can enable and configure built-in hooks and listeners, and specify server options and compatibilities:

```
listeners:
  - type: "tcp"
    id: "tcp12"
    address: ":1883"
  - type: "ws"
    id: "ws1"
    address: ":1882"
  - type: "sysinfo"
    id: "stats"
    address: ":1880"
hooks:
  auth:
    allow_all: true
options:
  inline_client: true
```

Please review the examples found in [examples/config](/mochi-mqtt/server/blob/main/examples/config) for all available configuration options.

There are a few conditions to note:

1. If you use file-based configuration, the supported hook types for configuration are currently limited to auth, storage, and debug. Each type of hook can only have one instance.
2. You can only use built in hooks with file-based configuration, as the type and configuration structure needs to be known by the server in order for it to be applied.
3. You can only use built in listeners, for the reasons above.

If you need to implement custom hooks or listeners, please do so using the traditional manner indicated in [cmd/main.go](/mochi-mqtt/server/blob/main/cmd/main.go).

## Developing with Mochi MQTT

### Importing as a package

Importing Mochi MQTT as a package requires just a few lines of code to get started.

```
import (
  "log"

  mqtt "github.com/mochi-mqtt/server/v2"
  "github.com/mochi-mqtt/server/v2/hooks/auth"
  "github.com/mochi-mqtt/server/v2/listeners"
)

func main() {
  // Create signals channel to run server until interrupted
  sigs := make(chan os.Signal, 1)
  done := make(chan bool, 1)
  signal.Notify(sigs, syscall.SIGINT, syscall.SIGTERM)
  go func() {
    <-sigs
    done <- true
  }()

  // Create the new MQTT Server.
  server := mqtt.New(nil)

  // Allow all connections.
  _ = server.AddHook(new(auth.AllowHook), nil)

  // Create a TCP listener on a standard port.
  tcp := listeners.NewTCP(listeners.Config{ID: "t1", Address: ":1883"})
  err := server.AddListener(tcp)
  if err != nil {
    log.Fatal(err)
  }

  go func() {
    err := server.Serve()
    if err != nil {
      log.Fatal(err)
    }
  }()

  // Run server until interrupted
  <-done

  // Cleanup
}
```

Examples of running the broker with various configurations can be found in the [examples](/mochi-mqtt/server/blob/main/examples) folder.

#### Network Listeners

The server comes with a variety of pre-packaged network listeners which allow the broker to accept connections on different protocols. The current listeners are:

| Listener | Usage |
| --- | --- |
| listeners.NewTCP | A TCP listener |
| listeners.NewUnixSock | A Unix Socket listener |
| listeners.NewNet | A net.Listener listener |
| listeners.NewWebsocket | A Websocket listener |
| listeners.NewHTTPStats | An HTTP $SYS info dashboard |
| listeners.NewHTTPHealthCheck | An HTTP healthcheck listener to provide health check responses for e.g. cloud infrastructure |

> Use the `listeners.Listener` interface to develop new listeners. If you do, please let us know!

A `*listeners.Config` may be passed to configure TLS.

Examples of usage can be found in the [examples](/mochi-mqtt/server/blob/main/examples) folder or [cmd/main.go](/mochi-mqtt/server/blob/main/cmd/main.go).

## Server Options and Capabilities

A number of configurable options are available which can be used to alter the behaviour or restrict access to certain features in the server.

```
server := mqtt.New(&mqtt.Options{
  Capabilities: mqtt.Capabilities{
    MaximumSessionExpiryInterval: 3600,
    MaximumClientWritesPending: 3,
    Compatibilities: mqtt.Compatibilities{
      ObscureNotAuthorized: true,
    },
  },
  ClientNetWriteBufferSize: 4096,
  ClientNetReadBufferSize: 4096,
  SysTopicResendInterval: 10,
  InlineClient: false,
})
```

Review the mqtt.Options, mqtt.Capabilities, and mqtt.Compatibilities structs for a comprehensive list of options. `ClientNetWriteBufferSize` and `ClientNetReadBufferSize` can be configured to adjust memory usage per client, based on your needs. The size of `Capabilities.MaximumClientWritesPending` will affect the memory usage of the server. If the number of IoT devices online at the same time is large, and the set value is very large, even if there is no data transmission, the memory usage of the server will increase a lot. The default value is 1024\*8, and this parameter can be adjusted according to the actual situation.

### Default Configuration Notes

Some choices were made when deciding the default configuration that need to be mentioned here:

* By default, the value of `server.Options.Capabilities.MaximumMessageExpiryInterval` is set to 86400 (24 hours), in order to prevent exposing the broker to DOS attacks on hostile networks when using the out-of-the-box configuration (as an infinite expiry would allow an infinite number of retained/inflight messages to accumulate). If you are operating in a trusted environment, or you have capacity for a larger retention period, you may wish to override this (set to `0` for no expiry).

## Event Hooks

A universal event hooks system allows developers to hook into various parts of the server and client life cycle to add and modify functionality of the broker. These universal hooks are used to provide everything from authentication, persistent storage, to debugging tools.

Hooks are stackable - you can add multiple hooks to a server, and they will be run in the order they were added. Some hooks modify values, and these modified values will be passed to the subsequent hooks before being returned to the runtime code.

| Type | Import | Info |
| --- | --- | --- |
| Access Control | [mochi-mqtt/server/hooks/auth . AllowHook](/mochi-mqtt/server/blob/main/hooks/auth/allow_all.go) | Allow access to all connecting clients and read/write to all topics. |
| Access Control | [mochi-mqtt/server/hooks/auth . Auth](/mochi-mqtt/server/blob/main/hooks/auth/auth.go) | Rule-based access control ledger. |
| Persistence | [mochi-mqtt/server/hooks/storage/bolt](/mochi-mqtt/server/blob/main/hooks/storage/bolt/bolt.go) | Persistent storage using [BoltDB](https://dbdb.io/db/boltdb) (deprecated). |
| Persistence | [mochi-mqtt/server/hooks/storage/badger](/mochi-mqtt/server/blob/main/hooks/storage/badger/badger.go) | Persistent storage using [BadgerDB](https://github.com/dgraph-io/badger). |
| Persistence | [mochi-mqtt/server/hooks/storage/pebble](/mochi-mqtt/server/blob/main/hooks/storage/pebble/pebble.go) | Persistent storage using [PebbleDB](https://github.com/cockroachdb/pebble). |
| Persistence | [mochi-mqtt/server/hooks/storage/redis](/mochi-mqtt/server/blob/main/hooks/storage/redis/redis.go) | Persistent storage using [Redis](https://redis.io). |
| Debugging | [mochi-mqtt/server/hooks/debug](/mochi-mqtt/server/blob/main/hooks/debug/debug.go) | Additional debugging output to visualise packet flow. |

Many of the internal server functions are now exposed to developers, so you can make your own Hooks by using the above as examples. If you do, please [Open an issue](https://github.com/mochi-mqtt/server/issues) and let everyone know!

### Access Control

#### Allow Hook

By default, Mochi MQTT uses a DENY-ALL access control rule. To allow connections, this must overwritten using an Access Control hook. The simplest of these hooks is the `auth.AllowAll` hook, which provides ALLOW-ALL rules to all connections, subscriptions, and publishing. It's also the simplest hook to use:

```
server := mqtt.New(nil)
_ = server.AddHook(new(auth.AllowHook), nil)
```
> Don't do this if you are exposing your server to the internet or untrusted networks - it should really be used for development, testing, and debugging only.

#### Auth Ledger

The Auth Ledger hook provides a sophisticated mechanism for defining access rules in a struct format. Auth ledger rules come in two forms: Auth rules (connection), and ACL rules (publish subscribe).

Auth rules have 4 optional criteria and an assertion flag:

| Criteria | Usage |
| --- | --- |
| Client | client id of the connecting client |
| Username | username of the connecting client |
| Password | password of the connecting client |
| Remote | the remote address or ip of the client |
| Allow | true (allow this user) or false (deny this user) |

ACL rules have 3 optional criteria and an filter match:

| Criteria | Usage |
| --- | --- |
| Client | client id of the connecting client |
| Username | username of the connecting client |
| Remote | the remote address or ip of the client |
| Filters | an array of filters to match |

Rules are processed in index order (0,1,2,3), returning on the first matching rule. See [hooks/auth/ledger.go](/mochi-mqtt/server/blob/main/hooks/auth/ledger.go) to review the structs.

```
server := mqtt.New(nil)
err := server.AddHook(new(auth.Hook), &auth.Options{
    Ledger: &auth.Ledger{
    Auth: auth.AuthRules{ // Auth disallows all by default
      {Username: "peach", Password: "password1", Allow: true},
      {Username: "melon", Password: "password2", Allow: true},
      {Remote: "127.0.0.1:*", Allow: true},
      {Remote: "localhost:*", Allow: true},
    },
    ACL: auth.ACLRules{ // ACL allows all by default
      {Remote: "127.0.0.1:*"}, // local superuser allow all
      {
        // user melon can read and write to their own topic
        Username: "melon", Filters: auth.Filters{
          "melon/#":   auth.ReadWrite,
          "updates/#": auth.WriteOnly, // can write to updates, but can't read updates from others
        },
      },
      {
        // Otherwise, no clients have publishing permissions
        Filters: auth.Filters{
          "#":         auth.ReadOnly,
          "updates/#": auth.Deny,
        },
      },
    },
  }
})
```

The ledger can also be stored as JSON or YAML and loaded using the Data field:

```
err := server.AddHook(new(auth.Hook), &auth.Options{
    Data: data, // build ledger from byte slice: yaml or json
})
```

See [examples/auth/encoded/main.go](/mochi-mqtt/server/blob/main/examples/auth/encoded/main.go) for more information.

### Persistent Storage

#### Redis

A basic Redis storage hook is available which provides persistence for the broker. It can be added to the server in the same fashion as any other hook, with several options. It uses github.com/go-redis/redis/v8 under the hook, and is completely configurable through the Options value.

```
err := server.AddHook(new(redis.Hook), &redis.Options{
  Options: &rv8.Options{
    Addr:     "localhost:6379", // default redis address
    Password: "",               // your password
    DB:       0,                // your redis db
  },
})
if err != nil {
  log.Fatal(err)
}
```

For more information on how the redis hook works, or how to use it, see the [examples/persistence/redis/main.go](/mochi-mqtt/server/blob/main/examples/persistence/redis/main.go) or [hooks/storage/redis](/mochi-mqtt/server/blob/main/hooks/storage/redis) code.

#### Pebble DB

There's also a Pebble Db storage hook if you prefer file-based storage. It can be added and configured in much the same way as the other hooks (with somewhat less options).

```
err := server.AddHook(new(pebble.Hook), &pebble.Options{
  Path: pebblePath,
  Mode: pebble.NoSync,
})
if err != nil {
  log.Fatal(err)
}
```

For more information on how the pebble hook works, or how to use it, see the [examples/persistence/pebble/main.go](/mochi-mqtt/server/blob/main/examples/persistence/pebble/main.go) or [hooks/storage/pebble](/mochi-mqtt/server/blob/main/hooks/storage/pebble) code.

#### Badger DB

Similarly, for file-based storage, there is also a BadgerDB storage hook available. It can be added and configured in much the same way as the other hooks.

```
err := server.AddHook(new(badger.Hook), &badger.Options{
  Path: badgerPath,
})
if err != nil {
  log.Fatal(err)
}
```

For more information on how the badger hook works, or how to use it, see the [examples/persistence/badger/main.go](/mochi-mqtt/server/blob/main/examples/persistence/badger/main.go) or [hooks/storage/badger](/mochi-mqtt/server/blob/main/hooks/storage/badger) code.

There is also a BoltDB hook which has been deprecated in favour of Badger, but if you need it, check [examples/persistence/bolt/main.go](/mochi-mqtt/server/blob/main/examples/persistence/bolt/main.go).

## Developing with Event Hooks

Many hooks are available for interacting with the broker and client lifecycle.
The function signatures for all the hooks and `mqtt.Hook` interface can be found in [hooks.go](/mochi-mqtt/server/blob/main/hooks.go).

> The most flexible event hooks are OnPacketRead, OnPacketEncode, and OnPacketSent - these hooks be used to control and modify all incoming and outgoing packets.

| Function | Usage |
| --- | --- |
| OnStarted | Called when the server has successfully started. |
| OnStopped | Called when the server has successfully stopped. |
| OnConnectAuthenticate | Called when a user attempts to authenticate with the server. An implementation of this method MUST be used to allow or deny access to the server (see hooks/auth/allow\_all or basic). It can be used in custom hooks to check connecting users against an existing user database. Returns true if allowed. |
| OnACLCheck | Called when a user attempts to publish or subscribe to a topic filter. As above. |
| OnSysInfoTick | Called when the $SYS topic values are published out. |
| OnConnect | Called when a new client connects, may return an error or packet code to halt the client connection process. |
| OnSessionEstablish | Called immediately after a new client connects and authenticates and immediately before the session is established and CONNACK is sent. |
| OnSessionEstablished | Called when a new client successfully establishes a session (after OnConnect) |
| OnDisconnect | Called when a client is disconnected for any reason. |
| OnAuthPacket | Called when an auth packet is received. It is intended to allow developers to create their own mqtt v5 Auth Packet handling mechanisms. Allows packet modification. |
| OnPacketRead | Called when a packet is received from a client. Allows packet modification. |
| OnPacketEncode | Called immediately before a packet is encoded to be sent to a client. Allows packet modification. |
| OnPacketSent | Called when a packet has been sent to a client. |
| OnPacketProcessed | Called when a packet has been received and successfully handled by the broker. |
| OnSubscribe | Called when a client subscribes to one or more filters. Allows packet modification. |
| OnSubscribed | Called when a client successfully subscribes to one or more filters. |
| OnSelectSubscribers | Called when subscribers have been collected for a topic, but before shared subscription subscribers have been selected. Allows receipient modification. |
| OnUnsubscribe | Called when a client unsubscribes from one or more filters. Allows packet modification. |
| OnUnsubscribed | Called when a client successfully unsubscribes from one or more filters. |
| OnPublish | Called when a client publishes a message. Allows packet modification. |
| OnPublished | Called when a client has published a message to subscribers. |
| OnPublishDropped | Called when a message to a client is dropped before delivery, such as if the client is taking too long to respond. |
| OnRetainMessage | Called then a published message is retained. |
| OnRetainPublished | Called then a retained message is published to a client. |
| OnQosPublish | Called when a publish packet with Qos >= 1 is issued to a subscriber. |
| OnQosComplete | Called when the Qos flow for a message has been completed. |
| OnQosDropped | Called when an inflight message expires before completion. |
| OnPacketIDExhausted | Called when a client runs out of unused packet ids to assign. |
| OnWill | Called when a client disconnects and intends to issue a will message. Allows packet modification. |
| OnWillSent | Called when an LWT message has been issued from a disconnecting client. |
| OnClientExpired | Called when a client session has expired and should be deleted. |
| OnRetainedExpired | Called when a retained message has expired and should be deleted. |
| StoredClients | Returns clients, eg. from a persistent store. |
| StoredSubscriptions | Returns client subscriptions, eg. from a persistent store. |
| StoredInflightMessages | Returns inflight messages, eg. from a persistent store. |
| StoredRetainedMessages | Returns retained messages, eg. from a persistent store. |
| StoredSysInfo | Returns stored system info values, eg. from a persistent store. |

If you are building a persistent storage hook, see the existing persistent hooks for inspiration and patterns. If you are building an auth hook, you will need `OnACLCheck` and `OnConnectAuthenticate`.

### Inline Client (v2.4.0+)

It's now possible to subscribe and publish to topics directly from the embedding code, by using the `inline client` feature. Currently, the inline client does not support shared subscriptions. The Inline Client is an embedded client which operates as part of the server, and can be enabled in the server options:

```
server := mqtt.New(&mqtt.Options{
  InlineClient: true,
})
```

Once enabled, you will be able to use the `server.Publish`, `server.Subscribe`, and `server.Unsubscribe` methods to issue and received messages from broker-adjacent code.

> See [direct examples](/mochi-mqtt/server/blob/main/examples/direct/main.go) for real-life usage examples.

#### Inline Publish

To publish basic message to a topic from within the embedding application, you can use the `server.Publish(topic string, payload []byte, retain bool, qos byte) error` method.

```
err := server.Publish("direct/publish", []byte("packet scheduled message"), false, 0)
```
> The Qos byte in this case is only used to set the upper qos limit available for subscribers, as per MQTT v5 spec.

#### Inline Subscribe

To subscribe to a topic filter from within the embedding application, you can use the `server.Subscribe(filter string, subscriptionId int, handler InlineSubFn) error` method with a callback function. Note that only QoS 0 is supported for inline subscriptions. If you wish to have multiple callbacks for the same filter, you can use the MQTTv5 `subscriptionId` property to differentiate.

```
callbackFn := func(cl *mqtt.Client, sub packets.Subscription, pk packets.Packet) {
    server.Log.Info("inline client received message from subscription", "client", cl.ID, "subscriptionId", sub.Identifier, "topic", pk.TopicName, "payload", string(pk.Payload))
}
server.Subscribe("direct/#", 1, callbackFn)
```

#### Inline Unsubscribe

You may wish to unsubscribe if you have subscribed to a filter using the inline client. You can do this easily with the `server.Unsubscribe(filter string, subscriptionId int) error` method:

```
server.Unsubscribe("direct/#", 1)
```

### Packet Injection

If you want more control, or want to set specific MQTT v5 properties and other values you can create your own publish packets from a client of your choice. This method allows you to inject MQTT packets (no just publish) directly into the runtime as though they had been received by a specific client.

Packet injection can be used for any MQTT packet, including ping requests, subscriptions, etc. And because the Clients structs and methods are now exported, you can even inject packets on behalf of a connected client (if you have a very custom requirements).

Most of the time you'll want to use the Inline Client described above, as it has unique privileges: it bypasses all ACL and topic validation checks, meaning it can even publish to $SYS topics. In this case, you can create an inline client from scratch which will behave the same as the built-in inline client.

```
cl := server.NewClient(nil, "local", "inline", true)
server.InjectPacket(cl, packets.Packet{
  FixedHeader: packets.FixedHeader{
    Type: packets.Publish,
  },
  TopicName: "direct/publish",
  Payload: []byte("scheduled message"),
})
```
> MQTT packets still need to be correctly formed, so refer our [the test packets catalogue](/mochi-mqtt/server/blob/main/packets/tpackets.go) and [MQTTv5 Specification](https://docs.oasis-open.org/mqtt/mqtt/v5.0/os/mqtt-v5.0-os.html) for inspiration.

See the [hooks example](/mochi-mqtt/server/blob/main/examples/hooks/main.go) to see this feature in action.

### Testing

#### Unit Tests

Mochi MQTT tests over a thousand scenarios with thoughtfully hand written unit tests to ensure each function does exactly what we expect. You can run the tests using go:

```
go run --cover ./...

```

#### Paho Interoperability Test

You can check the broker against the [Paho Interoperability Test](https://github.com/eclipse/paho.mqtt.testing/tree/master/interoperability) by starting the broker using `examples/paho/main.go`, and then running the mqtt v5 and v3 tests with `python3 client_test5.py` from the *interoperability* folder.

> Note that there are currently a number of outstanding issues regarding false negatives in the paho suite, and as such, certain compatibility modes are enabled in the `paho/main.go` example.

## Performance Benchmarks

Mochi MQTT performance is comparable with popular brokers such as Mosquitto, EMQX, and others.

Performance benchmarks were tested using [MQTT-Stresser](https://github.com/inovex/mqtt-stresser) on a Apple Macbook Air M2, using `cmd/main.go` default settings. Taking into account bursts of high and low throughput, the median scores are the most useful. Higher is better.

> The values presented in the benchmark are not representative of true messages per second throughput. They rely on an unusual calculation by mqtt-stresser, but are usable as they are consistent across all brokers.
> Benchmarks are provided as a general performance expectation guideline only. Comparisons are performed using out-of-the-box default configurations.

`mqtt-stresser -broker tcp://localhost:1883 -num-clients=2 -num-messages=10000`

| Broker | publish fastest | median | slowest | receive fastest | median | slowest |
| --- | --- | --- | --- | --- | --- | --- |
| Mochi v2.2.10 | 124,772 | 125,456 | 124,614 | 314,461 | 313,186 | 311,910 |
| [Mosquitto v2.0.15](https://github.com/eclipse/mosquitto) | 155,920 | 155,919 | 155,918 | 185,485 | 185,097 | 184,709 |
| [EMQX v5.0.11](https://github.com/emqx/emqx) | 156,945 | 156,257 | 155,568 | 17,918 | 17,783 | 17,649 |
| [Rumqtt v0.21.0](https://github.com/bytebeamio/rumqtt) | 112,208 | 108,480 | 104,753 | 135,784 | 126,446 | 117,108 |

`mqtt-stresser -broker tcp://localhost:1883 -num-clients=10 -num-messages=10000`

| Broker | publish fastest | median | slowest | receive fastest | median | slowest |
| --- | --- | --- | --- | --- | --- | --- |
| Mochi v2.2.10 | 41,825 | 31,663 | 23,008 | 144,058 | 65,903 | 37,618 |
| Mosquitto v2.0.15 | 42,729 | 38,633 | 29,879 | 23,241 | 19,714 | 18,806 |
| EMQX v5.0.11 | 21,553 | 17,418 | 14,356 | 4,257 | 3,980 | 3,756 |
| Rumqtt v0.21.0 | 42,213 | 23,153 | 20,814 | 49,465 | 36,626 | 19,283 |

Million Message Challenge (hit the server with 1 million messages immediately):

`mqtt-stresser -broker tcp://localhost:1883 -num-clients=100 -num-messages=10000`

| Broker | publish fastest | median | slowest | receive fastest | median | slowest |
| --- | --- | --- | --- | --- | --- | --- |
| Mochi v2.2.10 | 13,532 | 4,425 | 2,344 | 52,120 | 7,274 | 2,701 |
| Mosquitto v2.0.15 | 3,826 | 3,395 | 3,032 | 1,200 | 1,150 | 1,118 |
| EMQX v5.0.11 | 4,086 | 2,432 | 2,274 | 434 | 333 | 311 |
| Rumqtt v0.21.0 | 78,972 | 5,047 | 3,804 | 4,286 | 3,249 | 2,027 |

> Not sure what's going on with EMQX here, perhaps the docker out-of-the-box settings are not optimal, so take it with a pinch of salt as we know for a fact it's a solid piece of software.

## Contribution Guidelines

Contributions and feedback are both welcomed and encouraged! [Open an issue](https://github.com/mochi-mqtt/server/issues) to report a bug, ask a question, or make a feature request. If you open a pull request, please try to follow the following guidelines:

* Try to maintain test coverage where reasonably possible.
* Clearly state what the PR does and why.
* Please remember to add your SPDX FileContributor tag to files where you have made a meaningful contribution.

[SPDX Annotations](https://spdx.dev) are used to clearly indicate the license, copyright, and contributions of each file in a machine-readable format. If you are adding a new file to the repository, please ensure it has the following SPDX header:

```
// SPDX-License-Identifier: MIT
// SPDX-FileCopyrightText: 2023 mochi-mqtt
// SPDX-FileContributor: Your name or alias <optional@email.address>

package name
```

Please ensure to add a new `SPDX-FileContributor` line for each contributor to the file. Refer to other files for examples. Please remember to do this, your contributions to this project are valuable and appreciated - it's important to receive credit!

## Stargazers over time 🥰

[![Stargazers over time](https://camo.githubusercontent.com/51dac02ff5ddb0ac2c9c6302e41f4ae12623d51997dc6be730cee5a84a0baad9/68747470733a2f2f7374617263686172742e63632f6d6f6368692d6d7174742f7365727665722e737667)](https://starchart.cc/mochi-mqtt/server)
Are you using Mochi MQTT in a project? [Let us know!](https://github.com/mochi-mqtt/server/issues)

## About

The fully compliant, embeddable high-performance Go MQTT v5 server for IoT, smarthome, and pubsub

### Topics

[golang](/topics/golang "Topic: golang")
[mqtt](/topics/mqtt "Topic: mqtt")
[iot](/topics/iot "Topic: iot")
[tcp](/topics/tcp "Topic: tcp")
[websocket](/topics/websocket "Topic: websocket")
[mqtt-broker](/topics/mqtt-broker "Topic: mqtt-broker")
[golang-library](/topics/golang-library "Topic: golang-library")
[mqtt-server](/topics/mqtt-server "Topic: mqtt-server")
[golang-package](/topics/golang-package "Topic: golang-package")
[mqtt-smarthome](/topics/mqtt-smarthome "Topic: mqtt-smarthome")
[mqttv5](/topics/mqttv5 "Topic: mqttv5")
[mqtt5](/topics/mqtt5 "Topic: mqtt5")
[mqtt3](/topics/mqtt3 "Topic: mqtt3")

### Resources

[Readme](#readme-ov-file)
### License

[MIT license](#MIT-1-ov-file)

[Activity](/mochi-mqtt/server/activity)
[Custom properties](/mochi-mqtt/server/custom-properties)
### Stars

[**1.4k**
stars](/mochi-mqtt/server/stargazers)
### Watchers

[**34**
watching](/mochi-mqtt/server/watchers)
### Forks

[**230**
forks](/mochi-mqtt/server/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fmochi-mqtt%2Fserver&report=mochi-mqtt+%28user%29)

## [Releases 62](/mochi-mqtt/server/releases)

[v2.6.6
Latest

Oct 23, 2024](/mochi-mqtt/server/releases/tag/v2.6.6)
[+ 61 releases](/mochi-mqtt/server/releases)

## [Packages 0](/orgs/mochi-mqtt/packages?repo_name=server)

No packages published

## [Contributors 36](/mochi-mqtt/server/graphs/contributors)

* [![@mochi-co](https://avatars.githubusercontent.com/u/28275108?s=64&v=4)](https://github.com/mochi-co)
* [![@thedevop](https://avatars.githubusercontent.com/u/60499013?s=64&v=4)](https://github.com/thedevop)
* [![@wind-c](https://avatars.githubusercontent.com/u/17872481?s=64&v=4)](https://github.com/wind-c)
* [![@werbenhu](https://avatars.githubusercontent.com/u/5687877?s=64&v=4)](https://github.com/werbenhu)
* [![@dgduncan](https://avatars.githubusercontent.com/u/10761062?s=64&v=4)](https://github.com/dgduncan)
* [![@ClarkQAQ](https://avatars.githubusercontent.com/u/40785118?s=64&v=4)](https://github.com/ClarkQAQ)
* [![@rkennedy](https://avatars.githubusercontent.com/u/619925?s=64&v=4)](https://github.com/rkennedy)
* [![@stffabi](https://avatars.githubusercontent.com/u/9464631?s=64&v=4)](https://github.com/stffabi)
* [![@dependabot[bot]](https://avatars.githubusercontent.com/in/29110?s=64&v=4)](https://github.com/apps/dependabot)
* [![@alexsporn](https://avatars.githubusercontent.com/u/5908067?s=64&v=4)](https://github.com/alexsporn)
* [![@helderjnpinto](https://avatars.githubusercontent.com/u/12281088?s=64&v=4)](https://github.com/helderjnpinto)
* [![@jmacd](https://avatars.githubusercontent.com/u/3629705?s=64&v=4)](https://github.com/jmacd)
* [![@deadprogram](https://avatars.githubusercontent.com/u/5520?s=64&v=4)](https://github.com/deadprogram)
* [![@jphastings](https://avatars.githubusercontent.com/u/42999?s=64&v=4)](https://github.com/jphastings)

[+ 22 contributors](/mochi-mqtt/server/graphs/contributors)

## Languages

* [Go
  100.0%](/mochi-mqtt/server/search?l=go)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


