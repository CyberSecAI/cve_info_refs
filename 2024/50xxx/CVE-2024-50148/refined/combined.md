=== Content from git.kernel.org_17dc8d1a_20250114_232602.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e232728242c4e98fb30e4c6bedb6ba8b482b6301)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e232728242c4e98fb30e4c6bedb6ba8b482b6301)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e232728242c4e98fb30e4c6bedb6ba8b482b6301)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e232728242c4e98fb30e4c6bedb6ba8b482b6301)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ye Bin <yebin10@huawei.com> | 2024-10-14 17:07:08 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:19:21 +0100 |
| commit | [e232728242c4e98fb30e4c6bedb6ba8b482b6301](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e232728242c4e98fb30e4c6bedb6ba8b482b6301) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e232728242c4e98fb30e4c6bedb6ba8b482b6301)) | |
| tree | [1ab3d299967229a4bde9cefed7442b9d2ce00547](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e232728242c4e98fb30e4c6bedb6ba8b482b6301) | |
| parent | [2b0b33e8a58388fa9078f0fbe9af1900e6b08879](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2b0b33e8a58388fa9078f0fbe9af1900e6b08879) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e232728242c4e98fb30e4c6bedb6ba8b482b6301&id2=2b0b33e8a58388fa9078f0fbe9af1900e6b08879)) | |
| download | [linux-e232728242c4e98fb30e4c6bedb6ba8b482b6301.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e232728242c4e98fb30e4c6bedb6ba8b482b6301.tar.gz) | |

Bluetooth: bnep: fix wild-memory-access in proto\_unregister[ Upstream commit 64a90991ba8d4e32e3173ddd83d0b24167a5668c ]
There's issue as follows:
KASAN: maybe wild-memory-access in range [0xdead...108-0xdead...10f]
CPU: 3 UID: 0 PID: 2805 Comm: rmmod Tainted: G W
RIP: 0010:proto\_unregister+0xee/0x400
Call Trace:
<TASK>
\_\_do\_sys\_delete\_module+0x318/0x580
do\_syscall\_64+0xc1/0x1d0
entry\_SYSCALL\_64\_after\_hwframe+0x77/0x7f
As bnep\_init() ignore bnep\_sock\_init()'s return value, and bnep\_sock\_init()
will cleanup all resource. Then when remove bnep module will call
bnep\_sock\_cleanup() to cleanup sock's resource.
To solve above issue just return bnep\_sock\_init()'s return value in
bnep\_exit().
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Signed-off-by: Ye Bin <yebin10@huawei.com>
Signed-off-by: Luiz Augusto von Dentz <luiz.von.dentz@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e232728242c4e98fb30e4c6bedb6ba8b482b6301)

| -rw-r--r-- | [net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/bluetooth/bnep/core.c?id=e232728242c4e98fb30e4c6bedb6ba8b482b6301) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 2 deletions

| diff --git a/net/bluetooth/bnep/core.c b/net/bluetooth/bnep/core.cindex a16d584a6c0d08..e1cfd110d281e2 100644--- a/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=2b0b33e8a58388fa9078f0fbe9af1900e6b08879)+++ b/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=e232728242c4e98fb30e4c6bedb6ba8b482b6301)@@ -744,8 +744,7 @@ static int \_\_init bnep\_init(void) if (flt[0]) BT\_INFO("BNEP filters: %s", flt); - bnep\_sock\_init();- return 0;+ return bnep\_sock\_init(); }  static void \_\_exit bnep\_exit(void) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:24:38 +0000



=== Content from git.kernel.org_3c5806ae_20250114_232554.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2c439470b23d78095a0d2f923342df58b155f669)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2c439470b23d78095a0d2f923342df58b155f669)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2c439470b23d78095a0d2f923342df58b155f669)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2c439470b23d78095a0d2f923342df58b155f669)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ye Bin <yebin10@huawei.com> | 2024-10-14 17:07:08 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:20:50 +0100 |
| commit | [2c439470b23d78095a0d2f923342df58b155f669](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2c439470b23d78095a0d2f923342df58b155f669) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2c439470b23d78095a0d2f923342df58b155f669)) | |
| tree | [38276ca49292e58aa2ed821b952871030568c067](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2c439470b23d78095a0d2f923342df58b155f669) | |
| parent | [2c15c4133d00f5da632fce60ed013fc31aa9aa58](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2c15c4133d00f5da632fce60ed013fc31aa9aa58) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2c439470b23d78095a0d2f923342df58b155f669&id2=2c15c4133d00f5da632fce60ed013fc31aa9aa58)) | |
| download | [linux-2c439470b23d78095a0d2f923342df58b155f669.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2c439470b23d78095a0d2f923342df58b155f669.tar.gz) | |

Bluetooth: bnep: fix wild-memory-access in proto\_unregister[ Upstream commit 64a90991ba8d4e32e3173ddd83d0b24167a5668c ]
There's issue as follows:
KASAN: maybe wild-memory-access in range [0xdead...108-0xdead...10f]
CPU: 3 UID: 0 PID: 2805 Comm: rmmod Tainted: G W
RIP: 0010:proto\_unregister+0xee/0x400
Call Trace:
<TASK>
\_\_do\_sys\_delete\_module+0x318/0x580
do\_syscall\_64+0xc1/0x1d0
entry\_SYSCALL\_64\_after\_hwframe+0x77/0x7f
As bnep\_init() ignore bnep\_sock\_init()'s return value, and bnep\_sock\_init()
will cleanup all resource. Then when remove bnep module will call
bnep\_sock\_cleanup() to cleanup sock's resource.
To solve above issue just return bnep\_sock\_init()'s return value in
bnep\_exit().
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Signed-off-by: Ye Bin <yebin10@huawei.com>
Signed-off-by: Luiz Augusto von Dentz <luiz.von.dentz@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2c439470b23d78095a0d2f923342df58b155f669)

| -rw-r--r-- | [net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/bluetooth/bnep/core.c?id=2c439470b23d78095a0d2f923342df58b155f669) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 2 deletions

| diff --git a/net/bluetooth/bnep/core.c b/net/bluetooth/bnep/core.cindex 089160361dded5..d05beafd29527c 100644--- a/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=2c15c4133d00f5da632fce60ed013fc31aa9aa58)+++ b/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=2c439470b23d78095a0d2f923342df58b155f669)@@ -745,8 +745,7 @@ static int \_\_init bnep\_init(void) if (flt[0]) BT\_INFO("BNEP filters: %s", flt); - bnep\_sock\_init();- return 0;+ return bnep\_sock\_init(); }  static void \_\_exit bnep\_exit(void) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:24:30 +0000



=== Content from git.kernel.org_40212a35_20250114_232556.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=64a90991ba8d4e32e3173ddd83d0b24167a5668c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=64a90991ba8d4e32e3173ddd83d0b24167a5668c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=64a90991ba8d4e32e3173ddd83d0b24167a5668c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=64a90991ba8d4e32e3173ddd83d0b24167a5668c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ye Bin <yebin10@huawei.com> | 2024-10-14 17:07:08 +0800 |
| --- | --- | --- |
| committer | Luiz Augusto von Dentz <luiz.von.dentz@intel.com> | 2024-10-16 16:10:03 -0400 |
| commit | [64a90991ba8d4e32e3173ddd83d0b24167a5668c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=64a90991ba8d4e32e3173ddd83d0b24167a5668c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=64a90991ba8d4e32e3173ddd83d0b24167a5668c)) | |
| tree | [8777123654c55416586035afdce3c6f3102f40aa](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=64a90991ba8d4e32e3173ddd83d0b24167a5668c) | |
| parent | [4084286151fc91cd093578f615bfb68f9efbbfcb](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4084286151fc91cd093578f615bfb68f9efbbfcb) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=64a90991ba8d4e32e3173ddd83d0b24167a5668c&id2=4084286151fc91cd093578f615bfb68f9efbbfcb)) | |
| download | [linux-64a90991ba8d4e32e3173ddd83d0b24167a5668c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-64a90991ba8d4e32e3173ddd83d0b24167a5668c.tar.gz) | |

Bluetooth: bnep: fix wild-memory-access in proto\_unregisterThere's issue as follows:
KASAN: maybe wild-memory-access in range [0xdead...108-0xdead...10f]
CPU: 3 UID: 0 PID: 2805 Comm: rmmod Tainted: G W
RIP: 0010:proto\_unregister+0xee/0x400
Call Trace:
<TASK>
\_\_do\_sys\_delete\_module+0x318/0x580
do\_syscall\_64+0xc1/0x1d0
entry\_SYSCALL\_64\_after\_hwframe+0x77/0x7f
As bnep\_init() ignore bnep\_sock\_init()'s return value, and bnep\_sock\_init()
will cleanup all resource. Then when remove bnep module will call
bnep\_sock\_cleanup() to cleanup sock's resource.
To solve above issue just return bnep\_sock\_init()'s return value in
bnep\_exit().
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Signed-off-by: Ye Bin <yebin10@huawei.com>
Signed-off-by: Luiz Augusto von Dentz <luiz.von.dentz@intel.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=64a90991ba8d4e32e3173ddd83d0b24167a5668c)

| -rw-r--r-- | [net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/bluetooth/bnep/core.c?id=64a90991ba8d4e32e3173ddd83d0b24167a5668c) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 2 deletions

| diff --git a/net/bluetooth/bnep/core.c b/net/bluetooth/bnep/core.cindex a3bc0934cc1331..d44987d4515c0b 100644--- a/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=4084286151fc91cd093578f615bfb68f9efbbfcb)+++ b/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=64a90991ba8d4e32e3173ddd83d0b24167a5668c)@@ -745,8 +745,7 @@ static int \_\_init bnep\_init(void) if (flt[0]) BT\_INFO("BNEP filters: %s", flt); - bnep\_sock\_init();- return 0;+ return bnep\_sock\_init(); }  static void \_\_exit bnep\_exit(void) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:24:32 +0000



=== Content from git.kernel.org_6cc5a8d9_20250114_232600.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d10cd7bf574ead01fae140ce117a11bcdacbe6a8)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d10cd7bf574ead01fae140ce117a11bcdacbe6a8)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d10cd7bf574ead01fae140ce117a11bcdacbe6a8)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d10cd7bf574ead01fae140ce117a11bcdacbe6a8)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ye Bin <yebin10@huawei.com> | 2024-10-14 17:07:08 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 01:58:24 +0100 |
| commit | [d10cd7bf574ead01fae140ce117a11bcdacbe6a8](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d10cd7bf574ead01fae140ce117a11bcdacbe6a8) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d10cd7bf574ead01fae140ce117a11bcdacbe6a8)) | |
| tree | [b0cabe1762d062b18138f6025335c5ea32f2cb07](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d10cd7bf574ead01fae140ce117a11bcdacbe6a8) | |
| parent | [97bbdc5001db35809d9d4dcf359e5c8af6e6ed55](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=97bbdc5001db35809d9d4dcf359e5c8af6e6ed55) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d10cd7bf574ead01fae140ce117a11bcdacbe6a8&id2=97bbdc5001db35809d9d4dcf359e5c8af6e6ed55)) | |
| download | [linux-d10cd7bf574ead01fae140ce117a11bcdacbe6a8.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d10cd7bf574ead01fae140ce117a11bcdacbe6a8.tar.gz) | |

Bluetooth: bnep: fix wild-memory-access in proto\_unregister[ Upstream commit 64a90991ba8d4e32e3173ddd83d0b24167a5668c ]
There's issue as follows:
KASAN: maybe wild-memory-access in range [0xdead...108-0xdead...10f]
CPU: 3 UID: 0 PID: 2805 Comm: rmmod Tainted: G W
RIP: 0010:proto\_unregister+0xee/0x400
Call Trace:
<TASK>
\_\_do\_sys\_delete\_module+0x318/0x580
do\_syscall\_64+0xc1/0x1d0
entry\_SYSCALL\_64\_after\_hwframe+0x77/0x7f
As bnep\_init() ignore bnep\_sock\_init()'s return value, and bnep\_sock\_init()
will cleanup all resource. Then when remove bnep module will call
bnep\_sock\_cleanup() to cleanup sock's resource.
To solve above issue just return bnep\_sock\_init()'s return value in
bnep\_exit().
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Signed-off-by: Ye Bin <yebin10@huawei.com>
Signed-off-by: Luiz Augusto von Dentz <luiz.von.dentz@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d10cd7bf574ead01fae140ce117a11bcdacbe6a8)

| -rw-r--r-- | [net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/bluetooth/bnep/core.c?id=d10cd7bf574ead01fae140ce117a11bcdacbe6a8) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 2 deletions

| diff --git a/net/bluetooth/bnep/core.c b/net/bluetooth/bnep/core.cindex a660c428e2207c..38f542665f1962 100644--- a/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=97bbdc5001db35809d9d4dcf359e5c8af6e6ed55)+++ b/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=d10cd7bf574ead01fae140ce117a11bcdacbe6a8)@@ -745,8 +745,7 @@ static int \_\_init bnep\_init(void) if (flt[0]) BT\_INFO("BNEP filters: %s", flt); - bnep\_sock\_init();- return 0;+ return bnep\_sock\_init(); }  static void \_\_exit bnep\_exit(void) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:24:36 +0000



=== Content from git.kernel.org_2728ebd4_20250114_232558.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=6c151aeb6dc414db8f4daf51be072e802fae6667)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6c151aeb6dc414db8f4daf51be072e802fae6667)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6c151aeb6dc414db8f4daf51be072e802fae6667)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6c151aeb6dc414db8f4daf51be072e802fae6667)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ye Bin <yebin10@huawei.com> | 2024-10-14 17:07:08 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:21:58 +0100 |
| commit | [6c151aeb6dc414db8f4daf51be072e802fae6667](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6c151aeb6dc414db8f4daf51be072e802fae6667) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=6c151aeb6dc414db8f4daf51be072e802fae6667)) | |
| tree | [610082297021dd71bf16d400eec68aabc133e9fe](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6c151aeb6dc414db8f4daf51be072e802fae6667) | |
| parent | [5c345c47e88497ed5887bd921bb2a74f38cbae59](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5c345c47e88497ed5887bd921bb2a74f38cbae59) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6c151aeb6dc414db8f4daf51be072e802fae6667&id2=5c345c47e88497ed5887bd921bb2a74f38cbae59)) | |
| download | [linux-6c151aeb6dc414db8f4daf51be072e802fae6667.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-6c151aeb6dc414db8f4daf51be072e802fae6667.tar.gz) | |

Bluetooth: bnep: fix wild-memory-access in proto\_unregister[ Upstream commit 64a90991ba8d4e32e3173ddd83d0b24167a5668c ]
There's issue as follows:
KASAN: maybe wild-memory-access in range [0xdead...108-0xdead...10f]
CPU: 3 UID: 0 PID: 2805 Comm: rmmod Tainted: G W
RIP: 0010:proto\_unregister+0xee/0x400
Call Trace:
<TASK>
\_\_do\_sys\_delete\_module+0x318/0x580
do\_syscall\_64+0xc1/0x1d0
entry\_SYSCALL\_64\_after\_hwframe+0x77/0x7f
As bnep\_init() ignore bnep\_sock\_init()'s return value, and bnep\_sock\_init()
will cleanup all resource. Then when remove bnep module will call
bnep\_sock\_cleanup() to cleanup sock's resource.
To solve above issue just return bnep\_sock\_init()'s return value in
bnep\_exit().
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Signed-off-by: Ye Bin <yebin10@huawei.com>
Signed-off-by: Luiz Augusto von Dentz <luiz.von.dentz@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6c151aeb6dc414db8f4daf51be072e802fae6667)

| -rw-r--r-- | [net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/bluetooth/bnep/core.c?id=6c151aeb6dc414db8f4daf51be072e802fae6667) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 2 deletions

| diff --git a/net/bluetooth/bnep/core.c b/net/bluetooth/bnep/core.cindex f749904272961f..0eaa47ae6e993d 100644--- a/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=5c345c47e88497ed5887bd921bb2a74f38cbae59)+++ b/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=6c151aeb6dc414db8f4daf51be072e802fae6667)@@ -745,8 +745,7 @@ static int \_\_init bnep\_init(void) if (flt[0]) BT\_INFO("BNEP filters: %s", flt); - bnep\_sock\_init();- return 0;+ return bnep\_sock\_init(); }  static void \_\_exit bnep\_exit(void) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:24:35 +0000



=== Content from git.kernel.org_87502302_20250114_232550.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=03015b6329e6de42f03ec917c25c4cf944f81f66)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=03015b6329e6de42f03ec917c25c4cf944f81f66)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=03015b6329e6de42f03ec917c25c4cf944f81f66)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=03015b6329e6de42f03ec917c25c4cf944f81f66)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ye Bin <yebin10@huawei.com> | 2024-10-14 17:07:08 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 01:56:01 +0100 |
| commit | [03015b6329e6de42f03ec917c25c4cf944f81f66](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=03015b6329e6de42f03ec917c25c4cf944f81f66) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=03015b6329e6de42f03ec917c25c4cf944f81f66)) | |
| tree | [cad51301084f65c0a3fe999f62157876af4a130e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=03015b6329e6de42f03ec917c25c4cf944f81f66) | |
| parent | [318ca89bc578cad4cec2cd65ca9569a3c1b697be](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=318ca89bc578cad4cec2cd65ca9569a3c1b697be) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=03015b6329e6de42f03ec917c25c4cf944f81f66&id2=318ca89bc578cad4cec2cd65ca9569a3c1b697be)) | |
| download | [linux-03015b6329e6de42f03ec917c25c4cf944f81f66.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-03015b6329e6de42f03ec917c25c4cf944f81f66.tar.gz) | |

Bluetooth: bnep: fix wild-memory-access in proto\_unregister[ Upstream commit 64a90991ba8d4e32e3173ddd83d0b24167a5668c ]
There's issue as follows:
KASAN: maybe wild-memory-access in range [0xdead...108-0xdead...10f]
CPU: 3 UID: 0 PID: 2805 Comm: rmmod Tainted: G W
RIP: 0010:proto\_unregister+0xee/0x400
Call Trace:
<TASK>
\_\_do\_sys\_delete\_module+0x318/0x580
do\_syscall\_64+0xc1/0x1d0
entry\_SYSCALL\_64\_after\_hwframe+0x77/0x7f
As bnep\_init() ignore bnep\_sock\_init()'s return value, and bnep\_sock\_init()
will cleanup all resource. Then when remove bnep module will call
bnep\_sock\_cleanup() to cleanup sock's resource.
To solve above issue just return bnep\_sock\_init()'s return value in
bnep\_exit().
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Signed-off-by: Ye Bin <yebin10@huawei.com>
Signed-off-by: Luiz Augusto von Dentz <luiz.von.dentz@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=03015b6329e6de42f03ec917c25c4cf944f81f66)

| -rw-r--r-- | [net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/bluetooth/bnep/core.c?id=03015b6329e6de42f03ec917c25c4cf944f81f66) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 2 deletions

| diff --git a/net/bluetooth/bnep/core.c b/net/bluetooth/bnep/core.cindex a660c428e2207c..38f542665f1962 100644--- a/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=318ca89bc578cad4cec2cd65ca9569a3c1b697be)+++ b/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=03015b6329e6de42f03ec917c25c4cf944f81f66)@@ -745,8 +745,7 @@ static int \_\_init bnep\_init(void) if (flt[0]) BT\_INFO("BNEP filters: %s", flt); - bnep\_sock\_init();- return 0;+ return bnep\_sock\_init(); }  static void \_\_exit bnep\_exit(void) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:24:26 +0000



=== Content from git.kernel.org_0af56f2d_20250114_232603.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=fa58e23ea1359bd24b323916d191e2e9b4b19783)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fa58e23ea1359bd24b323916d191e2e9b4b19783)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fa58e23ea1359bd24b323916d191e2e9b4b19783)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fa58e23ea1359bd24b323916d191e2e9b4b19783)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ye Bin <yebin10@huawei.com> | 2024-10-14 17:07:08 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 01:52:34 +0100 |
| commit | [fa58e23ea1359bd24b323916d191e2e9b4b19783](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fa58e23ea1359bd24b323916d191e2e9b4b19783) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=fa58e23ea1359bd24b323916d191e2e9b4b19783)) | |
| tree | [79cde0eac30c2580f591e992869f9c2d1fe1cf41](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fa58e23ea1359bd24b323916d191e2e9b4b19783) | |
| parent | [42d83e5fed3e1abbc657f68e20b7c8df5fbf546d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=42d83e5fed3e1abbc657f68e20b7c8df5fbf546d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fa58e23ea1359bd24b323916d191e2e9b4b19783&id2=42d83e5fed3e1abbc657f68e20b7c8df5fbf546d)) | |
| download | [linux-fa58e23ea1359bd24b323916d191e2e9b4b19783.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-fa58e23ea1359bd24b323916d191e2e9b4b19783.tar.gz) | |

Bluetooth: bnep: fix wild-memory-access in proto\_unregister[ Upstream commit 64a90991ba8d4e32e3173ddd83d0b24167a5668c ]
There's issue as follows:
KASAN: maybe wild-memory-access in range [0xdead...108-0xdead...10f]
CPU: 3 UID: 0 PID: 2805 Comm: rmmod Tainted: G W
RIP: 0010:proto\_unregister+0xee/0x400
Call Trace:
<TASK>
\_\_do\_sys\_delete\_module+0x318/0x580
do\_syscall\_64+0xc1/0x1d0
entry\_SYSCALL\_64\_after\_hwframe+0x77/0x7f
As bnep\_init() ignore bnep\_sock\_init()'s return value, and bnep\_sock\_init()
will cleanup all resource. Then when remove bnep module will call
bnep\_sock\_cleanup() to cleanup sock's resource.
To solve above issue just return bnep\_sock\_init()'s return value in
bnep\_exit().
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Signed-off-by: Ye Bin <yebin10@huawei.com>
Signed-off-by: Luiz Augusto von Dentz <luiz.von.dentz@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fa58e23ea1359bd24b323916d191e2e9b4b19783)

| -rw-r--r-- | [net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/bluetooth/bnep/core.c?id=fa58e23ea1359bd24b323916d191e2e9b4b19783) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 2 deletions

| diff --git a/net/bluetooth/bnep/core.c b/net/bluetooth/bnep/core.cindex 8bb6c8ad113135..ca46441d0657b8 100644--- a/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=42d83e5fed3e1abbc657f68e20b7c8df5fbf546d)+++ b/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=fa58e23ea1359bd24b323916d191e2e9b4b19783)@@ -745,8 +745,7 @@ static int \_\_init bnep\_init(void) if (flt[0]) BT\_INFO("BNEP filters: %s", flt); - bnep\_sock\_init();- return 0;+ return bnep\_sock\_init(); }  static void \_\_exit bnep\_exit(void) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:24:40 +0000



=== Content from git.kernel.org_16e434a5_20250114_232552.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=20c424bc475b2b2a6e0e2225d2aae095c2ab2f41)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=20c424bc475b2b2a6e0e2225d2aae095c2ab2f41)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=20c424bc475b2b2a6e0e2225d2aae095c2ab2f41)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=20c424bc475b2b2a6e0e2225d2aae095c2ab2f41)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ye Bin <yebin10@huawei.com> | 2024-10-14 17:07:08 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 02:02:31 +0100 |
| commit | [20c424bc475b2b2a6e0e2225d2aae095c2ab2f41](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=20c424bc475b2b2a6e0e2225d2aae095c2ab2f41) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=20c424bc475b2b2a6e0e2225d2aae095c2ab2f41)) | |
| tree | [343b778cb6a0e04f737a332247dc548fc3d26f8a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=20c424bc475b2b2a6e0e2225d2aae095c2ab2f41) | |
| parent | [9e371c85d644c7376bc5ad9cc00d9e04fcec2cb5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9e371c85d644c7376bc5ad9cc00d9e04fcec2cb5) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=20c424bc475b2b2a6e0e2225d2aae095c2ab2f41&id2=9e371c85d644c7376bc5ad9cc00d9e04fcec2cb5)) | |
| download | [linux-20c424bc475b2b2a6e0e2225d2aae095c2ab2f41.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-20c424bc475b2b2a6e0e2225d2aae095c2ab2f41.tar.gz) | |

Bluetooth: bnep: fix wild-memory-access in proto\_unregister[ Upstream commit 64a90991ba8d4e32e3173ddd83d0b24167a5668c ]
There's issue as follows:
KASAN: maybe wild-memory-access in range [0xdead...108-0xdead...10f]
CPU: 3 UID: 0 PID: 2805 Comm: rmmod Tainted: G W
RIP: 0010:proto\_unregister+0xee/0x400
Call Trace:
<TASK>
\_\_do\_sys\_delete\_module+0x318/0x580
do\_syscall\_64+0xc1/0x1d0
entry\_SYSCALL\_64\_after\_hwframe+0x77/0x7f
As bnep\_init() ignore bnep\_sock\_init()'s return value, and bnep\_sock\_init()
will cleanup all resource. Then when remove bnep module will call
bnep\_sock\_cleanup() to cleanup sock's resource.
To solve above issue just return bnep\_sock\_init()'s return value in
bnep\_exit().
Fixes: 1da177e4c3f4 ("Linux-2.6.12-rc2")
Signed-off-by: Ye Bin <yebin10@huawei.com>
Signed-off-by: Luiz Augusto von Dentz <luiz.von.dentz@intel.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=20c424bc475b2b2a6e0e2225d2aae095c2ab2f41)

| -rw-r--r-- | [net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/bluetooth/bnep/core.c?id=20c424bc475b2b2a6e0e2225d2aae095c2ab2f41) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 2 deletions

| diff --git a/net/bluetooth/bnep/core.c b/net/bluetooth/bnep/core.cindex ec45f77fce2181..344e2e063be684 100644--- a/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=9e371c85d644c7376bc5ad9cc00d9e04fcec2cb5)+++ b/[net/bluetooth/bnep/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/bluetooth/bnep/core.c?id=20c424bc475b2b2a6e0e2225d2aae095c2ab2f41)@@ -745,8 +745,7 @@ static int \_\_init bnep\_init(void) if (flt[0]) BT\_INFO("BNEP filters: %s", flt); - bnep\_sock\_init();- return 0;+ return bnep\_sock\_init(); }  static void \_\_exit bnep\_exit(void) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:24:29 +0000


