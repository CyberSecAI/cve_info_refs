=== Content from git.kernel.org_7f20df55_20250114_214321.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7afb5e3aa989c479979faeb18768a67889a7a9c6)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7afb5e3aa989c479979faeb18768a67889a7a9c6)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7afb5e3aa989c479979faeb18768a67889a7a9c6)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7afb5e3aa989c479979faeb18768a67889a7a9c6)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jan Kiszka <jan.kiszka@siemens.com> | 2024-08-19 17:24:51 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 12:04:00 +0200 |
| commit | [7afb5e3aa989c479979faeb18768a67889a7a9c6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7afb5e3aa989c479979faeb18768a67889a7a9c6) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7afb5e3aa989c479979faeb18768a67889a7a9c6)) | |
| tree | [0396f057f1e80e2d57d0d7f52042072ec47bc2fa](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7afb5e3aa989c479979faeb18768a67889a7a9c6) | |
| parent | [ea79bdc67414b31ec9caa20a89141a908dbea216](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ea79bdc67414b31ec9caa20a89141a908dbea216) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7afb5e3aa989c479979faeb18768a67889a7a9c6&id2=ea79bdc67414b31ec9caa20a89141a908dbea216)) | |
| download | [linux-7afb5e3aa989c479979faeb18768a67889a7a9c6.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7afb5e3aa989c479979faeb18768a67889a7a9c6.tar.gz) | |

remoteproc: k3-r5: Fix error handling when power-up failedcommit 9ab27eb5866ccbf57715cfdba4b03d57776092fb upstream.
By simply bailing out, the driver was violating its rule and internal
assumptions that either both or no rproc should be initialized. E.g.,
this could cause the first core to be available but not the second one,
leading to crashes on its shutdown later on while trying to dereference
that second instance.
Fixes: 61f6f68447ab ("remoteproc: k3-r5: Wait for core0 power-up before powering up core1")
Signed-off-by: Jan Kiszka <jan.kiszka@siemens.com>
Acked-by: Beleswar Padhi <b-padhi@ti.com>
Cc: stable@vger.kernel.org
Link: [https://lore.kernel.org/r/9f481156-f220-4adf-b3d9-670871351e26@siemens.com](https://lore.kernel.org/r/9f481156-f220-4adf-b3d9-670871351e26%40siemens.com)
Signed-off-by: Mathieu Poirier <mathieu.poirier@linaro.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7afb5e3aa989c479979faeb18768a67889a7a9c6)

| -rw-r--r-- | [drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=7afb5e3aa989c479979faeb18768a67889a7a9c6) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/drivers/remoteproc/ti\_k3\_r5\_remoteproc.c b/drivers/remoteproc/ti\_k3\_r5\_remoteproc.cindex 39a47540c59006..eb09d2e9b32a47 100644--- a/[drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=ea79bdc67414b31ec9caa20a89141a908dbea216)+++ b/[drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=7afb5e3aa989c479979faeb18768a67889a7a9c6)@@ -1332,7 +1332,7 @@ init\_rmem: dev\_err(dev, "Timed out waiting for %s core to power up!\n", rproc->name);- return ret;+ goto err\_powerup; } } @@ -1348,6 +1348,7 @@ err\_split: } } +err\_powerup: rproc\_del(rproc); err\_add: k3\_r5\_reserved\_mem\_exit(kproc); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:41:58 +0000



=== Content from git.kernel.org_a029757f_20250114_214322.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=87ab3af7447791d0c619610fd560bd804549e187)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=87ab3af7447791d0c619610fd560bd804549e187)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=87ab3af7447791d0c619610fd560bd804549e187)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=87ab3af7447791d0c619610fd560bd804549e187)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jan Kiszka <jan.kiszka@siemens.com> | 2024-08-19 17:24:51 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:21:58 +0200 |
| commit | [87ab3af7447791d0c619610fd560bd804549e187](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=87ab3af7447791d0c619610fd560bd804549e187) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=87ab3af7447791d0c619610fd560bd804549e187)) | |
| tree | [5f3b28cac4b74c8454676befa0bf68fd25958bbe](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=87ab3af7447791d0c619610fd560bd804549e187) | |
| parent | [f057579a67b62c0ec68a8e84cb35d8b9fbd387b6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f057579a67b62c0ec68a8e84cb35d8b9fbd387b6) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=87ab3af7447791d0c619610fd560bd804549e187&id2=f057579a67b62c0ec68a8e84cb35d8b9fbd387b6)) | |
| download | [linux-87ab3af7447791d0c619610fd560bd804549e187.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-87ab3af7447791d0c619610fd560bd804549e187.tar.gz) | |

remoteproc: k3-r5: Fix error handling when power-up failedcommit 9ab27eb5866ccbf57715cfdba4b03d57776092fb upstream.
By simply bailing out, the driver was violating its rule and internal
assumptions that either both or no rproc should be initialized. E.g.,
this could cause the first core to be available but not the second one,
leading to crashes on its shutdown later on while trying to dereference
that second instance.
Fixes: 61f6f68447ab ("remoteproc: k3-r5: Wait for core0 power-up before powering up core1")
Signed-off-by: Jan Kiszka <jan.kiszka@siemens.com>
Acked-by: Beleswar Padhi <b-padhi@ti.com>
Cc: stable@vger.kernel.org
Link: [https://lore.kernel.org/r/9f481156-f220-4adf-b3d9-670871351e26@siemens.com](https://lore.kernel.org/r/9f481156-f220-4adf-b3d9-670871351e26%40siemens.com)
Signed-off-by: Mathieu Poirier <mathieu.poirier@linaro.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=87ab3af7447791d0c619610fd560bd804549e187)

| -rw-r--r-- | [drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=87ab3af7447791d0c619610fd560bd804549e187) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/drivers/remoteproc/ti\_k3\_r5\_remoteproc.c b/drivers/remoteproc/ti\_k3\_r5\_remoteproc.cindex 4919407d422dab..496a1c19a37e68 100644--- a/[drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=f057579a67b62c0ec68a8e84cb35d8b9fbd387b6)+++ b/[drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=87ab3af7447791d0c619610fd560bd804549e187)@@ -1324,7 +1324,7 @@ init\_rmem: dev\_err(dev, "Timed out waiting for %s core to power up!\n", rproc->name);- return ret;+ goto err\_powerup; } } @@ -1340,6 +1340,7 @@ err\_split: } } +err\_powerup: rproc\_del(rproc); err\_add: k3\_r5\_reserved\_mem\_exit(kproc); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:41:59 +0000



=== Content from git.kernel.org_4e5fe8c7_20250114_214324.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=afd102bde99d90ef41e043c846ea34b04433eb7b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=afd102bde99d90ef41e043c846ea34b04433eb7b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=afd102bde99d90ef41e043c846ea34b04433eb7b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=afd102bde99d90ef41e043c846ea34b04433eb7b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jan Kiszka <jan.kiszka@siemens.com> | 2024-08-19 17:24:51 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 12:00:59 +0200 |
| commit | [afd102bde99d90ef41e043c846ea34b04433eb7b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=afd102bde99d90ef41e043c846ea34b04433eb7b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=afd102bde99d90ef41e043c846ea34b04433eb7b)) | |
| tree | [45fdc7f78c7545ff30969c6ba576dc4681217b0d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=afd102bde99d90ef41e043c846ea34b04433eb7b) | |
| parent | [7a6c6ccab3d88ee04761830b86bd390ab2277b51](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7a6c6ccab3d88ee04761830b86bd390ab2277b51) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=afd102bde99d90ef41e043c846ea34b04433eb7b&id2=7a6c6ccab3d88ee04761830b86bd390ab2277b51)) | |
| download | [linux-afd102bde99d90ef41e043c846ea34b04433eb7b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-afd102bde99d90ef41e043c846ea34b04433eb7b.tar.gz) | |

remoteproc: k3-r5: Fix error handling when power-up failedcommit 9ab27eb5866ccbf57715cfdba4b03d57776092fb upstream.
By simply bailing out, the driver was violating its rule and internal
assumptions that either both or no rproc should be initialized. E.g.,
this could cause the first core to be available but not the second one,
leading to crashes on its shutdown later on while trying to dereference
that second instance.
Fixes: 61f6f68447ab ("remoteproc: k3-r5: Wait for core0 power-up before powering up core1")
Signed-off-by: Jan Kiszka <jan.kiszka@siemens.com>
Acked-by: Beleswar Padhi <b-padhi@ti.com>
Cc: stable@vger.kernel.org
Link: [https://lore.kernel.org/r/9f481156-f220-4adf-b3d9-670871351e26@siemens.com](https://lore.kernel.org/r/9f481156-f220-4adf-b3d9-670871351e26%40siemens.com)
Signed-off-by: Mathieu Poirier <mathieu.poirier@linaro.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=afd102bde99d90ef41e043c846ea34b04433eb7b)

| -rw-r--r-- | [drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=afd102bde99d90ef41e043c846ea34b04433eb7b) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/drivers/remoteproc/ti\_k3\_r5\_remoteproc.c b/drivers/remoteproc/ti\_k3\_r5\_remoteproc.cindex 39a47540c59006..eb09d2e9b32a47 100644--- a/[drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=7a6c6ccab3d88ee04761830b86bd390ab2277b51)+++ b/[drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=afd102bde99d90ef41e043c846ea34b04433eb7b)@@ -1332,7 +1332,7 @@ init\_rmem: dev\_err(dev, "Timed out waiting for %s core to power up!\n", rproc->name);- return ret;+ goto err\_powerup; } } @@ -1348,6 +1348,7 @@ err\_split: } } +err\_powerup: rproc\_del(rproc); err\_add: k3\_r5\_reserved\_mem\_exit(kproc); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:42:01 +0000



=== Content from git.kernel.org_fb4835be_20250114_214325.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=fc71c23958931713b5e76f317b76be37189f2516)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fc71c23958931713b5e76f317b76be37189f2516)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fc71c23958931713b5e76f317b76be37189f2516)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fc71c23958931713b5e76f317b76be37189f2516)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jan Kiszka <jan.kiszka@siemens.com> | 2024-08-19 17:24:51 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 11:57:54 +0200 |
| commit | [fc71c23958931713b5e76f317b76be37189f2516](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fc71c23958931713b5e76f317b76be37189f2516) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=fc71c23958931713b5e76f317b76be37189f2516)) | |
| tree | [f8e6a4b358ae85f34dfb4b4fdc6b93a6aaa1dadc](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fc71c23958931713b5e76f317b76be37189f2516) | |
| parent | [bd588d52562ac5c2d7dd43cf4420d112d9e9c2d5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bd588d52562ac5c2d7dd43cf4420d112d9e9c2d5) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fc71c23958931713b5e76f317b76be37189f2516&id2=bd588d52562ac5c2d7dd43cf4420d112d9e9c2d5)) | |
| download | [linux-fc71c23958931713b5e76f317b76be37189f2516.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-fc71c23958931713b5e76f317b76be37189f2516.tar.gz) | |

remoteproc: k3-r5: Fix error handling when power-up failedcommit 9ab27eb5866ccbf57715cfdba4b03d57776092fb upstream.
By simply bailing out, the driver was violating its rule and internal
assumptions that either both or no rproc should be initialized. E.g.,
this could cause the first core to be available but not the second one,
leading to crashes on its shutdown later on while trying to dereference
that second instance.
Fixes: 61f6f68447ab ("remoteproc: k3-r5: Wait for core0 power-up before powering up core1")
Signed-off-by: Jan Kiszka <jan.kiszka@siemens.com>
Acked-by: Beleswar Padhi <b-padhi@ti.com>
Cc: stable@vger.kernel.org
Link: [https://lore.kernel.org/r/9f481156-f220-4adf-b3d9-670871351e26@siemens.com](https://lore.kernel.org/r/9f481156-f220-4adf-b3d9-670871351e26%40siemens.com)
Signed-off-by: Mathieu Poirier <mathieu.poirier@linaro.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fc71c23958931713b5e76f317b76be37189f2516)

| -rw-r--r-- | [drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=fc71c23958931713b5e76f317b76be37189f2516) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/drivers/remoteproc/ti\_k3\_r5\_remoteproc.c b/drivers/remoteproc/ti\_k3\_r5\_remoteproc.cindex 50e486bcfa1035..7c48f41808fa3d 100644--- a/[drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=bd588d52562ac5c2d7dd43cf4420d112d9e9c2d5)+++ b/[drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=fc71c23958931713b5e76f317b76be37189f2516)@@ -1331,7 +1331,7 @@ init\_rmem: dev\_err(dev, "Timed out waiting for %s core to power up!\n", rproc->name);- return ret;+ goto err\_powerup; } } @@ -1347,6 +1347,7 @@ err\_split: } } +err\_powerup: rproc\_del(rproc); err\_add: k3\_r5\_reserved\_mem\_exit(kproc); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:42:02 +0000



=== Content from git.kernel.org_d307791f_20250114_214323.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=9ab27eb5866ccbf57715cfdba4b03d57776092fb)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9ab27eb5866ccbf57715cfdba4b03d57776092fb)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9ab27eb5866ccbf57715cfdba4b03d57776092fb)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9ab27eb5866ccbf57715cfdba4b03d57776092fb)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jan Kiszka <jan.kiszka@siemens.com> | 2024-08-19 17:24:51 +0200 |
| --- | --- | --- |
| committer | Mathieu Poirier <mathieu.poirier@linaro.org> | 2024-08-28 09:48:35 -0600 |
| commit | [9ab27eb5866ccbf57715cfdba4b03d57776092fb](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9ab27eb5866ccbf57715cfdba4b03d57776092fb) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=9ab27eb5866ccbf57715cfdba4b03d57776092fb)) | |
| tree | [07562c382ef71b17b82ffcda8f82e142e044cf55](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9ab27eb5866ccbf57715cfdba4b03d57776092fb) | |
| parent | [ff555fc5537db70fa75d0ca557d3a41e4c08b55c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ff555fc5537db70fa75d0ca557d3a41e4c08b55c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9ab27eb5866ccbf57715cfdba4b03d57776092fb&id2=ff555fc5537db70fa75d0ca557d3a41e4c08b55c)) | |
| download | [linux-9ab27eb5866ccbf57715cfdba4b03d57776092fb.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-9ab27eb5866ccbf57715cfdba4b03d57776092fb.tar.gz) | |

remoteproc: k3-r5: Fix error handling when power-up failedBy simply bailing out, the driver was violating its rule and internal
assumptions that either both or no rproc should be initialized. E.g.,
this could cause the first core to be available but not the second one,
leading to crashes on its shutdown later on while trying to dereference
that second instance.
Fixes: 61f6f68447ab ("remoteproc: k3-r5: Wait for core0 power-up before powering up core1")
Signed-off-by: Jan Kiszka <jan.kiszka@siemens.com>
Acked-by: Beleswar Padhi <b-padhi@ti.com>
Cc: stable@vger.kernel.org
Link: [https://lore.kernel.org/r/9f481156-f220-4adf-b3d9-670871351e26@siemens.com](https://lore.kernel.org/r/9f481156-f220-4adf-b3d9-670871351e26%40siemens.com)
Signed-off-by: Mathieu Poirier <mathieu.poirier@linaro.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9ab27eb5866ccbf57715cfdba4b03d57776092fb)

| -rw-r--r-- | [drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=9ab27eb5866ccbf57715cfdba4b03d57776092fb) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/drivers/remoteproc/ti\_k3\_r5\_remoteproc.c b/drivers/remoteproc/ti\_k3\_r5\_remoteproc.cindex 60bd2042b0c60f..747ee467da88c9 100644--- a/[drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=ff555fc5537db70fa75d0ca557d3a41e4c08b55c)+++ b/[drivers/remoteproc/ti\_k3\_r5\_remoteproc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/remoteproc/ti_k3_r5_remoteproc.c?id=9ab27eb5866ccbf57715cfdba4b03d57776092fb)@@ -1313,7 +1313,7 @@ init\_rmem: dev\_err(dev, "Timed out waiting for %s core to power up!\n", rproc->name);- return ret;+ goto err\_powerup; } } @@ -1329,6 +1329,7 @@ err\_split: } } +err\_powerup: rproc\_del(rproc); err\_add: k3\_r5\_reserved\_mem\_exit(kproc); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:42:00 +0000


