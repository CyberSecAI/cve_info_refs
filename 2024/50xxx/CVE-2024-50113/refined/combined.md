=== Content from git.kernel.org_3ab21477_20250114_232718.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=f6a6780e0b9bbcf311a727afed06fee533a5e957)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=f6a6780e0b9bbcf311a727afed06fee533a5e957)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f6a6780e0b9bbcf311a727afed06fee533a5e957)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f6a6780e0b9bbcf311a727afed06fee533a5e957)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Takashi Sakamoto <o-takashi@sakamocchi.jp> | 2024-10-25 12:41:37 +0900 |
| --- | --- | --- |
| committer | Takashi Sakamoto <o-takashi@sakamocchi.jp> | 2024-10-27 11:14:35 +0900 |
| commit | [f6a6780e0b9bbcf311a727afed06fee533a5e957](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f6a6780e0b9bbcf311a727afed06fee533a5e957) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=f6a6780e0b9bbcf311a727afed06fee533a5e957)) | |
| tree | [ded98f04a07af32404d55a78c0add8a7cd71cf15](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=f6a6780e0b9bbcf311a727afed06fee533a5e957) | |
| parent | [42f7652d3eb527d03665b09edac47f85fb600924](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=42f7652d3eb527d03665b09edac47f85fb600924) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f6a6780e0b9bbcf311a727afed06fee533a5e957&id2=42f7652d3eb527d03665b09edac47f85fb600924)) | |
| download | [linux-f6a6780e0b9bbcf311a727afed06fee533a5e957.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-f6a6780e0b9bbcf311a727afed06fee533a5e957.tar.gz) | |

firewire: core: fix invalid port index for parent deviceIn a commit 24b7f8e5cd65 ("firewire: core: use helper functions for self
ID sequence"), the enumeration over self ID sequence was refactored with
some helper functions with KUnit tests. These helper functions are
guaranteed to work expectedly by the KUnit tests, however their application
includes a mistake to assign invalid value to the index of port connected
to parent device.
This bug affects the case that any extra node devices which has three or
more ports are connected to 1394 OHCI controller. In the case, the path
to update the tree cache could hits WARN\_ON(), and gets general protection
fault due to the access to invalid address computed by the invalid value.
This commit fixes the bug to assign correct port index.
Cc: stable@vger.kernel.org
Reported-by: Edmund Raile <edmund.raile@proton.me>
Closes: https://lore.kernel.org/lkml/8a9902a4ece9329af1e1e42f5fea76861f0bf0e8.camel@proton.me/
Fixes: 24b7f8e5cd65 ("firewire: core: use helper functions for self ID sequence")
Link: [https://lore.kernel.org/r/20241025034137.99317-1-o-takashi@sakamocchi.jp](https://lore.kernel.org/r/20241025034137.99317-1-o-takashi%40sakamocchi.jp)
Signed-off-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f6a6780e0b9bbcf311a727afed06fee533a5e957)

| -rw-r--r-- | [drivers/firewire/core-topology.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/firewire/core-topology.c?id=f6a6780e0b9bbcf311a727afed06fee533a5e957) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/firewire/core-topology.c b/drivers/firewire/core-topology.cindex 6adadb11962e3d..892b94cfd62603 100644--- a/[drivers/firewire/core-topology.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firewire/core-topology.c?id=42f7652d3eb527d03665b09edac47f85fb600924)+++ b/[drivers/firewire/core-topology.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firewire/core-topology.c?id=f6a6780e0b9bbcf311a727afed06fee533a5e957)@@ -204,7 +204,7 @@ static struct fw\_node \*build\_tree(struct fw\_card \*card, const u32 \*sid, int self // the node->ports array where the parent node should be. Later, // when we handle the parent node, we fix up the reference. ++parent\_count;- node->color = i;+ node->color = port\_index; break;  case PHY\_PACKET\_SELF\_ID\_PORT\_STATUS\_CHILD: |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:25:55 +0000



=== Content from git.kernel.org_0e3eecf2_20250114_232717.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=90753a38bc3d058820981f812a908a99f7b337c1)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=90753a38bc3d058820981f812a908a99f7b337c1)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=90753a38bc3d058820981f812a908a99f7b337c1)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=90753a38bc3d058820981f812a908a99f7b337c1)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Takashi Sakamoto <o-takashi@sakamocchi.jp> | 2024-10-25 12:41:37 +0900 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-01 02:02:41 +0100 |
| commit | [90753a38bc3d058820981f812a908a99f7b337c1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=90753a38bc3d058820981f812a908a99f7b337c1) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=90753a38bc3d058820981f812a908a99f7b337c1)) | |
| tree | [b543a073c50b05343e4f2a010f7b5b2dee91fff9](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=90753a38bc3d058820981f812a908a99f7b337c1) | |
| parent | [5dbe014a9c7c85a41f705ffed5c93edfc9e6242d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5dbe014a9c7c85a41f705ffed5c93edfc9e6242d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=90753a38bc3d058820981f812a908a99f7b337c1&id2=5dbe014a9c7c85a41f705ffed5c93edfc9e6242d)) | |
| download | [linux-90753a38bc3d058820981f812a908a99f7b337c1.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-90753a38bc3d058820981f812a908a99f7b337c1.tar.gz) | |

firewire: core: fix invalid port index for parent devicecommit f6a6780e0b9bbcf311a727afed06fee533a5e957 upstream.
In a commit 24b7f8e5cd65 ("firewire: core: use helper functions for self
ID sequence"), the enumeration over self ID sequence was refactored with
some helper functions with KUnit tests. These helper functions are
guaranteed to work expectedly by the KUnit tests, however their application
includes a mistake to assign invalid value to the index of port connected
to parent device.
This bug affects the case that any extra node devices which has three or
more ports are connected to 1394 OHCI controller. In the case, the path
to update the tree cache could hits WARN\_ON(), and gets general protection
fault due to the access to invalid address computed by the invalid value.
This commit fixes the bug to assign correct port index.
Cc: stable@vger.kernel.org
Reported-by: Edmund Raile <edmund.raile@proton.me>
Closes: https://lore.kernel.org/lkml/8a9902a4ece9329af1e1e42f5fea76861f0bf0e8.camel@proton.me/
Fixes: 24b7f8e5cd65 ("firewire: core: use helper functions for self ID sequence")
Link: [https://lore.kernel.org/r/20241025034137.99317-1-o-takashi@sakamocchi.jp](https://lore.kernel.org/r/20241025034137.99317-1-o-takashi%40sakamocchi.jp)
Signed-off-by: Takashi Sakamoto <o-takashi@sakamocchi.jp>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=90753a38bc3d058820981f812a908a99f7b337c1)

| -rw-r--r-- | [drivers/firewire/core-topology.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/firewire/core-topology.c?id=90753a38bc3d058820981f812a908a99f7b337c1) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/firewire/core-topology.c b/drivers/firewire/core-topology.cindex b4e637aa693214..7e98562d2eb824 100644--- a/[drivers/firewire/core-topology.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firewire/core-topology.c?id=5dbe014a9c7c85a41f705ffed5c93edfc9e6242d)+++ b/[drivers/firewire/core-topology.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firewire/core-topology.c?id=90753a38bc3d058820981f812a908a99f7b337c1)@@ -204,7 +204,7 @@ static struct fw\_node \*build\_tree(struct fw\_card \*card, const u32 \*sid, int self // the node->ports array where the parent node should be. Later, // when we handle the parent node, we fix up the reference. ++parent\_count;- node->color = i;+ node->color = port\_index; break;  case PHY\_PACKET\_SELF\_ID\_PORT\_STATUS\_CHILD: |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:25:53 +0000


