=== Content from git.kernel.org_4a73867c_20250114_200833.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8f6cd4d5bb7406656835a90e4f1a2192607f0c21)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8f6cd4d5bb7406656835a90e4f1a2192607f0c21)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8f6cd4d5bb7406656835a90e4f1a2192607f0c21)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8f6cd4d5bb7406656835a90e4f1a2192607f0c21)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Felix Fietkau <nbd@nbd.name> | 2024-10-02 11:56:30 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:26:44 +0100 |
| commit | [8f6cd4d5bb7406656835a90e4f1a2192607f0c21](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8f6cd4d5bb7406656835a90e4f1a2192607f0c21) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8f6cd4d5bb7406656835a90e4f1a2192607f0c21)) | |
| tree | [d8b55bbb2de4d9c800d3a2bc86c349055919642e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8f6cd4d5bb7406656835a90e4f1a2192607f0c21) | |
| parent | [92d847a35e1e41bceba13b8ac1f0e1b9dbe30d25](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=92d847a35e1e41bceba13b8ac1f0e1b9dbe30d25) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8f6cd4d5bb7406656835a90e4f1a2192607f0c21&id2=92d847a35e1e41bceba13b8ac1f0e1b9dbe30d25)) | |
| download | [linux-8f6cd4d5bb7406656835a90e4f1a2192607f0c21.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8f6cd4d5bb7406656835a90e4f1a2192607f0c21.tar.gz) | |

wifi: mac80211: do not pass a stopped vif to the driver in .get\_txpowercommit 393b6bc174b0dd21bb2a36c13b36e62fc3474a23 upstream.
Avoid potentially crashing in the driver because of uninitialized private data
Fixes: 5b3dc42b1b0d ("mac80211: add support for driver tx power reporting")
Cc: stable@vger.kernel.org
Signed-off-by: Felix Fietkau <nbd@nbd.name>
Link: [https://patch.msgid.link/20241002095630.22431-1-nbd@nbd.name](https://patch.msgid.link/20241002095630.22431-1-nbd%40nbd.name)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8f6cd4d5bb7406656835a90e4f1a2192607f0c21)

| -rw-r--r-- | [net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/mac80211/cfg.c?id=8f6cd4d5bb7406656835a90e4f1a2192607f0c21) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/net/mac80211/cfg.c b/net/mac80211/cfg.cindex 1ce8fefd7f0d7f..c0dccaceb05e6e 100644--- a/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=92d847a35e1e41bceba13b8ac1f0e1b9dbe30d25)+++ b/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=8f6cd4d5bb7406656835a90e4f1a2192607f0c21)@@ -3001,7 +3001,8 @@ static int ieee80211\_get\_tx\_power(struct wiphy \*wiphy, struct ieee80211\_local \*local = wiphy\_priv(wiphy); struct ieee80211\_sub\_if\_data \*sdata = IEEE80211\_WDEV\_TO\_SUB\_IF(wdev); - if (local->ops->get\_txpower)+ if (local->ops->get\_txpower &&+ (sdata->flags & IEEE80211\_SDATA\_IN\_DRIVER)) return drv\_get\_txpower(local, sdata, dbm);  if (!local->use\_chanctx) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:07:09 +0000



=== Content from git.kernel.org_694d43ba_20250114_200837.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ee35c423042c9e04079fdee3db545135d609d6ea)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ee35c423042c9e04079fdee3db545135d609d6ea)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ee35c423042c9e04079fdee3db545135d609d6ea)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ee35c423042c9e04079fdee3db545135d609d6ea)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Felix Fietkau <nbd@nbd.name> | 2024-10-02 11:56:30 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:28:23 +0100 |
| commit | [ee35c423042c9e04079fdee3db545135d609d6ea](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ee35c423042c9e04079fdee3db545135d609d6ea) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ee35c423042c9e04079fdee3db545135d609d6ea)) | |
| tree | [ed6e6d31e1e5b464073b02d9599bb2635f055ec9](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ee35c423042c9e04079fdee3db545135d609d6ea) | |
| parent | [0b9be24679358c225fa7bddf35ad199495b0048a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0b9be24679358c225fa7bddf35ad199495b0048a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ee35c423042c9e04079fdee3db545135d609d6ea&id2=0b9be24679358c225fa7bddf35ad199495b0048a)) | |
| download | [linux-ee35c423042c9e04079fdee3db545135d609d6ea.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ee35c423042c9e04079fdee3db545135d609d6ea.tar.gz) | |

wifi: mac80211: do not pass a stopped vif to the driver in .get\_txpowercommit 393b6bc174b0dd21bb2a36c13b36e62fc3474a23 upstream.
Avoid potentially crashing in the driver because of uninitialized private data
Fixes: 5b3dc42b1b0d ("mac80211: add support for driver tx power reporting")
Cc: stable@vger.kernel.org
Signed-off-by: Felix Fietkau <nbd@nbd.name>
Link: [https://patch.msgid.link/20241002095630.22431-1-nbd@nbd.name](https://patch.msgid.link/20241002095630.22431-1-nbd%40nbd.name)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ee35c423042c9e04079fdee3db545135d609d6ea)

| -rw-r--r-- | [net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/mac80211/cfg.c?id=ee35c423042c9e04079fdee3db545135d609d6ea) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/net/mac80211/cfg.c b/net/mac80211/cfg.cindex ca5b111f20e5bd..3da30c991de8a6 100644--- a/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=0b9be24679358c225fa7bddf35ad199495b0048a)+++ b/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=ee35c423042c9e04079fdee3db545135d609d6ea)@@ -3115,7 +3115,8 @@ static int ieee80211\_get\_tx\_power(struct wiphy \*wiphy, struct ieee80211\_local \*local = wiphy\_priv(wiphy); struct ieee80211\_sub\_if\_data \*sdata = IEEE80211\_WDEV\_TO\_SUB\_IF(wdev); - if (local->ops->get\_txpower)+ if (local->ops->get\_txpower &&+ (sdata->flags & IEEE80211\_SDATA\_IN\_DRIVER)) return drv\_get\_txpower(local, sdata, dbm);  if (!local->use\_chanctx) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:07:14 +0000



=== Content from git.kernel.org_549cd822_20250114_200836.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c21efba8b5a86537ccdf43f77536bad02f82776c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c21efba8b5a86537ccdf43f77536bad02f82776c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c21efba8b5a86537ccdf43f77536bad02f82776c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c21efba8b5a86537ccdf43f77536bad02f82776c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Felix Fietkau <nbd@nbd.name> | 2024-10-02 11:56:30 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:22:02 +0100 |
| commit | [c21efba8b5a86537ccdf43f77536bad02f82776c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c21efba8b5a86537ccdf43f77536bad02f82776c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c21efba8b5a86537ccdf43f77536bad02f82776c)) | |
| tree | [2d0279ba9a756c7bd238d920833fcbeac87b47aa](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c21efba8b5a86537ccdf43f77536bad02f82776c) | |
| parent | [1cfc329304617838dc06f021bbbde3bc79cd655e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1cfc329304617838dc06f021bbbde3bc79cd655e) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c21efba8b5a86537ccdf43f77536bad02f82776c&id2=1cfc329304617838dc06f021bbbde3bc79cd655e)) | |
| download | [linux-c21efba8b5a86537ccdf43f77536bad02f82776c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c21efba8b5a86537ccdf43f77536bad02f82776c.tar.gz) | |

wifi: mac80211: do not pass a stopped vif to the driver in .get\_txpowercommit 393b6bc174b0dd21bb2a36c13b36e62fc3474a23 upstream.
Avoid potentially crashing in the driver because of uninitialized private data
Fixes: 5b3dc42b1b0d ("mac80211: add support for driver tx power reporting")
Cc: stable@vger.kernel.org
Signed-off-by: Felix Fietkau <nbd@nbd.name>
Link: [https://patch.msgid.link/20241002095630.22431-1-nbd@nbd.name](https://patch.msgid.link/20241002095630.22431-1-nbd%40nbd.name)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c21efba8b5a86537ccdf43f77536bad02f82776c)

| -rw-r--r-- | [net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/mac80211/cfg.c?id=c21efba8b5a86537ccdf43f77536bad02f82776c) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/net/mac80211/cfg.c b/net/mac80211/cfg.cindex c8d2fe8fbc0a34..f2629e56d1a59b 100644--- a/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=1cfc329304617838dc06f021bbbde3bc79cd655e)+++ b/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=c21efba8b5a86537ccdf43f77536bad02f82776c)@@ -2720,7 +2720,8 @@ static int ieee80211\_get\_tx\_power(struct wiphy \*wiphy, struct ieee80211\_local \*local = wiphy\_priv(wiphy); struct ieee80211\_sub\_if\_data \*sdata = IEEE80211\_WDEV\_TO\_SUB\_IF(wdev); - if (local->ops->get\_txpower)+ if (local->ops->get\_txpower &&+ (sdata->flags & IEEE80211\_SDATA\_IN\_DRIVER)) return drv\_get\_txpower(local, sdata, dbm);  if (!local->use\_chanctx) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:07:13 +0000



=== Content from git.kernel.org_9f32c6a8_20250114_200831.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=78b698fbf37208ee921ee4cedea75b5d33d6ea9f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=78b698fbf37208ee921ee4cedea75b5d33d6ea9f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=78b698fbf37208ee921ee4cedea75b5d33d6ea9f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=78b698fbf37208ee921ee4cedea75b5d33d6ea9f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Felix Fietkau <nbd@nbd.name> | 2024-10-02 11:56:30 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:20:53 +0100 |
| commit | [78b698fbf37208ee921ee4cedea75b5d33d6ea9f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=78b698fbf37208ee921ee4cedea75b5d33d6ea9f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=78b698fbf37208ee921ee4cedea75b5d33d6ea9f)) | |
| tree | [1442bf2d0741694db88d2aa46679b443163f0ccb](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=78b698fbf37208ee921ee4cedea75b5d33d6ea9f) | |
| parent | [d4dba9a076838f3d0333a6a66efec2cdda90b2ee](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d4dba9a076838f3d0333a6a66efec2cdda90b2ee) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=78b698fbf37208ee921ee4cedea75b5d33d6ea9f&id2=d4dba9a076838f3d0333a6a66efec2cdda90b2ee)) | |
| download | [linux-78b698fbf37208ee921ee4cedea75b5d33d6ea9f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-78b698fbf37208ee921ee4cedea75b5d33d6ea9f.tar.gz) | |

wifi: mac80211: do not pass a stopped vif to the driver in .get\_txpowercommit 393b6bc174b0dd21bb2a36c13b36e62fc3474a23 upstream.
Avoid potentially crashing in the driver because of uninitialized private data
Fixes: 5b3dc42b1b0d ("mac80211: add support for driver tx power reporting")
Cc: stable@vger.kernel.org
Signed-off-by: Felix Fietkau <nbd@nbd.name>
Link: [https://patch.msgid.link/20241002095630.22431-1-nbd@nbd.name](https://patch.msgid.link/20241002095630.22431-1-nbd%40nbd.name)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=78b698fbf37208ee921ee4cedea75b5d33d6ea9f)

| -rw-r--r-- | [net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/mac80211/cfg.c?id=78b698fbf37208ee921ee4cedea75b5d33d6ea9f) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/net/mac80211/cfg.c b/net/mac80211/cfg.cindex f0792c1a1869b6..bcc5e694208376 100644--- a/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=d4dba9a076838f3d0333a6a66efec2cdda90b2ee)+++ b/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=78b698fbf37208ee921ee4cedea75b5d33d6ea9f)@@ -2575,7 +2575,8 @@ static int ieee80211\_get\_tx\_power(struct wiphy \*wiphy, struct ieee80211\_local \*local = wiphy\_priv(wiphy); struct ieee80211\_sub\_if\_data \*sdata = IEEE80211\_WDEV\_TO\_SUB\_IF(wdev); - if (local->ops->get\_txpower)+ if (local->ops->get\_txpower &&+ (sdata->flags & IEEE80211\_SDATA\_IN\_DRIVER)) return drv\_get\_txpower(local, sdata, dbm);  if (!local->use\_chanctx) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:07:08 +0000



=== Content from git.kernel.org_e4177c26_20250114_200835.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b2bcbe5450b20641f512d6b26c6b256a5a4f847f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b2bcbe5450b20641f512d6b26c6b256a5a4f847f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b2bcbe5450b20641f512d6b26c6b256a5a4f847f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b2bcbe5450b20641f512d6b26c6b256a5a4f847f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Felix Fietkau <nbd@nbd.name> | 2024-10-02 11:56:30 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:25:54 +0100 |
| commit | [b2bcbe5450b20641f512d6b26c6b256a5a4f847f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b2bcbe5450b20641f512d6b26c6b256a5a4f847f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b2bcbe5450b20641f512d6b26c6b256a5a4f847f)) | |
| tree | [ecbe4786977a83f00a1aba7a2d450db272fe7986](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b2bcbe5450b20641f512d6b26c6b256a5a4f847f) | |
| parent | [4749d336170dbb629e515a857e58a82e61c37a9c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4749d336170dbb629e515a857e58a82e61c37a9c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b2bcbe5450b20641f512d6b26c6b256a5a4f847f&id2=4749d336170dbb629e515a857e58a82e61c37a9c)) | |
| download | [linux-b2bcbe5450b20641f512d6b26c6b256a5a4f847f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b2bcbe5450b20641f512d6b26c6b256a5a4f847f.tar.gz) | |

wifi: mac80211: do not pass a stopped vif to the driver in .get\_txpowercommit 393b6bc174b0dd21bb2a36c13b36e62fc3474a23 upstream.
Avoid potentially crashing in the driver because of uninitialized private data
Fixes: 5b3dc42b1b0d ("mac80211: add support for driver tx power reporting")
Cc: stable@vger.kernel.org
Signed-off-by: Felix Fietkau <nbd@nbd.name>
Link: [https://patch.msgid.link/20241002095630.22431-1-nbd@nbd.name](https://patch.msgid.link/20241002095630.22431-1-nbd%40nbd.name)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b2bcbe5450b20641f512d6b26c6b256a5a4f847f)

| -rw-r--r-- | [net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/mac80211/cfg.c?id=b2bcbe5450b20641f512d6b26c6b256a5a4f847f) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/net/mac80211/cfg.c b/net/mac80211/cfg.cindex c54b3be62c0abf..2b77cb29078877 100644--- a/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=4749d336170dbb629e515a857e58a82e61c37a9c)+++ b/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=b2bcbe5450b20641f512d6b26c6b256a5a4f847f)@@ -2757,7 +2757,8 @@ static int ieee80211\_get\_tx\_power(struct wiphy \*wiphy, struct ieee80211\_local \*local = wiphy\_priv(wiphy); struct ieee80211\_sub\_if\_data \*sdata = IEEE80211\_WDEV\_TO\_SUB\_IF(wdev); - if (local->ops->get\_txpower)+ if (local->ops->get\_txpower &&+ (sdata->flags & IEEE80211\_SDATA\_IN\_DRIVER)) return drv\_get\_txpower(local, sdata, dbm);  if (!local->use\_chanctx) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:07:12 +0000



=== Content from git.kernel.org_0538cd64_20250114_200829.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=393b6bc174b0dd21bb2a36c13b36e62fc3474a23)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=393b6bc174b0dd21bb2a36c13b36e62fc3474a23)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=393b6bc174b0dd21bb2a36c13b36e62fc3474a23)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=393b6bc174b0dd21bb2a36c13b36e62fc3474a23)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Felix Fietkau <nbd@nbd.name> | 2024-10-02 11:56:30 +0200 |
| --- | --- | --- |
| committer | Johannes Berg <johannes.berg@intel.com> | 2024-10-08 21:24:19 +0200 |
| commit | [393b6bc174b0dd21bb2a36c13b36e62fc3474a23](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=393b6bc174b0dd21bb2a36c13b36e62fc3474a23) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=393b6bc174b0dd21bb2a36c13b36e62fc3474a23)) | |
| tree | [db1a48263d7eddd8c3f49c81dbf2d8c7a76659b4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=393b6bc174b0dd21bb2a36c13b36e62fc3474a23) | |
| parent | [4cc6f3e5e5765abad9c091989970d67d8c1d2204](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4cc6f3e5e5765abad9c091989970d67d8c1d2204) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=393b6bc174b0dd21bb2a36c13b36e62fc3474a23&id2=4cc6f3e5e5765abad9c091989970d67d8c1d2204)) | |
| download | [linux-393b6bc174b0dd21bb2a36c13b36e62fc3474a23.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-393b6bc174b0dd21bb2a36c13b36e62fc3474a23.tar.gz) | |

wifi: mac80211: do not pass a stopped vif to the driver in .get\_txpowerAvoid potentially crashing in the driver because of uninitialized private data
Fixes: 5b3dc42b1b0d ("mac80211: add support for driver tx power reporting")
Cc: stable@vger.kernel.org
Signed-off-by: Felix Fietkau <nbd@nbd.name>
Link: [https://patch.msgid.link/20241002095630.22431-1-nbd@nbd.name](https://patch.msgid.link/20241002095630.22431-1-nbd%40nbd.name)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=393b6bc174b0dd21bb2a36c13b36e62fc3474a23)

| -rw-r--r-- | [net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/mac80211/cfg.c?id=393b6bc174b0dd21bb2a36c13b36e62fc3474a23) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/net/mac80211/cfg.c b/net/mac80211/cfg.cindex 13294cc20a9ba1..6dfc61a9acd4a5 100644--- a/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=4cc6f3e5e5765abad9c091989970d67d8c1d2204)+++ b/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=393b6bc174b0dd21bb2a36c13b36e62fc3474a23)@@ -3143,7 +3143,8 @@ static int ieee80211\_get\_tx\_power(struct wiphy \*wiphy, struct ieee80211\_local \*local = wiphy\_priv(wiphy); struct ieee80211\_sub\_if\_data \*sdata = IEEE80211\_WDEV\_TO\_SUB\_IF(wdev); - if (local->ops->get\_txpower)+ if (local->ops->get\_txpower &&+ (sdata->flags & IEEE80211\_SDATA\_IN\_DRIVER)) return drv\_get\_txpower(local, sdata, dbm);  if (local->emulate\_chanctx) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:07:06 +0000



=== Content from git.kernel.org_d9835a21_20250114_200834.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b0b862aa3dbcd16b3c4715259a825f48ca540088)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b0b862aa3dbcd16b3c4715259a825f48ca540088)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b0b862aa3dbcd16b3c4715259a825f48ca540088)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b0b862aa3dbcd16b3c4715259a825f48ca540088)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Felix Fietkau <nbd@nbd.name> | 2024-10-02 11:56:30 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:19:23 +0100 |
| commit | [b0b862aa3dbcd16b3c4715259a825f48ca540088](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b0b862aa3dbcd16b3c4715259a825f48ca540088) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b0b862aa3dbcd16b3c4715259a825f48ca540088)) | |
| tree | [b5352b9b909adbd82955af8ac408b2cb6d80db4a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b0b862aa3dbcd16b3c4715259a825f48ca540088) | |
| parent | [fe10c8367687c27172a10ba5cc849bd82077bd7d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fe10c8367687c27172a10ba5cc849bd82077bd7d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b0b862aa3dbcd16b3c4715259a825f48ca540088&id2=fe10c8367687c27172a10ba5cc849bd82077bd7d)) | |
| download | [linux-b0b862aa3dbcd16b3c4715259a825f48ca540088.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b0b862aa3dbcd16b3c4715259a825f48ca540088.tar.gz) | |

wifi: mac80211: do not pass a stopped vif to the driver in .get\_txpowercommit 393b6bc174b0dd21bb2a36c13b36e62fc3474a23 upstream.
Avoid potentially crashing in the driver because of uninitialized private data
Fixes: 5b3dc42b1b0d ("mac80211: add support for driver tx power reporting")
Cc: stable@vger.kernel.org
Signed-off-by: Felix Fietkau <nbd@nbd.name>
Link: [https://patch.msgid.link/20241002095630.22431-1-nbd@nbd.name](https://patch.msgid.link/20241002095630.22431-1-nbd%40nbd.name)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b0b862aa3dbcd16b3c4715259a825f48ca540088)

| -rw-r--r-- | [net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/mac80211/cfg.c?id=b0b862aa3dbcd16b3c4715259a825f48ca540088) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/net/mac80211/cfg.c b/net/mac80211/cfg.cindex cfbaafcea0a4e9..1c59b8f90f5c5a 100644--- a/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=fe10c8367687c27172a10ba5cc849bd82077bd7d)+++ b/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=b0b862aa3dbcd16b3c4715259a825f48ca540088)@@ -2443,7 +2443,8 @@ static int ieee80211\_get\_tx\_power(struct wiphy \*wiphy, struct ieee80211\_local \*local = wiphy\_priv(wiphy); struct ieee80211\_sub\_if\_data \*sdata = IEEE80211\_WDEV\_TO\_SUB\_IF(wdev); - if (local->ops->get\_txpower)+ if (local->ops->get\_txpower &&+ (sdata->flags & IEEE80211\_SDATA\_IN\_DRIVER)) return drv\_get\_txpower(local, sdata, dbm);  if (!local->use\_chanctx) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:07:11 +0000



=== Content from git.kernel.org_d8124392_20250114_200830.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=3ccf525a73d48e814634847f6d4a6150c6f0dffc)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3ccf525a73d48e814634847f6d4a6150c6f0dffc)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3ccf525a73d48e814634847f6d4a6150c6f0dffc)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3ccf525a73d48e814634847f6d4a6150c6f0dffc)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Felix Fietkau <nbd@nbd.name> | 2024-10-02 11:56:30 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:30:54 +0100 |
| commit | [3ccf525a73d48e814634847f6d4a6150c6f0dffc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3ccf525a73d48e814634847f6d4a6150c6f0dffc) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=3ccf525a73d48e814634847f6d4a6150c6f0dffc)) | |
| tree | [e4af9b4eb0e75e5d6f20273b9a60bc49bfe8c00b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3ccf525a73d48e814634847f6d4a6150c6f0dffc) | |
| parent | [ab40406051d7c1045c2845a2caca0fd50adbb1d6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ab40406051d7c1045c2845a2caca0fd50adbb1d6) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3ccf525a73d48e814634847f6d4a6150c6f0dffc&id2=ab40406051d7c1045c2845a2caca0fd50adbb1d6)) | |
| download | [linux-3ccf525a73d48e814634847f6d4a6150c6f0dffc.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-3ccf525a73d48e814634847f6d4a6150c6f0dffc.tar.gz) | |

wifi: mac80211: do not pass a stopped vif to the driver in .get\_txpowercommit 393b6bc174b0dd21bb2a36c13b36e62fc3474a23 upstream.
Avoid potentially crashing in the driver because of uninitialized private data
Fixes: 5b3dc42b1b0d ("mac80211: add support for driver tx power reporting")
Cc: stable@vger.kernel.org
Signed-off-by: Felix Fietkau <nbd@nbd.name>
Link: [https://patch.msgid.link/20241002095630.22431-1-nbd@nbd.name](https://patch.msgid.link/20241002095630.22431-1-nbd%40nbd.name)
Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3ccf525a73d48e814634847f6d4a6150c6f0dffc)

| -rw-r--r-- | [net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/net/mac80211/cfg.c?id=3ccf525a73d48e814634847f6d4a6150c6f0dffc) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/net/mac80211/cfg.c b/net/mac80211/cfg.cindex b02b84ce213076..f2b5c18417ef71 100644--- a/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=ab40406051d7c1045c2845a2caca0fd50adbb1d6)+++ b/[net/mac80211/cfg.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/net/mac80211/cfg.c?id=3ccf525a73d48e814634847f6d4a6150c6f0dffc)@@ -3138,7 +3138,8 @@ static int ieee80211\_get\_tx\_power(struct wiphy \*wiphy, struct ieee80211\_local \*local = wiphy\_priv(wiphy); struct ieee80211\_sub\_if\_data \*sdata = IEEE80211\_WDEV\_TO\_SUB\_IF(wdev); - if (local->ops->get\_txpower)+ if (local->ops->get\_txpower &&+ (sdata->flags & IEEE80211\_SDATA\_IN\_DRIVER)) return drv\_get\_txpower(local, sdata, dbm);  if (local->emulate\_chanctx) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 20:07:07 +0000


