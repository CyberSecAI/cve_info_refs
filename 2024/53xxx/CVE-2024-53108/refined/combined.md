=== Content from git.kernel.org_771d3f75_20250114_211709.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=16dd2825c23530f2259fc671960a3a65d2af69bd)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=16dd2825c23530f2259fc671960a3a65d2af69bd)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=16dd2825c23530f2259fc671960a3a65d2af69bd)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=16dd2825c23530f2259fc671960a3a65d2af69bd)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Rodrigo Siqueira <Rodrigo.Siqueira@amd.com> | 2024-11-05 08:40:23 -0700 |
| --- | --- | --- |
| committer | Alex Deucher <alexander.deucher@amd.com> | 2024-11-11 14:05:30 -0500 |
| commit | [16dd2825c23530f2259fc671960a3a65d2af69bd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=16dd2825c23530f2259fc671960a3a65d2af69bd) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=16dd2825c23530f2259fc671960a3a65d2af69bd)) | |
| tree | [d5affeccaf5014261635f98497a9c0be23b3c23f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=16dd2825c23530f2259fc671960a3a65d2af69bd) | |
| parent | [9fc0cbcb6e45d6fc96ffd3bb7b6d6d28d693ff4d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9fc0cbcb6e45d6fc96ffd3bb7b6d6d28d693ff4d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=16dd2825c23530f2259fc671960a3a65d2af69bd&id2=9fc0cbcb6e45d6fc96ffd3bb7b6d6d28d693ff4d)) | |
| download | [linux-16dd2825c23530f2259fc671960a3a65d2af69bd.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-16dd2825c23530f2259fc671960a3a65d2af69bd.tar.gz) | |

drm/amd/display: Adjust VSDB parser for replay featureAt some point, the IEEE ID identification for the replay check in the
AMD EDID was added. However, this check causes the following
out-of-bounds issues when using KASAN:
[ 27.804016] BUG: KASAN: slab-out-of-bounds in amdgpu\_dm\_update\_freesync\_caps+0xefa/0x17a0 [amdgpu]
[ 27.804788] Read of size 1 at addr ffff8881647fdb00 by task systemd-udevd/383
...
[ 27.821207] Memory state around the buggy address:
[ 27.821215] ffff8881647fda00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
[ 27.821224] ffff8881647fda80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
[ 27.821234] >ffff8881647fdb00: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 27.821243] ^
[ 27.821250] ffff8881647fdb80: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 27.821259] ffff8881647fdc00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
[ 27.821268] ==================================================================
This is caused because the ID extraction happens outside of the range of
the edid lenght. This commit addresses this issue by considering the
amd\_vsdb\_block size.
Cc: ChiaHsuan Chung <chiahsuan.chung@amd.com>
Reviewed-by: Leo Li <sunpeng.li@amd.com>
Signed-off-by: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Signed-off-by: Hamza Mahfooz <hamza.mahfooz@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit b7e381b1ccd5e778e3d9c44c669ad38439a861d8)
Cc: stable@vger.kernel.org
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=16dd2825c23530f2259fc671960a3a65d2af69bd)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=16dd2825c23530f2259fc671960a3a65d2af69bd) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c b/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.cindex d46f6ae44f7a8c..8d97f17ffe662a 100644--- a/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=9fc0cbcb6e45d6fc96ffd3bb7b6d6d28d693ff4d)+++ b/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=16dd2825c23530f2259fc671960a3a65d2af69bd)@@ -12083,7 +12083,7 @@ static int parse\_amd\_vsdb(struct amdgpu\_dm\_connector \*aconnector, break; } - while (j < EDID\_LENGTH) {+ while (j < EDID\_LENGTH - sizeof(struct amd\_vsdb\_block)) { struct amd\_vsdb\_block \*amd\_vsdb = (struct amd\_vsdb\_block \*)&edid\_ext[j]; unsigned int ieeeId = (amd\_vsdb->ieee\_id[2] << 16) | (amd\_vsdb->ieee\_id[1] << 8) | (amd\_vsdb->ieee\_id[0]); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:15:46 +0000



=== Content from git.kernel.org_5099ec6c_20250114_211710.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8db867061f4c76505ad62422b65d666b45289217)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8db867061f4c76505ad62422b65d666b45289217)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8db867061f4c76505ad62422b65d666b45289217)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8db867061f4c76505ad62422b65d666b45289217)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Rodrigo Siqueira <Rodrigo.Siqueira@amd.com> | 2024-11-05 08:40:23 -0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-22 15:39:55 +0100 |
| commit | [8db867061f4c76505ad62422b65d666b45289217](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8db867061f4c76505ad62422b65d666b45289217) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8db867061f4c76505ad62422b65d666b45289217)) | |
| tree | [9a25846b8b0b8b02bc6d3ae8a819c70b37b9beed](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8db867061f4c76505ad62422b65d666b45289217) | |
| parent | [71f4624e9080a9aceba16e6bf75c6ca57c2aa118](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=71f4624e9080a9aceba16e6bf75c6ca57c2aa118) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8db867061f4c76505ad62422b65d666b45289217&id2=71f4624e9080a9aceba16e6bf75c6ca57c2aa118)) | |
| download | [linux-8db867061f4c76505ad62422b65d666b45289217.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8db867061f4c76505ad62422b65d666b45289217.tar.gz) | |

drm/amd/display: Adjust VSDB parser for replay featurecommit 16dd2825c23530f2259fc671960a3a65d2af69bd upstream.
At some point, the IEEE ID identification for the replay check in the
AMD EDID was added. However, this check causes the following
out-of-bounds issues when using KASAN:
[ 27.804016] BUG: KASAN: slab-out-of-bounds in amdgpu\_dm\_update\_freesync\_caps+0xefa/0x17a0 [amdgpu]
[ 27.804788] Read of size 1 at addr ffff8881647fdb00 by task systemd-udevd/383
...
[ 27.821207] Memory state around the buggy address:
[ 27.821215] ffff8881647fda00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
[ 27.821224] ffff8881647fda80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
[ 27.821234] >ffff8881647fdb00: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 27.821243] ^
[ 27.821250] ffff8881647fdb80: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 27.821259] ffff8881647fdc00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
[ 27.821268] ==================================================================
This is caused because the ID extraction happens outside of the range of
the edid lenght. This commit addresses this issue by considering the
amd\_vsdb\_block size.
Cc: ChiaHsuan Chung <chiahsuan.chung@amd.com>
Reviewed-by: Leo Li <sunpeng.li@amd.com>
Signed-off-by: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Signed-off-by: Hamza Mahfooz <hamza.mahfooz@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit b7e381b1ccd5e778e3d9c44c669ad38439a861d8)
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8db867061f4c76505ad62422b65d666b45289217)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=8db867061f4c76505ad62422b65d666b45289217) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c b/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.cindex 64173ea1a06592..339bdfb7af2f81 100644--- a/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=71f4624e9080a9aceba16e6bf75c6ca57c2aa118)+++ b/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=8db867061f4c76505ad62422b65d666b45289217)@@ -12038,7 +12038,7 @@ static int parse\_amd\_vsdb(struct amdgpu\_dm\_connector \*aconnector, break; } - while (j < EDID\_LENGTH) {+ while (j < EDID\_LENGTH - sizeof(struct amd\_vsdb\_block)) { struct amd\_vsdb\_block \*amd\_vsdb = (struct amd\_vsdb\_block \*)&edid\_ext[j]; unsigned int ieeeId = (amd\_vsdb->ieee\_id[2] << 16) | (amd\_vsdb->ieee\_id[1] << 8) | (amd\_vsdb->ieee\_id[0]); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:15:47 +0000



=== Content from git.kernel.org_ed3c8087_20250114_211709.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0a326fbc8f72a320051f27328d4d4e7abdfe68d7)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0a326fbc8f72a320051f27328d4d4e7abdfe68d7)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0a326fbc8f72a320051f27328d4d4e7abdfe68d7)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0a326fbc8f72a320051f27328d4d4e7abdfe68d7)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Rodrigo Siqueira <Rodrigo.Siqueira@amd.com> | 2024-11-05 08:40:23 -0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-22 15:38:35 +0100 |
| commit | [0a326fbc8f72a320051f27328d4d4e7abdfe68d7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0a326fbc8f72a320051f27328d4d4e7abdfe68d7) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0a326fbc8f72a320051f27328d4d4e7abdfe68d7)) | |
| tree | [ffc6366bd46fd4d94ac494f79aabee458753e53e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0a326fbc8f72a320051f27328d4d4e7abdfe68d7) | |
| parent | [5e91cd9a34171171c83d462256626c6a8deec2a0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5e91cd9a34171171c83d462256626c6a8deec2a0) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0a326fbc8f72a320051f27328d4d4e7abdfe68d7&id2=5e91cd9a34171171c83d462256626c6a8deec2a0)) | |
| download | [linux-0a326fbc8f72a320051f27328d4d4e7abdfe68d7.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0a326fbc8f72a320051f27328d4d4e7abdfe68d7.tar.gz) | |

drm/amd/display: Adjust VSDB parser for replay featurecommit 16dd2825c23530f2259fc671960a3a65d2af69bd upstream.
At some point, the IEEE ID identification for the replay check in the
AMD EDID was added. However, this check causes the following
out-of-bounds issues when using KASAN:
[ 27.804016] BUG: KASAN: slab-out-of-bounds in amdgpu\_dm\_update\_freesync\_caps+0xefa/0x17a0 [amdgpu]
[ 27.804788] Read of size 1 at addr ffff8881647fdb00 by task systemd-udevd/383
...
[ 27.821207] Memory state around the buggy address:
[ 27.821215] ffff8881647fda00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
[ 27.821224] ffff8881647fda80: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
[ 27.821234] >ffff8881647fdb00: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 27.821243] ^
[ 27.821250] ffff8881647fdb80: fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc fc
[ 27.821259] ffff8881647fdc00: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
[ 27.821268] ==================================================================
This is caused because the ID extraction happens outside of the range of
the edid lenght. This commit addresses this issue by considering the
amd\_vsdb\_block size.
Cc: ChiaHsuan Chung <chiahsuan.chung@amd.com>
Reviewed-by: Leo Li <sunpeng.li@amd.com>
Signed-off-by: Rodrigo Siqueira <Rodrigo.Siqueira@amd.com>
Signed-off-by: Hamza Mahfooz <hamza.mahfooz@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit b7e381b1ccd5e778e3d9c44c669ad38439a861d8)
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0a326fbc8f72a320051f27328d4d4e7abdfe68d7)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=0a326fbc8f72a320051f27328d4d4e7abdfe68d7) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c b/drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.cindex a3f17c572bf06e..8a152f4974d3c5 100644--- a/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=5e91cd9a34171171c83d462256626c6a8deec2a0)+++ b/[drivers/gpu/drm/amd/display/amdgpu\_dm/amdgpu\_dm.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c?id=0a326fbc8f72a320051f27328d4d4e7abdfe68d7)@@ -10725,7 +10725,7 @@ static int parse\_amd\_vsdb(struct amdgpu\_dm\_connector \*aconnector, break; } - while (j < EDID\_LENGTH) {+ while (j < EDID\_LENGTH - sizeof(struct amd\_vsdb\_block)) { struct amd\_vsdb\_block \*amd\_vsdb = (struct amd\_vsdb\_block \*)&edid\_ext[j]; unsigned int ieeeId = (amd\_vsdb->ieee\_id[2] << 16) | (amd\_vsdb->ieee\_id[1] << 8) | (amd\_vsdb->ieee\_id[0]); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 21:15:46 +0000


