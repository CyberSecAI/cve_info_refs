=== Content from git.kernel.org_4139796f_20250114_190412.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=76918202615f2ba7deda14901d9fff528a180099)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=76918202615f2ba7deda14901d9fff528a180099)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=76918202615f2ba7deda14901d9fff528a180099)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=76918202615f2ba7deda14901d9fff528a180099)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gustavo A. R. Silva <gustavoars@kernel.org> | 2024-11-14 16:49:21 -0600 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 13:54:11 +0100 |
| commit | [76918202615f2ba7deda14901d9fff528a180099](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=76918202615f2ba7deda14901d9fff528a180099) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=76918202615f2ba7deda14901d9fff528a180099)) | |
| tree | [3135edc6d37d4280e9d86053a81d7d5e1c7f020f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=76918202615f2ba7deda14901d9fff528a180099) | |
| parent | [3735684f64e0ab9155aa2f9cc7d0e51ddd596399](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3735684f64e0ab9155aa2f9cc7d0e51ddd596399) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=76918202615f2ba7deda14901d9fff528a180099&id2=3735684f64e0ab9155aa2f9cc7d0e51ddd596399)) | |
| download | [linux-76918202615f2ba7deda14901d9fff528a180099.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-76918202615f2ba7deda14901d9fff528a180099.tar.gz) | |

clk: clk-loongson2: Fix memory corruption bug in struct loongson2\_clk\_providercommit 6e4bf018bb040955da53dae9f8628ef8fcec2dbe upstream.
Some heap space is allocated for the flexible structure `struct
clk\_hw\_onecell\_data` and its flexible-array member `hws` through
the composite structure `struct loongson2\_clk\_provider` in function
`loongson2\_clk\_probe()`, as shown below:
289 struct loongson2\_clk\_provider \*clp;
...
296 for (p = data; p->name; p++)
297 clks\_num++;
298
299 clp = devm\_kzalloc(dev, struct\_size(clp, clk\_data.hws, clks\_num),
300 GFP\_KERNEL);
Then some data is written into the flexible array:
350 clp->clk\_data.hws[p->id] = hw;
This corrupts `clk\_lock`, which is the spinlock variable immediately
following the `clk\_data` member in `struct loongson2\_clk\_provider`:
struct loongson2\_clk\_provider {
void \_\_iomem \*base;
struct device \*dev;
struct clk\_hw\_onecell\_data clk\_data;
spinlock\_t clk\_lock; /\* protect access to DIV registers \*/
};
The problem is that the flexible structure is currently placed in the
middle of `struct loongson2\_clk\_provider` instead of at the end.
Fix this by moving `struct clk\_hw\_onecell\_data clk\_data;` to the end of
`struct loongson2\_clk\_provider`. Also, add a code comment to help
prevent this from happening again in case new members are added to the
structure in the future.
This change also fixes the following -Wflex-array-member-not-at-end
warning:
drivers/clk/clk-loongson2.c:32:36: warning: structure containing a flexible array member is not at the end of another structure [-Wflex-array-member-not-at-end]
Fixes: 9796ec0bd04b ("clk: clk-loongson2: Refactor driver for adding new platforms")
Cc: stable@vger.kernel.org
Signed-off-by: Gustavo A. R. Silva <gustavoars@kernel.org>
Link: [https://lore.kernel.org/r/ZzZ-cd\_EFXs6qFaH@kspp](https://lore.kernel.org/r/ZzZ-cd_EFXs6qFaH%40kspp)
Signed-off-by: Stephen Boyd <sboyd@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=76918202615f2ba7deda14901d9fff528a180099)

| -rw-r--r-- | [drivers/clk/clk-loongson2.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/clk/clk-loongson2.c?id=76918202615f2ba7deda14901d9fff528a180099) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/clk/clk-loongson2.c b/drivers/clk/clk-loongson2.cindex 820bb1e9e3b79a..e99ba79feec625 100644--- a/[drivers/clk/clk-loongson2.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/clk/clk-loongson2.c?id=3735684f64e0ab9155aa2f9cc7d0e51ddd596399)+++ b/[drivers/clk/clk-loongson2.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/clk/clk-loongson2.c?id=76918202615f2ba7deda14901d9fff528a180099)@@ -29,8 +29,10 @@ enum loongson2\_clk\_type { struct loongson2\_clk\_provider { void \_\_iomem \*base; struct device \*dev;- struct clk\_hw\_onecell\_data clk\_data; spinlock\_t clk\_lock; /\* protect access to DIV registers \*/++ /\* Must be last --ends in a flexible-array member. \*/+ struct clk\_hw\_onecell\_data clk\_data; };  struct loongson2\_clk\_data { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:02:49 +0000



=== Content from git.kernel.org_92019035_20250114_190411.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=145de18065b9840687d9b4e63746238c1da25d22)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=145de18065b9840687d9b4e63746238c1da25d22)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=145de18065b9840687d9b4e63746238c1da25d22)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=145de18065b9840687d9b4e63746238c1da25d22)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gustavo A. R. Silva <gustavoars@kernel.org> | 2024-11-14 16:49:21 -0600 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 14:02:45 +0100 |
| commit | [145de18065b9840687d9b4e63746238c1da25d22](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=145de18065b9840687d9b4e63746238c1da25d22) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=145de18065b9840687d9b4e63746238c1da25d22)) | |
| tree | [5cfbc35fb299dba6e44e4a05571db5477ed276eb](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=145de18065b9840687d9b4e63746238c1da25d22) | |
| parent | [7b3a7918f10dbc312e36c7363be0788a596d94d5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7b3a7918f10dbc312e36c7363be0788a596d94d5) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=145de18065b9840687d9b4e63746238c1da25d22&id2=7b3a7918f10dbc312e36c7363be0788a596d94d5)) | |
| download | [linux-145de18065b9840687d9b4e63746238c1da25d22.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-145de18065b9840687d9b4e63746238c1da25d22.tar.gz) | |

clk: clk-loongson2: Fix memory corruption bug in struct loongson2\_clk\_providercommit 6e4bf018bb040955da53dae9f8628ef8fcec2dbe upstream.
Some heap space is allocated for the flexible structure `struct
clk\_hw\_onecell\_data` and its flexible-array member `hws` through
the composite structure `struct loongson2\_clk\_provider` in function
`loongson2\_clk\_probe()`, as shown below:
289 struct loongson2\_clk\_provider \*clp;
...
296 for (p = data; p->name; p++)
297 clks\_num++;
298
299 clp = devm\_kzalloc(dev, struct\_size(clp, clk\_data.hws, clks\_num),
300 GFP\_KERNEL);
Then some data is written into the flexible array:
350 clp->clk\_data.hws[p->id] = hw;
This corrupts `clk\_lock`, which is the spinlock variable immediately
following the `clk\_data` member in `struct loongson2\_clk\_provider`:
struct loongson2\_clk\_provider {
void \_\_iomem \*base;
struct device \*dev;
struct clk\_hw\_onecell\_data clk\_data;
spinlock\_t clk\_lock; /\* protect access to DIV registers \*/
};
The problem is that the flexible structure is currently placed in the
middle of `struct loongson2\_clk\_provider` instead of at the end.
Fix this by moving `struct clk\_hw\_onecell\_data clk\_data;` to the end of
`struct loongson2\_clk\_provider`. Also, add a code comment to help
prevent this from happening again in case new members are added to the
structure in the future.
This change also fixes the following -Wflex-array-member-not-at-end
warning:
drivers/clk/clk-loongson2.c:32:36: warning: structure containing a flexible array member is not at the end of another structure [-Wflex-array-member-not-at-end]
Fixes: 9796ec0bd04b ("clk: clk-loongson2: Refactor driver for adding new platforms")
Cc: stable@vger.kernel.org
Signed-off-by: Gustavo A. R. Silva <gustavoars@kernel.org>
Link: [https://lore.kernel.org/r/ZzZ-cd\_EFXs6qFaH@kspp](https://lore.kernel.org/r/ZzZ-cd_EFXs6qFaH%40kspp)
Signed-off-by: Stephen Boyd <sboyd@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=145de18065b9840687d9b4e63746238c1da25d22)

| -rw-r--r-- | [drivers/clk/clk-loongson2.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/clk/clk-loongson2.c?id=145de18065b9840687d9b4e63746238c1da25d22) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/clk/clk-loongson2.c b/drivers/clk/clk-loongson2.cindex 820bb1e9e3b79a..e99ba79feec625 100644--- a/[drivers/clk/clk-loongson2.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/clk/clk-loongson2.c?id=7b3a7918f10dbc312e36c7363be0788a596d94d5)+++ b/[drivers/clk/clk-loongson2.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/clk/clk-loongson2.c?id=145de18065b9840687d9b4e63746238c1da25d22)@@ -29,8 +29,10 @@ enum loongson2\_clk\_type { struct loongson2\_clk\_provider { void \_\_iomem \*base; struct device \*dev;- struct clk\_hw\_onecell\_data clk\_data; spinlock\_t clk\_lock; /\* protect access to DIV registers \*/++ /\* Must be last --ends in a flexible-array member. \*/+ struct clk\_hw\_onecell\_data clk\_data; };  struct loongson2\_clk\_data { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:02:48 +0000



=== Content from git.kernel.org_0a37927b_20250114_190412.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=6e4bf018bb040955da53dae9f8628ef8fcec2dbe)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6e4bf018bb040955da53dae9f8628ef8fcec2dbe)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6e4bf018bb040955da53dae9f8628ef8fcec2dbe)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6e4bf018bb040955da53dae9f8628ef8fcec2dbe)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gustavo A. R. Silva <gustavoars@kernel.org> | 2024-11-14 16:49:21 -0600 |
| --- | --- | --- |
| committer | Stephen Boyd <sboyd@kernel.org> | 2024-11-18 19:51:27 -0800 |
| commit | [6e4bf018bb040955da53dae9f8628ef8fcec2dbe](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6e4bf018bb040955da53dae9f8628ef8fcec2dbe) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=6e4bf018bb040955da53dae9f8628ef8fcec2dbe)) | |
| tree | [b159101a865f767d5becbbb401d75201e6e78dc3](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6e4bf018bb040955da53dae9f8628ef8fcec2dbe) | |
| parent | [e7b012cb4db7253d186fd485ab07c7346c645dab](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e7b012cb4db7253d186fd485ab07c7346c645dab) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6e4bf018bb040955da53dae9f8628ef8fcec2dbe&id2=e7b012cb4db7253d186fd485ab07c7346c645dab)) | |
| download | [linux-6e4bf018bb040955da53dae9f8628ef8fcec2dbe.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-6e4bf018bb040955da53dae9f8628ef8fcec2dbe.tar.gz) | |

clk: clk-loongson2: Fix memory corruption bug in struct loongson2\_clk\_providerSome heap space is allocated for the flexible structure `struct
clk\_hw\_onecell\_data` and its flexible-array member `hws` through
the composite structure `struct loongson2\_clk\_provider` in function
`loongson2\_clk\_probe()`, as shown below:
289 struct loongson2\_clk\_provider \*clp;
...
296 for (p = data; p->name; p++)
297 clks\_num++;
298
299 clp = devm\_kzalloc(dev, struct\_size(clp, clk\_data.hws, clks\_num),
300 GFP\_KERNEL);
Then some data is written into the flexible array:
350 clp->clk\_data.hws[p->id] = hw;
This corrupts `clk\_lock`, which is the spinlock variable immediately
following the `clk\_data` member in `struct loongson2\_clk\_provider`:
struct loongson2\_clk\_provider {
void \_\_iomem \*base;
struct device \*dev;
struct clk\_hw\_onecell\_data clk\_data;
spinlock\_t clk\_lock; /\* protect access to DIV registers \*/
};
The problem is that the flexible structure is currently placed in the
middle of `struct loongson2\_clk\_provider` instead of at the end.
Fix this by moving `struct clk\_hw\_onecell\_data clk\_data;` to the end of
`struct loongson2\_clk\_provider`. Also, add a code comment to help
prevent this from happening again in case new members are added to the
structure in the future.
This change also fixes the following -Wflex-array-member-not-at-end
warning:
drivers/clk/clk-loongson2.c:32:36: warning: structure containing a flexible array member is not at the end of another structure [-Wflex-array-member-not-at-end]
Fixes: 9796ec0bd04b ("clk: clk-loongson2: Refactor driver for adding new platforms")
Cc: stable@vger.kernel.org
Signed-off-by: Gustavo A. R. Silva <gustavoars@kernel.org>
Link: [https://lore.kernel.org/r/ZzZ-cd\_EFXs6qFaH@kspp](https://lore.kernel.org/r/ZzZ-cd_EFXs6qFaH%40kspp)
Signed-off-by: Stephen Boyd <sboyd@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6e4bf018bb040955da53dae9f8628ef8fcec2dbe)

| -rw-r--r-- | [drivers/clk/clk-loongson2.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/clk/clk-loongson2.c?id=6e4bf018bb040955da53dae9f8628ef8fcec2dbe) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/clk/clk-loongson2.c b/drivers/clk/clk-loongson2.cindex 820bb1e9e3b79a..e99ba79feec625 100644--- a/[drivers/clk/clk-loongson2.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/clk/clk-loongson2.c?id=e7b012cb4db7253d186fd485ab07c7346c645dab)+++ b/[drivers/clk/clk-loongson2.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/clk/clk-loongson2.c?id=6e4bf018bb040955da53dae9f8628ef8fcec2dbe)@@ -29,8 +29,10 @@ enum loongson2\_clk\_type { struct loongson2\_clk\_provider { void \_\_iomem \*base; struct device \*dev;- struct clk\_hw\_onecell\_data clk\_data; spinlock\_t clk\_lock; /\* protect access to DIV registers \*/++ /\* Must be last --ends in a flexible-array member. \*/+ struct clk\_hw\_onecell\_data clk\_data; };  struct loongson2\_clk\_data { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 19:02:49 +0000


