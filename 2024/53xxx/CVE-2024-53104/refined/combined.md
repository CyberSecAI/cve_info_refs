=== Content from git.kernel.org_a248996d_20250115_080156.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=faff5bbb2762c44ec7426037b3000e77a11d6773)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=faff5bbb2762c44ec7426037b3000e77a11d6773)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=faff5bbb2762c44ec7426037b3000e77a11d6773)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=faff5bbb2762c44ec7426037b3000e77a11d6773)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benoit Sevens <bsevens@google.com> | 2024-11-07 14:22:02 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:59:38 +0100 |
| commit | [faff5bbb2762c44ec7426037b3000e77a11d6773](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=faff5bbb2762c44ec7426037b3000e77a11d6773) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=faff5bbb2762c44ec7426037b3000e77a11d6773)) | |
| tree | [ea9819c05860ee870365c765296b976d9302561a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=faff5bbb2762c44ec7426037b3000e77a11d6773) | |
| parent | [547087307bc19417b4f2bc85ba9664a3e8db5a6a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=547087307bc19417b4f2bc85ba9664a3e8db5a6a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=faff5bbb2762c44ec7426037b3000e77a11d6773&id2=547087307bc19417b4f2bc85ba9664a3e8db5a6a)) | |
| download | [linux-faff5bbb2762c44ec7426037b3000e77a11d6773.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-faff5bbb2762c44ec7426037b3000e77a11d6773.tar.gz) | |

media: uvcvideo: Skip parsing frames of type UVC\_VS\_UNDEFINED in uvc\_parse\_formatcommit ecf2b43018da9579842c774b7f35dbe11b5c38dd upstream.
This can lead to out of bounds writes since frames of this type were not
taken into account when calculating the size of the frames buffer in
uvc\_parse\_streaming.
Fixes: c0efd232929c ("V4L/DVB (8145a): USB Video Class driver")
Signed-off-by: Benoit Sevens <bsevens@google.com>
Cc: stable@vger.kernel.org
Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Reviewed-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=faff5bbb2762c44ec7426037b3000e77a11d6773)

| -rw-r--r-- | [drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/uvc/uvc_driver.c?id=faff5bbb2762c44ec7426037b3000e77a11d6773) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/media/usb/uvc/uvc\_driver.c b/drivers/media/usb/uvc/uvc\_driver.cindex cfbc7595cd0b87..519fd648f26cbe 100644--- a/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=547087307bc19417b4f2bc85ba9664a3e8db5a6a)+++ b/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=faff5bbb2762c44ec7426037b3000e77a11d6773)@@ -661,7 +661,7 @@ static int uvc\_parse\_format(struct uvc\_device \*dev, /\* Parse the frame descriptors. Only uncompressed, MJPEG and frame \* based formats have frame descriptors. \*/- while (buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE &&+ while (ftype && buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE && buffer[2] == ftype) { frame = &format->frame[format->nframes]; if (ftype != UVC\_VS\_FRAME\_FRAME\_BASED) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 07:58:40 +0000



=== Content from git.kernel.org_2e8d2556_20250115_080153.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1ee9d9122801eb688783acd07791f2906b87cb4f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1ee9d9122801eb688783acd07791f2906b87cb4f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1ee9d9122801eb688783acd07791f2906b87cb4f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1ee9d9122801eb688783acd07791f2906b87cb4f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benoit Sevens <bsevens@google.com> | 2024-11-07 14:22:02 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-22 15:30:26 +0100 |
| commit | [1ee9d9122801eb688783acd07791f2906b87cb4f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1ee9d9122801eb688783acd07791f2906b87cb4f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1ee9d9122801eb688783acd07791f2906b87cb4f)) | |
| tree | [18f7cfd5ce3d206907b1162e3aa6c776e8b5495c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1ee9d9122801eb688783acd07791f2906b87cb4f) | |
| parent | [8621725afb38e111969c64280b71480afde2aace](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8621725afb38e111969c64280b71480afde2aace) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1ee9d9122801eb688783acd07791f2906b87cb4f&id2=8621725afb38e111969c64280b71480afde2aace)) | |
| download | [linux-1ee9d9122801eb688783acd07791f2906b87cb4f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1ee9d9122801eb688783acd07791f2906b87cb4f.tar.gz) | |

media: uvcvideo: Skip parsing frames of type UVC\_VS\_UNDEFINED in uvc\_parse\_formatcommit ecf2b43018da9579842c774b7f35dbe11b5c38dd upstream.
This can lead to out of bounds writes since frames of this type were not
taken into account when calculating the size of the frames buffer in
uvc\_parse\_streaming.
Fixes: c0efd232929c ("V4L/DVB (8145a): USB Video Class driver")
Signed-off-by: Benoit Sevens <bsevens@google.com>
Cc: stable@vger.kernel.org
Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Reviewed-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1ee9d9122801eb688783acd07791f2906b87cb4f)

| -rw-r--r-- | [drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/uvc/uvc_driver.c?id=1ee9d9122801eb688783acd07791f2906b87cb4f) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/media/usb/uvc/uvc\_driver.c b/drivers/media/usb/uvc/uvc\_driver.cindex 0fac689c6350b2..13db0026dc1aad 100644--- a/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=8621725afb38e111969c64280b71480afde2aace)+++ b/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=1ee9d9122801eb688783acd07791f2906b87cb4f)@@ -371,7 +371,7 @@ static int uvc\_parse\_format(struct uvc\_device \*dev, \* Parse the frame descriptors. Only uncompressed, MJPEG and frame \* based formats have frame descriptors. \*/- while (buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE &&+ while (ftype && buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE && buffer[2] == ftype) { unsigned int maxIntervalIndex; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 08:00:31 +0000



=== Content from git.kernel.org_485b531e_20250115_080153.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=467d84dc78c9abf6b217ada22b3fdba336262e29)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=467d84dc78c9abf6b217ada22b3fdba336262e29)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=467d84dc78c9abf6b217ada22b3fdba336262e29)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=467d84dc78c9abf6b217ada22b3fdba336262e29)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benoit Sevens <bsevens@google.com> | 2024-11-07 14:22:02 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:13:40 +0100 |
| commit | [467d84dc78c9abf6b217ada22b3fdba336262e29](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=467d84dc78c9abf6b217ada22b3fdba336262e29) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=467d84dc78c9abf6b217ada22b3fdba336262e29)) | |
| tree | [1ec8cc7a3cdca46036721c4c029df0e2c0ace402](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=467d84dc78c9abf6b217ada22b3fdba336262e29) | |
| parent | [e3915f028b1f1c37e87542e5aadd33728c259d96](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e3915f028b1f1c37e87542e5aadd33728c259d96) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=467d84dc78c9abf6b217ada22b3fdba336262e29&id2=e3915f028b1f1c37e87542e5aadd33728c259d96)) | |
| download | [linux-467d84dc78c9abf6b217ada22b3fdba336262e29.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-467d84dc78c9abf6b217ada22b3fdba336262e29.tar.gz) | |

media: uvcvideo: Skip parsing frames of type UVC\_VS\_UNDEFINED in uvc\_parse\_formatcommit ecf2b43018da9579842c774b7f35dbe11b5c38dd upstream.
This can lead to out of bounds writes since frames of this type were not
taken into account when calculating the size of the frames buffer in
uvc\_parse\_streaming.
Fixes: c0efd232929c ("V4L/DVB (8145a): USB Video Class driver")
Signed-off-by: Benoit Sevens <bsevens@google.com>
Cc: stable@vger.kernel.org
Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Reviewed-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=467d84dc78c9abf6b217ada22b3fdba336262e29)

| -rw-r--r-- | [drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/uvc/uvc_driver.c?id=467d84dc78c9abf6b217ada22b3fdba336262e29) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/media/usb/uvc/uvc\_driver.c b/drivers/media/usb/uvc/uvc\_driver.cindex ef5788899503cd..73a2d960d68901 100644--- a/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=e3915f028b1f1c37e87542e5aadd33728c259d96)+++ b/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=467d84dc78c9abf6b217ada22b3fdba336262e29)@@ -645,7 +645,7 @@ static int uvc\_parse\_format(struct uvc\_device \*dev, /\* Parse the frame descriptors. Only uncompressed, MJPEG and frame \* based formats have frame descriptors. \*/- while (buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE &&+ while (ftype && buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE && buffer[2] == ftype) { frame = &format->frame[format->nframes]; if (ftype != UVC\_VS\_FRAME\_FRAME\_BASED) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 08:00:31 +0000



=== Content from git.kernel.org_aaef5e59_20250115_080156.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benoit Sevens <bsevens@google.com> | 2024-11-07 14:22:02 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:58:07 +0100 |
| commit | [95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8)) | |
| tree | [074f0572d98104f58b5fa46e048449c422e540ec](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8) | |
| parent | [3e01fc3c66e65d9afe98f1489047a1b2dd8741ca](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3e01fc3c66e65d9afe98f1489047a1b2dd8741ca) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8&id2=3e01fc3c66e65d9afe98f1489047a1b2dd8741ca)) | |
| download | [linux-95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8.tar.gz) | |

media: uvcvideo: Skip parsing frames of type UVC\_VS\_UNDEFINED in uvc\_parse\_formatcommit ecf2b43018da9579842c774b7f35dbe11b5c38dd upstream.
This can lead to out of bounds writes since frames of this type were not
taken into account when calculating the size of the frames buffer in
uvc\_parse\_streaming.
Fixes: c0efd232929c ("V4L/DVB (8145a): USB Video Class driver")
Signed-off-by: Benoit Sevens <bsevens@google.com>
Cc: stable@vger.kernel.org
Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Reviewed-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8)

| -rw-r--r-- | [drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/uvc/uvc_driver.c?id=95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/media/usb/uvc/uvc\_driver.c b/drivers/media/usb/uvc/uvc\_driver.cindex 6367ee9c006699..cbad244a307d2b 100644--- a/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=3e01fc3c66e65d9afe98f1489047a1b2dd8741ca)+++ b/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=95edf13a48e75dc2cc5b0bc57bf90d6948a22fe8)@@ -575,7 +575,7 @@ static int uvc\_parse\_format(struct uvc\_device \*dev, /\* Parse the frame descriptors. Only uncompressed, MJPEG and frame \* based formats have frame descriptors. \*/- while (buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE &&+ while (ftype && buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE && buffer[2] == ftype) { frame = &format->frame[format->nframes]; if (ftype != UVC\_VS\_FRAME\_FRAME\_BASED) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 08:00:33 +0000



=== Content from git.kernel.org_9e1d9d85_20250115_080156.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ecf2b43018da9579842c774b7f35dbe11b5c38dd)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ecf2b43018da9579842c774b7f35dbe11b5c38dd)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ecf2b43018da9579842c774b7f35dbe11b5c38dd)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ecf2b43018da9579842c774b7f35dbe11b5c38dd)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benoit Sevens <bsevens@google.com> | 2024-11-07 14:22:02 +0000 |
| --- | --- | --- |
| committer | Hans Verkuil <hverkuil@xs4all.nl> | 2024-11-09 13:17:42 +0100 |
| commit | [ecf2b43018da9579842c774b7f35dbe11b5c38dd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ecf2b43018da9579842c774b7f35dbe11b5c38dd) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ecf2b43018da9579842c774b7f35dbe11b5c38dd)) | |
| tree | [5ef530c44d6791131c1b99c7588e227acdda41cc](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ecf2b43018da9579842c774b7f35dbe11b5c38dd) | |
| parent | [702a47ce6dde72f6e247b3c3c00a0fc521f9b1c6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=702a47ce6dde72f6e247b3c3c00a0fc521f9b1c6) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ecf2b43018da9579842c774b7f35dbe11b5c38dd&id2=702a47ce6dde72f6e247b3c3c00a0fc521f9b1c6)) | |
| download | [linux-ecf2b43018da9579842c774b7f35dbe11b5c38dd.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ecf2b43018da9579842c774b7f35dbe11b5c38dd.tar.gz) | |

media: uvcvideo: Skip parsing frames of type UVC\_VS\_UNDEFINED in uvc\_parse\_formatThis can lead to out of bounds writes since frames of this type were not
taken into account when calculating the size of the frames buffer in
uvc\_parse\_streaming.
Fixes: c0efd232929c ("V4L/DVB (8145a): USB Video Class driver")
Signed-off-by: Benoit Sevens <bsevens@google.com>
Cc: stable@vger.kernel.org
Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Reviewed-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ecf2b43018da9579842c774b7f35dbe11b5c38dd)

| -rw-r--r-- | [drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/uvc/uvc_driver.c?id=ecf2b43018da9579842c774b7f35dbe11b5c38dd) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/media/usb/uvc/uvc\_driver.c b/drivers/media/usb/uvc/uvc\_driver.cindex f0febdc08c2d65..2bba7123ea5e98 100644--- a/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=702a47ce6dde72f6e247b3c3c00a0fc521f9b1c6)+++ b/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=ecf2b43018da9579842c774b7f35dbe11b5c38dd)@@ -371,7 +371,7 @@ static int uvc\_parse\_format(struct uvc\_device \*dev, \* Parse the frame descriptors. Only uncompressed, MJPEG and frame \* based formats have frame descriptors. \*/- while (buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE &&+ while (ftype && buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE && buffer[2] == ftype) { unsigned int maxIntervalIndex; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 08:00:34 +0000



=== Content from git.kernel.org_b43a1885_20250115_080154.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=575a562f7a3ec2d54ff77ab6810e3fbceef2a91d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=575a562f7a3ec2d54ff77ab6810e3fbceef2a91d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=575a562f7a3ec2d54ff77ab6810e3fbceef2a91d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=575a562f7a3ec2d54ff77ab6810e3fbceef2a91d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benoit Sevens <bsevens@google.com> | 2024-11-07 14:22:02 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:19:39 +0100 |
| commit | [575a562f7a3ec2d54ff77ab6810e3fbceef2a91d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=575a562f7a3ec2d54ff77ab6810e3fbceef2a91d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=575a562f7a3ec2d54ff77ab6810e3fbceef2a91d)) | |
| tree | [44883ac6decb614be43b5fc7b847c265b9bddd1d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=575a562f7a3ec2d54ff77ab6810e3fbceef2a91d) | |
| parent | [0186347f1605d2456e361974d9dcce4ba5a624d1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0186347f1605d2456e361974d9dcce4ba5a624d1) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=575a562f7a3ec2d54ff77ab6810e3fbceef2a91d&id2=0186347f1605d2456e361974d9dcce4ba5a624d1)) | |
| download | [linux-575a562f7a3ec2d54ff77ab6810e3fbceef2a91d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-575a562f7a3ec2d54ff77ab6810e3fbceef2a91d.tar.gz) | |

media: uvcvideo: Skip parsing frames of type UVC\_VS\_UNDEFINED in uvc\_parse\_formatcommit ecf2b43018da9579842c774b7f35dbe11b5c38dd upstream.
This can lead to out of bounds writes since frames of this type were not
taken into account when calculating the size of the frames buffer in
uvc\_parse\_streaming.
Fixes: c0efd232929c ("V4L/DVB (8145a): USB Video Class driver")
Signed-off-by: Benoit Sevens <bsevens@google.com>
Cc: stable@vger.kernel.org
Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Reviewed-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=575a562f7a3ec2d54ff77ab6810e3fbceef2a91d)

| -rw-r--r-- | [drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/uvc/uvc_driver.c?id=575a562f7a3ec2d54ff77ab6810e3fbceef2a91d) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/media/usb/uvc/uvc\_driver.c b/drivers/media/usb/uvc/uvc\_driver.cindex 04e7f58553db1d..37d75bc97fd8dc 100644--- a/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=0186347f1605d2456e361974d9dcce4ba5a624d1)+++ b/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=575a562f7a3ec2d54ff77ab6810e3fbceef2a91d)@@ -371,7 +371,7 @@ static int uvc\_parse\_format(struct uvc\_device \*dev, \* Parse the frame descriptors. Only uncompressed, MJPEG and frame \* based formats have frame descriptors. \*/- while (buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE &&+ while (ftype && buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE && buffer[2] == ftype) { unsigned int maxIntervalIndex; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 08:00:31 +0000



=== Content from git.kernel.org_2417e2c2_20250115_080156.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=beced2cb09b58c1243733f374c560a55382003d6)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=beced2cb09b58c1243733f374c560a55382003d6)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=beced2cb09b58c1243733f374c560a55382003d6)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=beced2cb09b58c1243733f374c560a55382003d6)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benoit Sevens <bsevens@google.com> | 2024-11-07 14:22:02 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:15:17 +0100 |
| commit | [beced2cb09b58c1243733f374c560a55382003d6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=beced2cb09b58c1243733f374c560a55382003d6) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=beced2cb09b58c1243733f374c560a55382003d6)) | |
| tree | [038e3d60099530a132317c1bb96cd9feb8690b06](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=beced2cb09b58c1243733f374c560a55382003d6) | |
| parent | [c8ec4e437aaa4b9856162ae64dd60f06988393d2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c8ec4e437aaa4b9856162ae64dd60f06988393d2) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=beced2cb09b58c1243733f374c560a55382003d6&id2=c8ec4e437aaa4b9856162ae64dd60f06988393d2)) | |
| download | [linux-beced2cb09b58c1243733f374c560a55382003d6.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-beced2cb09b58c1243733f374c560a55382003d6.tar.gz) | |

media: uvcvideo: Skip parsing frames of type UVC\_VS\_UNDEFINED in uvc\_parse\_formatcommit ecf2b43018da9579842c774b7f35dbe11b5c38dd upstream.
This can lead to out of bounds writes since frames of this type were not
taken into account when calculating the size of the frames buffer in
uvc\_parse\_streaming.
Fixes: c0efd232929c ("V4L/DVB (8145a): USB Video Class driver")
Signed-off-by: Benoit Sevens <bsevens@google.com>
Cc: stable@vger.kernel.org
Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Reviewed-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=beced2cb09b58c1243733f374c560a55382003d6)

| -rw-r--r-- | [drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/uvc/uvc_driver.c?id=beced2cb09b58c1243733f374c560a55382003d6) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/media/usb/uvc/uvc\_driver.c b/drivers/media/usb/uvc/uvc\_driver.cindex 004511d918c645..9b87a13a92fe49 100644--- a/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=c8ec4e437aaa4b9856162ae64dd60f06988393d2)+++ b/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=beced2cb09b58c1243733f374c560a55382003d6)@@ -368,7 +368,7 @@ static int uvc\_parse\_format(struct uvc\_device \*dev, \* Parse the frame descriptors. Only uncompressed, MJPEG and frame \* based formats have frame descriptors. \*/- while (buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE &&+ while (ftype && buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE && buffer[2] == ftype) { frame = &format->frame[format->nframes]; if (ftype != UVC\_VS\_FRAME\_FRAME\_BASED) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 08:00:34 +0000



=== Content from git.kernel.org_745af984_20250115_080155.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=684022f81f128338fe3587ec967459669a1204ae)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=684022f81f128338fe3587ec967459669a1204ae)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=684022f81f128338fe3587ec967459669a1204ae)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=684022f81f128338fe3587ec967459669a1204ae)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benoit Sevens <bsevens@google.com> | 2024-11-07 14:22:02 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:58:52 +0100 |
| commit | [684022f81f128338fe3587ec967459669a1204ae](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=684022f81f128338fe3587ec967459669a1204ae) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=684022f81f128338fe3587ec967459669a1204ae)) | |
| tree | [ce473dfb58dc8879dc7cd315741667c73a764ec9](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=684022f81f128338fe3587ec967459669a1204ae) | |
| parent | [b2b7c43cd32080221bb233741bd6011983fe7c11](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b2b7c43cd32080221bb233741bd6011983fe7c11) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=684022f81f128338fe3587ec967459669a1204ae&id2=b2b7c43cd32080221bb233741bd6011983fe7c11)) | |
| download | [linux-684022f81f128338fe3587ec967459669a1204ae.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-684022f81f128338fe3587ec967459669a1204ae.tar.gz) | |

media: uvcvideo: Skip parsing frames of type UVC\_VS\_UNDEFINED in uvc\_parse\_formatcommit ecf2b43018da9579842c774b7f35dbe11b5c38dd upstream.
This can lead to out of bounds writes since frames of this type were not
taken into account when calculating the size of the frames buffer in
uvc\_parse\_streaming.
Fixes: c0efd232929c ("V4L/DVB (8145a): USB Video Class driver")
Signed-off-by: Benoit Sevens <bsevens@google.com>
Cc: stable@vger.kernel.org
Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Reviewed-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=684022f81f128338fe3587ec967459669a1204ae)

| -rw-r--r-- | [drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/uvc/uvc_driver.c?id=684022f81f128338fe3587ec967459669a1204ae) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/media/usb/uvc/uvc\_driver.c b/drivers/media/usb/uvc/uvc\_driver.cindex 6d1a7e02da51f8..2f913ea44b281a 100644--- a/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=b2b7c43cd32080221bb233741bd6011983fe7c11)+++ b/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=684022f81f128338fe3587ec967459669a1204ae)@@ -602,7 +602,7 @@ static int uvc\_parse\_format(struct uvc\_device \*dev, /\* Parse the frame descriptors. Only uncompressed, MJPEG and frame \* based formats have frame descriptors. \*/- while (buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE &&+ while (ftype && buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE && buffer[2] == ftype) { frame = &format->frame[format->nframes]; if (ftype != UVC\_VS\_FRAME\_FRAME\_BASED) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 08:00:32 +0000



=== Content from git.kernel.org_1dc2df26_20250115_080154.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=622ad10aae5f5e03b7927ea95f7f32812f692bb5)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=622ad10aae5f5e03b7927ea95f7f32812f692bb5)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=622ad10aae5f5e03b7927ea95f7f32812f692bb5)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=622ad10aae5f5e03b7927ea95f7f32812f692bb5)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Benoit Sevens <bsevens@google.com> | 2024-11-07 14:22:02 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:21:11 +0100 |
| commit | [622ad10aae5f5e03b7927ea95f7f32812f692bb5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=622ad10aae5f5e03b7927ea95f7f32812f692bb5) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=622ad10aae5f5e03b7927ea95f7f32812f692bb5)) | |
| tree | [39da32d0252536d439c866eb93dfd4dc671a6bb2](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=622ad10aae5f5e03b7927ea95f7f32812f692bb5) | |
| parent | [4cdb6ce0fc9402467c45b4be25a5ff883d027836](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4cdb6ce0fc9402467c45b4be25a5ff883d027836) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=622ad10aae5f5e03b7927ea95f7f32812f692bb5&id2=4cdb6ce0fc9402467c45b4be25a5ff883d027836)) | |
| download | [linux-622ad10aae5f5e03b7927ea95f7f32812f692bb5.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-622ad10aae5f5e03b7927ea95f7f32812f692bb5.tar.gz) | |

media: uvcvideo: Skip parsing frames of type UVC\_VS\_UNDEFINED in uvc\_parse\_formatcommit ecf2b43018da9579842c774b7f35dbe11b5c38dd upstream.
This can lead to out of bounds writes since frames of this type were not
taken into account when calculating the size of the frames buffer in
uvc\_parse\_streaming.
Fixes: c0efd232929c ("V4L/DVB (8145a): USB Video Class driver")
Signed-off-by: Benoit Sevens <bsevens@google.com>
Cc: stable@vger.kernel.org
Acked-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Reviewed-by: Laurent Pinchart <laurent.pinchart@ideasonboard.com>
Signed-off-by: Hans Verkuil <hverkuil@xs4all.nl>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=622ad10aae5f5e03b7927ea95f7f32812f692bb5)

| -rw-r--r-- | [drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/media/usb/uvc/uvc_driver.c?id=622ad10aae5f5e03b7927ea95f7f32812f692bb5) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/media/usb/uvc/uvc\_driver.c b/drivers/media/usb/uvc/uvc\_driver.cindex f0febdc08c2d65..2bba7123ea5e98 100644--- a/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=4cdb6ce0fc9402467c45b4be25a5ff883d027836)+++ b/[drivers/media/usb/uvc/uvc\_driver.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/media/usb/uvc/uvc_driver.c?id=622ad10aae5f5e03b7927ea95f7f32812f692bb5)@@ -371,7 +371,7 @@ static int uvc\_parse\_format(struct uvc\_device \*dev, \* Parse the frame descriptors. Only uncompressed, MJPEG and frame \* based formats have frame descriptors. \*/- while (buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE &&+ while (ftype && buflen > 2 && buffer[1] == USB\_DT\_CS\_INTERFACE && buffer[2] == ftype) { unsigned int maxIntervalIndex; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 08:00:32 +0000


