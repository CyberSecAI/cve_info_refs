=== Content from git.kernel.org_e2429a61_20250115_102659.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b9d9881237afeb52eddd70077b7174bf17e2fa30)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b9d9881237afeb52eddd70077b7174bf17e2fa30)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b9d9881237afeb52eddd70077b7174bf17e2fa30)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b9d9881237afeb52eddd70077b7174bf17e2fa30)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Antonio Quartulli <antonio@mandelbit.com> | 2024-10-31 16:28:48 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:21:07 +0100 |
| commit | [b9d9881237afeb52eddd70077b7174bf17e2fa30](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b9d9881237afeb52eddd70077b7174bf17e2fa30) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b9d9881237afeb52eddd70077b7174bf17e2fa30)) | |
| tree | [986b89750bd235850c3ae5b77174bd16fdaeb85d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b9d9881237afeb52eddd70077b7174bf17e2fa30) | |
| parent | [9067f1e67584d9a93ca0892209ed90b7e83ce0bd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9067f1e67584d9a93ca0892209ed90b7e83ce0bd) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b9d9881237afeb52eddd70077b7174bf17e2fa30&id2=9067f1e67584d9a93ca0892209ed90b7e83ce0bd)) | |
| download | [linux-b9d9881237afeb52eddd70077b7174bf17e2fa30.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b9d9881237afeb52eddd70077b7174bf17e2fa30.tar.gz) | |

drm/amdgpu: prevent NULL pointer dereference if ATIF is not supportedcommit a6dd15981c03f2cdc9a351a278f09b5479d53d2e upstream.
acpi\_evaluate\_object() may return AE\_NOT\_FOUND (failure), which
would result in dereferencing buffer.pointer (obj) while being NULL.
Although this case may be unrealistic for the current code, it is
still better to protect against possible bugs.
Bail out also when status is AE\_NOT\_FOUND.
This fixes 1 FORWARD\_NULL issue reported by Coverity
Report: CID 1600951: Null pointer dereferences (FORWARD\_NULL)
Signed-off-by: Antonio Quartulli <antonio@mandelbit.com>
Fixes: c9b7c809b89f ("drm/amd: Guard against bad data for ATIF ACPI method")
Reviewed-by: Mario Limonciello <mario.limonciello@amd.com>
Link: [https://lore.kernel.org/r/20241031152848.4716-1-antonio@mandelbit.com](https://lore.kernel.org/r/20241031152848.4716-1-antonio%40mandelbit.com)
Signed-off-by: Mario Limonciello <mario.limonciello@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit 91c9e221fe2553edf2db71627d8453f083de87a1)
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b9d9881237afeb52eddd70077b7174bf17e2fa30)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=b9d9881237afeb52eddd70077b7174bf17e2fa30) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.cindex 1f5a296f5ed2f4..7dd55ed57c1d97 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=9067f1e67584d9a93ca0892209ed90b7e83ce0bd)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=b9d9881237afeb52eddd70077b7174bf17e2fa30)@@ -172,8 +172,8 @@ static union acpi\_object \*amdgpu\_atif\_call(struct amdgpu\_atif \*atif, &buffer); obj = (union acpi\_object \*)buffer.pointer; - /\* Fail if calling the method fails and ATIF is supported \*/- if (ACPI\_FAILURE(status) && status != AE\_NOT\_FOUND) {+ /\* Fail if calling the method fails \*/+ if (ACPI\_FAILURE(status)) { DRM\_DEBUG\_DRIVER("failed to evaluate ATIF got %s\n", acpi\_format\_exception(status)); kfree(obj); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 10:25:35 +0000



=== Content from git.kernel.org_ca97020d_20250115_102655.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2ac7f253deada4d449559b65a1c1cd0a6f6f19b7)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2ac7f253deada4d449559b65a1c1cd0a6f6f19b7)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2ac7f253deada4d449559b65a1c1cd0a6f6f19b7)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2ac7f253deada4d449559b65a1c1cd0a6f6f19b7)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Antonio Quartulli <antonio@mandelbit.com> | 2024-10-31 16:28:48 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:59:36 +0100 |
| commit | [2ac7f253deada4d449559b65a1c1cd0a6f6f19b7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2ac7f253deada4d449559b65a1c1cd0a6f6f19b7) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2ac7f253deada4d449559b65a1c1cd0a6f6f19b7)) | |
| tree | [31b7cc75d715f7048fd0b3171a5bbf526d1d8838](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2ac7f253deada4d449559b65a1c1cd0a6f6f19b7) | |
| parent | [17f5f18085acb5e9d8d13d84a4e12bb3aff2bd64](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=17f5f18085acb5e9d8d13d84a4e12bb3aff2bd64) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2ac7f253deada4d449559b65a1c1cd0a6f6f19b7&id2=17f5f18085acb5e9d8d13d84a4e12bb3aff2bd64)) | |
| download | [linux-2ac7f253deada4d449559b65a1c1cd0a6f6f19b7.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2ac7f253deada4d449559b65a1c1cd0a6f6f19b7.tar.gz) | |

drm/amdgpu: prevent NULL pointer dereference if ATIF is not supportedcommit a6dd15981c03f2cdc9a351a278f09b5479d53d2e upstream.
acpi\_evaluate\_object() may return AE\_NOT\_FOUND (failure), which
would result in dereferencing buffer.pointer (obj) while being NULL.
Although this case may be unrealistic for the current code, it is
still better to protect against possible bugs.
Bail out also when status is AE\_NOT\_FOUND.
This fixes 1 FORWARD\_NULL issue reported by Coverity
Report: CID 1600951: Null pointer dereferences (FORWARD\_NULL)
Signed-off-by: Antonio Quartulli <antonio@mandelbit.com>
Fixes: c9b7c809b89f ("drm/amd: Guard against bad data for ATIF ACPI method")
Reviewed-by: Mario Limonciello <mario.limonciello@amd.com>
Link: [https://lore.kernel.org/r/20241031152848.4716-1-antonio@mandelbit.com](https://lore.kernel.org/r/20241031152848.4716-1-antonio%40mandelbit.com)
Signed-off-by: Mario Limonciello <mario.limonciello@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit 91c9e221fe2553edf2db71627d8453f083de87a1)
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2ac7f253deada4d449559b65a1c1cd0a6f6f19b7)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=2ac7f253deada4d449559b65a1c1cd0a6f6f19b7) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.cindex 77886e79d75db1..0a9f00a3e2ebbd 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=17f5f18085acb5e9d8d13d84a4e12bb3aff2bd64)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=2ac7f253deada4d449559b65a1c1cd0a6f6f19b7)@@ -112,8 +112,8 @@ static union acpi\_object \*amdgpu\_atif\_call(struct amdgpu\_atif \*atif, &buffer); obj = (union acpi\_object \*)buffer.pointer; - /\* Fail if calling the method fails and ATIF is supported \*/- if (ACPI\_FAILURE(status) && status != AE\_NOT\_FOUND) {+ /\* Fail if calling the method fails \*/+ if (ACPI\_FAILURE(status)) { DRM\_DEBUG\_DRIVER("failed to evaluate ATIF got %s\n", acpi\_format\_exception(status)); kfree(obj); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 10:25:32 +0000



=== Content from git.kernel.org_a122ef2f_20250115_102653.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1a9f55ed5b512f510ccd21ad527d532e60550e80)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1a9f55ed5b512f510ccd21ad527d532e60550e80)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1a9f55ed5b512f510ccd21ad527d532e60550e80)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1a9f55ed5b512f510ccd21ad527d532e60550e80)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Antonio Quartulli <antonio@mandelbit.com> | 2024-10-31 16:28:48 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:15:15 +0100 |
| commit | [1a9f55ed5b512f510ccd21ad527d532e60550e80](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1a9f55ed5b512f510ccd21ad527d532e60550e80) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1a9f55ed5b512f510ccd21ad527d532e60550e80)) | |
| tree | [29421b0aeabf4bc9f2178c0124918bccac8c6fdd](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1a9f55ed5b512f510ccd21ad527d532e60550e80) | |
| parent | [25d7e84343e1235b667cf5226c3934fdf36f0df6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=25d7e84343e1235b667cf5226c3934fdf36f0df6) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1a9f55ed5b512f510ccd21ad527d532e60550e80&id2=25d7e84343e1235b667cf5226c3934fdf36f0df6)) | |
| download | [linux-1a9f55ed5b512f510ccd21ad527d532e60550e80.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1a9f55ed5b512f510ccd21ad527d532e60550e80.tar.gz) | |

drm/amdgpu: prevent NULL pointer dereference if ATIF is not supportedcommit a6dd15981c03f2cdc9a351a278f09b5479d53d2e upstream.
acpi\_evaluate\_object() may return AE\_NOT\_FOUND (failure), which
would result in dereferencing buffer.pointer (obj) while being NULL.
Although this case may be unrealistic for the current code, it is
still better to protect against possible bugs.
Bail out also when status is AE\_NOT\_FOUND.
This fixes 1 FORWARD\_NULL issue reported by Coverity
Report: CID 1600951: Null pointer dereferences (FORWARD\_NULL)
Signed-off-by: Antonio Quartulli <antonio@mandelbit.com>
Fixes: c9b7c809b89f ("drm/amd: Guard against bad data for ATIF ACPI method")
Reviewed-by: Mario Limonciello <mario.limonciello@amd.com>
Link: [https://lore.kernel.org/r/20241031152848.4716-1-antonio@mandelbit.com](https://lore.kernel.org/r/20241031152848.4716-1-antonio%40mandelbit.com)
Signed-off-by: Mario Limonciello <mario.limonciello@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit 91c9e221fe2553edf2db71627d8453f083de87a1)
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1a9f55ed5b512f510ccd21ad527d532e60550e80)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=1a9f55ed5b512f510ccd21ad527d532e60550e80) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.cindex d967fba2e85ec4..7ad7ebaaa93cdd 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=25d7e84343e1235b667cf5226c3934fdf36f0df6)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=1a9f55ed5b512f510ccd21ad527d532e60550e80)@@ -132,8 +132,8 @@ static union acpi\_object \*amdgpu\_atif\_call(struct amdgpu\_atif \*atif, &buffer); obj = (union acpi\_object \*)buffer.pointer; - /\* Fail if calling the method fails and ATIF is supported \*/- if (ACPI\_FAILURE(status) && status != AE\_NOT\_FOUND) {+ /\* Fail if calling the method fails \*/+ if (ACPI\_FAILURE(status)) { DRM\_DEBUG\_DRIVER("failed to evaluate ATIF got %s\n", acpi\_format\_exception(status)); kfree(obj); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 10:25:30 +0000



=== Content from git.kernel.org_994407a6_20250115_102700.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ce8a00a00e36f61f5a1e47734332420b68784c43)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ce8a00a00e36f61f5a1e47734332420b68784c43)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ce8a00a00e36f61f5a1e47734332420b68784c43)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ce8a00a00e36f61f5a1e47734332420b68784c43)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Antonio Quartulli <antonio@mandelbit.com> | 2024-10-31 16:28:48 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:58:06 +0100 |
| commit | [ce8a00a00e36f61f5a1e47734332420b68784c43](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ce8a00a00e36f61f5a1e47734332420b68784c43) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ce8a00a00e36f61f5a1e47734332420b68784c43)) | |
| tree | [21a89730f06fef459ea3752f8adc69a8502a3add](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ce8a00a00e36f61f5a1e47734332420b68784c43) | |
| parent | [673bdb4200c092692f83b5f7ba3df57021d52d29](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=673bdb4200c092692f83b5f7ba3df57021d52d29) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ce8a00a00e36f61f5a1e47734332420b68784c43&id2=673bdb4200c092692f83b5f7ba3df57021d52d29)) | |
| download | [linux-ce8a00a00e36f61f5a1e47734332420b68784c43.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ce8a00a00e36f61f5a1e47734332420b68784c43.tar.gz) | |

drm/amdgpu: prevent NULL pointer dereference if ATIF is not supportedcommit a6dd15981c03f2cdc9a351a278f09b5479d53d2e upstream.
acpi\_evaluate\_object() may return AE\_NOT\_FOUND (failure), which
would result in dereferencing buffer.pointer (obj) while being NULL.
Although this case may be unrealistic for the current code, it is
still better to protect against possible bugs.
Bail out also when status is AE\_NOT\_FOUND.
This fixes 1 FORWARD\_NULL issue reported by Coverity
Report: CID 1600951: Null pointer dereferences (FORWARD\_NULL)
Signed-off-by: Antonio Quartulli <antonio@mandelbit.com>
Fixes: c9b7c809b89f ("drm/amd: Guard against bad data for ATIF ACPI method")
Reviewed-by: Mario Limonciello <mario.limonciello@amd.com>
Link: [https://lore.kernel.org/r/20241031152848.4716-1-antonio@mandelbit.com](https://lore.kernel.org/r/20241031152848.4716-1-antonio%40mandelbit.com)
Signed-off-by: Mario Limonciello <mario.limonciello@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit 91c9e221fe2553edf2db71627d8453f083de87a1)
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ce8a00a00e36f61f5a1e47734332420b68784c43)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=ce8a00a00e36f61f5a1e47734332420b68784c43) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.cindex bf8044bf4734b4..cb27016b2a769d 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=673bdb4200c092692f83b5f7ba3df57021d52d29)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=ce8a00a00e36f61f5a1e47734332420b68784c43)@@ -115,8 +115,8 @@ static union acpi\_object \*amdgpu\_atif\_call(struct amdgpu\_atif \*atif, &buffer); obj = (union acpi\_object \*)buffer.pointer; - /\* Fail if calling the method fails and ATIF is supported \*/- if (ACPI\_FAILURE(status) && status != AE\_NOT\_FOUND) {+ /\* Fail if calling the method fails \*/+ if (ACPI\_FAILURE(status)) { DRM\_DEBUG\_DRIVER("failed to evaluate ATIF got %s\n", acpi\_format\_exception(status)); kfree(obj); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 10:25:37 +0000



=== Content from git.kernel.org_64fd5a49_20250115_102655.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8d7a28eca7553d35d4ce192fa1f390f2357df41b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8d7a28eca7553d35d4ce192fa1f390f2357df41b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8d7a28eca7553d35d4ce192fa1f390f2357df41b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8d7a28eca7553d35d4ce192fa1f390f2357df41b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Antonio Quartulli <antonio@mandelbit.com> | 2024-10-31 16:28:48 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-17 14:58:51 +0100 |
| commit | [8d7a28eca7553d35d4ce192fa1f390f2357df41b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8d7a28eca7553d35d4ce192fa1f390f2357df41b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8d7a28eca7553d35d4ce192fa1f390f2357df41b)) | |
| tree | [0852577b0c4ab1b2e219428c6bbfdb980dfc7c98](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8d7a28eca7553d35d4ce192fa1f390f2357df41b) | |
| parent | [7ccd781794d247589104a791caab491e21218fba](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7ccd781794d247589104a791caab491e21218fba) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8d7a28eca7553d35d4ce192fa1f390f2357df41b&id2=7ccd781794d247589104a791caab491e21218fba)) | |
| download | [linux-8d7a28eca7553d35d4ce192fa1f390f2357df41b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8d7a28eca7553d35d4ce192fa1f390f2357df41b.tar.gz) | |

drm/amdgpu: prevent NULL pointer dereference if ATIF is not supportedcommit a6dd15981c03f2cdc9a351a278f09b5479d53d2e upstream.
acpi\_evaluate\_object() may return AE\_NOT\_FOUND (failure), which
would result in dereferencing buffer.pointer (obj) while being NULL.
Although this case may be unrealistic for the current code, it is
still better to protect against possible bugs.
Bail out also when status is AE\_NOT\_FOUND.
This fixes 1 FORWARD\_NULL issue reported by Coverity
Report: CID 1600951: Null pointer dereferences (FORWARD\_NULL)
Signed-off-by: Antonio Quartulli <antonio@mandelbit.com>
Fixes: c9b7c809b89f ("drm/amd: Guard against bad data for ATIF ACPI method")
Reviewed-by: Mario Limonciello <mario.limonciello@amd.com>
Link: [https://lore.kernel.org/r/20241031152848.4716-1-antonio@mandelbit.com](https://lore.kernel.org/r/20241031152848.4716-1-antonio%40mandelbit.com)
Signed-off-by: Mario Limonciello <mario.limonciello@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit 91c9e221fe2553edf2db71627d8453f083de87a1)
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8d7a28eca7553d35d4ce192fa1f390f2357df41b)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=8d7a28eca7553d35d4ce192fa1f390f2357df41b) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.cindex 4597d441198d9a..09965b5fa9cdbb 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=7ccd781794d247589104a791caab491e21218fba)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=8d7a28eca7553d35d4ce192fa1f390f2357df41b)@@ -110,8 +110,8 @@ static union acpi\_object \*amdgpu\_atif\_call(struct amdgpu\_atif \*atif, &buffer); obj = (union acpi\_object \*)buffer.pointer; - /\* Fail if calling the method fails and ATIF is supported \*/- if (ACPI\_FAILURE(status) && status != AE\_NOT\_FOUND) {+ /\* Fail if calling the method fails \*/+ if (ACPI\_FAILURE(status)) { DRM\_DEBUG\_DRIVER("failed to evaluate ATIF got %s\n", acpi\_format\_exception(status)); kfree(obj); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 10:25:33 +0000



=== Content from git.kernel.org_959d7815_20250115_102657.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a6dd15981c03f2cdc9a351a278f09b5479d53d2e)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a6dd15981c03f2cdc9a351a278f09b5479d53d2e)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a6dd15981c03f2cdc9a351a278f09b5479d53d2e)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a6dd15981c03f2cdc9a351a278f09b5479d53d2e)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Antonio Quartulli <antonio@mandelbit.com> | 2024-10-31 16:28:48 +0100 |
| --- | --- | --- |
| committer | Alex Deucher <alexander.deucher@amd.com> | 2024-11-04 12:48:21 -0500 |
| commit | [a6dd15981c03f2cdc9a351a278f09b5479d53d2e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a6dd15981c03f2cdc9a351a278f09b5479d53d2e) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a6dd15981c03f2cdc9a351a278f09b5479d53d2e)) | |
| tree | [bb4448ccb7e3919eda1fa6974a10a6a9712489f6](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a6dd15981c03f2cdc9a351a278f09b5479d53d2e) | |
| parent | [694c79769cb384bca8b1ec1d1e84156e726bd106](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=694c79769cb384bca8b1ec1d1e84156e726bd106) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a6dd15981c03f2cdc9a351a278f09b5479d53d2e&id2=694c79769cb384bca8b1ec1d1e84156e726bd106)) | |
| download | [linux-a6dd15981c03f2cdc9a351a278f09b5479d53d2e.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a6dd15981c03f2cdc9a351a278f09b5479d53d2e.tar.gz) | |

drm/amdgpu: prevent NULL pointer dereference if ATIF is not supportedacpi\_evaluate\_object() may return AE\_NOT\_FOUND (failure), which
would result in dereferencing buffer.pointer (obj) while being NULL.
Although this case may be unrealistic for the current code, it is
still better to protect against possible bugs.
Bail out also when status is AE\_NOT\_FOUND.
This fixes 1 FORWARD\_NULL issue reported by Coverity
Report: CID 1600951: Null pointer dereferences (FORWARD\_NULL)
Signed-off-by: Antonio Quartulli <antonio@mandelbit.com>
Fixes: c9b7c809b89f ("drm/amd: Guard against bad data for ATIF ACPI method")
Reviewed-by: Mario Limonciello <mario.limonciello@amd.com>
Link: [https://lore.kernel.org/r/20241031152848.4716-1-antonio@mandelbit.com](https://lore.kernel.org/r/20241031152848.4716-1-antonio%40mandelbit.com)
Signed-off-by: Mario Limonciello <mario.limonciello@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit 91c9e221fe2553edf2db71627d8453f083de87a1)
Cc: stable@vger.kernel.org
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a6dd15981c03f2cdc9a351a278f09b5479d53d2e)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=a6dd15981c03f2cdc9a351a278f09b5479d53d2e) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.cindex 1f5a296f5ed2f4..7dd55ed57c1d97 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=694c79769cb384bca8b1ec1d1e84156e726bd106)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=a6dd15981c03f2cdc9a351a278f09b5479d53d2e)@@ -172,8 +172,8 @@ static union acpi\_object \*amdgpu\_atif\_call(struct amdgpu\_atif \*atif, &buffer); obj = (union acpi\_object \*)buffer.pointer; - /\* Fail if calling the method fails and ATIF is supported \*/- if (ACPI\_FAILURE(status) && status != AE\_NOT\_FOUND) {+ /\* Fail if calling the method fails \*/+ if (ACPI\_FAILURE(status)) { DRM\_DEBUG\_DRIVER("failed to evaluate ATIF got %s\n", acpi\_format\_exception(status)); kfree(obj); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 10:25:34 +0000



=== Content from git.kernel.org_b9b8e027_20250115_102657.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a613a392417532ca5aaf3deac6e3277aa7aaef2b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a613a392417532ca5aaf3deac6e3277aa7aaef2b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a613a392417532ca5aaf3deac6e3277aa7aaef2b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a613a392417532ca5aaf3deac6e3277aa7aaef2b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Antonio Quartulli <antonio@mandelbit.com> | 2024-10-31 16:28:48 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:19:36 +0100 |
| commit | [a613a392417532ca5aaf3deac6e3277aa7aaef2b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a613a392417532ca5aaf3deac6e3277aa7aaef2b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a613a392417532ca5aaf3deac6e3277aa7aaef2b)) | |
| tree | [f1c77cff51b65105141478fc2ccb49e72c702622](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a613a392417532ca5aaf3deac6e3277aa7aaef2b) | |
| parent | [3930715c1aefe8e5cbca94144081aa08b466d571](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3930715c1aefe8e5cbca94144081aa08b466d571) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a613a392417532ca5aaf3deac6e3277aa7aaef2b&id2=3930715c1aefe8e5cbca94144081aa08b466d571)) | |
| download | [linux-a613a392417532ca5aaf3deac6e3277aa7aaef2b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a613a392417532ca5aaf3deac6e3277aa7aaef2b.tar.gz) | |

drm/amdgpu: prevent NULL pointer dereference if ATIF is not supportedcommit a6dd15981c03f2cdc9a351a278f09b5479d53d2e upstream.
acpi\_evaluate\_object() may return AE\_NOT\_FOUND (failure), which
would result in dereferencing buffer.pointer (obj) while being NULL.
Although this case may be unrealistic for the current code, it is
still better to protect against possible bugs.
Bail out also when status is AE\_NOT\_FOUND.
This fixes 1 FORWARD\_NULL issue reported by Coverity
Report: CID 1600951: Null pointer dereferences (FORWARD\_NULL)
Signed-off-by: Antonio Quartulli <antonio@mandelbit.com>
Fixes: c9b7c809b89f ("drm/amd: Guard against bad data for ATIF ACPI method")
Reviewed-by: Mario Limonciello <mario.limonciello@amd.com>
Link: [https://lore.kernel.org/r/20241031152848.4716-1-antonio@mandelbit.com](https://lore.kernel.org/r/20241031152848.4716-1-antonio%40mandelbit.com)
Signed-off-by: Mario Limonciello <mario.limonciello@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit 91c9e221fe2553edf2db71627d8453f083de87a1)
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a613a392417532ca5aaf3deac6e3277aa7aaef2b)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=a613a392417532ca5aaf3deac6e3277aa7aaef2b) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.cindex fac204d6e0ea2c..12a0ac42fcfea4 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=3930715c1aefe8e5cbca94144081aa08b466d571)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=a613a392417532ca5aaf3deac6e3277aa7aaef2b)@@ -172,8 +172,8 @@ static union acpi\_object \*amdgpu\_atif\_call(struct amdgpu\_atif \*atif, &buffer); obj = (union acpi\_object \*)buffer.pointer; - /\* Fail if calling the method fails and ATIF is supported \*/- if (ACPI\_FAILURE(status) && status != AE\_NOT\_FOUND) {+ /\* Fail if calling the method fails \*/+ if (ACPI\_FAILURE(status)) { DRM\_DEBUG\_DRIVER("failed to evaluate ATIF got %s\n", acpi\_format\_exception(status)); kfree(obj); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 10:25:34 +0000



=== Content from git.kernel.org_73b0b4ee_20250115_102654.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=27fc29b5376998c126c85cf9b15d9dfc2afc9cbe)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=27fc29b5376998c126c85cf9b15d9dfc2afc9cbe)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=27fc29b5376998c126c85cf9b15d9dfc2afc9cbe)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=27fc29b5376998c126c85cf9b15d9dfc2afc9cbe)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Antonio Quartulli <antonio@mandelbit.com> | 2024-10-31 16:28:48 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-14 13:13:38 +0100 |
| commit | [27fc29b5376998c126c85cf9b15d9dfc2afc9cbe](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=27fc29b5376998c126c85cf9b15d9dfc2afc9cbe) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=27fc29b5376998c126c85cf9b15d9dfc2afc9cbe)) | |
| tree | [9ff04eeb5f9f3b430f9548917af2d34b50bba743](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=27fc29b5376998c126c85cf9b15d9dfc2afc9cbe) | |
| parent | [aaf6160a4b7f9ee3cd91aa5b3251f5dbe2170f42](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aaf6160a4b7f9ee3cd91aa5b3251f5dbe2170f42) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=27fc29b5376998c126c85cf9b15d9dfc2afc9cbe&id2=aaf6160a4b7f9ee3cd91aa5b3251f5dbe2170f42)) | |
| download | [linux-27fc29b5376998c126c85cf9b15d9dfc2afc9cbe.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-27fc29b5376998c126c85cf9b15d9dfc2afc9cbe.tar.gz) | |

drm/amdgpu: prevent NULL pointer dereference if ATIF is not supportedcommit a6dd15981c03f2cdc9a351a278f09b5479d53d2e upstream.
acpi\_evaluate\_object() may return AE\_NOT\_FOUND (failure), which
would result in dereferencing buffer.pointer (obj) while being NULL.
Although this case may be unrealistic for the current code, it is
still better to protect against possible bugs.
Bail out also when status is AE\_NOT\_FOUND.
This fixes 1 FORWARD\_NULL issue reported by Coverity
Report: CID 1600951: Null pointer dereferences (FORWARD\_NULL)
Signed-off-by: Antonio Quartulli <antonio@mandelbit.com>
Fixes: c9b7c809b89f ("drm/amd: Guard against bad data for ATIF ACPI method")
Reviewed-by: Mario Limonciello <mario.limonciello@amd.com>
Link: [https://lore.kernel.org/r/20241031152848.4716-1-antonio@mandelbit.com](https://lore.kernel.org/r/20241031152848.4716-1-antonio%40mandelbit.com)
Signed-off-by: Mario Limonciello <mario.limonciello@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
(cherry picked from commit 91c9e221fe2553edf2db71627d8453f083de87a1)
Cc: stable@vger.kernel.org
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=27fc29b5376998c126c85cf9b15d9dfc2afc9cbe)

| -rw-r--r-- | [drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=27fc29b5376998c126c85cf9b15d9dfc2afc9cbe) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c b/drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.cindex 2f250dc861947e..592ca0cfe61d0b 100644--- a/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=aaf6160a4b7f9ee3cd91aa5b3251f5dbe2170f42)+++ b/[drivers/gpu/drm/amd/amdgpu/amdgpu\_acpi.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c?id=27fc29b5376998c126c85cf9b15d9dfc2afc9cbe)@@ -133,8 +133,8 @@ static union acpi\_object \*amdgpu\_atif\_call(struct amdgpu\_atif \*atif, &buffer); obj = (union acpi\_object \*)buffer.pointer; - /\* Fail if calling the method fails and ATIF is supported \*/- if (ACPI\_FAILURE(status) && status != AE\_NOT\_FOUND) {+ /\* Fail if calling the method fails \*/+ if (ACPI\_FAILURE(status)) { DRM\_DEBUG\_DRIVER("failed to evaluate ATIF got %s\n", acpi\_format\_exception(status)); kfree(obj); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-15 10:25:31 +0000


