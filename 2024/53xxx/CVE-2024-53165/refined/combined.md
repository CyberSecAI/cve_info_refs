=== Content from git.kernel.org_c0e7a87e_20250114_232050.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c43df7dae28fb9fce96ef088250c1e3c3a77c527)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c43df7dae28fb9fce96ef088250c1e3c3a77c527)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c43df7dae28fb9fce96ef088250c1e3c3a77c527)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c43df7dae28fb9fce96ef088250c1e3c3a77c527)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-23 11:41:59 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:54:09 +0100 |
| commit | [c43df7dae28fb9fce96ef088250c1e3c3a77c527](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c43df7dae28fb9fce96ef088250c1e3c3a77c527) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c43df7dae28fb9fce96ef088250c1e3c3a77c527)) | |
| tree | [b6fd3108ed30035c0b9f5a92ccc07b7aa2f794bc](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c43df7dae28fb9fce96ef088250c1e3c3a77c527) | |
| parent | [87a95ee34a48dfad198a2002e4966e1d63d53f2b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=87a95ee34a48dfad198a2002e4966e1d63d53f2b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c43df7dae28fb9fce96ef088250c1e3c3a77c527&id2=87a95ee34a48dfad198a2002e4966e1d63d53f2b)) | |
| download | [linux-c43df7dae28fb9fce96ef088250c1e3c3a77c527.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c43df7dae28fb9fce96ef088250c1e3c3a77c527.tar.gz) | |

sh: intc: Fix use-after-free bug in register\_intc\_controller()[ Upstream commit 63e72e551942642c48456a4134975136cdcb9b3c ]
In the error handling for this function, d is freed without ever
removing it from intc\_list which would lead to a use after free.
To fix this, let's only add it to the list after everything has
succeeded.
Fixes: 2dcec7a988a1 ("sh: intc: set\_irq\_wake() support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Reviewed-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c43df7dae28fb9fce96ef088250c1e3c3a77c527)

| -rw-r--r-- | [drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/sh/intc/core.c?id=c43df7dae28fb9fce96ef088250c1e3c3a77c527) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/sh/intc/core.c b/drivers/sh/intc/core.cindex ca4f4ca413f11d..b19388b349be36 100644--- a/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=87a95ee34a48dfad198a2002e4966e1d63d53f2b)+++ b/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=c43df7dae28fb9fce96ef088250c1e3c3a77c527)@@ -209,7 +209,6 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc) goto err0;  INIT\_LIST\_HEAD(&d->list);- list\_add\_tail(&d->list, &intc\_list);  raw\_spin\_lock\_init(&d->lock); INIT\_RADIX\_TREE(&d->tree, GFP\_ATOMIC);@@ -369,6 +368,7 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc)  d->skip\_suspend = desc->skip\_syscore\_suspend; + list\_add\_tail(&d->list, &intc\_list); nr\_intc\_controllers++;  return 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:19:27 +0000



=== Content from git.kernel.org_c8a23756_20250114_232045.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=588bdec1ff8b81517dbae0ae51c9df52c0b952d3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=588bdec1ff8b81517dbae0ae51c9df52c0b952d3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=588bdec1ff8b81517dbae0ae51c9df52c0b952d3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=588bdec1ff8b81517dbae0ae51c9df52c0b952d3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-23 11:41:59 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 14:03:10 +0100 |
| commit | [588bdec1ff8b81517dbae0ae51c9df52c0b952d3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=588bdec1ff8b81517dbae0ae51c9df52c0b952d3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=588bdec1ff8b81517dbae0ae51c9df52c0b952d3)) | |
| tree | [a185ef5624d9cd0e382525e786d1bbd5817524ef](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=588bdec1ff8b81517dbae0ae51c9df52c0b952d3) | |
| parent | [fbc342372adb265c5df83bfab18c927c7584f218](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fbc342372adb265c5df83bfab18c927c7584f218) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=588bdec1ff8b81517dbae0ae51c9df52c0b952d3&id2=fbc342372adb265c5df83bfab18c927c7584f218)) | |
| download | [linux-588bdec1ff8b81517dbae0ae51c9df52c0b952d3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-588bdec1ff8b81517dbae0ae51c9df52c0b952d3.tar.gz) | |

sh: intc: Fix use-after-free bug in register\_intc\_controller()[ Upstream commit 63e72e551942642c48456a4134975136cdcb9b3c ]
In the error handling for this function, d is freed without ever
removing it from intc\_list which would lead to a use after free.
To fix this, let's only add it to the list after everything has
succeeded.
Fixes: 2dcec7a988a1 ("sh: intc: set\_irq\_wake() support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Reviewed-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=588bdec1ff8b81517dbae0ae51c9df52c0b952d3)

| -rw-r--r-- | [drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/sh/intc/core.c?id=588bdec1ff8b81517dbae0ae51c9df52c0b952d3) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/sh/intc/core.c b/drivers/sh/intc/core.cindex 74350b5871dc8e..ea571eeb307878 100644--- a/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=fbc342372adb265c5df83bfab18c927c7584f218)+++ b/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=588bdec1ff8b81517dbae0ae51c9df52c0b952d3)@@ -209,7 +209,6 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc) goto err0;  INIT\_LIST\_HEAD(&d->list);- list\_add\_tail(&d->list, &intc\_list);  raw\_spin\_lock\_init(&d->lock); INIT\_RADIX\_TREE(&d->tree, GFP\_ATOMIC);@@ -369,6 +368,7 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc)  d->skip\_suspend = desc->skip\_syscore\_suspend; + list\_add\_tail(&d->list, &intc\_list); nr\_intc\_controllers++;  return 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:19:22 +0000



=== Content from git.kernel.org_4962101f_20250114_232047.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=63e72e551942642c48456a4134975136cdcb9b3c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=63e72e551942642c48456a4134975136cdcb9b3c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=63e72e551942642c48456a4134975136cdcb9b3c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=63e72e551942642c48456a4134975136cdcb9b3c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-23 11:41:59 +0300 |
| --- | --- | --- |
| committer | John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de> | 2024-11-30 13:55:11 +0100 |
| commit | [63e72e551942642c48456a4134975136cdcb9b3c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=63e72e551942642c48456a4134975136cdcb9b3c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=63e72e551942642c48456a4134975136cdcb9b3c)) | |
| tree | [bde84cadeab0ac4723111d97f684a9d45b2647c0](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=63e72e551942642c48456a4134975136cdcb9b3c) | |
| parent | [3c891f7c6a4e90bb1199497552f24b26e46383bc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3c891f7c6a4e90bb1199497552f24b26e46383bc) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=63e72e551942642c48456a4134975136cdcb9b3c&id2=3c891f7c6a4e90bb1199497552f24b26e46383bc)) | |
| download | [linux-63e72e551942642c48456a4134975136cdcb9b3c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-63e72e551942642c48456a4134975136cdcb9b3c.tar.gz) | |

sh: intc: Fix use-after-free bug in register\_intc\_controller()In the error handling for this function, d is freed without ever
removing it from intc\_list which would lead to a use after free.
To fix this, let's only add it to the list after everything has
succeeded.
Fixes: 2dcec7a988a1 ("sh: intc: set\_irq\_wake() support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Reviewed-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=63e72e551942642c48456a4134975136cdcb9b3c)

| -rw-r--r-- | [drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/sh/intc/core.c?id=63e72e551942642c48456a4134975136cdcb9b3c) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/sh/intc/core.c b/drivers/sh/intc/core.cindex 74350b5871dc8e..ea571eeb307878 100644--- a/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=3c891f7c6a4e90bb1199497552f24b26e46383bc)+++ b/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=63e72e551942642c48456a4134975136cdcb9b3c)@@ -209,7 +209,6 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc) goto err0;  INIT\_LIST\_HEAD(&d->list);- list\_add\_tail(&d->list, &intc\_list);  raw\_spin\_lock\_init(&d->lock); INIT\_RADIX\_TREE(&d->tree, GFP\_ATOMIC);@@ -369,6 +368,7 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc)  d->skip\_suspend = desc->skip\_syscore\_suspend; + list\_add\_tail(&d->list, &intc\_list); nr\_intc\_controllers++;  return 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:19:24 +0000



=== Content from git.kernel.org_f2c494db_20250114_232049.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b8b84dcdf3ab1d414304819f824b10efba64132c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b8b84dcdf3ab1d414304819f824b10efba64132c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b8b84dcdf3ab1d414304819f824b10efba64132c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b8b84dcdf3ab1d414304819f824b10efba64132c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-23 11:41:59 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-09 10:33:00 +0100 |
| commit | [b8b84dcdf3ab1d414304819f824b10efba64132c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b8b84dcdf3ab1d414304819f824b10efba64132c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b8b84dcdf3ab1d414304819f824b10efba64132c)) | |
| tree | [a85b7f06fdfccbf08e49c1baefebebe3bb9604cc](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b8b84dcdf3ab1d414304819f824b10efba64132c) | |
| parent | [906cdbdd3b018ff69cc830173bce277a847d4fdc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=906cdbdd3b018ff69cc830173bce277a847d4fdc) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b8b84dcdf3ab1d414304819f824b10efba64132c&id2=906cdbdd3b018ff69cc830173bce277a847d4fdc)) | |
| download | [linux-b8b84dcdf3ab1d414304819f824b10efba64132c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b8b84dcdf3ab1d414304819f824b10efba64132c.tar.gz) | |

sh: intc: Fix use-after-free bug in register\_intc\_controller()[ Upstream commit 63e72e551942642c48456a4134975136cdcb9b3c ]
In the error handling for this function, d is freed without ever
removing it from intc\_list which would lead to a use after free.
To fix this, let's only add it to the list after everything has
succeeded.
Fixes: 2dcec7a988a1 ("sh: intc: set\_irq\_wake() support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Reviewed-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b8b84dcdf3ab1d414304819f824b10efba64132c)

| -rw-r--r-- | [drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/sh/intc/core.c?id=b8b84dcdf3ab1d414304819f824b10efba64132c) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/sh/intc/core.c b/drivers/sh/intc/core.cindex ca4f4ca413f11d..b19388b349be36 100644--- a/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=906cdbdd3b018ff69cc830173bce277a847d4fdc)+++ b/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=b8b84dcdf3ab1d414304819f824b10efba64132c)@@ -209,7 +209,6 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc) goto err0;  INIT\_LIST\_HEAD(&d->list);- list\_add\_tail(&d->list, &intc\_list);  raw\_spin\_lock\_init(&d->lock); INIT\_RADIX\_TREE(&d->tree, GFP\_ATOMIC);@@ -369,6 +368,7 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc)  d->skip\_suspend = desc->skip\_syscore\_suspend; + list\_add\_tail(&d->list, &intc\_list); nr\_intc\_controllers++;  return 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:19:26 +0000



=== Content from git.kernel.org_83cd7efe_20250114_232044.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=3c7c806b3eafd94ae0f77305a174d63b69ec187c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3c7c806b3eafd94ae0f77305a174d63b69ec187c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3c7c806b3eafd94ae0f77305a174d63b69ec187c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3c7c806b3eafd94ae0f77305a174d63b69ec187c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-23 11:41:59 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 10:59:42 +0100 |
| commit | [3c7c806b3eafd94ae0f77305a174d63b69ec187c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3c7c806b3eafd94ae0f77305a174d63b69ec187c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=3c7c806b3eafd94ae0f77305a174d63b69ec187c)) | |
| tree | [9a3b0ea0bdcae9118be3a044a892a3c8ef77225c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3c7c806b3eafd94ae0f77305a174d63b69ec187c) | |
| parent | [94a6159f610cd97cccc8735e4ddc094f16438a18](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=94a6159f610cd97cccc8735e4ddc094f16438a18) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3c7c806b3eafd94ae0f77305a174d63b69ec187c&id2=94a6159f610cd97cccc8735e4ddc094f16438a18)) | |
| download | [linux-3c7c806b3eafd94ae0f77305a174d63b69ec187c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-3c7c806b3eafd94ae0f77305a174d63b69ec187c.tar.gz) | |

sh: intc: Fix use-after-free bug in register\_intc\_controller()[ Upstream commit 63e72e551942642c48456a4134975136cdcb9b3c ]
In the error handling for this function, d is freed without ever
removing it from intc\_list which would lead to a use after free.
To fix this, let's only add it to the list after everything has
succeeded.
Fixes: 2dcec7a988a1 ("sh: intc: set\_irq\_wake() support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Reviewed-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3c7c806b3eafd94ae0f77305a174d63b69ec187c)

| -rw-r--r-- | [drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/sh/intc/core.c?id=3c7c806b3eafd94ae0f77305a174d63b69ec187c) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/sh/intc/core.c b/drivers/sh/intc/core.cindex 46f0f322d4d8f7..48fe5fab5693d9 100644--- a/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=94a6159f610cd97cccc8735e4ddc094f16438a18)+++ b/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=3c7c806b3eafd94ae0f77305a174d63b69ec187c)@@ -194,7 +194,6 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc) goto err0;  INIT\_LIST\_HEAD(&d->list);- list\_add\_tail(&d->list, &intc\_list);  raw\_spin\_lock\_init(&d->lock); INIT\_RADIX\_TREE(&d->tree, GFP\_ATOMIC);@@ -380,6 +379,7 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc)  d->skip\_suspend = desc->skip\_syscore\_suspend; + list\_add\_tail(&d->list, &intc\_list); nr\_intc\_controllers++;  return 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:19:21 +0000



=== Content from git.kernel.org_dc5d7e34_20250114_232048.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=971b4893457788e0e123ea552f0bb126a5300e61)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=971b4893457788e0e123ea552f0bb126a5300e61)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=971b4893457788e0e123ea552f0bb126a5300e61)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=971b4893457788e0e123ea552f0bb126a5300e61)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-23 11:41:59 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:48:16 +0100 |
| commit | [971b4893457788e0e123ea552f0bb126a5300e61](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=971b4893457788e0e123ea552f0bb126a5300e61) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=971b4893457788e0e123ea552f0bb126a5300e61)) | |
| tree | [4baf91ca0d0b05a147a37d0fe2de24c240f9be7b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=971b4893457788e0e123ea552f0bb126a5300e61) | |
| parent | [86a1f9fa24804cd7f9d7dd3f24af84fc7f8ec02e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=86a1f9fa24804cd7f9d7dd3f24af84fc7f8ec02e) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=971b4893457788e0e123ea552f0bb126a5300e61&id2=86a1f9fa24804cd7f9d7dd3f24af84fc7f8ec02e)) | |
| download | [linux-971b4893457788e0e123ea552f0bb126a5300e61.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-971b4893457788e0e123ea552f0bb126a5300e61.tar.gz) | |

sh: intc: Fix use-after-free bug in register\_intc\_controller()[ Upstream commit 63e72e551942642c48456a4134975136cdcb9b3c ]
In the error handling for this function, d is freed without ever
removing it from intc\_list which would lead to a use after free.
To fix this, let's only add it to the list after everything has
succeeded.
Fixes: 2dcec7a988a1 ("sh: intc: set\_irq\_wake() support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Reviewed-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=971b4893457788e0e123ea552f0bb126a5300e61)

| -rw-r--r-- | [drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/sh/intc/core.c?id=971b4893457788e0e123ea552f0bb126a5300e61) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/sh/intc/core.c b/drivers/sh/intc/core.cindex f8e070d67fa326..51586c5e993bb4 100644--- a/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=86a1f9fa24804cd7f9d7dd3f24af84fc7f8ec02e)+++ b/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=971b4893457788e0e123ea552f0bb126a5300e61)@@ -194,7 +194,6 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc) goto err0;  INIT\_LIST\_HEAD(&d->list);- list\_add\_tail(&d->list, &intc\_list);  raw\_spin\_lock\_init(&d->lock); INIT\_RADIX\_TREE(&d->tree, GFP\_ATOMIC);@@ -380,6 +379,7 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc)  d->skip\_suspend = desc->skip\_syscore\_suspend; + list\_add\_tail(&d->list, &intc\_list); nr\_intc\_controllers++;  return 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:19:25 +0000



=== Content from git.kernel.org_5c4e821e_20250114_232051.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-23 11:41:59 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:44:42 +0100 |
| commit | [d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc)) | |
| tree | [bd8a7a4dacf08fdd0ff4f2019f2f25af56451dee](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc) | |
| parent | [cc91d59d34ff6a6fee1c0b48612081a451e05e9a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cc91d59d34ff6a6fee1c0b48612081a451e05e9a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc&id2=cc91d59d34ff6a6fee1c0b48612081a451e05e9a)) | |
| download | [linux-d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc.tar.gz) | |

sh: intc: Fix use-after-free bug in register\_intc\_controller()[ Upstream commit 63e72e551942642c48456a4134975136cdcb9b3c ]
In the error handling for this function, d is freed without ever
removing it from intc\_list which would lead to a use after free.
To fix this, let's only add it to the list after everything has
succeeded.
Fixes: 2dcec7a988a1 ("sh: intc: set\_irq\_wake() support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Reviewed-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc)

| -rw-r--r-- | [drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/sh/intc/core.c?id=d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/sh/intc/core.c b/drivers/sh/intc/core.cindex 46f0f322d4d8f7..48fe5fab5693d9 100644--- a/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=cc91d59d34ff6a6fee1c0b48612081a451e05e9a)+++ b/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=d8de818df12d86a1a26a8efd7b4b3b9c6dc3c5cc)@@ -194,7 +194,6 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc) goto err0;  INIT\_LIST\_HEAD(&d->list);- list\_add\_tail(&d->list, &intc\_list);  raw\_spin\_lock\_init(&d->lock); INIT\_RADIX\_TREE(&d->tree, GFP\_ATOMIC);@@ -380,6 +379,7 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc)  d->skip\_suspend = desc->skip\_syscore\_suspend; + list\_add\_tail(&d->list, &intc\_list); nr\_intc\_controllers++;  return 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:19:28 +0000



=== Content from git.kernel.org_faa460b6_20250114_232047.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=6ba6e19912570b2ad68298be0be1dc779014a303)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6ba6e19912570b2ad68298be0be1dc779014a303)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6ba6e19912570b2ad68298be0be1dc779014a303)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6ba6e19912570b2ad68298be0be1dc779014a303)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-23 11:41:59 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-05 13:54:33 +0100 |
| commit | [6ba6e19912570b2ad68298be0be1dc779014a303](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6ba6e19912570b2ad68298be0be1dc779014a303) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=6ba6e19912570b2ad68298be0be1dc779014a303)) | |
| tree | [b54f85d22189aaf5f238fa1dc8971cd787725e75](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6ba6e19912570b2ad68298be0be1dc779014a303) | |
| parent | [2d2d392af544cd5b0b46ef022517039e43079445](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2d2d392af544cd5b0b46ef022517039e43079445) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6ba6e19912570b2ad68298be0be1dc779014a303&id2=2d2d392af544cd5b0b46ef022517039e43079445)) | |
| download | [linux-6ba6e19912570b2ad68298be0be1dc779014a303.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-6ba6e19912570b2ad68298be0be1dc779014a303.tar.gz) | |

sh: intc: Fix use-after-free bug in register\_intc\_controller()[ Upstream commit 63e72e551942642c48456a4134975136cdcb9b3c ]
In the error handling for this function, d is freed without ever
removing it from intc\_list which would lead to a use after free.
To fix this, let's only add it to the list after everything has
succeeded.
Fixes: 2dcec7a988a1 ("sh: intc: set\_irq\_wake() support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Reviewed-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6ba6e19912570b2ad68298be0be1dc779014a303)

| -rw-r--r-- | [drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/sh/intc/core.c?id=6ba6e19912570b2ad68298be0be1dc779014a303) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/sh/intc/core.c b/drivers/sh/intc/core.cindex 74350b5871dc8e..ea571eeb307878 100644--- a/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=2d2d392af544cd5b0b46ef022517039e43079445)+++ b/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=6ba6e19912570b2ad68298be0be1dc779014a303)@@ -209,7 +209,6 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc) goto err0;  INIT\_LIST\_HEAD(&d->list);- list\_add\_tail(&d->list, &intc\_list);  raw\_spin\_lock\_init(&d->lock); INIT\_RADIX\_TREE(&d->tree, GFP\_ATOMIC);@@ -369,6 +368,7 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc)  d->skip\_suspend = desc->skip\_syscore\_suspend; + list\_add\_tail(&d->list, &intc\_list); nr\_intc\_controllers++;  return 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:19:24 +0000



=== Content from git.kernel.org_568bf11c_20250114_232049.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c3f4f4547fb291982f5ef56c048277c4d5ccc4e4)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c3f4f4547fb291982f5ef56c048277c4d5ccc4e4)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c3f4f4547fb291982f5ef56c048277c4d5ccc4e4)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c3f4f4547fb291982f5ef56c048277c4d5ccc4e4)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Dan Carpenter <dan.carpenter@linaro.org> | 2024-10-23 11:41:59 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-12-14 19:51:21 +0100 |
| commit | [c3f4f4547fb291982f5ef56c048277c4d5ccc4e4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c3f4f4547fb291982f5ef56c048277c4d5ccc4e4) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c3f4f4547fb291982f5ef56c048277c4d5ccc4e4)) | |
| tree | [cf4c18dc629fdb8b8194d8c7d095ddaf960a666b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c3f4f4547fb291982f5ef56c048277c4d5ccc4e4) | |
| parent | [fe6cbf0b2ac3cf4e21824a44eaa336564ed5e960](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fe6cbf0b2ac3cf4e21824a44eaa336564ed5e960) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c3f4f4547fb291982f5ef56c048277c4d5ccc4e4&id2=fe6cbf0b2ac3cf4e21824a44eaa336564ed5e960)) | |
| download | [linux-c3f4f4547fb291982f5ef56c048277c4d5ccc4e4.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c3f4f4547fb291982f5ef56c048277c4d5ccc4e4.tar.gz) | |

sh: intc: Fix use-after-free bug in register\_intc\_controller()[ Upstream commit 63e72e551942642c48456a4134975136cdcb9b3c ]
In the error handling for this function, d is freed without ever
removing it from intc\_list which would lead to a use after free.
To fix this, let's only add it to the list after everything has
succeeded.
Fixes: 2dcec7a988a1 ("sh: intc: set\_irq\_wake() support")
Signed-off-by: Dan Carpenter <dan.carpenter@linaro.org>
Reviewed-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: John Paul Adrian Glaubitz <glaubitz@physik.fu-berlin.de>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c3f4f4547fb291982f5ef56c048277c4d5ccc4e4)

| -rw-r--r-- | [drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/sh/intc/core.c?id=c3f4f4547fb291982f5ef56c048277c4d5ccc4e4) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/sh/intc/core.c b/drivers/sh/intc/core.cindex ca4f4ca413f11d..b19388b349be36 100644--- a/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=fe6cbf0b2ac3cf4e21824a44eaa336564ed5e960)+++ b/[drivers/sh/intc/core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/sh/intc/core.c?id=c3f4f4547fb291982f5ef56c048277c4d5ccc4e4)@@ -209,7 +209,6 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc) goto err0;  INIT\_LIST\_HEAD(&d->list);- list\_add\_tail(&d->list, &intc\_list);  raw\_spin\_lock\_init(&d->lock); INIT\_RADIX\_TREE(&d->tree, GFP\_ATOMIC);@@ -369,6 +368,7 @@ int \_\_init register\_intc\_controller(struct intc\_desc \*desc)  d->skip\_suspend = desc->skip\_syscore\_suspend; + list\_add\_tail(&d->list, &intc\_list); nr\_intc\_controllers++;  return 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-14 23:19:27 +0000


