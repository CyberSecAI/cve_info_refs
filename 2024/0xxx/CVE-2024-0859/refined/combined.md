=== Content from plugins.trac.wordpress.org_f8588b8f_20250115_094503.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Faffiliates-manager%2Ftrunk%2Fclasses%2FListAffiliatesTable.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/affiliates-manager/trunk/classes/ListAffiliatesTable.php?rev=2770155 "Revision 2770155")
* Next Revision →
* [Blame](/browser/affiliates-manager/trunk/classes/ListAffiliatesTable.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/affiliates-manager/trunk/classes/ListAffiliatesTable.php)

---

# [source:](/browser?order=name "Go to repository root") [affiliates-manager](/browser/affiliates-manager?order=name "View affiliates-manager")/[trunk](/browser/affiliates-manager/trunk?order=name "View trunk")/[classes](/browser/affiliates-manager/trunk/classes?order=name "View classes")/[ListAffiliatesTable.php](/browser/affiliates-manager/trunk/classes/ListAffiliatesTable.php?order=name "View ListAffiliatesTable.php")

View diff against:

View revision:

| [Last change](/changeset/3028484/affiliates-manager/trunk/classes/ListAffiliatesTable.php "View differences") on this file was [3028484](/changeset/3028484/ "View changeset 3028484"), checked in by affmngr, [12 months ago](/timeline?from=2024-01-30T02%3A40%3A10Z&precision=second "See timeline at 01/30/2024 02:40:10 AM") |
| --- |
| .v2.9.35 |
| **File size:** 11.7 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | //\*\*\*\*\*  Check WP\_List\_Table exists |
| [4](#L4) | if ( ! class\_exists( 'WP\_List\_Table' ) ) { |
| [5](#L5) | require\_once ABSPATH . 'wp-admin/includes/class-wp-list-table.php'; |
| [6](#L6) | } |
| [7](#L7) |  |
| [8](#L8) | class WPAM\_List\_Affiliates\_Table extends WP\_List\_Table { |
| [9](#L9) |  |
| [10](#L10) | function \_\_construct() { |
| [11](#L11) | global $status, $page; |
| [12](#L12) |  |
| [13](#L13) | //Set parent defaults |
| [14](#L14) | parent::\_\_construct(array( |
| [15](#L15) | 'singular' => 'affiliate', //singular name of the listed records |
| [16](#L16) | 'plural' => 'affiliates', //plural name of the listed records |
| [17](#L17) | 'ajax' => false //does this table support ajax? |
| [18](#L18) | )); |
| [19](#L19) | } |
| [20](#L20) |  |
| [21](#L21) | function column\_default($item, $column\_name) { |
| [22](#L22) | //Just print the data for that column |
| [23](#L23) | return esc\_attr($item[$column\_name]); |
| [24](#L24) | } |
| [25](#L25) |  |
| [26](#L26) | function column\_affiliateId($item) { |
| [27](#L27) | //Build row actions |
| [28](#L28) | $actions = array( |
| [29](#L29) | 'edit' => sprintf('<a href="admin.php?page=wpam-affiliates&viewDetail=%s">View</a>', esc\_attr($item['affiliateId'])), |
| [30](#L30) | //'delete' => sprintf('<a href="admin.php?page=wpam-affiliates&delete\_aid=%s" onclick="return confirm(\'Are you sure you want to delete this entry?\')">Delete</a>', esc\_attr($item['affiliateId'])), |
| [31](#L31) | 'delete' => sprintf('<a href="%s" onclick="return confirm(\'Are you sure you want to delete this entry?\')">Delete</a>', esc\_url(admin\_url(wp\_nonce\_url('admin.php?page=wpam-affiliates&delete\_aid='.$item['affiliateId'], 'wpam-delete-affiliate')))), |
| [32](#L32) | ); |
| [33](#L33) |  |
| [34](#L34) | //Return the id column contents |
| [35](#L35) | return esc\_attr($item['affiliateId']) . $this->row\_actions($actions); |
| [36](#L36) | } |
| [37](#L37) |  |
| [38](#L38) | function column\_dateCreated($item) { |
| [39](#L39) | $item['dateCreated'] = date("m/d/Y", strtotime($item['dateCreated'])); |
| [40](#L40) | return esc\_attr($item['dateCreated']); |
| [41](#L41) | } |
| [42](#L42) |  |
| [43](#L43) | function column\_viewDetail($item) { |
| [44](#L44) | $item['viewDetail'] = '<a class="button-secondary" href="admin.php?page=wpam-affiliates&viewDetail=' . esc\_attr($item['affiliateId']) . '">' . \_\_('View', 'affiliates-manager') . '</a>'; |
| [45](#L45) | return $item['viewDetail']; |
| [46](#L46) | } |
| [47](#L47) |  |
| [48](#L48) | /\* overridden function to show a custom message when no records are present \*/ |
| [49](#L49) |  |
| [50](#L50) | function no\_items() { |
| [51](#L51) | echo '<br />No affiliates Found!'; |
| [52](#L52) | } |
| [53](#L53) |  |
| [54](#L54) | function column\_cb($item) { |
| [55](#L55) | return sprintf( |
| [56](#L56) | '<input type="checkbox" name="%1$s[]" value="%2$s" />', |
| [57](#L57) | /\* $1%s \*/ $this->\_args['singular'], //Let's reuse singular label |
| [58](#L58) | /\* $2%s \*/ $item['affiliateId'] //The value of the checkbox should be the record's key/id |
| [59](#L59) | ); |
| [60](#L60) | } |
| [61](#L61) |  |
| [62](#L62) | function get\_columns() { |
| [63](#L63) | $columns = array( |
| [64](#L64) | 'cb' => '<input type="checkbox" />', //Render a checkbox instead of text |
| [65](#L65) | 'affiliateId' => \_\_('Affiliate ID', 'affiliates-manager'), |
| [66](#L66) | 'status' => \_\_('Status', 'affiliates-manager'), |
| [67](#L67) | 'balance' => \_\_('Balance', 'affiliates-manager'), |
| [68](#L68) | 'earnings' => \_\_('Earnings', 'affiliates-manager'), |
| [69](#L69) | 'firstName' => \_\_('First Name', 'affiliates-manager'), |
| [70](#L70) | 'lastName' => \_\_('Last Name', 'affiliates-manager'), |
| [71](#L71) | 'email' => \_\_('Email', 'affiliates-manager'), |
| [72](#L72) | 'companyName' => \_\_('Company', 'affiliates-manager'), |
| [73](#L73) | 'dateCreated' => \_\_('Date Joined', 'affiliates-manager'), |
| [74](#L74) | 'websiteUrl' => \_\_('Website', 'affiliates-manager'), |
| [75](#L75) | 'viewDetail' => \_\_('', 'affiliates-manager'), |
| [76](#L76) | ); |
| [77](#L77) | return $columns; |
| [78](#L78) | } |
| [79](#L79) |  |
| [80](#L80) | function get\_sortable\_columns() { |
| [81](#L81) | $sortable\_columns = array( |
| [82](#L82) | 'affiliateId' => array('affiliateId', false), //true means its already sorted |
| [83](#L83) | 'dateCreated' => array('dateCreated', false) |
| [84](#L84) | ); |
| [85](#L85) | return $sortable\_columns; |
| [86](#L86) | } |
| [87](#L87) |  |
| [88](#L88) | function get\_bulk\_actions() { |
| [89](#L89) | $actions = array( |
| [90](#L90) | 'delete' => \_\_('Delete', 'affiliates-manager') |
| [91](#L91) | ); |
| [92](#L92) | return $actions; |
| [93](#L93) | } |
| [94](#L94) |  |
| [95](#L95) | function process\_bulk\_action() { |
| [96](#L96) | //Detect when a bulk action is being triggered... //print\_r($\_GET); |
| [97](#L97) | if ('delete' === $this->current\_action()) { |
| [98](#L98) | $nonce = ''; |
| [99](#L99) | if(isset($\_REQUEST['\_wpnonce'])){ |
| [100](#L100) | $nonce = sanitize\_text\_field($\_REQUEST['\_wpnonce']); |
| [101](#L101) | } |
| [102](#L102) | else{ |
| [103](#L103) | wp\_die(\_\_('Error! Nonce is not present! Go to the My Affiliates page to delete the affiliate.', 'affiliates-manager')); |
| [104](#L104) | } |
| [105](#L105) | if(!wp\_verify\_nonce($nonce, 'bulk-'.$this->\_args['plural'])){ |
| [106](#L106) | wp\_die(\_\_('Error! Nonce Security Check Failed! Go to the My Affiliates page to delete the affiliate.', 'affiliates-manager')); |
| [107](#L107) | } |
| [108](#L108) | $nvp\_key = $this->\_args['singular']; |
| [109](#L109) | $records\_to\_delete = $\_GET[$nvp\_key]; |
| [110](#L110) | if (empty($records\_to\_delete)) { |
| [111](#L111) | echo '<div id="message" class="updated fade"><p>' . \_\_('Error! You need to select multiple records to perform a bulk action!', 'affiliates-manager') . '</p></div>'; |
| [112](#L112) | return; |
| [113](#L113) | } |
| [114](#L114) | foreach ($records\_to\_delete as $row) { |
| [115](#L115) | //TODO delete all the selected rows |
| [116](#L116) | global $wpdb; |
| [117](#L117) | $record\_table\_name = WPAM\_AFFILIATES\_TBL; //The table name for the records |
| [118](#L118) | $selectdb = $wpdb->get\_row("SELECT \* FROM $record\_table\_name WHERE affiliateId='$row'"); |
| [119](#L119) | $aff\_email = $selectdb->email; |
| [120](#L120) | $user = get\_user\_by('email', $aff\_email); |
| [121](#L121) | if ($user) { |
| [122](#L122) | if (!in\_array('administrator', $user->roles)) { |
| [123](#L123) | wp\_delete\_user($user->ID); |
| [124](#L124) | } |
| [125](#L125) | } |
| [126](#L126) | $updatedb = "DELETE FROM $record\_table\_name WHERE affiliateId='$row'"; |
| [127](#L127) | $results = $wpdb->query($updatedb); |
| [128](#L128) | } |
| [129](#L129) | echo '<div id="message" class="updated fade"><p>' . \_\_('Selected records deleted successfully!', 'affiliates-manager') . '</p></div>'; |
| [130](#L130) | } |
| [131](#L131) | } |
| [132](#L132) |  |
| [133](#L133) | function process\_individual\_action() { |
| [134](#L134) |  |
| [135](#L135) | if (isset($\_REQUEST['page']) && 'wpam-affiliates' == $\_REQUEST['page']) { |
| [136](#L136) | if (isset($\_REQUEST['delete\_aid'])) { //delete an affiliate record |
| [137](#L137) | $nonce = isset($\_REQUEST['\_wpnonce']) ? sanitize\_text\_field($\_REQUEST['\_wpnonce']) : ''; |
| [138](#L138) | if(!wp\_verify\_nonce($nonce, 'wpam-delete-affiliate')){ |
| [139](#L139) | wp\_die(\_\_('Error! Nonce Security Check Failed! Go to the My Affiliates page to delete the affiliate account.', 'affiliates-manager')); |
| [140](#L140) | } |
| [141](#L141) | $aid = esc\_sql($\_REQUEST['delete\_aid']); |
| [142](#L142) | if (!is\_numeric($aid)) { |
| [143](#L143) | return; |
| [144](#L144) | } |
| [145](#L145) | global $wpdb; |
| [146](#L146) | $record\_table\_name = WPAM\_AFFILIATES\_TBL; //The table name for the records |
| [147](#L147) | if(get\_option(WPAM\_PluginConfig::$AutoDeleteWPUserAccount) == 1){ |
| [148](#L148) | $selectdb = $wpdb->get\_row("SELECT \* FROM $record\_table\_name WHERE affiliateId='$aid'"); |
| [149](#L149) | $aff\_email = $selectdb->email; |
| [150](#L150) | $user = get\_user\_by('email', $aff\_email); |
| [151](#L151) | if ($user) { |
| [152](#L152) | if (!in\_array('administrator', $user->roles)) { |
| [153](#L153) | wp\_delete\_user($user->ID); |
| [154](#L154) | } |
| [155](#L155) | } |
| [156](#L156) | } |
| [157](#L157) | $updatedb = "DELETE FROM $record\_table\_name WHERE affiliateId='$aid'"; |
| [158](#L158) | $result = $wpdb->query($updatedb); |
| [159](#L159) | echo '<div id="message" class="updated fade"><p>' . \_\_('Selected record deleted successfully!', 'affiliates-manager') . '</p></div>'; |
| [160](#L160) | } |
| [161](#L161) | } |
| [162](#L162) | } |
| [163](#L163) |  |
| [164](#L164) | function prepare\_items($ignore\_pagination = false) { |
| [165](#L165) | // Lets decide how many records per page to show |
| [166](#L166) | $per\_page = '50'; |
| [167](#L167) |  |
| [168](#L168) | $columns = $this->get\_columns(); |
| [169](#L169) | $hidden = array(); |
| [170](#L170) | $sortable = $this->get\_sortable\_columns(); |
| [171](#L171) |  |
| [172](#L172) | $this->\_column\_headers = array($columns, $hidden, $sortable); |
| [173](#L173) |  |
| [174](#L174) | $this->process\_individual\_action(); |
| [175](#L175) | $this->process\_bulk\_action(); |
| [176](#L176) |  |
| [177](#L177) | // This checks for sorting input and sorts the data. |
| [178](#L178) | $orderby\_column = isset($\_GET['orderby']) ? sanitize\_text\_field($\_GET['orderby']) : ''; |
| [179](#L179) | if("dateCreated" == $orderby\_column){ |
| [180](#L180) | $orderby\_column = "dateCreated"; |
| [181](#L181) | } |
| [182](#L182) | else{ |
| [183](#L183) | $orderby\_column = "affiliateId"; |
| [184](#L184) | } |
| [185](#L185) | $sort\_order = isset($\_GET['order']) ? sanitize\_text\_field($\_GET['order']) : ''; |
| [186](#L186) | if("asc" == $sort\_order){ |
| [187](#L187) | $sort\_order = "ASC"; |
| [188](#L188) | } |
| [189](#L189) | else{ |
| [190](#L190) | $sort\_order = "DESC"; |
| [191](#L191) | } |
| [192](#L192) | /\* |
| [193](#L193) | if (empty($orderby\_column)) { |
| [194](#L194) | $orderby\_column = "affiliateId"; |
| [195](#L195) | $sort\_order = "DESC"; |
| [196](#L196) | }\*/ |
| [197](#L197) | global $wpdb; |
| [198](#L198) | $aff\_table\_name = WPAM\_AFFILIATES\_TBL; |
| [199](#L199) | $trn\_table\_name = WPAM\_TRANSACTIONS\_TBL; |
| [200](#L200) |  |
| [201](#L201) | //pagination requirement |
| [202](#L202) | $current\_page = $this->get\_pagenum(); |
| [203](#L203) |  |
| [204](#L204) | $where = ""; |
| [205](#L205) | if (isset($\_REQUEST['statusFilter']) && !empty($\_REQUEST['statusFilter'])) { |
| [206](#L206) | $status = esc\_sql($\_REQUEST['statusFilter']); |
| [207](#L207) | if ($status == "all") { |
| [208](#L208) | $where = ""; |
| [209](#L209) | } else if ($status == "all\_active") { |
| [210](#L210) | $where = " where status != 'declined' and status != 'blocked' and status != 'inactive'"; |
| [211](#L211) | } else { |
| [212](#L212) | $where = " where status = '$status'"; |
| [213](#L213) | } |
| [214](#L214) | } |
| [215](#L215) | //affiliate search |
| [216](#L216) | if (isset($\_REQUEST['wpam\_affiliate\_search']) && !empty($\_REQUEST['wpam\_affiliate\_search'])) { |
| [217](#L217) | $search\_term = esc\_sql($\_REQUEST['wpam\_affiliate\_search']); |
| [218](#L218) | $where = " where affiliateId like '%" . $search\_term . "%' OR firstName like '%" . $search\_term . "%' OR lastName like '%" . $search\_term . "%' OR email like '%" . $search\_term . "%' OR paypalEmail like '%" . $search\_term . "%'"; |
| [219](#L219) | } |
| [220](#L220) | //count the total number of items |
| [221](#L221) | $query = "select count(\*) from $aff\_table\_name" . $where; |
| [222](#L222) |  |
| [223](#L223) | $total\_items = $wpdb->get\_var($query); |
| [224](#L224) |  |
| [225](#L225) | $query = "select |
| [226](#L226) | $aff\_table\_name.\*, |
| [227](#L227) | ( |
| [228](#L228) | select coalesce(sum(tr.amount),0) |
| [229](#L229) | from $trn\_table\_name tr |
| [230](#L230) | where |
| [231](#L231) | tr.affiliateId = $aff\_table\_name.affiliateId |
| [232](#L232) | and tr.status != 'failed' |
| [233](#L233) | ) balance, |
| [234](#L234) | ( |
| [235](#L235) | select coalesce(sum(IF(tr.type = 'credit', amount, 0)),0) |
| [236](#L236) | from $trn\_table\_name tr |
| [237](#L237) | where |
| [238](#L238) | tr.affiliateId = $aff\_table\_name.affiliateId |
| [239](#L239) | and tr.status != 'failed' |
| [240](#L240) | ) earnings |
| [241](#L241) | from $aff\_table\_name |
| [242](#L242) | $where |
| [243](#L243) | ORDER BY $orderby\_column $sort\_order |
| [244](#L244) | "; |
| [245](#L245) |  |
| [246](#L246) | //pagination requirement |
| [247](#L247) | if (!$ignore\_pagination) { |
| [248](#L248) | $offset = ($current\_page - 1) \* $per\_page; |
| [249](#L249) | $query .= ' LIMIT ' . (int) $offset . ',' . (int) $per\_page; |
| [250](#L250) | $this->set\_pagination\_args(array( |
| [251](#L251) | 'total\_items' => $total\_items, //WE have to calculate the total number of items |
| [252](#L252) | 'per\_page' => $per\_page, //WE have to determine how many items to show on a page |
| [253](#L253) | 'total\_pages' => ceil($total\_items / $per\_page)   //WE have to calculate the total number of pages |
| [254](#L254) | )); |
| [255](#L255) | } |
| [256](#L256) | $data = $wpdb->get\_results($query, ARRAY\_A); |
| [257](#L257) | /\* |
| [258](#L258) | $records\_table\_name = WPAM\_TRACKING\_TOKENS\_TBL; //The table to query |
| [259](#L259) | $resultset = $wpdb->get\_results("SELECT \* FROM $records\_table\_name ORDER BY $orderby\_column $sort\_order", OBJECT); |
| [260](#L260) | \*/ |
| [261](#L261) | // Now we add our \*sorted\* data to the items property, where it can be used by the rest of the class. |
| [262](#L262) | $this->items = $data; |
| [263](#L263) | } |
| [264](#L264) |  |
| [265](#L265) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/affiliates-manager/trunk/classes/ListAffiliatesTable.php?format=txt)
* [Original Format](/export/3222730/affiliates-manager/trunk/classes/ListAffiliatesTable.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_1b59f3e0_20250115_094512.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3028484%2Faffiliates-manager%2Ftrunk%3Fcontextall%3D1%26old%3D3015278%26old_path%3D%252Faffiliates-manager%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3015278/affiliates-manager/trunk?old=3028484&old_path=%2Faffiliates-manager%2Ftrunk)

---

# Changes in [affiliates-manager/trunk](/browser/affiliates-manager/trunk?rev=3028484 "Show entry in browser") [[3015278:3028484]](/log/affiliates-manager/trunk?rev=3028484&stop_rev=3015278 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[affiliates-manager/trunk](/browser/affiliates-manager/trunk?rev=3028484)
Files:

3 edited

* [boot-strap.php](/browser/affiliates-manager/trunk/boot-strap.php?rev=3028484 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [classes/ListAffiliatesTable.php](/browser/affiliates-manager/trunk/classes/ListAffiliatesTable.php?rev=3028484 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [readme.txt](/browser/affiliates-manager/trunk/readme.txt?rev=3028484 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [affiliates-manager/trunk/boot-strap.php](/changeset/3028484/affiliates-manager/trunk/boot-strap.php?old=3015278&old_path=affiliates-manager%2Ftrunk%2Fboot-strap.php "Show the [3015278:3028484] differences restricted to affiliates-manager/trunk/boot-strap.php")

  | [r3015278](/browser/affiliates-manager/trunk/boot-strap.php?rev=3015278#L1 "Show revision 3015278 of this file in browser") | [r3028484](/browser/affiliates-manager/trunk/boot-strap.php?rev=3028484#L1 "Show revision 3028484 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | /\* |
  | 3 | 3 | Plugin Name: WP Affiliate Manager |
  | 4 | 4 | Plugin URI: https://wpaffiliatemanager.com |
  | 5 | 5 | Description: Plugin to recruit, manage, track and pay your affiliates. |
  | 6 |  | Version: 2.9.3~~4~~ |
  |  | 6 | Version: 2.9.35 |
  | 7 | 7 | Author: wp.insider, wpaffiliatemgr |
  | 8 | 8 | Author URI: https://wpaffiliatemanager.com |
  | 9 | 9 | Text Domain: affiliates-manager |
  | 10 | 10 | Domain Path: /languages |
  | 11 | 11 | \*/ |
  | 12 | 12 |  |
  | 13 | 13 | if (!defined('ABSPATH')){ |
  | 14 | 14 | exit; //Exit if accessed directly |
  | 15 | 15 | } |
  | 16 | 16 |  |
  | 17 | 17 | global $wp\_version; |
  | 18 | 18 | $uploadDirInfo = wp\_upload\_dir(); |
  | 19 | 19 |  |
  | 20 |  | define( 'WPAM\_VERSION', '2.9.3~~4~~' ); |
  |  | 20 | define( 'WPAM\_VERSION', '2.9.35' ); |
  | 21 | 21 | define( 'WPAM\_DB\_VERSION', '1.6.6' ); |
  | 22 | 22 | define( 'WPAM\_OPTIONS\_VERSION', '1.0.7' ); |
  | 23 | 23 | define( 'WPAM\_PLUGIN\_BASENAME', plugin\_basename( \_\_FILE\_\_ ) ); |
  | 24 | 24 | define( 'WPAM\_PLUGIN\_FILE', \_\_FILE\_\_ ); |
  | 25 | 25 | define( 'WPAM\_BASE\_DIRECTORY', dirname( \_\_FILE\_\_ ) ); |
  | 26 | 26 | define( 'WPAM\_URL', plugins\_url( '', \_\_FILE\_\_ ) ); |
  | 27 | 27 | define( 'WPAM\_PATH', untrailingslashit(plugin\_dir\_path(\_\_FILE\_\_))); |
  | 28 | 28 | define( 'WPAM\_RESOURCES\_DIR', WPAM\_BASE\_DIRECTORY . "/resources/" ); |
  | 29 | 29 | define( 'WPAM\_DEBUG', false ); |
  | 30 | 30 | define( 'WPAM\_LOCALE\_OVERRIDE', false ); |
  | 31 | 31 |  |
  | 32 | 32 | load\_plugin\_textdomain( 'affiliates-manager', false, dirname( WPAM\_PLUGIN\_BASENAME ) . '/languages/' ); |
  | 33 | 33 |  |
  | 34 | 34 | if ( version\_compare( PHP\_VERSION, '5.3.0' ) >= 0 ) { |
  | 35 | 35 | define( 'WPAM\_PHP53', true ); |
  | 36 | 36 | } else if ( version\_compare( PHP\_VERSION, '5.1.0') >= 0 ) { |
  | 37 | 37 | define( 'WPAM\_PHP51', true ); |
  | 38 | 38 | } else { |
  | 39 | 39 | wp\_die( \_\_( 'WordPress Affiliate Manager requires PHP 5.1 or higher.', 'affiliates-manager' ) ); |
  | 40 | 40 | } |
  | 41 | 41 |  |
  | 42 | 42 | if ( version\_compare( $wp\_version, '3.5.0' ) < 0 ) { |
  | 43 | 43 | wp\_die( \_\_( 'WordPress Affiliate Manager requires WordPress 3.5 or higher.', 'affiliates-manager' ) ); |
  | 44 | 44 | } |
  | 45 | 45 |  |
  | 46 | 46 | require\_once WPAM\_BASE\_DIRECTORY . "/source/Plugin.php"; |
  | 47 | 47 | require\_once WPAM\_BASE\_DIRECTORY . "/config.php"; |
  | 48 | 48 |  |
  | 49 | 49 | $wpam\_plugin = new WPAM\_Plugin(); |
  | 50 | 50 | register\_activation\_hook( \_\_FILE\_\_, array( $wpam\_plugin, 'onActivation' ) ); |
* ## [affiliates-manager/trunk/classes/ListAffiliatesTable.php](/changeset/3028484/affiliates-manager/trunk/classes/ListAffiliatesTable.php?old=2770155&old_path=affiliates-manager%2Ftrunk%2Fclasses%2FListAffiliatesTable.php "Show the [3015278:3028484] differences restricted to affiliates-manager/trunk/classes/ListAffiliatesTable.php")

  | [r3015278](/browser/affiliates-manager/trunk/classes/ListAffiliatesTable.php?rev=2770155#L1 "Show revision 3015278 of this file in browser") | [r3028484](/browser/affiliates-manager/trunk/classes/ListAffiliatesTable.php?rev=3028484#L1 "Show revision 3028484 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 |  |
  | 3 | 3 | //\*\*\*\*\*  Check WP\_List\_Table exists |
  | 4 | 4 | if ( ! class\_exists( 'WP\_List\_Table' ) ) { |
  | 5 | 5 | require\_once ABSPATH . 'wp-admin/includes/class-wp-list-table.php'; |
  | 6 | 6 | } |
  | 7 | 7 |  |
  | 8 | 8 | class WPAM\_List\_Affiliates\_Table extends WP\_List\_Table { |
  | 9 | 9 |  |
  | 10 | 10 | function \_\_construct() { |
  | 11 | 11 | global $status, $page; |
  | 12 | 12 |  |
  | 13 | 13 | //Set parent defaults |
  | 14 | 14 | parent::\_\_construct(array( |
  | 15 | 15 | 'singular' => 'affiliate', //singular name of the listed records |
  | 16 | 16 | 'plural' => 'affiliates', //plural name of the listed records |
  | 17 | 17 | 'ajax' => false //does this table support ajax? |
  | 18 | 18 | )); |
  | 19 | 19 | } |
  | 20 | 20 |  |
  | 21 | 21 | function column\_default($item, $column\_name) { |
  | 22 | 22 | //Just print the data for that column |
  | 23 | 23 | return esc\_attr($item[$column\_name]); |
  | 24 | 24 | } |
  | 25 | 25 |  |
  | 26 | 26 | function column\_affiliateId($item) { |
  | 27 | 27 | //Build row actions |
  | 28 | 28 | $actions = array( |
  | 29 | 29 | 'edit' => sprintf('<a href="admin.php?page=wpam-affiliates&viewDetail=%s">View</a>', esc\_attr($item['affiliateId'])), |
  | 30 | 30 | //'delete' => sprintf('<a href="admin.php?page=wpam-affiliates&delete\_aid=%s" onclick="return confirm(\'Are you sure you want to delete this entry?\')">Delete</a>', esc\_attr($item['affiliateId'])), |
  | 31 | 31 | 'delete' => sprintf('<a href="%s" onclick="return confirm(\'Are you sure you want to delete this entry?\')">Delete</a>', esc\_url(admin\_url(wp\_nonce\_url('admin.php?page=wpam-affiliates&delete\_aid='.$item['affiliateId'], 'wpam-delete-affiliate')))), |
  | 32 | 32 | ); |
  | 33 | 33 |  |
  | 34 | 34 | //Return the id column contents |
  | 35 | 35 | return esc\_attr($item['affiliateId']) . $this->row\_actions($actions); |
  | 36 | 36 | } |
  | 37 | 37 |  |
  | 38 | 38 | function column\_dateCreated($item) { |
  | 39 | 39 | $item['dateCreated'] = date("m/d/Y", strtotime($item['dateCreated'])); |
  | 40 | 40 | return esc\_attr($item['dateCreated']); |
  | 41 | 41 | } |
  | 42 | 42 |  |
  | 43 | 43 | function column\_viewDetail($item) { |
  | 44 | 44 | $item['viewDetail'] = '<a class="button-secondary" href="admin.php?page=wpam-affiliates&viewDetail=' . esc\_attr($item['affiliateId']) . '">' . \_\_('View', 'affiliates-manager') . '</a>'; |
  | 45 | 45 | return $item['viewDetail']; |
  | 46 | 46 | } |
  | 47 | 47 |  |
  | 48 | 48 | /\* overridden function to show a custom message when no records are present \*/ |
  | 49 | 49 |  |
  | 50 | 50 | function no\_items() { |
  | 51 | 51 | echo '<br />No affiliates Found!'; |
  | 52 | 52 | } |
  | 53 | 53 |  |
  | 54 | 54 | function column\_cb($item) { |
  | 55 | 55 | return sprintf( |
  | 56 | 56 | '<input type="checkbox" name="%1$s[]" value="%2$s" />', |
  | 57 | 57 | /\* $1%s \*/ $this->\_args['singular'], //Let's reuse singular label |
  | 58 | 58 | /\* $2%s \*/ $item['affiliateId'] //The value of the checkbox should be the record's key/id |
  | 59 | 59 | ); |
  | 60 | 60 | } |
  | 61 | 61 |  |
  | 62 | 62 | function get\_columns() { |
  | 63 | 63 | $columns = array( |
  | 64 | 64 | 'cb' => '<input type="checkbox" />', //Render a checkbox instead of text |
  | 65 | 65 | 'affiliateId' => \_\_('Affiliate ID', 'affiliates-manager'), |
  | 66 | 66 | 'status' => \_\_('Status', 'affiliates-manager'), |
  | 67 | 67 | 'balance' => \_\_('Balance', 'affiliates-manager'), |
  | 68 | 68 | 'earnings' => \_\_('Earnings', 'affiliates-manager'), |
  | 69 | 69 | 'firstName' => \_\_('First Name', 'affiliates-manager'), |
  | 70 | 70 | 'lastName' => \_\_('Last Name', 'affiliates-manager'), |
  | 71 | 71 | 'email' => \_\_('Email', 'affiliates-manager'), |
  | 72 | 72 | 'companyName' => \_\_('Company', 'affiliates-manager'), |
  | 73 | 73 | 'dateCreated' => \_\_('Date Joined', 'affiliates-manager'), |
  | 74 | 74 | 'websiteUrl' => \_\_('Website', 'affiliates-manager'), |
  | 75 | 75 | 'viewDetail' => \_\_('', 'affiliates-manager'), |
  | 76 | 76 | ); |
  | 77 | 77 | return $columns; |
  | 78 | 78 | } |
  | 79 | 79 |  |
  | 80 | 80 | function get\_sortable\_columns() { |
  | 81 | 81 | $sortable\_columns = array( |
  | 82 | 82 | 'affiliateId' => array('affiliateId', false), //true means its already sorted |
  | 83 | 83 | 'dateCreated' => array('dateCreated', false) |
  | 84 | 84 | ); |
  | 85 | 85 | return $sortable\_columns; |
  | 86 | 86 | } |
  | 87 | 87 |  |
  | 88 | 88 | function get\_bulk\_actions() { |
  | 89 | 89 | $actions = array( |
  | 90 | 90 | 'delete' => \_\_('Delete', 'affiliates-manager') |
  | 91 | 91 | ); |
  | 92 | 92 | return $actions; |
  | 93 | 93 | } |
  | 94 | 94 |  |
  | 95 | 95 | function process\_bulk\_action() { |
  | 96 | 96 | //Detect when a bulk action is being triggered... //print\_r($\_GET); |
  | 97 | 97 | if ('delete' === $this->current\_action()) { |
  |  | 98 | $nonce = ''; |
  |  | 99 | if(isset($\_REQUEST['\_wpnonce'])){ |
  |  | 100 | $nonce = sanitize\_text\_field($\_REQUEST['\_wpnonce']); |
  |  | 101 | } |
  |  | 102 | else{ |
  |  | 103 | wp\_die(\_\_('Error! Nonce is not present! Go to the My Affiliates page to delete the affiliate.', 'affiliates-manager')); |
  |  | 104 | } |
  |  | 105 | if(!wp\_verify\_nonce($nonce, 'bulk-'.$this->\_args['plural'])){ |
  |  | 106 | wp\_die(\_\_('Error! Nonce Security Check Failed! Go to the My Affiliates page to delete the affiliate.', 'affiliates-manager')); |
  |  | 107 | } |
  | 98 | 108 | $nvp\_key = $this->\_args['singular']; |
  | 99 | 109 | $records\_to\_delete = $\_GET[$nvp\_key]; |
  | 100 | 110 | if (empty($records\_to\_delete)) { |
  | 101 | 111 | echo '<div id="message" class="updated fade"><p>' . \_\_('Error! You need to select multiple records to perform a bulk action!', 'affiliates-manager') . '</p></div>'; |
  | 102 | 112 | return; |
  | 103 | 113 | } |
  | 104 | 114 | foreach ($records\_to\_delete as $row) { |
  | 105 | 115 | //TODO delete all the selected rows |
  | 106 | 116 | global $wpdb; |
  | 107 | 117 | $record\_table\_name = WPAM\_AFFILIATES\_TBL; //The table name for the records |
  | 108 | 118 | $selectdb = $wpdb->get\_row("SELECT \* FROM $record\_table\_name WHERE affiliateId='$row'"); |
  | 109 | 119 | $aff\_email = $selectdb->email; |
  | 110 | 120 | $user = get\_user\_by('email', $aff\_email); |
  | 111 | 121 | if ($user) { |
  | 112 | 122 | if (!in\_array('administrator', $user->roles)) { |
  | 113 | 123 | wp\_delete\_user($user->ID); |
  | 114 | 124 | } |
  | 115 | 125 | } |
  | 116 | 126 | $updatedb = "DELETE FROM $record\_table\_name WHERE affiliateId='$row'"; |
  | 117 | 127 | $results = $wpdb->query($updatedb); |
  | 118 | 128 | } |
  | 119 | 129 | echo '<div id="message" class="updated fade"><p>' . \_\_('Selected records deleted successfully!', 'affiliates-manager') . '</p></div>'; |
  | 120 | 130 | } |
  | 121 | 131 | } |
  | 122 | 132 |  |
  | 123 | 133 | function process\_individual\_action() { |
  | 124 | 134 |  |
  | 125 | 135 | if (isset($\_REQUEST['page']) && 'wpam-affiliates' == $\_REQUEST['page']) { |
  | 126 | 136 | if (isset($\_REQUEST['delete\_aid'])) { //delete an affiliate record |
  | 127 | 137 | $nonce = isset($\_REQUEST['\_wpnonce']) ? sanitize\_text\_field($\_REQUEST['\_wpnonce']) : ''; |
  | 128 | 138 | if(!wp\_verify\_nonce($nonce, 'wpam-delete-affiliate')){ |
  | 129 | 139 | wp\_die(\_\_('Error! Nonce Security Check Failed! Go to the My Affiliates page to delete the affiliate account.', 'affiliates-manager')); |
  | 130 | 140 | } |
  | 131 | 141 | $aid = esc\_sql($\_REQUEST['delete\_aid']); |
  | 132 | 142 | if (!is\_numeric($aid)) { |
  | 133 | 143 | return; |
  | 134 | 144 | } |
  | 135 | 145 | global $wpdb; |
  | 136 | 146 | $record\_table\_name = WPAM\_AFFILIATES\_TBL; //The table name for the records |
  | 137 | 147 | if(get\_option(WPAM\_PluginConfig::$AutoDeleteWPUserAccount) == 1){ |
  | 138 | 148 | $selectdb = $wpdb->get\_row("SELECT \* FROM $record\_table\_name WHERE affiliateId='$aid'"); |
  | 139 | 149 | $aff\_email = $selectdb->email; |
  | 140 | 150 | $user = get\_user\_by('email', $aff\_email); |
  | 141 | 151 | if ($user) { |
  | 142 | 152 | if (!in\_array('administrator', $user->roles)) { |
  | 143 | 153 | wp\_delete\_user($user->ID); |
  | 144 | 154 | } |
  | 145 | 155 | } |
  | 146 | 156 | } |
  | 147 | 157 | $updatedb = "DELETE FROM $record\_table\_name WHERE affiliateId='$aid'"; |
  | 148 | 158 | $result = $wpdb->query($updatedb); |
  | 149 | 159 | echo '<div id="message" class="updated fade"><p>' . \_\_('Selected record deleted successfully!', 'affiliates-manager') . '</p></div>'; |
  | 150 | 160 | } |
  | 151 | 161 | } |
  | 152 | 162 | } |
  | 153 | 163 |  |
  | 154 | 164 | function prepare\_items($ignore\_pagination = false) { |
  | 155 | 165 | // Lets decide how many records per page to show |
  | 156 | 166 | $per\_page = '50'; |
  | 157 | 167 |  |
  | 158 | 168 | $columns = $this->get\_columns(); |
  | 159 | 169 | $hidden = array(); |
  | 160 | 170 | $sortable = $this->get\_sortable\_columns(); |
  | 161 | 171 |  |
  | 162 | 172 | $this->\_column\_headers = array($columns, $hidden, $sortable); |
  | 163 | 173 |  |
  | 164 | 174 | $this->process\_individual\_action(); |
  | 165 | 175 | $this->process\_bulk\_action(); |
  | 166 | 176 |  |
  | 167 | 177 | // This checks for sorting input and sorts the data. |
  | 168 | 178 | $orderby\_column = isset($\_GET['orderby']) ? sanitize\_text\_field($\_GET['orderby']) : ''; |
  | 169 | 179 | if("dateCreated" == $orderby\_column){ |
  | 170 | 180 | $orderby\_column = "dateCreated"; |
  | 171 | 181 | } |
  | 172 | 182 | else{ |
  | 173 | 183 | $orderby\_column = "affiliateId"; |
  | 174 | 184 | } |
  | 175 | 185 | $sort\_order = isset($\_GET['order']) ? sanitize\_text\_field($\_GET['order']) : ''; |
  | 176 | 186 | if("asc" == $sort\_order){ |
  | 177 | 187 | $sort\_order = "ASC"; |
  | 178 | 188 | } |
  | 179 | 189 | else{ |
  | 180 | 190 | $sort\_order = "DESC"; |
  | 181 | 191 | } |
  | 182 | 192 | /\* |
  | 183 | 193 | if (empty($orderby\_column)) { |
  | 184 | 194 | $orderby\_column = "affiliateId"; |
  | 185 | 195 | $sort\_order = "DESC"; |
  | 186 | 196 | }\*/ |
  | 187 | 197 | global $wpdb; |
  | 188 | 198 | $aff\_table\_name = WPAM\_AFFILIATES\_TBL; |
  | 189 | 199 | $trn\_table\_name = WPAM\_TRANSACTIONS\_TBL; |
  | 190 | 200 |  |
  | 191 | 201 | //pagination requirement |
  | 192 | 202 | $current\_page = $this->get\_pagenum(); |
  | 193 | 203 |  |
  | 194 | 204 | $where = ""; |
  | 195 | 205 | if (isset($\_REQUEST['statusFilter']) && !empty($\_REQUEST['statusFilter'])) { |
  | 196 | 206 | $status = esc\_sql($\_REQUEST['statusFilter']); |
  | 197 | 207 | if ($status == "all") { |
  | 198 | 208 | $where = ""; |
  | 199 | 209 | } else if ($status == "all\_active") { |
  | 200 | 210 | $where = " where status != 'declined' and status != 'blocked' and status != 'inactive'"; |
  | 201 | 211 | } else { |
  | 202 | 212 | $where = " where status = '$status'"; |
  | 203 | 213 | } |
  | 204 | 214 | } |
  | 205 | 215 | //affiliate search |
  | 206 | 216 | if (isset($\_REQUEST['wpam\_affiliate\_search']) && !empty($\_REQUEST['wpam\_affiliate\_search'])) { |
  | 207 | 217 | $search\_term = esc\_sql($\_REQUEST['wpam\_affiliate\_search']); |
  | 208 | 218 | $where = " where affiliateId like '%" . $search\_term . "%' OR firstName like '%" . $search\_term . "%' OR lastName like '%" . $search\_term . "%' OR email like '%" . $search\_term . "%' OR paypalEmail like '%" . $search\_term . "%'"; |
  | 209 | 219 | } |
  | 210 | 220 | //count the total number of items |
  | 211 | 221 | $query = "select count(\*) from $aff\_table\_name" . $where; |
  | 212 | 222 |  |
  | 213 | 223 | $total\_items = $wpdb->get\_var($query); |
  | 214 | 224 |  |
  | 215 | 225 | $query = "select |
  | 216 | 226 | $aff\_table\_name.\*, |
  | 217 | 227 | ( |
  | 218 | 228 | select coalesce(sum(tr.amount),0) |
  | 219 | 229 | from $trn\_table\_name tr |
  | 220 | 230 | where |
  | 221 | 231 | tr.affiliateId = $aff\_table\_name.affiliateId |
  | 222 | 232 | and tr.status != 'failed' |
  | 223 | 233 | ) balance, |
  | 224 | 234 | ( |
  | 225 | 235 | select coalesce(sum(IF(tr.type = 'credit', amount, 0)),0) |
  | 226 | 236 | from $trn\_table\_name tr |
  | 227 | 237 | where |
  | 228 | 238 | tr.affiliateId = $aff\_table\_name.affiliateId |
  | 229 | 239 | and tr.status != 'failed' |
  | 230 | 240 | ) earnings |
  | 231 | 241 | from $aff\_table\_name |
  | 232 | 242 | $where |
  | 233 | 243 | ORDER BY $orderby\_column $sort\_order |
  | 234 | 244 | "; |
  | 235 | 245 |  |
  | 236 | 246 | //pagination requirement |
  | 237 | 247 | if (!$ignore\_pagination) { |
  | 238 | 248 | $offset = ($current\_page - 1) \* $per\_page; |
  | 239 | 249 | $query .= ' LIMIT ' . (int) $offset . ',' . (int) $per\_page; |
  | 240 | 250 | $this->set\_pagination\_args(array( |
  | 241 | 251 | 'total\_items' => $total\_items, //WE have to calculate the total number of items |
  | 242 | 252 | 'per\_page' => $per\_page, //WE have to determine how many items to show on a page |
  | 243 | 253 | 'total\_pages' => ceil($total\_items / $per\_page)   //WE have to calculate the total number of pages |
  | 244 | 254 | )); |
  | 245 | 255 | } |
  | 246 | 256 | $data = $wpdb->get\_results($query, ARRAY\_A); |
  | 247 | 257 | /\* |
  | 248 | 258 | $records\_table\_name = WPAM\_TRACKING\_TOKENS\_TBL; //The table to query |
  | 249 | 259 | $resultset = $wpdb->get\_results("SELECT \* FROM $records\_table\_name ORDER BY $orderby\_column $sort\_order", OBJECT); |
  | 250 | 260 | \*/ |
  | 251 | 261 | // Now we add our \*sorted\* data to the items property, where it can be used by the rest of the class. |
  | 252 | 262 | $this->items = $data; |
  | 253 | 263 | } |
  | 254 | 264 |  |
  | 255 | 265 | } |
* ## [affiliates-manager/trunk/readme.txt](/changeset/3028484/affiliates-manager/trunk/readme.txt?old=3015278&old_path=affiliates-manager%2Ftrunk%2Freadme.txt "Show the [3015278:3028484] differences restricted to affiliates-manager/trunk/readme.txt")

  | [r3015278](/browser/affiliates-manager/trunk/readme.txt?rev=3015278#L1 "Show revision 3015278 of this file in browser") | [r3028484](/browser/affiliates-manager/trunk/readme.txt?rev=3028484#L1 "Show revision 3028484 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | === Affiliates Manager === |
  | 2 | 2 | Contributors: wp.insider, affmngr, ElementGreen |
  | 3 | 3 | Donate link: https://wpaffiliatemanager.com/ |
  | 4 | 4 | Tags: affiliate, affiliates manager, affiliate marketing, affiliate plugin, affiliates, referral, affiliate program, ads, advertising, affiliate tool, digital downloads, e-commerce, tracking, track affiliates, leads, affiliate software, woocommerce, affiliate campaign, paypal |
  | 5 | 5 | Requires at least: 3.5 |
  | 6 | 6 | Tested up to: 6.4 |
  | 7 |  | Stable tag: 2.9.3~~4~~ |
  |  | 7 | Stable tag: 2.9.35 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | 10 | 10 |  |
  | 11 | 11 | Affiliates Manager plugin can help you manage an affiliate marketing program to drive more traffic and more sales to your site. |
  | 12 | 12 |  |
  | 13 | 13 | == Description == |
  | 14 | 14 |  |
  | 15 | 15 | Running your WordPress site with an e-Commerce plugin or solution? WP Affiliate Manager can help you manage an affiliate marketing program to drive more traffic and more sales to your store. |
  | 16 | 16 |  |
  | 17 | 17 | Affiliate Marketing is the fastest growing advertising method and it is very cost effective. |
  | 18 | 18 |  |
  | 19 | 19 | This wp affiliate plugin facilitates the affiliates recruitment, registration, login, management process. |
  | 20 | 20 |  |
  | 21 | 21 | It will also track the referrals your affiliates send to your site and give commissions appropriately. |
  | 22 | 22 |  |
  | 23 | 23 | Affiliates Manager integrates with some popular e-commerce solutions. It integrates with: |
  | 24 | 24 |  |
  | 25 | 25 | \* WooCommerce |
  | 26 | 26 | \* WooCommerce Subscriptions |
  | 27 | 27 | \* Simple Shopping Cart |
  | 28 | 28 | \* WP eCommerce |
  | 29 | 29 | \* JigoShop |
  | 30 | 30 | \* Easy Digital Downloads |
  | 31 | 31 | \* iThemes Exchange |
  | 32 | 32 | \* WP eStore |
  | 33 | 33 | \* Sell Digital Downloads |
  | 34 | 34 | \* Paid Membership Pro |
  | 35 | 35 | \* S2Member |
  | 36 | 36 | \* Simple Membership |
  | 37 | 37 | \* Stripe Payments |
  | 38 | 38 | \* Gravity Forms PayPal |
  | 39 | 39 | \* Gravity Forms Stripe |
  | 40 | 40 | \* WP Express Checkout |
  | 41 | 41 | \* OptimizeMember |
  | 42 | 42 | \* MemberMouse |
  | 43 | 43 | \* AppThemes |
  | 44 | 44 | \* LifterLMS |
  | 45 | 45 | \* WP Courseware |
  | 46 | 46 | \* MemberPress |
  | 47 | 47 | \* GiveWP |
  | 48 | 48 |  |
  | 49 | 49 | === Real-Time Reporting === |
  | 50 | 50 |  |
  | 51 | 51 | Your affiliate's traffic and sales are recorded and ready for display as soon as they happen. |
  | 52 | 52 |  |
  | 53 | 53 | === Unlimited Affiliates === |
  | 54 | 54 |  |
  | 55 | 55 | No matter if you have 1 or 1,000 affiliates, you can track them all. |
  | 56 | 56 |  |
  | 57 | 57 | === Automatic Affiliate Approval === |
  | 58 | 58 |  |
  | 59 | 59 | Automatically approve newly registered affiliates so they can start promoting your products. |
  | 60 | 60 |  |
  | 61 | 61 | === Manual Affiliate Approval === |
  | 62 | 62 |  |
  | 63 | 63 | Do you want to work with selected affiliates? With the manual approval option you can approve/decline each affiliate application. |
  | 64 | 64 |  |
  | 65 | 65 | === Flat Rate or Percentage Based Payouts === |
  | 66 | 66 |  |
  | 67 | 67 | You decide how you want to reward your affiliates. You can choose to pay your affiliates a flat rate per order, or choose to pay them a percentage of every order they initiate. |
  | 68 | 68 |  |
  | 69 | 69 | === Set Payout Rates Per Affiliate === |
  | 70 | 70 |  |
  | 71 | 71 | Each of your affiliates can be set to their own payout amount. |
  | 72 | 72 |  |
  | 73 | 73 | === Manual Adjustments and Payouts === |
  | 74 | 74 |  |
  | 75 | 75 | There may be a time when you need to credit an affiliate for something other than a sale. For example, a bonus for reaching a sales goal. Manual adjustments are treated as a line item for easy tracking. |
  | 76 | 76 |  |
  | 77 | 77 | === Pay Your Affiliates Using PayPal === |
  | 78 | 78 |  |
  | 79 | 79 | Ability to easily pay your affiliates their commission using PayPal. |
  | 80 | 80 |  |
  | 81 | 81 | === Manual Payout === |
  | 82 | 82 |  |
  | 83 | 83 | Pay affiliates with your preferred method and mark them as paid in the plugin. |
  | 84 | 84 |  |
  | 85 | 85 | === Unlimited Creatives and Ads for your Affiliates === |
  | 86 | 86 |  |
  | 87 | 87 | You can add as many banners or text link ads as you wish. Plus, you can easily activate or deactivate creatives as needed. |
  | 88 | 88 |  |
  | 89 | 89 | === Customizable Affiliate Registration === |
  | 90 | 90 |  |
  | 91 | 91 | You can decide how much or how little data to collect from your affiliates when they sign up. You can mark each field as optional or required. |
  | 92 | 92 |  |
  | 93 | 93 | === Disable Own Referrals === |
  | 94 | 94 |  |
  | 95 | 95 | Prevent affiliates from earning commissions on their own purchases. |
  | 96 | 96 |  |
  | 97 | 97 | === Affiliate Registration Form Customization === |
  | 98 | 98 |  |
  | 99 | 99 | Customize the affiliate registration form with custom affiliate fields. |
  | 100 | 100 |  |
  | 101 | 101 | === Affiliate Coupon Tracking === |
  | 102 | 102 |  |
  | 103 | 103 | Link affiliate accounts to WooCommerce coupon codes and track them to reward commissions. |
  | 104 | 104 |  |
  | 105 | 105 | === Manual Referral Tracking === |
  | 106 | 106 |  |
  | 107 | 107 | Manually track a purchase and create a commission/referral record for it. |
  | 108 | 108 |  |
  | 109 | 109 | === Referral Link Generator === |
  | 110 | 110 |  |
  | 111 | 111 | Affiliates can generate their own referral links from the affiliate dashboard. |
  | 112 | 112 |  |
  | 113 | 113 | === Social Sharing Links === |
  | 114 | 114 |  |
  | 115 | 115 | Affiliates can generate links for your products that can be shared on social media. |
  | 116 | 116 |  |
  | 117 | 117 | === Set Cookie Duration === |
  | 118 | 118 |  |
  | 119 | 119 | Specify how long the referral cookie should be valid for (30 days by default). |
  | 120 | 120 |  |
  | 121 | 121 | === Autoresponder Integration === |
  | 122 | 122 |  |
  | 123 | 123 | \* Sign up affiliates to your Mailchimp list. |
  | 124 | 124 | \* Sign up affiliates to MailPoet newsletter list. |
  | 125 | 125 | \* Sign up affiliates to your AWeber list. |
  | 126 | 126 | \* Sign up affiliates to your Mad Mimi list. |
  | 127 | 127 | \* Sign up affiliates to your Infusionsoft account. |
  | 128 | 128 | \* Sign up affiliates to your GetResponse list. |
  | 129 | 129 | \* Sign up affiliates to your ActiveCampaign list. |
  | 130 | 130 |  |
  | 131 | 131 | === Affiliate Ad Impression Tracking === |
  | 132 | 132 |  |
  | 133 | 133 | Track how many times a particular affiliate ad is getting viewed. |
  | 134 | 134 |  |
  | 135 | 135 | === Customize Email for Affiliates === |
  | 136 | 136 |  |
  | 137 | 137 | You can customize the email that is sent to an affiliate after they register for an account. The following messages are customizable: |
  | 138 | 138 |  |
  | 139 | 139 | \* HTML message displayed to user at logon if affiliate STATUS = APPROVED |
  | 140 | 140 | \* HTML message displayed to user at logon if affiliate STATUS = DECLINED |
  | 141 | 141 | \* HTML message displayed to user at logon if affiliate STATUS = PENDING |
  | 142 | 142 | \* HTML message displayed to user after successfully submitting the affiliate registration form |
  | 143 | 143 | \* Body of the e-mail sent to the affiliate immediately after submitting their application. |
  | 144 | 144 | \* Body of e-mail sent to the affiliate immediately following their application being declined. |
  | 145 | 145 | \* Body of e-mail sent to a newly registered affiliate immediately following their application being approved. |
  | 146 | 146 | \* Body of e-mail sent to the affiliate immediately after earning a commission. |
  | 147 | 147 | \* Body of e-mail sent to the admin when an affiliate earns a commission. |
  | 148 | 148 | \* Body of e-mail sent to a newly approved affiliate if they have an existing user account. |
  | 149 | 149 |  |
  | 150 | 150 | === Translation Ready === |
  | 151 | 151 |  |
  | 152 | 152 | This plugin can be translated to your language. The following language translations are already available in the plugin: |
  | 153 | 153 |  |
  | 154 | 154 | \* English |
  | 155 | 155 | \* German |
  | 156 | 156 | \* French |
  | 157 | 157 | \* Hebrew |
  | 158 | 158 | \* Portuguese |
  | 159 | 159 | \* Spanish |
  | 160 | 160 | \* Bulgarian |
  | 161 | 161 | \* Finnish |
  | 162 | 162 | \* Dutch |
  | 163 | 163 | \* Italian |
  | 164 | 164 | \* Icelandic |
  | 165 | 165 | \* Polish |
  | 166 | 166 |  |
  | 167 | 167 | You can translate the plugin using [this documentation](https://wpaffiliatemanager.com/affiliate-manager-plugin-translation/). |
  | 168 | 168 |  |
  | 169 | 169 | === Support === |
  | 170 | 170 |  |
  | 171 | 171 | View the [Plugin Documentation](https://wpaffiliatemanager.com/documentation/) to get started. |
  | 172 | 172 |  |
  | 173 | 173 | If you have a question, you can ask it on our support forum. |
  | 174 | 174 |  |
  | 175 | 175 | Visit the [affiliate manager plugin](https://wpaffiliatemanager.com) site for more details. |
  | 176 | 176 |  |
  | 177 | 177 | === Developers === |
  | 178 | 178 | \* If you are a developer and you need some extra hooks or filters for this plugin then let us know. |
  | 179 | 179 | \* Github repository - https://github.com/wp-insider/affiliates-manager-plugin |
  | 180 | 180 |  |
  | 181 | 181 | == Installation == |
  | 182 | 182 |  |
  | 183 | 183 | \* Go to the Add New plugins screen in your WordPress admin area |
  | 184 | 184 | \* Click the upload tab |
  | 185 | 185 | \* Browse for the plugin file (wpaffiliatemanager.zip) |
  | 186 | 186 | \* Click Install Now and then activate the plugin |
  | 187 | 187 |  |
  | 188 | 188 | == Frequently Asked Questions == |
  | 189 | 189 | None |
  | 190 | 190 |  |
  | 191 | 191 | == Screenshots == |
  | 192 | 192 | View screenshots in the following page: |
  | 193 | 193 | https://wpaffiliatemanager.com/screen-shots/ |
  | 194 | 194 |  |
  | 195 | 195 | == Changelog == |
  | 196 | 196 |  |
  |  | 197 | = 2.9.35 = |
  |  | 198 | - Made some security related improvements suggested by Wordfence. |
  |  | 199 |  |
  | 197 | 200 | = 2.9.34 = |
  | 198 | 201 | - Added Chinese (Hong Kong) language translation to the plugin. The translation was submitted by Cloud Chan. |
  | 199 | 202 |  |
  | 200 | 203 | = 2.9.33 = |
  | 201 | 204 | - Fixed a type in the en\_GB language file. |
  | 202 | 205 |  |
  | 203 | 206 | = 2.9.32 = |
  | 204 | 207 | - Improved ajax functionalities. |
  | 205 | 208 |  |
  | 206 | 209 | = 2.9.31 = |
  | 207 | 210 | - Made some improvements to debug logging suggested by Patchstack. |
  | 208 | 211 |  |
  | 209 | 212 | = 2.9.30 = |
  | 210 | 213 | - Extended the registration nonce check option to the payment details submission page. |
  | 211 | 214 |  |
  | 212 | 215 | = 2.9.29 = |
  | 213 | 216 | - Added a CSS class for the lost password section. |
  | 214 | 217 |  |
  | 215 | 218 | = 2.9.28 = |
  | 216 | 219 | - Additional email tags for the aff\_approved\_email\_existing\_user\_account template. |
  | 217 | 220 |  |
  | 218 | 221 | = 2.9.27 = |
  | 219 | 222 | - Added German (Formal) language translation to the plugin. The translation was submitted by Ulrich Kern. |
  | 220 | 223 |  |
  | 221 | 224 | = 2.9.26 = |
  | 222 | 225 | - Updated the WooCommerce integration to be compatible with CRUD objects. |
  | 223 | 226 |  |
  | 224 | 227 | = 2.9.25 = |
  | 225 | 228 | - Fixed a currency formatting issue in the manual payout interface. |
  | 226 | 229 |  |
  | 227 | 230 | = 2.9.24 = |
  | 228 | 231 | - Added a CSS class to apply custom styling to the existing affiliate account message. |
  | 229 | 232 |  |
  | 230 | 233 | = 2.9.23 = |
  | 231 | 234 | - Linked affiliate IDs in the Commissions table to their respective profiles. |
  | 232 | 235 |  |
  | 233 | 236 | = 2.9.22 = |
  | 234 | 237 | - Fixed some PHP 8.2 notices. |
  | 235 | 238 |  |
  | 236 | 239 | = 2.9.21 = |
  | 237 | 240 | - Made some security related improvements suggested by Patchstack. |
  | 238 | 241 |  |
  | 239 | 242 | = 2.9.20 = |
  | 240 | 243 | - Fixed an issue where bank transfer instructions were not shown to manually approved affiliates. |
  | 241 | 244 |  |
  | 242 | 245 | = 2.9.19 = |
  | 243 | 246 | - Added bank transfer as a payout method. |
  | 244 | 247 |  |
  | 245 | 248 | = 2.9.18 = |
  | 246 | 249 | - Added an option to enable/disable nonce check on the registration page. |
  | 247 | 250 |  |
  | 248 | 251 | = 2.9.17 = |
  | 249 | 252 | - Added more strict checking for own referrals. |
  | 250 | 253 |  |
  | 251 | 254 | = 2.9.16 = |
  | 252 | 255 | - Added an option to automatically create affiliate accounts for Simple Membership members. |
  | 253 | 256 |  |
  | 254 | 257 | = 2.9.15 = |
  | 255 | 258 | - Added an option to make a payout based on a date range. |
  | 256 | 259 |  |
  | 257 | 260 | = 2.9.14 = |
  | 258 | 261 | - Made some security related improvements suggested by WPScan. |
  | 259 | 262 |  |
  | 260 | 263 | = 2.9.13 = |
  | 261 | 264 | - Updated the integration for Easy Digital Downloads version 3.0. |
  | 262 | 265 |  |
  | 263 | 266 | = 2.9.12 = |
  | 264 | 267 | - Fixed an issue where the blogname tag was not available in the affiliate email if Send Notification to Admin is disabled. |
  | 265 | 268 | - Fixed a PHP 8 warning in the MessageHelper.php file. |
  | 266 | 269 |  |
  | 267 | 270 | = 2.9.11 = |
  | 268 | 271 | - Added a filter for the Export to CSV option. |
  | 269 | 272 |  |
  | 270 | 273 | = 2.9.10 = |
  | 271 | 274 | - Referrals can now be edited. |
  | 272 | 275 | - Added an option to enable/disable referral tracking with IP addresses. |
  | 273 | 276 | - Updated the Russian language translation. |
  | 274 | 277 |  |
  | 275 | 278 | = 2.9.9 = |
  | 276 | 279 | - Added search functionality to the My Affiliates page. |
  | 277 | 280 |  |
  | 278 | 281 | = 2.9.8 = |
  | 279 | 282 | - Fixed a bug that was affecting the PayPal MassPay date range selection. |
  | 280 | 283 |  |
  | 281 | 284 | = 2.9.7 = |
  | 282 | 285 | - Fixed a layout issue that was affecting the terms and payment details pages for a manually approved affiliate. |
  | 283 | 286 |  |
  | 284 | 287 | = 2.9.6 = |
  | 285 | 288 | - Added an option to show/hide terms and conditions on the affiliate registration page. |
  | 286 | 289 |  |
  | 287 | 290 | = 2.9.5 = |
  | 288 | 291 | - Creative list now shows a preview of the image banner instead of the name. |
  | 289 | 292 | - Moved the Log out button to the right. |
  | 290 | 293 | - Added an option to disable affiliate registration on the front end. |
  | 291 | 294 | - Affiliate pages are not automatically created when the init action hook is triggered. |
  | 292 | 295 |  |
  | 293 | 296 | = 2.9.4 = |
  | 294 | 297 | - Fixed an issue in the affiliate sales interface where dates were not correctly filtered for the German language. |
  | 295 | 298 | - Added the affiliate registration form anchor option. When enabled, the affiliate will be taken to the registration form anchor within the page after the form is submitted. |
  | 296 | 299 |  |
  | 297 | 300 | = 2.9.3 = |
  | 298 | 301 | - A shareable link is now displayed for each creative. |
  | 299 | 302 | - Added action hooks for affiliate specific events. |
  | 300 | 303 |  |
  | 301 | 304 | = 2.9.2 = |
  | 302 | 305 | - Added more email tags for the affiliate\_application\_submitted\_email template. |
  | 303 | 306 |  |
  | 304 | 307 | = 2.9.1 = |
  | 305 | 308 | - Fixed an issue where new affiliates could not be approved when Auto WooCommerce Affiliate Account Creation addon was active. |
  | 306 | 309 | - Added support for the Checkout Referrals addon which allows visitors to set the referrer or affiliate id. |
  | 307 | 310 | https://wpaffiliatemanager.com/allow-visitors-to-set-the-referrer-or-affiliate-id/ |
  | 308 | 311 | - Integrated Affiliates Manager with the GiveWP plugin. |
  | 309 | 312 | https://wpaffiliatemanager.com/affiliates-manager-givewp-integration/ |
  | 310 | 313 |  |
  | 311 | 314 | = 2.9.0 = |
  | 312 | 315 | - Added Portuguese(Portugal) language translation to the plugin. The translation was submitted by Rúben Fernandes. |
  | 313 | 316 | - Fixed a security issue in click tracking. The issue was reported by wpscan.com. |
  | 314 | 317 | - Updated the My Affiliates, Click Tracking and Commissions menus. |
  | 315 | 318 |  |
  | 316 | 319 | = 2.8.9 = |
  | 317 | 320 | - Added an email template in the Messaging tab. |
  | 318 | 321 |  |
  | 319 | 322 | = 2.8.8 = |
  | 320 | 323 | - Fixed an issue where manual commissions could not be added when the WooCommerce product specific commission addon was active. |
  | 321 | 324 |  |
  | 322 | 325 | = 2.8.7 = |
  | 323 | 326 | - Fixed a SQL vulnerability reported by wpscan.com. |
  | 324 | 327 | - Fixed an issue where the Export Data tab was not showing active. |
  | 325 | 328 |  |
  | 326 | 329 | = 2.8.6 = |
  | 327 | 330 | - Fixed a bug in the alternative tracking method for WooCommerce. |
  | 328 | 331 |  |
  | 329 | 332 | = 2.8.5 = |
  | 330 | 333 | - Added an alternative tracking method for WooCommerce. |
  | 331 | 334 |  |
  | 332 | 335 | = 2.8.4 = |
  | 333 | 336 | - Added an option which allows using HTML in the email. |
  | 334 | 337 |  |
  | 335 | 338 | = 2.8.3 = |
  | 336 | 339 | - Added an option to enable/disable automatic deletion of WordPress user accounts. |
  | 337 | 340 |  |
  | 338 | 341 | = 2.8.2 = |
  | 339 | 342 | - Added Japanese language translation to the plugin. The translation was submitted by Makoto Koga. |
  | 340 | 343 |  |
  | 341 | 344 | = 2.8.1 = |
  | 342 | 345 | - Textarea is available as a custom field type. |
  | 343 | 346 | - Custom field display name supports up to 255 characters. |
  | 344 | 347 |  |
  | 345 | 348 | = 2.8.0 = |
  | 346 | 349 | - Fixed a country code issue on the registration form. |
  | 347 | 350 | - Updated the language files. |
  | 348 | 351 |  |
  | 349 | 352 | = 2.7.9 = |
  | 350 | 353 | - French translation improvements (contributed by Th0masL). |
  | 351 | 354 | - Made Cancel button translatable in the confirm dialogue. |
  | 352 | 355 |  |
  | 353 | 356 | = 2.7.8 = |
  | 354 | 357 | - Security related improvements to the form data. |
  | 355 | 358 |  |
  | 356 | 359 | = 2.7.7 = |
  | 357 | 360 | - Made some changes to impression tracking to fix "Cannot modify header information" warning on some sites. The fix was provided by Nathan Hadsall. |
  | 358 | 361 |  |
  | 359 | 362 | = 2.7.6 = |
  | 360 | 363 | - Made some improvements to prevent duplicate clicks. |
  | 361 | 364 |  |
  | 362 | 365 | = 2.7.5 = |
  | 363 | 366 | - Fixed some PHP 7.4 deprecated warnings. |
  | 364 | 367 | - Fixed an issue where notification emails were not sent for manually added commissions. |
  | 365 | 368 |  |
  | 366 | 369 | = 2.7.4 = |
  | 367 | 370 | - An error will now be shown when rewarding a commission if the affiliate account is not active. |
  | 368 | 371 |  |
  | 369 | 372 | = 2.7.3 = |
  | 370 | 373 | - Fixed an issue where the active navigation link was not shown correctly. |
  | 371 | 374 |  |
  | 372 | 375 | = 2.7.2 = |
  | 373 | 376 | - The plugin now updates the affiliate email when the WordPress user email is updated. |
  | 374 | 377 |  |
  | 375 | 378 | = 2.7.1 = |
  | 376 | 379 | - Added Lithuanian language translation to the plugin. The translation was submitted by Robertas Peteraitis. |
  | 377 | 380 | - Updated the simple cart integration so it works with smart checkout. |
  | 378 | 381 | - Added an option to notify the admin whenever an affiliate earns a commission. |
  | 379 | 382 |  |
  | 380 | 383 | = 2.7.0 = |
  | 381 | 384 | - Updated the integration code to make it compatible with the latest version of WooCommerce Subscriptions. |
  | 382 | 385 |  |
  | 383 | 386 | = 2.6.9 = |
  | 384 | 387 | - Exported data now contains the phone number of an affiliate. |
  | 385 | 388 |  |
  | 386 | 389 | = 2.6.8 = |
  | 387 | 390 | - Made some improvements to the affiliate registration form. |
  | 388 | 391 |  |
  | 389 | 392 | = 2.6.7 = |
  | 390 | 393 | - Made some improvements to form checks in the plugin. |
  | 391 | 394 |  |
  | 392 | 395 | = 2.6.6 = |
  | 393 | 396 | - Affiliate Registration notification email can now be sent to a different email address. |
  | 394 | 397 | - Updated the security checks in the plugin settings. |
  | 395 | 398 |  |
  | 396 | 399 | = 2.6.5 = |
  | 397 | 400 | - Added a new text area in the settings to customize the content of the affiliate homepage (shown to a user who is logged in but not an affiliate). |
  | 398 | 401 |  |
  | 399 | 402 | = 2.6.4 = |
  | 400 | 403 | - Updated the translations of some strings. |
  | 401 | 404 |  |
  | 402 | 405 | = 2.6.3 = |
  | 403 | 406 | - The plugin will now reverse an affiliate commission when the WooCommerce order associated with it is cancelled. |
  | 404 | 407 | - Added a new "Admin Functions" menu that will allow an administrator to delete clicks data. |
  | 405 | 408 |  |
  | 406 | 409 | = 2.6.2 = |
  | 407 | 410 | - Added an option to generate a payout file that can be used to pay multiple affiliates with the PayPal Payouts API. |
  | 408 | 411 | - Added an option to generate a payout file that can used to pay multiple affiliates manually. |
  | 409 | 412 | - The plugin is now compatible with WordPress 5.0. |
  | 410 | 413 |  |
  | 411 | 414 | = 2.6.1 = |
  | 412 | 415 | - Added an option that will prevent affiliates from earning a commission on their own purchases. |
  | 413 | 416 | - Fixed a bug where an affiliate's Payment Method would be shown as "Check" when no payout option was selected. |
  | 414 | 417 |  |
  | 415 | 418 | = 2.6.0 = |
  | 416 | 419 | - Fixed an issue where the affiliate "approve" button would cause an error for Italian translation. |
  | 417 | 420 | - Fixed an issue that was causing this warning on some servers: count() Parameter must be an array or an object that implements Countable in /affiliates-manager/source/Validation/ValidatorResult.php on line 7. |
  | 418 | 421 | - Added an option for affiliates to generate referral URLs from their dashboard. |
  | 419 | 422 | - Integrated LifterLMS with affiliates manager plugin: https://wpaffiliatemanager.com/affiliates-manager-lifterlms-integration/ |
  | 420 | 423 | - Integrated ActiveCampaign with affiliates manager plugin: https://wpaffiliatemanager.com/signup-affiliates-activecampaign-list/ |
  | 421 | 424 |  |
  | 422 | 425 | = 2.5.9 = |
  | 423 | 426 | - Made some CSS specific changes to improve the appearance of the "Edit Creative" interface. |
  | 424 | 427 | - Made the affiliate register fields translatable in the "Affiliate Registration" tab. |
  | 425 | 428 | - Made the country names translatable. |
  | 426 | 429 | - Fixed the "Undefined index" warning notice when saving an email address. |
  | 427 | 430 | - Fixed an issue where submitting a social security number would cause a formatting error. |
  | 428 | 431 |  |
  | 429 | 432 | = 2.5.8 = |
  | 430 | 433 | - Fixed a bug where WordPress wasn't sending an email after a new affiliate registered. |
  | 431 | 434 |  |
  | 432 | 435 | = 2.5.7 = |
  | 433 | 436 | - Made some improvements to the creative media uploader to make adding/editing an image easier. |
  | 434 | 437 | - Plugin action hooks and shortcodes are now registered as soon as the main plugin file loads. |
  | 435 | 438 | - Updated the Dutch language translation. The translation file was submitted by Mitchell van Honk. |
  | 436 | 439 | - Made all the strings in the "Messaging" tab translatable. |
  | 437 | 440 | - Fixed a bug where the user's first and last names were not getting set when a new affiliate registered. |
  | 438 | 441 |  |
  | 439 | 442 | = 2.5.6 = |
  | 440 | 443 | - Added Hungarian language translation to the plugin. The translation was submitted by Peter Nyiri. |
  | 441 | 444 | - Fixed a bug where the PayPal email address field didn't appear when both PayPal and Manual payout methods were enabled. |
  | 442 | 445 |  |
  | 443 | 446 | = 2.5.5 = |
  | 444 | 447 | - The registration form is no longer shown to an affiliate when logged in. |
  | 445 | 448 | - Made some improvements to the registration form submission process. |
  | 446 | 449 |  |
  | 447 | 450 | = 2.5.4 = |
  | 448 | 451 | - Added support for Chinese language translation. The translation file was submitted by Nicolas Laurent |
  | 449 | 452 | - Fixed a tab issue in the My Affiliates menu |
  | 450 | 453 | - Added more email tags in the plugin |
  | 451 | 454 |  |
  | 452 | 455 | = 2.5.3 = |
  | 453 | 456 | - Updated the Portuguese(Brazil), Italian and German language files |
  | 454 | 457 | - Made some improvements to the affiliate commission notification email |
  | 455 | 458 |  |
  | 456 | 459 | = 2.5.2 = |
  | 457 | 460 | - Made some improvements to the WooCommerce integration code. |
  | 458 | 461 |  |
  | 459 | 462 | = 2.5.1 = |
  | 460 | 463 | - Fixed a bug which was preventing PayPal Mass Pay from working properly. |
  | 461 | 464 |  |
  | 462 | 465 | = 2.5.0 = |
  | 463 | 466 | - Made some security related improvements. |
  | 464 | 467 |  |
  | 465 | 468 | = 2.4.9 = |
  | 466 | 469 | - Updated the WooCommerce integration code so it can correctly determine a new subscription payment. |
  | 467 | 470 | - Created a new addon to integrate AppThemes with affiliates manager plugin. See details below: |
  | 468 | 471 | https://wpaffiliatemanager.com/affiliates-manager-appthemes-integration/ |
  | 469 | 472 |  |
  | 470 | 473 | = 2.4.8 = |
  | 471 | 474 | - Added a new option to send a notification email to the affiliate immediately after earning a commission. |
  | 472 | 475 |  |
  | 473 | 476 | = 2.4.7 = |
  | 474 | 477 | - Made some improvements to the WooCommerce integration code. |
  | 475 | 478 | - Added a "Log Out" button to the affiliate dashboard. |
  | 476 | 479 |  |
  | 477 | 480 | = 2.4.6 = |
  | 478 | 481 | - Added a new option to export the affiliates data to a CSV file. |
  | 479 | 482 |  |
  | 480 | 483 | = 2.4.5 = |
  | 481 | 484 | - Mobile responsive improvements for the affiliate portal area. |
  | 482 | 485 |  |
  | 483 | 486 | = 2.4.4 = |
  | 484 | 487 | - Affiliates will now able to change the password from their dashboard. |
  | 485 | 488 |  |
  | 486 | 489 | = 2.4.3 = |
  | 487 | 490 | - Fixed a bug where the email address field would be grayed out when adding a new affiliate. |
  | 488 | 491 |  |
  | 489 | 492 | = 2.4.2 = |
  | 490 | 493 | - Changed a label in the affiliate login page from "Username" to "Email Address". |
  | 491 | 494 | - Added support for Russian language translation. The translation file was submitted by Artyom Pokatilov. |
  | 492 | 495 | - Affiliate terms and conditions are now displayed in a page instead of popup. |
  | 493 | 496 |  |
  | 494 | 497 | = 2.4.1 = |
  | 495 | 498 | - Added a function to retrieve the referrer ID via IP address. |
  | 496 | 499 | - Created a new addon to integrate MemberMouse with affiliates manager plugin. See details below: |
  | 497 | 500 | https://wpaffiliatemanager.com/affiliates-manager-membermouse-plugin-integration/ |
  | 498 | 501 |  |
  | 499 | 502 | = 2.4.0 = |
  | 500 | 503 | - Fixed a bug where the login page could redirect to a 404 page when the affiliate homepage URL is customized |
  | 501 | 504 |  |
  | 502 | 505 | = 2.3.9 = |
  | 503 | 506 | - Fixed some typos and updated all the language files. |
  | 504 | 507 |  |
  | 505 | 508 | = 2.3.8 = |
  | 506 | 509 | - Affiliate home page and registration page URLs can now be configured in the settings. |
  | 507 | 510 |  |
  | 508 | 511 | = 2.3.7 = |
  | 509 | 512 | - Added a new column to the commissions table to save the email address of the buyer. All future transactions will capture the email address of the buyer. |
  | 510 | 513 |  |
  | 511 | 514 | = 2.3.6 = |
  | 512 | 515 | - Click Tracking menu now shows the IP Address of the user. |
  | 513 | 516 | - Created a new addon to integrate AWeber with affiliates manager plugin. See details below: |
  | 514 | 517 | https://wpaffiliatemanager.com/signup-affiliates-aweber-list/ |
  | 515 | 518 |  |
  | 516 | 519 | = 2.3.5 = |
  | 517 | 520 | - Fixed a bug where the customised Landing Page URL did not appear in the affiliate creative code. |
  | 518 | 521 | - Creative URLs in the menu are now properly escaped. |
  | 519 | 522 | - Added support for Czech language translation. The translation file was submitted by Valli Katzl. |
  | 520 | 523 |  |
  | 521 | 524 | = 2.3.4 = |
  | 522 | 525 | - Replaced deprecated function call wp\_get\_single\_post() with get\_post(). |
  | 523 | 526 | - Replaced deprecated function call get\_userdatabylogin() with get\_user\_by(). |
  | 524 | 527 |  |
  | 525 | 528 | = 2.3.3 = |
  | 526 | 529 | - Click Tracking menu now supports the bulk delete option. |
  | 527 | 530 |  |
  | 528 | 531 | = 2.3.2 = |
  | 529 | 532 | - Made some security related improvements to the affiliates menu. |
  | 530 | 533 |  |
  | 531 | 534 | = 2.3.1 = |
  | 532 | 535 | - Updated the link to the PayPal Mass Pay documentation. |
  | 533 | 536 | - Payment settings link for PayPal Mass Pay configurations now goes to the payment tab. |
  | 534 | 537 |  |
  | 535 | 538 | = 2.3.0 = |
  | 536 | 539 | - Added "Manual Transfer" as an available payment method. |
  | 537 | 540 | - Replaced deprecated function call get\_currentuserinfo() with wp\_get\_current\_user(). |
  | 538 | 541 | - Updated the default terms and conditions. |
  | 539 | 542 |  |
  | 540 | 543 | = 2.2.9 = |
  | 541 | 544 | - Impression tracking will now be disabled by default. |
  | 542 | 545 | - Changed the deprecated 'add\_object\_page' call to 'add\_menu\_page' for creating a top-level menu page. |
  | 543 | 546 |  |
  | 544 | 547 | = 2.2.8 = |
  | 545 | 548 | - Added translation option for the commission rate summary. |
  | 546 | 549 | - Made some modifications to the transaction table so it can record large commission amount. |
  | 547 | 550 |  |
  | 548 | 551 | = 2.2.7 = |
  | 549 | 552 | - Fixed a bug in the French translation file that was causing errors in the manual affiliate approval screen. |
  | 550 | 553 | - Affiliates Manager is now compatible with WordPress 4.5. |
  | 551 | 554 |  |
  | 552 | 555 | = 2.2.6 = |
  | 553 | 556 | - Fixed an issue that was preventing affiliates manager from submitting mass payment due to invalid security header. |
  | 554 | 557 |  |
  | 555 | 558 | = 2.2.5 = |
  | 556 | 559 | - Fixed an issue that was preventing affiliates manager from creating new affiliates during WooCommerce checkout. |
  | 557 | 560 |  |
  | 558 | 561 | = 2.2.4 = |
  | 559 | 562 | - Fixed an issue that was preventing affiliates manager from saving cookies on some servers. |
  | 560 | 563 | - Optimized the code to render click tracking, commissions and affiliates data with minimal server resources. |
  | 561 | 564 |  |
  | 562 | 565 | = 2.2.3 = |
  | 563 | 566 | - Default Landing Page URL can now be customized in the advanced settings. |
  | 564 | 567 |  |
  | 565 | 568 | = 2.2.2 = |
  | 566 | 569 | - Affiliates Manager no longer sets any locale information in the system on which PHP is running. |
  | 567 | 570 | - Added some debug data in the function that submits PayPal Mass payments. |
  | 568 | 571 |  |
  | 569 | 572 | = 2.2.1 = |
  | 570 | 573 | - Gravatar image on the login page no longer shows security warning when rendered on a https site. |
  | 571 | 574 | - Fixed an issue where redeclaration of function formatType() was causing a fatal error on some servers. |
  | 572 | 575 |  |
  | 573 | 576 | = 2.2.0 = |
  | 574 | 577 | - Added en\_US language translation file. |
  | 575 | 578 |  |
  | 576 | 579 | = 2.1.9 = |
  | 577 | 580 | - Add a new role "affiliate" during activation. |
  | 578 | 581 | - Affiliates Manager is now compatible with WordPress Multisite. |
  | 579 | 582 |  |
  | 580 | 583 | = 2.1.8 = |
  | 581 | 584 | - UTF-8 is now set as the default encoding in the htmlentities function. |
  | 582 | 585 | - Affiliates Manager is now compatible with WordPress 4.4. |
  | 583 | 586 |  |
  | 584 | 587 | = 2.1.7 = |
  | 585 | 588 | - Updated the translatable strings to make the plugin compatible with language packs. |
  | 586 | 589 |  |
  | 587 | 590 | = 2.1.6 = |
  | 588 | 591 | - Updated the spanish language translation file. |
  | 589 | 592 | - Added a new menu to show all affiliate commissions. |
  | 590 | 593 | - Added a new option to manually award commissions to your affiliates. |
  | 591 | 594 |  |
  | 592 | 595 | = 2.1.5 = |
  | 593 | 596 | - fixed a bug so jQuery ui loads correctly when the language is not set in English. |
  | 594 | 597 | - Added a new option to prevent zero amount commission from being recorded. |
  | 595 | 598 | - Updated the pot file in the plugin. |
  | 596 | 599 |  |
  | 597 | 600 | = 2.1.4 = |
  | 598 | 601 | - Updated Spanish language translation in the plugin. The translation file was submitted by Manuel Ballesta Ruiz. |
  | 599 | 602 | - Added a new filter and addon to award product specific commission for WooCommerce products. |
  | 600 | 603 | https://wpaffiliatemanager.com/product-specific-affiliate-commission-for-woocommerce-products/ |
  | 601 | 604 |  |
  | 602 | 605 | = 2.1.3 = |
  | 603 | 606 | - Updated the pot file in the plugin. |
  | 604 | 607 |  |
  | 605 | 608 | = 2.1.2 = |
  | 606 | 609 | - Plugin now logs information when a registration email is sent to an affiliate |
  | 607 | 610 | - Added a new hook to award commission from an external plugin/extension. |
  | 608 | 611 |  |
  | 609 | 612 | = 2.1.1 = |
  | 610 | 613 | - Plugin can now reverse commission for a refunded WooCommerce order |
  | 611 | 614 |  |
  | 612 | 615 | = 2.1.0 = |
  | 613 | 616 | - Fixed a bug where saving an option in the settings was adding slashes |
  | 614 | 617 |  |
  | 615 | 618 | = 2.0.9 = |
  | 616 | 619 | - Fixed some warning notices in the plugin |
  | 617 | 620 |  |
  | 618 | 621 | = 2.0.8 = |
  | 619 | 622 | - Changed the structure of affiliate links generated by the plugin |
  | 620 | 623 | - Made some improvements to the statistics menu of affiliate dashboard |
  | 621 | 624 | - Fixed an issue where affiliate statistics (visits and purchases) were not showing in the admin menu |
  | 622 | 625 |  |
  | 623 | 626 | = 2.0.7 = |
  | 624 | 627 | - Fixed an issue with commission not getting recorded sometimes |
  | 625 | 628 |  |
  | 626 | 629 | = 2.0.6 = |
  | 627 | 630 | - Changed the default affiliate link in the plugin |
  | 628 | 631 | - Changed some labels in the settings ("AID" to "Affiliate ID" and "Tracking ID" to "Row ID") |
  | 629 | 632 | - Clicks can now be recorded using the new tracking system |
  | 630 | 633 |  |
  | 631 | 634 | = 2.0.5 = |
  | 632 | 635 | - Made some improvements to the Easy Digital Downloads & Simple Shopping Cart tracking options |
  | 633 | 636 |  |
  | 634 | 637 | = 2.0.4 = |
  | 635 | 638 | - Made some improvements to the WooCommerce order tracking option |
  | 636 | 639 | - Fixed an issue with the commission awarding date |
  | 637 | 640 |  |
  | 638 | 641 | = 2.0.3 = |
  | 639 | 642 | - Made some improvements to the click tracking function |
  | 640 | 643 | - Added "Remember Me" checkbox to the affiliate login form |
  | 641 | 644 | - Added "Lost Password" link to the login page |
  | 642 | 645 |  |
  | 643 | 646 | = 2.0.2 = |
  | 644 | 647 | - Made some improvements to the commission awarding function |
  | 645 | 648 |  |
  | 646 | 649 | = 2.0.1 = |
  | 647 | 650 | - Updated German language translation in the plugin. The translation file was submitted by Anne Ebert. |
  | 648 | 651 | - Updated Hebrew language translation in the plugin. The translation file was submitted by Ido Yitzhaki. |
  | 649 | 652 |  |
  | 650 | 653 | = 1.9.9 = |
  | 651 | 654 | - Fixed the "undefined required" error in the general settings. |
  | 652 | 655 |  |
  | 653 | 656 | = 1.9.8 = |
  | 654 | 657 | - Added a fix to make sure the Store Affiliates page renders correctly |
  | 655 | 658 |  |
  | 656 | 659 | = 1.9.7 = |
  | 657 | 660 | - Affiliate Homepage content can now be customized in the settings (Affiliates->Settings->Affiliate Registration). |
  | 658 | 661 | - "Terms and Conditions" section is now available under "Affiliate Registration" tab. |
  | 659 | 662 |  |
  | 660 | 663 | = 1.9.6 = |
  | 661 | 664 | - Added Polish language translation to the plugin. The translation file was submitted by Krzysztof Gorecki. |
  | 662 | 665 | - Added an addons menu to list all the extenstions and addons of this plugin. |
  | 663 | 666 |  |
  | 664 | 667 | = 1.9.5 = |
  | 665 | 668 | - Added a new filter and addon to award commission via WooCommerce Coupon. |
  | 666 | 669 | https://wpaffiliatemanager.com/tracking-affiliate-commission-using-woocommerce-coupons-or-discount-codes/ |
  | 667 | 670 |  |
  | 668 | 671 | = 1.9.4 = |
  | 669 | 672 | - An admin notice has been hidden since affiliates manager no longer loads currency from WPLANG settings. |
  | 670 | 673 |  |
  | 671 | 674 | = 1.9.3 = |
  | 672 | 675 | - Fixed a bug in the Easy Digital Downloads plugin integration. |
  | 673 | 676 |  |
  | 674 | 677 | = 1.9.2 = |
  | 675 | 678 | - Fixed the registration form translation issue. |
  | 676 | 679 |  |
  | 677 | 680 | = 1.9.1 = |
  | 678 | 681 | - Added some debug messages for Easy Digital Downloads plugin integration |
  | 679 | 682 |  |
  | 680 | 683 | = 1.9.0 = |
  | 681 | 684 | - Fixed an issue where logged-in users would be able to create affiliate accounts with different email addresses. |
  | 682 | 685 | - Added a new filter in the registration form to print content before the submit button. |
  | 683 | 686 | - Added a new filter in the registration form to run additional validation code upon submission. |
  | 684 | 687 |  |
  | 685 | 688 | = 1.8.9 = |
  | 686 | 689 | - Added a function to log array in the DebugLogger file. |
  | 687 | 690 | - Auto WooCommerce Affiliate Account Creation Addon: Address details of the affiliate will now be populated when a new WooCommerce user is created. |
  | 688 | 691 |  |
  | 689 | 692 | = 1.8.8 = |
  | 690 | 693 | - Added a function to create a new affiliate account. |
  | 691 | 694 | - Created a new addon to automatically create affiliate accounts for your WooCommerce users. See details below: |
  | 692 | 695 | https://wpaffiliatemanager.com/automatically-create-affiliate-account-woocommerce-customers/ |
  | 693 | 696 |  |
  | 694 | 697 | = 1.8.7 = |
  | 695 | 698 | - Fixed a bug where a new affiliate account could not be manually approved from the affiliates menu. |
  | 696 | 699 |  |
  | 697 | 700 | = 1.8.6 = |
  | 698 | 701 | - Deleting an affiliate record will also delete the WordPress user account associated with it. |
  | 699 | 702 |  |
  | 700 | 703 | = 1.8.5 = |
  | 701 | 704 | - Updated some text in the affiliate terms and conditions settings. |
  | 702 | 705 | - Made some improvements to the "My Affiliates" interface on the admin side |
  | 703 | 706 | - An affiliate record can now be deleted from the admin |
  | 704 | 707 |  |
  | 705 | 708 | = 1.8.4 = |
  | 706 | 709 | - Fixed a bug where Tracking IDs were not showing in the click tracking menu. |
  | 707 | 710 |  |
  | 708 | 711 | = 1.8.3 = |
  | 709 | 712 | - Created a new addon to integrate S2Member with affilates manager plugin. See details below: |
  | 710 | 713 | https://wpaffiliatemanager.com/affiliates-manager-s2member-integration/ |
  | 711 | 714 | - Added a new menu to show affiliate click throughs. |
  | 712 | 715 |  |
  | 713 | 716 | = 1.8.2 = |
  | 714 | 717 | - Fixed some jQuery ui display issues in the admin side of the plugin for WordPress 4.1. |
  | 715 | 718 |  |
  | 716 | 719 | = 1.8.1 = |
  | 717 | 720 | - Default affiliate links are now displayed in the affiliate's dashboard. This will be available even if you haven't configured any creative. |
  | 718 | 721 |  |
  | 719 | 722 | = 1.8.0 = |
  | 720 | 723 | - Made some improvements so the available payment methods (PayPal or Cheque) are shown correctly to the affiliate. |
  | 721 | 724 | - Made an enhancement so if you are logging in using the affiliate login form, only then you will be redirected to the affiliates home page upon successful login. |
  | 722 | 725 |  |
  | 723 | 726 | = 1.7.9 = |
  | 724 | 727 | - Fixed a bug in the WooCommerce integration where the plugin was awarding commission for "Pending" state. Now commission is only awarded when an order is set to "processing" or "completed" state. |
  | 725 | 728 | - Moved the 3rd party integration hooks into the plugin constructor. |
  | 726 | 729 | - Created a new function to define all the constants for this plugin. |
  | 727 | 730 |  |
  | 728 | 731 | = 1.7.8 = |
  | 729 | 732 | - The style and design of the affiliate area has been improved significantly. |
  | 730 | 733 | - MySQL database character set and collation values are read from the system when creating the tables. |
  | 731 | 734 | - WooCommerce Integration: shipping and tax are now excluded from the total order amount. |
  | 732 | 735 | - Affiliate URL/link can now be invoked using email address or affiliate ID. |
  | 733 | 736 |  |
  | 734 | 737 | = 1.7.7 = |
  | 735 | 738 | - Added a new feature to allow tracking of ad impressions. This feature was added by Element Green. |
  | 736 | 739 | - fixed a bug where default creative link was not showing correctly. |
  | 737 | 740 | - Made some small improvements to the creatives menu. |
  | 738 | 741 |  |
  | 739 | 742 | = 1.7.6 = |
  | 740 | 743 | - Created a new addon to integrate paid membership pro with affilates manager plugin. See details below: |
  | 741 | 744 | https://wpaffiliatemanager.com/affiliates-manager-paid-memberships-pro-integration/ |
  | 742 | 745 | - Created a new addon to integrate sell digital downloads with affilates manager plugin. See details below: |
  | 743 | 746 | https://wpaffiliatemanager.com/affiliates-manager-sell-digital-downloads-integration/ |
  | 744 | 747 | - The plugin will now add a default creative during installation. |
  | 745 | 748 | - Added a "Log out" link in the affiliate login page of the plugin. |
  | 746 | 749 | - Added British English translation to the plugin. The translation file was submitted by John. |
  | 747 | 750 |  |
  | 748 | 751 | = 1.7.5 = |
  | 749 | 752 | - Added a new option to the settings to specify "currency code". |
  | 750 | 753 | - Created a new addon to integrate the MailPoet newsletter with affilates manager plugin. See details here: |
  | 751 | 754 | https://wpaffiliatemanager.com/sign-affiliates-to-mailpoet-list/ |
  | 752 | 755 |  |
  | 753 | 756 | = 1.7.4 = |
  | 754 | 757 | - Added Icelandic language translation to the plugin. The translation was submitted by Bjarni K. Thors. |
  | 755 | 758 | - Affiliate login page is now automatically created for you when you install the plugin. |
  | 756 | 759 |  |
  | 757 | 760 | = 1.7.3 = |
  | 758 | 761 | - Added a new action hook to accommodate the mailchimp signup of your affiliates. |
  | 759 | 762 |  |
  | 760 | 763 | = 1.7.2 = |
  | 761 | 764 | - Body of e-mail sent to a newly registered affiliate (once their application is approved) can now be customized in the "Messaging" settings. |
  | 762 | 765 |  |
  | 763 | 766 | = 1.7.1 = |
  | 764 | 767 | - Made enhancements to the "add affiliate" button in the admin area. |
  | 765 | 768 | - Made some enhancements to the money formatting function. |
  | 766 | 769 | - Converted the settings menu tab links to WordPress style tabs. |
  | 767 | 770 |  |
  | 768 | 771 | = 1.7.0 = |
  | 769 | 772 | - Added a new option to set currency symbol in the settings. |
  | 770 | 773 | - Changed the creative status to be active by default when they are created. |
  | 771 | 774 | - Added a new action hook that is triggered after affiliates submit the registration form. |
  | 772 | 775 | - Added integration with jigoshop e-commerce plugin. |
  | 773 | 776 |  |
  | 774 | 777 | = 1.6.9 = |
  | 775 | 778 | - Fixed a minor bug with WooCommerce commission tracking |
  | 776 | 779 | - Added debug logging option |
  | 777 | 780 | - Simple shopping cart tracking option added. |
  | 778 | 781 |  |
  | 779 | 782 | = 1.6.8 = |
  | 780 | 783 | - First commit to wp repository |
  | 781 | 784 |  |
  | 782 | 785 | == Upgrade Notice == |
  | 783 | 786 | None |
  | 784 | 787 |  |
  | 785 | 788 | == Arbitrary section == |
  | 786 | 789 | None |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3028484&old=3015278&new_path=%2Faffiliates-manager%2Ftrunk&old_path=%2Faffiliates-manager%2Ftrunk)
* [Zip Archive](?format=zip&new=3028484&old=3015278&new_path=%2Faffiliates-manager%2Ftrunk&old_path=%2Faffiliates-manager%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_693c2d52_20250115_094513.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Affiliates Manager <= 2.9.34 - Cross-Site Request Forgery

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Affiliates Manager <= 2.9.34 - Cross-Site Request Forgery

4.3

**Cross-Site Request Forgery (CSRF)**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N)

| CVE | [CVE-2024-0859](https://www.cve.org/CVERecord?id=CVE-2024-0859) |
| --- | --- |
| CVSS | 4.3 (Medium) |
| Publicly Published | January 30, 2024 |
| Last Updated | February 5, 2024 |
| Researcher | [Nathan (calysteon)](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/0x4n3) |

### Description

The Affiliates Manager plugin for WordPress is vulnerable to Cross-Site Request Forgery in all versions up to, and including, 2.9.34. This is due to missing or incorrect nonce validation on the process\_bulk\_action function in ListAffiliatesTable.php. This makes it possible for unauthenticated attackers to delete affiliates via a forged request granted they can trick a site administrator into performing an action such as clicking on a link.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/affiliates-manager/trunk/classes/ListAffiliatesTable.php)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3028484/affiliates-manager/trunk?contextall=1&old=3015278&old_path=%2Faffiliates-manager%2Ftrunk)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Faffiliates-manager%2Faffiliates-manager-2934-cross-site-request-forgery&t=Affiliates%20Manager%20%3C%3D%202.9.34%20-%20Cross-Site%20Request%20Forgery "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Faffiliates-manager%2Faffiliates-manager-2934-cross-site-request-forgery&text=Affiliates%20Manager%20%3C%3D%202.9.34%20-%20Cross-Site%20Request%20Forgery "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Faffiliates-manager%2Faffiliates-manager-2934-cross-site-request-forgery "LinkedIn")
Email

## Vulnerability Details for Affiliates Manager

#### [Affiliates Manager](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/affiliates-manager)

| Software Type | Plugin |
| --- | --- |
| Software Slug | affiliates-manager [(view on wordpress.org)](https://wordpress.org/plugins/affiliates-manager) |
| Patched? | Yes |
| Remediation | Update to version 2.9.35, or a newer patched version |
| Affected Version | * <= 2.9.34 |
| Patched Version | * 2.9.35 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation


