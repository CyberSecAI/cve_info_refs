=== Content from bugzilla.mozilla.org_945b640d_20250124_165044.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/209742)
* [XML](/show_bug.cgi?ctype=xml&id=209742)

Closed
[Bug 209742](/show_bug.cgi?id=209742)

Opened 22 years ago
Closed 21 years ago

# describecomponents.cgi displays products for which the user can't enter bugs

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

describecomponents.cgi displays products for which the user can't enter bugs

## Categories

### (Bugzilla :: Bugzilla-General, defect)

[Product:](/describecomponents.cgi?product=Bugzilla)

Bugzilla
▾

Bugzilla
The [Bugzilla](http://www.bugzilla.org) bug-tracking system.

**Note:** This is **not** the place to request configuration, permission, or account changes to this installation of Bugzilla (bugzilla.mozilla.org). File such changes under the appropriate component in the [**bugzilla.mozilla.org**](enter_bug.cgi?product=bugzilla.mozilla.org) product.
[See Open Bugs in This Product](/buglist.cgi?product=Bugzilla&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Bugzilla)
Watch This Product

[Component:](/describecomponents.cgi?product=Bugzilla&component=Bugzilla-General#Bugzilla-General)

Bugzilla-General
▾

Bugzilla :: Bugzilla-General
Anything that doesn't fit in the other components, or spans multiple components.
[See Open Bugs in This Component](/buglist.cgi?product=Bugzilla&component=Bugzilla-General&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Bugzilla&component=Bugzilla-General&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Bugzilla&component=Bugzilla-General)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

Bugzilla 2.18

## People

### (Reporter: ryan, Assigned: ryan)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/38b2dd1899d5377927c936d0379a182d?d=mm&size=40)  [ryan](/user_profile?user_id=34608)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

![](https://secure.gravatar.com/avatar/9df24a05a7e63cf07e49d30ddfeee31a?d=mm&size=40)  [default-qa](/user_profile?user_id=5086)

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/38b2dd1899d5377927c936d0379a182d?d=mm&size=40)  [ryan](/user_profile?user_id=34608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

---

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

6 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[bz-2.17.5](/show_bug.cgi?id=212878 "RESOLVED FIXED - Bugzilla 2.17.5")

Dependency [tree](/showdependencytree.cgi?id=209742&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=209742)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Whiteboard: [fixed in 2.17.5])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

---

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[fixed in 2.17.5]

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [justdave](/user_profile?user_id=10297) | [approval](#c11 "21 years ago") | + |
| --- | --- | --- |
| [justdave](/user_profile?user_id=10297) | approval | + |
| --- | --- | --- |
|  | approval5.0 | ? |
| --- | --- | --- |
|  | approval5.2 | ? |
|  | approval6.0 | ? |
|  | blocking5.0.4.1 | ? |
|  | blocking5.2 | ? |
|  | blocking6.0 | ? |
|  | approval4.4 | ? |
|  | blocking4.4.14 | ? |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | documentation | ? + - |
|  | testcase |  | | |
|  | relnote |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [check CanEnterProduct() if AnyEntryGroups() is true](/attachment.cgi?id=125885)  [22 years ago](#c2)  [Ryan Cleary](/user_profile?user_id=34608)   459 bytes, patch | bugreport : [review+](#c4 "22 years ago")  bbaetz : [review+](#c8 "22 years ago") | [Details](/attachment.cgi?id=125885&action=edit) | [Diff](/attachment.cgi?id=125885&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=209742&attachment=125885) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Ryan Cleary](/user_profile?user_id=34608)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=209742#c0)• 22 years ago |
|  | |

User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.3) Gecko/20030312
Build Identifier: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.3) Gecko/20030312
describecomponents.cgi uses AnyDefaultGroups() to determine whether to check
CanEnterProducts() before showing the list of available products. If all
products are configured with Mandatory/Mandatory group controls,
AnyDefaultGroups() returns false, and the user is given a list of all products,
even ones they're not supposed to see.
I think describecomponents.cgi should use AnyEntryGroups() instead, so that
whenever bug entry groups are in use, only the products for which a user can
enter bugs are displayed (which is how I interpret the desired behavior from bug
185505).
Reproducible: Always
Steps to Reproduce:
1.
2.
3.

|  | [timeless](/user_profile?user_id=15223) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=209742#c1)• 22 years ago |
|  | |

but what if the user is cc'd to some bug in some other product, and then wants a
description of the components in that product?Summary: describecomponents.cgi displays products for which the user can't enter bugs → describecomponents.cgi displays products for which the user can't enter bugs

|  | [Ryan Cleary](/user_profile?user_id=34608)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=209742#c2)• 22 years ago |
|  | |

Attached patch

[check CanEnterProduct() if AnyEntryGroups() is true](attachment.cgi?id=125885&action=diff)
— [Details](attachment.cgi?id=125885&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=209742&attachment=125885)

|  | [Ryan Cleary](/user_profile?user_id=34608)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=209742#c3)• 22 years ago |
|  | |

I was only considering under what conditions describecomponents.cgi does the
CanEnterProduct() loop for displaying a list of produts, not what test(s)
determine whether the product is displayed.
If the user doesn't meet the CanEnterProduct() criteria, describecomponent.cgi
won't show him the components anyway (lines 90-92). Should that be changed?

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=209742#a23491_10297)• 22 years ago |

Group: webtools-securityStatus: UNCONFIRMED → NEWEver confirmed: trueTarget Milestone: --- → Bugzilla 2.18

|  | [Joel Peshkin](/user_profile?user_id=40200) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=209742#c4)• 22 years ago |
|  | |

Comment on [attachment 125885](/attachment.cgi?id=125885 "check CanEnterProduct() if AnyEntryGroups() is true") [[details]](/attachment.cgi?id=125885&action=edit "check CanEnterProduct() if AnyEntryGroups() is true") [[diff]](/attachment.cgi?id=125885&action=diff "check CanEnterProduct() if AnyEntryGroups() is true") [[review]](/page.cgi?id=splinter.html&ignore=&bug=209742&attachment=125885)
check CanEnterProduct() if AnyEntryGroups() is true
r=joel
Being a security thing, I would like to see a 2xr on this and confirmation
from the reporting site that it fixes the original problem.
The issue in [comment 1](/show_bug.cgi?id=209742#c1 "RESOLVED FIXED - describecomponents.cgi displays products for which the user can't enter bugs") is a distinct issue. In all the query forms and
decribecomponents, bugzilla has always used the product groups instead of
searching for any bug that is visible. If that is something we wnt to change,
that would be a distinct bug.
[Attachment #125885](/attachment.cgi?id=125885&action=edit "check CanEnterProduct() if AnyEntryGroups() is true") -
Flags: review+

|  | [Ryan Cleary](/user_profile?user_id=34608)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=209742#c5)• 22 years ago |
|  | |

Re: [comment 4](/show_bug.cgi?id=209742#c4 "RESOLVED FIXED - describecomponents.cgi displays products for which the user can't enter bugs")
As far as I can tell, with my patch describecomponents.cgi only displays the
components of (or, with the additional fix below, acknowledges the existence of)
products that the user should be able to access.
I'm also going a step further, and throwing the "invalid bug" error whether the
bug is invalid or off-limits:
@@ -88,8 +88,12 @@
}
# Make sure the user is authorized to access this product.
+# If user is not authorized, give same error as if product
+# is invalid (as mentioned in preceeding comment).
CanEnterProduct($product)
- || ThrowUserError("product\_access\_denied");
+# || ThrowUserError("product\_access\_denied");
+ || ThrowUserError("invalid\_product\_name",
+ { product => $product });
######################################################################
# End Data/Security Validation
but i appreciate that this could be a decision for the admin.

|  | [Gervase Markham [:gerv]](/user_profile?user_id=9911) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=209742#c6)• 22 years ago |
|  | |

describecomponents.cgi should, IMO, display a list of exactly all products which
the user might be aware of legally through other means. This means products they
can view, and products they can enter bugs on.
I'm confused - is that what it does now, or not?
Gerv

|  | [Joel Peshkin](/user_profile?user_id=40200) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=209742#c7)• 22 years ago |
|  | |

The bug is that there are conditions (specifically when the group controls are
mandatory and there are no default groups) where that is not true.
This patch makes that statement true.
[Comment 1](/show_bug.cgi?id=209742#c1 "RESOLVED FIXED - describecomponents.cgi displays products for which the user can't enter bugs") suggests that we might take this one step further.

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=209742#a2600322_10297)• 22 years ago |

[Attachment #125885](/attachment.cgi?id=125885&action=edit "check CanEnterProduct() if AnyEntryGroups() is true") -
Flags: review?(bbaetz)

|  | [Bradley Baetz (:bbaetz)](/user_profile?user_id=29274) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=209742#c8)• 22 years ago |
|  | |

Comment on [attachment 125885](/attachment.cgi?id=125885 "check CanEnterProduct() if AnyEntryGroups() is true") [[details]](/attachment.cgi?id=125885&action=edit "check CanEnterProduct() if AnyEntryGroups() is true") [[diff]](/attachment.cgi?id=125885&action=diff "check CanEnterProduct() if AnyEntryGroups() is true") [[review]](/page.cgi?id=splinter.html&ignore=&bug=209742&attachment=125885)
check CanEnterProduct() if AnyEntryGroups() is true
r=bbaetz, and ISTR we have a separate bug on [comment #1](/show_bug.cgi?id=209742#c1 "RESOLVED FIXED - describecomponents.cgi displays products for which the user can't enter bugs").
[Attachment #125885](/attachment.cgi?id=125885&action=edit "check CanEnterProduct() if AnyEntryGroups() is true") -
Flags: review?(bbaetz)

|  | [Bradley Baetz (:bbaetz)](/user_profile?user_id=29274) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=209742#c9)• 22 years ago |
|  | |

Comment on [attachment 125885](/attachment.cgi?id=125885 "check CanEnterProduct() if AnyEntryGroups() is true") [[details]](/attachment.cgi?id=125885&action=edit "check CanEnterProduct() if AnyEntryGroups() is true") [[diff]](/attachment.cgi?id=125885&action=diff "check CanEnterProduct() if AnyEntryGroups() is true") [[review]](/page.cgi?id=splinter.html&ignore=&bug=209742&attachment=125885)
check CanEnterProduct() if AnyEntryGroups() is true
r=bbaetz, and ISTR we have a separate bug on [comment #1](/show_bug.cgi?id=209742#c1 "RESOLVED FIXED - describecomponents.cgi displays products for which the user can't enter bugs").

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=209742#a2719471_10297)• 22 years ago |

Flags: approval+

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=209742#c10)• 22 years ago |
|  | |

er, hold that thought. forgot this was a security bug... we'll hold this till
we're ready to go on the release before we check it in.
I'm correct in thinking this has to do with the new groups architecture and so
it doesn't apply to the 2.16 branch, right?Flags: approval+ → approval?Whiteboard: [wanted for 2.17.5]

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=209742#a5912091_10297)• 21 years ago |

Blocks: [bz-2.17.5](/show_bug.cgi?id=212878 "RESOLVED FIXED - Bugzilla 2.17.5")

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=209742#a10359752_10297)• 21 years ago |

Whiteboard: [wanted for 2.17.5] → [ready for 2.17.5]

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=209742#a11227411_10297)• 21 years ago |

Flags: approval?

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=209742#c11)• 21 years ago |
|  | |

-> Patch authorAssignee: justdave → tryancFlags: approval+Whiteboard: [ready for 2.17.5] → [fixed in 2.17.5]

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=209742#c12)• 21 years ago |
|  | |

Checking in describecomponents.cgi;
/cvsroot/mozilla/webtools/bugzilla/describecomponents.cgi,v <--
describecomponents.cgi
new revision: 1.23; previous revision: 1.22
done
Status: NEW → RESOLVEDClosed: 21 years agoResolution: --- → FIXED

|  | [Dave Miller [:justdave]](/user_profile?user_id=10297) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=209742#c13)• 21 years ago |
|  | |

Security advisory has been posted.Group: webtools-security

|  | [Nobody; OK to take it and work on it](/user_profile?user_id=1) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=209742#a299972531_1)• 12 years ago |

QA Contact: matty\_is\_a\_geek → default-qa
You need to [log in](/show_bug.cgi?id=209742&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Ryan Cleary](/user_profile?user_id=34608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


