=== Content from bugs.freedesktop.org_f46861b3_20250125_170545.html ===


Bugzilla – Bug 89207
Strictly validate info destined for config files
Last modified: 2016-04-14 08:05:01 UTC

* [Home](./)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

[**Bug 89207**](show_bug.cgi?id=89207)
- Strictly validate info destined for config files

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
Strictly validate info destined for config files

| | [Status](page.cgi?id=fields.html#bug_status): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components.") | realmd | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Unclassified | | [Component:](describecomponents.cgi?product=realmd "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | realmd ([show other bugs](buglist.cgi?component=realmd&product=realmd&bug_status=__open__)) | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Other All | |  | | | [Importance](page.cgi?id=fields.html#importance): | medium normal | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Stef Walter | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | yelley | |  | | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2015-02-18 14:38 UTC by Stef Walter | | --- | --- | | Modified: | 2016-04-14 08:05 UTC ([History](show_activity.cgi?id=89207)) | | CC List: | 0 users | |  | | | [See Also:](page.cgi?id=fields.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [i915 platform:](page.cgi?id=fields.html#cf_i915_platform "Intel platforms affected by the bug") |  | | [i915 features:](page.cgi?id=fields.html#cf_i915_features "Features of the i915 driver affected by the bug.") |  | |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | |  | | |  |
| --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=89207#c0)  Stef Walter    2015-02-18 14:38:02 UTC  ``` realmd configures sssd.conf and smb.conf. No data that was retrieved before join (and the point where mutual trust, sealing is established) should be used when configuring sssd.conf and/or smb.conf.  Such data should be retrieved again. I need to check exactly which fields this affects. ```  [Comment 1](show_bug.cgi?id=89207#c1)  Stef Walter    2015-04-14 09:25:34 UTC  ``` After discussing this further, due to the mutual trust inherent in the keytab, we need to make sure that the configuration fields do not contain invalid characters, and are properly parseable. We'll do this in two ways, restricting input from LDAP, and cleaning output to sssd.conf. ```  [Comment 2](show_bug.cgi?id=89207#c2)  Stef Walter    2015-04-14 09:30:02 UTC  ``` Values output to samba.conf and sssd.conf is already clean of newlines, which are the problematic character here. ```  [Comment 3](show_bug.cgi?id=89207#c3)  Stef Walter    2015-04-14 09:45:20 UTC  ``` Fixed with these commits:  commit 6d5ac47cc22c273a55bea89dffbe537a3c86ad2c Author: Stef Walter <stefw@redhat.com> Date:   Tue Apr 14 11:30:53 2015 +0200      service: Limit the characters we read from LDAP          We strictly limit this to characters expected in domain names.  commit 502980a8a17eddb5fe3d16bcad229a6d0ba11065 Author: Stef Walter <stefw@redhat.com> Date:   Sat Apr 11 13:29:40 2015 +0200      service: Only accept specific characters when parsing MSCLDAP response          This provides an extra layer of protection against injecting     odd characters into configuration files. ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=89207)
* - Top of page

* + [Home](./)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

Use of freedesktop.org services, including Bugzilla, is subject to our [Code of Conduct](https://www.freedesktop.org/wiki/CodeOfConduct/). How we collect and use information is described in our [Privacy Policy](https://www.freedesktop.org/wiki/PrivacyPolicy).


