=== Content from review.openstack.org_2d516c26_20250125_002024.html ===




=== Content from bugzilla.redhat.com_1f2b1dad_20250125_002023.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1205313)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1205313)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1205313)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1205313

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1205313**](show_bug.cgi?id=1205313)
(CVE-2015-2687)
- [CVE-2015-2687](https://access.redhat.com/security/cve/CVE-2015-2687) openstack-nova: information leak when live-migration failed

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2015-2687 openstack-nova: information leak when live-migration failed

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2015-2687 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | low | | [Severity:](page.cgi?id=fields.html#bug_severity) | low | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1205314](show_bug.cgi?id=1205314 "CLOSED EOL - CVE-2015-2687 openstack-nova: information leak when live-migration failed [fedora-all]") [1205315](show_bug.cgi?id=1205315) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1205318](show_bug.cgi?id=1205318) | | TreeView+ | [depends on](buglist.cgi?bug_id=1205313&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1205313&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2015-03-24 16:36 UTC by Vasyl Kaigorodov | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-10-20 10:50 UTC ([History](show_activity.cgi?id=1205313)) | | [CC List:](page.cgi?id=fields.html#cclist) | 33 users (show)  abaron akscram alexander.sakhnov apevec apevec berrange bfilippov carnil chrisw dallan dasmith davidx eglynn gkotton gmollett itamar jonathansteffan jose.castro.leon kchamart lhh lpeer markmc mlvov mmagr p rbryant rk sbauza sclewis sgordon srevivo vladanovic vromanso | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2021-10-20 10:50:59 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1205313#c0)  Vasyl Kaigorodov    2015-03-24 16:36:19 UTC  ``` It was reported that under certain conditions (when live migrations fails), an attacker can access other VMs volumes, which under normal conditions he should not be able to access: [https://bugs.launchpad.net/nova/+bug/1419577](https://bugs.launchpad.net/nova/%2Bbug/1419577)  CVE has been assigned here: <http://seclists.org/oss-sec/2015/q1/990> No patches are available at the time of writing.   ```  [Comment 1](show_bug.cgi?id=1205313#c1)  Vasyl Kaigorodov    2015-03-24 16:36:55 UTC  ```  Created openstack-nova tracking bugs for this issue:  Affects: fedora-all [[bug 1205314](show_bug.cgi?id=1205314 "CLOSED EOL - CVE-2015-2687 openstack-nova: information leak when live-migration failed [fedora-all]")] Affects: openstack-rdo [[bug 1205315](show_bug.cgi?id=1205315)]   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1205313&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugs.launchpad.net_5da1a180_20250126_044533.html ===

[Log in / Register](https://bugs.launchpad.net/nova/%2Bbug/1419577/%2Blogin)

[![](https://launchpadlibrarian.net/324577028/nova64.png)](https://launchpad.net/nova)

## [OpenStack Compute (nova)](https://launchpad.net/nova)

* [Overview](https://launchpad.net/nova)
* [Code](https://code.launchpad.net/nova)
* [Bugs](https://bugs.launchpad.net/nova)
* [Blueprints](https://blueprints.launchpad.net/nova)
* [Translations](https://translations.launchpad.net/nova)
* [Answers](https://answers.launchpad.net/nova)

# when live-migrate failed, lun-id couldn't be rollback in havana

Bug #1419577 reported by
[Hyun Ha](https://launchpad.net/~raymon-ha)
on 2015-02-09

[36](/%2Bhelp-bugs/bug-heat.html)

This bug affects 3 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Compute (nova)](https://bugs.launchpad.net/nova) | Fix Released | Medium | [Lee Yarwood](https://launchpad.net/~lyarwood) |  |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Won't Fix | Undecided | Unassigned |  |

### Bug Description

Hi, guys

When live-migrate failed with error, lun-id of connection\_info column in Nova's block\_deivce\_mapping table couldn't be rollback.

and failed VM can have others volume.

my test environment is following :

Openstack Version : Havana ( 2013.2.3)

Compute Node OS : 3.5.0-23-generic #35~precise1-Ubuntu SMP Fri Jan 25 17:13:26 UTC 2013 x86\_64 x86\_64 x86\_64 GNU/Linux

Compute Node multipath : multipath-tools 0.4.9-3ubuntu7.2

test step is :

1) create 2 Compute node (host#1 and host#2)

2) create 1 VM on host#1 (vm01)

3) create 1 cinder volume (vol01)

4) attach 1 volume to vm01 (/dev/vdb)

5) live-migrate vm01 from host#1 to host#2

6) live-migrate success

     - please check the mapper by using multipath command in host#1 (# multipath -ll), then you can find mapper is not deleted.

       and the status of devices is "failed faulty"

     - please check the lun-id of vol01

7) Again, live-migrate vm01 from host#2 to host#1 (vm01 was migrated to host#2 at step 4)

8) live-migrate fail

     - please check the mapper in host#1

     - please check the lun-id of vol01, then you can find the lun hav "two" igroups

     - please check the connection\_info column in Nova's block\_deivce\_mapping table, then you can find lun-id couldn't be rollback

This Bug is critical security issue because the failed VM can have others volume.

and every backend storage of cinder-volume can have same problem because this is the bug of live-migration's rollback process.

I suggest below methods to solve issue :

1) when live-migrate is complete, nova should delete mapper devices at origin host

2) when live-migrate is failed, nova should rollback lun-id in connection\_info column

3) when live-migrate is failed, cinder should delete the mapping between lun and host (Netapp : igroup, EMC : storage\_group ...)

4) when volume-attach is requested , cinder volume driver of vendors should make lun-id randomly for reduce of probability of mis-mapping

please check this bug.

Thank you.

See [original description](comments/0)

Tags:

[live-migration](/nova/%2Bbugs?field.tag=live-migration)
[openstack-version.havana](/nova/%2Bbugs?field.tag=openstack-version.havana)
[security](/nova/%2Bbugs?field.tag=security)
[volumes](/nova/%2Bbugs?field.tag=volumes)

## CVE References

* [2015-2687](/bugs/cve/2015-2687 "OpenStack Compute (nova) Icehouse, Ju...")

[Hyun Ha (raymon-ha)](https://launchpad.net/~raymon-ha)
on 2015-02-09

| **description**: | updated |
| --- | --- |
| **affects**: | cinder → nova-project |

[Hyun Ha (raymon-ha)](https://launchpad.net/~raymon-ha)
on 2015-02-09

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-02-09: |  |  | [#1](/nova/%2Bbug/1419577/comments/1) |
| --- | --- | --- | --- |

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.

Is this only in Havana or does it also reproduce on Icehouse/Juno ?

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.
Is this only in Havana or does it also reproduce on Icehouse/Juno ?

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Hyun Ha (raymon-ha)](https://launchpad.net/~raymon-ha) wrote on 2015-02-09: |  |  | [#2](/nova/%2Bbug/1419577/comments/2) |
| --- | --- | --- | --- |

Hi, Tristan

Icehouse and Juno has the same bug.

please see below that i reported :

[https://bugs.launchpad.net/cinder/+bug/1416314](https://bugs.launchpad.net/cinder/%2Bbug/1416314)

when live-migration failed, the information of mapping between host and lun can be tangled.

this bug can affect not only security vulnerability but also data stability. (filesystem can be break when lun mis-mapped)

Thanks.

Hi, Tristan
Icehouse and Juno has the same bug.
please see below that i reported :
https://bugs.launchpad.net/cinder/+bug/1416314
when live-migration failed, the information of mapping between host and lun can be tangled.
this bug can affect not only security vulnerability but also data stability. (filesystem can be break when lun mis-mapped)
Thanks.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2015-02-12: |  |  | [#3](/nova/%2Bbug/1419577/comments/3) |
| --- | --- | --- | --- |

I agree that's a bug with critical consequences, however unless I'm mistaken, it's not a situation that can be triggered or predicted by an attacker, in which case it may not be considered a vulnerability ?

I agree that's a bug with critical consequences, however unless I'm mistaken, it's not a situation that can be triggered or predicted by an attacker, in which case it may not be considered a vulnerability ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-02-18: |  |  | [#4](/nova/%2Bbug/1419577/comments/4) |
| --- | --- | --- | --- |

I agree with ttx here, without a way to make the migration process fail, this is a bug with security consequence, but not a vulnerability.

@Hahyun, is there a missing steps that an attacker can use to make the live migration (step 8) failed ?

Else let's triage this as a class D type of report and remove the advisory task. ( <https://wiki.openstack.org/wiki/Vulnerability_Management#Incident_report_taxonomy> )

I agree with ttx here, without a way to make the migration process fail, this is a bug with security consequence, but not a vulnerability.
@Hahyun, is there a missing steps that an attacker can use to make the live migration (step 8) failed ?
Else let's triage this as a class D type of report and remove the advisory task. ( https://wiki.openstack.org/wiki/Vulnerability\_Management#Incident\_report\_taxonomy )

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Hyun Ha (raymon-ha)](https://launchpad.net/~raymon-ha) wrote on 2015-02-23: |  |  | [#5](/nova/%2Bbug/1419577/comments/5) |
| --- | --- | --- | --- |

Hi,

Thank you for your comment.

The reason that I reported above issue as vulnerability is that attacker can attach others volume to his own VM on purpose.

There are many ways to make live-migration fail.

Firstly, there are two issues on havana (tag : 2013.2.3)

One issue is the bug with multipath rescan.([https://bugs.launchpad.net/nova/+bug/1362916](https://bugs.launchpad.net/nova/%2Bbug/1362916))

The other one is that when volume is detached, multipath device couldn’t be deleted.

Due to these reasons, live-migration process will be failed in the situation that one vm live-migrate to another compute-node and go back to the original compute-node.

Secondly, if live-migration is executed while process keep using big size of memory by benchmark tool or something like that in VM instance

and then the waiting status of live-migration could be persisted, eventually live-migration will be failed.

There are some ways to make live-migration fail except I explained above.

Make NIC of compute-node down and then excute live-migration, live-migration is going to be failed for example (using multipath, iscsi)

Using rollback bug is just one way that attacker can attach others volume to his VM.

I think the importance thing is that nova attach volume with lun-id so that if lun-id might be changed with errors or by attackers, it occurs critical security issues.

please think about below situation.

attaker get the admin authority of nova DB.

change lun-id of connection\_info in block\_device\_mapping table.

reboot hard his VM with volume changed lun-id.

finally attacker get others volume on his vm easily.

I think the root-cause of this bug is that nova use “lun-id” for mapping VM with volume.

lun-id is not unique and could be changed in attach/detach process because it is generaged dynamically.

I'd like to suggest that nova should attach volume to vm with "unique-id" of lun not lun-id.

And additionally, the bug that I reported should be fixed.

Users who have VM on Public cloud based on Openstack can feel their vm is unsafe, if they know about the possibility of volume mis-mapping because one compute-node have many different customers vm.

So, I think this issue should be triaged as a Class A type.

Thank you.

Hi,
Thank you for your comment.
The reason that I reported above issue as vulnerability is that attacker can attach others volume to his own VM on purpose.
There are many ways to make live-migration fail.
Firstly, there are two issues on havana (tag : 2013.2.3)
One issue is the bug with multipath rescan.(https://bugs.launchpad.net/nova/+bug/1362916)
The other one is that when volume is detached, multipath device couldn’t be deleted.
Due to these reasons, live-migration process will be failed in the situation that one vm live-migrate to another compute-node and go back to the original compute-node.
Secondly, if live-migration is executed while process keep using big size of memory by benchmark tool or something like that in VM instance
and then the waiting status of live-migration could be persisted, eventually live-migration will be failed.
There are some ways to make live-migration fail except I explained above.
Make NIC of compute-node down and then excute live-migration, live-migration is going to be failed for example (using multipath, iscsi)
Using rollback bug is just one way that attacker can attach others volume to his VM.
I think the importance thing is that nova attach volume with lun-id so that if lun-id might be changed with errors or by attackers, it occurs critical security issues.
please think about below situation.
attaker get the admin authority of nova DB.
change lun-id of connection\_info in block\_device\_mapping table.
reboot hard his VM with volume changed lun-id.
finally attacker get others volume on his vm easily.
I think the root-cause of this bug is that nova use “lun-id” for mapping VM with volume.
lun-id is not unique and could be changed in attach/detach process because it is generaged dynamically.
I'd like to suggest that nova should attach volume to vm with "unique-id" of lun not lun-id.
And additionally, the bug that I reported should be fixed.
Users who have VM on Public cloud based on Openstack can feel their vm is unsafe, if they know about the possibility of volume mis-mapping because one compute-node have many different customers vm.
So, I think this issue should be triaged as a Class A type.
Thank you.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2015-02-23: |  |  | [#6](/nova/%2Bbug/1419577/comments/6) |
| --- | --- | --- | --- |

Unless I'm misreading, you're suggesting potential exploits involving :

1. disconnecting physical network interfaces

2. gaining administrative access to the nova database

Our report taxonomy is not based on feelings and user impressions, but rather on the feasibility of exploiting a bug weighed against its implied risks.

Unless I'm misreading, you're suggesting potential exploits involving :
1. disconnecting physical network interfaces
2. gaining administrative access to the nova database
Our report taxonomy is not based on feelings and user impressions, but rather on the feasibility of exploiting a bug weighed against its implied risks.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2015-02-26: |  |  | [#7](/nova/%2Bbug/1419577/comments/7) |
| --- | --- | --- | --- |

I tend to agree that it becomes a security vulnerability if live-migrate regularly fails. Even if the leak can't be triggered or controlled, it is still a privacy issue. We issued one in the past for OSSA-2013-006:

<http://security.openstack.org/ossa/OSSA-2013-006.html>

I tend to agree that it becomes a security vulnerability if live-migrate regularly fails. Even if the leak can't be triggered or controlled, it is still a privacy issue. We issued one in the past for OSSA-2013-006:
http://security.openstack.org/ossa/OSSA-2013-006.html

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Hyun Ha (raymon-ha)](https://launchpad.net/~raymon-ha) wrote on 2015-03-02: |  |  | [#8](/nova/%2Bbug/1419577/comments/8) |
| --- | --- | --- | --- |

Hi,

Live-migrate regularly fails on Havana and all branch before Havana.

Live-migrate can be failed on Juno and Ice-House in specific condition as I reported above.

Thank you.

Hi,
Live-migrate regularly fails on Havana and all branch before Havana.
Live-migrate can be failed on Juno and Ice-House in specific condition as I reported above.
Thank you.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2015-03-02: |  |  | [#9](/nova/%2Bbug/1419577/comments/9) |
| --- | --- | --- | --- |

Agree that it's a vulnerability in Havana (since live-migration fails so often there). I wouldn't consider it a vulnerability in Icehouse/Juno, since you can't trigger live migration failure without administrative or physical access to the machines.

It is a bug with security consequences there, and it should be fixed as soon as possible.

Agree that it's a vulnerability in Havana (since live-migration fails so often there). I wouldn't consider it a vulnerability in Icehouse/Juno, since you can't trigger live migration failure without administrative or physical access to the machines.
It is a bug with security consequences there, and it should be fixed as soon as possible.

| Changed in nova-project: | |
| --- | --- |
| **status**: | New → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2015-03-02: |  |  | [#10](/nova/%2Bbug/1419577/comments/10) |
| --- | --- | --- | --- |

As far as OSSA is going, I'd rate this class C1 or D.

As far as OSSA is going, I'd rate this class C1 or D.

| **affects**: | nova-project → nova |
| --- | --- |
| Changed in nova: | |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2015-03-09: |  |  | [#11](/nova/%2Bbug/1419577/comments/11) |
| --- | --- | --- | --- |

Agreed on C1: this wouldn't qualify for an advisory since Havana is no longer supported by the VMT, but it's still something a distro carrying Havana packages of Nova might fix on their own and request a corresponding CVE to track.

Agreed on C1: this wouldn't qualify for an advisory since Havana is no longer supported by the VMT, but it's still something a distro carrying Havana packages of Nova might fix on their own and request a corresponding CVE to track.

| **information type**: | Public Security → Public |
| --- | --- |
| **tags**: | added: security |

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2015-03-09

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Won't Fix |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-03-17: |  |  | [#12](/nova/%2Bbug/1419577/comments/12) |
| --- | --- | --- | --- |

I'm going to go ahead and request a CVE for this on oss-sec at least for havana (which we [redhat] still support downstream) unless someone has a good reason not to? (or beats me to it)

I'm going to go ahead and request a CVE for this on oss-sec at least for havana (which we [redhat] still support downstream) unless someone has a good reason not to? (or beats me to it)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matthew Edmonds (edmondsw)](https://launchpad.net/~edmondsw) wrote on 2015-04-03: |  |  | [#13](/nova/%2Bbug/1419577/comments/13) |
| --- | --- | --- | --- |

per <http://seclists.org/oss-sec/2015/q1/990>:

For purposes of CVE, we typically don't think of vulnerabilities in the way expressed in [https://bugs.launchpad.net/nova/+bug/1419577/comments/4](https://bugs.launchpad.net/nova/%2Bbug/1419577/comments/4) "without a way to make the migration process fail, this is a bug with security consequence, but not a vulnerability." In other words, for a CVE, the attacker can be a person who wishes to have an unauthorized volume attachment after the bug is triggered. The attacker does not need to be a person who has determined a reproducible way to trigger the bug.

per http://seclists.org/oss-sec/2015/q1/990:
For purposes of CVE, we typically don't think of vulnerabilities in the way expressed in https://bugs.launchpad.net/nova/+bug/1419577/comments/4 "without a way to make the migration process fail, this is a bug with security consequence, but not a vulnerability." In other words, for a CVE, the attacker can be a person who wishes to have an unauthorized volume attachment after the bug is triggered. The attacker does not need to be a person who has determined a reproducible way to trigger the bug.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2015-04-03: |  |  | [#14](/nova/%2Bbug/1419577/comments/14) |
| --- | --- | --- | --- |

And as I indicated in follow-up replies on that thread, the OpenStack VMT doesn't decide whether or not a bug is worthy of getting a CVE assigned (only whether or not we're going to embargo it and/or eventually issue a security advisory about it).

And as I indicated in follow-up replies on that thread, the OpenStack VMT doesn't decide whether or not a bug is worthy of getting a CVE assigned (only whether or not we're going to embargo it and/or eventually issue a security advisory about it).

[Matt Riedemann (mriedem)](https://launchpad.net/~mriedem)
on 2015-05-26

| **tags**: | added: live-migration volumes |
| --- | --- |

[Pawel Koniszewski (pawel-koniszewski)](https://launchpad.net/~pawel-koniszewski)
on 2015-05-29

| **tags**: | added: live-migrateremoved: live-migration |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matt Riedemann (mriedem)](https://launchpad.net/~mriedem) wrote on 2015-05-29: |  |  | [#15](/nova/%2Bbug/1419577/comments/15) |
| --- | --- | --- | --- |

I'm trying to sort this out a bit.

Looking at the nova.virt.libvirt.driver.pre\_live\_migration() method, I see it's connecting to a volume and the connection\_info dictionary is updated in the nova.virt.libvirt.volume code, but I don't see where that connection\_info dict comes back to the virt driver's pre\_live\_migration method and persists the change to the database.

This is where pre\_live\_migration() connects the volume:

<http://git.openstack.org/cgit/openstack/nova/tree/nova/virt/libvirt/driver.py?id=2015.1.0#n5813>

Let's assume we're using the LibvirtISCSIVolumeDriver volume driver, the connect\_volume method in there will update the connection\_info dict here:

<http://git.openstack.org/cgit/openstack/nova/tree/nova/virt/libvirt/volume.py?id=2015.1.0#n483>

That change never gets persisted back to the block\_device\_mapping table for the bdm instance, but we've connected the volume potentially on another host so if live migration fails and we never rollback the volume connection\_info to the source host (before pre\_live\_migration), and reboot the instance, then the bdm will be recreated from what's in the database which will be wrong.

I'm trying to sort this out a bit.
Looking at the nova.virt.libvirt.driver.pre\_live\_migration() method, I see it's connecting to a volume and the connection\_info dictionary is updated in the nova.virt.libvirt.volume code, but I don't see where that connection\_info dict comes back to the virt driver's pre\_live\_migration method and persists the change to the database.
This is where pre\_live\_migration() connects the volume:
http://git.openstack.org/cgit/openstack/nova/tree/nova/virt/libvirt/driver.py?id=2015.1.0#n5813
Let's assume we're using the LibvirtISCSIVolumeDriver volume driver, the connect\_volume method in there will update the connection\_info dict here:
http://git.openstack.org/cgit/openstack/nova/tree/nova/virt/libvirt/volume.py?id=2015.1.0#n483
That change never gets persisted back to the block\_device\_mapping table for the bdm instance, but we've connected the volume potentially on another host so if live migration fails and we never rollback the volume connection\_info to the source host (before pre\_live\_migration), and reboot the instance, then the bdm will be recreated from what's in the database which will be wrong.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Justin Shepherd (jshepher)](https://launchpad.net/~jshepher) wrote on 2015-08-03: |  |  | [#16](/nova/%2Bbug/1419577/comments/16) |
| --- | --- | --- | --- |

Should this bug remain open as it is targeted to a no longer supported version (havana)?

Should this bug remain open as it is targeted to a no longer supported version (havana)?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matt Riedemann (mriedem)](https://launchpad.net/~mriedem) wrote on 2015-08-18: |  |  | [#17](/nova/%2Bbug/1419577/comments/17) |
| --- | --- | --- | --- |

I have a feeling that this is fixed via <https://review.openstack.org/#/c/211051/> .

I have a feeling that this is fixed via https://review.openstack.org/#/c/211051/ .

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matt Riedemann (mriedem)](https://launchpad.net/~mriedem) wrote on 2015-08-18: |  |  | [#18](/nova/%2Bbug/1419577/comments/18) |
| --- | --- | --- | --- |

Per comment 17, maybe not given that's post live migration which is only called for a successful live migration, the rollback is called for a failed live migration.

Per comment 17, maybe not given that's post live migration which is only called for a successful live migration, the rollback is called for a failed live migration.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matt Riedemann (mriedem)](https://launchpad.net/~mriedem) wrote on 2015-08-18: |  |  | [#19](/nova/%2Bbug/1419577/comments/19) |
| --- | --- | --- | --- |

@Justin, per comment 16, this was reported against Havana but as far as I can tell this is not yet resolved in master (Liberty right now).

@Justin, per comment 16, this was reported against Havana but as far as I can tell this is not yet resolved in master (Liberty right now).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matt Riedemann (mriedem)](https://launchpad.net/~mriedem) wrote on 2015-09-28: |  |  | [#20](/nova/%2Bbug/1419577/comments/20) |
| --- | --- | --- | --- |

I'm wondering if the fix (<https://review.openstack.org/#/c/202770/>) for [bug 1475411](/bugs/1475411) plays here, i.e. the case that the live migration from A to B is considered successful even though we didn't disconnect the correct volumes, and then that causes the migration from B back to A to fail.

I'm wondering if the fix (https://review.openstack.org/#/c/202770/) for bug 1475411 plays here, i.e. the case that the live migration from A to B is considered successful even though we didn't disconnect the correct volumes, and then that causes the migration from B back to A to fail.

[Paul Murray (pmurray)](https://launchpad.net/~pmurray)
on 2015-11-06

| **tags**: | added: live-migrationremoved: live-migrate |
| --- | --- |

[lvmxh (shaohef)](https://launchpad.net/~shaohef)
on 2015-11-17

| Changed in nova: | |
| --- | --- |
| **assignee**: | nobody → lvmxh (shaohef) |

[lvmxh (shaohef)](https://launchpad.net/~shaohef)
on 2015-12-03

| Changed in nova: | |
| --- | --- |
| **assignee**: | lvmxh (shaohef) → nobody |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tobias Urdin (tobias-urdin)](https://launchpad.net/~tobias-urdin) wrote on 2015-12-14: |  |  | [#21](/nova/%2Bbug/1419577/comments/21) |
| --- | --- | --- | --- |

Can anybody please verify if my bug is a duplicate of this one? [https://bugs.launchpad.net/nova/+bug/1525802](https://bugs.launchpad.net/nova/%2Bbug/1525802)

Can anybody please verify if my bug is a duplicate of this one? https://bugs.launchpad.net/nova/+bug/1525802

[lvmxh (shaohef)](https://launchpad.net/~shaohef)
on 2016-01-27

| **information type**: | Public → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2016-01-27: |  |  | [#22](/nova/%2Bbug/1419577/comments/22) |
| --- | --- | --- | --- |

Since this bug was switched from public back to public security with no comment explaining why, I have reset it to public again. Please, whenever moving a bug to a security type, add a comment with your reasoning.

Since this bug was switched from public back to public security with no comment explaining why, I have reset it to public again. Please, whenever moving a bug to a security type, add a comment with your reasoning.

| **information type**: | Public Security → Public |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2016-07-07: |  |  | [#23](/nova/%2Bbug/1419577/comments/23) |
| --- | --- | --- | --- |

We've seen this downstream against RHEL OSP 7 (kilo) documented (mostly privately) in the following RHBZ:

iscsi details changed for cinder volume using EMCCLIISCSIDriver

<https://bugzilla.redhat.com/show_bug.cgi?id=1353147>

We manually reverted the changes to the target\_luns to workaround the issue in this case. This still looks possible against master so I'm going to propose a change refreshing connection\_info on the source host during \_rollback\_live\_migration.

We've seen this downstream against RHEL OSP 7 (kilo) documented (mostly privately) in the following RHBZ:
iscsi details changed for cinder volume using EMCCLIISCSIDriver
https://bugzilla.redhat.com/show\_bug.cgi?id=1353147
We manually reverted the changes to the target\_luns to workaround the issue in this case. This still looks possible against master so I'm going to propose a change refreshing connection\_info on the source host during \_rollback\_live\_migration.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-07-07:  [**Fix proposed to nova (master)**](/nova/%2Bbug/1419577/comments/24) |  |  | [#24](/nova/%2Bbug/1419577/comments/24) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/338929>

Fix proposed to branch: master
Review: https://review.openstack.org/338929

| Changed in nova: | |
| --- | --- |
| **assignee**: | nobody → Lee Yarwood (lyarwood) |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-10-18:  [**Related fix merged to nova (master)**](/nova/%2Bbug/1419577/comments/25) |  |  | [#25](/nova/%2Bbug/1419577/comments/25) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/342111>

Committed: <https://git.openstack.org/cgit/openstack/nova/commit/?id=b83cae02ece4c338e09c3606c6ae69b715bd6f8c>

Submitter: Jenkins

Branch: master

commit b83cae02ece4c338e09c3606c6ae69b715bd6f8c

Author: Lee Yarwood <email address hidden>

Date: Thu Jul 14 11:53:09 2016 +0100

block\_device: Make refresh\_conn\_infos py3 compatible

Also add a simple test ensuring that refresh\_connection\_info is called

    for each DriverVolumeBlockDevice derived device provided.

Related-Bug: #1419577

    Partially-Implements: blueprint goal-python35

    Change-Id: Ib1ff00e7f4f5b599317d7111c322ce9af8a9a2b1

Reviewed: https://review.openstack.org/342111
Committed: https://git.openstack.org/cgit/openstack/nova/commit/?id=b83cae02ece4c338e09c3606c6ae69b715bd6f8c
Submitter: Jenkins
Branch: master
commit b83cae02ece4c338e09c3606c6ae69b715bd6f8c
Author: Lee Yarwood <lyarwood@redhat.com>
Date: Thu Jul 14 11:53:09 2016 +0100
block\_device: Make refresh\_conn\_infos py3 compatible
Also add a simple test ensuring that refresh\_connection\_info is called
for each DriverVolumeBlockDevice derived device provided.
Related-Bug: #1419577
Partially-Implements: blueprint goal-python35
Change-Id: Ib1ff00e7f4f5b599317d7111c322ce9af8a9a2b1

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2016-10-26

| Changed in nova: | |
| --- | --- |
| **assignee**: | Lee Yarwood (lyarwood) → Dan Smith (danms) |

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2016-10-26

| Changed in nova: | |
| --- | --- |
| **assignee**: | Dan Smith (danms) → Lee Yarwood (lyarwood) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-10-29:  [**Fix proposed to nova (master)**](/nova/%2Bbug/1419577/comments/26) |  |  | [#26](/nova/%2Bbug/1419577/comments/26) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/391598>

Fix proposed to branch: master
Review: https://review.openstack.org/391598

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-11-07:  [**Change abandoned on nova (master)**](/nova/%2Bbug/1419577/comments/27) |  |  | [#27](/nova/%2Bbug/1419577/comments/27) |
| --- | --- | --- | --- |

Change abandoned by Lee Yarwood (<email address hidden>) on branch: master

Review: <https://review.openstack.org/391598>

Change abandoned by Lee Yarwood (lyarwood@redhat.com) on branch: master
Review: https://review.openstack.org/391598

[Matt Riedemann (mriedem)](https://launchpad.net/~mriedem)
on 2016-12-09

| Changed in nova: | |
| --- | --- |
| **status**: | In Progress → Confirmed |
| **assignee**: | Lee Yarwood (lyarwood) → nobody |

[Sean Dague (sdague)](https://launchpad.net/~sdague)
on 2016-12-09

| Changed in nova: | |
| --- | --- |
| **importance**: | High → Medium |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2016-12-09: |  |  | [#28](/nova/%2Bbug/1419577/comments/28) |
| --- | --- | --- | --- |

<https://review.openstack.org/#/c/338929/> is the correct WIP review that I've been working on. It's currently waiting on <https://review.openstack.org/#/c/389608/> so we can use the stashed bdms to reset connection\_info without additional calls to Cinder.

https://review.openstack.org/#/c/338929/ is the correct WIP review that I've been working on. It's currently waiting on https://review.openstack.org/#/c/389608/ so we can use the stashed bdms to reset connection\_info without additional calls to Cinder.

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2017-01-17

| Changed in nova: | |
| --- | --- |
| **assignee**: | nobody → Lee Yarwood (lyarwood) |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Sean Dague (sdague)](https://launchpad.net/~sdague) wrote on 2017-06-27: |  |  | [#29](/nova/%2Bbug/1419577/comments/29) |
| --- | --- | --- | --- |

Automatically discovered version havana in description. If this is incorrect, please update the description to include 'nova version: ...'

Automatically discovered version havana in description. If this is incorrect, please update the description to include 'nova version: ...'

| **tags**: | added: openstack-version.havana |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2017-08-01: |  |  | [#30](/nova/%2Bbug/1419577/comments/30) |
| --- | --- | --- | --- |

Change abandoned by Sean Dague (<email address hidden>) on branch: master

Review: <https://review.openstack.org/338929>

Reason: This review is > 4 weeks without comment, and is not mergable in it's current state. We are abandoning this for now. Feel free to reactivate the review by pressing the restore button and leaving a 'recheck' comment to get fresh test results.

Change abandoned by Sean Dague (sean@dague.net) on branch: master
Review: https://review.openstack.org/338929
Reason: This review is > 4 weeks without comment, and is not mergable in it's current state. We are abandoning this for now. Feel free to reactivate the review by pressing the restore button and leaving a 'recheck' comment to get fresh test results.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2018-07-02: |  |  | [#31](/nova/%2Bbug/1419577/comments/31) |
| --- | --- | --- | --- |

Change abandoned by Lee Yarwood (<email address hidden>) on branch: master

Review: <https://review.openstack.org/338929>

Reason: <https://review.openstack.org/#/c/551302/>

Change abandoned by Lee Yarwood (lyarwood@redhat.com) on branch: master
Review: https://review.openstack.org/338929
Reason: https://review.openstack.org/#/c/551302/

[Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood)
on 2020-09-15

| Changed in nova: | |
| --- | --- |
| **status**: | In Progress → Fix Released |

[See full activity log](https://bugs.launchpad.net/nova/%2Bbug/1419577/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/nova/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

## Duplicates of this bug

* [Bug #1416314](https://bugs.launchpad.net/nova/%2Bbug/1416314 "BUG :  when live-migration failed, lun-id couldn't be rollback")
* [Bug #1573944](https://bugs.launchpad.net/nova/%2Bbug/1573944 "target-lun id of volume changed when live-migration failed")

You are
[not directly subscribed to this bug's notifications.](/nova/%2Bbug/1419577/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/nova/%2Bbug/1419577/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/nova/%2Bbug/1419577/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

* [redhat-bugs #1353147](https://bugzilla.redhat.com/show_bug.cgi?id=1353147)

  [ON\_DEV]
  [Edit](/bugs/1419577/%2Bwatch/120403 "Change watch details")

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from www.openwall.com_6d6ffe14_20250125_002020.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](9) [[next>]](11) [[<thread-prev]](1) [[thread-next>]](12) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <20150324073610.79BAF1BE1C3@smtpvbsrv1.mitre.org>
Date: Tue, 24 Mar 2015 03:36:10 -0400 (EDT)
From: cve-assign@...re.org
To: gmollett@...hat.com
Cc: cve-assign@...re.org, oss-security@...ts.openwall.com
Subject: Re: CVE request for OpenStack Compute (nova)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

> [https://bugs.launchpad.net/nova/+bug/1419577](https://bugs.launchpad.net/nova/%2Bbug/1419577)

Use CVE-2015-2687 for this issue with an unintended loss of access
control after a failed live migration.

For purposes of CVE, we typically don't think of vulnerabilities in
the way expressed in
[https://bugs.launchpad.net/nova/+bug/1419577/comments/4](https://bugs.launchpad.net/nova/%2Bbug/1419577/comments/4) "without a way
to make the migration process fail, this is a bug with security
consequence, but not a vulnerability." In other words, for a CVE, the
attacker can be a person who wishes to have an unauthorized volume
attachment after the bug is triggered. The attacker does not need to
be a person who has determined a reproducible way to trigger the bug.

> if live-migration is executed while process keep using big size of
> memory by benchmark tool or something like that in VM instance and
> then the waiting status of live-migration could be persisted,
> eventually live-migration will be failed.

We think that nobody commented on whether this is a feasible way to
actively trigger the bug.

> you're suggesting potential exploits involving
>
> 1. disconnecting physical network interfaces

We think the intended security property of this OpenStack product is:
"if network connectivity is disrupted by anyone (authorized or not)
during a live migration, then access control for volumes still must
match users' expectations afterward."

It is conceivable that the intended security property of this
OpenStack product is instead "if network connectivity is disrupted
during a live migration, then access control for volumes afterward is
undefined." In this case, maybe you mean that the CVE should apply
only to Havana, because the only relevant root cause is a Havana bug.
The reasoning in that scenario would be:

   1 - a Havana bug (e.g., 1362916 or possibly the combination of
       1362916 and a second bug) makes it possible to force a failure
       of a live migration

   2 - this was not previously considered a vulnerability

   3 - however, the relevant OpenStack product has a required security
       property of "There must not be any software bugs that allow
       live-migration failure attacks, because these attacks are
       equivalent to attacks against volume access control."

   4 - therefore, the bug in item 1 is promoted to a vulnerability,
       and is the bug directly associated with CVE-2015-2687

   5 - consequently, CVE-2015-2687 would not be used in an advisory
       because Havana is unsupported by the OpenStack VMT

So, does the OpenStack VMT have a position on whether to choose this
latter scenario? In other words, if live migration fails because of a
disconnected physical network interface, is access control for volumes
intentionally undefined afterward?

- --
CVE assignment team, MITRE CVE Numbering Authority
M/S M300
202 Burlington Road, Bedford, MA 01730 USA
[ PGP key available through <http://cve.mitre.org/cve/request_id.html> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.14 (SunOS)

iQEcBAEBAgAGBQJVERM0AAoJEKllVAevmvmsbBgIAMGBnjBiFxT9hfdSED6p/WD1
2kh8GJq8sfECGAS7p7vLcjmqQXKIwJWRD9z974OtRuFSrMcS59Lon/3wVOMO8SGI
RC/RtM2sG41WyhcM3Io5rlFIQ4ligNTwhd88+1wPRH5CGAJfK9X2HrCew95WR2m+
bx4bSaNvoolbZMvX11YaQHqX/5HdX1qispLdduKjTEI506YLLP8IAyR8gX1o0cOG
cU5gMkd0zbVvh67ZdCkIvsIkRIO1ZJC8kStzPJVTDm1+A8GxvBs7/M6nmHG6T4ji
IFD2w350UT2iZWBWrt6KRfvTDeqAmik9+3u424oFiHtWaMyz+FPMTIO9J8PIBHg=
=YcdN
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from www.openwall.com_9981abb0_20250125_002020.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](2) [[next>]](4) [[<thread-prev]](../../../2015/03/24/14) [[thread-next>]](5) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <20150325071340.0D1BB6C004C@smtpvmsrv1.mitre.org>
Date: Wed, 25 Mar 2015 03:13:40 -0400 (EDT)
From: cve-assign@...re.org
To: jeremy@...nstack.org
Cc: cve-assign@...re.org, oss-security@...ts.openwall.com
Subject: Re: CVE request for OpenStack Compute (nova)

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

At this point, it seems best to define the affected releases for
CVE-2015-2687 to include Icehouse and Juno, in addition to Havana.
There is at least one person (hfamily15) who believes it is a
vulnerability within all of these releases, and nobody has indicated
that it must not be considered a vulnerability within any of these
releases.

This means that the <http://openwall.com/lists/oss-security/2015/03/24/10>
text starting with "It is conceivable that" is no longer applicable.

The CVE project is not attempting to suggest that the existence of a
CVE ID associated with a supported release means that an OSSA is
required.

> Of the many reports we initially receive as potential vulnerabilities,
> only a fraction actually end in an advisory

Similarly, there's obviously no obligation to send a notification to
oss-security whenever a potential vulnerability has been evaluated.

- --
CVE assignment team, MITRE CVE Numbering Authority
M/S M300
202 Burlington Road, Bedford, MA 01730 USA
[ PGP key available through <http://cve.mitre.org/cve/request_id.html> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.14 (SunOS)

iQEcBAEBAgAGBQJVEl+mAAoJEKllVAevmvmseZEH/2lDzJcTCXE0jPoT3mL+ytLE
7idFQK32HepABqgS/y2GfdI+xlOUHylfAWYgk8AslSbv1OvhGgwwyz64JKiRu7ZW
MKFALlVqLVeWaQNepn2JS0mS+g2OaWUDI2zQB62FzB6MobC2Z9R3lyCdtwQUaNUt
ywbRyCSR4rY2e1pu+WmACQbGevwNC4OQh5oQTaLB0rvivYrK8j4fb+s7uMxLsxKM
fLkkIIIu7DGmgj+Zupzay/xzb120bKG4loXLhj64We+REYVnINM/kellsmBIbexB
a1hxDGqycXLAXSxgeCDigfmxNBMuAmIQLMSmGY6ekbHLfIrwthWYChbZHaFfgFU=
=3MQv
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from access.redhat.com_aefb31ce_20250126_044531.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugs.launchpad.net_224bb8a1_20250126_044532.html ===

[Log in / Register](https://bugs.launchpad.net/nova/%2Bbug/1419577/%2Blogin)

[![](https://launchpadlibrarian.net/324577028/nova64.png)](https://launchpad.net/nova)

## [OpenStack Compute (nova)](https://launchpad.net/nova)

* [Overview](https://launchpad.net/nova)
* [Code](https://code.launchpad.net/nova)
* [Bugs](https://bugs.launchpad.net/nova)
* [Blueprints](https://blueprints.launchpad.net/nova)
* [Translations](https://translations.launchpad.net/nova)
* [Answers](https://answers.launchpad.net/nova)

# when live-migrate failed, lun-id couldn't be rollback in havana

Bug #1419577 reported by
[Hyun Ha](https://launchpad.net/~raymon-ha)
on 2015-02-09

[36](/%2Bhelp-bugs/bug-heat.html)

This bug affects 3 people

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Compute (nova)](https://bugs.launchpad.net/nova) | Fix Released | Medium | [Lee Yarwood](https://launchpad.net/~lyarwood) |  |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Won't Fix | Undecided | Unassigned |  |

### Bug Description

Hi, guys

When live-migrate failed with error, lun-id of connection\_info column in Nova's block\_deivce\_mapping table couldn't be rollback.

and failed VM can have others volume.

my test environment is following :

Openstack Version : Havana ( 2013.2.3)

Compute Node OS : 3.5.0-23-generic #35~precise1-Ubuntu SMP Fri Jan 25 17:13:26 UTC 2013 x86\_64 x86\_64 x86\_64 GNU/Linux

Compute Node multipath : multipath-tools 0.4.9-3ubuntu7.2

test step is :

1) create 2 Compute node (host#1 and host#2)

2) create 1 VM on host#1 (vm01)

3) create 1 cinder volume (vol01)

4) attach 1 volume to vm01 (/dev/vdb)

5) live-migrate vm01 from host#1 to host#2

6) live-migrate success

     - please check the mapper by using multipath command in host#1 (# multipath -ll), then you can find mapper is not deleted.

       and the status of devices is "failed faulty"

     - please check the lun-id of vol01

7) Again, live-migrate vm01 from host#2 to host#1 (vm01 was migrated to host#2 at step 4)

8) live-migrate fail

     - please check the mapper in host#1

     - please check the lun-id of vol01, then you can find the lun hav "two" igroups

     - please check the connection\_info column in Nova's block\_deivce\_mapping table, then you can find lun-id couldn't be rollback

This Bug is critical security issue because the failed VM can have others volume.

and every backend storage of cinder-volume can have same problem because this is the bug of live-migration's rollback process.

I suggest below methods to solve issue :

1) when live-migrate is complete, nova should delete mapper devices at origin host

2) when live-migrate is failed, nova should rollback lun-id in connection\_info column

3) when live-migrate is failed, cinder should delete the mapping between lun and host (Netapp : igroup, EMC : storage\_group ...)

4) when volume-attach is requested , cinder volume driver of vendors should make lun-id randomly for reduce of probability of mis-mapping

please check this bug.

Thank you.

See [original description](comments/0)

Tags:

[live-migration](/nova/%2Bbugs?field.tag=live-migration)
[openstack-version.havana](/nova/%2Bbugs?field.tag=openstack-version.havana)
[security](/nova/%2Bbugs?field.tag=security)
[volumes](/nova/%2Bbugs?field.tag=volumes)

## CVE References

* [2015-2687](/bugs/cve/2015-2687 "OpenStack Compute (nova) Icehouse, Ju...")

[Hyun Ha (raymon-ha)](https://launchpad.net/~raymon-ha)
on 2015-02-09

| **description**: | updated |
| --- | --- |
| **affects**: | cinder → nova-project |

[Hyun Ha (raymon-ha)](https://launchpad.net/~raymon-ha)
on 2015-02-09

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-02-09: |  |  | [#1](/nova/%2Bbug/1419577/comments/1) |
| --- | --- | --- | --- |

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.

Is this only in Havana or does it also reproduce on Icehouse/Juno ?

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.
Is this only in Havana or does it also reproduce on Icehouse/Juno ?

| Changed in ossa: | |
| --- | --- |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Hyun Ha (raymon-ha)](https://launchpad.net/~raymon-ha) wrote on 2015-02-09: |  |  | [#2](/nova/%2Bbug/1419577/comments/2) |
| --- | --- | --- | --- |

Hi, Tristan

Icehouse and Juno has the same bug.

please see below that i reported :

[https://bugs.launchpad.net/cinder/+bug/1416314](https://bugs.launchpad.net/cinder/%2Bbug/1416314)

when live-migration failed, the information of mapping between host and lun can be tangled.

this bug can affect not only security vulnerability but also data stability. (filesystem can be break when lun mis-mapped)

Thanks.

Hi, Tristan
Icehouse and Juno has the same bug.
please see below that i reported :
https://bugs.launchpad.net/cinder/+bug/1416314
when live-migration failed, the information of mapping between host and lun can be tangled.
this bug can affect not only security vulnerability but also data stability. (filesystem can be break when lun mis-mapped)
Thanks.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2015-02-12: |  |  | [#3](/nova/%2Bbug/1419577/comments/3) |
| --- | --- | --- | --- |

I agree that's a bug with critical consequences, however unless I'm mistaken, it's not a situation that can be triggered or predicted by an attacker, in which case it may not be considered a vulnerability ?

I agree that's a bug with critical consequences, however unless I'm mistaken, it's not a situation that can be triggered or predicted by an attacker, in which case it may not be considered a vulnerability ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-02-18: |  |  | [#4](/nova/%2Bbug/1419577/comments/4) |
| --- | --- | --- | --- |

I agree with ttx here, without a way to make the migration process fail, this is a bug with security consequence, but not a vulnerability.

@Hahyun, is there a missing steps that an attacker can use to make the live migration (step 8) failed ?

Else let's triage this as a class D type of report and remove the advisory task. ( <https://wiki.openstack.org/wiki/Vulnerability_Management#Incident_report_taxonomy> )

I agree with ttx here, without a way to make the migration process fail, this is a bug with security consequence, but not a vulnerability.
@Hahyun, is there a missing steps that an attacker can use to make the live migration (step 8) failed ?
Else let's triage this as a class D type of report and remove the advisory task. ( https://wiki.openstack.org/wiki/Vulnerability\_Management#Incident\_report\_taxonomy )

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Hyun Ha (raymon-ha)](https://launchpad.net/~raymon-ha) wrote on 2015-02-23: |  |  | [#5](/nova/%2Bbug/1419577/comments/5) |
| --- | --- | --- | --- |

Hi,

Thank you for your comment.

The reason that I reported above issue as vulnerability is that attacker can attach others volume to his own VM on purpose.

There are many ways to make live-migration fail.

Firstly, there are two issues on havana (tag : 2013.2.3)

One issue is the bug with multipath rescan.([https://bugs.launchpad.net/nova/+bug/1362916](https://bugs.launchpad.net/nova/%2Bbug/1362916))

The other one is that when volume is detached, multipath device couldn’t be deleted.

Due to these reasons, live-migration process will be failed in the situation that one vm live-migrate to another compute-node and go back to the original compute-node.

Secondly, if live-migration is executed while process keep using big size of memory by benchmark tool or something like that in VM instance

and then the waiting status of live-migration could be persisted, eventually live-migration will be failed.

There are some ways to make live-migration fail except I explained above.

Make NIC of compute-node down and then excute live-migration, live-migration is going to be failed for example (using multipath, iscsi)

Using rollback bug is just one way that attacker can attach others volume to his VM.

I think the importance thing is that nova attach volume with lun-id so that if lun-id might be changed with errors or by attackers, it occurs critical security issues.

please think about below situation.

attaker get the admin authority of nova DB.

change lun-id of connection\_info in block\_device\_mapping table.

reboot hard his VM with volume changed lun-id.

finally attacker get others volume on his vm easily.

I think the root-cause of this bug is that nova use “lun-id” for mapping VM with volume.

lun-id is not unique and could be changed in attach/detach process because it is generaged dynamically.

I'd like to suggest that nova should attach volume to vm with "unique-id" of lun not lun-id.

And additionally, the bug that I reported should be fixed.

Users who have VM on Public cloud based on Openstack can feel their vm is unsafe, if they know about the possibility of volume mis-mapping because one compute-node have many different customers vm.

So, I think this issue should be triaged as a Class A type.

Thank you.

Hi,
Thank you for your comment.
The reason that I reported above issue as vulnerability is that attacker can attach others volume to his own VM on purpose.
There are many ways to make live-migration fail.
Firstly, there are two issues on havana (tag : 2013.2.3)
One issue is the bug with multipath rescan.(https://bugs.launchpad.net/nova/+bug/1362916)
The other one is that when volume is detached, multipath device couldn’t be deleted.
Due to these reasons, live-migration process will be failed in the situation that one vm live-migrate to another compute-node and go back to the original compute-node.
Secondly, if live-migration is executed while process keep using big size of memory by benchmark tool or something like that in VM instance
and then the waiting status of live-migration could be persisted, eventually live-migration will be failed.
There are some ways to make live-migration fail except I explained above.
Make NIC of compute-node down and then excute live-migration, live-migration is going to be failed for example (using multipath, iscsi)
Using rollback bug is just one way that attacker can attach others volume to his VM.
I think the importance thing is that nova attach volume with lun-id so that if lun-id might be changed with errors or by attackers, it occurs critical security issues.
please think about below situation.
attaker get the admin authority of nova DB.
change lun-id of connection\_info in block\_device\_mapping table.
reboot hard his VM with volume changed lun-id.
finally attacker get others volume on his vm easily.
I think the root-cause of this bug is that nova use “lun-id” for mapping VM with volume.
lun-id is not unique and could be changed in attach/detach process because it is generaged dynamically.
I'd like to suggest that nova should attach volume to vm with "unique-id" of lun not lun-id.
And additionally, the bug that I reported should be fixed.
Users who have VM on Public cloud based on Openstack can feel their vm is unsafe, if they know about the possibility of volume mis-mapping because one compute-node have many different customers vm.
So, I think this issue should be triaged as a Class A type.
Thank you.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2015-02-23: |  |  | [#6](/nova/%2Bbug/1419577/comments/6) |
| --- | --- | --- | --- |

Unless I'm misreading, you're suggesting potential exploits involving :

1. disconnecting physical network interfaces

2. gaining administrative access to the nova database

Our report taxonomy is not based on feelings and user impressions, but rather on the feasibility of exploiting a bug weighed against its implied risks.

Unless I'm misreading, you're suggesting potential exploits involving :
1. disconnecting physical network interfaces
2. gaining administrative access to the nova database
Our report taxonomy is not based on feelings and user impressions, but rather on the feasibility of exploiting a bug weighed against its implied risks.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2015-02-26: |  |  | [#7](/nova/%2Bbug/1419577/comments/7) |
| --- | --- | --- | --- |

I tend to agree that it becomes a security vulnerability if live-migrate regularly fails. Even if the leak can't be triggered or controlled, it is still a privacy issue. We issued one in the past for OSSA-2013-006:

<http://security.openstack.org/ossa/OSSA-2013-006.html>

I tend to agree that it becomes a security vulnerability if live-migrate regularly fails. Even if the leak can't be triggered or controlled, it is still a privacy issue. We issued one in the past for OSSA-2013-006:
http://security.openstack.org/ossa/OSSA-2013-006.html

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Hyun Ha (raymon-ha)](https://launchpad.net/~raymon-ha) wrote on 2015-03-02: |  |  | [#8](/nova/%2Bbug/1419577/comments/8) |
| --- | --- | --- | --- |

Hi,

Live-migrate regularly fails on Havana and all branch before Havana.

Live-migrate can be failed on Juno and Ice-House in specific condition as I reported above.

Thank you.

Hi,
Live-migrate regularly fails on Havana and all branch before Havana.
Live-migrate can be failed on Juno and Ice-House in specific condition as I reported above.
Thank you.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2015-03-02: |  |  | [#9](/nova/%2Bbug/1419577/comments/9) |
| --- | --- | --- | --- |

Agree that it's a vulnerability in Havana (since live-migration fails so often there). I wouldn't consider it a vulnerability in Icehouse/Juno, since you can't trigger live migration failure without administrative or physical access to the machines.

It is a bug with security consequences there, and it should be fixed as soon as possible.

Agree that it's a vulnerability in Havana (since live-migration fails so often there). I wouldn't consider it a vulnerability in Icehouse/Juno, since you can't trigger live migration failure without administrative or physical access to the machines.
It is a bug with security consequences there, and it should be fixed as soon as possible.

| Changed in nova-project: | |
| --- | --- |
| **status**: | New → Confirmed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2015-03-02: |  |  | [#10](/nova/%2Bbug/1419577/comments/10) |
| --- | --- | --- | --- |

As far as OSSA is going, I'd rate this class C1 or D.

As far as OSSA is going, I'd rate this class C1 or D.

| **affects**: | nova-project → nova |
| --- | --- |
| Changed in nova: | |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2015-03-09: |  |  | [#11](/nova/%2Bbug/1419577/comments/11) |
| --- | --- | --- | --- |

Agreed on C1: this wouldn't qualify for an advisory since Havana is no longer supported by the VMT, but it's still something a distro carrying Havana packages of Nova might fix on their own and request a corresponding CVE to track.

Agreed on C1: this wouldn't qualify for an advisory since Havana is no longer supported by the VMT, but it's still something a distro carrying Havana packages of Nova might fix on their own and request a corresponding CVE to track.

| **information type**: | Public Security → Public |
| --- | --- |
| **tags**: | added: security |

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2015-03-09

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Won't Fix |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-03-17: |  |  | [#12](/nova/%2Bbug/1419577/comments/12) |
| --- | --- | --- | --- |

I'm going to go ahead and request a CVE for this on oss-sec at least for havana (which we [redhat] still support downstream) unless someone has a good reason not to? (or beats me to it)

I'm going to go ahead and request a CVE for this on oss-sec at least for havana (which we [redhat] still support downstream) unless someone has a good reason not to? (or beats me to it)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matthew Edmonds (edmondsw)](https://launchpad.net/~edmondsw) wrote on 2015-04-03: |  |  | [#13](/nova/%2Bbug/1419577/comments/13) |
| --- | --- | --- | --- |

per <http://seclists.org/oss-sec/2015/q1/990>:

For purposes of CVE, we typically don't think of vulnerabilities in the way expressed in [https://bugs.launchpad.net/nova/+bug/1419577/comments/4](https://bugs.launchpad.net/nova/%2Bbug/1419577/comments/4) "without a way to make the migration process fail, this is a bug with security consequence, but not a vulnerability." In other words, for a CVE, the attacker can be a person who wishes to have an unauthorized volume attachment after the bug is triggered. The attacker does not need to be a person who has determined a reproducible way to trigger the bug.

per http://seclists.org/oss-sec/2015/q1/990:
For purposes of CVE, we typically don't think of vulnerabilities in the way expressed in https://bugs.launchpad.net/nova/+bug/1419577/comments/4 "without a way to make the migration process fail, this is a bug with security consequence, but not a vulnerability." In other words, for a CVE, the attacker can be a person who wishes to have an unauthorized volume attachment after the bug is triggered. The attacker does not need to be a person who has determined a reproducible way to trigger the bug.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2015-04-03: |  |  | [#14](/nova/%2Bbug/1419577/comments/14) |
| --- | --- | --- | --- |

And as I indicated in follow-up replies on that thread, the OpenStack VMT doesn't decide whether or not a bug is worthy of getting a CVE assigned (only whether or not we're going to embargo it and/or eventually issue a security advisory about it).

And as I indicated in follow-up replies on that thread, the OpenStack VMT doesn't decide whether or not a bug is worthy of getting a CVE assigned (only whether or not we're going to embargo it and/or eventually issue a security advisory about it).

[Matt Riedemann (mriedem)](https://launchpad.net/~mriedem)
on 2015-05-26

| **tags**: | added: live-migration volumes |
| --- | --- |

[Pawel Koniszewski (pawel-koniszewski)](https://launchpad.net/~pawel-koniszewski)
on 2015-05-29

| **tags**: | added: live-migrateremoved: live-migration |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matt Riedemann (mriedem)](https://launchpad.net/~mriedem) wrote on 2015-05-29: |  |  | [#15](/nova/%2Bbug/1419577/comments/15) |
| --- | --- | --- | --- |

I'm trying to sort this out a bit.

Looking at the nova.virt.libvirt.driver.pre\_live\_migration() method, I see it's connecting to a volume and the connection\_info dictionary is updated in the nova.virt.libvirt.volume code, but I don't see where that connection\_info dict comes back to the virt driver's pre\_live\_migration method and persists the change to the database.

This is where pre\_live\_migration() connects the volume:

<http://git.openstack.org/cgit/openstack/nova/tree/nova/virt/libvirt/driver.py?id=2015.1.0#n5813>

Let's assume we're using the LibvirtISCSIVolumeDriver volume driver, the connect\_volume method in there will update the connection\_info dict here:

<http://git.openstack.org/cgit/openstack/nova/tree/nova/virt/libvirt/volume.py?id=2015.1.0#n483>

That change never gets persisted back to the block\_device\_mapping table for the bdm instance, but we've connected the volume potentially on another host so if live migration fails and we never rollback the volume connection\_info to the source host (before pre\_live\_migration), and reboot the instance, then the bdm will be recreated from what's in the database which will be wrong.

I'm trying to sort this out a bit.
Looking at the nova.virt.libvirt.driver.pre\_live\_migration() method, I see it's connecting to a volume and the connection\_info dictionary is updated in the nova.virt.libvirt.volume code, but I don't see where that connection\_info dict comes back to the virt driver's pre\_live\_migration method and persists the change to the database.
This is where pre\_live\_migration() connects the volume:
http://git.openstack.org/cgit/openstack/nova/tree/nova/virt/libvirt/driver.py?id=2015.1.0#n5813
Let's assume we're using the LibvirtISCSIVolumeDriver volume driver, the connect\_volume method in there will update the connection\_info dict here:
http://git.openstack.org/cgit/openstack/nova/tree/nova/virt/libvirt/volume.py?id=2015.1.0#n483
That change never gets persisted back to the block\_device\_mapping table for the bdm instance, but we've connected the volume potentially on another host so if live migration fails and we never rollback the volume connection\_info to the source host (before pre\_live\_migration), and reboot the instance, then the bdm will be recreated from what's in the database which will be wrong.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Justin Shepherd (jshepher)](https://launchpad.net/~jshepher) wrote on 2015-08-03: |  |  | [#16](/nova/%2Bbug/1419577/comments/16) |
| --- | --- | --- | --- |

Should this bug remain open as it is targeted to a no longer supported version (havana)?

Should this bug remain open as it is targeted to a no longer supported version (havana)?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matt Riedemann (mriedem)](https://launchpad.net/~mriedem) wrote on 2015-08-18: |  |  | [#17](/nova/%2Bbug/1419577/comments/17) |
| --- | --- | --- | --- |

I have a feeling that this is fixed via <https://review.openstack.org/#/c/211051/> .

I have a feeling that this is fixed via https://review.openstack.org/#/c/211051/ .

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matt Riedemann (mriedem)](https://launchpad.net/~mriedem) wrote on 2015-08-18: |  |  | [#18](/nova/%2Bbug/1419577/comments/18) |
| --- | --- | --- | --- |

Per comment 17, maybe not given that's post live migration which is only called for a successful live migration, the rollback is called for a failed live migration.

Per comment 17, maybe not given that's post live migration which is only called for a successful live migration, the rollback is called for a failed live migration.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matt Riedemann (mriedem)](https://launchpad.net/~mriedem) wrote on 2015-08-18: |  |  | [#19](/nova/%2Bbug/1419577/comments/19) |
| --- | --- | --- | --- |

@Justin, per comment 16, this was reported against Havana but as far as I can tell this is not yet resolved in master (Liberty right now).

@Justin, per comment 16, this was reported against Havana but as far as I can tell this is not yet resolved in master (Liberty right now).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Matt Riedemann (mriedem)](https://launchpad.net/~mriedem) wrote on 2015-09-28: |  |  | [#20](/nova/%2Bbug/1419577/comments/20) |
| --- | --- | --- | --- |

I'm wondering if the fix (<https://review.openstack.org/#/c/202770/>) for [bug 1475411](/bugs/1475411) plays here, i.e. the case that the live migration from A to B is considered successful even though we didn't disconnect the correct volumes, and then that causes the migration from B back to A to fail.

I'm wondering if the fix (https://review.openstack.org/#/c/202770/) for bug 1475411 plays here, i.e. the case that the live migration from A to B is considered successful even though we didn't disconnect the correct volumes, and then that causes the migration from B back to A to fail.

[Paul Murray (pmurray)](https://launchpad.net/~pmurray)
on 2015-11-06

| **tags**: | added: live-migrationremoved: live-migrate |
| --- | --- |

[lvmxh (shaohef)](https://launchpad.net/~shaohef)
on 2015-11-17

| Changed in nova: | |
| --- | --- |
| **assignee**: | nobody → lvmxh (shaohef) |

[lvmxh (shaohef)](https://launchpad.net/~shaohef)
on 2015-12-03

| Changed in nova: | |
| --- | --- |
| **assignee**: | lvmxh (shaohef) → nobody |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tobias Urdin (tobias-urdin)](https://launchpad.net/~tobias-urdin) wrote on 2015-12-14: |  |  | [#21](/nova/%2Bbug/1419577/comments/21) |
| --- | --- | --- | --- |

Can anybody please verify if my bug is a duplicate of this one? [https://bugs.launchpad.net/nova/+bug/1525802](https://bugs.launchpad.net/nova/%2Bbug/1525802)

Can anybody please verify if my bug is a duplicate of this one? https://bugs.launchpad.net/nova/+bug/1525802

[lvmxh (shaohef)](https://launchpad.net/~shaohef)
on 2016-01-27

| **information type**: | Public → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2016-01-27: |  |  | [#22](/nova/%2Bbug/1419577/comments/22) |
| --- | --- | --- | --- |

Since this bug was switched from public back to public security with no comment explaining why, I have reset it to public again. Please, whenever moving a bug to a security type, add a comment with your reasoning.

Since this bug was switched from public back to public security with no comment explaining why, I have reset it to public again. Please, whenever moving a bug to a security type, add a comment with your reasoning.

| **information type**: | Public Security → Public |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2016-07-07: |  |  | [#23](/nova/%2Bbug/1419577/comments/23) |
| --- | --- | --- | --- |

We've seen this downstream against RHEL OSP 7 (kilo) documented (mostly privately) in the following RHBZ:

iscsi details changed for cinder volume using EMCCLIISCSIDriver

<https://bugzilla.redhat.com/show_bug.cgi?id=1353147>

We manually reverted the changes to the target\_luns to workaround the issue in this case. This still looks possible against master so I'm going to propose a change refreshing connection\_info on the source host during \_rollback\_live\_migration.

We've seen this downstream against RHEL OSP 7 (kilo) documented (mostly privately) in the following RHBZ:
iscsi details changed for cinder volume using EMCCLIISCSIDriver
https://bugzilla.redhat.com/show\_bug.cgi?id=1353147
We manually reverted the changes to the target\_luns to workaround the issue in this case. This still looks possible against master so I'm going to propose a change refreshing connection\_info on the source host during \_rollback\_live\_migration.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-07-07:  [**Fix proposed to nova (master)**](/nova/%2Bbug/1419577/comments/24) |  |  | [#24](/nova/%2Bbug/1419577/comments/24) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/338929>

Fix proposed to branch: master
Review: https://review.openstack.org/338929

| Changed in nova: | |
| --- | --- |
| **assignee**: | nobody → Lee Yarwood (lyarwood) |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-10-18:  [**Related fix merged to nova (master)**](/nova/%2Bbug/1419577/comments/25) |  |  | [#25](/nova/%2Bbug/1419577/comments/25) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/342111>

Committed: <https://git.openstack.org/cgit/openstack/nova/commit/?id=b83cae02ece4c338e09c3606c6ae69b715bd6f8c>

Submitter: Jenkins

Branch: master

commit b83cae02ece4c338e09c3606c6ae69b715bd6f8c

Author: Lee Yarwood <email address hidden>

Date: Thu Jul 14 11:53:09 2016 +0100

block\_device: Make refresh\_conn\_infos py3 compatible

Also add a simple test ensuring that refresh\_connection\_info is called

    for each DriverVolumeBlockDevice derived device provided.

Related-Bug: #1419577

    Partially-Implements: blueprint goal-python35

    Change-Id: Ib1ff00e7f4f5b599317d7111c322ce9af8a9a2b1

Reviewed: https://review.openstack.org/342111
Committed: https://git.openstack.org/cgit/openstack/nova/commit/?id=b83cae02ece4c338e09c3606c6ae69b715bd6f8c
Submitter: Jenkins
Branch: master
commit b83cae02ece4c338e09c3606c6ae69b715bd6f8c
Author: Lee Yarwood <lyarwood@redhat.com>
Date: Thu Jul 14 11:53:09 2016 +0100
block\_device: Make refresh\_conn\_infos py3 compatible
Also add a simple test ensuring that refresh\_connection\_info is called
for each DriverVolumeBlockDevice derived device provided.
Related-Bug: #1419577
Partially-Implements: blueprint goal-python35
Change-Id: Ib1ff00e7f4f5b599317d7111c322ce9af8a9a2b1

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2016-10-26

| Changed in nova: | |
| --- | --- |
| **assignee**: | Lee Yarwood (lyarwood) → Dan Smith (danms) |

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2016-10-26

| Changed in nova: | |
| --- | --- |
| **assignee**: | Dan Smith (danms) → Lee Yarwood (lyarwood) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-10-29:  [**Fix proposed to nova (master)**](/nova/%2Bbug/1419577/comments/26) |  |  | [#26](/nova/%2Bbug/1419577/comments/26) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/391598>

Fix proposed to branch: master
Review: https://review.openstack.org/391598

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-11-07:  [**Change abandoned on nova (master)**](/nova/%2Bbug/1419577/comments/27) |  |  | [#27](/nova/%2Bbug/1419577/comments/27) |
| --- | --- | --- | --- |

Change abandoned by Lee Yarwood (<email address hidden>) on branch: master

Review: <https://review.openstack.org/391598>

Change abandoned by Lee Yarwood (lyarwood@redhat.com) on branch: master
Review: https://review.openstack.org/391598

[Matt Riedemann (mriedem)](https://launchpad.net/~mriedem)
on 2016-12-09

| Changed in nova: | |
| --- | --- |
| **status**: | In Progress → Confirmed |
| **assignee**: | Lee Yarwood (lyarwood) → nobody |

[Sean Dague (sdague)](https://launchpad.net/~sdague)
on 2016-12-09

| Changed in nova: | |
| --- | --- |
| **importance**: | High → Medium |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood) wrote on 2016-12-09: |  |  | [#28](/nova/%2Bbug/1419577/comments/28) |
| --- | --- | --- | --- |

<https://review.openstack.org/#/c/338929/> is the correct WIP review that I've been working on. It's currently waiting on <https://review.openstack.org/#/c/389608/> so we can use the stashed bdms to reset connection\_info without additional calls to Cinder.

https://review.openstack.org/#/c/338929/ is the correct WIP review that I've been working on. It's currently waiting on https://review.openstack.org/#/c/389608/ so we can use the stashed bdms to reset connection\_info without additional calls to Cinder.

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2017-01-17

| Changed in nova: | |
| --- | --- |
| **assignee**: | nobody → Lee Yarwood (lyarwood) |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Sean Dague (sdague)](https://launchpad.net/~sdague) wrote on 2017-06-27: |  |  | [#29](/nova/%2Bbug/1419577/comments/29) |
| --- | --- | --- | --- |

Automatically discovered version havana in description. If this is incorrect, please update the description to include 'nova version: ...'

Automatically discovered version havana in description. If this is incorrect, please update the description to include 'nova version: ...'

| **tags**: | added: openstack-version.havana |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2017-08-01: |  |  | [#30](/nova/%2Bbug/1419577/comments/30) |
| --- | --- | --- | --- |

Change abandoned by Sean Dague (<email address hidden>) on branch: master

Review: <https://review.openstack.org/338929>

Reason: This review is > 4 weeks without comment, and is not mergable in it's current state. We are abandoning this for now. Feel free to reactivate the review by pressing the restore button and leaving a 'recheck' comment to get fresh test results.

Change abandoned by Sean Dague (sean@dague.net) on branch: master
Review: https://review.openstack.org/338929
Reason: This review is > 4 weeks without comment, and is not mergable in it's current state. We are abandoning this for now. Feel free to reactivate the review by pressing the restore button and leaving a 'recheck' comment to get fresh test results.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2018-07-02: |  |  | [#31](/nova/%2Bbug/1419577/comments/31) |
| --- | --- | --- | --- |

Change abandoned by Lee Yarwood (<email address hidden>) on branch: master

Review: <https://review.openstack.org/338929>

Reason: <https://review.openstack.org/#/c/551302/>

Change abandoned by Lee Yarwood (lyarwood@redhat.com) on branch: master
Review: https://review.openstack.org/338929
Reason: https://review.openstack.org/#/c/551302/

[Lee Yarwood (lyarwood)](https://launchpad.net/~lyarwood)
on 2020-09-15

| Changed in nova: | |
| --- | --- |
| **status**: | In Progress → Fix Released |

[See full activity log](https://bugs.launchpad.net/nova/%2Bbug/1419577/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/nova/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

## Duplicates of this bug

* [Bug #1416314](https://bugs.launchpad.net/nova/%2Bbug/1416314 "BUG :  when live-migration failed, lun-id couldn't be rollback")
* [Bug #1573944](https://bugs.launchpad.net/nova/%2Bbug/1573944 "target-lun id of volume changed when live-migration failed")

You are
[not directly subscribed to this bug's notifications.](/nova/%2Bbug/1419577/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/nova/%2Bbug/1419577/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/nova/%2Bbug/1419577/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Remote bug watches

* [redhat-bugs #1353147](https://bugzilla.redhat.com/show_bug.cgi?id=1353147)

  [ON\_DEV]
  [Edit](/bugs/1419577/%2Bwatch/120403 "Change watch details")

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))


