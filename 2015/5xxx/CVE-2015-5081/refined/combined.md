=== Content from github.com_1407abf6_20250126_030900.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdjango-cms%2Fdjango-cms%2Fcommit%2Ff77cbc607d6e2a62e63287d37ad320109a2cc78a)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdjango-cms%2Fdjango-cms%2Fcommit%2Ff77cbc607d6e2a62e63287d37ad320109a2cc78a)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=django-cms%2Fdjango-cms)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[django-cms](/django-cms)
/
**[django-cms](/django-cms/django-cms)**
Public

* [Notifications](/login?return_to=%2Fdjango-cms%2Fdjango-cms) You must be signed in to change notification settings
* [Fork
  3.1k](/login?return_to=%2Fdjango-cms%2Fdjango-cms)
* [Star
   10.3k](/login?return_to=%2Fdjango-cms%2Fdjango-cms)

* [Code](/django-cms/django-cms)
* [Issues
  118](/django-cms/django-cms/issues)
* [Pull requests
  15](/django-cms/django-cms/pulls)
* [Discussions](/django-cms/django-cms/discussions)
* [Actions](/django-cms/django-cms/actions)
* [Projects
  2](/django-cms/django-cms/projects)
* [Security](/django-cms/django-cms/security)
* [Insights](/django-cms/django-cms/pulse)

Additional navigation options

* [Code](/django-cms/django-cms)
* [Issues](/django-cms/django-cms/issues)
* [Pull requests](/django-cms/django-cms/pulls)
* [Discussions](/django-cms/django-cms/discussions)
* [Actions](/django-cms/django-cms/actions)
* [Projects](/django-cms/django-cms/projects)
* [Security](/django-cms/django-cms/security)
* [Insights](/django-cms/django-cms/pulse)

## Commit

[Permalink](/django-cms/django-cms/commit/f77cbc607d6e2a62e63287d37ad320109a2cc78a)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request [#4218](https://github.com/django-cms/django-cms/pull/4218) from divio/issues/merge\_csrf\_fix

[Browse files](/django-cms/django-cms/tree/f77cbc607d6e2a62e63287d37ad320109a2cc78a)
Browse the repository at this point in the history

```
Issues/merge csrf fix
```

* Loading branch information

[![@yakky](https://avatars.githubusercontent.com/u/714711?s=40&v=4)](/yakky)

[yakky](/django-cms/django-cms/commits?author=yakky "View all commits by yakky")
committed
Jun 27, 2015

2 parents
[d1f7a7b](/django-cms/django-cms/commit/d1f7a7b64bb89441d28279edb51e86152a0af9c7)
+
[a6e9157](/django-cms/django-cms/commit/a6e91576399429e1e41c5478101d280736ca236e)

commit f77cbc6

 Show file tree

 Hide file tree

Showing
**7 changed files**
with
**51 additions**
and
**12 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* cms

  + admin

    - cms/admin/pageadmin.py
      [pageadmin.py](#diff-ad493a898064e816647e8db518daba4f1fb1cc210619624718b0662789b179cb)
  + static/cms/js/modules

    - cms/static/cms/js/modules/cms.changelist.js
      [cms.changelist.js](#diff-47ff16c1dc2105c860656c00dec8cb89dd82c8b776521397565bede593a7c5c3)
    - cms/static/cms/js/modules/cms.toolbar.js
      [cms.toolbar.js](#diff-0849a38c9aa0f0cb16d2476930e2b37c9913bbdd15509d48ee114db1cdad404e)
  + templates/admin/cms/page/tree

    - cms/templates/admin/cms/page/tree/menu\_item.html
      [menu\_item.html](#diff-0ca28c3803264bad5173fe6284b44b7d996a04c49bae072e9d55933a5b17a04e)
  + tests

    - cms/tests/admin.py
      [admin.py](#diff-fa4d2bd625388396ed0bc4c3fea7a4dc77ac96404f37542753a1a6df750201df)
    - cms/tests/publisher.py
      [publisher.py](#diff-9c161929fcf0a284678d891b20da6d9098d92444b7752dcfa5b452c72f41ab5e)
    - cms/tests/reversion\_tests.py
      [reversion\_tests.py](#diff-36b37eb667fed21585cf220ebbd373c9e07b5a519ef53866440d7114b42d536c)

## There are no files selected for viewing

6 changes: 6 additions & 0 deletions

6
[cms/admin/pageadmin.py](#diff-ad493a898064e816647e8db518daba4f1fb1cc210619624718b0662789b179cb "cms/admin/pageadmin.py")

Show comments

[View file](/django-cms/django-cms/blob/f77cbc607d6e2a62e63287d37ad320109a2cc78a/cms/admin/pageadmin.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -928,6 +928,7 @@ def change\_template(self, request, object\_id): |
|  |  | helpers.make\_revision\_with\_plugins(page, request.user, message) |
|  |  | return HttpResponse(force\_unicode(\_("The template was successfully changed"))) |
|  |  |  |
|  |  | @require\_POST |
|  |  | @wrap\_transaction |
|  |  | def move\_page(self, request, page\_id, extra\_context=None): |
|  |  | """ |
| Expand Down  Expand Up | | @@ -1013,6 +1014,7 @@ def copy\_language(self, request, page\_id): |
|  |  | helpers.make\_revision\_with\_plugins(page, request.user, message) |
|  |  | return HttpResponse("ok") |
|  |  |  |
|  |  | @require\_POST |
|  |  | @wrap\_transaction |
|  |  | def copy\_page(self, request, page\_id, extra\_context=None): |
|  |  | """ |
| Expand Down  Expand Up | | @@ -1046,6 +1048,7 @@ def copy\_page(self, request, page\_id, extra\_context=None): |
|  |  | context.update(extra\_context or {}) |
|  |  | return HttpResponseRedirect('../../') |
|  |  |  |
|  |  | @require\_POST |
|  |  | @wrap\_transaction |
|  |  | @create\_revision() |
|  |  | def publish\_page(self, request, page\_id, language): |
| Expand Down  Expand Up | | @@ -1146,6 +1149,7 @@ def cleanup\_history(self, page, publish=False): |
|  |  | revision.delete() |
|  |  | deleted.append(revision.pk) |
|  |  |  |
|  |  | @require\_POST |
|  |  | @wrap\_transaction |
|  |  | def unpublish(self, request, page\_id, language): |
|  |  | """ |
| Expand Down  Expand Up | | @@ -1181,6 +1185,7 @@ def unpublish(self, request, page\_id, language): |
|  |  | path = "%s?language=%s&page\_id=%s" % (path, request.GET.get('redirect\_language'), request.GET.get('redirect\_page\_id')) |
|  |  | return HttpResponseRedirect(path) |
|  |  |  |
|  |  | @require\_POST |
|  |  | @wrap\_transaction |
|  |  | def revert\_page(self, request, page\_id, language): |
|  |  | page = get\_object\_or\_404(Page, id=page\_id) |
| Expand Down  Expand Up | | @@ -1316,6 +1321,7 @@ def preview\_page(self, request, object\_id, language): |
|  |  | page.site.domain, url) |
|  |  | return HttpResponseRedirect(url) |
|  |  |  |
|  |  | @require\_POST |
|  |  | def change\_innavigation(self, request, page\_id): |
|  |  | """ |
|  |  | Switch the in\_navigation of a page |
| Expand Down | |  |

13 changes: 11 additions & 2 deletions

13
[cms/static/cms/js/modules/cms.changelist.js](#diff-47ff16c1dc2105c860656c00dec8cb89dd82c8b776521397565bede593a7c5c3 "cms/static/cms/js/modules/cms.changelist.js")

Show comments

[View file](/django-cms/django-cms/blob/f77cbc607d6e2a62e63287d37ad320109a2cc78a/cms/static/cms/js/modules/cms.changelist.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -180,8 +180,17 @@ $(document).ready(function () { |
|  |  | // cancel if not confirmed |
|  |  | if(!confirm(that.options.lang.publish.replace('§', $(this).text().toLowerCase()))) return false; |
|  |  |  |
|  |  | // publish page and update |
|  |  | window.location.href = $(this).attr('href'); |
|  |  | // send post request to prevent xss attacks |
|  |  | $.ajax({ |
|  |  | 'type': 'post', |
|  |  | 'url': $(this).prop('href'), |
|  |  | 'success': function () { |
|  |  | CMS.API.Helpers.reloadBrowser(); |
|  |  | }, |
|  |  | 'error': function (request) { |
|  |  | throw new Error(request); |
|  |  | } |
|  |  | }); |
|  |  | }); |
|  |  | }, |
|  |  |  |
| Expand Down | |  |

22 changes: 21 additions & 1 deletion

22
[cms/static/cms/js/modules/cms.toolbar.js](#diff-0849a38c9aa0f0cb16d2476930e2b37c9913bbdd15509d48ee114db1cdad404e "cms/static/cms/js/modules/cms.toolbar.js")

Show comments

[View file](/django-cms/django-cms/blob/f77cbc607d6e2a62e63287d37ad320109a2cc78a/cms/static/cms/js/modules/cms.toolbar.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -213,7 +213,27 @@ $(document).ready(function () { |
|  |  |  |
|  |  | // in case of the publish button |
|  |  | btn.find('.cms\_publish-page').bind(that.click, function (e) { |
|  |  | if(!confirm(that.config.lang.publish)) e.preventDefault(); |
|  |  | if(!confirm(that.config.lang.publish)) { |
|  |  | e.preventDefault(); |
|  |  | } |
|  |  | }); |
|  |  |  |
|  |  | btn.find('.cms\_btn-publish').bind(that.click, function (e) { |
|  |  | e.preventDefault(); |
|  |  | // send post request to prevent xss attacks |
|  |  | $.ajax({ |
|  |  | 'type': 'post', |
|  |  | 'url': $(this).prop('href'), |
|  |  | 'data': { |
|  |  | 'csrfmiddlewaretoken': CMS.config.csrf |
|  |  | }, |
|  |  | 'success': function () { |
|  |  | CMS.API.Helpers.reloadBrowser(); |
|  |  | }, |
|  |  | 'error': function (request) { |
|  |  | throw new Error(request); |
|  |  | } |
|  |  | }); |
|  |  | }); |
|  |  | }); |
|  |  | }, |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[cms/templates/admin/cms/page/tree/menu\_item.html](#diff-0ca28c3803264bad5173fe6284b44b7d996a04c49bae072e9d55933a5b17a04e "cms/templates/admin/cms/page/tree/menu_item.html")

Show comments

[View file](/django-cms/django-cms/blob/f77cbc607d6e2a62e63287d37ad320109a2cc78a/cms/templates/admin/cms/page/tree/menu_item.html)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -30,8 +30,8 @@ |
|  |  | {% if lang in page.languages %} |
|  |  | <div class="language-tooltip" hidden="hidden"> |
|  |  | {% trans "Pick an action:" %} |
|  |  | <a href="./{{ page.id }}/{{ lang }}/unpublish/?redirect\_language={{ preview\_language }}&redirect\_page\_id={{ request.GET.page\_id }}">{% trans "Unpublish" %}</a> |
|  |  | <a href="./{{ page.id }}/{{ lang }}/publish/?redirect\_language={{ preview\_language }}&redirect\_page\_id={{ request.GET.page\_id }}">{% trans "Publish" %}</a> |
|  |  | <a href="./{{ page.id }}/{{ lang }}/unpublish/?redirect\_language={{ preview\_language }}&redirect\_page\_id={{ request.GET.page\_id }}" class="js-ajax-submit">{% trans "Unpublish" %}</a> |
|  |  | <a href="./{{ page.id }}/{{ lang }}/publish/?redirect\_language={{ preview\_language }}&redirect\_page\_id={{ request.GET.page\_id }}" class="js-ajax-submit">{% trans "Publish" %}</a> |
|  |  | </div> |
|  |  | {% endif %} |
|  |  | {% else %} |
| Expand Down | |  |

10 changes: 7 additions & 3 deletions

10
[cms/tests/admin.py](#diff-fa4d2bd625388396ed0bc4c3fea7a4dc77ac96404f37542753a1a6df750201df "cms/tests/admin.py")

Show comments

[View file](/django-cms/django-cms/blob/f77cbc607d6e2a62e63287d37ad320109a2cc78a/cms/tests/admin.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -704,14 +704,14 @@ def test\_change\_publish\_unpublish(self): |
|  |  | with self.login\_user\_context(permless): |
|  |  | request = self.get\_request() |
|  |  | response = self.admin\_class.publish\_page(request, page.pk, "en") |
|  |  | self.assertEqual(response.status\_code, 403) |
|  |  | self.assertEqual(response.status\_code, 405) |
|  |  | page = self.reload(page) |
|  |  | self.assertFalse(page.is\_published('en')) |
|  |  |  |
|  |  | request = self.get\_request(post\_data={'no': 'data'}) |
|  |  | response = self.admin\_class.publish\_page(request, page.pk, "en") |
|  |  | # Forbidden |
|  |  | self.assertEqual(response.status\_code, 403) |
|  |  | page = self.reload(page) |
|  |  | self.assertFalse(page.is\_published('en')) |
|  |  |  |
|  |  | admin\_user = self.get\_admin() |
| Expand Down  Expand Up | | @@ -747,6 +747,10 @@ def test\_change\_innavigation(self): |
|  |  | with self.login\_user\_context(permless): |
|  |  | request = self.get\_request() |
|  |  | response = self.admin\_class.change\_innavigation(request, page.pk) |
|  |  | self.assertEqual(response.status\_code, 405) |
|  |  | with self.login\_user\_context(permless): |
|  |  | request = self.get\_request(post\_data={'no': 'data'}) |
|  |  | response = self.admin\_class.change\_innavigation(request, page.pk) |
|  |  | self.assertEqual(response.status\_code, 403) |
|  |  | with self.login\_user\_context(permless): |
|  |  | request = self.get\_request(post\_data={'no': 'data'}) |
| Expand Down  Expand Up | | @@ -806,7 +810,7 @@ def test\_revert\_page\_redirects(self): |
|  |  | admin\_user = self.get\_admin() |
|  |  | self.page.publish("en") # Ensure public copy exists before reverting |
|  |  | with self.login\_user\_context(admin\_user): |
|  |  | response = self.client.get(admin\_reverse('cms\_page\_revert\_page', args=(self.page.pk, 'en'))) |
|  |  | response = self.client.post(admin\_reverse('cms\_page\_revert\_page', args=(self.page.pk, 'en'))) |
|  |  | self.assertEqual(response.status\_code, 302) |
|  |  | url = response['Location'] |
|  |  | self.assertTrue(url.endswith('?%s' % get\_cms\_setting('CMS\_TOOLBAR\_URL\_\_EDIT\_OFF'))) |
| Expand Down | |  |

6 changes: 3 additions & 3 deletions

6
[cms/tests/publisher.py](#diff-9c161929fcf0a284678d891b20da6d9098d92444b7752dcfa5b452c72f41ab5e "cms/tests/publisher.py")

Show comments

[View file](/django-cms/django-cms/blob/f77cbc607d6e2a62e63287d37ad320109a2cc78a/cms/tests/publisher.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -342,7 +342,7 @@ def test\_publish\_home(self): |
|  |  | self.assertEqual(Page.objects.all().count(), 1) |
|  |  | superuser = self.get\_superuser() |
|  |  | with self.login\_user\_context(superuser): |
|  |  | response = self.client.get(admin\_reverse("cms\_page\_publish\_page", args=[page.pk, 'en'])) |
|  |  | response = self.client.post(admin\_reverse("cms\_page\_publish\_page", args=[page.pk, 'en'])) |
|  |  | self.assertEqual(response.status\_code, 302) |
|  |  | self.assertEqual(response['Location'], "http://testserver/en/?%s" % get\_cms\_setting('CMS\_TOOLBAR\_URL\_\_EDIT\_OFF')) |
|  |  |  |
| Expand Down  Expand Up | | @@ -381,7 +381,7 @@ def test\_publish\_admin(self): |
|  |  | page = self.create\_page("test\_admin", published=False) |
|  |  | superuser = self.get\_superuser() |
|  |  | with self.login\_user\_context(superuser): |
|  |  | response = self.client.get(admin\_reverse("cms\_page\_publish\_page", args=[page.pk, 'en'])) |
|  |  | response = self.client.post(admin\_reverse("cms\_page\_publish\_page", args=[page.pk, 'en'])) |
|  |  | self.assertEqual(response.status\_code, 302) |
|  |  | page = Page.objects.get(pk=page.pk) |
|  |  |  |
| Expand All | | @@ -396,7 +396,7 @@ def test\_publish\_wrong\_lang(self): |
|  |  | ): |
|  |  | with self.login\_user\_context(superuser): |
|  |  | with force\_language('de'): |
|  |  | response = self.client.get(admin\_reverse("cms\_page\_publish\_page", args=[page.pk, 'en'])) |
|  |  | response = self.client.post(admin\_reverse("cms\_page\_publish\_page", args=[page.pk, 'en'])) |
|  |  | self.assertEqual(response.status\_code, 302) |
|  |  | page = Page.objects.get(pk=page.pk) |
|  |  |  |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[cms/tests/reversion\_tests.py](#diff-36b37eb667fed21585cf220ebbd373c9e07b5a519ef53866440d7114b42d536c "cms/tests/reversion_tests.py")

Show comments

[View file](/django-cms/django-cms/blob/f77cbc607d6e2a62e63287d37ad320109a2cc78a/cms/tests/reversion_tests.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -246,7 +246,7 @@ def test\_publish\_limits(self): |
|  |  | self.assertEqual(Revision.objects.all().count(), 5) |
|  |  | for x in range(10): |
|  |  | publish\_url = URL\_CMS\_PAGE + "%s/en/publish/" % page\_pk |
|  |  | response = self.client.get(publish\_url) |
|  |  | response = self.client.post(publish\_url) |
|  |  | self.assertEqual(response.status\_code, 302) |
|  |  | self.assertEqual(Revision.objects.all().count(), 4) |
|  |  |  |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `f77cbc6`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdjango-cms%2Fdjango-cms%2Fcommit%2Ff77cbc607d6e2a62e63287d37ad320109a2cc78a) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.django-cms.org_8ade2e23_20250124_194124.html ===


# [django CMS](/)

* Who we serve
  [for Marketers](/en/solutions-why-django-cms/for-enterprise-marketers/)
  [for Agencies](/en/solutions-why-django-cms/for-agencies-and-service-providers/)
  [for Developers](/en/solutions-why-django-cms/content-management-software-for-developers/)
  [for Universities](/en/solutions-why-django-cms/content-management-universities/)
* About django CMS
  [Features](/en/solutions-why-django-cms/)
  [FAQs](/en/faq/)
  [Case Studies](/en/case-studies/)
  [Ecosystem](/en/repositories-plugins/)
  [Product Vision](/en/product-vision/)
  [Current Projects & Releases](/en/developers/roadmap/)
* Our Community
  [How to contribute](/en/contribute/)
  [The django CMS Association](/en/about-us/)
  [Volunteering](/en/volunteering-opportunities/)
  [Fellowship Program](/en/fellowship-program/)
  [Our Supporters](/en/community/django-cms-supporters/)
  [Events](/en/events/)
  [Experts & Partners](/en/tech-partners/)
* Resources
  [Get our Newsletter](/en/newsletter/)
  [Support](/en/support/)
  [Get started](/en/get-started-django-cms/)
  [News](/en/community/blog/)
  [Developer Docs](/en/developers/documentation/)
  [User Guide](https://user-guide.django-cms.org/en/latest/)
  [Press](/en/press/)
* [Live Demo](/en/django-cms-demo/)
* [Give back ❤️](/en/give-back-to-the-community/)

---

# Content: Blog

[Release](/en/blog/category/release/)

## 3.1.1 / 3.0.14 Release

[![Martin Koistinen](https://django-cms-2016-69800ad.aldryn-media.io/filer_public_thumbnails/filer_public/34/84/3484b2e4-e53c-4227-9a4a-40d926826a81/mkoistinen-frozen-square.png__50x50_q90_crop_subsampling-2_upscale.png)](/en/blog/author/martin-koistinen/)

[Martin Koistinen](/en/blog/author/martin-koistinen/)

June 27, 2015

[3.0](/en/blog/tag/30/)
[3.1](/en/blog/tag/31/)

This is the first minor release since the release of django CMS 3.1 but it contains some great improvements (like Django 1.8 support) as well as an important fix for a CSRF vulnerability. Upgrading to this or the companion 3.0.14 release are **strongly recommended** for all users of the CMS.

Here's a summary of the respective release notes:

## Changes Common to 3.1.1 and 3.0.14

### Security Vulnerability Fix

* Fixed an issue where privileged users could be tricked into performing certain actions without their knowledge via a CSRF vulnerability.

### Bug Fixes

* Fix issue which causes menu classes to be duplicated in advanced settings
* Fix issue with breadcrumbs not showing
* Fix issues with show\_menu templatetags
* Minor documentation fixes
* Fix an issue related to "Empty all" Placeholder feature
* Fix plugin sorting in py3
* Fix search results number and items alignment in page changelist
* Preserve information regarding the current view when applying the CMS decorator
* Change the label "Save and close" to "Save as draft"
* Fix X-Frame-Options on top-level pages
* Fix order of which application urls are injected into urlpatterns
* Fix delete non existing page language
* Fix language fallback for nested plugins
* Fix render\_model template tag doesn't show correct change list
* Fix scanning for placeholders fails on include tags with a variable as an argument
* Pin South version to 1.0.2
* Pin Html5lib version to 0.999 until a current bug is fixed
* Fix language chooser template

## What's New Exclusively to 3.1.1

### Features / Additions

* Add Django 1.8 support
* Tutorial updates and improvements
* Add copy\_site command
* Add setting to disable toolbar for anonymous users
* Add setting to hide toolbar when a URL is not handled by django CMS
* Add editorconfig configuration

### Bug Fixes

All of the bug fixes mentioned in the common set of fixes above plus these, 3.1-specific fixes:

* Fix an error in placeholder cache
* Fix get\_language\_from\_request if POST and GET exists
* Revert whitespace cleanup on flash player to fix it
* Correctly restore previous status of dragbars
* Fix language-related issues when retrieving page URL
* Fix errors with toolbar population
* Fix error with watch\_models type
* Fix error with plugin breadcrumbs order
* Fix handling of plugin position attribute
* Fix for some structureboard issues
* Make shift tab work correctly in submenu

## What's New Exclusively to 3.0.14

### Bug Fixes

All of the bug fixes mentioned in the common set of fixes above plus these, 3.0-specific fixes:

* Fix an issue related to "Empty all" Placeholder feature

### Full release notes:

* **3.1.1**: <https://django-cms.readthedocs.org/en/develop/upgrade/3.1.1.html>
* **3.0.14**: <https://django-cms.readthedocs.org/en/develop/upgrade/3.0.14.html>

## Extra Special Thanks

We'd like to also acknowledge the work of Python experts, Security Researchers and all around good folks: Sylvain Fankhauser of [L//P](https://www.liip.ch/en) and Matthew Wilkes of [The Code Distillery](https://thedistillery.eu/), who discovered and privately demonstrated to the django CMS core developers an important CSRF vulnerability and contacted us through the documented channels.

If you should discover any security issues with django CMS, please let us know at [[email protected]](/cdn-cgi/l/email-protection#dfacbabcaaadb6aba69fbbb5beb1b8b0f2bcb2acf1b0adb8).

Please enable JavaScript to view the [comments powered by Disqus.](http://disqus.com/?ref_noscript)
[blog comments powered by Disqus](http://disqus.com)

* – [Back to Overview](/en/blog/) –

---

## Do you want to test django CMS?

[Try django CMS](//www.django-cms.org/en/test-django-cms/)

django CMS Association

The association behind django CMS

Email [[email protected]](/cdn-cgi/l/email-protection#b2dbdcd4ddf2d6d8d3dcd5dd9fd1dfc19cddc0d5)

[Subscribe to Newsletter](//www.django-cms.org/en/newsletter/)

###### Community

[Blog](/en/community/blog/)

[Events](/en/community/events/)

[Security](/en/community/security/)

[Our Supporters](/en/community/django-cms-supporters/)

###### Developers

[Documentation](/en/developers/documentation/)

[Roadmap](/en/developers/roadmap/)

[Repository](/en/developers/repository/)

[Issue tracker](/en/developers/issue-tracker/)

###### Follow us

[![icon-github.png](https://django-cms-2016-69800ad.aldryn-media.io/filer_public/3b/4b/3b4b7b5c-34ee-405f-aef1-167821359c6d/icon-github.png)](https://github.com/divio/django-cms)
  [![icon-linkedin-32.png](https://django-cms-2016-69800ad.aldryn-media.io/filer_public/b1/8d/b18d2af6-dad7-456c-b6c5-350ae0dfbde9/icon-linkedin-32.png)](https://www.linkedin.com/company/56462850)
[Mastodon](https://fosstodon.org/%40djangocms)
[Youtube](https://www.youtube.com/c/djangocms)

Join our [Discord Community](http://discord-main-channel.django-cms.org)

* [Support](/en/support/)
* [Security](/en/support/)
* [Site Notice](/en/site-notice/)
* [Press](/en/press/)
* Privacy Settings

Copyright © 2001 - 2025 Divio AG. BSD Open-Source License.

Django CMS is based on [Python](https://www.python.org/) and [Django](https://www.djangoproject.com/)

A project backed by the django CMS Association

Accept
This website uses cookies to help ensure that you enjoy the best experience.

×
#### Privacy Settings

Websites do not have full control over cookies that may set by various third-party scripts.
To see detailed information about and to manage cookies in your browser, please check its privacy
settings.

##### Essentials

These cookies and scripts cannot be deactivated as they are needed to correctly render this website.

* Segment
* Intercom

---

Accept

### Please enable JavaScript

### Your browser is out-of-date!

Update your browser to view this website correctly.

[Update my browser now](http://outdatedbrowser.com/)

×



=== Content from www.openwall.com_4c865e93_20250124_194122.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](../../../2015/06/27/1) [[next>]](2) [[<thread-prev]](../../../2015/06/27/1) [[thread-next>]](2) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <20150628105507.210D96C00E7@smtpvmsrv1.mitre.org>
Date: Sun, 28 Jun 2015 06:55:07 -0400 (EDT)
From: cve-assign@...re.org
To: matthew@...thewwilkes.co.uk
Cc: cve-assign@...re.org, oss-security@...ts.openwall.com
Subject: Re: CVE Request: Django CMS

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

> a CSRF issue around publishing of draft changes
>
> <http://www.django-cms.org/en/blog/2015/06/27/311-3014-release/>
> <https://github.com/divio/django-cms/commit/f77cbc607d6e2a62e63287d37ad320109a2cc78a>

Use CVE-2015-5081 for the CSRF issue.

The cms.changelist.js and cms.toolbar.js changes include a comment
"send post request to prevent xss attacks." The "xss" word choice
might be a mistake. We are not currently assigning a CVE ID for a
separate XSS issue.

> Sylvain Fankhauser of L//P and Matthew Wilkes of The Code Distillery,
> who discovered and privately demonstrated to the django CMS core
> developers an important CSRF vulnerability and contacted us through
> the documented channels.

CVE IDs were not assigned on a per-discoverer basis here because there
was no available information suggesting that different persons
independently discovered different CSRF problems.

- --
CVE assignment team, MITRE CVE Numbering Authority
M/S M300
202 Burlington Road, Bedford, MA 01730 USA
[ PGP key available through <http://cve.mitre.org/cve/request_id.html> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.14 (SunOS)

iQEcBAEBAgAGBQJVj9ICAAoJEKllVAevmvmsdu4H/1c3jL6XKKu20IXZe50bHo3q
LIqJQ5uIfYR3K1ZwO2UIP4GYQHfbnJw7sSMnijAeEqkKXOdZLNwyVXM8od20YR2x
axSLTHjl6Wygxn+z+inLf5pRNZiF4q+s4U+h0KXUIbJN6VDtSYkY5f0axh4P29sv
JwTmVzL6+WWEiJ24gRY8uB6awhoFCFJ+62BCqNSnBoa81rt6mwMIMO4z4deKJM5Y
p8K0jSeYJF8HHuhIGCBFUQ02jC8arlawuwnsyjnjFDOFSbLMrhuwVx7yF5Ut+Z8P
nNl38ABeqm03r6dRp1Fu81itEhH3Gw3EGXbDyr8Ivbk2TQ7L4bntdxnAPPOb8TU=
=3AtE
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).


