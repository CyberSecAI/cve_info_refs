=== Content from bugzilla.redhat.com_89e8a756_20250126_044922.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1271692)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1271692)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1271692)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1271692

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1271692**](show_bug.cgi?id=1271692)
- python-rdomanager-oscplugin should not install unit tests

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
python-rdomanager-oscplugin should not install unit tests

| | [Keywords](describekeywords.cgi): | Triaged | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat OpenStack | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat OpenStack "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | python-rdomanager-oscplugin | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 7.0 (Kilo) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | y2 | | [Target Release](page.cgi?id=fields.html#target_release): | 7.0 (Kilo) | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Mike Burns | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Udi Kalifon | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1271670](show_bug.cgi?id=1271670 "CLOSED CURRENTRELEASE - packages should not install unit tests") | | TreeView+ | [depends on](buglist.cgi?bug_id=1271692&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1271692&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2015-10-14 13:48 UTC by Mike Burns | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2015-12-21 16:51 UTC ([History](show_activity.cgi?id=1271692)) | | [CC List:](page.cgi?id=fields.html#cclist) | 6 users (show)  calfonso dnavale jslagle mburns rhel-osp-director-maint sasha | | Fixed In Version: | python-rdomanager-oscplugin-0.0.10-9.el7ost | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2015-12-21 16:51:46 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Gerrithub.io | [249799](https://review.gerrithub.io/249799) | 0 | None | None | None | Never | | Red Hat Product Errata | [RHSA-2015:2650](https://access.redhat.com/errata/RHSA-2015%3A2650) | 0 | normal | SHIPPED\_LIVE | Moderate: Red Hat Enterprise Linux OpenStack Platform 7 director update | 2015-12-21 21:44:54 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1271692#c0)  Mike Burns    2015-10-14 13:48:32 UTC  ``` python-rdomanager-oscplugin is currently installing unit tests and those should not be shipped.  This is with the latest OSPd 7.1 package.   ```  [Comment 6](show_bug.cgi?id=1271692#c6)  Udi Kalifon    2015-11-29 07:15:05 UTC  ``` Verified. Unit tests no longer included (rpm -ql python-rdomanager-oscplugin-0.0.10-19.el7ost.noarch).   ```  [Comment 9](show_bug.cgi?id=1271692#c9)  errata-xmlrpc    2015-12-21 16:51:46 UTC  ``` Since the problem described in this bug report should be resolved in a recent advisory, it has been closed with a resolution of ERRATA.  For information on the advisory, and where to find the updated files, follow the link below.  If the solution does not work for you, open a new bug report.  [https://access.redhat.com/errata/RHSA-2015:2650](https://access.redhat.com/errata/RHSA-2015%3A2650)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1271692&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from access.redhat.com_1ea78e87_20250125_003332.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2015:2650 - Security Advisory

Issued:
2015-12-21
Updated:
2015-12-21
# RHSA-2015:2650 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Moderate: Red Hat Enterprise Linux OpenStack Platform 7 director update

## Type/Severity

Security Advisory: Moderate

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2015%3A2650)

## Topic

Updated packages that fix two security issues and multiple bugs are now
available for Red Hat Enterprise Linux OpenStack Platform 7.0 director
for Red Hat Enterprise Linux 7.

Red Hat Product Security has rated this update as having Moderate security
impact. A Common Vulnerability Scoring System (CVSS) base score, which
gives a detailed severity rating, is available from the CVE link in the
References section.

## Description

Red Hat Enterprise Linux OpenStack Platform director provides the
facilities for deploying and monitoring a private or public
infrastructure-as-a-service (IaaS) cloud based on Red Hat Enterprise
Linux OpenStack Platform.

It was discovered that the director's NeutronMetadataProxySharedSecret
parameter remained specified at the default value of 'unset'. This value
is used by OpenStack Networking to sign instance headers; if unchanged,
an attacker knowing the shared secret could use this flaw to spoof
OpenStack Networking metadata requests. (CVE-2015-5303)

A flaw was found in the director (openstack-tripleo-heat-templates) where
the RabbitMQ credentials defaulted to guest/guest and supplied values in
the configuration were not used. As a result, all deployed overclouds used
the same credentials (guest/guest). A remote, non-authenticated attacker
could use this flaw to access RabbitMQ services in the deployed cloud.
(CVE-2015-5329)

The CVE-2015-5303 issue was discovered by Steven Hardy of Red Hat.
Red Hat would like to thank Kota Akatsuka of NEC for reporting the
CVE-2015-5329 issue.

Additional bug fixes include:

* Previously, hard-coded parameters were passed directly to Orchestration

(heat). As a result, the parameters could not be overridden properly. With
this update, a custom environment file from the parameters collected is
generated and pass as 'parameter\_defaults', allowing parameters to be
overridden.(BZ#1245737)

* Previously, when scaling out Compute nodes in the Overcloud after

an update was performed, the default UpdateIdentifier parameter in the
Orchestration stack caused the new node to attempt an update
as soon as it was coming up. Because the yum repositories were not
configured on the new nodes yet, this caused the update to fail,
which in turn caused the scale out to fail. With this update, the
client, python-rdomanager-oscplugin, does not clear the UpdateIdentifier
parameter on subsequent stack-update attempts (including the scale out)
until after the initial update has been completed. As a result, scale-out
attempts after the update now succeed.(BZ#1290796)

* Previously, the 'debug' parameter was enabled and hard-coded in the

overcloud deployment code, and the user could not disable debugging.
With this update, the 'debug' parameter has been removed from default
hard-coded parameters in the overcloud deployment code. As a result,
the user can now control the debugging level in the environment file
used to deploy the overcloud.(BZ#1259084)

* Previously, deployment validation checked all OpenStack Bare Metal

(ironic) nodes, including ones in maintenance mode (even though these
cannot be deployed), which resulted in false errors and warnings.
With this update, nodes in maintenance mode are skipped by the
validation step and false errors are no longer produced.(BZ#1261863)

* Previously, the 'tempest-deployer-input.conf' file contained an

incorrect stack\_owner\_role value, which meant that using this file for
post-install validation caused Tempest test failures. With this update,
the stack\_owner\_role value generated during deployment has been changed.
As a result, fewer Tempest tests will fail during post-install validation.
(BZ#1265714)

* Previously, breakpoints were not removed when an update operation

failed. If a user ran the "openstack overcloud update" command and it
failed, the subsequent stack-update command (for example, "openstack
overcloud deploy") could be stuck in the 'IN\_PROGRESS' state waiting for the
removal of breakpoints. With this update, all existing CLI commands
explicitly remove any existing breakpoints when running a stack-update
operation, and stack-update operations do not get stuck in the 'IN\_PROGRESS'
state.(BZ#1267558)

All Red Hat Enterprise Linux OpenStack Platform 7.0 director users are
advised to upgrade to these updated packages, which correct these issues
and add these enhancements.

## Solution

Before applying this update, make sure all previously released errata
relevant to your system have been applied.

For details on how to apply this update, refer to:

<https://access.redhat.com/articles/11258>

## Affected Products

* Red Hat OpenStack 7 x86\_64

## Fixes

* [BZ - 1231885](https://bugzilla.redhat.com/show_bug.cgi?id=1231885)
  - Nodes reconnection to the broker not working properly. Compute nodes are not registered again
* [BZ - 1241434](https://bugzilla.redhat.com/show_bug.cgi?id=1241434)
  - Add removal policies params for resource groups
* [BZ - 1245737](https://bugzilla.redhat.com/show_bug.cgi?id=1245737)
  - hard-coded parameters can't be overridden
* [BZ - 1252083](https://bugzilla.redhat.com/show_bug.cgi?id=1252083)
  - Secure rabbitmq installation for overcloud
* [BZ - 1259084](https://bugzilla.redhat.com/show_bug.cgi?id=1259084)
  - Unable to override value of Debug to deployment
* [BZ - 1260776](https://bugzilla.redhat.com/show_bug.cgi?id=1260776)
  - Error is displayed in the beginning of the deploy: "nodes with no profile that will not be used"
* [BZ - 1261863](https://bugzilla.redhat.com/show_bug.cgi?id=1261863)
  - The deployment configuration validation functions should skip nodes that are in maintenance mode
* [BZ - 1262425](https://bugzilla.redhat.com/show_bug.cgi?id=1262425)
  - memcached needs the interleave=true pacemaker attribute
* [BZ - 1265714](https://bugzilla.redhat.com/show_bug.cgi?id=1265714)
  - Tempest has a wrong stack\_owner\_role value when deploying with osp-d
* [BZ - 1266910](https://bugzilla.redhat.com/show_bug.cgi?id=1266910)
  - All l3 agents go to standby ha\_state after restarting haproxy resource
* [BZ - 1267558](https://bugzilla.redhat.com/show_bug.cgi?id=1267558)
  - Breakpoints are not deleted after stack-update operation
* [BZ - 1267855](https://bugzilla.redhat.com/show_bug.cgi?id=1267855)
  - unable to update overcloud configuration from underclound node.
* [BZ - 1268415](https://bugzilla.redhat.com/show_bug.cgi?id=1268415)
  - rhel-osp-director: unable to configure overcloud after creation using the OS::TripleO::NodeExtraConfigPost resource.
* [BZ - 1271692](https://bugzilla.redhat.com/show_bug.cgi?id=1271692)
  - python-rdomanager-oscplugin should not install unit tests
* [BZ - 1272297](https://bugzilla.redhat.com/show_bug.cgi?id=1272297)
  - CVE-2015-5303 python-rdomanager-oscplugin: NeutronMetadataProxySharedSecret parameter uses default value
* [BZ - 1272347](https://bugzilla.redhat.com/show_bug.cgi?id=1272347)
  - director stack update 7.0 to 7.1 KeystoneAdminApiNetwork change causes unwanted services restart
* [BZ - 1272357](https://bugzilla.redhat.com/show_bug.cgi?id=1272357)
  - director stack update 7.0 to 7.1 VIP change
* [BZ - 1275324](https://bugzilla.redhat.com/show_bug.cgi?id=1275324)
  - neutron-openvswitch-agent fails to restart under pacemaker
* [BZ - 1275812](https://bugzilla.redhat.com/show_bug.cgi?id=1275812)
  - overcloud deployment fails on not finding puppet resource
* [BZ - 1281460](https://bugzilla.redhat.com/show_bug.cgi?id=1281460)
  - ospd HA w/ templates deployment only brings up one controller instead of 3
* [BZ - 1281777](https://bugzilla.redhat.com/show_bug.cgi?id=1281777)
  - CVE-2015-5329 openstack-tripleo-heat-templates: Using hardcoded rabbitmq credentials regardless of supplied values
* [BZ - 1284914](https://bugzilla.redhat.com/show_bug.cgi?id=1284914)
  - Updating from 7.1 to 7.2 might fail with "ERROR: openstack 'NEUTRON\_METADATA\_PROXY\_SHARED\_SECRET'"
* [BZ - 1285079](https://bugzilla.redhat.com/show_bug.cgi?id=1285079)
  - orphaned keepalived processes remain in old neutron netns
* [BZ - 1285363](https://bugzilla.redhat.com/show_bug.cgi?id=1285363)
  - Deployment failure "httpd never started after 200 seconds"
* [BZ - 1285485](https://bugzilla.redhat.com/show_bug.cgi?id=1285485)
  - issue replacing the pacemaker cib during an update from a running 7.1 overcloud to 7.2/latest
* [BZ - 1287624](https://bugzilla.redhat.com/show_bug.cgi?id=1287624)
  - HA | External LB | Can't deploy HA with external LB because we don't have any haproxy resource to restart when deploying with external lb
* [BZ - 1290582](https://bugzilla.redhat.com/show_bug.cgi?id=1290582)
  - puppet / pacemaker race stopping and starting neutron-server on Step6 of puppet apply
* [BZ - 1290796](https://bugzilla.redhat.com/show_bug.cgi?id=1290796)
  - Set UpdateIdentifier after yum update causes subsequent scale out attempt to fail

## CVEs

* [CVE-2015-5303](https://www.redhat.com/security/data/cve/CVE-2015-5303.html)
* [CVE-2015-5329](https://www.redhat.com/security/data/cve/CVE-2015-5329.html)

## References

* <http://www.redhat.com/security/updates/classification/#normal>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat OpenStack 7

| SRPM | |
| --- | --- |
| openstack-tripleo-heat-templates-0.8.6-94.el7ost.src.rpm | SHA-256: f1cd7bcfc0845c4985bf5cd2266a3a261c5efb34726c437fc568954cd1e4d08e |
| python-rdomanager-oscplugin-0.0.10-22.el7ost.src.rpm | SHA-256: 59fdd243d6fa0ae51fcf399878d4e8210637158c65f186bc8366016f7178bfcf |
| x86\_64 | |
| openstack-tripleo-heat-templates-0.8.6-94.el7ost.noarch.rpm | SHA-256: 3262c7732cc474b6846e0739e089697ef6b15902d31ea1d6d3dd637e085d52c8 |
| python-rdomanager-oscplugin-0.0.10-22.el7ost.noarch.rpm | SHA-256: c18921d0b4e24bc34318c54ed0d537b4aa270937f9bb5ae51b31caec85953712 |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_e92b772d_20250126_044919.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1272297)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1272297)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1272297)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1272297

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1272297**](show_bug.cgi?id=1272297)
(CVE-2015-5303)
- [CVE-2015-5303](https://access.redhat.com/security/cve/CVE-2015-5303) python-rdomanager-oscplugin: NeutronMetadataProxySharedSecret parameter uses default value

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2015-5303 python-rdomanager-oscplugin: NeutronMetadataProxySharedSecret p...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2015-5303 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1269786](show_bug.cgi?id=1269786) [1295289](show_bug.cgi?id=1295289) [1295291](show_bug.cgi?id=1295291) [1295337](show_bug.cgi?id=1295337) | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1272303](show_bug.cgi?id=1272303) | | TreeView+ | [depends on](buglist.cgi?bug_id=1272297&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1272297&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2015-10-16 02:40 UTC by Summer Long | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-05-12 14:32 UTC ([History](show_activity.cgi?id=1272297)) | | [CC List:](page.cgi?id=fields.html#cclist) | 26 users (show)  abaron aortega apevec ayoung chrisw dallan gkotton gmollett hbrock jjoyce jschluet jslagle kbasil lars lhh lpeer markmc mburns rbryant rhel-osp-director-maint rhos-maint sclewis security-response-team slinaber tdecacqu yeylon | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: | It was discovered that Director's NeutronMetadataProxySharedSecret parameter remained specified at the default value of 'unset'. This value is used by OpenStack Networking to sign instance headers; if unchanged, an attacker knowing the shared secret could use this flaw to spoof OpenStack Networking metadata requests. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2016-04-08 00:23:37 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Launchpad | [1516027](https://bugs.launchpad.net/bugs/1516027) | 0 | None | None | None | Never | | Red Hat Product Errata | [RHSA-2015:2650](https://access.redhat.com/errata/RHSA-2015%3A2650) | 0 | normal | SHIPPED\_LIVE | Moderate: Red Hat Enterprise Linux OpenStack Platform 7 director update | 2015-12-21 21:44:54 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1272297#c0)  Summer Long    2015-10-16 02:40:41 UTC  ``` Steven Hardy reports: Currently we don't set the NeutronMetadataProxySharedSecret, (which according to the description in the neutron docs exists to prevent spoofing) - thus is remains at it's bad default value of "unset".  I assume this has the potential for security impact given that if it's predictable I guess spoofing metadata requests then becomes possible, but not being a Neutron expert I'm not sure of how serious an issue this may be.   ```  [Comment 1](show_bug.cgi?id=1272297#c1)  Summer Long    2015-11-10 01:04:37 UTC  ``` Acknowledgements:  This issue was discovered by Steven Hardy of Red Hat.   ```  [Comment 2](show_bug.cgi?id=1272297#c2)  Summer Long    2015-12-09 03:55:41 UTC  ``` Upstream: [https://bugs.launchpad.net/tripleo/+bug/1516027](https://bugs.launchpad.net/tripleo/%2Bbug/1516027)   ```  [Comment 3](show_bug.cgi?id=1272297#c3)  errata-xmlrpc    2015-12-21 16:51:51 UTC  ``` This issue has been addressed in the following products:    OpenStack 7.0 Director/Manager for RHEL 7  Via RHSA-2015:2650 [https://access.redhat.com/errata/RHSA-2015:2650](https://access.redhat.com/errata/RHSA-2015%3A2650)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1272297&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugs.launchpad.net_1348f477_20250125_003333.html ===

[Log in / Register](https://bugs.launchpad.net/tripleo/%2Bbug/1516027/%2Blogin)

[![](https://launchpadlibrarian.net/254713705/owl_med.png)](https://launchpad.net/tripleo)

## [tripleo](https://launchpad.net/tripleo)

* [Overview](https://launchpad.net/tripleo)
* [Code](https://code.launchpad.net/tripleo)
* [Bugs](https://bugs.launchpad.net/tripleo)
* [Blueprints](https://blueprints.launchpad.net/tripleo)
* [Translations](https://translations.launchpad.net/tripleo)
* [Answers](https://answers.launchpad.net/tripleo)

# NeutronMetadataProxySharedSecret isn't set

Bug #1516027 reported by
[Dougal Matthews](https://launchpad.net/~d0ugal)
on 2015-11-13

[10](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [tripleo](https://bugs.launchpad.net/tripleo) | Fix Released | High | [Dougal Matthews](https://launchpad.net/~d0ugal) |  |

### Bug Description

The Heat parameter NeutronMetadataProxySharedSecret isn't set when deploying via the CLI. Without this parameter, Neutron has a blank value for it's shared secret. This value is used to to prevent spoofing, thus the default value of "unset" is bad. This exposes a potential attack vector.

Tags:

[in-stable-liberty](/tripleo/%2Bbugs?field.tag=in-stable-liberty)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dougal Matthews (d0ugal)](https://launchpad.net/~d0ugal) wrote on 2015-11-13: |  |  | [#1](/tripleo/%2Bbug/1516027/comments/1) |
| --- | --- | --- | --- |

* [Potential fix.](https://bugs.launchpad.net/tripleo/%2Bbug/1516027/%2Battachment/4518271/%2Bfiles/0001-Set-NeutronMetadataProxySharedSecret.patch)
  [Edit](/tripleo/%2Bbug/1516027/%2Battachment/4518271)
  (8.8 KiB,
  text/plain)

[Dougal Matthews (d0ugal)](https://launchpad.net/~d0ugal)
on 2015-11-13

| **summary**: | - Security bug: NeutronMetadataProxySharedSecret isn't set+ NeutronMetadataProxySharedSecret isn't set |
| --- | --- |

[Dougal Matthews (d0ugal)](https://launchpad.net/~d0ugal)
on 2015-11-17

| Changed in tripleo: | |
| --- | --- |
| **assignee**: | nobody → Dougal Matthews (d0ugal) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Dan Prince (dan-prince)](https://launchpad.net/~dan-prince) wrote on 2015-12-01: |  |  | [#2](/tripleo/%2Bbug/1516027/comments/2) |
| --- | --- | --- | --- |

Looks good to me.

Looks good to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-12-01: |  |  | [#3](/tripleo/%2Bbug/1516027/comments/3) |
| --- | --- | --- | --- |

Not quite sure why NeutronVniRanges have moved, but that's a nit, looks good to me.

Not quite sure why NeutronVniRanges have moved, but that's a nit, looks good to me.

[Dan Prince (dan-prince)](https://launchpad.net/~dan-prince)
on 2015-12-08

| **information type**: | Private Security → Public |
| --- | --- |

[OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack)
on 2015-12-08

| Changed in tripleo: | |
| --- | --- |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2015-12-14:  [**Fix merged to python-tripleoclient (master)**](/tripleo/%2Bbug/1516027/comments/4) |  |  | [#4](/tripleo/%2Bbug/1516027/comments/4) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/254857>

Committed: <https://git.openstack.org/cgit/openstack/python-tripleoclient/commit/?id=071968841692bffdd44c0eb34bf01df0e291d6b3>

Submitter: Jenkins

Branch: master

commit 071968841692bffdd44c0eb34bf01df0e291d6b3

Author: Dougal Matthews <email address hidden>

Date: Tue Dec 8 16:40:39 2015 +0000

Set NeutronMetadataProxySharedSecret

This patch uses the standard password generation functionality to

    randomly set the NeutronMetadataProxySharedSecret parameter.

Without this parameter, Neutron has a blank value for it's shared

    secret. This value is used to to prevent spoofing, thus the

    default value of "unset" is bad. This exposes a potential attack

    vector.

Closes-Bug: #1516027

    Change-Id: Ifb34b43fdedc55ad220df358c3ccc31e3c2e7c14

Reviewed: https://review.openstack.org/254857
Committed: https://git.openstack.org/cgit/openstack/python-tripleoclient/commit/?id=071968841692bffdd44c0eb34bf01df0e291d6b3
Submitter: Jenkins
Branch: master
commit 071968841692bffdd44c0eb34bf01df0e291d6b3
Author: Dougal Matthews <dougal@redhat.com>
Date: Tue Dec 8 16:40:39 2015 +0000
Set NeutronMetadataProxySharedSecret
This patch uses the standard password generation functionality to
randomly set the NeutronMetadataProxySharedSecret parameter.
Without this parameter, Neutron has a blank value for it's shared
secret. This value is used to to prevent spoofing, thus the
default value of "unset" is bad. This exposes a potential attack
vector.
Closes-Bug: #1516027
Change-Id: Ifb34b43fdedc55ad220df358c3ccc31e3c2e7c14

| Changed in tripleo: | |
| --- | --- |
| **status**: | In Progress → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2015-12-23:  [**Related fix merged to tripleo-heat-templates (master)**](/tripleo/%2Bbug/1516027/comments/5) |  |  | [#5](/tripleo/%2Bbug/1516027/comments/5) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/255423>

Committed: <https://git.openstack.org/cgit/openstack/tripleo-heat-templates/commit/?id=293f19b2a41386e1eea47a9e6add24b006c69c42>

Submitter: Jenkins

Branch: master

commit 293f19b2a41386e1eea47a9e6add24b006c69c42

Author: Steven Hardy <email address hidden>

Date: Wed Dec 9 18:23:08 2015 +0000

Remove unsafe "unset" defaults

All of our sensitive parameters are defaulted to easily predictable

    values, which is very bad from a security perspective because we don't

    force clients to make sane choices thus risk deploying with the

    predictable default values. tripleoclient supports generating random

    values for all of these, so remove the defaults, for non-tripleoclient

    usage we can create a developer-only environment with defaults.

Related-Bug: #1516027

    Change-Id: Ia0cf3b7e2de1aa42cf179cba195fb7770a1fc21c

    Depends-On: Ifb34b43fdedc55ad220df358c3ccc31e3c2e7c14

Reviewed: https://review.openstack.org/255423
Committed: https://git.openstack.org/cgit/openstack/tripleo-heat-templates/commit/?id=293f19b2a41386e1eea47a9e6add24b006c69c42
Submitter: Jenkins
Branch: master
commit 293f19b2a41386e1eea47a9e6add24b006c69c42
Author: Steven Hardy <shardy@redhat.com>
Date: Wed Dec 9 18:23:08 2015 +0000
Remove unsafe "unset" defaults
All of our sensitive parameters are defaulted to easily predictable
values, which is very bad from a security perspective because we don't
force clients to make sane choices thus risk deploying with the
predictable default values. tripleoclient supports generating random
values for all of these, so remove the defaults, for non-tripleoclient
usage we can create a developer-only environment with defaults.
Related-Bug: #1516027
Change-Id: Ia0cf3b7e2de1aa42cf179cba195fb7770a1fc21c
Depends-On: Ifb34b43fdedc55ad220df358c3ccc31e3c2e7c14

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-15:  [**Fix proposed to python-tripleoclient (stable/liberty)**](/tripleo/%2Bbug/1516027/comments/6) |  |  | [#6](/tripleo/%2Bbug/1516027/comments/6) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/liberty

Review: <https://review.openstack.org/268131>

Fix proposed to branch: stable/liberty
Review: https://review.openstack.org/268131

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-29:  [**Fix merged to python-tripleoclient (stable/liberty)**](/tripleo/%2Bbug/1516027/comments/7) |  |  | [#7](/tripleo/%2Bbug/1516027/comments/7) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/268131>

Committed: <https://git.openstack.org/cgit/openstack/python-tripleoclient/commit/?id=521dfbe91bdb7db483d861b8d62e0821d6f16ada>

Submitter: Jenkins

Branch: stable/liberty

commit 521dfbe91bdb7db483d861b8d62e0821d6f16ada

Author: Dougal Matthews <email address hidden>

Date: Tue Dec 8 16:40:39 2015 +0000

Set NeutronMetadataProxySharedSecret

This patch uses the standard password generation functionality to

    randomly set the NeutronMetadataProxySharedSecret parameter.

Without this parameter, Neutron has a blank value for it's shared

    secret. This value is used to to prevent spoofing, thus the

    default value of "unset" is bad. This exposes a potential attack

    vector.

Closes-Bug: #1516027

    Change-Id: Ifb34b43fdedc55ad220df358c3ccc31e3c2e7c14

    (cherry picked from commit 071968841692bffdd44c0eb34bf01df0e291d6b3)

Reviewed: https://review.openstack.org/268131
Committed: https://git.openstack.org/cgit/openstack/python-tripleoclient/commit/?id=521dfbe91bdb7db483d861b8d62e0821d6f16ada
Submitter: Jenkins
Branch: stable/liberty
commit 521dfbe91bdb7db483d861b8d62e0821d6f16ada
Author: Dougal Matthews <dougal@redhat.com>
Date: Tue Dec 8 16:40:39 2015 +0000
Set NeutronMetadataProxySharedSecret
This patch uses the standard password generation functionality to
randomly set the NeutronMetadataProxySharedSecret parameter.
Without this parameter, Neutron has a blank value for it's shared
secret. This value is used to to prevent spoofing, thus the
default value of "unset" is bad. This exposes a potential attack
vector.
Closes-Bug: #1516027
Change-Id: Ifb34b43fdedc55ad220df358c3ccc31e3c2e7c14
(cherry picked from commit 071968841692bffdd44c0eb34bf01df0e291d6b3)

| **tags**: | added: in-stable-liberty |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-03-03:  [**Related fix proposed to tripleo-heat-templates (stable/liberty)**](/tripleo/%2Bbug/1516027/comments/8) |  |  | [#8](/tripleo/%2Bbug/1516027/comments/8) |
| --- | --- | --- | --- |

Related fix proposed to branch: stable/liberty

Review: <https://review.openstack.org/288057>

Related fix proposed to branch: stable/liberty
Review: https://review.openstack.org/288057

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-03-07:  [**Related fix merged to tripleo-heat-templates (stable/liberty)**](/tripleo/%2Bbug/1516027/comments/9) |  |  | [#9](/tripleo/%2Bbug/1516027/comments/9) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/288057>

Committed: <https://git.openstack.org/cgit/openstack/tripleo-heat-templates/commit/?id=1a0c7d97165c1b38dc9f78b82ac6ec8519fcf80c>

Submitter: Jenkins

Branch: stable/liberty

commit 1a0c7d97165c1b38dc9f78b82ac6ec8519fcf80c

Author: Steven Hardy <email address hidden>

Date: Wed Dec 9 18:23:08 2015 +0000

Remove unsafe "unset" defaults

All of our sensitive parameters are defaulted to easily predictable

    values, which is very bad from a security perspective because we don't

    force clients to make sane choices thus risk deploying with the

    predictable default values. tripleoclient supports generating random

    values for all of these, so remove the defaults, for non-tripleoclient

    usage we can create a developer-only environment with defaults.

Related-Bug: #1516027

    Change-Id: Ia0cf3b7e2de1aa42cf179cba195fb7770a1fc21c

    Depends-On: Ifb34b43fdedc55ad220df358c3ccc31e3c2e7c14

    (cherry picked from commit 293f19b2a41386e1eea47a9e6add24b006c69c42)

Reviewed: https://review.openstack.org/288057
Committed: https://git.openstack.org/cgit/openstack/tripleo-heat-templates/commit/?id=1a0c7d97165c1b38dc9f78b82ac6ec8519fcf80c
Submitter: Jenkins
Branch: stable/liberty
commit 1a0c7d97165c1b38dc9f78b82ac6ec8519fcf80c
Author: Steven Hardy <shardy@redhat.com>
Date: Wed Dec 9 18:23:08 2015 +0000
Remove unsafe "unset" defaults
All of our sensitive parameters are defaulted to easily predictable
values, which is very bad from a security perspective because we don't
force clients to make sane choices thus risk deploying with the
predictable default values. tripleoclient supports generating random
values for all of these, so remove the defaults, for non-tripleoclient
usage we can create a developer-only environment with defaults.
Related-Bug: #1516027
Change-Id: Ia0cf3b7e2de1aa42cf179cba195fb7770a1fc21c
Depends-On: Ifb34b43fdedc55ad220df358c3ccc31e3c2e7c14
(cherry picked from commit 293f19b2a41386e1eea47a9e6add24b006c69c42)

[See full activity log](https://bugs.launchpad.net/tripleo/%2Bbug/1516027/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/tripleo/%2Bfilebug)

This report contains
**Public**
information

Everyone can see this information.

You are
[not directly subscribed to this bug's notifications.](/tripleo/%2Bbug/1516027/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/tripleo/%2Bbug/1516027/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/tripleo/%2Bbug/1516027/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [Potential fix.](https://bugs.launchpad.net/tripleo/%2Bbug/1516027/%2Battachment/4518271/%2Bfiles/0001-Set-NeutronMetadataProxySharedSecret.patch)
  [Edit](/tripleo/%2Bbug/1516027/%2Battachment/4518271 "Change patch details")

* [Add patch](/tripleo/%2Bbug/1516027/%2Baddcomment?field.patch=on)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from www.redhat.com_a1435845_20250126_044916.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from www.redhat.com_0f92d017_20250126_044921.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from bugzilla.redhat.com_c0225347_20250126_044919.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1272347)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1272347)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1272347)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1272347

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1272347**](show_bug.cgi?id=1272347)
- director stack update 7.0 to 7.1 KeystoneAdminApiNetwork change causes unwanted services restart

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
director stack update 7.0 to 7.1 KeystoneAdminApiNetwork change causes unwant...

| | [Keywords](describekeywords.cgi): | Triaged | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat OpenStack | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat OpenStack "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | rhosp-director | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 7.0 (Kilo) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | x86\_64 | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | urgent | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | y2 | | [Target Release](page.cgi?id=fields.html#target_release): | 7.0 (Kilo) | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Giulio Fidente | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Marius Cornea | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=1272347&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1272347&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2015-10-16 07:47 UTC by Cyril Lopez | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2016-04-11 11:24 UTC ([History](show_activity.cgi?id=1272347)) | | [CC List:](page.cgi?id=fields.html#cclist) | 14 users (show)  calfonso dnavale dsavinea gfidente glambert hrosnet jcoufal jprovazn jstransk mburns mcornea rhel-osp-director-maint sasha yguenane | | Fixed In Version: | openstack-tripleo-heat-templates-0.8.6-82.el7ost | | | Doc Type: | Known Issue | | | Doc Text: | With this update, the default network where the 'KeystoneAdminVip' is placed was changed from 'InternalApi' to 'ctlplane' so that the post-deployment Identity service initialization step could be carried by the Undercloud over the 'ctlplane' network. Relocating the 'KeystoneAdminVip' causes a cascading restart of the services pointing to the old 'KeystoneAdminVip'. As a workaround to make sure the KeystoneAdminVip remains on the 'InternalApi' network, a customized 'ServiceNetMap' must be provided as deployment parameter when launching an update from the 7.0 release. A sample Orchestration environment file passing a customized 'ServiceNetMap' is as follows: parameters: ServiceNetMap: NeutronTenantNetwork: tenant CeilometerApiNetwork: internal\_api MongoDbNetwork: internal\_api CinderApiNetwork: internal\_api CinderIscsiNetwork: storage GlanceApiNetwork: storage GlanceRegistryNetwork: internal\_api KeystoneAdminApiNetwork: internal\_api KeystonePublicApiNetwork: internal\_api NeutronApiNetwork: internal\_api HeatApiNetwork: internal\_api NovaApiNetwork: internal\_api NovaMetadataNetwork: internal\_api NovaVncProxyNetwork: internal\_api SwiftMgmtNetwork: storage\_mgmt SwiftProxyNetwork: storage HorizonNetwork: internal\_api MemcachedNetwork: internal\_api RabbitMqNetwork: internal\_api RedisNetwork: internal\_api MysqlNetwork: internal\_api CephClusterNetwork: storage\_mgmt CephPublicNetwork: storage ControllerHostnameResolveNetwork: internal\_api ComputeHostnameResolveNetwork: internal\_api BlockStorageHostnameResolveNetwork: internal\_api ObjectStorageHostnameResolveNetwork: internal\_api CephStorageHostnameResolveNetwork: storage If any additional binding network from the above has been customized then that setting has to be preserved as well. As a result of the workaround changes, the 'KeystoneAdminVip' is not relocated on the 'ctlplane' network so that no services restart needs to be triggered. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2015-12-21 16:52:11 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2015:2650](https://access.redhat.com/errata/RHSA-2015%3A2650) | 0 | normal | SHIPPED\_LIVE | Moderate: Red Hat Enterprise Linux OpenStack Platform 7 director update | 2015-12-21 21:44:54 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1272347#c0)  Cyril Lopez    2015-10-16 07:47:09 UTC  ``` Description of problem: During the stack update, puppet try to restart services via systemctl and it's fail cause pacemaker is controlling services on controller overcloud   Version-Release number of selected component (if applicable): openstack-tripleo-heat-templates-0.8.6-71.el7ost.noarch openstack-heat-templates-0-0.6.20150605git.el7ost.noarch  How reproducible:   Steps to Reproduce: 1. Install undercloud / overcloud in 7.0 2. Update undercloud in 7.1 3. Update openstack-puppet-modules on all nodes cf [https://bugzilla.redhat.com/show_bug.cgi?id=1267318](show_bug.cgi?id=1267318 "CLOSED DUPLICATE - [Docs] [Director] Overcloud Updates failed due new resource type") 4. to update the stack, do a openstack overcloud deploy --templates /home/stack/templates-7.1/ [...]   Actual results: Stack failed with status: resources.ControllerNodesPostDeployment: resources.ControllerOvercloudServicesDeployment_Step4: Error: resources[1]: Deployment to server failed: deploy_status_code : Deployment exited with non-zero status code: 6 ERROR: openstack Heat Stack update failed.  And in puppet : heat deployment-output-show d9e1fd93-9385-44a7-8f1b-7726ff4a4cee deploy_stderr Warning: Scope(Class[Keystone]): Execution of db_sync does not depend on $enabled anymore. Please use sync_db instead. Warning: Scope(Class[Glance::Registry]): Execution of db_sync does not depend on $manage_service or $enabled anymore. Please use sync_db instead. Warning: Scope(Class[Nova::Api]): The conductor_workers parameter is deprecated and has no effect. Use workers parameter of nova::conductor class instead. Warning: Scope(Class[Nova::Vncproxy::Common]): Could not look up qualified variable '::nova::compute::vncproxy_host'; class ::nova::compute has not been evaluated Warning: Scope(Class[Nova::Vncproxy::Common]): Could not look up qualified variable '::nova::compute::vncproxy_protocol'; class ::nova::compute has not been evaluated Warning: Scope(Class[Nova::Vncproxy::Common]): Could not look up qualified variable '::nova::compute::vncproxy_port'; class ::nova::compute has not been evaluated Warning: Scope(Class[Nova::Vncproxy::Common]): Could not look up qualified variable '::nova::compute::vncproxy_path'; class ::nova::compute has not been evaluated Warning: Scope(Class[Concat::Setup]): concat::setup is deprecated as a public API of the concat module and should no longer be directly included in the manifest. Error: /Stage[main]/Cinder::Api/Exec[cinder-manage db_sync]: Failed to call refresh: cinder-manage db sync returned 1 instead of one of [0] Error: /Stage[main]/Cinder::Api/Exec[cinder-manage db_sync]: cinder-manage db sync returned 1 instead of one of [0] Error: /Stage[main]/Keystone::Db::Sync/Exec[keystone-manage db_sync]: Failed to call refresh: keystone-manage db_sync returned 1 instead of one of [0] Error: /Stage[main]/Keystone::Db::Sync/Exec[keystone-manage db_sync]: keystone-manage db_sync returned 1 instead of one of [0] Error: /Stage[main]/Glance::Registry/Exec[glance-manage db_sync]: Failed to call refresh: glance-manage --config-file=/etc/glance/glance-registry.conf db_sync returned 1 instead of one of [0] Error: /Stage[main]/Glance::Registry/Exec[glance-manage db_sync]: glance-manage --config-file=/etc/glance/glance-registry.conf db_sync returned 1 instead of one of [0] Error: /Stage[main]/Nova::Api/Exec[nova-db-sync]: Failed to call refresh: Command exceeded timeout Error: /Stage[main]/Nova::Api/Exec[nova-db-sync]: Command exceeded timeout Wrapped exception: execution expired Error: /Stage[main]/Nova::Scheduler/Nova::Generic_service[scheduler]/Service[nova-scheduler]: Failed to call refresh: Could not restart Service[nova-scheduler]: Execution of '/usr/bin/systemctl restart openstack-nova-scheduler' returned 1: Job for openstack-nova-scheduler.service canceled. Error: /Stage[main]/Nova::Scheduler/Nova::Generic_service[scheduler]/Service[nova-scheduler]: Could not restart Service[nova-scheduler]: Execution of '/usr/bin/systemctl restart openstack-nova-scheduler' returned 1: Job for openstack-nova-scheduler.service canceled. Wrapped exception: Execution of '/usr/bin/systemctl restart openstack-nova-scheduler' returned 1: Job for openstack-nova-scheduler.service canceled. Error: /Stage[main]/Heat/Exec[heat-dbsync]: Failed to call refresh: heat-manage --config-file /etc/heat/heat.conf db_sync returned 1 instead of one of [0] Error: /Stage[main]/Heat/Exec[heat-dbsync]: heat-manage --config-file /etc/heat/heat.conf db_sync returned 1 instead of one of [0] Error: /Stage[main]/Neutron::Db::Sync/Exec[neutron-db-sync]: Failed to call refresh: neutron-db-manage --config-file /etc/neutron/neutron.conf --config-file /etc/neutron/plugin.ini upgrade head returned 1 instead of one of [0] Error: /Stage[main]/Neutron::Db::Sync/Exec[neutron-db-sync]: neutron-db-manage --config-file /etc/neutron/neutron.conf --config-file /etc/neutron/plugin.ini upgrade head returned 1 instead of one of [0] Error: /Stage[main]/Neutron::Server/Service[neutron-server]: Failed to call refresh: Could not restart Service[neutron-server]: Execution of '/usr/bin/systemctl restart neutron-server' returned 1: Job for neutron-server.service canceled. Error: /Stage[main]/Neutron::Server/Service[neutron-server]: Could not restart Service[neutron-server]: Execution of '/usr/bin/systemctl restart neutron-server' returned 1: Job for neutron-server.service canceled. Wrapped exception: Execution of '/usr/bin/systemctl restart neutron-server' returned 1: Job for neutron-server.service canceled.   Expected results: It should restart by pacemaker  Additional info:   ```  [Comment 2](show_bug.cgi?id=1272347#c2)  Giulio Fidente    2015-10-16 08:22:56 UTC  ``` As per conversation on IRC, db_sync seems to have failed because the client was pointed to a new VIP which HAProxy isn't hosting.  In theory we could make HAProxy restart but changing a VIP has too many implications so I think it's better to avoid it changing.  To do so, we should force the VIPs to remain unchanged, we can probably do this via deployment params. Investigating.   ```  [Comment 3](show_bug.cgi?id=1272347#c3)  Giulio Fidente    2015-10-16 09:04:09 UTC  ``` The VIP change is going to be tracked by [BZ#1272357](show_bug.cgi?id=1272357 "CLOSED ERRATA - director stack update 7.0 to 7.1 VIP change")   ```  [Comment 4](show_bug.cgi?id=1272347#c4)  Giulio Fidente    2015-10-20 18:00:29 UTC  ``` I've hit this with nova-conductor too:  Execution of '/usr/bin/systemctl restart openstack-nova-conductor' returned 1: Job for openstack-nova-conductor.service canceled   ```  [Comment 5](show_bug.cgi?id=1272347#c5)  Giulio Fidente    2015-10-20 18:06:46 UTC  ``` It looks like in the templates we change the identity_uri causing cascading attempts to restart:    '<http://172.16.20.11:35357/>' to '<http://192.0.2.15:35357/>'  Will try to upload occ.log and continue investigation.   ```  [Comment 6](show_bug.cgi?id=1272347#c6)  Marius Cornea    2015-10-20 18:13:26 UTC  ``` In 7.1 the keystone admin api runs on the ctlplane network while in 7.0 it was running on the internal_api network.         7.1 ServiceNetMap in overcloud-without-mergepy.yaml: KeystoneAdminApiNetwork: ctlplane # allows undercloud to config endpoints  7.0 ServiceNetMap in overcloud-without-mergepy.yaml: KeystoneAdminApiNetwork: internal_api   ```  [Comment 7](show_bug.cgi?id=1272347#c7)  Giulio Fidente    2015-10-20 18:16:03 UTC  ``` Marius, thanks! We can test if upgrade works without restarts by changing it the keystone admin network. If it does, the BZ remains valid as services restart should be orchestrated, but we'll be able at least to complete an upgrade without changing the overcloud config.   ```  [Comment 8](show_bug.cgi?id=1272347#c8)  Giulio Fidente    2015-10-21 09:23:34 UTC  ``` As per [comment #7](show_bug.cgi?id=1272347#c7), the workaround to avoid services being restarted is to configure in the 7.1 templates the KeystoneAdminVip in the ServiceNetMap so that it continues to stay on the internal_api, as it was in 7.0 templates  To do so, add the following into a custom upgrade.yaml:  parameters:   ServiceNetMap:     NeutronTenantNetwork: tenant     CeilometerApiNetwork: internal_api     MongoDbNetwork: internal_api     CinderApiNetwork: internal_api     CinderIscsiNetwork: storage     GlanceApiNetwork: storage     GlanceRegistryNetwork: internal_api     KeystoneAdminApiNetwork: internal_api     KeystonePublicApiNetwork: internal_api     NeutronApiNetwork: internal_api     HeatApiNetwork: internal_api     NovaApiNetwork: internal_api     NovaMetadataNetwork: internal_api     NovaVncProxyNetwork: internal_api     SwiftMgmtNetwork: storage_mgmt     SwiftProxyNetwork: storage     HorizonNetwork: internal_api     MemcachedNetwork: internal_api     RabbitMqNetwork: internal_api     RedisNetwork: internal_api     MysqlNetwork: internal_api     CephClusterNetwork: storage_mgmt     CephPublicNetwork: storage     ControllerHostnameResolveNetwork: internal_api     ComputeHostnameResolveNetwork: internal_api     BlockStorageHostnameResolveNetwork: internal_api     ObjectStorageHostnameResolveNetwork: internal_api     CephStorageHostnameResolveNetwork: storage   ```  [Comment 9](show_bug.cgi?id=1272347#c9)  Giulio Fidente    2015-10-22 12:28:08 UTC  ``` We should probably quiesce the cluster/node to fix this long term.   ```  [Comment 15](show_bug.cgi?id=1272347#c15)  Amit Ugol    2015-12-09 13:27:38 UTC  ``` This either happens or it does not. Upgrading from 7.0 and from 7.1 to 7.2 passed automation and there is not going to be support for 7.0 -> 7.1. Is it safe to close it because it passed CI ?   ```  [Comment 16](show_bug.cgi?id=1272347#c16)  Marius Cornea    2015-12-13 00:35:14 UTC  ``` I was able to pass an update from 7.0 to 7.1 by passing the update-from-keystone-admin-internal-api.yaml environment file.   ```  [Comment 17](show_bug.cgi?id=1272347#c17)  Marius Cornea    2015-12-13 00:38:30 UTC  ``` (In reply to Marius Cornea from [comment #16](show_bug.cgi?id=1272347#c16)) > I was able to pass an update from 7.0 to 7.1 by passing the > update-from-keystone-admin-internal-api.yaml environment file.  Correction: the update was 7.0 to 7.2.   ```  [Comment 19](show_bug.cgi?id=1272347#c19)  errata-xmlrpc    2015-12-21 16:52:11 UTC  ``` Since the problem described in this bug report should be resolved in a recent advisory, it has been closed with a resolution of ERRATA.  For information on the advisory, and where to find the updated files, follow the link below.  If the solution does not work for you, open a new bug report.  [https://access.redhat.com/errata/RHSA-2015:2650](https://access.redhat.com/errata/RHSA-2015%3A2650)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1272347&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from bugzilla.redhat.com_5152fcab_20250126_044917.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1290796)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1290796)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1290796)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1290796

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1290796**](show_bug.cgi?id=1290796)
- Set UpdateIdentifier after yum update causes subsequent scale out attempt to fail

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
Set UpdateIdentifier after yum update causes subsequent scale out attempt to ...

| | [Keywords](describekeywords.cgi): | Triaged | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat OpenStack | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat OpenStack "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | python-rdomanager-oscplugin | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 7.0 (Kilo) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | urgent | | [Severity:](page.cgi?id=fields.html#bug_severity) | unspecified | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | y2 | | [Target Release](page.cgi?id=fields.html#target_release): | 7.0 (Kilo) | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | James Slagle | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Udi Kalifon | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=1290796&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1290796&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2015-12-11 13:30 UTC by James Slagle | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2015-12-21 16:53 UTC ([History](show_activity.cgi?id=1290796)) | | [CC List:](page.cgi?id=fields.html#cclist) | 7 users (show)  calfonso dnavale jcoufal jslagle mburns rhel-osp-director-maint sasha | | Fixed In Version: | python-rdomanager-oscplugin-0.0.10-22.el7ost | | | Doc Type: | Bug Fix | | | Doc Text: | Previously, when scaling out the Compute nodes in the Overcloud after an update was performed, the default UpdateIdentifier parameter in the Heat stack caused the new Compute node to attempt an update as soon as it was coming up. Since the yum repositories were not configured on the new Compute nodes yet, it would cause the update to fail, which in turn caused the scale out to fail. With this update, the client, python-rdomanager-oscplugin, does not clear the UpdateIdentifier parameter on the subsequent stack-update attempts (including the scale out) until after the initial update has been completed. As a result, scale out attempts after the update now succeeds. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2015-12-21 16:53:23 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | OpenStack gerrit | [256670](https://review.opendev.org/256670) | 0 | None | None | None | Never | | Red Hat Product Errata | [RHSA-2015:2650](https://access.redhat.com/errata/RHSA-2015%3A2650) | 0 | normal | SHIPPED\_LIVE | Moderate: Red Hat Enterprise Linux OpenStack Platform 7 director update | 2015-12-21 21:44:54 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1290796#c0)  James Slagle    2015-12-11 13:30:57 UTC  ``` When doing a package update, we set the UpdateIdentifier parameter to a unique value, this triggers the SoftwareDeployment and yum_update.sh also has a check to make sure UpdateIdentifier is not empty and is a new unique value it hasn't seen before, and if so, it proceeds with updating packages.  Assuming the package update is successful, if you then immediately try a scaling attempt after, it will likely fail. UpdateIdentifier is still set in the saved Heat environment (as expected), when the new node you're scaling out comes up for the first time, UpdateDeployment is triggered, and it sees a new value (to this node) of UpdateIdentifier. It then tries a yum update. That fails b/c no repos are configured on the node yet. Even when using rhel registration, which is enabled via the NodeExtraConfig resource, this will fail because there is no depends_on set on UpdateDeployment for NodeExtraConfig, so there is no guarantee any repos would even be enabled yet.  The error from UpdateDeployment looks like:  {   "status": "FAILED",    "server_id": "853ce223-2051-4cb5-868c-7cf72c312c2b",    "config_id": "51cc12e8-b1bf-4b2a-b318-a977b1fc1a30",    "output_values": {     "deploy_stdout": "Started yum_update.sh on server 853ce223-2051-4cb5-868c-7cf72c312c2b at Thu Dec 10 21:33:33 EST 2015\nExcluding upgrading packages that are handled by config management tooling\nRunning: yum -y update  --skip-broken\nLoaded plugins: product-id, subscription-manager\nThis system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.\nyum return code: 1\nFinished yum_update.sh on server 853ce223-2051-4cb5-868c-7cf72c312c2b at Thu Dec 10 21:33:36 EST 2015\n",      "deploy_stderr": "cat: /var/lib/tripleo/installed-packages/*: No such file or directory\nThere are no enabled repos.\n Run \"yum repolist all\" to see the repos you have.\n You can enable repos with yum-config-manager --enable <repo>\n",      "update_managed_packages": "true",      "deploy_status_code": 1   },    "creation_time": "2015-12-11T02:32:26Z",    "updated_time": "2015-12-11T02:33:38Z",    "input_values": {},    "action": "CREATE",    "status_reason": "deploy_status_code : Deployment exited with non-zero status code: 1",    "id": "974ac676-67e1-4a1c-947d-92ed68b375f0" }   ```  [Comment 2](show_bug.cgi?id=1290796#c2)  Jaromir Coufal    2015-12-14 15:05:14 UTC  ``` James, what is the severity here? Does it affect each scale out after update? Thanks   ```  [Comment 3](show_bug.cgi?id=1290796#c3)  James Slagle    2015-12-14 21:43:57 UTC  ``` to verify:  deploy with 7.0 undercloud and 7.0 overcloud, HA, net-iso. Update undercloud to 7.2, update overcloud to 7.2. After the update completes successfully, attempt scale out of compute nodes. The compute node should scale out fine and should not run any yum update. You could verify this by looking in the journalctl for os-collect-config or /var/log/yum.log on the new compute nodes.  repeat, but start at 7.1.   ```  [Comment 6](show_bug.cgi?id=1290796#c6)  errata-xmlrpc    2015-12-21 16:53:23 UTC  ``` Since the problem described in this bug report should be resolved in a recent advisory, it has been closed with a resolution of ERRATA.  For information on the advisory, and where to find the updated files, follow the link below.  If the solution does not work for you, open a new bug report.  [https://access.redhat.com/errata/RHSA-2015:2650](https://access.redhat.com/errata/RHSA-2015%3A2650)   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1290796&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)


