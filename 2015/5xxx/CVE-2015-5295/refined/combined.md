=== Content from launchpad.net_22884c23_20250126_013041.html ===

[Log in / Register](https://launchpad.net/~fungi/%2Blogin)

[![](https://launchpadlibrarian.net/112681987/gnome-gmush-64.png)](https://launchpad.net/~fungi)

## [Jeremy Stanley](https://launchpad.net/~fungi)

* Overview
* [Code](https://code.launchpad.net/~fungi)
* [Bugs](https://bugs.launchpad.net/~fungi)
* [Blueprints](https://blueprints.launchpad.net/~fungi)
* [Translations](https://translations.launchpad.net/~fungi)
* [Answers](https://answers.launchpad.net/~fungi)

<http://fungi.yuggoth.org/>

* [Related packages](https://launchpad.net/~fungi/%2Brelated-packages)
* [Related projects](https://launchpad.net/~fungi/%2Brelated-projects)

## User information

Launchpad Id:
fungi

Email:
[Log in](%2Blogin) for email information.

Member since:
2006-06-16

[![Icon of Nova Bug Team](https://launchpadlibrarian.net/108832444/bug.gif "Member of Nova Bug Team")](/~nova-bugs)
[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)
[![Icon of OpenStack Vulnerability Management team](https://launchpadlibrarian.net/83816787/icon.png "Member of OpenStack Vulnerability Management team")](/~openstack-vuln-mgmt)
[![Icon of Python OpenStack Client Bugs](https://launchpadlibrarian.net/697274771/osc-icon.png "Member of Python OpenStack Client Bugs")](/~python-openstackclient-bugs)
[![Icon of Python OpenStack Client](https://launchpadlibrarian.net/697274843/osc-icon.png "Member of Python OpenStack Client")](/~python-openstackclient)
[![Icon of Swift](https://launchpadlibrarian.net/52560230/os14.png "Member of Swift")](/~swift)

Languages:

English

OpenPGP keys:

97AE496FC02DEC9FC353B2E748F9961143495829

SSH keys:

[fungi@yuggoth.org](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[311](https://launchpad.net/~fungi/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**fungi**
 on
**irc.libera.chat**

![IRC](/@@/social-irc "IRC")
**fungi**
 on
**irc.oftc.net**

## [All bugs in progress](https://launchpad.net/~fungi/%2Bassignedbugs?search=Search&field.status=In+Progress) Assigned bugs

||  | #1354829 [Booting from stale snapshots in rax-dfw leads to miscellaneous failures](https://bugs.launchpad.net/openstack-ci/%2Bbug/1354829) |  |
| --- | --- | --- |
| in [OpenStack Core Infrastructure](/openstack-ci), [OpenStack Dashboard (Horizon)](/horizon), [neutron](/neutron), [tempest](/tempest) | | |

| --- | --- | --- | --- | --- | --- |

## [All memberships](https://launchpad.net/~fungi/%2Bparticipation) Latest memberships

| [Oslo Core security contacts](/~oslo-coresec)  Joined on 2023-10-02 | |
| --- | --- |
| [Glance Release](/~glance-release)  Joined on 2021-07-27 | |
| [Ubuntu SSO 2-factor testers](/~sso-2f-testers)  Joined on 2020-11-12 | |
| [OpenDev Two-Factor Authentication](/~opendev-2fa)  Joined on 2020-11-05 | |
| [Trove Drivers](/~trove-drivers)  Joined on 2020-06-22 | |

## [Recent activities](https://launchpad.net/~fungi/%2Bkarma) Most active in

| [OpenStack Security Advisory](/ossa) |  |  |
| --- | --- | --- |
| [OpenStack Compute (nova)](/nova) |  |  |
| [Ubuntu](/ubuntu) |  |  |
| [OpenStack Security Notes](/ossn) |  |  |
| [Ubuntu Cloud Archive](/cloud-archive) |  |  |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from review.openstack.org_273e4f02_20250126_013043.html ===




=== Content from bugs.launchpad.net_3d0b08cf_20250126_013038.html ===

[Log in / Register](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Blogin)

[![](https://launchpadlibrarian.net/313195013/Heat_mascot_64.png)](https://launchpad.net/heat)

## [OpenStack Heat](https://launchpad.net/heat)

* [Overview](https://launchpad.net/heat)
* [Code](https://code.launchpad.net/heat)
* [Bugs](https://bugs.launchpad.net/heat)
* [Blueprints](https://blueprints.launchpad.net/heat)
* [Translations](https://translations.launchpad.net/heat)
* [Answers](https://answers.launchpad.net/heat)

# [OSSA 2016-003] template-validate may read server local files (CVE-2015-5295)

Bug #1496277 reported by
[Steven Hardy](https://launchpad.net/~shardy)
on 2015-09-16

[268](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Heat](https://bugs.launchpad.net/heat) | Fix Released | High | [Zane Bitter](https://launchpad.net/~zaneb) |  |
|  | [Kilo](https://bugs.launchpad.net/heat/kilo) | Fix Released | Undecided | Unassigned | [OpenStack Heat 2015.1.3](https://launchpad.net/heat/%2Bmilestone/2015.1.3) |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | Critical | [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray) |  |

### Bug Description

in service.py validate\_template, we do an env.get\_class bypassing

 the global\_environment(), which ends up calling

 template\_resource.generate\_class, which wrongly defaults the get\_template\_file

 allowed schemas to "('file',)"

<https://github.com/openstack/heat/blob/master/heat/engine/service.py#L958>

 <https://github.com/openstack/heat/blob/master/heat/engine/resources/template_resource.py#L31>

The net result of this is that any call to template-validate which

 specifies type: foo.yaml will read that file from the filesystem of the

 heat service - this actually means template-validate calls which should

 fail work on typical devstack env's where the client and heat-engine are

 co-located (it took me a while to work out why!!)

I've not figured out any way for this to be exploitable, but it definitely

 seems wrong that we allow user-provided paths to be read like this,

 and there could be some risk if folks could work out a way to make

 validation blow up with a stack-trace containing any file contents.

See [original description](comments/0)

Tags:

[in-stable-kilo](/heat/%2Bbugs?field.tag=in-stable-kilo)
[in-stable-liberty](/heat/%2Bbugs?field.tag=in-stable-liberty)

## CVE References

* [2015-5295](/bugs/cve/2015-5295 "The template-validate command in Open...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-09-16: |  |  | [#1](/heat/%2Bbug/1496277/comments/1) |
| --- | --- | --- | --- |

Note I raised this private security initially so we can discuss how this should be handled - AFAICT there's no way for this to be actively exploited, but the sort of risk I'm worried about is e.g if someone tried to pass a path to a hiera yaml file on the heat server box, where the hieradata could contain sensitive information. I don't think there's any way for validation to fail such as to expose that data, but it'd be good to get some more eyes on the code to prove that is the case (if so this can probably be public security IMO).

Note I raised this private security initially so we can discuss how this should be handled - AFAICT there's no way for this to be actively exploited, but the sort of risk I'm worried about is e.g if someone tried to pass a path to a hiera yaml file on the heat server box, where the hieradata could contain sensitive information. I don't think there's any way for validation to fail such as to expose that data, but it'd be good to get some more eyes on the code to prove that is the case (if so this can probably be public security IMO).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2015-09-16: |  |  | [#2](/heat/%2Bbug/1496277/comments/2) |
| --- | --- | --- | --- |

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.

| **description**: | updated |
| --- | --- |
| Changed in ossa: | |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-16: |  |  | [#3](/heat/%2Bbug/1496277/comments/3) |
| --- | --- | --- | --- |

I think there could at very least be a DoS through unbound memory allocation.

You can cause a call like this to happen:

urllib.request.urlopen("file:///dev/zero").read()

Which on many systems will lead to the python process being killed when it runs out of memory.

I think there could at very least be a DoS through unbound memory allocation.
You can cause a call like this to happen:
urllib.request.urlopen("file:///dev/zero").read()
Which on many systems will lead to the python process being killed when it runs out of memory.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-09-16: |  |  | [#4](/heat/%2Bbug/1496277/comments/4) |
| --- | --- | --- | --- |

I believe we established somewhere (private email thread) that the filename had to end with .yaml or .template to trigger this code path.

I believe we established somewhere (private email thread) that the filename had to end with .yaml or .template to trigger this code path.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2015-09-16: |  |  | [#5](/heat/%2Bbug/1496277/comments/5) |
| --- | --- | --- | --- |

Zane sure, but it should probably be constrained to "/etc/heat/templates/"

Zane sure, but it should probably be constrained to "/etc/heat/templates/"

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-17: |  |  | [#6](/heat/%2Bbug/1496277/comments/6) |
| --- | --- | --- | --- |

The hash character can be used to get round that check and open an arbitrary file.

This kills my test machine pretty well:

{"files": {}, "environment": {}, "template": {"heat\_template\_version": "2014-10-16", "description": "a", "resources": {"my\_instance": {"type": "file:///dev/zero#a.yaml", "properties": {"flavor": "m1.small"}}}}}

The hash character can be used to get round that check and open an arbitrary file.
This kills my test machine pretty well:
{"files": {}, "environment": {}, "template": {"heat\_template\_version": "2014-10-16", "description": "a", "resources": {"my\_instance": {"type": "file:///dev/zero#a.yaml", "properties": {"flavor": "m1.small"}}}}}

[Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld)
on 2015-09-17

| Changed in heat: | |
| --- | --- |
| **status**: | New → Confirmed |
| **importance**: | Undecided → High |
| **assignee**: | nobody → Angus Salkeld (asalkeld) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2015-09-17: |  |  | [#7](/heat/%2Bbug/1496277/comments/7) |
| --- | --- | --- | --- |

* [Restrict template file access to /etc/heat/templates/](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4466489/%2Bfiles/0001-Restrict-template-file-access-to-etc-heat-templates.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4466489)
  (5.6 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-17: |  |  | [#8](/heat/%2Bbug/1496277/comments/8) |
| --- | --- | --- | --- |

I didn't reproduce, but from reading I think the "/etc/heat/teamplates" enforcement in proposed patch can be bypassed with path traversal like:

"file:///etc/heat/templates/../../../dev/zero#a.yaml"

I think will still open /dev/zero.

I didn't reproduce, but from reading I think the "/etc/heat/teamplates" enforcement in proposed patch can be bypassed with path traversal like:
"file:///etc/heat/templates/../../../dev/zero#a.yaml"
I think will still open /dev/zero.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2015-09-17: |  |  | [#9](/heat/%2Bbug/1496277/comments/9) |
| --- | --- | --- | --- |

Good point, I'll check and see if I can get a normalized path.

Good point, I'll check and see if I can get a normalized path.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2015-09-17: |  |  | [#10](/heat/%2Bbug/1496277/comments/10) |
| --- | --- | --- | --- |

* [Restrict template file access to /etc/heat/templates/](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4466501/%2Bfiles/0001-Restrict-template-file-access-to-etc-heat-templates.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4466501)
  (3.8 KiB,
  text/plain)

new patch replaces previous one.

new patch replaces previous one.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2015-09-17: |  |  | [#11](/heat/%2Bbug/1496277/comments/11) |
| --- | --- | --- | --- |

Thanks @garth I had to reboot my machine after trying "file:///etc/heat/templates/../../../dev/zero" - doh.

Thanks @garth I had to reboot my machine after trying "file:///etc/heat/templates/../../../dev/zero" - doh.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-17: |  |  | [#12](/heat/%2Bbug/1496277/comments/12) |
| --- | --- | --- | --- |

@angus oops, sorry I should have been more clear that was demonstrating unbound memory allocation still.

@angus oops, sorry I should have been more clear that was demonstrating unbound memory allocation still.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-09-17: |  |  | [#13](/heat/%2Bbug/1496277/comments/13) |
| --- | --- | --- | --- |

@Angus - thanks for picking this up!

TBH I don't think restricting to opening paths in /etc/heat/templates is enough - we should \*never\* read \*any\* server-side files as a result of user provided type: filename or (user) resource\_registry entries - that (AIUI) is the whole point of the allowed schemes in TemplateResource?

The /etc/heat/templates is only for consumption via the \*global\* environment, e.g template authors should \*only\* have access to those templates via their global resource\_registry alias as defined in /etc/heat/environment.d - or at least that's the way I thought this was supposed to work?

@Angus - thanks for picking this up!
TBH I don't think restricting to opening paths in /etc/heat/templates is enough - we should \*never\* read \*any\* server-side files as a result of user provided type: filename or (user) resource\_registry entries - that (AIUI) is the whole point of the allowed schemes in TemplateResource?
The /etc/heat/templates is only for consumption via the \*global\* environment, e.g template authors should \*only\* have access to those templates via their global resource\_registry alias as defined in /etc/heat/environment.d - or at least that's the way I thought this was supposed to work?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2015-09-17: |  |  | [#14](/heat/%2Bbug/1496277/comments/14) |
| --- | --- | --- | --- |

Hi Steven, the validate flow is a bit different to create/update and we are not sure at that point whether is it user or system resource so it allows both. If you disallow "file" you will probably break stuff.

Hi Steven, the validate flow is a bit different to create/update and we are not sure at that point whether is it user or system resource so it allows both. If you disallow "file" you will probably break stuff.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-09-17: |  |  | [#15](/heat/%2Bbug/1496277/comments/15) |
| --- | --- | --- | --- |

Hey Angus, yeah I realize there are limitations with the validation in it's current form, which basically doesn't work at all with nested stacks - wouldn't it be better to just skip them completely rather than trying to load random files which may not bear any relation to what the user expects (e.g, how does a user of a public cloud heat have \*any\* idea what's in /etc/templates of their provider?)

That's one reason why I've been reworking validate to work more like create/preview:

<https://review.openstack.org/#/c/223581/>

Here, we actually pass the files map, so we can safely do nested validation:

<https://review.openstack.org/#/c/224078/>

I think this is a better long-term direction, but it obviously doesn't solve the sort term requirement for a backportable quick fix.

In the tests above - are those being done directly via curl, or using heatclient? Because we probably have fixes to do in the client too, e.g because AFAICT the trick with the comment #.yaml works there too:

<https://github.com/openstack/python-heatclient/blob/master/heatclient/v1/shell.py#L796>

<https://github.com/openstack/python-heatclient/blob/master/heatclient/common/template_utils.py#L82>

$ cat bad\_tmpl.yaml

heat\_template\_version: 2013-05-23

resources:

  test:

    type: /etc/passwd#.yaml

If you do heat --debug template-validate bad\_tmp.yaml you'll see that we read passwd and send it in the files map (even though we know current heat ignores the files at the API level.

I guess this latter case is more a safeguard against users doing something stupid, but we should probably make it more robust if possible.

Hey Angus, yeah I realize there are limitations with the validation in it's current form, which basically doesn't work at all with nested stacks - wouldn't it be better to just skip them completely rather than trying to load random files which may not bear any relation to what the user expects (e.g, how does a user of a public cloud heat have \*any\* idea what's in /etc/templates of their provider?)
That's one reason why I've been reworking validate to work more like create/preview:
https://review.openstack.org/#/c/223581/
Here, we actually pass the files map, so we can safely do nested validation:
https://review.openstack.org/#/c/224078/
I think this is a better long-term direction, but it obviously doesn't solve the sort term requirement for a backportable quick fix.
In the tests above - are those being done directly via curl, or using heatclient? Because we probably have fixes to do in the client too, e.g because AFAICT the trick with the comment #.yaml works there too:
https://github.com/openstack/python-heatclient/blob/master/heatclient/v1/shell.py#L796
https://github.com/openstack/python-heatclient/blob/master/heatclient/common/template\_utils.py#L82
$ cat bad\_tmpl.yaml
heat\_template\_version: 2013-05-23
resources:
test:
type: /etc/passwd#.yaml
If you do heat --debug template-validate bad\_tmp.yaml you'll see that we read passwd and send it in the files map (even though we know current heat ignores the files at the API level.
I guess this latter case is more a safeguard against users doing something stupid, but we should probably make it more robust if possible.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-09-17: |  |  | [#16](/heat/%2Bbug/1496277/comments/16) |
| --- | --- | --- | --- |

The sort of fix I was thinking was (not yet tried):

1. Look in resources.global\_env().get\_class(type\_name) (same as elsewhere in service.py)

2. If we don't find the type, check if it matches foo.yaml/foo.template paths with any url prefix, but \*don't\* read any files

3. If it's not a path/template type then look in the params derived resource\_registry for a type alias

4. If the Type isn't found now, it's a validation failure

Then, when the rework I linked above lands, we'd be able to extend (2) and (3) to consume the files passed in the files map from the client (which as mentioned, the client already passes, but the API ignores).

The sort of fix I was thinking was (not yet tried):
1. Look in resources.global\_env().get\_class(type\_name) (same as elsewhere in service.py)
2. If we don't find the type, check if it matches foo.yaml/foo.template paths with any url prefix, but \*don't\* read any files
3. If it's not a path/template type then look in the params derived resource\_registry for a type alias
4. If the Type isn't found now, it's a validation failure
Then, when the rework I linked above lands, we'd be able to extend (2) and (3) to consume the files passed in the files map from the client (which as mentioned, the client already passes, but the API ignores).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-17: |  |  | [#17](/heat/%2Bbug/1496277/comments/17) |
| --- | --- | --- | --- |

@steven I did my testing by sending the requests directly, for exactly the reason you said, I saw that heatclient suffers from the same issue and template-validate will validate (and blow up) in the client.

@steven I did my testing by sending the requests directly, for exactly the reason you said, I saw that heatclient suffers from the same issue and template-validate will validate (and blow up) in the client.

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2015-09-18

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-09-21: |  |  | [#18](/heat/%2Bbug/1496277/comments/18) |
| --- | --- | --- | --- |

Here is the proposed impact description:

Title: Heat denial of service through template-validate

Reporter: Steven Hardy (Red Hat)

Products: Heat, python-heatclient

Affects: versions through 2014.2.3 and 2015.1 versions through 2015.1.1

Description:

Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/null, an authenticated user may trick the heatclient and/or the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user. All Heat setups are affected.

Here is the proposed impact description:
Title: Heat denial of service through template-validate
Reporter: Steven Hardy (Red Hat)
Products: Heat, python-heatclient
Affects: versions through 2014.2.3 and 2015.1 versions through 2015.1.1
Description:
Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/null, an authenticated user may trick the heatclient and/or the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user. All Heat setups are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-09-21: |  |  | [#19](/heat/%2Bbug/1496277/comments/19) |
| --- | --- | --- | --- |

I think you meant /dev/zero, not /dev/null.

I think you meant /dev/zero, not /dev/null.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-09-21: |  |  | [#20](/heat/%2Bbug/1496277/comments/20) |
| --- | --- | --- | --- |

Actually, it appears some of my remarks in comment #15 are wrong - it looks like the normal stack.Stack.validate() path is also affected by this, e.g my rework of template validation doesn't fix it, which means you can probably also trigger this via create/update too.

$ curl -g -i -X POST <http://192.168.0.16:8004/v1/63b7b69cab914cb5beeaaee26b933aac/validate> -H "User-Agent: python-heatclient" -H "Content-Type: application/json" -H "Accept: application/json" -H "X-Auth-Token: putatokenhere" -d '{"files": {}, "environment": {}, "template": {"heat\_template\_version": "2013-05-23", "resources": {"test": {"type": "file:///etc/passwd#.yaml"}}}}'

This fails with "The template is not a JSON object" even with my patches applied, when it should fail saying the type cannot be found.

Actually, it appears some of my remarks in comment #15 are wrong - it looks like the normal stack.Stack.validate() path is also affected by this, e.g my rework of template validation doesn't fix it, which means you can probably also trigger this via create/update too.
$ curl -g -i -X POST http://192.168.0.16:8004/v1/63b7b69cab914cb5beeaaee26b933aac/validate -H "User-Agent: python-heatclient" -H "Content-Type: application/json" -H "Accept: application/json" -H "X-Auth-Token: putatokenhere" -d '{"files": {}, "environment": {}, "template": {"heat\_template\_version": "2013-05-23", "resources": {"test": {"type": "file:///etc/passwd#.yaml"}}}}'
This fails with "The template is not a JSON object" even with my patches applied, when it should fail saying the type cannot be found.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2015-09-21: |  |  | [#21](/heat/%2Bbug/1496277/comments/21) |
| --- | --- | --- | --- |

The exploit scenario described, referencing a large file or stream to consume system memory, doesn't seem like it would be limited to local paths. What mitigation is in place to prevent large remote files/streams via allowed protocol schemes from having a similar effect?

The exploit scenario described, referencing a large file or stream to consume system memory, doesn't seem like it would be limited to local paths. What mitigation is in place to prevent large remote files/streams via allowed protocol schemes from having a similar effect?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steve Baker (steve-stevebaker)](https://launchpad.net/~steve-stevebaker) wrote on 2015-09-21:  [**Re: [Bug 1496277] Re: template-validate may read server local files**](/heat/%2Bbug/1496277/comments/22) |  |  | [#22](/heat/%2Bbug/1496277/comments/22) |
| --- | --- | --- | --- |

On 22/09/15 02:33, Jeremy Stanley wrote:

> The exploit scenario described, referencing a large file or stream to

> consume system memory, doesn't seem like it would be limited to local

> paths. What mitigation is in place to prevent large remote files/streams

> via allowed protocol schemes from having a similar effect?

>

This particular code path only allows the file:// protocol

On 22/09/15 02:33, Jeremy Stanley wrote:
> The exploit scenario described, referencing a large file or stream to
> consume system memory, doesn't seem like it would be limited to local
> paths. What mitigation is in place to prevent large remote files/streams
> via allowed protocol schemes from having a similar effect?
>
This particular code path only allows the file:// protocol

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-21:  [**Re: template-validate may read server local files**](/heat/%2Bbug/1496277/comments/23) |  |  | [#23](/heat/%2Bbug/1496277/comments/23) |
| --- | --- | --- | --- |

While the content of the file is not returned, there is also at very least a minor information leak here.

The error returned by the requests can be used to determine if a file exists and is readable by glance-engine.

While the content of the file is not returned, there is also at very least a minor information leak here.
The error returned by the requests can be used to determine if a file exists and is readable by glance-engine.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-09-28: |  |  | [#24](/heat/%2Bbug/1496277/comments/24) |
| --- | --- | --- | --- |

Here is the updated impact description with /dev/zero, file existence leak and new affect line (assuming this won't make it for upcoming 2015.1.2):

Title: Heat denial of service through template-validate

Reporter: Steven Hardy (Red Hat)

Products: Heat, python-heatclient

Affects: <=2014.2.3, >=2015.1.0, <=2015.1.2

Description:

Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heatclient and/or the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by glance-engine. All Heat setups are affected.

Here is the updated impact description with /dev/zero, file existence leak and new affect line (assuming this won't make it for upcoming 2015.1.2):
Title: Heat denial of service through template-validate
Reporter: Steven Hardy (Red Hat)
Products: Heat, python-heatclient
Affects: <=2014.2.3, >=2015.1.0, <=2015.1.2
Description:
Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heatclient and/or the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by glance-engine. All Heat setups are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-09-28: |  |  | [#25](/heat/%2Bbug/1496277/comments/25) |
| --- | --- | --- | --- |

I think you mean s/glance-engine/heat-engine/ above?

I think you mean s/glance-engine/heat-engine/ above?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-28: |  |  | [#26](/heat/%2Bbug/1496277/comments/26) |
| --- | --- | --- | --- |

Yes I did. I was (failing at) multi-tasking.

Yes I did. I was (failing at) multi-tasking.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-09-28: |  |  | [#27](/heat/%2Bbug/1496277/comments/27) |
| --- | --- | --- | --- |

Good catch :-)

Title: Heat denial of service through template-validate

Reporter: Steven Hardy (Red Hat)

Products: Heat, python-heatclient

Affects: <=2014.2.3, >=2015.1.0, <=2015.1.2

Description:

Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heatclient and/or the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by heat-engine. All Heat setups are affected.

Good catch :-)
Title: Heat denial of service through template-validate
Reporter: Steven Hardy (Red Hat)
Products: Heat, python-heatclient
Affects: <=2014.2.3, >=2015.1.0, <=2015.1.2
Description:
Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heatclient and/or the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by heat-engine. All Heat setups are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2015-10-05: |  |  | [#28](/heat/%2Bbug/1496277/comments/28) |
| --- | --- | --- | --- |

Tristan's updated impact description in comment #27 looks good to me.

Tristan's updated impact description in comment #27 looks good to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-10-05: |  |  | [#29](/heat/%2Bbug/1496277/comments/29) |
| --- | --- | --- | --- |

Can you please attach backports for stable/juno and kilo that applies cleanly. Also is the patch in comment #10 pre-approved by Heat-coresec ?

Also, is there a fix for python-heatclient yet ?

Can you please attach backports for stable/juno and kilo that applies cleanly. Also is the patch in comment #10 pre-approved by Heat-coresec ?
Also, is there a fix for python-heatclient yet ?

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → In Progress |
| **assignee**: | nobody → Tristan Cacqueray (tristan-cacqueray) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steve Baker (steve-stevebaker)](https://launchpad.net/~steve-stevebaker) wrote on 2015-10-05: |  |  | [#30](/heat/%2Bbug/1496277/comments/30) |
| --- | --- | --- | --- |

Comment #27 looks good.

Regarding the fix in comment #10, operators could set their global environment to host their templates anywhere, not just /etc/heat/templates. A better fix might be to load the global environment and reject any file:// path which doesn't have an explicit files entry in the global env.

Regarding a heatclient fix we have a couple of options which we could discuss here:

- don't fix it, communicate to users that they should only launch templates from trusted sources

- fix it for templates loaded over the network (http, https) so that any file:// url in these templates are rejected

Comment #27 looks good.
Regarding the fix in comment #10, operators could set their global environment to host their templates anywhere, not just /etc/heat/templates. A better fix might be to load the global environment and reject any file:// path which doesn't have an explicit files entry in the global env.
Regarding a heatclient fix we have a couple of options which we could discuss here:
- don't fix it, communicate to users that they should only launch templates from trusted sources
- fix it for templates loaded over the network (http, https) so that any file:// url in these templates are rejected

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2015-10-06

| **summary**: | - template-validate may read server local files+ template-validate may read server local files (CVE-2015-5295) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-11-09:  [**Re: template-validate may read server local files (CVE-2015-5295)**](/heat/%2Bbug/1496277/comments/31) |  |  | [#31](/heat/%2Bbug/1496277/comments/31) |
| --- | --- | --- | --- |

Is someone working on patch update according to comment #30 ?

Is someone working on patch update according to comment #30 ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-11-09: |  |  | [#32](/heat/%2Bbug/1496277/comments/32) |
| --- | --- | --- | --- |

I'm not sure on the status of Angus's patch, I've been meaning to sync up with him about it.

There has been some (private) discussion around an alternative solution, triggered by <https://review.openstack.org/#/c/238194/> which aims to fix a different issue, but ends up having some overlap with this issue (potentially) in terms of implementation.

The potential solution mentioned by Zane is to not generate classes via generate\_class except for the global environment, which would mean that we'd never hit the code in heat-engine causing this vulnerability, because all TemplateResource objects instantiated from user provided environments would be directly instantiated template\_resource.TemplateResource objects, not subclasses derived from generate\_class.

Context is <https://review.openstack.org/#/c/79291/3>, which shows that generate\_class was only added so we could allow resource-type-list to show resources defined in the global environment, e.g it's not actually needed for user provided environments.

I'm currently investigating this approach , to enable fixing [bug #1508115](/bugs/1508115), and will report back here (before posting anything in public) should that approach prove viable as a solution to both bugs.

Angus: I'd be interested to chat and hear your thoughts on that as a potential solution.

Tristan: How do we handle this should a fix prove viable as a side-effect to another bug which is not flagged as security impacting?

I'm not sure on the status of Angus's patch, I've been meaning to sync up with him about it.
There has been some (private) discussion around an alternative solution, triggered by https://review.openstack.org/#/c/238194/ which aims to fix a different issue, but ends up having some overlap with this issue (potentially) in terms of implementation.
The potential solution mentioned by Zane is to not generate classes via generate\_class except for the global environment, which would mean that we'd never hit the code in heat-engine causing this vulnerability, because all TemplateResource objects instantiated from user provided environments would be directly instantiated template\_resource.TemplateResource objects, not subclasses derived from generate\_class.
Context is https://review.openstack.org/#/c/79291/3, which shows that generate\_class was only added so we could allow resource-type-list to show resources defined in the global environment, e.g it's not actually needed for user provided environments.
I'm currently investigating this approach , to enable fixing bug #1508115, and will report back here (before posting anything in public) should that approach prove viable as a solution to both bugs.
Angus: I'd be interested to chat and hear your thoughts on that as a potential solution.
Tristan: How do we handle this should a fix prove viable as a side-effect to another bug which is not flagged as security impacting?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-11-09: |  |  | [#33](/heat/%2Bbug/1496277/comments/33) |
| --- | --- | --- | --- |

Steven, while it's not ideal to have a public fix for a private bug, for what it worth, the advance notification (pre-OSSA) can reference public review numbers. If both bugs 1508115 and [bug 1496277](/bugs/1496277) can be fixed with one patch, I'd say it's ok to do so directly on gerrit, as long as the security implication is not obvious.

However we need to make sure all the required piece to fix this bug are identified and referenced so that stakeholders can apply the fix.

Steven, while it's not ideal to have a public fix for a private bug, for what it worth, the advance notification (pre-OSSA) can reference public review numbers. If both bugs 1508115 and bug 1496277 can be fixed with one patch, I'd say it's ok to do so directly on gerrit, as long as the security implication is not obvious.
However we need to make sure all the required piece to fix this bug are identified and referenced so that stakeholders can apply the fix.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-11-10: |  |  | [#34](/heat/%2Bbug/1496277/comments/34) |
| --- | --- | --- | --- |

If it wasn't referencing a private security bug I believe it would definitely be extremely non-obvious. With the reference to a hidden bug... I think a determined engineer could probably figure it out.

Maybe post a review referencing only [bug 1508115](/bugs/1508115) and mark it WIP; when it's got the o-k from a couple of cores upload a new patchset referencing this bug in the commit message and fast-merge it.

If it wasn't referencing a private security bug I believe it would definitely be extremely non-obvious. With the reference to a hidden bug... I think a determined engineer could probably figure it out.
Maybe post a review referencing only bug 1508115 and mark it WIP; when it's got the o-k from a couple of cores upload a new patchset referencing this bug in the commit message and fast-merge it.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-11-10: |  |  | [#35](/heat/%2Bbug/1496277/comments/35) |
| --- | --- | --- | --- |

@Zane: Yeah I was kinda thinking the same, only I assumed we'd probably just land the patch referencing [bug 1508115](/bugs/1508115) and document it as a dependency here, so it can be referenced in the pre-OSSA. I'm not sure if that works wrt the process outlined by Tristan though.

Hopefully I'll have a patch ready later today, I'll post it under [bug 1508115](/bugs/1508115) and we can discuss the next steps after it's had some reviews.

@Zane: Yeah I was kinda thinking the same, only I assumed we'd probably just land the patch referencing bug 1508115 and document it as a dependency here, so it can be referenced in the pre-OSSA. I'm not sure if that works wrt the process outlined by Tristan though.
Hopefully I'll have a patch ready later today, I'll post it under bug 1508115 and we can discuss the next steps after it's had some reviews.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-11-17: |  |  | [#36](/heat/%2Bbug/1496277/comments/36) |
| --- | --- | --- | --- |

Steve and I have both looked at this and its proving remarkably resistant to a fix that doesn't create other regressions :( We still have some ideas though.

Steve and I have both looked at this and its proving remarkably resistant to a fix that doesn't create other regressions :( We still have some ideas though.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-11-17: |  |  | [#37](/heat/%2Bbug/1496277/comments/37) |
| --- | --- | --- | --- |

What Steven proposed in comment #35 works for me. If the fix for [bug 1508115](/bugs/1508115) also solve [bug 1496277](/bugs/1496277), then we'll wait for the fix to be merged before setting a disclosure date.

Note that we also needs backports (Kilo and Liberty at least, but maybe not Juno since it's about to be EOL).

If the original fix is not going to be cherry-picked on gerrit, then please attach required backports to this bug report.

What Steven proposed in comment #35 works for me. If the fix for bug 1508115 also solve bug 1496277, then we'll wait for the fix to be merged before setting a disclosure date.
Note that we also needs backports (Kilo and Liberty at least, but maybe not Juno since it's about to be EOL).
If the original fix is not going to be cherry-picked on gerrit, then please attach required backports to this bug report.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-11-17: |  |  | [#38](/heat/%2Bbug/1496277/comments/38) |
| --- | --- | --- | --- |

Unfortunately the fix we had in mind for [bug 1508115](/bugs/1508115) proved impractical for a number of reasons, so we had to go with a simpler interim fix, which does not have the side-effect of fixing this bug.

So we're still in the process of working through options - basically it boils down to what Angus said in comment #14, the subtext of which is there's considerable hidden complexity around our (inconsistent) application of the user\_resource flag in the environment (you can't rely on it always being false for templates loaded from the global environment, which IMO is a bug), and also around our usage of the generate\_class derived subclass for facade validation.

I hope we'll have better news soon but if not then we'll probably have to revisit the path restriction workaround posted by Angus in comment #7. My objections to that approach stand, but I now understand the reasons for it much better :(

Unfortunately the fix we had in mind for bug 1508115 proved impractical for a number of reasons, so we had to go with a simpler interim fix, which does not have the side-effect of fixing this bug.
So we're still in the process of working through options - basically it boils down to what Angus said in comment #14, the subtext of which is there's considerable hidden complexity around our (inconsistent) application of the user\_resource flag in the environment (you can't rely on it always being false for templates loaded from the global environment, which IMO is a bug), and also around our usage of the generate\_class derived subclass for facade validation.
I hope we'll have better news soon but if not then we'll probably have to revisit the path restriction workaround posted by Angus in comment #7. My objections to that approach stand, but I now understand the reasons for it much better :(

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2015-11-23

| Changed in ossa: | |
| --- | --- |
| **importance**: | High → Critical |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-11-23: |  |  | [#39](/heat/%2Bbug/1496277/comments/39) |
| --- | --- | --- | --- |

We've raised the importance to critical since it's a trivial api denial of service.

Is there any progress on the fix ?

We've raised the importance to critical since it's a trivial api denial of service.
Is there any progress on the fix ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-11-23: |  |  | [#40](/heat/%2Bbug/1496277/comments/40) |
| --- | --- | --- | --- |

A little, and I'm hoping to spend more time on it over the next couple of days, but there remain some fundamental unanswered questions without which it will be difficult to have confidence in a fix - especially one that needs to be embargoed and thus has to work first time without review/testing feedback from the wider community.

A little, and I'm hoping to spend more time on it over the next couple of days, but there remain some fundamental unanswered questions without which it will be difficult to have confidence in a fix - especially one that needs to be embargoed and thus has to work first time without review/testing feedback from the wider community.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-11-24: |  |  | [#41](/heat/%2Bbug/1496277/comments/41) |
| --- | --- | --- | --- |

Testing a fix now that is pretty tidy and I believe keeps everything working. Will try to post a patch tomorrow once I have some more unit tests written. Otherwise it will be early next week (due to Thanksgiving).

Testing a fix now that is pretty tidy and I believe keeps everything working. Will try to post a patch tomorrow once I have some more unit tests written. Otherwise it will be early next week (due to Thanksgiving).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-11-25: |  |  | [#42](/heat/%2Bbug/1496277/comments/42) |
| --- | --- | --- | --- |

* [load-files-from-correct-source.patch](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4525484/%2Bfiles/load-files-from-correct-source.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4525484)
  (3.2 KiB,
  text/plain)

I posted a series here: <https://review.openstack.org/#/q/status:open+project:openstack/heat+branch:master+topic:bug/1518458,n,z>

The interesting one is <https://review.openstack.org/#/c/250053/> which should mostly solve the problem. The exception is the validation code introduced by the fix for [bug 1479565](/bugs/1479565). The attached patch should solve the last part of the problem without breaking that fix.

Feeback is appreciated. There are still some murky parts around updates (by which time the previously global type mappings are treated as user type mappings), but in theory these patches can't make anything worse. In theory.

I posted a series here: https://review.openstack.org/#/q/status:open+project:openstack/heat+branch:master+topic:bug/1518458,n,z
The interesting one is https://review.openstack.org/#/c/250053/ which should mostly solve the problem. The exception is the validation code introduced by the fix for bug 1479565. The attached patch should solve the last part of the problem without breaking that fix.
Feeback is appreciated. There are still some murky parts around updates (by which time the previously global type mappings are treated as user type mappings), but in theory these patches can't make anything worse. In theory.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-12-07: |  |  | [#43](/heat/%2Bbug/1496277/comments/43) |
| --- | --- | --- | --- |

The patches above all got merged:

<https://review.openstack.org/#/q/status:merged+project:openstack/heat+branch:master+topic:bug/1518458,n,z>

So if we can get reviews posted here on the attached patch then I can propose this fix + backports.

The patches above all got merged:
https://review.openstack.org/#/q/status:merged+project:openstack/heat+branch:master+topic:bug/1518458,n,z
So if we can get reviews posted here on the attached patch then I can propose this fix + backports.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-12-07: |  |  | [#44](/heat/%2Bbug/1496277/comments/44) |
| --- | --- | --- | --- |

@Zane: Thanks for looking at this, +1 on the patch in comment #42 - I agree that we may find that self.user\_resource isn't treated properly on update - it'd be worth testing a scenario like:

1. Create a stack with a TemplateResource defined in the global environment

2. Modify the file referenced by the global environment mapping

3. Update the stack from (1) and prove the changes are picked up.

IIRC this sequence does currently work, I'll pull your patch tomorrow and re-test, unless anyone else gets to it first.

@Zane: Thanks for looking at this, +1 on the patch in comment #42 - I agree that we may find that self.user\_resource isn't treated properly on update - it'd be worth testing a scenario like:
1. Create a stack with a TemplateResource defined in the global environment
2. Modify the file referenced by the global environment mapping
3. Update the stack from (1) and prove the changes are picked up.
IIRC this sequence does currently work, I'll pull your patch tomorrow and re-test, unless anyone else gets to it first.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-12-09: |  |  | [#45](/heat/%2Bbug/1496277/comments/45) |
| --- | --- | --- | --- |

Steven, any feedback from the test scenario described in comment #44 ?

Zane, the patch doesn't apply cleanly using "git am", can you please format the proposed patch using "git format-patch --stdout HEAD~1". Also it doesn't apply cleanly on stable/liberty nor stable/kilo. Ideally we would need three different patch for each branch.

IIUC, this patch needs to be applied on top of status:merged project:openstack/heat branch:master topic:bug/1518458...

Will those patches need be backported before disclosing this bug ?

Steven, any feedback from the test scenario described in comment #44 ?
Zane, the patch doesn't apply cleanly using "git am", can you please format the proposed patch using "git format-patch --stdout HEAD~1". Also it doesn't apply cleanly on stable/liberty nor stable/kilo. Ideally we would need three different patch for each branch.
IIUC, this patch needs to be applied on top of status:merged project:openstack/heat branch:master topic:bug/1518458...
Will those patches need be backported before disclosing this bug ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-12-09: |  |  | [#46](/heat/%2Bbug/1496277/comments/46) |
| --- | --- | --- | --- |

@Tristan - yes, sorry for the delay, I've now tested the following:

Via heatclient:

1. Create stack with a TemplateResource defined in /etc/heat/environment.d/default.yaml referencing the local filesystem

  2. Modified the template file referenced

  3. Update the stack with no other changes.

Turns out the concerns mentioned in comments #42 and #44 were unfounded, AFAICS this still works as it did before, and on update the modified file is loaded into the global environment, and the changes do take effect.

Via curl:

1. Created a stack referencing a nested stack defined in the "files" map - this worked as expected

  2. Repeat previous step modifying the "files" map key so the type definition in the template points to a valid local path, but it's undefined in the "files" map of the request. This fails with "Invalid URL scheme file" and StackValidationFailed

So, I'm +2 on the fix, from my (admittedly fairly limited) testing it doesn't seem to break anything, and it fixes the reported issue - thanks Zane!

The patch applies fine via git apply or patch -p1, but I'll attach a git am friendly version shortly.

@Tristan - yes, sorry for the delay, I've now tested the following:
Via heatclient:
1. Create stack with a TemplateResource defined in /etc/heat/environment.d/default.yaml referencing the local filesystem
2. Modified the template file referenced
3. Update the stack with no other changes.
Turns out the concerns mentioned in comments #42 and #44 were unfounded, AFAICS this still works as it did before, and on update the modified file is loaded into the global environment, and the changes do take effect.
Via curl:
1. Created a stack referencing a nested stack defined in the "files" map - this worked as expected
2. Repeat previous step modifying the "files" map key so the type definition in the template points to a valid local path, but it's undefined in the "files" map of the request. This fails with "Invalid URL scheme file" and StackValidationFailed
So, I'm +2 on the fix, from my (admittedly fairly limited) testing it doesn't seem to break anything, and it fixes the reported issue - thanks Zane!
The patch applies fine via git apply or patch -p1, but I'll attach a git am friendly version shortly.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-12-09: |  |  | [#47](/heat/%2Bbug/1496277/comments/47) |
| --- | --- | --- | --- |

* [Updated patch for git am](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4532176/%2Bfiles/load-files-from-correct-source-2.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4532176)
  (3.4 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-12-09: |  |  | [#48](/heat/%2Bbug/1496277/comments/48) |
| --- | --- | --- | --- |

Yes, we would need to backport that whole series to liberty & kilo. If we're agreed on this fix (it sounds like we are) then I can prepare backports of the whole series and attach them here. My current thinking is that I would squash them all into a single patch per branch.

Yes, we would need to backport that whole series to liberty & kilo. If we're agreed on this fix (it sounds like we are) then I can prepare backports of the whole series and attach them here. My current thinking is that I would squash them all into a single patch per branch.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-12-10: |  |  | [#49](/heat/%2Bbug/1496277/comments/49) |
| --- | --- | --- | --- |

Patch in comment #47 applied cleanly on master and tox succeed for py27 and pep8. Thanks!

Patch in comment #47 applied cleanly on master and tox succeed for py27 and pep8. Thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-01-04: |  |  | [#50](/heat/%2Bbug/1496277/comments/50) |
| --- | --- | --- | --- |

Angus, can you please have a look at proposed patch #47, it seems like the fix is waiting for approval before being backported.

Angus, can you please have a look at proposed patch #47, it seems like the fix is waiting for approval before being backported.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2016-01-04: |  |  | [#51](/heat/%2Bbug/1496277/comments/51) |
| --- | --- | --- | --- |

Hi, sorry I was on PTO. That patch looks fine to me (#47).

Hi, sorry I was on PTO. That patch looks fine to me (#47).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-05: |  |  | [#52](/heat/%2Bbug/1496277/comments/52) |
| --- | --- | --- | --- |

Actually the reason for the lack of progress on the backport is that I have been on PTO as well. I'm back now and it's on my list of things to do this week. I'll attach the backported version here when ready.

Actually the reason for the lack of progress on the backport is that I have been on PTO as well. I'm back now and it's on my list of things to do this week. I'll attach the backported version here when ready.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-11: |  |  | [#53](/heat/%2Bbug/1496277/comments/53) |
| --- | --- | --- | --- |

* [Final patch for master](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4548273/%2Bfiles/bug1496277-master.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4548273)
  (3.6 KiB,
  text/plain)

Here is the final version of the patch, with improved commit message.

Here is the final version of the patch, with improved commit message.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-11: |  |  | [#54](/heat/%2Bbug/1496277/comments/54) |
| --- | --- | --- | --- |

* [Final patch for Liberty](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4548274/%2Bfiles/bug1496277-liberty.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4548274)
  (12.3 KiB,
  text/plain)

Here is a backport for Liberty. The second "cherry-picked from" hash may need to be adjusted to match whatever hash the master commit eventually gets.

Here is a backport for Liberty. The second "cherry-picked from" hash may need to be adjusted to match whatever hash the master commit eventually gets.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-11: |  |  | [#55](/heat/%2Bbug/1496277/comments/55) |
| --- | --- | --- | --- |

* [Final patch for Kilo](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4548275/%2Bfiles/bug1496277-kilo.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4548275)
  (11.1 KiB,
  text/plain)

Here is a backport for Kilo. The second "cherry-picked from" hash may need to be adjusted to match whatever hash the master commit eventually gets.

Here is a backport for Kilo. The second "cherry-picked from" hash may need to be adjusted to match whatever hash the master commit eventually gets.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-01-12: |  |  | [#56](/heat/%2Bbug/1496277/comments/56) |
| --- | --- | --- | --- |

Thanks Zane, I confirm this patch fix the issue (at least for rdo-kilo).

Also, tox passed on all three patchs.

@heat-coresec, please review proposed patch (comment #53, #54 and #55).

If patch are +2 here, I propose a disclosure date next week:

2016-01-19, 1500UTC

Would that works for you folks?

Thanks Zane, I confirm this patch fix the issue (at least for rdo-kilo).
Also, tox passed on all three patchs.
@heat-coresec, please review proposed patch (comment #53, #54 and #55).
If patch are +2 here, I propose a disclosure date next week:
2016-01-19, 1500UTC
Would that works for you folks?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2016-01-12: |  |  | [#57](/heat/%2Bbug/1496277/comments/57) |
| --- | --- | --- | --- |

Thanks for the updates Zane - all three patches look good to me +2

Thanks for the updates Zane - all three patches look good to me +2

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-01-12: |  |  | [#58](/heat/%2Bbug/1496277/comments/58) |
| --- | --- | --- | --- |

Though, the python-heatclient is still affected, I had to use direct curl in order to verify the issue was fixed for the API.

What's the status for the client, is it going to be fixed or should we add a Note to the advisory about it ?

Though, the python-heatclient is still affected, I had to use direct curl in order to verify the issue was fixed for the API.
What's the status for the client, is it going to be fixed or should we add a Note to the advisory about it ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-12: |  |  | [#59](/heat/%2Bbug/1496277/comments/59) |
| --- | --- | --- | --- |

I don't understand what it means for the client to be affected? I'm not worried about the user reading their own files.

I don't understand what it means for the client to be affected? I'm not worried about the user reading their own files.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-01-12: |  |  | [#60](/heat/%2Bbug/1496277/comments/60) |
| --- | --- | --- | --- |

Trying to reproduce using this sequence quickly consumes all system memory and crashed my setup:

cat > bad\_template.yaml << EOF

heat\_template\_version: 2013-05-23

description": "a"

resources: {"my\_instance": {"type": "file:///dev/zero#a.yaml", "properties": {"flavor": "m1.small"}}}

EOF

heat stack-create --template-file ./bad\_template.yaml test\_bad

I propose to add this Note to the advisory:

- Until the python-heatclient get updated, this bug also reproduces on the client side, users should only launch template from trusted sources.

Trying to reproduce using this sequence quickly consumes all system memory and crashed my setup:
cat > bad\_template.yaml << EOF
heat\_template\_version: 2013-05-23
description": "a"
resources: {"my\_instance": {"type": "file:///dev/zero#a.yaml", "properties": {"flavor": "m1.small"}}}
EOF
heat stack-create --template-file ./bad\_template.yaml test\_bad
I propose to add this Note to the advisory:
- Until the python-heatclient get updated, this bug also reproduces on the client side, users should only launch template from trusted sources.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-12: |  |  | [#61](/heat/%2Bbug/1496277/comments/61) |
| --- | --- | --- | --- |

Users should \*always\* launch templates only from trusted sources. There is no time when launching a template from an untrusted source would be a good idea, any more than running a shell script from an untrusted source would be.

There isn't a bug in the client, so there's nothing to update. There isn't anything we could do even in principle, because the user is allowed to reference any file they like (unlike on the server where they're all supposed to be installed in /etc/heat/). I don't think we should imply otherwise.

Users should \*always\* launch templates only from trusted sources. There is no time when launching a template from an untrusted source would be a good idea, any more than running a shell script from an untrusted source would be.
There isn't a bug in the client, so there's nothing to update. There isn't anything we could do even in principle, because the user is allowed to reference any file they like (unlike on the server where they're all supposed to be installed in /etc/heat/). I don't think we should imply otherwise.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-01-12: |  |  | [#62](/heat/%2Bbug/1496277/comments/62) |
| --- | --- | --- | --- |

Alright, my bad, comment #30 suggested the python-heatclient could get fixed as well.

Here is the final impact description removing client affect:

Title: Heat denial of service through template-validate

Reporter: Steven Hardy (Red Hat)

Products: Heat

Affects: <=2015.1.2, ==5.0.0

Description:

Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by heat-engine. All Heat setups are affected.

Alright, my bad, comment #30 suggested the python-heatclient could get fixed as well.
Here is the final impact description removing client affect:
Title: Heat denial of service through template-validate
Reporter: Steven Hardy (Red Hat)
Products: Heat
Affects: <=2015.1.2, ==5.0.0
Description:
Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by heat-engine. All Heat setups are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2016-01-13: |  |  | [#63](/heat/%2Bbug/1496277/comments/63) |
| --- | --- | --- | --- |

Well, there might be something we can do in heatclient to at least try to help users to (knowingly or unknowingly) do the wrong thing.

E.g, we could resolve "file:///dev/zero#a.yaml" and at least check that the resulting file we're reading is a regular file and perhaps ends with an expected extension, e.g yaml, yml, json etc.

But in general I agree with Zane, we tend to take the view that on the client side it's up to the user to ensure their configuration is sane and that they don't DoS themselves.

Well, there might be something we can do in heatclient to at least try to help users to (knowingly or unknowingly) do the wrong thing.
E.g, we could resolve "file:///dev/zero#a.yaml" and at least check that the resulting file we're reading is a regular file and perhaps ends with an expected extension, e.g yaml, yml, json etc.
But in general I agree with Zane, we tend to take the view that on the client side it's up to the user to ensure their configuration is sane and that they don't DoS themselves.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2016-01-13: |  |  | [#64](/heat/%2Bbug/1496277/comments/64) |
| --- | --- | --- | --- |

Obviously I meant \*not\* do the wrong thing :)

Obviously I meant \*not\* do the wrong thing :)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-01-13: |  |  | [#65](/heat/%2Bbug/1496277/comments/65) |
| --- | --- | --- | --- |

Alright thanks you, the advance notification is sent with public disclosure date/time:

2016-01-19, 1500UTC

I also fixed a typo in impact description proposed in comment #62: s/arbritrary/arbitrary/

Alright thanks you, the advance notification is sent with public disclosure date/time:
2016-01-19, 1500UTC
I also fixed a typo in impact description proposed in comment #62: s/arbritrary/arbitrary/

| Changed in ossa: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-14: |  |  | [#66](/heat/%2Bbug/1496277/comments/66) |
| --- | --- | --- | --- |

I realise that we don't officially support releases prior to Kilo even for security issues, but for the benefit of anyone running Juno, a completely untested patch is attached.

Affected releases are Icehouse, Juno, Kilo and Liberty.

I realise that we don't officially support releases prior to Kilo even for security issues, but for the benefit of anyone running Juno, a completely untested patch is attached.
Affected releases are Icehouse, Juno, Kilo and Liberty.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-14: |  |  | [#67](/heat/%2Bbug/1496277/comments/67) |
| --- | --- | --- | --- |

And here is a completely untested Icehouse patch.

And here is a completely untested Icehouse patch.

| Changed in heat: | |
| --- | --- |
| **assignee**: | Angus Salkeld (asalkeld) → Zane Bitter (zaneb) |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2016-01-19

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Fix proposed to heat (master)**](/heat/%2Bbug/1496277/comments/68) |  |  | [#68](/heat/%2Bbug/1496277/comments/68) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/269689>

Fix proposed to branch: master
Review: https://review.openstack.org/269689

| Changed in heat: | |
| --- | --- |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Fix proposed to heat (stable/liberty)**](/heat/%2Bbug/1496277/comments/69) |  |  | [#69](/heat/%2Bbug/1496277/comments/69) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/liberty

Review: <https://review.openstack.org/269691>

Fix proposed to branch: stable/liberty
Review: https://review.openstack.org/269691

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Fix proposed to heat (stable/kilo)**](/heat/%2Bbug/1496277/comments/70) |  |  | [#70](/heat/%2Bbug/1496277/comments/70) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/kilo

Review: <https://review.openstack.org/269692>

Fix proposed to branch: stable/kilo
Review: https://review.openstack.org/269692

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Related fix proposed to ossa (master)**](/heat/%2Bbug/1496277/comments/71) |  |  | [#71](/heat/%2Bbug/1496277/comments/71) |
| --- | --- | --- | --- |

Related fix proposed to branch: master

Review: <https://review.openstack.org/269697>

Related fix proposed to branch: master
Review: https://review.openstack.org/269697

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2016-01-19

| **summary**: | - template-validate may read server local files (CVE-2015-5295)+ [OSSA 2016-003] template-validate may read server local files+ (CVE-2015-5295) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Related fix merged to ossa (master)**](/heat/%2Bbug/1496277/comments/72) |  |  | [#72](/heat/%2Bbug/1496277/comments/72) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/269697>

Committed: <https://git.openstack.org/cgit/openstack/ossa/commit/?id=b3a71f9efa9daff818c0b9fe912b44e84d26a21c>

Submitter: Jenkins

Branch: master

commit b3a71f9efa9daff818c0b9fe912b44e84d26a21c

Author: Tristan Cacqueray <email address hidden>

Date: Tue Jan 19 10:03:56 2016 -0500

Adds OSSA-2016-003 (CVE-2015-5295)

Related-Bug: #1496277

    Change-Id: Ife3bc05344b7449fd4c5a2e0a1aaa8048c5c7e21

Reviewed: https://review.openstack.org/269697
Committed: https://git.openstack.org/cgit/openstack/ossa/commit/?id=b3a71f9efa9daff818c0b9fe912b44e84d26a21c
Submitter: Jenkins
Branch: master
commit b3a71f9efa9daff818c0b9fe912b44e84d26a21c
Author: Tristan Cacqueray <tdecacqu@redhat.com>
Date: Tue Jan 19 10:03:56 2016 -0500
Adds OSSA-2016-003 (CVE-2015-5295)
Related-Bug: #1496277
Change-Id: Ife3bc05344b7449fd4c5a2e0a1aaa8048c5c7e21

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2016-01-19

| **description**: | updated |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Fix merged to heat (stable/liberty)**](/heat/%2Bbug/1496277/comments/73) |  |  | [#73](/heat/%2Bbug/1496277/comments/73) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/269691>

Committed: <https://git.openstack.org/cgit/openstack/heat/commit/?id=87116e262329e5cd309a0f1e35ffefd06080022c>

Submitter: Jenkins

Branch: stable/liberty

commit 87116e262329e5cd309a0f1e35ffefd06080022c

Author: Zane Bitter <email address hidden>

Date: Tue Nov 24 12:29:38 2015 -0500

Load template files only from their known source

Modify get\_class to ensure that user-defined resources cannot result in

    reads from the local filesystem. Only resources defined by the operator

    in the global environment should read local files.

To make this work, this patch also adds a separate

    get\_class\_to\_instantiate() method to the Environment.

We were previously using get\_class for two different purposes - to get a

    resource plugin on which we could perform introspection to obtain the

    properties and attributes schema, and to get a resource plugin we could

    instantiate to create a Resource object. These are both the same except in

    the case of a TemplateResource, where having two different use cases for

    the same piece of code was adding considerable extra complexity. Combining

    the use cases in this way also made the error handling confusing (leading

    to [bug 1518458](/bugs/1518458)).

This change separates out the two cases.

Change-Id: I845e7d23c73242a4a4c9c40599690ab705c75caa

    Closes-Bug: #1496277

    Related-Bug: #1447194

    Related-Bug: #1518458

    Related-Bug: #1508115

    (cherry picked from commit 06a713c4456203cd561f16721dc8ac3bcbb37a3

                           and 26e6d5f6d776c1027c4f27058767952a58d15e25)

Reviewed: https://review.openstack.org/269691
Committed: https://git.openstack.org/cgit/openstack/heat/commit/?id=87116e262329e5cd309a0f1e35ffefd06080022c
Submitter: Jenkins
Branch: stable/liberty
commit 87116e262329e5cd309a0f1e35ffefd06080022c
Author: Zane Bitter <zbitter@redhat.com>
Date: Tue Nov 24 12:29:38 2015 -0500
Load template files only from their known source
Modify get\_class to ensure that user-defined resources cannot result in
reads from the local filesystem. Only resources defined by the operator
in the global environment should read local files.
To make this work, this patch also adds a separate
get\_class\_to\_instantiate() method to the Environment.
We were previously using get\_class for two different purposes - to get a
resource plugin on which we could perform introspection to obtain the
properties and attributes schema, and to get a resource plugin we could
instantiate to create a Resource object. These are both the same except in
the case of a TemplateResource, where having two different use cases for
the same piece of code was adding considerable extra complexity. Combining
the use cases in this way also made the error handling confusing (leading
to bug 1518458).
This change separates out the two cases.
Change-Id: I845e7d23c73242a4a4c9c40599690ab705c75caa
Closes-Bug: #1496277
Related-Bug: #1447194
Related-Bug: #1518458
Related-Bug: #1508115
(cherry picked from commit 06a713c4456203cd561f16721dc8ac3bcbb37a3
and 26e6d5f6d776c1027c4f27058767952a58d15e25)

| **tags**: | added: in-stable-liberty |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Fix merged to heat (stable/kilo)**](/heat/%2Bbug/1496277/comments/74) |  |  | [#74](/heat/%2Bbug/1496277/comments/74) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/269692>

Committed: <https://git.openstack.org/cgit/openstack/heat/commit/?id=fa19a617a79fd1cb0d892bb8ea87c4b9f6398c34>

Submitter: Jenkins

Branch: stable/kilo

commit fa19a617a79fd1cb0d892bb8ea87c4b9f6398c34

Author: Zane Bitter <email address hidden>

Date: Tue Nov 24 12:29:38 2015 -0500

Load template files only from their known source

Modify get\_class to ensure that user-defined resources cannot result in

    reads from the local filesystem. Only resources defined by the operator

    in the global environment should read local files.

To make this work, this patch also adds a separate

    get\_class\_to\_instantiate() method to the Environment.

We were previously using get\_class for two different purposes - to get a

    resource plugin on which we could perform introspection to obtain the

    properties and attributes schema, and to get a resource plugin we could

    instantiate to create a Resource object. These are both the same except in

    the case of a TemplateResource, where having two different use cases for

    the same piece of code was adding considerable extra complexity. Combining

    the use cases in this way also made the error handling confusing (leading

    to [bug 1518458](/bugs/1518458)).

This change separates out the two cases.

Change-Id: I845e7d23c73242a4a4c9c40599690ab705c75caa

    Closes-Bug: #1496277

    Related-Bug: #1447194

    Related-Bug: #1518458

    Related-Bug: #1508115

    (cherry picked from commit 06a713c4456203cd561f16721dc8ac3bcbb37a3

                           and 26e6d5f6d776c1027c4f27058767952a58d15e25)

Reviewed: https://review.openstack.org/269692
Committed: https://git.openstack.org/cgit/openstack/heat/commit/?id=fa19a617a79fd1cb0d892bb8ea87c4b9f6398c34
Submitter: Jenkins
Branch: stable/kilo
commit fa19a617a79fd1cb0d892bb8ea87c4b9f6398c34
Author: Zane Bitter <zbitter@redhat.com>
Date: Tue Nov 24 12:29:38 2015 -0500
Load template files only from their known source
Modify get\_class to ensure that user-defined resources cannot result in
reads from the local filesystem. Only resources defined by the operator
in the global environment should read local files.
To make this work, this patch also adds a separate
get\_class\_to\_instantiate() method to the Environment.
We were previously using get\_class for two different purposes - to get a
resource plugin on which we could perform introspection to obtain the
properties and attributes schema, and to get a resource plugin we could
instantiate to create a Resource object. These are both the same except in
the case of a TemplateResource, where having two different use cases for
the same piece of code was adding considerable extra complexity. Combining
the use cases in this way also made the error handling confusing (leading
to bug 1518458).
This change separates out the two cases.
Change-Id: I845e7d23c73242a4a4c9c40599690ab705c75caa
Closes-Bug: #1496277
Related-Bug: #1447194
Related-Bug: #1518458
Related-Bug: #1508115
(cherry picked from commit 06a713c4456203cd561f16721dc8ac3bcbb37a3
and 26e6d5f6d776c1027c4f27058767952a58d15e25)

| **tags**: | added: in-stable-kilo |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-19: |  |  | [#75](/heat/%2Bbug/1496277/comments/75) |
| --- | --- | --- | --- |

Here is an updated Icehouse patch with working unit tests.

Here is an updated Icehouse patch with working unit tests.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-19: |  |  | [#76](/heat/%2Bbug/1496277/comments/76) |
| --- | --- | --- | --- |

Here is an updated Juno patch with working unit tests.

Here is an updated Juno patch with working unit tests.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Doug Hellmann (doug-hellmann)](https://launchpad.net/~doug-hellmann) wrote on 2016-01-20:  [**Fix included in openstack/heat 5.0.1**](/heat/%2Bbug/1496277/comments/77) |  |  | [#77](/heat/%2Bbug/1496277/comments/77) |
| --- | --- | --- | --- |

This issue was fixed in the openstack/heat 5.0.1 release.

This issue was fixed in the openstack/heat 5.0.1 release.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-21:  [**Fix merged to heat (master)**](/heat/%2Bbug/1496277/comments/78) |  |  | [#78](/heat/%2Bbug/1496277/comments/78) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/269689>

Committed: <https://git.openstack.org/cgit/openstack/heat/commit/?id=26e6d5f6d776c1027c4f27058767952a58d15e25>

Submitter: Jenkins

Branch: master

commit 26e6d5f6d776c1027c4f27058767952a58d15e25

Author: Zane Bitter <email address hidden>

Date: Mon Jan 11 18:43:43 2016 -0500

Load template files only from their known source

Modify get\_class to ensure that user-defined resources cannot result in

    reads from the local filesystem. Only resources defined by the operator

    in the global environment should read local files.

Change-Id: I845e7d23c73242a4a4c9c40599690ab705c75caa

    Closes-Bug: #1496277

Reviewed: https://review.openstack.org/269689
Committed: https://git.openstack.org/cgit/openstack/heat/commit/?id=26e6d5f6d776c1027c4f27058767952a58d15e25
Submitter: Jenkins
Branch: master
commit 26e6d5f6d776c1027c4f27058767952a58d15e25
Author: Zane Bitter <zbitter@redhat.com>
Date: Mon Jan 11 18:43:43 2016 -0500
Load template files only from their known source
Modify get\_class to ensure that user-defined resources cannot result in
reads from the local filesystem. Only resources defined by the operator
in the global environment should read local files.
Change-Id: I845e7d23c73242a4a4c9c40599690ab705c75caa
Closes-Bug: #1496277

| Changed in heat: | |
| --- | --- |
| **status**: | In Progress → Fix Released |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2016-01-21

| Changed in ossa: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-02-25: |  |  | [#79](/heat/%2Bbug/1496277/comments/79) |
| --- | --- | --- | --- |

* [Juno patch (updated)](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4580996/%2Bfiles/bug1496277-juno.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4580996)
  (11.1 KiB,
  text/plain)

Sergey Kraynev from Mirantis reported that the attached patches for the Juno and Icehouse releases do not completely resolve the issue. Specifically, they fix it for stack creates and updates but not for validate-template. I am attaching updated patches for Juno and Icehouse.

See [bug 1549033](/bugs/1549033) for more details.

Sergey Kraynev from Mirantis reported that the attached patches for the Juno and Icehouse releases do not completely resolve the issue. Specifically, they fix it for stack creates and updates but not for validate-template. I am attaching updated patches for Juno and Icehouse.
See bug 1549033 for more details.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-02-25: |  |  | [#80](/heat/%2Bbug/1496277/comments/80) |
| --- | --- | --- | --- |

* [Icehouse patch (updated)](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4580997/%2Bfiles/bug1496277-icehouse.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4580997)
  (11.1 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2016-02-25: |  |  | [#81](/heat/%2Bbug/1496277/comments/81) |
| --- | --- | --- | --- |

@VMT/@Tristan Think we need a new CVE for the incomplete fix.

@VMT/@Tristan Think we need a new CVE for the incomplete fix.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2016-02-25: |  |  | [#82](/heat/%2Bbug/1496277/comments/82) |
| --- | --- | --- | --- |

@Zane is it just the Juno and Icehouse backports that are incomplete?

If so, then ignore my above comment. They're outside of VMT support scope now AFAIK.

@Zane is it just the Juno and Icehouse backports that are incomplete?
If so, then ignore my above comment. They're outside of VMT support scope now AFAIK.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-02-26: |  |  | [#83](/heat/%2Bbug/1496277/comments/83) |
| --- | --- | --- | --- |

Correct, it was just Juno and Icehouse that had incomplete fixes, and it was also my understanding that the VMT does not make any attempt to support those. The Kilo and Liberty fixes are complete as originally merged.

Correct, it was just Juno and Icehouse that had incomplete fixes, and it was also my understanding that the VMT does not make any attempt to support those. The Kilo and Liberty fixes are complete as originally merged.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2016-03-03:  [**Fix included in openstack/heat 6.0.0.0b3**](/heat/%2Bbug/1496277/comments/84) |  |  | [#84](/heat/%2Bbug/1496277/comments/84) |
| --- | --- | --- | --- |

This issue was fixed in the openstack/heat 6.0.0.0b3 development milestone.

This issue was fixed in the openstack/heat 6.0.0.0b3 development milestone.

[See full activity log](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/heat/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/heat/%2Bbug/1496277/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [Restrict template file access to /etc/heat/templates/](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4466489/%2Bfiles/0001-Restrict-template-file-access-to-etc-heat-templates.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4466489 "Change patch details")
* [Restrict template file access to /etc/heat/templates/](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4466501/%2Bfiles/0001-Restrict-template-file-access-to-etc-heat-templates.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4466501 "Change patch details")
* [load-files-from-correct-source.patch](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4525484/%2Bfiles/load-files-from-correct-source.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4525484 "Change patch details")
* [Updated patch for git am](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4532176/%2Bfiles/load-files-from-correct-source-2.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4532176 "Change patch details")
* [Final patch for master](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4548273/%2Bfiles/bug1496277-master.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4548273 "Change patch details")
* [Final patch for Liberty](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4548274/%2Bfiles/bug1496277-liberty.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4548274 "Change patch details")
* [Final patch for Kilo](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4548275/%2Bfiles/bug1496277-kilo.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4548275 "Change patch details")
* [Juno patch (updated)](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4580996/%2Bfiles/bug1496277-juno.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4580996 "Change patch details")
* [Icehouse patch (updated)](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4580997/%2Bfiles/bug1496277-icehouse.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4580997 "Change patch details")

* [Add patch](/heat/%2Bbug/1496277/%2Baddcomment?field.patch=on)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugzilla.redhat.com_0bae9c3f_20250126_013048.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1292152)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1292152)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1292152)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1292152

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1292152**](show_bug.cgi?id=1292152)
- Heat template fails in validation started with OSP7

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
Heat template fails in validation started with OSP7

| | [Keywords](describekeywords.cgi): | GSSTriaged  ZStream | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat OpenStack | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat OpenStack "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | openstack-heat | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 7.0 (Kilo) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | z4 | | [Target Release](page.cgi?id=fields.html#target_release): | 7.0 (Kilo) | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Thomas Hervé | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Amit Ugol | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1330384](show_bug.cgi?id=1330384) | | TreeView+ | [depends on](buglist.cgi?bug_id=1292152&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1292152&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2015-12-16 15:18 UTC by Martin Schuppert | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-02-22 23:02 UTC ([History](show_activity.cgi?id=1292152)) | | [CC List:](page.cgi?id=fields.html#cclist) | 10 users (show)  adahms dmaley jcoufal mburns rhel-osp-director-maint sbaker shardy therve yeylon zbitter | | Fixed In Version: | openstack-heat-2015.1.2-6.el7ost | | | Doc Type: | Bug Fix | | | Doc Text: | This update resolves an issue that would cause deployment of Heat templates to fail during resource validation due to being unable to correctly identify network IDs. | | | Clone Of: |  | | | Clones: | [1330384](show_bug.cgi?id=1330384)  ([view as bug list](buglist.cgi?bug_id=1330384)) | | | Environment: |  | | | Last Closed: | 2016-02-18 16:42:28 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | | [**heat template to reproduce**](attachment.cgi?id=1106477 "View the content of the attachment") (888 bytes, application/zip)  [2015-12-16 15:18 UTC](#attach_1106477 "Go to the comment associated with the attachment"), Martin Schuppert | *no flags* | [Details](attachment.cgi?id=1106477&action=edit) | | [View All](attachment.cgi?bugid=1292152&action=viewall) | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Launchpad | [1518676](https://bugs.launchpad.net/bugs/1518676) | 0 | None | None | None | 2015-12-16 15:18:37 UTC | | OpenStack gerrit | [259023](https://review.opendev.org/259023) | 0 | None | None | None | 2015-12-17 22:19:10 UTC | | Red Hat Issue Tracker | [OSP-16744](https://issues.redhat.com/browse/OSP-16744) | 0 | None | None | None | 2022-07-09 08:17:04 UTC | | Red Hat Knowledge Base (Solution) | [2091991](https://access.redhat.com/solutions/2091991) | 0 | None | None | None | 2015-12-16 15:30:36 UTC | | Red Hat Product Errata | [RHSA-2016:0266](https://access.redhat.com/errata/RHSA-2016%3A0266) | 0 | normal | SHIPPED\_LIVE | Moderate: openstack-heat bug fix and security advisory | 2016-02-18 21:41:02 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1292152#c0)  Martin Schuppert    2015-12-16 15:18:38 UTC  ``` Created [attachment 1106477](attachment.cgi?id=1106477 "heat template to reproduce") [[details]](attachment.cgi?id=1106477&action=edit "heat template to reproduce") heat template to reproduce  Description of problem: Checked the heat.engine log, during the resource validation, heat complained network or network_id shall be included in properties.  However, the same script and template has worked fine in JUNO.  The error appears is the following: ERROR: Failed to validate: Failed to validate: Failed to validate: At least one of the following properties must be specified: network, network_id  Version-Release number of selected component (if applicable): openstack-heat-common-2015.1.0-4.el7ost.noarch  How reproducible: 100%  Steps to Reproduce: With attached template 1. heat stack-create -f ./main.hot.yaml  test  Actual results:  Validation fails with "Failed to validate: At least one of the following properties must be specified: network, network_id" which was working in OSP6 :  2015-12-16 09:21:31.491 6979 INFO heat.engine.service [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Creating stack test 2015-12-16 09:21:31.633 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] <heat.engine.hot.template.HOTemplate20130523 object at 0x5013c50> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:32 2015-12-16 09:21:31.633 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] <heat.engine.hot.parameters.HOTParameters object at 0x526da50> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:33 2015-12-16 09:21:31.633 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Validating Parameter Groups. validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:44 2015-12-16 09:21:31.634 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] ['OS::project_id', 'OS::stack_id'] validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:45 2015-12-16 09:21:31.635 6979 INFO heat.engine.environment [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Registering file:///root/test/my_net.hot.yaml -> file:///root/test/my_net.hot.yaml 2015-12-16 09:21:31.635 6979 INFO heat.common.urlfetch [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Fetching data from file:///root/test/my_net.hot.yaml 2015-12-16 09:21:31.637 6979 INFO heat.engine.environment [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Registering file:///root/test/custom_resource.hot.yaml -> file:///root/test/custom_resource.hot.yaml 2015-12-16 09:21:31.638 6979 INFO heat.common.urlfetch [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Fetching data from file:///root/test/custom_resource.hot.yaml 2015-12-16 09:21:31.640 6979 INFO heat.engine.resource [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Validating TemplateResource "my_net" 2015-12-16 09:21:31.640 6979 INFO heat.engine.environment [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Registering file:///root/test/custom_resource.hot.yaml -> file:///root/test/custom_resource.hot.yaml 2015-12-16 09:21:31.642 6979 INFO heat.engine.environment [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Registering file:///root/test/my_net.hot.yaml -> file:///root/test/my_net.hot.yaml 2015-12-16 09:21:31.644 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] <heat.engine.hot.template.HOTemplate20130523 object at 0x4a92150> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:32 2015-12-16 09:21:31.644 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] <heat.engine.hot.parameters.HOTParameters object at 0x526de10> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:33 2015-12-16 09:21:31.644 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Validating Parameter Groups. validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:44 2015-12-16 09:21:31.644 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] ['OS::project_id', 'OS::stack_id'] validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:45 2015-12-16 09:21:31.646 6979 INFO heat.engine.resource [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Validating Net "neutron_net" 2015-12-16 09:21:31.647 6979 INFO heat.engine.resource [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Validating TemplateResource "my_resource" 2015-12-16 09:21:31.647 6979 INFO heat.engine.environment [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Registering file:///root/test/custom_resource.hot.yaml -> file:///root/test/custom_resource.hot.yaml 2015-12-16 09:21:31.648 6979 INFO heat.engine.environment [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Registering file:///root/test/my_net.hot.yaml -> file:///root/test/my_net.hot.yaml 2015-12-16 09:21:31.650 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] <heat.engine.hot.template.HOTemplate20130523 object at 0x4a92250> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:32 2015-12-16 09:21:31.650 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] <heat.engine.hot.parameters.HOTParameters object at 0x526d790> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:33 2015-12-16 09:21:31.650 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Validating Parameter Groups. validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:44 2015-12-16 09:21:31.651 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] [u'my_net_param', 'OS::project_id', 'OS::stack_id'] validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:45 2015-12-16 09:21:31.652 6979 INFO heat.engine.resource [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Validating ResourceGroup "rg" 2015-12-16 09:21:31.654 6979 INFO heat.engine.environment [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Registering file:///root/test/my_net.hot.yaml -> file:///root/test/my_net.hot.yaml 2015-12-16 09:21:31.656 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] <heat.engine.hot.template.HOTemplate20130523 object at 0x531eb50> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:32 2015-12-16 09:21:31.656 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] <heat.engine.hot.parameters.HOTParameters object at 0x5156750> __init__ /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:33 2015-12-16 09:21:31.656 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Validating Parameter Groups. validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:44 2015-12-16 09:21:31.656 6979 DEBUG heat.engine.parameter_groups [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] ['OS::project_id', 'OS::stack_id'] validate /usr/lib/python2.7/site-packages/heat/engine/parameter_groups.py:45 2015-12-16 09:21:31.658 6979 INFO heat.engine.resource [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Validating Port "0" 2015-12-16 09:21:31.658 6979 INFO heat.engine.stack [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] At least one of the following properties must be specified: network, network_id 2015-12-16 09:21:31.659 6979 INFO heat.engine.stack [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Failed to validate: At least one of the following properties must be specified: network, network_id 2015-12-16 09:21:31.659 6979 INFO heat.engine.stack [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Failed to validate: Failed to validate: At least one of the following properties must be specified: network, network_id 2015-12-16 09:21:31.660 6979 DEBUG oslo_messaging.rpc.dispatcher [req-94fc849d-2d6f-4350-a3b5-4561e4bf3ea5 admin admin] Expected exception during message handling (Failed to validate: Failed to validate: At least one of the following properties must be specified: network, network_id) _dispatch_and_reply /usr/lib/python2.7/site-packages/oslo_messaging/rpc/dispatcher.py:145 ...  Expected results:  Validation works as before.  Additional info:  Issue has been reported upstream at [1] , which is a duplicate of [2]. Verified that validation of attached heat template work with a backport of upstream commit at [3]   [1] [https://bugs.launchpad.net/heat/+bug/1522269](https://bugs.launchpad.net/heat/%2Bbug/1522269) [2] [https://bugs.launchpad.net/heat/+bug/1518676](https://bugs.launchpad.net/heat/%2Bbug/1518676) [3] <https://review.openstack.org/#/c/248719/>   ```  [Comment 3](show_bug.cgi?id=1292152#c3)  Steven Hardy    2015-12-17 13:30:00 UTC  ``` Assigning to therve as he's the author of <https://review.openstack.org/#/c/248719/> and has kindly offered to look into a suitable backport for OSP7/kilo.  <https://review.openstack.org/#/c/258307/> is the backport of that fix to liberty, but it looks like that is not cleanly backportable to OSP7/kilo so we may need a different fix and/or additional backports.   ```  [Comment 4](show_bug.cgi?id=1292152#c4)  Thomas Hervé    2015-12-17 14:01:24 UTC  ``` Reproduced on a kilo environment. We can't backport the original fix as it relies on other features, but I made a new patch which ought to fix the issue: <https://review.openstack.org/#/c/259023/>   ```  [Comment 13](show_bug.cgi?id=1292152#c13)  errata-xmlrpc    2016-02-18 16:42:28 UTC  ``` Since the problem described in this bug report should be resolved in a recent advisory, it has been closed with a resolution of ERRATA.  For information on the advisory, and where to find the updated files, follow the link below.  If the solution does not work for you, open a new bug report.  <https://rhn.redhat.com/errata/RHSA-2016-0266.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1292152&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.redhat.com_12eb7841_20250126_013047.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from security.openstack.org_475a1140_20250124_141516.html ===


Toggle navigation

 Search

* [Software](https://www.openstack.org/software/)
  + [Overview](https://www.openstack.org/software/)
  + [OpenStack Components](https://www.openstack.org/software/project-navigator/openstack-components)
  + [SDKs](https://www.openstack.org/software/project-navigator/sdks)
  + [Deployment Tools](https://www.openstack.org/software/project-navigator/deployment-tools)
  + [OpenStack Map](https://www.openstack.org/assets/software/projectmap/openstack-map.pdf)
  + [Sample Configs](https://www.openstack.org/software/sample-configs/)
* [Use Cases](https://www.openstack.org/use-cases/)
  + [Users in Production](https://www.openstack.org/use-cases/)
  + [Ironic Bare Metal](https://www.openstack.org/use-cases/bare-metal/)
  + [Edge Computing](https://www.openstack.org/use-cases/edge-computing/)
  + [Telecom & NFV](https://www.openstack.org/use-cases/telecoms-and-nfv/)
  + [Science and HPC](https://www.openstack.org/use-cases/science/)
  + [Containers](https://www.openstack.org/use-cases/containers/)
  + [Enterprise](https://www.openstack.org/use-cases/enterprise/)
  + [User Survey](https://www.openstack.org/surveys/landing)
* [Events](https://openinfra.dev/summit)
  + [OpenInfra Summit](https://openinfra.dev/summit)
  + [Project Teams Gathering](https://www.openstack.org/ptg/)
  + [OpenDev](https://www.openstack.org/events/opendev-2020/)
  + [Community Events](https://www.openstack.org/events/community-events/)
  + [OpenStack & OpenInfra Days](https://www.openstack.org/events/openstackdays)
  + [Summit Videos](https://www.openstack.org/videos/)
* [Community](https://www.openstack.org/community/)
  + [Welcome! Start Here](https://www.openstack.org/community/)
  + [OpenStack Technical Committee](https://www.openstack.org/community/tech-committee)
  + [Speakers Bureau](https://www.openstack.org/community/speakers/)
  + [OpenStack Wiki](http://wiki.openstack.org)
  + [Get Certified (COA)](https://www.openstack.org/coa/)
  + [Jobs](https://www.openstack.org/community/jobs/)
  + [Marketing Resources](https://www.openstack.org/marketing/)
  + [Community News](https://www.openstack.org/news/)
  + [Superuser Magazine](http://superuser.openstack.org)
  + [OpenInfra Foundation Supporting Organizations](https://www.openstack.org/community/supporting-organizations/)
  + [OpenInfra Foundation](https://openinfra.dev)
* [Marketplace](https://www.openstack.org/marketplace/)
  + [Training](https://www.openstack.org/marketplace/training/)
  + [Distros & Appliances](https://www.openstack.org/marketplace/distros/)
  + [Public Clouds](https://www.openstack.org/marketplace/public-clouds/)
  + [Hosted Private Clouds](https://www.openstack.org/marketplace/hosted-private-clouds/)
  + [Remotely Managed Private Clouds](https://www.openstack.org/marketplace/remotely-managed-private-clouds/)
  + [Consulting & Integrators](https://www.openstack.org/marketplace/consulting/)
  + [Drivers](https://www.openstack.org/marketplace/drivers/)
* [Blog](https://www.openstack.org/blog/)
* [Docs](http://docs.openstack.org/)
* [Join](https://openinfra.dev/join/)
  + [Sign up for Foundation Membership](https://openinfra.dev/join/)
  + [Sponsor the Foundation](https://openinfra.dev/join/)
  + [More about the Foundation](https://openinfra.dev)
* [Log In](https://www.openstack.org/Security/login/?BackURL=/home/)

# OSSA-2016-003: Heat denial of service through template-validate

# OSSA-2016-003: Heat denial of service through template-validate[Â¶](#ossa-2016-003-heat-denial-of-service-through-template-validate "Link to this heading")

Date:

January 19, 2016

CVE:

CVE-2015-5295

## Affects[Â¶](#affects "Link to this heading")

* Heat: <=2015.1.2, ==5.0.0

## Description[Â¶](#description "Link to this heading")

Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heat engine service to load arbitrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by heat-engine. All Heat setups are affected.

## Patches[Â¶](#patches "Link to this heading")

* <https://review.openstack.org/269692> (Kilo)
* <https://review.openstack.org/269691> (Liberty)
* <https://review.openstack.org/269689> (Mitaka)

## Credits[Â¶](#credits "Link to this heading")

* Steven Hardy from Red Hat (CVE-2015-5295)

## References[Â¶](#references "Link to this heading")

* <https://bugs.launchpad.net/bugs/1496277>
* <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-5295>

## Notes[Â¶](#notes "Link to this heading")

* This fix will be included in future 2015.1.3 (kilo) and 5.0.1
  (liberty) releases.

this page last updated: 2025-01-07 18:17:35

[![Creative Commons Attribution 3.0 License](../_static/images/docs/license.png)](https://creativecommons.org/licenses/by/3.0/)

Except where otherwise noted, this document is licensed under
[Creative Commons
Attribution 3.0 License](https://creativecommons.org/licenses/by/3.0/). See all [OpenStack Legal Documents](https://www.openstack.org/legal).

found an error? report a bug

OpenStack Documentation

* Guides
* [Install Guides](https://docs.openstack.org/index.html#install-guides)
* [User Guides](https://docs.openstack.org/index.html#user-guides)
* [Configuration Guides](https://docs.openstack.org/index.html#configuration-guides)
* [Operations and Administration Guides](https://docs.openstack.org/index.html#ops-and-admin-guides)
* [API Guides](https://docs.openstack.org/index.html#api-guides)
* [Contributor Guides](https://docs.openstack.org/index.html#contributor-guides)
* Languages
* [Deutsch (German)](https://docs.openstack.org/de/)
* [FranÃ§ais (French)](https://docs.openstack.org/fr/)
* [Bahasa Indonesia (Indonesian)](https://docs.openstack.org/id/)
* [Italiano (Italian)](https://docs.openstack.org/it/)
* [æ¥æ¬èª (Japanese)](https://docs.openstack.org/ja/)
* [íêµ­ì´ (Korean)](https://docs.openstack.org/ko_KR/)
* [PortuguÃªs (Portuguese)](https://docs.openstack.org/pt_BR/)
* [TÃ¼rkÃ§e (TÃ¼rkiye)](https://docs.openstack.org/tr_TR/)
* [ç®ä½ä¸­æ (Simplified Chinese)](https://docs.openstack.org/zh_CN/)

#### Contents

* OSSA-2016-003: Heat denial of service through template-validate
  + [Affects](#affects)
  + [Description](#description)
  + [Patches](#patches)
  + [Credits](#credits)
  + [References](#references)
  + [Notes](#notes)

### OpenStack

* [Projects](https://www.openstack.org/software/project-navigator/)
* [OpenStack Security](https://security.openstack.org/)
* [Blog](https://openstack.org/blog/)
* [News](https://openstack.org/news/)

### Community

* [User Groups](https://www.meetup.com/pro/openinfradev/)
* [Events](https://openstack.org/community/events/)
* [Jobs](https://openstack.org/community/jobs/)
* [Companies](https://openinfra.dev/members/)
* [Contribute](https://docs.openstack.org/contributors)

### Documentation

* [OpenStack Manuals](https://docs.openstack.org)
* [Getting Started](https://openstack.org/software/start/)
* [API Documentation](https://developer.openstack.org)
* [Wiki](https://wiki.openstack.org)

### Branding & Legal

* [Legal Docs](https://openinfra.dev/legal)
* [Logos & Guidelines](https://openstack.org/brand/)
* [Trademark Policy](https://openinfra.dev/legal/trademark-policy)
* [Privacy Policy](https://openinfra.dev/privacy-policy)
* [OpenInfra CLA](https://docs.openstack.org/contributors/common/setup-gerrit.html#individual-contributor-license-agreement)

### Stay In Touch

The OpenStack project is provided under the
[Apache 2.0 license](https://www.apache.org/licenses/LICENSE-2.0). Docs.openstack.org is powered by
[Rackspace Cloud Computing](https://rackspace.com).



=== Content from answers.launchpad.net_c24294de_20250126_013040.html ===

[Log in / Register](https://answers.launchpad.net/heat/%2Blogin)

[![](https://launchpadlibrarian.net/313195013/Heat_mascot_64.png)](https://launchpad.net/heat)

## [OpenStack Heat](https://launchpad.net/heat)

* [Overview](https://launchpad.net/heat)
* [Code](https://code.launchpad.net/heat)
* [Bugs](https://bugs.launchpad.net/heat)
* [Blueprints](https://blueprints.launchpad.net/heat)
* [Translations](https://translations.launchpad.net/heat)
* Answers

# Questions for OpenStack Heat

**Launchpad does not know where
OpenStack Heat
tracks support requests.**

OpenStack Heat questions are
tracked in:
[heat in Ubuntu](/ubuntu/%2Bsource/heat).

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugzilla.redhat.com_14d7793c_20250126_013045.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1298295)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1298295)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1298295)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1298295

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1298295**](show_bug.cgi?id=1298295)
(CVE-2015-5295)
- [CVE-2015-5295](https://access.redhat.com/security/cve/CVE-2015-5295) openstack-heat: Vulnerability in Heat template validation leading to DoS

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2015-5295 openstack-heat: Vulnerability in Heat template validation leadi...

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2015-5295 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | medium | | [Severity:](page.cgi?id=fields.html#bug_severity) | medium | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1298808](show_bug.cgi?id=1298808) [1298809](show_bug.cgi?id=1298809) [1298810](show_bug.cgi?id=1298810) [1298811](show_bug.cgi?id=1298811) [1298812](show_bug.cgi?id=1298812) [1300090](show_bug.cgi?id=1300090) [1300091](show_bug.cgi?id=1300091 "CLOSED ERRATA - CVE-2015-5295 openstack-heat: Vulnerability in Heat template validation leading to DoS [fedora-all]") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1298296](show_bug.cgi?id=1298296) | | TreeView+ | [depends on](buglist.cgi?bug_id=1298295&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1298295&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2016-01-13 16:49 UTC by Adam Mariš | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2023-05-13 00:23 UTC ([History](show_activity.cgi?id=1298295)) | | [CC List:](page.cgi?id=fields.html#cclist) | 25 users (show)  abaron aortega apevec augol ayoung chrisw cvsbot-xmlrpc dallan gkotton gmollett jpeeler jschluet lhh lpeer markmc mburns rbryant sbaker sclewis security-response-team shardy slong tdecacqu yeylon zbitter | | Fixed In Version: |  | | | Doc Type: | Bug Fix | | | Doc Text: | A vulnerability was discovered in the OpenStack Orchestration service (heat), where a specially formatted template could be used to trick the heat-engine service into opening a local file. Although the file contents are never disclosed to the end user, an OpenStack-authenticated attacker could use this flaw to cause a denial of service or determine whether a given file name is present on the server. | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2016-03-14 09:58:35 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | | [**Master/mitaka patch**](attachment.cgi?id=1114470 "View the content of the attachment") (3.63 KB, patch)  [2016-01-13 16:57 UTC](#attach_1114470 "Go to the comment associated with the attachment"), Adam Mariš | *no flags* | [Details](attachment.cgi?id=1114470&action=edit) | [Diff](attachment.cgi?id=1114470&action=diff) | | [**Stable/kilo patch**](attachment.cgi?id=1114471 "View the content of the attachment") (11.13 KB, patch)  [2016-01-13 16:57 UTC](#attach_1114471 "Go to the comment associated with the attachment"), Adam Mariš | *no flags* | [Details](attachment.cgi?id=1114471&action=edit) | [Diff](attachment.cgi?id=1114471&action=diff) | | [**Stable/liberty patch**](attachment.cgi?id=1114472 "View the content of the attachment") (12.32 KB, patch)  [2016-01-13 16:58 UTC](#attach_1114472 "Go to the comment associated with the attachment"), Adam Mariš | *no flags* | [Details](attachment.cgi?id=1114472&action=edit) | [Diff](attachment.cgi?id=1114472&action=diff) | | [**stable/juno patch**](attachment.cgi?id=1114967 "View the content of the attachment") (9.95 KB, patch)  [2016-01-14 22:24 UTC](#attach_1114967 "Go to the comment associated with the attachment"), Zane Bitter | *no flags* | [Details](attachment.cgi?id=1114967&action=edit) | [Diff](attachment.cgi?id=1114967&action=diff) | | [**stable/icehouse patch**](attachment.cgi?id=1114968 "View the content of the attachment") (9.75 KB, patch)  [2016-01-14 22:25 UTC](#attach_1114968 "Go to the comment associated with the attachment"), Zane Bitter | *no flags* | [Details](attachment.cgi?id=1114968&action=edit) | [Diff](attachment.cgi?id=1114968&action=diff) | | [View All](attachment.cgi?bugid=1298295&action=viewall) | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | Red Hat Product Errata | [RHSA-2016:0266](https://access.redhat.com/errata/RHSA-2016%3A0266) | 0 | normal | SHIPPED\_LIVE | Moderate: openstack-heat bug fix and security advisory | 2016-02-18 21:41:02 UTC | | Red Hat Product Errata | [RHSA-2016:0440](https://access.redhat.com/errata/RHSA-2016%3A0440) | 0 | normal | SHIPPED\_LIVE | Moderate: openstack-heat bug fix and security advisory | 2016-03-14 13:24:23 UTC | | Red Hat Product Errata | [RHSA-2016:0441](https://access.redhat.com/errata/RHSA-2016%3A0441) | 0 | normal | SHIPPED\_LIVE | Moderate: openstack-heat bug fix and security advisory | 2016-03-14 13:24:11 UTC | | Red Hat Product Errata | [RHSA-2016:0442](https://access.redhat.com/errata/RHSA-2016%3A0442) | 0 | normal | SHIPPED\_LIVE | Moderate: openstack-heat security advisory | 2016-03-14 13:24:01 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1298295#c0)  Adam Mariš    2016-01-13 16:49:00 UTC  ``` A vulnerability in Heat template validation was reported. By referencing a local file like /dev/zero, an authenticated user may trick the heat engine service to load arbitrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by heat-engine.  Affects versions <=2015.1.2, ==5.0.0. All Heat setups are affected.   ```  [Comment 1](show_bug.cgi?id=1298295#c1)  Adam Mariš    2016-01-13 16:57:17 UTC  ``` Created [attachment 1114470](attachment.cgi?id=1114470&action=diff "Master/mitaka patch") [[details]](attachment.cgi?id=1114470&action=edit "Master/mitaka patch") Master/mitaka patch   ```  [Comment 2](show_bug.cgi?id=1298295#c2)  Adam Mariš    2016-01-13 16:57:49 UTC  ``` Created [attachment 1114471](attachment.cgi?id=1114471&action=diff "Stable/kilo patch") [[details]](attachment.cgi?id=1114471&action=edit "Stable/kilo patch") Stable/kilo patch   ```  [Comment 3](show_bug.cgi?id=1298295#c3)  Adam Mariš    2016-01-13 16:58:33 UTC  ``` Created [attachment 1114472](attachment.cgi?id=1114472&action=diff "Stable/liberty patch") [[details]](attachment.cgi?id=1114472&action=edit "Stable/liberty patch") Stable/liberty patch   ```  [Comment 5](show_bug.cgi?id=1298295#c5)  Zane Bitter    2016-01-14 22:24:53 UTC  ``` Created [attachment 1114967](attachment.cgi?id=1114967&action=diff "stable/juno patch") [[details]](attachment.cgi?id=1114967&action=edit "stable/juno patch") stable/juno patch   ```  [Comment 6](show_bug.cgi?id=1298295#c6)  Zane Bitter    2016-01-14 22:25:32 UTC  ``` Created [attachment 1114968](attachment.cgi?id=1114968&action=diff "stable/icehouse patch") [[details]](attachment.cgi?id=1114968&action=edit "stable/icehouse patch") stable/icehouse patch   ```  [Comment 9](show_bug.cgi?id=1298295#c9)  Garth Mollett    2016-01-19 23:15:05 UTC  ```  Created openstack-heat tracking bugs for this issue:  Affects: fedora-all [[bug 1300091](show_bug.cgi?id=1300091 "CLOSED ERRATA - CVE-2015-5295 openstack-heat: Vulnerability in Heat template validation leading to DoS [fedora-all]")]   ```  [Comment 10](show_bug.cgi?id=1298295#c10)  Fedora Update System    2016-02-02 19:20:06 UTC  ``` openstack-heat-2015.1.2-2.fc23 has been pushed to the Fedora 23 stable repository. If problems still persist, please make note of it in this bug report.   ```  [Comment 11](show_bug.cgi?id=1298295#c11)  Garth Mollett    2016-02-11 01:55:03 UTC  ``` Acknowledgements:  This issue was discovered by Steven Hardy of Red Hat.   ```  [Comment 12](show_bug.cgi?id=1298295#c12)  errata-xmlrpc    2016-02-18 16:42:34 UTC  ``` This issue has been addressed in the following products:    OpenStack 7 For RHEL 7  Via RHSA-2016:0266 <https://rhn.redhat.com/errata/RHSA-2016-0266.html>   ```  [Comment 13](show_bug.cgi?id=1298295#c13)  errata-xmlrpc    2016-03-14 09:24:35 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux OpenStack Platform 6.0 (Juno) for RHEL 7  Via RHSA-2016:0442 <https://rhn.redhat.com/errata/RHSA-2016-0442.html>   ```  [Comment 14](show_bug.cgi?id=1298295#c14)  errata-xmlrpc    2016-03-14 09:25:17 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux OpenStack Platform 5.0 (Icehouse) for RHEL 7  Via RHSA-2016:0441 <https://rhn.redhat.com/errata/RHSA-2016-0441.html>   ```  [Comment 15](show_bug.cgi?id=1298295#c15)  errata-xmlrpc    2016-03-14 09:26:30 UTC  ``` This issue has been addressed in the following products:    Red Hat Enterprise Linux OpenStack Platform 5.0 (Icehouse) for RHEL 6  Via RHSA-2016:0440 <https://rhn.redhat.com/errata/RHSA-2016-0440.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1298295&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from launchpad.net_9e50c715_20250126_013043.html ===

[Log in / Register](https://launchpad.net/~tristan-cacqueray/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~tristan-cacqueray)

## [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray)

* Overview
* [Code](https://code.launchpad.net/~tristan-cacqueray)
* [Bugs](https://bugs.launchpad.net/~tristan-cacqueray)
* [Blueprints](https://blueprints.launchpad.net/~tristan-cacqueray)
* [Translations](https://translations.launchpad.net/~tristan-cacqueray)
* [Answers](https://answers.launchpad.net/~tristan-cacqueray)

* [Related packages](https://launchpad.net/~tristan-cacqueray/%2Brelated-packages)
* [Related projects](https://launchpad.net/~tristan-cacqueray/%2Brelated-projects)

## User information

Launchpad Id:
tristan-cacqueray

Email:
[Log in](%2Blogin) for email information.

Member since:
2013-10-25

[![Icon of OpenStack Security SIG](https://launchpadlibrarian.net/203991792/os14.png "Member of OpenStack Security SIG")](/~openstack-ossg)

Signed Ubuntu Code of Conduct:
Yes

Languages:

English

OpenPGP keys:

EB103DE8B5E69E631C6FF17922B9A05C925CC5D8

SSH keys:

[localadmin@controller](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[0](https://launchpad.net/~tristan-cacqueray/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**tristanC**
 on
**irc.freenode.net**

## [All memberships](https://launchpad.net/~tristan-cacqueray/%2Bparticipation) Latest memberships

| [Swiftsync dev](/~swiftsync-devteam)  Joined on 2014-02-13 | |
| --- | --- |
| [OpenStack Security SIG](/~openstack-ossg)  Joined on 2013-12-12 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugzilla.redhat.com_9ea0a0cf_20250126_013049.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1299257)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1299257)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1299257)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1299257

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1299257**](show_bug.cgi?id=1299257)
- heat API: actions->check removes stack output values.

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
heat API: actions->check removes stack output values.

| | [Keywords](describekeywords.cgi): | ZStream | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat OpenStack | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat OpenStack "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | openstack-heat | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 7.0 (Kilo) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | urgent | | [Severity:](page.cgi?id=fields.html#bug_severity) | urgent | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | z4 | | [Target Release](page.cgi?id=fields.html#target_release): | 7.0 (Kilo) | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Thomas Hervé | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Amit Ugol | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1299912](show_bug.cgi?id=1299912 "CLOSED ERRATA - heat API: actions->check removes stack output values.") | | TreeView+ | [depends on](buglist.cgi?bug_id=1299257&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1299257&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2016-01-17 22:37 UTC by Matt Flusche | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2022-07-09 08:13 UTC ([History](show_activity.cgi?id=1299257)) | | [CC List:](page.cgi?id=fields.html#cclist) | 10 users (show)  jcoufal mburns ochalups rhel-osp-director-maint sbaker shardy ssainkar therve yeylon zbitter | | Fixed In Version: | openstack-heat-2015.1.2-8.el7ost | | | Doc Type: | Bug Fix | | | Doc Text: | Previously, using the heat API actions > check call removed the output values from existing heat stack. This behaviour was observed with the CLI (heat action-check <heat-stack>) and dashboard (heat "Check Stack" button). This broke stack updates and other operations depending on stack output values after this operation was executed. This patch gets attribute instead of return None if resource is in SNAPSHOT or CHECK action which resolves the issue. | | | Clone Of: |  | | | Clones: | [1299912](show_bug.cgi?id=1299912 "CLOSED ERRATA - heat API: actions->check removes stack output values.")  ([view as bug list](buglist.cgi?bug_id=1299912)) | | | Environment: |  | | | Last Closed: | 2016-02-18 16:43:01 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | OpenStack gerrit | [268957](https://review.opendev.org/268957) | 0 | None | MERGED | Do not return None when get\_attr if res is in SNAPSHOT/CHECK | 2020-04-01 17:04:12 UTC | | Red Hat Issue Tracker | [OSP-16731](https://issues.redhat.com/browse/OSP-16731) | 0 | None | None | None | 2022-07-09 08:13:28 UTC | | Red Hat Product Errata | [RHSA-2016:0266](https://access.redhat.com/errata/RHSA-2016%3A0266) | 0 | normal | SHIPPED\_LIVE | Moderate: openstack-heat bug fix and security advisory | 2016-02-18 21:41:02 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1299257#c0)  Matt Flusche    2016-01-17 22:37:22 UTC  ``` Description of problem: Using the heat API actions->check call will remove output values from existing heat stack.  Behavior observed with the CLI and Dashboard.  heat "Check Stack" button (Horizon) & "heat action-check <heat-stack>"  This will break stack updates and other operations depending on stack output values after this operation is executed.  Version-Release number of selected component (if applicable): openstack-heat-engine-2015.1.2-4.el7ost.noarch openstack-heat-common-2015.1.2-4.el7ost.noarch openstack-heat-api-2015.1.2-4.el7ost.noarch   How reproducible: 100%  Steps to Reproduce: 1.  create a simple test heat stack that contains outputs  heat stack-create test -f test.yaml -e env.yaml test.yaml[1] env.yaml[2]  2. Verify stack create was successful and the output values.  $ heat stack-list +--------------------------------------+------------+-----------------+----------------------+ | id                                   | stack_name | stack_status    | creation_time        | +--------------------------------------+------------+-----------------+----------------------+ | 03bb28f6-5127-42b2-936d-a354416f7d99 | test       | CREATE_COMPLETE | 2016-01-17T22:25:13Z | +--------------------------------------+------------+-----------------+----------------------+  $ heat output-list test +------------+----------------------+ | output_key | description          | +------------+----------------------+ | image_A    | No description given | | ip_A       | IP address A server  | +------------+----------------------+  $ heat output-show test ip_A "172.16.40.9"  3. Run action-check on test stack and it completes successfully  $ heat action-check test +--------------------------------------+------------+-------------------+----------------------+ | id                                   | stack_name | stack_status      | creation_time        | +--------------------------------------+------------+-------------------+----------------------+ | 03bb28f6-5127-42b2-936d-a354416f7d99 | test       | CHECK_IN_PROGRESS | 2016-01-17T22:25:13Z | +--------------------------------------+------------+-------------------+----------------------+  $ heat stack-list +--------------------------------------+------------+----------------+----------------------+ | id                                   | stack_name | stack_status   | creation_time        | +--------------------------------------+------------+----------------+----------------------+ | 03bb28f6-5127-42b2-936d-a354416f7d99 | test       | CHECK_COMPLETE | 2016-01-17T22:25:13Z | +--------------------------------------+------------+----------------+----------------------+  4. Run heat output-show is now null  $ heat output-show test ip_A null   Actual results: heat stack output values become null    Expected results: The same output values should be returned after the action-check  Additional info:   [1] test.yaml heat_template_version: 2013-05-23  description:  parameters:   public_net_id:     type: string     description: ID of public network     constraints:       - custom_constraint: neutron.network         description: Must be a valid network ID   flavor:     type: string     description: Flavor to use     constraints:       - custom_constraint: nova.flavor         description: Must be a valid flavor name   image:     type: string     description: Name of image to use     constraints:       - custom_constraint: glance.image         description: Must be a valid image name  resources:   server:     type: OS::Nova::Server     properties:       networks:       - port:           get_resource: server_port       name: server_A       image: { get_param: image }       flavor: { get_param: flavor }                      server_port:       type: OS::Neutron::Port     properties:       network_id: { get_param: public_net_id }  outputs:   ip_A:     description: IP address A server     value: { get_attr: [ server, first_address ] }   image_A:     value: { get_param: image }   [2] env.yaml parameters:   flavor: m1.demo   image: cirros   public_net_id: b54b1eb9-8076-4b3a-92d3-1d5725b03fad   ```  [Comment 2](show_bug.cgi?id=1299257#c2)  Thomas Hervé    2016-01-18 09:50:50 UTC  ``` I think I identified the bug as [https://bugs.launchpad.net/heat/+bug/1505054](https://bugs.launchpad.net/heat/%2Bbug/1505054)  I started the backporting process here: <https://review.openstack.org/#/c/268957/>   ```  [Comment 9](show_bug.cgi?id=1299257#c9)  Amit Ugol    2016-02-16 12:12:50 UTC  ``` using the steps from the original message, this seems to be working well now.   ```  [Comment 11](show_bug.cgi?id=1299257#c11)  errata-xmlrpc    2016-02-18 16:43:01 UTC  ``` Since the problem described in this bug report should be resolved in a recent advisory, it has been closed with a resolution of ERRATA.  For information on the advisory, and where to find the updated files, follow the link below.  If the solution does not work for you, open a new bug report.  <https://rhn.redhat.com/errata/RHSA-2016-0266.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1299257&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from launchpad.net_5983273c_20250126_013043.html ===

[Log in / Register](https://launchpad.net/~shardy/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~shardy)

## [Steven Hardy](https://launchpad.net/~shardy)

* Overview
* [Code](https://code.launchpad.net/~shardy)
* [Bugs](https://bugs.launchpad.net/~shardy)
* [Blueprints](https://blueprints.launchpad.net/~shardy)
* [Translations](https://translations.launchpad.net/~shardy)
* [Answers](https://answers.launchpad.net/~shardy)

* [Related packages](https://launchpad.net/~shardy/%2Brelated-packages)
* [Related projects](https://launchpad.net/~shardy/%2Brelated-projects)

## User information

Launchpad Id:
shardy

Email:
[Log in](%2Blogin) for email information.

Member since:
2012-05-16

[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)
[![Icon of Swift](https://launchpadlibrarian.net/52560230/os14.png "Member of Swift")](/~swift)

Languages:

English

OpenPGP keys:

F9913FFFC92E22ACF17091FF0CE8E5974D818960

SSH keys:

[root@localhost.localdomain](%2Bsshkeys)

[root@localhost.localdomain](%2Bsshkeys)

[root@localhost.localdomain](%2Bsshkeys)

[shardy@heatlt.localdomain](%2Bsshkeys)

[stack@t430slt](%2Bsshkeys)

[root@heatlt.localdomain](%2Bsshkeys)

Time zone:

Europe/London
(UTC+0000)

Karma:
[0](https://launchpad.net/~shardy/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

Social accounts:
![IRC](/@@/social-irc "IRC")
**shardy**
 on
**irc.freenode.net**

## [All bugs in progress](https://launchpad.net/~shardy/%2Bassignedbugs?search=Search&field.status=In+Progress) Assigned bugs

||  | #1801092 [OpenShift role specific variables cause warning due to missing tag](https://bugs.launchpad.net/tripleo/%2Bbug/1801092) |  |
| --- | --- | --- |
| in [tripleo](/tripleo) | | |

| --- | --- | --- | --- | --- | --- |
||  | #1751017 [Ocata doesn't support NodeTLSData for custom roles](https://bugs.launchpad.net/tripleo/ocata/%2Bbug/1751017) |  |
| --- | --- | --- |
| in [tripleo](/tripleo) | | |

||  | #1463092 [hieradata change doesn't reapply manifest](https://bugs.launchpad.net/heat-templates/%2Bbug/1463092) |  |
| --- | --- | --- |
| in [Heat Templates](/heat-templates), [tripleo](/tripleo) | | |

||  | #1453095 [failing pypy jobs with "option --single-version-externally-managed not recognized"](https://bugs.launchpad.net/python-heatclient/%2Bbug/1453095) |  |
| --- | --- | --- |
| in [python-heatclient](/python-heatclient) | | |

## [All assigned blueprints](/~shardy/%2Bspecs?role=assignee) Assigned blueprints

| **[Create an ironic resource plugin](https://blueprints.launchpad.net/heat/%2Bspec/ironic-resource "ironic-resource")** for **OpenStack Heat**  Create a (contrib) resource which exposes the ironic API, as an alternative for people who would prefer to consume the API directly instead of via nova. | |
| --- | --- |

## [All memberships](https://launchpad.net/~shardy/%2Bparticipation) Latest memberships

| [TripleO Drivers](/~tripleo-drivers)  Joined on 2016-04-20 | |
| --- | --- |
| [tripleo](/~tripleo)  Joined on 2015-09-02 | |
| [Heat Drivers](/~heat-drivers)  Joined on 2012-11-20 | |
| [Heat Core security contacts](/~heat-coresec)  Joined on 2012-11-20 | |
| [Keystone Devs](/~keystone)  Joined on 2012-10-23 | |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugs.launchpad.net_8c235637_20250124_141515.html ===

[Log in / Register](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Blogin)

[![](https://launchpadlibrarian.net/313195013/Heat_mascot_64.png)](https://launchpad.net/heat)

## [OpenStack Heat](https://launchpad.net/heat)

* [Overview](https://launchpad.net/heat)
* [Code](https://code.launchpad.net/heat)
* [Bugs](https://bugs.launchpad.net/heat)
* [Blueprints](https://blueprints.launchpad.net/heat)
* [Translations](https://translations.launchpad.net/heat)
* [Answers](https://answers.launchpad.net/heat)

# [OSSA 2016-003] template-validate may read server local files (CVE-2015-5295)

Bug #1496277 reported by
[Steven Hardy](https://launchpad.net/~shardy)
on 2015-09-16

[268](/%2Bhelp-bugs/bug-heat.html)

This bug affects 1 person

| Affects | | Status | Importance | Assigned to | Milestone |
| --- | --- | --- | --- | --- | --- |
|  | [OpenStack Heat](https://bugs.launchpad.net/heat) | Fix Released | High | [Zane Bitter](https://launchpad.net/~zaneb) |  |
|  | [Kilo](https://bugs.launchpad.net/heat/kilo) | Fix Released | Undecided | Unassigned | [OpenStack Heat 2015.1.3](https://launchpad.net/heat/%2Bmilestone/2015.1.3) |
|  | [OpenStack Security Advisory](https://bugs.launchpad.net/ossa) | Fix Released | Critical | [Tristan Cacqueray](https://launchpad.net/~tristan-cacqueray) |  |

### Bug Description

in service.py validate\_template, we do an env.get\_class bypassing

 the global\_environment(), which ends up calling

 template\_resource.generate\_class, which wrongly defaults the get\_template\_file

 allowed schemas to "('file',)"

<https://github.com/openstack/heat/blob/master/heat/engine/service.py#L958>

 <https://github.com/openstack/heat/blob/master/heat/engine/resources/template_resource.py#L31>

The net result of this is that any call to template-validate which

 specifies type: foo.yaml will read that file from the filesystem of the

 heat service - this actually means template-validate calls which should

 fail work on typical devstack env's where the client and heat-engine are

 co-located (it took me a while to work out why!!)

I've not figured out any way for this to be exploitable, but it definitely

 seems wrong that we allow user-provided paths to be read like this,

 and there could be some risk if folks could work out a way to make

 validation blow up with a stack-trace containing any file contents.

See [original description](comments/0)

Tags:

[in-stable-kilo](/heat/%2Bbugs?field.tag=in-stable-kilo)
[in-stable-liberty](/heat/%2Bbugs?field.tag=in-stable-liberty)

## CVE References

* [2015-5295](/bugs/cve/2015-5295 "The template-validate command in Open...")

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-09-16: |  |  | [#1](/heat/%2Bbug/1496277/comments/1) |
| --- | --- | --- | --- |

Note I raised this private security initially so we can discuss how this should be handled - AFAICT there's no way for this to be actively exploited, but the sort of risk I'm worried about is e.g if someone tried to pass a path to a hiera yaml file on the heat server box, where the hieradata could contain sensitive information. I don't think there's any way for validation to fail such as to expose that data, but it'd be good to get some more eyes on the code to prove that is the case (if so this can probably be public security IMO).

Note I raised this private security initially so we can discuss how this should be handled - AFAICT there's no way for this to be actively exploited, but the sort of risk I'm worried about is e.g if someone tried to pass a path to a hiera yaml file on the heat server box, where the hieradata could contain sensitive information. I don't think there's any way for validation to fail such as to expose that data, but it'd be good to get some more eyes on the code to prove that is the case (if so this can probably be public security IMO).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2015-09-16: |  |  | [#2](/heat/%2Bbug/1496277/comments/2) |
| --- | --- | --- | --- |

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.

Since this report concerns a possible security risk, an incomplete security advisory task has been added while the core security reviewers for the affected project or projects confirm the bug and discuss the scope of any vulnerability along with potential solutions.

| **description**: | updated |
| --- | --- |
| Changed in ossa: | |
| **status**: | New → Incomplete |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-16: |  |  | [#3](/heat/%2Bbug/1496277/comments/3) |
| --- | --- | --- | --- |

I think there could at very least be a DoS through unbound memory allocation.

You can cause a call like this to happen:

urllib.request.urlopen("file:///dev/zero").read()

Which on many systems will lead to the python process being killed when it runs out of memory.

I think there could at very least be a DoS through unbound memory allocation.
You can cause a call like this to happen:
urllib.request.urlopen("file:///dev/zero").read()
Which on many systems will lead to the python process being killed when it runs out of memory.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-09-16: |  |  | [#4](/heat/%2Bbug/1496277/comments/4) |
| --- | --- | --- | --- |

I believe we established somewhere (private email thread) that the filename had to end with .yaml or .template to trigger this code path.

I believe we established somewhere (private email thread) that the filename had to end with .yaml or .template to trigger this code path.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2015-09-16: |  |  | [#5](/heat/%2Bbug/1496277/comments/5) |
| --- | --- | --- | --- |

Zane sure, but it should probably be constrained to "/etc/heat/templates/"

Zane sure, but it should probably be constrained to "/etc/heat/templates/"

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-17: |  |  | [#6](/heat/%2Bbug/1496277/comments/6) |
| --- | --- | --- | --- |

The hash character can be used to get round that check and open an arbitrary file.

This kills my test machine pretty well:

{"files": {}, "environment": {}, "template": {"heat\_template\_version": "2014-10-16", "description": "a", "resources": {"my\_instance": {"type": "file:///dev/zero#a.yaml", "properties": {"flavor": "m1.small"}}}}}

The hash character can be used to get round that check and open an arbitrary file.
This kills my test machine pretty well:
{"files": {}, "environment": {}, "template": {"heat\_template\_version": "2014-10-16", "description": "a", "resources": {"my\_instance": {"type": "file:///dev/zero#a.yaml", "properties": {"flavor": "m1.small"}}}}}

[Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld)
on 2015-09-17

| Changed in heat: | |
| --- | --- |
| **status**: | New → Confirmed |
| **importance**: | Undecided → High |
| **assignee**: | nobody → Angus Salkeld (asalkeld) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2015-09-17: |  |  | [#7](/heat/%2Bbug/1496277/comments/7) |
| --- | --- | --- | --- |

* [Restrict template file access to /etc/heat/templates/](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4466489/%2Bfiles/0001-Restrict-template-file-access-to-etc-heat-templates.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4466489)
  (5.6 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-17: |  |  | [#8](/heat/%2Bbug/1496277/comments/8) |
| --- | --- | --- | --- |

I didn't reproduce, but from reading I think the "/etc/heat/teamplates" enforcement in proposed patch can be bypassed with path traversal like:

"file:///etc/heat/templates/../../../dev/zero#a.yaml"

I think will still open /dev/zero.

I didn't reproduce, but from reading I think the "/etc/heat/teamplates" enforcement in proposed patch can be bypassed with path traversal like:
"file:///etc/heat/templates/../../../dev/zero#a.yaml"
I think will still open /dev/zero.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2015-09-17: |  |  | [#9](/heat/%2Bbug/1496277/comments/9) |
| --- | --- | --- | --- |

Good point, I'll check and see if I can get a normalized path.

Good point, I'll check and see if I can get a normalized path.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2015-09-17: |  |  | [#10](/heat/%2Bbug/1496277/comments/10) |
| --- | --- | --- | --- |

* [Restrict template file access to /etc/heat/templates/](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4466501/%2Bfiles/0001-Restrict-template-file-access-to-etc-heat-templates.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4466501)
  (3.8 KiB,
  text/plain)

new patch replaces previous one.

new patch replaces previous one.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2015-09-17: |  |  | [#11](/heat/%2Bbug/1496277/comments/11) |
| --- | --- | --- | --- |

Thanks @garth I had to reboot my machine after trying "file:///etc/heat/templates/../../../dev/zero" - doh.

Thanks @garth I had to reboot my machine after trying "file:///etc/heat/templates/../../../dev/zero" - doh.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-17: |  |  | [#12](/heat/%2Bbug/1496277/comments/12) |
| --- | --- | --- | --- |

@angus oops, sorry I should have been more clear that was demonstrating unbound memory allocation still.

@angus oops, sorry I should have been more clear that was demonstrating unbound memory allocation still.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-09-17: |  |  | [#13](/heat/%2Bbug/1496277/comments/13) |
| --- | --- | --- | --- |

@Angus - thanks for picking this up!

TBH I don't think restricting to opening paths in /etc/heat/templates is enough - we should \*never\* read \*any\* server-side files as a result of user provided type: filename or (user) resource\_registry entries - that (AIUI) is the whole point of the allowed schemes in TemplateResource?

The /etc/heat/templates is only for consumption via the \*global\* environment, e.g template authors should \*only\* have access to those templates via their global resource\_registry alias as defined in /etc/heat/environment.d - or at least that's the way I thought this was supposed to work?

@Angus - thanks for picking this up!
TBH I don't think restricting to opening paths in /etc/heat/templates is enough - we should \*never\* read \*any\* server-side files as a result of user provided type: filename or (user) resource\_registry entries - that (AIUI) is the whole point of the allowed schemes in TemplateResource?
The /etc/heat/templates is only for consumption via the \*global\* environment, e.g template authors should \*only\* have access to those templates via their global resource\_registry alias as defined in /etc/heat/environment.d - or at least that's the way I thought this was supposed to work?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2015-09-17: |  |  | [#14](/heat/%2Bbug/1496277/comments/14) |
| --- | --- | --- | --- |

Hi Steven, the validate flow is a bit different to create/update and we are not sure at that point whether is it user or system resource so it allows both. If you disallow "file" you will probably break stuff.

Hi Steven, the validate flow is a bit different to create/update and we are not sure at that point whether is it user or system resource so it allows both. If you disallow "file" you will probably break stuff.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-09-17: |  |  | [#15](/heat/%2Bbug/1496277/comments/15) |
| --- | --- | --- | --- |

Hey Angus, yeah I realize there are limitations with the validation in it's current form, which basically doesn't work at all with nested stacks - wouldn't it be better to just skip them completely rather than trying to load random files which may not bear any relation to what the user expects (e.g, how does a user of a public cloud heat have \*any\* idea what's in /etc/templates of their provider?)

That's one reason why I've been reworking validate to work more like create/preview:

<https://review.openstack.org/#/c/223581/>

Here, we actually pass the files map, so we can safely do nested validation:

<https://review.openstack.org/#/c/224078/>

I think this is a better long-term direction, but it obviously doesn't solve the sort term requirement for a backportable quick fix.

In the tests above - are those being done directly via curl, or using heatclient? Because we probably have fixes to do in the client too, e.g because AFAICT the trick with the comment #.yaml works there too:

<https://github.com/openstack/python-heatclient/blob/master/heatclient/v1/shell.py#L796>

<https://github.com/openstack/python-heatclient/blob/master/heatclient/common/template_utils.py#L82>

$ cat bad\_tmpl.yaml

heat\_template\_version: 2013-05-23

resources:

  test:

    type: /etc/passwd#.yaml

If you do heat --debug template-validate bad\_tmp.yaml you'll see that we read passwd and send it in the files map (even though we know current heat ignores the files at the API level.

I guess this latter case is more a safeguard against users doing something stupid, but we should probably make it more robust if possible.

Hey Angus, yeah I realize there are limitations with the validation in it's current form, which basically doesn't work at all with nested stacks - wouldn't it be better to just skip them completely rather than trying to load random files which may not bear any relation to what the user expects (e.g, how does a user of a public cloud heat have \*any\* idea what's in /etc/templates of their provider?)
That's one reason why I've been reworking validate to work more like create/preview:
https://review.openstack.org/#/c/223581/
Here, we actually pass the files map, so we can safely do nested validation:
https://review.openstack.org/#/c/224078/
I think this is a better long-term direction, but it obviously doesn't solve the sort term requirement for a backportable quick fix.
In the tests above - are those being done directly via curl, or using heatclient? Because we probably have fixes to do in the client too, e.g because AFAICT the trick with the comment #.yaml works there too:
https://github.com/openstack/python-heatclient/blob/master/heatclient/v1/shell.py#L796
https://github.com/openstack/python-heatclient/blob/master/heatclient/common/template\_utils.py#L82
$ cat bad\_tmpl.yaml
heat\_template\_version: 2013-05-23
resources:
test:
type: /etc/passwd#.yaml
If you do heat --debug template-validate bad\_tmp.yaml you'll see that we read passwd and send it in the files map (even though we know current heat ignores the files at the API level.
I guess this latter case is more a safeguard against users doing something stupid, but we should probably make it more robust if possible.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-09-17: |  |  | [#16](/heat/%2Bbug/1496277/comments/16) |
| --- | --- | --- | --- |

The sort of fix I was thinking was (not yet tried):

1. Look in resources.global\_env().get\_class(type\_name) (same as elsewhere in service.py)

2. If we don't find the type, check if it matches foo.yaml/foo.template paths with any url prefix, but \*don't\* read any files

3. If it's not a path/template type then look in the params derived resource\_registry for a type alias

4. If the Type isn't found now, it's a validation failure

Then, when the rework I linked above lands, we'd be able to extend (2) and (3) to consume the files passed in the files map from the client (which as mentioned, the client already passes, but the API ignores).

The sort of fix I was thinking was (not yet tried):
1. Look in resources.global\_env().get\_class(type\_name) (same as elsewhere in service.py)
2. If we don't find the type, check if it matches foo.yaml/foo.template paths with any url prefix, but \*don't\* read any files
3. If it's not a path/template type then look in the params derived resource\_registry for a type alias
4. If the Type isn't found now, it's a validation failure
Then, when the rework I linked above lands, we'd be able to extend (2) and (3) to consume the files passed in the files map from the client (which as mentioned, the client already passes, but the API ignores).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-17: |  |  | [#17](/heat/%2Bbug/1496277/comments/17) |
| --- | --- | --- | --- |

@steven I did my testing by sending the requests directly, for exactly the reason you said, I saw that heatclient suffers from the same issue and template-validate will validate (and blow up) in the client.

@steven I did my testing by sending the requests directly, for exactly the reason you said, I saw that heatclient suffers from the same issue and template-validate will validate (and blow up) in the client.

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2015-09-18

| Changed in ossa: | |
| --- | --- |
| **status**: | Incomplete → Confirmed |
| **importance**: | Undecided → High |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-09-21: |  |  | [#18](/heat/%2Bbug/1496277/comments/18) |
| --- | --- | --- | --- |

Here is the proposed impact description:

Title: Heat denial of service through template-validate

Reporter: Steven Hardy (Red Hat)

Products: Heat, python-heatclient

Affects: versions through 2014.2.3 and 2015.1 versions through 2015.1.1

Description:

Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/null, an authenticated user may trick the heatclient and/or the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user. All Heat setups are affected.

Here is the proposed impact description:
Title: Heat denial of service through template-validate
Reporter: Steven Hardy (Red Hat)
Products: Heat, python-heatclient
Affects: versions through 2014.2.3 and 2015.1 versions through 2015.1.1
Description:
Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/null, an authenticated user may trick the heatclient and/or the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user. All Heat setups are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-09-21: |  |  | [#19](/heat/%2Bbug/1496277/comments/19) |
| --- | --- | --- | --- |

I think you meant /dev/zero, not /dev/null.

I think you meant /dev/zero, not /dev/null.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-09-21: |  |  | [#20](/heat/%2Bbug/1496277/comments/20) |
| --- | --- | --- | --- |

Actually, it appears some of my remarks in comment #15 are wrong - it looks like the normal stack.Stack.validate() path is also affected by this, e.g my rework of template validation doesn't fix it, which means you can probably also trigger this via create/update too.

$ curl -g -i -X POST <http://192.168.0.16:8004/v1/63b7b69cab914cb5beeaaee26b933aac/validate> -H "User-Agent: python-heatclient" -H "Content-Type: application/json" -H "Accept: application/json" -H "X-Auth-Token: putatokenhere" -d '{"files": {}, "environment": {}, "template": {"heat\_template\_version": "2013-05-23", "resources": {"test": {"type": "file:///etc/passwd#.yaml"}}}}'

This fails with "The template is not a JSON object" even with my patches applied, when it should fail saying the type cannot be found.

Actually, it appears some of my remarks in comment #15 are wrong - it looks like the normal stack.Stack.validate() path is also affected by this, e.g my rework of template validation doesn't fix it, which means you can probably also trigger this via create/update too.
$ curl -g -i -X POST http://192.168.0.16:8004/v1/63b7b69cab914cb5beeaaee26b933aac/validate -H "User-Agent: python-heatclient" -H "Content-Type: application/json" -H "Accept: application/json" -H "X-Auth-Token: putatokenhere" -d '{"files": {}, "environment": {}, "template": {"heat\_template\_version": "2013-05-23", "resources": {"test": {"type": "file:///etc/passwd#.yaml"}}}}'
This fails with "The template is not a JSON object" even with my patches applied, when it should fail saying the type cannot be found.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2015-09-21: |  |  | [#21](/heat/%2Bbug/1496277/comments/21) |
| --- | --- | --- | --- |

The exploit scenario described, referencing a large file or stream to consume system memory, doesn't seem like it would be limited to local paths. What mitigation is in place to prevent large remote files/streams via allowed protocol schemes from having a similar effect?

The exploit scenario described, referencing a large file or stream to consume system memory, doesn't seem like it would be limited to local paths. What mitigation is in place to prevent large remote files/streams via allowed protocol schemes from having a similar effect?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steve Baker (steve-stevebaker)](https://launchpad.net/~steve-stevebaker) wrote on 2015-09-21:  [**Re: [Bug 1496277] Re: template-validate may read server local files**](/heat/%2Bbug/1496277/comments/22) |  |  | [#22](/heat/%2Bbug/1496277/comments/22) |
| --- | --- | --- | --- |

On 22/09/15 02:33, Jeremy Stanley wrote:

> The exploit scenario described, referencing a large file or stream to

> consume system memory, doesn't seem like it would be limited to local

> paths. What mitigation is in place to prevent large remote files/streams

> via allowed protocol schemes from having a similar effect?

>

This particular code path only allows the file:// protocol

On 22/09/15 02:33, Jeremy Stanley wrote:
> The exploit scenario described, referencing a large file or stream to
> consume system memory, doesn't seem like it would be limited to local
> paths. What mitigation is in place to prevent large remote files/streams
> via allowed protocol schemes from having a similar effect?
>
This particular code path only allows the file:// protocol

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-21:  [**Re: template-validate may read server local files**](/heat/%2Bbug/1496277/comments/23) |  |  | [#23](/heat/%2Bbug/1496277/comments/23) |
| --- | --- | --- | --- |

While the content of the file is not returned, there is also at very least a minor information leak here.

The error returned by the requests can be used to determine if a file exists and is readable by glance-engine.

While the content of the file is not returned, there is also at very least a minor information leak here.
The error returned by the requests can be used to determine if a file exists and is readable by glance-engine.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-09-28: |  |  | [#24](/heat/%2Bbug/1496277/comments/24) |
| --- | --- | --- | --- |

Here is the updated impact description with /dev/zero, file existence leak and new affect line (assuming this won't make it for upcoming 2015.1.2):

Title: Heat denial of service through template-validate

Reporter: Steven Hardy (Red Hat)

Products: Heat, python-heatclient

Affects: <=2014.2.3, >=2015.1.0, <=2015.1.2

Description:

Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heatclient and/or the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by glance-engine. All Heat setups are affected.

Here is the updated impact description with /dev/zero, file existence leak and new affect line (assuming this won't make it for upcoming 2015.1.2):
Title: Heat denial of service through template-validate
Reporter: Steven Hardy (Red Hat)
Products: Heat, python-heatclient
Affects: <=2014.2.3, >=2015.1.0, <=2015.1.2
Description:
Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heatclient and/or the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by glance-engine. All Heat setups are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-09-28: |  |  | [#25](/heat/%2Bbug/1496277/comments/25) |
| --- | --- | --- | --- |

I think you mean s/glance-engine/heat-engine/ above?

I think you mean s/glance-engine/heat-engine/ above?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2015-09-28: |  |  | [#26](/heat/%2Bbug/1496277/comments/26) |
| --- | --- | --- | --- |

Yes I did. I was (failing at) multi-tasking.

Yes I did. I was (failing at) multi-tasking.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-09-28: |  |  | [#27](/heat/%2Bbug/1496277/comments/27) |
| --- | --- | --- | --- |

Good catch :-)

Title: Heat denial of service through template-validate

Reporter: Steven Hardy (Red Hat)

Products: Heat, python-heatclient

Affects: <=2014.2.3, >=2015.1.0, <=2015.1.2

Description:

Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heatclient and/or the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by heat-engine. All Heat setups are affected.

Good catch :-)
Title: Heat denial of service through template-validate
Reporter: Steven Hardy (Red Hat)
Products: Heat, python-heatclient
Affects: <=2014.2.3, >=2015.1.0, <=2015.1.2
Description:
Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heatclient and/or the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by heat-engine. All Heat setups are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Jeremy Stanley (fungi)](https://launchpad.net/~fungi) wrote on 2015-10-05: |  |  | [#28](/heat/%2Bbug/1496277/comments/28) |
| --- | --- | --- | --- |

Tristan's updated impact description in comment #27 looks good to me.

Tristan's updated impact description in comment #27 looks good to me.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-10-05: |  |  | [#29](/heat/%2Bbug/1496277/comments/29) |
| --- | --- | --- | --- |

Can you please attach backports for stable/juno and kilo that applies cleanly. Also is the patch in comment #10 pre-approved by Heat-coresec ?

Also, is there a fix for python-heatclient yet ?

Can you please attach backports for stable/juno and kilo that applies cleanly. Also is the patch in comment #10 pre-approved by Heat-coresec ?
Also, is there a fix for python-heatclient yet ?

| Changed in ossa: | |
| --- | --- |
| **status**: | Confirmed → In Progress |
| **assignee**: | nobody → Tristan Cacqueray (tristan-cacqueray) |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steve Baker (steve-stevebaker)](https://launchpad.net/~steve-stevebaker) wrote on 2015-10-05: |  |  | [#30](/heat/%2Bbug/1496277/comments/30) |
| --- | --- | --- | --- |

Comment #27 looks good.

Regarding the fix in comment #10, operators could set their global environment to host their templates anywhere, not just /etc/heat/templates. A better fix might be to load the global environment and reject any file:// path which doesn't have an explicit files entry in the global env.

Regarding a heatclient fix we have a couple of options which we could discuss here:

- don't fix it, communicate to users that they should only launch templates from trusted sources

- fix it for templates loaded over the network (http, https) so that any file:// url in these templates are rejected

Comment #27 looks good.
Regarding the fix in comment #10, operators could set their global environment to host their templates anywhere, not just /etc/heat/templates. A better fix might be to load the global environment and reject any file:// path which doesn't have an explicit files entry in the global env.
Regarding a heatclient fix we have a couple of options which we could discuss here:
- don't fix it, communicate to users that they should only launch templates from trusted sources
- fix it for templates loaded over the network (http, https) so that any file:// url in these templates are rejected

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2015-10-06

| **summary**: | - template-validate may read server local files+ template-validate may read server local files (CVE-2015-5295) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-11-09:  [**Re: template-validate may read server local files (CVE-2015-5295)**](/heat/%2Bbug/1496277/comments/31) |  |  | [#31](/heat/%2Bbug/1496277/comments/31) |
| --- | --- | --- | --- |

Is someone working on patch update according to comment #30 ?

Is someone working on patch update according to comment #30 ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-11-09: |  |  | [#32](/heat/%2Bbug/1496277/comments/32) |
| --- | --- | --- | --- |

I'm not sure on the status of Angus's patch, I've been meaning to sync up with him about it.

There has been some (private) discussion around an alternative solution, triggered by <https://review.openstack.org/#/c/238194/> which aims to fix a different issue, but ends up having some overlap with this issue (potentially) in terms of implementation.

The potential solution mentioned by Zane is to not generate classes via generate\_class except for the global environment, which would mean that we'd never hit the code in heat-engine causing this vulnerability, because all TemplateResource objects instantiated from user provided environments would be directly instantiated template\_resource.TemplateResource objects, not subclasses derived from generate\_class.

Context is <https://review.openstack.org/#/c/79291/3>, which shows that generate\_class was only added so we could allow resource-type-list to show resources defined in the global environment, e.g it's not actually needed for user provided environments.

I'm currently investigating this approach , to enable fixing [bug #1508115](/bugs/1508115), and will report back here (before posting anything in public) should that approach prove viable as a solution to both bugs.

Angus: I'd be interested to chat and hear your thoughts on that as a potential solution.

Tristan: How do we handle this should a fix prove viable as a side-effect to another bug which is not flagged as security impacting?

I'm not sure on the status of Angus's patch, I've been meaning to sync up with him about it.
There has been some (private) discussion around an alternative solution, triggered by https://review.openstack.org/#/c/238194/ which aims to fix a different issue, but ends up having some overlap with this issue (potentially) in terms of implementation.
The potential solution mentioned by Zane is to not generate classes via generate\_class except for the global environment, which would mean that we'd never hit the code in heat-engine causing this vulnerability, because all TemplateResource objects instantiated from user provided environments would be directly instantiated template\_resource.TemplateResource objects, not subclasses derived from generate\_class.
Context is https://review.openstack.org/#/c/79291/3, which shows that generate\_class was only added so we could allow resource-type-list to show resources defined in the global environment, e.g it's not actually needed for user provided environments.
I'm currently investigating this approach , to enable fixing bug #1508115, and will report back here (before posting anything in public) should that approach prove viable as a solution to both bugs.
Angus: I'd be interested to chat and hear your thoughts on that as a potential solution.
Tristan: How do we handle this should a fix prove viable as a side-effect to another bug which is not flagged as security impacting?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-11-09: |  |  | [#33](/heat/%2Bbug/1496277/comments/33) |
| --- | --- | --- | --- |

Steven, while it's not ideal to have a public fix for a private bug, for what it worth, the advance notification (pre-OSSA) can reference public review numbers. If both bugs 1508115 and [bug 1496277](/bugs/1496277) can be fixed with one patch, I'd say it's ok to do so directly on gerrit, as long as the security implication is not obvious.

However we need to make sure all the required piece to fix this bug are identified and referenced so that stakeholders can apply the fix.

Steven, while it's not ideal to have a public fix for a private bug, for what it worth, the advance notification (pre-OSSA) can reference public review numbers. If both bugs 1508115 and bug 1496277 can be fixed with one patch, I'd say it's ok to do so directly on gerrit, as long as the security implication is not obvious.
However we need to make sure all the required piece to fix this bug are identified and referenced so that stakeholders can apply the fix.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-11-10: |  |  | [#34](/heat/%2Bbug/1496277/comments/34) |
| --- | --- | --- | --- |

If it wasn't referencing a private security bug I believe it would definitely be extremely non-obvious. With the reference to a hidden bug... I think a determined engineer could probably figure it out.

Maybe post a review referencing only [bug 1508115](/bugs/1508115) and mark it WIP; when it's got the o-k from a couple of cores upload a new patchset referencing this bug in the commit message and fast-merge it.

If it wasn't referencing a private security bug I believe it would definitely be extremely non-obvious. With the reference to a hidden bug... I think a determined engineer could probably figure it out.
Maybe post a review referencing only bug 1508115 and mark it WIP; when it's got the o-k from a couple of cores upload a new patchset referencing this bug in the commit message and fast-merge it.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-11-10: |  |  | [#35](/heat/%2Bbug/1496277/comments/35) |
| --- | --- | --- | --- |

@Zane: Yeah I was kinda thinking the same, only I assumed we'd probably just land the patch referencing [bug 1508115](/bugs/1508115) and document it as a dependency here, so it can be referenced in the pre-OSSA. I'm not sure if that works wrt the process outlined by Tristan though.

Hopefully I'll have a patch ready later today, I'll post it under [bug 1508115](/bugs/1508115) and we can discuss the next steps after it's had some reviews.

@Zane: Yeah I was kinda thinking the same, only I assumed we'd probably just land the patch referencing bug 1508115 and document it as a dependency here, so it can be referenced in the pre-OSSA. I'm not sure if that works wrt the process outlined by Tristan though.
Hopefully I'll have a patch ready later today, I'll post it under bug 1508115 and we can discuss the next steps after it's had some reviews.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-11-17: |  |  | [#36](/heat/%2Bbug/1496277/comments/36) |
| --- | --- | --- | --- |

Steve and I have both looked at this and its proving remarkably resistant to a fix that doesn't create other regressions :( We still have some ideas though.

Steve and I have both looked at this and its proving remarkably resistant to a fix that doesn't create other regressions :( We still have some ideas though.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-11-17: |  |  | [#37](/heat/%2Bbug/1496277/comments/37) |
| --- | --- | --- | --- |

What Steven proposed in comment #35 works for me. If the fix for [bug 1508115](/bugs/1508115) also solve [bug 1496277](/bugs/1496277), then we'll wait for the fix to be merged before setting a disclosure date.

Note that we also needs backports (Kilo and Liberty at least, but maybe not Juno since it's about to be EOL).

If the original fix is not going to be cherry-picked on gerrit, then please attach required backports to this bug report.

What Steven proposed in comment #35 works for me. If the fix for bug 1508115 also solve bug 1496277, then we'll wait for the fix to be merged before setting a disclosure date.
Note that we also needs backports (Kilo and Liberty at least, but maybe not Juno since it's about to be EOL).
If the original fix is not going to be cherry-picked on gerrit, then please attach required backports to this bug report.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-11-17: |  |  | [#38](/heat/%2Bbug/1496277/comments/38) |
| --- | --- | --- | --- |

Unfortunately the fix we had in mind for [bug 1508115](/bugs/1508115) proved impractical for a number of reasons, so we had to go with a simpler interim fix, which does not have the side-effect of fixing this bug.

So we're still in the process of working through options - basically it boils down to what Angus said in comment #14, the subtext of which is there's considerable hidden complexity around our (inconsistent) application of the user\_resource flag in the environment (you can't rely on it always being false for templates loaded from the global environment, which IMO is a bug), and also around our usage of the generate\_class derived subclass for facade validation.

I hope we'll have better news soon but if not then we'll probably have to revisit the path restriction workaround posted by Angus in comment #7. My objections to that approach stand, but I now understand the reasons for it much better :(

Unfortunately the fix we had in mind for bug 1508115 proved impractical for a number of reasons, so we had to go with a simpler interim fix, which does not have the side-effect of fixing this bug.
So we're still in the process of working through options - basically it boils down to what Angus said in comment #14, the subtext of which is there's considerable hidden complexity around our (inconsistent) application of the user\_resource flag in the environment (you can't rely on it always being false for templates loaded from the global environment, which IMO is a bug), and also around our usage of the generate\_class derived subclass for facade validation.
I hope we'll have better news soon but if not then we'll probably have to revisit the path restriction workaround posted by Angus in comment #7. My objections to that approach stand, but I now understand the reasons for it much better :(

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2015-11-23

| Changed in ossa: | |
| --- | --- |
| **importance**: | High → Critical |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-11-23: |  |  | [#39](/heat/%2Bbug/1496277/comments/39) |
| --- | --- | --- | --- |

We've raised the importance to critical since it's a trivial api denial of service.

Is there any progress on the fix ?

We've raised the importance to critical since it's a trivial api denial of service.
Is there any progress on the fix ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-11-23: |  |  | [#40](/heat/%2Bbug/1496277/comments/40) |
| --- | --- | --- | --- |

A little, and I'm hoping to spend more time on it over the next couple of days, but there remain some fundamental unanswered questions without which it will be difficult to have confidence in a fix - especially one that needs to be embargoed and thus has to work first time without review/testing feedback from the wider community.

A little, and I'm hoping to spend more time on it over the next couple of days, but there remain some fundamental unanswered questions without which it will be difficult to have confidence in a fix - especially one that needs to be embargoed and thus has to work first time without review/testing feedback from the wider community.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-11-24: |  |  | [#41](/heat/%2Bbug/1496277/comments/41) |
| --- | --- | --- | --- |

Testing a fix now that is pretty tidy and I believe keeps everything working. Will try to post a patch tomorrow once I have some more unit tests written. Otherwise it will be early next week (due to Thanksgiving).

Testing a fix now that is pretty tidy and I believe keeps everything working. Will try to post a patch tomorrow once I have some more unit tests written. Otherwise it will be early next week (due to Thanksgiving).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-11-25: |  |  | [#42](/heat/%2Bbug/1496277/comments/42) |
| --- | --- | --- | --- |

* [load-files-from-correct-source.patch](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4525484/%2Bfiles/load-files-from-correct-source.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4525484)
  (3.2 KiB,
  text/plain)

I posted a series here: <https://review.openstack.org/#/q/status:open+project:openstack/heat+branch:master+topic:bug/1518458,n,z>

The interesting one is <https://review.openstack.org/#/c/250053/> which should mostly solve the problem. The exception is the validation code introduced by the fix for [bug 1479565](/bugs/1479565). The attached patch should solve the last part of the problem without breaking that fix.

Feeback is appreciated. There are still some murky parts around updates (by which time the previously global type mappings are treated as user type mappings), but in theory these patches can't make anything worse. In theory.

I posted a series here: https://review.openstack.org/#/q/status:open+project:openstack/heat+branch:master+topic:bug/1518458,n,z
The interesting one is https://review.openstack.org/#/c/250053/ which should mostly solve the problem. The exception is the validation code introduced by the fix for bug 1479565. The attached patch should solve the last part of the problem without breaking that fix.
Feeback is appreciated. There are still some murky parts around updates (by which time the previously global type mappings are treated as user type mappings), but in theory these patches can't make anything worse. In theory.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-12-07: |  |  | [#43](/heat/%2Bbug/1496277/comments/43) |
| --- | --- | --- | --- |

The patches above all got merged:

<https://review.openstack.org/#/q/status:merged+project:openstack/heat+branch:master+topic:bug/1518458,n,z>

So if we can get reviews posted here on the attached patch then I can propose this fix + backports.

The patches above all got merged:
https://review.openstack.org/#/q/status:merged+project:openstack/heat+branch:master+topic:bug/1518458,n,z
So if we can get reviews posted here on the attached patch then I can propose this fix + backports.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-12-07: |  |  | [#44](/heat/%2Bbug/1496277/comments/44) |
| --- | --- | --- | --- |

@Zane: Thanks for looking at this, +1 on the patch in comment #42 - I agree that we may find that self.user\_resource isn't treated properly on update - it'd be worth testing a scenario like:

1. Create a stack with a TemplateResource defined in the global environment

2. Modify the file referenced by the global environment mapping

3. Update the stack from (1) and prove the changes are picked up.

IIRC this sequence does currently work, I'll pull your patch tomorrow and re-test, unless anyone else gets to it first.

@Zane: Thanks for looking at this, +1 on the patch in comment #42 - I agree that we may find that self.user\_resource isn't treated properly on update - it'd be worth testing a scenario like:
1. Create a stack with a TemplateResource defined in the global environment
2. Modify the file referenced by the global environment mapping
3. Update the stack from (1) and prove the changes are picked up.
IIRC this sequence does currently work, I'll pull your patch tomorrow and re-test, unless anyone else gets to it first.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-12-09: |  |  | [#45](/heat/%2Bbug/1496277/comments/45) |
| --- | --- | --- | --- |

Steven, any feedback from the test scenario described in comment #44 ?

Zane, the patch doesn't apply cleanly using "git am", can you please format the proposed patch using "git format-patch --stdout HEAD~1". Also it doesn't apply cleanly on stable/liberty nor stable/kilo. Ideally we would need three different patch for each branch.

IIUC, this patch needs to be applied on top of status:merged project:openstack/heat branch:master topic:bug/1518458...

Will those patches need be backported before disclosing this bug ?

Steven, any feedback from the test scenario described in comment #44 ?
Zane, the patch doesn't apply cleanly using "git am", can you please format the proposed patch using "git format-patch --stdout HEAD~1". Also it doesn't apply cleanly on stable/liberty nor stable/kilo. Ideally we would need three different patch for each branch.
IIUC, this patch needs to be applied on top of status:merged project:openstack/heat branch:master topic:bug/1518458...
Will those patches need be backported before disclosing this bug ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-12-09: |  |  | [#46](/heat/%2Bbug/1496277/comments/46) |
| --- | --- | --- | --- |

@Tristan - yes, sorry for the delay, I've now tested the following:

Via heatclient:

1. Create stack with a TemplateResource defined in /etc/heat/environment.d/default.yaml referencing the local filesystem

  2. Modified the template file referenced

  3. Update the stack with no other changes.

Turns out the concerns mentioned in comments #42 and #44 were unfounded, AFAICS this still works as it did before, and on update the modified file is loaded into the global environment, and the changes do take effect.

Via curl:

1. Created a stack referencing a nested stack defined in the "files" map - this worked as expected

  2. Repeat previous step modifying the "files" map key so the type definition in the template points to a valid local path, but it's undefined in the "files" map of the request. This fails with "Invalid URL scheme file" and StackValidationFailed

So, I'm +2 on the fix, from my (admittedly fairly limited) testing it doesn't seem to break anything, and it fixes the reported issue - thanks Zane!

The patch applies fine via git apply or patch -p1, but I'll attach a git am friendly version shortly.

@Tristan - yes, sorry for the delay, I've now tested the following:
Via heatclient:
1. Create stack with a TemplateResource defined in /etc/heat/environment.d/default.yaml referencing the local filesystem
2. Modified the template file referenced
3. Update the stack with no other changes.
Turns out the concerns mentioned in comments #42 and #44 were unfounded, AFAICS this still works as it did before, and on update the modified file is loaded into the global environment, and the changes do take effect.
Via curl:
1. Created a stack referencing a nested stack defined in the "files" map - this worked as expected
2. Repeat previous step modifying the "files" map key so the type definition in the template points to a valid local path, but it's undefined in the "files" map of the request. This fails with "Invalid URL scheme file" and StackValidationFailed
So, I'm +2 on the fix, from my (admittedly fairly limited) testing it doesn't seem to break anything, and it fixes the reported issue - thanks Zane!
The patch applies fine via git apply or patch -p1, but I'll attach a git am friendly version shortly.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2015-12-09: |  |  | [#47](/heat/%2Bbug/1496277/comments/47) |
| --- | --- | --- | --- |

* [Updated patch for git am](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4532176/%2Bfiles/load-files-from-correct-source-2.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4532176)
  (3.4 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2015-12-09: |  |  | [#48](/heat/%2Bbug/1496277/comments/48) |
| --- | --- | --- | --- |

Yes, we would need to backport that whole series to liberty & kilo. If we're agreed on this fix (it sounds like we are) then I can prepare backports of the whole series and attach them here. My current thinking is that I would squash them all into a single patch per branch.

Yes, we would need to backport that whole series to liberty & kilo. If we're agreed on this fix (it sounds like we are) then I can prepare backports of the whole series and attach them here. My current thinking is that I would squash them all into a single patch per branch.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2015-12-10: |  |  | [#49](/heat/%2Bbug/1496277/comments/49) |
| --- | --- | --- | --- |

Patch in comment #47 applied cleanly on master and tox succeed for py27 and pep8. Thanks!

Patch in comment #47 applied cleanly on master and tox succeed for py27 and pep8. Thanks!

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-01-04: |  |  | [#50](/heat/%2Bbug/1496277/comments/50) |
| --- | --- | --- | --- |

Angus, can you please have a look at proposed patch #47, it seems like the fix is waiting for approval before being backported.

Angus, can you please have a look at proposed patch #47, it seems like the fix is waiting for approval before being backported.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Angus Salkeld (asalkeld)](https://launchpad.net/~asalkeld) wrote on 2016-01-04: |  |  | [#51](/heat/%2Bbug/1496277/comments/51) |
| --- | --- | --- | --- |

Hi, sorry I was on PTO. That patch looks fine to me (#47).

Hi, sorry I was on PTO. That patch looks fine to me (#47).

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-05: |  |  | [#52](/heat/%2Bbug/1496277/comments/52) |
| --- | --- | --- | --- |

Actually the reason for the lack of progress on the backport is that I have been on PTO as well. I'm back now and it's on my list of things to do this week. I'll attach the backported version here when ready.

Actually the reason for the lack of progress on the backport is that I have been on PTO as well. I'm back now and it's on my list of things to do this week. I'll attach the backported version here when ready.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-11: |  |  | [#53](/heat/%2Bbug/1496277/comments/53) |
| --- | --- | --- | --- |

* [Final patch for master](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4548273/%2Bfiles/bug1496277-master.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4548273)
  (3.6 KiB,
  text/plain)

Here is the final version of the patch, with improved commit message.

Here is the final version of the patch, with improved commit message.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-11: |  |  | [#54](/heat/%2Bbug/1496277/comments/54) |
| --- | --- | --- | --- |

* [Final patch for Liberty](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4548274/%2Bfiles/bug1496277-liberty.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4548274)
  (12.3 KiB,
  text/plain)

Here is a backport for Liberty. The second "cherry-picked from" hash may need to be adjusted to match whatever hash the master commit eventually gets.

Here is a backport for Liberty. The second "cherry-picked from" hash may need to be adjusted to match whatever hash the master commit eventually gets.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-11: |  |  | [#55](/heat/%2Bbug/1496277/comments/55) |
| --- | --- | --- | --- |

* [Final patch for Kilo](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4548275/%2Bfiles/bug1496277-kilo.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4548275)
  (11.1 KiB,
  text/plain)

Here is a backport for Kilo. The second "cherry-picked from" hash may need to be adjusted to match whatever hash the master commit eventually gets.

Here is a backport for Kilo. The second "cherry-picked from" hash may need to be adjusted to match whatever hash the master commit eventually gets.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-01-12: |  |  | [#56](/heat/%2Bbug/1496277/comments/56) |
| --- | --- | --- | --- |

Thanks Zane, I confirm this patch fix the issue (at least for rdo-kilo).

Also, tox passed on all three patchs.

@heat-coresec, please review proposed patch (comment #53, #54 and #55).

If patch are +2 here, I propose a disclosure date next week:

2016-01-19, 1500UTC

Would that works for you folks?

Thanks Zane, I confirm this patch fix the issue (at least for rdo-kilo).
Also, tox passed on all three patchs.
@heat-coresec, please review proposed patch (comment #53, #54 and #55).
If patch are +2 here, I propose a disclosure date next week:
2016-01-19, 1500UTC
Would that works for you folks?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2016-01-12: |  |  | [#57](/heat/%2Bbug/1496277/comments/57) |
| --- | --- | --- | --- |

Thanks for the updates Zane - all three patches look good to me +2

Thanks for the updates Zane - all three patches look good to me +2

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-01-12: |  |  | [#58](/heat/%2Bbug/1496277/comments/58) |
| --- | --- | --- | --- |

Though, the python-heatclient is still affected, I had to use direct curl in order to verify the issue was fixed for the API.

What's the status for the client, is it going to be fixed or should we add a Note to the advisory about it ?

Though, the python-heatclient is still affected, I had to use direct curl in order to verify the issue was fixed for the API.
What's the status for the client, is it going to be fixed or should we add a Note to the advisory about it ?

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-12: |  |  | [#59](/heat/%2Bbug/1496277/comments/59) |
| --- | --- | --- | --- |

I don't understand what it means for the client to be affected? I'm not worried about the user reading their own files.

I don't understand what it means for the client to be affected? I'm not worried about the user reading their own files.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-01-12: |  |  | [#60](/heat/%2Bbug/1496277/comments/60) |
| --- | --- | --- | --- |

Trying to reproduce using this sequence quickly consumes all system memory and crashed my setup:

cat > bad\_template.yaml << EOF

heat\_template\_version: 2013-05-23

description": "a"

resources: {"my\_instance": {"type": "file:///dev/zero#a.yaml", "properties": {"flavor": "m1.small"}}}

EOF

heat stack-create --template-file ./bad\_template.yaml test\_bad

I propose to add this Note to the advisory:

- Until the python-heatclient get updated, this bug also reproduces on the client side, users should only launch template from trusted sources.

Trying to reproduce using this sequence quickly consumes all system memory and crashed my setup:
cat > bad\_template.yaml << EOF
heat\_template\_version: 2013-05-23
description": "a"
resources: {"my\_instance": {"type": "file:///dev/zero#a.yaml", "properties": {"flavor": "m1.small"}}}
EOF
heat stack-create --template-file ./bad\_template.yaml test\_bad
I propose to add this Note to the advisory:
- Until the python-heatclient get updated, this bug also reproduces on the client side, users should only launch template from trusted sources.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-12: |  |  | [#61](/heat/%2Bbug/1496277/comments/61) |
| --- | --- | --- | --- |

Users should \*always\* launch templates only from trusted sources. There is no time when launching a template from an untrusted source would be a good idea, any more than running a shell script from an untrusted source would be.

There isn't a bug in the client, so there's nothing to update. There isn't anything we could do even in principle, because the user is allowed to reference any file they like (unlike on the server where they're all supposed to be installed in /etc/heat/). I don't think we should imply otherwise.

Users should \*always\* launch templates only from trusted sources. There is no time when launching a template from an untrusted source would be a good idea, any more than running a shell script from an untrusted source would be.
There isn't a bug in the client, so there's nothing to update. There isn't anything we could do even in principle, because the user is allowed to reference any file they like (unlike on the server where they're all supposed to be installed in /etc/heat/). I don't think we should imply otherwise.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-01-12: |  |  | [#62](/heat/%2Bbug/1496277/comments/62) |
| --- | --- | --- | --- |

Alright, my bad, comment #30 suggested the python-heatclient could get fixed as well.

Here is the final impact description removing client affect:

Title: Heat denial of service through template-validate

Reporter: Steven Hardy (Red Hat)

Products: Heat

Affects: <=2015.1.2, ==5.0.0

Description:

Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by heat-engine. All Heat setups are affected.

Alright, my bad, comment #30 suggested the python-heatclient could get fixed as well.
Here is the final impact description removing client affect:
Title: Heat denial of service through template-validate
Reporter: Steven Hardy (Red Hat)
Products: Heat
Affects: <=2015.1.2, ==5.0.0
Description:
Steven Hardy from Red Hat reported a vulnerability in Heat template validation. By referencing a local file like /dev/zero, an authenticated user may trick the heat engine service to load arbritrary local file content resulting in a Denial of Service attack through memory exhaustion. Note that the file content is not written back to the user, though the user can determine if a file exists and if it is readable by heat-engine. All Heat setups are affected.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2016-01-13: |  |  | [#63](/heat/%2Bbug/1496277/comments/63) |
| --- | --- | --- | --- |

Well, there might be something we can do in heatclient to at least try to help users to (knowingly or unknowingly) do the wrong thing.

E.g, we could resolve "file:///dev/zero#a.yaml" and at least check that the resulting file we're reading is a regular file and perhaps ends with an expected extension, e.g yaml, yml, json etc.

But in general I agree with Zane, we tend to take the view that on the client side it's up to the user to ensure their configuration is sane and that they don't DoS themselves.

Well, there might be something we can do in heatclient to at least try to help users to (knowingly or unknowingly) do the wrong thing.
E.g, we could resolve "file:///dev/zero#a.yaml" and at least check that the resulting file we're reading is a regular file and perhaps ends with an expected extension, e.g yaml, yml, json etc.
But in general I agree with Zane, we tend to take the view that on the client side it's up to the user to ensure their configuration is sane and that they don't DoS themselves.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Steven Hardy (shardy)](https://launchpad.net/~shardy) wrote on 2016-01-13: |  |  | [#64](/heat/%2Bbug/1496277/comments/64) |
| --- | --- | --- | --- |

Obviously I meant \*not\* do the wrong thing :)

Obviously I meant \*not\* do the wrong thing :)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray) wrote on 2016-01-13: |  |  | [#65](/heat/%2Bbug/1496277/comments/65) |
| --- | --- | --- | --- |

Alright thanks you, the advance notification is sent with public disclosure date/time:

2016-01-19, 1500UTC

I also fixed a typo in impact description proposed in comment #62: s/arbritrary/arbitrary/

Alright thanks you, the advance notification is sent with public disclosure date/time:
2016-01-19, 1500UTC
I also fixed a typo in impact description proposed in comment #62: s/arbritrary/arbitrary/

| Changed in ossa: | |
| --- | --- |
| **status**: | In Progress → Fix Committed |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-14: |  |  | [#66](/heat/%2Bbug/1496277/comments/66) |
| --- | --- | --- | --- |

I realise that we don't officially support releases prior to Kilo even for security issues, but for the benefit of anyone running Juno, a completely untested patch is attached.

Affected releases are Icehouse, Juno, Kilo and Liberty.

I realise that we don't officially support releases prior to Kilo even for security issues, but for the benefit of anyone running Juno, a completely untested patch is attached.
Affected releases are Icehouse, Juno, Kilo and Liberty.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-14: |  |  | [#67](/heat/%2Bbug/1496277/comments/67) |
| --- | --- | --- | --- |

And here is a completely untested Icehouse patch.

And here is a completely untested Icehouse patch.

| Changed in heat: | |
| --- | --- |
| **assignee**: | Angus Salkeld (asalkeld) → Zane Bitter (zaneb) |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2016-01-19

| **information type**: | Private Security → Public Security |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Fix proposed to heat (master)**](/heat/%2Bbug/1496277/comments/68) |  |  | [#68](/heat/%2Bbug/1496277/comments/68) |
| --- | --- | --- | --- |

Fix proposed to branch: master

Review: <https://review.openstack.org/269689>

Fix proposed to branch: master
Review: https://review.openstack.org/269689

| Changed in heat: | |
| --- | --- |
| **status**: | Confirmed → In Progress |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Fix proposed to heat (stable/liberty)**](/heat/%2Bbug/1496277/comments/69) |  |  | [#69](/heat/%2Bbug/1496277/comments/69) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/liberty

Review: <https://review.openstack.org/269691>

Fix proposed to branch: stable/liberty
Review: https://review.openstack.org/269691

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Fix proposed to heat (stable/kilo)**](/heat/%2Bbug/1496277/comments/70) |  |  | [#70](/heat/%2Bbug/1496277/comments/70) |
| --- | --- | --- | --- |

Fix proposed to branch: stable/kilo

Review: <https://review.openstack.org/269692>

Fix proposed to branch: stable/kilo
Review: https://review.openstack.org/269692

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Related fix proposed to ossa (master)**](/heat/%2Bbug/1496277/comments/71) |  |  | [#71](/heat/%2Bbug/1496277/comments/71) |
| --- | --- | --- | --- |

Related fix proposed to branch: master

Review: <https://review.openstack.org/269697>

Related fix proposed to branch: master
Review: https://review.openstack.org/269697

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2016-01-19

| **summary**: | - template-validate may read server local files (CVE-2015-5295)+ [OSSA 2016-003] template-validate may read server local files+ (CVE-2015-5295) |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Related fix merged to ossa (master)**](/heat/%2Bbug/1496277/comments/72) |  |  | [#72](/heat/%2Bbug/1496277/comments/72) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/269697>

Committed: <https://git.openstack.org/cgit/openstack/ossa/commit/?id=b3a71f9efa9daff818c0b9fe912b44e84d26a21c>

Submitter: Jenkins

Branch: master

commit b3a71f9efa9daff818c0b9fe912b44e84d26a21c

Author: Tristan Cacqueray <email address hidden>

Date: Tue Jan 19 10:03:56 2016 -0500

Adds OSSA-2016-003 (CVE-2015-5295)

Related-Bug: #1496277

    Change-Id: Ife3bc05344b7449fd4c5a2e0a1aaa8048c5c7e21

Reviewed: https://review.openstack.org/269697
Committed: https://git.openstack.org/cgit/openstack/ossa/commit/?id=b3a71f9efa9daff818c0b9fe912b44e84d26a21c
Submitter: Jenkins
Branch: master
commit b3a71f9efa9daff818c0b9fe912b44e84d26a21c
Author: Tristan Cacqueray <tdecacqu@redhat.com>
Date: Tue Jan 19 10:03:56 2016 -0500
Adds OSSA-2016-003 (CVE-2015-5295)
Related-Bug: #1496277
Change-Id: Ife3bc05344b7449fd4c5a2e0a1aaa8048c5c7e21

[Jeremy Stanley (fungi)](https://launchpad.net/~fungi)
on 2016-01-19

| **description**: | updated |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Fix merged to heat (stable/liberty)**](/heat/%2Bbug/1496277/comments/73) |  |  | [#73](/heat/%2Bbug/1496277/comments/73) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/269691>

Committed: <https://git.openstack.org/cgit/openstack/heat/commit/?id=87116e262329e5cd309a0f1e35ffefd06080022c>

Submitter: Jenkins

Branch: stable/liberty

commit 87116e262329e5cd309a0f1e35ffefd06080022c

Author: Zane Bitter <email address hidden>

Date: Tue Nov 24 12:29:38 2015 -0500

Load template files only from their known source

Modify get\_class to ensure that user-defined resources cannot result in

    reads from the local filesystem. Only resources defined by the operator

    in the global environment should read local files.

To make this work, this patch also adds a separate

    get\_class\_to\_instantiate() method to the Environment.

We were previously using get\_class for two different purposes - to get a

    resource plugin on which we could perform introspection to obtain the

    properties and attributes schema, and to get a resource plugin we could

    instantiate to create a Resource object. These are both the same except in

    the case of a TemplateResource, where having two different use cases for

    the same piece of code was adding considerable extra complexity. Combining

    the use cases in this way also made the error handling confusing (leading

    to [bug 1518458](/bugs/1518458)).

This change separates out the two cases.

Change-Id: I845e7d23c73242a4a4c9c40599690ab705c75caa

    Closes-Bug: #1496277

    Related-Bug: #1447194

    Related-Bug: #1518458

    Related-Bug: #1508115

    (cherry picked from commit 06a713c4456203cd561f16721dc8ac3bcbb37a3

                           and 26e6d5f6d776c1027c4f27058767952a58d15e25)

Reviewed: https://review.openstack.org/269691
Committed: https://git.openstack.org/cgit/openstack/heat/commit/?id=87116e262329e5cd309a0f1e35ffefd06080022c
Submitter: Jenkins
Branch: stable/liberty
commit 87116e262329e5cd309a0f1e35ffefd06080022c
Author: Zane Bitter <zbitter@redhat.com>
Date: Tue Nov 24 12:29:38 2015 -0500
Load template files only from their known source
Modify get\_class to ensure that user-defined resources cannot result in
reads from the local filesystem. Only resources defined by the operator
in the global environment should read local files.
To make this work, this patch also adds a separate
get\_class\_to\_instantiate() method to the Environment.
We were previously using get\_class for two different purposes - to get a
resource plugin on which we could perform introspection to obtain the
properties and attributes schema, and to get a resource plugin we could
instantiate to create a Resource object. These are both the same except in
the case of a TemplateResource, where having two different use cases for
the same piece of code was adding considerable extra complexity. Combining
the use cases in this way also made the error handling confusing (leading
to bug 1518458).
This change separates out the two cases.
Change-Id: I845e7d23c73242a4a4c9c40599690ab705c75caa
Closes-Bug: #1496277
Related-Bug: #1447194
Related-Bug: #1518458
Related-Bug: #1508115
(cherry picked from commit 06a713c4456203cd561f16721dc8ac3bcbb37a3
and 26e6d5f6d776c1027c4f27058767952a58d15e25)

| **tags**: | added: in-stable-liberty |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-19:  [**Fix merged to heat (stable/kilo)**](/heat/%2Bbug/1496277/comments/74) |  |  | [#74](/heat/%2Bbug/1496277/comments/74) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/269692>

Committed: <https://git.openstack.org/cgit/openstack/heat/commit/?id=fa19a617a79fd1cb0d892bb8ea87c4b9f6398c34>

Submitter: Jenkins

Branch: stable/kilo

commit fa19a617a79fd1cb0d892bb8ea87c4b9f6398c34

Author: Zane Bitter <email address hidden>

Date: Tue Nov 24 12:29:38 2015 -0500

Load template files only from their known source

Modify get\_class to ensure that user-defined resources cannot result in

    reads from the local filesystem. Only resources defined by the operator

    in the global environment should read local files.

To make this work, this patch also adds a separate

    get\_class\_to\_instantiate() method to the Environment.

We were previously using get\_class for two different purposes - to get a

    resource plugin on which we could perform introspection to obtain the

    properties and attributes schema, and to get a resource plugin we could

    instantiate to create a Resource object. These are both the same except in

    the case of a TemplateResource, where having two different use cases for

    the same piece of code was adding considerable extra complexity. Combining

    the use cases in this way also made the error handling confusing (leading

    to [bug 1518458](/bugs/1518458)).

This change separates out the two cases.

Change-Id: I845e7d23c73242a4a4c9c40599690ab705c75caa

    Closes-Bug: #1496277

    Related-Bug: #1447194

    Related-Bug: #1518458

    Related-Bug: #1508115

    (cherry picked from commit 06a713c4456203cd561f16721dc8ac3bcbb37a3

                           and 26e6d5f6d776c1027c4f27058767952a58d15e25)

Reviewed: https://review.openstack.org/269692
Committed: https://git.openstack.org/cgit/openstack/heat/commit/?id=fa19a617a79fd1cb0d892bb8ea87c4b9f6398c34
Submitter: Jenkins
Branch: stable/kilo
commit fa19a617a79fd1cb0d892bb8ea87c4b9f6398c34
Author: Zane Bitter <zbitter@redhat.com>
Date: Tue Nov 24 12:29:38 2015 -0500
Load template files only from their known source
Modify get\_class to ensure that user-defined resources cannot result in
reads from the local filesystem. Only resources defined by the operator
in the global environment should read local files.
To make this work, this patch also adds a separate
get\_class\_to\_instantiate() method to the Environment.
We were previously using get\_class for two different purposes - to get a
resource plugin on which we could perform introspection to obtain the
properties and attributes schema, and to get a resource plugin we could
instantiate to create a Resource object. These are both the same except in
the case of a TemplateResource, where having two different use cases for
the same piece of code was adding considerable extra complexity. Combining
the use cases in this way also made the error handling confusing (leading
to bug 1518458).
This change separates out the two cases.
Change-Id: I845e7d23c73242a4a4c9c40599690ab705c75caa
Closes-Bug: #1496277
Related-Bug: #1447194
Related-Bug: #1518458
Related-Bug: #1508115
(cherry picked from commit 06a713c4456203cd561f16721dc8ac3bcbb37a3
and 26e6d5f6d776c1027c4f27058767952a58d15e25)

| **tags**: | added: in-stable-kilo |
| --- | --- |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-19: |  |  | [#75](/heat/%2Bbug/1496277/comments/75) |
| --- | --- | --- | --- |

Here is an updated Icehouse patch with working unit tests.

Here is an updated Icehouse patch with working unit tests.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-01-19: |  |  | [#76](/heat/%2Bbug/1496277/comments/76) |
| --- | --- | --- | --- |

Here is an updated Juno patch with working unit tests.

Here is an updated Juno patch with working unit tests.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Doug Hellmann (doug-hellmann)](https://launchpad.net/~doug-hellmann) wrote on 2016-01-20:  [**Fix included in openstack/heat 5.0.1**](/heat/%2Bbug/1496277/comments/77) |  |  | [#77](/heat/%2Bbug/1496277/comments/77) |
| --- | --- | --- | --- |

This issue was fixed in the openstack/heat 5.0.1 release.

This issue was fixed in the openstack/heat 5.0.1 release.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [OpenStack Infra (hudson-openstack)](https://launchpad.net/~hudson-openstack) wrote on 2016-01-21:  [**Fix merged to heat (master)**](/heat/%2Bbug/1496277/comments/78) |  |  | [#78](/heat/%2Bbug/1496277/comments/78) |
| --- | --- | --- | --- |

Reviewed: <https://review.openstack.org/269689>

Committed: <https://git.openstack.org/cgit/openstack/heat/commit/?id=26e6d5f6d776c1027c4f27058767952a58d15e25>

Submitter: Jenkins

Branch: master

commit 26e6d5f6d776c1027c4f27058767952a58d15e25

Author: Zane Bitter <email address hidden>

Date: Mon Jan 11 18:43:43 2016 -0500

Load template files only from their known source

Modify get\_class to ensure that user-defined resources cannot result in

    reads from the local filesystem. Only resources defined by the operator

    in the global environment should read local files.

Change-Id: I845e7d23c73242a4a4c9c40599690ab705c75caa

    Closes-Bug: #1496277

Reviewed: https://review.openstack.org/269689
Committed: https://git.openstack.org/cgit/openstack/heat/commit/?id=26e6d5f6d776c1027c4f27058767952a58d15e25
Submitter: Jenkins
Branch: master
commit 26e6d5f6d776c1027c4f27058767952a58d15e25
Author: Zane Bitter <zbitter@redhat.com>
Date: Mon Jan 11 18:43:43 2016 -0500
Load template files only from their known source
Modify get\_class to ensure that user-defined resources cannot result in
reads from the local filesystem. Only resources defined by the operator
in the global environment should read local files.
Change-Id: I845e7d23c73242a4a4c9c40599690ab705c75caa
Closes-Bug: #1496277

| Changed in heat: | |
| --- | --- |
| **status**: | In Progress → Fix Released |

[Tristan Cacqueray (tristan-cacqueray)](https://launchpad.net/~tristan-cacqueray)
on 2016-01-21

| Changed in ossa: | |
| --- | --- |
| **status**: | Fix Committed → Fix Released |

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-02-25: |  |  | [#79](/heat/%2Bbug/1496277/comments/79) |
| --- | --- | --- | --- |

* [Juno patch (updated)](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4580996/%2Bfiles/bug1496277-juno.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4580996)
  (11.1 KiB,
  text/plain)

Sergey Kraynev from Mirantis reported that the attached patches for the Juno and Icehouse releases do not completely resolve the issue. Specifically, they fix it for stack creates and updates but not for validate-template. I am attaching updated patches for Juno and Icehouse.

See [bug 1549033](/bugs/1549033) for more details.

Sergey Kraynev from Mirantis reported that the attached patches for the Juno and Icehouse releases do not completely resolve the issue. Specifically, they fix it for stack creates and updates but not for validate-template. I am attaching updated patches for Juno and Icehouse.
See bug 1549033 for more details.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-02-25: |  |  | [#80](/heat/%2Bbug/1496277/comments/80) |
| --- | --- | --- | --- |

* [Icehouse patch (updated)](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4580997/%2Bfiles/bug1496277-icehouse.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4580997)
  (11.1 KiB,
  text/plain)

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2016-02-25: |  |  | [#81](/heat/%2Bbug/1496277/comments/81) |
| --- | --- | --- | --- |

@VMT/@Tristan Think we need a new CVE for the incomplete fix.

@VMT/@Tristan Think we need a new CVE for the incomplete fix.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Garth Mollett (gmollett)](https://launchpad.net/~gmollett) wrote on 2016-02-25: |  |  | [#82](/heat/%2Bbug/1496277/comments/82) |
| --- | --- | --- | --- |

@Zane is it just the Juno and Icehouse backports that are incomplete?

If so, then ignore my above comment. They're outside of VMT support scope now AFAIK.

@Zane is it just the Juno and Icehouse backports that are incomplete?
If so, then ignore my above comment. They're outside of VMT support scope now AFAIK.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Zane Bitter (zaneb)](https://launchpad.net/~zaneb) wrote on 2016-02-26: |  |  | [#83](/heat/%2Bbug/1496277/comments/83) |
| --- | --- | --- | --- |

Correct, it was just Juno and Icehouse that had incomplete fixes, and it was also my understanding that the VMT does not make any attempt to support those. The Kilo and Liberty fixes are complete as originally merged.

Correct, it was just Juno and Icehouse that had incomplete fixes, and it was also my understanding that the VMT does not make any attempt to support those. The Kilo and Liberty fixes are complete as originally merged.

Revision history for this message
![](/+icing/build/overlay/assets/skins/sam/images/close.gif)

| [Thierry Carrez (ttx)](https://launchpad.net/~ttx) wrote on 2016-03-03:  [**Fix included in openstack/heat 6.0.0.0b3**](/heat/%2Bbug/1496277/comments/84) |  |  | [#84](/heat/%2Bbug/1496277/comments/84) |
| --- | --- | --- | --- |

This issue was fixed in the openstack/heat 6.0.0.0b3 development milestone.

This issue was fixed in the openstack/heat 6.0.0.0b3 development milestone.

[See full activity log](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Bactivity)

To post a comment you must [log in](%2Blogin?comments=all).

* [Report a bug](/heat/%2Bfilebug)

This report contains
**Public Security**
information

Everyone can see this security related information.

You are
[not directly subscribed to this bug's notifications.](/heat/%2Bbug/1496277/%2Bsubscribe)

Subscribing...

* [Edit bug mail](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Bsubscriptions "View and change your subscriptions to this bug")

## Other bug subscribers

[Subscribe someone else](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Baddsubscriber "Launchpad will email that person whenever this bugs changes")

## Patches

* [Restrict template file access to /etc/heat/templates/](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4466489/%2Bfiles/0001-Restrict-template-file-access-to-etc-heat-templates.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4466489 "Change patch details")
* [Restrict template file access to /etc/heat/templates/](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4466501/%2Bfiles/0001-Restrict-template-file-access-to-etc-heat-templates.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4466501 "Change patch details")
* [load-files-from-correct-source.patch](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4525484/%2Bfiles/load-files-from-correct-source.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4525484 "Change patch details")
* [Updated patch for git am](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4532176/%2Bfiles/load-files-from-correct-source-2.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4532176 "Change patch details")
* [Final patch for master](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4548273/%2Bfiles/bug1496277-master.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4548273 "Change patch details")
* [Final patch for Liberty](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4548274/%2Bfiles/bug1496277-liberty.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4548274 "Change patch details")
* [Final patch for Kilo](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4548275/%2Bfiles/bug1496277-kilo.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4548275 "Change patch details")
* [Juno patch (updated)](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4580996/%2Bfiles/bug1496277-juno.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4580996 "Change patch details")
* [Icehouse patch (updated)](https://bugs.launchpad.net/heat/%2Bbug/1496277/%2Battachment/4580997/%2Bfiles/bug1496277-icehouse.patch)
  [Edit](/heat/%2Bbug/1496277/%2Battachment/4580997 "Change patch details")

* [Add patch](/heat/%2Bbug/1496277/%2Baddcomment?field.patch=on)

## Remote bug watches

Bug watches keep track of this bug in other bug trackers.

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from rhn.redhat.com_cf725bd5_20250124_141511.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2016:0266 - Security Advisory

Issued:
2016-02-18
Updated:
2016-02-18
# RHSA-2016:0266 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Moderate: openstack-heat bug fix and security advisory

## Type/Severity

Security Advisory: Moderate

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2016%3A0266)

## Topic

Updated openstack-heat packages that fix one security issue and resolve
various bugs are now available for Red Hat Enterprise Linux OpenStack
Platform 7.0 (Kilo) for RHEL 7.

Red Hat Product Security has rated this update as having Moderate security
impact. Common Vulnerability Scoring System (CVSS) base scores, which give
detailed severity ratings, are available for each vulnerability from the
CVE links in the References section.

## Description

OpenStack Orchestration (heat) is a template-driven engine used to specify
and deploy configurations for Compute, Storage, and OpenStack Networking.

A vulnerability was discovered in the OpenStack Orchestration
service (heat), where a specially formatted template could be used to
trick the heat-engine service into opening a local file. Although the
file contents are never disclosed to the end user, an OpenStack-
authenticated attacker could use this flaw to cause a denial of service
or determine whether a given file name is present on the server.
(CVE-2015-5295)

This issue was discovered by Steven Hardy of Red Hat.

This update has the following known issue:

* By default, the number of created heat-engine workers match the number of

cores on the undercloud. However, if there is only one core, there is only
one heat-engine worker, and this causes deadlocks when creating the
overcloud stack. A single heat-engine worker is not enough to launch an
overcloud stack. Workaround: The undercloud must have at least two
(virtual) cores. For virtual deployments, this should be two vCPUs,
regardless of cores on the baremetal host. Otherwise, you can uncomment the
num\_engine\_workers line in /etc/heat/heat.conf, and restart openstack-
heat-engine. (BZ#1290949)

This update also fixes the following bugs:

* When a stack update fails, Orchestration stores a merged environment

file. Previously, with an interrupted update, the merged environment file
was not written, any resources already created that had new type aliases in
the environment could not have their types resolved, and the failed stack
could not be updated. This patch now catches any exceptions that occur, and
ensures that the stack can now be updated. (BZ#1290950)

* Previously, stack updates resulted in an OS::Neutron::Port resource

being replaced when the property values were changed in the following
ways:

* The network property referred to the same network, but by name instead

of UUID, or by UUID instead of name.

* Specifying the network using the 'network' property instead of the

deprecated 'network\_id' property, or using the deprecated 'network\_id'
 property instead of the network property.
This issue has been resolved. (BZ#1291845)

* This update resolves an issue that caused the deployment of Orchestration

templates to fail during resource validation. Network IDs are now correctly
identified. (BZ#1292152)

* Previously, using the Orchestration API actions > check call removed

output values from the existing stack (using either CLI or dashboard). This
broke stack updates and other operations depending on stack output values
after operation execution. This issue has been resolved. (BZ#1299257)

* Upgrades of overclouds from Red Hat Enterprise Linux OpenStack

Platform 7.2 to 7.3 failed with the error
"resources.SwiftDevicesAndProxyConfig: Property
controller\_swift\_proxy\_memcaches\_v6 not assigned". This issue has been
resolved. (BZ#1300847)

* Previously, when resource metadata was requested from Orchestration, all

attribute values were fetched, even though this data was not returned by
the API. This meant at least one pointless ReST API call to the OpenStack
service, and "404 Not Found" messages accumulated in both heat-engine and
nova-api logs. With this update, Orchestration no longer calculates
attribute values when only the metadata for a resource is requested.
(BZ#1304854)

* Previously, the "heat-manage purge\_delete" cron job on the undercloud

failed when attempting to purge the raw\_template table. This patch fixes
the raw\_template purge query on MySQL, and handles stack tags before
removing stacks which resolves the issue and also removes some race
conditions where incorrect data was being deleted.(BZ#1306444)

## Solution

Before applying this update, ensure all previously released errata relevant
to your system have been applied.

Red Hat Enterprise Linux OpenStack Platform 7 runs on Red Hat Enterprise
Linux 7.2.

The Red Hat Enterprise Linux OpenStack Platform 7 Release Notes contain the
following:

* An explanation of the way in which the provided components interact to

form a working cloud computing environment.

* Technology Previews, Recommended Practices, and Known Issues.
* The channels required for Red Hat Enterprise Linux OpenStack Platform 7,

including which channels need to be enabled and disabled.

The Release Notes are available at:
<https://access.redhat.com/documentation/en/red-hat-enterprise-linux-openstack-platform/version-7/red-hat-enterprise-linux-openstack-platform-7-release-notes/release-notes>

This update is available through 'yum update' on systems registered through
Red Hat Subscription Manager. For more information about Red Hat
Subscription Manager, see:

<https://access.redhat.com/documentation/en-US/Red_Hat_Subscription_Management/1/html/RHSM/index.html>

## Affected Products

* Red Hat OpenStack 7 x86\_64

## Fixes

* [BZ - 1280094](https://bugzilla.redhat.com/show_bug.cgi?id=1280094)
  - Uncaught exceptions can leave stacks hanging UPDATE\_IN\_PROGRESS
* [BZ - 1288207](https://bugzilla.redhat.com/show_bug.cgi?id=1288207)
  - Heat is unable to delete stack's resources if a 'port' name is given to a resource and not a UUID.
* [BZ - 1290949](https://bugzilla.redhat.com/show_bug.cgi?id=1290949)
  - rhel-osp-director: re-ran the deployment command: "Stack failed with status: resources.Controller: MessagingTimeout: resources[0]: Timed out waiting for a reply to message ID 863d0fbc6ce24cd288074d901d1a6e64 ERROR: openstack Heat Stack update failed."
* [BZ - 1290950](https://bugzilla.redhat.com/show_bug.cgi?id=1290950)
  - rhel-osp-director: update 7.0->7.2 and 7.2 >7.3 fails StackValidationFailed: Unknown resource Type : OS::TripleO::NodeTLSCAData (\*include-password or export HEAT\_INCLUDE\_PASSWORD=1)
* [BZ - 1291845](https://bugzilla.redhat.com/show_bug.cgi?id=1291845)
  - when not using network isolation, after an update from GA to latest release the apis try to reach the old public\_virtual\_ip
* [BZ - 1292152](https://bugzilla.redhat.com/show_bug.cgi?id=1292152)
  - Heat template fails in validation started with OSP7
* [BZ - 1298295](https://bugzilla.redhat.com/show_bug.cgi?id=1298295)
  - CVE-2015-5295 openstack-heat: Vulnerability in Heat template validation leading to DoS
* [BZ - 1299257](https://bugzilla.redhat.com/show_bug.cgi?id=1299257)
  - heat API: actions->check removes stack output values.
* [BZ - 1299613](https://bugzilla.redhat.com/show_bug.cgi?id=1299613)
  - rhel-osp-director: Scale-up Ceph from 1 to 3 fails, when Overcloud is deployed with SSL (resources.EndpointMap: Timed out) .
* [BZ - 1300847](https://bugzilla.redhat.com/show_bug.cgi?id=1300847)
  - rhel-osp-director: Overcloud update from 7.2-> 7.3 fails "resources.SwiftDevicesAndProxyConfig: Property controller\_swift\_proxy\_memcaches\_v6 not assigned "
* [BZ - 1302828](https://bugzilla.redhat.com/show_bug.cgi?id=1302828)
  - Hooks can remain set after a stack operation is stopped
* [BZ - 1304854](https://bugzilla.redhat.com/show_bug.cgi?id=1304854)
  - Metadata polling unnecessarily calls Nova
* [BZ - 1304935](https://bugzilla.redhat.com/show_bug.cgi?id=1304935)
  - Heat logs gigabytes of boring, worthless stuff
* [BZ - 1306444](https://bugzilla.redhat.com/show_bug.cgi?id=1306444)
  - DB Purge of raw\_template fails on constraint from resources.current\_template\_id

## CVEs

* [CVE-2015-5295](https://www.redhat.com/security/data/cve/CVE-2015-5295.html)

## References

* <http://www.redhat.com/security/updates/classification/#normal>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat OpenStack 7

| SRPM | |
| --- | --- |
| openstack-heat-2015.1.2-9.el7ost.src.rpm | SHA-256: 06d0f71ead920b700b1c527349689f849d622a210ed801709a4d527cfac24f5d |
| x86\_64 | |
| openstack-heat-api-2015.1.2-9.el7ost.noarch.rpm | SHA-256: 758b66408f43ff5569d2babeb86922e23c27af4f322b87046c151c9d2508685b |
| openstack-heat-api-cfn-2015.1.2-9.el7ost.noarch.rpm | SHA-256: bbd5fd9a3ccd6ae91812da9665cb522b687a10ba621f32f51fc173ab4e1406f9 |
| openstack-heat-api-cloudwatch-2015.1.2-9.el7ost.noarch.rpm | SHA-256: bdc3eb5c56c230a2fd9c809fb3ae456f428717fa1c82b81a6195cf777ff7592a |
| openstack-heat-common-2015.1.2-9.el7ost.noarch.rpm | SHA-256: 0ab9a9387b0e35690e5ac9446fc50b55f7ba175ff5dcdc7ab91fc75e31a86ccc |
| openstack-heat-engine-2015.1.2-9.el7ost.noarch.rpm | SHA-256: 6c5f72b2d3cb64d1801b0dcddca6e892a73e0b4f99ecd6fc689a590ad2c684f9 |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from review.openstack.org_b1aa09e6_20250126_013036.html ===




=== Content from launchpad.net_358978c3_20250126_013039.html ===

[Log in / Register](https://launchpad.net/~hudson-openstack/%2Blogin)

[![](/@@/person-logo)](https://launchpad.net/~hudson-openstack)

## [OpenStack Infra](https://launchpad.net/~hudson-openstack)

* Overview
* [Code](https://code.launchpad.net/~hudson-openstack)
* [Bugs](https://bugs.launchpad.net/~hudson-openstack)
* [Blueprints](https://blueprints.launchpad.net/~hudson-openstack)
* [Translations](https://translations.launchpad.net/~hudson-openstack)
* [Answers](https://answers.launchpad.net/~hudson-openstack)

* [Related packages](https://launchpad.net/~hudson-openstack/%2Brelated-packages)
* [Related projects](https://launchpad.net/~hudson-openstack/%2Brelated-projects)

## User information

Launchpad Id:
hudson-openstack

Email:
[Log in](%2Blogin) for email information.

Member since:
2010-07-14

[![Icon of Burrow](https://launchpadlibrarian.net/67728214/os14.png "Member of Burrow")](/~burrow)
[![Icon of Citrix OpenStack development team](https://launchpadlibrarian.net/64472709/Citrix%2014.png "Member of Citrix OpenStack development team")](/~citrix-openstack)
[![Icon of (deprecated) OpenStack PPA maintainers](https://launchpadlibrarian.net/87891894/ppa.gif "Member of (deprecated) OpenStack PPA maintainers")](/~openstack-ppa)
[![Icon of Designate Core](https://launchpadlibrarian.net/360468328/designate_14.jpg "Member of Designate Core")](/~designate-core)
[![Icon of Designate Drivers](https://launchpadlibrarian.net/360468067/designate_14.jpg "Member of Designate Drivers")](/~designate-drivers)
[![Icon of MidoNet Bugs](https://launchpadlibrarian.net/228074955/midonet_14x14.png "Member of MidoNet Bugs")](/~midonet-bugs)
[![Icon of Nova Bug Team](https://launchpadlibrarian.net/108832444/bug.gif "Member of Nova Bug Team")](/~nova-bugs)
[![Icon of Nova](https://launchpadlibrarian.net/52560219/os14.png "Member of Nova")](/~nova)
[![Icon of OpenStack Team](https://launchpadlibrarian.net/52313052/os14.png "Member of OpenStack Team")](/~openstack)

Languages:

English

OpenPGP keys:

72571ACC301E6FE900837F5CDF85501232EE128C

SSH keys:

[hudson@hudson](%2Bsshkeys)

[jenkins@vpcslave](%2Bsshkeys)

Time zone:

UTC
(UTC+0000)

Karma:
[6535](https://launchpad.net/~hudson-openstack/%2Bkarma)
[Karma help](/%2Bhelp-registry/karma.html)

## [All memberships](https://launchpad.net/~hudson-openstack/%2Bparticipation) Latest memberships

| [Compute Hyper-V Bugs](/~compute-hyperv-bugs)  Joined on 2019-08-28 | |
| --- | --- |
| [OS-Win Bugs](/~os-win-bugs)  Joined on 2019-08-28 | |
| [Networking Hyper-V Bugs](/~networking-hyperv-bugs)  Joined on 2019-08-28 | |
| [kolla-drivers](/~kolla-drivers)  Joined on 2019-05-20 | |
| [fixtures-git-bugs](/~fixtures-git-bugs)  Joined on 2018-03-25 | |

## [Recent activities](https://launchpad.net/~hudson-openstack/%2Bkarma) Most active in

| [StarlingX](/starlingx) |  |
| --- | --- |
| [kolla-ansible](/kolla-ansible) |  |
| [kolla](/kolla) |  |
| [kayobe](/kayobe) |  |
| [OpenStack Compute (nova)](/nova) |  |

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))



=== Content from bugzilla.redhat.com_bff73249_20250126_013046.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1306444)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1306444)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1306444)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1306444

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1306444**](show_bug.cgi?id=1306444)
- DB Purge of raw\_template fails on constraint from resources.current\_template\_id

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
DB Purge of raw\_template fails on constraint from resources.current\_template\_id

| | [Keywords](describekeywords.cgi): | ZStream | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Red Hat OpenStack | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Red Hat | | [Component:](describecomponents.cgi?product=Red Hat OpenStack "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | openstack-heat | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | 7.0 (Kilo) | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Unspecified | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | z4 | | [Target Release](page.cgi?id=fields.html#target_release): | 7.0 (Kilo) | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Crag Wolfe | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Amit Ugol | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") | [1310890](show_bug.cgi?id=1310890 "CLOSED ERRATA - DB Purge of raw_template fails on constraint from resources.current_template_id") | | TreeView+ | [depends on](buglist.cgi?bug_id=1306444&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1306444&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2016-02-10 21:37 UTC by Crag Wolfe | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2022-07-09 08:13 UTC ([History](show_activity.cgi?id=1306444)) | | [CC List:](page.cgi?id=fields.html#cclist) | 7 users (show)  mburns rhel-osp-director-maint sbaker shardy ssainkar yeylon zbitter | | Fixed In Version: | openstack-heat-2015.1.2-9.el7ost | | | Doc Type: | Bug Fix | | | Doc Text: | Previously, the "heat-manage purge\_delete" cron job on the undercloud failed when attempting to purge the raw\_template table. This patch fixes raw\_template purge query on MySQL, and handles stack tags before removing stacks which resolves the issue. This also removes a bunch of race conditions where incorrect data was being deleted. | | | Clone Of: |  | | | Clones: | [1310890](show_bug.cgi?id=1310890 "CLOSED ERRATA - DB Purge of raw_template fails on constraint from resources.current_template_id")  ([view as bug list](buglist.cgi?bug_id=1310890)) | | | Environment: |  | | | Last Closed: | 2016-02-18 16:43:40 UTC | | | Target Upstream Version: |  | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | |    Links | System | ID | Private | Priority | Status | Summary | Last Updated | | OpenStack gerrit | [278466](https://review.opendev.org/278466) | 0 | None | MERGED | Fix database purge query | 2020-11-12 14:44:28 UTC | | Red Hat Issue Tracker | [OSP-16732](https://issues.redhat.com/browse/OSP-16732) | 0 | None | None | None | 2022-07-09 08:13:44 UTC | | Red Hat Product Errata | [RHSA-2016:0266](https://access.redhat.com/errata/RHSA-2016%3A0266) | 0 | normal | SHIPPED\_LIVE | Moderate: openstack-heat bug fix and security advisory | 2016-02-18 21:41:02 UTC | |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1306444#c0)  Crag Wolfe    2016-02-10 21:37:43 UTC  ``` Description of problem:  The "heat-manage purge_delete" cron job on the undercloud fails when attempting to purge the raw_template table.  Version-Release number of selected component (if applicable): openstack-heat-common-2015.1.2-4.el7ost.noarch  How reproducible: Not clear.  Steps to Reproduce: 1. Run /bin/heat-manage purge_deleted manually  Actual results: A stack trace and the raw_template table is left un-purged.  Expected results: A purged raw_template table.   ```  [Comment 2](show_bug.cgi?id=1306444#c2)  Zane Bitter    2016-02-11 17:53:48 UTC  ``` Since DB migrations convergence were introduced in Kilo, we've been storing a reference to the raw_template for each resource in the current_template_id column of the resource table. It appears that prior to the fix for [https://bugs.launchpad.net/heat/+bug/1524387](https://bugs.launchpad.net/heat/%2Bbug/1524387) we were deleting too many raw_template entries - i.e. ones that might have been referenced by prev_raw_template_id in a stack, or current_template_id in a resource, resulting in this error:  ERROR: (_mysql_exceptions.IntegrityError) (1451, 'Cannot delete or update a parent row: a foreign key constraint fails (`heat`.`resource`, CONSTRAINT `current_template_fkey_ref` FOREIGN KEY (`current_template_id`) REFERENCES `raw_template` (`id`))') [SQL: u'DELETE FROM raw_template WHERE raw_template.id NOT IN (SELECT stack.raw_template_id \nFROM stack)']  The patch avoids deleting raw_template entries that are still referenced by prev_raw_template_id, but that field is not actually populated in Kilo (it was also introduced for convergence, although we also use it for other purposes in the legacy code path in Liberty). So it's unlikely this is having an effect.  I think the real reason it appears to work is that it now cleans up only raw_templates from the stacks that it had just deleted... and in this case all of the old *stacks* had already been removed by the previous command (which later failed attempting to clean up non-orphaned raw_templates). So we'll never be able to clean up those templates with this code.   ```  [Comment 3](show_bug.cgi?id=1306444#c3)  Zane Bitter    2016-02-11 18:04:52 UTC  ``` That said, the fact that we were trying to clean up all non-referenced raw_templates (not just the ones that were previously referenced by the stacks we just deleted) and doing an inadequate check for existing references was probably the reason for the error in the first place. So the check to only delete raw_templates associated with the stacks we just removed is probably a correct fix. But this at least explains why none of the old raw_templates were actually removed when purge_deleted was run with the patch, even though there was no more error.   ```  [Comment 5](show_bug.cgi?id=1306444#c5)  Amit Ugol    2016-02-16 10:29:54 UTC  ``` no issues running it manually now.   ```  [Comment 7](show_bug.cgi?id=1306444#c7)  errata-xmlrpc    2016-02-18 16:43:40 UTC  ``` Since the problem described in this bug report should be resolved in a recent advisory, it has been closed with a resolution of ERRATA.  For information on the advisory, and where to find the updated files, follow the link below.  If the solution does not work for you, open a new bug report.  <https://rhn.redhat.com/errata/RHSA-2016-0266.html>   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1306444&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)



=== Content from www.oracle.com_1aa3bc48_20250124_141512.html ===


* [Skip to content](#maincontent)
* [Accessibility Policy](https://www.oracle.com/corporate/accessibility/)

Products
Industries
Resources
Customers
Partners
Developers
Company

Close Search

Search Oracle.com

* QUICK LINKS
* [Oracle Cloud Infrastructure](/cloud/)
* [Oracle Fusion Cloud Applications](/applications/)
* [Oracle Database](/database/technologies/)
* [Download Java](/java/technologies/downloads/)
* [Careers at Oracle](/careers/)

Search

[Country
![]()](/countries-list.html#countries)

View Accounts

Back
Cloud Account
[Sign in to Cloud](/cloud/sign-in.html)
[Sign Up for Free Cloud Tier](/cloud/free/)

Oracle Account

* [Sign-In](https://www.oracle.com/webapps/redirect/signon?nexturl=)
* [Create an Account](https://profile.oracle.com/myprofile/account/create-account.jspx)

* [Help](/corporate/contact/help.html)
* Sign Out

[Contact Sales](/corporate/contact/ "Contact Sales")

[Menu

Menu](/global-menu-v2/)

* [Security Alerts](/security-alerts/)

# Oracle Solaris Third Party Bulletin - April 2016

## Oracle Solaris Third Party Bulletin - April 2016

### Description

The Oracle Solaris Third Party Bulletin announces patches for one or more security vulnerabilities fixed in third party software that is included in Oracle Solaris distributions. Starting January 20, 2015, Third Party Bulletins are released on the same day when Oracle Critical Patch Updates are released. These bulletins will also be updated on the Tuesday closest to the 17th of the following two months after their release (i.e. the two months between the normal quarterly Critical Patch Update publication dates). In addition, Third Party Bulletins may also be updated for vulnerability fixes deemed too critical to wait for the next monthly update.

**Due to the threat posed by a successful attack, Oracle strongly recommends that customers apply Third Party Bulletin fixes as soon as possible.**

### Patch Availability

Please see My Oracle Support Note [1448883.1](https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=98356520554156&id=1448883.1)

### Third Party Bulletin Schedule

Third Party Bulletins are released on the Tuesday closest to the 17th day of January, April, July and October. The next four dates are:

* 19 July 2016
* 18 October 2016
* 17 January 2017
* 18 April 2017

### References

* Oracle Critical Patch Updates and Security Alerts main page  [ [Oracle Technology Network](/security-alerts/) ]
* Oracle Critical Patch Updates and Security Alerts - Frequently Asked Questions [ [CPU FAQ](/security-alerts/cpufaq.html) ]
* Risk Matrix definitions   [ [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html) ]
* Use of Common Vulnerability Scoring System (CVSS) by Oracle   [ [Oracle CVSS Scoring](/security-alerts/cvssscoringsystem.html) ]

### Modification History

| 2017-October-16 | Rev 8. Added 11.3 as Supported Versions Affected for CVE-2016-2108 |
| --- | --- |
| 2016-September-21 | Rev 7. Added new CVEs fixed via Firefox upgrade |
| 2016-July-08 | Rev 6. Added NTP CVEs |
| 2016-June-27 | Rev 5. Added OpenSSL CVE-2016-2177, CVE-2016-2178 |
| 2016-June-20 | Rev 4. Added all CVEs fixed in Solaris 11.3 SRU9.4 |
| 2016-June-10 | Rev 3. Added OpenSSL CVEs |
| 2016-May-31 | Rev 2. Added all CVEs fixed in Solaris 11.3 SRU8.7 |
| 2016-April-19 | Rev 1. Initial Release |

### Oracle Solaris Executive Summary

This Third Party Bulletin contains 53 new security fixes for the Oracle Solaris.  41 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password.

### Oracle Solaris Risk Matrix

#### Revision 7: Published on 2016-09-21

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2014-1545 | Solaris | Multiple | Firefox | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3 | See Note 13 |

#### Revision 6: Published on 2016-07-08

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-1548 | Solaris | NTP | NTP | Yes | 6.4 | Network | Low | None | None | Partial | Partial | 11.3, 10 | See Note 11 |
| CVE-2016-4957 | Solaris | NTP | NTP | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4956 | Solaris | NTP | NTP | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4953 | Solaris | NTP | NTP | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4954 | Solaris | NTP | NTP | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4955 | Solaris | NTP | NTP | Yes | 2.6 | Network | High | None | None | None | Partial | 11.3, 10 |  |

#### Revision 5: Published on 2016-06-27

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-2177 | Solaris | SSL/TLS | OpenSSL | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.3, 10 |  |
| CVE-2016-2178 | Solaris | SSL/TLS | OpenSSL | No | 2.1 | Local | Low | None | Partial | None | None | 11.3, 10 |  |

#### Revision 4: Published on 2016-06-20

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2015-2806 | Solaris | Multiple | GNU Libtasn1 | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3 |  |
| CVE-2014-9679 | Solaris | Multiple | Common Unix Printing System (CUPS) | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-8786 | Solaris | Multiple | RabbitMQ | No | 6.8 | Network | Low | Single | None | None | Complete | 11.3 |  |
| CVE-2015-7546 | Solaris | Multiple | OpenStack Identity (Keystone) | No | 6.0 | Network | Medium | Single | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-5295 | Solaris | Multiple | OpenStack Orchestration API (Heat) | No | 5.5 | Network | Low | Single | Partial | None | Partial | 11.3 |  |
| CVE-2016-3115 | Solaris | SSH | OpenSSH | No | 5.5 | Network | Low | Single | Partial | Partial | None | 11.3 |  |
| CVE-2015-5223 | Solaris | Multiple | OpenStack Object Storage (Swift) | Yes | 5.0 | Network | Low | None | Partial | None | None | 11.3 |  |
| CVE-2016-0738 | Solaris | Multiple | OpenStack Object Storage (Swift) | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3 | See Note 8 |
| CVE-2015-8853 | Solaris | Multiple | Perl | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3 |  |
| CVE-2015-8665 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 |  |
| CVE-2015-8683 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 |  |
| CVE-2015-8781 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 | See Note 9 |
| CVE-2015-1547 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 | See Note 10 |
| CVE-2016-2512 | Solaris | Multiple | Django Python web framework | Yes | 4.3 | Network | Medium | None | None | Partial | None | 11.3 |  |
| CVE-2016-4085 | Solaris | Multiple | Wireshark | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 | See Note 12 |
| CVE-2016-2513 | Solaris | Multiple | Django Python web framework | Yes | 2.6 | Network | High | None | Partial | None | None | 11.3 |  |

#### Revision 3: Published on 2016-06-10

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-2108 | Solaris | SSL/TLS | OpenSSL | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3, 10 |  |
| CVE-2016-2109 | Solaris | SSL/TLS | OpenSSL | Yes | 7.8 | Network | Low | None | None | None | Complete | 11.3, 10 |  |
| CVE-2016-2176 | Solaris | SSL/TLS | OpenSSL | Yes | 6.4 | Network | Low | None | Partial | None | Partial | 11.3, 10 |  |
| CVE-2016-2105 | Solaris | SSL/TLS | OpenSSL | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-2106 | Solaris | SSL/TLS | OpenSSL | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-2107 | Solaris | SSL/TLS | OpenSSL | Yes | 2.6 | Network | High | None | Partial | None | None | 11.3, 10 | See Note 7 |

#### Revision 2: Published on 2016-05-31

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-2315 | Solaris | Multiple | Git | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3 | See Note 5 |
| CVE-2016-2342 | Solaris | Multiple | Quagga | Yes | 7.6 | Network | High | None | Complete | Complete | Complete | 11.3 |  |
| CVE-2015-7545 | Solaris | Multiple | Git | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-2695 | Solaris | Kerberos | Kerberos | Yes | 7.1 | Network | Medium | None | None | None | Complete | 11.3 |  |
| CVE-2015-2697 | Solaris | Kerberos | Kerberos | No | 6.8 | Network | Low | Single | None | None | Complete | 11.3 |  |
| CVE-2016-3068 | Solaris | Multiple | Mercurial source code management | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3 | See Note 4 |
| CVE-2016-3115 | Solaris | SSH | SSH | No | 5.5 | Network | Low | Single | Partial | Partial | None | 11.3, 10 |  |
| CVE-2014-3566 | Solaris | SSL | Evolution | Yes | 5.0 | Network | Low | None | Partial | None | None | 11.3 |  |
| CVE-2015-7551 | Solaris | None | Ruby | No | 4.6 | Local | Low | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-8629 | Solaris | Kerberos | Kerberos | No | 2.1 | Network | High | Single | Partial | None | None | 11.3, 10 |  |

#### Revision 1: Published on 2016-04-19

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-0705 | Solaris | SSL/TLS | OpenSSL | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3, 10 |  |
| CVE-2016-0799 | Solaris | SSL/TLS | WanBoot | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 10 | See Note 1 |
| CVE-2016-0798 | Solaris | SSL/TLS | OpenSSL | Yes | 7.8 | Network | Low | None | None | None | Complete | 11.3, 10 |  |
| CVE-2015-3415 | Solaris | Multiple | SQLite3 | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.3, 10 | See Note 3 |
| CVE-2015-5602 | Solaris | None | Sudo | No | 7.2 | Local | Low | None | Complete | Complete | Complete | 11.3, 10 |  |
| CVE-2015-4752 | Solaris | None | MySQL | No | 7.2 | Local | Low | None | Complete | Complete | Complete | 11.3 | See Note 2 |
| CVE-2016-2523 | Solaris | Multiple | Wireshark | Yes | 7.1 | Network | Medium | None | None | None | Complete | 11.3 |  |
| CVE-2016-1283 | Solaris | Multiple | PCRE | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2014-9766 | Solaris | Multiple | X.Org | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3, 10 |  |
| CVE-2015-3885 | Solaris | Multiple | Dcraw | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 |  |
| CVE-2007-6720 | Solaris | Multiple | Libmikmod | Yes | 2.6 | Network | High | None | None | None | Partial | 11.3 |  |
| CVE-2016-0702 | Solaris | None | OpenSSL | No | 1.9 | Local | Medium | None | Partial | None | None | 11.3, 10 | See Note 6 |

#### Notes:

1. This fix also addresses CVE-2016-0703 CVE-2016-0704 CVE-2016-0797 CVE-2016-0800.
2. This fix also addresses CVE-2014-6464 CVE-2014-6469 CVE-2014-6491 CVE-2014-6494 CVE-2014-6500 CVE-2014-6507 CVE-2014-6555 CVE-2014-6559 CVE-2014-6568 CVE-2015-0374 CVE-2015-0382 CVE-2015-0411 CVE-2015-0432 CVE-2015-0433 CVE-2015-0499 CVE-2015-0505 CVE-2015-2568 CVE-2015-2571 CVE-2015-2573 CVE-2015-2582 CVE-2015-2620 CVE-2015-2643 CVE-2015-2648 CVE-2015-4737 CVE-2015-4792 CVE-2015-4802 CVE-2015-4807 CVE-2015-4815 CVE-2015-4816 CVE-2015-4819 CVE-2015-4826 CVE-2015-4830 CVE-2015-4836 CVE-2015-4858 CVE-2015-4861 CVE-2015-4864 CVE-2015-4870 CVE-2015-4879 CVE-2015-4913 CVE-2015-7744 CVE-2016-0505 CVE-2016-0546 CVE-2016-0596 CVE-2016-0597 CVE-2016-0598 CVE-2016-0600 CVE-2016-0606 CVE-2016-0608 CVE-2016-0609 CVE-2016-0616.
3. This fix also addresses CVE-2015-3414 CVE-2015-3416.
4. This fix also addresses CVE-2016-3069 CVE-2016-3630.
5. This fix also addresses CVE-2016-2324.
6. This fix also addresses CVE-2016-0702 CVE-2016-0797 CVE-2016-0799.
7. This fix also addresses CVE-2016-2106 CVE-2016-2107 CVE-2016-2108 CVE-2016-2109 CVE-2016-2176.
8. This fix also addresses CVE-2016-0737.
9. This fix also addresses CVE-2015-8782 CVE-2015-8783.
10. This fix also addresses CVE-2015-8784.
11. This fix also addresses CVE-2016-1551 CVE-2016-1549 CVE-2016-2516 CVE-2016-2517 CVE-2016-2518 CVE-2016-2519 CVE-2016-1547 CVE-2015-7704 CVE-2015-8138 CVE-2016-1550.
12. This fix also addresses CVE-2016-4085.
13. This fix also addresses CVE-2013-5609 CVE-2013-5610 CVE-2013-5611 CVE-2013-5612 CVE-2013-5613 CVE-2013-5614 CVE-2013-5615 CVE-2013-5616 CVE-2013-5618 CVE-2013-5619 CVE-2013-6629 CVE-2013-6630 CVE-2013-6671 CVE-2013-6672 CVE-2013-6673 CVE-2014-1477 CVE-2014-1478 CVE-2014-1479 CVE-2014-1480 CVE-2014-1481 CVE-2014-1482 CVE-2014-1483 CVE-2014-1484 CVE-2014-1485 CVE-2014-1486 CVE-2014-1487 CVE-2014-1488 CVE-2014-1489 CVE-2014-1493 CVE-2014-1494 CVE-2014-1496 CVE-2014-1497 CVE-2014-1498 CVE-2014-1499 CVE-2014-1500 CVE-2014-1501 CVE-2014-1502 CVE-2014-1504 CVE-2014-1505 CVE-2014-1506 CVE-2014-1507 CVE-2014-1508 CVE-2014-1509 CVE-2014-1510 CVE-2014-1511 CVE-2014-1512 CVE-2014-1513 CVE-2014-1514 CVE-2014-1518 CVE-2014-1519 CVE-2014-1520 CVE-2014-1522 CVE-2014-1523 CVE-2014-1524 CVE-2014-1525 CVE-2014-1526 CVE-2014-1527 CVE-2014-1528 CVE-2014-1529 CVE-2014-1530 CVE-2014-1531 CVE-2014-1532 CVE-2014-1533 CVE-2014-1534 CVE-2014-1536 CVE-2014-1537 CVE-2014-1538 CVE-2014-1539 CVE-2014-1540 CVE-2014-1541 CVE-2014-1542 CVE-2014-1543 CVE-2014-1544 CVE-2014-1547 CVE-2014-1548 CVE-2014-1549 CVE-2014-1550 CVE-2014-1551 CVE-2014-1552 CVE-2014-1553 CVE-2014-1554 CVE-2014-1555 CVE-2014-1556 CVE-2014-1557 CVE-2014-1559 CVE-2014-1561 CVE-2014-1562 CVE-2014-1563 CVE-2014-1564 CVE-2014-1565 CVE-2014-1566 CVE-2014-1567 CVE-2014-1568 CVE-2014-1569 CVE-2014-1575 CVE-2014-1580 CVE-2014-1582 CVE-2014-1584 CVE-2014-1588 CVE-2014-1589 CVE-2014-1591 CVE-2014-1595 CVE-2014-2018 CVE-2014-8631 CVE-2014-8632 CVE-2014-8635 CVE-2014-8636 CVE-2014-8637 CVE-2014-8640 CVE-2014-8642 CVE-2014-8643 CVE-2015-0797 CVE-2015-0798 CVE-2015-0799 CVE-2015-0800 CVE-2015-0802 CVE-2015-0803 CVE-2015-0804 CVE-2015-0805 CVE-2015-0806 CVE-2015-0808 CVE-2015-0810 CVE-2015-0811 CVE-2015-0812 CVE-2015-0814 CVE-2015-0819 CVE-2015-0820 CVE-2015-0821 CVE-2015-0823 CVE-2015-0824 CVE-2015-0825 CVE-2015-0826 CVE-2015-0828 CVE-2015-0829 CVE-2015-0830 CVE-2015-0832 CVE-2015-0833 CVE-2015-0834 CVE-2015-0835 CVE-2015-2706 CVE-2015-2708 CVE-2015-2709 CVE-2015-2710 CVE-2015-2711 CVE-2015-2712 CVE-2015-2713 CVE-2015-2714 CVE-2015-2715 CVE-2015-2716 CVE-2015-2717 CVE-2015-2718 CVE-2015-2720 CVE-2015-2721 CVE-2015-2722 CVE-2015-2724 CVE-2015-2725 CVE-2015-2726 CVE-2015-2727 CVE-2015-2728 CVE-2015-2729 CVE-2015-2730 CVE-2015-2731 CVE-2015-2733 CVE-2015-2734 CVE-2015-2735 CVE-2015-2736 CVE-2015-2737 CVE-2015-2738 CVE-2015-2739 CVE-2015-2740 CVE-2015-2741 CVE-2015-2742 CVE-2015-2743 CVE-2015-4473 CVE-2015-4474 CVE-2015-4475 CVE-2015-4476 CVE-2015-4477 CVE-2015-4478 CVE-2015-4479 CVE-2015-4480 CVE-2015-4481 CVE-2015-4482 CVE-2015-4483 CVE-2015-4484 CVE-2015-4485 CVE-2015-4486 CVE-2015-4487 CVE-2015-4488 CVE-2015-4489 CVE-2015-4490 CVE-2015-4491 CVE-2015-4492 CVE-2015-4493 CVE-2015-4495 CVE-2015-4496 CVE-2015-4497 CVE-2015-4498 CVE-2015-4500 CVE-2015-4501 CVE-2015-4502 CVE-2015-4503 CVE-2015-4504 CVE-2015-4505 CVE-2015-4506 CVE-2015-4507 CVE-2015-4508 CVE-2015-4509 CVE-2015-4510 CVE-2015-4511 CVE-2015-4512 CVE-2015-4513 CVE-2015-4514 CVE-2015-4515 CVE-2015-4516 CVE-2015-4517 CVE-2015-4518 CVE-2015-4519 CVE-2015-4520 CVE-2015-4521 CVE-2015-4522 CVE-2015-7174 CVE-2015-7175 CVE-2015-7176 CVE-2015-7177 CVE-2015-7178 CVE-2015-7179 CVE-2015-7180 CVE-2015-7181 CVE-2015-7182 CVE-2015-7183 CVE-2015-7184 CVE-2015-7185 CVE-2015-7186 CVE-2015-7187 CVE-2015-7188 CVE-2015-7189 CVE-2015-7190 CVE-2015-7191 CVE-2015-7192 CVE-2015-7193 CVE-2015-7194 CVE-2015-7195 CVE-2015-7196 CVE-2015-7197 CVE-2015-7198 CVE-2015-7199 CVE-2015-7200.

Resources for

* [Careers](/careers/)
* [Developers](/developer/)
* [Investors](https://investor.oracle.com/home/default.aspx)
* [Partners](/partner/)
* [Researchers](/research/)
* [Students and Educators](https://academy.oracle.com/en/oa-web-overview.html)

Why Oracle

* [Analyst Reports](/corporate/analyst-reports/)
* [Best cloud-based
  ERP](/erp/what-is-erp/best-erp/)
* [Cloud Economics](/cloud/economics/)
* [Social Impact](/social-impact/)
* [Culture and Inclusion](/careers/diversity-inclusion/)
* [Security Practices](/corporate/security-practices/)

Learn

* [What is cloud
  computing?](/cloud/what-is-cloud-computing/)
* [What is CRM?](/cx/what-is-crm/)
* [What is
  Docker?](/cloud/cloud-native/container-registry/what-is-docker/)
* [What is
  Kubernetes?](/cloud/cloud-native/kubernetes-engine/what-is-kubernetes/)
* [What is
  Python?](/developer/what-is-python-for-developers/)
* [What is SaaS?](/applications/what-is-saas/)

News and Events

* [News](/news/)
* [Oracle CloudWorld](/cloudworld/)
* [Oracle CloudWorld Tour](/cloudworld-tour/)
* [Oracle Health Summit](/health/health-summit/)
* [Oracle Dev Tour](/developer/dev-tour/)
* [Search all events](https://search.oracle.com/events?q=&lang=english)

Contact Us

* US Sales: +1.800.633.0738
* [How can we help?](/corporate/contact/)
* [Subscribe to emails](https://go.oracle.com/subscribe/?l_code=en&src1=OW:O:FO)
* [Integrity Helpline](https://secure.ethicspoint.com/domain/media/en/gui/31053/index.html)
* [Accessibility](/corporate/accessibility/)

---

* [Country/Region](/universal-menu/#u10countrymenu)

* [© 2025 Oracle](/legal/copyright/)
* [Privacy](/legal/privacy/)/[Do Not Sell My
  Info](/legal/privacy/privacy-choices/)
* [Ad
  Choices](/legal/privacy/privacy-policy/#adchoices)
* [Careers](/corporate/careers/)



=== Content from review.openstack.org_915ac205_20250126_013036.html ===




=== Content from translations.launchpad.net_6e40f344_20250126_013039.html ===

[Log in / Register](https://translations.launchpad.net/heat/%2Blogin)

[![](https://launchpadlibrarian.net/313195013/Heat_mascot_64.png)](https://launchpad.net/heat)

## [OpenStack Heat](https://launchpad.net/heat)

* [Overview](https://launchpad.net/heat)
* [Code](https://code.launchpad.net/heat)
* [Bugs](https://bugs.launchpad.net/heat)
* [Blueprints](https://blueprints.launchpad.net/heat)
* Translations
* [Answers](https://answers.launchpad.net/heat)

# Translation overview

[Help for translations](https://help.launchpad.net/Translations)

**OpenStack Heat does not translate its
messages.**

[![Launchpad](/@@/launchpad-footer-logo.svg)](https://launchpad.net/)
 •
[Take the tour](https://launchpad.net/%2Btour)
 •
[Read the guide](https://help.launchpad.net/)

© 2004
[Canonical Ltd.](http://canonical.com/)
 •
[Terms of use](https://launchpad.net/legal)
 •
[Data privacy](https://www.ubuntu.com/legal/dataprivacy)
 •
[Contact Launchpad Support](/feedback)
 •
[Blog](http://blog.launchpad.net/)
 •
[Careers](https://canonical.com/careers)
 •
[System status](https://ubuntu.social/%40launchpadstatus)
 •
4d55102
([Get the code!](https://dev.launchpad.net/))


