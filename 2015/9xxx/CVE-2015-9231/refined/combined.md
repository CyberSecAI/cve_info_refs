=== Content from gitlab.com_963fa086_20250124_203005.html ===


[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# Post-mortem for DNS lookups issue

Follow up on [#6050 (closed)](/gnachman/iterm2/-/issues/6050 "Please disable 'Perform DNS lookups to check if URLs are valid?' by default"):

First of all, thanks for the fast response to [#6050 (closed)](/gnachman/iterm2/-/issues/6050 "Please disable 'Perform DNS lookups to check if URLs are valid?' by default") and owning up to the mistake. It's unfortunately rare for someone to step up and say "I messed up" these. I've been an iTerm user for years and really appreciate the work that goes into keeping the project moving forward, so I hope this situation hasn't made you want to quit.

Now that the problem is fixed, I think it would be worthwhile to do a post-mortem. My hope is that this will benefit both the iTerm project and other projects whose maintainers are keeping an eye on this situation. [dnslookupissue](https://gitlab.com/gnachman/iterm2/wikis/dnslookupissue) on the wiki begins this process.

A few questions I think are worth addressing:

1. Why did [#3688 (closed)](https://gitlab.com/gnachman/iterm2/issues/3688 "Smart selection is issuing dns requests") and [#5303 (closed)](https://gitlab.com/gnachman/iterm2/issues/5303 "undesirable domain lookup behavior") go unnoticed by the community? Both issues were addressed but didn't blow up the way this one did.
2. What steps can be taken to make sure this (or similarly significant issues) doesn't happen in the future?
3. What can the community do to help when something like this does happen? I've heard a lot of yelling about how we should all uninstall iTerm, but that's just silly and not helpful. What else can we do?

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.



=== Content from gitlab.com_a89907de_20250124_203002.html ===


[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# Smart selection is issuing dns requests

I use the `openssl rand -base64 10` command to generate passwords. When I double click to select stdout, and hold the Cmd key to copy it to clipboard, a DNS query is issued for any string before a `/` character.

I removed all Smart Selection rules, but the behavior persists (as can be seen with `tshark -Y "dns"` or `tcpdump "udp port 53"` or equivalent.

I would like to turn off the smart selection behavior, or at least stop it from issuing dns requests for what it thinks are hostnames.

The version of iTerm2 you are running
Built from HEAD (git clone <https://github.com/gnachman/iTerm2> && xcodebuild)

This issue is not present in version 2.0 or 2.1.1 available for download from iterm2.com.

OS version
$ sw\_vers
ProductName: Mac OS X
ProductVersion: 10.10.4
BuildVersion: 14E46

A copy of ~/Library/Preferences/com.googlecode.iterm2.plist is attached.
[iterm2.txt](https://gitlab.com/gnachman/iterm2/uploads/7dbdf4b40cd68c23058395af08d9c076/iterm2.txt)

A debug log is attached.
[debug.txt](https://gitlab.com/gnachman/iterm2/uploads/9cfb85cdb4563bf4d4c7b35f8642b672/debug.txt)

Thank you!

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.



=== Content from github.com_ba39af8b_20250124_203001.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgnachman%2FiTerm2%2Fcommit%2F33ccaf61e34ef32ffc9d6b2be5dd218f6bb55f51)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgnachman%2FiTerm2%2Fcommit%2F33ccaf61e34ef32ffc9d6b2be5dd218f6bb55f51)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=gnachman%2FiTerm2)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gnachman](/gnachman)
/
**[iTerm2](/gnachman/iTerm2)**
Public

* [Notifications](/login?return_to=%2Fgnachman%2FiTerm2) You must be signed in to change notification settings
* [Fork
  1.2k](/login?return_to=%2Fgnachman%2FiTerm2)
* [Star
   15.6k](/login?return_to=%2Fgnachman%2FiTerm2)

* [Code](/gnachman/iTerm2)
* [Pull requests
  30](/gnachman/iTerm2/pulls)
* [Actions](/gnachman/iTerm2/actions)
* [Projects
  0](/gnachman/iTerm2/projects)
* [Wiki](/gnachman/iTerm2/wiki)
* [Security](/gnachman/iTerm2/security)
* [Insights](/gnachman/iTerm2/pulse)

Additional navigation options

* [Code](/gnachman/iTerm2)
* [Pull requests](/gnachman/iTerm2/pulls)
* [Actions](/gnachman/iTerm2/actions)
* [Projects](/gnachman/iTerm2/projects)
* [Wiki](/gnachman/iTerm2/wiki)
* [Security](/gnachman/iTerm2/security)
* [Insights](/gnachman/iTerm2/pulse)

## Commit

[Permalink](/gnachman/iTerm2/commit/33ccaf61e34ef32ffc9d6b2be5dd218f6bb55f51)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Fist swipe at removing DNS code

[Browse files](/gnachman/iTerm2/tree/33ccaf61e34ef32ffc9d6b2be5dd218f6bb55f51)
Browse the repository at this point in the history

* Loading branch information

[![@gnachman](https://avatars.githubusercontent.com/u/427546?s=40&v=4)](/gnachman)

[gnachman](/gnachman/iTerm2/commits?author=gnachman "View all commits by gnachman")
committed
Sep 20, 2017

1 parent
[9eed17c](/gnachman/iTerm2/commit/9eed17c4871032d2fa2cc19734820d1755fa72eb)

commit 33ccaf6

 Show file tree

 Hide file tree

Showing
**8 changed files**
with
**3 additions**
and
**226 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* iTerm2.xcodeproj

  + iTerm2.xcodeproj/project.pbxproj
    [project.pbxproj](#diff-7fa2fc9b63f71fe7f335bae45b51552bd951bcb0c7383536ff6cd48ad0457238)
* sources

  + sources/AsyncHostLookupController.h
    [AsyncHostLookupController.h](#diff-0da904d26cd079a00ac05071822754edbc713794afb84ffce717177681f55df3)
  + sources/AsyncHostLookupController.m
    [AsyncHostLookupController.m](#diff-ebc3c3720def21cac93daf49b149bf8384cd9880b58fd6aa6ac07f0d5cc53ad0)
  + sources/PTYTextView.m
    [PTYTextView.m](#diff-2985bbe4cec8ec19873227a223584d353ed9b5b350df721c15510e232c753d05)
  + sources/iTermAdvancedSettingsModel.h
    [iTermAdvancedSettingsModel.h](#diff-be678784e17d5b875319508cfa284c1b17eb90a55abe9ab6746cbbf58fbc847a)
  + sources/iTermAdvancedSettingsModel.m
    [iTermAdvancedSettingsModel.m](#diff-d4ed9a9d630432f9c782a5279af01cc55a52b7c921c165a7f4a482ff3ac929fd)
  + sources/iTermTextDrawingHelper.h
    [iTermTextDrawingHelper.h](#diff-3b861fbb61c850e3e96907fe54f37cb3ad6ddf19034c7caf09f33f4b6f27ce72)
  + sources/iTermTextDrawingHelper.m
    [iTermTextDrawingHelper.m](#diff-5118286e27b4b3e67fc95940e477fdf9a4611fa4519497219e2582156efa93a2)

## There are no files selected for viewing

10 changes: 0 additions & 10 deletions

10
[iTerm2.xcodeproj/project.pbxproj](#diff-7fa2fc9b63f71fe7f335bae45b51552bd951bcb0c7383536ff6cd48ad0457238 "iTerm2.xcodeproj/project.pbxproj")

Show comments

[View file](/gnachman/iTerm2/blob/33ccaf61e34ef32ffc9d6b2be5dd218f6bb55f51/iTerm2.xcodeproj/project.pbxproj)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -630,7 +630,6 @@ |
|  |  | 1D6C4D5A122329F000E0AA3E /\* ColorPresets.plist in Resources \*/ = {isa = PBXBuildFile; fileRef = 1D6C4D59122329F000E0AA3E /\* ColorPresets.plist \*/; }; |
|  |  | 1D6C50A71226EEFB00E0AA3E /\* ProfileListView.h in Headers \*/ = {isa = PBXBuildFile; fileRef = 1D6C50A51226EEFB00E0AA3E /\* ProfileListView.h \*/; }; |
|  |  | 1D6ED85619AEA20D005A7799 /\* URLAction.h in Headers \*/ = {isa = PBXBuildFile; fileRef = A6CFDAD0185D2587005DC94B /\* URLAction.h \*/; }; |
|  |  | 1D6ED85719AEA20D005A7799 /\* AsyncHostLookupController.h in Headers \*/ = {isa = PBXBuildFile; fileRef = A6CFDAD5185D53C2005DC94B /\* AsyncHostLookupController.h \*/; }; |
|  |  | 1D6ED85819AEA20D005A7799 /\* LineBufferPosition.h in Headers \*/ = {isa = PBXBuildFile; fileRef = 1D78B55C183EE1C000014D49 /\* LineBufferPosition.h \*/; }; |
|  |  | 1D6ED85919AEA20D005A7799 /\* FindContext.h in Headers \*/ = {isa = PBXBuildFile; fileRef = 1D53FD13181C4B4B00524D4F /\* FindContext.h \*/; }; |
|  |  | 1D6ED85A19AEA20D005A7799 /\* ProfilesTerminalPreferencesViewController.h in Headers \*/ = {isa = PBXBuildFile; fileRef = A6A2698D1900F95D00437DA9 /\* ProfilesTerminalPreferencesViewController.h \*/; }; |
| Expand Down  Expand Up | | @@ -2017,7 +2016,6 @@ |
|  |  | A6C763011B45C52B00E3C992 /\* TransferrableFileMenuItemViewController.m in Sources \*/ = {isa = PBXBuildFile; fileRef = A68A30D9186D1429007F550F /\* TransferrableFileMenuItemViewController.m \*/; }; |
|  |  | A6C763021B45C52B00E3C992 /\* VT100RemoteHost.m in Sources \*/ = {isa = PBXBuildFile; fileRef = A68A30DA186D1429007F550F /\* VT100RemoteHost.m \*/; }; |
|  |  | A6C763031B45C52B00E3C992 /\* VT100WorkingDirectory.m in Sources \*/ = {isa = PBXBuildFile; fileRef = A68A30DB186D1429007F550F /\* VT100WorkingDirectory.m \*/; }; |
|  |  | A6C763051B45C52B00E3C992 /\* AsyncHostLookupController.m in Sources \*/ = {isa = PBXBuildFile; fileRef = A6CFDAD6185D53C2005DC94B /\* AsyncHostLookupController.m \*/; }; |
|  |  | A6C763061B45C52B00E3C992 /\* BackgroundThread.m in Sources \*/ = {isa = PBXBuildFile; fileRef = 1DA26ABF15007507004B5792 /\* BackgroundThread.m \*/; }; |
|  |  | A6C763071B45C52B00E3C992 /\* CapturedOutput.m in Sources \*/ = {isa = PBXBuildFile; fileRef = A67F57D31B11882900B4F135 /\* CapturedOutput.m \*/; }; |
|  |  | A6C763091B45C52B00E3C992 /\* iTermCommandHistoryCommandUseMO+Addtions.m in Sources \*/ = {isa = PBXBuildFile; fileRef = A6E7474C188C6394005355CF /\* iTermCommandHistoryCommandUseMO+Addtions.m \*/; }; |
| Expand Down  Expand Up | | @@ -2317,7 +2315,6 @@ |
|  |  | A6CEDA6119988A7300BB57EC /\* LogoShadow.png in Resources \*/ = {isa = PBXBuildFile; fileRef = A6CEDA5E19988A7300BB57EC /\* LogoShadow.png \*/; }; |
|  |  | A6CEDA6219988A7300BB57EC /\* LogoShadow.png in Resources \*/ = {isa = PBXBuildFile; fileRef = A6CEDA5E19988A7300BB57EC /\* LogoShadow.png \*/; }; |
|  |  | A6CFDAD2185D2587005DC94B /\* URLAction.h in Headers \*/ = {isa = PBXBuildFile; fileRef = A6CFDAD0185D2587005DC94B /\* URLAction.h \*/; }; |
|  |  | A6CFDAD7185D53C2005DC94B /\* AsyncHostLookupController.h in Headers \*/ = {isa = PBXBuildFile; fileRef = A6CFDAD5185D53C2005DC94B /\* AsyncHostLookupController.h \*/; }; |
|  |  | A6D22A431BC8BE6B004084E0 /\* Model.xcdatamodeld in Sources \*/ = {isa = PBXBuildFile; fileRef = A6D22A411BC8BE6B004084E0 /\* Model.xcdatamodeld \*/; }; |
|  |  | A6D22A441BC8BE6B004084E0 /\* Model.xcdatamodeld in Sources \*/ = {isa = PBXBuildFile; fileRef = A6D22A411BC8BE6B004084E0 /\* Model.xcdatamodeld \*/; }; |
|  |  | A6D22A451BC8BE6B004084E0 /\* Model.xcdatamodeld in Sources \*/ = {isa = PBXBuildFile; fileRef = A6D22A411BC8BE6B004084E0 /\* Model.xcdatamodeld \*/; }; |
| Expand Down  Expand Up | | @@ -3837,8 +3834,6 @@ |
|  |  | A6CEDA5E19988A7300BB57EC /\* LogoShadow.png \*/ = {isa = PBXFileReference; lastKnownFileType = image.png; name = LogoShadow.png; path = images/LogoParts/LogoShadow.png; sourceTree = "<group>"; }; |
|  |  | A6CFDAD0185D2587005DC94B /\* URLAction.h \*/ = {isa = PBXFileReference; fileEncoding = 4; indentWidth = 4; lastKnownFileType = sourcecode.c.h; path = URLAction.h; sourceTree = "<group>"; tabWidth = 4; }; |
|  |  | A6CFDAD1185D2587005DC94B /\* URLAction.m \*/ = {isa = PBXFileReference; fileEncoding = 4; indentWidth = 4; lastKnownFileType = sourcecode.c.objc; path = URLAction.m; sourceTree = "<group>"; tabWidth = 4; }; |
|  |  | A6CFDAD5185D53C2005DC94B /\* AsyncHostLookupController.h \*/ = {isa = PBXFileReference; fileEncoding = 4; indentWidth = 4; lastKnownFileType = sourcecode.c.h; path = AsyncHostLookupController.h; sourceTree = "<group>"; tabWidth = 4; }; |
|  |  | A6CFDAD6185D53C2005DC94B /\* AsyncHostLookupController.m \*/ = {isa = PBXFileReference; fileEncoding = 4; indentWidth = 4; lastKnownFileType = sourcecode.c.objc; path = AsyncHostLookupController.m; sourceTree = "<group>"; tabWidth = 4; }; |
|  |  | A6D22A421BC8BE6B004084E0 /\* Model.xcdatamodel \*/ = {isa = PBXFileReference; lastKnownFileType = wrapper.xcdatamodel; path = Model.xcdatamodel; sourceTree = "<group>"; }; |
|  |  | A6D22B431BC9D368004084E0 /\* iTermShellHistoryTest.m \*/ = {isa = PBXFileReference; fileEncoding = 4; indentWidth = 4; lastKnownFileType = sourcecode.c.objc; path = iTermShellHistoryTest.m; sourceTree = "<group>"; }; |
|  |  | A6DF401A1897607E00F05947 /\* NSTextField+iTerm.h \*/ = {isa = PBXFileReference; fileEncoding = 4; indentWidth = 4; lastKnownFileType = sourcecode.c.h; path = "NSTextField+iTerm.h"; sourceTree = "<group>"; tabWidth = 4; }; |
| Expand Down  Expand Up | | @@ -4202,7 +4197,6 @@ |
|  |  | A66DB8341C8E4CBB00233E88 /\* iTermOpenQuicklyCommands.h \*/, |
|  |  | A6E7138C18F26A91008D94DD /\* AppearancePreferencesViewController.h \*/, |
|  |  | 1D2560A813EE60E4006B35CD /\* ArrangementPreviewView.h \*/, |
|  |  | A6CFDAD5185D53C2005DC94B /\* AsyncHostLookupController.h \*/, |
|  |  | 1DE214DF128212EE004E3ADF /\* Autocomplete.h \*/, |
|  |  | 1DA26ABE15007507004B5792 /\* BackgroundThread.h \*/, |
|  |  | 1D9DCC0C142D7F5F0016228A /\* BellTrigger.h \*/, |
| Expand Down  Expand Up | | @@ -5630,7 +5624,6 @@ |
|  |  | A6E761631D39D216005C0E5C /\* iTermMutableAttributedStringBuilder.m \*/, |
|  |  | 539325EE1DD66EF100CABCEF /\* iTermPreciseTimer.h \*/, |
|  |  | 539325EF1DD66EF100CABCEF /\* iTermPreciseTimer.m \*/, |
|  |  | A6CFDAD6185D53C2005DC94B /\* AsyncHostLookupController.m \*/, |
|  |  | 1DA26ABF15007507004B5792 /\* BackgroundThread.m \*/, |
|  |  | A67F57D31B11882900B4F135 /\* CapturedOutput.m \*/, |
|  |  | 1D53FD14181C4B4B00524D4F /\* FindContext.m \*/, |
| Expand Down  Expand Up | | @@ -6134,7 +6127,6 @@ |
|  |  | buildActionMask = 2147483647; |
|  |  | files = ( |
|  |  | 1D6ED85619AEA20D005A7799 /\* URLAction.h in Headers \*/, |
|  |  | 1D6ED85719AEA20D005A7799 /\* AsyncHostLookupController.h in Headers \*/, |
|  |  | 1D6ED85819AEA20D005A7799 /\* LineBufferPosition.h in Headers \*/, |
|  |  | 1D6ED85919AEA20D005A7799 /\* FindContext.h in Headers \*/, |
|  |  | 1D6ED85A19AEA20D005A7799 /\* ProfilesTerminalPreferencesViewController.h in Headers \*/, |
| Expand Down  Expand Up | | @@ -6478,7 +6470,6 @@ |
|  |  | buildActionMask = 2147483647; |
|  |  | files = ( |
|  |  | A6CFDAD2185D2587005DC94B /\* URLAction.h in Headers \*/, |
|  |  | A6CFDAD7185D53C2005DC94B /\* AsyncHostLookupController.h in Headers \*/, |
|  |  | 1D78B55E183EE1C000014D49 /\* LineBufferPosition.h in Headers \*/, |
|  |  | A65B72781B2BF2D200F947A7 /\* iTermProfilesPanel.h in Headers \*/, |
|  |  | 1D53FD15181C4B4B00524D4F /\* FindContext.h in Headers \*/, |
| Expand Down  Expand Up | | @@ -8485,7 +8476,6 @@ |
|  |  | A6C7637C1B45C52B00E3C992 /\* ProfilesColorsPreferencesViewController.m in Sources \*/, |
|  |  | A6C763E21B45C6DD00E3C992 /\* PSMTabDragWindow.m in Sources \*/, |
|  |  | A6936B5A1D2F5D1A00521B04 /\* iTermHotkeyPreferencesModel.m in Sources \*/, |
|  |  | A6C763051B45C52B00E3C992 /\* AsyncHostLookupController.m in Sources \*/, |
|  |  | A6C763DA1B45C6DD00E3C992 /\* NSWindow+PSM.m in Sources \*/, |
|  |  | A6C763121B45C52B00E3C992 /\* iTermImageInfo.m in Sources \*/, |
|  |  | A6C7636E1B45C52B00E3C992 /\* iTermPreferences.m in Sources \*/, |
| Expand Down | |  |

25 changes: 0 additions & 25 deletions

25
[sources/AsyncHostLookupController.h](#diff-0da904d26cd079a00ac05071822754edbc713794afb84ffce717177681f55df3 "sources/AsyncHostLookupController.h")

Show comments

[View file](/gnachman/iTerm2/blob/9eed17c4871032d2fa2cc19734820d1755fa72eb/sources/AsyncHostLookupController.h)
Edit file

Delete file

Load diff

This file was deleted.

Oops, something went wrong.

Retry

119 changes: 0 additions & 119 deletions

119
[sources/AsyncHostLookupController.m](#diff-ebc3c3720def21cac93daf49b149bf8384cd9880b58fd6aa6ac07f0d5cc53ad0 "sources/AsyncHostLookupController.m")

Show comments

[View file](/gnachman/iTerm2/blob/9eed17c4871032d2fa2cc19734820d1755fa72eb/sources/AsyncHostLookupController.m)
Edit file

Delete file

Load diff

This file was deleted.

Oops, something went wrong.

Retry

66 changes: 2 additions & 64 deletions

66
[sources/PTYTextView.m](#diff-2985bbe4cec8ec19873227a223584d353ed9b5b350df721c15510e232c753d05 "sources/PTYTextView.m")

Show comments

[View file](/gnachman/iTerm2/blob/33ccaf61e34ef32ffc9d6b2be5dd218f6bb55f51/sources/PTYTextView.m)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,6 +1,5 @@ |
|  |  | #import "PTYTextView.h" |
|  |  |  |
|  |  | #import "AsyncHostLookupController.h" |
|  |  | #import "charmaps.h" |
|  |  | #import "FileTransferManager.h" |
|  |  | #import "FontSizeEstimator.h" |
| Expand Down  Expand Up | | @@ -96,10 +95,6 @@ |
|  |  | static const NSUInteger kRectangularSelectionModifiers = (NSCommandKeyMask | NSAlternateKeyMask); |
|  |  | static const NSUInteger kRectangularSelectionModifierMask = (kRectangularSelectionModifiers | NSControlKeyMask); |
|  |  |  |
|  |  | // Notifications posted when hostname lookups finish. Notifications are used to |
|  |  | // avoid dangling references. |
|  |  | static NSString \*const kHostnameLookupFailed = @"kHostnameLookupFailed"; |
|  |  | static NSString \*const kHostnameLookupSucceeded = @"kHostnameLookupSucceeded"; |
|  |  | static PTYTextView \*gCurrentKeyEventTextView; // See comment in -keyDown: |
|  |  |  |
|  |  | // Minimum distance that the mouse must move before a cmd+drag will be |
| Expand All | | @@ -119,9 +114,6 @@ @interface PTYTextView () < |
|  |  | NSMenuDelegate, |
|  |  | NSPopoverDelegate> |
|  |  |  |
|  |  | // Set the hostname this view is currently waiting for AsyncHostLookupController to finish looking |
|  |  | // up. |
|  |  | @property(nonatomic, copy) NSString \*currentUnderlineHostname; |
|  |  | @property(nonatomic, retain) iTermSelection \*selection; |
|  |  | @property(nonatomic, retain) iTermSemanticHistoryController \*semanticHistoryController; |
|  |  | @property(nonatomic, retain) iTermFindCursorView \*findCursorView; |
| Expand Down  Expand Up | | @@ -309,14 +301,6 @@ - (instancetype)initWithFrame:(NSRect)aRect colorMap:(iTermColorMap \*)colorMap { |
|  |  | selector:@selector(\_pointerSettingsChanged:) |
|  |  | name:kPointerPrefsChangedNotification |
|  |  | object:nil]; |
|  |  | [[NSNotificationCenter defaultCenter] addObserver:self |
|  |  | selector:@selector(hostnameLookupFailed:) |
|  |  | name:kHostnameLookupFailed |
|  |  | object:nil]; |
|  |  | [[NSNotificationCenter defaultCenter] addObserver:self |
|  |  | selector:@selector(hostnameLookupSucceeded:) |
|  |  | name:kHostnameLookupSucceeded |
|  |  | object:nil]; |
|  |  | [[NSNotificationCenter defaultCenter] addObserver:self |
|  |  | selector:@selector(imageDidLoad:) |
|  |  | name:iTermImageDidLoad |
| Expand Down  Expand Up | | @@ -400,10 +384,6 @@ - (void)dealloc { |
|  |  | [threeFingerTapGestureRecognizer\_ disconnectTarget]; |
|  |  | [threeFingerTapGestureRecognizer\_ release]; |
|  |  |  |
|  |  | if (self.currentUnderlineHostname) { |
|  |  | [[AsyncHostLookupController sharedInstance] cancelRequestForHostname:self.currentUnderlineHostname]; |
|  |  | } |
|  |  | [\_currentUnderlineHostname release]; |
|  |  | \_indicatorsHelper.delegate = nil; |
|  |  | [\_indicatorsHelper release]; |
|  |  | \_selectionScrollHelper.delegate = nil; |
| Expand Down  Expand Up | | @@ -1115,7 +1095,6 @@ - (void)drawRect:(NSRect)rect { |
|  |  | // Draw the cursor filled in when we're inactive if there's a popup open or key focus was stolen. |
|  |  | \_drawingHelper.shouldDrawFilledInCursor = ([self.delegate textViewShouldDrawFilledInCursor] || \_keyFocusStolenCount); |
|  |  | \_drawingHelper.isFrontTextView = (self == [[iTermController sharedInstance] frontTextView]); |
|  |  | \_drawingHelper.haveUnderlinedHostname = (self.currentUnderlineHostname != nil); |
|  |  | \_drawingHelper.transparencyAlpha = [self transparencyAlpha]; |
|  |  | \_drawingHelper.now = [NSDate timeIntervalSinceReferenceDate]; |
|  |  | \_drawingHelper.drawMarkIndicators = [\_delegate textViewShouldShowMarkIndicators]; |
| Expand Down  Expand Up | | @@ -1772,10 +1751,6 @@ - (void)removeUnderline { |
|  |  | } |
|  |  | \_drawingHelper.underlinedRange = |
|  |  | VT100GridAbsWindowedRangeMake(VT100GridAbsCoordRangeMake(-1, -1, -1, -1), 0, 0); |
|  |  | if (self.currentUnderlineHostname) { |
|  |  | [[AsyncHostLookupController sharedInstance] cancelRequestForHostname:self.currentUnderlineHostname]; |
|  |  | } |
|  |  | self.currentUnderlineHostname = nil; |
|  |  | [self setNeedsDisplay:YES]; // It would be better to just display the underlined/formerly underlined area. |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -1809,29 +1784,9 @@ - (URLAction \*)updateUnderlinedURLs:(NSEvent \*)event { |
|  |  |  |
|  |  | if (action.actionType == kURLActionOpenURL) { |
|  |  | NSURL \*url = [NSURL URLWithUserSuppliedString:action.string]; |
|  |  | if (![url.host isEqualToString:self.currentUnderlineHostname]) { |
|  |  | if (self.currentUnderlineHostname) { |
|  |  | [[AsyncHostLookupController sharedInstance] cancelRequestForHostname:self.currentUnderlineHostname]; |
|  |  | } |
|  |  | if (url && url.host) { |
|  |  | self.currentUnderlineHostname = url.host; |
|  |  | [[AsyncHostLookupController sharedInstance] getAddressForHost:url.host |
|  |  | completion:^(BOOL ok, NSString \*hostname) { |
|  |  | if (!ok) { |
|  |  | [[NSNotificationCenter defaultCenter] postNotificationName:kHostnameLookupFailed |
|  |  | object:hostname]; |
|  |  | } else { |
|  |  | [[NSNotificationCenter defaultCenter] postNotificationName:kHostnameLookupSucceeded |
|  |  | object:hostname]; |
|  |  | } |
|  |  | }]; |
|  |  | } |
|  |  | if (url && url.host) { |
|  |  | [self setNeedsDisplay:YES]; |
|  |  | } |
|  |  | } else { |
|  |  | if (self.currentUnderlineHostname) { |
|  |  | [[AsyncHostLookupController sharedInstance] cancelRequestForHostname:self.currentUnderlineHostname]; |
|  |  | } |
|  |  | self.currentUnderlineHostname = nil; |
|  |  | } |
|  |  | } else { |
|  |  | [self removeUnderline]; |
| Expand Down  Expand Up | | @@ -6188,23 +6143,6 @@ - (URLAction \*)urlActionForClickAtX:(int)x |
|  |  | }]; |
|  |  | } |
|  |  |  |
|  |  | - (void)hostnameLookupFailed:(NSNotification \*)notification { |
|  |  | if ([[notification object] isEqualToString:self.currentUnderlineHostname]) { |
|  |  | self.currentUnderlineHostname = nil; |
|  |  | [self removeUnderline]; |
|  |  | \_drawingHelper.underlinedRange = |
|  |  | VT100GridAbsWindowedRangeMake(VT100GridAbsCoordRangeMake(-1, -1, -1, -1), 0, 0); |
|  |  | [self setNeedsDisplay:YES]; |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | - (void)hostnameLookupSucceeded:(NSNotification \*)notification { |
|  |  | if ([[notification object] isEqualToString:self.currentUnderlineHostname]) { |
|  |  | self.currentUnderlineHostname = nil; |
|  |  | [self setNeedsDisplay:YES]; |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | - (void)imageDidLoad:(NSNotification \*)notification { |
|  |  | if ([self imageIsVisible:notification.object]) { |
|  |  | [self setNeedsDisplay:YES]; |
| Expand Down | |  |

1 change: 0 additions & 1 deletion

1
[sources/iTermAdvancedSettingsModel.h](#diff-be678784e17d5b875319508cfa284c1b17eb90a55abe9ab6746cbbf58fbc847a "sources/iTermAdvancedSettingsModel.h")

Show comments

[View file](/gnachman/iTerm2/blob/33ccaf61e34ef32ffc9d6b2be5dd218f6bb55f51/sources/iTermAdvancedSettingsModel.h)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -161,7 +161,6 @@ |
|  |  | + (BOOL)useColorfgbgFallback; |
|  |  | + (BOOL)promptForPasteWhenNotAtPrompt; |
|  |  | + (void)setPromptForPasteWhenNotAtPrompt:(BOOL)value; |
|  |  | + (BOOL)performDNSLookups; |
|  |  | + (BOOL)zeroWidthSpaceAdvancesCursor; |
|  |  | + (BOOL)darkThemeHasBlackTitlebar; |
|  |  | + (BOOL)fontChangeAffectsBroadcastingSessions; |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `33ccaf6`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgnachman%2FiTerm2%2Fcommit%2F33ccaf61e34ef32ffc9d6b2be5dd218f6bb55f51) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from news.ycombinator.com_26550006_20250124_203009.html ===


| |  | **[Hacker News](news)** [new](newest) | [past](front) | [comments](newcomments) | <ask> | <show> | <jobs> | <submit> | [login](login?goto=item%3Fid%3D15286956) | | --- | --- | --- | |
| --- | --- | --- | --- |
|
| |  |  | [iTerm2: Please disable 'Perform DNS lookups to check if URLs are valid'](https://gitlab.com/gnachman/iterm2/issues/6050) ([gitlab.com/gnachman](from?site=gitlab.com/gnachman)) | | --- | --- | --- | |  | | 484 points by [grhmc](user?id=grhmc) [on Sept 19, 2017](item?id=15286956)  | [hide](hide?id=15286956&goto=item%3Fid%3D15286956) | [past](https://hn.algolia.com/?query=iTerm2%3A%20Please%20disable%20%27Perform%20DNS%20lookups%20to%20check%20if%20URLs%20are%20valid%27&type=story&dateRange=all&sort=byDate&storyText=false&prefix&page=0) | [favorite](fave?id=15286956&auth=3f97da03b12753c57175568b85e30c802117e987) | [109 comments](item?id=15286956) |  | |  |  | [gnachman](user?id=gnachman) [on Sept 19, 2017](item?id=15288756)   | [next](#15288985) [–]  Given the level of concern, I will change the default and release a new version right away. | | --- | --- | --- | | | --- | --- | --- | --- | | |  |  | [gnachman](user?id=gnachman) [on Sept 19, 2017](item?id=15289089)   | [parent](#15288756) | [next](#15289168) [–]  This is done. A summary of the issue and apology can be found here: <https://gitlab.com/gnachman/iterm2/wikis/dnslookupissue> | | --- | --- | --- | | | |  |  | [yanokwa](user?id=yanokwa) [on Sept 20, 2017](item?id=15291279)   | [root](#15288756) | [parent](#15289089) | [next](#15289499) [–]  Thanks for doing this George! In addition to donating at <https://iterm2.com/donate.html>, what can HN users do to help you with iTerm2? | | --- | --- | --- | | | |  |  | [Exuma](user?id=Exuma) [on Sept 19, 2017](item?id=15289499)   | [root](#15288756) | [parent](#15289089) | [prev](#15291279) | [next](#15289201) [–]  THANK YOU for being so awesome and responding to feedback so quickly. That is a breath of fresh air | | --- | --- | --- | | | |  |  | [zbobet2012](user?id=zbobet2012) [on Sept 19, 2017](item?id=15289201)   | [root](#15288756) | [parent](#15289089) | [prev](#15289499) | [next](#15289914) [–]  Mistakes happen. Quick responses and honest apologies are always appreciated! | | --- | --- | --- | | | |  |  | [k\_sze](user?id=k_sze) [on Sept 20, 2017](item?id=15289914)   | [root](#15288756) | [parent](#15289089) | [prev](#15289201) | [next](#15289593) [–]  Thanks for the quick response. How does this coincide with the 3.1.1 release though? I was still on 3.0.15 and there are new features and other fixes in 3.1.x. Do the new features and the other fixes happen to be reasonably tested and ready already? | | --- | --- | --- | | | |  |  | [gnachman](user?id=gnachman) [on Sept 20, 2017](item?id=15290147)   | [root](#15288756) | [parent](#15289914) | [next](#15289593) [–]  3.1.1 is well tested. Everyone should upgrade. If you find regressions they'll be my highest priority. | | --- | --- | --- | | | |  |  | [dylanz](user?id=dylanz) [on Sept 19, 2017](item?id=15289593)   | [root](#15288756) | [parent](#15289089) | [prev](#15289914) | [next](#15289817) [–]  Thank you for addressing this so quickly. Great find and great response. | | --- | --- | --- | | | |  |  | [Waterluvian](user?id=Waterluvian) [on Sept 20, 2017](item?id=15289817)   | [root](#15288756) | [parent](#15289089) | [prev](#15289593) | [next](#15291546) [–]  I love iterm2. It's like I'm responding to a celebrity. Thanks for making mistakes. | | --- | --- | --- | | | |  |  | [yashap](user?id=yashap) [on Sept 20, 2017](item?id=15291546)   | [root](#15288756) | [parent](#15289089) | [prev](#15289817) | [next](#15291561) [–]  You're awesome, and so is iTerm2. Thanks for the great work! | | --- | --- | --- | | | |  |  | [VeejayRampay](user?id=VeejayRampay) [on Sept 20, 2017](item?id=15291561)   | [root](#15288756) | [parent](#15289089) | [prev](#15291546) | [next](#15290911) [–]  Great reaction and thanks for producing such a great piece of software, it's making my life better everyday. | | --- | --- | --- | | | |  |  | [scubbo](user?id=scubbo) [on Sept 20, 2017](item?id=15290911)   | [root](#15288756) | [parent](#15289089) | [prev](#15291561) | [next](#15289434) [–]  Logging in to HN for the first time in several years to say thank you for your swift and responsible action. | | --- | --- | --- | | | |  |  | [ak217](user?id=ak217) [on Sept 19, 2017](item?id=15289434)   | [root](#15288756) | [parent](#15289089) | [prev](#15290911) | [next](#15291717) [–]  Thank you for building the best terminal app in the world, and for responding to user feedback so quickly. | | --- | --- | --- | | | |  |  | [jorge-d](user?id=jorge-d) [on Sept 20, 2017](item?id=15291717)   | [root](#15288756) | [parent](#15289089) | [prev](#15289434) | [next](#15289485) [–]  Thank you ! iTerm2 is amazing and this quick fix only proves it ! | | --- | --- | --- | | | |  |  | [kahlonel](user?id=kahlonel) [on Sept 19, 2017](item?id=15289485)   | [root](#15288756) | [parent](#15289089) | [prev](#15291717) | [next](#15289184) [–]  iTerm2 is the only terminal I like in every way. Thanks for that. | | --- | --- | --- | | | |  |  | [atombender](user?id=atombender) [on Sept 19, 2017](item?id=15289184)   | [root](#15288756) | [parent](#15289089) | [prev](#15289485) | [next](#15289427) [–]  Thank you. Will you be releasing a new beta, too? | | --- | --- | --- | | | |  |  | [gnachman](user?id=gnachman) [on Sept 19, 2017](item?id=15289268)   | [root](#15288756) | [parent](#15289184) | [next](#15289427) [–]  Yep. I'll put that out tonight. | | --- | --- | --- | | | |  |  | [beager](user?id=beager) [on Sept 19, 2017](item?id=15289427)   | [root](#15288756) | [parent](#15289089) | [prev](#15289184) | [next](#15293217) [–]  Thanks for owning it and thanks for fixing it. Better response than you're likely to get almost anywhere! | | --- | --- | --- | | | |  |  | [m5badger](user?id=m5badger) [on Sept 20, 2017](item?id=15293217)   | [root](#15288756) | [parent](#15289089) | [prev](#15289427) | [next](#15291162) [–]  Fastest fix ever. | | --- | --- | --- | | | |  |  | [puredlx](user?id=puredlx) [on Sept 20, 2017](item?id=15291162)   | [root](#15288756) | [parent](#15289089) | [prev](#15293217) | [next](#15291655) [–]  Awesome, thank you for the swift fix! | | --- | --- | --- | | | |  |  | [trapperkeeper74](user?id=trapperkeeper74) [on Sept 20, 2017](item?id=15291655)   | [root](#15288756) | [parent](#15289089) | [prev](#15291162) | [next](#15291209) [–]  Hooray! | | --- | --- | --- | | | |  |  | [teddyh](user?id=teddyh) [on Sept 20, 2017](item?id=15291209)   | [root](#15288756) | [parent](#15289089) | [prev](#15291655) | [next](#15289168) [–]  Why didn’t you do this two years ago, when the first bug report about this was made? (<https://gitlab.com/gnachman/iterm2/issues/3688>) Or a year ago, when a second report was made? (<https://gitlab.com/gnachman/iterm2/issues/5303>) Note that the first bug report *explicitly mentions* the leaking of passwords. Was it really all about the “*level of concern*”, as you say, and you wouldn’t have changed this without the exposure? | | --- | --- | --- | | | |  |  | [yanokwa](user?id=yanokwa) [on Sept 20, 2017](item?id=15291273)   | [root](#15288756) | [parent](#15291209) | [next](#15292804) [–]  This is a deeply unkind thing to say to someone who donates their free time to provide a public good. George apologized for his oversight and fixed the problem. Take him at his word and thank him. | | --- | --- | --- | | | |  |  | [woof](user?id=woof) [on Sept 20, 2017](item?id=15292282)   | [root](#15288756) | [parent](#15291273) | [next](#15292804) [–]  Please don't call this "oversight". He was (made) aware of the problem and *chose* to keep the default. | | --- | --- | --- | | | |  |  | [nolok](user?id=nolok) [on Sept 20, 2017](item?id=15292804)   | [root](#15288756) | [parent](#15291209) | [prev](#15291273) | [next](#15289168) [–]  Uhh, to be fair both reports were answered with appropriate concerns. First made it sound like a very specific issue for that one user, and was given a way to disable it for him. Second made it sound like an entire class of users would need it off, and an option switch was provided. What do you think is more probable, that he intentionally left that hole open despite not directly benefitting from it, or simply that when he answered both original reports and provided an appropriate solution, he didn't fully think about the details and implications of what those issues meant? Have you really never have a closed issue come back to you "went from bad to worse, abort!“ ? | | --- | --- | --- | | | |  |  | [IMTDb](user?id=IMTDb) [on Sept 19, 2017](item?id=15289168)   | [parent](#15288756) | [prev](#15289089) | [next](#15289145) [–]  Don't beat yourself too much about it. Yes this was a serious security issue from my point of view. BUT to be honest I would probably have done the same mistake and your reaction time was more than adequate. Thanks for the amazing job you are doing on iTerm it's a joy to use. | | --- | --- | --- | | | |  |  | [nmg](user?id=nmg) [on Sept 19, 2017](item?id=15289145)   | [parent](#15288756) | [prev](#15289168) | [next](#15289198) [–]  The first app I download on a fresh OS X install. Thank you for your work and for the professional, well-communicated response. | | --- | --- | --- | | | |  |  | [djm\_](user?id=djm_) [on Sept 19, 2017](item?id=15289198)   | [parent](#15288756) | [prev](#15289145) | [next](#15288838) [–]  Just want to say a personal thank you for your work on it and for the quick response. iterm2 is truly one of those apps I can't believe I get to use for free - thank you. | | --- | --- | --- | | | |  |  | [cmyr](user?id=cmyr) [on Sept 20, 2017](item?id=15289968)   | [root](#15288756) | [parent](#15289198) | [next](#15288838) [–]  While you certainly may use it for free, you also have the option of donating! <https://www.iterm2.com/donate.html> | | --- | --- | --- | | | |  |  | [tuxmascot](user?id=tuxmascot) [on Sept 19, 2017](item?id=15288838)   | [parent](#15288756) | [prev](#15289198) | [next](#15288987) [–]  Thanks for your quick work on this. It's very much appreciated by security minded users of iTerm2. :) | | --- | --- | --- | | | |  |  | [smcleod](user?id=smcleod) [on Sept 19, 2017](item?id=15288987)   | [parent](#15288756) | [prev](#15288838) | [next](#15289265) [–]  Thank you, very much appreciate your response (and continuing excellent work on iterm). | | --- | --- | --- | | | |  |  | [rdtsc](user?id=rdtsc) [on Sept 19, 2017](item?id=15289265)   | [parent](#15288756) | [prev](#15288987) | [next](#15289976) [–]  Thank you for the quick fix, and many thanks for iTerm2, it is really a great piece of software! | | --- | --- | --- | | | |  |  | [k4ch0w](user?id=k4ch0w) [on Sept 20, 2017](item?id=15289976)   | [parent](#15288756) | [prev](#15289265) | [next](#15289617) [–]  Thank you gnachman! Thanks for making my favorite terminal as well. | | --- | --- | --- | | | |  |  | [mrpoptart](user?id=mrpoptart) [on Sept 19, 2017](item?id=15289617)   | [parent](#15288756) | [prev](#15289976) | [next](#15289280) [–]  This kind of response is amazing. Mistakes happen, it's the response and the resolution that matter. I was already a happy user. I am now even moreso. Well done. | | --- | --- | --- | | | |  |  | [arnarbi](user?id=arnarbi) [on Sept 19, 2017](item?id=15289280)   | [parent](#15288756) | [prev](#15289617) | [next](#15290274) [–]  Thank you, well done! | | --- | --- | --- | | | |  |  | [paultopia](user?id=paultopia) [on Sept 20, 2017](item?id=15290274)   | [parent](#15288756) | [prev](#15289280) | [next](#15289326) [–]  this is amazing. good for you! | | --- | --- | --- | | | |  |  | [revmoo](user?id=revmoo) [on Sept 19, 2017](item?id=15289326)   | [parent](#15288756) | [prev](#15290274) | [next](#15288985) [–]  Thank you. | | --- | --- | --- | | | |  |  | [tlb](user?id=tlb) [on Sept 19, 2017](item?id=15288985)   | [prev](#15288756) | [next](#15289666) [–]  It's horrifying to watch your own DNS traffic. All sorts of mysterious domains show up. (On a typical macbook on WiFi, this will do it:) ```    sudo tcpdump -i en0 -s 5000 -n port 53  ``` On mine, these get resolved every 30 seconds (probably some Adobe updater): ```   scss-prod-ue1-notif-39.adobesc.com.  ``` Several servers get lookups of names long enough to be exfiltrating data: ```   r3---sn-nvopjoxu-25ve.gvt1.com.  (Google)   gzunified-ecselast-1isehuisml2g4-663788831.us-east-1.elb.amazonaws.com. (???)   kube-nimbus-471965604.us-west-2.elb.amazonaws.com. (BitDefender)  ``` If you hit a popular commercial site without AdBlock enabled, the list is loooong and sketchy-looking. | | --- | --- | --- | | | |  |  | [exikyut](user?id=exikyut) [on Sept 20, 2017](item?id=15289954)   | [parent](#15288985) | [next](#15291052) [–]  That Google one uses a similar naming scheme to the servers used for video data for YouTube etc. You just made me realize something, though. The Google and AWS examples you gave won't be able to do this, but if you set up wildcard DNS and tell DNS that you have your own nameserver via CNAME aliasing, you could make your software do a lookup for eg something like "bm9ib2R5IHdpbGwgZXZlciBub3RpY2UgaWYgSSB0cmFuc21pdCBkYXRhIGxpa2UgdGhpcyEKCg.example.com" and exfiltrate data via DNS request in the process. The server could then return 127.0.53.53 to mean "ACK; data received OK", whereas NXDOMAIN or any other error would mean to try again. Hmmmmm. Wondering if I should delete this... (I realize this is exactly how the Iodine DNS tunnel works. FWIW, freedns.afraid.org's free options are perfectly capable to get iodine working, I was very pleased to discover.) | | --- | --- | --- | | | |  |  | [cyphar](user?id=cyphar) [on Sept 20, 2017](item?id=15290232)   | [root](#15288985) | [parent](#15289954) | [next](#15290140) [–]  I know several people who use these sorts of techniques to exfiltrate data from a network where you don't have outbound TCP but you can leak information through DNS. As you mentioned, Iodine lets you do this (though by default it tries to use VOID DNS responses that are blocked by a lot of networks). It's pretty cool being able to do an rsync-over-DNS. | | --- | --- | --- | | | |  |  | [exikyut](user?id=exikyut) [on Sept 20, 2017](item?id=15290746)   | [root](#15288985) | [parent](#15290232) | [next](#15290140) [–]  > *VOID DNS responses that are blocked by a lot of networks* For ages I've been meaning to [figure out how to] report this to the iodine dev, but I actually set up iodine specifically to get a working network while I knew I'd briefly be visiting a hospital. I discovered to my amusement that the (public!) hospital's IT infra is *really, really good*; I was trying to SSH directly on top of the iodine tunnel, and while the first few DNS requests associated with the connection setup would work and I'd get as far as getting a shell prompt, but everything would rapidly screech to a halt and jam up pretty much instantly after that; maybe I'd get a single character typed, then it would completely die. I figured I was looking at a remarkably well-put-together leaky-bucket implementation. So I tried hacking usleep()s into likely-looking spots in the code, but that didn't seem to slow it down enough. iodine is a rather *interesting* program internally, and a quick overview while distractedly sitting in a waiting area wasn't entirely sufficient to figure out why I didn't seem to be slowing it down enough to be a problem. Before this "production" test, I previously verified that iodine was working by running the client on an AWS box. IIRC, ping ran over the link for quite some time (less than an hour; many minutes) without a single hitch. On another note, I found that iodine seemed utterly incapable of setting up a correctly-configured tunnel on my Arch (receiving/server) box; I always had to ifconfig the tunnel (I forget exactly) to make it work. Problem with that was, my ifconfig-ing only routed one specific IP address, iodine wanted to give connections their own discrete IPs, and old sessions that locked up would take a while to time out. So I made a gigantic hack-script that would repeatedly kill iodine over and over every 1.5 minutes if it didn't see an authenicated SSH login. Would be nice for everything to just work properly... | | --- | --- | --- | | | |  |  | [emmelaich](user?id=emmelaich) [on Sept 20, 2017](item?id=15290140)   | [root](#15288985) | [parent](#15289954) | [prev](#15290232) | [next](#15291052) [–]  I believe it's common for malware to beacon out with a similar method. | | --- | --- | --- | | | |  |  | [rasz](user?id=rasz) [on Sept 20, 2017](item?id=15296685)   | [root](#15288985) | [parent](#15290140) | [next](#15291052) [–]  and as a bonus fully patched and firewalled Win10 will happily pass DNS traffic thru DNScache daemon without any filtering | | --- | --- | --- | | | |  |  | [Twirrim](user?id=Twirrim) [on Sept 20, 2017](item?id=15291052)   | [parent](#15288985) | [prev](#15289954) | [next](#15289700) [–]  > sudo tcpdump -i en0 -s 5000 -n port 53 It may be better to do it like this: ```     sudo tcpdump -i any -s 0 -n port 53  ``` That way you'll get to see every single DNS query made, and capture everything about it. | | --- | --- | --- | | | |  |  | [contravariant](user?id=contravariant) [on Sept 19, 2017](item?id=15289700)   | [parent](#15288985) | [prev](#15291052) | [next](#15296564) [–]  On the other hand, if even you don't know what the domain corresponds to I suppose that does make it less privacy sensitive. | | --- | --- | --- | | | |  |  | [heartbreak](user?id=heartbreak) [on Sept 19, 2017](item?id=15289735)   | [root](#15288985) | [parent](#15289700) | [next](#15296564) [–]  The primary privacy issue here isn’t the DNS lookup, but the data that was inevitably sent after the resolution. | | --- | --- | --- | | | |  |  | [alanh](user?id=alanh) [on Sept 20, 2017](item?id=15296564)   | [parent](#15288985) | [prev](#15289700) | [next](#15301302) [–]  I woke up in the middle of the night, seized by the realization that this meant that Adobe knows, down to the half-minute resolution, when I am using my computer (to do *anything*). | | --- | --- | --- | | | |  |  | [jetru](user?id=jetru) [on Sept 21, 2017](item?id=15301302)   | [parent](#15288985) | [prev](#15296564) | [next](#15291670) [–]  I've been running this command on my mac for over 10 minutes, trying different stuff, nothing. Also tried "sudo tcpdump -i any -s 0 -n port 53 -v". What's going on? | | --- | --- | --- | | | |  |  | [kalleboo](user?id=kalleboo) [on Sept 20, 2017](item?id=15291670)   | [parent](#15288985) | [prev](#15301302) | [next](#15289360) [–]  Little Snitch is a fun program to run to see what software is connecting to where. So many connections to Google Analytics... | | --- | --- | --- | | | |  |  | [vacri](user?id=vacri) [on Sept 19, 2017](item?id=15289360)   | [parent](#15288985) | [prev](#15291670) | [next](#15289666) [–]  At least with the AWS ELB ones, the names can't be wildcards, so the only information that can be transmitted is info that the other party had set up ahead of time. 'gzunified-ecselast-1isehuisml2g4-663788831' is actually in someone's ELB list somewhere. | | --- | --- | --- | | | |  |  | [toomuchtodo](user?id=toomuchtodo) [on Sept 19, 2017](item?id=15289400)   | [root](#15288985) | [parent](#15289360) | [next](#15289666) [–]  That ELB is part of Bitdefender's infrastructure. EDIT: For those who want to know how to determine that in the future, hit a generic ELB hostname with SSL and you should get the cert mismatch warning back with details. | | --- | --- | --- | | | |  |  | [kator](user?id=kator) [on Sept 19, 2017](item?id=15289666)   | [prev](#15288985) | [next](#15287507) [–]  I hardly go a day without using iTerm2. Don't worry George your responsiveness more than makes up for an honest mistake. To everyone else: I would highly recommend if you make money on a daily basis using iTerm2 that you support his efforts: <https://www.patreon.com/gnachman/posts> Before you ask, yes I'm a patreon for George, his work inspires me. | | --- | --- | --- | | | |  |  | [sgt](user?id=sgt) [on Sept 20, 2017](item?id=15291573)   | [parent](#15289666) | [next](#15289670) [–]  I recently switched back to Terminal.app due to poor performance in iTerm 2. Keystrokes were lagging to the point it got frustrating. Then a few days ago someone pointed out that I should try the iTerm 2 nightly build, and sure enough the lag is gone, so I'm now back on iTerm 2 again. | | --- | --- | --- | | | |  |  | [dawnerd](user?id=dawnerd) [on Sept 19, 2017](item?id=15289670)   | [parent](#15289666) | [prev](#15291573) | [next](#15287507) [–]  I had no idea who was behind the project or that they even had a patreon. Going to chip in now. Thanks | | --- | --- | --- | | | |  |  | [jakobegger](user?id=jakobegger) [on Sept 19, 2017](item?id=15287507)   | [prev](#15289666) | [next](#15289203) [–]  It never ceases to amaze me how otherwise intelligent people think it‘s a good idea to send unencrypted user data to random servers on the internet in the background. | | --- | --- | --- | | | |  |  | [burnte](user?id=burnte) [on Sept 20, 2017](item?id=15291171)   | [parent](#15287507) | [next](#15288280) [–]  Come on, it's doing domain lookups, it's not sending social security numbers to Russia. The amount of hyperbole regarding this misfeature is absurd. It was something that maybe should have been better expressed but this is not some kind of massive security failure. | | --- | --- | --- | | | |  |  | [jakobegger](user?id=jakobegger) [on Sept 20, 2017](item?id=15291484)   | [root](#15287507) | [parent](#15291171) | [next](#15288280) [–]  It doesn’t matter what the code *intends* to do. Sure, looking up strings that look like domains seems harmless. But it means that every string that looks like a domain is transmitted unencrypted over the internet. If your software deals with private user data, you must consider the side effects of every API you are calling. You can’t just transmit data somewhere and hope that everyone will do the right thing. Network traffic is monitored on lots of networks. Unless the data is encrypted and you have reason to trust the receiver, don’t send it. And whatever you do, don’t send private data without user action. Users expect web requests to be made when clicking a link. They do not expect data to be transmitted when hovering the mouse over URLs. | | --- | --- | --- | | | |  |  | [burnte](user?id=burnte) [on Sept 20, 2017](item?id=15295645)   | [root](#15287507) | [parent](#15291484) | [next](#15288280) [–]  It absolutely matters what the code intends to do. If it intends to do a DNS lookup, and does that, that's working properly, eepecially if it's doing an DNS lookup on what its regex says looks like a clickable URL. If it means to store an SSN in an encrypted DB and accidentally writes it to plaintext or sends it to twitter, that's a security flaw. If that same app is following the system standard method of doing DNS resolutions, what else should it do? Are you really suggesting that it should somehow encrypt a DNS lookup? Why should this app be held to a higher standard than every single other application that does DNS lookups? This is the absurdity I'm talking about. I completely agree that one must take into account how that feature fits with your product, user expectations, and privacy, but none of that means a feature that works as intended is a security flaw. As others have said, prefetching pages has been done for years. Checking to see if it's a valid domain isn't an unreasonable feature for iTerm's URL highlighting, and for those who would prefer it not, he's changed that behavior, but let's not pretend that it was some absurd use of data that no one could have reasonably predicted. And lastly, let's also stop clutching our pearls about "transmitting data". IT did a DNS lookup, and while technically that means there was a transmission, it wasn't taking what people traditionally call user data and transmitting it to a foreign third party. It's perfectly reasonable to check a domain name against a DNS server. Maybe unwanted, yes, but not even remotely irrational or irresponsible. | | --- | --- | --- | | | |  |  | [jakobegger](user?id=jakobegger) [on Sept 21, 2017](item?id=15301172)   | [root](#15287507) | [parent](#15295645) | [next](#15288280) [–]  Most major security breaches are not caused by explicit back doors — they are caused by accidental vulnerabilities. If you leak user data accidentally, saying “that wasn’t my intent” doesn’t help much. The important thing that you don’t understand is that there is a difference between a search field / url box, and a Terminal. I absolutely expect my browser to make DNS queries for stuff I paste into the URL box. I don’t expect my terminal emulator to make DNS queries for random strings displayed on screen that happen to match a regex. | | --- | --- | --- | | | |  |  | [burnte](user?id=burnte) [on Sept 21, 2017](item?id=15306793)   | [root](#15287507) | [parent](#15301172) | [next](#15288280) [–]  This wasn't an accident, it deliberately looked up domain looking string against a DNS server. Don't patronize me, going by your twitter picture, I've been at a command shell longer than you've been alive, I damn well know the difference. I also know that doing DNS lookups (the the user's chosen DNS server, rather than some secret one) on domain-name looking data isn't evil or completely unreasonable. He should have made it clear and opt-in rather than opt-out as it was, but by no means was this a vulnerability. If the user can't trust their domain server for domain-like data, they shouldn't use that server. | | --- | --- | --- | | | |  |  | [jakobegger](user?id=jakobegger) [on Sept 22, 2017](item?id=15311968)   | [root](#15287507) | [parent](#15306793) | [next](#15288280) [–]  Let me quote the original issue report on Github: > *What happened: iTerm sent various things (including passwords) in plain text to my ISP's DNS server* iTerm was accidentally transmitting passwords in plain text via the network. I'm pretty sure transmitting passwords in plain text isn't "working as intended". Sure, you can go blame the user for not knowing that iTerm makes DNS queries when you hold down the command key. But if you want to make secure software, you can't just tell the user it's their fault. You need to make sure that accidentally disclosing private information is not something that easily happens. | | --- | --- | --- | | | |  |  | [burnte](user?id=burnte) [on Sept 23, 2017](item?id=15318687)   | [root](#15287507) | [parent](#15311968) | [next](#15288280) [–]  You're purposefully putting intent on software. It didn't send passwords, it sent strings that looked like a domain to a regex. It did not send a message to a DNS server "Hey DNS server, this is a password!" The user happened to want to use that string for a password. | | --- | --- | --- | | | |  |  | [jakobegger](user?id=jakobegger) [on Sept 24, 2017](item?id=15323516)   | [root](#15287507) | [parent](#15318687) | [next](#15288280) [–]  OK, you win. I can’t follow your arguments anymore. I must be too young and unexperienced. | | --- | --- | --- | | | |  |  | [JadeNB](user?id=JadeNB) [on Sept 19, 2017](item?id=15288280)   | [parent](#15287507) | [prev](#15291171) | [next](#15289203) [–]  It makes me scared to be an iTerm2 user, frankly. Because I am an idiot, it never occurred to me that I'd have to wonder about the security implications of my choice of terminal emulator. Does it otherwise have a good reputation for security? | | --- | --- | --- | | | |  |  | [bluedino](user?id=bluedino) [on Sept 20, 2017](item?id=15289975)   | [root](#15287507) | [parent](#15288280) | [next](#15288329) [–]  I used to use it religiously but recently went back to Terminal on my last two Macs and don’t really miss anything | | --- | --- | --- | | | |  |  | [problems](user?id=problems) [on Sept 19, 2017](item?id=15288329)   | [root](#15287507) | [parent](#15288280) | [prev](#15289975) | [next](#15289203) [–]  Just ditch it - clearly the author has no regard for privacy. I cringe just thinking about implementing something like that. | | --- | --- | --- | | | |  |  | [mw6621](user?id=mw6621) [on Sept 19, 2017](item?id=15288360)   | [root](#15287507) | [parent](#15288329) | [next](#15288410) [–]  iTerm2 is great and George is absolutely responsive with any issue I've ever brought up. I am personally going to give him the benefit of the doubt here, I'm sure he'll fix things ASAP. | | --- | --- | --- | | | |  |  | [derimagia](user?id=derimagia) [on Sept 19, 2017](item?id=15289245)   | [root](#15287507) | [parent](#15288360) | [next](#15288410) [–]  Yep was already fixed: <https://gitlab.com/gnachman/iterm2/wikis/dnslookupissue> | | --- | --- | --- | | | |  |  | [0culus](user?id=0culus) [on Sept 19, 2017](item?id=15288410)   | [root](#15287507) | [parent](#15288329) | [prev](#15288360) | [next](#15289972) [–]  I don't think it's worth throwing the baby out with the bathwater. But this should at a minimum be an opt-in feature, and not opt-out. Better yet, it's probably not needed. I've almost never needed to interact with URLs in a clickable way via a terminal. | | --- | --- | --- | | | |  |  | [joosters](user?id=joosters) [on Sept 19, 2017](item?id=15288935)   | [root](#15287507) | [parent](#15288410) | [next](#15288655) [–]  Clickable URLs are very convenient. I have plenty of code that runs on remote machines and generates data that I'd like to view in my browser. Print the URL out, and I can click on it to open it up. n.b. for me, in iTerm2, I have to press cmd to make the links highlight before I can click on them - so there's little danger of accidentally opening something you didn't want to. Doing any DNS before clicking on the links seems like overkill, though. My browser can tell me if the URL is garbage or not. | | --- | --- | --- | | | |  |  | [sametmax](user?id=sametmax) [on Sept 19, 2017](item?id=15288655)   | [root](#15287507) | [parent](#15288410) | [prev](#15288935) | [next](#15289972) [–]  I do but I always know if they are valid before I click on them, so I don't see the appeal of the DNS lookup. Plus that must be freaking slow. | | --- | --- | --- | | | |  |  | [JosephRedfern](user?id=JosephRedfern) [on Sept 19, 2017](item?id=15288885)   | [root](#15287507) | [parent](#15288655) | [next](#15289972) [–]  Not necessarily slow, DNS Lookups are generally pretty fast: ```     ~  dig somerandomurlimadeup.com | grep 'Query time: '     ;; Query time: 23 msec ``` | | --- | --- | --- | | | |  |  | [wumpus](user?id=wumpus) [on Sept 19, 2017](item?id=15289488)   | [root](#15287507) | [parent](#15288885) | [next](#15289972) [–]  Er, that's just saying "you got lucky and the root nameserver you hit was fast". Looking up any valid .com requires that plus a 2nd level lookup. | | --- | --- | --- | | | |  |  | [JosephRedfern](user?id=JosephRedfern) [on Sept 21, 2017](item?id=15301548)   | [root](#15287507) | [parent](#15289488) | [next](#15291178) [–]  I tried on several domain names (that I had not, to my knowledge, recently visited), and they were all around the 25ms mark. I'm not saying that this is the case universally, but for many the typical lookup time will be very fast. | | --- | --- | --- | | | |  |  | [alanh](user?id=alanh) [on Sept 20, 2017](item?id=15291178)   | [root](#15287507) | [parent](#15289488) | [prev](#15301548) | [next](#15289972) [–]  oh wow, what would that make it, 50ms? that's almost enough time to blink! | | --- | --- | --- | | | |  |  | [sametmax](user?id=sametmax) [on Sept 20, 2017](item?id=15293086)   | [root](#15287507) | [parent](#15291178) | [next](#15289972) [–]  Compare to the rest of the operations your terminal do, it's crazy slow though. | | --- | --- | --- | | | |  |  | [exikyut](user?id=exikyut) [on Sept 20, 2017](item?id=15289972)   | [root](#15287507) | [parent](#15288329) | [prev](#15288410) | [next](#15289203) [–]  The author has fixed it, and clearly this has been an educational experience. Considering the professionalness of the rest of the app, I get the impression that the author is likely going to factor security considerations into the picture in a big way in the future. | | --- | --- | --- | | | |  |  | [hannob](user?id=hannob) [on Sept 19, 2017](item?id=15289203)   | [prev](#15287507) | [next](#15289061) [–]  Reminded me immediately about this whatsapp-issue, which is also very problematic: <https://twitter.com/mulander/status/874370124932943874> | | --- | --- | --- | | | |  |  | [exikyut](user?id=exikyut) [on Sept 20, 2017](item?id=15290004)   | [parent](#15289203) | [next](#15289061) [–]  Also affects FB Messenger (scroll down the thread for a while) and Telegram. A WA crash was also presented. Well that was a very interesting thread... | | --- | --- | --- | | | |  |  | [geofft](user?id=geofft) [on Sept 19, 2017](item?id=15289061)   | [prev](#15289203) | [next](#15289152) [–]  One of the nice things about GitLab instead of GitHub is that there isn't a flood of low-information, high-anger comments once a thread makes the HN front page. | | --- | --- | --- | | | |  |  | [davidgerard](user?id=davidgerard) [on Sept 19, 2017](item?id=15289380)   | [parent](#15289061) | [next](#15289152) [–]  No, that's because the server is melting and giving 500 errors ;-) | | --- | --- | --- | | | |  |  | [pishpash](user?id=pishpash) [on Sept 19, 2017](item?id=15289152)   | [prev](#15289061) | [next](#15288711) [–]  What's more interesting to me is that some people are okay with a lookup on click but not a lookup on hover. It seems a difference in affirmative intent exists between hover and click; and more generally perhaps categories of user actions should be formalized into degrees of affirmation that could mitigate errors like this. | | --- | --- | --- | | | |  |  | [justinclift](user?id=justinclift) [on Sept 19, 2017](item?id=15289244)   | [parent](#15289152) | [next](#15288711) [–]  Hovering can be a part of the everyday copy-n-paste action though, for selecting the text to copy. | | --- | --- | --- | | | |  |  | [EnigmaticLion](user?id=EnigmaticLion) [on Sept 20, 2017](item?id=15291188)   | [root](#15289152) | [parent](#15289244) | [next](#15288711) [–]  If i use iTerm's autocopy feature (e.g. that the selected text automatically goes to the clipboard) and rarely press CMD+C then i'm safe? Or should i start changing my passwords? Since i usually generate passwords with `pwgen`, then copy with double click. | | --- | --- | --- | | | |  |  | [justinclift](user?id=justinclift) [on Sept 24, 2017](item?id=15327000)   | [root](#15289152) | [parent](#15291188) | [next](#15288711) [–]  Sorry, no idea personally. I don't use iTerm, I was just pointing out that hovering is a common user action (due to cut-n-paste). :) | | --- | --- | --- | | | |  |  | [csours](user?id=csours) [on Sept 19, 2017](item?id=15288711)   | [prev](#15289152) | [next](#15288768) [–]  Wow, this reminds me of how Cisco routers automatically try to SSH to anything that isn't a recognized command. (I may be mis-remembering part of this) | | --- | --- | --- | | | |  |  | [icedchai](user?id=icedchai) [on Sept 19, 2017](item?id=15289359)   | [parent](#15288711) | [next](#15288768) [–]  I remember it being telnet, not SSH. I started working with Cisco routers in the early 90's, before SSH was even a thing. | | --- | --- | --- | | | |  |  | [csours](user?id=csours) [on Sept 20, 2017](item?id=15290775)   | [root](#15288711) | [parent](#15289359) | [next](#15288768) [–]  Yup, that's right. | | --- | --- | --- | | | |  |  | [JosephRedfern](user?id=JosephRedfern) [on Sept 19, 2017](item?id=15288768)   | [prev](#15288711) | [next](#15288150) [–]  I've submitted a PR to change the default behaviour: <https://github.com/gnachman/iTerm2/pull/332> | | --- | --- | --- | | | |  |  | [JadeNB](user?id=JadeNB) [on Sept 19, 2017](item?id=15288150)   | [prev](#15288768) | [next](#15291554) [–]  Since I didn't see it on a quick skim, it seems that the way to do this is Preferences > Advanced > Semantic history. | | --- | --- | --- | | | |  |  | [chadlavi](user?id=chadlavi) [on Sept 19, 2017](item?id=15288241)   | [parent](#15288150) | [next](#15288541) [–]  Or if you're lazy like me, Preferences > Advanced > type "DNS" (the search field gets autofocus on the Advanced prefs pane). | | --- | --- | --- | | | |  |  | [whoisjohnkid](user?id=whoisjohnkid) [on Sept 19, 2017](item?id=15289054)   | [root](#15288150) | [parent](#15288241) | [next](#15288541) [–]  lol this is exactly what I did. Worked like a charm. | | --- | --- | --- | | | |  |  | [casey\_lang](user?id=casey_lang) [on Sept 19, 2017](item?id=15288541)   | [parent](#15288150) | [prev](#15288241) | [next](#15291554) [–]  Based on this note[1], you can also disable with: Preferences > Pointer > CMD+Click Opens Filename/URL [1]<https://gitlab.com/gnachman/iterm2/issues/3688#note_1665347> | | --- | --- | --- | | | |  |  | [JadeNB](user?id=JadeNB) [on Sept 19, 2017](item?id=15289166)   | [root](#15288150) | [parent](#15288541) | [next](#15291554) [–]  This throws out behaviour that some people find desireable (for example <https://news.ycombinator.com/item?id=15288935> ), whereas it is possible to keep that behaviour without the privacy violations. | | --- | --- | --- | | | |  |  | [NelsonMinar](user?id=NelsonMinar) [on Sept 20, 2017](item?id=15291554)   | [prev](#15288150) | [next](#15301035) [–]  It's a shame DNS traffic isn't at least encrypted. That doesn't solve the whole problem (you're still sending data to a potentially untrusted DNS server) but it'd help a little. | | --- | --- | --- | | | |  |  | [cnst](user?id=cnst) [on Sept 21, 2017](item?id=15301035)   | [prev](#15291554) | [next](#15291242) [–]  CVE-2015-9231 has been assigned to this issue. <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-9231> <https://nvd.nist.gov/vuln/detail/CVE-2015-9231> | | --- | --- | --- | | | |  |  | [\_of](user?id=_of) [on Sept 20, 2017](item?id=15291242)   | [prev](#15301035) | [next](#15289108) [–]  I just upgraded. Is there any way to turn off the new Iterm2-specific MacBook touch-bar buttons? | | --- | --- | --- | | | |  |  | [stiangrindvoll](user?id=stiangrindvoll) [on Sept 19, 2017](item?id=15289108)   | [prev](#15291242) | [next](#15288388) [–]  Makes you wonder how your own port 53 traffic looks like... | | --- | --- | --- | | | |  |  | [clairity](user?id=clairity) [on Sept 19, 2017](item?id=15288388)   | [prev](#15289108) | [next](#15291653) [–]  a local firewall (hands off & little snitch are handy commercial ones for mac) will help you catch these kinds of info leaks (i caught this one a long time ago because of mine). it does come with a time cost however--little popups every time you launch a new application or connect to a new service that you have to evaluate and handle, since you haven't set rules for them already. | | --- | --- | --- | | | |  |  | [duskwuff](user?id=duskwuff) [on Sept 19, 2017](item?id=15288482)   | [parent](#15288388) | [next](#15291653) [–]  A local firewall probably wouldn't have helped here -- the DNS lookups would be performed by mDNSResponder, not by iTerm itself. | | --- | --- | --- | | | |  |  | [clairity](user?id=clairity) [on Sept 19, 2017](item?id=15288769)   | [root](#15288388) | [parent](#15288482) | [next](#15305735) [–]  you might be right about the DNS lookup. but i do distinctly remember getting alerts for this and being annoyed enough to go figure out how to disable the feature in iterm2 (it was at least a couple years ago, so my memory is hazy). maybe someone with more recent experience can clear up the mystery for us. =) | | --- | --- | --- | | | |  |  | [ThisIs\_MyName](user?id=ThisIs_MyName) [on Sept 20, 2017](item?id=15297149)   | [root](#15288388) | [parent](#15288769) | [next](#15305735) [–]  I don't think this "feature" existed a couple of years ago. | | --- | --- | --- | | | |  |  | [clairity](user?id=clairity) [on Sept 21, 2017](item?id=15305735)   | [root](#15288388) | [parent](#15288482) | [prev](#15288769) | [next](#15291653) [–]  i think it was probably link pre-fetch that triggered the firewall rather than a dns lookup. | | --- | --- | --- | | | |  |  | [trapperkeeper74](user?id=trapperkeeper74) [on Sept 20, 2017](item?id=15291653)   | [prev](#15288388) | [next](#15289383) [–]  In general, dnscrypt can help defend against DNS privacy loss for situations like these. | | --- | --- | --- | | | |  |  | [Habbie](user?id=Habbie) [on Sept 20, 2017](item?id=15296818)   | [parent](#15291653) | [next](#15289383) [–]  You said it right - can *help* defend. On the other end of your dnscrypt tunnel, the queries will still go out unencrypted. They will just be harder to correlate to you specifically. | | --- | --- | --- | | | |  |  | [knodi](user?id=knodi) [on Sept 19, 2017](item?id=15289383)   | [prev](#15291653) | [next](#15289576) [–]  Is gitlab throwing a 500 for anyone else? | | --- | --- | --- | | | |  |  | [sytse](user?id=sytse) [on Sept 20, 2017](item?id=15289819)   | [parent](#15289383) | [next](#15289576) [–]  It was but it was fixed, see <https://twitter.com/gitlabstatus/status/910274484992663552> | | --- | --- | --- | | | |  |  | [Azkar](user?id=Azkar) [on Sept 19, 2017](item?id=15289576)   | [prev](#15289383) [–]  Fantastic response. ~4 hours from report to release. | | --- | --- | --- | | | |  |  | [cnst](user?id=cnst) [on Sept 20, 2017](item?id=15290418)   | [parent](#15289576) [–]  4 hours? More like 2 years! And at least 3 separate bug reports, roughly one year apart each! <https://gitlab.com/gnachman/iterm2/issues/3688> <https://gitlab.com/gnachman/iterm2/issues/5303> Unless you are into alternative facts, of course, then, yeah, very prompt release engineering and vulnerability fixing! | | --- | --- | --- | | |
| |  | | --- |   [Consider applying for YC's Spring batch! Applications are open till Feb 11.](https://www.ycombinator.com/apply/) [Guidelines](newsguidelines.html) | [FAQ](newsfaq.html) | [Lists](lists) | [API](https://github.com/HackerNews/API) | [Security](security.html) | [Legal](https://www.ycombinator.com/legal/) | [Apply to YC](https://www.ycombinator.com/apply/) | Contact Search: |



=== Content from gitlab.com_ca5607ce_20250124_203005.html ===


[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# Please disable 'Perform DNS lookups to check if URLs are valid?' by default

Thanks for filing an issue! Please answer the questions below so I can help you.

* iTerm2 version: 3.0.15
* OS version: 10.12.6
* does not seem necessary: Attach ~/Library/Preferences/com.googlecode.iterm2.plist here (drag-drop from finder into this window)
* does not seem necessary: Attach a debug log, if possible. Instructions at <https://iterm2.com/debuglog>
* does not seem necessary: Are you reporting a performance issue or a hang? Please attach a sample. Instructions at <https://gitlab.com/gnachman/iterm2/wikis/HowToSample>
* does not seem necessary: Are you reporting a crash? Please attach the crash log. Instructions at <https://gitlab.com/gnachman/iterm2/wikis/crash-logs>

Detailed steps to reproduce the problem:

1. Install iTerm
2. Hover on things that remotely resemble URLs and touch Cmd
3. Watch iTerm leak things in plain text over DNS

What happened: iTerm sent various things (including passwords) in plain text to my ISP's DNS server

What should have happened: iTerm should not have done that

I monitored my DNS traffic for a while, and I kept noticing lookups that made no sense, for things that had been printed to my terminal. Initially I blamed bash-completion, but when I noticed it also happened for remote ssh sessions, it became obvious that iTerm2 was to blame. A coworker then found [#3688 (closed)](/gnachman/iterm2/-/issues/3688 "Smart selection is issuing dns requests") and [#5303 (closed)](/gnachman/iterm2/-/issues/5303 "undesirable domain lookup behavior"). I immediately disabled this feature.

Having this feature on by default is a terrible security and privacy risk. Please disable it by default. I personally never even noticed the blue vs. white on clickable links, which suggests (n=1) that usability will not be reduced that much by setting this feature disabled by default.

And, to stress the impact, in the act of selecting text and Cmd-C'ing it to Copy, it is very easy to trigger this for passwords (for example, when I generate them using pwgen).

Edited Sep 19, 2017 by [Peter van Dijk](/habbie)

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.



=== Content from gitlab.com_9af6e6aa_20250124_203003.html ===


[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

# undesirable domain lookup behavior

Thanks for filing an issue! Please answer the questions below so I can help you.

* iTerm2 version: Build 3.0.10
* OS version: OS X 10.11.16

Detailed steps to reproduce the problem:

1. Turn on Preferences->Pointer-> ⌘-Click Opens Filename/URL (Semantic History)
2. launch an iterm window, type google.com
3. Holding ⌘ key, highlight google.com text.

What happened:
Once you hover over the url while holding ⌘ key, iterm issues a DNS query for that domain highlighted.

What should have happened:

Domains should not be queried through DNS to determine whether they are highlighted in iTerm. The current behavior can compromise a security analyst or incident responders investigation by querying a URL unintentionally while in iterm. Often hackers/attackers monitor their attacking infrastructure for such investigators and these types of queries coming from a targets network.

While the user experience will be less than ideal, attempting to follow a URL in iterm which does not resolve is no fault of iterm, and could even introduce unexplained behavior when a bad domain name does not become "clickable".

Thanks for considering this request.

Assignee
Loading

Time tracking
Loading

Confidentiality

Confidentiality controls have moved to the issue actions menu () at the top of the page.



=== Content from gitlab.com_c50b08c1_20250124_203007.html ===


[Skip to content](#content-body)
GitLab

* Menu

  + [Why GitLab](https://about.gitlab.com/why-gitlab)
  + [Pricing](https://about.gitlab.com/pricing)
  + [Contact Sales](https://about.gitlab.com/sales)
  + [Explore](/explore)
* [Why GitLab](https://about.gitlab.com/why-gitlab)
* [Pricing](https://about.gitlab.com/pricing)
* [Contact Sales](https://about.gitlab.com/sales)
* [Explore](/explore)

* [Sign in](/users/sign_in?redirect_to_referer=yes)
* [Get free trial](/users/sign_up)

## Pages

55



=== Content from github.com_f2c766db_20250124_203001.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgnachman%2FiTerm2%2Fcommit%2Fe4eb1063529deb575b75b396138d41554428d522)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgnachman%2FiTerm2%2Fcommit%2Fe4eb1063529deb575b75b396138d41554428d522)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=gnachman%2FiTerm2)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[gnachman](/gnachman)
/
**[iTerm2](/gnachman/iTerm2)**
Public

* [Notifications](/login?return_to=%2Fgnachman%2FiTerm2) You must be signed in to change notification settings
* [Fork
  1.2k](/login?return_to=%2Fgnachman%2FiTerm2)
* [Star
   15.6k](/login?return_to=%2Fgnachman%2FiTerm2)

* [Code](/gnachman/iTerm2)
* [Pull requests
  30](/gnachman/iTerm2/pulls)
* [Actions](/gnachman/iTerm2/actions)
* [Projects
  0](/gnachman/iTerm2/projects)
* [Wiki](/gnachman/iTerm2/wiki)
* [Security](/gnachman/iTerm2/security)
* [Insights](/gnachman/iTerm2/pulse)

Additional navigation options

* [Code](/gnachman/iTerm2)
* [Pull requests](/gnachman/iTerm2/pulls)
* [Actions](/gnachman/iTerm2/actions)
* [Projects](/gnachman/iTerm2/projects)
* [Wiki](/gnachman/iTerm2/wiki)
* [Security](/gnachman/iTerm2/security)
* [Insights](/gnachman/iTerm2/pulse)

## Commit

[Permalink](/gnachman/iTerm2/commit/e4eb1063529deb575b75b396138d41554428d522)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Disable DNS lookups on hover by default. Issue 6050

[Browse files](/gnachman/iTerm2/tree/e4eb1063529deb575b75b396138d41554428d522)
Browse the repository at this point in the history

* Loading branch information

[![@gnachman](https://avatars.githubusercontent.com/u/427546?s=40&v=4)](/gnachman)

[gnachman](/gnachman/iTerm2/commits?author=gnachman "View all commits by gnachman")
committed
Sep 19, 2017

1 parent
[af685ce](/gnachman/iTerm2/commit/af685cec6a4d38c67da8b90418bfd592435c2408)

commit e4eb106

Showing
**1 changed file**
with
**1 addition**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[sources/iTermAdvancedSettingsModel.m](#diff-d4ed9a9d630432f9c782a5279af01cc55a52b7c921c165a7f4a482ff3ac929fd "sources/iTermAdvancedSettingsModel.m")

Show comments

[View file](/gnachman/iTerm2/blob/e4eb1063529deb575b75b396138d41554428d522/sources/iTermAdvancedSettingsModel.m)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -169,7 +169,7 @@ + (NSString \*)name { \ |
|  |  | DEFINE\_STRING(URLCharacterSet, @".?\\/:;%=&\_-,+~#@!\*'(（)）|[]", @"Semantic History: Non-alphanumeric characters considered part of a URL for Semantic History.\nLetters and numbers are always considered part of the URL. These non-alphanumeric characters are used in addition for the purposes of figuring out where a URL begins and ends."); |
|  |  | DEFINE\_INT(maxSemanticHistoryPrefixOrSuffix, 2000, @"Semantic History: Maximum number of bytes of text before and after click location to take into account.\nThis also limits the size of the \\3 and \\4 substitutions."); |
|  |  | DEFINE\_STRING(pathsToIgnore, @"", @"Semantic History: Paths to ignore for Semantic History.\nSeparate paths with a comma. Any file under one of these paths will not be openable with Semantic History."); |
|  |  | DEFINE\_BOOL(performDNSLookups, YES, @"Semantic History: Perform DNS lookups to check if URLs are valid?\nWhen enabled, the name under the mouse will be resolved with DNS to determine if it is a clickable link."); |
|  |  | DEFINE\_BOOL(performDNSLookups, NO, @"Semantic History: Perform DNS lookups to check if URLs are valid?\nWhen enabled, the name under the mouse will be resolved with DNS to determine if it is a clickable link."); |
|  |  |  |
|  |  | #pragma mark - Debugging |
|  |  | DEFINE\_BOOL(startDebugLoggingAutomatically, NO, @"Debugging: Start debug logging automatically when iTerm2 is launched."); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `e4eb106`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fgnachman%2FiTerm2%2Fcommit%2Fe4eb1063529deb575b75b396138d41554428d522) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


