=== Content from bugs.php.net_d6aac09d_20250126_051030.html ===


| [Bugs](/) | [php.net](https://php.net/) |  [support](https://php.net/support.php) |  [documentation](https://php.net/docs.php) |  [report a bug](report.php) |  [advanced search](search.php) |  [search howto](search-howto.php) |  [statistics](stats.php) |  [random bug](random) |  [login](login.php) |
| --- | --- |
| go to bug id or search bugs for | |

| | [Bug](bug.php?id=70185) #70185 | php-fpm restarts master process in a loop when exec() and using ssh multiplexing | | | | | | --- | --- | --- | --- | --- | --- | | Submitted: | 2015-08-03 02:54 UTC | Modified: | 2018-02-23 16:55 UTC | | Votes: | 20 | | --- | --- | | Avg. Score: | 4.8 ± 0.5 | | Reproduced: | 20 of 20 (100.0%) | | Same Version: | 3 (15.0%) | | Same OS: | 4 (20.0%) | | | From: | kobenews at cox dot net | Assigned: |  | | Status: | Duplicate | Package: | [FPM related](search.php?cmd=display&package_name[]=FPM+related) | | PHP Version: | 5.4.43 | OS: | CentOS release 6.6 (Final) | | Private report: | No | CVE-ID: | *None* |   View [Developer](bug.php?id=70185&edit=1) [Edit](bug.php?id=70185&edit=2)   **[2015-08-03 02:54 UTC] kobenews at cox dot net** ``` Description: ------------ Ok bear with me, this bug is a bit obscure and takes some setup. However, it is consistent, and causes php-fpm to continue to restart the process over and over again using 100% of the CPU on the php-fpm master process.  It only occurs with SSH controlMaster which basically allows SSH connection multiplexing.  Here is an example code:  <?php     $command = 'ssh -o "ControlMaster=auto" -o "ControlPersist=2m" -S /home/justin/.ssh/sockets/justin.sock justin@1.2.3.4';     $output = exec($command, $output_array, $return_code);   If you remove the options -o "ControlMaster=auto" -o "ControlPersist=2m" -S /home/justin/.ssh/sockets/justin.sock this works without crashing over and over again.  Test script: --------------- <?php     $command = 'ssh -o "ControlMaster=auto" -o "ControlPersist=2m" -S /home/justin/.ssh/sockets/justin.sock justin@1.2.3.4';     $output = exec($command, $output_array, $return_code);  Expected result: ---------------- php-fpm master process should not restart the process over and over again. Nothing is crashing here.  Actual result: -------------- php-fpm continues to restart the process over and over again using 100% of the CPU on the php-fpm master process.   ``` PatchesPull RequestsHistoryAllCommentsChangesGit/SVN commitsRelated reports  **[2015-08-03 03:21 UTC] kobenews at cox dot net** ``` Sorry, the script I provided is incorrect. I forgot a command at the end. It should be:  <?php     $command = 'ssh -o "ControlMaster=auto" -o "ControlPersist=2m" -S /home/justin/.ssh/sockets/justin.sock justin@1.2.3.4 uptime';     $output = exec($command, $output_array, $return_code);     die($output);  ``` **[2015-08-07 20:13 UTC] kobenews at cox dot net** -Summary: php-fpm restarts process forever when exec() and using ssh multiplexing +Summary: php-fpm restarts master process in a loop when exec() and using ssh multiplexing **[2015-08-07 20:13 UTC] kobenews at cox dot net** ``` Updated summary.  ``` **[2015-09-08 20:39 UTC] php at plainview dot se** ``` Finally, someone else with the same bug! I have been dealing with it for years and, until I read this, used a separate php-fastcgi to deal with the constant child spamming.  My previous setup was a Debian 7 with 5.4.4-14+deb7u14. My current setup is a Debian 8 with 5.6.9+dfsg-0+deb8u1.  Both exhibit the exact same behaviour: when a multiplexed SSH is exec()ed it goes spawn crazy, with children dying left and right:  [08-Sep-2015 21:32:36] NOTICE: [pool www] child 30721 exited with code 0 after 0.011428 seconds from start [08-Sep-2015 21:32:36] NOTICE: [pool www] child 30722 exited with code 0 after 0.011916 seconds from start [08-Sep-2015 21:32:36] NOTICE: [pool www] child 30723 exited with code 0 after 0.011527 seconds from start [08-Sep-2015 21:32:36] NOTICE: [pool www] child 30724 exited with code 0 after 0.012399 seconds from start [08-Sep-2015 21:32:36] NOTICE: [pool www] child 30725 exited with code 0 after 0.011333 seconds from start [08-Sep-2015 21:32:36] NOTICE: [pool www] child 30726 exited with code 0 after 0.010918 seconds from start [08-Sep-2015 21:32:36] NOTICE: [pool www] child 30727 exited with code 0 after 0.010977 seconds from start [08-Sep-2015 21:32:36] NOTICE: [pool www] child 30728 exited with code 0 after 0.011124 seconds from start  The result is 100% CPU load and a sluggish system.  The source of the problem is, as kobenews says, multiplexing SSH. I do it via a series of bash scripts that are execed by PHP.  Original script:  #!/bin/bash CONTROLPATH=/var/www/mail_scripts/master-mail_scripts MAIL_SCRIPTS_COMMAND="ssh -o StrictHostKeyChecking=no -l mail_scripts -o ControlPath=$CONTROLPATH -i /var/www/mail_scripts/mail_scripts TARGET.COM"  # If the socket doesn't exist, create it. if [ ! -e $CONTROLPATH* ] ; then     $MAIL_SCRIPTS_COMMAND -fNM fi  # Execute the requested command. $MAIL_SCRIPTS_COMMAND /home/mail_scripts/the_command $@   What I did was I moveed -f in front of TARGET.COM and started the master manually, outside of PHP. After that PHP seems fine with running the script without spawnflooding.  ``` **[2015-09-09 02:18 UTC] kobenews at cox dot net** ``` php at plainview dot se: glad I'm not the only one experiencing this bug. Now the trick, is to get a fix.  I am running:  PHP 5.4.43 on CentOS 6.7  ``` **[2016-01-22 08:06 UTC] i dot priladnyh at gmail dot com** ``` Ubuntu 14.04 php5-fpm 5.5.9 Same problem with launch ssh session using ControlMaster. FPM load CPU to 100%. Problem with FPM solved by launch SSH session with flag -f (background). But then SSH connection multiplexing don`t correctly works.  ``` **[2017-02-24 13:52 UTC] sylvain at com-ocean dot com** ``` Same bug by executing a bash script calling rsync command. with PHP 5.6.30 and Debian 7.10  ``` **[2017-03-10 20:03 UTC] php at grindau dot com** ``` I am having the same issue! It took me ages to find out whats the reason. I am running the latest php-7.1.2 under archx64.  Executing this command: 				  shell_exec('/usr/lib/node_modules/csso/bin/csso '.ROOT_PATH.'/tmp/style-critical-unoptimized.css --output '.ROOT_PATH.'/tmp/style-critical.css');  which should just easily grap a normal css file and compress it down causes the master process to restart itself hundred times a second or even more causing 100% cpu load on the server.  ``` **[2017-03-10 23:14 UTC] kobenews at cox dot net** ``` php@grindau dot com: I'd love to get a test case script, without requiring lots of setup and dependencies. Anybody have ideas?  This does seem to indicate a bug though.  ``` **[2017-03-13 14:31 UTC] php at grindau dot com** ``` Well, there is no shell-scripts, this code runs inside of my classes.  I was able to narrow it down to all shell functions like passthru(), exec(), shell_exec(), system(), etc, it happens with every of them.  i tried to run this cli-module on my arch linux: <https://github.com/css/csso> by executing this /usr/lib/node_modules/csso/bin/csso infile.css --output outfile.css the same happened with UglifyCSS: <https://github.com/fmarcia/UglifyCSS> but not with UglifyJS: <https://github.com/mishoo/UglifyJS>  I am also running java jars inside those functions for years without any issue. Like Yuicompressor: <http://yui.github.io/yuicompressor/>  Hope that helps. Regards Sascha  ``` **[2017-03-18 21:35 UTC] php at grindau dot com** ``` Any news on this? Is it reproduceable?  While rechering i found some topics about stdin non-blocking behaviour of apps which might cause that issue.  Hope that helps.  ``` **[2017-03-24 09:36 UTC] please at forget dot me dot uk** ``` I have the same problem on php 7.0.17(from 7.0.15) with FreeBSD 11. restarting php-fpm helps.  however, I am using perl modules inside nginx to look after node CSS - and CSS files produce cut versions like PHP-fpm so I assume problem is somewhere in the middle of: php-fpm -- nginx -- node ; with perl I have to restart webserver.  ``` **[2017-04-13 08:43 UTC] php at grindau dot com** ``` I will never report a bug again. This kind of ignorance is just bullshit.  ``` **[2017-04-13 20:22 UTC] merrill at oakland dot edu** ``` We are seeing the same issue, although in our case we aren't doing anything with a socket in SSH. We are just connecting an issuing a command - in fact I can just do "ssh sshserver.whatever -i pathtoidentfile \"sleep 10\"" and php-fpm will keep responding processes, flooding the logs with warnings and causing the machine to bottleneck.  ``` **[2017-04-17 20:21 UTC] jlaustill at gmail dot com** ``` I am running into this same issue on php 5.6.30 running on Ubuntu 16.04.  I'm trying to call minify(node.js library).  Here's the exact call I'm making.      public function minifyJsFile($source, $dest)     {         $result = exec('minify ' . $source . ' > ' . $dest);          if ($result) {             return false;         } else {             return filemtime($dest);         }     }  I have been unable to find a workaround.  But I'm not a php expert by any stretch.  My background is c/c++/C#/javascript mainly.  ``` **[2017-04-20 09:37 UTC] php at grindau dot com** ``` My only working workaround looks as the follows:  				$cwd='/tmp'; 				$descriptorspec = array( 				    0 => array("pipe", "r"), 				    1 => array("pipe", "w"), 				    2 => array("file", "/tmp/error-output.txt", "a") );  				$process = proc_open('csso '.ROOT_PATH.'/tmp/style-'.$type.'-uncritical-unoptimized.css '.ROOT_PATH.'/tmp/style-'.$type.'-uncritical.css --comments none', $descriptorspec, $pipes, '/tmp');  				stream_get_contents($pipes[1]); 				fclose($pipes[1]);  ``` **[2017-04-24 22:49 UTC] php at grindau dot com** ``` Applause to the devs! Absolutely no response, this is a shame.  ``` **[2017-04-25 05:24 UTC] spam2 at rhsoft dot net** ``` I am not a dev but did you realize that pho5 support is over except highly critical security bugs?  ``` **[2017-04-25 10:24 UTC] php at grindau dot com** ``` This happens in the latest stable php 7.1 as well!  ``` **[2017-04-25 11:28 UTC] php at grindau dot com** ``` As everybody could have seen in my post with the timestamp: 2017-03-10 20:03 UTC.  ``` **[2017-04-25 11:35 UTC] spam2 at rhsoft dot net** ``` > This happens in the latest stable php 7.1 as well! > As everybody could have seen in my post with  > the timestamp: 2017-03-10 20:03 UTC  then someone should change this metadata  PHP Version: 5.4.43 	 OS: CentOS release 6.6 (Final)  ``` **[2017-04-25 14:04 UTC] merrill at oakland dot edu** ``` This bug does effect 7.x as well  That being said, it's an open source project, with an insurmountable amount of bugs (That's just the way big projects work). Somebody who cares will have to work on it an try to submit a patch.  ``` **[2017-04-25 14:24 UTC] php at grindau dot com** ``` Well, "kobenews at cox dot net" asked for additional informations to reproduce. After that tons of input of me and others were provided but we havent got any feedback so far. I am not one of the devs, so i am not going to change any metadata of which i dont have enough knowledge. I ll leave this up to people who are into it and limit my input on providing feedback.  ``` **[2017-07-21 09:36 UTC] d dot reade at reades dot co dot uk** ``` I'm experiencing a very similar issue. My server is running CentOS 7.3, cPanel 64.0.33, Apache 2.4.27 and PHP 5.6.31 with PHP-FPM.  After much investigation, the following script reproduces my issue:  <?php exec('/usr/bin/postcss css_from.css --use autoprefixer --autoprefixer.remove "false" --output css_to.css'); echo 'Done'; ?>  Only after the script completes does the PHP-FPM process then use 100% CPU and the PHP-FPM error.log file does this:  root@l1vs09rcms [/opt/cpanel/ea-php56/root/usr/var/log/php-fpm]# head error.log -n 128 [21-Jul-2017 10:23:03] NOTICE: fpm is running, pid 30537 [21-Jul-2017 10:23:03] NOTICE: ready to handle connections [21-Jul-2017 10:23:03] NOTICE: systemd monitor interval set to 10000ms [21-Jul-2017 10:23:13] WARNING: [pool dev3_reades_local] child 30540 said into stderr: "✔ Finished css_from.css (60ms)" [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30540 exited with code 0 after 1.167822 seconds from start [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30551 started [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30551 exited with code 0 after 0.007451 seconds from start [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30552 started [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30552 exited with code 0 after 0.007069 seconds from start [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30553 started [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30553 exited with code 0 after 0.007391 seconds from start [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30554 started [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30554 exited with code 0 after 0.007211 seconds from start [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30555 started [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30555 exited with code 0 after 0.007631 seconds from start [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30556 started [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30556 exited with code 0 after 0.007972 seconds from start [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30558 started [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30558 exited with code 0 after 0.007635 seconds from start [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30559 started [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30559 exited with code 0 after 0.007761 seconds from start [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30560 started [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30560 exited with code 0 after 0.007557 seconds from start [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30561 started [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30561 exited with code 0 after 0.007735 seconds from start [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30562 started [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30562 exited with code 0 after 0.008361 seconds from start [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30563 started [21-Jul-2017 10:23:13] NOTICE: [pool dev3_reades_local] child 30563 exited with code 0 after 0.007477 seconds from start  The log file is meant to rotate as per the cPanel configuration, but when it's doing this and constantly growing, the rotate threshold does not trigger the rotate and so the log file just keeps getting bigger until the server runs out of disk space and crashes!  It doesn't even matter if I use shell_exec() or exec(), or if I append "> /dev/null 2>&1" to the command thinking the output is the cause. If I append the command so there's no output, the log file doesn't show the warning, but the continuous notices still happen regardless and so the log file just gets bigger.  The workaround for us is to not execute any scripts that contain exec() or shell_exec() and to execute these scripts from the command line instead, which is doable as I wrote all our software, but for others using other pre-written software packages this could be a problem.  ``` **[2017-09-21 18:07 UTC] mike at sagesolutionsinc dot ca** ``` I also have this issue when calling exec()  Im using php 7.0.22 on Ubuntu 16.04   my log file is  getting flooded, and my cpu goes to 100%.  The only solution I have is to restart the php7.0-fpm service which is not ideal.  I could move my exec() into a cronjob, but would like to keep it in PHP preferably.   sudo tail -f /var/log/php7.0-fpm.log [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14682 exited with code 0 after 0.022976 seconds from start [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14685 started [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14683 exited with code 0 after 0.024077 seconds from start [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14686 started [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14684 exited with code 0 after 0.024208 seconds from start [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14687 started [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14685 exited with code 0 after 0.023809 seconds from start [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14688 started [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14686 exited with code 0 after 0.022311 seconds from start [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14689 started [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14687 exited with code 0 after 0.023341 seconds from start [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14690 started [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14688 exited with code 0 after 0.027854 seconds from start [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14691 started [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14689 exited with code 0 after 0.028554 seconds from start [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14692 started [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14690 exited with code 0 after 0.027951 seconds from start [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14693 started [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14691 exited with code 0 after 0.024784 seconds from start [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14694 started [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14692 exited with code 0 after 0.027203 seconds from start [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14695 started [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14693 exited with code 0 after 0.028104 seconds from start [21-Sep-2017 14:01:36] NOTICE: [pool www] child 14696 started ....  ``` **[2018-02-16 15:09 UTC] schnederle at futureweb dot at** ``` we got the same issue with Centos 7.4.1708:  Latest PHP Version:  [root@localhost ~]# php -v PHP 7.2.2 (cli) (built: Feb  1 2018 15:30:38) ( NTS ) Copyright (c) 1997-2018 The PHP Group Zend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies     with Zend OPcache v7.2.2, Copyright (c) 1999-2018, by Zend Technologies  ... [16-Feb-2018 14:48:30] WARNING: [pool www] child 53778 exited on signal 15 (SIGTERM) after 0.046685 seconds from start [16-Feb-2018 14:48:30] WARNING: [pool www] child 53782 exited on signal 15 (SIGTERM) after 0.045416 seconds from start [16-Feb-2018 14:48:30] WARNING: [pool www] child 53785 exited on signal 15 (SIGTERM) after 0.045331 seconds from start [16-Feb-2018 14:48:30] WARNING: [pool www] child 53787 exited on signal 15 (SIGTERM) after 0.044765 seconds from start ...  100% CPU Usage of "php-fpm: master process (/etc/php-fpm.conf)"   [root@localhost ~]# service php-fpm status Redirecting to /bin/systemctl status php-fpm.service ● php-fpm.service - The PHP FastCGI Process Manager    Loaded: loaded (/usr/lib/systemd/system/php-fpm.service; enabled; vendor preset: disabled)    Active: active (running) since Fri 2018-02-16 14:50:00 CET; 1h 17min ago  Main PID: 7869 (php-fpm)    Status: "Processes active: 0, idle: 808593, Requests: 2319, slow: 0, Traffic: 72req/sec"    CGroup: /system.slice/php-fpm.service            ├─ 7869 php-fpm: master process (/etc/php-fpm.conf)            ├─43200 php-fpm: pool www            ├─43202 php-fpm: pool www            ├─43205 php-fpm: pool www            ├─43206 php-fpm: pool www            └─43207 php-fpm: pool www  Feb 16 14:50:00 localhost.localdomain systemd[1]: Starting The PHP FastCGI Process Manager... Feb 16 14:50:00 localhost.localdomain systemd[1]: Started The PHP FastCGI Process Manager.  Also the Traffic 72req/sec shows that something is Bogus with only 2.319 Requests within the last 1:17h ...  Really noone who cares?! :-/  thx, bye from Austria Andreas Schnederle-Wagner  ``` **[2018-02-16 15:24 UTC] schnederle at futureweb dot at** ``` Guess Dev's won't look here anymore because it's reported for PHP 5.4 I opened a new Bug Report for PHP 7.2 - please vote it up ... ;-)  <https://bugs.php.net/bug.php?id=75968>  thx  ``` **[2018-02-23 16:55 UTC] [nikic@php.net](//people.php.net/nikic)** -Status: Open +Status: Duplicate **[2018-02-23 16:55 UTC] [nikic@php.net](//people.php.net/nikic)** ``` Root cause is [bug #73342](bug.php?id=73342), marking as duplicate.  ``` |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

|  | |
| --- | --- |
| [PHP](https://php.net/) [Copyright © 2001-2025 The PHP Group](https://php.net/copyright.php) All rights reserved. | Last updated: Sun Jan 26 05:01:29 2025 UTC |



=== Content from www.futureweb.at_cc61ca46_20250126_051030.html ===

[Support](https://get.teamviewer.com/futureweb "Fernwartung starten")
Mail
Telefon
[Webmail](https://www.futuremail.at "Futuremail öffnen")

[Support](/Futureweb-GmbH-Fernwartung_pid%2C46360%2Ctype%2Cfirmeninfo.html "Fernwartung starten")
Mail
Telefon
[Webmail](https://www.futuremail.at "Futuremail öffnen")

[![Futureweb St. Johann](/templates/futureweb-2016.at/img/logo_1.png?width=266)](/)

* [Homepage](/)
  + [Pakete](/de/tiroler-homepage/angebote-preise/)
  + [PageSpeed Optimierung](/de/tiroler-homepage/pagespeed-optimierung/)
  + [Cookie Crawler](/de/tiroler-homepage/cookie-crawler/)
  + [Referenzen](/de/tiroler-homepage/referenzen/)
  + [Warum Futureweb?](/de/tiroler-homepage/warum-futureweb/)
  + [Kontakt](/de/tiroler-homepage/termin-vereinbaren/)
* [Webhosting](/de/webhosting/)
  + [Webspace](/de/webhosting/webspace/)
  + [WordPress Hosting](/webhosting/wordpress-hosting/)
  + [Domains](/de/webhosting/domains/)
  + [Virtual Server](/de/webhosting/virtual-server/)
  + [SSL Zertifikate](/de/webhosting/ssl-zertifikate/)
  + [Kontakt](/de/webhosting/termin-vereinbaren/)
* [3D Fotografie](/de/3dfotografie/)
  + [Rundblick](https://www.rundblick.at/)
* [Newsletter](/de/newsletter/)
  + [Newsletter](/de/newsletter/system/)
  + [Kontakt](/de/newsletter/termin-vereinbaren/)
* [Portal Manager](/portalmanager/)
  + [Vorstellung](/vorstellung-portalmanager/)
  + [Vorteile](/portalmanager/vorteile/)
  + [Video Anleitungen](/de/portal-manager/anleitungen/)
  + [FAQ](/faq-portalmanager/)
    - [FAQ - Allgemein](/faq-allgemein-portalmanager/)
    - [FAQ - Ablauf & Nutzeranmeldung](/faq-ablauf-portalmanager/)
    - [FAQ - Übersicht](/faq-uebersicht-portalmanager/)
    - [FAQ - Datenbefüllung](/faq-daten-portalmanager/)
    - [FAQ - Einträge](/faq-eintraege-portalmanager/)
    - [FAQ - Besonderheiten Google](/faq-google-portalmanager/)
    - [FAQ - Kundenfeedback](/faq-bewertungen-portalmanager/)
    - [FAQ- Veröffentlichen](/faq-veroeffentlichen-portalmanager/)
  + [Firmencheck](/portalmanager/check/)
    - [Firmen Check Wippcom](/firmencheck-wippcom/)
    - [Firmen Check Triverti](/firmencheck-triverti/)
    - [Firmen Check Vordenker](/vordenker/)
    - [Firmen Check Werbung und Events](/werbungundevents/)
* [Kontakt](/de/kontakt/standort/)
  + [Team](/de/kontakt/team/)
  + [Unser Büro](/de/rundgang/)
  + [Fernwartung](https://get.teamviewer.com/futureweb)
  + [Standort](/de/kontakt/standort/)
  + [Anfragen](/de/kontakt/anfragen/)
  + [Preise](/preise/)
  + [Webmail](https://www.futuremail.at)
  + [Newsletter Anmeldung](/de/kontakt/newsletter/)
  + [Jobs](/de/kontakt/jobs/)

* [![](/templates/futureweb-2016.at/img/socials/facebook.svg)](https://www.facebook.com/FuturewebStJohann)
* [![](/templates/futureweb-2016.at/img/socials/instagram.svg)](https://www.instagram.com/futureweb_gmbh/%20)
* [![](/templates/futureweb-2016.at/img/socials/linkedin.svg)](https://www.linkedin.com/company/futureweb-gmbh-at/mycompany/)

[![Futureweb St. Johann](/templates/futureweb-2016.at/img/logo_1.png?width=266)](/)

* [![](/templates/futureweb-2016.at/img/socials/facebook.svg)](https://www.facebook.com/FuturewebStJohann)
* [![](/templates/futureweb-2016.at/img/socials/instagram.svg)](https://www.instagram.com/futureweb_gmbh/%20)
* [![](/templates/futureweb-2016.at/img/socials/linkedin.svg)](https://www.linkedin.com/company/futureweb-gmbh-at/mycompany/)

* [Homepage](/)
  + [Pakete](/de/tiroler-homepage/angebote-preise/)
  + [PageSpeed Optimierung](/de/tiroler-homepage/pagespeed-optimierung/)
  + [Cookie Crawler](/de/tiroler-homepage/cookie-crawler/)
  + [Referenzen](/de/tiroler-homepage/referenzen/)
  + [Warum Futureweb?](/de/tiroler-homepage/warum-futureweb/)
  + [Kontakt](/de/tiroler-homepage/termin-vereinbaren/)
* [Webhosting](/de/webhosting/)
  + [Webspace](/de/webhosting/webspace/)
  + [WordPress Hosting](/webhosting/wordpress-hosting/)
  + [Domains](/de/webhosting/domains/)
  + [Virtual Server](/de/webhosting/virtual-server/)
  + [SSL Zertifikate](/de/webhosting/ssl-zertifikate/)
  + [Kontakt](/de/webhosting/termin-vereinbaren/)
* [3D Fotografie](/de/3dfotografie/)
  + [Rundblick](https://www.rundblick.at/)
* [Newsletter](/de/newsletter/)
  + [Newsletter](/de/newsletter/system/)
  + [Kontakt](/de/newsletter/termin-vereinbaren/)
* [Portal Manager](/portalmanager/)
  + [Vorstellung](/vorstellung-portalmanager/)
  + [Vorteile](/portalmanager/vorteile/)
  + [Video Anleitungen](/de/portal-manager/anleitungen/)
  + [FAQ](/faq-portalmanager/)
    - [FAQ - Allgemein](/faq-allgemein-portalmanager/)
    - [FAQ - Ablauf & Nutzeranmeldung](/faq-ablauf-portalmanager/)
    - [FAQ - Übersicht](/faq-uebersicht-portalmanager/)
    - [FAQ - Datenbefüllung](/faq-daten-portalmanager/)
    - [FAQ - Einträge](/faq-eintraege-portalmanager/)
    - [FAQ - Besonderheiten Google](/faq-google-portalmanager/)
    - [FAQ - Kundenfeedback](/faq-bewertungen-portalmanager/)
    - [FAQ- Veröffentlichen](/faq-veroeffentlichen-portalmanager/)
  + [Firmencheck](/portalmanager/check/)
    - [Firmen Check Wippcom](/firmencheck-wippcom/)
    - [Firmen Check Triverti](/firmencheck-triverti/)
    - [Firmen Check Vordenker](/vordenker/)
    - [Firmen Check Werbung und Events](/werbungundevents/)
* [Kontakt](/de/kontakt/standort/)
  + [Team](/de/kontakt/team/)
  + [Unser Büro](/de/rundgang/)
  + [Fernwartung](https://get.teamviewer.com/futureweb)
  + [Standort](/de/kontakt/standort/)
  + [Anfragen](/de/kontakt/anfragen/)
  + [Preise](/preise/)
  + [Webmail](https://www.futuremail.at)
  + [Newsletter Anmeldung](/de/kontakt/newsletter/)
  + [Jobs](/de/kontakt/jobs/)

# php-fpm master process restarts child process in an endless loop when using Program execution Function (CVE-2015-9253)

## Abstract

php-fpm master process restarts child process in an endless loop when using Program execution Functions (passthru(), exec(), shell\_exec(), system(), ...) with non-blocking STDIN stream causing php-fpm master eating up 100% CPU and rapidly eating up available Storage Space with extremly fast (CPU Speed dependent) growing Error Logs.

## Credit

Andreas Schnederle-Wagner, 16.02.2018 and others (see linked PHP Bug Reports)

## Contact

For feedback or questions about this advisory mail me at schnederle@futureweb.at

## Affected Software

PHP

## Tested versions

5.4 - 7.2.2 (earlier Versions most likely also affected)

## CVE ID

[CVE-2015-9253](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-9253)

## CWE ID

[CWE-835](https://cwe.mitre.org/data/definitions/835.html), [CWE-674](https://cwe.mitre.org/data/definitions/674.html), [CWE-400](https://cwe.mitre.org/data/definitions/400.html)

## Attack Type, Impact

'Uncontrolled Recursion' (child restart loop) resulting in 'Uncontrolled Resource Consumption' - 100% CPU usage & Storage Space exhaustion

## Access Complexity, Authentication

very low, access to shared hosting Server

## Fix

Fixed in:
[7.2.8
7.1.20
7.3.0alpha3](https://github.com/php/php-src/blob/PHP-7.1.20/NEWS#L20-L22)

## Introduction

PHP is a server-side scripting language designed for web development but also used as a general-purpose programming language.

## Details

This Bug can be used to DOS Shared Hosting Services with php-fpm master process eating up 100% CPU and rapidly eating up all available Diskspace.

## Proof of concept

##

## Source

<https://bugs.php.net/bug.php?id=75968><https://bugs.php.net/bug.php?id=70185><http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-9253>
 <https://nvd.nist.gov/vuln/detail/CVE-2015-9253><https://vuldb.com//?id.113566>
 <https://access.redhat.com/security/cve/cve-2015-9253>

Ihre Vorteile

Kostenlose Einrichtung

der Emails per Fernwartung!

Serverstandort

Österreich

Telefonsupport

zu Geschäfszeiten

Notfallshotline

außerhalb der Geschäftszeiten

24 Stunden

Email-Support

Powerserver

Hochleistungs
HPE Server

Virtualisierung

für mehr Sicherheit

Storage

schnelle & mehrfach
redundante SAN-Storage

Termin ausmachen

Name:\*

E-Mail:\*

Feld 2:

Telefon:

Telefon:

Nachricht:

Zeichen eingeben:\*

![](/includes/captcha/captcha.php?id=6795c3c63eb56&cachebuster=49271)

Neues Captcha generieren!

Die Benutzung des Formulars und alle Angaben sind freiwillig.

Alternativ freuen wir uns auf eine Email oder einen Anruf von Euch!

Hier findet Ihr unsere [Datenschutzerkärung](/datenschutz/).

Standort

Innsbruckerstraße 7

6380 St. Johann in Tirol

Österreich

Kontakt

Tel.: 05352 65335

Email: helpdesk@futureweb.at

Web: [www.futureweb.at](/)

Preise

* [Homepage](/de/tiroler-homepage/angebote-preise/)
* [Webhosting](/de/webhosting/webspace/)
* [Newsletter](/de/newsletter/system/)

Sonstiges

* [Referenzen](/de/tiroler-homepage/referenzen/)
* [Domains](/de/webhosting/domains/)
* [Anfragen](/de/kontakt/anfragen/)

[![Futureweb St. Johann](/templates/futureweb-2016.at/img/logo_footer_1.png?width=146)](/)

* [Impressum](/de/impressum/)
* [AGB](/de/agb/)
* [Datenschutz](/datenschutz/)
* [Partner](/de/partner/)

[Status](https://status.futureweb.at/)
Cookies |
© Futureweb GmbH

###

‹
›
×

![](https://stats.futureweb.at/matomo.php?idsite=1&rec=1)

![](https://stats.futureweb.at/matomo.php?idsite=927&rec=1)



=== Content from access.redhat.com_71944524_20250126_051031.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from usn.ubuntu.com_7ba27b34_20250125_015205.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-4279-1: PHP vulnerabilities

17 February 2020

Several security issues were fixed in PHP.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 19.10](/security/notices?release=eoan)
* [Ubuntu 18.04 ESM](/security/notices?release=bionic)
* [Ubuntu 16.04 ESM](/security/notices?release=xenial)
* [Ubuntu 14.04 ESM](/security/notices?release=trusty)
* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [php5](/security/cves?package=php5) - HTML-embedded scripting language interpreter
* [php7.0](/security/cves?package=php7.0) - HTML-embedded scripting language interpreter
* [php7.2](/security/cves?package=php7.2) - HTML-embedded scripting language interpreter
* [php7.3](/security/cves?package=php7.3) - server-side, HTML-embedded scripting language (metapackage)

## Details

It was discovered that PHP incorrectly handled certain scripts.

An attacker could possibly use this issue to cause a denial of service.

This issue only affected Ubuntu 12.04 ESM, Ubuntu 14.04 ESM and Ubuntu 16.04 LTS.

([CVE-2015-9253](/security/CVE-2015-9253))

It was discovered that PHP incorrectly handled certain inputs. An attacker

could possibly use this issue to expose sensitive information.

([CVE-2020-7059](/security/CVE-2020-7059))

It was discovered that PHP incorrectly handled certain inputs.

An attacker could possibly use this issue to execute arbitrary code.

This issue only affected Ubuntu 14.04 ESM, Ubuntu 16.04 LTS, Ubuntu 18.04 LTS

and Ubuntu 19.10. ([CVE-2020-7060](/security/CVE-2020-7060))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 19.10

* [libapache2-mod-php7.3](https://launchpad.net/ubuntu/%2Bsource/php7.3)
  -
  [7.3.11-0ubuntu0.19.10.3](https://launchpad.net/ubuntu/%2Bsource/php7.3/7.3.11-0ubuntu0.19.10.3)
* [php7.3-cgi](https://launchpad.net/ubuntu/%2Bsource/php7.3)
  -
  [7.3.11-0ubuntu0.19.10.3](https://launchpad.net/ubuntu/%2Bsource/php7.3/7.3.11-0ubuntu0.19.10.3)
* [php7.3-cli](https://launchpad.net/ubuntu/%2Bsource/php7.3)
  -
  [7.3.11-0ubuntu0.19.10.3](https://launchpad.net/ubuntu/%2Bsource/php7.3/7.3.11-0ubuntu0.19.10.3)
* [php7.3-fpm](https://launchpad.net/ubuntu/%2Bsource/php7.3)
  -
  [7.3.11-0ubuntu0.19.10.3](https://launchpad.net/ubuntu/%2Bsource/php7.3/7.3.11-0ubuntu0.19.10.3)

##### Ubuntu 18.04

* [libapache2-mod-php7.2](https://launchpad.net/ubuntu/%2Bsource/php7.2)
  -
  [7.2.24-0ubuntu0.18.04.3](https://launchpad.net/ubuntu/%2Bsource/php7.2/7.2.24-0ubuntu0.18.04.3)
* [php7.2-cgi](https://launchpad.net/ubuntu/%2Bsource/php7.2)
  -
  [7.2.24-0ubuntu0.18.04.3](https://launchpad.net/ubuntu/%2Bsource/php7.2/7.2.24-0ubuntu0.18.04.3)
* [php7.2-cli](https://launchpad.net/ubuntu/%2Bsource/php7.2)
  -
  [7.2.24-0ubuntu0.18.04.3](https://launchpad.net/ubuntu/%2Bsource/php7.2/7.2.24-0ubuntu0.18.04.3)
* [php7.2-fpm](https://launchpad.net/ubuntu/%2Bsource/php7.2)
  -
  [7.2.24-0ubuntu0.18.04.3](https://launchpad.net/ubuntu/%2Bsource/php7.2/7.2.24-0ubuntu0.18.04.3)

##### Ubuntu 16.04

* [libapache2-mod-php7.0](https://launchpad.net/ubuntu/%2Bsource/php7.0)
  -
  [7.0.33-0ubuntu0.16.04.11](https://launchpad.net/ubuntu/%2Bsource/php7.0/7.0.33-0ubuntu0.16.04.11)
* [php7.0-cgi](https://launchpad.net/ubuntu/%2Bsource/php7.0)
  -
  [7.0.33-0ubuntu0.16.04.11](https://launchpad.net/ubuntu/%2Bsource/php7.0/7.0.33-0ubuntu0.16.04.11)
* [php7.0-cli](https://launchpad.net/ubuntu/%2Bsource/php7.0)
  -
  [7.0.33-0ubuntu0.16.04.11](https://launchpad.net/ubuntu/%2Bsource/php7.0/7.0.33-0ubuntu0.16.04.11)
* [php7.0-fpm](https://launchpad.net/ubuntu/%2Bsource/php7.0)
  -
  [7.0.33-0ubuntu0.16.04.11](https://launchpad.net/ubuntu/%2Bsource/php7.0/7.0.33-0ubuntu0.16.04.11)

##### Ubuntu 14.04

* [libapache2-mod-php5](https://launchpad.net/ubuntu/%2Bsource/php5)
  -
  [5.5.9+dfsg-1ubuntu4.29+esm10](https://launchpad.net/ubuntu/%2Bsource/php5/5.5.9%2Bdfsg-1ubuntu4.29%2Besm10)
* [php5-cgi](https://launchpad.net/ubuntu/%2Bsource/php5)
  -
  [5.5.9+dfsg-1ubuntu4.29+esm10](https://launchpad.net/ubuntu/%2Bsource/php5/5.5.9%2Bdfsg-1ubuntu4.29%2Besm10)
* [php5-cli](https://launchpad.net/ubuntu/%2Bsource/php5)
  -
  [5.5.9+dfsg-1ubuntu4.29+esm10](https://launchpad.net/ubuntu/%2Bsource/php5/5.5.9%2Bdfsg-1ubuntu4.29%2Besm10)
* [php5-fpm](https://launchpad.net/ubuntu/%2Bsource/php5)
  -
  [5.5.9+dfsg-1ubuntu4.29+esm10](https://launchpad.net/ubuntu/%2Bsource/php5/5.5.9%2Bdfsg-1ubuntu4.29%2Besm10)

##### Ubuntu 12.04

* [libapache2-mod-php5](https://launchpad.net/ubuntu/%2Bsource/php5)
  -
  [5.3.10-1ubuntu3.44](https://launchpad.net/ubuntu/%2Bsource/php5/5.3.10-1ubuntu3.44)
* [php5-cgi](https://launchpad.net/ubuntu/%2Bsource/php5)
  -
  [5.3.10-1ubuntu3.44](https://launchpad.net/ubuntu/%2Bsource/php5/5.3.10-1ubuntu3.44)
* [php5-cli](https://launchpad.net/ubuntu/%2Bsource/php5)
  -
  [5.3.10-1ubuntu3.44](https://launchpad.net/ubuntu/%2Bsource/php5/5.3.10-1ubuntu3.44)
* [php5-fpm](https://launchpad.net/ubuntu/%2Bsource/php5)
  -
  [5.3.10-1ubuntu3.44](https://launchpad.net/ubuntu/%2Bsource/php5/5.3.10-1ubuntu3.44)

In general, a standard system update will make all the necessary changes.

## References

* [CVE-2015-9253](/security/CVE-2015-9253)
* [CVE-2020-7059](/security/CVE-2020-7059)
* [CVE-2020-7060](/security/CVE-2020-7060)

## Related notices

* [USN-3766-1](/security/notices/USN-3766-1)
* [USN-5300-1](/security/notices/USN-5300-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from github.com_31df6edc_20250125_015158.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fcommit%2F69dee5c732fe982c82edb17d0dbc3e79a47748d8)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fcommit%2F69dee5c732fe982c82edb17d0dbc3e79a47748d8)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=php%2Fphp-src)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[php](/php)
/
**[php-src](/php/php-src)**
Public

* [Notifications](/login?return_to=%2Fphp%2Fphp-src) You must be signed in to change notification settings
* [Fork
  7.8k](/login?return_to=%2Fphp%2Fphp-src)
* [Star
   38.5k](/login?return_to=%2Fphp%2Fphp-src)

* [Code](/php/php-src)
* [Issues
  750](/php/php-src/issues)
* [Pull requests
  563](/php/php-src/pulls)
* [Actions](/php/php-src/actions)
* [Security](/php/php-src/security)
* [Insights](/php/php-src/pulse)

Additional navigation options

* [Code](/php/php-src)
* [Issues](/php/php-src/issues)
* [Pull requests](/php/php-src/pulls)
* [Actions](/php/php-src/actions)
* [Security](/php/php-src/security)
* [Insights](/php/php-src/pulse)

## Commit

[Permalink](/php/php-src/commit/69dee5c732fe982c82edb17d0dbc3e79a47748d8)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Fixed bug #73342

[Browse files](/php/php-src/tree/69dee5c732fe982c82edb17d0dbc3e79a47748d8)
Browse the repository at this point in the history

```
Directly listen on socket, instead of duping it to STDIN and
listening on that.
```

* Loading branch information

[![@nikic](https://avatars.githubusercontent.com/u/216080?s=40&v=4)](/nikic)

[nikic](/php/php-src/commits?author=nikic "View all commits by nikic")
committed
Jun 20, 2018

1 parent
[5dd1ef9](/php/php-src/commit/5dd1ef90caec3021e6ce55c8554e695edf641eaf)

commit 69dee5c

 Show file tree

 Hide file tree

Showing
**4 changed files**
with
**51 additions**
and
**6 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* NEWS
  [NEWS](#diff-7ee66c4f1536ac84dc5bbff1b8312e2eef24b974b3e48a5c5c2bcfdf2eb8f3ce)
* sapi/fpm

  + fpm

    - sapi/fpm/fpm/fpm\_children.c
      [fpm\_children.c](#diff-bc9e3a640014947c1b61c24965278aed577c94f2bdb7239ab7ac360ab8c4ce36)
    - sapi/fpm/fpm/fpm\_stdio.c
      [fpm\_stdio.c](#diff-5af9050ab2bfafe95720d7badd345919c64c8fcd41a16089facf80a439ce86b0)
  + tests

    - sapi/fpm/tests/bug73342-nonblocking-stdio.phpt
      [bug73342-nonblocking-stdio.phpt](#diff-9dd1177661abccb83074d9f15a712499783fc666116e2eb086c83edcf3c92996)

## There are no files selected for viewing

4 changes: 4 additions & 0 deletions

4
[NEWS](#diff-7ee66c4f1536ac84dc5bbff1b8312e2eef24b974b3e48a5c5c2bcfdf2eb8f3ce "NEWS")

Show comments

[View file](/php/php-src/blob/69dee5c732fe982c82edb17d0dbc3e79a47748d8/NEWS)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -5,6 +5,10 @@ PHP NEWS |
|  |  | - Date: |
|  |  | . Fixed bug #76462 (Undefined property: DateInterval::$f). (Anatol) |
|  |  |  |
|  |  | - FPM: |
|  |  | . Fixed bug #73342 (Vulnerability in php-fpm by changing stdin to |
|  |  | non-blocking). (Nikita) |
|  |  |  |
|  |  | 22 Jun 2019, PHP 7.1.19 |
|  |  |  |
|  |  | - CLI Server: |
| Expand Down | |  |

1 change: 1 addition & 0 deletions

1
[sapi/fpm/fpm/fpm\_children.c](#diff-bc9e3a640014947c1b61c24965278aed577c94f2bdb7239ab7ac360ab8c4ce36 "sapi/fpm/fpm/fpm_children.c")

Show comments

[View file](/php/php-src/blob/69dee5c732fe982c82edb17d0dbc3e79a47748d8/sapi/fpm/fpm/fpm_children.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -146,6 +146,7 @@ static struct fpm\_child\_s \*fpm\_child\_find(pid\_t pid) /\* {{{ \*/ |
|  |  | static void fpm\_child\_init(struct fpm\_worker\_pool\_s \*wp) /\* {{{ \*/ |
|  |  | { |
|  |  | fpm\_globals.max\_requests = wp->config->pm\_max\_requests; |
|  |  | fpm\_globals.listening\_socket = dup(wp->listening\_socket); |
| This comment has been minimized. [Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fcommit%2F69dee5c732fe982c82edb17d0dbc3e79a47748d8)       Sorry, something went wrong.           Copy link    Quote reply     @setharnold **[setharnold](/setharnold)** [Feb 19, 2020](#r37379863)  What happens if this dup() call fails? Thanks      All reactions | | |
|  |  |  |
|  |  | if (0 > fpm\_stdio\_init\_child(wp) || |
|  |  | 0 > fpm\_log\_init\_child(wp) || |
| Expand Down | |  |

6 changes: 0 additions & 6 deletions

6
[sapi/fpm/fpm/fpm\_stdio.c](#diff-5af9050ab2bfafe95720d7badd345919c64c8fcd41a16089facf80a439ce86b0 "sapi/fpm/fpm/fpm_stdio.c")

Show comments

[View file](/php/php-src/blob/69dee5c732fe982c82edb17d0dbc3e79a47748d8/sapi/fpm/fpm/fpm_stdio.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -103,12 +103,6 @@ int fpm\_stdio\_init\_child(struct fpm\_worker\_pool\_s \*wp) /\* {{{ \*/ |
|  |  | fpm\_globals.error\_log\_fd = -1; |
|  |  | zlog\_set\_fd(-1); |
|  |  |  |
|  |  | if (wp->listening\_socket != STDIN\_FILENO) { |
|  |  | if (0 > dup2(wp->listening\_socket, STDIN\_FILENO)) { |
|  |  | zlog(ZLOG\_SYSERROR, "failed to init child stdio: dup2()"); |
|  |  | return -1; |
|  |  | } |
|  |  | } |
|  |  | return 0; |
|  |  | } |
|  |  | /\* }}} \*/ |
| Expand Down | |  |

46 changes: 46 additions & 0 deletions

46
[sapi/fpm/tests/bug73342-nonblocking-stdio.phpt](#diff-9dd1177661abccb83074d9f15a712499783fc666116e2eb086c83edcf3c92996 "sapi/fpm/tests/bug73342-nonblocking-stdio.phpt")

Show comments

[View file](/php/php-src/blob/69dee5c732fe982c82edb17d0dbc3e79a47748d8/sapi/fpm/tests/bug73342-nonblocking-stdio.phpt)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,46 @@ |
|  |  | --TEST-- |
|  |  | FPM: bug73342 - Non-blocking stdin |
|  |  | --SKIPIF-- |
|  |  | <?php include "skipif.inc"; ?> |
|  |  | --FILE-- |
|  |  | <?php |
|  |  |  |
|  |  | require\_once "tester.inc"; |
|  |  |  |
|  |  | $cfg = <<<EOT |
|  |  | [global] |
|  |  | error\_log = {{FILE:LOG}} |
|  |  | [unconfined] |
|  |  | listen = {{ADDR}} |
|  |  | pm = dynamic |
|  |  | pm.max\_children = 5 |
|  |  | pm.start\_servers = 1 |
|  |  | pm.min\_spare\_servers = 1 |
|  |  | pm.max\_spare\_servers = 3 |
|  |  | EOT; |
|  |  |  |
|  |  | $code = <<<EOT |
|  |  | <?php |
|  |  | echo "Before\n"; |
|  |  | stream\_set\_blocking(fopen('php://stdin', 'r'), false); |
|  |  | echo "After\n"; |
|  |  | EOT; |
|  |  |  |
|  |  | $tester = new FPM\Tester($cfg, $code); |
|  |  | $tester->start(); |
|  |  | $tester->expectLogStartNotices(); |
|  |  | $tester->request()->expectBody("Before\nAfter"); |
|  |  | $tester->request()->expectBody("Before\nAfter"); |
|  |  | $tester->terminate(); |
|  |  | $tester->expectLogTerminatingNotices(); |
|  |  | $tester->close(); |
|  |  |  |
|  |  | ?> |
|  |  | Done |
|  |  | --EXPECT-- |
|  |  | Done |
|  |  | --CLEAN-- |
|  |  | <?php |
|  |  | require\_once "tester.inc"; |
|  |  | FPM\Tester::clean(); |
|  |  | ?> |

Toggle all file notes
Toggle all file annotations

### 3 comments on commit `69dee5c`

[![@kirotawa](https://avatars.githubusercontent.com/u/476400?s=80&v=4)](/kirotawa)

Copy link

### @kirotawa **[kirotawa](/kirotawa)** commented on `[69dee5c](/php/php-src/commit/69dee5c732fe982c82edb17d0dbc3e79a47748d8)` [Feb 19, 2020](#commitcomment-37377637)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Just out of curiosity,

When this patch is applied in php7.0 bug such as out of memory consumption happened.

Is there any other patches to fix this issue that should be applied to 7.0 to not have this issue?

Bug against 7.0 was reported here: [https://bugs.launchpad.net/ubuntu/+source/php7.0/+bug/1863881](https://bugs.launchpad.net/ubuntu/%2Bsource/php7.0/%2Bbug/1863881)

Sorry, something went wrong.

All reactions

[![@nikic](https://avatars.githubusercontent.com/u/216080?s=80&v=4)](/nikic)

Copy link

Member

Author

### @nikic **[nikic](/nikic)** commented on `[69dee5c](/php/php-src/commit/69dee5c732fe982c82edb17d0dbc3e79a47748d8)` [Feb 19, 2020](#commitcomment-37377896)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

[@kirotawa](https://github.com/kirotawa) Maybe you are looking for [cc5c51e](https://github.com/php/php-src/commit/cc5c51e7f0732067f105d13c6d355fcab5965c2f).

Sorry, something went wrong.

All reactions

[![@kirotawa](https://avatars.githubusercontent.com/u/476400?s=80&v=4)](/kirotawa)

Copy link

### @kirotawa **[kirotawa](/kirotawa)** commented on `[69dee5c](/php/php-src/commit/69dee5c732fe982c82edb17d0dbc3e79a47748d8)` [Feb 19, 2020](#commitcomment-37378246)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Thanks [@nikic](https://github.com/nikic) I`ll try this one and re-test check!!!

Sorry, something went wrong.

All reactions

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fcommit%2F69dee5c732fe982c82edb17d0dbc3e79a47748d8) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from usn.ubuntu.com_2082762c_20250125_015204.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-3766-1: PHP vulnerabilities

18 September 2018

Several security issues were fixed in PHP.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 18.04 ESM](/security/notices?release=bionic)
* [Ubuntu 16.04 ESM](/security/notices?release=xenial)
* [Ubuntu 14.04 ESM](/security/notices?release=trusty)

## Packages

* [php5](/security/cves?package=php5) - HTML-embedded scripting language interpreter
* [php7.0](/security/cves?package=php7.0) - HTML-embedded scripting language interpreter
* [php7.2](/security/cves?package=php7.2) - HTML-embedded scripting language interpreter

## Details

It was discovered that PHP incorrectly handled restarting certain child

processes when php-fpm is used. A remote attacker could possibly use this

issue to cause a denial of service. This issue was only addressed in Ubuntu

18.04 LTS. ([CVE-2015-9253](/security/CVE-2015-9253))

It was discovered that PHP incorrectly handled certain exif tags in JPEG

images. A remote attacker could possibly use this issue to cause PHP to

crash, resulting in a denial of service. ([CVE-2018-14851](/security/CVE-2018-14851), [CVE-2018-14883](/security/CVE-2018-14883))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 18.04

* [libapache2-mod-php7.2](https://launchpad.net/ubuntu/%2Bsource/php7.2)
  -
  [7.2.10-0ubuntu0.18.04.1](https://launchpad.net/ubuntu/%2Bsource/php7.2/7.2.10-0ubuntu0.18.04.1)
* [php7.2-cgi](https://launchpad.net/ubuntu/%2Bsource/php7.2)
  -
  [7.2.10-0ubuntu0.18.04.1](https://launchpad.net/ubuntu/%2Bsource/php7.2/7.2.10-0ubuntu0.18.04.1)
* [php7.2-cli](https://launchpad.net/ubuntu/%2Bsource/php7.2)
  -
  [7.2.10-0ubuntu0.18.04.1](https://launchpad.net/ubuntu/%2Bsource/php7.2/7.2.10-0ubuntu0.18.04.1)
* [php7.2-fpm](https://launchpad.net/ubuntu/%2Bsource/php7.2)
  -
  [7.2.10-0ubuntu0.18.04.1](https://launchpad.net/ubuntu/%2Bsource/php7.2/7.2.10-0ubuntu0.18.04.1)

##### Ubuntu 16.04

* [libapache2-mod-php7.0](https://launchpad.net/ubuntu/%2Bsource/php7.0)
  -
  [7.0.32-0ubuntu0.16.04.1](https://launchpad.net/ubuntu/%2Bsource/php7.0/7.0.32-0ubuntu0.16.04.1)
* [php7.0-cgi](https://launchpad.net/ubuntu/%2Bsource/php7.0)
  -
  [7.0.32-0ubuntu0.16.04.1](https://launchpad.net/ubuntu/%2Bsource/php7.0/7.0.32-0ubuntu0.16.04.1)
* [php7.0-cli](https://launchpad.net/ubuntu/%2Bsource/php7.0)
  -
  [7.0.32-0ubuntu0.16.04.1](https://launchpad.net/ubuntu/%2Bsource/php7.0/7.0.32-0ubuntu0.16.04.1)
* [php7.0-fpm](https://launchpad.net/ubuntu/%2Bsource/php7.0)
  -
  [7.0.32-0ubuntu0.16.04.1](https://launchpad.net/ubuntu/%2Bsource/php7.0/7.0.32-0ubuntu0.16.04.1)

##### Ubuntu 14.04

* [libapache2-mod-php5](https://launchpad.net/ubuntu/%2Bsource/php5)
  -
  [5.5.9+dfsg-1ubuntu4.26](https://launchpad.net/ubuntu/%2Bsource/php5/5.5.9%2Bdfsg-1ubuntu4.26)
* [php5-cgi](https://launchpad.net/ubuntu/%2Bsource/php5)
  -
  [5.5.9+dfsg-1ubuntu4.26](https://launchpad.net/ubuntu/%2Bsource/php5/5.5.9%2Bdfsg-1ubuntu4.26)
* [php5-cli](https://launchpad.net/ubuntu/%2Bsource/php5)
  -
  [5.5.9+dfsg-1ubuntu4.26](https://launchpad.net/ubuntu/%2Bsource/php5/5.5.9%2Bdfsg-1ubuntu4.26)
* [php5-fpm](https://launchpad.net/ubuntu/%2Bsource/php5)
  -
  [5.5.9+dfsg-1ubuntu4.26](https://launchpad.net/ubuntu/%2Bsource/php5/5.5.9%2Bdfsg-1ubuntu4.26)

In Ubuntu 16.04 LTS and Ubuntu 18.04 LTS, this update uses a new upstream

release, which includes additional bug fixes.

In general, a standard system update will make all the necessary changes.

## References

* [CVE-2015-9253](/security/CVE-2015-9253)
* [CVE-2018-14851](/security/CVE-2018-14851)
* [CVE-2018-14883](/security/CVE-2018-14883)

## Related notices

* [USN-4279-1](/security/notices/USN-4279-1)
* [USN-5300-1](/security/notices/USN-5300-1)
* [USN-3766-2](/security/notices/USN-3766-2)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from bugs.php.net_2cc13376_20250125_015155.html ===


| [Bugs](/) | [php.net](https://php.net/) |  [support](https://php.net/support.php) |  [documentation](https://php.net/docs.php) |  [report a bug](report.php) |  [advanced search](search.php) |  [search howto](search-howto.php) |  [statistics](stats.php) |  [random bug](random) |  [login](login.php) |
| --- | --- |
| go to bug id or search bugs for | |

| | [Sec Bug](bug.php?id=73342) #73342 | Vulnerability in php-fpm by changing stdin to non-blocking | | | | | | --- | --- | --- | --- | --- | --- | | Submitted: | 2016-10-18 20:02 UTC | Modified: | 2019-07-18 13:06 UTC | | Votes: | 23 | | --- | --- | | Avg. Score: | 4.7 ± 0.6 | | Reproduced: | 22 of 22 (100.0%) | | Same Version: | 8 (36.4%) | | Same OS: | 6 (27.3%) | | | From: | xuavis at gmail dot com | Assigned: | [bukka](search.php?cmd=display&assign=bukka) ([profile](https://people.php.net/bukka)) | | Status: | Closed | Package: | [FPM related](search.php?cmd=display&package_name[]=FPM+related) | | PHP Version: | 7.0Git-2016-10-18 (Git) | OS: | Ubuntu 16.04 | | Private report: | No | CVE-ID: | *None* |   View [Developer](bug.php?id=73342&edit=1) [Edit](bug.php?id=73342&edit=2)   **[2016-10-18 20:02 UTC] xuavis at gmail dot com** ``` Description: ------------ Tested on php 5.6 and 7.0 on both Ubuntu and FreeBSD.  When changing STDIN to non-blocking (see test script), php-fpm child processes start crashing.  This causes rapid restarting of child processes with high cpu load. This can be exploited for denial of service. Also scripts start getting cut off during execution.  Sometimes the master php-fpm process also stops responding to a restart/stop and requires a SIGKILL to stop.  Test script: --------------- <?php  stream_set_blocking(fopen('php://stdin', 'r'), false);  Expected result: ---------------- strace of child:  write(3, "\1\6\0\1\0S\5\0X-Powered-By: PHP/5.6.27"..., 112) = 112 shutdown(3, SHUT_WR)                    = 0 recvfrom(3, "\1\5\0\1\0\0\0\0", 8, 0, NULL, NULL) = 8 recvfrom(3, "", 8, 0, NULL, NULL)       = 0 close(3)                                = 0 setitimer(ITIMER_PROF, {it_interval={0, 0}, it_value={0, 0}}, NULL) = 0 accept(0, strace: Process 19005 detached  clean php-fpm log  Actual result: -------------- strace of child:  write(3, "\1\6\0\1\0S\5\0X-Powered-By: PHP/5.6.27"..., 112) = 112 shutdown(3, SHUT_WR)                    = 0 recvfrom(3, "\1\5\0\1\0\0\0\0", 8, 0, NULL, NULL) = 8 recvfrom(3, "", 8, 0, NULL, NULL)       = 0 close(3)                                = 0 setitimer(ITIMER_PROF, {it_interval={0, 0}, it_value={0, 0}}, NULL) = 0 accept(0, 0x7ffeb7a996c0, 0x7ffeb7a996b0) = -1 EAGAIN (Resource temporarily unavailable)  php-fpm log:  [17-Oct-2016 23:28:49.808690] NOTICE: pid 748, fpm_children_bury(), line 252: [pool www] child 6300 exited with code 0 after 0.001693 seconds from start [17-Oct-2016 23:28:49.808927] NOTICE: pid 748, fpm_children_make(), line 421: [pool www] child 6301 started [17-Oct-2016 23:28:49.808946] DEBUG: pid 748, fpm_event_loop(), line 419: event module triggered 1 events [17-Oct-2016 23:28:49.810581] DEBUG: pid 748, fpm_got_signal(), line 76: received SIGCHLD [17-Oct-2016 23:28:49.810611] NOTICE: pid 748, fpm_children_bury(), line 252: [pool www] child 6301 exited with code 0 after 0.001690 seconds from start [17-Oct-2016 23:28:49.810833] NOTICE: pid 748, fpm_children_make(), line 421: [pool www] child 6302 started [17-Oct-2016 23:28:49.810852] DEBUG: pid 748, fpm_event_loop(), line 419: event module triggered 1 events [17-Oct-2016 23:28:49.812501] DEBUG: pid 748, fpm_got_signal(), line 76: received SIGCHLD [17-Oct-2016 23:28:49.812533] NOTICE: pid 748, fpm_children_bury(), line 252: [pool www] child 6302 exited with code 0 after 0.001706 seconds from start [17-Oct-2016 23:28:49.812750] NOTICE: pid 748, fpm_children_make(), line 421: [pool www] child 6303 started [17-Oct-2016 23:28:49.812771] DEBUG: pid 748, fpm_event_loop(), line 419: event module triggered 1 events [17-Oct-2016 23:28:49.814332] DEBUG: pid 748, fpm_got_signal(), line 76: received SIGCHLD [17-Oct-2016 23:28:49.814362] NOTICE: pid 748, fpm_children_bury(), line 252: [pool www] child 6303 exited with code 0 after 0.001618 seconds from start [17-Oct-2016 23:28:49.814585] NOTICE: pid 748, fpm_children_make(), line 421: [pool www] child 6304 started   ``` PatchesPull RequestsHistoryAllCommentsChangesGit/SVN commitsRelated reports  **[2016-10-18 20:16 UTC] xuavis at gmail dot com** ``` The patch I think I added doesn't show for me. You can also find it at <https://gist.github.com/anonymous/080bdb43fe9a0eb57609a93e9e4dd093>  ``` **[2016-10-19 05:33 UTC] [stas@php.net](//people.php.net/stas)** -Assigned To: +Assigned To: fat **[2016-10-19 05:33 UTC] [stas@php.net](//people.php.net/stas)** ``` Not sure how it's security issue. If you can run code on this server, you have already crossed security border.  ``` **[2016-10-19 05:37 UTC] [krakjoe@php.net](//people.php.net/krakjoe)** ``` Agree with stas, not a sec issue.  ``` **[2016-10-19 07:36 UTC] xuavis at gmail dot com** ``` The case I could think of (and the reason I did choose Security as type) was due to shared hosting providers; Running multiple users on the same server where a single user can, as far as I know, (almost) undetectable use this to cause high load leading to a Denial of Service which affects other users.  ``` **[2016-10-19 19:03 UTC] [stas@php.net](//people.php.net/stas)** -Type: Security +Type: Bug **[2016-10-25 17:25 UTC] [cmb@php.net](//people.php.net/cmb)** -Status: Assigned +Status: Open -Assigned To: fat +Assigned To: **[2016-10-25 17:25 UTC] [cmb@php.net](//people.php.net/cmb)** ``` Unassigning from Jérôme, since his latest commit has been more than 4 years ago. Hopefully, somebody else will tackle this issue this way.  ``` **[2017-05-16 09:05 UTC] yago dot riveiro at gmail dot com** ``` This bug with Centos 7.0 and php 7 can be reproduced too  ``` **[2017-07-16 17:15 UTC] matt at datacodesolutions dot com** ``` This bug is causing issues on our server (Centos 7 / WHM / PHP 70) as well - high load which in turn cause extremely slow performance.  We use shell_exec to generate PDFs and it seems like this is causing the PHP-FPM service to get stuck in an endless loop of trying to start and then exiting.  <https://serverfault.com/questions/839135/nginx-php-fpm-child-exited-with-code-0>  [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62666 exited with code 0 after 0.103145 seconds from start [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62675 started [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62665 exited with code 0 after 0.108670 seconds from start [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62676 started [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62667 exited with code 0 after 0.111453 seconds from start [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62677 started [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62668 exited with code 0 after 0.112478 seconds from start [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62678 started [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62669 exited with code 0 after 0.098957 seconds from start [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62679 started [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62671 exited with code 0 after 0.094954 seconds from start [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62680 started [16-Jul-2017 12:49:45] NOTICE: [pool mysite_com] child 62670 exited with code 0 after 0.101192 seconds from start  ``` **[2018-02-23 16:54 UTC] [nikic@php.net](//people.php.net/nikic)** ``` Related To: [Bug #75968](bug.php?id=75968)  ``` **[2018-02-23 16:54 UTC] [nikic@php.net](//people.php.net/nikic)** ``` Related To: [Bug #75968](bug.php?id=75968)  ``` **[2018-02-23 16:55 UTC] [nikic@php.net](//people.php.net/nikic)** ``` Related To: [Bug #70185](bug.php?id=70185)  ``` **[2018-02-23 17:01 UTC] [nikic@php.net](//people.php.net/nikic)** -Status: Open +Status: Verified **[2018-02-23 18:26 UTC] [stas@php.net](//people.php.net/stas)** -Assigned To: +Assigned To: bukka **[2018-02-23 20:41 UTC] [nikic@php.net](//people.php.net/nikic)** ``` I think the patch from the first comment only works around the problem ... the real question is this: Why does FPM care about STDIN at all?  After some looking around, this seems to be what happens:  * wp->listening_socket is what we actually want to listen on.  * fpm_globals.listening_socket is always 0 (effectively STDIN), because that's what the global is initialized to. It's never changed.  * fpm_run() always returns fpm_globals.listening_socket and that's what fcgi listens on.  * to make things line up fpm_stdio_init_child() does a dup2(wp->listening_socket, STDIN_FILENO).  So effectively we take the listening socket, dup2 it to STDIN and then listen on STDIN. The following patch removes the indirection through STDIN:  diff --git a/sapi/fpm/fpm/fpm_children.c b/sapi/fpm/fpm/fpm_children.c index b48fa54..4ee316b 100644 --- a/sapi/fpm/fpm/fpm_children.c +++ b/sapi/fpm/fpm/fpm_children.c @@ -146,6 +146,7 @@ static struct fpm_child_s *fpm_child_find(pid_t pid) /* {{{ */  static void fpm_child_init(struct fpm_worker_pool_s *wp) /* {{{ */  {  	fpm_globals.max_requests = wp->config->pm_max_requests; +	fpm_globals.listening_socket = dup(wp->listening_socket);    	if (0 > fpm_stdio_init_child(wp)  ||  	    0 > fpm_log_init_child(wp)    || diff --git a/sapi/fpm/fpm/fpm_stdio.c b/sapi/fpm/fpm/fpm_stdio.c index 4072017..76e8b32 100644 --- a/sapi/fpm/fpm/fpm_stdio.c +++ b/sapi/fpm/fpm/fpm_stdio.c @@ -103,12 +103,6 @@ int fpm_stdio_init_child(struct fpm_worker_pool_s *wp) /* {{{ */  	fpm_globals.error_log_fd = -1;  	zlog_set_fd(-1);   -	if (wp->listening_socket != STDIN_FILENO) { -		if (0 > dup2(wp->listening_socket, STDIN_FILENO)) { -			zlog(ZLOG_SYSERROR, "failed to init child stdio: dup2()"); -			return -1; -		} -	}  	return 0;  }  /* }}} */  This also resolves the issue for me. However, I don't know if this has any side-effects, because something else relies on the STDIN mapping.  ``` **[2018-02-23 20:48 UTC] [nikic@php.net](//people.php.net/nikic)** ``` Related To: [Bug #73056](bug.php?id=73056)  ``` **[2018-02-23 21:10 UTC] [nikic@php.net](//people.php.net/nikic)** ``` Related To: [Bug #67796](bug.php?id=67796)  ``` **[2018-02-25 19:21 UTC] [bukka@php.net](//people.php.net/bukka)** ``` @nikic I think that the reason why FPM cares about STDIN is to conform FastCGI spec - namely section 2.2 ( <http://www.mit.edu/~yandros/doc/specs/fcgi-spec.html#S2.2> ) that states "FCGI_LISTENSOCK_FILENO equals STDIN_FILENO".  I guess it's because maybe some FastCGI application could access the data directly from the record but not really sure why. I can't really see the reason for that in the PHP case. I don't see any side effects of the patch at the moment but it might need a bit more thinking and testing.  ``` **[2018-03-07 09:22 UTC] kenny at kennynet dot co dot uk** ``` We've deployed the suggested patch removing the use of STDIN internally (currently in testing pending production deployment). I'll update this bug report if we see any problems caused by it.  ``` **[2018-04-24 06:10 UTC] gksalil at gmail dot com** ``` Hello     Is the patch working and fix the issue ? Can I apply this patch safely ?  Thanks ~S  ``` **[2018-06-11 12:39 UTC] alex at sirensclef dot com** ``` I'm under some pressure to put together a production PHP 7.2 + FPM setup, but then I ran head first into this bug. I don't know what's worse... that a critical subset of PHP functionality is incompatible with PHP-FPM, or that this has been known for so long and nothing has been done.  Is anyone aware of a workaround (other than this patch being evaluated)? I've got more of a mod_php background so I'm only just developing an understanding of the options here, but I've had no luck making adjustments to neutralize the issue. I've tested an option, for a dev server, that uses a cron to check the php-fpm log every minute and restart the service whenever the issue arises, but I can't put that into production. Worried this setup is simply a non-starter.  ``` **[2018-06-11 13:06 UTC] [nikic@php.net](//people.php.net/nikic)** ``` @bukka: What's the ETA on getting this merged? I saw that you submitted the PR for the fpm test revamp, so I assume that we'll start landing outstanding fpm patches soon?  ``` **[2018-06-12 09:03 UTC] kenny at kennynet dot co dot uk** ``` We've seen no problems yet with the proposed patch in our internal infrastructure and we've applied it against both 7.0 and 7.2.  ``` **[2018-06-12 15:47 UTC] [bukka@php.net](//people.php.net/bukka)** ``` @nikic Yep that's sort of the plan. I want to finish the fpm logging changes and then will try to look on this one and other stuff. Can't really give you an ETA but hopefully it won't take too long. Will see. ;)  ``` **[2018-06-12 16:34 UTC] [nikic@php.net](//people.php.net/nikic)** ``` @bukka: Thanks for the update. That sounds like things might still take a while, in which case I will go ahead and merge this patch now. We can't afford to delay this issue by an indeterminate amount of time, and given the production testing by kenny at kennynet dot co dot uk, I believe we can be sufficiently confident in the correctness of the change.  ``` **[2018-06-12 16:51 UTC] [bukka@php.net](//people.php.net/bukka)** ``` @nikic Please can you create a PR first. I will try to look at it this week and if I don't find a time, go ahead but I think I should have time. Also a test should be present - that should be quite easy to do in the new tests...  ``` **[2018-06-12 16:55 UTC] [bukka@php.net](//people.php.net/bukka)** ``` Btw. I would a bit careful as we are breaking FastCGI "spec" (it's not really a spec though and it doesn't seem to be a useful part anywya) so maybe we should just target 7.2 first and then possibly back port it. WDT?  ``` **[2018-06-12 17:34 UTC] [bukka@php.net](//people.php.net/bukka)** ``` I just merged the test revamp. Think that the test for this could be similar to the one for fastcgi_finish_request - <https://git.io/vhrAj> . Of course the PHP code will be different (as test script) and there should be probably two requests and possibly some other changes - not exactly sure atm. as I would have to try it but think you will get the idea ;)  ``` **[2018-06-12 17:45 UTC] [nikic@php.net](//people.php.net/nikic)** ``` @bukka: I can't remember writing it, but I have this test against the old infrastructure lying around: <https://gist.github.com/nikic/5904446746a7f90f98e856e6dda592ee> I'll port it and submit a PR.  ``` **[2018-06-12 18:42 UTC] [nikic@php.net](//people.php.net/nikic)** ``` @bukka: PR up at <https://github.com/php/php-src/pull/3287.>  ``` **[2018-06-20 10:22 UTC] DEBANANDA dot PAL at GMAIL dot COM** ``` Hi  Our current php5 version is 5.6.34. Pls let me know, if we can apply the patch (described in below link) to php5 5.6.34   <https://bugs.php.net/bug.php?id=73342&thanks=3>  Thanks, D Pal  ``` **[2018-06-20 10:33 UTC] [nikic@php.net](//people.php.net/nikic)** ``` Automatic comment on behalf of nikita.ppv@gmail.com Revision: <http://git.php.net/?p=php-src.git;a=commit;h=69dee5c732fe982c82edb17d0dbc3e79a47748d8> Log: Fixed [bug #73342](bug.php?id=73342)  ``` **[2018-06-20 10:33 UTC] [nikic@php.net](//people.php.net/nikic)** -Status: Verified +Status: Closed **[2018-06-20 10:37 UTC] [nikic@php.net](//people.php.net/nikic)** -Status: Closed +Status: Re-Opened -Type: Bug +Type: Security -Private report: No +Private report: Yes **[2018-06-20 10:37 UTC] [nikic@php.net](//people.php.net/nikic)** ``` Reopening with security classification to track backports to PHP 5.6 and PHP 7.0.  ``` **[2018-06-20 11:18 UTC] [bukka@php.net](//people.php.net/bukka)** ``` I don't think this is a security issue. It can cause issue just for the same pool running under same user. Basically it can't leak any information from the different pool. That actually reminds me <https://bugs.php.net/bug.php?id=76067&edit=1> that had similar discussion and should be also changed to just a bug.  ``` **[2018-07-06 09:20 UTC] zoolyka at gmail dot com** ``` The issue still exists (7.2.7-1+ubuntu16.04.1+deb.sury.org+1), and its very annoying. As a workaround append " &>/dev/null" to the executed command.  ``` **[2018-07-06 17:40 UTC] zoolyka at gmail dot com** ``` Sorry, that "&>/dev/null" did not worked out. Using the following method instead of exec, shell_exec, etc. prevents the crashing loop:  $command = 'command to execute...'; $pipes = array(); $process = proc_open(   $command,   array(      0 => array('pipe', 'r'),      1 => array('pipe', 'w'),      2 => array('pipe', 'w'),   ),   $pipes );  stream_set_blocking($pipes[1], true); stream_set_blocking($pipes[2], true);  if (   is_resource($process) ) {    $output = stream_get_contents($pipes[1]);   $error = stream_get_contents($pipes[2]);    fclose($pipes[1]);   fclose($pipes[2]);    proc_close($process);  }  ``` **[2019-03-25 18:35 UTC] marc at palaueb dot com** ``` Hi! I've been struggling my head from last week, seriosly, about a behavior that makes no sense. We have some servers with debian7 and a script that sends "kill -USR2 `cat pid_file`" and reloads the php-fpm configurations gracefully.  Well, I'm being implementing the same configuration with debian9 (drived by systemD) and ... it don't works, I must do 'systemctl kill -s USR2 php-fpm.service', if not, it won't work.  And how I have arribed here?  Well, I have been compiling revisions of 7.1 and 7.2 since I have found the revisions that have a shared point, this bugfix.  Well, I don't know if I must open a new bug to solve the fix of this bug, because no one has commented it anyway on the Internet (3 full days of researching).  Maybe there is a command to configure systemD to accept the kill sent to the childrens (I have not try it yet).  Well, anyway, I just want to make you know that this bugfix generated a new one.  How to test it:  On a Debian 9 machine, configure the service into systemD, then open a new terminal and watch the behavior:  'watch -n.1 "systemctl status php72.service"'  Then send 'kill -USR2 PID_MASTER_PROCESS' and see, nothing happends (if you wait till process_control_timeout passes it hard kills all the childrens). Now send: 'systemctl kill -s USR2 php72.service' and watch how it reloads childrens.  Ok, now try with php-fpm revisions 7.1.19 or 7.2.7. It works without problem.  ``` **[2019-07-18 13:06 UTC] [nikic@php.net](//people.php.net/nikic)** -Status: Re-Opened +Status: Closed **[2019-07-18 13:06 UTC] [nikic@php.net](//people.php.net/nikic)** ``` Closing this as the time for 5.6/7.0 backports has already long since passed, and this fix is in 7.1.  ``` |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

|  | |
| --- | --- |
| [PHP](https://php.net/) [Copyright © 2001-2025 The PHP Group](https://php.net/copyright.php) All rights reserved. | Last updated: Sat Jan 25 01:01:28 2025 UTC |



=== Content from github.com_8294c172_20250125_015156.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fblob%2FPHP-7.1.20%2FNEWS)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fphp%2Fphp-src%2Fblob%2FPHP-7.1.20%2FNEWS)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=php%2Fphp-src)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[php](/php)
/
**[php-src](/php/php-src)**
Public

* [Notifications](/login?return_to=%2Fphp%2Fphp-src) You must be signed in to change notification settings
* [Fork
  7.8k](/login?return_to=%2Fphp%2Fphp-src)
* [Star
   38.5k](/login?return_to=%2Fphp%2Fphp-src)

* [Code](/php/php-src/tree/PHP-7.1.20)
* [Issues
  750](/php/php-src/issues)
* [Pull requests
  563](/php/php-src/pulls)
* [Actions](/php/php-src/actions)
* [Security](/php/php-src/security)
* [Insights](/php/php-src/pulse)

Additional navigation options

* [Code](/php/php-src/tree/PHP-7.1.20)
* [Issues](/php/php-src/issues)
* [Pull requests](/php/php-src/pulls)
* [Actions](/php/php-src/actions)
* [Security](/php/php-src/security)
* [Insights](/php/php-src/pulse)

## Files

 PHP-7.1.20
## Breadcrumbs

1. [php-src](/php/php-src/tree/PHP-7.1.20)
/
# NEWS

Copy path Blame  Blame
## Latest commit

## History

[History](/php/php-src/commits/PHP-7.1.20/NEWS)3867 lines (3260 loc) · 153 KB PHP-7.1.20
## Breadcrumbs

1. [php-src](/php/php-src/tree/PHP-7.1.20)
/
# NEWS

Top
## File metadata and controls

* Code
* Blame

3867 lines (3260 loc) · 153 KB[Raw](https://github.com/php/php-src/raw/refs/heads/PHP-7.1.20/NEWS)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000PHP NEWS|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||19 Jul 2018, PHP 7.1.20
- Core: . Fixed bug #76534 (PHP hangs on 'illegal string offset on string references with an error handler). (Laruence) . Fixed bug #76502 (Chain of mixed exceptions and errors does not serialize properly). (Nikita)
- Date: . Fixed bug #76462 (Undefined property: DateInterval::$f). (Anatol)
- exif: . Fixed bug #76423 (Int Overflow lead to Heap OverFlow in exif\_thumbnail\_extract of exif.c). (Stas) . Fixed bug #76557 (heap-buffer-overflow (READ of size 48) while reading exif data). (Stas)
- FPM: . Fixed bug #73342 (Vulnerability in php-fpm by changing stdin to non-blocking). (Nikita)
- GMP: . Fixed bug #74670 (Integer Underflow when unserializing GMP and possible other classes). (Nikita)
- intl: . Fixed bug #76556 (get\_debug\_info handler for BreakIterator shows wrong type). (cmb)
- mbstring: . Fixed bug #76532 (Integer overflow and excessive memory usage in mb\_strimwidth). (MarcusSchwarz)
- PGSQL: . Fixed bug #76548 (pg\_fetch\_result did not fetch the next row). (Anatol)
- phpdbg: . Fix arginfo wrt. optional/required parameters. (cmb)
- Reflection: . Fixed bug #76536 (PHP crashes with core dump when throwing exception in error handler). (Laruence) . Fixed bug #75231 (ReflectionProperty#getValue() incorrectly works with inherited classes). (Nikita)
- Standard: . Fixed bug #76505 (array\_merge\_recursive() is duplicating sub-array keys). (Laruence) . Fixed bug #71848 (getimagesize with $imageinfo returns false). (cmb)
- Win32: . Fixed bug #76459 (windows linkinfo lacks openbasedir check). (Anatol)
22 Jun 2019, PHP 7.1.19
- CLI Server: . Fixed bug #76333 (PHP built-in server does not find files if root path contains special characters). (Anatol)
- OpenSSL: . Fixed bug #76296 (openssl\_pkey\_get\_public does not respect open\_basedir). (Erik Lax, Jakub Zelenka) . Fixed bug #76174 (openssl extension fails to build with LibreSSL 2.7). (Jakub Zelenka)
- SPL: . Fixed bug #76367 (NoRewindIterator segfault 11). (Laruence)
- Standard: . Fixed bug #76335 ("link(): Bad file descriptor" with non-ASCII path). (Anatol) . Fixed bug #76383 (array\_map on $GLOBALS returns IS\_INDIRECT). (Bob)
24 May 2018, PHP 7.1.18
- FPM: . Fixed bug #76075 --with-fpm-acl wrongly tries to find libacl on FreeBSD. (mgorny)
- intl: . Fixed bug #74385 (Locale::parseLocale() broken with some arguments). (Anatol)
- Opcache: . Fixed bug #76205 (PHP-FPM sporadic crash when running Infinitewp). (Dmitry) . Fixed bug #76275 (Assertion failure in file cache when unserializing empty try\_catch\_array). (Nikita) . Fixed bug #76281 (Opcache causes incorrect "undefined variable" errors). (Nikita)
- Reflection: . Fixed arginfo for array\_replace(\_recursive) and array\_merge(\_recursive). (carusogabriel)
26 Apr 2018, PHP 7.1.17
- Date: . Fixed bug #76131 (mismatch arginfo for date\_create). (carusogabriel)
- FPM: . Fixed bug #68440 (ERROR: failed to reload: execvp() failed: Argument list too long). (Jacob Hipps) . Fixed incorrect write to getenv result in FPM reload. (Jakub Zelenka)
- GD: . Fixed bug #52070 (imagedashedline() - dashed line sometimes is not visible). (cmb)
- intl: . Fixed bug #76153 (Intl compilation fails with icu4c 61.1). (Anatol)
- mbstring: . Fixed bug #75944 (Wrong cp1251 detection). (dmk001) . Fixed bug #76113 (mbstring does not build with Oniguruma 6.8.1). (chrullrich, cmb)
- phpdbg: . Fixed bug #76143 (Memory corruption: arbitrary NUL overwrite). (Laruence)
- SPL: . Fixed bug #76131 (mismatch arginfo for splarray constructor).  (carusogabriel)
- standard: . Fixed bug #75996 (incorrect url in header for mt\_rand). (tatarbj)
29 Mar 2018, PHP 7.1.16
- Core: . Fixed bug #76025 (Segfault while throwing exception in error\_handler). (Dmitry, Laruence) . Fixed bug #76044 ('date: illegal option -- -' in ./configure on FreeBSD). (Anatol)
- FPM: . Fixed bug #75605 (Dumpable FPM child processes allow bypassing opcache access controls). (Jakub Zelenka)
- GD: . Fixed bug #73957 (signed integer conversion in imagescale()). (cmb)
- ODBC: . Fixed bug #76088 (ODBC functions are not available by default on Windows). (cmb)
- Opcache: . Fixed bug #76074 (opcache corrupts variable in for-loop). (Bob)
- Phar: . Fixed bug #76085 (Segmentation fault in buildFromIterator when directory name contains a \n). (Laruence)
- Standard: . Fixed bug #74139 (mail.add\_x\_header default inconsistent with docs). (cmb) . Fixed bug #76068 (parse\_ini\_string fails to parse "[foo]\nbar=1|>baz" with segfault). (Anatol)
01 Mar 2018, PHP 7.1.15
- Apache2Handler: . Fixed bug #75882 (a simple way for segfaults in threadsafe php just with configuration). (Anatol)
- Date: . Fixed bug #75857 (Timezone gets truncated when formatted). (carusogabriel) . Fixed bug #75928 (Argument 2 for `DateTimeZone::listIdentifiers()` should accept `null`). (Pedro Lacerda) . Fixed bug #68406 (calling var\_dump on a DateTimeZone object modifies it). (jhdxr)
- FTP: . Fixed ftp\_pasv arginfo. (carusogabriel)
-GD: . Fixed imagesetinterpolation arginfo. (Gabriel Caruso)
- iconv: . Fixed bug #75867 (Freeing uninitialized pointer). (Philip Prindeville)
- LDAP: . Fixed bug #49876 (Fix LDAP path lookup on 64-bit distros). (dzuelke)
- libxml2: . Fixed bug #75871 (use pkg-config where available). (pmmaga)
- mysqlnd . Fixed negotiation of MySQL authenticaton plugin. (Johannes) . Fixed a memleak with SSL connections. (Johannes)
- ODBC: . Fixed bug #73725 (Unable to retrieve value of varchar(max) type). (Anatol)
- Opcache: . Fixed bug #75969 (Assertion failure in live range DCE due to block pass misoptimization). (Nikita)
- OpenSSL: . Fixed openssl\_\* arginfos. (carusogabriel)
- PCNTL: . Fixed bug #75873 (pcntl\_wexitstatus returns incorrect on Big\_Endian platform (s390x)). (Sam Ding)
- PGSQL: . Fixed #75838 (Memory leak in pg\_escape\_bytea()). (ard\_1 at mail dot ru)
- Phar: . Fixed bug #65414 (deal with leading slash when adding files correctly). (bishopb)
- SPL: . Fixed bug #74519 (strange behavior of AppendIterator). (jhdxr)
- Standard: . Fixed bug #75961 (Strange references behavior). (Laruence) . Fixed bug #75916 (DNS\_CAA record results contain garbage). (Mike,  Philip Sharp) . Fixed some arginfos. (carusogabriel) . Fixed bug #75981 (stack-buffer-overflow while parsing HTTP response). (Stas)
01 Feb 2018, PHP 7.1.14
- Core: . Fixed bug #75679 (Path 260 character problem). (Anatol) . Fixed bug #75786 (segfault when using spread operator on generator passed by reference). (Nikita) . Fixed bug #75799 (arg of get\_defined\_functions is optional). (carusogabriel) . Fixed bug #75396 (Exit inside generator finally results in fatal error). (Nikita) . Fixed bug #75079 (self keyword leads to incorrectly generated TypeError when in closure in trait). (Nikita)
- FCGI: . Fixed bug #75794 (getenv() crashes on Windows 7.2.1 when second parameter is false). (Anatol)
- IMAP: . Fixed bug #75774 (imap\_append HeapCorruction). (Anatol)
- Mbstring: . Fixed bug #62545 (wrong unicode mapping in some charsets). (cmb)
- Opcache: . Fixed bug #75720 (File cache not populated after SHM runs full). (Dmitry) . Fixed bug #75579 (Interned strings buffer overflow may cause crash). (Dmitry)
- PGSQL: . Fixed bug #75671 (pg\_version() crashes when called on a connection to cockroach). (magicaltux at gmail dot com)
- Readline: . Fixed bug #75775 (readline\_read\_history segfaults with empty file). (Anatol)
- SAPI: . Fixed bug #75735 ([embed SAPI] Segmentation fault in sapi\_register\_post\_entry). (Laruence)
- SOAP: . Fixed bug #70469 (SoapClient generates E\_ERROR even if exceptions=1 is used). (Anton Artamonov) . Fixed bug #75502 (Segmentation fault in zend\_string\_release). (Nikita)
- SPL: . Fixed bug #75717 (RecursiveArrayIterator does not traverse arrays by reference). (Nikita) . Fixed bug #75242 (RecursiveArrayIterator doesn't have constants from parent class). (Nikita) . Fixed bug #73209 (RecursiveArrayIterator does not iterate object properties). (Nikita)
- Standard: . Fixed bug #75781 (substr\_count incorrect result). (Laruence)
04 Jan 2018, PHP 7.1.13
- Core: . Fixed bug #75573 (Segmentation fault in 7.1.12 and 7.0.26). (Laruence) . Fixed bug #75384 (PHP seems incompatible with OneDrive files on demand). (Anatol) . Fixed bug #74862 (Unable to clone instance when private \_\_clone defined). (Daniel Ciochiu) . Fixed bug #75074 (php-process crash when is\_file() is used with strings longer 260 chars). (Anatol) . Fixed bug #69727 (Remove timestamps from build to make it reproducible). (jelle van der Waa)
- CLI Server: . Fixed bug #60471 (Random "Invalid request (unexpected EOF)" using a router script). (SammyK) . Fixed bug #73830 (Directory does not exist). (Anatol)
- FPM: . Fixed bug #64938 (libxml\_disable\_entity\_loader setting is shared between requests). (Remi)
- GD: . Fixed bug #75571 (Potential infinite loop in gdImageCreateFromGifCtx). (Christoph)
- Opcache: . Fixed bug #75608 ("Narrowing occurred during type inference" error). (Laruence, Dmitry) . Fixed bug #75570 ("Narrowing occurred during type inference" error). (Dmitry) . Fixed bug #75579 (Interned strings buffer overflow may cause crash). (Dmitry)
- PCRE: . Fixed bug #74183 (preg\_last\_error not returning error code after error). (Andrew Nester)
- Phar: . Fixed bug #74782 (remove file name from output to avoid XSS). (stas)
- Standard: . Fixed bug #75511 (fread not free unused buffer). (Laruence) . Fixed bug #75514 (mt\_rand returns value outside [$min,$max]+ on 32-bit) (Remi) . Fixed bug #75535 (Inappropriately parsing HTTP response leads to PHP segment fault). (Nikita) . Fixed bug #75409 (accept EFAULT in addition to ENOSYS as indicator  that getrandom() is missing). (sarciszewski) . Fixed bug #73124 (php\_ini\_scanned\_files() not reporting correctly). (John Stevenson) . Fixed bug #75574 (putenv does not work properly if parameter contains non-ASCII unicode character). (Anatol)
- Zip: . Fixed bug #75540 (Segfault with libzip 1.3.1). (Remi)
23 Nov 2017, PHP 7.1.12
- Core: . Fixed bug #75420 (Crash when modifing property name in \_\_isset for BP\_VAR\_IS). (Laruence) . Fixed bug #75368 (mmap/munmap trashing on unlucky allocations). (Nikita, Dmitry)
- CLI: . Fixed bug #75287 (Builtin webserver crash after chdir in a shutdown function). (Laruence)
- Enchant: . Fixed bug #53070 (enchant\_broker\_get\_path crashes if no path is set). (jelle van der Waa, cmb) . Fixed bug #75365 (Enchant still reports version 1.1.0). (cmb)
- Exif: . Fixed bug #75301 (Exif extension has built in revision version). (Peter Kokot)
- GD: . Fixed bug #65148 (imagerotate may alter image dimensions). (cmb) . Fixed bug #75437 (Wrong reflection on imagewebp). (Fabien Villepinte)
- intl: . Fixed bug #75317 (UConverter::setDestinationEncoding changes source instead  of destination). (andrewnester)
- interbase: . Fixed bug #75453 (Incorrect reflection for ibase\_[p]connect). (villfa)
- Mysqli: . Fixed bug #75434 (Wrong reflection for mysqli\_fetch\_all function). (Fabien Villepinte)
- OCI8: . Fixed valgrind issue. (Tianfang Yang)
- OpenSSL: . Fixed bug #75363 (openssl\_x509\_parse leaks memory). (Bob, Jakub Zelenka) . Fixed bug #75307 (Wrong reflection for openssl\_open function). (villfa)
- Opcache: . Fixed bug #75373 (Warning Internal error: wrong size calculation). (Laruence, Dmitry)
- PGSQL: . Fixed bug #75419 (Default link incorrectly cleared/linked by pg\_close()). (Sara)
- SOAP: . Fixed bug #75464 (Wrong reflection on SoapClient::\_\_setSoapHeaders). (villfa)
- Zlib: . Fixed bug #75299 (Wrong reflection on inflate\_init and inflate\_add). (Fabien Villepinte)
26 Oct 2017, PHP 7.1.11
- Core: . Fixed bug #75241 (Null pointer dereference in zend\_mm\_alloc\_small()). (Laruence) . Fixed bug #75236 (infinite loop when printing an error-message). (Andrea) . Fixed bug #75252 (Incorrect token formatting on two parse errors in one request). (Nikita) . Fixed bug #75220 (Segfault when calling is\_callable on parent).  (andrewnester) . Fixed bug #75290 (debug info of Closures of internal functions contain garbage argument names). (Andrea)
- Apache2Handler: . Fixed bug #75311 (error: 'zend\_hash\_key' has no member named 'arKey' in apache2handler). (mcarbonneaux)
- Date: . Fixed bug #75055 (Out-Of-Bounds Read in timelib\_meridian()). (Derick)
- Hash: . Fixed bug #75303 (sha3 hangs on bigendian). (Remi)
- Intl: . Fixed bug #75318 (The parameter of UConverter::getAliases() is not optional). (cmb)
- litespeed: . Fixed bug #75248 (Binary directory doesn't get created when building  only litespeed SAPI). (petk) . Fixed bug #75251 (Missing program prefix and suffix). (petk)
- mcrypt: . Fixed bug #72535 (arcfour encryption stream filter crashes php). (Leigh)
- MySQLi: . Fixed bug #75018 (Data corruption when reading fields of bit type). (Anatol)
- OCI8: . Fixed incorrect reference counting. (Dmitry, Tianfang Yang)
- Opcache . Fixed bug #75255 (Request hangs and not finish). (Dmitry)
- PCRE: . Fixed bug #75207 (applied upstream patch for CVE-2016-1283). (Anatol)
- PDO\_mysql: . Fixed bug #75177 (Type 'bit' is fetched as unexpected string). (Anatol)
- SPL: . Fixed bug #73629 (SplDoublyLinkedList::setIteratorMode masks intern flags). (J. Jeising, cmb)
28 Sep 2017, PHP 7.1.10
- Core: . Fixed bug #75042 (run-tests.php issues with EXTENSION block). (John Boehr)
- BCMath: . Fixed bug #44995 (bcpowmod() fails if scale != 0). (cmb) . Fixed bug #46781 (BC math handles minus zero incorrectly). (cmb) . Fixed bug #54598 (bcpowmod() may return 1 if modulus is 1). (okano1220, cmb) . Fixed bug #75178 (bcpowmod() misbehaves for non-integer base or modulus). (cmb)
- CLI server: . Fixed bug #70470 (Built-in server truncates headers spanning over TCP packets). (bouk)
- CURL: . Fixed bug #75093 (OpenSSL support not detected). (Remi)
- GD: . Fixed bug #75124 (gdImageGrayScale() may produce colors). (cmb) . Fixed bug #75139 (libgd/gd\_interpolation.c:1786: suspicious if ?). (cmb)
- Gettext: . Fixed bug #73730 (textdomain(null) throws in strict mode). (cmb)
- Intl: . Fixed bug #75090 (IntlGregorianCalendar doesn't have constants from parent class). (tpunt) . Fixed bug #75193 (segfault in collator\_convert\_object\_to\_string). (Remi)
- PDO\_OCI: . Fixed bug #74631 (PDO\_PCO with PHP-FPM: OCI environment initialized before PHP-FPM sets it up). (Ingmar Runge)
- SPL: . Fixed bug #75155 (AppendIterator::append() is broken when appending another AppendIterator). (Nikita) . Fixed bug #75173 (incorrect behavior of AppendIterator::append in foreach loop). (jhdxr)
- Standard: . Fixed bug #75152 (signed integer overflow in parse\_iv). (Laruence) . Fixed bug #75097 (gethostname fails if your host name is 64 chars long). (Andrea)
31 Aug 2017, PHP 7.1.9
- Core: . Fixed bug #74947 (Segfault in scanner on INF number). (Laruence) . Fixed bug #74954 (null deref and segfault in zend\_generator\_resume()). (Bob) . Fixed bug #74725 (html\_errors=1 breaks unhandled exceptions). (Andrea) . Fixed bug #75063 (Main CWD initialized with wrong codepage). (Anatol) . Fixed bug #75349 (NAN comparison). (Sara)
- cURL: . Fixed bug #74125 (Fixed finding CURL on systems with multiarch support). (cebe)
- Date: . Fixed bug #75002 (Null Pointer Dereference in timelib\_time\_clone). (Derick)
- Intl: . Fixed bug #74993 (Wrong reflection on some locale\_\* functions). (Sara)
- Mbstring: . Fixed bug #71606 (Segmentation fault mb\_strcut with HTML-ENTITIES encoding). (cmb) . Fixed bug #62934 (mb\_convert\_kana() does not convert iteration marks). (Nikita) . Fixed bug #75001 (Wrong reflection on mb\_eregi\_replace). (Fabien Villepinte)
- MySQLi: . Fixed bug #74968 (PHP crashes when calling mysqli\_result::fetch\_object with an abstract class). (Anatol)
- OCI8: . Expose oci\_unregister\_taf\_callback() (Tianfang Yang)
- Opcache: . Fixed bug #74980 (Narrowing occurred during type inference). (Laruence)
- phar: . Fixed bug #74991 (include\_path has a 4096 char limit in some cases). (bwbroersma)
- Reflection: . Fixed bug #74949 (null pointer dereference in \_function\_string). (Laruence)
- Session: . Fixed bug #74892 (Url Rewriting (trans\_sid) not working on urls that start with "#"). (Andrew Nester) . Fixed bug #74833 (SID constant created with wrong module number). (Anatol)
- SimpleXML: . Fixed bug #74950 (nullpointer deref in simplexml\_element\_getDocNamespaces). (Laruence)
- SPL: . Fixed bug #75049 (spl\_autoload\_unregister can't handle spl\_autoload\_functions results). (Laruence) . Fixed bug #74669 (Unserialize ArrayIterator broken). (Andrew Nester) . Fixed bug #74977 (Appending AppendIterator leads to segfault).  (Andrew Nester) . Fixed bug #75015 (Crash in recursive iterator destructors). (Julien)
- Standard: . Fixed bug #75075 (unpack with X\* causes infinity loop). (Laruence) . Fixed bug #74103 (heap-use-after-free when unserializing invalid array size). (Nikita) . Fixed bug #75054 (A Denial of Service Vulnerability was found when performing deserialization). (Nikita)
- WDDX: . Fixed bug #73793 (WDDX uses wrong decimal seperator). (cmb)
- XMLRPC: . Fixed bug #74975 (Incorrect xmlrpc serialization for classes with declared properties). (blar)
03 Aug 2017, PHP 7.1.8
- Core: . Fixed bug #74832 (Loading PHP extension with already registered function  name leads to a crash). (jpauli) . Fixed bug #74780 (parse\_url() broken when query string contains colon).  (jhdxr) . Fixed bug #74761 (Unary operator expected error on some systems). (petk) . Fixed bug #73900 (Use After Free in unserialize() SplFixedArray). (nikic) . Fixed bug #74923 (Crash when crawling through network share). (Anatol) . Fixed bug #74913 (fixed incorrect poll.h include). (petk) . Fixed bug #74906 (fixed incorrect errno.h include). (petk)
- Date: . Fixed bug #74852 (property\_exists returns true on unknown DateInterval  property). (jhdxr)
- OCI8: . Fixed bug #74625 (Integer overflow in oci\_bind\_array\_by\_name). (Ingmar Runge)
- Opcache: . Fixed bug #74623 (Infinite loop in type inference when using HTMLPurifier). (nikic)
- OpenSSL: . Fixed bug #74798 (pkcs7\_en/decrypt does not work if \x0a is used in content). (Anatol) . Added OPENSSL\_DONT\_ZERO\_PAD\_KEY constant to prevent key padding and fix bug #71917 (openssl\_open() returns junk on envelope < 16 bytes) and bug #72362 (OpenSSL Blowfish encryption is incorrect for short keys). (Jakub Zelenka)
- PDO: . Fixed bug #69356 (PDOStatement::debugDumpParams() truncates query). (Adam Baratz)
- SPL: . Fixed bug #73471 (PHP freezes with AppendIterator). (jhdxr)
- SQLite3: . Fixed bug #74883 (SQLite3::\_\_construct() produces "out of memory" exception with invalid flags). (Anatol)
- Wddx: . Fixed bug #73173 (huge memleak when wddx\_unserialize). (tloi at fortinet dot com)
- zlib: . Fixed bug #73944 (dictionary option of inflate\_init() does not work). (wapmorgan)
06 Jul 2017, PHP 7.1.7
- Core: . Fixed bug #74738 (Multiple [PATH=] and [HOST=] sections not properly parsed). (Manuel Mausz) . Fixed bug #74658 (Undefined constants in array properties result in broken properties). (Laruence) . Fixed misparsing of abstract unix domain socket names. (Sara) . Fixed bug #74603 (PHP INI Parsing Stack Buffer Overflow Vulnerability). (Stas) . Fixed bug #74101, bug #74614 (Unserialize Heap Use-After-Free (READ: 1) in zval\_get\_type). (Nikita) . Fixed bug #74111 (Heap buffer overread (READ: 1) finish\_nested\_data from unserialize). (Nikita) . Fixed bug #74819 (wddx\_deserialize() heap out-of-bound read via php\_parse\_date()). (Derick)
- Date: . Fixed bug #74639 (implement clone for DatePeriod and DateInterval). (andrewnester)
- DOM: . Fixed bug #69373 (References to deleted XPath query results). (ttoohey)
- GD: . Fixed bug #74435 (Buffer over-read into uninitialized memory). (cmb)
- Intl: . Fixed bug #73473 (Stack Buffer Overflow in msgfmt\_parse\_message). (libnex) . Fixed bug #74705 (Wrong reflection on Collator::getSortKey and collator\_get\_sort\_key). (Tyson Andre, Remi)
- Mbstring: . Add oniguruma upstream fix (CVE-2017-9224, CVE-2017-9226, CVE-2017-9227, CVE-2017-9228, CVE-2017-9229) (Remi, Mamoru TASAKA)
- OCI8: . Add TAF callback (PR #2459). (KoenigsKind)
- Opcache: . Fixed bug #74663 (Segfault with opcache.memory\_protect and validate\_timestamp). (Laruence) . Revert opcache.enable\_cli to default disabled. (Nikita)
- OpenSSL: . Fixed bug #74720 (pkcs7\_en/decrypt does not work if \x1a is used in content). (Anatol) . Fixed bug #74651 (negative-size-param (-1) in memcpy in zif\_openssl\_seal()). (Stas)
- PDO\_OCI: . Support Instant Client 12.2 in --with-pdo-oci configure option. (Tianfang Yang)
- Reflection: . Fixed bug #74673 (Segfault when cast Reflection object to string with undefined constant). (Laruence)
- SPL: . Fixed bug #74478 (null coalescing operator failing with SplFixedArray). (jhdxr)
- FTP: . Fixed bug #74598 (ftp:// wrapper ignores context arg). (Sara)
- PHAR: . Fixed bug #74386 (Phar::\_\_construct reflection incorrect). (villfa)
- SOAP . Fixed bug #74679 (Incorrect conversion array with WSDL\_CACHE\_MEMORY). (Dmitry)
- Streams: . Fixed bug #74556 (stream\_socket\_get\_name() returns '\0'). (Sara)
8 Jun 2017, PHP 7.1.6
- Core: . Fixed bug #74600 (crash (SIGSEGV) in \_zend\_hash\_add\_or\_update\_i). (Laruence) . Fixed bug #74546 (SIGILL in ZEND\_FETCH\_CLASS\_CONSTANT\_SPEC\_CONST\_CONST). (Laruence) . Fixed bug #74589 (\_\_DIR\_\_ wrong for unicode character). (Anatol)
- intl: . Fixed bug #74468 (wrong reflection on Collator::sortWithSortKeys). (villfa)
- MySQLi: . Fixed bug #74547 (mysqli::change\_user() doesn't accept null as $database argument w/strict\_types). (Anatol)
- Opcache: . Fixed bug #74596 (SIGSEGV with opcache.revalidate\_path enabled). (Laruence)
- phar: . Fixed bug #51918 (Phar::webPhar() does not handle requests sent through PUT and DELETE method). (Christian Weiske)
- Readline: . Fixed bug #74490 (readline() moves the cursor to the beginning of the line). (Anatol)
- Standard: . Fixed bug #74510 (win32/sendmail.c anchors CC header but not BCC). (Damian Wadley, Anatol)
- xmlreader: . Fixed bug #74457 (Wrong reflection on XMLReader::expand). (villfa)
11 May 2017, PHP 7.1.5
- Core: . Fixed bug #74408 (Endless loop bypassing execution time limit). (Laruence) . Fixed bug #74353 (Segfault when killing within bash script trap code). (Laruence) . Fixed bug #74340 (Magic function \_\_get has different behavior in php 7.1.x). (Nikita) . Fixed bug #74188 (Null coalescing operator fails for undeclared static class properties). (tpunt) . Fixed bug #74444 (multiple catch freezes in some cases). (David Matějka) . Fixed bug #74410 (stream\_select() is broken on Windows Nanoserver). (Matt Ficken) . Fixed bug #74337 (php-cgi.exe crash on facebook callback). (Anton Serbulov) . Patch for bug #74216 was reverted. (Anatol)
- Date: . Fixed bug #74404 (Wrong reflection on DateTimeZone::getTransitions). (krakjoe) . Fixed bug #74080 (add constant for RFC7231 format datetime). (duncan3dc)
- DOM: . Fixed bug #74416 (Wrong reflection on DOMNode::cloneNode). (Remi, Fabien Villepinte)
- Fileinfo: . Fixed bug #74379 (syntax error compile error in libmagic/apprentice.c). (Laruence)
- GD: . Fixed bug #74343 (compile fails on solaris 11 with system gd2 library). (krakjoe)
- MySQLi: . Fixed bug #74432 (mysqli\_connect adding ":3306" to $host if $port parameter not given). (Anatol)
- MySQLnd: . Fixed bug #74376 (Invalid free of persistent results on error/connection loss). (Yussuf Khalil)
- Intl: . Fixed bug #65683 (Intl does not support DateTimeImmutable). (Ben Scholzen) . Fixed bug #74298 (IntlDateFormatter->format() doesn't return microseconds/fractions). (Andrew Nester) . Fixed bug #74433 (wrong reflection for Normalizer methods). (villfa) . Fixed bug #74439 (wrong reflection for Locale methods). (villfa)
- Opcache: . Fixed bug #74456 (Segmentation error while running a script in CLI mode). (Laruence) . Fixed bug #74431 (foreach infinite loop). (Nikita) . Fixed bug #74442 (Opcached version produces a nested array). (Nikita)
- OpenSSL: . Fixed bug #73833 (null character not allowed in openssl\_pkey\_get\_private). (Jakub Zelenka) . Fixed bug #73711 (Segfault in openssl\_pkey\_new when generating DSA or DH key). (Jakub Zelenka) . Fixed bug #74341 (openssl\_x509\_parse fails to parse ASN.1 UTCTime without seconds). (Moritz Fain) . Fixed bug #73808 (iv length warning too restrictive for aes-128-ccm). (Jakub Zelenka)
- phar: . Fixed bug #74383 (phar method parameters reflection correction).  (mhagstrand)
- Readline: . Fixed bug #74489 (readline() immediately returns false in interactive console mode). (Anatol)
- Standard: . Fixed bug #72071 (setcookie allows max-age to be negative). (Craig Duncan) . Fixed bug #74361 (Compaction in array\_rand() violates COW). (Nikita)
- Streams: . Fixed bug #74429 (Remote socket URI with unique persistence identifier broken). (Sara)
13 Apr 2017, PHP 7.1.4
- Core: . Fixed bug #74149 (static embed SAPI linkage error). (krakjoe) . Fixed bug #73370 (falsely exits with "Out of Memory" when using USE\_ZEND\_ALLOC=0). (Nikita) . Fixed bug #73960 (Leak with instance method calling static method with referenced return). (Nikita) . Fixed bug #69676 (Resolution of self::FOO in class constants not correct). (Nikita) . Fixed bug #74265 (Build problems after 7.0.17 release: undefined reference to `isfinite'). (Nikita) . Fixed bug #74302 (yield fromLABEL is over-greedy). (Sara)
- Apache: . Reverted patch for bug #61471, fixes bug #74318. (Anatol)
- Date: . Fixed bug #72096 (Swatch time value incorrect for dates before 1970). (mcq8)
- DOM: . Fixed bug #74004 (LIBXML\_NOWARNING flag ingnored on loadHTML\*). (somedaysummer)
- iconv: . Fixed bug #74230 (iconv fails to fail on surrogates). (Anatol)
- OCI8: . Fixed uninitialized data causing random crash. (Dmitry)
- Opcache: . Fixed bug #74250 (OPcache compilation performance regression in PHP 5.6/7 with huge classes). (Nikita)
- OpenSSL: . Fixed bug #72333 (fwrite() on non-blocking SSL sockets doesn't work). (Jakub Zelenka)
- PDO MySQL: . Fixed bug #71003 (Expose MYSQLI\_CLIENT\_SSL\_DONT\_VERIFY\_SERVER\_CERT to PDO interface). (Thomas Orozco)
- SPL: . Fixed bug #74058 (ArrayObject can not notice changes). (Andrew Nester)
- Sqlite: . Implemented FR #74217 (Allow creation of deterministic sqlite functions). (Andrew Nester)
- Streams: . Fixed bug #74216 (Correctly fail on invalid IP address ports). (Sara)
- Zlib: . Fixed bug #74240 (deflate\_add can allocate too much memory). (Matt Bonneau)
16 Mar 2017, PHP 7.1.3
- Core: . Fixed bug #74157 (Segfault with nested generators). (Laruence) . Fixed bug #74164 (PHP hangs when an invalid value is dynamically passed to typehinted by-ref arg). (Laruence) . Fixed bug #74093 (Maximum execution time of n+2 seconds exceed not written in error\_log). (Laruence) . Fixed bug #73989 (PHP 7.1 Segfaults within Symfony test suite). (Dmitry, Laruence) . Fixed bug #74084 (Out of bound read - zend\_mm\_alloc\_small). (Laruence) . Fixed bug #73807 (Performance problem with processing large post request). (Nikita) . Fixed bug #73998 (array\_key\_exists fails on arrays created by get\_object\_vars). (mhagstrand) . Fixed bug #73954 (NAN check fails on Alpine Linux with musl). (Andrea) . Fixed bug #73677 (Generating phar.phar core dump with gcc ASAN enabled build). (ondrej)
- Apache: . Fixed bug #61471 (Incomplete POST does not timeout but is passed to PHP). (Zheng Shao)
- Date: . Fixed bug #73837 ("new DateTime()" sometimes returns 1 second ago value). (Derick)
- FPM: . Fixed bug #69860 (php-fpm process accounting is broken with keepalive). (Denis Yeldandi)
- Hash: . Fixed bug #73127 (gost-crypto hash incorrect if input data contains long 0xFF sequence). (Grundik)
- GD: . Fixed bug #74031 (ReflectionFunction for imagepng is missing last two parameters). (finwe)
- Mysqlnd: . Fixed bug #74021 (fetch\_array broken data. Data more then MEDIUMBLOB). (Andrew Nester, Nikita)
- Opcache: . Fixed bug #74152 (if statement says true to a null variable). (Laruence) . Fixed bug #74019 (Segfault with list). (Laruence)
- OpenSSL: . Fixed bug #74022 (PHP Fast CGI crashes when reading from a pfx file). (Anatol) . Fixed bug #74099 (Memory leak with openssl\_encrypt()). (Andrew Nester) . Fixed bug #74159 (Writing a large buffer to a non-blocking encrypted stream fails with "bad write retry"). (trowski)
- PDO\_OCI: . Fixed bug #54379 (PDO\_OCI: UTF-8 output gets truncated). (gureedo / Oracle)
- SQLite3: . Fixed bug #74413 (incorrect reflection for SQLite3::enableExceptions). (krakjoe)
- Standard: . Fixed bug #74005 (mail.add\_x\_header causes RFC-breaking lone line feed). (Anatol) . Fixed bug #74041 (substr\_count with length=0 broken). (Nikita) . Fixed bug #73118 (is\_callable callable name reports misleading value for anonymous classes). (Adam Saponara) . Fixed bug #74105 (PHP on Linux should use /dev/urandom when getrandom is not available). (Benjamin Robin) . Fixed bug #74708 (Invalid Reflection signatures for random\_bytes and random\_int). (Tyson Andre, Remi)
- Streams: . Fixed bug #73496 (Invalid memory access in zend\_inline\_hash\_func). (Laruence) . Fixed bug #74090 (stream\_get\_contents maxlength>-1 returns empty string). (Anatol)
16 Feb 2017, PHP 7.1.2
- Core: . Improved GENERATOR\_CREATE opcode handler. (Bob, Dmitry) . Fixed bug #73877 (readlink() returns garbage for UTF-8 paths). (Anatol) . Fixed bug #73876 (Crash when exporting \*\*= in expansion of assign op). (Sara) . Fixed bug #73962 (bug with symlink related to cyrillic directory). (Anatol) . Fixed bug #73969 (segfault in debug\_print\_backtrace). (andrewnester) . Fixed bug #73994 (arginfo incorrect for unpack). (krakjoe) . Fixed bug #73973 (assertion error in debug\_zval\_dump). (andrewnester)
- DOM: . Fixed bug #54382 (getAttributeNodeNS doesn't get xmlns\* attributes). (aboks)
- DTrace: . Fixed bug #73965 (DTrace reported as enabled when disabled). (Remi)
- FCGI: . Fixed bug #73904 (php-cgi fails to load -c specified php.ini file). (Anatol) . Fixed bug #72898 (PHP\_FCGI\_CHILDREN is not included in phpinfo()). (Anatol)
- FPM: . Fixed bug #69865 (php-fpm does not close stderr when using syslog).  (m6w6)
- GD: . Fixed bug #73968 (Premature failing of XBM reading). (cmb)
- GMP: . Fixed bug #69993 (test for gmp.h needs to test machine includes). (Jordan Gigov)
- Hash: . Added hash\_hkdf() function. (Andrey Andreev) . Fixed bug #73961 (environmental build dependency in hash sha3 source). (krakjoe)
- Intl: . Fix bug #73956 (Link use CC instead of CXX). (Remi)
- LDAP: . Fixed bug #73933 (error/segfault with ldap\_mod\_replace and opcache). (Laruence)
- MySQLi: . Fixed bug #73949 (leak in mysqli\_fetch\_object). (krakjoe)
- Mysqlnd: . Fixed bug #69899 (segfault on close() after free\_result() with mysqlnd). (Richard Fussenegger)
- Opcache: . Fixed bug #73983 (crash on finish work with phar in cli + opcache). (Anatol)
- OpenSSL: . Fixed bug #71519 (add serial hex to return value array). (xrobau) . Fixed bug #73692 (Compile ext/openssl with openssl 1.1.0 on Win). (Anatol) . Fixed bug #73978 (openssl\_decrypt triggers bug in PDO). (Jakub Zelenka)
- PDO\_Firebird:[View remainder of file in raw view](https://github.com/php/php-src/raw/refs/heads/PHP-7.1.20/NEWS)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from bugs.php.net_70f349b2_20250126_051031.html ===


| [Bugs](/) | [php.net](https://php.net/) |  [support](https://php.net/support.php) |  [documentation](https://php.net/docs.php) |  [report a bug](report.php) |  [advanced search](search.php) |  [search howto](search-howto.php) |  [statistics](stats.php) |  [random bug](random) |  [login](login.php) |
| --- | --- |
| go to bug id or search bugs for | |

| | [Bug](bug.php?id=75968) #75968 | php-fpm restarts master process in a loop when using Program execution Function | | | | | | --- | --- | --- | --- | --- | --- | | Submitted: | 2018-02-16 15:22 UTC | Modified: | 2018-02-23 16:54 UTC | | Votes: | 26 | | --- | --- | | Avg. Score: | 5.0 ± 0.2 | | Reproduced: | 21 of 21 (100.0%) | | Same Version: | 14 (66.7%) | | Same OS: | 10 (47.6%) | | | From: | schnederle at futureweb dot at | Assigned: | [bukka](search.php?cmd=display&assign=bukka) ([profile](https://people.php.net/bukka)) | | Status: | Duplicate | Package: | [FPM related](search.php?cmd=display&package_name[]=FPM+related) | | PHP Version: | 7.2.2 | OS: | Centos/RHEL 7.4 | | Private report: | No | CVE-ID: | [2015-9253](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-9253) |   View [Developer](bug.php?id=75968&edit=1) [Edit](bug.php?id=75968&edit=2)   **[2018-02-16 15:22 UTC] schnederle at futureweb dot at** ``` Description: ------------ Follow-Up to already reported [Bug #70185](bug.php?id=70185) (<https://bugs.php.net/bug.php?id=70185>) Still a Problem with current PHP 7.2.2.  When using Program execution Functions (passthru(), exec(), shell_exec(), system(), ...) the php-fpm: master process reproduceable crashes with signal 15 (SIGTERM) which leads to crash-loop, 100% CPU usage and spamming of Logs (30GB within 1 day on my Dev-Server)  Test script: --------------- <?php exec('/usr/bin/postcss css_from.css --use autoprefixer --autoprefixer.remove "false" --output css_to.css'); echo 'Done'; ?>  Actual result: -------------- Millions of: ... [16-Feb-2018 14:48:30] WARNING: [pool www] child 53778 exited on signal 15 (SIGTERM) after 0.046685 seconds from start [16-Feb-2018 14:48:30] WARNING: [pool www] child 53782 exited on signal 15 (SIGTERM) after 0.045416 seconds from start [16-Feb-2018 14:48:30] WARNING: [pool www] child 53785 exited on signal 15 (SIGTERM) after 0.045331 seconds from start [16-Feb-2018 14:48:30] WARNING: [pool www] child 53787 exited on signal 15 (SIGTERM) after 0.044765 seconds from start ...   ``` PatchesPull RequestsHistoryAllCommentsChangesGit/SVN commitsRelated reports  **[2018-02-16 15:32 UTC] schnederle at futureweb dot at** ``` correction - not the master process crashes but php-fpm continues to restart the process over and over again using 100% of the CPU on the php-fpm master process. (crash loop)  ``` **[2018-02-16 15:38 UTC] [nikic@php.net](//people.php.net/nikic)** -Status: Open +Status: Feedback **[2018-02-16 15:38 UTC] [nikic@php.net](//people.php.net/nikic)** ``` Is it possible to provide a **self-contained** reproducer for this? That is, using something like "ls" rather than "postcss"?  If not, please provide detailed instructions on how to reproduce this, including any necessary input files and instructions for the installation of necessary programs.  ``` **[2018-02-16 15:51 UTC] schnederle at futureweb dot at** ``` was able to reproduce behaviour "self contained":  Script 1: <?php stream_set_blocking(STDIN, false); echo "Blah"; ?>  Script 2: <?php passthru('/usr/bin/php /path/to/1.php'); ?>  Reproduceable on 2 Machines with php-fpm 7.2.2 and earlier.  As it can be used to DOS Shared Hosting Servers (i.e. all Plesk Servers use PHP-FPM) I think this got some Security implications too.  ``` **[2018-02-16 15:54 UTC] [nikic@php.net](//people.php.net/nikic)** -Status: Feedback +Status: Open **[2018-02-19 13:15 UTC] schnederle at futureweb dot at** ``` [https://www.futureweb.at/Futureweb-OG-php-fpm-master-process-restarts-child-process-in-a_pid,54177,type,firmeninfo.html](https://www.futureweb.at/Futureweb-OG-php-fpm-master-process-restarts-child-process-in-a_pid%2C54177%2Ctype%2Cfirmeninfo.html)  ``` **[2018-02-20 10:38 UTC] schnederle at futureweb dot at** ``` someone with proper rights please assign CVE-2015-9253 to this Bug Report.  Source: - <http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-9253> - <https://www.futureweb.at/security/CVE-2015-9253/>  ``` **[2018-02-20 23:07 UTC] [cmb@php.net](//people.php.net/cmb)** -Type: Bug +Type: Security -Private report: No +Private report: Yes -CVE-ID: +CVE-ID: 2015-9253 **[2018-02-20 23:11 UTC] [stas@php.net](//people.php.net/stas)** -Package: Reproducible crash +Package: FPM related **[2018-02-20 23:11 UTC] [stas@php.net](//people.php.net/stas)** ``` Could someone explain to me why this is a security issue? Which permission border is being crossed?  ``` **[2018-02-20 23:12 UTC] [stas@php.net](//people.php.net/stas)** ``` I mean, if you have process exec privileges, couldn't you just "kill -9" your parent  FPM process from shell and achieve the same effect?  ``` **[2018-02-21 13:18 UTC] [cmb@php.net](//people.php.net/cmb)** ``` > Could someone explain to me why this is a security issue?  Sorry, I can't.  I've merely switched to private, since a CVE had been assigned.  ``` **[2018-02-23 03:27 UTC] [stas@php.net](//people.php.net/stas)** -Assigned To: +Assigned To: bukka **[2018-02-23 14:03 UTC] [bukka@php.net](//people.php.net/bukka)** ``` This seems just like a duplicate of the <https://bugs.php.net/bug.php?id=70185> that is public already so there is no reason to keep this as a security bug IMHO.  ``` **[2018-02-23 16:54 UTC] [nikic@php.net](//people.php.net/nikic)** -Status: Assigned +Status: Duplicate -Type: Security +Type: Bug **[2018-02-23 16:54 UTC] [nikic@php.net](//people.php.net/nikic)** ``` Duplicate of [bug #73342](bug.php?id=73342). Unassigning privacy status as this has been public for a long time already.  [Bug #73342](bug.php?id=73342) also has a patch attached, though I haven't checked if it makes sense.  ``` |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

|  | |
| --- | --- |
| [PHP](https://php.net/) [Copyright © 2001-2025 The PHP Group](https://php.net/copyright.php) All rights reserved. | Last updated: Sun Jan 26 05:01:29 2025 UTC |


