=== Content from lists.debian.org_c20dcb60_20250125_171101.html ===


---

[[Date Prev](msg00015.html)][[Date Next](msg00017.html)]
[[Thread Prev](msg00015.html)][[Thread Next](msg00017.html)]
[[Date Index](maillist.html#00016)]
[[Thread Index](threads.html#00016)]

# [SECURITY] [DLA 1923-1] ansible security update

---

* *To*: debian-lts-announce@lists.debian.org
* *Subject*: [SECURITY] [DLA 1923-1] ansible security update
* *From*: Roberto C. Sánchez <roberto@debian.org>
* *Date*: Mon, 16 Sep 2019 08:23:29 -0400
* *Message-id*: <[[🔎]](/msgid-search/20190916122329.7zqgotmyhuby2ptw%40connexer.com) [20190916122329.7zqgotmyhuby2ptw@connexer.com](msg00016.html)>
* *Mail-followup-to*: Roberto C. Sánchez <roberto@debian.org>, debian-lts-announce@lists.debian.org
* *Reply-to*: debian-lts@lists.debian.org

---

```
Package        : ansible
Version        : 1.7.2+dfsg-2+deb8u2
CVE ID         : CVE-2015-3908 CVE-2015-6240 CVE-2018-10875 CVE-2019-10156
Debian Bug     : 930065

Several vulnerabilities were discovered in Ansible, a configuration
management, deployment, and task execution system.

CVE-2015-3908

    A potential man-in-the-middle attack associated with insusfficient
    X.509 certificate verification.  Ansible did not verify that the
    server hostname matches a domain name in the subject's Common Name
    (CN) or subjectAltName field of the X.509 certificate, which allows
    man-in-the-middle attackers to spoof SSL servers via an arbitrary
    valid certificate.

CVE-2015-6240

    A symlink attack that allows local users to escape a restricted
    environment (chroot or jail) via a symlink attack.

CVE-2018-10875

    A fix potential arbitrary code execution resulting from reading
    ansible.cfg from a world-writable current working directory.  This
    condition now causes ansible to emit a warning and ignore the
    ansible.cfg in the world-writable current working directory.

CVE-2019-10156

    Information disclosure through unexpected variable substitution.

For Debian 8 "Jessie", these problems have been fixed in version
1.7.2+dfsg-2+deb8u2.

We recommend that you upgrade your ansible packages.

Further information about Debian LTS security advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://wiki.debian.org/LTS>

```

**Attachment:
[signature.asc](pgpCOm5lqpW5t.pgp)**

*Description:* PGP signature

---



=== Content from access.redhat.com_7131358b_20250126_102956.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from access.redhat.com_d4037588_20250126_102956.html ===


[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

**We're sorry but cve-details doesn't work properly without JavaScript enabled. Please enable it to continue.**

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2025 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from github.com_91415409_20250125_171059.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fansible%2Fansible%2Fcommit%2F952166f48eb0f5797b75b160fd156bbe1e8fc647)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fansible%2Fansible%2Fcommit%2F952166f48eb0f5797b75b160fd156bbe1e8fc647)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=ansible%2Fansible)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ansible](/ansible)
/
**[ansible](/ansible/ansible)**
Public

* [Notifications](/login?return_to=%2Fansible%2Fansible) You must be signed in to change notification settings
* [Fork
  24k](/login?return_to=%2Fansible%2Fansible)
* [Star
   63.8k](/login?return_to=%2Fansible%2Fansible)

* [Code](/ansible/ansible)
* [Issues
  541](/ansible/ansible/issues)
* [Pull requests
  330](/ansible/ansible/pulls)
* [Projects
  6](/ansible/ansible/projects)
* [Security](/ansible/ansible/security)
* [Insights](/ansible/ansible/pulse)

Additional navigation options

* [Code](/ansible/ansible)
* [Issues](/ansible/ansible/issues)
* [Pull requests](/ansible/ansible/pulls)
* [Projects](/ansible/ansible/projects)
* [Security](/ansible/ansible/security)
* [Insights](/ansible/ansible/pulse)

## Commit

[Permalink](/ansible/ansible/commit/952166f48eb0f5797b75b160fd156bbe1e8fc647)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Fix problem with chroot connection plugins and symlinks from within t…

[Browse files](/ansible/ansible/tree/952166f48eb0f5797b75b160fd156bbe1e8fc647)
Browse the repository at this point in the history

```
…he chroot.
```

* Loading branch information

[![@abadger](https://avatars.githubusercontent.com/u/209242?s=40&v=4)](/abadger)

[abadger](/ansible/ansible/commits?author=abadger "View all commits by abadger")
committed
Jun 23, 2015

1 parent
[61e367f](/ansible/ansible/commit/61e367f549053ca7bfb8a0f969debc0957e3cbfb)

commit 952166f

Showing
**1 changed file**
with
**56 additions**
and
**36 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

92 changes: 56 additions & 36 deletions

92
[lib/ansible/plugins/connections/chroot.py](#diff-98c50c84efa3df57d91481bb55840bbe52c17a3e83e207284de91841dd606d29 "lib/ansible/plugins/connections/chroot.py")

Show comments

[View file](/ansible/ansible/blob/952166f48eb0f5797b75b160fd156bbe1e8fc647/lib/ansible/plugins/connections/chroot.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,5 +1,6 @@ |
|  |  | # Based on local.py (c) 2012, Michael DeHaan <michael.dehaan@gmail.com> |
|  |  | # (c) 2013, Maykel Moya <mmoya@speedyrails.com> |
|  |  | # (c) 2015, Toshio Kuratomi <tkuratomi@ansible.com> |
|  |  | # |
|  |  | # This file is part of Ansible |
|  |  | # |
| Expand All | | @@ -21,13 +22,14 @@ |
|  |  | import distutils.spawn |
|  |  | import traceback |
|  |  | import os |
|  |  | import shutil |
|  |  | import subprocess |
|  |  | from ansible import errors |
|  |  | from ansible import utils |
|  |  | from ansible.callbacks import vvv |
|  |  | import ansible.constants as C |
|  |  |  |
|  |  | BUFSIZE = 65536 |
|  |  |  |
|  |  | class Connection(object): |
|  |  | ''' Local chroot based connections ''' |
|  |  |  |
| Expand Down  Expand Up | | @@ -64,8 +66,21 @@ def connect(self, port=None): |
|  |  |  |
|  |  | return self |
|  |  |  |
|  |  | def exec\_command(self, cmd, tmp\_path, become\_user=None, sudoable=False, executable='/bin/sh', in\_data=None): |
|  |  | ''' run a command on the chroot ''' |
|  |  | def \_generate\_cmd(self, executable, cmd): |
|  |  | if executable: |
|  |  | local\_cmd = [self.chroot\_cmd, self.chroot, executable, '-c', cmd] |
|  |  | else: |
|  |  | local\_cmd = '%s "%s" %s' % (self.chroot\_cmd, self.chroot, cmd) |
|  |  | return local\_cmd |
|  |  |  |
|  |  | def \_buffered\_exec\_command(self, cmd, tmp\_path, become\_user=None, sudoable=False, executable='/bin/sh', in\_data=None, stdin=subprocess.PIPE): |
|  |  | ''' run a command on the chroot. This is only needed for implementing |
|  |  | put\_file() get\_file() so that we don't have to read the whole file |
|  |  | into memory. |
|  |  |  |
|  |  | compared to exec\_command() it looses some niceties like being able to |
|  |  | return the process's exit code immediately. |
|  |  | ''' |
|  |  |  |
|  |  | if sudoable and self.runner.become and self.runner.become\_method not in self.become\_methods\_supported: |
|  |  | raise errors.AnsibleError("Internal Error: this module does not support running commands via %s" % self.runner.become\_method) |
| Expand All | | @@ -74,60 +89,65 @@ def exec\_command(self, cmd, tmp\_path, become\_user=None, sudoable=False, executab |
|  |  | raise errors.AnsibleError("Internal Error: this module does not support optimized module pipelining") |
|  |  |  |
|  |  | # We enter chroot as root so we ignore privlege escalation? |
|  |  |  |
|  |  | if executable: |
|  |  | local\_cmd = [self.chroot\_cmd, self.chroot, executable, '-c', cmd] |
|  |  | else: |
|  |  | local\_cmd = '%s "%s" %s' % (self.chroot\_cmd, self.chroot, cmd) |
|  |  | local\_cmd = self.\_generate\_cmd(executable, cmd) |
|  |  |  |
|  |  | vvv("EXEC %s" % (local\_cmd), host=self.chroot) |
|  |  | p = subprocess.Popen(local\_cmd, shell=isinstance(local\_cmd, basestring), |
|  |  | cwd=self.runner.basedir, |
|  |  | stdin=subprocess.PIPE, |
|  |  | stdin=stdin, |
|  |  | stdout=subprocess.PIPE, stderr=subprocess.PIPE) |
|  |  |  |
|  |  | return p |
|  |  |  |
|  |  | def exec\_command(self, cmd, tmp\_path, become\_user=None, sudoable=False, executable='/bin/sh', in\_data=None): |
|  |  | ''' run a command on the chroot ''' |
|  |  |  |
|  |  | p = self.\_buffered\_exec\_command(cmd, tmp\_path, become\_user, sudoable, executable, in\_data) |
|  |  |  |
|  |  | stdout, stderr = p.communicate() |
|  |  | return (p.returncode, '', stdout, stderr) |
|  |  |  |
|  |  | def put\_file(self, in\_path, out\_path): |
|  |  | ''' transfer a file from local to chroot ''' |
|  |  |  |
|  |  | if not out\_path.startswith(os.path.sep): |
|  |  | out\_path = os.path.join(os.path.sep, out\_path) |
|  |  | normpath = os.path.normpath(out\_path) |
|  |  | out\_path = os.path.join(self.chroot, normpath[1:]) |
|  |  |  |
|  |  | vvv("PUT %s TO %s" % (in\_path, out\_path), host=self.chroot) |
|  |  | if not os.path.exists(in\_path): |
|  |  | raise errors.AnsibleFileNotFound("file or module does not exist: %s" % in\_path) |
|  |  |  |
|  |  | try: |
|  |  | shutil.copyfile(in\_path, out\_path) |
|  |  | except shutil.Error: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to copy: %s and %s are the same" % (in\_path, out\_path)) |
|  |  | with open(in\_path, 'rb') as in\_file: |
|  |  | try: |
|  |  | p = self.\_buffered\_exec\_command('dd of=%s' % out\_path, None, stdin=in\_file) |
|  |  | except OSError: |
|  |  | raise errors.AnsibleError("chroot connection requires dd command in the chroot") |
|  |  | try: |
|  |  | stdout, stderr = p.communicate() |
|  |  | except: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to transfer file %s to %s" % (in\_path, out\_path)) |
|  |  | if p.returncode != 0: |
|  |  | raise errors.AnsibleError("failed to transfer file %s to %s:\n%s\n%s" % (in\_path, out\_path, stdout, stderr)) |
|  |  | except IOError: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to transfer file to %s" % out\_path) |
|  |  | raise errors.AnsibleError("file or module does not exist at: %s" % in\_path) |
|  |  |  |
|  |  | def fetch\_file(self, in\_path, out\_path): |
|  |  | ''' fetch a file from chroot to local ''' |
|  |  |  |
|  |  | if not in\_path.startswith(os.path.sep): |
|  |  | in\_path = os.path.join(os.path.sep, in\_path) |
|  |  | normpath = os.path.normpath(in\_path) |
|  |  | in\_path = os.path.join(self.chroot, normpath[1:]) |
|  |  |  |
|  |  | vvv("FETCH %s TO %s" % (in\_path, out\_path), host=self.chroot) |
|  |  | if not os.path.exists(in\_path): |
|  |  | raise errors.AnsibleFileNotFound("file or module does not exist: %s" % in\_path) |
|  |  |  |
|  |  | try: |
|  |  | shutil.copyfile(in\_path, out\_path) |
|  |  | except shutil.Error: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to copy: %s and %s are the same" % (in\_path, out\_path)) |
|  |  | except IOError: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to transfer file to %s" % out\_path) |
|  |  | p = self.\_buffered\_exec\_command('dd if=%s bs=%s' % (in\_path, BUFSIZE), None) |
|  |  | except OSError: |
|  |  | raise errors.AnsibleError("chroot connection requires dd command in the jail") |
|  |  |  |
|  |  | with open(out\_path, 'wb+') as out\_file: |
|  |  | try: |
|  |  | for chunk in p.stdout.read(BUFSIZE): |
|  |  | out\_file.write(chunk) |
|  |  | except: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to transfer file %s to %s" % (in\_path, out\_path)) |
|  |  | stdout, stderr = p.communicate() |
|  |  | if p.returncode != 0: |
|  |  | raise errors.AnsibleError("failed to transfer file %s to %s:\n%s\n%s" % (in\_path, out\_path, stdout, stderr)) |
|  |  |  |
|  |  | def close(self): |
|  |  | ''' terminate the connection; nothing to do here ''' |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `952166f`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fansible%2Fansible%2Fcommit%2F952166f48eb0f5797b75b160fd156bbe1e8fc647) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.openwall.com_d42ee0b5_20250125_171056.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](9) [[next>]](11) [[<thread-prev]](../../../2015/07/14/3) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <20150817201909.DB2D46C002C@smtpvmsrv1.mitre.org>
Date: Mon, 17 Aug 2015 16:19:09 -0400 (EDT)
From: cve-assign@...re.org
To: mcarpenter@...e.fr
Cc: cve-assign@...re.org, oss-security@...ts.openwall.com, tkuratomi@...ible.com
Subject: Re: CVE request: ansible zone/chroot/jail escape

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

> I recently found a symlink attack that enables a malicious
> zone/chroot/jail managed by ansible to escape into the managing host.
> This was fixed in ansible 1.9.2 (commit list below

We think we understand this well enough to make an initial CVE ID
assignment. It is possible that some of our comments below are not
really correct, or that additional CVE IDs will be needed.

Our understanding is that the essential issue is that file copying
must be performed by code that is operating within the restricted
environment (chroot, jail, or zone). It is wrong to do the file
copying by operating outside the restricted environment, and relying
on the addition of a leading pathname substring, because that doesn't
address the symlink case.

This essential issue is what is covered by:

  <https://github.com/ansible/ansible/commit/952166f48eb0f5797b75b160fd156bbe1e8fc647>
      Fix problem with chroot connection plugins and symlinks from within
      the chroot.

  <https://github.com/ansible/ansible/commit/ca2f2c4ebd7b5e097eab0a710f79c1f63badf95b>
      Fix problem with jail and zone connection plugins and symlinks from
      within the jail/zone.

from your commit list.

Use CVE-2015-6240 for this issue.

There were a few differences in the code for chroot versus jail and
zone, but we don't believe that the differences require a separate CVE
ID. (Roughly, it appeared that code for operating within the
restricted environment did exist in the jail and zone cases, i.e.,
calls to jexec and zlogin existed, but this code was not used in the
applicable place. By contrast, code for operating within the
restricted environment did not exist in the chroot case.)

> <https://github.com/ansible/ansible/commit/548a7288a90c49e9b50ccf197da307eae525b899>
>     Use BUFSIZE when putting file as well as fetching file.

We think this is an unrelated performance improvement that probably
has no practical effect on security (maybe an attacker who had access
within a restricted environment could create a huge file that would be
copied with a 512-byte block size rather than a 65536-byte block size,
and thus trigger more resource consumption). There is currently no CVE
ID for this commit.

> <https://github.com/ansible/ansible/commit/270be6a6f5852c5563976f060c80eff64decc89c>
>     Fix exec_command to not use a shell

We didn't completely understand this. One guess is that, given that
the new code is operating within the restricted environment, it would
be unsafe to rely on the pathname /bin/sh within the restricted
environment, because the contents of /bin/sh are controllable by the
attacker, or because /bin/sh might not exist. In that situation,
there is no CVE ID because the previous code wasn't operating within
the restricted environment, and thus the status of /bin/sh within the
restricted environment was originally irrelevant.

This might raise the question of text such as:

   try:
       p = self._buffered_exec_command('dd if=%s bs=%s' % (in_path, BUFSIZE), None)
   except OSError:
       raise errors.AnsibleError("jail connection requires dd command in the jail")

in the next commit. In other words, we don't understand why it is safe
to run a dd program found inside the restricted environment, given the
original premise that the attacker has write access inside the
restricted environment.

It is also conceivable that this commit addresses a
shell-metacharacter issue that is independent of which /bin/sh
pathname is used. The CVE project team has not researched this.

> <https://github.com/ansible/ansible/commit/0777d025051bf5cf3092aa79a9e6b67cec7064dd>
>     Fix problem with jail and zone connection plugins and symlinks from
>     within the jail/zone.

There is no CVE ID for the code problem that was fixed by this commit.
(For completeness, we should mention that the analogous code changes
for the chroot case are contained in
952166f48eb0f5797b75b160fd156bbe1e8fc647.) In other words, the
existence of dd within the restricted environment was originally
irrelevant. As mentioned above, it is conceivable that a CVE ID is
needed for a code problem introduced by running an attacker-controlled
dd program, but the CVE project team has not researched this and does
not know whether it could ever be an exploitable vulnerability.

- --
CVE assignment team, MITRE CVE Numbering Authority
M/S M300
202 Burlington Road, Bedford, MA 01730 USA
[ PGP key available through <http://cve.mitre.org/cve/request_id.html> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQEcBAEBCAAGBQJV0kEVAAoJEKllVAevmvmsLigH/0osp9n+2cpYhkHT4DmYoGdz
0nJ8Mpu9BH9XgWANHbBLya2K0r6H/Injn39wngmRZaDZ2VWW+aqq4PDg5WHPKYG4
SVgo4WbeRCb6FwPkTWs8omw/CkhuvQ8htviHaOMO5JiFPxRGiVCB6ucLNY87BSxP
WD3YUH2DoFvZf4r6dATtxRSiix1+lLK6R9qzu+1WFtjNIKgXnN46lblK1dygcycC
/MFhcApekA3k79QHRkBalBlCRw8Droj0Dzq52FiLnv10QnQcBrA8+JAdKBzbN0pt
olUKhW20vQtXHphcsvXivgBQuEVwb0Kjno9NCR74/ZgwQbT7QIeZ40Sd0E4QNik=
=ugTB
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from github.com_adf0106d_20250125_171100.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fansible%2Fansible%2Fcommit%2Fca2f2c4ebd7b5e097eab0a710f79c1f63badf95b)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fansible%2Fansible%2Fcommit%2Fca2f2c4ebd7b5e097eab0a710f79c1f63badf95b)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=ansible%2Fansible)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ansible](/ansible)
/
**[ansible](/ansible/ansible)**
Public

* [Notifications](/login?return_to=%2Fansible%2Fansible) You must be signed in to change notification settings
* [Fork
  24k](/login?return_to=%2Fansible%2Fansible)
* [Star
   63.8k](/login?return_to=%2Fansible%2Fansible)

* [Code](/ansible/ansible)
* [Issues
  541](/ansible/ansible/issues)
* [Pull requests
  330](/ansible/ansible/pulls)
* [Projects
  6](/ansible/ansible/projects)
* [Security](/ansible/ansible/security)
* [Insights](/ansible/ansible/pulse)

Additional navigation options

* [Code](/ansible/ansible)
* [Issues](/ansible/ansible/issues)
* [Pull requests](/ansible/ansible/pulls)
* [Projects](/ansible/ansible/projects)
* [Security](/ansible/ansible/security)
* [Insights](/ansible/ansible/pulse)

## Commit

[Permalink](/ansible/ansible/commit/ca2f2c4ebd7b5e097eab0a710f79c1f63badf95b)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Fix problem with jail and zone connection plugins and symlinks from w…

[Browse files](/ansible/ansible/tree/ca2f2c4ebd7b5e097eab0a710f79c1f63badf95b)
Browse the repository at this point in the history

```
…ithin the jail/zone.
```

* Loading branch information

[![@abadger](https://avatars.githubusercontent.com/u/209242?s=40&v=4)](/abadger)

[abadger](/ansible/ansible/commits?author=abadger "View all commits by abadger")
committed
Jun 19, 2015

1 parent
[f0777d9](/ansible/ansible/commit/f0777d9c4ec90d968b2a56e411b75b419cd30876)

commit ca2f2c4

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**93 additions**
and
**61 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* lib/ansible/plugins/connections

  + lib/ansible/plugins/connections/jail.py
    [jail.py](#diff-c1ba4996f5a278ec5bdfc5b7f405e41b6ea26d3947203a3cf5330b8ed8bceff9)
  + lib/ansible/plugins/connections/zone.py
    [zone.py](#diff-6651b2c14d9f49e01af01a42e82c3ec6d21fa06d40d56878c46ba1f414eb8c0e)

## There are no files selected for viewing

77 changes: 46 additions & 31 deletions

77
[lib/ansible/plugins/connections/jail.py](#diff-c1ba4996f5a278ec5bdfc5b7f405e41b6ea26d3947203a3cf5330b8ed8bceff9 "lib/ansible/plugins/connections/jail.py")

Show comments

[View file](/ansible/ansible/blob/ca2f2c4ebd7b5e097eab0a710f79c1f63badf95b/lib/ansible/plugins/connections/jail.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,6 +1,7 @@ |
|  |  | # Based on local.py (c) 2012, Michael DeHaan <michael.dehaan@gmail.com> |
|  |  | # and chroot.py (c) 2013, Maykel Moya <mmoya@speedyrails.com> |
|  |  | # (c) 2013, Michael Scherer <misc@zarb.org> |
|  |  | # (c) 2015, Toshio Kuratomi <tkuratomi@ansible.com> |
|  |  | # |
|  |  | # This file is part of Ansible |
|  |  | # |
| Expand All | | @@ -22,14 +23,15 @@ |
|  |  | import distutils.spawn |
|  |  | import traceback |
|  |  | import os |
|  |  | import shutil |
|  |  | import subprocess |
|  |  | from ansible import errors |
|  |  | from ansible.callbacks import vvv |
|  |  | import ansible.constants as C |
|  |  |  |
|  |  | BUFSIZE = 4096 |
|  |  |  |
|  |  | class Connection(object): |
|  |  | ''' Local chroot based connections ''' |
|  |  | ''' Local BSD Jail based connections ''' |
|  |  |  |
|  |  | def \_search\_executable(self, executable): |
|  |  | cmd = distutils.spawn.find\_executable(executable) |
| Expand Down  Expand Up | | @@ -81,9 +83,9 @@ def \_\_init\_\_(self, runner, host, port, \*args, \*\*kwargs): |
|  |  | self.port = port |
|  |  |  |
|  |  | def connect(self, port=None): |
|  |  | ''' connect to the chroot; nothing to do here ''' |
|  |  | ''' connect to the jail; nothing to do here ''' |
|  |  |  |
|  |  | vvv("THIS IS A LOCAL CHROOT DIR", host=self.jail) |
|  |  | vvv("THIS IS A LOCAL JAIL DIR", host=self.jail) |
|  |  |  |
|  |  | return self |
|  |  |  |
| Expand All | | @@ -95,8 +97,14 @@ def \_generate\_cmd(self, executable, cmd): |
|  |  | local\_cmd = '%s "%s" %s' % (self.jexec\_cmd, self.jail, cmd) |
|  |  | return local\_cmd |
|  |  |  |
|  |  | def exec\_command(self, cmd, tmp\_path, become\_user=None, sudoable=False, executable='/bin/sh', in\_data=None): |
|  |  | ''' run a command on the chroot ''' |
|  |  | def \_buffered\_exec\_command(self, cmd, tmp\_path, become\_user=None, sudoable=False, executable='/bin/sh', in\_data=None, stdin=subprocess.PIPE): |
|  |  | ''' run a command on the jail. This is only needed for implementing |
|  |  | put\_file() get\_file() so that we don't have to read the whole file |
|  |  | into memory. |
|  |  |  |
|  |  | compared to exec\_command() it looses some niceties like being able to |
|  |  | return the process's exit code immediately. |
|  |  | ''' |
|  |  |  |
|  |  | if sudoable and self.runner.become and self.runner.become\_method not in self.become\_methods\_supported: |
|  |  | raise errors.AnsibleError("Internal Error: this module does not support running commands via %s" % self.runner.become\_method) |
| Expand All | | @@ -110,45 +118,52 @@ def exec\_command(self, cmd, tmp\_path, become\_user=None, sudoable=False, executab |
|  |  | vvv("EXEC %s" % (local\_cmd), host=self.jail) |
|  |  | p = subprocess.Popen(local\_cmd, shell=isinstance(local\_cmd, basestring), |
|  |  | cwd=self.runner.basedir, |
|  |  | stdin=subprocess.PIPE, |
|  |  | stdin=stdin, |
|  |  | stdout=subprocess.PIPE, stderr=subprocess.PIPE) |
|  |  |  |
|  |  | return p |
|  |  |  |
|  |  | def exec\_command(self, cmd, tmp\_path, become\_user=None, sudoable=False, executable='/bin/sh', in\_data=None): |
|  |  | ''' run a command on the jail ''' |
|  |  |  |
|  |  | p = self.\_buffered\_exec\_command(cmd, tmp\_path, become\_user, sudoable, executable, in\_data) |
|  |  |  |
|  |  | stdout, stderr = p.communicate() |
|  |  | return (p.returncode, '', stdout, stderr) |
|  |  |  |
|  |  | def \_normalize\_path(self, path, prefix): |
|  |  | if not path.startswith(os.path.sep): |
|  |  | path = os.path.join(os.path.sep, path) |
|  |  | normpath = os.path.normpath(path) |
|  |  | return os.path.join(prefix, normpath[1:]) |
|  |  |  |
|  |  | def \_copy\_file(self, in\_path, out\_path): |
|  |  | if not os.path.exists(in\_path): |
|  |  | raise errors.AnsibleFileNotFound("file or module does not exist: %s" % in\_path) |
|  |  | try: |
|  |  | shutil.copyfile(in\_path, out\_path) |
|  |  | except shutil.Error: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to copy: %s and %s are the same" % (in\_path, out\_path)) |
|  |  | except IOError: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to transfer file to %s" % out\_path) |
|  |  |  |
|  |  | def put\_file(self, in\_path, out\_path): |
|  |  | ''' transfer a file from local to chroot ''' |
|  |  | ''' transfer a file from local to jail ''' |
|  |  |  |
|  |  | out\_path = self.\_normalize\_path(out\_path, self.get\_jail\_path()) |
|  |  | vvv("PUT %s TO %s" % (in\_path, out\_path), host=self.jail) |
|  |  |  |
|  |  | self.\_copy\_file(in\_path, out\_path) |
|  |  | with open(in\_path, 'rb') as in\_file: |
|  |  | p = self.\_buffered\_exec\_command('dd of=%s' % out\_path, None, stdin=in\_file) |
|  |  | try: |
|  |  | stdout, stderr = p.communicate() |
|  |  | except: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to transfer file to %s" % out\_path) |
|  |  | if p.returncode != 0: |
|  |  | raise errors.AnsibleError("failed to transfer file to %s:\n%s\n%s" % (out\_path, stdout, stderr)) |
|  |  |  |
|  |  | def fetch\_file(self, in\_path, out\_path): |
|  |  | ''' fetch a file from chroot to local ''' |
|  |  | ''' fetch a file from jail to local ''' |
|  |  |  |
|  |  | in\_path = self.\_normalize\_path(in\_path, self.get\_jail\_path()) |
|  |  | vvv("FETCH %s TO %s" % (in\_path, out\_path), host=self.jail) |
|  |  |  |
|  |  | self.\_copy\_file(in\_path, out\_path) |
|  |  |  |
|  |  | p = self.\_buffered\_exec\_command('dd if=%s bs=%s' % (in\_path, BUFSIZE), None) |
|  |  |  |
|  |  | with open(out\_path, 'wb+') as out\_file: |
|  |  | try: |
|  |  | for chunk in p.stdout.read(BUFSIZE): |
|  |  | out\_file.write(chunk) |
|  |  | except: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to transfer file to %s" % out\_path) |
|  |  | stdout, stderr = p.communicate() |
|  |  | if p.returncode != 0: |
|  |  | raise errors.AnsibleError("failed to transfer file to %s:\n%s\n%s" % (out\_path, stdout, stderr)) |
|  |  |  |
|  |  | def close(self): |
|  |  | ''' terminate the connection; nothing to do here ''' |
| Expand Down | |  |

77 changes: 47 additions & 30 deletions

77
[lib/ansible/plugins/connections/zone.py](#diff-6651b2c14d9f49e01af01a42e82c3ec6d21fa06d40d56878c46ba1f414eb8c0e "lib/ansible/plugins/connections/zone.py")

Show comments

[View file](/ansible/ansible/blob/ca2f2c4ebd7b5e097eab0a710f79c1f63badf95b/lib/ansible/plugins/connections/zone.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2,6 +2,7 @@ |
|  |  | # and chroot.py (c) 2013, Maykel Moya <mmoya@speedyrails.com> |
|  |  | # and jail.py (c) 2013, Michael Scherer <misc@zarb.org> |
|  |  | # (c) 2015, Dagobert Michelsen <dam@baltic-online.de> |
|  |  | # (c) 2015, Toshio Kuratomi <tkuratomi@ansible.com> |
|  |  | # |
|  |  | # This file is part of Ansible |
|  |  | # |
| Expand All | | @@ -23,13 +24,13 @@ |
|  |  | import distutils.spawn |
|  |  | import traceback |
|  |  | import os |
|  |  | import shutil |
|  |  | import subprocess |
|  |  | from subprocess import Popen,PIPE |
|  |  | from ansible import errors |
|  |  | from ansible.callbacks import vvv |
|  |  | import ansible.constants as C |
|  |  |  |
|  |  | BUFSIZE = 4096 |
|  |  |  |
|  |  | class Connection(object): |
|  |  | ''' Local zone based connections ''' |
|  |  |  |
| Expand All | | @@ -44,7 +45,7 @@ def list\_zones(self): |
|  |  | cwd=self.runner.basedir, |
|  |  | stdin=subprocess.PIPE, |
|  |  | stdout=subprocess.PIPE, stderr=subprocess.PIPE) |
|  |  | #stdout, stderr = p.communicate() |
|  |  |  |
|  |  | zones = [] |
|  |  | for l in pipe.stdout.readlines(): |
|  |  | # 1:work:running:/zones/work:3126dc59-9a07-4829-cde9-a816e4c5040e:native:shared |
| Expand Down  Expand Up | | @@ -97,13 +98,20 @@ def connect(self, port=None): |
|  |  | # a modifier |
|  |  | def \_generate\_cmd(self, executable, cmd): |
|  |  | if executable: |
|  |  | ### TODO: Why was "-c" removed from here? (vs jail.py) |
|  |  | local\_cmd = [self.zlogin\_cmd, self.zone, executable, cmd] |
|  |  | else: |
|  |  | local\_cmd = '%s "%s" %s' % (self.zlogin\_cmd, self.zone, cmd) |
|  |  | return local\_cmd |
|  |  |  |
|  |  | def exec\_command(self, cmd, tmp\_path, become\_user=None, sudoable=False, executable=None, in\_data=None): |
|  |  | ''' run a command on the zone ''' |
|  |  | def \_buffered\_exec\_command(self, cmd, tmp\_path, become\_user=None, sudoable=False, executable=None, in\_data=None, stdin=subprocess.PIPE): |
|  |  | ''' run a command on the zone. This is only needed for implementing |
|  |  | put\_file() get\_file() so that we don't have to read the whole file |
|  |  | into memory. |
|  |  |  |
|  |  | compared to exec\_command() it looses some niceties like being able to |
|  |  | return the process's exit code immediately. |
|  |  | ''' |
|  |  |  |
|  |  | if sudoable and self.runner.become and self.runner.become\_method not in self.become\_methods\_supported: |
|  |  | raise errors.AnsibleError("Internal Error: this module does not support running commands via %s" % self.runner.become\_method) |
| Expand All | | @@ -112,52 +120,61 @@ def exec\_command(self, cmd, tmp\_path, become\_user=None, sudoable=False, executab |
|  |  | raise errors.AnsibleError("Internal Error: this module does not support optimized module pipelining") |
|  |  |  |
|  |  | # We happily ignore privilege escalation |
|  |  | if executable == '/bin/sh': |
|  |  | executable = None |
|  |  | local\_cmd = self.\_generate\_cmd(executable, cmd) |
|  |  |  |
|  |  | vvv("EXEC %s" % (local\_cmd), host=self.zone) |
|  |  | p = subprocess.Popen(local\_cmd, shell=isinstance(local\_cmd, basestring), |
|  |  | cwd=self.runner.basedir, |
|  |  | stdin=subprocess.PIPE, |
|  |  | stdin=stdin, |
|  |  | stdout=subprocess.PIPE, stderr=subprocess.PIPE) |
|  |  |  |
|  |  | return p |
|  |  |  |
|  |  | def exec\_command(self, cmd, tmp\_path, become\_user=None, sudoable=False, executable=None, in\_data=None): |
|  |  | ''' run a command on the zone ''' |
|  |  |  |
|  |  | ### TODO: Why all the precautions not to specify /bin/sh? (vs jail.py) |
|  |  | if executable == '/bin/sh': |
|  |  | executable = None |
|  |  |  |
|  |  | p = self.\_buffered\_exec\_command(cmd, tmp\_path, become\_user, sudoable, executable, in\_data) |
|  |  |  |
|  |  | stdout, stderr = p.communicate() |
|  |  | return (p.returncode, '', stdout, stderr) |
|  |  |  |
|  |  | def \_normalize\_path(self, path, prefix): |
|  |  | if not path.startswith(os.path.sep): |
|  |  | path = os.path.join(os.path.sep, path) |
|  |  | normpath = os.path.normpath(path) |
|  |  | return os.path.join(prefix, normpath[1:]) |
|  |  |  |
|  |  | def \_copy\_file(self, in\_path, out\_path): |
|  |  | if not os.path.exists(in\_path): |
|  |  | raise errors.AnsibleFileNotFound("file or module does not exist: %s" % in\_path) |
|  |  | try: |
|  |  | shutil.copyfile(in\_path, out\_path) |
|  |  | except shutil.Error: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to copy: %s and %s are the same" % (in\_path, out\_path)) |
|  |  | except IOError: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to transfer file to %s" % out\_path) |
|  |  |  |
|  |  | def put\_file(self, in\_path, out\_path): |
|  |  | ''' transfer a file from local to zone ''' |
|  |  |  |
|  |  | out\_path = self.\_normalize\_path(out\_path, self.get\_zone\_path()) |
|  |  | vvv("PUT %s TO %s" % (in\_path, out\_path), host=self.zone) |
|  |  |  |
|  |  | self.\_copy\_file(in\_path, out\_path) |
|  |  | with open(in\_path, 'rb') as in\_file: |
|  |  | p = self.\_buffered\_exec\_command('dd of=%s' % out\_path, None, stdin=in\_file) |
|  |  | try: |
|  |  | stdout, stderr = p.communicate() |
|  |  | except: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to transfer file to %s" % out\_path) |
|  |  | if p.returncode != 0: |
|  |  | raise errors.AnsibleError("failed to transfer file to %s:\n%s\n%s" % (out\_path, stdout, stderr)) |
|  |  |  |
|  |  | def fetch\_file(self, in\_path, out\_path): |
|  |  | ''' fetch a file from zone to local ''' |
|  |  |  |
|  |  | in\_path = self.\_normalize\_path(in\_path, self.get\_zone\_path()) |
|  |  | vvv("FETCH %s TO %s" % (in\_path, out\_path), host=self.zone) |
|  |  |  |
|  |  | self.\_copy\_file(in\_path, out\_path) |
|  |  |  |
|  |  | p = self.\_buffered\_exec\_command('dd if=%s bs=%s' % (in\_path, BUFSIZE), None) |
|  |  |  |
|  |  | with open(out\_path, 'wb+') as out\_file: |
|  |  | try: |
|  |  | for chunk in p.stdout.read(BUFSIZE): |
|  |  | out\_file.write(chunk) |
|  |  | except: |
|  |  | traceback.print\_exc() |
|  |  | raise errors.AnsibleError("failed to transfer file to %s" % out\_path) |
|  |  | stdout, stderr = p.communicate() |
|  |  | if p.returncode != 0: |
|  |  | raise errors.AnsibleError("failed to transfer file to %s:\n%s\n%s" % (out\_path, stdout, stderr)) |
|  |  |  |
|  |  | def close(self): |
|  |  | ''' terminate the connection; nothing to do here ''' |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `ca2f2c4`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fansible%2Fansible%2Fcommit%2Fca2f2c4ebd7b5e097eab0a710f79c1f63badf95b) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from bugzilla.redhat.com_5ccc9931_20250125_171057.html ===


* Login
  + Log in using an SSO provider:- [Fedora Account System](saml2_login.cgi?idp=Fedora%20Account%20System&target=show_bug.cgi%3Fid%3D1243468)
    - [Red Hat Associate](saml2_login.cgi?idp=Red%20Hat%20Associate&target=show_bug.cgi%3Fid%3D1243468)
    - [Red Hat Customer](saml2_login.cgi?idp=Red%20Hat%20Customer&target=show_bug.cgi%3Fid%3D1243468)+ Login using a Red Hat Bugzilla account
  + Forgot Password
  + [Create an Account](createaccount.cgi)

Red Hat Bugzilla – Bug 1243468

* [Home](./)
* [New](enter_bug.cgi)
* Search
  + [Simple Search](query.cgi?format=specific)
  + [Advanced Search](query.cgi?format=advanced)
* My Links
  + [Browse](describecomponents.cgi)
  + [Requests](request.cgi)
  + Reports
  + Current State
    - [Search](query.cgi)
    - [Tabular reports](query.cgi?format=report-table)
    - [Graphical reports](query.cgi?format=report-graph)
    - [Duplicates](duplicates.cgi)
  + Other Reports
    - [User Changes](https://bugzilla.redhat.com/page.cgi?id=user_activity.html)
  + Plotly Reports
    - [Bug Status](https://bugzilla.redhat.com/page.cgi?id=bug_status.html)
    - [Bug Severity](https://bugzilla.redhat.com/page.cgi?id=bug_severity.html)
    - [Non-Defaults](https://bugzilla.redhat.com/page.cgi?id=non_defaults.html)
* [Product Dashboard](page.cgi?id=productdashboard.html)

- Help
  * [Page Help!](docs/en/html/using/understanding.html)
  * [Bug Writing Guidelines](page.cgi?id=bug-writing.html)
  * [What's new](page.cgi?id=whats-new.html)
  * [Browser Support Policy](https://access.redhat.com/help/browsers)
  * [5.0.4.rh103 Release notes](page.cgi?id=release-notes.html)
  * [FAQ](page.cgi?id=faq.html)
  * [Guides index](docs/en/html/index.html)
  * [User guide](docs/en/html/using/index.html)
  * [Web Services](docs/en/html/integrating/api/Bugzilla/WebService/Bug.html)
  * [Contact](page.cgi?id=redhat/contact.html)
  * [Legal](page.cgi?id=terms-conditions.html)
- [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")

This site requires JavaScript to be enabled to function correctly, please enable it.

[**Bug 1243468**](show_bug.cgi?id=1243468)
(CVE-2015-3908, CVE-2015-6240)
- [CVE-2015-6240](https://access.redhat.com/security/cve/CVE-2015-6240) [CVE-2015-3908](https://access.redhat.com/security/cve/CVE-2015-3908) ansible: multiple issues fixed in 1.9.2

[Summary:](page.cgi?id=fields.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
CVE-2015-6240 CVE-2015-3908 ansible: multiple issues fixed in 1.9.2

| | [Keywords](describekeywords.cgi): | Security | | --- | --- | | [Status](page.cgi?id=fields.html#bug_status): | CLOSED ERRATA | | [Alias:](page.cgi?id=fields.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | CVE-2015-3908, CVE-2015-6240 | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | Security Response | | [Classification:](page.cgi?id=fields.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Other | | [Component:](describecomponents.cgi?product=Security Response "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | vulnerability | | [Sub Component:](page.cgi?id=fields.html#rh_sub_components "The sub component of a specific component") | --- | | [Version:](page.cgi?id=fields.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=fields.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All | | [OS:](page.cgi?id=fields.html#op_sys "The operating system the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | Linux | | [Priority:](page.cgi?id=fields.html#priority) | high | | [Severity:](page.cgi?id=fields.html#bug_severity) | high | | [Target Milestone:](page.cgi?id=fields.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Assignee:](page.cgi?id=fields.html#assigned_to "The person in charge of resolving the bug.") | Red Hat Product Security | | [QA Contact:](page.cgi?id=fields.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") |  | | [Docs Contact:](page.cgi?id=fields.html#docs_contact "The person responsible for documenting once the bug has been resolved.") |  | | [URL:](page.cgi?id=fields.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=fields.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") |  | | [Depends On:](page.cgi?id=fields.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") | [1243469](show_bug.cgi?id=1243469 "CLOSED CURRENTRELEASE - ansible: improprer symlink handling in zone, jail, and chroot connection plugins [fedora-all]") [1243470](show_bug.cgi?id=1243470 "CLOSED CURRENTRELEASE - ansible: improprer symlink handling in zone, jail, and chroot connection plugins [epel-all]") | | [Blocks:](page.cgi?id=fields.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | | TreeView+ | [depends on](buglist.cgi?bug_id=1243468&bug_id_type=anddependson&format=tvp) / [blocked](buglist.cgi?bug_id=1243468&bug_id_type=andblocked&format=tvp&tvp_dir=blocked) |  | |  | | [Reported:](page.cgi?id=fields.html#reporter) | 2015-07-15 13:56 UTC by Vasyl Kaigorodov | | --- | --- | | [Modified:](page.cgi?id=fields.html#modified) | 2021-02-17 05:08 UTC ([History](show_activity.cgi?id=1243468)) | | [CC List:](page.cgi?id=fields.html#cclist) | 5 users (show)  a.badger athmanem kevin kupo maxim | | Fixed In Version: | Ansible 1.9.2 | | | Doc Type: | Bug Fix | | | Doc Text: |  | | | Clone Of: |  | | | Environment: |  | | | Last Closed: | 2017-05-12 07:05:11 UTC | | | Embargoed: |  | | |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | [(Terms of Use)](page.cgi?id=terms-conditions.html) | | | --- | --- | --- | |  | | | |  |
| --- | --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=1243468#c0)  Vasyl Kaigorodov    2015-07-15 13:56:26 UTC  ``` Ansible versions before 1.9.2 are vulnerable to a symlink attack that enables a malicious zone/chroot/jail managed by ansible to escape into the managing host.  Upstream commits that fix this issue:  <https://github.com/ansible/ansible/commit/548a7288a90c49e9b50ccf197da307eae525b899> <https://github.com/ansible/ansible/commit/270be6a6f5852c5563976f060c80eff64decc89c> <https://github.com/ansible/ansible/commit/952166f48eb0f5797b75b160fd156bbe1e8fc647> <https://github.com/ansible/ansible/commit/0777d025051bf5cf3092aa79a9e6b67cec7064dd> <https://github.com/ansible/ansible/commit/ca2f2c4ebd7b5e097eab0a710f79c1f63badf95b>  CVE request: <http://seclists.org/oss-sec/2015/q3/105>  External References:  <http://www.ansible.com/security>   ```  [Comment 1](show_bug.cgi?id=1243468#c1)  Vasyl Kaigorodov    2015-07-15 13:57:10 UTC  ```  Created ansible tracking bugs for this issue:  Affects: fedora-all [[bug 1243469](show_bug.cgi?id=1243469 "CLOSED CURRENTRELEASE - ansible: improprer symlink handling in zone, jail, and chroot connection plugins [fedora-all]")] Affects: epel-all [[bug 1243470](show_bug.cgi?id=1243470 "CLOSED CURRENTRELEASE - ansible: improprer symlink handling in zone, jail, and chroot connection plugins [epel-all]")]   ```  [Comment 2](show_bug.cgi?id=1243468#c2)  Vasyl Kaigorodov    2015-07-15 14:06:56 UTC  ``` Additionally it was reported that versions of Ansible prior to 1.9.2 fail to adequately validate HTTPS certificates when using the get_url and uri  modules, and when using the url and etcd lookup plugins. This allows for man-in-the-middle attacks on those connections.  The fix for this problem has been released as part of Ansible 1.9.2.  The Ansible playbook below is a proof-of-concept that can be used to safely validate the incorrect behaviour:    - name: a playbook demonstrating MITM in ansible     hosts: 127.0.0.1     connection: local     tasks:     - name: this should fail       get_url: url=<https://kennethreitz.org/> dest="/tmp/shouldnotexist.html”  This playbook attempts to download a HTML file from a site presenting a certificate that is valid, but not for the site  in question. Versions of Ansible from 1.9.2 onward correctly fail to validate the certificate, but earlier versions  will download the file regardless and the playbook will successfully exit.  This issue was assigned CVE-2015-3908: <http://seclists.org/oss-sec/2015/q3/106>   ```  [Comment 3](show_bug.cgi?id=1243468#c3)  Adam Mariš    2015-08-18 12:09:52 UTC  ``` Another CVE assignment: <http://seclists.org/oss-sec/2015/q3/378>   ```  [Comment 4](show_bug.cgi?id=1243468#c4)  Toshio Ernie Kuratomi    2015-08-18 16:40:25 UTC  ``` Adam Mariš  - thanks for watching this -- I'm not on oss-seclist but I ocncur with their assessment (There's only one bug.  that bug was present in several ansible connection modules. the fix for each was roughly the same code.  Only the first commit hash is part of the fix for the security issue.  The other commits were only to fix non-security bugs and limitations in the initial fix).  If anyone here would like to let oss-sec know I agree with their assessment I would be grateful.   ``` |  |
| --- | --- |

---

| Note You need to [log in](show_bug.cgi?id=1243468&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. |
| --- |

---

[Privacy](page.cgi?id=redhat/privacy.html)
[Contact](page.cgi?id=redhat/contact.html)
[FAQ](page.cgi?id=faq.html)
[Legal](page.cgi?id=terms-conditions.html)


