=== Content from github.com_a36ca5dc_20250125_152650.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwp-plugins%2Fgravity-forms-dps-pxpay%2Fcommit%2F5966a5e6343e3d5610bdfa126a5cfbae95e629b6)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwp-plugins%2Fgravity-forms-dps-pxpay%2Fcommit%2F5966a5e6343e3d5610bdfa126a5cfbae95e629b6)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=wp-plugins%2Fgravity-forms-dps-pxpay)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

This repository has been archived by the owner on Mar 1, 2024. It is now read-only.

[wp-plugins](/wp-plugins)
/
**[gravity-forms-dps-pxpay](/wp-plugins/gravity-forms-dps-pxpay)**
Public archive

* [Notifications](/login?return_to=%2Fwp-plugins%2Fgravity-forms-dps-pxpay) You must be signed in to change notification settings
* [Fork
  0](/login?return_to=%2Fwp-plugins%2Fgravity-forms-dps-pxpay)
* [Star
   0](/login?return_to=%2Fwp-plugins%2Fgravity-forms-dps-pxpay)

* [Code](/wp-plugins/gravity-forms-dps-pxpay)
* [Pull requests
  0](/wp-plugins/gravity-forms-dps-pxpay/pulls)
* [Actions](/wp-plugins/gravity-forms-dps-pxpay/actions)
* [Projects
  0](/wp-plugins/gravity-forms-dps-pxpay/projects)
* [Security](/wp-plugins/gravity-forms-dps-pxpay/security)
* [Insights](/wp-plugins/gravity-forms-dps-pxpay/pulse)

Additional navigation options

* [Code](/wp-plugins/gravity-forms-dps-pxpay)
* [Pull requests](/wp-plugins/gravity-forms-dps-pxpay/pulls)
* [Actions](/wp-plugins/gravity-forms-dps-pxpay/actions)
* [Projects](/wp-plugins/gravity-forms-dps-pxpay/projects)
* [Security](/wp-plugins/gravity-forms-dps-pxpay/security)
* [Insights](/wp-plugins/gravity-forms-dps-pxpay/pulse)

## Commit

[Permalink](/wp-plugins/gravity-forms-dps-pxpay/commit/5966a5e6343e3d5610bdfa126a5cfbae95e629b6)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

gravity-forms-dps-pxpay 1.4.3: XSS, error handling, new hooks

[Browse files](/wp-plugins/gravity-forms-dps-pxpay/tree/5966a5e6343e3d5610bdfa126a5cfbae95e629b6)
Browse the repository at this point in the history

```
git-svn-id: [https://plugins.svn.wordpress.org/gravity-forms-dps-pxpay/trunk@1150713](https://plugins.svn.wordpress.org/gravity-forms-dps-pxpay/trunk%401150713) b8457f37-d9ea-0310-8a92-e5e31aec5664
```

* Loading branch information

webaware
committed
May 1, 2015

1 parent
[a0aacda](/wp-plugins/gravity-forms-dps-pxpay/commit/a0aacda6a0f75993669b4ed17858f21f197fba15)

commit 5966a5e

 Show file tree

 Hide file tree

Showing
**10 changed files**
with
**80 additions**
and
**38 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* gravityforms-dps-pxpay.php
  [gravityforms-dps-pxpay.php](#diff-8915ec45f01ae81129cdf39855fead1d58188702b9e808bd40de6eeb038d9127)
* includes

  + includes/class.GFDpsPxPayAdmin.php
    [class.GFDpsPxPayAdmin.php](#diff-618d7a9cefb436a89513e9569b51b4525b8ff6c6a340de440d19a3f546c32daf)
  + includes/class.GFDpsPxPayFeedAdmin.php
    [class.GFDpsPxPayFeedAdmin.php](#diff-3f39b31cfdf9c81b3f07a83d95f1753967993061c770c73e583ecb1b3c9e8429)
  + includes/class.GFDpsPxPayPayment.php
    [class.GFDpsPxPayPayment.php](#diff-c1d9b20ce583dcafa836edd23cd48baa1ab2d2ecb2ded7f59869632c0541e379)
  + includes/class.GFDpsPxPayPlugin.php
    [class.GFDpsPxPayPlugin.php](#diff-106004340280cca8286c3e4bcb35ec3bdf37f2863d4a4922c6b77d5385fe80f1)
  + includes/class.GFDpsPxPayResult.php
    [class.GFDpsPxPayResult.php](#diff-ac5bc6ea25ce2f3d02d24788fc3b8853fb759496eb118341f21d321f5a88f7d8)
* readme.md
  [readme.md](#diff-5a831ea67cf5cf8703b0de46901ab25bd191f56b320053be9332d9a3b0d01d15)
* readme.txt
  [readme.txt](#diff-9e6e4772050998a5c0dc3c61acf3dab0a7e594566171fa5746d6b62f9598efb6)
* views

  + views/metabox-save.php
    [metabox-save.php](#diff-daee61219f6ddd6ce81f2c90171949cce220da701154ea34d127b2fa76b4dec1)
  + views/requires-extensions.php
    [requires-extensions.php](#diff-d869719c9107819f72b1100def4c26278cd07ef84d1f344b345cf73a4038d0f1)

## There are no files selected for viewing

6 changes: 3 additions & 3 deletions

6
[gravityforms-dps-pxpay.php](#diff-8915ec45f01ae81129cdf39855fead1d58188702b9e808bd40de6eeb038d9127 "gravityforms-dps-pxpay.php")

Show comments

[View file](/wp-plugins/gravity-forms-dps-pxpay/blob/5966a5e6343e3d5610bdfa126a5cfbae95e629b6/gravityforms-dps-pxpay.php)
Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -3,13 +3,13 @@ |
|  |  | Plugin Name: Gravity Forms DPS PxPay |
|  |  | Plugin URI: http://shop.webaware.com.au/downloads/gravity-forms-dps-pxpay/ |
|  |  | Description: Integrates Gravity Forms with DPS PxPay payment gateway, enabling end users to purchase goods and services through Gravity Forms. |
|  |  | Version: 1.4.2 |
|  |  | Version: 1.4.3 |
|  |  | Author: WebAware |
|  |  | Author URI: http://webaware.com.au/ |
|  |  | \*/ |
|  |  |  |
|  |  | /\* |
|  |  | copyright (c) 2013-2014 WebAware Pty Ltd (email : support@webaware.com.au) |
|  |  | copyright (c) 2013-2015 WebAware Pty Ltd (email : support@webaware.com.au) |
|  |  |  |
|  |  | This program is free software; you can redistribute it and/or |
|  |  | modify it under the terms of the GNU General Public License |
| Expand All | | @@ -34,7 +34,7 @@ |
|  |  | define('GFDPSPXPAY\_PLUGIN\_NAME', basename(dirname(\_\_FILE\_\_)) . '/' . basename(\_\_FILE\_\_)); |
|  |  | define('GFDPSPXPAY\_PLUGIN\_FILE', \_\_FILE\_\_); |
|  |  | define('GFDPSPXPAY\_PLUGIN\_OPTIONS', 'gfdpspxpay\_plugin'); |
|  |  | define('GFDPSPXPAY\_PLUGIN\_VERSION', '1.4.2'); |
|  |  | define('GFDPSPXPAY\_PLUGIN\_VERSION', '1.4.3'); |
|  |  |  |
|  |  | // custom post types |
|  |  | define('GFDPSPXPAY\_TYPE\_FEED', 'gfdpspxpay\_feed'); |
| Expand Down | |  |

8 changes: 5 additions & 3 deletions

8
[includes/class.GFDpsPxPayAdmin.php](#diff-618d7a9cefb436a89513e9569b51b4525b8ff6c6a340de440d19a3f546c32daf "includes/class.GFDpsPxPayAdmin.php")

Show comments

[View file](/wp-plugins/gravity-forms-dps-pxpay/blob/5966a5e6343e3d5610bdfa126a5cfbae95e629b6/includes/class.GFDpsPxPayAdmin.php)
Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -134,7 +134,7 @@ public function checkPrerequisites() { |
|  |  | public function addPluginActionLinks($links) { |
|  |  | // add settings link, but only if GravityForms plugin is active |
|  |  | if (self::isGfActive()) { |
|  |  | $settings\_link = sprintf('<a href="%s">Settings</a>', admin\_url('admin.php?page=gf\_settings&subview=DPS+PxPay')); |
|  |  | $settings\_link = sprintf('<a href="%s">Settings</a>', esc\_url(admin\_url('admin.php?page=gf\_settings&subview=DPS+PxPay'))); |
|  |  | array\_unshift($links, $settings\_link); |
|  |  | } |
|  |  |  |
| Expand All | | @@ -146,8 +146,8 @@ public function addPluginActionLinks($links) { |
|  |  | \*/ |
|  |  | public static function addPluginDetailsLinks($links, $file) { |
|  |  | if ($file == GFDPSPXPAY\_PLUGIN\_NAME) { |
|  |  | $links[] = '<a href="http://wordpress.org/support/plugin/gravity-forms-dps-pxpay">' . \_\_('Get help') . '</a>'; |
|  |  | $links[] = '<a href="http://wordpress.org/plugins/gravity-forms-dps-pxpay/">' . \_\_('Rating') . '</a>'; |
|  |  | $links[] = '<a href="https://wordpress.org/support/plugin/gravity-forms-dps-pxpay">' . \_\_('Get help') . '</a>'; |
|  |  | $links[] = '<a href="https://wordpress.org/plugins/gravity-forms-dps-pxpay/">' . \_\_('Rating') . '</a>'; |
|  |  | $links[] = '<a href="http://shop.webaware.com.au/downloads/gravity-forms-dps-pxpay/">' . \_\_('Donate') . '</a>'; |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -217,6 +217,8 @@ public function feedsAdmin() { |
|  |  | \* @return array |
|  |  | \*/ |
|  |  | public function settingsValidate($input) { |
|  |  | $output = array(); |
|  |  |  |
|  |  | $output['userID'] = trim($input['userID']); |
|  |  | $output['userKey'] = trim($input['userKey']); |
|  |  | $output['testID'] = trim($input['testID']); |
| Expand Down | |  |

8 changes: 4 additions & 4 deletions

8
[includes/class.GFDpsPxPayFeedAdmin.php](#diff-3f39b31cfdf9c81b3f07a83d95f1753967993061c770c73e583ecb1b3c9e8429 "includes/class.GFDpsPxPayFeedAdmin.php")

Show comments

[View file](/wp-plugins/gravity-forms-dps-pxpay/blob/5966a5e6343e3d5610bdfa126a5cfbae95e629b6/includes/class.GFDpsPxPayFeedAdmin.php)
Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -105,8 +105,8 @@ public function actionAddMetaBoxes($post) { |
|  |  | \* @param array $metabox has metabox id, title, callback, and args elements. |
|  |  | \*/ |
|  |  | public function metaboxList($post, $metabox) { |
|  |  | $feedsURL = 'edit.php?post\_type=' . GFDPSPXPAY\_TYPE\_FEED; |
|  |  | echo "<a href=\"$feedsURL\">Click to return to list</a>.\n"; |
|  |  | $feedsURL = admin\_url('edit.php?post\_type=' . GFDPSPXPAY\_TYPE\_FEED); |
|  |  | printf('<a href="%s">Click to return to list</a>', esc\_url($feedsURL)); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
| Expand Down  Expand Up | | @@ -267,8 +267,8 @@ public function filterPostRowActions($actions, $post) { |
|  |  |  |
|  |  | $delete = array\_pop($actions); // pop the end link, so that we can "insert" ours before it |
|  |  |  |
|  |  | $actions['entries'] = sprintf('<a href="%s" title="%s">%s</a>', |
|  |  | add\_query\_arg(array('page' => 'gf\_entries', 'id' => $feed->FormID), admin\_url('admin.php')), 'View Entries', 'Entries'); |
|  |  | $url = add\_query\_arg(array('page' => 'gf\_entries', 'id' => $feed->FormID), admin\_url('admin.php')); |
|  |  | $actions['entries'] = sprintf('<a href="%s" title="%s">%s</a>', esc\_url($url), 'View Entries', 'Entries'); |
|  |  |  |
|  |  | $actions['delete'] = $delete; // replace the end link |
|  |  | } |
| Expand Down | |  |

35 changes: 30 additions & 5 deletions

35
[includes/class.GFDpsPxPayPayment.php](#diff-c1d9b20ce583dcafa836edd23cd48baa1ab2d2ecb2ded7f59869632c0541e379 "includes/class.GFDpsPxPayPayment.php")

Show comments

[View file](/wp-plugins/gravity-forms-dps-pxpay/blob/5966a5e6343e3d5610bdfa126a5cfbae95e629b6/includes/class.GFDpsPxPayPayment.php)
Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -236,6 +236,8 @@ class GFDpsPxPayPaymentResponse { |
|  |  | \*/ |
|  |  | public $paymentURL; |
|  |  |  |
|  |  | protected $errorMessage; |
|  |  |  |
|  |  | /\*\* |
|  |  | \* load DPS PxPay response data as XML string |
|  |  | \* @param string $response DPS PxPay response as a string (hopefully of XML data) |
| Expand All | | @@ -256,8 +258,31 @@ public function loadResponseXML($response) { |
|  |  | throw new Exception($errmsg); |
|  |  | } |
|  |  |  |
|  |  | $this->isValid = ('1' === ((string) $xml['valid'])); |
|  |  | $this->paymentURL = (string) $xml->URI; |
|  |  | if ('1' === ((string) $xml['valid'])) { |
|  |  | $this->isValid = true; |
|  |  | $this->paymentURL = (string) $xml->URI; |
|  |  |  |
|  |  | if (empty($this->paymentURL)) { |
|  |  | $this->isValid = false; |
|  |  |  |
|  |  | $this->errorMessage = (string) $xml->ResponseText; |
|  |  | if (empty($this->errorMessage)) { |
|  |  | $this->errorMessage = 'no hosted page URI given'; |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  | else { |
|  |  | $this->isValid = false; |
|  |  | $this->errorMessage = (string) $xml->ResponseText; |
|  |  | if (empty($this->errorMessage)) { |
|  |  | // API 1.0 passed error message in URI |
|  |  | $this->errorMessage = (string) $xml->URI; |
|  |  |  |
|  |  | if (empty($this->errorMessage)) { |
|  |  | $this->errorMessage = 'invalid request'; |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // restore old libxml settings |
|  |  | libxml\_disable\_entity\_loader($oldDisableEntityLoader); |
| Expand All | | @@ -268,12 +293,12 @@ public function loadResponseXML($response) { |
|  |  | libxml\_disable\_entity\_loader($oldDisableEntityLoader); |
|  |  | libxml\_use\_internal\_errors($oldUseInternalErrors); |
|  |  |  |
|  |  | throw new GFDpsPxPayException('Error parsing DPS PxPay generate response: ' . $e->getMessage()); |
|  |  | throw new GFDpsPxPayException('Error parsing DPS PxPay request: ' . $e->getMessage()); |
|  |  | } |
|  |  |  |
|  |  | // if response is "invalid", throw error with message given in URI field |
|  |  | // if response is "invalid", throw error with message |
|  |  | if (!$this->isValid) { |
|  |  | throw new GFDpsPxPayException('Error from DPS PxPay generate response: ' . $this->paymentURL); |
|  |  | throw new GFDpsPxPayException('Error from DPS PxPay request: ' . $this->errorMessage); |
|  |  | } |
|  |  | } |
|  |  | } |

31 changes: 19 additions & 12 deletions

31
[includes/class.GFDpsPxPayPlugin.php](#diff-106004340280cca8286c3e4bcb35ec3bdf37f2863d4a4922c6b77d5385fe80f1 "includes/class.GFDpsPxPayPlugin.php")

Show comments

[View file](/wp-plugins/gravity-forms-dps-pxpay/blob/5966a5e6343e3d5610bdfa126a5cfbae95e629b6/includes/class.GFDpsPxPayPlugin.php)
Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -405,11 +405,13 @@ public function gformEntryPostSave($entry, $form) { |
|  |  | else { |
|  |  | $entry['payment\_status'] = 'Failed'; |
|  |  | $this->errorMessage = 'Payment Express request invalid.'; |
|  |  | self::log\_debug($this->errorMessage); |
|  |  | } |
|  |  | } |
|  |  | catch (GFDpsPxPayException $e) { |
|  |  | $entry['payment\_status'] = 'Failed'; |
|  |  | $this->errorMessage = $e->getMessage(); |
|  |  | self::log\_debug($this->errorMessage); |
|  |  | } |
|  |  |  |
|  |  | // update the entry |
| Expand All | | @@ -432,15 +434,7 @@ public function gformEntryPostSave($entry, $form) { |
|  |  | \* @return mixed |
|  |  | \*/ |
|  |  | public function gformConfirmation($confirmation, $form, $entry, $ajax) { |
|  |  | if ($this->paymentURL) { |
|  |  | // NB: GF handles redirect via JavaScript if headers already sent, or AJAX |
|  |  | $confirmation = array('redirect' => $this->paymentURL); |
|  |  | self::log\_debug('Payment Express request valid, redirecting...'); |
|  |  |  |
|  |  | $this->paymentURL = false; |
|  |  | } |
|  |  |  |
|  |  | elseif ($this->errorMessage) { |
|  |  | if ($this->errorMessage) { |
|  |  | $feed = $this->getFeed($form['id']); |
|  |  | if ($feed) { |
|  |  | // create a "confirmation message" in which to display the error |
| Expand All | | @@ -454,10 +448,18 @@ public function gformConfirmation($confirmation, $form, $entry, $ajax) { |
|  |  | include GFDPSPXPAY\_PLUGIN\_ROOT . 'views/error-payment-failure.php'; |
|  |  | $confirmation = ob\_get\_clean(); |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | $this->errorMessage = false; |
|  |  | elseif ($this->paymentURL) { |
|  |  | // NB: GF handles redirect via JavaScript if headers already sent, or AJAX |
|  |  | $confirmation = array('redirect' => $this->paymentURL); |
|  |  | self::log\_debug('Payment Express request valid, redirecting to: ' . $this->paymentURL); |
|  |  | } |
|  |  |  |
|  |  | // reset transient members |
|  |  | $this->errorMessage = false; |
|  |  | $this->paymentURL = false; |
|  |  |  |
|  |  | return $confirmation; |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -498,6 +500,8 @@ public function processDpsReturn() { |
|  |  | $form = GFFormsModel::get\_form\_meta($lead['form\_id']); |
|  |  | $feed = $this->getFeed($form['id']); |
|  |  |  |
|  |  | do\_action('gfdpspxpay\_process\_return\_parsed', $lead, $form, $feed); |
|  |  |  |
|  |  | // update lead entry, with success/fail details |
|  |  | if ($response->success) { |
|  |  | $lead['payment\_status'] = 'Approved'; |
| Expand Down  Expand Up | | @@ -539,15 +543,16 @@ public function processDpsReturn() { |
|  |  | // on failure, redirect to failure page if set, otherwise fall through to redirect back to confirmation page |
|  |  | if ($lead['payment\_status'] == 'Failed') { |
|  |  | if ($feed->UrlFail) { |
|  |  | wp\_redirect($feed->UrlFail); |
|  |  | wp\_redirect(esc\_url\_raw($feed->UrlFail)); |
|  |  | exit; |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // redirect to Gravity Forms page, passing form and lead IDs, encoded to deter simple attacks |
|  |  | $query = "form\_id={$lead['form\_id']}&lead\_id={$lead['id']}"; |
|  |  | $query .= "&hash=" . wp\_hash($query); |
|  |  | wp\_redirect(add\_query\_arg(array(self::PXPAY\_RETURN => base64\_encode($query)), $lead['source\_url'])); |
|  |  | $redirect\_url = esc\_url\_raw(add\_query\_arg(array(self::PXPAY\_RETURN => base64\_encode($query)), $lead['source\_url'])); |
|  |  | wp\_redirect($redirect\_url); |
|  |  | exit; |
|  |  | } |
|  |  | } |
| Expand Down  Expand Up | | @@ -584,6 +589,8 @@ public function processFormConfirmation() { |
|  |  | $form = GFFormsModel::get\_form\_meta($query['form\_id']); |
|  |  | $lead = GFFormsModel::get\_lead($query['lead\_id']); |
|  |  |  |
|  |  | do\_action('gfdpspxpay\_process\_confirmation\_parsed', $lead, $form); |
|  |  |  |
|  |  | // get confirmation page |
|  |  | if (!class\_exists('GFFormDisplay')) { |
|  |  | require\_once(GFCommon::get\_base\_path() . '/form\_display.php'); |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[includes/class.GFDpsPxPayResult.php](#diff-ac5bc6ea25ce2f3d02d24788fc3b8853fb759496eb118341f21d321f5a88f7d8 "includes/class.GFDpsPxPayResult.php")

Show comments

[View file](/wp-plugins/gravity-forms-dps-pxpay/blob/5966a5e6343e3d5610bdfa126a5cfbae95e629b6/includes/class.GFDpsPxPayResult.php)
Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -311,7 +311,7 @@ public function loadResponseXML($response) { |
|  |  | libxml\_disable\_entity\_loader($oldDisableEntityLoader); |
|  |  | libxml\_use\_internal\_errors($oldUseInternalErrors); |
|  |  |  |
|  |  | throw new GFDpsPxPayException('Error parsing DPS PxPay result request: ' . $e->getMessage()); |
|  |  | throw new GFDpsPxPayException('Error parsing DPS PxPay result: ' . $e->getMessage()); |
|  |  | } |
|  |  |  |
|  |  | // if response is "invalid", throw error with message given in statusText field |
| Expand Down | |  |

6 changes: 3 additions & 3 deletions

6
[readme.md](#diff-5a831ea67cf5cf8703b0de46901ab25bd191f56b320053be9332d9a3b0d01d15 "readme.md")

Show comments

[View file](/wp-plugins/gravity-forms-dps-pxpay/blob/5966a5e6343e3d5610bdfa126a5cfbae95e629b6/readme.md)
Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -5,7 +5,7 @@ Integrate [Gravity Forms](http://webaware.com.au/get-gravity-forms) with the DPS |
|  |  | \* [Home](http://shop.webaware.com.au/downloads/gravity-forms-dps-pxpay/) |
|  |  | \* [GitHub](https://github.com/webaware/gravity-forms-dps-pxpay/) |
|  |  | \* [Readme](https://github.com/webaware/gravity-forms-dps-pxpay/blob/master/readme.txt) |
|  |  | \* [Download](http://wordpress.org/plugins/gravity-forms-dps-pxpay/) |
|  |  | \* [Documentation](http://wordpress.org/plugins/gravity-forms-dps-pxpay/faq/) |
|  |  | \* [Support](http://wordpress.org/support/plugin/gravity-forms-dps-pxpay) |
|  |  | \* [Download](https://wordpress.org/plugins/gravity-forms-dps-pxpay/) |
|  |  | \* [Documentation](https://wordpress.org/plugins/gravity-forms-dps-pxpay/faq/) |
|  |  | \* [Support](https://wordpress.org/support/plugin/gravity-forms-dps-pxpay) |
|  |  | \* [Donate](http://shop.webaware.com.au/downloads/gravity-forms-dps-pxpay/) |

14 changes: 11 additions & 3 deletions

14
[readme.txt](#diff-9e6e4772050998a5c0dc3c61acf3dab0a7e594566171fa5746d6b62f9598efb6 "readme.txt")

Show comments

[View file](/wp-plugins/gravity-forms-dps-pxpay/blob/5966a5e6343e3d5610bdfa126a5cfbae95e629b6/readme.txt)
Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -6,8 +6,8 @@ Author URI: http://webaware.com.au/ |
|  |  | Donate link: http://shop.webaware.com.au/downloads/gravity-forms-dps-pxpay/ |
|  |  | Tags: gravityforms, gravity forms, gravity, dps, payment express, pxpay, donation, donations, payment, payment gateway, ecommerce, credit cards, new zealand, australia |
|  |  | Requires at least: 3.7.1 |
|  |  | Tested up to: 4.2 |
|  |  | Stable tag: 1.4.2 |
|  |  | Tested up to: 4.2.1 |
|  |  | Stable tag: 1.4.3 |
|  |  | License: GPLv2 or later |
|  |  | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
|  |  |  |
| Expand All | | @@ -25,7 +25,7 @@ Gravity Forms DPS PxPay adds a credit card payment gateway for [DPS PxPay](http: |
|  |  |  |
|  |  | = Sponsorships = |
|  |  |  |
|  |  | \* creation of this plugin was generously sponsored by [IstanbulMMV](http://profiles.wordpress.org/IstanbulMMV/profile/) |
|  |  | \* creation of this plugin was generously sponsored by [IstanbulMMV](https://profiles.wordpress.org/IstanbulMMV/profile/) |
|  |  |  |
|  |  | Thanks for sponsoring new features on Gravity Forms DPS PxPay! |
|  |  |  |
| Expand Down  Expand Up | | @@ -137,6 +137,14 @@ Developers can run processes on these actions (e.g. load classes required to han |
|  |  |  |
|  |  | == Changelog == |
|  |  |  |
|  |  | = 1.4.3, 2015-05-01 = |
|  |  |  |
|  |  | \* fixed: error reporting when initial request fails, e.g. with API key error |
|  |  | \* fixed: error handling logic with redirect as confirmation |
|  |  | \* added: some more precautionary XSS prevention steps |
|  |  | \* added: action `gfdpspxpay\_process\_return\_parsed` with `$lead`, `$form`, `$feed` |
|  |  | \* added: action `gfdpspxpay\_process\_confirmation\_parsed` with `$entry`, `$form` |
|  |  |  |
|  |  | = 1.4.2, 2014-12-23 = |
|  |  | \* added: hooks `gfdpspxpay\_process\_return` and `gfdpspxpay\_process\_confirmation` |
|  |  | \* changed: merge tags use currency of transaction for amount display |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[views/metabox-save.php](#diff-daee61219f6ddd6ce81f2c90171949cce220da701154ea34d127b2fa76b4dec1 "views/metabox-save.php")

Show comments

[View file](/wp-plugins/gravity-forms-dps-pxpay/blob/5966a5e6343e3d5610bdfa126a5cfbae95e629b6/views/metabox-save.php)
Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -14,7 +14,7 @@ |
|  |  | else |
|  |  | $delete\_text = \_\_('Move to Trash'); |
|  |  | ?> |
|  |  | <a class="submitdelete deletion" href="<?php echo get\_delete\_post\_link($post->ID); ?>"><?php echo $delete\_text; ?></a><?php |
|  |  | <a class="submitdelete deletion" href="<?php echo esc\_url(get\_delete\_post\_link($post->ID)); ?>"><?php echo $delete\_text; ?></a><?php |
|  |  | } ?> |
|  |  | </div> |
|  |  |  |
| Expand Down | |  |

6 changes: 3 additions & 3 deletions

6
[views/requires-extensions.php](#diff-d869719c9107819f72b1100def4c26278cd07ef84d1f344b345cf73a4038d0f1 "views/requires-extensions.php")

Show comments

[View file](/wp-plugins/gravity-forms-dps-pxpay/blob/5966a5e6343e3d5610bdfa126a5cfbae95e629b6/views/requires-extensions.php)
Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2,8 +2,8 @@ |
|  |  | <div class="error"> |
|  |  | <p>Gravity Forms DPS PxPay requires these missing PHP extensions. Please contact your website host to have these extensions installed.</p> |
|  |  | <ul style="list-style-type: disc; padding-left: 2em;"> |
|  |  | <?php foreach ($missing as $ext): if (!extension\_loaded($ext)): ?> |
|  |  | <li><?php echo $ext; ?></li> |
|  |  | <?php endif; endforeach; ?> |
|  |  | <?php foreach ($missing as $ext): ?> |
|  |  | <li><?php echo esc\_html($ext); ?></li> |
|  |  | <?php endforeach; ?> |
|  |  | </ul> |
|  |  | </div> |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `5966a5e`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwp-plugins%2Fgravity-forms-dps-pxpay%2Fcommit%2F5966a5e6343e3d5610bdfa126a5cfbae95e629b6) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_380a161f_20250125_152651.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwp-plugins%2Fgravity-forms-dps-pxpay%2Freleases%2Ftag%2F1.4.3)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fwp-plugins%2Fgravity-forms-dps-pxpay%2Freleases%2Ftag%2F1.4.3)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=wp-plugins%2Fgravity-forms-dps-pxpay)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

This repository has been archived by the owner on Mar 1, 2024. It is now read-only.

[wp-plugins](/wp-plugins)
/
**[gravity-forms-dps-pxpay](/wp-plugins/gravity-forms-dps-pxpay)**
Public archive

* [Notifications](/login?return_to=%2Fwp-plugins%2Fgravity-forms-dps-pxpay) You must be signed in to change notification settings
* [Fork
  0](/login?return_to=%2Fwp-plugins%2Fgravity-forms-dps-pxpay)
* [Star
   0](/login?return_to=%2Fwp-plugins%2Fgravity-forms-dps-pxpay)

* [Code](/wp-plugins/gravity-forms-dps-pxpay/tree/1.4.3)
* [Pull requests
  0](/wp-plugins/gravity-forms-dps-pxpay/pulls)
* [Actions](/wp-plugins/gravity-forms-dps-pxpay/actions)
* [Projects
  0](/wp-plugins/gravity-forms-dps-pxpay/projects)
* [Security](/wp-plugins/gravity-forms-dps-pxpay/security)
* [Insights](/wp-plugins/gravity-forms-dps-pxpay/pulse)

Additional navigation options

* [Code](/wp-plugins/gravity-forms-dps-pxpay/tree/1.4.3)
* [Pull requests](/wp-plugins/gravity-forms-dps-pxpay/pulls)
* [Actions](/wp-plugins/gravity-forms-dps-pxpay/actions)
* [Projects](/wp-plugins/gravity-forms-dps-pxpay/projects)
* [Security](/wp-plugins/gravity-forms-dps-pxpay/security)
* [Insights](/wp-plugins/gravity-forms-dps-pxpay/pulse)

[Releases](/wp-plugins/gravity-forms-dps-pxpay/releases)
[Tags](/wp-plugins/gravity-forms-dps-pxpay/tags)

# 1.4.3

* [1.4.3](/wp-plugins/gravity-forms-dps-pxpay/tree/1.4.3)
* [`5d72d1d`](/wp-plugins/gravity-forms-dps-pxpay/commit/5d72d1d329bef450afe59f03642f6f4f0c412fe1)
* Compare

  Choose a tag to compare

  Could not load tags

  Nothing to show

  [{{ refName }}
  default](/wp-plugins/gravity-forms-dps-pxpay/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...1.4.3)

   Loading

  [View all tags](/wp-plugins/gravity-forms-dps-pxpay/tags)

[1.4.3: gfdpspxay readme fix](/wp-plugins/gravity-forms-dps-pxpay/releases/tag/1.4.3)

* [1.4.3](/wp-plugins/gravity-forms-dps-pxpay/tree/1.4.3)
* [`5d72d1d`](/wp-plugins/gravity-forms-dps-pxpay/commit/5d72d1d329bef450afe59f03642f6f4f0c412fe1)
* Compare

  Choose a tag to compare

  Could not load tags

  Nothing to show

  [{{ refName }}
  default](/wp-plugins/gravity-forms-dps-pxpay/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...1.4.3)

   Loading

  [View all tags](/wp-plugins/gravity-forms-dps-pxpay/tags)

tagged this
01 May 03:21

```
git-svn-id: https://plugins.svn.wordpress.org/gravity-forms-dps-pxpay/tags/1.4.3@1150726 b8457f37-d9ea-0310-8a92-e5e31aec5664
```

 Assets
2

 Loading

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


