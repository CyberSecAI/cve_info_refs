=== Content from github.com_dc14795c_20250125_225107.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjvvlee%2FMerlinsBoard%2Fcommit%2F134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjvvlee%2FMerlinsBoard%2Fcommit%2F134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=jvvlee%2FMerlinsBoard)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jvvlee](/jvvlee)
/
**[MerlinsBoard](/jvvlee/MerlinsBoard)**
Public

* [Notifications](/login?return_to=%2Fjvvlee%2FMerlinsBoard) You must be signed in to change notification settings
* [Fork
  0](/login?return_to=%2Fjvvlee%2FMerlinsBoard)
* [Star
   0](/login?return_to=%2Fjvvlee%2FMerlinsBoard)

* [Code](/jvvlee/MerlinsBoard)
* [Issues
  0](/jvvlee/MerlinsBoard/issues)
* [Pull requests
  0](/jvvlee/MerlinsBoard/pulls)
* [Actions](/jvvlee/MerlinsBoard/actions)
* [Projects
  0](/jvvlee/MerlinsBoard/projects)
* [Wiki](/jvvlee/MerlinsBoard/wiki)
* [Security](/jvvlee/MerlinsBoard/security)
* [Insights](/jvvlee/MerlinsBoard/pulse)

Additional navigation options

* [Code](/jvvlee/MerlinsBoard)
* [Issues](/jvvlee/MerlinsBoard/issues)
* [Pull requests](/jvvlee/MerlinsBoard/pulls)
* [Actions](/jvvlee/MerlinsBoard/actions)
* [Projects](/jvvlee/MerlinsBoard/projects)
* [Wiki](/jvvlee/MerlinsBoard/wiki)
* [Security](/jvvlee/MerlinsBoard/security)
* [Insights](/jvvlee/MerlinsBoard/pulse)

## Commit

[Permalink](/jvvlee/MerlinsBoard/commit/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Progresses on grades change view and events. Discovered security vuln…

[Browse files](/jvvlee/MerlinsBoard/tree/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5)
Browse the repository at this point in the history

```
…erability that allows a course admin to change whatever grade they want if they know the ID, even in other classes
```

* Loading branch information

App Academy Student
committed
Mar 19, 2015

1 parent
[dc422a1](/jvvlee/MerlinsBoard/commit/dc422a1284196556205b4d7585c29499d972ff58)

commit 134f548

 Show file tree

 Hide file tree

Showing
**16 changed files**
with
**89 additions**
and
**93 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* app

  + assets

    - javascripts

      * collections

        + app/assets/javascripts/collections/grades.js
          [grades.js](#diff-8c09098face498b95deefeec84b891faa606d07783c4407f2d4949e5d0a4b721)
      * models

        + app/assets/javascripts/models/grade.js
          [grade.js](#diff-4dca84525c8467cbec18a06cb4eb3f745a9145e7f1aa0591955c42b682f8014f)
      * routers

        + app/assets/javascripts/routers/router.js
          [router.js](#diff-91f17030333bf7c983d7b029866309e92d0997fcaf055c50d849dfa6a4bf3c28)
      * views

        + courses

          - app/assets/javascripts/views/courses/course-form.js
            [course-form.js](#diff-d6605fb0f8fd2cd7517b28dde73818fc0c76cba57ca827c6f2b6dd536004f60d)
          - app/assets/javascripts/views/courses/course-list.js
            [course-list.js](#diff-9e93476d7a4c2c9377d3570f5e76f3dcb8f40bfcb1982b712288146533828ea3)
          - app/assets/javascripts/views/courses/course\_search.js
            [course\_search.js](#diff-e9d6c8e902426fa1666bff2d5bc1ec73f6be7f97502ce6430170bbf07c3728a9)
          - app/assets/javascripts/views/courses/courses\_enroll.js
            [courses\_enroll.js](#diff-0574ac72c554147375cc9fafbcfca088f91517206e88600872dddc87e7aa7b82)
        + grades

          - app/assets/javascripts/views/grades/grade-search-student.js
            [grade-search-student.js](#diff-0f46c36e6e700e95a7a699f189a58afdb27e330faff0ed18aab6a1e19edeb90d)
          - app/assets/javascripts/views/grades/grades-student.js
            [grades-student.js](#diff-a0acc2a33b6a35c0c1e80452ad5a6d732c12cafc4aa68c734b409b42607efbd8)
    - templates

      * courses

        + app/assets/templates/courses/coursesearch.jst.ejs
          [coursesearch.jst.ejs](#diff-fed5458da6d331b8becca29db0ff528eea1047133de0920dbc0979ea2e6dc1d2)
        + app/assets/templates/courses/list.jst.ejs
          [list.jst.ejs](#diff-04939ef214950ec177f1e2448283034ca8df84363600bad856bddd380779eb6a)
      * grades

        + app/assets/templates/grades/grades-student-list.jst.ejs
          [grades-student-list.jst.ejs](#diff-3cb4641b3831771473ab739d063644dd2b6b16ede0ff8077c3d3f396cc221435)
  + controllers/api

    - app/controllers/api/grades\_controller.rb
      [grades\_controller.rb](#diff-a4d540ebc251d70daf28c87962108e00a5a79aa610a46481944b6cc5b01de60b)
  + views/api/grades

    - app/views/api/grades/index.json.jbuilder
      [index.json.jbuilder](#diff-2fe8d5867cf77ca2c43fd34c8638ae8cf1724f93c382edb278b4523d357839b5)
* config

  + config/routes.rb
    [routes.rb](#diff-959bc9abc46a55332bb64d5155a79323afa75a50ec1a2137ddd22d926f62c6c5)
* db

  + db/seeds.rb
    [seeds.rb](#diff-c61a903a1201b0c7f076b0270377c20390c26f655ce63689d7d843296fcf63f3)

## There are no files selected for viewing

18 changes: 14 additions & 4 deletions

18
[app/assets/javascripts/collections/grades.js](#diff-8c09098face498b95deefeec84b891faa606d07783c4407f2d4949e5d0a4b721 "app/assets/javascripts/collections/grades.js")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/assets/javascripts/collections/grades.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -7,7 +7,7 @@ MerlinsBoard.Collections.Grades = Backbone.Collection.extend({ |
|  |  |  |
|  |  | model: MerlinsBoard.Models.Grade, |
|  |  |  |
|  |  | getOrFetch: function (id) { |
|  |  | getOrFetch: function (id, course\_id) { |
|  |  | var grade = this.get(id); |
|  |  | var grades = this; |
|  |  |  |
| Expand All | | @@ -31,16 +31,26 @@ MerlinsBoard.Collections.Grades = Backbone.Collection.extend({ |
|  |  |  |
|  |  | //some logic here to check if "data" was already passed in, and fusing that to the data parameter... |
|  |  |  |
|  |  | \_.extend(options,{ data: $.param({ course\_id: this.course\_id}) }); //options is changed |
|  |  | //with this, I might always have to bind fetch - be mindful of this in case I need to fetch more data |
|  |  | \_.extend(options,{ data: $.param({ course\_id: this.course\_id}) }); |
|  |  | return Backbone.Collection.prototype.fetch.call(this, options); |
|  |  | }, |
|  |  |  |
|  |  | student: function () { |
|  |  | if (!this.\_student) { |
|  |  | this.\_student = new MerlinsBoard.Models.User(); |
|  |  | } |
|  |  |  |
|  |  | return this.\_student |
|  |  | }, |
|  |  |  |
|  |  | parse: function (resp) { |
|  |  | this.student = new MerlinsBoard.Models.User({fname: resp.student\_fname,lname: resp.student\_lname}); |
|  |  | this.student().set({fname: resp.student\_fname,lname: resp.student\_lname}); |
|  |  | // this.course\_id = resp.course\_id should only set once and then never again |
|  |  |  |
|  |  | resp.student\_fname.delete //is there a better way to clean this up? |
|  |  | resp.student\_fname.delete |
|  |  | resp.course\_id.delete |
|  |  |  |
|  |  | return resp.grades |
|  |  | } |
|  |  |  |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[app/assets/javascripts/models/grade.js](#diff-4dca84525c8467cbec18a06cb4eb3f745a9145e7f1aa0591955c42b682f8014f "app/assets/javascripts/models/grade.js")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/assets/javascripts/models/grade.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,4 +1,4 @@ |
|  |  | MerlinsBoard.Models.Grade = Backbone.Model.extend({ |
|  |  | urlRoot: 'api/grades', |
|  |  | validate: function () {} |
|  |  | }) |
|  |  | }) |

7 changes: 4 additions & 3 deletions

7
[app/assets/javascripts/routers/router.js](#diff-91f17030333bf7c983d7b029866309e92d0997fcaf055c50d849dfa6a4bf3c28 "app/assets/javascripts/routers/router.js")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/assets/javascripts/routers/router.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -32,7 +32,7 @@ MerlinsBoard.Routers.Router = Backbone.Router.extend({ |
|  |  | "course/:course\_id/assignments/:id/edit" : "editAssignment", |
|  |  | //grades |
|  |  | "course/:id/grades/student-search" : "gradeSearch", |
|  |  | "course/:course\_id/grades/user/:user\_id" : "gradesShow" |
|  |  | "course/:course\_id/grades/user/:user\_id" : "gradeShow" |
|  |  | //misc |
|  |  | // "user/:id": "showuser" |
|  |  | //":wildcard": "does not exist" --self explanatory |
| Expand All | | @@ -43,9 +43,9 @@ MerlinsBoard.Routers.Router = Backbone.Router.extend({ |
|  |  | enrollcourses: function () { |
|  |  | var allcourses = new MerlinsBoard.Collections.Courses([],{owner: this.currentUser}); |
|  |  |  |
|  |  | allcourses.fetch(); |
|  |  | this.currentUser.fetch() |
|  |  |  |
|  |  | var enrollView = new MerlinsBoard.Views.CoursesEnroll({collection: allcourses,model: this.currentUser}); |
|  |  | var enrollView = new MerlinsBoard.Views.CoursesEnroll({model: this.currentUser}); |
|  |  | this.swapView(enrollView); |
|  |  | }, |
|  |  |  |
| Expand Down  Expand Up | | @@ -154,6 +154,7 @@ MerlinsBoard.Routers.Router = Backbone.Router.extend({ |
|  |  | gradeShow: function (course\_id, user\_id) { |
|  |  | // var course = MerlinsBoard.Courses.getOrFetch(id); |
|  |  | var grades = new MerlinsBoard.Collections.Grades({course\_id: course\_id, user\_id: user\_id}); |
|  |  |  |
|  |  | grades.fetch(); |
|  |  |  |
|  |  | var gradesList = new MerlinsBoard.Views.GradesStudent({collection: grades}); |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[app/assets/javascripts/views/courses/course-form.js](#diff-d6605fb0f8fd2cd7517b28dde73818fc0c76cba57ca827c6f2b6dd536004f60d "app/assets/javascripts/views/courses/course-form.js")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/assets/javascripts/views/courses/course-form.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -23,7 +23,7 @@ MerlinsBoard.Views.CourseForm = Backbone.View.extend({ |
|  |  | this.model.save(attrs, { |
|  |  | success: function () { |
|  |  | MerlinsBoard.Courses.add(this.model,{merge: true}) |
|  |  | Backbone.history.navigate("",{trigger: true}) //instead do a "course created/saved" |
|  |  | Backbone.history.navigate("course/search",{trigger: true}) |
|  |  | }.bind(this), |
|  |  | error: function (model,resp) { |
|  |  | var errorArray = resp.responseJSON; |
| Expand Down | |  |

3 changes: 1 addition & 2 deletions

3
[app/assets/javascripts/views/courses/course-list.js](#diff-9e93476d7a4c2c9377d3570f5e76f3dcb8f40bfcb1982b712288146533828ea3 "app/assets/javascripts/views/courses/course-list.js")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/assets/javascripts/views/courses/course-list.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,9 +1,8 @@ |
|  |  | MerlinsBoard.Views.CoursesList = Backbone.View.extend({ |
|  |  | initialize: function () { |
|  |  | this.listenTo(this.collection, "add remove sync", this.render); |
|  |  | this.listenTo(this.collection, "reset add sync", this.render); |
|  |  | }, |
|  |  |  |
|  |  |  |
|  |  | template: JST["courses/list"], |
|  |  |  |
|  |  | tagName: "ul", |
| Expand Down | |  |

33 changes: 12 additions & 21 deletions

33
[app/assets/javascripts/views/courses/course\_search.js](#diff-e9d6c8e902426fa1666bff2d5bc1ec73f6be7f97502ce6430170bbf07c3728a9 "app/assets/javascripts/views/courses/course_search.js")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/assets/javascripts/views/courses/course_search.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,6 +1,5 @@ |
|  |  | MerlinsBoard.Views.CoursesSearch = Backbone.View.extend({ |
|  |  | initialize: function () { |
|  |  | this.searchCollection = new MerlinsBoard.Collections.CoursesSearch(); |
|  |  | }, |
|  |  |  |
|  |  | template: JST["courses/coursesearch"], |
| Expand All | | @@ -11,6 +10,14 @@ MerlinsBoard.Views.CoursesSearch = Backbone.View.extend({ |
|  |  | return this |
|  |  | }, |
|  |  |  |
|  |  | searchCollection: function () { |
|  |  | if (!this.\_searchCollection) { |
|  |  | this.\_searchCollection = new MerlinsBoard.Collections.CoursesSearch(); |
|  |  | } |
|  |  |  |
|  |  | return this.\_searchCollection |
|  |  | }, |
|  |  |  |
|  |  | tagName: "section", |
|  |  |  |
|  |  | className: "course-search", |
| Expand All | | @@ -19,30 +26,14 @@ MerlinsBoard.Views.CoursesSearch = Backbone.View.extend({ |
|  |  | "submit form.course-find":"search" |
|  |  | }, |
|  |  |  |
|  |  | // search: function (event) { |
|  |  | // event.preventDefault(); |
|  |  | // var query = $("input.course-find-input").val(); |
|  |  | // |
|  |  | // var filtered = this.collection.filter(function (course) { |
|  |  | // var pattern = new RegExp(query, "gi"); |
|  |  | // var result = course.get("name").match(pattern); |
|  |  | // return result |
|  |  | // }) |
|  |  | // |
|  |  | // var filteredCollection = new MerlinsBoard.Collections.Courses([],{owner: MerlinsBoard.CurrentUser}); |
|  |  | // filteredCollection.set(filtered); |
|  |  | // |
|  |  | // var searchList = new MerlinsBoard.Views.CoursesList({collection: filteredCollection}); |
|  |  | // this.$('section.course-results').html(searchList.render().$el); |
|  |  | // } |
|  |  |  |
|  |  | search: function (event) { |
|  |  | event.preventDefault(); |
|  |  | var queryCourse = $("input.course-find-input").val(); |
|  |  | this.searchCollection.fetch({data: $.param(query: queryCourse)}); |
|  |  | this.searchCollection().fetch({data: $.param({query: queryCourse})}); |
|  |  |  |
|  |  | var searchList = new MerlinsBoard.Views.CoursesList({collection: this.searchCollection}); |
|  |  | $('section.course-results').html(searchList.render.$el); //needs to be global from DOM. |
|  |  | var searchList = new MerlinsBoard.Views.CoursesList({collection: this.searchCollection()}); |
|  |  | //want to call remove on search results |
|  |  | $('section.course-results').html(searchList.render().$el); |
|  |  | } |
|  |  |  |
|  |  | }) |

22 changes: 5 additions & 17 deletions

22
[app/assets/javascripts/views/courses/courses\_enroll.js](#diff-0574ac72c554147375cc9fafbcfca088f91517206e88600872dddc87e7aa7b82 "app/assets/javascripts/views/courses/courses_enroll.js")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/assets/javascripts/views/courses/courses_enroll.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,32 +1,20 @@ |
|  |  | MerlinsBoard.Views.CoursesEnroll = Backbone.View.extend({ |
|  |  | initialize: function () { |
|  |  | this.coursesearchView = new MerlinsBoard.Views.CoursesSearch({collection: this.collection}); //render will put these in manually |
|  |  | this.coursesearchView = new MerlinsBoard.Views.CoursesSearch(); |
|  |  | this.usercoursesView = new MerlinsBoard.Views.CoursesList({collection: this.model.courses()}); |
|  |  | this.usertaughtcoursesView = new MerlinsBoard.Views.CoursesList({collection: this.model.taughtcourses()}); |
|  |  | }, |
|  |  |  |
|  |  |  |
|  |  | template: JST['courses/enroll'], |
|  |  |  |
|  |  |  |
|  |  | render: function () { |
|  |  | this.$el.html(this.template()); |
|  |  |  |
|  |  |  |
|  |  | this.$("section.courses-attended").html(this.usercoursesView.render().$el); |
|  |  | this.$("section.courses-taught").html(this.usertaughtcoursesView.render().$el); |
|  |  | this.$("section.course-search").html(this.coursesearchView.render().$el); |
|  |  |  |
|  |  | return this |
|  |  | }, |
|  |  |  |
|  |  | //below two, again - hardcode URLs instead |
|  |  |  |
|  |  | show: function (event) { |
|  |  | event.preventDefault(); |
|  |  | var id = $(event.currentTarget).data("id"); |
|  |  | Backbone.history.navigate("course/" + id + "/enroll", {trigger:true}) |
|  |  | }, |
|  |  |  |
|  |  | events: { |
|  |  | "click a": "show" |
|  |  | return this |
|  |  | } |
|  |  |  |
|  |  | }); |

4 changes: 2 additions & 2 deletions

4
[app/assets/javascripts/views/grades/grade-search-student.js](#diff-0f46c36e6e700e95a7a699f189a58afdb27e330faff0ed18aab6a1e19edeb90d "app/assets/javascripts/views/grades/grade-search-student.js")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/assets/javascripts/views/grades/grade-search-student.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,9 +1,9 @@ |
|  |  | MerlinsBoard.Views.SearchStudent = Backbone.View.extend({ |
|  |  | MerlinsBoard.Views.SearchStudentGradesResults = Backbone.View.extend({ |
|  |  | initialize: function () { |
|  |  | this.listenTo(this.collection, "add remove reset", this.render) |
|  |  | }, |
|  |  |  |
|  |  | className: "grades-studentsearch", |
|  |  | className: "grades-student-search", |
|  |  |  |
|  |  | template: JST["grades/grades-student-search"], |
|  |  |  |
| Expand Down | |  |

38 changes: 18 additions & 20 deletions

38
[app/assets/javascripts/views/grades/grades-student.js](#diff-a0acc2a33b6a35c0c1e80452ad5a6d732c12cafc4aa68c734b409b42607efbd8 "app/assets/javascripts/views/grades/grades-student.js")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/assets/javascripts/views/grades/grades-student.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,12 +1,12 @@ |
|  |  | //Lists a students grade - an admin has access to this view to edit grades |
|  |  | MerlinsBoard.Views.GradesStudent = Backbone.View.extend({ |
|  |  | initialize: function () { |
|  |  | this.listenTo(this.collection, "add change:grade remove", this.render) |
|  |  | this.listenTo(this.collection, "add change:grade remove sync", this.render) |
|  |  | \_.bindAll(this, "gradeSaveCallback", "gradeSaveErrorCallback") |
|  |  | //for jbuidler - nest each of a student's grade under them along with basic information about the assignment |
|  |  | //for jbuidler - nest each of a student's grade under them along with basic information about the assignmen |
|  |  | }, |
|  |  |  |
|  |  | template: JST["grades/grades-student"], |
|  |  | template: JST["grades/grades-student-list"], |
|  |  |  |
|  |  | events: { |
|  |  | "click .grade-number":"editGrade", |
| Expand All | | @@ -18,41 +18,39 @@ MerlinsBoard.Views.GradesStudent = Backbone.View.extend({ |
|  |  | tagName: "section", |
|  |  |  |
|  |  | render: function () { |
|  |  | var renderedContent = this.template({grades: this.collection}); |
|  |  | var renderedContent = this.template({grades: this.collection, student: this.collection.student()}); |
|  |  | this.$el.html(renderedContent); |
|  |  | return this.$el |
|  |  | return this |
|  |  | }, |
|  |  |  |
|  |  | editGrade: function (event) { |
|  |  | var gradeString = $(event.currentTarget).text(); |
|  |  | var gradeString = $(event.currentTarget).val(); |
|  |  | var num = parseInt(gradeString); |
|  |  | var $input = $("<input type='number'>").addClass('grade-input').val(num); |
|  |  |  |
|  |  | var $input = $("<input type='number' min='0' step='1' max='100'>").addClass('grade-input').val(num); |
|  |  | this.modelNumber = $(event.currentTarget).data('id'); |
|  |  |  |
|  |  | $(".grade-number").html(input) |
|  |  | $(".grade-number[data-id=".concat(this.modelNumber,"]")).html($input) |
|  |  | }, |
|  |  |  |
|  |  | saveGrade: function (event) { |
|  |  | var editedGrade = this.collection.getOrFetch(this.modelNumber); |
|  |  | var newGrade = $('input.grade-input').val(); |
|  |  | var newGrade = parseInt($('input.grade-input').val()); |
|  |  | var courseID = this.collection.course\_id; |
|  |  |  |
|  |  | debugger |
|  |  |  |
|  |  | editedGrade.set({grade: newGrade}); |
|  |  | //two options, send in the params with the model and strong params takes care of it |
|  |  | //or send it in as an option for the save option |
|  |  | editedGrade.save({},{success: this.gradeSaveCallback, |
|  |  | error: this.gradeSaveErrorCallback, |
|  |  | data: $.param({course\_id: courseID}) |
|  |  | editedGrade.save({course\_id: courseID},{success: this.gradeSaveCallback(editedGrade), |
|  |  | error: this.gradeSaveErrorCallback |
|  |  | }); |
|  |  | }, |
|  |  |  |
|  |  | gradeSaveCallback: function () { |
|  |  | this.collection.add(editedGrade,{merge: true})//this should be a closure - also editedGrade I think should persist as a variable... |
|  |  | // $(".grade-number").html(editedGrade.get('grade')); this wont work because I'm inspecific, but I may not need it anyway to rerender |
|  |  | gradeSaveCallback: function (editedGrade) { |
|  |  | this.collection.fetch(); //unideal - needs to be banished with composite view paradigm. |
|  |  | // this.collection.add(editedGrade,{merge: true}); |
|  |  | }, |
|  |  |  |
|  |  | gradeSaveErrorCallback: function (model, response) { |
|  |  | gradeSaveErrorCallback: function (model, resp) { |
|  |  |  |
|  |  | var errorArray = resp.responseJSON |
|  |  | var $errorList = $("<ul>").addClass('errors'); |
|  |  | \_.each(errorArray, function (error) { |
| Expand Down | |  |

1 change: 0 additions & 1 deletion

1
[app/assets/templates/courses/coursesearch.jst.ejs](#diff-fed5458da6d331b8becca29db0ff528eea1047133de0920dbc0979ea2e6dc1d2 "app/assets/templates/courses/coursesearch.jst.ejs")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/assets/templates/courses/coursesearch.jst.ejs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -10,5 +10,4 @@ all this will be is organized links--> |
|  |  | </form> |
|  |  |  |
|  |  | <section class="course-results"> |
|  |  |  |
|  |  | </section> |

4 changes: 2 additions & 2 deletions

4
[app/assets/templates/courses/list.jst.ejs](#diff-04939ef214950ec177f1e2448283034ca8df84363600bad856bddd380779eb6a "app/assets/templates/courses/list.jst.ejs")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/assets/templates/courses/list.jst.ejs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,3 +1,3 @@ |
|  |  | <% courses.each( function (course) { %> |
|  |  | <li><a href="#" data-id="<%=course.id%>"><%= course.escape("name") %></a></li> |
|  |  | <% })%> |
|  |  | <li><a href="<%= '#course/' + course.id + '/enroll'%>"><%= course.escape("name") %></a></li> |
|  |  | <% })%> |

8 changes: 3 additions & 5 deletions

8
[app/assets/templates/grades/grades-student-list.jst.ejs](#diff-3cb4641b3831771473ab739d063644dd2b6b16ede0ff8077c3d3f396cc221435 "app/assets/templates/grades/grades-student-list.jst.ejs")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/assets/templates/grades/grades-student-list.jst.ejs)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,12 +1,10 @@ |
|  |  | <h1>Grades for <%=grades.escape('fname') + " " + grades.escape('lname')%></h1> |
|  |  | <h1>Grades for <%= student.escape('fname') + " " + student.escape('lname')%></h1> |
|  |  |  |
|  |  | <section class="grade-errors"></section> |
|  |  |  |
|  |  | <% grades.each(function (grade) { %> |
|  |  | <h4> grade.escape('assignment\_title') </h4> |
|  |  | <p> grade.escape('description')</p> |
|  |  | <h4> Assignment name:<%= grade.escape('title') %></h4> |
|  |  | <p> description: <%= grade.escape('description') %></p> |
|  |  | Grade: <strong class="grade-number" data-id="<%= grade.id %>"><%= grade.get('grade')%></strong> |
|  |  | <br> |
|  |  | <% }) %> |
|  |  |  |
|  |  | //I think all I'll do is just pretend like nothing happened if the entry is invalid |

26 changes: 17 additions & 9 deletions

26
[app/controllers/api/grades\_controller.rb](#diff-a4d540ebc251d70daf28c87962108e00a5a79aa610a46481944b6cc5b01de60b "app/controllers/api/grades_controller.rb")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/controllers/api/grades_controller.rb)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,20 +1,23 @@ |
|  |  | class Api::GradesController < Api::ApiController |
|  |  | before\_action(except: [:index]) {admins\_only(params["course\_id"])} #wil always need to pass this in on every fetch |
|  |  | before\_action(only: [:update, :show]) {admins\_only(params["course\_id"])} |
|  |  | before\_action :is\_user\_or\_instructor?, only: [:index] |
|  |  |  |
|  |  | def index |
|  |  | #I may want an internal control here instead of using the before\_action... |
|  |  | @grades = Grade.includes(:assignment,:course,:user).where("user\_id = ?", params["user\_id"]) |
|  |  | @student = @grades.first.user |
|  |  | @course\_id = params["course\_id"].to\_i |
|  |  |  |
|  |  | @grades = @grades.select {|grade| grade.course.id == params["course\_id"].to\_i} |
|  |  | end |
|  |  |  |
|  |  | def destroy |
|  |  | @grade = Grade.find(params[:id]) |
|  |  | @grade.destroy |
|  |  | render json: {} |
|  |  | end |
|  |  | #Neither of these may be needed because they should only be created/destroyed depending on the assignment |
|  |  |  |
|  |  | # def destroy |
|  |  | # @grade = Grade.find(params[:id]) |
|  |  | # @grade.destroy |
|  |  | # render json: {} |
|  |  | # end |
|  |  | # def create |
|  |  | # @grade = Grade.new(grade\_params) |
|  |  | # |
| Expand All | | @@ -25,10 +28,15 @@ def destroy |
|  |  | # end |
|  |  | # end |
|  |  |  |
|  |  | def show |
|  |  | @grade = Grade.find(params[:id]) |
|  |  | render json: @grade |
|  |  | end |
|  |  | #will need to create unique validator to ensure congruency between course auth and resource id course.... |
|  |  | def update |
|  |  | @grade = Grade.find(params[:id]) |
|  |  |  |
|  |  | if @grade.save |
|  |  | if @grade.update(grade\_params) |
|  |  | render json: @grades |
|  |  | else |
|  |  | render json: @grade.errors.full\_messages, status: 422 |
| Expand All | | @@ -43,7 +51,7 @@ def is\_user\_or\_instructor? |
|  |  | end |
|  |  |  |
|  |  | def grade\_params |
|  |  | params.require(:grade).permit(:grade, :assignment\_id, :user\_id) |
|  |  | params.permit(:grade, :assignment\_id, :user\_id) #need to change grade column - it confuses params\_wrapper |
|  |  | end |
|  |  |  |
|  |  |  |
|  |  | end |

11 changes: 6 additions & 5 deletions

11
[app/views/api/grades/index.json.jbuilder](#diff-2fe8d5867cf77ca2c43fd34c8638ae8cf1724f93c382edb278b4523d357839b5 "app/views/api/grades/index.json.jbuilder")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/app/views/api/grades/index.json.jbuilder)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,16 +1,17 @@ |
|  |  | json.grades @grades do |grade\_obj| |
|  |  | json.id grade\_obj.id |
|  |  | json.grade grade\_obj.grade |
|  |  | json.assignment\_id grade\_obj.assignment\_id |
|  |  | json.id grade\_obj.assignment\_id |
|  |  | json.user\_id grade\_obj.user\_id |
|  |  | json.assignment\_title grade\_obj.assignment.title |
|  |  | json.assignment\_description grade\_obj.assignment.description |
|  |  | json.title grade\_obj.assignment.title |
|  |  | json.description grade\_obj.assignment.description |
|  |  | end |
|  |  |  |
|  |  | json.student\_fname @student.fname |
|  |  | json.student\_lname @student.lname |
|  |  | json.course\_id @student.course.id |
|  |  | json.course\_id @course\_id |
|  |  |  |
|  |  | #remember then that for a single model, only top-level attrs will be assigned |
|  |  | # for a collection, each entry in the array should be top-level attrs (or wrapped in only a single object wrapper) |
|  |  | # but the array itself must be top-level |
|  |  | # weird: Cannot mix json.array! with other top-level attrs |
|  |  | # weird: Cannot mix json.array! with other top-level attrs |

1 change: 1 addition & 0 deletions

1
[config/routes.rb](#diff-959bc9abc46a55332bb64d5155a79323afa75a50ec1a2137ddd22d926f62c6c5 "config/routes.rb")

Show comments

[View file](/jvvlee/MerlinsBoard/blob/134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5/config/routes.rb)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -15,6 +15,7 @@ |
|  |  | resources :announcements #might have to "member do" for easy-access custom routes from a particular course |
|  |  | resources :assignments |
|  |  | resources :resources |
|  |  | resources :grades, only: [:update, :show] |
|  |  | resources :courses do |
|  |  | get "course\_search", on: :collection |
|  |  | end |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `134f548`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjvvlee%2FMerlinsBoard%2Fcommit%2F134f5481e2914b7f096cd92a22b1e6bcb8e6dfe5) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


