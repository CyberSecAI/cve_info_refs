=== Content from www.openwall.com_e41fd1bf_20250124_160032.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](11) [[next>]](13) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <20150414214820.3a6a30de@ileemo>
Date: Tue, 14 Apr 2015 21:48:20 +0200
From: Andrew Shadura <andrew@...dura.me>
To: oss-security@...ts.openwall.com
Subject: CVE-2015-1864: Multiple HTML and Javascript injections

Hello,

We have recently discovered a security issue in Kallithea [0].

Synopsis
========

Several vulnerabilities have been found in Kallithea, allowing
attackers to inject malicious code into the administration pages.

Description
===========

HTML and Javascript injection was possible in several places in the
Kallithea UI, allowing attackers to run malicious code.

User details (first name, last name) as well as repository, repository
group and user group descriptions were pasted unfiltered into the HTML
code, thus attacker could inject their code by setting their first name
to, for example:

    <img src="/images/kallithea-logo.svg" onload="alert('Hello,
    World!');">

This would display an alert every time users administration page. Used
against a user with administrator's access, this can expose sensitive
information:

    <img src="/images/kallithea-logo.svg"
        onload="$.ajax({url:'/_admin/my_account/api_keys'}).done(function(data){
        a=new RegExp('[0-9a-z]{40}','g');alert('Your API key is:'+
        data.substr(data.search(a), 40));});">

Impact
======

As the vulnerability allows attacker to execute arbitrary code in the
user's browser, it can be used to gain access to the user's account by
stealing user's credentials, like API keys. In the case the user also
has administrator rights, it is possible for the attacker to gain full
administrator access to the Kallithea instance.

Resolution
==========

Kallithea project has fixed this issue, and issued a patch and a bugfix
release.

Users are recommended to apply the patch or to upgrade to the latest
0.2.1 release.

Affected versions
=================

The issue is currenly present in Kallithea versions before 0.2.1.

Acknowledgments
===============

Thanks to Nick High for reporting this issue.

References
==========

[0] Kallithea Project
    <<https://kallithea-scm.org/>>

[1] CVE-2015-1864
    <<http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-1864>>

[2] Kallithea: Security Notice CVE-2015-1864
    <<https://kallithea-scm.org/security/cve-2015-1864.html>>

[3] Patch for the issue
    <<https://kallithea-scm.org/security/cve-2015-1864.patch>>

[4] Mercurial changeset fixing the issue
    <<https://kallithea-scm.org/repos/kallithea/changeset/a8f2986afc18c9221bf99f88b06e60ab83c86c55>>

--
Cheers,
  Andrew Shadura
  on behalf of Kallithea Security Team

Content of type "application/pgp-signature" skipped

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from kallithea-scm.org_7841e9ae_20250126_020402.html ===


This page has moved to a <20150414-cve-2015-1864.html>.



=== Content from kallithea-scm.org_b80b20fd_20250124_160034.html ===

[Our Own Kallithea](/repos/)
Toggle navigation

* [Public journal](/repos/_admin/public_journal "Public journal")
* [Gists](/repos/_admin/gists "Show public gists")
  + [Create New Gist](/repos/_admin/gists/new?public=1)
  + [All Public Gists](/repos/_admin/gists)
* [Search](/repos/_admin/search "Search in repositories")
* [My Pull Requests](/repos/my_pullrequests "My Pull Requests")
* Not Logged In
  #### Login to Your Account

  Username:

  Password:

  [Forgot password?](/repos/_admin/password_reset)

hg

[kallithea](/repos/kallithea)

Toggle navigation

* [Summary](/repos/kallithea)
* [Changelog](/repos/kallithea/changelog/a8f2986afc18c9221bf99f88b06e60ab83c86c55/)
* [Files](/repos/kallithea/files/a8f2986afc18c9221bf99f88b06e60ab83c86c55/)
* [Pull Requests
  25](/repos/kallithea/pull-request "Show Pull Requests for kallithea")
* Options
  + [Compare](/repos/kallithea/compare)
  + [Search](/repos/kallithea/search)

Changeset - a8f2986afc18

Parent rev.

Child rev.

[Not reviewed]

[stable](/repos/kallithea/changelog?branch=stable)

0
5
0

**Nick High** - 10 years ago 2015-04-12 18:46:25

nick@silverchip.org

security: Fix HTML and JavaScript injection.

This fixes [CVE-2015-1864](https://kallithea-scm.org/security/cve-%7Bid%7D.html)
5 files changed with 10 insertions and 10 deletions:

[kallithea/controllers/admin/repo\_groups.py](#C-a8f2986afc18-6246950887ac)

11

[kallithea/controllers/admin/user\_groups.py](#C-a8f2986afc18-5da5002067da)

11

[kallithea/controllers/admin/users.py](#C-a8f2986afc18-e3004db772b6)

22

[kallithea/model/repo.py](#C-a8f2986afc18-4fbb9d324cc4)

44

[kallithea/templates/summary/summary.html](#C-a8f2986afc18-8b940b44a82e)

22

0 comments (0 inline, 0 general)

↑ Collapse Diff ↑

kallithea/controllers/admin/repo\_groups.py

➞

Show inline comments

|  | | ``` @@ -144,7 +144,7 @@ class RepoGroupsController(BaseControlle ``` |
| --- | --- | --- |
|  |  | ```             repo_groups_data.append({ ``` |
|  |  | ```                 "raw_name": repo_gr.group_name, ``` |
|  |  | ```                 "group_name": repo_group_name(repo_gr.group_name, children_groups), ``` |
|  |  | ```                 "desc": repo_gr.group_description, ``` |
|  |  | ```                 "desc": h.escape(repo_gr.group_description), ``` |
|  |  | ```                 "repos": repo_count, ``` |
|  |  | ```                 "owner": h.person(repo_gr.user), ``` |
|  |  | ```                 "action": repo_group_actions(repo_gr.group_id, repo_gr.group_name, ``` |

kallithea/controllers/admin/user\_groups.py

➞

Show inline comments

|  | | ``` @@ -113,7 +113,7 @@ class UserGroupsController(BaseControlle ``` |
| --- | --- | --- |
|  |  | ```                 "raw_name": user_gr.users_group_name, ``` |
|  |  | ```                 "group_name": user_group_name(user_gr.users_group_id, ``` |
|  |  | ```                                               user_gr.users_group_name), ``` |
|  |  | ```                 "desc": user_gr.user_group_description, ``` |
|  |  | ```                 "desc": h.escape(user_gr.user_group_description), ``` |
|  |  | ```                 "members": len(user_gr.members), ``` |
|  |  | ```                 "active": h.boolicon(user_gr.users_group_active), ``` |
|  |  | ```                 "owner": h.person(user_gr.user.username), ``` |

kallithea/controllers/admin/users.py

➞

Show inline comments

|  | | ``` @@ -96,8 +96,8 @@ class UsersController(BaseController): ``` |
| --- | --- | --- |
|  |  | ```                 "gravatar": grav_tmpl % h.gravatar(user.email, size=20), ``` |
|  |  | ```                 "raw_name": user.username, ``` |
|  |  | ```                 "username": username(user.user_id, user.username), ``` |
|  |  | ```                 "firstname": user.name, ``` |
|  |  | ```                 "lastname": user.lastname, ``` |
|  |  | ```                 "firstname": h.escape(user.name), ``` |
|  |  | ```                 "lastname": h.escape(user.lastname), ``` |
|  |  | ```                 "last_login": h.fmt_date(user.last_login), ``` |
|  |  | ```                 "last_login_raw": datetime_to_time(user.last_login), ``` |
|  |  | ```                 "active": h.boolicon(user.active), ``` |

kallithea/model/repo.py

➞

Show inline comments

|  | | ``` @@ -138,8 +138,8 @@ class RepoModel(BaseModel): ``` |
| --- | --- | --- |
|  |  | ```         return json.dumps([ ``` |
|  |  | ```             { ``` |
|  |  | ```                 'id': u.user_id, ``` |
|  |  | ```                 'fname': u.name, ``` |
|  |  | ```                 'lname': u.lastname, ``` |
|  |  | ```                 'fname': h.escape(u.name), ``` |
|  |  | ```                 'lname': h.escape(u.lastname), ``` |
|  |  | ```                 'nname': u.username, ``` |
|  |  | ```                 'gravatar_lnk': h.gravatar_url(u.email, size=28), ``` |
|  |  | ```                 'gravatar_size': 14, ``` |
|  | | ``` @@ -210,9 +210,9 @@ class RepoModel(BaseModel): ``` |
|  |  |  |
|  |  | ```         def desc(desc): ``` |
|  |  | ```             if c.visual.stylify_metatags: ``` |
|  |  | ```                 return h.urlify_text(h.desc_stylize(h.truncate(desc, 60))) ``` |
|  |  | ```                 return h.urlify_text(h.desc_stylize(h.escape(h.truncate(desc, 60)))) ``` |
|  |  | ```             else: ``` |
|  |  | ```                 return h.urlify_text(h.truncate(desc, 60)) ``` |
|  |  | ```                 return h.urlify_text(h.escape(h.truncate(desc, 60))) ``` |
|  |  |  |
|  |  | ```         def state(repo_state): ``` |
|  |  | ```             return _render("repo_state", repo_state) ``` |

kallithea/templates/summary/summary.html

➞

Show inline comments

|  | | ``` @@ -85,9 +85,9 @@ summary = lambda n:{False:'summary-short ``` |
| --- | --- | --- |
|  |  | ```                   <label>${_('Description')}:</label> ``` |
|  |  | ```               </div> ``` |
|  |  | ```                  %if c.visual.stylify_metatags: ``` |
|  |  | ```                    <div class="input ${summary(c.show_stats)} desc">${h.urlify_text(h.desc_stylize(c.db_repo.description))}</div> ``` |
|  |  | ```                    <div class="input ${summary(c.show_stats)} desc">${h.urlify_text(h.desc_stylize(h.escape(c.db_repo.description)))}</div> ``` |
|  |  | ```                  %else: ``` |
|  |  | ```                    <div class="input ${summary(c.show_stats)} desc">${h.urlify_text(c.db_repo.description)}</div> ``` |
|  |  | ```                    <div class="input ${summary(c.show_stats)} desc">${h.urlify_text(h.escape(c.db_repo.description))}</div> ``` |
|  |  | ```                  %endif ``` |
|  |  | ```             </div> ``` |
|  |  |  |

Anonymous User

Submitting ...

Status change:

You need to be logged in to comment. [Login now](/repos/_admin/login?came_from=%2Frepos%2Fkallithea%2Fchangeset%2Fa8f2986afc18c9221bf99f88b06e60ab83c86c55)

0 comments (0 inline, 0 general)

Server instance: phoenix.kallithea-scm.org-9143

This site is powered by
[Kallithea](https://kallithea-scm.org/) 0.7.0,
which is
[© 2010–2024 by various authors & licensed under GPLv3](https://kallithea-scm.org/repos/about#copyright).
– Support



=== Content from kallithea-scm.org_052b93da_20250126_020402.html ===
# HG changeset patch
# User Nick High
# Date 1428864385 14400
# Sun Apr 12 14:46:25 2015 -0400
# Branch stable
# Node ID a8f2986afc18c9221bf99f88b06e60ab83c86c55
# Parent 6eb57b4f311b4ab30eb3acfa83f6729d200dcebe
security: Fix HTML and JavaScript injection.
This fixes CVE-2015-1864
diff --git a/kallithea/controllers/admin/repo\_groups.py b/kallithea/controllers/admin/repo\_groups.py
--- a/kallithea/controllers/admin/repo\_groups.py
+++ b/kallithea/controllers/admin/repo\_groups.py
@@ -144,7 +144,7 @@ class RepoGroupsController(BaseControlle
repo\_groups\_data.append({
"raw\_name": repo\_gr.group\_name,
"group\_name": repo\_group\_name(repo\_gr.group\_name, children\_groups),
- "desc": repo\_gr.group\_description,
+ "desc": h.escape(repo\_gr.group\_description),
"repos": repo\_count,
"owner": h.person(repo\_gr.user),
"action": repo\_group\_actions(repo\_gr.group\_id, repo\_gr.group\_name,
diff --git a/kallithea/controllers/admin/user\_groups.py b/kallithea/controllers/admin/user\_groups.py
--- a/kallithea/controllers/admin/user\_groups.py
+++ b/kallithea/controllers/admin/user\_groups.py
@@ -113,7 +113,7 @@ class UserGroupsController(BaseControlle
"raw\_name": user\_gr.users\_group\_name,
"group\_name": user\_group\_name(user\_gr.users\_group\_id,
user\_gr.users\_group\_name),
- "desc": user\_gr.user\_group\_description,
+ "desc": h.escape(user\_gr.user\_group\_description),
"members": len(user\_gr.members),
"active": h.boolicon(user\_gr.users\_group\_active),
"owner": h.person(user\_gr.user.username),
diff --git a/kallithea/controllers/admin/users.py b/kallithea/controllers/admin/users.py
--- a/kallithea/controllers/admin/users.py
+++ b/kallithea/controllers/admin/users.py
@@ -96,8 +96,8 @@ class UsersController(BaseController):
"gravatar": grav\_tmpl % h.gravatar(user.email, size=20),
"raw\_name": user.username,
"username": username(user.user\_id, user.username),
- "firstname": user.name,
- "lastname": user.lastname,
+ "firstname": h.escape(user.name),
+ "lastname": h.escape(user.lastname),
"last\_login": h.fmt\_date(user.last\_login),
"last\_login\_raw": datetime\_to\_time(user.last\_login),
"active": h.boolicon(user.active),
diff --git a/kallithea/model/repo.py b/kallithea/model/repo.py
--- a/kallithea/model/repo.py
+++ b/kallithea/model/repo.py
@@ -138,8 +138,8 @@ class RepoModel(BaseModel):
return json.dumps([
{
'id': u.user\_id,
- 'fname': u.name,
- 'lname': u.lastname,
+ 'fname': h.escape(u.name),
+ 'lname': h.escape(u.lastname),
'nname': u.username,
'gravatar\_lnk': h.gravatar\_url(u.email, size=28),
'gravatar\_size': 14,
@@ -210,9 +210,9 @@ class RepoModel(BaseModel):
def desc(desc):
if c.visual.stylify\_metatags:
- return h.urlify\_text(h.desc\_stylize(h.truncate(desc, 60)))
+ return h.urlify\_text(h.desc\_stylize(h.escape(h.truncate(desc, 60))))
else:
- return h.urlify\_text(h.truncate(desc, 60))
+ return h.urlify\_text(h.escape(h.truncate(desc, 60)))
def state(repo\_state):
return \_render("repo\_state", repo\_state)
diff --git a/kallithea/templates/summary/summary.html b/kallithea/templates/summary/summary.html
--- a/kallithea/templates/summary/summary.html
+++ b/kallithea/templates/summary/summary.html
@@ -85,9 +85,9 @@ summary = lambda n:{False:'summary-short
${\_('Description')}:

%if c.visual.stylify\_metatags:
- ${h.urlify\_text(h.desc\_stylize(c.db\_repo.description))}
+ ${h.urlify\_text(h.desc\_stylize(h.escape(c.db\_repo.description)))}
%else:
- ${h.urlify\_text(c.db\_repo.description)}
+ ${h.urlify\_text(h.escape(c.db\_repo.description))}
%endif



=== Content from kallithea-scm.org_0a3b1647_20250126_020403.html ===

Toggle navigation

[![Kallithea](images/kallithea-compact-logo.png "Kallithea")](./)

* [About](#about)
* [Features](#features)
* [News](news/)
* [Security](security/)
* [Downloads](#downloads)
* [Community](#community)
* [Donate](#donate)

# Kallithea

**Kallithea**,
[a member project](http://sfconservancy.org/news/2014/jul/04/kallithea-joins/)
of [Software Freedom Conservancy](http://sfconservancy.org/), is
a [GPLv3](https://gnu.org/licenses/gpl.html)'d, [Free
Software](https://www.gnu.org/philosophy/free-sw.html) source code management system that supports two
leading version control systems, **Mercurial** and **Git**,
and has a web interface that is easy to use for users and admins.
You can install **Kallithea** on your own server and host
repositories for the version control system of your choice.

Kallithea 0.7.0 has been released
with a potential security fix: [announcement](news/release-0.7.0.html).

[Learn more »](#features)
[See it in action »](/repos/)
[Read the docs »](/docs/)

## Built-in push/pull server

Supports both **Mercurial** and **Git** wire protocols,
accessible over HTTPS and SSH.
A powerful access management system lets you decide who has access to the repository,
and what operations they’re entitled to do. All requests are authenticated
and logged, giving the administrator an ability to review users’ activity.

## Easy to integrate

**Kallithea** supports LDAP, making it easy to use your existing authentication system.
You can integrate your instance with an issue tracker of your choice using the JSON-RPC API
and the extensions interface.

## Code review

Fork the code with one click, develop it and submit it for review easily using a built-in
pull requests system. Review the code, comment on and discuss changes.

## Contribute on-line

Edit code on-line using our web editor. Upload text and binary files without using
your locally installed client, just your browser is enough.

![Web editor](images/commit.png)
## VCS visualised

Explore the changelog illustrated by the DAG graph. Review diffs in colour.
Get commit statistics.

![Commit graph](images/graph.png)

And more!..

# Why Kallithea?

Kallithea, or ÎÎ±Î»Î»Î¹Î¸Î­Î±, is the name of a locality on the island
of Rhodes, in Greece, which itself means ‘the best
view’. Our Kallithea project helps developers get the best
views of their project and its contributions so they can better
collaborate together. Additionally,
see [this
Conservancy blog post about why Kallithea began](http://sfconservancy.org/blog/2014/jul/15/why-kallithea/).

# Downloads

The Kallithea development repository is stable and can be used in production.
This repository can be checked out from our
[self-hosted instance, called
âOur Own Kallitheaâ](/repos/kallithea)

[Source code](/repos/kallithea)

Alternatively, you can download release tarballs from our
[PyPi page](https://pypi.python.org/pypi/Kallithea/).

[Download Kallithea 0.7.0](https://files.pythonhosted.org/packages/source/K/Kallithea/Kallithea-0.7.0.tar.gz)

The on-line documentation for Kallithea is available at the [ReadTheDocs](https://readthedocs.org/) service:

[Documentation](/docs/en/latest/)

# Community

Do you have a problem or question? Want to contribute to Kallithea? Or maybe you just want to know more about the project? Here‘s how you can contact us:

Mailing List:
[Kallithea Users and Developers' Mailing
List](http://lists.sfconservancy.org/mailman/listinfo/kallithea-general)
IRC:
#kallithea on
Libera.Chat
Matrix (bridged to the IRC chat):
[#kallithea:matrix.org](https://matrix.to/#/#kallithea:matrix.org)

Reporting issues:
Please report issues to the mailing list.

You can still refer to old issues in the [issue archive](https://kallithea-scm.org/bitbucket-archive/issues/index.html).
Contributing:
[How to contribute
to Kallithea](http://docs.kallithea-scm.org/en/latest/contributing.html)

You can also follow us on Twitter: [@KallitheaSCM](http://twitter.com/KallitheaSCM).

### Support Kallithea development

The Kallithea project welcomes donations to support
our project, via Software Freedom Conservancy.

#### Donate by paper check

Send paper check donations, drawn in USD, to:

Software Freedom Conservancy

137 MONTAGUE ST STE 380

Brooklyn, NY 11201-3548

USA

Write “Kallithea Project” in the memo line of the
check.

#### Donate via Paypal (including Visa, Mastercard, AMEX or ACH)

![](https://www.paypalobjects.com/en_US/i/scr/pixel.gif)
#### Donate via Flattr

[![Flattr Kallithea](https://api.flattr.com/button/flattr-badge-large.png "Flattr Kallithea")](https://flattr.com/submit/auto?user_id=sfconservancy&url=http%3A%2F%2Fkallithea-scm.org)


