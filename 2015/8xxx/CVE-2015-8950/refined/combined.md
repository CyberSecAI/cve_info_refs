=== Content from git.kernel.org_9d1c2974_20250125_181950.html ===


| [cgit logo](/) | [index](/) : [kernel/git/torvalds/linux.git](/pub/scm/linux/kernel/git/torvalds/linux.git/) | for-next master |
| --- | --- | --- |
| Linux kernel source tree | Linus Torvalds |

| [about](/pub/scm/linux/kernel/git/torvalds/linux.git/about/)[summary](/pub/scm/linux/kernel/git/torvalds/linux.git/)[refs](/pub/scm/linux/kernel/git/torvalds/linux.git/refs/?id=6829e274a623187c24f7cfc0e3d35f25d087fcc5)[log](/pub/scm/linux/kernel/git/torvalds/linux.git/log/)[tree](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=6829e274a623187c24f7cfc0e3d35f25d087fcc5)[commit](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=6829e274a623187c24f7cfc0e3d35f25d087fcc5)[diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=6829e274a623187c24f7cfc0e3d35f25d087fcc5)[stats](/pub/scm/linux/kernel/git/torvalds/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Marek Szyprowski <m.szyprowski@samsung.com> | 2015-04-23 12:46:16 +0100 |
| --- | --- | --- |
| committer | Will Deacon <will.deacon@arm.com> | 2015-04-27 11:39:50 +0100 |
| commit | [6829e274a623187c24f7cfc0e3d35f25d087fcc5](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=6829e274a623187c24f7cfc0e3d35f25d087fcc5) ([patch](/pub/scm/linux/kernel/git/torvalds/linux.git/patch/?id=6829e274a623187c24f7cfc0e3d35f25d087fcc5)) | |
| tree | [a6ca873b29878ee7bc8c328af8a64bae0f49a37e](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/?id=6829e274a623187c24f7cfc0e3d35f25d087fcc5) | |
| parent | [6544e67bfb1bf55bcf3c0f6b37631917e9acfb74](/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=6544e67bfb1bf55bcf3c0f6b37631917e9acfb74) ([diff](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=6829e274a623187c24f7cfc0e3d35f25d087fcc5&id2=6544e67bfb1bf55bcf3c0f6b37631917e9acfb74)) | |
| download | [linux-6829e274a623187c24f7cfc0e3d35f25d087fcc5.tar.gz](/pub/scm/linux/kernel/git/torvalds/linux.git/snapshot/linux-6829e274a623187c24f7cfc0e3d35f25d087fcc5.tar.gz) | |

arm64: dma-mapping: always clear allocated buffersBuffers allocated by dma\_alloc\_coherent() are always zeroed on Alpha,
ARM (32bit), MIPS, PowerPC, x86/x86\_64 and probably other architectures.
It turned out that some drivers rely on this 'feature'. Allocated buffer
might be also exposed to userspace with dma\_mmap() call, so clearing it
is desired from security point of view to avoid exposing random memory
to userspace. This patch unifies dma\_alloc\_coherent() behavior on ARM64
architecture with other implementations by unconditionally zeroing
allocated buffer.
Cc: <stable@vger.kernel.org> # v3.14+
Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com>
Signed-off-by: Will Deacon <will.deacon@arm.com>
[Diffstat](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/?id=6829e274a623187c24f7cfc0e3d35f25d087fcc5)

| -rw-r--r-- | [arch/arm64/mm/dma-mapping.c](/pub/scm/linux/kernel/git/torvalds/linux.git/diff/arch/arm64/mm/dma-mapping.c?id=6829e274a623187c24f7cfc0e3d35f25d087fcc5) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 4 deletions

| diff --git a/arch/arm64/mm/dma-mapping.c b/arch/arm64/mm/dma-mapping.cindex ef7d112f5ce0df..e0f14ee26b6818 100644--- a/[arch/arm64/mm/dma-mapping.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/mm/dma-mapping.c?id=6544e67bfb1bf55bcf3c0f6b37631917e9acfb74)+++ b/[arch/arm64/mm/dma-mapping.c](/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/arm64/mm/dma-mapping.c?id=6829e274a623187c24f7cfc0e3d35f25d087fcc5)@@ -67,8 +67,7 @@ static void \*\_\_alloc\_from\_pool(size\_t size, struct page \*\*ret\_page, gfp\_t flags)  \*ret\_page = phys\_to\_page(phys); ptr = (void \*)val;- if (flags & \_\_GFP\_ZERO)- memset(ptr, 0, size);+ memset(ptr, 0, size); }  return ptr;@@ -113,8 +112,7 @@ static void \*\_\_dma\_alloc\_coherent(struct device \*dev, size\_t size,  \*dma\_handle = phys\_to\_dma(dev, page\_to\_phys(page)); addr = page\_address(page);- if (flags & \_\_GFP\_ZERO)- memset(addr, 0, size);+ memset(addr, 0, size); return addr; } else { return swiotlb\_alloc\_coherent(dev, size, dma\_handle, flags); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-25 18:18:27 +0000



=== Content from source.android.com_6032a17a_20250125_181952.html ===


[![Android Open Source Project](https://www.gstatic.com/devrel-devsite/prod/v2c0608cfe9941cacf4435921a2ece588be3719df069d9fba67130a84e4743128/androidsource/images/lockup.svg)](/)

`/`

* English
* Deutsch
* Español
* Español – América Latina
* Français
* Indonesia
* Italiano
* Polski
* Português
* Português – Brasil
* Tiếng Việt
* Türkçe
* Русский
* עברית
* العربيّة
* فارسی
* हिंदी
* বাংলা
* ภาษาไทย
* 中文 – 简体
* 中文 – 繁體
* 日本語
* 한국어

[Android Code Search](https://cs.android.com/android/platform/superproject/main)
Sign in

* [Documentation](https://source.android.com/docs)

[What's New?](https://source.android.com/docs/whatsnew)

[Getting Started](https://source.android.com/docs/setup)

[Security](https://source.android.com/docs/security)

[Core Topics](https://source.android.com/docs/core)

[Compatibility](https://source.android.com/docs/compatibility)

[Android Devices](https://source.android.com/docs/devices)

[Automotive](https://source.android.com/docs/automotive)

[Reference](https://source.android.com/reference)

[![Android Open Source Project](https://www.gstatic.com/devrel-devsite/prod/v2c0608cfe9941cacf4435921a2ece588be3719df069d9fba67130a84e4743128/androidsource/images/lockup.svg)](/)

* [Docs](/docs)
  + More
  + [What's New?](/docs/whatsnew)
  + [Getting Started](/docs/setup)
  + [Security](/docs/security)
  + [Core Topics](/docs/core)
  + [Compatibility](/docs/compatibility)
  + [Android Devices](/docs/devices)
  + [Automotive](/docs/automotive)
  + [Reference](/reference)
* [Android Code Search](https://cs.android.com/android/platform/superproject/main)

* [Overview](/docs/security)
* Security overview
  + [Secure an Android device](/docs/security/overview)
  + [Kernel security](/docs/security/overview/kernel-security)
  + [App security](/docs/security/overview/app-security)
  + [Implement security](/docs/security/overview/implement)
  + [Updates and resources](/docs/security/overview/updates-resources)
  + [ASPIRE](/docs/security/overview/aspire)
  + [Reports](/docs/security/overview/reports)
  + [Enhancements](/docs/security/enhancements)
  + [Acknowledgements](/docs/security/overview/acknowledgements)
* Android Security Bulletins
  + [Bulletins home](/docs/security/bulletin)
  + [Overview](/docs/security/bulletin/asb-overview)
  + 2025 bulletins
    - [January](/docs/security/bulletin/2025-01-01)
  + 2024 bulletins
    - [December](/docs/security/bulletin/2024-12-01)
    - [November](/docs/security/bulletin/2024-11-01)
    - [October](/docs/security/bulletin/2024-10-01)
    - [September](/docs/security/bulletin/2024-09-01)
    - [August](/docs/security/bulletin/2024-08-01)
    - [July](/docs/security/bulletin/2024-07-01)
    - [June](/docs/security/bulletin/2024-06-01)
    - [May](/docs/security/bulletin/2024-05-01)
    - [April](/docs/security/bulletin/2024-04-01)
    - [March](/docs/security/bulletin/2024-03-01)
    - [February](/docs/security/bulletin/2024-02-01)
    - [January](/docs/security/bulletin/2024-01-01)
    - [Android 15](/docs/security/bulletin/android-15)
  + 2023 bulletins
    - [December](/docs/security/bulletin/2023-12-01)
    - [November](/docs/security/bulletin/2023-11-01)
    - [October](/docs/security/bulletin/2023-10-01)
    - [September](/docs/security/bulletin/2023-09-01)
    - [August](/docs/security/bulletin/2023-08-01)
    - [July](/docs/security/bulletin/2023-07-01)
    - [June](/docs/security/bulletin/2023-06-01)
    - [May](/docs/security/bulletin/2023-05-01)
    - [April](/docs/security/bulletin/2023-04-01)
    - [March](/docs/security/bulletin/2023-03-01)
    - [February](/docs/security/bulletin/2023-02-01)
    - [January](/docs/security/bulletin/2023-01-01)
    - [Android 14](/docs/security/bulletin/android-14)
  + 2022 bulletins
    - [December](/docs/security/bulletin/2022-12-01)
    - [November](/docs/security/bulletin/2022-11-01)
    - [October](/docs/security/bulletin/2022-10-01)
    - [September](/docs/security/bulletin/2022-09-01)
    - [August](/docs/security/bulletin/2022-08-01)
    - [July](/docs/security/bulletin/2022-07-01)
    - [June](/docs/security/bulletin/2022-06-01)
    - [May](/docs/security/bulletin/2022-05-01)
    - [April](/docs/security/bulletin/2022-04-01)
    - [March](/docs/security/bulletin/2022-03-01)
    - [Android 12L](/docs/security/bulletin/android-12l)
    - [February](/docs/security/bulletin/2022-02-01)
    - [January](/docs/security/bulletin/2022-01-01)
    - [Android 13](/docs/security/bulletin/android-13)
    - [Index](/docs/security/bulletin/2022)
  + 2021 bulletins
    - [December](/docs/security/bulletin/2021-12-01)
    - [November](/docs/security/bulletin/2021-11-01)
    - [October](/docs/security/bulletin/2021-10-01)
    - [September](/docs/security/bulletin/2021-09-01)
    - [August](/docs/security/bulletin/2021-08-01)
    - [July](/docs/security/bulletin/2021-07-01)
    - [June](/docs/security/bulletin/2021-06-01)
    - [May](/docs/security/bulletin/2021-05-01)
    - [April](/docs/security/bulletin/2021-04-01)
    - [March](/docs/security/bulletin/2021-03-01)
    - [February](/docs/security/bulletin/2021-02-01)
    - [January](/docs/security/bulletin/2021-01-01)
    - [Android 12](/docs/security/bulletin/android-12)
    - [Index](/docs/security/bulletin/2021)
  + 2020 bulletins
    - [December](/docs/security/bulletin/2020-12-01)
    - [November](/docs/security/bulletin/2020-11-01)
    - [October](/docs/security/bulletin/2020-10-01)
    - [September](/docs/security/bulletin/2020-09-01)
    - [August](/docs/security/bulletin/2020-08-01)
    - [July](/docs/security/bulletin/2020-07-01)
    - [June](/docs/security/bulletin/2020-06-01)
    - [May](/docs/security/bulletin/2020-05-01)
    - [April](/docs/security/bulletin/2020-04-01)
    - [March](/docs/security/bulletin/2020-03-01)
    - [February](/docs/security/bulletin/2020-02-01)
    - [January](/docs/security/bulletin/2020-01-01)
    - [Android 11](/docs/security/bulletin/android-11)
    - [Index](/docs/security/bulletin/2020)
  + 2019 bulletins
    - [December](/docs/security/bulletin/2019-12-01)
    - [November](/docs/security/bulletin/2019-11-01)
    - [October](/docs/security/bulletin/2019-10-01)
    - [September](/docs/security/bulletin/2019-09-01)
    - [August](/docs/security/bulletin/2019-08-01)
    - [July](/docs/security/bulletin/2019-07-01)
    - [June](/docs/security/bulletin/2019-06-01)
    - [May](/docs/security/bulletin/2019-05-01)
    - [April](/docs/security/bulletin/2019-04-01)
    - [March](/docs/security/bulletin/2019-03-01)
    - [February](/docs/security/bulletin/2019-02-01)
    - [January](/docs/security/bulletin/2019-01-01)
    - [Android 10](/docs/security/bulletin/android-10)
    - [Index](/docs/security/bulletin/2019)
  + 2018 bulletins
    - [December](/docs/security/bulletin/2018-12-01)
    - [November](/docs/security/bulletin/2018-11-01)
    - [October](/docs/security/bulletin/2018-10-01)
    - [September](/docs/security/bulletin/2018-09-01)
    - [August](/docs/security/bulletin/2018-08-01)
    - [July](/docs/security/bulletin/2018-07-01)
    - [June](/docs/security/bulletin/2018-06-01)
    - [May](/docs/security/bulletin/2018-05-01)
    - [April](/docs/security/bulletin/2018-04-01)
    - [March](/docs/security/bulletin/2018-03-01)
    - [February](/docs/security/bulletin/2018-02-01)
    - [January](/docs/security/bulletin/2018-01-01)
    - [Index](/docs/security/bulletin/2018)
  + 2017 bulletins
    - [December](/docs/security/bulletin/2017-12-01)
    - [November](/docs/security/bulletin/2017-11-01)
    - [October](/docs/security/bulletin/2017-10-01)
    - [September](/docs/security/bulletin/2017-09-01)
    - [August](/docs/security/bulletin/2017-08-01)
    - [July](/docs/security/bulletin/2017-07-01)
    - [June](/docs/security/bulletin/2017-06-01)
    - [May](/docs/security/bulletin/2017-05-01)
    - [April](/docs/security/bulletin/2017-04-01)
    - [March](/docs/security/bulletin/2017-03-01)
    - [February](/docs/security/bulletin/2017-02-01)
    - [January](/docs/security/bulletin/2017-01-01)
    - [Index](/docs/security/bulletin/2017)
  + 2016 bulletins
    - [December](/docs/security/bulletin/2016-12-01)
    - [November](/docs/security/bulletin/2016-11-01)
    - [October](/docs/security/bulletin/2016-10-01)
    - [September](/docs/security/bulletin/2016-09-01)
    - [August](/docs/security/bulletin/2016-08-01)
    - [July](/docs/security/bulletin/2016-07-01)
    - [June](/docs/security/bulletin/2016-06-01)
    - [May](/docs/security/bulletin/2016-05-01)
    - [April](/docs/security/bulletin/2016-04-02)
    - [March](/docs/security/bulletin/2016-03-01)
    - [February](/docs/security/bulletin/2016-02-01)
    - [January](/docs/security/bulletin/2016-01-01)
    - [Index](/docs/security/bulletin/2016)
  + 2015 bulletins
    - [December](/docs/security/bulletin/2015-12-01)
    - [November](/docs/security/bulletin/2015-11-01)
    - [October](/docs/security/bulletin/2015-10-01)
    - [September](/docs/security/bulletin/2015-09-01)
    - [August](/docs/security/bulletin/2015-08-01)
    - [Index](/docs/security/bulletin/2015)
  + Pixel/Nexus bulletins
  + [Overview](/docs/security/bulletin/pixel)
  + 2025 bulletins
    - [January](/docs/security/bulletin/pixel/2025-01-01)
  + 2024 bulletins
    - [December](/docs/security/bulletin/pixel/2024-12-01)
    - [November](/docs/security/bulletin/pixel/2024-11-01)
    - [October](/docs/security/bulletin/pixel/2024-10-01)
    - [September](/docs/security/bulletin/pixel/2024-09-01)
    - [August](/docs/security/bulletin/pixel/2024-08-01)
    - [July](/docs/security/bulletin/pixel/2024-07-01)
    - [June](/docs/security/bulletin/pixel/2024-06-01)
    - [May](/docs/security/bulletin/pixel/2024-05-01)
    - [April](/docs/security/bulletin/pixel/2024-04-01)
    - [March](/docs/security/bulletin/pixel/2024-03-01)
    - [February](/docs/security/bulletin/pixel/2024-02-01)
    - [January](/docs/security/bulletin/pixel/2024-01-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/pixel/2023-12-01)
    - [November](/docs/security/bulletin/pixel/2023-11-01)
    - [October](/docs/security/bulletin/pixel/2023-10-01)
    - [September](/docs/security/bulletin/pixel/2023-09-01)
    - [August](/docs/security/bulletin/pixel/2023-08-01)
    - [July](/docs/security/bulletin/pixel/2023-07-01)
    - [June](/docs/security/bulletin/pixel/2023-06-01)
    - [May](/docs/security/bulletin/pixel/2023-05-01)
    - [April](/docs/security/bulletin/pixel/2023-04-01)
    - [March](/docs/security/bulletin/pixel/2023-03-01)
    - [February](/docs/security/bulletin/pixel/2023-02-01)
    - [January](/docs/security/bulletin/pixel/2023-01-01)
  + 2022 bulletins
    - [December](/docs/security/bulletin/pixel/2022-12-01)
    - [November](/docs/security/bulletin/pixel/2022-11-01)
    - [October](/docs/security/bulletin/pixel/2022-10-01)
    - [September](/docs/security/bulletin/pixel/2022-09-01)
    - [August](/docs/security/bulletin/pixel/2022-08-01)
    - [July](/docs/security/bulletin/pixel/2022-07-01)
    - [June](/docs/security/bulletin/pixel/2022-06-01)
    - [May](/docs/security/bulletin/pixel/2022-05-01)
    - [April](/docs/security/bulletin/pixel/2022-04-01)
    - [March](/docs/security/bulletin/pixel/2022-03-01)
    - [February](/docs/security/bulletin/pixel/2022-02-01)
    - [January](/docs/security/bulletin/pixel/2022-01-01)
  + 2021 bulletins
    - [December](/docs/security/bulletin/pixel/2021-12-01)
    - [November](/docs/security/bulletin/pixel/2021-11-01)
    - [October](/docs/security/bulletin/pixel/2021-10-01)
    - [September](/docs/security/bulletin/pixel/2021-09-01)
    - [August](/docs/security/bulletin/pixel/2021-08-01)
    - [July](/docs/security/bulletin/pixel/2021-07-01)
    - [June](/docs/security/bulletin/pixel/2021-06-01)
    - [May](/docs/security/bulletin/pixel/2021-05-01)
    - [April](/docs/security/bulletin/pixel/2021-04-01)
    - [March](/docs/security/bulletin/pixel/2021-03-01)
    - [February](/docs/security/bulletin/pixel/2021-02-01)
    - [January](/docs/security/bulletin/pixel/2021-01-01)
    - [Index](/docs/security/bulletin/pixel/2021)
  + 2020 bulletins
    - [December](/docs/security/bulletin/pixel/2020-12-01)
    - [November](/docs/security/bulletin/pixel/2020-11-01)
    - [October](/docs/security/bulletin/pixel/2020-10-01)
    - [September](/docs/security/bulletin/pixel/2020-09-01)
    - [August](/docs/security/bulletin/pixel/2020-08-01)
    - [July](/docs/security/bulletin/pixel/2020-07-01)
    - [June](/docs/security/bulletin/pixel/2020-06-01)
    - [May](/docs/security/bulletin/pixel/2020-05-01)
    - [April](/docs/security/bulletin/pixel/2020-04-01)
    - [March](/docs/security/bulletin/pixel/2020-03-01)
    - [February](/docs/security/bulletin/pixel/2020-02-01)
    - [January](/docs/security/bulletin/pixel/2020-01-01)
    - [Index](/docs/security/bulletin/pixel/2020)
  + 2019 bulletins
    - [December](/docs/security/bulletin/pixel/2019-12-01)
    - [November](/docs/security/bulletin/pixel/2019-11-01)
    - [October](/docs/security/bulletin/pixel/2019-10-01)
    - [September](/docs/security/bulletin/pixel/2019-09-01)
    - [August](/docs/security/bulletin/pixel/2019-08-01)
    - [July](/docs/security/bulletin/pixel/2019-07-01)
    - [June](/docs/security/bulletin/pixel/2019-06-01)
    - [May](/docs/security/bulletin/pixel/2019-05-01)
    - [April](/docs/security/bulletin/pixel/2019-04-01)
    - [March](/docs/security/bulletin/pixel/2019-03-01)
    - [February](/docs/security/bulletin/pixel/2019-02-01)
    - [January](/docs/security/bulletin/pixel/2019-01-01)
    - [Index](/docs/security/bulletin/pixel/2019)
  + 2018 bulletins
    - [December](/docs/security/bulletin/pixel/2018-12-01)
    - [November](/docs/security/bulletin/pixel/2018-11-01)
    - [October](/docs/security/bulletin/pixel/2018-10-01)
    - [September](/docs/security/bulletin/pixel/2018-09-01)
    - [August](/docs/security/bulletin/pixel/2018-08-01)
    - [July](/docs/security/bulletin/pixel/2018-07-01)
    - [June](/docs/security/bulletin/pixel/2018-06-01)
    - [May](/docs/security/bulletin/pixel/2018-05-01)
    - [April](/docs/security/bulletin/pixel/2018-04-01)
    - [March](/docs/security/bulletin/pixel/2018-03-01)
    - [February](/docs/security/bulletin/pixel/2018-02-01)
    - [January](/docs/security/bulletin/pixel/2018-01-01)
    - [Index](/docs/security/bulletin/pixel/2018)
  + 2017 bulletins
    - [December](/docs/security/bulletin/pixel/2017-12-01)
    - [November](/docs/security/bulletin/pixel/2017-11-01)
    - [October](/docs/security/bulletin/pixel/2017-10-01)
    - [Index](/docs/security/bulletin/pixel/2017)
  + Android Automotive
  + [Overview](/docs/security/bulletin/aaos)
  + 2025 bulletins
    - [January](/docs/security/bulletin/aaos/2025-01-01)
  + 2024 bulletins
    - [December](/docs/security/bulletin/aaos/2024-12-01)
    - [November](/docs/security/bulletin/aaos/2024-11-01)
    - [October](/docs/security/bulletin/aaos/2024-10-01)
    - [September](/docs/security/bulletin/aaos/2024-09-01)
    - [August](/docs/security/bulletin/aaos/2024-08-01)
    - [July](/docs/security/bulletin/aaos/2024-07-01)
    - [June](/docs/security/bulletin/aaos/2024-06-01)
    - [May](/docs/security/bulletin/aaos/2024-05-01)
    - [April](/docs/security/bulletin/aaos/2024-04-01)
    - [March](/docs/security/bulletin/aaos/2024-03-01)
    - [February](/docs/security/bulletin/aaos/2024-02-01)
    - [January](/docs/security/bulletin/aaos/2024-01-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/aaos/2023-12-01)
    - [November](/docs/security/bulletin/aaos/2023-11-01)
    - [October](/docs/security/bulletin/aaos/2023-10-01)
    - [September](/docs/security/bulletin/aaos/2023-09-01)
    - [August](/docs/security/bulletin/aaos/2023-08-01)
    - [July](/docs/security/bulletin/aaos/2023-07-01)
    - [June](/docs/security/bulletin/aaos/2023-06-01)
    - [May](/docs/security/bulletin/aaos/2023-05-01)
    - [April](/docs/security/bulletin/aaos/2023-04-01)
    - [March](/docs/security/bulletin/aaos/2023-03-01)
    - [February](/docs/security/bulletin/aaos/2023-02-01)
    - [January](/docs/security/bulletin/aaos/2023-01-01)
  + 2022 bulletins
    - [December](/docs/security/bulletin/aaos/2022-12-01)
    - [November](/docs/security/bulletin/aaos/2022-11-01)
    - [October](/docs/security/bulletin/aaos/2022-10-01)
    - [September](/docs/security/bulletin/aaos/2022-09-01)
    - [August](/docs/security/bulletin/aaos/2022-08-01)
    - [July](/docs/security/bulletin/aaos/2022-07-01)
    - [June](/docs/security/bulletin/aaos/2022-06-01)
    - [May](/docs/security/bulletin/aaos/2022-05-01)
    - [April](/docs/security/bulletin/aaos/2022-04-01)
    - [March](/docs/security/bulletin/aaos/2022-03-01)
    - [February](/docs/security/bulletin/aaos/2022-02-01)
    - [January](/docs/security/bulletin/aaos/2022-01-01)
  + 2021 bulletins
    - [December](/docs/security/bulletin/aaos/2021-12-01)
    - [November](/docs/security/bulletin/aaos/2021-11-01)
    - [October](/docs/security/bulletin/aaos/2021-10-01)
    - [September](/docs/security/bulletin/aaos/2021-09-01)
    - [August](/docs/security/bulletin/aaos/2021-08-01)
    - [July](/docs/security/bulletin/aaos/2021-07-01)
    - [June](/docs/security/bulletin/aaos/2021-06-01)
    - [May](/docs/security/bulletin/aaos/2021-05-01)
    - [April](/docs/security/bulletin/aaos/2021-04-01)
    - [March](/docs/security/bulletin/aaos/2021-03-01)
    - [February](/docs/security/bulletin/aaos/2021-02-01)
    - [January](/docs/security/bulletin/aaos/2021-01-01)
  + Chromecast
  + [Overview](/docs/security/bulletin/chromecast)
  + 2024 bulletins
    - [December](/docs/security/bulletin/chromecast/2024-12-01)
    - [September](/docs/security/bulletin/chromecast/2024-09-01)
    - [July](/docs/security/bulletin/chromecast/2024-07-01)
    - [March](/docs/security/bulletin/chromecast/2024-03-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/chromecast/2023-12-01)
    - [September](/docs/security/bulletin/chromecast/2023-07-01)
    - [June](/docs/security/bulletin/chromecast/2023-06-01)
    - [April](/docs/security/bulletin/chromecast/2023-04-01)
  + 2022 bulletins
    - [December](/docs/security/bulletin/chromecast/2022-12-01)
    - [October](/docs/security/bulletin/chromecast/2022-10-01)
    - [July](/docs/security/bulletin/chromecast/2022-07-01)
  + Wear
  + [Overview](/docs/security/bulletin/wear)
  + 2025 bulletins
    - [January](/docs/security/bulletin/wear/2025/2025-01-01)
  + 2024 bulletins
    - [December](/docs/security/bulletin/wear/2024/2024-12-01)
    - [November](/docs/security/bulletin/wear/2024/2024-11-01)
    - [October](/docs/security/bulletin/wear/2024/2024-10-01)
    - [September](/docs/security/bulletin/wear/2024/2024-09-01)
    - [August](/docs/security/bulletin/wear/2024/2024-08-01)
    - [July](/docs/security/bulletin/wear/2024/2024-07-01)
    - [June](/docs/security/bulletin/wear/2024/2024-06-01)
    - [May](/docs/security/bulletin/wear/2024/2024-05-01)
    - [April](/docs/security/bulletin/wear/2024/2024-04-01)
    - [March](/docs/security/bulletin/wear/2024/2024-03-01)
    - [February](/docs/security/bulletin/wear/2024/2024-02-01)
    - [January](/docs/security/bulletin/wear/2024/2024-01-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/wear/2023/2023-12-01)
    - [November](/docs/security/bulletin/wear/2023/2023-11-01)
    - [October](/docs/security/bulletin/wear/2023/2023-10-01)
    - [September](/docs/security/bulletin/wear/2023/2023-09-01)
    - [August](/docs/security/bulletin/wear/2023/2023-08-01)
  + Pixel Watch
  + [Overview](/docs/security/bulletin/pixel-watch)
  + 2024 bulletins
    - [December](/docs/security/bulletin/pixel-watch/2024-12-01)
    - [August](/docs/security/bulletin/pixel-watch/2024-08-01)
    - [July](/docs/security/bulletin/pixel-watch/2024-07-01)
    - [June](/docs/security/bulletin/pixel-watch/2024-06-01)
    - [May](/docs/security/bulletin/pixel-watch/2024-05-01)
    - [April](/docs/security/bulletin/pixel-watch/2024-04-01)
    - [March](/docs/security/bulletin/pixel-watch/2024-03-01)
    - [February](/docs/security/bulletin/pixel-watch/2024-02-01)
    - [January](/docs/security/bulletin/pixel-watch/2024-01-01)
  + 2023 bulletins
    - [December](/docs/security/bulletin/pixel-watch/2023/2023-12-01)
    - [September](/docs/security/bulletin/pixel-watch/2023/2023-09-01)
    - [June](/docs/security/bulletin/pixel-watch/2023/2023-06-01)
  + Advisories
  + [Overview](/docs/security/bulletin/advisory)
  + [March 2016](/docs/security/bulletin/advisory/2016-03-18)
* Features
  + [Overview](/docs/security/features)
  + [Application Sandbox](/docs/security/app-sandbox)
  + [OMAPI vendor stable interface](/docs/security/features/open-mobile-api)
  + App signing
    - [Overview](/docs/security/features/apksigning)
    - [APK signature scheme v2](/docs/security/features/apksigning/v2)
    - [APK signature scheme v3](/docs/security/features/apksigning/v3)
    - [APK signature scheme v3.1](/docs/security/features/apksigning/v3-1)
    - [APK signature scheme v4](/docs/security/features/apksigning/v4)
  + Authentication
    - [Overview](/docs/security/features/authentication)
    - [Gatekeeper](/docs/security/features/authentication/gatekeeper)
    - Biometrics
      * [Overview](/docs/security/features/biometric)
      * [Measure biometric security](/docs/security/features/biometric/measure)
      * [Fingerprint HIDL](/docs/security/features/authentication/fingerprint-hal)
      * [Face authentication HIDL](/docs/security/features/biometric/face-authentication)
    - Protected confirmation
      * [Overview](/docs/security/features/protected-confirmation)
      * [Implementation](/docs/security/features/protected-confirmation/implementation)
      * [Design guidelines](/docs/security/features/protected-confirmation/design)
      * [Accessibility](/docs/security/features/protected-confirmation/accessibility)
  + DICE
    - [Overview](/docs/security/features/dice)
    - [Applications of DICE](/docs/security/features/dice/applications-of-dice)
  + Encryption
    - [Overview](/docs/security/features/encryption)
    - [File-based encryption](/docs/security/features/encryption/file-based)
    - [Full-disk encryption](/docs/security/features/encryption/full-disk)
    - [Metadata encryption](/docs/security/features/encryption/metadata)
    - [Enable Adiantum](/docs/security/features/encryption/adiantum)
    - [Hardware-wrapped keys](/docs/security/features/encryption/hw-wrapped-keys)
  + Keystore
    - [Overview](/docs/security/features/keystore)
    - [Features](/docs/security/features/keystore/features)
    - [Key and ID attestation](/docs/security/features/keystore/attestation)
    - [Version binding](/docs/security/features/keystore/version-binding)
    - [Authorization tags](/docs/security/features/keystore/tags)
    - [Functions](/docs/security/features/keystore/implementer-ref)
  + Identity credential
    - [Overview](/docs/security/features/identity-credentials)
  + SELinux
    - [Overview](/docs/security/features/selinux)
    - [Concepts](/docs/security/features/selinux/concepts)
    - [Implementation](/docs/security/features/selinux/implement)
    - [Customization](/docs/security/features/selinux/customize)
    - [Build sepolicy](/docs/security/features/selinux/build)
    - [Compatibility](/docs/security/features/selinux/compatibility)
    - [Validation](/docs/security/features/selinux/validate)
    - [Write policy](/docs/security/features/selinux/device-policy)
    - [Vendor init](/docs/security/features/selinux/vendor-init)
  + Trusty TEE
    - [Overview](/docs/security/features/trusty)
    - [Download and build](/docs/security/features/trusty/download-and-build)
    - [Trusty API reference](/docs/security/features/trusty/trusty-ref)
  + Verified Boot
    - [Overview](/docs/security/features/verifiedboot)
    - [Device state](/docs/security/features/verifiedboot/device-state)
    - [Verify Boot](/docs/security/features/verifiedboot/verified-boot)
    - [Boot flow](/docs/security/features/verifiedboot/boot-flow)
    - [Implement dm-verity](/docs/security/features/verifiedboot/dm-verity)
    - [Verify system\_other partition](/docs/security/features/verifiedboot/verify-system-other-partition)
    - [Reference implementation](/docs/security/features/verifiedboot/avb)
  + Safety Center
    - [Overview](/docs/security/safety-center/overview)
    - [Customize Safety Center](/docs/security/safety-center/customize)
    - [Customize Safety Center UI](/docs/security/safety-center/customize-ui)
    - [Interact with Safety Center](/docs/security/safety-center/interact)
    - [Testing and validation](/docs/security/safety-center/test-requirements)
  + Cellular security
    - [Overview](/docs/security/features/cellular-security/overview)
    - [Disable 2G](/docs/security/features/cellular-security/disable-2g)
  + [Private space](/docs/security/features/private-space)
* Testing
  + [Overview](/docs/security/test/fuzz-sanitize)
  + [Memory safety](/docs/security/test/memory-safety)
  + Arm Memory Tagging Extension
  + [Overview](/docs/security/test/memory-safety/arm-mte)
  + [Bootloader support](/docs/security/test/memory-safety/bootloader-support)
  + [Understand MTE reports](/docs/security/test/memory-safety/mte-reports)
  + [MTE configuration](/docs/security/test/memory-safety/mte-configuration)
  + Sanitizers
  + [Overview](/docs/security/test/sanitizers)
  + [AddressSanitizer](/docs/security/test/asan)
  + [Kernel AddressSanitizer](/docs/security/test/kasan)
  + [Hardware-assisted AddressSanitizer](/docs/security/test/hwasan)
  + [Understand HWASan reports](/docs/security/test/memory-safety/hwasan-reports)
  + [UndefinedBehaviorSanitizer](/docs/security/test/ubsan)
  + Other topics
  + [Control flow integrity](/docs/security/test/cfi)
  + [Kernel control flow integrity](/docs/security/test/kcfi)
  + [Execute-only memory](/docs/security/test/execute-only-memory)
  + [Fuzz with libFuzzer](/docs/security/test/libfuzzer)
  + [GWP-ASan and KFENCE](/docs/security/test/memory-safety/gwp-asan-kfence)
  + [Security Test Suite development kit](/docs/security/test/sts-sdk)
  + [Scudo](/docs/security/test/scudo)
  + [ShadowCallStack](/docs/security/test/shadow-call-stack)
  + [Tagged pointers](/docs/security/test/tagged-pointers)
  + [Zero initialized memory](/docs/security/test/memory-safety/zero-initialized-memory)
* Best practices
  + [Overview](/docs/security/best-practices)
  + [Operational security](/docs/security/best-practices/ops)
  + [System security](/docs/security/best-practices/system)
  + [App security](/docs/security/best-practices/app)
  + [Network security](/docs/security/best-practices/network)
  + [Hardware security](/docs/security/best-practices/hardware)
  + [Privacy security](/docs/security/best-practices/privacy)

* What's new?
* [Release notes](/docs/whatsnew/release-notes)
* [Latest security bulletins](/docs/whatsnew/latest-security-bulletins)
* [Latest Compatibility Definition Document (CDD)](/docs/whatsnew/latest-cdd)
* [Site updates](/docs/whatsnew/site-updates)
* Getting Started
* [About](/docs/setup/about)
* [Start](/docs/setup/start)
* [Download](/docs/setup/download)
* [Build](/docs/setup/build)
* [Test](/docs/setup/test)
* [Create](/docs/setup/create/coding-tasks)
* [Contribute](/docs/setup/contribute)
* [Community](/docs/setup/community/cofc)
* [Tools, build, and related reference](/docs/setup/reference)
* Security
* [Overview](/docs/security/overview)
* [Bulletins](/docs/security/bulletin)
* [Features](/docs/security/features)
* [Testing](/docs/security/test/fuzz-sanitize)
* [Best Practices](/docs/security/best-practices)
* Core Topics
* [Architecture](/docs/core/architecture)
* [Audio](/docs/core/audio)
* [Camera](/docs/core/camera)
* [Connectivity](/docs/core/connect)
* [Data](/docs/core/data)
* [Display](/docs/core/display)
* [Fonts](/docs/core/fonts/custom-font-fallback)
* [Graphics](/docs/core/graphics)
* [Interaction](/docs/core/interaction)
* [Media](/docs/core/media)
* [Performance](/docs/core/perf)
* [Permissions](/docs/core/permissions)
* [Power](/docs/core/power)
* [Runtime](/docs/core/runtime)
* [Settings](/docs/core/settings)
* [Storage](/docs/core/storage)
* [Tests](/docs/core/tests)
* [Updates](/docs/core/ota)
* [Virtualization](/docs/core/virtualization)
* Compatibility
* [Compatibility Definition Document (CDD)](/docs/compatibility/cdd)
* [Compatibility Test Suite (CTS)](/docs/compatibility/cts)
* Android Devices
* [Cuttlefish](/docs/devices/cuttlefish)
* [Enterprise](/docs/devices/admin)
* [TV](/docs/devices/tv)
* Automotive
* [Get Started](/docs/automotive/start/what_automotive)
* [Guidelines for Development](/docs/automotive/guidelines)
* [Development Tools](/docs/automotive/dev-tools)
* [Testing Tools and Infrastructure](/docs/automotive/tools)
* [Release Details](/docs/automotive/start/releases)
* Reference
* [HIDL](/reference/hidl)
* [HAL](/reference/hal)
* [Trade Federation](/reference/tradefed/classes)
* [Security Test Suite](/reference/sts/classes)

* [AOSP](https://source.android.com/)
* [Security](https://source.android.com/docs/security)

# Android Security Bulletin—October 2016

Stay organized with collections

Save and categorize content based on your preferences.

*Published October 03, 2016 | Updated October 04, 2016*

The Android Security Bulletin contains details of security vulnerabilities
affecting Android devices. Alongside the bulletin, we have released a security
update to Nexus devices through an over-the-air (OTA) update. The Nexus firmware
images have also been released to the
[Google Developer
site](https://developers.google.com/android/nexus/images). Security Patch Levels of October 05, 2016 or later address these
issues. Refer to the
[documentation](https://support.google.com/nexus/answer/4457705#nexus_devices)
to learn how to check the security patch level. Supported Nexus devices will
receive a single OTA update with the October 05, 2016 security patch level.

Partners were notified about the issues described in the bulletin on September
06, 2016 or earlier. Where applicable, source code patches for these issues
have been released to the Android Open Source Project (AOSP) repository. This
bulletin also includes links to patches outside of AOSP.

The most severe of these issues are Critical security vulnerabilities in
device-specific code that could enable remote code execution within the context
of the kernel, leading to the possibility of a local permanent device
compromise, which may require reflashing the operating system to repair the
device. The [severity
assessment](/docs/security/overview/updates-resources#severity) is based on the effect that exploiting the vulnerability would
possibly have on an affected device, assuming the platform and service
mitigations are disabled for development purposes or if successfully bypassed.

We have had no reports of active customer exploitation or abuse of these newly
reported issues. Refer to the [Android and Google service
mitigations](#mitigations) section for details on the
[Android
security platform protections](/docs/security/enhancements) and service protections such as
[SafetyNet](https://developer.android.com/training/safetynet/index.html),
which improve the security of the Android platform.

We encourage all customers to accept these updates to their devices.

## Announcements

* This bulletin has two security patch level strings to provide Android
  partners with the flexibility to more quickly fix a subset of vulnerabilities
  that are similar across all Android devices. See
  [Common questions and answers](#common-questions-and-answers) for
  additional information:
  + **2016-10-01**: Partial security patch level string. This
    security patch level string indicates that all issues associated with 2016-10-01
    (and all previous security patch level strings) are addressed.
  + **2016-10-05**: Complete security patch level string. This
    security patch level string indicates that all issues associated with 2016-10-01
    and 2016-10-05 (and all previous security patch level strings) are addressed.
* Supported Nexus devices will receive a single OTA update with the October
  05, 2016 security patch level.

## Android and Google service mitigations

This is a summary of the mitigations provided by the
[Android
security platform](/docs/security/enhancements) and service protections such as SafetyNet. These
capabilities reduce the likelihood that security vulnerabilities could be
successfully exploited on Android.

* Exploitation for many issues on Android is made more difficult by
  enhancements in newer versions of the Android platform. We encourage all users
  to update to the latest version of Android where possible.
* The Android Security team actively monitors for abuse with [Verify
  Apps and SafetyNet](/static/docs/security/overview/reports/Google_Android_Security_2015_Report_Final.pdf), which are designed to warn users about [Potentially
  Harmful Applications](http://static.googleusercontent.com/media/source.android.com/en//security/reports/Google_Android_Security_PHA_classifications.pdf). Verify Apps is enabled by default on devices with [Google Mobile Services](http://www.android.com/gms), and is especially
  important for users who install applications from outside of Google Play. Device
  rooting tools are prohibited within Google Play, but Verify Apps warns users
  when they attempt to install a detected rooting application—no matter where it
  comes from. Additionally, Verify Apps attempts to identify and block
  installation of known malicious applications that exploit a privilege escalation
  vulnerability. If such an application has already been installed, Verify Apps
  will notify the user and attempt to remove the detected application.
* As appropriate, Google Hangouts and Messenger applications do not
  automatically pass media to processes such as Mediaserver.

## Acknowledgements

We would like to thank these researchers for their contributions:

* Andre Teixeira Rizzo: CVE-2016-3882
* Andrea Biondo: CVE-2016-3921
* Daniel Micay of Copperhead Security: CVE-2016-3922
* [Dmitry Vyukov](https://github.com/google/syzkaller) of Google:
  CVE-2016-7117
* dosomder: CVE-2016-3931
* Ecular Xu (徐健) of Trend Micro: CVE-2016-3920
* Gengjia Chen ([@chengjia4574](https://twitter.com/chengjia4574))
  and [pjf](http://weibo.com/jfpan) of IceSword Lab, Qihoo 360
  Technology Co. Ltd.: CVE-2016-6690, CVE-2016-3901, CVE-2016-6672, CVE-2016-3940,
  CVE-2016-3935
* Hang Zhang,
  Dongdong She, and
  Zhiyun Qian of UC Riverside: CVE-2015-8950
* Hao Chen of Alpha Team, Qihoo 360 Technology Co. Ltd.: CVE-2016-3860
* Jann Horn of Google Project Zero: CVE-2016-3900, CVE-2016-3885
* [Jason Rogena](http://keybase.io/jasonrogena): CVE-2016-3917
* Jianqiang Zhao ([@jianqiangzhao](https://twitter.com/jianqiangzhao)) and
  [pjf](http://weibo.com/jfpan) of IceSword Lab, Qihoo 360: CVE-2016-6688,
  CVE-2016-6677, CVE-2016-6673, CVE-2016-6687, CVE-2016-6686, CVE-2016-6681,
  CVE-2016-6682, CVE-2016-3930
* Joshua Drake ([@jduck](https://twitter.com/jduck)):
  CVE-2016-3920
* Maciej Szawłowski of Google security team: CVE-2016-3905
* Mark Brand of Google Project Zero: CVE-2016-6689
* [Michał Bednarski](https://github.com/michalbednarski):
  CVE-2016-3914, CVE-2016-6674, CVE-2016-3911, CVE-2016-3912
* Mingjian Zhou ([@Mingjian\_Zhou](https://twitter.com/Mingjian_Zhou)),
  Chiachih Wu ([@chiachih\_wu](https://twitter.com/chiachih_wu)), and Xuxian
  Jiang of [C0RE Team](http://c0reteam.org): CVE-2016-3933, CVE-2016-3932
* Nightwatch Cybersecurity Research
  ([@nightwatchcyber](https://twitter.com/nightwatchcyber)): CVE-2016-5348
* Roee Hay, IBM Security X-Force Researcher: CVE-2016-6678
* Samuel Tan of Google: CVE-2016-3925
* Scott Bauer
  ([@ScottyBauer1](https://twitter.com/ScottyBauer1)):
  CVE-2016-3936, CVE-2016-3928, CVE-2016-3902, CVE-2016-3937, CVE-2016-6696
* Seven Shen ([@lingtongshen](https://twitter.com/lingtongshen)) of
  Trend Micro Mobile Threat Research Team: CVE-2016-6685, CVE-2016-6683,
  CVE-2016-6680, CVE-2016-6679, CVE-2016-3903, CVE-2016-6693, CVE-2016-6694,
  CVE-2016-6695
* Wenke Dou, Mingjian Zhou
  ([@Mingjian\_Zhou](https://twitter.com/Mingjian_Zhou)), Chiachih Wu
  ([@chiachih\_wu](https://twitter.com/chiachih_wu)), and Xuxian Jiang of
  [C0RE Team](http://c0reteam.org): CVE-2016-3909
* Wenlin Yang and Guang Gong (龚广) ([@oldfresher](https://twitter.com/oldfresher))
  of Alpha Team, Qihoo 360 Technology Co. Ltd.: CVE-2016-3918
* Wish Wu ([吴潍浠](http://weibo.com/wishlinux))
  ([@wish\_wu)](https://twitter.com/wish_wu) of
  [Trend
  Micro Inc.](http://blog.trendmicro.com/trendlabs-security-intelligence/author/wishwu/): CVE-2016-3924, CVE-2016-3915, CVE-2016-3916, CVE-2016-3910
* Yong Shi of Eagleye team, SCC, Huawei: CVE-2016-3938
* Zhanpeng Zhao (行之) ([@0xr0ot](https://twitter.com/0xr0ot)) of
  Security Research Lab, [Cheetah Mobile](http://www.cmcm.com):
  CVE-2016-3908

## 2016-10-01 security patch level—Vulnerability details

In the sections below, we provide details for each of the security
vulnerabilities that apply to the 2016-10-01 patch level. There is a description of
the issue, a severity rationale, and a table with the CVE, associated
references, severity, updated Nexus devices, updated AOSP versions (where
applicable), and date reported. When available, we will link the public change
that addressed the issue to the bug ID, like the AOSP change list. When multiple
changes relate to a single bug, additional references are linked to numbers
following the bug ID.

### Elevation of privilege vulnerability in ServiceManager

An elevation of privilege in ServiceManager could enable a local malicious
application to register arbitrary services that would normally be provided by a
privileged process, such as the system\_server. This issue is rated as High
severity due to the possibility of service impersonation.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3900 | [A-29431260](https://android.googlesource.com/platform/frameworks/native/%2B/d3c6ce463ac91ecbeb2128beb475d31d3ca6ef42) [[2](https://android.googlesource.com/platform/frameworks/native/%2B/047eec456943dc082e33220d28abb7df4e089f69)] | High | All Nexus | 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Jun 15, 2016 |

### Elevation of privilege vulnerability in Lock Settings Service

An elevation of privilege vulnerability in Lock Settings Service could enable a
local malicious application to clear the device PIN or password. This issue is
rated as High because it is a local bypass of user interaction requirements for
any developer or security settings modifications.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3908 | [A-30003944](https://android.googlesource.com/platform/frameworks/base/%2B/96daf7d4893f614714761af2d53dfb93214a32e4) | High | All Nexus | 6.0, 6.0.1, 7.0 | Jul 6, 2016 |

### Elevation of privilege vulnerability in Mediaserver

An elevation of privilege vulnerability in Mediaserver could enable a local
malicious application to execute arbitrary code within the context of a
privileged process. This issue is rated as High because it could be used to gain
local access to elevated capabilities, which are not normally accessible to a
third-party application.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3909 | [A-30033990](https://android.googlesource.com/platform/frameworks/av/%2B/d4271b792bdad85a80e2b83ab34c4b30b74f53ec) [[2](https://android.googlesource.com/platform/frameworks/av/%2B/c48ef757cc50906e8726a3bebc3b60716292cdba)] | High | All Nexus | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Jul 8, 2016 |
| CVE-2016-3910 | [A-30148546](https://android.googlesource.com/platform/frameworks/av/%2B/035cb12f392860113dce96116a5150e2fde6f0cc) | High | All Nexus | 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Jul 13, 2016 |
| CVE-2016-3913 | [A-30204103](https://android.googlesource.com/platform/frameworks/av/%2B/0c3b93c8c2027e74af642967eee5c142c8fd185d) | High | All Nexus | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Jul 18, 2016 |

### Elevation of privilege vulnerability in Zygote process

An elevation of privilege in the Zygote process could enable a local malicious
application to execute arbitrary code within the context of a privileged
process. This issue is rated as High because it could be used to gain local
access to elevated capabilities, which are not normally accessible to a
third-party application.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3911 | [A-30143607](https://android.googlesource.com/platform/frameworks/base/%2B/2c7008421cb67f5d89f16911bdbe36f6c35311ad) | High | All Nexus | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Jul 12, 2016 |

### Elevation of privilege vulnerability in framework APIs

An elevation of privilege vulnerability in the framework APIs could enable a
local malicious application to execute arbitrary code within the context of a
privileged process. This issue is rated as High because it could be used to gain
local access to elevated capabilities, which are not normally accessible to a
third-party application.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3912 | [A-30202481](https://android.googlesource.com/platform/frameworks/base/%2B/6c049120c2d749f0c0289d822ec7d0aa692f55c5) | High | All Nexus | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Jul 17, 2016 |

### Elevation of privilege vulnerability in Telephony

An elevation of privilege vulnerability in the Telephony component could enable
a local malicious application to execute arbitrary code within the context of a
privileged process. This issue is rated as High because it could be used to gain
local access to elevated capabilities, which are not normally accessible to a
third-party application.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3914 | [A-30481342](https://android.googlesource.com/platform/packages/providers/TelephonyProvider/%2B/3a3a5d145d380deef2d5b7c3150864cd04be397f) | High | All Nexus | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Jul 28, 2016 |

### Elevation of privilege vulnerability in Camera service

An elevation of privilege vulnerability in the Camera service could enable a
local malicious application to execute arbitrary code within the context of a
privileged process. This issue is rated as High because it could be used to gain
local access to elevated capabilities, which are not normally accessible to a
third-party application.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3915 | [A-30591838](https://android.googlesource.com/platform/system/media/%2B/e9e44f797742f52996ebf307740dad58c28fd9b5) | High | All Nexus | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Aug 1, 2016 |
| CVE-2016-3916 | [A-30741779](https://android.googlesource.com/platform/system/media/%2B/8e7a2b4d13bff03973dbad2bfb88a04296140433) | High | All Nexus | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Aug 2, 2016 |

### Elevation of privilege vulnerability in fingerprint login

An elevation of privilege vulnerability during fingerprint login could enable a
malicious device owner to login as a different user account on the device. This
issue is rated as High due to the possibility of a lockscreen bypass.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3917 | [A-30744668](https://android.googlesource.com/platform/frameworks/base/%2B/f5334952131afa835dd3f08601fb3bced7b781cd) | High | All Nexus | 6.0.1, 7.0 | Aug 5, 2016 |

### Information disclosure vulnerability in AOSP Mail

An information disclosure vulnerability in AOSP Mail could enable a local
malicious application to bypass operating system protections that isolate
application data from other applications. This issue is rated as High because it
could be used to access data without permission.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3918 | [A-30745403](https://android.googlesource.com/platform/packages/apps/Email/%2B/6b2b0bd7c771c698f11d7be89c2c57c8722c7454) | High | All Nexus | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Aug 5, 2016 |

### Denial of service vulnerability in Wi-Fi

A denial of service vulnerability in Wi-Fi could enable a local proximate
attacker to create a hotspot and cause a device reboot. This issue is rated as
High due to the possibility of a temporary remote denial of service.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3882 | [A-29464811](https://android.googlesource.com/platform/frameworks/opt/net/wifi/%2B/35a86eef3c0eef760f7e61c52a343327ba601630) | High | All Nexus | 6.0, 6.0.1, 7.0 | Jun 17, 2016 |

### Denial of service vulnerability in GPS

A denial of service vulnerability in the GPS component could enable a remote
attacker to cause a device hang or reboot. This issue is rated as High due to
the possibility of a temporary remote denial of service.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-5348 | [A-29555864](https://android.googlesource.com/platform/frameworks/base/%2B/218b813d5bc2d7d3952ea1861c38b4aa944ac59b) | High | All Nexus | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Jun 20, 2016 |

### Denial of service vulnerability in Mediaserver

A denial of service vulnerability in Mediaserver could enable an attacker to use
a specially crafted file to cause a device hang or reboot. This issue is rated
as High due to the possibility of remote denial of service.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3920 | [A-30744884](https://android.googlesource.com/platform/frameworks/av/%2B/6d0249be2275fd4086783f259f4e2c54722a7c55) | High | All Nexus | 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Aug 5, 2016 |

### Elevation of privilege vulnerability in Framework Listener

An elevation of privilege vulnerability in Framework Listener could enable a
local malicious application to execute arbitrary code within the context of a
privileged process. This issue is rated as Moderate because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3921 | [A-29831647](https://android.googlesource.com/platform/system/core/%2B/771ab014c24a682b32990da08e87e2f0ab765bd2) | Moderate | All Nexus | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Jun 25, 2016 |

### Elevation of privilege vulnerability in Telephony

An elevation of privilege vulnerability in Telephony could enable a local
malicious application to execute arbitrary code in the context of a privileged
process. This issue is rated as Moderate because it first requires compromising
a privileged process.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3922 | [A-30202619](https://android.googlesource.com/platform/hardware/ril/%2B/95610818918f6f11fe7d23aca1380e6c0fac2af0) | Moderate | All Nexus | 6.0, 6.0.1, 7.0 | Jul 17, 2016 |

### Elevation of privilege vulnerability in Accessibility services

An elevation of privilege vulnerability in the Accessibility services could
enable a local malicious application to generate unexpected touch events on the
device that could lead to applications accepting permission dialogs without the
user’s explicit consent. This issue is rated as Moderate because it is a local
bypass of user interaction requirements that would normally require either user
initiation or user permission.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3923 | [A-30647115](https://android.googlesource.com/platform/frameworks/base/%2B/5f256310187b4ff2f13a7abb9afed9126facd7bc) | Moderate | All Nexus | 7.0 | Google internal |

### Information disclosure vulnerability in Mediaserver

An information disclosure vulnerability in Mediaserver could enable a local
malicious application to access data outside of its permission levels. This
issue is rated as Moderate because it could be used to access sensitive data
without permission.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3924 | [A-30204301](https://android.googlesource.com/platform/frameworks/av/%2B/c894aa36be535886a8e5ff02cdbcd07dd24618f6) | Moderate | All Nexus | 4.4.4, 5.0.2, 5.1.1, 6.0, 6.0.1, 7.0 | Jul 18, 2016 |

### Denial of service vulnerability in Wi-Fi

A denial of service vulnerability in the Wi-Fi service could enable a local
malicious application to prevent Wi-Fi calling. This issue is rated as Moderate
due to the possibility of a denial of service to application functionality.

| CVE | References | Severity | Updated Nexus devices | Updated AOSP versions | Date reported |
| CVE-2016-3925 | [A-30230534](https://android.googlesource.com/platform/frameworks/opt/net/wifi/%2B/c2905409c20c8692d4396b8531b09e7ec81fa3fb) | Moderate | All Nexus | 6.0, 6.0.1, 7.0 | Google internal |

## 2016-10-05 security patch level—Vulnerability details

In the sections below, we provide details for each of the security
vulnerabilities that apply to the 2016-10-05 patch level. There is a description of
the issue, a severity rationale, and a table with the CVE, associated
references, severity, updated Nexus devices, updated AOSP versions (where
applicable), and date reported. When available, we will link the public change
that addressed the issue to the bug ID, like the AOSP change list. When multiple
changes relate to a single bug, additional references are linked to numbers
following the bug ID.

### Remote code execution vulnerability in kernel ASN.1 decoder

An elevation of privilege vulnerability in the kernel ASN.1 decoder could enable
a local malicious application to execute arbitrary code within the context of
the kernel. This issue is rated as Critical due to the possibility of a local
permanent device compromise, which may require reflashing the operating system
to repair the device.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-0758 | A-29814470 [Upstream kernel](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=23c8a812dc3c621009e4f0e5342aa4e2ede1ceaa) | Critical | Nexus 5X, Nexus 6P | May 12, 2016 |

### Remote code execution vulnerability in kernel networking subsystem

A remote code execution vulnerability in the kernel networking subsystem could
enable a remote attacker to execute arbitrary code within the context of the
kernel. This issue is rated as Critical due to the possibility of a local
permanent device compromise, which may require reflashing the operating system
to repair the device.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-7117 | A-30515201 [Upstream kernel](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=34b88a68f26a75e4fded796f1a49c40f82234b7d) | Critical | All Nexus | Google internal |

### Elevation of privilege vulnerability in MediaTek video driver

An elevation of privilege vulnerability in the MediaTek video driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as Critical due to the possibility of
a local permanent device compromise, which may require reflashing the operating
system to repair the device.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-3928 | A-30019362\* M-ALPS02829384 | Critical | None | Jul 6, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in kernel shared memory driver

An elevation of privilege vulnerability in the kernel shared memory driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as Critical due to the possibility of
a local permanent device compromise, which may require reflashing the operating
system to repair the device.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-5340 | A-30652312 [QC-CR#1008948](https://source.codeaurora.org/quic/la//kernel/msm-3.10/commit/?id=06e51489061e5473b4e2035c79dcf7c27a6f75a6) | Critical | Nexus 5, Nexus 5X, Nexus 6, Nexus 6P, Android One | Jul 26, 2016 |

### Vulnerabilities in Qualcomm components

The table below contains security vulnerabilities affecting Qualcomm components
and are described in further detail in the Qualcomm AMSS March 2016 and
Qualcomm AMSS April 2016 security bulletins.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-3926 | A-28823953\* | Critical | Nexus 5, Nexus 5X, Nexus 6, Nexus 6P | Qualcomm internal |
| CVE-2016-3927 | A-28823244\* | Critical | Nexus 5X, Nexus 6P | Qualcomm internal |
| CVE-2016-3929 | A-28823675\* | High | Nexus 5X, Nexus 6P | Qualcomm internal |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in Qualcomm networking component

An elevation of privilege vulnerability in the Qualcomm networking component
could enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-2059 | A-27045580 [QC-CR#974577](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=9e8bdd63f7011dff5523ea435433834b3702398d) | High | Nexus 5, Nexus 5X, Nexus 6, Nexus 6P, Android One | Feb 4, 2016 |

### Elevation of privilege vulnerability in NVIDIA MMC test driver

An elevation of privilege vulnerability in the NVIDIA MMC test driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-3930 | A-28760138\* N-CVE-2016-3930 | High | Nexus 9 | May 12, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in Qualcomm QSEE Communicator driver

An elevation of privilege vulnerability in the Qualcomm QSEE
Communicator driver could enable a local malicious application to
execute arbitrary code within the context of the kernel. This issue is rated as
High because it first requires compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-3931 | A-29157595 [QC-CR#1036418](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=e80b88323f9ff0bb0e545f209eec08ec56fca816) | High | Nexus 5X, Nexus 6, Nexus 6P, Android One | Jun 4, 2016 |

### Elevation of privilege vulnerability in Mediaserver

An elevation of privilege vulnerability in Mediaserver could enable a local
malicious application to execute arbitrary code within the context of a
privileged process. This issue is rated as High because it could be used to gain
local access to elevated capabilities, which are not normally accessible to a
third-party application.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-3932 | A-29161895 M-ALPS02770870 | High | None | Jun 6, 2016 |
| CVE-2016-3933 | A-29421408\* N-CVE-2016-3933 | High | Nexus 9, Pixel C | Jun 14, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in Qualcomm camera driver

An elevation of privilege vulnerability in the Qualcomm camera driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-3903 | A-29513227 [QC-CR#1040857](https://source.codeaurora.org/quic/la/kernel/msm-3.10/commit/?id=b8874573428e8ce024f57c6242d662fcca5e5d55) | High | Nexus 5, Nexus 5X, Nexus 6, Nexus 6P, Android One | Jun 20, 2016 |
| CVE-2016-3934 | A-30102557 [QC-CR#789704](https://source.codeaurora.org/quic/la/kernel/msm-3.10/commit/?id=27fbeb6b025d5d46ccb0497cbed4c6e78ed1c5cc) | High | Nexus 5, Nexus 5X, Nexus 6, Nexus 6P, Android One | Jul 12, 2016 |

### Elevation of privilege vulnerability in Qualcomm sound driver

An elevation of privilege vulnerability in the Qualcomm sound driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2015-8951 | A-30142668 [QC-CR#948902](https://source.codeaurora.org/quic/la/kernel/msm-3.10/commit/?h=APSS.FSM.3.0&id=ccff36b07bfc49efc77b9f1b55ed2bf0900b1d5b) QC-CR#948902 | High | Nexus 5X, Nexus 6P, Android One | Jun 20, 2016 |

### Elevation of privilege vulnerability in Qualcomm crypto engine driver

An elevation of privilege vulnerability in the Qualcomm cryptographic engine
driver could enable a local malicious application to execute arbitrary code
within the context of the kernel. This issue is rated as High because it first
requires compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-3901 | A-29999161 [QC-CR#1046434](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=5f69ccf3b011c1d14a1b1b00dbaacf74307c9132) | High | Nexus 5X, Nexus 6, Nexus 6P, Android One | Jul 6, 2016 |
| CVE-2016-3935 | A-29999665 [QC-CR#1046507](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=5f69ccf3b011c1d14a1b1b00dbaacf74307c9132) | High | Nexus 5X, Nexus 6, Nexus 6P, Android One | Jul 6, 2016 |

### Elevation of privilege vulnerability in MediaTek video driver

An elevation of privilege vulnerability in the MediaTek video driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-3936 | A-30019037\* M-ALPS02829568 | High | None | Jul 6, 2016 |
| CVE-2016-3937 | A-30030994\* M-ALPS02834874 | High | None | Jul 7, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in Qualcomm video driver

An elevation of privilege vulnerability in the Qualcomm video driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-3938 | A-30019716 [QC-CR#1049232](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=467c81f9736b1ebc8d4ba70f9221bba02425ca10) | High | Nexus 5X, Nexus 6, Nexus 6P, Android One | Jul 7, 2016 |
| CVE-2016-3939 | A-30874196 [QC-CR#1001224](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=e0bb18771d6ca71db2c2a61226827059be3fa424) | High | Nexus 5X, Nexus 6, Nexus 6P, Android One | Aug 15, 2016 |

### Elevation of privilege vulnerability in Synaptics touchscreen driver

An elevation of privilege vulnerability in the Synaptics touchscreen driver
could enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-3940 | A-30141991\* | High | Nexus 6P, Android One | Jul 12, 2016 |
| CVE-2016-6672 | A-30537088\* | High | Nexus 5X | Jul 31, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in NVIDIA camera driver

An elevation of privilege vulnerability in the NVIDIA camera driver could enable
a local malicious application to execute arbitrary code within the context of
the kernel. This issue is rated as High because it first requires compromising a
privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-6673 | A-30204201\* N-CVE-2016-6673 | High | Nexus 9 | Jul 17, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in system\_server

An elevation of privilege vulnerability in system\_server could enable a local
malicious application to execute arbitrary code within the context of a
privileged process. This issue is rated as High because it could be used to gain
local access to elevated capabilities, which are not normally accessible to a
third-party application.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-6674 | A-30445380\* | High | All Nexus | Jul 26, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in Qualcomm Wi-Fi driver

An elevation of privilege vulnerability in the Qualcomm Wi-Fi driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-3905 | A-28061823 [QC-CR#1001449](https://source.codeaurora.org/quic/la/platform/vendor/qcom-opensource/wlan/qcacld-2.0/commit/?id=b5112838eb91b71eded4b5ee37338535784e0aef) | High | Nexus 5X | Google internal |
| CVE-2016-6675 | A-30873776 [QC-CR#1000861](https://source.codeaurora.org/quic/la//platform/vendor/qcom-opensource/wlan/prima/commit/?id=1353fa0bd0c78427f3ae7d9bde7daeb75bd01d09) | High | Nexus 5X, Android One | Aug 15, 2016 |
| CVE-2016-6676 | A-30874066 [QC-CR#1000853](https://source.codeaurora.org/quic/la//platform/vendor/qcom-opensource/wlan/qcacld-2.0/commit/?id=6ba9136879232442a182996427e5c88e5a7512a8) | High | Nexus 5X, Android One | Aug 15, 2016 |
| CVE-2016-5342 | A-30878283 [QC-CR#1032174](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=579e796cb089324c55e0e689a180575ba81b23d9) | High | Android One | Aug 15, 2016 |

### Elevation of privilege vulnerability in kernel performance subsystem

An elevation of privilege vulnerability in the kernel performance subsystem
could enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as High because it first requires
compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2015-8955 | A-29508816 [Upstream kernel](https://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/commit/?id=8fff105e13041e49b82f92eef034f363a6b1c071) | High | Nexus 5X, Nexus 6P, Pixel C, Android One | Google internal |

### Information disclosure vulnerability in kernel ION subsystem

An information disclosure vulnerability in the kernel ION subsystem could enable
a local malicious application to access data outside of its permission levels.
This issue is rated as High because it could be used to access sensitive data
without explicit user permission.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2015-8950 | A-29795245 [QC-CR#1041735](https://source.codeaurora.org/quic/la/kernel/msm-3.10/commit/?id=6e2c437a2d0a85d90d3db85a7471f99764f7bbf8) | High | Nexus 5, Nexus 5X, Nexus 6, Nexus 6P | May 12, 2016 |

### Information disclosure vulnerability in NVIDIA GPU driver

An information disclosure vulnerability in the NVIDIA GPU driver could enable a
local malicious application to access data outside of its permission levels.
This issue is rated as High because it first requires compromising a
privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-6677 | A-30259955\* N-CVE-2016-6677 | High | Nexus 9 | Jul 19, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Elevation of privilege vulnerability in Qualcomm character driver

An elevation of privilege vulnerability in the Qualcomm character driver could
enable a local malicious application to execute arbitrary code within the
context of the kernel. This issue is rated as Moderate because it first requires
compromising a privileged process, and the vulnerable code is currently not
accessible.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2015-0572 | A-29156684 [QC-CR#848489](https://source.codeaurora.org/quic/la/kernel/msm-3.10/commit/?id=34ad3d34fbff11b8e1210b9da0dac937fb956b61) | Moderate | Nexus 5X, Nexus 6P | May 28, 2016 |

### Information disclosure vulnerability in Qualcomm sound driver

An information disclosure vulnerability in the Qualcomm sound driver could
enable a local malicious application to access data outside of its permission
levels. This issue is rated as Moderate because it first requires compromising a
privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-3860 | A-29323142 [QC-CR#1038127](https://source.codeaurora.org/quic/la/kernel/msm-3.18/diff/sound/soc/msm/qdsp6v2/audio_calibration.c?id=528976f54be246ec93a71ac53aa4faf3e3791c48) | Moderate | Nexus 5X, Nexus 6P, Android One | Jun 13, 2016 |

### Information disclosure vulnerability in Motorola USBNet driver

An information disclosure vulnerability in the Motorola USBNet driver could
enable a local malicious application to access data outside of its permission
levels. This issue is rated as Moderate because it first requires compromising a
privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-6678 | A-29914434\* | Moderate | Nexus 6 | Jun 30, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Information disclosure vulnerability in Qualcomm components

An information disclosure vulnerability in Qualcomm components, including the
sound driver, IPA driver and Wi-Fi driver could enable a local malicious
application to access data outside of its permission levels. This issue is rated
as Moderate because it first requires compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-6679 | A-29915601 [QC-CR#1000913](https://source.codeaurora.org/quic/la/platform/vendor/qcom-opensource/wlan/prima/commit/?id=d39345f0abc309959d831d09fcbf1619cc0ae0f5) [[2](https://source.codeaurora.org/quic/la/platform/vendor/qcom-opensource/wlan/qcacld-2.0/commit/?id=f081695446679aa44baa0d00940ea18455eeb4c5)] | Moderate | Nexus 5X, Android One | Jun 30, 2016 |
| CVE-2016-3902 | A-29953313\* [QC-CR#1044072](https://source.codeaurora.org/quic/la//kernel/msm-3.10/commit/?id=2fca425d781572393fbe51abe2e27a932d24a768) | Moderate | Nexus 5X, Nexus 6P, | Jul 2, 2016 |
| CVE-2016-6680 | A-29982678\* [QC-CR#1048052](https://source.codeaurora.org/quic/la/platform/vendor/qcom-opensource/wlan/qcacld-2.0/commit/?id=2f2fa073b95d4700de88c0f7558b4a18c13ac552) | Moderate | Nexus 5X, Android One | Jul 3, 2016 |
| CVE-2016-6681 | A-30152182 [QC-CR#1049521](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=0950fbd39ff189497f1b6115825c210e3eeaf395) | Moderate | Nexus 5X, Nexus 6P, Android One | Jul 14, 2016 |
| CVE-2016-6682 | A-30152501 [QC-CR#1049615](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=0950fbd39ff189497f1b6115825c210e3eeaf395) | Moderate | Nexus 5X, Nexus 6P, Android One | Jul 14, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Information disclosure vulnerability in kernel components

An information disclosure vulnerability in kernel components, including
Binder, Sync, Bluetooth, and Sound driver, could enable a local malicious
application to access data outside of its permission levels. This issue is
rated as Moderate because it first requires compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-6683 | A-30143283\* | Moderate | All Nexus | Jul 13, 2016 |
| CVE-2016-6684 | A-30148243\* | Moderate | Nexus 5, Nexus 5X, Nexus 6, Nexus 6P, Nexus 9, Nexus Player, Android One | Jul 13, 2016 |
| CVE-2015-8956 | A-30149612\* | Moderate | Nexus 5, Nexus 6P, Android One | Jul 14, 2016 |
| CVE-2016-6685 | A-30402628\* | Moderate | Nexus 6P | Jul 25, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Information disclosure vulnerability in NVIDIA profiler

An information disclosure vulnerability in the NVIDIA profiler could enable a
local malicious application to access data outside of its permission levels.
This issue is rated as Moderate because it first requires compromising a
privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-6686 | A-30163101\* N-CVE-2016-6686 | Moderate | Nexus 9 | Jul 15, 2016 |
| CVE-2016-6687 | A-30162222\* N-CVE-2016-6687 | Moderate | Nexus 9 | Jul 15, 2016 |
| CVE-2016-6688 | A-30593080\* N-CVE-2016-6688 | Moderate | Nexus 9 | Aug 2, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Information disclosure vulnerability in kernel

An information disclosure vulnerability in Binder could enable a local malicious
application to access data outside of its permission levels. This issue is rated
as Moderate because it first requires compromising a privileged process.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-6689 | A-30768347\* | Moderate | All Nexus | Aug 9, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Denial of service vulnerability in kernel networking subsystem

A denial of service vulnerability in the kernel networking subsystem could
enable an attacker to block access to TCP connections and cause a temporary
remote denial of service. This issue is rated as Moderate because cellular
services are still available and the device is still usable.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-5696 | A-30809774 [Upstream kernel](http://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=75ff39ccc1bd5d3c455b6822ab09e533c551f758) | Moderate | Nexus 5X, Nexus 6, Nexus 6P, Nexus 9, Nexus Player, Pixel C, Android One | Jul 12, 2016 |

### Denial of service vulnerability in kernel sound driver

A denial of service vulnerability in the kernel could allow a local malicious
application to cause a device reboot. This issue is rated as Low because it is a
temporary denial of service.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-6690 | A-28838221\* | Low | Nexus 5, Nexus 5X, Nexus 6, Nexus 6P, Nexus Player | May 18, 2016 |

\* The patch for this issue is not publicly available. The update is contained in
the latest binary drivers for Nexus devices available from the
[Google Developer
site](https://developers.google.com/android/nexus/drivers).

### Vulnerabilities in Qualcomm components

The table below contains a list of security vulnerabilities that affect Qualcomm
components.

| CVE | References | Severity | Updated Nexus devices | Date reported |
| CVE-2016-6691 | [QC-CR#978452](https://source.codeaurora.org/quic/la//platform/frameworks/opt/net/wifi/commit/?id=343f123c396b2a97fc7cce396cd5d99365cb9131) | High | None | Jul 2016 |
| CVE-2016-6692 | [QC-CR#1004933](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=0f0e7047d39f9fb3a1a7f389918ff79cdb4a50b3) | High | None | Aug 2016 |
| CVE-2016-6693 | [QC-CR#1027585](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=ac328eb631fa74a63d5d2583e6bfeeb5a7a2df65) | High | None | Aug 2016 |
| CVE-2016-6694 | [QC-CR#1033525](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=961e38553aae8ba9b1af77c7a49acfbb7b0b6f62) | High | None | Aug 2016 |
| CVE-2016-6695 | [QC-CR#1033540](https://source.codeaurora.org/quic/la//kernel/msm-3.18/commit/?id=c319c2b0926d1ea5edb4d0778d88bd3ce37c4b95) | High | None | Aug 2016 |
| CVE-2016-6696 | [QC-CR#1041130](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=c3c9341bfdf93606983f893a086cb33a487306e5) | High | None | Aug 2016 |
| CVE-2016-5344 | [QC-CR#993650](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=64e15c36d6c1c57dc2d95a3f163bc830a469fc20) | Moderate | None | Aug 2016 |
| CVE-2016-5343 | [QC-CR#1010081](https://source.codeaurora.org/quic/la/kernel/msm-3.18/commit/?id=6927e2e0af4dcac357be86ba563c9ae12354bb08) | Moderate | None | Aug 2016 |

## Common Questions and Answers

This section answers common questions that may occur after reading this
bulletin.

**1. How do I determine if my device is updated to address these issues?**

Security Patch Levels of 2016-10-01 or later address all issues associated with
the 2016-10-01 security patch string level. Security Patch Levels of 2016-10-05
or later address all issues associated with the 2016-10-05 security patch string
level. Refer to the [help center](https://support.google.com/nexus/answer/4457705) for
instructions on how to check the security patch level. Device manufacturers that
include these updates should set the patch string level to:
[ro.build.version.security\_patch]:[2016-10-01] or
[ro.build.version.security\_patch]:[2016-10-05].

**2. Why does this bulletin have two security patch level
strings?**

This bulletin has two security patch level strings so that Android partners have
the flexibility to fix a subset of vulnerabilities that are similar across all
Android devices more quickly. Android partners are encouraged to fix all issues
in this bulletin and use the latest security patch level string.

Devices that use the security patch level of October 5, 2016 or newer must
include all applicable patches in this (and previous) security bulletins.

Devices that use the October 1, 2016 security patch level must include all
issues associated with that security patch level, as well as fixes for all
issues reported in previous security bulletins.

**3. How do I determine which Nexus devices are affected by each
issue?**

In the [2016-10-01](#2016-10-01-details) and
[2016-10-05](#2016-10-05-details)
security vulnerability details sections, each table has an *Updated Nexus
devices* column that covers the range of affected Nexus devices updated for
each issue. This column has a few options:

* **All Nexus devices**: If an issue affects all Nexus devices,
  the table will have “All Nexus” in the *Updated Nexus devices* column.
  “All Nexus” encapsulates the following [supported
  devices](https://support.google.com/nexus/answer/4457705#nexus_devices): Nexus 5, Nexus 5X, Nexus 6, Nexus 6P, Nexus 9,
  Android One, Nexus Player and Pixel C.
* **Some Nexus devices**: If an issue doesn’t affect all Nexus
  devices, the affected Nexus devices are listed in the *Updated Nexus
  devices* column.
* **No Nexus devices**: If no Nexus devices running Android 7.0
  are affected by the issue, the table will have “None” in the *Updated Nexus
  devices* column.

**4. What do the entries in the references column map to?**

Entries under the *References* column of the vulnerability details table
may contain a prefix identifying the organization to which the reference value
belongs. These prefixes map as follows:

| Prefix | Reference |
| --- | --- |
| A- | Android bug ID |
| QC- | Qualcomm reference number |
| M- | MediaTek reference number |
| N- | NVIDIA reference number |
| B- | Broadcom reference number |

## Revisions

* October 03, 2016: Bulletin published.
* October 04, 2016: Bulletin revised to include AOSP links and update
  attributions for CVE-2016-3920, CVE-2016-6693, CVE-2016-6694,
  CVE-2016-6695, and CVE-2016-6696.

Content and code samples on this page are subject to the licenses described in the [Content License](/license). Java and OpenJDK are trademarks or registered trademarks of Oracle and/or its affiliates.

Last updated 2024-08-26 UTC.

[[["Easy to understand","easyToUnderstand","thumb-up"],["Solved my problem","solvedMyProblem","thumb-up"],["Other","otherUp","thumb-up"]],[["Missing the information I need","missingTheInformationINeed","thumb-down"],["Too complicated / too many steps","tooComplicatedTooManySteps","thumb-down"],["Out of date","outOfDate","thumb-down"],["Samples / code issue","samplesCodeIssue","thumb-down"],["Other","otherDown","thumb-down"]],["Last updated 2024-08-26 UTC."],[],[]]

* ### Build

  + [Android repository](//android.googlesource.com)
  + [Requirements](/source/requirements)
  + [Downloading](/source/downloading)
  + [Preview binaries](//developers.google.com/android/blobs-preview/)
  + [Factory images](//developers.google.com/android/images/)
  + [Driver binaries](//developers.google.com/android/drivers/)
* ### Connect

  + [@Android on Twitter](//twitter.com/Android/)
  + [@AndroidDev on Twitter](//twitter.com/AndroidDev/)
  + [Android Blog](//blog.google/products/android/)
  + [Google Security Blog](//security.googleblog.com)
  + [Platform on Google Groups](//groups.google.com/forum/?fromgroups#!forum/android-platform/)
  + [Building on Google Groups](//groups.google.com/forum/?fromgroups#!forum/android-building/)
  + [Porting on Google Groups](//groups.google.com/forum/?fromgroups#!forum/android-porting/)
* ### Get help

  + [Android Help Center](//support.google.com/android/)
  + [Pixel Help Center](//support.google.com/pixelphone/)
  + [www.android.com](//www.android.com)
  + [Google Mobile Services](//www.android.com/gms/)
  + [Stack Overflow](//stackoverflow.com/questions/tagged/android-source/)
  + [Issue Tracker](//issuetracker.google.com/issues?q=status:open%20componentid:190923)

* [About Android](/source/)
* [Community](/source/community)
* [Legal](/legal)
* [License](/license)
* [Privacy](//policies.google.com/privacy)
* [Site feedback](//issuetracker.google.com/issues/new?component=191476)
* Manage cookies

* English
* Deutsch
* Español
* Español – América Latina
* Français
* Indonesia
* Italiano
* Polski
* Português
* Português – Brasil
* Tiếng Việt
* Türkçe
* Русский
* עברית
* العربيّة
* فارسی
* हिंदी
* বাংলা
* ภาษาไทย
* 中文 – 简体
* 中文 – 繁體
* 日本語
* 한국어



=== Content from www.kernel.org_9d59be9d_20250125_181953.html ===
commit fa253b2c80b4eb25785e98541842996cbd36ef83
Author: Greg Kroah-Hartman
Date: Wed May 13 05:14:53 2015 -0700
Linux 4.0.3
commit 68b0aa6b3998439c60ad47d2dae15fb039970802
Author: K. Y. Srinivasan
Date: Thu Mar 19 08:11:34 2015 -0700
Drivers: hv: vmbus: Don't wait after requesting offers
commit 73cffdb65e679b98893f484063462c045adcf212 upstream.
Don't wait after sending request for offers to the host. This wait is
unnecessary and simply adds 5 seconds to the boot time.
Signed-off-by: K. Y. Srinivasan
Cc:
Signed-off-by: Greg Kroah-Hartman
commit 2e15dca25908efb782320658fdd741fd9e04adc2
Author: Thomas Hebb
Date: Thu Apr 16 12:47:18 2015 -0700
hfsplus: don't store special "osx" xattr prefix on-disk
commit db579e76f06e78de011b2cb7e028740a82f5558c upstream.
On Mac OS X, HFS+ extended attributes are not namespaced. Since we want
to be compatible with OS X filesystems and yet still support the Linux
namespacing system, the hfsplus driver implements a special "osx"
namespace that is reported for any attribute that is not namespaced
on-disk. However, the current code for getting and setting these
unprefixed attributes is broken.
hfsplus\_osx\_setattr() and hfsplus\_osx\_getattr() are passed names that have
already had their "osx." prefixes stripped by the generic functions. The
functions first, quite correctly, check those names to make sure that they
aren't prefixed with a known namespace, which would allow namespace access
restrictions to be bypassed. However, the functions then prepend "osx."
to the name they're given before passing it on to hfsplus\_getattr() and
hfsplus\_setattr(). Not only does this cause the "osx." prefix to be
stored on-disk, defeating its purpose, it also breaks the check for the
special "com.apple.FinderInfo" attribute, which is reported for all files,
and as a consequence makes some userspace applications (e.g. GNU patch)
fail even when extended attributes are not otherwise in use.
There are five commits which have touched this particular code:
127e5f5ae51e ("hfsplus: rework functionality of getting, setting and deleting of extended attributes")
b168fff72109 ("hfsplus: use xattr handlers for removexattr")
bf29e886b242 ("hfsplus: correct usage of HFSPLUS\_ATTR\_MAX\_STRLEN for non-English attributes")
fcacbd95e121 ("fs/hfsplus: move xattr\_name allocation in hfsplus\_getxattr()")
ec1bbd346f18 ("fs/hfsplus: move xattr\_name allocation in hfsplus\_setxattr()")
The first commit creates the functions to begin with. The namespace is
prepended by the original code, which I believe was correct at the time,
since hfsplus\_?etattr() stripped the prefix if found. The second commit
removes this behavior from hfsplus\_?etattr() and appears to have been
intended to also remove the prefixing from hfsplus\_osx\_?etattr().
However, what it actually does is remove a necessary strncpy() call
completely, breaking the osx namespace entirely. The third commit re-adds
the strncpy() call as it was originally, but doesn't mention it in its
commit message. The final two commits refactor the code and don't affect
its functionality.
This commit does what b168fff attempted to do (prevent the prefix from
being added), but does it properly, instead of passing in an empty buffer
(which is what b168fff actually did).
Fixes: b168fff72109 ("hfsplus: use xattr handlers for removexattr")
Signed-off-by: Thomas Hebb
Cc: Hin-Tak Leung
Cc: Sergei Antonov
Cc: Anton Altaparmakov
Cc: Fabian Frederick
Cc: Christian Kujau
Cc: Christoph Hellwig
Cc: Al Viro
Cc: Viacheslav Dubeyko
Cc:
Signed-off-by: Andrew Morton
Signed-off-by: Linus Torvalds
Signed-off-by: Thomas Hebb
Signed-off-by: Greg Kroah-Hartman
commit e8ade718d9cfc32056ec78215b047aa764995b85
Author: Christian König
Date: Mon Apr 27 17:04:36 2015 +0200
drm/radeon: check new address before removing old one
commit c29c0876ec05d51a93508a39b90b92c29ba6423d upstream.
Otherwise the change isn't atomic.
Signed-off-by: Christian König
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit e488a25194bbbb0e4e472cf30932db3e467dc3a9
Author: Christian König
Date: Mon Apr 27 17:04:35 2015 +0200
drm/radeon: reset BOs address after clearing it.
commit 48afbd70ac7b6aa62e8d452091023941d8085f8a upstream.
Otherwise it is possible that we will have page table corruption
if we change a BOs address multiple times.
Signed-off-by: Christian König
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 01c74f735d649f061287190a289bbbee000bd2a2
Author: Christian König
Date: Mon Apr 27 17:04:34 2015 +0200
drm/radeon: fix lockup when BOs aren't part of the VM on release
commit 26d4d129b6042197b4cbc8341c0618f99231af2f upstream.
If we unmap BOs before releasing them them the intervall tree locks
up because we try to remove an entry not inside the tree.
Based on a patch from Michel Dänzer.
Signed-off-by: Christian König
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 621f855f262c9a0bb366c64068c87bd6b90c4833
Author: Alex Deucher
Date: Mon Apr 27 09:51:43 2015 -0400
drm/radeon: add SI DPM quirk for Sapphire R9 270 Dual-X 2G GDDR5
commit cd17e02ff4db58ec32d35cf331c705d295779930 upstream.
Seems to have problems with high mclks.
bug:
https://bugs.freedesktop.org/show\_bug.cgi?id=76490
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit d5c3b64b9618214a5443c57c64511ab5fa599cec
Author: Alex Deucher
Date: Sun Apr 19 12:01:00 2015 -0400
drm/radeon: adjust pll when audio is not enabled
commit 7fe04d6fa824ccea704535a597dc417c8687f990 upstream.
Fixes display problems with some monitors when audio
is not enabled.
Bugs:
https://bugs.freedesktop.org/show\_bug.cgi?id=89505
https://bugzilla.kernel.org/show\_bug.cgi?id=94171
Plus several reports on IRC.
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 125ebdda23c3d9d4473e8b2591bc0fdaec931daa
Author: Michel Dänzer
Date: Thu Apr 16 11:17:27 2015 +0900
drm/radeon: Use drm\_calloc\_ab for CS relocs
commit b421ed15d2c3039eb724680e4de1e4b2bd196a9a upstream.
The number of relocs is passed in by userspace and can be large. It has
been observed to cause kcalloc failures in the wild.
Reviewed-by: Christian König
Signed-off-by: Michel Dänzer
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 3020ad2c93aa8ba98b0b7dbbad997500308400e6
Author: Alex Deucher
Date: Tue Apr 7 10:20:49 2015 -0400
drm/radeon: only enable audio streams if the monitor supports it
commit 38aef1549b18539eaecd804383a6ccb6588a9ce1 upstream.
Selectively enable which packets we send based on monitor caps.
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 016a255b7835ee7e49a3eba3c14ba0bc0221a4f8
Author: Alex Deucher
Date: Tue Apr 7 09:52:42 2015 -0400
drm/radeon: only mark audio as connected if the monitor supports it (v3)
commit 0f55db36d49d45b80eff0c0a2a498766016f458b upstream.
Otherwise the driver may try and send audio which may confuse the
monitor.
v2: set pin to NULL if no audio
v3: avoid crash with analog encoders
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 29bf371b4aa8f45013427bbe1fdb5f75ffe5953d
Author: Alex Deucher
Date: Tue Mar 31 11:43:12 2015 -0400
drm/radeon/audio: don't enable packets until the end
commit 362ff251390f3d1f8fe94666f4fc4e5876381114 upstream.
Don't enable the audio and avi infoframes and audio stream
until all the state is set up.
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 3bf0211e685a88b924c75333dc25e55c4c819ee1
Author: Alex Deucher
Date: Tue Mar 31 11:38:48 2015 -0400
drm/radeon: drop dce6\_dp\_enable
commit 12428327bbd1180b5d8ef83fdf9482b878d0502a upstream.
It's mostly duplicated with evergreen\_dp\_enable. This
is a prerequisite for fix implemented in another patch.
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit a93368559fa795c69cbcc066ae94810736307fff
Author: Alex Deucher
Date: Tue Mar 31 10:33:05 2015 -0400
drm/radeon: fix ordering of AVI packet setup
commit 304f07e9c8d302cf3183248cbabb40598eb5b732 upstream.
Set the line first, then enable the stream. May fix
pink line problems on some displays.
Signed-off-by: Alex Deucher
Signed-off-by: Greg Kroah-Hartman
commit 1c6653fd6462e2b0862ca26e5cf358f416594547
Author: Christoph Hellwig
Date: Thu Apr 23 09:48:49 2015 +0200
3w-sas: fix command completion race
commit 579d69bc1fd56d5af5761969aa529d1d1c188300 upstream.
The 3w-sas driver needs to tear down the dma mappings before returning
the command to the midlayer, as there is no guarantee the sglist and
count are valid after that point. Also remove the dma mapping helpers
which have another inherent race due to the request\_id index.
Signed-off-by: Christoph Hellwig
Reported-by: Torsten Luettgert
Tested-by: Bernd Kardatzki
Acked-by: Adam Radford
Signed-off-by: James Bottomley
Signed-off-by: Greg Kroah-Hartman
commit 457eb9e105684d84b74df66c6365321af1907586
Author: Christoph Hellwig
Date: Thu Apr 23 09:48:51 2015 +0200
3w-9xxx: fix command completion race
commit 118c855b5623f3e2e6204f02623d88c09e0c34de upstream.
The 3w-9xxx driver needs to tear down the dma mappings before returning
the command to the midlayer, as there is no guarantee the sglist and
count are valid after that point. Also remove the dma mapping helpers
which have another inherent race due to the request\_id index.
Signed-off-by: Christoph Hellwig
Acked-by: Adam Radford
Signed-off-by: James Bottomley
Signed-off-by: Greg Kroah-Hartman
commit 65dabc13bb2707d7a04be0b6ed031442f7b18a87
Author: Christoph Hellwig
Date: Thu Apr 23 09:48:50 2015 +0200
3w-xxxx: fix command completion race
commit 9cd9554615cba14f0877cc9972a6537ad2bdde61 upstream.
The 3w-xxxx driver needs to tear down the dma mappings before returning
the command to the midlayer, as there is no guarantee the sglist and
count are valid after that point. Also remove the dma mapping helpers
which have another inherent race due to the request\_id index.
Signed-off-by: Christoph Hellwig
Acked-by: Adam Radford
Signed-off-by: James Bottomley
Signed-off-by: Greg Kroah-Hartman
commit df22bc3a3c1acd21baf018ce8405094df306e46f
Author: Mike Christie
Date: Mon Apr 20 22:42:24 2015 -0500
SCSI: add 1024 max sectors black list flag
commit 35e9a9f93994d7f7d12afa41169c7ba05513721b upstream.
This works around a issue with qnap iscsi targets not handling large IOs
very well.
The target returns:
VPD INQUIRY: Block limits page (SBC)
Maximum compare and write length: 1 blocks
Optimal transfer length granularity: 1 blocks
Maximum transfer length: 4294967295 blocks
Optimal transfer length: 4294967295 blocks
Maximum prefetch, xdread, xdwrite transfer length: 0 blocks
Maximum unmap LBA count: 8388607
Maximum unmap block descriptor count: 1
Optimal unmap granularity: 16383
Unmap granularity alignment valid: 0
Unmap granularity alignment: 0
Maximum write same length: 0xffffffff blocks
Maximum atomic transfer length: 0
Atomic alignment: 0
Atomic transfer length granularity: 0
and it is \*sometimes\* able to handle at least one IO of size up to 8 MB. We
have seen in traces where it will sometimes work, but other times it
looks like it fails and it looks like it returns failures if we send
multiple large IOs sometimes. Also it looks like it can return 2 different
errors. It will sometimes send iscsi reject errors indicating out of
resources or it will send invalid cdb illegal requests check conditions.
And then when it sends iscsi rejects it does not seem to handle retries
when there are command sequence holes, so I could not just add code to
try and gracefully handle that error code.
The problem is that we do not have a good contact for the company,
so we are not able to determine under what conditions it returns
which error and why it sometimes works.
So, this patch just adds a new black list flag to set targets like this to
the old max safe sectors of 1024. The max\_hw\_sectors changes added in 3.19
caused this regression, so I also ccing stable.
Reported-by: Christian Hesse
Signed-off-by: Mike Christie
Reviewed-by: Christoph Hellwig
Signed-off-by: James Bottomley
Signed-off-by: Greg Kroah-Hartman
commit 1754083fb992e955ef22fc07de639a41a5ca3c7a
Author: Davide Italiano
Date: Sat May 2 23:21:15 2015 -0400
ext4: move check under lock scope to close a race.
commit 280227a75b56ab5d35854f3a77ef74a7ad56a203 upstream.
fallocate() checks that the file is extent-based and returns
EOPNOTSUPP in case is not. Other tasks can convert from and to
indirect and extent so it's safe to check only after grabbing
the inode mutex.
Signed-off-by: Davide Italiano
Signed-off-by: Theodore Ts'o
Signed-off-by: Greg Kroah-Hartman
commit ce879f96b58445d098969a1b329deae67b61d514
Author: Lukas Czerner
Date: Sat May 2 21:36:55 2015 -0400
ext4: fix data corruption caused by unwritten and delayed extents
commit d2dc317d564a46dfc683978a2e5a4f91434e9711 upstream.
Currently it is possible to lose whole file system block worth of data
when we hit the specific interaction with unwritten and delayed extents
in status extent tree.
The problem is that when we insert delayed extent into extent status
tree the only way to get rid of it is when we write out delayed buffer.
However there is a limitation in the extent status tree implementation
so that when inserting unwritten extent should there be even a single
delayed block the whole unwritten extent would be marked as delayed.
At this point, there is no way to get rid of the delayed extents,
because there are no delayed buffers to write out. So when a we write
into said unwritten extent we will convert it to written, but it still
remains delayed.
When we try to write into that block later ext4\_da\_map\_blocks() will set
the buffer new and delayed and map it to invalid block which causes
the rest of the block to be zeroed loosing already written data.
For now we can fix this by simply not allowing to set delayed status on
written extent in the extent status tree. Also add WARN\_ON() to make
sure that we notice if this happens in the future.
This problem can be easily reproduced by running the following xfs\_io.
xfs\_io -f -c "pwrite -S 0xaa 4096 2048" \
-c "falloc 0 131072" \
-c "pwrite -S 0xbb 65536 2048" \
-c "fsync" /mnt/test/fff
echo 3 > /proc/sys/vm/drop\_caches
xfs\_io -c "pwrite -S 0xdd 67584 2048" /mnt/test/fff
This can be theoretically also reproduced by at random by running fsx,
but it's not very reliable, though on machines with bigger page size
(like ppc) this can be seen more often (especially xfstest generic/127)
Signed-off-by: Lukas Czerner
Signed-off-by: Theodore Ts'o
Signed-off-by: Greg Kroah-Hartman
commit ae28c480a79f6aa10d1286cdf4b7982f1cadf6c0
Author: Hans de Goede
Date: Tue Apr 21 11:20:32 2015 +0200
uas: Set max\_sectors\_240 quirk for ASM1053 devices
commit 8e779c6c4a398763c21371fe40f649206041dc1e upstream.
Testing has shown that ASM1053 devices do not work properly with transfers
larger than 240 sectors, so set max\_sectors to 240 on these.
Reported-by: Steve Bangert
Signed-off-by: Hans de Goede
Tested-by: Steve Bangert
Acked-by: Alan Stern
Signed-off-by: Greg Kroah-Hartman
commit f59aa94d0049794968867d843e5be50af2e7a470
Author: Hans de Goede
Date: Tue Apr 21 11:20:31 2015 +0200
uas: Add US\_FL\_MAX\_SECTORS\_240 flag
commit ee136af4a064c2f61e2025873584d2c7ec93f4ae upstream.
The usb-storage driver sets max\_sectors = 240 in its scsi-host template,
for uas we do not want to do that for all devices, but testing has shown
that some devices need it.
This commit adds a US\_FL\_MAX\_SECTORS\_240 flag for such devices, and
implements support for it in uas.c, while at it it also adds support
for US\_FL\_MAX\_SECTORS\_64 to uas.c.
Signed-off-by: Hans de Goede
Acked-by: Alan Stern
Signed-off-by: Greg Kroah-Hartman
commit f946179b11ff23653763870a801793383bb244b6
Author: Hans de Goede
Date: Tue Apr 21 11:20:30 2015 +0200
uas: Allow uas\_use\_uas\_driver to return usb-storage flags
commit a5011d44f0e1117a6db14b19b57c51f8be5673a0 upstream.
uas\_use\_uas\_driver may set some US\_FL\_foo flags during detection, currently
these are stored in a local variable and then throw away, but these may be
of interest to the caller, so add an extra parameter to (optionally) return
the detected flags, and use this in the uas driver.
Signed-off-by: Hans de Goede
Acked-by: Alan Stern
Signed-off-by: Greg Kroah-Hartman
commit 11748b94d987911b2c6aa9f2a5a2a24dc571fc2f
Author: Ilya Dryomov
Date: Sat Apr 25 15:56:15 2015 +0300
rbd: end I/O the entire obj\_request on error
commit 082a75dad84d79d1c15ea9e50f31cb4bb4fa7fd6 upstream.
When we end I/O struct request with error, we need to pass
obj\_request->length as @nr\_bytes so that the entire obj\_request worth
of bytes is completed. Otherwise block layer ends up confused and we
trip on
rbd\_assert(more ^ (which == img\_request->obj\_request\_count));
in rbd\_img\_obj\_callback() due to more being true no matter what. We
already do it in most cases but we are missing some, in particular
those where we don't even get a chance to submit any obj\_requests, due
to an early -ENOMEM for example.
A number of obj\_request->xferred assignments seem to be redundant but
I haven't touched any of obj\_request->xferred stuff to keep this small
and isolated.
Cc: Alex Elder
Reported-by: Shawn Edwards
Reviewed-by: Sage Weil
Signed-off-by: Ilya Dryomov
Signed-off-by: Greg Kroah-Hartman
commit 8aff8de536ecedc80b0171aa120cdd839d024add
Author: Ludovic Desroches
Date: Thu Apr 16 16:58:12 2015 +0200
tty/serial: at91: maxburst was missing for dma transfers
commit a8d4e01637902311c5643b69a5c80e2805f04054 upstream.
Maxburst was not set when doing the dma slave configuration. This value
is checked by the recently introduced xdmac. It causes an error when
doing the slave configuration and so prevents from using dma.
Signed-off-by: Ludovic Desroches
Acked-by: Nicolas Ferre
Signed-off-by: Greg Kroah-Hartman
commit bc9b5647bbf2c0818f729a87eeab983ba7714e84
Author: Chris Bainbridge
Date: Wed Apr 22 16:40:21 2015 +0100
ACPI / SBS: Enable battery manager when present
commit 61f8ff693923e4b19748b0e8287b99778f2661c7 upstream.
Commit 9faf6136ff46 (ACPI / SBS: Disable smart battery manager on
Apple) introduced a regression disabling the SBS battery manager.
The battery manager should be marked as present when
acpi\_manager\_get\_info() returns 0.
Fixes: 9faf6136ff46 (ACPI / SBS: Disable smart battery manager on Apple)
Signed-off-by: Chris Bainbridge
Signed-off-by: Rafael J. Wysocki
Signed-off-by: Greg Kroah-Hartman
commit 8ab261bcddc4010cb395e659a58b67d854be7ede
Author: Omar Sandoval
Date: Fri Apr 10 14:20:40 2015 -0700
btrfs: unlock i\_mutex after attempting to delete subvolume during send
commit 909e26dce3f7600f5e293ac0522c28790a0c8c9c upstream.
Whenever the check for a send in progress introduced in commit
521e0546c970 (btrfs: protect snapshots from deleting during send) is
hit, we return without unlocking inode->i\_mutex. This is easy to see
with lockdep enabled:
[ +0.000059] ================================================
[ +0.000028] [ BUG: lock held when returning to user space! ]
[ +0.000029] 4.0.0-rc5-00096-g3c435c1 #93 Not tainted
[ +0.000026] ------------------------------------------------
[ +0.000029] btrfs/211 is leaving the kernel with locks still held!
[ +0.000029] 1 lock held by btrfs/211:
[ +0.000023] #0: (&type->i\_mutex\_dir\_key){+.+.+.}, at: [] btrfs\_ioctl\_snap\_destroy+0x2df/0x7a0
Make sure we unlock it in the error path.
Reviewed-by: Filipe Manana
Reviewed-by: David Sterba
Signed-off-by: Omar Sandoval
Signed-off-by: Chris Mason
Signed-off-by: Greg Kroah-Hartman
commit bbc8c97c8e7fb76e07478e19e96a7fa6e7421bec
Author: Bard Liao
Date: Tue Apr 28 11:27:39 2015 +0800
ASoC: rt5677: fixed wrong DMIC ref clock
commit 60a8d62b8497c23eb3d48149af7e55dac2dd83a2 upstream.
DMIC clock source is not from codec system clock directly. it is
generated from the division of system clock. And it should be 256 \*
sample rate of AIF1.
Signed-off-by: Bard Liao
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 04f1f52606395df0bf8c9ce6198869803d2f45e9
Author: Charles Keepax
Date: Wed Apr 22 13:58:47 2015 +0100
ASoC: dapm: Enable autodisable on SOC\_DAPM\_SINGLE\_TLV\_AUTODISABLE
commit a2d97723cb3a7741af81868427b36bba274b681b upstream.
Correct small copy and paste error where autodisable was not being
enabled for the SOC\_DAPM\_SINGLE\_TLV\_AUTODISABLE control.
Signed-off-by: Charles Keepax
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit b6898f06f84ea6db7944c6c9f91ebeb13a18457b
Author: Bard Liao
Date: Fri Apr 24 15:19:29 2015 +0800
ASoC: rt5677: add register patch for PLL
commit 74d6ea52aeef0236242221c6eff6d892565c5a92 upstream.
The PLL output will be unstable in some cases. We can fix it by
setting some registers.
Signed-off-by: Bard Liao
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 99d705238af572efa5f8834d0d8255d5bdc5d6eb
Author: Wei Yongjun
Date: Thu Apr 16 20:17:46 2015 +0800
ASoC: tfa9879: Fix return value check in tfa9879\_i2c\_probe()
commit 427ced4b203dfea4f08b1298cd1f88e19039fca4 upstream.
In case of error, the function devm\_kzalloc() returns NULL
not ERR\_PTR(). The IS\_ERR() test in the return value check
should be replaced with NULL test.
Signed-off-by: Wei Yongjun
Acked-by: Peter Rosin
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 9041f7e0f35402d0f2527ec952523e4086b83322
Author: Wei Yongjun
Date: Thu Apr 16 20:18:02 2015 +0800
ASoC: samsung: s3c24xx-i2s: Fix return value check in s3c24xx\_iis\_dev\_probe()
commit c479163a1b6ab424786fbcd9225b4e3c1c58eb0b upstream.
In case of error, the function devm\_ioremap\_resource() returns
ERR\_PTR() and never returns NULL. The NULL test in the return
value check should be replaced with IS\_ERR().
Signed-off-by: Wei Yongjun
Reviewed-by: Krzysztof Kozlowski
Signed-off-by: Mark Brown
Signed-off-by: Greg Kroah-Hartman
commit 1fe4f5a891aaec75cebb6e763557c8c694c6260f
Author: Li Jun
Date: Sun Apr 12 17:51:02 2015 +0800
usb: chipidea: otg: remove mutex unlock and lock while stop and start role
commit a5a356cee89f86ff86cc3ce24136ca1f802c1bf1 upstream.
Wrongly release mutex lock during otg\_statemachine may result in re-enter
otg\_statemachine, which is not allowed, we should do next state transtition
after previous one completed.
Fixes: 826cfe751f3e ("usb: chipidea: add OTG fsm operation functions implementation")
Signed-off-by: Li Jun
Signed-off-by: Peter Chen
Signed-off-by: Greg Kroah-Hartman
commit 84b38028077d61c7058ede49ab7d115c563dc9ba
Author: Dean Nelson
Date: Wed Apr 29 16:09:18 2015 +0100
arm64: add missing PAGE\_ALIGN() to \_\_dma\_free()
commit 2cff98b99c469880ce830cbcde015b53b67e0a7b upstream.
\_\_dma\_alloc() does a PAGE\_ALIGN() on the passed in size argument before
doing anything else. \_\_dma\_free() does not. And because it doesn't, it is
possible to leak memory should size not be an integer multiple of PAGE\_SIZE.
The solution is to add a PAGE\_ALIGN() to \_\_dma\_free() like is done in
\_\_dma\_alloc().
Additionally, this patch removes a redundant PAGE\_ALIGN() from
\_\_dma\_alloc\_coherent(), since \_\_dma\_alloc\_coherent() can only be called
from \_\_dma\_alloc(), which already does a PAGE\_ALIGN() before the call.
Acked-by: Catalin Marinas
Signed-off-by: Dean Nelson
Signed-off-by: Will Deacon
Signed-off-by: Greg Kroah-Hartman
commit 41e45229f0a528a17ea7e36e9164b04fd071b751
Author: Marek Szyprowski
Date: Thu Apr 23 12:46:16 2015 +0100
arm64: dma-mapping: always clear allocated buffers
commit 6829e274a623187c24f7cfc0e3d35f25d087fcc5 upstream.
Buffers allocated by dma\_alloc\_coherent() are always zeroed on Alpha,
ARM (32bit), MIPS, PowerPC, x86/x86\_64 and probably other architectures.
It turned out that some drivers rely on this 'feature'. Allocated buffer
might be also exposed to userspace with dma\_mmap() call, so clearing it
is desired from security point of view to avoid exposing random memory
to userspace. This patch unifies dma\_alloc\_coherent() behavior on ARM64
architecture with other implementations by unconditionally zeroing
allocated buffer.
Signed-off-by: Marek Szyprowski
Signed-off-by: Will Deacon
Signed-off-by: Greg Kroah-Hartman
commit 9b19c50bff3747129752fa7883cf9a8a7d9e96b2
Author: Michal Simek
Date: Mon Apr 13 16:34:21 2015 +0200
serial: xilinx: Use platform\_get\_irq to get irq description structure
commit 5c90c07b98c02198d9777a7c4f3047b0a94bf7ed upstream.
For systems with CONFIG\_SERIAL\_OF\_PLATFORM=y and device\_type =
"serial"; property in DT of\_serial.c driver maps and unmaps IRQ (because
driver probe fails). Then a driver is called but irq mapping is not
created that's why driver is failing again in again on request\_irq().
Based on this use platform\_get\_irq() instead of platform\_get\_resource()
which is doing irq\_desc allocation and driver itself can request IRQ.
Fix both xilinx serial drivers in the tree.
Signed-off-by: Michal Simek
Signed-off-by: Greg Kroah-Hartman
commit 7128fcca1ba0f1598504627f8426ea8568be7ed6
Author: Michal Simek
Date: Tue Apr 14 12:03:09 2015 +0200
serial: of-serial: Remove device\_type = "serial" registration
commit 6befa9d883385c580369a2cc9e53fbf329771f6d upstream.
Do not probe all serial drivers by of\_serial.c which are using
device\_type = "serial"; property. Only drivers which have valid
compatible strings listed in the driver should be probed.
When PORT\_UNKNOWN is setup probe will fail anyway.
Arnd quotation about driver historical background:
"when I wrote that driver initially, the idea was that it would
get used as a stub to hook up all other serial drivers but after
that, the common code learned to create platform devices from DT"
This patch fix the problem with on the system with xilinx\_uartps and
16550a where of\_serial failed to register for xilinx\_uartps and because
of irq\_dispose\_mapping() removed irq\_desc. Then when xilinx\_uartps was asking
for irq with request\_irq() EINVAL is returned.
Signed-off-by: Michal Simek
Acked-by: Arnd Bergmann
Signed-off-by: Greg Kroah-Hartman
commit 612e47f0f62e163b1cccc23f935b8200bbe87c74
Author: Quentin Casasnovas
Date: Tue Apr 14 11:25:43 2015 +0200
cdc-acm: prevent infinite loop when parsing CDC headers.
commit 0d3bba0287d4e284c3ec7d3397e81eec920d5e7e upstream.
Phil and I found out a problem with commit:
7e860a6e7aa6 ("cdc-acm: add sanity checks")
It added some sanity checks to ignore potential garbage in CDC headers but
also introduced a potential infinite loop. This can happen at the first
loop iteration (elength = 0 in that case) if the description isn't a
DT\_CS\_INTERFACE or later if 'buffer[0]' is zero.
It should also be noted that the wrong length was being added to 'buffer'
in case 'buffer[1]' was not a DT\_CS\_INTERFACE descriptor, since elength was
assigned after that check in the loop.
A specially crafted USB device could be used to trigger this infinite loop.
Fixes: 7e860a6e7aa6 ("cdc-acm: add sanity checks")
Signed-off-by: Phil Turnbull
Signed-off-by: Quentin Casasnovas
CC: Sergei Shtylyov
CC: Oliver Neukum
CC: Adam Lee
Signed-off-by: Greg Kroah-Hartman
commit 950cc6975a335370c01c2404c55375f5580fde8f
Author: Takashi Iwai
Date: Mon Apr 27 10:40:45 2015 +0200
ALSA: hda - Add mute-LED mode control to Thinkpad
commit 7290006d8c0900c56d8c58428134f02c35109d17 upstream.
This patch adds the missing flag to enable "Mute-LED Mode" mixer enum
ctl for Thinkpads that have also the software mute-LED control.
Reported-and-tested-by: Pali Rohár
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 53e5604bbe12fddc549d837190409f25ecb1393a
Author: Takashi Iwai
Date: Mon Apr 27 10:36:11 2015 +0200
ALSA: hda - Fix mute-LED fixed mode
commit ee52e56e7b12834476cd0031c5986254ba1b6317 upstream.
The mute-LED mode control has the fixed on/off states that are
supposed to remain on/off regardless of the master switch. However,
this doesn't work actually because the vmaster hook is called in the
vmaster code itself.
This patch fixes it by calling the hook indirectly after checking the
mute LED mode.
Reported-and-tested-by: Pali Rohár
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 0feb7f1ffb2a7e68a66398edfc913fac275c08ef
Author: Peter Zubaj
Date: Tue Apr 28 21:57:29 2015 +0200
ALSA: emu10k1: Emu10k2 32 bit DMA mode
commit 7241ea558c6715501e777396b5fc312c372e11d9 upstream.
Looks like audigy emu10k2 (probably emu10k1 - sb live too) support two
modes for DMA. Second mode is useful for 64 bit os with more then 2 GB
of ram (fixes problems with big soundfont loading)
1) 32MB from 2 GB address space using 8192 pages (used now as default)
2) 16MB from 4 GB address space using 4096 pages
Mode is set using HCFG\_EXPANDED\_MEM flag in HCFG register.
Also format of emu10k2 page table is then different.
Signed-off-by: Peter Zubaj
Tested-by: Takashi Iwai
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit ef7d6d70e1ad3c235e6d33000178c2aab9d3355f
Author: Takashi Iwai
Date: Mon Apr 27 13:00:09 2015 +0200
ALSA: emu10k1: Fix card shortname string buffer overflow
commit d02260824e2cad626fb2a9d62e27006d34b6dedc upstream.
Some models provide too long string for the shortname that has 32bytes
including the terminator, and it results in a non-terminated string
exposed to the user-space. This isn't too critical, though, as the
string is stopped at the succeeding longname string.
This patch fixes such entries by dropping "SB" prefix (it's enough to
fit within 32 bytes, so far). Meanwhile, it also changes strcpy()
with strlcpy() to make sure that this kind of problem won't happen in
future, too.
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 0592aec34f12afc5f0e1676bdd6b238aa2f0ef71
Author: Takashi Iwai
Date: Tue Apr 28 17:11:44 2015 +0200
ALSA: emux: Fix mutex deadlock in OSS emulation
commit 1c94e65c668f44d2c69ae7e7fc268ab3268fba3e upstream.
The OSS emulation in synth-emux helper has a potential AB/BA deadlock
at the simultaneous closing and opening:
close ->
snd\_seq\_release() ->
sne\_seq\_free\_client() ->
snd\_seq\_delete\_all\_ports(): takes client->ports\_mutex ->
port\_delete() ->
snd\_emux\_unuse(): takes emux->register\_mutex
open ->
snd\_seq\_oss\_open() ->
snd\_emux\_open\_seq\_oss(): takes emux->register\_mutex ->
snd\_seq\_event\_port\_attach() ->
snd\_seq\_create\_port(): takes client->ports\_mutex
This patch addresses the deadlock by reducing the rance taking
emux->register\_mutex in snd\_emux\_open\_seq\_oss(). The lock is needed
for the refcount handling, so move it locally. The calls in
emux\_seq.c are already with the mutex, thus they are replaced with the
version without mutex lock/unlock.
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit 7327ee488670217fdf31787fe03ebbafd96b796e
Author: Takashi Iwai
Date: Mon Apr 27 14:50:39 2015 +0200
ALSA: emux: Fix mutex deadlock at unloading
commit 07b0e5d49d227e3950cb13a3e8caf248ef2a310e upstream.
The emux-synth driver has a possible AB/BA mutex deadlock at unloading
the emu10k1 driver:
snd\_emux\_free() ->
snd\_emux\_detach\_seq(): mutex\_lock(&emu->register\_mutex) ->
snd\_seq\_delete\_kernel\_client() ->
snd\_seq\_free\_client(): mutex\_lock(&register\_mutex)
snd\_seq\_release() ->
snd\_seq\_free\_client(): mutex\_lock(&register\_mutex) ->
snd\_seq\_delete\_all\_ports() ->
snd\_emux\_unuse(): mutex\_lock(&emu->register\_mutex)
Basically snd\_emux\_detach\_seq() doesn't need a protection of
emu->register\_mutex as it's already being unregistered. So, we can
get rid of this for avoiding the deadlock.
Signed-off-by: Takashi Iwai
Signed-off-by: Greg Kroah-Hartman
commit cf30fb9b72fbf301f397d6cbdc28ac69686e4798
Author: Markos Chandras
Date: Thu Apr 2 14:42:52 2015 +0100
MIPS: Makefile: Fix MIPS ASE detection code
Commit 5306a5450824691e27d68f711758515debedeeac upstream.
Commit 32098ec7bcba ("MIPS: Makefile: Move the ASEs checks after
setting the core's CFLAGS") re-arranged the MIPS ASE detection code
and also added the current cflags to the detection logic. However,
this introduced a few bugs. First of all, the mips-cflags should not
be quoted since that ends up being passed as a string to subsequent
commands leading to broken detection from the cc-option-\* tools.
Moreover, in order to avoid duplicating the cflags-y because of how
cc-option works, we rework the logic so we pass only those cflags which
are needed by the selected ASE. Finally, fix some typos resulting in MSA
not being detected correctly.
Signed-off-by: Markos Chandras
Fixes: Commit 32098ec7bcba ("MIPS: Makefile: Move the ASEs checks after setting the core's CFLAGS")
Cc: Maciej W. Rozycki
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/9661/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit ad6fac7f92dfbda856a6780b7e69138c3dce5a4b
Author: Markos Chandras
Date: Thu Feb 26 11:11:30 2015 +0000
MIPS: asm: elf: Set O32 default FPU flags
Commit 48f8eaee3f59848809644507fc47363b37e54450 upstream.
Set good default FPU flags (FR0) for O32 binaries similar to what the
kernel does for the N64/N32 ones. This also fixes a regression
introduced in commit 46490b572544 ("MIPS: kernel: elf: Improve the
overall ABI and FPU mode checks") when MIPS\_O32\_FP64\_SUPPORT is
disabled. In that case, the mips\_set\_personality\_fp() did not set the
FPU mode at all because it assumed that the FPU mode was already set
properly. That led to O32 userland problems.
Signed-off-by: Markos Chandras
Reported-by: Mans Rullgard
Fixes: 46490b572544 ("MIPS: kernel: elf: Improve the overall ABI and FPU mode checks")
Tested-by: Mans Rullgard
Tested-by: Aaro Koskinen
Cc: Matthew Fortune
Cc: Paul Burton
Cc: linux-mips@linux-mips.org
Patchwork: http://patchwork.linux-mips.org/patch/9344/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 1935bb1a6db0f5fe9f0073d185e7e230a3bd927e
Author: Rafał Miłecki
Date: Wed Apr 1 16:01:02 2015 +0200
MIPS: BCM47XX: Fix detecting Microsoft MN-700 & Asus WL500G
Commit 96f7c21363e0e0d19f3471f54a719ed06d708513 upstream.
Since the day of adding this code it was broken. We were iterating over
a wrong array and checking for wrong NVRAM entry.
Signed-off-by: Rafał Miłecki
Cc: linux-mips@linux-mips.org
Cc: Hauke Mehrtens
Patchwork: https://patchwork.linux-mips.org/patch/9654/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 54cca1007c3c0e6e6f2802ae9890f7d7c9cf9809
Author: Markos Chandras
Date: Tue Nov 25 09:15:45 2014 +0000
MIPS: Kconfig: Disable SMP/CPS for 64-bit
Commit 6ca716f2e5571d25a3899c6c5c91ff72ea6d6f5e upstream.
A 64-bit build for Malta produces far too many build problems
when SMP/CPS is selected. Moreover, there is currently no 64-bit
product with SMP/CPS so we disable SMP/CPS when building for
64-bit until it is properly supported.
Signed-off-by: Markos Chandras
Cc: Paul Burton
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/8573/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 5bd1f3713cd795cdd750b869f98674b40748ef92
Author: Niklas Cassel
Date: Thu Jan 15 16:41:13 2015 +0100
MIPS: smp-cps: cpu\_set FPU mask if FPU present
Commit 90db024f140d0d6ad960cc5f090e3c8ed890ca55 upstream.
If we have an FPU, enroll ourselves in the FPU-full mask.
Matching the MT\_SMP and CMP implementations of smp\_setup.
Signed-off-by: Niklas Cassel
Cc: paul.burton@imgtec.com
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/8948/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit b9b1a2af5a6aa82944f80c03152ddeecc86d91a8
Author: John Crispin
Date: Mon Feb 23 06:17:33 2015 +0100
MIPS: ralink: add missing symbol for RALINK\_ILL\_ACC
Commit a7b7aad383c5dd9221a06e378197350dd27c1163 upstream.
A driver was added in commit 5433acd81e87 ("MIPS: ralink: add illegal access
driver") without the Kconfig section being added. Fix this by adding the symbol
to the Kconfig file.
Signed-off-by: John Crispin
Reported-by: Paul Bolle
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/9299/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit b2243b7069f8d09f881a7d7a68aa46ef0794c49e
Author: John Crispin
Date: Mon Feb 23 06:17:32 2015 +0100
MIPS: ralink: Fix bad config symbol in PCI makefile.
Commit 93a7de8819a661d06eb11f4de3d6888b9a842b30 upstream.
A wrong symbol is referenced by commit 187c26ddf0b2 ("MIPS: ralink: add rt2880
pci driver"). Fix this by changing it to the correct symbol.
Signed-off-by: John Crispin
Reported-by: Paul Bolle
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/9298/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit d0e3a82ab8f57ccceb175ca1e57449796ac97c04
Author: Adrien Schildknecht
Date: Wed Mar 25 16:31:42 2015 +0100
SSB: fix Kconfig dependencies
Commit 179fa46fb666c8f2aa2bbb1f3114d5d826d59d3d upstream.
The commit 21400f252a97 ("MIPS: BCM47XX: Make ssb init NVRAM instead of
bcm47xx polling it") introduces a dependency to SSB\_SFLASH but did not
add it to the Kconfig.
drivers/ssb/driver\_mipscore.c:216:36: error: 'struct ssb\_mipscore' has no
member named 'sflash'
struct ssb\_sflash \*sflash = &mcore->sflash;
^
drivers/ssb/driver\_mipscore.c:249:12: error: dereferencing pointer to
incomplete type
if (sflash->present) {
^
Signed-off-by: Adrien Schildknecht
Cc: m@bues.ch
Cc: zajec5@gmail.com
Cc: linux-mips@linux-mips.org
Cc: linux-kernel@vger.kernel.org
Patchwork: https://patchwork.linux-mips.org/patch/9598/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit d6e20b40aea718da033444bda27aedce16f124af
Author: Ralf Baechle
Date: Wed Mar 25 13:18:27 2015 +0100
Revert "MIPS: Avoid pipeline stalls on some MIPS32R2 cores."
Commit 9eaffa84a8a46adab065c983401fc9d5949c958f upstream.
For a discussion, see http://patchwork.linux-mips.org/patch/9539/.
This reverts commit 625c0a21700bdb90844d926a1508a17a77e369c9.
Signed-off-by: Greg Kroah-Hartman
commit 52871e452e3814d87db2fd148de49e3db09c902c
Author: Ralf Baechle
Date: Wed Mar 25 13:21:51 2015 +0100
MIPS: Octeon: Delete override of cpu\_has\_mips\_r2\_exec\_hazard.
Commit f05ff43355e6997c18f82ddcee370a6e5f8643ce upstream.
This is no longer needed with the fixed, new and improved definition
of cpu\_has\_mips\_r2\_exec\_hazard in .
For a discussion, see http://patchwork.linux-mips.org/patch/9539/.
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit fb756fbe5affdb7984b8074aaa5fc98252dcff65
Author: Ralf Baechle
Date: Wed Mar 25 13:14:16 2015 +0100
MIPS: Fix cpu\_has\_mips\_r2\_exec\_hazard.
Commit 9cdf30bd3bac697fc533988f44a117434a858f69 upstream.
Returns a non-zero value if the current processor implementation requires
an IHB instruction to deal with an instruction hazard as per MIPS R2
architecture specification, zero otherwise.
For a discussion, see http://patchwork.linux-mips.org/patch/9539/.
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit cd2acc35751a7a88aa03b426e472dc0843b6404f
Author: Markos Chandras
Date: Tue Mar 3 18:48:49 2015 +0000
MIPS: kernel: entry.S: Set correct ISA level for mips\_ihb
Commit aebac99384f7a6d83a3dcd42bf2481eed2670083 upstream.
Commit 6ebb496ffc7e("MIPS: kernel: entry.S: Add MIPS R6 related
definitions") added the MIPSR6 definition but it did not update the
ISA level of the actual assembly code so a pre-MIPSR6 jr.hb instruction
was generated instead. Fix this by using the MISP\_ISA\_LEVEL\_RAW macro.
Signed-off-by: Markos Chandras
Fixes: 6ebb496ffc7e("MIPS: kernel: entry.S: Add MIPS R6 related definitions")
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/9386/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 44e6ee09bec252201891304cff339fb5bcfe4fc5
Author: Markos Chandras
Date: Tue Mar 3 18:48:48 2015 +0000
MIPS: asm: spinlock: Fix addiu instruction for R10000\_LLSC\_WAR case
Commit 518222161d4a2d3f3b2700098563b62383f83878 upstream.
Commit 5753762cbd1c("MIPS: asm: spinlock: Replace "sub" instruction
with "addiu") replaced the "sub" instruction with addiu but it did
not update the immediate value in the R10000\_LLSC\_WAR case.
Signed-off-by: Markos Chandras
Fixes: 5753762cbd1c("MIPS: asm: spinlock: Replace "sub" instruction with "addiu"")
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/9385/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit a521000f016321b61a2f610135cfbfa6166c79e1
Author: Markos Chandras
Date: Tue Mar 3 18:48:47 2015 +0000
MIPS: r4kcache: Use correct base register for MIPS R6 cache flushes
Commit f6b39ae6f4d6ee835bb16e452086121aa010f1a7 upstream.
Commit 934c79231c1b("MIPS: asm: r4kcache: Add MIPS R6 cache unroll
functions") added support for MIPS R6 cache flushes but it used the
wrong base address register to perform the flushes so the same lines
were flushed over and over. Moreover, replace the "addiu" instructions
with LONG\_ADDIU so the correct base address is calculated for 64-bit
cores.
Signed-off-by: Markos Chandras
Fixes: 934c79231c1b("MIPS: asm: r4kcache: Add MIPS R6 cache unroll functions")
Cc: linux-mips@linux-mips.org
Reviewed-by: Maciej W. Rozycki
Patchwork: https://patchwork.linux-mips.org/patch/9384/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 9f88c253c63b1755ffa7f239992ba4bd0b25cb8b
Author: Markos Chandras
Date: Tue Mar 10 12:30:56 2015 +0000
MIPS: Kconfig: Fix typo for the r2-to-r6 emulator kernel parameter
Commit 07edf0d46c07568d08feee95bbaa38c71b084150 upstream.
Commit b0a668fb2038 ("MIPS: kernel: mips-r2-to-r6-emul: Add R2 emulator
for MIPS R6") added the mips r2-to-r6 emulator so an R2 userland can be
executed on R6 kernels. This needed both build time and runtime support.
The runtime support needed the "mipsr2emu" kernel parameter instead of
the "mipsr2emul" listed in the Kconfig help message.
Signed-off-by: Markos Chandras
Fixes: b0a668fb2038 ("MIPS: kernel: mips-r2-to-r6-emul: Add R2 emulator for MIPS R6")
Cc: linux-mips@linux-mips.org
Cc: Markos Chandras
Patchwork: https://patchwork.linux-mips.org/patch/9504/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 0fc7602c67ce7516066c670f16bf975ee10f9ea0
Author: Ganesan Ramalingam
Date: Wed Jan 7 16:58:26 2015 +0530
MIPS: Netlogic: Fix for SATA PHY init
Commit 872cd4c2c617bb3a203ebe18115fd0c697112b87 upstream.
Update to the SATA PHY initialization. This is needed for SATA detection
to succeed in all configurations.
Signed-off-by: Ganesan Ramalingam
Signed-off-by: Jayachandran C
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/8886/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 86e0c1fc644db365c94350c90ebae3cbb2b6fba2
Author: Aaro Koskinen
Date: Sun Mar 22 17:55:39 2015 +0200
MIPS: OCTEON: fix PCI interrupt mapping for D-Link DSR-1000N
Commit b083518c52ab75a345d668ca7fa41e530df08d51 upstream.
Fix PCI interrupt mapping for DSR1000N. This will get the PCI slot
interrupts working. The mapping is based on D-Link GPL tarball.
Signed-off-by: Aaro Koskinen
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/9593/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit a77f685d0dfb58b193f56dc8d7b8d75c28eb13a5
Author: Alexander Sverdlin
Date: Wed Mar 18 14:05:21 2015 +0100
MIPS: Octeon: Remove udelay() causing huge IRQ latency
Commit 73bf3c2a500b2db8ac966469591196bf55afb409 upstream.
udelay() in PCI/PCIe read/write callbacks cause 30ms IRQ latency on Octeon
platforms because these operations are called from PCI\_OP\_READ() and
PCI\_OP\_WRITE() under raw\_spin\_lock\_irqsave().
Signed-off-by: Alexander Sverdlin
Cc: linux-mips@linux-mips.org
Cc: David Daney
Cc: Rob Herring
Cc: Jiri Kosina
Cc: Randy Dunlap
Cc: Masanari Iida
Cc: Bjorn Helgaas
Cc: Mathias
Patchwork: https://patchwork.linux-mips.org/patch/9576/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 0e4fe74fd691b72bbc15c0b601073a18fa3b71ba
Author: Lars Persson
Date: Thu Feb 26 14:16:03 2015 +0100
MIPS: Fix race condition in lazy cache flushing.
Commit 4d46a67a3eb827ccf1125959936fd51ba318dabc upstream.
The lazy cache flushing implemented in the MIPS kernel suffers from a
race condition that is exposed by do\_set\_pte() in mm/memory.c.
A pre-condition is a file-system that writes to the page from the CPU
in its readpage method and then calls flush\_dcache\_page(). One example
is ubifs. Another pre-condition is that the dcache flush is postponed
in \_\_flush\_dcache\_page().
Upon a page fault for an executable mapping not existing in the
page-cache, the following will happen:
1. Write to the page
2. flush\_dcache\_page
3. flush\_icache\_page
4. set\_pte\_at
5. update\_mmu\_cache (commits the flush of a dcache-dirty page)
Between steps 4 and 5 another thread can hit the same page and it will
encounter a valid pte. Because the data still is in the L1 dcache the CPU
will fetch stale data from L2 into the icache and execute garbage.
This fix moves the commit of the cache flush to step 3 to close the
race window. It also reduces the amount of flushes on non-executable
mappings because we never enter \_\_flush\_dcache\_page() for non-aliasing
CPUs.
Regressions can occur in drivers that mistakenly relies on the
flush\_dcache\_page() in get\_user\_pages() for DMA operations.
[ralf@linux-mips.org: Folded in patch 9346 to fix highmem issue.]
Signed-off-by: Lars Persson
Cc: linux-mips@linux-mips.org
Cc: paul.burton@imgtec.com
Cc: linux-kernel@vger.kernel.org
Patchwork: https://patchwork.linux-mips.org/patch/9346/
Patchwork: https://patchwork.linux-mips.org/patch/9738/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 82d1e92be93be323cf53c26664e00326827ffaf4
Author: Lars Persson
Date: Thu Feb 26 14:16:02 2015 +0100
Revert "MIPS: Remove race window in page fault handling"
Commit 5b9593f3bccb9904f260f9ad7f184e1d2921bd1e upstream.
Revert commit 2a4a8b1e5d9d ("MIPS: Remove race window in page fault
handling") because it increased the number of flushed dcache pages and
became a performance problem for some workloads.
Signed-off-by: Lars Persson
Cc: linux-mips@linux-mips.org
Cc: paul.burton@imgtec.com
Cc: linux-kernel@vger.kernel.org
Patchwork: https://patchwork.linux-mips.org/patch/9345/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit f9101d2a9034a3071c3e67c974188ef261b35e80
Author: Chandrakala Chavva
Date: Fri Mar 6 14:02:21 2015 +0300
MIPS: OCTEON: Use correct CSR to soft reset
Commit 9a49899eb88803dcc0ef437f09912f9a7b7a66fd upstream.
Also delete unused cvmx\_reset\_octeon()
This fixes reboot for Octeon III boards
Signed-off-by: Chandrakala Chavva
Signed-off-by: Aleksey Makarov
Cc: linux-mips@linux-mips.org
Cc: linux-kernel@vger.kernel.org
Cc: David Daney
Patchwork: https://patchwork.linux-mips.org/patch/9471/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 7f80e58272c948d4fddec2d1abf40d6bf38d46bf
Author: Aaro Koskinen
Date: Wed Mar 4 23:08:49 2015 +0200
MIPS: OCTEON: dma-octeon: fix OHCI USB config check
Commit a8667d706dfa394ef9fe5f9013dee92d40a096e8 upstream.
CONFIG\_USB\_OCTEON\_OHCI is deprecated and no longer needed to use OHCI
on OCTEON II. Instead, CONFIG\_USB\_OHCI\_HCD\_PLATFORM should be used.
Signed-off-by: Aaro Koskinen
Cc: Aleksey Makarov
Cc: David Daney
Cc: linux-mips@linux-mips.org
Patchwork: https://patchwork.linux-mips.org/patch/9421/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 195161fd176acfedad69c0d259eabe050b993902
Author: Nicolas Schichan
Date: Thu Mar 12 17:00:58 2015 +0100
MIPS: BCM63xx: Move bcm63xx\_gpio\_init() to bcm63xx\_register\_devices().
Commit 2ec459f2a77b808c1e5a3616c88b613d3f720c8d upstream.
When called from prom init code, bcm63xx\_gpio\_init() will fail as it
will call gpiochip\_add() which relies on a working kmalloc() to alloc
the gpio\_desc array and kmalloc is not useable yet at prom init time.
Move bcm63xx\_gpio\_init() to bcm63xx\_register\_devices() (an
arch\_initcall) where kmalloc works.
Fixes: 14e85c0e69d5 ("gpio: remove gpio\_descs global array")
Signed-off-by: Nicolas Schichan
Cc: linux-mips@linux-mips.org
Cc: linux-kernel@vger.kernel.org
Cc: Alexandre Courbot
Patchwork: https://patchwork.linux-mips.org/patch/9530/
Signed-off-by: Ralf Baechle
Signed-off-by: Greg Kroah-Hartman
commit 77a23cb5bdb54f462341045248a7672009050fc0
Author: David S. Miller
Date: Fri May 1 22:02:47 2015 -0400
ipv4: Missing sk\_nulls\_node\_init() in ping\_unhash().
[ Upstream commit a134f083e79fb4c3d0a925691e732c56911b4326 ]
If we don't do that, then the poison value is left in the ->pprev
backlink.
This can cause crashes if we do a disconnect, followed by a connect().
Tested-by: Linus Torvalds
Reported-by: Wen Xu
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit c603b10f503c66e72453c02143cc9f21b55a9c3b
Author: Ido Shamay
Date: Thu Apr 30 17:32:46 2015 +0300
net/mlx4\_en: Schedule napi when RX buffers allocation fails
[ Upstream commit 07841f9d94c11afe00c0498cf242edf4075729f4 ]
When system is out of memory, refilling of RX buffers fails while
the driver continue to pass the received packets to the kernel stack.
At some point, when all RX buffers deplete, driver may fall into a
sleep, and not recover when memory for new RX buffers is once again
availible. This is because hardware does not have valid descriptors,
so no interrupt will be generated for the driver to return to work
in napi context. Fix it by schedule the napi poll function from
stats\_task delayed workqueue, as long as the allocations fail.
Signed-off-by: Ido Shamay
Signed-off-by: Amir Vadai
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 081025f9c9c3402a984564b0d647a9ebbb62b93e
Author: Hariprasad Shenai
Date: Wed Apr 29 17:19:05 2015 +0530
cxgb4: Fix MC1 memory offset calculation
[ Upstream commit 7f0b8a56c978b0a3315ac84c6cbb065413afb8e9 ]
Commit 6559a7e8296002b4 ("cxgb4: Cleanup macros so they follow the same
style and look consistent") introduced a regression where reading MC1
memory in adapters where MC0 isn't present or MC0 size is not equal to MC1
size caused the adapter to crash due to incorrect computation of memoffset.
Fix is to read the size of MC0 instead of MC1 for offset calculation
Signed-off-by: Steve Wise
Signed-off-by: Hariprasad Shenai
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 028a33eb801e1c48e7ff1d5c0505fdad97f615aa
Author: Benjamin Poirier
Date: Tue Apr 28 14:49:29 2015 -0700
mlx4: Fix tx ring affinity\_mask creation
[ Upstream commit 42eab005a5dd5d7ea2b0328aecc4d6cc0c23c9c2 ]
By default, the number of tx queues is limited by the number of online cpus
in mlx4\_en\_get\_profile(). However, this limit no longer holds after the
ethtool .set\_channels method has been called. In that situation, the driver
may access invalid bits of certain cpumask variables when queue\_index >=
nr\_cpu\_ids.
Signed-off-by: Benjamin Poirier
Acked-by: Ido Shamay
Fixes: d03a68f ("net/mlx4\_en: Configure the XPS queue mapping on driver load")
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit d177331ecb0579d5d12fb9bdbc385038ed3efac5
Author: Herbert Xu
Date: Tue Apr 28 11:43:15 2015 +0800
route: Use ipv4\_mtu instead of raw rt\_pmtu
[ Upstream commit cb6ccf09d6b94bec4def1ac5cf4678d12b216474 ]
The commit 3cdaa5be9e81a914e633a6be7b7d2ef75b528562 ("ipv4: Don't
increase PMTU with Datagram Too Big message") broke PMTU in cases
where the rt\_pmtu value has expired but is smaller than the new
PMTU value.
This obsolete rt\_pmtu then prevents the new PMTU value from being
installed.
Fixes: 3cdaa5be9e81 ("ipv4: Don't increase PMTU with Datagram Too Big message")
Reported-by: Gerd v. Egidy
Signed-off-by: Herbert Xu
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman
commit 59506497a7c844e81254c0a4bc2920510fac9a52
Author: Alexei Starovoitov
Date: Mon Apr 27 14:40:37 2015 -0700
bpf: fix 64-bit divide
[ Upstream commit 876a7ae65b86d8cec8efe7d15d050ac61116874e ]
ALU64\_DIV instruction should be dividing 64-bit by 64-bit,
whereas do\_div() does 64-bit by 32-bit divide.
x64 and arm64 JITs correctly implement 64 by 64 unsigned divide.
llvm BPF backend emits code assuming that ALU64\_DIV does 64 by 64.
Fixes: 89aa075832b0 ("net: sock: allow eBPF programs to be attached to sockets")
Reported-by: Michael Holzheu
Acked-by: Daniel Borkmann
Signed-off-by: Alexei Starovoitov
Signed-off-by: David S. Miller
Signed-off-by: Greg Kroah-Hartman


=== Content from github.com_0c546970_20250125_181953.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F6829e274a623187c24f7cfc0e3d35f25d087fcc5)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F6829e274a623187c24f7cfc0e3d35f25d087fcc5)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=torvalds%2Flinux)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[torvalds](/torvalds)
/
**[linux](/torvalds/linux)**
Public

* [Notifications](/login?return_to=%2Ftorvalds%2Flinux) You must be signed in to change notification settings
* [Fork
  54.9k](/login?return_to=%2Ftorvalds%2Flinux)
* [Star
   186k](/login?return_to=%2Ftorvalds%2Flinux)

* [Code](/torvalds/linux)
* [Pull requests
  437](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects
  0](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

Additional navigation options

* [Code](/torvalds/linux)
* [Pull requests](/torvalds/linux/pulls)
* [Actions](/torvalds/linux/actions)
* [Projects](/torvalds/linux/projects)
* [Security](/torvalds/linux/security)
* [Insights](/torvalds/linux/pulse)

## Commit

[Permalink](/torvalds/linux/commit/6829e274a623187c24f7cfc0e3d35f25d087fcc5)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

arm64: dma-mapping: always clear allocated buffers

[Browse files](/torvalds/linux/tree/6829e274a623187c24f7cfc0e3d35f25d087fcc5)
Browse the repository at this point in the history

```
Buffers allocated by dma_alloc_coherent() are always zeroed on Alpha,
ARM (32bit), MIPS, PowerPC, x86/x86_64 and probably other architectures.
It turned out that some drivers rely on this 'feature'. Allocated buffer
might be also exposed to userspace with dma_mmap() call, so clearing it
is desired from security point of view to avoid exposing random memory
to userspace. This patch unifies dma_alloc_coherent() behavior on ARM64
architecture with other implementations by unconditionally zeroing
allocated buffer.

Cc: <stable@vger.kernel.org> # v3.14+
Signed-off-by: Marek Szyprowski <m.szyprowski@samsung.com>
Signed-off-by: Will Deacon <will.deacon@arm.com>
```

* Loading branch information

[![@mszyprow](https://avatars.githubusercontent.com/u/64147665?s=40&v=4)](/mszyprow) [![@wildea01](https://avatars.githubusercontent.com/u/8912388?s=40&v=4)](/wildea01)

[mszyprow](/torvalds/linux/commits?author=mszyprow "View all commits by mszyprow")
authored and
[wildea01](/torvalds/linux/commits?author=wildea01 "View all commits by wildea01")
committed
Apr 27, 2015

1 parent
[6544e67](/torvalds/linux/commit/6544e67bfb1bf55bcf3c0f6b37631917e9acfb74)

commit 6829e27

Showing
**1 changed file**
with
**2 additions**
and
**4 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

6 changes: 2 additions & 4 deletions

6
[arch/arm64/mm/dma-mapping.c](#diff-4cb49aa489d40e61cae73654ced39fbab930364da98605c2d975f86519906dd5 "arch/arm64/mm/dma-mapping.c")

Show comments

[View file](/torvalds/linux/blob/6829e274a623187c24f7cfc0e3d35f25d087fcc5/arch/arm64/mm/dma-mapping.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -67,8 +67,7 @@ static void \*\_\_alloc\_from\_pool(size\_t size, struct page \*\*ret\_page, gfp\_t flags) |
|  |  |  |
|  |  | \*ret\_page = phys\_to\_page(phys); |
|  |  | ptr = (void \*)val; |
|  |  | if (flags & \_\_GFP\_ZERO) |
|  |  | memset(ptr, 0, size); |
|  |  | memset(ptr, 0, size); |
|  |  | } |
|  |  |  |
|  |  | return ptr; |
| Expand Down  Expand Up | | @@ -113,8 +112,7 @@ static void \*\_\_dma\_alloc\_coherent(struct device \*dev, size\_t size, |
|  |  |  |
|  |  | \*dma\_handle = phys\_to\_dma(dev, page\_to\_phys(page)); |
|  |  | addr = page\_address(page); |
|  |  | if (flags & \_\_GFP\_ZERO) |
|  |  | memset(addr, 0, size); |
|  |  | memset(addr, 0, size); |
|  |  | return addr; |
|  |  | } else { |
|  |  | return swiotlb\_alloc\_coherent(dev, size, dma\_handle, flags); |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `6829e27`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftorvalds%2Flinux%2Fcommit%2F6829e274a623187c24f7cfc0e3d35f25d087fcc5) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


