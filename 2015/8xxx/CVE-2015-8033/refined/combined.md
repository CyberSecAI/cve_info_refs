=== Content from github.com_f48917d2_20250124_124001.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftextpattern%2Ftextpattern%2Fcommit%2F1c09094187b9aeb18f09697bc7d1db12d078ae10)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftextpattern%2Ftextpattern%2Fcommit%2F1c09094187b9aeb18f09697bc7d1db12d078ae10)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=textpattern%2Ftextpattern)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[textpattern](/textpattern)
/
**[textpattern](/textpattern/textpattern)**
Public

* [Notifications](/login?return_to=%2Ftextpattern%2Ftextpattern) You must be signed in to change notification settings
* [Fork
  113](/login?return_to=%2Ftextpattern%2Ftextpattern)
* [Star
   807](/login?return_to=%2Ftextpattern%2Ftextpattern)

* [Code](/textpattern/textpattern)
* [Issues
  78](/textpattern/textpattern/issues)
* [Pull requests
  1](/textpattern/textpattern/pulls)
* [Discussions](/textpattern/textpattern/discussions)
* [Actions](/textpattern/textpattern/actions)
* [Security](/textpattern/textpattern/security)
* [Insights](/textpattern/textpattern/pulse)

Additional navigation options

* [Code](/textpattern/textpattern)
* [Issues](/textpattern/textpattern/issues)
* [Pull requests](/textpattern/textpattern/pulls)
* [Discussions](/textpattern/textpattern/discussions)
* [Actions](/textpattern/textpattern/actions)
* [Security](/textpattern/textpattern/security)
* [Insights](/textpattern/textpattern/pulse)

## Commit

[Permalink](/textpattern/textpattern/commit/1c09094187b9aeb18f09697bc7d1db12d078ae10)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Security improvements part 1. See Issue [#565](https://github.com/textpattern/textpattern/issues/565)

[Browse files](/textpattern/textpattern/tree/1c09094187b9aeb18f09697bc7d1db12d078ae10)
Browse the repository at this point in the history

```
* No more emailing plaintext passwords out: password changes and reset requests are dealt with immediately on the login/admin panels.
* Stronger cryptographic hashes for confirmation links that don't leak user ID information.
* Hashes are securely tethered to the user account and auto-expire when logging in or generating a new request. Timeout window of 20 minutes by default for answering reset requests.
* Password input boxes are unmaskable. Saves having a separate confirmation box, simplifies code logic and is better UX.
* Dedicated txp_token table introduced for handling token-based storage and retrieval. Better for plugin authors than abusing txp_discuss_nonce.

More on the way including strength meter and improvements to setup passwords...
```

* Loading branch information

[![@Bloke](https://avatars.githubusercontent.com/u/21252?s=40&v=4)](/Bloke)

[Bloke](/textpattern/textpattern/commits?author=Bloke "View all commits by Bloke")
committed
Nov 5, 2015

1 parent
[ce2378f](/textpattern/textpattern/commit/ce2378fd360a754e963f7be645c4e9c370e5ef08)

commit 1c09094

 Show file tree

 Hide file tree

Showing
**6 changed files**
with
**313 additions**
and
**83 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* textpattern

  + include

    - textpattern/include/txp\_admin.php
      [txp\_admin.php](#diff-b573f9e8e1d1dd32375ab43a34e73e558a4cec842cd1373da79d64ea69b727c6)
    - textpattern/include/txp\_auth.php
      [txp\_auth.php](#diff-fe25f94a3cdf496da0652249431bbaaff18be1bacf95c5c88dad7dce7ae08def)
  + lib

    - textpattern/lib/constants.php
      [constants.php](#diff-d4df1ff80aeda94a91beb996e5b1b645075f33b9b90c1e044168c919e0c46c99)
    - textpattern/lib/txplib\_admin.php
      [txplib\_admin.php](#diff-b2096d4e9a28e6356bd1259ca00558dd9af0a6b2b33bae8d2ef6cdcd2a86097d)
  + textpattern/textpattern.js
    [textpattern.js](#diff-edf543dd6a0313e5a13b38edfc213776ea7216a7da8081567d5a95dc4f9720a6)
  + update

    - textpattern/update/\_to\_4.6.0.php
      [\_to\_4.6.0.php](#diff-2c5194c0c57bb3f8068dfe179b6a454a002f9e1a81c1824333c336faf93f1d50)

## There are no files selected for viewing

37 changes: 9 additions & 28 deletions

37
[textpattern/include/txp\_admin.php](#diff-b573f9e8e1d1dd32375ab43a34e73e558a4cec842cd1373da79d64ea69b727c6 "textpattern/include/txp_admin.php")

Show comments

[View file](/textpattern/textpattern/blob/1c09094187b9aeb18f09697bc7d1db12d078ae10/textpattern/include/txp_admin.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -132,7 +132,7 @@ function change\_pass() |
|  |  | { |
|  |  | global $txp\_user; |
|  |  |  |
|  |  | extract(psa(array('new\_pass', 'mail\_password'))); |
|  |  | extract(psa(array('new\_pass'))); |
|  |  |  |
|  |  | if (empty($new\_pass)) { |
|  |  | author\_list(array(gTxt('password\_required'), E\_ERROR)); |
| Expand All | | @@ -143,18 +143,8 @@ function change\_pass() |
|  |  | $rs = change\_user\_password($txp\_user, $new\_pass); |
|  |  |  |
|  |  | if ($rs) { |
|  |  | $message = gTxt('password\_changed'); |
|  |  |  |
|  |  | if ($mail\_password) { |
|  |  | $email = fetch('email', 'txp\_users', 'name', $txp\_user); |
|  |  |  |
|  |  | send\_new\_password($new\_pass, $email, $txp\_user); |
|  |  |  |
|  |  | $message .= sp.gTxt('and\_mailed\_to').sp.$email; |
|  |  | } |
|  |  |  |
|  |  | $message .= '.'; |
|  |  |  |
|  |  | // Todo: Move full stop to Textpack. |
|  |  | $message = gTxt('password\_changed') . '.'; |
|  |  | author\_list($message); |
|  |  | } |
|  |  | } |
| Expand Down  Expand Up | | @@ -241,12 +231,12 @@ function new\_pass\_form() |
|  |  | hed(gTxt('change\_password'), 2). |
|  |  | inputLabel( |
|  |  | 'new\_pass', |
|  |  | fInput('password', 'new\_pass', '', '', '', '', INPUT\_REGULAR, '', 'new\_pass'), |
|  |  | fInput('password', 'new\_pass', '', 'txp-maskable', '', '', INPUT\_REGULAR, '', 'new\_pass'), |
|  |  | 'new\_password', '', array('class' => 'txp-form-field edit-admin-new-password') |
|  |  | ). |
|  |  | graf( |
|  |  | checkbox('mail\_password', '1', true, '', 'mail\_password'). |
|  |  | n.tag(gTxt('mail\_it'), 'label', array('for' => 'mail\_password')), array('class' => 'edit-admin-mail-password')). |
|  |  | checkbox('unmask', 1, false, 0, 'show\_password'). |
|  |  | n.tag(gTxt('show\_password'), 'label', array('for' => 'show\_password')), array('class' => 'edit-admin-show-password')). |
|  |  | graf(fInput('submit', 'change\_pass', gTxt('submit'), 'publish')). |
|  |  | eInput('admin'). |
|  |  | sInput('change\_pass'), |
| Expand Down  Expand Up | | @@ -714,20 +704,11 @@ function admin\_multi\_edit() |
|  |  | case 'resetpassword': |
|  |  |  |
|  |  | foreach ($names as $name) { |
|  |  | $passwd = generate\_password(PASSWORD\_LENGTH); |
|  |  |  |
|  |  | if (change\_user\_password($name, $passwd)) { |
|  |  | $email = safe\_field("email", 'txp\_users', "name = '".doSlash($name)."'"); |
|  |  |  |
|  |  | if (send\_new\_password($passwd, $email, $name)) { |
|  |  | $changed[] = $name; |
|  |  | $msg = 'author\_updated'; |
|  |  | } else { |
|  |  | return author\_list(array(gTxt('could\_not\_mail').' '.txpspecialchars($name), E\_ERROR)); |
|  |  | } |
|  |  | } |
|  |  | send\_reset\_confirmation\_request($name); |
|  |  | $changed[] = $name; |
|  |  | } |
|  |  |  |
|  |  | $msg = 'password\_reset\_confirmation\_request\_sent'; |
|  |  | break; |
|  |  | } |
|  |  |  |
| Expand Down | |  |

112 changes: 91 additions & 21 deletions

112
[textpattern/include/txp\_auth.php](#diff-fe25f94a3cdf496da0652249431bbaaff18be1bacf95c5c88dad7dce7ae08def "textpattern/include/txp_auth.php")

Show comments

[View file](/textpattern/textpattern/blob/1c09094187b9aeb18f09697bc7d1db12d078ae10/textpattern/include/txp_auth.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -71,23 +71,26 @@ function doLoginForm($message) |
|  |  | global $textarray\_script, $event, $step; |
|  |  |  |
|  |  | include txpath.'/lib/txplib\_head.php'; |
|  |  |  |
|  |  | $event = 'login'; |
|  |  |  |
|  |  | $stay = (cs('txp\_login') && !gps('logout') ? 1 : 0); |
|  |  | $reset = gps('reset'); |
|  |  | $confirm = gps('confirm'); |
|  |  |  |
|  |  | if (gps('logout')) { |
|  |  | $step = 'logout'; |
|  |  | } elseif (gps('reset')) { |
|  |  | } elseif ($reset) { |
|  |  | $step = 'reset'; |
|  |  | } elseif ($confirm) { |
|  |  | $step = 'confirm'; |
|  |  | } |
|  |  |  |
|  |  | pagetop(gTxt('login'), $message); |
|  |  |  |
|  |  | $stay = (cs('txp\_login') and !gps('logout') ? 1 : 0); |
|  |  | $reset = gps('reset'); |
|  |  |  |
|  |  | $name = join(',', array\_slice(explode(',', cs('txp\_login')), 0, -1)); |
|  |  | $out = array(); |
|  |  |  |
|  |  | if ($reset) { |
|  |  | $pageTitle = gTxt('password\_reset'); |
|  |  | $out[] = hed(gTxt('password\_reset'), 1, array('id' => 'txp-login-heading')). |
|  |  | n.tag( |
|  |  | n.tag(gTxt('name'), 'label', array('for' => 'login\_name')). |
| Expand All | | @@ -98,7 +101,29 @@ function doLoginForm($message) |
|  |  | graf( |
|  |  | href(gTxt('back\_to\_login'), 'index.php'), array('class' => 'login-return')). |
|  |  | hInput('p\_reset', 1); |
|  |  | } elseif ($confirm) { |
|  |  | $pageTitle = gTxt('change\_password'); |
|  |  | $out[] = hed(gTxt('change\_password'), 1, array('id' => 'txp-change-password-heading')). |
|  |  | n.tag( |
|  |  | n.tag(gTxt('new\_password'), 'label', array( |
|  |  | 'class' => 'txp-form-field-label', |
|  |  | 'for' => 'change\_password', |
|  |  | )). |
|  |  | fInput('password', 'p\_password', '', 'txp-form-field-input txp-maskable', '', '', INPUT\_REGULAR, '', 'change\_password', false, true), |
|  |  | 'div', array('class' => 'txp-form-field change-password')). |
|  |  | graf( |
|  |  | checkbox('unmask', 1, false, 0, 'show\_password').n. |
|  |  | tag(gTxt('show\_password'), 'label', array('for' => 'show\_password')) |
|  |  | , array('class' => 'show-password')). |
|  |  | graf( |
|  |  | fInput('submit', '', gTxt('password\_confirm\_button'), 'publish').n |
|  |  | ). |
|  |  | graf( |
|  |  | href(gTxt('back\_to\_login'), 'index.php'), array('class' => 'login-return')); |
|  |  | $out[] = hInput('hash', gps('confirm')); |
|  |  | $out[] = hInput('p\_alter', 1); |
|  |  | } else { |
|  |  | $pageTitle = gTxt('login'); |
|  |  | $out[] = hed(gTxt('login\_to\_textpattern'), 1, array('id' => 'txp-login-heading')). |
|  |  | n.tag( |
|  |  | n.tag(gTxt('name'), 'label', array('for' => 'login\_name')). |
| Expand All | | @@ -124,6 +149,8 @@ function doLoginForm($message) |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | pagetop($pageTitle, $message); |
|  |  |  |
|  |  | echo form( |
|  |  | join('', $out), '', '', 'post', 'txp-login', '', 'login\_form'). |
|  |  |  |
| Expand All | | @@ -136,22 +163,35 @@ function doLoginForm($message) |
|  |  | /\*\* |
|  |  | \* Validates the sent login form and creates a session. |
|  |  | \* |
|  |  | \* During the reset request procedure, it is conceivable to verify the |
|  |  | \* token as soon as it is presented in the URL, but that would require: |
|  |  | \* a) very similar code in both p\_confirm and p\_alter branches (unless refactored) |
|  |  | \* b) some way (other than via the message) to signal back to doLoginForm() that |
|  |  | \* the token is bogus so the 'change your password' form is not displayed. |
|  |  | \* Perhaps raise an exception? |
|  |  | \* |
|  |  | \* @todo Investigate validating confirm token as soon as it's presented in URL (better UX). |
|  |  | \* @todo Could this be done via a Validator()? |
|  |  | \* |
|  |  | \* @return string A localised feedback message |
|  |  | \* @see doLoginForm() |
|  |  | \*/ |
|  |  |  |
|  |  | function doTxpValidate() |
|  |  | { |
|  |  | global $logout, $txp\_user; |
|  |  |  |
|  |  | $p\_userid = ps('p\_userid'); |
|  |  | $p\_password = ps('p\_password'); |
|  |  | $p\_reset = ps('p\_reset'); |
|  |  | $p\_alter = ps('p\_alter'); |
|  |  | $stay = ps('stay'); |
|  |  | $p\_confirm = gps('confirm'); |
|  |  | $logout = gps('logout'); |
|  |  | $message = ''; |
|  |  | $pub\_path = preg\_replace('|//$|', '/', rhu.'/'); |
|  |  |  |
|  |  | if (cs('txp\_login') and strpos(cs('txp\_login'), ',')) { |
|  |  | if (cs('txp\_login') && strpos(cs('txp\_login'), ',')) { |
|  |  | $txp\_login = explode(',', cs('txp\_login')); |
|  |  | $c\_hash = end($txp\_login); |
|  |  | $c\_userid = join(',', array\_slice($txp\_login, 0, -1)); |
| Expand All | | @@ -165,7 +205,11 @@ function doTxpValidate() |
|  |  | setcookie('txp\_login\_public', '', time() - 3600, $pub\_path); |
|  |  | } |
|  |  |  |
|  |  | if ($c\_userid and strlen($c\_hash) == 32) { // Cookie exists. |
|  |  | if ($c\_userid && strlen($c\_hash) === 32) { |
|  |  | // Cookie exists. |
|  |  | // @todo Improve security by using a better nonce/salt mechanism. md5 and uniqid are bad. |
|  |  | // @todo Flag cookie-based logins and force confirmation of old password when |
|  |  | // changing it from Admin->Users panel. |
|  |  | $r = safe\_row( |
|  |  | "name, nonce", |
|  |  | 'txp\_users', |
| Expand Down  Expand Up | | @@ -193,7 +237,8 @@ function doTxpValidate() |
|  |  | setcookie('txp\_login\_public', '', time() - 3600, $pub\_path); |
|  |  | $message = array(gTxt('bad\_cookie'), E\_ERROR); |
|  |  | } |
|  |  | } elseif ($p\_userid and $p\_password) { // Incoming login vars. |
|  |  | } elseif ($p\_userid && $p\_password) { |
|  |  | // Incoming login vars. |
|  |  | $name = txp\_validate($p\_userid, $p\_password); |
|  |  |  |
|  |  | if ($name !== false) { |
| Expand All | | @@ -218,7 +263,7 @@ function doTxpValidate() |
|  |  |  |
|  |  | setcookie( |
|  |  | 'txp\_login\_public', |
|  |  | substr(md5($nonce), - 10).$name, |
|  |  | substr(md5($nonce), -10).$name, |
|  |  | ($stay ? time() + 3600 \* 24 \* 30 : 0), |
|  |  | $pub\_path |
|  |  | ); |
| Expand All | | @@ -232,25 +277,50 @@ function doTxpValidate() |
|  |  | txp\_status\_header('401 Could not log in with that username/password'); |
|  |  | $message = array(gTxt('could\_not\_log\_in'), E\_ERROR); |
|  |  | } |
|  |  | } elseif ($p\_reset) { // Reset request. |
|  |  | } elseif ($p\_reset) { |
|  |  | // Reset request. |
|  |  | sleep(3); |
|  |  |  |
|  |  | include\_once txpath.'/lib/txplib\_admin.php'; |
|  |  |  |
|  |  | $message = ($p\_userid) ? send\_reset\_confirmation\_request($p\_userid) : ''; |
|  |  | } elseif (gps('reset')) { |
|  |  | $message = ''; |
|  |  | } elseif (gps('confirm')) { |
|  |  | } elseif ($p\_alter) { |
|  |  | // Password change confirmation. |
|  |  | sleep(3); |
|  |  | global $sitename; |
|  |  |  |
|  |  | $confirm = pack('H\*', gps('confirm')); |
|  |  | $name = substr($confirm, 5); |
|  |  | $nonce = safe\_field("nonce", 'txp\_users', "name = '".doSlash($name)."'"); |
|  |  | $pass = ps('p\_password'); |
|  |  |  |
|  |  | if ($nonce and $confirm === pack('H\*', substr(md5($nonce), 0, 10)).$name) { |
|  |  | include\_once txpath.'/lib/txplib\_admin.php'; |
|  |  |  |
|  |  | $message = reset\_author\_pass($name); |
|  |  | if (trim($pass) === '') { |
|  |  | $message = array(gTxt('password\_required'), E\_ERROR); |
|  |  | } else { |
|  |  | $hash = gps('hash'); |
|  |  | $selector = substr($hash, SALT\_LENGTH); |
|  |  | $tokenInfo = safe\_row("reference\_id, token, expires", 'txp\_token', "selector = '".doSlash($selector)."' AND type='password\_reset'"); |
|  |  |  |
|  |  | if ($tokenInfo) { |
|  |  | if (strtotime($tokenInfo['expires']) <= time()) { |
|  |  | $message = array(gTxt('token\_expired'), E\_ERROR); |
|  |  | } else { |
|  |  | $uid = assert\_int($tokenInfo['reference\_id']); |
|  |  | $row = safe\_row("name, email, nonce, pass AS old\_pass", 'txp\_users', "user\_id = $uid"); |
|  |  |  |
|  |  | if ($row['nonce'] && ($hash === bin2hex(pack('H\*', substr(hash(HASHING\_ALGORITHM, $row['nonce'].$selector.$row['old\_pass']), 0, SALT\_LENGTH))).$selector)) { |
|  |  | if (change\_user\_password($row['name'], $pass)) { |
|  |  | $body = gTxt('greeting').' '.$row['name'].','.n.n.gTxt('password\_change\_confirmation'); |
|  |  | txpMail($row['email'], "[$sitename] ".gTxt('password\_changed'), $body); |
|  |  | $message = gTxt('password\_changed'); |
|  |  |  |
|  |  | // Invalidate all reset requests in the wild for this user. |
|  |  | safe\_delete("txp\_token", "reference\_id = $uid AND type = 'password\_reset'"); |
|  |  | } |
|  |  | } else { |
|  |  | $message = array(gTxt('invalid\_token'), E\_ERROR); |
|  |  | } |
|  |  | } |
|  |  | } else { |
|  |  | $message = array(gTxt('invalid\_token'), E\_ERROR); |
|  |  | } |
|  |  | } |
|  |  | } |
|  |  |  |
| Expand Down | |  |

47 changes: 47 additions & 0 deletions

47
[textpattern/lib/constants.php](#diff-d4df1ff80aeda94a91beb996e5b1b645075f33b9b90c1e044168c919e0c46c99 "textpattern/lib/constants.php")

Show comments

[View file](/textpattern/textpattern/blob/1c09094187b9aeb18f09697bc7d1db12d078ae10/textpattern/lib/constants.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -402,6 +402,53 @@ |
|  |  | define('PASSWORD\_SYMBOLS', '23456789abcdefghijkmnopqrstuvwxyz'); |
|  |  | } |
|  |  |  |
|  |  | if (!defined('HASHING\_ALGORITHM')) { |
|  |  | /\*\* |
|  |  | \* Algorithm to use for hashing passwords/reset requests. |
|  |  | \* |
|  |  | \* This constant can be overridden from the config.php. |
|  |  | \* |
|  |  | \* @package User |
|  |  | \* @since 4.6.0 |
|  |  | \* @see PHP's hash\_algos() function |
|  |  | \* @example |
|  |  | \* define('HASHING\_ALGORITHM', 'whirlpool'); |
|  |  | \*/ |
|  |  |  |
|  |  | define('HASHING\_ALGORITHM', 'ripemd256'); |
|  |  | } |
|  |  |  |
|  |  | if (!defined('SALT\_LENGTH')) { |
|  |  | /\*\* |
|  |  | \* Length of salt/selector hashes. |
|  |  | \* |
|  |  | \* This constant can be overridden from the config.php. |
|  |  | \* |
|  |  | \* @package User |
|  |  | \* @since 4.6.0 |
|  |  | \* @example |
|  |  | \* define('SALT\_LENGTH', '80'); |
|  |  | \*/ |
|  |  |  |
|  |  | define('SALT\_LENGTH', '64'); |
|  |  | } |
|  |  |  |
|  |  | if (!defined('RESET\_EXPIRY\_MINUTES')) { |
|  |  | /\*\* |
|  |  | \* Length of time (in minutes) that a password reset request remains valid. |
|  |  | \* |
|  |  | \* This constant can be overridden from the config.php. |
|  |  | \* Values under 60 may fall foul of DST changeover times, but meh. |
|  |  | \* |
|  |  | \* @package User |
|  |  | \* @since 4.6.0 |
|  |  | \* @example |
|  |  | \* define('RESET\_EXPIRY\_MINUTES', '90'); |
|  |  | \*/ |
|  |  |  |
|  |  | define('RESET\_EXPIRY\_MINUTES', '20'); |
|  |  | } |
|  |  |  |
|  |  | if (!defined('LOGIN\_COOKIE\_HTTP\_ONLY')) { |
|  |  | /\*\* |
|  |  | \* If TRUE, login cookie is set just for HTTP. |
| Expand Down | |  |

 Loading

Oops, something went wrong.
 Retry

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `1c09094`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftextpattern%2Ftextpattern%2Fcommit%2F1c09094187b9aeb18f09697bc7d1db12d078ae10) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_d8c0016a_20250124_123959.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftextpattern%2Ftextpattern%2Fblob%2Ff94c3fb9916ee0c7fa4a52025fa4e8c3273e355b%2FHISTORY.txt)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftextpattern%2Ftextpattern%2Fblob%2Ff94c3fb9916ee0c7fa4a52025fa4e8c3273e355b%2FHISTORY.txt)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=textpattern%2Ftextpattern)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[textpattern](/textpattern)
/
**[textpattern](/textpattern/textpattern)**
Public

* [Notifications](/login?return_to=%2Ftextpattern%2Ftextpattern) You must be signed in to change notification settings
* [Fork
  113](/login?return_to=%2Ftextpattern%2Ftextpattern)
* [Star
   807](/login?return_to=%2Ftextpattern%2Ftextpattern)

* [Code](/textpattern/textpattern)
* [Issues
  78](/textpattern/textpattern/issues)
* [Pull requests
  1](/textpattern/textpattern/pulls)
* [Discussions](/textpattern/textpattern/discussions)
* [Actions](/textpattern/textpattern/actions)
* [Security](/textpattern/textpattern/security)
* [Insights](/textpattern/textpattern/pulse)

Additional navigation options

* [Code](/textpattern/textpattern)
* [Issues](/textpattern/textpattern/issues)
* [Pull requests](/textpattern/textpattern/pulls)
* [Discussions](/textpattern/textpattern/discussions)
* [Actions](/textpattern/textpattern/actions)
* [Security](/textpattern/textpattern/security)
* [Insights](/textpattern/textpattern/pulse)

## Files

 f94c3fb
## Breadcrumbs

1. [textpattern](/textpattern/textpattern/tree/f94c3fb9916ee0c7fa4a52025fa4e8c3273e355b)
/
# HISTORY.txt

Copy path Blame  Blame
## Latest commit

## History

[History](/textpattern/textpattern/commits/f94c3fb9916ee0c7fa4a52025fa4e8c3273e355b/HISTORY.txt)605 lines (562 loc) · 40.6 KB f94c3fb
## Breadcrumbs

1. [textpattern](/textpattern/textpattern/tree/f94c3fb9916ee0c7fa4a52025fa4e8c3273e355b)
/
# HISTORY.txt

Top
## File metadata and controls

* Code
* Blame

605 lines (562 loc) · 40.6 KB[Raw](https://github.com/textpattern/textpattern/raw/f94c3fb9916ee0c7fa4a52025fa4e8c3273e355b/HISTORY.txt)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605Changes in 4.6.0 (Upcoming)
\* Textile v3.5.\* Improved RTL language support.\* Improved admin side UI.\* Requires PHP 5.3.3 or newer. Compatible with PHP 7 and MySQL 5.7 (thanks Ruud van Melick).\* New tags: <txp:authors />, <txp:meta\_description />, <txp:if\_description> and <txp:if\_yield>.\* No more plaintext passwords sent: password reset requests are handled directly on the server.\* One-week validity for new account activation requests by default. Configurable in config.php (see ACTIVATION\_EXPIRY\_HOURS).\* Ninety-minute validity for password reset requests by default. Configurable in config.php (see RESET\_EXPIRY\_MINUTES).\* Stronger password hashes and strength meter implemented (zxcvbn).\* Faster due to cache-friendly public side database queries, parser improvements and reduction of admin-side queries (thanks Ruud van Melick and etc).\* Added: Default publishing status preference.\* Added: Support for additional text markup languages.\* Added: Privilege to change text markup language in 'Write' panel.\* Removed: Import panel - the blog import options were obsolete (thanks Ruud van Melick).\* Removed: Commenter IP ban feature - this method of banning is unreliable and becoming obsolete (thanks Ruud van Melick).\* Removed: Modernizr unnecessary due to IE10 being our minimum IE browser requirement.\* Changed: The /textpattern/theme/ directory has been renamed to /textpattern/admin-themes/ for stronger differentiation between this and the public-side /themes/ directory planned for Textpattern 4.7. Additionally prevents breakage of preferences panel caused by old, incompatible themes residing in the previously titled admin theme directory during upgrade.\* Changed: <txp:article\_custom /> accepts 'exclude' attribute to exclude articles by a comma-separated id list.\* Changed: <txp:author /> accepts 'escape' and 'format' attributes.\* Changed: <txp:category\_list /> accepts 'html\_id', 'limit' and 'offset' attributes.\* Changed: <txp:comments\_form/>: Deprecated attributes 'isize', 'msgcols', 'msgrows', 'msgstyle', 'previewlabel', 'submitlabel', 'rememberlabel', and 'forgetlabel'.\* Changed: <txp:comments/>, <txp:comments\_form/>, <txp:comments\_preview/> and <txp:popup\_comments/> can be used as container tags.\* Changed: <txp:comment\_email\_input /> accepts attribute 'size'.\* Changed: <txp:comment\_message\_input /> accepts attributes 'cols', 'rows'. Removed capability to apply an immediate style to the element.\* Changed: <txp:comment\_name\_input /> accepts attribute 'size'.\* Changed: <txp:comment\_preview /> accepts attribute 'label'.\* Changed: <txp:comment\_remember /> accepts attributes 'rememberlabel', 'forgetlabel'.\* Changed: <txp:comment\_submit /> accepts attribute 'label'.\* Changed: <txp:comment\_web\_input /> accepts attribute 'size'.\* Changed: <txp:link /> accepts 'id' and 'name' attributes.\* Changed: <txp:meta\_author /> accepts 'escape' and 'format' attributes.\* Changed: <txp:meta\_keywords /> accepts 'escape', 'format' and 'separator' attributes.\* Changed: <txp:password\_protect /> tag can now be used as a container tag.\* Changed: <txp:recent\_articles /> accepts 'offset' attribute.\* Changed: <txp:section\_list /> accepts 'html\_id', 'limit' and 'offset' attributes.\* Changed: Deprecated <txp:keywords /> tag. Use <txp:meta\_keywords format="" /> instead.\* Changed: Deprecated <txp:rsd /> tag.\* Changed: Deprecated 'breakclass' attribute for <txp:comments /> and <txp:image\_info />.\* Changed: Removed Form (article) Preview facility.\* Changed: Removed empty 'About' section from new installs.\* Changed: Increased 'page' and 'css' sizes in txp\_section table.\* Changed: 'Prevent widowed words in article titles' preference defaults to 'No' in new installs.\* Changed: Detailed debug trace log.\* Changed: Default charset is now utf8mb4: supports a wider range of characters, including emoji.\* Developer: getNextPref() now returns array members 'next' and 'prev' with article data, no longer returns array members 'next\_id', 'next\_title', 'next\_utitle', 'next\_posted', 'prev\_id', 'prev\_title', 'prev\_utitle', 'prev\_posted'\* Developer: getNeighbour() returns 'false' if no matching neighbour article exists.\* Developer: Uses 'mysqli' extension for DB access, lose dependency on 'mysql' extension.\* Developer: Uses the TXP 'now()' function instead of the SQL 'NOW()' function to create cache-friendly, faster SELECT queries.\* Developer: Added jQuery UI library to admin side.\* Developer: Added Prism code highlighting for <code> and <pre><code> to admin side. The following languages are supported (when specified via classnames on the <code> tag, i.e. using 'class="language-xxx"): 'language-markup', 'language-css', 'language-clike', 'language-javascript', 'language-json', 'language-php', 'language-markdown', 'language-textile'. Optional line numbers are also supported when code highlighting, by adding an additional classname of 'line-numbers' to the parent <pre> tag.\* Developer: Added DocBlock documentation comments throughout the source code.\* Developer: Adherence to PSR coding standards where possible.\* Developer: Function signature for wrapRegion() changed: 7th parameter 'ARIA role' dropped, as it shouldn't be stated for semantic tags such as 'section'.\* Developer: Refactored 'Validator', 'Constraint', and 'theme' classes into the 'Textpattern' namespace; deprecated their 'txplib\_validator' and 'txplib\_theme' implementations.\* jQuery 1.12.3.\* jQuery UI 1.12.0.
Changes in 4.5.7
\* Maintenance release with bug fixes.\* Textile v2.4.3 resolves PHP 5.5 compatibility issues.\* Updated default site theme and libraries.\* Setup now remembers settings. No more 'form resubmission' browser warnings when going back through the wizard.\* Allow pre\_publish\_script in multi-site installations.\* Email address validation uses PHP's filter\_var(), which permits addresses such as @[127.0.0.1].\* Fixed: <txp:link\_to\_prev>, <txp:link\_to\_next>, <txp:prev\_title>, and <txp:next\_title> tags for certain combinations with <txp:article\_custom>.\* Fixed: SQL statement escaping in set\_pref().\* Fixed: Situations where set\_pref() could corrupt the preference table if the string name contained '%' or '\_' characters.\* Fixed: Save comment emails of any valid length properly.\* Fixed: Visitor logs support IPv6.\* Fixed: Articles can be assigned to sections with names longer than 64 characters.\* Fixed: Setup script more robust, and compatible with MySQL 5.6.\* Fixed: Warnings when writing image thumbnails.\* Fixed: Files no longer trash author names, and empty files can no longer be created.\* Fixed: Percent encoding of spaces in site URL.\* Security: IXR fixes to prevent XML quadratic blowup attack.\* Security: Prevent variable injection during setup and plugin preview step.
Changes in 4.5.6
\* Skipped due to broken update path for SVN users.
Changes in 4.5.5
\* Maintenance release with bug fixes, no security implications.\* Fixed: Compatibility issues with PHP 5.5 in <txp:yield> and setup routines.\* Fixed: Category table's parent-child associations break and the table malforms on name updates, if two different category types share same category name.\* Fixed: Image caption isn't escaped.\* Fixed: Admin-side JavaScript dies on Safari 5 (or any browser that doesn't allow re-defining keywords or constructs as variables).\* jQuery 1.8.3.
Changes in 4.5.4
\* Corrects a packaging error in the 4.5.3 archives.
Changes in 4.5.3
\* Maintenance release with bug fixes, no security implications.\* Fix <txp:link\_to\_prev>, <txp:link\_to\_next>, <txp:prev\_title>, and <txp:next\_title> tags for certain combinations with <txp:article\_custom>.\* Escape new page name in the 'Pages' panel.\* Developer: Render valid HTML in fInput() for input types 'file' and 'image'.\* Developer: In http\_accept\_format(), discard MIME formats with a quality factor below 0.1.
Changes in 4.5.2
\* Maintenance release with bug fixes, no security implications.\* Fix <txp:link\_to\_prev>, <txp:link\_to\_next>, <txp:prev\_title>, and <txp:next\_title> tags for setups with web server and database server in different time zones.\* Avoid "undefined variable" error while bulk-editing form types.\* Developer: Use actual callback instead of hard-coded function to render 'View'link. Pass reference to partials meta data into partial callbacks as $rs['partials\_meta'].\* Developer: Escape '<script>' tags in script\_js(). Use jQuery in dom\_attach().
Changes in 4.5.1
\* Maintenance release with bug fixes, no security implications.\* Default front-side template: Remove duplicate search input field.\* Textile: Use 'named groups' syntax '?P<group>' for b/c with older PCRE libary versions.\* Hive admin-side theme: Modernizr v2.6.2.\* Prevent fatal aborts from error-handling during version upgrades.\* Unregister all globals in multi-site setups.\* Prevent deletion of used stylesheets from UI.\* Offer all supported units in the tag builder for <txp:file\_download\_size />.\* Developer: New events 'authors\_deleted', 'categories\_deleted', 'css\_deleted', 'discuss\_deleted', 'file\_deleted', 'forms\_deleted', 'thumbnail\_deleted', 'links\_deleted', 'articles\_deleted', 'page\_deleted', 'sections\_deleted'.
Changes in 4.5.0
\* Minimum system requirement: PHP 5.2.\* Modern default site theme (responsive, HTML5, CSS3).\* Choice of HTML5 or XHTML document type as a preference.\* Textile 2.4.1. See full changelog at http://textpattern.com/textile-changelog.\* User interface realignment and clean-up.\* Additional admin theme (Hive).\* Beautified setup process.\* Write, Plugin and Section panels save some changes without page refreshes (AJAX).\* WordPress import tool imports image media attachemnts as article images, can use 'utf8' or 'latin1' source databases.\* New advanced preference "Login info email address" allows to define a 'From:' address from which a new user's login info is sent.\* Check for new Textpattern version moved from Preferences to Diagnostics panel.\* Removed raw PHP support in pages and articles.\* Plugin status is preserved across plugin updates.\* <txp:link\_to\_prev> and <txp:link\_to\_next> adhere to the sort order set by <txp:article>.\* Deprecated 'escape' attribute for <txp:search\_term />.\* Removed 'align' attribute for <txp:image />, <txp:thumbnail />, <txp:article\_image />.\* <txp:css /> accepts a comma-separated list of style-sheet names for the 'name' attribute.\* <txp:txp\_die />: New attribute 'url'. Specifies location target for HTTP stati 301, 302, 307.\* <txp:article\_custom>, <txp:file\_download\_list> preserve sorting order from 'id' attribute.\* <txp:images /> preserves sorting order from article image ids.\* <txp:file\_download> may be used as a container tag.\* <txp:comment\_form />: New attributes 'previewlabel', 'submitlabel', 'rememberlabel', 'forgetlabel'.\* New <txp:author\_email> tag.\* <txp:linklist /> accepts a comma-separated list of link ids in the new 'id' attribute.\* <txp:images /> uses the sort order of images from the 'id' attribute if present.\* Developer: Introduce gTxtScript() to help with the l10n of client-side strings.\* Developer: Introduce txpspecialchars() as a recommended HTML5-safe alternative to htmlspecialchars().\* Developer: New events 'article\_saved', 'article\_posted', 'comment.saved', 'article\_ui'.'partials\_meta', 'article\_ui'.'validate\_save', 'image\_ui'.'fullsize\_image', 'image\_ui'.'thumbnail\_image', 'admin\_criteria'.'author\_list', 'admin\_criteria'.'author\_list', 'admin\_criteria'.'css\_list', 'admin\_criteria'.'discuss\_list', 'admin\_criteria'.'file\_list', 'admin\_criteria'.'form\_list', 'admin\_criteria'.'image\_list', 'admin\_criteria'.'link\_list', 'admin\_criteria'.'list\_list', 'admin\_criteria'.'log\_list', 'admin\_criteria'.'page\_list', 'admin\_criteria'.'section\_list' (NB: 'image\_ui'.'image\_edit' and 'image\_ui'.'thumbnail\_edit' changed).\* Developer: Introduce textpattern.Relay, a pub/sub hub for client-side events.\* Developer: Introduce txpAsyncForm (a jQuery plugin for asynchronous posts from forms) and txpAsyncHref (a jQuery plugin for asynchronous posts from links)\* Developer: Introduce safe\_escape(), Constraint() and Validator() classes plus their descendents, callback\_event\_ref(), theme::announce\_async()\* Developer: Restrict plugin type '3' to load only at non-AJAX requests. Introduce plugin type '4' to be loaded on the admin side for both AJAX and non-AJAX requests. Introduce plugin type '5' to be loaded on the public side and on the admin side for both AJAX and non-AJAX requests.\* Developer: Run custom post-update code from txpath.'/update/custom/post-update\*.php' if this glob() exists.\* Developer: Include custom code like page-caches before the page is assembled by setting $txpcfg['pre\_publish\_script'] to a valid filename.\* Developer: Modified plugin type '1': Load only on non-AJAX requests on the admin-side.\* Developer: Additional plugin types '4' (admin-side, only for AJAX requests), and '5' (public side; admin-side, only for AJAX requests).\* Security: Admin-side disallows framing, sends "X-Frame-Options: SAMEORIGIN" header.\* Security: The 'txp\_login' cookie is set with a 'HttpOnly' attribute.\* Security: Fixed a persistent XSS vulnerability in Textile discovered by Mauro Gentile.\* Security: Fixed a XSS vulnerability in the setup process discovered by Jonathan Claudius of Trustwave SpiderLabs.\* Security: Fixed a persistent XSS vulnerability in the access log panel discovered by Sasha Zivojinovic.\* Bug and security fixes.\* jQuery 1.7.2.
Changes in 4.4.1
\* Security: Add admin-side CSRF protection measures. Updates are highly recommended. Thanks, Neal Poole.\* Upload of SWF images requires 'image.create.trusted' privilege (applies to publisher, managing editor, copy editor, and designer roles).\* <txp:file\_download\_size /> improved from both i18n and l10n viewpoints.\* Developer: CSRF protection API in bouncer(), form\_token() and tInput().\* Developer: CSRF token included in output from form(), aLink(), eLink(), dLink(), and wLink() functions.\* phpass 0.4 / genuine.\* jQuery 1.6.1.
Changes in 4.4.0
\* Security: Fix several vulnerabilites. Updates are \*absolutely\* recommended for sites running any older version. Thanks, Neal Poole.\* Passwords are case-sensitive.\* Hotlink protection for files: Downloads from a web-accessible '/files' directory are inhibited. The '/file\_download/$id/example.foo' route is the only valid way to access downloadable files. Requires an Apache webserver and usage of the sample .htaccess file.\* Empty <txp:variable></txp:variable> container sets a variable's value to "".\* WordPress import tool fixed for WP 3.x.\* Context bug in messy mode fixed.\* get\_pref() now honours per-user prefs in all cases.\* Developer: txp\_validate() accepts a '$log' parameter to discern between 'real user login' vs. 'just validating credentials' usage.\* Developer: sendAsyncEvent() accepts parameter $format.\* Developer: Introducing escape\_js() and send\_script\_response().\* Developer: Taghandler functions \*must not\* contain upper case letters.\* Developer: Taghandler functions \*must not\* be defined within a <txp:php> element.\* Developer: phpass 0.3 / genuine for password portability, hashing, stretching, and salting. Old-style passwords will be migrated upon a user's first login. Persistent hash values in database are incompatible with previous versions.\* jQuery 1.5.1.
Changes in 4.3.0
\* Security: Fixed two XSS vulnerabilities (thanks Jorge Hoya and High-Tech Bridge). Updates are recommended.\* New Textpattern logo by courtesy of Philipp Schilling (belipe, http://www.psgd.de). Happy retirement to The Carver!\* Feature: Optional alternate URL for static image resources. Defined in constant 'ihu'.\* Feature: /category and /author lists for all content types, with conditionals and pagination.\* Feature: Optional top-level 'Home' tab for dashboard plugins.\* Feature: File titles.\* Feature: Multiple categories/sections in feeds via http://example.com/rss/?category=foo,bar&section=baz,omg and http://example.com/atom/?category=foo,bar&section=baz,omg).\* New tags: <txp:images />, <txp:image\_info />, <txp:image\_url />, <txp:image\_date />, <txp:if\_thumbnail />.\* New tags: <txp:link\_author />, <txp:image\_author />, <txp:file\_download\_author />.\* Changed: Verbose semantic admin-side markup.\* Changed: Explicit 'Create new $thing' button for pages and styles.\* Changed: <txp:image /> and <txp:article\_image /> accept 'width' and/or 'height' attribute.\* Changed: <txp:search\_input /> accepts a 'match' attribute. Possible values: 'exact', 'any' or 'all' (default).\* Changed: <txp:css /> accepts a 'name' attribute. Attribute 'n' is deprecated.\* Changed: <txp:image\_index /> accepts a 'category' attribute. Attribute 'c' is deprecated.\* Changed: <txp:breadcrumb /> accepts a 'separator' attribute. Attribute 'sep' is deprecated.\* Changed: <txp:if\_plugin /> accepts a 'version' attribute. Attribute 'ver' is deprecated.\* Changed: <txp:if\_custom\_field /> accepts a "value" attribute. Attribute "val" is deprecated. Added attributes 'match' and 'separator'.\* Changed: <txp:feed\_link />, <txp:link\_feed\_link />, <txp:popup />, <txp:search\_input /> accept a 'class' attribute.\* Changed: Use percent-encoding in URLs as a RFC-1738-compliant fallback for languages lacking a suitable transliteration array.\* Changed: Silence E\_STRICT warnings in "live" production mode.\* Removed: 'Friendly' CSS editor.\* Developer: pluggable\_ui() in the images tab.\* Developer: Stylesheets are stored as plain text in the database - no more base64-encoding.\* Developer: Textpacks, a method to install i18n strings from uploaded text files and from plugins.\* Developer: article\_format\_info(), link\_format\_info(), and get\_groups() convenience functions.\* Developer: i18n strings are not loaded while Textpattern renders the public-side style sheet.\* Textile 2.2 adds support for note lists, definition lists, thead, tbody, tfoot, table summary, table caption, table colgroup, glyphs for fractions, degrees and plusminus et cetera.\* jQuery 1.4.3.\* Incutio XML-RPC Library 1.7.4.
Changes in 4.2.0
\* Feature: Extendable admin-side themes. 'Classic' and 'Remora' theme contained in the core package, user-contributed themes available from http://textgarden.org/layouts/?c=txp-admin.\* Feature: Capability for multi-site file system layouts (thanks: Sam Weiss).\* Feature: Role-based permission checks for images, links and files.\* Feature: Save various pane toggle states.\* Feature: Store author of links and files.\* Feature: Automatic adjustment for DST (requires PHP 5.2+, fall back to manual adjustment for servers running older PHPs).\* Feature: Timezone selector in preferences (requires PHP 5.2+, GMT-based selector as a fallback).\* Feature: Default event preference setting (thanks: Mary).\* Fixed: PHP 5.3 compatibility (thanks: Mary).\* Fixed: When a user is deleted, reassign her assets.\* Fixed: Tag builders for <txp:category /> and <txp:section />.\* Fixed: Bogus "Article tags cannot be used outside an article context" warning in <txp:else />-branch of <txp:if\_keywords>.\* Fixed: Removed superflous &amp; encoding for article titles in <txp:recent\_comments />.\* Fixed: <txp:expires> uses "class" and "wraptag" attributes as intended.\* New tag: <txp:link\_id /> (thanks: Rick Silletti).\* New tag: <txp:yield />.\* Changed: Article timestamp is left untouched for draft, pending, or hidden articles published into the future.\* Changed: <txp:file\_download\_list /> tag accepts a comma-separated list of file ids in a new "id" attribute (thanks: Rick Silletti).\* Developer: pluggable\_ui() serves as a base for custom admin-side user interface panels, see new '\*\_ui' events below.\* Developer: New events 'log\_it', 'plugin\_lifecycle', 'plugin\_prefs', 'txp\_die', 'article\_ui', 'author\_ui', 'category\_ui', 'file\_ui', 'image\_ui', 'link\_ui', 'prefs\_ui', 'section\_ui'.\* Developer: Per-user preferences.\* Developer: Increased maximum plugin code size to MEDIUMTEXT (16 MiB).\* Developer: Increased maximum preferences value size to TEXT (64 KiB).\* Developer: Core support for unlimited custom fields (thanks: Gerhard Lazu).\* Developer: Thumbnail dimensions are stored in the image table.\* Developer: Sending requests to the admin-side with URL parameter 'app\_mode' set to 'async' suppress any default admin-side output. Think AJAX.\* Developer: Cached plugins are loaded in natural sort order.\* Developer: Deprecated cleanfInput(), escape\_output(), escape\_tags(), getAtt(), gAtt(), and input() functions. These will be removed in next release.\* Developer: Plugins can flag their interest in lifecycle events (install, uninstall, activate, deactivate). @see http://svn.textpattern.com/development/4.x-plugin-template/.\* Developer: Optional capability to jump to a plugin's options from the plugin tab. @see http://svn.textpattern.com/development/4.x-plugin-template/.\* jQuery 1.3.2.
Changes in 4.1.0
\* Version 4.1.0 was assigned to the experimental "crockery" branch and never officially released.
Changes in 4.0.8
\* Fixed: Current section/category is overwritten in <txp:section\_list> and <txp:category\_list> (container or form mode).\* Fixed: Registration and notification mails are not sent in PHP safe mode.\* Fixed: Error message upon article save from MySQL 5 in 'strict' mode.\* Fixed: Timeout during "clean URL test" causes WSOD in diagnostics tab.\* Partly fixed: Search result excerpt breaks HTML entities.\* Changed tag: <txp:if\_section> without a name attribute is now TRUE on a section page (old behaviour is preserved on upgrades).\* Changed tag: <txp:if\_category name=""> is now FALSE on a category page (old behaviour is preserved on upgrades).\* Changed tag: <txp:link\_url /> escapes its output.\* Changed tag: <txp:file\_download\_list /> uses 'wraptag', 'break', and 'label' attributes consistently like other tags.\* Speed: faster plugin loading from the database.\* Diagnostics tab: ignore line endings when checking for modified files and show full paths.\* Pages tab: allow 'default' page to be deleted if not used by a section.\* Developer: Fall back to standard page/permlink behaviour if custom\_url\_func() returns FALSE.\* Developer: set\_pref() accepts an optional "position" parameter.
Changes in 4.0.7
\* Parser: full nesting support, allowing unlimited nesting of identical tags.\* Parser: attribute values are parsed when enclosed in single quotes.\* Parser: unquoted attribute values are deprecated and will result in warnings when site status is not set to 'live'. Fix your templates and use double quotes to delimit attribute values.\* Feature: Expiry time for articles, accompanied by related tags.\* Speed: various components of the parsing process have been optimized, which compensates the impact of increased parser complexity, resulting in slightly faster parsing speed.\* New tags: <txp:expires />, <txp:if\_expired>, <txp:if\_expires>.\* New tag: <txp:if\_keywords>.\* New tags: <txp:if\_first\_section>, <txp:if\_last\_section>.\* New tags: <txp:if\_first\_category>, <txp:if\_last\_category>.\* New tag: <txp:if\_variable>.\* New tag: <txp:modified />.\* New tag: <txp:rsd /> specifies the Really Simple Discovery endpoint for XML-RPC clients.\* New tag: <txp:variable />.\* Changed tag: <txp:article /> can be used as a container tag.\* Changed tag: <txp:article /> allows new attributes 'wraptag' and 'break'.\* Changed tag: <txp:article\_custom /> can be used as a container tag.\* Changed tag: <txp:article\_custom /> allows new attributes 'wraptag' and 'break'.\* Changed tag: <txp:article\_custom /> allows comma separated list for 'id' attributes (this doesn't imply a sort order).\* Changed tag: <txp:category /> applies 'class' attribute to the <a> element when wraptag is empty.\* Changed tag: <txp:category\_list /> can be used as a container tag.\* Changed tag: <txp:category\_list /> accepts a 'children' attribute which limits the list depth to one level below the parent category when set to '0'.\* Changed tag: <txp:file\_download\_list /> can be used as a container tag.\* Changed tag: <txp:if\_article\_id /> defaults to the current article's id.\* Changed tag: <txp:linklist /> can be used as a container tag.\* Changed tag: <txp:recent\_comments /> can be used as a container tag.\* Changed tag: <txp:recent\_comments /> allows new attribute 'offset'.\* Changed tag: <txp:search\_input /> allows new attribute 'html\_id' to set the form's id.\* Changed tag: <txp:section /> applies the 'class' attribute to the <a> element when wraptag is empty.\* Changed tag: <txp:section\_list /> can be used as a container tag.\* XML-RPC: server now included in main Textpattern package, disabled by default.\* Articles tab: added 'article image' and 'keywords' as search criteria.\* Categories tab: categories cannot be accidentally deleted if they are still in use.\* Write tab: Concurrent article edit warning.\* Write tab: WYSIWYG preview for draft/pending/hidden articles.\* Images tab: added 'alternate text' and 'caption' as search criteria.\* Images tab: multi-edit functionality (delete, change category).\* Images tab: setting both thumb width and height to zero or empty values disables auto-thumbnailing.\* Links tab: multi-edit functionality (change category).\* Files tab: multi-edit functionality (delete, change category).\* Users tab: multi-edit functionality (delete, reset password, change privilege).\* Users tab: sortable and paginated author list.\* Users tab: 'last login' shown in author list.\* Plugins tab: User-selectable plugin load order.\* Plugins tab: sortable and multi-edit functionality (change order/status, delete).\* More verbose "First Post" article with basic instructions and helpful links.\* Developer: getTree() receives an optional 'table' name, returned array contains 'parent' field.\* Developer: New event 'pretext\_set'.\* Developer: new plugin type '3' for admin-only plugins (0=public, 1=admin+public, 2=library).\* Developer: fInput now uses htmlspecialchars on the value parameter (previously only escape\_title).\* Developer: pagelinkurl() calls a custom URL handler if present. NB: The custom URL handlers function signature is modified, as an additional flag discerns pagelinks from permlinks.\* Developer: $prefs['searchable\_article\_fields'] may contain an arrray of column names defining the fulltext-indexed set. A corresponding MySQL fulltext index must be established previously.\* jQuery 1.2.6.\* Ability to connect to the MySQL server through SSL.
Changes in 4.0.6
\* Security: add missing escape in SQL query (admin side).\* Security: safer use of txp\_login cookie + nonce (note: users are logged out after upgrading!).\* Security: fixed XSS vulnerability (thanks DSecRG) and input validation in setup script.\* Security: fixed local file include vulnerability (publisher only) in textpattern/index.php (thanks DSecRG and Victor).\* Security: fixed XSS vulnerability and parameter value overflow in comments preview (thanks DSecRG).\* Security: escape request method as shown on logs tab (thanks Victor).\* Changed tag: <txp:thumbnail /> allows non-JS links to the full-size image.\* Changed tag: <txp:article\_custom /> allows comma-separated lists for category, section and author attributes (thanks Manfre).\* Changed tag: <txp:linklist /> allows comma-separated list for category attribute.\* Changed tag: <txp:file\_download\_list /> allows comma-separated list for category attribute.\* Changed tag: <txp:recent\_articles /> allows comma-separated lists for category and section attribute.\* Changed tag: <txp:related\_articles /> allows comma-separated list for section attribute.\* Changed tag: <txp:search\_result\_excerpt /> allows a custom "break" attribute defaulting to an ellipsis.\* Deprecated tag: <txp:sitename /> replaced by <txp:site\_name />.\* Deprecated tag: <txp:request\_uri /> replaced by <txp:page\_url />.\* Deprecated tag: <txp:s /> replaced by <txp:page\_url type="s" />.\* Deprecated tag: <txp:c /> replaced by <txp:page\_url type="c" />.\* Deprecated tag: <txp:q /> replaced by <txp:page\_url type="q" />.\* Deprecated tag: <txp:id /> replaced by <txp:page\_url type="id" />.\* Deprecated tag: <txp:pg /> replaced by <txp:page\_url type="pg" />.\* Deprecated function: escape\_output(), use htmlspecialchars() instead.\* Deprecated function: gAtt() (and getAtt()), use lAtts() instead.\* Deprecated variable: $txpcfg['txpath'], use constant 'txpath' instead.\* New tag: <txp:if\_search\_results> </txp:if\_search\_results>.\* New tag: <txp:search\_term />.\* New languages: Croatian, Korean, Português (Brasil), Serbian (Latin + Cyrillic), Turkish and Vietnamese (thanks: Filip Baraka, Alexsander Albert Santana, Vladimir Siljkovic, Süleyman Şentürk, Quang Anh Do).\* Developer: using add\_privs() for admin-side plugins is now required (used to be optional for publisher-only plugins).\* Developer: dmp() prints debug output to a file in the temporary directory according to preferences. Define 'txpdmpfile' for the file name.\* Developer: Added 'modified' and 'status' to global $thisarticle array.\* Developer: Added 'is\_logged\_in()' function to check on the public side if the visitor is logged in on the admin side.\* Speed: less SQL queries (-2 for individual article pages, -1 for other pages).\* Speed: recent\_comments tag (thanks Manfre) and admin side comments list only uses 1 query.\* Added 'password reset' functionality (with confirmation email) on the login screen.\* Update to jQuery 1.2.2 as a default JavaScript library.\* Fix textile list incompatibility with PHP 5.2.4 (and higher).\* Fix http-auth when using lighttpd or (mostly) apache+fcgi.\* Fix HTTPS protocol check for ISAPI with IIS.\* Fix use of article tags on a sticky article page.\* Pages, categories and styles cannot be accidentally deleted if they are used on other tabs.\* Corrections in the tag builder.\* Refrain from showing sticky articles from non-frontpage sections in search results.\* Enable separate search section for messy URL mode.\* Many, many minor improvements, see: http://dev.textpattern.com/log/development/4.0?action=stop\_on\_copy&rev=2802&stop\_rev=2471.
Changes in 4.0.5
\* Fixed security issue on public-side (XSS) (thanks zarathu).\* Fixed path disclosure issue (thanks zarathu).\* Search for posted and last modifed dates in article list.\* New tag: <txp:hide /> as a container for comments and other internal content.\* Changed tags: <txp:comments />, <txp:category\_list />, <txp:section\_list /> and <txp:image\_index /> support 'sort' attribute.\* Distribute jQuery 1.1.2 as a default JavaScript library.\* Keep image properties on replacement.\* Add 'delete thumbnail' function.\* Support back end branding: customisable logo and colour bar.\* Table sort indicators.\* Textile improvements.\* Fix non-utf8 mails (iso 8859-1).\* Better wrapping in admin-interface to prevent horizontal scrollbar.\* Add comment status to comment notification mails.\* Fix "infinite" pagination in rare edge cases.\* Work around apache bug for file-downloads (in connection with mod\_deflate).\* Fix error messages on wrong logins for older MySQL versions.\* Fix comment spam blacklist false positives (see FAQ for 4.0.4).\* Fix file\_download-tag from showing the same URL for different downloads (see FAQ for 4.0.4).\* Fix disappearing comment preferences in certain ciscumstances (see FAQ for 4.0.4).\* Fix 'active class' in section\_list, category\_list.\* Better cooperation with some proxies (and other HTTP/1.0 clients).\* Smarter comment submit button emphasises preview step.\* Optionally hide spam comments in back end list.\* Truncate longish article category titles in the write screen.\* Handle thumbnailing of larger images.\* Better MoveableType import.\* Fix some more IIS issues.\* New callback event: 'textpattern\_end'.\* New callback event: 'ping'.\* New tag: <txp:article\_url\_title />.\* Changed tag: <txp:permlink /> loses default title attribute.\* Changed tag: <txp:file\_download\_link /> returns filename as an additional URL part.\* Many, many minor improvements, see: http://dev.textpattern.com/log/development/4.0/?action=stop\_on\_copy&rev=2443&stop\_rev=1963.
Changes in 4.0.4:
\* RSS 2.0 support.\* RSS and Atom feed fixes and improvements.\* Many improvements to admin interface XHTML markup and CSS.\* Many subtle improvements to the admin UI.\* Add automatical detection of and working with SSL.\* add nowidow-attribute to article tags.\* Adapt navigation-elemts to the user's permissions.\* Lots of Textile improvements.\* Fixed sending Last-Modified header.\* Better indexing for faster article list queries.\* Update to tag builders.\* Show (source of) plugin-help before installation.\* Improvements in translations (and translateables) (thanks Skubidu and others).\* New translations: Indonesian, Hebrew, Hungarian, Romanian.\* Improved handling of comma-separated values in tag attributes.\* article, article\_custom tags: new 'sort' attribute.\* New conditional if\_article\_id.\* author, category, category1, category2 tags: can link to any section by name.\* Improved XHTML attributes on many tags (class, rel).\* time and date tags: new attributes for overriding language, GMT.\* css, feed\_link tags: easier generation of XHTML 'link' tags.\* New link tags: link\_category, link\_date, link\_name, link\_url.\* Navigation tag improvements (new attributes, improved XHTML output).\* Warn if article or comment tags are used in the wrong context.\* Improved error checking, reporting and diagnostics.\* Stricter 404 checking (missing category, author, messy article ID).\* Simplify and improve comment preview and input form tags.\* Improved article load/parse logic on individual article pages.\* Workaround some rare FCGI problems with HTTP headers.\* Fix some IIS clean URL issues.\* Improved multi-edit support on admin pages.\* Deprecate old-style PHP tags.\* Don't lose your place in admin lists when returning from an edit.\* Extra diagnostic info and pre-flight tests.\* Better time zone handling.\* Remember and automatically reuse thumbnail size settings.\* Textile: fix inline class/style/lang.\* Warn when article and comment tags are used in the wrong place.\* New 'if\_plugin' conditional checks for an active plugin, with optional version number.\* Fix an occasional time zone bug.\* Fix 404 errors on clean category URLs.\* Add backtrace list to error messages in Debug mode.\* Add limit attribute to search\_result\_excerpt tag.\* Add escape and default attributes to custom\_field tag.\* Fix image-upload for outdated gdlib-installations (wet).\* Fix label attribute breadcrumb function (richard).\* Add if\_author, if\_article\_author (with attribute 'name') (mary).\* Allow multiple sections for if\_article\_section (like for if\_section, if\_category) (mary).\* Display link category's title, rather than name, in the links page (mary).\* Extend article\_image tag to optionally display the article image thumbnail (mary).\* Many minor bugfixes.
Changes in 4.0.3:
\* fixed 2 potential security holes(detected in internal code review). Updade is recommended.\* Textile i18n improvements.\* Add a bulk Ban function for comments.\* Automatically hide comments when banning an IP.\* Fix comments 'page by'.\* Fix double translated linebreaks in comments.\* Fix nofollow in comments.\* Fix preview without textile in certain edge cases.\* Seperate hidden comments into unmoderated and spam.\* Add bulk changing of comment status (visible, moderated, spam).\* Better error-handling in comments-form when critical fields are missing.\* New tag: <txp:comments\_error /> (and conditional <txp:if\_comments\_error>).\* Style-able error-message and form-elements via CSS (class=comments\_warn).\* Plugin-Authors: Add callbacks for future spam-plugins [comment.save, comment.form].\* Plugin-Authors: Add getComment() and comment\_evaluator for future spam-plugins.\* Plugin-Authors: Allow (optionally, transparently) for installing compressed plugins.\* Plugin-Authors: Add window events using addEvent, to allow multiple events loading at window.onload, useful for admin side plugins.\* Improve MySQL 5 compatibility.\* Add comment edit link to notification emails.\* Make comment-time format customizable in tag (mary).\* Add offset-attribute to file\_download\_list (mary).\* Make older, newer and link\_to\_home work more consistantly with other nav-tags (mary).\* Fix mailto: links.\* Fix tag trace output for enclosing tags.\* Update comment\_count after import.\* Add extra info to the tag trace (SQL queries, conditional tag results, page template and form names).
Changes in 4.0.2:
\* Fix a bug in 404 handling on some fastcgi servers.\* Fix a bug that prevented file\_download\_list from working properly.\* Fix a redirection bug in the comment form.\* Fix occasional category URL i18n problems.\* Remove extra trailing slash in some breadcrumb links.\* Make articles by author work properly.\* Make feed\_link support section and category correctly.\* Add correct content-type to popup comments page.\* Fix an obscure feed caching bug.\* Fix a possible problem with circular dependencies when loading plugins.\* Fix timestamps in Atom feeds.\* Fix occasional Atom encoding issues.\* UI improvements when creating/copying/deleting styles.\* Improve performance of the language loader.\* Make date-based permlinks work properly in comment emails.\* Better handling of invalid login cookies.\* Use page templates for 404 (and other) error pages.\* Minor Atom validation improvements.\* Improved comment conditionals logic; txp:if\_comments now means 'if the current article has at least 1 comment'.\* Minor performance improvements.\* New txp:if\_status and txp:page\_url tags.\* Prevent config.php whitespace from breaking stylesheets.\* UI improvements to JavaScript toggles.\* Improved comment input form HTML markup.\* Improved txp:section and txp:category tags.\* New tags: txp:if\_different, txp:if\_first\_article, txp:if\_last\_article.\* Localise the XML feed link title.\* Better encoding of article titles.\* Fix rare problems caused by magic\_quotes\_runtime.\* Improved file upload forms.\* New language: Latvian.\* Support section and category titles in txp:breadcrumb.\* Allow decimals=0 in txp:file\_download\_size tag.\* Minor diagnostic info changes.\* New labeltag attribute on most list tags.\* Restore use\_textile preference.\* Minor HTML validation fixes.\* Developers: new safe\_upsert() database function.\* Fall back to English if no language data is available.\* Support comma-separated names in txp:if\_category and txp:if\_section.\* Identify the offending tag when displaying error messages in templates and forms.\* Add include\_default attribute to txp:section\_list.\* Add support for changing status and section on multiple articles at once.\* Fix nested category titles in txp:breadcrumb.\* Improved comment message markup.\* Restore the comments\_closed message.\* Better handling of per-article Use Textile selection.\* Add class attribute to comments\_invite for CSS classes.\* Added 4 attributes to comments\_invite: showcount, wraptag, textonly (just the invite-text) and showalways (also display on individual article-pages). Example: <comments\_invite wraptag="p" showcount="0" textonly="1" showalways="1" />\* Support c-style backslash sequences in tag attributes.\* Fix some rare bugs in feeds, admin list paging.\* Add a pageby attribute to txp:article, for multi-column lists.\* Fix txp:link\_to\_next/prev so they work at the top of a page.\* Minor speed improvements, new class and linkclass attributes for txp:breadcrumb tag.\* Added txp:comments\_preview and txp:if\_comments\_preview tags. Example usage: <txp:if\_comments\_preview> <div id="cpreview" style="background-color:#FF0"><b>Hello, the following is your preview</b> <txp:comments\_preview /><txp:comments\_form preview="1" /> </div> </txp:if\_comments\_preview>\* Fixed unparsed excerpts in Feeds.\* Textile: smarter handling of relative link and image paths.\* Textile: stop footnote links from clashing in article lists.\* Added fi\_FI locale support.
Changes in 4.0.1:
\* Fixed some serious security issues. Updates are strongly recommended.\* Fixed textile problems (missing block-elements in some cases; notextile; span-handling).\* Fixed updating of comment\_count when deleting comments.\* Fixed bug in Atom feeds (multiple identical excerpts).\* Added new permission level (article.edit.own.published, allows you to edit own articles \_after\_ publishing).\* Added very basic 404 support (correct 404 Headers are sent).\* Added new languages (Islenska, Suomi).\* Fixed bugs in articles by author (clean and messy URLs).\* Fixed category\_list to use clean URLs when appropriate.\* Fixed installation problems with certain database prefixes by limiting possible prefixes.\* Fixed timezone issue with ymd permlinks.\* Fixed GMT formatting of dates.\* Fixed bugs with i18n-ascii.txt and added a few new items.\* Added language overrides to dirifying url\_titles.\* Several improvements to url\_titles (including not updating them until published).\* Several improvements to diagnostics.\* Added style and class attributes to txp:permlink.\* Fixed bugs with multibyte strings in some URLs.\* Added contextual information to page title on the admin side.\* Fixed problems with larger file downloads.\* Fixed file\_download\_link with multiple files.\* Fixed logging of file downloads (only finished downloads are counted; aborts go to normal logs).\* Fixed problems with sending mail on some systems.\* Improvements to older/newer tags.\* Developers: added more consistent URL generation via new pagelinkurl() function.\* Developers: added callbacks to public side (for example to handle 404s).

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


