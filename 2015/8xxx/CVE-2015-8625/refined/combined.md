=== Content from lists.wikimedia.org_9e104674_20250125_045120.html ===


[lists.wikimedia.org](/hyperkitty/)

[Sign In](/accounts/login/?next=/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/message/R3SCYWFP4J6IXVKWQORH74XTD4TO44MA/)
[Sign Up](/accounts/signup/?next=/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/message/R3SCYWFP4J6IXVKWQORH74XTD4TO44MA/)

* [Sign In](/accounts/login/?next=/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/message/R3SCYWFP4J6IXVKWQORH74XTD4TO44MA/)
* [Sign Up](/accounts/signup/?next=/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/message/R3SCYWFP4J6IXVKWQORH74XTD4TO44MA/)

* [Manage this list](/postorius/lists/mediawiki-announce.lists.wikimedia.org/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

### 2025

* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2025/1/)

### 2024

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2024/1/)

### 2023

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2023/1/)

### 2022

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2022/1/)

### 2021

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2021/1/)

### 2020

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2020/1/)

### 2019

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2019/1/)

### 2018

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2018/1/)

### 2017

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2017/1/)

### 2016

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2016/1/)

### 2015

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2015/1/)

### 2014

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2014/1/)

### 2013

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2013/1/)

### 2012

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2012/1/)

### 2011

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2011/1/)

### 2010

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2010/1/)

### 2009

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2009/1/)

### 2008

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2008/1/)

### 2007

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2007/1/)

### 2006

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2006/1/)

### 2005

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/12/)
* [November](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/11/)
* [October](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/10/)
* [September](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/9/)
* [August](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/8/)
* [July](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/7/)
* [June](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/6/)
* [May](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/5/)
* [April](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/4/)
* [March](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/3/)
* [February](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/2/)
* [January](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2005/1/)

### 2004

* [December](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/2004/12/)

[List overview](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/)

[Download](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/export/mediawiki-announce%40lists.wikimedia.org-R3SCYWFP4J6IXVKWQORH74XTD4TO44MA.mbox.gz?message=R3SCYWFP4J6IXVKWQORH74XTD4TO44MA "This message in gzipped mbox format")

[thread](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/thread/R3SCYWFP4J6IXVKWQORH74XTD4TO44MA/#R3SCYWFP4J6IXVKWQORH74XTD4TO44MA)

# [MediaWiki-announce] Security Release: 1.26.1, 1.25.4, 1.24.5 and 1.23.12

[Chad](/hyperkitty/users/106c86c03e624f118ae876f1a13c1316/ "See the profile for Chad")

17 Dec
2015

17 Dec
'15

7:25 p.m.

I would like to announce the release of MediaWiki 1.26.1, 1.25.4, 1.24.5,
and
1.23.12.

These releases fix five security issues in core, in addition to other bug
fixes. Download links are given at the end of this email

== Security fixes ==

(T117899) SECURITY: $wgArticlePath can no longer be set to relative paths
that
do not begin with a slash. This enabled trivial XSS attacks. Configuration
values such as "[http://my.wiki.com/wiki/$1](http://my.wiki.com/wiki/%241)" are fine, as are "/wiki/$1". A
value such as "$1" or "wiki/$1" is not and will now throw an error

(T119309) SECURITY: Use hash\_compare() for edit token comparison

(T118032) SECURITY: Don't allow cURL to interpret POST parameters starting
with
'@' as file uploads

(T115522) SECURITY: Passwords generated by User::randomPassword() can no
longer
be shorter than $wgMinimalPasswordLength

(T97897) SECURITY: Improve IP parsing and trimming. Previous behavior could
result in improper blocks being issued

(T109724) SECURITY: Special:MyPage, Special:MyTalk, Special:MyContributions
and
related pages no longer use HTTP redirects and are now redirected by
MediaWiki

== Note about EOL of 1.24.x ==

Please note that 1.24.5 marks the end of support for the 1.24.x series of
releases. Technically this ended a few weeks ago with the release of 1.26.0
but
we dropped one final release of 1.24.x here to give it a nicer send off for
those who have not yet upgraded.

== Release notes ==

Full release notes for 1.26.1:
<https://www.mediawiki.org/wiki/Release_notes/1.26>

Full release notes for 1.25.4:
<https://www.mediawiki.org/wiki/Release_notes/1.25>

Full release notes for 1.24.5:
<https://www.mediawiki.org/wiki/Release_notes/1.24>

Full release notes for 1.23.12:
<https://www.mediawiki.org/wiki/Release_notes/1.23>

For information about how to upgrade, see
[https://www.mediawiki.org/wiki/Manual:Upgrading](https://www.mediawiki.org/wiki/Manual%3AUpgrading)

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
1.26.1
\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
Download:
<https://releases.wikimedia.org/mediawiki/1.26/mediawiki-1.26.1.tar.gz>
<https://releases.wikimedia.org/mediawiki/1.26/mediawiki-core-1.26.1.tar.gz>

Patch to previous version:
<https://releases.wikimedia.org/mediawiki/1.26/mediawiki-1.26.1.patch.gz>
<https://releases.wikimedia.org/mediawiki/1.26/mediawiki-i18n-1.26.1.patch.gz>

GPG signatures:
<https://releases.wikimedia.org/mediawiki/1.26/mediawiki-1.26.1.tar.gz.sig>
<https://releases.wikimedia.org/mediawiki/1.26/mediawiki-1.26.1.patch.gz.sig>
[https://releases.wikimedia.org/mediawiki/1.26/mediawiki-core-1.26.1.tar.gz.s...](https://releases.wikimedia.org/mediawiki/1.26/mediawiki-core-1.26.1.tar.gz.sig)

Public keys:
<https://www.mediawiki.org/keys/keys.html>

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
1.25.4
\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
Download:
<https://releases.wikimedia.org/mediawiki/1.25/mediawiki-1.25.4.tar.gz>
<https://releases.wikimedia.org/mediawiki/1.25/mediawiki-core-1.25.4.tar.gz>

Patch to previous version:
<https://releases.wikimedia.org/mediawiki/1.25/mediawiki-1.25.4.patch.gz>
<https://releases.wikimedia.org/mediawiki/1.25/mediawiki-i18n-1.25.4.patch.gz>

GPG signatures:
<https://releases.wikimedia.org/mediawiki/1.25/mediawiki-1.25.4.tar.gz.sig>
<https://releases.wikimedia.org/mediawiki/1.25/mediawiki-1.25.4.patch.gz.sig>
[https://releases.wikimedia.org/mediawiki/1.25/mediawiki-core-1.25.4.tar.gz.s...](https://releases.wikimedia.org/mediawiki/1.25/mediawiki-core-1.25.4.tar.gz.sig)

Public keys:
<https://www.mediawiki.org/keys/keys.html>

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
1.24.5
\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
Download:
<https://releases.wikimedia.org/mediawiki/1.24/mediawiki-1.24.5.tar.gz>
<https://releases.wikimedia.org/mediawiki/1.24/mediawiki-core-1.24.5.tar.gz>

Patch to previous version:
<https://releases.wikimedia.org/mediawiki/1.24/mediawiki-1.24.5.patch.gz>
<https://releases.wikimedia.org/mediawiki/1.24/mediawiki-i18n-1.24.5.patch.gz>

GPG signatures:
<https://releases.wikimedia.org/mediawiki/1.24/mediawiki-1.24.5.tar.gz.sig>
<https://releases.wikimedia.org/mediawiki/1.24/mediawiki-1.24.5.patch.gz.sig>
[https://releases.wikimedia.org/mediawiki/1.24/mediawiki-core-1.24.5.tar.gz.s...](https://releases.wikimedia.org/mediawiki/1.24/mediawiki-core-1.24.5.tar.gz.sig)

Public keys:
<https://www.mediawiki.org/keys/keys.html>

\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
1.23.12
\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*\*
Download:
<https://releases.wikimedia.org/mediawiki/1.23/mediawiki-1.23.12.tar.gz>
<https://releases.wikimedia.org/mediawiki/1.23/mediawiki-core-1.23.12.tar.gz>

Patch to previous version:
<https://releases.wikimedia.org/mediawiki/1.23/mediawiki-1.23.12.patch.gz>
[https://releases.wikimedia.org/mediawiki/1.23/mediawiki-i18n-1.23.12.patch.g...](https://releases.wikimedia.org/mediawiki/1.23/mediawiki-i18n-1.23.12.patch.gz)

GPG signatures:
<https://releases.wikimedia.org/mediawiki/1.23/mediawiki-1.23.12.tar.gz.sig>
<https://releases.wikimedia.org/mediawiki/1.23/mediawiki-1.23.12.patch.gz.sig>
[https://releases.wikimedia.org/mediawiki/1.23/mediawiki-core-1.23.12.tar.gz....](https://releases.wikimedia.org/mediawiki/1.23/mediawiki-core-1.23.12.tar.gz.sig)

Public keys:
<https://www.mediawiki.org/keys/keys.html>

-Chad H. & Chris S.

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Back to the thread](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/thread/R3SCYWFP4J6IXVKWQORH74XTD4TO44MA/#R3SCYWFP4J6IXVKWQORH74XTD4TO44MA)

[Back to the list](/hyperkitty/list/mediawiki-announce%40lists.wikimedia.org/)

Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.7.



=== Content from phabricator.wikimedia.org_d5f046a8_20250126_060440.html ===
Page Menu[HomePhabricator](/)

* SearchConfigure Global Search

[Log In](https://phabricator.wikimedia.org/auth/start/?next=%2FT118032)[Create Task](/maniphest/task/edit/nocreate/) [Maniphest](/maniphest/)  T118032
# Error thrown by VirtualRESTService when POST variable starts with '@'Closed, Resolved[Public](/policy/explain/PHID-TASK-6ewnka5eskmutpcz6erx/view/)Actions

* [Edit Task](/maniphest/task/edit/118032/)
* Edit Related Tasks...
* [Create Subtask](/maniphest/task/subtask/118032/)
* [Edit Parent Tasks](/search/rel/task.has-parent/PHID-TASK-6ewnka5eskmutpcz6erx/)
* [Edit Subtasks](/search/rel/task.has-subtask/PHID-TASK-6ewnka5eskmutpcz6erx/)
* [Merge Duplicates In](/search/rel/task.merge-in/PHID-TASK-6ewnka5eskmutpcz6erx/)
* [Close As Duplicate](/search/rel/task.close-as-duplicate/PHID-TASK-6ewnka5eskmutpcz6erx/)
* Edit Related Objects...
* [Edit Commits](/search/rel/task.has-commit/PHID-TASK-6ewnka5eskmutpcz6erx/)
* [Edit Mocks](/search/rel/task.has-mock/PHID-TASK-6ewnka5eskmutpcz6erx/)
* Subscribe
* [Mute Notifications](/subscriptions/mute/PHID-TASK-6ewnka5eskmutpcz6erx/)
* [Protect as security issue](/wmf/escalate-task/118032/)
* [Award Token](/token/give/PHID-TASK-6ewnka5eskmutpcz6erx/)
* [Flag For Later](/flag/edit/PHID-TASK-6ewnka5eskmutpcz6erx/)

Assigned To

|  | [Catrope](/p/Catrope/) |
| --- | --- |

Authored By

|  | [Catrope](/p/Catrope/) |
| --- | --- |
| Nov 6 2015, 9:10 PM2015-11-06 21:10:41 (UTC+0) |

Tags

* [MediaWiki-General](/tag/mediawiki-general/)
* [Patch-For-Review](/tag/patch-for-review/)
* [MW-1.25-release](/tag/mw-1.25-release/) [(Backlog)](/project/board/327/)
* [MW-1.24-release](/tag/mw-1.24-release/) [(Backlog)](/project/board/219/)
* [MW-1.23-release](/tag/mw-1.23-release/) [(Backlog)](/project/board/603/)
* [MW-1.26-release](/tag/mw-1.26-release/) [(Backlog)](/project/board/1177/)
* [MW-1.27-release (WMF-deploy-2016-01-12\_(1.27.0-wmf.10))](/tag/wmf-deploy-2016-01-12_%281.27.0-wmf.10%29/) [(Backlog)](/project/board/1626/)
* [MW-1.27-release-notes](/tag/mw-1.27-release-notes/)
* [Security](/tag/security/)
Referenced Files

|  | [F3113508: omnibus-v3-REL1\_24.patch](/F3113508) |
| --- | --- |
| Dec 24 2015, 12:02 AM2015-12-24 00:02:43 (UTC+0) |

|  | [F3110761: omnibus-master.patch](/F3110761) |
| --- | --- |
| Dec 24 2015, 12:02 AM2015-12-24 00:02:43 (UTC+0) |

|  | [F3112777: omnibus-v2-REL1\_23.patch](/F3112777) |
| --- | --- |
| Dec 24 2015, 12:02 AM2015-12-24 00:02:43 (UTC+0) |

|  | [F3110764: omnibus-REL1\_25.patch](/F3110764) |
| --- | --- |
| Dec 24 2015, 12:02 AM2015-12-24 00:02:43 (UTC+0) |

|  | [F2976920: T118032b.patch](/F2976920) |
| --- | --- |
| Nov 19 2015, 9:31 PM2015-11-19 21:31:01 (UTC+0) |

|  | [F2961455: 0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch](/F2961455) |
| --- | --- |
| Nov 14 2015, 1:40 AM2015-11-14 01:40:22 (UTC+0) |

|  | [F2961094: 0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch](/F2961094) |
| --- | --- |
| Nov 13 2015, 10:04 PM2015-11-13 22:04:55 (UTC+0) |

|  | [F2924372: 0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch](/F2924372) |
| --- | --- |
| Nov 7 2015, 12:44 AM2015-11-07 00:44:30 (UTC+0) |

[View All 9 Files](/file/ui/curtain/list/PHID-TASK-6ewnka5eskmutpcz6erx/)Subscribers

|  | [Aklapper](/p/Aklapper/) |
| --- | --- |

|  | [Catrope](/p/Catrope/) |
| --- | --- |

|  | [• csteipp](/p/csteipp/) |
| --- | --- |

|  | [• demon](/p/demon/) |
| --- | --- |

|  | [gerritbot](/p/gerritbot/) |
| --- | --- |

|  | [Grunny](/p/Grunny/) |
| --- | --- |

|  | [Krinkle](/p/Krinkle/) |
| --- | --- |

[View All 11 Subscribers](/subscriptions/list/PHID-TASK-6ewnka5eskmutpcz6erx/)
# Description

This happens because VRS doesn't set CURLOPT\_SAFE\_UPLOAD to true (it's supposed to default to true in PHP >=5.6.0, but it doesn't in production with 5.6.99-hhvm), which allows curl to try to be "helpful" by interpreting array( 'foo' => '@bar' ) as a file upload.

I haven't managed to exploit this from the web interface because Parsoid doesn't seem to like file uploads and returns a 404 rather than exposing the contents of the file. Also, absolute paths like @/etc/crontab don't appear to work.

---

**patches:**

* master - T118032b.patch4 KB[Download](https://phab.wmfusercontent.org/file/download/tl6ksfyxh2iedualhvxq/PHID-FILE-aesylqwl2typfm3b7rvg/T118032b.patch)
* 1.23 - included in omnibus-v2-REL1\_23.patch34 KB[Download](https://phab.wmfusercontent.org/file/download/uu3qgib3zyevql7idjgv/PHID-FILE-7x5oq7gajssyjlsaaz7g/omnibus-v2-REL1_23.patch)
* 1.24 - included in omnibus-v3-REL1\_24.patch35 KB[Download](https://phab.wmfusercontent.org/file/download/j5mu74ndqtwhksd4b4zf/PHID-FILE-4u6vrxt47rplih6qsq27/omnibus-v3-REL1_24.patch)
* 1.25 - included in omnibus-REL1\_25.patch34 KB[Download](https://phab.wmfusercontent.org/file/download/tjxjyoghtkbssdpetm4n/PHID-FILE-jccyk6q45n5ih5gtfhsp/omnibus-REL1_25.patch)
* 1.26 - included in omnibus-master.patch18 KB[Download](https://phab.wmfusercontent.org/file/download/q2q32ah3x72xa4w7jzxs/PHID-FILE-bsvuliidn6ldcybz3vwc/omnibus-master.patch)

**affected versions:**

**type:** CWE-159

**CVE:** CVE-2015-8625

# Details

|  | Subject | Repo | Branch | Lines +/- |
| --- | --- | --- | --- | --- |
|  | [SECURITY: Work around CURL insanity breaking POST parameters that start with '@'](https://gerrit.wikimedia.org/r/c/259948) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [master](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/master) | +29 -1 |
|  | [SECURITY: Work around CURL insanity breaking POST parameters that start with '@'](https://gerrit.wikimedia.org/r/c/259937) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [REL1\_26](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/REL1_26) | +29 -1 |
|  | [SECURITY: Work around CURL insanity breaking POST parameters that start with '@'](https://gerrit.wikimedia.org/r/c/259926) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [REL1\_25](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/REL1_25) | +29 -1 |
|  | [SECURITY: Work around CURL insanity breaking POST parameters that start with '@'](https://gerrit.wikimedia.org/r/c/259902) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [REL1\_23](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/REL1_23) | +29 -1 |
|  | [SECURITY: Work around CURL insanity breaking POST parameters that start with '@'](https://gerrit.wikimedia.org/r/c/259913) | [mediawiki/core](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core) | [REL1\_24](https://gerrit.wikimedia.org/r/plugins/gitiles/mediawiki/core/%2B/REL1_24) | +29 -1 |

[Customize query in gerrit](https://gerrit.wikimedia.org/r/#/q/bug:T118032)
# Related ObjectsSearch...

* Task Graph
* Mentions

|  |  | Status | Subtype | Assigned | Task |
| --- | --- | --- | --- | --- | --- |
|  |  | Resolved |  | [Catrope](/p/Catrope/) | T117938 [Parsoid failures trying to save or preview posts with @ mentions on mw.org (curl error: 26)](/T117938) |
|  |  | Resolved |  | [• demon](/p/demon/) | T115722 [MediaWiki Security release 1.25.4](/T115722) |
|  |  | Resolved |  | [Catrope](/p/Catrope/) | T118032 [Error thrown by VirtualRESTService when POST variable starts with '@'](/T118032) |

Mentioned In [T119013: Phabricator unsubscribed me from a task?](/T119013)
[T117938: Parsoid failures trying to save or preview posts with @ mentions on mw.org (curl error: 26)](/T117938) Mentioned Here [T118988: Use of undefined constant CURLOPT\_SAFE\_UPLOAD](/T118988)
### Event Timeline

[Catrope](/p/Catrope/) created this task.[Nov 6 2015, 9:10 PM2015-11-06 21:10:41 (UTC+0)](#1789871)[Catrope](/p/Catrope/) claimed this task.[Catrope](/p/Catrope/) raised the priority of this task from  to Medium.[Catrope](/p/Catrope/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-virxmi6tf2hpsai/)[Catrope](/p/Catrope/) added projects: [MediaWiki-General](/tag/mediawiki-general/), [acl\*security](/tag/acl_security/).[Catrope](/p/Catrope/) changed the visibility from "Public (No Login Required)" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-6ki4rk435gy534n/)".[Catrope](/p/Catrope/) changed the edit policy from "All Users" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-6amh3fhsfcbi7kp/)".[Catrope](/p/Catrope/) changed Security from None to Software security bug.[Catrope](/p/Catrope/) added subscribers: [Catrope](/p/Catrope/), [• Mattflaschen-WMF](/p/Mattflaschen-WMF/), [Aklapper](/p/Aklapper/), [• Spage](/p/Spage/).Comment Actions

0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch1 KB[Download](https://phab.wmfusercontent.org/file/download/x5iutho4gtldobtzuado/PHID-FILE-klwgjs6cdqvd47lq6ueg/0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch)

[Legoktm](/p/Legoktm/) mentioned this in [T117938: Parsoid failures trying to save or preview posts with @ mentions on mw.org (curl error: 26)](/T117938).[Nov 6 2015, 10:27 PM2015-11-06 22:27:52 (UTC+0)](#1790077)[• csteipp](/p/csteipp/) subscribed.[Nov 6 2015, 10:29 PM2015-11-06 22:29:49 (UTC+0)](#1790091)Comment Actions

Patch looks good to me. It doesn't look like it should break anything else in core.

I'm wondering if CurlHttpRequest in core should be patched too?

[@awight](/p/awight/), it looks like DonationInterface does a bunch of curl POST's, you want to make sure it doesn't have this same flaw?

[• csteipp](/p/csteipp/) added a subscriber: [awight](/p/awight/).[Nov 6 2015, 10:30 PM2015-11-06 22:30:17 (UTC+0)](#1790093)[• csteipp](/p/csteipp/) raised the priority of this task from Medium to Unbreak Now!.Edited · [Nov 6 2015, 11:04 PM2015-11-06 23:04:51 (UTC+0)](#1790178)Comment Actions

I'm suspicious ApiContentTranslationPublish.php and TranslationNotificationJob.php could be used to exploit this, through their use of MWHttpRequest.

I've looked through pretty much all extensions using MWHttpRequest, and it doesn't look like any try to use @ intentionally. So I think setting CURLOPT\_SAFE\_UPLOAD in CurlHttpRequest shouldn't break anything.

[Catrope](/p/Catrope/) added a comment.[Nov 7 2015, 12:44 AM2015-11-07 00:44:30 (UTC+0)](#1790417)Comment Actions

0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch2 KB[Download](https://phab.wmfusercontent.org/file/download/bnovj4fssudv4yhpdvx2/PHID-FILE-o45zrmowf4dwawkc6k6f/0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch)

Updated patch that also patches CurlHttpRequest

[• csteipp](/p/csteipp/) added a comment.[Nov 7 2015, 12:57 AM2015-11-07 00:57:09 (UTC+0)](#1790435)Comment Actions
> In [T118032#1790417](/T118032#1790417), [@Catrope](/p/Catrope/) wrote:
>
> 0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch2 KB[Download](https://phab.wmfusercontent.org/file/download/bnovj4fssudv4yhpdvx2/PHID-FILE-o45zrmowf4dwawkc6k6f/0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch)
>
> Updated patch that also patches CurlHttpRequest

LGTM. Let's deploy this Monday.

[• Mattflaschen-WMF](/p/Mattflaschen-WMF/) added a comment.[Nov 8 2015, 5:39 AM2015-11-08 05:39:32 (UTC+0)](#1791728)Comment Actions
> (it's supposed to default to true in PHP >=5.6.0, but it doesn't in production with 5.6.99-hhvm)

We should file this upstream against whatever repo the HHVM CURL implementation is in.

[Catrope](/p/Catrope/) added a comment.[Nov 11 2015, 1:42 AM2015-11-11 01:42:08 (UTC+0)](#1798222)Comment Actions
> In [T118032#1790435](/T118032#1790435), [@csteipp](/p/csteipp/) wrote:
> > In [T118032#1790417](/T118032#1790417), [@Catrope](/p/Catrope/) wrote:
> >
> > 0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch2 KB[Download](https://phab.wmfusercontent.org/file/download/bnovj4fssudv4yhpdvx2/PHID-FILE-o45zrmowf4dwawkc6k6f/0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch)
> >
> > Updated patch that also patches CurlHttpRequest
>
> LGTM. Let's deploy this Monday.

It's not deployed yet. Will this be done tomorrow? I'd be OK deploying it myself, too, if that helps.

[• csteipp](/p/csteipp/) added a comment.[Nov 11 2015, 11:47 PM2015-11-11 23:47:51 (UTC+0)](#1800103)Comment Actions

Yeah, I forgot Monday. If your around, please do deploy. Otherwise I'll do

it sometime tomorrow morning.

[• csteipp](/p/csteipp/) added a comment.[Nov 13 2015, 5:40 PM2015-11-13 17:40:22 (UTC+0)](#1804036)Comment Actions

Attempted to deploy this, and the cluster started spewing,

### > exception.log <

2015-11-13 17:37:11 mw1050 enwiki exception ERROR: [4ff0fb71] /w/index.php?title=Special:Book&bookcmd=render\_article&arttitle=Buck+Rogers&returnto=Buck+Rogers&oldid=689325485&writer=rdf2latex MWException from line 803 of /srv/mediawiki/php-1.27.0-wmf.6/includes/HttpFunctions.php: Error setting curl options. {"exception\_id":"4ff0fb71"}

[Exception MWException] (/srv/mediawiki/php-1.27.0-wmf.6/includes/HttpFunctions.php:803) Error setting curl options.

```
#0 /srv/mediawiki/php-1.27.0-wmf.6/includes/HttpFunctions.php(76): CurlHttpRequest->execute()
#1 /srv/mediawiki/php-1.27.0-wmf.6/includes/HttpFunctions.php(123): Http::request(string, string, array, string)
#2 /srv/mediawiki/php-1.27.0-wmf.6/extensions/Collection/RenderingAPI.php(297): Http::post(string, array, string)
#3 /srv/mediawiki/php-1.27.0-wmf.6/extensions/Collection/RenderingAPI.php(69): MWServeRenderingAPI->makeRequest(string, array)
#4 /srv/mediawiki/php-1.27.0-wmf.6/extensions/Collection/RenderingAPI.php(46): CollectionRenderingAPI->doRender(array)
#5 /srv/mediawiki/php-1.27.0-wmf.6/extensions/Collection/Collection.body.php(988): CollectionRenderingAPI->render(array)
#6 /srv/mediawiki/php-1.27.0-wmf.6/extensions/Collection/Collection.body.php(278): SpecialCollection->renderCollection(array, Title, string)
#7 /srv/mediawiki/php-1.27.0-wmf.6/includes/specialpage/SpecialPage.php(384): SpecialCollection->execute(NULL)
#8 /srv/mediawiki/php-1.27.0-wmf.6/includes/specialpage/SpecialPageFactory.php(553): SpecialPage->run(NULL)
#9 /srv/mediawiki/php-1.27.0-wmf.6/includes/MediaWiki.php(280): SpecialPageFactory::executePath(Title, RequestContext)
#10 /srv/mediawiki/php-1.27.0-wmf.6/includes/MediaWiki.php(704): MediaWiki->performRequest()
#11 /srv/mediawiki/php-1.27.0-wmf.6/includes/MediaWiki.php(506): MediaWiki->main()
#12 /srv/mediawiki/php-1.27.0-wmf.6/index.php(41): MediaWiki->run()
#13 /srv/mediawiki/w/index.php(3): include(string)
#14 {main}
```
### > hhvm.log <

Nov 13 17:37:12 mw1164: #012Notice: Use of undefined constant CURLOPT\_SAFE\_UPLOAD - assumed 'CURLOPT\_SAFE\_UPLOAD' in /srv/mediawiki/php-1.27.0-wmf.6/includes/HttpFunctions.php on line 789

Nov 13 17:37:12 mw1164: #012Warning: Invalid argument: option: 0 in /srv/mediawiki/php-1.27.0-wmf.6/includes/HttpFunctions.php on line 802

[• csteipp](/p/csteipp/) added a comment.[Nov 13 2015, 5:44 PM2015-11-13 17:44:40 (UTC+0)](#1804048)Comment Actions

If I had paid more attention to the php docs, CURLOPT\_SAFE\_UPLOAD was added in php 5.5.0, an apparently not supported by our current HHVM install.

I think we'll need to actually filter out values that start with "@".

[Catrope](/p/Catrope/) added a comment.[Nov 13 2015, 6:27 PM2015-11-13 18:27:01 (UTC+0)](#1804265)Comment Actions
> In [T118032#1804048](/T118032#1804048), [@csteipp](/p/csteipp/) wrote:
>
> If I had paid more attention to the php docs, CURLOPT\_SAFE\_UPLOAD was added in php 5.5.0, an apparently not supported by our current HHVM install.

...even though our HHVM install claims to be PHP 5.6.99-hhhvm

> I think we'll need to actually filter out values that start with "@".

That's going to be a problem. There's no way of escaping leading @ symbols. We can drop values that start with @ (or requests that contain them), but it sounds like we won't be able to make legitimate requests for things like convert?from=wikitext&to=html&content=@csteipp how's it going. If we are going to be unable to make them though, we should probably reject them instead of doing something insecure.

[• csteipp](/p/csteipp/) added a comment.[Nov 13 2015, 6:38 PM2015-11-13 18:38:10 (UTC+0)](#1804339)Comment Actions
> If we are going to be unable to make them though, we should probably reject them instead of doing something insecure.

Agree. I think either generating an exception and not making the call, or removing the @ (and risking data corruption) are the two bad options we have to choose from. I'm not sure which is better.

[Catrope](/p/Catrope/) added a comment.[Nov 13 2015, 10:04 PM2015-11-13 22:04:55 (UTC+0)](#1804750)Comment Actions

I found a way to support HHVM (as well as pre-5.5 versions of PHP) by using an obscure detail in curl's '@' behavior: it only kicks in if POSTFIELDS is an array, not if it's a string, so serializing all POSTFIELDS arrays to strings using wfArrayToCgi() works around the issue as well.

0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch3 KB[Download](https://phab.wmfusercontent.org/file/download/ydplenuiqguisk3zcfpr/PHID-FILE-5eubuuu7eeg4yu3sb4ea/0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch)

[• csteipp](/p/csteipp/) added a comment.[Nov 14 2015, 12:18 AM2015-11-14 00:18:05 (UTC+0)](#1804965)Comment Actions
> In [T118032#1804750](/T118032#1804750), [@Catrope](/p/Catrope/) wrote:
>
> I found a way to support HHVM (as well as pre-5.5 versions of PHP) by using an obscure detail in curl's '@' behavior: it only kicks in if POSTFIELDS is an array, not if it's a string, so serializing all POSTFIELDS arrays to strings using wfArrayToCgi() works around the issue as well.
>
> 0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch3 KB[Download](https://phab.wmfusercontent.org/file/download/ydplenuiqguisk3zcfpr/PHID-FILE-5eubuuu7eeg4yu3sb4ea/0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch)

Does this need to send $this->postData through wfArrayToCgi() in HttpFunctions too? Or is that already happening somewhere?

[Catrope](/p/Catrope/) added a comment.[Nov 14 2015, 12:54 AM2015-11-14 00:54:20 (UTC+0)](#1805179)Comment Actions
> In [T118032#1804965](/T118032#1804965), [@csteipp](/p/csteipp/) wrote:
> > In [T118032#1804750](/T118032#1804750), [@Catrope](/p/Catrope/) wrote:
> >
> > I found a way to support HHVM (as well as pre-5.5 versions of PHP) by using an obscure detail in curl's '@' behavior: it only kicks in if POSTFIELDS is an array, not if it's a string, so serializing all POSTFIELDS arrays to strings using wfArrayToCgi() works around the issue as well.
> >
> > 0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch3 KB[Download](https://phab.wmfusercontent.org/file/download/ydplenuiqguisk3zcfpr/PHID-FILE-5eubuuu7eeg4yu3sb4ea/0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch)
>
> Does this need to send $this->postData through wfArrayToCgi() in HttpFunctions too? Or is that already happening somewhere?

No, we do, I had just completely forgotten about that file. Will fix.

[Catrope](/p/Catrope/) added a comment.[Nov 14 2015, 1:40 AM2015-11-14 01:40:22 (UTC+0)](#1805185)Comment Actions

0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch4 KB[Download](https://phab.wmfusercontent.org/file/download/izyn7v63l56evxj4v3qi/PHID-FILE-w4vhr4l5pqe7unbc7fa7/0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch)

Updated patch with HttpFunctions change. I don't have an easy way to test that though.

[Krinkle](/p/Krinkle/) subscribed.[Nov 18 2015, 7:05 PM2015-11-18 19:05:36 (UTC+0)](#1814448)Comment Actions

mediawiki-errors is trending with various issues possibly caused by this:

> Warning: curl\_setopt() expects parameter 2 to be integer, string given in /srv/mediawiki/php-1.27.0-wmf.7/includes/libs/MultiHttpClient.php on line 345

> Notice: Use of undefined constant CURLOPT\_SAFE\_UPLOAD - assumed 'CURLOPT\_SAFE\_UPLOAD' in /srv/mediawiki/php-1.27.0-wmf.7/includes/libs/MultiHttpClient.php on line 345

> Warning: Invalid argument: option: 0 in /srv/mediawiki/php-1.27.0-wmf.7/includes/HttpFunctions.php on line 802

> Notice: Use of undefined constant CURLOPT\_SAFE\_UPLOAD - assumed 'CURLOPT\_SAFE\_UPLOAD' in /srv/mediawiki/php-1.27.0-wmf.7/includes/HttpFunctions.php on line 789

> Error setting curl options.

[• csteipp](/p/csteipp/) added a comment.[Nov 18 2015, 8:01 PM2015-11-18 20:01:48 (UTC+0)](#1814620)Comment Actions

[@Krinkle](/p/Krinkle/),

I saw a bunch of those when I deployed Roan's first patch around Nov 13 17:37 (<https://phabricator.wikimedia.org/T118032#1804036>). Are you seeing more of these come in since?

[• mmodell](/p/mmodell/) subscribed.[Nov 18 2015, 8:09 PM2015-11-18 20:09:11 (UTC+0)](#1814690)Comment Actions

[@csteipp](/p/csteipp/): yes, a ton more errors like that after deploying wmf.7. see [T118988](/T118988)

[• csteipp](/p/csteipp/) added a comment.[Nov 18 2015, 8:28 PM2015-11-18 20:28:30 (UTC+0)](#1814808)Comment Actions

I looks like the issue is I forgot to remove the original patch form /srv/patches/core when I undeployed it, and it went out in the next branch.

[• mmodell](/p/mmodell/) added a comment.[Nov 18 2015, 9:59 PM2015-11-18 21:59:39 (UTC+0)](#1815212)Comment Actions

I'm still seeing the same error in fatalmonitor :-/

[• Mattflaschen-WMF](/p/Mattflaschen-WMF/) added a comment.[Nov 18 2015, 10:10 PM2015-11-18 22:10:54 (UTC+0)](#1815255)Comment Actions
> In [T118032#1804265](/T118032#1804265), [@Catrope](/p/Catrope/) wrote:
> > In [T118032#1804048](/T118032#1804048), [@csteipp](/p/csteipp/) wrote:
> >
> > If I had paid more attention to the php docs, CURLOPT\_SAFE\_UPLOAD was added in php 5.5.0, an apparently not supported by our current HHVM install.
>
> ...even though our HHVM install claims to be PHP 5.6.99-hhhvm

Filed as <https://github.com/facebook/hhvm/issues/6569> .

[• mmodell](/p/mmodell/) added a comment.[Nov 18 2015, 11:16 PM2015-11-18 23:16:35 (UTC+0)](#1815434)Comment Actions

I guess it was just lag in fatalmonitor, the error count has dwindled now.

[awight](/p/awight/) unsubscribed.[Nov 18 2015, 11:29 PM2015-11-18 23:29:18 (UTC+0)](#1815473)[Krenair](/p/Krenair/) mentioned this in [T119013: Phabricator unsubscribed me from a task?](/T119013).[Nov 19 2015, 1:12 AM2015-11-19 01:12:30 (UTC+0)](#1815994)[• csteipp](/p/csteipp/) added a comment.[Nov 19 2015, 9:06 PM2015-11-19 21:06:44 (UTC+0)](#1818582)Comment Actions

0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch4 KB[Download](https://phab.wmfusercontent.org/file/download/izyn7v63l56evxj4v3qi/PHID-FILE-w4vhr4l5pqe7unbc7fa7/0001-Work-around-CURL-insanity-breaking-POST-parameters-t.patch)

This should fix the issue. Minor functionality change in that the request will have a different Content-Type, from multipart/form-data to application/x-www-form-urlencoded. I don't think that should be a problem, but something we'll want to watch out for.

[• csteipp](/p/csteipp/) added a comment.[Nov 19 2015, 9:31 PM2015-11-19 21:31:01 (UTC+0)](#1818645)Comment Actions

T118032b.patch4 KB[Download](https://phab.wmfusercontent.org/file/download/tl6ksfyxh2iedualhvxq/PHID-FILE-aesylqwl2typfm3b7rvg/T118032b.patch)

Prefix commit summary with SECURITY

[• csteipp](/p/csteipp/) closed this task as Resolved.[Nov 19 2015, 10:27 PM2015-11-19 22:27:32 (UTC+0)](#1818873)Comment Actions

22:13 csteipp: deployed patch for [T118032](/T118032)

New patch looks like it's working ok.

[• csteipp](/p/csteipp/) added a parent task: [T115722: MediaWiki Security release 1.25.4](/T115722).[Nov 19 2015, 10:34 PM2015-11-19 22:34:15 (UTC+0)](#1818954)[• demon](/p/demon/) added subscribers: [• demon](/p/demon/), [Grunny](/p/Grunny/).[Dec 17 2015, 1:18 AM2015-12-17 01:18:50 (UTC+0)](#1886675)[• demon](/p/demon/) changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-yygon2ztmjofgzp/)" to "Public (No Login Required)".[Dec 18 2015, 12:39 AM2015-12-18 00:39:26 (UTC+0)](#1889478)[• demon](/p/demon/) changed the edit policy from "[Custom Policy](/transactions/old/PHID-XACT-TASK-eogzpejccevsog2/)" to "All Users".Restricted Application changed the visibility from "Public (No Login Required)" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-ev55b7y7ujs7rz2/)".  · [View Herald Transcript](/herald/transcript/1099304/)[Dec 18 2015, 12:39 AM2015-12-18 00:39:26 (UTC+0)](#1889480)Restricted Application changed the edit policy from "All Users" to "[Custom Policy](/transactions/new/PHID-XACT-TASK-hnjq4xonsk5vasc/)".  · [View Herald Transcript](/herald/transcript/1099304/)[• demon](/p/demon/) changed the visibility from "[Custom Policy](/transactions/old/PHID-XACT-TASK-t7rlywhtns6pcdy/)" to "Public (No Login Required)".[Dec 18 2015, 12:39 AM2015-12-18 00:39:38 (UTC+0)](#1889483)[• demon](/p/demon/) changed the edit policy from "[Custom Policy](/transactions/old/PHID-XACT-TASK-lr3fgzojbo4dqfb/)" to "All Users".[• demon](/p/demon/) changed Security from Software security bug to None.[gerritbot](/p/gerritbot/) subscribed.[Dec 18 2015, 12:40 AM2015-12-18 00:40:44 (UTC+0)](#1889504)Comment Actions

Change 259948 had a related patch set uploaded (by Chad):

SECURITY: Work around CURL insanity breaking POST parameters that start with '@'

<https://gerrit.wikimedia.org/r/259948>

[gerritbot](/p/gerritbot/) added a project: [Patch-For-Review](/tag/patch-for-review/).[Dec 18 2015, 12:40 AM2015-12-18 00:40:44 (UTC+0)](#1889505)[gerritbot](/p/gerritbot/) added a comment.[Dec 18 2015, 1:04 AM2015-12-18 01:04:38 (UTC+0)](#1889608)Comment Actions

Change 259913 merged by Chad:

SECURITY: Work around CURL insanity breaking POST parameters that start with '@'

<https://gerrit.wikimedia.org/r/259913>

[gerritbot](/p/gerritbot/) added a comment.[Dec 18 2015, 1:31 AM2015-12-18 01:31:03 (UTC+0)](#1889660)Comment Actions

Change 259902 merged by Reedy:

SECURITY: Work around CURL insanity breaking POST parameters that start with '@'

<https://gerrit.wikimedia.org/r/259902>

[gerritbot](/p/gerritbot/) added a comment.[Dec 18 2015, 1:31 AM2015-12-18 01:31:23 (UTC+0)](#1889662)Comment Actions

Change 259937 merged by Chad:

SECURITY: Work around CURL insanity breaking POST parameters that start with '@'

<https://gerrit.wikimedia.org/r/259937>

[gerritbot](/p/gerritbot/) added a comment.[Dec 18 2015, 1:33 AM2015-12-18 01:33:51 (UTC+0)](#1889679)Comment Actions

Change 259926 merged by Reedy:

SECURITY: Work around CURL insanity breaking POST parameters that start with '@'

<https://gerrit.wikimedia.org/r/259926>

[ReleaseTaggerBot](/p/ReleaseTaggerBot/) added projects: [MW-1.25-release](/tag/mw-1.25-release/), [MW-1.24-release](/tag/mw-1.24-release/), [MW-1.23-release](/tag/mw-1.23-release/), [MW-1.26-release](/tag/mw-1.26-release/).[Dec 18 2015, 2:00 AM2015-12-18 02:00:49 (UTC+0)](#1889700)[gerritbot](/p/gerritbot/) added a comment.[Dec 18 2015, 9:34 AM2015-12-18 09:34:37 (UTC+0)](#1889967)Comment Actions

Change 259948 merged by jenkins-bot:

SECURITY: Work around CURL insanity breaking POST parameters that start with '@'

<https://gerrit.wikimedia.org/r/259948>

[ReleaseTaggerBot](/p/ReleaseTaggerBot/) added projects: [MW-1.27-release (WMF-deploy-2016-01-12\_(1.27.0-wmf.10))](/tag/wmf-deploy-2016-01-12_%281.27.0-wmf.10%29/), [MW-1.27-release-notes](/tag/mw-1.27-release-notes/).[Dec 18 2015, 10:00 AM2015-12-18 10:00:30 (UTC+0)](#1890009)[• csteipp](/p/csteipp/) updated the task description. [(Show Details)](/transactions/detail/PHID-XACT-TASK-bcq6ufwfxxyaeks/)[Dec 24 2015, 12:02 AM2015-12-24 00:02:43 (UTC+0)](#1902794)Restricted Application added a subscriber: [Luke081515](/p/Luke081515/).  · [View Herald Transcript](/herald/transcript/1106409/)[Dec 24 2015, 12:02 AM2015-12-24 00:02:44 (UTC+0)](#1902795)[• chasemp](/p/chasemp/) added a project: [Security](/tag/security/).[Feb 10 2020, 10:50 PM2020-02-10 22:50:45 (UTC+0)](#5867189) · [• chasemp](/p/chasemp/) removed a project: [acl\*security](/tag/acl_security/).[Feb 20 2020, 8:11 PM2020-02-20 20:11:38 (UTC+0)](#5903008) · [Log In to Comment](/login/?next=)Content licensed under Creative Commons Attribution-ShareAlike (CC BY-SA) 4.0 unless otherwise noted; code licensed under GNU General Public License (GPL) 2.0 or later and other open source licenses. By using this site, you agree to the Terms of Use, Privacy Policy, and Code of Conduct. · [Wikimedia Foundation](https://wikimediafoundation.org/) · [Privacy Policy](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ANon-wiki_privacy_policy) · [Code of Conduct](https://www.mediawiki.org/wiki/Special%3AMyLanguage/Code_of_Conduct) · [Terms of Use](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3ATerms_of_Use/Phabricator) · [Disclaimer](https://foundation.wikimedia.org/wiki/Special%3AMyLanguage/Policy%3AGeneral_disclaimer) · [CC-BY-SA](https://creativecommons.org/licenses/by-sa/4.0/) · [GPL](https://www.gnu.org/licenses/old-licenses/gpl-2.0.html) · [Credits](https://www.mediawiki.org/wiki/Phabricator/Credits)

=== Content from www.openwall.com_6eb38e78_20250125_045119.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Hash Suite - Windows password security audit tool. GUI, reports in PDF.](https://hashsuite.openwall.net) | | --- | |
| --- | --- |

[[<prev]](7) [[next>]](9) [[thread-next>]](../../../2015/12/23/7) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-ID: <CAKcmtDwuatO7TaTOdeun9q4s9Wv_SfWK6Hzk24b2J227YnL23Q@mail.gmail.com>
Date: Mon, 21 Dec 2015 11:37:14 -0800
From: Chris Steipp <csteipp@...imedia.org>
To: oss-security@...ts.openwall.com
Subject: CVE requests for MediaWiki 1.26.1, 1.25.4, 1.24.5 and 1.23.12

We recently released security fixes for MediaWiki. I believe the first five
issues should have CVE's assigned. The last issue (T109724) requires that
the organization running the wiki also releases detailed page view data
publicly, and probably not worth tracking with a CVE. However I'm happy for
mitre to assign one of they think this generally qualifies.

* (T117899) XSS from wikitext when $wgArticlePath='$1'. Internal review
discovered an XSS vector when MediaWiki is configured with a non-standard
configuration.
<<https://phabricator.wikimedia.org/T117899>>

* (T119309) User::matchEditToken should use constant-time string
comparison. Internal review discovered that tokens were being compared as
strings, which could allow a timing attack. This should possibly have 2
CVE's assigned, one for the original patch to use hash_equals in
<https://gerrit.wikimedia.org/r/#/c/156336/5/includes/User.php> (released as
part of MediaWiki 1.25, and backported to 1.24 and 1.23 as part of this
patch) and one to fix T119309, related to the debugging statement.
<<https://phabricator.wikimedia.org/T119309>>

* (T118032) Error thrown by VirtualRESTService when POST variable starts
with '@'. Internal review discovered that MediaWiki was not sanitizing
parameters passed to the curl library, which could cause curl to upload
files from the webserver to an attacker.
<<https://phabricator.wikimedia.org/T118032>>

* (T115522) Passwords generated by User::randomPassword() may be shorter
than $wgMinimalPasswordLength. MediaWiki user Frank R. Farmer reported that
the password reset token could be shorter than the minimum required
password length.
<<https://phabricator.wikimedia.org/T115522>>

* (T97897) Incorrect parsing of IPs for global block. Wikimedia steward
Vituzzu reported that blocking IP addresses with zero-padded octets
resulted in a failure to block the IP address.
<<https://phabricator.wikimedia.org/T97897>>

* (T109724) A combination of Special:MyPage redirects and pagecounts allows
an external site to know the wikipedia login of an user. Wikimedia
user Xavier Combelle reported a way to identify user, when detailed page
view data is also released.
<<https://phabricator.wikimedia.org/T109724>>

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from github.com_877bd5c6_20250126_060442.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffacebook%2Fhhvm%2Fissues%2F6569)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  + [Nonprofits](/solutions/industry/nonprofits)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ffacebook%2Fhhvm%2Fissues%2F6569)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=facebook%2Fhhvm)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[facebook](/facebook)
/
**[hhvm](/facebook/hhvm)**
Public

* [Notifications](/login?return_to=%2Ffacebook%2Fhhvm) You must be signed in to change notification settings
* [Fork
  3k](/login?return_to=%2Ffacebook%2Fhhvm)
* [Star
   18.3k](/login?return_to=%2Ffacebook%2Fhhvm)

* [Code](/facebook/hhvm)
* [Issues
  453](/facebook/hhvm/issues)
* [Pull requests
  85](/facebook/hhvm/pulls)
* [Discussions](/facebook/hhvm/discussions)
* [Actions](/facebook/hhvm/actions)
* [Wiki](/facebook/hhvm/wiki)
* [Security](/facebook/hhvm/security)
* [Insights](/facebook/hhvm/pulse)

Additional navigation options

* [Code](/facebook/hhvm)
* [Issues](/facebook/hhvm/issues)
* [Pull requests](/facebook/hhvm/pulls)
* [Discussions](/facebook/hhvm/discussions)
* [Actions](/facebook/hhvm/actions)
* [Wiki](/facebook/hhvm/wiki)
* [Security](/facebook/hhvm/security)
* [Insights](/facebook/hhvm/pulse)

# CURLOPT\_SAFE\_UPLOAD is not supported #6569

[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy link[New issue](/login?return_to=)[Jump to bottom](#comment-composer-heading)Copy linkClosedClosed[CURLOPT\_SAFE\_UPLOAD is not supported](#top)#6569Copy linkLabels[missing extension](https://github.com/facebook/hhvm/issues?q=state%3Aopen%20label%3A%22missing%20extension%22)[php5 incompatibility](https://github.com/facebook/hhvm/issues?q=state%3Aopen%20label%3A%22php5%20incompatibility%22)[probably easy](https://github.com/facebook/hhvm/issues?q=state%3Aopen%20label%3A%22probably%20easy%22)[![@mattflaschen](https://avatars.githubusercontent.com/u/505874?v=4&size=80)](/mattflaschen)
## Description

[![@mattflaschen](https://avatars.githubusercontent.com/u/505874?v=4&size=48)](/mattflaschen)[mattflaschen](https://github.com/mattflaschen)opened [on Nov 18, 2015](https://github.com/facebook/hhvm/issues/6569#issue-117693534)

Per <http://php.net/manual/en/function.curl-setopt.php> , CURLOPT\_SAFE\_UPLOAD is a new option 5.5.0+. In 5.5.0 it defaults to false. In 5.6.0 it defaults to true:

" TRUE to disable support for the @ prefix for uploading files in CURLOPT\_POSTFIELDS, which means that values starting with @ can be safely passed as fields. CURLFile may be used for uploads instead."

See also <https://wiki.php.net/rfc/curl-file-upload> .

We are using 5.6.99-hhvm, but it does not recognize CURLOPT\_SAFE\_UPLOAD at all.

## Metadata

### Assignees

No one assigned

### Labels

[missing extension](https://github.com/facebook/hhvm/issues?q=state%3Aopen%20label%3A%22missing%20extension%22)[php5 incompatibility](https://github.com/facebook/hhvm/issues?q=state%3Aopen%20label%3A%22php5%20incompatibility%22)[probably easy](https://github.com/facebook/hhvm/issues?q=state%3Aopen%20label%3A%22probably%20easy%22)
### Type

No type
### Projects

No projects
### Milestone

No milestone

### Relationships

None yet
### Development

No branches or pull requests
## Issue actions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.openwall.com_2fbecf2b_20250125_045119.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux   *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper   *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists   *for password cracking*](/wordlists/)+ [passwdqc   *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt   *KDF & password hashing*](/yescrypt/)+ [yespower   *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish   *password hashing*](/crypt/)+ [phpass   *ditto in PHP*](/phpass/)+ [tcb   *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd   *port scan detector*](/scanlogd/)+ [popa3d   *tiny POP3 daemon*](/popa3d/)+ [blists   *web interface to mailing lists*](/blists/)+ [msulogin   *single user mode login*](/msulogin/)+ [php\_mt\_seed   *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](6) [[next>]](8) [[<thread-prev]](../../../2015/12/21/8) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <20151223190658.1F7406FC009@smtpvmsrv1.mitre.org>
Date: Wed, 23 Dec 2015 14:06:58 -0500 (EST)
From: cve-assign@...re.org
To: csteipp@...imedia.org
Cc: cve-assign@...re.org, oss-security@...ts.openwall.com
Subject: Re: CVE requests for MediaWiki 1.26.1, 1.25.4, 1.24.5 and 1.23.12

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

> * (T117899) XSS from wikitext when $wgArticlePath='$1'. Internal review
> discovered an XSS vector when MediaWiki is configured with a non-standard
> configuration.
> <<https://phabricator.wikimedia.org/T117899>>

Use CVE-2015-8622.

> * (T119309) User::matchEditToken should use constant-time string
> comparison. Internal review discovered that tokens were being compared as
> strings, which could allow a timing attack. This should possibly have 2
> CVE's assigned,

> one for the original patch to use hash_equals in
> <https://gerrit.wikimedia.org/r/#/c/156336/5/includes/User.php> (released as
> part of MediaWiki 1.25, and backported to 1.24 and 1.23 as part of this
> patch)

Use CVE-2015-8623.

> one to fix T119309, related to the debugging statement.
> <<https://phabricator.wikimedia.org/T119309>>

Use CVE-2015-8624.

(Neither of the above two CVEs is the same as CVE-2015-6728, which
involves a different type of token.)

> * (T118032) Error thrown by VirtualRESTService when POST variable starts
> with '@'. Internal review discovered that MediaWiki was not sanitizing
> parameters passed to the curl library, which could cause curl to upload
> files from the webserver to an attacker.
> <<https://phabricator.wikimedia.org/T118032>>

> allows curl to try to be "helpful" by interpreting
> array( 'foo' => '@...' ) as a file upload.

Use CVE-2015-8625.

> <https://github.com/facebook/hhvm/issues/6569>

There is currently no CVE ID assigned for any related HHVM behavior.
It is conceivable that a CVE ID should exist if the
CURLOPT_SAFE_UPLOAD feature is required for HHVM's security policy,
or if it happens to be dangerously misleading to use the 5.6.99
version number but not address this curl concern.

> * (T115522) Passwords generated by User::randomPassword() may be shorter
> than $wgMinimalPasswordLength. MediaWiki user Frank R. Farmer reported that
> the password reset token could be shorter than the minimum required
> password length.
> <<https://phabricator.wikimedia.org/T115522>>

Use CVE-2015-8626.

> * (T97897) Incorrect parsing of IPs for global block. Wikimedia steward
> Vituzzu reported that blocking IP addresses with zero-padded octets
> resulted in a failure to block the IP address.
> <<https://phabricator.wikimedia.org/T97897>>

The security problem needing a CVE is that a partially privileged user
may falsely conclude that an address was successfully blocked, but the
address was actually not blocked. There is potentially a second
security problem in which a malicious partially privileged user could
have intentionally used extra zero characters to block a wide range of
legitimate editing ("this apparently blocked all newly registered
users"), leaving behind only a log entry that seemed to be about
blocking a single IP address. We are not sure whether this second
problem is relevant in the context of any MediaWiki threat model.

Use CVE-2015-8627.

> * (T109724) A combination of Special:MyPage redirects and pagecounts allows
> an external site to know the wikipedia login of an user. Wikimedia
> user Xavier Combelle reported a way to identify user, when detailed page
> view data is also released.
> <<https://phabricator.wikimedia.org/T109724>>

Our feeling is that the previous behavior should have a CVE because it
violates reasonable expectations about whether the set of visited URIs
contains, by itself, user identities. In the T109724 example, if a
client had visited a User:Xavier_Combelle page, no user identity is
potentially exposed because there is no discernible relationship
between the client and the name "Xavier Combelle." A visit to a
Special:MyPage page is an entirely different situation. Here, the
MediaWiki software is, in effect, combining the basic visited-URI
information with session information (the session belongs to Xavier
Combelle's account) in order to expand the scope of the visited-URI
concept. If that had been completely obvious (e.g., if MediaWiki had
always expressed visited URIs as something like
/Main_Page?logged_in_user=Xavier_Combelle and
/Special:MyPage?logged_in_user=Xavier_Combelle), then it wouldn't be a
vulnerability because people constructing reasonable analytics would
know to strip out the "logged_in_user=" fields. However, it's not
obvious at all: the server-side transformation of Special:MyPage to
User:Xavier_Combelle doesn't signal that an analytics implementation
needs to be concerned about an information leak. Also, we don't think
it can be considered a bug in any analytics product or site-specific
analytics methodology, because the information leak can also occur if
analytics are done informally by hand. For example, a site's owner
might announce something like "Our top five pages for 2015 were /ABC,
/DEF, /GHI, /JKL, and /User:Xavier_Combelle - not sure why that last
one was popular, but it was." Here, the actual situation could have
been the <https://phabricator.wikimedia.org/T109724#1637543> "if you can
convince the user to load special:mypage via say a hidden iframe, you
can just as easily convince them to load it 500 times" attack.

Use CVE-2015-8628.

- --
CVE assignment team, MITRE CVE Numbering Authority
M/S M300
202 Burlington Road, Bedford, MA 01730 USA
[ PGP key available through <http://cve.mitre.org/cve/request_id.html> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCAAGBQJWevBCAAoJEL54rhJi8gl5xEEP/iecCWFKyUu1OktHZ9kTYsez
Rh/0CZKaADtQkqX+lz6RhB6LruS0lOnWdBB2yjTx5iveDgApn0gQ753pubqm3xBV
8EHdRwgN91X6iUWVDP777CcaDdPhQPinW2Az8sWI1i6walS7G2fst6JcWHM9vJ2W
Zu2BVUFPXvsFdUgPmLrJ0RzbrmNFsj0req/fapBEdQ6dUdKxYLQA3RSfiRz4ZMB5
D1t+Y3/c0MBnusmpS2bDoobfVIUuyqwB0SHOvEnlyBcgX3fgxIIdexFhh5d9FGgC
DH9/KtPZkU9Jtv1OiDLKib5/Nl1mjgZHj9kY7I6gUqEw2aw31tAMQGzqcDanIkJv
L0HXeIMvJu7XHoOWW8r3xunWKsdmqFXzJiLAX9Jnl5Dhlwsm3InI0myC8xdSLBPD
jW/XPWtSA41B8ZNyz1CGFxRcQH41tQ+LB6p0V4Fm2Kpq+9mdR4e4j2nACTt/IZey
/Fh93SZqIVfQ9XIkafvXVBS6a6hv6nGdhe+PTtUbG0xUAPaeacUuBTgscSdXzUmi
mTsNd2phjtH3TNB1aWue8OmFYeCp0Ru5NkzBAJDlsa6zCX+DJShN0QpM0ljp5eqq
nrtGytRfrmGSZ6zO/n7Y9M6Pgt9y7jpcrbY0OzMCIleHGvYMVe+q5K7hsbwQGyOZ
5w4zLSpVVCp1bY6bvHpN
=zTit
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from phab.wmfusercontent.org_29580313_20250126_060438.html ===
From 10ba2acbe069397caa2f50038b1914138c44bbd6 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Gerg=C5=91=20Tisza?=
Date: Sat, 21 Nov 2015 11:51:02 -0800
Subject: [PATCH 1/6] Use hash\_equals in User::matchEditToken
There is no point in using hash\_equals for the return value if we
do a normal comparison before.
Bug: T119309
Change-Id: Ia44ec5ed492105b27d0fddd845d58d27a29dc072
Signed-off-by: Chad Horohoe
---
includes/user/User.php | 2 +-
1 file changed, 1 insertion(+), 1 deletion(-)
diff --git a/includes/user/User.php b/includes/user/User.php
index c6d215d..2ac0f2c 100644
--- a/includes/user/User.php
+++ b/includes/user/User.php
@@ -4228,7 +4228,7 @@ class User implements IDBAccessObject {
$salt, $request ?: $this->getRequest(), $timestamp
);
- if ( $val != $sessionToken ) {
+ if ( !hash\_equals( $sessionToken, $val ) ) {
wfDebug( "User::matchEditToken: broken session data\n" );
}
--
2.6.4
From d97f74c2f20b0746d9a748d6ede9a9a8817c64c4 Mon Sep 17 00:00:00 2001
From: Roan Kattouw
Date: Fri, 6 Nov 2015 12:55:16 -0800
Subject: [PATCH 2/6] SECURITY: Work around CURL insanity breaking POST
parameters that start with '@'
CURL has a "feature" where passing array( 'foo' => '@bar' )
in CURLOPT\_POSTFIELDS results in the contents of the file named "bar"
being POSTed. This makes it impossible to POST the literal string "@bar",
because array( 'foo' => '%40bar' ) gets double-encoded to foo=%2540bar.
Disable this "feature" by setting CURLOPT\_SAFE\_UPLOAD to true,
if available. According to the PHP manual, this option became
available in 5.5 and started defaulting to true in 5.6.
However, we support versions as low as 5.3, and this option
doesn't exist at all in 5.6.99-hhvm, which we run in production.
For versions where this option is not available (pre-5.5 versions
and HHVM), serialize POSTFIELDS arrays to strings. This works
around the issue because the '@' "feature" only works
for arrays, not strings, as of PHP 5.2. (We don't support pre-5.2
versions, and I've verified 5.6.99-hhvm behaves this way as well.)
Bug: T118032
Change-Id: I3f996e2eb87c7bd3b94ca9d3cc14a3e12f34f241
Signed-off-by: Chad Horohoe
---
includes/HttpFunctions.php | 17 ++++++++++++++++-
includes/libs/MultiHttpClient.php | 13 +++++++++++++
2 files changed, 29 insertions(+), 1 deletion(-)
diff --git a/includes/HttpFunctions.php b/includes/HttpFunctions.php
index e6801e3..d6e5170 100644
--- a/includes/HttpFunctions.php
+++ b/includes/HttpFunctions.php
@@ -782,7 +782,22 @@ class CurlHttpRequest extends MWHttpRequest {
$this->curlOptions[CURLOPT\_HEADER] = true;
} elseif ( $this->method == 'POST' ) {
$this->curlOptions[CURLOPT\_POST] = true;
- $this->curlOptions[CURLOPT\_POSTFIELDS] = $this->postData;
+ $postData = $this->postData;
+ // Don't interpret POST parameters starting with '@' as file uploads, because this
+ // makes it impossible to POST plain values starting with '@' (and causes security
+ // issues potentially exposing the contents of local files).
+ // The PHP manual says this option was introduced in PHP 5.5 defaults to true in PHP 5.6,
+ // but we support lower versions, and the option doesn't exist in HHVM 5.6.99.
+ if ( defined( 'CURLOPT\_SAFE\_UPLOAD' ) ) {
+ $this->curlOptions[CURLOPT\_SAFE\_UPLOAD] = true;
+ } else if ( is\_array( $postData ) ) {
+ // In PHP 5.2 and later, '@' is interpreted as a file upload if POSTFIELDS
+ // is an array, but not if it's a string. So convert $req['body'] to a string
+ // for safety.
+ $postData = wfArrayToCgi( $postData );
+ }
+ $this->curlOptions[CURLOPT\_POSTFIELDS] = $postData;
+
// Suppress 'Expect: 100-continue' header, as some servers
// will reject it with a 417 and Curl won't auto retry
// with HTTP 1.0 fallback
diff --git a/includes/libs/MultiHttpClient.php b/includes/libs/MultiHttpClient.php
index c6fa914..0e9c423 100644
--- a/includes/libs/MultiHttpClient.php
+++ b/includes/libs/MultiHttpClient.php
@@ -338,6 +338,19 @@ class MultiHttpClient {
);
} elseif ( $req['method'] === 'POST' ) {
curl\_setopt( $ch, CURLOPT\_POST, 1 );
+ // Don't interpret POST parameters starting with '@' as file uploads, because this
+ // makes it impossible to POST plain values starting with '@' (and causes security
+ // issues potentially exposing the contents of local files).
+ // The PHP manual says this option was introduced in PHP 5.5 defaults to true in PHP 5.6,
+ // but we support lower versions, and the option doesn't exist in HHVM 5.6.99.
+ if ( defined( 'CURLOPT\_SAFE\_UPLOAD' ) ) {
+ curl\_setopt( $ch, CURLOPT\_SAFE\_UPLOAD, true );
+ } else if ( is\_array( $req['body'] ) ) {
+ // In PHP 5.2 and later, '@' is interpreted as a file upload if POSTFIELDS
+ // is an array, but not if it's a string. So convert $req['body'] to a string
+ // for safety.
+ $req['body'] = wfArrayToCgi( $req['body'] );
+ }
curl\_setopt( $ch, CURLOPT\_POSTFIELDS, $req['body'] );
} else {
if ( is\_resource( $req['body'] ) || $req['body'] !== '' ) {
--
2.6.4
From 931574ea5dfe8e4d0d3c7749004b0a9968d2f520 Mon Sep 17 00:00:00 2001
From: Brad Jorsch
Date: Wed, 14 Oct 2015 17:40:42 -0400
Subject: [PATCH 3/6] [SECURITY] 0-pad to length in random string generation
Otherwise shorter strings might be generated.
Bug: T115522
Change-Id: I110d873d56762552060fd428c236c8b0e9a859b0
Signed-off-by: Chad Horohoe
---
includes/password/PasswordFactory.php | 5 ++---
1 file changed, 2 insertions(+), 3 deletions(-)
diff --git a/includes/password/PasswordFactory.php b/includes/password/PasswordFactory.php
index 6b634cb..f80e158 100644
--- a/includes/password/PasswordFactory.php
+++ b/includes/password/PasswordFactory.php
@@ -200,11 +200,10 @@ final class PasswordFactory {
// stopping at a minimum of 10 chars.
$length = max( 10, $minLength );
// Multiply by 1.25 to get the number of hex characters we need
- $length = $length \* 1.25;
// Generate random hex chars
- $hex = MWCryptRand::generateHex( $length );
+ $hex = MWCryptRand::generateHex( ceil( $length \* 1.25 ) );
// Convert from base 16 to base 32 to get a proper password like string
- return Wikimedia\base\_convert( $hex, 16, 32 );
+ return substr( Wikimedia\base\_convert( $hex, 16, 32, $length ), -$length );
}
/\*\*
--
2.6.4
From ed03ae5c0a43d9f952c914a8e4df51dea64de4d6 Mon Sep 17 00:00:00 2001
From: Marius Hoch
Date: Sat, 2 May 2015 18:48:04 +0200
Subject: [PATCH 4/6] Fix IP::toHex for IPv4 addresses with a double/triple 0
block
Bug: T97897
Change-Id: I5c0a37be42ae2c5091ead487a6d19f6e0dd89b36
Signed-off-by: Chad Horohoe
---
includes/utils/IP.php | 22 ++++++++++++++++------
tests/phpunit/includes/utils/IPTest.php | 33 ++++++++++++++++++++++++++++-----
2 files changed, 44 insertions(+), 11 deletions(-)
diff --git a/includes/utils/IP.php b/includes/utils/IP.php
index fd7030e..979b6b3 100644
--- a/includes/utils/IP.php
+++ b/includes/utils/IP.php
@@ -132,8 +132,9 @@ class IP {
/\*\*
\* Convert an IP into a verbose, uppercase, normalized form.
- \* IPv6 addresses in octet notation are expanded to 8 words.
- \* IPv4 addresses are just trimmed.
+ \* Both IPv4 and IPv6 addresses are trimmed. Additionally,
+ \* IPv6 addresses in octet notation are expanded to 8 words;
+ \* IPv4 addresses have leading zeros, in each octet, removed.
\*
\* @param string $ip IP address in quad or octet form (CIDR or not).
\* @return string
@@ -143,8 +144,16 @@ class IP {
if ( $ip === '' ) {
return null;
}
- if ( self::isIPv4( $ip ) || !self::isIPv6( $ip ) ) {
- return $ip; // nothing else to do for IPv4 addresses or invalid ones
+ /\* If not an IP, just return trimmed value, since sanitizeIP() is called
+ \* in a number of contexts where usernames are supplied as input.
+ \*/
+ if ( !self::isIPAddress($ip) ) {
+ return $ip;
+ }
+ if ( self::isIPv4( $ip ) ) {
+ // Remove leading 0's from octet representation of IPv4 address
+ $ip = preg\_replace( '/(?:^|(?<=\.))0+(?=[1-9]|0\.|0$)/', '', $ip );
+ return $ip;
}
// Remove any whitespaces, convert to upper case
$ip = strtoupper( $ip );
@@ -399,8 +408,9 @@ class IP {
if ( self::isIPv6( $ip ) ) {
$n = 'v6-' . self::IPv6ToRawHex( $ip );
} elseif ( self::isIPv4( $ip ) ) {
- // Bug 60035: an IP with leading 0's fails in ip2long sometimes (e.g. \*.08)
- $ip = preg\_replace( '/(?<=\.)0+(?=[1-9])/', '', $ip );
+ // T62035/T97897: An IP with leading 0's fails in ip2long sometimes (e.g. \*.08),
+ // also double/triple 0 needs to be changed to just a single 0 for ip2long.
+ $ip = self::sanitizeIP( $ip );
$n = ip2long( $ip );
if ( $n < 0 ) {
$n += pow( 2, 32 );
diff --git a/tests/phpunit/includes/utils/IPTest.php b/tests/phpunit/includes/utils/IPTest.php
index 04b8f48..34aff79 100644
--- a/tests/phpunit/includes/utils/IPTest.php
+++ b/tests/phpunit/includes/utils/IPTest.php
@@ -307,12 +307,34 @@ class IPTest extends PHPUnit\_Framework\_TestCase {
}
/\*\*
- \* Improve IP::sanitizeIP() code coverage
- \* @todo Most probably incomplete
+ \* @covers IP::sanitizeIP
+ \* @dataProvider provideSanitizeIP
\*/
- public function testSanitizeIP() {
- $this->assertNull( IP::sanitizeIP( '' ) );
- $this->assertNull( IP::sanitizeIP( ' ' ) );
+ public function testSanitizeIP( $expected, $input ) {
+ $result = IP::sanitizeIP( $input );
+ $this->assertEquals( $expected, $result );
+ }
+
+ /\*\*
+ \* Provider for IP::testSanitizeIP()
+ \*/
+ public static function provideSanitizeIP() {
+ return array(
+ array( '0.0.0.0', '0.0.0.0' ),
+ array( '0.0.0.0', '00.00.00.00' ),
+ array( '0.0.0.0', '000.000.000.000' ),
+ array( '141.0.11.253', '141.000.011.253' ),
+ array( '1.2.4.5', '1.2.4.5' ),
+ array( '1.2.4.5', '01.02.04.05' ),
+ array( '1.2.4.5', '001.002.004.005' ),
+ array( '10.0.0.1', '010.0.000.1' ),
+ array( '80.72.250.4', '080.072.250.04' ),
+ array( 'Foo.1000.00', 'Foo.1000.00'),
+ array( 'Bar.01', 'Bar.01'),
+ array( 'Bar.010', 'Bar.010'),
+ array( null, ''),
+ array( null, ' ')
+ );
}
/\*\*
@@ -336,6 +358,7 @@ class IPTest extends PHPUnit\_Framework\_TestCase {
array( '80000000', '128.0.0.0' ),
array( 'DEADCAFE', '222.173.202.254' ),
array( 'FFFFFFFF', '255.255.255.255' ),
+ array( '8D000BFD', '141.000.11.253' ),
array( false, 'IN.VA.LI.D' ),
array( 'v6-00000000000000000000000000000001', '::1' ),
array( 'v6-20010DB885A3000000008A2E03707334', '2001:0db8:85a3:0000:0000:8a2e:0370:7334' ),
--
2.6.4
From 31139dfdf788fdfd00a3b3e29c376cb05d7fbfaa Mon Sep 17 00:00:00 2001
From: csteipp
Date: Mon, 5 Oct 2015 16:58:42 -0700
Subject: [PATCH 5/6] SECURITY: Make Special:MyPage and friends fake redirect
to prevent info leak
This prevents a malicious person from using external resources on their
website to cause the victim's web browser to load
Special:MyPage -> User:Username, and then looking it up in the page hit
statistics in order to correlate IPs from the malicious person's server
log, with usernames on wiki.
This feature can be disabled with $wgHideIdentifiableRedirects.
Bug: T109724
Change-Id: Ia0e742dc92c77af4832174dfa24c6dcaa6ee80e9
Signed-off-by: Chad Horohoe
---
includes/DefaultSettings.php | 6 ++++
includes/MediaWiki.php | 44 ++++++++++++++++++++----
includes/specialpage/RedirectSpecialPage.php | 12 +++++++
includes/specials/SpecialMyLanguage.php | 11 ++++++
includes/specials/SpecialMyRedirectPages.php | 50 ++++++++++++++++++++++++++++
5 files changed, 117 insertions(+), 6 deletions(-)
diff --git a/includes/DefaultSettings.php b/includes/DefaultSettings.php
index 39b133b..19e0bf1 100644
--- a/includes/DefaultSettings.php
+++ b/includes/DefaultSettings.php
@@ -4755,6 +4755,12 @@ $wgWhitelistReadRegexp = false;
$wgEmailConfirmToEdit = false;
/\*\*
+ \* Should MediaWiki attempt to protect user's privacy when doing redirects?
+ \* Keep this true if access counts to articles are made public.
+ \*/
+$wgHideIdentifiableRedirects = true;
+
+/\*\*
\* Permission keys given to users in each group.
\*
\* This is an array where the keys are all groups and each value is an
diff --git a/includes/MediaWiki.php b/includes/MediaWiki.php
index bb0f1e4..2769a6c 100644
--- a/includes/MediaWiki.php
+++ b/includes/MediaWiki.php
@@ -37,6 +37,11 @@ class MediaWiki {
private $config;
/\*\*
+ \* @var String Cache what action this request is
+ \*/
+ private $action;
+
+ /\*\*
\* @param IContextSource|null $context
\*/
public function \_\_construct( IContextSource $context = null ) {
@@ -141,13 +146,11 @@ class MediaWiki {
\* @return string Action
\*/
public function getAction() {
- static $action = null;
-
- if ( $action === null ) {
- $action = Action::getActionName( $this->context );
+ if ( $this->action === null ) {
+ $this->action = Action::getActionName( $this->context );
}
- return $action;
+ return $this->action;
}
/\*\*
@@ -241,8 +244,37 @@ class MediaWiki {
// Handle any other redirects.
// Redirect loops, titleless URL, $wgUsePathInfo URLs, and URLs with a variant
} elseif ( !$this->tryNormaliseRedirect( $title ) ) {
+ // Prevent information leak via Special:MyPage et al (T109724)
+ if ( $title->isSpecialPage() ) {
+ $specialPage = SpecialPageFactory::getPage( $title->getDBKey() );
+ if ( $specialPage instanceof RedirectSpecialPage
+ && $this->config->get( 'HideIdentifiableRedirects' )
+ && $specialPage->personallyIdentifiableTarget()
+ ) {
+ list( , $subpage ) = SpecialPageFactory::resolveAlias( $title->getDBKey() );
+ $target = $specialPage->getRedirect( $subpage );
+ // target can also be true. We let that case fall through to normal processing.
+ if ( $target instanceof Title ) {
+ $query = $specialPage->getRedirectQuery() ?: array();
+ $request = new DerivativeRequest( $this->context->getRequest(), $query );
+ $request->setRequestURL( $this->context->getRequest()->getRequestURL() );
+ $this->context->setRequest( $request );
+ // Do not varnish cache these. May vary even for anons
+ $this->context->getOutput()->lowerCdnMaxage( 0 );
+ $this->context->setTitle( $target );
+ $wgTitle = $target;
+ // Reset action type cache. (Special pages have only view)
+ $this->action = null;
+ $title = $target;
+ $output->addJsConfigVars( array(
+ 'wgInternalRedirectTargetUrl' => $target->getFullURL(),
+ ) );
+ $output->addModules( 'mediawiki.action.view.redirect' );
+ }
+ }
+ }
- // Special pages
+ // Special pages ($title may have changed since if statement above)
if ( NS\_SPECIAL == $title->getNamespace() ) {
// Actions that need to be made when we have a special pages
SpecialPageFactory::executePath( $title, $this->context );
diff --git a/includes/specialpage/RedirectSpecialPage.php b/includes/specialpage/RedirectSpecialPage.php
index 9129ee5..5047354 100644
--- a/includes/specialpage/RedirectSpecialPage.php
+++ b/includes/specialpage/RedirectSpecialPage.php
@@ -94,6 +94,18 @@ abstract class RedirectSpecialPage extends UnlistedSpecialPage {
? $params
: false;
}
+
+ /\*\*
+ \* Indicate if the target of this redirect can be used to identify
+ \* a particular user of this wiki (e.g., if the redirect is to the
+ \* user page of a User). See T109724.
+ \*
+ \* @since 1.27
+ \* @return bool
+ \*/
+ public function personallyIdentifiableTarget() {
+ return false;
+ }
}
/\*\*
diff --git a/includes/specials/SpecialMyLanguage.php b/includes/specials/SpecialMyLanguage.php
index 3d8ff97..d11fbe6 100644
--- a/includes/specials/SpecialMyLanguage.php
+++ b/includes/specials/SpecialMyLanguage.php
@@ -99,4 +99,15 @@ class SpecialMyLanguage extends RedirectSpecialArticle {
return $base;
}
}
+
+ /\*\*
+ \* Target can identify a specific user's language preference.
+ \*
+ \* @see T109724
+ \* @since 1.27
+ \* @return bool
+ \*/
+ public function personallyIdentifiableTarget() {
+ return true;
+ }
}
diff --git a/includes/specials/SpecialMyRedirectPages.php b/includes/specials/SpecialMyRedirectPages.php
index 5ef03f1..850b1f6 100644
--- a/includes/specials/SpecialMyRedirectPages.php
+++ b/includes/specials/SpecialMyRedirectPages.php
@@ -45,6 +45,16 @@ class SpecialMypage extends RedirectSpecialArticle {
return Title::makeTitle( NS\_USER, $this->getUser()->getName() . '/' . $subpage );
}
+
+ /\*\*
+ \* Target identifies a specific User. See T109724.
+ \*
+ \* @since 1.27
+ \* @return bool
+ \*/
+ public function personallyIdentifiableTarget() {
+ return true;
+ }
}
/\*\*
@@ -68,6 +78,16 @@ class SpecialMytalk extends RedirectSpecialArticle {
return Title::makeTitle( NS\_USER\_TALK, $this->getUser()->getName() . '/' . $subpage );
}
+
+ /\*\*
+ \* Target identifies a specific User. See T109724.
+ \*
+ \* @since 1.27
+ \* @return bool
+ \*/
+ public function personallyIdentifiableTarget() {
+ return true;
+ }
}
/\*\*
@@ -90,6 +110,16 @@ class SpecialMycontributions extends RedirectSpecialPage {
public function getRedirect( $subpage ) {
return SpecialPage::getTitleFor( 'Contributions', $this->getUser()->getName() );
}
+
+ /\*\*
+ \* Target identifies a specific User. See T109724.
+ \*
+ \* @since 1.27
+ \* @return bool
+ \*/
+ public function personallyIdentifiableTarget() {
+ return true;
+ }
}
/\*\*
@@ -110,6 +140,16 @@ class SpecialMyuploads extends RedirectSpecialPage {
public function getRedirect( $subpage ) {
return SpecialPage::getTitleFor( 'Listfiles', $this->getUser()->getName() );
}
+
+ /\*\*
+ \* Target identifies a specific User. See T109724.
+ \*
+ \* @since 1.27
+ \* @return bool
+ \*/
+ public function personallyIdentifiableTarget() {
+ return true;
+ }
}
/\*\*
@@ -132,4 +172,14 @@ class SpecialAllMyUploads extends RedirectSpecialPage {
return SpecialPage::getTitleFor( 'Listfiles', $this->getUser()->getName() );
}
+
+ /\*\*
+ \* Target identifies a specific User. See T109724.
+ \*
+ \* @since 1.27
+ \* @return bool
+ \*/
+ public function personallyIdentifiableTarget() {
+ return true;
+ }
}
--
2.6.4
From 47d733a0617170a3120bc4d5d387f4f17c9a6d28 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Bartosz=20Dziewo=C5=84ski?=
Date: Thu, 19 Nov 2015 17:13:13 -0500
Subject: [PATCH 6/6] Add $query to JavaScript redirect info
Bug: T109724
Change-Id: I57a8f75067365d3da6388d2f8f7fe95ed5e6f310
Signed-off-by: Chad Horohoe
---
includes/MediaWiki.php | 2 +-
1 file changed, 1 insertion(+), 1 deletion(-)
diff --git a/includes/MediaWiki.php b/includes/MediaWiki.php
index 2769a6c..4c0da95 100644
--- a/includes/MediaWiki.php
+++ b/includes/MediaWiki.php
@@ -267,7 +267,7 @@ class MediaWiki {
$this->action = null;
$title = $target;
$output->addJsConfigVars( array(
- 'wgInternalRedirectTargetUrl' => $target->getFullURL(),
+ 'wgInternalRedirectTargetUrl' => $target->getFullURL( $query ),
) );
$output->addModules( 'mediawiki.action.view.redirect' );
}
--
2.6.4

