=== Content from w1.fi_fb4bfa1b_20250124_163339.html ===
ChangeLog for wpa\_supplicant
2024-07-20 - v2.11
\* Wi-Fi Easy Connect
- add support for DPP release 3
- allow Configurator parameters to be provided during config exchange
\* MACsec
- add support for GCM-AES-256 cipher suite
- remove incorrect EAP Session-Id length constraint
- add hardware offload support for additional drivers
\* HE/IEEE 802.11ax/Wi-Fi 6
- support BSS color updates
- various fixes
\* EHT/IEEE 802.11be/Wi-Fi 7
- add preliminary support
\* support OpenSSL 3.0 API changes
\* improve EAP-TLS support for TLSv1.3
\* EAP-SIM/AKA: support IMSI privacy
\* improve mitigation against DoS attacks when PMF is used
\* improve 4-way handshake operations
- discard unencrypted EAPOL frames in additional cases
- use Secure=1 in message 2 during PTK rekeying
\* OCV: do not check Frequency Segment 1 Channel Number for 160 MHz cases
to avoid interoperability issues
\* support new SAE AKM suites with variable length keys
\* support new AKM for 802.1X/EAP with SHA384
\* improve cross-AKM roaming with driver-based SME/BSS selection
\* PASN
- extend support for secure ranging
- allow PASN implementation to be used with external programs for
Wi-Fi Aware
\* FT: Use SHA256 to derive PMKID for AKM 00-0F-AC:3 (FT-EAP)
- this is based on additional details being added in the IEEE 802.11
standard
- the new implementation is not backwards compatible, but PMKSA
caching with FT-EAP was, and still is, disabled by default
\* support a pregenerated MAC (mac\_addr=3) as an alternative mechanism
for using per-network random MAC addresses
\* EAP-PEAP: require Phase 2 authentication by default (phase2\_auth=1)
to improve security for still unfortunately common invalid
configurations that do not set ca\_cert
\* extend SCS support for QoS Characteristics
\* extend MSCS support
\* support unsynchronized service discovery (USD)
\* add support for explicit SSID protection in 4-way handshake
(a mitigation for CVE-2023-52424; disabled by default for now, can be
enabled with ssid\_protection=1)
- in addition, verify SSID after key setup when beacon protection is
used
\* fix SAE H2E rejected groups validation to avoid downgrade attacks
\* a large number of other fixes, cleanup, and extensions
2022-01-16 - v2.10
\* SAE changes
- improved protection against side channel attacks
[https://w1.fi/security/2022-1/]
- added support for the hash-to-element mechanism (sae\_pwe=1 or
sae\_pwe=2); this is currently disabled by default, but will likely
get enabled by default in the future
- fixed PMKSA caching with OKC
- added support for SAE-PK
\* EAP-pwd changes
- improved protection against side channel attacks
[https://w1.fi/security/2022-1/]
\* fixed P2P provision discovery processing of a specially constructed
invalid frame
[https://w1.fi/security/2021-1/]
\* fixed P2P group information processing of a specially constructed
invalid frame
[https://w1.fi/security/2020-2/]
\* fixed PMF disconnection protection bypass in AP mode
[https://w1.fi/security/2019-7/]
\* added support for using OpenSSL 3.0
\* increased the maximum number of EAP message exchanges (mainly to
support cases with very large certificates)
\* fixed various issues in experimental support for EAP-TEAP peer
\* added support for DPP release 2 (Wi-Fi Device Provisioning Protocol)
\* a number of MKA/MACsec fixes and extensions
\* added support for SAE (WPA3-Personal) AP mode configuration
\* added P2P support for EDMG (IEEE 802.11ay) channels
\* fixed EAP-FAST peer with TLS GCM/CCM ciphers
\* improved throughput estimation and BSS selection
\* dropped support for libnl 1.1
\* added support for nl80211 control port for EAPOL frame TX/RX
\* fixed OWE key derivation with groups 20 and 21; this breaks backwards
compatibility for these groups while the default group 19 remains
backwards compatible
\* added support for Beacon protection
\* added support for Extended Key ID for pairwise keys
\* removed WEP support from the default build (CONFIG\_WEP=y can be used
to enable it, if really needed)
\* added a build option to remove TKIP support (CONFIG\_NO\_TKIP=y)
\* added support for Transition Disable mechanism to allow the AP to
automatically disable transition mode to improve security
\* extended D-Bus interface
\* added support for PASN
\* added a file-based backend for external password storage to allow
secret information to be moved away from the main configuration file
without requiring external tools
\* added EAP-TLS peer support for TLS 1.3 (disabled by default for now)
\* added support for SCS, MSCS, DSCP policy
\* changed driver interface selection to default to automatic fallback
to other compiled in options
\* a large number of other fixes, cleanup, and extensions
2019-08-07 - v2.9
\* SAE changes
- disable use of groups using Brainpool curves
- improved protection against side channel attacks
[https://w1.fi/security/2019-6/]
\* EAP-pwd changes
- disable use of groups using Brainpool curves
- allow the set of groups to be configured (eap\_pwd\_groups)
- improved protection against side channel attacks
[https://w1.fi/security/2019-6/]
\* fixed FT-EAP initial mobility domain association using PMKSA caching
(disabled by default for backwards compatibility; can be enabled
with ft\_eap\_pmksa\_caching=1)
\* fixed a regression in OpenSSL 1.1+ engine loading
\* added validation of RSNE in (Re)Association Response frames
\* fixed DPP bootstrapping URI parser of channel list
\* extended EAP-SIM/AKA fast re-authentication to allow use with FILS
\* extended ca\_cert\_blob to support PEM format
\* improved robustness of P2P Action frame scheduling
\* added support for EAP-SIM/AKA using anonymous@realm identity
\* fixed Hotspot 2.0 credential selection based on roaming consortium
to ignore credentials without a specific EAP method
\* added experimental support for EAP-TEAP peer (RFC 7170)
\* added experimental support for EAP-TLS peer with TLS v1.3
\* fixed a regression in WMM parameter configuration for a TDLS peer
\* fixed a regression in operation with drivers that offload 802.1X
4-way handshake
\* fixed an ECDH operation corner case with OpenSSL
2019-04-21 - v2.8
\* SAE changes
- added support for SAE Password Identifier
- changed default configuration to enable only groups 19, 20, 21
(i.e., disable groups 25 and 26) and disable all unsuitable groups
completely based on REVmd changes
- do not regenerate PWE unnecessarily when the AP uses the
anti-clogging token mechanisms
- fixed some association cases where both SAE and FT-SAE were enabled
on both the station and the selected AP
- started to prefer FT-SAE over SAE AKM if both are enabled
- started to prefer FT-SAE over FT-PSK if both are enabled
- fixed FT-SAE when SAE PMKSA caching is used
- reject use of unsuitable groups based on new implementation guidance
in REVmd (allow only FFC groups with prime >= 3072 bits and ECC
groups with prime >= 256)
- minimize timing and memory use differences in PWE derivation
[https://w1.fi/security/2019-1/] (CVE-2019-9494)
\* EAP-pwd changes
- minimize timing and memory use differences in PWE derivation
[https://w1.fi/security/2019-2/] (CVE-2019-9495)
- verify server scalar/element
[https://w1.fi/security/2019-4/] (CVE-2019-9499)
- fix message reassembly issue with unexpected fragment
[https://w1.fi/security/2019-5/]
- enforce rand,mask generation rules more strictly
- fix a memory leak in PWE derivation
- disallow ECC groups with a prime under 256 bits (groups 25, 26, and
27)
\* fixed CONFIG\_IEEE80211R=y (FT) build without CONFIG\_FILS=y
\* Hotspot 2.0 changes
- do not indicate release number that is higher than the one
AP supports
- added support for release number 3
- enable PMF automatically for network profiles created from
credentials
\* fixed OWE network profile saving
\* fixed DPP network profile saving
\* added support for RSN operating channel validation
(CONFIG\_OCV=y and network profile parameter ocv=1)
\* added Multi-AP backhaul STA support
\* fixed build with LibreSSL
\* number of MKA/MACsec fixes and extensions
\* extended domain\_match and domain\_suffix\_match to allow list of values
\* fixed dNSName matching in domain\_match and domain\_suffix\_match when
using wolfSSL
\* started to prefer FT-EAP-SHA384 over WPA-EAP-SUITE-B-192 AKM if both
are enabled
\* extended nl80211 Connect and external authentication to support
SAE, FT-SAE, FT-EAP-SHA384
\* fixed KEK2 derivation for FILS+FT
\* extended client\_cert file to allow loading of a chain of PEM
encoded certificates
\* extended beacon reporting functionality
\* extended D-Bus interface with number of new properties
\* fixed a regression in FT-over-DS with mac80211-based drivers
\* OpenSSL: allow systemwide policies to be overridden
\* extended driver flags indication for separate 802.1X and PSK
4-way handshake offload capability
\* added support for random P2P Device/Interface Address use
\* extended PEAP to derive EMSK to enable use with ERP/FILS
\* extended WPS to allow SAE configuration to be added automatically
for PSK (wps\_cred\_add\_sae=1)
\* removed support for the old D-Bus interface (CONFIG\_CTRL\_IFACE\_DBUS)
\* extended domain\_match and domain\_suffix\_match to allow list of values
\* added a RSN workaround for misbehaving PMF APs that advertise
IGTK/BIP KeyID using incorrect byte order
\* fixed PTK rekeying with FILS and FT
2018-12-02 - v2.7
\* fixed WPA packet number reuse with replayed messages and key
reinstallation
[https://w1.fi/security/2017-1/] (CVE-2017-13077, CVE-2017-13078,
CVE-2017-13079, CVE-2017-13080, CVE-2017-13081, CVE-2017-13082,
CVE-2017-13086, CVE-2017-13087, CVE-2017-13088)
\* fixed unauthenticated EAPOL-Key decryption in wpa\_supplicant
[https://w1.fi/security/2018-1/] (CVE-2018-14526)
\* added support for FILS (IEEE 802.11ai) shared key authentication
\* added support for OWE (Opportunistic Wireless Encryption, RFC 8110;
and transition mode defined by WFA)
\* added support for DPP (Wi-Fi Device Provisioning Protocol)
\* added support for RSA 3k key case with Suite B 192-bit level
\* fixed Suite B PMKSA caching not to update PMKID during each 4-way
handshake
\* fixed EAP-pwd pre-processing with PasswordHashHash
\* added EAP-pwd client support for salted passwords
\* fixed a regression in TDLS prohibited bit validation
\* started to use estimated throughput to avoid undesired signal
strength based roaming decision
\* MACsec/MKA:
- new macsec\_linux driver interface support for the Linux
kernel macsec module
- number of fixes and extensions
\* added support for external persistent storage of PMKSA cache
(PMKSA\_GET/PMKSA\_ADD control interface commands; and
MESH\_PMKSA\_GET/MESH\_PMKSA\_SET for the mesh case)
\* fixed mesh channel configuration pri/sec switch case
\* added support for beacon report
\* large number of other fixes, cleanup, and extensions
\* added support for randomizing local address for GAS queries
(gas\_rand\_mac\_addr parameter)
\* fixed EAP-SIM/AKA/AKA' ext auth cases within TLS tunnel
\* added option for using random WPS UUID (auto\_uuid=1)
\* added SHA256-hash support for OCSP certificate matching
\* fixed EAP-AKA' to add AT\_KDF into Synchronization-Failure
\* fixed a regression in RSN pre-authentication candidate selection
\* added option to configure allowed group management cipher suites
(group\_mgmt network profile parameter)
\* removed all PeerKey functionality
\* fixed nl80211 AP and mesh mode configuration regression with
Linux 4.15 and newer
\* added ap\_isolate configuration option for AP mode
\* added support for nl80211 to offload 4-way handshake into the driver
\* added support for using wolfSSL cryptographic library
\* SAE
- added support for configuring SAE password separately of the
WPA2 PSK/passphrase
- fixed PTK and EAPOL-Key integrity and key-wrap algorithm selection
for SAE;
note: this is not backwards compatible, i.e., both the AP and
station side implementations will need to be update at the same
time to maintain interoperability
- added support for Password Identifier
- fixed FT-SAE PMKID matching
\* Hotspot 2.0
- added support for fetching of Operator Icon Metadata ANQP-element
- added support for Roaming Consortium Selection element
- added support for Terms and Conditions
- added support for OSEN connection in a shared RSN BSS
- added support for fetching Venue URL information
\* added support for using OpenSSL 1.1.1
\* FT
- disabled PMKSA caching with FT since it is not fully functional
- added support for SHA384 based AKM
- added support for BIP ciphers BIP-CMAC-256, BIP-GMAC-128,
BIP-GMAC-256 in addition to previously supported BIP-CMAC-128
- fixed additional IE inclusion in Reassociation Request frame when
using FT protocol
2016-10-02 - v2.6
\* fixed WNM Sleep Mode processing when PMF is not enabled
[http://w1.fi/security/2015-6/] (CVE-2015-5310)
\* fixed EAP-pwd last fragment validation
[http://w1.fi/security/2015-7/] (CVE-2015-5315)
\* fixed EAP-pwd unexpected Confirm message processing
[http://w1.fi/security/2015-8/] (CVE-2015-5316)
\* fixed WPS configuration update vulnerability with malformed passphrase
[http://w1.fi/security/2016-1/] (CVE-2016-4476)
\* fixed configuration update vulnerability with malformed parameters set
over the local control interface
[http://w1.fi/security/2016-1/] (CVE-2016-4477)
\* fixed TK configuration to the driver in EAPOL-Key 3/4 retry case
\* extended channel switch support for P2P GO
\* started to throttle control interface event message bursts to avoid
issues with monitor sockets running out of buffer space
\* mesh mode fixes/improvements
- generate proper AID for peer
- enable WMM by default
- add VHT support
- fix PMKID derivation
- improve robustness on various exchanges
- fix peer link counting in reconnect case
- improve mesh joining behavior
- allow DTIM period to be configured
- allow HT to be disabled (disable\_ht=1)
- add MESH\_PEER\_ADD and MESH\_PEER\_REMOVE commands
- add support for PMKSA caching
- add minimal support for SAE group negotiation
- allow pairwise/group cipher to be configured in the network profile
- use ieee80211w profile parameter to enable/disable PMF and derive
a separate TX IGTK if PMF is enabled instead of using MGTK
incorrectly
- fix AEK and MTK derivation
- remove GTKdata and IGTKdata from Mesh Peering Confirm/Close
- note: these changes are not fully backwards compatible for secure
(RSN) mesh network
\* fixed PMKID derivation with SAE
\* added support for requesting and fetching arbitrary ANQP-elements
without internal support in wpa\_supplicant for the specific element
(anqp[265]= in "BSS " command output)
\* P2P
- filter control characters in group client device names to be
consistent with other P2P peer cases
- support VHT 80+80 MHz and 160 MHz
- indicate group completion in P2P Client role after data association
instead of already after the WPS provisioning step
- improve group-join operation to use SSID, if known, to filter BSS
entries
- added optional ssid= argument to P2P\_CONNECT for join case
- added P2P\_GROUP\_MEMBER command to fetch client interface address
\* P2PS
- fix follow-on PD Response behavior
- fix PD Response generation for unknown peer
- fix persistent group reporting
- add channel policy to PD Request
- add group SSID to the P2PS-PROV-DONE event
- allow "P2P\_CONNECT  p2ps" to be used without specifying the
default PIN
\* BoringSSL
- support for OCSP stapling
- support building of h20-osu-client
\* D-Bus
- add ExpectDisconnect()
- add global config parameters as properties
- add SaveConfig()
- add VendorElemAdd(), VendorElemGet(), VendorElemRem()
\* fixed Suite B 192-bit AKM to use proper PMK length
(note: this makes old releases incompatible with the fixed behavior)
\* improved PMF behavior for cases where the AP and STA has different
configuration by not trying to connect in some corner cases where the
connection cannot succeed
\* added option to reopen debug log (e.g., to rotate the file) upon
receipt of SIGHUP signal
\* EAP-pwd: added support for Brainpool Elliptic Curves
(with OpenSSL 1.0.2 and newer)
\* fixed EAPOL reauthentication after FT protocol run
\* fixed FTIE generation for 4-way handshake after FT protocol run
\* extended INTERFACE\_ADD command to allow certain type (sta/ap)
interface to be created
\* fixed and improved various FST operations
\* added 80+80 MHz and 160 MHz VHT support for IBSS/mesh
\* fixed SIGNAL\_POLL in IBSS and mesh cases
\* added an option to abort an ongoing scan (used to speed up connection
and can also be done with the new ABORT\_SCAN command)
\* TLS client
- do not verify CA certificates when ca\_cert is not specified
- support validating server certificate hash
- support SHA384 and SHA512 hashes
- add signature\_algorithms extension into ClientHello
- support TLS v1.2 signature algorithm with SHA384 and SHA512
- support server certificate probing
- allow specific TLS versions to be disabled with phase2 parameter
- support extKeyUsage
- support PKCS #5 v2.0 PBES2
- support PKCS #5 with PKCS #12 style key decryption
- minimal support for PKCS #12
- support OCSP stapling (including ocsp\_multi)
\* OpenSSL
- support OpenSSL 1.1 API changes
- drop support for OpenSSL 0.9.8
- drop support for OpenSSL 1.0.0
\* added support for multiple schedule scan plans (sched\_scan\_plans)
\* added support for external server certificate chain validation
(tls\_ext\_cert\_check=1 in the network profile phase1 parameter)
\* made phase2 parser more strict about correct use of auth= and
autheap= values
\* improved GAS offchannel operations with comeback request
\* added SIGNAL\_MONITOR command to request signal strength monitoring
events
\* added command for retrieving HS 2.0 icons with in-memory storage
(REQ\_HS20\_ICON, GET\_HS20\_ICON, DEL\_HS20\_ICON commands and
RX-HS20-ICON event)
\* enabled ACS support for AP mode operations with wpa\_supplicant
\* EAP-PEAP: fixed interoperability issue with Windows 2012r2 server
("Invalid Compound\_MAC in cryptobinding TLV")
\* EAP-TTLS: fixed success after fragmented final Phase 2 message
\* VHT: added interoperability workaround for 80+80 and 160 MHz channels
\* WNM: workaround for broken AP operating class behavior
\* added kqueue(2) support for eloop (CONFIG\_ELOOP\_KQUEUE)
\* nl80211:
- add support for full station state operations
- do not add NL80211\_ATTR\_SMPS\_MODE attribute if HT is disabled
- add NL80211\_ATTR\_PREV\_BSSID with Connect command
- fix IEEE 802.1X/WEP EAP reauthentication and rekeying to use
unencrypted EAPOL frames
\* added initial MBO support; number of extensions to WNM BSS Transition
Management
\* added support for PBSS/PCP and P2P on 60 GHz
\* Interworking: add credential realm to EAP-TLS identity
\* fixed EAPOL-Key Request Secure bit to be 1 if PTK is set
\* HS 2.0: add support for configuring frame filters
\* added POLL\_STA command to check connectivity in AP mode
\* added initial functionality for location related operations
\* started to ignore pmf=1/2 parameter for non-RSN networks
\* added wps\_disabled=1 network profile parameter to allow AP mode to
be started without enabling WPS
\* wpa\_cli: added action script support for AP-ENABLED and AP-DISABLED
events
\* improved Public Action frame addressing
- add gas\_address3 configuration parameter to control Address 3
behavior
\* number of small fixes
2015-09-27 - v2.5
\* fixed P2P validation of SSID element length before copying it
[http://w1.fi/security/2015-1/] (CVE-2015-1863)
\* fixed WPS UPnP vulnerability with HTTP chunked transfer encoding
[http://w1.fi/security/2015-2/] (CVE-2015-4141)
\* fixed WMM Action frame parser (AP mode)
[http://w1.fi/security/2015-3/] (CVE-2015-4142)
\* fixed EAP-pwd peer missing payload length validation
[http://w1.fi/security/2015-4/]
(CVE-2015-4143, CVE-2015-4144, CVE-2015-4145, CVE-2015-4146)
\* fixed validation of WPS and P2P NFC NDEF record payload length
[http://w1.fi/security/2015-5/]
\* nl80211:
- added VHT configuration for IBSS
- fixed vendor command handling to check OUI properly
- allow driver-based roaming to change ESS
\* added AVG\_BEACON\_RSSI to SIGNAL\_POLL output
\* wpa\_cli: added tab completion for number of commands
\* removed unmaintained and not yet completed SChannel/CryptoAPI support
\* modified Extended Capabilities element use in Probe Request frames to
include all cases if any of the values are non-zero
\* added support for dynamically creating/removing a virtual interface
with interface\_add/interface\_remove
\* added support for hashed password (NtHash) in EAP-pwd peer
\* added support for memory-only PSK/passphrase (mem\_only\_psk=1 and
CTRL-REQ/RSP-PSK\_PASSPHRASE)
\* P2P
- optimize scan frequencies list when re-joining a persistent group
- fixed number of sequences with nl80211 P2P Device interface
- added operating class 125 for P2P use cases (this allows 5 GHz
channels 161 and 169 to be used if they are enabled in the current
regulatory domain)
- number of fixes to P2PS functionality
- do not allow 40 MHz co-ex PRI/SEC switch to force MCC
- extended support for preferred channel listing
\* D-Bus:
- fixed WPS property of fi.w1.wpa\_supplicant1.BSS interface
- fixed PresenceRequest to use group interface
- added new signals: FindStopped, WPS pbc-overlap,
GroupFormationFailure, WPS timeout, InvitationReceived
- added new methods: WPS Cancel, P2P Cancel, Reconnect, RemoveClient
- added manufacturer info
\* added EAP-EKE peer support for deriving Session-Id
\* added wps\_priority configuration parameter to set the default priority
for all network profiles added by WPS
\* added support to request a scan with specific SSIDs with the SCAN
command (optional "ssid " arguments)
\* removed support for WEP40/WEP104 as a group cipher with WPA/WPA2
\* fixed SAE group selection in an error case
\* modified SAE routines to be more robust and PWE generation to be
stronger against timing attacks
\* added support for Brainpool Elliptic Curves with SAE
\* added support for CCMP-256 and GCMP-256 as group ciphers with FT
\* fixed BSS selection based on estimated throughput
\* added option to disable TLSv1.0 with OpenSSL
(phase1="tls\_disable\_tlsv1\_0=1")
\* added Fast Session Transfer (FST) module
\* fixed OpenSSL PKCS#12 extra certificate handling
\* fixed key derivation for Suite B 192-bit AKM (this breaks
compatibility with the earlier version)
\* added RSN IE to Mesh Peering Open/Confirm frames
\* number of small fixes
2015-03-15 - v2.4
\* allow OpenSSL cipher configuration to be set for internal EAP server
(openssl\_ciphers parameter)
\* fixed number of small issues based on hwsim test case failures and
static analyzer reports
\* P2P:
- add new=<0/1> flag to P2P-DEVICE-FOUND events
- add passive channels in invitation response from P2P Client
- enable nl80211 P2P\_DEVICE support by default
- fix regresssion in disallow\_freq preventing search on social
channels
- fix regressions in P2P SD query processing
- try to re-invite with social operating channel if no common channels
in invitation
- allow cross connection on parent interface (this fixes number of
use cases with nl80211)
- add support for P2P services (P2PS)
- add p2p\_go\_ctwindow configuration parameter to allow GO CTWindow to
be configured
\* increase postponing of EAPOL-Start by one second with AP/GO that
supports WPS 2.0 (this makes it less likely to trigger extra roundtrip
of identity frames)
\* add support for PMKSA caching with SAE
\* add support for control mesh BSS (IEEE 802.11s) operations
\* fixed number of issues with D-Bus P2P commands
\* fixed regression in ap\_scan=2 special case for WPS
\* fixed macsec\_validate configuration
\* add a workaround for incorrectly behaving APs that try to use
EAPOL-Key descriptor version 3 when the station supports PMF even if
PMF is not enabled on the AP
\* allow TLS v1.1 and v1.2 to be negotiated by default; previous behavior
of disabling these can be configured to work around issues with broken
servers with phase1="tls\_disable\_tlsv1\_1=1 tls\_disable\_tlsv1\_2=1"
\* add support for Suite B (128-bit and 192-bit level) key management and
cipher suites
\* add WMM-AC support (WMM\_AC\_ADDTS/WMM\_AC\_DELTS)
\* improved BSS Transition Management processing
\* add support for neighbor report
\* add support for link measurement
\* fixed expiration of BSS entry with all-zeros BSSID
\* add optional LAST\_ID=x argument to LIST\_NETWORK to allow all
configured networks to be listed even with huge number of network
profiles
\* add support for EAP Re-Authentication Protocol (ERP)
\* fixed EAP-IKEv2 fragmentation reassembly
\* improved PKCS#11 configuration for OpenSSL
\* set stdout to be line-buffered
\* add TDLS channel switch configuration
\* add support for MAC address randomization in scans with nl80211
\* enable HT for IBSS if supported by the driver
\* add BSSID black and white lists (bssid\_blacklist, bssid\_whitelist)
\* add support for domain\_suffix\_match with GnuTLS
\* add OCSP stapling client support with GnuTLS
\* include peer certificate in EAP events even without a separate probe
operation; old behavior can be restored with cert\_in\_cb=0
\* add peer ceritficate alt subject name to EAP events
(CTRL-EVENT-EAP-PEER-ALT)
\* add domain\_match network profile parameter (similar to
domain\_suffix\_match, but full match is required)
\* enable AP/GO mode HT Tx STBC automatically based on driver support
\* add ANQP-QUERY-DONE event to provide information on ANQP parsing
status
\* allow passive scanning to be forced with passive\_scan=1
\* add a workaround for Linux packet socket behavior when interface is in
bridge
\* increase 5 GHz band preference in BSS selection (estimate SNR, if info
not available from driver; estimate maximum throughput based on common
HT/VHT/specific TX rate support)
\* add INTERWORKING\_ADD\_NETWORK ctrl\_iface command; this can be used to
implement Interworking network selection behavior in upper layers
software components
\* add optional reassoc\_same\_bss\_optim=1 (disabled by default)
optimization to avoid unnecessary Authentication frame exchange
\* extend TDLS frame padding workaround to cover all packets
\* allow wpa\_supplicant to recover nl80211 functionality if the cfg80211
module gets removed and reloaded without restarting wpa\_supplicant
\* allow hostapd DFS implementation to be used in wpa\_supplicant AP mode
2014-10-09 - v2.3
\* fixed number of minor issues identified in static analyzer warnings
\* fixed wfd\_dev\_info to be more careful and not read beyond the buffer
when parsing invalid information for P2P-DEVICE-FOUND
\* extended P2P and GAS query operations to support drivers that have
maximum remain-on-channel time below 1000 ms (500 ms is the current
minimum supported value)
\* added p2p\_search\_delay parameter to make the default p2p\_find delay
configurable
\* improved P2P operating channel selection for various multi-channel
concurrency cases
\* fixed some TDLS failure cases to clean up driver state
\* fixed dynamic interface addition cases with nl80211 to avoid adding
ifindex values to incorrect interface to skip foreign interface events
properly
\* added TDLS workaround for some APs that may add extra data to the
end of a short frame
\* fixed EAP-AKA' message parser with multiple AT\_KDF attributes
\* added configuration option (p2p\_passphrase\_len) to allow longer
passphrases to be generated for P2P groups
\* fixed IBSS channel configuration in some corner cases
\* improved HT/VHT/QoS parameter setup for TDLS
\* modified D-Bus interface for P2P peers/groups
\* started to use constant time comparison for various password and hash
values to reduce possibility of any externally measurable timing
differences
\* extended explicit clearing of freed memory and expired keys to avoid
keeping private data in memory longer than necessary
\* added optional scan\_id parameter to the SCAN command to allow manual
scan requests for active scans for specific configured SSIDs
\* fixed CTRL-EVENT-REGDOM-CHANGE event init parameter value
\* added option to set Hotspot 2.0 Rel 2 update\_identifier in network
configuration to support external configuration
\* modified Android PNO functionality to send Probe Request frames only
for hidden SSIDs (based on scan\_ssid=1)
\* added generic mechanism for adding vendor elements into frames at
runtime (VENDOR\_ELEM\_ADD, VENDOR\_ELEM\_GET, VENDOR\_ELEM\_REMOVE)
\* added fields to show unrecognized vendor elements in P2P\_PEER
\* removed EAP-TTLS/MSCHAPv2 interoperability workaround so that
MS-CHAP2-Success is required to be present regardless of
eap\_workaround configuration
\* modified EAP fast session resumption to allow results to be used only
with the same network block that generated them
\* extended freq\_list configuration to apply for sched\_scan as well as
normal scan
\* modified WPS to merge mixed-WPA/WPA2 credentials from a single session
\* fixed nl80211/RTM\_DELLINK processing when a P2P GO interface is
removed from a bridge
\* fixed number of small P2P issues to make negotiations more robust in
corner cases
\* added experimental support for using temporary, random local MAC
address (mac\_addr and preassoc\_mac\_addr parameters); this is disabled
by default (i.e., previous behavior of using permanent address is
maintained if configuration is not changed)
\* added D-Bus interface for setting/clearing WFD IEs
\* fixed TDLS AID configuration for VHT
\* modified -m configuration file to be used only for the P2P
non-netdev management device and do not load this for the default
station interface or load the station interface configuration for
the P2P management interface
\* fixed external MAC address changes while wpa\_supplicant is running
\* started to enable HT (if supported by the driver) for IBSS
\* fixed wpa\_cli action script execution to use more robust mechanism
(CVE-2014-3686)
2014-06-04 - v2.2
\* added DFS indicator to get\_capability freq
\* added/fixed nl80211 functionality
- BSSID/frequency hint for driver-based BSS selection
- fix tearing down WDS STA interfaces
- support vendor specific driver command
(VENDOR   [])
- GO interface teardown optimization
- allow beacon interval to be configured for IBSS
- add SHA256-based AKM suites to CONNECT/ASSOCIATE commands
\* removed unused NFC\_RX\_HANDOVER\_REQ and NFC\_RX\_HANDOVER\_SEL control
interface commands (the more generic NFC\_REPORT\_HANDOVER is now used)
\* fixed MSCHAP UTF-8 to UCS-2 conversion for three-byte encoding;
this fixes password with include UTF-8 characters that use
three-byte encoding EAP methods that use NtPasswordHash
\* fixed couple of sequences where radio work items could get stuck,
e.g., when rfkill blocking happens during scanning or when
scan-for-auth workaround is used
\* P2P enhancements/fixes
- enable enable U-APSD on GO automatically if the driver indicates
support for this
- fixed some service discovery cases with broadcast queries not being
sent to all stations
- fixed Probe Request frame triggering invitation to trigger only a
single invitation instance even if multiple Probe Request frames are
received
- fixed a potential NULL pointer dereference crash when processing an
invalid Invitation Request frame
- add optional configuration file for the P2P\_DEVICE parameters
- optimize scan for GO during persistent group invocation
- fix possible segmentation fault when PBC overlap is detected while
using a separate P2P group interface
- improve GO Negotiation robustness by allowing GO Negotiation
Confirmation to be retransmitted
- do use freed memory on device found event when P2P NFC
\* added phase1 network parameter options for disabling TLS v1.1 and v1.2
to allow workarounds with misbehaving AAA servers
(tls\_disable\_tlsv1\_1=1 and tls\_disable\_tlsv1\_2=1)
\* added support for OCSP stapling to validate AAA server certificate
during TLS exchange
\* Interworking/Hotspot 2.0 enhancements
- prefer the last added network in Interworking connection to make the
behavior more consistent with likely user expectation
- roaming partner configuration (roaming\_partner within a cred block)
- support Hotspot 2.0 Release 2
\* "hs20\_anqp\_get  8" to request OSU Providers list
\* "hs20\_icon\_request  " to request icon files
\* "fetch\_osu" and "cancel\_osu\_fetch" to start/stop full OSU provider
search (all suitable APs in scan results)
\* OSEN network for online signup connection
\* min\_{dl,ul}\_bandwidth\_{home,roaming} cred parameters
\* max\_bss\_load cred parameter
\* req\_conn\_capab cred parameter
\* sp\_priority cred parameter
\* ocsp cred parameter
\* slow down automatic connection attempts on EAP failure to meet
required behavior (no more than 10 retries within a 10-minute
interval)
\* sample implementation of online signup client (both SPP and
OMA-DM protocols) (hs20/client/\*)
- fixed GAS indication for additional comeback delay with status
code 95
- extend ANQP\_GET to accept Hotspot 2.0 subtypes
ANQP\_GET  [,]...
[,hs20:][...,hs20:]
- add control interface events CRED-ADDED ,
CRED-MODIFIED  , CRED-REMOVED
- add "GET\_CRED  " command
- enable FT for the connection automatically if the AP advertises
support for this
- fix a case where auto\_interworking=1 could end up stopping scanning
\* fixed TDLS interoperability issues with supported operating class in
some deployed stations
\* internal TLS implementation enhancements/fixes
- add SHA256-based cipher suites
- add DHE-RSA cipher suites
- fix X.509 validation of PKCS#1 signature to check for extra data
\* fixed PTK derivation for CCMP-256 and GCMP-256
\* added "reattach" command for fast reassociate-back-to-same-BSS
\* allow PMF to be enabled for AP mode operation with the ieee80211w
parameter
\* added "get\_capability tdls" command
\* added option to set config blobs through control interface with
"SET blob  "
\* D-Bus interface extensions/fixes
- make p2p\_no\_group\_iface configurable
- declare ServiceDiscoveryRequest method properly
- export peer's device address as a property
- make reassociate command behave like the control interface one,
i.e., to allow connection from disconnected state
\* added optional "freq=" parameter to SET pno
\* added optional "freq=" parameter to SELECT\_NETWORK
\* fixed OBSS scan result processing for 20/40 MHz co-ex report
\* remove WPS 1.0 only support, i.e., WSC 2.0 support is now enabled
whenever CONFIG\_WPS=y is set
\* fixed regression in parsing of WNM Sleep Mode exit key data
\* fixed potential segmentation fault and memory leaks in WNM neighbor
report processing
\* EAP-pwd fixes
- fragmentation of PWD-Confirm-Resp
- fix memory leak when fragmentation is used
- fix possible segmentation fault on EAP method deinit if an invalid
group is negotiated
\* added MACsec/IEEE Std 802.1X-2010 PAE implementation (currently
available only with the macsec\_qca driver wrapper)
\* fixed EAP-SIM counter-too-small message
\* added 'dup\_network   ' command; this can be used to
clone the psk field without having toextract it from wpa\_supplicant
\* fixed GSM authentication on USIM
\* added support for using epoll in eloop (CONFIG\_ELOOP\_EPOLL=y)
\* fixed some concurrent virtual interface cases with dedicated P2P
management interface to not catch events from removed interface (this
could result in the management interface getting disabled)
\* fixed a memory leak in SAE random number generation
\* fixed off-by-one bounds checking in printf\_encode()
- this could result in some control interface ATTACH command cases
terminating wpa\_supplicant
\* fixed EAPOL-Key exchange when GCMP is used with SHA256-based AKM
\* various bug fixes
2014-02-04 - v2.1
\* added support for simultaneous authentication of equals (SAE) for
stronger password-based authentication with WPA2-Personal
\* improved P2P negotiation and group formation robustness
- avoid unnecessary Dialog Token value changes during retries
- avoid more concurrent scanning cases during full group formation
sequence
- do not use potentially obsolete scan result data from driver
cache for peer discovery/updates
- avoid undesired re-starting of GO negotiation based on Probe
Request frames
- increase GO Negotiation and Invitation timeouts to address busy
environments and peers that take long time to react to messages,
e.g., due to power saving
- P2P Device interface type
\* improved P2P channel selection (use more peer information and allow
more local options)
\* added support for optional per-device PSK assignment by P2P GO
(wpa\_cli p2p\_set per\_sta\_psk <0/1>)
\* added P2P\_REMOVE\_CLIENT for removing a client from P2P groups
(including persistent groups); this can be used to securely remove
a client from a group if per-device PSKs are used
\* added more configuration flexibility for allowed P2P GO/client
channels (p2p\_no\_go\_freq list and p2p\_add\_cli\_chan=0/1)
\* added nl80211 functionality
- VHT configuration for nl80211
- MFP (IEEE 802.11w) information for nl80211 command API
- support split wiphy dump
- FT (IEEE 802.11r) with driver-based SME
- use advertised number of supported concurrent channels
- QoS Mapping configuration
\* improved TDLS negotiation robustness
\* added more TDLS peer parameters to be configured to the driver
\* optimized connection time by allowing recently received scan results
to be used instead of having to run through a new scan
\* fixed ctrl\_iface BSS command iteration with RANGE argument and no
exact matches; also fixed argument parsing for some cases with
multiple arguments
\* added 'SCAN TYPE=ONLY' ctrl\_iface command to request manual scan
without executing roaming/network re-selection on scan results
\* added Session-Id derivation for EAP peer methods
\* added fully automated regression testing with mac80211\_hwsim
\* changed configuration parser to reject invalid integer values
\* allow AP/Enrollee to be specified with BSSID instead of UUID for
WPS ER operations
\* disable network block temporarily on repeated connection failures
\* changed the default driver interface from wext to nl80211 if both are
included in the build
\* remove duplicate networks if WPS provisioning is run multiple times
\* remove duplicate networks when Interworking network selection uses the
same network
\* added global freq\_list configuration to allow scan frequencies to be
limited for all cases instead of just for a specific network block
\* added support for BSS Transition Management
\* added option to use "IFNAME= " prefix to use the global
control interface connection to perform per-interface commands;
similarly, allow global control interface to be used as a monitor
interface to receive events from all interfaces
\* fixed OKC-based PMKSA cache entry clearing
\* fixed TKIP group key configuration with FT
\* added support for using OCSP stapling to validate server certificate
(ocsp=1 as optional and ocsp=2 as mandatory)
\* added EAP-EKE peer
\* added peer restart detection for IBSS RSN
\* added domain\_suffix\_match (and domain\_suffix\_match2 for Phase 2
EAP-TLS) to specify additional constraint for the server certificate
domain name
\* added support for external SIM/USIM processing in EAP-SIM, EAP-AKA,
and EAP-AKA' (CTRL-REQ-SIM and CTRL-RSP-SIM commands over control
interface)
\* added global bgscan configuration option as a default for all network
blocks that do not specify their own bgscan parameters
\* added D-Bus methods for TDLS
\* added more control to scan requests
- "SCAN freq=" can be used to specify which channels are
scanned (comma-separated frequency ranges in MHz)
- "SCAN passive=1" can be used to request a passive scan (no Probe
Request frames are sent)
- "SCAN use\_id" can be used to request a scan id to be returned and
included in event messages related to this specific scan operation
- "SCAN only\_new=1" can be used to request the driver/cfg80211 to
report only BSS entries that have been updated during this scan
round
- these optional arguments to the SCAN command can be combined with
each other
\* modified behavior on externally triggered scans
- avoid concurrent operations requiring full control of the radio when
an externally triggered scan is detected
- do not use results for internal roaming decision
\* added a new cred block parameter 'temporary' to allow credential
blocks to be stored separately even if wpa\_supplicant configuration
file is used to maintain other network information
\* added "radio work" framework to schedule exclusive radio operations
for off-channel functionality
- reduce issues with concurrent operations that try to control which
channel is used
- allow external programs to request exclusive radio control in a way
that avoids conflicts with wpa\_supplicant
\* added support for using Protected Dual of Public Action frames for
GAS/ANQP exchanges when associated with PMF
\* added support for WPS+NFC updates and P2P+NFC
- improved protocol for WPS
- P2P group formation/join based on NFC connection handover
- new IPv4 address assignment for P2P groups (ip\_addr\_\* configuration
parameters on the GO) to replace DHCP
- option to fetch and report alternative carrier records for external
NFC operations
\* various bug fixes
2013-01-12 - v2.0
\* removed Qt3-based wpa\_gui (obsoleted by wpa\_qui-qt4)
\* removed unmaintained driver wrappers broadcom, iphone, osx, ralink,
hostap, madwifi (hostap and madwifi remain available for hostapd;
their wpa\_supplicant functionality is obsoleted by wext)
\* improved debug logging (human readable event names, interface name
included in more entries)
\* changed AP mode behavior to enable WPS only for open and
WPA/WPA2-Personal configuration
\* improved P2P concurrency operations
- better coordination of concurrent scan and P2P search operations
- avoid concurrent remain-on-channel operation requests by canceling
previous operations prior to starting a new one
- reject operations that would require multi-channel concurrency if
the driver does not support it
- add parameter to select whether STA or P2P connection is preferred
if the driver cannot support both at the same time
- allow driver to indicate channel changes
- added optional delay= parameter for
p2p\_find to avoid taking all radio resources
- use 500 ms p2p\_find search delay by default during concurrent
operations
- allow all channels in GO Negotiation if the driver supports
multi-channel concurrency
\* added number of small changes to make it easier for static analyzers
to understand the implementation
\* fixed number of small bugs (see git logs for more details)
\* nl80211: number of updates to use new cfg80211/nl80211 functionality
- replace monitor interface with nl80211 commands for AP mode
- additional information for driver-based AP SME
- STA entry authorization in RSN IBSS
\* EAP-pwd:
- fixed KDF for group 21 and zero-padding
- added support for fragmentation
- increased maximum number of hunting-and-pecking iterations
\* avoid excessive Probe Response retries for broadcast Probe Request
frames (only with drivers using wpa\_supplicant AP mode SME/MLME)
\* added "GET country" ctrl\_iface command
\* do not save an invalid network block in wpa\_supplicant.conf to avoid
problems reading the file on next start
\* send STA connected/disconnected ctrl\_iface events to both the P2P
group and parent interfaces
\* added preliminary support for using TLS v1.2 (CONFIG\_TLSV12=y)
\* added "SET pno <1/0>" ctrl\_iface command to start/stop preferred
network offload with sched\_scan driver command
\* merged in number of changes from Android repository for P2P, nl80211,
and build parameters
\* changed P2P GO mode configuration to use driver capabilities to
automatically enable HT operations when supported
\* added "wpa\_cli status wps" command to fetch WPA2-Personal passhrase
for WPS use cases in AP mode
\* EAP-AKA: keep pseudonym identity across EAP exchanges to match EAP-SIM
behavior
\* improved reassociation behavior in cases where association is rejected
or when an AP disconnects us to handle common load balancing
mechanisms
- try to avoid extra scans when the needed information is available
\* added optional "join" argument for p2p\_prov\_disc ctrl\_iface command
\* added group ifname to P2P-PROV-DISC-\* events
\* added P2P Device Address to AP-STA-DISCONNECTED event and use
p2p\_dev\_addr parameter name with AP-STA-CONNECTED
\* added workarounds for WPS PBC overlap detection for some P2P use cases
where deployed stations work incorrectly
\* optimize WPS connection speed by disconnecting prior to WPS scan and
by using single channel scans when AP channel is known
\* PCSC and SIM/USIM improvements:
- accept 0x67 (Wrong length) as a response to READ RECORD to fix
issues with some USIM cards
- try to read MNC length from SIM/USIM
- build realm according to 3GPP TS 23.003 with identity from the SIM
- allow T1 protocol to be enabled
\* added more WPS and P2P information available through D-Bus
\* improve P2P negotiation robustness
- extra waits to get ACK frames through
- longer timeouts for cases where deployed devices have been
identified have issues meeting the specification requirements
- more retries for some P2P frames
- handle race conditions in GO Negotiation start by both devices
- ignore unexpected GO Negotiation Response frame
\* added support for libnl 3.2 and newer
\* added P2P persistent group info to P2P\_PEER data
\* maintain a list of P2P Clients for persistent group on GO
\* AP: increased initial group key handshake retransmit timeout to 500 ms
\* added optional dev\_id parameter for p2p\_find
\* added P2P-FIND-STOPPED ctrl\_iface event
\* fixed issues in WPA/RSN element validation when roaming with ap\_scan=1
and driver-based BSS selection
\* do not expire P2P peer entries while connected with the peer in a
group
\* fixed WSC element inclusion in cases where P2P is disabled
\* AP: added a WPS workaround for mixed mode AP Settings with Windows 7
\* EAP-SIM: fixed AT\_COUNTER\_TOO\_SMALL use
\* EAP-SIM/AKA: append realm to pseudonym identity
\* EAP-SIM/AKA: store pseudonym identity in network configuration to
allow it to persist over multiple EAP sessions and wpa\_supplicant
restarts
\* EAP-AKA': updated to RFC 5448 (username prefixes changed); note: this
breaks interoperability with older versions
\* added support for WFA Hotspot 2.0
- GAS/ANQP to fetch network information
- credential configuration and automatic network selections based on
credential match with ANQP information
\* limited PMKSA cache entries to be used only with the network context
that was used to create them
\* improved PMKSA cache expiration to avoid unnecessary disconnections
\* adjusted bgscan\_simple fast-scan backoff to avoid too frequent
background scans
\* removed ctrl\_iface event on P2P PD Response in join-group case
\* added option to fetch BSS table entry based on P2P Device Address
("BSS p2p\_dev\_addr=")
\* added BSS entry age to ctrl\_iface BSS command output
\* added optional MASK=0xH option for ctrl\_iface BSS command to select
which fields are included in the response
\* added optional RANGE=ALL|N1-N2 option for ctrl\_iface BSS command to
fetch information about several BSSes in one call
\* simplified licensing terms by selecting the BSD license as the only
alternative
\* added "P2P\_SET disallow\_freq " ctrl\_iface command to
disable channels from P2P use
\* added p2p\_pref\_chan configuration parameter to allow preferred P2P
channels to be specified
\* added support for advertising immediate availability of a WPS
credential for P2P use cases
\* optimized scan operations for P2P use cases (use single channel scan
for a specific SSID when possible)
\* EAP-TTLS: fixed peer challenge generation for MSCHAPv2
\* SME: do not use reassociation after explicit disconnection request
(local or a notification from an AP)
\* added support for sending debug info to Linux tracing (-T on command
line)
\* added support for using Deauthentication reason code 3 as an
indication of P2P group termination
\* added wps\_vendor\_ext\_m1 configuration parameter to allow vendor
specific attributes to be added to WPS M1
\* started using separate TLS library context for tunneled TLS
(EAP-PEAP/TLS, EAP-TTLS/TLS, EAP-FAST/TLS) to support different CA
certificate configuration between Phase 1 and Phase 2
\* added optional "auto" parameter for p2p\_connect to request automatic
GO Negotiation vs. join-a-group selection
\* added disabled\_scan\_offload parameter to disable automatic scan
offloading (sched\_scan)
\* added optional persistent= parameter for p2p\_connect to
allow forcing of a specific SSID/passphrase for GO Negotiation
\* added support for OBSS scan requests and 20/40 BSS coexistence reports
\* reject PD Request for unknown group
\* removed scripts and notes related to Windows binary releases (which
have not been used starting from 1.x)
\* added initial support for WNM operations
- Keep-alive based on BSS max idle period
- WNM-Sleep Mode
- minimal BSS Transition Management processing
\* added autoscan module to control scanning behavior while not connected
- autoscan\_periodic and autoscan\_exponential modules
\* added new WPS NFC ctrl\_iface mechanism
- added initial support NFC connection handover
- removed obsoleted WPS\_OOB command (including support for deprecated
UFD config\_method)
\* added optional framework for external password storage ("ext:")
\* wpa\_cli: added optional support for controlling wpa\_supplicant
remotely over UDP (CONFIG\_CTRL\_IFACE=udp-remote) for testing purposes
\* wpa\_cli: extended tab completion to more commands
\* changed SSID output to use printf-escaped strings instead of masking
of non-ASCII characters
- SSID can now be configured in the same format: ssid=P"abc\x00test"
\* removed default ACM=1 from AC\_VO and AC\_VI
\* added optional "ht40" argument for P2P ctrl\_iface commands to allow
40 MHz channels to be requested on the 5 GHz band
\* added optional parameters for p2p\_invite command to specify channel
when reinvoking a persistent group as the GO
\* improved FIPS mode builds with OpenSSL
- "make fips" with CONFIG\_FIPS=y to build wpa\_supplicant with the
OpenSSL FIPS object module
- replace low level OpenSSL AES API calls to use EVP
- use OpenSSL keying material exporter when possible
- do not export TLS keys in FIPS mode
- remove MD5 from CONFIG\_FIPS=y builds
- use OpenSSL function for PKBDF2 passphrase-to-PSK
- use OpenSSL HMAC implementation
- mix RAND\_bytes() output into random\_get\_bytes() to force OpenSSL
DRBG to be used in FIPS mode
- use OpenSSL CMAC implementation
\* added mechanism to disable TLS Session Ticket extension
- a workaround for servers that do not support TLS extensions that
was enabled by default in recent OpenSSL versions
- tls\_disable\_session\_ticket=1
- automatically disable TLS Session Ticket extension by default when
using EAP-TLS/PEAP/TTLS (i.e., only use it with EAP-FAST)
\* changed VENDOR-TEST EAP method to use proper private enterprise number
(this will not interoperate with older versions)
\* disable network block temporarily on authentication failures
\* improved WPS AP selection during WPS PIN iteration
\* added support for configuring GCMP cipher for IEEE 802.11ad
\* added support for Wi-Fi Display extensions
- WFD\_SUBELEMENT\_SET ctrl\_iface command to configure WFD subelements
- SET wifi\_display <0/1> to disable/enable WFD support
- WFD service discovery
- an external program is needed to manage the audio/video streaming
and codecs
\* optimized scan result use for network selection
- use the internal BSS table instead of raw scan results
- allow unnecessary scans to be skipped if fresh information is
available (e.g., after GAS/ANQP round for Interworking)
\* added support for 256-bit AES with internal TLS implementation
\* allow peer to propose channel in P2P invitation process for a
persistent group
\* added disallow\_aps parameter to allow BSSIDs/SSIDs to be disallowed
from network selection
\* re-enable the networks disabled during WPS operations
\* allow P2P functionality to be disabled per interface (p2p\_disabled=1)
\* added secondary device types into P2P\_PEER output
\* added an option to disable use of a separate P2P group interface
(p2p\_no\_group\_iface=1)
\* fixed P2P Bonjour SD to match entries with both compressed and not
compressed domain name format and support multiple Bonjour PTR matches
for the same key
\* use deauthentication instead of disassociation for all disconnection
operations; this removes the now unused disassociate() wpa\_driver\_ops
callback
\* optimized PSK generation on P2P GO by caching results to avoid
multiple PBKDF2 operations
\* added okc=1 global configuration parameter to allow OKC to be enabled
by default for all network blocks
\* added a workaround for WPS PBC session overlap detection to avoid
interop issues with deployed station implementations that do not
remove active PBC indication from Probe Request frames properly
\* added basic support for 60 GHz band
\* extend EAPOL frames processing workaround for roaming cases
(postpone processing of unexpected EAPOL frame until association
event to handle reordered events)
2012-05-10 - v1.0
\* bsd: Add support for setting HT values in IFM\_MMASK.
\* Delay STA entry removal until Deauth/Disassoc TX status in AP mode.
This allows the driver to use PS buffering of Deauthentication and
Disassociation frames when the STA is in power save sleep. Only
available with drivers that provide TX status events for Deauth/
Disassoc frames (nl80211).
\* Drop oldest unknown BSS table entries first. This makes it less
likely to hit connection issues in environments with huge number
of visible APs.
\* Add systemd support.
\* Add support for setting the syslog facility from the config file
at build time.
\* atheros: Add support for IEEE 802.11w configuration.
\* AP mode: Allow enable HT20 if driver supports it, by setting the
config parameter ieee80211n.
\* Allow AP mode to disconnect STAs based on low ACK condition (when
the data connection is not working properly, e.g., due to the STA
going outside the range of the AP). Disabled by default, enable by
config option disassoc\_low\_ack.
\* nl80211:
- Support GTK rekey offload.
- Support PMKSA candidate events. This adds support for RSN
pre-authentication with nl80211 interface and drivers that handle
roaming internally.
\* dbus:
- Add a DBus signal for EAP SM requests, emitted on the Interface
object.
- Export max scan ssids supported by the driver as MaxScanSSID.
- Add signal Certification for information about server certification.
- Add BSSExpireAge and BSSExpireCount interface properties and
support set/get, which allows for setting BSS cache expiration age
and expiration scan count.
- Add ConfigFile to AddInterface properties.
- Add Interface.Country property and support to get/set the value.
- Add DBus property CurrentAuthMode.
- P2P DBus API added.
- Emit property changed events (for property BSSs) when adding/
removing BSSs.
- Treat '' in SSIDs of Interface.Scan as a request for broadcast
scan, instead of ignoring it.
- Add DBus getter/setter for FastReauth.
- Raise PropertiesChanged on org.freedesktop.DBus.Properties.
\* wpa\_cli:
- Send AP-STA-DISCONNECTED event when an AP disconnects a station
due to inactivity.
- Make second argument to set command optional. This can be used to
indicate a zero length value.
- Add signal\_poll command.
- Add bss\_expire\_age and bss\_expire\_count commands to set/get BSS
cache expiration age and expiration scan count.
- Add ability to set scan interval (the time in seconds wpa\_s waits
before requesting a new scan after failing to find a suitable
network in scan results) using scan\_interval command.
- Add event CTRL-EVENT-ASSOC-REJECT for association rejected.
- Add command get version, that returns wpa\_supplicant version string.
- Add command sta\_autoconnect for disabling automatic reconnection
on receiving disconnection event.
- Setting bssid parameter to an empty string "" or any can now be
used to clear the bssid\_set flag in a network block, i.e., to remove
bssid filtering.
- Add tdls\_testing command to add a special testing feature for
changing TDLS behavior. Build param CONFIG\_TDLS\_TESTING must be
enabled as well.
- For interworking, add wpa\_cli commands interworking\_select,
interworking\_connect, anqp\_get, fetch\_anqp, and stop\_fetch\_anqp.
- Many P2P commands were added. See README-P2P.
- Many WPS/WPS ER commands - see WPS/WPS ER sections for details.
- Allow set command to change global config parameters.
- Add log\_level command, which can be used to display the current
debugging level and to change the log level during run time.
- Add note command, which can be used to insert notes to the debug
log.
- Add internal line edit implementation. CONFIG\_WPA\_CLI\_EDIT=y
can now be used to build wpa\_cli with internal implementation of
line editing and history support. This can be used as a replacement
for CONFIG\_READLINE=y.
\* AP mode: Add max\_num\_sta config option, which can be used to limit
the number of stations allowed to connect to the AP.
\* Add WPA\_IGNORE\_CONFIG\_ERRORS build option to continue in case of bad
config file.
\* wext: Increase scan timeout from 5 to 10 seconds.
\* Add blacklist command, allowing an external program to
manage the BSS blacklist and display its current contents.
\* WPS:
- Add wpa\_cli wps\_pin get command for generating random PINs. This can
be used in a UI to generate a PIN without starting WPS (or P2P)
operation.
- Set RF bands based on driver capabilities, instead of hardcoding
them.
- Add mechanism for indicating non-standard WPS errors.
- Add CONFIG\_WPS\_REG\_DISABLE\_OPEN=y option to disable open networks
by default.
- Add wps\_ap\_pin cli command for wpa\_supplicant AP mode.
- Add wps\_check\_pin cli command for processing PIN from user input.
UIs can use this command to process a PIN entered by a user and to
validate the checksum digit (if present).
- Cancel WPS operation on PBC session overlap detection.
- New wps\_cancel command in wpa\_cli will cancel a pending WPS
operation.
- wpa\_cli action: Add WPS\_EVENT\_SUCCESS and WPS\_EVENT\_FAIL handlers.
- Trigger WPS config update on Manufacturer, Model Name, Model
Number, and Serial Number changes.
- Fragment size is now configurable for EAP-WSC peer. Use
wpa\_cli set wps\_fragment\_size .
- Disable AP PIN after 10 consecutive failures. Slow down attacks on
failures up to 10.
- Allow AP to start in Enrollee mode without AP PIN for probing, to
be compatible with Windows 7.
- Add Config Error into WPS-FAIL events to provide more info to the
user on how to resolve the issue.
- Label and Display config methods are not allowed to be enabled
at the same time, since it is unclear which PIN to use if both
methods are advertised.
- When controlling multiple interfaces:
- apply WPS commands to all interfaces configured to use WPS
- apply WPS config changes to all interfaces that use WPS
- when an attack is detected on any interface, disable AP PIN on
all interfaces
\* WPS ER:
- Add special AP Setup Locked mode to allow read only ER.
ap\_setup\_locked=2 can now be used to enable a special mode where
WPS ER can learn the current AP settings, but cannot change them.
- Show SetSelectedRegistrar events as ctrl\_iface events
- Add wps\_er\_set\_config to enroll a network based on a local
network configuration block instead of having to (re-)learn the
current AP settings with wps\_er\_learn.
- Allow AP filtering based on IP address, add ctrl\_iface event for
learned AP settings, add wps\_er\_config command to configure an AP.
\* WPS 2.0: Add support for WPS 2.0 (CONFIG\_WPS2)
- Add build option CONFIG\_WPS\_EXTENSIBILITY\_TESTING to enable tool
for testing protocol extensibility.
- Add build option CONFIG\_WPS\_STRICT to allow disabling of WPS
workarounds.
- Add support for AuthorizedMACs attribute.
\* TDLS:
- Propagate TDLS related nl80211 capability flags from kernel and
add them as driver capability flags. If the driver doesn't support
capabilities, assume TDLS is supported internally. When TDLS is
explicitly not supported, disable all user facing TDLS operations.
- Allow TDLS to be disabled at runtime (mostly for testing).
Use set tdls\_disabled.
- Honor AP TDLS settings that prohibit/allow TDLS.
- Add a special testing feature for changing TDLS behavior. Use
CONFIG\_TDLS\_TESTING build param to enable. Configure at runtime
with tdls\_testing cli command.
- Add support for TDLS 802.11z.
\* wlantest: Add a tool wlantest for IEEE802.11 protocol testing.
wlantest can be used to capture frames from a monitor interface
for realtime capturing or from pcap files for offline analysis.
\* Interworking: Support added for 802.11u. Enable in .config with
CONFIG\_INTERWORKING. See wpa\_supplicant.conf for config parameters
for interworking. wpa\_cli commands added to support this are
interworking\_select, interworking\_connect, anqp\_get, fetch\_anqp,
and stop\_fetch\_anqp.
\* Android: Add build and runtime support for Android wpa\_supplicant.
\* bgscan learn: Add new bgscan that learns BSS information based on
previous scans, and uses that information to dynamically generate
the list of channels for background scans.
\* Add a new debug message level for excessive information. Use
-ddd to enable.
\* TLS: Add support for tls\_disable\_time\_checks=1 in client mode.
\* Internal TLS:
- Add support for TLS v1.1 (RFC 4346). Enable with build parameter
CONFIG\_TLSV11.
- Add domainComponent parser for X.509 names.
\* Linux: Add RFKill support by adding an interface state "disabled".
\* Reorder some IEs to get closer to IEEE 802.11 standard. Move
WMM into end of Beacon, Probe Resp and (Re)Assoc Resp frames.
Move HT IEs to be later in (Re)Assoc Resp.
\* Solaris: Add support for wired 802.1X client.
\* Wi-Fi Direct support. See README-P2P for more information.
\* Many bugfixes.
2010-04-18 - v0.7.2
\* nl80211: fixed number of issues with roaming
\* avoid unnecessary roaming if multiple APs with similar signal
strength are present in scan results
\* add TLS client events and server probing to ease design of
automatic detection of EAP parameters
\* add option for server certificate matching (SHA256 hash of the
certificate) instead of trusted CA certificate configuration
\* bsd: Cleaned up driver wrapper and added various low-level
configuration options
\* wpa\_gui-qt4: do not show too frequent WPS AP available events as
tray messages
\* TNC: fixed issues with fragmentation
\* EAP-TNC: add Flags field into fragment acknowledgement (needed to
interoperate with other implementations; may potentially breaks
compatibility with older wpa\_supplicant/hostapd versions)
\* wpa\_cli: added option for using a separate process to receive event
messages to reduce latency in showing these
(CFLAGS += -DCONFIG\_WPA\_CLI\_FORK=y in .config to enable this)
\* maximum BSS table size can now be configured (bss\_max\_count)
\* BSSes to be included in the BSS table can be filtered based on
configured SSIDs to save memory (filter\_ssids)
\* fix number of issues with IEEE 802.11r/FT; this version is not
backwards compatible with old versions
\* nl80211: add support for IEEE 802.11r/FT protocol (both over-the-air
and over-the-DS)
\* add freq\_list network configuration parameter to allow the AP
selection to filter out entries based on the operating channel
\* add signal strength change events for bgscan; this allows more
dynamic changes to background scanning interval based on changes in
the signal strength with the current AP; this improves roaming within
ESS quite a bit, e.g., with bgscan="simple:30:-45:300" in the network
configuration block to request background scans less frequently when
signal strength remains good and to automatically trigger background
scans whenever signal strength drops noticeably
(this is currently only available with nl80211)
\* add BSSID and reason code (if available) to disconnect event messages
\* wpa\_gui-qt4: more complete support for translating the GUI with
linguist and add German translation
\* fix DH padding with internal crypto code (mainly, for WPS)
\* do not trigger initial scan automatically anymore if there are no
enabled networks
2010-01-16 - v0.7.1
\* cleaned up driver wrapper API (struct wpa\_driver\_ops); the new API
is not fully backwards compatible, so out-of-tree driver wrappers
will need modifications
\* cleaned up various module interfaces
\* merge hostapd and wpa\_supplicant developers' documentation into a
single document
\* nl80211: use explicit deauthentication to clear cfg80211 state to
avoid issues when roaming between APs
\* dbus: major design changes in the new D-Bus API
(fi.w1.wpa\_supplicant1)
\* nl80211: added support for IBSS networks
\* added internal debugging mechanism with backtrace support and memory
allocation/freeing validation, etc. tests (CONFIG\_WPA\_TRACE=y)
\* added WPS ER unsubscription command to more cleanly unregister from
receiving UPnP events when ER is terminated
\* cleaned up AP mode operations to avoid need for virtual driver\_ops
wrapper
\* added BSS table to maintain more complete scan result information
over multiple scans (that may include only partial results)
\* wpa\_gui-qt4: update Peers dialog information more dynamically while
the dialog is kept open
\* fixed PKCS#12 use with OpenSSL 1.0.0
\* driver\_wext: Added cfg80211-specific optimization to avoid some
unnecessary scans and to speed up association
2009-11-21 - v0.7.0
\* increased wpa\_cli ping interval to 5 seconds and made this
configurable with a new command line options (-G)
\* fixed scan buffer processing with WEXT to handle up to 65535
byte result buffer (previously, limited to 32768 bytes)
\* allow multiple driver wrappers to be specified on command line
(e.g., -Dnl80211,wext); the first one that is able to initialize the
interface will be used
\* added support for multiple SSIDs per scan request to optimize
scan\_ssid=1 operations in ap\_scan=1 mode (i.e., search for hidden
SSIDs); this requires driver support and can currently be used only
with nl80211
\* added support for WPS USBA out-of-band mechanism with USB Flash
Drives (UFD) (CONFIG\_WPS\_UFD=y)
\* driver\_ndis: add PAE group address to the multicast address list to
fix wired IEEE 802.1X authentication
\* fixed IEEE 802.11r key derivation function to match with the standard
(note: this breaks interoperability with previous version) [Bug 303]
\* added better support for drivers that allow separate authentication
and association commands (e.g., mac80211-based Linux drivers with
nl80211; SME in wpa\_supplicant); this allows over-the-air FT protocol
to be used (IEEE 802.11r)
\* fixed SHA-256 based key derivation function to match with the
standard when using CCMP (for IEEE 802.11r and IEEE 802.11w)
(note: this breaks interoperability with previous version) [Bug 307]
\* use shared driver wrapper files with hostapd
\* added AP mode functionality (CONFIG\_AP=y) with mode=2 in the network
block; this can be used for open and WPA2-Personal networks
(optionally, with WPS); this links in parts of hostapd functionality
into wpa\_supplicant
\* wpa\_gui-qt4: added new Peers dialog to show information about peers
(other devices, including APs and stations, etc. in the neighborhood)
\* added support for WPS External Registrar functionality (configure APs
and enroll new devices); can be used with wpa\_gui-qt4 Peers dialog
and wpa\_cli commands wps\_er\_start, wps\_er\_stop, wps\_er\_pin,
wps\_er\_pbc, wps\_er\_learn
(this can also be used with a new 'none' driver wrapper if no
wireless device or IEEE 802.1X on wired is needed)
\* driver\_nl80211: multiple updates to provide support for new Linux
nl80211/mac80211 functionality
\* updated management frame protection to use IEEE Std 802.11w-2009
\* fixed number of small WPS issues and added workarounds to
interoperate with common deployed broken implementations
\* added support for NFC out-of-band mechanism with WPS
\* driver\_ndis: fixed wired IEEE 802.1X authentication with PAE group
address frames
\* added preliminary support for IEEE 802.11r RIC processing
\* added support for specifying subset of enabled frequencies to scan
(scan\_freq option in the network configuration block); this can speed
up scanning process considerably if it is known that only a small
subset of channels is actually used in the network (this is currently
supported only with -Dnl80211)
\* added a workaround for race condition between receiving the
association event and the following EAPOL-Key
\* added background scan and roaming infrastructure to allow
network-specific optimizations to be used to improve roaming within
an ESS (same SSID)
\* added new DBus interface (fi.w1.wpa\_supplicant1)
2009-01-06 - v0.6.7
\* added support for Wi-Fi Protected Setup (WPS)
(wpa\_supplicant can now be configured to act as a WPS Enrollee to
enroll credentials for a network using PIN and PBC methods; in
addition, wpa\_supplicant can act as a wireless WPS Registrar to
configure an AP); WPS support can be enabled by adding CONFIG\_WPS=y
into .config and setting the runtime configuration variables in
wpa\_supplicant.conf (see WPS section in the example configuration
file); new wpa\_cli commands wps\_pin, wps\_pbc, and wps\_reg are used to
manage WPS negotiation; see README-WPS for more details
\* added support for EAP-AKA' (draft-arkko-eap-aka-kdf)
\* added support for using driver\_test over UDP socket
\* fixed PEAPv0 Cryptobinding interoperability issue with Windows Server
2008 NPS; optional cryptobinding is now enabled (again) by default
\* fixed PSK editing in wpa\_gui
\* changed EAP-GPSK to use the IANA assigned EAP method type 51
\* added a Windows installer that includes WinPcap and all the needed
DLLs; in addition, it set up the registry automatically so that user
will only need start wpa\_gui to get prompted to start the wpasvc
servide and add a new interface if needed through wpa\_gui dialog
\* updated management frame protection to use IEEE 802.11w/D7.0
2008-11-23 - v0.6.6
\* added Milenage SIM/USIM emulator for EAP-SIM/EAP-AKA
(can be used to simulate test SIM/USIM card with a known private key;
enable with CONFIG\_SIM\_SIMULATOR=y/CONFIG\_USIM\_SIMULATOR=y in .config
and password="Ki:OPc"/password="Ki:OPc:SQN" in network configuration)
\* added a new network configuration option, wpa\_ptk\_rekey, that can be
used to enforce frequent PTK rekeying, e.g., to mitigate some attacks
against TKIP deficiencies
\* added an optional mitigation mechanism for certain attacks against
TKIP by delaying Michael MIC error reports by a random amount of time
between 0 and 60 seconds; this can be enabled with a build option
CONFIG\_DELAYED\_MIC\_ERROR\_REPORT=y in .config
\* fixed EAP-AKA to use RES Length field in AT\_RES as length in bits,
not bytes
\* updated OpenSSL code for EAP-FAST to use an updated version of the
session ticket overriding API that was included into the upstream
OpenSSL 0.9.9 tree on 2008-11-15 (no additional OpenSSL patch is
needed with that version anymore)
\* updated userspace MLME instructions to match with the current Linux
mac80211 implementation; please also note that this can only be used
with driver\_nl80211.c (the old code from driver\_wext.c was removed)
\* added support (Linux only) for RoboSwitch chipsets (often found in
consumer grade routers); driver interface 'roboswitch'
\* fixed canceling of PMKSA caching when using drivers that generate
RSN IE and refuse to drop PMKIDs that wpa\_supplicant does not know
about
2008-11-01 - v0.6.5
\* added support for SHA-256 as X.509 certificate digest when using the
internal X.509/TLSv1 implementation
\* updated management frame protection to use IEEE 802.11w/D6.0
\* added support for using SHA256-based stronger key derivation for WPA2
(IEEE 802.11w)
\* fixed FT (IEEE 802.11r) authentication after a failed association to
use correct FTIE
\* added support for configuring Phase 2 (inner/tunneled) authentication
method with wpa\_gui-qt4
2008-08-10 - v0.6.4
\* added support for EAP Sequences in EAP-FAST Phase 2
\* added support for using TNC with EAP-FAST
\* added driver\_ps3 for the PS3 Linux wireless driver
\* added support for optional cryptobinding with PEAPv0
\* fixed the OpenSSL patches (0.9.8g and 0.9.9) for EAP-FAST to
allow fallback to full handshake if server rejects PAC-Opaque
\* added fragmentation support for EAP-TNC
\* added support for parsing PKCS #8 formatted private keys into the
internal TLS implementation (both PKCS #1 RSA key and PKCS #8
encapsulated RSA key can now be used)
\* added option of using faster, but larger, routines in the internal
LibTomMath (for internal TLS implementation) to speed up DH and RSA
calculations (CONFIG\_INTERNAL\_LIBTOMMATH\_FAST=y)
\* fixed race condition between disassociation event and group key
handshake to avoid getting stuck in incorrect state [Bug 261]
\* fixed opportunistic key caching (proactive\_key\_caching)
2008-02-22 - v0.6.3
\* removed 'nai' and 'eappsk' network configuration variables that were
previously used for configuring user identity and key for EAP-PSK,
EAP-PAX, EAP-SAKE, and EAP-GPSK. 'identity' field is now used as the
replacement for 'nai' (if old configuration used a separate
'identity' value, that would now be configured as
'anonymous\_identity'). 'password' field is now used as the
replacement for 'eappsk' (it can also be set using hexstring to
present random binary data)
\* removed '-w' command line parameter (wait for interface to be added,
if needed); cleaner way of handling this functionality is to use an
external mechanism (e.g., hotplug scripts) that start wpa\_supplicant
when an interface is added
\* updated FT support to use the latest draft, IEEE 802.11r/D9.0
\* added ctrl\_iface monitor event (CTRL-EVENT-SCAN-RESULTS) for
indicating when new scan results become available
\* added new ctrl\_iface command, BSS, to allow scan results to be
fetched without hitting the message size limits (this command
can be used to iterate through the scan results one BSS at the time)
\* fixed EAP-SIM not to include AT\_NONCE\_MT and AT\_SELECTED\_VERSION
attributes in EAP-SIM Start/Response when using fast reauthentication
\* fixed EAPOL not to end up in infinite loop when processing dynamic
WEP keys with IEEE 802.1X
\* fixed problems in getting NDIS events from WMI on Windows 2000
2008-01-01 - v0.6.2
\* added support for Makefile builds to include debug-log-to-a-file
functionality (CONFIG\_DEBUG\_FILE=y and -f on command line)
\* fixed EAP-SIM and EAP-AKA message parser to validate attribute
lengths properly to avoid potential crash caused by invalid messages
\* added data structure for storing allocated buffers (struct wpabuf);
this does not affect wpa\_supplicant usage, but many of the APIs
changed and various interfaces (e.g., EAP) is not compatible with old
versions
\* added support for protecting EAP-AKA/Identity messages with
AT\_CHECKCODE (optional feature in RFC 4187)
\* added support for protected result indication with AT\_RESULT\_IND for
EAP-SIM and EAP-AKA (phase1="result\_ind=1")
\* added driver\_wext workaround for race condition between scanning and
association with drivers that take very long time to scan all
channels (e.g., madwifi with dual-band cards); wpa\_supplicant is now
using a longer hardcoded timeout for the scan if the driver supports
notifications for scan completion (SIOCGIWSCAN event); this helps,
e.g., in cases where wpa\_supplicant and madwifi driver ended up in
loop where the driver did not even try to associate
\* stop EAPOL timer tick when no timers are in use in order to reduce
power consumption (no need to wake up the process once per second)
[Bug 237]
\* added support for privilege separation (run only minimal part of
wpa\_supplicant functionality as root and rest as unprivileged,
non-root process); see 'Privilege separation' in README for details;
this is disabled by default and can be enabled with CONFIG\_PRIVSEP=y
in .config
\* changed scan results data structure to include all information
elements to make it easier to support new IEs; old get\_scan\_result()
driver\_ops is still supported for backwards compatibility (results
are converted internally to the new format), but all drivers should
start using the new get\_scan\_results2() to make them more likely to
work with new features
\* Qt4 version of wpa\_gui (wpa\_gui-qt4 subdirectory) is now native Qt4
application, i.e., it does not require Qt3Support anymore; Windows
binary of wpa\_gui.exe is now from this directory and only requires
QtCore4.dll and QtGui4.dll libraries
\* updated Windows binary build to use Qt 4.3.3 and made Qt DLLs
available as a separate package to make wpa\_gui installation easier:
http://w1.fi/wpa\_supplicant/qt4/wpa\_gui-qt433-windows-dll.zip
\* added support for EAP-IKEv2 (draft-tschofenig-eap-ikev2-15.txt);
only shared key/password authentication is supported in this version
2007-11-24 - v0.6.1
\* added support for configuring password as NtPasswordHash
(16-byte MD4 hash of password) in hash:<32 hex digits> format
\* added support for fallback from abbreviated TLS handshake to
full handshake when using EAP-FAST (e.g., due to an expired
PAC-Opaque)
\* updated EAP Generalized Pre-Shared Key (EAP-GPSK) to use the latest
draft (draft-ietf-emu-eap-gpsk-07.txt)
\* added support for drivers that take care of RSN 4-way handshake
internally (WPA\_DRIVER\_FLAGS\_4WAY\_HANDSHAKE in get\_capa flags and
WPA\_ALG\_PMK in set\_key)
\* added an experimental port for Mac OS X (CONFIG\_DRIVER\_OSX=y in
.config); this version supports only ap\_scan=2 mode and allow the
driver to take care of the 4-way handshake
\* fixed a buffer overflow in parsing TSF from scan results when using
driver\_wext.c with a driver that includes the TSF (e.g., iwl4965)
[Bug 232]
\* updated FT support to use the latest draft, IEEE 802.11r/D8.0
\* fixed an integer overflow issue in the ASN.1 parser used by the
(experimental) internal TLS implementation to avoid a potential
buffer read overflow
\* fixed a race condition with -W option (wait for a control interface
monitor before starting) that could have caused the first messages to
be lost
\* added support for processing TNCC-TNCS-Messages to report
recommendation (allow/none/isolate) when using TNC [Bug 243]
2007-05-28 - v0.6.0
\* added network configuration parameter 'frequency' for setting
initial channel for IBSS (adhoc) networks
\* added experimental IEEE 802.11r/D6.0 support
\* updated EAP-SAKE to RFC 4763 and the IANA-allocated EAP type 48
\* updated EAP-PSK to use the IANA-allocated EAP type 47
\* fixed EAP-PAX key derivation
\* fixed EAP-PSK bit ordering of the Flags field
\* fixed EAP-PEAP/TTLS/FAST to use the correct EAP identifier in
tunnelled identity request (previously, the identifier from the outer
method was used, not the tunnelled identifier which could be
different)
\* added support for fragmentation of outer TLS packets during Phase 2
of EAP-PEAP/TTLS/FAST
\* fixed EAP-TTLS AVP parser processing for too short AVP lengths
\* added support for EAP-FAST authentication with inner methods that
generate MSK (e.g., EAP-MSCHAPv2 that was previously only supported
for PAC provisioning)
\* added support for authenticated EAP-FAST provisioning
\* added support for configuring maximum number of EAP-FAST PACs to
store in a PAC list (fast\_max\_pac\_list\_len= in phase1 string)
\* added support for storing EAP-FAST PACs in binary format
(fast\_pac\_format=binary in phase1 string)
\* fixed dbus ctrl\_iface to validate message interface before
dispatching to avoid a possible segfault [Bug 190]
\* fixed PeerKey key derivation to use the correct PRF label
\* updated Windows binary build to link against OpenSSL 0.9.8d and
added support for EAP-FAST
\* updated EAP Generalized Pre-Shared Key (EAP-GPSK) to use the latest
draft (draft-ietf-emu-eap-gpsk-04.txt)
\* fixed EAP-AKA Notification processing to allow Notification to be
processed after AKA Challenge response has been sent
\* updated to use IEEE 802.11w/D2.0 for management frame protection
(still experimental)
\* fixed EAP-TTLS implementation not to crash on use of freed memory
if TLS library initialization fails
\* added support for EAP-TNC (Trusted Network Connect)
(this version implements the EAP-TNC method and EAP-TTLS changes
needed to run two methods in sequence (IF-T) and the IF-IMC and
IF-TNCCS interfaces from TNCC)
2006-11-24 - v0.5.6
\* added experimental, integrated TLSv1 client implementation with the
needed X.509/ASN.1/RSA/bignum processing (this can be enabled by
setting CONFIG\_TLS=internal and CONFIG\_INTERNAL\_LIBTOMMATH=y in
.config); this can be useful, e.g., if the target system does not
have a suitable TLS library and a minimal code size is required
(total size of this internal TLS/crypto code is bit under 50 kB on
x86 and the crypto code is shared by rest of the supplicant so some
of it was already required; TLSv1/X.509/ASN.1/RSA added about 25 kB)
\* removed STAKey handshake since PeerKey handshake has replaced it in
IEEE 802.11ma and there are no known deployments of STAKey
\* updated EAP Generalized Pre-Shared Key (EAP-GPSK) to use the latest
draft (draft-ietf-emu-eap-gpsk-01.txt)
\* added preliminary implementation of IEEE 802.11w/D1.0 (management
frame protection)
(Note: this requires driver support to work properly.)
(Note2: IEEE 802.11w is an unapproved draft and subject to change.)
\* fixed Windows named pipes ctrl\_iface to not stop listening for
commands if client program opens a named pipe and closes it
immediately without sending a command
\* fixed USIM PIN status determination for the case that PIN is not
needed (this allows EAP-AKA to be used with USIM cards that do not
use PIN)
\* added support for reading 3G USIM AID from EF\_DIR to allow EAP-AKA to
be used with cards that do not support file selection based on
partial AID
\* added support for matching the subjectAltName of the authentication
server certificate against multiple name components (e.g.,
altsubject\_match="DNS:server.example.com;DNS:server2.example.com")
\* fixed EAP-SIM/AKA key derivation for re-authentication case (only
affects IEEE 802.1X with dynamic WEP keys)
\* changed ctrl\_iface network configuration 'get' operations to not
return password/key material; if these fields are requested, "\*"
will be returned if the password/key is set, but the value of the
parameter is not exposed
2006-08-27 - v0.5.5
\* added support for building Windows version with UNICODE defined
(wide-char functions)
\* driver\_ndis: fixed static WEP configuration to avoid race condition
issues with some NDIS drivers between association and setting WEP
keys
\* driver\_ndis: added validation for IELength value in scan results to
avoid crashes when using buggy NDIS drivers [Bug 165]
\* fixed Release|Win32 target in the Visual Studio project files
(previously, only Debug|Win32 target was set properly)
\* changed control interface API call wpa\_ctrl\_pending() to allow it to
return -1 on error (e.g., connection lost); control interface clients
will need to make sure that they verify that the value is indeed >0
when determining whether there are pending messages
\* added an alternative control interface backend for Windows targets:
Named Pipe (CONFIG\_CTRL\_IFACE=named\_pipe); this is now the default
control interface mechanism for Windows builds (previously, UDP to
localhost was used)
\* changed ctrl\_interface configuration for UNIX domain sockets:
- deprecated ctrl\_interface\_group variable (it may be removed in
future versions)
- allow both directory and group be configured with ctrl\_interface
in following format: DIR=/var/run/wpa\_supplicant GROUP=wheel
- ctrl\_interface=/var/run/wpa\_supplicant is still supported for the
case when group is not changed
\* added support for controlling more than one interface per process in
Windows version
\* added a workaround for a case where the AP is using unknown address
(e.g., MAC address of the wired interface) as the source address for
EAPOL-Key frames; previously, that source address was used as the
destination for EAPOL-Key frames and in key derivation; now, BSSID is
used even if the source address does not match with it
(this resolves an interoperability issue with Thomson SpeedTouch 580)
\* added a workaround for UDP-based control interface (which was used in
Windows builds before this release) to prevent packets with forged
addresses from being accepted as local control requests
\* removed ndis\_events.cpp and possibility of using external
ndis\_events.exe; C version (ndis\_events.c) is fully functional and
there is no desire to maintain two separate versions of this
implementation
\* ndis\_events: Changed NDIS event notification design to use WMI to
learn the adapter description through Win32\_PnPEntity class; this
should fix some cases where the adapter name was not recognized
correctly (e.g., with some USB WLAN adapters, e.g., Ralink RT2500
USB) [Bug 113]
\* fixed selection of the first network in ap\_scan=2 mode; previously,
wpa\_supplicant could get stuck in SCANNING state when only the first
network for enabled (e.g., after 'wpa\_cli select\_network 0')
\* winsvc: added support for configuring ctrl\_interface parameters in
registry (ctrl\_interface string value in
HKLM\SOFTWARE\wpa\_supplicant\interfaces\0000 key); this new value is
required to enable control interface (previously, this was hardcoded
to be enabled)
\* allow wpa\_gui subdirectory to be built with both Qt3 and Qt4
\* converted wpa\_gui-qt4 subdirectory to use Qt4 specific project format
2006-06-20 - v0.5.4
\* fixed build with CONFIG\_STAKEY=y [Bug 143]
\* added support for doing MLME (IEEE 802.11 management frame
processing) in wpa\_supplicant when using Devicescape IEEE 802.11
stack (wireless-dev.git tree)
\* added a new network block configuration option, fragment\_size, to
configure the maximum EAP fragment size
\* driver\_ndis: Disable WZC automatically for the selected interface to
avoid conflicts with two programs trying to control the radio; WZC
will be re-enabled (if it was enabled originally) when wpa\_supplicant
is terminated
\* added an experimental TLSv1 client implementation
(CONFIG\_TLS=internal) that can be used instead of an external TLS
library, e.g., to reduce total size requirement on systems that do
not include any TLS library by default (this is not yet complete;
basic functionality is there, but certificate validation is not yet
included)
\* added PeerKey handshake implementation for IEEE 802.11e
direct link setup (DLS) to replace STAKey handshake
\* fixed WPA PSK update through ctrl\_iface for the case where the old
PSK was derived from an ASCII passphrase and the new PSK is set as
a raw PSK (hex string)
\* added new configuration option for identifying which network block
was used (id\_str in wpa\_supplicant.conf; included on
WPA\_EVENT\_CONNECT monitor event and as WPA\_ID\_STR environmental
variable in wpa\_cli action scripts; in addition WPA\_ID variable is
set to the current unique identifier that wpa\_supplicant assigned
automatically for the network and that can be used with
GET\_NETWORK/SET\_NETWORK ctrl\_iface commands)
\* wpa\_cli action script is now called only when the connect/disconnect
status changes or when associating with a different network
\* fixed configuration parser not to remove CCMP from group cipher list
if WPA-None (adhoc) is used (pairwise=NONE in that case)
\* fixed integrated NDIS events processing not to hang the process due
to a missed change in eloop\_win.c API in v0.5.3 [Bug 155]
\* added support for EAP Generalized Pre-Shared Key (EAP-GPSK,
draft-clancy-emu-eap-shared-secret-00.txt)
\* added Microsoft Visual Studio 2005 solution and project files for
build wpa\_supplicant for Windows (see vs2005 subdirectory)
\* eloop\_win: fixed unregistration of Windows events
\* l2\_packet\_winpcap: fixed a deadlock in deinitializing l2\_packet
at the end of RSN pre-authentication and added unregistration of
a Windows event to avoid getting eloop\_win stuck with an invalid
handle
\* driver\_ndis: added support for selecting AP based on BSSID
\* added new environmental variable for wpa\_cli action scripts:
WPA\_CTRL\_DIR is the current control interface directory
\* driver\_ndis: added support for using NDISUIO instead of WinPcap for
OID set/query operations (CONFIG\_USE\_NDISUIO=y in .config); with new
l2\_packet\_ndis (CONFIG\_L2\_PACKET=ndis), this can be used to build
wpa\_supplicant without requiring WinPcap; note that using NDISUIO
requires that WZC is disabled (net stop wzcsvc) since NDISUIO allows
only one application to open the device
\* changed NDIS driver naming to only include device GUID, e.g.,
{7EE3EFE5-C165-472F-986D-F6FBEDFE8C8D}, instead of including WinPcap
specific \Device\NPF\_ prefix before the GUID; the prefix is still
allowed for backwards compatibility, but it is not required anymore
when specifying the interface
\* driver\_ndis: re-initialize driver interface is the adapter is removed
and re-inserted [Bug 159]
\* driver\_madwifi: fixed TKIP and CCMP sequence number configuration on
big endian hosts [Bug 146]
2006-04-27 - v0.5.3
\* fixed EAP-GTC response to include correct user identity when run as
phase 2 method of EAP-FAST (i.e., EAP-FAST did not work in v0.5.2)
\* driver\_ndis: Fixed encryption mode configuration for unencrypted
networks (some NDIS drivers ignored this, but others, e.g., Broadcom,
refused to associate with open networks) [Bug 106]
\* driver\_ndis: use BSSID OID polling to detect when IBSS network is
formed even when ndis\_events code is included since some NDIS drivers
do not generate media connect events in IBSS mode
\* config\_winreg: allow global ctrl\_interface parameter to be configured
in Windows registry
\* config\_winreg: added support for saving configuration data into
Windows registry
\* added support for controlling network device operational state
(dormant/up) for Linux 2.6.17 to improve DHCP processing (see
http://www.flamewarmaster.de/software/dhcpclient/ for a DHCP client
that can use this information)
\* driver\_wext: added support for WE-21 change to SSID configuration
\* driver\_wext: fixed privacy configuration for static WEP keys mode
[Bug 140]
\* added an optional driver\_ops callback for MLME-SETPROTECTION.request
primitive
\* added support for EAP-SAKE (no EAP method number allocated yet, so
this is using the same experimental type 255 as EAP-PSK)
\* added support for dynamically loading EAP methods (.so files) instead
of requiring them to be statically linked in; this is disabled by
default (see CONFIG\_DYNAMIC\_EAP\_METHODS in defconfig for information
on how to use this)
2006-03-19 - v0.5.2
\* do not try to use USIM APDUs when initializing PC/SC for SIM card
access for a network that has not enabled EAP-AKA
\* fixed EAP phase 2 Nak for EAP-{PEAP,TTLS,FAST} (this was broken in
v0.5.1 due to the new support for expanded EAP types)
\* added support for generating EAP Expanded Nak
\* try to fetch scan results once before requesting new scan when
starting up in ap\_scan=1 mode (this can speed up initial association
a lot with, e.g., madwifi-ng driver)
\* added support for receiving EAPOL frames from a Linux bridge
interface (-bbr0 on command line)
\* fixed EAPOL re-authentication for sessions that used PMKSA caching
\* changed EAP method registration to use a dynamic list of methods
instead of a static list generated at build time
\* fixed PMKSA cache deinitialization not to use freed memory when
removing PMKSA entries
\* fixed a memory leak in EAP-TTLS re-authentication
\* reject WPA/WPA2 message 3/4 if it does not include any valid
WPA/RSN IE
\* driver\_wext: added fallback to use SIOCSIWENCODE for setting auth\_alg
if the driver does not support SIOCSIWAUTH
2006-01-29 - v0.5.1
\* driver\_test: added better support for multiple APs and STAs by using
a directory with sockets that include MAC address for each device in
the name (driver\_param=test\_dir=/tmp/test)
\* added support for EAP expanded type (vendor specific EAP methods)
\* added AP\_SCAN command into ctrl\_iface so that ap\_scan configuration
option can be changed if needed
\* wpa\_cli/wpa\_gui: skip non-socket files in control directory when
using UNIX domain sockets; this avoids selecting an incorrect
interface (e.g., a PID file could be in this directory, even though
use of this directory for something else than socket files is not
recommended)
\* fixed TLS library deinitialization after RSN pre-authentication not
to disable TLS library for normal authentication
\* driver\_wext: Remove null-termination from SSID length if the driver
used it; some Linux drivers do this and they were causing problems in
wpa\_supplicant not finding matching configuration block. This change
would break a case where the SSID actually ends in '\0', but that is
not likely to happen in real use.
\* fixed PMKSA cache processing not to trigger deauthentication if the
current PMKSA cache entry is replaced with a valid new entry
\* fixed PC/SC initialization for ap\_scan != 1 modes (this fixes
EAP-SIM and EAP-AKA with real SIM/USIM card when using ap\_scan=0 or
ap\_scan=2)
2005-12-18 - v0.5.0 (beginning of 0.5.x development releases)
\* added experimental STAKey handshake implementation for IEEE 802.11e
direct link setup (DLS); note: this is disabled by default in both
build and runtime configuration (can be enabled with CONFIG\_STAKEY=y
and stakey=1)
\* fixed EAP-SIM and EAP-AKA pseudonym and fast re-authentication to
decrypt AT\_ENCR\_DATA attributes correctly
\* fixed EAP-AKA to allow resynchronization within the same session
\* made code closer to ANSI C89 standard to make it easier to port to
other C libraries and compilers
\* started moving operating system or C library specific functions into
wrapper functions defined in os.h and implemented in os\_\*.c to make
code more portable
\* wpa\_supplicant can now be built with Microsoft Visual C++
(e.g., with the freely available Toolkit 2003 version or Visual
C++ 2005 Express Edition and Platform SDK); see nmake.mak for an
example makefile for nmake
\* added support for using Windows registry for command line parameters
(CONFIG\_MAIN=main\_winsvc) and configuration data
(CONFIG\_BACKEND=winreg); see win\_example.reg for an example registry
contents; this version can be run both as a Windows service and as a
normal application; 'wpasvc.exe app' to start as applicant,
'wpasvc.exe reg ' to register a service,
'net start wpasvc' to start the service, 'wpasvc.exe unreg' to
unregister a service
\* made it possible to link ndis\_events.exe functionality into
wpa\_supplicant.exe by defining CONFIG\_NDIS\_EVENTS\_INTEGRATED
\* added better support for multiple control interface backends
(CONFIG\_CTRL\_IFACE option); currently, 'unix' and 'udp' are supported
\* fixed PC/SC code to use correct length for GSM AUTH command buffer
and to not use pioRecvPci with SCardTransmit() calls; these were not
causing visible problems with pcsc-lite, but Windows Winscard.dll
refused the previously used parameters; this fixes EAP-SIM and
EAP-AKA authentication using SIM/USIM card under Windows
\* added new event loop implementation for Windows using
WaitForMultipleObject() instead of select() in order to allow waiting
for non-socket objects; this can be selected with
CONFIG\_ELOOP=eloop\_win in .config
\* added support for selecting l2\_packet implementation in .config
(CONFIG\_L2\_PACKET; following options are available now: linux, pcap,
winpcap, freebsd, none)
\* added new l2\_packet implementation for WinPcap
(CONFIG\_L2\_PACKET=winpcap) that uses a separate receive thread to
reduce latency in EAPOL receive processing from about 100 ms to about
3 ms
\* added support for EAP-FAST key derivation using other ciphers than
RC4-128-SHA for authentication and AES128-SHA for provisioning
\* added support for configuring CA certificate as DER file and as a
configuration blob
\* fixed private key configuration as configuration blob and added
support for using PKCS#12 as a blob
\* tls\_gnutls: added support for using PKCS#12 files; added support for
session resumption
\* added support for loading trusted CA certificates from Windows
certificate store: ca\_cert="cert\_store://", where  is
likely CA (Intermediate CA certificates) or ROOT (root certificates)
\* added C version of ndis\_events.cpp and made it possible to build this
with MinGW so that CONFIG\_NDIS\_EVENTS\_INTEGRATED can be used more
easily on cross-compilation builds
\* added wpasvc.exe into Windows binary release; this is an alternative
version of wpa\_supplicant.exe with configuration backend using
Windows registry and with the entry point designed to run as a
Windows service
\* integrated ndis\_events.exe functionality into wpa\_supplicant.exe and
wpasvc.exe and removed this additional tool from the Windows binary
release since it is not needed anymore
\* load winscard.dll functions dynamically when building with MinGW
since MinGW does not yet include winscard library
2005-11-20 - v0.4.7 (beginning of 0.4.x stable releases)
\* l2\_packet\_pcap: fixed wired IEEE 802.1X authentication with libpcap
and WinPcap to receive frames sent to PAE group address
\* disable EAP state machine when IEEE 802.1X authentication is not used
in order to get rid of bogus "EAP failed" messages
\* fixed OpenSSL error reporting to go through all pending errors to
avoid confusing reports of old errors being reported at later point
during handshake
\* fixed configuration file updating to not write empty variables
(e.g., proto or key\_mgmt) that the file parser would not accept
\* fixed ADD\_NETWORK ctrl\_iface command to use the same default values
for variables as empty network definitions read from config file
would get
\* fixed EAP state machine to not discard EAP-Failure messages in many
cases (e.g., during TLS handshake)
\* fixed a infinite loop in private key reading if the configured file
cannot be parsed successfully
\* driver\_madwifi: added support for madwifi-ng
\* wpa\_gui: do not display password/PSK field contents
\* wpa\_gui: added CA certificate configuration
\* driver\_ndis: fixed scan request in ap\_scan=2 mode not to change SSID
\* driver\_ndis: include Beacon IEs in AssocInfo in order to notice if
the new AP is using different WPA/RSN IE
\* use longer timeout for IEEE 802.11 association to avoid problems with
drivers that may take more than five second to associate
2005-10-27 - v0.4.6
\* allow fallback to WPA, if mixed WPA+WPA2 networks have mismatch in
RSN IE, but WPA IE would match with wpa\_supplicant configuration
\* added support for named configuration blobs in order to avoid having
to use file system for external files (e.g., certificates);
variables can be set to "blob://" instead of file path to
use a named blob; supported fields: pac\_file, client\_cert,
private\_key
\* fixed RSN pre-authentication (it was broken in the clean up of WPA
state machine interface in v0.4.5)
\* driver\_madwifi: set IEEE80211\_KEY\_GROUP flag for group keys to make
sure the driver configures broadcast decryption correctly
\* added ca\_path (and ca\_path2) configuration variables that can be used
to configure OpenSSL CA path, e.g., /etc/ssl/certs, for using the
system-wide trusted CA list
\* added support for starting wpa\_supplicant without a configuration
file (-C argument must be used to set ctrl\_interface parameter for
this case; in addition, -p argument can be used to provide
driver\_param; these new arguments can also be used with a
configuration to override the values from the configuration)
\* added global control interface that can be optionally used for adding
and removing network interfaces dynamically (-g command line argument
for both wpa\_supplicant and wpa\_cli) without having to restart
wpa\_supplicant process
\* wpa\_gui:
- try to save configuration whenever something is modified
- added WEP key configuration
- added possibility to edit the current network configuration
\* driver\_ndis: fixed driver polling not to increase frequency on each
received EAPOL frame due to incorrectly cancelled timeout
\* added simple configuration file examples (in examples subdirectory)
\* fixed driver\_wext.c to filter wireless events based on ifindex to
avoid interfaces receiving events from other interfaces
\* delay sending initial EAPOL-Start couple of seconds to speed up
authentication for the most common case of Authenticator starting
EAP authentication immediately after association
2005-09-25 - v0.4.5
\* added a workaround for clearing keys with ndiswrapper to allow
roaming from WPA enabled AP to plaintext one
\* added docbook documentation (doc/docbook) that can be used to
generate, e.g., man pages
\* l2\_packet\_linux: use socket type SOCK\_DGRAM instead of SOCK\_RAW for
PF\_PACKET in order to prepare for network devices that do not use
Ethernet headers (e.g., network stack that includes IEEE 802.11
header in the frames)
\* use receipt of EAPOL-Key frame as a lower layer success indication
for EAP state machine to allow recovery from dropped EAP-Success
frame
\* cleaned up internal EAPOL frame processing by not including link
layer (Ethernet) header during WPA and EAPOL/EAP processing; this
header is added only when transmitted the frame; this makes it easier
to use wpa\_supplicant on link layers that use different header than
Ethernet
\* updated EAP-PSK to use draft 9 by default since this can now be
tested with hostapd; removed support for draft 3, including
server\_nai configuration option from network blocks
\* driver\_wired: add PAE address to the multicast address list in order
to be able to receive EAPOL frames with drivers that do not include
these multicast addresses by default
\* driver\_wext: add support for WE-19
\* added support for multiple configuration backends (CONFIG\_BACKEND
option); currently, only 'file' is supported (i.e., the format used
in wpa\_supplicant.conf)
\* added support for updating configuration ('wpa\_cli save\_config');
this is disabled by default and can be enabled with global
update\_config=1 variable in wpa\_supplicant.conf; this allows wpa\_cli
and wpa\_gui to store the configuration changes in a permanent store
\* added GET\_NETWORK ctrl\_iface command
(e.g., 'wpa\_cli get\_network 0 ssid')
2005-08-21 - v0.4.4
\* replaced OpenSSL patch for EAP-FAST support
(openssl-tls-extensions.patch) with a more generic and correct
patch (the new patch is not compatible with the previous one, so the
OpenSSL library will need to be patched with the new patch in order
to be able to build wpa\_supplicant with EAP-FAST support)
\* added support for using Windows certificate store (through CryptoAPI)
for client certificate and private key operations (EAP-TLS)
(see wpa\_supplicant.conf for more information on how to configure
this with private\_key)
\* ported wpa\_gui to Windows
\* added Qt4 version of wpa\_gui (wpa\_gui-qt4 directory); this can be
built with the open source version of the Qt4 for Windows
\* allow non-WPA modes (e.g., IEEE 802.1X with dynamic WEP) to be used
with drivers that do not support WPA
\* ndis\_events: fixed Windows 2000 support
\* added support for enabling/disabling networks from the list of all
configured networks ('wpa\_cli enable\_network ' and
'wpa\_cli disable\_network ')
\* added support for adding and removing network from the current
configuration ('wpa\_cli add\_network' and 'wpa\_cli remove\_network
'); added networks are disabled by default and they can
be enabled with enable\_network command once the configuration is done
for the new network; note: configuration file is not yet updated, so
these new networks are lost when wpa\_supplicant is restarted
\* added support for setting network configuration parameters through
the control interface, for example:
wpa\_cli set\_network 0 ssid "\"my network\""
\* fixed parsing of strings that include both " and # within double
quoted area (e.g., "start"#end")
\* added EAP workaround for PEAP session resumption: allow outer,
i.e., not tunneled, EAP-Success to terminate session since; this can
be disabled with eap\_workaround=0
(this was allowed for PEAPv1 before, but now it is also allowed for
PEAPv0 since at least one RADIUS authentication server seems to be
doing this for PEAPv0, too)
\* wpa\_gui: added preliminary support for adding new networks to the
wpa\_supplicant configuration (double click on the scan results to
open network configuration)
2005-06-26 - v0.4.3
\* removed interface for external EAPOL/EAP supplicant (e.g.,
Xsupplicant), (CONFIG\_XSUPPLICANT\_IFACE) since it is not required
anymore and is unlikely to be used by anyone
\* driver\_ndis: fixed WinPcap 3.0 support
\* fixed build with CONFIG\_DNET\_PCAP=y on Linux
\* l2\_packet: moved different implementations into separate files
(l2\_packet\_\*.c)
2005-06-12 - v0.4.2
\* driver\_ipw: updated driver structures to match with ipw2200-1.0.4
(note: ipw2100-1.1.0 is likely to require an update to work with
this)
\* added support for using ap\_scan=2 mode with multiple network blocks;
wpa\_supplicant will go through the networks one by one until the
driver reports a successful association; this uses the same order for
networks as scan\_ssid=1 scans, i.e., the priority field is ignored
and the network block order in the file is used instead
\* fixed a potential issue in RSN pre-authentication ending up using
freed memory if pre-authentication times out
\* added support for matching alternative subject name extensions of the
authentication server certificate; new configuration variables
altsubject\_match and altsubject\_match2
\* driver\_ndis: added support for IEEE 802.1X authentication with wired
NDIS drivers
\* added support for querying private key password (EAP-TLS) through the
control interface (wpa\_cli/wpa\_gui) if one is not included in the
configuration file
\* driver\_broadcom: fixed couple of memory leaks in scan result
processing
\* EAP-PAX is now registered as EAP type 46
\* fixed EAP-PAX MAC calculation
\* fixed EAP-PAX CK and ICK key derivation
\* added support for using password with EAP-PAX (as an alternative to
entering key with eappsk); SHA-1 hash of the password will be used as
the key in this case
\* added support for arbitrary driver interface parameters through the
configuration file with a new driver\_param field; this adds a new
driver\_ops function set\_param()
\* added possibility to override l2\_packet module with driver interface
API (new send\_eapol handler); this can be used to implement driver
specific TX/RX functions for EAPOL frames
\* fixed ctrl\_interface\_group processing for the case where gid is
entered as a number, not group name
\* driver\_test: added support for testing hostapd with wpa\_supplicant
by using test driver interface without any kernel drivers or network
cards
2005-05-22 - v0.4.1
\* driver\_madwifi: fixed WPA/WPA2 mode configuration to allow EAPOL
packets to be encrypted; this was apparently broken by the changed
ioctl order in v0.4.0
\* driver\_madwifi: added preliminary support for compiling against 'BSD'
branch of madwifi CVS tree
\* added support for EAP-MSCHAPv2 password retries within the same EAP
authentication session
\* added support for password changes with EAP-MSCHAPv2 (used when the
password has expired)
\* added support for reading additional certificates from PKCS#12 files
and adding them to the certificate chain
\* fixed association with IEEE 802.1X (no WPA) when dynamic WEP keys
were used
\* fixed a possible double free in EAP-TTLS fast-reauthentication when
identity or password is entered through control interface
\* display EAP Notification messages to user through control interface
with "CTRL-EVENT-EAP-NOTIFICATION" prefix
\* added GUI version of wpa\_cli, wpa\_gui; this is not build
automatically with 'make'; use 'make wpa\_gui' to build (this requires
Qt development tools)
\* added 'disconnect' command to control interface for setting
wpa\_supplicant in state where it will not associate before
'reassociate' command has been used
\* added support for selecting a network from the list of all configured
networks ('wpa\_cli select\_network '; this disabled all
other networks; to re-enable, 'wpa\_cli select\_network any')
\* added support for getting scan results through control interface
\* added EAP workaround for PEAPv1 session resumption: allow outer,
i.e., not tunneled, EAP-Success to terminate session since; this can
be disabled with eap\_workaround=0
2005-04-25 - v0.4.0 (beginning of 0.4.x development releases)
\* added a new build time option, CONFIG\_NO\_STDOUT\_DEBUG, that can be
used to reduce the size of the wpa\_supplicant considerably if
debugging code is not needed
\* fixed EAPOL-Key validation to drop packets with invalid Key Data
Length; such frames could have crashed wpa\_supplicant due to buffer
overflow
\* added support for wired authentication (IEEE 802.1X on wired
Ethernet); driver interface 'wired'
\* obsoleted set\_wpa() handler in the driver interface API (it can be
replaced by moving enable/disable functionality into init()/deinit())
(calls to set\_wpa() are still present for backwards compatibility,
but they may be removed in the future)
\* driver\_madwifi: fixed association in plaintext mode
\* modified the EAP workaround that accepts EAP-Success with incorrect
Identifier to be even less strict about verification in order to
interoperate with some authentication servers
\* added support for sending TLS alerts
\* added support for 'any' SSID wildcard; if ssid is not configured or
is set to an empty string, any SSID will be accepted for non-WPA AP
\* added support for asking PIN (for SIM) from frontends (e.g.,
wpa\_cli); if a PIN is needed, but not included in the configuration
file, a control interface request is sent and EAP processing is
delayed until the PIN is available
\* added support for using external devices (e.g., a smartcard) for
private key operations in EAP-TLS (CONFIG\_SMARTCARD=y in .config);
new wpa\_supplicant.conf variables:
- global: opensc\_engine\_path, pkcs11\_engine\_path, pkcs11\_module\_path
- network: engine, engine\_id, key\_id
\* added experimental support for EAP-PAX
\* added monitor mode for wpa\_cli (-a) that
allows external commands (e.g., shell scripts) to be run based on
wpa\_supplicant events, e.g., when authentication has been completed
and data connection is ready; other related wpa\_cli arguments:
-B (run in background), -P (write PID file); wpa\_supplicant has a new
command line argument (-W) that can be used to make it wait until a
control interface command is received in order to avoid missing
events
\* added support for opportunistic WPA2 PMKSA key caching (disabled by
default, can be enabled with proactive\_key\_caching=1)
\* fixed RSN IE in 4-Way Handshake message 2/4 for the case where
Authenticator rejects PMKSA caching attempt and the driver is not
using assoc\_info events
\* added -P argument for wpa\_supplicant to write the current
process id into a file
2005-02-12 - v0.3.7 (beginning of 0.3.x stable releases)
\* added new phase1 option parameter, include\_tls\_length=1, to force
wpa\_supplicant to add TLS Message Length field to all TLS messages
even if the packet is not fragmented; this may be needed with some
authentication servers
\* fixed WPA/RSN IE verification in message 3 of 4-Way Handshake when
using drivers that take care of AP selection (e.g., when using
ap\_scan=2)
\* fixed reprocessing of pending request after ctrl\_iface requests for
identity/password/otp
\* fixed ctrl\_iface requests for identity/password/otp in Phase 2 of
EAP-PEAP and EAP-TTLS
\* all drivers using driver\_wext: set interface up and select Managed
mode when starting wpa\_supplicant; set interface down when exiting
\* renamed driver\_ipw2100.c to driver\_ipw.c since it now supports both
ipw2100 and ipw2200; please note that this also changed the
configuration variable in .config to CONFIG\_DRIVER\_IPW
2005-01-24 - v0.3.6
\* fixed a busy loop introduced in v0.3.5 for scan result processing
when no matching AP is found
2005-01-23 - v0.3.5
\* added a workaround for an interoperability issue with a Cisco AP
when using WPA2-PSK
\* fixed non-WPA IEEE 802.1X to use the same authentication timeout as
WPA with IEEE 802.1X (i.e., timeout 10 -> 70 sec to allow
retransmission of dropped frames)
\* fixed issues with 64-bit CPUs and SHA1 cleanup in previous version
(e.g., segfault when processing EAPOL-Key frames)
\* fixed EAP workaround and fast reauthentication configuration for
RSN pre-authentication; previously these were disabled and
pre-authentication would fail if the used authentication server
requires EAP workarounds
\* added support for blacklisting APs that fail or timeout
authentication in ap\_scan=1 mode so that all APs are tried in cases
where the ones with strongest signal level are failing authentication
\* fixed CA certificate loading after a failed EAP-TLS/PEAP/TTLS
authentication attempt
\* allow EAP-PEAP/TTLS fast reauthentication only if Phase 2 succeeded
in the previous authentication (previously, only Phase 1 success was
verified)
2005-01-09 - v0.3.4
\* added preliminary support for IBSS (ad-hoc) mode configuration
(mode=1 in network block); this included a new key\_mgmt mode
WPA-NONE, i.e., TKIP or CCMP with a fixed key (based on psk) and no
key management; see wpa\_supplicant.conf for more details and an
example on how to configure this (note: this is currently implemented
only for driver\_hostapd.c, but the changes should be trivial to add
in associate() handler for other drivers, too (assuming the driver
supports WPA-None)
\* added preliminary port for native Windows (i.e., no cygwin) using
mingw
2005-01-02 - v0.3.3
\* added optional support for GNU Readline and History Libraries for
wpa\_cli (CONFIG\_READLINE)
\* cleaned up EAP state machine <-> method interface and number of
small problems with error case processing not terminating on
EAP-Failure but waiting for timeout
\* added couple of workarounds for interoperability issues with a
Cisco AP when using WPA2
\* added support for EAP-FAST (draft-cam-winget-eap-fast-00.txt);
Note: This requires a patch for openssl to add support for TLS
extensions and number of workarounds for operations without
certificates. Proof of concept type of experimental patch is
included in openssl-tls-extensions.patch.
2004-12-19 - v0.3.2
\* fixed private key loading for cases where passphrase is not set
\* fixed Windows/cygwin L2 packet handler freeing; previous version
could cause a segfault when RSN pre-authentication was completed
\* added support for PMKSA caching with drivers that generate RSN IEs
(e.g., NDIS); currently, this is only implemented in driver\_ndis.c,
but similar code can be easily added to driver\_ndiswrapper.c once
ndiswrapper gets full support for RSN PMKSA caching
\* improved recovery from PMKID mismatches by requesting full EAP
authentication in case of failed PMKSA caching attempt
\* driver\_ndis: added support for NDIS NdisMIncidateStatus() events
(this requires that ndis\_events is ran while wpa\_supplicant is
running)
\* driver\_ndis: use ADD\_WEP/REMOVE\_WEP when configuring WEP keys
\* added support for driver interfaces to replace the interface name
based on driver/OS specific mapping, e.g., in case of driver\_ndis,
this allows the beginning of the adapter description to be used as
the interface name
\* added support for CR+LF (Windows-style) line ends in configuration
file
\* driver\_ndis: enable radio before starting scanning, disable radio
when exiting
\* modified association event handler to set portEnabled = FALSE before
clearing port Valid in order to reset EAP state machine and avoid
problems with new authentication getting ignored because of state
machines ending up in AUTHENTICATED/SUCCESS state based on old
information
\* added support for driver events to add PMKID candidates in order to
allow drivers to give priority to most likely roaming candidates
\* driver\_hostap: moved PrivacyInvoked configuration to associate()
function so that this will not be set for plaintext connections
\* added KEY\_MGMT\_802\_1X\_NO\_WPA as a new key\_mgmt type so that driver
interface can distinguish plaintext and IEEE 802.1X (no WPA)
authentication
\* fixed static WEP key configuration to use broadcast/default type for
all keys (previously, the default TX key was configured as pairwise/
unicast key)
\* driver\_ndis: added legacy WPA capability detection for non-WPA2
drivers
\* added support for setting static WEP keys for IEEE 802.1X without
dynamic WEP keying (eapol\_flags=0)
2004-12-12 - v0.3.1
\* added support for reading PKCS#12 (PFX) files (as a replacement for
PEM/DER) to get certificate and private key (CONFIG\_PKCS12)
\* fixed compilation with CONFIG\_PCSC=y
\* added new ap\_scan mode, ap\_scan=2, for drivers that take care of
association, but need to be configured with security policy and SSID,
e.g., ndiswrapper and NDIS driver; this mode should allow such
drivers to work with hidden SSIDs and optimized roaming; when
ap\_scan=2 is used, only the first network block in the configuration
file is used and this configuration should have explicit security
policy (i.e., only one option in the lists) for key\_mgmt, pairwise,
group, proto variables
\* added experimental port of wpa\_supplicant for Windows
- driver\_ndis.c driver interface (NDIS OIDs)
- currently, this requires cygwin and WinPcap
- small utility, win\_if\_list, can be used to get interface name
\* control interface can now be removed at build time; add
CONFIG\_CTRL\_IFACE=y to .config to maintain old functionality
\* optional Xsupplicant interface can now be removed at build time;
(CONFIG\_XSUPPLICANT\_IFACE=y in .config to bring it back)
\* added auth\_alg to driver interface associate() parameters to make it
easier for drivers to configure authentication algorithm as part of
the association
2004-12-05 - v0.3.0 (beginning of 0.3.x development releases)
\* driver\_broadcom: added new driver interface for Broadcom wl.o driver
(a generic driver for Broadcom IEEE 802.11a/g cards)
\* wpa\_cli: fixed parsing of -p  command line argument
\* PEAPv1: fixed tunneled EAP-Success reply handling to reply with TLS
ACK, not tunneled EAP-Success (of which only the first byte was
actually send due to a bug in previous code); this seems to
interoperate with most RADIUS servers that implements PEAPv1
\* PEAPv1: added support for terminating PEAP authentication on tunneled
EAP-Success message; this can be configured by adding
peap\_outer\_success=0 on phase1 parameters in wpa\_supplicant.conf
(some RADIUS servers require this whereas others require a tunneled
reply
\* PEAPv1: changed phase1 option peaplabel to use default to 0, i.e., to
the old label for key derivation; previously, the default was 1,
but it looks like most existing PEAPv1 implementations use the old
label which is thus more suitable default option
\* added support for EAP-PSK (draft-bersani-eap-psk-03.txt)
\* fixed parsing of wep\_tx\_keyidx
\* added support for configuring list of allowed Phase 2 EAP types
(for both EAP-PEAP and EAP-TTLS) instead of only one type
\* added support for configuring IEEE 802.11 authentication algorithm
(auth\_alg; mainly for using Shared Key authentication with static
WEP keys)
\* added support for EAP-AKA (with UMTS SIM)
\* fixed couple of errors in PCSC handling that could have caused
random-looking errors for EAP-SIM
\* added support for EAP-SIM pseudonyms and fast re-authentication
\* added support for EAP-TLS/PEAP/TTLS fast re-authentication (TLS
session resumption)
\* added support for EAP-SIM with two challenges
(phase1="sim\_min\_num\_chal=3" can be used to require three challenges)
\* added support for configuring DH/DSA parameters for an ephemeral DH
key exchange (EAP-TLS/PEAP/TTLS) using new configuration parameters
dh\_file and dh\_file2 (phase 2); this adds support for using DSA keys
and optional DH key exchange to achieve forward secracy with RSA keys
\* added support for matching subject of the authentication server
certificate with a substring when using EAP-TLS/PEAP/TTLS; new
configuration variables subject\_match and subject\_match2
\* changed SSID configuration in driver\_wext.c (used by many driver
interfaces) to use ssid\_len+1 as the length for SSID since some Linux
drivers expect this
\* fixed couple of unaligned reads in scan result parsing to fix WPA
connection on some platforms (e.g., ARM)
\* added driver interface for Intel ipw2100 driver
\* added support for LEAP with WPA
\* added support for larger scan results report (old limit was 4 kB of
data, i.e., about 35 or so APs) when using Linux wireless extensions
v17 or newer
\* fixed a bug in PMKSA cache processing: skip sending of EAPOL-Start
only if there is a PMKSA cache entry for the current AP
\* fixed error handling for case where reading of scan results fails:
must schedule a new scan or wpa\_supplicant will remain waiting
forever
\* changed debug output to remove shared password/key material by
default; all key information can be included with -K command line
argument to match the previous behavior
\* added support for timestamping debug log messages (disabled by
default, can be enabled with -t command line argument)
\* set pairwise/group cipher suite for non-WPA IEEE 802.1X to WEP-104
if keys are not configured to be used; this fixes IEEE 802.1X mode
with drivers that use this information to configure whether Privacy
bit can be in Beacon frames (e.g., ndiswrapper)
\* avoid clearing driver keys if no keys have been configured since last
key clear request; this seems to improve reliability of group key
handshake for ndiswrapper & NDIS driver which seems to be suffering
of some kind of timing issue when the keys are cleared again after
association
\* changed driver interface API:
- WPA\_SUPPLICANT\_DRIVER\_VERSION define can be used to determine which
version is being used (now, this is set to 2; previously, it was
not defined)
- pass pointer to private data structure to all calls
- the new API is not backwards compatible; all in-tree driver
interfaces has been converted to the new API
\* added support for controlling multiple interfaces (radios) per
wpa\_supplicant process; each interface needs to be listed on the
command line (-c, -i, -D arguments) with -N as a separator
(-cwpa1.conf -iwlan0 -Dhostap -N -cwpa2.conf -iath0 -Dmadwifi)
\* added a workaround for EAP servers that incorrectly use same Id for
sequential EAP packets
\* changed libpcap/libdnet configuration to use .config variable,
CONFIG\_DNET\_PCAP, instead of requiring Makefile modification
\* improved downgrade attack detection in IE verification of msg 3/4:
verify both WPA and RSN IEs, if present, not only the selected one;
reject the AP if an RSN IE is found in msg 3/4, but not in Beacon or
Probe Response frame, and RSN is enabled in wpa\_supplicant
configuration
\* fixed WPA msg 3/4 processing to allow Key Data field contain other
IEs than just one WPA IE
\* added support for FreeBSD and driver interface for the BSD net80211
layer (CONFIG\_DRIVER\_BSD=y in .config); please note that some of the
required kernel mods have not yet been committed
\* made EAP workarounds configurable; enabled by default, can be
disabled with network block option eap\_workaround=0
2004-07-17 - v0.2.4 (beginning of 0.2.x stable releases)
\* resolved couple of interoperability issues with EAP-PEAPv1 and
Phase 2 (inner EAP) fragment reassembly
\* driver\_madwifi: fixed WEP key configuration for IEEE 802.1X when the
AP is using non-zero key index for the unicast key and key index zero
for the broadcast key
\* driver\_hostap: fixed IEEE 802.1X WEP key updates and
re-authentication by allowing unencrypted EAPOL frames when not using
WPA
\* added a new driver interface, 'wext', which uses only standard,
driver independent functionality in Linux wireless extensions;
currently, this can be used only for non-WPA IEEE 802.1X mode, but
eventually, this is to be extended to support full WPA/WPA2 once
Linux wireless extensions get support for this
\* added support for mode in which the driver is responsible for AP
scanning and selection; this is disabled by default and can be
enabled with global ap\_scan=0 variable in wpa\_supplicant.conf;
this mode can be used, e.g., with generic 'wext' driver interface to
use wpa\_supplicant as IEEE 802.1X Supplicant with any Linux driver
supporting wireless extensions.
\* driver\_madwifi: fixed WPA2 configuration and scan\_ssid=1 (e.g.,
operation with an AP that does not include SSID in the Beacon frames)
\* added support for new EAP authentication methods:
EAP-TTLS/EAP-OTP, EAP-PEAPv0/OTP, EAP-PEAPv1/OTP, EAP-OTP
\* added support for asking one-time-passwords from frontends (e.g.,
wpa\_cli); this 'otp' command works otherwise like 'password' command,
but the password is used only once and the frontend will be asked for
a new password whenever a request from authenticator requires a
password; this can be used with both EAP-OTP and EAP-GTC
\* changed wpa\_cli to automatically re-establish connection so that it
does not need to be re-started when wpa\_supplicant is terminated and
started again
\* improved user data (identity/password/otp) requests through
frontends: process pending EAPOL packets after getting new
information so that full authentication does not need to be
restarted; in addition, send pending requests again whenever a new
frontend is attached
\* changed control frontends to use a new directory for socket files to
make it easier for wpa\_cli to automatically select between interfaces
and to provide access control for the control interface;
wpa\_supplicant.conf: ctrl\_interface is now a path
(/var/run/wpa\_supplicant is the recommended path) and
ctrl\_interface\_group can be used to select which group gets access to
the control interface;
wpa\_cli: by default, try to connect to the first interface available
in /var/run/wpa\_supplicant; this path can be overridden with -p option
and an interface can be selected with -i option (i.e., in most common
cases, wpa\_cli does not need to get any arguments)
\* added support for LEAP
\* added driver interface for Linux ndiswrapper
\* added priority option for network blocks in the configuration file;
this allows networks to be grouped based on priority (the scan
results are searched for matches with network blocks in this order)
2004-06-20 - v0.2.3
\* sort scan results to improve AP selection
\* fixed control interface socket removal for some error cases
\* improved scan requesting and authentication timeout
\* small improvements/bug fixes for EAP-MSCHAPv2, EAP-PEAP, and
TLS processing
\* PEAP version can now be forced with phase1="peapver="
(mostly for testing; by default, the highest version supported by
both the Supplicant and Authentication Server is selected
automatically)
\* added support for madwifi driver (Atheros ar521x)
\* added a workaround for cases where AP sets Install Tx/Rx bit for
WPA Group Key messages when pairwise keys are used (without this,
the Group Key would be used for Tx and the AP would drop frames
from the station)
\* added GSM SIM/USIM interface for GSM authentication algorithm for
EAP-SIM; this requires pcsc-lite
\* added support for ATMEL AT76C5XXx driver
\* fixed IEEE 802.1X WEP key derivation in the case where Authenticator
does not include key data in the EAPOL-Key frame (i.e., part of
EAP keying material is used as data encryption key)
\* added support for using plaintext and static WEP networks
(key\_mgmt=NONE)
2004-05-31 - v0.2.2
\* added support for new EAP authentication methods:
EAP-TTLS/EAP-MD5-Challenge
EAP-TTLS/EAP-GTC
EAP-TTLS/EAP-MSCHAPv2
EAP-TTLS/EAP-TLS
EAP-TTLS/MSCHAPv2
EAP-TTLS/MSCHAP
EAP-TTLS/PAP
EAP-TTLS/CHAP
EAP-PEAP/TLS
EAP-PEAP/GTC
EAP-PEAP/MD5-Challenge
EAP-GTC
EAP-SIM (not yet complete; needs GSM/SIM authentication interface)
\* added support for anonymous identity (to be used when identity is
sent in plaintext; real identity will be used within TLS protected
tunnel (e.g., with EAP-TTLS)
\* added event messages from wpa\_supplicant to frontends, e.g., wpa\_cli
\* added support for requesting identity and password information using
control interface; in other words, the password for EAP-PEAP or
EAP-TTLS does not need to be included in the configuration file since
a frontand (e.g., wpa\_cli) can ask it from the user
\* improved RSN pre-authentication to use a candidate list and process
all candidates from each scan; not only one per scan
\* fixed RSN IE and WPA IE capabilities field parsing
\* ignore Tx bit in GTK IE when Pairwise keys are used
\* avoid making new scan requests during IEEE 802.1X negotiation
\* use openssl/libcrypto for MD5 and SHA-1 when compiling wpa\_supplicant
with TLS support (this replaces the included implementation with
library code to save about 8 kB since the library code is needed
anyway for TLS)
\* fixed WPA-PSK only mode when compiled without IEEE 802.1X support
(i.e., without CONFIG\_IEEE8021X\_EAPOL=y in .config)
2004-05-06 - v0.2.1
\* added support for internal IEEE 802.1X (actually, IEEE 802.1aa/D6.1)
Supplicant
- EAPOL state machines for Supplicant [IEEE 802.1aa/D6.1]
- EAP peer state machine [draft-ietf-eap-statemachine-02.pdf]
- EAP-MD5 (cannot be used with WPA-RADIUS)
[draft-ietf-eap-rfc2284bis-09.txt]
- EAP-TLS [RFC 2716]
- EAP-MSCHAPv2 (currently used only with EAP-PEAP)
- EAP-PEAP/MSCHAPv2 [draft-josefsson-pppext-eap-tls-eap-07.txt]
[draft-kamath-pppext-eap-mschapv2-00.txt]
(PEAP version 0, 1, and parts of 2; only 0 and 1 are enabled by
default; tested with FreeRADIUS, Microsoft IAS, and Funk Odyssey)
- new configuration file options: eap, identity, password, ca\_cert,
client\_cert, privatekey, private\_key\_passwd
- Xsupplicant is not required anymore, but it can be used by
disabling the internal IEEE 802.1X Supplicant with -e command line
option
- this code is not included in the default build; Makefile need to
be edited for this (uncomment lines for selected functionality)
- EAP-TLS and EAP-PEAP require openssl libraries
\* use module prefix in debug messages (WPA, EAP, EAP-TLS, ..)
\* added support for non-WPA IEEE 802.1X mode with dynamic WEP keys
(i.e., complete IEEE 802.1X/EAP authentication and use IEEE 802.1X
EAPOL-Key frames instead of WPA key handshakes)
\* added support for IEEE 802.11i/RSN (WPA2)
- improved PTK Key Handshake
- PMKSA caching, pre-authentication
\* fixed wpa\_supplicant to ignore possible extra data after WPA
EAPOL-Key packets (this fixes 'Invalid EAPOL-Key MIC when using
TPTK' error from message 3 of 4-Way Handshake in case the AP
includes extra data after the EAPOL-Key)
\* added interface for external programs (frontends) to control
wpa\_supplicant
- CLI example (wpa\_cli) with interactive mode and command line
mode
- replaced SIGUSR1 status/statistics with the new control interface
\* made some feature compile time configurable
- .config file for make
- driver interfaces (hostap, hermes, ..)
- EAPOL/EAP functions
2004-02-15 - v0.2.0
\* Initial version of wpa\_supplicant

=== Content from www.debian.org_85360b12_20250124_163333.html ===


---

[[Date Prev](msg00299.html)][[Date Next](msg00301.html)]
[[Thread Prev](msg00299.html)][[Thread Next](msg00301.html)]
[[Date Index](maillist.html#00300)]
[[Thread Index](threads.html#00300)]

# [SECURITY] [DSA 3397-1] wpa security update

---

* *To*: debian-security-announce@lists.debian.org
* *Subject*: [SECURITY] [DSA 3397-1] wpa security update
* *From*: Salvatore Bonaccorso <carnil@debian.org>
* *Date*: Tue, 10 Nov 2015 20:08:26 +0000
* *Message-id*: <[[]](/msgid-search/E1ZwFDO-0000d4-Ua%40master.debian.org)[E1ZwFDO-0000d4-Ua@master.debian.org](msg00300.html)>
* *Reply-to*: debian-security@lists.debian.org

---

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA512

- -------------------------------------------------------------------------
Debian Security Advisory DSA-3397-1                   security@debian.org
<https://www.debian.org/security/>                     Salvatore Bonaccorso
November 10, 2015                     <https://www.debian.org/security/faq>
- -------------------------------------------------------------------------

Package        : wpa
CVE ID         : CVE-2015-4141 CVE-2015-4142 CVE-2015-4143 CVE-2015-4144
                 CVE-2015-4145 CVE-2015-4146 CVE-2015-5310 CVE-2015-5314
                 CVE-2015-5315 CVE-2015-5316 CVE-2015-8041
Debian Bug     : 787371 787372 787373 795740 804707 804708 804710

Several vulnerabilities have been discovered in wpa_supplicant and
hostapd. The Common Vulnerabilities and Exposures project identifies the
following problems:

CVE-2015-4141

    Kostya Kortchinsky of the Google Security Team discovered a
    vulnerability in the WPS UPnP function with HTTP chunked transfer
    encoding which may result in a denial of service.

CVE-2015-4142

    Kostya Kortchinsky of the Google Security Team discovered a
    vulnerability in the WMM Action frame processing which may result in
    a denial of service.

CVE-2015-4143 CVE-2015-4144 CVE-2015-4145 CVE-2015-4146

    Kostya Kortchinsky of the Google Security Team discovered that
    EAP-pwd payload is not properly validated which may result in a
    denial of service.

CVE-2015-5310

    Jouni Malinen discovered a flaw in the WMM Sleep Mode Response frame
    processing. A remote attacker can take advantage of this flaw to
    mount a denial of service.

CVE-2015-5314 CVE-2015-5315

    Jouni Malinen discovered a flaw in the handling of EAP-pwd messages
    which may result in a denial of service.

CVE-2015-5316

    Jouni Malinen discovered a flaw in the handling of EAP-pwd Confirm
    messages which may result in a denial of service.

CVE-2015-8041

    Incomplete WPS and P2P NFC NDEF record payload length validation may
    result in a denial of service.

For the oldstable distribution (wheezy), these problems have been fixed
in version 1.0-3+deb7u3. The oldstable distribution (wheezy) is only
affected by CVE-2015-4141, CVE-2015-4142, CVE-2015-4143 and
CVE-2015-8041.

For the stable distribution (jessie), these problems have been fixed in
version 2.3-1+deb8u3.

We recommend that you upgrade your wpa packages.

Further information about Debian Security Advisories, how to apply
these updates to your system and frequently asked questions can be
found at: <https://www.debian.org/security/>

Mailing list: debian-security-announce@lists.debian.org
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCgAGBQJWQk59AAoJEAVMuPMTQ89EfRoQAI2Hzz2IVjv2/Vqs+Eb1jN7s
B1YeIISf83YOoSLXk1AdFp1irWIJR/1USKjlP3jm7Iedjz/nTqEr8k+4mjtaf1ap
QVj07KUhmQYWJqxqCtrOYh5FKMgwZ6pDGbZaU7W9dV0NTyaQ9Yfi7rz2qf87zKlg
rB66pMheTQVKwb60z2SLkRCzYxwcneVNt1k2YDymP4vthyjqDD3Hr/xkNQmOpYxD
ZZBUVdj2VszBrvQI/7X1zb36viQrTSY/LtiL7V+ouQRQW2iRItHV6UgisKTxqLrc
mxFHO910KexOYUlClShvy+uxPcNEFciY+WXJWk6C/vnWn3kgCePEMfHKnmyqpRHX
/cpv/tClt9fbkv8pd+pdFKvDT4nUeRkKMvjA788nhB0JsAUpJBV2zM1/OqnqSpEy
AkKJpBrAva63k44vrBSpMLQeZph3O4XQxVxd3GQUbnqff/QgfNdt3IZKejieEtr9
aGB9MEbACObsHfJMsyMKTas4wHjUjttli9dv1EjAo+l76uVwqsSsCjkd3hpwGTAa
RfPtr406t8S6mJHUHiAnVGBaDRFLNj+GN4VUI03TY1xV+SryDDwvvNt6mqLPwYGQ
DrkzMvNdpbZeeAZx4Lktwk3VHHqctpSWxh26+hZu/1gSn2fJt4IBAnuvR7U61L/s
dmbD9IrwgfWdrmSOe/8e
=oQsm
-----END PGP SIGNATURE-----

```

---



=== Content from w1.fi_62639a68_20250124_163339.html ===
ChangeLog for hostapd
2024-07-20 - v2.11
\* Wi-Fi Easy Connect
- add support for DPP release 3
- allow Configurator parameters to be provided during config exchange
\* HE/IEEE 802.11ax/Wi-Fi 6
- various fixes
\* EHT/IEEE 802.11be/Wi-Fi 7
- add preliminary support
\* SAE: add support for fetching the password from a RADIUS server
\* support OpenSSL 3.0 API changes
\* support background radar detection and CAC with some additional
drivers
\* support RADIUS ACL/PSK check during 4-way handshake (wpa\_psk\_radius=3)
\* EAP-SIM/AKA: support IMSI privacy
\* improve 4-way handshake operations
- use Secure=1 in message 3 during PTK rekeying
\* OCV: do not check Frequency Segment 1 Channel Number for 160 MHz cases
to avoid interoperability issues
\* support new SAE AKM suites with variable length keys
\* support new AKM for 802.1X/EAP with SHA384
\* extend PASN support for secure ranging
\* FT: Use SHA256 to derive PMKID for AKM 00-0F-AC:3 (FT-EAP)
- this is based on additional details being added in the IEEE 802.11
standard
- the new implementation is not backwards compatible
\* improved ACS to cover additional channel types/bandwidths
\* extended Multiple BSSID support
\* fix beacon protection with FT protocol (incorrect BIGTK was provided)
\* support unsynchronized service discovery (USD)
\* add preliminary support for RADIUS/TLS
\* add support for explicit SSID protection in 4-way handshake
(a mitigation for CVE-2023-52424; disabled by default for now, can be
enabled with ssid\_protection=1)
\* fix SAE H2E rejected groups validation to avoid downgrade attacks
\* use stricter validation for some RADIUS messages
\* a large number of other fixes, cleanup, and extensions
2022-01-16 - v2.10
\* SAE changes
- improved protection against side channel attacks
[https://w1.fi/security/2022-1/]
- added option send SAE Confirm immediately (sae\_config\_immediate=1)
after SAE Commit
- added support for the hash-to-element mechanism (sae\_pwe=1 or
sae\_pwe=2)
- fixed PMKSA caching with OKC
- added support for SAE-PK
\* EAP-pwd changes
- improved protection against side channel attacks
[https://w1.fi/security/2022-1/]
\* fixed WPS UPnP SUBSCRIBE handling of invalid operations
[https://w1.fi/security/2020-1/]
\* fixed PMF disconnection protection bypass
[https://w1.fi/security/2019-7/]
\* added support for using OpenSSL 3.0
\* fixed various issues in experimental support for EAP-TEAP server
\* added configuration (max\_auth\_rounds, max\_auth\_rounds\_short) to
increase the maximum number of EAP message exchanges (mainly to
support cases with very large certificates) for the EAP server
\* added support for DPP release 2 (Wi-Fi Device Provisioning Protocol)
\* extended HE (IEEE 802.11ax) support, including 6 GHz support
\* removed obsolete IAPP functionality
\* fixed EAP-FAST server with TLS GCM/CCM ciphers
\* dropped support for libnl 1.1
\* added support for nl80211 control port for EAPOL frame TX/RX
\* fixed OWE key derivation with groups 20 and 21; this breaks backwards
compatibility for these groups while the default group 19 remains
backwards compatible; owe\_ptk\_workaround=1 can be used to enabled a
a workaround for the group 20/21 backwards compatibility
\* added support for Beacon protection
\* added support for Extended Key ID for pairwise keys
\* removed WEP support from the default build (CONFIG\_WEP=y can be used
to enable it, if really needed)
\* added a build option to remove TKIP support (CONFIG\_NO\_TKIP=y)
\* added support for Transition Disable mechanism to allow the AP to
automatically disable transition mode to improve security
\* added support for PASN
\* added EAP-TLS server support for TLS 1.3 (disabled by default for now)
\* a large number of other fixes, cleanup, and extensions
2019-08-07 - v2.9
\* SAE changes
- disable use of groups using Brainpool curves
- improved protection against side channel attacks
[https://w1.fi/security/2019-6/]
\* EAP-pwd changes
- disable use of groups using Brainpool curves
- improved protection against side channel attacks
[https://w1.fi/security/2019-6/]
\* fixed FT-EAP initial mobility domain association using PMKSA caching
\* added configuration of airtime policy
\* fixed FILS to and RSNE into (Re)Association Response frames
\* fixed DPP bootstrapping URI parser of channel list
\* added support for regulatory WMM limitation (for ETSI)
\* added support for MACsec Key Agreement using IEEE 802.1X/PSK
\* added experimental support for EAP-TEAP server (RFC 7170)
\* added experimental support for EAP-TLS server with TLS v1.3
\* added support for two server certificates/keys (RSA/ECC)
\* added AKMSuiteSelector into "STA " control interface data to
determine with AKM was used for an association
\* added eap\_sim\_id parameter to allow EAP-SIM/AKA server pseudonym and
fast reauthentication use to be disabled
\* fixed an ECDH operation corner case with OpenSSL
2019-04-21 - v2.8
\* SAE changes
- added support for SAE Password Identifier
- changed default configuration to enable only group 19
(i.e., disable groups 20, 21, 25, 26 from default configuration) and
disable all unsuitable groups completely based on REVmd changes
- improved anti-clogging token mechanism and SAE authentication
frame processing during heavy CPU load; this mitigates some issues
with potential DoS attacks trying to flood an AP with large number
of SAE messages
- added Finite Cyclic Group field in status code 77 responses
- reject use of unsuitable groups based on new implementation guidance
in REVmd (allow only FFC groups with prime >= 3072 bits and ECC
groups with prime >= 256)
- minimize timing and memory use differences in PWE derivation
[https://w1.fi/security/2019-1/] (CVE-2019-9494)
- fixed confirm message validation in error cases
[https://w1.fi/security/2019-3/] (CVE-2019-9496)
\* EAP-pwd changes
- minimize timing and memory use differences in PWE derivation
[https://w1.fi/security/2019-2/] (CVE-2019-9495)
- verify peer scalar/element
[https://w1.fi/security/2019-4/] (CVE-2019-9497 and CVE-2019-9498)
- fix message reassembly issue with unexpected fragment
[https://w1.fi/security/2019-5/]
- enforce rand,mask generation rules more strictly
- fix a memory leak in PWE derivation
- disallow ECC groups with a prime under 256 bits (groups 25, 26, and
27)
\* Hotspot 2.0 changes
- added support for release number 3
- reject release 2 or newer association without PMF
\* added support for RSN operating channel validation
(CONFIG\_OCV=y and configuration parameter ocv=1)
\* added Multi-AP protocol support
\* added FTM responder configuration
\* fixed build with LibreSSL
\* added FT/RRB workaround for short Ethernet frame padding
\* fixed KEK2 derivation for FILS+FT
\* added RSSI-based association rejection from OCE
\* extended beacon reporting functionality
\* VLAN changes
- allow local VLAN management with remote RADIUS authentication
- add WPA/WPA2 passphrase/PSK -based VLAN assignment
\* OpenSSL: allow systemwide policies to be overridden
\* extended PEAP to derive EMSK to enable use with ERP/FILS
\* extended WPS to allow SAE configuration to be added automatically
for PSK (wps\_cred\_add\_sae=1)
\* fixed FT and SA Query Action frame with AP-MLME-in-driver cases
\* OWE: allow Diffie-Hellman Parameter element to be included with DPP
in preparation for DPP protocol extension
\* RADIUS server: started to accept ERP keyName-NAI as user identity
automatically without matching EAP database entry
\* fixed PTK rekeying with FILS and FT
2018-12-02 - v2.7
\* fixed WPA packet number reuse with replayed messages and key
reinstallation
[http://w1.fi/security/2017-1/] (CVE-2017-13082)
\* added support for FILS (IEEE 802.11ai) shared key authentication
\* added support for OWE (Opportunistic Wireless Encryption, RFC 8110;
and transition mode defined by WFA)
\* added support for DPP (Wi-Fi Device Provisioning Protocol)
\* FT:
- added local generation of PMK-R0/PMK-R1 for FT-PSK
(ft\_psk\_generate\_local=1)
- replaced inter-AP protocol with a cleaner design that is more
easily extensible; this breaks backward compatibility and requires
all APs in the ESS to be updated at the same time to maintain FT
functionality
- added support for wildcard R0KH/R1KH
- replaced r0\_key\_lifetime (minutes) parameter with
ft\_r0\_key\_lifetime (seconds)
- fixed wpa\_psk\_file use for FT-PSK
- fixed FT-SAE PMKID matching
- added expiration to PMK-R0 and PMK-R1 cache
- added IEEE VLAN support (including tagged VLANs)
- added support for SHA384 based AKM
\* SAE
- fixed some PMKSA caching cases with SAE
- added support for configuring SAE password separately of the
WPA2 PSK/passphrase
- added option to require MFP for SAE associations
(sae\_require\_pmf=1)
- fixed PTK and EAPOL-Key integrity and key-wrap algorithm selection
for SAE;
note: this is not backwards compatible, i.e., both the AP and
station side implementations will need to be update at the same
time to maintain interoperability
- added support for Password Identifier
\* hostapd\_cli: added support for command history and completion
\* added support for requesting beacon report
\* large number of other fixes, cleanup, and extensions
\* added option to configure EAPOL-Key retry limits
(wpa\_group\_update\_count and wpa\_pairwise\_update\_count)
\* removed all PeerKey functionality
\* fixed nl80211 AP mode configuration regression with Linux 4.15 and
newer
\* added support for using wolfSSL cryptographic library
\* fixed some 20/40 MHz coexistence cases where the BSS could drop to
20 MHz even when 40 MHz would be allowed
\* Hotspot 2.0
- added support for setting Venue URL ANQP-element (venue\_url)
- added support for advertising Hotspot 2.0 operator icons
- added support for Roaming Consortium Selection element
- added support for Terms and Conditions
- added support for OSEN connection in a shared RSN BSS
\* added support for using OpenSSL 1.1.1
\* added EAP-pwd server support for salted passwords
2016-10-02 - v2.6
\* fixed EAP-pwd last fragment validation
[http://w1.fi/security/2015-7/] (CVE-2015-5314)
\* fixed WPS configuration update vulnerability with malformed passphrase
[http://w1.fi/security/2016-1/] (CVE-2016-4476)
\* extended channel switch support for VHT bandwidth changes
\* added support for configuring new ANQP-elements with
anqp\_elem=:
\* fixed Suite B 192-bit AKM to use proper PMK length
(note: this makes old releases incompatible with the fixed behavior)
\* added no\_probe\_resp\_if\_max\_sta=1 parameter to disable Probe Response
frame sending for not-associated STAs if max\_num\_sta limit has been
reached
\* added option (-S as command line argument) to request all interfaces
to be started at the same time
\* modified rts\_threshold and fragm\_threshold configuration parameters
to allow -1 to be used to disable RTS/fragmentation
\* EAP-pwd: added support for Brainpool Elliptic Curves
(with OpenSSL 1.0.2 and newer)
\* fixed EAPOL reauthentication after FT protocol run
\* fixed FTIE generation for 4-way handshake after FT protocol run
\* fixed and improved various FST operations
\* TLS server
- support SHA384 and SHA512 hashes
- support TLS v1.2 signature algorithm with SHA384 and SHA512
- support PKCS #5 v2.0 PBES2
- support PKCS #5 with PKCS #12 style key decryption
- minimal support for PKCS #12
- support OCSP stapling (including ocsp\_multi)
\* added support for OpenSSL 1.1 API changes
- drop support for OpenSSL 0.9.8
- drop support for OpenSSL 1.0.0
\* EAP-PEAP: support fast-connect crypto binding
\* RADIUS
- fix Called-Station-Id to not escape SSID
- add Event-Timestamp to all Accounting-Request packets
- add Acct-Session-Id to Accounting-On/Off
- add Acct-Multi-Session-Id ton Access-Request packets
- add Service-Type (= Frames)
- allow server to provide PSK instead of passphrase for WPA-PSK
Tunnel\_password case
- update full message for interim accounting updates
- add Acct-Delay-Time into Accounting messages
- add require\_message\_authenticator configuration option to require
CoA/Disconnect-Request packets to be authenticated
\* started to postpone WNM-Notification frame sending by 100 ms so that
the STA has some more time to configure the key before this frame is
received after the 4-way handshake
\* VHT: added interoperability workaround for 80+80 and 160 MHz channels
\* extended VLAN support (per-STA vif, etc.)
\* fixed PMKID derivation with SAE
\* nl80211
- added support for full station state operations
- fix IEEE 802.1X/WEP EAP reauthentication and rekeying to use
unencrypted EAPOL frames
\* added initial MBO support; number of extensions to WNM BSS Transition
Management
\* added initial functionality for location related operations
\* added assocresp\_elements parameter to allow vendor specific elements
to be added into (Re)Association Response frames
\* improved Public Action frame addressing
- use Address 3 = wildcard BSSID in GAS response if a query from an
unassociated STA used that address
- fix TX status processing for Address 3 = wildcard BSSID
- add gas\_address3 configuration parameter to control Address 3
behavior
\* added command line parameter -i to override interface parameter in
hostapd.conf
\* added command completion support to hostapd\_cli
\* added passive client taxonomy determination (CONFIG\_TAXONOMY=y
compile option and "SIGNATURE " control interface command)
\* number of small fixes
2015-09-27 - v2.5
\* fixed WPS UPnP vulnerability with HTTP chunked transfer encoding
[http://w1.fi/security/2015-2/] (CVE-2015-4141)
\* fixed WMM Action frame parser
[http://w1.fi/security/2015-3/] (CVE-2015-4142)
\* fixed EAP-pwd server missing payload length validation
[http://w1.fi/security/2015-4/]
(CVE-2015-4143, CVE-2015-4144, CVE-2015-4145)
\* fixed validation of WPS and P2P NFC NDEF record payload length
[http://w1.fi/security/2015-5/]
\* nl80211:
- fixed vendor command handling to check OUI properly
\* fixed hlr\_auc\_gw build with OpenSSL
\* hlr\_auc\_gw: allow Milenage RES length to be reduced
\* disable HT for a station that does not support WMM/QoS
\* added support for hashed password (NtHash) in EAP-pwd server
\* fixed and extended dynamic VLAN cases
\* added EAP-EKE server support for deriving Session-Id
\* set Acct-Session-Id to a random value to make it more likely to be
unique even if the device does not have a proper clock
\* added more 2.4 GHz channels for 20/40 MHz HT co-ex scan
\* modified SAE routines to be more robust and PWE generation to be
stronger against timing attacks
\* added support for Brainpool Elliptic Curves with SAE
\* increases maximum value accepted for cwmin/cwmax
\* added support for CCMP-256 and GCMP-256 as group ciphers with FT
\* added Fast Session Transfer (FST) module
\* removed optional fields from RSNE when using FT with PMF
(workaround for interoperability issues with iOS 8.4)
\* added EAP server support for TLS session resumption
\* fixed key derivation for Suite B 192-bit AKM (this breaks
compatibility with the earlier version)
\* added mechanism to track unconnected stations and do minimal band
steering
\* number of small fixes
2015-03-15 - v2.4
\* allow OpenSSL cipher configuration to be set for internal EAP server
(openssl\_ciphers parameter)
\* fixed number of small issues based on hwsim test case failures and
static analyzer reports
\* fixed Accounting-Request to not include duplicated Acct-Session-Id
\* add support for Acct-Multi-Session-Id in RADIUS Accounting messages
\* add support for PMKSA caching with SAE
\* add support for generating BSS Load element (bss\_load\_update\_period)
\* fixed channel switch from VHT to HT
\* add INTERFACE-ENABLED and INTERFACE-DISABLED ctrl\_iface events
\* add support for learning STA IPv4/IPv6 addresses and configuring
ProxyARP support
\* dropped support for the madwifi driver interface
\* add support for Suite B (128-bit and 192-bit level) key management and
cipher suites
\* fixed a regression with driver=wired
\* extend EAPOL-Key msg 1/4 retry workaround for changing SNonce
\* add BSS\_TM\_REQ ctrl\_iface command to send BSS Transition Management
Request frames and BSS-TM-RESP event to indicate response to such
frame
\* add support for EAP Re-Authentication Protocol (ERP)
\* fixed AP IE in EAPOL-Key 3/4 when both WPA and FT was enabled
\* fixed a regression in HT 20/40 coex Action frame parsing
\* set stdout to be line-buffered
\* add support for vendor specific VHT extension to enable 256 QAM rates
(VHT-MCS 8 and 9) on 2.4 GHz band
\* RADIUS DAS:
- extend Disconnect-Request processing to allow matching of multiple
sessions
- support Acct-Multi-Session-Id as an identifier
- allow PMKSA cache entry to be removed without association
\* expire hostapd STA entry if kernel does not have a matching entry
\* allow chanlist to be used to specify a subset of channels for ACS
\* improve ACS behavior on 2.4 GHz band and allow channel bias to be
configured with acs\_chan\_bias parameter
\* do not reply to a Probe Request frame that includes DSS Parameter Set
element in which the channel does not match the current operating
channel
\* add UPDATE\_BEACON ctrl\_iface command; this can be used to force Beacon
frame contents to be updated and to start beaconing on an interface
that used start\_disabled=1
\* fixed some RADIUS server failover cases
2014-10-09 - v2.3
\* fixed number of minor issues identified in static analyzer warnings
\* fixed DFS and channel switch operation for multi-BSS cases
\* started to use constant time comparison for various password and hash
values to reduce possibility of any externally measurable timing
differences
\* extended explicit clearing of freed memory and expired keys to avoid
keeping private data in memory longer than necessary
\* added support for number of new RADIUS attributes from RFC 7268
(Mobility-Domain-Id, WLAN-HESSID, WLAN-Pairwise-Cipher,
WLAN-Group-Cipher, WLAN-AKM-Suite, WLAN-Group-Mgmt-Pairwise-Cipher)
\* fixed GET\_CONFIG wpa\_pairwise\_cipher value
\* added code to clear bridge FDB entry on station disconnection
\* fixed PMKSA cache timeout from Session-Timeout for WPA/WPA2 cases
\* fixed OKC PMKSA cache entry fetch to avoid a possible infinite loop
in case the first entry does not match
\* fixed hostapd\_cli action script execution to use more robust mechanism
(CVE-2014-3686)
2014-06-04 - v2.2
\* fixed SAE confirm-before-commit validation to avoid a potential
segmentation fault in an unexpected message sequence that could be
triggered remotely
\* extended VHT support
- Operating Mode Notification
- Power Constraint element (local\_pwr\_constraint)
- Spectrum management capability (spectrum\_mgmt\_required=1)
- fix VHT80 segment picking in ACS
- fix vht\_capab 'Maximum A-MPDU Length Exponent' handling
- fix VHT20
\* fixed HT40 co-ex scan for some pri/sec channel switches
\* extended HT40 co-ex support to allow dynamic channel width changes
during the lifetime of the BSS
\* fixed HT40 co-ex support to check for overlapping 20 MHz BSS
\* fixed MSCHAP UTF-8 to UCS-2 conversion for three-byte encoding;
this fixes password with include UTF-8 characters that use
three-byte encoding EAP methods that use NtPasswordHash
\* reverted TLS certificate validation step change in v2.1 that rejected
any AAA server certificate with id-kp-clientAuth even if
id-kp-serverAuth EKU was included
\* fixed STA validation step for WPS ER commands to prevent a potential
crash if an ER sends an unexpected PutWLANResponse to a station that
is disassociated, but not fully removed
\* enforce full EAP authentication after RADIUS Disconnect-Request by
removing the PMKSA cache entry
\* added support for NAS-IP-Address, NAS-identifier, and NAS-IPv6-Address
in RADIUS Disconnect-Request
\* added mechanism for removing addresses for MAC ACLs by prefixing an
entry with "-"
\* Interworking/Hotspot 2.0 enhancements
- support Hotspot 2.0 Release 2
\* OSEN network for online signup connection
\* subscription remediation (based on RADIUS server request or
control interface HS20\_WNM\_NOTIF for testing purposes)
\* Hotspot 2.0 release number indication in WFA RADIUS VSA
\* deauthentication request (based on RADIUS server request or
control interface WNM\_DEAUTH\_REQ for testing purposes)
\* Session Info URL RADIUS AVP to trigger ESS Disassociation Imminent
\* hs20\_icon config parameter to configure icon files for OSU
\* osu\_\* config parameters for OSU Providers list
- do not use Interworking filtering rules on Probe Request if
Interworking is disabled to avoid interop issues
\* added/fixed nl80211 functionality
- AP interface teardown optimization
- support vendor specific driver command
(VENDOR   [])
\* fixed PMF protection of Deauthentication frame when this is triggered
by session timeout
\* internal TLS implementation enhancements/fixes
- add SHA256-based cipher suites
- add DHE-RSA cipher suites
- fix X.509 validation of PKCS#1 signature to check for extra data
\* RADIUS server functionality
- add minimal RADIUS accounting server support (hostapd-as-server);
this is mainly to enable testing coverage with hwsim scripts
- allow authentication log to be written into SQLite database
- added option for TLS protocol testing of an EAP peer by simulating
various misbehaviors/known attacks
- MAC ACL support for testing purposes
\* fixed PTK derivation for CCMP-256 and GCMP-256
\* extended WPS per-station PSK to support ER case
\* added option to configure the management group cipher
(group\_mgmt\_cipher=AES-128-CMAC (default), BIP-GMAC-128, BIP-GMAC-256,
BIP-CMAC-256)
\* fixed AP mode default TXOP Limit values for AC\_VI and AC\_VO (these
were rounded incorrectly)
\* added support for postponing FT response in case PMK-R1 needs to be
pulled from R0KH
\* added option to advertise 40 MHz intolerant HT capability with
ht\_capab=[40-INTOLERANT]
\* remove WPS 1.0 only support, i.e., WSC 2.0 support is now enabled
whenever CONFIG\_WPS=y is set
\* EAP-pwd fixes
- fix possible segmentation fault on EAP method deinit if an invalid
group is negotiated
\* fixed RADIUS client retransmit/failover behavior
- there was a potential ctash due to freed memory being accessed
- failover to a backup server mechanism did not work properly
\* fixed a possible crash on double DISABLE command when multiple BSSes
are enabled
\* fixed a memory leak in SAE random number generation
\* fixed GTK rekeying when the station uses FT protocol
\* fixed off-by-one bounds checking in printf\_encode()
- this could result in deinial of service in some EAP server cases
\* various bug fixes
2014-02-04 - v2.1
\* added support for simultaneous authentication of equals (SAE) for
stronger password-based authentication with WPA2-Personal
\* added nl80211 functionality
- VHT configuration for nl80211
- support split wiphy dump
- driver-based MAC ACL
- QoS Mapping configuration
\* added fully automated regression testing with mac80211\_hwsim
\* allow ctrl\_iface group to be specified on command line (-G)
\* allow single hostapd process to control independent WPS interfaces
(wps\_independent=1) instead of synchronized operations through all
configured interfaces within a process
\* avoid processing received management frames multiple times when using
nl80211 with multiple BSSes
\* added support for DFS (processing radar detection events, CAC, channel
re-selection)
\* added EAP-EKE server
\* added automatic channel selection (ACS)
\* added option for using per-BSS (vif) configuration files with
-b:
\* extended global control interface ADD/REMOVE commands to allow BSSes
of a radio to be removed individually without having to add/remove all
other BSSes of the radio at the same time
\* added support for sending debug info to Linux tracing (-T on command
line)
\* replace dump\_file functionality with same information being available
through the hostapd control interface
\* added support for using Protected Dual of Public Action frames for
GAS/ANQP exchanges when PMF is enabled
\* added support for WPS+NFC updates
- improved protocol
- option to fetch and report alternative carrier records for external
NFC operations
\* various bug fixes
2013-01-12 - v2.0
\* added AP-STA-DISCONNECTED ctrl\_iface event
\* improved debug logging (human readable event names, interface name
included in more entries)
\* added number of small changes to make it easier for static analyzers
to understand the implementation
\* added a workaround for Windows 7 Michael MIC failure reporting and
use of the Secure bit in EAPOL-Key msg 3/4
\* fixed number of small bugs (see git logs for more details)
\* changed OpenSSL to read full certificate chain from server\_cert file
\* nl80211: number of updates to use new cfg80211/nl80211 functionality
- replace monitor interface with nl80211 commands
- additional information for driver-based AP SME
\* EAP-pwd:
- fix KDF for group 21 and zero-padding
- added support for fragmentation
- increased maximum number of hunting-and-pecking iterations
\* avoid excessive Probe Response retries for broadcast Probe Request
frames (only with drivers using hostapd SME/MLME)
\* added preliminary support for using TLS v1.2 (CONFIG\_TLSV12=y)
\* fixed WPS operation stopping on dual concurrent AP
\* added wps\_rf\_bands configuration parameter for overriding RF Bands
value for WPS
\* added support for getting per-device PSK from RADIUS Tunnel-Password
\* added support for libnl 3.2 and newer
\* increased initial group key handshake retransmit timeout to 500 ms
\* added a workaround for 4-way handshake to update SNonce even after
having sent EAPOL-Key 3/4 to avoid issues with some supplicant
implementations that can change SNonce for each EAP-Key 2/4
\* added a workaround for EAPOL-Key 4/4 using incorrect type value in
WPA2 mode (some deployed stations use WPA type in that message)
\* added a WPS workaround for mixed mode AP Settings with Windows 7
\* changed WPS AP PIN disabling mechanism to disable the PIN after 10
consecutive failures in addition to using the exponential lockout
period
\* added support for WFA Hotspot 2.0
- GAS/ANQP advertisement of network information
- disable\_dgaf parameter to disable downstream group-addressed
forwarding
\* simplified licensing terms by selecting the BSD license as the only
alternative
\* EAP-SIM: fixed re-authentication not to update pseudonym
\* EAP-SIM: use Notification round before EAP-Failure
\* EAP-AKA: added support for AT\_COUNTER\_TOO\_SMALL
\* EAP-AKA: skip AKA/Identity exchange if EAP identity is recognized
\* EAP-AKA': fixed identity for MK derivation
\* EAP-AKA': updated to RFC 5448 (username prefixes changed); note: this
breaks interoperability with older versions
\* EAP-SIM/AKA: allow pseudonym to be used after unknown reauth id
\* changed ANonce to be a random number instead of Counter-based
\* added support for canceling WPS operations with hostapd\_cli wps\_cancel
\* fixed EAP/WPS to PSK transition on reassociation in cases where
deauthentication is missed
\* hlr\_auc\_gw enhancements:
- a new command line parameter -u can be used to enable updating of
SQN in Milenage file
- use 5 bit IND for SQN updates
- SQLite database can now be used to store Milenage information
\* EAP-SIM/AKA DB: added optional use of SQLite database for pseudonyms
and reauth data
\* added support for Chargeable-User-Identity (RFC 4372)
\* added radius\_auth\_req\_attr and radius\_acct\_req\_attr configuration
parameters to allow adding/overriding of RADIUS attributes in
Access-Request and Accounting-Request packets
\* added support for RADIUS dynamic authorization server (RFC 5176)
\* added initial support for WNM operations
- BSS max idle period
- WNM-Sleep Mode
\* added new WPS NFC ctrl\_iface mechanism
- removed obsoleted WPS\_OOB command (including support for deprecated
UFD config\_method)
\* added FT support for drivers that implement MLME internally
\* added SA Query support for drivers that implement MLME internally
\* removed default ACM=1 from AC\_VO and AC\_VI
\* changed VENDOR-TEST EAP method to use proper private enterprise number
(this will not interoperate with older versions)
\* added hostapd.conf parameter vendor\_elements to allow arbitrary vendor
specific elements to be added to the Beacon and Probe Response frames
\* added support for configuring GCMP cipher for IEEE 802.11ad
\* added support for 256-bit AES with internal TLS implementation
\* changed EAPOL transmission to use AC\_VO if WMM is active
\* fixed EAP-TLS/PEAP/TTLS/FAST server to validate TLS Message Length
correctly; invalid messages could have caused the hostapd process to
terminate before this fix [CVE-2012-4445]
\* limit number of active wildcard PINs for WPS Registrar to one to avoid
confusing behavior with multiple wildcard PINs
\* added a workaround for WPS PBC session overlap detection to avoid
interop issues with deployed station implementations that do not
remove active PBC indication from Probe Request frames properly
\* added support for using SQLite for the eap\_user database
\* added Acct-Session-Id attribute into Access-Request messages
\* fixed EAPOL frame transmission to non-QoS STAs with nl80211
(do not send QoS frames if the STA did not negotiate use of QoS for
this association)
2012-05-10 - v1.0
\* Add channel selection support in hostapd. See hostapd.conf.
\* Add support for IEEE 802.11v Time Advertisement mechanism with UTC
TSF offset. See hostapd.conf for config info.
\* Delay STA entry removal until Deauth/Disassoc TX status in AP mode.
This allows the driver to use PS buffering of Deauthentication and
Disassociation frames when the STA is in power save sleep. Only
available with drivers that provide TX status events for Deauth/
Disassoc frames (nl80211).
\* Allow PMKSA caching to be disabled on the Authenticator. See
hostap.conf config parameter disable\_pmksa\_caching.
\* atheros: Add support for IEEE 802.11w configuration.
\* bsd: Add support for setting HT values in IFM\_MMASK.
\* Allow client isolation to be configured with ap\_isolate. Client
isolation can be used to prevent low-level bridging of frames
between associated stations in the BSS. By default, this bridging
is allowed.
\* Allow coexistance of HT BSSes with WEP/TKIP BSSes.
\* Add require\_ht config parameter, which can be used to configure
hostapd to reject association with any station that does not support
HT PHY.
\* Add support for writing debug log to a file using "-f" option. Also
add relog CLI command to re-open the log file.
\* Add bridge handling for WDS STA interfaces. By default they are
added to the configured bridge of the AP interface (if present),
but the user can also specify a separate bridge using cli command
wds\_bridge.
\* hostapd\_cli:
- Add wds\_bridge command for specifying bridge for WDS STA
interfaces.
- Add relog command for reopening log file.
- Send AP-STA-DISCONNECTED event when an AP disconnects a station
due to inactivity.
- Add wps\_config ctrl\_interface command for configuring AP. This
command can be used to configure the AP using the internal WPS
registrar. It works in the same way as new AP settings received
from an ER.
- Many WPS/WPS ER commands - see WPS/WPS ER sections for details.
- Add command get version, that returns hostapd version string.
\* WNM: Add BSS Transition Management Request for ESS Disassoc Imminent.
Use hostapd\_cli ess\_disassoc (STA addr) (URL) to send the
notification to the STA.
\* Allow AP mode to disconnect STAs based on low ACK condition (when
the data connection is not working properly, e.g., due to the STA
going outside the range of the AP). Disabled by default, enable by
config option disassoc\_low\_ack.
\* Add WPA\_IGNORE\_CONFIG\_ERRORS build option to continue in case of bad
config file.
\* WPS:
- Send AP Settings as a wrapped Credential attribute to ctrl\_iface
in WPS-NEW-AP-SETTINGS.
- Dispatch more WPS events through hostapd ctrl\_iface.
- Add mechanism for indicating non-standard WPS errors.
- Change concurrent radio AP to use only one WPS UPnP instance.
- Add wps\_check\_pin command for processing PIN from user input.
UIs can use this command to process a PIN entered by a user and to
validate the checksum digit (if present).
- Add hostap\_cli get\_config command to display current AP config.
- Add new hostapd\_cli command, wps\_ap\_pin, to manage AP PIN at
runtime and support dynamic AP PIN management.
- Disable AP PIN after 10 consecutive failures. Slow down attacks
on failures up to 10.
- Allow AP to start in Enrollee mode without AP PIN for probing,
to be compatible with Windows 7.
- Add Config Error into WPS-FAIL events to provide more info
to the user on how to resolve the issue.
- When controlling multiple interfaces:
- apply WPS commands to all interfaces configured to use WPS
- apply WPS config changes to all interfaces that use WPS
- when an attack is detected on any interface, disable AP PIN on
all interfaces
\* WPS ER:
- Show SetSelectedRegistrar events as ctrl\_iface events.
- Add special AP Setup Locked mode to allow read only ER.
ap\_setup\_locked=2 can now be used to enable a special mode where
WPS ER can learn the current AP settings, but cannot change them.
\* WPS 2.0: Add support for WPS 2.0 (CONFIG\_WPS2)
- Add build option CONFIG\_WPS\_EXTENSIBILITY\_TESTING to enable tool
for testing protocol extensibility.
- Add build option CONFIG\_WPS\_STRICT to allow disabling of WPS
workarounds.
- Add support for AuthorizedMACs attribute.
\* TDLS:
- Allow TDLS use or TDLS channel switching in the BSS to be
prohibited in the BSS, using config params tdls\_prohibit and
tdls\_prohibit\_chan\_switch.
\* EAP server: Add support for configuring fragment size (see
fragment\_size in hostapd.conf).
\* wlantest: Add a tool wlantest for IEEE802.11 protocol testing.
wlantest can be used to capture frames from a monitor interface
for realtime capturing or from pcap files for offline analysis.
\* Interworking: Support added for 802.11u. Enable in .config with
CONFIG\_INTERWORKING. See hostapd.conf for config parameters for
interworking.
\* Android: Add build and runtime support for Android hostapd.
\* Add a new debug message level for excessive information. Use
-ddd to enable.
\* TLS: Add support for tls\_disable\_time\_checks=1 in client mode.
\* Internal TLS:
- Add support for TLS v1.1 (RFC 4346). Enable with build parameter
CONFIG\_TLSV11.
- Add domainComponent parser for X.509 names
\* Reorder some IEs to get closer to IEEE 802.11 standard. Move
WMM into end of Beacon, Probe Resp and (Re)Assoc Resp frames.
Move HT IEs to be later in (Re)Assoc Resp.
\* Many bugfixes.
2010-04-18 - v0.7.2
\* fix WPS internal Registrar use when an external Registrar is also
active
\* bsd: Cleaned up driver wrapper and added various low-level
configuration options
\* TNC: fixed issues with fragmentation
\* EAP-TNC: add Flags field into fragment acknowledgement (needed to
interoperate with other implementations; may potentially breaks
compatibility with older wpa\_supplicant/hostapd versions)
\* cleaned up driver wrapper API for multi-BSS operations
\* nl80211: fix multi-BSS and VLAN operations
\* fix number of issues with IEEE 802.11r/FT; this version is not
backwards compatible with old versions
\* add SA Query Request processing in AP mode (IEEE 802.11w)
\* fix IGTK PN in group rekeying (IEEE 802.11w)
\* fix WPS PBC session overlap detection to use correct attribute
\* hostapd\_notif\_Assoc() can now be called with all IEs to simplify
driver wrappers
\* work around interoperability issue with some WPS External Registrar
implementations
\* nl80211: fix WPS IE update
\* hostapd\_cli: add support for action script operations (run a script
on hostapd events)
\* fix DH padding with internal crypto code (mainly, for WPS)
\* fix WPS association with both WPS IE and WPA/RSN IE present with
driver wrappers that use hostapd MLME (e.g., nl80211)
2010-01-16 - v0.7.1
\* cleaned up driver wrapper API (struct wpa\_driver\_ops); the new API
is not fully backwards compatible, so out-of-tree driver wrappers
will need modifications
\* cleaned up various module interfaces
\* merge hostapd and wpa\_supplicant developers' documentation into a
single document
\* fixed HT Capabilities IE with nl80211 drivers
\* moved generic AP functionality code into src/ap
\* WPS: handle Selected Registrar as union of info from all Registrars
\* remove obsolete Prism54.org driver wrapper
\* added internal debugging mechanism with backtrace support and memory
allocation/freeing validation, etc. tests (CONFIG\_WPA\_TRACE=y)
\* EAP-FAST server: piggyback Phase 2 start with the end of Phase 1
\* WPS: add support for dynamically selecting whether to provision the
PSK as an ASCII passphrase or PSK
\* added support for WDS (4-address frame) mode with per-station virtual
interfaces (wds\_sta=1 in config file; only supported with
driver=nl80211 for now)
\* fixed WPS Probe Request processing to handle missing required
attribute
\* fixed PKCS#12 use with OpenSSL 1.0.0
\* detect bridge interface automatically so that bridge parameter in
hostapd.conf becomes optional (though, it may now be used to
automatically add then WLAN interface into a bridge with
driver=nl80211)
2009-11-21 - v0.7.0
\* increased hostapd\_cli ping interval to 5 seconds and made this
configurable with a new command line options (-G)
\* driver\_nl80211: use Linux socket filter to improve performance
\* added support for external Registrars with WPS (UPnP transport)
\* 802.11n: scan for overlapping BSSes before starting 20/40 MHz channel
\* driver\_nl80211: fixed STA accounting data collection (TX/RX bytes
reported correctly; TX/RX packets not yet available from kernel)
\* added support for WPS USBA out-of-band mechanism with USB Flash
Drives (UFD) (CONFIG\_WPS\_UFD=y)
\* fixed EAPOL/EAP reauthentication when using an external RADIUS
authentication server
\* fixed TNC with EAP-TTLS
\* fixed IEEE 802.11r key derivation function to match with the standard
(note: this breaks interoperability with previous version) [Bug 303]
\* fixed SHA-256 based key derivation function to match with the
standard when using CCMP (for IEEE 802.11r and IEEE 802.11w)
(note: this breaks interoperability with previous version) [Bug 307]
\* added number of code size optimizations to remove unnecessary
functionality from the program binary based on build configuration
(part of this automatic; part configurable with CONFIG\_NO\_\* build
options)
\* use shared driver wrapper files with wpa\_supplicant
\* driver\_nl80211: multiple updates to provide support for new Linux
nl80211/mac80211 functionality
\* updated management frame protection to use IEEE Std 802.11w-2009
\* fixed number of small WPS issues and added workarounds to
interoperate with common deployed broken implementations
\* added some IEEE 802.11n co-existence rules to disable 40 MHz channels
or modify primary/secondary channels if needed based on neighboring
networks
\* added support for NFC out-of-band mechanism with WPS
\* added preliminary support for IEEE 802.11r RIC processing
2009-01-06 - v0.6.7
\* added support for Wi-Fi Protected Setup (WPS)
(hostapd can now be configured to act as an integrated WPS Registrar
and provision credentials for WPS Enrollees using PIN and PBC
methods; external wireless Registrar can configure the AP, but
external WLAN Manager Registrars are not supported); WPS support can
be enabled by adding CONFIG\_WPS=y into .config and setting the
runtime configuration variables in hostapd.conf (see WPS section in
the example configuration file); new hostapd\_cli commands wps\_pin and
wps\_pbc are used to configure WPS negotiation; see README-WPS for
more details
\* added IEEE 802.11n HT capability configuration (ht\_capab)
\* added support for generating Country IE based on nl80211 regulatory
information (added if ieee80211d=1 in configuration)
\* fixed WEP authentication (both Open System and Shared Key) with
mac80211
\* added support for EAP-AKA' (draft-arkko-eap-aka-kdf)
\* added support for using driver\_test over UDP socket
\* changed EAP-GPSK to use the IANA assigned EAP method type 51
\* updated management frame protection to use IEEE 802.11w/D7.0
\* fixed retransmission of EAP requests if no response is received
2008-11-23 - v0.6.6
\* added a new configuration option, wpa\_ptk\_rekey, that can be used to
enforce frequent PTK rekeying, e.g., to mitigate some attacks against
TKIP deficiencies
\* updated OpenSSL code for EAP-FAST to use an updated version of the
session ticket overriding API that was included into the upstream
OpenSSL 0.9.9 tree on 2008-11-15 (no additional OpenSSL patch is
needed with that version anymore)
\* changed channel flags configuration to read the information from
the driver (e.g., via driver\_nl80211 when using mac80211) instead of
using hostapd as the source of the regulatory information (i.e.,
information from CRDA is now used with mac80211); this allows 5 GHz
channels to be used with hostapd (if allowed in the current
regulatory domain)
\* fixed EAP-TLS message processing for the last TLS message if it is
large enough to require fragmentation (e.g., if a large Session
Ticket data is included)
\* fixed listen interval configuration for nl80211 drivers
2008-11-01 - v0.6.5
\* added support for SHA-256 as X.509 certificate digest when using the
internal X.509/TLSv1 implementation
\* fixed EAP-FAST PAC-Opaque padding (0.6.4 broke this for some peer
identity lengths)
\* fixed internal TLSv1 implementation for abbreviated handshake (used
by EAP-FAST server)
\* added support for setting VLAN ID for STAs based on local MAC ACL
(accept\_mac\_file) as an alternative for RADIUS server-based
configuration
\* updated management frame protection to use IEEE 802.11w/D6.0
(adds a new association ping to protect against unauthenticated
authenticate or (re)associate request frames dropping association)
\* added support for using SHA256-based stronger key derivation for WPA2
(IEEE 802.11w)
\* added new "driver wrapper" for RADIUS-only configuration
(driver=none in hostapd.conf; CONFIG\_DRIVER\_NONE=y in .config)
\* fixed WPA/RSN IE validation to verify that the proto (WPA vs. WPA2)
is enabled in configuration
\* changed EAP-FAST configuration to use separate fields for A-ID and
A-ID-Info (eap\_fast\_a\_id\_info) to allow A-ID to be set to a fixed
16-octet len binary value for better interoperability with some peer
implementations; eap\_fast\_a\_id is now configured as a hex string
\* driver\_nl80211: Updated to match the current Linux mac80211 AP mode
configuration (wireless-testing.git and Linux kernel releases
starting from 2.6.29)
2008-08-10 - v0.6.4
\* added peer identity into EAP-FAST PAC-Opaque and skip Phase 2
Identity Request if identity is already known
\* added support for EAP Sequences in EAP-FAST Phase 2
\* added support for EAP-TNC (Trusted Network Connect)
(this version implements the EAP-TNC method and EAP-TTLS/EAP-FAST
changes needed to run two methods in sequence (IF-T) and the IF-IMV
and IF-TNCCS interfaces from TNCS)
\* added support for optional cryptobinding with PEAPv0
\* added fragmentation support for EAP-TNC
\* added support for fragmenting EAP-TTLS/PEAP/FAST Phase 2 (tunneled)
data
\* added support for opportunistic key caching (OKC)
2008-02-22 - v0.6.3
\* fixed Reassociation Response callback processing when using internal
MLME (driver\_{hostap,nl80211,test}.c)
\* updated FT support to use the latest draft, IEEE 802.11r/D9.0
\* copy optional Proxy-State attributes into RADIUS response when acting
as a RADIUS authentication server
\* fixed EAPOL state machine to handle a case in which no response is
received from the RADIUS authentication server; previous version
could have triggered a crash in some cases after a timeout
\* fixed EAP-SIM/AKA realm processing to allow decorated usernames to
be used
\* added a workaround for EAP-SIM/AKA peers that include incorrect null
termination in the username
\* fixed EAP-SIM/AKA protected result indication to include AT\_COUNTER
attribute in notification messages only when using fast
reauthentication
\* fixed EAP-SIM Start response processing for fast reauthentication
case
\* added support for pending EAP processing in EAP-{PEAP,TTLS,FAST}
phase 2 to allow EAP-SIM and EAP-AKA to be used as the Phase 2 method
2008-01-01 - v0.6.2
\* fixed EAP-SIM and EAP-AKA message parser to validate attribute
lengths properly to avoid potential crash caused by invalid messages
\* added data structure for storing allocated buffers (struct wpabuf);
this does not affect hostapd usage, but many of the APIs changed
and various interfaces (e.g., EAP) is not compatible with old
versions
\* added support for protecting EAP-AKA/Identity messages with
AT\_CHECKCODE (optional feature in RFC 4187)
\* added support for protected result indication with AT\_RESULT\_IND for
EAP-SIM and EAP-AKA (eap\_sim\_aka\_result\_ind=1)
\* added support for configuring EAP-TTLS phase 2 non-EAP methods in
EAP server configuration; previously all four were enabled for every
phase 2 user, now all four are disabled by default and need to be
enabled with new method names TTLS-PAP, TTLS-CHAP, TTLS-MSCHAP,
TTLS-MSCHAPV2
\* removed old debug printing mechanism and the related 'debug'
parameter in the configuration file; debug verbosity is now set with
-d (or -dd) command line arguments
\* added support for EAP-IKEv2 (draft-tschofenig-eap-ikev2-15.txt);
only shared key/password authentication is supported in this version
2007-11-24 - v0.6.1
\* added experimental, integrated TLSv1 server implementation with the
needed X.509/ASN.1/RSA/bignum processing (this can be enabled by
setting CONFIG\_TLS=internal and CONFIG\_INTERNAL\_LIBTOMMATH=y in
.config); this can be useful, e.g., if the target system does not
have a suitable TLS library and a minimal code size is required
\* added support for EAP-FAST server method to the integrated EAP
server
\* updated EAP Generalized Pre-Shared Key (EAP-GPSK) to use the latest
draft (draft-ietf-emu-eap-gpsk-07.txt)
\* added a new configuration parameter, rsn\_pairwise, to allow different
pairwise cipher suites to be enabled for WPA and RSN/WPA2
(note: if wpa\_pairwise differs from rsn\_pairwise, the driver will
either need to support this or will have to use the WPA/RSN IEs from
hostapd; currently, the included madwifi and bsd driver interfaces do
not have support for this)
\* updated FT support to use the latest draft, IEEE 802.11r/D8.0
2007-05-28 - v0.6.0
\* added experimental IEEE 802.11r/D6.0 support
\* updated EAP-SAKE to RFC 4763 and the IANA-allocated EAP type 48
\* updated EAP-PSK to use the IANA-allocated EAP type 47
\* fixed EAP-PSK bit ordering of the Flags field
\* fixed configuration reloading (SIGHUP) to re-initialize WPA PSKs
by reading wpa\_psk\_file [Bug 181]
\* fixed EAP-TTLS AVP parser processing for too short AVP lengths
\* fixed IPv6 connection to RADIUS accounting server
\* updated EAP Generalized Pre-Shared Key (EAP-GPSK) to use the latest
draft (draft-ietf-emu-eap-gpsk-04.txt)
\* hlr\_auc\_gw: read GSM triplet file into memory and rotate through the
entries instead of only using the same three triplets every time
(this does not work properly with tests using multiple clients, but
provides bit better triplet data for testing a single client; anyway,
if a better quality triplets are needed, GSM-Milenage should be used
instead of hardcoded triplet file)
\* fixed EAP-MSCHAPv2 server to use a space between S and M parameters
in Success Request [Bug 203]
\* added support for sending EAP-AKA Notifications in error cases
\* updated to use IEEE 802.11w/D2.0 for management frame protection
(still experimental)
\* RADIUS server: added support for processing duplicate messages
(retransmissions from RADIUS client) by replying with the previous
reply
2006-11-24 - v0.5.6
\* added support for configuring and controlling multiple BSSes per
radio interface (bss= in hostapd.conf); this is only
available with Devicescape and test driver interfaces
\* fixed PMKSA cache update in the end of successful RSN
pre-authentication
\* added support for dynamic VLAN configuration (i.e., selecting VLAN-ID
for each STA based on RADIUS Access-Accept attributes); this requires
VLAN support from the kernel driver/802.11 stack and this is
currently only available with Devicescape and test driver interfaces
\* driver\_madwifi: fixed configuration of unencrypted modes (plaintext
and IEEE 802.1X without WEP)
\* removed STAKey handshake since PeerKey handshake has replaced it in
IEEE 802.11ma and there are no known deployments of STAKey
\* updated EAP Generalized Pre-Shared Key (EAP-GPSK) to use the latest
draft (draft-ietf-emu-eap-gpsk-01.txt)
\* added preliminary implementation of IEEE 802.11w/D1.0 (management
frame protection)
(Note: this requires driver support to work properly.)
(Note2: IEEE 802.11w is an unapproved draft and subject to change.)
\* hlr\_auc\_gw: added support for GSM-Milenage (for EAP-SIM)
\* hlr\_auc\_gw: added support for reading per-IMSI Milenage keys and
parameters from a text file to make it possible to implement proper
GSM/UMTS authentication server for multiple SIM/USIM cards using
EAP-SIM/EAP-AKA
\* fixed session timeout processing with drivers that do not use
ieee802\_11.c (e.g., madwifi)
2006-08-27 - v0.5.5
\* added 'hostapd\_cli new\_sta ' command for adding a new STA into
hostapd (e.g., to initialize wired network authentication based on an
external signal)
\* fixed hostapd to add PMKID KDE into 4-Way Handshake Message 1 when
using WPA2 even if PMKSA caching is not used
\* added -P argument for hostapd to write the current process
id into a file
\* added support for RADIUS Authentication Server MIB (RFC 2619)
2006-06-20 - v0.5.4
\* fixed nt\_password\_hash build [Bug 144]
\* added PeerKey handshake implementation for IEEE 802.11e
direct link setup (DLS) to replace STAKey handshake
\* added support for EAP Generalized Pre-Shared Key (EAP-GPSK,
draft-clancy-emu-eap-shared-secret-00.txt)
\* fixed a segmentation fault when RSN pre-authentication was completed
successfully [Bug 152]
2006-04-27 - v0.5.3
\* do not build nt\_password\_hash and hlr\_auc\_gw by default to avoid
requiring a TLS library for a successful build; these programs can be
build with 'make nt\_password\_hash' and 'make hlr\_auc\_gw'
\* added a new configuration option, eapol\_version, that can be used to
set EAPOL version to 1 (default is 2) to work around broken client
implementations that drop EAPOL frames which use version number 2
[Bug 89]
\* added support for EAP-SAKE (no EAP method number allocated yet, so
this is using the same experimental type 255 as EAP-PSK)
\* fixed EAP-MSCHAPv2 message length validation
2006-03-19 - v0.5.2
\* fixed stdarg use in hostapd\_logger(): if both stdout and syslog
logging was enabled, hostapd could trigger a segmentation fault in
vsyslog on some CPU -- C library combinations
\* moved HLR/AuC gateway implementation for EAP-SIM/AKA into an external
program to make it easier to use for implementing real SS7 gateway;
eap\_sim\_db is not anymore used as a file name for GSM authentication
triplets; instead, it is path to UNIX domain socket that will be used
to communicate with the external gateway program (e.g., hlr\_auc\_gw)
\* added example HLR/AuC gateway implementation, hlr\_auc\_gw, that uses
local information (GSM authentication triplets from a text file and
hardcoded AKA authentication data); this can be used to test EAP-SIM
and EAP-AKA
\* added Milenage algorithm (example 3GPP AKA algorithm) to hlr\_auc\_gw
to make it possible to test EAP-AKA with real USIM cards (this is
disabled by default; define AKA\_USE\_MILENAGE when building hlr\_auc\_gw
to enable this)
\* driver\_madwifi: added support for getting station RSN IE from
madwifi-ng svn r1453 and newer; this fixes RSN that was apparently
broken with earlier change (r1357) in the driver
\* changed EAP method registration to use a dynamic list of methods
instead of a static list generated at build time
\* fixed WPA message 3/4 not to encrypt Key Data field (WPA IE)
[Bug 125]
\* added ap\_max\_inactivity configuration parameter
2006-01-29 - v0.5.1
\* driver\_test: added better support for multiple APs and STAs by using
a directory with sockets that include MAC address for each device in
the name (test\_socket=DIR:/tmp/test)
\* added support for EAP expanded type (vendor specific EAP methods)
2005-12-18 - v0.5.0 (beginning of 0.5.x development releases)
\* added experimental STAKey handshake implementation for IEEE 802.11e
direct link setup (DLS); note: this is disabled by default in both
build and runtime configuration (can be enabled with CONFIG\_STAKEY=y
and stakey=1)
\* added support for EAP methods to use callbacks to external programs
by buffering a pending request and processing it after the EAP method
is ready to continue
\* improved EAP-SIM database interface to allow external request to GSM
HLR/AuC without blocking hostapd process
\* added support for using EAP-SIM pseudonyms and fast re-authentication
\* added support for EAP-AKA in the integrated EAP authenticator
\* added support for matching EAP identity prefixes (e.g., "1"\*) in EAP
user database to allow EAP-SIM/AKA selection without extra roundtrip
for EAP-Nak negotiation
\* added support for storing EAP user password as NtPasswordHash instead
of plaintext password when using MSCHAP or MSCHAPv2 for
authentication (hash:<16-octet hex value>); added nt\_password\_hash
tool for hashing password to generate NtPasswordHash
2005-11-20 - v0.4.7 (beginning of 0.4.x stable releases)
\* driver\_wired: fixed EAPOL sending to optionally use PAE group address
as the destination instead of supplicant MAC address; this is
disabled by default, but should be enabled with use\_pae\_group\_addr=1
in configuration file if the wired interface is used by only one
device at the time (common switch configuration)
\* driver\_madwifi: configure driver to use TKIP countermeasures in order
to get correct behavior (IEEE 802.11 association failing; previously,
association succeeded, but hostpad forced disassociation immediately)
\* driver\_madwifi: added support for madwifi-ng
2005-10-27 - v0.4.6
\* added support for replacing user identity from EAP with RADIUS
User-Name attribute from Access-Accept message, if that is included,
for the RADIUS accounting messages (e.g., for EAP-PEAP/TTLS to get
tunneled identity into accounting messages when the RADIUS server
does not support better way of doing this with Class attribute)
\* driver\_madwifi: fixed EAPOL packet receive for configuration where
ath# is part of a bridge interface
\* added a configuration file and log analyzer script for logwatch
\* fixed EAPOL state machine step function to process all state
transitions before processing new events; this resolves a race
condition in which EAPOL-Start message could trigger hostapd to send
two EAP-Response/Identity frames to the authentication server
2005-09-25 - v0.4.5
\* added client CA list to the TLS certificate request in order to make
it easier for the client to select which certificate to use
\* added experimental support for EAP-PSK
\* added support for WE-19 (hostap, madwifi)
2005-08-21 - v0.4.4
\* fixed build without CONFIG\_RSN\_PREAUTH
\* fixed FreeBSD build
2005-06-26 - v0.4.3
\* fixed PMKSA caching to copy User-Name and Class attributes so that
RADIUS accounting gets correct information
\* start RADIUS accounting only after successful completion of WPA
4-Way Handshake if WPA-PSK is used
\* fixed PMKSA caching for the case where STA (re)associates without
first disassociating
2005-06-12 - v0.4.2
\* EAP-PAX is now registered as EAP type 46
\* fixed EAP-PAX MAC calculation
\* fixed EAP-PAX CK and ICK key derivation
\* renamed eap\_authenticator configuration variable to eap\_server to
better match with RFC 3748 (EAP) terminology
\* driver\_test: added support for testing hostapd with wpa\_supplicant
by using test driver interface without any kernel drivers or network
cards
2005-05-22 - v0.4.1
\* fixed RADIUS server initialization when only auth or acct server
is configured and the other one is left empty
\* driver\_madwifi: added support for RADIUS accounting
\* driver\_madwifi: added preliminary support for compiling against 'BSD'
branch of madwifi CVS tree
\* driver\_madwifi: fixed pairwise key removal to allow WPA reauth
without disassociation
\* added support for reading additional certificates from PKCS#12 files
and adding them to the certificate chain
\* fixed RADIUS Class attribute processing to only use Access-Accept
packets to update Class; previously, other RADIUS authentication
packets could have cleared Class attribute
\* added support for more than one Class attribute in RADIUS packets
\* added support for verifying certificate revocation list (CRL) when
using integrated EAP authenticator for EAP-TLS; new hostapd.conf
options 'check\_crl'; CRL must be included in the ca\_cert file for now
2005-04-25 - v0.4.0 (beginning of 0.4.x development releases)
\* added support for including network information into
EAP-Request/Identity message (ASCII-0 (nul) in eap\_message)
(e.g., to implement draft-adrange-eap-network-discovery-07.txt)
\* fixed a bug which caused some RSN pre-authentication cases to use
freed memory and potentially crash hostapd
\* fixed private key loading for cases where passphrase is not set
\* added support for sending TLS alerts and aborting authentication
when receiving a TLS alert
\* fixed WPA2 to add PMKSA cache entry when using integrated EAP
authenticator
\* fixed PMKSA caching (EAP authentication was not skipped correctly
with the new state machine changes from IEEE 802.1X draft)
\* added support for RADIUS over IPv6; own\_ip\_addr, auth\_server\_addr,
and acct\_server\_addr can now be IPv6 addresses (CONFIG\_IPV6=y needs
to be added to .config to include IPv6 support); for RADIUS server,
radius\_server\_ipv6=1 needs to be set in hostapd.conf and addresses
in RADIUS clients file can then use IPv6 format
\* added experimental support for EAP-PAX
\* replaced hostapd control interface library (hostapd\_ctrl.[ch]) with
the same implementation that wpa\_supplicant is using (wpa\_ctrl.[ch])
2005-02-12 - v0.3.7 (beginning of 0.3.x stable releases)
2005-01-23 - v0.3.5
\* added support for configuring a forced PEAP version based on the
Phase 1 identity
\* fixed PEAPv1 to use tunneled EAP-Success/Failure instead of EAP-TLV
to terminate authentication
\* fixed EAP identifier duplicate processing with the new IEEE 802.1X
draft
\* clear accounting data in the driver when starting a new accounting
session
\* driver\_madwifi: filter wireless events based on ifindex to allow more
than one network interface to be used
\* fixed WPA message 2/4 processing not to cancel timeout for TimeoutEvt
setting if the packet does not pass MIC verification (e.g., due to
incorrect PSK); previously, message 1/4 was not tried again if an
invalid message 2/4 was received
\* fixed reconfiguration of RADIUS client retransmission timer when
adding a new message to the pending list; previously, timer was not
updated at this point and if there was a pending message with long
time for the next retry, the new message needed to wait that long for
its first retry, too
2005-01-09 - v0.3.4
\* added support for configuring multiple allowed EAP types for Phase 2
authentication (EAP-PEAP, EAP-TTLS)
\* fixed EAPOL-Start processing to trigger WPA reauthentication
(previously, only EAPOL authentication was done)
2005-01-02 - v0.3.3
\* added support for EAP-PEAP in the integrated EAP authenticator
\* added support for EAP-GTC in the integrated EAP authenticator
\* added support for configuring list of EAP methods for Phase 1 so that
the integrated EAP authenticator can, e.g., use the wildcard entry
for EAP-TLS and EAP-PEAP
\* added support for EAP-TTLS in the integrated EAP authenticator
\* added support for EAP-SIM in the integrated EAP authenticator
\* added support for using hostapd as a RADIUS authentication server
with the integrated EAP authenticator taking care of EAP
authentication (new hostapd.conf options: radius\_server\_clients and
radius\_server\_auth\_port); this is not included in default build; use
CONFIG\_RADIUS\_SERVER=y in .config to include
2004-12-19 - v0.3.2
\* removed 'daemonize' configuration file option since it has not really
been used at all for more than year
\* driver\_madwifi: fixed group key setup and added get\_ssid method
\* added support for EAP-MSCHAPv2 in the integrated EAP authenticator
2004-12-12 - v0.3.1
\* added support for integrated EAP-TLS authentication (new hostapd.conf
variables: ca\_cert, server\_cert, private\_key, private\_key\_passwd);
this enabled dynamic keying (WPA2/WPA/IEEE 802.1X/WEP) without
external RADIUS server
\* added support for reading PKCS#12 (PFX) files (as a replacement for
PEM/DER) to get certificate and private key (CONFIG\_PKCS12)
2004-12-05 - v0.3.0 (beginning of 0.3.x development releases)
\* added support for Acct-{Input,Output}-Gigawords
\* added support for Event-Timestamp (in RADIUS Accounting-Requests)
\* added support for RADIUS Authentication Client MIB (RFC2618)
\* added support for RADIUS Accounting Client MIB (RFC2620)
\* made EAP re-authentication period configurable (eap\_reauth\_period)
\* fixed EAPOL reauthentication to trigger WPA/WPA2 reauthentication
\* fixed EAPOL state machine to stop if STA is removed during
eapol\_sm\_step(); this fixes at least one segfault triggering bug with
IEEE 802.11i pre-authentication
\* added support for multiple WPA pre-shared keys (e.g., one for each
client MAC address or keys shared by a group of clients);
new hostapd.conf field wpa\_psk\_file for setting path to a text file
containing PSKs, see hostapd.wpa\_psk for an example
\* added support for multiple driver interfaces to allow hostapd to be
used with other drivers
\* added wired authenticator driver interface (driver=wired in
hostapd.conf, see wired.conf for example configuration)
\* added madwifi driver interface (driver=madwifi in hostapd.conf, see
madwifi.conf for example configuration; Note: include files from
madwifi project is needed for building and a configuration file,
.config, needs to be created in hostapd directory with
CONFIG\_DRIVER\_MADWIFI=y to include this driver interface in hostapd
build)
\* fixed an alignment issue that could cause SHA-1 to fail on some
platforms (e.g., Intel ixp425 with a compiler that does not 32-bit
align variables)
\* fixed RADIUS reconnection after an error in sending interim
accounting packets
\* added hostapd control interface for external programs and an example
CLI, hostapd\_cli (like wpa\_cli for wpa\_supplicant)
\* started adding dot11, dot1x, radius MIBs ('hostapd\_cli mib',
'hostapd\_cli sta ')
\* finished update from IEEE 802.1X-2001 to IEEE 802.1X-REV (now d11)
\* added support for strict GTK rekeying (wpa\_strict\_rekey in
hostapd.conf)
\* updated IAPP to use UDP port 3517 and multicast address 224.0.1.178
(instead of broadcast) for IAPP ADD-notify (moved from draft 3 to
IEEE 802.11F-2003)
\* added Prism54 driver interface (driver=prism54 in hostapd.conf;
note: .config needs to be created in hostapd directory with
CONFIG\_DRIVER\_PRISM54=y to include this driver interface in hostapd
build)
\* dual-licensed hostapd (GPLv2 and BSD licenses)
\* fixed RADIUS accounting to generate a new session id for cases where
a station reassociates without first being complete deauthenticated
\* fixed STA disassociation handler to mark next timeout state to
deauthenticate the station, i.e., skip long wait for inactivity poll
and extra disassociation, if the STA disassociates without
deauthenticating
\* added integrated EAP authenticator that can be used instead of
external RADIUS authentication server; currently, only EAP-MD5 is
supported, so this cannot yet be used for key distribution; the EAP
method interface is generic, though, so adding new EAP methods should
be straightforward; new hostapd.conf variables: 'eap\_authenticator'
and 'eap\_user\_file'; this obsoletes "minimal authentication server"
('minimal\_eap' in hostapd.conf) which is now removed
\* added support for FreeBSD and driver interface for the BSD net80211
layer (driver=bsd in hostapd.conf and CONFIG\_DRIVER\_BSD=y in
.config); please note that some of the required kernel mods have not
yet been committed
2004-07-17 - v0.2.4 (beginning of 0.2.x stable releases)
\* fixed some accounting cases where Accounting-Start was sent when
IEEE 802.1X port was being deauthorized
2004-06-20 - v0.2.3
\* modified RADIUS client to re-connect the socket in case of certain
error codes that are generated when a network interface state is
changes (e.g., when IP address changes or the interface is set UP)
\* fixed couple of cases where EAPOL state for a station was freed
twice causing a segfault for hostapd
\* fixed couple of bugs in processing WPA deauthentication (freed data
was used)
2004-05-31 - v0.2.2
\* fixed WPA/WPA2 group rekeying to use key index correctly (GN/GM)
\* fixed group rekeying to send zero TSC in EAPOL-Key messages to fix
cases where STAs dropped multicast frames as replay attacks
\* added support for copying RADIUS Attribute 'Class' from
authentication messages into accounting messages
\* send canned EAP failure if RADIUS server sends Access-Reject without
EAP message (previously, Supplicant was not notified in this case)
\* fixed mixed WPA-PSK and WPA-EAP mode to work with WPA-PSK (i.e., do
not start EAPOL state machines if the STA selected to use WPA-PSK)
2004-05-06 - v0.2.1
\* added WPA and IEEE 802.11i/RSN (WPA2) Authenticator functionality
- based on IEEE 802.11i/D10.0 but modified to interoperate with WPA
(i.e., IEEE 802.11i/D3.0)
- supports WPA-only, RSN-only, and mixed WPA/RSN mode
- both WPA-PSK and WPA-RADIUS/EAP are supported
- PMKSA caching and pre-authentication
- new hostapd.conf variables: wpa, wpa\_psk, wpa\_passphrase,
wpa\_key\_mgmt, wpa\_pairwise, wpa\_group\_rekey, wpa\_gmk\_rekey,
rsn\_preauth, rsn\_preauth\_interfaces
\* fixed interim accounting to remove any pending accounting messages
to the STA before sending a new one
2004-02-15 - v0.2.0
\* added support for Acct-Interim-Interval:
- draft-ietf-radius-acct-interim-01.txt
- use Acct-Interim-Interval attribute from Access-Accept if local
'radius\_acct\_interim\_interval' is not set
- allow different update intervals for each STA
\* fixed event loop to call signal handlers only after returning from
the real signal handler
\* reset sta->timeout\_next after successful association to make sure
that the previously registered inactivity timer will not remove the
STA immediately (e.g., if STA deauthenticates and re-associates
before the timer is triggered).
\* added new hostapd.conf variable, nas\_identifier, that can be used to
add an optional RADIUS Attribute, NAS-Identifier, into authentication
and accounting messages
\* added support for Accounting-On and Accounting-Off messages
\* fixed accounting session handling to send Accounting-Start only once
per session and not to send Accounting-Stop if the session was not
initialized properly
\* fixed Accounting-Stop statistics in cases where the message was
previously sent after the kernel entry for the STA (and/or IEEE
802.1X data) was removed
Note:
Older changes up to and including v0.1.0 are included in the ChangeLog
of the Host AP driver.

=== Content from lists.opensuse.org_bef26570_20250124_163332.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/4MF2VZ5VGADVIEOLC27OYY6CYZR54SZG/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/4MF2VZ5VGADVIEOLC27OYY6CYZR54SZG/)

[Manage this list](/manage/lists/updates.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/4MF2VZ5VGADVIEOLC27OYY6CYZR54SZG/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/4MF2VZ5VGADVIEOLC27OYY6CYZR54SZG/)


#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/updates%40lists.opensuse.org/thread/4MF2VZ5VGADVIEOLC27OYY6CYZR54SZG/#4MF2VZ5VGADVIEOLC27OYY6CYZR54SZG)

# openSUSE-SU-2015:1920-1: moderate: Security update for wpa\_supplicant

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-securityopensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-securityopensuse.org")

5 Nov
2015

5 Nov
'15

14:11

openSUSE Security Update: Security update for wpa\_supplicant
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2015:1920-1
Rating: moderate
References: #937419
Affected Products:
openSUSE 13.1
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that contains security fixes can now be installed.
Description:
wpa\_supplicant was updated to fix one security issue.
This security issue was fixed:
- bsc#937419: Incomplete WPS and P2P NFC NDEF record payload length
validation.
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.1:
zypper in -t patch openSUSE-2015-707=1
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.1 (i586 x86\_64):
wpa\_supplicant-2.0-3.17.1
wpa\_supplicant-debuginfo-2.0-3.17.1
wpa\_supplicant-debugsource-2.0-3.17.1
wpa\_supplicant-gui-2.0-3.17.1
wpa\_supplicant-gui-debuginfo-2.0-3.17.1
References:
<https://bugzilla.suse.com/937419>

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/4MF2VZ5VGADVIEOLC27OYY6CYZR54SZG/)
Use email software

[Back to the thread](/archives/list/updates%40lists.opensuse.org/thread/4MF2VZ5VGADVIEOLC27OYY6CYZR54SZG/#4MF2VZ5VGADVIEOLC27OYY6CYZR54SZG)

[Back to the list](/archives/list/updates%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from lists.opensuse.org_51c7a73b_20250124_163331.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/HWW5HZ2EPXVNLLEF4VK3Z7KHRMDRAU5V/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/HWW5HZ2EPXVNLLEF4VK3Z7KHRMDRAU5V/)

[Manage this list](/manage/lists/updates.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/HWW5HZ2EPXVNLLEF4VK3Z7KHRMDRAU5V/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/HWW5HZ2EPXVNLLEF4VK3Z7KHRMDRAU5V/)


#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/updates%40lists.opensuse.org/thread/HWW5HZ2EPXVNLLEF4VK3Z7KHRMDRAU5V/#HWW5HZ2EPXVNLLEF4VK3Z7KHRMDRAU5V)

# openSUSE-SU-2015:1912-1: moderate: Security update for wpa\_supplicant

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-securityopensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-securityopensuse.org")

4 Nov
2015

4 Nov
'15

16:17

openSUSE Security Update: Security update for wpa\_supplicant
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2015:1912-1
Rating: moderate
References: #937419
Affected Products:
openSUSE 13.2
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that contains security fixes can now be installed.
Description:
wpa\_supplicant was updated to fix one security issue.
This security issue was fixed:
- bsc#937419: Incomplete WPS and P2P NFC NDEF record payload length
validation.
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.2:
zypper in -t patch openSUSE-2015-700=1
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.2 (i586 x86\_64):
wpa\_supplicant-2.2-5.10.1
wpa\_supplicant-debuginfo-2.2-5.10.1
wpa\_supplicant-debugsource-2.2-5.10.1
wpa\_supplicant-gui-2.2-5.10.1
wpa\_supplicant-gui-debuginfo-2.2-5.10.1
References:
<https://bugzilla.suse.com/937419>

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/HWW5HZ2EPXVNLLEF4VK3Z7KHRMDRAU5V/)
Use email software

[Back to the thread](/archives/list/updates%40lists.opensuse.org/thread/HWW5HZ2EPXVNLLEF4VK3Z7KHRMDRAU5V/#HWW5HZ2EPXVNLLEF4VK3Z7KHRMDRAU5V)

[Back to the list](/archives/list/updates%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from www.openwall.com_bb113748_20250124_163338.html ===


| [Openwall](/) * [Products](/)   + [Openwall GNU/\*/Linux  *server OS*](/Owl/)+ [Linux Kernel Runtime Guard](/lkrg/)+ [John the Ripper  *password cracker*](/john/)         - [Free & Open Source for any platform](/john/)- [in the cloud](/john/cloud/)- [Pro for Linux](/john/pro/linux/)- [Pro for macOS](/john/pro/macosx/)+ [Wordlists  *for password cracking*](/wordlists/)+ [passwdqc  *policy enforcement*](/passwdqc/)             - [Free & Open Source for Unix](/passwdqc/)- [Pro for Windows (Active Directory)](/passwdqc/windows/)+ [yescrypt  *KDF & password hashing*](/yescrypt/)+ [yespower  *Proof-of-Work (PoW)*](/yespower/)+ [crypt\_blowfish  *password hashing*](/crypt/)+ [phpass  *ditto in PHP*](/phpass/)+ [tcb  *better password shadowing*](/tcb/)+ [Pluggable Authentication Modules](/pam/)+ [scanlogd  *port scan detector*](/scanlogd/)+ [popa3d  *tiny POP3 daemon*](/popa3d/)+ [blists  *web interface to mailing lists*](/blists/)+ [msulogin  *single user mode login*](/msulogin/)+ [php\_mt\_seed  *mt\_rand() cracker*](/php_mt_seed/)* [Services](/services/)* Publications       + [Articles](/articles/)+ [Presentations](/presentations/)* Resources         + [Mailing lists](/lists/)+ [Community wiki](https://openwall.info/wiki/)+ [Source code repositories (GitHub)](https://github.com/openwall)+ [Source code repositories (CVSweb)](https://cvsweb.openwall.com)+ [File archive & mirrors](/mirrors/)+ [How to verify digital signatures](/signatures/)+ [OVE IDs](/ove/)* [What's new](/news) | |
| --- | --- |

| | [Follow @Openwall on Twitter for new release announcements and other news](https://twitter.com/openwall) | | --- | |
| --- | --- |

[[<prev]](4) [[next>]](../../../2015/11/03/1) [[<thread-prev]](../../../2015/10/30/6) [[day]](.) [[month]](..) [[year]](../..) [[list]](../../..)
```

Message-Id: <20151102225245.3B9DC42E007@smtpvbsrv1.mitre.org>
Date: Mon,  2 Nov 2015 17:52:45 -0500 (EST)
From: cve-assign@...re.org
To: j@...fi
Cc: cve-assign@...re.org, oss-security@...ts.openwall.com
Subject: Re: hostapd/wpa_supplicant - Incomplete WPS and P2P NFC NDEF record payload length validation

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

> <http://w1.fi/security/2015-5/incomplete-wps-and-p2p-nfc-ndef-record-payload-length-validation.txt>

>> Note: No NFC stack implementation has yet been identified with
>> capability to pass the malformed NDEF record to
>> hostapd/wpa_supplicant. As such, it is not known whether this issue can
>> be triggered in practice.

>> While such validation is likely done in the NFC
>> stack that needs to parse the NFC messages before further processing,
>> hostapd/wpa_supplicant should have (re)confirmed NDEF message validity
>> properly.

> <https://w1.fi/cgit/hostap/commit/src/wps/ndef.c?id=df9079e72760ceb7ebe7fb11538200c516bdd886>

>> It was possible for the 32-bit record->total_length value to end up
>> wrapping around due to integer overflow if the longer form of payload
>> length field is used and record->payload_length gets a value close to
>> 2^32.

Use CVE-2015-8041 for this integer overflow (with various possible
impacts). The vendor's report is listed under "security advisories" on
the <http://w1.fi/security> page, and it may be reasonable to interpret
"hostapd/wpa_supplicant should have (re)confirmed NDEF message
validity properly" to mean "hostapd/wpa_supplicant had a vulnerability
because they did not (re)confirm NDEF message validity properly." In
other words, although the issue is not exploitable with any known NFC
implementation, the hostapd/wpa_supplicant design goal was to operate
safely even if validation were missing in an NFC implementation.

- --
CVE assignment team, MITRE CVE Numbering Authority
M/S M300
202 Burlington Road, Bedford, MA 01730 USA
[ PGP key available through <http://cve.mitre.org/cve/request_id.html> ]
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQIcBAEBCAAGBQJWN+iXAAoJEL54rhJi8gl5WPQP/jCEUAEaL41RDQtIr+z8AQ9K
0eCZvwc3aenIJBe77KaU8f77VHbyM3pCatheArzv1KHOEyRvezr5KKscVcYxi6bj
20NnNXpWRTLoxduU0tz/2C6mUNv05VsZaRwFe1nsPHH+yDwMfzcOD6MB5esJ64l6
ZI+SbA6QMEGzq5oflWtIrijLif/YcevYyIlVJyDQjXrnvL/+g/ZfegnWruaJjWaU
CUrkAfHdeXdfk260b1hVoqncPrqIASRm2GQGhR9EzpqNWDZNcF8iGtc8LBUzSlk7
2ZmRaID4Yw57MNlFXPgn+q6scCpGWuDPAXIeJ5uBNcp4V8VVQp3zPmE9KdRzDQ1c
oypYxFfsu0/B7oW/q8nIfuz/UZge+2DZD+etPaN1jG5IpSOJhFCIgiJ8PNl6UlUU
yJNwXAMUy5+xBLULHyBhlsPc6sjJppnzP4YD/vPnzQ0uhKAXXIF/rjfi2fhX0lF7
iGikGwCXqejP4uwqJ7zE/oOh6oEEkSVYN4sqERsHmnhdE5teLMF/XOodv5P8afNX
sPbnrh67/G7PopFTCH6N4wXZrJPbi+YzETI+GXpgu1nEOkC5jtycYqV9lKnTBjQT
e6wxWk0OGdXeettqRZUhB1LTNm7OIoEjBb/+63AEyl8P6z6aqM+xXUQlNLcQHU1m
GDmrNOp6JAhzg1+xMggO
=1n9O
-----END PGP SIGNATURE-----

```

[Powered by blists](https://www.openwall.com/blists/) - [more mailing lists](https://lists.openwall.net)

Please check out the
[Open Source Software Security Wiki](https://oss-security.openwall.org/wiki/), which is counterpart to this
[mailing list](https://oss-security.openwall.org/wiki/mailing-lists/oss-security).

Confused about [mailing lists](/lists/) and their use?
[Read about mailing lists on Wikipedia](https://en.wikipedia.org/wiki/Electronic_mailing_list)
and check out these
[guidelines on proper formatting of your messages](https://www.complang.tuwien.ac.at/anton/mail-news-errors.html).



=== Content from w1.fi_888e4123_20250124_163332.html ===
Incomplete WPS and P2P NFC NDEF record payload length validation
Published: July 8, 2015
Identifier: CVE-2015-8041
The latest version available from: http://w1.fi/security/2015-5/
Vulnerability
A vulnerability was found in NDEF record parsing implementation in
hostapd and wpa\_supplicant. This code is used when an NFC Tag or NFC
connection handover is used to trigger WPS or P2P operations. The parser
did include bounds checking for the NDEF record payload length, but due
to insufficient integer size, it was possible to trigger integer
overflow that would result in bypassing the validation step with some
malformed NDEF records.
This could result in denial of service due to hostapd/wpa\_supplicant
process termination (buffer read overflow) or infinite loop. The issue
can be triggered only if the NFC stack on the device does not perform
required validation steps for received NFC messages before sending the
received message to hostapd/wpa\_supplicant for processing.
It was possible for the 32-bit record->total\_length value to end up
wrapping around due to integer overflow if the longer form of payload
length field is used and record->payload\_length gets a value close to
2^32. This could result in ndef\_parse\_record() accepting a too large
payload length value and the record type filter reading up to about 20
bytes beyond the end of the buffer and potentially killing the process.
This could also result in an attempt to allocate close to 2^32 bytes of
heap memory and if that were to succeed, a buffer read overflow of the
same length which would most likely result in the process termination.
In case of record->total\_length ending up getting the value 0, there
would be no buffer read overflow, but record parsing would result in an
infinite loop in ndef\_parse\_records().
Any of these error cases could potentially be used for denial of service
attacks over NFC by using a malformed NDEF record on an NFC Tag or
sending them during NFC connection handover if the application providing
the NDEF message to hostapd/wpa\_supplicant did no validation of the
received NDEF records. While such validation is likely done in the NFC
stack that needs to parse the NFC messages before further processing,
hostapd/wpa\_supplicant should have (re)confirmed NDEF message validity
properly.
Vulnerable versions/configurations
hostapd v0.7.0-v2.4 with CONFIG\_WPS\_NFC=y in the build configuration
(hostapd/.config) and NFC NDEF records passed to hostapd by the NFC
stack without validation.
wpa\_supplicant v0.7.0-v2.4 with CONFIG\_WPS\_NFC=y in the build
configuration (wpa\_supplicant/.config) and NFC NDEF records passed to
wpa\_supplicant by the NFC stack without validation.
Note: No NFC stack implementation has yet been identified with
capability to pass the malformed NDEF record to
hostapd/wpa\_supplicant. As such, it is not known whether this issue can
be triggered in practice.
Alternatively to an actual NFC operation trigger, the malformed NDEF
records could be provided by other applications running on the same
device if access to the hostapd/wpa\_supplicant control interface is
available to untrusted components or users.
Acknowledgments
Coverity Scan discovered parts of this issue (insecure data
handling/TAINTED\_SCALAR) and was the trigger for further manual review
of the parsing routine.
Possible mitigation steps
- Merge the following commit and rebuild hostapd/wpa\_supplicant:
NFC: Fix payload length validation in NDEF record parser
This patch is available from http://w1.fi/security/2015-5/
- Update to hostapd/wpa\_supplicant v2.5 or newer, once available
- Remove CONFIG\_WPS\_NFC=y from build configuration
- Confirm that the NFC stack does sufficient validation of the received
NDEF records before passing them to hostapd/wpa\_supplicant
Change history
November 3, 2015
- Added CVE ID

