=== Content from blog.mozilla.org_214f5ef1_20250126_012828.html ===

[Skip to content](#content)

[Mozilla](https://blog.mozilla.org/en/)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

* [Internet Culture](https://blog.mozilla.org/en/category/internet-culture/)
  + [Deep Dives](https://blog.mozilla.org/en/category/internet-culture/deep-dives/)
  + [Mozilla Explains](https://blog.mozilla.org/en/category/internet-culture/mozilla-explains/)
  + [Interviews](https://blog.mozilla.org/en/category/internet-culture/interviews/)
  + [Videos](https://blog.mozilla.org/en/category/videos/)
* [Privacy & Security](https://blog.mozilla.org/en/category/privacy-security/)
* [Products](https://blog.mozilla.org/en/category/products/)
  + [Firefox](https://blog.mozilla.org/en/category/products/firefox/)
  + [Pocket](https://blog.mozilla.org/en/category/products/pocket/)
  + [Mozilla VPN](https://blog.mozilla.org/en/category/products/mozilla-vpn/)
* [Mozilla](https://blog.mozilla.org/en/category/mozilla/)
  + [News](https://blog.mozilla.org/en/category/mozilla/news/)
  + [Internet Policy](https://blog.mozilla.org/en/category/mozilla/internet-policy/)
  + [Leadership](https://blog.mozilla.org/en/category/mozilla/leadership/)
    - [Mitchell Baker, CEO](https://blog.mozilla.org/en/author/mitchellmozillacom/)
    - [Mark Surman, ED Foundation](https://blog.mozilla.org/en/author/markmozillafoundation-org/)
    - [Eric Rescorla, Firefox CTO](https://blog.mozilla.org/en/author/ekrmozilla-com/)

[Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_medium=referral&utm_campaign=blog-nav)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

#### Search

Search for:

![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2019/01/mozilla-logo-bw-rgb.png)
## News

Official announcements and press releases

[![Room filled with people listening to a speaker on stage. Demo Day visual image in the background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/Demo_Day_Blog_Header_-1-800x800.jpg)
Mozilla
## Mozilla Builders: Celebrating community-driven innovation in AI

Read More](https://blog.mozilla.org/en/mozilla/mozilla-builders-demo-day/)

[![The Mozilla logo in green on a black background](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/logo-lockup-video-poster-800x800.png)
Mozilla
## Mozilla welcomes new executive team members

Read More](https://blog.mozilla.org/en/mozilla/new-executives/)

[![Decorative image of wrapped gifts in front of an iphone](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/11/moz_header_holiday_firefox-phone-gifts_blue-03.png-800x800.png)
Products
## Shopping for everyone? We’ve got you covered with the Fakespot Holiday Gift Guide 2024

Read More](https://blog.mozilla.org/en/products/shopping-for-everyone-weve-got-you-covered-with-the-fakespot-holiday-gift-guide-2024/)

[![Text: Mozilla Builders](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/Blog-16_9-1920x1080-1-800x800.png)
Mozilla
## 14 AI projects to watch: Mozilla’s first Builders Accelerator cohort kicks off

Read More](https://blog.mozilla.org/en/mozilla/14-ai-projects-to-watch-mozillas-first-builders-accelerator-cohort-kicks-off/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot’s guide to trending back-to-school products

Read More](https://blog.mozilla.org/en/mozilla/news/fakespots-guide-to-trending-back-to-school-products/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## BAFTA Award-Winner Siobhán McSweeney to host Mozilla’s 2nd Annual Rise25 Awards in Dublin, Ireland on Aug. 13

Read More](https://blog.mozilla.org/en/mozilla/bafta-award-winner-siobhan-mcsweeney-to-host-mozillas-2nd-annual-rise25-awards-in-dublin-ireland-on-august-13/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/05/fx_website_meta-image_tips-tricks_alt-04-1-800x800.webp)
Mozilla
## Here’s what we’re working on in Firefox

Read More](https://blog.mozilla.org/en/mozilla/heres-what-were-working-on-in-firefox/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot reveals the product categories with the most and least reliable product reviews

Read More](https://blog.mozilla.org/en/mozilla/news/fakespot-reveals-the-product-categories-with-the-most-and-least-reliable-product-reviews-for-summer-and-back-to-school-shopping/)

[![A dark blue speech bubble with horizontal purple and red bars on a pink background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/03/fx_blog_header_announcements_001_1920x1080-800x800.jpg)
Firefox
## Engaging with our Firefox community: Highlights from our recent AMA

Read More](https://blog.mozilla.org/en/products/firefox/engaging-with-our-firefox-community-highlights-from-our-recent-ama/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## Mozilla announces finalists for the 2nd annual Rise25 Awards

Read More](https://blog.mozilla.org/en/mozilla/mozilla-announces-finalists-for-the-2nd-annual-rise25-awards/)

[![Mozilla and Anonym logos](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/blog_1200x800_v2-800x800.png)
Mozilla
## Introducing Anonym: Raising the bar for privacy-preserving digital advertising

Read More](https://blog.mozilla.org/en/mozilla/mozilla-anonym-raising-the-bar-for-privacy-preserving-digital-advertising/)

[![logo - zero with a diagonal line through it, and the letters D, I, N](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/odintbanner-500x500.png)
Mozilla
## Keeping GenAI technologies secure is a shared responsibility

Read More](https://blog.mozilla.org/en/mozilla/keeping-genai-technologies-secure-is-a-shared-responsibility/)

1
[2](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla)
[3](https://blog.mozilla.org/en/category/mozilla/news/page/3?utm_source=www.mozilla)
…
[24](https://blog.mozilla.org/en/category/mozilla/news/page/24?utm_source=www.mozilla)
[next](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla)

![newsletter](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/newsletter.png)

### Keep up with all things Firefox

Get how-tos, advice and news to make your Firefox experience work best for you.

Your e-mail address

Country
- select -
Afghanistan
Akrotiri
Albania
Algeria
American Samoa
Andorra
Angola
Anguilla
Antarctica
Antigua and Barbuda
Argentina
Armenia
Aruba
Ashmore and Cartier Islands
Australia
Austria
Azerbaijan
Bahamas, The
Bahrain
Baker Island
Bangladesh
Barbados
Bassas da India
Belarus
Belgium
Belize
Benin
Bermuda
Bhutan
Bolivia
Bonaire, Sint Eustatius, and Saba
Bosnia and Herzegovina
Botswana
Bouvet Island
Brazil
British Indian Ocean Territory
Brunei
Bulgaria
Burkina Faso
Burma
Burundi
Cabo Verde
Cambodia
Cameroon
Canada
Cayman Islands
Central African Republic
Chad
Chile
China
Christmas Island
Clipperton Island
Cocos (Keeling) Islands
Colombia
Comoros
Congo (Brazzaville)
Congo (Kinshasa)
Cook Islands
Coral Sea Islands
Costa Rica
Croatia
Cuba
Curaçao
Cyprus
Czech Republic
Côte d’Ivoire
Denmark
Dhekelia
Diego Garcia
Djibouti
Dominica
Dominican Republic
Ecuador
Egypt
El Salvador
Equatorial Guinea
Eritrea
Estonia
Ethiopia
Europa Island
Falkland Islands (Islas Malvinas)
Faroe Islands
Fiji
Finland
France
French Guiana
French Polynesia
French Southern and Antarctic Lands
Gabon
Gambia, The
Gaza Strip
Georgia
Germany
Ghana
Gibraltar
Glorioso Islands
Greece
Greenland
Grenada
Guadeloupe
Guam
Guatemala
Guernsey
Guinea
Guinea-Bissau
Guyana
Haiti
Heard Island and McDonald Islands
Honduras
Hong Kong
Howland Island
Hungary
Iceland
India
Indonesia
Iran
Iraq
Ireland
Isle of Man
Israel
Italy
Jamaica
Jan Mayen
Japan
Jarvis Island
Jersey
Johnston Atoll
Jordan
Juan de Nova Island
Kazakhstan
Kenya
Kingman Reef
Kiribati
Korea, North
Korea, South
Kosovo
Kuwait
Kyrgyzstan
Laos
Latvia
Lebanon
Lesotho
Liberia
Libya
Liechtenstein
Lithuania
Luxembourg
Macau
Macedonia
Madagascar
Malawi
Malaysia
Maldives
Mali
Malta
Marshall Islands
Martinique
Mauritania
Mauritius
Mayotte
Mexico
Micronesia, Federated States of
Midway Islands
Moldova
Monaco
Mongolia
Montenegro
Montserrat
Morocco
Mozambique
Namibia
Nauru
Navassa Island
Nepal
Netherlands
New Caledonia
New Zealand
Nicaragua
Niger
Nigeria
Niue
Norfolk Island
Northern Mariana Islands
Norway
Oman
Pakistan
Palau
Palmyra Atoll
Panama
Papua New Guinea
Paracel Islands
Paraguay
Peru
Philippines
Pitcairn Islands
Poland
Portugal
Puerto Rico
Qatar
Reunion
Romania
Russia
Rwanda
Saint Barthelemy
Saint Helena, Ascension, and Tristan da Cunha
Saint Kitts and Nevis
Saint Lucia
Saint Martin
Saint Pierre and Miquelon
Saint Vincent and the Grenadines
Samoa
San Marino
Sao Tome and Principe
Saudi Arabia
Senegal
Serbia
Seychelles
Sierra Leone
Singapore
Sint Maarten
Slovakia
Slovenia
Solomon Islands
Somalia
South Africa
South Georgia and South Sandwich Islands
South Sudan
Spain
Spratly Islands
Sri Lanka
Sudan
Suriname
Svalbard
Swaziland
Sweden
Switzerland
Syria
Taiwan
Tajikistan
Tanzania
Thailand
Timor-Leste
Togo
Tokelau
Tonga
Trinidad and Tobago
Tromelin Island
Tunisia
Turkey
Turkmenistan
Turks and Caicos Islands
Tuvalu
Uganda
Ukraine
United Arab Emirates
United Kingdom
United States
Uruguay
Uzbekistan
Vanuatu
Vatican City
Venezuela
Vietnam
Virgin Islands, British
Virgin Islands, U.S.
Wake Island
Wallis and Futuna
West Bank
Western Sahara
Yemen
Zambia
Zimbabwe

Language
English
Bahasa Indonesia
Deutsch
Español
Français
Polski
Português
Русский
正體中文

Format

 HTML

 Text

I’m okay with Mozilla handling my info as explained in this [Privacy Policy](https://www.mozilla.org/privacy/).

Sign up now
We will only send you
Mozilla-related information.

## Thanks!

If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an e-mail from us.

[Mozilla](https://www.mozilla.org/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Mozilla

* [About](https://www.mozilla.org/about/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Contact Us](https://www.mozilla.org/contact/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Donate](https://donate.mozilla.org/?presets=50,30,20,10&amount=30¤cy=usd&utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Firefox

* [Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Desktop](https://www.mozilla.org/firefox/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Mobile](https://www.mozilla.org/firefox/mobile/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Features](https://www.mozilla.org/firefox/features/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Beta, Nightly, Developer Edition](https://www.mozilla.org/firefox/channel/desktop/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Resources

* [Privacy Hub](https://www.mozilla.org/privacy/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Browser Comparison](https://www.mozilla.org/firefox/browsers/compare/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Brand Standards](https://mozilla.design/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Social

Follow @Firefox

* [Twitter (@mozilla)](https://twitter.com/firefox)
* [Instagram (@mozilla)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)

Follow @Mozilla

* [Twitter (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Legal](https://www.mozilla.org/about/legal/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)



=== Content from bugzilla.mozilla.org_46b1a748_20250124_141114.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1072760)
* [XML](/show_bug.cgi?ctype=xml&id=1072760)

Closed
[Bug 1072760](/show_bug.cgi?id=1072760)

Opened 10 years ago
Closed 10 years ago

# Failed JS\_ASSERT\_IF(attrs & JSPROP\_READONLY, !(attrs & (JSPROP\_GETTER | JSPROP\_SETTER)));

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Failed JS\_ASSERT\_IF(attrs & JSPROP\_READONLY, !(attrs & (JSPROP\_GETTER | JSPROP\_SETTER)));

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla38

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Performance Impact | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox35 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix) |
| firefox36 | [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=verified) |
| firefox37 | [+](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed) |
| firefox38 | [+](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed) |
| firefox-esr31 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |
| b2g-v2.0 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=unaffected) |
| b2g-v2.0M | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=unaffected) |
| b2g-v2.1 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=fixed) |
| b2g-v2.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed) |
| b2g-master | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox35 |  | wontfix |
| firefox36 | + | verified |
| firefox37 | + | fixed |
| firefox38 | + | fixed |
| firefox-esr31 |  | unaffected |
| b2g-v1.4 |  | unaffected |
| b2g-v2.0 |  | unaffected |
| b2g-v2.0M |  | unaffected |
| b2g-v2.1 |  | fixed |
| b2g-v2.2 |  | fixed |
| relnote-firefox |  | --- |
| b2g-master |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jruderman, Assigned: efaust)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/589235fc11e48fe6ffaa98fb085b4110?d=mm&size=40)  [efaust](/user_profile?user_id=442736)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/d2dc9227eafcd0ec5ba3712ee4f19b75?d=mm&size=40)  [jruderman](/user_profile?user_id=11608)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: assertion, sec-high, testcase, Whiteboard: [adv-main36+][b2g-adv-main2.2+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main36+][b2g-adv-main2.2+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c23 "10 years ago") | ? |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (6 files, 1 obsolete file)

| [testcase](/attachment.cgi?id=8495021)  [10 years ago](#c0)  [Jesse Ruderman](/user_profile?user_id=11608)   239 bytes, text/html |  | [Details](/attachment.cgi?id=8495021&action=edit) |
| --- | --- | --- |
| [stack](/attachment.cgi?id=8495022)  [10 years ago](#c1)  [Jesse Ruderman](/user_profile?user_id=11608)   10.72 KB, text/plain |  | [Details](/attachment.cgi?id=8495022&action=edit) |
| [Fix](/attachment.cgi?id=8505036)  [10 years ago](#c7)  [Eric Faust [:efaust]](/user_profile?user_id=442736)   3.41 KB, patch |  | [Details](/attachment.cgi?id=8505036&action=edit) | [Diff](/attachment.cgi?id=8505036&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8505036) |
| [Fix](/attachment.cgi?id=8520274)  [10 years ago](#c11)  [Eric Faust [:efaust]](/user_profile?user_id=442736)   4.03 KB, patch | jorendorff : [review+](#a4122981_281791 "10 years ago") | [Details](/attachment.cgi?id=8520274&action=edit) | [Diff](/attachment.cgi?id=8520274&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8520274) |
| [Alternate fix](/attachment.cgi?id=8521067)  [10 years ago](#c12)  [Eric Faust [:efaust]](/user_profile?user_id=442736)   5.43 KB, patch | jorendorff : [review+](#c13 "10 years ago")  abillings : [sec-approval+](#c19 "10 years ago") | [Details](/attachment.cgi?id=8521067&action=edit) | [Diff](/attachment.cgi?id=8521067&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8521067) |
| [Aurora patch](/attachment.cgi?id=8554803)  [10 years ago](#c20)  [Eric Faust [:efaust]](/user_profile?user_id=442736)   2.82 KB, patch | efaust : [review+](#c20 "10 years ago")  abillings : [approval-mozilla-aurora+](#a10767937_280903 "10 years ago") | [Details](/attachment.cgi?id=8554803&action=edit) | [Diff](/attachment.cgi?id=8554803&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8554803) |
| [Beta patch](/attachment.cgi?id=8554806)  [10 years ago](#c21)  [Eric Faust [:efaust]](/user_profile?user_id=442736)   3.05 KB, patch | efaust : [review+](#c21 "10 years ago")  abillings : [approval-mozilla-beta+](#a10767947_280903 "10 years ago") | [Details](/attachment.cgi?id=8554806&action=edit) | [Diff](/attachment.cgi?id=8554806&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8554806) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1072760#c0)• 10 years ago |
|  | |

Attached file
[testcase](attachment.cgi?id=8495021)
— [Details](attachment.cgi?id=8495021&action=edit)

Assertion failure: !(attrs & (0x10 | 0x20)), at /Users/jruderman/trees/mozilla-central/js/src/jsobj.cpp:281
This is a macro expansion of:
JS\_ASSERT\_IF(attrs & JSPROP\_READONLY, !(attrs & (JSPROP\_GETTER | JSPROP\_SETTER)));
This assertion was added in <https://hg.mozilla.org/mozilla-central/rev/49bd0c9665e5> ([bug 702491](/show_bug.cgi?id=702491 "RESOLVED FIXED - JSPROP_READONLY shouldn't be set when parsing a jsobj property descriptor with a setter")) by bholley and waldo.
Security-sensitive out of caution: many JS engine invariants are safety-critical, but I don't know which ones.

|  | [Jesse Ruderman](/user_profile?user_id=11608)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1072760#c1)• 10 years ago |
|  | |

Attached file
[stack](attachment.cgi?id=8495022)
— [Details](attachment.cgi?id=8495022&action=edit)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1072760#c2)• 10 years ago |
|  | |

So this testcase starts out with an accessor property and then tries to redefine it with this descriptor:
Object.defineProperty(window, "onclick", {writable: false});
Since it's an accessor, shouldn't the "writable" just be ignored?Flags: needinfo?(jwalden+bmo)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1072760#c3)• 10 years ago |
|  | |

This has nothing to do with the DOM, other than the fact that "window" is a proxy. Pure shell testcase that triggers the same assert:
var obj = new Proxy({}, {});
Object.defineProperty(obj, "foo",
{ configurable: true, get: function() {}, set: function() {} });
Object.defineProperty(obj, "foo", {writable: false});
Object.getOwnPropertyDescriptor(obj, "foo");Component: DOM → JavaScript Engine

|  | [Bobby Holley (:bholley)](/user_profile?user_id=313730) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1072760#c4)• 10 years ago |
|  | |

I think this is probably efaust's territory at this point.Flags: needinfo?(jwalden+bmo) → needinfo?(efaustbmo)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1072760#c5)• 10 years ago |
|  | |

Marking it sec-high out of paranoia (pending efaust's needinfo) that if we have the state wrong the JIT might optimize things in an unsafe way.Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Jeff Walden [:Waldo]](/user_profile?user_id=83595) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1072760#c6)• 10 years ago |
|  | |

(In reply to Boris Zbarsky [:bz] from [comment #2](/show_bug.cgi?id=1072760#c2 "VERIFIED FIXED - Failed JS_ASSERT_IF(attrs & JSPROP_READONLY, !(attrs & (JSPROP_GETTER | JSPROP_SETTER)));"))
> So this testcase starts out with an accessor property and then tries to
> redefine it with this descriptor:
>
> Object.defineProperty(window, "onclick", {writable: false});
>
> Since it's an accessor, shouldn't the "writable" just be ignored?
No. The existing accessor (assuming it's configurable) will have its [[Get]]/[[Set]] blown away. [[Enumerable]] and [[Configurable]] will be preserved. Because we only have half the data-descriptor info, the missing part's default is imputed.
So the end state here \*should\* be a data descriptor property like { value: undefined, writable: false, enumerable: <whatever the prior one was>, configurable: <whatever the prior one was> }.
(In reply to Boris Zbarsky [:bz] from [comment #3](/show_bug.cgi?id=1072760#c3 "VERIFIED FIXED - Failed JS_ASSERT_IF(attrs & JSPROP_READONLY, !(attrs & (JSPROP_GETTER | JSPROP_SETTER)));"))
> var obj = new Proxy({}, {});
> Object.defineProperty(obj, "foo",
> { configurable: true, get: function() {}, set: function() {} });
> Object.defineProperty(obj, "foo", {writable: false});
> Object.getOwnPropertyDescriptor(obj, "foo");
This should end with this state:
var obj = new Proxy(Object.defineProperty({}, "foo",
{ configurable: true, enumerable: false,
writable: false, value: undefined }),
{});

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1072760#c7)• 10 years ago |
|  | |

Attached patch

[Fix](attachment.cgi?id=8505036&action=diff) (obsolete)
— [Details](attachment.cgi?id=8505036&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8505036)

Waldo is right. We need to only do the direct change and not just slam in the new thing if we agree in type with the old descriptor. This was already handled for the accessor descriptor case, so add in the data descriptor one.Assignee: nobody → efaustbmoStatus: NEW → ASSIGNED
[Attachment #8505036](/attachment.cgi?id=8505036&action=edit "Fix") -
Flags: review?(jorendorff)Flags: needinfo?(efaustbmo)

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1072760#c8)• 10 years ago |
|  | |

Am I correct in thinking that if you took Waldo's cross-product-of-property-flavors "redefinition" tests, and aimed them at a scripted direct Proxy instead of a plain Object, that would find this bug?
Could you do that, please, just to make sure nothing else shakes loose?

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1072760#c9)• 10 years ago |
|  | |

Comment on [attachment 8505036](/attachment.cgi?id=8505036 "Fix") [[details]](/attachment.cgi?id=8505036&action=edit "Fix") [[diff]](/attachment.cgi?id=8505036&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8505036)
Fix
Review of [attachment 8505036](/attachment.cgi?id=8505036 "Fix") [[details]](/attachment.cgi?id=8505036&action=edit "Fix") [[diff]](/attachment.cgi?id=8505036&action=diff "Fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8505036):
-----------------------------------------------------------------
Clearing review flag for now.
::: js/src/vm/NativeObject.cpp
@@ +1461,5 @@
> shape = obj->lookup(cx, id);
> }
>
> + if (shape->isDataDescriptor()) {
> + attrs = ApplyOrDefaultAttributes(attrs, shape);
This now makes the code read like this is an optimization. The corresponding chunk above, where we're defining an accessor property, is necessary because we don't have JSPROP\_IGNORE\_GETTER/SETTER (i.e. full-on standard [[DefineOwnProperty]] MOP); I don't see why this part is necessary. Is it?
If it's not needed, we can fix the bug by deleting this block of code, right? Is there some reason this case warrants an optimization?
[Attachment #8505036](/attachment.cgi?id=8505036&action=edit "Fix") -
Flags: review?(jorendorff)

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a1702455_281791)• 10 years ago |

Flags: needinfo?(efaustbmo)

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1072760#c10)• 10 years ago |
|  | |

A quick run of Waldo's suite with new Proxy({}, {}) reveals more than one issue. I am slowly in the process of sorting them out. The first, most obvious one, is that CheckDefineProperty is way too restrictive. I will file and post other regressions as I identify themFlags: needinfo?(efaustbmo)

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1072760#c11)• 10 years ago |
|  | |

Attached patch

[Fix](attachment.cgi?id=8520274&action=diff)
— [Details](attachment.cgi?id=8520274&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8520274)

Rewrite parts of the fix, as well as adding a better test, and fix a bogus comment.
[Attachment #8505036](/attachment.cgi?id=8505036&action=edit "Fix") -
Attachment is obsolete: true
[Attachment #8520274](/attachment.cgi?id=8520274&action=edit "Fix") -
Flags: review?(jorendorff)

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a4122981_281791)• 10 years ago |

[Attachment #8520274](/attachment.cgi?id=8520274&action=edit "Fix") -
Flags: review?(jorendorff) → review+

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1072760#c12)• 10 years ago |
|  | |

Attached patch

[Alternate fix](attachment.cgi?id=8521067&action=diff)
— [Details](attachment.cgi?id=8521067&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8521067)

Now without changeProperty
[Attachment #8521067](/attachment.cgi?id=8521067&action=edit "Alternate fix") -
Flags: review?(jorendorff)

|  | [Jason Orendorff [:jorendorff]](/user_profile?user_id=281791) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1072760#c13)• 10 years ago |
|  | |

Comment on [attachment 8521067](/attachment.cgi?id=8521067 "Alternate fix") [[details]](/attachment.cgi?id=8521067&action=edit "Alternate fix") [[diff]](/attachment.cgi?id=8521067&action=diff "Alternate fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8521067)
Alternate fix
Review of [attachment 8521067](/attachment.cgi?id=8521067 "Alternate fix") [[details]](/attachment.cgi?id=8521067&action=edit "Alternate fix") [[diff]](/attachment.cgi?id=8521067&action=diff "Alternate fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8521067):
-----------------------------------------------------------------
This is so much better than the other thing. Don't you think? So many weird possibilities just don't arise when the two branches are at least following the same basic plan.
I didn't try to verify that all this is correct (whatever "correct" even means for a partial fix like this) in every possible path, so please do re-run your Proxy-or-wrap() variation of Waldo's definition and redefinition tests and just sanity-check that this doesn't regress anything. Also... think about adding some tests to pin this improvement in place. Even if they're just tests that accept all outcomes except crashing/asserting.
(In the end, we'll unify Waldo's Object.defineProperty implementation with this code. If we were doing that today, Waldo's existing tests would be sufficient. But, obviously, we're not there yet.)
::: js/src/vm/NativeObject.cpp
@@ +1482,5 @@
> shape = obj->lookup(cx, id);
> }
>
> + /\*
> + \* ES6 OCT142014 9.1.6.3 7c requires us to change the property from an accessor property
Woof! Please don't use this date format. "2014-OCT-14" would be fine.
Please remember to wrap comments to 79 columns. Only code gets to stretch out to 99.
@@ +1492,3 @@
> attrs = ApplyOrDefaultAttributes(attrs, shape);
> + bool justChange = shape->isDataDescriptor() || (attrs & JSPROP\_IGNORE\_READONLY);
> + if (justChange) {
I would delete the big comment, flip the if-statement, and add comments like this:
if (shape->isAccessorDescriptor() && !(attrs & JSPROP\_IGNORE\_READONLY)) {
// ES6 draft 2014-10-14 9.1.6.3 step 7.c: Since [[Writable]] is present, change the
// existing accessor property to a data property.
...
} else {
// We are at most applying some new attributes to an existing property, and not changing
// it from data to accessor or vice versa. Retain everything from the existing shape
// except the few things we're changing.
...
}
I dropped the boolean variable; the name "justChange" doesn't make sense anymore.
@@ +1500,5 @@
> + if (shape->hasSlot())
> + updateValue = obj->getSlot(shape->slot());
> + } else {
> + getter = nullptr;
> + setter = nullptr;
Hmm. I'm not sure we should be touching getter and setter at all. These are the values passed in by the caller, right? And they're ops? Leaving them alone seems safer. That's what we do elsewhere, right?
Also -- do we need to mask away JSPROP\_GETTER/SETTER/SHARED from attrs in this branch?
[Attachment #8521067](/attachment.cgi?id=8521067&action=edit "Alternate fix") -
Flags: review?(jorendorff) → review+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a4639531_1689)• 10 years ago |

Group: javascript-core-security

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1072760#c14)• 10 years ago |
|  | |

What's the status of this, Eric? Note that at this point it is too late to get on beta, so if it affects that branch it will likely need to wait a number of weeks before landing.Flags: needinfo?(efaustbmo)

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1072760#c15)• 10 years ago |
|  | |

Uh, it should go in wherever it can. It's ridiculous, frankly, that it's missed trains.Flags: needinfo?(efaustbmo)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1072760#c16)• 10 years ago |
|  | |

Ok, if this applies to more than trunk, please get sec-approval for you patch, and Al can figure out when it should land based on that.

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1072760#c17)• 10 years ago |
|  | |

ni for sec-approval for that patch. Thanks.Flags: needinfo?(efaustbmo)

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1072760#c18)• 10 years ago |
|  | |

Comment on [attachment 8521067](/attachment.cgi?id=8521067 "Alternate fix") [[details]](/attachment.cgi?id=8521067&action=edit "Alternate fix") [[diff]](/attachment.cgi?id=8521067&action=diff "Alternate fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8521067)
Alternate fix
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
It would be much easier with the assertion the patch fixes. I will not land a test with it, but the code that triggers the assertion is trivial and will make the engine do "strange things". It's not clear to me that the most obvious paths towards ACE will be met with success.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
We should not land a test with this, probably, as the fixed beahvior is too simple. Tests should sneak in elsewhere, but otherwise, it's not a massive problem.
Which older supported branches are affected by this flaw?
I believe the causing bug ([bug 1037770](/show_bug.cgi?id=1037770 "RESOLVED FIXED - Object.defineProperty will wipe an object in this case.")) landed in 34, so we are bad clear
If not all supported branches, which bug introduced the flaw?
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Not risky. The code has been pretty stable for a while.
How likely is this patch to cause regressions; how much testing does it need?
It shouldn't. If anything it removes an unsafe optimization.Flags: needinfo?(efaustbmo)
[Attachment #8521067](/attachment.cgi?id=8521067&action=edit "Alternate fix") -
Flags: sec-approval?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a10242346_75935)• 10 years ago |

[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=unaffected)
[status-b2g-v2.0M](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=unaffected)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=affected)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected)
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=affected)
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected)
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed)
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a10244207_75935)• 10 years ago |

[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed) → [affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1072760#c19)• 10 years ago |
|  | |

Comment on [attachment 8521067](/attachment.cgi?id=8521067 "Alternate fix") [[details]](/attachment.cgi?id=8521067&action=edit "Alternate fix") [[diff]](/attachment.cgi?id=8521067&action=diff "Alternate fix") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8521067)
Alternate fix
sec-approval+ for trunk. We should get branch patches for this as well so we can check them in when it is in trunk. I agree that we should hold off on landing a test (until we ship the fix).
[Attachment #8521067](/attachment.cgi?id=8521067&action=edit "Alternate fix") -
Flags: sec-approval? → sec-approval+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a10414683_280903)• 10 years ago |

[tracking-firefox36](/buglist.cgi?f1=cf_tracking_firefox36&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B)
[tracking-firefox37](/buglist.cgi?f1=cf_tracking_firefox37&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%2B)
[tracking-firefox38](/buglist.cgi?f1=cf_tracking_firefox38&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%2B)

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1072760#c20)• 10 years ago |
|  | |

Attached patch

[Aurora patch](attachment.cgi?id=8554803&action=diff)
— [Details](attachment.cgi?id=8554803&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8554803)

Approval Request Comment
[Feature/regressing bug #]: [bug 1037770](/show_bug.cgi?id=1037770 "RESOLVED FIXED - Object.defineProperty will wipe an object in this case.")
[User impact if declined]: Potentially exploitable UB.
[Describe test coverage new/current, TreeHerder]: per sec-approval no tests to land, but tested locally with test included in original patch.
[Risks and why]: Low, as it removes an unsafe optimization and shunts more code through more relevant checks and safer code.
[String/UUID change made/needed]: None.
[Attachment #8554803](/attachment.cgi?id=8554803&action=edit "Aurora patch") -
Flags: review+
[Attachment #8554803](/attachment.cgi?id=8554803&action=edit "Aurora patch") -
Flags: approval-mozilla-aurora?

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1072760#c21)• 10 years ago |
|  | |

Attached patch

[Beta patch](attachment.cgi?id=8554806&action=diff)
— [Details](attachment.cgi?id=8554806&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1072760&attachment=8554806)

See aurora comment above.
[Attachment #8554806](/attachment.cgi?id=8554806&action=edit "Beta patch") -
Flags: review+
[Attachment #8554806](/attachment.cgi?id=8554806&action=edit "Beta patch") -
Flags: approval-mozilla-beta?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a10767937_280903)• 10 years ago |

[Attachment #8554803](/attachment.cgi?id=8554803&action=edit "Aurora patch") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a10767947_280903)• 10 years ago |

[Attachment #8554806](/attachment.cgi?id=8554806&action=edit "Beta patch") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Eric Faust [:efaust]](/user_profile?user_id=442736)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1072760#c22)• 10 years ago |
|  | |

The Aurora patch applies cleanly to inbound as well, and should be landed there.Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1072760#c23)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/1ca9cc2f0195>Flags: in-testsuite?Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1072760#c24)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/1ca9cc2f0195>Status: ASSIGNED → RESOLVEDClosed: 10 years ago
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla38

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1072760#c25)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/5b6e1cf75e87>
<https://hg.mozilla.org/releases/mozilla-beta/rev/897f73d9e4f9>
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1072760#c26)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g37_v2_2/rev/5b6e1cf75e87>
<https://hg.mozilla.org/releases/mozilla-b2g34_v2_1/rev/ceed888f5784>
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=fixed)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a11370597_1689)• 10 years ago |

Group: javascript-core-security

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a12597491_280903)• 10 years ago |

Whiteboard: [adv-main36+]

|  | [Matt Wobensmith [:mwobensmith][:matt:]](/user_profile?user_id=452604) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1072760#c27)• 10 years ago |
|  | |

Confirmed crash on Fx35, verified fixed on Fx36 2015-02-18, debug build.Status: RESOLVED → VERIFIED
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=verified)

|  | [Christiane Ruetten [INACTIVE]](/user_profile?user_id=465475) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a24584781_465475)• 10 years ago |

Whiteboard: [adv-main36+] → [adv-main36+][b2g-adv-main2.2+]

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a29552369_546015)• 9 years ago |

Group: core-security → core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1072760#a53457228_1689)• 9 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1072760&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jesse Ruderman](/user_profile?user_id=11608)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_560e319f_20250124_141130.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1127246)
* [XML](/show_bug.cgi?ctype=xml&id=1127246)

Closed
[Bug 1127246](/show_bug.cgi?id=1127246)

Opened 10 years ago
Closed 10 years ago

# baseShapes table is not updated after generational GC

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

baseShapes table is not updated after generational GC

## Categories

### (Core :: JavaScript: GC, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%3A%20GC#JavaScript%3A%20GC)

JavaScript: GC
▾

Core :: JavaScript: GC
File bugs here for issues involving the garbage collector (crashes, leaks, etc.), where the issue is *not* one caused by failure to use the JSAPI correctly.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%3A%20GC&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%3A%20GC&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%3A%20GC)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla38

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Accessibility Severity | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox35 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix) |
| firefox36 | [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed) |
| firefox37 | [+](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed) |
| firefox38 | [+](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed) |
| firefox-esr31 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |
| b2g-v2.0 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=unaffected) |
| b2g-v2.0M | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=unaffected) |
| b2g-v2.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=unaffected) |
| b2g-v2.1S | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=equals&v1=unaffected) |
| b2g-v2.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed) |
| b2g-master | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox35 |  | wontfix |
| firefox36 | + | fixed |
| firefox37 | + | fixed |
| firefox38 | + | fixed |
| firefox-esr31 |  | unaffected |
| b2g-v1.4 |  | unaffected |
| b2g-v2.0 |  | unaffected |
| b2g-v2.0M |  | unaffected |
| b2g-v2.1 |  | unaffected |
| b2g-v2.1S |  | unaffected |
| b2g-v2.2 |  | fixed |
| relnote-firefox |  | --- |
| b2g-master |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jonco, Assigned: jonco)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/c9ec760b0d3a20a6775614baa4086871?d=mm&size=40)  [jonco](/user_profile?user_id=443194)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/c9ec760b0d3a20a6775614baa4086871?d=mm&size=40)  [jonco](/user_profile?user_id=443194)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

6 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[GenerationalGC](/show_bug.cgi?id=619558 "RESOLVED FIXED - [meta] Implement generational garbage collection")

Dependency [tree](/showdependencytree.cgi?id=1127246&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1127246)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: sec-high, Whiteboard: [adv-main36+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main36+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 2 obsolete files)

| [check-base-shape-table](/attachment.cgi?id=8556479)  [10 years ago](#c1)  [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)   2.92 KB, patch | terrence : [review+](#a29857_231770 "10 years ago") | [Details](/attachment.cgi?id=8556479&action=edit) | [Diff](/attachment.cgi?id=8556479&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8556479) |
| --- | --- | --- |
| [post-barrier-base-shapes-table](/attachment.cgi?id=8556481)  [10 years ago](#c2)  [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)   11.61 KB, patch | terrence : [review+](#c5 "10 years ago") | [Details](/attachment.cgi?id=8556481&action=edit) | [Diff](/attachment.cgi?id=8556481&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8556481) |
| [bug1127246-post-barrier-base-shapes-table](/attachment.cgi?id=8557038)  [10 years ago](#c6)  [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)   13.32 KB, patch | jonco : [review+](#c6 "10 years ago")  abillings : [sec-approval+](#a119741_280903 "10 years ago") | [Details](/attachment.cgi?id=8557038&action=edit) | [Diff](/attachment.cgi?id=8557038&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8557038) |
| [baseShapes-patch-aurora](/attachment.cgi?id=8557906)  [10 years ago](#c11)  [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)   12.78 KB, patch | jonco : [review+](#c11 "10 years ago")  Sylvestre : [approval-mozilla-aurora+](#a433270_495955 "10 years ago") | [Details](/attachment.cgi?id=8557906&action=edit) | [Diff](/attachment.cgi?id=8557906&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8557906) |
| [baseShapes-patch-beta](/attachment.cgi?id=8557907)  [10 years ago](#c12)  [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)   13.12 KB, patch | jonco : [review+](#c12 "10 years ago")  Sylvestre : [approval-mozilla-beta+](#c17 "10 years ago") | [Details](/attachment.cgi?id=8557907&action=edit) | [Diff](/attachment.cgi?id=8557907&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8557907) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1127246#c0)• 10 years ago |
|  | |

The baseShapes table is keyed based on parent and metadata objects pointers, both of which may be in the nursery. It needs a postbarrier to rekey entries if these objects are moved on generational GC.
Forking this issue from [bug 1124563](/show_bug.cgi?id=1124563 "VERIFIED FIXED - Assertion failure: obj->lastProperty() == p->value().shape, at jsinfer.cpp").

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1127246#c1)• 10 years ago |
|  | |

Attached patch

[check-base-shape-table](attachment.cgi?id=8556479&action=diff) (obsolete)
— [Details](attachment.cgi?id=8556479&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8556479)

Add a check to see if the contents of the baseShapes table are valid. This causes our tests to fail if we enable the checks with zeal mode 13.
[Attachment #8556479](/attachment.cgi?id=8556479&action=edit "check-base-shape-table") -
Flags: review?(terrence)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1127246#c2)• 10 years ago |
|  | |

Attached patch

[post-barrier-base-shapes-table](attachment.cgi?id=8556481&action=diff) (obsolete)
— [Details](attachment.cgi?id=8556481&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8556481)

I had an idea to mark generic barriers first to get rid of the problem where hashtable barriers see an inconsistent view of, where the table's keys have are based on original object locations but their values contain object pointers that have already been updated by other barriers.
Sadly this doesn't work, because moving the entry in the generic barrier means that the barriers for any pointers in the value now have the wrong address.
I've just fixed this in the same way we use for other barriers, by giving the lookup structure the ability to match an entry for which the key hash and key value contents are based on prior and updated object pointers respectively.
[Attachment #8556481](/attachment.cgi?id=8556481&action=edit "post-barrier-base-shapes-table") -
Flags: review?(terrence)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1127246#c3)• 10 years ago |
|  | |

This issue has been present since we enabled GGC in [bug 619558](/show_bug.cgi?id=619558 "RESOLVED FIXED - [meta] Implement generational garbage collection").Blocks: [GenerationalGC](/show_bug.cgi?id=619558 "RESOLVED FIXED - [meta] Implement generational garbage collection")
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=affected)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected)
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected)
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127246#a20994_75935)• 10 years ago |

[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=unaffected)
[status-b2g-v2.0M](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=unaffected)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=unaffected)
[status-b2g-v2.1S](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=equals&v1=unaffected)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected)
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=affected)
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127246#a24356_406194)• 10 years ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1127246#c4)• 10 years ago |
|  | |

This sounds like it could result in dead pointers, though it also sounds difficult to exploit.

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127246#a29857_231770)• 10 years ago |

[Attachment #8556479](/attachment.cgi?id=8556479&action=edit "check-base-shape-table") -
Flags: review?(terrence) → review+

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1127246#c5)• 10 years ago |
|  | |

Comment on [attachment 8556481](/attachment.cgi?id=8556481 "post-barrier-base-shapes-table") [[details]](/attachment.cgi?id=8556481&action=edit "post-barrier-base-shapes-table") [[diff]](/attachment.cgi?id=8556481&action=diff "post-barrier-base-shapes-table") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8556481)
post-barrier-base-shapes-table
Review of [attachment 8556481](/attachment.cgi?id=8556481 "post-barrier-base-shapes-table") [[details]](/attachment.cgi?id=8556481&action=edit "post-barrier-base-shapes-table") [[diff]](/attachment.cgi?id=8556481&action=diff "post-barrier-base-shapes-table") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8556481):
-----------------------------------------------------------------
Nice!
::: js/public/HashTable.h
@@ +252,5 @@
> if (old\_key != new\_key)
> rekeyAs(old\_key, new\_key, new\_key);
> }
>
> // Infallibly rekey one entry, if present.
Please extend the comment to explain the bool being returned.
@@ +473,5 @@
> if (old\_value != new\_value)
> rekeyAs(old\_value, new\_value, new\_value);
> }
>
> // Infallibly rekey one entry, if present.
Ditto.
[Attachment #8556481](/attachment.cgi?id=8556481&action=edit "post-barrier-base-shapes-table") -
Flags: review?(terrence) → review+

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1127246#c6)• 10 years ago |
|  | |

Attached patch

[bug1127246-post-barrier-base-shapes-table](attachment.cgi?id=8557038&action=diff)
— [Details](attachment.cgi?id=8557038&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8557038)

Combined patch with review comments addressed.
[Attachment #8556479](/attachment.cgi?id=8556479&action=edit "check-base-shape-table") -
Attachment is obsolete: true
[Attachment #8556481](/attachment.cgi?id=8556481&action=edit "post-barrier-base-shapes-table") -
Attachment is obsolete: true
[Attachment #8557038](/attachment.cgi?id=8557038&action=edit "bug1127246-post-barrier-base-shapes-table") -
Flags: review+

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1127246#c7)• 10 years ago |
|  | |

Comment on [attachment 8557038](/attachment.cgi?id=8557038 "bug1127246-post-barrier-base-shapes-table") [[details]](/attachment.cgi?id=8557038&action=edit "bug1127246-post-barrier-base-shapes-table") [[diff]](/attachment.cgi?id=8557038&action=diff "bug1127246-post-barrier-base-shapes-table") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8557038)
[bug1127246](/show_bug.cgi?id=1127246 "RESOLVED FIXED - baseShapes table is not updated after generational GC")-post-barrier-base-shapes-table
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Very hard.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No.
Which older supported branches are affected by this flaw?
Everything back to FF32.
If not all supported branches, which bug introduced the flaw?
[Bug 619558](/show_bug.cgi?id=619558 "RESOLVED FIXED - [meta] Implement generational garbage collection").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
This patch should apply directly or with minimal changes.
How likely is this patch to cause regressions; how much testing does it need?
Unlikely to cause regressions.
[Attachment #8557038](/attachment.cgi?id=8557038&action=edit "bug1127246-post-barrier-base-shapes-table") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1127246#c8)• 10 years ago |
|  | |

sec-approval+ for trunk. I'd like to see Aurora and Beta patches nominated and then checked in as well to get it in the next beta.
[tracking-firefox36](/buglist.cgi?f1=cf_tracking_firefox36&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B)
[tracking-firefox37](/buglist.cgi?f1=cf_tracking_firefox37&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%2B)
[tracking-firefox38](/buglist.cgi?f1=cf_tracking_firefox38&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%2B)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127246#a119741_280903)• 10 years ago |

[Attachment #8557038](/attachment.cgi?id=8557038&action=edit "bug1127246-post-barrier-base-shapes-table") -
Flags: sec-approval? → sec-approval+

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1127246#c9)• 10 years ago |
|  | |

Jon, could you land and fill the uplift requests so that we have it in beta asap? ThanksFlags: needinfo?(jcoppeard)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1127246#c10)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/a00fff536eef>Flags: needinfo?(jcoppeard)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1127246#c11)• 10 years ago |
|  | |

Attached patch

[baseShapes-patch-aurora](attachment.cgi?id=8557906&action=diff)
— [Details](attachment.cgi?id=8557906&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8557906)

[Attachment #8557906](/attachment.cgi?id=8557906&action=edit "baseShapes-patch-aurora") -
Flags: review+

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1127246#c12)• 10 years ago |
|  | |

Attached patch

[baseShapes-patch-beta](attachment.cgi?id=8557907&action=diff)
— [Details](attachment.cgi?id=8557907&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8557907)

Rebased patch for mozilla-beta, carrying r+.
[Attachment #8557907](/attachment.cgi?id=8557907&action=edit "baseShapes-patch-beta") -
Flags: review+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1127246#c13)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/a00fff536eef>Status: NEW → RESOLVEDClosed: 10 years ago
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed)
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla38

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1127246#c14)• 10 years ago |
|  | |

Jon, sorry to bother you again but we would also need the uplift request, thanks!Flags: needinfo?(jcoppeard)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1127246#c15)• 10 years ago |
|  | |

Comment on [attachment 8557906](/attachment.cgi?id=8557906 "baseShapes-patch-aurora") [[details]](/attachment.cgi?id=8557906&action=edit "baseShapes-patch-aurora") [[diff]](/attachment.cgi?id=8557906&action=diff "baseShapes-patch-aurora") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8557906)
baseShapes-patch-aurora
Approval Request Comment
[Feature/regressing bug #]: [Bug 619558](/show_bug.cgi?id=619558 "RESOLVED FIXED - [meta] Implement generational garbage collection").
[User impact if declined]: Possible stability/security issue.
[Describe test coverage new/current, TreeHerder]: On m-c for 24 hours.
[Risks and why]: Low risk.
[String/UUID change made/needed]: None.Flags: needinfo?(jcoppeard)
[Attachment #8557906](/attachment.cgi?id=8557906&action=edit "baseShapes-patch-aurora") -
Flags: approval-mozilla-aurora?

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1127246#c16)• 10 years ago |
|  | |

Comment on [attachment 8557907](/attachment.cgi?id=8557907 "baseShapes-patch-beta") [[details]](/attachment.cgi?id=8557907&action=edit "baseShapes-patch-beta") [[diff]](/attachment.cgi?id=8557907&action=diff "baseShapes-patch-beta") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8557907)
baseShapes-patch-beta
Approval Request Comment
[Feature/regressing bug #]: [Bug 619558](/show_bug.cgi?id=619558 "RESOLVED FIXED - [meta] Implement generational garbage collection").
[User impact if declined]: Possible stability/security issue.
[Describe test coverage new/current, TreeHerder]: On m-c for 24 hours.
[Risks and why]: Low risk.
[String/UUID change made/needed]: None.
[Attachment #8557907](/attachment.cgi?id=8557907&action=edit "baseShapes-patch-beta") -
Flags: approval-mozilla-beta?

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1127246#c17)• 10 years ago |
|  | |

Comment on [attachment 8557907](/attachment.cgi?id=8557907 "baseShapes-patch-beta") [[details]](/attachment.cgi?id=8557907&action=edit "baseShapes-patch-beta") [[diff]](/attachment.cgi?id=8557907&action=diff "baseShapes-patch-beta") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1127246&attachment=8557907)
baseShapes-patch-beta
Thanks
[Attachment #8557907](/attachment.cgi?id=8557907&action=edit "baseShapes-patch-beta") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127246#a433270_495955)• 10 years ago |

[Attachment #8557906](/attachment.cgi?id=8557906&action=edit "baseShapes-patch-aurora") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1127246#c18)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/b4e61581f650>
<https://hg.mozilla.org/releases/mozilla-beta/rev/e0a36c5bdf4c>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127246#a447274_75935)• 10 years ago |

[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1127246#c19)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g37_v2_2/rev/b4e61581f650>
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127246#a1779297_280903)• 10 years ago |

Whiteboard: [adv-main36+]

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127246#a18653579_546015)• 9 years ago |

Group: core-security → core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127246#a42558388_1689)• 9 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1127246&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from www.ubuntu.com_a403895b_20250124_141112.html ===


Your submission was sent successfully!
*Close*

Thank you for contacting us. A member of our team will be in touch shortly.
*Close*

You have successfully unsubscribed!
*Close*

Thank you for signing up for our newsletter!

In these regular emails you will find the latest updates about
Ubuntu and upcoming events where you can meet our team.*Close*

Your preferences have been successfully updated. *Close*

[Canonical Ubuntu](/)

* [Menu](/navigation)

* [Products](/navigation#products-navigation)
* [Use cases](/navigation#use-case-navigation)
* [Support](/navigation#support-navigation)
* [Community](/navigation#community-navigation)
* [Get Ubuntu](/navigation#get-ubuntu-navigation)

[![](https://assets.ubuntu.com/v1/82818827-CoF_white.svg)

Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

# USN-2505-1: Firefox vulnerabilities

25 February 2015

Firefox could be made to crash or run programs as your login if it
opened a malicious website.

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Releases

* [Ubuntu 14.10](/security/notices?release=utopic)
* [Ubuntu 14.04 ESM](/security/notices?release=trusty)
* [Ubuntu 12.04](/security/notices?release=precise)

## Packages

* [firefox](/security/cves?package=firefox) - Mozilla Open Source web browser

## Details

Matthew Noorenberghe discovered that Mozilla domains in the allowlist

could make UITour API calls from background tabs. If one of these domains

were compromised and open in a background tab, an attacker could

potentially exploit this to conduct clickjacking attacks. ([CVE-2015-0819](/security/CVE-2015-0819))

Jan de Mooij discovered an issue that affects content using the Caja

Compiler. If web content loads specially crafted code, this could be used

to bypass sandboxing security measures provided by Caja. ([CVE-2015-0820](/security/CVE-2015-0820))

Armin Razmdjou discovered that opening hyperlinks with specific mouse

and key combinations could allow a Chrome privileged URL to be opened

without context restrictions being preserved. If a user were tricked in to

opening a specially crafted website, an attacker could potentially exploit

this to bypass security restrictions. ([CVE-2015-0821](/security/CVE-2015-0821))

Armin Razmdjou discovered that contents of locally readable files could

be made available via manipulation of form autocomplete in some

circumstances. If a user were tricked in to opening a specially crafted

website, an attacker could potentially exploit this to obtain sensitive

information. ([CVE-2015-0822](/security/CVE-2015-0822))

Atte Kettunen discovered a use-after-free in the OpenType Sanitiser (OTS)

in some circumstances. If a user were tricked in to opening a specially

crafted website, an attacker could potentially exploit this to cause a

denial of service via application crash. ([CVE-2015-0823](/security/CVE-2015-0823))

Atte Kettunen discovered a crash when drawing images using Cairo in some

circumstances. If a user were tricked in to opening a specially crafted

website, an attacker could potentially exploit this to cause a denial of

service. ([CVE-2015-0824](/security/CVE-2015-0824))

Atte Kettunen discovered a buffer underflow during playback of MP3 files

in some circumstances. If a user were tricked in to opening a specially

crafted website, an attacker could potentially exploit this to obtain

sensitive information. ([CVE-2015-0825](/security/CVE-2015-0825))

Atte Kettunen discovered a buffer overflow during CSS restyling in some

circumstances. If a user were tricked in to opening a specially crafted

website, an attacker could potentially exploit this to cause a denial of

service via application crash, or execute arbitrary code with the

privileges of the user invoking Firefox. ([CVE-2015-0826](/security/CVE-2015-0826))

Abhishek Arya discovered an out-of-bounds read and write when rendering

SVG content in some circumstances. If a user were tricked in to opening

a specially crafted website, an attacker could potentially exploit this

to obtain sensitive information. ([CVE-2015-0827](/security/CVE-2015-0827))

A buffer overflow was discovered in libstagefright during video playback

in some circumstances. If a user were tricked in to opening a specially

crafted website, an attacker could potentially exploit this to cause a

denial of service via application crash, or execute arbitrary code with

the privileges of the user invoking Firefox. ([CVE-2015-0829](/security/CVE-2015-0829))

Daniele Di Proietto discovered that WebGL could cause a crash in some

circumstances. If a user were tricked in to opening a specially crafted

website, an attacker could potentially exploit this to cause a denial of

service. ([CVE-2015-0830](/security/CVE-2015-0830))

Paul Bandha discovered a use-after-free in IndexedDB. If a user were

tricked in to opening a specially crafted website, an attacker could

potentially exploit this to cause a denial of service via application

crash, or execute arbitrary code with the privileges of the user invoking

Firefox. ([CVE-2015-0831](/security/CVE-2015-0831))

Muneaki Nishimura discovered that a period appended to a hostname could

bypass key pinning and HSTS in some circumstances. A remote attacker could

potentially exloit this to conduct a Machine-in-the-middle (MITM) attack.

([CVE-2015-0832](/security/CVE-2015-0832))

Alexander Kolesnik discovered that Firefox would attempt plaintext

connections to servers when handling turns: and stuns: URIs. A remote

attacker could potentially exploit this by conducting a Machine-in-the-middle

(MITM) attack in order to obtain credentials. ([CVE-2015-0834](/security/CVE-2015-0834))

Carsten Book, Christoph Diehl, Gary Kwong, Jan de Mooij, Liz Henry, Byron

Campen, Tom Schuster, Ryan VanderMeulen, Christian Holler, Jesse Ruderman,

Randell Jesup, Robin Whittleton, Jon Coppeard, and Nikhil Marathe

discovered multiple memory safety issues in Firefox. If a user were

tricked in to opening a specially crafted website, an attacker could

potentially exploit these to cause a denial of service via application

crash, or execute arbitrary code with the privileges of the user invoking

Firefox. ([CVE-2015-0835](/security/CVE-2015-0835), [CVE-2015-0836](/security/CVE-2015-0836))

### Reduce your security exposure

Ubuntu Pro provides ten-year security coverage to 25,000+ packages in Main and Universe repositories, and it is free for up to five machines.

[Learn more about Ubuntu Pro](/pro)

## Update instructions

The problem can be corrected by updating your system to the following package versions:

##### Ubuntu 14.10

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [36.0+build2-0ubuntu0.14.10.4](https://launchpad.net/ubuntu/%2Bsource/firefox/36.0%2Bbuild2-0ubuntu0.14.10.4)

##### Ubuntu 14.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [36.0+build2-0ubuntu0.14.04.4](https://launchpad.net/ubuntu/%2Bsource/firefox/36.0%2Bbuild2-0ubuntu0.14.04.4)

##### Ubuntu 12.04

* [firefox](https://launchpad.net/ubuntu/%2Bsource/firefox)
  -
  [36.0+build2-0ubuntu0.12.04.5](https://launchpad.net/ubuntu/%2Bsource/firefox/36.0%2Bbuild2-0ubuntu0.12.04.5)

After a standard system update you need to restart Firefox to make

all the necessary changes.

## References

* [CVE-2015-0819](/security/CVE-2015-0819)
* [CVE-2015-0820](/security/CVE-2015-0820)
* [CVE-2015-0821](/security/CVE-2015-0821)
* [CVE-2015-0822](/security/CVE-2015-0822)
* [CVE-2015-0823](/security/CVE-2015-0823)
* [CVE-2015-0824](/security/CVE-2015-0824)
* [CVE-2015-0825](/security/CVE-2015-0825)
* [CVE-2015-0826](/security/CVE-2015-0826)
* [CVE-2015-0827](/security/CVE-2015-0827)
* [CVE-2015-0829](/security/CVE-2015-0829)
* [CVE-2015-0830](/security/CVE-2015-0830)
* [CVE-2015-0831](/security/CVE-2015-0831)
* [CVE-2015-0832](/security/CVE-2015-0832)
* [CVE-2015-0834](/security/CVE-2015-0834)
* [CVE-2015-0835](/security/CVE-2015-0835)
* [CVE-2015-0836](/security/CVE-2015-0836)

## Related notices

* [USN-2506-1](/security/notices/USN-2506-1)

### Join the discussion

* [Ubuntu security updates mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-hardened)
* [Security announcements mailing list](https://lists.ubuntu.com/mailman/listinfo/ubuntu-security-announce)

### Need help with your security needs?

Ubuntu Pro provides up to ten-year security coverage for over 23,000 open-source packages within the Ubuntu Main and Universe repositories.

[Talk to an expert to find out what would work best for you](/contact-us/form?product=pro)

### Further reading

* *Loading...*

---

## [OpenStack](/openstack) [OpenStack](/openstack)

* [What is OpenStack](/openstack/what-is-openstack)
* [Features](/openstack/features)
* [Managed](/openstack/managed)
* [Consulting](/openstack/consulting)
* [Install](/openstack/install)
* [Support](/openstack/support)

---

## [Ceph](/ceph) [Ceph](/ceph)

* [What is Ceph](/ceph/what-is-ceph)
* [Managed](/ceph/managed)
* [Consulting](/ceph/consulting)
* [Docs](/ceph/docs)
* [Install](/ceph/install)

---

## [Kubernetes](/kubernetes) [Kubernetes](/kubernetes)

* [What is Kubernetes](/kubernetes/what-is-kubernetes)
* [Charmed Kubernetes](/kubernetes/charmed-k8s)
* [Managed](/kubernetes/managed)
* [Install](/kubernetes/install)
* [Docs](/kubernetes/docs)
* [Resources](/kubernetes/resources)

---

## [Managed Services](/managed) [Managed Services](/managed)

* [OpenStack](/openstack/managed)
* [Kubernetes](/kubernetes/managed)
* [Ceph](/ceph/managed)
* [Apps](/managed/apps)
* [Observability](/observability/managed)
* [Firefighting](/managed/firefighting-support)

---

## [AI / ML](/ai) [AI / ML](/ai)

* [MLOps](/ai/mlops)
* [Kubeflow](/ai/what-is-kubeflow)
* [MLflow](/ai/mlflow)
* [Consulting](/ai/consulting)
* [Data Science](/ai/data-science)
* [MLOps workshop](/ai/mlops-workshop)

---

## [Robotics](/robotics) [Robotics](/robotics)

* [What is ROS](/robotics/what-is-ros)
* [ROS ESM](/robotics/ros-esm)
* [Community](/robotics/community)
* [Docs](/robotics/docs)

---

## [IoT](/internet-of-things) [IoT](/internet-of-things)

* [App store](/internet-of-things/appstore)
* [Embedded Linux](/embedded)
* [Management](/internet-of-things/management)

---

## [Ubuntu Core](/core) [Ubuntu Core](/core)

* [Features](/core/features)
* [Success stories](/core/stories)
* [Services](/core/services)
* [Docs](/core/docs)

---

## [Ubuntu Desktop](/desktop) [Ubuntu Desktop](/desktop)

* [Organisations](/desktop/organisations)
* [Developers](/desktop/developers)
* [Flavours](/desktop/flavours)
* [WSL](/desktop/wsl)

---

## [Ubuntu Server](/server) [Ubuntu Server](/server)

* [Hyperscale](/server/hyperscale)
* [Docs](/server/docs)

---

## [Cloud](/cloud) [Cloud](/cloud)

* [What is cloud computing](/cloud/cloud-computing)
* [What is private cloud](/cloud/private-cloud)
* [What is hybrid cloud](/cloud/hybrid-cloud)
* [What is multi-cloud](/cloud/multi-cloud)
* [Public cloud](/cloud/public-cloud)

---

## [Security](/security) [Security](/security)

* [ESM](/security/esm)
* [Livepatch](/security/livepatch)
* [Certifications & Hardening](/security/compliance-automation)
* [CVEs](/security/cves)
* [Notices](/security/notices)
* [Docker Images](/security/docker-images)

---

## [Landscape](/landscape) [Landscape](/landscape)

* [Features](/landscape/features)
* [Managed](/landscape/managed)
* [Compare](/landscape/compare)
* [Install](/landscape/docs/quickstart-deployment)
* [Docs](/landscape/docs)
* [Log in to Landscape](https://landscape.canonical.com/)

---

## [Containers](/containers) [Containers](/containers)

* [What are containers](/containers/what-are-containers)
* [Chiseled Ubuntu](/containers/chiseled)
* [Chiseled and .NET](/containers/chiseled/dotnet)

---

## [Downloads](/download) [Downloads](/download)

* [Desktop](/download/desktop)
* [Server](/download/server)
* [Core](/download/core)
* [Cloud](/download/cloud)

---

## [Support](/support) [Support](/support)

* [Your subscriptions](/pro/dashboard)
* [Account users](/pro/users)
* [Pricing](/pricing/pro)
* [Discourse](https://discourse.ubuntu.com/c/project/ubuntu-pro/116/)

---

## [Observability](/observability) [Observability](/observability)

* [What is observability](/observability/what-is-observability)
* [Managed](/observability/managed)

---

## [Pricing](/pricing) [Pricing](/pricing)

* [Consulting](/pricing/consulting)
* [Desktops](/pricing/desktop)
* [Devices](/pricing/devices)

---

## Solutions

* [AI](https://canonical.com/solutions/ai)
* [Data](https://canonical.com/data)
* [Infrastructure](https://canonical.com/solutions/infrastructure)
* [Secure open source](https://canonical.com/solutions/secure-open-source)

---

## Sectors

* [Automotive](/automotive)
* [Industrial](/industrial)
* [Government](/gov)
* [Telco](/telco)
* [Finance](/financial-services)

---

[Contact us](/contact-us)

* [About us](/about)
* [Community](/community)
* [Careers](https://www.canonical.com/careers)
* [Blog](/blog)
* [Resources](/engage)
* [Press centre](/blog/press-centre)

---

© 2025 Canonical Ltd.

Ubuntu and Canonical are registered trademarks of Canonical Ltd.

---

* [Legal information](/legal)
* [Data privacy](/legal/data-privacy)
* Manage your tracker settings
* [Report a bug on this site](https://github.com/canonical/ubuntu.com/issues/new?template=ISSUE_TEMPLATE.yaml)

Back to top

Go to the top of the page



=== Content from bugzilla.mozilla.org_da1ac3cb_20250124_141122.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1119019)
* [XML](/show_bug.cgi?ctype=xml&id=1119019)

Closed
[Bug 1119019](/show_bug.cgi?id=1119019)

Opened 10 years ago
Closed 10 years ago

# crash in mozilla::layers::SharedSurfaceTextureHost::Lock()

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

crash in mozilla::layers::SharedSurfaceTextureHost::Lock()

## Categories

### (Core :: Graphics: Layers, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=Graphics%3A%20Layers#Graphics%3A%20Layers)

Graphics: Layers
▾

Core :: Graphics: Layers
The graphics subsystem that implements hardware-accelerated (and software) composition of layers of content.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20Layers&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=Graphics%3A%20Layers&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=Graphics%3A%20Layers)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

unspecified

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

Android

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla38

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox36 | [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed) |
| firefox37 | [+](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed) |
| firefox38 | [+](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed) |
| firefox-esr31 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |
| b2g-v2.0 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=unaffected) |
| b2g-v2.0M | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=unaffected) |
| b2g-v2.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=unaffected) |
| b2g-v2.1S | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=equals&v1=unaffected) |
| b2g-v2.2 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=unaffected) |
| b2g-master | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=unaffected) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox36 | + | fixed |
| firefox37 | + | fixed |
| firefox38 | + | fixed |
| firefox-esr31 |  | unaffected |
| b2g-v1.4 |  | unaffected |
| b2g-v2.0 |  | unaffected |
| b2g-v2.0M |  | unaffected |
| b2g-v2.1 |  | unaffected |
| b2g-v2.1S |  | unaffected |
| b2g-v2.2 |  | unaffected |
| relnote-firefox |  | --- |
| b2g-master |  | unaffected |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: jesup, Assigned: nical)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/33545d2334463711ea5db843306e04ab?d=mm&size=40)  [nical](/user_profile?user_id=438998)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/ae002109ba1cfbb7f5ad990cc5d9fbaf?d=mm&size=40)  [jesup](/user_profile?user_id=11539)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/17436ade8da1b23d42b3df05b9c4fc77?d=mm&size=40)  [bhood](/user_profile?user_id=697075)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

### ( [URL](http://diskdetective.org/ "http://diskdetective.org/") )

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[1119245](/show_bug.cgi?id=1119245 "RESOLVED DUPLICATE - crash in mozilla::layers::CompositorParent::GetAPZTestData(mozilla::layers::LayerTransactionParent const*, mozilla::layers::APZTestData*)")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[diskdetective.org](http://diskdetective.org/ "http://diskdetective.org/")

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

[1111889](/show_bug.cgi?id=1111889 "RESOLVED WORKSFORME - Intermittent test_videocontrols_audio_direction.html,test_videocontrols_standalone.html | application crashed [@ mozilla::layers::SharedSurfaceTextureHost::Lock()]"), [1119245](/show_bug.cgi?id=1119245 "RESOLVED DUPLICATE - crash in mozilla::layers::CompositorParent::GetAPZTestData(mozilla::layers::LayerTransactionParent const*, mozilla::layers::APZTestData*)")

## Details

### (Keywords: crash, csectype-uaf, sec-critical, Whiteboard: [adv-main36+] gfx-noted)

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main36+] gfx-noted

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ mozilla::layers::SharedSurfaceTextureHost::Lock() ]](https://crash-stats.mozilla.org/signature/?signature=mozilla%3A%3Alayers%3A%3ASharedSurfaceTextureHost%3A%3ALock%28%29)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files)

| [Compositor and gecko thread backtraces](/attachment.cgi?id=8546765)  [10 years ago](#c4)  [Kartikaya Gupta (email:kats@mozilla.staktrace.com)](/user_profile?user_id=426788)   15.95 KB, text/plain |  | [Details](/attachment.cgi?id=8546765&action=edit) |
| --- | --- | --- |
| [Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream](/attachment.cgi?id=8553088)  [10 years ago](#c11)  [Nicolas Silva [:nical]](/user_profile?user_id=438998)   4.48 KB, patch | sotaro : [review+](#c14 "10 years ago")  abillings : [sec-approval+](#c23 "10 years ago") | [Details](/attachment.cgi?id=8553088&action=edit) | [Diff](/attachment.cgi?id=8553088&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8553088) |
| [Patch upliftable to aurora](/attachment.cgi?id=8554581)  [10 years ago](#c21)  [Nicolas Silva [:nical]](/user_profile?user_id=438998)   3.93 KB, patch | abillings : [approval-mozilla-aurora+](#c24 "10 years ago") | [Details](/attachment.cgi?id=8554581&action=edit) | [Diff](/attachment.cgi?id=8554581&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8554581) |
| [Patch upliftable to beta](/attachment.cgi?id=8554582)  [10 years ago](#c22)  [Nicolas Silva [:nical]](/user_profile?user_id=438998)   3.93 KB, patch | abillings : [approval-mozilla-beta+](#c25 "10 years ago") | [Details](/attachment.cgi?id=8554582&action=edit) | [Diff](/attachment.cgi?id=8554582&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8554582) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1119019#c0)• 10 years ago |
|  | |

This bug was filed from the Socorro interface and is
report [bp-adf37f72-5201-47ea-ada3-087122141231](https://crash-stats.mozilla.org/report/index/adf37f72-5201-47ea-ada3-087122141231).
=============================================================
Highly repeatable at <http://diskdetective.org>
Hit the icon that looks like an open book, scroll around in the help (and other techniques as well).
The addresses from a crashreporter search aren't good....
Milan; please find the right people

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1119019#c1)• 10 years ago |
|  | |

This is use after free, right? Kats, can you reproduce this on any of the devices you have?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1119019#a66619_75935)• 10 years ago |

See Also: → [1111889](/show_bug.cgi?id=1111889 "RESOLVED WORKSFORME - Intermittent test_videocontrols_audio_direction.html,test_videocontrols_standalone.html | application crashed [@ mozilla::layers::SharedSurfaceTextureHost::Lock()]")

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1119019#c2)• 10 years ago |
|  | |

I hit it tons (hard to use the help popups on that page or scroll around) on my Nexus 10 (Android 5.0.1)

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1119019#a143469_456486)• 10 years ago |

Whiteboard: gfx-noted

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1119019#a143706_456486)• 10 years ago |

See Also: → [1119245](/show_bug.cgi?id=1119245 "RESOLVED DUPLICATE - crash in mozilla::layers::CompositorParent::GetAPZTestData(mozilla::layers::LayerTransactionParent const*, mozilla::layers::APZTestData*)")

|  | [Kartikaya Gupta (email:kats@mozilla.staktrace.com)](/user_profile?user_id=426788) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1119019#c3)• 10 years ago |
|  | |

I hit <https://crash-stats.mozilla.com/report/index/7659a782-627b-40fb-b635-25c862150109> using the STR in [comment 0](/show_bug.cgi?id=1119019#c0 "RESOLVED FIXED - crash in mozilla::layers::SharedSurfaceTextureHost::Lock()") on aurora. Will try on a local build to debug.

|  | [Kartikaya Gupta (email:kats@mozilla.staktrace.com)](/user_profile?user_id=426788) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1119019#c4)• 10 years ago |
|  | |

Attached file
[Compositor and gecko thread backtraces](attachment.cgi?id=8546765)
— [Details](attachment.cgi?id=8546765&action=edit)

I ran a local debug build with gdb attached, and using the STR ended up triggering the MOZ\_ASSERT at <http://mxr.mozilla.org/mozilla-central/source/gfx/gl/SharedSurface.h?rev=ccd27160dd97#106> which caused Fennec to crash. The assert was triggered on the compositor thread, so grabbed the backtraces from both the compositor thread and the Gecko thread, they are attached. I'm not sure if this is enough to debug what's going on but I can get more info if needed since I seem to be able to reliably repro.

|  | [Kartikaya Gupta (email:kats@mozilla.staktrace.com)](/user_profile?user_id=426788) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1119019#c5)• 10 years ago |
|  | |

Guessing nical is the person to look at this...Flags: needinfo?(nical.bugzilla)

|  | [Nicolas Silva [:nical]](/user_profile?user_id=438998)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1119019#c6)• 10 years ago |
|  | |

The SharedSurface is being used after it is freed. Looks like it might be the same issue as [bug 1098227](/show_bug.cgi?id=1098227 "RESOLVED FIXED - Android crash in @0x0 | mozilla::layers::Layer::CalculateScissorRect") and duplicates btw. Luckily Kats's stack trace has more helpful info than the stacks in the related bugs.

|  | [Nicolas Silva [:nical]](/user_profile?user_id=438998)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1119019#a420537_438998)• 10 years ago |

Assignee: nobody → nical.bugzillaFlags: needinfo?(nical.bugzilla)

|  | [Nicolas Silva [:nical]](/user_profile?user_id=438998)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1119019#c7)• 10 years ago |
|  | |

What seems to be happening is that the SharedSurface object is deleted on the main thread ~ShSurfHandle which happens in CanvasClient::Clear, without any form of synchronization with the TextureClient/Host memory management protocol. Normally TextureClient is supposed to fully own its underlying data (the SharedSurface in our case) but it's not the case for the SharedSurfaceTextureClient/Host.
The right way to fix this would be to have the SharedSurfaceTextureClient own the SharedSurface, but in that case, if the SharedSurface needs to be deleted on the main thread, the only way to ensure that the deallocation happens race-free is to make it synchronous (TextureClient synchronously waits for the host to be deallocated) which is sad and slow), or to resurect the logic we used to have where the data would be deleted along with the TextureChild. If the SharedSurface can be deleted on the compositor thread, things are simpler and we can follow the same deallocation protocol as with most TextureClient types (but I have a feeling it can't).
Otherwise we can hack around it and have a special ForceSynchronousDeallocation() which would only be called when the CanvasClient is cleared if the TextureClient is a SharedSurfaceTextureClient. Paying the cost of Synchronous deallocation is acceptable if it happens only on "rare" occasions like when tearing down the layer (vs every frame).

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1119019#a499984_1689)• 10 years ago |

Keywords: [csectype-uaf](/buglist.cgi?keywords=csectype-uaf&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [David Bolter [:davidb] (NeedInfo me for attention)](/user_profile?user_id=152868) |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1119019#c8)• 10 years ago |
|  | |

Assuming this affects 36+
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected)
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Reporter |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1119019#c9)• 10 years ago |
|  | |

Sec-crit with understanding of how to resolve it - is there a plan/eta for resolving it?

|  | [Kelsey Gilbert [:jgilbert]](/user_profile?user_id=419431) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1119019#c10)• 10 years ago |
|  | |

I think we should patch this by having the ShSurfTexClient hold a ShSurfHandle, and make it destruct synchronously. This would solve the immediate problem, and we can have room to breathe before working on a permanent solution.
We want to get rid of the ShSurfClient/Host pair, but the TexClients we use won't own their own data until we supplant ShSurf with TexClient.

|  | [Nicolas Silva [:nical]](/user_profile?user_id=438998)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1119019#c11)• 10 years ago |
|  | |

Attached patch

[Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream](attachment.cgi?id=8553088&action=diff)
— [Details](attachment.cgi?id=8553088&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8553088)

This should prevent the SharedSurface to be deallocated before the TextureHost since the latter is synchronously deallocated before the ShSurfHandle. This patch attempts to only do synchronous deallocation when clearing CanvasClient since the race is unlikely to happen anywhere else (unless the client side can overproduce more than one frame in advance but I think that Matt Woodrow made it impossible, I can't remember in which bug). If this is not enough we can make the destruction of all TextureClients used by CanvasClientSurfaceStream synchronous, but performance will suffer.
[Attachment #8553088](/attachment.cgi?id=8553088&action=edit "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") -
Flags: review?(sotaro.ikeda.g)

|  | [Milan Sreckovic [:milan] (needinfo for best results)](/user_profile?user_id=456486) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1119019#c12)• 10 years ago |
|  | |

Comment on [attachment 8553088](/attachment.cgi?id=8553088 "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[details]](/attachment.cgi?id=8553088&action=edit "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[diff]](/attachment.cgi?id=8553088&action=diff "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8553088)
Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream
Review of [attachment 8553088](/attachment.cgi?id=8553088 "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[details]](/attachment.cgi?id=8553088&action=edit "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[diff]](/attachment.cgi?id=8553088&action=diff "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8553088):
-----------------------------------------------------------------
::: gfx/layers/composite/TextureHost.h
@@ +551,5 @@
> PTextureParent\* mActor;
> TextureFlags mFlags;
> int mCompositableCount;
> + // whether client is reponsible for deallocating the shared data
> + bool mClientDeallocation;
Either TextureHost.h shouldn't be part of this patch or TextureHost.cpp should be?

|  | [Nicolas Silva [:nical]](/user_profile?user_id=438998)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1119019#c13)• 10 years ago |
|  | |

Comment on [attachment 8553088](/attachment.cgi?id=8553088 "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[details]](/attachment.cgi?id=8553088&action=edit "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[diff]](/attachment.cgi?id=8553088&action=diff "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8553088)
Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream
Review of [attachment 8553088](/attachment.cgi?id=8553088 "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[details]](/attachment.cgi?id=8553088&action=edit "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[diff]](/attachment.cgi?id=8553088&action=diff "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8553088):
-----------------------------------------------------------------
::: gfx/layers/composite/TextureHost.h
@@ +551,5 @@
> PTextureParent\* mActor;
> TextureFlags mFlags;
> int mCompositableCount;
> + // whether client is reponsible for deallocating the shared data
> + bool mClientDeallocation;
Oops, this is a leftover from a different attempt at fixing the issue. Please ignore this chunk.

|  | [Sotaro Ikeda [:sotaro]](/user_profile?user_id=434202) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1119019#c14)• 10 years ago |
|  | |

Comment on [attachment 8553088](/attachment.cgi?id=8553088 "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[details]](/attachment.cgi?id=8553088&action=edit "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[diff]](/attachment.cgi?id=8553088&action=diff "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8553088)
Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream
Review of [attachment 8553088](/attachment.cgi?id=8553088 "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[details]](/attachment.cgi?id=8553088&action=edit "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[diff]](/attachment.cgi?id=8553088&action=diff "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8553088):
-----------------------------------------------------------------
As a short term fix. It seems good.
::: gfx/layers/client/CanvasClient.cpp
@@ +405,5 @@
>
> +void
> +CanvasClientSharedSurface::ClearSurfaces()
> +{
> + if (mFrontTex && (mFront || mPrevFront)) {
Is there a case that mPrevFront is related to mFrontTex?
Even when there is not relation ship between mFrontTex and mPrevFront,
synchronous ipc seems to indirectly fix the problem.
[Attachment #8553088](/attachment.cgi?id=8553088&action=edit "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") -
Flags: review?(sotaro.ikeda.g) → review+

|  | [Nicolas Silva [:nical]](/user_profile?user_id=438998)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1119019#c15)• 10 years ago |
|  | |

(In reply to Sotaro Ikeda [:sotaro] from [comment #14](/show_bug.cgi?id=1119019#c14 "RESOLVED FIXED - crash in mozilla::layers::SharedSurfaceTextureHost::Lock()"))
> Is there a case that mPrevFront is related to mFrontTex?
> Even when there is not relation ship between mFrontTex and mPrevFront,
> synchronous ipc seems to indirectly fix the problem.
I was being a bit conservative about triggering the synchronous safe-guard, with the reasoning that ::Clear could happen just after ::update in which case the SharedSurface recently stored in mPrevFront might still be in use on the compositor side. The timing is a bit unlikely, it feels safer to me to just rule out this possibility.

|  | [Nicolas Silva [:nical]](/user_profile?user_id=438998)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1119019#c16)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/57c76122bb27>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1119019#c17)• 10 years ago |
|  | |

AFAICT, this should have had sec-approval first. Please fill it out retroactively.
<https://wiki.mozilla.org/Security/Bug_Approval_Process>Flags: needinfo?(nical.bugzilla)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1119019#c18)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/57c76122bb27>Status: NEW → RESOLVEDClosed: 10 years ago
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=%3F)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=%3F)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=%3F)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected)
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed)
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed)
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=%3F)Resolution: --- → FIXEDTarget Milestone: --- → mozilla38

|  | [Nicolas Silva [:nical]](/user_profile?user_id=438998)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1119019#c20)• 10 years ago |
|  | |

Comment on [attachment 8553088](/attachment.cgi?id=8553088 "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[details]](/attachment.cgi?id=8553088&action=edit "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[diff]](/attachment.cgi?id=8553088&action=diff "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8553088)
Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
I suppose it would be quite hard. This bug can cause the compositor thread to try to read form an already-destroyed texture and crash (no writes).
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
No
Which older supported branches are affected by this flaw?
Gecko 34 and later, but something recent must have made the race condition more likely to happen. b2g is not impacted.
If not all supported branches, which bug introduced the flaw?
My guess would be [Bug 1066280](/show_bug.cgi?id=1066280 "RESOLVED FIXED - Simplify ShSurf passing for WebGL") but it's hard to be sure.
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
We should uplift the fix just to be on the safe side when we have confirmed that it does fix the issue.
How likely is this patch to cause regressions; how much testing does it need?
I think that the patch isn't risky. Let's give it a few days to bake in central to be sure.Flags: needinfo?(nical.bugzilla)
[Attachment #8553088](/attachment.cgi?id=8553088&action=edit "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") -
Flags: sec-approval?

|  | [Nicolas Silva [:nical]](/user_profile?user_id=438998)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1119019#a1603760_438998)• 10 years ago |

[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=%3F) → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=%3F) → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=unaffected)
[status-b2g-v2.0M](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=unaffected)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=%3F) → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=unaffected)
[status-b2g-v2.1S](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=equals&v1=unaffected)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected) → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=unaffected)
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed) → [unaffected](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=unaffected)
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=%3F) → ---

|  | [Nicolas Silva [:nical]](/user_profile?user_id=438998)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1119019#c21)• 10 years ago |
|  | |

Attached patch

[Patch upliftable to aurora](attachment.cgi?id=8554581&action=diff)
— [Details](attachment.cgi?id=8554581&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8554581)

|  | [Nicolas Silva [:nical]](/user_profile?user_id=438998)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1119019#c22)• 10 years ago |
|  | |

Attached patch

[Patch upliftable to beta](attachment.cgi?id=8554582&action=diff)
— [Details](attachment.cgi?id=8554582&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8554582)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1119019#c23)• 10 years ago |
|  | |

Comment on [attachment 8553088](/attachment.cgi?id=8553088 "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[details]](/attachment.cgi?id=8553088&action=edit "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[diff]](/attachment.cgi?id=8553088&action=diff "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8553088)
Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream
sec-approval+ given (which is good since it went in anyway). I'll mark the Aurora and Beta patches for uplift. We should do those soon.
[Attachment #8553088](/attachment.cgi?id=8553088&action=edit "Synchronously deallocate the last TextureClient when destroying CanvasClientSurfaceStream") -
Flags: sec-approval? → sec-approval+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1119019#c24)• 10 years ago |
|  | |

Comment on [attachment 8554581](/attachment.cgi?id=8554581 "Patch upliftable to aurora") [[details]](/attachment.cgi?id=8554581&action=edit "Patch upliftable to aurora") [[diff]](/attachment.cgi?id=8554581&action=diff "Patch upliftable to aurora") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8554581)
Patch upliftable to aurora
[Triage Comment]
[Attachment #8554581](/attachment.cgi?id=8554581&action=edit "Patch upliftable to aurora") -
Flags: approval-mozilla-aurora+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1119019#c25)• 10 years ago |
|  | |

Comment on [attachment 8554582](/attachment.cgi?id=8554582 "Patch upliftable to beta") [[details]](/attachment.cgi?id=8554582&action=edit "Patch upliftable to beta") [[diff]](/attachment.cgi?id=8554582&action=diff "Patch upliftable to beta") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1119019&attachment=8554582)
Patch upliftable to beta
Approving patches for branches for sec-critical issue.
[Attachment #8554582](/attachment.cgi?id=8554582&action=edit "Patch upliftable to beta") -
Flags: approval-mozilla-beta+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1119019#a1619121_280903)• 10 years ago |

[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1119019#c26)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/d077aaf352ea>
<https://hg.mozilla.org/releases/mozilla-beta/rev/6601b8da1750>
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed)

|  | [Lawrence Mandel [:lmandel] (use needinfo)](/user_profile?user_id=424995) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1119019#a1713433_424995)• 10 years ago |

[tracking-firefox36](/buglist.cgi?f1=cf_tracking_firefox36&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B)
[tracking-firefox37](/buglist.cgi?f1=cf_tracking_firefox37&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%2B)
[tracking-firefox38](/buglist.cgi?f1=cf_tracking_firefox38&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%2B)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1119019#a3548924_280903)• 10 years ago |

Whiteboard: gfx-noted → [adv-main36+] gfx-noted

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1119019#a20502821_546015)• 9 years ago |

Group: core-security → core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1119019#a44407664_1689)• 9 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1119019&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Kartikaya Gupta (email:kats@mozilla.staktrace.com)](/user_profile?user_id=426788)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_4685a819_20250124_141126.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1125734)
* [XML](/show_bug.cgi?ctype=xml&id=1125734)

Closed
[Bug 1125734](/show_bug.cgi?id=1125734)

Opened 10 years ago
Closed 10 years ago

# Twitter edit profile page consistently crashes with the LastPass extension installed

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Twitter edit profile page consistently crashes with the LastPass extension installed

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla38

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox35 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix) |
| firefox36 | [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed) |
| firefox37 | [+](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed) |
| firefox38 | [+](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed) |
| firefox-esr31 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |
| b2g-v2.0M | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=fixed) |
| b2g-v2.1 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=fixed) |
| b2g-v2.1S | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=equals&v1=fixed) |
| b2g-v2.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed) |
| b2g-master | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox35 |  | wontfix |
| firefox36 | + | fixed |
| firefox37 | + | fixed |
| firefox38 | + | fixed |
| firefox-esr31 |  | unaffected |
| b2g-v1.4 |  | unaffected |
| b2g-v2.0 |  | fixed |
| b2g-v2.0M |  | fixed |
| b2g-v2.1 |  | fixed |
| b2g-v2.1S |  | fixed |
| b2g-v2.2 |  | fixed |
| relnote-firefox |  | --- |
| b2g-master |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: robin, Assigned: sunfish)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/d0f20c3888e5ac206b6ede4d4dc5c2ce?d=mm&size=40)  [sunfish](/user_profile?user_id=468136)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/05f47f6982d68be135fa8caa7a798a74?d=mm&size=40)  [robin](/user_profile?user_id=117190)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

13 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[1125741](/show_bug.cgi?id=1125741 "RESOLVED DUPLICATE - crash in js::jit::LIRGeneratorShared::lowerTypedPhiInput(js::jit::MPhi*, unsigned int, js::jit::LBlock*, unsigned long)"), [1125982](/show_bug.cgi?id=1125982 "RESOLVED DUPLICATE - crash in js::jit::LIRGenerator::visitBlock(js::jit::MBasicBlock*) loading www.football365.com"), [1126405](/show_bug.cgi?id=1126405 "RESOLVED DUPLICATE - crash in js::jit::RegisterAllocator::init()")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [adv-main36+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[qawanted](/buglist.cgi?keywords=qawanted&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main36+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

js::jit::LIRGeneratorShared::lowerTypedPhiInput(js::jit::MPhi\*, unsigned int, js::jit::LBlock\*, unsigned long)
js::jit::LIRGenerator::visitBlock(js::jit::MBasicBlock\*)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files, 1 obsolete file)

| [osr-yeah-no.patch](/attachment.cgi?id=8554683)  [10 years ago](#c20)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   3.80 KB, patch |  | [Details](/attachment.cgi?id=8554683&action=edit) | [Diff](/attachment.cgi?id=8554683&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1125734&attachment=8554683) |
| --- | --- | --- |
| [dont-touch-loops-with-osr.patch](/attachment.cgi?id=8554762)  [10 years ago](#c25)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   3.67 KB, patch | jandem : [review+](#a45354_375297 "10 years ago")  abillings : [sec-approval+](#c30 "10 years ago") | [Details](/attachment.cgi?id=8554762&action=edit) | [Diff](/attachment.cgi?id=8554762&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1125734&attachment=8554762) |
| [aurora.patch](/attachment.cgi?id=8554860)  [10 years ago](#c26)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   1.14 KB, patch | abillings : [approval-mozilla-aurora+](#a381776_280903 "10 years ago")  abillings : [approval-mozilla-beta+](#a381776_280903 "10 years ago") | [Details](/attachment.cgi?id=8554860&action=edit) | [Diff](/attachment.cgi?id=8554860&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1125734&attachment=8554860) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Robin Whittleton](/user_profile?user_id=117190)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1125734#c0)• 10 years ago |
|  | |

User Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:38.0) Gecko/20100101 Firefox/38.0
Build ID: 20150125030202
Steps to reproduce:
Visited Twitter’s edit profile page
Actual results:
Crash
Expected results:
No crash

|  | [Robin Whittleton](/user_profile?user_id=117190)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1125734#c1)• 10 years ago |
|  | |

Couple of crash reports:
<https://crash-stats.mozilla.com/report/index/4460798f-cafb-4c97-a660-cafa72150126>
<https://crash-stats.mozilla.com/report/index/7091a1b5-048f-4a94-bb51-06ba62150126>Crash Signature: js::jit::LIRGeneratorShared::lowerTypedPhiInput(js::jit::MPhi\*, unsigned int, js::jit::LBlock\*, unsigned long)

|  | [Robin Whittleton](/user_profile?user_id=117190)  Reporter |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1125734#c3)• 10 years ago |
|  | |

One more, this time visiting a Slashdot page: <http://yro.slashdot.org/story/15/01/24/2152253/openssl-102-released>
This seems pretty explosive.Severity: normal → critical

|  | [Benjamin Kerensa [:bkerensa]](/user_profile?user_id=294742) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1125734#c4)• 10 years ago |
|  | |

Looks like something in this changeset blew it up <https://hg.mozilla.org/mozilla-central/pushloghtml?changeset=c18776175a69>
digging through the patches

|  | [Till Schneidereit [:till]](/user_profile?user_id=292831) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1125734#c5)• 10 years ago |
|  | |

WFM with the same system configuration and build. Do you have any addons installed that might be causing this?

|  | [Benjamin Kerensa [:bkerensa]](/user_profile?user_id=294742) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a3157_294742)• 10 years ago |

Keywords: [crash](/buglist.cgi?keywords=crash&resolution=---),
[qawanted](/buglist.cgi?keywords=qawanted&resolution=---),
[regressionwindow-wanted](/buglist.cgi?keywords=regressionwindow-wanted&resolution=---)

|  | [Benjamin Kerensa [:bkerensa]](/user_profile?user_id=294742) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a3169_294742)• 10 years ago |

Keywords: [regressionwindow-wanted](/buglist.cgi?keywords=regressionwindow-wanted&resolution=---)

|  | [Robin Whittleton](/user_profile?user_id=117190)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1125734#c6)• 10 years ago |
|  | |

OK, --safe-mode doesn’t crash, but disabling all my extensions in normal mode doesn’t fix it. There’s nothing obvious in about:config that’d throw up a JIT problem (apart from manually disabling E10S as it wasn’t playing nicely with my password manager) but I’ll reset my install if you think it’ll help with debugging the issue.

|  | [Till Schneidereit [:till]](/user_profile?user_id=292831) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1125734#c7)• 10 years ago |
|  | |

It probably would, yes, so that'd be great. You can always go back to your original profile if you want to restore it.

|  | [Robin Whittleton](/user_profile?user_id=117190)  Reporter |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1125734#c8)• 10 years ago |
|  | |

Not sure how I was replicating it earlier with all addons disabled, but never mind, I found the offending issue:
With a reset profile and solely the LastPass extension installed (latest version 3.1.77) the browser will reliably crash when visiting the Twitter profile edit page, even if LastPass isn’t logged in. With the extension disabled then I don’t see any crash.Summary: Twitter edit profile page consistently crashes → Twitter edit profile page consistently crashes with the LastPass extension installed

|  | [Robin Whittleton](/user_profile?user_id=117190)  Reporter |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1125734#c9)• 10 years ago |
|  | |

LastPass (same version) also appears in the crash log of the bug you duped to this one: <https://crash-stats.mozilla.com/report/index/ee4534d7-14f8-4f06-90be-b6b532150126>

|  | [Emanuel Hoogeveen [:ehoogeveen]](/user_profile?user_id=327452) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1125734#c10)• 10 years ago |
|  | |

I got a very similar crash [1] on [2], confirmed that it happens on a fresh profile after I install LastPass.
[1] <https://crash-stats.mozilla.com/report/index/043ad6b3-5d4c-4c12-bc41-425f62150126>
[2] <http://www.nytimes.com/2015/01/24/nyregion/after-a-deal-british-chocolates-wont-cross-the-pond.html?smid=fb-nytimes&smtyp=cur&bicmp=AD&bicmlukp=WT.mc_id&bicmst=1409232722000&bicmet=1419773522000&_r=1>Status: UNCONFIRMED → NEWCrash Signature: js::jit::LIRGeneratorShared::lowerTypedPhiInput(js::jit::MPhi\*, unsigned int, js::jit::LBlock\*, unsigned long) → js::jit::LIRGeneratorShared::lowerTypedPhiInput(js::jit::MPhi\*, unsigned int, js::jit::LBlock\*, unsigned long)
js::jit::LIRGenerator::visitBlock(js::jit::MBasicBlock\*)Ever confirmed: true

|  | [Emanuel Hoogeveen [:ehoogeveen]](/user_profile?user_id=327452) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a22328_327452)• 10 years ago |

OS: Mac OS X → AllHardware: x86 → All

|  | [Emanuel Hoogeveen [:ehoogeveen]](/user_profile?user_id=327452) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1125734#c11)• 10 years ago |
|  | |

Oh, and I also have e10s disabled because of the problems with LastPass. I generalized the hardware and platform since I'm using a 64-bit build on Windows 7.

|  | [Robin Whittleton](/user_profile?user_id=117190)  Reporter |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1125734#c12)• 10 years ago |
|  | |

Also worth pointing out that I didn’t need to be logged in to LastPass to trigger a crash; just having the extension installed was enough.

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1125734#c13)• 10 years ago |
|  | |

Would be great if somebody could bisect :)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a23571_375297)• 10 years ago |

Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---),
[regressionwindow-wanted](/buglist.cgi?keywords=regressionwindow-wanted&resolution=---)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1125734#c14)• 10 years ago |
|  | |

[Tracking Requested - why for this release]:
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected)
[tracking-firefox38](/buglist.cgi?f1=cf_tracking_firefox38&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%3F)

|  | [Alice0775 White](/user_profile?user_id=293623) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1125734#c15)• 10 years ago |
|  | |

Pushlog:
<https://hg.mozilla.org/integration/mozilla-inbound/pushloghtml?fromchange=0c329304fe62&tochange=f313202b1e25>
Suspect: [Bug 1118894](/show_bug.cgi?id=1118894 "VERIFIED FIXED - Assertion failure: pred->isLoopBackedge(), at js/src/jit/IonAnalysis.cpp:1962")

|  | [Emanuel Hoogeveen [:ehoogeveen]](/user_profile?user_id=327452) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1125734#c16)• 10 years ago |
|  | |

I can confirm that range.Keywords: [regressionwindow-wanted](/buglist.cgi?keywords=regressionwindow-wanted&resolution=---)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a31158_375297)• 10 years ago |

Flags: needinfo?(sunfish)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1125734#c17)• 10 years ago |
|  | |

(In reply to Alice0775 White from [comment #15](/show_bug.cgi?id=1125734#c15 "RESOLVED FIXED - Twitter edit profile page consistently crashes with the LastPass extension installed"))
> Pushlog:
You rock, thanks.

|  | [Emanuel Hoogeveen [:ehoogeveen]](/user_profile?user_id=327452) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1125734#c18)• 10 years ago |
|  | |

Local builds confirm that this is [bug 1118894](/show_bug.cgi?id=1118894 "VERIFIED FIXED - Assertion failure: pred->isLoopBackedge(), at js/src/jit/IonAnalysis.cpp:1962") (as opposed to [bug 1111248](/show_bug.cgi?id=1111248 "RESOLVED FIXED - Crash in BooleanGetPrimitiveValueSlow")). FWIW, I can reproduce this just going to twitter.com without being logged in (with LastPass active).

|  | [Emanuel Hoogeveen [:ehoogeveen]](/user_profile?user_id=327452) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1125734#c19)• 10 years ago |
|  | |

Jan told me that Dan is already looking into it, so this might not be useful, but I do get an assertion failure in a debug+opt build in jit::AssertExtendedGraphCoherency: MOZ\_ASSERT(block->id() == idx++) at the top of the loop failed. Unfortunately the opt build does optimize out a lot of this, so I can't say much more than that.

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a38414_468136)• 10 years ago |

Group: javascript-core-securityFlags: needinfo?(sunfish)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1125734#c20)• 10 years ago |
|  | |

Attached patch

[osr-yeah-no.patch](attachment.cgi?id=8554683&action=diff) (obsolete)
— [Details](attachment.cgi?id=8554683&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1125734&attachment=8554683)

I have been looking into it. I've installed LastPass and have tried logging into Twitter and editing profile setting with various combinations of being logged in/out of LastPass, logged in/out of Twitter, etc. and have not yet reproduced it. The nyt and slashdot links also don't reproduce for me, with or without being logged into LastPass.
Regardless, this is probably yet-another horrible corner case that arises when there's an OSR into the middle of a loop. I should have done this from the beginning, but here's a patch which completely disables this optimization for any loop which has an OSR entry into the middle.
Since I haven't reproduced the failure yet, I can't test that this patch fixes it, but it might.
Marking s-s for the same reason that [bug 1118894](/show_bug.cgi?id=1118894 "VERIFIED FIXED - Assertion failure: pred->isLoopBackedge(), at js/src/jit/IonAnalysis.cpp:1962") is, which is to say out of an abundance of caution, rather than any specific known problem. If anyone who can reproduce the bug can confirm that this patch fixes it, that'd be great.Assignee: nobody → sunfish

|  | [Alice0775 White](/user_profile?user_id=293623) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1125734#c21)• 10 years ago |
|  | |

@Dan Gohman [:sunfish]
Just confirmation, Are you using latest LastPass version 3.1.77 ?
( <https://lastpass.com/> )

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1125734#c22)• 10 years ago |
|  | |

Aha, I missed that. I was using the version the Firefox extension manager gave me. With 3.1.77, I can reproduce the crash. Thanks!

|  | [Emanuel Hoogeveen [:ehoogeveen]](/user_profile?user_id=327452) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1125734#c23)• 10 years ago |
|  | |

I applied the patch locally to the revision just after [bug 1118894](/show_bug.cgi?id=1118894 "VERIFIED FIXED - Assertion failure: pred->isLoopBackedge(), at js/src/jit/IonAnalysis.cpp:1962") landed, and it does seem to fix the crashes for me (and the assertion failure).

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1125734#c25)• 10 years ago |
|  | |

Attached patch

[dont-touch-loops-with-osr.patch](attachment.cgi?id=8554762&action=diff)
— [Details](attachment.cgi?id=8554762&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1125734&attachment=8554762)

Ok, here's a slightly nicer version of the patch. This fixes the crash, for me.
[Attachment #8554683](/attachment.cgi?id=8554683&action=edit "osr-yeah-no.patch") -
Attachment is obsolete: true
[Attachment #8554762](/attachment.cgi?id=8554762&action=edit "dont-touch-loops-with-osr.patch") -
Flags: review?(jdemooij)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a45354_375297)• 10 years ago |

[Attachment #8554762](/attachment.cgi?id=8554762&action=edit "dont-touch-loops-with-osr.patch") -
Flags: review?(jdemooij) → review+

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1125734#c26)• 10 years ago |
|  | |

Attached patch

[aurora.patch](attachment.cgi?id=8554860&action=diff)
— [Details](attachment.cgi?id=8554860&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1125734&attachment=8554860)

This is a version which applies to mozilla-aurora and mozilla-beta.

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1125734#c27)• 10 years ago |
|  | |

Comment on [attachment 8554762](/attachment.cgi?id=8554762 "dont-touch-loops-with-osr.patch") [[details]](/attachment.cgi?id=8554762&action=edit "dont-touch-loops-with-osr.patch") [[diff]](/attachment.cgi?id=8554762&action=diff "dont-touch-loops-with-osr.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1125734&attachment=8554762)
dont-touch-loops-with-osr.patch
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Not easy. It would require some amount of compiler knowledge to figure out the conditions needed to actually exploit this, if it is actually exploitable.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
Comments in the patch describe how to get an assertion failure, however not to actually get an exploitable crash.
Which older supported branches are affected by this flaw?
mozilla32 and later; mozilla-release, mozilla-beta, mozilla-aurora, and mozilla-central, but not esr31.
If not all supported branches, which bug introduced the flaw?
[Bug 844779](/show_bug.cgi?id=844779 "RESOLVED FIXED - IonMonkey: Improve order of blocks in rpo").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Yes. I've already attached backports for all affected branches to this bug.
How likely is this patch to cause regressions; how much testing does it need?
Unlikely. The change is pretty simple and is just disabling an optimization in an even more conservative way than what the patch in [bug 1118894](/show_bug.cgi?id=1118894 "VERIFIED FIXED - Assertion failure: pred->isLoopBackedge(), at js/src/jit/IonAnalysis.cpp:1962") attempted.
[Attachment #8554762](/attachment.cgi?id=8554762&action=edit "dont-touch-loops-with-osr.patch") -
Flags: sec-approval?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a53424_75935)• 10 years ago |

[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected)
[status-b2g-v2.0M](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=affected)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=affected)
[status-b2g-v2.1S](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=equals&v1=affected)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected)
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=affected)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected)
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected)

|  | [Benjamin Kerensa [:bkerensa]](/user_profile?user_id=294742) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a67976_294742)• 10 years ago |

[tracking-firefox38](/buglist.cgi?f1=cf_tracking_firefox38&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%2B)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1125734#c28)• 10 years ago |
|  | |

Do we have evidence that this crash is exploitable? This bug needs a security rating before it can get sec-approval.

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1125734#c29)• 10 years ago |
|  | |

It is not known to be exploitable. All we have right now is a theoretical possibility. I'm marking sec-high, since that's what [bug 1118894](/show_bug.cgi?id=1118894 "VERIFIED FIXED - Assertion failure: pred->isLoopBackedge(), at js/src/jit/IonAnalysis.cpp:1962") is marked as.Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1125734#c30)• 10 years ago |
|  | |

Comment on [attachment 8554762](/attachment.cgi?id=8554762 "dont-touch-loops-with-osr.patch") [[details]](/attachment.cgi?id=8554762&action=edit "dont-touch-loops-with-osr.patch") [[diff]](/attachment.cgi?id=8554762&action=diff "dont-touch-loops-with-osr.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1125734&attachment=8554762)
dont-touch-loops-with-osr.patch
sec-approval+ for checkin.
[Attachment #8554762](/attachment.cgi?id=8554762&action=edit "dont-touch-loops-with-osr.patch") -
Flags: sec-approval? → sec-approval+

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1125734#c31)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/ec859a233c28>

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1125734#c32)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/ec859a233c28>Status: NEW → RESOLVEDClosed: 10 years ago
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla38

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1125734#c33)• 10 years ago |
|  | |

Baked for a couple days without any other known issues. I think we're good for approval requests now? :)
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed)Flags: needinfo?(sunfish)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=1125734#c34)• 10 years ago |
|  | |

Comment on [attachment 8554860](/attachment.cgi?id=8554860 "aurora.patch") [[details]](/attachment.cgi?id=8554860&action=edit "aurora.patch") [[diff]](/attachment.cgi?id=8554860&action=diff "aurora.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1125734&attachment=8554860)
aurora.patch
Approval Request Comment
[Feature/regressing bug #]:
[bug 844779](/show_bug.cgi?id=844779 "RESOLVED FIXED - IonMonkey: Improve order of blocks in rpo")
[User impact if declined]:
potential security bug
[Describe test coverage new/current, TreeHerder]:
TreeHerder
[Risks and why]:
This is an even simpler fix than the one attempted in [bug 1118894](/show_bug.cgi?id=1118894 "VERIFIED FIXED - Assertion failure: pred->isLoopBackedge(), at js/src/jit/IonAnalysis.cpp:1962"), so it should be low risk.
[String/UUID change made/needed]:
noneFlags: needinfo?(sunfish)
[Attachment #8554860](/attachment.cgi?id=8554860&action=edit "aurora.patch") -
Flags: approval-mozilla-beta?
[Attachment #8554860](/attachment.cgi?id=8554860&action=edit "aurora.patch") -
Flags: approval-mozilla-aurora?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a381776_280903)• 10 years ago |

[Attachment #8554860](/attachment.cgi?id=8554860&action=edit "aurora.patch") -
Flags: approval-mozilla-beta?
[Attachment #8554860](/attachment.cgi?id=8554860&action=edit "aurora.patch") -
Flags: approval-mozilla-beta+
[Attachment #8554860](/attachment.cgi?id=8554860&action=edit "aurora.patch") -
Flags: approval-mozilla-aurora?
[Attachment #8554860](/attachment.cgi?id=8554860&action=edit "aurora.patch") -
Flags: approval-mozilla-aurora+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a381821_280903)• 10 years ago |

[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix)
[tracking-firefox36](/buglist.cgi?f1=cf_tracking_firefox36&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B)
[tracking-firefox37](/buglist.cgi?f1=cf_tracking_firefox37&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%2B)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=1125734#c35)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/829537f1f271>
<https://hg.mozilla.org/releases/mozilla-beta/rev/bbdf662015c0>
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=1125734#c36)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g37_v2_2/rev/829537f1f271>
<https://hg.mozilla.org/releases/mozilla-b2g34_v2_1/rev/205b89828e36>
<https://hg.mozilla.org/releases/mozilla-b2g32_v2_0/rev/b961877cacba>
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=fixed)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a732603_1689)• 10 years ago |

Group: core-security

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a733014_1689)• 10 years ago |

Group: javascript-core-security

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a1962505_280903)• 10 years ago |

Whiteboard: [adv-main36+]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=1125734#c38)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g34_v2_1s/rev/205b89828e36>
<https://hg.mozilla.org/releases/mozilla-b2g32_v2_0m/rev/b961877cacba>
[status-b2g-v2.0M](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=fixed)
[status-b2g-v2.1S](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=equals&v1=fixed)

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a18914820_546015)• 9 years ago |

Group: core-security → core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1125734#a42819626_1689)• 9 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1125734&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_116983c8_20250124_141109.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/RQTSOWR5KSQOGSFJGISASXTZK3RDYNOB/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/RQTSOWR5KSQOGSFJGISASXTZK3RDYNOB/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/RQTSOWR5KSQOGSFJGISASXTZK3RDYNOB/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/RQTSOWR5KSQOGSFJGISASXTZK3RDYNOB/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/RQTSOWR5KSQOGSFJGISASXTZK3RDYNOB/#RQTSOWR5KSQOGSFJGISASXTZK3RDYNOB)

# [security-announce] SUSE-SU-2015:0446-1: important: Security update for Mozilla Firefox

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

6 Mar
2015

6 Mar
'15

23:04

SUSE Security Update: Security update for Mozilla Firefox
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: SUSE-SU-2015:0446-1
Rating: important
References: #916196 #917100 #917300 #917597
Cross-References: CVE-2015-0822 CVE-2015-0827 CVE-2015-0831
CVE-2015-0836
Affected Products:
SUSE Linux Enterprise Software Development Kit 11 SP3
SUSE Linux Enterprise Server 11 SP3 for VMware
SUSE Linux Enterprise Server 11 SP3
SUSE Linux Enterprise Desktop 11 SP3
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes four vulnerabilities is now available.
It includes one version update.
Description:
MozillaFirefox has been updated to version 31.5.0 ESR to fix five security
issues.
These security issues have been fixed:
\* CVE-2015-0836: Multiple unspecified vulnerabilities in the browser
engine in Mozilla Firefox before 31.5 allowed remote attackers to
cause a denial of service (memory corruption and application crash)
or possibly execute arbitrary code via unknown vectors (bnc#917597).
\* CVE-2015-0827: Heap-based buffer overflow in the
mozilla::gfx::CopyRect function in Mozilla Firefox before 31.5
allowed remote attackers to obtain sensitive information from
uninitialized process memory via a malformed SVG graphic
(bnc#917597).
\* CVE-2015-0835: Multiple unspecified vulnerabilities in the browser
engine in Mozilla Firefox before 36.0 allowed remote attackers to
cause a denial of service (memory corruption and application crash)
or possibly execute arbitrary code via unknown vectors (bnc#917597).
\* CVE-2015-0831: Use-after-free vulnerability in the
mozilla::dom::IndexedDB::IDBObjectStore::CreateIndex function in
Mozilla Firefox before 31.5 allowed remote attackers to execute
arbitrary code or cause a denial of service (heap memory corruption)
via crafted content that is improperly handled during IndexedDB
index creation (bnc#917597).
\* CVE-2015-0822: The Form Autocompletion feature in Mozilla Firefox
before 31.5 allowed remote attackers to read arbitrary files via
crafted JavaScript code (bnc#917597).
These non-security issues have been fixed:
\* Reverted desktop file name back to MozillaFirefox.desktop
(bnc#916196, bnc#917100)
\* Obsolete subpackages of firefox-gcc47 from SLE11-SP1/2, that caused
problems when upgrading to SLE11-SP3 (bnc#917300)
Security Issues:
\* CVE-2015-0822
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0822>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0822%3E)
\* CVE-2015-0827
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0827>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0827%3E)
\* CVE-2015-0831
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0831>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0831%3E)
\* CVE-2015-0836
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0836>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0836%3E)
Patch Instructions:
To install this SUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- SUSE Linux Enterprise Software Development Kit 11 SP3:
zypper in -t patch sdksp3-MozillaFirefox=10373
- SUSE Linux Enterprise Server 11 SP3 for VMware:
zypper in -t patch slessp3-MozillaFirefox=10373
- SUSE Linux Enterprise Server 11 SP3:
zypper in -t patch slessp3-MozillaFirefox=10373
- SUSE Linux Enterprise Desktop 11 SP3:
zypper in -t patch sledsp3-MozillaFirefox=10373
To bring your system up-to-date, use "zypper patch".
Package List:
- SUSE Linux Enterprise Software Development Kit 11 SP3 (i586 ia64 ppc64 s390x x86\_64):
MozillaFirefox-devel-31.5.0esr-0.7.1
- SUSE Linux Enterprise Server 11 SP3 for VMware (i586 x86\_64) [New Version: 31.5.0esr]:
MozillaFirefox-31.5.0esr-0.7.1
MozillaFirefox-translations-31.5.0esr-0.7.1
- SUSE Linux Enterprise Server 11 SP3 (i586 ia64 ppc64 s390x x86\_64) [New Version: 31.5.0esr]:
MozillaFirefox-31.5.0esr-0.7.1
MozillaFirefox-translations-31.5.0esr-0.7.1
- SUSE Linux Enterprise Desktop 11 SP3 (i586 x86\_64) [New Version: 31.5.0esr]:
MozillaFirefox-31.5.0esr-0.7.1
MozillaFirefox-translations-31.5.0esr-0.7.1
References:
<http://support.novell.com/security/cve/CVE-2015-0822.html>
<http://support.novell.com/security/cve/CVE-2015-0827.html>
<http://support.novell.com/security/cve/CVE-2015-0831.html>
<http://support.novell.com/security/cve/CVE-2015-0836.html>
<https://bugzilla.suse.com/916196>
<https://bugzilla.suse.com/917100>
<https://bugzilla.suse.com/917300>
<https://bugzilla.suse.com/917597>
[http://download.suse.com/patch/finder/?keywords=5ed6e5e46ca21418d12fa2790eb8...](http://download.suse.com/patch/finder/?keywords=5ed6e5e46ca21418d12fa2790eb8d6b2)
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/RQTSOWR5KSQOGSFJGISASXTZK3RDYNOB/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/RQTSOWR5KSQOGSFJGISASXTZK3RDYNOB/#RQTSOWR5KSQOGSFJGISASXTZK3RDYNOB)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.mozilla.org_a1e9f6ec_20250124_141117.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1114058)
* [XML](/show_bug.cgi?ctype=xml&id=1114058)

Closed
[Bug 1114058](/show_bug.cgi?id=1114058)

Opened 10 years ago
Closed 10 years ago

# Crash [@ js::RegExpShared::~RegExpShared]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash [@ js::RegExpShared::~RegExpShared]

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

macOS

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla37

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| Webcompat Score | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Performance Impact | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox34 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=wontfix) |
| firefox35 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix) |
| firefox36 | [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed) |
| firefox37 | --- | [verified](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=verified) |
| firefox-esr31 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |
| b2g-v2.0M | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=fixed) |
| b2g-v2.1 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=fixed) |
| b2g-v2.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox34 |  | wontfix |
| firefox35 |  | wontfix |
| firefox36 | + | fixed |
| firefox37 |  | verified |
| firefox-esr31 |  | unaffected |
| b2g-v1.4 |  | unaffected |
| b2g-v2.0 |  | fixed |
| b2g-v2.0M |  | fixed |
| b2g-v2.1 |  | fixed |
| b2g-v2.2 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: terrence)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/045baa1e1ab4c1401b5ee569f11eaabf?d=mm&size=40)  [terrence](/user_profile?user_id=231770)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

15 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[1074961](/show_bug.cgi?id=1074961 "RESOLVED FIXED - Remove GCChunkSet")

Dependency [tree](/showdependencytree.cgi?id=1114058&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1114058)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[1114951](/show_bug.cgi?id=1114951 "RESOLVED DUPLICATE - Crash [@ writeBarrierPre] with RegExp")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [jsbugmon:update][adv-main36+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:update][adv-main36+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ js::RegExpShared::~RegExpShared ]](https://crash-stats.mozilla.org/signature/?signature=js%3A%3ARegExpShared%3A%3A~RegExpShared)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (4 files, 1 obsolete file)

| [stack](/attachment.cgi?id=8539713)  [10 years ago](#c1)  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)   8.90 KB, text/plain |  | [Details](/attachment.cgi?id=8539713&action=edit) |
| --- | --- | --- |
| [bug-1114058-v0.diff](/attachment.cgi?id=8540390)  [10 years ago](#c3)  [Terrence Cole [:terrence]](/user_profile?user_id=231770)   1.03 KB, patch |  | [Details](/attachment.cgi?id=8540390&action=edit) | [Diff](/attachment.cgi?id=8540390&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8540390) |
| [bug-1114058-v1.diff](/attachment.cgi?id=8540982)  [10 years ago](#c10)  [Terrence Cole [:terrence]](/user_profile?user_id=231770)   6.78 KB, patch | jonco : [review+](#a328038_443194 "10 years ago")  Sylvestre : [approval-mozilla-aurora+](#a1431199_495955 "10 years ago")  abillings : [sec-approval+](#c12 "10 years ago") | [Details](/attachment.cgi?id=8540982&action=edit) | [Diff](/attachment.cgi?id=8540982&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8540982) |
| [backport-32.diff](/attachment.cgi?id=8546830)  [10 years ago](#c20)  [Terrence Cole [:terrence]](/user_profile?user_id=231770)   1.38 KB, patch | terrence : [review+](#c20 "10 years ago")  RyanVM : [checkin+](#c21 "10 years ago") | [Details](/attachment.cgi?id=8546830&action=edit) | [Diff](/attachment.cgi?id=8546830&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8546830) |
| [backport-34.diff](/attachment.cgi?id=8546841)  [10 years ago](#c22)  [Terrence Cole [:terrence]](/user_profile?user_id=231770)   1.47 KB, patch | terrence : [review+](#c22 "10 years ago")  RyanVM : [checkin+](#c23 "10 years ago") | [Details](/attachment.cgi?id=8546841&action=edit) | [Diff](/attachment.cgi?id=8546841&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8546841) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1114058#c0)• 10 years ago |
|  | |

// Randomly chosen test: js/src/jit-test/tests/auto-regress/[bug812235](/show_bug.cgi?id=812235 "RESOLVED FIXED - \"Assertion failure: needsBarrier_,\"").js
gcslice(3)
// Randomly chosen test: js/src/tests/test262/ch07/7.8/7.8.5/S7.8.5\_A2.1\_T2.js
var hex = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F"];
for (var i1 = 0; i1 < 16; i1++) {
for (var i2 = 0; i2 < 16; i2++) {
for (var i3 = 0; i3 < 16; i3++) {
for (var i4 = 0; i4 < 16; i4++) {
try {
var uu = hex[i1] + hex[i2] + hex[i3] + hex[i4];
eval("/" + String.fromCharCode("0x" + uu) + "/");
} catch (e) {}
}
}
}
}
// Randomly chosen test: js/src/jit-test/tests/debug/bug-826669.js
gczeal(9, 2)
newGlobal();
crashes 32-bit js debug shell on m-c changeset 490f124d7dea with --fuzzing-safe --no-threads --ion-eager at js::RegExpShared::~RegExpShared.
Debug configure options:
LD=ld CROSS\_COMPILE=1 CC="clang -Qunused-arguments -msse2 -mfpmath=sse -arch i386" RANLIB=ranlib CXX="clang++ -Qunused-arguments -msse2 -mfpmath=sse -arch i386" AS=$CC AR=ar STRIP="strip -x -S" HOST\_CC="clang -Qunused-arguments -msse2 -mfpmath=sse" AUTOCONF=/usr/local/Cellar/autoconf213/2.13/bin/autoconf213 HOST\_CXX="clang++ -Qunused-arguments -msse2 -mfpmath=sse" sh /Users/skywalker/trees/mozilla-central/js/src/configure --target=i386-apple-darwin9.2.0 --enable-macos-target=10.5 --enable-debug --enable-optimize --enable-nspr-build --enable-more-deterministic --with-ccache --enable-gczeal --enable-debug-symbols --disable-tests
This was found by combining random js tests together with jsfunfuzz, the specific file(s) is/are:
<http://hg.mozilla.org/mozilla-central/file/490f124d7dea/js/src/jit-test/tests/auto-regress/bug812235.js>
<http://hg.mozilla.org/mozilla-central/file/490f124d7dea/js/src/tests/test262/ch07/7.8/7.8.5/S7.8.5_A2.1_T2.js>
<http://hg.mozilla.org/mozilla-central/file/490f124d7dea/js/src/jit-test/tests/debug/bug-826669.js>
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <https://hg.mozilla.org/mozilla-central/rev/a57b5d713883>
parent: 213775:4e0a21777c55
user: Terrence Cole
date: Wed Oct 29 14:17:45 2014 -0700
summary: [Bug 1074961](/show_bug.cgi?id=1074961 "RESOLVED FIXED - Remove GCChunkSet") - Part 11: Use a ChunkPool to manage available Chunks list; r=sfink
Setting s-s because this seems to involve gcslice and gczeal.
Terrence, is [bug 1074961](/show_bug.cgi?id=1074961 "RESOLVED FIXED - Remove GCChunkSet") a likely regressor?Flags: needinfo?(terrence)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1114058#c1)• 10 years ago |
|  | |

Attached file
[stack](attachment.cgi?id=8539713)
— [Details](attachment.cgi?id=8539713&action=edit)

(lldb) bt 5
\* thread #1: tid = 0x46ba0, 0x00761a96 js-dbg-opt-32-dm-nsprBuild-darwin-490f124d7dea`js::RegExpShared::~RegExpShared() [inlined] JSString::isPermanentAtom() const at String.h:441, queue = 'com.apple.main-thread', stop reason = EXC\_BAD\_ACCESS (code=1, address=0x7e4b950)
\* frame #0: 0x00761a96 js-dbg-opt-32-dm-nsprBuild-darwin-490f124d7dea`js::RegExpShared::~RegExpShared() [inlined] JSString::isPermanentAtom() const at String.h:441
frame #1: 0x00761a96 js-dbg-opt-32-dm-nsprBuild-darwin-490f124d7dea`js::RegExpShared::~RegExpShared() [inlined] JSString::writeBarrierPre(JSString\*) + 4 at String.h:504
frame #2: 0x00761a92 js-dbg-opt-32-dm-nsprBuild-darwin-490f124d7dea`js::RegExpShared::~RegExpShared() [inlined] js::InternalGCMethods<JSAtom\*>::preBarrier(v=0x07e4b950) at Barrier.h:300
frame #3: 0x00761a92 js-dbg-opt-32-dm-nsprBuild-darwin-490f124d7dea`js::RegExpShared::~RegExpShared() [inlined] js::BarrieredBase<JSAtom\*>::pre() + 2 at Barrier.h:452
frame #4: 0x00761a90 js-dbg-opt-32-dm-nsprBuild-darwin-490f124d7dea`js::RegExpShared::~RegExpShared() [inlined] js::BarrieredBase<JSAtom\*>::~BarrieredBase() at Barrier.h:421
(lldb)

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1114058#c2)• 10 years ago |
|  | |

This also repros on normal linux32 debug build with --no-threads and --no-baseline. What's going on here is that we are cleaning up the RegExpShared's source atom one or more GC's before the RegExpShared itself gets cleaned up. As usual, the failure path is extremely complicated. The facts so far:
\* We keep a regexp shared if it is marked and if the source atom is about to die. From RegExpCompartment::sweep:
bool keep = shared->marked() &&
!IsStringAboutToBeFinalizedFromAnyThread(shared->source.unsafeGet());
\* When visiting the relevant table entry: shared->source->isMarked(BLACK) == false HOWEVER IsStringAboutToBeFinalized(shared->source) == false.
\* In IsAboutToBeFinalized, we only actually check the mark bits if zone->isGCSweeping().
\* This was true at the re-introdution of IsAboutToBeFinalized in [bug 790338](/show_bug.cgi?id=790338 "RESOLVED FIXED - GC: Sweep compartments in groups") (Oct 2012) and differed from the existing IsMarked function, which continues to check zone->isCollecting(). Presumable, there was no breakage at that time.
\* The breaking edge is a cross zone edge from the regexp compartment to the atoms zone.
\* At the time of the IsStringAboutToBeFinalized call, the atoms zone state is MARK.
\* The call to IsStringAboutToBeFinalized that is miss-firing was introduced by [bug 1010441](/show_bug.cgi?id=1010441 "RESOLVED FIXED - Keep RegExpShared around when preserving jitcode") (May 2014), keeping jitcode for regexp around when keeping jitcode for a compartment.
\* The SCC contains an edge from the impacted zone to the atoms zone during the failing GC. However, the impacted zone-group does not contain the atoms zone. I think this is expected as we shouldn't have any edges out of the atoms zone.
After reflection, I don't understand how the zone->isGCSweeping() test can be correct. I think the intent may have been along the lines of: SCC constructs zone groups which reflect all edges; if it is possible to visit an edge during sweeping, it should either be in the current zone group or be in an already-swept group; if the edge is in the current zone group, then the target zone state must have been set to sweeping; if the edge was already swept, then the zone state should still be SWEEP. However, this last is wrong as endMarkingZoneGroup resets the state to MARK for reasons that aren't really clear to me.
If I swap the zone->isGCSweeping test out for zone->isGCScheduled, the crash, naturally, goes away. Jon, is this the right solution, or am I missing something critical to the way the SCC works?Flags: needinfo?(terrence)

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1114058#c3)• 10 years ago |
|  | |

Attached patch

[bug-1114058-v0.diff](attachment.cgi?id=8540390&action=diff) (obsolete)
— [Details](attachment.cgi?id=8540390&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8540390)

[Attachment #8540390](/attachment.cgi?id=8540390&action=edit "bug-1114058-v0.diff") -
Flags: review?(jcoppeard)

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1114058#c4)• 10 years ago |
|  | |

Comment on [attachment 8540390](/attachment.cgi?id=8540390 "bug-1114058-v0.diff") [[details]](/attachment.cgi?id=8540390&action=edit "bug-1114058-v0.diff") [[diff]](/attachment.cgi?id=8540390&action=diff "bug-1114058-v0.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8540390)
bug-1114058-v0.diff
Oh, very interesting! With this patch applied, auto-regress/[bug746376](/show_bug.cgi?id=746376 "VERIFIED FIXED - IonMonkey: Assertion failure: !templateObject->hasDynamicSlots(), at ion/IonMacroAssembler.cpp:381 or Crash [@ js::HeapPtr::operator]").js starts failing when some regex jit-code disappears under us.
[Attachment #8540390](/attachment.cgi?id=8540390&action=edit "bug-1114058-v0.diff") -
Flags: review?(jcoppeard)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114058#a250010_406194)• 10 years ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1114058#c5)• 10 years ago |
|  | |

(In reply to Terrence Cole [:terrence] from [comment #2](/show_bug.cgi?id=1114058#c2 "VERIFIED FIXED - Crash [@ js::RegExpShared::~RegExpShared]"))
> \* The breaking edge is a cross zone edge from the regexp compartment to the
> atoms zone.
Ok this is interesting, I didn't think about the case of IsAboutToBeFinalized() being called on an object in a different zone group to the entity being swept.
> After reflection, I don't understand how the zone->isGCSweeping() test can
> be correct.
The idea is to only sweep entities associated with the zone group currently being swept. E.g. if there is a table containing entries related to objects in several different groups, this would be swept once for each zone group but only the entries related to objects that were being swept in the current group would be removed each time.
I think the solution here is probably to use |IsMarked(source)| rather than |!IsAboutToBeFinalized(source)|.

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1114058#c6)• 10 years ago |
|  | |

(In reply to Jon Coppeard (:jonco) (PTO until 29th Dec) from [comment #5](/show_bug.cgi?id=1114058#c5 "VERIFIED FIXED - Crash [@ js::RegExpShared::~RegExpShared]"))
> (In reply to Terrence Cole [:terrence] from [comment #2](/show_bug.cgi?id=1114058#c2 "VERIFIED FIXED - Crash [@ js::RegExpShared::~RegExpShared]"))
> The idea is to only sweep entities associated with the zone group currently
> being swept. E.g. if there is a table containing entries related to objects
> in several different groups, this would be swept once for each zone group
> but only the entries related to objects that were being swept in the current
> group would be removed each time.
>
> I think the solution here is probably to use |IsMarked(source)| rather than
> |!IsAboutToBeFinalized(source)|.
Yes, that would also work, but I thought it would be a too much of a hack. Maybe not, but there are still two things that I really do not understand.
1) In this case (and it seems in the case of any weak pointer), by looking at the target to choose whether to keep the pointer, we are effectively marking in the opposite direction of the pointer. The SCC does not currently take into account these reversed "edges". Should it? If not, why not?
2) Why does this bug not bite us constantly? Even if the SCC algorithm takes into account the forward weak edges, the SCC algorithm does not guarantee that these edges, if cross compartment, will land in the same ZoneGroup. Thus, it seems like calling IsAboutAboutToBeFinalized on any cross-compartment edge should assert so that we can switch them all to IsMarked?Flags: needinfo?(jcoppeard)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1114058#c7)• 10 years ago |
|  | |

(In reply to Terrence Cole [:terrence] from [comment #6](/show_bug.cgi?id=1114058#c6 "VERIFIED FIXED - Crash [@ js::RegExpShared::~RegExpShared]"))
> 1) In this case (and it seems in the case of any weak pointer), by looking
> at the target to choose whether to keep the pointer, we are effectively
> marking in the opposite direction of the pointer. The SCC does not currently
> take into account these reversed "edges". Should it? If not, why not?
The issue that grouping the zones into SCCs solves is to ensure that for all strong cross compartment edges A -> B we don't sweep A's zone after B's zone, which would allow the possibility of A being marked after B had been already been swept.
So yes, thinking about weak edges it does seem like the SCC computation should reverse the edge, since we need to know if the target is marked before we know whether to sweep the source pointer.
In this case if we use IsMarked() we could remove a RegExpShared unnecessarily if the source atom was not marked when we swept it, but became marked later. I don't know if this is actually a problem for RegExpShared in particular. (Also I'm not sure whether this one actually needs to be weak pointer at all or whether we could mark the source atom if the RegExpShared itself was marked.)
In general we could reverse the SCC edges for weak pointers but this runs the risk of pulling everything into the same zone group and defeating incremental sweeping, especially if we have weak references into the atoms compartment as probably every compartment has strong edges into there.
> 2) Why does this bug not bite us constantly? Even if the SCC algorithm takes
> into account the forward weak edges, the SCC algorithm does not guarantee
> that these edges, if cross compartment, will land in the same ZoneGroup.
> Thus, it seems like calling IsAboutAboutToBeFinalized on any
> cross-compartment edge should assert so that we can switch them all to
> IsMarked?
Well as in the example in my last comment, sometimes it's ok to call IsAboutToBeFinalized() on something in a zone we're not sweeping at the moment. So I'm not sure if we could assert this.
I'm trying to think how many cross compartment weak pointers we actually have... For weakmaps with key delegates in a different zone we already add SCC edges to ensure that we finish marking the delegates' zones before the key zones, so that case is handled. Maybe these are the only cases?Flags: needinfo?(jcoppeard)

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1114058#c8)• 10 years ago |
|  | |

(In reply to Jon Coppeard (:jonco) (PTO until 29th Dec) from [comment #7](/show_bug.cgi?id=1114058#c7 "VERIFIED FIXED - Crash [@ js::RegExpShared::~RegExpShared]"))
> I'm trying to think how many cross compartment weak pointers we actually
> have... For weakmaps with key delegates in a different zone we already add
> SCC edges to ensure that we finish marking the delegates' zones before the
> key zones, so that case is handled. Maybe these are the only cases?
Exactly! We're already jumping through hoops to make this case work for WeakMaps; could we introduce a new WeakPointer primitive that guarantees that weak edges get the same treatment? What we're doing with relying on manual IsAboutToBeFinalized and nulling during sweeping is only going to get more fragile as we incrementalize further. At the very least, it would be nice to have a linked-list in DEBUG so that we could add some solid verifications that the ad-hoc approach is working.

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1114058#c10)• 10 years ago |
|  | |

Attached patch

[bug-1114058-v1.diff](attachment.cgi?id=8540982&action=diff)
— [Details](attachment.cgi?id=8540982&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8540982)

Let's switch this user to IsMarked and uplift to solve the proximate cause now and work on a more general fix elsewhere. I've verified that this fixes the crash and doesn't cause other issues.Assignee: nobody → terrence
[Attachment #8540390](/attachment.cgi?id=8540390&action=edit "bug-1114058-v0.diff") -
Attachment is obsolete: trueStatus: NEW → ASSIGNED
[Attachment #8540982](/attachment.cgi?id=8540982&action=edit "bug-1114058-v1.diff") -
Flags: review?(jcoppeard)

|  | [Jon Coppeard (:jonco) (PTO until 27th Jan)](/user_profile?user_id=443194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114058#a328038_443194)• 10 years ago |

[Attachment #8540982](/attachment.cgi?id=8540982&action=edit "bug-1114058-v1.diff") -
Flags: review?(jcoppeard) → review+

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1114058#c11)• 10 years ago |
|  | |

Comment on [attachment 8540982](/attachment.cgi?id=8540982 "bug-1114058-v1.diff") [[details]](/attachment.cgi?id=8540982&action=edit "bug-1114058-v1.diff") [[diff]](/attachment.cgi?id=8540982&action=diff "bug-1114058-v1.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8540982)
bug-1114058-v1.diff
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Not easily.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
Nope.
Which older supported branches are affected by this flaw?
The potential for the bug to exist goes back to 2012, but I think the only actual instance is from May 2014. So I think we need to backport everywhere that sourced from m-c around that time.
If not all supported branches, which bug introduced the flaw?
[Bug 1010441](/show_bug.cgi?id=1010441 "RESOLVED FIXED - Keep RegExpShared around when preserving jitcode")
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
It's a one-liner and I don't think the code has changed much since May.
How likely is this patch to cause regressions; how much testing does it need?
It should be very low risk.
[Attachment #8540982](/attachment.cgi?id=8540982&action=edit "bug-1114058-v1.diff") -
Flags: sec-approval?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114058#a778933_406194)• 10 years ago |

[status-firefox34](/buglist.cgi?f1=cf_status_firefox34&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=wontfix)
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=affected)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected)
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114058#a781865_75935)• 10 years ago |

[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected)
[status-b2g-v2.0M](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=affected)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=affected)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1114058#c12)• 10 years ago |
|  | |

Comment on [attachment 8540982](/attachment.cgi?id=8540982 "bug-1114058-v1.diff") [[details]](/attachment.cgi?id=8540982&action=edit "bug-1114058-v1.diff") [[diff]](/attachment.cgi?id=8540982&action=diff "bug-1114058-v1.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8540982)
bug-1114058-v1.diff
sec-approval+.
We should get this checked into trunk and nominated for Beta and Aurora branches ASAP as it is running the risk of not getting into Beta (and therefore not into 35).
[Attachment #8540982](/attachment.cgi?id=8540982&action=edit "bug-1114058-v1.diff") -
Flags: sec-approval? → sec-approval+

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1114058#c13)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/f1c8fc215969>

|  | [Phil Ringnalda (:philor)](/user_profile?user_id=135518) |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1114058#c14)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/f1c8fc215969>Status: ASSIGNED → RESOLVEDClosed: 10 years ago
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla37

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114058#a1056846_75935)• 10 years ago |

[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114058#a1061458_395101)• 10 years ago |

Status: RESOLVED → VERIFIED
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=verified)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1114058#c15)• 10 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1114058#c16)• 10 years ago |
|  | |

So this has almost-certainly missed Fx35 now (the RC build is due to be spun today). Can we at least get approval requests for Aurora?Flags: needinfo?(terrence)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114058#a1383987_1689)• 10 years ago |

[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix)
[tracking-firefox36](/buglist.cgi?f1=cf_tracking_firefox36&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B)

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1114058#c17)• 10 years ago |
|  | |

Comment on [attachment 8540982](/attachment.cgi?id=8540982 "bug-1114058-v1.diff") [[details]](/attachment.cgi?id=8540982&action=edit "bug-1114058-v1.diff") [[diff]](/attachment.cgi?id=8540982&action=diff "bug-1114058-v1.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8540982)
bug-1114058-v1.diff
Approval Request Comment
[Feature/regressing bug #]: [Bug 1010441](/show_bug.cgi?id=1010441 "RESOLVED FIXED - Keep RegExpShared around when preserving jitcode").
[User impact if declined]: Potential security risk.
[Describe test coverage new/current, TBPL]: On m-i for a week.
[Risks and why]: Low - this switches the caller to a different, but existing, primitive, so is unlikely to break other things or introduce new bugs.
[String/UUID change made/needed]: None.Flags: needinfo?(terrence)
[Attachment #8540982](/attachment.cgi?id=8540982&action=edit "bug-1114058-v1.diff") -
Flags: approval-mozilla-aurora?

|  | [Sylvestre Ledru [:Sylvestre]](/user_profile?user_id=495955) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114058#a1431199_495955)• 10 years ago |

[Attachment #8540982](/attachment.cgi?id=8540982&action=edit "bug-1114058-v1.diff") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1114058#c18)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/b8eb3fd1e2c0>
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1114058#c19)• 10 years ago |
|  | |

Terrence, can you please help rebase this for b2g34/b2g32?Flags: needinfo?(terrence)

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1114058#c20)• 10 years ago |
|  | |

Attached patch

[backport-32.diff](attachment.cgi?id=8546830&action=diff)
— [Details](attachment.cgi?id=8546830&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8546830)

[Attachment #8546830](/attachment.cgi?id=8546830&action=edit "backport-32.diff") -
Flags: review+
[Attachment #8546830](/attachment.cgi?id=8546830&action=edit "backport-32.diff") -
Flags: checkin?(ryanvm)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1114058#c21)• 10 years ago |
|  | |

Comment on [attachment 8546830](/attachment.cgi?id=8546830 "backport-32.diff") [[details]](/attachment.cgi?id=8546830&action=edit "backport-32.diff") [[diff]](/attachment.cgi?id=8546830&action=diff "backport-32.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8546830)
backport-32.diff
<https://hg.mozilla.org/releases/mozilla-b2g32_v2_0/rev/e02e85b6a0c3>
<https://hg.mozilla.org/releases/mozilla-b2g32_v2_0m/rev/e02e85b6a0c3>
[Attachment #8546830](/attachment.cgi?id=8546830&action=edit "backport-32.diff") -
Flags: checkin?(ryanvm) → checkin+

|  | [Terrence Cole [:terrence]](/user_profile?user_id=231770)  Assignee |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1114058#c22)• 10 years ago |
|  | |

Attached patch

[backport-34.diff](attachment.cgi?id=8546841&action=diff)
— [Details](attachment.cgi?id=8546841&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8546841)

Flags: needinfo?(terrence)
[Attachment #8546841](/attachment.cgi?id=8546841&action=edit "backport-34.diff") -
Flags: review+
[Attachment #8546841](/attachment.cgi?id=8546841&action=edit "backport-34.diff") -
Flags: checkin?(ryanvm)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1114058#c23)• 10 years ago |
|  | |

Comment on [attachment 8546841](/attachment.cgi?id=8546841 "backport-34.diff") [[details]](/attachment.cgi?id=8546841&action=edit "backport-34.diff") [[diff]](/attachment.cgi?id=8546841&action=diff "backport-34.diff") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1114058&attachment=8546841)
backport-34.diff
<https://hg.mozilla.org/releases/mozilla-b2g34_v2_1/rev/273f24a1d1fe>
[Attachment #8546841](/attachment.cgi?id=8546841&action=edit "backport-34.diff") -
Flags: checkin?(ryanvm) → checkin+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114058#a1739782_75935)• 10 years ago |

[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-b2g-v2.0M](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=fixed)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114058#a5124795_280903)• 10 years ago |

Whiteboard: [jsbugmon:update] → [jsbugmon:update][adv-main36+]

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114058#a22080236_546015)• 9 years ago |

Group: core-security → core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114058#a45985048_1689)• 9 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1114058&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_deae0163_20250124_141109.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/ILMOBK52DT6C5GSMH3ZZ6HLRQMDSK7RG/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/ILMOBK52DT6C5GSMH3ZZ6HLRQMDSK7RG/)

[Manage this list](/manage/lists/updates.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/ILMOBK52DT6C5GSMH3ZZ6HLRQMDSK7RG/)
[Sign Up](/accounts/signup/?next=/archives/list/updates%40lists.opensuse.org/message/ILMOBK52DT6C5GSMH3ZZ6HLRQMDSK7RG/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/updates%40lists.opensuse.org/thread/ILMOBK52DT6C5GSMH3ZZ6HLRQMDSK7RG/#ILMOBK52DT6C5GSMH3ZZ6HLRQMDSK7RG)

# openSUSE-SU-2015:0570-1: moderate: Security update for seamonkey

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

23 Mar
2015

23 Mar
'15

15:04

openSUSE Security Update: Security update for seamonkey
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2015:0570-1
Rating: moderate
References: #917597
Cross-References: 2015-0819 2015-0820 2015-0821 2015-0822 2015-0823
2015-0824 2015-0825 2015-0826 2015-0827 2015-0828
2015-0829 2015-0830 2015-0831 2015-0832 2015-0833
2015-0834 2015-0835 2015-0836
Affected Products:
openSUSE 13.2
openSUSE 13.1
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 18 vulnerabilities is now available.
Description:
SeaMonkey was updated to 2.33 (bnc#917597)
\* MFSA 2015-11/CVE-2015-0835/CVE-2015-0836 Miscellaneous memory safety
hazards
\* MFSA 2015-12/CVE-2015-0833 (bmo#945192) Invoking Mozilla updater will
load locally stored DLL files (Windows only)
\* MFSA 2015-13/CVE-2015-0832 (bmo#1065909) Appended period to hostnames
can bypass HPKP and HSTS protections
\* MFSA 2015-14/CVE-2015-0830 (bmo#1110488) Malicious WebGL content crash
when writing strings
\* MFSA 2015-15/CVE-2015-0834 (bmo#1098314) TLS TURN and STUN connections
silently fail to simple TCP connections
\* MFSA 2015-16/CVE-2015-0831 (bmo#1130514) Use-after-free in IndexedDB
\* MFSA 2015-17/CVE-2015-0829 (bmo#1128939) Buffer overflow in
libstagefright during MP4 video playback
\* MFSA 2015-18/CVE-2015-0828 (bmo#1030667, bmo#988675) Double-free when
using non-default memory allocators with a zero-length XHR
\* MFSA 2015-19/CVE-2015-0827 (bmo#1117304) Out-of-bounds read and write
while rendering SVG content
\* MFSA 2015-20/CVE-2015-0826 (bmo#1092363) Buffer overflow during CSS
restyling
\* MFSA 2015-21/CVE-2015-0825 (bmo#1092370) Buffer underflow during MP3
playback
\* MFSA 2015-22/CVE-2015-0824 (bmo#1095925) Crash using DrawTarget in Cairo
graphics library
\* MFSA 2015-23/CVE-2015-0823 (bmo#1098497) Use-after-free in Developer
Console date with OpenType Sanitiser
\* MFSA 2015-24/CVE-2015-0822 (bmo#1110557) Reading of local files through
manipulation of form autocomplete
\* MFSA 2015-25/CVE-2015-0821 (bmo#1111960) Local files or privileged URLs
in pages can be opened into new tabs
\* MFSA 2015-26/CVE-2015-0819 (bmo#1079554) UI Tour whitelisted sites in
background tab can spoof foreground tabs
\* MFSA 2015-27CVE-2015-0820 (bmo#1125398) Caja Compiler JavaScript sandbox
bypass
Update to SeaMonkey 2.32.1
\* fixed MailNews feeds not updating
\* fixed selected profile in Profile Manager not remembered
\* fixed opening a bookmark folder in tabs on Linux
\* fixed Troubleshooting Information (about:support) with the Modern theme
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.2:
zypper in -t patch openSUSE-2015-250=1
- openSUSE 13.1:
zypper in -t patch openSUSE-2015-250=1
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.2 (i586 x86\_64):
seamonkey-2.33-12.1
seamonkey-debuginfo-2.33-12.1
seamonkey-debugsource-2.33-12.1
seamonkey-dom-inspector-2.33-12.1
seamonkey-irc-2.33-12.1
seamonkey-translations-common-2.33-12.1
seamonkey-translations-other-2.33-12.1
- openSUSE 13.1 (i586 x86\_64):
seamonkey-2.33-48.1
seamonkey-debuginfo-2.33-48.1
seamonkey-debugsource-2.33-48.1
seamonkey-dom-inspector-2.33-48.1
seamonkey-irc-2.33-48.1
seamonkey-translations-common-2.33-48.1
seamonkey-translations-other-2.33-48.1
References:
<http://support.novell.com/security/cve/2015-0819.html>
<http://support.novell.com/security/cve/2015-0820.html>
<http://support.novell.com/security/cve/2015-0821.html>
<http://support.novell.com/security/cve/2015-0822.html>
<http://support.novell.com/security/cve/2015-0823.html>
<http://support.novell.com/security/cve/2015-0824.html>
<http://support.novell.com/security/cve/2015-0825.html>
<http://support.novell.com/security/cve/2015-0826.html>
<http://support.novell.com/security/cve/2015-0827.html>
<http://support.novell.com/security/cve/2015-0828.html>
<http://support.novell.com/security/cve/2015-0829.html>
<http://support.novell.com/security/cve/2015-0830.html>
<http://support.novell.com/security/cve/2015-0831.html>
<http://support.novell.com/security/cve/2015-0832.html>
<http://support.novell.com/security/cve/2015-0833.html>
<http://support.novell.com/security/cve/2015-0834.html>
<http://support.novell.com/security/cve/2015-0835.html>
<http://support.novell.com/security/cve/2015-0836.html>
<https://bugzilla.suse.com/917597>

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/updates%40lists.opensuse.org/message/ILMOBK52DT6C5GSMH3ZZ6HLRQMDSK7RG/)
Use email software

[Back to the thread](/archives/list/updates%40lists.opensuse.org/thread/ILMOBK52DT6C5GSMH3ZZ6HLRQMDSK7RG/#ILMOBK52DT6C5GSMH3ZZ6HLRQMDSK7RG)

[Back to the list](/archives/list/updates%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.suse.com_890085dd_20250126_012829.html ===


| Bugzilla – Bug 917597 | VUL-0: MozillaFirefox 36 security release | Last modified: 2021-10-14 14:48:51 UTC |
| --- | --- | --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D917597)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

[**Bug 917597**](show_bug.cgi?id=917597)
- VUL-0: MozillaFirefox 36 security release

[Summary:](page.cgi?id=glossary.html#short_desc "The bug summary is a short sentence which succinctly describes what the bug is about.")
VUL-0: MozillaFirefox 36 security release

| | [Status](page.cgi?id=status_resolution_matrix.html): | RESOLVED FIXED | | --- | --- | |  | | | [Alias:](page.cgi?id=glossary.html#alias "A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla.") | None | |  | | | [Product:](describecomponents.cgi "Bugs are categorised into Products and Components. Select a Classification to narrow down this list.") | SUSE Security Incidents | | [Classification:](page.cgi?id=glossary.html#classification "Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation.") | Novell Products | | [Component:](describecomponents.cgi?product=SUSE Security Incidents "Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list.") | Incidents ([show other bugs](buglist.cgi?component=Incidents&product=SUSE%20Security%20Incidents&bug_status=__open__)) | | [Version:](page.cgi?id=glossary.html#version "The version field defines the version of the software the bug was found in.") | unspecified | | [Hardware:](page.cgi?id=glossary.html#rep_platform "The hardware platform the bug was observed on. Note: When searching, selecting the option \"All\" only finds bugs whose value for this field is literally the word \"All\".") | All All | |  | | | [Priority](page.cgi?id=glossary.html#priority): | P3 - Medium **Severity**: Critical | | [Target Milestone:](page.cgi?id=glossary.html#target_milestone "The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it.") | --- | | [Deadline](page.cgi?id=fields.html#deadline): | 2015-03-04 | | [Assignee:](page.cgi?id=glossary.html#assigned_to "The person in charge of resolving the bug.") | Petr Cerny | | [QA Contact:](page.cgi?id=glossary.html#qa_contact "The person responsible for confirming this bug if it is unconfirmed, and for verifying the fix once the bug has been resolved.") | Security Team bot | |  | | | [URL:](page.cgi?id=glossary.html#bug_file_loc "Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen.") |  | | [Whiteboard:](page.cgi?id=glossary.html#status_whiteboard "Each bug has a free-form single line text entry box for adding tags and status information.") | maint:released:sle11-sp1:60822 maint:... | | [Keywords:](describekeywords.cgi "You can add keywords from a defined list to bugs, in order to easily identify and group them.") |  | |  | | | [Depends on:](page.cgi?id=glossary.html#dependson "The bugs listed here must be resolved before this bug can be resolved.") |  | | [Blocks:](page.cgi?id=glossary.html#blocked "This bug must be resolved before the bugs listed in this field can be resolved.") |  | |  | | Reported: | 2015-02-12 11:53 UTC by Petr Cerny | | --- | --- | | Modified: | 2021-10-14 14:48 UTC ([History](show_activity.cgi?id=917597)) | | CC List: | 6 users (show)  jsegitz meissner pcerny security-team tetsuya.inoue wolfgang | |  | | | [See Also:](page.cgi?id=glossary.html#see_also "This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields.") |  | | [Found By:](page.cgi?id=glossary.html#cf_foundby "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Services Priority:](page.cgi?id=glossary.html#cf_nts_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Business Priority:](page.cgi?id=glossary.html#cf_biz_priority "A custom Free Text field in this installation of Bugzilla.") |  | | [Blocker:](page.cgi?id=glossary.html#cf_blocker "A custom Drop Down field in this installation of Bugzilla.") | --- | | [Marketing QA Status:](page.cgi?id=glossary.html#cf_marketing_qa_status "A custom Drop Down field in this installation of Bugzilla.") | --- | | [IT Deployment:](page.cgi?id=glossary.html#cf_it_deployment "A custom Drop Down field in this installation of Bugzilla.") | --- | |  | |  * [Clone This Bug](enter_bug.cgi?cloned_bug_id=917597) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| --- | | |

| | Attachments | | | --- | --- | | [Add an attachment](attachment.cgi?bugid=917597&action=enter) (proposed patch, testcase, etc.) | |   | Note You need to [log in](show_bug.cgi?id=917597&GoAheadAndLogIn=1) before you can comment on or make changes to this bug. | | --- | |  |
| --- | --- | --- | --- | --- | --- | --- |

| [Description](show_bug.cgi?id=917597#c0)  Petr Cerny   2015-02-12 11:53:39 UTC  ``` Planned release date is 2015-02-24  Firefox/Thunderbird/XULRunner 36 Firefox/Thunderbird/XULRunner 31.5.0 ESR Seamonkey 2.33 ``` [Comment 1](show_bug.cgi?id=917597#c1)  Swamp Workflow Management   2015-02-12 23:00:15 UTC  ``` bugbot adjusting priority ``` [Comment 3](show_bug.cgi?id=917597#c3)  Bernhard Wiedemann   2015-02-25 07:00:08 UTC  ``` This is an autogenerated message for OBS integration: This bug (917597) was mentioned in <https://build.opensuse.org/request/show/287631> 13.1 / MozillaFirefox <https://build.opensuse.org/request/show/287632> 13.2 / MozillaFirefox <https://build.opensuse.org/request/show/287633> Factory / MozillaFirefox <https://build.opensuse.org/request/show/287634> 13.1 / MozillaThunderbird <https://build.opensuse.org/request/show/287635> 13.2 / MozillaThunderbird <https://build.opensuse.org/request/show/287636> Factory / MozillaThunderbird <https://build.opensuse.org/request/show/287638> Factory / xulrunner ``` [Comment 4](show_bug.cgi?id=917597#c4)  Swamp Workflow Management   2015-02-25 09:29:32 UTC  ``` An update workflow for this issue was started. This issue was rated as important. Please submit fixed packages until 2015-03-04. When done, reassign the bug to security-team@suse.de. <https://swamp.suse.de/webswamp/wf/60788> ``` [Comment 7](show_bug.cgi?id=917597#c7)  Swamp Workflow Management   2015-03-01 10:05:18 UTC  ``` openSUSE-SU-2015:0404-1: An update that fixes 18 vulnerabilities is now available.  Category: security (important) Bug References: 910647,917597 CVE References: CVE-2014-1569,CVE-2015-0819,CVE-2015-0820,CVE-2015-0821,CVE-2015-0822,CVE-2015-0823,CVE-2015-0824,CVE-2015-0825,CVE-2015-0826,CVE-2015-0827,CVE-2015-0828,CVE-2015-0829,CVE-2015-0830,CVE-2015-0831,CVE-2015-0832,CVE-2015-0834,CVE-2015-0835,CVE-2015-0836 Sources used: openSUSE 13.2 (src):    MozillaFirefox-36.0-14.2, mozilla-nss-3.17.4-9.1 openSUSE 13.1 (src):    MozillaFirefox-36.0-59.2, mozilla-nss-3.17.4-52.1 ``` [Comment 8](show_bug.cgi?id=917597#c8)  Swamp Workflow Management   2015-03-03 15:05:09 UTC  ``` SUSE-SU-2015:0412-1: An update that fixes 5 vulnerabilities is now available.  Category: security (important) Bug References: 917597 CVE References: CVE-2015-0822,CVE-2015-0827,CVE-2015-0831,CVE-2015-0835,CVE-2015-0836 Sources used: SUSE Linux Enterprise Software Development Kit 12 (src):    MozillaFirefox-31.5.0esr-24.1 SUSE Linux Enterprise Server 12 (src):    MozillaFirefox-31.5.0esr-24.1 SUSE Linux Enterprise Desktop 12 (src):    MozillaFirefox-31.5.0esr-24.1 ``` [Comment 10](show_bug.cgi?id=917597#c10)  Marcus Meissner   2015-03-06 14:02:53 UTC  ``` released ``` [Comment 11](show_bug.cgi?id=917597#c11)  Swamp Workflow Management   2015-03-06 23:05:39 UTC  ``` SUSE-SU-2015:0446-1: An update that fixes four vulnerabilities is now available.  Category: security (important) Bug References: 916196,917100,917300,917597 CVE References: CVE-2015-0822,CVE-2015-0827,CVE-2015-0831,CVE-2015-0836 Sources used: SUSE Linux Enterprise Software Development Kit 11 SP3 (src):    MozillaFirefox-31.5.0esr-0.7.1 SUSE Linux Enterprise Server 11 SP3 for VMware (src):    MozillaFirefox-31.5.0esr-0.7.1 SUSE Linux Enterprise Server 11 SP3 (src):    MozillaFirefox-31.5.0esr-0.7.1 SUSE Linux Enterprise Desktop 11 SP3 (src):    MozillaFirefox-31.5.0esr-0.7.1 ``` [Comment 12](show_bug.cgi?id=917597#c12)  Swamp Workflow Management   2015-03-07 00:05:13 UTC  ``` SUSE-SU-2015:0447-1: An update that fixes four vulnerabilities is now available.  Category: security (important) Bug References: 917597 CVE References: CVE-2015-0822,CVE-2015-0827,CVE-2015-0831,CVE-2015-0836 Sources used: SUSE Linux Enterprise Server 11 SP2 LTSS (src):    MozillaFirefox-31.5.0esr-0.4.2.1 SUSE Linux Enterprise Server 11 SP1 LTSS (src):    MozillaFirefox-31.5.0esr-0.4.2.1 SUSE Linux Enterprise Server 10 SP4 LTSS (src):    MozillaFirefox-31.5.0esr-0.5.1 ``` [Comment 13](show_bug.cgi?id=917597#c13)  Swamp Workflow Management   2015-03-07 10:04:59 UTC  ``` openSUSE-SU-2015:0448-1: An update that fixes four vulnerabilities is now available.  Category: security (important) Bug References: 917597 CVE References: CVE-2015-0822,CVE-2015-0827,CVE-2015-0831,CVE-2015-0836 Sources used: openSUSE 13.2 (src):    MozillaThunderbird-31.5.0-12.2 openSUSE 13.1 (src):    MozillaThunderbird-31.5.0-70.47.2 ``` [Comment 14](show_bug.cgi?id=917597#c14)  Bernhard Wiedemann   2015-03-16 22:00:07 UTC  ``` This is an autogenerated message for OBS integration: This bug (917597) was mentioned in <https://build.opensuse.org/request/show/291108> Factory / seamonkey <https://build.opensuse.org/request/show/291109> 13.2 / seamonkey <https://build.opensuse.org/request/show/291110> 13.1 / seamonkey ``` [Comment 15](show_bug.cgi?id=917597#c15)  Bernhard Wiedemann   2015-03-22 13:00:07 UTC  ``` This is an autogenerated message for OBS integration: This bug (917597) was mentioned in <https://build.opensuse.org/request/show/292316> 13.1 / seamonkey <https://build.opensuse.org/request/show/292317> 13.2 / seamonkey <https://build.opensuse.org/request/show/292318> Evergreen:11.4 / firefox31 ``` [Comment 16](show_bug.cgi?id=917597#c16)  Bernhard Wiedemann   2015-03-22 15:00:19 UTC  ``` This is an autogenerated message for OBS integration: This bug (917597) was mentioned in <https://build.opensuse.org/request/show/292323> Evergreen:11.4 / MozillaFirefox <https://build.opensuse.org/request/show/292324> Evergreen:11.4 / MozillaThunderbird ``` [Comment 17](show_bug.cgi?id=917597#c17)  Swamp Workflow Management   2015-03-22 20:04:51 UTC  ``` openSUSE-SU-2015:0567-1: An update that fixes 7 vulnerabilities is now available.  Category: security (important) Bug References: 917597,923534 CVE References: CVE-2015-0817,CVE-2015-0818,CVE-2015-0822,CVE-2015-0827,CVE-2015-0831,CVE-2015-0833,CVE-2015-0836 Sources used: openSUSE Evergreen 11.4 (src):    MozillaFirefox-31.5.3-137.1 ``` [Comment 18](show_bug.cgi?id=917597#c18)  Swamp Workflow Management   2015-03-23 15:05:00 UTC  ``` openSUSE-SU-2015:0570-1: An update that fixes 18 vulnerabilities is now available.  Category: security (moderate) Bug References: 917597 CVE References: 2015-0819,2015-0820,2015-0821,2015-0822,2015-0823,2015-0824,2015-0825,2015-0826,2015-0827,2015-0828,2015-0829,2015-0830,2015-0831,2015-0832,2015-0833,2015-0834,2015-0835,2015-0836 Sources used: openSUSE 13.2 (src):    seamonkey-2.33-12.1 openSUSE 13.1 (src):    seamonkey-2.33-48.1 ``` [Comment 19](show_bug.cgi?id=917597#c19)  Swamp Workflow Management   2015-07-18 17:09:07 UTC  ``` openSUSE-SU-2015:1266-1: An update that fixes 52 vulnerabilities is now available.  Category: security (important) Bug References: 894370,900639,900941,908009,910669,917597,925368,930622,935979 CVE References: CVE-2011-3079,CVE-2014-1553,CVE-2014-1562,CVE-2014-1563,CVE-2014-1564,CVE-2014-1565,CVE-2014-1567,CVE-2014-1574,CVE-2014-1576,CVE-2014-1577,CVE-2014-1578,CVE-2014-1581,CVE-2014-1585,CVE-2014-1586,CVE-2014-1587,CVE-2014-1590,CVE-2014-1592,CVE-2014-1593,CVE-2014-1594,CVE-2014-8634,CVE-2014-8635,CVE-2014-8638,CVE-2014-8639,CVE-2015-0801,CVE-2015-0807,CVE-2015-0813,CVE-2015-0815,CVE-2015-0816,CVE-2015-0822,CVE-2015-0827,CVE-2015-0831,CVE-2015-0833,CVE-2015-0836,CVE-2015-2708,CVE-2015-2710,CVE-2015-2713,CVE-2015-2716,CVE-2015-2721,CVE-2015-2722,CVE-2015-2724,CVE-2015-2728,CVE-2015-2730,CVE-2015-2733,CVE-2015-2734,CVE-2015-2735,CVE-2015-2736,CVE-2015-2737,CVE-2015-2738,CVE-2015-2739,CVE-2015-2740,CVE-2015-2743,CVE-2015-4000 Sources used: openSUSE Evergreen 11.4 (src):    MozillaFirefox-31.8.0-143.1, MozillaThunderbird-31.8.0-110.1, mozilla-nspr-4.10.8-52.1, mozilla-nss-3.19.2-107.1 ``` |  |
| --- | --- |

---

* [Format For Printing](show_bug.cgi?format=multiple&id=917597)
* - [XML](show_bug.cgi?ctype=xml&id=917597)
* - [Clone This Bug](enter_bug.cgi?cloned_bug_id=917597)
* - Top of page

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D917597)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)



=== Content from bugzilla.mozilla.org_3089093b_20250124_141121.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1118894)
* [XML](/show_bug.cgi?ctype=xml&id=1118894)

Closed
[Bug 1118894](/show_bug.cgi?id=1118894)

Opened 10 years ago
Closed 10 years ago

# Assertion failure: pred->isLoopBackedge(), at js/src/jit/IonAnalysis.cpp:1962

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: pred->isLoopBackedge(), at js/src/jit/IonAnalysis.cpp:1962

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla38

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Score | --- |
| --- | --- |
| Accessibility Severity | --- |
| Performance Impact | --- |
| Webcompat Priority | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox35 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix) |
| firefox36 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed) |
| firefox37 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed) |
| firefox38 | --- | [verified](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=verified) |
| firefox-esr31 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |
| b2g-v2.0 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed) |
| b2g-v2.1 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=fixed) |
| b2g-v2.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed) |
| b2g-master | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox35 |  | wontfix |
| firefox36 |  | fixed |
| firefox37 |  | fixed |
| firefox38 |  | verified |
| firefox-esr31 |  | unaffected |
| b2g-v1.4 |  | unaffected |
| b2g-v2.0 |  | fixed |
| b2g-v2.1 |  | fixed |
| b2g-v2.2 |  | fixed |
| relnote-firefox |  | --- |
| b2g-master |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: sunfish)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/d0f20c3888e5ac206b6ede4d4dc5c2ce?d=mm&size=40)  [sunfish](/user_profile?user_id=468136)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[1096255](/show_bug.cgi?id=1096255 "RESOLVED DUPLICATE - Assertion failure: pred->isLoopBackedge(), at c:\Users\mozilla\debug-builds\mozilla-central\js\src\jit/IonAnalysis.cpp:1918")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [jsbugmon:update,ignore][adv-main36+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:update,ignore][adv-main36+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c12 "10 years ago") | ? |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | ? |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file)

| [osr-entry-to-former-loop-blocks.patch](/attachment.cgi?id=8546325)  [10 years ago](#c6)  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)   2.89 KB, patch | jandem : [review+](#c7 "10 years ago")  abillings : [sec-approval+](#a525404_280903 "10 years ago") | [Details](/attachment.cgi?id=8546325&action=edit) | [Diff](/attachment.cgi?id=8546325&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1118894&attachment=8546325) |
| --- | --- | --- |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1118894#c0)• 10 years ago |
|  | |

The following testcase crashes on mozilla-central revision 33781a3a5201 (build with --enable-optimize --enable-posix-nspr-emulation --enable-valgrind --enable-gczeal --target=i686-pc-linux-gnu --enable-debug, run with --fuzzing-safe --thread-count=2):
testcase()
function testcase() {
var tokenCodes = {};
tokenCodes['const'] = 0;
var arr = ['const'];
for (var p in tokenCodes) {
for (var p1 in arr) {
if (arr[p1] === p) {
var p1 = 100 \* 1000;
for (var arr = 0; arr != p1; ++arr) {}
}
}
}
}
Backtrace:
Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 0xf7887b40 (LWP 16214)]
0x0838200d in AssertReversePostorder (graph=...) at js/src/jit/IonAnalysis.cpp:1962
1962 MOZ\_ASSERT(pred->isLoopBackedge());
#0 0x0838200d in AssertReversePostorder (graph=...) at js/src/jit/IonAnalysis.cpp:1962
#1 0x083821e0 in AssertGraphCoherency (graph=...) at js/src/jit/IonAnalysis.cpp:2034
#2 AssertGraphCoherency (graph=...) at js/src/jit/IonAnalysis.cpp:2111
#3 js::jit::AssertExtendedGraphCoherency (graph=...) at js/src/jit/IonAnalysis.cpp:2121
#4 0x083d55d1 in js::jit::OptimizeMIR (mir=0x973f030) at js/src/jit/Ion.cpp:1567
#5 0x083d5b66 in js::jit::CompileBackEnd (mir=0x973f030) at js/src/jit/Ion.cpp:1727
#6 0x086c0ea5 in js::HelperThread::handleIonWorkload (this=0x9674480) at js/src/vm/HelperThreads.cpp:1084
#7 0x086c25c9 in js::HelperThread::threadLoop (this=0x9674480) at js/src/vm/HelperThreads.cpp:1380
#8 0x0873ae35 in nspr::Thread::ThreadRoutine (arg=0x9673168) at js/src/vm/PosixNSPR.cpp:45
#9 0xf7fb8d4c in start\_thread () from /lib/i386-linux-gnu/libpthread.so.0
#10 0xf7dacdde in clone () from /lib/i386-linux-gnu/libc.so.6
eax 0x0 0
ebx 0x963aff4 157528052
ecx 0xf7e648ac -135903060
edx 0x0 0
esi 0x1 1
edi 0x9750cf8 158665976
ebp 0xf7886e98 4152913560
esp 0xf7886e60 4152913504
eip 0x838200d <AssertReversePostorder(js::jit::MIRGraph&)+157>
=> 0x838200d <AssertReversePostorder(js::jit::MIRGraph&)+157>: movl $0x7b,0x0
0x8382017 <AssertReversePostorder(js::jit::MIRGraph&)+167>: call 0x804a9d0 <abort@plt>

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1118894#a22175_395101)• 10 years ago |

Whiteboard: [jsbugmon:update,bisect] → [jsbugmon:update]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1118894#c1)• 10 years ago |
|  | |

JSBugMon: Bisection requested, result:
autoBisect shows this is probably related to the following changeset:
The first bad revision is:
changeset: <https://hg.mozilla.org/mozilla-central/rev/f8e5c5ed14cb>
user: Jan de Mooij
date: Sat Dec 27 13:55:06 2014 +0100
summary: [Bug 1114574](/show_bug.cgi?id=1114574 "RESOLVED FIXED - Improve MCompare::tryFold") - Refactor and improve MCompare::tryFold. r=h4writer
This iteration took 584.079 seconds to run.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1118894#c2)• 10 years ago |
|  | |

Needinfo from jandem based on [comment 1](/show_bug.cgi?id=1118894#c1 "VERIFIED FIXED - Assertion failure: pred->isLoopBackedge(), at js/src/jit/IonAnalysis.cpp:1962").Flags: needinfo?(jdemooij)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1118894#c3)• 10 years ago |
|  | |

I think [bug 1114574](/show_bug.cgi?id=1114574 "RESOLVED FIXED - Improve MCompare::tryFold") exposed an existing bug in the MakeLoopsContiguous pass. We can now probably fold the if-condition, but I'm pretty sure it was possible to trigger this before that.Flags: needinfo?(jdemooij) → needinfo?(sunfish)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1118894#c4)• 10 years ago |
|  | |

Simpler testcase:
function f() {
var arr = ["c"];
for (var i=0; i<1; i++) {
if (arr[0] === "c") {
for (var j=0; j<100000; j++) {};
}
}
}
f();
What's happening is probably that we don't have good type information for arr[0] because it runs in the interpreter initially, and the arr[0] === "c" is folded to false, and this confuses MakeLoopsContiguous.

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1118894#c5)• 10 years ago |
|  | |

As mentioned in [bug 1096255](/show_bug.cgi?id=1096255 "RESOLVED DUPLICATE - Assertion failure: pred->isLoopBackedge(), at c:\Users\mozilla\debug-builds\mozilla-central\js\src\jit/IonAnalysis.cpp:1918"), it's possible that this is the same as that bug.
Restricting access to this bug out of caution. The consequence of this bug is that Ion's CFG may not satisfy RPO invariants, which a bunch of things depend on, however I haven't investigated the specifics of what could happen yet.Group: core-security

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1118894#c6)• 10 years ago |
|  | |

Attached patch

[osr-entry-to-former-loop-blocks.patch](attachment.cgi?id=8546325&action=diff)
— [Details](attachment.cgi?id=8546325&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1118894&attachment=8546325)

See the comment in the patch for an explanation of what's going on here.Assignee: nobody → sunfishFlags: needinfo?(sunfish)
[Attachment #8546325](/attachment.cgi?id=8546325&action=edit "osr-entry-to-former-loop-blocks.patch") -
Flags: review?(jdemooij)

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1118894#c7)• 10 years ago |
|  | |

Comment on [attachment 8546325](/attachment.cgi?id=8546325 "osr-entry-to-former-loop-blocks.patch") [[details]](/attachment.cgi?id=8546325&action=edit "osr-entry-to-former-loop-blocks.patch") [[diff]](/attachment.cgi?id=8546325&action=diff "osr-entry-to-former-loop-blocks.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1118894&attachment=8546325)
osr-entry-to-former-loop-blocks.patch
Review of [attachment 8546325](/attachment.cgi?id=8546325 "osr-entry-to-former-loop-blocks.patch") [[details]](/attachment.cgi?id=8546325&action=edit "osr-entry-to-former-loop-blocks.patch") [[diff]](/attachment.cgi?id=8546325&action=diff "osr-entry-to-former-loop-blocks.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1118894&attachment=8546325):
-----------------------------------------------------------------
::: js/src/jit/IonAnalysis.cpp
@@ +3482,5 @@
> // Visit all the blocks from the loop header to the loop backedge.
> size\_t headerId = header->id();
> size\_t inLoopId = headerId;
> size\_t notInLoopId = inLoopId + numMarked;
> + size\_t numOSRDominated = 0;
Nit: this could be DebugOnly<size\_t>, I think. May have to change ++numOSRDominated to numOSRDominated++ because it looks like DebugOnly overloads the postfix one but not the prefix one.
[Attachment #8546325](/attachment.cgi?id=8546325&action=edit "osr-entry-to-former-loop-blocks.patch") -
Flags: review?(jdemooij) → review+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1118894#a514428_1689)• 10 years ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1118894#c9)• 10 years ago |
|  | |

Comment on [attachment 8546325](/attachment.cgi?id=8546325 "osr-entry-to-former-loop-blocks.patch") [[details]](/attachment.cgi?id=8546325&action=edit "osr-entry-to-former-loop-blocks.patch") [[diff]](/attachment.cgi?id=8546325&action=diff "osr-entry-to-former-loop-blocks.patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1118894&attachment=8546325)
osr-entry-to-former-loop-blocks.patch
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Not easy. It would require some amount of compiler knowledge to figure out the conditions needed to actually exploit this, if it is actually exploitable.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
Comments in the patch describe how to get an assertion failure, however not to actually get an exploitable crash.
Which older supported branches are affected by this flaw?
mozilla32 and later; mozilla-release, mozilla-beta, mozilla-aurora, and mozilla-central, but not esr31.
If not all supported branches, which bug introduced the flaw?
[Bug 844779](/show_bug.cgi?id=844779 "RESOLVED FIXED - IonMonkey: Improve order of blocks in rpo").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Backports would be easy to create, and low-risk.
How likely is this patch to cause regressions; how much testing does it need?
Unlikely. The change is pretty simple and is just disabling an optimization.
[Attachment #8546325](/attachment.cgi?id=8546325&action=edit "osr-entry-to-former-loop-blocks.patch") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1118894#c10)• 10 years ago |
|  | |

Sec-approval+ for checkin on January 26 (or later). We'll want it on Aurora and Beta after that too.Whiteboard: [jsbugmon:update] → [jsbugmon:update][checkin on 1/26]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1118894#a525404_280903)• 10 years ago |

[Attachment #8546325](/attachment.cgi?id=8546325&action=edit "osr-entry-to-former-loop-blocks.patch") -
Flags: sec-approval? → sec-approval+

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1118894#a631788_395101)• 10 years ago |

Whiteboard: [jsbugmon:update][checkin on 1/26] → [checkin on 1/26] [jsbugmon:update,ignore]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1118894#c11)• 10 years ago |
|  | |

JSBugMon: The testcase found in this bug no longer reproduces (tried revision c1f6345f2803).

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1118894#c12)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/946d72dae3df>
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=affected)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected)
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=affected)
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected)
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected)
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected)Flags: in-testsuite?Whiteboard: [checkin on 1/26] [jsbugmon:update,ignore] → [jsbugmon:update,ignore]

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1118894#c13)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/946d72dae3df>Status: NEW → RESOLVEDClosed: 10 years ago
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed)
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla38

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1118894#a1492315_395101)• 10 years ago |

Status: RESOLVED → VERIFIED
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=verified)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1118894#c14)• 10 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1118894#c15)• 10 years ago |
|  | |

Whoops, forgot to ni? for Aurora/Beta approval requests :)Flags: needinfo?(sunfish)

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1118894#c16)• 10 years ago |
|  | |

This patch is currently under suspicion of causing [bug 1125734](/show_bug.cgi?id=1125734 "RESOLVED FIXED - Twitter edit profile page consistently crashes with the LastPass extension installed"). I'm investigating that now.

|  | [Dan Gohman [:sunfish]](/user_profile?user_id=468136)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1118894#c17)• 10 years ago |
|  | |

Confirmed that the patch here causes [bug 1125734](/show_bug.cgi?id=1125734 "RESOLVED FIXED - Twitter edit profile page consistently crashes with the LastPass extension installed"). I've now posted patches there, including for mozilla-aurora and mozilla-beta, for sec-review which subsumes the patch here.Flags: needinfo?(sunfish)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1118894#a1995310_75935)• 10 years ago |

[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=fixed)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=fixed)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1118894#a3561322_280903)• 10 years ago |

Whiteboard: [jsbugmon:update,ignore] → [jsbugmon:update,ignore][adv-main36+]

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1118894#a20517179_546015)• 9 years ago |

Group: core-security → core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1118894#a44422006_1689)• 9 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1118894&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Dan Gohman [:sunfish]](/user_profile?user_id=468136)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from security.gentoo.org_d439654f_20250124_141131.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# Mozilla Products: Multiple vulnerabilities — GLSA **201504-01**

Multiple vulnerabilities have been found in Mozilla Firefox,
Thunderbird, and SeaMonkey, the worst of which may allow user-assisted
execution of arbitrary code.

### Affected packages

| Package | **www-client/firefox** on all architectures |
| --- | --- |
| Affected versions | < **31.5.3** |
| Unaffected versions | >= **31.5.3** |

| Package | **www-client/firefox-bin** on all architectures |
| --- | --- |
| Affected versions | < **31.5.3** |
| Unaffected versions | >= **31.5.3** |

| Package | **mail-client/thunderbird** on all architectures |
| --- | --- |
| Affected versions | < **31.5.0** |
| Unaffected versions | >= **31.5.0** |

| Package | **mail-client/thunderbird-bin** on all architectures |
| --- | --- |
| Affected versions | < **31.5.0** |
| Unaffected versions | >= **31.5.0** |

| Package | **www-client/seamonkey** on all architectures |
| --- | --- |
| Affected versions | < **2.33.1** |
| Unaffected versions | >= **2.33.1** |

| Package | **www-client/seamonkey-bin** on all architectures |
| --- | --- |
| Affected versions | < **2.33.1** |
| Unaffected versions | >= **2.33.1** |

| Package | **dev-libs/nspr** on all architectures |
| --- | --- |
| Affected versions | < **4.10.6** |
| Unaffected versions | >= **4.10.6** |

### Background

Mozilla Firefox is an open-source web browser and Mozilla Thunderbird an
open-source email client, both from the Mozilla Project. The SeaMonkey
project is a community effort to deliver production-quality releases of
code derived from the application formerly known as the ‘Mozilla
Application Suite’.

### Description

Multiple vulnerabilities have been discovered in Firefox, Thunderbird,
and SeaMonkey. Please review the CVE identifiers referenced below for
details.

### Impact

A remote attacker could entice a user to view a specially crafted web
page or email, possibly resulting in execution of arbitrary code or a
Denial of Service condition. Furthermore, a remote attacker may be able
to perform Man-in-the-Middle attacks, obtain sensitive information, spoof
the address bar, conduct clickjacking attacks, bypass security
restrictions and protection mechanisms, or have other unspecified
impact.

### Workaround

There are no known workarounds at this time.

### Resolution

All firefox users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/firefox-31.5.3"

```

All firefox-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/firefox-bin-31.5.3"

```

All thunderbird users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=mail-client/thunderbird-31.5.0"

```

All thunderbird-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose
 ">=mail-client/thunderbird-bin-31.5.0"

```

All seamonkey users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/seamonkey-2.33.1"

```

All seamonkey-bin users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=www-client/seamonkey-bin-2.33.1"

```

All nspr users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=dev-libs/nspr-4.10.6"

```
### References

* [CVE-2013-1741](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-1741)
* [CVE-2013-2566](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-2566)
* [CVE-2013-5590](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5590)
* [CVE-2013-5591](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5591)
* [CVE-2013-5592](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5592)
* [CVE-2013-5593](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5593)
* [CVE-2013-5595](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5595)
* [CVE-2013-5596](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5596)
* [CVE-2013-5597](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5597)
* [CVE-2013-5598](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5598)
* [CVE-2013-5599](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5599)
* [CVE-2013-5600](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5600)
* [CVE-2013-5601](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5601)
* [CVE-2013-5602](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5602)
* [CVE-2013-5603](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5603)
* [CVE-2013-5604](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5604)
* [CVE-2013-5605](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5605)
* [CVE-2013-5606](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5606)
* [CVE-2013-5607](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5607)
* [CVE-2013-5609](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5609)
* [CVE-2013-5610](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5610)
* [CVE-2013-5612](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5612)
* [CVE-2013-5613](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5613)
* [CVE-2013-5614](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5614)
* [CVE-2013-5615](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5615)
* [CVE-2013-5616](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5616)
* [CVE-2013-5618](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5618)
* [CVE-2013-5619](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-5619)
* [CVE-2013-6671](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6671)
* [CVE-2013-6672](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6672)
* [CVE-2013-6673](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2013-6673)
* [CVE-2014-1477](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1477)
* [CVE-2014-1478](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1478)
* [CVE-2014-1479](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1479)
* [CVE-2014-1480](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1480)
* [CVE-2014-1481](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1481)
* [CVE-2014-1482](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1482)
* [CVE-2014-1483](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1483)
* [CVE-2014-1485](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1485)
* [CVE-2014-1486](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1486)
* [CVE-2014-1487](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1487)
* [CVE-2014-1488](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1488)
* [CVE-2014-1489](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1489)
* [CVE-2014-1490](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1490)
* [CVE-2014-1491](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1491)
* [CVE-2014-1492](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1492)
* [CVE-2014-1493](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1493)
* [CVE-2014-1494](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1494)
* [CVE-2014-1496](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1496)
* [CVE-2014-1497](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1497)
* [CVE-2014-1498](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1498)
* [CVE-2014-1499](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1499)
* [CVE-2014-1500](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1500)
* [CVE-2014-1502](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1502)
* [CVE-2014-1504](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1504)
* [CVE-2014-1505](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1505)
* [CVE-2014-1508](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1508)
* [CVE-2014-1509](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1509)
* [CVE-2014-1510](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1510)
* [CVE-2014-1511](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1511)
* [CVE-2014-1512](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1512)
* [CVE-2014-1513](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1513)
* [CVE-2014-1514](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1514)
* [CVE-2014-1518](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1518)
* [CVE-2014-1519](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1519)
* [CVE-2014-1520](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1520)
* [CVE-2014-1522](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1522)
* [CVE-2014-1523](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1523)
* [CVE-2014-1524](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1524)
* [CVE-2014-1525](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1525)
* [CVE-2014-1526](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1526)
* [CVE-2014-1529](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1529)
* [CVE-2014-1530](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1530)
* [CVE-2014-1531](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1531)
* [CVE-2014-1532](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1532)
* [CVE-2014-1533](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1533)
* [CVE-2014-1534](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1534)
* [CVE-2014-1536](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1536)
* [CVE-2014-1537](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1537)
* [CVE-2014-1538](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1538)
* [CVE-2014-1539](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1539)
* [CVE-2014-1540](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1540)
* [CVE-2014-1541](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1541)
* [CVE-2014-1542](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1542)
* [CVE-2014-1543](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1543)
* [CVE-2014-1544](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1544)
* [CVE-2014-1545](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1545)
* [CVE-2014-1547](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1547)
* [CVE-2014-1548](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1548)
* [CVE-2014-1549](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1549)
* [CVE-2014-1550](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1550)
* [CVE-2014-1551](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1551)
* [CVE-2014-1552](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1552)
* [CVE-2014-1553](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1553)
* [CVE-2014-1554](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1554)
* [CVE-2014-1555](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1555)
* [CVE-2014-1556](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1556)
* [CVE-2014-1557](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1557)
* [CVE-2014-1558](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1558)
* [CVE-2014-1559](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1559)
* [CVE-2014-1560](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1560)
* [CVE-2014-1561](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1561)
* [CVE-2014-1562](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1562)
* [CVE-2014-1563](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1563)
* [CVE-2014-1564](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1564)
* [CVE-2014-1565](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1565)
* [CVE-2014-1566](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1566)
* [CVE-2014-1567](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1567)
* [CVE-2014-1568](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1568)
* [CVE-2014-1574](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1574)
* [CVE-2014-1575](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1575)
* [CVE-2014-1576](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1576)
* [CVE-2014-1577](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1577)
* [CVE-2014-1578](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1578)
* [CVE-2014-1580](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1580)
* [CVE-2014-1581](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1581)
* [CVE-2014-1582](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1582)
* [CVE-2014-1583](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1583)
* [CVE-2014-1584](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1584)
* [CVE-2014-1585](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1585)
* [CVE-2014-1586](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1586)
* [CVE-2014-1587](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1587)
* [CVE-2014-1588](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1588)
* [CVE-2014-1589](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1589)
* [CVE-2014-1590](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1590)
* [CVE-2014-1591](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1591)
* [CVE-2014-1592](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1592)
* [CVE-2014-1593](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1593)
* [CVE-2014-1594](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-1594)
* [CVE-2014-5369](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-5369)
* [CVE-2014-8631](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8631)
* [CVE-2014-8632](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8632)
* [CVE-2014-8634](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8634)
* [CVE-2014-8635](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8635)
* [CVE-2014-8636](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8636)
* [CVE-2014-8637](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8637)
* [CVE-2014-8638](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8638)
* [CVE-2014-8639](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8639)
* [CVE-2014-8640](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8640)
* [CVE-2014-8641](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8641)
* [CVE-2014-8642](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2014-8642)
* [CVE-2015-0817](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0817)
* [CVE-2015-0818](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0818)
* [CVE-2015-0819](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0819)
* [CVE-2015-0820](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0820)
* [CVE-2015-0821](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0821)
* [CVE-2015-0822](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0822)
* [CVE-2015-0823](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0823)
* [CVE-2015-0824](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0824)
* [CVE-2015-0825](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0825)
* [CVE-2015-0826](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0826)
* [CVE-2015-0827](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0827)
* [CVE-2015-0828](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0828)
* [CVE-2015-0829](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0829)
* [CVE-2015-0830](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0830)
* [CVE-2015-0831](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0831)
* [CVE-2015-0832](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0832)
* [CVE-2015-0833](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0833)
* [CVE-2015-0834](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0834)
* [CVE-2015-0835](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0835)
* [CVE-2015-0836](https://nvd.nist.gov/nvd.cfm?cvename=CVE-2015-0836)

**Release date**

April 07, 2015

**Latest revision**

April 08, 2015: 2

**Severity**

normal

**Exploitable**

remote

**Bugzilla entries**

* [489796](https://bugs.gentoo.org/show_bug.cgi?id=489796)
* [491234](https://bugs.gentoo.org/show_bug.cgi?id=491234)
* [493850](https://bugs.gentoo.org/show_bug.cgi?id=493850)
* [500320](https://bugs.gentoo.org/show_bug.cgi?id=500320)
* [505072](https://bugs.gentoo.org/show_bug.cgi?id=505072)
* [509050](https://bugs.gentoo.org/show_bug.cgi?id=509050)
* [512896](https://bugs.gentoo.org/show_bug.cgi?id=512896)
* [517876](https://bugs.gentoo.org/show_bug.cgi?id=517876)
* [522020](https://bugs.gentoo.org/show_bug.cgi?id=522020)
* [523652](https://bugs.gentoo.org/show_bug.cgi?id=523652)
* [525474](https://bugs.gentoo.org/show_bug.cgi?id=525474)
* [531408](https://bugs.gentoo.org/show_bug.cgi?id=531408)
* [536564](https://bugs.gentoo.org/show_bug.cgi?id=536564)
* [541316](https://bugs.gentoo.org/show_bug.cgi?id=541316)
* [544056](https://bugs.gentoo.org/show_bug.cgi?id=544056)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from bugzilla.mozilla.org_28a9ec66_20250124_141128.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1127206)
* [XML](/show_bug.cgi?ctype=xml&id=1127206)

Closed
[Bug 1127206](/show_bug.cgi?id=1127206)

Opened 10 years ago
Closed 10 years ago

# Crash when using certain File() constructors on workers

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash when using certain File() constructors on workers

## Categories

### (Core :: DOM: Core & HTML, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=DOM%3A%20Core%20%26%20HTML#DOM%3A%20Core%20%26%20HTML)

DOM: Core & HTML
▾

Core :: DOM: Core & HTML
Issues in DOM tree [https://dom.spec.whatwg.org](https://dom.spec.whatwg.org/) & HTML [https://html.spec.whatwg.org](https://html.spec.whatwg.org/) that do not fit into any other DOM or HTML component or which span multiple DOM or HTML components.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=DOM%3A%20Core%20%26%20HTML&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=DOM%3A%20Core%20%26%20HTML&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=DOM%3A%20Core%20%26%20HTML)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

35 Branch

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla38

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| a11y-review | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox35 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix) |
| firefox36 | [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed) |
| firefox37 | [+](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed) |
| firefox38 | [+](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed) |
| firefox-esr31 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |
| b2g-v2.0 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=unaffected) |
| b2g-v2.0M | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=unaffected) |
| b2g-v2.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=unaffected) |
| b2g-v2.1S | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=equals&v1=unaffected) |
| b2g-v2.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed) |
| b2g-master | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox35 |  | wontfix |
| firefox36 | + | fixed |
| firefox37 | + | fixed |
| firefox38 | + | fixed |
| firefox-esr31 |  | unaffected |
| b2g-v1.4 |  | unaffected |
| b2g-v2.0 |  | unaffected |
| b2g-v2.0M |  | unaffected |
| b2g-v2.1 |  | unaffected |
| b2g-v2.1S |  | unaffected |
| b2g-v2.2 |  | fixed |
| relnote-firefox |  | --- |
| b2g-master |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: nsm, Assigned: bzbarsky)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](extensions/Gravatar/web/default.jpg)  [bzbarsky](/user_profile?user_id=20209)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/9d2d8883a6f23209c0ae4f093e1a8a27?d=mm&size=40)  [nsm](/user_profile?user_id=415061)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/5111b810214a00377104f5ad3efefa26?d=mm&size=40)  [sefeng](/user_profile?user_id=625922)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

11 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[1047483](/show_bug.cgi?id=1047483 "RESOLVED FIXED - Porting DOMFile/DOMBlob to WebIDL"), [1127501](/show_bug.cgi?id=1127501 "RESOLVED FIXED - Treat external interfaces as only being exposed in Window in Web IDL bindings")

Dependency [tree](/showdependencytree.cgi?id=1127206&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1127206)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: csectype-race, sec-high, Whiteboard: [adv-main36+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[csectype-race](/buglist.cgi?keywords=csectype-race&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main36+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (1 file, 1 obsolete file)

| [Don't try to do binding UnwrapArgImpl on worker threads. It can't do anything useful there](/attachment.cgi?id=8556615)  [10 years ago](#c6)  [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)   3.40 KB, patch |  | [Details](/attachment.cgi?id=8556615&action=edit) | [Diff](/attachment.cgi?id=8556615&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127206&attachment=8556615) |
| --- | --- | --- |
| [Don't try to do binding UnwrapArgImpl on worker threads. It can't do anything useful there](/attachment.cgi?id=8556642)  [10 years ago](#c8)  [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)   5.16 KB, patch | peterv : [review+](#a120859_24295 "10 years ago")  abillings : [approval-mozilla-aurora+](#a130162_280903 "10 years ago")  abillings : [approval-mozilla-beta+](#a130162_280903 "10 years ago")  abillings : [sec-approval+](#c13 "10 years ago") | [Details](/attachment.cgi?id=8556642&action=edit) | [Diff](/attachment.cgi?id=8556642&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127206&attachment=8556642) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Nikhil Marathe [:nsm] (No longer reading bugmail, please needinfo?)](/user_profile?user_id=415061)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1127206#c0)• 10 years ago |
|  | |

The 1 and 2 argument forms of the File constructor match the "chrome only" (not tagged [ChromeOnly]) constructor which accepts an nsIFile as the first argument. Using these on a worker attempts to unwrap an nsIFile off main thread and crashes:
#0 nsXPCWrappedJS::GetNewOrUsed (jsObj=..., aIID=..., wrapperResult=0x7fffbd4f8590) at /home/nikhil/mozilla-central-fetch/js/xpconnect/src/XPCWrappedJS.cpp:330
#1 0x00007fffef6c84c7 in mozilla::dom::UnwrapArgImpl (src=..., iid=..., ppArg=0x7fffbd4f9568) at /home/nikhil/mozilla-central-fetch/dom/bindings/BindingUtils.cpp:2740
#2 0x00007fffeee222b7 in mozilla::dom::UnwrapArg<nsIFile> (src=..., ppArg=0x7fffbd4f9568) at ../../dist/include/mozilla/dom/BindingUtils.h:64
#3 0x00007fffeee01dd3 in mozilla::dom::FileBinding::\_constructor (cx=0x7fffc71395d0, argc=2, vp=0x7fffbfc651b8) at ./FileBinding.cpp:748
#4 0x00007ffff2a32d94 in js::CallJSNative (cx=0x7fffc71395d0, native=0x7fffeee009b0 <mozilla::dom::FileBinding::\_constructor(JSContext\*, unsigned int, JS::Value\*)>, args=...)
at /home/nikhil/mozilla-central-fetch/js/src/jscntxtinlines.h:226
#5 0x00007ffff2a33021 in js::CallJSNativeConstructor (cx=0x7fffc71395d0, native=0x7fffeee009b0 <mozilla::dom::FileBinding::\_constructor(JSContext\*, unsigned int, JS::Value\*)>, args=...)
at /home/nikhil/mozilla-central-fetch/js/src/jscntxtinlines.h:259
#6 0x00007ffff2a061c7 in js::InvokeConstructor (cx=0x7fffc71395d0, args=...) at /home/nikhil/mozilla-central-fetch/js/src/vm/Interpreter.cpp:595
#7 0x00007ffff29fa9c6 in Interpret (cx=0x7fffc71395d0, state=...) at /home/nikhil/mozilla-central-fetch/js/src/vm/Interpreter.cpp:2558
#8 0x00007ffff29ee10a in js::RunScript (cx=0x7fffc71395d0, state=...) at /home/nikhil/mozilla-central-fetch/js/src/vm/Interpreter.cpp:448
We could introduce non-ctor, static "File.fromnsIFile()" and change all call sites, unless there is a way to [ChromeOnly] a constructor or codegen some checks on the worker. Boris, any suggestions?

|  | [Nikhil Marathe [:nsm] (No longer reading bugmail, please needinfo?)](/user_profile?user_id=415061)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a8_415061)• 10 years ago |

Flags: needinfo?(bzbarsky)

|  | [Ben Turner (not reading bugmail, use the needinfo flag!)](/user_profile?user_id=200444) |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1127206#c1)• 10 years ago |
|  | |

How did you ever get a wrapped nsIFile into a chrome worker?

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1127206#c2)• 10 years ago |
|  | |

You don't.
The problem is that nsIFile is an external interface, so we use UnwrapArg<nsIFile>. This calls UnwrapArgImpl, which proceeds to do nsXPCWrappedJS::GetNewOrUsed if the passed in object is not a reflector. I think this is a security bug, actually, until Bobby convinces me otherwise.
Here are the things we use as the template argument for UnwrapArg:
imgINotificationObserver
imgIRequest
mozilla::dom::EventTarget
mozilla::dom::IndirectlyImplementedInterface
mozilla::dom::TestExternalInterface
nsIBrowserDOMWindow
nsIChannel
nsIDOMCSSRule
nsIDOMDataChannel
nsIDOMMozMmsMessage
nsIDOMMozSmsMessage
nsIDOMMozWakeLockListener
nsIDOMWindow
nsIFile
nsIFrameRequestCallback
nsIInputStream
nsIInputStreamCallback
nsIJSID
nsIMenuBuilder
nsIObserver
nsIOutputStream
nsIPrincipal
nsISelectionListener
nsISupports
nsITreeView
nsIURI
All of these look clearly mainthread only except mozilla::dom::EventTarget, which is only relevant here for non-webidl-binding event targets, of which there is only one, and that one is mainthread-only.
So we should just make UnwrapArgImpl return error on workers.Group: core-securityComponent: DOM: Workers → DOMFlags: needinfo?(bzbarsky)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1127206#c3)• 10 years ago |
|  | |

Looks like this is basically a regression from [bug 1047483](/show_bug.cgi?id=1047483 "RESOLVED FIXED - Porting DOMFile/DOMBlob to WebIDL") in practice...
[Tracking Requested - why for this release]: We should fix this. The tracking for 35 is in case we want to take a ridealong or something, but I assume this is basically wontfix for 35.Blocks: [1047483](/show_bug.cgi?id=1047483 "RESOLVED FIXED - Porting DOMFile/DOMBlob to WebIDL")
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected)
[tracking-firefox35](/buglist.cgi?f1=cf_tracking_firefox35&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox35&o1=equals&v1=%3F)
[tracking-firefox36](/buglist.cgi?f1=cf_tracking_firefox36&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%3F)
[tracking-firefox37](/buglist.cgi?f1=cf_tracking_firefox37&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%3F)
[tracking-firefox38](/buglist.cgi?f1=cf_tracking_firefox38&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%3F)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1127206#c4)• 10 years ago |
|  | |

Oh, and the testcase here is to do this in a worker:
new File({});

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1127206#c5)• 10 years ago |
|  | |

Also, can we get rid of the USVString ctor for File? It's web-observably wrong behavior...

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1127206#c6)• 10 years ago |
|  | |

Attached patch

[Don't try to do binding UnwrapArgImpl on worker threads. It can't do anything useful there](attachment.cgi?id=8556615&action=diff) (obsolete)
— [Details](attachment.cgi?id=8556615&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127206&attachment=8556615)

Not sure about landing the testcase with this, since it makes it \_very\_ clear what the problem is
[Attachment #8556615](/attachment.cgi?id=8556615&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Flags: review?(peterv)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a44383_20209)• 10 years ago |

Assignee: nobody → bzbarskyStatus: NEW → ASSIGNED

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1127206#c7)• 10 years ago |
|  | |

Also, we clearly have no test coverage for these "chromeonly" ctors on workers. Are they actually OK off-main-thread, esp. the string one?Flags: needinfo?(amarchesini)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1127206#c8)• 10 years ago |
|  | |

Attached patch

[Don't try to do binding UnwrapArgImpl on worker threads. It can't do anything useful there](attachment.cgi?id=8556642&action=diff)
— [Details](attachment.cgi?id=8556642&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1127206&attachment=8556642)

[Attachment #8556642](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Flags: review?(peterv)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a46307_20209)• 10 years ago |

[Attachment #8556615](/attachment.cgi?id=8556615&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Attachment is obsolete: true
[Attachment #8556615](/attachment.cgi?id=8556615&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Flags: review?(peterv)

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1127206#c9)• 10 years ago |
|  | |

Actually, I just realized that if we do this then we can assume external interfaces are not exposed in workers too. I filed [bug 1127501](/show_bug.cgi?id=1127501 "RESOLVED FIXED - Treat external interfaces as only being exposed in Window in Web IDL bindings") on that.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a47914_20209)• 10 years ago |

Blocks: [1127501](/show_bug.cgi?id=1127501 "RESOLVED FIXED - Treat external interfaces as only being exposed in Window in Web IDL bindings")

|  | [Benjamin Kerensa [:bkerensa]](/user_profile?user_id=294742) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a53105_294742)• 10 years ago |

[tracking-firefox38](/buglist.cgi?f1=cf_tracking_firefox38&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%2B)

|  | [Peter Van der Beken [:peterv]](/user_profile?user_id=24295) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a120859_24295)• 10 years ago |

[Attachment #8556642](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Flags: review?(peterv) → review+

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1127206#c10)• 10 years ago |
|  | |

Comment on [attachment 8556642](/attachment.cgi?id=8556642 "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") [[details]](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") [[diff]](/attachment.cgi?id=8556642&action=diff "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1127206&attachment=8556642)
Don't try to do binding UnwrapArgImpl on worker threads. It can't do anything useful there
[Security approval request comment]
How easily could an exploit be constructed based on the patch? Probably not very easily. This bug allows touching the xpconnect data structures in a racy way from a worker thread. Then you still have to actually race against something in practice and then parlay the race into an exploit (e.g. by triggering causing a refcount to be off and the main thread to then work with a deleted object or something; I'm not sure whether that's even possible offhand).
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem? The tests are very clear: they test the things that would race without this patch. On the other hand, the code in the patch makes it clear that the issue is threadsafety, and that it's threadsafety of the File constructor. It even makes it clear-ish what sorts of arguments to the constructor could cause the threadsafety violation. The only part that's not necessarily obvious is how to pass those arguments from JS on a background thread, but I assume anyone familiar with the web will think of workers for the latter, and anyone familiar with Gecko would know to use {} for the former...
In any case, we could hold off on landing the test if we have to, but I don't really think it adds that much to what you can learn from the patch code.
Which older supported branches are affected by this flaw? 35, 36, 37
If not all supported branches, which bug introduced the flaw? [Bug 1047483](/show_bug.cgi?id=1047483 "RESOLVED FIXED - Porting DOMFile/DOMBlob to WebIDL").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be? This patch should either apply as-is or be trivial to backport.
How likely is this patch to cause regressions; how much testing does it need? I don't think this is particularly regression-prone.
[Attachment #8556642](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Flags: sec-approval?

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a127276_406194)• 10 years ago |

[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected)
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1127206#c11)• 10 years ago |
|  | |

As you say, this sounds very hard to exploit in practice, but I'm marking in sec-high to be conservative. Feel free to adjust as desired.Keywords: [csectype-race](/buglist.cgi?keywords=csectype-race&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)Version: 33 Branch → 35 Branch

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1127206#c12)• 10 years ago |
|  | |

I wonder how expensive it would be to crash if we're not on the main thread in IsCallerChrome(). Maybe this isn't that common.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a128308_280903)• 10 years ago |

[tracking-firefox35](/buglist.cgi?f1=cf_tracking_firefox35&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox35&o1=equals&v1=%3F) → ---
[tracking-firefox36](/buglist.cgi?f1=cf_tracking_firefox36&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B)
[tracking-firefox37](/buglist.cgi?f1=cf_tracking_firefox37&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%2B)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1127206#c13)• 10 years ago |
|  | |

Comment on [attachment 8556642](/attachment.cgi?id=8556642 "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") [[details]](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") [[diff]](/attachment.cgi?id=8556642&action=diff "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1127206&attachment=8556642)
Don't try to do binding UnwrapArgImpl on worker threads. It can't do anything useful there
sec-approval+ for trunk. I'd like to get this on Aurora and Beta as well.
Can we check in the tests after we ship the fix, as we normally do for security issues, or is there an overriding reason to check them in now?
[Attachment #8556642](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Flags: sec-approval? → sec-approval+

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1127206#c14)• 10 years ago |
|  | |

For a lot of security issues we just land the tests with the fix...
We could check in the tests later. I just always worry about forgetting to do that. If we have an automated reminder system for it, how do I use it?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1127206#c15)• 10 years ago |
|  | |

I think we just set the in‑testsuite? flag and then scan for bugs assigned to self with that but different devs have a different process. There is no automated system.
I'm neutral about this. I just worry about our tests pwning us. Since we're mid-cycle, it probably isn't a big deal.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1127206#c16)• 10 years ago |
|  | |

OK. Basically, I would rather not poll on landing the tests.... and I doubt anyone else would like to do it either. We should add some notification for this sort of thing. :(
I think the risk of being pwned by this test is pretty low, so will just land it.

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1127206#c17)• 10 years ago |
|  | |

Comment on [attachment 8556642](/attachment.cgi?id=8556642 "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") [[details]](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") [[diff]](/attachment.cgi?id=8556642&action=diff "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1127206&attachment=8556642)
Don't try to do binding UnwrapArgImpl on worker threads. It can't do anything useful there
Approval Request Comment
[Feature/regressing bug #]: [Bug 1047483](/show_bug.cgi?id=1047483 "RESOLVED FIXED - Porting DOMFile/DOMBlob to WebIDL")
[User impact if declined]: Crashes caused by trying to do
nsXPCWrappedJS::GetNewOrUsed on a worker thread.
[Describe test coverage new/current, TreeHerder]: Has automated tests in the
patch.
[Risks and why]: Risk should be pretty low.
[String/UUID change made/needed]: None.
[Attachment #8556642](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Flags: approval-mozilla-beta?
[Attachment #8556642](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Flags: approval-mozilla-aurora?

|  | [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1127206#c18)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/568af40e5e0d>

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a130162_280903)• 10 years ago |

[Attachment #8556642](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Flags: approval-mozilla-beta?
[Attachment #8556642](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Flags: approval-mozilla-beta+
[Attachment #8556642](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Flags: approval-mozilla-aurora?
[Attachment #8556642](/attachment.cgi?id=8556642&action=edit "Don't try to do binding UnwrapArgImpl on worker threads.  It can't do anything useful there") -
Flags: approval-mozilla-aurora+

|  | [Andrea Marchesini [:baku]](/user_profile?user_id=446257) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1127206#c19)• 10 years ago |
|  | |

(In reply to Boris Zbarsky [:bz] from [comment #7](/show_bug.cgi?id=1127206#c7 "RESOLVED FIXED - Crash when using certain File() constructors on workers"))
> Also, we clearly have no test coverage for these "chromeonly" ctors on
> workers. Are they actually OK off-main-thread, esp. the string one?
Sorry to answer so late. We have 3 chrome-only ctors:
1. nsIFile => MainThread only.
2. Blob => This should be thread-safe
3. String => This should be thread-safe too. I'll try to see if we can get rid of this.Flags: needinfo?(amarchesini)

|  | [Phil Ringnalda (:philor)](/user_profile?user_id=135518) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1127206#c20)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/568af40e5e0d>Status: ASSIGNED → RESOLVEDClosed: 10 years ago
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla38

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1127206#c21)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/550f58e63d9a>
<https://hg.mozilla.org/releases/mozilla-beta/rev/63e9ce6a9a45>
[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=unaffected)
[status-b2g-v2.0M](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=unaffected)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=unaffected)
[status-b2g-v2.1S](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1_s&o1=equals&v1=unaffected)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected)
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1127206#c22)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g37_v2_2/rev/550f58e63d9a>
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a1788298_280903)• 10 years ago |

Whiteboard: [adv-main36+]

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a18662371_546015)• 9 years ago |

Group: core-security → core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a42567196_1689)• 9 years ago |

Group: core-security-release

|  | [Nobody; OK to take it and work on it](/user_profile?user_id=1) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1127206#a129969729_1)• 6 years ago |

Component: DOM → DOM: Core & HTML
You need to [log in](/show_bug.cgi?id=1127206&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Boris Zbarsky [:bzbarsky]](/user_profile?user_id=20209)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_576ed7ac_20250124_141108.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/QTWFJLKXBYKOICVL3CKDNHCZYQ7PW4YO/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/QTWFJLKXBYKOICVL3CKDNHCZYQ7PW4YO/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/QTWFJLKXBYKOICVL3CKDNHCZYQ7PW4YO/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/QTWFJLKXBYKOICVL3CKDNHCZYQ7PW4YO/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/QTWFJLKXBYKOICVL3CKDNHCZYQ7PW4YO/#QTWFJLKXBYKOICVL3CKDNHCZYQ7PW4YO)

# [security-announce] SUSE-SU-2015:0412-1: important: Security update for MozillaFirefox

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

3 Mar
2015

3 Mar
'15

15:04

SUSE Security Update: Security update for MozillaFirefox
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: SUSE-SU-2015:0412-1
Rating: important
References: #917597
Cross-References: CVE-2015-0822 CVE-2015-0827 CVE-2015-0831
CVE-2015-0835 CVE-2015-0836
Affected Products:
SUSE Linux Enterprise Software Development Kit 12
SUSE Linux Enterprise Server 12
SUSE Linux Enterprise Desktop 12
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 5 vulnerabilities is now available.
Description:
MozillaFirefox was updated to version 31.5.0 ESR to fix five security
issues.
These security issues were fixed:
- CVE-2015-0836: Multiple unspecified vulnerabilities in the browser
engine in Mozilla Firefox before 31.5 allowed remote attackers to cause
a denial of service (memory corruption and application crash) or
possibly execute arbitrary code via unknown vectors (bnc#917597).
- CVE-2015-0827: Heap-based buffer overflow in the mozilla::gfx::CopyRect
function in Mozilla Firefox before 31.5 allowed remote attackers to
obtain sensitive information from uninitialized process memory via a
malformed SVG graphic (bnc#917597).
- CVE-2015-0835: Multiple unspecified vulnerabilities in the browser
engine in Mozilla Firefox before 36.0 allowed remote attackers to cause
a denial of service (memory corruption and application crash) or
possibly execute arbitrary code via unknown vectors (bnc#917597).
- CVE-2015-0831: Use-after-free vulnerability in the
mozilla::dom::IndexedDB::IDBObjectStore::CreateIndex function in Mozilla
Firefox before 31.5 allowed remote attackers to execute arbitrary code
or cause a denial of service (heap memory corruption) via crafted
content that is improperly handled during IndexedDB index creation
(bnc#917597).
- CVE-2015-0822: The Form Autocompletion feature in Mozilla Firefox before
31.5 allowed remote attackers to read arbitrary files via crafted
JavaScript code (bnc#917597).
Patch Instructions:
To install this SUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- SUSE Linux Enterprise Software Development Kit 12:
zypper in -t patch SUSE-SLE-SDK-12-2015-104=1
- SUSE Linux Enterprise Server 12:
zypper in -t patch SUSE-SLE-SERVER-12-2015-104=1
- SUSE Linux Enterprise Desktop 12:
zypper in -t patch SUSE-SLE-DESKTOP-12-2015-104=1
To bring your system up-to-date, use "zypper patch".
Package List:
- SUSE Linux Enterprise Software Development Kit 12 (ppc64le s390x x86\_64):
MozillaFirefox-debuginfo-31.5.0esr-24.1
MozillaFirefox-debugsource-31.5.0esr-24.1
MozillaFirefox-devel-31.5.0esr-24.1
- SUSE Linux Enterprise Server 12 (ppc64le s390x x86\_64):
MozillaFirefox-31.5.0esr-24.1
MozillaFirefox-debuginfo-31.5.0esr-24.1
MozillaFirefox-debugsource-31.5.0esr-24.1
MozillaFirefox-translations-31.5.0esr-24.1
- SUSE Linux Enterprise Desktop 12 (x86\_64):
MozillaFirefox-31.5.0esr-24.1
MozillaFirefox-debuginfo-31.5.0esr-24.1
MozillaFirefox-debugsource-31.5.0esr-24.1
MozillaFirefox-translations-31.5.0esr-24.1
References:
<http://support.novell.com/security/cve/CVE-2015-0822.html>
<http://support.novell.com/security/cve/CVE-2015-0827.html>
<http://support.novell.com/security/cve/CVE-2015-0831.html>
<http://support.novell.com/security/cve/CVE-2015-0835.html>
<http://support.novell.com/security/cve/CVE-2015-0836.html>
<https://bugzilla.suse.com/917597>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/QTWFJLKXBYKOICVL3CKDNHCZYQ7PW4YO/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/QTWFJLKXBYKOICVL3CKDNHCZYQ7PW4YO/#QTWFJLKXBYKOICVL3CKDNHCZYQ7PW4YO)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from bugzilla.mozilla.org_057db6b4_20250124_141119.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1114569)
* [XML](/show_bug.cgi?ctype=xml&id=1114569)

Closed
[Bug 1114569](/show_bug.cgi?id=1114569)

Opened 10 years ago
Closed 10 years ago

# Assertion failure: ionRecovery\_.empty(), at js/src/vm/Stack.cpp:1415

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: ionRecovery\_.empty(), at js/src/vm/Stack.cpp:1415

## Categories

### (Core :: JavaScript Engine, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Linux

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

VERIFIED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla37

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Webcompat Priority | --- |
| --- | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox34 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=unaffected) |
| firefox35 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix) |
| firefox36 | [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed) |
| firefox37 | --- | [verified](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=verified) |
| firefox-esr31 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected) |
| b2g-v1.4 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected) |
| b2g-v2.0 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=unaffected) |
| b2g-v2.0M | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=unaffected) |
| b2g-v2.1 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=unaffected) |
| b2g-v2.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox34 |  | unaffected |
| firefox35 |  | wontfix |
| firefox36 | + | fixed |
| firefox37 |  | verified |
| firefox-esr31 |  | unaffected |
| b2g-v1.4 |  | unaffected |
| b2g-v2.0 |  | unaffected |
| b2g-v2.0M |  | unaffected |
| b2g-v2.1 |  | unaffected |
| b2g-v2.2 |  | fixed |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: decoder, Assigned: nbp)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/f78625fe5901300b4689355a8e507ea2?d=mm&size=40)  [nbp](/user_profile?user_id=422187)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/b29b83d12aba827b8ff68296e473bec5?d=mm&size=40)  [decoder](/user_profile?user_id=395101)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[1073033](/show_bug.cgi?id=1073033 "RESOLVED FIXED - Scalar Replacement of Objects should handle scope chains.")

Dependency [tree](/showdependencytree.cgi?id=1114569&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1114569)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (4 keywords, Whiteboard: [jsbugmon:update][adv-main36+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[assertion](/buglist.cgi?keywords=assertion&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[jsbugmon:update][adv-main36+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files)

| [[Inbound/Aurora] Discard RInstructionResults while handling exceptions.](/attachment.cgi?id=8540245)  [10 years ago](#c3)  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)   2.49 KB, patch | h4writer : [review+](#a79386_196399 "10 years ago")  lsblakk : [approval-mozilla-aurora+](#a1232896_272375 "10 years ago")  abillings : [sec-approval+](#c9 "10 years ago") | [Details](/attachment.cgi?id=8540245&action=edit) | [Diff](/attachment.cgi?id=8540245&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1114569&attachment=8540245) |
| --- | --- | --- |
| [[Beta] Discard RInstructionResults while handling exceptions.](/attachment.cgi?id=8543293)  [10 years ago](#c10)  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)   1.79 KB, patch | nbp : [review+](#c10 "10 years ago")  lsblakk : [approval-mozilla-beta-](#c17 "10 years ago") | [Details](/attachment.cgi?id=8543293&action=edit) | [Diff](/attachment.cgi?id=8543293&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1114569&attachment=8543293) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1114569#c0)• 10 years ago |
|  | |

The following testcase crashes on mozilla-central revision 7b33ee7fd162 (build with --enable-optimize --enable-posix-nspr-emulation --enable-valgrind --enable-gczeal --enable-debug, run with --fuzzing-safe --thread-count=2 --ion-offthread-compile=off --ion-eager):
try {
setObjectMetadataCallback(true);
function test() {
function c()
$ERROR('#1: 1e+01 === 10');
function gen() {}
c(gen);
}
test();
} catch(exc2) {}
test();
Backtrace:
Program received signal SIGSEGV, Segmentation fault.
0x0000000000adb8c1 in js::jit::JitActivation::~JitActivation (this=0x7fffffffcce0, \_\_in\_chrg=<optimized out>) at js/src/vm/Stack.cpp:1415
1415 MOZ\_ASSERT(ionRecovery\_.empty());
#0 0x0000000000adb8c1 in js::jit::JitActivation::~JitActivation (this=0x7fffffffcce0, \_\_in\_chrg=<optimized out>) at js/src/vm/Stack.cpp:1415
#1 0x000000000073da40 in EnterIon (data=..., cx=0x1a13590) at js/src/jit/Ion.cpp:2450
#2 js::jit::IonCannon (cx=0x1a13590, state=...) at js/src/jit/Ion.cpp:2530
#3 0x0000000000a6f87b in js::RunScript (cx=0x1a13590, state=...) at js/src/vm/Interpreter.cpp:412
#4 0x0000000000a70525 in js::Invoke (cx=0x1a13590, args=..., construct=js::NO\_CONSTRUCT) at js/src/vm/Interpreter.cpp:501
#5 0x0000000000a7181d in js::Invoke (cx=0x1a13590, thisv=..., fval=..., argc=<optimized out>, argv=0x7fffffffdb08, rval=JSVAL\_VOID) at js/src/vm/Interpreter.cpp:538
#6 0x00000000006a86bf in js::jit::DoCallFallback (cx=0x7fffffffdab8, frame=0x7fffffffdb40, stub\_=<optimized out>, argc=0, vp=0x7fffffffdaf8, res=JSVAL\_VOID) at js/src/jit/BaselineIC.cpp:9435
#7 0x00007ffff7e368fd in ?? ()
[...]
rax 0x0 0
rbx 0x7fffffffcce0 140737488342240
rcx 0x7ffff6cb792d 140737333917997
rdx 0x0 0
rsi 0x7ffff6f8baa0 140737336883872
rdi 0x7ffff6f8a180 140737336877440
rbp 0x7fffffffcc10 140737488342032
rsp 0x7fffffffcbe0 140737488341984
r8 0x7ffff7fe8740 140737354041152
r9 0x72746e65632d616c 8247338199356891500
r10 0x7fffffffc970 140737488341360
r11 0x7ffff6c3fc90 140737333427344
r12 0x7fffffffce90 140737488342672
r13 0x7fffffffd000 140737488343040
r14 0x1b00cc0 28314816
r15 0x1a13598 27342232
rip 0xadb8c1 <js::jit::JitActivation::~JitActivation()+305>
=> 0xadb8c1 <js::jit::JitActivation::~JitActivation()+305>: movl $0x7b,0x0
0xadb8cc <js::jit::JitActivation::~JitActivation()+316>: callq 0x4049c0 <abort@plt>

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1114569#c1)• 10 years ago |
|  | |

I don't know yet, but I can bet this bug is also related to [Bug 1073033](/show_bug.cgi?id=1073033 "RESOLVED FIXED - Scalar Replacement of Objects should handle scope chains.") :PAssignee: nobody → nicolas.b.pierronBlocks: [1073033](/show_bug.cgi?id=1073033 "RESOLVED FIXED - Scalar Replacement of Objects should handle scope chains.")Status: NEW → ASSIGNED

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1114569#c2)• 10 years ago |
|  | |

My blind guess is that this test case is investigating the stack, and creates a RecoverInstruction vector, but the vector is not used for any bailout as we are throwing an exception. Thus we fail in the destructor of the JitActivation with the sanity check which ensure that all recover instruction vector were used by their frames.
I am flagging this bug as sec-critical as the non-consumed RInstructionResult vector which are registered on the JitActivation are mapped with their frame pointer. So one person can build an attack by following these steps:
- Make a frame aligned on /fp\_x/ which has a non-escaped lambda & non-escaped scope-chain.
- The lambda is called, and makes a call which inspect the stack.
- Then an error is used to skip the use of the RInstructionVector.
- Back in baseline, call another function, which is running under ion and which has a frame aligned on /fp\_x/.
- Then this frame is causing a bailout, and re-use the RInstructionVector which was not popped previously.
This can be used for injecting different Value to get these interpreted differently, such as injecting pointer. This can also read uninitialized memory if the RInstructionResult vector is smaller than the one from the previous frame.
- which are being inspected by some code deeper, and then throw. The throw will skip the recovery of the frame, and thus will return into baseline.Group: core-security, javascript-core-securityKeywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1114569#c3)• 10 years ago |
|  | |

Attached patch

[[Inbound/Aurora] Discard RInstructionResults while handling exceptions.](attachment.cgi?id=8540245&action=diff)
— [Details](attachment.cgi?id=8540245&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1114569&attachment=8540245)

This patch pop the RInstructionResult vector out of the JitActivation when
an exception is handled. (see [comment 2](/show_bug.cgi?id=1114569#c2 "VERIFIED FIXED - Assertion failure: ionRecovery_.empty(), at js/src/vm/Stack.cpp:1415"))
[Attachment #8540245](/attachment.cgi?id=8540245&action=edit "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") -
Flags: review?(hv1989)

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a79386_196399)• 10 years ago |

[Attachment #8540245](/attachment.cgi?id=8540245&action=edit "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") -
Flags: review?(hv1989) → review+

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1114569#c4)• 10 years ago |
| obsolete | |

| Comment hidden (obsolete) |  |
| --- | --- |

The following testcase crashes on mozilla-central revision 7b33ee7fd162 (build with --enable-optimize --enable-debug, run with --ion-offthread-compile=off --ion-eager):
try {
function test(a) {
a = 1 + (a | 0);
function c() {
test.arguments[0];
$ERROR('#1: 1e+01 === 10');
}
c();
}
test();
} catch(exc2) {}
test();
As the above example show, this issue is not restricted to the optimization added in [Bug 1073033](/show_bug.cgi?id=1073033 "RESOLVED FIXED - Scalar Replacement of Objects should handle scope chains."). I am afraid this issue might be as old as the introduction of the RInstructionResult on the JitActivation ([Bug 1062869](/show_bug.cgi?id=1062869 "RESOLVED FIXED - Recover Instructions ahead of the bailouts.")).
I am running a bisect to verify if Fx35 is affected.
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=%3F)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=%3F)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1114569#c5)• 10 years ago |
|  | |

(In reply to Nicolas B. Pierron [:nbp] from [comment #4](/show_bug.cgi?id=1114569#c4 "VERIFIED FIXED - Assertion failure: ionRecovery_.empty(), at js/src/vm/Stack.cpp:1415"))
> The following testcase crashes on mozilla-central revision 7b33ee7fd162
Hum … I might have done something wrong because I cannot reproduce this crash with the above test case :/

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a93749_422187)• 10 years ago |

[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=%3F) → ---
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=%3F) → ---

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1114569#c6)• 10 years ago |
|  | |

Comment on [attachment 8540245](/attachment.cgi?id=8540245 "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") [[details]](/attachment.cgi?id=8540245&action=edit "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") [[diff]](/attachment.cgi?id=8540245&action=diff "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1114569&attachment=8540245)
[Inbound/Aurora] Discard RInstructionResults while handling exceptions.
> [Security approval request comment]
> How easily could an exploit be constructed based on the patch?
The patch highlight that an exploit should make use of exceptions, and it should use recover instructions. Which is a big part of what is described in [comment 2](/show_bug.cgi?id=1114569#c2 "VERIFIED FIXED - Assertion failure: ionRecovery_.empty(), at js/src/vm/Stack.cpp:1415").
> Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
The test is included in the patch so far. (waiting to know if we decide to backport the patch or not, knowing that the test case only failed because of [Bug 1073033](/show_bug.cgi?id=1073033 "RESOLVED FIXED - Scalar Replacement of Objects should handle scope chains."))
> Which older supported branches are affected by this flaw?
I am not sure if older versions are affected, and think that fuzzers might not have found similar issues before, then this might be since [Bug 1062869](/show_bug.cgi?id=1062869 "RESOLVED FIXED - Recover Instructions ahead of the bailouts.").
> If not all supported branches, which bug introduced the flaw?
[Bug 1062869](/show_bug.cgi?id=1062869 "RESOLVED FIXED - Recover Instructions ahead of the bailouts.")
> Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Backports should be easy to make, only one function got renamed since [Bug 1062869](/show_bug.cgi?id=1062869 "RESOLVED FIXED - Recover Instructions ahead of the bailouts.").
> How likely is this patch to cause regressions; how much testing does it need?
Unlikely, the function which is called is supposed to work well even if the element does not exists in the vector.
[Attachment #8540245](/attachment.cgi?id=8540245&action=edit "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") -
Flags: sec-approval?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a97927_75935)• 10 years ago |

[status-b2g-v1.4](/buglist.cgi?f1=cf_status_b2g_1_4&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_1_4&o1=equals&v1=unaffected)
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=unaffected)
[status-b2g-v2.0M](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0m&o1=equals&v1=unaffected)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=unaffected)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected)
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=affected)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected)
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1114569#c7)• 10 years ago |
|  | |

(In reply to Nicolas B. Pierron [:nbp] from [comment #6](/show_bug.cgi?id=1114569#c6 "VERIFIED FIXED - Assertion failure: ionRecovery_.empty(), at js/src/vm/Stack.cpp:1415"))
> Comment on [attachment 8540245](/attachment.cgi?id=8540245 "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") [[details]](/attachment.cgi?id=8540245&action=edit "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") [[diff]](/attachment.cgi?id=8540245&action=diff "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1114569&attachment=8540245)
> Discard RInstructionResults while handling exceptions.
>
> > [Security approval request comment]
> > How easily could an exploit be constructed based on the patch?
>
> The patch highlight that an exploit should make use of exceptions, and it
> should use recover instructions. Which is a big part of what is described
> in [comment 2](/show_bug.cgi?id=1114569#c2 "VERIFIED FIXED - Assertion failure: ionRecovery_.empty(), at js/src/vm/Stack.cpp:1415").
>
> > Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
>
> The test is included in the patch so far. (waiting to know if we decide to
> backport the patch or not, knowing that the test case only failed because of
> [Bug 1073033](/show_bug.cgi?id=1073033 "RESOLVED FIXED - Scalar Replacement of Objects should handle scope chains."))
>
> > Which older supported branches are affected by this flaw?
>
> I am not sure if older versions are affected, and think that fuzzers might
> not have found similar issues before, then this might be since [Bug 1062869](/show_bug.cgi?id=1062869 "RESOLVED FIXED - Recover Instructions ahead of the bailouts.").
s/and think/and if we think/
>
> > If not all supported branches, which bug introduced the flaw?
>
> [Bug 1062869](/show_bug.cgi?id=1062869 "RESOLVED FIXED - Recover Instructions ahead of the bailouts.")
>
> > Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
>
> Backports should be easy to make, only one function got renamed since Bug
> 1062869.
>
> > How likely is this patch to cause regressions; how much testing does it need?
>
> Unlikely, the function which is called is supposed to work well even if the
> element does not exists in the vector.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a133955_395101)• 10 years ago |

Whiteboard: [jsbugmon:update,bisect] → [jsbugmon:bisect]

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1114569#c8)• 10 years ago |
|  | |

JSBugMon: Cannot process bug: Unable to automatically reproduce, please track manually.

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a142996_395101)• 10 years ago |

Whiteboard: [jsbugmon:bisect] → [jsbugmon:]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a191754_280903)• 10 years ago |

[status-firefox34](/buglist.cgi?f1=cf_status_firefox34&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=%3F)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1114569#c9)• 10 years ago |
|  | |

Comment on [attachment 8540245](/attachment.cgi?id=8540245 "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") [[details]](/attachment.cgi?id=8540245&action=edit "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") [[diff]](/attachment.cgi?id=8540245&action=diff "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1114569&attachment=8540245)
[Inbound/Aurora] Discard RInstructionResults while handling exceptions.
Sec-approval+ for trunk. Please don't check in a test yet though.
[Attachment #8540245](/attachment.cgi?id=8540245&action=edit "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") -
Flags: sec-approval? → sec-approval+

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a200084_395101)• 10 years ago |

Whiteboard: [jsbugmon:] → [jsbugmon:update]

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a796314_280903)• 10 years ago |

[status-firefox34](/buglist.cgi?f1=cf_status_firefox34&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=%3F) → [unaffected](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=unaffected)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1114569#c10)• 10 years ago |
|  | |

Attached patch

[[Beta] Discard RInstructionResults while handling exceptions.](attachment.cgi?id=8543293&action=diff)
— [Details](attachment.cgi?id=8543293&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1114569&attachment=8543293)

[Attachment #8543293](/attachment.cgi?id=8543293&action=edit "[Beta] Discard RInstructionResults while handling exceptions.") -
Flags: review+

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a962998_422187)• 10 years ago |

[Attachment #8540245](/attachment.cgi?id=8540245&action=edit "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") -
Attachment description: Discard RInstructionResults while handling exceptions. → [Inbound/Aurora] Discard RInstructionResults while handling exceptions.

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1114569#c11)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/b4c70d12ab91>

|  | [Phil Ringnalda (:philor)](/user_profile?user_id=135518) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1114569#c12)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/b4c70d12ab91>Status: ASSIGNED → RESOLVEDClosed: 10 years ago
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla37

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a1096855_395101)• 10 years ago |

Status: RESOLVED → VERIFIED
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=verified)

|  | [Christian Holler (:decoder)](/user_profile?user_id=395101)  Reporter |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1114569#c13)• 10 years ago |
|  | |

JSBugMon: This bug has been automatically verified fixed.

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1114569#c14)• 10 years ago |
|  | |

Comment on [attachment 8543293](/attachment.cgi?id=8543293 "[Beta] Discard RInstructionResults while handling exceptions.") [[details]](/attachment.cgi?id=8543293&action=edit "[Beta] Discard RInstructionResults while handling exceptions.") [[diff]](/attachment.cgi?id=8543293&action=diff "[Beta] Discard RInstructionResults while handling exceptions.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1114569&attachment=8543293)
[Beta] Discard RInstructionResults while handling exceptions.
Approval Request Comment
[Feature/regressing bug #]:
[Bug 1062869](/show_bug.cgi?id=1062869 "RESOLVED FIXED - Recover Instructions ahead of the bailouts.")
[User impact if declined]:
Might cause crashes.
[Describe test coverage new/current, TBPL]:
landed on inbound.
[Risks and why]:
This can be used to forge use-after-free of JS memory. (see [comment 2](/show_bug.cgi?id=1114569#c2 "VERIFIED FIXED - Assertion failure: ionRecovery_.empty(), at js/src/vm/Stack.cpp:1415"))
[String/UUID change made/needed]:
N/A
[Attachment #8543293](/attachment.cgi?id=8543293&action=edit "[Beta] Discard RInstructionResults while handling exceptions.") -
Flags: approval-mozilla-beta?

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1114569#c15)• 10 years ago |
|  | |

Comment on [attachment 8540245](/attachment.cgi?id=8540245 "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") [[details]](/attachment.cgi?id=8540245&action=edit "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") [[diff]](/attachment.cgi?id=8540245&action=diff "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1114569&attachment=8540245)
[Inbound/Aurora] Discard RInstructionResults while handling exceptions.
Approval Request Comment
(see [comment 14](/show_bug.cgi?id=1114569#c14 "VERIFIED FIXED - Assertion failure: ionRecovery_.empty(), at js/src/vm/Stack.cpp:1415"))
[Attachment #8540245](/attachment.cgi?id=8540245&action=edit "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") -
Flags: approval-mozilla-aurora?

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1114569#c16)• 10 years ago |
|  | |

Checked in IRC with Al and we can wait on this for 35 since we're about to build RC and stability is a concern. We should get it uplifted into Aurora (36) though and I've marked it tracking to help ensure that happens in time.
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix)
[tracking-firefox36](/buglist.cgi?f1=cf_tracking_firefox36&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1114569#c17)• 10 years ago |
|  | |

Comment on [attachment 8543293](/attachment.cgi?id=8543293 "[Beta] Discard RInstructionResults while handling exceptions.") [[details]](/attachment.cgi?id=8543293&action=edit "[Beta] Discard RInstructionResults while handling exceptions.") [[diff]](/attachment.cgi?id=8543293&action=diff "[Beta] Discard RInstructionResults while handling exceptions.") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1114569&attachment=8543293)
[Beta] Discard RInstructionResults while handling exceptions.
See comment, we'll take the Aurora patch.
[Attachment #8543293](/attachment.cgi?id=8543293&action=edit "[Beta] Discard RInstructionResults while handling exceptions.") -
Flags: approval-mozilla-beta? → approval-mozilla-beta-

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a1232896_272375)• 10 years ago |

[Attachment #8540245](/attachment.cgi?id=8540245&action=edit "[Inbound/Aurora] Discard RInstructionResults while handling exceptions.") -
Flags: approval-mozilla-aurora? → approval-mozilla-aurora+

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1114569#c18)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/1ab03636659f>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a1237532_75935)• 10 years ago |

[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a1506301_1689)• 10 years ago |

Group: javascript-core-security

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a4967709_280903)• 10 years ago |

Whiteboard: [jsbugmon:update] → [jsbugmon:update][adv-main36+]

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a21923588_546015)• 9 years ago |

Group: core-security → core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1114569#a45828398_1689)• 9 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1114569&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.mozilla.org_b8860cef_20250124_141124.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1122387)
* [XML](/show_bug.cgi?ctype=xml&id=1122387)

Closed
[Bug 1122387](/show_bug.cgi?id=1122387)

Opened 10 years ago
Closed 10 years ago

# MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access

## Categories

### (Core :: WebRTC: Audio/Video, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=WebRTC%3A%20Audio%2FVideo#WebRTC%3A%20Audio%2FVideo)

WebRTC: Audio/Video
▾

Core :: WebRTC: Audio/Video
Bugs in WebRTC audio and video capture, handling, echo cancellation, encoding, and playback
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=WebRTC%3A%20Audio%2FVideo&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=WebRTC%3A%20Audio%2FVideo&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=WebRTC%3A%20Audio%2FVideo)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

All

All

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

normal

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla38

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |
| a11y-review | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox35 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix) |
| firefox36 | [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed) |
| firefox37 | [+](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed) |
| firefox38 | [+](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed) |
| firefox-esr31 | --- | [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected) |
| b2g-v2.0 | --- | [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=unaffected) |
| b2g-v2.1 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=fixed) |
| b2g-v2.2 | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed) |
| b2g-master | --- | [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox35 |  | wontfix |
| firefox36 | + | fixed |
| firefox37 | + | fixed |
| firefox38 | + | fixed |
| firefox-esr31 |  | unaffected |
| b2g-v2.0 |  | unaffected |
| b2g-v2.1 |  | fixed |
| b2g-v2.2 |  | fixed |
| relnote-firefox |  | --- |
| b2g-master |  | fixed |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: bwc, Assigned: jesup)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/ae002109ba1cfbb7f5ad990cc5d9fbaf?d=mm&size=40)  [jesup](/user_profile?user_id=11539)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/3e201149abea356acc9bb6f0eea8b5a0?d=mm&size=40)  [bwc](/user_profile?user_id=478411)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/9362a14d9b87a3935eb16cfc834ed51f?d=mm&size=40)  [jib](/user_profile?user_id=456498)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

11 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[1080755](/show_bug.cgi?id=1080755 "RESOLVED FIXED - WebRTC maximum frame rate goes up to 20FPS only on v2.1"), [1095218](/show_bug.cgi?id=1095218 "RESOLVED FIXED - msid and multistream support")

Dependency [tree](/showdependencytree.cgi?id=1122387&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1122387)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[Duplicates:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#duplicates)

[1119883](/show_bug.cgi?id=1119883 "RESOLVED DUPLICATE - Intermittent AddressSanitizer: global-buffer-overflow dom/media/webrtc/MediaEngineWebRTCVideo.cpp:112 mozilla::MediaEngineWebRTCVideoSource::DeliverFrame(unsigned char*, int, unsigned int, long, void*)")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: regression, sec-high, Whiteboard: [adv-main36+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main36+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (3 files, 1 obsolete file)

| [Update locking logic for getUserMedia video](/attachment.cgi?id=8550510)  [10 years ago](#c4)  [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)   10.80 KB, patch | roc : [review+](#a1084532_5038 "10 years ago")  abillings : [approval-mozilla-aurora+](#c38 "10 years ago")  abillings : [approval-mozilla-beta+](#c38 "10 years ago")  abillings : [sec-approval+](#c36 "10 years ago") | [Details](/attachment.cgi?id=8550510&action=edit) | [Diff](/attachment.cgi?id=8550510&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8550510) |
| --- | --- | --- |
| [avoid NotifyPull() for tracks we haven't added yet](/attachment.cgi?id=8551989)  [10 years ago](#c14)  [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)   5.36 KB, patch |  | [Details](/attachment.cgi?id=8551989&action=edit) | [Diff](/attachment.cgi?id=8551989&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8551989) |
| [speculative patch for comment 9's assertion](/attachment.cgi?id=8553715)  [10 years ago](#c28)  [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)   283 bytes, patch |  | [Details](/attachment.cgi?id=8553715&action=edit) | [Diff](/attachment.cgi?id=8553715&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8553715) |
| [speculative patch for comment 9's assertion](/attachment.cgi?id=8553892)  [10 years ago](#c31)  [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)   1.28 KB, patch | roc : [review+](#a656203_5038 "10 years ago") | [Details](/attachment.cgi?id=8553892&action=edit) | [Diff](/attachment.cgi?id=8553892&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8553892) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1122387#c0)• 10 years ago |
|  | |

In trying to diagnose this failure:
<https://treeherder.mozilla.org/logviewer.html#?job_id=5528186&repo=mozilla-inbound>
It appears that |mSources| must either be corrupt, or have been accessed from another thread. Neither of the places that write to it lock |mMonitor| first (although |Stop| locks it afterward), and we would expect to hit |Stop| when things are being torn down (where we see the failure above).
I have not determined why this started happening with the multistream push, but it may just be a matter of having more video tracks widening the window of opportunity.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1122387#c1)• 10 years ago |
|  | |

Looking closer, |MediaEngineWebRTCVideoSource::DeliverFrame| is called by the webrtc.org code, which is probably not being run on the same thread as the rest of the media subsystem. There are a bunch of reads of member variables that are going to be racy in here, as well as accesses to |mSources|.

|  | [Eric Rescorla (:ekr)](/user_profile?user_id=35667) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1122387#c2)• 10 years ago |
|  | |

FWIW, the webrtc.org code is very aggressive about using a lot of threads, and this seems likely

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1122387#c3)• 10 years ago |
|  | |

Likely this was introduced in
[Bug 1080755](/show_bug.cgi?id=1080755 "RESOLVED FIXED - WebRTC maximum frame rate goes up to 20FPS only on v2.1"): Push video frames into MediaStreamGraph instead of waiting for pulls
which iterates mSources in DeliverFrame(), instead of letting MSG iterate the active sources (not mSources, note) and makes N calls to NotifyPull from the MSG thread.
mSources should therefor be protected; it \*is\* under mMonitor in DeliverFrame, but not in other uses. It is protected for Audio, which always accessed it from webrtc threads. [Bug 1080755](/show_bug.cgi?id=1080755 "RESOLVED FIXED - WebRTC maximum frame rate goes up to 20FPS only on v2.1") changed this.
// mMonitor protects mImage access/changes, and transitions of mState
// from kStarted to kStopped (which are combined with EndTrack() and
// image changes). Note that mSources is not accessed from other threads
// for video and is not protected.

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1122387#c4)• 10 years ago |
|  | |

Attached patch

[Update locking logic for getUserMedia video](attachment.cgi?id=8550510&action=diff)
— [Details](attachment.cgi?id=8550510&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8550510)

Byron - please give this a try. Also cleans up a few latent TSAN issues with audio I think. Still need to check fake-video (MediaEngineDefault\*)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1122387#c5)• 10 years ago |
|  | |

With this patch I'm seeing a pretty reliable failure in test\_peerConnection\_basicH264Video.html on OS X e10s
[Child 15953] ###!!! ASSERTION: null mutex: 'mLock', file ../../dist/include/mozilla/Mutex.h, line 163
Unfortunately, there's no stack.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1122387#c6)• 10 years ago |
|  | |

Seems to happen even without the patches, might be that the plugin crashed; the assertion I see in the output seems to come from the crash reporter, and looks like it could be caused by the out-of-process crash reporter trying to pop when the in-process crash reporter was never enabled (which it wouldn't be in a DEBUG build).

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1122387#c7)• 10 years ago |
|  | |

So after some try pushes and lots of retriggers, there seem to be the following failures:
<https://treeherder.mozilla.org/logviewer.html#?job_id=4289317&repo=try> (3 times, all on linux x64 debug)
<https://treeherder.mozilla.org/logviewer.html#?job_id=4287190&repo=try> (6 times, all on OS X debug)
<https://treeherder.mozilla.org/logviewer.html#?job_id=4289269&repo=try>
<https://treeherder.mozilla.org/logviewer.html#?job_id=4289100&repo=try> (3 times on linux ASAN)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1122387#c8)• 10 years ago |
|  | |

Ok, regarding the failures in <https://treeherder.mozilla.org/logviewer.html#?job_id=4289317&repo=try>, it looks like this can happen if the tracks are just not ready yet. Not sure whether the right course of action is to wait for the tracks available callback to fire (<https://dxr.mozilla.org/mozilla-central/source/dom/media/MediaManager.cpp#894>) before calling |Activate| (called just before the setup of the tracks callback, which allows |NotifyPull| to be called), or to just silently ignore this error.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1122387#c9)• 10 years ago |
|  | |

Regarding <https://treeherder.mozilla.org/logviewer.html#?job_id=4287190&repo=try>, it looks like we're leaking three threads of stuff, maybe the GMP, compositor, and MSG threads? Not sure how this happens. I do see this NS\_ERROR assertion earlier in the log on the same process, not sure if it is important:
16:02:19 INFO - [Child 1054] ###!!! ASSERTION: Appshell already destroyed?: 'Error', file /builds/slave/try-osx64-d-000000000000000000/build/src/dom/media/MediaStreamGraph.cpp, line 1746
16:02:48 INFO - #01: mozilla::MediaStreamGraphImpl::AppendMessage(mozilla::ControlMessage\*) [dom/media/MediaStreamGraph.cpp:1801]
16:02:48 INFO - #02: mozilla::dom::HTMLMediaElement::Pause(mozilla::ErrorResult&) [dom/html/HTMLMediaElement.cpp:1622]
16:02:48 INFO - #03: mozilla::dom::HTMLMediaElement::Pause() [dom/bindings/ErrorResult.h:139]
16:02:48 INFO - #04: mozilla::dom::HTMLMediaElement::UnbindFromTree(bool, bool) [xpcom/base/nsRefPtr.h:209]
16:02:48 INFO - #05: mozilla::dom::FragmentOrElement::cycleCollection::Unlink(void\*) [xpcom/glue/nsCOMPtr.h:389]
16:02:48 INFO - #06: nsCycleCollector::CollectWhite() [xpcom/base/nsCycleCollector.cpp:3306]
16:02:48 INFO - #07: nsCycleCollector::Collect(ccType, js::SliceBudget&, nsICycleCollectorListener\*, bool) [xpcom/base/nsCycleCollector.cpp:3636]
16:02:48 INFO - #08: nsCycleCollector::Shutdown() [xpcom/base/nsCycleCollector.cpp:3565]
16:02:48 INFO - #09: nsCycleCollector\_shutdown() [xpcom/base/nsRefPtr.h:44]
16:02:48 INFO - #10: mozilla::ShutdownXPCOM(nsIServiceManager\*) [gfx/layers/ipc/AsyncTransactionTracker.h:130]
16:02:48 INFO - #11: XRE\_TermEmbedding [toolkit/xre/nsEmbedFunctions.cpp:207]
16:02:48 INFO - #12: mozilla::ipc::ScopedXREEmbed::Stop() [ipc/glue/ScopedXREEmbed.cpp:116]
16:02:48 INFO - #13: XRE\_InitChildProcess [toolkit/xre/nsEmbedFunctions.cpp:580]
16:02:48 INFO - #14: content\_process\_main(int, char\*\*) [ipc/contentproc/plugin-container.cpp:211]

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1122387#c10)• 10 years ago |
|  | |

<https://treeherder.mozilla.org/logviewer.html#?job_id=4289269&repo=try> looks like the same problem in [comment 8](/show_bug.cgi?id=1122387#c8 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access").

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a390868_1689)• 10 years ago |

Blocks: [1080755](/show_bug.cgi?id=1080755 "RESOLVED FIXED - WebRTC maximum frame rate goes up to 20FPS only on v2.1")
[status-b2g-v2.0](/buglist.cgi?f1=cf_status_b2g_2_0&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_b2g_2_0&o1=equals&v1=unaffected)
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=affected)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected)
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=affected)
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected)
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected)
[tracking-firefox36](/buglist.cgi?f1=cf_tracking_firefox36&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B)
[tracking-firefox37](/buglist.cgi?f1=cf_tracking_firefox37&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox37&o1=equals&v1=%2B)
[tracking-firefox38](/buglist.cgi?f1=cf_tracking_firefox38&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox38&o1=equals&v1=%2B)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1122387#c11)• 10 years ago |
|  | |

Bryon's remaining oranges appear to be due to [Bug 1109644](/show_bug.cgi?id=1109644 "RESOLVED FIXED - Ever-increasing MediaStreamGraph video delay (and jerkiness) on 36/37")'s landing - now, instead of storing the amount of data provided to the track in the source, it's stored in the track - but that requires the track to be available. We received NotifyPull and ask all tracks to provide data, but I suspect it's being invoked because of the other track on the stream (we add (via Start()) the audio track before the video track in MediaOperationsTask::Run()).
It's kinda ugly to deal with due to TSAN. Let me see what I can do

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1122387#c12)• 10 years ago |
|  | |

(In reply to Randell Jesup [:jesup] from [comment #11](/show_bug.cgi?id=1122387#c11 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"))
> Bryon's remaining oranges appear to be due to [Bug 1109644](/show_bug.cgi?id=1109644 "RESOLVED FIXED - Ever-increasing MediaStreamGraph video delay (and jerkiness) on 36/37")'s landing - now,
> instead of storing the amount of data provided to the track in the source,
> it's stored in the track - but that requires the track to be available. We
> received NotifyPull and ask all tracks to provide data, but I suspect it's
> being invoked because of the other track on the stream (we add (via Start())
> the audio track before the video track in MediaOperationsTask::Run()).
>
> It's kinda ugly to deal with due to TSAN. Let me see what I can do
That explains the oranges in [comment 8](/show_bug.cgi?id=1122387#c8 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access") and [comment 10](/show_bug.cgi?id=1122387#c10 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"), but doesn't seem to explain the orange in [comment 9](/show_bug.cgi?id=1122387#c9 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access") (nor the remaining orange; I'm still looking into it, but it is definitely an audio problem).

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1122387#c13)• 10 years ago |
|  | |

(In reply to Byron Campen [:bwc] from [comment #12](/show_bug.cgi?id=1122387#c12 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"))
> (In reply to Randell Jesup [:jesup] from [comment #11](/show_bug.cgi?id=1122387#c11 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"))
> > Bryon's remaining oranges appear to be due to [Bug 1109644](/show_bug.cgi?id=1109644 "RESOLVED FIXED - Ever-increasing MediaStreamGraph video delay (and jerkiness) on 36/37")'s landing - now,
> > instead of storing the amount of data provided to the track in the source,
> > it's stored in the track - but that requires the track to be available. We
> > received NotifyPull and ask all tracks to provide data, but I suspect it's
> > being invoked because of the other track on the stream (we add (via Start())
> > the audio track before the video track in MediaOperationsTask::Run()).
> >
> > It's kinda ugly to deal with due to TSAN. Let me see what I can do
>
> That explains the oranges in [comment 8](/show_bug.cgi?id=1122387#c8 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access") and [comment 10](/show_bug.cgi?id=1122387#c10 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"), but doesn't seem to
> explain the orange in [comment 9](/show_bug.cgi?id=1122387#c9 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access") (nor the remaining orange; I'm still looking
> into it, but it is definitely an audio problem).
For [comment 9](/show_bug.cgi?id=1122387#c9 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"), try moving AddRemoveSelfReference() in HTMLMediaElement::Pause() to the end - we could be dropping the self-reference before we call ChangeExplicitBlockerCount(), which is where we're hitting the assertion. I'm not sure that's to blame, but switching to Paused would affect the conditional in AddRemoveSelfReference ("(!mPaused && mSrcStream && !mSrcStream->IsFinished())")
roc/andreas/jw, any ideas?
I'll have a patch for [comment 8](/show_bug.cgi?id=1122387#c8 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access") and 10 in a bit. API is a bit of a pain here, since I need to know if I AddTracked it on MediaManager thread from within NotifyPull (MSG thread), which forces me to use locks.Flags: needinfo?(roc)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1122387#c14)• 10 years ago |
|  | |

Attached patch

[avoid NotifyPull() for tracks we haven't added yet](attachment.cgi?id=8551989&action=diff) (obsolete)
— [Details](attachment.cgi?id=8551989&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8551989)

Untested patch for [comment 8](/show_bug.cgi?id=1122387#c8 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access") and [comment 10](/show_bug.cgi?id=1122387#c10 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"); should compile - will test shortly for basic functionality

|  | [Andreas Pehrson [:pehrsons]](/user_profile?user_id=489889) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1122387#c16)• 10 years ago |
|  | |

(In reply to Randell Jesup [:jesup] from [comment #13](/show_bug.cgi?id=1122387#c13 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"))
> For [comment 9](/show_bug.cgi?id=1122387#c9 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"), try moving AddRemoveSelfReference() in
> HTMLMediaElement::Pause() to the end - we could be dropping the
> self-reference before we call ChangeExplicitBlockerCount(), which is where
> we're hitting the assertion. I'm not sure that's to blame, but switching to
> Paused would affect the conditional in AddRemoveSelfReference ("(!mPaused &&
> mSrcStream && !mSrcStream->IsFinished())")
>
> roc/andreas/jw, any ideas?
I'm blank on this one I'm afraid.
> I'll have a patch for [comment 8](/show_bug.cgi?id=1122387#c8 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access") and 10 in a bit. API is a bit of a pain
> here, since I need to know if I AddTracked it on MediaManager thread from
> within NotifyPull (MSG thread), which forces me to use locks.
These issues look like [bug 1116925](/show_bug.cgi?id=1116925 "RESOLVED FIXED - Intermittent test_getUserMedia_stopVideoAudioStreamWithFollowupVideoAudio.html,test_peerConnection_offerRequiresReceiveVideoAudio.html | Assertion count 1 is greater than expected (Track not found: 'Error')").

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1122387#c17)• 10 years ago |
|  | |

(In reply to Andreas Pehrson [:pehrsons] (Telenor) from [comment #16](/show_bug.cgi?id=1122387#c16 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"))
>
> These issues look like [bug 1116925](/show_bug.cgi?id=1116925 "RESOLVED FIXED - Intermittent test_getUserMedia_stopVideoAudioStreamWithFollowupVideoAudio.html,test_peerConnection_offerRequiresReceiveVideoAudio.html | Assertion count 1 is greater than expected (Track not found: 'Error')").
Yeah, they do. I guess we can move the NotifyPull patch over there, and avoid blocking [bug 1095218](/show_bug.cgi?id=1095218 "RESOLVED FIXED - msid and multistream support") on it?

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1122387#c18)• 10 years ago |
|  | |

(In reply to Byron Campen [:bwc] from [comment #17](/show_bug.cgi?id=1122387#c17 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"))
> (In reply to Andreas Pehrson [:pehrsons] (Telenor) from [comment #16](/show_bug.cgi?id=1122387#c16 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"))
> >
> > These issues look like [bug 1116925](/show_bug.cgi?id=1116925 "RESOLVED FIXED - Intermittent test_getUserMedia_stopVideoAudioStreamWithFollowupVideoAudio.html,test_peerConnection_offerRequiresReceiveVideoAudio.html | Assertion count 1 is greater than expected (Track not found: 'Error')").
>
> Yeah, they do. I guess we can move the NotifyPull patch over there, and
> avoid blocking [bug 1095218](/show_bug.cgi?id=1095218 "RESOLVED FIXED - msid and multistream support") on it?
I've moved it there and asked for review, as that's orthogonal to this bug. Don't block on it.
We still have the one from [comment 9](/show_bug.cgi?id=1122387#c9 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access") IIRC (Pause)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a465003_11539)• 10 years ago |

[Attachment #8551989](/attachment.cgi?id=8551989&action=edit "avoid NotifyPull() for tracks we haven't added yet") -
Attachment is obsolete: true

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1122387#c19)• 10 years ago |
|  | |

try with the locking logic fix, and the fix for [bug 1123882](/show_bug.cgi?id=1123882 "RESOLVED FIXED - MediaDecoderStateMachine::SendStreamAudio passes an incorrect buffer size to AudioSegment::AppendFrames when |offset| is non-zero"):
<https://treeherder.mozilla.org/#/jobs?repo=try&revision=ea15c056b1ae>
try with the above plus the fix for NotifyPull:
<https://treeherder.mozilla.org/#/jobs?repo=try&revision=8bfde853ca3f>
I need to do a final try push with the multistream work too.

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1122387#c20)• 10 years ago |
|  | |

Is ESR31 affected by this?

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1122387#c21)• 10 years ago |
|  | |

(In reply to Al Billings [:abillings] from [comment #20](/show_bug.cgi?id=1122387#c20 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"))
> Is ESR31 affected by this?
The bug that caused this is in 34 and up.

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a479086_11539)• 10 years ago |

[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
--- → [unaffected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=unaffected)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1122387#c22)• 10 years ago |
|  | |

Here's that push with multistream. Looking pretty good so far, still waiting on lots of retriggers. Includes patches from some other bugs.
<https://treeherder.mozilla.org/#/jobs?repo=try&revision=cfca214e0135>

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1122387#c23)• 10 years ago |
|  | |

Also have verified that signaling\_unittests works on linux ASAN.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1122387#c24)• 10 years ago |
|  | |

Seeing a bunch of crashes on linux x86 debug mochitest e10s, seems to be a MOZ\_CRASH() caused by failing a check here:
<https://dxr.mozilla.org/mozilla-central/source/ipc/chromium/src/base/shared_memory_posix.cc?from=shared_memory_posix.cc&case=true#221>

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1122387#c25)• 10 years ago |
|  | |

Going to try to figure out what errno is when that happens.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1122387#c26)• 10 years ago |
|  | |

As I suspected:
16:33:32 INFO - [Child 1900] ###!!! ABORT: Call to dup failed, errno=24: file /builds/slave/try-lx-d-000000000000000000000/build/src/ipc/chromium/src/base/shared\_memory\_posix.cc, line 221
We are exhausting the maximum number of fds in the child process. From what I can tell, every frame of video is getting its own fd. Not sure if something similar applies to audio or networking.

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1122387#c27)• 10 years ago |
|  | |

(In reply to Randell Jesup [:jesup] from [comment #13](/show_bug.cgi?id=1122387#c13 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"))
> For [comment 9](/show_bug.cgi?id=1122387#c9 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"), try moving AddRemoveSelfReference() in
> HTMLMediaElement::Pause() to the end - we could be dropping the
> self-reference before we call ChangeExplicitBlockerCount(), which is where
> we're hitting the assertion. I'm not sure that's to blame, but switching to
> Paused would affect the conditional in AddRemoveSelfReference ("(!mPaused &&
> mSrcStream && !mSrcStream->IsFinished())")
>
> roc/andreas/jw, any ideas?
Not really, but it sounds reasonable.Flags: needinfo?(roc)

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1122387#c28)• 10 years ago |
|  | |

Attached patch

[speculative patch for comment 9's assertion](attachment.cgi?id=8553715&action=diff)
— [Details](attachment.cgi?id=8553715&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8553715)

not sure if this will help, but I don't think it will hurt.

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1122387#c29)• 10 years ago |
|  | |

Comment on [attachment 8550510](/attachment.cgi?id=8550510 "Update locking logic for getUserMedia video") [[details]](/attachment.cgi?id=8550510&action=edit "Update locking logic for getUserMedia video") [[diff]](/attachment.cgi?id=8550510&action=diff "Update locking logic for getUserMedia video") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8550510)
Update locking logic for getUserMedia video
Byron has green tries on this I understand, and this blocks landing the multistream work (which blocks landing the webrtc branch 40 update). Thanks!
[Attachment #8550510](/attachment.cgi?id=8550510&action=edit "Update locking logic for getUserMedia video") -
Flags: review?(roc)

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1122387#c30)• 10 years ago |
|  | |

(In reply to Randell Jesup [:jesup] from [comment #28](/show_bug.cgi?id=1122387#c28 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access"))
> Created [attachment 8553715](/attachment.cgi?id=8553715 "speculative patch for comment 9's assertion") [[details]](/attachment.cgi?id=8553715&action=edit "speculative patch for comment 9's assertion") [[diff]](/attachment.cgi?id=8553715&action=diff "speculative patch for comment 9's assertion") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8553715)
> speculative patch for [comment 9](/show_bug.cgi?id=1122387#c9 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access")'s assertion
>
> not sure if this will help, but I don't think it will hurt.
I don't disagree; the patch seems to be empty though.

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1122387#c31)• 10 years ago |
|  | |

Attached patch

[speculative patch for comment 9's assertion](attachment.cgi?id=8553892&action=diff)
— [Details](attachment.cgi?id=8553892&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8553892)

oops, edited wrong version of HTMLMediaElement.cpp

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a656203_5038)• 10 years ago |

[Attachment #8553892](/attachment.cgi?id=8553892&action=edit "speculative patch for comment 9's assertion") -
Flags: review+

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 32](/show_bug.cgi?id=1122387#c32)• 10 years ago |
|  | |

Try push that includes the patch from this ticket, along with multistream ([bug 1095218](/show_bug.cgi?id=1095218 "RESOLVED FIXED - msid and multistream support")) and [bug 1116925](/show_bug.cgi?id=1116925 "RESOLVED FIXED - Intermittent test_getUserMedia_stopVideoAudioStreamWithFollowupVideoAudio.html,test_peerConnection_offerRequiresReceiveVideoAudio.html | Assertion count 1 is greater than expected (Track not found: 'Error')"):
<https://treeherder.mozilla.org/#/jobs?repo=try&revision=88eefa79cb8f>

|  | [Robert O'Callahan (:roc) (email my personal email if necessary)](/user_profile?user_id=5038) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a1084532_5038)• 10 years ago |

[Attachment #8550510](/attachment.cgi?id=8550510&action=edit "Update locking logic for getUserMedia video") -
Flags: review?(roc) → review+

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 33](/show_bug.cgi?id=1122387#c33)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/38853d802eac>
Did not land the speculative patch, since it has not had a try run yet. Need to handle that one separately.

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Comment 34](/show_bug.cgi?id=1122387#c34)• 10 years ago |
|  | |

Comment on [attachment 8550510](/attachment.cgi?id=8550510 "Update locking logic for getUserMedia video") [[details]](/attachment.cgi?id=8550510&action=edit "Update locking logic for getUserMedia video") [[diff]](/attachment.cgi?id=8550510&action=diff "Update locking logic for getUserMedia video") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8550510)
Update locking logic for getUserMedia video
Oops, we goofed and jumped the gun here...
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Seems like it would be pretty hard.
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
It would be very easy to see what was being fixed.
Which older supported branches are affected by this flaw?
Looks like everything but esr31, and b2g <= 2.0.
If not all supported branches, which bug introduced the flaw?
[Bug 1080755](/show_bug.cgi?id=1080755 "RESOLVED FIXED - WebRTC maximum frame rate goes up to 20FPS only on v2.1").
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
No. I don't think they will be particularly hard. jesup?
How likely is this patch to cause regressions; how much testing does it need?
Some risk of introducing a deadlock bug, but it has been run through try lots of times.
[Attachment #8550510](/attachment.cgi?id=8550510&action=edit "Update locking logic for getUserMedia video") -
Flags: sec-approval?

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a1086727_75935)• 10 years ago |

Assignee: nobody → docfaraday

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 35](/show_bug.cgi?id=1122387#c35)• 10 years ago |
|  | |

backports should be trivial

|  | [Byron Campen [:bwc]](/user_profile?user_id=478411)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a1086984_478411)• 10 years ago |

Assignee: docfaraday → rjesup

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 36](/show_bug.cgi?id=1122387#c36)• 10 years ago |
|  | |

Comment on [attachment 8550510](/attachment.cgi?id=8550510 "Update locking logic for getUserMedia video") [[details]](/attachment.cgi?id=8550510&action=edit "Update locking logic for getUserMedia video") [[diff]](/attachment.cgi?id=8550510&action=diff "Update locking logic for getUserMedia video") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8550510)
Update locking logic for getUserMedia video
sec-approval+. Let's get this on Aurora and Beta.
[Attachment #8550510](/attachment.cgi?id=8550510&action=edit "Update locking logic for getUserMedia video") -
Flags: sec-approval? → sec-approval+

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Comment 37](/show_bug.cgi?id=1122387#c37)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-aurora/rev/8bca070f1dc8>
<https://hg.mozilla.org/releases/mozilla-beta/rev/0043397aaa19>

|  | [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a1089776_11539)• 10 years ago |

[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed)
[status-firefox37](/buglist.cgi?f1=cf_status_firefox37&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox37&o1=equals&v1=fixed)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 38](/show_bug.cgi?id=1122387#c38)• 10 years ago |
|  | |

Comment on [attachment 8550510](/attachment.cgi?id=8550510 "Update locking logic for getUserMedia video") [[details]](/attachment.cgi?id=8550510&action=edit "Update locking logic for getUserMedia video") [[diff]](/attachment.cgi?id=8550510&action=diff "Update locking logic for getUserMedia video") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1122387&attachment=8550510)
Update locking logic for getUserMedia video
[Triage Comment]
[Attachment #8550510](/attachment.cgi?id=8550510&action=edit "Update locking logic for getUserMedia video") -
Flags: approval-mozilla-beta+
[Attachment #8550510](/attachment.cgi?id=8550510&action=edit "Update locking logic for getUserMedia video") -
Flags: approval-mozilla-aurora+

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a1090072_280903)• 10 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a1090499_75935)• 10 years ago |

Keywords: [checkin-needed](/buglist.cgi?keywords=checkin-needed&resolution=---)

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 39](/show_bug.cgi?id=1122387#c39)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/38853d802eac>
[status-firefox38](/buglist.cgi?f1=cf_status_firefox38&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox38&o1=equals&v1=fixed)Flags: needinfo?(rjesup)Target Milestone: --- → mozilla38

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 40](/show_bug.cgi?id=1122387#c40)• 10 years ago |
|  | |

<https://hg.mozilla.org/releases/mozilla-b2g37_v2_2/rev/8bca070f1dc8>
<https://hg.mozilla.org/releases/mozilla-b2g34_v2_1/rev/095a46f32cd4>Status: NEW → RESOLVEDClosed: 10 years ago
[status-b2g-v2.1](/buglist.cgi?f1=cf_status_b2g_2_1&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_1&o1=equals&v1=fixed)
[status-b2g-v2.2](/buglist.cgi?f1=cf_status_b2g_2_2&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_2_2&o1=equals&v1=fixed)
[status-b2g-master](/buglist.cgi?f1=cf_status_b2g_master&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_b2g_master&o1=equals&v1=fixed)Flags: needinfo?(rjesup)Resolution: --- → FIXED

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a2834551_280903)• 10 years ago |

Whiteboard: [adv-main36+]

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a19789129_546015)• 9 years ago |

Group: core-security → core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1122387#a43693944_1689)• 9 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1122387&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Randell Jesup [:jesup] (needinfo me)](/user_profile?user_id=11539)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from bugzilla.suse.com_0f40fddb_20250126_012830.html ===


| Bugzilla – Bug Access Denied |
| --- |

|  |
| --- |

* [Home](./)
* | [New](enter_bug.cgi)
* | [Browse](describecomponents.cgi)
* | [Search](query.cgi)
* |

  [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
* | [Reports](report.cgi)
* |
  [Requests](request.cgi)
* |
  [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D910647)
* |
  [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

## Related documentation

* [Creating an account](https://bugzilla.readthedocs.org/en/5.0/administering/users.html#creating-new-users)

You are not authorized to access bug #910647.
To see this bug, you must
first [log
in to an account](show_bug.cgi?id=910647&GoAheadAndLogIn=1) with the appropriate permissions.

Please press **Back** and try again.

* + [Home](./)
  + | [New](enter_bug.cgi)
  + | [Browse](describecomponents.cgi)
  + | [Search](query.cgi)
  + |

    [[?]](page.cgi?id=quicksearch.html "Quicksearch Help")
  + | [Reports](report.cgi)
  + |
    [Requests](request.cgi)
  + |
    [IDP Log In](/saml2_login.cgi?idp=IDP&target=show_bug.cgi%3Fid%3D910647)
  + |
    [Forgot Password](https://idp-portal.suse.com/univention/self-service/#page=passwordreset)

+ Legal:
+ [openSUSE](http://en.opensuse.org/Terms_of_site)
+ [SUSE](https://www.suse.com/company/legal/)



=== Content from blog.mozilla.org_a1905f2a_20250126_012827.html ===

[Skip to content](#content)

[Mozilla](https://blog.mozilla.org/en/)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

* [Internet Culture](https://blog.mozilla.org/en/category/internet-culture/)
  + [Deep Dives](https://blog.mozilla.org/en/category/internet-culture/deep-dives/)
  + [Mozilla Explains](https://blog.mozilla.org/en/category/internet-culture/mozilla-explains/)
  + [Interviews](https://blog.mozilla.org/en/category/internet-culture/interviews/)
  + [Videos](https://blog.mozilla.org/en/category/videos/)
* [Privacy & Security](https://blog.mozilla.org/en/category/privacy-security/)
* [Products](https://blog.mozilla.org/en/category/products/)
  + [Firefox](https://blog.mozilla.org/en/category/products/firefox/)
  + [Pocket](https://blog.mozilla.org/en/category/products/pocket/)
  + [Mozilla VPN](https://blog.mozilla.org/en/category/products/mozilla-vpn/)
* [Mozilla](https://blog.mozilla.org/en/category/mozilla/)
  + [News](https://blog.mozilla.org/en/category/mozilla/news/)
  + [Internet Policy](https://blog.mozilla.org/en/category/mozilla/internet-policy/)
  + [Leadership](https://blog.mozilla.org/en/category/mozilla/leadership/)
    - [Mitchell Baker, CEO](https://blog.mozilla.org/en/author/mitchellmozillacom/)
    - [Mark Surman, ED Foundation](https://blog.mozilla.org/en/author/markmozillafoundation-org/)
    - [Eric Rescorla, Firefox CTO](https://blog.mozilla.org/en/author/ekrmozilla-com/)

[Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_medium=referral&utm_campaign=blog-nav)

![search](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/icons/search.svg)

#### Search

Search for:

![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2019/01/mozilla-logo-bw-rgb.png)
## News

Official announcements and press releases

[![Room filled with people listening to a speaker on stage. Demo Day visual image in the background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/Demo_Day_Blog_Header_-1-800x800.jpg)
Mozilla
## Mozilla Builders: Celebrating community-driven innovation in AI

Read More](https://blog.mozilla.org/en/mozilla/mozilla-builders-demo-day/)

[![The Mozilla logo in green on a black background](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/12/logo-lockup-video-poster-800x800.png)
Mozilla
## Mozilla welcomes new executive team members

Read More](https://blog.mozilla.org/en/mozilla/new-executives/)

[![Decorative image of wrapped gifts in front of an iphone](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/11/moz_header_holiday_firefox-phone-gifts_blue-03.png-800x800.png)
Products
## Shopping for everyone? We’ve got you covered with the Fakespot Holiday Gift Guide 2024

Read More](https://blog.mozilla.org/en/products/shopping-for-everyone-weve-got-you-covered-with-the-fakespot-holiday-gift-guide-2024/)

[![Text: Mozilla Builders](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/Blog-16_9-1920x1080-1-800x800.png)
Mozilla
## 14 AI projects to watch: Mozilla’s first Builders Accelerator cohort kicks off

Read More](https://blog.mozilla.org/en/mozilla/14-ai-projects-to-watch-mozillas-first-builders-accelerator-cohort-kicks-off/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot’s guide to trending back-to-school products

Read More](https://blog.mozilla.org/en/mozilla/news/fakespots-guide-to-trending-back-to-school-products/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## BAFTA Award-Winner Siobhán McSweeney to host Mozilla’s 2nd Annual Rise25 Awards in Dublin, Ireland on Aug. 13

Read More](https://blog.mozilla.org/en/mozilla/bafta-award-winner-siobhan-mcsweeney-to-host-mozillas-2nd-annual-rise25-awards-in-dublin-ireland-on-august-13/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/05/fx_website_meta-image_tips-tricks_alt-04-1-800x800.webp)
Mozilla
## Here’s what we’re working on in Firefox

Read More](https://blog.mozilla.org/en/mozilla/heres-what-were-working-on-in-firefox/)

[![A check mark next to the text "Fakespot."](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2023/07/Fakespot_ProductBlog-2-800x800.jpg)
News
## Fakespot reveals the product categories with the most and least reliable product reviews

Read More](https://blog.mozilla.org/en/mozilla/news/fakespot-reveals-the-product-categories-with-the-most-and-least-reliable-product-reviews-for-summer-and-back-to-school-shopping/)

[![A dark blue speech bubble with horizontal purple and red bars on a pink background.](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2020/03/fx_blog_header_announcements_001_1920x1080-800x800.jpg)
Firefox
## Engaging with our Firefox community: Highlights from our recent AMA

Read More](https://blog.mozilla.org/en/products/firefox/engaging-with-our-firefox-community-highlights-from-our-recent-ama/)

[![](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/IG_Highlights_Icon-800x800.png)
Mozilla
## Mozilla announces finalists for the 2nd annual Rise25 Awards

Read More](https://blog.mozilla.org/en/mozilla/mozilla-announces-finalists-for-the-2nd-annual-rise25-awards/)

[![Mozilla and Anonym logos](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/blog_1200x800_v2-800x800.png)
Mozilla
## Introducing Anonym: Raising the bar for privacy-preserving digital advertising

Read More](https://blog.mozilla.org/en/mozilla/mozilla-anonym-raising-the-bar-for-privacy-preserving-digital-advertising/)

[![logo - zero with a diagonal line through it, and the letters D, I, N](https://blog.mozilla.org/wp-content/blogs.dir/278/files/2024/06/odintbanner-500x500.png)
Mozilla
## Keeping GenAI technologies secure is a shared responsibility

Read More](https://blog.mozilla.org/en/mozilla/keeping-genai-technologies-secure-is-a-shared-responsibility/)

1
[2](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
[3](https://blog.mozilla.org/en/category/mozilla/news/page/3?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
…
[24](https://blog.mozilla.org/en/category/mozilla/news/page/24?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)
[next](https://blog.mozilla.org/en/category/mozilla/news/page/2?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=compa)

![newsletter](https://blog.mozilla.org/wp-content/themes/foxtail/assets/images/newsletter.png)

### Keep up with all things Firefox

Get how-tos, advice and news to make your Firefox experience work best for you.

Your e-mail address

Country
- select -
Afghanistan
Akrotiri
Albania
Algeria
American Samoa
Andorra
Angola
Anguilla
Antarctica
Antigua and Barbuda
Argentina
Armenia
Aruba
Ashmore and Cartier Islands
Australia
Austria
Azerbaijan
Bahamas, The
Bahrain
Baker Island
Bangladesh
Barbados
Bassas da India
Belarus
Belgium
Belize
Benin
Bermuda
Bhutan
Bolivia
Bonaire, Sint Eustatius, and Saba
Bosnia and Herzegovina
Botswana
Bouvet Island
Brazil
British Indian Ocean Territory
Brunei
Bulgaria
Burkina Faso
Burma
Burundi
Cabo Verde
Cambodia
Cameroon
Canada
Cayman Islands
Central African Republic
Chad
Chile
China
Christmas Island
Clipperton Island
Cocos (Keeling) Islands
Colombia
Comoros
Congo (Brazzaville)
Congo (Kinshasa)
Cook Islands
Coral Sea Islands
Costa Rica
Croatia
Cuba
Curaçao
Cyprus
Czech Republic
Côte d’Ivoire
Denmark
Dhekelia
Diego Garcia
Djibouti
Dominica
Dominican Republic
Ecuador
Egypt
El Salvador
Equatorial Guinea
Eritrea
Estonia
Ethiopia
Europa Island
Falkland Islands (Islas Malvinas)
Faroe Islands
Fiji
Finland
France
French Guiana
French Polynesia
French Southern and Antarctic Lands
Gabon
Gambia, The
Gaza Strip
Georgia
Germany
Ghana
Gibraltar
Glorioso Islands
Greece
Greenland
Grenada
Guadeloupe
Guam
Guatemala
Guernsey
Guinea
Guinea-Bissau
Guyana
Haiti
Heard Island and McDonald Islands
Honduras
Hong Kong
Howland Island
Hungary
Iceland
India
Indonesia
Iran
Iraq
Ireland
Isle of Man
Israel
Italy
Jamaica
Jan Mayen
Japan
Jarvis Island
Jersey
Johnston Atoll
Jordan
Juan de Nova Island
Kazakhstan
Kenya
Kingman Reef
Kiribati
Korea, North
Korea, South
Kosovo
Kuwait
Kyrgyzstan
Laos
Latvia
Lebanon
Lesotho
Liberia
Libya
Liechtenstein
Lithuania
Luxembourg
Macau
Macedonia
Madagascar
Malawi
Malaysia
Maldives
Mali
Malta
Marshall Islands
Martinique
Mauritania
Mauritius
Mayotte
Mexico
Micronesia, Federated States of
Midway Islands
Moldova
Monaco
Mongolia
Montenegro
Montserrat
Morocco
Mozambique
Namibia
Nauru
Navassa Island
Nepal
Netherlands
New Caledonia
New Zealand
Nicaragua
Niger
Nigeria
Niue
Norfolk Island
Northern Mariana Islands
Norway
Oman
Pakistan
Palau
Palmyra Atoll
Panama
Papua New Guinea
Paracel Islands
Paraguay
Peru
Philippines
Pitcairn Islands
Poland
Portugal
Puerto Rico
Qatar
Reunion
Romania
Russia
Rwanda
Saint Barthelemy
Saint Helena, Ascension, and Tristan da Cunha
Saint Kitts and Nevis
Saint Lucia
Saint Martin
Saint Pierre and Miquelon
Saint Vincent and the Grenadines
Samoa
San Marino
Sao Tome and Principe
Saudi Arabia
Senegal
Serbia
Seychelles
Sierra Leone
Singapore
Sint Maarten
Slovakia
Slovenia
Solomon Islands
Somalia
South Africa
South Georgia and South Sandwich Islands
South Sudan
Spain
Spratly Islands
Sri Lanka
Sudan
Suriname
Svalbard
Swaziland
Sweden
Switzerland
Syria
Taiwan
Tajikistan
Tanzania
Thailand
Timor-Leste
Togo
Tokelau
Tonga
Trinidad and Tobago
Tromelin Island
Tunisia
Turkey
Turkmenistan
Turks and Caicos Islands
Tuvalu
Uganda
Ukraine
United Arab Emirates
United Kingdom
United States
Uruguay
Uzbekistan
Vanuatu
Vatican City
Venezuela
Vietnam
Virgin Islands, British
Virgin Islands, U.S.
Wake Island
Wallis and Futuna
West Bank
Western Sahara
Yemen
Zambia
Zimbabwe

Language
English
Bahasa Indonesia
Deutsch
Español
Français
Polski
Português
Русский
正體中文

Format

 HTML

 Text

I’m okay with Mozilla handling my info as explained in this [Privacy Policy](https://www.mozilla.org/privacy/).

Sign up now
We will only send you
Mozilla-related information.

## Thanks!

If you haven’t previously confirmed a subscription to a Mozilla-related newsletter you may have to do so. Please check your inbox or your spam filter for an e-mail from us.

[Mozilla](https://www.mozilla.org/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Mozilla

* [About](https://www.mozilla.org/about/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Contact Us](https://www.mozilla.org/contact/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Donate](https://donate.mozilla.org/?presets=50,30,20,10&amount=30¤cy=usd&utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Firefox

* [Download Firefox](https://www.mozilla.org/firefox/new/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Desktop](https://www.mozilla.org/firefox/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Mobile](https://www.mozilla.org/firefox/mobile/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Features](https://www.mozilla.org/firefox/features/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Beta, Nightly, Developer Edition](https://www.mozilla.org/firefox/channel/desktop/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Resources

* [Privacy Hub](https://www.mozilla.org/privacy/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Browser Comparison](https://www.mozilla.org/firefox/browsers/compare/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Brand Standards](https://mozilla.design/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)

##### Social

Follow @Firefox

* [Twitter (@mozilla)](https://twitter.com/firefox)
* [Instagram (@mozilla)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)

Follow @Mozilla

* [Twitter (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)

* [Website Privacy Notice](https://www.mozilla.org/privacy/websites/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)
* [Legal](https://www.mozilla.org/about/legal/?utm_source=blog.mozilla.org&utm_campaign=footer&utm_medium=referral)



=== Content from bugzilla.mozilla.org_971c90b1_20250126_012829.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Sat Jan 25 2025 17:28:28 PST

* **Bug ID:**
  1114569,
  1118894,
  1092947,
  1114058,
  1072760,
  1122387,
  1119019,
  1125734,
  1127246,
  1127206

---

10 bugs found.

| [ID](/buglist.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&order=bug_id%20DESC&query_based_on=) | [Type](/buglist.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&order=bug_type%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Summary](/buglist.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&order=short_desc%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Product](/buglist.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&order=product%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Comp](/buglist.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&order=component%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Assignee▲](/buglist.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&order=assigned_to%20DESC%2Cbug_status%2Cpriority%2Cbug_id&query_based_on=) | [Status▲](/buglist.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&order=bug_status%20DESC%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Resolution](/buglist.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&order=resolution%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) | [Updated](/buglist.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&order=changeddate%2Cbug_status%2Cpriority%2Cassigned_to%2Cbug_id&query_based_on=) |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| [1127206](/show_bug.cgi?id=1127206 "RESOLVED FIXED - Crash when using certain File() constructors on workers") |  | [Crash when using certain File() constructors on workers](/show_bug.cgi?id=1127206) | Core | DOM: Core & HTML | bzbarsky | RESO | FIXE | 2019-03-13 |
| [1092947](/show_bug.cgi?id=1092947 "RESOLVED FIXED - Crash [@ EnterIon] or [@ js::jit::IonCannon]") |  | [Crash [@ EnterIon] or [@ js::jit::IonCannon]](/show_bug.cgi?id=1092947) | Core | JavaScript Engine: J | hv1989 | RESO | FIXE | 2016-06-04 |
| [1127246](/show_bug.cgi?id=1127246 "RESOLVED FIXED - baseShapes table is not updated after generational GC") |  | [baseShapes table is not updated after generational GC](/show_bug.cgi?id=1127246) | Core | JavaScript: GC | jcoppeard | RESO | FIXE | 2016-06-04 |
| [1119019](/show_bug.cgi?id=1119019 "RESOLVED FIXED - crash in mozilla::layers::SharedSurfaceTextureHost::Lock()") |  | [crash in mozilla::layers::SharedSurfaceTextureHost::Lock()](/show_bug.cgi?id=1119019) | Core | Graphics: Layers | nical.bugzilla | RESO | FIXE | 2016-06-04 |
| [1122387](/show_bug.cgi?id=1122387 "RESOLVED FIXED - MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access") |  | [MediaEngineWebRTCVideoSource::mSources is inadequately protected from non-threadsafe access](/show_bug.cgi?id=1122387) | Core | WebRTC: Audio/Video | rjesup | RESO | FIXE | 2016-06-04 |
| [1125734](/show_bug.cgi?id=1125734 "RESOLVED FIXED - Twitter edit profile page consistently crashes with the LastPass extension installed") |  | [Twitter edit profile page consistently crashes with the LastPass extension installed](/show_bug.cgi?id=1125734) | Core | JavaScript Engine: J | sunfish | RESO | FIXE | 2016-06-04 |
| [1072760](/show_bug.cgi?id=1072760 "VERIFIED FIXED - Failed JS_ASSERT_IF(attrs & JSPROP_READONLY, !(attrs & (JSPROP_GETTER | JSPROP_SETTER)));") |  | [Failed JS\_ASSERT\_IF(attrs & JSPROP\_READONLY, !(attrs & (JSPROP\_GETTER | JSPROP\_SETTER)));](/show_bug.cgi?id=1072760) | Core | JavaScript Engine | efaustbmo | VERI | FIXE | 2016-06-04 |
| [1114569](/show_bug.cgi?id=1114569 "VERIFIED FIXED - Assertion failure: ionRecovery_.empty(), at js/src/vm/Stack.cpp:1415") |  | [Assertion failure: ionRecovery\_.empty(), at js/src/vm/Stack.cpp:1415](/show_bug.cgi?id=1114569) | Core | JavaScript Engine | nicolas.b.pierron | VERI | FIXE | 2016-06-04 |
| [1118894](/show_bug.cgi?id=1118894 "VERIFIED FIXED - Assertion failure: pred->isLoopBackedge(), at js/src/jit/IonAnalysis.cpp:1962") |  | [Assertion failure: pred->isLoopBackedge(), at js/src/jit/IonAnalysis.cpp:1962](/show_bug.cgi?id=1118894) | Core | JavaScript Engine | sunfish | VERI | FIXE | 2016-06-04 |
| [1114058](/show_bug.cgi?id=1114058 "VERIFIED FIXED - Crash [@ js::RegExpShared::~RegExpShared]") |  | [Crash [@ js::RegExpShared::~RegExpShared]](/show_bug.cgi?id=1114058) | Core | JavaScript Engine: J | terrence.d.cole | VERI | FIXE | 2016-06-04 |

10 bugs found.

|  |  | [REST](/rest/bug?include_fields=id,summary,status&bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206 "Query as a REST API request") | [CSV](/buglist.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&ctype=csv&human=1) | [Feed](/buglist.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&title=Bug%20List&ctype=atom) | [iCalendar](/buglist.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&ctype=ics)  [Change Columns](/colchange.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced&query_based_on=) | [Edit Search](/query.cgi?bug_id=1114569%2C1118894%2C1092947%2C1114058%2C1072760%2C1122387%2C1119019%2C1125734%2C1127246%2C1127206&query_format=advanced) |  | as |
| --- | --- | --- | --- | --- | --- |

[File
a new bug
in the "Core" product](/enter_bug.cgi?product=Core)



=== Content from bugzilla.mozilla.org_5e005e62_20250124_141116.html ===


![](/static/v20250114.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1092947)
* [XML](/show_bug.cgi?ctype=xml&id=1092947)

Closed
[Bug 1092947](/show_bug.cgi?id=1092947)

Opened 10 years ago
Closed 10 years ago

# Crash [@ EnterIon] or [@ js::jit::IonCannon]

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Crash [@ EnterIon] or [@ js::jit::IonCannon]

## Categories

### (Core :: JavaScript Engine: JIT, defect)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT#JavaScript%20Engine%3A%20JIT)

JavaScript Engine: JIT
▾

Core :: JavaScript Engine: JIT
JavaScript engine's JIT compilers
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine%3A%20JIT)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Trunk

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86

Windows 7

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

*Not set*

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

critical

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

mozilla36

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Accessibility Severity | --- |
| --- | --- |
| a11y-review | --- |
| Performance Impact | --- |
| Webcompat Score | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox34 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=wontfix) |
| firefox35 | [+](/buglist.cgi?f1=cf_tracking_firefox35&o1=equals&v1=%2B) | [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix) |
| firefox36 | [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B) | [verified](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=verified) |
| firefox-esr31 | [-](/buglist.cgi?f1=cf_tracking_firefox_esr31&o1=equals&v1=-) | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=wontfix) |

|  | Tracking | Status |
| --- | --- | --- |
| firefox34 |  | wontfix |
| firefox35 | + | wontfix |
| firefox36 | + | verified |
| firefox-esr31 | - | wontfix |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | --- | --- |
| firefox-esr128 | --- | --- |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: gkw, Assigned: h4writer)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/1e19e5f3f314ade17e6a1e04a0f9c819?d=mm&size=40)  [h4writer](/user_profile?user_id=196399)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](extensions/Gravatar/web/default.jpg)  [gkw](/user_profile?user_id=132034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

14 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (5 keywords, Whiteboard: [adv-main36+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

---

[Keywords:](/describekeywords.cgi)

[crash](/buglist.cgi?keywords=crash&resolution=---),
[regression](/buglist.cgi?keywords=regression&resolution=---),
[reproducible](/buglist.cgi?keywords=reproducible&resolution=---),
[sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---),
[testcase](/buglist.cgi?keywords=testcase&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main36+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | in-testsuite |  |
|  | qe-verify |  |

## Crash Data

Signature:

[[@ EnterIon ]](https://crash-stats.mozilla.org/signature/?signature=EnterIon)

[[@ js::jit::IonCannon ]](https://crash-stats.mozilla.org/signature/?signature=js%3A%3Ajit%3A%3AIonCannon)

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (2 files, 1 obsolete file)

| [stack](/attachment.cgi?id=8515803)  [10 years ago](#c0)  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)   6.70 KB, text/plain |  | [Details](/attachment.cgi?id=8515803&action=edit) |
| --- | --- | --- |
| [Patch](/attachment.cgi?id=8520017)  [10 years ago](#c14)  [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)   14.05 KB, patch |  | [Details](/attachment.cgi?id=8520017&action=edit) | [Diff](/attachment.cgi?id=8520017&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1092947&attachment=8520017) |
| [Patch](/attachment.cgi?id=8521423)  [10 years ago](#c19)  [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)   11.08 KB, patch | djvj : [review+](#c20 "10 years ago") | [Details](/attachment.cgi?id=8521423&action=edit) | [Diff](/attachment.cgi?id=8521423&action=diff) | [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1092947&attachment=8521423) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1092947#c0)• 10 years ago |
|  | |

Attached file
[stack](attachment.cgi?id=8515803)
— [Details](attachment.cgi?id=8515803&action=edit)

function z(f) {
try {
f()
} catch (e) {}
}
s = newGlobal()
s["z"] = this["z"].bind()
evalcx("\
function a() {\
x()(x())(x())\
}\
function b() {\
a(Math.imul())\
}\
function c() {\
a(Math.imul());\
a(Math.imul());\
a()\
}\
function d() {\
x(x()) \* c() + (y > y)\
}\
function e(y) {\
+c() ? x(d()) : b(y > 0)\
}\
z(a);\
a = function() {};\
function p() {\
d(e())\
}\
z(p);\
function q() {\
e(q()(q(e()())))\
}\
q()\
", s)
crashes js opt shell on m-c changeset 0b81c10a9074 with --ion-eager --no-threads --ion-regalloc=backtracking at EnterIon with js::jit::IonCannon on the stack.
Debug configure options:
MAKE=mozmake AR=ar sh c://Users//mozillaadmin//trees//mozilla-central//js//src//configure --disable-debug --enable-optimize --enable-nspr-build --enable-more-deterministic --enable-gczeal --enable-debug-symbols --disable-tests
(This does not seem to affect debug shells.)
!exploitable mentions that this is exploitable, so setting s-s and assuming sec-critical.
autoBisect is running. Setting needinfo? from Jan as a start.Flags: needinfo?(jdemooij)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1092947#c1)• 10 years ago |
|  | |

This seems to occur as far back as <http://hg.mozilla.org/mozilla-central/rev/a459b02a9ca4> (and possibly even more before.) Unable to nail down an exact changeset though, due to an upgrade to MSVC 2013 on my machines.
[status-firefox34](/buglist.cgi?f1=cf_status_firefox34&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=affected)
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=affected)
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1092947#c2)• 10 years ago |
|  | |

I've checked that it goes even further back to <https://hg.mozilla.org/mozilla-central/rev/1a1968da61b3> or Fx29, so ESR31 is also likely affected.
I couldn't seem to reproduce this on Mac, might be a Windows issue.
[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=affected)

|  | [Nicolas B. Pierron [:nbp]](/user_profile?user_id=422187) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1092947#c3)• 10 years ago |
|  | |

I failed to reproduce this issue on linux x86 / x64, optimized / debug builds of the shell.
I did not try the configuration flags listed on [comment 0](/show_bug.cgi?id=1092947#c0 "RESOLVED FIXED - Crash [@ EnterIon] or [@ js::jit::IonCannon]").

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1092947#c4)• 10 years ago |
|  | |

(In reply to Gary Kwong [:gkw] [:nth10sd] GMT+8 after Oct 9 from [comment #2](/show_bug.cgi?id=1092947#c2 "RESOLVED FIXED - Crash [@ EnterIon] or [@ js::jit::IonCannon]"))
> I couldn't seem to reproduce this on Mac, might be a Windows issue.
(In reply to Nicolas B. Pierron [:nbp] from [comment #3](/show_bug.cgi?id=1092947#c3 "RESOLVED FIXED - Crash [@ EnterIon] or [@ js::jit::IonCannon]"))
> I failed to reproduce this issue on linux x86 / x64, optimized / debug builds of the shell.
Anyone has any luck on Windows?

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1092947#c5)• 10 years ago |
|  | |

I'll try this on Windows later today.

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1092947#c6)• 10 years ago |
|  | |

Unfortunately I can't reproduce this. Windows 8, VS 2013. I tried the revision, configure flags and shell flags in [comment 0](/show_bug.cgi?id=1092947#c0 "RESOLVED FIXED - Crash [@ EnterIon] or [@ js::jit::IonCannon]") and ran the test at least 30 times.
$ ./js --ion-eager --no-threads --ion-regalloc=backtracking /c/dev/test.js
js\_ReportOverRecursed called
c:/dev/test.js:9:381 InternalError: too much recursion

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1092947#c7)• 10 years ago |
|  | |

Kamil, do you mind testing this on your side? (Windows 7)Flags: needinfo?(kamiljoz)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1092947#c8)• 10 years ago |
|  | |

I can still reproduce with m-c rev 0c66a9fd9085 on Windows 7, but not on Windows 8.

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1092947#c9)• 10 years ago |
|  | |

And yes, I'm on MSVC 2013 on Windows 7 SP1.

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1092947#c10)• 10 years ago |
|  | |

Got Windows 7 here. Gonna investigate.Assignee: nobody → hv1989Flags: needinfo?(kamiljoz)Flags: needinfo?(jdemooij)

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1092947#c11)• 10 years ago |
|  | |

I also reproduced the crash on my Win 7 VM machine using the information from [comment #0](/show_bug.cgi?id=1092947#c0 "RESOLVED FIXED - Crash [@ EnterIon] or [@ js::jit::IonCannon]"). Using MSVC 2013 on Windows 7 SP1.

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1092947#c12)• 10 years ago |
|  | |

[Tracking Requested - why for this release]:
!exploitable says this is exploitable, and we've got separate confirmation that this happens in Windows 7, though not Linux, Mac, nor Windows 8.
[tracking-firefox35](/buglist.cgi?f1=cf_tracking_firefox35&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox35&o1=equals&v1=%3F)
[tracking-firefox36](/buglist.cgi?f1=cf_tracking_firefox36&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%3F)
[tracking-firefox-esr31](/buglist.cgi?f1=cf_tracking_firefox_esr31&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox_esr31&o1=equals&v1=%3F)Keywords: [reproducible](/buglist.cgi?keywords=reproducible&resolution=---)

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1092947#c13)• 10 years ago |
| incorrect | |

(In reply to Gary Kwong [:gkw] [:nth10sd] GMT+8 after Oct 9 from [comment #12](/show_bug.cgi?id=1092947#c12 "RESOLVED FIXED - Crash [@ EnterIon] or [@ js::jit::IonCannon]"))
> [Tracking Requested - why for this release]:
>
> !exploitable says this is exploitable, and we've got separate confirmation
> that this happens in Windows 7, though not Linux, Mac, nor Windows 8.
AFAIK, this is backtracking only, without asmjs. So should normally not be an issue in deployed builds. (Since they only run backtracking in asmjs).
The bug is caused due to stack overflow. We could make this a normal ionmonkey linking failure, which would result in non-ionmonkey code for that script, which would make this safe. Though currently looking into how we normally should have captured this.

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1092947#c14)• 10 years ago |
|  | |

Attached patch

[Patch](attachment.cgi?id=8520017&action=diff) (obsolete)
— [Details](attachment.cgi?id=8520017&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1092947&attachment=8520017)

Ok, this is [bug 995704](/show_bug.cgi?id=995704 "RESOLVED FIXED - Crash [@ EnterIon] or [@ js::jit::IonCannon] or [@ js::RunScript]"), which wasn't fully fixed. There are 3 entries to Ionmonkey (w/wo argumentscheck and OSR). Only 1 of the the 3 were patched. This patches all three entries
[Attachment #8520017](/attachment.cgi?id=8520017&action=edit "Patch") -
Flags: review?(kvijayan)

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1092947#c15)• 10 years ago |
|  | |

> Ok, this is [bug 995704](/show_bug.cgi?id=995704 "RESOLVED FIXED - Crash [@ EnterIon] or [@ js::jit::IonCannon] or [@ js::RunScript]"), which wasn't fully fixed.
So what would be the sec rating of this bug then? (The one you mention is sec-low)Flags: needinfo?(hv1989)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1092947#c16)• 10 years ago |
|  | |

Comment on [attachment 8520017](/attachment.cgi?id=8520017 "Patch") [[details]](/attachment.cgi?id=8520017&action=edit "Patch") [[diff]](/attachment.cgi?id=8520017&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092947&attachment=8520017)
Patch
Review of [attachment 8520017](/attachment.cgi?id=8520017 "Patch") [[details]](/attachment.cgi?id=8520017&action=edit "Patch") [[diff]](/attachment.cgi?id=8520017&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092947&attachment=8520017):
-----------------------------------------------------------------
Does the visitOsrEntry method need to be split up across all the methods? The logic there is almost identical across all architectures. The only change is that the stack-reservation methods are more involved for x86 and x64.
I'm wondering if it wouldn't be simpler to keep |visitOsrEntry| defined on the high-level CodeGenerator class, and define an arch-specific |masm.allocateFrame(size\_t)| that does-the-right-thing for the architecture.
Lastly, it's concerning that we're adding a mandatory |jump| to all argcheck codepaths. Why is it not OK to have the arg-check logic appear before the prologue logic, as it was before?
::: js/src/jit/shared/CodeGenerator-x86-shared.cpp
@@ +79,5 @@
> + // Allocate the full frame for this function. See comment in
> + // generatePrologue on why we are increasing by 1k at a time.
> + uint32\_t size = frameSize();
> + if (size != 0) {
> + while (size > 4096) {
Both prologue and OSR entry points use this frame-filling loop. Would be good to put it into a helper method.
[Attachment #8520017](/attachment.cgi?id=8520017&action=edit "Patch") -
Flags: review?(kvijayan)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1092947#c17)• 10 years ago |
|  | |

lowering to sec-moderate based on [comment 9](/show_bug.cgi?id=1092947#c9 "RESOLVED FIXED - Crash [@ EnterIon] or [@ js::jit::IonCannon]")Flags: needinfo?(hv1989)Keywords: [sec-critical](/buglist.cgi?keywords=sec-critical&resolution=---) → [sec-moderate](/buglist.cgi?keywords=sec-moderate&resolution=---)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1092947#c18)• 10 years ago |
|  | |

Sec-moderate doesn't qualify for ESR uplift, will track for 35/36 though.
[tracking-firefox35](/buglist.cgi?f1=cf_tracking_firefox35&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox35&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox35&o1=equals&v1=%2B)
[tracking-firefox36](/buglist.cgi?f1=cf_tracking_firefox36&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%3F) → [+](/buglist.cgi?f1=cf_tracking_firefox36&o1=equals&v1=%2B)
[tracking-firefox-esr31](/buglist.cgi?f1=cf_tracking_firefox_esr31&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox_esr31&o1=equals&v1=%3F) → [-](/buglist.cgi?f1=cf_tracking_firefox_esr31&o1=equals&v1=-)

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1092947#c19)• 10 years ago |
|  | |

Attached patch

[Patch](attachment.cgi?id=8521423&action=diff)
— [Details](attachment.cgi?id=8521423&action=edit)
— [Splinter Review](/page.cgi?id=splinter.html&ignore=&bug=1092947&attachment=8521423)

(In reply to Kannan Vijayan [:djvj] from [comment #16](/show_bug.cgi?id=1092947#c16 "RESOLVED FIXED - Crash [@ EnterIon] or [@ js::jit::IonCannon]"))
> Comment on [attachment 8520017](/attachment.cgi?id=8520017 "Patch") [[details]](/attachment.cgi?id=8520017&action=edit "Patch") [[diff]](/attachment.cgi?id=8520017&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092947&attachment=8520017)
> Patch
>
> Review of [attachment 8520017](/attachment.cgi?id=8520017 "Patch") [[details]](/attachment.cgi?id=8520017&action=edit "Patch") [[diff]](/attachment.cgi?id=8520017&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092947&attachment=8520017):
> -----------------------------------------------------------------
>
> Does the visitOsrEntry method need to be split up across all the methods?
> The logic there is almost identical across all architectures. The only
> change is that the stack-reservation methods are more involved for x86 and
> x64.
>
> I'm wondering if it wouldn't be simpler to keep |visitOsrEntry| defined on
> the high-level CodeGenerator class, and define an arch-specific
> |masm.allocateFrame(size\_t)| that does-the-right-thing for the architecture.
I found it easier to split visitOsrEntry. Though I understand the concern.
Btw isn't reserveStack already the arch-specific function you want to add? So I added the logic over there. That way reserveStack will now be fixed for all calls to it. (Since quick inspection shows that we use reserveStack in other places that might be vulnerable and hard to diagnose).
> Lastly, it's concerning that we're adding a mandatory |jump| to all argcheck
> codepaths. Why is it not OK to have the arg-check logic appear before the
> prologue logic, as it was before?
The old code did something suboptimal:
> entryWithArgCheck:
> ; generateArgCheck:
> ; reserveStack (1)
> ; do arg check
> ; freeStack (3)
> entryWithoutArgCheck:
> ; generatePrologue
> ; reserveStack (2)
> ; ...
So (1) only did the 1kb at a time allocation. So meaning entryWithArgCheck do (1) and (3) for no purpose. Now we also need the 1kb at a time allocation for (2).
> entryWithArgCheck:
> ; generatePrologue
> ; reserveStack
> ; do arg check
> jump to start
> entryWithoutArgCheck:
> ; generatePrologue
> ; reserveStack
> start:
As a result we only have to reserveStack once for every possible entry. We don't need to freeStack anymore ...
So I think it is better to have a jump here, instead of reservingStack twice and doing a freeStack.
[Attachment #8520017](/attachment.cgi?id=8520017&action=edit "Patch") -
Attachment is obsolete: true
[Attachment #8521423](/attachment.cgi?id=8521423&action=edit "Patch") -
Flags: review?(kvijayan)

|  | [Kannan Vijayan [:djvj]](/user_profile?user_id=436087) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1092947#c20)• 10 years ago |
|  | |

Comment on [attachment 8521423](/attachment.cgi?id=8521423 "Patch") [[details]](/attachment.cgi?id=8521423&action=edit "Patch") [[diff]](/attachment.cgi?id=8521423&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092947&attachment=8521423)
Patch
Review of [attachment 8521423](/attachment.cgi?id=8521423 "Patch") [[details]](/attachment.cgi?id=8521423&action=edit "Patch") [[diff]](/attachment.cgi?id=8521423&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092947&attachment=8521423):
-----------------------------------------------------------------
Ah, I didn't notice the removal of the freeStack call. My bad. I thought there was a way to have the argCheck logic be a strict prologue, and have a zero-overhead entry for both cases.
Looks good.
[Attachment #8521423](/attachment.cgi?id=8521423&action=edit "Patch") -
Flags: review?(kvijayan) → review+

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1092947#c21)• 10 years ago |
|  | |

Comment on [attachment 8521423](/attachment.cgi?id=8521423 "Patch") [[details]](/attachment.cgi?id=8521423&action=edit "Patch") [[diff]](/attachment.cgi?id=8521423&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092947&attachment=8521423)
Patch
[Security approval request comment]
How easily could an exploit be constructed based on the patch?
Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?
There is a comment present which get's moved that might shed some light on this issue. Though this flaw only makes it possible to crash the browser if constructed correctly. It doesn't enable exploiting the browser.
Which older supported branches are affected by this flaw?
FF18+
If not all supported branches, which bug introduced the flaw?
Do you have backports for the affected branches? If not, how different, hard to create, and risky will they be?
Fairly easy to backport. Patches should be very similar.
How likely is this patch to cause regressions; how much testing does it need?
Maybe some perf regressions, but should be unmeasurable. Should be safe to land and have low backout probability.
[Attachment #8521423](/attachment.cgi?id=8521423&action=edit "Patch") -
Flags: sec-approval?

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1092947#c22)• 10 years ago |
|  | |

Comment on [attachment 8521423](/attachment.cgi?id=8521423 "Patch") [[details]](/attachment.cgi?id=8521423&action=edit "Patch") [[diff]](/attachment.cgi?id=8521423&action=diff "Patch") [[review]](/page.cgi?id=splinter.html&ignore=&bug=1092947&attachment=8521423)
Patch
As a sec-moderate, this doesn't need sec-approval (we only need it for high and critical rated issues). If you want to backport this to Aurora or Beta, we probably will want some justification on why this needs to be. Otherwise, go ahead and check it in and it can "ride the trains."
[Attachment #8521423](/attachment.cgi?id=8521423&action=edit "Patch") -
Flags: sec-approval?

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1092947#c23)• 10 years ago |
|  | |

<https://hg.mozilla.org/integration/mozilla-inbound/rev/d94b6a6469b4>

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1092947#c24)• 10 years ago |
|  | |

Backed out for jsreftest crashes on linux64.
<https://hg.mozilla.org/integration/mozilla-inbound/rev/b5fdc0c44b6c>
<https://treeherder.mozilla.org/logviewer.html#?job_id=3919596&repo=mozilla-inbound>

|  | [Hannes Verschore [:h4writer]](/user_profile?user_id=196399)  Assignee |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1092947#c25)• 10 years ago |
|  | |

Very stupid bug, sorry. I could reproduce and fix it locally. Since everything else in the push was green, this should be green now.
<https://hg.mozilla.org/integration/mozilla-inbound/rev/8cf79ca692cc>
NI myself to try to create a testcase out of this. This should be better covered than with 1 test, which only tests one part of the functionality of big stacks.Flags: needinfo?(hv1989)

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1092947#c26)• 10 years ago |
|  | |

Backed out in <https://hg.mozilla.org/integration/mozilla-inbound/rev/0edc83d3670f> under suspicion of breaking windows jittest failures:
<https://treeherder.mozilla.org/ui/logviewer.html#?job_id=3973107&repo=mozilla-inbound>

|  | [Wes Kocher (:KWierso) (Not reading bugmail; email directly if needed)](/user_profile?user_id=308534) |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1092947#c27)• 10 years ago |
|  | |

So, the jit failures popped up on another repo, and they went away just as quickly everywhere.
I relanded this patch in <https://hg.mozilla.org/integration/mozilla-inbound/rev/465b7f68072b>
Sorry for the churn in here.

|  | [Carsten Book [:Tomcat]](/user_profile?user_id=277293) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1092947#c28)• 10 years ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/465b7f68072b>Status: NEW → RESOLVEDClosed: 10 years ago
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → mozilla36

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092947#a3102457_1689)• 10 years ago |

Group: javascript-core-security

|  | [Kamil Jozwiak [:kjozwiak]](/user_profile?user_id=455785) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1092947#c29)• 10 years ago |
|  | |

Reproduced the original crash using m-c changeset 0b81c10a9074 with --ion-eager --no-threads --ion-regalloc=backtracking and the following configuration:
- MAKE=mozmake AR=ar sh ../configure --disable-debug --enable-optimize --enable-nspr-build --enable-more-deterministic --enable-gczeal --enable-debug-symbols --disable-tests
Once reproduced, I used m-c changeset cef590a6f946 and couldn't reproduce the original issue anymore. Ran the poc from [comment #0](/show_bug.cgi?id=1092947#c0 "RESOLVED FIXED - Crash [@ EnterIon] or [@ js::jit::IonCannon]") 10 different times without the original crash occurring.
[status-firefox36](/buglist.cgi?f1=cf_status_firefox36&o1=isnotempty):
[fixed](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=fixed) → [verified](/buglist.cgi?f1=cf_status_firefox36&o1=equals&v1=verified)

|  | [Benjamin Kerensa [:bkerensa]](/user_profile?user_id=294742) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092947#a3629269_294742)• 10 years ago |

[status-firefox-esr31](/buglist.cgi?f1=cf_status_firefox_esr31&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr31&o1=equals&v1=wontfix)

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1092947#c30)• 10 years ago |
|  | |

If this is low-risk please nominate for beta uplift approval before Mon Dec 29th otherwise we'll have to wait to ship this with FF36.

|  | [Lukas Blakk [:lsblakk] use ?needinfo](/user_profile?user_id=272375) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092947#a5487738_272375)• 10 years ago |

[status-firefox34](/buglist.cgi?f1=cf_status_firefox34&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox34&o1=equals&v1=wontfix)
[status-firefox35](/buglist.cgi?f1=cf_status_firefox35&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox35&o1=equals&v1=wontfix)

|  | [Al Billings [:abillings - ex-MoCo]](/user_profile?user_id=280903) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092947#a9219295_280903)• 10 years ago |

Whiteboard: [adv-main36+]

|  | [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092947#a13525633_132034)• 10 years ago |

Flags: needinfo?(hv1989)

|  | [BMO Automation](/user_profile?user_id=546015) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092947#a26174826_546015)• 9 years ago |

Group: core-security → core-security-release

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1092947#a50079351_1689)• 9 years ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1092947&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Gary Kwong [:gkw] [:nth10sd] (NOT official MoCo now)](/user_profile?user_id=132034)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review



=== Content from lists.opensuse.org_a3ad3214_20250124_141109.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/M5KXUY7OQOYRBDOUBTG4WRJ34LWUD3NS/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/M5KXUY7OQOYRBDOUBTG4WRJ34LWUD3NS/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/M5KXUY7OQOYRBDOUBTG4WRJ34LWUD3NS/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/M5KXUY7OQOYRBDOUBTG4WRJ34LWUD3NS/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/M5KXUY7OQOYRBDOUBTG4WRJ34LWUD3NS/#M5KXUY7OQOYRBDOUBTG4WRJ34LWUD3NS)

# [security-announce] SUSE-SU-2015:0447-1: important: Security update for Mozilla Firefox

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

7 Mar
2015

7 Mar
'15

00:05

SUSE Security Update: Security update for Mozilla Firefox
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: SUSE-SU-2015:0447-1
Rating: important
References: #917597
Cross-References: CVE-2015-0822 CVE-2015-0827 CVE-2015-0831
CVE-2015-0836
Affected Products:
SUSE Linux Enterprise Server 11 SP2 LTSS
SUSE Linux Enterprise Server 11 SP1 LTSS
SUSE Linux Enterprise Server 10 SP4 LTSS
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes four vulnerabilities is now available.
It includes one version update.
Description:
MozillaFirefox has been updated to version 31.5.0 ESR to fix five security
issues.
These security issues have been fixed:
\* CVE-2015-0836: Multiple unspecified vulnerabilities in the browser
engine in Mozilla Firefox before 31.5 allowed remote attackers to
cause a denial of service (memory corruption and application crash)
or possibly execute arbitrary code via unknown vectors (bnc#917597).
\* CVE-2015-0827: Heap-based buffer overflow in the
mozilla::gfx::CopyRect function in Mozilla Firefox before 31.5
allowed remote attackers to obtain sensitive information from
uninitialized process memory via a malformed SVG graphic
(bnc#917597).
\* CVE-2015-0835: Multiple unspecified vulnerabilities in the browser
engine in Mozilla Firefox before 36.0 allowed remote attackers to
cause a denial of service (memory corruption and application crash)
or possibly execute arbitrary code via unknown vectors (bnc#917597).
\* CVE-2015-0831: Use-after-free vulnerability in the
mozilla::dom::IndexedDB::IDBObjectStore::CreateIndex function in
Mozilla Firefox before 31.5 allowed remote attackers to execute
arbitrary code or cause a denial of service (heap memory corruption)
via crafted content that is improperly handled during IndexedDB
index creation (bnc#917597).
\* CVE-2015-0822: The Form Autocompletion feature in Mozilla Firefox
before 31.5 allowed remote attackers to read arbitrary files via
crafted JavaScript code (bnc#917597).
Security Issues:
\* CVE-2015-0822
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0822>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0822%3E)
\* CVE-2015-0827
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0827>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0827%3E)
\* CVE-2015-0831
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0831>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0831%3E)
\* CVE-2015-0836
<[http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0836>](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0836%3E)
Patch Instructions:
To install this SUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- SUSE Linux Enterprise Server 11 SP2 LTSS:
zypper in -t patch slessp2-MozillaFirefox=10377
- SUSE Linux Enterprise Server 11 SP1 LTSS:
zypper in -t patch slessp1-MozillaFirefox=10368
To bring your system up-to-date, use "zypper patch".
Package List:
- SUSE Linux Enterprise Server 11 SP2 LTSS (i586 s390x x86\_64) [New Version: 31.5.0esr]:
MozillaFirefox-31.5.0esr-0.4.2.1
MozillaFirefox-translations-31.5.0esr-0.4.2.1
- SUSE Linux Enterprise Server 11 SP1 LTSS (i586 s390x x86\_64) [New Version: 31.5.0esr]:
MozillaFirefox-31.5.0esr-0.4.2.1
MozillaFirefox-translations-31.5.0esr-0.4.2.1
- SUSE Linux Enterprise Server 10 SP4 LTSS (i586 s390x):
MozillaFirefox-31.5.0esr-0.5.1
MozillaFirefox-translations-31.5.0esr-0.5.1
References:
<http://support.novell.com/security/cve/CVE-2015-0822.html>
<http://support.novell.com/security/cve/CVE-2015-0827.html>
<http://support.novell.com/security/cve/CVE-2015-0831.html>
<http://support.novell.com/security/cve/CVE-2015-0836.html>
<https://bugzilla.suse.com/917597>
[http://download.suse.com/patch/finder/?keywords=05f52c1e0f407db47eeda7f443c7...](http://download.suse.com/patch/finder/?keywords=05f52c1e0f407db47eeda7f443c74a59)
[http://download.suse.com/patch/finder/?keywords=620f31f396ab13eab1f112060f47...](http://download.suse.com/patch/finder/?keywords=620f31f396ab13eab1f112060f474aba)
[http://download.suse.com/patch/finder/?keywords=a337580683ba9ef729d391b0364a...](http://download.suse.com/patch/finder/?keywords=a337580683ba9ef729d391b0364a996a)
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/M5KXUY7OQOYRBDOUBTG4WRJ34LWUD3NS/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/M5KXUY7OQOYRBDOUBTG4WRJ34LWUD3NS/#M5KXUY7OQOYRBDOUBTG4WRJ34LWUD3NS)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.



=== Content from www.mozilla.org_3f3ac9b8_20250124_141110.html ===


## Help us improve your Mozilla experience

In addition to Cookies necessary for this site to function, we’d like your permission to set some additional Cookies to better understand your browsing needs and improve your experience. Rest assured — we value your privacy.

Accept All Additional Cookies

Reject All Additional Cookies

[Cookie settings](/en-US/privacy/websites/cookie-settings/)

Menu
[![Mozilla](https://www.mozilla.org/media/img/logos/m24/lockup-black.f2ddba3f0724.svg)](/en-US/)

* [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
  Firefox browsers](/en-US/firefox/)
  Close Firefox browsers menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Desktop](/en-US/firefox/new/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for iOS](/en-US/firefox/browsers/mobile/ios/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/logo.eb1324e44442.svg)
    ## Firefox for Android](/en-US/firefox/browsers/mobile/android/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/browser/focus/logo.aac3e33175cb.svg)
    ## Firefox Focus](/en-US/firefox/browsers/mobile/focus/)
  + [## Firefox blog](https://blog.mozilla.org/firefox/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=firefox)
* [Products](/en-US/products/)
  Close Products menu
  + [![](https://www.mozilla.org/media/protocol/img/logos/mozilla/vpn/logo.c648f487bfb8.svg)
    ## Mozilla VPN](/en-US/products/vpn/)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/monitor/logo.d97e5516f9e6.svg)
    ## Mozilla Monitor](https://monitor.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/firefox/relay/logo-white.d42a8b52e44c.svg)
    ## Firefox Relay](https://relay.firefox.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/protocol/img/logos/pocket/logo.17446bc33a5d.svg)
    ## Pocket](https://getpocket.com/firefox_learnmore/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/nav/icons/icon-mdn-plus.f54475f980ab.svg)
    ## MDN Plus](https://developer.mozilla.org/plus?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/fakespot/logo-blue.3973b8fe9631.svg)
    ## Fakespot](https://fakespot.com/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=products)
  + [![](https://www.mozilla.org/media/img/logos/thunderbird/logo-thunderbird.121e9c0fed45.svg)
    ## Thunderbird](https://www.thunderbird.net/)

  [All products](/en-US/products/)
* [About us](/en-US/about/)
  Close About us menu

  Our Mission

  + [## About Mozilla](/en-US/about/)
  + [## The Mozilla Manifesto](/en-US/about/manifesto/)
  + [## Get Involved](/en-US/contribute/)
  + [## Innovation Projects](https://future.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Blog](https://blog.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)

  Our Work

  + [## Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla.ai](https://www.mozilla.ai/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Ventures](https://mozilla.vc/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=nav&utm_content=about-us)
  + [## Mozilla Advertising](/en-US/advertising/)

## Menu

* Mozilla Security

## [Mozilla Security](/en-US/security/)

* [Advisories](/en-US/security/advisories/)
* [Known Vulnerabilities](/en-US/security/known-vulnerabilities/)
* [Mozilla Security Blog](https://blog.mozilla.com/security/)
* [Security Bug Bounty](/en-US/security/bug-bounty/)
* [Third-party Injection Policy](/en-US/security/third-party-software-injection/)

## [Client Bug Bounty](/en-US/security/client-bug-bounty/)

* [Frequently Asked Questions](/en-US/security/bug-bounty/faq/)
* [Hall of Fame](/en-US/security/bug-bounty/hall-of-fame/)

## [Web Bug Bounty](/en-US/security/web-bug-bounty/)

* [Eligible Websites](/en-US/security/bug-bounty/web-eligible-sites/)
* [Frequently Asked Questions](/en-US/security/bug-bounty/faq-webapp/)
* [Hall of Fame](/en-US/security/bug-bounty/web-hall-of-fame/)

# Mozilla Foundation Security Advisory 2015-11

## Miscellaneous memory safety hazards (rv:36.0 / rv:31.5)

Announced
February 24, 2015
Reporter
Mozilla Developers and Community Members
Impact
Critical
Products
Firefox, Firefox ESR, Firefox OS, SeaMonkey, Thunderbird
Fixed in

* Firefox 36
* Firefox ESR 31.5
* Firefox OS 2.2
* SeaMonkey 2.33
* Thunderbird 31.5

### Description

Mozilla developers and community identified and fixed several memory safety
bugs in the browser engine used in Firefox and other Mozilla-based products.
Some of these bugs showed evidence of memory corruption under certain
circumstances, and we presume that with enough effort at least some of these
could be exploited to run arbitrary code.

In general these flaws cannot be exploited through email in the
Thunderbird product because scripting is disabled, but are potentially a risk in
browser or browser-like contexts.

### References

Carsten Book, Christoph Diehl, Gary Kwong, Jan de Mooij, Liz Henry, Byron
Campen, Tom Schuster, and Ryan VanderMeulen reported memory safety problems and
crashes that affect Firefox ESR 31.4 and Firefox 35.

* [Memory safety bugs fixed in Firefox ESR 31.5 and Firefox 36.](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1107009,1117406,1096138,1119579,1128196,1115776,1123882,1111243,1111248,1124018) ([CVE-2015-0836](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0836))

Christian Holler, Gary Kwong, Jesse Ruderman, Byron Campen, Randell Jesup,
Robin Whittleton, Jon Coppeard, and Nikhil Marathe reported memory safety
problems and crashes that affect Firefox 35.

* [Memory safety bugs fixed in Firefox 36.](https://bugzilla.mozilla.org/buglist.cgi?bug_id=1114569,1118894,1092947,1114058,1072760,1122387,1119019,1125734,1127246,1127206) ([CVE-2015-0835](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2015-0835))

## Company

* [Leadership](/about/leadership/)
* [Press Center](https://blog.mozilla.org/category/mozilla/news/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=company)
* [Careers](/en-US/careers/)
* [Contact](/en-US/contact/)

## Support

* [Product Help](https://support.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [File a Bug](https://bugzilla.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)
* [Localize Mozilla](https://pontoon.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=support)

## Resources

* [Advertise with Mozilla](/en-US/advertising/)
* [Firefox Release Notes](/firefox/134.0.2/releasenotes/)

## Developers

* [Developer Edition](/en-US/firefox/developer/)
* [Enterprise](/en-US/firefox/enterprise/)
* [Tools](https://firefox-source-docs.mozilla.org/devtools-user/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer&utm_content=developers)
* [MDN](https://developer.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer)

## Follow @Mozilla

* [X (formerly Twitter) (@mozilla)](https://twitter.com/mozilla)
* [Instagram (@mozilla)](https://www.instagram.com/mozilla/)
* [LinkedIn (@mozilla)](https://www.linkedin.com/company/mozilla-corporation/)
* [TikTok (@mozilla)](https://www.tiktok.com/%40mozilla)
* [Spotify (@mozilla)](https://open.spotify.com/show/0vT7LJMeVDxyQ2ZamHKu08?si=_uDRD6bRR_6M5YZyISGXgA)

## Follow @Firefox

* [X (formerly Twitter) (@firefox)](https://twitter.com/firefox)
* [Instagram (@firefox)](https://www.instagram.com/firefox/)
* [YouTube (@firefoxchannel)](https://www.youtube.com/user/firefoxchannel)
* [TikTok (@firefox)](https://www.tiktok.com/%40firefox)

[Donate](https://foundation.mozilla.org/?form=moco-donate-footer)

Visit [Mozilla Corporation’s](/en-US/) not-for-profit parent, the [Mozilla Foundation](https://foundation.mozilla.org/?utm_source=www.mozilla.org&utm_medium=referral&utm_campaign=footer).

Portions of this content are ©1998–2025 by individual mozilla.org contributors. Content available under a [Creative Commons license](/en-US/foundation/licensing/website-content/).

* [Website Privacy Notice](/en-US/privacy/websites/)
* [Cookies](/en-US/privacy/websites/cookie-settings/)
* [Legal](/en-US/about/legal/)
* [Community Participation Guidelines](/en-US/about/governance/policies/participation/)
* [About this site](/en-US/about/this-site/)

![](https://www.mozilla.org/media/img/logos/m24/wordmark-white.2d673bb5b33a.svg)



=== Content from www.oracle.com_1aa3bc48_20250124_141111.html ===


* [Skip to content](#maincontent)
* [Accessibility Policy](https://www.oracle.com/corporate/accessibility/)

Products
Industries
Resources
Customers
Partners
Developers
Company

Close Search

Search Oracle.com

* QUICK LINKS
* [Oracle Cloud Infrastructure](/cloud/)
* [Oracle Fusion Cloud Applications](/applications/)
* [Oracle Database](/database/technologies/)
* [Download Java](/java/technologies/downloads/)
* [Careers at Oracle](/careers/)

Search

[Country
![]()](/countries-list.html#countries)

View Accounts

Back
Cloud Account
[Sign in to Cloud](/cloud/sign-in.html)
[Sign Up for Free Cloud Tier](/cloud/free/)

Oracle Account

* [Sign-In](https://www.oracle.com/webapps/redirect/signon?nexturl=)
* [Create an Account](https://profile.oracle.com/myprofile/account/create-account.jspx)

* [Help](/corporate/contact/help.html)
* Sign Out

[Contact Sales](/corporate/contact/ "Contact Sales")

[Menu

Menu](/global-menu-v2/)

* [Security Alerts](/security-alerts/)

# Oracle Solaris Third Party Bulletin - April 2016

## Oracle Solaris Third Party Bulletin - April 2016

### Description

The Oracle Solaris Third Party Bulletin announces patches for one or more security vulnerabilities fixed in third party software that is included in Oracle Solaris distributions. Starting January 20, 2015, Third Party Bulletins are released on the same day when Oracle Critical Patch Updates are released. These bulletins will also be updated on the Tuesday closest to the 17th of the following two months after their release (i.e. the two months between the normal quarterly Critical Patch Update publication dates). In addition, Third Party Bulletins may also be updated for vulnerability fixes deemed too critical to wait for the next monthly update.

**Due to the threat posed by a successful attack, Oracle strongly recommends that customers apply Third Party Bulletin fixes as soon as possible.**

### Patch Availability

Please see My Oracle Support Note [1448883.1](https://support.oracle.com/epmos/faces/DocumentDisplay?_afrLoop=98356520554156&id=1448883.1)

### Third Party Bulletin Schedule

Third Party Bulletins are released on the Tuesday closest to the 17th day of January, April, July and October. The next four dates are:

* 19 July 2016
* 18 October 2016
* 17 January 2017
* 18 April 2017

### References

* Oracle Critical Patch Updates and Security Alerts main page  [ [Oracle Technology Network](/security-alerts/) ]
* Oracle Critical Patch Updates and Security Alerts - Frequently Asked Questions [ [CPU FAQ](/security-alerts/cpufaq.html) ]
* Risk Matrix definitions   [ [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html) ]
* Use of Common Vulnerability Scoring System (CVSS) by Oracle   [ [Oracle CVSS Scoring](/security-alerts/cvssscoringsystem.html) ]

### Modification History

| 2017-October-16 | Rev 8. Added 11.3 as Supported Versions Affected for CVE-2016-2108 |
| --- | --- |
| 2016-September-21 | Rev 7. Added new CVEs fixed via Firefox upgrade |
| 2016-July-08 | Rev 6. Added NTP CVEs |
| 2016-June-27 | Rev 5. Added OpenSSL CVE-2016-2177, CVE-2016-2178 |
| 2016-June-20 | Rev 4. Added all CVEs fixed in Solaris 11.3 SRU9.4 |
| 2016-June-10 | Rev 3. Added OpenSSL CVEs |
| 2016-May-31 | Rev 2. Added all CVEs fixed in Solaris 11.3 SRU8.7 |
| 2016-April-19 | Rev 1. Initial Release |

### Oracle Solaris Executive Summary

This Third Party Bulletin contains 53 new security fixes for the Oracle Solaris.  41 of these vulnerabilities may be remotely exploitable without authentication, i.e., may be exploited over a network without the need for a username and password.

### Oracle Solaris Risk Matrix

#### Revision 7: Published on 2016-09-21

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2014-1545 | Solaris | Multiple | Firefox | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3 | See Note 13 |

#### Revision 6: Published on 2016-07-08

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-1548 | Solaris | NTP | NTP | Yes | 6.4 | Network | Low | None | None | Partial | Partial | 11.3, 10 | See Note 11 |
| CVE-2016-4957 | Solaris | NTP | NTP | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4956 | Solaris | NTP | NTP | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4953 | Solaris | NTP | NTP | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4954 | Solaris | NTP | NTP | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-4955 | Solaris | NTP | NTP | Yes | 2.6 | Network | High | None | None | None | Partial | 11.3, 10 |  |

#### Revision 5: Published on 2016-06-27

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-2177 | Solaris | SSL/TLS | OpenSSL | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.3, 10 |  |
| CVE-2016-2178 | Solaris | SSL/TLS | OpenSSL | No | 2.1 | Local | Low | None | Partial | None | None | 11.3, 10 |  |

#### Revision 4: Published on 2016-06-20

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2015-2806 | Solaris | Multiple | GNU Libtasn1 | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3 |  |
| CVE-2014-9679 | Solaris | Multiple | Common Unix Printing System (CUPS) | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-8786 | Solaris | Multiple | RabbitMQ | No | 6.8 | Network | Low | Single | None | None | Complete | 11.3 |  |
| CVE-2015-7546 | Solaris | Multiple | OpenStack Identity (Keystone) | No | 6.0 | Network | Medium | Single | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-5295 | Solaris | Multiple | OpenStack Orchestration API (Heat) | No | 5.5 | Network | Low | Single | Partial | None | Partial | 11.3 |  |
| CVE-2016-3115 | Solaris | SSH | OpenSSH | No | 5.5 | Network | Low | Single | Partial | Partial | None | 11.3 |  |
| CVE-2015-5223 | Solaris | Multiple | OpenStack Object Storage (Swift) | Yes | 5.0 | Network | Low | None | Partial | None | None | 11.3 |  |
| CVE-2016-0738 | Solaris | Multiple | OpenStack Object Storage (Swift) | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3 | See Note 8 |
| CVE-2015-8853 | Solaris | Multiple | Perl | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3 |  |
| CVE-2015-8665 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 |  |
| CVE-2015-8683 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 |  |
| CVE-2015-8781 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 | See Note 9 |
| CVE-2015-1547 | Solaris | Multiple | LibTIFF | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3, 10 | See Note 10 |
| CVE-2016-2512 | Solaris | Multiple | Django Python web framework | Yes | 4.3 | Network | Medium | None | None | Partial | None | 11.3 |  |
| CVE-2016-4085 | Solaris | Multiple | Wireshark | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 | See Note 12 |
| CVE-2016-2513 | Solaris | Multiple | Django Python web framework | Yes | 2.6 | Network | High | None | Partial | None | None | 11.3 |  |

#### Revision 3: Published on 2016-06-10

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-2108 | Solaris | SSL/TLS | OpenSSL | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3, 10 |  |
| CVE-2016-2109 | Solaris | SSL/TLS | OpenSSL | Yes | 7.8 | Network | Low | None | None | None | Complete | 11.3, 10 |  |
| CVE-2016-2176 | Solaris | SSL/TLS | OpenSSL | Yes | 6.4 | Network | Low | None | Partial | None | Partial | 11.3, 10 |  |
| CVE-2016-2105 | Solaris | SSL/TLS | OpenSSL | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-2106 | Solaris | SSL/TLS | OpenSSL | Yes | 5.0 | Network | Low | None | None | None | Partial | 11.3, 10 |  |
| CVE-2016-2107 | Solaris | SSL/TLS | OpenSSL | Yes | 2.6 | Network | High | None | Partial | None | None | 11.3, 10 | See Note 7 |

#### Revision 2: Published on 2016-05-31

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-2315 | Solaris | Multiple | Git | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3 | See Note 5 |
| CVE-2016-2342 | Solaris | Multiple | Quagga | Yes | 7.6 | Network | High | None | Complete | Complete | Complete | 11.3 |  |
| CVE-2015-7545 | Solaris | Multiple | Git | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-2695 | Solaris | Kerberos | Kerberos | Yes | 7.1 | Network | Medium | None | None | None | Complete | 11.3 |  |
| CVE-2015-2697 | Solaris | Kerberos | Kerberos | No | 6.8 | Network | Low | Single | None | None | Complete | 11.3 |  |
| CVE-2016-3068 | Solaris | Multiple | Mercurial source code management | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3 | See Note 4 |
| CVE-2016-3115 | Solaris | SSH | SSH | No | 5.5 | Network | Low | Single | Partial | Partial | None | 11.3, 10 |  |
| CVE-2014-3566 | Solaris | SSL | Evolution | Yes | 5.0 | Network | Low | None | Partial | None | None | 11.3 |  |
| CVE-2015-7551 | Solaris | None | Ruby | No | 4.6 | Local | Low | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2015-8629 | Solaris | Kerberos | Kerberos | No | 2.1 | Network | High | Single | Partial | None | None | 11.3, 10 |  |

#### Revision 1: Published on 2016-04-19

| CVE# | Component | Protocol | Third Party ­component | Remote Exploit without Auth.? | CVSS VERSION 2.0 RISK (see [Risk Matrix Definitions](/security-alerts/advisorymatrixglossary.html)) | | | | | | | Supported Versions Affected | Notes |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Base Score | Access Vector | Access Complexity | Authen­tication | Confid­entiality | Inte­grity | Avail­ability |
| CVE-2016-0705 | Solaris | SSL/TLS | OpenSSL | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 11.3, 10 |  |
| CVE-2016-0799 | Solaris | SSL/TLS | WanBoot | Yes | 10.0 | Network | Low | None | Complete | Complete | Complete | 10 | See Note 1 |
| CVE-2016-0798 | Solaris | SSL/TLS | OpenSSL | Yes | 7.8 | Network | Low | None | None | None | Complete | 11.3, 10 |  |
| CVE-2015-3415 | Solaris | Multiple | SQLite3 | Yes | 7.5 | Network | Low | None | Partial | Partial | Partial | 11.3, 10 | See Note 3 |
| CVE-2015-5602 | Solaris | None | Sudo | No | 7.2 | Local | Low | None | Complete | Complete | Complete | 11.3, 10 |  |
| CVE-2015-4752 | Solaris | None | MySQL | No | 7.2 | Local | Low | None | Complete | Complete | Complete | 11.3 | See Note 2 |
| CVE-2016-2523 | Solaris | Multiple | Wireshark | Yes | 7.1 | Network | Medium | None | None | None | Complete | 11.3 |  |
| CVE-2016-1283 | Solaris | Multiple | PCRE | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3 |  |
| CVE-2014-9766 | Solaris | Multiple | X.Org | Yes | 6.8 | Network | Medium | None | Partial | Partial | Partial | 11.3, 10 |  |
| CVE-2015-3885 | Solaris | Multiple | Dcraw | Yes | 4.3 | Network | Medium | None | None | None | Partial | 11.3 |  |
| CVE-2007-6720 | Solaris | Multiple | Libmikmod | Yes | 2.6 | Network | High | None | None | None | Partial | 11.3 |  |
| CVE-2016-0702 | Solaris | None | OpenSSL | No | 1.9 | Local | Medium | None | Partial | None | None | 11.3, 10 | See Note 6 |

#### Notes:

1. This fix also addresses CVE-2016-0703 CVE-2016-0704 CVE-2016-0797 CVE-2016-0800.
2. This fix also addresses CVE-2014-6464 CVE-2014-6469 CVE-2014-6491 CVE-2014-6494 CVE-2014-6500 CVE-2014-6507 CVE-2014-6555 CVE-2014-6559 CVE-2014-6568 CVE-2015-0374 CVE-2015-0382 CVE-2015-0411 CVE-2015-0432 CVE-2015-0433 CVE-2015-0499 CVE-2015-0505 CVE-2015-2568 CVE-2015-2571 CVE-2015-2573 CVE-2015-2582 CVE-2015-2620 CVE-2015-2643 CVE-2015-2648 CVE-2015-4737 CVE-2015-4792 CVE-2015-4802 CVE-2015-4807 CVE-2015-4815 CVE-2015-4816 CVE-2015-4819 CVE-2015-4826 CVE-2015-4830 CVE-2015-4836 CVE-2015-4858 CVE-2015-4861 CVE-2015-4864 CVE-2015-4870 CVE-2015-4879 CVE-2015-4913 CVE-2015-7744 CVE-2016-0505 CVE-2016-0546 CVE-2016-0596 CVE-2016-0597 CVE-2016-0598 CVE-2016-0600 CVE-2016-0606 CVE-2016-0608 CVE-2016-0609 CVE-2016-0616.
3. This fix also addresses CVE-2015-3414 CVE-2015-3416.
4. This fix also addresses CVE-2016-3069 CVE-2016-3630.
5. This fix also addresses CVE-2016-2324.
6. This fix also addresses CVE-2016-0702 CVE-2016-0797 CVE-2016-0799.
7. This fix also addresses CVE-2016-2106 CVE-2016-2107 CVE-2016-2108 CVE-2016-2109 CVE-2016-2176.
8. This fix also addresses CVE-2016-0737.
9. This fix also addresses CVE-2015-8782 CVE-2015-8783.
10. This fix also addresses CVE-2015-8784.
11. This fix also addresses CVE-2016-1551 CVE-2016-1549 CVE-2016-2516 CVE-2016-2517 CVE-2016-2518 CVE-2016-2519 CVE-2016-1547 CVE-2015-7704 CVE-2015-8138 CVE-2016-1550.
12. This fix also addresses CVE-2016-4085.
13. This fix also addresses CVE-2013-5609 CVE-2013-5610 CVE-2013-5611 CVE-2013-5612 CVE-2013-5613 CVE-2013-5614 CVE-2013-5615 CVE-2013-5616 CVE-2013-5618 CVE-2013-5619 CVE-2013-6629 CVE-2013-6630 CVE-2013-6671 CVE-2013-6672 CVE-2013-6673 CVE-2014-1477 CVE-2014-1478 CVE-2014-1479 CVE-2014-1480 CVE-2014-1481 CVE-2014-1482 CVE-2014-1483 CVE-2014-1484 CVE-2014-1485 CVE-2014-1486 CVE-2014-1487 CVE-2014-1488 CVE-2014-1489 CVE-2014-1493 CVE-2014-1494 CVE-2014-1496 CVE-2014-1497 CVE-2014-1498 CVE-2014-1499 CVE-2014-1500 CVE-2014-1501 CVE-2014-1502 CVE-2014-1504 CVE-2014-1505 CVE-2014-1506 CVE-2014-1507 CVE-2014-1508 CVE-2014-1509 CVE-2014-1510 CVE-2014-1511 CVE-2014-1512 CVE-2014-1513 CVE-2014-1514 CVE-2014-1518 CVE-2014-1519 CVE-2014-1520 CVE-2014-1522 CVE-2014-1523 CVE-2014-1524 CVE-2014-1525 CVE-2014-1526 CVE-2014-1527 CVE-2014-1528 CVE-2014-1529 CVE-2014-1530 CVE-2014-1531 CVE-2014-1532 CVE-2014-1533 CVE-2014-1534 CVE-2014-1536 CVE-2014-1537 CVE-2014-1538 CVE-2014-1539 CVE-2014-1540 CVE-2014-1541 CVE-2014-1542 CVE-2014-1543 CVE-2014-1544 CVE-2014-1547 CVE-2014-1548 CVE-2014-1549 CVE-2014-1550 CVE-2014-1551 CVE-2014-1552 CVE-2014-1553 CVE-2014-1554 CVE-2014-1555 CVE-2014-1556 CVE-2014-1557 CVE-2014-1559 CVE-2014-1561 CVE-2014-1562 CVE-2014-1563 CVE-2014-1564 CVE-2014-1565 CVE-2014-1566 CVE-2014-1567 CVE-2014-1568 CVE-2014-1569 CVE-2014-1575 CVE-2014-1580 CVE-2014-1582 CVE-2014-1584 CVE-2014-1588 CVE-2014-1589 CVE-2014-1591 CVE-2014-1595 CVE-2014-2018 CVE-2014-8631 CVE-2014-8632 CVE-2014-8635 CVE-2014-8636 CVE-2014-8637 CVE-2014-8640 CVE-2014-8642 CVE-2014-8643 CVE-2015-0797 CVE-2015-0798 CVE-2015-0799 CVE-2015-0800 CVE-2015-0802 CVE-2015-0803 CVE-2015-0804 CVE-2015-0805 CVE-2015-0806 CVE-2015-0808 CVE-2015-0810 CVE-2015-0811 CVE-2015-0812 CVE-2015-0814 CVE-2015-0819 CVE-2015-0820 CVE-2015-0821 CVE-2015-0823 CVE-2015-0824 CVE-2015-0825 CVE-2015-0826 CVE-2015-0828 CVE-2015-0829 CVE-2015-0830 CVE-2015-0832 CVE-2015-0833 CVE-2015-0834 CVE-2015-0835 CVE-2015-2706 CVE-2015-2708 CVE-2015-2709 CVE-2015-2710 CVE-2015-2711 CVE-2015-2712 CVE-2015-2713 CVE-2015-2714 CVE-2015-2715 CVE-2015-2716 CVE-2015-2717 CVE-2015-2718 CVE-2015-2720 CVE-2015-2721 CVE-2015-2722 CVE-2015-2724 CVE-2015-2725 CVE-2015-2726 CVE-2015-2727 CVE-2015-2728 CVE-2015-2729 CVE-2015-2730 CVE-2015-2731 CVE-2015-2733 CVE-2015-2734 CVE-2015-2735 CVE-2015-2736 CVE-2015-2737 CVE-2015-2738 CVE-2015-2739 CVE-2015-2740 CVE-2015-2741 CVE-2015-2742 CVE-2015-2743 CVE-2015-4473 CVE-2015-4474 CVE-2015-4475 CVE-2015-4476 CVE-2015-4477 CVE-2015-4478 CVE-2015-4479 CVE-2015-4480 CVE-2015-4481 CVE-2015-4482 CVE-2015-4483 CVE-2015-4484 CVE-2015-4485 CVE-2015-4486 CVE-2015-4487 CVE-2015-4488 CVE-2015-4489 CVE-2015-4490 CVE-2015-4491 CVE-2015-4492 CVE-2015-4493 CVE-2015-4495 CVE-2015-4496 CVE-2015-4497 CVE-2015-4498 CVE-2015-4500 CVE-2015-4501 CVE-2015-4502 CVE-2015-4503 CVE-2015-4504 CVE-2015-4505 CVE-2015-4506 CVE-2015-4507 CVE-2015-4508 CVE-2015-4509 CVE-2015-4510 CVE-2015-4511 CVE-2015-4512 CVE-2015-4513 CVE-2015-4514 CVE-2015-4515 CVE-2015-4516 CVE-2015-4517 CVE-2015-4518 CVE-2015-4519 CVE-2015-4520 CVE-2015-4521 CVE-2015-4522 CVE-2015-7174 CVE-2015-7175 CVE-2015-7176 CVE-2015-7177 CVE-2015-7178 CVE-2015-7179 CVE-2015-7180 CVE-2015-7181 CVE-2015-7182 CVE-2015-7183 CVE-2015-7184 CVE-2015-7185 CVE-2015-7186 CVE-2015-7187 CVE-2015-7188 CVE-2015-7189 CVE-2015-7190 CVE-2015-7191 CVE-2015-7192 CVE-2015-7193 CVE-2015-7194 CVE-2015-7195 CVE-2015-7196 CVE-2015-7197 CVE-2015-7198 CVE-2015-7199 CVE-2015-7200.

Resources for

* [Careers](/careers/)
* [Developers](/developer/)
* [Investors](https://investor.oracle.com/home/default.aspx)
* [Partners](/partner/)
* [Researchers](/research/)
* [Students and Educators](https://academy.oracle.com/en/oa-web-overview.html)

Why Oracle

* [Analyst Reports](/corporate/analyst-reports/)
* [Best cloud-based
  ERP](/erp/what-is-erp/best-erp/)
* [Cloud Economics](/cloud/economics/)
* [Social Impact](/social-impact/)
* [Culture and Inclusion](/careers/diversity-inclusion/)
* [Security Practices](/corporate/security-practices/)

Learn

* [What is cloud
  computing?](/cloud/what-is-cloud-computing/)
* [What is CRM?](/cx/what-is-crm/)
* [What is
  Docker?](/cloud/cloud-native/container-registry/what-is-docker/)
* [What is
  Kubernetes?](/cloud/cloud-native/kubernetes-engine/what-is-kubernetes/)
* [What is
  Python?](/developer/what-is-python-for-developers/)
* [What is SaaS?](/applications/what-is-saas/)

News and Events

* [News](/news/)
* [Oracle CloudWorld](/cloudworld/)
* [Oracle CloudWorld Tour](/cloudworld-tour/)
* [Oracle Health Summit](/health/health-summit/)
* [Oracle Dev Tour](/developer/dev-tour/)
* [Search all events](https://search.oracle.com/events?q=&lang=english)

Contact Us

* US Sales: +1.800.633.0738
* [How can we help?](/corporate/contact/)
* [Subscribe to emails](https://go.oracle.com/subscribe/?l_code=en&src1=OW:O:FO)
* [Integrity Helpline](https://secure.ethicspoint.com/domain/media/en/gui/31053/index.html)
* [Accessibility](/corporate/accessibility/)

---

* [Country/Region](/universal-menu/#u10countrymenu)

* [© 2025 Oracle](/legal/copyright/)
* [Privacy](/legal/privacy/)/[Do Not Sell My
  Info](/legal/privacy/privacy-choices/)
* [Ad
  Choices](/legal/privacy/privacy-policy/#adchoices)
* [Careers](/corporate/careers/)



=== Content from lists.opensuse.org_36cb8299_20250124_141108.html ===


[![openSUSE](https://static.opensuse.org/favicon.svg)
Mailing Lists](/archives/ "openSUSE Mailing Lists")

[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/SDBTOLJRA7KFYU5XRVWP4REQ3XZOS2FG/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/SDBTOLJRA7KFYU5XRVWP4REQ3XZOS2FG/)

[Manage this list](/manage/lists/security-announce.lists.opensuse.org/)
[Sign In](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/SDBTOLJRA7KFYU5XRVWP4REQ3XZOS2FG/)
[Sign Up](/accounts/signup/?next=/archives/list/security-announce%40lists.opensuse.org/message/SDBTOLJRA7KFYU5XRVWP4REQ3XZOS2FG/)

×
#### Keyboard Shortcuts

### Thread View

* `j`: Next unread message
* `k`: Previous unread message
* `j a`: Jump to all threads* `j l`: Jump to MailingList overview

[thread](/archives/list/security-announce%40lists.opensuse.org/thread/SDBTOLJRA7KFYU5XRVWP4REQ3XZOS2FG/#SDBTOLJRA7KFYU5XRVWP4REQ3XZOS2FG)

# [security-announce] openSUSE-SU-2015:0404-1: important: Security update for MozillaFirefox, mozilla-nss

![](https://seccdn.libravatar.org/avatar/099a17325bdf082b643d1a6bbacde279.jpg?s=120&d=mm&r=g)
## [opensuse-security＠opensuse.org](/archives/users/1b72def497ef4503896cd7a5fe9fb8e0/ "See the profile for opensuse-security＠opensuse.org")

1 Mar
2015

1 Mar
'15

10:04

openSUSE Security Update: Security update for MozillaFirefox, mozilla-nss
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
Announcement ID: openSUSE-SU-2015:0404-1
Rating: important
References: #910647 #917597
Cross-References: CVE-2014-1569 CVE-2015-0819 CVE-2015-0820
CVE-2015-0821 CVE-2015-0822 CVE-2015-0823
CVE-2015-0824 CVE-2015-0825 CVE-2015-0826
CVE-2015-0827 CVE-2015-0828 CVE-2015-0829
CVE-2015-0830 CVE-2015-0831 CVE-2015-0832
CVE-2015-0834 CVE-2015-0835 CVE-2015-0836
Affected Products:
openSUSE 13.2
openSUSE 13.1
\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_
An update that fixes 18 vulnerabilities is now available.
Description:
MozillaFirefox, mozilla-nss were updated to fix 18 security issues.
MozillaFirefox was updated to version 36.0. These security issues were
fixed:
- CVE-2015-0835, CVE-2015-0836: Miscellaneous memory safety hazards
- CVE-2015-0832: Appended period to hostnames can bypass HPKP and HSTS
protections
- CVE-2015-0830: Malicious WebGL content crash when writing strings
- CVE-2015-0834: TLS TURN and STUN connections silently fail to simple TCP
connections
- CVE-2015-0831: Use-after-free in IndexedDB
- CVE-2015-0829: Buffer overflow in libstagefright during MP4 video
playback
- CVE-2015-0828: Double-free when using non-default memory allocators with
a zero-length XHR
- CVE-2015-0827: Out-of-bounds read and write while rendering SVG content
- CVE-2015-0826: Buffer overflow during CSS restyling
- CVE-2015-0825: Buffer underflow during MP3 playback
- CVE-2015-0824: Crash using DrawTarget in Cairo graphics library
- CVE-2015-0823: Use-after-free in Developer Console date with OpenType
Sanitiser
- CVE-2015-0822: Reading of local files through manipulation of form
autocomplete
- CVE-2015-0821: Local files or privileged URLs in pages can be opened
into new tabs
- CVE-2015-0819: UI Tour whitelisted sites in background tab can spoof
foreground tabs
- CVE-2015-0820: Caja Compiler JavaScript sandbox bypass
mozilla-nss was updated to version 3.17.4 to fix the following issues:
- CVE-2014-1569: QuickDER decoder length issue (bnc#910647).
- bmo#1084986: If an SSL/TLS connection fails, because client and server
don't have any common protocol version enabled, NSS has been changed to
report error code SSL\_ERROR\_UNSUPPORTED\_VERSION (instead of reporting
SSL\_ERROR\_NO\_CYPHER\_OVERLAP).
- bmo#1112461: libpkix was fixed to prefer the newest certificate, if
multiple certificates match.
- bmo#1094492: fixed a memory corruption issue during failure of keypair
generation.
- bmo#1113632: fixed a failure to reload a PKCS#11 module in FIPS mode.
- bmo#1119983: fixed interoperability of NSS server code with a LibreSSL
client.
Patch Instructions:
To install this openSUSE Security Update use YaST online\_update.
Alternatively you can run the command listed for your product:
- openSUSE 13.2:
zypper in -t patch openSUSE-2015-185=1
- openSUSE 13.1:
zypper in -t patch openSUSE-2015-185=1
To bring your system up-to-date, use "zypper patch".
Package List:
- openSUSE 13.2 (i586 x86\_64):
MozillaFirefox-36.0-14.2
MozillaFirefox-branding-upstream-36.0-14.2
MozillaFirefox-buildsymbols-36.0-14.2
MozillaFirefox-debuginfo-36.0-14.2
MozillaFirefox-debugsource-36.0-14.2
MozillaFirefox-devel-36.0-14.2
MozillaFirefox-translations-common-36.0-14.2
MozillaFirefox-translations-other-36.0-14.2
libfreebl3-3.17.4-9.1
libfreebl3-debuginfo-3.17.4-9.1
libsoftokn3-3.17.4-9.1
libsoftokn3-debuginfo-3.17.4-9.1
mozilla-nss-3.17.4-9.1
mozilla-nss-certs-3.17.4-9.1
mozilla-nss-certs-debuginfo-3.17.4-9.1
mozilla-nss-debuginfo-3.17.4-9.1
mozilla-nss-debugsource-3.17.4-9.1
mozilla-nss-devel-3.17.4-9.1
mozilla-nss-sysinit-3.17.4-9.1
mozilla-nss-sysinit-debuginfo-3.17.4-9.1
mozilla-nss-tools-3.17.4-9.1
mozilla-nss-tools-debuginfo-3.17.4-9.1
- openSUSE 13.2 (x86\_64):
libfreebl3-32bit-3.17.4-9.1
libfreebl3-debuginfo-32bit-3.17.4-9.1
libsoftokn3-32bit-3.17.4-9.1
libsoftokn3-debuginfo-32bit-3.17.4-9.1
mozilla-nss-32bit-3.17.4-9.1
mozilla-nss-certs-32bit-3.17.4-9.1
mozilla-nss-certs-debuginfo-32bit-3.17.4-9.1
mozilla-nss-debuginfo-32bit-3.17.4-9.1
mozilla-nss-sysinit-32bit-3.17.4-9.1
mozilla-nss-sysinit-debuginfo-32bit-3.17.4-9.1
- openSUSE 13.1 (i586 x86\_64):
MozillaFirefox-36.0-59.2
MozillaFirefox-branding-upstream-36.0-59.2
MozillaFirefox-buildsymbols-36.0-59.2
MozillaFirefox-debuginfo-36.0-59.2
MozillaFirefox-debugsource-36.0-59.2
MozillaFirefox-devel-36.0-59.2
MozillaFirefox-translations-common-36.0-59.2
MozillaFirefox-translations-other-36.0-59.2
libfreebl3-3.17.4-52.1
libfreebl3-debuginfo-3.17.4-52.1
libsoftokn3-3.17.4-52.1
libsoftokn3-debuginfo-3.17.4-52.1
mozilla-nss-3.17.4-52.1
mozilla-nss-certs-3.17.4-52.1
mozilla-nss-certs-debuginfo-3.17.4-52.1
mozilla-nss-debuginfo-3.17.4-52.1
mozilla-nss-debugsource-3.17.4-52.1
mozilla-nss-devel-3.17.4-52.1
mozilla-nss-sysinit-3.17.4-52.1
mozilla-nss-sysinit-debuginfo-3.17.4-52.1
mozilla-nss-tools-3.17.4-52.1
mozilla-nss-tools-debuginfo-3.17.4-52.1
- openSUSE 13.1 (x86\_64):
libfreebl3-32bit-3.17.4-52.1
libfreebl3-debuginfo-32bit-3.17.4-52.1
libsoftokn3-32bit-3.17.4-52.1
libsoftokn3-debuginfo-32bit-3.17.4-52.1
mozilla-nss-32bit-3.17.4-52.1
mozilla-nss-certs-32bit-3.17.4-52.1
mozilla-nss-certs-debuginfo-32bit-3.17.4-52.1
mozilla-nss-debuginfo-32bit-3.17.4-52.1
mozilla-nss-sysinit-32bit-3.17.4-52.1
mozilla-nss-sysinit-debuginfo-32bit-3.17.4-52.1
References:
<http://support.novell.com/security/cve/CVE-2014-1569.html>
<http://support.novell.com/security/cve/CVE-2015-0819.html>
<http://support.novell.com/security/cve/CVE-2015-0820.html>
<http://support.novell.com/security/cve/CVE-2015-0821.html>
<http://support.novell.com/security/cve/CVE-2015-0822.html>
<http://support.novell.com/security/cve/CVE-2015-0823.html>
<http://support.novell.com/security/cve/CVE-2015-0824.html>
<http://support.novell.com/security/cve/CVE-2015-0825.html>
<http://support.novell.com/security/cve/CVE-2015-0826.html>
<http://support.novell.com/security/cve/CVE-2015-0827.html>
<http://support.novell.com/security/cve/CVE-2015-0828.html>
<http://support.novell.com/security/cve/CVE-2015-0829.html>
<http://support.novell.com/security/cve/CVE-2015-0830.html>
<http://support.novell.com/security/cve/CVE-2015-0831.html>
<http://support.novell.com/security/cve/CVE-2015-0832.html>
<http://support.novell.com/security/cve/CVE-2015-0834.html>
<http://support.novell.com/security/cve/CVE-2015-0835.html>
<http://support.novell.com/security/cve/CVE-2015-0836.html>
<https://bugzilla.suse.com/910647>
<https://bugzilla.suse.com/917597>
--
To unsubscribe, e-mail: opensuse-security-announce+unsubscribe@opensuse.org
For additional commands, e-mail: opensuse-security-announce+help@opensuse.org

[0](#like "You must be logged-in to vote.")
[0](#dislike "You must be logged-in to vote.")

Reply

[Sign in to reply online](/accounts/login/?next=/archives/list/security-announce%40lists.opensuse.org/message/SDBTOLJRA7KFYU5XRVWP4REQ3XZOS2FG/)
Use email software

[Back to the thread](/archives/list/security-announce%40lists.opensuse.org/thread/SDBTOLJRA7KFYU5XRVWP4REQ3XZOS2FG/#SDBTOLJRA7KFYU5XRVWP4REQ3XZOS2FG)

[Back to the list](/archives/list/security-announce%40lists.opensuse.org/)

![HyperKitty](/static/hyperkitty/img/logo.png)
Powered by [HyperKitty](http://hyperkitty.readthedocs.org) version 1.3.12.


